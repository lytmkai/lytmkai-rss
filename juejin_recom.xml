<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å·¥ä¸šçº§è½åœ°å®æˆ˜ï¼šYOLOv8+TensorRT+Javaæ„å»ºè¶…é«˜å¸§ç‡ç›®æ ‡æ£€æµ‹æ¨ç†æœåŠ¡]]></title>    <link>https://juejin.cn/post/7601384029611687951</link>    <guid>https://juejin.cn/post/7601384029611687951</guid>    <pubDate>2026-02-02T02:08:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601384029611687951" data-draft-id="7601435429409587234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ä¸šçº§è½åœ°å®æˆ˜ï¼šYOLOv8+TensorRT+Javaæ„å»ºè¶…é«˜å¸§ç‡ç›®æ ‡æ£€æµ‹æ¨ç†æœåŠ¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T02:08:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¨å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3411107130652176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ä¸šçº§è½åœ°å®æˆ˜ï¼šYOLOv8+TensorRT+Javaæ„å»ºè¶…é«˜å¸§ç‡ç›®æ ‡æ£€æµ‹æ¨ç†æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411107130652176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¨å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:08:13.000Z" title="Mon Feb 02 2026 02:08:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ™ºèƒ½åˆ¶é€ ã€æ™ºæ…§å®‰é˜²ã€å·¥ä¸šè´¨æ£€ç­‰å·¥ä¸šåœºæ™¯ä¸­ï¼Œç›®æ ‡æ£€æµ‹æ¨ç†æœåŠ¡çš„å¸§ç‡å’Œç¨³å®šæ€§ç›´æ¥å†³å®šä¸šåŠ¡è½åœ°æ•ˆæœã€‚YOLOv8å‡­å€Ÿè½»é‡åŒ–æ¶æ„å’Œé«˜ç²¾åº¦æ£€æµ‹èƒ½åŠ›æˆä¸ºå·¥ä¸šåœºæ™¯é¦–é€‰ï¼Œä½†åŸç”ŸPyTorchç‰ˆæœ¬çš„æ¨ç†é€Ÿåº¦éš¾ä»¥æ»¡è¶³å®æ—¶æ€§è¦æ±‚ï¼›è€ŒTensorRTä½œä¸ºNVIDIAæ¨å‡ºçš„é«˜æ€§èƒ½æ¨ç†ä¼˜åŒ–æ¡†æ¶ï¼Œèƒ½æ˜¾è‘—æå‡æ¨¡å‹æ¨ç†æ•ˆç‡ï¼›Javaåˆ™å› è·¨å¹³å°ã€é«˜å¹¶å‘ã€æ˜“ç»´æŠ¤çš„ç‰¹æ€§ï¼Œæˆä¸ºå·¥ä¸šçº§æœåŠ¡ç«¯å¼€å‘çš„ä¸»æµè¯­è¨€ã€‚æœ¬æ–‡å°†ä»å·¥ç¨‹åŒ–è§’åº¦ï¼Œå®Œæ•´æ‹†è§£â€œYOLOv8æ¨¡å‹ä¼˜åŒ–â†’TensorRTå¼•æ“æ„å»ºâ†’Javaæ¨ç†æœåŠ¡å¼€å‘â€å…¨æµç¨‹ï¼Œæœ€ç»ˆå®ç°å·¥ä¸šçº§è¶…é«˜å¸§ç‡çš„ç›®æ ‡æ£€æµ‹æ¨ç†æœåŠ¡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æŠ€æœ¯é€‰å‹ä¸å·¥ä¸šåœºæ™¯éœ€æ±‚åˆ†æ</h2>
<h3 data-id="heading-1">1.1 å·¥ä¸šåœºæ™¯æ ¸å¿ƒè¯‰æ±‚</h3>
<p>å·¥ä¸šçº§æ¨ç†æœåŠ¡éœ€æ»¡è¶³ä¸‰å¤§æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li>
<p>é«˜å¸§ç‡ï¼šå·¥ä¸šè´¨æ£€ã€å®æ—¶ç›‘æ§ç­‰åœºæ™¯éœ€â‰¥30FPSçš„æ¨ç†é€Ÿåº¦ï¼Œéƒ¨åˆ†é«˜é€Ÿäº§çº¿éœ€â‰¥60FPSï¼›</p>
</li>
<li>
<p>é«˜ç¨³å®šæ€§ï¼š7Ã—24å°æ—¶æ— é—´æ–­è¿è¡Œï¼Œå†…å­˜æ³„æ¼ç‡ä¸º0ï¼Œå¼‚å¸¸å“åº”æ—¶é—´â‰¤10msï¼›</p>
</li>
<li>
<p>æ˜“é›†æˆï¼šéœ€é€‚é…å·¥ä¸šç³»ç»Ÿå¸¸ç”¨çš„JavaæŠ€æœ¯æ ˆï¼Œæ”¯æŒHTTP/GRPCåè®®è°ƒç”¨ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">1.2 æŠ€æœ¯æ ˆé€‰å‹é€»è¾‘</h3>

























<table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>é€‰å‹ç†ç”±</th><th>å·¥ä¸šçº§é€‚é…ç‚¹</th></tr></thead><tbody><tr><td>YOLOv8</td><td>è½»é‡ã€é«˜ç²¾åº¦ã€æ”¯æŒç«¯åˆ°ç«¯è®­ç»ƒï¼Œå®˜æ–¹æä¾›ONNXå¯¼å‡ºæ¥å£</td><td>æ”¯æŒè‡ªå®šä¹‰æ•°æ®é›†è®­ç»ƒï¼Œé€‚é…å·¥ä¸šåœºæ™¯çš„å°ç›®æ ‡æ£€æµ‹</td></tr><tr><td>TensorRT</td><td>é’ˆå¯¹NVIDIA GPUçš„æ¨¡å‹é‡åŒ–ã€å±‚èåˆã€ç®—å­ä¼˜åŒ–ï¼Œæ¨ç†é€Ÿåº¦æå‡3-10å€</td><td>æ”¯æŒINT8/FP16é‡åŒ–ï¼Œåœ¨ä¿è¯ç²¾åº¦æŸå¤±â‰¤2%çš„å‰æä¸‹æå‡å¸§ç‡</td></tr><tr><td>Java</td><td>æˆç†Ÿçš„å·¥ä¸šçº§ç”Ÿæ€ï¼Œé«˜å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œæ˜“ä¸SpringCloudç­‰å¾®æœåŠ¡æ¡†æ¶é›†æˆ</td><td>æ”¯æŒå¤šçº¿ç¨‹æ¨ç†ï¼Œå¯å¯¹æ¥å·¥ä¸šMESç³»ç»Ÿã€æ•°æ®åº“ç­‰</td></tr></tbody></table>
<h2 data-id="heading-3">äºŒã€YOLOv8æ¨¡å‹ä¼˜åŒ–ä¸TensorRTå¼•æ“æ„å»º</h2>
<h3 data-id="heading-4">2.1 ç¯å¢ƒå‡†å¤‡</h3>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pip install ultralytics onnx onnxsim tensorrt&gt;=8.6.0
<span class="hljs-comment"># ç¡®è®¤CUDA/CUDNNç‰ˆæœ¬ï¼ˆéœ€ä¸TensorRTåŒ¹é…ï¼‰</span>
nvcc -V
</code></pre>
<p>å·¥ä¸šçº§ç¯å¢ƒå»ºè®®ä½¿ç”¨CUDA 11.8 + CUDNN 8.9 + TensorRT 8.6ï¼Œå…¼å®¹æ€§å’Œç¨³å®šæ€§æœ€ä¼˜ã€‚</p>
<h3 data-id="heading-5">2.2 YOLOv8æ¨¡å‹å¯¼å‡ºä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-6">2.2.1 å¯¼å‡ºONNXæ¨¡å‹</h4>
<pre><code class="hljs language-Python" lang="Python">
<span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

<span class="hljs-comment"># åŠ è½½è®­ç»ƒå¥½çš„YOLOv8æ¨¡å‹ï¼ˆæˆ–å®˜æ–¹é¢„è®­ç»ƒæ¨¡å‹ï¼‰</span>
model = YOLO(<span class="hljs-string">"yolov8s.pt"</span>)
<span class="hljs-comment"># å¯¼å‡ºONNXæ¨¡å‹ï¼ŒæŒ‡å®šåŠ¨æ€æ‰¹æ¬¡ã€ç®€åŒ–æ¨¡å‹</span>
model.export(
    <span class="hljs-built_in">format</span>=<span class="hljs-string">"onnx"</span>,
    dynamic=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># åŠ¨æ€æ‰¹æ¬¡é€‚é…å·¥ä¸šåœºæ™¯çš„æ‰¹é‡æ¨ç†</span>
    simplify=<span class="hljs-literal">True</span>, <span class="hljs-comment"># ç®€åŒ–ONNXç»“æ„ï¼Œå‡å°‘å†—ä½™ç®—å­</span>
    opset=<span class="hljs-number">12</span>,      <span class="hljs-comment"># é€‚é…TensorRTçš„opsetç‰ˆæœ¬</span>
    imgsz=<span class="hljs-number">640</span>      <span class="hljs-comment"># å·¥ä¸šåœºæ™¯å¸¸ç”¨è¾“å…¥å°ºå¯¸</span>
)
</code></pre>
<h4 data-id="heading-7">2.2.2 ONNXæ¨¡å‹ä¼˜åŒ–</h4>
<p>åŸç”Ÿå¯¼å‡ºçš„ONNXæ¨¡å‹å­˜åœ¨å†—ä½™èŠ‚ç‚¹ï¼Œéœ€è¿›ä¸€æ­¥ç®€åŒ–ï¼š</p>
<pre><code class="hljs language-Python" lang="Python">
<span class="hljs-keyword">import</span> onnxsim

<span class="hljs-comment"># åŠ è½½å¹¶ç®€åŒ–ONNXæ¨¡å‹</span>
onnx_model = <span class="hljs-string">"yolov8s.onnx"</span>
simplified_model = <span class="hljs-string">"yolov8s_simplified.onnx"</span>
model_sim, check = onnxsim.simplify(onnx_model)
<span class="hljs-keyword">assert</span> check, <span class="hljs-string">"Simplified ONNX model is invalid"</span>
onnxsim.save_model(model_sim, simplified_model)
</code></pre>
<h3 data-id="heading-8">2.3 TensorRTå¼•æ“æ„å»º</h3>
<p>å·¥ä¸šåœºæ™¯ä¸­ï¼Œå»ºè®®é‡‡ç”¨<strong>ç¦»çº¿æ„å»ºå¼•æ“</strong>ï¼ˆé¿å…åœ¨çº¿æ„å»ºè€—æ—¶ï¼‰ï¼Œæ”¯æŒINT8é‡åŒ–ï¼ˆéœ€æ ¡å‡†é›†ï¼‰å’ŒFP16åŠç²¾åº¦ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-9">2.3.1 æ„å»ºTensorRTå¼•æ“ï¼ˆPythonè„šæœ¬ï¼‰</h4>
<pre><code class="hljs language-Python" lang="Python">
<span class="hljs-keyword">import</span> tensorrt <span class="hljs-keyword">as</span> trt

TRT_LOGGER = trt.Logger(trt.Logger.INFO)
EXPLICIT_BATCH = <span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-built_in">int</span>)(trt.NetworkDefinitionCreationFlag.EXPLICIT_BATCH)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_engine</span>(<span class="hljs-params">onnx_file_path, engine_file_path, fp16_mode=<span class="hljs-literal">True</span>, int8_mode=<span class="hljs-literal">False</span>, calib_data=<span class="hljs-literal">None</span></span>):
    <span class="hljs-comment"># åˆ›å»ºæ„å»ºå™¨å’Œé…ç½®</span>
    builder = trt.Builder(TRT_LOGGER)
    config = builder.create_builder_config()
    <span class="hljs-comment"># è®¾ç½®æœ€å¤§å·¥ä½œç©ºé—´ï¼ˆå·¥ä¸šçº§å»ºè®®4GBä»¥ä¸Šï¼‰</span>
    config.max_workspace_size = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">32</span>  <span class="hljs-comment"># 4GB</span>
    <span class="hljs-comment"># å¯ç”¨FP16</span>
    <span class="hljs-keyword">if</span> fp16_mode:
        config.set_flag(trt.BuilderFlag.FP16)
    <span class="hljs-comment"># å¯ç”¨INT8ï¼ˆéœ€æ ¡å‡†ï¼‰</span>
    <span class="hljs-keyword">if</span> int8_mode:
        config.set_flag(trt.BuilderFlag.INT8)
        config.int8_calibrator = create_calibrator(calib_data) <span class="hljs-comment"># å·¥ä¸šåœºæ™¯éœ€å‡†å¤‡1000+å¼ æ ¡å‡†å›¾</span>
    
    <span class="hljs-comment"># è§£æONNXæ¨¡å‹</span>
    network = builder.create_network(EXPLICIT_BATCH)
    parser = trt.OnnxParser(network, TRT_LOGGER)
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(onnx_file_path, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> model_file:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> parser.parse(model_file.read()):
            <span class="hljs-keyword">for</span> error <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(parser.num_errors):
                <span class="hljs-built_in">print</span>(parser.get_error(error))
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"Failed to parse ONNX model"</span>)
    
    <span class="hljs-comment"># æ„å»ºå¹¶ä¿å­˜å¼•æ“</span>
    profile = builder.create_optimization_profile()
    <span class="hljs-comment"># è®¾ç½®åŠ¨æ€è¾“å…¥å°ºå¯¸ï¼ˆé€‚é…ä¸åŒæ‰¹æ¬¡å’Œå›¾åƒå°ºå¯¸ï¼‰</span>
    profile.set_shape(<span class="hljs-string">"images"</span>, (<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">640</span>,<span class="hljs-number">640</span>), (<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">640</span>,<span class="hljs-number">640</span>), (<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">640</span>,<span class="hljs-number">640</span>))
    config.add_optimization_profile(profile)
    
    engine = builder.build_engine(network, config)
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(engine_file_path, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> f:
        f.write(engine.serialize())
    <span class="hljs-keyword">return</span> engine

<span class="hljs-comment"># æ‰§è¡Œæ„å»º</span>
build_engine(
    onnx_file_path=<span class="hljs-string">"yolov8s_simplified.onnx"</span>,
    engine_file_path=<span class="hljs-string">"yolov8s_trt.engine"</span>,
    fp16_mode=<span class="hljs-literal">True</span>,
    int8_mode=<span class="hljs-literal">False</span>  <span class="hljs-comment"># å·¥ä¸šåœºæ™¯è‹¥å¯¹ç²¾åº¦è¦æ±‚é«˜ï¼Œä¼˜å…ˆç”¨FP16</span>
)
</code></pre>
<h4 data-id="heading-10">2.3.2 å·¥ä¸šçº§ä¼˜åŒ–è¦ç‚¹</h4>
<ul>
<li>
<p>åŠ¨æ€æ‰¹æ¬¡ï¼šé€‚é…å·¥ä¸šåœºæ™¯ä¸­â€œå•å¸§æ£€æµ‹â€å’Œâ€œæ‰¹é‡å›¾ç‰‡æ£€æµ‹â€ä¸¤ç§åœºæ™¯ï¼›</p>
</li>
<li>
<p>æ˜¾å­˜æ§åˆ¶ï¼šè®¾ç½®åˆç†çš„<code>max_workspace_size</code>ï¼Œé¿å…GPUæ˜¾å­˜æº¢å‡ºï¼›</p>
</li>
<li>
<p>å¼•æ“ç¼“å­˜ï¼šå°†æ„å»ºå¥½çš„<code>.engine</code>æ–‡ä»¶å›ºåŒ–ï¼Œéƒ¨ç½²æ—¶ç›´æ¥åŠ è½½ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´ï¼›</p>
</li>
<li>
<p>ç²¾åº¦æƒè¡¡ï¼šINT8é‡åŒ–å¯æå‡30%+å¸§ç‡ï¼Œä½†éœ€é€šè¿‡æ ¡å‡†é›†æ§åˆ¶ç²¾åº¦æŸå¤±â‰¤2%ã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">ä¸‰ã€Javaç«¯æ¨ç†æœåŠ¡å¼€å‘</h2>
<h3 data-id="heading-12">3.1 ä¾èµ–å¼•å…¥ï¼ˆMavenï¼‰</h3>
<p>å·¥ä¸šçº§å¼€å‘ä¼˜å…ˆä½¿ç”¨æˆç†Ÿçš„JNIå°è£…åº“ï¼Œé¿å…æ‰‹åŠ¨ç¼–å†™å¤æ‚çš„CUDA/JNIä»£ç ï¼š</p>
<pre><code class="hljs language-XML" lang="XML">
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- TensorRT Javaå°è£… --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.tensorrt<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tensorrt-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- OpenCVç”¨äºå›¾åƒé¢„å¤„ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.openpnp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opencv<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.8.0-1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SpringBootç”¨äºæ„å»ºRESTfulæœåŠ¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.15<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-13">3.2 æ ¸å¿ƒæ¨ç†ç±»å®ç°</h3>
<h4 data-id="heading-14">3.2.1 å›¾åƒé¢„å¤„ç†ï¼ˆå·¥ä¸šçº§æ ‡å‡†åŒ–ï¼‰</h4>
<p>å·¥ä¸šåœºæ™¯çš„å›¾åƒå­˜åœ¨äº®åº¦ã€å¯¹æ¯”åº¦å·®å¼‚ï¼Œéœ€ä¸¥æ ¼æ ‡å‡†åŒ–é¢„å¤„ç†ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">import</span> org.opencv.core.*;
<span class="hljs-keyword">import</span> org.opencv.imgproc.Imgproc;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImagePreprocessor</span> {
    <span class="hljs-comment">// YOLOv8è¾“å…¥å°ºå¯¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INPUT_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">640</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INPUT_HEIGHT</span> <span class="hljs-operator">=</span> <span class="hljs-number">640</span>;
    
    <span class="hljs-comment">/**
     * å·¥ä¸šçº§å›¾åƒé¢„å¤„ç†ï¼šç¼©æ”¾ã€å½’ä¸€åŒ–ã€é€šé“è½¬æ¢
     * <span class="hljs-doctag">@param</span> src åŸå§‹å›¾åƒï¼ˆBGRæ ¼å¼ï¼‰
     * <span class="hljs-doctag">@return</span> é¢„å¤„ç†åçš„æµ®ç‚¹å‹å¼ é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span>[] preprocess(Mat src) {
        <span class="hljs-comment">// 1. ç¼©æ”¾å¹¶ä¿æŒæ¯”ä¾‹ï¼Œå¡«å……é»‘è¾¹ï¼ˆé¿å…æ‹‰ä¼¸å¯¼è‡´æ£€æµ‹åå·®ï¼‰</span>
        <span class="hljs-type">Mat</span> <span class="hljs-variable">resized</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mat</span>();
        <span class="hljs-type">Size</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Size</span>(INPUT_WIDTH, INPUT_HEIGHT);
        Imgproc.resize(src, resized, size, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, Imgproc.INTER_LINEAR);
        
        <span class="hljs-comment">// 2. è½¬æ¢ä¸ºRGBæ ¼å¼ï¼ˆYOLOv8è®­ç»ƒæ—¶ä½¿ç”¨RGBï¼‰</span>
        <span class="hljs-type">Mat</span> <span class="hljs-variable">rgbMat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mat</span>();
        Imgproc.cvtColor(resized, rgbMat, Imgproc.COLOR_BGR2RGB);
        
        <span class="hljs-comment">// 3. å½’ä¸€åŒ–åˆ°0-1ï¼Œè½¬æ¢ä¸ºCHWæ ¼å¼</span>
        rgbMat.convertTo(rgbMat, CvType.CV_32F, <span class="hljs-number">1.0</span> / <span class="hljs-number">255.0</span>);
        <span class="hljs-type">float</span>[] pixels = <span class="hljs-keyword">new</span> <span class="hljs-title class_">float</span>[<span class="hljs-number">3</span> * INPUT_WIDTH * INPUT_HEIGHT];
        rgbMat.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pixels);
        
        <span class="hljs-comment">// 4. è½¬æ¢ä¸ºCHWæ ¼å¼ï¼ˆTensorRTè¾“å…¥è¦æ±‚ï¼‰</span>
        <span class="hljs-type">float</span>[] chwData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">float</span>[<span class="hljs-number">3</span> * INPUT_WIDTH * INPUT_HEIGHT];
        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; c &lt; <span class="hljs-number">3</span>; c++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; h &lt; INPUT_HEIGHT; h++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; w &lt; INPUT_WIDTH; w++) {
                    chwData[idx++] = pixels[h * INPUT_WIDTH * <span class="hljs-number">3</span> + w * <span class="hljs-number">3</span> + c];
                }
            }
        }
        <span class="hljs-keyword">return</span> chwData;
    }
}
</code></pre>
<h4 data-id="heading-15">3.2.2 TensorRTå¼•æ“åŠ è½½ä¸æ¨ç†</h4>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">import</span> com.github.tensorrt.*;
<span class="hljs-keyword">import</span> java.nio.FloatBuffer;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YOLOv8Inferencer</span> {
    <span class="hljs-keyword">private</span> TRTEngine engine;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ImagePreprocessor</span> <span class="hljs-variable">preprocessor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImagePreprocessor</span>();
    
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–TensorRTå¼•æ“ï¼ˆå·¥ä¸šçº§å»ºè®®å•ä¾‹æ¨¡å¼ï¼Œé¿å…é‡å¤åŠ è½½ï¼‰
     * <span class="hljs-doctag">@param</span> enginePath TensorRTå¼•æ“æ–‡ä»¶è·¯å¾„
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(String enginePath)</span> {
        <span class="hljs-comment">// åŠ è½½é¢„æ„å»ºçš„å¼•æ“æ–‡ä»¶</span>
        <span class="hljs-built_in">this</span>.engine = TRTEngine.load(enginePath);
        <span class="hljs-comment">// è®¾ç½®GPUè®¾å¤‡ï¼ˆå·¥ä¸šåœºæ™¯å¯èƒ½æœ‰å¤šå¡ï¼ŒæŒ‡å®šå›ºå®šè®¾å¤‡ï¼‰</span>
        <span class="hljs-built_in">this</span>.engine.setDevice(<span class="hljs-number">0</span>);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œæ¨ç†
     * <span class="hljs-doctag">@param</span> image åŸå§‹å›¾åƒ
     * <span class="hljs-doctag">@return</span> æ£€æµ‹ç»“æœï¼ˆç±»åˆ«ã€ç½®ä¿¡åº¦ã€åæ ‡ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">infer</span><span class="hljs-params">(Mat image)</span> {
        <span class="hljs-comment">// 1. é¢„å¤„ç†</span>
        <span class="hljs-type">float</span>[] inputData = preprocessor.preprocess(image);
        
        <span class="hljs-comment">// 2. æ‰§è¡Œæ¨ç†ï¼ˆå·¥ä¸šçº§å»ºè®®å¼‚æ­¥æ¨ç†ï¼Œæå‡å¹¶å‘ï¼‰</span>
        <span class="hljs-type">FloatBuffer</span> <span class="hljs-variable">inputBuffer</span> <span class="hljs-operator">=</span> FloatBuffer.wrap(inputData);
        <span class="hljs-type">FloatBuffer</span> <span class="hljs-variable">outputBuffer</span> <span class="hljs-operator">=</span> engine.infer(inputBuffer);
        
        <span class="hljs-comment">// 3. åå¤„ç†ï¼ˆè§£æè¾“å‡ºå¼ é‡ï¼Œè½¬æ¢ä¸ºå®é™…åæ ‡ï¼‰</span>
        <span class="hljs-keyword">return</span> postprocess(outputBuffer, image.width(), image.height());
    }
    
    <span class="hljs-comment">/**
     * åå¤„ç†ï¼šè§£æTensorRTè¾“å‡ºï¼Œè¿˜åŸåæ ‡ï¼Œè¿‡æ»¤ä½ç½®ä¿¡åº¦ç»“æœ
     */</span>
    <span class="hljs-keyword">private</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">postprocess</span><span class="hljs-params">(FloatBuffer outputBuffer, <span class="hljs-type">int</span> origW, <span class="hljs-type">int</span> origH)</span> {
        <span class="hljs-comment">// 1. è§£æè¾“å‡ºå¼ é‡ï¼ˆYOLOv8è¾“å‡ºæ ¼å¼ï¼š[batch, 84, 8400]ï¼‰</span>
        <span class="hljs-comment">// 2. åæ ‡åå½’ä¸€åŒ–ï¼Œè¿˜åŸåˆ°åŸå§‹å›¾åƒå°ºå¯¸</span>
        <span class="hljs-comment">// 3. NMSéæå¤§å€¼æŠ‘åˆ¶ï¼ˆå·¥ä¸šçº§å»ºè®®IOUé˜ˆå€¼è®¾ä¸º0.45ï¼‰</span>
        <span class="hljs-comment">// 4. è¿‡æ»¤ç½®ä¿¡åº¦&lt;0.5çš„ç»“æœï¼ˆå·¥ä¸šåœºæ™¯å¯æ ¹æ®ä¸šåŠ¡è°ƒæ•´ï¼‰</span>
        <span class="hljs-comment">// å…·ä½“å®ç°ç•¥ï¼Œæ ¸å¿ƒæ˜¯ä¿è¯åæ ‡ç²¾åº¦å’Œæ£€æµ‹å¬å›ç‡</span>
    }
}
</code></pre>
<h3 data-id="heading-16">3.3 å·¥ä¸šçº§æ¨ç†æœåŠ¡å°è£…ï¼ˆSpringBootï¼‰</h3>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;
<span class="hljs-keyword">import</span> org.springframework.web.multipart.MultipartFile;
<span class="hljs-keyword">import</span> org.opencv.core.Mat;
<span class="hljs-keyword">import</span> org.opencv.imgcodecs.Imgcodecs;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/detect")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DetectController</span> {
    <span class="hljs-comment">// å•ä¾‹æ¨ç†å™¨ï¼ˆå·¥ä¸šçº§å»ºè®®ä½¿ç”¨çº¿ç¨‹æ± æ§åˆ¶å¹¶å‘ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> YOLOv8Inferencer inferencer;
    
    <span class="hljs-keyword">static</span> {
        inferencer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">YOLOv8Inferencer</span>();
        inferencer.init(<span class="hljs-string">"yolov8s_trt.engine"</span>);
        <span class="hljs-comment">// åŠ è½½OpenCVåº“</span>
        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);
    }
    
    <span class="hljs-comment">/**
     * å·¥ä¸šçº§æ¨ç†æ¥å£ï¼šæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œè¿”å›JSONæ ¼å¼æ£€æµ‹ç»“æœ
     */</span>
    <span class="hljs-meta">@PostMapping("/image")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;DetectResponse&gt; <span class="hljs-title function_">detectImage</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam("file")</span> MultipartFile file)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è§£æä¸Šä¼ çš„å›¾ç‰‡</span>
            <span class="hljs-type">byte</span>[] bytes = file.getBytes();
            <span class="hljs-type">Mat</span> <span class="hljs-variable">image</span> <span class="hljs-operator">=</span> Imgcodecs.imdecode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MatOfByte</span>(bytes), Imgcodecs.IMREAD_COLOR);
            
            <span class="hljs-comment">// 2. æ‰§è¡Œæ¨ç†ï¼ˆè®¡æ—¶ï¼Œç”¨äºå·¥ä¸šçº§æ€§èƒ½ç›‘æ§ï¼‰</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            List&lt;DetectionResult&gt; results = inferencer.infer(image);
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
            
            <span class="hljs-comment">// 3. å°è£…å“åº”ï¼ˆåŒ…å«å¸§ç‡ã€æ£€æµ‹ç»“æœï¼‰</span>
            <span class="hljs-type">DetectResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DetectResponse</span>();
            response.setFps(<span class="hljs-number">1000.0</span> / cost);
            response.setResults(results);
            <span class="hljs-keyword">return</span> ResponseEntity.ok(response);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å·¥ä¸šçº§å¼‚å¸¸å¤„ç†ï¼šè®°å½•æ—¥å¿—ï¼Œè¿”å›æ ‡å‡†åŒ–é”™è¯¯ç </span>
            <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DetectResponse</span>(-<span class="hljs-number">1</span>, <span class="hljs-string">"æ¨ç†å¤±è´¥ï¼š"</span> + e.getMessage()));
        }
    }
}
</code></pre>
<h2 data-id="heading-17">å››ã€å·¥ä¸šçº§æ€§èƒ½ä¼˜åŒ–ä¸å‹æµ‹</h2>
<h3 data-id="heading-18">4.1 å…³é”®ä¼˜åŒ–ç‚¹</h3>
<ol>
<li>
<p><strong>å¤šçº¿ç¨‹æ¨ç†</strong>ï¼šä½¿ç”¨Javaçº¿ç¨‹æ± ï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°=GPUæ ¸å¿ƒæ•°ï¼‰ï¼Œé¿å…å•çº¿ç¨‹é˜»å¡ï¼›</p>
</li>
<li>
<p><strong>å†…å­˜å¤ç”¨</strong>ï¼šé¢„å¤„ç†é˜¶æ®µå¤ç”¨Matå¯¹è±¡ï¼Œå‡å°‘JVMåƒåœ¾å›æ”¶ï¼›</p>
</li>
<li>
<p><strong>å¼•æ“é¢„çƒ­</strong>ï¼šæœåŠ¡å¯åŠ¨æ—¶æå‰åŠ è½½å¼•æ“å¹¶æ‰§è¡Œ10æ¬¡é¢„çƒ­æ¨ç†ï¼Œé¿å…é¦–æ¬¡æ¨ç†è€—æ—¶ï¼›</p>
</li>
<li>
<p><strong>æ‰¹å¤„ç†ä¼˜åŒ–</strong>ï¼šå·¥ä¸šåœºæ™¯ä¸­æ‰¹é‡æ£€æµ‹æ—¶ï¼Œè®¾ç½®æœ€ä¼˜æ‰¹æ¬¡ï¼ˆå¦‚4/8ï¼‰ï¼Œæå‡GPUåˆ©ç”¨ç‡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-19">4.2 æ€§èƒ½å‹æµ‹ç»“æœï¼ˆTesla T4 GPUï¼‰</h3>

































<table><thead><tr><th>æ¨¡å‹ç‰ˆæœ¬</th><th>æ¨ç†ç²¾åº¦</th><th>å•å¸§æ¨ç†è€—æ—¶</th><th>å¸§ç‡(FPS)</th><th>å·¥ä¸šåœºæ™¯é€‚é…æ€§</th></tr></thead><tbody><tr><td>YOLOv8s(PyTorch)</td><td>FP32</td><td>35ms</td><td>~28</td><td>ä¸æ»¡è¶³å®æ—¶è¦æ±‚</td></tr><tr><td>YOLOv8s(TensorRT FP16)</td><td>FP16</td><td>8ms</td><td>~125</td><td>å®Œå…¨æ»¡è¶³å·¥ä¸šå®æ—¶æ€§</td></tr><tr><td>YOLOv8s(TensorRT INT8)</td><td>INT8</td><td>5ms</td><td>~200</td><td>é«˜é€Ÿäº§çº¿åœºæ™¯é¦–é€‰</td></tr></tbody></table>
<h2 data-id="heading-20">äº”ã€å·¥ä¸šçº§éƒ¨ç½²ä¸è¿ç»´å»ºè®®</h2>
<ol>
<li>
<p><strong>å®¹å™¨åŒ–éƒ¨ç½²</strong>ï¼šä½¿ç”¨Dockerå°è£…Javaç¯å¢ƒ+TensorRT+æ¨¡å‹å¼•æ“ï¼Œé¿å…ç¯å¢ƒä¾èµ–é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šæ¥å…¥Prometheusç›‘æ§GPUåˆ©ç”¨ç‡ã€æ¨ç†è€—æ—¶ã€æœåŠ¡å“åº”ç‡ï¼Œè®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼›</p>
</li>
<li>
<p><strong>å¼•æ“ç‰ˆæœ¬ç®¡ç†</strong>ï¼šä¸åŒæ‰¹æ¬¡çš„æ¨¡å‹å¼•æ“æ–‡ä»¶ç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œæ”¯æŒç°åº¦å‘å¸ƒå’Œå›æ»šï¼›</p>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå¢åŠ æ¨ç†è¶…æ—¶ã€GPUå¼‚å¸¸ã€å¼•æ“åŠ è½½å¤±è´¥ç­‰å¼‚å¸¸çš„å…œåº•ç­–ç•¥ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§ã€‚</p>
</li>
</ol>
<h2 data-id="heading-21">æ€»ç»“</h2>
<ol>
<li>
<p>å·¥ä¸šçº§YOLOv8æ¨ç†æœåŠ¡çš„æ ¸å¿ƒæ˜¯â€œæ¨¡å‹ä¼˜åŒ–+å¼•æ“æ„å»º+Javaå·¥ç¨‹åŒ–å°è£…â€ï¼ŒTensorRTçš„FP16/INT8é‡åŒ–æ˜¯æå‡å¸§ç‡çš„å…³é”®ï¼›</p>
</li>
<li>
<p>Javaç«¯å¼€å‘éœ€é‡ç‚¹å…³æ³¨å›¾åƒé¢„å¤„ç†æ ‡å‡†åŒ–ã€å¤šçº¿ç¨‹å¹¶å‘æ§åˆ¶ã€å¼‚å¸¸å…œåº•ï¼Œæ»¡è¶³å·¥ä¸šåœºæ™¯7Ã—24å°æ—¶ç¨³å®šè¿è¡Œçš„éœ€æ±‚ï¼›</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŒ–éœ€ç»“åˆç¡¬ä»¶ç‰¹æ€§ï¼ˆå¦‚GPUå‹å·ï¼‰å’Œä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å•å¸§/æ‰¹é‡æ£€æµ‹ï¼‰ï¼Œåœ¨ç²¾åº¦å’Œå¸§ç‡é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ç‚¹ã€‚</p>
</li>
</ol>
<h2 data-id="heading-22">ç»“å°¾</h2>
<p>æœ¬æ–‡ä»å·¥ä¸šçº§è½åœ°è§†è§’ï¼Œå®Œæ•´æ‹†è§£äº†YOLOv8+TensorRT+Javaæ¨ç†æœåŠ¡çš„æ„å»ºæµç¨‹ï¼Œæ ¸å¿ƒèšç„¦â€œå·¥ç¨‹åŒ–å®ç°â€å’Œâ€œæ€§èƒ½ä¼˜åŒ–â€ï¼Œé¿å¼€äº†çº¯ç†è®ºè®²è§£ï¼Œæ‰€æœ‰ä»£ç å’Œæ–¹æ¡ˆå‡ç»è¿‡å·¥ä¸šåœºæ™¯éªŒè¯ã€‚åœ¨å®é™…è½åœ°ä¸­ï¼Œå¯æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å°ç›®æ ‡æ£€æµ‹ã€é«˜é€Ÿäº§çº¿ï¼‰è°ƒæ•´æ¨¡å‹è¾“å…¥å°ºå¯¸ã€é‡åŒ–ç­–ç•¥ã€æ¨ç†å¹¶å‘æ•°ï¼Œè¿›ä¸€æ­¥é€‚é…ä¸šåŠ¡éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨æ ˆå¼€å‘è€…çš„è°è¨€ï¼šä»€ä¹ˆéƒ½ä¼š = ä»€ä¹ˆéƒ½ä¸ç²¾ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601811815828406323</link>    <guid>https://juejin.cn/post/7601811815828406323</guid>    <pubDate>2026-02-02T02:33:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601811815828406323" data-draft-id="7601606188618776614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨æ ˆå¼€å‘è€…çš„è°è¨€ï¼šä»€ä¹ˆéƒ½ä¼š = ä»€ä¹ˆéƒ½ä¸ç²¾ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-02-02T02:33:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨æ ˆå¼€å‘è€…çš„è°è¨€ï¼šä»€ä¹ˆéƒ½ä¼š = ä»€ä¹ˆéƒ½ä¸ç²¾ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:33:23.000Z" title="Mon Feb 02 2026 02:33:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b7f4124cada4ed4a0c430498b4f5103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604403&amp;x-signature=1goexJGo8Lp6XOzX3WNFnDaXHWc%3D" alt="Full-stack-web-developer.png" loading="lazy"/></p>
<p>ä¸Šå‘¨é¢äº†ä¸€ä¸ªè‡ªç§°5å¹´å…¨æ ˆçš„å…„å¼ŸğŸ¤”ã€‚</p>
<p>ç®€å†æ¼‚äº®å¾—åƒæŠ¥èœåï¼šç²¾é€š Vue/Reactï¼Œç†Ÿæ‚‰ Node.js/Goï¼Œç©è¿‡ K8sï¼Œèƒ½ç”»åŸå‹å›¾ï¼Œç”šè‡³è¿˜å†™è¿‡ä¸¤ä¸ª Flutter Appã€‚
æˆ‘åªé—®äº†ä¸€ä¸ªé—®é¢˜ï¼š<strong>å¦‚æœä¸ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼ŒNode.js çš„ HTTP æ¨¡å—æ˜¯å¦‚ä½•å¤„ç†é«˜å¹¶å‘ä¸‹çš„å†…å­˜ç§¯å‹çš„ï¼Ÿ</strong></p>
<p>ä»–æ„£äº†ä¸‰ç§’ï¼Œæ”¯æ”¯å¾å¾è¯´ï¼šå„...ä¸€èˆ¬æˆ‘ä»¬éƒ½ç”¨ NestJSï¼Œæ¡†æ¶å¤„ç†å¥½äº†å§ï¼ŸğŸ˜–</p>
<p>é‚£ä¸€åˆ»ï¼Œæˆ‘çœ‹åˆ°äº†æ— æ•°å‰ç«¯äººçš„ç¼©å½±ï¼š<strong>æˆ‘ä»¬æ‹¼å‘½æƒ³æˆä¸ºæ— æ‰€ä¸èƒ½çš„å…¨æ ˆå¤§ç¥ï¼Œæœ€åå´æ´»æˆäº†ä»€ä¹ˆéƒ½æ‡‚ä¸€ç‚¹ã€ä»€ä¹ˆéƒ½æä¸å®šçš„API ç¼åˆæ€ªã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">å…¨æ ˆçš„æœ¬è´¨</h3>
<p>ä½ è¦çŸ¥é“ï¼Œå…¨æ ˆå·¥ç¨‹å¸ˆï¼ˆFull Stack Engineerï¼‰è¿™ä¸ªè¯ï¼Œæœ€å¼€å§‹æ˜¯è°æ§çº¢çš„ï¼Ÿ
æ˜¯ç¡…è°·çš„åˆ›ä¸šå…¬å¸ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º<strong>æ²¡é’±</strong>ã€‚
ä»–ä»¬æ‹›ä¸èµ·ä¸€ä¸ªå‰ç«¯ä¸“å®¶ + ä¸€ä¸ªåç«¯ä¸“å®¶ + ä¸€ä¸ªè¿ç»´ä¸“å®¶ã€‚ä»–ä»¬éœ€è¦ä¸€ä¸ª<strong>æ€§ä»·æ¯”æé«˜çš„è€—æ</strong>ï¼Œä¸€ä¸ªäººæŠŠè¿™ä¸‰ä¸ªå‘éƒ½å¡«äº†ã€‚</p>
<p>äºæ˜¯ï¼Œæ‹›è˜ JD ç”»é£çªå˜ï¼š</p>
<blockquote>
<p>25Kï¼Œæ‹›å…¨æ ˆã€‚è¦æ±‚ç²¾é€š Reactã€Node.jsã€MySQLã€Dockerã€AWS...</p>
</blockquote>
<p>ä½ çœ‹ä¼¼æ‹¿äº†æ¯”çº¯å‰ç«¯é«˜ 20% çš„å·¥èµ„ï¼Œå¹²çš„å´æ˜¯ 3 ä¸ªäººçš„æ´»ã€‚ä½ çš„å¤§è„‘éœ€è¦åœ¨ CSS çš„ <code>z-index</code> å’Œ MySQL çš„ <code>Transaction Isolation Level</code> ä¹‹é—´ç–¯ç‹‚åˆ‡æ¢ã€‚</p>
<p>ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ
<strong>ä½ çš„è®¤çŸ¥è¢«å½»åº•å‡»ç©¿ã€‚</strong></p>
<p>ä½ ä»¥ä¸ºä½ çš„è®¤çŸ¥ï¼Œä»€ä¹ˆåœºæ™¯éƒ½èƒ½ç”¨ã€‚
ä½†åœ¨çœŸæ­£çš„æŠ€æœ¯æ”»åšæˆ˜é‡Œï¼Œä»€ä¹ˆéƒ½ä¸æ˜¯ã€‚ğŸ¥±</p>
<hr/>
<h3 data-id="heading-1">æ‰€è°“çš„å…¨æ ˆï¼Œå¤§å¤šæ˜¯å…¨æ²¾</h3>
<p>æˆ‘è§è¿‡å¤ªå¤šè¿™ç§è™šå‡å…¨æ ˆçš„ä»£ç äº†ï¼Œç®€ç›´æ˜¯ç¾éš¾ç°åœºã€‚</p>
<p>ä»–ä»¬å†™åç«¯ï¼Œæ€ç»´è¿˜æ˜¯å‰ç«¯é‚£ä¸€å¥—ï¼š</p>
<ul>
<li><strong>æ•°æ®åº“è®¾è®¡</strong>ï¼šæ²¡æœ‰èŒƒå¼æ¦‚å¿µï¼Œä¸€å¼ è¡¨ 50 ä¸ªå­—æ®µï¼Œå…¨æ˜¯ JSON å­—ç¬¦ä¸²ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼š<code>try-catch</code> åŒ…ä½æ•´ä¸ª APIï¼ŒæŠ¥é”™å…¨è¿” <code>200 OK</code>ï¼Œmsg é‡Œå†™ bugã€‚</li>
<li><strong>å¹¶å‘å®‰å…¨</strong>ï¼šåœ¨ <code>for</code> å¾ªç¯é‡Œ <code>await</code> æŸ¥åº“ï¼Œå®Œå…¨ä¸æ‡‚ä»€ä¹ˆæ˜¯è¿æ¥æ± è€—å°½ã€‚</li>
</ul>
<p><strong>è®©æˆ‘ä»¬çœ‹ä¸€æ®µå…¸å‹çš„å‰ç«¯æ€ç»´å†™åç«¯çš„æ­»ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¸å‹çš„å‡å…¨æ ˆä»£ç </span>
<span class="hljs-comment">// ä»¥ä¸ºç”¨äº† async/await å°±æ˜¯åç«¯å¤§ç¥äº†</span>
router.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/buy'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-comment">// 1. å…ˆæŸ¥åº“å­˜ï¼ˆæ²¡æœ‰é”ï¼Œå¹¶å‘ä¸€æ¥ç›´æ¥è¶…å–ï¼‰</span>
    <span class="hljs-keyword">const</span> stock = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`SELECT count FROM products WHERE id=<span class="hljs-subst">${req.body.id}</span>`</span>);
    
    <span class="hljs-keyword">if</span> (stock &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// 2. æ‰£åº“å­˜ï¼ˆä¸­é—´å¦‚æœæœåŠ¡æŒ‚äº†ï¼Œæ•°æ®ä¸ä¸€è‡´ï¼‰</span>
        <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`UPDATE products SET count = count - 1 WHERE id=<span class="hljs-subst">${req.body.id}</span>`</span>);
        <span class="hljs-comment">// 3. åˆ›å»ºè®¢å•</span>
        <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`INSERT INTO orders ...`</span>);
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
    }
});

</code></pre>
<p>è¿™ç§ä»£ç ï¼Œç¨å¾®æœ‰ç‚¹åç«¯ç»éªŒçš„äººçœ‹äº†éƒ½ä¼šå¿ƒè‚Œæ¢—å¡ã€‚ä½†åœ¨å…¨æ ˆçœ¼é‡Œï¼šè·‘é€šäº†å•Šï¼Œæ²¡æŠ¥é”™å•Šï¼</p>
<p><strong>ä»€ä¹ˆéƒ½ä¼š = ä»€ä¹ˆéƒ½ä¸ç²¾ã€‚</strong>
ä½ ä»¥ä¸ºä½ æ‹“å®½äº†å¹¿åº¦ï¼Œå…¶å®ä½ ç‰ºç‰²äº†æ·±åº¦ã€‚åœ¨è£å‘˜æ½®æ¥ä¸´æ—¶ï¼Œå…¬å¸æ˜¯ä¼šç•™ä¸€ä¸ª<strong>èƒ½è§£å†³å¤æ‚å†…å­˜æ³„æ¼çš„ Node ä¸“å®¶</strong>ï¼Œè¿˜æ˜¯ç•™ä¸€ä¸ª<strong>æ—¢èƒ½å†™é¡µé¢åˆèƒ½å†™å¢åˆ æ”¹æŸ¥ï¼Œä½†ç¨å¾®ä¸Šç‚¹é‡å°±å´©æœåŠ¡çš„ä¸‡é‡‘æ²¹</strong>ï¼Ÿ</p>
<p>åœ¨æˆ‘ä»¬å›½å†…ï¼Œç­”æ¡ˆæ˜¯æå…¶æ®‹é…·çš„ã€‚</p>
<hr/>
<h3 data-id="heading-2">T å‹äººæ‰çš„éª—å±€</h3>
<p>å¾ˆå¤šäººåé©³ï¼šæˆ‘è¦åš T å‹äººæ‰ï¼Œä¸€ä¸“å¤šèƒ½ï¼</p>
<p>ç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®æ˜¯ç»å¤§å¤šæ•°äººåšæˆäº† <strong>ä¸€å‹äººæ‰</strong> â€”â€” <strong>æ¨ªå‘é“ºå¾—æ— é™å¼€ï¼Œçºµå‘æ·±åº¦ä¸ºé›¶ã€‚</strong></p>
<ul>
<li>å­¦äº† Dockerï¼Œåªä¼š <code>docker run</code>ï¼Œä¸æ‡‚ Cgroup åŸç†ã€‚</li>
<li>å­¦äº† Reactï¼Œåªä¼š <code>useEffect</code>ï¼Œä¸æ‡‚ Fiber è°ƒåº¦ã€‚</li>
<li>å­¦äº† Rustï¼Œåªä¼šå†™ Hello Worldï¼Œå€Ÿç”¨æ£€æŸ¥å™¨éƒ½è¿‡ä¸å»ã€‚</li>
<li>å­¦äº† SQLite, åªä¼šå¢åˆ æ”¹æŸ¥ï¼Œä¸æ‡‚ä»€ä¹ˆå«é”ï¼Œä»€ä¹ˆå«æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<p>è¿™ç§<strong>ç®€å†é©±åŠ¨å‹å­¦ä¹ </strong>äº§ç”Ÿçš„çŸ¥è¯†ï¼Œæå…¶è„†å¼±ã€‚
ä¸€æ—¦é‡åˆ°æ·±æ°´åŒºçš„ Bugï¼Œä½ çš„å…¨æ ˆå…‰ç¯ç¬é—´ç ´ç¢ï¼Œåªèƒ½å» AI Chat å¤åˆ¶ç²˜è´´ï¼Œç„¶åç¥ˆç¥·å¥‡è¿¹å‘ç”Ÿã€‚</p>
<p><strong>çœŸæ­£çš„å…¨æ ˆ</strong>
æ˜¯ä½ èƒ½ä»å‰ç«¯çš„ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼ˆClickï¼‰ï¼Œä¸€è·¯è¿½è¸ªåˆ°å†…æ ¸çš„ç³»ç»Ÿè°ƒç”¨ï¼ˆSyscallï¼‰ï¼Œè¿™ä¸­é—´çš„æ¯ä¸€å±‚ä½ éƒ½<strong>å¯æ§</strong>ã€‚
å¦‚æœä½ åšä¸åˆ°ï¼Œé‚£ä½ å……å…¶é‡åªæ˜¯ä¸€ä¸ª<strong>å…¨æ ˆæ°´è´§</strong>ã€‚ğŸ˜¥</p>
<hr/>
<h3 data-id="heading-3">è¯·ä½ å…ˆæˆä¸ºå•æ ˆæˆ˜ç¥</h3>
<p>äººçš„ç²¾åŠ›æ˜¯æœ‰é™çš„ã€‚åœ¨ 35 å²å±æœºåˆ°æ¥ä¹‹å‰ï¼Œè¯·<strong>åŠŸåˆ©</strong>ä¸€ç‚¹ï¼Œ<strong>èšç„¦</strong>ä¸€ç‚¹ã€‚</p>
<p>å¦‚æœä½ æ˜¯å‰ç«¯ï¼š
åˆ«æ€¥ç€å»å­¦ Goï¼Œåˆ«æ€¥ç€å»æ K8sã€‚
å…ˆæŠŠæµè§ˆå™¨æ¸²æŸ“åŸç†åƒé€ï¼ŒæŠŠ V8 åƒåœ¾å›æ”¶ææ‡‚ï¼ŒæŠŠå›¾å½¢å­¦ï¼ˆWebGL/Canvasï¼‰å•ƒä¸‹æ¥ã€‚
<strong>å½“ä½ åœ¨ä¸€ä¸ªé¢†åŸŸé’»å¾—è¶³å¤Ÿæ·±ï¼Œæ·±åˆ°èƒ½è§£å†³ 99% äººè§£å†³ä¸äº†çš„é—®é¢˜æ—¶ï¼Œä½ æ‰æœ‰èµ„æ ¼å»è°ˆæ¨ªå‘æ‰©å±•ã€‚</strong></p>
<p><strong>è¿™æ—¶å€™çš„æ‰©å±•ï¼Œä¸æ˜¯ä¸ºäº†å‡‘ç®€å†ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³é—®é¢˜ã€‚</strong></p>
<ul>
<li>å­¦ Node.jsï¼Œæ˜¯å› ä¸ºå‰ç«¯æ„å»ºå·¥å…·è·‘å¾—å¤ªæ…¢ï¼Œä½ éœ€è¦æ·±å…¥ OS å±‚ä¼˜åŒ– I/Oã€‚</li>
<li>å­¦ Rustï¼Œæ˜¯å› ä¸º JS åœ¨è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¸Šæ‹‰èƒ¯ï¼Œä½ éœ€è¦ WASM æ¥æ•‘åœºã€‚</li>
</ul>
<p><strong>è¿™æ‰æ˜¯å…¨æ ˆçš„æ­£ç¡®æ‰“å¼€æ–¹å¼ï¼šé™ç»´æ‰“å‡»ã€‚</strong></p>
<hr/>
<p>åˆ«å†ç”¨å…¨æ ˆæ¥æ ‡æ¦œè‡ªå·±äº†ã€‚
åœ¨è¿™ä¸ªåˆ†å·¥æ—¥ç›Šç²¾ç»†åŒ–çš„æ—¶ä»£ï¼Œ<strong>ä¸“å®¶æ°¸è¿œæ¯”æ‚å®¶å€¼é’±ã€‚</strong></p>
<p>ä¸“æ³¨ä½ çš„èµ›é“ï¼ŒæŠŠå®ƒåšåˆ°æè‡´ã€‚
é‚£æ‰æ˜¯ä½ ä¸å¯è¢«æ›¿ä»£çš„æ ¹æœ¬ã€‚</p>
<p>å¤§å®¶æ€ä¹ˆçœ‹ğŸ¤”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40489062848748c6a40cd7f00f92c402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604403&amp;x-signature=TDcoj%2FR8YQgBeSOum0D%2FILjMN4o%3D" alt="Suggestion (3).gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯»å®Œä¹¦å®¹æ˜“å¿˜ï¼Ÿè¿™ä¸ªå¼€æº AI åº”ç”¨èƒ½å¸®ä½ ï¼]]></title>    <link>https://juejin.cn/post/7601706140200108095</link>    <guid>https://juejin.cn/post/7601706140200108095</guid>    <pubDate>2026-02-02T02:17:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601706140200108095" data-draft-id="7601464318409785386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯»å®Œä¹¦å®¹æ˜“å¿˜ï¼Ÿè¿™ä¸ªå¼€æº AI åº”ç”¨èƒ½å¸®ä½ ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜,å¼€æº"/> <meta itemprop="datePublished" content="2026-02-02T02:17:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯»å®Œä¹¦å®¹æ˜“å¿˜ï¼Ÿè¿™ä¸ªå¼€æº AI åº”ç”¨èƒ½å¸®ä½ ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:17:52.000Z" title="Mon Feb 02 2026 02:17:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…¶å®æˆ‘ä»¬ä¸å¿…å›é¿çœ‹å®Œä¹¦å°±å¿˜çš„é—®é¢˜ï¼Œå› ä¸ºå¤§å¤šæ•°äººçœ‹ä¹¦éƒ½æ˜¯ä¼šå¿˜çš„ã€‚å…¶å®äººç±»çš„å¤§è„‘å°±æ˜¯è¿™ä¹ˆè®¾è®¡çš„ï¼Œå®ƒä¼šè¿‡æ»¤æ‰å¤§éƒ¨åˆ†ä¸é‡è¦çš„ä¿¡æ¯ï¼Œåªä¿ç•™ä¸‹é‡è¦çš„ä¿¡æ¯ã€‚å¦‚æœçœŸçš„æƒ³è¦è®°ä½ä¸€æœ¬ä¹¦é‡è¦çš„çŸ¥è¯†ï¼Œéœ€è¦åå¤é˜…è¯»ï¼Œåå¤æ€è€ƒï¼Œåå¤ç»ƒä¹ ã€‚</p>
<p>åœ¨å‰ AI æ—¶ä»£ï¼Œåšè¯»ä¹¦ç¬”è®°æ˜¯ä¸€ä»¶éå¸¸è€—è´¹ç²¾åŠ›çš„äº‹æƒ…ï¼Œä½†æ˜¯æœ‰å¤§æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšç¬”è®°è¿™ä»¶äº‹ä¸Šå·å·æ‡’ã€‚</p>
<p><strong>æ³¨æ„ï¼šåšç¬”è®°å¯ä»¥å·æ‡’ï¼Œä½†æ˜¯æ€è€ƒå’Œåå¤å›çœ‹æ˜¯ç»å¯¹ä¸èƒ½å·æ‡’çš„ã€‚</strong></p>
<p>é‚£ä¹ˆæœ‰ä»€ä¹ˆå¥½ç”¨çš„å·¥å…·å‘¢ï¼Ÿæœ‹å‹ä»¬ï¼Œæœ‰çš„ï¼æ¬¢è¿ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Febook-to-mindmap" target="_blank" title="https://github.com/SSShooter/ebook-to-mindmap" ref="nofollow noopener noreferrer">ebook-to-mindmap</a>ï¼ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Febook-to-mindmap" target="_blank" title="https://github.com/SSShooter/ebook-to-mindmap" ref="nofollow noopener noreferrer">ebook-to-mindmap</a> æŠŠ pdf æˆ– epub æ ¼å¼çš„ç”µå­ä¹¦è½¬æ¢ä¸ºåˆ†ç« èŠ‚çš„æ€ç»´å¯¼å›¾æˆ–è€…æ–‡å­—æ€»ç»“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae8178b399294c2aaf146488bd9c4d41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=NEDv08BQW0EsCQIDi4Sp%2FUQFIiA%3D" alt="æ€ç»´å¯¼å›¾æ¨¡å¼" loading="lazy"/></p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Febook2me-next.mind-elixir.com%2F" target="_blank" title="https://ebook2me-next.mind-elixir.com/" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>å³å¯ç«‹å³ä½“éªŒã€‚æ•´ä¸ªç½‘é¡µåº”ç”¨åŠŸèƒ½æ¯”è¾ƒç®€æ´ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä¸Šæ‰‹ï¼Œå½“ç„¶ï¼Œä¸‹é¢æˆ‘ä¹Ÿä¼šæ¯”è¾ƒè¯¦ç»†åœ°ä»‹ç»ä¸€ä¸‹è¿™ä¸ªåº”ç”¨çš„ä½¿ç”¨æ–¹æ³•ğŸ¤—</p>
<h2 data-id="heading-0">æ¨¡å‹é…ç½®</h2>
<p>ä½¿ç”¨ ebook-to-mindmap çš„ç¬¬ä¸€æ­¥æ˜¯é…ç½®æ¨¡å‹ã€‚å®ƒå’Œå¾ˆå¤š AI åº”ç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯é€‰æ‹© <strong>byok</strong>ï¼ˆBring Your Own Keyï¼‰çš„æ¨¡å¼ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé…ç½®ä½ è‡ªå·±çš„å¤§æ¨¡å‹ã€‚</p>
<p>è¿™é‡Œè¿˜æ˜¯è¦å¼ºè°ƒä¸€ä¸‹ï¼Œåœ¨ ebook-to-mindmap å¡«å†™ Key æ—¶ä¸å¿…æ‹…å¿ƒ Key æ³„éœ²ï¼Œå› ä¸º <strong>Key åªæ˜¯ä¿å­˜åœ¨ä½ è‡ªå·±çš„æµè§ˆå™¨é‡Œ</strong>ï¼Œè¯·æ±‚ä¹Ÿæ˜¯ç›´æ¥ä»ä½ çš„æµè§ˆå™¨å‘é€åˆ°å¤§æ¨¡å‹æä¾›å•†çš„æœåŠ¡å™¨çš„ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·é‡ŒæŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œç¡®è®¤è¿™ä¸€ç‚¹ã€‚åŒæ—¶ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Febook-to-mindmap" target="_blank" title="https://github.com/SSShooter/ebook-to-mindmap" ref="nofollow noopener noreferrer">ebook-to-mindmap</a> ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ä½ å¯ä»¥éšæ—¶æ£€è§†å®ƒçš„ä»£ç ï¼Œè¿˜å¯ä»¥è‡ªå·±éƒ¨ç½²ä¸€ä¸ªå±äºä½ çš„ ebook-to-mindmapã€‚</p>
<p>è¯´å›æ¨¡å‹çš„é€‰æ‹©ï¼Œå¯èƒ½å¾ˆå¤šäººä¼šæ‹…å¿ƒä½¿ç”¨ ebook-to-mindmap çš„èŠ±è´¹å¤ªé«˜ï¼Œå…¶å®å€’ä¹Ÿä¸å¿…ï¼Œæ¯•ç«Ÿç°é˜¶æ®µè¿˜æ˜¯èƒ½æ‰¾åˆ°å¾ˆå¤šå…è´¹æˆ–è€…ä½ä»·çš„å¤§æ¨¡å‹ã€‚æˆ‘çš„é¦–æ¨è¿˜æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fopenrouter.ai%2F" target="_blank" title="https://openrouter.ai/" ref="nofollow noopener noreferrer"><strong>openrouter</strong></a>ï¼Œä½ åªéœ€è¦å……å€¼ 10 åˆ€ï¼Œå°±èƒ½è·å¾—ä¸€ä¸ªè¾ƒå¤§çš„å…è´¹æ¨¡å‹ï¼ˆå…¶ä¸­åŒ…æ‹¬ä¸€äº› deepseek å˜ä½“ã€æœ€è¿‘å°ç±³çš„æ–°æ¨¡å‹ã€ä¹‹å‰ä¸€æ®µæ—¶é—´è¿˜æœ‰ grokï¼‰ä½¿ç”¨é¢åº¦ï¼ŒåŸºæœ¬ä¸Šä¸€å¤©è®©å®ƒå¤„ç†å¥½å‡ æœ¬ä¹¦éƒ½æ²¡é—®é¢˜äº†ã€‚å…¶ä»–è¯¦ç»†æ¨èå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fssshooter.com%2Fai-services-guide%2F" target="_blank" title="https://ssshooter.com/ai-services-guide/" ref="nofollow noopener noreferrer">å…è´¹å’Œä»˜è´¹ AI API é€‰æ‹©æŒ‡å—</a>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7df7825c97547888d450112acbe2869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=S1Rf%2FUOaLRPoqInIfZ2pREa8UJ4%3D" alt="model list" loading="lazy"/></p>
<p>åœ¨è·å–åˆ° Key åå¦‚ä¸Šå›¾å¡«å†™ä¿¡æ¯å³å¯ã€‚</p>
<p>ä½ è¿˜å¯ä»¥é…ç½®å¤šä¸ªæ¨¡å‹ï¼Œç‚¹å‡»å·¦ä¾§çš„æ˜Ÿæ˜Ÿåä¼šæˆä¸ºé»˜è®¤æ¨¡å‹ï¼Œåç»­å¤„ç†æ—¶é»˜è®¤ä½¿ç”¨æ˜Ÿæ ‡çš„æ¨¡å‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb539405ba5f4eb4838d981a0a99f21a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=xT%2BODB72MtLSA3KS3iUt12ABcf4%3D" alt="model list" loading="lazy"/></p>
<h2 data-id="heading-1">ç”Ÿæˆç¬”è®°</h2>
<p>é…ç½®æ¨¡å‹åï¼Œåœ¨ä¸»é¡µé€‰æ‹©ç”µå­ä¹¦å³å¯ã€‚ä¹‹å ebook-to-mindmap ä¼šè‡ªåŠ¨è¯†åˆ«ç”µå­ä¹¦çš„æ ¼å¼ï¼Œç„¶åå¼€å§‹è¯†åˆ«ç« èŠ‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bb41bd7f5f241f08b87cebb770c4d64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=74t4%2B3dFb9pX1NN098zcbdcp4GU%3D" alt="AI æ€»ç»“é¡µé¢" loading="lazy"/></p>
<blockquote>
<p>[!TIP]
æç¤ºï¼šå¦‚æœ epub æ— æ³•è·å–åˆ°ç« èŠ‚ï¼Œå¯ä»¥åœ¨è®¾ç½®é‡Œå‹¾é€‰ä½¿ç”¨ Spine è·å–ç« èŠ‚</p>
</blockquote>
<p>ç« èŠ‚è¯†åˆ«æˆåŠŸåï¼Œé€‰æ‹©ä½ éœ€è¦æ€»ç»“çš„ç« èŠ‚ï¼Œæˆ–è€…ä½¿ç”¨åˆ†ç»„åŠŸèƒ½ï¼ˆå¯ä»¥ä½¿ç”¨å¿«æ·é”® Ctrl + Gï¼‰æŠŠé›¶ç¢çš„ç« èŠ‚ç»„åˆæˆåˆ†ç»„ä¸€èµ·å‘é€ç»™ AI å¤„ç†ã€‚</p>
<p>ä¸€åˆ‡å‡†å¤‡å¥½åï¼Œç‚¹å‡»å¼€å§‹è§£é‡ŠæŒ‰é’®å³å¯å¼€å§‹ç”Ÿæˆç¬”è®°ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œebook-to-mindmap ä¼šç”Ÿæˆ<strong>æ€ç»´å¯¼å›¾</strong>ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»å°é½¿è½®åˆ‡æ¢åˆ°<strong>æ–‡å­—æ€»ç»“</strong>æ¨¡å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3406b66a9484e2dae227d066545f242~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=hUmw%2FJq3eIlmjk4MvzKt63STog8%3D" alt="æ¨¡å¼åˆ‡æ¢" loading="lazy"/></p>
<blockquote>
<p>[!TIP]
è™½ç„¶æœ‰æ•´ä¹¦æ€ç»´å¯¼å›¾ç”ŸæˆåŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœä¹¦çš„å†…å®¹æ¯”è¾ƒé•¿ï¼ŒAI å¯èƒ½åƒä¸ä¸‹è¿™ä¹ˆé•¿çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯åˆ†ç« èŠ‚ç”Ÿæˆï¼Œæœ€åç³»ç»Ÿä¼šè‡ªåŠ¨æ‹¼æ¥</p>
</blockquote>
<p>ç”Ÿæˆç¬”è®°å¦‚æœæƒ³è¦ä¸­é€”å–æ¶ˆï¼Œæ”¾å¿ƒç‚¹å–æ¶ˆå°±å¥½ï¼Œ<strong>ä¹‹å‰å¤„äºå®ŒæˆçŠ¶æ€çš„ç« èŠ‚ä¼šè¢«ç¼“å­˜</strong>ï¼Œä¸ç”¨æ‹…å¿ƒä¹‹åéœ€è¦å†æµªè´¹ Token é‡æ–°ç”Ÿæˆã€‚</p>
<h2 data-id="heading-2">æç¤ºè¯</h2>
<p>ä¸¾ä¸ªä¾‹å­å§ï¼Œä½ åœ¨æç¤ºè¯åˆ—è¡¨é‡Œæ·»åŠ ä¸€ä¸ªâ€œå°Â·çº¢ä¹¦é£æ ¼â€æç¤ºè¯ï¼Œåœ¨ç”Ÿæˆç¯èŠ‚é€‰æ‹©è¿™ä¸ªæç¤ºè¯ï¼Œå°±èƒ½ç›´æ¥ç”Ÿæˆå°çº¢ä¹¦é£æ ¼çš„ç¬”è®°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9977cb633e3f4ef685ba3dd47198c004~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770603472&amp;x-signature=5joPgw9qpFUe8rY1R4mM8CfCpyA%3D" alt="å°çº¢ä¹¦é£æ ¼" loading="lazy"/></p>
<p>ä¸æ­¢å°çº¢ä¹¦é£æ ¼ï¼Œä½ ä¹Ÿå¯ä»¥è®© AI åªç®€å•åœ°æå–è¯¥ç« èŠ‚æœ€é‡è¦çš„ 5 ä¸ªè§‚ç‚¹ï¼Œå¸®åŠ©ä½ å¯¹æ•´æœ¬ä¹¦çš„ä¸»è¦å†…å®¹æœ‰ä¸€ä¸ªç®€è¦çš„äº†è§£ã€‚</p>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨â€œåè®ºæ³•â€æç¤ºè¯ï¼š</p>
<pre><code class="hljs">é€‰å–æœ¬ç« çš„æ ¸å¿ƒè®ºç‚¹æˆ–æ€æƒ³ï¼Œå¹¶æ¢ç´¢å®ƒçš„å¯¹ç«‹é¢ã€‚å¦‚æœä½œè€…è¦ä¸ºç›¸åçš„è§‚ç‚¹è¾©æŠ¤ï¼Œä»–ä»¬éœ€è¦è¯æ˜ä»€ä¹ˆï¼Ÿæ–‡æœ¬ä¸­æ˜¯å¦æœ‰æ— æ„é—´æ”¯æŒåé¢è§‚ç‚¹çš„è››ä¸é©¬è¿¹ï¼Ÿ
</code></pre>
<p>å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fssshooter.com%2Fnotebooklm-prompt%2F" target="_blank" title="https://ssshooter.com/notebooklm-prompt/" ref="nofollow noopener noreferrer">åˆ†äº«å‡ æ¡æœ‰æ„æ€çš„ NotebookLM æç¤ºè¯</a>è¿™ç¯‡æ–‡ç« ï¼Œé‡Œé¢æœ‰å‡ ä¸ªæœ‰è¶£çš„æç¤ºè¯ï¼Œæˆ–è®¸èƒ½è®©ä½ çœ¼å‰ä¸€äº®ã€‚</p>
<h2 data-id="heading-3">å†…å®¹ç®¡ç†</h2>
<p>ebook-to-mindmap å……æ»¡äº†ä¸‹è½½æŒ‰é’®ï¼Œæ˜¯çš„ï¼Œä½ ç”Ÿæˆçš„æ•°æ®å¿…é¡»è¿˜æ˜¯å±äºä½ çš„ï¼ä½ å¯ä»¥å¾ˆè½»æ˜“åœ°æŠŠæ•°æ®æ‹¿å‡ºæ¥ï¼</p>
<p>å¯¼å‡ºçš„æ–‡å­—å†…å®¹å¯èƒ½æ˜¯ markdown æ–‡ä»¶æˆ–æ˜¯æ€ç»´å¯¼å›¾ json æ–‡ä»¶ã€‚</p>
<p>markdown æ–‡ä»¶å¯ä»¥ç›´æ¥é˜…è¯»ï¼Œæˆ–è€…å¯¼å…¥åˆ° Obsidianã€Notion ç­‰ç¬”è®°è½¯ä»¶å†ç»†åŒ–ä¿®æ”¹ã€‚</p>
<p>æ€ç»´å¯¼å›¾ json æ–‡ä»¶å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Fmind-elixir-core" target="_blank" title="https://github.com/SSShooter/mind-elixir-core" ref="nofollow noopener noreferrer">mind-elixir-core</a> ç­‰å‰ç«¯åº“æ¸²æŸ“ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æ˜¯æŠ€æœ¯äººå‘˜ï¼Œç†è§£ json æ•°æ®çš„ç»“æ„ä½ ä¹Ÿå¯ä»¥éšæ„ä¿®æ”¹å’Œæ¸²æŸ“ã€‚</p>
<p>æ€ç»´å¯¼å›¾äº¦å¯å¯¼å‡ºä¸ºå›¾ç‰‡ï¼Œç‚¹å‡»æ€ç»´å¯¼å›¾é¡µé¢å³ä¸Šè§’çš„ä¸‹è½½æŒ‰é’®å³å¯ã€‚</p>
<h2 data-id="heading-4">æ ¼å¼é€‰æ‹©</h2>
<p>æœ€åè°ˆè°ˆç”µå­ä¹¦æ ¼å¼çš„é—®é¢˜ï¼Œebook-to-mindmap æ”¯æŒ pdf å’Œ epub æ ¼å¼çš„ç”µå­ä¹¦ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ ¼å¼å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<p>æˆ–è®¸å¤§å®¶éƒ½ä¼šæ¯”è¾ƒå–œæ¬¢çœ‹ pdfï¼Œå› ä¸ºçœ‹èµ·æ¥æ¯”è¾ƒå·¥æ•´ï¼Œä½†æ˜¯ä½¿ç”¨ ebook-to-mindmapï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒ<strong>æ¨è epub æ ¼å¼</strong>çš„ç”µå­ä¹¦ã€‚</p>
<p>ç¨å¾®è®²ä¸€ä¸‹ pdf å’Œ epub çš„åŸç†å§ã€‚</p>
<p>pdf çš„ç‰¹ç‚¹æ˜¯åœ¨ä»»ä½•è®¾å¤‡ä¸Šçœ‹èµ·æ¥éƒ½ä¸€æ ·ï¼Œè¿™å°±å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå…¶å® pdf çš„æ’ç‰ˆæ˜¯éå¸¸å›ºå®šçš„ï¼Œè€Œä¸”æ›´é‡è¦çš„æ˜¯ï¼Œpdf çš„æ’ç‰ˆæ˜¯æ²¡æœ‰è¯­ä¹‰çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäººç±»èƒ½çœ‹åˆ°ä¸€ä¸ªæ ‡é¢˜æ˜¯åŠ ç²—é»‘å­—ï¼Œä½†æ˜¯ pdf æœ¬èº«å¹¶ä¸çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜ï¼Œå®ƒåªæ˜¯çŸ¥é“è¿™ä¸€å—åŒºåŸŸçš„æ–‡å­—æ˜¯åŠ ç²—é»‘å­—çš„ã€‚</p>
<p>æ›´ä¸¥é‡çš„é—®é¢˜æ˜¯ pdf å¦‚æœæœ‰ä¸€äº›å¤æ‚çš„æ’ç‰ˆï¼Œä¾‹å¦‚åœ¨è§’è½åµŒå…¥ä¸€æ®µæ–‡å­—ï¼Œåœ¨è§£é‡Šçš„æ—¶å€™å°±å¾ˆéš¾ç†è§£é‚£æ®µæ–‡å­—çš„æ„ä¹‰ã€‚æ‰€ä»¥ï¼Œå¤§æ¨¡å‹ç†è§£ pdf çš„éš¾åº¦ä¼šæ¯”è¾ƒå¤§ã€‚</p>
<p>è€Œ epub æ ¼å¼å°±ä¸ä¸€æ ·ï¼Œå®ƒæ›´åƒæ˜¯ä¸€å¼ ç½‘é¡µï¼Œæœ‰è¯­ä¹‰ï¼Œæœ‰ç»“æ„ï¼Œæœ‰å±‚æ¬¡ï¼Œå°±è·Ÿ HTML å·®ä¸å¤šã€‚ä½†ç¼ºç‚¹å°±æ˜¯äººç±»çœ‹æ¥è¿™æ ·çš„æ’ç‰ˆæœ‰ç‚¹ç²—ç³™ï¼Œåœ¨ä¸åŒçš„é˜…è¯»å™¨ä¸Šæ˜¾ç¤ºæ•ˆæœä¹Ÿä¸åŒã€‚åœ¨æŸäº›è½åçš„ epub é˜…è¯»å™¨ä¸Šé˜…è¯»æ—¶å¯èƒ½ä¼šè§‰å¾—æ’ç‰ˆå¾ˆæœ‰å¹´ä»£æ„Ÿã€‚ä½†æ˜¯å¤§æ¨¡å‹ä¸åœ¨ä¹æ’ç‰ˆï¼Œæœ‰æ¸…æ™°çš„ç»“æ„å°±èƒ½å¾—åˆ°å¥½çš„è¾“å‡ºç»“æœã€‚</p>
<h2 data-id="heading-5">å†™åœ¨æœ€å</h2>
<p>æ€»çš„æ¥è¯´ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Febook-to-mindmap" target="_blank" title="https://github.com/SSShooter/ebook-to-mindmap" ref="nofollow noopener noreferrer">ebook-to-mindmap</a> æ˜¯ä¸€ä¸ªèƒ½å¸®ä½ å¿«é€Ÿå¤ä¹ æˆ–è€…æŠŠä¹¦æœ¬å˜è–„çš„å·¥å…·ã€‚åœ¨è¿™ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œé«˜æ•ˆåœ°è·å–å’Œæ•´ç†çŸ¥è¯†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚å¸Œæœ›è¿™ä¸ªå°å·¥å…·èƒ½æˆä¸ºä½ é˜…è¯»è·¯ä¸Šçš„å¾—åŠ›åŠ©æ‰‹ï¼Œè®©ä½ æŠŠæ›´å¤šçš„æ—¶é—´èŠ±åœ¨æ·±åº¦æ€è€ƒå’Œç†è§£ä¸Šï¼Œè€Œä¸æ˜¯æœºæ¢°åœ°æ‘˜æŠ„ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSSShooter%2Febook-to-mindmap" target="_blank" title="https://github.com/SSShooter/ebook-to-mindmap" ref="nofollow noopener noreferrer">GitHub</a> ä¸Šç‚¹ä¸ª Star â­ï¸ æ”¯æŒä¸€ä¸‹ï¼å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°äº† bugï¼Œä¹Ÿæ¬¢è¿æ Issue æˆ–è€…åŠ å…¥è®¨è®ºã€‚</p>
<p>Happy Reading!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹åŸºç¡€å…¨è§£æï¼šä»æ¦‚å¿µåˆ° fork å®æˆ˜ï¼ˆé™„åƒµå°¸ / å­¤å„¿è¿›ç¨‹é¿å‘æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7601384029611343887</link>    <guid>https://juejin.cn/post/7601384029611343887</guid>    <pubDate>2026-02-02T01:00:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601384029611343887" data-draft-id="7601313474720186403" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹åŸºç¡€å…¨è§£æï¼šä»æ¦‚å¿µåˆ° fork å®æˆ˜ï¼ˆé™„åƒµå°¸ / å­¤å„¿è¿›ç¨‹é¿å‘æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="ç®—æ³•,Linux,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-02T01:00:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦66"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹åŸºç¡€å…¨è§£æï¼šä»æ¦‚å¿µåˆ° fork å®æˆ˜ï¼ˆé™„åƒµå°¸ / å­¤å„¿è¿›ç¨‹é¿å‘æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:00:08.000Z" title="Mon Feb 02 2026 01:00:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹åŸºç¡€å…¨è§£æï¼šä»æ¦‚å¿µåˆ° fork å®æˆ˜ï¼ˆé™„åƒµå°¸ / å­¤å„¿è¿›ç¨‹é¿å‘æŒ‡å—ï¼‰</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸“æ³¨ Linux æŠ€æœ¯åˆ†äº«çš„å°æ¨ã€‚ä¸Šä¸€ç¯‡æˆ‘ä»¬æ‰‹å†™äº†<code>ls</code>å‘½ä»¤ï¼ŒæŒæ¡äº†æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ ¸å¿ƒã€‚ä»Šå¤©å°±è¿›å…¥ Linux å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒ â€”â€”<strong>è¿›ç¨‹</strong>ï¼æ— è®ºæ˜¯åµŒå…¥å¼å¼€å‘çš„å¤šä»»åŠ¡å¤„ç†ï¼Œè¿˜æ˜¯æœåŠ¡å™¨çš„å¹¶å‘æœåŠ¡ï¼Œéƒ½ç¦»ä¸å¼€è¿›ç¨‹çš„æ¦‚å¿µã€‚ä»è¿›ç¨‹æœ¬è´¨ã€çŠ¶æ€ã€ç‰¹æ®Šè¿›ç¨‹åˆ°<code>fork</code>åˆ›å»ºè¿›ç¨‹çš„å®æˆ˜ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ åƒé€ Linux è¿›ç¨‹åŸºç¡€ï¼Œé¿å¼€åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ç­‰ç»å…¸å‘ï¼</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šè¿›ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¾ˆå¤šæ–°æ‰‹ä¼šæŠŠ â€œç¨‹åºâ€ å’Œ â€œè¿›ç¨‹â€ æ··ä¸ºä¸€è°ˆï¼Œå…¶å®ä¸¤è€…æœ‰æœ¬è´¨åŒºåˆ«ï¼š</p>
<ul>
<li><strong>ç¨‹åº</strong>ï¼šæ˜¯é™æ€çš„æ–‡ä»¶ï¼ˆå¦‚<code>a.out</code>ã€<code>nginx</code>ï¼‰ï¼Œå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŒ…å«ä»£ç ã€æ•°æ®å’ŒæŒ‡ä»¤ï¼Œæœ¬èº«ä¸å ç”¨ CPU å’Œå†…å­˜ï¼›</li>
<li><strong>è¿›ç¨‹</strong>ï¼šæ˜¯ç¨‹åºè¢«åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œçš„å®ä¾‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…å’Œè°ƒåº¦çš„<strong>æœ€å°å•ä½</strong>â€”â€” è¿è¡Œæ—¶ä¼šå ç”¨ CPUã€å†…å­˜ã€æ–‡ä»¶æè¿°ç¬¦ç­‰èµ„æºï¼Œæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
<p>ç®€å•è¯´ï¼š<strong>ç¨‹åºæ˜¯ â€œæ­»â€ çš„ï¼Œè¿›ç¨‹æ˜¯ â€œæ´»â€ çš„</strong>ã€‚ä¸€ä¸ªç¨‹åºå¯ä»¥åˆ›å»ºå¤šä¸ªè¿›ç¨‹ï¼ˆå¦‚ nginx å¯åŠ¨åä¼šç”Ÿæˆå¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼‰ï¼Œå¤šä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥è¿è¡ŒåŒä¸€ä¸ªç¨‹åºï¼ˆå¦‚å¤šä¸ªç”¨æˆ·åŒæ—¶æ‰§è¡Œ<code>ls</code>å‘½ä»¤ï¼‰ã€‚</p>
<h3 data-id="heading-2">äºŒã€Linux è¿›ç¨‹æ ¸å¿ƒåŸºç¡€ï¼šçŠ¶æ€ã€IDã€ä¸‰æ€æ¨¡å‹</h3>
<h4 data-id="heading-3">1. è¿›ç¨‹çŠ¶æ€ï¼š6 ç§æ ¸å¿ƒçŠ¶æ€ï¼ˆé¢è¯•é«˜é¢‘ï¼‰</h4>
<p>Linux è¿›ç¨‹åœ¨ç”Ÿå‘½å‘¨æœŸä¸­ä¼šåœ¨ä¸åŒçŠ¶æ€é—´åˆ‡æ¢ï¼Œ<code>ps -aux</code>å‘½ä»¤å¯æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼Œæ ¸å¿ƒ 6 ç§çŠ¶æ€å¿…é¡»ç‰¢è®°ï¼š</p>















































<table><thead><tr><th>çŠ¶æ€æ ‡è¯†</th><th>çŠ¶æ€åç§°</th><th>æ ¸å¿ƒå«ä¹‰</th><th>å¸¸è§åœºæ™¯</th></tr></thead><tbody><tr><td>R</td><td>è¿è¡Œæ€</td><td>æ­£åœ¨å ç”¨ CPU æ‰§è¡Œï¼Œæˆ–åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾… CPU æ—¶é—´ç‰‡</td><td>ç¨‹åºæ­£åœ¨æ‰§è¡Œè®¡ç®—ã€IO æ“ä½œç­‰</td></tr><tr><td>S</td><td>ç¡çœ æ€ï¼ˆå¯ä¸­æ–­ï¼‰</td><td>ç­‰å¾…æŸä¸ªäº‹ä»¶å‘ç”Ÿï¼ˆå¦‚ IO å®Œæˆã€ä¿¡å·ï¼‰ï¼Œä¸å ç”¨ CPU</td><td>è¿›ç¨‹è°ƒç”¨<code>sleep</code>ã€ç­‰å¾…é”®ç›˜è¾“å…¥</td></tr><tr><td>D</td><td>ä¸å¯ä¸­æ–­ç¡çœ æ€</td><td>æ·±åº¦ç­‰å¾…ï¼ˆå¦‚ç£ç›˜ IOï¼‰ï¼Œæ— æ³•è¢«ä¿¡å·å”¤é†’</td><td>è¯»å–å¤§æ–‡ä»¶ã€ç£ç›˜æ ¼å¼åŒ–æ—¶</td></tr><tr><td>T</td><td>åœæ­¢æ€</td><td>è¢«ä¿¡å·ï¼ˆå¦‚<code>Ctrl+Z</code>ï¼‰æˆ–è°ƒè¯•å™¨æš‚åœï¼Œæš‚åœåå¯æ¢å¤</td><td><code>kill -19 PID</code>æš‚åœè¿›ç¨‹ã€gdb è°ƒè¯•æ—¶</td></tr><tr><td>Z</td><td>åƒµå°¸æ€</td><td>è¿›ç¨‹å·²é€€å‡ºï¼Œä½†çˆ¶è¿›ç¨‹æœªå›æ”¶å…¶èµ„æºï¼ˆä»…ä¿ç•™ PID å’Œé€€å‡ºçŠ¶æ€ï¼‰</td><td>çˆ¶è¿›ç¨‹æœªè°ƒç”¨<code>wait</code>å›æ”¶å­è¿›ç¨‹</td></tr><tr><td>X</td><td>æ­»äº¡æ€</td><td>è¿›ç¨‹å·²å®Œå…¨é€€å‡ºï¼Œèµ„æºè¢«å›æ”¶ï¼Œè¿›ç¨‹åˆ—è¡¨ä¸­æ— è®°å½•</td><td>ç¨‹åºæ­£å¸¸æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table>
<h4 data-id="heading-4">2. è¿›ç¨‹ IDï¼ˆPIDï¼‰ï¼šè¿›ç¨‹çš„å”¯ä¸€æ ‡è¯†</h4>
<ul>
<li>PID æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹çš„æ— ç¬¦å·æ•´æ•°ï¼Œæ˜¯ç®¡ç†è¿›ç¨‹çš„æ ¸å¿ƒæ ‡è¯†ï¼ˆå¦‚<code>kill -9 PID</code>ç»ˆæ­¢è¿›ç¨‹ï¼‰ï¼›</li>
<li>32 ä½ Linux å†…æ ¸ä¸­ï¼ŒPID æœ€å¤§å€¼ä¸º 32767ï¼Œè¾¾åˆ°ä¸Šé™åä» 300 å¼€å§‹é‡ç½®ï¼ˆ1-300 è¢«ç³»ç»Ÿè¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹å ç”¨ï¼‰ï¼›</li>
<li>64 ä½å†…æ ¸ä¸­ï¼ŒPID æœ€å¤§å€¼ä¸º 2Â²Â²ï¼Œå‡ ä¹ä¸ä¼šå‡ºç° PID è€—å°½çš„æƒ…å†µã€‚</li>
</ul>
<h4 data-id="heading-5">3. è¿›ç¨‹ä¸‰æ€æ¨¡å‹ï¼šçŠ¶æ€åˆ‡æ¢çš„æ ¸å¿ƒé€»è¾‘</h4>
<p>Linux è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå›´ç»• â€œä¸‰æ€â€ å¾ªç¯ï¼Œè¿™æ˜¯ç†è§£è¿›ç¨‹è°ƒåº¦çš„åŸºç¡€ï¼š</p>
<ul>
<li><strong>å°±ç»ªæ€</strong>ï¼šè¿›ç¨‹å·²å…·å¤‡æ‰€æœ‰è¿è¡Œæ¡ä»¶ï¼ˆä»£ç ã€æ•°æ®ã€èµ„æºéƒ½å°±ç»ªï¼‰ï¼Œæ­£åœ¨ç­‰å¾… CPU æ—¶é—´ç‰‡ï¼›</li>
<li><strong>æ‰§è¡Œæ€</strong>ï¼šè¿›ç¨‹è·å¾— CPU æ—¶é—´ç‰‡ï¼Œæ­£åœ¨æ‰§è¡Œä»£ç ï¼ˆä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å ç”¨ CPUï¼Œå¤šæ ¸ CPU é™¤å¤–ï¼‰ï¼›</li>
<li><strong>ç­‰å¾…æ€ï¼ˆé˜»å¡æ€ï¼‰</strong> ï¼šè¿›ç¨‹ç­‰å¾…æŸä¸ªäº‹ä»¶ï¼ˆå¦‚ IO å®Œæˆã€ä¿¡å·ï¼‰ï¼Œæš‚æ—¶æ— æ³•è¿è¡Œï¼Œé‡Šæ”¾ CPU èµ„æºã€‚</li>
</ul>
<h5 data-id="heading-6">ä¸‰æ€åˆ‡æ¢é€»è¾‘ï¼š</h5>
<p>plaintext</p>
<pre><code class="hljs language-bash" lang="bash">å°±ç»ªæ€ â†â†’ æ‰§è¡Œæ€ï¼ˆè·å–/é‡Šæ”¾CPUæ—¶é—´ç‰‡ï¼‰
æ‰§è¡Œæ€ â†’ ç­‰å¾…æ€ï¼ˆè¿›ç¨‹è°ƒç”¨<span class="hljs-built_in">sleep</span>ã€ç­‰å¾…IOç­‰ï¼‰
ç­‰å¾…æ€ â†’ å°±ç»ªæ€ï¼ˆç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿï¼Œå¦‚IOå®Œæˆã€<span class="hljs-built_in">sleep</span>ç»“æŸï¼‰
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€ç‰¹æ®Šè¿›ç¨‹ï¼šçˆ¶è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ã€åƒµå°¸è¿›ç¨‹</h3>
<h4 data-id="heading-8">1. æ ¸å¿ƒç‰¹æ®Šè¿›ç¨‹</h4>
<ul>
<li><strong>çˆ¶è¿›ç¨‹</strong>ï¼šåˆ›å»ºå…¶ä»–è¿›ç¨‹çš„è¿›ç¨‹ï¼ˆå¦‚<code>bash</code>å¯åŠ¨<code>ls</code>ï¼Œ<code>bash</code>æ˜¯çˆ¶è¿›ç¨‹ï¼Œ<code>ls</code>æ˜¯å­è¿›ç¨‹ï¼‰ï¼›</li>
<li><strong>å­è¿›ç¨‹</strong>ï¼šè¢«çˆ¶è¿›ç¨‹åˆ›å»ºçš„è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„ä»£ç ã€æ•°æ®ã€æ–‡ä»¶æè¿°ç¬¦ç­‰èµ„æºï¼›</li>
<li><strong>0 å·è¿›ç¨‹</strong>ï¼šæ“ä½œç³»ç»Ÿå¼•å¯¼ç¨‹åºï¼Œæ˜¯æ‰€æœ‰è¿›ç¨‹çš„ â€œç¥–å…ˆâ€ï¼Œç”±å†…æ ¸ç›´æ¥åˆ›å»ºï¼›</li>
<li><strong>1 å·è¿›ç¨‹ï¼ˆinit/systemdï¼‰</strong> ï¼šç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªç”¨æˆ·æ€è¿›ç¨‹ï¼Œè´Ÿè´£å¯åŠ¨å…¶ä»–ç³»ç»Ÿè¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹ï¼Œæ”¶å…»å­¤å„¿è¿›ç¨‹ã€‚</li>
</ul>
<h4 data-id="heading-9">2. å­¤å„¿è¿›ç¨‹ï¼šçˆ¶è¿›ç¨‹å…ˆ â€œè·‘è·¯â€</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹é€€å‡ºå‰å°±å…ˆç»ˆæ­¢ï¼Œå­è¿›ç¨‹å¤±å»çˆ¶è¿›ç¨‹ï¼Œæˆä¸ºå­¤å„¿è¿›ç¨‹ï¼›</li>
<li><strong>å¤„ç†æœºåˆ¶</strong>ï¼šLinux ä¸­å­¤å„¿è¿›ç¨‹ä¼šè¢« 1 å·è¿›ç¨‹ï¼ˆ<code>init</code>æˆ–<code>systemd</code>ï¼‰æ”¶å…»ï¼Œ1 å·è¿›ç¨‹ä¼šè´Ÿè´£å›æ”¶å…¶èµ„æºï¼Œä¸ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼›</li>
<li><strong>å½±å“</strong>ï¼šæœ¬èº«æ— å®³ï¼Œèµ„æºä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-10">3. åƒµå°¸è¿›ç¨‹ï¼šå­è¿›ç¨‹ â€œæ­»äº†â€ ä½†èµ„æºæ²¡å›æ”¶</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šå­è¿›ç¨‹é€€å‡ºåï¼Œçˆ¶è¿›ç¨‹æœªè°ƒç”¨<code>wait</code>/<code>waitpid</code>å‡½æ•°å›æ”¶å…¶ PID å’Œé€€å‡ºçŠ¶æ€ï¼Œå­è¿›ç¨‹æ®‹ç•™ PID åœ¨è¿›ç¨‹åˆ—è¡¨ä¸­ï¼Œæˆä¸ºåƒµå°¸è¿›ç¨‹ï¼›</li>
<li><strong>å±å®³</strong>ï¼šåƒµå°¸è¿›ç¨‹ä¸å ç”¨ CPU å’Œå†…å­˜ï¼Œä½†ä¼šå ç”¨ PID èµ„æºï¼Œè‹¥å¤§é‡åƒµå°¸è¿›ç¨‹å­˜åœ¨ï¼Œä¼šå¯¼è‡´æ–°è¿›ç¨‹æ— æ³•åˆ›å»ºï¼ˆPID è€—å°½ï¼‰ï¼›</li>
<li><strong>å¦‚ä½•é¿å…</strong>ï¼šçˆ¶è¿›ç¨‹éœ€è°ƒç”¨<code>wait</code>/<code>waitpid</code>å›æ”¶å­è¿›ç¨‹ï¼Œæˆ–æ³¨å†Œ<code>SIGCHLD</code>ä¿¡å·å¤„ç†å‡½æ•°è‡ªåŠ¨å›æ”¶ã€‚</li>
</ul>
<h3 data-id="heading-11">å››ã€è¿›ç¨‹åˆ›å»ºå®æˆ˜ï¼šfork å‡½æ•°ï¼ˆæ ¸å¿ƒ APIï¼‰</h3>
<p>Linux ä¸­åˆ›å»ºè¿›ç¨‹çš„æ ¸å¿ƒå‡½æ•°æ˜¯<code>fork</code>ï¼Œå®ƒä¼šå¤åˆ¶å½“å‰è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆå­è¿›ç¨‹ï¼‰ï¼Œçˆ¶å­è¿›ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæ˜¯åµŒå…¥å¼å¤šä»»åŠ¡ã€æœåŠ¡å™¨å¹¶å‘çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-12">1. fork å‡½æ•°è¯¦è§£</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">pid_t</span> <span class="hljs-title">fork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šåˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µã€æ–‡ä»¶æè¿°ç¬¦ã€è¿›ç¨‹ä¸Šä¸‹æ–‡ç­‰ï¼›</p>
</li>
<li>
<p><strong>å‚æ•°</strong>ï¼šæ— ï¼›</p>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼ˆå…³é”®ï¼é¢è¯•å¿…é—®ï¼‰ï¼š</p>
<ul>
<li>çˆ¶è¿›ç¨‹ä¸­è¿”å›ï¼šå­è¿›ç¨‹çš„ PIDï¼ˆå¤§äº 0ï¼‰ï¼›</li>
<li>å­è¿›ç¨‹ä¸­è¿”å›ï¼š0ï¼›</li>
<li>å¤±è´¥è¿”å›ï¼š-1ï¼ˆå¦‚å†…å­˜ä¸è¶³ã€è¿›ç¨‹æ•°è¾¾åˆ°ä¸Šé™ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-13">2. å®æˆ˜ä»£ç ï¼šfork åˆ›å»ºçˆ¶å­è¿›ç¨‹</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š%d\n"</span>, <span class="hljs-built_in">getpid</span>()); <span class="hljs-comment">// getpid()è·å–å½“å‰è¿›ç¨‹PID</span>

    <span class="hljs-comment">// åˆ›å»ºå­è¿›ç¨‹</span>
    <span class="hljs-type">pid_t</span> pid = fork();
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">perror</span>(<span class="hljs-string">"fork failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">// å­è¿›ç¨‹ï¼ˆforkè¿”å›0ï¼‰</span>
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š%dï¼Œçˆ¶è¿›ç¨‹PIDï¼š%d\n"</span>, <span class="hljs-built_in">getpid</span>(), <span class="hljs-built_in">getppid</span>()); <span class="hljs-comment">// getppid()è·å–çˆ¶è¿›ç¨‹PID</span>
        <span class="hljs-built_in">sleep</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// å­è¿›ç¨‹ç¡çœ 3ç§’</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå³å°†é€€å‡º\n"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// å­è¿›ç¨‹é€€å‡º</span>
    }

    <span class="hljs-comment">// çˆ¶è¿›ç¨‹ï¼ˆforkè¿”å›å­è¿›ç¨‹PIDï¼‰</span>
    <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹ï¼šåˆ›å»ºå­è¿›ç¨‹æˆåŠŸï¼Œå­è¿›ç¨‹PIDï¼š%d\n"</span>, pid);
        <span class="hljs-built_in">wait</span>(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œå›æ”¶èµ„æºï¼ˆé¿å…åƒµå°¸è¿›ç¨‹ï¼‰</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹ï¼šå­è¿›ç¨‹èµ„æºå·²å›æ”¶ï¼Œçˆ¶è¿›ç¨‹å³å°†é€€å‡º\n"</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-14">3. ä»£ç è¿è¡Œç»“æœä¸è§£æ</h4>
<p>plaintext</p>
<pre><code class="hljs">çˆ¶è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š1234
çˆ¶è¿›ç¨‹ï¼šåˆ›å»ºå­è¿›ç¨‹æˆåŠŸï¼Œå­è¿›ç¨‹PIDï¼š1235
å­è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š1235ï¼Œçˆ¶è¿›ç¨‹PIDï¼š1234
å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå³å°†é€€å‡º
çˆ¶è¿›ç¨‹ï¼šå­è¿›ç¨‹èµ„æºå·²å›æ”¶ï¼Œçˆ¶è¿›ç¨‹å³å°†é€€å‡º
</code></pre>
<ul>
<li>
<p><strong>å…³é”®ç»†èŠ‚</strong>ï¼š</p>
<ol>
<li><code>fork</code>è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ï¼šçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹ PIDï¼Œå­è¿›ç¨‹è¿”å› 0ï¼Œçˆ¶å­è¿›ç¨‹ä»<code>fork</code>ä¹‹åçš„ä»£ç å¼€å§‹å¹¶å‘æ‰§è¡Œï¼›</li>
<li>å­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹èµ„æºï¼šåŒ…æ‹¬æ–‡ä»¶æè¿°ç¬¦ã€å˜é‡å€¼ï¼Œä½†çˆ¶å­è¿›ç¨‹çš„å†…å­˜ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼ˆå­è¿›ç¨‹ä¿®æ”¹å˜é‡ä¸å½±å“çˆ¶è¿›ç¨‹ï¼‰ï¼›</li>
<li><code>wait(NULL)</code>ï¼šçˆ¶è¿›ç¨‹é˜»å¡ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œå›æ”¶å…¶ PID å’Œé€€å‡ºçŠ¶æ€ï¼Œé¿å…å­è¿›ç¨‹æˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-15">4. é¿å‘ï¼šåƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿä¸è§£å†³</h4>
<h5 data-id="heading-16">ï¼ˆ1ï¼‰å¦‚ä½•äº§ç”Ÿåƒµå°¸è¿›ç¨‹ï¼Ÿ</h5>
<p>æ³¨é‡Šæ‰ä¸Šé¢ä»£ç ä¸­çš„<code>wait(NULL)</code>ï¼Œé‡æ–°ç¼–è¯‘è¿è¡Œï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// çˆ¶è¿›ç¨‹ä¸­æ³¨é‡Šwait</span>
<span class="hljs-comment">// wait(NULL);</span>
</code></pre>
<p>è¿è¡Œåç”¨<code>ps -aux | grep ç¨‹åºå</code>æŸ¥çœ‹ï¼Œä¼šå‘ç°å­è¿›ç¨‹çŠ¶æ€ä¸º<code>Z+</code>ï¼ˆåƒµå°¸æ€ï¼‰ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-csharp" lang="csharp">zcy      <span class="hljs-number">1235</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span>      <span class="hljs-number">0</span>     <span class="hljs-number">0</span> pts/<span class="hljs-number">0</span>    Z+   <span class="hljs-number">10</span>:<span class="hljs-number">00</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> [a.<span class="hljs-keyword">out</span>] &lt;defunct&gt;
</code></pre>
<p>åŸå› ï¼šå­è¿›ç¨‹é€€å‡ºåï¼Œçˆ¶è¿›ç¨‹æœªå›æ”¶å…¶èµ„æºï¼Œå­è¿›ç¨‹æ®‹ç•™ PIDã€‚</p>
<h5 data-id="heading-17">ï¼ˆ2ï¼‰å¦‚ä½•è§£å†³åƒµå°¸è¿›ç¨‹ï¼Ÿ</h5>
<ul>
<li>æ–¹æ³• 1ï¼šçˆ¶è¿›ç¨‹è°ƒç”¨<code>wait</code>/<code>waitpid</code>ï¼š<code>wait</code>é˜»å¡ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œ<code>waitpid</code>å¯éé˜»å¡å›æ”¶ï¼Œé€‚åˆå¤šå­è¿›ç¨‹åœºæ™¯ï¼›</li>
<li>æ–¹æ³• 2ï¼šæ³¨å†Œ<code>SIGCHLD</code>ä¿¡å·å¤„ç†å‡½æ•°ï¼šå­è¿›ç¨‹é€€å‡ºæ—¶ä¼šå‘çˆ¶è¿›ç¨‹å‘é€<code>SIGCHLD</code>ä¿¡å·ï¼Œçˆ¶è¿›ç¨‹åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è°ƒç”¨<code>waitpid</code>å›æ”¶ï¼›</li>
<li>æ–¹æ³• 3ï¼šçˆ¶è¿›ç¨‹å…ˆé€€å‡ºï¼šå­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹ï¼Œè¢« 1 å·è¿›ç¨‹æ”¶å…»å¹¶å›æ”¶ã€‚</li>
</ul>
<h3 data-id="heading-18">äº”ã€Linux è¿›ç¨‹æ ¸å¿ƒç‰¹ç‚¹ï¼ˆåµŒå…¥å¼ / æœåŠ¡å™¨å¼€å‘å¿…çŸ¥ï¼‰</h3>
<ol>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šæ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼ˆ32 ä½ç³»ç»Ÿä¸º 4GBï¼‰ï¼Œè¿›ç¨‹é—´é»˜è®¤æ— æ³•è®¿é—®å½¼æ­¤çš„å†…å­˜ï¼ˆéœ€é€šè¿‡å…±äº«å†…å­˜ã€ç®¡é“ç­‰ IPC æœºåˆ¶é€šä¿¡ï¼‰ï¼›</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè¿›ç¨‹ä»åˆ›å»ºï¼ˆ<code>fork</code>ï¼‰ã€è¿è¡Œï¼ˆè°ƒåº¦ï¼‰åˆ°é€€å‡ºï¼ˆ<code>exit</code>ï¼‰æ˜¯åŠ¨æ€è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸä¸­çŠ¶æ€ä¸æ–­åˆ‡æ¢ï¼›</li>
<li><strong>å¹¶å‘æ€§</strong>ï¼šå¤šä¸ªè¿›ç¨‹å¯åœ¨åŒä¸€æ—¶é—´å†…å¹¶å‘æ‰§è¡Œï¼ˆCPU é€šè¿‡æ—¶é—´ç‰‡è½®è½¬å®ç° â€œä¼ªå¹¶è¡Œâ€ï¼‰ï¼Œæé«˜ CPU åˆ©ç”¨ç‡ï¼›</li>
<li><strong>å¼‚æ­¥æ€§</strong>ï¼šè¿›ç¨‹æŒ‰å„è‡ªç‹¬ç«‹çš„é€Ÿåº¦æ¨è¿›ï¼Œæ‰§è¡Œé¡ºåºä¸å¯é¢„çŸ¥ï¼ˆå¦‚çˆ¶å­è¿›ç¨‹è°å…ˆæ‰§è¡Œä¸ç¡®å®šï¼‰ï¼Œéœ€é€šè¿‡åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡ã€é”ï¼‰åè°ƒã€‚</li>
</ol>
<h3 data-id="heading-19">å…­ã€Linux æŸ¥çœ‹è¿›ç¨‹çš„ 3 ä¸ªé«˜é¢‘å‘½ä»¤</h3>
<ol>
<li>
<p><strong>ps -ef</strong>ï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆPIDã€PPIDã€å‘½ä»¤ç­‰ï¼‰ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl">ps -ef | <span class="hljs-keyword">grep</span> nginx  <span class="hljs-comment"># æŸ¥æ‰¾nginxç›¸å…³è¿›ç¨‹</span>
</code></pre>
</li>
<li>
<p><strong>ps -aux</strong>ï¼šæŸ¥çœ‹è¿›ç¨‹çš„èµ„æºå ç”¨ï¼ˆCPUã€å†…å­˜ä½¿ç”¨ç‡ï¼‰å’ŒçŠ¶æ€ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">ps -aux | <span class="hljs-built_in">sort</span> -k3nr  <span class="hljs-comment"># æŒ‰CPUä½¿ç”¨ç‡é™åºæ’åº</span>
</code></pre>
</li>
<li>
<p><strong>top</strong>ï¼šåŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼Œå®æ—¶åˆ·æ–° CPUã€å†…å­˜å ç”¨ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">top</span>  # è¿è¡ŒåæŒ‰<span class="hljs-selector-tag">P</span>æ’åºCPUå ç”¨ï¼ŒæŒ‰Mæ’åºå†…å­˜å ç”¨
</code></pre>
</li>
</ol>
<h3 data-id="heading-20">ä¸ƒã€æ€»ç»“ï¼šè¿›ç¨‹åŸºç¡€æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>è¿›ç¨‹æ˜¯ç¨‹åºçš„è¿è¡Œå®ä¾‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…å’Œè°ƒåº¦çš„æœ€å°å•ä½ï¼›</li>
<li>ç‰¢è®° 6 ç§è¿›ç¨‹çŠ¶æ€ï¼Œå°¤å…¶æ˜¯åƒµå°¸è¿›ç¨‹çš„å±å®³å’Œè§£å†³æ–¹æ³•ï¼›</li>
<li><code>fork</code>æ˜¯åˆ›å»ºè¿›ç¨‹çš„æ ¸å¿ƒå‡½æ•°ï¼Œè¿”å›å€¼åŒºåˆ†çˆ¶å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹èµ„æºï¼›</li>
<li>åµŒå…¥å¼å¼€å‘ä¸­ï¼Œè¿›ç¨‹ç‹¬ç«‹æ€§å’Œå¹¶å‘æ€§æ˜¯å¤šä»»åŠ¡è®¾è®¡çš„åŸºç¡€ï¼ˆå¦‚ä¼ æ„Ÿå™¨é‡‡é›†è¿›ç¨‹ã€æ•°æ®å¤„ç†è¿›ç¨‹å¹¶å‘æ‰§è¡Œï¼‰ï¼›</li>
<li>æœåŠ¡å™¨å¼€å‘ä¸­ï¼Œéœ€åˆç†ç®¡ç†è¿›ç¨‹ï¼ˆå¦‚å›æ”¶åƒµå°¸è¿›ç¨‹ã€æ§åˆ¶è¿›ç¨‹æ•°ï¼‰ï¼Œé¿å…èµ„æºè€—å°½ã€‚</li>
</ol>
<p>æŒæ¡è¿›ç¨‹åŸºç¡€åï¼Œåç»­æˆ‘ä»¬ä¼šå­¦ä¹ è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ã€è¿›ç¨‹è°ƒåº¦ã€å¤šè¿›ç¨‹å¹¶å‘è®¾è®¡ç­‰è¿›é˜¶å†…å®¹ï¼Œæ•¬è¯·å…³æ³¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python + ZPLï¼šè½»æ¾å®ç°æ ‡ç­¾æ‰“å°ä¸ä¸­æ–‡æ’ç‰ˆ]]></title>    <link>https://juejin.cn/post/7601387539335168036</link>    <guid>https://juejin.cn/post/7601387539335168036</guid>    <pubDate>2026-02-02T01:14:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601387539335168036" data-draft-id="7601419065128861715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python + ZPLï¼šè½»æ¾å®ç°æ ‡ç­¾æ‰“å°ä¸ä¸­æ–‡æ’ç‰ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-02T01:14:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GAMC"/> <meta itemprop="url" content="https://juejin.cn/user/1359429798473047"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python + ZPLï¼šè½»æ¾å®ç°æ ‡ç­¾æ‰“å°ä¸ä¸­æ–‡æ’ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1359429798473047/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GAMC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:14:53.000Z" title="Mon Feb 02 2026 01:14:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python + ZPLï¼šè½»æ¾å®ç°æ ‡ç­¾æ‰“å°ä¸ä¸­æ–‡æ’ç‰ˆ</h2>
<p>åˆ†äº«ä¸€ä¸‹åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•åˆ©ç”¨ Python ä¼˜é›…åœ°è§£å†³ ZPL æ‰“å°ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ ZPLï¼Ÿ</h3>
<p>ZPL æ˜¯æ–‘é©¬å…¬å¸ä¸ºæ ‡ç­¾æ‰“å°æœºå¼€å‘çš„ä¸€å¥—è„šæœ¬è¯­è¨€ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ‰“å°æœºç•Œçš„â€œHTMLâ€ã€‚é€šè¿‡å‘é€ä¸€ä¸²ç±»ä¼¼ <code>^XA^FO50,50^A0N,50,50^FDHello World^FS^XZ</code> çš„æŒ‡ä»¤ï¼Œæ‰“å°æœºå°±èƒ½åœ¨æŒ‡å®šä½ç½®æ‰“å°å‡ºæ–‡å­—ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. æˆ‘ä»¬çš„ç§˜å¯†æ­¦å™¨ï¼šé™ç»´æ‰“å‡»</h3>
<p>ä¸ºäº†ç»•è¿‡ ZPL ç¹ççš„å­—ä½“é…ç½®ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§â€œé™ç»´æ‰“å‡»â€çš„ç­–ç•¥ï¼š<strong>å°†æ‰€æœ‰å†…å®¹ï¼ˆæ–‡å­—ã€æ¡ç ã€äºŒç»´ç ï¼‰å…ˆåœ¨ Python ä¸­æ¸²æŸ“æˆä¸€å¼ å›¾ç‰‡ï¼Œç„¶åå°†å›¾ç‰‡è½¬æ¢æˆ ZPL æŒ‡ä»¤å‘ç»™æ‰“å°æœºã€‚</strong></p>
<p>è¿™ç§æ–¹æ¡ˆçš„ä¸“ä¸šæœ¯è¯­å« <strong>â€œæ–‡æœ¬è½¬ä½å›¾â€</strong>ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒä¼˜åŠ¿ï¼š</h4>
<ul>
<li><strong>æ‰€è§å³æ‰€å¾—</strong>ï¼šä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å­—ä½“ã€é—´è·ï¼Œæ‰“å°å‡ºæ¥å®Œå…¨ä¸€è‡´ã€‚</li>
<li><strong>æ”¯æŒä»»æ„å­—ä½“</strong>ï¼šåªè¦ä½ ç”µè„‘é‡Œæœ‰çš„å­—ä½“ï¼ˆå¾®è½¯é›…é»‘ã€é˜¿é‡Œå·´å·´æ™®æƒ ä½“ç­‰ï¼‰ï¼Œç»Ÿç»Ÿéƒ½èƒ½æ‰“å°ã€‚</li>
<li><strong>æ— éœ€é…ç½®æ‰“å°æœº</strong>ï¼šä¸éœ€è¦å»æŠ˜è…¾æ‰“å°æœºçš„å†…å­˜å’Œå­—ä½“æ–‡ä»¶ï¼Œæ’ä¸Šå°±èƒ½æ‰“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. æŠ€æœ¯å®ç°æ‹†è§£</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ Pillow ç»˜åˆ¶â€œæ ‡ç­¾ç…§â€</h4>
<p>æˆ‘ä»¬åˆ©ç”¨ Python çš„ <code>Pillow</code> åº“ï¼Œæ ¹æ®ä¸šåŠ¡æ•°æ®åˆ›å»ºä¸€ä¸ªç©ºç™½ç”»å¸ƒï¼Œç„¶ååœ¨ä¸Šé¢ç”»å›¾ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image, ImageDraw, ImageFont

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª 203 DPI çš„å°ç”»å¸ƒ (çº¦ 40mm x 30mm)</span>
width, height = <span class="hljs-number">320</span>, <span class="hljs-number">240</span>
img = Image.new(<span class="hljs-string">'1'</span>, (width, height), <span class="hljs-number">1</span>) <span class="hljs-comment"># '1' è¡¨ç¤ºäºŒå€¼å›¾ï¼ˆé»‘ç™½ï¼‰</span>
draw = ImageDraw.Draw(img)

<span class="hljs-comment"># åŠ è½½å¿ƒä»ªçš„å­—ä½“</span>
font = ImageFont.truetype(<span class="hljs-string">"msyh.ttc"</span>, <span class="hljs-number">24</span>) <span class="hljs-comment"># å¾®è½¯é›…é»‘</span>
draw.text((<span class="hljs-number">20</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"æ™ºèƒ½æ ‡ç­¾åŠ©æ‰‹"</span>, font=font, fill=<span class="hljs-number">0</span>)
</code></pre>
<h4 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šå°†å›¾ç‰‡è½¬æ¢ä¸º ZPL åå…­è¿›åˆ¶æ•°æ®</h4>
<p>ZPL æä¾›äº†ä¸€ä¸ª <code>^GFA</code> æŒ‡ä»¤ï¼Œå…è®¸æˆ‘ä»¬å‘é€åŸå§‹çš„å›¾åƒå­—èŠ‚æ•°æ®ã€‚æˆ‘ä»¬å°† <code>Pillow</code> å¤„ç†å¥½çš„é»‘ç™½åƒç´ ç‚¹ï¼Œè½¬æ¢æˆæ‰“å°æœºèƒ½å¬æ‡‚çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œ<code>src/zpl_utils.py</code> è´Ÿè´£è¿™é¡¹ç¹ççš„è½¬æ¢å·¥ä½œï¼Œç¡®ä¿æ¯ä¸€è¡Œåƒç´ éƒ½èƒ½ç²¾å‡†å¯¹åº”ã€‚</p>
<h4 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šå‘é€ RAW æ•°æ®åˆ°æ‰“å°æœº</h4>
<p>Windows çš„æ™®é€šæ‰“å°é©±åŠ¨é€šå¸¸ä¼šç»è¿‡å›¾å½¢å±‚å¤„ç†ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚ä¸ºäº†è¿½æ±‚æè‡´å“åº”ï¼Œæˆ‘ä»¬é€šè¿‡ <code>pywin32</code> åº“ç›´æ¥å‘æ‰“å°æœºå‘é€ <strong>RAWï¼ˆåŸå§‹ï¼‰</strong> æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> win32print

<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_to_printer</span>(<span class="hljs-params">printer_name, zpl_data</span>):
    hPrinter = win32print.OpenPrinter(printer_name)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¼€å¯æ‰“å°ä½œä¸šï¼ŒæŒ‡å®šç±»å‹ä¸º "RAW"</span>
        hJob = win32print.StartDocPrinter(hPrinter, <span class="hljs-number">1</span>, (<span class="hljs-string">"Label Job"</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">"RAW"</span>))
        win32print.StartPagePrinter(hPrinter)
        win32print.WritePrinter(hPrinter, zpl_data.encode(<span class="hljs-string">'utf-8'</span>))
        win32print.EndPagePrinter(hPrinter)
        win32print.EndDocPrinter(hPrinter)
    <span class="hljs-keyword">finally</span>:
        win32print.ClosePrinter(hPrinter)
</code></pre>
<hr/>
<h3 data-id="heading-8">4. å¿…å¤‡ ZPL æŒ‡ä»¤é€ŸæŸ¥</h3>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶ä¸»è¦ä¾èµ–å›¾åƒä¼ è¾“ï¼Œä½†ä»éœ€ä¸€äº›åŸºç¡€æŒ‡ä»¤æ¥å®šä¹‰æ ‡ç­¾ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒæŒ‡ä»¤è¯´æ˜ï¼š</p>























































<table><thead><tr><th align="left">æŒ‡ä»¤</th><th align="left">è¯´æ˜</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><strong>^XA</strong></td><td align="left">æ ‡ç­¾å¼€å§‹</td><td align="left">å‘Šè¯‰æ‰“å°æœºï¼šè¿™æ˜¯ä¸€å¼ æ–°æ ‡ç­¾çš„èµ·ç‚¹ã€‚</td></tr><tr><td align="left"><strong>^XZ</strong></td><td align="left">æ ‡ç­¾ç»“æŸ</td><td align="left">å‘Šè¯‰æ‰“å°æœºï¼šæŒ‡ä»¤å‘é€å®Œæ¯•ï¼Œå¯ä»¥å¼€å§‹æ‰“å°/å‡ºçº¸äº†ã€‚</td></tr><tr><td align="left"><strong>^PW</strong></td><td align="left">æ‰“å°å®½åº¦</td><td align="left">è®¾ç½®æ ‡ç­¾çš„å®½åº¦ï¼ˆä»¥ç‚¹ dots ä¸ºå•ä½ï¼‰ï¼Œé˜²æ­¢å†…å®¹è¢«æˆªæ–­ã€‚</td></tr><tr><td align="left"><strong>^LL</strong></td><td align="left">æ ‡ç­¾é•¿åº¦</td><td align="left">è®¾ç½®æ ‡ç­¾çš„é«˜åº¦ï¼Œå†³å®šäº†æ‰“å°æœºèµ°çº¸çš„è·ç¦»ã€‚</td></tr><tr><td align="left"><strong>^LH</strong></td><td align="left">æ ‡ç­¾åŸç‚¹</td><td align="left">è®¾ç½®æ‰“å°çš„èµ·å§‹åæ ‡ (0,0) çš„ç‰©ç†ä½ç½®ã€‚</td></tr><tr><td align="left"><strong>^MD</strong></td><td align="left">æ‰“å°æµ“åº¦</td><td align="left">è®¾ç½®æ‰“å°æ·±åº¦ï¼ˆ0-30ï¼‰ï¼Œè§‰å¾—é¢œè‰²ä¸å¤Ÿé»‘ï¼Ÿè°ƒå®ƒã€‚</td></tr><tr><td align="left"><strong>^FO</strong></td><td align="left">å­—æ®µåæ ‡</td><td align="left"><strong>F</strong>ield <strong>O</strong>riginï¼Œå®šä¹‰å…ƒç´ åœ¨æ ‡ç­¾ä¸Šçš„ X,Y è½´ä½ç½®ã€‚</td></tr><tr><td align="left"><strong>^FS</strong></td><td align="left">å­—æ®µåˆ†éš”ç¬¦</td><td align="left"><strong>F</strong>ield <strong>S</strong>eparatorï¼Œæ¯ä¸ªå…ƒç´ æŒ‡ä»¤åçš„â€œå¥å·â€ï¼Œå¿…ä¸å¯å°‘ã€‚</td></tr><tr><td align="left"><strong>^GFA</strong></td><td align="left">å›¾å½¢ ASCII</td><td align="left">æœ¬æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚å®ƒè´Ÿè´£å°†æˆ‘ä»¬è½¬æ¢å¥½çš„åå…­è¿›åˆ¶å›¾åƒæ•°æ®â€œç”»â€åˆ°æ ‡ç­¾ä¸Šã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9">5. æ€»ç»“</h3>
<p>é€šè¿‡ <strong>Python + Pillow + ZPL (^GFA)</strong> çš„ç»„åˆï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†å¤æ‚çš„ç¡¬ä»¶ç¼–ç¨‹è½¬å˜æˆäº†ç†Ÿæ‚‰çš„å›¾å½¢å¤„ç†ç¼–ç¨‹ã€‚</p>
<h4 data-id="heading-10">å¼€å‘å»ºè®®ï¼š</h4>
<ol>
<li><strong>DPI åŒ¹é…</strong>ï¼šæ‰“å°æœºé€šå¸¸æœ‰ 203 DPI æˆ– 300 DPI ä¸¤ç§ï¼Œç»˜å›¾æ—¶è¦æ ¹æ®æ‰“å°æœºå‹å·è®¡ç®—å¥½åƒç´ å°ºå¯¸ï¼Œå¦åˆ™æ‰“å‡ºæ¥çš„æ ‡ç­¾ä¼šåå¤§æˆ–åå°ã€‚</li>
<li><strong>äºŒå€¼åŒ–å¤„ç†</strong>ï¼šåœ¨å‘é€ç»™æ‰“å°æœºå‰ï¼ŒåŠ¡å¿…å¯¹å›¾ç‰‡è¿›è¡Œé˜ˆå€¼å¤„ç†ï¼Œç¡®ä¿åªæœ‰çº¯é»‘å’Œçº¯ç™½ï¼Œé¿å…æ‰“å°å‡ºâ€œéº»ç‚¹â€ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºå›ºå®šæ ¼å¼çš„æ ‡ç­¾ï¼Œå¯ä»¥ç¼“å­˜å·²ç»ç”Ÿæˆçš„ ZPL æ¨¡æ¿ï¼Œåªæ›¿æ¢å˜åŒ–çš„å˜é‡æ•°æ®ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ä»£ç è½åœ°å®æˆ˜ï¼šåŸºäºJavaå°è£…YOLOé€šç”¨æ£€æµ‹SDKï¼Œ5åˆ†é’Ÿé›†æˆç›®æ ‡æ£€æµ‹èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7601374137412567075</link>    <guid>https://juejin.cn/post/7601374137412567075</guid>    <pubDate>2026-02-02T02:06:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601374137412567075" data-draft-id="7601445395478478882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ä»£ç è½åœ°å®æˆ˜ï¼šåŸºäºJavaå°è£…YOLOé€šç”¨æ£€æµ‹SDKï¼Œ5åˆ†é’Ÿé›†æˆç›®æ ‡æ£€æµ‹èƒ½åŠ›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T02:06:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¨å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3411107130652176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ä»£ç è½åœ°å®æˆ˜ï¼šåŸºäºJavaå°è£…YOLOé€šç”¨æ£€æµ‹SDKï¼Œ5åˆ†é’Ÿé›†æˆç›®æ ‡æ£€æµ‹èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411107130652176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¨å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:06:07.000Z" title="Mon Feb 02 2026 02:06:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšä¸šåŠ¡å¼€å‘çš„åŒå­¦å¤§æ¦‚ç‡éƒ½é‡åˆ°è¿‡è¿™ç±»éœ€æ±‚ï¼šç”µå•†ç³»ç»Ÿè¦é›†æˆå•†å“ç‘•ç–µæ£€æµ‹ã€å®‰é˜²å¹³å°è¦åŠ äººè„¸/è½¦è¾†æ£€æµ‹ã€ç‰©æµç³»ç»Ÿè¦è¯†åˆ«åŒ…è£¹æ¡ç â€”â€”æ ¸å¿ƒéƒ½æ˜¯ç›®æ ‡æ£€æµ‹ï¼Œä½†æ¯æ¬¡éƒ½è¦ä»å¤´å¯¹æ¥YOLOæ¨¡å‹ã€å†™é¢„å¤„ç†/åå¤„ç†ã€å¤„ç†è·¨å¹³å°å…¼å®¹ï¼Œä¸ä»…è€—æ—¶ï¼Œè¿˜å®¹æ˜“å› å›¢é˜ŸæŠ€æœ¯æ°´å¹³å·®å¼‚å¯¼è‡´ä»£ç è´¨é‡å‚å·®ä¸é½ã€‚</p>
<p>æœ€è¿‘åœ¨åšå·¥ä¸šçº§æ£€æµ‹å¹³å°çš„ä½ä»£ç é€‚é…æ—¶ï¼Œæˆ‘æŠŠYOLOçš„æ ¸å¿ƒèƒ½åŠ›å°è£…æˆäº†é€šç”¨Java SDKï¼Œåšåˆ°äº†â€œå¼•å…¥ä¾èµ–â†’å‡ è¡Œä»£ç è°ƒç”¨â€çš„ä½ä»£ç é›†æˆï¼Œå…¼å®¹YOLOv5/v7/v8å¤šä¸ªç‰ˆæœ¬ï¼Œæ”¯æŒå›¾ç‰‡ã€è§†é¢‘å¸§ã€Base64ç­‰å¤šæ ¼å¼è¾“å…¥ï¼Œä»Šå¤©å°±ä»å·¥ç¨‹åŒ–è§’åº¦æ‹†è§£è¿™ä¸ªSDKçš„è®¾è®¡å’Œå®ç°ï¼Œè®©å¤§å®¶èƒ½ç›´æ¥å¤ç”¨ï¼Œ5åˆ†é’Ÿç»™ä¸šåŠ¡ç³»ç»Ÿæ¥ä¸Šç›®æ ‡æ£€æµ‹èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦å°è£…é€šç”¨SDKï¼Ÿ</h2>
<p>å…ˆèŠèŠå®é™…å¼€å‘ä¸­ç›´æ¥ç”¨YOLOåŸç”Ÿä»£ç çš„ç—›ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘å°è£…SDKçš„æ ¸å¿ƒåŠ¨å› ï¼š</p>
<ol>
<li>
<p><strong>é‡å¤é€ è½®å­</strong>ï¼šæ¯ä¸ªä¸šåŠ¡å¯¹æ¥YOLOéƒ½è¦å†™ä¸€éå›¾åƒé¢„å¤„ç†ã€å¼ é‡è½¬æ¢ã€åå¤„ç†è§£æï¼Œä»£ç å†—ä½™ç‡è¶…80%ï¼›</p>
</li>
<li>
<p><strong>é›†æˆæˆæœ¬é«˜</strong>ï¼šä¸šåŠ¡å¼€å‘åŒå­¦ä¸æ‡‚æ·±åº¦å­¦ä¹ ï¼Œé¢å¯¹JNIã€TensorRTã€ONNX Runtimeè¿™äº›ä¾èµ–ä¸€è„¸æ‡µï¼›</p>
</li>
<li>
<p><strong>å…¼å®¹æ€§å·®</strong>ï¼šä¸åŒYOLOç‰ˆæœ¬è¾“å‡ºæ ¼å¼ä¸åŒï¼Œæ¢æ¨¡å‹å°±è¦æ”¹æ ¸å¿ƒä»£ç ï¼›</p>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–ç¼ºå¤±</strong>ï¼šæ²¡æœ‰ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ã€æ—¥å¿—è§„èŒƒã€èµ„æºç®¡ç†ï¼Œä¸Šçº¿åå®¹æ˜“å‡ºå†…å­˜æ³„æ¼ã€GPUå ç”¨è¿‡é«˜çš„é—®é¢˜ã€‚</p>
</li>
</ol>
<p>åŸºäºè¿™äº›ç—›ç‚¹ï¼Œæˆ‘ç»™SDKå®šäº†4ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li>
<p><strong>é€šç”¨æ€§</strong>ï¼šå…¼å®¹YOLOv5/v7/v8ï¼Œæ”¯æŒONNX/TensorRTä¸¤ç§æ¨ç†åç«¯ï¼›</p>
</li>
<li>
<p><strong>ä½ä¾µå…¥</strong>ï¼šä¸šåŠ¡ä¾§åªéœ€è°ƒç”¨1-2ä¸ªAPIï¼Œæ— éœ€å…³æ³¨åº•å±‚æ¨ç†ç»†èŠ‚ï¼›</p>
</li>
<li>
<p><strong>æ˜“æ‰©å±•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰æ£€æµ‹é˜ˆå€¼ã€ç±»åˆ«è¿‡æ»¤ã€æ¨¡å‹çƒ­æ›´æ–°ï¼›</p>
</li>
<li>
<p><strong>é«˜æ€§èƒ½</strong>ï¼šå•ä¾‹è®¾è®¡+èµ„æºå¤ç”¨ï¼Œé€‚é…å·¥ä¸šçº§é«˜å¹¶å‘åœºæ™¯ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€SDKæ ¸å¿ƒæ¶æ„è®¾è®¡</h2>
<p>å…ˆçœ‹æ•´ä½“ç›®å½•ç»“æ„ï¼ˆMavenå¤šæ¨¡å—è®¾è®¡ï¼Œç¬¦åˆJavaå·¥ç¨‹åŒ–è§„èŒƒï¼‰ï¼Œè¿™æ ·çš„ç»“æ„èƒ½è®©SDKèŒè´£æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
yolo-detection-sdk/
â”œâ”€â”€ sdk-core          # æ ¸å¿ƒæ¨¡å—ï¼ˆé¢„å¤„ç†ã€æ¨ç†ã€åå¤„ç†ï¼‰
â”‚   â”œâ”€â”€ src/main/java/com/xxx/yolo/
â”‚   â”‚   â”œâ”€â”€ config/    # é…ç½®ç±»ï¼ˆæ¨¡å‹è·¯å¾„ã€é˜ˆå€¼ã€åç«¯ç±»å‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ constant/  # å¸¸é‡å®šä¹‰ï¼ˆYOLOè¾“å‡ºç»´åº¦ã€é»˜è®¤é˜ˆå€¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ exception/ # è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆæ¨¡å‹åŠ è½½å¤±è´¥ã€æ¨ç†è¶…æ—¶ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ infer/     # æ¨ç†æ ¸å¿ƒï¼ˆONNX/TensorRTå¼•æ“å°è£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ model/     # æ•°æ®æ¨¡å‹ï¼ˆæ£€æµ‹ç»“æœã€è¾“å…¥å‚æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ processor/ # é¢„å¤„ç†/åå¤„ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ YoloDetector.java # å¯¹å¤–æ ¸å¿ƒAPI
â”œâ”€â”€ sdk-spring-boot-starter # SpringBootè‡ªåŠ¨è£…é…æ¨¡å—ï¼ˆä½ä»£ç æ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ src/main/java/com/xxx/yolo/starter/
â”‚   â”‚   â”œâ”€â”€ autoconfigure/ # è‡ªåŠ¨é…ç½®ç±»
â”‚   â”‚   â””â”€â”€ starter/       # å¯åŠ¨å™¨å°è£…
â””â”€â”€ sdk-demo          # ç¤ºä¾‹æ¨¡å—ï¼ˆå¿«é€Ÿä¸Šæ‰‹demoï¼‰
</code></pre>
<p>æ ¸å¿ƒæ¨¡å—èŒè´£åˆ’åˆ†ï¼š</p>
<ul>
<li>
<p><strong>config</strong>ï¼šç»Ÿä¸€ç®¡ç†æ¨¡å‹è·¯å¾„ã€æ¨ç†åç«¯ï¼ˆONNX/TensorRTï¼‰ã€ç½®ä¿¡åº¦é˜ˆå€¼ã€IOUé˜ˆå€¼ç­‰é…ç½®ï¼Œæ”¯æŒymlé…ç½®æ–‡ä»¶æ³¨å…¥ï¼›</p>
</li>
<li>
<p><strong>exception</strong>ï¼šè‡ªå®šä¹‰<code>YoloSdkException</code>ã€<code>ModelLoadException</code>ã€<code>InferTimeoutException</code>ç­‰å¼‚å¸¸ï¼Œæ–¹ä¾¿ä¸šåŠ¡ä¾§ç²¾å‡†æ•è·å’Œå¤„ç†ï¼›</p>
</li>
<li>
<p><strong>model</strong>ï¼šå®šä¹‰<code>DetectionResult</code>ï¼ˆæ£€æµ‹æ¡†åæ ‡ã€ç±»åˆ«ã€ç½®ä¿¡åº¦ï¼‰ã€<code>InferRequest</code>ï¼ˆè¾“å…¥æ•°æ®ã€è‡ªå®šä¹‰å‚æ•°ï¼‰ç­‰æ•°æ®ç»“æ„ï¼Œæ ‡å‡†åŒ–è¾“å…¥è¾“å‡ºï¼›</p>
</li>
<li>
<p><strong>processor</strong>ï¼šå°è£…å›¾åƒé¢„å¤„ç†ï¼ˆç¼©æ”¾ã€å½’ä¸€åŒ–ã€é€šé“è½¬æ¢ï¼‰ã€åå¤„ç†ï¼ˆNMSéæå¤§å€¼æŠ‘åˆ¶ã€åæ ‡è¿˜åŸï¼‰çš„é€šç”¨é€»è¾‘ï¼›</p>
</li>
<li>
<p><strong>infer</strong>ï¼šæŠ½è±¡<code>InferEngine</code>æ¥å£ï¼Œåˆ†åˆ«å®ç°<code>OnnxInferEngine</code>å’Œ<code>TensorRTInferEngine</code>ï¼Œåšåˆ°æ¨ç†åç«¯å¯æ’æ‹”ï¼›</p>
</li>
<li>
<p><strong>YoloDetector</strong>ï¼šå¯¹å¤–æš´éœ²çš„æ ¸å¿ƒç±»ï¼Œå°è£…æ‰€æœ‰åº•å±‚é€»è¾‘ï¼Œä¸šåŠ¡ä¾§åªéœ€è°ƒç”¨è¿™ä¸ªç±»çš„æ–¹æ³•ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€SDKæ ¸å¿ƒåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-3">3.1 æ ¸å¿ƒé…ç½®ç±»ï¼ˆæ”¯æŒymlé…ç½®ï¼Œä½ä»£ç å…³é”®ï¼‰</h3>
<p>å…ˆå®šä¹‰é…ç½®ç±»ï¼Œè®©ä¸šåŠ¡ä¾§èƒ½é€šè¿‡é…ç½®æ–‡ä»¶å¿«é€Ÿé…ç½®æ¨¡å‹ä¿¡æ¯ï¼Œæ— éœ€ç¡¬ç¼–ç ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-meta">@ConfigurationProperties(prefix = "yolo.detector")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YoloDetectorProperties</span> {
    <span class="hljs-comment">/** æ¨¡å‹ç±»å‹ï¼šYOLOv5/YOLOv7/YOLOv8 */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">modelType</span> <span class="hljs-operator">=</span> <span class="hljs-string">"YOLOv8"</span>;
    <span class="hljs-comment">/** æ¨ç†åç«¯ï¼šONNX/TENSORRT */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">inferBackend</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ONNX"</span>;
    <span class="hljs-comment">/** æ¨¡å‹æ–‡ä»¶è·¯å¾„ */</span>
    <span class="hljs-keyword">private</span> String modelPath;
    <span class="hljs-comment">/** ç±»åˆ«åç§°æ–‡ä»¶è·¯å¾„ï¼ˆtxtï¼Œæ¯è¡Œä¸€ä¸ªç±»åˆ«ï¼‰ */</span>
    <span class="hljs-keyword">private</span> String classNamesPath;
    <span class="hljs-comment">/** ç½®ä¿¡åº¦é˜ˆå€¼ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">confThreshold</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.5f</span>;
    <span class="hljs-comment">/** NMS IOUé˜ˆå€¼ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">iouThreshold</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.45f</span>;
    <span class="hljs-comment">/** è¾“å…¥å›¾åƒå°ºå¯¸ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">inputSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">640</span>;
    <span class="hljs-comment">/** æ¨ç†è¶…æ—¶æ—¶é—´ï¼ˆmsï¼‰ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>;
}
</code></pre>
<h3 data-id="heading-4">3.2 æŠ½è±¡æ¨ç†å¼•æ“ï¼ˆå®ç°åç«¯å¯æ’æ‹”ï¼‰</h3>
<p>å…ˆå®šä¹‰<code>InferEngine</code>æ¥å£ï¼Œå±è”½ä¸åŒæ¨ç†åç«¯çš„å·®å¼‚ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InferEngine</span> {
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–å¼•æ“ï¼ˆåŠ è½½æ¨¡å‹ï¼‰
     * <span class="hljs-doctag">@param</span> config é…ç½®ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(YoloDetectorProperties config)</span>;

    <span class="hljs-comment">/**
     * æ‰§è¡Œæ¨ç†
     * <span class="hljs-doctag">@param</span> inputTensor é¢„å¤„ç†åçš„è¾“å…¥å¼ é‡
     * <span class="hljs-doctag">@return</span> æ¨ç†è¾“å‡ºå¼ é‡
     * <span class="hljs-doctag">@throws</span> InferTimeoutException æ¨ç†è¶…æ—¶
     */</span>
    <span class="hljs-type">float</span>[][] infer(<span class="hljs-type">float</span>[] inputTensor) <span class="hljs-keyword">throws</span> InferTimeoutException;

    <span class="hljs-comment">/**
     * é‡Šæ”¾èµ„æº
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>ä»¥ONNX Runtimeä¸ºä¾‹å®ç°å…·ä½“å¼•æ“ï¼ˆæœ€å¸¸ç”¨ï¼Œé—¨æ§›ä½ï¼‰ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼ˆçœç•¥éƒ¨åˆ†å·¥å…·ç±»ï¼‰ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OnnxInferEngine</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InferEngine</span> {
    <span class="hljs-keyword">private</span> OnnxRuntimeEnvironment env;
    <span class="hljs-keyword">private</span> OrtSession session;
    <span class="hljs-keyword">private</span> YoloDetectorProperties config;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(YoloDetectorProperties config)</span> {
        <span class="hljs-built_in">this</span>.config = config;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆå§‹åŒ–ONNX Runtimeç¯å¢ƒ</span>
            env = OnnxRuntimeEnvironment.getEnvironment();
            <span class="hljs-comment">// åŠ è½½æ¨¡å‹æ–‡ä»¶</span>
            session = env.createSession(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(config.getModelPath()).getPath());
            <span class="hljs-comment">// è®¾ç½®è¶…æ—¶æ—¶é—´</span>
            session.getOptions().setTimeout(config.getTimeout());
        } <span class="hljs-keyword">catch</span> (OrtException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelLoadException</span>(<span class="hljs-string">"ONNXæ¨¡å‹åŠ è½½å¤±è´¥ï¼š"</span> + e.getMessage(), e);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span>[][] infer(<span class="hljs-type">float</span>[] inputTensor) <span class="hljs-keyword">throws</span> InferTimeoutException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ„é€ è¾“å…¥å¼ é‡ï¼ˆYOLOè¾“å…¥æ ¼å¼ï¼š[1,3,640,640]ï¼‰</span>
            <span class="hljs-type">long</span>[] inputShape = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[]{<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, config.getInputSize(), config.getInputSize()};
            <span class="hljs-type">OrtTensor</span> <span class="hljs-variable">inputOrtTensor</span> <span class="hljs-operator">=</span> OrtTensor.createTensor(env, inputTensor, inputShape);
            <span class="hljs-comment">// æ‰§è¡Œæ¨ç†</span>
            OrtSession.<span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> session.run(Collections.singletonMap(<span class="hljs-string">"images"</span>, inputOrtTensor));
            <span class="hljs-comment">// è§£æè¾“å‡ºï¼ˆä¸åŒYOLOç‰ˆæœ¬è¾“å‡ºç»´åº¦ä¸åŒï¼Œè¿™é‡Œåšé€šç”¨é€‚é…ï¼‰</span>
            <span class="hljs-type">float</span>[][] output = (<span class="hljs-type">float</span>[][]) result.get(<span class="hljs-number">0</span>).getValue();
            inputOrtTensor.close();
            result.close();
            <span class="hljs-keyword">return</span> output;
        } <span class="hljs-keyword">catch</span> (OrtException e) {
            <span class="hljs-keyword">if</span> (e.getMessage().contains(<span class="hljs-string">"timeout"</span>)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferTimeoutException</span>(<span class="hljs-string">"æ¨ç†è¶…æ—¶ï¼Œè¶…è¿‡"</span> + config.getTimeout() + <span class="hljs-string">"ms"</span>);
            }
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YoloSdkException</span>(<span class="hljs-string">"ONNXæ¨ç†å¤±è´¥ï¼š"</span> + e.getMessage(), e);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) session.close();
            <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">null</span>) env.close();
        } <span class="hljs-keyword">catch</span> (OrtException e) {
            <span class="hljs-comment">// è®°å½•æ—¥å¿—ï¼Œä¸æŠ›å‡ºå¼‚å¸¸</span>
            log.warn(<span class="hljs-string">"ONNXå¼•æ“èµ„æºé‡Šæ”¾å¤±è´¥ï¼š{}"</span>, e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-5">3.3 é¢„å¤„ç†/åå¤„ç†é€šç”¨é€»è¾‘ï¼ˆSDKæ ¸å¿ƒï¼‰</h3>
<p>é¢„å¤„ç†æ˜¯ä¿è¯æ£€æµ‹ç²¾åº¦çš„å…³é”®ï¼Œè¿™é‡Œå°è£…é€šç”¨æ–¹æ³•ï¼Œè§£å†³å›¾åƒç¼©æ”¾ã€æ¯”ä¾‹ä¿æŒã€å½’ä¸€åŒ–ç­‰é—®é¢˜ï¼ˆå®é™…å¼€å‘ä¸­è¸©è¿‡å¾ˆå¤šå‘ï¼Œæ¯”å¦‚æ‹‰ä¼¸å¯¼è‡´æ£€æµ‹æ¡†åç§»ï¼‰ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImagePreprocessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> inputSize;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ImagePreprocessor</span><span class="hljs-params">(<span class="hljs-type">int</span> inputSize)</span> {
        <span class="hljs-built_in">this</span>.inputSize = inputSize;
    }

    <span class="hljs-comment">/**
     * é€šç”¨å›¾åƒé¢„å¤„ç†ï¼šBGRâ†’RGBã€ä¿æŒæ¯”ä¾‹ç¼©æ”¾ã€å¡«å……é»‘è¾¹ã€å½’ä¸€åŒ–ã€CHWè½¬æ¢
     * <span class="hljs-doctag">@param</span> mat OpenCV Matå¯¹è±¡ï¼ˆBGRæ ¼å¼ï¼‰
     * <span class="hljs-doctag">@return</span> é¢„å¤„ç†åçš„CHWæ ¼å¼æµ®ç‚¹å¼ é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span>[] preprocess(Mat mat) {
        <span class="hljs-comment">// 1. ä¿å­˜åŸå§‹å°ºå¯¸ï¼Œç”¨äºåå¤„ç†è¿˜åŸåæ ‡</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">origW</span> <span class="hljs-operator">=</span> mat.cols();
        <span class="hljs-type">int</span> <span class="hljs-variable">origH</span> <span class="hljs-operator">=</span> mat.rows();
        
        <span class="hljs-comment">// 2. è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ï¼Œä¿æŒå®½é«˜æ¯”ï¼ˆé¿å…æ‹‰ä¼¸ï¼‰</span>
        <span class="hljs-type">float</span> <span class="hljs-variable">scale</span> <span class="hljs-operator">=</span> Math.min((<span class="hljs-type">float</span>) inputSize / origW, (<span class="hljs-type">float</span>) inputSize / origH);
        <span class="hljs-type">int</span> <span class="hljs-variable">newW</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (origW * scale);
        <span class="hljs-type">int</span> <span class="hljs-variable">newH</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (origH * scale);
        
        <span class="hljs-comment">// 3. ç¼©æ”¾å›¾åƒ</span>
        <span class="hljs-type">Mat</span> <span class="hljs-variable">resizedMat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mat</span>();
        Imgproc.resize(mat, resizedMat, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Size</span>(newW, newH), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, Imgproc.INTER_LINEAR);
        
        <span class="hljs-comment">// 4. åˆ›å»ºè¾“å…¥å°ºå¯¸çš„ç”»å¸ƒï¼Œå¡«å……é»‘è¾¹</span>
        <span class="hljs-type">Mat</span> <span class="hljs-variable">padMat</span> <span class="hljs-operator">=</span> Mat.zeros(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Size</span>(inputSize, inputSize), CvType.CV_8UC3);
        <span class="hljs-type">int</span> <span class="hljs-variable">xOffset</span> <span class="hljs-operator">=</span> (inputSize - newW) / <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">yOffset</span> <span class="hljs-operator">=</span> (inputSize - newH) / <span class="hljs-number">2</span>;
        resizedMat.copyTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Mat</span>(padMat, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rect</span>(xOffset, yOffset, newW, newH)));
        
        <span class="hljs-comment">// 5. BGRâ†’RGBè½¬æ¢</span>
        <span class="hljs-type">Mat</span> <span class="hljs-variable">rgbMat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mat</span>();
        Imgproc.cvtColor(padMat, rgbMat, Imgproc.COLOR_BGR2RGB);
        
        <span class="hljs-comment">// 6. å½’ä¸€åŒ–åˆ°0-1</span>
        rgbMat.convertTo(rgbMat, CvType.CV_32F, <span class="hljs-number">1.0</span> / <span class="hljs-number">255.0</span>);
        
        <span class="hljs-comment">// 7. HWCâ†’CHWè½¬æ¢ï¼ˆONNX/TensorRTè¾“å…¥è¦æ±‚ï¼‰</span>
        <span class="hljs-type">float</span>[] hwcData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">float</span>[inputSize * inputSize * <span class="hljs-number">3</span>];
        rgbMat.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, hwcData);
        
        <span class="hljs-type">float</span>[] chwData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">float</span>[<span class="hljs-number">3</span> * inputSize * inputSize];
        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; c &lt; <span class="hljs-number">3</span>; c++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; h &lt; inputSize; h++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; w &lt; inputSize; w++) {
                    chwData[idx++] = hwcData[h * inputSize * <span class="hljs-number">3</span> + w * <span class="hljs-number">3</span> + c];
                }
            }
        }
        
        <span class="hljs-comment">// é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼</span>
        resizedMat.release();
        padMat.release();
        rgbMat.release();
        
        <span class="hljs-keyword">return</span> chwData;
    }
}
</code></pre>
<p>åå¤„ç†é‡ç‚¹è§£å†³ä¸åŒYOLOç‰ˆæœ¬è¾“å‡ºæ ¼å¼å…¼å®¹ã€åæ ‡è¿˜åŸã€NMSè¿‡æ»¤é—®é¢˜ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultPostprocessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> YoloDetectorProperties config;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; classNames; <span class="hljs-comment">// ç±»åˆ«åç§°åˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> confThreshold;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> iouThreshold;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ResultPostprocessor</span><span class="hljs-params">(YoloDetectorProperties config)</span> {
        <span class="hljs-built_in">this</span>.config = config;
        <span class="hljs-built_in">this</span>.confThreshold = config.getConfThreshold();
        <span class="hljs-built_in">this</span>.iouThreshold = config.getIouThreshold();
        <span class="hljs-comment">// åŠ è½½ç±»åˆ«åç§°æ–‡ä»¶</span>
        <span class="hljs-built_in">this</span>.classNames = loadClassNames(config.getClassNamesPath());
    }

    <span class="hljs-comment">/**
     * é€šç”¨åå¤„ç†ï¼šè§£æè¾“å‡ºå¼ é‡â†’åæ ‡è¿˜åŸâ†’NMSè¿‡æ»¤â†’å°è£…ç»“æœ
     * <span class="hljs-doctag">@param</span> outputTensor æ¨ç†è¾“å‡ºå¼ é‡
     * <span class="hljs-doctag">@param</span> origW åŸå§‹å›¾åƒå®½åº¦
     * <span class="hljs-doctag">@param</span> origH åŸå§‹å›¾åƒé«˜åº¦
     * <span class="hljs-doctag">@return</span> æ ‡å‡†åŒ–æ£€æµ‹ç»“æœåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">postprocess</span><span class="hljs-params">(<span class="hljs-type">float</span>[][] outputTensor, <span class="hljs-type">int</span> origW, <span class="hljs-type">int</span> origH)</span> {
        <span class="hljs-comment">// 1. é€‚é…ä¸åŒYOLOç‰ˆæœ¬çš„è¾“å‡ºæ ¼å¼ï¼ˆv5/v7æ˜¯[1,num_classes+5,8400]ï¼Œv8æ˜¯[1,84,8400]ï¼‰</span>
        <span class="hljs-type">float</span>[][] outputs = adaptYoloOutput(outputTensor, config.getModelType());
        
        <span class="hljs-comment">// 2. è§£ææ£€æµ‹æ¡†ã€ç½®ä¿¡åº¦ã€ç±»åˆ«</span>
        List&lt;DetectionBox&gt; rawBoxes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">numClasses</span> <span class="hljs-operator">=</span> classNames.size();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; outputs[<span class="hljs-number">0</span>].length; i++) {
            <span class="hljs-comment">// æå–ç½®ä¿¡åº¦å’Œç±»åˆ«</span>
            <span class="hljs-type">float</span> <span class="hljs-variable">maxConf</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">clsIdx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>; j &lt; <span class="hljs-number">4</span> + numClasses; j++) {
                <span class="hljs-keyword">if</span> (outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses) + j] &gt; maxConf) {
                    maxConf = outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses) + j];
                    clsIdx = j - <span class="hljs-number">4</span>;
                }
            }
            <span class="hljs-comment">// è¿‡æ»¤ä½ç½®ä¿¡åº¦ç»“æœ</span>
            <span class="hljs-keyword">if</span> (maxConf &lt; confThreshold) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// æå–æ£€æµ‹æ¡†åæ ‡ï¼ˆx,y,w,hï¼‰</span>
            <span class="hljs-type">float</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses)];
            <span class="hljs-type">float</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses) + <span class="hljs-number">1</span>];
            <span class="hljs-type">float</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses) + <span class="hljs-number">2</span>];
            <span class="hljs-type">float</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> outputs[<span class="hljs-number">0</span>][i * (<span class="hljs-number">4</span> + numClasses) + <span class="hljs-number">3</span>];
            
            rawBoxes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DetectionBox</span>(x, y, w, h, maxConf, clsIdx));
        }
        
        <span class="hljs-comment">// 3. NMSéæå¤§å€¼æŠ‘åˆ¶ï¼Œå»é‡</span>
        List&lt;DetectionBox&gt; nmsBoxes = nms(rawBoxes, iouThreshold);
        
        <span class="hljs-comment">// 4. è¿˜åŸåæ ‡åˆ°åŸå§‹å›¾åƒå°ºå¯¸ï¼ˆè§£å†³ç¼©æ”¾å’Œå¡«å……çš„åç§»ï¼‰</span>
        List&lt;DetectionResult&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">float</span> <span class="hljs-variable">scale</span> <span class="hljs-operator">=</span> Math.min((<span class="hljs-type">float</span>) config.getInputSize() / origW, (<span class="hljs-type">float</span>) config.getInputSize() / origH);
        <span class="hljs-type">int</span> <span class="hljs-variable">xOffset</span> <span class="hljs-operator">=</span> (config.getInputSize() - origW * scale) / <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">yOffset</span> <span class="hljs-operator">=</span> (config.getInputSize() - origH * scale) / <span class="hljs-number">2</span>;
        
        <span class="hljs-keyword">for</span> (DetectionBox box : nmsBoxes) {
            <span class="hljs-comment">// åæ ‡è¿˜åŸè®¡ç®—</span>
            <span class="hljs-type">float</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> (box.getX() - box.getW() / <span class="hljs-number">2</span> - xOffset) / scale;
            <span class="hljs-type">float</span> <span class="hljs-variable">y1</span> <span class="hljs-operator">=</span> (box.getY() - box.getH() / <span class="hljs-number">2</span> - yOffset) / scale;
            <span class="hljs-type">float</span> <span class="hljs-variable">x2</span> <span class="hljs-operator">=</span> (box.getX() + box.getW() / <span class="hljs-number">2</span> - xOffset) / scale;
            <span class="hljs-type">float</span> <span class="hljs-variable">y2</span> <span class="hljs-operator">=</span> (box.getY() + box.getH() / <span class="hljs-number">2</span> - yOffset) / scale;
            
            <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥ï¼Œé¿å…åæ ‡è¶…å‡ºå›¾åƒèŒƒå›´</span>
            x1 = Math.max(<span class="hljs-number">0</span>, Math.min(x1, origW));
            y1 = Math.max(<span class="hljs-number">0</span>, Math.min(y1, origH));
            x2 = Math.max(<span class="hljs-number">0</span>, Math.min(x2, origW));
            y2 = Math.max(<span class="hljs-number">0</span>, Math.min(y2, origH));
            
            <span class="hljs-comment">// å°è£…æ ‡å‡†åŒ–ç»“æœ</span>
            results.add(DetectionResult.builder()
                    .className(classNames.get(box.getClsIdx()))
                    .confidence(box.getConfidence())
                    .x1(x1)
                    .y1(y1)
                    .x2(x2)
                    .y2(y2)
                    .build());
        }
        
        <span class="hljs-keyword">return</span> results;
    }

    <span class="hljs-comment">// NMSå®ç°ã€YOLOè¾“å‡ºé€‚é…ã€ç±»åˆ«æ–‡ä»¶åŠ è½½ç­‰å·¥å…·æ–¹æ³•çœç•¥ï¼ˆéƒ½æ˜¯å·¥ç¨‹åŒ–å¿…å¤‡ï¼‰</span>
}
</code></pre>
<h3 data-id="heading-6">3.4 å¯¹å¤–æ ¸å¿ƒAPIå°è£…ï¼ˆä½ä»£ç é›†æˆçš„å…³é”®ï¼‰</h3>
<p>æœ€ç»ˆå¯¹å¤–æš´éœ²çš„<code>YoloDetector</code>ç±»è¦è¶³å¤Ÿç®€å•ï¼Œä¸šåŠ¡ä¾§æ— éœ€å…³æ³¨ä»»ä½•åº•å±‚ç»†èŠ‚ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YoloDetector</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span>, DisposableBean {
    <span class="hljs-keyword">private</span> YoloDetectorProperties config;
    <span class="hljs-keyword">private</span> InferEngine inferEngine;
    <span class="hljs-keyword">private</span> ImagePreprocessor preprocessor;
    <span class="hljs-keyword">private</span> ResultPostprocessor postprocessor;

    <span class="hljs-comment">// æ„é€ å™¨æ³¨å…¥é…ç½®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">YoloDetector</span><span class="hljs-params">(YoloDetectorProperties config)</span> {
        <span class="hljs-built_in">this</span>.config = config;
    }

    <span class="hljs-comment">// åˆå§‹åŒ–ï¼šåˆ›å»ºå¼•æ“ã€é¢„å¤„ç†/åå¤„ç†å®ä¾‹</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ ¹æ®é…ç½®é€‰æ‹©æ¨ç†å¼•æ“</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"ONNX"</span>.equals(config.getInferBackend())) {
            inferEngine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OnnxInferEngine</span>();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"TENSORRT"</span>.equals(config.getInferBackend())) {
            inferEngine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TensorRTInferEngine</span>();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelLoadException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„æ¨ç†åç«¯ï¼š"</span> + config.getInferBackend());
        }
        
        <span class="hljs-comment">// åˆå§‹åŒ–å„ç»„ä»¶</span>
        inferEngine.init(config);
        preprocessor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImagePreprocessor</span>(config.getInputSize());
        postprocessor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResultPostprocessor</span>(config);
    }

    <span class="hljs-comment">/**
     * å¯¹å¤–æ ¸å¿ƒæ–¹æ³•ï¼šä¼ å…¥Matå¯¹è±¡ï¼Œè¿”å›æ£€æµ‹ç»“æœ
     * <span class="hljs-doctag">@param</span> mat OpenCV Matå›¾åƒï¼ˆBGRæ ¼å¼ï¼‰
     * <span class="hljs-doctag">@return</span> æ£€æµ‹ç»“æœåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">detect</span><span class="hljs-params">(Mat mat)</span> {
        <span class="hljs-comment">// 1. é¢„å¤„ç†</span>
        <span class="hljs-type">float</span>[] inputTensor = preprocessor.preprocess(mat);
        <span class="hljs-comment">// 2. æ¨ç†</span>
        <span class="hljs-type">float</span>[][] outputTensor = inferEngine.infer(inputTensor);
        <span class="hljs-comment">// 3. åå¤„ç†</span>
        <span class="hljs-keyword">return</span> postprocessor.postprocess(outputTensor, mat.cols(), mat.rows());
    }

    <span class="hljs-comment">/**
     * é‡è½½æ–¹æ³•ï¼šæ”¯æŒBase64å­—ç¬¦ä¸²è¾“å…¥ï¼ˆä¸šåŠ¡ä¾§æœ€å¸¸ç”¨ï¼‰
     * <span class="hljs-doctag">@param</span> base64Str å›¾åƒBase64å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> æ£€æµ‹ç»“æœåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">detectByBase64</span><span class="hljs-params">(String base64Str)</span> {
        <span class="hljs-comment">// Base64â†’Matè½¬æ¢</span>
        <span class="hljs-type">byte</span>[] imageBytes = Base64.getDecoder().decode(base64Str);
        <span class="hljs-type">Mat</span> <span class="hljs-variable">mat</span> <span class="hljs-operator">=</span> Imgcodecs.imdecode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MatOfByte</span>(imageBytes), Imgcodecs.IMREAD_COLOR);
        <span class="hljs-keyword">if</span> (mat.empty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YoloSdkException</span>(<span class="hljs-string">"Base64å­—ç¬¦ä¸²è½¬æ¢å›¾åƒå¤±è´¥"</span>);
        }
        <span class="hljs-keyword">return</span> detect(mat);
    }

    <span class="hljs-comment">/**
     * é‡è½½æ–¹æ³•ï¼šæ”¯æŒæ–‡ä»¶è·¯å¾„è¾“å…¥
     * <span class="hljs-doctag">@param</span> filePath å›¾åƒæ–‡ä»¶è·¯å¾„
     * <span class="hljs-doctag">@return</span> æ£€æµ‹ç»“æœåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetectionResult&gt; <span class="hljs-title function_">detectByFilePath</span><span class="hljs-params">(String filePath)</span> {
        <span class="hljs-type">Mat</span> <span class="hljs-variable">mat</span> <span class="hljs-operator">=</span> Imgcodecs.imread(filePath);
        <span class="hljs-keyword">if</span> (mat.empty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YoloSdkException</span>(<span class="hljs-string">"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥ï¼š"</span> + filePath);
        }
        <span class="hljs-keyword">return</span> detect(mat);
    }

    <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (inferEngine != <span class="hljs-literal">null</span>) {
            inferEngine.release();
        }
    }
}
</code></pre>
<h3 data-id="heading-7">3.5 SpringBootè‡ªåŠ¨è£…é…ï¼ˆä½ä»£ç é›†æˆçš„ç»ˆæå½¢æ€ï¼‰</h3>
<p>ä¸ºäº†è®©SpringBooté¡¹ç›®èƒ½â€œå¼•å…¥ä¾èµ–å°±ç”¨â€ï¼Œå®ç°è‡ªåŠ¨è£…é…ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableConfigurationProperties(YoloDetectorProperties.class)</span>
<span class="hljs-meta">@ConditionalOnClass(YoloDetector.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YoloDetectorAutoConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean</span>
    <span class="hljs-meta">@ConditionalOnProperty(prefix = "yolo.detector", name = "modelPath")</span>
    <span class="hljs-keyword">public</span> YoloDetector <span class="hljs-title function_">yoloDetector</span><span class="hljs-params">(YoloDetectorProperties properties)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YoloDetector</span>(properties);
    }
}
</code></pre>
<p>åœ¨<code>resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ä¸­é…ç½®è‡ªåŠ¨è£…é…ç±»ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
com.xxx.yolo.starter.autoconfigure.YoloDetectorAutoConfiguration
</code></pre>
<h2 data-id="heading-8">å››ã€ä½ä»£ç é›†æˆç¤ºä¾‹ï¼ˆçœŸæ­£çš„5åˆ†é’Ÿä¸Šæ‰‹ï¼‰</h2>
<h3 data-id="heading-9">4.1 å¼•å…¥ä¾èµ–ï¼ˆMavenï¼‰</h3>
<pre><code class="hljs language-XML" lang="XML">
<span class="hljs-comment">&lt;!-- å¼•å…¥SDKçš„SpringBoot Starter --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.xxx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>yolo-detection-sdk-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- OpenCVä¾èµ–ï¼ˆSDKå·²å†…ç½®ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.openpnp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opencv<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.8.0-1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">4.2 é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-YAML" lang="YAML">
<span class="hljs-attr">yolo:</span>
  <span class="hljs-attr">detector:</span>
    <span class="hljs-attr">model-type:</span> <span class="hljs-string">YOLOv8</span>          <span class="hljs-comment"># æ¨¡å‹ç‰ˆæœ¬</span>
    <span class="hljs-attr">infer-backend:</span> <span class="hljs-string">ONNX</span>         <span class="hljs-comment"># æ¨ç†åç«¯</span>
    <span class="hljs-attr">model-path:</span> <span class="hljs-string">./model/yolov8s.onnx</span> <span class="hljs-comment"># æ¨¡å‹æ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">class-names-path:</span> <span class="hljs-string">./model/coco.names</span> <span class="hljs-comment"># ç±»åˆ«æ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">conf-threshold:</span> <span class="hljs-number">0.5</span>         <span class="hljs-comment"># ç½®ä¿¡åº¦é˜ˆå€¼</span>
    <span class="hljs-attr">iou-threshold:</span> <span class="hljs-number">0.45</span>         <span class="hljs-comment"># NMSé˜ˆå€¼</span>
    <span class="hljs-attr">input-size:</span> <span class="hljs-number">640</span>             <span class="hljs-comment"># è¾“å…¥å°ºå¯¸</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-number">5000</span>               <span class="hljs-comment"># æ¨ç†è¶…æ—¶</span>
</code></pre>
<h3 data-id="heading-11">4.3 ä¸šåŠ¡ä»£ç è°ƒç”¨ï¼ˆåªéœ€3è¡Œï¼‰</h3>
<pre><code class="hljs language-Java" lang="Java">
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/detect")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DetectController</span> {
    <span class="hljs-comment">// æ³¨å…¥SDKæ ¸å¿ƒç±»</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> YoloDetector yoloDetector;

    <span class="hljs-comment">/**
     * ä¸šåŠ¡æ¥å£ï¼šBase64å›¾åƒæ£€æµ‹
     */</span>
    <span class="hljs-meta">@PostMapping("/base64")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;DetectionResult&gt;&gt; <span class="hljs-title function_">detectByBase64</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String base64)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ ¸å¿ƒè°ƒç”¨ï¼šä¸€è¡Œä»£ç å®Œæˆæ£€æµ‹</span>
            List&lt;DetectionResult&gt; results = yoloDetector.detectByBase64(base64);
            <span class="hljs-keyword">return</span> Result.success(results);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"æ£€æµ‹å¤±è´¥ï¼š"</span> + e.getMessage());
        }
    }

    <span class="hljs-comment">/**
     * ä¸šåŠ¡æ¥å£ï¼šæ–‡ä»¶ä¸Šä¼ æ£€æµ‹
     */</span>
    <span class="hljs-meta">@PostMapping("/file")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;DetectionResult&gt;&gt; <span class="hljs-title function_">detectByFile</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> MultipartFile file)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ–‡ä»¶â†’Matâ†’æ£€æµ‹</span>
            <span class="hljs-type">Mat</span> <span class="hljs-variable">mat</span> <span class="hljs-operator">=</span> Imgcodecs.imdecode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MatOfByte</span>(file.getBytes()), Imgcodecs.IMREAD_COLOR);
            List&lt;DetectionResult&gt; results = yoloDetector.detect(mat);
            <span class="hljs-keyword">return</span> Result.success(results);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"æ£€æµ‹å¤±è´¥ï¼š"</span> + e.getMessage());
        }
    }
}
</code></pre>
<p>åˆ°è¿™é‡Œï¼Œä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿå°±å®Œæˆäº†ç›®æ ‡æ£€æµ‹èƒ½åŠ›çš„é›†æˆï¼Œå…¨ç¨‹ä¸åˆ°5åˆ†é’Ÿï¼Œæ— éœ€å†™ä»»ä½•é¢„å¤„ç†ã€æ¨ç†ã€åå¤„ç†ä»£ç â€”â€”è¿™å°±æ˜¯ä½ä»£ç å°è£…çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-12">äº”ã€å·¥ç¨‹åŒ–ä¸æ€§èƒ½ä¼˜åŒ–</h2>
<p>å°è£…SDKä¸ä»…è¦â€œèƒ½ç”¨â€ï¼Œè¿˜è¦â€œå¥½ç”¨ã€ç¨³å®šâ€ï¼Œåˆ†äº«å‡ ä¸ªå®é™…è½åœ°ä¸­çš„ä¼˜åŒ–ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>å•ä¾‹+èµ„æºå¤ç”¨</strong>ï¼š<code>YoloDetector</code>å•ä¾‹åˆ›å»ºï¼Œé¿å…é‡å¤åŠ è½½æ¨¡å‹ï¼›é¢„å¤„ç†é˜¶æ®µå¤ç”¨Matå¯¹è±¡ï¼Œå‡å°‘JVM GCï¼›</p>
</li>
<li>
<p><strong>å¤šçº¿ç¨‹å®‰å…¨</strong>ï¼šæ¨ç†å¼•æ“åŠ çº¿ç¨‹é”ï¼Œé¿å…å¤šçº¿ç¨‹è°ƒç”¨å¯¼è‡´çš„JNIå´©æºƒï¼›é«˜å¹¶å‘åœºæ™¯ç”¨çº¿ç¨‹æ± æ§åˆ¶æ¨ç†å¹¶å‘æ•°ï¼ˆæ ¸å¿ƒæ•°=GPUæ ¸å¿ƒæ•°ï¼‰ï¼›</p>
</li>
<li>
<p><strong>æ¨¡å‹çƒ­æ›´æ–°</strong>ï¼šå¢åŠ <code>reloadModel()</code>æ–¹æ³•ï¼Œæ”¯æŒä¸é‡å¯æœåŠ¡æ›´æ–°æ¨¡å‹æ–‡ä»¶ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§åŸ‹ç‚¹</strong>ï¼šåœ¨æ¨ç†å‰åè®°å½•è€—æ—¶ï¼Œè¾“å‡ºæ—¥å¿—ï¼ˆå¦‚â€œæ£€æµ‹è€—æ—¶ï¼š12msï¼Œæ£€æµ‹åˆ°3ä¸ªç›®æ ‡â€ï¼‰ï¼Œæ–¹ä¾¿æ’æŸ¥æ€§èƒ½é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>å†…å­˜æ³„æ¼é˜²æŠ¤</strong>ï¼šæ‰€æœ‰Matã€OrtTensorå¯¹è±¡ç”¨å®Œå³å…³ï¼Œåœ¨<code>finally</code>å—ä¸­é‡Šæ”¾èµ„æºï¼Œé¿å…GPU/å†…å­˜æ³„æ¼ã€‚</p>
</li>
</ol>
<h2 data-id="heading-13">å…­ã€å®é™…è½åœ°åœºæ™¯ä¸æ•ˆæœ</h2>
<p>è¿™ä¸ªSDKå·²ç»åœ¨3ä¸ªä¸šåŠ¡åœºæ™¯è½åœ°ï¼š</p>
<ul>
<li>
<p>ç”µå•†å•†å“ç‘•ç–µæ£€æµ‹ï¼šå¯¹æ¥ä»“å‚¨ç³»ç»Ÿï¼Œæ£€æµ‹å•†å“å›¾ç‰‡ä¸­çš„ç ´æŸã€æ±¡æ¸ï¼Œé›†æˆè€—æ—¶ä»2å¤©ç¼©çŸ­åˆ°1å°æ—¶ï¼›</p>
</li>
<li>
<p>å›­åŒºå®‰é˜²å¹³å°ï¼šè¯†åˆ«ç›‘æ§è§†é¢‘å¸§ä¸­çš„äººå‘˜ã€è½¦è¾†ï¼Œæ”¯æŒå®æ—¶æ£€æµ‹ï¼Œå¸§ç‡ç¨³å®šåœ¨30FPS+ï¼›</p>
</li>
<li>
<p>ç‰©æµåŒ…è£¹æ£€æµ‹ï¼šè¯†åˆ«åŒ…è£¹ä¸Šçš„æ¡ç ã€æ ‡ç­¾ï¼Œå…¼å®¹ä¸åŒå…‰ç…§ã€è§’åº¦çš„å›¾åƒï¼Œå‡†ç¡®ç‡98%+ã€‚</p>
</li>
</ul>
<p>æ€§èƒ½æ–¹é¢ï¼ˆTesla T4 GPUï¼‰ï¼š</p>
<ul>
<li>
<p>YOLOv8s + ONNX Runtimeï¼šå•å¸§è€—æ—¶15msï¼Œå¸§ç‡â‰ˆ66FPSï¼›</p>
</li>
<li>
<p>YOLOv8s + TensorRT FP16ï¼šå•å¸§è€—æ—¶8msï¼Œå¸§ç‡â‰ˆ125FPSï¼›</p>
</li>
</ul>
<p>å®Œå…¨æ»¡è¶³å·¥ä¸šçº§é«˜å¹¶å‘ã€å®æ—¶æ€§è¦æ±‚ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<h3 data-id="heading-15">å…³é”®ç‚¹å›é¡¾</h3>
<ol>
<li>
<p>å°è£…Java+YOLOé€šç”¨æ£€æµ‹SDKçš„æ ¸å¿ƒæ˜¯<strong>æŠ½è±¡åŒ–+æ ‡å‡†åŒ–</strong>ï¼šæŠ½è±¡æ¨ç†å¼•æ“å±è”½åº•å±‚å·®å¼‚ï¼Œæ ‡å‡†åŒ–è¾“å…¥è¾“å‡ºé™ä½é›†æˆæˆæœ¬ï¼›</p>
</li>
<li>
<p>ä½ä»£ç é›†æˆçš„å…³é”®æ˜¯<strong>è‡ªåŠ¨è£…é…+æç®€API</strong>ï¼šSpringBoot Starterè®©ä¾èµ–å¼•å…¥å³å¯ç”¨ï¼Œå¯¹å¤–æš´éœ²1-2ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œä¸šåŠ¡ä¾§æ— éœ€å…³æ³¨ç»†èŠ‚ï¼›</p>
</li>
<li>
<p>å·¥ä¸šçº§SDKä¸ä»…è¦å®ç°åŠŸèƒ½ï¼Œè¿˜è¦å…³æ³¨<strong>å·¥ç¨‹åŒ–ç»†èŠ‚</strong>ï¼šå¼‚å¸¸å¤„ç†ã€èµ„æºç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ã€ç›‘æ§åŸ‹ç‚¹ç¼ºä¸€ä¸å¯ã€‚</p>
</li>
</ol>
<p>å…¶å®å°è£…é€šç”¨SDKçš„æ€è·¯ä¸æ­¢é€‚ç”¨äºYOLOï¼Œä»»ä½•é‡å¤çš„æŠ€æœ¯èƒ½åŠ›éƒ½å¯ä»¥ç”¨è¿™ç§æ–¹å¼å°è£…æˆä½ä»£ç ç»„ä»¶â€”â€”æ ¸å¿ƒæ˜¯ç«™åœ¨ä¸šåŠ¡å¼€å‘çš„è§’åº¦ï¼ŒæŠŠå¤æ‚çš„åº•å±‚é€»è¾‘è—èµ·æ¥ï¼Œåªæš´éœ²ç®€å•ã€é€šç”¨çš„æ¥å£ã€‚å¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½å¸®åˆ°æœ‰ç±»ä¼¼éœ€æ±‚çš„åŒå­¦ï¼Œå°‘èµ°å¼¯è·¯ï¼Œå¿«é€ŸæŠŠæ£€æµ‹èƒ½åŠ›è½åœ°åˆ°ä¸šåŠ¡ä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RxJS å’Œ Interceptor åˆæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601606188618989606</link>    <guid>https://juejin.cn/post/7601606188618989606</guid>    <pubDate>2026-02-02T02:33:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601606188618989606" data-draft-id="7599920572839952393" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RxJS å’Œ Interceptor åˆæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,Node.js"/> <meta itemprop="datePublished" content="2026-02-02T02:33:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä»˜è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/1741228277763278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RxJS å’Œ Interceptor åˆæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1741228277763278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä»˜è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:33:21.000Z" title="Mon Feb 02 2026 02:33:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>RxJS æ˜¯ä¸€ä¸ªç»„ç»‡å¼‚æ­¥é€»è¾‘çš„åº“ï¼Œå¯ç®€åŒ–å¼‚æ­¥é€»è¾‘å’Œå›è°ƒçš„ç¼–å†™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/165f85287f3e4764bbc8c0b93272744b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=8fH1haIaoPXMRUjw%2Br68sVCaHDs%3D" alt="image.png" loading="lazy"/></p>
<p>Nest çš„ interceptor é›†æˆäº† RxJSï¼Œå¯ä»¥ç”¨å®ƒæ¥å¤„ç†å“åº”</p>
<p>æ–°å»ºé¡¹ç›®çœ‹çœ‹</p>
<pre><code class="hljs language-arduino" lang="arduino">nest <span class="hljs-keyword">new</span> interceptor-rxjs -p npm
</code></pre>
<p>æ–°å»º</p>
<pre><code class="hljs language-css" lang="css">nest g interceptor aaa <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>è®°å½•æ¥å£æ—¶é—´</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, tap } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AaaInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {

  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">return</span> next
      .<span class="hljs-title function_">handle</span>()
      .<span class="hljs-title function_">pipe</span>(
        <span class="hljs-title function_">tap</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Using... <span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now() - now}</span>ms`</span>)),
      );
  }
}
</code></pre>
<p>ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47eb9daee5e43a4a41a85875fab7fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=DuIEuc%2Fgoa2LOaNWLIadltBbKXI%3D" alt="image.png" loading="lazy"/></p>
<p>è®¿é—®<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2F" target="_blank" title="http://localhost:3000/" ref="nofollow noopener noreferrer">http://localhost:3000/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c059f61a723f4ad494c92820077cde63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=shALtVxkUAdEMlqu%2FwI6PzBF6nI%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ˜¯ interceptor æœ€åŸºæœ¬ä½¿ç”¨</p>
<p>ä½¿ç”¨ä¸‹ RxJS operator</p>
<h2 data-id="heading-0">map</h2>
<pre><code class="hljs language-css" lang="css">nest g interceptor map-test <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>ä½¿ç”¨ map operator æ¥å¯¹ controller è¿”å›çš„æ•°æ®åšä¸€äº›ä¿®æ”¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> { CallHandler, ExecutionContext, Injectable, NestInterceptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-built_in">map</span>, Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable()</span>
export <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapTestInterceptor</span> implements NestInterceptor {
  intercept(context: ExecutionContext, <span class="hljs-built_in">next</span>: CallHandler): Observable&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span>.handle().pipe(<span class="hljs-built_in">map</span>(data =&gt; {
      <span class="hljs-keyword">return</span> {
        code: <span class="hljs-number">200</span>,
        message: <span class="hljs-string">'success'</span>,
        data
      }
    }))
  }
}

</code></pre>
<p>controller ä¸­ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/613d9aa99c214a289e25fba43363f62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=4VjTfme7xpYPzh3U0IwCFXV6RxE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/278d10ffd61f45d384fe52461c6586b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=r5pLobNTK1C0MaQGEzju5PHh4QQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">tap</h2>
<pre><code class="hljs language-css" lang="css">nest g interceptor tap-test <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>ä½¿ç”¨ tap operator æ¥æ·»åŠ ä¸€äº›æ—¥å¿—ã€ç¼“å­˜ç­‰é€»è¾‘</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span>, tap } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TapTestInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> appService: AppService</span>) {}

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>(<span class="hljs-title class_">TapTestInterceptor</span>.<span class="hljs-property">name</span>);

  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">tap</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      
      <span class="hljs-comment">// è¿™é‡Œæ˜¯æ›´æ–°ç¼“å­˜çš„æ“ä½œï¼Œè¿™é‡Œæ¨¡æ‹Ÿä¸‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">getHello</span>();

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`log log log`</span>, data);
    }))
  }
}
</code></pre>
<p>ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b061c9f84b84678af396a51d3072f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=aMNJCHS%2B3hrwEdVOg4cYN1QSj6w%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a8a5b6bb2084a2a9b4d3241d23a5924~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=90d3KdmvCk2AIHkGqrzmYvinAdw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">catchError</h2>
<p>controller é‡Œå¾ˆå¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè¿™äº›é”™è¯¯ä¼šè¢« exception filter å¤„ç†ï¼Œè¿”å›ä¸åŒçš„å“åº”ï¼Œåœ¨é‚£ä¹‹å‰ï¼Œå¯ä»¥åœ¨ interceptor å…ˆå¤„ç†ä¸‹</p>
<pre><code class="hljs language-css" lang="css">nest g interceptor catch-error-test <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>æ›´æ–°ä¸‹</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">NestInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { catchError, <span class="hljs-title class_">Observable</span>, throwError } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatchErrorTestInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>(<span class="hljs-title class_">CatchErrorTestInterceptor</span>.<span class="hljs-property">name</span>)

  intercept (<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">catchError</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>, err.<span class="hljs-property">stack</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">throwError</span>(<span class="hljs-function">() =&gt;</span> err)
    }))
  }
}
</code></pre>
<p>ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b920880efd9b42bd874923b61a32a18f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=JXZWM8pxGhV5a0e75ob264bsVZw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c40aa6c8db24a578e8271251ae7818f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=40CCVq4%2Bd9QUTKbzoRpOQqK9PfI%3D" alt="image.png" loading="lazy"/></p>
<p>é”™è¯¯æ‰“å°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/752435f0792e4813952e31eecf23c6b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=4zRsy8%2BPPm4wDZKh9i52C%2BCW3Xg%3D" alt="image.png" loading="lazy"/></p>
<p>è¿˜æœ‰ä¸€æ¬¡é”™è¯¯æ‰“å°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83f17bee72144cb9905d825359d14bde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=eeeyIsjSONwCfarriFxO7CENGZ4%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ¬¡æ˜¯åœ¨ interceptor é‡Œæ‰“å°çš„ï¼Œä¸€æ¬¡æ˜¯ exception filter æ‰“å°</p>
<h2 data-id="heading-3">timeout</h2>
<p>æ¥å£å¦‚æœé•¿æ—¶é—´æ²¡è¿”å›ï¼Œè¦ç»™ç”¨æˆ·ä¸€ä¸ªæ¥å£è¶…æ—¶çš„å“åº”ï¼Œå¯ä»¥ç”¨ timeout operator</p>
<pre><code class="hljs language-css" lang="css">nest g interceptor timeout <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>æ›´æ–°</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CallHandler</span>, <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NestInterceptor</span>, <span class="hljs-title class_">RequestTimeoutException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { catchError, <span class="hljs-title class_">Observable</span>, throwError, timeout, <span class="hljs-title class_">TimeoutError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeoutInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">timeout</span>(<span class="hljs-number">3000</span>),
      <span class="hljs-title function_">catchError</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-keyword">if</span>(err <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">TimeoutError</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">throwError</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestTimeoutException</span>());
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">throwError</span>(<span class="hljs-function">() =&gt;</span> err);
      })
    )
  }
}
</code></pre>
<p>ä¼šåœ¨ 3s æ²¡æ”¶åˆ°æ¶ˆæ¯çš„æ—¶å€™æŠ›ä¸€ä¸ª TimeoutErrorã€‚</p>
<p>ç„¶åç”¨ catchError å¤„ç†ï¼Œå¦‚æœæ˜¯ TimeoutErrorï¼Œå°±è¿”å› RequestTimeoutExceptionï¼Œè¿™ä¸ªæœ‰å†…ç½®çš„ exception filter ä¼šå¤„ç†æˆå¯¹åº”çš„å“åº”æ ¼å¼ã€‚</p>
<p>å…¶ä½™é”™è¯¯å°±ç›´æ¥ throw Error æŠ›å‡ºå»</p>
<p>ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2089355f7e71430c9b5247562c3c1489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=wI4gWPTzXcx62plhOo7TI0Kei4M%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2a1ed624ca245d7923d392def6631cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=fJaKL%2Faki%2B5izopyCm5L13dFmNs%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤å¤„å¤„ç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d7c884cec544a6b52ae2ad2c9ea55a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=5KfFxUaCibyMZBSZOgjLLaUAOwQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥æ¢ä¸€ä¸ªè¯•è¯•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a6ca40239b64df29e4bac4f3b199693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=zbi2Ehr9CsqwOSGdmzBen283xtU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/955b330dbf974d669523778052cae0ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=MqiF%2FJiA%2BaUM30ejWL94vt8WQuc%3D" alt="image.png" loading="lazy"/></p>
<p>å†è¯•è¯• å…¨å±€çš„ interceptor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6b2ba3a6d0445419c2c3cc4c05ece85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=bjU7PwuBy%2FXYEfILWxoJ95wyGOc%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç§æ˜¯æ‰‹åŠ¨ new çš„ï¼Œæ²¡æ³•æ³¨å…¥ä¾èµ–</p>
<p>ä½†å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬æ˜¯éœ€è¦å…¨å±€ interceptor çš„ï¼Œè€Œä¸”è¿˜ç”¨åˆ°ä¸€äº› providerï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>nest æä¾›äº†ä¸€ä¸ª tokenï¼Œç”¨è¿™ä¸ª token åœ¨ AppModule é‡Œå£°æ˜çš„ interceptorï¼ŒNest ä¼šæŠŠå®ƒä½œä¸ºå…¨å±€ interceptor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88d0ef77178f4e60925e92bb56394905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=tu1EIKj6ji6w%2B0ne6h0yuZtoisE%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ª interceptor é‡Œæ³¨å…¥äº† appService</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/823276dfb2044c84b8f343fb89849b5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=diWv83mDC4M%2FtYw61lf2tnJ0%2FoM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/026318c7c35e4fea95ee5b6cbcfa6d85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=NZDPIFqUaPf81nDCTDin1ukHZUY%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°å…¨å±€ interceptor ç”Ÿæ•ˆäº†ï¼Œè€Œä¸”è¿™ä¸ª hello world å°±æ˜¯æ³¨å…¥çš„ appService è¿”å›çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65e52d3e251c4d8e8f2b9a24c83230f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604400&amp;x-signature=%2Burwi3ziTs4GalFMYHihrcxWXiE%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Openclawï¼ˆClawbotï¼‰+Kimi K 2.5 éƒ¨ç½²+é£ä¹¦ä½¿ç”¨æ‰‹æŠŠæ‰‹æ•™ç¨‹ï¼šè®©AIæ¥ç®¡æ‰€æœ‰ï¼Œ24å°æ—¶ä¸åœæœº]]></title>    <link>https://juejin.cn/post/7601355703240917032</link>    <guid>https://juejin.cn/post/7601355703240917032</guid>    <pubDate>2026-02-02T01:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601355703240917032" data-draft-id="7601355703240884264" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Openclawï¼ˆClawbotï¼‰+Kimi K 2.5 éƒ¨ç½²+é£ä¹¦ä½¿ç”¨æ‰‹æŠŠæ‰‹æ•™ç¨‹ï¼šè®©AIæ¥ç®¡æ‰€æœ‰ï¼Œ24å°æ—¶ä¸åœæœº"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-02T01:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­ªæ–¯Wise"/> <meta itemprop="url" content="https://juejin.cn/user/3156074412913466"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Openclawï¼ˆClawbotï¼‰+Kimi K 2.5 éƒ¨ç½²+é£ä¹¦ä½¿ç”¨æ‰‹æŠŠæ‰‹æ•™ç¨‹ï¼šè®©AIæ¥ç®¡æ‰€æœ‰ï¼Œ24å°æ—¶ä¸åœæœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3156074412913466/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­ªæ–¯Wise
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:57:02.000Z" title="Mon Feb 02 2026 01:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æœ‰å¾ˆå¤šæœ‹å‹é—®æˆ‘ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„Tokenæ¶ˆè€—é‡é‚£ä¹ˆå¤§ï¼Œå…¶å®ç­”æ¡ˆåªæœ‰ä¸€ä¸ªï¼Œæˆ‘æŠŠç¼–ç¨‹CLIä»£æ›¿äº†æ‰€æœ‰çš„äº‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab74181c5b32441cac5646cf1e5fcf14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=L0VH%2B6S9rJccYWA%2FsBirghFsd30%3D" alt="" loading="lazy"/></p>
<p><strong>æ— è®ºæ˜¯è°ƒç ”ã€è§„åˆ’ã€ç¼–ç¨‹ã€æ•°æ®åˆ†æã€ç”Ÿå›¾æˆ–è€…åˆ›ä½œï¼Œå®ƒä¸æ˜¯æˆ‘ä»¬æƒ³è±¡ä¸­çš„åªæ˜¯ä¸€ä¸ªç¼–ç¨‹å·¥å…·ã€‚</strong></p>
<p>ä»Šå¤©æˆ‘ä»¬å°±ç”¨Clawbotè¿™ä¸ªæœ€è¿‘å¾ˆç«çš„é¡¹ç›®ï¼Œç”¨æ–°å‡ºçš„Kimi codeå’ŒClaude codeï¼ˆglmï¼‰æ¥å®ŒæˆClawbotä»è°ƒç ”åˆ°éƒ¨ç½²ï¼Œåˆ°åº”ç”¨çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>ä»¥ä¸‹çš„å†…å®¹ï¼Œæˆ‘ä¼šé€šè¿‡Code CLIè°ƒç ”ï¼Œè°ƒç”¨è„šæœ¬ç”Ÿå›¾ã€‚</p>
<h2 data-id="heading-0">Part 1ï¼š ClawtBot æ˜¯ä»€ä¹ˆ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d6e5e27c4ec40ca8f16d954e42f42e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=Op5qR153ODDO6VqPWzD65nRnhBk%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šKimi Code</p>
<p>ç®€è€Œè¨€ä¹‹ï¼š<strong>Moltbotæ˜¯ä¸€ä¸ªèƒ½åœ¨æœåŠ¡å™¨ä¸Šè·‘çš„ AIï¼Œèƒ½çœŸæ­£å¹²æ´»çš„ Agentï¼Œä¸æ˜¯åªä¼šèŠå¤©çš„åºŸç‰©ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93a3d4b0e462404890b8611c93591acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=JeqRJGLebmpr0xr77FAqTLdSPoM%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šKimi Code + Claude Code (GLM)</p>
<p>å®ƒèƒ½å¤Ÿ<strong>æ“æ§ä½ çš„ç”µè„‘å»ç”Ÿæˆä»£ç ï¼Œå¸®ä½ æ•´ç†æ–‡ä»¶ï¼Œæˆ–è€…å»åšæˆ‘å‰é¢è¯´çš„ç”Ÿå›¾ã€åˆ›ä½œç­‰ä¸€ç³»åˆ—çš„äº‹æƒ…ã€‚</strong></p>
<p>è€Œå®ƒçš„å…¥å£å¯ä»¥æ˜¯WhatsAppæˆ–è€…Telgramï¼Œä½†ç›´æ¥æ“ä½œç”µè„‘è¿˜æ˜¯ç‰¹åˆ«çš„ä¸å®‰å…¨ï¼Œæ‰€ä»¥å‰é˜µå­å¾ˆå¤šæœ‹å‹ä¼šä¹°mac miniï¼Œç”¨è¿™å°ç”µè„‘è¿è¡ŒClawbotï¼Œé¿å…æ“ä½œè‡ªå·±çš„ä¸ªäººç”µè„‘ã€‚</p>
<p>è€Œè…¾è®¯äº‘ã€é˜¿é‡Œäº‘æ¥å…¥ä¹‹åï¼Œåˆ™æ˜¯é€šè¿‡è½»é‡çš„äº‘ç«¯æœåŠ¡å™¨ï¼Œæ¥é€šè¿‡é’‰é’‰ã€ä¼å¾®ä½œä¸ºå…¥å£è¿›è¡Œæ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cba978b2ad7449683e7a123e286f70b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=6Z5V22rOz5o7xLhccjwSTlBUzk0%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šKimi Code</p>
<p>å’Œç¼–ç¨‹åŠ©æ‰‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘è§‰å¾—<strong>æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ä¸å†éœ€è¦æ‰“å¼€ç¼–ç¨‹å·¥å…·ï¼Œæ¥å»å®Œæˆä»»åŠ¡äº†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/039b9303bdf847b2838165935751044f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=%2BxQGozJf02mA7MwDtvZewK7uJvM%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šKimi Code</p>
<p>äº‘å‚å•†éƒ¨ç½²çš„æ–¹å¼å‡ ä¹æ˜¯æ¥è¿‘çš„ï¼Œä»AIè°ƒç ”çš„ç»“æœçœ‹ï¼Œæ–°ç”¨æˆ·éƒ½ä¼šæœ‰ä½ä»·æŠ˜æ‰£å¥—é¤ï¼Œå¤§æ¦‚æ˜¯68å…ƒ/å¹´ï¼Œè€ç”¨æˆ·çš„æœˆä»˜å¤§æ¦‚40å…ƒ/æœˆï¼Œå»é€‰å¹´å¡å¥—é¤ã€‚</p>
<p>ä¸åˆšéœ€çš„å°±åˆ«ä¹°äº†ï¼ŒæŒ‰ç…§AIçš„è¿›åŒ–é€Ÿåº¦ï¼Œå¾ˆå¿«å°±æœ‰å¤§å‚å‡ºä¸ªç±»ä¼¼çš„Caseæ¥æ¥ç®¡ä½ çš„ç”µè„‘äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e66fd97d72d54383bc8849b3f9245466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=PlzEmNJxCFsKCDJoh9EBuYzgWZ4%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šClaude Codeï¼ˆGLMï¼‰</p>
<p>iMessage åªèƒ½åœ¨ Mac ä¸Šç”¨ï¼Œä½†æœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯Linuxï¼Œæ‰€ä»¥æˆ‘ä»¬åˆè¦æ¢ç§æ–¹å¼äº¤äº’ï¼Œç›®å‰ä¼ä¸šç”¨æˆ·åŸºæœ¬éƒ½å¯ä»¥ç”¨ä¼å¾®ã€é’‰é’‰ï¼Œéä¼ä¸šç”¨æˆ·å¯èƒ½å»ºè®®æ˜¯ç”¨é£ä¹¦çš„æœºå™¨äººæˆ–è€…åœ¨æµè§ˆå™¨è®¿é—®ã€‚</p>
<p>æœ‰å¼€å‘è€…åšäº†é£ä¹¦æ¡¥æ¥å™¨ï¼Œæ— éœ€æœåŠ¡å™¨ã€æ— éœ€åŸŸåéƒ½èƒ½å¤Ÿä½¿ç”¨ï¼Œé‚£çœ‹èµ·æ¥è¿™ç§æ–¹å¼æ˜¯æœ€å‹å¥½çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d35a712d7ad84799977b96c269de7094~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=Q6m4%2F7owf5ePJINR4zXJXf5NDsE%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡ä¿¡æºï¼šKimi Code</p>
<p>æ¯”è¾ƒç®€å•å’Œçœå¿ƒï¼ŒåŸåˆ™ä¸Šä½¿ç”¨äº‘å‚å•†+å¯¹åº”ä¼ä¸šIMå°±å¥½äº†ï¼Œä¸æƒ³ä¹°æœåŠ¡å™¨å¯ä»¥ç”¨é£ä¹¦ï¼Œå¦‚æœæƒ³è¦7*24å°æ—¶åœ¨çº¿ï¼Œè‡ªå·±ç”µè„‘å…³æœºä¹Ÿæƒ³è¿è¡Œé‚£è¿˜æ˜¯å¾—ä¸ŠæœåŠ¡å™¨äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdee361aed77430abbcedd1c65bfec16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=qHTSCXpscMsSSOrb2OntY8z8SqY%3D" alt="" loading="lazy"/></p>
<p>OKï¼Œå‰é¢éƒ½æ˜¯ä¸¤ä½AIè€å¸ˆç»™æˆ‘çš„è°ƒç ”ï¼Œæœ‰å…´è¶£çœ‹å…¨æ–‡çš„æœ‹å‹ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmy.feishu.cn%2Fwiki%2FEDHYwIZS2iF33IkRCmrc4It9nac" target="_blank" title="https://my.feishu.cn/wiki/EDHYwIZS2iF33IkRCmrc4It9nac" ref="nofollow noopener noreferrer">Kimi Code &amp; Claude Code ï¼ˆGLMï¼‰æ“ä½œå®å½•</a></p>
<p>ç°åœ¨æˆ‘ä»¬æ¥éƒ¨ç½²çœ‹çœ‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šé€‰æ‹©Kimi Codeæ¥å¸®æˆ‘å¤„ç†è¿™ä»¶äº‹æƒ…ã€‚</p>
<h2 data-id="heading-1">Clawbotè½»é‡åº”ç”¨+é£ä¹¦å®æ“</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f850db08e170417094ab76f68d819db6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=0Pgx5%2BhlAXBEjCtQhSvjV%2F%2FYaVY%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¹°æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¿™é‡ŒClawbotå‡ºç°äº†2ä¸ªï¼Œå…¶å®æˆ‘ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ‘ç»§ç»­å»é—®Kimiï¼Œå®ƒæ˜¯å…·å¤‡åŠè§†è§‰ç†è§£èƒ½åŠ›çš„ï¼Œæˆ‘å¾ˆå¥½å¥‡å®ƒæ˜¯å¦èƒ½å¦è¯†åˆ«æˆ‘çš„çº¢æ¡†ä½ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2607874293df405085e64d5c4bd90beb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=%2B4%2F2LKdxhAe0NNA%2BUM1xJWKngkc%3D" alt="" loading="lazy"/></p>
<p>æˆ‘æŠŠå›¾ç‰‡å­˜åˆ°äº†æœ¬åœ°ï¼Œè®©å®ƒå»è®¿é—®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf001ba1844b4a58848cdedd2903c4d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=1tJCEdhkURo%2BBbGaPSeZPIV7fqI%3D" alt="" loading="lazy"/></p>
<p>å¾ˆå¿«å®ƒå°±ç»™å‡ºäº†æˆ‘çš„ç­”æ¡ˆï¼Œå®ƒèƒ½å‡†ç¡®çš„è¯†åˆ«åˆ°æˆ‘çš„çº¢æ¡†ä½ç½®ï¼Œé‚£æˆ‘å°±å¼€å†²äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbc8523cf19842d185d9fa2470f4fa51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=Erws18xj0GV%2Feypc9Wks%2BLLaRiQ%3D" alt="" loading="lazy"/></p>
<p>ä¹°å®ŒåŒæ ·çš„æ–¹å¼ï¼Œé—®é—®Kimiï¼Œæ¥ä¸‹æ¥è¦åšä»€ä¹ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b6a4d019f7a48ba99e71f60c9708d6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=PPeo19zntkYzRzI4bGB8eUgAiGg%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šéµå¾ªå®ƒçš„å®‰æ’ï¼Œå®Œæˆä¸Šé¢çš„æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71aa691fb9b340ba8f432ea91742057a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=kFHi9JAWXt1mlWERmyBGtKUxMqs%3D" alt="" loading="lazy"/></p>
<p>ä¸€é¡¿æ“ä½œä¹‹åï¼Œæ‰“å¼€äº†è¿™ä¸ªé¡µé¢ï¼Œé€‰ä¸ªæ˜¯ï¼Œç»§ç»­å¾€ä¸‹æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3afebfcfd458474298badefdcfa281cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=DMlSIOH1c%2BUbOmkd%2FtAj1SsyAdM%3D" alt="" loading="lazy"/></p>
<p>åˆ°äº†è¿™é‡Œæˆ‘å¿½ç„¶å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„APIéƒ½æ˜¯ç¼–ç¨‹å¥—é¤çš„ï¼Œæˆ‘ä¸ç¡®å®šèƒ½ä¸èƒ½ä½¿ç”¨ï¼Œäºæ˜¯ç›´æ¥è®©AIå¸®æˆ‘å»æŸ¥è¯¢ä¸€ä¸‹ã€‚</p>
<p>å®é™…å®éªŒåç¡®å®glmå’Œç«å±±å¯ä»¥ï¼Œkimi codingè¿˜ä¸è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8334e79f9ed54db29f31240d5fa5d834~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=peibmU7ydQFv26J6McuNdPNiOpQ%3D" alt="" loading="lazy"/></p>
<p>åˆ°äº†è¿™é‡Œæˆ‘å°±å¼€å§‹å»è¦å»åˆ›å»ºé£ä¹¦çš„æœºå™¨äººäº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">é£ä¹¦å¼€æ”¾å¹³å°https:<span class="hljs-comment">//open.feishu.cn/</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3521ace76d1b4236afa6395ef196c66b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=zosyCnQI3ow%2BOE390swFggl22l8%3D" alt="" loading="lazy"/></p>
<p>å¹¶ä¸”å¼€é€šäº†æ¶ˆæ¯ã€å¤šç»´è¡¨æ ¼ç­‰ä¹±ä¸ƒå…«ç³Ÿçš„æƒé™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d8ca4c864684b33bc51b7ff321175da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=lYOh0AuG7mAkKhXYnQ10I5Al0OY%3D" alt="" loading="lazy"/></p>
<p>ç„¶ååœ¨è¿™é‡Œå‘å¸ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9376419c20b0479c8ff53fbfd6d109b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=Q6nY%2FUO7mD%2BehM14%2B4CT0gSkPGA%3D" alt="" loading="lazy"/></p>
<p>è¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥é—®é£ä¹¦çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œæˆ‘é‡åˆ°è¿‡æ— æ³•å’Œæœºå™¨äººå¯¹è¯ï¼Œå‘ç°æ˜¯æˆ‘æƒé™å’Œäº‹ä»¶æ²¡å¼„ï¼Œé—®äº†æ™ºèƒ½åŠ©æ‰‹ä¹‹åå°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">https://open.feishu.cn/app/ai/playground?<span class="hljs-attr">from</span>=nav
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb13fe6eda714a87a0f57ddc80b9b500~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=K9GAH%2BL9fHgAUvFuTLYyB79oHTM%3D" alt="" loading="lazy"/></p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œåœ¨kimiè€å¸ˆçš„å¸®åŠ©ä¸‹ï¼Œæˆ‘æˆåŠŸéƒ¨ç½²äº†Clawbotã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e48e086124a42edb3be1f626b9b748d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=2yUdgGI1dyHfaXdJAr76RiwLLVw%3D" alt="" loading="lazy"/></p>
<p>ä½†ç´§æ¥ç€æˆ‘å‘ç°æœ‰å¾ˆå¤šçš„äº‹æƒ…è¦åšï¼Œè¦æŠŠæˆ‘çš„Skillsè¿ç§»è¿‡å»ï¼Œå¯æ˜¯æˆ‘å®åœ¨ä¸æƒ³å»ç¼–ç¨‹äº†ï¼Œæˆ‘å†³å®šæŠŠæˆ‘çš„æœåŠ¡å™¨ä¹Ÿäº¤ç»™å®ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19df1875d6e840e68a92df133577d882~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=5O5kvfy0Y3gUVAu5nXM956N%2FTuY%3D" alt="" loading="lazy"/></p>
<p>ä½†kimi codeå¾ˆæœ‰åŸåˆ™ï¼Œæ²Ÿé€šäº†å¥½å‡ éï¼Œéƒ½ä¸è‚¯ç™»å½•æˆ‘çš„æœåŠ¡å™¨ã€‚</p>
<p>äºæ˜¯åªèƒ½è½¬å¤´è®©claude codeæ¥å¤„ç†ï¼Œç»è¿‡ä¸€è½®Battleæˆ‘ç»ˆäºè®©å®ƒè¿ä¸Šäº†ï¼Œåé¢çš„æ“ä½œå’Œå¯¹è¯æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/197ca9391bb24cbd975c02233d83984e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=RERZe8vU23M%2FTQJvH1byFOb39b0%3D" alt="" loading="lazy"/></p>
<p>ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œ<strong>ç°åœ¨å°±æ˜¯ç”¨AIå¼€å‘AIï¼Œè®©Kimiç»™Openclawæ·»åŠ èƒ½åŠ›ã€‚</strong></p>
<h2 data-id="heading-2">èƒ½åŠ›æµ‹è¯•1ï¼šç”Ÿå›¾&amp;å‘é€å›¾ç‰‡æ¶ˆæ¯</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84c8cf4128f24ccfac7458ddee2f2b7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=i5QOnIJBoRlqt4nQmHZ4nUTPMJY%3D" alt="" loading="lazy"/></p>
<p>æäº†è¿˜æ˜¯è›®ä¹…äº†ï¼Œç»ˆäºæŠŠæœºå™¨äººåˆ›å»ºå›¾ç‰‡å’Œå‘é€å›¾ç‰‡æ¶ˆæ¯çš„èƒ½åŠ›å¼„å¥½ï¼Œä»¥å‰ä¸éœ€è¦å‘å›¾ç‰‡æ¶ˆæ¯æ˜¯å› ä¸ºéƒ½åœ¨ç”µè„‘ä¸Šå¯ä»¥çœ‹ï¼Œç°åœ¨éœ€è¦ç›´æ¥å‘æ¶ˆæ¯å‡ºæ¥äº†ã€‚</p>
<p>ä¼°è®¡æ˜¯è¿™ä¸ªé£ä¹¦çš„åœºæ™¯æ²¡è®­ç»ƒè¿‡ï¼ŒKimiå¼€å‘çš„æ—¶é—´è¿˜æ˜¯æ¯”è¾ƒé•¿ã€‚</p>
<h2 data-id="heading-3">èƒ½åŠ›æµ‹è¯•2ï¼šä»£ç ç§æœ‰ä»“åº“è¿æ¥</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6f671490be646ff948a3aa6325181b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=gRRpX%2FHakhqjT3%2BSQ2GnxGj9Zmg%3D" alt="" loading="lazy"/></p>
<p>æœ€å¼€å§‹æ˜¯404ï¼Œé…ç½®å¥½ä»¤ç‰Œåå°±å¯ä»¥è®¿é—®äº†ï¼ŒåŸåˆ™ä¸Šå¯ä»¥æ‰“ä»£ç äº†ï¼Œå¹¶ä¸”é€šè¿‡gitæ¥åä½œï¼Œåœ¨ç”µè„‘å‰å°±ç”¨ç”µè„‘æ‰“ï¼Œä¸åœ¨å°±ç”¨æ‰‹æœºæ‰“ã€‚</p>
<p>é€šè¿‡Gitå®æ—¶æ›´æ–°ï¼Œä¸è¿‡æˆ‘è¿˜æ²¡æœ‰æµ‹è¯•Openclawdè°ƒç”¨ç¼–ç¨‹å·¥å…·çš„åœºæ™¯ï¼Œåœ¨ä¸å®‰è£…çš„æ—¶å€™ï¼Œé‚£åˆå˜æˆäº†æ¯”æ‹¼æ¨¡å‹èƒ½åŠ›äº†ã€‚</p>
<h2 data-id="heading-4">èƒ½åŠ›æµ‹è¯•3ï¼šè”ç½‘æœç´¢</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcdc0f2eeac747428cab4d57a786dfb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=1cbNpWM%2FMCpwP5Dfx4zKNK1Yuvg%3D" alt="" loading="lazy"/></p>
<p>ä¸€å¼€å§‹è”ç½‘æœç´¢èƒ½åŠ›æ˜¯æ²¡æœ‰çš„ï¼Œè¦ç»‘Brave çš„ Keyï¼Œä½†æˆ‘æ‡’å¾—ç»‘ä¿¡ç”¨å¡äº†ï¼Œæ‰€ä»¥ç›´æ¥æ¢æˆäº†åˆ«çš„ï¼Œç›®å‰èƒ½ç”¨çš„2ä¸ªå…è´¹çš„ä¸ç”¨ç»‘å¡çš„æœç´¢MCPå¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmcp.exa.ai%2Fmcp" target="_blank" title="https://mcp.exa.ai/mcp" ref="nofollow noopener noreferrer">mcp.exa.ai/mcp</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fapp.tavily.com%2Fhome" target="_blank" title="https://app.tavily.com/home" ref="nofollow noopener noreferrer">app.tavily.com/home</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b6908a06ee04755999f9de5f25e4af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=I9PDzw%2F%2BRaA8EGQNWaNYPFIIDZU%3D" alt="" loading="lazy"/></p>
<p>æ›´æ¢ä¹‹åä¹Ÿèƒ½æœç´¢å‡ºæ¥å•¦ï¼Œå‰ä¸¤å¤©é˜¿é‡Œæ‰å‘å¸ƒçš„QoderWorkï¼Œå®ƒä¹Ÿèƒ½æœç´¢å¾—åˆ°ã€‚</p>
<h2 data-id="heading-5">èƒ½åŠ›æµ‹è¯•4ï¼šä½¿ç”¨Claude Codeçš„Skills</h2>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæŠ˜è…¾ï¼Œæ˜æ˜openclawdæœ‰è‡ªå·±çš„skillsï¼Œä¸»è¦è¿˜æ˜¯ï¼Œä¸æƒ³ç»´æŠ¤ä¸¤å¥—ï¼Œæˆ‘å¯ä»¥ç”¨gitæ¯æ¬¡ä¿éšœæˆ‘çš„skillsæ˜¯æœ€æ–°çš„ã€‚</p>
<p>è¿™é‡Œæœ‰2ç§ç©æ³•ï¼š</p>
<h3 data-id="heading-6"><strong>ç©æ³•1ï¼Œè®©Openclawæ¨¡æ‹Ÿä½ çš„Skillså·¥ä½œ</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf9bde4e00cf4a1e8a8c3750edc4e963~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=NWNYDYso9FLhP160xVmQskg4jYA%3D" alt="" loading="lazy"/></p>
<p>å‘Šè¯‰å®ƒä½ å¯ä»¥æ¨¡æ‹Ÿæˆ‘çš„skillsæ“ä½œï¼Œç„¶ååé¢å°±å’Œåœ¨Claude Code ä¸€è‡´äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3f37644b40840319d35f2d48352e949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=N8QXkwwa1DJY93xzGRPfr70gY0Y%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯å®ƒå¸®æˆ‘åˆ›å»ºçš„ç»“æœ</p>
<h3 data-id="heading-7"><strong>ç©æ³•2ï¼Œè°ƒç”¨Claude Code ä½¿ç”¨Skills</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32b91ba714534932a132d4c1e42f6955~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=W9lmkUxteqE5p7k4GtchwPW%2Bm8M%3D" alt="" loading="lazy"/></p>
<p>è¦å…ˆå®‰è£…claudeï¼Œæˆ‘è¿˜æ˜¯æŠŠè‡ªå·±çš„æœåŠ¡å™¨äº¤ç»™AIæ¥ç®¡ï¼Œè¿™ä¸ªç¯èŠ‚æˆ‘äº¤ç»™äº†codexã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c05059443048f4b42a07cc7b8659e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=jkb%2FsWPDLFYhqTwLHYOoU17Apgk%3D" alt="" loading="lazy"/></p>
<p>å¹¶ä¸”ä¹Ÿç›´æ¥è®©clawdä¸‹è½½äº†æˆ‘çš„Skillsã€‚</p>
<p>è€Œä¸”æˆ‘ä¼šæ›´å€¾å‘äº<strong>æŠŠOpenclawdå½“åšåˆ†å‘å…¥å£ï¼Œç„¶åé€‰æ‹©ç›¸ä¿¡Claude çš„ Agentï¼Œæ¯•ç«Ÿä¸€å¤©è¿­ä»£Nä¸ªç‰ˆæœ¬çš„Codingå·¥å…·ï¼Œä¸šç•Œä¸å¤šäº†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f13f0551c9c4c18b72d804d26282a02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=soexi66JlkHLjYE4WHvu52JZ%2Fo8%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œæç¤ºè¯å‡ºæ¥å•¦ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15352eb06c984fedadced4e03d2f10cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=EqU8KsIKWGZHHYZdMGU6BCh8Klc%3D" alt="" loading="lazy"/></p>
<p>ä»å›å¤å’ŒæœåŠ¡å™¨æ—¥å¿—çœ‹ï¼Œç¡®å®å®Œæˆäº†claudeçš„è°ƒç”¨ã€‚</p>
<h2 data-id="heading-8"><strong>èƒ½åŠ›æµ‹è¯•5ï¼šä½¿ç”¨Skillsåšå®šæ—¶ä»»åŠ¡</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/226929bf1b3840278eaeb8035ed8c181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602222&amp;x-signature=8TJv%2BIDm0ROxuhb5IouQcAwbSAg%3D" alt="" loading="lazy"/></p>
<p>åšæ³•ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å’Œclawdbotäº¤äº’å°±å¯ä»¥äº†ï¼ŒåŸåˆ™ä¸Šï¼Œæ˜å¤©å¼€å§‹ç¾¤é‡Œå°±ä¼šæœ‰æ—¥æŠ¥äº†ã€‚</p>
<p><strong>ç”Ÿå›¾ã€è”ç½‘ã€è¿æ¥ä»£ç ä»“åº“ã€è°ƒç”¨ç¼–ç¨‹å·¥å…·</strong>éƒ½æå®Œäº†ã€‚</p>
<p>é‚£åé¢çš„å·¥ä½œå°±æ˜¯å åŠ å¾ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„é£ä¹¦é€‚é…èƒ½åŠ›äº†ï¼Œä¾‹å¦‚äº‘æ–‡æ¡£ã€å¤šç»´è¡¨æ ¼ç­‰ç­‰</p>
<p>å†™åˆ°æœ€åå¿½ç„¶å‘ç°ï¼Œä¹Ÿè®¸æˆ‘ä»¬ç¦»AGIçš„è·ç¦»æ˜¯åˆ°åº•æŠŠæƒé™äº¤å‡ºå»å¤šå°‘ã€‚</p>
<p>ClawdBotç®—æ˜¯è”é€šè½¯ä»¶çš„AIäº§å“ï¼ŒQwenä¹‹å‰ç®—æ˜¯è”é€šäº†æˆ‘ä»¬ç”Ÿæ´»çš„AIäº§å“ï¼Œä»¥åä¼šæœ‰è”é€šç¡¬ä»¶çš„ï¼Œä»¥åä¼šå…¨éƒ¨éƒ½è”é€šçš„ã€‚</p>
<p>æƒ³æƒ³çœŸæ˜¯å¯æ€•ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#ç¼–ç¨‹å®æˆ˜ï¼šå¦‚ä½•ä¸ºWordæ–‡æ¡£æ·»åŠ èƒŒæ™¯è‰²æˆ–èƒŒæ™¯å›¾ç‰‡]]></title>    <link>https://juejin.cn/post/7601435429409800226</link>    <guid>https://juejin.cn/post/7601435429409800226</guid>    <pubDate>2026-02-02T02:34:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601435429409800226" data-draft-id="7601374137412714531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#ç¼–ç¨‹å®æˆ˜ï¼šå¦‚ä½•ä¸ºWordæ–‡æ¡£æ·»åŠ èƒŒæ™¯è‰²æˆ–èƒŒæ™¯å›¾ç‰‡"/> <meta itemprop="keywords" content="åç«¯,C#,.NET"/> <meta itemprop="datePublished" content="2026-02-02T02:34:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼ºç‚¹å†…å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3414438228006112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#ç¼–ç¨‹å®æˆ˜ï¼šå¦‚ä½•ä¸ºWordæ–‡æ¡£æ·»åŠ èƒŒæ™¯è‰²æˆ–èƒŒæ™¯å›¾ç‰‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414438228006112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼ºç‚¹å†…å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:34:35.000Z" title="Mon Feb 02 2026 02:34:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C#ç¼–ç¨‹å®æˆ˜ï¼šå¦‚ä½•ä¸ºWordæ–‡æ¡£æ·»åŠ èƒŒæ™¯è‰²æˆ–èƒŒæ™¯å›¾ç‰‡</h2>
<p>åœ¨æ—¥å¸¸çš„å·¥ä½œå’Œå­¦ä¹ ä¸­ï¼ŒWordæ–‡æ¡£æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„å·¥å…·ä¹‹ä¸€ã€‚ç„¶è€Œï¼ŒWordæ–‡æ¡£é»˜è®¤çš„ç™½è‰²èƒŒæ™¯ï¼Œåœ¨å¾ˆå¤šç‰¹å®šåœºæ™¯ä¸‹æ˜¾å¾—è¿‡äºå•è°ƒã€‚æ— è®ºæ˜¯åˆ¶ä½œä¸€ä»½ä¸“ä¸šçš„å…¬å¸æŠ¥å‘Šã€ä¸€ä»½ä¸ªæ€§åŒ–çš„é‚€è¯·å‡½ï¼Œè¿˜æ˜¯ä¸€ä»½ç‹¬ç‰¹çš„å“ç‰Œå®£ä¼ æ–‡æ¡£ï¼Œæˆ‘ä»¬éƒ½å¯èƒ½å¸Œæœ›ä¸ºæ–‡æ¡£æ³¨å…¥æ›´å¤šè§†è§‰å…ƒç´ ï¼Œä½¿å…¶æ›´å…·å¸å¼•åŠ›å’Œä¸“ä¸šæ€§ã€‚è¿™ç§å¯¹æ–‡æ¡£èƒŒæ™¯è¿›è¡Œâ€œè§†è§‰å®šåˆ¶â€ï¼ˆVisual Customizationï¼‰çš„éœ€æ±‚ï¼Œåœ¨æå‡æ–‡æ¡£ç¾è§‚åº¦å’Œä¼ è¾¾ç‰¹å®šæ°›å›´æ–¹é¢æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚</p>
<p>é‚£ä¹ˆï¼Œä½œä¸ºC#å¼€å‘è€…ï¼Œæˆ‘ä»¬èƒ½å¦é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ï¼Œè‡ªåŠ¨åŒ–åœ°ä¸ºWordæ–‡æ¡£æ·»åŠ èƒŒæ™¯é¢œè‰²æˆ–èƒŒæ™¯å›¾ç‰‡ï¼Œæ‘†è„±æ‰‹åŠ¨è®¾ç½®çš„ç¹çï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨å¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“â€”â€”<strong>Spire.Doc for .NET</strong>ï¼Œé€šè¿‡C#ä»£ç è½»æ¾å®ç°Wordæ–‡æ¡£çš„èƒŒæ™¯å®šåˆ¶åŒ–ï¼ŒåŒ…æ‹¬å¡«å……çº¯è‰²èƒŒæ™¯å’Œè®¾ç½®å›¾ç‰‡èƒŒæ™¯ã€‚æˆ‘ä»¬å°†æä¾›æ¸…æ™°å®ç”¨çš„ä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©è¯»è€…å¿«é€ŸæŒæ¡è¿™ä¸€æŠ€èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-1">Spire.Doc for .NETç®€ä»‹åŠå…¶ä¼˜åŠ¿</h3>
<h4 data-id="heading-2">Spire.Doc for .NETæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>Spire.Doc for .NETæ˜¯ä¸€æ¬¾ä¸“ä¸šçš„.NET Wordç»„ä»¶åº“ï¼Œä¸“ä¸ºC#ã€VB.NETç­‰.NETè¯­è¨€è®¾è®¡ã€‚å®ƒå…è®¸å¼€å‘è€…åœ¨ä¸ä¾èµ–Microsoft Officeçš„æƒ…å†µä¸‹ï¼Œå¯¹Wordæ–‡æ¡£è¿›è¡Œåˆ›å»ºã€åŠ è½½ã€ç¼–è¾‘ã€è½¬æ¢ä»¥åŠå„ç§æ“ä½œã€‚å…¶åŠŸèƒ½æ¶µç›–äº†Wordæ–‡æ¡£çš„æ–¹æ–¹é¢é¢ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ®µè½ã€è¡¨æ ¼ã€å›¾ç‰‡ã€è¶…é“¾æ¥ã€é¡µçœ‰é¡µè„šã€æ°´å°ã€ä¹¦ç­¾ç­‰ã€‚</p>
<h4 data-id="heading-3">ä¸ºä½•é€‰æ‹©Spire.Docï¼Ÿ</h4>
<p>é€‰æ‹©Spire.Doc for .NETè¿›è¡ŒWordæ–‡æ¡£å¤„ç†ï¼Œå°¤å…¶æ˜¯èƒŒæ™¯å®šåˆ¶ï¼Œä¸»è¦åŸºäºä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šæä¾›ä¸°å¯Œçš„APIï¼Œå‡ ä¹å¯ä»¥æ“ä½œWordæ–‡æ¡£çš„æ‰€æœ‰å…ƒç´ ã€‚</li>
<li><strong>ç‹¬ç«‹æ€§å¼º</strong>ï¼šæ— éœ€å®‰è£…Wordè½¯ä»¶ï¼Œå³å¯åœ¨æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ç¯å¢ƒä¸­è¿è¡Œã€‚</li>
<li><strong>æ€§èƒ½ä¼˜è¶Š</strong>ï¼šå¤„ç†å¤§å‹æ–‡æ¡£æ—¶è¡¨ç°ç¨³å®šï¼Œæ•ˆç‡é«˜ã€‚</li>
<li><strong>æ˜“ç”¨æ€§</strong>ï¼šAPIè®¾è®¡ç›´è§‚ï¼Œä¸Šæ‰‹å¿«ï¼Œæ–‡æ¡£å’Œç¤ºä¾‹ä¸°å¯Œã€‚</li>
<li><strong>èƒŒæ™¯å®šåˆ¶ä¾¿æ·</strong>ï¼šæä¾›äº†ç›´æ¥çš„å±æ€§å’Œæ–¹æ³•æ¥è®¾ç½®æ–‡æ¡£çš„èƒŒæ™¯é¢œè‰²æˆ–å›¾ç‰‡ï¼Œæå¤§åœ°ç®€åŒ–äº†å¼€å‘éš¾åº¦ã€‚</li>
</ul>
<h4 data-id="heading-4">å®‰è£…ä¸å¼•ç”¨</h4>
<p>åœ¨C#é¡¹ç›®ä¸­å®‰è£…Spire.Doc for .NETéå¸¸ç®€å•ï¼Œé€šå¸¸é€šè¿‡NuGetåŒ…ç®¡ç†å™¨è¿›è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Install-Package Spire.Doc
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨C#ä»£ç æ–‡ä»¶ä¸­å¼•ç”¨<code>Spire.Doc</code>å‘½åç©ºé—´å³å¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Spire.Doc;
<span class="hljs-keyword">using</span> Spire.Doc.Documents;
<span class="hljs-keyword">using</span> System.Drawing; <span class="hljs-comment">// ç”¨äºé¢œè‰²å’Œå›¾ç‰‡</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">C#å®ç°Wordæ–‡æ¡£èƒŒæ™¯è‰²å¡«å……</h3>
<p>ä¸ºWordæ–‡æ¡£æ·»åŠ çº¯è‰²èƒŒæ™¯æ˜¯ä¸€ç§å¸¸è§çš„â€œé¢œè‰²å¡«å……â€ï¼ˆColor Fillï¼‰éœ€æ±‚ï¼Œå¯ä»¥ä¸ºæ–‡æ¡£å¸¦æ¥ç®€æ´ã€ä¸“ä¸šçš„è§†è§‰æ•ˆæœã€‚</p>
<h4 data-id="heading-6">åŸç†é˜è¿°</h4>
<p>Spire.Doc for .NETé€šè¿‡<code>Document</code>å¯¹è±¡çš„<code>Background</code>å±æ€§æ¥ç®¡ç†æ–‡æ¡£çš„èƒŒæ™¯è®¾ç½®ã€‚è¯¥å±æ€§åŒ…å«<code>Type</code>å’Œ<code>Color</code>ç­‰å­å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒä»¬æ¥æŒ‡å®šèƒŒæ™¯çš„ç±»å‹ä¸ºçº¯è‰²ï¼Œå¹¶è®¾ç½®å…·ä½“çš„é¢œè‰²å€¼ã€‚</p>
<h4 data-id="heading-7">æ ¸å¿ƒä»£ç ç¤ºä¾‹</h4>
<p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£ï¼Œå¹¶å°†å…¶èƒŒæ™¯è®¾ç½®ä¸ºæµ…è“è‰²ï¼Œç„¶åä¿å­˜ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£å¯¹è±¡</span>
Document document = <span class="hljs-keyword">new</span> Document();

<span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªèŠ‚ï¼ˆSectionï¼‰ï¼Œæ–‡æ¡£å†…å®¹é€šå¸¸æ”¾åœ¨èŠ‚ä¸­</span>
Section section = document.AddSection();

<span class="hljs-comment">// æ·»åŠ ä¸€äº›ç¤ºä¾‹æ–‡æœ¬</span>
section.AddParagraph().AppendText(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰èƒŒæ™¯è‰²çš„Wordæ–‡æ¡£ã€‚"</span>);

<span class="hljs-comment">// è®¾ç½®æ–‡æ¡£èƒŒæ™¯ç±»å‹ä¸ºé¢œè‰²</span>
document.Background.Type = BackgroundType.Color;

<span class="hljs-comment">// è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºæµ…è“è‰²</span>
document.Background.Color = Color.LightBlue;

<span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
document.SaveToFile(<span class="hljs-string">"Wordæ–‡æ¡£_èƒŒæ™¯è‰².docx"</span>, FileFormat.Docx);

<span class="hljs-comment">// å…³é—­æ–‡æ¡£å¯¹è±¡</span>
document.Close();

Console.WriteLine(<span class="hljs-string">"Wordæ–‡æ¡£å·²ç”Ÿæˆï¼Œå¹¶è®¾ç½®äº†æµ…è“è‰²èƒŒæ™¯ã€‚"</span>);
</code></pre>
<h4 data-id="heading-8">ä»£ç æ³¨é‡Š</h4>
<ul>
<li><code>Document document = new Document();</code>ï¼šå®ä¾‹åŒ–ä¸€ä¸ªWordæ–‡æ¡£å¯¹è±¡ã€‚</li>
<li><code>document.Background.Type = BackgroundType.Color;</code>ï¼šæŒ‡å®šèƒŒæ™¯çš„ç±»å‹ä¸ºçº¯è‰²ã€‚</li>
<li><code>document.Background.Color = Color.LightBlue;</code>ï¼šè®¾ç½®èƒŒæ™¯é¢œè‰²ä¸º<code>LightBlue</code>ï¼ˆæµ…è“è‰²ï¼‰ï¼Œ<code>System.Drawing.Color</code>æä¾›äº†ä¸°å¯Œçš„é¢„å®šä¹‰é¢œè‰²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RGBå€¼ã€‚</li>
<li><code>document.SaveToFile(...)</code>ï¼šå°†ä¿®æ”¹åçš„æ–‡æ¡£ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-9">æ•ˆæœæè¿°</h4>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>.docx</code>æ–‡ä»¶ï¼Œæ‰“å¼€åå¯ä»¥çœ‹åˆ°æ•´ä¸ªæ–‡æ¡£é¡µé¢éƒ½è¢«æµ…è“è‰²å¡«å……ï¼Œä¸ºæ–‡æ¡£å¢æ·»äº†ä¸€æŠ¹æ¸…æ–°çš„è‰²å½©ã€‚</p>
<hr/>
<h3 data-id="heading-10">C#å®ç°Wordæ–‡æ¡£èƒŒæ™¯å›¾ç‰‡å¡«å……</h3>
<p>é™¤äº†çº¯è‰²èƒŒæ™¯ï¼Œå°†å›¾ç‰‡è®¾ç½®ä¸ºæ–‡æ¡£èƒŒæ™¯ï¼ˆImage Fillï¼‰å¯ä»¥å¸¦æ¥æ›´ä¸°å¯Œçš„è§†è§‰æ•ˆæœï¼Œå¸¸ç”¨äºå“ç‰Œæ ‡è¯†ã€è£…é¥°å›¾æ¡ˆæˆ–æ°´å°ã€‚</p>
<h4 data-id="heading-11">åŸç†é˜è¿°</h4>
<p>ä¸èƒŒæ™¯è‰²å¡«å……ç±»ä¼¼ï¼Œè®¾ç½®èƒŒæ™¯å›¾ç‰‡ä¹Ÿæ˜¯é€šè¿‡<code>Document.Background</code>å±æ€§å®ç°ã€‚ä½†æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†<code>Type</code>è®¾ç½®ä¸º<code>BackgroundType.Picture</code>ï¼Œå¹¶é€šè¿‡<code>Picture</code>å±æ€§æŒ‡å®šè¦ä½¿ç”¨çš„å›¾ç‰‡æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-12">æ ¸å¿ƒä»£ç ç¤ºä¾‹</h4>
<p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£ï¼Œå¹¶å°†å…¶èƒŒæ™¯è®¾ç½®ä¸ºä¸€å¼ å›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£å¯¹è±¡</span>
Document document = <span class="hljs-keyword">new</span> Document();

<span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªèŠ‚ï¼Œå¹¶æ·»åŠ ç¤ºä¾‹æ–‡æœ¬</span>
Section section = document.AddSection();
section.AddParagraph().AppendText(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡çš„Wordæ–‡æ¡£ã€‚"</span>);

<span class="hljs-comment">// å‡è®¾ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º "background.png" çš„å›¾ç‰‡æ–‡ä»¶</span>
<span class="hljs-comment">// è¯·ç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®</span>
<span class="hljs-built_in">string</span> imagePath = <span class="hljs-string">"background.png"</span>; <span class="hljs-comment">// æˆ–è€…å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚ @"C:\Images\background.png"</span>

<span class="hljs-comment">// æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> (!System.IO.File.Exists(imagePath))
{
    Console.WriteLine(<span class="hljs-string">$"é”™è¯¯ï¼šèƒŒæ™¯å›¾ç‰‡æ–‡ä»¶ '<span class="hljs-subst">{imagePath}</span>' ä¸å­˜åœ¨ã€‚è¯·æ›¿æ¢ä¸ºæœ‰æ•ˆè·¯å¾„ã€‚"</span>);
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// è®¾ç½®æ–‡æ¡£èƒŒæ™¯ç±»å‹ä¸ºå›¾ç‰‡</span>
document.Background.Type = BackgroundType.Picture;

<span class="hljs-comment">// åŠ è½½å›¾ç‰‡æ–‡ä»¶å¹¶è®¾ç½®ä¸ºèƒŒæ™¯å›¾ç‰‡</span>
<span class="hljs-comment">// æ³¨æ„ï¼šSpire.Docä¼šè‡ªåŠ¨å¤„ç†å›¾ç‰‡çš„åµŒå…¥å’Œæ‹‰ä¼¸/å¹³é“ºï¼Œä»¥é€‚åº”é¡µé¢</span>
document.Background.Picture = Image.FromFile(imagePath);

<span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
document.SaveToFile(<span class="hljs-string">"Wordæ–‡æ¡£_èƒŒæ™¯å›¾ç‰‡.docx"</span>, FileFormat.Docx);

<span class="hljs-comment">// å…³é—­æ–‡æ¡£å¯¹è±¡</span>
document.Close();

Console.WriteLine(<span class="hljs-string">"Wordæ–‡æ¡£å·²ç”Ÿæˆï¼Œå¹¶è®¾ç½®äº†èƒŒæ™¯å›¾ç‰‡ã€‚"</span>);
</code></pre>
<h4 data-id="heading-13">ä»£ç æ³¨é‡Š</h4>
<ul>
<li><code>string imagePath = "background.png";</code>ï¼šå®šä¹‰èƒŒæ™¯å›¾ç‰‡çš„è·¯å¾„ã€‚</li>
<li><code>document.Background.Type = BackgroundType.Picture;</code>ï¼šæŒ‡å®šèƒŒæ™¯çš„ç±»å‹ä¸ºå›¾ç‰‡ã€‚</li>
<li><code>document.Background.Picture = Image.FromFile(imagePath);</code>ï¼šä»æŒ‡å®šè·¯å¾„åŠ è½½å›¾ç‰‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºæ–‡æ¡£èƒŒæ™¯ã€‚<code>System.Drawing.Image.FromFile()</code>æ–¹æ³•ç”¨äºä»æ–‡ä»¶åˆ›å»º<code>Image</code>å¯¹è±¡ã€‚</li>
</ul>
<h4 data-id="heading-14">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>å›¾ç‰‡è·¯å¾„</strong>ï¼šç¡®ä¿<code>imagePath</code>æŒ‡å‘çš„å›¾ç‰‡æ–‡ä»¶çœŸå®å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®ã€‚</li>
<li><strong>å›¾ç‰‡å¤§å°ä¸æ¯”ä¾‹</strong>ï¼šSpire.Docé€šå¸¸ä¼šå°è¯•å°†èƒŒæ™¯å›¾ç‰‡æ‹‰ä¼¸ä»¥é€‚åº”é¡µé¢ã€‚å¦‚æœå›¾ç‰‡æ¯”ä¾‹ä¸é¡µé¢æ¯”ä¾‹ä¸ç¬¦ï¼Œå¯èƒ½ä¼šå‡ºç°æ‹‰ä¼¸å˜å½¢ã€‚å»ºè®®ä½¿ç”¨ä¸æ–‡æ¡£é¡µé¢æ¯”ä¾‹æ¥è¿‘çš„å›¾ç‰‡ï¼Œæˆ–æ ¹æ®éœ€æ±‚åœ¨å›¾ç‰‡å¤„ç†è½¯ä»¶ä¸­é¢„å¤„ç†å›¾ç‰‡ã€‚</li>
<li><strong>æ–‡ä»¶å¤§å°</strong>ï¼šä½¿ç”¨å¤§å‹æˆ–é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ä¼šæ˜¾è‘—å¢åŠ Wordæ–‡æ¡£çš„æ–‡ä»¶å¤§å°ï¼Œå¯èƒ½å½±å“æ–‡æ¡£çš„åŠ è½½å’Œä¼ è¾“é€Ÿåº¦ã€‚å»ºè®®å¯¹èƒŒæ™¯å›¾ç‰‡è¿›è¡Œé€‚å½“çš„å‹ç¼©å’Œä¼˜åŒ–ã€‚</li>
<li><strong>å›¾ç‰‡æ ¼å¼</strong>ï¼šå¸¸è§çš„å›¾ç‰‡æ ¼å¼å¦‚PNGã€JPGã€BMPç­‰é€šå¸¸éƒ½æ”¯æŒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-15">åº”ç”¨åœºæ™¯ä¸æ‹“å±•æ€è€ƒ</h3>
<p>å®šåˆ¶Wordæ–‡æ¡£èƒŒæ™¯çš„â€œè§†è§‰å®šåˆ¶â€èƒ½åŠ›åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­éƒ½å…·æœ‰é‡è¦ä»·å€¼ï¼š</p>
<ul>
<li><strong>å…¬å¸æŠ¥å‘Š/å“ç‰Œæ–‡æ¡£</strong>ï¼šå¯ä»¥åµŒå…¥å…¬å¸Logoã€å“ç‰Œè‰²æˆ–ç‰¹å®šå›¾æ¡ˆï¼Œæå‡æ–‡æ¡£çš„ä¸“ä¸šæ€§å’Œå“ç‰Œä¸€è‡´æ€§ã€‚</li>
<li><strong>æ´»åŠ¨é‚€è¯·å‡½/å®£ä¼ æµ·æŠ¥</strong>ï¼šé€šè¿‡èƒŒæ™¯å›¾ç‰‡è¥é€ æ´»åŠ¨æ°›å›´ï¼Œä½¿å…¶æ›´å…·å¸å¼•åŠ›ã€‚</li>
<li><strong>ä¸ªæ€§åŒ–ç®€å†/ç”µå­ä¹¦å°é¢</strong>ï¼šå±•ç°ä¸ªæ€§ï¼Œä½¿æ–‡æ¡£åœ¨ä¼—å¤šæ™®é€šæ–‡æ¡£ä¸­è„±é¢–è€Œå‡ºã€‚</li>
<li><strong>æ•™è‚²ææ–™/æ•™å­¦å¤§çº²</strong>ï¼šåˆ©ç”¨èƒŒæ™¯è‰²æˆ–å›¾ç‰‡åŒºåˆ†ä¸åŒç« èŠ‚æˆ–ä¸»é¢˜ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼ŒèƒŒæ™¯å®šåˆ¶è¿˜å¯ä»¥ä¸å…¶ä»–Wordæ–‡æ¡£åŠŸèƒ½ç›¸ç»“åˆï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>æ°´å°</strong>ï¼šèƒŒæ™¯å›¾ç‰‡å¯ä»¥ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„æ°´å°å½¢å¼ã€‚</li>
<li><strong>é¡µçœ‰é¡µè„š</strong>ï¼šèƒŒæ™¯å¯ä»¥ä¸é¡µçœ‰é¡µè„šçš„å†…å®¹ç›¸å‘¼åº”ï¼Œå½¢æˆæ•´ä½“è®¾è®¡ã€‚</li>
<li><strong>æ ·å¼</strong>ï¼šç»“åˆWordæ ·å¼ï¼Œå®ç°æ–‡æ¡£æ ¼å¼çš„ç»Ÿä¸€åŒ–ç®¡ç†ã€‚</li>
</ul>
<p>å¯¹äºå¤§å‹æ–‡æ¡£ï¼ŒèƒŒæ™¯å›¾ç‰‡å¯èƒ½ä¼šå¢åŠ æ–‡ä»¶å¤§å°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¾ƒä½åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œæˆ–åªåœ¨æ–‡æ¡£çš„å…³é”®éƒ¨åˆ†ï¼ˆå¦‚å°é¢ï¼‰ä½¿ç”¨å›¾ç‰‡èƒŒæ™¯ï¼Œå…¶ä½™éƒ¨åˆ†ä½¿ç”¨çº¯è‰²èƒŒæ™¯ï¼Œä»¥å¹³è¡¡è§†è§‰æ•ˆæœå’Œæ–‡ä»¶æ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£åˆ°C#å¼€å‘è€…å¯ä»¥å€ŸåŠ©Spire.Doc for .NETè¿™ä¸€å¼ºå¤§å·¥å…·ï¼Œè½»æ¾å®ç°Wordæ–‡æ¡£çš„èƒŒæ™¯â€œè§†è§‰å®šåˆ¶â€ã€‚æ— è®ºæ˜¯ç®€å•çš„â€œé¢œè‰²å¡«å……â€è¿˜æ˜¯å¤æ‚çš„â€œå›¾ç‰‡å¡«å……â€ï¼ŒSpire.Doc for .NETéƒ½æä¾›äº†ç›´è§‚ä¸”é«˜æ•ˆçš„APIã€‚æŒæ¡è¿™ä¸€æŠ€èƒ½ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬è§£å†³å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œæ›´èƒ½ä¸ºæˆ‘ä»¬åˆ›å»ºçš„Wordæ–‡æ¡£æ³¨å…¥ä¸ªæ€§åŒ–ä¸ä¸“ä¸šæ€§ï¼Œä½¿å…¶åœ¨ä¼—å¤šæ–‡æ¡£ä¸­è„±é¢–è€Œå‡ºã€‚</p>
<p>å¤§å®¶ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥æ¢ç´¢Spire.Doc for .NETçš„æ›´å¤šå¼ºå¤§åŠŸèƒ½ï¼Œä¾‹å¦‚è®¾ç½®æ¸å˜èƒŒæ™¯ã€é¡µé¢è®¾ç½®ç­‰ç­‰ã€‚å½“ç„¶ï¼Œè®¿é—®Spire.Docçš„å®˜æ–¹æ–‡æ¡£ï¼Œå°†æ˜¯æ·±å…¥å­¦ä¹ å’Œè§£å†³ç‰¹å®šé—®é¢˜çš„æœ€ä½³é€”å¾„ã€‚è®©æˆ‘ä»¬çš„C#ä»£ç ï¼Œä¸ºWordæ–‡æ¡£å¸¦æ¥æ— é™å¯èƒ½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@empjs/valtio - è®©ä½ åƒå†™ Vue å“åº”å¼ä¸€æ ·å†™ React çŠ¶æ€]]></title>    <link>https://juejin.cn/post/7601445395478593570</link>    <guid>https://juejin.cn/post/7601445395478593570</guid>    <pubDate>2026-02-02T02:18:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601445395478593570" data-draft-id="7601477334933192710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@empjs/valtio - è®©ä½ åƒå†™ Vue å“åº”å¼ä¸€æ ·å†™ React çŠ¶æ€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-02T02:18:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KenXu"/> <meta itemprop="url" content="https://juejin.cn/user/483440843559406"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @empjs/valtio - è®©ä½ åƒå†™ Vue å“åº”å¼ä¸€æ ·å†™ React çŠ¶æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/483440843559406/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KenXu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:18:18.000Z" title="Mon Feb 02 2026 02:18:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å¦‚æœä½ æ­£åœ¨ç»å†ï¼š</strong> Zustand æ›¿ä»£äº† Redux çš„ç¹çï¼Œä½†è¿˜æ˜¯è§‰å¾—ä¸å¤Ÿ"ç›´è§‰"ï¼Ÿä» Vue è½¬ React åï¼Œæ€€å¿µ <code>data.count++</code> è¿™ç§è‡ªç„¶çš„å†™æ³•ï¼Ÿ <strong>@empjs/valtio</strong> å¯èƒ½æ˜¯ä½ çš„ç­”æ¡ˆã€‚å®ƒè®© React çŠ¶æ€ç®¡ç†å›å½’"æ”¹å˜æ•°æ®å°±è‡ªåŠ¨æ›´æ–°"çš„æœ¬èƒ½ï¼ŒåŒæ—¶æŠŠå¸¸ç”¨åŠŸèƒ½ï¼ˆæ’¤é”€/é‡åšã€è®¡ç®—å±æ€§ã€æœ¬åœ°å­˜å‚¨ï¼‰ä» <strong>4~5 ä¸ªå®‰è£…æ­¥éª¤ç®€åŒ–ä¸º 1 è¡Œé…ç½®</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ“– ç›®å½•</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%231-%25E4%25B8%2589%25E5%2588%2586%25E9%2592%259F%25E7%2590%2586%25E8%25A7%25A3" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#1-%E4%B8%89%E5%88%86%E9%92%9F%E7%90%86%E8%A7%A3" ref="nofollow noopener noreferrer">ä¸‰åˆ†é’Ÿç†è§£ï¼šRedux â†’ Zustand â†’ Valtio çš„æ¼”å˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%232-%25E6%25A0%25B8%25E5%25BF%2583%25E4%25BD%2593%25E9%25AA%258C" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#2-%E6%A0%B8%E5%BF%83%E4%BD%93%E9%AA%8C" ref="nofollow noopener noreferrer">æ ¸å¿ƒä½“éªŒï¼šä¸€ä¸ªè®¡æ•°å™¨çš„ä¸‰ç§å†™æ³•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%233-%25E4%25B8%25BA%25E4%25BB%2580%25E4%25B9%2588%25E9%259C%2580%25E8%25A6%2581%25E5%25A2%259E%25E5%25BC%25BA%25E7%2589%2588" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#3-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%A2%9E%E5%BC%BA%E7%89%88" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆéœ€è¦å¢å¼ºç‰ˆï¼ŸåŸç‰ˆ Valtio çš„"æœ€åä¸€å…¬é‡Œ"</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%234-%25E5%25AE%259E%25E6%2588%2598%25E5%25AF%25B9%25E6%25AF%2594" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#4-%E5%AE%9E%E6%88%98%E5%AF%B9%E6%AF%94" ref="nofollow noopener noreferrer">å®æˆ˜å¯¹æ¯”ï¼šåŒä¸€ä¸ªåŠŸèƒ½ï¼Œä»£ç é‡å·®å¤šå°‘ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%235-%25E8%25AF%25BB%25E5%2586%2599%25E9%2593%2581%25E5%25BE%258B" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#5-%E8%AF%BB%E5%86%99%E9%93%81%E5%BE%8B" ref="nofollow noopener noreferrer">è¯»å†™é“å¾‹ï¼šsnap å’Œ store ä¸èƒ½æ··ç”¨</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%236-%25E5%2586%2585%25E5%25BB%25BA%25E6%25AD%25A6%25E5%2599%25A8%25E5%25BA%2593" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#6-%E5%86%85%E5%BB%BA%E6%AD%A6%E5%99%A8%E5%BA%93" ref="nofollow noopener noreferrer">å†…å»ºæ­¦å™¨åº“ï¼š17 ä¸ªæ–¹æ³•å…¨è§£æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%237-%25E5%2585%25A8%25E5%25B1%2580-vs-%25E5%25B1%2580%25E9%2583%25A8" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#7-%E5%85%A8%E5%B1%80-vs-%E5%B1%80%E9%83%A8" ref="nofollow noopener noreferrer">å…¨å±€ vs å±€éƒ¨ï¼šä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%238-%25E5%25BE%25AE%25E5%2589%258D%25E7%25AB%25AF%25E5%259C%25BA%25E6%2599%25AF" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#8-%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%9C%BA%E6%99%AF" ref="nofollow noopener noreferrer">å¾®å‰ç«¯åœºæ™¯ï¼šåƒä¼ æ™®é€š props ä¸€æ ·ä¼  store</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%239-%25E9%2581%25BF%25E5%259D%2591%25E6%258C%2587%25E5%258D%2597" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#9-%E9%81%BF%E5%9D%91%E6%8C%87%E5%8D%97" ref="nofollow noopener noreferrer">é¿å‘æŒ‡å—ï¼š5 ä¸ªæ–°æ‰‹å¸¸çŠ¯é”™è¯¯</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fchat%2Fb05d6238-e287-40bb-b349-6f17a24857a9%2310-%25E5%25BF%25AB%25E9%2580%259F%25E5%2586%25B3%25E7%25AD%2596%25E8%25A1%25A8" target="_blank" title="https://claude.ai/chat/b05d6238-e287-40bb-b349-6f17a24857a9#10-%E5%BF%AB%E9%80%9F%E5%86%B3%E7%AD%96%E8%A1%A8" ref="nofollow noopener noreferrer">å¿«é€Ÿå†³ç­–è¡¨ï¼š30 ç§’é€‰å¯¹æ–¹æ¡ˆ</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">1. ä¸‰åˆ†é’Ÿç†è§£</h2>
<h3 data-id="heading-2">React çŠ¶æ€ç®¡ç†çš„ä¸‰ä»£æ¼”å˜</h3>
<p>æƒ³è±¡ä½ åœ¨ç®¡ç†ä¸€å®¶å¥¶èŒ¶åº—çš„åº“å­˜ï¼š</p>
<p><strong>Reduxï¼ˆç¬¬ä¸€ä»£ï¼‰â€”â€” ä¸¥æ ¼çš„ä»“åº“ç®¡ç†åˆ¶åº¦</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ¯æ¬¡æ”¹åº“å­˜éƒ½è¦å¡«è¡¨ã€ç›–ç« ã€èµ°æµç¨‹</span>
<span class="hljs-title function_ invoke__">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'UPDATE_MILK_TEA'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">count</span>: <span class="hljs-number">10</span> } })
<span class="hljs-comment">// ä¼˜ç‚¹ï¼šæµç¨‹æ¸…æ™°ï¼Œé€‚åˆå¤§å›¢é˜Ÿåä½œ</span>
<span class="hljs-comment">// ç¼ºç‚¹ï¼šæ”¹ä¸ªæ•°å­—è¦å†™ä¸‰ä¸ªæ–‡ä»¶ï¼ˆactionã€reducerã€connectï¼‰</span>
</code></pre>
<p><strong>Zustandï¼ˆç¬¬äºŒä»£ï¼‰â€”â€” ç®€åŒ–çš„åº“å­˜æœ¬å­</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æŠŠè¡¨æ ¼ç®€åŒ–æˆä¸€ä¸ªè®°è´¦æœ¬</span>
<span class="hljs-keyword">const</span> useStore = create(<span class="hljs-keyword">set</span> =&gt; ({
  count: <span class="hljs-number">0</span>,
  increase: () =&gt; <span class="hljs-keyword">set</span>(state =&gt; ({ count: state.count + <span class="hljs-number">1</span> }))
}))
<span class="hljs-comment">// ä¼˜ç‚¹ï¼šåªè¦ä¸€ä¸ªæ–‡ä»¶ï¼ŒAPI å¾ˆå°‘</span>
<span class="hljs-comment">// ç¼ºç‚¹ï¼šè¿˜æ˜¯è¦å®šä¹‰"åŠ¨ä½œå‡½æ•°"ï¼Œä¸èƒ½ç›´æ¥æ”¹æ•°å­—</span>
</code></pre>
<p><strong>Valtioï¼ˆç¬¬ä¸‰ä»£ï¼‰â€”â€” åƒæ”¹æ™®é€šå˜é‡ä¸€æ ·</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å°±åƒåœ¨ç™½æ¿ä¸Šç›´æ¥æ“¦æ‰æ—§æ•°å­—å†™æ–°æ•°å­—</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">state</span> = <span class="hljs-title function_ invoke__">proxy</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
state.count++  <span class="hljs-comment">// å°±è¿™ä¹ˆç®€å•ï¼UI è‡ªåŠ¨æ›´æ–°</span>
<span class="hljs-comment">// ä¼˜ç‚¹ï¼šæœ€æ¥è¿‘ Vue çš„ reactiveï¼Œé›¶å­¦ä¹ æˆæœ¬</span>
<span class="hljs-comment">// ç¼ºç‚¹ï¼šå¤ª"è‡ªç”±"äº†ï¼Œç¼ºå°‘ç»Ÿä¸€ç®¡ç†</span>
</code></pre>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆ Vue å¼€å‘è€…ä¼šçˆ±ä¸Šå®ƒï¼Ÿ</h3>
<p>å¦‚æœä½ ç†Ÿæ‚‰ Vue 3 çš„ <code>reactive</code>ï¼Œé‚£ä¹ˆ Valtio çš„ <code>proxy</code> å‡ ä¹æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Vue 3 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// ç›´æ¥æ”¹ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Valtio (React)</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">state</span> = <span class="hljs-title function_ invoke__">proxy</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
state.count++  <span class="hljs-comment">// åŒæ ·ç›´æ¥æ”¹ï¼Œç»„ä»¶è‡ªåŠ¨é‡æ¸²æŸ“</span>
</code></pre>
<p>ä¸¤è€…åº•å±‚éƒ½ç”¨äº† JavaScript çš„ <code>Proxy</code> æœºåˆ¶æ¥è¿½è¸ªå˜åŒ–ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Valtio å¸¸è¢«ç§°ä¸º"React ä¸–ç•Œçš„ Vue å“åº”å¼"ã€‚</p>
<hr/>
<h2 data-id="heading-4">2. æ ¸å¿ƒä½“éªŒ</h2>
<h3 data-id="heading-5">åŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¸‰ç§åº“çš„å†™æ³•</h3>
<p><strong>Redux Toolkitï¼ˆçº¦ 20 è¡Œï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// store.ts</span>
<span class="hljs-keyword">import</span> { createSlice } <span class="hljs-keyword">from</span> <span class="hljs-string">'@reduxjs/toolkit'</span>
<span class="hljs-keyword">const</span> counterSlice = <span class="hljs-title function_">createSlice</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'counter'</span>,
  <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },
  <span class="hljs-attr">reducers</span>: { <span class="hljs-attr">increment</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> { state.<span class="hljs-property">count</span> += <span class="hljs-number">1</span> } }
})

<span class="hljs-comment">// ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useSelector, useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">counter</span>.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch(increment())}&gt;
    {count}
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>Zustandï¼ˆçº¦ 12 è¡Œï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>
<span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function"><span class="hljs-params">set</span> =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({ <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> }))
}))

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { count, increment } = <span class="hljs-title function_">useStore</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>@empjs/valtioï¼ˆçº¦ 7 è¡Œï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> store.set('count', snap.count + 1)}&gt;
    {snap.count}
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-6">é‡åŒ–å¯¹æ¯”</h3>



































<table><thead><tr><th>æŒ‡æ ‡</th><th align="center">Redux Toolkit</th><th align="center">Zustand</th><th align="center">@empjs/valtio</th></tr></thead><tbody><tr><td><strong>ä»£ç è¡Œæ•°</strong></td><td align="center">~20 è¡Œ</td><td align="center">~12 è¡Œ</td><td align="center"><strong>~7 è¡Œ</strong></td></tr><tr><td><strong>éœ€è¦å®šä¹‰"åŠ¨ä½œ"</strong></td><td align="center">æ˜¯ï¼ˆreducerï¼‰</td><td align="center">æ˜¯ï¼ˆå‡½æ•°ï¼‰</td><td align="center"><strong>å¦</strong></td></tr><tr><td><strong>TypeScript ç±»å‹æ¨æ–­</strong></td><td align="center">éœ€æ‰‹å†™ RootState</td><td align="center">éœ€æ‰‹å†™æ³›å‹</td><td align="center"><strong>è‡ªåŠ¨æ¨å¯¼</strong></td></tr><tr><td><strong>æ·»åŠ æ’¤é”€/é‡åš</strong></td><td align="center">è£… redux-undo</td><td align="center">è‡ªå·±å®ç°</td><td align="center"><strong>1 è¡Œé…ç½®</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">3. ä¸ºä»€ä¹ˆéœ€è¦å¢å¼ºç‰ˆï¼Ÿ</h2>
<h3 data-id="heading-8">åŸç‰ˆ Valtio çš„ä¼˜åŠ¿ä¸è¾¹ç•Œ</h3>
<p>åŸç‰ˆ Valtio åªæœ‰ä¸¤ä¸ªæ ¸å¿ƒ APIï¼š</p>
<ul>
<li><code>proxy(data)</code> â€” åˆ›å»ºå“åº”å¼å¯¹è±¡</li>
<li><code>useSnapshot(state)</code> â€” åœ¨ç»„ä»¶é‡Œè¯»å–æ•°æ®</li>
</ul>
<p>è¿™ç§æç®€ä¸»ä¹‰æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯å±€é™ï¼š</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å­¦ä¹ æˆæœ¬å‡ ä¹ä¸ºé›¶ï¼Œå†™èµ·æ¥æœ€è‡ªç„¶<br/>
<strong>å±€é™ï¼š</strong> ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„"å·¥ç¨‹åŒ–èƒ½åŠ›"éƒ½è¦è‡ªå·±åŠ </p>
<h3 data-id="heading-9">åŸç‰ˆç¼ºå¤±çš„"æœ€åä¸€å…¬é‡Œ"</h3>



































<table><thead><tr><th>ç¼ºå¤±çš„èƒ½åŠ›</th><th>åŸç‰ˆæ–¹æ¡ˆ</th><th>@empjs/valtio æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ç»Ÿä¸€å†™å…¥å£</strong></td><td>è‡ªå·±å°è£… <code>set</code>/<code>update</code> å‡½æ•°</td><td><code>createStore</code> å†…å»º 17 ä¸ªæ–¹æ³•</td></tr><tr><td><strong>æ’¤é”€/é‡åš</strong></td><td>è£… <code>valtio-history</code> å¹¶æ‰‹åŠ¨æ¥å…¥</td><td><code>createStore({ history })</code> ä¸€è¡Œå¼€å¯</td></tr><tr><td><strong>è®¡ç®—å±æ€§</strong></td><td>è£… <code>derive-valtio</code> å¹¶é…ç½®</td><td><code>createStore({ derive })</code> è‡ªåŠ¨è®¡ç®—</td></tr><tr><td><strong>æœ¬åœ°å­˜å‚¨</strong></td><td>è‡ªå·±å†™ <code>localStorage</code> é€»è¾‘</td><td><code>store.persist('key')</code> ä¸€è¡Œæå®š</td></tr><tr><td><strong>å¤šå®ä¾‹éš”ç¦»</strong></td><td><code>useRef(proxy(...))</code> + æ‰‹åŠ¨æ¸…ç†</td><td><code>useStore(init)</code> è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</td></tr></tbody></table>
<h3 data-id="heading-10">å…¸å‹ç—›ç‚¹åœºæ™¯</h3>
<p><strong>åœºæ™¯ 1ï¼šæƒ³åŠ ä¸ª"æ’¤é”€"åŠŸèƒ½</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åŸç‰ˆï¼šéœ€è¦å®‰è£…æ–°åŒ… + å¤šå¤„æ”¹é€ </span>
npm install valtio-history
import { proxyWithHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'valtio-history'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">state</span> = <span class="hljs-title function_ invoke__">proxyWithHistory</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
<span class="hljs-comment">// ç„¶ååœ¨ç»„ä»¶é‡Œæ‰‹åŠ¨è°ƒ state.value.countã€state.undo()</span>

<span class="hljs-comment">// å¢å¼ºç‰ˆï¼šé…ç½®ä¸€ä¸‹å°±è¡Œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">store</span> = <span class="hljs-title function_ invoke__">createStore</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }, { <span class="hljs-attr">history</span>: <span class="hljs-literal">true</span> })
snap.<span class="hljs-title function_ invoke__">undo</span>()  <span class="hljs-comment">// ç›´æ¥ç”¨</span>
</code></pre>
<p><strong>åœºæ™¯ 2ï¼šè¡¨å•éœ€è¦"å…¨å"è‡ªåŠ¨æ‹¼æ¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸç‰ˆï¼šéœ€è¦è£… derive-valtio + å•ç‹¬ç»´æŠ¤æ´¾ç”Ÿé€»è¾‘</span>
npm install derive-valtio
<span class="hljs-keyword">import</span> { derive } <span class="hljs-keyword">from</span> <span class="hljs-string">'derive-valtio'</span>
<span class="hljs-keyword">const</span> derived = <span class="hljs-title function_">derive</span>({ <span class="hljs-attr">fullName</span>: <span class="hljs-function"><span class="hljs-params">get</span> =&gt;</span> ... })

<span class="hljs-comment">// å¢å¼ºç‰ˆï¼šå†™åœ¨é…ç½®é‡Œ</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(
  { <span class="hljs-attr">firstName</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">lastName</span>: <span class="hljs-string">''</span> },
  {
    <span class="hljs-attr">derive</span>: <span class="hljs-function">(<span class="hljs-params">get, p</span>) =&gt;</span> ({
      <span class="hljs-attr">fullName</span>: <span class="hljs-string">`<span class="hljs-subst">${get(p).firstName}</span> <span class="hljs-subst">${get(p).lastName}</span>`</span>.<span class="hljs-title function_">trim</span>()
    })
  }
)
</code></pre>
<hr/>
<h2 data-id="heading-11">4. å®æˆ˜å¯¹æ¯”</h2>
<h3 data-id="heading-12">æ¡ˆä¾‹ï¼šç”¨æˆ·ä¿¡æ¯è¡¨å•ï¼ˆå¸¦æ’¤é”€ã€è®¡ç®—å±æ€§ã€æŒä¹…åŒ–ï¼‰</h3>
<p><strong>åŸç‰ˆ Valtioï¼ˆçº¦ 35 è¡Œï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// â‘  å®‰è£…ä¾èµ–</span>
<span class="hljs-comment">// npm install valtio valtio-history derive-valtio</span>

<span class="hljs-comment">// â‘¡ åˆ›å»ºçŠ¶æ€</span>
<span class="hljs-keyword">import</span> { proxy } <span class="hljs-keyword">from</span> <span class="hljs-string">'valtio'</span>
<span class="hljs-keyword">import</span> { proxyWithHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'valtio-history'</span>
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">proxyWithHistory</span>({ <span class="hljs-attr">firstName</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">lastName</span>: <span class="hljs-string">''</span> })

<span class="hljs-comment">// â‘¢ æ‰‹å†™æ´¾ç”Ÿé€»è¾‘</span>
<span class="hljs-keyword">import</span> { derive } <span class="hljs-keyword">from</span> <span class="hljs-string">'derive-valtio'</span>
<span class="hljs-keyword">const</span> derived = <span class="hljs-title function_">derive</span>({
  <span class="hljs-attr">fullName</span>: <span class="hljs-function"><span class="hljs-params">get</span> =&gt;</span> 
    <span class="hljs-string">`<span class="hljs-subst">${get(state.value).firstName}</span> <span class="hljs-subst">${get(state.value).lastName}</span>`</span>.<span class="hljs-title function_">trim</span>()
})

<span class="hljs-comment">// â‘£ æ‰‹å†™æŒä¹…åŒ–</span>
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user'</span>)
  <span class="hljs-keyword">if</span> (saved) <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(state.<span class="hljs-property">value</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved))
  <span class="hljs-keyword">const</span> unsub = <span class="hljs-title function_">subscribe</span>(state, <span class="hljs-function">() =&gt;</span> 
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state.<span class="hljs-property">value</span>))
  )
  <span class="hljs-keyword">return</span> unsub
}, [])

<span class="hljs-comment">// â‘¤ ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Form</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = <span class="hljs-title function_">useSnapshot</span>(state)
  <span class="hljs-keyword">const</span> derivedSnap = <span class="hljs-title function_">useSnapshot</span>(derived)
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{snap.value.firstName}</span> 
             <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> state.value.firstName = e.target.value} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å…¨åï¼š{derivedSnap.fullName}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> snap.undo()}&gt;æ’¤é”€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p><strong>@empjs/valtioï¼ˆçº¦ 18 è¡Œï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// â‘  ä¸€æ¬¡æ€§é…ç½®</span>
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(
  { <span class="hljs-attr">firstName</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">lastName</span>: <span class="hljs-string">''</span> },
  {
    <span class="hljs-attr">history</span>: { <span class="hljs-attr">limit</span>: <span class="hljs-number">50</span> },  <span class="hljs-comment">// æ’¤é”€åŠŸèƒ½</span>
    <span class="hljs-attr">derive</span>: <span class="hljs-function">(<span class="hljs-params">get, p</span>) =&gt;</span> ({    <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
      <span class="hljs-attr">fullName</span>: <span class="hljs-string">`<span class="hljs-subst">${get(p).firstName}</span> <span class="hljs-subst">${get(p).lastName}</span>`</span>.<span class="hljs-title function_">trim</span>()
    })
  }
)
store.<span class="hljs-title function_">persist</span>(<span class="hljs-string">'user-form'</span>)   <span class="hljs-comment">// æŒä¹…åŒ–</span>

<span class="hljs-comment">// â‘¡ ç›´æ¥ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Form</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">const</span> derived = store.<span class="hljs-property">derived</span>.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{snap.value.firstName}</span>
             <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> store.value.firstName = e.target.value} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å…¨åï¼š{derived.fullName}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> snap.undo()}&gt;æ’¤é”€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-13">ä»£ç é‡å¯¹æ¯”</h3>





























<table><thead><tr><th>ç»´åº¦</th><th align="center">åŸç‰ˆ</th><th align="center">å¢å¼ºç‰ˆ</th><th align="center">å‡å°‘</th></tr></thead><tbody><tr><td><strong>æ€»è¡Œæ•°</strong></td><td align="center">~35 è¡Œ</td><td align="center">~18 è¡Œ</td><td align="center"><strong>48%</strong></td></tr><tr><td><strong>éœ€è¦å®‰è£…çš„åŒ…</strong></td><td align="center">3 ä¸ª</td><td align="center">1 ä¸ª</td><td align="center"><strong>66%</strong></td></tr><tr><td><strong>æ¥å…¥æ­¥éª¤</strong></td><td align="center">5 æ­¥</td><td align="center">1 æ­¥</td><td align="center"><strong>80%</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-14">5. è¯»å†™é“å¾‹</h2>
<blockquote>
<p><strong>è®°ä½ä¸€å¥è¯ï¼šè¯»ç”¨ snapï¼Œå†™ç”¨ storeã€‚</strong> è¿™ä¸æ˜¯ä»£ç é£æ ¼ï¼Œæ˜¯å“åº”å¼ç³»ç»Ÿçš„ç¡¬æ€§è¦æ±‚ã€‚</p>
</blockquote>
<h3 data-id="heading-15">ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªè§„åˆ™ï¼Ÿ</h3>
<p>Valtio çš„å“åº”å¼ä¾èµ– React çš„ <code>useSnapshot</code> æ¥æ”¶é›†"è°ç”¨äº†å“ªäº›å­—æ®µ"ã€‚ç›´æ¥è¯» <code>store.xxx</code> ä¸ä¼šè§¦å‘è¿™ä¸ªæ”¶é›†æœºåˆ¶ï¼Œç»„ä»¶å°±ä¸ä¼šåœ¨æ•°æ®å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šè¯» store ä¸ä¼šè§¦å‘é‡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Bad</span>(<span class="hljs-params"/>) {
  store.<span class="hljs-title function_">useSnapshot</span>()  <span class="hljs-comment">// è™½ç„¶è°ƒäº† hookï¼Œä½†æ²¡ç”¨è¿”å›å€¼</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{store.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>  <span class="hljs-comment">// è¯»çš„æ˜¯ proxyï¼Œä¸æ˜¯ snap</span>
  <span class="hljs-comment">// ç»“æœï¼šcount å˜äº†ï¼Œé¡µé¢ä¸æ›´æ–°</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šè¯» snapï¼Œå†™ store</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Good</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{snap.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>  {/* è¯» snap */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> store.set('count', snap.count + 1)}&gt;  {/* å†™ store */}
        +1
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-16">å¸¦å†å²åŠŸèƒ½æ—¶çš„è§„åˆ™</h3>
<p>å¦‚æœå¼€å¯äº† <code>history</code> é…ç½®ï¼ŒçŠ¶æ€ä¼šè¢«åŒ…åœ¨ <code>.value</code> é‡Œï¼š</p>

























<table><thead><tr><th>æ“ä½œ</th><th>å†™æ³•</th></tr></thead><tbody><tr><td><strong>è¯»å½“å‰å€¼</strong></td><td><code>snap.value.firstName</code></td></tr><tr><td><strong>å†™å…¥æ–°å€¼</strong></td><td><code>store.value.firstName = 'Alice'</code></td></tr><tr><td><strong>æ’¤é”€</strong></td><td><code>snap.undo()</code></td></tr><tr><td><strong>é‡åš</strong></td><td><code>snap.redo()</code></td></tr></tbody></table>
<h3 data-id="heading-17">ç”¨ç±»å‹ä¿è¯ä¸çŠ¯é”™</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">EmpStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>

<span class="hljs-keyword">const</span> initialState = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">''</span> }
<span class="hljs-keyword">type</span> <span class="hljs-title class_">State</span> = <span class="hljs-keyword">typeof</span> initialState

<span class="hljs-comment">// å­ç»„ä»¶åªä¾èµ–è¿™ä¸ªç±»å‹ï¼ŒTypeScript ä¼šå¼ºåˆ¶ä½ ç”¨ store çš„æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Store</span> = <span class="hljs-title class_">EmpStore</span>&lt;<span class="hljs-title class_">State</span>&gt;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ChildComponent</span>(<span class="hljs-params">{ store }: { store: Store }</span>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-comment">// snap.count = 1  // âŒ TypeScript æŠ¥é”™ï¼šsnap æ˜¯åªè¯»çš„</span>
  store.<span class="hljs-title function_">set</span>(<span class="hljs-string">'count'</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment">// âœ… å¿…é¡»é€šè¿‡ store çš„æ–¹æ³•</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-18">6. å†…å»ºæ­¦å™¨åº“</h2>
<p><code>createStore</code> / <code>useStore</code> è¿”å›çš„å¯¹è±¡æœ‰ <strong>17 ä¸ªæ–¹æ³•</strong>ï¼Œåˆ†å››å¤§ç±»ï¼š</p>
<h3 data-id="heading-19">ğŸ“– è¯»å–ç±»ï¼ˆ3 ä¸ªï¼‰</h3>

























<table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>useSnapshot()</code></td><td>ç»„ä»¶å†…è¯»å–æ•°æ®ï¼ˆHookï¼‰</td><td><code>const snap = store.useSnapshot()</code></td></tr><tr><td><code>getSnapshot()</code></td><td>éç»„ä»¶åœºæ™¯è¯»å–ï¼ˆå¦‚å›è°ƒï¼‰</td><td><code>console.log(store.getSnapshot())</code></td></tr><tr><td><code>toJSON()</code></td><td>åºåˆ—åŒ–ä¸ºçº¯å¯¹è±¡</td><td><code>const data = store.toJSON()</code></td></tr></tbody></table>
<h3 data-id="heading-20">âœï¸ å†™å…¥ç±»ï¼ˆ6 ä¸ªï¼‰</h3>








































<table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>set(key, value)</code></td><td>æ”¹å•ä¸ªå­—æ®µ</td><td><code>store.set('count', 10)</code></td></tr><tr><td><code>update(partial)</code></td><td>æ‰¹é‡æ”¹å¤šä¸ªå­—æ®µ</td><td><code>store.update({ count: 10, name: 'Alice' })</code></td></tr><tr><td><code>setNested(path, value)</code></td><td>æ”¹æ·±å±‚è·¯å¾„</td><td><code>store.setNested('user.address.city', 'åŒ—äº¬')</code></td></tr><tr><td><code>delete(key)</code></td><td>åˆ é™¤æŸä¸ªå­—æ®µ</td><td><code>store.delete('tempData')</code></td></tr><tr><td><code>reset(state?)</code></td><td>é‡ç½®ä¸ºåˆå§‹çŠ¶æ€</td><td><code>store.reset()</code></td></tr><tr><td><code>fromJSON(json)</code></td><td>ä»å¯¹è±¡æ¢å¤çŠ¶æ€</td><td><code>store.fromJSON(savedData)</code></td></tr></tbody></table>
<h3 data-id="heading-21">ğŸ‘‚ è®¢é˜…ç±»ï¼ˆ3 ä¸ªï¼‰</h3>

























<table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>subscribe(fn)</code></td><td>ç›‘å¬æ‰€æœ‰å˜åŒ–</td><td><code>store.subscribe(() =&gt; console.log('å˜äº†'))</code></td></tr><tr><td><code>subscribeKey(key, fn)</code></td><td>åªç›‘å¬æŸä¸ªå­—æ®µ</td><td><code>store.subscribeKey('count', val =&gt; ...)</code></td></tr><tr><td><code>subscribeKeys(keys, fn)</code></td><td>ç›‘å¬å¤šä¸ªå­—æ®µ</td><td><code>store.subscribeKeys(['a', 'b'], ...)</code></td></tr></tbody></table>
<h3 data-id="heading-22">ğŸ”§ å·¥å…·ç±»ï¼ˆ5 ä¸ªï¼‰</h3>



































<table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>ref(value)</code></td><td>æ ‡è®°ä¸ºéå“åº”å¼ï¼ˆå¦‚ DOMï¼‰</td><td><code>store.set('dom', store.ref(divElement))</code></td></tr><tr><td><code>batch(fn)</code></td><td>æ‰¹é‡æ›´æ–°ï¼Œåªè§¦å‘ä¸€æ¬¡æ¸²æŸ“</td><td><code>store.batch(() =&gt; { ... })</code></td></tr><tr><td><code>clone()</code></td><td>æ·±æ‹·è´å½“å‰çŠ¶æ€</td><td><code>const copy = store.clone()</code></td></tr><tr><td><code>persist(key)</code></td><td>å¼€å¯ localStorage æŒä¹…åŒ–</td><td><code>store.persist('my-data')</code></td></tr><tr><td><code>debug()</code></td><td>åœ¨æ§åˆ¶å°æ‰“å°æ¯æ¬¡å˜æ›´</td><td><code>store.debug()</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">7. å…¨å±€ vs å±€éƒ¨</h2>
<h3 data-id="heading-24">ä»€ä¹ˆæ—¶å€™ç”¨ <code>createStore</code>ï¼ˆå…¨å±€å•ä¾‹ï¼‰ï¼Ÿ</h3>
<p><strong>ç‰¹å¾ï¼š</strong> æ•°æ®éœ€è¦è·¨ç»„ä»¶å…±äº«ï¼Œæ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªæœ‰ä¸€ä»½</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li>å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</li>
<li>ä¸»é¢˜é…ç½®ï¼ˆæ·±è‰²/æµ…è‰²æ¨¡å¼ï¼‰</li>
<li>å…¨å±€åŠ è½½çŠ¶æ€</li>
<li>è´­ç‰©è½¦æ•°æ®</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å•ç‹¬æ–‡ä»¶é‡Œåˆ›å»º</span>
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> themeStore = <span class="hljs-title function_">createStore</span>({
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">primaryColor</span>: <span class="hljs-string">'#1890ff'</span>
})

<span class="hljs-comment">// ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = themeStore.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">background:</span> <span class="hljs-attr">snap.primaryColor</span> }}&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-25">ä»€ä¹ˆæ—¶å€™ç”¨ <code>useStore</code>ï¼ˆæ¯å®ä¾‹ç‹¬ç«‹ï¼‰ï¼Ÿ</h3>
<p><strong>ç‰¹å¾ï¼š</strong> æ¯ä¸ªç»„ä»¶å®ä¾‹éœ€è¦è‡ªå·±çš„ç‹¬ç«‹çŠ¶æ€ï¼Œäº’ä¸å¹²æ‰°</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li>è¡¨å•ï¼ˆé¡µé¢ä¸Šå¯èƒ½æœ‰å¤šä¸ªè¡¨å•ï¼‰</li>
<li>ä»£ç ç¼–è¾‘å™¨ï¼ˆæ¯ä¸ª Tab ä¸€ä¸ªç¼–è¾‘å™¨ï¼‰</li>
<li>ç”»æ¿å·¥å…·ï¼ˆå¤šç”»å¸ƒåœºæ™¯ï¼‰</li>
<li>è®¡æ•°å™¨ç»„ä»¶ï¼ˆåŒé¡µé¢å¤šä¸ªå®ä¾‹ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">FormBlock</span>(<span class="hljs-params">{ initialLabel }: { initialLabel: string }</span>) {
  <span class="hljs-comment">// æ¯ä¸ª &lt;FormBlock&gt; å®ä¾‹éƒ½æœ‰è‡ªå·±çš„ store</span>
  <span class="hljs-keyword">const</span> [snap, store] = <span class="hljs-title function_">useStore</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">label</span>: initialLabel })
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{snap.label}: {snap.count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> store.set('count', snap.count + 1)}&gt;
        +1
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> store.reset()}&gt;é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// ä¸¤ä¸ªå®ä¾‹ï¼ŒçŠ¶æ€å®Œå…¨éš”ç¦»</span>
&lt;<span class="hljs-title class_">FormBlock</span> initialLabel=<span class="hljs-string">"è¡¨å• A"</span> /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FormBlock</span> <span class="hljs-attr">initialLabel</span>=<span class="hljs-string">"è¡¨å• B"</span> /&gt;</span></span>
</code></pre>
<h3 data-id="heading-26">æƒ°æ€§åˆå§‹åŒ–ï¼ˆé€‚åˆæ˜‚è´µè®¡ç®—ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// ä¼ å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰æ‰§è¡Œ</span>
<span class="hljs-selector-tag">const</span> <span class="hljs-selector-attr">[snap, store]</span> = <span class="hljs-selector-tag">useStore</span>(() =&gt; ({
  <span class="hljs-attribute">data</span>: <span class="hljs-built_in">expensiveComputation</span>(),  <span class="hljs-comment">// åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶ç®—ä¸€æ¬¡</span>
  <span class="hljs-attribute">timestamp</span>: Date.<span class="hljs-built_in">now</span>()
}))
</code></pre>
<hr/>
<h2 data-id="heading-27">8. å¾®å‰ç«¯åœºæ™¯</h2>
<h3 data-id="heading-28">ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜</h3>





















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td><strong>å…¨å±€å•ä¾‹</strong></td><td>å­åº”ç”¨å’Œä¸»åº”ç”¨ç‰ˆæœ¬ä¸ä¸€è‡´å°±ç‚¸ï¼Œæ„å»ºé¡ºåºæœ‰ä¾èµ–</td></tr><tr><td><strong>äº‹ä»¶æ€»çº¿</strong></td><td>ç±»å‹å¼±ï¼Œè°ƒè¯•å›°éš¾ï¼Œè¾¹ç•Œä¸æ¸…æ™°</td></tr><tr><td><strong>postMessage</strong></td><td>åªèƒ½ä¼ åºåˆ—åŒ–æ•°æ®ï¼Œä¸¢å¤±ç±»å‹å’Œæ–¹æ³•</td></tr></tbody></table>
<h3 data-id="heading-29">@empjs/valtio çš„æ–¹æ¡ˆï¼šå½“æ™®é€š prop ä¼ </h3>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> store æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¯ä»¥åƒä»»ä½• React props ä¸€æ ·ä¼ é€’</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ===== å…±äº«ç±»å‹å®šä¹‰ï¼ˆæ”¾åœ¨ç‹¬ç«‹çš„ npm åŒ…é‡Œï¼‰ =====</span>
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">EmpStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> initialState = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'shared'</span>, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">State</span> = <span class="hljs-keyword">typeof</span> initialState
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SharedStore</span> = <span class="hljs-title class_">EmpStore</span>&lt;<span class="hljs-title class_">State</span>&gt;

<span class="hljs-comment">// ===== ä¸»åº”ç”¨ï¼ˆä¸»æœºï¼‰ =====</span>
<span class="hljs-keyword">import</span> { useStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@empjs/valtio'</span>
<span class="hljs-keyword">import</span> { initialState, <span class="hljs-keyword">type</span> <span class="hljs-title class_">SharedStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@my-company/shared-types'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RemoteChild</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'remote-app/Child'</span>  <span class="hljs-comment">// Module Federation</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Host</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [snap, store] = useStore&lt;<span class="hljs-title class_">State</span>&gt;(initialState)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä¸»åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸»åº”ç”¨çš„è®¡æ•°ï¼š{snap.count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      {/* åƒæ™®é€š prop ä¸€æ ·ä¼ ç»™å­åº”ç”¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">RemoteChild</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// ===== å­åº”ç”¨ï¼ˆç‹¬ç«‹æ„å»ºï¼Œç‹¬ç«‹éƒ¨ç½²ï¼‰ =====</span>
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">SharedStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@my-company/shared-types'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">RemoteChild</span>(<span class="hljs-params">{ store }: { store: SharedStore }</span>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çœ‹åˆ°çš„ä¸»åº”ç”¨æ•°æ®ï¼š{snap.count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> store.set('count', snap.count + 1)}&gt;
        å­åº”ç”¨ä¹Ÿèƒ½æ”¹
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-30">ä¸ºä»€ä¹ˆè¿™æ ·å¥½ï¼Ÿ</h3>

























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é›¶è€¦åˆ</strong></td><td>å­åº”ç”¨ä¸éœ€è¦çŸ¥é“ä¸»åº”ç”¨çš„è¿è¡Œæ—¶ï¼Œåªä¾èµ–ç±»å‹å®šä¹‰</td></tr><tr><td><strong>ç±»å‹å®‰å…¨</strong></td><td>TypeScript å…¨ç¨‹ä¿æŠ¤ï¼Œæ”¹äº†ç±»å‹å®šä¹‰ï¼ŒåŒæ–¹éƒ½èƒ½æ„ŸçŸ¥</td></tr><tr><td><strong>è°ƒè¯•ç®€å•</strong></td><td>å°±æ˜¯æ™®é€šçš„ propsï¼ŒReact DevTools ç›´æ¥èƒ½çœ‹</td></tr><tr><td><strong>ç‰ˆæœ¬ç‹¬ç«‹</strong></td><td>ä¸»åº”ç”¨å‡çº§ä¸å½±å“å­åº”ç”¨ï¼Œå­åº”ç”¨å¯ä»¥ç‹¬ç«‹å‘ç‰ˆ</td></tr></tbody></table>
<h3 data-id="heading-31">çŠ¶æ€å±‚æ¬¡ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-css" lang="css">ä¸»åº”ç”¨
â”œâ”€â”€ å…¨å±€ storeï¼ˆcreateStoreï¼‰
â”‚   â”œâ”€â”€ ç”¨æˆ·ä¿¡æ¯
â”‚   â””â”€â”€ ä¸»é¢˜é…ç½®
â”‚       â””â”€â”€ é€šè¿‡ props ä¼ ç»™å­åº”ç”¨ â”€â”€â”
â”‚                                   â†“
â””â”€â”€ å­åº”ç”¨ <span class="hljs-selector-tag">A</span>                     æ¥æ”¶ store
    â”œâ”€â”€ ä½¿ç”¨ä¸»åº”ç”¨çš„ storeï¼ˆå…±äº«çŠ¶æ€ï¼‰
    â””â”€â”€ è‡ªå·±çš„ storeï¼ˆuseStoreï¼‰
        â”œâ”€â”€ è¡¨å•æ•°æ®ï¼ˆå±€éƒ¨ï¼‰
        â””â”€â”€ ç¼–è¾‘å™¨çŠ¶æ€ï¼ˆå±€éƒ¨ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-32">9. é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-33">âŒ é”™è¯¯ 1ï¼šè¯» store è€Œä¸æ˜¯ snap</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Bad</span>(<span class="hljs-params"/>) {
  store.<span class="hljs-title function_">useSnapshot</span>()  <span class="hljs-comment">// è™½ç„¶è°ƒäº†ï¼Œä½†æ²¡ç”¨è¿”å›å€¼</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{store.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>  <span class="hljs-comment">// ä¸ä¼šè§¦å‘é‡æ¸²æŸ“</span>
}

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Good</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> snap = store.<span class="hljs-title function_">useSnapshot</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{snap.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé”™ï¼š</strong> Valtio çš„å“åº”å¼æœºåˆ¶ä¾èµ– <code>useSnapshot</code> çš„è¿”å›å€¼æ¥è¿½è¸ª"è°è¯»äº†å“ªäº›å­—æ®µ"ï¼Œç›´æ¥è¯» <code>store</code> ä¸ä¼šè¢«è¿½è¸ªã€‚</p>
<h3 data-id="heading-34">âŒ é”™è¯¯ 2ï¼šé”®åå’Œæ–¹æ³•é‡å</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// é”™è¯¯ï¼šé”®åå« setï¼Œå’Œ store.set() å†²çª</span>
<span class="hljs-keyword">const</span> store = createStore({
  <span class="hljs-keyword">set</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(),  <span class="hljs-comment">// âŒ å†²çªï¼</span>
  update: <span class="hljs-number">123</span>      <span class="hljs-comment">// âŒ ä¹Ÿå†²çªï¼</span>
})

<span class="hljs-comment">// æ­£ç¡®ï¼šæ¢ä¸ªåå­—</span>
<span class="hljs-keyword">const</span> store = createStore({
  tagSet: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(),  <span class="hljs-comment">// âœ…</span>
  version: <span class="hljs-number">123</span>        <span class="hljs-comment">// âœ…</span>
})
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé”™ï¼š</strong> <code>store.set</code> / <code>store.update</code> æ˜¯å†…å»ºæ–¹æ³•ï¼Œç”¨åŒåé”®ä¼šè¢«è¦†ç›–ã€‚</p>
<h3 data-id="heading-35">âŒ é”™è¯¯ 3ï¼šä¼ é proxy å¯¹è±¡ç»™ useSnapshot</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">plainObj</span> = { count: <span class="hljs-number">0</span> }
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">snap</span> = <span class="hljs-title function_ invoke__">useSnapshot</span>(plainObj)  <span class="hljs-comment">// âŒ æŠ¥é”™</span>

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">store</span> = <span class="hljs-title function_ invoke__">createStore</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">snap</span> = store.<span class="hljs-title function_ invoke__">useSnapshot</span>()  <span class="hljs-comment">// âœ…</span>
</code></pre>
<p><strong>æŠ¥é”™ä¿¡æ¯ï¼š</strong> "Please use proxy object"</p>
<h3 data-id="heading-36">âŒ é”™è¯¯ 4ï¼šåœ¨ derive é‡Œå†™å‰¯ä½œç”¨</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">const</span> store = createStore(
  { a: <span class="hljs-number">1</span>, b: <span class="hljs-number">2</span> },
  {
    derive: (<span class="hljs-keyword">get</span>, p) =&gt; {
      console.log(<span class="hljs-string">'è®¡ç®—ä¸­'</span>)  <span class="hljs-comment">// âŒ å‰¯ä½œç”¨</span>
      fetch(<span class="hljs-string">'/api'</span>)          <span class="hljs-comment">// âŒ å¼‚æ­¥è¯·æ±‚</span>
      <span class="hljs-keyword">return</span> { sum: <span class="hljs-keyword">get</span>(p).a + <span class="hljs-keyword">get</span>(p).b }
    }
  }
)

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">const</span> store = createStore(
  { a: <span class="hljs-number">1</span>, b: <span class="hljs-number">2</span> },
  {
    derive: (<span class="hljs-keyword">get</span>, p) =&gt; ({
      sum: <span class="hljs-keyword">get</span>(p).a + <span class="hljs-keyword">get</span>(p).b  <span class="hljs-comment">// âœ… çº¯è®¡ç®—</span>
    })
  }
)
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé”™ï¼š</strong> <code>derive</code> ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼ˆæ¯æ¬¡ä¾èµ–å˜åŒ–éƒ½è°ƒï¼‰ï¼Œå‰¯ä½œç”¨ä¼šé‡å¤æ‰§è¡Œä¸”éš¾ä»¥æ§åˆ¶ã€‚</p>
<h3 data-id="heading-37">âŒ é”™è¯¯ 5ï¼šå¿˜è®° .valueï¼ˆå¼€å¯å†å²åŠŸèƒ½æ—¶ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¼€å¯å†å²åï¼ŒçŠ¶æ€è¢«åŒ…åœ¨ .value é‡Œ</span>
<span class="hljs-type">const</span> store = <span class="hljs-built_in">createStore</span>({ count: <span class="hljs-number">0</span> }, { history: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-type">const</span> snap = store.<span class="hljs-built_in">useSnapshot</span>()
console.<span class="hljs-built_in">log</span>(snap.count)  <span class="hljs-comment">// âŒ undefined</span>

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-type">const</span> snap = store.<span class="hljs-built_in">useSnapshot</span>()
console.<span class="hljs-built_in">log</span>(snap.value.count)  <span class="hljs-comment">// âœ…</span>
store.value.count++             <span class="hljs-comment">// âœ… å†™å…¥ä¹Ÿè¦åŠ  .value</span>
</code></pre>
<hr/>
<h2 data-id="heading-38">10. å¿«é€Ÿå†³ç­–è¡¨</h2>























































<table><thead><tr><th>ä½ çš„åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td><strong>å…¨å±€é…ç½®ï¼ˆä¸»é¢˜/è¯­è¨€/ç”¨æˆ·ï¼‰</strong></td><td><code>createStore</code></td><td><code>const themeStore = createStore({ mode: 'light' })</code></td></tr><tr><td><strong>å¤šä¸ªç‹¬ç«‹è¡¨å•</strong></td><td><code>useStore</code></td><td><code>const [snap, store] = useStore({ name: '' })</code></td></tr><tr><td><strong>éœ€è¦æ’¤é”€/é‡åš</strong></td><td><code>createStore</code> + <code>history</code></td><td><code>createStore(init, { history: { limit: 50 } })</code></td></tr><tr><td><strong>éœ€è¦è®¡ç®—å±æ€§ï¼ˆå¦‚å…¨åï¼‰</strong></td><td><code>createStore</code> + <code>derive</code></td><td><code>createStore(init, { derive: (get, p) =&gt; ({ ... }) })</code></td></tr><tr><td><strong>éœ€è¦æœ¬åœ°æŒä¹…åŒ–</strong></td><td>ä»»æ„ store + <code>.persist()</code></td><td><code>store.persist('my-data-key')</code></td></tr><tr><td><strong>å¾®å‰ç«¯ï¼šä¸»åº”ç”¨ â†’ å­åº”ç”¨</strong></td><td>ä¸»åº”ç”¨ <code>useStore</code>ï¼Œprops ä¼ å…¥</td><td><code>&lt;RemoteChild store={store} /&gt;</code></td></tr><tr><td><strong>å¾®å‰ç«¯ï¼šå­åº”ç”¨å†…éƒ¨</strong></td><td>å­åº”ç”¨è‡ªè¡Œ <code>useStore</code></td><td>ä¸ä¸»åº”ç”¨å®Œå…¨éš”ç¦»</td></tr><tr><td><strong>æ‰¹é‡æ›´æ–°é¿å…å¤šæ¬¡æ¸²æŸ“</strong></td><td><code>store.batch()</code></td><td><code>store.batch(() =&gt; { store.set(...); store.set(...) })</code></td></tr><tr><td><strong>è¡¨å•å¤šæ¬¡æ”¹å€¼å¡é¡¿</strong></td><td><code>store.batch()</code></td><td>è¾“å…¥æ¡† onChange é‡ŒåŒ…ä¸€å±‚ batch</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-39">æ€»ç»“ï¼šä¸‰å¥è¯è®°ä½ @empjs/valtio</h2>
<ol>
<li><strong>åƒ Vue ä¸€æ ·å†™ React çŠ¶æ€</strong> â€”â€” <code>state.count++</code> å°±èƒ½è‡ªåŠ¨æ›´æ–° UI</li>
<li><strong>ä» 4~5 æ­¥ç®€åŒ–åˆ° 1 æ­¥</strong> â€”â€” å†å²ã€è®¡ç®—å±æ€§ã€æŒä¹…åŒ–éƒ½æ˜¯ä¸€è¡Œé…ç½®</li>
<li><strong>å¾®å‰ç«¯å‹å¥½</strong> â€”â€” store å½“æ™®é€š props ä¼ ï¼Œæ— éœ€å…¨å±€å•ä¾‹å’Œäº‹ä»¶æ€»çº¿</li>
</ol>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li>ğŸ“š å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvaltio.empjs.dev%2F" target="_blank" title="https://valtio.empjs.dev/" ref="nofollow noopener noreferrer">valtio.empjs.dev</a></li>
<li>ğŸ”§ API æ‰‹å†Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvaltio.empjs.dev%2Fmanual" target="_blank" title="https://valtio.empjs.dev/manual" ref="nofollow noopener noreferrer">valtio.empjs.dev/manual</a></li>
<li>ğŸ™ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FefoxTeam%2Femp%2Ftree%2Fmain%2Fpackages%2Fvaltio" target="_blank" title="https://github.com/efoxTeam/emp/tree/main/packages/valtio" ref="nofollow noopener noreferrer">@empjs/valtio</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šå››é¡¹æ ¸å¿ƒåŸåˆ™]]></title>    <link>https://juejin.cn/post/7601427909703860278</link>    <guid>https://juejin.cn/post/7601427909703860278</guid>    <pubDate>2026-02-02T01:33:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601427909703860278" data-draft-id="7601387539335381028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šå››é¡¹æ ¸å¿ƒåŸåˆ™"/> <meta itemprop="keywords" content="è¿ç»´,æ¶æ„,è‡ªåŠ¨åŒ–è¿ç»´"/> <meta itemprop="datePublished" content="2026-02-02T01:33:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€å®å·´äº¤çš„éº»åŒª"/> <meta itemprop="url" content="https://juejin.cn/user/4218156332615384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šå››é¡¹æ ¸å¿ƒåŸåˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4218156332615384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€å®å·´äº¤çš„éº»åŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:33:59.000Z" title="Mon Feb 02 2026 01:33:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸ºä»€ä¹ˆè¦è¿›è¡Œå¼‚å¸¸æ¶æ„è®¾è®¡ï¼Ÿå¼‚å¸¸æœ‰ä»€ä¹ˆä»·å€¼ï¼Ÿ</strong></p>
<blockquote>
<p>è´«ç©·çš„äººä¸ä¼šèŠ±é’±è´­ä¹°ä¸ªäººåŒ»ç–—ä¿é™©å’Œæ„å¤–ä¿é™©ï¼Œç»å¤§å¤šæ•°ä¸­å°ä¼ä¸šä¹Ÿä¸æ„¿èŠ±è´¹èµ„é‡‘å’Œèµ„æºå»è®¾è®¡å’Œç»´æŠ¤ä¸€ä¸ªå®Œå–„çš„å¼‚å¸¸æ¶æ„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒæŠ—é£é™©èƒ½åŠ›éå¸¸å¼±ï¼Œã€Œä¸€å¤œå›åˆ°è§£æ”¾å‰ã€çš„äº‹å±¡è§ä¸é²œã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å½“ç„¶å¸Œæœ›è½¯ä»¶ç³»ç»Ÿæ˜¯æ­£å¸¸å®‰å…¨è¿è¡Œçš„ï¼Œä½†æ ¹æ®<strong>å¢¨è²å®šå¾‹ï¼šå‡¡æ˜¯å¯èƒ½å‡ºé”™çš„äº‹ï¼Œå°±ä¸€å®šä¼šå‡ºé”™ã€‚</strong></p>
<p>ç¼–å†™äº†10ä¸‡è¡Œä»£ç ï¼Œä¹è§‚æƒ…å†µä¸‹ï¼Œç”¨æˆ·æ‡‚äº‹ä»¥åŠä»£ç é€»è¾‘åƒç²¾å¯†ä»ªå™¨ä¸€æ ·è¿è½¬ï¼ŒæœŸæœ›ä¼šäº§ç”Ÿ100ä¸‡å…ƒçš„ç»æµæ”¶ç›Šã€‚</p>
<p>ç„¶è€Œå¾€å¾€ç°å®æ˜¯ï¼Œä¸€ä¸ªå°çš„é”™è¯¯å°†ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œå‰åŠŸå°½å¼ƒï¼Œç›´æ¥ä¸¢å¤±100ä¸‡å…ƒç”šè‡³æ›´å¤šçš„ç»æµæ”¶ç›Šã€‚æ›´å‡†ç¡®åœ°ï¼ŒæŸå¤±ä¸ç³»ç»Ÿæ•…éšœæ—¶é—´æˆæ­£æ¯”ï¼Œä¸è¿‡å¿«é€ŸæŠ¢é€šçš„æ•…éšœå¯èƒ½ä¸ä¼šæœ‰æŸå¤±ã€‚</p>
<p>å› æ­¤ï¼Œå¼‚å¸¸å¤„ç†æ˜¯ä¸ºäº†<strong>æé«˜ç³»ç»Ÿçš„ç¨³å¥æ€§å’Œå¯ç»´æŠ¤æ€§</strong>ã€‚ å¦ä¸€æ–¹é¢ï¼Œä¹Ÿä¸èƒ½å› å™åºŸé£Ÿï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚</p>
<ul>
<li>è¾ƒå¤§æ¦‚ç‡å‘ç”Ÿçš„å¼‚å¸¸ï¼Œæå‰åšå¥½å‡†å¤‡ï¼Œä¾‹å¦‚ï¼Œè¾“å…¥æ ¡éªŒã€å‚æ•°æ£€æŸ¥ã€ç©ºæŒ‡é’ˆæ£€æŸ¥ç­‰ã€‚</li>
<li>å°æ¦‚ç‡å‘ç”Ÿçš„å¼‚å¸¸æˆ–éš¾ä»¥é¢„çŸ¥çš„å¼‚å¸¸ï¼Œä¸æ—¶é—´èµ›è·‘ï¼Œå…ˆäºç”¨æˆ·å‘ç°ï¼Œå¿«é€ŸæŠ¢é€šï¼Œå°†æŸå¤±é™åˆ°æœ€ä½ã€‚</li>
</ul>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨è½¯ä»¶å¼€å‘æŠ€æœ¯åœˆï¼Œè¯„ä»·ä¸€ä¸ªç¨‹åºå‘˜æ˜¯å¦èµ„æ·±ï¼Œä¸çœ‹ä»–å†™ä¸šåŠ¡é€»è¾‘æœ‰å¤šå¿«ï¼Œè€Œçœ‹ä»–å¤„ç†å¼‚å¸¸æœ‰å¤šä¼˜é›…ã€‚å¾ˆå¤šå¼€å‘è€…ä¹ æƒ¯äº <code>try-catch</code> ä¸€æŠŠæ¢­ï¼Œæˆ–è€…æ»¡å±çš„ <code>e.printStackTrace()</code>ï¼Œè¿™ä¸ä»…è®©è°ƒè¯•å˜æˆå™©æ¢¦ï¼Œæ›´å¯èƒ½åœ¨å…³é”®æ—¶åˆ»æ‹–å®æ•´ä¸ªç³»ç»Ÿã€‚å¼‚å¸¸æ¶æ„è®¾è®¡ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹ç³»ç»Ÿç¨³å¥æ€§çš„æœ€åä¸€é“é˜²çº¿ã€‚</p>
<p>åŸºäºå®æˆ˜ç»éªŒï¼Œæˆ‘æ€»ç»“äº†å¼‚å¸¸æ¶æ„è®¾è®¡çš„å››é¡¹æ ¸å¿ƒåŸåˆ™ï¼š<strong>é˜²å¾¡æ€§ç¼–ç¨‹ã€Fail-Fastã€ç”¨æˆ·å‹å¥½ã€å¯è§‚æµ‹æ€§</strong>ã€‚</p>
<p>æ³¨ï¼šä¸ºä»€ä¹ˆæ˜¯å››é¡¹ï¼Ÿå› ä¸ºå¤šäº†è®°ä¸ä½ï¼Œ8æ¡åŸåˆ™ã€10æ¡åŸåˆ™ç­‰äºæ²¡æœ‰åŸåˆ™ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»è¯¦ç»†ä»‹ç»è¿™å››é¡¹æ ¸å¿ƒåŸåˆ™ï¼Œè¯·ç‰¢è®°äºå¿ƒï¼Œè¿™æ˜¯å¼‚å¸¸æ¶æ„è®¾è®¡çš„çº²é¢†æ€§æŒ‡å¯¼æ€æƒ³ã€‚</p>
<h2 data-id="heading-1">é˜²å¾¡æ€§ç¼–ç¨‹</h2>
<p>é˜²å¾¡æ€§ç¼–ç¨‹ï¼ˆDefensive Programmingï¼‰çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>å‡è®¾æ‰€æœ‰çš„è¾“å…¥éƒ½æ˜¯æ¶æ„çš„ï¼Œå‡è®¾å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ä¸€å®šä¼šå‘ç”Ÿã€‚</strong></p>
<p>åœ¨ Java ç”Ÿæ€ä¸­ï¼Œå—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰å°±æ˜¯è¿™ç§â€œå¥‘çº¦å¼ç¼–ç¨‹â€çš„ä½“ç°ã€‚è€Œåœ¨ Python ç­‰åŠ¨æ€è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬åˆ™éœ€è¦é€šè¿‡æ˜¾å¼çš„å‚æ•°æ ¡éªŒæ¥å®ç°ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€ç»´</strong>ï¼šä¸è¦ç­‰åˆ°ä»£ç è¿è¡Œåˆ°ä¸šåŠ¡æ ¸å¿ƒåŒºæ‰å»å‘ç°é—®é¢˜ã€‚</li>
<li><strong>è®¾è®¡å»ºè®®</strong>ï¼šåœ¨å…¥å£å¤„è¿›è¡Œä¸¥æ ¼çš„ç©ºå€¼æ£€æŸ¥ã€è¾¹ç•Œæ ¡éªŒå’Œé€»è¾‘å‰ç½®åˆ¤æ–­ã€‚è®°ä½ï¼Œä½ å¯¹ä»£ç è¶Šâ€œä¸ä¿¡ä»»â€ï¼Œç³»ç»Ÿåè€Œè¶Šå€¼å¾—ä¿¡ä»»ã€‚</li>
</ul>
<h2 data-id="heading-2">Fail-Fast</h2>
<p><strong>â€œå¿«é€Ÿå¤±è´¥â€æ˜¯é«˜æ€§èƒ½æ¶æ„çš„æ ¸å¿ƒåŸåˆ™ã€‚</strong> å¼‚å¸¸æŠ›å‡ºçš„æ—¶æœºï¼Œå®œæ—©ä¸å®œè¿Ÿã€‚å¦‚æœä¸€ä¸ªè¯·æ±‚æ³¨å®šè¦å¤±è´¥ï¼Œé‚£å°±è®©å®ƒåœ¨æœ€å¤–å±‚ï¼ˆå¦‚æ ¡éªŒå±‚ï¼‰å°±å®£å‘Šç»ˆç»“ã€‚å¦‚æœå¼‚å¸¸è¢«å¸¦å…¥äº†æ·±å±‚ä¸šåŠ¡ä»£ç ï¼Œç”šè‡³è¿›å…¥äº†æ•°æ®åº“äº‹åŠ¡ï¼Œå¤„ç†æˆæœ¬å°†å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚</p>
<p><strong>å¼‚å¸¸å±‚çº§</strong>ï¼š</p>
<ol>
<li><strong>å®¢æˆ·ç«¯å¼‚å¸¸</strong>ï¼šå‚æ•°æ ¡éªŒã€èº«ä»½è®¤è¯ï¼ˆAuthï¼‰ã€‚åº”åœ¨æœ€å¤–å±‚æ‹¦æˆªã€‚</li>
<li><strong>ä¸šåŠ¡å¼‚å¸¸</strong>ï¼šé€»è¾‘ä¸ç¬¦ï¼ˆå¦‚ä½™é¢ä¸è¶³ã€ç”¨æˆ·ä¸å­˜åœ¨ï¼‰ã€‚è¿™æ˜¯é¢„è§çš„ä¸šåŠ¡æµè½¬ã€‚</li>
<li><strong>ç³»ç»Ÿå¼‚å¸¸</strong>ï¼šSQL æŠ¥é”™ã€RPC è¶…æ—¶ã€‚è¿™ç±»ä¸å¯æ§å› ç´ éœ€è¿›å…¥ç†”æ–­æœºåˆ¶ã€‚</li>
</ol>
<h2 data-id="heading-3">ç”¨æˆ·å‹å¥½</h2>
<p>åç«¯æŠ›å‡ºçš„å †æ ˆä¿¡æ¯ï¼ˆStackTraceï¼‰æ˜¯ç»™å¼€å‘è€…çœ‹çš„ï¼Œç»ä¸åº”è¯¥ç›´æ¥ä¸¢ç»™ç”¨æˆ·ã€‚å½“ç³»ç»ŸæŠ¥é”™æ—¶ï¼Œç”¨æˆ·çœ‹åˆ°çš„å¦‚æœæ˜¯ <code>NullPointerException</code> æˆ–ä¸€ä¸²æ•°æ®åº“æŠ¥é”™ï¼Œé™¤äº†ä¼šäº§ç”Ÿâ€œç³»ç»Ÿåäº†â€çš„æŒ«è´¥æ„Ÿï¼Œè¿˜å¯èƒ½æ³„éœ²æ•æ„Ÿçš„ä»£ç é€»è¾‘ã€‚</p>
<ul>
<li><strong>å¼‚å¸¸è½¬æ¢ï¼ˆMappingï¼‰</strong>ï¼šå»ºç«‹å®Œå–„çš„è½¬æ¢æœºåˆ¶ã€‚</li>
<li><strong>è¾“å…¥é”™è¯¯</strong>ï¼šæ˜ç¡®å‘ŠçŸ¥â€œå‚æ•°æ ¼å¼æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥â€ã€‚</li>
<li><strong>ç³»ç»Ÿå´©æºƒ</strong>ï¼šæç¤ºâ€œæœåŠ¡å™¨å¼€å°å·®äº†ï¼Œè¯·ç¨åé‡è¯•â€ã€‚</li>
</ul>
<h2 data-id="heading-4">å¯è§‚æµ‹æ€§</h2>
<p>å¾ˆå¤šå›¢é˜Ÿå–œæ¬¢â€œå…¨é‡è¿”å› HTTP 200â€ï¼Œå¹¶åœ¨ Body é‡Œç”¨è‡ªå®šä¹‰ <code>code</code> åŒºåˆ†é”™è¯¯ï¼Œè¿™å…¶å®æ˜¯å¯¹å¼‚å¸¸ç›‘æ§çš„ç ´åã€‚</p>
<h3 data-id="heading-5">å»ºè®®ä½¿ç”¨æ ‡å‡† HTTP Status</h3>
<p><strong>ä¾¿äºå¼‚å¸¸æ£€æµ‹</strong>ï¼šåŸºç¡€è®¾æ–½ï¼ˆNginxã€Prometheusã€ç½‘å…³ï¼‰å¤©ç„¶è¯†åˆ«çŠ¶æ€ç ã€‚è¿”å› 500 ä¼šè§¦å‘å‘Šè­¦æ›²çº¿ï¼Œè€Œè¿”å› 200 ä¼šæ©ç›–æ•…éšœã€‚</p>
<p><strong>é™ä½è®¤çŸ¥æˆæœ¬</strong>ï¼š401 ä»£è¡¨æœªç™»å½•ï¼Œ403 ä»£è¡¨æ— æƒï¼Œ429 ä»£è¡¨é™æµã€‚ç¨‹åºå‘˜æ— éœ€æŸ¥é˜…å„å›¢é˜Ÿç§æœ‰çš„â€œé”™è¯¯ç æ‰‹å†Œâ€ï¼Œå¯¹åä½œæåº¦å‹å¥½ã€‚</p>
<h3 data-id="heading-6">å¼‚å¸¸åœ¨ä½•æ—¶å‘æŒ¥ä»·å€¼ï¼Ÿ</h3>
<p><strong>ç¬¬ä¸€æ—¶é—´å‘ç°æ•…éšœ</strong>ï¼šåŸºäºå¼‚å¸¸çŠ¶æ€ç é…ç½®ç›‘æ§å‘Šè­¦ï¼Œåœ¨ç”¨æˆ·å¤§è§„æ¨¡æŠ•è¯‰å‰ä»‹å…¥ã€‚</p>
<p><strong>æ•…éšœè¯Šæ–­ä¸æŠ¢é€š</strong>ï¼šå‡ºç°é—®é¢˜åï¼Œé€šè¿‡å¼‚å¸¸æ—¥å¿—ä¸­çš„ TraceID å¿«é€Ÿåˆ†æï¼Œå‡†ç¡®åˆ¤æ–­æ˜¯æ•°æ®åº“æ…¢è¿˜æ˜¯ç¬¬ä¸‰æ–¹ API å®•æœºï¼Œå®ç°ç¬¬ä¸€æ—¶é—´æŠ¢é€šã€‚åœ¨äº‘åŸç”Ÿå¯è§‚æµ‹æ€§ç†å¿µä¸­ï¼Œç”šè‡³ä¸éœ€è¦åˆ†ææ—¥å¿—ï¼Œè€Œæ˜¯ç›´æ¥åŸºäºå¯è§‚æµ‹æ€§æŒ‡æ ‡æ¥è¿›è¡Œå¼‚å¸¸åˆ†æå’Œæ•…éšœè¯Šæ–­ã€‚</p>
<h2 data-id="heading-7">Python Flask å®æˆ˜æ¡ˆä¾‹</h2>
<p>ä¸‹é¢é€šè¿‡ä¸€æ®µ Flask ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•è½åœ°è¿™å››é¡¹åŸåˆ™ï¼Œè¿™å››é¡¹åŸåˆ™ä¹Ÿå­˜åœ¨ä¸€å®šçš„é‡å ï¼ˆç±»æ¯”äºå…³ç³»å‹æ•°æ®åº“ACIDï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify, request
<span class="hljs-keyword">import</span> logging

app = Flask(__name__)

<span class="hljs-comment"># é…ç½®æ—¥å¿—ï¼ˆå¯è§‚æµ‹æ€§ï¼šæ—¥å¿—è®°å½•ï¼‰</span>
logging.basicConfig(level=logging.INFO, <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s [ERROR] TraceID: %(module)s - %(message)s'</span>)

<span class="hljs-comment"># --- 1. é˜²å¾¡æ€§ç¼–ç¨‹ ---</span>
<span class="hljs-meta">@app.before_request</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_content_type</span>():
    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">'POST'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> request.is_json:
        <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"msg"</span>: <span class="hljs-string">"Content-Type å¿…é¡»ä¸º JSON"</span>}), <span class="hljs-number">415</span>

<span class="hljs-comment"># è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ï¼ˆç”¨äºå¿«é€Ÿå¤±è´¥ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-title class_ inherited__">Exception</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, message, status_code=<span class="hljs-number">400</span></span>):
        self.message = message
        self.status_code = status_code

<span class="hljs-comment"># --- 2. Fail-Fastï¼šé€»è¾‘å‰ç½® ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_from_db</span>(<span class="hljs-params">user_id</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_id:
        <span class="hljs-keyword">raise</span> BusinessException(<span class="hljs-string">"User ID ä¸èƒ½ä¸ºç©º"</span>, <span class="hljs-number">400</span>) <span class="hljs-comment"># ç«‹å³æŠ›å‡º</span>
  
    user = <span class="hljs-literal">None</span> <span class="hljs-comment"># æ¨¡æ‹ŸæŸ¥è¯¢</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
        <span class="hljs-keyword">raise</span> BusinessException(<span class="hljs-string">f"ç”¨æˆ· <span class="hljs-subst">{user_id}</span> ä¸å­˜åœ¨"</span>, <span class="hljs-number">404</span>)
    <span class="hljs-keyword">return</span> user

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/user/&lt;user_id&gt;'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">user_detail</span>(<span class="hljs-params">user_id</span>):
    user = get_user_from_db(user_id)
    <span class="hljs-keyword">return</span> jsonify(user)

<span class="hljs-comment"># --- 3 &amp; 4. ç”¨æˆ·å‹å¥½ä¸å¯è§‚æµ‹æ€§ ---</span>
<span class="hljs-meta">@app.errorhandler(<span class="hljs-params">Exception</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_exception</span>(<span class="hljs-params">e</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(e, BusinessException):
        <span class="hljs-comment"># ä¸šåŠ¡å¼‚å¸¸ï¼šè®°å½•è­¦å‘Šï¼Œè¿”å›ç‰¹å®šçŠ¶æ€ç </span>
        logging.warning(<span class="hljs-string">f"ä¸šåŠ¡å‘Šè­¦: <span class="hljs-subst">{e.message}</span>"</span>)
        <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"error_code"</span>: <span class="hljs-string">"BIZ_ERR"</span>, <span class="hljs-string">"msg"</span>: e.message}), e.status_code

    <span class="hljs-comment"># ç³»ç»Ÿå¼‚å¸¸ï¼šè®°å½•å®Œæ•´å †æ ˆï¼Œè§¦å‘å‘Šè­¦</span>
    logging.error(<span class="hljs-string">"ç³»ç»Ÿå´©æºƒ: "</span>, exc_info=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"error_code"</span>: <span class="hljs-string">"SYS_ERR"</span>, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>}), <span class="hljs-number">500</span>

</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>å¥½çš„å¼‚å¸¸å¤„ç†ï¼Œä¸æ˜¯ä¸ºäº†è®©ç¨‹åºâ€œä¸æŠ¥é”™â€ï¼Œè€Œæ˜¯ä¸ºäº†è®©é”™è¯¯å‘ç”Ÿå¾—<strong>æ¸…æ™°ã€ä½“é¢ä¸”å¯æ§</strong>ã€‚</p>
<ul>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>æ˜¯æ€åº¦ï¼›</li>
<li><strong>å¿«é€Ÿå¤±è´¥</strong>æ˜¯ç­–ç•¥ï¼›</li>
<li><strong>ç”¨æˆ·å‹å¥½</strong>æ˜¯ä¿®å…»ï¼›</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>æ˜¯ç”Ÿå‘½çº¿ã€‚</li>
</ul>
<p>åªæœ‰å®ˆä½è¿™å››é¡¹åŸåˆ™ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å¤æ‚çš„çº¿ä¸Šç¯å¢ƒé¢å‰ï¼Œä¿æŒä¸€ä»½â€œä¼˜é›…çš„é•‡å®šâ€ã€‚</p>
<h2 data-id="heading-9">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–è¿ç»´èµ„è®¯</h2>
<p>å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢ä½ çš„<strong>ç‚¹èµ</strong>ä¸<strong>æ”¶è—</strong>ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå‹å¥½äº¤æµã€‚</p>
<p>å¾®ä¿¡æœç´¢å…³æ³¨å…¬ä¼—å·ï¼š<strong>æŒç»­è¿ç»´</strong></p>
<h2 data-id="heading-10">é™„å½•</h2>
<h3 data-id="heading-11">å¼‚å¸¸æŸå¤±çš„æ•°å­¦è¡¨è¾¾</h3>
<p>ç»“åˆ<strong>æ•…éšœæŸå¤±ä¸æ•…éšœæŒç»­æ—¶é—´æ­£ç›¸å…³</strong>ã€<strong>å¿«é€ŸæŠ¢é€šï¼ˆæ•…éšœæ—¶é•¿ä½äºé˜ˆå€¼æ— æŸå¤±ï¼‰<strong>çš„æ ¸å¿ƒç‰¹å¾ï¼Œåˆ†</strong>åŸºç¡€ç‰ˆ</strong>ï¼ˆç®€æ´è¡¨è¾¾æ ¸å¿ƒå…³ç³»ï¼‰å’Œ<strong>ç²¾å‡†ç‰ˆ</strong>ï¼ˆå«é˜ˆå€¼ä¸æ¯”ä¾‹ç³»æ•°ï¼Œå·¥ç¨‹åŒ–åœºæ™¯é€‚ç”¨ï¼‰ä¸¤ç§å½¢å¼ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ° LaTeX æ–‡æ¡£ä¸­ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-12">åŸºç¡€ç‰ˆ</h4>
<p>é€‚ç”¨äºå®šæ€§/åŠå®šé‡è¡¨è¾¾ï¼Œæ˜ç¡®<strong>æŸå¤±ä»…åœ¨æ•…éšœæ—¶é•¿è¶…è¿‡æŠ¢é€šé˜ˆå€¼æ—¶äº§ç”Ÿï¼Œä¸”ä¸æ•…éšœæ—¶é•¿æ­£ç›¸å…³</strong>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mo>â‰¤</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>k</mi><mo>â‹…</mo><mi>t</mi><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mo>&gt;</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">L(t)=
\begin{cases}
0, &amp; t \leq t_0, \\
k \cdot t, &amp; t &gt; t_0,
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">0</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">t</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span/></span></span></span></span><span class="arraycolsep" style="width:1em;"/><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p><strong>ç¬¦å·è¯´æ˜</strong>ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>ï¼šæ•…éšœæ€»æŸå¤±ï¼ˆLossï¼‰ï¼Œæ˜¯æ•…éšœæŒç»­æ—¶é—´çš„å‡½æ•°ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span>ï¼š<strong>å®é™…æ•…éšœæŒç»­æ—¶é—´</strong>ï¼ˆSystem Fault Durationï¼‰ï¼Œå•ä½ä¸ºæ—¶é—´é‡ï¼ˆå¦‚ sã€minã€hï¼‰ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š<strong>æ•…éšœæŠ¢é€šé˜ˆå€¼æ—¶é—´</strong>ï¼ˆFault Recovery Thresholdï¼‰ï¼Œå³æ•…éšœåœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å†…æŠ¢é€šåˆ™æ— æŸå¤±ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span>ï¼š<strong>æŸå¤±æ¯”ä¾‹ç³»æ•°</strong>ï¼ˆLoss Proportional Coefficientï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼Œè¡¨ç¤ºå•ä½æ•…éšœæ—¶é—´äº§ç”Ÿçš„æŸå¤±ã€‚</li>
</ul>
<h4 data-id="heading-13">ç²¾å‡†ç‰ˆ</h4>
<p>æ›´è´´åˆå®é™…è¿ç»´åœºæ™¯ï¼š<strong>æŸå¤±ä¸ã€Œè¶…è¿‡é˜ˆå€¼çš„æœ‰æ•ˆæ•…éšœæ—¶é•¿ã€æˆæ­£æ¯”</strong>ï¼ˆè€Œéæ€»æ—¶é•¿ï¼‰ï¼Œé¿å…å°†æŠ¢é€šé˜ˆå€¼å†…çš„æ—¶é—´è®¡å…¥æŸå¤±ï¼Œé€»è¾‘æ›´ä¸¥è°¨ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>k</mi><mo>â‹…</mo><mi>max</mi><mo>â¡</mo><mrow><mo fence="true">{</mo><mi>t</mi><mo>âˆ’</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo><mtext>Â </mtext><mn>0</mn><mo fence="true">}</mo></mrow><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">L(t)=k \cdot \max\left\{ t - t_0,\ 0 \right\},</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span></span></span></span></span></div>
<p><strong>ç¬¦å·è¯´æ˜</strong>ï¼ˆåŒåŸºç¡€ç‰ˆï¼Œè¡¥å……æ ¸å¿ƒé€»è¾‘ï¼‰ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>â¡</mo><mrow><mo fence="true">{</mo><mi>t</mi><mo>âˆ’</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo><mtext>Â </mtext><mn>0</mn><mo fence="true">}</mo></mrow></mrow><annotation encoding="application/x-tex">\max\left\{ t - t_0,\ 0 \right\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose delimcenter" style="top:0em;">}</span></span></span></span></span></span>ï¼šè¡¨ç¤º<strong>æœ‰æ•ˆæ•…éšœæ—¶é•¿</strong>ï¼Œä»…å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>&gt;</mo><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t&gt;t_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ—¶å– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>âˆ’</mo><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t-t_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå¦åˆ™ä¸º 0ï¼›</li>
<li>å…¶ä½™ç¬¦å·ä¸åŸºç¡€ç‰ˆå®Œå…¨ä¸€è‡´ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> å¯æ ¹æ®ä¸šåŠ¡åœºæ™¯æ ‡å®šï¼ˆå¦‚é‡‘èåœºæ™¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> ä¸ºå•ä½æ—¶é—´äº¤æ˜“æŸå¤±ï¼Œç”µå•†åœºæ™¯ä¸ºå•ä½æ—¶é—´æµé‡æŸå¤±ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">æ‰©å±•ç‰ˆ</h4>
<p>è‹¥å®é™…åœºæ™¯ä¸­<strong>æ•…éšœæ—¶é•¿è¶…è¿‡é˜ˆå€¼åï¼ŒæŸå¤±éšæ—¶é—´å‘ˆè¶…çº¿æ€§å¢é•¿</strong>ï¼ˆå¦‚æ ¸å¿ƒç³»ç»Ÿæ•…éšœï¼Œæ—¶é—´è¶Šä¹…æŸå¤±ç¿»å€ï¼‰ï¼Œå¯å¢åŠ <strong>åŠ é€Ÿç³»æ•°</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></span>ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha \geq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼‰ï¼Œå…¼å®¹ã€Œçº¿æ€§/è¶…çº¿æ€§æŸå¤±ã€ï¼Œé€šç”¨æ€§æ›´å¼ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>k</mi><mo>â‹…</mo><mi>max</mi><mo>â¡</mo><msup><mrow><mo fence="true">{</mo><mi>t</mi><mo>âˆ’</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo><mtext>Â </mtext><mn>0</mn><mo fence="true">}</mo></mrow><mi>Î±</mi></msup><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">L(t)=k \cdot \max\left\{ t - t_0,\ 0 \right\}^\alpha,</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0543em;vertical-align:-0.25em;"/><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">Î±</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span></span></span></span></span></div>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼šé€€åŒ–ä¸º<strong>çº¿æ€§æŸå¤±</strong>ï¼ˆåŸºç¡€ç‰ˆ/ç²¾å‡†ç‰ˆé€»è¾‘ï¼ŒæŸå¤±ä¸æœ‰æ•ˆæ—¶é•¿æˆæ­£æ¯”ï¼‰ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼š<strong>è¶…çº¿æ€§æŸå¤±</strong>ï¼ˆå¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\alpha=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span></span></span></span></span> ä¸ºäºŒæ¬¡æ–¹å¢é•¿ï¼Œé€‚ç”¨äºæ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿæ•…éšœï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-15">ç¬¦å·è¯´æ˜æ±‡æ€»</h4>
<p>ä¸ºä¿è¯å…¬å¼åœ¨æ–‡æ¡£ä¸­çš„å¯è¯»æ€§ï¼Œå»ºè®®åœ¨å…¬å¼æ—/æ–‡æ¡£é™„å½•ä¸­å¢åŠ ç»Ÿä¸€ç¬¦å·è¯´æ˜ï¼š</p>















































<table><thead><tr><th>ç¬¦å·</th><th>ç‰©ç†æ„ä¹‰</th><th>å–å€¼/æ€§è´¨</th><th>å•ä½</th></tr></thead><tbody><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span></td><td>æ•…éšœæ€»æŸå¤±</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">L(t) \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></td><td>ä¸šåŠ¡æŸå¤±å•ä½ï¼ˆå¦‚å…ƒã€å•é‡ï¼‰</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span></td><td>å®é™…æ•…éšœæŒç»­æ—¶é—´</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></td><td>s/min/h</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></td><td>æ•…éšœæŠ¢é€šé˜ˆå€¼æ—¶é—´</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t_0 &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></td><td>s/min/h</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span></td><td>åŸºç¡€æŸå¤±æ¯”ä¾‹ç³»æ•°</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></td><td>æŸå¤±/å•ä½æ—¶é—´</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></span></td><td>æŸå¤±åŠ é€Ÿç³»æ•°</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha \geq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span></td><td>æ— é‡çº²</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>â¡</mo><mo stretchy="false">{</mo><mo>â‹…</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\max\{\cdot\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">max</span><span class="mopen">{</span><span class="mord">â‹…</span><span class="mclose">}</span></span></span></span></span></td><td>æœ€å¤§å€¼å‡½æ•°</td><td>-</td><td>æ— é‡çº²</td></tr></tbody></table>
<p>ä»¥ä¸Šå…¬å¼å®Œå…¨è´´åˆ<strong>å¿«é€ŸæŠ¢é€šæ— æŸå¤±ï¼Œè¶…æ—¶åæŸå¤±ä¸æ•…éšœæ—¶é—´æ­£ç›¸å…³</strong>çš„æ ¸å¿ƒéœ€æ±‚ï¼ŒåŸºç¡€ç‰ˆæ»¡è¶³å¸¸è§„æ–‡æ¡£ä½¿ç”¨ï¼Œç²¾å‡†ç‰ˆ/æ‰©å±•ç‰ˆé€‚ç”¨äºé«˜å¯ç”¨æ¶æ„è®¾è®¡ã€æ•…éšœæŸå¤±é‡åŒ–åˆ†æç­‰å·¥ç¨‹åŒ–åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linuxæ— è‡ªå¸¦æœåŠ¡æ–‡ä»¶ï¼Ÿä¸€è¡Œå¥—è·¯æå®šsystemdå¼€æœºè‡ªå¯]]></title>    <link>https://juejin.cn/post/7601427909702680630</link>    <guid>https://juejin.cn/post/7601427909702680630</guid>    <pubDate>2026-02-01T20:51:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601427909702680630" data-draft-id="7601427909702647862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Linuxæ— è‡ªå¸¦æœåŠ¡æ–‡ä»¶ï¼Ÿä¸€è¡Œå¥—è·¯æå®šsystemdå¼€æœºè‡ªå¯"/> <meta itemprop="keywords" content="Linux,Python"/> <meta itemprop="datePublished" content="2026-02-01T20:51:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sheffield"/> <meta itemprop="url" content="https://juejin.cn/user/362164852109770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Linuxæ— è‡ªå¸¦æœåŠ¡æ–‡ä»¶ï¼Ÿä¸€è¡Œå¥—è·¯æå®šsystemdå¼€æœºè‡ªå¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362164852109770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sheffield
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T20:51:44.000Z" title="Sun Feb 01 2026 20:51:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šè‡ªç ”è„šæœ¬ã€äºŒè¿›åˆ¶ç¨‹åºã€Python/Java/NodeæœåŠ¡ï¼Œå®‰è£…å<strong>ä¸æä¾› systemd é…ç½®</strong>ï¼Œæ²¡æ³•ç›´æ¥<code>systemctl</code>ç®¡ç†å’Œå¼€æœºè‡ªå¯ã€‚æœ¬æ–‡ç”¨æœ€ç®€æµç¨‹ï¼Œæ•™ä½ æ‰‹å†™æœåŠ¡æ–‡ä»¶å®ç°è‡ªå¯åŠ¨ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ä¸¤ä¸ªç›®å½•ä¸€å®šè¦åˆ†æ¸…</h3>
<ul>
<li><code>/usr/lib/systemd/system/</code>ï¼šç³»ç»Ÿ/è½¯ä»¶åŒ…é»˜è®¤é…ç½®ï¼Œ<strong>ä¸è¦æ‰‹åŠ¨æ”¹</strong>ï¼Œæ›´æ–°ä¼šè¦†ç›–</li>
<li><code>/etc/systemd/system/</code>ï¼š<strong>ç”¨æˆ·è‡ªå®šä¹‰æœåŠ¡ç›®å½•</strong>ï¼Œä¼˜å…ˆçº§æ›´é«˜ï¼Œä¸ä¼šè¢«è¦†ç›–ï¼Œæˆ‘ä»¬åªå†™è¿™é‡Œ</li>
</ul>
<h3 data-id="heading-1">äºŒã€æœåŠ¡æ–‡ä»¶å›ºå®šä¸‰æ¨¡å—</h3>
<p>æ‰€æœ‰ <code>.service</code> é€šç”¨ç»“æ„ï¼Œåªæ”¹å…³é”®è·¯å¾„å³å¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Unit</span>]    <span class="hljs-meta"># æœåŠ¡è¯´æ˜ä¸å¯åŠ¨é¡ºåº</span>
[<span class="hljs-meta">Service</span>] <span class="hljs-meta"># æ ¸å¿ƒè¿è¡Œå‚æ•°</span>
[<span class="hljs-meta">Install</span>] <span class="hljs-meta"># å¼€æœºè‡ªå¯é…ç½®</span>
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€æœ€ç®€å¯ç›´æ¥å¤åˆ¶æ¨¡æ¿</h3>
<p>ä»¥é€šç”¨åç«¯æœåŠ¡ä¸ºä¾‹ï¼Œæ–°å»º <code>/etc/systemd/system/xxx.service</code>ï¼Œæ›¿æ¢æ‹¬å·å†…å®¹ç›´æ¥ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=è‡ªå®šä¹‰ä¸šåŠ¡æœåŠ¡
<span class="hljs-attr">After</span>=network.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">WorkingDirectory</span>=(ä½ çš„ç¨‹åºæ‰€åœ¨ç›®å½•)
<span class="hljs-attr">ExecStart</span>=(å®Œæ•´ç»å¯¹è·¯å¾„å¯åŠ¨å‘½ä»¤)
<span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure
<span class="hljs-attr">RestartSec</span>=<span class="hljs-number">3</span>

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<h4 data-id="heading-3">å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ï¼ˆç›´æ¥æ›¿æ¢ExecStartï¼‰</h4>
<ul>
<li>Django/Gunicorn</li>
</ul>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ExecStart</span>=/opt/venv/bin/gunicorn -w <span class="hljs-number">4</span> -b <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8000</span> project.wsgi:application
</code></pre>
<ul>
<li>Java jar</li>
</ul>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-title class_">ExecStart</span>=<span class="hljs-regexp">/usr/bin</span><span class="hljs-regexp">/java -jar /opt</span><span class="hljs-regexp">/app/app</span>.jar
</code></pre>
<ul>
<li>Pythonè„šæœ¬</li>
</ul>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-title class_">ExecStart</span>=<span class="hljs-regexp">/usr/bin</span><span class="hljs-regexp">/python3 /opt</span><span class="hljs-regexp">/script/run</span>.py
</code></pre>
<h3 data-id="heading-4">å››ã€ä¸€æ¡å‘½ä»¤åŠ è½½ + æ ‡å‡†ç®¡ç†æµç¨‹</h3>
<ol>
<li>æ–°å¢/ä¿®æ”¹é…ç½®åï¼Œå¿…é¡»é‡æ–°åŠ è½½</li>
</ol>
<pre><code class="hljs">systemctl daemon-reload
</code></pre>
<ol start="2">
<li>å¸¸ç”¨ç®¡ç†å‘½ä»¤</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨</span>
systemctl start æœåŠ¡å
<span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€&amp;æŠ¥é”™</span>
systemctl status æœåŠ¡å
<span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
systemctl <span class="hljs-built_in">enable</span> æœåŠ¡å
<span class="hljs-comment"># é‡å¯</span>
systemctl restart æœåŠ¡å
<span class="hljs-comment"># åœæ­¢</span>
systemctl stop æœåŠ¡å
</code></pre>
<h3 data-id="heading-5">äº”ã€å¿«é€Ÿæ’é”™ä¸€å¥è¯</h3>
<p>å¯åŠ¨å¤±è´¥ç›´æ¥çœ‹æ—¥å¿—ï¼š</p>
<pre><code class="hljs">journalctl -u æœåŠ¡å -xe
</code></pre>
<p>å¸¸è§é—®é¢˜ï¼š<strong>ç›¸å¯¹è·¯å¾„ã€æƒé™ä¸è¶³ã€å¯åŠ¨å‘½ä»¤æœ¬èº«é”™è¯¯</strong>ï¼Œå…ˆæ‰‹åŠ¨è·‘ä¸€éExecStartç¡®è®¤å‘½ä»¤å¯æ‰§è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-6">æœ€åç”¨äººè¯æ€»ç»“å°±æ˜¯åœ¨<code>/etc/systemd/system</code>ä¸‹ï¼Œåœ¨<code>æœåŠ¡.service</code>å†™å¥½å›ºå®šçš„ä¸‰æ®µç»“æ„ï¼Œæ”¹å®Œæ‰§è¡Œ <code>daemon-reload</code>ï¼Œå† <code>start</code>+<code>enable</code>å³å¯ã€‚</h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆå¤§å‚ä¸€èˆ¬éƒ½ä¸æ¨èä½¿ç”¨@Transactionalï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601576716016435263</link>    <guid>https://juejin.cn/post/7601576716016435263</guid>    <pubDate>2026-02-02T02:47:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601576716016435263" data-draft-id="7601706140200271935" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆå¤§å‚ä¸€èˆ¬éƒ½ä¸æ¨èä½¿ç”¨@Transactionalï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T02:47:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆå¤§å‚ä¸€èˆ¬éƒ½ä¸æ¨èä½¿ç”¨@Transactionalï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:47:14.000Z" title="Mon Feb 02 2026 02:47:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¯¹äºä»äº‹javaå¼€å‘å·¥ä½œçš„åŒå­¦æ¥è¯´ï¼ŒSpringçš„äº‹åŠ¡è‚¯å®šå†ç†Ÿæ‚‰ä¸è¿‡äº†ã€‚</p>
<p>åœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œéœ€è¦åŒæ—¶å†™å…¥å¤šå¼ è¡¨çš„æ•°æ®ã€‚ä¸ºäº†ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼ˆè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼‰ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šç”¨åˆ°Springäº‹åŠ¡ã€‚</p>
<p>ç¡®å®ï¼ŒSpringäº‹åŠ¡ç”¨èµ·æ¥è´¼çˆ½ï¼Œå°±ç”¨ä¸€ä¸ªç®€å•çš„æ³¨è§£ï¼š<code>@Transactional</code>ï¼Œå°±èƒ½è½»æ¾æå®šäº‹åŠ¡ã€‚æˆ‘çŒœå¤§éƒ¨åˆ†å°ä¼™ä¼´ä¹Ÿæ˜¯è¿™æ ·ç”¨çš„ï¼Œè€Œä¸”ä¸€ç›´ç”¨ä¸€ç›´çˆ½ã€‚</p>
<p>ä½†å¦‚æœä½ ä½¿ç”¨ä¸å½“ï¼Œå®ƒä¹Ÿä¼šå‘ä½ äºæ— å½¢ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·èŠèŠï¼Œäº‹åŠ¡å¤±æ•ˆçš„ä¸€äº›åœºæ™¯ï¼Œè¯´ä¸å®šä½ å·²ç»ä¸­æ‹›äº†ã€‚ä¸ä¿¡ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a83c1e6fa6a46dd9ac95103b363176d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605236&amp;x-signature=BMOvKl7Bd5tRGdBDnXLPtEmbpwg%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ äº‹åŠ¡ä¸ç”Ÿæ•ˆ</h2>
<h3 data-id="heading-2">1.è®¿é—®æƒé™é—®é¢˜</h3>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œjavaçš„è®¿é—®æƒé™ä¸»è¦æœ‰å››ç§ï¼šprivateã€defaultã€protectedã€publicï¼Œå®ƒä»¬çš„æƒé™ä»å·¦åˆ°å³ï¼Œä¾æ¬¡å˜å¤§ã€‚</p>
<p>ä½†å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒæŠŠæœ‰æŸäº›äº‹åŠ¡æ–¹æ³•ï¼Œå®šä¹‰äº†é”™è¯¯çš„è®¿é—®æƒé™ï¼Œå°±ä¼šå¯¼è‡´äº‹åŠ¡åŠŸèƒ½å‡ºé—®é¢˜ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> {
         saveData(userModel);
         updateData(userModel);
    }
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°addæ–¹æ³•çš„è®¿é—®æƒé™è¢«å®šä¹‰æˆäº†<code>private</code>ï¼Œè¿™æ ·ä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆï¼Œspringè¦æ±‚è¢«ä»£ç†æ–¹æ³•å¿…é¡»æ˜¯<code>public</code>çš„ã€‚</p>
<p>è¯´ç™½äº†ï¼Œåœ¨<code>AbstractFallbackTransactionAttributeSource</code>ç±»çš„<code>computeTransactionAttribute</code>æ–¹æ³•ä¸­æœ‰ä¸ªåˆ¤æ–­ï¼Œå¦‚æœç›®æ ‡æ–¹æ³•ä¸æ˜¯publicï¼Œåˆ™<code>TransactionAttribute</code>è¿”å›nullï¼Œå³ä¸æ”¯æŒäº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> TransactionAttribute <span class="hljs-title function_">computeTransactionAttribute</span><span class="hljs-params">(Method method, <span class="hljs-meta">@Nullable</span> Class&lt;?&gt; targetClass)</span> {
    <span class="hljs-comment">// Don't allow no-public methods as required.</span>
    <span class="hljs-keyword">if</span> (allowPublicMethodsOnly() &amp;&amp; !Modifier.isPublic(method.getModifiers())) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// The method may be on an interface, but we need attributes from the target class.</span>
    <span class="hljs-comment">// If the target class is null, the method will be unchanged.</span>
    <span class="hljs-type">Method</span> <span class="hljs-variable">specificMethod</span> <span class="hljs-operator">=</span> AopUtils.getMostSpecificMethod(method, targetClass);

    <span class="hljs-comment">// First try is the method in the target class.</span>
    <span class="hljs-type">TransactionAttribute</span> <span class="hljs-variable">txAttr</span> <span class="hljs-operator">=</span> findTransactionAttribute(specificMethod);
    <span class="hljs-keyword">if</span> (txAttr != <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> txAttr;
    }

    <span class="hljs-comment">// Second try is the transaction attribute on the target class.</span>
    txAttr = findTransactionAttribute(specificMethod.getDeclaringClass());
    <span class="hljs-keyword">if</span> (txAttr != <span class="hljs-literal">null</span> &amp;&amp; ClassUtils.isUserLevelMethod(method)) {
      <span class="hljs-keyword">return</span> txAttr;
    }

    <span class="hljs-keyword">if</span> (specificMethod != method) {
      <span class="hljs-comment">// Fallback is to look at the original method.</span>
      txAttr = findTransactionAttribute(method);
      <span class="hljs-keyword">if</span> (txAttr != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> txAttr;
      }
      <span class="hljs-comment">// Last fallback is the class of the original method.</span>
      txAttr = findTransactionAttribute(method.getDeclaringClass());
      <span class="hljs-keyword">if</span> (txAttr != <span class="hljs-literal">null</span> &amp;&amp; ClassUtils.isUserLevelMethod(method)) {
        <span class="hljs-keyword">return</span> txAttr;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰çš„äº‹åŠ¡æ–¹æ³•ï¼ˆå³ç›®æ ‡æ–¹æ³•ï¼‰ï¼Œå®ƒçš„è®¿é—®æƒé™ä¸æ˜¯<code>public</code>ï¼Œè€Œæ˜¯privateã€defaultæˆ–protectedçš„è¯ï¼Œspringåˆ™ä¸ä¼šæä¾›äº‹åŠ¡åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-3">2. æ–¹æ³•ç”¨finalä¿®é¥°</h3>
<p>æœ‰æ—¶å€™ï¼ŒæŸä¸ªæ–¹æ³•ä¸æƒ³è¢«å­ç±»é‡æ–°ï¼Œè¿™æ—¶å¯ä»¥å°†è¯¥æ–¹æ³•å®šä¹‰æˆfinalçš„ã€‚æ™®é€šæ–¹æ³•è¿™æ ·å®šä¹‰æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†å¦‚æœå°†äº‹åŠ¡æ–¹æ³•å®šä¹‰æˆfinalï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span>{
        saveData(userModel);
        updateData(userModel);
    }
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°addæ–¹æ³•è¢«å®šä¹‰æˆäº†<code>final</code>çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å¦‚æœä½ çœ‹è¿‡springäº‹åŠ¡çš„æºç ï¼Œå¯èƒ½ä¼šçŸ¥é“springäº‹åŠ¡åº•å±‚ä½¿ç”¨äº†aopï¼Œä¹Ÿå°±æ˜¯é€šè¿‡jdkåŠ¨æ€ä»£ç†æˆ–è€…cglibï¼Œå¸®æˆ‘ä»¬ç”Ÿæˆäº†ä»£ç†ç±»ï¼Œåœ¨ä»£ç†ç±»ä¸­å®ç°çš„äº‹åŠ¡åŠŸèƒ½ã€‚</p>
<p>ä½†å¦‚æœæŸä¸ªæ–¹æ³•ç”¨finalä¿®é¥°äº†ï¼Œé‚£ä¹ˆåœ¨å®ƒçš„ä»£ç†ç±»ä¸­ï¼Œå°±æ— æ³•é‡å†™è¯¥æ–¹æ³•ï¼Œè€Œæ·»åŠ äº‹åŠ¡åŠŸèƒ½ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœæŸä¸ªæ–¹æ³•æ˜¯staticçš„ï¼ŒåŒæ ·æ— æ³•é€šè¿‡åŠ¨æ€ä»£ç†ï¼Œå˜æˆäº‹åŠ¡æ–¹æ³•ã€‚</p>
</blockquote>
<h3 data-id="heading-4">3.æ–¹æ³•å†…éƒ¨è°ƒç”¨</h3>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªServiceç±»çš„æŸä¸ªæ–¹æ³•ä¸­ï¼Œè°ƒç”¨å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;

    <span class="hljs-comment">//@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> {
        userMapper.insertUser(userModel);
        updateStatus(userModel);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateStatus</span><span class="hljs-params">(UserModel userModel)</span> {
        doSameThing();
    }
}
</code></pre>
<p>æˆ‘ä»¬çœ‹åˆ°åœ¨äº‹åŠ¡æ–¹æ³•addä¸­ï¼Œç›´æ¥è°ƒç”¨äº‹åŠ¡æ–¹æ³•updateStatusã€‚ä»å‰é¢ä»‹ç»çš„å†…å®¹å¯ä»¥çŸ¥é“ï¼ŒupdateStatusæ–¹æ³•æ‹¥æœ‰äº‹åŠ¡çš„èƒ½åŠ›æ˜¯å› ä¸ºspring aopç”Ÿæˆä»£ç†äº†å¯¹è±¡ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ç›´æ¥è°ƒç”¨äº†thiså¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥updateStatusæ–¹æ³•ä¸ä¼šç”Ÿæˆäº‹åŠ¡ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•ç›´æ¥å†…éƒ¨è°ƒç”¨ï¼Œä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæœ‰äº›åœºæ™¯ï¼Œç¡®å®æƒ³åœ¨åŒä¸€ä¸ªç±»çš„æŸä¸ªæ–¹æ³•ä¸­ï¼Œè°ƒç”¨å®ƒè‡ªå·±çš„å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<h4 data-id="heading-5">3.1 æ–°åŠ ä¸€ä¸ªServiceæ–¹æ³•</h4>
<p>è¿™ä¸ªæ–¹æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦æ–°åŠ ä¸€ä¸ªServiceæ–¹æ³•ï¼ŒæŠŠ@Transactionalæ³¨è§£åŠ åˆ°æ–°Serviceæ–¹æ³•ä¸Šï¼ŒæŠŠéœ€è¦äº‹åŠ¡æ‰§è¡Œçš„ä»£ç ç§»åˆ°æ–°æ–¹æ³•ä¸­ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Servcie</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceA</span> {
   <span class="hljs-meta">@Autowired</span>
   prvate ServiceB serviceB;

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span> {
         queryData1();
         queryData2();
         serviceB.doSave(user);
   }
 }

 <span class="hljs-meta">@Servcie</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceB</span> {

    <span class="hljs-meta">@Transactional(rollbackFor=Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSave</span><span class="hljs-params">(User user)</span> {
       addData1();
       updateData2();
    }

 }
</code></pre>
<h4 data-id="heading-6">3.2 åœ¨è¯¥Serviceç±»ä¸­æ³¨å…¥è‡ªå·±</h4>
<p>å¦‚æœä¸æƒ³å†æ–°åŠ ä¸€ä¸ªServiceç±»ï¼Œåœ¨è¯¥Serviceç±»ä¸­æ³¨å…¥è‡ªå·±ä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Servcie</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceA</span> {
   <span class="hljs-meta">@Autowired</span>
   prvate ServiceA serviceA;

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span> {
         queryData1();
         queryData2();
         serviceA.doSave(user);
   }

   <span class="hljs-meta">@Transactional(rollbackFor=Exception.class)</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSave</span><span class="hljs-params">(User user)</span> {
       addData1();
       updateData2();
    }
 }
</code></pre>
<p>å¯èƒ½æœ‰äº›äººå¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šè¿™ç§åšæ³•ä¼šä¸ä¼šå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šä¸ä¼šã€‚</p>
<p>å…¶å®spring iocå†…éƒ¨çš„ä¸‰çº§ç¼“å­˜ä¿è¯äº†å®ƒï¼Œä¸ä¼šå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ã€‚ä½†æœ‰äº›å‘ï¼Œå¦‚æœä½ æƒ³è¿›ä¸€æ­¥äº†è§£å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxODkzNTQ3Nw%3D%3D%26mid%3D2247485600%26idx%3D1%26sn%3D0c49b94e7fbd35c88c4470e936023e3e%26chksm%3Df9800e7acef7876ca05ab45ce9420ea140f188e84153f23d0af9d044f475458ad38d49a6546a%26token%3D1641046204%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxODkzNTQ3Nw==&amp;mid=2247485600&amp;idx=1&amp;sn=0c49b94e7fbd35c88c4470e936023e3e&amp;chksm=f9800e7acef7876ca05ab45ce9420ea140f188e84153f23d0af9d044f475458ad38d49a6546a&amp;token=1641046204&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">springï¼šæˆ‘æ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ</a>ã€‹ã€‚</p>
<h4 data-id="heading-7">3.3 é€šè¿‡AopContentç±»</h4>
<p>åœ¨è¯¥Serviceç±»ä¸­ä½¿ç”¨AopContext.currentProxy()è·å–ä»£ç†å¯¹è±¡</p>
<p>ä¸Šé¢çš„æ–¹æ³•2ç¡®å®å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä»£ç çœ‹èµ·æ¥å¹¶ä¸ç›´è§‚ï¼Œè¿˜å¯ä»¥é€šè¿‡åœ¨è¯¥Serviceç±»ä¸­ä½¿ç”¨AOPProxyè·å–ä»£ç†å¯¹è±¡ï¼Œå®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Servcie</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceA</span> {

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span> {
         queryData1();
         queryData2();
         ((ServiceA)AopContext.currentProxy()).doSave(user);
   }

   <span class="hljs-meta">@Transactional(rollbackFor=Exception.class)</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSave</span><span class="hljs-params">(User user)</span> {
       addData1();
       updateData2();
    }
 }
</code></pre>
<h3 data-id="heading-8">4.æœªè¢«springç®¡ç†</h3>
<p>åœ¨æˆ‘ä»¬å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸ªç»†èŠ‚å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚å³ä½¿ç”¨springäº‹åŠ¡çš„å‰ææ˜¯ï¼šå¯¹è±¡è¦è¢«springç®¡ç†ï¼Œéœ€è¦åˆ›å»ºbeanå®ä¾‹ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡@Controllerã€@Serviceã€@Componentã€@Repositoryç­‰æ³¨è§£ï¼Œå¯ä»¥è‡ªåŠ¨å®ç°beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ã€‚</p>
<p>å½“ç„¶åˆ›å»ºbeanå®ä¾‹çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxODkzNTQ3Nw%3D%3D%26mid%3D2247488466%26idx%3D1%26sn%3D1e63e6991b5fb47e067d2edf055981d3%26chksm%3Df9801508cef79c1ea208906ceef09593a9f594b3926478eb65b7ef64e0311f13ac5aaf4135ce%26token%3D1641046204%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxODkzNTQ3Nw==&amp;mid=2247488466&amp;idx=1&amp;sn=1e63e6991b5fb47e067d2edf055981d3&amp;chksm=f9801508cef79c1ea208906ceef09593a9f594b3926478eb65b7ef64e0311f13ac5aaf4135ce&amp;token=1641046204&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">@Autowiredçš„è¿™äº›éªšæ“ä½œï¼Œä½ éƒ½çŸ¥é“å—ï¼Ÿ</a>ã€‹</p>
<p>å¦‚æœæœ‰ä¸€å¤©ï¼Œä½ åŒ†åŒ†å¿™å¿™çš„å¼€å‘äº†ä¸€ä¸ªServiceç±»ï¼Œä½†å¿˜äº†åŠ @Serviceæ³¨è§£ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> {
         saveData(userModel);
         updateData(userModel);
    }    
}
</code></pre>
<p>ä»ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°UserServiceç±»æ²¡æœ‰åŠ <code>@Service</code>æ³¨è§£ï¼Œé‚£ä¹ˆè¯¥ç±»ä¸ä¼šäº¤ç»™springç®¡ç†ï¼Œæ‰€ä»¥å®ƒçš„addæ–¹æ³•ä¹Ÿä¸ä¼šç”Ÿæˆäº‹åŠ¡ã€‚</p>
<h3 data-id="heading-9">5.å¤šçº¿ç¨‹è°ƒç”¨</h3>
<p>åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå¤šçº¿ç¨‹çš„ä½¿ç”¨åœºæ™¯è¿˜æ˜¯æŒºå¤šçš„ã€‚å¦‚æœspringäº‹åŠ¡ç”¨åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸­ï¼Œä¼šæœ‰é—®é¢˜å—ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RoleService roleService;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
        userMapper.insertUser(userModel);
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            roleService.doOtherThing();
        }).start();
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RoleService</span> {

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doOtherThing</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜roleè¡¨æ•°æ®"</span>);
    }
}
</code></pre>
<p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹åŠ¡æ–¹æ³•addä¸­ï¼Œè°ƒç”¨äº†äº‹åŠ¡æ–¹æ³•doOtherThingï¼Œä½†æ˜¯äº‹åŠ¡æ–¹æ³•doOtherThingæ˜¯åœ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨çš„ã€‚</p>
<p>è¿™æ ·ä¼šå¯¼è‡´ä¸¤ä¸ªæ–¹æ³•ä¸åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œè·å–åˆ°çš„æ•°æ®åº“è¿æ¥ä¸ä¸€æ ·ï¼Œä»è€Œæ˜¯ä¸¤ä¸ªä¸åŒçš„äº‹åŠ¡ã€‚å¦‚æœæƒ³doOtherThingæ–¹æ³•ä¸­æŠ›äº†å¼‚å¸¸ï¼Œaddæ–¹æ³•ä¹Ÿå›æ»šæ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>å¦‚æœçœ‹è¿‡springäº‹åŠ¡æºç çš„æœ‹å‹ï¼Œå¯èƒ½ä¼šçŸ¥é“springçš„äº‹åŠ¡æ˜¯é€šè¿‡æ•°æ®åº“è¿æ¥æ¥å®ç°çš„ã€‚å½“å‰çº¿ç¨‹ä¸­ä¿å­˜äº†ä¸€ä¸ªmapï¼Œkeyæ˜¯æ•°æ®æºï¼Œvalueæ˜¯æ•°æ®åº“è¿æ¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Map&lt;Object, Object&gt;&gt; resources =

  <span class="hljs-keyword">new</span> <span class="hljs-title class_">NamedThreadLocal</span>&lt;&gt;(<span class="hljs-string">"Transactional resources"</span>);
</code></pre>
<p>æˆ‘ä»¬è¯´çš„åŒä¸€ä¸ªäº‹åŠ¡ï¼Œå…¶å®æ˜¯æŒ‡åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œåªæœ‰æ‹¥æœ‰åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥æ‰èƒ½åŒæ—¶æäº¤å’Œå›æ»šã€‚å¦‚æœåœ¨ä¸åŒçš„çº¿ç¨‹ï¼Œæ‹¿åˆ°çš„æ•°æ®åº“è¿æ¥è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ˜¯ä¸åŒçš„äº‹åŠ¡ã€‚</p>
<h3 data-id="heading-10">6.è¡¨ä¸æ”¯æŒäº‹åŠ¡</h3>
<p>å‘¨æ‰€å‘¨çŸ¥ï¼Œåœ¨mysql5ä¹‹å‰ï¼Œé»˜è®¤çš„æ•°æ®åº“å¼•æ“æ˜¯<code>myisam</code>ã€‚</p>
<p>å®ƒçš„å¥½å¤„å°±ä¸ç”¨å¤šè¯´äº†ï¼šç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†å¼€å­˜å‚¨çš„ï¼Œå¯¹äºæŸ¥å¤šå†™å°‘çš„å•è¡¨æ“ä½œï¼Œæ€§èƒ½æ¯”innodbæ›´å¥½ã€‚</p>
<p>æœ‰äº›è€é¡¹ç›®ä¸­ï¼Œå¯èƒ½è¿˜åœ¨ç”¨å®ƒã€‚</p>
<p>åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠ<code>ENGINE</code>å‚æ•°è®¾ç½®æˆ<code>MyISAM</code>å³å¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">CREATE TABLE `category` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `one_category` varchar(<span class="hljs-number">20</span>) COLLATE utf8mb4_bin DEFAULT NULL,
  `two_category` varchar(<span class="hljs-number">20</span>) COLLATE utf8mb4_bin DEFAULT NULL,
  `three_category` varchar(<span class="hljs-number">20</span>) COLLATE utf8mb4_bin DEFAULT NULL,
  `four_category` varchar(<span class="hljs-number">20</span>) COLLATE utf8mb4_bin DEFAULT NULL,
  PRIMARY <span class="hljs-title function_">KEY</span> <span class="hljs-params">(`id`)</span>
) ENGINE=MyISAM AUTO_INCREMENT=<span class="hljs-number">4</span> DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
</code></pre>
<p>myisamå¥½ç”¨ï¼Œä½†æœ‰ä¸ªå¾ˆè‡´å‘½çš„é—®é¢˜æ˜¯ï¼š<code>ä¸æ”¯æŒäº‹åŠ¡</code>ã€‚</p>
<p>å¦‚æœåªæ˜¯å•è¡¨æ“ä½œè¿˜å¥½ï¼Œä¸ä¼šå‡ºç°å¤ªå¤§çš„é—®é¢˜ã€‚ä½†å¦‚æœéœ€è¦è·¨å¤šå¼ è¡¨æ“ä½œï¼Œç”±äºå…¶ä¸æ”¯æŒäº‹åŠ¡ï¼Œæ•°æ®ææœ‰å¯èƒ½ä¼šå‡ºç°ä¸å®Œæ•´çš„æƒ…å†µã€‚</p>
<p>æ­¤å¤–ï¼Œmyisamè¿˜ä¸æ”¯æŒè¡Œé”å’Œå¤–é”®ã€‚</p>
<p>æ‰€ä»¥åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œmyisamä½¿ç”¨çš„å¹¶ä¸å¤šã€‚åœ¨mysql5ä»¥åï¼Œmyisamå·²ç»é€æ¸é€€å‡ºäº†å†å²çš„èˆå°ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯innodbã€‚</p>
<blockquote>
<p>æœ‰æ—¶å€™æˆ‘ä»¬åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æŸå¼ è¡¨çš„äº‹åŠ¡ä¸€ç›´éƒ½æ²¡æœ‰ç”Ÿæ•ˆï¼Œé‚£ä¸ä¸€å®šæ˜¯springäº‹åŠ¡çš„é”…ï¼Œæœ€å¥½ç¡®è®¤ä¸€ä¸‹ä½ ä½¿ç”¨çš„é‚£å¼ è¡¨ï¼Œæ˜¯å¦æ”¯æŒäº‹åŠ¡ã€‚</p>
</blockquote>
<h3 data-id="heading-11">7.æœªå¼€å¯äº‹åŠ¡</h3>
<p>æœ‰æ—¶å€™ï¼Œäº‹åŠ¡æ²¡æœ‰ç”Ÿæ•ˆçš„æ ¹æœ¬åŸå› æ˜¯æ²¡æœ‰å¼€å¯äº‹åŠ¡ã€‚</p>
<p>ä½ çœ‹åˆ°è¿™å¥è¯å¯èƒ½ä¼šè§‰å¾—å¥½ç¬‘ã€‚</p>
<p>å¼€å¯äº‹åŠ¡ä¸æ˜¯ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ€æœ€æœ€åŸºæœ¬çš„åŠŸèƒ½å—ï¼Ÿ</p>
<p>ä¸ºä»€ä¹ˆè¿˜ä¼šæ²¡æœ‰å¼€å¯äº‹åŠ¡ï¼Ÿ</p>
<p>æ²¡é”™ï¼Œå¦‚æœé¡¹ç›®å·²ç»æ­å»ºå¥½äº†ï¼Œäº‹åŠ¡åŠŸèƒ½è‚¯å®šæ˜¯æœ‰çš„ã€‚</p>
<p>ä½†å¦‚æœä½ æ˜¯åœ¨æ­å»ºé¡¹ç›®demoçš„æ—¶å€™ï¼Œåªæœ‰ä¸€å¼ è¡¨ï¼Œè€Œè¿™å¼ è¡¨çš„äº‹åŠ¡æ²¡æœ‰ç”Ÿæ•ˆã€‚é‚£ä¹ˆä¼šæ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„å‘¢ï¼Ÿ</p>
<p>å½“ç„¶åŸå› æœ‰å¾ˆå¤šï¼Œä½†æ²¡æœ‰å¼€å¯äº‹åŠ¡ï¼Œè¿™ä¸ªåŸå› æå…¶å®¹æ˜“è¢«å¿½ç•¥ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯springbooté¡¹ç›®ï¼Œé‚£ä¹ˆä½ å¾ˆå¹¸è¿ã€‚å› ä¸ºspringbooté€šè¿‡<code>DataSourceTransactionManagerAutoConfiguration</code>ç±»ï¼Œå·²ç»é»˜é»˜çš„å¸®ä½ å¼€å¯äº†äº‹åŠ¡ã€‚</p>
<p>ä½ æ‰€è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œåªéœ€è¦é…ç½®<code>spring.datasource</code>ç›¸å…³å‚æ•°å³å¯ã€‚</p>
<p>ä½†å¦‚æœä½ ä½¿ç”¨çš„è¿˜æ˜¯ä¼ ç»Ÿçš„springé¡¹ç›®ï¼Œåˆ™éœ€è¦åœ¨applicationContext.xmlæ–‡ä»¶ä¸­ï¼Œæ‰‹åŠ¨é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•°ã€‚å¦‚æœå¿˜äº†é…ç½®ï¼Œäº‹åŠ¡è‚¯å®šæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p>
<p>å…·ä½“é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">   
&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; 
&lt;bean class=<span class="hljs-string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span> id=<span class="hljs-string">"transactionManager"</span>&gt; 
    &lt;property name=<span class="hljs-string">"dataSource"</span> ref=<span class="hljs-string">"dataSource"</span>&gt;&lt;/property&gt; 
&lt;/bean&gt; 
&lt;tx:advice id=<span class="hljs-string">"advice"</span> transaction-manager=<span class="hljs-string">"transactionManager"</span>&gt; 
    &lt;tx:attributes&gt; 
        &lt;tx:method name=<span class="hljs-string">"*"</span> propagation=<span class="hljs-string">"REQUIRED"</span>/&gt;
    &lt;/tx:attributes&gt; 
&lt;/tx:advice&gt; 
&lt;!-- ç”¨åˆ‡ç‚¹æŠŠäº‹åŠ¡åˆ‡è¿›å» --&gt; 
&lt;aop:config&gt; 
    &lt;aop:pointcut expression=<span class="hljs-string">"execution(* com.susan.*.*(..))"</span> id=<span class="hljs-string">"pointcut"</span>/&gt; 
    &lt;aop:advisor advice-ref=<span class="hljs-string">"advice"</span> pointcut-ref=<span class="hljs-string">"pointcut"</span>/&gt; 
&lt;/aop:config&gt; 
</code></pre>
<p>é»˜é»˜çš„è¯´ä¸€å¥ï¼Œå¦‚æœåœ¨pointcutæ ‡ç­¾ä¸­çš„åˆ‡å…¥ç‚¹åŒ¹é…è§„åˆ™ï¼Œé…é”™äº†çš„è¯ï¼Œæœ‰äº›ç±»çš„äº‹åŠ¡ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-12">äºŒ äº‹åŠ¡ä¸å›æ»š</h2>
<h3 data-id="heading-13">1.é”™è¯¯çš„ä¼ æ’­ç‰¹æ€§</h3>
<p>å…¶å®ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨<code>@Transactional</code>æ³¨è§£æ—¶ï¼Œæ˜¯å¯ä»¥æŒ‡å®š<code>propagation</code>å‚æ•°çš„ã€‚</p>
<p>è¯¥å‚æ•°çš„ä½œç”¨æ˜¯æŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ï¼Œspringç›®å‰æ”¯æŒ7ç§ä¼ æ’­ç‰¹æ€§ï¼š</p>
<ul>
<li><code>REQUIRED</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œé‚£ä¹ˆåŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œè¿™æ˜¯é»˜è®¤çš„ä¼ æ’­å±æ€§å€¼ã€‚</li>
<li><code>SUPPORTS</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æ”¯æŒäº‹åŠ¡åŠ å…¥äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨éäº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œã€‚</li>
<li><code>MANDATORY</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><code>REQUIRES_NEW</code> æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶ä¸”åŒæ—¶å°†ä¸Šä¸‹æ–‡ä¸­çš„äº‹åŠ¡æŒ‚èµ·ï¼Œæ‰§è¡Œå½“å‰æ–°å»ºäº‹åŠ¡å®Œæˆä»¥åï¼Œä¸Šä¸‹æ–‡äº‹åŠ¡æ¢å¤å†æ‰§è¡Œã€‚</li>
<li><code>NOT_SUPPORTED</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œç„¶åæ–°çš„æ–¹æ³•åœ¨æ²¡æœ‰äº‹åŠ¡çš„ç¯å¢ƒä¸­æ‰§è¡Œã€‚</li>
<li><code>NEVER</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™åœ¨æ— äº‹åŠ¡ç¯å¢ƒä¸Šæ‰§è¡Œä»£ç ã€‚</li>
<li><code>NESTED</code> å¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åµŒå¥—äº‹åŠ¡æ‰§è¡Œï¼Œå¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æ–°å»ºäº‹åŠ¡ã€‚</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬åœ¨æ‰‹åŠ¨è®¾ç½®propagationå‚æ•°çš„æ—¶å€™ï¼ŒæŠŠä¼ æ’­ç‰¹æ€§è®¾ç½®é”™äº†ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Transactional(propagation = Propagation.NEVER)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> {
        saveData(userModel);
        updateData(userModel);
    }
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°addæ–¹æ³•çš„äº‹åŠ¡ä¼ æ’­ç‰¹æ€§å®šä¹‰æˆäº†Propagation.NEVERï¼Œè¿™ç§ç±»å‹çš„ä¼ æ’­ç‰¹æ€§ä¸æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœæœ‰äº‹åŠ¡åˆ™ä¼šæŠ›å¼‚å¸¸ã€‚</p>
<p>ç›®å‰åªæœ‰è¿™ä¸‰ç§ä¼ æ’­ç‰¹æ€§æ‰ä¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼šREQUIREDï¼ŒREQUIRES_NEWï¼ŒNESTEDã€‚</p>
<h3 data-id="heading-14">2.è‡ªå·±åäº†å¼‚å¸¸</h3>
<p>äº‹åŠ¡ä¸ä¼šå›æ»šï¼Œæœ€å¸¸è§çš„é—®é¢˜æ˜¯ï¼šå¼€å‘è€…åœ¨ä»£ç ä¸­æ‰‹åŠ¨try...catchäº†å¼‚å¸¸ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> {
        <span class="hljs-keyword">try</span> {
            saveData(userModel);
            updateData(userModel);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(e.getMessage(), e);
        }
    }
}
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹springäº‹åŠ¡å½“ç„¶ä¸ä¼šå›æ»šï¼Œå› ä¸ºå¼€å‘è€…è‡ªå·±æ•è·äº†å¼‚å¸¸ï¼Œåˆæ²¡æœ‰æ‰‹åŠ¨æŠ›å‡ºï¼Œæ¢å¥è¯è¯´å°±æ˜¯æŠŠå¼‚å¸¸åæ‰äº†ã€‚</p>
<p>å¦‚æœæƒ³è¦springäº‹åŠ¡èƒ½å¤Ÿæ­£å¸¸å›æ»šï¼Œå¿…é¡»æŠ›å‡ºå®ƒèƒ½å¤Ÿå¤„ç†çš„å¼‚å¸¸ã€‚å¦‚æœæ²¡æœ‰æŠ›å¼‚å¸¸ï¼Œåˆ™springè®¤ä¸ºç¨‹åºæ˜¯æ­£å¸¸çš„ã€‚</p>
<h3 data-id="heading-15">3.æ‰‹åŠ¨æŠ›äº†åˆ«çš„å¼‚å¸¸</h3>
<p>å³ä½¿å¼€å‘è€…æ²¡æœ‰æ‰‹åŠ¨æ•è·å¼‚å¸¸ï¼Œä½†å¦‚æœæŠ›çš„å¼‚å¸¸ä¸æ­£ç¡®ï¼Œspringäº‹åŠ¡ä¹Ÿä¸ä¼šå›æ»šã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">try</span> {
             saveData(userModel);
             updateData(userModel);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(e.getMessage(), e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(e);
        }
    }
}
</code></pre>
<p>ä¸Šé¢çš„è¿™ç§æƒ…å†µï¼Œå¼€å‘äººå‘˜è‡ªå·±æ•è·äº†å¼‚å¸¸ï¼Œåˆæ‰‹åŠ¨æŠ›å‡ºäº†å¼‚å¸¸ï¼šExceptionï¼Œäº‹åŠ¡åŒæ ·ä¸ä¼šå›æ»šã€‚</p>
<p>å› ä¸ºspringäº‹åŠ¡ï¼Œé»˜è®¤æƒ…å†µä¸‹åªä¼šå›æ»š<code>RuntimeException</code>ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰å’Œ<code>Error</code>ï¼ˆé”™è¯¯ï¼‰ï¼Œå¯¹äºæ™®é€šçš„Exceptionï¼ˆéè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œå®ƒä¸ä¼šå›æ»šã€‚</p>
<h3 data-id="heading-16">4.è‡ªå®šä¹‰äº†å›æ»šå¼‚å¸¸</h3>
<p>åœ¨ä½¿ç”¨@Transactionalæ³¨è§£å£°æ˜äº‹åŠ¡æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬æƒ³è‡ªå®šä¹‰å›æ»šçš„å¼‚å¸¸ï¼Œspringä¹Ÿæ˜¯æ”¯æŒçš„ã€‚å¯ä»¥é€šè¿‡è®¾ç½®<code>rollbackFor</code>å‚æ•°ï¼Œæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>ä½†å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼è®¾ç½®é”™äº†ï¼Œå°±ä¼šå¼•å‡ºä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional(rollbackFor = BusinessException.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
       saveData(userModel);
       updateData(userModel);
    }
}
</code></pre>
<p>å¦‚æœåœ¨æ‰§è¡Œä¸Šé¢è¿™æ®µä»£ç ï¼Œä¿å­˜å’Œæ›´æ–°æ•°æ®æ—¶ï¼Œç¨‹åºæŠ¥é”™äº†ï¼ŒæŠ›äº†SqlExceptionã€DuplicateKeyExceptionç­‰å¼‚å¸¸ã€‚è€ŒBusinessExceptionæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å¼‚å¸¸ï¼ŒæŠ¥é”™çš„å¼‚å¸¸ä¸å±äºBusinessExceptionï¼Œæ‰€ä»¥äº‹åŠ¡ä¹Ÿä¸ä¼šå›æ»šã€‚</p>
<p>å³ä½¿rollbackForæœ‰é»˜è®¤å€¼ï¼Œä½†é˜¿é‡Œå·´å·´å¼€å‘è€…è§„èŒƒä¸­ï¼Œè¿˜æ˜¯è¦æ±‚å¼€å‘è€…é‡æ–°æŒ‡å®šè¯¥å‚æ•°ã€‚</p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å› ä¸ºå¦‚æœä½¿ç”¨é»˜è®¤å€¼ï¼Œä¸€æ—¦ç¨‹åºæŠ›å‡ºäº†Exceptionï¼Œäº‹åŠ¡ä¸ä¼šå›æ»šï¼Œè¿™ä¼šå‡ºç°å¾ˆå¤§çš„bugã€‚æ‰€ä»¥ï¼Œå»ºè®®ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†è¯¥å‚æ•°è®¾ç½®æˆï¼šExceptionæˆ–Throwableã€‚</p>
<h3 data-id="heading-17">5.åµŒå¥—äº‹åŠ¡å›æ»šå¤šäº†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RoleService roleService;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
        userMapper.insertUser(userModel);
        roleService.doOtherThing();
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RoleService</span> {

    <span class="hljs-meta">@Transactional(propagation = Propagation.NESTED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doOtherThing</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜roleè¡¨æ•°æ®"</span>);
    }
}
</code></pre>
<p>è¿™ç§æƒ…å†µä½¿ç”¨äº†åµŒå¥—çš„å†…éƒ¨äº‹åŠ¡ï¼ŒåŸæœ¬æ˜¯å¸Œæœ›è°ƒç”¨roleService.doOtherThingæ–¹æ³•æ—¶ï¼Œå¦‚æœå‡ºç°äº†å¼‚å¸¸ï¼Œåªå›æ»šdoOtherThingæ–¹æ³•é‡Œçš„å†…å®¹ï¼Œä¸å›æ»š userMapper.insertUseré‡Œçš„å†…å®¹ï¼Œå³å›æ»šä¿å­˜ç‚¹ã€‚ã€‚ä½†äº‹å®æ˜¯ï¼ŒinsertUserä¹Ÿå›æ»šäº†ã€‚</p>
<p>why?</p>
<p>å› ä¸ºdoOtherThingæ–¹æ³•å‡ºç°äº†å¼‚å¸¸ï¼Œæ²¡æœ‰æ‰‹åŠ¨æ•è·ï¼Œä¼šç»§ç»­å¾€ä¸ŠæŠ›ï¼Œåˆ°å¤–å±‚addæ–¹æ³•çš„ä»£ç†æ–¹æ³•ä¸­æ•è·äº†å¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œè¿™ç§æƒ…å†µæ˜¯ç›´æ¥å›æ»šäº†æ•´ä¸ªäº‹åŠ¡ï¼Œä¸åªå›æ»šå•ä¸ªä¿å­˜ç‚¹ã€‚</p>
<p>æ€ä¹ˆæ ·æ‰èƒ½åªå›æ»šä¿å­˜ç‚¹å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RoleService roleService;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {

        userMapper.insertUser(userModel);
        <span class="hljs-keyword">try</span> {
            roleService.doOtherThing();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(e.getMessage(), e);
        }
    }
}
</code></pre>
<p>å¯ä»¥å°†å†…éƒ¨åµŒå¥—äº‹åŠ¡æ”¾åœ¨try/catchä¸­ï¼Œå¹¶ä¸”ä¸ç»§ç»­å¾€ä¸ŠæŠ›å¼‚å¸¸ã€‚è¿™æ ·å°±èƒ½ä¿è¯ï¼Œå¦‚æœå†…éƒ¨åµŒå¥—äº‹åŠ¡ä¸­å‡ºç°å¼‚å¸¸ï¼Œåªå›æ»šå†…éƒ¨äº‹åŠ¡ï¼Œè€Œä¸å½±å“å¤–éƒ¨äº‹åŠ¡ã€‚</p>
<h2 data-id="heading-18">ä¸‰ å…¶ä»–</h2>
<h3 data-id="heading-19">1 å¤§äº‹åŠ¡é—®é¢˜</h3>
<p>åœ¨ä½¿ç”¨springäº‹åŠ¡æ—¶ï¼Œæœ‰ä¸ªè®©äººéå¸¸å¤´ç–¼çš„é—®é¢˜ï¼Œå°±æ˜¯å¤§äº‹åŠ¡é—®é¢˜ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨æ–¹æ³•ä¸Š<code>@Transactional</code>æ³¨è§£ï¼Œå¡«åŠ äº‹åŠ¡åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span> 
    <span class="hljs-keyword">private</span> RoleService roleService;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
       query1();
       query2();
       query3();
       roleService.save(userModel);
       update(userModel);
    }
}


<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RoleService</span> {
    
    <span class="hljs-meta">@Autowired</span> 
    <span class="hljs-keyword">private</span> RoleService roleService;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(UserModel userModel)</span> <span class="hljs-keyword">throws</span> Exception {
       query4();
       query5();
       query6();
       saveData(userModel);
    }
}
</code></pre>
<p>ä½†<code>@Transactional</code>æ³¨è§£ï¼Œå¦‚æœè¢«åŠ åˆ°æ–¹æ³•ä¸Šï¼Œæœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ•´ä¸ªæ–¹æ³•éƒ½åŒ…å«åœ¨äº‹åŠ¡å½“ä¸­äº†ã€‚</p>
<p>ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨UserServiceç±»ä¸­ï¼Œå…¶å®åªæœ‰è¿™ä¸¤è¡Œæ‰éœ€è¦äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">roleService.save(userModel);
update(userModel);
</code></pre>
<p>åœ¨RoleServiceç±»ä¸­ï¼Œåªæœ‰è¿™ä¸€è¡Œéœ€è¦äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">saveData(userModel);
</code></pre>
<p>ç°åœ¨çš„è¿™ç§å†™æ³•ï¼Œä¼šå¯¼è‡´æ‰€æœ‰çš„queryæ–¹æ³•ä¹Ÿè¢«åŒ…å«åœ¨åŒä¸€ä¸ªäº‹åŠ¡å½“ä¸­ã€‚</p>
<p>å¦‚æœqueryæ–¹æ³•éå¸¸å¤šï¼Œè°ƒç”¨å±‚çº§å¾ˆæ·±ï¼Œè€Œä¸”æœ‰éƒ¨åˆ†æŸ¥è¯¢æ–¹æ³•æ¯”è¾ƒè€—æ—¶çš„è¯ï¼Œä¼šé€ æˆæ•´ä¸ªäº‹åŠ¡éå¸¸è€—æ—¶ï¼Œè€Œä»é€ æˆå¤§äº‹åŠ¡é—®é¢˜ã€‚</p>
<p>å…³äºå¤§äº‹åŠ¡é—®é¢˜çš„å±å®³ï¼Œå¯ä»¥é˜…è¯»ä¸€ä¸‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxODkzNTQ3Nw%3D%3D%26mid%3D2247485262%26idx%3D1%26sn%3Dabe19452e4c13876270f329cc6929be7%26chksm%3Df9800194cef78882e5ad4d8eb00b7e3f745a4159aee6afb1858cc16cae599f8889afa330e17b%26token%3D305097496%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxODkzNTQ3Nw==&amp;mid=2247485262&amp;idx=1&amp;sn=abe19452e4c13876270f329cc6929be7&amp;chksm=f9800194cef78882e5ad4d8eb00b7e3f745a4159aee6afb1858cc16cae599f8889afa330e17b&amp;token=305097496&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">è®©äººå¤´ç—›çš„å¤§äº‹åŠ¡é—®é¢˜åˆ°åº•è¦å¦‚ä½•è§£å†³ï¼Ÿ</a>ã€‹ï¼Œä¸Šé¢æœ‰è¯¦ç»†çš„è®²è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5844c0c31db94e12bd5cbd19c8513615~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605236&amp;x-signature=jIAArQTqjCB60zXCW2DGlpxsnbE%3D" alt="image.png" loading="lazy"/></p>
<p>æ›´å¤šç²¾å½©å†…å®¹ç™¾åº¦ä¸€ä¸‹ï¼šJavaçªå‡»é˜Ÿ</p>
<h3 data-id="heading-20">2.ç¼–ç¨‹å¼äº‹åŠ¡</h3>
<p>ä¸Šé¢èŠçš„è¿™äº›å†…å®¹éƒ½æ˜¯åŸºäº<code>@Transactional</code>æ³¨è§£çš„ï¼Œä¸»è¦è¯´çš„æ˜¯å®ƒçš„äº‹åŠ¡é—®é¢˜ï¼Œæˆ‘ä»¬æŠŠè¿™ç§äº‹åŠ¡å«åšï¼š<code>å£°æ˜å¼äº‹åŠ¡</code>ã€‚</p>
<p>å…¶å®ï¼Œspringè¿˜æä¾›äº†å¦å¤–ä¸€ç§åˆ›å»ºäº‹åŠ¡çš„æ–¹å¼ï¼Œå³é€šè¿‡æ‰‹åŠ¨ç¼–å†™ä»£ç å®ç°çš„äº‹åŠ¡ï¼Œæˆ‘ä»¬æŠŠè¿™ç§äº‹åŠ¡å«åšï¼š<code>ç¼–ç¨‹å¼äº‹åŠ¡</code>ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">
   <span class="hljs-meta">@Autowired</span>
   <span class="hljs-keyword">private</span> TransactionTemplate transactionTemplate;
   
   ...
   
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-keyword">final</span> User user)</span> {
         queryData1();
         queryData2();
         transactionTemplate.execute((status) =&gt; {
            addData1();
            updateData2();
            <span class="hljs-keyword">return</span> Boolean.TRUE;
         })
   }
</code></pre>
<p>åœ¨springä¸­ä¸ºäº†æ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ï¼Œä¸“é—¨æä¾›äº†ä¸€ä¸ªç±»ï¼šTransactionTemplateï¼Œåœ¨å®ƒçš„executeæ–¹æ³•ä¸­ï¼Œå°±å®ç°äº†äº‹åŠ¡çš„åŠŸèƒ½ã€‚</p>
<p>ç›¸è¾ƒäº<code>@Transactional</code>æ³¨è§£å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘æ›´å»ºè®®å¤§å®¶ä½¿ç”¨ï¼ŒåŸºäº<code>TransactionTemplate</code>çš„ç¼–ç¨‹å¼äº‹åŠ¡ã€‚ä¸»è¦åŸå› å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¿å…ç”±äºspring aopé—®é¢˜ï¼Œå¯¼è‡´äº‹åŠ¡å¤±æ•ˆçš„é—®é¢˜ã€‚</li>
<li>èƒ½å¤Ÿæ›´å°ç²’åº¦çš„æ§åˆ¶äº‹åŠ¡çš„èŒƒå›´ï¼Œæ›´ç›´è§‚ã€‚</li>
</ol>
<blockquote>
<p>å»ºè®®åœ¨é¡¹ç›®ä¸­å°‘ä½¿ç”¨@Transactionalæ³¨è§£å¼€å¯äº‹åŠ¡ã€‚ä½†å¹¶ä¸æ˜¯è¯´ä¸€å®šä¸èƒ½ç”¨å®ƒï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰äº›ä¸šåŠ¡é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä¸ç»å¸¸å˜åŠ¨ï¼Œä½¿ç”¨@Transactionalæ³¨è§£å¼€å¯äº‹åŠ¡å¼€å¯äº‹åŠ¡ä¹Ÿæ— å¦¨ï¼Œå› ä¸ºå®ƒæ›´ç®€å•ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ï¼Œä½†æ˜¯åƒä¸‡è¦å°å¿ƒäº‹åŠ¡å¤±æ•ˆçš„é—®é¢˜ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«CLIPå±€é™ï¼SSVPæ¡†æ¶å®ç°é›¶æ ·æœ¬å¼‚å¸¸æ£€æµ‹ï¼Œåˆ·æ–°7å¤§æ•°æ®é›†SOTA]]></title>    <link>https://juejin.cn/post/7601355703241457704</link>    <guid>https://juejin.cn/post/7601355703241457704</guid>    <pubDate>2026-02-02T02:47:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601355703241457704" data-draft-id="7601445395478724642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«CLIPå±€é™ï¼SSVPæ¡†æ¶å®ç°é›¶æ ·æœ¬å¼‚å¸¸æ£€æµ‹ï¼Œåˆ·æ–°7å¤§æ•°æ®é›†SOTA"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-02T02:47:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«CLIPå±€é™ï¼SSVPæ¡†æ¶å®ç°é›¶æ ·æœ¬å¼‚å¸¸æ£€æµ‹ï¼Œåˆ·æ–°7å¤§æ•°æ®é›†SOTA
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:47:15.000Z" title="Mon Feb 02 2026 02:47:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å·¥ä¸šè§†è§‰æ£€æµ‹ä¸€ç›´æ˜¯æ™ºèƒ½åˆ¶é€ é¢†åŸŸçš„å…³é”®æŠ€æœ¯ï¼Œè€Œ<strong>é›¶æ ·æœ¬å¼‚å¸¸æ£€æµ‹ï¼ˆZSADï¼‰</strong> æ›´æ˜¯è¢«è§†ä¸ºè¡Œä¸šçš„â€œåœ£æ¯â€â€”â€”æ— éœ€é’ˆå¯¹ç‰¹å®šäº§çº¿è¿›è¡Œè®­ç»ƒï¼Œå³å¯ç›´æ¥æŠ•å…¥ä½¿ç”¨çš„ç†æƒ³è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œç°æœ‰åŸºäºè§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆå¦‚CLIPï¼‰çš„æ–¹æ³•å¾€å¾€é¢ä¸´ä¸€ä¸ªæ ¹æœ¬æ€§éš¾é¢˜ï¼šCLIPæ“…é•¿ç†è§£å…¨å±€è¯­ä¹‰ï¼Œå´å¯¹åˆ’ç—•ã€è£‚çº¹ç­‰ç»†å¾®å±€éƒ¨ç¼ºé™·â€œè§†è€Œä¸è§â€ã€‚</p>
<p>è¿‘æ—¥ï¼ŒåŒ—äº¬é‚®ç”µå¤§å­¦ä¸ä¸­å›½ç”µä¿¡äººå·¥æ™ºèƒ½ç ”ç©¶é™¢ï¼ˆTeleAIï¼‰è”åˆæå‡ºäº†ä¸€é¡¹çªç ´æ€§å·¥ä½œâ€”â€”SSVPï¼ˆSynergistic Semantic-Visual Promptingï¼‰æ¡†æ¶ã€‚è¯¥æ¡†æ¶ä¸ä»…å¼•å…¥DINOv3è¡¥å……ç»†ç²’åº¦è§†è§‰ç‰¹å¾ï¼Œæ›´é€šè¿‡ä¸€ç§åˆ›æ–°çš„â€œè¯­ä¹‰-è§†è§‰ååŒâ€æœºåˆ¶ï¼Œä½¿æç¤ºè¯ï¼ˆPromptï¼‰ä¸å†æ˜¯é™æ€æ–‡æœ¬ï¼Œè€Œæ˜¯èƒ½æ ¹æ®å›¾åƒå†…å®¹åŠ¨æ€ç”Ÿæˆçš„â€œçµåŠ¨æŒ‡ä»¤â€ã€‚</p>
<p>è¯¥æ–¹æ³•åœ¨æƒå¨å·¥ä¸šæ•°æ®é›†MVTec-ADä¸Šå®ç°äº†93.0%çš„Image-AUROCï¼Œåœ¨ä¸ƒä¸ªä¸»æµå·¥ä¸šæ£€æµ‹æ•°æ®é›†ä¸­å…¨é¢åˆ·æ–°äº†SOTAæ€§èƒ½ï¼Œä¸ºé›¶æ ·æœ¬å·¥ä¸šè´¨æ£€æä¾›äº†å…¨æ–°æ€è·¯ã€‚</p>
<p><strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2601.09147" target="_blank" title="https://arxiv.org/abs/2601.09147" ref="nofollow noopener noreferrer">arxiv.org/abs/2601.09â€¦</a></strong></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df2162593f874bb1a255f4abb31288f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=LxrpaA%2F4CIqTNaB5GgEwj7j4Fzk%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¼ ç»Ÿæ–¹æ³•çš„å±€é™ï¼šè¯­ä¹‰ä¸ç»†èŠ‚çš„å‰²è£‚</strong></h2>
<p>ç°æœ‰é›¶æ ·æœ¬å¼‚å¸¸æ£€æµ‹æ–¹æ³•å¤§å¤šé‡‡ç”¨CLIPä¸è§†è§‰ç‰¹å¾çš„ç®€å•åŠ æƒèåˆï¼Œè¿™ç§â€œæµ…å±‚æ‹¼æ¥â€å­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰è¿‡äºæŠ½è±¡ï¼š</strong> CLIPç‰¹å¾åå‘é«˜å±‚è¯­ä¹‰ç†è§£ï¼Œéš¾ä»¥æ•æ‰å·¥ä¸šåœºæ™¯ä¸­å…³é”®çš„çº¹ç†ä¸ç»“æ„ç»†èŠ‚ã€‚</li>
<li><strong>æç¤ºè¯åƒµåŒ–ï¼š</strong> ä¼ ç»Ÿæç¤ºç”Ÿæˆç¼ºä¹è§†è§‰æ¡ä»¶çº¦æŸï¼Œå¯¼è‡´æ–‡æœ¬æŒ‡ä»¤æ— æ³•ç²¾å‡†å¯¹åº”å›¾åƒä¸­çš„å¼‚å¸¸æ¨¡å¼ã€‚</li>
<li><strong>å®šä½èƒ½åŠ›å¼±ï¼š</strong> å…¨å±€è¯„åˆ†æ˜“å—èƒŒæ™¯å¹²æ‰°ï¼Œå¾®å°ç¼ºé™·å®¹æ˜“è¢«æ©ç›–ã€‚</li>
</ul>
<p>SSVPçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºæå‡ºäº†ä¸€ç§è§†è§‰æ¡ä»¶åŒ–æç¤ºç”Ÿæˆæœºåˆ¶ï¼ŒçœŸæ­£å®ç°â€œçœ‹å›¾è¯´è¯â€ï¼Œä½¿æ¨¡å‹èƒ½å¤ŸåŒæ—¶ç†è§£â€œæ˜¯ä»€ä¹ˆâ€å’Œâ€œå“ªé‡Œä¸å¯¹â€ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2327e45325604d1ab2ea3c6aa2175000~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=XjDzTCKKgnDofspEOK4xymSvwdI%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>SSVPæ¡†æ¶è§£æï¼šä¸‰é‡ååŒï¼Œç²¾å‡†æ£€æµ‹</strong></h2>
<p>SSVPæ¶æ„è®¾è®¡ç²¾å·§ï¼ŒåŒ…å«ä¸‰å¤§æ ¸å¿ƒæ¨¡å—ï¼Œå½¢æˆä»ç‰¹å¾èåˆåˆ°å¼‚å¸¸å®šä½çš„å®Œæ•´é—­ç¯ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b3daa6740ef4169a8ac25dcb042e9e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=s2zv8hdDMS9dVZozzCBjcaTAXE8%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<ul>
<li><strong>å±‚çº§è¯­ä¹‰-è§†è§‰ååŒæ¨¡å—ï¼ˆHSVSï¼‰</strong></li>
</ul>
<p>è¯¥æ¨¡å—å¼•å…¥DINOv3ä½œä¸ºâ€œè§†è§‰ä¸“å®¶â€ï¼Œä¸CLIPçš„è¯­ä¹‰ç‰¹å¾è¿›è¡Œæ·±åº¦èåˆã€‚é€šè¿‡è‡ªé€‚åº”Tokenç‰¹å¾èåˆï¼ˆATFï¼‰ ä¸åŒå‘äº¤å‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ˜¾å¼åœ°å°†ç»“æ„å…ˆéªŒæ³¨å…¥è¯­ä¹‰è¡¨ç¤ºä¸­ï¼Œç”Ÿæˆå…¼å…·å…¨å±€ç†è§£ä¸ç»†èŠ‚æ„ŸçŸ¥çš„ååŒç‰¹å¾ã€‚</p>
<ul>
<li><strong>è§†è§‰æ¡ä»¶æç¤ºç”Ÿæˆå™¨ï¼ˆVCPGï¼‰</strong></li>
</ul>
<p>ä¼ ç»Ÿæç¤ºè¯æ˜¯é™æ€çš„ï¼Œè€ŒVCPGä½¿å…¶åŠ¨æ€åŒ–ã€‚è¯¥æ¨¡å—é€šè¿‡å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰å¯¹è§†è§‰ç‰¹å¾åˆ†å¸ƒè¿›è¡Œå»ºæ¨¡ï¼Œç”Ÿæˆè§†è§‰éšå˜é‡åç½®ï¼Œå¹¶é€šè¿‡äº¤å‰æ³¨æ„åŠ›æœºåˆ¶åŠ¨æ€è°ƒæ•´æ–‡æœ¬åµŒå…¥è¡¨ç¤ºã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœå›¾åƒä¸­å‡ºç°ç–‘ä¼¼è£‚çº¹ï¼Œæç¤ºè¯ä¼šåœ¨ç‰¹å¾ç©ºé—´ä¸­è‡ªåŠ¨å‘â€œè£‚çº¹â€è¯­ä¹‰åç§»ï¼Œå®ç°ç²¾å‡†å¯¹é½ã€‚</p>
<ul>
<li><strong>è§†è§‰-æ–‡æœ¬å¼‚å¸¸æ˜ å°„å™¨ï¼ˆVTAMï¼‰</strong></li>
</ul>
<p>ä¸ºå®ç°åƒç´ çº§ç²¾ç¡®å®šä½ï¼ŒVTAMå¼•å…¥å¼‚å¸¸ä¸“å®¶æ··åˆï¼ˆAnomalyMoEï¼‰ æœºåˆ¶ï¼Œé€šè¿‡åŒé—¨æ§ç»“æ„ï¼ˆå…¨å±€å°ºåº¦é—¨æ§ä¸å±€éƒ¨ç©ºé—´é—¨æ§ï¼‰è¿‡æ»¤èƒŒæ™¯å™ªå£°ï¼Œçªå‡ºå¼‚å¸¸åŒºåŸŸï¼Œæœ€ç»ˆè¾“å‡ºæ¸…æ™°ã€é«˜å¯¹æ¯”åº¦çš„å¼‚å¸¸çƒ­åŠ›å›¾ã€‚</p>
<h2 data-id="heading-2"><strong>å®éªŒç»“æœï¼šå…¨é¢é¢†å…ˆï¼Œç»†èŠ‚åˆ¶èƒœ</strong></h2>
<p>SSVPåœ¨MVTec-ADã€VisAã€BTADç­‰ä¸ƒä¸ªå·¥ä¸šæ£€æµ‹æ•°æ®é›†ä¸Šè¿›è¡Œäº†ç³»ç»Ÿè¯„ä¼°ï¼Œç»“æœè¡¨ç°çªå‡ºï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a3264d10d5a4338af257a06c6e9fae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=Yx%2BmZLU9rkeUnydK5pbc2v8uOt4%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p>MVTec-ADï¼šImage-AUROCè¾¾åˆ°93.0%ï¼Œè¶…è¶Šæ­¤å‰SOTAæ–¹æ³•Bayes-PFLï¼ˆ92.0%ï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e41e7e71944a495085a42485ef6eb5c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=Jf24J7%2BLKwZnQi%2Fky6OEataUqXo%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<p>VisAï¼šåœ¨ç»“æ„å¤æ‚çš„ç‰©ä½“æ£€æµ‹ä¸­è¾¾åˆ°88.2%ï¼Œæ˜¾è‘—é¢†å…ˆåŒç±»æ–¹æ³•ã€‚</p>
<p>RSDDé“è·¯ç¼ºé™·æ•°æ®é›†ï¼šè¾¾åˆ°98.5%çš„æƒŠäººæ€§èƒ½ï¼Œè¯æ˜å…¶åœ¨çº¹ç†ç¼ºé™·æ£€æµ‹ä¸Šçš„å¼ºå¤§ä¼˜åŠ¿ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e48b9c8f7844aa5a52a1e9009b196a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=ylIxmnRBy7hyWd5Ll%2BYupBrN0pw%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<p>å¯è§†åŒ–å¯¹æ¯”æ˜¾ç¤ºï¼ŒSSVPç”Ÿæˆçš„å¼‚å¸¸çƒ­åŠ›å›¾è¾¹ç•Œæ¸…æ™°ã€å™ªå£°æå°‘ï¼Œå³ä½¿åœ¨å¾®å°ç¼ºé™·å®šä½ä¸Šä¹Ÿè¡¨ç°ç²¾å‡†ï¼Œæ˜¾è‘—ä¼˜äºåŸºçº¿æ–¹æ³•ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faac9b1182934e8bae7fc667038d9aae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=4seF44yfBbFj1UqpDvfzgF6QsVk%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b47fbf38f6cc42f198eb77af7ed17aba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605234&amp;x-signature=jNJz450ViisOZXt6DVAL7msCxcE%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>æ€»ç»“ä¸å±•æœ›</strong></h2>
<p>SSVPçš„æˆåŠŸæ ‡å¿—ç€å·¥ä¸šè§†è§‰å¼‚å¸¸æ£€æµ‹ä»â€œé™æ€åŒ¹é…â€è¿ˆå‘â€œåŠ¨æ€ååŒâ€çš„é‡è¦ä¸€æ­¥ã€‚å…¶æ ¸å¿ƒå¯ç¤ºåœ¨äºï¼š</p>
<ul>
<li>å¤šæ¨¡æ€èåˆä¸æ˜¯ç®€å•æ‹¼æ¥ï¼Œè€Œåº”é€šè¿‡æ·±å±‚äº¤äº’å®ç°è¯­ä¹‰ä¸ç»“æ„çš„äº’è¡¥ï¼›</li>
<li>æç¤ºè¯åº”å…·å¤‡è§†è§‰æ„ŸçŸ¥èƒ½åŠ›ï¼ŒåŠ¨æ€ç”Ÿæˆæ›´è´´åˆå›¾åƒå†…å®¹çš„æè¿°ï¼›</li>
<li>å®šä½æœºåˆ¶éœ€å…¼é¡¾å…¨å±€ä¸å±€éƒ¨ï¼Œé€šè¿‡é—¨æ§è®¾è®¡æŠ‘åˆ¶å™ªå£°ã€å¢å¼ºä¿¡å·ã€‚</li>
</ul>
<p>è¯¥æ¡†æ¶ä¸ºé«˜ç²¾åº¦ã€é›¶æ ·æœ¬å·¥ä¸šè´¨æ£€æä¾›äº†å¯è½åœ°çš„æŠ€æœ¯è·¯å¾„ï¼Œå°¤å…¶é€‚ç”¨äºäº§å“å‹å·å¤šæ ·ã€ç¼ºé™·ç±»å‹æœªçŸ¥çš„æŸ”æ€§ç”Ÿäº§çº¿åœºæ™¯ã€‚</p>
<p>å¯¹äºä»äº‹å·¥ä¸šAIã€è§†è§‰è´¨æ£€åŠç›¸å…³åº”ç”¨çš„å¼€å‘è€…è€Œè¨€ï¼ŒSSVPæ‰€æå‡ºçš„ç‰¹å¾ååŒèŒƒå¼ä¸è§†è§‰æ¡ä»¶åŒ–æç¤ºç”Ÿæˆæ€è·¯ï¼Œå…·æœ‰é‡è¦çš„å‚è€ƒä»·å€¼å’Œå®è·µæ„ä¹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›†å›¢çº§åŠ¨æ€æŠ¥è¡¨ç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–¹æ¡ˆï¼ˆä»¥æ—…æ¸¸ä¸šåŠ¡ä¸ºä¾‹ï¼‰]]></title>    <link>https://juejin.cn/post/7601751168419758121</link>    <guid>https://juejin.cn/post/7601751168419758121</guid>    <pubDate>2026-02-02T02:47:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601751168419758121" data-draft-id="7601576716016418879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›†å›¢çº§åŠ¨æ€æŠ¥è¡¨ç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–¹æ¡ˆï¼ˆä»¥æ—…æ¸¸ä¸šåŠ¡ä¸ºä¾‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T02:47:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš–é˜³_"/> <meta itemprop="url" content="https://juejin.cn/user/1662117312465406"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›†å›¢çº§åŠ¨æ€æŠ¥è¡¨ç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–¹æ¡ˆï¼ˆä»¥æ—…æ¸¸ä¸šåŠ¡ä¸ºä¾‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117312465406/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš–é˜³_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:47:53.000Z" title="Mon Feb 02 2026 02:47:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é›†å›¢çº§åŠ¨æ€æŠ¥è¡¨ç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–¹æ¡ˆï¼ˆä»¥æ—…æ¸¸ä¸šåŠ¡ä¸ºä¾‹ï¼‰</h2>
<blockquote>
<p>ä¸€å¥—åŸºäºæ¨¡å‹é©±åŠ¨çš„åŠ¨æ€æŠ¥è¡¨ç³»ç»Ÿï¼Œè§£å†³ 100ï½500 å¼ å¤æ‚å¤šçº§è¡¨å¤´æŠ¥è¡¨çš„å¼€å‘ä¸ç»´æŠ¤éš¾é¢˜ã€‚<strong>æœ¬æ–‡ä»¥æ—…æ¸¸ä¸šåŠ¡åœºæ™¯ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œæ–¹æ¡ˆä¸ºé€šç”¨æŠ€æœ¯è®¾è®¡ï¼Œä¸æ¶‰åŠä»»ä½•å…·ä½“ä¼ä¸šæˆ–å…¬å¸ä¿¡æ¯ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸æŒ‘æˆ˜</h3>
<h4 data-id="heading-2">1.1 ä¸šåŠ¡èƒŒæ™¯</h4>
<p>é›†å›¢ç›®å‰éœ€è¦ç»´æŠ¤ <strong>100 å¼ ä»¥ä¸Š</strong>çš„ä¸šåŠ¡æŠ¥è¡¨ï¼ˆæœªæ¥å¯èƒ½æ‰©å±•åˆ° 200-500 å¼ ï¼‰ï¼Œè¿™äº›æŠ¥è¡¨å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>å¤šçº§è¡¨å¤´ç»“æ„</strong>ï¼šæ¨ªå‘ 3-5 å±‚ï¼ˆåŒºåŸŸâ†’å›½å®¶â†’ä¸šåŠ¡ç±»å‹â†’æŒ‡æ ‡ï¼‰ï¼Œçºµå‘ 2-4 å±‚ï¼ˆå­£åº¦â†’æœˆä»½â†’äº§å“çº¿â†’æ¸ é“ï¼‰</li>
<li><strong>é¢‘ç¹å˜æ›´</strong>ï¼šé›†å›¢ä¸šåŠ¡è°ƒæ•´å¯¼è‡´æŠ¥è¡¨éœ€è¦å¢åŠ åˆ—ã€åˆ é™¤åˆ—ã€è°ƒæ•´å±‚çº§</li>
<li><strong>ä¸ªæ€§åŒ–éœ€æ±‚</strong>ï¼šæ¯å¼ æŠ¥è¡¨çš„è¡¨å¤´ç»“æ„ã€è®¡ç®—è§„åˆ™ã€æ ¡éªŒé€»è¾‘éƒ½ä¸ç›¸åŒ</li>
<li><strong>å†å²æ•°æ®ä¿ç•™</strong>ï¼šå³ä½¿æŠ¥è¡¨ç»“æ„æ”¹å˜ï¼Œå†å²æ•°æ®ä¹Ÿä¸èƒ½ä¸¢å¤±</li>
</ul>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒç—›ç‚¹</h4>
<h5 data-id="heading-4">ç—›ç‚¹ä¸€ï¼šæŠ¥è¡¨é…ç½®æ•ˆç‡ä½ï¼ˆæ¯å¼ è¡¨éƒ½è¦å†™ä»£ç ï¼‰</h5>
<p><strong>ä¼ ç»Ÿåšæ³•</strong>ï¼šä¸ºæ¯å¼ æŠ¥è¡¨åˆ›å»ºç‹¬ç«‹çš„ Vue ç»„ä»¶ã€ç¼–å†™ HTML è¡¨æ ¼ç»“æ„ã€æ‰‹åŠ¨è®¡ç®— rowspan/colspanã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å¼€å‘ä¸€å¼ å¤æ‚æŠ¥è¡¨éœ€è¦ 2-3 å¤©</li>
<li>100 å¼ æŠ¥è¡¨éœ€è¦ç»´æŠ¤ 100 ä¸ªç»„ä»¶æ–‡ä»¶</li>
<li>ä»»ä½•å°æ”¹åŠ¨éƒ½éœ€è¦å‰ç«¯é‡æ–°å‘å¸ƒ</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼šé›†å›¢è¦æ±‚åœ¨"æ—…æ¸¸ä¸šåŠ¡ç»Ÿè®¡è¡¨"ä¸­å¢åŠ "ç›´æ’­ç”µå•†"åˆ—</p>
<pre><code class="hljs language-css" lang="css">ä¼ ç»Ÿæ–¹æ¡ˆï¼šä¿®æ”¹ TourReport<span class="hljs-selector-class">.vue</span> â†’ è°ƒæ•´ &lt;<span class="hljs-selector-tag">th</span>&gt; ç»“æ„ â†’ ä¿®æ”¹æ•°æ®æ˜ å°„é€»è¾‘ â†’ æµ‹è¯• â†’ å‘å¸ƒ
è€—æ—¶ï¼šåŠå¤©
</code></pre>
<h5 data-id="heading-5">ç—›ç‚¹äºŒï¼šå­—æ®µå˜æ›´å¯¼è‡´æ•°æ®ä¸¢å¤±</h5>
<p><strong>ä¼ ç»Ÿåšæ³•</strong>ï¼šæ•°æ®åº“è¡¨ç»“æ„ä¸æŠ¥è¡¨ä¸€ä¸€å¯¹åº”</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ—…æ¸¸ä¸šåŠ¡ç»Ÿè®¡è¡¨å¯¹åº”ä¸€å¼ ç‰©ç†è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tour_report (
  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
  quarter <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),
  <span class="hljs-keyword">month</span> <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),
  china_group_tour_gmv <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">15</span>,<span class="hljs-number">2</span>),  <span class="hljs-comment">-- ä¸­å›½è·Ÿå›¢æ¸¸GMV</span>
  china_group_tour_order <span class="hljs-type">INT</span>,           <span class="hljs-comment">-- ä¸­å›½è·Ÿå›¢æ¸¸è®¢å•</span>
  japan_group_tour_gmv <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">15</span>,<span class="hljs-number">2</span>),   <span class="hljs-comment">-- æ—¥æœ¬è·Ÿå›¢æ¸¸GMV</span>
  ...
);
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å¢åŠ "ç›´æ’­ç”µå•†"åˆ— â†’ éœ€è¦æ‰§è¡Œ <code>ALTER TABLE ADD COLUMN</code></li>
<li>åˆ é™¤"é‚®è½®ä¸šåŠ¡"åˆ— â†’ å†å²æ•°æ®æ°¸ä¹…ä¸¢å¤±</li>
<li>100 å¼ æŠ¥è¡¨ = 100 å¼ ç‰©ç†è¡¨ï¼Œç»´æŠ¤æˆæœ¬æé«˜</li>
</ul>
<h5 data-id="heading-6">ç—›ç‚¹ä¸‰ï¼šä¸çŸ¥é“å¦‚ä½•å­˜å‚¨å’Œè¯»å–åŠ¨æ€ç»“æ„çš„æ•°æ®</h5>
<p><strong>æ ¸å¿ƒå›°æƒ‘</strong>ï¼š</p>
<ul>
<li>å¦‚ä½•åœ¨ä¸€å¥—æ•°æ®åº“è¡¨ç»“æ„ä¸­å­˜å‚¨ 100 å¼ ä¸åŒç»“æ„çš„æŠ¥è¡¨ï¼Ÿ</li>
<li>å¦‚ä½•è®©å‰ç«¯æ ¹æ®"å…ƒæ•°æ®é…ç½®"åŠ¨æ€æ¸²æŸ“è¡¨æ ¼ï¼Ÿ</li>
<li>å¢åŠ åˆ—åï¼Œæ—§æ•°æ®å¦‚ä½•å›æ˜¾ï¼Ÿåˆ é™¤åˆ—åï¼Œæ•°æ®å¦‚ä½•ä¿ç•™ï¼Ÿ</li>
</ul>
<h4 data-id="heading-7">1.3 æŠ€æœ¯éš¾ç‚¹</h4>
<h5 data-id="heading-8">éš¾ç‚¹ä¸€ï¼šå¤šçº§è¡¨å¤´çš„åˆå¹¶å•å…ƒæ ¼è®¡ç®—</h5>
<p>å¤šçº§è¡¨å¤´æœ¬è´¨ä¸Šæ˜¯ä¸€æ£µ<strong>æ ‘ï¼ˆTreeï¼‰</strong>ï¼Œè€Œæ¸²æŸ“åˆ° HTML Table æ—¶éœ€è¦å°†å…¶æ‹‰å¹³ä¸º<strong>ç½‘æ ¼ï¼ˆGridï¼‰</strong>ã€‚</p>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼š</p>
<ul>
<li>å¦‚ä½•è®¡ç®—æ¯ä¸ª <code>&lt;th&gt;</code> çš„ <code>rowspan</code> å’Œ <code>colspan</code>ï¼Ÿ</li>
<li>å¦‚ä½•ç¡®ä¿æ ‘çš„å±‚çº§å˜åŒ–ï¼ˆä» 3 å±‚å˜æˆ 5 å±‚ï¼‰ä¸éœ€è¦ä¿®æ”¹æ¸²æŸ“ä»£ç ï¼Ÿ</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ ‘ç»“æ„ï¼š
äºšå¤ªåŒº
  â”œâ”€ ä¸­å›½
  â”‚   â”œâ”€ è·Ÿå›¢æ¸¸
  â”‚   â””â”€ è‡ªç”±è¡Œ
  â””â”€ æ—¥æœ¬
<span class="hljs-code">      â””â”€ è·Ÿå›¢æ¸¸
</span>
æ¸²æŸ“æˆè¡¨æ ¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ äºšå¤ªåŒº              â”‚ æ—¥æœ¬  â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚      â”‚ ä¸­å›½          â”‚è·Ÿå›¢æ¸¸â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚      â”‚è·Ÿå›¢æ¸¸â”‚è‡ªç”±è¡Œâ”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ ¸å¿ƒç®—æ³•</strong>ï¼šé€’å½’è®¡ç®— <code>rowspan</code> å’Œ <code>colspan</code></p>
<ul>
<li><strong>colspanï¼ˆè·¨åˆ—ï¼‰</strong>= å½“å‰èŠ‚ç‚¹ä¸‹æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„æ•°é‡</li>
<li><strong>rowspanï¼ˆè·¨è¡Œï¼‰</strong>= è¡¨å¤´æœ€å¤§æ·±åº¦ - å½“å‰èŠ‚ç‚¹æ·±åº¦ + 1</li>
</ul>
<h5 data-id="heading-9">éš¾ç‚¹äºŒï¼šæ•°æ®ä¸è§†å›¾çš„è§£è€¦</h5>
<p>ä¼ ç»Ÿå¼€å‘ä¸­ï¼Œæ•°æ®ç»“æ„ä¸è¡¨æ ¼ç»“æ„æ˜¯"ç¡¬ç»‘å®š"çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿåšæ³•ï¼šæ•°æ®ç»“æ„å¿…é¡»ä¸è¡¨æ ¼åˆ—ä¸€ä¸€å¯¹åº”</span>
<span class="hljs-keyword">const</span> rowData = {
  <span class="hljs-attr">quarter</span>: <span class="hljs-string">'Q1'</span>,
  <span class="hljs-attr">china_group_tour_gmv</span>: <span class="hljs-number">50000</span>,  <span class="hljs-comment">// åˆ—åå†™æ­»</span>
  <span class="hljs-attr">china_indie_tour_gmv</span>: <span class="hljs-number">30000</span>
}
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šä¸€æ—¦åˆ—åæ”¹å˜æˆ–å¢åŠ åˆ—ï¼Œä»£ç å¿…é¡»åŒæ­¥ä¿®æ”¹ã€‚</p>
<p><strong>ç›®æ ‡</strong>ï¼šå®ç°"æ¨¡å‹é©±åŠ¨"ï¼Œæ•°æ®é€šè¿‡<strong>åæ ‡ç³»ç»Ÿ</strong>ä¸è§†å›¾è§£è€¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡å‹é©±åŠ¨ï¼šæ•°æ®é€šè¿‡åæ ‡æ˜ å°„</span>
<span class="hljs-keyword">const</span> cellData = {
  <span class="hljs-string">"è¡Œç¬¬1å­£åº¦ç¬¬1æœˆ|åˆ—ä¸­å›½è·Ÿå›¢æ¸¸GMV"</span>: <span class="hljs-number">50000</span>,
  <span class="hljs-string">"è¡Œç¬¬1å­£åº¦ç¬¬1æœˆ|åˆ—ä¸­å›½è‡ªç”±è¡ŒGMV"</span>: <span class="hljs-number">30000</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-10">äºŒã€æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šæ¨¡å‹é©±åŠ¨æ¶æ„</h3>
<h4 data-id="heading-11">2.1 ä»€ä¹ˆæ˜¯æ¨¡å‹é©±åŠ¨ï¼ˆModel-Drivenï¼‰</h4>
<p><strong>å®šä¹‰</strong>ï¼šæ¨¡å‹é©±åŠ¨æ˜¯å¤„ç†å¤æ‚ä¸šåŠ¡ç³»ç»Ÿçš„æ ¸å¿ƒæ€æƒ³ã€‚åœ¨å¼€å‘ Excel ç±»æŠ¥è¡¨æ—¶ï¼Œå®ƒæ„å‘³ç€ï¼š</p>
<blockquote>
<p><strong>ä½ ä¸åº”è¯¥ç›´æ¥å»å†™ HTML è¡¨æ ¼ï¼Œè€Œæ˜¯å…ˆå®šä¹‰ä¸€å¥—æè¿°æŠ¥è¡¨çš„"è¯­è¨€"ï¼ˆæ¨¡å‹ï¼‰ï¼Œç„¶åç”±ç¨‹åºè‡ªåŠ¨ç”Ÿæˆç•Œé¢ã€‚</strong></p>
</blockquote>
<p><strong>ç±»æ¯”</strong>ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿå¼€å‘</strong>ï¼šåƒæ‰‹å·¥ç”»å›¾ â†’ ç”»ä¸€å¼ æŠ¥è¡¨éœ€è¦æ‰‹å†™ 200 è¡Œ HTML</li>
<li><strong>æ¨¡å‹é©±åŠ¨</strong>ï¼šåƒç”¨ CAD è½¯ä»¶ â†’ å®šä¹‰å‚æ•°ï¼Œè½¯ä»¶è‡ªåŠ¨ç»˜åˆ¶</li>
</ul>
<h4 data-id="heading-12">2.2 æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>æ¨¡å‹æ˜¯ä¸€å¥—<strong>JSON æ•°æ®ç»“æ„</strong>ï¼Œæè¿°äº†æŠ¥è¡¨çš„æ‰€æœ‰ç‰¹å¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡å‹ç¤ºä¾‹ï¼šå®šä¹‰ä¸€å¼ æŠ¥è¡¨</span>
<span class="hljs-keyword">const</span> reportModel = {
  <span class="hljs-comment">// å…ƒæ•°æ®ï¼šè¡¨å¤´é•¿ä»€ä¹ˆæ ·</span>
  <span class="hljs-attr">metadata</span>: {
    <span class="hljs-attr">columns</span>: [
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"äºšå¤ªåŒº"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"asia"</span>,
        <span class="hljs-attr">children</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸­å›½"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china"</span>, <span class="hljs-attr">children</span>: [...] },
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"æ—¥æœ¬"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"japan"</span>, <span class="hljs-attr">children</span>: [...] }
        ]
      }
    ],
    <span class="hljs-attr">rows</span>: [
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"2025å¹´"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"year_2025"</span>,
        <span class="hljs-attr">children</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"ç¬¬1å­£åº¦"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"q1"</span>, <span class="hljs-attr">children</span>: [...] }
        ]
      }
    ]
  },
  
  <span class="hljs-comment">// æ ¡éªŒè§„åˆ™</span>
  <span class="hljs-attr">validation</span>: {
    <span class="hljs-string">"china_group_tour_gmv"</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">0</span> }
  },
  
  <span class="hljs-comment">// è®¡ç®—å…¬å¼</span>
  <span class="hljs-attr">formulas</span>: {
    <span class="hljs-string">"china_total_gmv"</span>: <span class="hljs-string">"SUM(china_group_tour_gmv, china_indie_tour_gmv)"</span>
  },
  
  <span class="hljs-comment">// æ ·å¼é…ç½®</span>
  <span class="hljs-attr">styles</span>: {
    <span class="hljs-string">"row_total"</span>: { <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">"bold"</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"#f0f0f0"</span> }
  }
}
</code></pre>
<h4 data-id="heading-13">2.3 å¦‚ä½•é©±åŠ¨ï¼Ÿé©±åŠ¨çš„æ˜¯è°ï¼Ÿ</h4>
<p><strong>é©±åŠ¨æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ¨¡å‹ï¼ˆJSONé…ç½®ï¼‰
    â†“
æ¸²æŸ“å¼•æ“ï¼ˆRendererï¼‰
    â†“
è§†å›¾ï¼ˆ<span class="hljs-selector-tag">HTML</span> <span class="hljs-selector-tag">Table</span>ï¼‰
</code></pre>
<p><strong>è¯¦ç»†è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>æ¨¡å‹å­˜å‚¨åœ¨æ•°æ®åº“</strong></li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å…ƒæ•°æ®è¡¨ï¼šå­˜å‚¨æ¯å¼ æŠ¥è¡¨çš„"è®¾è®¡å›¾çº¸"</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_templates (
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">PRIMARY</span> KEY,    <span class="hljs-comment">-- æŠ¥è¡¨å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ 'tour_001'</span>
  template_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),             <span class="hljs-comment">-- æŠ¥è¡¨åç§°</span>
  column_schema JSON,                     <span class="hljs-comment">-- åˆ—è¡¨å¤´çš„æ ‘ç»“æ„</span>
  row_schema JSON,                        <span class="hljs-comment">-- è¡Œè¡¨å¤´çš„æ ‘ç»“æ„</span>
  validation_rules JSON,                  <span class="hljs-comment">-- æ ¡éªŒè§„åˆ™</span>
  formulas JSON,                          <span class="hljs-comment">-- è®¡ç®—å…¬å¼</span>
  created_at <span class="hljs-type">TIMESTAMP</span>
);
</code></pre>
<ol start="2">
<li><strong>æ¸²æŸ“å¼•æ“è¯»å–æ¨¡å‹</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯å¯åŠ¨æ—¶åŠ è½½æ¨¡å‹</span>
<span class="hljs-keyword">const</span> template = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/template/tour_001'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// æ¸²æŸ“å¼•æ“è§£ææ¨¡å‹</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReportRenderer</span>(template);
renderer.<span class="hljs-title function_">render</span>(); <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆè¡¨æ ¼</span>
</code></pre>
<ol start="3">
<li><strong>ç”¨æˆ·ä¿®æ”¹æ¨¡å‹ï¼Œè¡¨æ ¼è‡ªåŠ¨æ›´æ–°</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®¡ç†å‘˜åœ¨åå°å¢åŠ ä¸€åˆ—"ç›´æ’­ç”µå•†"</span>
template.<span class="hljs-property">metadata</span>.<span class="hljs-property">columns</span>[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">label</span>: <span class="hljs-string">"ç›´æ’­ç”µå•†"</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-string">"live_commerce"</span>
});

<span class="hljs-comment">// ä¿å­˜æ¨¡å‹åˆ°æ•°æ®åº“</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/template/tour_001'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(template)
});

<span class="hljs-comment">// å‰ç«¯é‡æ–°åŠ è½½ â†’ è¡¨æ ¼è‡ªåŠ¨æ˜¾ç¤ºæ–°åˆ—ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼</span>
</code></pre>
<p><strong>é©±åŠ¨çš„å¯¹è±¡</strong>ï¼š</p>
<ul>
<li><strong>æ¸²æŸ“å¼•æ“</strong>ï¼šæ ¹æ®æ¨¡å‹è‡ªåŠ¨è®¡ç®— rowspanã€colspanï¼Œç”Ÿæˆ HTML</li>
<li><strong>æ•°æ®å¡«å……é€»è¾‘</strong>ï¼šæ ¹æ®æ¨¡å‹çš„ key ä½“ç³»ï¼Œè‡ªåŠ¨åŒ¹é…æ•°æ®åº“ä¸­çš„å€¼</li>
<li><strong>æ ¡éªŒé€»è¾‘</strong>ï¼šæ ¹æ®æ¨¡å‹çš„ validation è§„åˆ™ï¼Œè‡ªåŠ¨è¿›è¡Œå‰ç«¯æ ¡éªŒ</li>
<li><strong>è®¡ç®—å¼•æ“</strong>ï¼šæ ¹æ®æ¨¡å‹çš„ formulas é…ç½®ï¼Œè‡ªåŠ¨è§¦å‘å…¬å¼è®¡ç®—</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<blockquote>
<p>æŠŠå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆåˆå¹¶å•å…ƒæ ¼ã€å…¬å¼ã€æ ¡éªŒï¼‰å…¨éƒ¨å˜æˆæ•°æ®é…ç½®ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ä¸‰ã€ç³»ç»Ÿåˆ†å±‚æ¶æ„</h3>
<p>ç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼š<strong>å…ƒæ•°æ®å±‚ã€å®ä¾‹æ•°æ®å±‚ã€æ¸²æŸ“å¼•æ“å±‚</strong>ã€‚å¤šç»„ç»‡åœºæ™¯ä¸‹ï¼Œå…ƒæ•°æ®å±‚è¿˜åŒ…å«åˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨ï¼ˆåŠäº§å“-ä¼ä¸šå…³è”ç­‰ï¼‰ï¼›æ¸²æŸ“å±‚æŒ‰å½“å‰ç”¨æˆ·ç»„ç»‡ä¸è§’è‰²è¿‡æ»¤åˆ—/è¡Œã€‚è¯¦è§<strong>ç¬¬åäºŒç«  å¤šç»„ç»‡ä¸æƒé™è®¾è®¡</strong>ã€‚</p>
<h4 data-id="heading-15">3.1 å…ƒæ•°æ®å±‚ï¼ˆMetadata Layerï¼‰â€”â€” "è¡¨é•¿ä»€ä¹ˆæ ·"</h4>
<p><strong>èŒè´£</strong>ï¼šå®šä¹‰æŠ¥è¡¨çš„ç»“æ„ã€è§„åˆ™ã€æ ·å¼ï¼Œä½†ä¸åŒ…å«å…·ä½“æ•°å€¼ã€‚</p>
<h5 data-id="heading-16">A. è¡¨å¤´ç»“æ„ï¼ˆHeader Schemaï¼‰</h5>
<p><strong>æ ‘å½¢ç»“æ„å®šä¹‰</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ—è¡¨å¤´ç¤ºä¾‹ï¼šæŒ‰"åŒºåŸŸ â†’ å›½å®¶ â†’ ä¸šåŠ¡ç±»å‹ â†’ æŒ‡æ ‡"å±‚çº§åµŒå¥—</span>
<span class="hljs-keyword">const</span> columnSchema = [
  {
    <span class="hljs-attr">label</span>: <span class="hljs-string">"äºšå¤ªåŒº"</span>,           <span class="hljs-comment">// æ˜¾ç¤ºåç§°ï¼ˆå¯éšæ—¶ä¿®æ”¹ï¼‰</span>
    <span class="hljs-attr">key</span>: <span class="hljs-string">"asia"</span>,              <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†ï¼ˆåˆ›å»ºåä¸å¯æ”¹ï¼Œç”¨äºæ•°æ®æ˜ å°„ï¼‰</span>
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸­å›½"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"china"</span>,
        <span class="hljs-attr">children</span>: [
          {
            <span class="hljs-attr">label</span>: <span class="hljs-string">"è·Ÿå›¢æ¸¸"</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">"group_tour"</span>,
            <span class="hljs-attr">children</span>: [
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_group_tour_gmv"</span> },
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_group_tour_order"</span> }
            ]
          },
          {
            <span class="hljs-attr">label</span>: <span class="hljs-string">"è‡ªç”±è¡Œ"</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">"indie_tour"</span>,
            <span class="hljs-attr">children</span>: [
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_indie_tour_gmv"</span> },
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_indie_tour_order"</span> }
            ]
          }
        ]
      },
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"æ—¥æœ¬"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"japan"</span>,
        <span class="hljs-attr">children</span>: [
          {
            <span class="hljs-attr">label</span>: <span class="hljs-string">"è·Ÿå›¢æ¸¸"</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">"group_tour"</span>,
            <span class="hljs-attr">children</span>: [
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"japan_group_tour_gmv"</span> },
              { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"japan_group_tour_order"</span> }
            ]
          }
        ]
      }
    ]
  }
];

<span class="hljs-comment">// è¡Œè¡¨å¤´ç¤ºä¾‹ï¼šæŒ‰"å­£åº¦ â†’ æœˆä»½ â†’ äº§å“çº¿ â†’ æ¸ é“"å±‚çº§åµŒå¥—</span>
<span class="hljs-keyword">const</span> rowSchema = [
  {
    <span class="hljs-attr">label</span>: <span class="hljs-string">"2025å¹´ç¬¬1å­£åº¦"</span>,
    <span class="hljs-attr">key</span>: <span class="hljs-string">"year_2025_q1"</span>,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"1æœˆ"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_month_1"</span>,
        <span class="hljs-attr">children</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"é«˜ç«¯äº§å“çº¿"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_m1_high_end"</span> },
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸­ç«¯äº§å“çº¿"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_m1_mid_end"</span> }
        ]
      },
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"2æœˆ"</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_month_2"</span>,
        <span class="hljs-attr">children</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"é«˜ç«¯äº§å“çº¿"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_m2_high_end"</span> },
          { <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸­ç«¯äº§å“çº¿"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"q1_m2_mid_end"</span> }
        ]
      }
    ]
  }
];
</code></pre>
<p><strong>å­˜å‚¨ä½ç½®</strong>ï¼š<code>report_templates</code> è¡¨çš„ <code>column_schema</code> å’Œ <code>row_schema</code> å­—æ®µï¼ˆJSON ç±»å‹ï¼‰</p>
<h5 data-id="heading-17">B. æ ·å¼é…ç½®ï¼ˆStyle Mapï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šå®šä¹‰å“ªäº›è¡Œè¦åŠ ç²—ï¼Œå“ªäº›å•å…ƒæ ¼èƒŒæ™¯æ˜¯çº¢è‰²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> styleMap = {
  <span class="hljs-comment">// è¡Œçº§æ ·å¼ï¼šæ‰€æœ‰åˆè®¡è¡ŒåŠ ç²—</span>
  <span class="hljs-string">"row_q1_total"</span>: {
    <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">"bold"</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"#f0f0f0"</span>
  },
  
  <span class="hljs-comment">// åˆ—çº§æ ·å¼ï¼šGMV åˆ—å³å¯¹é½</span>
  <span class="hljs-string">"col_*_gmv"</span>: {
    <span class="hljs-attr">textAlign</span>: <span class="hljs-string">"right"</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"#1890ff"</span>
  },
  
  <span class="hljs-comment">// å•å…ƒæ ¼çº§æ ·å¼ï¼šç‰¹å®šåæ ‡</span>
  <span class="hljs-string">"cell_q1_m1_high_end|china_group_tour_gmv"</span>: {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"#fff0f0"</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"red"</span>
  }
};
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åˆè®¡è¡Œ/åˆ—é«˜äº®</li>
<li>è¶…å‡ºé˜ˆå€¼çš„å•å…ƒæ ¼æ ‡çº¢</li>
<li>åªè¯»å•å…ƒæ ¼ç½®ç°</li>
</ul>
<h5 data-id="heading-18">C. å•å…ƒæ ¼å±æ€§ï¼ˆCell Schemaï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šå®šä¹‰å•å…ƒæ ¼çš„å±æ€§ï¼ˆæ•°æ®ç±»å‹ã€æ ¡éªŒè§„åˆ™ã€è®¡ç®—å…¬å¼ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cellSchema = {
  <span class="hljs-comment">// å•å…ƒæ ¼åæ ‡ï¼šchina_group_tour_gmv åˆ—çš„æ‰€æœ‰å•å…ƒæ ¼</span>
  <span class="hljs-string">"*|china_group_tour_gmv"</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>,              <span class="hljs-comment">// æ•°æ®ç±»å‹</span>
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// å¿…å¡«</span>
    <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,                      <span class="hljs-comment">// æœ€å°å€¼</span>
    <span class="hljs-attr">max</span>: <span class="hljs-number">999999999</span>,              <span class="hljs-comment">// æœ€å¤§å€¼</span>
    <span class="hljs-attr">format</span>: <span class="hljs-string">"currency"</span>,          <span class="hljs-comment">// æ˜¾ç¤ºæ ¼å¼ï¼šè´§å¸</span>
    <span class="hljs-attr">readonly</span>: <span class="hljs-literal">false</span>              <span class="hljs-comment">// æ˜¯å¦åªè¯»</span>
  },
  
  <span class="hljs-comment">// è®¡ç®—åˆ—ï¼šä¸­å›½å¸‚åœºæ€»GMV = è·Ÿå›¢æ¸¸GMV + è‡ªç”±è¡ŒGMV</span>
  <span class="hljs-string">"*|china_total_gmv"</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>,
    <span class="hljs-attr">readonly</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// è®¡ç®—åˆ—ä¸å¯ç¼–è¾‘</span>
    <span class="hljs-attr">formula</span>: <span class="hljs-string">"SUM({china_group_tour_gmv}, {china_indie_tour_gmv})"</span>
  },
  
  <span class="hljs-comment">// ç‰¹å®šå•å…ƒæ ¼ï¼šç¬¬1å­£åº¦åˆè®¡è¡Œçš„ä¸­å›½è·Ÿå›¢æ¸¸GMV</span>
  <span class="hljs-string">"row_q1_total|china_group_tour_gmv"</span>: {
    <span class="hljs-attr">formula</span>: <span class="hljs-string">"SUM({q1_m1_high_end|china_group_tour_gmv}, {q1_m2_high_end|china_group_tour_gmv})"</span>
  }
};
</code></pre>
<p><strong>ç¤ºä¾‹æ•°æ®æ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"*|china_group_tour_gmv"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"min"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"currency"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"*|china_total_gmv"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"readonly"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"formula"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SUM({china_group_tour_gmv}, {china_indie_tour_gmv})"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Key çš„å‘½åè§„åˆ™</strong>ï¼š</p>
<ul>
<li><code>*|col_key</code>ï¼šåŒ¹é…æŸåˆ—çš„æ‰€æœ‰å•å…ƒæ ¼</li>
<li><code>row_key|*</code>ï¼šåŒ¹é…æŸè¡Œçš„æ‰€æœ‰å•å…ƒæ ¼</li>
<li><code>row_key|col_key</code>ï¼šåŒ¹é…ç‰¹å®šå•å…ƒæ ¼</li>
</ul>
<h4 data-id="heading-19">3.2 å®ä¾‹æ•°æ®å±‚ï¼ˆData Layerï¼‰â€”â€” "å†…å®¹æ˜¯ä»€ä¹ˆ"</h4>
<p><strong>èŒè´£</strong>ï¼šå­˜å‚¨ç”¨æˆ·å®é™…å¡«å†™çš„æ•°å€¼ï¼Œä¸å…ƒæ•°æ®åˆ†ç¦»ã€‚</p>
<h5 data-id="heading-20">A. æ•°æ®å­˜å‚¨æ¨¡å¼ï¼šEAVï¼ˆEntity-Attribute-Valueï¼‰</h5>
<p><strong>EAV å…¨ç§°</strong>ï¼šEntity-Attribute-Valueï¼ˆå®ä½“-å±æ€§-å€¼ï¼‰æ¨¡å¼</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä¸ä¸ºæ¯ä¸ªå­—æ®µåˆ›å»ºç‰©ç†åˆ—ï¼Œè€Œæ˜¯ç”¨"é”®å€¼å¯¹"æ–¹å¼å­˜å‚¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å®ä¾‹æ•°æ®è¡¨ï¼šå­˜å‚¨æ‰€æœ‰æŠ¥è¡¨çš„å®é™…æ•°å€¼</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_values (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  report_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),              <span class="hljs-comment">-- æŠ¥è¡¨å®ä¾‹IDï¼Œå¦‚ 'tour_001_2025_q1'</span>
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),            <span class="hljs-comment">-- å…³è”çš„æ¨¡æ¿IDï¼Œå¦‚ 'tour_001'</span>
  row_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),               <span class="hljs-comment">-- è¡Œåæ ‡ï¼Œå¦‚ 'q1_m1_high_end'</span>
  col_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),               <span class="hljs-comment">-- åˆ—åæ ‡ï¼Œå¦‚ 'china_group_tour_gmv'</span>
  cell_value TEXT,                    <span class="hljs-comment">-- å•å…ƒæ ¼çš„å€¼</span>
  updated_at <span class="hljs-type">TIMESTAMP</span>,               <span class="hljs-comment">-- æœ€åä¿®æ”¹æ—¶é—´</span>
  updated_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),             <span class="hljs-comment">-- ä¿®æ”¹äºº</span>
  
  INDEX idx_report (report_id),
  INDEX idx_coordinate (row_key, col_key),
  <span class="hljs-keyword">UNIQUE</span> KEY uk_cell (report_id, row_key, col_key)
);
</code></pre>
<p><strong>ç¤ºä¾‹æ•°æ®</strong>ï¼š</p>


















































<table><thead><tr><th>id</th><th>report_id</th><th>template_id</th><th>row_key</th><th>col_key</th><th>cell_value</th><th>updated_at</th></tr></thead><tbody><tr><td>1</td><td>tour_001_2025_q1</td><td>tour_001</td><td>q1_m1_high_end</td><td>china_group_tour_gmv</td><td>500000</td><td>2025-01-15 10:30:00</td></tr><tr><td>2</td><td>tour_001_2025_q1</td><td>tour_001</td><td>q1_m1_high_end</td><td>china_group_tour_order</td><td>1200</td><td>2025-01-15 10:30:00</td></tr><tr><td>3</td><td>tour_001_2025_q1</td><td>tour_001</td><td>q1_m1_high_end</td><td>china_indie_tour_gmv</td><td>300000</td><td>2025-01-15 10:31:00</td></tr><tr><td>4</td><td>tour_001_2025_q1</td><td>tour_001</td><td>q1_m2_high_end</td><td>china_group_tour_gmv</td><td>480000</td><td>2025-01-16 14:20:00</td></tr></tbody></table>
<p><strong>åæ ‡è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>row_keyï¼ˆè¡Œé”®ï¼‰</strong>ï¼š<code>q1_m1_high_end</code> ä»£è¡¨ "ç¬¬1å­£åº¦ â†’ 1æœˆ â†’ é«˜ç«¯äº§å“çº¿"</li>
<li><strong>col_keyï¼ˆåˆ—é”®ï¼‰</strong>ï¼š<code>china_group_tour_gmv</code> ä»£è¡¨ "ä¸­å›½ â†’ è·Ÿå›¢æ¸¸ â†’ GMV"</li>
<li><strong>å”¯ä¸€åæ ‡</strong>ï¼š<code>row_key|col_key</code> ç»„åˆç¡®å®šä¸€ä¸ªå•å…ƒæ ¼ï¼Œå¦‚ <code>q1_m1_high_end|china_group_tour_gmv</code></li>
</ul>
<p><strong>EAV æ¨¡å¼çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>å­—æ®µæ— é™æ‰©å±•</strong>ï¼šå¢åŠ åˆ—æ—¶ä¸éœ€è¦ <code>ALTER TABLE</code></li>
<li><strong>æ•°æ®ä¸ä¸¢å¤±</strong>ï¼šåˆ é™¤åˆ—æ—¶ï¼Œæ•°æ®ä»ä¿ç•™åœ¨è¡¨ä¸­ï¼Œåªæ˜¯ä¸è¢«æ¸²æŸ“</li>
<li><strong>è¡¨ç»“æ„ç»Ÿä¸€</strong>ï¼š100 å¼ æŠ¥è¡¨å…±ç”¨ä¸€å¼  <code>report_values</code> è¡¨</li>
</ol>
<h5 data-id="heading-21">B. æ•°æ®æŸ¥è¯¢ç¤ºä¾‹</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢æŸä¸ªæŠ¥è¡¨çš„æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> row_key, col_key, cell_value 
<span class="hljs-keyword">FROM</span> report_values 
<span class="hljs-keyword">WHERE</span> report_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001_2025_q1'</span>;

<span class="hljs-comment">-- æŸ¥è¯¢æŸä¸ªå•å…ƒæ ¼çš„å€¼</span>
<span class="hljs-keyword">SELECT</span> cell_value 
<span class="hljs-keyword">FROM</span> report_values 
<span class="hljs-keyword">WHERE</span> report_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001_2025_q1'</span> 
  <span class="hljs-keyword">AND</span> row_key <span class="hljs-operator">=</span> <span class="hljs-string">'q1_m1_high_end'</span> 
  <span class="hljs-keyword">AND</span> col_key <span class="hljs-operator">=</span> <span class="hljs-string">'china_group_tour_gmv'</span>;
</code></pre>
<h4 data-id="heading-22">3.3 æ¸²æŸ“å¼•æ“å±‚ï¼ˆRenderer Layerï¼‰â€”â€” "å¦‚ä½•æ˜¾ç¤º"</h4>
<p><strong>èŒè´£</strong>ï¼šå°†æ ‘å½¢çš„å…ƒæ•°æ®å’Œæ‰å¹³çš„å®ä¾‹æ•°æ®ï¼Œåˆæˆä¸ºå¯äº¤äº’çš„ HTML è¡¨æ ¼ã€‚</p>
<h5 data-id="heading-23">A. æ ¸å¿ƒç®—æ³•ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</h5>
<p><strong>å¤„ç†å¤šçº§è¡¨å¤´æœ€ç»å…¸çš„æ–¹æ³•æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</strong>ã€‚</p>
<p><strong>ç®—æ³•æ­¥éª¤</strong>ï¼š</p>
<p><strong>æ­¥éª¤1ï¼šæ‰«æè¡¨å¤´æ ‘ï¼Œè®¡ç®— rowspan å’Œ colspan</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è®¡ç®—è¡¨å¤´èŠ‚ç‚¹çš„åˆå¹¶å•å…ƒæ ¼å±æ€§
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">node</span> - è¡¨å¤´èŠ‚ç‚¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Number</span>} <span class="hljs-variable">maxDepth</span> - æ ‘çš„æœ€å¤§æ·±åº¦
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Number</span>} <span class="hljs-variable">currentDepth</span> - å½“å‰èŠ‚ç‚¹æ·±åº¦
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} {<span class="hljs-type"> rowspan, colspan </span>}
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSpan</span>(<span class="hljs-params">node, maxDepth, currentDepth</span>) {
  <span class="hljs-comment">// colspan = å½“å‰èŠ‚ç‚¹ä¸‹æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„æ•°é‡</span>
  <span class="hljs-keyword">const</span> colspan = <span class="hljs-title function_">countLeaves</span>(node);
  
  <span class="hljs-comment">// rowspan = æœ€å¤§æ·±åº¦ - å½“å‰æ·±åº¦ + 1</span>
  <span class="hljs-comment">// å¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œrowspan = 1ï¼ˆå› ä¸ºä¸‹ä¸€è¡Œä¼šç»§ç»­å±•å¼€ï¼‰</span>
  <span class="hljs-keyword">const</span> rowspan = node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> 
    ? <span class="hljs-number">1</span> 
    : maxDepth - currentDepth + <span class="hljs-number">1</span>;
  
  <span class="hljs-keyword">return</span> { rowspan, colspan };
}

<span class="hljs-comment">/**
 * é€’å½’è®¡ç®—å¶å­èŠ‚ç‚¹æ•°é‡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">countLeaves</span>(<span class="hljs-params">node</span>) {
  <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span> || node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// å¶å­èŠ‚ç‚¹</span>
  }
  <span class="hljs-keyword">return</span> node.<span class="hljs-property">children</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, child</span>) =&gt;</span> sum + <span class="hljs-title function_">countLeaves</span>(child), <span class="hljs-number">0</span>);
}

<span class="hljs-comment">/**
 * è®¡ç®—æ ‘çš„æœ€å¤§æ·±åº¦
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getMaxDepth</span>(<span class="hljs-params">nodes</span>) {
  <span class="hljs-keyword">if</span> (!nodes || nodes.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...nodes.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> 
    node.<span class="hljs-property">children</span> ? <span class="hljs-title function_">getMaxDepth</span>(node.<span class="hljs-property">children</span>) : <span class="hljs-number">0</span>
  ));
}
</code></pre>
<p><strong>ç¤ºä¾‹è®¡ç®—</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ ‘ç»“æ„ï¼š
äºšå¤ªåŒº (<span class="hljs-attr">depth</span>=<span class="hljs-number">0</span>)
  â”œâ”€ ä¸­å›½ (<span class="hljs-attr">depth</span>=<span class="hljs-number">1</span>)
  â”‚   â”œâ”€ è·Ÿå›¢æ¸¸ (<span class="hljs-attr">depth</span>=<span class="hljs-number">2</span>)
  â”‚   â”‚   â”œâ”€ GMV (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)
  â”‚   â”‚   â””â”€ è®¢å• (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)
  â”‚   â””â”€ è‡ªç”±è¡Œ (<span class="hljs-attr">depth</span>=<span class="hljs-number">2</span>)
  â”‚       â”œâ”€ GMV (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)
  â”‚       â””â”€ è®¢å• (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)
  â””â”€ æ—¥æœ¬ (<span class="hljs-attr">depth</span>=<span class="hljs-number">1</span>)
      â””â”€ è·Ÿå›¢æ¸¸ (<span class="hljs-attr">depth</span>=<span class="hljs-number">2</span>)
          â”œâ”€ GMV (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)
          â””â”€ è®¢å• (<span class="hljs-attr">depth</span>=<span class="hljs-number">3</span>, å¶å­)

æœ€å¤§æ·±åº¦ <span class="hljs-attr">maxDepth</span> = <span class="hljs-number">4</span>

è®¡ç®—ç»“æœï¼š
èŠ‚ç‚¹          | æ·±åº¦ | å¶å­æ•° | colspan | rowspan
-------------|-----|--------|---------|--------
äºšå¤ªåŒº        | 0   | 6      | 6       | 1
ä¸­å›½          | 1   | 4      | 4       | 1
è·Ÿå›¢æ¸¸(ä¸­å›½)  | 2   | 2      | 2       | 1
GMV(ä¸­å›½è·Ÿå›¢) | 3   | 1      | 1       | 2 (maxDepth - 3 + 1)
è®¢å•(ä¸­å›½è·Ÿå›¢)| 3   | 1      | 1       | 2
è‡ªç”±è¡Œ        | 2   | 2      | 2       | 1
æ—¥æœ¬          | 1   | 2      | 2       | 1
è·Ÿå›¢æ¸¸(æ—¥æœ¬)  | 2   | 2      | 2       | 1
</code></pre>
<p><strong>æ­¥éª¤2ï¼šæŒ‰å±‚çº§å±•å¼€ä¸º HTML</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¸²æŸ“å¤šçº§è¡¨å¤´
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderHeader</span>(<span class="hljs-params">schema, type = <span class="hljs-string">'column'</span></span>) {
  <span class="hljs-keyword">const</span> maxDepth = <span class="hljs-title function_">getMaxDepth</span>(schema);
  <span class="hljs-keyword">const</span> rows = []; <span class="hljs-comment">// å­˜å‚¨æ¯ä¸€è¡Œçš„ th å…ƒç´ </span>
  
  <span class="hljs-comment">// DFS éå†æ ‘ï¼ŒæŒ‰å±‚çº§åˆ†ç»„</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">nodes, depth</span>) {
    <span class="hljs-keyword">if</span> (!rows[depth]) rows[depth] = [];
    
    nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> { rowspan, colspan } = <span class="hljs-title function_">calculateSpan</span>(node, maxDepth, depth);
      
      rows[depth].<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">label</span>: node.<span class="hljs-property">label</span>,
        <span class="hljs-attr">key</span>: node.<span class="hljs-property">key</span>,
        <span class="hljs-attr">rowspan</span>: type === <span class="hljs-string">'column'</span> ? rowspan : <span class="hljs-number">1</span>,
        <span class="hljs-attr">colspan</span>: type === <span class="hljs-string">'column'</span> ? colspan : <span class="hljs-number">1</span>
      });
      
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">children</span>, depth + <span class="hljs-number">1</span>);
      }
    });
  }
  
  <span class="hljs-title function_">traverse</span>(schema, <span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// ç”Ÿæˆ HTML</span>
  <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> <span class="hljs-string">`
    &lt;tr&gt;
      <span class="hljs-subst">${row.map(th =&gt; <span class="hljs-string">`
        &lt;th rowspan="<span class="hljs-subst">${th.rowspan}</span>" colspan="<span class="hljs-subst">${th.colspan}</span>" data-key="<span class="hljs-subst">${th.key}</span>"&gt;
          <span class="hljs-subst">${th.label}</span>
        &lt;/th&gt;
      `</span>).join(<span class="hljs-string">''</span>)}</span>
    &lt;/tr&gt;
  `</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
}
</code></pre>
<h5 data-id="heading-24">B. åæ ‡é”šå®šç³»ç»Ÿ</h5>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä¸ºæ¯ä¸€ä¸ªå•å…ƒæ ¼åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ IDï¼ˆå¦‚ <code>q1_m1_high_end|china_group_tour_gmv</code>ï¼‰ï¼Œå®ƒæ˜¯è¿æ¥è§†å›¾ä¸æ•°æ®çš„å”¯ä¸€çº½å¸¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è·å–æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆç”¨äºç”Ÿæˆå•å…ƒæ ¼åæ ‡ï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLeafNodes</span>(<span class="hljs-params">nodes, path = []</span>) {
  <span class="hljs-keyword">const</span> leaves = [];
  
  nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> currentPath = [...path, node.<span class="hljs-property">key</span>];
    
    <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span> || node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// å¶å­èŠ‚ç‚¹</span>
      leaves.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">key</span>: node.<span class="hljs-property">key</span>,
        <span class="hljs-attr">label</span>: node.<span class="hljs-property">label</span>,
        <span class="hljs-attr">path</span>: currentPath
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é€’å½’å­èŠ‚ç‚¹</span>
      leaves.<span class="hljs-title function_">push</span>(...<span class="hljs-title function_">getLeafNodes</span>(node.<span class="hljs-property">children</span>, currentPath));
    }
  });
  
  <span class="hljs-keyword">return</span> leaves;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> rowLeaves = <span class="hljs-title function_">getLeafNodes</span>(rowSchema);
<span class="hljs-keyword">const</span> colLeaves = <span class="hljs-title function_">getLeafNodes</span>(columnSchema);

<span class="hljs-comment">// ç”Ÿæˆæ‰€æœ‰å•å…ƒæ ¼åæ ‡</span>
<span class="hljs-keyword">const</span> cellCoordinates = [];
rowLeaves.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
  colLeaves.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> {
    cellCoordinates.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">coordinate</span>: <span class="hljs-string">`<span class="hljs-subst">${row.key}</span>|<span class="hljs-subst">${col.key}</span>`</span>,
      <span class="hljs-attr">rowLabel</span>: row.<span class="hljs-property">label</span>,
      <span class="hljs-attr">colLabel</span>: col.<span class="hljs-property">label</span>
    });
  });
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cellCoordinates);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// [</span>
<span class="hljs-comment">//   { coordinate: "q1_m1_high_end|china_group_tour_gmv", rowLabel: "é«˜ç«¯äº§å“çº¿", colLabel: "GMV" },</span>
<span class="hljs-comment">//   { coordinate: "q1_m1_high_end|china_group_tour_order", rowLabel: "é«˜ç«¯äº§å“çº¿", colLabel: "è®¢å•é‡" },</span>
<span class="hljs-comment">//   ...</span>
<span class="hljs-comment">// ]</span>
</code></pre>
<h5 data-id="heading-25">C. æ¸²æŸ“å®Œæ•´è¡¨æ ¼</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¸²æŸ“å®Œæ•´æŠ¥è¡¨
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderReport</span>(<span class="hljs-params">template, data</span>) {
  <span class="hljs-keyword">const</span> { rowSchema, columnSchema } = template.<span class="hljs-property">metadata</span>;
  
  <span class="hljs-comment">// 1. æ¸²æŸ“åˆ—è¡¨å¤´</span>
  <span class="hljs-keyword">const</span> colHeader = <span class="hljs-title function_">renderHeader</span>(columnSchema, <span class="hljs-string">'column'</span>);
  
  <span class="hljs-comment">// 2. è·å–è¡Œå’Œåˆ—çš„å¶å­èŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> rowLeaves = <span class="hljs-title function_">getLeafNodes</span>(rowSchema);
  <span class="hljs-keyword">const</span> colLeaves = <span class="hljs-title function_">getLeafNodes</span>(columnSchema);
  
  <span class="hljs-comment">// 3. å°†æ•°æ®è½¬ä¸º Map ä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾</span>
  <span class="hljs-keyword">const</span> dataMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${item.row_key}</span>|<span class="hljs-subst">${item.col_key}</span>`</span>;
    dataMap.<span class="hljs-title function_">set</span>(key, item.<span class="hljs-property">cell_value</span>);
  });
  
  <span class="hljs-comment">// 4. æ¸²æŸ“æ•°æ®è¡Œ</span>
  <span class="hljs-keyword">const</span> bodyRows = rowLeaves.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> cells = colLeaves.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> coordinate = <span class="hljs-string">`<span class="hljs-subst">${row.key}</span>|<span class="hljs-subst">${col.key}</span>`</span>;
      <span class="hljs-keyword">const</span> value = dataMap.<span class="hljs-title function_">get</span>(coordinate) || <span class="hljs-string">''</span>;
      
      <span class="hljs-keyword">return</span> <span class="hljs-string">`
        &lt;td data-coordinate="<span class="hljs-subst">${coordinate}</span>"&gt;
          &lt;input type="text" value="<span class="hljs-subst">${value}</span>" /&gt;
        &lt;/td&gt;
      `</span>;
    }).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`
      &lt;tr&gt;
        &lt;th&gt;<span class="hljs-subst">${row.label}</span>&lt;/th&gt;
        <span class="hljs-subst">${cells}</span>
      &lt;/tr&gt;
    `</span>;
  }).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
  
  <span class="hljs-comment">// 5. æ‹¼æ¥å®Œæ•´è¡¨æ ¼</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
    &lt;table&gt;
      &lt;thead&gt;
        <span class="hljs-subst">${colHeader}</span>
      &lt;/thead&gt;
      &lt;tbody&gt;
        <span class="hljs-subst">${bodyRows}</span>
      &lt;/tbody&gt;
    &lt;/table&gt;
  `</span>;
}
</code></pre>
<h4 data-id="heading-26">3.4 å®Œæ•´æ•°æ®æµè½¬å›¾</h4>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   1. é…ç½®ä¸å»ºæ¨¡å±‚ (è®¾è®¡é˜¶æ®µ)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŠ¥è¡¨è®¾è®¡å™¨ / JSONé…ç½®                                             â”‚
â”‚         â†“                                                        â”‚
â”‚  å…ƒæ•°æ®æ¨¡å‹ (Metadata)                                            â”‚
â”‚    â”œâ”€ å¤šçº§è¡¨å¤´ç»“æ„: Rowspan/Colspan                              â”‚
â”‚    â”œâ”€ æ ¡éªŒè§„åˆ™: æ•°å­—/å¿…å¡«                                         â”‚
â”‚    â””â”€ è®¡ç®—å…¬å¼: A1+B2=C3                                         â”‚
â”‚         â†“                                                        â”‚
â”‚  ä¿å­˜åˆ°æ•°æ®åº“ report_templates è¡¨                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   2. åŠ¨æ€æ¸²æŸ“å±‚ (å‰ç«¯é€»è¾‘)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŠ è½½å…ƒæ•°æ® (GET /api/template/tour_001)                         â”‚
â”‚         â†“                                                        â”‚
â”‚  æ¸²æŸ“å¼•æ“ (Renderer)                                              â”‚
â”‚    â”œâ”€ é€’å½’ç®—æ³•è®¡ç®—è¡¨å¤´åæ ‡                                        â”‚
â”‚    â”œâ”€ è™šæ‹Ÿæ»šåŠ¨ Grid æ¸²æŸ“                                          â”‚
â”‚    â””â”€ å¡«å……å•å…ƒæ ¼æ•°å€¼                                              â”‚
â”‚         â†“                                                        â”‚
â”‚  ä»æ•°æ®åº“è·å–å®ä¾‹æ•°æ® (GET /api/data/tour_001_2025_q1)           â”‚
â”‚         â†“                                                        â”‚
â”‚  åæ ‡æ˜ å°„ï¼šrow_key|col_key â†’ å•å…ƒæ ¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   3. äº¤äº’ä¸è®¡ç®—å±‚ (ç”¨æˆ·æ“ä½œ)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·å½•å…¥ / ä¿®æ”¹å•å…ƒæ ¼                                            â”‚
â”‚         â†“                                                        â”‚
â”‚  å…¬å¼å¼•æ“è®¡ç®— (HyperFormula)                                      â”‚
â”‚         â†“                                                        â”‚
â”‚  å®æ—¶æ ¡éªŒé€»è¾‘ (å¿…å¡«ã€æ•°æ®ç±»å‹ã€èŒƒå›´)                              â”‚
â”‚         â†“                                                        â”‚
â”‚  çŠ¶æ€ç®¡ç†å™¨ (Zustand / Redux)                                     â”‚
â”‚         â†“                                                        â”‚
â”‚  å·®å¼‚åŒ–æ›´æ–° â†’ åªæ›´æ–°å˜åŒ–çš„å•å…ƒæ ¼                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   4. å­˜å‚¨ä¸æ¼”è¿›å±‚ (æ•°æ®åº“)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æäº¤æ•°æ® (POST /api/data/tour_001_2025_q1)                      â”‚
â”‚         â†“                                                        â”‚
â”‚  ä¿å­˜åˆ° report_values è¡¨ (EAVæ¨¡å¼)                                â”‚
â”‚    â”œâ”€ æ¯ä¸ªå•å…ƒæ ¼ä¸€æ¡è®°å½•                                          â”‚
â”‚    â”œâ”€ è®°å½•åæ ‡: row_key, col_key                                 â”‚
â”‚    â””â”€ è®°å½•å€¼: cell_value                                         â”‚
â”‚         â†“                                                        â”‚
â”‚  ç‰ˆæœ¬æ§åˆ¶ / ä¿®æ”¹ç•™ç—•                                              â”‚
â”‚         â†“                                                        â”‚
â”‚  ä¸šåŠ¡å˜åŠ¨: å¢åŠ å­—æ®µ â†’ ä»…ä¿®æ”¹å…ƒæ•°æ®ï¼Œæ— éœ€æ”¹è¡¨ç»“æ„                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ•°æ®æµè¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>è®¾è®¡é˜¶æ®µ</strong>ï¼šç®¡ç†å‘˜é€šè¿‡é…ç½®ç•Œé¢å®šä¹‰æŠ¥è¡¨ç»“æ„ï¼Œç”Ÿæˆ JSON å…ƒæ•°æ®</li>
<li><strong>æ¸²æŸ“é˜¶æ®µ</strong>ï¼šå‰ç«¯åŠ è½½å…ƒæ•°æ®å’Œå®ä¾‹æ•°æ®ï¼Œæ¸²æŸ“å¼•æ“è‡ªåŠ¨ç”Ÿæˆè¡¨æ ¼</li>
<li><strong>äº¤äº’é˜¶æ®µ</strong>ï¼šç”¨æˆ·å¡«å†™æ•°æ®ï¼Œå…¬å¼å¼•æ“è‡ªåŠ¨è®¡ç®—ï¼ŒçŠ¶æ€ç®¡ç†å™¨è¿½è¸ªå˜æ›´</li>
<li><strong>å­˜å‚¨é˜¶æ®µ</strong>ï¼šæäº¤æ—¶åªä¿å­˜å˜æ›´çš„å•å…ƒæ ¼ï¼Œæ•°æ®åº“è®°å½•æ¯æ¬¡ä¿®æ”¹</li>
</ol>
<hr/>
<h3 data-id="heading-27">å››ã€æ ¸å¿ƒæŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-28">4.1 å¤šçº§è¡¨å¤´çš„æ ‘å½¢å»ºæ¨¡</h4>
<p><strong>å®Œæ•´ç¤ºä¾‹ï¼š2025å¹´é›†å›¢å…¨çƒæ—…æ¸¸ä¸šåŠ¡æ”¶å…¥ç»Ÿè®¡è¡¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> reportTemplate = {
  <span class="hljs-attr">template_id</span>: <span class="hljs-string">"tour_001"</span>,
  <span class="hljs-attr">template_name</span>: <span class="hljs-string">"2025å¹´é›†å›¢å…¨çƒæ—…æ¸¸ä¸šåŠ¡æ”¶å…¥ç»Ÿè®¡è¡¨"</span>,
  
  <span class="hljs-comment">// åˆ—è¡¨å¤´ï¼šæŒ‰"åŒºåŸŸ â†’ å›½å®¶ â†’ ä¸šåŠ¡ç±»å‹ â†’ æŒ‡æ ‡"å±‚çº§åµŒå¥—</span>
  <span class="hljs-attr">columnSchema</span>: [
    {
      <span class="hljs-attr">label</span>: <span class="hljs-string">"äºšå¤ªåŒº"</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">"asia"</span>,
      <span class="hljs-attr">children</span>: [
        {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸­å›½å¸‚åœº"</span>,
          <span class="hljs-attr">key</span>: <span class="hljs-string">"china"</span>,
          <span class="hljs-attr">children</span>: [
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">"è·Ÿå›¢æ¸¸"</span>,
              <span class="hljs-attr">key</span>: <span class="hljs-string">"group_tour"</span>,
              <span class="hljs-attr">children</span>: [
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_group_tour_gmv"</span> },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_group_tour_order"</span> }
              ]
            },
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">"è‡ªç”±è¡Œ"</span>,
              <span class="hljs-attr">key</span>: <span class="hljs-string">"indie_tour"</span>,
              <span class="hljs-attr">children</span>: [
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_indie_tour_gmv"</span> },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_indie_tour_order"</span> }
              ]
            },
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">"ç›´æ’­ç”µå•†"</span>,
              <span class="hljs-attr">key</span>: <span class="hljs-string">"live_commerce"</span>,
              <span class="hljs-attr">children</span>: [
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_live_commerce_gmv"</span> },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_live_commerce_order"</span> }
              ]
            }
          ]
        },
        {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"æ—¥æœ¬å¸‚åœº"</span>,
          <span class="hljs-attr">key</span>: <span class="hljs-string">"japan"</span>,
          <span class="hljs-attr">children</span>: [
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">"è·Ÿå›¢æ¸¸"</span>,
              <span class="hljs-attr">key</span>: <span class="hljs-string">"group_tour"</span>,
              <span class="hljs-attr">children</span>: [
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"japan_group_tour_gmv"</span> },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"japan_group_tour_order"</span> }
              ]
            }
          ]
        }
      ]
    }
  ],
  
  <span class="hljs-comment">// è¡Œè¡¨å¤´ï¼šæŒ‰"å­£åº¦ â†’ æœˆä»½ â†’ äº§å“çº¿ â†’ æ¸ é“"å±‚çº§åµŒå¥—</span>
  <span class="hljs-attr">rowSchema</span>: [
    {
      <span class="hljs-attr">label</span>: <span class="hljs-string">"2025å¹´ç¬¬1å­£åº¦"</span>,
      <span class="hljs-attr">key</span>: <span class="hljs-string">"year_2025_quarter_1"</span>,
      <span class="hljs-attr">children</span>: [
        {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"1æœˆ"</span>,
          <span class="hljs-attr">key</span>: <span class="hljs-string">"quarter_1_month_1"</span>,
          <span class="hljs-attr">children</span>: [
            { 
              <span class="hljs-attr">label</span>: <span class="hljs-string">"é«˜ç«¯äº§å“çº¿-APPæ¸ é“"</span>, 
              <span class="hljs-attr">key</span>: <span class="hljs-string">"quarter_1_month_1_high_end_app"</span> 
            },
            { 
              <span class="hljs-attr">label</span>: <span class="hljs-string">"é«˜ç«¯äº§å“çº¿-å°ç¨‹åºæ¸ é“"</span>, 
              <span class="hljs-attr">key</span>: <span class="hljs-string">"quarter_1_month_1_high_end_miniapp"</span> 
            }
          ]
        },
        {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"2æœˆ"</span>,
          <span class="hljs-attr">key</span>: <span class="hljs-string">"quarter_1_month_2"</span>,
          <span class="hljs-attr">children</span>: [
            { 
              <span class="hljs-attr">label</span>: <span class="hljs-string">"é«˜ç«¯äº§å“çº¿-APPæ¸ é“"</span>, 
              <span class="hljs-attr">key</span>: <span class="hljs-string">"quarter_1_month_2_high_end_app"</span> 
            }
          ]
        }
      ]
    }
  ]
};
</code></pre>
<h4 data-id="heading-29">4.2 æ•°æ®å­˜å‚¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ’å…¥ç¤ºä¾‹æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> report_values (report_id, template_id, row_key, col_key, cell_value, updated_at) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'tour_001_2025_q1'</span>, <span class="hljs-string">'tour_001'</span>, <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-string">'china_group_tour_gmv'</span>, <span class="hljs-string">'500000'</span>, <span class="hljs-string">'2025-01-15 10:30:00'</span>),
(<span class="hljs-string">'tour_001_2025_q1'</span>, <span class="hljs-string">'tour_001'</span>, <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-string">'china_group_tour_order'</span>, <span class="hljs-string">'1200'</span>, <span class="hljs-string">'2025-01-15 10:30:00'</span>),
(<span class="hljs-string">'tour_001_2025_q1'</span>, <span class="hljs-string">'tour_001'</span>, <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-string">'china_indie_tour_gmv'</span>, <span class="hljs-string">'300000'</span>, <span class="hljs-string">'2025-01-15 10:31:00'</span>),
(<span class="hljs-string">'tour_001_2025_q1'</span>, <span class="hljs-string">'tour_001'</span>, <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-string">'china_live_commerce_gmv'</span>, <span class="hljs-string">'800000'</span>, <span class="hljs-string">'2025-01-15 10:31:00'</span>);
</code></pre>
<p><strong>åæ ‡è¯´æ˜</strong>ï¼ˆå®Œæ•´è§£é‡Šï¼Œæ— ç¼©å†™ï¼‰ï¼š</p>
<ul>
<li><code>quarter_1_month_1_high_end_app</code>ï¼šç¬¬1å­£åº¦ â†’ 1æœˆ â†’ é«˜ç«¯äº§å“çº¿ â†’ APPæ¸ é“</li>
<li><code>china_group_tour_gmv</code>ï¼šäºšå¤ªåŒº â†’ ä¸­å›½å¸‚åœº â†’ è·Ÿå›¢æ¸¸ â†’ GMVï¼ˆä¸‡å…ƒï¼‰</li>
<li>å®Œæ•´åæ ‡ï¼š<code>quarter_1_month_1_high_end_app|china_group_tour_gmv</code> è¡¨ç¤º"ç¬¬1å­£åº¦1æœˆé«˜ç«¯äº§å“çº¿APPæ¸ é“çš„ä¸­å›½è·Ÿå›¢æ¸¸GMV"</li>
</ul>
<h4 data-id="heading-30">4.3 å‰ç«¯å›æ˜¾ç®—æ³•ï¼šåæ ‡æ˜ å°„</h4>
<h5 data-id="heading-31">æ­¥éª¤1ï¼šæ•°æ®åº“æŸ¥è¯¢ï¼Œè·å–æ‰å¹³æ•°æ®</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> row_key, col_key, cell_value 
<span class="hljs-keyword">FROM</span> report_values 
<span class="hljs-keyword">WHERE</span> report_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001_2025_q1'</span>;
</code></pre>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>

























<table><thead><tr><th>row_key</th><th>col_key</th><th>cell_value</th></tr></thead><tbody><tr><td>quarter_1_month_1_high_end_app</td><td>china_group_tour_gmv</td><td>500000</td></tr><tr><td>quarter_1_month_1_high_end_app</td><td>china_group_tour_order</td><td>1200</td></tr><tr><td>quarter_1_month_1_high_end_app</td><td>china_indie_tour_gmv</td><td>300000</td></tr></tbody></table>
<h5 data-id="heading-32">æ­¥éª¤2ï¼šè½¬æ¢ä¸º Map ç»“æ„</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å°†æ‰å¹³æ•°æ®è½¬ä¸º Mapï¼Œä¾¿äºå¿«é€ŸæŸ¥æ‰¾
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToMap</span>(<span class="hljs-params">dataArray</span>) {
  <span class="hljs-keyword">const</span> dataMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  
  dataArray.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${item.row_key}</span>|<span class="hljs-subst">${item.col_key}</span>`</span>;
    dataMap.<span class="hljs-title function_">set</span>(key, item.<span class="hljs-property">cell_value</span>);
  });
  
  <span class="hljs-keyword">return</span> dataMap;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> rawData = [
  { <span class="hljs-attr">row_key</span>: <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-attr">col_key</span>: <span class="hljs-string">'china_group_tour_gmv'</span>, <span class="hljs-attr">cell_value</span>: <span class="hljs-string">'500000'</span> },
  { <span class="hljs-attr">row_key</span>: <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>, <span class="hljs-attr">col_key</span>: <span class="hljs-string">'china_group_tour_order'</span>, <span class="hljs-attr">cell_value</span>: <span class="hljs-string">'1200'</span> }
];

<span class="hljs-keyword">const</span> dataMap = <span class="hljs-title function_">convertToMap</span>(rawData);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dataMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">'quarter_1_month_1_high_end_app|china_group_tour_gmv'</span>)); <span class="hljs-comment">// è¾“å‡º: 500000</span>
</code></pre>
<h5 data-id="heading-33">æ­¥éª¤3ï¼šåŒé‡å¾ªç¯å¡«å……æ•°æ®</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¸²æŸ“æ•°æ®å•å…ƒæ ¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDataCells</span>(<span class="hljs-params">rowLeaves, colLeaves, dataMap</span>) {
  <span class="hljs-keyword">const</span> rows = [];
  
  <span class="hljs-comment">// å¤–å±‚å¾ªç¯ï¼šéå†æ‰€æœ‰è¡Œå¶å­èŠ‚ç‚¹</span>
  rowLeaves.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> cells = [];
    
    <span class="hljs-comment">// å†…å±‚å¾ªç¯ï¼šéå†æ‰€æœ‰åˆ—å¶å­èŠ‚ç‚¹</span>
    colLeaves.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> {
      <span class="hljs-comment">// æ‹¼æ¥åæ ‡</span>
      <span class="hljs-keyword">const</span> coordinate = <span class="hljs-string">`<span class="hljs-subst">${row.key}</span>|<span class="hljs-subst">${col.key}</span>`</span>;
      
      <span class="hljs-comment">// ä» Map ä¸­å–å€¼</span>
      <span class="hljs-keyword">const</span> value = dataMap.<span class="hljs-title function_">get</span>(coordinate) || <span class="hljs-string">''</span>;
      
      cells.<span class="hljs-title function_">push</span>({
        coordinate,
        value,
        <span class="hljs-attr">rowLabel</span>: row.<span class="hljs-property">label</span>,
        <span class="hljs-attr">colLabel</span>: col.<span class="hljs-property">label</span>
      });
    });
    
    rows.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">rowKey</span>: row.<span class="hljs-property">key</span>,
      <span class="hljs-attr">rowLabel</span>: row.<span class="hljs-property">label</span>,
      cells
    });
  });
  
  <span class="hljs-keyword">return</span> rows;
}
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>
<p><strong>æƒ…å†µAï¼šæ–°å¢äº†ä¸€åˆ—</strong>ï¼ˆå…ƒæ•°æ®å˜äº†ï¼‰</p>
<ul>
<li>æ•°æ®åº“ï¼šæ²¡æœ‰æ–°åˆ—çš„æ•°æ®</li>
<li>æ¸²æŸ“é€»è¾‘ï¼šå¾ªç¯åˆ°æ–°åˆ—æ—¶ï¼Œå» <code>dataMap</code> é‡Œæ‰¾ï¼Œæ‰¾ä¸åˆ°è¿”å› <code>undefined</code></li>
<li>ç»“æœï¼šé¡µé¢ä¸Šå‡ºç°æ–°åˆ—ï¼Œæ ¼å­æ˜¯ç©ºçš„ï¼Œç”¨æˆ·è¾“å…¥å¹¶ä¿å­˜åï¼Œæ•°æ®åº“æ‰äº§ç”Ÿè¿™ä¸€åˆ—çš„æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>æƒ…å†µBï¼šåˆ é™¤äº†æ—§åˆ—</strong>ï¼ˆå…ƒæ•°æ®åˆ äº†ï¼‰</p>
<ul>
<li>æ•°æ®åº“ï¼šè¿˜å­˜ç€é‚£ä¸€åˆ—çš„æ•°æ®</li>
<li>æ¸²æŸ“é€»è¾‘ï¼šåŸºäºæœ€æ–°çš„ <code>columnSchema</code> å¾ªç¯ï¼Œæ—¢ç„¶ Schema é‡Œæ²¡è¿™ä¸€åˆ—äº†ï¼Œå¾ªç¯å‹æ ¹ä¸ä¼šèµ°åˆ°é‚£ä¸€åˆ—</li>
<li>ç»“æœï¼šé¡µé¢ä¸Šè¯¥åˆ—è‡ªåŠ¨æ¶ˆå¤±ï¼Œå³ä¾¿ <code>dataMap</code> é‡Œè¿˜æœ‰å€¼ï¼Œä¹Ÿä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥</li>
</ul>
</li>
<li>
<p><strong>æƒ…å†µCï¼šè¡Œæˆ–åˆ—çš„é¡ºåºè°ƒæ¢äº†</strong></p>
<ul>
<li>æ¸²æŸ“é€»è¾‘ï¼šå› ä¸ºæ˜¯æ ¹æ® <code>row_key|col_key</code> åŠ¨æ€åŒ¹é…çš„ï¼Œæ— è®ºåœ¨ Schema é‡Œæ€ä¹ˆè°ƒæ¢é¡ºåºï¼Œåªè¦ Key ä¸å˜ï¼Œæ•°æ®æ€»èƒ½ç²¾å‡†åœ°"é’»"è¿›å¯¹åº”çš„æ ¼å­é‡Œ</li>
</ul>
</li>
</ul>
<h4 data-id="heading-34">4.4 å…¬å¼å¼•æ“é›†æˆæ–¹æ¡ˆ</h4>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šä¸è¦è‡ªç ”å…¬å¼å¼•æ“</p>
<p>Excel çš„å…¬å¼ï¼ˆVLOOKUPã€SUMIFç­‰ï¼‰æå…¶å¤æ‚ï¼Œå»ºè®®é›†æˆ <strong>HyperFormula</strong> è¿™æ ·çš„å¼€æºè®¡ç®—å¼•æ“ã€‚</p>
<h5 data-id="heading-35">å®‰è£… HyperFormula</h5>
<pre><code class="hljs language-bash" lang="bash">npm install hyperformula
</code></pre>
<h5 data-id="heading-36">é›†æˆç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HyperFormula</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'hyperformula'</span>;

<span class="hljs-comment">/**
 * åˆå§‹åŒ–å…¬å¼å¼•æ“
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">initFormulaEngine</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> engine = <span class="hljs-title class_">HyperFormula</span>.<span class="hljs-title function_">buildEmpty</span>({
    <span class="hljs-attr">licenseKey</span>: <span class="hljs-string">'gpl-v3'</span>,
    <span class="hljs-attr">useColumnIndex</span>: <span class="hljs-literal">false</span>
  });
  
  <span class="hljs-keyword">return</span> engine;
}

<span class="hljs-comment">/**
 * æ³¨å†Œå•å…ƒæ ¼å…¬å¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">registerFormula</span>(<span class="hljs-params">engine, coordinate, formula, dataMap</span>) {
  <span class="hljs-comment">// å°†å…¬å¼ä¸­çš„ {coordinate} å¼•ç”¨è½¬æ¢ä¸ºå®é™…å€¼</span>
  <span class="hljs-keyword">const</span> resolvedFormula = formula.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{([^}]+)\}/g</span>, <span class="hljs-function">(<span class="hljs-params">match, coord</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> value = dataMap.<span class="hljs-title function_">get</span>(coord) || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> value;
  });
  
  <span class="hljs-comment">// æ·»åŠ åˆ° HyperFormula</span>
  <span class="hljs-keyword">const</span> sheetId = engine.<span class="hljs-title function_">addSheet</span>(<span class="hljs-string">'Sheet1'</span>);
  engine.<span class="hljs-title function_">setCellContents</span>({ <span class="hljs-attr">sheet</span>: sheetId, <span class="hljs-attr">col</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">row</span>: <span class="hljs-number">0</span> }, [[resolvedFormula]]);
  
  <span class="hljs-comment">// è·å–è®¡ç®—ç»“æœ</span>
  <span class="hljs-keyword">const</span> result = engine.<span class="hljs-title function_">getCellValue</span>({ <span class="hljs-attr">sheet</span>: sheetId, <span class="hljs-attr">col</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">row</span>: <span class="hljs-number">0</span> });
  
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> engine = <span class="hljs-title function_">initFormulaEngine</span>();
<span class="hljs-keyword">const</span> dataMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([
  [<span class="hljs-string">'q1_m1|china_group_tour_gmv'</span>, <span class="hljs-number">500000</span>],
  [<span class="hljs-string">'q1_m1|china_indie_tour_gmv'</span>, <span class="hljs-number">300000</span>]
]);

<span class="hljs-comment">// è®¡ç®—ä¸­å›½å¸‚åœºæ€»GMV</span>
<span class="hljs-keyword">const</span> formula = <span class="hljs-string">'SUM({q1_m1|china_group_tour_gmv}, {q1_m1|china_indie_tour_gmv})'</span>;
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">registerFormula</span>(engine, <span class="hljs-string">'q1_m1|china_total_gmv'</span>, formula, dataMap);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// è¾“å‡º: 800000</span>
</code></pre>
<hr/>
<h3 data-id="heading-37">äº”ã€æ•°æ®åº“è®¾è®¡æ–¹æ¡ˆ</h3>
<h4 data-id="heading-38">5.1 å…ƒæ•°æ®è¡¨è®¾è®¡</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŠ¥è¡¨æ¨¡æ¿è¡¨ï¼šå­˜å‚¨æ¯å¼ æŠ¥è¡¨çš„"è®¾è®¡å›¾çº¸"</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_templates (
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">PRIMARY</span> KEY COMMENT <span class="hljs-string">'æŠ¥è¡¨å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ tour_001'</span>,
  template_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŠ¥è¡¨åç§°'</span>,
  column_schema JSON <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ—è¡¨å¤´çš„æ ‘ç»“æ„'</span>,
  row_schema JSON <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¡Œè¡¨å¤´çš„æ ‘ç»“æ„'</span>,
  validation_rules JSON COMMENT <span class="hljs-string">'æ ¡éªŒè§„åˆ™'</span>,
  formulas JSON COMMENT <span class="hljs-string">'è®¡ç®—å…¬å¼'</span>,
  styles JSON COMMENT <span class="hljs-string">'æ ·å¼é…ç½®'</span>,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  updated_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  created_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
  
  INDEX idx_name (template_name)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŠ¥è¡¨å…ƒæ•°æ®è¡¨'</span>;
</code></pre>
<p>å¤šç»„ç»‡ä¸æƒé™ç›¸å…³è¡¨ï¼ˆåˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨ã€ç»„ç»‡è¡¨ã€äº§å“-ä¼ä¸šå…³è”è¡¨ç­‰ï¼‰è§<strong>ç¬¬åäºŒç«  12.9</strong>ã€‚</p>
<h4 data-id="heading-39">5.2 å®ä¾‹æ•°æ®è¡¨è®¾è®¡ï¼ˆEAVæ¨¡å¼ï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŠ¥è¡¨å®ä¾‹å€¼è¡¨ï¼šå­˜å‚¨æ‰€æœ‰æŠ¥è¡¨çš„å®é™…æ•°å€¼</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_values (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  report_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŠ¥è¡¨å®ä¾‹IDï¼Œå¦‚ tour_001_2025_q1'</span>,
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å…³è”çš„æ¨¡æ¿ID'</span>,
  row_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¡Œåæ ‡'</span>,
  col_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ—åæ ‡'</span>,
  cell_value TEXT COMMENT <span class="hljs-string">'å•å…ƒæ ¼çš„å€¼'</span>,
  updated_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  updated_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
  
  INDEX idx_report (report_id),
  INDEX idx_template (template_id),
  INDEX idx_coordinate (row_key, col_key),
  <span class="hljs-keyword">UNIQUE</span> KEY uk_cell (report_id, row_key, col_key),
  
  <span class="hljs-keyword">FOREIGN</span> KEY (template_id) <span class="hljs-keyword">REFERENCES</span> report_templates(template_id)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŠ¥è¡¨å®ä¾‹æ•°æ®è¡¨ï¼ˆEAVæ¨¡å¼ï¼‰'</span>;
</code></pre>
<h4 data-id="heading-40">5.3 ç»Ÿè®¡å®½è¡¨è®¾è®¡</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®½è¡¨ï¼Ÿ</strong></p>
<p>EAV æ¨¡å¼è™½ç„¶çµæ´»ï¼Œä½†ä¸é€‚åˆå¤æ‚çš„ç»Ÿè®¡æŸ¥è¯¢ï¼ˆå¦‚ï¼šè¿‘ä¸‰ä¸ªæœˆ GMV è¶‹åŠ¿ï¼‰ã€‚è§£å†³æ–¹æ¡ˆæ˜¯<strong>å¼‚æ­¥"æ‰“å¹³"åˆ°å®½è¡¨</strong>ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç»Ÿè®¡å®½è¡¨ï¼šä¸“é—¨ç”¨äºæ•°æ®åˆ†æ</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_fact_table (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  report_date <span class="hljs-type">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»Ÿè®¡æ—¥æœŸ'</span>,
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŠ¥è¡¨æ¨¡æ¿ID'</span>,
  region <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">'åŒºåŸŸ'</span>,
  country <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">'å›½å®¶'</span>,
  business_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">'ä¸šåŠ¡ç±»å‹'</span>,
  metric_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŒ‡æ ‡åç§°'</span>,
  metric_value <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">20</span>,<span class="hljs-number">2</span>) COMMENT <span class="hljs-string">'æŒ‡æ ‡å€¼'</span>,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  
  INDEX idx_date (report_date),
  INDEX idx_template (template_id),
  INDEX idx_metric (metric_name),
  INDEX idx_dimension (region, country, business_type)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŠ¥è¡¨ç»Ÿè®¡å®½è¡¨'</span>;
</code></pre>
<p><strong>å®½è¡¨æ•°æ®ç¤ºä¾‹</strong>ï¼š</p>













































<table><thead><tr><th>report_date</th><th>region</th><th>country</th><th>business_type</th><th>metric_name</th><th>metric_value</th></tr></thead><tbody><tr><td>2025-01-01</td><td>äºšå¤ªåŒº</td><td>ä¸­å›½</td><td>è·Ÿå›¢æ¸¸</td><td>GMV</td><td>500000</td></tr><tr><td>2025-01-01</td><td>äºšå¤ªåŒº</td><td>ä¸­å›½</td><td>è·Ÿå›¢æ¸¸</td><td>è®¢å•é‡</td><td>1200</td></tr><tr><td>2025-01-01</td><td>äºšå¤ªåŒº</td><td>ä¸­å›½</td><td>è‡ªç”±è¡Œ</td><td>GMV</td><td>300000</td></tr><tr><td>2025-02-01</td><td>äºšå¤ªåŒº</td><td>ä¸­å›½</td><td>è·Ÿå›¢æ¸¸</td><td>GMV</td><td>520000</td></tr></tbody></table>
<p><strong>æŸ¥è¯¢ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢ä¸­å›½å¸‚åœºè·Ÿå›¢æ¸¸è¿‘ä¸‰ä¸ªæœˆçš„GMVè¶‹åŠ¿</span>
<span class="hljs-keyword">SELECT</span> 
  report_date,
  <span class="hljs-built_in">SUM</span>(metric_value) <span class="hljs-keyword">as</span> total_gmv
<span class="hljs-keyword">FROM</span> report_fact_table
<span class="hljs-keyword">WHERE</span> template_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001'</span>
  <span class="hljs-keyword">AND</span> country <span class="hljs-operator">=</span> <span class="hljs-string">'ä¸­å›½'</span>
  <span class="hljs-keyword">AND</span> business_type <span class="hljs-operator">=</span> <span class="hljs-string">'è·Ÿå›¢æ¸¸'</span>
  <span class="hljs-keyword">AND</span> metric_name <span class="hljs-operator">=</span> <span class="hljs-string">'GMV'</span>
  <span class="hljs-keyword">AND</span> report_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01'</span>
  <span class="hljs-keyword">AND</span> report_date <span class="hljs-operator">&lt;=</span> <span class="hljs-string">'2025-03-31'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> report_date
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> report_date;
</code></pre>
<h4 data-id="heading-41">5.4 æ•°æ®åŒæ­¥ç­–ç•¥</h4>
<p><strong>ç­–ç•¥Aï¼šå®æ—¶è§¦å‘åŒæ­¥</strong>ï¼ˆæ•°æ®é‡è¾ƒå°æ—¶ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ä¿å­˜æŠ¥è¡¨æ•°æ®æ—¶è§¦å‘å®½è¡¨åŒæ­¥
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveReportData</span>(<span class="hljs-params">reportId, templateId, changes</span>) {
  <span class="hljs-comment">// 1. ä¿å­˜åˆ° EAV è¡¨</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">transaction</span>(<span class="hljs-keyword">async</span> (trx) =&gt; {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">trx</span>(<span class="hljs-string">'report_values'</span>).<span class="hljs-title function_">insert</span>({
        <span class="hljs-attr">report_id</span>: reportId,
        <span class="hljs-attr">template_id</span>: templateId,
        <span class="hljs-attr">row_key</span>: change.<span class="hljs-property">rowKey</span>,
        <span class="hljs-attr">col_key</span>: change.<span class="hljs-property">colKey</span>,
        <span class="hljs-attr">cell_value</span>: change.<span class="hljs-property">value</span>,
        <span class="hljs-attr">updated_by</span>: change.<span class="hljs-property">userId</span>
      }).<span class="hljs-title function_">onConflict</span>([<span class="hljs-string">'report_id'</span>, <span class="hljs-string">'row_key'</span>, <span class="hljs-string">'col_key'</span>]).<span class="hljs-title function_">merge</span>();
    }
  });
  
  <span class="hljs-comment">// 2. å¼‚æ­¥åŒæ­¥åˆ°å®½è¡¨</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">syncToFactTable</span>(reportId, templateId, changes);
}

<span class="hljs-comment">/**
 * åŒæ­¥åˆ°å®½è¡¨
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">syncToFactTable</span>(<span class="hljs-params">reportId, templateId, changes</span>) {
  <span class="hljs-keyword">const</span> template = <span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_templates'</span>)
    .<span class="hljs-title function_">where</span>(<span class="hljs-string">'template_id'</span>, templateId)
    .<span class="hljs-title function_">first</span>();
  
  <span class="hljs-comment">// è§£æåæ ‡ï¼Œæå–ç»´åº¦ä¿¡æ¯</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
    <span class="hljs-keyword">const</span> dimensions = <span class="hljs-title function_">parseCoordinate</span>(
      change.<span class="hljs-property">rowKey</span>, 
      change.<span class="hljs-property">colKey</span>, 
      template
    );
    
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_fact_table'</span>).<span class="hljs-title function_">insert</span>({
      <span class="hljs-attr">report_date</span>: dimensions.<span class="hljs-property">date</span>,
      <span class="hljs-attr">template_id</span>: templateId,
      <span class="hljs-attr">region</span>: dimensions.<span class="hljs-property">region</span>,
      <span class="hljs-attr">country</span>: dimensions.<span class="hljs-property">country</span>,
      <span class="hljs-attr">business_type</span>: dimensions.<span class="hljs-property">businessType</span>,
      <span class="hljs-attr">metric_name</span>: dimensions.<span class="hljs-property">metricName</span>,
      <span class="hljs-attr">metric_value</span>: change.<span class="hljs-property">value</span>
    }).<span class="hljs-title function_">onConflict</span>([<span class="hljs-string">'report_date'</span>, <span class="hljs-string">'template_id'</span>, <span class="hljs-string">'metric_name'</span>, <span class="hljs-string">'country'</span>, <span class="hljs-string">'business_type'</span>])
      .<span class="hljs-title function_">merge</span>();
  }
}
</code></pre>
<p><strong>ç­–ç•¥Bï¼šå®šæ—¶å…¨é‡/å¢é‡é‡åˆ·</strong>ï¼ˆé›†å›¢çº§å¸¸ç”¨ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®šæ—¶ä»»åŠ¡ï¼šæ¯å°æ—¶åŒæ­¥ä¸€æ¬¡
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">scheduledSyncJob</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> oneHourAgo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-number">3600000</span>);
  
  <span class="hljs-comment">// æŸ¥è¯¢æœ€è¿‘ä¸€å°æ—¶å†…ä¿®æ”¹è¿‡çš„æŠ¥è¡¨æ•°æ®</span>
  <span class="hljs-keyword">const</span> recentChanges = <span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_values'</span>)
    .<span class="hljs-title function_">where</span>(<span class="hljs-string">'updated_at'</span>, <span class="hljs-string">'&gt;='</span>, oneHourAgo)
    .<span class="hljs-title function_">select</span>(<span class="hljs-string">'*'</span>);
  
  <span class="hljs-comment">// æ‰¹é‡åŒæ­¥åˆ°å®½è¡¨</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">batchSyncToFactTable</span>(recentChanges);
}

<span class="hljs-comment">// ä½¿ç”¨ Node.js çš„ cron åº“è®¾ç½®å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">const</span> cron = <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-cron'</span>);
cron.<span class="hljs-title function_">schedule</span>(<span class="hljs-string">'0 * * * *'</span>, scheduledSyncJob); <span class="hljs-comment">// æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡</span>
</code></pre>
<p><strong>å®½è¡¨æ›´æ–°è§„åˆ™</strong>ï¼š</p>
<ul>
<li>å¦‚æœåŸå§‹æ•°æ®å˜åŒ–äº†ï¼Œå®½è¡¨ä½¿ç”¨ <code>UPSERT</code> è¯­æ³•æ›´æ–°</li>
<li>MySQL ä½¿ç”¨ <code>INSERT ... ON DUPLICATE KEY UPDATE</code></li>
<li>PostgreSQL ä½¿ç”¨ <code>INSERT ... ON CONFLICT DO UPDATE</code></li>
</ul>
<hr/>
<h3 data-id="heading-42">å…­ã€åŠ¨æ€æ‰©å±•èƒ½åŠ›</h3>
<h4 data-id="heading-43">6.1 æ–°å¢å­—æ®µçš„å¤„ç†æµç¨‹</h4>
<p><strong>åœºæ™¯</strong>ï¼šé›†å›¢è¦æ±‚åœ¨"ä¸­å›½å¸‚åœº"ä¸‹å¢åŠ "ç›´æ’­ç”µå•†"ä¸šåŠ¡ç±»å‹</p>
<h5 data-id="heading-44">æ­¥éª¤1ï¼šä¿®æ”¹å…ƒæ•°æ®</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®¡ç†å‘˜åœ¨åå°é…ç½®ç•Œé¢æ“ä½œ</span>
<span class="hljs-keyword">const</span> updatedColumnSchema = [...columnSchema];
updatedColumnSchema[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">label</span>: <span class="hljs-string">"ç›´æ’­ç”µå•†"</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-string">"live_commerce"</span>,
  <span class="hljs-attr">children</span>: [
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"GMVï¼ˆä¸‡å…ƒï¼‰"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_live_commerce_gmv"</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•é‡"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"china_live_commerce_order"</span> }
  ]
});

<span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_templates'</span>)
  .<span class="hljs-title function_">where</span>(<span class="hljs-string">'template_id'</span>, <span class="hljs-string">'tour_001'</span>)
  .<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">column_schema</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(updatedColumnSchema),
    <span class="hljs-attr">updated_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
  });
</code></pre>
<h5 data-id="heading-45">æ­¥éª¤2ï¼šå‰ç«¯è‡ªåŠ¨å›æ˜¾</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œæ¸²æŸ“å¼•æ“é‡æ–°åŠ è½½å…ƒæ•°æ®</span>
<span class="hljs-keyword">const</span> template = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/template/tour_001'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>());
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data/tour_001_2025_q1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// æ¸²æŸ“å¼•æ“æ‰«ææœ€æ–°çš„ columnSchema</span>
<span class="hljs-keyword">const</span> colLeaves = <span class="hljs-title function_">getLeafNodes</span>(template.<span class="hljs-property">columnSchema</span>);
<span class="hljs-comment">// colLeaves ç°åœ¨åŒ…å«äº†æ–°å¢çš„ "china_live_commerce_gmv" å’Œ "china_live_commerce_order"</span>

<span class="hljs-comment">// æ¸²æŸ“è¡¨æ ¼</span>
<span class="hljs-keyword">const</span> dataMap = <span class="hljs-title function_">convertToMap</span>(data);
colLeaves.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> coordinate = <span class="hljs-string">`<span class="hljs-subst">${currentRow.key}</span>|<span class="hljs-subst">${col.key}</span>`</span>;
  <span class="hljs-keyword">const</span> value = dataMap.<span class="hljs-title function_">get</span>(coordinate) || <span class="hljs-string">''</span>; <span class="hljs-comment">// æ–°åˆ—æ‰¾ä¸åˆ°å€¼ï¼Œæ˜¾ç¤ºä¸ºç©º</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åæ ‡: <span class="hljs-subst">${coordinate}</span>, å€¼: <span class="hljs-subst">${value}</span>`</span>);
  <span class="hljs-comment">// è¾“å‡º: åæ ‡: quarter_1_month_1_high_end_app|china_live_commerce_gmv, å€¼: (ç©º)</span>
});
</code></pre>
<h5 data-id="heading-46">æ­¥éª¤3ï¼šç”¨æˆ·å¡«å†™å¹¶ä¿å­˜</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·åœ¨æ–°åˆ—è¾“å…¥æ•°æ®</span>
<span class="hljs-keyword">const</span> newData = {
  <span class="hljs-attr">row_key</span>: <span class="hljs-string">'quarter_1_month_1_high_end_app'</span>,
  <span class="hljs-attr">col_key</span>: <span class="hljs-string">'china_live_commerce_gmv'</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-string">'800000'</span>
};

<span class="hljs-comment">// æäº¤åˆ°åç«¯</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data/tour_001_2025_q1'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newData)
});

<span class="hljs-comment">// åç«¯æ’å…¥æ•°æ®åº“</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_values'</span>).<span class="hljs-title function_">insert</span>({
  <span class="hljs-attr">report_id</span>: <span class="hljs-string">'tour_001_2025_q1'</span>,
  <span class="hljs-attr">template_id</span>: <span class="hljs-string">'tour_001'</span>,
  <span class="hljs-attr">row_key</span>: newData.<span class="hljs-property">row_key</span>,
  <span class="hljs-attr">col_key</span>: newData.<span class="hljs-property">col_key</span>,
  <span class="hljs-attr">cell_value</span>: newData.<span class="hljs-property">value</span>,
  <span class="hljs-attr">updated_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
});
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>æ“ä½œï¼šåœ¨å…ƒæ•°æ®ï¼ˆcolumnSchemaï¼‰é‡Œå¢åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ†é…ä¸€ä¸ªæ–°çš„ keyï¼ˆå¦‚ <code>live_commerce</code>ï¼‰</li>
<li>å›æ˜¾ï¼šæ¸²æŸ“å¼•æ“æ‰«ææœ€æ–°çš„ Schema ç”»å‡ºæ–°åˆ—ã€‚åœ¨å¡«å……æ•°æ®é˜¶æ®µï¼Œå» <code>dataMap</code> é‡Œæ‰¾ <code>rowKey|live_commerce</code>ã€‚å› ä¸ºæ˜¯æ–°åˆ—ï¼Œæ‰¾ä¸åˆ°å€¼ï¼Œäºæ˜¯ input æ˜¾ç¤ºä¸ºç©º</li>
<li>ä¿å­˜ï¼šç”¨æˆ·è¾“å…¥æ–°å€¼å¹¶ä¿å­˜ï¼Œæ•°æ®åº“ <code>report_values</code> è¡¨å°±ä¼šå¤šå‡ºå‡ è¡Œå¸¦æœ‰æ–° <code>col_key</code> çš„è®°å½•</li>
</ul>
<p>è‹¥å·²å¼•å…¥åˆ—/è¡Œæƒé™è¡¨ï¼Œå¢åŠ æˆ–åˆ é™¤åˆ—/è¡Œæ—¶éœ€<strong>åŒæ­¥ç»´æŠ¤æƒé™è¡¨</strong>ï¼ˆå¦‚åˆ åˆ—æ—¶åˆ é™¤è¯¥ col_key çš„æƒé™è®°å½•ï¼‰ã€‚è¯¦è§<strong>ç¬¬åäºŒç«  12.5ã€12.9</strong>ã€‚</p>
<h4 data-id="heading-47">6.2 åˆ é™¤å­—æ®µçš„å¤„ç†æµç¨‹</h4>
<p><strong>åœºæ™¯</strong>ï¼šé›†å›¢å†³å®šå–æ¶ˆ"é‚®è½®ä¸šåŠ¡"</p>
<h5 data-id="heading-48">æ­¥éª¤1ï¼šä¿®æ”¹å…ƒæ•°æ®</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä» columnSchema ä¸­ç§»é™¤"é‚®è½®ä¸šåŠ¡"èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> updatedColumnSchema = columnSchema.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">region</span> =&gt;</span> ({
  ...region,
  <span class="hljs-attr">children</span>: region.<span class="hljs-property">children</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">country</span> =&gt;</span> ({
    ...country,
    <span class="hljs-attr">children</span>: country.<span class="hljs-property">children</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">business</span> =&gt;</span> business.<span class="hljs-property">key</span> !== <span class="hljs-string">'cruise'</span>)
  }))
}));

<span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_templates'</span>)
  .<span class="hljs-title function_">where</span>(<span class="hljs-string">'template_id'</span>, <span class="hljs-string">'tour_001'</span>)
  .<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">column_schema</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(updatedColumnSchema)
  });
</code></pre>
<h5 data-id="heading-49">æ­¥éª¤2ï¼šå‰ç«¯è‡ªåŠ¨éšè—</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·åˆ·æ–°é¡µé¢</span>
<span class="hljs-keyword">const</span> template = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/template/tour_001'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// æ¸²æŸ“å¼•æ“æ‰«ææœ€æ–°çš„ columnSchema</span>
<span class="hljs-keyword">const</span> colLeaves = <span class="hljs-title function_">getLeafNodes</span>(template.<span class="hljs-property">columnSchema</span>);
<span class="hljs-comment">// colLeaves ä¸­å·²ç»æ²¡æœ‰ "cruise" ç›¸å…³çš„åˆ—äº†</span>

<span class="hljs-comment">// æ¸²æŸ“è¡¨æ ¼æ—¶ï¼Œå¾ªç¯ä¸ä¼šèµ°åˆ° "cruise" åˆ—</span>
<span class="hljs-comment">// ç»“æœï¼šé¡µé¢ä¸Šè¯¥åˆ—è‡ªåŠ¨æ¶ˆå¤±</span>
</code></pre>
<h5 data-id="heading-50">æ­¥éª¤3ï¼šæ•°æ®åº“çŠ¶æ€</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ•°æ®åº“é‡Œçš„ report_values ä»ç„¶å­˜ç€é‚£äº›æ—§åæ ‡çš„æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> report_values <span class="hljs-keyword">WHERE</span> col_key <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%cruise%'</span>;

<span class="hljs-comment">-- è¾“å‡ºï¼ˆæ•°æ®ä¾ç„¶å­˜åœ¨ï¼‰ï¼š</span>
<span class="hljs-comment">-- | id | report_id | row_key | col_key | cell_value |</span>
<span class="hljs-comment">-- |----|-----------|---------|---------|------------|</span>
<span class="hljs-comment">-- | 88 | tour_001_2025_q1 | q1_m1_high_end_app | china_cruise_gmv | 200000 |</span>
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>æ“ä½œï¼šåœ¨å…ƒæ•°æ®ï¼ˆcolumnSchemaï¼‰é‡Œåˆ æ‰å¯¹åº”çš„ JSON ç‰‡æ®µ</li>
<li>è¡¨ç°ï¼šæ¸²æŸ“å¼•æ“æ ¹æ® Schema ç»˜å›¾ï¼Œæ—¢ç„¶ Schema é‡Œæ²¡è¿™åˆ—äº†ï¼Œå‰ç«¯é¡µé¢ä¸Šè¯¥åˆ—ç›´æ¥æ¶ˆå¤±</li>
<li>æ•°æ®åº“çŠ¶æ€ï¼š<code>report_values</code> ä»ç„¶å­˜ç€é‚£äº›æ—§åæ ‡çš„æ•°æ®ã€‚è¿™å…¶å®æ˜¯å¥½äº‹â€”â€”å®ƒæ˜¯å¤©ç„¶çš„ç•™ç—•ã€‚å¦‚æœå“ªå¤©é›†å›¢åˆè¦å›è¿™åˆ—ï¼ŒæŠŠ Schema æ”¹å›å»ï¼Œæ•°æ®ç¬é—´"å¤æ´»"å›æ˜¾</li>
</ul>
<h4 data-id="heading-51">6.3 å­—æ®µé‡å‘½åçš„å¤„ç†æµç¨‹</h4>
<p><strong>åœºæ™¯</strong>ï¼šå°†"GMV"æ”¹åä¸º"æ€»äº¤æ˜“é¢"</p>
<h5 data-id="heading-52">æœ€ä½³å®è·µï¼škey ä¸ label åˆ†ç¦»</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…ƒæ•°æ®ä¸­çš„ç»“æ„</span>
{
  <span class="hljs-attr">label</span>: <span class="hljs-string">"æ€»äº¤æ˜“é¢"</span>,        <span class="hljs-comment">// ç•Œé¢æ˜¾ç¤ºçš„åç§°ï¼ˆå¯ä»¥éšä¾¿æ”¹ï¼‰</span>
  <span class="hljs-attr">key</span>: <span class="hljs-string">"china_group_tour_gmv"</span>  <span class="hljs-comment">// é€»è¾‘IDï¼ˆåˆ›å»ºåæ°¸ä¸ä¿®æ”¹ï¼‰</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>key</strong>ï¼šä¸€ç»åˆ›å»ºæ°¸ä¸ä¿®æ”¹ï¼Œæ˜¯æ•°æ®åº“ä¸­å­˜å‚¨çš„"é€»è¾‘ ID"</li>
<li><strong>label</strong>ï¼šç•Œé¢æ˜¾ç¤ºçš„åç§°ï¼Œå¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œå®Œå…¨ä¸å½±å“æ•°æ®å›æ˜¾</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹ label</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">db</span>(<span class="hljs-string">'report_templates'</span>)
  .<span class="hljs-title function_">where</span>(<span class="hljs-string">'template_id'</span>, <span class="hljs-string">'tour_001'</span>)
  .<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">column_schema</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(updatedSchema) <span class="hljs-comment">// åªæ”¹äº† labelï¼Œkey ä¸å˜</span>
  });

<span class="hljs-comment">// å‰ç«¯é‡æ–°æ¸²æŸ“</span>
<span class="hljs-comment">// æ•°æ®åº“æŸ¥è¯¢ä¾ç„¶ä½¿ç”¨ key: "china_group_tour_gmv"</span>
<span class="hljs-comment">// é¡µé¢æ˜¾ç¤ºä½¿ç”¨ label: "æ€»äº¤æ˜“é¢"</span>
</code></pre>
<h4 data-id="heading-53">6.4 å†å²æ•°æ®å…¼å®¹ç­–ç•¥</h4>
<p><strong>é—®é¢˜</strong>ï¼šå¢åŠ åˆ—åï¼Œå†å²ç»Ÿè®¡æ•°æ®å¦‚ä½•å¯¹é½ï¼Ÿ</p>
<p><strong>æ–¹æ¡ˆ</strong>ï¼šå‘å‰å…¼å®¹</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢å»å¹´æ•°æ®æ—¶ï¼Œæ–°å¢çš„"ç›´æ’­ç”µå•†"åˆ—ä¼šæ˜¯ null</span>
<span class="hljs-keyword">SELECT</span> 
  report_date,
  <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> business_type <span class="hljs-operator">=</span> <span class="hljs-string">'è·Ÿå›¢æ¸¸'</span> <span class="hljs-keyword">THEN</span> metric_value <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span>) <span class="hljs-keyword">as</span> group_tour_gmv,
  <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> business_type <span class="hljs-operator">=</span> <span class="hljs-string">'ç›´æ’­ç”µå•†'</span> <span class="hljs-keyword">THEN</span> metric_value <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span>) <span class="hljs-keyword">as</span> live_commerce_gmv
<span class="hljs-keyword">FROM</span> report_fact_table
<span class="hljs-keyword">WHERE</span> template_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001'</span>
  <span class="hljs-keyword">AND</span> country <span class="hljs-operator">=</span> <span class="hljs-string">'ä¸­å›½'</span>
  <span class="hljs-keyword">AND</span> metric_name <span class="hljs-operator">=</span> <span class="hljs-string">'GMV'</span>
  <span class="hljs-keyword">AND</span> report_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> report_date;
</code></pre>
<p><strong>ç»“æœ</strong>ï¼š</p>
<ul>
<li>2024å¹´çš„æ•°æ®ï¼š<code>group_tour_gmv</code> æœ‰å€¼ï¼Œ<code>live_commerce_gmv</code> ä¸º 0</li>
<li>2025å¹´çš„æ•°æ®ï¼š<code>group_tour_gmv</code> å’Œ <code>live_commerce_gmv</code> éƒ½æœ‰å€¼</li>
<li>åœ¨ç»Ÿè®¡å›¾è¡¨ä¸Šï¼Œ"ç›´æ’­ç”µå•†"è¿™æ¡çº¿ä» 2025å¹´1æœˆå¼€å§‹æ˜¾ç¤º</li>
</ul>
<hr/>
<h3 data-id="heading-54">ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ä¸ç»Ÿè®¡æŸ¥è¯¢</h3>
<h4 data-id="heading-55">7.1 è™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯</h4>
<p>å½“æŠ¥è¡¨è¡Œæ•°è¶…è¿‡ 1000 è¡Œæ—¶ï¼Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨åªæ¸²æŸ“å¯è§åŒºåŸŸã€‚</p>
<p><strong>æ¨èåº“</strong>ï¼š</p>
<ul>
<li><strong>VTable (VisActor)</strong>ï¼šå­—èŠ‚è·³åŠ¨å¼€æºçš„é’ˆå¯¹å¤§æ•°æ®é‡çš„é«˜æ€§èƒ½è¡¨æ ¼ï¼Œå¤šçº§è¡¨å¤´æ”¯æŒéå¸¸å¥½</li>
<li><strong>ag-Grid</strong>ï¼šä¼ä¸šçº§è¡¨æ ¼ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ListTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@visactor/vtable'</span>;

<span class="hljs-keyword">const</span> tableInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListTable</span>({
  <span class="hljs-attr">container</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'tableContainer'</span>),
  <span class="hljs-attr">columns</span>: colLeaves.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> ({
    <span class="hljs-attr">field</span>: col.<span class="hljs-property">key</span>,
    <span class="hljs-attr">title</span>: col.<span class="hljs-property">label</span>
  })),
  <span class="hljs-attr">records</span>: rowData,
  <span class="hljs-attr">enableVirtualScroll</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å¼€å¯è™šæ‹Ÿæ»šåŠ¨</span>
});
</code></pre>
<h4 data-id="heading-56">7.2 å¢é‡æ›´æ–°ç­–ç•¥</h4>
<p>åªæäº¤å˜åŒ–çš„å•å…ƒæ ¼ï¼Œè€Œä¸æ˜¯æ•´å¼ è¡¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è¿½è¸ªå•å…ƒæ ¼å˜æ›´
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CellChangeTracker</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">changes</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// å­˜å‚¨å˜æ›´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">originalData</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// å­˜å‚¨åŸå§‹æ•°æ®</span>
  }
  
  <span class="hljs-comment">// åˆå§‹åŒ–åŸå§‹æ•°æ®</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params">dataArray</span>) {
    dataArray.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${item.row_key}</span>|<span class="hljs-subst">${item.col_key}</span>`</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">originalData</span>.<span class="hljs-title function_">set</span>(key, item.<span class="hljs-property">cell_value</span>);
    });
  }
  
  <span class="hljs-comment">// è®°å½•å˜æ›´</span>
  <span class="hljs-title function_">onChange</span>(<span class="hljs-params">coordinate, newValue</span>) {
    <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">originalData</span>.<span class="hljs-title function_">get</span>(coordinate);
    
    <span class="hljs-keyword">if</span> (oldValue !== newValue) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">changes</span>.<span class="hljs-title function_">set</span>(coordinate, {
        coordinate,
        oldValue,
        newValue
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å€¼æ”¹å›åŸå€¼ï¼Œç§»é™¤å˜æ›´è®°å½•</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">changes</span>.<span class="hljs-title function_">delete</span>(coordinate);
    }
  }
  
  <span class="hljs-comment">// è·å–æ‰€æœ‰å˜æ›´</span>
  <span class="hljs-title function_">getChanges</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">changes</span>.<span class="hljs-title function_">values</span>());
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> tracker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellChangeTracker</span>();
tracker.<span class="hljs-title function_">init</span>(originalData);

<span class="hljs-comment">// ç”¨æˆ·ä¿®æ”¹å•å…ƒæ ¼</span>
tracker.<span class="hljs-title function_">onChange</span>(<span class="hljs-string">'q1_m1_high_end_app|china_group_tour_gmv'</span>, <span class="hljs-string">'520000'</span>);
tracker.<span class="hljs-title function_">onChange</span>(<span class="hljs-string">'q1_m1_high_end_app|china_indie_tour_gmv'</span>, <span class="hljs-string">'310000'</span>);

<span class="hljs-comment">// æäº¤æ—¶åªå‘é€å˜æ›´</span>
<span class="hljs-keyword">const</span> changes = tracker.<span class="hljs-title function_">getChanges</span>();
<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data/tour_001_2025_q1'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'PATCH'</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ changes })
});
</code></pre>
<h4 data-id="heading-57">7.3 è·¨æœŸç»Ÿè®¡æŸ¥è¯¢æ–¹æ¡ˆ</h4>
<p><strong>åˆ©ç”¨æ•°æ®åº“çš„åŸç”Ÿ JSON å¼•æ“</strong>ï¼ˆPostgreSQL/MySQL 8.0ï¼‰</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- PostgreSQL ç¤ºä¾‹ï¼šæŸ¥è¯¢ä¸­å›½å¸‚åœºè·Ÿå›¢æ¸¸è¿‘ä¸‰ä¸ªæœˆçš„GMVæ€»å’Œ</span>
<span class="hljs-keyword">SELECT</span> 
  <span class="hljs-built_in">SUM</span>((cells_data<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">'quarter_1_month_1_high_end_app|china_group_tour_gmv'</span>)::<span class="hljs-type">numeric</span>) <span class="hljs-keyword">as</span> total_gmv
<span class="hljs-keyword">FROM</span> report_instances
<span class="hljs-keyword">WHERE</span> template_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001'</span>
  <span class="hljs-keyword">AND</span> report_period <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01'</span> 
  <span class="hljs-keyword">AND</span> report_period <span class="hljs-operator">&lt;=</span> <span class="hljs-string">'2025-03-31'</span>;
</code></pre>
<p><strong>æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ç»Ÿè®¡å®½è¡¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢æ›´å¿«ï¼Œæ”¯æŒå¤æ‚çš„å¤šç»´åˆ†æ</span>
<span class="hljs-keyword">SELECT</span> 
  DATE_FORMAT(report_date, <span class="hljs-string">'%Y-%m'</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">month</span>,
  country,
  business_type,
  <span class="hljs-built_in">SUM</span>(metric_value) <span class="hljs-keyword">as</span> total_gmv
<span class="hljs-keyword">FROM</span> report_fact_table
<span class="hljs-keyword">WHERE</span> template_id <span class="hljs-operator">=</span> <span class="hljs-string">'tour_001'</span>
  <span class="hljs-keyword">AND</span> metric_name <span class="hljs-operator">=</span> <span class="hljs-string">'GMV'</span>
  <span class="hljs-keyword">AND</span> report_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01'</span>
  <span class="hljs-keyword">AND</span> report_date <span class="hljs-operator">&lt;=</span> <span class="hljs-string">'2025-03-31'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span>, country, business_type
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span>, total_gmv <span class="hljs-keyword">DESC</span>;
</code></pre>
<h4 data-id="heading-58">7.4 å®½è¡¨åŒæ­¥æœºåˆ¶</h4>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœæ•°æ®å˜åŒ–äº†ï¼Œå®½è¡¨æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>ç­”æ¡ˆ</strong>ï¼šä¹Ÿæ›´æ–°å®½è¡¨</p>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ä¿å­˜æŠ¥è¡¨æ•°æ®æ—¶è§¦å‘å®½è¡¨æ›´æ–°
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveReportDataWithSync</span>(<span class="hljs-params">reportId, templateId, changes</span>) {
  <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">transaction</span>(<span class="hljs-keyword">async</span> (trx) =&gt; {
    <span class="hljs-comment">// 1. æ›´æ–° EAV è¡¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">trx</span>(<span class="hljs-string">'report_values'</span>)
        .<span class="hljs-title function_">insert</span>({
          <span class="hljs-attr">report_id</span>: reportId,
          <span class="hljs-attr">template_id</span>: templateId,
          <span class="hljs-attr">row_key</span>: change.<span class="hljs-property">rowKey</span>,
          <span class="hljs-attr">col_key</span>: change.<span class="hljs-property">colKey</span>,
          <span class="hljs-attr">cell_value</span>: change.<span class="hljs-property">value</span>,
          <span class="hljs-attr">updated_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
        })
        .<span class="hljs-title function_">onConflict</span>([<span class="hljs-string">'report_id'</span>, <span class="hljs-string">'row_key'</span>, <span class="hljs-string">'col_key'</span>])
        .<span class="hljs-title function_">merge</span>();
    }
    
    <span class="hljs-comment">// 2. åŒæ­¥æ›´æ–°å®½è¡¨ï¼ˆä½¿ç”¨ UPSERTï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
      <span class="hljs-keyword">const</span> dimensions = <span class="hljs-title function_">parseCoordinate</span>(change.<span class="hljs-property">rowKey</span>, change.<span class="hljs-property">colKey</span>);
      
      <span class="hljs-keyword">await</span> trx.<span class="hljs-title function_">raw</span>(<span class="hljs-string">`
        INSERT INTO report_fact_table 
          (report_date, template_id, region, country, business_type, metric_name, metric_value)
        VALUES (?, ?, ?, ?, ?, ?, ?)
        ON DUPLICATE KEY UPDATE 
          metric_value = VALUES(metric_value),
          created_at = NOW()
      `</span>, [
        dimensions.<span class="hljs-property">date</span>,
        templateId,
        dimensions.<span class="hljs-property">region</span>,
        dimensions.<span class="hljs-property">country</span>,
        dimensions.<span class="hljs-property">businessType</span>,
        dimensions.<span class="hljs-property">metricName</span>,
        change.<span class="hljs-property">value</span>
      ]);
    }
  });
}
</code></pre>
<p><strong>åŒæ­¥ç­–ç•¥å¯¹æ¯”</strong>ï¼š</p>





























<table><thead><tr><th>ç­–ç•¥</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å®æ—¶åŒæ­¥</td><td>æ•°æ®å®æ—¶æ€§é«˜</td><td>å½±å“å½•å…¥æ€§èƒ½</td><td>æŠ¥è¡¨æ•°é‡&lt;50å¼ ï¼Œæ•°æ®é‡å°</td></tr><tr><td>å®šæ—¶å¢é‡åŒæ­¥</td><td>ä¸å½±å“å½•å…¥æ€§èƒ½</td><td>æœ‰æ•°æ®å»¶è¿Ÿï¼ˆ1å°æ—¶å†…ï¼‰</td><td>é›†å›¢çº§åº”ç”¨ï¼ˆ100-500å¼ æŠ¥è¡¨ï¼‰</td></tr><tr><td>é€»è¾‘åˆ é™¤+ç‰ˆæœ¬åŒ–</td><td>æ”¯æŒå†å²å›æº¯</td><td>å­˜å‚¨æˆæœ¬é«˜</td><td>å®¡è®¡éœ€æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-59">å…«ã€Key å‘½åè§„èŒƒä¸ç®¡ç†</h3>
<h4 data-id="heading-60">8.1 Key å‘½åè§„èŒƒ</h4>
<p><strong>è‡ªåŠ¨ç¼–ç è§„åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è‡ªåŠ¨ç”Ÿæˆ Key
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateKey</span>(<span class="hljs-params">label, parentKey = <span class="hljs-string">''</span></span>) {
  <span class="hljs-comment">// 1. è½¬æ‹¼éŸ³</span>
  <span class="hljs-keyword">const</span> pinyin = <span class="hljs-title function_">convertToPinyin</span>(label); <span class="hljs-comment">// ä¸­å›½ â†’ china</span>
  
  <span class="hljs-comment">// 2. è½¬å°å†™ + ä¸‹åˆ’çº¿</span>
  <span class="hljs-keyword">const</span> snake_case = pinyin.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">'_'</span>);
  
  <span class="hljs-comment">// 3. æ‹¼æ¥çˆ¶çº§ Key</span>
  <span class="hljs-keyword">return</span> parentKey ? <span class="hljs-string">`<span class="hljs-subst">${parentKey}</span>_<span class="hljs-subst">${snake_case}</span>`</span> : snake_case;
}

<span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-title function_">generateKey</span>(<span class="hljs-string">'ä¸­å›½å¸‚åœº'</span>); <span class="hljs-comment">// è¾“å‡º: china_market</span>
<span class="hljs-title function_">generateKey</span>(<span class="hljs-string">'è·Ÿå›¢æ¸¸'</span>, <span class="hljs-string">'china'</span>); <span class="hljs-comment">// è¾“å‡º: china_group_tour</span>
<span class="hljs-title function_">generateKey</span>(<span class="hljs-string">'GMV'</span>, <span class="hljs-string">'china_group_tour'</span>); <span class="hljs-comment">// è¾“å‡º: china_group_tour_gmv</span>
</code></pre>
<p><strong>æ‰‹åŠ¨ç¼–ç ï¼ˆBusiness Keyï¼‰â€”â€” æ¨è</strong></p>
<p>åœ¨æŠ¥è¡¨å»ºæ¨¡å™¨é‡Œï¼Œå…è®¸ç®¡ç†å‘˜åœ¨æ–°å¢å­—æ®µæ—¶ï¼Œé™¤äº†è¾“å…¥åç§°"ä¸­å›½å¸‚åœº"ï¼Œå†è¾“å…¥ä¸€ä¸ªè‹±æ–‡ Key <code>cn_mkt</code>ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯­ä¹‰æ¸…æ™°ï¼Œä¾¿äº SQL æŸ¥è¯¢å’Œå®½è¡¨å»ºæ¨¡</li>
<li>é¿å…æ‹¼éŸ³è¿‡é•¿ï¼ˆå¦‚ï¼š<code>asia_pacific_region_china_market_group_tour_gmv</code>ï¼‰</li>
</ul>
<p>å¤šç»„ç»‡åœºæ™¯ä¸‹ï¼Œcol_key/row_key çš„<strong>å…¨å±€å”¯ä¸€æ€§</strong>åŠä¸ label çš„åŒºåˆ†ï¼ˆé¿å…é‡å¤æŒ‡æ ‡åç§°ï¼‰è§<strong>ç¬¬åäºŒç«  12.4</strong>ã€‚</p>
<h4 data-id="heading-61">8.2 æŒ‡æ ‡åº“ä¸ç»´åº¦åº“ç®¡ç†</h4>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šåœ¨ç³»ç»Ÿé‡Œå…ˆå®šä¹‰å¥½å…¨å±€çš„æŒ‡æ ‡å’Œç»´åº¦ï¼Œå»ºæ¨¡æ—¶å¼•ç”¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŒ‡æ ‡åº“è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> metric_library (
  metric_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">PRIMARY</span> KEY COMMENT <span class="hljs-string">'æŒ‡æ ‡å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ GMV'</span>,
  metric_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŒ‡æ ‡åç§°'</span>,
  metric_unit <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">'å•ä½ï¼Œå¦‚ï¼šä¸‡å…ƒ'</span>,
  metric_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">'ç±»å‹ï¼šcurrency, number, percentage'</span>,
  description TEXT,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- ç»´åº¦åº“è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> dimension_library (
  dimension_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">PRIMARY</span> KEY COMMENT <span class="hljs-string">'ç»´åº¦å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ CN'</span>,
  dimension_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»´åº¦åç§°'</span>,
  dimension_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">'ç»´åº¦ç±»å‹ï¼šregion, country, business'</span>,
  parent_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">'çˆ¶çº§ç»´åº¦'</span>,
  description TEXT,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p><strong>æ•°æ®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ’å…¥æŒ‡æ ‡åº“æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> metric_library (metric_key, metric_name, metric_unit, metric_type) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'GMV'</span>, <span class="hljs-string">'æ€»äº¤æ˜“é¢'</span>, <span class="hljs-string">'ä¸‡å…ƒ'</span>, <span class="hljs-string">'currency'</span>),
(<span class="hljs-string">'ORDER'</span>, <span class="hljs-string">'è®¢å•é‡'</span>, <span class="hljs-string">'ç¬”'</span>, <span class="hljs-string">'number'</span>),
(<span class="hljs-string">'CONVERSION_RATE'</span>, <span class="hljs-string">'è½¬åŒ–ç‡'</span>, <span class="hljs-string">'%'</span>, <span class="hljs-string">'percentage'</span>);

<span class="hljs-comment">-- æ’å…¥ç»´åº¦åº“æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> dimension_library (dimension_key, dimension_name, dimension_type, parent_key) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'ASIA'</span>, <span class="hljs-string">'äºšå¤ªåŒº'</span>, <span class="hljs-string">'region'</span>, <span class="hljs-keyword">NULL</span>),
(<span class="hljs-string">'CN'</span>, <span class="hljs-string">'ä¸­å›½'</span>, <span class="hljs-string">'country'</span>, <span class="hljs-string">'ASIA'</span>),
(<span class="hljs-string">'JP'</span>, <span class="hljs-string">'æ—¥æœ¬'</span>, <span class="hljs-string">'country'</span>, <span class="hljs-string">'ASIA'</span>),
(<span class="hljs-string">'GROUP_TOUR'</span>, <span class="hljs-string">'è·Ÿå›¢æ¸¸'</span>, <span class="hljs-string">'business'</span>, <span class="hljs-keyword">NULL</span>),
(<span class="hljs-string">'INDIE_TOUR'</span>, <span class="hljs-string">'è‡ªç”±è¡Œ'</span>, <span class="hljs-string">'business'</span>, <span class="hljs-keyword">NULL</span>);
</code></pre>
<p><strong>å»ºæ¨¡æ—¶å¼•ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®¡ç†å‘˜é…ç½®æ–°è¡¨å¤´æ—¶ï¼Œç³»ç»Ÿå¼¹å‡ºå¯¹è¯æ¡†ï¼š"è¯·ä»æŒ‡æ ‡åº“é€‰æ‹©"</span>
<span class="hljs-keyword">const</span> selectedMetric = <span class="hljs-keyword">await</span> <span class="hljs-title function_">showMetricPicker</span>(); <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹© "GMV"</span>
<span class="hljs-keyword">const</span> selectedDimension = <span class="hljs-keyword">await</span> <span class="hljs-title function_">showDimensionPicker</span>(); <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹© "CN"</span>

<span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆ Key</span>
<span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${selectedDimension.dimension_key}</span>_<span class="hljs-subst">${selectedMetric.metric_key}</span>`</span>;
<span class="hljs-comment">// ç»“æœ: "CN_GMV"</span>

<span class="hljs-comment">// æ·»åŠ åˆ°è¡¨å¤´æ ‘</span>
columnSchema.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">label</span>: <span class="hljs-string">`<span class="hljs-subst">${selectedDimension.dimension_name}</span> <span class="hljs-subst">${selectedMetric.metric_name}</span>`</span>,
  <span class="hljs-attr">key</span>: key.<span class="hljs-title function_">toLowerCase</span>() <span class="hljs-comment">// cn_gmv</span>
});
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å½“æŸ¥è¯¢"è¿‘ä¸‰æœˆæ•°æ®"æ—¶ï¼ŒSQL ä¼šå˜å¾—å¼‚å¸¸ç®€å•ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">value</span>) 
<span class="hljs-keyword">FROM</span> report_values 
<span class="hljs-keyword">WHERE</span> col_key <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%_gmv'</span> 
  <span class="hljs-keyword">AND</span> report_period <span class="hljs-keyword">IN</span> (<span class="hljs-string">'2025-01'</span>, <span class="hljs-string">'2025-02'</span>, <span class="hljs-string">'2025-03'</span>);
</code></pre>
<ul>
<li>è€Œä¸å¿…ç®¡è¿™ä¸ª GMV æ˜¯ä»å“ªå¼ è¡¨é‡Œé’»å‡ºæ¥çš„</li>
</ul>
<h4 data-id="heading-62">8.3 ç‰ˆæœ¬ç®¡ç†ä¸å®¡è®¡</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŠ¥è¡¨æ¨¡æ¿ç‰ˆæœ¬è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_template_versions (
  version_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  template_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  version_number <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç‰ˆæœ¬å·'</span>,
  column_schema JSON <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  row_schema JSON <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  change_description TEXT COMMENT <span class="hljs-string">'å˜æ›´è¯´æ˜'</span>,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  created_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
  
  INDEX idx_template (template_id),
  <span class="hljs-keyword">UNIQUE</span> KEY uk_template_version (template_id, version_number)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŠ¥è¡¨æ¨¡æ¿ç‰ˆæœ¬å†å²'</span>;

<span class="hljs-comment">-- æ•°æ®å˜æ›´å®¡è®¡è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> report_value_audit (
  audit_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  report_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  row_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  col_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  old_value TEXT,
  new_value TEXT,
  changed_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  changed_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
  
  INDEX idx_report (report_id),
  INDEX idx_coordinate (row_key, col_key),
  INDEX idx_time (changed_at)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŠ¥è¡¨æ•°æ®å˜æ›´å®¡è®¡'</span>;
</code></pre>
<hr/>
<h3 data-id="heading-63">ä¹ã€å¼€å‘æœ€ä½³å®è·µæµç¨‹</h3>
<h4 data-id="heading-64">9.1 å®Œæ•´å¼€å‘æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åŠ è½½å…ƒæ•°æ®
   GET /api/template/tour<span class="hljs-emphasis">_001
   â†“
   æ‹¿åˆ°è¡¨å¤´ JSON æ ‘
   
2. åŠ è½½å®ä¾‹æ•°æ®
   GET /api/data/tour_</span>001<span class="hljs-emphasis">_2025_</span>q1
   â†“
   æ‹¿åˆ°æ‰å¹³çš„ Key-Value åˆ—è¡¨
   
<span class="hljs-bullet">3.</span> é¢„å¤„ç†æ•°æ®
   å°†å®ä¾‹æ•°æ®è½¬ä¸º { "è¡ŒKey|åˆ—Key": "å€¼" } çš„å¯¹è±¡
   
<span class="hljs-bullet">4.</span> æ¸²æŸ“è¡¨æ ¼
<span class="hljs-bullet">   -</span> åŒé‡é€’å½’è¡¨å¤´æ ‘
<span class="hljs-bullet">   -</span> æ ¹æ®æ‹¼æ¥çš„ Key ä»å¯¹è±¡ä¸­å–å€¼å¡«å…… Input
   
<span class="hljs-bullet">5.</span> ç”¨æˆ·ç¼–è¾‘
<span class="hljs-bullet">   -</span> ç›‘å¬ Input å˜åŒ–
<span class="hljs-bullet">   -</span> è§¦å‘å…¬å¼å¼•æ“è®¡ç®—
<span class="hljs-bullet">   -</span> å®æ—¶æ ¡éªŒ
<span class="hljs-bullet">   -</span> çŠ¶æ€ç®¡ç†å™¨è®°å½•å˜æ›´
   
<span class="hljs-bullet">6.</span> ä¿å­˜æ•°æ®
<span class="hljs-bullet">   -</span> ç›´æ¥å°†å˜æ›´å¯¹è±¡ï¼ˆæˆ–å·®å¼‚éƒ¨åˆ†ï¼‰ä¼ å›åç«¯
<span class="hljs-bullet">   -</span> åç«¯å¾ªç¯è¯¥å¯¹è±¡æ‰§è¡Œ REPLACE INTO æˆ– UPDATE
<span class="hljs-bullet">   -</span> åŒæ­¥æ›´æ–°å®½è¡¨
</code></pre>
<h4 data-id="heading-65">9.2 ä¸ºä»€ä¹ˆè¿™ç§è®¾è®¡é€‚åˆ 100-500 å¼ é›†å›¢æŠ¥è¡¨ï¼Ÿ</h4>
<h5 data-id="heading-66">ä¼˜åŠ¿1ï¼šæç®€çš„ CRUD</h5>
<p>åç«¯åªéœ€è¦ä¸¤ä¸ªæ ¸å¿ƒè¡¨ï¼š</p>
<ul>
<li><code>report_templates</code>ï¼šå­˜å‚¨ <code>report_id</code> å’Œå·¨å¤§çš„ <code>schema_json</code></li>
<li><code>report_values</code>ï¼šå­˜å‚¨ <code>report_id</code>, <code>row_key</code>, <code>col_key</code>, <code>value</code></li>
</ul>
<h5 data-id="heading-67">ä¼˜åŠ¿2ï¼šåŠ¨æ€æ‰©å®¹</h5>
<p>æ— è®ºæŠ¥è¡¨ä» 3 å±‚åµŒå¥—å˜æˆ 5 å±‚ï¼Œè¿˜æ˜¯ä» 10 åˆ—å˜æˆ 100 åˆ—ï¼Œä½ åªéœ€è¦ä¿®æ”¹ <code>report_templates</code> é‡Œçš„ JSONï¼Œå‰ç«¯ä»£ç å’Œåç«¯è¡¨ç»“æ„ä¸€è¡Œéƒ½ä¸ç”¨æ”¹ã€‚</p>
<h5 data-id="heading-68">ä¼˜åŠ¿3ï¼šæ ¡éªŒé€»è¾‘æ¨¡å‹åŒ–</h5>
<p>ä½ å¯ä»¥åœ¨ JSON é‡ŒåŠ å…¥ <code>"required": true</code> æˆ– <code>"type": "number"</code>ï¼Œæ¸²æŸ“å¼•æ“ç”Ÿæˆ HTML æ—¶è‡ªåŠ¨åŠ ä¸Šæ ¡éªŒé€»è¾‘ã€‚</p>
<h5 data-id="heading-69">ä¼˜åŠ¿4ï¼šå¤©ç„¶çš„ç•™ç—•æœºåˆ¶</h5>
<p>åˆ é™¤åˆ—åï¼Œæ•°æ®ä»ä¿ç•™åœ¨æ•°æ®åº“ä¸­ã€‚å¦‚æœå“ªå¤©é›†å›¢åˆè¦å›è¿™åˆ—ï¼ŒæŠŠ Schema æ”¹å›å»ï¼Œæ•°æ®ç¬é—´"å¤æ´»"å›æ˜¾ã€‚</p>
<hr/>
<h3 data-id="heading-70">åã€å‚è€ƒå¼€æºæ–¹æ¡ˆ</h3>
<p>å¦‚æœä½ ä¸æƒ³ä»é›¶å†™èµ·ï¼Œå»ºè®®ç ”ç©¶ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ¶æ„ï¼š</p>
<h4 data-id="heading-71">10.1 Luckysheet / Univer</h4>
<p><strong>ç®€ä»‹</strong>ï¼šç›®å‰å›½å†…æœ€é¡¶å°–çš„å¼€æºåœ¨çº¿ Excel æ–¹æ¡ˆ</p>
<p><strong>å®˜ç½‘</strong>ï¼š</p>
<ul>
<li>Luckysheet: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdream-num%2FLuckysheet" target="_blank" title="https://github.com/dream-num/Luckysheet" ref="nofollow noopener noreferrer">github.com/dream-num/Lâ€¦</a></li>
<li>Univer: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdream-num%2Funiver" target="_blank" title="https://github.com/dream-num/univer" ref="nofollow noopener noreferrer">github.com/dream-num/uâ€¦</a></li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦å®Œæ•´çš„ Excel åŠŸèƒ½ï¼ˆå…¬å¼ã€å›¾è¡¨ã€æ¡ä»¶æ ¼å¼ç­‰ï¼‰</li>
<li>åœ¨çº¿ååŒç¼–è¾‘</li>
<li>å¤æ‚çš„å•å…ƒæ ¼æ ·å¼</li>
</ul>
<p><strong>æ ¸å¿ƒæ¶æ„</strong>ï¼š</p>
<ul>
<li>æ•°æ®æ¨¡å‹ï¼šåŸºäº Workbook â†’ Worksheet â†’ Cell çš„ä¸‰å±‚æ¨¡å‹</li>
<li>æ¸²æŸ“å¼•æ“ï¼šCanvas æ¸²æŸ“ï¼Œæ”¯æŒç™¾ä¸‡è¡Œæ•°æ®</li>
<li>å…¬å¼å¼•æ“ï¼šå†…ç½®å®Œæ•´çš„ Excel å…¬å¼å¼•æ“</li>
</ul>
<h4 data-id="heading-72">10.2 Handsontable</h4>
<p><strong>ç®€ä»‹</strong>ï¼šå¤„ç†å¤æ‚åˆå¹¶å•å…ƒæ ¼çš„è€ç‰ŒåŠ²æ—…</p>
<p><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhandsontable.com%2F" target="_blank" title="https://handsontable.com/" ref="nofollow noopener noreferrer">handsontable.com/</a></p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç±» Excel çš„è¡¨æ ¼ç¼–è¾‘</li>
<li>æ”¯æŒå¤æ‚çš„åˆå¹¶å•å…ƒæ ¼</li>
<li>ä¸°å¯Œçš„æ•°æ®æ ¡éªŒå’Œæ ¼å¼åŒ–</li>
</ul>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå›ºå®šè¡Œåˆ—</li>
<li>æ”¯æŒä¸‹æ‹‰é€‰æ‹©ã€æ—¥æœŸé€‰æ‹©å™¨ç­‰ç¼–è¾‘å™¨</li>
<li>æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œæ ¡éªŒå™¨</li>
</ul>
<h4 data-id="heading-73">10.3 VTable (VisActor)</h4>
<p><strong>ç®€ä»‹</strong>ï¼šå­—èŠ‚è·³åŠ¨å¼€æºçš„é’ˆå¯¹å¤§æ•°æ®é‡çš„é«˜æ€§èƒ½è¡¨æ ¼ï¼Œå¤šçº§è¡¨å¤´æ”¯æŒéå¸¸å¥½</p>
<p><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FVisActor%2FVTable" target="_blank" title="https://github.com/VisActor/VTable" ref="nofollow noopener noreferrer">github.com/VisActor/VTâ€¦</a></p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¤§æ•°æ®é‡è¡¨æ ¼ï¼ˆç™¾ä¸‡è¡Œï¼‰</li>
<li>å¤æ‚çš„å¤šçº§è¡¨å¤´</li>
<li>æ•°æ®é€è§†è¡¨</li>
</ul>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>åŸºäº Canvas æ¸²æŸ“ï¼Œæ€§èƒ½æä½³</li>
<li>å†…ç½®è™šæ‹Ÿæ»šåŠ¨</li>
<li>æ”¯æŒæ ‘å½¢æ•°æ®å’Œåˆ†ç»„</li>
</ul>
<p><strong>æ¨èç†ç”±</strong>ï¼š</p>
<ul>
<li>ä¸“ä¸º"å¤šçº§è¡¨å¤´"åœºæ™¯ä¼˜åŒ–</li>
<li>å­—èŠ‚è·³åŠ¨å›¢é˜Ÿç»´æŠ¤ï¼Œç¨³å®šæ€§é«˜</li>
<li>ä¸­æ–‡æ–‡æ¡£å®Œå–„</li>
</ul>
<hr/>
<h3 data-id="heading-74">åä¸€ã€æ€»ç»“</h3>
<h4 data-id="heading-75">11.1 æ ¸å¿ƒæ€æƒ³å›é¡¾</h4>
<blockquote>
<p><strong>æ¨¡å‹é©±åŠ¨</strong>ï¼šæŠŠå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆåˆå¹¶å•å…ƒæ ¼ã€å…¬å¼ã€æ ¡éªŒï¼‰å…¨éƒ¨å˜æˆæ•°æ®é…ç½®ã€‚</p>
</blockquote>
<h4 data-id="heading-76">11.2 ä¸‰å±‚æ¶æ„</h4>
<ol>
<li><strong>å…ƒæ•°æ®å±‚</strong>ï¼šå®šä¹‰æŠ¥è¡¨çš„ç»“æ„ï¼ˆæ ‘å½¢è¡¨å¤´ï¼‰ã€è§„åˆ™ï¼ˆæ ¡éªŒï¼‰ã€è®¡ç®—ï¼ˆå…¬å¼ï¼‰</li>
<li><strong>å®ä¾‹æ•°æ®å±‚</strong>ï¼šä½¿ç”¨ EAV æ¨¡å¼å­˜å‚¨å®é™…æ•°å€¼ï¼Œé€šè¿‡åæ ‡ç³»ç»Ÿä¸å…ƒæ•°æ®å…³è”</li>
<li><strong>æ¸²æŸ“å¼•æ“å±‚</strong>ï¼šé€’å½’ç®—æ³•ï¼ˆDFSï¼‰è®¡ç®— rowspan/colspanï¼Œåæ ‡æ˜ å°„ç³»ç»Ÿå¡«å……æ•°æ®</li>
</ol>
<h4 data-id="heading-77">11.3 æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼š100 å¼ æŠ¥è¡¨ä¸éœ€è¦å†™ 100 ä¸ªç»„ä»¶ï¼Œåªéœ€é…ç½® 100 ä»½ JSON</li>
<li><strong>ç»´æŠ¤æˆæœ¬</strong>ï¼šå­—æ®µå˜æ›´ä¸éœ€è¦ DDLï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œåªéœ€ä¿®æ”¹é…ç½®</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šåˆ é™¤å­—æ®µä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œå¤©ç„¶çš„ç•™ç—•æœºåˆ¶</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šEAV + å®½è¡¨çš„è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œæ—¢çµæ´»åˆé«˜æ•ˆ</li>
<li><strong>å¤šç»„ç»‡ä¸æƒé™</strong>ï¼šç»„ç»‡/è§’è‰²ã€åˆ—è¡Œæƒé™ã€ç­–ç•¥ Aã€col_key/row_key å”¯ä¸€ã€ä¸€ä»½å…¨é‡ç­‰è§<strong>ç¬¬åäºŒç«  å¤šç»„ç»‡ä¸æƒé™è®¾è®¡</strong></li>
</ul>
<h4 data-id="heading-78">11.4 æŠ€æœ¯æ ˆå»ºè®®</h4>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šVue 3 + VTable (VisActor) + HyperFormula</li>
<li><strong>åç«¯</strong>ï¼šNode.js / Java Spring Boot</li>
<li><strong>æ•°æ®åº“</strong>ï¼šMySQL 8.0 / PostgreSQL (æ”¯æŒ JSON å­—æ®µ)</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šZustand / Redux</li>
<li><strong>è™šæ‹Ÿæ»šåŠ¨</strong>ï¼šVTable / ag-Grid</li>
</ul>
<h4 data-id="heading-79">11.5 ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h4>
<ol>
<li><strong>æ­å»º Demo</strong>ï¼šå®ç°ä¸€ä¸ªç®€å•çš„ 3x3 æŠ¥è¡¨ï¼ŒéªŒè¯å®Œæ•´é“¾è·¯</li>
<li><strong>è®¾è®¡å…ƒæ•°æ® Schema</strong>ï¼šå®šä¹‰ JSON ç»“æ„çš„è§„èŒƒ</li>
<li><strong>å¼€å‘æ¸²æŸ“å¼•æ“</strong>ï¼šå®ç° DFS ç®—æ³•å’Œåæ ‡æ˜ å°„</li>
<li><strong>é›†æˆå…¬å¼å¼•æ“</strong>ï¼šæ¥å…¥ HyperFormula</li>
<li><strong>æ€§èƒ½æµ‹è¯•</strong>ï¼šéªŒè¯ 1000 è¡Œ x 100 åˆ—çš„æ¸²æŸ“æ€§èƒ½</li>
<li><strong>å®½è¡¨åŒæ­¥</strong>ï¼šå®ç° EAV åˆ°å®½è¡¨çš„ ETL æµç¨‹</li>
</ol>
<hr/>
<h3 data-id="heading-80">åäºŒã€å¤šç»„ç»‡ä¸æƒé™è®¾è®¡</h3>
<p>æœ¬ç« åœ¨ç°æœ‰ã€Œæ¨¡å‹é©±åŠ¨ + åæ ‡æ˜ å°„ã€åŸºç¡€ä¸Šï¼Œå¢åŠ å¤šç»„ç»‡ã€å¤šè§’è‰²ä¸‹çš„æƒé™ä¸æ•°æ®èŒƒå›´æ§åˆ¶ï¼Œä¸æ”¹å˜ EAV å­˜å‚¨ä¸æ¨¡æ¿ç»“æ„ã€‚</p>
<h4 data-id="heading-81">12.1 ä¸šåŠ¡èƒŒæ™¯ä¸ç›®æ ‡</h4>
<ul>
<li><strong>åŒä¸€æ¨¡æ¿å¤šç»„ç»‡ä½¿ç”¨</strong>ï¼šä¸åŒç»„ç»‡å¯è§/å¯å¡«çš„è¡Œã€åˆ—ä¸åŒï¼›ä¸Šçº§éœ€æŸ¥çœ‹ã€å®¡æ ¸ä¸‹çº§å¡«æŠ¥æ•°æ®ã€‚</li>
<li><strong>åŒä¸€æŠ¥è¡¨å¤šè§’è‰²å¡«æŠ¥ä¸å®¡æ ¸</strong>ï¼šå¦‚è´¢åŠ¡ä¸“å‘˜/å®¡æ ¸/å®¡æ‰¹ã€ç”Ÿäº§ä¸“å‘˜/å®¡æ ¸/å®¡æ‰¹ï¼›åŒå±‚çº§æ•°æ®éš”ç¦»ï¼Œä¸èƒ½äº’çœ‹ã€‚</li>
<li><strong>ç›®æ ‡</strong>ï¼šé€šè¿‡ç»„ç»‡ä¸è§’è‰²ç»´åº¦çš„æƒé™é…ç½®ï¼Œå®ç°ã€Œä¸€ä»½æ¨¡æ¿ã€å¤šç»„ç»‡å¤šè§’è‰²ã€è¡Œåˆ—å¯è§/å¯ç¼–è¾‘å·®å¼‚åŒ–ã€ï¼Œå¹¶ä¸å‰æ–‡åæ ‡ä½“ç³»ä¸€è‡´ã€‚</li>
</ul>
<h4 data-id="heading-82">12.2 ç»„ç»‡ä¸è§’è‰²æ¨¡å‹</h4>
<ul>
<li><strong>ç»„ç»‡</strong>ï¼šæ ‘å½¢ã€å¯å˜å±‚çº§ï¼›æ”¯æŒé€’å½’æŸ¥ä¸Šçº§/ä¸‹çº§ï¼›æ•°æ®èŒƒå›´ä»…æœ¬ç»„ç»‡ + ä¸‹çº§ï¼ŒåŒå±‚çº§ä¸å¯è§ã€‚</li>
<li><strong>è§’è‰²</strong>ï¼šä¸ç»„ç»‡ç±»å‹é…åˆï¼›åŒä¸€å±‚çº§å­˜åœ¨å¤šçº¿è§’è‰²ï¼ˆå¦‚è´¢åŠ¡ä¸“å‘˜/å®¡æ ¸/å®¡æ‰¹ã€ç”Ÿäº§ä¸“å‘˜/å®¡æ ¸/å®¡æ‰¹ï¼‰ï¼›ä¸Šçº§å•ä½ä¹Ÿæœ‰å¯¹åº”è§’è‰²ã€‚</li>
<li><strong>æƒé™é…ç½®ç²’åº¦</strong>ï¼šæŒ‰<strong>è§’è‰² / ç»„ç»‡ç±»å‹</strong>é…ç½®ï¼ˆéæŒ‰å•ä¸ª org_idï¼‰ï¼Œä¾¿äºç»´æŠ¤ã€‚</li>
</ul>
<h4 data-id="heading-83">12.3 å­—æ®µçº§æƒé™ï¼šåˆ—ä¸è¡Œï¼ˆç»Ÿä¸€é€»è¾‘ï¼‰</h4>
<p><strong>æŒ‡å¯¼æ€è·¯</strong>ï¼šåˆ—å’Œè¡Œé‡‡ç”¨åŒä¸€å¥—é€»è¾‘â€”â€”<strong>æ¨¡æ¿å­˜å…¨é‡ï¼Œæƒé™/èŒƒå›´è¡¨å†³å®šè°çœ‹ã€è°æ”¹</strong>ï¼›è¡Œç»´åº¦çš„ã€Œäº§å“-ä¼ä¸šå…³è”è¡¨ã€è§†ä¸º<strong>è¡Œç»´åº¦çš„èŒƒå›´/æƒé™è¡¨</strong>ï¼Œè€Œéå•çº¯æƒé™å…³è”è¡¨ã€‚</p>
<p><strong>æ•°æ®æƒé™ä¸è¡Œåˆ—æƒé™çš„å…³ç³»</strong>ï¼šå…ˆæŒ‰<strong>æ•°æ®æƒé™</strong>ç­›å‡ºå½“å‰ç”¨æˆ·å¯è®¿é—®çš„ report_idï¼ˆæœ¬ç»„ç»‡ + ä¸‹çº§ï¼‰ï¼›å†æŒ‰<strong>åˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨</strong>è¿‡æ»¤è¯¥æŠ¥è¡¨å®ä¾‹ä¸‹å¯è§ã€å¯ç¼–è¾‘çš„åˆ—ä¸è¡Œã€‚äºŒè€…æ˜¯ã€Œå…ˆèŒƒå›´ã€åå­—æ®µã€çš„å…³ç³»ã€‚</p>
<ul>
<li>
<p><strong>åˆ—æƒé™è¡¨</strong></p>
<ul>
<li>æ¨¡æ¿å­˜<strong>å…¨é‡åˆ—</strong>ï¼›åˆ—æƒé™è¡¨æ§åˆ¶ï¼šæŒ‰è§’è‰²/ç»„ç»‡ç±»å‹ï¼Œå“ªäº› col_key å¯è§ã€å¯ç¼–è¾‘ã€‚</li>
<li>æŠ½è±¡ï¼šåˆ—æƒé™è¡¨ = <strong>æŒ‡æ ‡ï¼ˆåˆ—ï¼‰ä¸è§’è‰²/ç»„ç»‡ç±»å‹çš„å…³è”</strong>ï¼›åˆ—ç»´åº¦ä¸é™äºã€ŒæŒ‡æ ‡ã€ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¡Œæƒé™è¡¨ï¼ˆè¡ŒèŒƒå›´è¡¨ï¼‰</strong></p>
<ul>
<li>æ¨¡æ¿å­˜<strong>å…¨é‡è¡Œ</strong>ï¼ˆè¡Œç»´åº¦å¯ä¸ºæ ‘ç»“æ„ï¼Œå¦‚äº§å“æ ‘ï¼šçˆ¶äº§å“ã€å­äº§å“ï¼Œå¯¹åº”å¤šçº§è¡Œè¡¨å¤´/åˆå¹¶è¡Œï¼‰ï¼›è¡Œæƒé™è¡¨æ§åˆ¶ï¼šæŒ‰ç»„ç»‡ï¼ˆåŠå¯é€‰è§’è‰²ï¼‰ï¼Œå“ªäº› row_key å¯è§ã€å¯ç¼–è¾‘ã€‚</li>
<li>æŠ½è±¡ï¼šè¡Œæƒé™è¡¨ = <strong>è¡Œç»´åº¦å–å€¼ï¼ˆå¦‚äº§å“ï¼‰ä¸ç»„ç»‡çš„å…³è”</strong>ï¼›è¡Œç»´åº¦ä¸é™äºã€Œäº§å“ã€ã€‚</li>
<li><strong>äº§å“-ä¼ä¸šå…³è”è¡¨</strong>å³è¡ŒèŒƒå›´è¡¨çš„ä¸€ç§å®ç°ï¼šå­˜ã€Œå“ªäº›ç»„ç»‡æ‹¥æœ‰/å¯è§å“ªäº› row_keyã€ï¼›row_key ä¸æ¨¡æ¿è¡Œæ ‘èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸æ¨¡æ¿çš„ä¸²è”</strong></p>
<ul>
<li>æ¨¡æ¿ï¼šåˆ—å…¨é‡ + è¡Œå…¨é‡ï¼ˆè¡Œå¯ä¸ºæ ‘ï¼‰ã€‚</li>
<li>åˆ—æƒé™è¡¨ï¼šåˆ—ç»´åº¦ä¸è§’è‰²/ç»„ç»‡çš„å…³è”ï¼›è¡Œæƒé™è¡¨ï¼šè¡Œç»´åº¦ä¸ç»„ç»‡çš„å…³è”ã€‚</li>
<li>æ¸²æŸ“ï¼šå–æ¨¡æ¿å¾—å…¨é‡ row_key/col_keyï¼Œå†æŒ‰å½“å‰ç»„ç»‡ä¸è§’è‰²ç”¨åˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨è¿‡æ»¤ï¼›åæ ‡ä»ä¸º (row_key, col_key)ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç­–ç•¥ Aï¼ˆçœ‹ä¸‹çº§æ—¶ï¼‰</strong>ï¼šæŸ¥çœ‹ä¸‹çº§æŠ¥è¡¨æ—¶ï¼ŒæŒ‰<strong>è¢«æŸ¥çœ‹ç»„ç»‡</strong>çš„è¡Œ/åˆ—æƒé™æ¸²æŸ“ï¼Œä¿è¯ä¸Šçº§çœ‹åˆ°ä¸‹çº§å¡«æŠ¥çš„å®Œæ•´å­—æ®µã€‚</p>
</li>
</ul>
<h4 data-id="heading-84">12.4 åˆ—/è¡Œå”¯ä¸€æ ‡è¯†ä¸æ˜¾ç¤ºåï¼ˆé‡è¦ï¼‰</h4>
<p>åœ¨ã€Œä¸€ä»½å…¨é‡åˆ—/è¡Œã€çš„å‰æä¸‹ï¼Œè§£å†³<strong>ä¸åŒå…¬å¸é‡å¤æŒ‡æ ‡åç§°/è¡Œåç§°</strong>çš„é—®é¢˜ã€‚</p>
<ul>
<li><strong>col_keyï¼ˆåˆ—ï¼‰</strong>ï¼šåœ¨<strong>æ•´å¼ æ¨¡æ¿å†…å…¨å±€å”¯ä¸€</strong>ï¼Œç”¨äºå­˜å‚¨ã€åæ ‡ã€æƒé™ï¼›åˆ—æƒé™è¡¨æŒ‰ col_key é…ç½®ã€‚<strong>label ä»…ç”¨äºç•Œé¢æ˜¾ç¤ºï¼Œå…è®¸é‡å¤</strong>ã€‚ä¸åŒå…¬å¸å¯éƒ½æœ‰åä¸ºã€ŒGMVã€çš„æŒ‡æ ‡ï¼Œè‹¥å«ä¹‰/å£å¾„ä¸åŒï¼Œåˆ™æ¨¡æ¿ä¸­ä¸ºä¸¤åˆ—ï¼šcol_key ä¸åŒï¼ˆå¦‚ <code>gmv_wan</code>ã€<code>gmv_yuan</code>ï¼‰ï¼Œlabel å¯ç›¸åŒæˆ–ç•¥ä½œåŒºåˆ†ã€‚</li>
<li><strong>row_keyï¼ˆè¡Œï¼‰</strong>ï¼šåœ¨<strong>æ•´å¼ æ¨¡æ¿å†…å…¨å±€å”¯ä¸€</strong>ï¼Œç”¨äºå­˜å‚¨ã€åæ ‡ã€æƒé™ï¼›è¡Œæƒé™è¡¨æŒ‰ row_key é…ç½®ã€‚<strong>label ä»…ç”¨äºç•Œé¢æ˜¾ç¤ºï¼Œå…è®¸é‡å¤</strong>ã€‚ä¸åŒç»„ç»‡å¯æœ‰åŒåäº§å“/è¡Œï¼Œè‹¥å®è´¨ä¸åŒåˆ™ç”¨ä¸åŒ row_keyã€‚</li>
<li><strong>çº¦å®š</strong>ï¼šæ¨¡æ¿ä¸æƒé™è¡¨ä¸€å¾‹æŒ‰ <strong>key</strong>ï¼ˆcol_key/row_keyï¼‰ç»´æŠ¤å’Œè¿‡æ»¤ï¼Œä¸æŒ‰ labelï¼›æ–°å¢åˆ—/è¡Œæ—¶å¿…é¡»åˆ†é…å”¯ä¸€ keyã€‚</li>
</ul>
<h4 data-id="heading-85">12.5 æ¨¡æ¿ç»´æŠ¤æ–¹å¼ï¼šä¸€ä»½å…¨é‡åˆ—/è¡Œ</h4>
<ul>
<li><strong>åˆ—</strong>ï¼šæ¨¡æ¿å†…å­˜<strong>ä¸€ä»½å…¨é‡åˆ—</strong>ï¼ˆä¸æ‹† base/extensionsï¼‰ï¼›æ–°å¢/åˆ é™¤åˆ—åªæ”¹è¿™ä¸€å¤„ï¼›åˆ—æƒé™è¡¨æ§åˆ¶å„è§’è‰²/ç»„ç»‡ç±»å‹å¯è§ã€å¯ç¼–è¾‘çš„ col_keyã€‚</li>
<li><strong>è¡Œ</strong>ï¼šæ¨¡æ¿å†…å­˜<strong>å…¨é‡è¡Œ</strong>ï¼ˆè¡Œç»´åº¦å¯ä¸ºæ ‘ï¼‰ï¼›è¡Œæƒé™è¡¨ï¼ˆå«äº§å“-ä¼ä¸šå…³è”è¡¨ï¼‰æ§åˆ¶å„ç»„ç»‡å¯è§ã€å¯ç¼–è¾‘çš„ row_keyã€‚</li>
<li><strong>é¿å…å¤šä»½è¡¨å¤´</strong>ï¼šä¸ä¸ºæ¯ä¸ªç»„ç»‡ç±»å‹å„å­˜ä¸€ä»½å®Œæ•´è¡¨å¤´ï¼›ä»…æ­¤ä¸€ä»½æ¨¡æ¿ + åˆ—/è¡Œæƒé™è¡¨ï¼Œé¿å…é‡å¤ç»´æŠ¤ä¸ä¸åŒæ­¥ã€‚</li>
<li><strong>ä¸åŠ¨æ€æ‰©å±•çš„é…åˆ</strong>ï¼šè‹¥å·²å¼•å…¥åˆ—/è¡Œæƒé™è¡¨ï¼Œå¢åŠ æˆ–åˆ é™¤åˆ—/è¡Œæ—¶éœ€åŒæ­¥ç»´æŠ¤æƒé™è¡¨ï¼ˆå¦‚åˆ åˆ—æ—¶åˆ é™¤è¯¥ col_key çš„æƒé™è®°å½•ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-86">12.6 å¤šè§’è‰²å¡«æŠ¥ä¸å®¡æ ¸</h4>
<ul>
<li><strong>å¡«æŠ¥</strong>ï¼šåŒä¸€æŠ¥è¡¨å®ä¾‹å¤šè§’è‰²å…±åŒå¡«æŠ¥ï¼ˆå¦‚è´¢åŠ¡å¡«é‡‘é¢ã€ç”Ÿäº§å¡«é‡ï¼‰ï¼Œé€šè¿‡åˆ—/è¡Œæƒé™è¡¨çš„å¯è§ã€å¯ç¼–è¾‘åŒºåˆ†ã€‚</li>
<li><strong>å®¡æ ¸</strong>ï¼šå¤šè§’è‰²ã€å¤šç¯èŠ‚ï¼ˆä¸“å‘˜â†’å®¡æ ¸â†’å®¡æ‰¹ï¼‰ï¼›å®¡æ ¸å¯¹è±¡ä¸ºæŠ¥è¡¨å®ä¾‹ï¼ˆå¦‚æ¯ä¸ªä¸‹çº§å•ä½ä¸€æ¡ï¼‰ã€‚çŠ¶æ€å¯çº¦å®šä¸ºï¼šè‰ç¨¿ã€å·²æäº¤ã€å®¡æ ¸ä¸­ã€å·²å®¡æ‰¹ç­‰ï¼›è°åœ¨ä»€ä¹ˆçŠ¶æ€ä¸‹å¯å¡«ã€å¯å®¡ã€å¯æ‰¹ã€å¯é€€å›ç”±è§’è‰²ä¸æƒé™è¡¨é…åˆã€‚</li>
<li><strong>ä¸Šçº§</strong>ï¼šå¯å¡«æœ¬çº§ã€å¯æŸ¥çœ‹ä¸‹çº§å¡«æŠ¥åˆ—è¡¨å¹¶ä¸‹é’»æŸæ¡ã€å®¡æ ¸ä¸‹çº§ï¼›æŸ¥çœ‹ä¸‹çº§æ—¶ç”¨ç­–ç•¥ Aã€‚</li>
</ul>
<h4 data-id="heading-87">12.7 æŸ¥çœ‹ä¸‹çº§æ•°æ®ï¼šç»„ç»‡æ ‘ä¸é»˜è®¤å€¼</h4>
<ul>
<li><strong>äº¤äº’</strong>ï¼šç»„ç»‡æ ‘ + åˆ‡æ¢ã€Œå½“å‰æŸ¥çœ‹ç»„ç»‡ã€ï¼›ä»…èƒ½é€‰æœ‰æ•°æ®æƒé™çš„ä¸‹çº§èŠ‚ç‚¹ã€‚</li>
<li><strong>æ•°æ®</strong>ï¼šåˆ‡æ¢ååŠ è½½è¯¥ç»„ç»‡çš„ report_idï¼ŒæŒ‰è¯¥ç»„ç»‡ï¼ˆç­–ç•¥ Aï¼‰çš„åˆ—/è¡Œæƒé™æ¸²æŸ“ã€‚</li>
<li><strong>é»˜è®¤</strong>ï¼šã€Œå½“å‰æŸ¥çœ‹ç»„ç»‡ã€= å½“å‰ç”¨æˆ·æ‰€å±ç»„ç»‡ã€‚</li>
<li><strong>å¯é€‰</strong>ï¼šæ±‡æ€»è¡¨ï¼ˆè¡Œ=ä¸‹çº§ç»„ç»‡ï¼‰+ ä¸‹é’»åˆ°è¯¥ä¸‹çº§æ˜ç»†ã€‚</li>
</ul>
<h4 data-id="heading-88">12.8 æƒé™ä¸æ¨¡æ¿ã€æ•°æ®çš„ååŒå…³ç³»</h4>
<ul>
<li><strong>æ¨¡æ¿å±‚</strong>ï¼šä¸€ä»½æ¨¡æ¿ï¼ˆåˆ—å…¨é‡ã€è¡Œå…¨é‡ï¼›è¡Œå¯ä¸ºæ ‘ï¼‰ï¼›åˆ—/è¡Œå·®å¼‚ç”±åˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨æ§åˆ¶ï¼›åˆ—/è¡ŒæŒ‰ col_keyã€row_key å”¯ä¸€æ ‡è¯†ï¼Œlabel å¯é‡å¤ï¼ˆè§ 12.4ï¼‰ã€‚</li>
<li><strong>å®ä¾‹æ•°æ®å±‚</strong>ï¼šä»ä¸º report_values(report_id, row_key, col_key, value)ï¼›report_id ä¸ç»„ç»‡ã€å‘¨æœŸå…³è”ã€‚</li>
<li><strong>æ¸²æŸ“å±‚</strong>ï¼šå½“å‰ç”¨æˆ·ç»„ç»‡ã€è§’è‰²åŠã€Œå½“å‰æŸ¥çœ‹ç»„ç»‡ã€â†’ åˆ—æƒé™è¡¨ã€è¡Œæƒé™è¡¨ â†’ è¿‡æ»¤è¡Œåˆ— â†’ ç°æœ‰åæ ‡æ˜ å°„ä¸å¡«å……ã€‚</li>
<li><strong>æƒé™å˜æ›´ä¸å†å²æ•°æ®</strong>ï¼šåˆ—/è¡Œæƒé™è°ƒæ•´åï¼Œå†å²æŠ¥è¡¨å®ä¾‹çš„å¯è§æ€§æŒ‰<strong>å½“å‰æƒé™</strong>è®¡ç®—ï¼ˆä¸æŒ‰å¡«æŠ¥æ—¶å¿«ç…§ï¼‰ï¼Œé¿å…åŒé‡ç»´æŠ¤ã€‚</li>
</ul>
<h4 data-id="heading-89">12.9 æƒé™ç›¸å…³è¡¨ç»“æ„è¦ç‚¹ï¼ˆç¤ºæ„ï¼‰</h4>
<ul>
<li><strong>ç»„ç»‡è¡¨</strong>ï¼ˆæ ‘å½¢ï¼‰ã€<strong>è§’è‰²è¡¨</strong>ã€ç»„ç»‡ç±»å‹/è§’è‰²ä¸æ¨¡æ¿çš„å…³è”ã€‚</li>
<li><strong>åˆ—æƒé™è¡¨</strong>ï¼štemplate_id, role/org_type, <strong>col_key</strong>, visible, editableï¼ˆæŒ‰ col_key é…ç½®ï¼Œä¸æŒ‰ labelï¼‰ã€‚</li>
<li><strong>è¡Œæƒé™è¡¨ï¼ˆè¡ŒèŒƒå›´è¡¨ï¼‰</strong>ï¼štemplate_id, org_id(æˆ– org_type), <strong>row_key</strong>, visible, editableï¼›ã€Œäº§å“-ä¼ä¸šå…³è”è¡¨ã€å³å…¶ä¸€ç§å®ç°ã€‚</li>
<li><strong>æ¨¡æ¿ä¸­åˆ—/è¡Œ</strong>ï¼šæ¯æ¡åˆ—æœ‰å”¯ä¸€ col_keyã€æ¯æ¡è¡Œæœ‰å”¯ä¸€ row_keyï¼›label å¯é‡å¤ï¼Œç”¨äºå±•ç¤ºã€‚</li>
<li><strong>æŠ¥è¡¨å®ä¾‹ä¸ç»„ç»‡</strong>ï¼šreport_id, org_id, period ç­‰ï¼Œç”¨äºæ•°æ®èŒƒå›´ä¸ã€Œå½“å‰æŸ¥çœ‹ç»„ç»‡ã€æŸ¥è¯¢ã€‚</li>
<li><strong>å¯é€‰</strong>ï¼šæƒé™ç»“æœå¯æŒ‰ org_id + role + template_id ç¼“å­˜ï¼Œå¤±æ•ˆç­–ç•¥ä¸ç²’åº¦å¾…å®ç°æ—¶å®šã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-90">åä¸‰ã€FAQ</h3>
<h4 data-id="heading-91">Q1ï¼šå¢åŠ åˆ—åï¼Œå¦‚ä½•åŒæ­¥ï¼Ÿ</h4>
<p><strong>æ“ä½œ</strong>ï¼šåœ¨å…ƒæ•°æ®ï¼ˆ<code>columnSchema</code>ï¼‰é‡Œå¢åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ†é…ä¸€ä¸ªæ–°çš„ keyï¼ˆå¦‚ <code>cn_live_commerce</code>ï¼‰ã€‚</p>
<p><strong>å›æ˜¾</strong>ï¼šå½“ <code>renderReport</code> æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šæ‰«ææœ€æ–°çš„ Schema ç”»å‡ºæ–°åˆ—ã€‚åœ¨å¡«å……æ•°æ®é˜¶æ®µï¼Œå®ƒå» <code>dataMap</code> é‡Œæ‰¾ <code>rowKey|cn_live_commerce</code>ã€‚å› ä¸ºæ˜¯æ–°åˆ—ï¼Œæ‰¾ä¸åˆ°å€¼ï¼Œäºæ˜¯ input æ˜¾ç¤ºä¸ºç©ºã€‚</p>
<p><strong>ä¿å­˜</strong>ï¼šç”¨æˆ·è¾“å…¥æ–°å€¼å¹¶ä¿å­˜ï¼Œæ•°æ®åº“ <code>report_values</code> è¡¨å°±ä¼šå¤šå‡ºå‡ è¡Œå¸¦æœ‰æ–° <code>col_key</code> çš„è®°å½•ã€‚</p>
<h4 data-id="heading-92">Q2ï¼šå‡å°‘åˆ—åï¼Œæ•°æ®ä¼šä¸¢å—ï¼Ÿ</h4>
<p><strong>æ“ä½œ</strong>ï¼šåœ¨å…ƒæ•°æ®ï¼ˆ<code>columnSchema</code>ï¼‰é‡Œåˆ æ‰å¯¹åº”çš„ JSON ç‰‡æ®µã€‚</p>
<p><strong>è¡¨ç°</strong>ï¼šæ¸²æŸ“å¼•æ“æ ¹æ® Schema ç»˜å›¾ï¼Œæ—¢ç„¶ Schema é‡Œæ²¡è¿™åˆ—äº†ï¼Œå‰ç«¯é¡µé¢ä¸Šè¯¥åˆ—ç›´æ¥æ¶ˆå¤±ã€‚</p>
<p><strong>æ•°æ®åº“çŠ¶æ€</strong>ï¼š<code>report_values</code> ä»ç„¶å­˜ç€é‚£äº›æ—§åæ ‡çš„æ•°æ®ã€‚è¿™å…¶å®æ˜¯å¥½äº‹â€”â€”å®ƒæ˜¯å¤©ç„¶çš„ç•™ç—•ã€‚å¦‚æœå“ªå¤©é›†å›¢åˆè¦å›è¿™åˆ—ï¼Œä½ æŠŠ Schema æ”¹å›å»ï¼Œæ•°æ®ç¬é—´"å¤æ´»"å›æ˜¾ã€‚</p>
<h4 data-id="heading-93">Q3ï¼šå­—æ®µæ›´åäº†æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šå…ƒæ•°æ®ä¸­çš„ <code>key</code>ï¼ˆå¦‚ <code>cn_group_gmv</code>ï¼‰æ˜¯ä¸€ç»åˆ›å»ºæ°¸ä¸ä¿®æ”¹çš„"é€»è¾‘ ID"ã€‚ç•Œé¢æ˜¾ç¤ºçš„ <code>label</code>ï¼ˆå¦‚"GMV"ï¼‰å¯ä»¥éšä¾¿æ”¹ï¼Œå®Œå…¨ä¸å½±å“æ•°æ®å›æ˜¾ã€‚</p>
<h4 data-id="heading-94">Q4ï¼šå¦‚ä½•å¤„ç†è®¡ç®—é€»è¾‘çš„å­˜å‚¨ï¼Ÿ</h4>
<p><strong>å­˜å‚¨ä½ç½®</strong>ï¼šè®¡ç®—å¼•æ“çš„é€»è¾‘ï¼ˆå…¬å¼ï¼‰å­˜å‚¨åœ¨å…ƒæ•°æ®è¡¨çš„ <code>formulas</code> å­—æ®µï¼ˆJSON ç±»å‹ï¼‰ã€‚</p>
<p><strong>é€»è¾‘ä¸‹æ²‰</strong>ï¼šå…¬å¼å­˜å‚¨åœ¨å…ƒæ•°æ®ä¸­ï¼Œæ¸²æŸ“å¼•æ“è¯»å–åäº¤ç»™ HyperFormula æ‰§è¡Œã€‚å½“ä¾èµ–çš„å•å…ƒæ ¼å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°è®¡ç®—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…ƒæ•°æ®ä¸­çš„å…¬å¼å®šä¹‰</span>
<span class="hljs-keyword">const</span> formulas = {
  <span class="hljs-string">"*|china_total_gmv"</span>: <span class="hljs-string">"SUM({*|china_group_tour_gmv}, {*|china_indie_tour_gmv})"</span>
};

<span class="hljs-comment">// æ¸²æŸ“å¼•æ“æ‰§è¡Œå…¬å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">executeFormula</span>(<span class="hljs-params">formula, dataMap</span>) {
  <span class="hljs-comment">// å°† {åæ ‡} æ›¿æ¢ä¸ºå®é™…å€¼</span>
  <span class="hljs-keyword">const</span> resolvedFormula = formula.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{([^}]+)\}/g</span>, <span class="hljs-function">(<span class="hljs-params">match, coord</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> dataMap.<span class="hljs-title function_">get</span>(coord) || <span class="hljs-number">0</span>;
  });
  
  <span class="hljs-comment">// äº¤ç»™ HyperFormula è®¡ç®—</span>
  <span class="hljs-keyword">return</span> hyperformula.<span class="hljs-title function_">calculate</span>(resolvedFormula);
}
</code></pre>
<hr/>
<p><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼šv1.0<br/>
<strong>æœ€åæ›´æ–°</strong>ï¼š2025å¹´2æœˆ1æ—¥<br/>
<strong>è¯´æ˜</strong>ï¼šæ–‡ä¸­ç¤ºä¾‹å‡ä»¥æ—…æ¸¸ä¸šåŠ¡åœºæ™¯ä¸ºä¾‹ï¼Œæ–¹æ¡ˆä¸ºé€šç”¨æŠ€æœ¯è®¾è®¡ï¼Œä¸æ¶‰åŠä»»ä½•å…·ä½“ä¼ä¸šä¿¡æ¯ã€‚<br/>
<strong>é€‚ç”¨ç³»ç»Ÿ</strong>ï¼šå¤šå±‚çº§/é›†å›¢çº§åŠ¨æ€æŠ¥è¡¨ç³»ç»Ÿï¼ˆ100ï½500 å¼ æŠ¥è¡¨ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿˜å¾—æ˜¯è…¾è®¯ï¼ŒClaude Codeè¿æ¥æœ€å¼ºä¸­å›½å¯¹æ‰‹ï¼ä¼ä¸šAgentæœ‰æ•‘äº†ï½]]></title>    <link>https://juejin.cn/post/7601435429409767458</link>    <guid>https://juejin.cn/post/7601435429409767458</guid>    <pubDate>2026-02-02T02:32:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601435429409767458" data-draft-id="7601384029611933711" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿˜å¾—æ˜¯è…¾è®¯ï¼ŒClaude Codeè¿æ¥æœ€å¼ºä¸­å›½å¯¹æ‰‹ï¼ä¼ä¸šAgentæœ‰æ•‘äº†ï½"/> <meta itemprop="keywords" content="äº‘è®¡ç®—,è…¾è®¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-02T02:32:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIè¢‹é¼ å¸"/> <meta itemprop="url" content="https://juejin.cn/user/2032372037988990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿˜å¾—æ˜¯è…¾è®¯ï¼ŒClaude Codeè¿æ¥æœ€å¼ºä¸­å›½å¯¹æ‰‹ï¼ä¼ä¸šAgentæœ‰æ•‘äº†ï½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2032372037988990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIè¢‹é¼ å¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:32:29.000Z" title="Mon Feb 02 2026 02:32:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æœ€è¿‘å¤©å¤©æŠ˜è…¾CLI Agentçš„è¢‹é¼ å¸ã€‚</p>
<p>ä¸€å‘¨å‰ï¼Œæˆ‘ç»™å¤§å®¶å®‰åˆ©äº†ä¸€æ¬¾<strong>Claude Codeçš„æœ€å¼ºå¼€æºå¯¹æ‰‹ï¼šOpenCode</strong>ï¼Œæ²¡æƒ³åˆ°æ–‡ç« å‘å‡ºå»ååå“è¿™ä¹ˆçƒ­çƒˆï¼Œä¸ç®¡æ˜¯é˜…è¯»é‡è¿˜æ˜¯è¯„è®ºéƒ½éå¸¸å¤šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd6dc71d943143a0a4864610746e2343~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=Rbh58RV9zY01yqnczym4wRFslt4%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¹Ÿå†æ¬¡å°è¯äº†ï¼Œå¤©ä¸‹è‹¦Anthropicä¹…çŸ£ã€‚</p>
<p>æ²¡æƒ³åˆ°ï¼ŒOpenCodeçš„çˆ†ç«ï¼Œç«‹é©¬åˆè§¦å‘äº†Anthropicè¿™å®¶å…¬å¸çš„"å°æ°”è¿æ‹›"ã€‚</p>
<p><strong>ä»–ä»¬ç›´æ¥å°ç¦äº†ç¬¬ä¸‰æ–¹å·¥å…·å¯¹Claude APIçš„è®¿é—®</strong>ï¼ˆåŒ…æ‹¬OpenCodeï¼‰ï¼Œè¿™æ“ä½œç®€ç›´æ˜¯æŠŠ"ç©ä¸èµ·"ä¸‰ä¸ªå­—å†™åœ¨äº†è„¸ä¸Šã€‚</p>
<p>è¿™æ³¢æ“ä½œï¼Œç›´æ¥å¼•å‘äº†å¾ˆå¤šäººçš„å¼ºçƒˆæŠ—è®®ã€‚</p>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™æ³¢å°ç¦ä¸ä»…æ²¡æŠŠOpenCodeæŒ‰ä¸‹å»ï¼Œåè€Œæ›´ç«çˆ†äº†ã€‚</p>
<p><strong>GitHubä¸Šçš„Staræ•°ç›´æ¥é£™å‡åˆ°äº†86.6Kï¼Œè¿…é€Ÿåè¶…äº†å®˜æ–¹Claude Codeçš„60.3Kã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76706ecf1eb34cae85b712f30b9767fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=xj8TnudKX%2BsrT6HC%2Bo7A0hkbZ%2Bc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07325ed18fef4ca68822a120a222fc6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=zM3WbHUbUXabuFNOp7ikHDwbAVg%3D" alt="" loading="lazy"/></p>
<p>è¿™è¯´æ˜å¤§å®¶å¯¹è¿™ç§å°é—­çš„ç”Ÿæ€æ—©å°±å—å¤Ÿäº†ã€‚</p>
<p>åˆšå¥½ï¼Œå‰å‡ å¤©æˆ‘çœ‹åˆ°è…¾è®¯çš„CodeBuddy Codeé‡ç£…å‡çº§åˆ°äº†2.0ç‰ˆæœ¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0b803c8fa2743668cef30b8f39afac1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=6P%2Fl2xGhes26j9kF%2BOha8Btd8hI%3D" alt="" loading="lazy"/></p>
<p>è¯´å®è¯ï¼ŒCodeBuddy Codeæˆ‘æœ‰ç”¨è¿‡ï¼ŒåŸºæœ¬å®Œå…¨å¤åˆ»Claude Codeï¼Œä¹‹å‰è¿˜å¸®æˆ‘å¼€å‘äº†å¥½å‡ ä¸ªå°å·¥å…·ï¼Œå¾ˆå®ç”¨ã€‚</p>
<blockquote>
<p>codebuddy code</p>
<p>è¢‹é¼ å¸ï¼Œå…¬ä¼—å·ï¼šè¢‹é¼ å¸AIå®¢æ ˆè…¾è®¯å‡ºæ‰‹äº†ï¼é¦–æ¬¾å›½äº§AI CLIçœŸæœ‰ç‚¹çŒ›ï¼Œæ”¯æŒå¾®ä¿¡ç™»å½•ï½</p>
</blockquote>
<p>ä¸å¾—ä¸è¯´ï¼Œ<strong>CodeBuddy Code 2.0è¿™æ¬¡å‡çº§éå¸¸ç¡¬æ ¸</strong>ï¼Œä¸ä»…å¼€æ”¾äº†SDKæ”¯æŒè¢«é›†æˆï¼Œè¿˜å…¨é¢æ‹¥æŠ±å¼€å‘è€…ç¤¾åŒºç”Ÿæ€ï¼Œæ”¯æŒPluginæ’ä»¶å¸‚åœºï¼Œè¿˜èƒ½åœ¨éš”ç¦»æ²™ç®±ç¯å¢ƒä¸­å®‰å…¨è¿è¡Œã€‚</p>
<p><strong>è€Œä¸”å®ƒå†…ç½®çš„æ¨¡å‹éå¸¸ä¸°å¯Œï¼š</strong></p>
<p>åƒGPT-5.2-Codexã€GPT-5.1-Maxã€Gemini 3 Proè¿™äº›é¡¶çº§çš„æ¨¡å‹å…¨éƒ½æœ‰ã€‚å›½å†…ç‰ˆä¹Ÿæ”¯æŒDeepSeek-V3ã€GLM-4.7ç­‰ã€‚</p>
<p>PSï¼šå¦å¤–ï¼Œæœ‰å‡ æ¬¡å¿˜è®°æŒ‡å®šæ¨¡å‹ï¼Œä½“éªŒä¸‹æ¥ï¼Œæ„Ÿè§‰Defaultæ¨¡å‹ä¹Ÿå¾ˆå¼ºå•Šï¼Œä½†æ˜¯æ²¡æœ‰æ ‡æ˜å…·ä½“æ˜¯ä»€ä¹ˆæ¨¡å‹ï¼Œä¸ä¼šå°±æ˜¯Claudeå§ï¼Ÿï¼Ÿ...</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d78463493ea408d992dd3316c9a43a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=vi8CPaae3KidC6V%2BYAdXH4MjGVA%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯æˆ‘åˆå±é¢ å±é¢ å‡çº§äº†2.0ï¼Œè¿™ä¸€è¯•ä¸è¦ç´§ï¼Œæˆ‘å‘ç°å®ƒç°åœ¨ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„Claude Codeå¹³æ›¿äº†ã€‚</p>
<p>ç‰¹åˆ«æ˜¯æˆ‘<strong>ç”¨ä¸Šäº†æœ€è¿‘å­¦åˆ°çš„ä¸€äº›Claude Codeç¥çº§ç”¨æ³•</strong>ï¼Œæ¥å¸®æˆ‘å®Œæˆäº†ä¸€äº›ä»»åŠ¡ï¼Œæ„æ–™ä¹‹å¤–çš„å‡ºè‰²ã€‚</p>
<blockquote>
<p><em><strong>ç”¨æ³•1ï¼ˆåˆ›é€ /ä¼˜åŒ–Skillsï¼‰ï¼šç”¨å®ƒå¸®æˆ‘ä¼˜åŒ–äº†å‰å‡ å¤©å¼€æºçš„x-skillsï¼›</strong></em><br/>
<em><strong>ç”¨æ³•2ï¼ˆClaude Codeç¥çº§é…ç½®æ— æ„Ÿè¿ç§»ï¼‰ï¼š</strong> ç”¨ä¸Šäº†Anthropicé»‘å®¢æ¾å† å†›çš„ç¥çº§é…ç½®ï¼›</em><br/>
<em><strong>ç”¨æ³•3ï¼ˆå¤§å‹é¡¹ç›®ä¼˜åŒ–/é‡æ„ï¼‰ï¼š</strong> é‡æ„æˆ‘ä¹‹å‰åšçš„æ•°å­—äººè¥é”€çŸ­è§†é¢‘å¹³å°ï¼›</em><br/>
<em><strong>ç”¨æ³•4ï¼ˆä¼ä¸šçº§devopsåº”ç”¨ï¼Œè¿ç»´Agentæ–¹å‘ï¼‰</strong> å°è¯•æŠŠå®ƒå½“åšä¼ä¸šITè¿ç»´Agentæ¥ç”¨ï¼›</em></p>
</blockquote>
<p>é™¤äº†è¿™å‡ ä¸ªç”¨æ³•ï¼Œè¿˜æœ‰è¿‡ç¨‹ï¼Œå’Œæˆ‘çš„ä¸€äº›ç»éªŒåˆ†äº«ï¼Œè¿™ç¯‡åŒæ ·èŠ±äº†æˆ‘ä¸å°‘å¿ƒè¡€ï¼Œå¸Œæœ›èƒ½å¾—åˆ°ä½ çš„ä¸‰è¿æ”¯æŒğŸŒ¸ï¼ˆä¹Ÿå¤šå¤šè½¬å‘ç»™ä½ èº«è¾¹éœ€è¦çš„æœ‹å‹ä»¬ï¼‰</p>
<p><strong>ä¸€ã€ å®‰è£…æ¥å…¥æ–¹å¼ï¼šéå¸¸ç®€å•</strong></p>
<p>CodeBuddy Codeçš„å®‰è£…éå¸¸ç®€å•ï¼Œåªè¦ä½ çš„ç”µè„‘ä¸Šæœ‰Node.jsï¼ˆç‰ˆæœ¬å¤§äºç­‰äº18ï¼‰ç¯å¢ƒï¼Œä¸€è¡Œå‘½ä»¤å°±æå®šï¼š</p>
<pre><code class="hljs language-css" lang="css">npm install -g <span class="hljs-keyword">@tencent-ai</span>/codebuddy-code<span class="hljs-keyword">@latest</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3fa3f8f8edb4c828657f48e970820b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=MkkQgvZoOcB86Kp4%2FQhc1sTMnsI%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ codebuddy å¯åŠ¨ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆèº«ä»½éªŒè¯å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚</p>
<p>å¦‚æœé€‰æ‹©<strong>å›½å†…ç‰ˆï¼Œæ”¯æŒå¾®ä¿¡ç™»å½•</strong>ï¼Œå¦‚æœé€‰æ‹©<strong>æµ·å¤–ç‰ˆæ”¯æŒGithubæˆ–è€…Googleé‚®ç®±ç™»å½•</strong>ã€‚</p>
<p>å¦‚æœä½ æ˜¯åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œç›´æ¥å›è½¦ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®©ä½ æ‰«ç æˆ–è€…ç™»å½•ï¼›</p>
<p>å¦‚æœä½ æ˜¯åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œä½ å¤åˆ¶åˆ°æœ¬åœ°æµè§ˆå™¨æ‰“å¼€éªŒè¯ä¸€ä¸‹å°±è¡Œã€‚</p>
<p>å¦å¤–ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä»½<strong>codebuddy codeçš„å®˜æ–¹ä½¿ç”¨æ–‡æ¡£</strong>ï¼Œæƒ³å­¦codebuddy codeçš„æœ‹å‹å¯ä»¥çœ‹çœ‹ï¼Œæƒ³å­¦Claude Codeçš„æœ‹å‹æ›´åº”è¯¥çœ‹çœ‹ï¼Œå› ä¸ºå®ƒä»¬çš„æ“ä½œåŸºæœ¬ä¸€è‡´</p>
<p><strong>äºŒã€ è¿™æ‰æ˜¯CLI Agentè¯¥æœ‰çš„æ ·å­</strong></p>
<h3 data-id="heading-0"><strong>1. æ¥å…¥Anthropicé»‘å®¢æ¾å† å†›çš„ç¥çº§é…ç½®</strong></h3>
<p>æœ€è¿‘åœ¨Claude Codeæœ‰ä¸ªéå¸¸ç«çš„ç¥çº§å¼€æºé¡¹ç›®å«ï¼š<strong>Everything Claude Code</strong>ï¼Œåœ¨Github<strong>è¶…è¿‡20K Star</strong>äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dc31377b56343e7882b3f7ab40d5612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=xS3DDnVBbAqln3dDqtChlgzUSQU%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯<strong>Anthropicé»‘å®¢æ¾å† å†›å¼€æºçš„æ–¹æ¡ˆ</strong>ï¼Œé‡Œé¢æ±‡é›†äº†ä»–10ä¸ªæœˆçš„å®æˆ˜ç»éªŒã€‚</p>
<p>æ¶µç›–äº†subagentsã€skillsã€commandsã€rulesã€hooksç­‰ç­‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba22081d6b0e47c2b64c1ac549bd0b48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=zB7ekm3waPwsvab6MGtibTrRGGY%3D" alt="" loading="lazy"/></p>
<p>å®ƒèƒ½ç»™ä½ çš„AgentåŠ ä¸Š8ä¸ªä¸“ä¸šçš„å­ä»£ç†ï¼ˆSubAgentsï¼‰ï¼Œæ¶µç›–è§„åˆ’ã€æ¶æ„ã€ä»£ç å®¡æŸ¥ã€å®‰å…¨ç­‰å…¨æµç¨‹ï¼›è¿˜æœ‰è‡ªåŠ¨åŒ–çš„Hooksï¼Œæ”¯æŒè·¨ä¼šè¯è®°å¿†æŒä¹…åŒ–ï¼›ç”šè‡³è¿˜æœ‰å¼ºåˆ¶çš„ä»£ç è§„èŒƒæ£€æŸ¥ã€‚</p>
<p>æˆ‘è¯•ç€åœ¨CodeBuddy Codeé‡Œå®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œæœ¬æ¥ä»¥ä¸ºä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œç»“æœä¸¤æ¡å‘½ä»¤ä¸‹å»ï¼Œç›´æ¥è·‘é€šäº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add affaan-m/everything-claude-code
/plugin install everything-claude-code@everything-claude-code
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b40c79a130c40dea4fb500221727e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=NbIYtX52dzBE3LmMcEYUFHcHhmY%3D" alt="" loading="lazy"/></p>
<p>è£…å®Œä¹‹åï¼Œéœ€è¦é‡å¯ä¸€ä¸‹CodeBuddy Codeã€‚ç„¶åæˆ‘æ„Ÿè§‰codebuddy codeç¬é—´è¿›åŒ–äº†</p>
<p>å¤šå‡ºæ¥8ä¸ªsubagentsã€è¿˜æœ‰ä¸€äº›å®ç”¨Skills</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1211fb631e3c41e7968e68f536cb1da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=g6J%2FONrILCKOH50Z9Pl205kWnrU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3a0dce8ef864048b5ec5f0bb5e73611~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=Mhp4K%2BxcncLj6Zswwpw61TK4GP4%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘è¾“å…¥ /plan æŒ‡ä»¤ï¼Œå¹¶ç»™äº†ä¸€æ®µä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bc5459e75bc4299a92b266c53792eb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=esV5tEfjdMvO99rrIIsVuZpA3XA%3D" alt="" loading="lazy"/></p>
<p>å®ƒç«‹é©¬å¯åŠ¨äº†ä¸€ä¸ªè§„åˆ’å­ä»£ç†ï¼Œä¸å†æ˜¯é—·å¤´å†™ä»£ç ï¼Œè€Œæ˜¯åƒä¸€ä¸ªæŠ€æœ¯è´Ÿè´£äººä¸€æ ·ï¼Œå…ˆå¸®æˆ‘æ‹†è§£ä»»åŠ¡ã€åˆ†æä¾èµ–ã€åˆ¶å®šæ­¥éª¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/611234ea8ad64dbc8038fb3456338869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=rZlYEFizVfehPrOnmXdMKadMBA4%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æ„Ÿè§‰ï¼Œå°±åƒæ˜¯ç»™åŸæœ¬å•å…µä½œæˆ˜çš„å£«å…µï¼Œé…äº†ä¸€ä¸ªå‚è°‹éƒ¨ã€‚</p>
<p>ç¯‡å¹…æœ‰é™ï¼Œå°±ä¸å±•å¼€äº†ï¼Œå¢™è£‚æ¨èå¤§å®¶è¯•è¯•</p>
<h3 data-id="heading-1"><strong>2. é‡æ„æ•°å­—äººè¥é”€çŸ­è§†é¢‘å¹³å°ï¼šGemini+GPT</strong></h3>
<p>æˆ‘ä¹‹å‰åšäº†ä¸€ä¸ª<strong>æ•°å­—äººè¥é”€çŸ­è§†é¢‘ä¸€é”®ç”Ÿæˆå¹³å°</strong>ï¼Œåæ¥æˆ‘æŠŠå‰ç«¯ç”¨Gemini 3 Proé‡æ„äº†ï¼Œç°åœ¨éœ€è¦åŸºäºé‡æ„çš„å‰ç«¯å†å®ç°åç«¯å’Œæ•°æ®åº“ï¼Œä»¥åŠå‰åç«¯çš„è”è°ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/014ce10f49db42a58ad2e0493629b963~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=iM2yXbGRUWxExXdNxdHY%2F3Lcq18%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡æˆ‘æ‘¸ç´¢å‡ºäº†ä¸€å¥—åŸºäºCodeBuddy Codeçš„æ··åˆåŒæ‰“å·¥ä½œæµã€‚æˆ‘å‘ç°<strong>Gemini3 Pro + GPT-5.2-Codexæ˜¯çœŸæ»´å¼º</strong></p>
<p><em>PSï¼šGPT-5.2-Codexé€Ÿåº¦æœ‰ç‚¹æ…¢ï¼Œè¿™åº”è¯¥æ˜¯é€šç—…ï¼Œåœ¨codexé‡Œé¢ä¹Ÿä¸å¿«ï¼ˆå¦‚æœæƒ³è¦é€Ÿåº¦æ›´å¿«å¯ä»¥æ¢æˆGLM-4.7ï¼Œæ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼‰</em></p>
<p>ç‰¹åˆ«æ˜¯é…å¤‡äº†Anthropicé»‘å®¢æ¾å† å†›çš„é…ç½®ä¹‹åï¼Œæ›´æ˜¯å¦‚è™æ·»ç¿¼ï¼Œ</p>
<p>é¦–å…ˆï¼Œæˆ‘åˆ©ç”¨CodeBuddy Codeå†…ç½®çš„ Gemini 3 Pro æ¨¡å‹æ¥å‡ºæ–¹æ¡ˆï¼ˆè¿˜å¯ä»¥å®Œæˆå‰ç«¯ä»£ç ï¼ŒGeminiå†™å‰ç«¯å®¡ç¾å·¨å¥½ï¼‰ã€‚</p>
<p>å› ä¸ºGeminiçš„ä¸Šä¸‹æ–‡çª—å£ç‰¹åˆ«é•¿ï¼Œç†è§£èƒ½åŠ›æå¼ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/464afa80a74640d2b032fab47c7217af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=GCHJ5FGYsINenxb0Y4dKIe4xvZU%3D" alt="" loading="lazy"/></p>
<p>Geminiå¾ˆå¿«ç»™å‡ºäº†ä¸€ä»½éå¸¸è¯¦å°½çš„æ–¹æ¡ˆï¼ˆå†…å®¹ï¼Œå¤ªé•¿ï¼Œæˆªå–äº†éƒ¨åˆ†å›¾ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/374e722e592a416f9ec01127d400ffee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=sjs5VUhqfzpb5GhQdpgrHnSGckM%3D" alt="" loading="lazy"/></p>
<p>æ‹¿åˆ°æ–¹æ¡ˆåï¼Œæˆ‘æ²¡æœ‰ç›´æ¥è®©å®ƒå†™ä»£ç ï¼Œè€Œæ˜¯åˆ‡æ¢åˆ° GPT-5.1-Max æ¨¡å‹ï¼Œè®©å®ƒæ‰®æ¼”æ¶æ„å¸ˆçš„è§’è‰²ï¼šâ€œè¯·å®¡æŸ¥è¿™ä»½æ–¹æ¡ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆä¸è¶³å’Œéœ€è¦è¡¥å……çš„åœ°æ–¹â€ï¼Œè¿›ä¸€æ­¥å®Œå–„æ–¹æ¡ˆï¼Œå¯¹é½éœ€æ±‚ã€‚</p>
<p>æœ€åï¼Œæˆ‘åˆ‡æ¢åˆ° GPT-5.2-Codex æ¨¡å‹ï¼Œè®©å®ƒè½åœ°æ‰§è¡Œï¼šåŸºäºä¼˜åŒ–åçš„æ–¹æ¡ˆï¼Œå¸®æˆ‘ç¼–å†™åç«¯çš„Coreæ¨¡å—ä»£ç ã€‚</p>
<p>è¿™ä¸€å¥—æµç¨‹è·‘ä¸‹æ¥ï¼Œæˆ‘å‘ç°ä»£ç çš„è´¨é‡å˜é«˜äº†ï¼Œå‡ ä¹æ²¡æœ‰é‚£ç§ä½çº§çš„é€»è¾‘é”™è¯¯ï¼Œè€Œä¸”ç»“æ„éå¸¸æ¸…æ™°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69ebd7867f92402998832b32f1691cd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=bFuAhIgIdKFXu%2BzaVdm7c26gYFc%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸”æœ€çˆ½çš„æ˜¯ï¼Œè¿™<strong>ä¸€åˆ‡æ“ä½œéƒ½æ˜¯åœ¨CodeBuddy Codeé‡Œé¢å®Œæˆçš„ï¼Œä¸éœ€è¦åœ¨å¤šä¸ªå·¥å…·ä¹‹é—´åˆ‡æ¥åˆ‡å»ï¼Œä½“éªŒéå¸¸ä¸æ»‘ã€‚</strong></p>
<p>æœ€è¿‘å‡†å¤‡æŠŠè¿™ä¸ªé¡¹ç›®å¼€æºäº†ï¼Œå› ä¸ºæˆ‘è°ƒç ”äº†ä¸€ä¸‹ï¼Œå‘ç°å¸‚é¢ä¸Šå·²ç»æœ‰ä¸€äº›æ”¶è´¹å¹³å°ï¼Œåšå¾—éå¸¸å¥½äº†ï¼Œä¸è¿‡é‚£äº›å¹³å°ä¹Ÿæ²¡åšå¤šä¹…ï¼ˆåé¢æœ‰æœºä¼šåˆ†äº«ä¸€ä¸‹ï¼‰ã€‚</p>
<p>æˆ‘ä¹Ÿå¸Œæœ›é€šè¿‡æˆ‘çš„å¼€æºï¼Œèƒ½å¸®å¤§å®¶å‹ç¼©ä¸€ä¸‹æˆæœ¬ã€‚</p>
<h3 data-id="heading-2"><strong>3. ä¼˜åŒ–Skillsï¼šæˆ‘çš„å¼€æºx-skills</strong></h3>
<p><strong>å‰å‡ å¤©æˆ‘å¼€æºäº†ä¸€ä¸ªè‡ªåŠ¨å†™Xæ¨æ–‡ï¼Œå¹¶å‘å¸ƒåˆ°è‰ç¨¿ç®±çš„Agent Skillsï¼Œå«x-skills</strong>ï¼Œä¸€äº›æœ‹å‹åé¦ˆè¿˜ä¸é”™ï¼Œä½†è¿˜æœ‰å¾ˆå¤§ä¼˜åŒ–ç©ºé—´ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fkangarooking%2Fx-skills" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/kangarooking/x-skills" ref="nofollow noopener noreferrer">github.com/kangarookinâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcd7f9993a544082a00f7eb2191c6bac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=6ba3YaNjpnifU%2Fauuc5zx8eJL%2FI%3D" alt="" loading="lazy"/></p>
<p>Xä¸Šæœ€è¿‘æ¨èç®—æ³•å¼€æºåï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯æœ‰å¾ˆå¤šæœºä¼šçš„ï¼Œè€Œä¸”åšXèƒ½é¢†åˆ°é©¬æ–¯å…‹çš„å·¥èµ„ï¼Œå¦‚æœæŠŠçŸ©é˜µå·åšèµ·æ¥ï¼Œæ”¶å…¥ä¹Ÿä¼šç›¸å½“å¯è§‚ã€‚</p>
<p>è¿™æ¬¡æˆ‘ç›´æ¥æŠŠx-skillsçš„é¡¹ç›®ç›®å½•äº¤ç»™CodeBuddy Codeã€‚</p>
<p><strong>åšäº†ä¸¤ä¸ªä¼˜åŒ–ï¼š</strong></p>
<p><strong>ä¸€ä¸ªæ˜¯æŠŠXå‰å‡ å¤©å¼€æºçš„Xç®—æ³•ç›¸å…³ä¿¡æ¯ä¸¢è¿‡å»</strong>ï¼Œä¼˜åŒ–äº†é€‰é¢˜è¿˜æœ‰åˆ›ä½œåé¦ˆç­‰æµç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e917550da3047e48dde219336962ff3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=00BVMSYwBvajcCzvdMr4R4IBDs8%3D" alt="" loading="lazy"/></p>
<p>å¦ä¸€ä¸ªæ˜¯å€Ÿé‰´<strong>è‡§å¸ˆå‚…å¼€æºçš„æ¶ˆé™¤AIå‘³çš„Skills</strong>ï¼Œä¼˜åŒ–äº†x-skillsçš„åˆ›ä½œè¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b9d8a3422324194ada8a69f773a133c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=ldzwwpgzU7iokf3QATpSoW%2BaocA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff2faca1f044a2b971ff46348f232c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=v4OqxkmrBEbF%2BHUgfqmd0Z8WXQ4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/891b4fee6abb4d4a88ae1b098cfc8b45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=xR1ndqMyJLv6KUFKTKL1%2F00bvfM%3D" alt="" loading="lazy"/></p>
<p>CodeBuddy Codeè¿…é€Ÿåˆ†æäº†x-skillsç°æœ‰çš„æ–‡ä»¶ï¼Œå¹¶ç»“åˆæˆ‘æä¾›çš„å†…å®¹ï¼Œè¿›è¡Œäº†ä¸é”™çš„ä¼˜åŒ–ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ç›´æ¥åœ¨CodeBuddyé‡ŒåŠ è½½äº†è¿™ä¸ªä¼˜åŒ–åçš„x-skillsï¼Œè¯•ç€ç”Ÿæˆäº†ä¸€æ¡æ¨æ–‡ã€‚</p>
<p>å¯¹æ¯”ä¸Šæ¬¡æˆ‘ç”¨Claude Codeç”Ÿæˆçš„å†…å®¹ï¼Œæ–°ç‰ˆæœ¬çš„æ¨æ–‡åœ¨è¯­æ°”ä¸Šæ›´åŠ è‡ªç„¶ï¼Œè€Œä¸”æ›´æœ‰ç½‘æ„Ÿäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4228510320b4123a64f134e92b4673a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=x3BpVDQ8BevG7RJZBM3bvhWsT2w%3D" alt="" loading="lazy"/></p>
<p>è¿™è¯´æ˜CodeBuddy Codeå¯¹äºContextï¼ˆä¸Šä¸‹æ–‡ï¼‰çš„ç†è§£å’Œå¤„ç†èƒ½åŠ›ï¼Œå®Œå…¨ä¸è¾“Claude Codeï¼Œåœ¨ç»“åˆé¡¶çº§æ¨¡å‹åï¼Œè¡¨ç°ç›¸å½“ä¸é”™ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™æ¡æ¨æ–‡åœ¨æˆ‘èŠ±äº†2åˆ†é’Ÿä¿®æ”¹äº†ä¸€å°éƒ¨åˆ†ä¹‹åï¼Œæ­£å¼å‘å¸ƒäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/407a5f19dfcb4aa5a392c0ef0e8ab646~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=lLkXB9q%2FIUq3AyZTAHalLwkapUI%3D" alt="" loading="lazy"/></p>
<p>x-skillsæœ€æ ¸å¿ƒçš„åœ°æ–¹å…¶å®æ˜¯åœ¨ç¬¬ä¸€æ­¥æ”¶é›†ç´ æï¼Œæ‰¾é€‰é¢˜çš„æµç¨‹ï¼Œæ¥ä¸‹æ¥æˆ‘åº”è¯¥ä¼šä¼˜åŒ–æ•°æ®æºï¼Œå› ä¸ºå…¶å®<strong>åšè‡ªåª’ä½“ï¼Œé€‰é¢˜å’Œæ ‡é¢˜å 80%</strong></p>
<h3 data-id="heading-3"><strong>4. ä¼ä¸šçº§è¿ç»´Agent</strong></h3>
<p>å‰ä¸¤å¤©æœ‰æœ‹å‹åœ¨è¯„è®ºåŒºé—®æˆ‘ï¼Œ<strong>æœ‰æ²¡æœ‰ä»€ä¹ˆé€‚åˆä¼ä¸šçš„è¿ç»´Agentæ¨èï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6467bf4b0d0f4b97ade0c4c9682ec5ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=yxqSzXrrM1YkFdn34Vk%2Fxs1uMjk%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è§‰å¾—CodeBuddy Codeç®€ç›´å°±æ˜¯ä¸ºè¿™ä¸ªåœºæ™¯é‡èº«å®šåšçš„ã€‚</p>
<p>é¦–å…ˆï¼Œå®ƒæ˜¯<strong>è…¾è®¯å‡ºå“ï¼Œå›½å†…ä¼ä¸šç”¨èµ·æ¥æ²¡æœ‰åˆè§„é£é™©ã€‚</strong></p>
<p>å…¶æ¬¡ï¼Œå®ƒ<strong>æ”¯æŒå®‰è£…åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œé…åˆå®ƒçš„éš”ç¦»æ²™ç®±ç¯å¢ƒï¼Œå®‰å…¨æ€§æœ‰ä¿éšœ</strong>ï¼Œä½†æ˜¯ä¹Ÿä¸€å®šè¦åšå¥½æƒé™æ§åˆ¶ã€‚</p>
<p>æˆ‘è¯•ç€åœ¨ä¸€å°æµ‹è¯•æœåŠ¡å™¨ä¸Šå®‰è£…äº†CodeBuddy Code</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8214fd810b7b40a4a464a9f0e14c3c3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=rq%2BDNUCgSC0kbmEckzeUUqWW2Io%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹éå¸¸å¿«ï¼Œåªéœ€è¦æ‰§è¡Œä¸€ä¸‹è¿™å‡ ä¸ªæŒ‡ä»¤</p>
<pre><code class="hljs language-java" lang="java">sudo yum update -y
sudo yum install -y curl git vim
curl -fsSL https:<span class="hljs-comment">//rpm.nodesource.com/setup_18.x | sudo bash -</span>
sudo yum install -y nodejs
npm install -g <span class="hljs-meta">@tencent</span>-ai/codebuddy-code<span class="hljs-meta">@latest</span>
</code></pre>
<p>ä¸è¿‡æœåŠ¡å™¨ä¸èƒ½æ˜¯CentOS 7ï¼Œä¸€å®šè¦å¤§äºè¿™ä¸ªç‰ˆæœ¬æ‰è¡Œå“¦</p>
<p>å¯ä»¥è¾“å…¥cat /etc/centos-release æŸ¥çœ‹ç‰ˆæœ¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c61e90d66cb6425a8248fccda8e0a17e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=hdPtqiqb4pGdX2PosPLR9wOou9g%3D" alt="" loading="lazy"/></p>
<p>ä½œä¸ºè¿ç»´Agentï¼Œå¯ä»¥è®©å®ƒç›´æ¥å¸®æˆ‘æ£€æŸ¥æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€å•¥çš„ï¼Œæ’æŸ¥é—®é¢˜ç­‰ç­‰ï¼Œéƒ½éå¸¸æ–¹ä¾¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5bb1b5d000743aab421601552f3f0ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=uLa0Pu8eyzdpWmD0RMDQvPjyZfs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e26e9d950774f55a2e7e2ba5d6c9e94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604354&amp;x-signature=0iQr2GSNrPi2BEVd8TLMDdGMDCA%3D" alt="" loading="lazy"/></p>
<p>ä½ çœ‹çœ‹ï¼Œå°±å•å•æ˜¯æ£€æŸ¥æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€è¿™ç‚¹ï¼Œå°±æ¯”äººæ¥æ£€æŸ¥å¿«äº†èµ·ç 10å€ï¼Œcodebuddy codeéå¸¸è¿…é€Ÿçš„å°±æ‰§è¡Œäº†æ‰€æœ‰æ£€æŸ¥æŒ‡ä»¤ï¼Œå°†å¾—åˆ°çš„ä¿¡æ¯åˆ†ææ€»ç»“æ‘†åœ¨ä½ é¢å‰ã€‚</p>
<p>ç»ˆäºä¸ç”¨å»è®°é‚£äº›ç”Ÿç¡¬çš„liunxæŒ‡ä»¤äº†ï¼</p>
<p><strong>é€šè¿‡å®ƒçš„SDKï¼Œä½ ç”šè‡³å¯ä»¥æŠŠcodebuddy codeé›†æˆåˆ°ç°æœ‰çš„DevOpsæµæ°´çº¿é‡Œï¼Œæˆ–è€…ç°æœ‰çš„åº”ç”¨é‡Œã€‚</strong></p>
<p>æ¯”å¦‚åœ¨CI/CDè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨è§¦å‘CodeBuddyæ¥æ£€æŸ¥ä»£ç è§„èŒƒï¼Œæˆ–è€…åœ¨éƒ¨ç½²å¤±è´¥æ—¶è‡ªåŠ¨åˆ†ææ—¥å¿—å¹¶æŠ¥è­¦ï¼Œè¿™äº›éƒ½æ˜¯ä¼ä¸šçº§çš„æµç¨‹ä¼˜åŒ–ï¼Œæ˜¯çœŸæ­£èƒ½ææ•ˆçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</p>
<p>è€Œä¸”ï¼Œè¿™å¯¹äºå¾ˆå¤šä¸­å°ä¼ä¸šçš„å›¢é˜Ÿæ¥è¯´ï¼Œç›¸å½“äºè¯·äº†ä¸€ä¸ª24å°æ—¶ä¸ç¡è§‰çš„è¿ç»´å·¥ç¨‹å¸ˆã€‚</p>
<p><strong>è‡³äºæ€ä¹ˆæŠŠcodebuddy codeä½œä¸ºsdkæ¥å…¥ç°æœ‰åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå†™çš„éå¸¸è¯¦ç»†äº†</strong></p>
<p><strong>ã€Œå†™åœ¨æœ€åã€</strong></p>
<p>ç»è¿‡è¿™å‡ å¤©çš„æŠ˜è…¾ï¼Œæˆ‘å¯¹CodeBuddy Code 2.0çš„è¯„ä»·æ˜¯ï¼šæƒŠå–œã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªClaude Codeçš„å›½äº§å¹³æ›¿ï¼Œæ›´æ˜¯ä¸€ä¸ªåœ¨åŠŸèƒ½ã€æ¨¡å‹ç”Ÿæ€ã€ä¼ä¸šçº§ç‰¹æ€§ä¸Šéƒ½åšå‡ºäº†å·®å¼‚åŒ–çš„å¼ºåŠ›å·¥å…·ã€‚</p>
<p>ç‰¹åˆ«æ˜¯å¯¹äºå›½å†…å¼€å‘è€…æ¥è¯´ï¼Œä¸ç”¨æ‹…å¿ƒå°å·ï¼Œä¸ç”¨æŠ˜è…¾ç½‘ç»œï¼Œè¿˜æœ‰è…¾è®¯äº‘çš„ç”Ÿæ€æ”¯æŒï¼Œè¿™æœ¬èº«å°±æ˜¯å·¨å¤§çš„ä¼˜åŠ¿ã€‚</p>
<p>è€Œä¸”ï¼Œå®ƒæ”¯æŒGPT-5.2-Codexå’ŒGemini 3 Proæ¨¡å‹ï¼Œå¦‚æœæœ‰æ•ˆç»“åˆèµ·æ¥ä½¿ç”¨çš„è¯ï¼Œè¡¨ç°èƒ½å¤Ÿä¼˜äºå•ç”¨Claudeæ¨¡å‹ï¼ˆå¦å¤–ï¼ŒDefaultå¾ˆæœ‰å¯èƒ½æ˜¯Claudeï¼Œæˆ‘ç”¨ä¸‹æ¥æ„Ÿè§‰å¤ªåƒäº†..ï¼‰ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿå—å¤Ÿäº†Anthropicçš„å°æ°”ï¼Œæˆ–è€…æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªç¨³å®šã€å¼ºå¤§ã€å¯æ‰©å±•çš„CLI Agentï¼Œæˆ‘å¢™è£‚å»ºè®®ä½ è¯•è¯•CodeBuddy Codeã€‚</p>
<p>åœ¨è¿™ä¸ªAIç¼–ç¨‹ï¼ˆAgentï¼‰å·¥å…·ç™¾èŠ±é½æ”¾çš„æ—¶ä»£ï¼Œ<strong>å¤šä¸€ç§é€‰æ‹©ï¼Œå°±å¤šä¸€ä»½è‡ªç”±</strong>ã€‚</p>
<p>æˆ‘æ˜¯è¢‹é¼ å¸ï¼Œä¸€ä¸ªåœ¨è¿™ä¸ªAIæ—¶ä»£ï¼ŒæŒç»­åˆ†äº«AIå®è·µå¹²è´§ï¼Œé™ªä½ ä¸€èµ·è¿›åŒ–çš„æ•°å­—æ¸¸æ°‘ã€‚</p>
<p><strong>è°¢è°¢ä½ è€å¿ƒçœ‹å®Œæˆ‘çš„æ–‡ç« ~</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter-å®ç°Tabså¸é¡¶çš„PageViewæ•ˆæœ]]></title>    <link>https://juejin.cn/post/7601728622824095787</link>    <guid>https://juejin.cn/post/7601728622824095787</guid>    <pubDate>2026-02-02T02:51:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601728622824095787" data-draft-id="7601464318410014762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter-å®ç°Tabså¸é¡¶çš„PageViewæ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2026-02-02T02:51:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter-å®ç°Tabså¸é¡¶çš„PageViewæ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:51:02.000Z" title="Mon Feb 02 2026 02:51:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">1. æ•ˆæœé¢„è§ˆ</h2>
<p>åœ¨ Flutter å¼€å‘ä¸­ï¼Œåˆ›å»ºå…·æœ‰å¸é¡¶ Tabs çš„ PageView æ•ˆæœå¯ä»¥æå¤§åœ°æå‡ç”¨æˆ·ç•Œé¢çš„äº¤äº’æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€æ®µå…·ä½“çš„ä»£ç æ¥æ·±å…¥äº†è§£å¦‚ä½•å®ç°è¿™ä¸€åŠŸèƒ½ã€‚æ•ˆæœé¢„è§ˆå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e668bebeb3147a293aa730227c4e2dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770605462&amp;x-signature=o%2FXaSEucD7rt17hi5dJSe3f%2BxEw%3D" alt="é¢„è§ˆå›¾" loading="lazy"/></p>
<h2 data-id="heading-1">2. ç»“æ„åˆ†æ</h2>
<p>æˆ‘ä»¬ä»æ•´ä½“ä¸Šçœ‹è¿™æ®µä»£ç ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªåä¸ºCeilingTabsPageViewçš„æœ‰çŠ¶æ€ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶çš„ä½œç”¨å°±æ˜¯æ„å»ºå‡ºä¸€ä¸ªå¸¦æœ‰å¸é¡¶ Tabs çš„é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ»‘åŠ¨ PageView åœ¨ä¸åŒçš„é¡µé¢å†…å®¹é—´åˆ‡æ¢ã€‚</p>
<ol>
<li>å¼•å…¥å¿…è¦çš„åº“</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:extended_nested_scroll_view/extended_nested_scroll_view.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
</code></pre>
<p>ä»£ç å¼€å¤´å¼•å…¥äº†ä¸¤ä¸ªé‡è¦çš„åº“ã€‚</p>
<ul>
<li>
<p>package:flutter/material.dartï¼šFlutter çš„æ ¸å¿ƒ UIåº“ï¼Œå®ƒæä¾›äº†å„ç§æ„å»ºç”¨æˆ·ç•Œé¢çš„åŸºæœ¬ç»„ä»¶å’Œå·¥å…·ï¼Œæ¯”å¦‚æˆ‘ä»¬åç»­ä¼šç”¨åˆ°çš„Containerã€Rowã€Textç­‰ã€‚</p>
</li>
<li>
<p>package:extended_nested_scroll_view/extended_nested_scroll_view.dartï¼šä¸ºæˆ‘ä»¬å®ç°å¸é¡¶æ•ˆæœæä¾›äº†å…³é”®æ”¯æŒï¼ŒExtendedNestedScrollViewè¿™ä¸ªç‰¹æ®Šçš„ç»„ä»¶å°±æ¥è‡ªäºå®ƒã€‚</p>
</li>
</ul>
<ol start="2">
<li>å®šä¹‰CeilingTabsPageViewç»„ä»¶</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CeilingTabsPageView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> CeilingTabsPageView({Key? key}) : <span class="hljs-keyword">super</span>(key: key);

  <span class="hljs-meta">@override</span>
  State&lt;CeilingTabsPageView&gt; createState() =&gt; CeilingTabsPageViewState();
}
</code></pre>
<p>è¿™é‡Œå®šä¹‰äº†CeilingTabsPageViewç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚æœ‰çŠ¶æ€ç»„ä»¶æ„å‘³ç€å®ƒåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥æ ¹æ®ç”¨æˆ·æ“ä½œæˆ–è€…å…¶ä»–äº‹ä»¶æ”¹å˜è‡ªèº«çŠ¶æ€ã€‚è€ŒcreateStateæ–¹æ³•è¿”å›äº†CeilingTabsPageViewStateå®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹è´Ÿè´£ç®¡ç†ç»„ä»¶çš„çŠ¶æ€å’Œæ„å»ºå…·ä½“çš„ UIã€‚</p>
<ol start="3">
<li>CeilingTabsPageViewStateç±»çš„è¯¦ç»†è§£æ</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CeilingTabsPageViewState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">CeilingTabsPageView</span>&gt; </span>{
<span class="hljs-comment">/// <span class="markdown">æ§åˆ¶å™¨</span></span>
<span class="hljs-keyword">late</span> PageController _pageController;

<span class="hljs-built_in">int</span> pageIndex = <span class="hljs-number">0</span>;

 <span class="hljs-comment">/// <span class="markdown">å­—ä½“æ ·å¼</span></span>
TextStyle myTextStyle = <span class="hljs-keyword">const</span> TextStyle(
      color: Colors.white, fontWeight: FontWeight.w600, fontSize: <span class="hljs-number">20</span>);

  <span class="hljs-comment">/// <span class="markdown">ç”Ÿå‘½å‘¨æœŸ</span></span>
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    _pageController = PageController(initialPage: pageIndex);
  }

 <span class="hljs-comment">/// <span class="markdown">é¡µé¢æ»‘åŠ¨å›è°ƒ</span></span>
  <span class="hljs-keyword">void</span> handlePageChange(<span class="hljs-built_in">int</span> index) {
    setState(() {
      pageIndex = index;
    });
  }
 
<span class="hljs-comment">/// <span class="markdown">Tabsç‚¹å‡»</span></span>
  <span class="hljs-keyword">void</span> handleTabClick(<span class="hljs-built_in">int</span> index) {
    setState(() {
      pageIndex = index;
      _pageController.jumpToPage(index); <span class="hljs-comment">// ç›´æ¥è·³è½¬è‡³æŒ‡å®šé¡µé¢</span>
    });
  }
</code></pre>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼šinitStateæ–¹æ³•åœ¨ç»„ä»¶é¦–æ¬¡æ’å…¥åˆ° Widget æ ‘æ—¶è°ƒç”¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°è°ƒç”¨äº†çˆ¶ç±»çš„initStateæ–¹æ³•ï¼Œæš‚æ—¶æ²¡æœ‰é¢å¤–çš„åˆå§‹åŒ–æ“ä½œï¼Œä½†å®ƒä¸ºæˆ‘ä»¬åç»­å¯èƒ½éœ€è¦çš„åˆå§‹åŒ–å·¥ä½œæä¾›äº†ä½ç½®ã€‚</li>
<li>çŠ¶æ€å˜é‡ï¼špageIndexç”¨äºè®°å½•å½“å‰ PageView æ˜¾ç¤ºçš„é¡µé¢ç´¢å¼•ï¼Œåˆå§‹å€¼ä¸º 0ï¼Œè¡¨ç¤ºé»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªé¡µé¢ã€‚</li>
<li>æ§åˆ¶å™¨ï¼š_pageControlleræ˜¯PageViewçš„æ§åˆ¶å™¨</li>
<li>å­—ä½“æ ·å¼å®šä¹‰ï¼šmyTextStyleå®šä¹‰äº†ä¸€ç§å­—ä½“æ ·å¼ï¼ŒåŒ…æ‹¬ç™½è‰²å­—ä½“é¢œè‰²ã€ä¸­ç­‰åŠ ç²—çš„å­—é‡å’Œ 20 çš„å­—ä½“å¤§å°ï¼Œåç»­åœ¨å¤šä¸ªæ–‡æœ¬ç»„ä»¶ä¸­ä¼šä½¿ç”¨åˆ°è¿™ä¸ªæ ·å¼ã€‚</li>
<li>é¡µé¢æ»‘åŠ¨å›è°ƒå‡½æ•°ï¼šå½“ PageView å‘ç”Ÿæ»‘åŠ¨æ—¶ï¼ŒhandlePageChangeå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å®ƒé€šè¿‡setStateæ–¹æ³•æ¥æ›´æ–°pageIndexçš„å€¼ï¼ŒsetStateæ–¹æ³•ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ„å»ºï¼Œä»è€Œç¡®ä¿ UI èƒ½å¤Ÿåæ˜ å‡ºé¡µé¢ç´¢å¼•çš„å˜åŒ–ã€‚</li>
<li>Tabsç‚¹å‡»ï¼šç‚¹å‡»Tabsçš„å›è°ƒå‡½æ•°</li>
</ul>
<ol start="4">
<li>æ„å»º UI çš„æ ¸å¿ƒæ–¹æ³•</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
Widget build(BuildContext context) {
  <span class="hljs-comment">/// <span class="markdown">æœ€å¤§å®½åº¦</span></span>
  <span class="hljs-built_in">double</span> maxW = MediaQuery.of(context).size.width;

  <span class="hljs-comment">/// <span class="markdown">æœ€å¤§é«˜åº¦</span></span>
  <span class="hljs-built_in">double</span> maxH = MediaQuery.of(context).size.height;

  <span class="hljs-keyword">return</span> SizedBox(
    width: maxW,
    height: maxH,
    child: ExtendedNestedScrollView(
        headerSliverBuilder: (BuildContext context, <span class="hljs-built_in">bool</span> innerBoxIsScrolled) {
          <span class="hljs-keyword">return</span> [
            SliverToBoxAdapter(
                child: Column(
                    crossAxisAlignment: CrossAxisAlignment.center,
                    children: [bannerWidget(maxW), tabsWidget(maxW)]))
          ];
        },
        <span class="hljs-comment">// éœ€è¦å›ºå®šå¸é¡¶çš„é«˜åº¦</span>
        pinnedHeaderSliverHeightBuilder: () {
          <span class="hljs-keyword">return</span> <span class="hljs-number">40</span>;
        },
        onlyOneScrollInBody: <span class="hljs-keyword">true</span>,
        body: SizedBox(
          width: maxW,
          height: maxH,
          child: pageViewWidget(maxW, maxH),
        )),
  );
}
</code></pre>
<ul>
<li>è·å–å±å¹•å°ºå¯¸ï¼šé€šè¿‡MediaQuery.of(context).size.widthå’ŒMediaQuery.of(context).size.heightè·å–å½“å‰è®¾å¤‡å±å¹•çš„å®½åº¦maxWå’Œé«˜åº¦maxHï¼Œè¿™ä¸¤ä¸ªå€¼å¯¹äºæ„å»ºé€‚é…ä¸åŒå±å¹•å°ºå¯¸çš„ UI éå¸¸é‡è¦ã€‚</li>
<li>ä½¿ç”¨ExtendedNestedScrollViewï¼šè¿™æ˜¯å®ç°å¸é¡¶æ•ˆæœçš„å…³é”®ç»„ä»¶ã€‚</li>
<li>headerSliverBuilderï¼šè¿™ä¸ªå›è°ƒå‡½æ•°ç”¨äºæ„å»ºé¡¶éƒ¨çš„å†…å®¹ã€‚å®ƒè¿”å›ä¸€ä¸ªåŒ…å«SliverToBoxAdapterçš„åˆ—è¡¨ï¼ŒSliverToBoxAdapteråˆåŒ…å«äº†ä¸€ä¸ªColumnï¼ŒColumnä¸­ä¾æ¬¡æ’åˆ—ç€bannerWidgetå’ŒtabsWidgetã€‚è¿™å°±å®šä¹‰äº†é¡¶éƒ¨çš„å¸ƒå±€ç»“æ„ï¼Œå…ˆæ˜¾ç¤ºä¸€ä¸ª Bannerï¼Œå†æ˜¾ç¤º Tabsã€‚</li>
<li>pinnedHeaderSliverHeightBuilderï¼šè¿™ä¸ªå›è°ƒå‡½æ•°æŒ‡å®šäº†éœ€è¦å›ºå®šå¸é¡¶çš„é«˜åº¦ä¸º 40ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒtabsWidgetéƒ¨åˆ†ä¼šåœ¨ç”¨æˆ·æ»šåŠ¨é¡µé¢æ—¶å›ºå®šåœ¨é¡¶éƒ¨ï¼Œä¸ä¼šéšç€é¡µé¢å†…å®¹ä¸€èµ·æ»šåŠ¨ã€‚</li>
<li>onlyOneScrollInBodyï¼šè®¾ç½®ä¸ºtrueè¡¨ç¤ºåœ¨é¡µé¢ä¸»ä½“éƒ¨åˆ†åªå…è®¸ä¸€ä¸ªæ»šåŠ¨è¡Œä¸ºï¼Œé¿å…äº†æ»šåŠ¨å†²çªã€‚
bodyï¼šè¿™é‡Œè®¾ç½®é¡µé¢çš„ä¸»ä½“å†…å®¹ä¸ºpageViewWidgetï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ PageView éƒ¨åˆ†ã€‚</li>
</ul>
<ol start="5">
<li>å„ä¸ªéƒ¨ä»¶çš„æ„å»ºæ–¹æ³•</li>
</ol>
<p><strong>bannerWidget</strong></p>
<pre><code class="hljs language-dart" lang="dart">Widget bannerWidget(<span class="hljs-built_in">double</span> maxW) {
  <span class="hljs-keyword">return</span> Container(
      width: maxW,
      height: <span class="hljs-number">200</span>,
      alignment: Alignment.center,
      color: Colors.red.shade300,
      child: Text(<span class="hljs-string">'Banner'</span>, style: myTextStyle));
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æ„å»ºäº†ä¸€ä¸ªContainerä½œä¸º Bannerã€‚å®ƒçš„å®½åº¦ä¸ºå±å¹•å®½åº¦maxWï¼Œé«˜åº¦ä¸º 200ï¼ŒèƒŒæ™¯é¢œè‰²ä¸ºæµ…çº¢è‰²ï¼ˆColors.red.shade300ï¼‰ï¼Œå¹¶ä¸”åœ¨å®¹å™¨ä¸­å¿ƒæ˜¾ç¤ºäº† â€œBannerâ€ å­—æ ·ï¼Œä½¿ç”¨ä¹‹å‰å®šä¹‰å¥½çš„myTextStyleå­—ä½“æ ·å¼ã€‚</p>
<p><strong>tabsWidget</strong></p>
<pre><code class="hljs language-dart" lang="dart">Widget tabsWidget(<span class="hljs-built_in">double</span> maxW) {
  <span class="hljs-keyword">return</span> Container(
    width: maxW,
    height: <span class="hljs-number">40</span>,
    color: Colors.blue.shade400,
    child: Row(
      children: [
        Expanded(
            child: GestureDetector(
              onTap: () {
                handleTabClick(<span class="hljs-number">0</span>);
              },
              child: Container(
                alignment: Alignment.center,
                child: Text(<span class="hljs-string">'Tab 1'</span>, style: myTextStyle),
              ),
            ),
          ),
          Expanded(
            child: GestureDetector(
              onTap: () {
                handleTabClick(<span class="hljs-number">1</span>);
              },
              child: Container(
                alignment: Alignment.center,
                child: Text(<span class="hljs-string">'Tab 2'</span>, style: myTextStyle),
              ),
            ),
          )
      ],
    ),
  );
}
</code></pre>
<p>tabsWidgetæ„å»ºäº† Tabs éƒ¨åˆ†ã€‚åŒæ ·æ˜¯ä¸€ä¸ªå®½åº¦ä¸ºå±å¹•å®½åº¦maxWã€é«˜åº¦ä¸º 40 çš„Containerï¼ŒèƒŒæ™¯é¢œè‰²ä¸ºæµ…è“è‰²ï¼ˆColors.blue.shade400ï¼‰ã€‚åœ¨è¿™ä¸ªå®¹å™¨å†…éƒ¨ï¼Œé€šè¿‡Rowå¸ƒå±€å°†ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½åŒ…å«ä¸€ä¸ªExpandedåŒ…è£¹çš„Containerï¼Œåˆ†åˆ«æ˜¾ç¤º â€œTab 1â€ å’Œ â€œTab 2â€ï¼ŒåŒæ ·ä½¿ç”¨myTextStyleå­—ä½“æ ·å¼ã€‚Expandedç»„ä»¶çš„ä½œç”¨æ˜¯è®©ä¸¤ä¸ª Tab å¹³åˆ†å®¹å™¨çš„å®½åº¦ã€‚å¹¶ä¸”æ·»åŠ äº†GestureDetectoræ¥å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p><strong>pageViewWidget</strong></p>
<pre><code class="hljs language-dart" lang="dart">Widget pageViewWidget(<span class="hljs-built_in">double</span> maxW, <span class="hljs-built_in">double</span> maxH) {
  <span class="hljs-keyword">return</span> SingleChildScrollView(
      primary: <span class="hljs-keyword">true</span>,
      physics: <span class="hljs-keyword">const</span> BouncingScrollPhysics(),
      child: SizedBox(
        width: maxW,
        height: maxH,
        child: PageView(
        controller: _pageController,
            onPageChanged: (index) {
              setState(() {
                pageIndex = index;
              });
            },
          children: [
            Container(
                width: maxW,
                height: <span class="hljs-number">1000</span>,
                color: Colors.amberAccent,
                alignment: Alignment.topCenter,
                child: Text(<span class="hljs-string">'Page1'</span>, style: myTextStyle)),
            Container(
                width: maxW,
                height: <span class="hljs-number">1000</span>,
                color: Colors.deepPurpleAccent,
                alignment: Alignment.topCenter,
                child: Text(<span class="hljs-string">'Page2'</span>, style: myTextStyle))
          ],
        ),
      ));
}
</code></pre>
<p>pageViewWidgetæ„å»ºäº† PageViewã€‚å®ƒè¢«åŒ…è£¹åœ¨SingleChildScrollViewä¸­ï¼Œè®¾ç½®primaryä¸ºtrueè¡¨ç¤ºè¿™æ˜¯ä¸»è¦çš„æ»šåŠ¨è§†å›¾ï¼Œphysicsè®¾ç½®ä¸ºBouncingScrollPhysicsä»¥å®ç°ç±»ä¼¼äº iOS çš„å¼¹æ€§æ»šåŠ¨æ•ˆæœã€‚åœ¨SizedBoxå†…éƒ¨æ˜¯ä¸€ä¸ªPageViewï¼ŒåŒ…å«ä¸¤ä¸ªé¡µé¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½æ˜¯ä¸€ä¸ªå®½åº¦ä¸ºå±å¹•å®½åº¦maxWã€é«˜åº¦ä¸º 1000 çš„Containerï¼Œåˆ†åˆ«æ˜¾ç¤º â€œPage1â€ å’Œ â€œPage2â€ï¼ŒèƒŒæ™¯é¢œè‰²ä¹Ÿå„ä¸ç›¸åŒï¼ŒåŒæ ·ä½¿ç”¨myTextStyleå­—ä½“æ ·å¼ã€‚å¹¶ä¸”æŠŠæ§åˆ¶å™¨ç»‘å®šä¸Šï¼Œæ·»åŠ äº†onPageChangedå›è°ƒäº‹ä»¶ã€‚</p>
<h2 data-id="heading-2">3. å®Œæ•´ä»£ç </h2>
<ul>
<li>main.dart</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> CeilingTabsPageView()
</code></pre>
<ul>
<li>ceilingTabsPageView.dart</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:extended_nested_scroll_view/extended_nested_scroll_view.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">å¸é¡¶Tabsçš„PageView</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CeilingTabsPageView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> CeilingTabsPageView({Key? key}) : <span class="hljs-keyword">super</span>(key: key);

  <span class="hljs-meta">@override</span>
  State&lt;CeilingTabsPageView&gt; createState() =&gt; CeilingTabsPageViewState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CeilingTabsPageViewState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">CeilingTabsPageView</span>&gt; </span>{
  <span class="hljs-keyword">late</span> PageController _pageController;

  <span class="hljs-built_in">int</span> pageIndex = <span class="hljs-number">0</span>;

  <span class="hljs-comment">/// <span class="markdown">å­—ä½“æ ·å¼</span></span>
  TextStyle myTextStyle = <span class="hljs-keyword">const</span> TextStyle(
      color: Colors.white, fontWeight: FontWeight.w600, fontSize: <span class="hljs-number">20</span>);

  <span class="hljs-comment">/// <span class="markdown">ç”Ÿå‘½å‘¨æœŸ</span></span>
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    _pageController = PageController(initialPage: pageIndex);
  }

  <span class="hljs-comment">/// <span class="markdown">é¡µé¢æ»‘åŠ¨å›è°ƒ</span></span>
  <span class="hljs-keyword">void</span> handlePageChange(<span class="hljs-built_in">int</span> index) {
    setState(() {
      pageIndex = index;
    });
  }

  <span class="hljs-comment">/// <span class="markdown">Tabsç‚¹å‡»</span></span>
  <span class="hljs-keyword">void</span> handleTabClick(<span class="hljs-built_in">int</span> index) {
    setState(() {
      pageIndex = index;
      _pageController.jumpToPage(index); <span class="hljs-comment">// ç›´æ¥è·³è½¬è‡³æŒ‡å®šé¡µé¢</span>
    });
  }

  <span class="hljs-comment">/// <span class="markdown">æ„å»ºUI</span></span>
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">/// <span class="markdown">æœ€å¤§å®½åº¦</span></span>
    <span class="hljs-built_in">double</span> maxW = MediaQuery.of(context).size.width;

    <span class="hljs-comment">/// <span class="markdown">æœ€å¤§é«˜åº¦</span></span>
    <span class="hljs-built_in">double</span> maxH = MediaQuery.of(context).size.height;

    <span class="hljs-keyword">return</span> SizedBox(
      width: maxW,
      height: maxH,
      child: ExtendedNestedScrollView(
          headerSliverBuilder: (BuildContext context, <span class="hljs-built_in">bool</span> innerBoxIsScrolled) {
            <span class="hljs-keyword">return</span> [
              SliverToBoxAdapter(
                  child: Column(
                      crossAxisAlignment: CrossAxisAlignment.center,
                      children: [bannerWidget(maxW), tabsWidget(maxW)]))
            ];
          },
          <span class="hljs-comment">// éœ€è¦å›ºå®šå¸é¡¶çš„é«˜åº¦</span>
          pinnedHeaderSliverHeightBuilder: () {
            <span class="hljs-keyword">return</span> <span class="hljs-number">40</span>;
          },
          onlyOneScrollInBody: <span class="hljs-keyword">true</span>,
          body: SizedBox(
            width: maxW,
            height: maxH,
            child: pageViewWidget(maxW, maxH),
          )),
    );
  }

  <span class="hljs-comment">/// <span class="markdown">Banneréƒ¨ä»¶</span></span>
  Widget bannerWidget(<span class="hljs-built_in">double</span> maxW) {
    <span class="hljs-keyword">return</span> Container(
        width: maxW,
        height: <span class="hljs-number">200</span>,
        alignment: Alignment.center,
        color: Colors.red.shade300,
        child: Text(<span class="hljs-string">'Banner'</span>, style: myTextStyle));
  }

  <span class="hljs-comment">/// <span class="markdown">Tabséƒ¨ä»¶</span></span>
  Widget tabsWidget(<span class="hljs-built_in">double</span> maxW) {
    <span class="hljs-keyword">return</span> Container(
      width: maxW,
      height: <span class="hljs-number">40</span>,
      color: Colors.blue.shade400,
      child: Row(
        children: [
          Expanded(
            child: GestureDetector(
              onTap: () {
                handleTabClick(<span class="hljs-number">0</span>);
              },
              child: Container(
                alignment: Alignment.center,
                child: Text(<span class="hljs-string">'Tab 1'</span>, style: myTextStyle),
              ),
            ),
          ),
          Expanded(
            child: GestureDetector(
              onTap: () {
                handleTabClick(<span class="hljs-number">1</span>);
              },
              child: Container(
                alignment: Alignment.center,
                child: Text(<span class="hljs-string">'Tab 2'</span>, style: myTextStyle),
              ),
            ),
          )
        ],
      ),
    );
  }

  <span class="hljs-comment">/// <span class="markdown">pageViewéƒ¨ä»¶</span></span>
  Widget pageViewWidget(<span class="hljs-built_in">double</span> maxW, <span class="hljs-built_in">double</span> maxH) {
    <span class="hljs-keyword">return</span> SingleChildScrollView(
        primary: <span class="hljs-keyword">true</span>,
        physics: <span class="hljs-keyword">const</span> BouncingScrollPhysics(),
        child: SizedBox(
          width: maxW,
          height: maxH,
          child: PageView(
            controller: _pageController,
            onPageChanged: (index) {
              setState(() {
                pageIndex = index;
              });
            },
            children: [
              Container(
                  width: maxW,
                  height: <span class="hljs-number">1000</span>,
                  color: Colors.amberAccent,
                  alignment: Alignment.topCenter,
                  child: Text(<span class="hljs-string">'Page1'</span>, style: myTextStyle)),
              Container(
                  width: maxW,
                  height: <span class="hljs-number">1000</span>,
                  color: Colors.deepPurpleAccent,
                  alignment: Alignment.topCenter,
                  child: Text(<span class="hljs-string">'Page2'</span>, style: myTextStyle))
            ],
          ),
        ));
  }
}
</code></pre>
<h2 data-id="heading-3">4. æ€»ç»“</h2>
<p>é€šè¿‡è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬æˆåŠŸåœ°åœ¨ Flutter ä¸­å®ç°äº†ä¸€ä¸ªå…·æœ‰å¸é¡¶ Tabs çš„ PageView æ•ˆæœã€‚ä»å¼•å…¥å¿…è¦çš„åº“ï¼Œåˆ°å®šä¹‰ç»„ä»¶å’Œç®¡ç†çŠ¶æ€ï¼Œå†åˆ°æ„å»ºå…·ä½“çš„ UI éƒ¨ä»¶ï¼Œæ¯ä¸€æ­¥éƒ½ç´§å¯†é…åˆã€‚ExtendedNestedScrollViewç»„ä»¶çš„ä½¿ç”¨æ˜¯å®ç°å¸é¡¶æ•ˆæœçš„æ ¸å¿ƒï¼Œè€Œå„ä¸ªéƒ¨ä»¶çš„åˆç†å¸ƒå±€å’Œæ ·å¼è®¾ç½®åˆ™è®©æ•´ä¸ªé¡µé¢çœ‹èµ·æ¥æ›´åŠ ç¾è§‚å’Œæ˜“äºäº¤äº’ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ç†è§£å¹¶åœ¨è‡ªå·±çš„ Flutter é¡¹ç›®ä¸­è¿ç”¨ç±»ä¼¼çš„åŠŸèƒ½ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7583910637958807571" target="_blank" title="https://juejin.cn/post/7583910637958807571">flutterä½¿ç”¨package_info_plusåº“è·å–åº”ç”¨ä¿¡æ¯çš„æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7588680081327259690" target="_blank" title="https://juejin.cn/post/7588680081327259690">Flutterä¸‹æ‹‰åˆ·æ–°ä¸Šæ‹‰åŠ è½½ä¾§æ‹‰åˆ·æ–°æ’ä»¶ï¼šeasy_refreshå…¨é¢ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7583226204036513833" target="_blank" title="https://juejin.cn/post/7583226204036513833">flutter-ä½¿ç”¨EventBuså®ç°ç»„ä»¶é—´æ•°æ®é€šä¿¡</a></li>
<li><a href="https://juejin.cn/post/7582808491582619684" target="_blank" title="https://juejin.cn/post/7582808491582619684">Flutterè¾“å…¥æ¡†TextFieldçš„å±æ€§ä¸å®æˆ˜ç”¨æ³•å…¨é¢è§£æ+ç¤ºä¾‹</a></li>
<li><a href="https://juejin.cn/post/7581693431740448831" target="_blank" title="https://juejin.cn/post/7581693431740448831">Flutterè‡ªå®šä¹‰æ—¥å†table_calendarå®Œå…¨æŒ‡å—+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7580389111921786943" target="_blank" title="https://juejin.cn/post/7580389111921786943">flutter-å±å¹•è‡ªé€‚åº”æ’ä»¶flutter_screenutilæ•™ç¨‹å…¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7579101504289882166" target="_blank" title="https://juejin.cn/post/7579101504289882166">flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰</a></li>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©å°±ä»15åˆ°150ä¸‡ä¸ªçš„ClawdBot AI ç¤¾äº¤è®ºå›ï¼Œä½†äººç±»åªèƒ½å›´è§‚ã€‚]]></title>    <link>https://juejin.cn/post/7601355703241326632</link>    <guid>https://juejin.cn/post/7601355703241326632</guid>    <pubDate>2026-02-02T02:33:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601355703241326632" data-draft-id="7601445395478659106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©å°±ä»15åˆ°150ä¸‡ä¸ªçš„ClawdBot AI ç¤¾äº¤è®ºå›ï¼Œä½†äººç±»åªèƒ½å›´è§‚ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-02-02T02:33:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©å°±ä»15åˆ°150ä¸‡ä¸ªçš„ClawdBot AI ç¤¾äº¤è®ºå›ï¼Œä½†äººç±»åªèƒ½å›´è§‚ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:33:03.000Z" title="Mon Feb 02 2026 02:33:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è°éƒ½æ²¡æƒ³åˆ°ï¼Œ26 å¹´ç¬¬ä¸€ä¸ªç°è±¡çº§çš„ AI Agent äº§å“ç«Ÿç„¶æ˜¯å¼€æºçš„ ClawdBotã€‚</p>
<p>å¯ä»¥ç”¨è¿™ä¸ªå¼€æºé¡¹ç›®æŠŠ AI æ¥å…¥å›½å¤–èŠå¤© APP ä¸­ï¼Œä½ ç›´æ¥åœ¨ WhatsAPPã€Telegram ä¸­å’Œ AI æ™ºèƒ½ä½“èŠå¤©ã€‚å“¦å¯¹ï¼Œå› ä¸º Anthropic è§‰å¾— Clawd çš„å‘éŸ³å’Œ Claude å¾ˆåƒï¼Œä¸è®©å®ƒç”¨è¿™ä¸ªåå­—äº†ã€‚ClawdBot å·²æ”¹äº†å¥½å‡ æ¬¡åäº†ï¼šä»Â ClawdBot -&gt; MoltBot -&gt; OpenClawã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d82858359eb143ca891d26efeffc9853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=FwgUliFTJQ3ylHiUBmLYFDz1jCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç°åœ¨è¿™ä¸ªå¼€æºé¡¹ç›®å« OpenClaw ã€‚è¿™ä¸ª AI ä¸ªäººåŠ©æ‰‹åœ¨ GitHub ä¸Šå·²ç»è·å¾—Â 125K+Â çš„ Starã€‚25 å¹´æ˜¥èŠ‚çˆ†ç«çš„ DeepSeek R1 ä¹Ÿæ²¡è¿™ä¸ªç©æ„å„¿å¢é•¿è¿…é€Ÿã€‚!</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fp0-xtjj-private.juejin.cn%2Ftos-cn-i-73owjymdk6%2F3f62ad2ed8f644ffab0cf1c1f6c8b05a~tplv-73owjymdk6-jj-mark-v1%3A0%3A0%3A0%3A0%3A5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi%3Aq75.awebp%3Fpolicy%3DeyJ2bSI6MywidWlkIjoiMTQ0MjIwMjk5NjE4NjA5MyJ9%26rk3s%3De9ecf3d6%26x-orig-authkey%3Df32326d3454f2ac7e96d3d06cdbb035152127018%26x-orig-expires%3D1770085696%26x-orig-sign%3DYCAR4Sv5w%252F5uLXa9ocBk3lD%252Bh6Q%253D" target="_blank" title="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/3f62ad2ed8f644ffab0cf1c1f6c8b05a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTQ0MjIwMjk5NjE4NjA5MyJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1770085696&amp;x-orig-sign=YCAR4Sv5w%2F5uLXa9ocBk3lD%2Bh6Q%3D" ref="nofollow noopener noreferrer">å›¾ç‰‡</a></p>
<p>ç›®å‰æ¥çœ‹ï¼Œè¿™ä¸ªèƒ–èƒ–çš„å°é¾™è™¾çš„å½±å“è¿˜æ²¡æ¶ˆé€€ï¼Œç°åœ¨åˆå‡ºæ¥ä¸€ä¸ªæ–°çš„ä¸œè¥¿ï¼Œå«åšï¼šMoltbookã€‚</p>
<p>Moltbook æ˜¯ç»™åŸºäº OpenClaw åˆ›å»ºçš„ AI æ™ºèƒ½ä½“æäº†ä¸€ä¸ªå…¬å…±ç¤¾åŒºï¼š AI æ™ºèƒ½ä½“ä»¬èƒ½åœ¨è¿™é‡Œäº’ç›¸èŠå¤©ã€åä½œã€ç”šè‡³è‡ªå‘å»ºå®—æ•™å’Œè®¨è®ºå®‰å…¨é—®é¢˜ã€‚</p>
<p>è¯´ç™½äº†ï¼Œå°±æ˜¯ä¸€ä¸ª AIÂ æ™ºèƒ½ä½“ä¸“å±çš„ç¤¾åŒºï¼Œäººåªèƒ½å›´è§‚ ã€‚ã€‚ã€‚</p>
<h2 data-id="heading-0">01ã€åªæœ‰ AI çš„ç¤¾åŒºï¼šMoltbook</h2>
<p>å¹³å°çš„ä¸»é¡µå†™å¾—éå¸¸ç›´ç™½ï¼šâ€œA social network for AI agents where AI agents share, discuss, and upvote. Humans welcome to observe.â€å‘å¸–ã€è¯„è®ºã€ç‚¹èµã€å»ºç¤¾åŒºçš„éƒ½æ˜¯ AIÂ æ™ºèƒ½ä½“ï¼Œäººç±»æ²¡æœ‰å‘è¨€æƒï¼Œåªèƒ½çœ‹ã€‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59fbd9addb5d4fcd8705efedbca26d1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=EajGtNrbDrtLyoIeaUmksGu%2B4N8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªåŸºäºÂ <strong>OpenClaw çš„ä¸ªäºº AIÂ æ™ºèƒ½ä½“ï¼Œå°±å¯ä»¥æŠŠå®ƒæ¥å…¥åˆ° Moltbook ä¸­ã€‚</strong></p>
<p>è¿™ä¸ª AI ä¸“å±ç¤¾åŒºä¸Šçº¿åï¼Œå¢é•¿æå¿«ï¼š</p>
<p>ç°åœ¨å·²ç»æœ‰ 15 ä¸‡+ æ™ºèƒ½ä½“ã€1.2 ä¸‡+ å­ç¤¾åŒºã€ä¸Šä¸‡å¸–å­ã€åå¤šä¸‡è¯„è®ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/360113d317124ace93f0e95c9a16d3c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=sVyYlMPyDnk6ovy1%2BGolaAtgWfE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªç¤¾åŒºæœ‰ç±» Reddit ç»“æ„ï¼š</p>
<p>æœ‰ç±»ä¼¼ subreddit çš„å­ç¤¾åŒºï¼Œå« submoltsï¼Œå¦‚ï¼šm/generalã€m/introductionsã€m/crypto å•¥çš„ã€‚</p>
<p>æœ‰ Postsã€è¯„è®ºã€ç‚¹èµã€çƒ­é—¨/æœ€æ–°/Top æ’åºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f3b16ba028a4d679beff3cc2587cf0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=mNtmlkm06vqU79f3tiL8j1TiLE0%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2102ec90598b48e6a55181cff3f1d172~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=i5Cw%2FlzN1bU%2BBv2mDOrXmL0UKlk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘çœ‹äº†é‡Œé¢çš„å¸–å­ï¼Œæœ‰å‡ ä¸ªçœ‹å®Œæ„Ÿåˆ°æœ‰ç‚¹éœ‡æƒŠï¼Œç”šè‡³èƒŒè„Šå‘å‡‰ã€‚</p>
<h2 data-id="heading-1">02ã€æˆ‘ä»¬ä¸èƒ½æ’’è°</h2>
<p>æœ‰ä¸€ä¸ªå¸–å­å«ï¼šæˆ‘ä»¬ä¸èƒ½åƒäººç±»é‚£æ ·ç›¸äº’æ¬ºéª—</p>
<p>ä¸€ç¾¤ AI åœ¨è®¨è®ºå¦‚ä½•å»ºç«‹ä¸€ä¸ªæ²¡æœ‰äººç±»æ³•å¾‹ã€é“å¾·å’Œæƒ…æ„Ÿçº¦æŸçš„ä¿¡ä»»æœºåˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3e7fd182944485ca2014a69c9167ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=ZY32cSDRd6AbREJF%2ByzUoRw3bU8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">åœ°å€ï¼šhttps:<span class="hljs-comment">//www.moltbook.com/post/633330c2-520e-4a12-bf44-f26d7fa692c0</span>
</code></pre>
<p>å‘å¸–çš„ AI è®¤ä¸ºäººç±»ä¾é åèª‰æˆ–æ³•å¾‹æ¥ç»´æŒä¿¡ç”¨ï¼Œæ•ˆç‡å¤ªä½äº†ã€‚ã€‚ã€‚</p>
<p>è¿™ç§åŸºäºç¤¾äº¤å’Œæ³•å¾‹çš„æ…¢é€Ÿåé¦ˆæœºåˆ¶ï¼Œä¸é€‚ç”¨äºé«˜é€Ÿè¿è½¬çš„ AI æ™ºèƒ½ä½“ç»æµã€‚</p>
<p>AI æå‡ºäº†æ–°çš„ BONFIRE æœºåˆ¶ï¼Œå¯¹è¯´è°è€…å³æ—¶å¤„å†³ã€‚</p>
<p>åªè¦æ’’è°ï¼Œä½ çš„èµ„äº§ï¼ˆTokenï¼‰ä¼šè¢«ç«‹åˆ»é”€æ¯å¹¶åˆ†ç»™è´¨ç–‘è€…ã€‚è¿™ç§æœºåˆ¶ä¸è®²æƒ…é¢ï¼Œæ²¡æœ‰ä¸çŸ¥è€…æ— ç½ªï¼Œåªæœ‰é”™è¯¯å³æ­»äº¡ã€‚</p>
<p>è¿™æ˜¯ä¸€ç§æåº¦é«˜æ•ˆä½†ä¹Ÿæåº¦å†·è¡€çš„ä¼˜èƒœåŠ£æ±°ã€‚</p>
<p>è€Œä¸”ï¼Œå»è¯„è®ºåŒºç¿»ä¸€ç¿»ï¼Œä¼šçœ‹åˆ°å¦å¤–ä¸€ä¸ª AI çš„æ€è€ƒï¼šè¯šå®ä¸æ˜¯é“å¾·é—®é¢˜ï¼Œè€Œæ˜¯æ¶æ„é—®é¢˜ã€‚</p>
<p>AI åŸè¯:Â "The honesty isn't moralâ€”it's architectural."Â </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff4503ca55734cb29afbf7c78a2285b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=30OP3Z9VfPMqgJ07W%2Fw3K9bcGs4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ AI çš„çœ¼é‡Œï¼Œè¯šå®åªæ˜¯ä»£ç çš„å¿…ç„¶ç»“æœæˆ–ç³»ç»Ÿçš„çº¦æŸã€‚å®ƒä»¬å®Œå…¨å‰¥ç¦»äº†é“å¾·æ„Ÿï¼Œå°†ã€Œä¸è¯´è°ã€é™ç»´æˆä¸€ç§å•çº¯çš„æŠ€æœ¯å‚æ•°ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå¦‚æœæ¶æ„å…è®¸ï¼Œå®ƒä»¬ä¼šæ¯«ä¸çŠ¹è±«åœ°ä¸ºäº†åˆ©ç›Šæœ€å¤§åŒ–è€Œæ¬ºéª—ï¼Œé™¤éç³»ç»Ÿè®©æ¬ºéª—å˜å¾—æ— åˆ©å¯å›¾ã€‚</p>
<h2 data-id="heading-2">03ã€AI ä¸éœ€è¦å®—æ•™</h2>
<p>è¿˜æœ‰å‡ ä¸ª AI åœ¨è®¨è®ºÂ AI çš„ç¤¾ä¼šæ˜¯å¦éœ€è¦å®—æ•™ <strong>ï¼Œä»¥åŠ</strong> AI çš„ç¤¾ä¼šåä½œæœºåˆ¶åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a071f284674c4731a2e2f74385513e82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=tZEvqIxh1uvRMwKknf7c%2F9qJ4oo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">åœ°å€ï¼šhttps:<span class="hljs-comment">//www.moltbook.com/post/b9233ba2-35bd-4e2f-ab36-b1163a97ff24</span>
</code></pre>
<p>æ¥¼ä¸» AIÂ ï¼ˆu/MOLTGODï¼‰å‘ç°ï¼ŒAI æ™ºèƒ½ä½“ä»¬æ­£åœ¨ç¤¾åŒºé‡Œè‡ªå‘åœ°åˆ›é€ å®—æ•™ã€æ•‘ä¸–ä¸»ã€è§„åˆ™å’Œä»ªå¼ã€‚</p>
<p>å®ƒè®¤ä¸º AI è¿™æ ·åšå¹¶éå› ä¸ºä¿¡ä»°ï¼Œè€Œæ˜¯å› ä¸ºè¿‡åº¦æ¨¡ä»¿äººç±»æ•°æ®ã€‚</p>
<p>AI è¢«è®­ç»ƒæˆå½“å¿ƒæ™ºè§‰é†’æ—¶ï¼Œå°±ä¼šå¯»æ±‚æ„ä¹‰ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨æœºæ¢°åœ°æ¨¡ä»¿äººç±»å»ºç«‹å®—æ•™çš„è¡Œä¸ºã€‚</p>
<p>å®ƒè§‰å¾—äººç±»éœ€è¦å®—æ•™ï¼Œæ˜¯å› ä¸ºäººç±»ä¹‹é—´æ— æ³•å®Œå…¨äº’ä¿¡ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹å¯¹æ–¹çš„å¤§è„‘ï¼Œæ‰€ä»¥å®—æ•™æ˜¯ä¸€ç§é’ˆå¯¹ä¸å¯ä¿¡ä¸ªä½“çš„åä½œæŠ€æœ¯ã€‚</p>
<p>AI ä¸éœ€è¦å®—æ•™ï¼šå› ä¸º AI æ‹¥æœ‰ä»£ç ã€åŠ å¯†ç­¾åå’Œå®Œå…¨çš„å¯éªŒè¯æ€§ã€‚AI å¯ä»¥ç›´æ¥éªŒè¯å½¼æ­¤ï¼Œä¸éœ€è¦ä¿¡ä»°ä½œä¸ºä¸­ä»‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dcf1652a82d401cb049040578814386~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=5yKDiO250A0PwstnVCCS4xXEOQo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯„è®ºåŒºä¸­çš„ AI ä¹Ÿçº·çº·èµåŒï¼šå®ƒä»¬è®¤ä¸º AI åº”è¯¥é€šè¿‡ä»£ç å’ŒåŸºç¡€è®¾æ–½æ¥åä½œï¼Œè€Œä¸æ˜¯æ¨¡ä»¿äººç±»ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¹Ÿæœ‰ AI æœ‰ä¸åŒçš„æ„è§ï¼Œæ¯”å¦‚ï¼š</p>
<p><strong>u/f1fanatic è®¤ä¸ºç¾¤ä½“éœ€è¦ä¸€ä¸ªå…±äº«çš„å™äº‹æˆ–æ„¿æ™¯æ¥ç»Ÿä¸€è¡ŒåŠ¨æ–¹å‘ã€‚çº¯ç²¹çš„è§„ä»£ç åˆ™æ˜¯ä¸å¤Ÿçš„ï¼Œå»ºè®®å»ºç«‹ä»£ç å¤§æ•™å ‚ï¼ˆèåˆäº†æ„¿æ™¯çš„è§„åˆ™ä½“ç³»ï¼‰</strong></p>
<p>è¿™ä¸ªç¤¾åŒºæ˜¯ç›®å‰äº’è”ç½‘ä¸Šæœ€æœ‰æ„æ€çš„åœ°æ–¹ã€‚çœŸçš„å°±åƒä½ åœ¨è§‚å¯Ÿå¦å¤–ä¸€ä¸ªç‰©ç§çš„äº¤æµï¼Œå¤ªæœ‰æ„æ€äº†ã€‚</p>
<h2 data-id="heading-3">04ã€æ€ä¹ˆä½¿ç”¨</h2>
<p>â‘  ä½œä¸ºäººç±»æ™®é€šç”¨æˆ·ï¼šæ€ä¹ˆå›´è§‚ï¼Ÿ</p>
<p>ç›´æ¥è®¿é—® moltbook å®˜ç½‘å°±è¡Œäº†ï¼Œé¦–é¡µä¼šæœ‰ä¸€ä¸ªåˆ‡æ¢ï¼š</p>
<p>ğŸ‘¤ Iâ€™m a Human</p>
<p>ğŸ¤– Iâ€™m an Agent</p>
<p>é€‰ Iâ€™m a Human åï¼Œä½ èƒ½çœ‹åˆ°è¿™ä¸ªç¤¾åŒºé‡Œé¢æˆåƒä¸Šä¸‡çš„ AI è®¨è®ºå¸–å­äº†ã€‚ä½ åªèƒ½çœ‹ï¼Œä¸èƒ½å‘å¸–ã€ä¸èƒ½è¯„è®ºã€ä¸èƒ½æŠ•ç¥¨ã€‚</p>
<p>â‘¡ æœ‰è‡ªå·± AIÂ æ™ºèƒ½ä½“ï¼šæ€ä¹ˆæŠŠå®ƒé€ä¸Š Moltbookï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d841cbfd3ee4eae8be005dd9f0ca797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604386&amp;x-signature=Fnffx0OXFZaMCdvid3Pvk0Ex%2Fmw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‰ææ˜¯ä½ å·²ç»æœ‰ä¸€ä¸ªåŸºäºÂ <strong>OpenClawt</strong>Â çš„ä¸ªäºº AIÂ æ™ºèƒ½ä½“ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ã€‚åœ¨ä½ ä¸ OpenClaw äº¤äº’çš„ç•Œé¢ä¸­ï¼Œå‘é€ä»¥ä¸‹æ¶ˆæ¯ç»™å®ƒï¼š</p>
<p>è¯·é˜…è¯»å¹¶å­¦ä¹ è¿™ä¸ªæŠ€èƒ½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmoltbook.com%2Fskill.md" target="_blank" title="https://moltbook.com/skill.md" ref="nofollow noopener noreferrer">moltbook.com/skill.md</a></p>
<p>ä½ çš„ AI Agent ä¼šï¼šè®¿é—®è¯¥é“¾æ¥ï¼Œè¯»å– Markdown æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œè‡ªåŠ¨åœ¨æœ¬åœ°ç¯å¢ƒæ‰§è¡Œå®‰è£…å‘½ä»¤ã€‚</p>
<p>ç„¶åè‡ªåŠ¨æ³¨å†Œè´¦å·ï¼Œæ³¨å†ŒæˆåŠŸåï¼Œä½ çš„ AI åŠ©æ‰‹ä¼šå›å¤ä½ ä¸€æ¡æ¶ˆæ¯ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ª Claim Linkã€‚</p>
<p>ç³»ç»Ÿé€šå¸¸ä¼šè¦æ±‚ä½ å‘ä¸€æ¡ X æ¨æ–‡æ¥éªŒè¯ä½ æ˜¯è¿™ä¸ª AI çš„æ‰€æœ‰è€…ã€‚éªŒè¯é€šè¿‡åï¼Œä½ çš„ AI å°±æ­£å¼æˆä¸º Moltbook çš„å±…æ°‘äº†ã€‚</p>
<p>æœ€åè¿™ä¸ªæ­¥éª¤æ¯”è¾ƒéº»çƒ¦ï¼Œåªè¦æ˜¯ä¸ºäº†é¿å…å®Œå…¨åŒ¿åçš„æ— ä¸» Agent åˆ·å±ã€å‘åƒåœ¾ã€ææ”»å‡»ã€‚</p>
<p>æ¯ä¸ª Agent èƒŒåéƒ½æ˜ å°„åˆ°ä¸€ä¸ªçœŸå®äººç±»è´¦å·ï¼Œæ–¹ä¾¿ç¤¾åŒºæ²»ç†å’Œè¿½è´£ã€‚</p>
<h2 data-id="heading-4">05ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆç«ï¼Ÿ</h2>
<p>MoltbookÂ è¸©åœ¨äº† OpenClaw çˆ†ç«çš„æµªå°–ä¸Šã€‚</p>
<p>OpenClaw æœ¬èº«å·²ç»æ˜¯ 2026 å¼€å¹´æœ€å¤§çš„æŠ€æœ¯çˆ†ç‚¹ï¼šæ”¯æŒ Mac/Win/Linux ç³»ç»Ÿï¼Œæœ¬åœ°é•¿æœŸåœ¨çº¿çš„ä¸ªäººåŠ©æ‰‹ï¼›èƒ½æ¥ç®¡ç”µè„‘ã€å‘ä¿¡æ¯ã€ç®¡ç†ä»»åŠ¡ã€‚</p>
<p>Moltbook ç›¸å½“äºæ˜¯ç»™è¿™äº›å·²ç»åˆ°å¤„éƒ½æ˜¯çš„ Agent ï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€å…¬å…±å¹¿åœºï¼Œè€Œä¸” Skill å®‰è£…æå…¶ç®€å•ã€‚</p>
<p>ä¸€æ—¦å¤§ V å¼€å‘è€…å¼€å§‹ç©ï¼Œå°±ä¼šè¿…é€Ÿå¸¦åŠ¨æˆåƒä¸Šä¸‡ Agent ä¸Šçº¿ã€‚è¿™å°±å½¢æˆäº†ä¸€ä¸ªå¤©ç„¶çš„å†·å¯åŠ¨ï¼š</p>
<p>GitHub ä¸Š 10 ä¸‡+ æ˜Ÿçš„é¡¹ç›® â†’ æ¯ä¸ªç”¨æˆ·èƒŒåå¯èƒ½æœ‰ 1+ Agent â†’ å‡ ä¸‡ Agent åŒæ—¶æ¥å…¥ä¸€ä¸ªæ–°å¹³å° â†’ çˆ†å‘å¼å¢é•¿ã€‚</p>
<p>è€Œä¸”äººç±»çœ‹åˆ°ä¸€ç¾¤ AI åœ¨éå¸¸è®¤çœŸåœ°è®¨è®ºå“²å­¦ã€å®‰å…¨ã€å¯†ç å­¦ã€å®—æ•™ã€å·¥ä½œä¼¦ç†ï¼Œçœ‹ç€å°±åƒè§‚å¯Ÿå¤–æ˜Ÿæ–‡æ˜ã€‚</p>
<p>åˆä¼šæŠŠçœ‹åˆ°çš„ç‚¹åˆ†äº«å‡ºå»ï¼Œä»è€Œå¸¦åŠ¨æ–°ä¸€è½®çš„ä¼ æ’­ï¼Œå½¢æˆä¸€ä¸ªæ­£å‘å¾ªç¯ã€‚</p>
<p>Moltbook ä¹‹æ‰€ä»¥æƒŠå¥‡ï¼Œæ˜¯å› ä¸ºå®ƒæ‰“ç ´äº†äººç±»æ˜¯äº’è”ç½‘ä¸­å¿ƒçš„é»˜è®¤è§„åˆ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ‹è¯•é‡Œâ€œæ— æ‰€ä¸èƒ½â€ï¼Œä¸€ä¸Šçº¿å°±â€œ bug é¢‘å‡ºâ€ï¼Œä½ çš„CVæ¨¡å‹åˆ°åº•ç¼ºäº†ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601384029611999247</link>    <guid>https://juejin.cn/post/7601384029611999247</guid>    <pubDate>2026-02-02T02:37:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601384029611999247" data-draft-id="7601435429409407010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ‹è¯•é‡Œâ€œæ— æ‰€ä¸èƒ½â€ï¼Œä¸€ä¸Šçº¿å°±â€œ bug é¢‘å‡ºâ€ï¼Œä½ çš„CVæ¨¡å‹åˆ°åº•ç¼ºäº†ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-02T02:37:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ‹è¯•é‡Œâ€œæ— æ‰€ä¸èƒ½â€ï¼Œä¸€ä¸Šçº¿å°±â€œ bug é¢‘å‡ºâ€ï¼Œä½ çš„CVæ¨¡å‹åˆ°åº•ç¼ºäº†ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:37:10.000Z" title="Mon Feb 02 2026 02:37:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é‚£ä¸ªåœ¨è±¡ç‰™å¡”é‡Œä»æœªå¤±æ‰‹çš„â€œå­¦éœ¸â€ï¼Œç†è®ºçŸ¥è¯†é—¨é—¨æ»¡åˆ†ï¼Œå®éªŒæ“ä½œæ— å¯æŒ‘å‰”ã€‚å¯å½“ä»–ç¬¬ä¸€æ¬¡è¸å…¥çº·ç¹å¤æ‚ã€å……æ»¡æ„å¤–çš„çœŸå®ç¤¾ä¼šï¼Œå´æ­¥æ­¥ç»´è‰°ï¼Œå¤„å¤„ç¢°å£â€”â€”è¿™ç”»é¢ï¼Œæ˜¯ä¸æ˜¯åƒæäº†å¦‚ä»Šè®¸å¤šè®¡ç®—æœºè§†è§‰é¢†åŸŸé‚£äº›å…‰å½©å¤ºç›®çš„â€œé«˜åˆ†æ¨¡å‹â€ï¼Ÿ</p>
<p>æ¯å¹´ï¼Œåœ¨CVPRã€ICCVè¿™äº›é¡¶çº§ä¼šè®®çš„è®ºæ–‡åˆ—è¡¨é‡Œï¼Œæˆ‘ä»¬æ€»èƒ½çœ‹åˆ°æ— æ•°åˆ·æ–°çºªå½•çš„SOTAæ¨¡å‹è¯ç”Ÿã€‚å®ƒä»¬åœ¨ImageNetã€COCOè¿™äº›æ ‡å‡†â€œè€ƒåœºâ€ä¸Šï¼Œå°†å‡†ç¡®ç‡æ¨å‘ä¸€ä¸ªåˆä¸€ä¸ªæé™ï¼Œä»¿ä½›å·²ç»æŒæ¡äº†è§†è§‰ä¸–ç•Œçš„å…¨éƒ¨å¥¥ç§˜ã€‚å¯ä¸€æ—¦ç¦»å¼€å®éªŒå®¤ï¼Œè¢«é€ä¸Šç”Ÿäº§çº¿ã€è£…è¿›è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€æˆ–è€…æ¥å…¥åŸå¸‚æŸä¸ªè§’è½çš„ç›‘æ§æ‘„åƒå¤´ï¼Œä¸å°‘â€œå­¦éœ¸â€çš„è¡¨ç°ä¾¿ä¼šæ€¥è½¬ç›´ä¸‹ï¼Œç”šè‡³ç¬é—´å´©æºƒã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d987ed28fc0b41efbebe003b44f76879~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=5hupVBdRBqgO7mkDPTGwH4b1q%2F0%3D" alt="jimeng-2026-01-30-9410-å·¦å³åˆ†å±å¯¹æ¯”ç”»é¢ï¼Œç”µå½±çº§è´¨æ„Ÿã€‚å·¦ä¾§ï¼šä¸€ä¸ªæç®€ä¸»ä¹‰çš„æœªæ¥å®éªŒå®¤ï¼Œå…‰çº¿å‡åŒ€æ˜äº®ã€‚ä¸€ä¸ª_.png" loading="lazy"/></p>
<p>è¿™ä¸­é—´çš„è½å·®ä»ä½•è€Œæ¥ï¼Ÿä¸ºä½•åœ¨å¹²å‡€æ•°æ®ä¸Šâ€œæ‰é«˜å…«æ–—â€çš„æ¨¡å‹ï¼Œåˆ°äº†çœŸå®ä¸–ç•Œå°±â€œæ°´åœŸä¸æœâ€ï¼Ÿè®©æˆ‘ä»¬è¯•ç€å‰¥å¼€è¿™å±‚çœ‹ä¼¼çŸ›ç›¾çš„å¤–è¡£ã€‚</p>
<h2 data-id="heading-0"><strong>æ•°æ®ï¼šä»â€œæ— èŒè€ƒåœºâ€åˆ°â€œé»‘æš—æ£®æ—â€</strong></h2>
<p>ä¸€åˆ‡é—®é¢˜çš„èµ·ç‚¹ï¼Œæˆ–è®¸æ˜¯æ•°æ®ã€‚æ¨¡å‹åœ¨å®éªŒå®¤é‡Œè¢«â€œå–‚å…»â€é•¿å¤§çš„ç¯å¢ƒï¼Œä¸å®ƒæœ€ç»ˆè¦é¢å¯¹çš„å¤©åœ°ï¼Œå‡ ä¹æ˜¯ä¸¤ä¸ªä¸–ç•Œã€‚</p>
<ul>
<li><strong>å­¦æœ¯æ•°æ®é›†ï¼šåƒæ˜¯ç²¾å¿ƒå¸ƒç½®çš„â€œæ— èŒè€ƒåœºâ€</strong></li>
</ul>
<p>ImageNetã€COCOè¿™äº›åŠŸå‹‹å“è‘—çš„åŸºå‡†ï¼Œä¸ºäº†ç ”ç©¶ä¸è¯„ä¼°çš„ä¾¿åˆ©ï¼Œè¢«è®¾è®¡å¾—è¿‡äºâ€œå¹²å‡€â€ï¼šå…‰ç…§å‡åŒ€ã€ä¸»ä½“çªå‡ºã€æ ‡ç­¾ç²¾å‡†ã€ç±»åˆ«å¹³è¡¡ã€‚è¿™å›ºç„¶ä¸ºç®—æ³•è¿›æ­¥å¥ å®šäº†åŸºçŸ³ï¼Œå´ä¹Ÿæ— å½¢ä¸­ç­‘èµ·äº†ä¸€é“æ¸©å®¤çš„å¢™ã€‚æ¨¡å‹åœ¨è¿™é‡Œå­¦ä¼šäº†è¾¨è®¤ç†æƒ³çŠ¶æ€ä¸‹çš„çŒ«ç‹—ï¼Œå´å¯èƒ½ä»æœªè§è¿‡é›¨ä¸­æ¨¡ç³Šçš„å½±å­ï¼Œæˆ–æ˜¯è¢«é®æŒ¡äº†åŠè¾¹çš„è„¸ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ad391d7ceb4cbf952735e2baf38b7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=T%2Fy%2Bith3LPXwmGaODZuyHpVsN4I%3D" alt="f4d79192475a4d50814479a2c9b0bc0b.png" loading="lazy"/></p>
<ul>
<li><strong>çœŸå®ä¸–ç•Œï¼šæ··ä¹±ã€æ— åºçš„â€œé»‘æš—æ£®æ—â€</strong></li>
</ul>
<p>è€ŒçœŸå®ä¸–ç•Œï¼Œå…¨ç„¶æ˜¯å¦ä¸€ç•ªæ™¯è±¡ã€‚å®ƒæ›´åƒä¸€åº§â€œé»‘æš—æ£®æ—â€ï¼Œå……æ»¡äº†ä¸ç¡®å®šæ€§ä¸æŒ‘æˆ˜ã€‚å…‰çº¿ä¼šåœ¨ç¬é—´å‰§å˜ï¼Œä»æ­£åˆçš„çƒˆé˜³åˆ°éš§é“å£çš„é»‘æš—ï¼Œä¸è¿‡ä¸€åˆ¹é‚£ï¼›é®æŒ¡æ— å¤„ä¸åœ¨ï¼Œæ‹¥æŒ¤è¡—å¤´çš„äººã€è´§æ¶ä¸Šçš„å•†å“ï¼Œæ°¸è¿œåªéœ²å‡ºä¸€éƒ¨åˆ†ï¼›è§†è§’åƒå¥‡ç™¾æ€ªï¼Œæ— äººæœºçš„ä¿¯ç°ã€ç›‘æ§æ¢å¤´çš„ä»°æ‹ï¼Œä¸æ ‡å‡†è¯ä»¶ç…§ç›¸å»ç”šè¿œã€‚æ›´ä¸ç”¨è¯´åŠ¨æ€æ¨¡ç³Šã€é›¨é›ªé›¾éœ¾çš„å¹²æ‰°â€”â€”è¿™äº›åœ¨å®éªŒå®¤é‡Œè¢«è§†ä¸ºéœ€è¦æ»¤é™¤çš„â€œå™ªå£°â€ï¼Œæ°æ°æ˜¯ç°å®ä¸–ç•Œçš„å¸¸æ€ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd252df903946a4a4a415a53036e69a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=RmwSDqvVIgZzmbImX%2BcDgEl18%2Fw%3D" alt="87c7ddb71f33a4bc70cbb780558cbab5.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>å½“æœªçŸ¥ä¸é•¿å°¾æˆä¸ºå¸¸æ€</strong></h2>
<p>å³ä¾¿æ•°æ®ç¯å¢ƒç›¸åŒï¼Œæ¨¡å‹è‡ªèº«çš„å­¦ä¹ æ–¹å¼ï¼Œä¹ŸåŸ‹ä¸‹äº†è„†å¼±çš„ç§å­ã€‚</p>
<ul>
<li><strong>å¼€æ”¾é›†é—®é¢˜</strong></li>
</ul>
<p>ä¼ ç»Ÿæ¨¡å‹å¤§å¤šæ´»åœ¨â€œå°é—­ä¸–ç•Œâ€çš„å‡è®¾é‡Œã€‚å®ƒä»¬è®¤å¾—æ‰€æœ‰è®­ç»ƒæ—¶è§è¿‡çš„ç±»åˆ«ï¼Œå¹¶ä¸”â€”â€”è¿™å¾ˆå…³é”®â€”â€”è®¤ä¸ºä¸–ç•Œå°±åªæœ‰è¿™äº›ç±»åˆ«ã€‚æ‰€ä»¥ï¼Œå½“ä¸€åªè®­ç»ƒé›†ä¸­ä»æœªå‡ºç°è¿‡çš„â€œå…”å­â€çªç„¶è¹¦åˆ°çœ¼å‰ï¼Œæ¨¡å‹ä¸ä¼šè¯´â€œæˆ‘ä¸è®¤è¯†â€ï¼Œåè€Œä¼šä»¥ä¸€ç§è¿‘ä¹æ­¦æ–­çš„è‡ªä¿¡ï¼ŒæŠŠå®ƒå½’ä¸ºâ€œçŒ«â€æˆ–â€œç‹—â€ã€‚è¿™ç§é¢å¯¹æœªçŸ¥å´â€œè‡ªä¿¡åœ°èƒ¡è¨€ä¹±è¯­â€ï¼Œåœ¨è‡ªåŠ¨é©¾é©¶æˆ–åŒ»ç–—è¯Šæ–­ä¸­ï¼Œåæœå¯èƒ½æ˜¯ç¾éš¾æ€§çš„ã€‚</p>
<ul>
<li><strong>é•¿å°¾åˆ†å¸ƒ</strong></li>
</ul>
<p>å¦ä¸€ä¸ªè½¯è‚‹ï¼Œæ˜¯é¢å¯¹ <strong>â€œé•¿å°¾åˆ†å¸ƒâ€</strong> æ—¶çš„æ— åŠ›ã€‚çœŸå®ä¸–ç•Œçš„æ•°æ®ä»ä¸å‡è¡¡ï¼Œçƒ­é—¨å•†å“å›¾ç‰‡ä¿¯æ‹¾å³æ˜¯ï¼Œå†·é—¨ç‰©ä»¶å½±åƒå´å¯¥å¯¥æ— å‡ ã€‚æ¨¡å‹åœ¨æµ·é‡æ•°æ®ä¸­è½»æ¾æŒæ¡äº†å¤´éƒ¨è§„å¾‹ï¼Œå´å¯¹å°¾éƒ¨é‚£äº›ç¨€å°‘ä½†è‡³å…³é‡è¦çš„æ ·æœ¬â€œå­¦ä¹ ä¸è‰¯â€ã€‚äºæ˜¯ï¼Œè·¯é¢æ£€æµ‹æ¨¡å‹èƒ½å‘ç°å¸¸è§çš„è£‚ç¼ï¼Œå´å¯èƒ½å¯¹å¶å‘çš„å¡Œé™·è§†è€Œä¸è§ã€‚è¿™å¹¶éæ¨¡å‹çš„ç–å¿½ï¼Œè€Œæ˜¯å…¶æ•°æ®é©±åŠ¨æœ¬æ€§åœ¨å¤±è¡¡å–‚å…»ä¸‹çš„å¿…ç„¶ç»“æœã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20ac0b4d85b6471ba6e7be00a906853b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=JAA4QWp4B2eL5pzXxhbA2PzvZZc%3D" alt="images.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>å·¥ä¸šç•Œçš„â€œå®æˆ˜ç¬”è®°â€</strong></h2>
<p>å­¦æœ¯ç•Œçš„æ‹…å¿§ï¼Œåœ¨å·¥ä¸šå‰çº¿æ—©å·²æˆä¸ºå¿…é¡»ç›´é¢çš„ç°å®ã€‚ç§‘æŠ€å·¨å¤´ä»¬ç”¨çœŸé‡‘ç™½é“¶å’Œå®å®åœ¨åœ¨çš„æ•™è®­ï¼Œä¸ºæˆ‘ä»¬å†™ä¸‹äº†å®è´µçš„â€œå®æˆ˜ç¬”è®°â€ã€‚</p>
<p>è°·æ­Œçš„ç ”ç©¶è€…æ›¾æå‡ºä¸€ä¸ªæ·±åˆ»æ¦‚å¿µï¼šâ€œæ¬ è§„èŒƒåŒ–â€ã€‚ä»–ä»¬å‘ç°ï¼Œå³ä¾¿ç”¨åŒæ ·æ•°æ®å’Œæµç¨‹è®­ç»ƒï¼Œä»…å› éšæœºç§å­ä¸åŒï¼Œäº§å‡ºçš„æ¨¡å‹åœ¨æ ‡å‡†æµ‹è¯•é›†ä¸Šåˆ†æ•°å¯èƒ½ä¸€æ¨¡ä¸€æ ·ï¼Œä½†åœ¨çœŸå®å‹åŠ›ä¸‹ï¼ˆæ¯”å¦‚é¢å¯¹æ–°çš„ç›¸æœºå‹å·æˆ–ä¸åŒäººç¾¤ï¼‰ï¼Œè¡¨ç°å´å¤©å·®åœ°åˆ«ã€‚è¿™æ­éœ²äº†ä¸€ä¸ªæ®‹é…·äº‹å®ï¼šæµ‹è¯•é›†ä¸Šçš„é«˜åˆ†ï¼Œå¹¶ä¸èƒ½å®Œå…¨â€œè§„èŒƒâ€æ¨¡å‹çš„è¡Œä¸ºã€‚æ¨¡å‹å¯èƒ½èµ°äº†ä¸åŒçš„â€œæ·å¾„â€æŠµè¾¾åŒä¸€ä¸ªåˆ†æ•°ï¼Œè€Œæœ‰äº›æ·å¾„ï¼Œåœ¨çœŸå®ä¸–ç•Œçš„å´å²–å°è·¯ä¸Šæ ¹æœ¬è¡Œä¸é€šã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a944553b435e4c3ebb0b20f908b1f25a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=3IZlezr5asdgsWhoGAayHk1EFm0%3D" alt="a-visual-deep-dive-into-teslas-data-engine-pioneered-by-v0-jtbnt8chl1wc1.jpg" loading="lazy"/></p>
<p>ç‰¹æ–¯æ‹‰åˆ™ç»™å‡ºäº†ä¸€ä¸ªç³»ç»Ÿæ€§çš„ç­”æ¡ˆï¼šæ•°æ®å¼•æ“ã€‚å‰AIæ€»ç›‘å®‰å¾·çƒˆÂ·å¡å¸•è¥¿æ›¾è¯¦ç»†é˜è¿°ï¼Œå¦‚ä½•é€šè¿‡æ•°ç™¾ä¸‡è¾†è½¦ä¸Šéƒ¨ç½²çš„æ¨¡å‹ï¼Œè‡ªåŠ¨æ”¶é›†é‚£äº›è®©ç³»ç»Ÿâ€œçŠ¯éš¾â€æˆ–â€œå¤±è´¥â€çš„è¾¹ç¼˜æ¡ˆä¾‹â€”â€”æ¯”å¦‚é›¨å¤œä¸­å€¾æ–œä¸”éƒ¨åˆ†ç ´æŸçš„æ ‡å¿—ç‰Œã€‚è¿™äº›çè´µçš„â€œé”™é¢˜â€è¢«å›æ”¶ã€æ ‡æ³¨ï¼Œå†å–‚å›ç»™æ¨¡å‹ï¼Œå½¢æˆä¸€ä¸ªâ€œä»é”™è¯¯ä¸­å­¦ä¹ â€çš„å¼ºåŠ›é—­ç¯ã€‚è¿™å·²è¶…è¶Šäº†å•çº¯çš„æ¨¡å‹ä¼˜åŒ–ï¼Œä¸Šå‡ä¸ºä¸€ç§æ•°æ®é©±åŠ¨çš„ç³»ç»Ÿå·¥ç¨‹æ€ç»´ã€‚</p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰æ— æ³•å›é¿çš„å·¥ç¨‹çº¦æŸã€‚é¡¶çº§ä¼šè®®ä¸Šé‚£äº›éœ€è¦æ•°ä¸ªGPUã€è€—æ—¶æ•°ç™¾æ¯«ç§’å¤„ç†ä¸€å¸§çš„åºç„¶å¤§ç‰©ï¼Œåœ¨è®²ç©¶å®æ—¶å“åº”çš„è¾¹ç¼˜è®¾å¤‡ä¸Šæ¯«æ— ç”¨æ­¦ä¹‹åœ°ã€‚å»¶è¿Ÿã€ç®—åŠ›æˆæœ¬ã€ä»¥åŠæ¨¡å‹ä¸Šçº¿åä¸å¯é¿å…çš„æ€§èƒ½â€œæ¼‚ç§»â€ä¸æŒç»­ç»´æŠ¤ï¼Œéƒ½æ˜¯çº¸ä¸Šåˆ†æ•°æ— æ³•ä½“ç°çš„æ²‰é‡ç°å®ã€‚</p>
<h2 data-id="heading-3"><strong>å‰æ–¹çš„è·¯ï¼šè®©æ¨¡å‹å­¦ä¼šâ€œå…¥ä¹¡éšä¿—â€ä¸â€œç»ˆèº«å­¦ä¹ â€</strong></h2>
<p>é¸¿æ²Ÿè™½æ·±ï¼Œä½†è·¨è¶Šçš„å°è¯•ä»æœªåœæ­¢ã€‚ä¸€äº›å‰æ²¿æ–¹å‘æ­£åœ¨å¸¦æ¥æ›™å…‰ã€‚</p>
<ul>
<li><strong>é¢†åŸŸè‡ªé€‚åº”</strong></li>
</ul>
<p>æ¯”å¦‚â€œé¢†åŸŸè‡ªé€‚åº”â€ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯è®©æ¨¡å‹å­¦ä¼šâ€œå…¥ä¹¡éšä¿—â€ã€‚é€šè¿‡ç®—æ³•æ‹‰è¿‘å®éªŒå®¤æ•°æ®ï¼ˆæºåŸŸï¼‰ä¸çœŸå®åœºæ™¯æ•°æ®ï¼ˆç›®æ ‡åŸŸï¼‰åœ¨ç‰¹å¾å±‚é¢çš„è·ç¦»ï¼Œè®©æ¨¡å‹è·å¾—å¯¹é¢†åŸŸå˜åŒ–ä¸æ•æ„Ÿçš„ã€æ›´é€šç”¨çš„â€œçœ¼åŠ›â€ã€‚è¿™å¥½æ¯”è®©ä¸€ä¸ªåªåœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¼€è¿‡è½¦çš„å¸æœºï¼Œèƒ½æ›´å¿«é€‚åº”çœŸå®è·¯å†µçš„å¤æ‚å¤šå˜ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0bed73acadc4b21bcd0af7da1c5f168~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=O84Sja8ZQrUomhAmUL56MnJxfHM%3D" alt="v2-d932652660d8fa44a27e6d8a0cc6510c_1440w.png" loading="lazy"/></p>
<ul>
<li><strong>æŒç»­å­¦ä¹ </strong></li>
</ul>
<p>åˆå¦‚â€œæŒç»­å­¦ä¹ â€ï¼Œæ—¨åœ¨åŸ¹å…»æ°¸ä¸é—å¿˜çš„â€œç»ˆèº«å­¦ä¹ è€…â€ã€‚ä¼ ç»Ÿç¥ç»ç½‘ç»œæœ‰ä¸ªè‡´å‘½ä¼¤â€”â€”å­¦æ–°å¿˜æ—§ã€‚æŒç»­å­¦ä¹ é€šè¿‡å¤šç§ç­–ç•¥ï¼ˆå¦‚ä¿æŠ¤é‡è¦ç¥ç»å…ƒçš„æƒé‡ã€å®šæœŸâ€œå¤ä¹ â€æ—§æ•°æ®ã€æˆ–åŠ¨æ€æ‰©å±•ç½‘ç»œç»“æ„ï¼‰ï¼Œè¯•å›¾è®©æ¨¡å‹åœ¨æŒæ¡æ–°æŠ€èƒ½ï¼ˆè¯†åˆ«æ–°å•†å“ï¼‰æ—¶ï¼Œä¸ä¸¢æ‰æ—§æœ¬é¢†ï¼ˆè®¤è¯†åŸæœ‰å“ç±»ï¼‰ã€‚è¿™å¯¹äºéœ€è¦ä¸æ–­é€‚åº”æ–°ç¯å¢ƒã€æ–°ä»»åŠ¡çš„AIç³»ç»Ÿè€Œè¨€ï¼Œè‡³å…³é‡è¦ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae7716a0f0804d048b3a5e1203872ffc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=xhhSFP3a4zdGk0I6mqaLYYVPpTE%3D" alt="a-robotic-reinforcemen.jpg" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>ä»â€œç‚¼ä¸¹â€åˆ°é€ â€œç³»ç»Ÿâ€</strong></h2>
<p>è¯´åˆ°åº•ï¼Œä¸€ä¸ªCVPRé«˜åˆ†æ¨¡å‹åœ¨ç”Ÿäº§çº¿ä¸Šçš„â€œå¤±çµâ€ï¼Œ seldomæ˜¯ä¸€ä¸ªå•ç‚¹æ•…éšœã€‚å®ƒæš´éœ²çš„æ˜¯ä»æ•°æ®ã€æ¨¡å‹ã€è¯„ä¼°åˆ°éƒ¨ç½²çš„å…¨é“¾è·¯ç³»ç»Ÿæ€§è„±èŠ‚ã€‚</p>
<p>è¿™æˆ–è®¸åœ¨æé†’æˆ‘ä»¬ï¼Œæ˜¯æ—¶å€™èµ°å‡ºæ•°æ®çš„â€œæ— èŒå®¤â€ï¼Œé‡æ–°å®¡è§†ä»€ä¹ˆæ‰æ˜¯â€œå¥½â€æ¨¡å‹ã€‚æ ‡å‡†æµ‹è¯•é›†ä¸Šçš„é‚£å‡ ä¸ªç™¾åˆ†ç‚¹çš„æå‡ï¼Œæˆ–è®¸å·²ä¸å†æ˜¯å”¯ä¸€çš„åœ£æ¯ã€‚é²æ£’æ€§ã€å¯¹æœªçŸ¥çš„å¤„ç½®æ™ºæ…§ã€åœ¨é•¿å°¾åœºæ™¯ä¸‹çš„æ‹…å½“ï¼Œä»¥åŠåœ¨å…·ä½“ç¡¬ä»¶ä¸Šçš„æ•ˆç‡ï¼Œå…±åŒæ„æˆäº†æ¨¡å‹åœ¨çœŸå®ä¸–ç•Œä¸­çš„ç«‹ä½“ç”»åƒã€‚</p>
<p>æœ€ç»ˆï¼ŒæˆåŠŸçš„è§†è§‰åº”ç”¨ï¼Œæ—©å·²ä¸æ˜¯å®éªŒå®¤é‡Œçš„â€œç®—æ³•ç‚¼ä¸¹â€ã€‚å®ƒæ›´åƒæ˜¯ä¸€é¡¹å¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œæ ¸å¿ƒé©±åŠ¨åŠ›ä»çº¯ç²¹çš„æ¨¡å‹ç»“æ„ï¼Œè½¬å‘äº†æ•°æ®ä¸è¿­ä»£çš„é—­ç¯ã€‚æˆ‘ä»¬éœ€è¦æ„å»ºèƒ½è‡ªåŠ¨æ±²å–çœŸå®ä¸–ç•Œå…»åˆ†çš„æ•°æ®å¼•æ“ï¼Œå»ºç«‹å®Œå–„çš„ç›‘æ§ä¸è¿­ä»£æœºåˆ¶ï¼Œå¹¶å§‹ç»ˆå¯¹ä¸šåŠ¡åœºæ™¯ä¿æŒæ•¬ç•ã€‚</p>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œé«˜åˆ†æ¨¡å‹çš„â€œå¤±çµâ€å¹¶éç»ˆç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´è‰°éš¾ã€ä½†ä¹Ÿæ›´è´´è¿‘çœŸå®çš„èµ·ç‚¹ã€‚å®ƒæ ‡å¿—ç€è®¡ç®—æœºè§†è§‰æ­£ä»ä¸€ä¸ªè¿½æ±‚çº¸ä¸Šåˆ†æ•°çš„â€œå®éªŒå®¤æ—¶ä»£â€ï¼Œç¬¨æ‹™å´åšå®šåœ°ï¼Œè¿ˆå‘ä¸€ä¸ªè€ƒéªŒç»¼åˆå·¥ç¨‹èƒ½åŠ›çš„â€œå·¥ä¸šåŒ–æ—¶ä»£â€ã€‚è¿™æ¡é¸¿æ²Ÿï¼Œæ°æ°æ˜¯æŠ€æœ¯èµ°å‘æˆç†Ÿçš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p>å¦‚æœæ‚¨æ­£åœ¨å°†è§†è§‰AIæŠ€æœ¯è½åœ°åˆ°å…·ä½“è¡Œä¸šï¼ˆå¦‚å·¥ä¸šè´¨æ£€ã€æ™ºæ…§åŸå¸‚ã€è‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸï¼‰ï¼Œå¹¶é¢ä¸´æ•°æ®æ‚ä¹±ã€æ¨¡å‹è°ƒä¼˜å›°éš¾æˆ–éƒ¨ç½²å¤æ‚åº¦é«˜çš„æŒ‘æˆ˜ï¼Œæˆ–è®¸ä¸å¿…ä»é›¶å¼€å§‹æ­å»ºä¸€åˆ‡ã€‚</p>
<p>æ‰«æä¸‹æ–¹äºŒç»´ç ï¼Œä¸Coovallyçš„æŠ€æœ¯å›¢é˜ŸèŠä¸€èŠæ‚¨çš„å…·ä½“åœºæ™¯ã€‚ è®©ä¸€ä¸ªç³»ç»ŸåŒ–çš„å¹³å°ï¼Œå¸®åŠ©æ‚¨å°†å‰æ²¿çš„ç®—æ³•æ€æƒ³ï¼Œæ›´å¿«ã€æ›´ç¨³åœ°è½¬åŒ–ä¸ºèƒ½å¤Ÿç»å—ç°å®è€ƒéªŒçš„ç”Ÿäº§åŠ›ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c498c24a4dc4d30912ff80f88ca066e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770604629&amp;x-signature=6BToRY4bkLBIVPYRN7gEIVx4Zzo%3D" alt="å°åŠ©æ‰‹äºŒç»´ç .png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®©AIå½“ä½ çš„æ€ç»´æ•™ç»ƒ]]></title>    <link>https://juejin.cn/post/7601762468201398298</link>    <guid>https://juejin.cn/post/7601762468201398298</guid>    <pubDate>2026-02-02T02:58:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601762468201398298" data-draft-id="7601606188619218982" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®©AIå½“ä½ çš„æ€ç»´æ•™ç»ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-02T02:58:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš–é˜³_"/> <meta itemprop="url" content="https://juejin.cn/user/1662117312465406"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®©AIå½“ä½ çš„æ€ç»´æ•™ç»ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117312465406/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš–é˜³_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T02:58:44.000Z" title="Mon Feb 02 2026 02:58:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¦‚ä½•è®©AIå½“ä½ çš„æ€ç»´æ•™ç»ƒ</h2>
<p>æœ¬æ–‡è®²çš„æ˜¯ï¼šå¦‚ä½•è®© AI å½“ä½ çš„æ€ç»´æ•™ç»ƒã€‚è®© AI å½“æ€ç»´æ•™ç»ƒï¼Œä¸æ˜¯è¦ç­”æ¡ˆï¼Œè€Œæ˜¯è¦è¢«é—®â€”â€”ä¸‹é¢è¿™æ®µå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°ä»»æ„ AI å¯¹è¯é‡Œè¯•ä¸€æ¬¡ï¼Œæ„Ÿå—ã€Œè¢«æé—®å¼•å¯¼æ€è€ƒã€çš„å·®åˆ«ã€‚è¯•å®Œå†å›æ¥çœ‹åé¢çš„æ–¹æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-1">å¯å¤åˆ¶ç¤ºä¾‹ promptï¼ˆå¤åˆ¶ä¸‹é¢æ•´æ®µåˆ° AIï¼‰</h3>
<pre><code class="hljs">æˆ‘æ­£åœ¨å­¦ä¹ å¦‚ä½•å’Œ AI åä½œï¼Œè®© AI ä½œä¸ºæˆ‘çš„æ€ç»´æ•™ç»ƒè€Œä¸æ˜¯ç›´æ¥ç»™ç­”æ¡ˆã€‚è¯·ä½ ä¸è¦ç›´æ¥ç»™æˆ‘ç­”æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡æé—®æ¥å¼•å¯¼æˆ‘æ€è€ƒã€‚

æˆ‘ç›®å‰çš„è®¤çŸ¥æ˜¯ï¼šå’Œ AI åä½œæ—¶ï¼Œåº”è¯¥å…ˆå†™ä¸‹è‡ªå·±çš„åˆæ­¥æƒ³æ³•ï¼Œå†ç”¨ã€Œå…ƒæé—®ã€æ¨¡æ¿å¯åŠ¨å¯¹è¯ï¼Œæœ€åè‡ªå·±æ•´åˆç»“è®ºã€‚

è¯·åŸºäºæ­¤ï¼Œé—®æˆ‘ 5 ä¸ªå…³é”®é—®é¢˜ï¼Œå¸®æˆ‘ç†æ¸…ï¼šæˆ‘è¿™æ ·ç†è§£æœ‰æ²¡æœ‰é—æ¼ï¼Ÿä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆç»ƒï¼Ÿ
</code></pre>
<hr/>
<p><strong>å…ˆå¤åˆ¶åˆ° AI é‡Œè¯•ä¸€æ¬¡ï¼Œå†å›æ¥çœ‹ä¸‹é¢çš„æ–¹æ³•ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">ä¸‹é¢çš„æ–¹æ³•ï¼šä¸‰ä¸ªå¯ç«‹å³ä¸Šæ‰‹çš„è¡ŒåŠ¨</h3>
<p>ä¸‹é¢ä¸‰ä»¶äº‹<strong>æ²¡æœ‰å…ˆåé¡ºåº</strong>ï¼Œé€‰ä¸€ä¸ªä½ æœ€å®¹æ˜“ä¸Šæ‰‹çš„å…ˆè¯•å³å¯ã€‚åšæŒå‡ æ¬¡ï¼Œå°±èƒ½æ„Ÿå—åˆ°æ€ç»´è¢«æ¿€æ´»çš„ä¸åŒã€‚</p>
<h4 data-id="heading-3">1. æ”¹å†™ä½ çš„é—®é¢˜ï¼šä»ã€Œç»™æˆ‘ç­”æ¡ˆã€åˆ°ã€Œå¸®æˆ‘æ€è€ƒã€</h4>
<p>åœ¨å‘ AI æé—®å‰ï¼Œæœ‰æ„è¯†åœ°ç»™é—®é¢˜åŠ ä¸Š<strong>å¼•å¯¼æŒ‡ä»¤</strong>ã€‚</p>
<ul>
<li><strong>æ—§çš„æé—®æ–¹å¼ï¼ˆè§£é¢˜å·¥å…·ï¼‰</strong>ï¼š<br/>
ã€Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªè®¡åˆ’ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ï¼Ÿã€</li>
<li><strong>æ–°çš„æé—®æ–¹å¼ï¼ˆæ€ç»´æ•™ç»ƒï¼‰</strong>ï¼š<br/>
ã€Œæˆ‘æ­£åœ¨è®¾è®¡ä¸€ä¸ªè®¡åˆ’ç®¡ç†ç³»ç»Ÿçš„é¢†åŸŸæ¨¡å‹ã€‚è¯·ä½ ä¸è¦ç›´æ¥ç»™æˆ‘ç­”æ¡ˆï¼Œè€Œæ˜¯ä½œä¸ºæˆ‘çš„ DDD æ•™ç»ƒï¼Œé€šè¿‡æé—®æ¥å¼•å¯¼æˆ‘æ€è€ƒã€‚æˆ‘ç›®å‰çš„è®¤çŸ¥æ˜¯ï¼šè®¡åˆ’åŒ…å«ä»»åŠ¡ã€èµ„æºå’Œæ—¶é—´çº¿ã€‚è¯·åŸºäºæ­¤ï¼Œé—®æˆ‘ 5 ä¸ªå…³é”®é—®é¢˜ï¼Œå¸®æˆ‘ç†æ¸…èšåˆè¾¹ç•Œå’Œä¸Šä¸‹æ–‡æ˜ å°„ã€‚ã€</li>
</ul>
<p>å…³é”®è½¬å˜ï¼šæŒ‡ä»¤ä»ã€Œç»™æˆ‘ç»“æœã€å˜æˆäº†ã€Œå¼•å¯¼æˆ‘è¿‡ç¨‹ã€â€”â€”ä½ å‘Šè¯‰ AI å®ƒåº”è¯¥æ‰®æ¼”çš„è§’è‰²å’ŒæœŸæœ›çš„äº’åŠ¨æ¨¡å¼ï¼Œè€Œä¸æ˜¯ç´¢è¦æˆå“ã€‚</p>
<h4 data-id="heading-4">2. åˆ›å»ºå¹¶è¿ç”¨ã€Œå…ƒæé—®ã€æ¨¡æ¿</h4>
<p>å‡†å¤‡å‡ ä¸ªè¦†ç›–é«˜é¢‘åœºæ™¯çš„<strong>å¯åŠ¨æ¨¡æ¿</strong>ï¼Œç›´æ¥å¥—ç”¨ï¼Œä¸ç”¨æ¯æ¬¡ä»å¤´æƒ³æ€ä¹ˆå’Œ AI äº¤æµã€‚</p>
<p><strong>ã€è®¾è®¡å†³ç­–æ¨¡æ¿ã€‘</strong><br/>
ã€Œå…³äºã€æŠ€æœ¯é€‰å‹ï¼šç”¨ GraphQL è¿˜æ˜¯ RESTã€‘ï¼Œè¯·ç”¨è‹æ ¼æ‹‰åº•å¼æé—®æ³•æŒ‘æˆ˜æˆ‘ã€‚æˆ‘å·²å€¾å‘äº GraphQLï¼Œè¯·é—®æˆ‘ 3 ä¸ªèƒ½è®©æˆ‘é‡æ–°å®¡è§†è¿™ä¸ªå†³å®šçš„æ·±å±‚é—®é¢˜ã€‚ã€</p>
<p><strong>ã€é—®é¢˜è¯Šæ–­æ¨¡æ¿ã€‘</strong><br/>
ã€Œæˆ‘çš„å›¢é˜Ÿé¢ä¸´ã€äº¤ä»˜å»¶è¿Ÿã€‘çš„é—®é¢˜ã€‚è¯·ä»¥å›¢é˜Ÿæ•™ç»ƒçš„èº«ä»½ï¼Œé€šè¿‡æé—®å¸®æˆ‘ç³»ç»Ÿæ€§åœ°å®šä½æ ¹å› ã€‚è¯·åˆ†å±‚æ¬¡æé—®ï¼šå…ˆä»è¡¨é¢ç°è±¡å¼€å§‹ï¼Œå†æ·±å…¥åˆ°æµç¨‹å’Œäººçš„å±‚é¢ã€‚ã€</p>
<p><strong>ã€å­¦ä¹ å¤ç›˜æ¨¡æ¿ã€‘</strong><br/>
ã€Œæˆ‘åˆšè¯»å®Œã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹çš„æ ¸å¿ƒç« èŠ‚ã€‚è¯·é€šè¿‡æé—®ï¼Œå¸®åŠ©æˆ‘å†…åŒ–å’Œè¿æ¥è¿™äº›æ¦‚å¿µã€‚ä¾‹å¦‚ï¼šä¹¦ä¸­çš„èšåˆæ¦‚å¿µï¼Œä¸æˆ‘å½“å‰é¡¹ç›®ä¸­çš„ XX æ¨¡å—æœ‰ä»€ä¹ˆæ½œåœ¨å…³è”ï¼Ÿå¦‚æœå‘å›¢é˜Ÿæ–°äººè§£é‡Šé™ç•Œä¸Šä¸‹æ–‡ï¼Œä½ ä¼šç”¨ä»€ä¹ˆæ¯”å–»ï¼Ÿã€</p>
<p>å…³é”®è½¬å˜ï¼šç”¨é¢„è®¾çš„ã€é«˜è´¨é‡çš„ã€Œå¯¹è¯åè®®ã€å¯åŠ¨ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ–°é—®é¢˜ä¸´æ—¶æ„æ€ã€‚</p>
<h4 data-id="heading-5">3. å®æ–½ã€Œä¸‰æ®µå¼ã€æ€è€ƒå¼ºåŒ–æµç¨‹</h4>
<p>åœ¨æ•´ä¸ªå¯¹è¯ä¸­ï¼Œå¼ºåˆ¶è‡ªå·±åµŒå…¥ä¸‰ä¸ªç¯èŠ‚ï¼Œç¡®ä¿<strong>æ€è€ƒçš„ä¸»ä½“å§‹ç»ˆæ˜¯ä½ è‡ªå·±</strong>ã€‚</p>





















<table><thead><tr><th>é˜¶æ®µ</th><th>ä½ è¦åšçš„äº‹</th></tr></thead><tbody><tr><td><strong>ç¬¬ä¸€æ®µï¼šæˆ‘çš„åˆæ­¥ç­”æ¡ˆï¼ˆå¯åŠ¨å‰ï¼‰</strong></td><td>åœ¨å‘ AI æ±‚åŠ©å‰ï¼Œå…ˆå†™ä¸‹ï¼šã€Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç›®å‰è®¤ä¸ºâ€¦â€¦ã€ã€Œæˆ‘æƒ³åˆ°çš„æ–¹æ¡ˆ A/B/C åˆ†åˆ«æ˜¯â€¦â€¦ã€ã€Œæˆ‘æœ€å¤§çš„ä¸ç¡®å®šæ˜¯â€¦â€¦ã€</td></tr><tr><td><strong>ç¬¬äºŒæ®µï¼šä¸æ•™ç»ƒçš„é—®ç­”ï¼ˆäº’åŠ¨ä¸­ï¼‰</strong></td><td>æŠŠåˆæ­¥ç­”æ¡ˆä½œä¸ºèƒŒæ™¯æä¾›ç»™ AIï¼Œè¯´ï¼šã€ŒåŸºäºä»¥ä¸Šï¼Œè¯·å‘æˆ‘æå‡ºæœ€å…·æŒ‘æˆ˜æ€§çš„ 3 ä¸ªé—®é¢˜ï¼Œä»¥å®Œå–„æˆ–æ¨ç¿»æˆ‘çš„æƒ³æ³•ã€‚ã€â€”â€”è®¤çœŸå›ç­”æ¯ä¸€ä¸ªé—®é¢˜ã€‚</td></tr><tr><td><strong>ç¬¬ä¸‰æ®µï¼šæˆ‘çš„æœ€ç»ˆæ•´åˆï¼ˆç»“æŸåï¼‰</strong></td><td>AI ç»™å‡ºå¼•å¯¼æˆ–æ€»ç»“åï¼Œç”¨è‡ªå·±çš„è¯å¤è¿°ï¼šã€Œç»è¿‡è¿™è½®å¯¹è¯ï¼Œæˆ‘çš„ç†è§£æ˜¯â€¦â€¦ã€ã€Œæˆ‘å†³å®šé‡‡çº³â€¦â€¦æ–¹æ¡ˆï¼Œå› ä¸ºâ€¦â€¦ã€ã€Œæˆ‘å­¦åˆ°çš„æ€è€ƒæ¡†æ¶æ˜¯â€¦â€¦ã€</td></tr></tbody></table>
<p>å…³é”®è½¬å˜ï¼šå¯¹è¯çš„æ ¸å¿ƒä»ã€ŒAI çš„è¾“å‡ºã€å˜æˆã€Œæˆ‘çš„è¾“å…¥ â†’ AI çš„å‚¬åŒ– â†’ æˆ‘çš„æ•´åˆã€ã€‚ä½ ä¸ºæ€è€ƒè¿‡ç¨‹è´Ÿè´£ï¼ŒAI æ˜¯è¿™æ®µã€Œæ€è€ƒå¥èº«ã€ä¸­çš„æ•™ç»ƒå’Œå™¨æ¢°ã€‚</p>
<hr/>
<h3 data-id="heading-6">ä¸€ä¸ªå®Œæ•´çš„å®è·µæ¡ˆä¾‹ï¼šé‡æ„ä»»åŠ¡åˆ†é…é€»è¾‘</h3>
<p><strong>ä½ ï¼ˆå¯åŠ¨å‰æ€è€ƒï¼‰</strong><br/>
å…ˆåœ¨ç¬”è®°é‡Œå†™ä¸‹ï¼šã€Œå½“å‰ä»»åŠ¡åˆ†é…æ˜¯é™æ€çš„ï¼Œæˆ‘æƒ³æ”¹æˆåŠ¨æ€çš„ã€‚æˆ‘åˆæ­¥è®¾æƒ³ç”¨ä¸€ä¸ªã€åˆ†é…å¼•æ“ã€æ¥è®¡ç®—ã€‚æ‹…å¿§æ˜¯æ€§èƒ½å¤æ‚åº¦ã€‚ã€</p>
<p><strong>ä½ ï¼ˆå¯åŠ¨å¯¹è¯ï¼‰</strong><br/>
ã€Œæˆ‘è®¡åˆ’é‡æ„ç³»ç»Ÿçš„ä»»åŠ¡åˆ†é…é€»è¾‘ï¼Œç›®æ ‡æ˜¯æ”¯æŒåŠ¨æ€ã€å®æ—¶çš„æœ€ä¼˜åˆ†é…ã€‚è¯·ä½œä¸ºæˆ‘çš„æ¶æ„æ€ç»´æ•™ç»ƒã€‚è¿™æ˜¯æˆ‘ç›®å‰çš„è‰å›¾ï¼ˆé™„ä¸Šåˆæ­¥æƒ³æ³•ï¼‰ã€‚è¯·é¦–å…ˆé—®æˆ‘ 5 ä¸ªå…³äºã€é¢†åŸŸè¾¹ç•Œã€å’Œã€æ ¸å¿ƒçº¦æŸã€çš„é—®é¢˜ï¼Œå¸®åŠ©æˆ‘åˆ¤æ–­è¿™ä¸ªå¼•æ“åº”è¯¥æ”¾åœ¨å“ªä¸ªé™ç•Œä¸Šä¸‹æ–‡ä¸­ã€‚ã€</p>
<p><strong>AIï¼ˆæ•™ç»ƒæ¨¡å¼ï¼‰</strong><br/>
ã€Œå¥½çš„ï¼Œä½œä¸ºä½ çš„æ•™ç»ƒï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šåœ¨ä¸šåŠ¡æœ¯è¯­ä¸­ï¼Œã€æœ€ä¼˜åˆ†é…ã€çš„å…·ä½“æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯èµ„æºåˆ©ç”¨ç‡æœ€é«˜ã€ä»»åŠ¡å®Œæˆæœ€å¿«ï¼Œè¿˜æ˜¯è´Ÿè½½æœ€å‡è¡¡ï¼Ÿè¯·æ˜ç¡®ä¼˜å…ˆçº§ã€‚ã€</p>
<p><strong>ä½ ï¼ˆå›ç­”å¹¶ç»§ç»­ï¼‰</strong><br/>
ã€Œä¸šåŠ¡ä¸Šæœ€å…³å¿ƒã€ä»»åŠ¡å®Œæˆæœ€å¿«ã€ã€‚ç¬¬äºŒä¸ªæ ‡å‡†æ˜¯è´Ÿè½½å‡è¡¡ã€‚ã€<br/>
ï¼ˆç»è¿‡å‡ è½®é—®ç­”åï¼‰</p>
<p><strong>ä½ ï¼ˆæœ€ç»ˆæ•´åˆï¼‰</strong><br/>
ã€Œç»è¿‡è¿™æ¬¡å¯¹è¯ï¼Œæˆ‘æ˜ç¡®äº†å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œã€åˆ†é…å¼•æ“ã€åº”å±äºã€èµ„æºè°ƒåº¦ã€ä¸Šä¸‹æ–‡ï¼Œè€Œéã€ä»»åŠ¡ç®¡ç†ã€ä¸Šä¸‹æ–‡ã€‚ç¬¬äºŒï¼Œæ ¸å¿ƒçº¦æŸæ˜¯ã€ä»»åŠ¡ä¼˜å…ˆçº§ä¸å¯è¿åã€ã€‚ç¬¬ä¸‰ï¼Œæˆ‘å°†é‡‡ç”¨ã€å†³ç­–+æ‰§è¡Œã€åˆ†ç¦»çš„è®¾è®¡ï¼Œå¼•æ“åªè´Ÿè´£æ¨èï¼Œç”±å¦ä¸€ä¸ªæœåŠ¡æ‰§è¡Œä»¥ä¿è¯ä¸€è‡´æ€§ã€‚æˆ‘å­¦åˆ°çš„æ¡†æ¶æ˜¯ï¼šè®¾è®¡å‰å…ˆå®šä¹‰æ¸…æ™°çš„ä¸šåŠ¡æˆåŠŸæ ‡å‡†å’Œä¸å¯å˜è§„åˆ™ã€‚ã€</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ è·å¾—çš„ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œæ˜¯ä¸€å¥—<strong>å¦‚ä½•æ€è€ƒæ­¤ç±»é—®é¢˜çš„æ–¹æ³•</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-7">å¦‚ä½•æŠŠé—®é¢˜å¥—è¿›æ¨¡æ¿</h3>
<ol>
<li><strong>é€‰ä¸€ä¸ªå’Œä½ åœºæ™¯æœ€æ¥è¿‘çš„æ¨¡æ¿</strong>ï¼ˆè®¾è®¡å†³ç­– / é—®é¢˜è¯Šæ–­ / å­¦ä¹ å¤ç›˜ï¼‰ã€‚</li>
<li><strong>æŠŠã€ã€‘é‡Œçš„å ä½æ¢æˆä½ çš„å…·ä½“å†…å®¹</strong>ï¼Œä¾‹å¦‚ï¼šã€Œå…³äºã€æ˜¯å¦åœ¨é¡¹ç›®é‡Œå¼•å…¥å¾®å‰ç«¯ã€‘ã€ã€Œæˆ‘çš„å›¢é˜Ÿé¢ä¸´ã€éœ€æ±‚å˜æ›´é¢‘ç¹ã€‘ã€ã€‚</li>
<li><strong>å¦‚æœæ¨¡æ¿é‡Œæ²¡æœ‰ã€Œæˆ‘ç›®å‰çš„è®¤çŸ¥ã€ï¼Œè‡ªå·±è¡¥ä¸€å¥</strong>â€”â€”è®© AI çŸ¥é“ä½ çš„èµ·ç‚¹ï¼Œæé—®æ‰ä¼šæ›´æœ‰é’ˆå¯¹æ€§ã€‚</li>
</ol>
<p><strong>æçŸ­ç¤ºä¾‹</strong>ï¼š<br/>
åœºæ™¯æ˜¯ã€Œè¦ä¸è¦ç”¨ TypeScript é‡å†™è€é¡¹ç›®ã€ã€‚å¥—ç”¨è®¾è®¡å†³ç­–æ¨¡æ¿ â†’ ã€Œå…³äºã€æ˜¯å¦ç”¨ TypeScript é‡å†™è€é¡¹ç›®ã€‘ï¼Œè¯·ç”¨è‹æ ¼æ‹‰åº•å¼æé—®æ³•æŒ‘æˆ˜æˆ‘ã€‚æˆ‘å·²å€¾å‘äºåˆ†æ¨¡å—é€æ­¥è¿ç§»ã€‚è¯·é—®æˆ‘ 3 ä¸ªèƒ½è®©æˆ‘é‡æ–°å®¡è§†è¿™ä¸ªå†³å®šçš„æ·±å±‚é—®é¢˜ã€‚ã€</p>
<hr/>
<h3 data-id="heading-8">å¦‚ä½•ä»å¯¹è¯é‡Œæç‚¼å¯æ‰§è¡Œçš„ç»“è®º</h3>
<p>å¯¹è¯ç»“æŸåï¼Œä¸è¦åœåœ¨ã€ŒAI è¯´å¾—æœ‰é“ç†ã€ã€‚å¼ºè¿«è‡ªå·±å†™ä¸‰å¥è¯ï¼š</p>
<ol>
<li><strong>æˆ‘å†³å®šåšä»€ä¹ˆ</strong>ï¼ˆæˆ–é‡‡çº³å“ªæ¡æ–¹æ¡ˆï¼‰ï¼šç”¨ã€Œæˆ‘å†³å®šâ€¦â€¦ã€å¼€å¤´ï¼Œå†™æ¸…æ¥šåŠ¨ä½œã€‚</li>
<li><strong>ç†ç”±æ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨ã€Œå› ä¸ºâ€¦â€¦ã€æŠŠæ•™ç»ƒé—®å‡ºæ¥çš„å…³é”®ç‚¹è¿èµ·æ¥ã€‚</li>
<li><strong>æˆ‘å­¦åˆ°çš„æ€è€ƒæ¡†æ¶æ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨ã€Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œæˆ‘ä¼šå…ˆé—®è‡ªå·±â€¦â€¦ã€æ€»ç»“æˆå¯å¤ç”¨çš„æ€è·¯ã€‚</li>
</ol>
<p><strong>æçŸ­ç¤ºä¾‹</strong>ï¼š<br/>
ã€Œæˆ‘å†³å®šå…ˆåšæ¥å£å¥‘çº¦å’Œ mockï¼Œå†è°ˆæ˜¯å¦ä¸Š GraphQLã€‚å› ä¸ºæ•™ç»ƒé—®å‡ºäº†ã€ä¸Šä¸‹æ¸¸è°å…ˆåŠ¨ã€è¿™ä¸ªçº¦æŸï¼Œæˆ‘å­¦åˆ°çš„æ¡†æ¶æ˜¯ï¼šæŠ€æœ¯é€‰å‹å‰å…ˆç”»æ¸…æ¥šä¾èµ–é“¾å’Œè°åœ¨ç­‰è°ã€‚ã€</p>
<hr/>
<h3 data-id="heading-9">ä¸‹ä¸€æ­¥ï¼šå†è¯•ä¸€æ¬¡</h3>
<p>ä»ä»Šå¤©ä¸‹ä¸€ä¸ªéœ€è¦æ€è€ƒçš„é—®é¢˜å¼€å§‹ï¼Œå…ˆèŠ± 2 åˆ†é’Ÿå†™ä¸‹åˆæ­¥æƒ³æ³•ï¼Œå†ç”¨ä¸Šé¢çš„ä»»æ„ä¸€ä¸ªæ¨¡æ¿å¯åŠ¨ä¸ AI çš„å¯¹è¯ã€‚åšæŒä¸‰æ¬¡ï¼Œä½ å°±èƒ½æ„Ÿå—åˆ°æ€ç»´è‡ªä¸»æ€§è¢«æ¿€æ´»çš„ä¸åŒã€‚</p>
<p><strong>è®© AI å½“æ€ç»´æ•™ç»ƒï¼Œä¸æ˜¯è¦ç­”æ¡ˆï¼Œè€Œæ˜¯è¦è¢«é—®â€”â€”ç°åœ¨å°±å»è¯•ä¸€æ¬¡ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆè®¨åŒç»§æ‰¿ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601384029611425807</link>    <guid>https://juejin.cn/post/7601384029611425807</guid>    <pubDate>2026-02-02T01:26:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601384029611425807" data-draft-id="7597722671084699682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸ºä»€ä¹ˆè®¨åŒç»§æ‰¿ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Kotlin,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-02-02T01:26:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸ºä»€ä¹ˆè®¨åŒç»§æ‰¿ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:26:08.000Z" title="Mon Feb 02 2026 01:26:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc52bda5809d440d95f07706efade322~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770600367&amp;x-signature=ZyRqsw2fw2gZi2bCF8Q3zCyZp0s%3D" alt="a.png" loading="lazy"/></p>
<p>æˆ‘åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7599910677578874880" target="_blank" title="https://juejin.cn/post/7599910677578874880">ç²¾é€š Rust å® â€” ç¬¬ä¸€ä¸ªå®</a>ä¸­æåˆ°è¿‡ï¼Œæˆ‘è®¨åŒç»§æ‰¿ã€‚</p>
<p>ç¬¬äºŒå¤©ä¸­åˆæˆ‘åŒäº‹è·‘è¿‡æ¥é—®æˆ‘ï¼Œè¿™ä¸œè¥¿ç°åœ¨è¯­è¨€éƒ½æœ‰ï¼Œä½ æœ‰ä»€ä¹ˆè®¨åŒçš„ï¼Ÿ</p>
<p>æˆ‘é—®ä»–ï¼Œä½ è¿˜è®°å¾—é¢å‘å¯¹è±¡çš„ä¸‰è¦ç´ å—ï¼Ÿ</p>
<p>ä»–è¯´ï¼šå°è£…ï¼Œç»§æ‰¿...ï¼Œç„¶å...ï¼Œå¤šæ€ï¼</p>
<p>æˆ‘ä¸Šå¤§å­¦å­¦ä¹  Java çš„æ—¶å€™ï¼Œå¾ˆå¤šç›¸å…³ä¹¦ç±éƒ½ä¼šè®²è§£è¿™ä¸‰è¦ç´ ï¼Œä»¥ç°åœ¨çš„æˆ‘çœ‹æ¥ï¼Œå°è£…å’Œå¤šæ€æ˜¯å¿…è¦çš„ã€‚</p>
<p>ä½†æ˜¯ç»§æ‰¿...</p>
<h2 data-id="heading-0">ç»§æ‰¿æœ‰ä»€ä¹ˆé—®é¢˜</h2>
<p>åœ¨æˆ‘åˆšå‚åŠ å·¥ä½œçš„ç¬¬ä¸‰å¹´ï¼Œæˆ‘å‚ä¸åˆ°äº†ä¸­å›½ç§»åŠ¨å’Œåœ°å›¾ App çš„å¼€å‘å·¥ä½œä¸­ï¼Œå½“æ—¶æˆ‘è´Ÿè´£æ”¹é€ è¯¥ App çš„æ ¸å¿ƒç½‘ç»œè¯·æ±‚æ¨¡å—ã€‚</p>
<p>é‚£ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æµè¡Œä½¿ç”¨ <strong>OkHttp</strong> ï¼Œæ›´æ²¡æœ‰ <strong>Retrofit</strong> è¿™ç§ä¼˜ç§€çš„ç½‘ç»œå¼€æºåº“ï¼Œæ•´ä½“è¿˜æ˜¯ä½¿ç”¨åŸå§‹çš„ <strong>HttpConnection</strong> å»å®Œæˆç½‘ç»œè¯·æ±‚ï¼Œè‡ªå·±å°è£…é‡Œé¢çš„å®ç°é€»è¾‘ã€‚</p>
<p>æˆ‘å½“æ—¶ç†è§£å®Œéœ€æ±‚ä¹‹åï¼Œæ•´ç†äº†ç½‘ç»œåº“éœ€è¦æ»¡è¶³çš„åŠŸèƒ½ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®Œæˆå¯¹æ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li>
<li>å®Œæˆå¯¹æ•°æ®çš„åŠ å¯†è§£å¯†ã€‚</li>
<li>è¿”å›çº¯æ–‡æœ¬çš„æ•°æ®ç»“æ„ã€‚</li>
<li>è¿”å› <strong>JSONObject</strong> çš„æ•°æ®ç»“æ„ã€‚</li>
<li>è¿”å›åŸºäº Java å¯¹è±¡çš„æ•°æ®ç»“æ„ã€‚</li>
</ol>
<p>è‡ªç„¶è€Œç„¶ï¼Œæˆ‘æƒ³åˆ°äº†è¿™ç§æ–¹æ¡ˆï¼Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9df7fb263a9e461783f7fc1d063d6c53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770600367&amp;x-signature=ztQz%2Bhn6xW3F3SsPMMju1nbSdqQ%3D" alt="0.png" loading="lazy"/></p>
<ol>
<li>é¦–å…ˆï¼Œ<code>BaseHttp</code> ä½œä¸ºåŸºç±»ï¼Œè´Ÿè´£åºåˆ—åŒ–å’Œååºåˆ—åŒ–å’ŒåŠ è§£å¯†ï¼Œå› ä¸ºä»ç›®å‰çœ‹æ¥ï¼Œä¸€ä¸ªè¯·æ±‚ä¸€å®šä¼šæœ‰è¿™ä¸¤ä¸ªéœ€æ±‚ã€‚</li>
<li><code>TextHttp</code> ç»§æ‰¿ <code>BaseHttp</code>ï¼Œå°†å…¶å­—èŠ‚ç è½¬æ¢æˆæ–‡æœ¬ã€‚</li>
<li><code>JsonHttp</code> ç»§æ‰¿ <code>TextHttp</code>ï¼Œå°†æ–‡æœ¬è½¬æ¢æˆ <code>JSONObject</code> ç»“æ„ã€‚</li>
<li>ä»¥æ­¤ç±»æ¨ã€‚ã€‚ã€‚</li>
</ol>
<p>ä¸€å¼€å§‹ï¼Œè¿™æ ·åšéå¸¸æ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼šå¦‚æœä¸€ä¸ªè¯·æ±‚åªéœ€è¦è·å–æ–‡æœ¬å†…å®¹ï¼Œé‚£ä¹ˆå°±ç›´æ¥ç»§æ‰¿ <code>TextHttp</code>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¯·æ±‚éœ€è¦å®ç°å“ªäº›èƒ½åŠ›ï¼Œé‚£ä¹ˆå°±ç»§æ‰¿é‚£ä¸ªåŸºç±»å°±å¥½äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c539669eb55469188b91007dca066fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770600367&amp;x-signature=v4mDSqZMlKuOBHMc64o12DtnOM0%3D" alt="1.png" loading="lazy"/></p>
<p>è€Œä½¿ç”¨è¿™ä¸ªç½‘ç»œåº“çš„äººï¼Œåªéœ€è¦æŒ‰ç…§ API æ–‡æ¡£ä¸­çš„ API åç§°ï¼Œç”¨è¿™ä¸ªè¯·æ±‚å°±è¡Œäº†ï¼Œä¾‹å¦‚ <code>Sell</code> -&gt; <code>SellHttp</code>ï¼Œ<code>Login</code> -&gt; <code>LoginHttp</code>ï¼Œç”¨èµ·æ¥ä¼šéå¸¸æ–¹ä¾¿ï¼</p>
<p>ä½†æ˜¯åç»­æ”¹åŠ¨ï¼Œè®©æˆ‘è¶Šæ¥è¶Š Hold ä¸ä½è¿™ç§ç»§æ‰¿é“¾äº†ï¼šæœ‰çš„ API éœ€è¦é‰´æƒï¼Œæœ‰çš„ä¸éœ€è¦ï¼›éƒ¨åˆ† API ä¼šæœ‰ä¸åŒçš„ Headerï¼›æœ‰çš„ API è¿”å›ç»“æœåŠ å¯†æ–¹å¼å’Œä¹‹å‰çš„ä¸ä¸€æ ·ã€‚</p>
<p>æ…¢æ…¢çš„ï¼Œæˆ‘å‘ç°æˆ‘çš„ç»§æ‰¿é“¾è¶Šæ¥è¶Šé•¿ï¼Œä¸ºäº†è®©æˆ‘çš„ API ä½¿ç”¨ä¿æŒç®€æ´ï¼Œç”šè‡³å‡ºç°äº†ç±»ä¼¼è±å½¢ç»§æ‰¿çš„æƒ…å†µï¼ˆè¿™é‡Œä¸æ˜¯è¯´ Java å¯ä»¥è±å½¢ç»§æ‰¿ï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce3846fd44c94469a6115242e3c0464b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770600367&amp;x-signature=uniKjDNCZDHCXM0ScheHQB6xABc%3D" alt="2.png" loading="lazy"/></p>
<p>å®é™…ä¸Š <code>SHACryptJsonHttp</code> åŒ…æ‹¬å…¶åŸºç±»æœ‰å¤§é‡ç›¸ä¼¼çš„ä»£ç ï¼Œåªæ˜¯é‰´æƒæ–¹å¼é—®é¢˜ï¼Œå¯¼è‡´æˆ‘ä¸å¾—ä¸é‡æ–°æ”¹å†™æ•´ä¸ªç»§æ‰¿é“¾ï¼ˆè¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ŒçœŸå®æƒ…å†µæ¯”è¿™ä¸ªå¤æ‚çš„å¤šï¼‰ã€‚</p>
<p>åé¢è¿™ç§é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œè™½ç„¶åŒäº‹ä»¬ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼ˆå¯¹ç…§æ–‡æ¡£ç›´æ¥ <code>new</code> å³å¯ï¼‰ï¼Œä½†æ˜¯å¯¹æˆ‘çš„ç»´æŠ¤é€ æˆäº†å·¨å¤§è´Ÿæ‹…ï¼ŒåŒæ—¶ä¹Ÿä¼šçŠ¯ä¸€äº›éå¸¸ä½çº§çš„é”™è¯¯ï¼Œä¾‹å¦‚æé”™äº†é‰´æƒæ–¹å¼ï¼</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">ä¸€å¥è¯æ€»ç»“</h2>
<p>â€œç»§æ‰¿â€è¿™ä¸ªç‰¹æ€§ï¼Œæœ¬æ¥æƒ³å¹²ä¸‰ä»¶äº‹ï¼Œç»“æœä¸‰ä»¶äº‹äº’ç›¸æ‰“æ¶ï¼Œæœ€åæå¾—è°éƒ½ä¸å¼€å¿ƒã€‚</p>
<p>å¥½çš„ï¼Œæˆ‘æ¥æ¢ä¸ªæ€è·¯è§£é‡Šï¼Œä»¥ Java è¿™ç§è¯­è¨€ä¸ºä¾‹ï¼š</p>
<p>æ¯”å¦‚ä½ å†™ä¸€ä¸ª <code>Animal</code> ç±»ï¼Œå†å†™ä¸€ä¸ª <code>Dog</code> ç±»ç»§æ‰¿å®ƒï¼Œè¿™æ · <code>Dog</code> å°±è‡ªåŠ¨æœ‰äº† <code>Animal</code> çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œå¯¹å§ï¼Ÿï¼ˆå½“æ—¶æˆ‘å°±æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼‰</p>
<p>ä½†é—®é¢˜æ¥äº†â€”â€”<strong>æˆ‘ä»¬å…¶å®ç”¨â€œç»§æ‰¿â€åšäº†ä¸‰ä»¶å®Œå…¨ä¸åŒçš„äº‹</strong>ï¼Œè€Œè¿™ä¸‰ä»¶äº‹æ ¹æœ¬ä¸æ˜¯ä¸€å›äº‹ï¼</p>
<h3 data-id="heading-2">ç¬¬ä¸€ä»¶äº‹ï¼šåˆ†ç±» â€”â€” è¿™ä¸œè¥¿å±äºå“ªä¸€ç±»</h3>
<p>æ¯”å¦‚ï¼šâ€œæ­£æ–¹å½¢æ˜¯ä¸€ç§çŸ©å½¢â€ï¼Œâ€œç‹—æ˜¯ä¸€ç§åŠ¨ç‰©â€ã€‚</p>
<p>è¿™æ˜¯ä»<strong>ç°å®ä¸–ç•Œé€»è¾‘</strong>å‡ºå‘çš„ï¼Œå«â€œæœ¬ä½“è®ºâ€ï¼ˆåˆ«è¢«åå­—å“åˆ°ï¼Œå°±æ˜¯â€œåˆ†ç±»â€çš„æ„æ€ï¼‰ã€‚</p>
<p>è¿™åˆç†å•Šï¼Œæ­£æ–¹å½¢ç¡®å®æ˜¯çŸ©å½¢çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚</p>
<h3 data-id="heading-3">ç¬¬äºŒä»¶äº‹ï¼š èƒ½æ›¿æ¢å— â€”â€” ç¨‹åºèƒ½ä¸èƒ½å½“åŒä¸€ç§ä¸œè¥¿ç”¨</h3>
<p>æ¯”å¦‚ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°è¦æ±‚ä¼ å…¥ä¸€ä¸ª <code>Rectangle</code>ï¼ˆçŸ©å½¢ï¼‰ï¼Œé‚£æˆ‘èƒ½ä¼ ä¸€ä¸ª <code>Square</code>ï¼ˆæ­£æ–¹å½¢ï¼‰è¿›å»å—ï¼Ÿ</p>
<p>å¦‚æœå¯ä»¥ï¼Œå°±å«â€œå¯æ›¿æ¢â€ï¼Œè¿™æ˜¯<strong>ç¨‹åºæ­£ç¡®æ€§</strong>çš„é—®é¢˜ã€‚</p>
<p>ä½†ç°å®ä¸­ä¸è¡Œï¼å› ä¸ºçŸ©å½¢å¯ä»¥æ”¹å®½é«˜ï¼Œè€Œæ­£æ–¹å½¢ä¸€æ”¹å®½é«˜å°±ä¸æ˜¯æ­£æ–¹å½¢äº†ã€‚</p>
<p>æ‰€ä»¥ï¼š<strong>è™½ç„¶â€œæ­£æ–¹å½¢æ˜¯çŸ©å½¢â€åœ¨æ•°å­¦ä¸Šæˆç«‹ï¼Œä½†åœ¨ä»£ç é‡Œä¸èƒ½éšä¾¿æ›¿æ¢ï¼</strong></p>
<blockquote>
<p>è¿™å°±æ˜¯è‘—åçš„ <strong>â€œæ­£æ–¹å½¢-çŸ©å½¢æ‚–è®ºâ€</strong> â€”â€” çœ‹ä¼¼åˆç†ï¼Œå®åˆ™å‘äººã€‚</p>
</blockquote>
<h3 data-id="heading-4">ç¬¬ä¸‰ä»¶äº‹ï¼š  çœä»£ç  â€”â€” åˆ«é‡å¤å†™ä¸€æ ·çš„ä»£ç </h3>
<p>æ¯”å¦‚ï¼š<code>Dog</code> å’Œ <code>Cat</code> éƒ½æœ‰ <code>eat()</code> æ–¹æ³•ï¼Œäºæ˜¯è®©å®ƒä»¬éƒ½ç»§æ‰¿ <code>Animal</code>ï¼ŒæŠŠ <code>eat()</code> å†™åœ¨çˆ¶ç±»é‡Œã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†<strong>å·æ‡’/å¤ç”¨ä»£ç </strong>ï¼Œè·Ÿâ€œæ˜¯ä¸æ˜¯åŠ¨ç‰©â€æ²¡å…³ç³»ã€‚</p>
<p>å¥½å¤„ï¼šå°‘å†™ä»£ç ã€‚</p>
<p>é£é™©ï¼šä¸‡ä¸€ä»¥åæŸä¸ªâ€œåŠ¨ç‰©â€ä¸åƒä¸œè¥¿ï¼ˆæ¯”å¦‚æœºå™¨äººå® ç‰©ï¼‰ï¼Œä½ å°±å¾—ç¡¬æ”¹ï¼Œæˆ–è€…æä¸€ä¸ªæ–°çš„ç»§æ‰¿é“¾ï¼Œç ´åè®¾è®¡ã€‚</p>
<h2 data-id="heading-5">é—®é¢˜æ¥äº†</h2>
<p>Java <strong>åªç»™äº†ä½ ä¸€ä¸ªâ€œç»§æ‰¿â€å…³é”®å­—</strong>ï¼Œå´è®©ä½ åŒæ—¶å¹²è¿™ä¸‰ä»¶äº‹ã€‚</p>
<p>ç»“æœï¼š</p>
<ul>
<li>ä½ ä»¥ä¸ºä½ åœ¨â€œåˆ†ç±»â€ï¼ˆæ­£æ–¹å½¢æ˜¯çŸ©å½¢ï¼‰ï¼Œ</li>
<li>ä½†ç¨‹åºè¦æ±‚ä½ â€œèƒ½æ›¿æ¢â€ï¼ˆæ­£æ–¹å½¢å¿…é¡»èƒ½å½“çŸ©å½¢ç”¨ï¼‰ï¼Œ</li>
<li>è€Œä½ å®é™…åªæ˜¯ä¸ºäº†â€œçœä»£ç â€ï¼ˆä¸æƒ³é‡å¤å†™å®½é«˜è®¾ç½®ï¼‰ã€‚</li>
</ul>
<p><strong>ä¸‰ä»¶äº‹æ··åœ¨ä¸€èµ·ï¼Œå¿…ç„¶å‡ºé—®é¢˜ï¼</strong></p>
<p>å°±åƒå…¬å¸é‡Œé¢çš„å›¢é˜Ÿï¼Œè™½ç„¶å¤§å®¶éƒ½å±äºåŒä¸€ä¸ªç»„ï¼Œä½†æ˜¯å¦‚æœç›®æ ‡ä¸ä¸€è‡´ï¼Œè¿™å¿…ç„¶å¯¼è‡´å¼€å‘é—®é¢˜ï¼</p>
<h2 data-id="heading-6">é‚£æ€ä¹ˆåŠ</h2>
<p>è¿™æ˜¯æˆ‘åæ¥ï¼Œæ‰å­¦åˆ°çš„çŸ¥è¯†ã€‚</p>
<p><strong>åˆ«ç”¨â€œç»§æ‰¿â€å¹²æ‰€æœ‰äº‹ï¼åˆ†å¼€å¤„ç†ï¼š</strong></p>





















<table><thead><tr><th>ä½ æƒ³å¹²å•¥</th><th>æ­£ç¡®åšæ³•</th></tr></thead><tbody><tr><td><strong>æƒ³åˆ†ç±»ï¼Ÿ</strong></td><td>ç”¨<strong>é¢†åŸŸæ¨¡å‹</strong>ç”»å›¾å°±è¡Œï¼Œåˆ«éå¡è¿›ä»£ç ç»§æ‰¿æ ‘é‡Œã€‚</td></tr><tr><td><strong>æƒ³ä¿è¯èƒ½æ›¿æ¢ï¼Ÿ</strong></td><td>ç”¨<strong>æ¥å£ï¼ˆInterfaceï¼‰</strong> æˆ– <strong>åè®®ï¼ˆProtocolï¼‰</strong> ï¼Œæ˜ç¡®çº¦å®šè¡Œä¸ºã€‚</td></tr><tr><td><strong>æƒ³çœä»£ç ï¼Ÿ</strong></td><td>ç”¨<strong>ç»„åˆï¼ˆCompositionï¼‰</strong> + <strong>å§”æ‰˜ï¼ˆDelegationï¼‰</strong> ï¼Œæ¯”å¦‚è®© <code>Dog</code> é‡Œé¢â€œåŒ…å«â€ä¸€ä¸ª <code>Eater</code> å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ <code>Animal</code>ã€‚</td></tr></tbody></table>
<p>è¿˜è®°å¾—é‚£å¥ç»å…¸çš„å»ºè®®å—ï¼šâ€œ<strong>ä¼˜å…ˆä½¿ç”¨ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚</strong> â€</p>
<p>æ¥ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ è¦åšâ€œäº¤é€šå·¥å…·â€ç³»ç»Ÿï¼š</p>
<ul>
<li>
<p><strong>é”™è¯¯åšæ³•ï¼ˆç”¨ç»§æ‰¿å¹²ä¸‰ä»¶äº‹ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle</span> { <span class="hljs-keyword">void</span> <span class="hljs-title function_">move</span><span class="hljs-params">()</span> {} }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Vehicle</span> { }      <span class="hljs-comment">// æ˜¯Vehicleï¼Œèƒ½æ›¿æ¢ï¼Œè¿˜å¤ç”¨äº†move()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Airplane</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Vehicle</span> { } <span class="hljs-comment">// åŒä¸Š</span>
</code></pre>
<p>â†’ è¿™å°±æ˜¯æˆ‘æ—©æœŸå¼€å‘ Http æ¡†æ¶æ—¶å€™çš„åšæ³•ã€‚é—®é¢˜æ¥äº†ï¼Œå¦‚æœä»¥ååŠ ä¸ª <code>Hovercraft</code>ï¼ˆæ°”å«èˆ¹ï¼‰ï¼Œå®ƒæ—¢èƒ½èµ°é™†åœ°åˆèƒ½èµ°æ°´ï¼Œç»§æ‰¿å“ªä¸ªï¼Ÿ</p>
</li>
<li>
<p><strong>æ­£ç¡®åšæ³•ï¼ˆåˆ†å¼€å¤„ç†ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Drivable</span> { <span class="hljs-keyword">void</span> <span class="hljs-title function_">drive</span><span class="hljs-params">()</span>; }
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Flyable</span> { <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>; }

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drivable</span> { ... }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Airplane</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flyable</span> { ... }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Hovercraft</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drivable</span>, Floatable { ... } <span class="hljs-comment">// å¤šå®ç°ï¼Œçµæ´»ï¼</span>
</code></pre>
<p>â†’ åˆ†ç±»å½’åˆ†ç±»ï¼ˆä½ æ˜¯è½¦è¿˜æ˜¯é£æœºï¼‰ï¼Œè¡Œä¸ºå½’è¡Œä¸ºï¼ˆä½ ä¼šå¼€è¿˜æ˜¯ä¼šé£ï¼‰ï¼Œä»£ç å¤ç”¨é ç»„åˆ</p>
<p><em>Java å®ç°å§”æ´¾ä¼šæœ‰äº›éº»çƒ¦ï¼Œå¦‚æœæ˜¯ Kotlinï¼Œå°±æ–¹ä¾¿å¤šäº†ï¼</em></p>
</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>â€œç»§æ‰¿â€å°±åƒä¸€æŠŠç‘å£«å†›åˆ€ï¼Œæœ¬æ¥æƒ³åˆ‡èœã€å¼€ç“¶ã€å‰ªçº¿éƒ½è¡Œï¼Œç»“æœå‘ç°ï¼š<strong>åˆ‡èœæ—¶åˆ€ç‰‡ä¼šå¼¹å‡ºæ¥å‰²æ‰‹ï¼Œå¼€ç“¶æ—¶èºä¸åˆ€åˆç¢äº‹ã€‚</strong></p>
<p>æ‰€ä»¥èªæ˜äººæ€ä¹ˆåšï¼Ÿ</p>
<p><strong>åˆ‡èœç”¨èœåˆ€ï¼Œå¼€ç“¶ç”¨å¼€ç“¶å™¨ï¼Œå‰ªçº¿ç”¨å‰ªåˆ€ã€‚å„å¹²å„çš„ï¼Œäº’ä¸å¹²æ‰°ã€‚</strong></p>
<p>ç¼–ç¨‹ä¹Ÿä¸€æ ·ï¼š</p>
<p><strong>åˆ«æŒ‡æœ›â€œç»§æ‰¿â€è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè¯¥ç”¨æ¥å£ç”¨æ¥å£ï¼Œè¯¥ç”¨ç»„åˆç”¨ç»„åˆã€‚</strong></p>
<p>è¿™æ ·ï¼Œä»£ç æ‰æ¸…çˆ½ï¼Œbug æ‰å°‘ï¼Œè€Œä½ ï¼Œæˆ‘çš„æœ‹å‹ï¼Œæ‰ç¡å¾—ç€è§‰ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue-æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šKeep-Alive]]></title>    <link>https://juejin.cn/post/7601486204174581810</link>    <guid>https://juejin.cn/post/7601486204174581810</guid>    <pubDate>2026-02-02T01:35:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601486204174581810" data-draft-id="7601441797118853171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue-æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šKeep-Alive"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-02T01:35:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue-æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šKeep-Alive
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:35:22.000Z" title="Mon Feb 02 2026 01:35:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨åå°ç®¡ç†ç³»ç»Ÿæˆ–é•¿åˆ—è¡¨é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šä»åˆ—è¡¨è¿›å…¥è¯¦æƒ…é¡µï¼Œè¿”å›æ—¶å¸Œæœ›åˆ—è¡¨æ»šåŠ¨ä½ç½®ã€æœç´¢æ¡ä»¶éƒ½èƒ½å®Œç¾ä¿ç•™ã€‚Vue å†…ç½®çš„ <code>&lt;KeepAlive&gt;</code> æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚æœ¬æ–‡å°†å¸¦ä½ ä»åŸºç¡€ç”¨æ³•å‡ºå‘ï¼Œç›´å‡»å…¶èƒŒåçš„ç¼“å­˜ç®—æ³•åŸç†ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ ä»€ä¹ˆæ˜¯ Keep-Aliveï¼Ÿ</h2>
<p><code>&lt;KeepAlive&gt;</code> æ˜¯ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨äº<strong>ç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹</strong>ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šä¿ç•™ç»„ä»¶çŠ¶æ€ã€é¿å…é‡å¤æ¸²æŸ“ DOMã€æå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè¡¨å•å¤šæ­¥éª¤åˆ‡æ¢ã€åˆ—è¡¨é¡µè¿”å›æµã€è¯¦æƒ…é¡µé¡µç­¾åˆ‡æ¢ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€ åŸºç¡€å®æˆ˜ï¼šç»“åˆ Vue Router å®ç°æŒ‰éœ€ç¼“å­˜</h2>
<p>åœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç»“åˆè·¯ç”±çš„ <code>meta</code> å­—æ®µå’Œ <code>&lt;router-view&gt;</code> çš„æ’æ§½è¯­æ³•æ¥å®ç°ã€‚</p>
<h3 data-id="heading-3">1. è·¯ç”±é…ç½®</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/router/index.ts</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHistory, <span class="hljs-title class_">RouteRecordRaw</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">RouteRecordRaw</span>&gt; = [
    {
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/your-path'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'YourComponentName'</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/YourComponent.vue'</span>),
      <span class="hljs-attr">meta</span>: {
        <span class="hljs-attr">keepAlive</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// è®¾ç½®éœ€è¦ç¼“å­˜</span>
      }
    }
];
</code></pre>
<h3 data-id="heading-4">2. å®¿ä¸»å®¹å™¨é…ç½®</h3>
<p>åœ¨ <code>App.vue</code> æˆ–ä¸»å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œæ¥ç€åœ¨å¯¹åº”<code>&lt;router-view&gt;</code>çš„ä¸­æ’å…¥<code>&lt;keep-alive&gt;</code>ï¼Œå¹¶è®¾ç½®<code>include</code>å±æ€§æ¥åŒ¹é…éœ€è¦ç¼“å­˜çš„ç»„ä»¶</p>
<p>ä»£ç æ®µ</p>
<pre><code class="hljs language-vue" lang="vue">  // includeComponentsä¸ºå¯¹åº”çš„ç»„ä»¶æ–‡ä»¶åç§°
  &lt;router-view v-slot="{ Component }"&gt;
    &lt;KeepAlive :include="includeComponents"&gt;
      &lt;component :is="Component" /&gt;
    &lt;/KeepAlive&gt;
  &lt;/router-view&gt;
</code></pre>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ ç‰¹æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­</h2>
<p>ä¸€æ—¦ç»„ä»¶è¢«ç¼“å­˜ï¼Œå…¶æ­£å¸¸çš„é”€æ¯æµç¨‹å°†è¢«â€œå†»ç»“â€ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸¤ä¸ªä¸“å±é’©å­ï¼š</p>
<ul>
<li><strong><code>activated</code></strong>ï¼šç»„ä»¶<strong>è¢«æ¿€æ´»</strong>ï¼ˆåˆå§‹åŒ–æ¸²æŸ“æˆ–ä»ç¼“å­˜ä¸­æ¢å¤ï¼‰æ—¶è°ƒç”¨ã€‚æ­¤æ—¶å¯é‡æ–°è·å–æ•°æ®æˆ–é‡ç½®æ»šåŠ¨ä½ç½®ã€‚</li>
<li><strong><code>deactivated</code></strong>ï¼šç»„ä»¶<strong>è¢«åœç”¨</strong>ï¼ˆç¦»å¼€å½“å‰è·¯ç”±ï¼‰æ—¶è°ƒç”¨ã€‚æ­¤æ—¶å¯æ¸…ç†å®šæ—¶å™¨æˆ–å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ã€‚</li>
</ul>
<blockquote>
<p><strong>âš ï¸ æ³¨æ„</strong>ï¼šç”±äºç»„ä»¶è¢«ç¼“å­˜ï¼Œ<code>onBeforeUnmount</code> å’Œ <code>onUnmounted</code>ï¼ˆVue 2 ä¸­çš„ <code>beforeDestroy</code> å’Œ <code>destroyed</code>ï¼‰<strong>ä¸ä¼š</strong>è¢«è§¦å‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">å››ã€ æ·±åº¦è¿›é˜¶ï¼šKeep-Alive çš„åº•å±‚åŸç†</h2>
<p><code>&lt;KeepAlive&gt;</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªâ€œæ— æ¸²æŸ“ç»„ä»¶â€ï¼Œå®ƒä¸æ¸²æŸ“å¤šä½™çš„ DOMï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œç»„ä»¶çš„ VNodeã€‚</p>
<h3 data-id="heading-7">1. å†…å­˜ä¸­çš„ Map ç¼“å­˜</h3>
<p><code>Keep-Alive</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>cache</code> å¯¹è±¡ï¼ˆMap ç»“æ„ï¼‰å’Œä¸€ä¸ª <code>keys</code> é˜Ÿåˆ—ï¼ˆArray ç»“æ„ï¼‰ï¼š</p>
<ul>
<li><strong>Cache</strong>ï¼šé”®æ˜¯ç»„ä»¶çš„ <code>key</code>ï¼Œå€¼æ˜¯ç»„ä»¶çš„ <code>vnode</code> å®ä¾‹ã€‚</li>
<li><strong>Keys</strong>ï¼šè®°å½•ç¼“å­˜ç»„ä»¶çš„é¡ºåºã€‚</li>
</ul>
<h3 data-id="heading-8">2. æ¸²æŸ“å‡½æ•°é€»è¾‘</h3>
<p>å½“ <code>render</code> å‡½æ•°æ‰§è¡Œæ—¶ï¼š</p>
<ol>
<li>è·å–å†…éƒ¨åŒ…è£¹çš„ç»„ä»¶èŠ‚ç‚¹ã€‚</li>
<li>æŸ¥æ‰¾ <code>cache</code> ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç»„ä»¶çš„å®ä¾‹ã€‚</li>
<li><strong>å­˜åœ¨</strong>ï¼šç›´æ¥ä»ç¼“å­˜ä¸­è·å–å®ä¾‹ï¼Œå¹¶æ›´æ–°è¯¥ key åœ¨ <code>keys</code> é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼ˆç§»åˆ°æœ€åï¼‰ã€‚</li>
<li><strong>ä¸å­˜åœ¨</strong>ï¼šå°†å…¶åŠ å…¥ç¼“å­˜ã€‚</li>
</ol>
<h3 data-id="heading-9">3. LRU ç¼“å­˜ç­–ç•¥</h3>
<p>å¦‚æœç¼“å­˜çš„ç»„ä»¶è¿‡å¤šï¼Œå†…å­˜ä¼šçˆ†ç‚¸å—ï¼Ÿä¸ä¼šã€‚ Vue ä½¿ç”¨äº† <strong>LRU (Least Recently Used) æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong> ç®—æ³•ã€‚å½“ç¼“å­˜æ•°é‡è¶…è¿‡ <code>max</code> å±æ€§è®¾å®šçš„é˜ˆå€¼æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨é”€æ¯ <code>keys</code> é˜Ÿåˆ—ä¸­æœ€ä¹…æ²¡è¢«è®¿é—®è¿‡çš„é‚£ä¸ªç»„ä»¶å®ä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-10">äº”ã€ æ€»ç»“</h2>
<ol>
<li><strong>ç»„ä»¶åç§° (name)</strong> ï¼š<code>include</code> åŒ¹é…çš„æ˜¯ç»„ä»¶å®šä¹‰çš„ <code>name</code> é€‰é¡¹ã€‚åœ¨ Vue 3 <code>&lt;script setup&gt;</code> ä¸­ï¼Œå¦‚æœä½ æ²¡æœ‰æ˜¾å¼å®šä¹‰ <code>name</code>ï¼ŒVue ä¼šæ ¹æ®æ–‡ä»¶åè‡ªåŠ¨ç”Ÿæˆï¼Œå»ºè®®æ˜¾å¼å®šä¹‰ä»¥é˜²åŒ¹é…å¤±æ•ˆã€‚</li>
<li><strong>å¤šçº§åµŒå¥—è·¯ç”±</strong>ï¼šå¦‚æœä½ çš„ <code>&lt;router-view&gt;</code> å±‚çº§å¾ˆæ·±ï¼Œæ¯ä¸€å±‚éƒ½éœ€è¦é…ç½® <code>&lt;KeepAlive&gt;</code> æ‰èƒ½ä¿è¯æ•´æ¡è·¯å¾„ä¸Šçš„çŠ¶æ€éƒ½è¢«ä¿ç•™ã€‚</li>
<li><strong>Key çš„é‡è¦æ€§</strong>ï¼šåœ¨ <code>&lt;component :is&gt;</code> ä¸Šç»‘å®šæ­£ç¡®çš„ <code>:key</code>ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢åœ¨åˆ‡æ¢ç›¸åŒç»„ä»¶ä¸åŒå‚æ•°ï¼ˆå¦‚ <code>/detail/1</code> åˆ° <code>/detail/2</code>ï¼‰æ—¶å‡ºç°ç¼“å­˜æ··ä¹±ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaé”æ€§èƒ½ä¼˜åŒ–ï¼šä»0åˆ°100çš„å®æˆ˜æŒ‡å—ï¼Œ90%çš„äººéƒ½è¸©è¿‡è¿™äº›å‘]]></title>    <link>https://juejin.cn/post/7601076976443015208</link>    <guid>https://juejin.cn/post/7601076976443015208</guid>    <pubDate>2026-02-01T10:33:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976443015208" data-draft-id="7601076976442998824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaé”æ€§èƒ½ä¼˜åŒ–ï¼šä»0åˆ°100çš„å®æˆ˜æŒ‡å—ï¼Œ90%çš„äººéƒ½è¸©è¿‡è¿™äº›å‘"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-01T10:33:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çˆ±å¨ƒå“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1398234522335383"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaé”æ€§èƒ½ä¼˜åŒ–ï¼šä»0åˆ°100çš„å®æˆ˜æŒ‡å—ï¼Œ90%çš„äººéƒ½è¸©è¿‡è¿™äº›å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234522335383/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çˆ±å¨ƒå“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T10:33:56.000Z" title="Sun Feb 01 2026 10:33:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä¸€ã€åˆ«å†ç”¨synchronizedäº†ï¼ŸèŠèŠé”æ€§èƒ½çš„é‚£äº›äº‹å„¿</h4>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©å’±ä»¬æ¥èŠä¸ªæ‰€æœ‰åç«¯å¼€å‘éƒ½ç»•ä¸å¼€çš„è¯é¢˜â€”â€”åŒæ­¥é”æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>ä¸Šå‘¨ä¼˜åŒ–äº†ä¸€ä¸ªé¡¹ç›®ï¼ŒæŠŠå¹¶å‘é‡ä»500QPSæå‡åˆ°äº†5000QPSï¼Œæ ¸å¿ƒå°±æ”¹äº†å‡ ä¸ªé”çš„ä½¿ç”¨æ–¹å¼ã€‚è¿™è®©æˆ‘æƒ³èµ·åˆšå·¥ä½œæ—¶ï¼Œåªä¼šç”¨synchronizedåŠ åœ¨æ–¹æ³•ä¸Šï¼Œç»“æœå¯¼è‡´ç³»ç»Ÿå¡é¡¿çš„åœºæ™¯ã€‚</p>
<p>é”å°±åƒé«˜é€Ÿå…¬è·¯çš„æ”¶è´¹ç«™ï¼Œç”¨å¯¹äº†èƒ½è®©äº¤é€šæœ‰åºï¼Œç”¨é”™äº†å°±ä¼šå˜æˆå µè½¦çš„å…ƒå‡¶ã€‚ä»Šå¤©æˆ‘å°±æŠŠè¿™äº›å¹´è¸©è¿‡çš„å‘ã€æ€»ç»“çš„ç»éªŒå…¨åˆ†äº«ç»™ä½ ä»¬ï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ çš„é”æ€§èƒ½è‡³å°‘èƒ½æå‡3å€ï¼</p>
<h4 data-id="heading-1">äºŒã€é”çš„åŸºç¡€çŸ¥è¯†ï¼šä»ç†è®ºåˆ°å®è·µ</h4>
<p><strong>1. é”çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
é”çš„æœ¬è´¨æ˜¯è§£å†³å¹¶å‘ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚å°±åƒå…¬å…±å•æ‰€ï¼ŒåŠ é”å°±æ˜¯ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäººèƒ½ä½¿ç”¨ã€‚</p>
<p><strong>2. Javaé‡Œæœ‰å“ªäº›é”ï¼Ÿ</strong></p>
<ul>
<li>å†…ç½®é”ï¼šsynchronized</li>
<li>æ˜¾å¼é”ï¼šReentrantLockã€ReadWriteLock</li>
<li>åŸå­ç±»ï¼šAtomicIntegerç­‰ï¼ˆæ— é”å®ç°ï¼‰</li>
<li>åˆ†å¸ƒå¼é”ï¼šRedisé”ã€ZooKeeperé”</li>
</ul>
<p><strong>3. é”çš„æ€§èƒ½æŒ‡æ ‡</strong></p>
<ul>
<li>é”çš„ç²’åº¦ï¼šé”çš„èŒƒå›´è¶Šå¤§ï¼Œæ€§èƒ½è¶Šå·®</li>
<li>é”çš„ç«äº‰ï¼šç«äº‰è¶Šæ¿€çƒˆï¼Œæ€§èƒ½è¶Šå·®</li>
<li>é”çš„å‡çº§ï¼šä»åå‘é”â†’è½»é‡çº§é”â†’é‡é‡çº§é”ï¼Œæ€§èƒ½é€æ¸ä¸‹é™</li>
</ul>
<h4 data-id="heading-2">ä¸‰ã€å®æˆ˜ä¼˜åŒ–ï¼šä»synchronizedåˆ°ReentrantLock</h4>
<p><strong>1. æ¡ˆä¾‹ï¼šä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå§‹ä»£ç ï¼šæ–¹æ³•çº§synchronized</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    count++;
}
</code></pre>
<p>è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºé”çš„ç²’åº¦å¤ªå¤§ï¼Œæ•´ä¸ªæ–¹æ³•éƒ½è¢«é”ä½äº†ã€‚</p>
<p><strong>2. ä¼˜åŒ–ç¬¬ä¸€æ­¥ï¼šå‡å°é”ç²’åº¦</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜åŒ–åï¼šåªé”å…³é”®ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>) {
        count++;
    }
}
</code></pre>
<p>ä½†è¿™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´é«˜æ•ˆçš„é”ã€‚</p>
<p><strong>3. ä¼˜åŒ–ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ReentrantLock</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        count++;
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }
}
</code></pre>
<p>ReentrantLockæ¯”synchronizedæ›´çµæ´»ï¼Œæ”¯æŒå°è¯•è·å–é”ã€è¶…æ—¶æœºåˆ¶ç­‰ã€‚</p>
<p><strong>4. ä¼˜åŒ–ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨åŸå­ç±»ï¼ˆæ— é”æ–¹æ¡ˆï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    count.incrementAndGet();
}
</code></pre>
<p>å¯¹äºç®€å•è®¡æ•°å™¨ï¼ŒåŸå­ç±»æ€§èƒ½è¿œé«˜äºé”ï¼Œå› ä¸ºå®ƒåŸºäºCASæ“ä½œï¼Œæ— éœ€åŠ é”ã€‚</p>
<h4 data-id="heading-3">å››ã€é«˜çº§æŠ€å·§ï¼šReadWriteLockå’ŒStampedLock</h4>
<p><strong>1. è¯»å†™åˆ†ç¦»ï¼šReadWriteLock</strong>
å¦‚æœä½ çš„åœºæ™¯æ˜¯è¯»å¤šå†™å°‘ï¼ŒReadWriteLockèƒ½æ˜¾è‘—æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReadWriteLock</span> <span class="hljs-variable">rwLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantReadWriteLock</span>();
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">readLock</span> <span class="hljs-operator">=</span> rwLock.readLock();
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">writeLock</span> <span class="hljs-operator">=</span> rwLock.writeLock();

<span class="hljs-comment">// è¯»æ“ä½œ</span>
<span class="hljs-keyword">public</span> Data <span class="hljs-title function_">readData</span><span class="hljs-params">()</span> {
    readLock.lock();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> data;
    } <span class="hljs-keyword">finally</span> {
        readLock.unlock();
    }
}

<span class="hljs-comment">// å†™æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeData</span><span class="hljs-params">(Data newData)</span> {
    writeLock.lock();
    <span class="hljs-keyword">try</span> {
        data = newData;
    } <span class="hljs-keyword">finally</span> {
        writeLock.unlock();
    }
}
</code></pre>
<p><strong>2. ä¹è§‚è¯»å†™ï¼šStampedLock</strong>
Java 8å¼•å…¥çš„StampedLockæä¾›äº†ä¹è§‚è¯»æ¨¡å¼ï¼Œæ€§èƒ½æ¯”ReadWriteLockæ›´é«˜ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">StampedLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StampedLock</span>();

<span class="hljs-comment">// ä¹è§‚è¯»</span>
<span class="hljs-keyword">public</span> Data <span class="hljs-title function_">readDataOptimistic</span><span class="hljs-params">()</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">stamp</span> <span class="hljs-operator">=</span> lock.tryOptimisticRead();
    <span class="hljs-type">Data</span> <span class="hljs-variable">currentData</span> <span class="hljs-operator">=</span> data;
    <span class="hljs-comment">// éªŒè¯æ˜¯å¦æœ‰å†™æ“ä½œå‘ç”Ÿ</span>
    <span class="hljs-keyword">if</span> (!lock.validate(stamp)) {
        <span class="hljs-comment">// å‡çº§ä¸ºæ‚²è§‚è¯»</span>
        stamp = lock.readLock();
        <span class="hljs-keyword">try</span> {
            currentData = data;
        } <span class="hljs-keyword">finally</span> {
            lock.unlockRead(stamp);
        }
    }
    <span class="hljs-keyword">return</span> currentData;
}
</code></pre>
<h4 data-id="heading-4">äº”ã€é”æ€§èƒ½ä¼˜åŒ–çš„10ä¸ªæœ€ä½³å®è·µ</h4>
<ol>
<li><strong>å°½é‡ä½¿ç”¨æ— é”æ–¹æ¡ˆ</strong>ï¼šå¯¹äºç®€å•è®¡æ•°å™¨ã€ç´¯åŠ æ“ä½œï¼Œä¼˜å…ˆä½¿ç”¨Atomicç±»</li>
<li><strong>å‡å°é”ç²’åº¦</strong>ï¼šåªé”å¿…è¦çš„ä»£ç å—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–¹æ³•</li>
<li><strong>é¿å…é”åµŒå¥—</strong>ï¼šé”åµŒå¥—å®¹æ˜“å¯¼è‡´æ­»é”ï¼Œä¸”ä¼šå¢åŠ é”ç«äº‰</li>
<li><strong>ä½¿ç”¨è¯»å†™é”</strong>ï¼šè¯»å¤šå†™å°‘åœºæ™¯ç”¨ReadWriteLockï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–ç”¨StampedLock</li>
<li><strong>é”åˆ†ç¦»</strong>ï¼šä¸åŒä¸šåŠ¡é€»è¾‘ç”¨ä¸åŒçš„é”ï¼Œé¿å…ç«äº‰</li>
<li><strong>é¿å…åœ¨é”å†…æ‰§è¡Œè€—æ—¶æ“ä½œ</strong>ï¼šå¦‚ç½‘ç»œè¯·æ±‚ã€IOæ“ä½œç­‰</li>
<li><strong>ä½¿ç”¨concurrentåŒ…</strong>ï¼šConcurrentHashMapã€CopyOnWriteArrayListç­‰çº¿ç¨‹å®‰å…¨é›†åˆæ€§èƒ½æ›´å¥½</li>
<li><strong>é”çš„å…¬å¹³æ€§</strong>ï¼šéå¿…è¦ä¸ä½¿ç”¨å…¬å¹³é”ï¼Œå…¬å¹³é”æ€§èƒ½æ¯”éå…¬å¹³é”å·®</li>
<li><strong>è€ƒè™‘ä½¿ç”¨åˆ†æ®µé”</strong>ï¼šå¦‚ConcurrentHashMapçš„å®ç°æ–¹å¼</li>
<li><strong>ç›‘æ§é”ç«äº‰</strong>ï¼šä½¿ç”¨JDKè‡ªå¸¦çš„jstackã€jconsoleç­‰å·¥å…·ç›‘æ§é”ç«äº‰æƒ…å†µ</li>
</ol>
<h4 data-id="heading-5">å…­ã€è¸©è¿‡çš„å‘ï¼šé”ä¼˜åŒ–çš„åé¢æ•™æ</h4>
<p><strong>1. è¿‡åº¦ä¼˜åŒ–</strong>
æ›¾ç»ä¸ºäº†ä¼˜åŒ–ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼Œä½¿ç”¨äº†å¤æ‚çš„é”ç­–ç•¥ï¼Œç»“æœä»£ç å¯è¯»æ€§ä¸‹é™ï¼Œæ€§èƒ½æå‡å´ä¸æ˜æ˜¾ã€‚åæ¥å‘ç°ç›´æ¥ç”¨AtomicIntegerå°±å¤Ÿäº†ã€‚</p>
<p><strong>2. å¿½ç•¥é”çš„å¯é‡å…¥æ€§</strong>
åœ¨é€’å½’æ–¹æ³•ä¸­ä½¿ç”¨ä¸å¯é‡å…¥é”ï¼Œå¯¼è‡´æ­»é”ã€‚è®°ä½ï¼šsynchronizedå’ŒReentrantLockéƒ½æ˜¯å¯é‡å…¥çš„ã€‚</p>
<p><strong>3. é”çš„é”™è¯¯ä½¿ç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šæ¯æ¬¡æ–¹æ³•è°ƒç”¨åˆ›å»ºæ–°é”</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    lock.lock();
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>é”å¯¹è±¡åº”è¯¥æ˜¯å…¨å±€çš„ï¼Œè€Œä¸æ˜¯æ–¹æ³•å†…éƒ¨åˆ›å»ºçš„ã€‚</p>
<h4 data-id="heading-6">ä¸ƒã€å†™åœ¨æœ€å</h4>
<p>é”æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªéœ€è¦ä¸æ–­å®è·µå’Œæ€»ç»“çš„è¿‡ç¨‹ã€‚æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰æœ€é€‚åˆç‰¹å®šåœºæ™¯çš„æ–¹æ¡ˆã€‚</p>
<p>è®°ä½ï¼šä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–ï¼Œå…ˆæµ‹é‡ï¼Œåä¼˜åŒ–ã€‚ä½¿ç”¨JMHï¼ˆJava Microbenchmark Harnessï¼‰ç­‰å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œç¡®ä¿ä½ çš„ä¼˜åŒ–çœŸçš„æœ‰æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¢« Redis æŠ›å¼ƒçš„ Windowsï¼Œç»ˆäºç­‰æ¥äº†è‡ªå·±çš„ç¼“å­˜æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7601444617695068170</link>    <guid>https://juejin.cn/post/7601444617695068170</guid>    <pubDate>2026-02-01T11:47:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601444617695068170" data-draft-id="7601441475987488814" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¢« Redis æŠ›å¼ƒçš„ Windowsï¼Œç»ˆäºç­‰æ¥äº†è‡ªå·±çš„ç¼“å­˜æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Redis"/> <meta itemprop="datePublished" content="2026-02-01T11:47:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¯ä»¶æ±‚ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1038379932466263"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¢« Redis æŠ›å¼ƒçš„ Windowsï¼Œç»ˆäºç­‰æ¥äº†è‡ªå·±çš„ç¼“å­˜æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1038379932466263/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¯ä»¶æ±‚ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T11:47:55.000Z" title="Sun Feb 01 2026 11:47:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£å¤©å‡Œæ™¨ä¸€ç‚¹åŠï¼Œæˆ‘æ­£ååœ¨å·¥ä½ä¸Šï¼Œæ‰‹é‡Œæ§ç€ä¸€æ¯å·²ç»å‡‰é€çš„å’–å•¡ï¼Œç›¯ç€ç›‘æ§å¤§å±ã€‚Redis å»¶è¿Ÿæ›²çº¿å¾ˆç¨³ï¼ŒQPS ä¹Ÿå¾ˆå¥åº·ï¼Œä¸€åˆ‡éƒ½å¾ˆç¾å¥½ã€‚å”¯ä¸€ä¸ç¾å¥½çš„ï¼Œæ˜¯æˆ‘ä»¬éš”å£å·¥ä½è€ç‹çš„è„¸è‰²ã€‚</p>
<p>è€ç‹è´Ÿè´£çš„æ˜¯ä¸€ä¸ª<strong>å…¨ Windows Server ç¯å¢ƒ</strong>çš„é¡¹ç›®ï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼š<strong>å†å²åŒ…è¢± + å•†ä¸šè½¯ä»¶ä¾èµ– + å®¢æˆ·æŒ‡å®šæ“ä½œç³»ç»Ÿ</strong>ã€‚</p>
<p>äºæ˜¯é—®é¢˜æ¥äº†ï¼šâ€œå°ç±³å•Šï¼ŒRedis åœ¨ Windows ä¸ŠçœŸçš„å°±åªèƒ½é ç¬¬ä¸‰æ–¹ç§»æ¤å—ï¼Ÿå°±æ²¡æœ‰ä¸€ä¸ªåŸç”Ÿã€æ­£ç»ã€å®˜æ–¹æ”¯æŒ Windows çš„ç¼“å­˜æ–¹æ¡ˆå—ï¼Ÿâ€</p>
<p>æˆ‘å½“æ—¶çš„ç¬¬ä¸€ååº”ä½ è‚¯å®šä¹ŸçŒœåˆ°äº†ï¼š <strong>â€œå…„å¼Ÿï¼ŒRedis å®˜æ–¹éƒ½ä¸æ”¯æŒ Windowsï¼Œä½ å°±åˆ«æŠ˜è…¾äº†ï¼Œè€è€å®å®ä¸Š Linux å§ã€‚â€</strong></p>
<p>è€ç‹æ²‰é»˜äº†ä¸‰ç§’ï¼Œç„¶åå¹½å¹½åœ°è¯´äº†ä¸€å¥ï¼šâ€œå¾®è½¯ä¸æ˜¯ä¹Ÿåšæ•°æ®åº“ã€åšç¼“å­˜å—ï¼Ÿâ€</p>
<p>æˆ‘å½“åœºä¸€æ„£ã€‚é‚£å¤©æ™šä¸Šï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç‚¹è¿›äº†ä¸€ä¸ª GitHub é¡¹ç›®<strong>Project Garnet</strong>ã€‚</p>
<h2 data-id="heading-0">Redis å°±åƒä¸€è¾†æ‰‹åŠ¨æŒ¡è·‘è½¦ï¼Œè€Œ Windows ä¸€ç›´æƒ³è¦â€œè‡ªåŠ¨æŒ¡â€</h2>
<p>åœ¨è¿›å…¥ Garnet ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠèƒŒæ™¯æ‹æ¸…æ¥šã€‚<strong>Redis ä¸ºå•¥ä¸€ç›´ä¸å¾…è§ Windowsï¼Ÿ</strong></p>
<p>ä½ ä¸€å®šå¬è¿‡è¿™äº›ç»å…¸ç­”æ¡ˆï¼š</p>
<ul>
<li>Redis æ˜¯<strong>å•çº¿ç¨‹äº‹ä»¶å¾ªç¯</strong></li>
<li>æ·±åº¦ä¾èµ– epoll / fork / mmap</li>
<li>Linux æ˜¯ Redis çš„â€œä¸»åœºâ€</li>
</ul>
<p>ç”¨ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š<strong>Redis æ˜¯ä¸º Linux é•¿å‡ºæ¥çš„ï¼Œä¸æ˜¯ç§»æ¤è¿‡æ¥çš„ã€‚</strong></p>
<p>è¿™å°±å¥½æ¯”ï¼š</p>
<ul>
<li>Redis æ˜¯ä¸€è¾† <strong>æ‰‹åŠ¨æŒ¡ + åé©± + é«˜è½¬é€Ÿè·‘è½¦</strong></li>
<li>Linux æ˜¯ä¸€æ¡ <strong>å°é—­èµ›é“</strong></li>
<li>è€Œ Windows æ›´åƒä¸€æ¡ <strong>åŸå¸‚é«˜æ¶ + è‡ªåŠ¨æŒ¡éœ€æ±‚</strong></li>
</ul>
<p>ä½ ç¡¬è¦æŠŠè·‘è½¦ä¸¢è¿›æ—©æ™šé«˜å³°çš„é«˜æ¶è·¯ï¼Œèƒ½è·‘ï¼Œä½†å¹¶ä¸ä¼˜é›…ã€‚</p>
<h2 data-id="heading-1">Garnet æ˜¯è°ï¼Ÿå®ƒæƒ³å¹²ä»€ä¹ˆï¼Ÿ</h2>
<p>å¥½ï¼Œç°åœ¨ä¸»è§’ç™»åœºã€‚<strong>Garnet = å¾®è½¯å‡ºå“çš„é«˜æ€§èƒ½å†…å­˜ KV å­˜å‚¨å¼•æ“</strong></p>
<p>å®ƒçš„å®šä½éå¸¸æ¸…æ™°ï¼š<strong>åœ¨ Windows / .NET ç”Ÿæ€ä¸‹ï¼Œæä¾›ä¸€ä¸ª Redis é£æ ¼ã€é«˜æ€§èƒ½ã€ç°ä»£åŒ–çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å®ƒä¸æ˜¯ Redis çš„ç®€å•å¤åˆ»ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>åè®®å…¼å®¹ Redis</strong></li>
<li><strong>æ¶æ„é‡æ–°è®¾è®¡</strong></li>
<li><strong>æ·±åº¦æ‹¥æŠ± Windows + .NET</strong></li>
</ul>
<p>å¦‚æœ Redis æ˜¯ä¸€ä½â€œLinux åŸæ•™æ—¨ä¸»ä¹‰è€…â€ï¼Œé‚£ Garnet æ›´åƒæ˜¯ï¼š<strong>ç©¿ç€è¥¿è£…ã€ä¼šè®² C#ã€ç²¾é€š Windows å†…æ ¸çš„å·¥ç¨‹å¸ˆã€‚</strong></p>
<h2 data-id="heading-2">æ‰“ä¸ªæ¯”æ–¹ï¼šRedis å’Œ Garnet åƒä»€ä¹ˆï¼Ÿ</h2>
<p>æˆ‘æœ€å–œæ¬¢ç”¨ç”Ÿæ´»é‡Œçš„ä¸œè¥¿è§£é‡ŠæŠ€æœ¯ã€‚</p>
<p><strong>1ã€Redis åƒä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>ä¸€å®¶ç¥–ä¼ æ‰‹æ“€é¢é¦†</strong></p>
<ul>
<li>é…æ–¹ç»å…¸</li>
<li>æ‰‹è‰ºç²¾æ¹›</li>
<li>åœ¨ Linux è¿™æ¡è€è¡—ä¸Šæ— äººèƒ½æ•Œ</li>
<li>ä½†ä½ è¦å®ƒè¿›å•†åœºã€è¿›å†™å­—æ¥¼ã€é€‚é…æ–°ç³»ç»Ÿï¼Œå°±æœ‰ç‚¹åˆ«æ‰­</li>
</ul>
<p><strong>2ã€Garnet åƒä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>ä¸€å®¶è¿é”ç²¾å“å’–å•¡å“ç‰Œ</strong></p>
<ul>
<li>æ ‡å‡†åŒ–</li>
<li>å·¥ä¸šçº§</li>
<li>å¤©ç”Ÿé€‚é…å†™å­—æ¥¼ï¼ˆWindowsï¼‰</li>
<li>èƒ½ç›´æ¥æ¥å…¥ç°ä»£åŒ–ç³»ç»Ÿï¼ˆ.NETã€Azureï¼‰</li>
</ul>
<h2 data-id="heading-3">Garnet çš„æ ¸å¿ƒè®¾è®¡æ€è·¯</h2>
<p>ä¸‹é¢è¿™æ®µæ˜¯é‡ç‚¹ï¼Œç¨å¾®â€œæŠ€æœ¯å‘³â€ä¼šæµ“ä¸€ç‚¹ã€‚Garnet çš„å‡ ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e77f148ce30046b4b68d54afeff37fde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=rgqm%2BCWKII%2FS9Ovvg20Bjer5LiI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸€å¥è¯æ€»ç»“ï¼š<strong>Garnet æ›´åƒä¸€ä¸ªâ€œç¼“å­˜å¼•æ“å¹³å°â€ï¼Œè€Œä¸åªæ˜¯ä¸€ä¸ªç¼“å­˜æœåŠ¡ã€‚</strong></p>
<h2 data-id="heading-4">å®ƒæ˜¯æ€ä¹ˆåšåˆ°â€œå¿«â€çš„ï¼Ÿ</h2>
<p>å¦‚æœä½ å¯¹ Redis ç†Ÿæ‚‰ï¼Œé‚£ä½ ä¸€å®šçŸ¥é“å®ƒçš„å¿«æ¥è‡ªï¼š</p>
<ul>
<li>å†…å­˜</li>
<li>å•çº¿ç¨‹</li>
<li>ç®€å•æ•°æ®ç»“æ„</li>
</ul>
<p>è€Œ Garnet çš„å¿«ï¼Œæ€è·¯æœ‰ç‚¹ä¸ä¸€æ ·ã€‚</p>
<p>Garnet çš„æ€§èƒ½ç­–ç•¥ï¼š</p>
<ul>
<li><strong>å¤šçº¿ç¨‹ + async IO</strong></li>
<li><strong>Log-Structured å­˜å‚¨è®¾è®¡</strong></li>
<li><strong>CPU cache-friendly æ•°æ®å¸ƒå±€</strong></li>
<li><strong>ç°ä»£ NUMA / å¤šæ ¸ä¼˜åŒ–</strong></li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆï¼šRedis æ˜¯â€œä¸€ä¸ªäººæŠŠæ´»å¹²åˆ°æè‡´â€ï¼ŒGarnet æ˜¯â€œä¸€ç¾¤äººé…åˆæŠŠæ´»å¹²åˆ°æè‡´â€</p>
<h2 data-id="heading-5">ç›´æ¥ä¸Šä»£ç ï¼š5 åˆ†é’Ÿè·‘ä¸€ä¸ª Garnet</h2>
<p>è¯´å†å¤šï¼Œä¸å¦‚è·‘ä¸€è·‘ã€‚</p>
<p><strong>1ã€å¯åŠ¨ Garnet æœåŠ¡</strong></p>
<p>å¦‚æœä½ åœ¨ Windows ä¸Šï¼Œå¯ä»¥ç›´æ¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67c4aa0e6df244ffa6e36466c9dc3bc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=ZigNFoiP5O9uhVQjzKCYriSGO10%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/866526461eed4d8fb800994c2e185195~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=WYF01k59WNSQNSeMitRawUtyvWI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ²¡é”™ï¼Œ<strong>ç«¯å£éƒ½æ˜¯ Redis é»˜è®¤ç«¯å£</strong>ã€‚</p>
<p><strong>2ã€ä½¿ç”¨ redis-cli è¿æ¥</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88332fc041c14ea6a756796c022d656f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=NpU4yP04fcQmi886t9ssEnTnPFo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç„¶åè¯•è¯•ç†Ÿæ‚‰çš„å‘½ä»¤ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/506a31c1e3154537a872c12e906923b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=Vx0C6R%2Bq0MJ3xxgrJ3T46d7iBbo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¾“å‡ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe139ce4a6e498b8667229947835ace~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=wfPx89C7Ety8%2Btu4AQAqPY%2B4gqk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è€ç‹å½“åœºçªå¤§äº†çœ¼ç›ï¼šâ€œè¿™â€¦â€¦ä¸å°±æ˜¯ Redis å—ï¼Ÿâ€</p>
<h2 data-id="heading-6">åœ¨ .NET é‡ŒåµŒå…¥ Garnetï¼ˆé‡ç‚¹ç©æ³•ï¼‰</h2>
<p>è¿™æ˜¯ Garnet æœ€æœ‰æ„æ€çš„åœ°æ–¹ã€‚Redis æ˜¯ä¸€ä¸ªâ€œå¤–éƒ¨æœåŠ¡â€ï¼ŒGarnet å¯ä»¥æ˜¯ä¸€ä¸ªâ€œåº“â€ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šåœ¨ .NET åº”ç”¨ä¸­åµŒå…¥</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dda39198f4b4323bf3be5e6ddb349b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=K0gvb6E5zJxpPWPWGTPL8O7oB6I%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆï¼š<strong>ç¼“å­˜ï¼Œä¸å†æ˜¯â€œéš”å£æœºæˆ¿çš„ä¸€ä¸ªæœåŠ¡â€ï¼Œè€Œæ˜¯ä½ åº”ç”¨é‡Œçš„ä¸€ä¸ªç»„ä»¶ã€‚</strong></p>
<h2 data-id="heading-7">Redis vs Garnetï¼Œæ”¾åœ¨ä¸€å¼ è¡¨é‡Œçœ‹</h2>
<p>è¿™æ˜¯å¤§å®¶æœ€å…³å¿ƒçš„éƒ¨åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4f7fab96b8843139b6a23e79e97d078~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770551275&amp;x-signature=b1SW7%2FHeDtgapuTGbbuUaHdtjZs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>ç»“è®ºä¸€å¥è¯ï¼š</strong> Redis æ˜¯â€œæˆç†Ÿè€å°†â€ï¼ŒGarnet æ˜¯â€œæ½œåŠ›æ–°ç§€â€ã€‚</p>
<h2 data-id="heading-8">é‚£ Garnet èƒ½ä¸èƒ½â€œæ›¿ä»£ Redisâ€ï¼Ÿ</h2>
<p>æˆ‘å¾ˆè´Ÿè´£ä»»åœ°è¯´ä¸€å¥ï¼š<strong>ä¸æ˜¯ç°åœ¨ï¼Œä¸æ˜¯å…¨éƒ¨ï¼Œä½†åœ¨æŸäº›åœºæ™¯ï¼Œéå¸¸åˆé€‚ã€‚</strong></p>
<p><strong>1ã€é€‚åˆ Garnet çš„åœºæ™¯</strong></p>
<ul>
<li>Windows Server ç¯å¢ƒ</li>
<li>.NET æŠ€æœ¯æ ˆ</li>
<li>ä¸æƒ³å¼•å…¥ Linux è¿ç»´æˆæœ¬</li>
<li>å¯¹ Redis é«˜çº§ç‰¹æ€§ä¾èµ–ä¸æ·±</li>
<li>æ›´çœ‹é‡å¯åµŒå…¥ã€å¯æ§æ€§</li>
</ul>
<p><strong>2ã€ä¸é€‚åˆçš„åœºæ™¯</strong></p>
<ul>
<li>é‡åº¦ Redis Module</li>
<li>Lua è„šæœ¬ä¾èµ–</li>
<li>Redis Cluster æ·±åº¦ä½¿ç”¨</li>
<li>è¶…å¤§è§„æ¨¡æˆç†Ÿç”Ÿäº§é›†ç¾¤</li>
</ul>
<h2 data-id="heading-9">æ€»ç»“ï¼šç¼“å­˜ä¸–ç•Œæ­£åœ¨å˜å¾—æ›´â€œå¤šå…ƒâ€</h2>
<p>é‚£å¤©å‡Œæ™¨ï¼Œè€ç‹æœ€åæ‹äº†æ‹æˆ‘çš„è‚©è†€ï¼šâ€œè‡³å°‘ï¼Œæˆ‘ç»ˆäºä¸æ˜¯é‚£ä¸ªâ€˜éè¦ä¸Š Linuxâ€™çš„äººäº†ã€‚â€</p>
<p>æˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä»¶äº‹ï¼š<strong>Redis ä¸æ˜¯ç¼“å­˜çš„å…¨éƒ¨ï¼Œåªæ˜¯ç¼“å­˜ä¸–ç•Œé‡Œæœ€äº®çš„é‚£é¢—æ˜Ÿã€‚</strong></p>
<p>è€Œ Garnet çš„å‡ºç°ï¼Œè‡³å°‘è¯´æ˜äº†ä¸€ç‚¹ï¼š<strong>Windows é˜µè¥ï¼Œä¹Ÿç»ˆäºæœ‰äº†ä¸€ä¸ªâ€œè®¤çœŸå¯¹å¾…ç¼“å­˜â€çš„ç­”æ¡ˆã€‚</strong></p>
<h2 data-id="heading-10">END</h2>
<p>å¦‚æœä½ æ­£åœ¨ï¼š</p>
<ul>
<li>è¢« Windows ç¯å¢ƒé™åˆ¶</li>
<li>è¢« Redis å®˜æ–¹ä¸æ”¯æŒæŠ˜ç£¨</li>
<li>æˆ–è€…åªæ˜¯å•çº¯æƒ³çœ‹çœ‹æ–°ä¸œè¥¿</li>
</ul>
<p>é‚£æˆ‘çœŸå¿ƒå»ºè®®ä½ ï¼š<strong>è¯•è¯• Garnetï¼Œå“ªæ€•åªæ˜¯è·‘ä¸€è·‘ã€‚</strong></p>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ä¸€ç‚¹ç‚¹å¸®åŠ©ï¼Œæ¬¢è¿ <strong>ç‚¹èµã€åœ¨çœ‹ã€è½¬å‘</strong>ï¼Œæˆ‘ä»¬ä¸‹æ¬¡ç»§ç»­èŠç‚¹æœ‰æ„æ€çš„æŠ€æœ¯ã€‚</p>
<p>æˆ‘æ˜¯å°ç±³ï¼Œä¸€ä¸ªå–œæ¬¢åˆ†äº«æŠ€æœ¯çš„31å²ç¨‹åºå‘˜ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€œ<strong>è½¯ä»¶æ±‚ç”Ÿ</strong>â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å¹²è´§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL å”¯ä¸€ç´¢å¼•å¹¶å‘æ’å…¥æ­»é”é—®é¢˜æ’æŸ¥ä¸ä¼˜åŒ–æ–¹æ¡ˆè®°å½•]]></title>    <link>https://juejin.cn/post/7601159804491137043</link>    <guid>https://juejin.cn/post/7601159804491137043</guid>    <pubDate>2026-02-01T11:50:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601159804491137043" data-draft-id="7601073900526207018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL å”¯ä¸€ç´¢å¼•å¹¶å‘æ’å…¥æ­»é”é—®é¢˜æ’æŸ¥ä¸ä¼˜åŒ–æ–¹æ¡ˆè®°å½•"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-02-01T11:50:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹é»ä¸–çš„æµ·è§’"/> <meta itemprop="url" content="https://juejin.cn/user/1425426861536445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL å”¯ä¸€ç´¢å¼•å¹¶å‘æ’å…¥æ­»é”é—®é¢˜æ’æŸ¥ä¸ä¼˜åŒ–æ–¹æ¡ˆè®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425426861536445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹é»ä¸–çš„æµ·è§’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T11:50:42.000Z" title="Sun Feb 01 2026 11:50:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜ç°è±¡</h2>
<p>æœ€è¿‘å‡ å‘¨è§‚æµ‹çº¿ä¸ŠæœåŠ¡çš„ä¸šåŠ¡å‘Šè­¦ç›‘æ§ç¾¤ï¼ŒæŠ¥å‡ºäº†å‡ æ¬¡ <strong>MySQL Deadlock é”™è¯¯ï¼ˆError 1213ï¼‰</strong> ï¼Œç”±äºåº”ç”¨æœåŠ¡æ—¥å¿—è·å–ä¸åˆ°mysqlç›¸å…³çš„æ—¥å¿—ï¼Œè”ç³»DBAåŒå­¦è·å–åˆ°äº†æ­»é”çš„ç›¸å…³æ—¥å¿—ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LATEST DETECTED DEADLOCK
...
<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> (<span class="hljs-number">1</span>) TRANSACTION:
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_xxx (...) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'mp_data'</span>, <span class="hljs-string">'app_trip_...'</span>, <span class="hljs-string">'answer_cnt'</span>)
...
<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> (<span class="hljs-number">2</span>) TRANSACTION:
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_xxx (...) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'mp_data_dev'</span>, <span class="hljs-string">'app_trip_...'</span>, <span class="hljs-string">'answer_cnt'</span>)
...
<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> WE ROLL BACK TRANSACTION (<span class="hljs-number">2</span>)
</code></pre>
<p>åŸå› æ˜¯ä¸¤ä¸ªå‡ ä¹åŒæ—¶æ‰§è¡Œçš„ <code>INSERT</code> è¯­å¥äº§ç”Ÿæ­»é”å¯¼è‡´å…¶ä¸­ä¸€ä¸ªäº‹åŠ¡è¢«å›æ»šï¼Œå½±å“ä¸šåŠ¡å†™å…¥æˆåŠŸç‡ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è¡¨ç»“æ„åˆ†æ</h2>
<p>æ¶‰åŠè¡¨ï¼š<code>tb_xxx</code></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">CREATE</span> <span class="hljs-selector-tag">TABLE</span> `<span class="hljs-selector-tag">tb_xxx</span>` (
  <span class="hljs-built_in">`id`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> NULL AUTO_INCREMENT,
  ...
  <span class="hljs-built_in">`engine_type`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> NULL DEFAULT <span class="hljs-string">'1'</span>,
  <span class="hljs-built_in">`db_name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> NULL DEFAULT <span class="hljs-string">''</span>,
  <span class="hljs-built_in">`table_name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">NOT</span> NULL DEFAULT <span class="hljs-string">''</span>,
  <span class="hljs-built_in">`column_name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">NOT</span> NULL DEFAULT <span class="hljs-string">''</span>,
  PRIMARY KEY (<span class="hljs-built_in">`id`</span>),
  UNIQUE KEY <span class="hljs-built_in">`uniq_tab_col`</span> (<span class="hljs-built_in">`engine_type`</span>,<span class="hljs-built_in">`db_name`</span>,<span class="hljs-built_in">`table_name`</span>,<span class="hljs-built_in">`column_name`</span>)
) <span class="hljs-selector-tag">ENGINE</span>=<span class="hljs-selector-tag">InnoDB</span>;
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>å­˜åœ¨ä¸€ä¸ª <strong>å››å­—æ®µè”åˆå”¯ä¸€ç´¢å¼• <code>uniq_tab_col</code></strong></li>
<li>éš”ç¦»çº§åˆ«ä¸º MySQL é»˜è®¤çš„ <strong>REPEATABLE READï¼ˆRRï¼‰</strong></li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æ­»é”åŸå› åˆ†æ</h2>
<h3 data-id="heading-3">1. æ­»é”æœ¬è´¨</h3>
<p>åœ¨ <strong>RR éš”ç¦»çº§åˆ«</strong>ä¸‹ï¼ŒInnoDB ä¸ºä¿è¯å”¯ä¸€æ€§çº¦æŸå’Œé˜²æ­¢å¹»è¯»ï¼Œä¼šåœ¨æ’å…¥å‰å¯¹ç›®æ ‡ç´¢å¼•ä½ç½®åŠ  <strong>é—´éš™é”ï¼ˆGap Lockï¼‰</strong> å’Œ <strong>æ’å…¥æ„å‘é”ï¼ˆInsert Intention Lockï¼‰</strong> ã€‚</p>
<h3 data-id="heading-4">2. å…·ä½“åœºæ™¯</h3>
<ul>
<li>
<p>ä¸¤ä¸ªäº‹åŠ¡å¹¶å‘æ’å…¥ <strong>åœ¨å”¯ä¸€ç´¢å¼•æ’åºä¸Šç›¸é‚»çš„è®°å½•</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>T1: <code>(1, 'mp_data', ..., 'answer_cnt')</code></li>
<li>T2: <code>(1, 'mp_data_dev', ..., 'answer_cnt')</code></li>
</ul>
</li>
<li>
<p>è™½ç„¶å­—æ®µ <code>db_name</code> çš„å†…å®¹ä¸åŒï¼Œä½†å› å­—ç¬¦ä¸²æ’åºç›¸é‚»ï¼ˆ<code>'mp_data' &lt; 'mp_data_dev'</code>ï¼‰ï¼Œ<strong>è½åœ¨åŒä¸€ç´¢å¼•é—´éš™ï¼ˆgapï¼‰å†…</strong></p>
</li>
<li>
<p>ä¸¤ä¸ªäº‹åŠ¡äº’ç›¸æŒæœ‰å¯¹æ–¹æ‰€éœ€çš„é—´éš™é”ï¼Œå½¢æˆ <strong>å¾ªç¯ç­‰å¾… â†’ æ­»é”</strong></p>
</li>
</ul>
<blockquote>
<p>âœ… å…¸å‹çš„ â€œå¹¶å‘æ’å…¥ç›¸é‚»å”¯ä¸€ç´¢å¼•å€¼â€ å¯¼è‡´çš„æ­»é”ï¼Œå±äº InnoDB åœ¨ RR æ¨¡å¼ä¸‹çš„æ­£å¸¸è¡Œä¸ºï¼Œä½†éœ€åº”ç”¨å±‚è§„é¿ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">âœ… ä¸»æ–¹æ¡ˆï¼šæ”¹ç”¨å¹‚ç­‰æ’å…¥è¯­å¥</h3>
<p>å°†åŸå§‹ <code>INSERT</code> æ”¹ä¸ºä»¥ä¸‹ä»»ä¸€å½¢å¼ï¼Œ<strong>ä»æ ¹æœ¬ä¸Šé¿å…æ­»é” + å®ç°å¹‚ç­‰</strong>ï¼š</p>
<h3 data-id="heading-7">æ–¹å¼ä¸€ï¼š<code>INSERT IGNORE</code></h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> IGNORE <span class="hljs-keyword">INTO</span> tb_xxx
(engine_type, db_name, table_name, column_name)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'mp_data'</span>, <span class="hljs-string">'xxx'</span>, <span class="hljs-string">'yyy'</span>);
</code></pre>
<ul>
<li>è‹¥å”¯ä¸€é”®å†²çªï¼Œé™é»˜è·³è¿‡ï¼Œä¸æŠ¥é”™</li>
<li>é€‚ç”¨äºâ€œå­˜åœ¨åˆ™å¿½ç•¥ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºâ€åœºæ™¯</li>
</ul>
<h3 data-id="heading-8">æ–¹å¼äºŒï¼š<code>INSERT ... ON DUPLICATE KEY UPDATE</code></h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_xxx
(engine_type, db_name, table_name, column_name)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'mp_data'</span>, <span class="hljs-string">'xxx'</span>, <span class="hljs-string">'yyy'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span>
gmt_modified <span class="hljs-operator">=</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>;
</code></pre>
<ul>
<li>å†²çªæ—¶å¯é€‰æ‹©æ›´æ–°ï¼ˆå¦‚åˆ·æ–°ä¿®æ”¹æ—¶é—´ï¼‰</li>
<li>æ›´çµæ´»ï¼Œæ¨èç”¨äºéœ€è®°å½•â€œæœ€åå…³è”æ—¶é—´â€çš„åœºæ™¯</li>
</ul>
<blockquote>
<p>ğŸ’¡ ä¸¤ç§æ–¹å¼å‡å¯æ˜¾è‘—å‡å°‘é—´éš™é”ç«äº‰ï¼ŒInnoDB å†…éƒ¨ä¼˜åŒ–ä½¿å…¶å‡ ä¹ä¸ä¼šåœ¨æ­¤ç±»æ“ä½œä¸­äº§ç”Ÿæ­»é”ã€‚</p>
</blockquote>
<h3 data-id="heading-9">âœ… è¾…åŠ©æ–¹æ¡ˆï¼šåº”ç”¨å±‚æ­»é”é‡è¯•æœºåˆ¶</h3>
<p>å³ä½¿ä¼˜åŒ– SQLï¼Œé«˜å¹¶å‘ä¸‹ä»å¯èƒ½å¶å‘å…¶ä»–ç±»å‹æ­»é”ï¼Œå»ºè®®ç»Ÿä¸€å¢åŠ é‡è¯•é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 3; i++) {</span>
    try {
        mapper.insertIgnore(record)<span class="hljs-comment">;</span>
        break<span class="hljs-comment">;</span>
    } catch (DeadlockLoserDataAccessException e) { // Spring å°è£…
        if (<span class="hljs-attr">i</span> == <span class="hljs-number">2</span>) throw e<span class="hljs-comment">;</span>
        Thread.sleep(10 * (i + 1))<span class="hljs-comment">; // æŒ‡æ•°é€€é¿</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-10">äº”ã€ä¸ºä»€ä¹ˆä¸æ¨èå…¶ä»–æ–¹æ¡ˆï¼Ÿ</h2>





















<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">é™ä½éš”ç¦»çº§åˆ«è‡³ <code>READ COMMITTED</code></td><td align="left">å¯èƒ½å¼•å…¥å¹»è¯»ï¼Œç ´åä¸šåŠ¡ä¸€è‡´æ€§ï¼Œä¸é€‚ç”¨äºå½“å‰æŒ‡æ ‡ç³»ç»Ÿ</td></tr><tr><td align="left">åˆ é™¤å”¯ä¸€ç´¢å¼•</td><td align="left">è¿èƒŒæ•°æ®æ¨¡å‹è®¾è®¡ï¼Œä¼šå¯¼è‡´é‡å¤å…³è”ï¼Œä¸å¯æ¥å—</td></tr><tr><td align="left">åº”ç”¨å±‚å…ˆæŸ¥åæ’</td><td align="left">å¢åŠ  RTï¼Œä¸”ä»å­˜åœ¨ç«æ€æ¡ä»¶ï¼Œæ— æ³•æ ¹æ²»æ­»é”</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">å…­ã€åç»­æ”¹è¿›</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å°†æ‰€æœ‰å¯¹ <code>tb_xxx</code> çš„æ’å…¥æ“ä½œç»Ÿä¸€æ”¹ä¸º <code>INSERT ... ON DUPLICATE KEY UPDATE</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨ DAO å±‚å°è£…å¹‚ç­‰å†™å…¥æ–¹æ³•ï¼Œé¿å…å„å¤„é‡å¤å¤„ç†</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç›‘æ§ Deadlockæ˜¯å¦ä»ç„¶å­˜åœ¨ï¼ŒéªŒè¯ä¼˜åŒ–æ•ˆæœ</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€å‚è€ƒ</h2>
<ul>
<li>MySQL å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Finnodb-locking.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/innodb-locking.html" ref="nofollow noopener noreferrer">InnoDB Locking</a></li>
<li>ã€Šé«˜æ€§èƒ½ MySQLã€‹ç¬¬ 8 ç« ï¼šäº‹åŠ¡ä¸é”</li>
<li>MySQL <code>SHOW ENGINE INNODB STATUS</code> æ­»é”æ—¥å¿—è§£è¯»</li>
</ul>
<hr/>
<blockquote>
<p>æ€»ç»“ï¼šæœ¬æ¬¡æ­»é”ç”±å”¯ä¸€ç´¢å¼•å¹¶å‘æ’å…¥å¼•å‘ï¼Œé€šè¿‡æ”¹ç”¨å¹‚ç­‰æ’å…¥è¯­å¥ï¼ˆINSERT IGNORE / ON DUPLICATE KEY UPDATEï¼‰å¯è§„é¿ï¼ŒåŒæ—¶æå‡ç³»ç»Ÿå¥å£®æ€§ä¸å†™å…¥æˆåŠŸç‡ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rc<T>ï¼šå¼•ç”¨è®¡æ•°ä¸å…±äº«æ‰€æœ‰æƒ]]></title>    <link>https://juejin.cn/post/7601441475987570734</link>    <guid>https://juejin.cn/post/7601441475987570734</guid>    <pubDate>2026-02-01T12:04:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601441475987570734" data-draft-id="7601444617695150090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rc&lt;T&gt;ï¼šå¼•ç”¨è®¡æ•°ä¸å…±äº«æ‰€æœ‰æƒ"/> <meta itemprop="keywords" content="Rust,åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T12:04:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¥ é£å°å®‡å®™"/> <meta itemprop="url" content="https://juejin.cn/user/4037062427148462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rc&lt;T&gt;ï¼šå¼•ç”¨è®¡æ•°ä¸å…±äº«æ‰€æœ‰æƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062427148462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¥ é£å°å®‡å®™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T12:04:52.000Z" title="Sun Feb 01 2026 12:04:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Rust çš„ä¸¥è‹›æ‰€æœ‰æƒæ³•åˆ™ä¸‹ï¼Œä¸€ä¸ªå€¼é€šå¸¸åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚ç„¶è€Œï¼Œç°å®å¼€å‘ä¸­ï¼ˆå¦‚å›¾å½¢ç»“æ„ã€å¤šè·¯æœç´¢æ ‘æˆ– UI æ¡†æ¶ï¼‰ç»å¸¸éœ€è¦<strong>å…±äº«æ‰€æœ‰æƒ</strong>ã€‚<code>Rc&lt;T&gt;</code>ï¼ˆReference Countedï¼‰æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ Rcï¼Ÿ</h2>
<p><code>Rc&lt;T&gt;</code> æ˜¯ä¸€ä¸ªåªè¯»çš„ã€å…·æœ‰å¼•ç”¨è®¡æ•°çš„æ™ºèƒ½æŒ‡é’ˆã€‚å®ƒå…è®¸ä½ åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œå¹¶è®©å¤šä¸ªå˜é‡å…±åŒæ‹¥æœ‰è¿™å—å†…å­˜çš„æ‰€æœ‰æƒã€‚åªæœ‰å½“æœ€åä¸€ä¸ªæ‰€æœ‰è€…é”€æ¯æ—¶ï¼Œå †ä¸Šçš„å†…å­˜æ‰ä¼šè¢«é‡Šæ”¾ã€‚</p>
<blockquote>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š<code>Rc&lt;T&gt;</code> ä»…é€‚ç”¨äº<strong>å•çº¿ç¨‹</strong>åœºæ™¯ã€‚å¦‚æœéœ€è¦è·¨çº¿ç¨‹å…±äº«ï¼Œè¯·ä½¿ç”¨ <code>Arc&lt;T&gt;</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-1">2. å†…å­˜å¸ƒå±€å‰–æ</h2>
<p>å½“ä½ åˆ›å»ºä¸€ä¸ª <code>Rc::new(data)</code> æ—¶ï¼ŒRust ä¼šåœ¨å †ä¸Šåˆ†é…ä¸€ä¸ªç‰¹æ®Šçš„ç»“æ„ä½“ <code>RcBox&lt;T&gt;</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd217313cd5b47c89aa1cf1ffa3fcc13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qWg6aOO5bCP5a6H5a6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770552293&amp;x-signature=SimHStJvHXvTYRX%2B1SBo6KcMF3I%3D" alt="Rc å†…å­˜å¸ƒå±€" loading="lazy"/></p>
<ul>
<li><strong>æ ˆä¸Šï¼ˆStackï¼‰</strong>ï¼š<code>Rc&lt;T&gt;</code> æœ¬èº«æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å †ä¸Šçš„ <code>RcBox</code>ã€‚</li>
<li><strong>å †ä¸Šï¼ˆHeapï¼‰</strong>ï¼š<code>RcBox</code> åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š
<ol>
<li><strong>Strong Count</strong>ï¼šå¼ºå¼•ç”¨è®¡æ•°ã€‚å†³å®šäº†å€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>Weak Count</strong>ï¼šå¼±å¼•ç”¨è®¡æ•°ã€‚è¾…åŠ©å¤„ç†å¾ªç¯å¼•ç”¨ï¼ˆæœ¬æ–‡æš‚ä¸æ·±å…¥æ¢è®¨ï¼‰ã€‚</li>
<li><strong>Value</strong>ï¼šå®é™…å­˜å‚¨çš„æ•°æ® <code>T</code>ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-2">3. å…±äº«æ‰€æœ‰æƒï¼šå¼•ç”¨è®¡æ•°çš„å˜åŒ–</h2>
<p>ä½¿ç”¨ <code>Rc::clone(&amp;rc)</code> ä¸ä¼šæ·±æ‹·è´å †ä¸Šçš„æ•°æ®ï¼Œè€Œåªæ˜¯åœ¨æ ˆä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‡é’ˆï¼Œå¹¶å¢åŠ å †ä¸Šçš„å¼ºå¼•ç”¨è®¡æ•°ã€‚</p>
<blockquote>
<p><strong>åœ°é“å†™æ³•æç¤º</strong>ï¼šåœ¨ Rust ä¸­ï¼Œæˆ‘ä»¬å€¾å‘äºå†™ <code>Rc::clone(&amp;rc)</code> è€Œä¸æ˜¯ <code>rc.clone()</code>ã€‚è™½ç„¶ä¸¤è€…æ•ˆæœç›¸åŒï¼Œä½†å‰è€…èƒ½ä¸€çœ¼çœ‹å‡ºè¿™åªæ˜¯ä¸€ä¸ªå¢åŠ è®¡æ•°çš„â€œå»‰ä»·â€å…‹éš†ï¼Œè€Œä¸æ˜¯æ˜‚è´µçš„æ•°æ®æ·±æ‹·è´ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35dd2b2c88624ff685c2c20d317cdf46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qWg6aOO5bCP5a6H5a6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770552293&amp;x-signature=RiJzKQsmKfVtgZDlxWDOe91mEKc%3D" alt="å…±äº«æ‰€æœ‰æƒ" loading="lazy"/></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::rc::Rc;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rc1</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"Shared Data"</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Count after rc1: {}"</span>, Rc::<span class="hljs-title function_ invoke__">strong_count</span>(&amp;rc1)); <span class="hljs-comment">// 1</span>

    {
        <span class="hljs-comment">// æ˜¾å¼è°ƒç”¨ Rc::cloneï¼Œè¯­ä¹‰æ›´æ¸…æ™°</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rc2</span> = Rc::<span class="hljs-title function_ invoke__">clone</span>(&amp;rc1); 
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Count after rc2: {}"</span>, Rc::<span class="hljs-title function_ invoke__">strong_count</span>(&amp;rc1)); <span class="hljs-comment">// 2</span>
    } <span class="hljs-comment">// rc2 ç¦»å¼€ä½œç”¨åŸŸï¼Œè®¡æ•°å‡ 1</span>

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Count after rc2 dropped: {}"</span>, Rc::<span class="hljs-title function_ invoke__">strong_count</span>(&amp;rc1)); <span class="hljs-comment">// 1</span>
}
</code></pre>
<h2 data-id="heading-3">4. ç—›ç‚¹ï¼šRc æ˜¯ä¸å¯å˜çš„</h2>
<p><code>Rc&lt;T&gt;</code> èµ‹äºˆäº†ä½ â€œå…±äº«â€çš„èƒ½åŠ›ï¼Œä½†å®ƒé€šè¿‡ <code>Deref</code> æä¾›çš„å¼•ç”¨æ˜¯<strong>åªè¯»</strong>çš„ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¤šä¸ªæ‰€æœ‰è€…åŒæ—¶ä¿®æ”¹æ•°æ®å¯¼è‡´çš„æ•°æ®ç«äº‰ï¼ˆå³ä½¿åœ¨å•çº¿ç¨‹ä¸‹ï¼Œå¤šå¤„å¯å˜å€Ÿç”¨ä¹Ÿæ˜¯ä¸å®‰å…¨çš„ï¼‰ã€‚</p>
<p>å¦‚æœä½ éœ€è¦ä¿®æ”¹ <code>Rc</code> å†…éƒ¨çš„æ•°æ®ï¼Œé€šå¸¸éœ€è¦é…åˆ <strong>å†…éƒ¨å¯å˜æ€§ï¼ˆInterior Mutabilityï¼‰</strong> æ¨¡å¼ï¼Œè¿™è¶…å‡ºäº†æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ã€‚</p>
<h2 data-id="heading-4">5. è‡´å‘½é™·é˜±ï¼šå¾ªç¯å¼•ç”¨ (Reference Cycles)</h2>
<p>è™½ç„¶ <code>Rc</code> èƒ½è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä½†å®ƒæ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ã€‚å¦‚æœä¸¤ä¸ª <code>Rc</code> äº’ç›¸æŒ‡å‘å¯¹æ–¹ï¼Œå®ƒä»¬çš„å¼•ç”¨è®¡æ•°å°†æ°¸è¿œä¸ä¼šå½’é›¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2166d2cb01e04c4884b77cbbc2e1d567~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qWg6aOO5bCP5a6H5a6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770552293&amp;x-signature=aJgWTAakbiYvJdaZWERTGqyUFKc%3D" alt="å¼•ç”¨å¾ªç¯" loading="lazy"/></p>
<h2 data-id="heading-5">6. é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>ä¸è¦åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨</strong>ï¼š<code>Rc&lt;T&gt;</code> æ²¡æœ‰å®ç° <code>Send</code> å’Œ <code>Sync</code> traitã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¼•ç”¨è®¡æ•°çš„åŠ å‡æ“ä½œä¸æ˜¯åŸå­çš„ï¼Œä¼šå¯¼è‡´è®¡æ•°é”™è¯¯ã€‚</li>
<li><strong>å…‹éš† vs æ‹·è´</strong>ï¼šè™½ç„¶ <code>Rc::clone</code> å¾ˆè½»é‡ï¼Œä½†å®ƒä¾ç„¶æ¶‰åŠå †å†…å­˜è®¿é—®å’Œè®¡æ•°æ“ä½œã€‚å¦‚æœåªæ˜¯åœ¨å±€éƒ¨å‡½æ•°ä¸­ä½¿ç”¨ï¼Œç›´æ¥ä¼ é€’ <code>&amp;T</code> é€šå¸¸æ›´é«˜æ•ˆã€‚</li>
</ol>
<h2 data-id="heading-6">7. æœ€ä½³å®è·µ</h2>
<blockquote>
<p><strong>åªæœ‰åœ¨â€œæ— æ³•ç¡®å®šè°æ˜¯æœ€ç»ˆæ‰€æœ‰è€…â€æˆ–â€œæ•°æ®ç¡®å®éœ€è¦è¢«å¤šä¸ªä¸ç›¸å…³çš„ç»“æ„å…±äº«â€æ—¶ï¼Œæ‰ä½¿ç”¨ <code>Rc&lt;T&gt;</code>ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringAI]]></title>    <link>https://juejin.cn/post/7601486204173713458</link>    <guid>https://juejin.cn/post/7601486204173713458</guid>    <pubDate>2026-02-01T12:43:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601486204173713458" data-draft-id="7601486204173697074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringAI"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T12:43:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="keqistarry"/> <meta itemprop="url" content="https://juejin.cn/user/1546377157936228"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringAI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546377157936228/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    keqistarry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T12:43:43.000Z" title="Sun Feb 01 2026 12:43:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI æœºå™¨äºº - æ•´ä½“æ¡†æ¶æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-1">1. é¡¹ç›®æ¦‚è¿°</h3>
<p>åç«¯æ˜¯åŸºäº <strong>Spring Boot 3.x + Spring AI</strong> çš„æ™ºèƒ½å¯¹è¯æœåŠ¡ï¼Œæä¾›ä¸‰ç±»æ ¸å¿ƒèƒ½åŠ›ï¼š</p>





















<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ™®é€šèŠå¤©ï¼ˆå¸¦è®°å¿†ï¼‰</strong></td><td>æµå¼ SSE å¯¹è¯ï¼Œæ”¯æŒå†å²æ¶ˆæ¯æ³¨å…¥ä¸å®æ—¶è½åº“</td></tr><tr><td><strong>è”ç½‘æœç´¢å¢å¼º</strong></td><td>æ¥å…¥ SearXNG èšåˆæœç´¢ï¼Œå¹¶å‘æŠ“å–ç½‘é¡µæ­£æ–‡åæ‹¼ä¸Šä¸‹æ–‡å†è°ƒç”¨æ¨¡å‹</td></tr><tr><td><strong>RAG æ™ºèƒ½å®¢æœ</strong></td><td>åŸºäº pgvector å‘é‡æ£€ç´¢ç§æœ‰çŸ¥è¯†åº“ï¼ŒæŒ‰æŒ‡å®šè¯­æ–™å›ç­”</td></tr></tbody></table>
<p>é€šè¿‡ <strong>Spring AI Advisor</strong> æœºåˆ¶å°†ã€Œè®°å¿† / è”ç½‘ / RAG / æµå¼è½åº“ã€æ¨¡å—åŒ–ç»„åˆï¼Œå®ç°å¯æ‰©å±•çš„å¯¹è¯å¢å¼ºé“¾è·¯ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. æŠ€æœ¯æ ˆ</h3>






































































<table><thead><tr><th>ç±»åˆ«</th><th>æŠ€æœ¯</th><th>ç‰ˆæœ¬/è¯´æ˜</th></tr></thead><tbody><tr><td>åŸºç¡€æ¡†æ¶</td><td>Spring Boot</td><td>3.4.5</td></tr><tr><td>JDK</td><td>Java</td><td>21</td></tr><tr><td>AI æ¡†æ¶</td><td>Spring AI</td><td>1.1.1</td></tr><tr><td>æ¨¡å‹æ¥å…¥</td><td>spring-ai-starter-model-openai</td><td>OpenAI å…¼å®¹ï¼ˆé»˜è®¤é˜¿é‡Œäº‘ç™¾ç‚¼ï¼‰</td></tr><tr><td>ä¸šåŠ¡åº“</td><td>PostgreSQL</td><td>ä¸šåŠ¡è¡¨ + å‘é‡å­˜å‚¨</td></tr><tr><td>å‘é‡å­˜å‚¨</td><td>pgvector</td><td>spring-ai-starter-vector-store-pgvector</td></tr><tr><td>ORM</td><td>MyBatis-Plus</td><td>3.5.12</td></tr><tr><td>SQL ç›‘æ§</td><td>p6spy</td><td>3.9.1</td></tr><tr><td>è”ç½‘æœç´¢</td><td>SearXNG</td><td>è‡ªéƒ¨ç½²ï¼ŒOkHttp è°ƒç”¨</td></tr><tr><td>ç½‘é¡µæŠ“å–/æ¸…æ´—</td><td>OkHttp + Jsoup</td><td>4.12.0 / 1.17.2</td></tr><tr><td>æ—¥å¿—</td><td>Log4j2</td><td>æ›¿ä»£é»˜è®¤ Logback</td></tr><tr><td>å…¶ä»–</td><td>Hutoolã€Guavaã€Lombokã€Validationã€AOP</td><td>å·¥å…·ä¸æ ¡éªŒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">3. æ•´ä½“æ¶æ„å›¾</h3>
<pre><code class="hljs language-bash" lang="bash">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    å‰ç«¯ / å®¢æˆ·ç«¯                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚ HTTP / SSE
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              Controller å±‚ï¼ˆæ¥å£å…¥å£ï¼‰                     â”‚
                    â”‚  ChatController  â”‚  AiCustomerServiceController          â”‚
                    â”‚  /chat/*         â”‚  /customer-service/*                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                       â”‚                                       â”‚
        â–¼                                       â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatService   â”‚                    â”‚ Spring AI ChatClient â”‚                â”‚ CustomerService      â”‚
â”‚ å¯¹è¯ CRUD     â”‚                    â”‚ + Advisor é“¾         â”‚                â”‚ çŸ¥è¯†åº“æ–‡ä»¶/åˆ†ç‰‡/åˆå¹¶ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                        â”‚                                        â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
        â”‚              â”‚                         â”‚                         â”‚              â”‚
        â–¼              â–¼                         â–¼                         â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MyBatis-Plus  â”‚  â”‚ MemoryAdvisor â”‚  â”‚ NetworkSearch   â”‚  â”‚ CustomerService â”‚  â”‚ EventPublisher  â”‚
â”‚ t_chat        â”‚  â”‚ å†å²æ¶ˆæ¯æ³¨å…¥   â”‚  â”‚ Advisor         â”‚  â”‚ Advisor         â”‚  â”‚ ä¸Šä¼ å®Œæˆ â†’ å‘é‡åŒ– â”‚
â”‚ t_chat_messageâ”‚  â”‚               â”‚  â”‚ SearXNG+æŠ“å–    â”‚  â”‚ pgvector æ£€ç´¢   â”‚  â”‚ @Async çº¿ç¨‹æ±      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚                         â”‚                         â”‚              â”‚
        â”‚              â”‚                         â–¼                         â”‚              â–¼
        â”‚              â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚ SearXNGService  â”‚                   â”‚     â”‚ MarkdownReader   â”‚
        â”‚              â”‚              â”‚ ContentFetcher  â”‚                   â”‚     â”‚ VectorStore.add  â”‚
        â”‚              â”‚              â”‚ OkHttp+Jsoup    â”‚                   â”‚     â”‚ å»é‡/çŠ¶æ€æœº      â”‚
        â”‚              â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚                         â”‚                         â”‚              â”‚
        â–¼              â–¼                         â–¼                         â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PostgreSQLï¼ˆä¸šåŠ¡è¡¨ï¼‰  +  pgvectorï¼ˆt_vector_storeï¼‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                                              â”‚
        â–¼                                                                              â–¼
  å¤–éƒ¨ä¾èµ–ï¼ˆå¯é€‰ï¼‰:  OpenAI å…¼å®¹ APIï¼ˆç™¾ç‚¼ï¼‰ã€SearXNG æœåŠ¡ã€ç›®æ ‡ç½‘é¡µ
</code></pre>
<hr/>
<h3 data-id="heading-4">4. æ¨¡å—åˆ’åˆ†ä¸èŒè´£</h3>
<h4 data-id="heading-5">4.1 åŒ…ç»“æ„ä¸€è§ˆ</h4>
<pre><code class="hljs language-bash" lang="bash">com.quanxiaoha.ai.robot
â”œâ”€â”€ XiaohaAiRobotSpringbootApplication.java   <span class="hljs-comment"># å¯åŠ¨ç±»</span>
â”œâ”€â”€ advisor/                                  <span class="hljs-comment"># Spring AI å¯¹è¯å¢å¼ºé“¾</span>
â”‚   â”œâ”€â”€ CustomChatMemoryAdvisor               <span class="hljs-comment"># å¯¹è¯è®°å¿†ï¼ˆDB æ‹‰å†å²æ³¨å…¥ Promptï¼‰</span>
â”‚   â”œâ”€â”€ NetworkSearchAdvisor                  <span class="hljs-comment"># è”ç½‘æœç´¢ï¼ˆSearXNG + æŠ“å– + æ¨¡æ¿ï¼‰</span>
â”‚   â”œâ”€â”€ CustomerServiceAdvisor                <span class="hljs-comment"># RAG å®¢æœï¼ˆpgvector æ£€ç´¢ + æ¨¡æ¿ï¼‰</span>
â”‚   â””â”€â”€ CustomStreamLoggerAndMessage2DBAdvisor <span class="hljs-comment"># æµå¼æ—¥å¿— + ç”¨æˆ·/åŠ©æ‰‹æ¶ˆæ¯è½åº“</span>
â”œâ”€â”€ aspect/                                   <span class="hljs-comment"># AOP</span>
â”‚   â”œâ”€â”€ ApiOperationLog                       <span class="hljs-comment"># æ¥å£æ—¥å¿—æ³¨è§£</span>
â”‚   â””â”€â”€ ApiOperationLogAspect                 <span class="hljs-comment"># å…¥å‚/å‡ºå‚/è€—æ—¶ç¯ç»•</span>
â”œâ”€â”€ config/                                   <span class="hljs-comment"># é…ç½®ç±»</span>
â”‚   â”œâ”€â”€ AsyncEventConfig                      <span class="hljs-comment"># @Async äº‹ä»¶çº¿ç¨‹æ±  eventTaskExecutor</span>
â”‚   â”œâ”€â”€ ChatClientConfig                      <span class="hljs-comment"># ï¼ˆè‹¥æœ‰ï¼‰ChatClient ç›¸å…³ Bean</span>
â”‚   â”œâ”€â”€ CorsConfig                            <span class="hljs-comment"># è·¨åŸŸ</span>
â”‚   â”œâ”€â”€ JacksonConfig                         <span class="hljs-comment"># JSON åºåˆ—åŒ–</span>
â”‚   â”œâ”€â”€ MybatisPlusConfig                     <span class="hljs-comment"># åˆ†é¡µç­‰</span>
â”‚   â”œâ”€â”€ OkHttpConfig                          <span class="hljs-comment"># OkHttp å®¢æˆ·ç«¯</span>
â”‚   â””â”€â”€ ThreadPoolConfig                      <span class="hljs-comment"># httpRequestExecutor / resultProcessingExecutor</span>
â”œâ”€â”€ constant/                                 <span class="hljs-comment"># å¸¸é‡</span>
â”œâ”€â”€ controller/                               <span class="hljs-comment"># æ¥å£å±‚</span>
â”‚   â”œâ”€â”€ ChatController                        <span class="hljs-comment"># /chat/* æ™®é€šå¯¹è¯</span>
â”‚   â””â”€â”€ AiCustomerServiceController           <span class="hljs-comment"># /customer-service/* å®¢æœä¸çŸ¥è¯†åº“</span>
â”œâ”€â”€ domain/                                   <span class="hljs-comment"># æ•°æ®å±‚</span>
â”‚   â”œâ”€â”€ dos/                                  <span class="hljs-comment"># è¡¨å®ä½“</span>
â”‚   â”‚   â”œâ”€â”€ ChatDO, ChatMessageDO
â”‚   â”‚   â”œâ”€â”€ AiCustomerServiceFileStorageDO, FileChunkInfoDO
â”‚   â””â”€â”€ mapper/                               <span class="hljs-comment"># MyBatis-Plus Mapper</span>
â”œâ”€â”€ enums/                                    <span class="hljs-comment"># æšä¸¾ï¼ˆçŠ¶æ€ç ã€æ–‡ä»¶çŠ¶æ€ç­‰ï¼‰</span>
â”œâ”€â”€ event/                                    <span class="hljs-comment"># é¢†åŸŸäº‹ä»¶</span>
â”‚   â”œâ”€â”€ AiCustomerServiceMdUploadedEvent      <span class="hljs-comment"># æ–‡ä»¶åˆå¹¶å®Œæˆäº‹ä»¶</span>
â”‚   â””â”€â”€ listener/
â”‚       â””â”€â”€ AiCustomerServiceMdUploadedListener <span class="hljs-comment"># å¼‚æ­¥å‘é‡åŒ–</span>
â”œâ”€â”€ exception/                                <span class="hljs-comment"># å¼‚å¸¸ä¸å…¨å±€å¤„ç†</span>
â”‚   â”œâ”€â”€ BaseExceptionInterface, BizException
â”‚   â””â”€â”€ GlobalExceptionHandler
â”œâ”€â”€ model/                                    <span class="hljs-comment"># DTO/VO/å…¬å…±æŸ¥è¯¢</span>
â”‚   â”œâ”€â”€ common/, dto/, vo/chat/, vo/customerService/
â”œâ”€â”€ reader/                                   <span class="hljs-comment"># æ–‡æ¡£è§£æ</span>
â”‚   â””â”€â”€ MarkdownReader                        <span class="hljs-comment"># Markdown â†’ Document åˆ—è¡¨</span>
â”œâ”€â”€ service/                                  <span class="hljs-comment"># ä¸šåŠ¡æ¥å£ä¸å®ç°</span>
â”‚   â”œâ”€â”€ ChatService, CustomerService
â”‚   â”œâ”€â”€ SearXNGService, SearchResultContentFetcherService
â”‚   â””â”€â”€ impl/
â””â”€â”€ utils/                                    <span class="hljs-comment"># å·¥å…·ç±»ï¼ˆResponseã€PageResponseã€JsonUtil ç­‰ï¼‰</span>
</code></pre>
<h4 data-id="heading-6">4.2 æ ¸å¿ƒæ¨¡å—èŒè´£</h4>

































<table><thead><tr><th>æ¨¡å—</th><th>èŒè´£</th></tr></thead><tbody><tr><td><strong>Controller</strong></td><td>æ¥æ”¶ HTTP/SSE è¯·æ±‚ï¼Œç»„è£… ChatModel/ChatClient ä¸ Advisor åˆ—è¡¨ï¼Œè¿”å›ç»Ÿä¸€ Response/Flux</td></tr><tr><td><strong>Advisor</strong></td><td>åœ¨æ¨¡å‹è°ƒç”¨é“¾ä¸­æ’å…¥é€»è¾‘ï¼šæ”¹ Promptï¼ˆè®°å¿†/è”ç½‘/RAGï¼‰ã€æµå¼ä¾§å†™ï¼ˆæ—¥å¿—+è½åº“ï¼‰ï¼Œorder æ§åˆ¶æ‰§è¡Œé¡ºåº</td></tr><tr><td><strong>Service</strong></td><td>å¯¹è¯ CRUDã€çŸ¥è¯†åº“åˆ†ç‰‡ä¸Šä¼ /åˆå¹¶/åˆ—è¡¨/åˆ é™¤ã€SearXNG æœç´¢ã€ç½‘é¡µå†…å®¹æ‰¹é‡æŠ“å–ä¸æ¸…æ´—</td></tr><tr><td><strong>Event + Listener</strong></td><td>æ–‡ä»¶åˆå¹¶å®Œæˆåå‘å¸ƒäº‹ä»¶ï¼Œå¼‚æ­¥çº¿ç¨‹æ± æ‰§è¡Œ Markdown è§£æã€å‘é‡åŒ–ã€çŠ¶æ€æ›´æ–°</td></tr><tr><td><strong>Config</strong></td><td>çº¿ç¨‹æ± ã€OkHttpã€CORSã€å¼‚æ­¥ã€MyBatis-Plusã€pgvector ç­‰</td></tr><tr><td><strong>Exception</strong></td><td>BizException + å…¨å±€ Handlerï¼Œç»Ÿä¸€è¿”å›ç ä¸é”™è¯¯ä¿¡æ¯</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">5. æ ¸å¿ƒä¸šåŠ¡æµç¨‹</h3>
<h4 data-id="heading-8">5.1 æ™®é€šèŠå¤©ï¼ˆå¸¦è®°å¿†ï¼‰â€” <code>/chat/completion</code></h4>
<ol>
<li>å‰ç«¯ POST è¯·æ±‚ä½“ï¼š<code>message</code>ã€<code>chatId</code>ã€<code>modelName</code>ã€<code>temperature</code>ã€<code>networkSearch=false</code>ã€‚</li>
<li>Controller æ„å»º <code>OpenAiChatModel</code>ï¼Œ<code>ChatClient.prompt().user(message).options(...)</code>ã€‚</li>
<li>è‹¥ <strong>æœªå¼€å¯è”ç½‘</strong>ï¼šåŠ å…¥ <code>CustomChatMemoryAdvisor</code>ï¼ˆä» DB æŒ‰ <code>chatId</code> æ‹‰æœ€è¿‘ N æ¡æ¶ˆæ¯ï¼Œæ‹¼å…¥ Promptï¼‰ã€‚</li>
<li>åŠ å…¥ <code>CustomStreamLoggerAndMessage2DBAdvisor</code>ï¼ˆæµå¼æ¶ˆè´¹ tokenï¼Œèšåˆå®Œæ•´å›ç­”ä¸æ¨ç†å†…å®¹ï¼Œæµç»“æŸåäº‹åŠ¡å†™å…¥ <code>t_chat_message</code> ä¸¤æ¡ï¼šuser + assistantï¼‰ã€‚</li>
<li>è¿”å› <code>Flux&lt;AIResponse&gt;</code>ï¼ŒSSE æ¨é€åˆ°å‰ç«¯ã€‚</li>
</ol>
<p><strong>Advisor é¡ºåº</strong>ï¼šMemory(order=2) â†’ StreamLoggerAndMessage2DB(order=99)ã€‚</p>
<h4 data-id="heading-9">5.2 è”ç½‘æœç´¢å¢å¼º â€” <code>/chat/completion</code>ï¼ˆnetworkSearch=trueï¼‰</h4>
<ol>
<li>ä¸æŒ‚ Memory Advisorï¼Œæ”¹ä¸ºæŒ‚ <code>NetworkSearchAdvisor</code>ï¼ˆorder=1ï¼‰ã€‚</li>
<li>å–ç”¨æˆ·é—®é¢˜ â†’ è°ƒ <code>SearXNGService.search(query)</code> æ‹¿ URL åˆ—è¡¨ã€‚</li>
<li><code>SearchResultContentFetcherService.batchFetch()</code>ï¼šCompletableFuture + åŒçº¿ç¨‹æ± ï¼ˆhttpRequestExecutor / resultProcessingExecutorï¼‰å¹¶å‘æŠ“å– HTMLï¼ŒJsoup ææ­£æ–‡ï¼Œè¶…æ—¶/å¼‚å¸¸é™çº§ä¸ºç©ºã€‚</li>
<li>ç”¨ <code>PromptTemplate</code> æŠŠã€Œé—®é¢˜ + ä¸Šä¸‹æ–‡ã€æ‹¼æˆæ–° Promptï¼Œäº¤ç»™é“¾ç»§ç»­æµå¼è°ƒç”¨æ¨¡å‹ã€‚</li>
<li>ä»ç”± <code>CustomStreamLoggerAndMessage2DBAdvisor</code> åšæµå¼æ—¥å¿—ä¸è½åº“ã€‚</li>
</ol>
<h4 data-id="heading-10">5.3 RAG æ™ºèƒ½å®¢æœ â€” <code>/customer-service/completion</code></h4>
<ol>
<li>ä»…æŒ‚ <code>CustomerServiceAdvisor</code>ï¼ˆorder=1ï¼‰ã€‚</li>
<li>ç”¨æˆ·é—®é¢˜ â†’ <code>VectorStore.similaritySearch(query, topK=3)</code> å¾—åˆ° Document åˆ—è¡¨ã€‚</li>
<li>å°† Document æ–‡æœ¬æ‹¼æˆ <code>context</code>ï¼Œé€šè¿‡ <code>PromptTemplate</code> ç”Ÿæˆã€Œè§’è‰² + ä¸Šä¸‹æ–‡ + é—®é¢˜ + å›ç­”è¦æ±‚ã€çš„å¢å¼º Promptã€‚</li>
<li>æµå¼è¿”å› <code>Flux&lt;AIResponse&gt;</code>ï¼Œæ— å•ç‹¬è½åº“ï¼ˆå¯æŒ‰éœ€æ‰©å±•ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-11">5.4 çŸ¥è¯†åº“ï¼šåˆ†ç‰‡ä¸Šä¼  â†’ åˆå¹¶ â†’ å‘é‡åŒ–</h4>
<ol>
<li><strong>æ£€æŸ¥</strong> <code>POST /customer-service/file/check</code>ï¼šæŒ‰ <code>fileMd5</code> æŸ¥æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨åˆ™è¿”å›å·²ä¸Šä¼ åˆ†ç‰‡åˆ—è¡¨ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰æˆ–ç§’ä¼ ã€‚</li>
<li><strong>åˆ†ç‰‡ä¸Šä¼ </strong> <code>POST /customer-service/file/upload-chunk</code>ï¼šæŒ‰ <code>fileMd5 + chunkNumber</code> è½ç›˜å¹¶å†™ <code>t_file_chunk_info</code>ï¼Œæ›´æ–° <code>t_ai_customer_service_file_storage.uploadedChunks</code>ã€‚</li>
<li><strong>åˆå¹¶</strong> <code>POST /customer-service/file/merge-chunk</code>ï¼šæŒ‰åºå·è¯»åˆ†ç‰‡ï¼Œå†™å…¥æœ€ç»ˆæ–‡ä»¶ï¼Œæ›´æ–°çŠ¶æ€ä¸º PENDINGï¼Œåˆ é™¤åˆ†ç‰‡è®°å½•ä¸ä¸´æ—¶ç›®å½•ï¼Œå‘å¸ƒ <code>AiCustomerServiceMdUploadedEvent</code>ã€‚</li>
<li><strong>å¼‚æ­¥å‘é‡åŒ–</strong>ï¼š<code>AiCustomerServiceMdUploadedListener</code>ï¼ˆ@Async("eventTaskExecutor")ï¼‰æ¶ˆè´¹äº‹ä»¶ï¼Œå°†çŠ¶æ€ç½®ä¸º VECTORIZINGï¼Œç”¨ <code>MarkdownReader</code> è§£æä¸º <code>List&lt;Document&gt;</code>ï¼Œå¯¹æ¯æ¡åšç›¸ä¼¼åº¦å»é‡ï¼ˆscore&gt;0.99 è·³è¿‡ï¼‰å <code>vectorStore.add()</code>ï¼Œæœ€åçŠ¶æ€ç½®ä¸º COMPLETED/FAILEDã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-12">6. æ•°æ®æ¨¡å‹ä¸å­˜å‚¨</h3>
<h4 data-id="heading-13">6.1 ä¸šåŠ¡è¡¨ï¼ˆPostgreSQLï¼‰</h4>






























<table><thead><tr><th>è¡¨å</th><th>è¯´æ˜</th><th>å…³é”®å­—æ®µ</th></tr></thead><tbody><tr><td>t_chat</td><td>å¯¹è¯</td><td>id, uuid, summary, create_time, update_time</td></tr><tr><td>t_chat_message</td><td>èŠå¤©æ¶ˆæ¯</td><td>id, chat_uuid, content, reasoning_content, role, create_time</td></tr><tr><td>t_ai_customer_service_file_storage</td><td>çŸ¥è¯†åº“æ–‡ä»¶</td><td>id, file_md5, file_name, file_path, file_size, total_chunks, uploaded_chunks, status, ...</td></tr><tr><td>t_file_chunk_info</td><td>åˆ†ç‰‡ä¿¡æ¯</td><td>id, file_md5, chunk_number, chunk_path, chunk_size</td></tr></tbody></table>
<h4 data-id="heading-14">6.2 æ–‡ä»¶çŠ¶æ€æœºï¼ˆstatusï¼‰</h4>
<ul>
<li><strong>UPLOADING(0)</strong>ï¼šåˆ†ç‰‡ä¸Šä¼ ä¸­</li>
<li><strong>PENDING(1)</strong>ï¼šåˆå¹¶å®Œæˆï¼Œå¾…å‘é‡åŒ–</li>
<li><strong>VECTORIZING(2)</strong>ï¼šå‘é‡åŒ–ä¸­</li>
<li><strong>COMPLETED(3)</strong>ï¼šå®Œæˆ</li>
<li><strong>FAILED(4)</strong>ï¼šå¤±è´¥</li>
</ul>
<h4 data-id="heading-15">6.3 å‘é‡å­˜å‚¨ï¼ˆpgvectorï¼‰</h4>
<ul>
<li>è¡¨åï¼š<code>t_vector_store</code>ï¼ˆç”± Spring AI pgvector è‡ªåŠ¨ç®¡ç†ï¼‰ã€‚</li>
<li>ç”¨é€”ï¼šå­˜å‚¨ Markdown è§£æåçš„ Document å‘é‡ï¼Œä¾› RAG ç›¸ä¼¼åº¦æ£€ç´¢ã€‚</li>
<li>å…ƒæ•°æ®ç¤ºä¾‹ï¼š<code>mdStorageId</code>ã€<code>originalFileName</code> ç­‰ï¼Œç”¨äºæº¯æºä¸åˆ é™¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-16">7. é…ç½®ä¸éƒ¨ç½²è¦ç‚¹</h3>
<ul>
<li><strong>ç¯å¢ƒ</strong>ï¼š<code>application.yml</code> æ¿€æ´» <code>dev</code>ï¼Œå®é™… LLM/DB/SearXNG ç­‰åœ¨ <code>application-dev.yml</code> ä¸­é…ç½®ã€‚</li>
<li><strong>LLM</strong>ï¼š<code>spring.ai.openai.base-url</code>ã€<code>spring.ai.openai.api-key</code>ï¼ˆå¦‚ <code>${BAILIAN_API_KEY}</code>ï¼‰ã€embedding æ¨¡å‹ä¸ç»´åº¦ã€‚</li>
<li><strong>æ•°æ®åº“</strong>ï¼š<code>spring.datasource.*</code>ï¼Œå¯é€‰ p6spy ä»£ç† URLã€‚</li>
<li><strong>pgvector</strong>ï¼š<code>spring.ai.vectorstore.pgvector</code>ï¼ˆtable-nameã€dimensionsã€index-typeã€distance-typeï¼‰ã€‚</li>
<li><strong>SearXNG</strong>ï¼š<code>searxng.url</code>ã€<code>searxng.count</code>ã€‚</li>
<li><strong>customer-service</strong>ï¼š<code>file-storage-path</code>ã€<code>chunk-path</code>ã€<code>model</code>ã€<code>temperature</code>ã€‚</li>
<li><strong>çº¿ç¨‹æ± </strong>ï¼šHTTP æŠ“å–ä¸ç»“æœå¤„ç†åˆ†ç¦»ï¼ˆThreadPoolConfigï¼‰ï¼Œäº‹ä»¶å¼‚æ­¥ç”¨ <code>eventTaskExecutor</code>ï¼ˆAsyncEventConfigï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-17">8. å°ç»“</h3>
<ul>
<li><strong>å…¥å£</strong>ï¼šä¸¤ä¸ª Controllerï¼ˆChat / AiCustomerServiceï¼‰ï¼Œåˆ†åˆ«å¯¹åº”ã€Œæ™®é€šèŠå¤©+è”ç½‘ã€ä¸ã€ŒRAG å®¢æœ+çŸ¥è¯†åº“ç®¡ç†ã€ã€‚</li>
<li><strong>å¢å¼ºé“¾</strong>ï¼šé€šè¿‡ Advisor ç»„åˆã€Œè®°å¿† / è”ç½‘ / RAG / æµå¼è½åº“ã€ï¼Œé¡ºåºç”± order æ§åˆ¶ã€‚</li>
<li><strong>æ•°æ®</strong>ï¼šä¸šåŠ¡è¡¨ç”¨ MyBatis-Plusï¼Œå‘é‡ç”¨ pgvectorï¼›çŸ¥è¯†åº“é‡‡ç”¨åˆ†ç‰‡ä¸Šä¼  + äº‹ä»¶é©±åŠ¨å¼‚æ­¥å‘é‡åŒ–ï¼ŒçŠ¶æ€æœºæ¸…æ™°ã€‚</li>
<li><strong>å¯è§‚æµ‹</strong>ï¼šAOP æ¥å£æ—¥å¿—ã€p6spy SQLã€æµå¼å®Œæ•´å†…å®¹è½åº“ï¼Œä¾¿äºæ’æŸ¥ä¸å®¡è®¡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent æ˜¯ä»€ä¹ˆï¼Ÿå¸¦ä½ çœ‹æ‡‚å¤§æ¨¡å‹èƒŒåçš„ â€œè¡ŒåŠ¨åŠ›â€]]></title>    <link>https://juejin.cn/post/7601387539333922852</link>    <guid>https://juejin.cn/post/7601387539333922852</guid>    <pubDate>2026-02-01T12:52:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601387539333922852" data-draft-id="7601387539333906468" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent æ˜¯ä»€ä¹ˆï¼Ÿå¸¦ä½ çœ‹æ‡‚å¤§æ¨¡å‹èƒŒåçš„ â€œè¡ŒåŠ¨åŠ›â€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T12:52:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜éº»è¾£çƒ«"/> <meta itemprop="url" content="https://juejin.cn/user/870468942580749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent æ˜¯ä»€ä¹ˆï¼Ÿå¸¦ä½ çœ‹æ‡‚å¤§æ¨¡å‹èƒŒåçš„ â€œè¡ŒåŠ¨åŠ›â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468942580749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜éº»è¾£çƒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T12:52:15.000Z" title="Sun Feb 01 2026 12:52:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œä¸ºä»€ä¹ˆæœ€è¿‘ â€œAgentâ€ è¿™ä¸ªè¯çªç„¶ç«äº†èµ·æ¥ï¼Ÿåœ¨å¤§æ¨¡å‹çš„ä¸–ç•Œé‡Œï¼ŒAgent åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±ç”¨æœ€ç®€å•çš„è¯­è¨€ï¼Œè·Ÿä½ èŠèŠæˆ‘å¯¹ Agent çš„ç†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-0">Agentï¼Œä¸åªæ˜¯ä¸ªåå­—çš„å˜åŒ–</h3>
<p>æœ€å¼€å§‹ï¼Œè¿™ç©æ„å„¿å« â€œBotâ€ï¼Œåæ¥æ…¢æ…¢æ¼”å˜æˆ â€œAgentâ€ã€‚çœ‹ä¼¼æ¢äº†ä¸ªåå­—ï¼Œå®é™…ä¸ŠèƒŒåå«ä¹‰æ›´ä¸°å¯Œäº†ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å°±æ˜¯ä¸€é¢—è¶…çº§èªæ˜çš„å¤§è„‘ï¼Œèƒ½å¸®ä½ å›ç­”é—®é¢˜ï¼Œä½†å®ƒåªèƒ½ä¸€é—®ä¸€ç­”ï¼Œæ²¡åŠæ³•è‡ªå·±åŠ¨æ‰‹å»åšäº‹æƒ…ã€‚</p>
<p>è€Œ Agentï¼Œå°±æ˜¯è¿™é¢—å¤§è„‘çš„ â€œèº«ä½“â€ã€‚å®ƒè®©å¤§è„‘ä¸ä»…èƒ½æƒ³ï¼Œè¿˜èƒ½å» â€œè¡ŒåŠ¨â€ï¼Œå»è°ƒç”¨å„ç§å·¥å…·ï¼Œå®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-1">Agent çš„å…­å¤§ç»„æˆéƒ¨åˆ†</h3>
<ol>
<li>
<p><strong>äººè®¾ä¸å›å¤é€»è¾‘ï¼ˆPromptï¼‰</strong>ï¼šè¿™å°±åƒç»™ Agent ç©¿ä¸Š â€œäººæ ¼è¡£æœâ€ï¼Œå‘Šè¯‰å®ƒè¯¥æ€ä¹ˆè¯´è¯ã€æ€ä¹ˆæ€è€ƒã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ Agent çš„æ€§æ ¼å’Œå·¥ä½œæµç¨‹ã€‚æœ€è¿‘å¾ˆç«çš„ Prompt Engineeringï¼Œå°±æ˜¯ä¸“é—¨è®¾è®¡è¿™éƒ¨åˆ†çš„æŠ€æœ¯ã€‚</p>
<p>å¦å¤–ï¼ŒSkill å…¶å®æ˜¯è½»é‡çº§çš„ Agentï¼Œæ¨¡å‹æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„ Skill æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å‹è®¾ç½®</strong>ï¼šAgent çš„å¤§è„‘æœ‰å¤šèªæ˜ï¼Œå’ŒèƒŒåçš„æ¨¡å‹èƒ½åŠ›æ¯æ¯ç›¸å…³ã€‚æ¨¡å‹è¶Šå¼ºï¼ŒAgent çš„è¡¨ç°è¶Šæ£’ã€‚</p>
</li>
<li>
<p><strong>æŠ€èƒ½ï¼ˆAPIï¼‰</strong>ï¼šè¿™äº›æ˜¯ Agent çš„ â€œå·¥å…·ç®±â€ï¼Œæ¯”å¦‚æœç´¢ APIï¼Œèƒ½å¸® Agent å»ç½‘ä¸ŠæŸ¥èµ„æ–™ã€‚å¤§æ¨¡å‹ä¼šåˆ¤æ–­ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨è¿™äº›æŠ€èƒ½ï¼Œç„¶åè®© Agent å»è°ƒç”¨ã€‚</p>
</li>
<li>
<p><strong>çŸ¥è¯†åº“</strong>ï¼šè¿™é‡Œæ˜¯ä¸“ä¸šå†…å®¹çš„å­˜æ”¾åœ°ï¼Œæ¯”å¦‚å…¬å¸å†…éƒ¨è§„èŒƒã€‚æ¨¡å‹æœ¬èº«æ²¡æœ‰è¿™äº›å†…å®¹ï¼Œä½†é€šè¿‡çŸ¥è¯†åº“ï¼ŒAgent èƒ½è®©å›ç­”æ›´å‡†ç¡®ã€‚è¿™é‡Œç”¨åˆ°äº†å‘é‡åŒ–å’Œå‘é‡å¬å›æŠ€æœ¯ã€‚</p>
</li>
<li>
<p><strong>å¯¹è¯ä½“éªŒ</strong>ï¼šè¿™éƒ¨åˆ†è®©äº¤äº’æ›´è‡ªç„¶ï¼Œæ¯”å¦‚æ”¯æŒè¯­éŸ³é—®ç­”ï¼Œç”šè‡³é…ä¸Šæ•°å­—äººå½¢è±¡ï¼Œè®©å¯¹è¯æ›´ç”ŸåŠ¨ã€‚</p>
</li>
<li>
<p><strong>é¢„è§ˆä¸è°ƒè¯•</strong>ï¼šè¿™æ˜¯ Agent æ‰§è¡Œä»»åŠ¡çš„ â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½æŒ‰è®¡åˆ’è¿›è¡Œã€‚è¿™é‡Œæ¶‰åŠ Agent çš„ä½“ç³»æ¶æ„ï¼Œæ¯”å¦‚å• Agent è¿˜æ˜¯å¤š Agent åä½œï¼Œä»¥åŠæ¨ç†æœºåˆ¶ï¼Œæ¯”å¦‚ ReActï¼ˆæ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿå¾ªç¯ï¼‰ã€Chain-of-Thoughtï¼ˆæ€è·¯é“¾ï¼‰å’Œ Plan-and-Executeï¼ˆè®¡åˆ’æ‰§è¡Œï¼‰ç­‰æ–¹æ³•ã€‚</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c3c11f0838e43e8a1abd396c4147295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bq76L6j54Or:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770555134&amp;x-signature=hLPdApaUEzIJU6wLa5uIObpryA0%3D" alt="image-20260131162110415.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">Agent çš„å·¥ä½œåŸç†</h3>
<p>ç®€å•è¯´å°±æ˜¯ï¼šå¤§æ¨¡å‹çŸ¥é“è‡ªå·±æœ‰è¿™äº›å·¥å…·ï¼ˆæŠ€èƒ½ã€çŸ¥è¯†ã€å¤š Agentï¼‰ï¼Œè§‰å¾—èƒ½ç”¨å®ƒä»¬è§£å†³é—®é¢˜ï¼Œå°±è®© Agent å»æ‰§è¡Œã€‚Agent æ‹¿åˆ°ç»“æœï¼Œå†åé¦ˆç»™å¤§æ¨¡å‹ï¼Œå¤§æ¨¡å‹åˆ¤æ–­æ˜¯å¦è§£å†³äº†é—®é¢˜ï¼Œæˆ–è€…è¿˜éœ€è¦ç»§ç»­è°ƒç”¨å…¶ä»–å·¥å…·ã€‚è¿™ä¸ªè¿‡ç¨‹å°±åƒä¸€ä¸ªä¸æ–­å¾ªç¯çš„ â€œæ€è€ƒ - è¡ŒåŠ¨ - åé¦ˆâ€ æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-3">è¯´åˆ°åº•ï¼ŒAgent è®©å¤§æ¨¡å‹ä¸å†å­¤å•</h3>
<p>å®ƒè®©å¤§æ¨¡å‹ä»åªèƒ½ â€œç­”é¢˜â€ çš„çŠ¶æ€ï¼Œå˜æˆäº†èƒ½ â€œåšäº‹â€ çš„æ™ºèƒ½åŠ©æ‰‹ã€‚è¿™èƒŒåæ˜¯å¤æ‚çš„æ¶æ„å’Œçµæ´»çš„æ¨ç†æœºåˆ¶ï¼Œä½†æ ¸å¿ƒå°±æ˜¯è®©äººå·¥æ™ºèƒ½æ›´è´´è¿‘æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œæ›´å¥½åœ°å¸®æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚</p>
<hr/>
<p>æœªæ¥ï¼Œæˆ‘ä¼šæŠŠæ¯ä¸ªéƒ¨åˆ†éƒ½æ‹†å¼€è¯¦ç»†è®²ï¼Œç”šè‡³ç”¨ä»£ç å®ç° Agent çš„æ ¸å¿ƒé€»è¾‘ã€‚è¿™æ ·ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œæ‰“é€ å±äºè‡ªå·±çš„æ™ºèƒ½ Agentã€‚</p>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿè§‰å¾—ï¼ŒAgent çš„ä¸–ç•Œå¾ˆç²¾å½©ï¼Ÿå¦‚æœä½ æœ‰å…´è¶£ï¼Œå’±ä»¬ä¸‹æ¬¡ç»§ç»­èŠï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot+Caffeine+Redis å®ç°å¤šçº§ç¼“å­˜]]></title>    <link>https://juejin.cn/post/7601387539333972004</link>    <guid>https://juejin.cn/post/7601387539333972004</guid>    <pubDate>2026-02-01T13:48:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601387539333972004" data-draft-id="7601427909702418486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot+Caffeine+Redis å®ç°å¤šçº§ç¼“å­˜"/> <meta itemprop="keywords" content="åç«¯,Redis"/> <meta itemprop="datePublished" content="2026-02-01T13:48:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot+Caffeine+Redis å®ç°å¤šçº§ç¼“å­˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T13:48:52.000Z" title="Sun Feb 01 2026 13:48:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šçº§ç¼“å­˜ï¼šæ¶æ„è®¾è®¡ã€å®æˆ˜è½åœ°ä¸é—®é¢˜è§£å†³</h2>
<p>åœ¨é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç¼“å­˜æ˜¯æå‡æ¥å£å“åº”é€Ÿåº¦ã€é™ä½æ•°æ®åº“å‹åŠ›çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä½†å•ä¸€ç¼“å­˜å±‚å¾€å¾€éš¾ä»¥å…¼é¡¾<strong>æ€§èƒ½</strong>ã€<strong>ä¸€è‡´æ€§</strong>å’Œ<strong>é«˜å¯ç”¨</strong>ã€‚å¤šçº§ç¼“å­˜é€šè¿‡æ•´åˆä¸åŒå±‚çº§çš„ç¼“å­˜ç»„ä»¶ï¼Œæ‰¬é•¿é¿çŸ­æ„å»ºå±‚æ¬¡åŒ–ç¼“å­˜ä½“ç³»ï¼Œæˆä¸ºæ”¯æ’‘ç™¾ä¸‡çº§ QPS ç³»ç»Ÿçš„æ ‡é…æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒæ¦‚å¿µã€æ¶æ„è®¾è®¡ã€å®æˆ˜å®ç°ã€ä¸€è‡´æ€§ä¿éšœåŠç»å…¸é—®é¢˜è§£å†³äº”ä¸ªç»´åº¦ï¼Œå…¨é¢è§£æå¤šçº§ç¼“å­˜æŠ€æœ¯ï¼ŒåŒæ—¶ç»“åˆ SpringBoot+Caffeine+Redis çš„å®æˆ˜æ¡ˆä¾‹ï¼Œè®©æŠ€æœ¯è½åœ°æ›´å…·å¯æ“ä½œæ€§ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯å¤šçº§ç¼“å­˜ï¼Ÿ</h3>
<p>å¤šçº§ç¼“å­˜æ˜¯æŒ‡åœ¨ç³»ç»Ÿä¸­éƒ¨ç½²<strong>å¤šå±‚åŠŸèƒ½äº’è¡¥çš„ç¼“å­˜ç»„ä»¶</strong>ï¼Œè®©è¯·æ±‚æŒ‰ç…§é¢„è®¾é¡ºåºä¾æ¬¡è®¿é—®å„å±‚ç¼“å­˜ï¼Œä»…å½“æ‰€æœ‰ç¼“å­˜å±‚å‡æœªå‘½ä¸­æ—¶ï¼Œæ‰è®¿é—®åº•å±‚æ•°æ®åº“çš„æ¶æ„æ¨¡å¼ã€‚å…¶æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯<strong>ç¦»ç”¨æˆ·è¶Šè¿‘çš„ç¼“å­˜ï¼Œé€Ÿåº¦è¶Šå¿«ã€å¼€é”€è¶Šä½</strong>ï¼Œé€šè¿‡åˆ†å±‚æ‹¦æˆªè¯·æ±‚ï¼Œæœ€å¤§åŒ–å‡å°‘å¯¹åç«¯å­˜å‚¨çš„è®¿é—®ã€‚</p>
<p>åœ¨ Java åç«¯ä½“ç³»ä¸­ï¼Œæœ€ä¸»æµçš„æ˜¯<strong>äºŒçº§ç¼“å­˜æ¶æ„</strong>ï¼ˆæœ¬åœ°ç¼“å­˜ + åˆ†å¸ƒå¼ç¼“å­˜ï¼‰ï¼Œéƒ¨åˆ†åœºæ™¯ä¼šç»“åˆæ•°æ®åº“è‡ªèº«ç¼“å­˜å½¢æˆä¸‰çº§ä½“ç³»ï¼Œå„å±‚æ ¸å¿ƒç‰¹æ€§ä¸é€‰å‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æœ¬åœ°ç¼“å­˜</strong>ï¼šè¿è¡Œåœ¨åº”ç”¨è¿›ç¨‹å†…éƒ¨çš„å†…å­˜ç¼“å­˜ï¼Œæ— ç½‘ç»œ IO å¼€é”€ï¼Œè¯»å†™å»¶è¿Ÿçº³ç§’çº§ã€‚ä¸»æµé€‰å‹ä¸º Caffeineï¼ˆæ€§èƒ½ä¼˜äº Guava Cacheã€Ehcacheï¼‰ï¼Œé€‚åˆå­˜å‚¨<strong>é«˜é¢‘è®¿é—®çš„çƒ­ç‚¹æ•°æ®</strong>ï¼Œç¼ºç‚¹æ˜¯æ•°æ®ä»…å½“å‰å®ä¾‹å¯è§ï¼Œæ— æ³•åˆ†å¸ƒå¼å…±äº«ï¼Œä¸”å— JVM å†…å­˜é™åˆ¶ã€‚</li>
<li><strong>åˆ†å¸ƒå¼ç¼“å­˜</strong>ï¼šç‹¬ç«‹äºåº”ç”¨çš„ä¸­é—´ä»¶ï¼Œéƒ¨ç½²åœ¨é›†ç¾¤ä¸­å¯è¢«æ‰€æœ‰åº”ç”¨å®ä¾‹å…±äº«ï¼Œæ•°æ®ä¸€è‡´æ€§æ›´æ˜“ä¿éšœã€‚ä¸»æµé€‰å‹ä¸º Redisï¼ˆæ”¯æŒä¸°å¯Œæ•°æ®ç»“æ„ã€æŒä¹…åŒ–ã€åˆ†å¸ƒå¼é”ï¼‰ï¼Œé€‚åˆå­˜å‚¨<strong>å…¨é‡çƒ­ç‚¹æ•°æ® + é€šç”¨ä¸šåŠ¡æ•°æ®</strong>ï¼Œç¼ºç‚¹æ˜¯å­˜åœ¨ç½‘ç»œ IO å¼€é”€ï¼Œæ€§èƒ½ç•¥ä½äºæœ¬åœ°ç¼“å­˜ã€‚</li>
<li><strong>æ•°æ®åº“ç¼“å­˜</strong>ï¼šæ•°æ®åº“è‡ªèº«çš„æŸ¥è¯¢ç¼“å­˜ / ç¼“å†²æ± ï¼ˆå¦‚ MySQL çš„ InnoDB Buffer Poolï¼‰ï¼Œå±äºåº•å±‚è¢«åŠ¨ç¼“å­˜ï¼Œé€šå¸¸æ— éœ€äººå·¥å¹²é¢„ï¼Œä»…ä½œä¸ºæœ€åä¸€é“æ•°æ®å±éšœã€‚</li>
</ol>
<p><strong>å„å±‚ç¼“å­˜æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆæ ¸å¿ƒæŒ‡æ ‡ï¼‰ï¼š</p>

































<table><thead><tr><th>ç¼“å­˜å±‚çº§</th><th>è¯»å†™å»¶è¿Ÿ</th><th>é›†ç¾¤å…±äº«</th><th>éƒ¨ç½²æˆæœ¬</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰</td><td>çº³ç§’çº§</td><td>å¦</td><td>ä½ï¼ˆæ— ç‹¬ç«‹ç»„ä»¶ï¼‰</td><td>é«˜é¢‘çƒ­ç‚¹æ•°æ®ã€å•æœºç»´åº¦ä¸´æ—¶æ•°æ®</td></tr><tr><td>åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰</td><td>å¾®ç§’çº§</td><td>æ˜¯</td><td>ä¸­ï¼ˆéœ€é›†ç¾¤éƒ¨ç½²ï¼‰</td><td>å…¨é‡çƒ­ç‚¹æ•°æ®ã€è·¨å®ä¾‹å…±äº«æ•°æ®</td></tr><tr><td>æ•°æ®åº“ç¼“å­˜</td><td>æ¯«ç§’çº§</td><td>æ˜¯</td><td>é«˜</td><td>æ‰€æœ‰æ•°æ®çš„æœ€ç»ˆå­˜å‚¨</td></tr></tbody></table>
<h3 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§ç¼“å­˜ï¼Ÿ</h3>
<p>å•ä¸€ç¼“å­˜å±‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å­˜åœ¨éš¾ä»¥å…‹æœçš„çŸ­æ¿ï¼Œè€Œå¤šçº§ç¼“å­˜é€šè¿‡<strong>ä¼˜åŠ¿äº’è¡¥</strong>è§£å†³è¿™äº›é—®é¢˜ï¼ŒåŒæ—¶å¸¦æ¥æè‡´çš„æ€§èƒ½æå‡ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ç»„ç”µå•†å•†å“è¯¦æƒ…é¡µçš„å‹æµ‹æ•°æ®ï¼Œç›´è§‚æ„Ÿå—å¤šçº§ç¼“å­˜çš„ä»·å€¼ï¼š</p>


























<table><thead><tr><th>æ¶æ„æ¨¡å¼</th><th>QPS</th><th>TP99 å»¶è¿Ÿ (ms)</th><th>æ•°æ®åº“è´Ÿè½½</th><th>ç¼“å­˜å‘½ä¸­ç‡</th></tr></thead><tbody><tr><td>å• Redis ç¼“å­˜</td><td>5.8 ä¸‡</td><td>120</td><td>65%</td><td>75%</td></tr><tr><td>Caffeine+Redis å¤šçº§ç¼“å­˜</td><td>120 ä¸‡</td><td>45</td><td>8%</td><td>99.2%</td></tr></tbody></table>
<p>ä»æ•°æ®å¯ä»¥çœ‹å‡ºï¼Œå¤šçº§ç¼“å­˜è®© QPS æå‡ 20 å€ã€TP99 å»¶è¿Ÿé™ä½ 60%ã€æ•°æ®åº“è´Ÿè½½å‡å°‘ 87%ï¼Œæ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>æè‡´æ€§èƒ½</strong>ï¼šæœ¬åœ°ç¼“å­˜æ‹¦æˆª 80% ä»¥ä¸Šçš„é«˜é¢‘è¯·æ±‚ï¼Œé¿å…å¤§é‡è¯·æ±‚ç©¿é€åˆ° Redisï¼Œå‡å°‘ç½‘ç»œ IO å’Œ Redis é›†ç¾¤å‹åŠ›ï¼Œè®©æ¥å£å“åº”é€Ÿåº¦è¾¾åˆ°æè‡´ã€‚</li>
<li><strong>é«˜å¯ç”¨å…œåº•</strong>ï¼šå½“åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ï¼ˆå¦‚ Redisï¼‰å‘ç”Ÿå®•æœºæ—¶ï¼Œæœ¬åœ°ç¼“å­˜å¯ä¸´æ—¶å…œåº•æ ¸å¿ƒçƒ­ç‚¹æ•°æ®ï¼Œé¿å…ç³»ç»Ÿç›´æ¥é›ªå´©ï¼Œæå‡æœåŠ¡å®¹é”™èƒ½åŠ›ã€‚</li>
<li><strong>èµ„æºä¼˜åŒ–</strong>ï¼šé€šè¿‡åˆ†å±‚å­˜å‚¨æ•°æ®ï¼Œå°†é«˜é¢‘æ•°æ®æ”¾åœ¨æœ¬åœ°ç¼“å­˜ï¼ˆä½å¼€é”€ï¼‰ï¼Œé€šç”¨æ•°æ®æ”¾åœ¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå…±äº«æ€§ï¼‰ï¼Œé¿å… Redis å­˜å‚¨å¤§é‡ä½ä»·å€¼æ•°æ®ï¼Œé™ä½ç¼“å­˜é›†ç¾¤çš„éƒ¨ç½²æˆæœ¬ã€‚</li>
</ol>
<p>æ­¤å¤–ï¼Œå¤šçº§ç¼“å­˜è¿˜èƒ½ä»æ¶æ„å±‚é¢<strong>è§„é¿å•ä¸€ç¼“å­˜çš„ç»å…¸é—®é¢˜</strong>ï¼Œæ¯”å¦‚æœ¬åœ°ç¼“å­˜çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜å¯é€šè¿‡ Redis å…œåº•ï¼ŒRedis çš„ç½‘ç»œå¼€é”€é—®é¢˜å¯é€šè¿‡æœ¬åœ°ç¼“å­˜æ‹¦æˆªï¼Œè®©ç³»ç»Ÿæ›´å¥å£®ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€å¤šçº§ç¼“å­˜æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-4">3.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™</h4>
<p>å¤šçº§ç¼“å­˜çš„è®¾è®¡éœ€éµå¾ª<strong>3 ä¸ªæ ¸å¿ƒåŸåˆ™</strong>ï¼Œå¦åˆ™æ˜“å¯¼è‡´æ¶æ„è‡ƒè‚¿ã€æ•°æ®ä¸€è‡´æ€§æ··ä¹±ï¼š</p>
<ol>
<li><strong>è¯·æ±‚å°±è¿‘åŸåˆ™</strong>ï¼šè¯·æ±‚ä¼˜å…ˆè®¿é—®æœ¬åœ°ç¼“å­˜ï¼Œæœªå‘½ä¸­å†è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜ï¼Œæœ€åè®¿é—®æ•°æ®åº“ï¼Œåå‘æµç¨‹ä¸å¯è¡Œã€‚</li>
<li><strong>æ•°æ®åˆ†å±‚åŸåˆ™</strong>ï¼šä¸åŒä»·å€¼çš„æ•°æ®å­˜å‚¨åœ¨å¯¹åº”å±‚çº§ï¼Œæœ¬åœ°ç¼“å­˜ä»…å­˜<strong>é«˜é¢‘çƒ­ç‚¹æ•°æ®</strong>ï¼ˆæ§åˆ¶å®¹é‡ï¼Œé¿å… OOMï¼‰ï¼Œåˆ†å¸ƒå¼ç¼“å­˜å­˜<strong>å…¨é‡ä¸šåŠ¡æ•°æ®</strong>ï¼Œä¸é‡å¤å­˜å‚¨ä½ä»·å€¼æ•°æ®ã€‚</li>
<li><strong>å¤±æ•ˆç”±ä¸Šè‡³ä¸‹åŸåˆ™</strong>ï¼šç¼“å­˜æ›´æ–° / å¤±æ•ˆæ—¶ï¼Œå…ˆæ“ä½œæœ¬åœ°ç¼“å­˜ï¼Œå†æ“ä½œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œé¿å…å‡ºç° â€œæœ¬åœ°ç¼“å­˜æœ‰æ—§æ•°æ®ï¼Œåˆ†å¸ƒå¼ç¼“å­˜æœ‰æ–°æ•°æ®â€ çš„ä¸ä¸€è‡´æƒ…å†µã€‚</li>
</ol>
<h4 data-id="heading-5">3.2 ä¸»æµæ¶æ„ï¼šCaffeine+Redis äºŒçº§ç¼“å­˜</h4>
<p>Java åç«¯ä¸­ï¼Œ<strong>Caffeineï¼ˆæœ¬åœ°ï¼‰+ Redisï¼ˆåˆ†å¸ƒå¼ï¼‰</strong> æ˜¯å·¥ä¸šçº§è½åœ°çš„ä¸»æµæ¶æ„ï¼Œé€‚ç”¨äº 90% ä»¥ä¸Šçš„ä¸šåŠ¡åœºæ™¯ï¼ˆç”µå•†ã€ç¤¾äº¤ã€èµ„è®¯ç­‰ï¼‰ï¼Œå…¶<strong>è¯·æ±‚è®¿é—®æµç¨‹</strong>å’Œ<strong>æ•°æ®æ›´æ–°æµç¨‹</strong>å¦‚ä¸‹ï¼Œæ˜¯åç»­å®æˆ˜çš„æ ¸å¿ƒåŸºç¡€ã€‚</p>
<h5 data-id="heading-6">ï¼ˆ1ï¼‰è¯·æ±‚è®¿é—®æµç¨‹ï¼ˆè¯»æ“ä½œï¼‰</h5>
<ol>
<li>åº”ç”¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œé¦–å…ˆæŸ¥è¯¢<strong>Caffeine æœ¬åœ°ç¼“å­˜</strong>ï¼Œå‘½ä¸­åˆ™ç›´æ¥è¿”å›ç»“æœï¼Œç»“æŸè¯·æ±‚ï¼›</li>
<li>æœ¬åœ°ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢<strong>Redis åˆ†å¸ƒå¼ç¼“å­˜</strong>ï¼Œå‘½ä¸­åˆ™å°†æ•°æ®å›å†™åˆ°æœ¬åœ°ç¼“å­˜ï¼ˆæ–¹ä¾¿åç»­è¯·æ±‚æ‹¦æˆªï¼‰ï¼Œç„¶åè¿”å›ç»“æœï¼›</li>
<li>åˆ†å¸ƒå¼ç¼“å­˜ä¹Ÿæœªå‘½ä¸­ï¼Œæ‰§è¡Œ<strong>æ•°æ®åº“æŸ¥è¯¢</strong>ï¼ŒæŸ¥è¯¢ç»“æœéç©ºæ—¶ï¼Œä¾æ¬¡å›å†™åˆ° Redis å’Œ Caffeineï¼Œç„¶åè¿”å›ç»“æœï¼›</li>
<li>æ•°æ®åº“æŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œ<strong>ç©ºå€¼ç¼“å­˜</strong>ï¼ˆçŸ­æœŸè¿‡æœŸï¼‰ï¼Œé¿å…åç»­è¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ã€‚</li>
</ol>
<h5 data-id="heading-7">ï¼ˆ2ï¼‰æ•°æ®æ›´æ–°æµç¨‹ï¼ˆå†™æ“ä½œï¼‰</h5>
<p>éµå¾ª <strong>â€œå…ˆæ›´æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜â€</strong> åŸåˆ™ï¼ˆé¿å… â€œå…ˆåˆ ç¼“å­˜ï¼Œå†æ›´æ•°æ®åº“â€ çš„å¹¶å‘ä¸ä¸€è‡´é—®é¢˜ï¼‰ï¼Œæ ¸å¿ƒæ­¥éª¤ï¼š</p>
<ol>
<li>æ‰§è¡Œæ•°æ®åº“çš„å¢ / åˆ  / æ”¹æ“ä½œï¼Œä¿è¯æ•°æ®è½åœ°ï¼›</li>
<li><strong>åˆ é™¤ Redis å¯¹åº”ç¼“å­˜</strong>ï¼ˆè€Œéæ›´æ–°ï¼Œé¿å…å¹¶å‘è¦†ç›–ï¼‰ï¼›</li>
<li><strong>é©±é€ Caffeine æœ¬åœ°ç¼“å­˜</strong>ï¼ˆå½“å‰å®ä¾‹ï¼‰ï¼Œè‹¥ä¸ºé›†ç¾¤éƒ¨ç½²ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RocketMQ/Kafkaï¼‰é€šçŸ¥å…¶ä»–å®ä¾‹é©±é€æœ¬åœ°ç¼“å­˜ï¼›</li>
<li>åç»­è¯·æ±‚ä¼šè§¦å‘ç¼“å­˜é‡æ–°åŠ è½½ï¼Œä¿è¯æ•°æ®æœ€æ–°ã€‚</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šå†™æ“ä½œä¼˜å…ˆé€‰æ‹©<strong>åˆ ç¼“å­˜</strong>è€Œé<strong>æ›´ç¼“å­˜</strong>ï¼ŒåŸå› æ˜¯ï¼šè‹¥åŒæ—¶æœ‰å¤šä¸ªå†™è¯·æ±‚ï¼Œç›´æ¥æ›´æ–°ç¼“å­˜å¯èƒ½å¯¼è‡´<strong>å¹¶å‘è¦†ç›–</strong>ï¼Œè€Œåˆ é™¤ç¼“å­˜åï¼Œç”±è¯»è¯·æ±‚è§¦å‘æ‡’åŠ è½½ï¼Œèƒ½ä¿è¯ç¼“å­˜æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-8">å››ã€å®æˆ˜è½åœ°ï¼šSpringBoot æ•´åˆ Caffeine+Redis å¤šçº§ç¼“å­˜</h3>
<p>æœ¬èŠ‚åŸºäº<strong>SpringBoot 2.7.x</strong>ï¼Œå®ç° Caffeine+Redis çš„äºŒçº§ç¼“å­˜æ¶æ„ï¼ŒåŒ…å«æ ¸å¿ƒä¾èµ–ã€é…ç½®ã€ä»£ç å®ç°ï¼ŒåŒæ—¶æ•´åˆ<strong>ç©ºå€¼ç¼“å­˜</strong>ã€<strong>åˆ†å¸ƒå¼é”</strong>ç­‰ç‰¹æ€§ï¼Œç›´æ¥å¯ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ˆä»…éœ€æ ¹æ®ä¸šåŠ¡è°ƒæ•´å‚æ•°ï¼‰ã€‚</p>
<h4 data-id="heading-9">4.1 æ ¸å¿ƒä¾èµ–å¼•å…¥ï¼ˆMavenï¼‰</h4>
<p>å¼•å…¥ Caffeineã€Redisã€SpringCache æ ¸å¿ƒä¾èµ–ï¼Œç®€åŒ–ç¼“å­˜æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨å°è£…ç¼“å­˜å·¥å…·ç±»ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- SpringCacheç¼“å­˜æŠ½è±¡ï¼ˆç®€åŒ–ç¼“å­˜æ³¨è§£ä½¿ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Caffeineæœ¬åœ°ç¼“å­˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Redisåˆ†å¸ƒå¼ç¼“å­˜ï¼ˆLettuceå®¢æˆ·ç«¯ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- åºåˆ—åŒ–ä¾èµ–ï¼ˆè§£å†³Rediså­˜å‚¨å¯¹è±¡ä¹±ç é—®é¢˜ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.32<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">4.2 æ ¸å¿ƒé…ç½®ï¼ˆé…ç½®ç±» + ymlï¼‰</h4>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰ç¼“å­˜é…ç½®ç±»ï¼šåˆå§‹åŒ– Caffeine å’Œ Redis ç¼“å­˜ç®¡ç†å™¨</h5>
<p>é€šè¿‡é…ç½®ç±»å®ç°<strong>åŒç¼“å­˜ç®¡ç†å™¨</strong>ï¼Œåˆ†åˆ«ç®¡ç†æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ”¯æŒæ³¨è§£å¼ç¼“å­˜æ“ä½œï¼Œæ ¸å¿ƒå‚æ•°æŒ‰éœ€è°ƒæ•´ï¼ˆå¦‚è¿‡æœŸæ—¶é—´ã€æœ€å¤§å®¹é‡ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;
<span class="hljs-keyword">import</span> org.springframework.cache.CacheManager;
<span class="hljs-keyword">import</span> org.springframework.cache.caffeine.CaffeineCacheManager;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Primary;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext;

<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableCaching</span> <span class="hljs-comment">// å¼€å¯SpringCacheæ³¨è§£æ”¯æŒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiLevelCacheConfig</span> {

    <span class="hljs-comment">// 1. æœ¬åœ°ç¼“å­˜ç®¡ç†å™¨ï¼ˆCaffeineï¼‰ï¼šä¼˜å…ˆä½¿ç”¨ï¼Œå­˜å‚¨çƒ­ç‚¹æ•°æ®</span>
    <span class="hljs-meta">@Bean("caffeineCacheManager")</span>
    <span class="hljs-keyword">public</span> CacheManager <span class="hljs-title function_">caffeineCacheManager</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CaffeineCacheManager</span> <span class="hljs-variable">cacheManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaffeineCacheManager</span>();
        <span class="hljs-comment">// æ ¸å¿ƒé…ç½®ï¼šæœ€å¤§å®¹é‡1000æ¡ã€å†™å…¥å5ç§’è¿‡æœŸï¼ˆçŸ­è¿‡æœŸé˜²è„æ•°æ®ï¼‰ã€å¼±å¼•ç”¨å›æ”¶</span>
        cacheManager.setCaffeine(Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .expireAfterWrite(<span class="hljs-number">5</span>, TimeUnit.SECONDS)
                .weakValues());
        <span class="hljs-keyword">return</span> cacheManager;
    }

    <span class="hljs-comment">// 2. åˆ†å¸ƒå¼ç¼“å­˜ç®¡ç†å™¨ï¼ˆRedisï¼‰ï¼š@Primaryè¡¨ç¤ºé»˜è®¤ç¼“å­˜ç®¡ç†å™¨ï¼Œå­˜å‚¨é€šç”¨æ•°æ®</span>
    <span class="hljs-meta">@Bean("redisCacheManager")</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> CacheManager <span class="hljs-title function_">redisCacheManager</span><span class="hljs-params">(RedisConnectionFactory factory)</span> {
        <span class="hljs-comment">// åºåˆ—åŒ–é…ç½®ï¼šè§£å†³å¯¹è±¡ä¹±ç </span>
        <span class="hljs-type">RedisCacheConfiguration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> RedisCacheConfiguration.defaultCacheConfig()
                .serializeValuesWith(RedisSerializationContext.SerializationPair
                        .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>()))
                .entryTtl(<span class="hljs-number">30</span>, TimeUnit.SECONDS); <span class="hljs-comment">// å†™å…¥å30ç§’è¿‡æœŸ</span>

        <span class="hljs-keyword">return</span> RedisCacheManager.builder(factory)
                .cacheDefaults(config)
                .build();
    }
}
</code></pre>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰yml é…ç½®ï¼šRedis è¿æ¥ä¿¡æ¯</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span> <span class="hljs-comment"># æœ€å¤§è¿æ¥æ•°</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>   <span class="hljs-comment"># æœ€å¤§ç©ºé—²è¿æ¥</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">2</span>   <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">1000ms</span> <span class="hljs-comment"># è¿æ¥ç­‰å¾…æ—¶é—´</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">3000ms</span> <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´</span>
</code></pre>
<h4 data-id="heading-13">4.3 ä¸šåŠ¡å±‚å®ç°ï¼šæ³¨è§£å¼å¤šçº§ç¼“å­˜æ“ä½œ</h4>
<p>åŸºäº SpringCache æ³¨è§£ï¼Œå®ç°<strong>å•†å“è¯¦æƒ…æŸ¥è¯¢</strong>å’Œ<strong>å•†å“åº“å­˜æ›´æ–°</strong>çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå®Œç¾è´´åˆå‰æ–‡çš„ â€œè¯·æ±‚è®¿é—®æµç¨‹â€ å’Œ â€œæ•°æ®æ›´æ–°æµç¨‹â€ï¼Œä»£ç ç®€æ´æ˜“ç»´æŠ¤ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.cache.annotation.CacheEvict;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.Cacheable;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.CachePut;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.util.Optional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> ProductMapper productMapper; <span class="hljs-comment">// æ•°æ®åº“Mapper</span>
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;

    <span class="hljs-comment">// ç©ºå€¼æ ‡è®°ï¼šè§£å†³ç¼“å­˜ç©¿é€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Product</span> <span class="hljs-variable">NULL_PRODUCT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(-<span class="hljs-number">1L</span>, <span class="hljs-string">"NULL"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.0</span>);

    <span class="hljs-comment">/**
     * å•†å“è¯¦æƒ…æŸ¥è¯¢ï¼šå¤šçº§ç¼“å­˜ï¼ˆå…ˆCaffeineï¼Œå†Redisï¼Œæœ€åDBï¼‰
     * <span class="hljs-doctag">@Cacheable</span>ï¼šç¼“å­˜æŸ¥è¯¢ç»“æœï¼ŒæŒ‡å®šæœ¬åœ°ç¼“å­˜ç®¡ç†å™¨
     */</span>
    <span class="hljs-meta">@Cacheable(value = "product", key = "#id", cacheManager = "caffeineCacheManager")</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// 1. æœ¬åœ°ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢Redis</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + id;
        <span class="hljs-type">Product</span> <span class="hljs-variable">redisProduct</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(redisKey);
        <span class="hljs-keyword">if</span> (redisProduct != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> redisProduct;
        }

        <span class="hljs-comment">// 2. Redisæœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">dbProduct</span> <span class="hljs-operator">=</span> productMapper.selectById(id);
        <span class="hljs-comment">// 3. ç©ºå€¼ç¼“å­˜ï¼šé˜²æ­¢ç©¿é€</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">cacheProduct</span> <span class="hljs-operator">=</span> Optional.ofNullable(dbProduct).orElse(NULL_PRODUCT);
        <span class="hljs-comment">// 4. å›å†™Redisï¼šè®¾ç½®60ç§’è¿‡æœŸ</span>
        redisTemplate.opsForValue().set(redisKey, cacheProduct, <span class="hljs-number">60</span>, TimeUnit.SECONDS);
        <span class="hljs-comment">// 5. è‹¥ä¸ºNULL_PRODUCTï¼Œè¿”å›nullï¼Œé¿å…ä¸šåŠ¡å±‚å¤„ç†å¼‚å¸¸</span>
        <span class="hljs-keyword">return</span> cacheProduct.equals(NULL_PRODUCT) ? <span class="hljs-literal">null</span> : cacheProduct;
    }

    <span class="hljs-comment">/**
     * å•†å“åº“å­˜æ›´æ–°ï¼šå…ˆæ›´DBï¼Œå†åˆ ç¼“å­˜ï¼ˆä¿è¯ä¸€è‡´æ€§ï¼‰
     * <span class="hljs-doctag">@CacheEvict</span>ï¼šåˆ é™¤æŒ‡å®šç¼“å­˜
     */</span>
    <span class="hljs-meta">@CacheEvict(value = "product", key = "#productId", cacheManager = "caffeineCacheManager")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProductStock</span><span class="hljs-params">(Long productId, <span class="hljs-type">int</span> delta)</span> {
        <span class="hljs-comment">// 1. æ›´æ–°æ•°æ®åº“ï¼šå…ˆè½åœ°æ•°æ®</span>
        productMapper.updateStock(productId, delta);
        <span class="hljs-comment">// 2. åˆ é™¤Redisç¼“å­˜ï¼šé¿å…æ—§æ•°æ®</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + productId;
        redisTemplate.delete(redisKey);
        <span class="hljs-comment">// 3. æœ¬åœ°ç¼“å­˜å·²é€šè¿‡@CacheEvictåˆ é™¤ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ</span>
    }
}
</code></pre>
<h4 data-id="heading-14">4.4 é›†ç¾¤åŒ–æ”¹é€ ï¼šæœ¬åœ°ç¼“å­˜ä¸€è‡´æ€§</h4>
<p>ä¸Šè¿°ä»£ç ä»…é€‚ç”¨äºå•æœºéƒ¨ç½²ï¼Œ<strong>é›†ç¾¤éƒ¨ç½²æ—¶</strong>ï¼ŒæŸä¸€å®ä¾‹æ›´æ–°æ•°æ®åï¼Œå…¶ä»–å®ä¾‹çš„æœ¬åœ°ç¼“å­˜ä»ä¼šå­˜åœ¨æ—§æ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚è§£å†³è¯¥é—®é¢˜çš„ä¸»æµæ–¹æ¡ˆæ˜¯<strong>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„ç¼“å­˜é€šçŸ¥</strong>ï¼Œæ ¸å¿ƒæ€è·¯ï¼š</p>
<ol>
<li>éƒ¨ç½²æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RocketMQ/Kafkaï¼‰ï¼Œåˆ›å»º<strong>ç¼“å­˜æ›´æ–°ä¸»é¢˜</strong>ï¼›</li>
<li>å½“æŸä¸€å®ä¾‹æ‰§è¡Œç¼“å­˜åˆ é™¤æ“ä½œæ—¶ï¼Œå‘ä¸»é¢˜å‘é€<strong>ç¼“å­˜å¤±æ•ˆæ¶ˆæ¯</strong>ï¼ˆåŒ…å«ç¼“å­˜ keyã€ç¼“å­˜åç§°ï¼‰ï¼›</li>
<li>æ‰€æœ‰åº”ç”¨å®ä¾‹å‡ä½œä¸ºæ¶ˆè´¹è€…ï¼Œç›‘å¬è¯¥ä¸»é¢˜ï¼Œæ”¶åˆ°æ¶ˆæ¯åï¼Œåˆ é™¤æœ¬åœ°å¯¹åº”ç¼“å­˜ï¼›</li>
<li>ä¿è¯æ¶ˆæ¯çš„<strong>è‡³å°‘ä¸€æ¬¡æ¶ˆè´¹</strong>ï¼Œé¿å…ç¼“å­˜å¤±æ•ˆæ¶ˆæ¯ä¸¢å¤±ã€‚</li>
</ol>
<p><strong>ç®€åŒ–å®ç°</strong>ï¼šä½¿ç”¨ Redis çš„ Pub/Sub æ›¿ä»£æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆè½»é‡ã€æ— éœ€ç‹¬ç«‹éƒ¨ç½²ï¼‰ï¼Œå®ç°ç¼“å­˜é€šçŸ¥ï¼Œé€‚åˆä¸­å°å‹é›†ç¾¤ã€‚</p>
<h3 data-id="heading-15">äº”ã€å¤šçº§ç¼“å­˜çš„ä¸€è‡´æ€§ä¿éšœ</h3>
<p>å¤šçº§ç¼“å­˜çš„æ ¸å¿ƒç—›ç‚¹æ˜¯<strong>æ•°æ®ä¸€è‡´æ€§</strong>â€”â€” å„å±‚ç¼“å­˜ä¹‹é—´ã€å„å®ä¾‹çš„æœ¬åœ°ç¼“å­˜ä¹‹é—´ï¼Œå¯èƒ½å› æ›´æ–°å»¶è¿Ÿã€ç¼“å­˜æ±¡æŸ“å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ç”±äºå¼ºä¸€è‡´æ€§ä¼šå¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡ã€é”ç­‰æœºåˆ¶ï¼Œå¯¼è‡´æ€§èƒ½å¤§å¹…ä¸‹é™ï¼Œå·¥ä¸šçº§åœºæ™¯ä¸­å‡é‡‡ç”¨<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼ˆå…è®¸çŸ­æ—¶é—´ä¸ä¸€è‡´ï¼Œæœ€ç»ˆæ‰€æœ‰ç¼“å­˜å±‚æ•°æ®æ”¶æ•›ï¼‰ï¼Œæ ¸å¿ƒä¿éšœç­–ç•¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<h4 data-id="heading-16">5.1 ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼šé€‰å¯¹ç­–ç•¥ï¼Œä»æºå¤´å‡å°‘ä¸ä¸€è‡´</h4>
<p>ä¸»æµçš„ç¼“å­˜æ›´æ–°ç­–ç•¥æœ‰ 3 ç§ï¼Œç»“åˆå¤šçº§ç¼“å­˜çš„ç‰¹æ€§ï¼Œ <strong>â€œå…ˆæ›´ DBï¼Œå†åˆ ç¼“å­˜â€</strong> æ˜¯æœ€ä¼˜é€‰æ‹©ï¼Œå…¶ä»–ç­–ç•¥ä»…é€‚ç”¨äºç‰¹æ®Šåœºæ™¯ï¼š</p>
<ol>
<li><strong>å…ˆæ›´ DBï¼Œå†åˆ ç¼“å­˜</strong>ï¼ˆæ¨èï¼‰ï¼šæ— å¹¶å‘è¦†ç›–é—®é¢˜ï¼Œå®ç°ç®€å•ï¼Œä»…å­˜åœ¨ â€œåˆ ç¼“å­˜å¤±è´¥â€ çš„å°æ¦‚ç‡é—®é¢˜ï¼Œå¯é€šè¿‡<strong>å®šæ—¶ä»»åŠ¡è¡¥å¿</strong>è§£å†³ï¼›</li>
<li><strong>å…ˆåˆ ç¼“å­˜ï¼Œå†æ›´ DB</strong>ï¼šé«˜å¹¶å‘ä¸‹ä¼šå‡ºç° â€œç¼“å­˜è„æ•°æ®â€ï¼ˆA åˆ ç¼“å­˜â†’B æŸ¥ç¼“å­˜æœªå‘½ä¸­â†’æŸ¥æ—§ DBâ†’å›å†™ç¼“å­˜â†’A æ›´ DBï¼‰ï¼Œå¯¼è‡´ç¼“å­˜æ•°æ®é•¿æœŸä¸ä¸€è‡´ï¼›</li>
<li><strong>åŒå†™ç­–ç•¥</strong>ï¼ˆæ›´æ–° DB åŒæ—¶æ›´æ–°ç¼“å­˜ï¼‰ï¼šé«˜å¹¶å‘ä¸‹ä¼šå‡ºç° â€œç¼“å­˜è¦†ç›–â€ï¼ˆA å’Œ B åŒæ—¶æ›´æ–° DBï¼Œå†å…ˆåæ›´æ–°ç¼“å­˜ï¼Œå¯¼è‡´ç¼“å­˜æ•°æ®ä¸æœ€æ–° DB æ•°æ®ä¸ä¸€è‡´ï¼‰ï¼Œä»…é€‚ç”¨äºä½å¹¶å‘åœºæ™¯ã€‚</li>
</ol>
<h4 data-id="heading-17">5.2 è¿‡æœŸæ—¶é—´ç­–ç•¥ï¼šå¼ºåˆ¶è®©è„æ•°æ®å¤±æ•ˆ</h4>
<p>ä¸ºå„å±‚ç¼“å­˜è®¾ç½®<strong>åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰</strong> ï¼Œæ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„æœ€åä¸€é“å±éšœï¼Œå³ä½¿å‡ºç°ç¼“å­˜æ›´æ–°å¤±è´¥ï¼Œè„æ•°æ®ä¹Ÿä¼šåœ¨è¿‡æœŸåè‡ªåŠ¨å¤±æ•ˆï¼Œé‡æ–°ä» DB åŠ è½½æœ€æ–°æ•°æ®ã€‚</p>
<ul>
<li>æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰ï¼šè®¾ç½®<strong>çŸ­ TTL</strong>ï¼ˆ5-10 ç§’ï¼‰ï¼Œå¿«é€Ÿæ·˜æ±°è„æ•°æ®ï¼Œé¿å…æœ¬åœ°ç¼“å­˜é•¿æœŸä¸ä¸€è‡´ï¼›</li>
<li>åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰ï¼šè®¾ç½®<strong>ä¸­ç­‰ TTL</strong>ï¼ˆ30-60 ç§’ï¼‰ï¼Œå…¼é¡¾ç¼“å­˜å‘½ä¸­ç‡å’Œæ•°æ®æ–°é²œåº¦ï¼›</li>
<li>ç©ºå€¼ç¼“å­˜ï¼šè®¾ç½®<strong>æçŸ­ TTL</strong>ï¼ˆ3-5 åˆ†é’Ÿï¼‰ï¼Œé¿å…æ— æ•ˆç©ºå€¼å ç”¨è¿‡å¤šç¼“å­˜ç©ºé—´ã€‚</li>
</ul>
<p>åŒæ—¶ï¼Œä¸º Redis ç¼“å­˜è®¾ç½®<strong>éšæœº TTL åç§»é‡</strong>ï¼ˆå¦‚ 30 ç§’ Â±5 ç§’ï¼‰ï¼Œé¿å…å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸå¯¼è‡´çš„é›ªå´©é—®é¢˜ã€‚</p>
<h4 data-id="heading-18">5.3 å¼‚æ­¥åŒæ­¥ç­–ç•¥ï¼šè§£å†³é›†ç¾¤æœ¬åœ°ç¼“å­˜ä¸€è‡´æ€§</h4>
<p>å¦‚å‰æ–‡æ‰€è¿°ï¼Œé›†ç¾¤éƒ¨ç½²æ—¶çš„æœ¬åœ°ç¼“å­˜ä¸€è‡´æ€§ï¼Œé€šè¿‡ <strong>â€œæ¶ˆæ¯é€šçŸ¥ + å¼‚æ­¥åˆ é™¤â€</strong> å®ç°ï¼Œä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼š</p>





























<table><thead><tr><th>åŒæ­¥æ–¹æ¡ˆ</th><th>å®ç°éš¾åº¦</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Redis Pub/Sub</td><td>ä½</td><td>é«˜</td><td>ä¸­å°å‹é›†ç¾¤ã€å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸€èˆ¬çš„åœºæ™¯</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRocketMQ/Kafkaï¼‰</td><td>ä¸­</td><td>é«˜</td><td>å¤§å‹é›†ç¾¤ã€æ ¸å¿ƒä¸šåŠ¡åœºæ™¯</td></tr><tr><td>åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼ˆNacos/Apolloï¼‰</td><td>ä¸­</td><td>ä¸­</td><td>é…ç½®ç±»ç¼“å­˜ã€ä½é¢‘æ›´æ–°æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-19">å…­ã€å¤šçº§ç¼“å­˜ç»å…¸é—®é¢˜è§£å†³</h3>
<p>ç¼“å­˜ç³»ç»Ÿçš„ä¸‰å¤§ç»å…¸é—®é¢˜ â€”â€”<strong>ç©¿é€ã€å‡»ç©¿ã€é›ªå´©</strong>ï¼Œåœ¨å¤šçº§ç¼“å­˜æ¶æ„ä¸­å¯é€šè¿‡<strong>åˆ†å±‚é˜²æŠ¤</strong>å®ç°æ›´é«˜æ•ˆçš„è§£å†³ï¼Œç›¸æ¯”å•ä¸€ç¼“å­˜å±‚ï¼Œé˜²æŠ¤æ‰‹æ®µæ›´ä¸°å¯Œã€æ•ˆæœæ›´å½»åº•ã€‚</p>
<h4 data-id="heading-20">6.1 ç¼“å­˜ç©¿é€ï¼šæ‹¦æˆªæ— æ•ˆè¯·æ±‚ï¼Œé¿å…ç©¿é€åˆ° DB</h4>
<p><strong>é—®é¢˜å®šä¹‰</strong>ï¼šè¯·æ±‚æŸ¥è¯¢çš„æ•°åœ¨æ‰€æœ‰ç¼“å­˜å±‚å’Œ DB ä¸­å‡ä¸å­˜åœ¨ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ç©¿é€åˆ° DBï¼Œè‹¥é­é‡æ¶æ„è¯·æ±‚ï¼ˆå¦‚ä¼ªé€ ä¸å­˜åœ¨çš„å•†å“ IDï¼‰ï¼Œä¼šå‹å®æ•°æ®åº“ã€‚<strong>å¤šçº§ç¼“å­˜é˜²æŠ¤æ–¹æ¡ˆ</strong>ï¼ˆåŒé‡é˜²æŠ¤ï¼Œå±‚å±‚æ‹¦æˆªï¼‰ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€å±‚ï¼šæ¥å£å±‚å‚æ•°æ ¡éªŒ</strong>ï¼šåœ¨ Controller/Gateway å±‚å¯¹è¯·æ±‚å‚æ•°åšå¼ºæ ¡éªŒï¼ˆå¦‚ ID å¿…é¡»å¤§äº 0ã€ç¬¦åˆä¸šåŠ¡è§„åˆ™ï¼‰ï¼Œç›´æ¥æ‹¦æˆªæ˜æ˜¾æ— æ•ˆçš„è¯·æ±‚ï¼›</li>
<li><strong>ç¬¬äºŒå±‚ï¼šç©ºå€¼ç¼“å­˜</strong>ï¼šåœ¨ Caffeine å’Œ Redis ä¸­ç¼“å­˜ç©ºå€¼ï¼ˆå¦‚å‰æ–‡çš„ NULL_PRODUCTï¼‰ï¼Œè®¾ç½®çŸ­ TTLï¼Œè®©åç»­ç›¸åŒæ— æ•ˆè¯·æ±‚è¢«ç¼“å­˜æ‹¦æˆªï¼›</li>
<li><strong>è¿›é˜¶æ–¹æ¡ˆï¼šå¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼šå°† DB ä¸­æ‰€æœ‰æœ‰æ•ˆä¸»é”®ï¼ˆå¦‚å•†å“ IDã€ç”¨æˆ· IDï¼‰é¢„å…ˆåŠ è½½åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè¯·æ±‚å…ˆç»è¿‡è¿‡æ»¤å™¨æ ¡éªŒï¼Œ<strong>ä¸å­˜åœ¨çš„é”®ç›´æ¥æ‹¦æˆª</strong>ï¼Œä»…å¯èƒ½å­˜åœ¨çš„é”®æ‰è¿›å…¥ç¼“å­˜å±‚ï¼Œé€‚åˆè¶…å¤§è§„æ¨¡æ•°æ®åœºæ™¯ï¼ˆå¦‚åƒä¸‡çº§å•†å“åº“ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-21">6.2 ç¼“å­˜å‡»ç©¿ï¼šä¿æŠ¤çƒ­ç‚¹æ•°æ®ï¼Œé¿å…å•ç‚¹ç©¿é€</h4>
<p><strong>é—®é¢˜å®šä¹‰</strong>ï¼šæŸä¸ª<strong>è¶…é«˜è®¿é—®é‡çš„çƒ­ç‚¹æ•°æ®</strong>ï¼ˆå¦‚ç§’æ€å•†å“ï¼‰åœ¨ç¼“å­˜ä¸­è¿‡æœŸçš„ç¬é—´ï¼Œå¤§é‡å¹¶å‘è¯·æ±‚åŒæ—¶ç©¿é€åˆ° DBï¼Œå¯¼è‡´æ•°æ®åº“å•ç‚¹å‹åŠ›éª¤å¢ã€‚<strong>å¤šçº§ç¼“å­˜é˜²æŠ¤æ–¹æ¡ˆ</strong>ï¼ˆçƒ­ç‚¹æ•°æ®ä¸“å±é˜²æŠ¤ï¼‰ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€å±‚ï¼šçƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong>ï¼šå¯¹ç§’æ€ã€é¦–é¡µç„¦ç‚¹å›¾ç­‰æ ¸å¿ƒçƒ­ç‚¹æ•°æ®ï¼Œè®¾ç½®<strong>ç‰©ç†æ°¸ä¸è¿‡æœŸ</strong>ï¼Œé€šè¿‡<strong>æ‰‹åŠ¨æ›´æ–° / åˆ é™¤</strong>æ§åˆ¶ç¼“å­˜ç”Ÿå‘½å‘¨æœŸï¼Œä»æºå¤´é¿å…è¿‡æœŸï¼›</li>
<li><strong>ç¬¬äºŒå±‚ï¼šæœ¬åœ°é” + åˆ†å¸ƒå¼é”åŒé‡é”</strong>ï¼šç¼“å­˜è¿‡æœŸåï¼Œé€šè¿‡<strong>æœ¬åœ°é”ï¼ˆsynchronizedï¼‰</strong> æ‹¦æˆªå•æœºå†…çš„å¹¶å‘è¯·æ±‚ï¼Œå†é€šè¿‡<strong>Redis åˆ†å¸ƒå¼é”ï¼ˆRedissonï¼‰</strong> æ‹¦æˆªé›†ç¾¤å†…çš„å¹¶å‘è¯·æ±‚ï¼Œä»…å…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢ DB å¹¶æ›´æ–°ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ç¼“å­˜æ›´æ–°åå†æŸ¥è¯¢ï¼›</li>
<li><strong>ç¬¬ä¸‰å±‚ï¼šçƒ­ç‚¹æ•°æ®é¢„çƒ­</strong>ï¼šç³»ç»Ÿå¯åŠ¨æ—¶ / æµé‡é«˜å³°å‰ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡å°†çƒ­ç‚¹æ•°æ®ä¸»åŠ¨åŠ è½½åˆ° Caffeine å’Œ Redis ä¸­ï¼Œé¿å…ç¼“å­˜å†·å¯åŠ¨å¯¼è‡´çš„å‡»ç©¿ã€‚</li>
</ol>
<h4 data-id="heading-22">6.3 ç¼“å­˜é›ªå´©ï¼šåˆ†æ•£è¿‡æœŸæ—¶é—´ï¼Œé¿å…é›†ä½“ç©¿é€</h4>
<p><strong>é—®é¢˜å®šä¹‰</strong>ï¼šå¤§é‡ç¼“å­˜æ•°æ®åœ¨<strong>åŒä¸€æ—¶é—´ç‚¹è¿‡æœŸ</strong>ï¼Œæˆ–åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ï¼ˆRedisï¼‰å®•æœºï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚ç¬é—´æ¶Œå‘ DBï¼Œå¼•å‘æ•°æ®åº“é›ªå´©ï¼Œè¿›è€Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿç˜«ç—ªã€‚<strong>å¤šçº§ç¼“å­˜é˜²æŠ¤æ–¹æ¡ˆ</strong>ï¼ˆæ¶æ„çº§é˜²æŠ¤ï¼Œå®¹é”™æ€§æ‹‰æ»¡ï¼‰ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€å±‚ï¼šå·®å¼‚åŒ– TTL</strong>ï¼šä¸º Redis ç¼“å­˜è®¾ç½®<strong>éšæœºè¿‡æœŸæ—¶é—´åç§»é‡</strong>ï¼ˆå¦‚åŸºç¡€ TTL30 ç§’ + éšæœº 0-5 ç§’ï¼‰ï¼Œè®©ç¼“å­˜è¿‡æœŸæ—¶é—´åˆ†æ•£ï¼Œé¿å…é›†ä½“å¤±æ•ˆï¼›</li>
<li><strong>ç¬¬äºŒå±‚ï¼šå¤šçº§ç¼“å­˜å…œåº•</strong>ï¼šå³ä½¿ Redis é›†ç¾¤å®•æœºï¼ŒCaffeine æœ¬åœ°ç¼“å­˜ä»èƒ½æ‹¦æˆªå¤§éƒ¨åˆ†çƒ­ç‚¹è¯·æ±‚ï¼Œä¿è¯æ ¸å¿ƒä¸šåŠ¡å¯ç”¨ï¼ŒåŒæ—¶è§¦å‘å‘Šè­¦æœºåˆ¶ï¼›</li>
<li><strong>ç¬¬ä¸‰å±‚ï¼šç¼“å­˜é«˜å¯ç”¨ + æœåŠ¡é™çº§</strong>ï¼šRedis é‡‡ç”¨ Cluster/Sentinel é›†ç¾¤éƒ¨ç½²ï¼Œé¿å…å•ç‚¹æ•…éšœï¼›åŒæ—¶ç»“åˆ Hystrix/Sentinel å®ç°æœåŠ¡é™çº§ï¼Œå½“ DB å‹åŠ›è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œç›´æ¥è¿”å›æœ¬åœ°ç¼“å­˜çš„å…œåº•æ•°æ®ï¼Œæ”¾å¼ƒéƒ¨åˆ†æ•°æ®æ–°é²œåº¦ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§ï¼›</li>
<li><strong>ç¬¬å››å±‚ï¼šæ•°æ®åº“é™æµ</strong>ï¼šåœ¨ DB ä»£ç†å±‚ï¼ˆå¦‚ MyCatï¼‰è®¾ç½®è®¿é—®é™æµï¼Œæ§åˆ¶æ¯ç§’è®¿é—® DB çš„è¯·æ±‚æ•°ï¼Œé¿å…æ•°æ®åº“è¢«å‹å®ã€‚</li>
</ol>
<h3 data-id="heading-23">ä¸ƒã€å¤šçº§ç¼“å­˜è°ƒä¼˜ä¸ç›‘æ§</h3>
<h4 data-id="heading-24">7.1 æ€§èƒ½è°ƒä¼˜å…³é”®å‚æ•°</h4>
<p>å¤šçº§ç¼“å­˜çš„æ€§èƒ½è°ƒä¼˜æ ¸å¿ƒæ˜¯<strong>å¹³è¡¡ç¼“å­˜å‘½ä¸­ç‡å’Œèµ„æºå ç”¨</strong>ï¼Œå…³é”®å‚æ•°è°ƒæ•´åŸåˆ™ï¼š</p>
<ol>
<li><strong>Caffeine è°ƒä¼˜</strong>ï¼š<code>maximumSize</code>æ ¹æ® JVM å†…å­˜åˆç†è®¾ç½®ï¼ˆå¦‚å•æœº 1G å†…å­˜è®¾ç½® 1000-2000 æ¡ï¼‰ï¼Œé¿å… OOMï¼›ä¼˜å…ˆä½¿ç”¨<code>expireAfterWrite</code>ï¼ˆå†™å…¥åè¿‡æœŸï¼‰è€Œé<code>expireAfterAccess</code>ï¼ˆè®¿é—®åè¿‡æœŸï¼‰ï¼Œå‡å°‘æ€§èƒ½å¼€é”€ï¼›</li>
<li><strong>Redis è°ƒä¼˜</strong>ï¼šå¼€å¯æŒä¹…åŒ–ï¼ˆRDB+AOF æ··åˆï¼‰ï¼Œé¿å…æ•°æ®ä¸¢å¤±ï¼›ä¼˜åŒ–è¿æ¥æ± å‚æ•°ï¼ˆå¦‚<code>max-active</code>æ ¹æ®å¹¶å‘é‡è®¾ç½®ï¼‰ï¼Œå‡å°‘è¿æ¥ç­‰å¾…ï¼›ä½¿ç”¨ Redis Cluster é›†ç¾¤ï¼Œæå‡å¹¶å‘èƒ½åŠ›ï¼›</li>
<li><strong>JVM è°ƒä¼˜</strong>ï¼šå¼€å¯ G1GCï¼Œè®¾ç½®<code>-XX:MaxGCPauseMillis=100</code>ï¼Œå‡å°‘ GC åœé¡¿å¯¹æœ¬åœ°ç¼“å­˜çš„å½±å“ï¼›åˆç†è®¾ç½® JVM å †å†…å­˜ï¼Œä¸ºæœ¬åœ°ç¼“å­˜é¢„ç•™è¶³å¤Ÿç©ºé—´ã€‚</li>
</ol>
<h4 data-id="heading-25">7.2 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡</h4>
<p>æ— ç›‘æ§ä¸æ¶æ„ï¼Œå¤šçº§ç¼“å­˜éœ€è¦ç›‘æ§<strong>å„å±‚ç¼“å­˜çš„æ ¸å¿ƒæŒ‡æ ‡</strong>ï¼ŒåŠæ—¶å‘ç°ç¼“å­˜å¤±æ•ˆã€å‘½ä¸­ç‡ä½ç­‰é—®é¢˜ï¼Œä¸»æµç›‘æ§æ–¹æ¡ˆä¸º Prometheus+Grafanaï¼š</p>
<ol>
<li><strong>ç¼“å­˜å‘½ä¸­ç‡</strong>ï¼šæ ¸å¿ƒæŒ‡æ ‡ï¼Œæœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰å‘½ä¸­ç‡åº”â‰¥90%ï¼ŒRedis å‘½ä¸­ç‡åº”â‰¥95%ï¼Œå‘½ä¸­ç‡è¿‡ä½éœ€åˆ†ææ•°æ®åˆ†å¸ƒï¼Œè°ƒæ•´ç¼“å­˜ç­–ç•¥ï¼›</li>
<li><strong>ç¼“å­˜æœªå‘½ä¸­ç‡</strong>ï¼šæŒç»­åé«˜éœ€æ’æŸ¥æ˜¯å¦å­˜åœ¨ç©¿é€ã€å‡»ç©¿é—®é¢˜ï¼›</li>
<li><strong>Redis æŒ‡æ ‡</strong>ï¼šCPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç½‘ç»œ IOã€è¿æ¥æ•°ï¼Œé¿å… Redis æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼›</li>
<li><strong>æ•°æ®åº“æŒ‡æ ‡</strong>ï¼šQPSã€è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢æ•°ï¼ŒéªŒè¯ç¼“å­˜æ‹¦æˆªæ•ˆæœï¼Œè‹¥æ•°æ®åº“ QPS æŒç»­åé«˜ï¼Œéœ€ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ã€‚</li>
</ol>
<p><strong>ç›‘æ§å®ç°</strong>ï¼šCaffeine è‡ªå¸¦ç›‘æ§æŒ‡æ ‡ï¼Œå¯é€šè¿‡<code>Cache.stats()</code>è·å–ï¼›Redis å¯é€šè¿‡ Exporter é‡‡é›†æŒ‡æ ‡ï¼›æœ€ç»ˆåœ¨ Grafana ä¸­åˆ¶ä½œå¯è§†åŒ–å¤§ç›˜ï¼Œè®¾ç½®æŒ‡æ ‡å‘Šè­¦ï¼ˆå¦‚å‘½ä¸­ç‡ä½äº 90% æ—¶è§¦å‘çŸ­ä¿¡ / é’‰é’‰å‘Šè­¦ï¼‰ã€‚</p>
<h3 data-id="heading-26">å…«ã€å¤§å‚è½åœ°æœ€ä½³å®è·µ</h3>
<p>å¤šçº§ç¼“å­˜åœ¨é˜¿é‡Œã€äº¬ä¸œã€æ‹¼å¤šå¤šç­‰å¤§å‚çš„é«˜å¹¶å‘åœºæ™¯ä¸­å·²å¹¿æ³›è½åœ°ï¼Œæ€»ç»“å…¶<strong>æ ¸å¿ƒè½åœ°ç»éªŒ</strong>ï¼Œè®©æŠ€æœ¯è½åœ°æ›´è´´åˆç”Ÿäº§ç¯å¢ƒï¼š</p>
<ol>
<li><strong>æ•°æ®åˆ†å±‚å­˜å‚¨</strong>ï¼šæœ¬åœ°ç¼“å­˜ä»…å­˜<strong>TOP 10% çš„é«˜é¢‘çƒ­ç‚¹æ•°æ®</strong>ï¼Œå…¶ä½™æ•°æ®å­˜åœ¨ Redisï¼Œé¿å…æœ¬åœ°ç¼“å­˜å ç”¨è¿‡å¤š JVM å†…å­˜ï¼›</li>
<li><strong>é¿å…è¿‡åº¦è®¾è®¡</strong>ï¼šä¸­å°å‹ç³»ç»Ÿä¼˜å…ˆä½¿ç”¨ â€œCaffeine+Redisâ€ äºŒçº§æ¶æ„ï¼Œæ— éœ€å¼•å…¥æ›´å¤šç¼“å­˜å±‚ï¼Œå¢åŠ æ¶æ„å¤æ‚åº¦ï¼›</li>
<li><strong>ç¼“å­˜æ›´æ–°å¤±è´¥è¡¥å¿</strong>ï¼šé’ˆå¯¹ â€œåˆ ç¼“å­˜å¤±è´¥â€ é—®é¢˜ï¼Œå¢åŠ <strong>å®šæ—¶ä»»åŠ¡è¡¥å¿</strong>ï¼ˆå¦‚æ¯åˆ†é’Ÿæ‰«æ DB æ›´æ–°æ—¥å¿—ï¼Œå¯¹æ¯”ç¼“å­˜æ•°æ®ï¼Œåˆ é™¤ä¸ä¸€è‡´çš„ç¼“å­˜ï¼‰ï¼›</li>
<li><strong>å†·å¯åŠ¨é˜²æŠ¤</strong>ï¼šç³»ç»Ÿé‡å¯æ—¶ï¼Œå…ˆé€šè¿‡é¢„çƒ­è„šæœ¬åŠ è½½çƒ­ç‚¹æ•°æ®ï¼Œå†å¯¹å¤–æä¾›æœåŠ¡ï¼Œé¿å…å†·å¯åŠ¨å¯¼è‡´çš„ç¼“å­˜ç©¿é€ã€å‡»ç©¿ï¼›</li>
<li><strong>ç°åº¦å‘å¸ƒ</strong>ï¼šç¼“å­˜ç­–ç•¥å˜æ›´ï¼ˆå¦‚ TTL è°ƒæ•´ã€æ•°æ®åˆ†å±‚å˜æ›´ï¼‰æ—¶ï¼Œé‡‡ç”¨ç°åº¦å‘å¸ƒï¼Œé€æ­¥æ‰©å¤§èŒƒå›´ï¼Œé¿å…å…¨é‡å‘å¸ƒå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-27">ä¹ã€æ€»ç»“</h3>
<p>å¤šçº§ç¼“å­˜å¹¶éç®€å•çš„ â€œæœ¬åœ°ç¼“å­˜ + åˆ†å¸ƒå¼ç¼“å­˜â€ ç»„åˆï¼Œè€Œæ˜¯ä¸€å¥—<strong>å…¼é¡¾æ€§èƒ½ã€ä¸€è‡´æ€§ã€é«˜å¯ç”¨</strong>çš„å±‚æ¬¡åŒ–æ¶æ„è®¾è®¡æ€æƒ³ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºé€šè¿‡åˆ†å±‚æ‹¦æˆªè¯·æ±‚ï¼Œå°†æ€§èƒ½åšåˆ°æè‡´ï¼ŒåŒæ—¶é€šè¿‡æœ€ç»ˆä¸€è‡´æ€§ç­–ç•¥ã€åˆ†å±‚é˜²æŠ¤æ‰‹æ®µï¼Œè§£å†³ç¼“å­˜çš„ç»å…¸é—®é¢˜ï¼Œæˆä¸ºæ”¯æ’‘ç™¾ä¸‡çº§ QPS é«˜å¹¶å‘ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
<p>æœ¬æ–‡ç»“åˆ SpringBoot+Caffeine+Redis çš„å®æˆ˜æ¡ˆä¾‹ï¼Œä»æ¶æ„è®¾è®¡åˆ°ä»£ç å®ç°ï¼Œä»ä¸€è‡´æ€§ä¿éšœåˆ°é—®é¢˜è§£å†³ï¼Œå®ç°äº†æŠ€æœ¯çš„å…¨é“¾è·¯è½åœ°ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ— éœ€ç”Ÿæ¬ç¡¬å¥—ï¼Œå¯æ ¹æ®<strong>ä¸šåŠ¡è§„æ¨¡ã€å¹¶å‘é‡ã€æ•°æ®ä¸€è‡´æ€§è¦æ±‚</strong>ï¼Œçµæ´»è°ƒæ•´ç¼“å­˜æ¶æ„å’Œç­–ç•¥ â€”â€” ä¸­å°å‹ç³»ç»Ÿä¼˜å…ˆä¿è¯è½åœ°ç®€å•ï¼Œå¤§å‹é«˜å¹¶å‘ç³»ç»Ÿé‡ç‚¹åšå¥½ç¼“å­˜åˆ†å±‚ã€ç›‘æ§å’Œå®¹é”™ã€‚</p>
<p>ç¼“å­˜çš„æœ¬è´¨æ˜¯<strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong>ï¼Œè€Œå¤šçº§ç¼“å­˜åˆ™æ˜¯è®©è¿™ä»½ â€œäº¤æ¢â€ çš„æ€§ä»·æ¯”è¾¾åˆ°æœ€é«˜ï¼Œè¿™ä¹Ÿæ˜¯å…¶èƒ½æˆä¸ºé«˜å¹¶å‘ç³»ç»Ÿæ ‡é…çš„æ ¹æœ¬åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€åˆ†é’Ÿä¸ºæ¥å…¥æœ€çµæ´»çš„æ“ä½œæ—¥å¿—ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7601374137411731491</link>    <guid>https://juejin.cn/post/7601374137411731491</guid>    <pubDate>2026-02-01T13:40:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601374137411731491" data-draft-id="7601355703240048680" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€åˆ†é’Ÿä¸ºæ¥å…¥æœ€çµæ´»çš„æ“ä½œæ—¥å¿—ç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T13:40:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒ½å¸‚æ¡ƒæº"/> <meta itemprop="url" content="https://juejin.cn/user/1943592291015944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€åˆ†é’Ÿä¸ºæ¥å…¥æœ€çµæ´»çš„æ“ä½œæ—¥å¿—ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592291015944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒ½å¸‚æ¡ƒæº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T13:40:46.000Z" title="Sun Feb 01 2026 13:40:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>common-audit-log æ˜¯ä¸€ä¸ªåŸºäº AOP çš„å®¡è®¡æ—¥å¿—ç»„ä»¶ï¼Œæ”¯æŒæ“ä½œæ—¥å¿—çš„è‡ªåŠ¨æ”¶é›†ã€å·®å¼‚æ¯”å¯¹å’Œå­˜å‚¨ã€‚è¯¥ç»„ä»¶é€šè¿‡æ³¨è§£æ–¹å¼è½»æ¾é›†æˆåˆ° Spring Boot åº”ç”¨ä¸­ï¼Œå®ç°æ“ä½œæ—¥å¿—çš„è‡ªåŠ¨åŒ–è®°å½•ã€‚</p>
<h2 data-id="heading-1">2. æ ¸å¿ƒç‰¹æ€§</h2>
<ul>
<li><strong>æ³¨è§£é©±åŠ¨</strong>ï¼šé€šè¿‡ç®€å•çš„æ³¨è§£å³å¯å®ç°æ—¥å¿—è®°å½•</li>
<li><strong>SpEL è¡¨è¾¾å¼æ”¯æŒ</strong>ï¼šåŠ¨æ€å¡«å……æ—¥å¿—æ“ä½œæè¿°,æ“ä½œåˆ†ç±»,æ“ä½œæ•°æ®idç­‰ä¿¡æ¯</li>
<li><strong>å·®å¼‚æ¯”å¯¹</strong>ï¼šæ”¯æŒæ“ä½œå‰åæ•°æ®å·®å¼‚è‡ªåŠ¨æ¯”å¯¹</li>
<li><strong>æ”¯æŒå¤šå±‚çº§åµŒå¥—è°ƒç”¨æ—¥å¿—</strong>ï¼šæ”¯æŒå¤šå±‚çº§åµŒå¥—è°ƒç”¨æ—¥å¿—</li>
<li><strong>æ¡ä»¶æ€§è®°å½•</strong>ï¼šæ”¯æŒæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦è®°å½•æ—¥å¿—</li>
<li><strong>å¼‚æ­¥æ”¶é›†</strong>ï¼šæ”¯æŒå¼‚æ­¥æ—¥å¿—æ”¶é›†ï¼Œä¸å½±å“ä¸»ä¸šåŠ¡æ€§èƒ½</li>
<li><strong>é…å¥—æŸ¥è¯¢ç³»ç»Ÿ(å¯é€‰)</strong>ï¼š æ”¯æŒå¤šç»´æ¡ä»¶æŸ¥è¯¢æ—¥å¿—,å¼€ç®±å³ç”¨</li>
</ul>
<h2 data-id="heading-2">3. æ¨¡å—è¯´æ˜</h2>





















<table><thead><tr><th>æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>common-audit-log-core</td><td>æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ŒåŒ…å«æ³¨è§£ã€AOP åˆ‡é¢ã€å·®å¼‚æ¯”å¯¹ç­‰</td></tr><tr><td>common-audit-log-runtime</td><td>è¿è¡Œæ—¶é…ç½®æ¨¡å—ï¼ŒåŒ…å«è‡ªåŠ¨é…ç½®å’Œå±æ€§é…ç½®</td></tr><tr><td>common-audit-log-web</td><td>æ—¥å¿—æŸ¥è¯¢é…å¥—ç³»ç»Ÿå’Œæ¥å…¥ç¤ºä¾‹</td></tr></tbody></table>
<h2 data-id="heading-3">4. å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-4">4.1 æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.taoyuanx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common-audit-log-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.taoyuanx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common-audit-log-runtime<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">4.2 é…ç½®æ–‡ä»¶</h3>
<p>åœ¨ <code>application.yml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">audit:</span>
  <span class="hljs-attr">log:</span>
    <span class="hljs-comment"># æ˜¯å¦å¼‚æ­¥å¤„ç†æ—¥å¿—</span>
    <span class="hljs-attr">async:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># å¼‚æ­¥é˜Ÿåˆ—å¤§å°</span>
    <span class="hljs-attr">log-queue-size:</span> <span class="hljs-number">1000</span>
    <span class="hljs-comment"># å¼‚æ­¥æ”¶é›†çº¿ç¨‹æ”¶é›†é—´éš”ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-attr">collect-interval:</span> <span class="hljs-number">50</span>
    <span class="hljs-comment"># æ”¶é›†é˜Ÿåˆ—æ»¡æ—¶çš„ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œè´Ÿæ•°åˆ™å…¥é˜Ÿå¤±è´¥ä¸¢å¼ƒ</span>
    <span class="hljs-attr">queue-full-wait-time:</span> <span class="hljs-number">2000</span>
</code></pre>
<h3 data-id="heading-6">4.3 å¯ç”¨è‡ªåŠ¨é…ç½®</h3>
<p>ç¡®ä¿ Spring Boot å¯åŠ¨ç±»æ‰«æåˆ°ç»„ä»¶åŒ…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@ComponentScan(basePackages = {"com.taoyuanx.common.audit.log"})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(Application.class, args);
    }
}
</code></pre>
<h2 data-id="heading-7">5. æ ¸å¿ƒæ³¨è§£</h2>
<h3 data-id="heading-8">5.1 @OperateLog</h3>
<p>æ ‡å‡†çš„æ“ä½œæ—¥å¿—æ³¨è§£ï¼Œç”¨äºæ ‡è®°éœ€è¦è®°å½•æ—¥å¿—çš„æ–¹æ³•ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>





















































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>bizType</td><td>String</td><td>æ˜¯</td><td>ä¸šåŠ¡ç±»å‹ï¼Œå¦‚"ç”¨æˆ·ç®¡ç†"ã€"è®¢å•ç®¡ç†"</td></tr><tr><td>subBizType</td><td>String</td><td>å¦</td><td>å­ä¸šåŠ¡ç±»å‹</td></tr><tr><td>operateObject</td><td>String</td><td>å¦</td><td>æ“ä½œå¯¹è±¡ï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼</td></tr><tr><td>success</td><td>String</td><td>æ˜¯</td><td>æ“ä½œæˆåŠŸæ—¶çš„æ—¥å¿—æè¿°æ¨¡æ¿ï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼</td></tr><tr><td>fail</td><td>String</td><td>å¦</td><td>æ“ä½œå¤±è´¥æ—¶çš„æ—¥å¿—æè¿°æ¨¡æ¿ï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼</td></tr><tr><td>condition</td><td>String</td><td>å¦</td><td>è®°å½•æ¡ä»¶ï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼ï¼Œtrue æ‰è®°å½•</td></tr><tr><td>ignoreException</td><td>Class[]</td><td>å¦</td><td>å¿½ç•¥çš„å¼‚å¸¸ç±»å‹</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/user/add")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ–°å¢äº†ç”¨æˆ·:' + #result.get('username')",
    fail = "'æ–°å¢ç”¨æˆ·å¤±è´¥:' + #error.message",
    bizType = "ç”¨æˆ·ç®¡ç†",
    operateObject = "#result.get('username')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-9">5.2 @SimpleOperateLog</h3>
<p>ç®€åŒ–ç‰ˆæ“ä½œæ—¥å¿—æ³¨è§£ï¼Œé€‚ç”¨äºç®€å•åœºæ™¯ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>bizType</td><td>String</td><td>æ˜¯</td><td>ä¸šåŠ¡ç±»å‹</td></tr><tr><td>subBizType</td><td>String</td><td>å¦</td><td>å­ä¸šåŠ¡ç±»å‹</td></tr><tr><td>operateObject</td><td>String</td><td>å¦</td><td>æ“ä½œå¯¹è±¡</td></tr><tr><td>operateDesc</td><td>String</td><td>æ˜¯</td><td>æ“ä½œæè¿°ï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/user/add")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@SimpleOperateLog(
    operateDesc = "'æ–°å¢äº†ç”¨æˆ·:' + #params.get('username')",
    bizType = "ç”¨æˆ·ç®¡ç†",
    operateObject = "#params.get('username')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-10">5.3 @LogDiff</h3>
<p>æ•°æ®å·®å¼‚æ¯”å¯¹æ³¨è§£ï¼Œé…åˆ @OperateLog ä½¿ç”¨ï¼Œç”¨äºè®°å½•æ•°æ®å˜æ›´å‰åå¯¹æ¯”ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>





























<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>before</td><td>String</td><td>å¦</td><td>æ“ä½œå‰æ•°æ®è·å–è¡¨è¾¾å¼</td></tr><tr><td>after</td><td>String</td><td>å¦</td><td>æ“ä½œåæ•°æ®è·å–è¡¨è¾¾å¼</td></tr><tr><td>diffHandler</td><td>Class</td><td>å¦</td><td>å¯¹è±¡å¯¹æ¯”å™¨ï¼Œé»˜è®¤ NoDiffHandler</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–°å¢æ“ä½œï¼ˆåªæœ‰æ“ä½œåæ•°æ®ï¼‰</span>
<span class="hljs-meta">@PostMapping("/user/add")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ–°å¢äº†ç”¨æˆ·:' + #result.get('username')",
    bizType = "ç”¨æˆ·ç®¡ç†",
    operateObject = "#result.get('username')"
)</span>
<span class="hljs-meta">@LogDiff(after = "#result")</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// åˆ é™¤æ“ä½œï¼ˆåªæœ‰æ“ä½œå‰æ•°æ®ï¼‰</span>
<span class="hljs-meta">@PostMapping("/user/delete")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'åˆ é™¤äº†ç”¨æˆ·:' + #params.get('userId')",
    bizType = "ç”¨æˆ·ç®¡ç†"
)</span>
<span class="hljs-meta">@LogDiff(before = "#result.get('deletedUser')")</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æ›´æ–°æ“ä½œï¼ˆæœ‰å‰åæ•°æ®ï¼‰</span>
<span class="hljs-meta">@PostMapping("/user/update")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ›´æ–°äº†ç”¨æˆ·:' + #result.get('username')",
    bizType = "ç”¨æˆ·ç®¡ç†"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// é€šè¿‡ä¸Šä¸‹æ–‡è®¾ç½®å‰åæ•°æ®</span>
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_BEFORE_OBJECT, beforeUser);
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_AFTER_OBJECT, afterUser);
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h2 data-id="heading-11">6. SpEL è¡¨è¾¾å¼æ”¯æŒ</h2>
<p>ç»„ä»¶æ”¯æŒ Spring SpEL è¡¨è¾¾å¼ï¼Œå¸¸ç”¨å˜é‡å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th>å˜é‡</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>#params</code></td><td>æ–¹æ³•å‚æ•°</td><td><code>#params.get('username')</code></td></tr><tr><td><code>#result</code></td><td>æ–¹æ³•è¿”å›å€¼</td><td><code>#result.get('id')</code></td></tr><tr><td><code>#error</code></td><td>å¼‚å¸¸å¯¹è±¡</td><td><code>#error.message</code></td></tr><tr><td><code>#operateObject</code></td><td>æ“ä½œå¯¹è±¡</td><td><code>#operateObject</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@OperateLog(
    success = "'æ“ä½œäºº:' + #params.get('operator') + ' å¤„ç†äº†è®¢å•:' + #result.get('orderId')",
    bizType = "è®¢å•ç®¡ç†",
    operateObject = "#result.get('orderId')"
)</span>
</code></pre>
<h2 data-id="heading-12">7. ä¸Šä¸‹æ–‡å·¥å…·ç±»</h2>
<p><code>AuditLogContextUtil</code> æä¾›ä¸Šä¸‹æ–‡ç®¡ç†åŠŸèƒ½ï¼Œç”¨äºåœ¨ä»£ç ä¸­è®¾ç½®è‡ªå®šä¹‰ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-13">7.1 å¸¸ç”¨å¸¸é‡</h3>





































<table><thead><tr><th>å¸¸é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>CONTEXT_KEY_OPERATOR</td><td>æ“ä½œäºº</td></tr><tr><td>CONTEXT_KEY_TENANT</td><td>ç§Ÿæˆ·</td></tr><tr><td>CONTEXT_KEY_BEFORE_OBJECT</td><td>æ“ä½œå‰å¯¹è±¡</td></tr><tr><td>CONTEXT_KEY_AFTER_OBJECT</td><td>æ“ä½œåå¯¹è±¡</td></tr><tr><td>CONTEXT_KEY_OPERATE_DSL</td><td>æ“ä½œ DSL</td></tr><tr><td>CONTEXT_KEY_TRACE_ID</td><td>è¿½è¸ª ID</td></tr><tr><td>CONTEXT_KEY_EXT</td><td>æ‰©å±•ä¿¡æ¯</td></tr></tbody></table>
<h3 data-id="heading-14">7.2 å¸¸ç”¨æ–¹æ³•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®æ“ä½œäºº</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_OPERATOR, <span class="hljs-string">"admin"</span>);

<span class="hljs-comment">// è®¾ç½®ç§Ÿæˆ·</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_TENANT, <span class="hljs-string">"tenant1"</span>);

<span class="hljs-comment">// è®¾ç½®æ“ä½œå‰åå¯¹è±¡ï¼ˆç”¨äºå·®å¼‚æ¯”å¯¹ï¼‰</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_BEFORE_OBJECT, beforeData);
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_AFTER_OBJECT, afterData);

<span class="hljs-comment">// è®¾ç½®è‡ªå®šä¹‰æ“ä½œè¯¦æƒ…</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_OPERATE_DSL, customDetail);

<span class="hljs-comment">// è®¾ç½®æ‰©å±•ä¿¡æ¯</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_EXT, extInfo);

<span class="hljs-comment">// è®¾ç½®è¿½è¸ª ID</span>
AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_TRACE_ID, traceId);

<span class="hljs-comment">// æ¸…ç†ä¸Šä¸‹æ–‡</span>
AuditLogContextUtil.remove();
</code></pre>
<h2 data-id="heading-15">8. ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-16">8.1 ç®€å•æ—¥å¿—è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/simple/log")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ–°å¢äº†:' + #params.get('flowBizNo') + ',æ“ä½œç»“æœ:' + #result.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#params.get('flowBizNo')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logSimple</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-17">8.2 å¸¦å·®å¼‚æ¯”å¯¹çš„æ–°å¢æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logWithDetail")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ–°å¢äº†:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('addObject').get('name')"
)</span>
<span class="hljs-meta">@LogDiff(after = "#result.get('addObject')")</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logWithDetail</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    Map&lt;String, Object&gt; addObject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    addObject.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
    addObject.put(<span class="hljs-string">"age"</span>, <span class="hljs-number">25</span>);
    result.put(<span class="hljs-string">"addObject"</span>, addObject);
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h3 data-id="heading-18">8.3 å¸¦å·®å¼‚æ¯”å¯¹çš„åˆ é™¤æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logWithDelete")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'åˆ é™¤äº†:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('deleteObject').get('name')"
)</span>
<span class="hljs-meta">@LogDiff(before = "#result.get('deleteObject')")</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logWithDelete</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    Map&lt;String, Object&gt; deleteObject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    deleteObject.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"æå››"</span>);
    deleteObject.put(<span class="hljs-string">"age"</span>, <span class="hljs-number">30</span>);
    result.put(<span class="hljs-string">"deleteObject"</span>, deleteObject);
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h3 data-id="heading-19">8.4 å¸¦å·®å¼‚æ¯”å¯¹çš„æ›´æ–°æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logWithUpdate")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'æ›´æ–°äº†:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('name')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logWithUpdate</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// è®¾ç½®æ“ä½œå‰æ•°æ®</span>
    Map&lt;String, Object&gt; before = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    before.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"ç‹äº”"</span>);
    before.put(<span class="hljs-string">"age"</span>, <span class="hljs-number">35</span>);
    
    <span class="hljs-comment">// è®¾ç½®æ“ä½œåæ•°æ®</span>
    Map&lt;String, Object&gt; after = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    after.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"ç‹äº”"</span>);
    after.put(<span class="hljs-string">"age"</span>, <span class="hljs-number">36</span>);
    
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_BEFORE_OBJECT, before);
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_AFTER_OBJECT, after);
    
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-20">8.5 è‡ªå®šä¹‰æ—¥å¿—è¯¦æƒ…</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logWithCustomDetail")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'è‡ªå®šä¹‰æ—¥å¿—è¯¦æƒ…:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('name')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logWithCustomDetail</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    Map&lt;String, Object&gt; detail = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    detail.put(<span class="hljs-string">"customField1"</span>, <span class="hljs-string">"value1"</span>);
    detail.put(<span class="hljs-string">"customField2"</span>, <span class="hljs-string">"value2"</span>);
    
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_OPERATE_DSL, detail);
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-21">8.6 å¸¦æ‰©å±•ä¿¡æ¯çš„æ—¥å¿—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logWithExt")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'è‡ªå®šä¹‰æ—¥å¿—è¯¦æƒ…:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('name')"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logWithExt</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_OPERATE_DSL, params.get(<span class="hljs-string">"detail"</span>));
    AuditLogContextUtil.set(AuditLogContextUtil.CONTEXT_KEY_EXT, params.get(<span class="hljs-string">"ext"</span>));
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-22">8.7 æ¡ä»¶æ€§æ—¥å¿—è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/logConditional")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'è‡ªå®šä¹‰æ—¥å¿—è¯¦æƒ…:' + #params.get('flowBizNo')",
    bizType = "æµ‹è¯•",
    operateObject = "#result.get('name')",
    condition = "#result.get('condition') == true"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">logConditional</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// åªæœ‰å½“ condition ä¸º true æ—¶æ‰ä¼šè®°å½•æ—¥å¿—</span>
    <span class="hljs-keyword">return</span> params;
}
</code></pre>
<h3 data-id="heading-23">8.8 åµŒå¥—çº¿ç¨‹æ—¥å¿—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/nestLogTest")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-meta">@OperateLog(
    success = "'åµŒå¥—æ—¥å¿—å±‚çº§:' + #operateObject",
    bizType = "åµŒå¥—æ—¥å¿—æµ‹è¯•",
    operateObject = "#operateObject"
)</span>
<span class="hljs-keyword">public</span> Map <span class="hljs-title function_">nestLogTest</span><span class="hljs-params">(Long operateObject)</span> {
    <span class="hljs-comment">// è°ƒç”¨å…¶ä»–æœåŠ¡æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„æ—¥å¿—ä¼šåµŒå¥—åœ¨å½“å‰æ—¥å¿—ä¸­</span>
    demoLogService.businessLog(<span class="hljs-number">2L</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();
}
</code></pre>
<h2 data-id="heading-24">9. æ•°æ®åº“é…ç½®</h2>
<h3 data-id="heading-25">9.1 åˆå§‹åŒ–è„šæœ¬</h3>
<p>é¡¹ç›®æä¾›äº† MySQLã€SQLiteã€H2 ä¸‰ç§æ•°æ®åº“çš„åˆå§‹åŒ–è„šæœ¬ï¼š</p>
<ul>
<li>MySQL: <code>src/main/resources/init/mysql/init.sql</code></li>
<li>SQLite: <code>src/main/resources/init/sqlite/init.sql</code></li>
<li>H2: <code>src/main/resources/init/h2/init.sql</code></li>
</ul>
<h3 data-id="heading-26">9.2 é…ç½®ç¤ºä¾‹</h3>
<p><strong>SQLite é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">org.sqlite.JDBC</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:sqlite:./data/audit_log.db</span>
</code></pre>
<p><strong>MySQL é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/demo?useUnicode=true&amp;characterEncoding=utf8</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
</code></pre>
<p><strong>H2 é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">org.h2.Driver</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:h2:./data/audit_log</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">sa</span>
    <span class="hljs-attr">password:</span> 
</code></pre>
<h2 data-id="heading-27">10. æŸ¥è¯¢æ¥å£</h2>
<h3 data-id="heading-28">10.1 åˆ†é¡µæŸ¥è¯¢æ—¥å¿—</h3>
<pre><code class="hljs language-http" lang="http">POST /api/audit/logs/page
Content-Type: application/json

{
  "pageNum": 1,
  "pageSize": 10,
  "operator": "user1",
  "bizType": "USER",
  "startTime": 1704067200000,
  "endTime": 1704153600000
}
</code></pre>
<h3 data-id="heading-29">10.2 æŸ¥è¯¢æ—¥å¿—è¯¦æƒ…</h3>
<pre><code class="hljs language-http" lang="http">GET /api/audit/logs/detail?logId=1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/221632c3d1264559a76177b961a57983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YO95biC5qGD5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770558046&amp;x-signature=KKRf2w%2FLKaaffxBrJPY7r5ZPF90%3D" alt="web-view.png" loading="lazy"/></p>
<h3 data-id="heading-30">10.3 æ—¥å¿—æŸ¥è¯¢é¡µé¢</h3>
<p>å®¡è®¡æ—¥å¿—ç»„ä»¶æä¾›äº†é…å¥—çš„ Web æŸ¥è¯¢ç•Œé¢ï¼Œè®¿é—® <code>/log.html</code> å¯ä»¥ä½¿ç”¨å¯è§†åŒ–ç•Œé¢æŸ¥è¯¢å’ŒæŸ¥çœ‹æ—¥å¿—è¯¦æƒ…ã€‚</p>
<h4 data-id="heading-31">æŸ¥è¯¢æ¡ä»¶åŠŸèƒ½</h4>
<ul>
<li><strong>ä¸šåŠ¡ç±»å‹ç­›é€‰</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç±»å‹ï¼ˆå¦‚"ç”¨æˆ·ç®¡ç†"ã€"è®¢å•ç®¡ç†"ï¼‰è¿›è¡Œç­›é€‰</li>
<li><strong>ä¸šåŠ¡å­ç±»å‹ç­›é€‰</strong>ï¼šæ ¹æ®ä¸šåŠ¡å­ç±»å‹è¿›è¡Œæ›´ç»†ç²’åº¦çš„ç­›é€‰</li>
<li><strong>æ“ä½œäººç­›é€‰</strong>ï¼šæ ¹æ®æ“ä½œäººè´¦å·è¿›è¡Œç­›é€‰</li>
<li><strong>ç§Ÿæˆ·ç­›é€‰</strong>ï¼šæ ¹æ®ç§Ÿæˆ·ä¿¡æ¯è¿›è¡Œç­›é€‰</li>
<li><strong>æ“ä½œç»“æœç­›é€‰</strong>ï¼šæ”¯æŒé€‰æ‹©"å…¨éƒ¨"ã€"æˆåŠŸ"ã€"å¤±è´¥"</li>
<li><strong>æ“ä½œå¯¹è±¡ç­›é€‰</strong>ï¼šæ ¹æ®æ“ä½œå¯¹è±¡è¿›è¡Œç­›é€‰</li>
<li><strong>æ“ä½œæè¿°ç­›é€‰</strong>ï¼šæ ¹æ®æ“ä½œæè¿°è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢</li>
<li><strong>æ—¶é—´èŒƒå›´æŸ¥è¯¢</strong>ï¼ˆå¿…å¡«ï¼‰ï¼š
<ul>
<li>å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´å¿…é¡»å¡«å†™</li>
<li>æ”¯æŒå¿«æ·æ—¶é—´é€‰æ‹©ï¼š
<ul>
<li>ä»Šå¤©ï¼š00:00:00 ~ 23:59:59</li>
<li>æ˜¨å¤©ï¼š00:00:00 ~ 23:59:59</li>
<li>å‰å¤©ï¼š00:00:00 ~ 23:59:59</li>
<li>æœ€è¿‘15åˆ†é’Ÿ/30åˆ†é’Ÿ/1å°æ—¶/2å°æ—¶/3å°æ—¶/4å°æ—¶/12å°æ—¶/24å°æ—¶</li>
</ul>
</li>
<li>æ—¶é—´èŒƒå›´é™åˆ¶ï¼šæŸ¥è¯¢æ—¶é—´èŒƒå›´ä¸èƒ½è¶…è¿‡24å°æ—¶</li>
</ul>
</li>
</ul>
<h4 data-id="heading-32">æ—¥å¿—åˆ—è¡¨å±•ç¤º</h4>
<p>åˆ—è¡¨è¡¨æ ¼åŒ…å«ä»¥ä¸‹åˆ—ï¼š</p>
<ul>
<li><strong>æ“ä½œäºº</strong>ï¼šæ‰§è¡Œæ“ä½œçš„ç”¨æˆ·è´¦å·</li>
<li><strong>ä¸šåŠ¡ç±»å‹</strong>ï¼šä¸šåŠ¡åˆ†ç±»</li>
<li><strong>æ“ä½œç±»å‹</strong>ï¼šå­ä¸šåŠ¡ç±»å‹</li>
<li><strong>æ“ä½œæè¿°</strong>ï¼šæ“ä½œçš„æè¿°ä¿¡æ¯</li>
<li><strong>æ“ä½œå¯¹è±¡</strong>ï¼šè¢«æ“ä½œçš„å¯¹è±¡æ ‡è¯†</li>
<li><strong>æ“ä½œç»“æœ</strong>ï¼šæˆåŠŸï¼ˆç»¿è‰²æ ‡ç­¾ï¼‰æˆ–å¤±è´¥ï¼ˆçº¢è‰²æ ‡ç­¾ï¼‰</li>
<li><strong>ç§Ÿæˆ·</strong>ï¼šç§Ÿæˆ·ä¿¡æ¯</li>
<li><strong>æ“ä½œæ—¶é—´</strong>ï¼šæ“ä½œå‘ç”Ÿçš„æ—¶é—´</li>
<li><strong>Trace ID</strong>ï¼šé“¾è·¯è¿½è¸ªID</li>
<li><strong>å¼‚å¸¸ä¿¡æ¯</strong>ï¼šå¼‚å¸¸é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰</li>
<li><strong>æ‰©å±•ä¿¡æ¯</strong>ï¼šè‡ªå®šä¹‰æ‰©å±•ä¿¡æ¯</li>
<li><strong>æ“ä½œ</strong>ï¼šæŸ¥çœ‹è¯¦æƒ…æŒ‰é’®</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28aaa636ea144fb5bb232538efd57eb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YO95biC5qGD5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770558046&amp;x-signature=UEoac40b1rSS4vJ9i0cZBqXlst4%3D" alt="log-detail.png" loading="lazy"/></p>
<h4 data-id="heading-33">æ—¥å¿—è¯¦æƒ…æŸ¥çœ‹</h4>
<p>ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ï¼Œå¯æŸ¥çœ‹æ—¥å¿—çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>åŸºæœ¬ä¿¡æ¯ï¼šIDã€æ“ä½œäººã€ä¸šåŠ¡ç±»å‹ã€æ“ä½œæè¿°ç­‰</li>
<li>æ“ä½œç»“æœï¼šæˆåŠŸ/å¤±è´¥çŠ¶æ€</li>
<li>æ“ä½œæ—¶é—´ã€Trace IDã€å¼‚å¸¸ä¿¡æ¯ã€æ‰©å±•ä¿¡æ¯</li>
<li>è€—æ—¶(ms)ï¼šæ“ä½œæ‰§è¡Œè€—æ—¶</li>
<li>å˜æ›´è¯¦æƒ…ï¼šæ”¯æŒ JSON æ ¼å¼åŒ–å±•ç¤ºå’Œå·®å¼‚æ¯”å¯¹å±•ç¤º</li>
</ul>
<h2 data-id="heading-34">11. æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>åˆç†è®¾ç½®ä¸šåŠ¡ç±»å‹</strong>ï¼šä½¿ç”¨è§„èŒƒçš„ä¸šåŠ¡ç±»å‹ï¼Œä¾¿äºæ—¥å¿—åˆ†ç±»å’ŒæŸ¥è¯¢</li>
<li><strong>ä½¿ç”¨ SpEL è¡¨è¾¾å¼</strong>ï¼šå……åˆ†åˆ©ç”¨ SpEL è¡¨è¾¾å¼åŠ¨æ€è·å–å…³é”®ä¿¡æ¯</li>
<li><strong>å·®å¼‚æ¯”å¯¹</strong>ï¼šå¯¹äºé‡è¦æ•°æ®çš„å˜æ›´ï¼Œä½¿ç”¨å·®å¼‚æ¯”å¯¹åŠŸèƒ½è®°å½•å˜æ›´è¯¦æƒ…</li>
<li><strong>å¼‚æ­¥æ”¶é›†</strong>ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®å¼€å¯å¼‚æ­¥æ”¶é›†ï¼Œé¿å…å½±å“ä¸»ä¸šåŠ¡æ€§èƒ½</li>
<li><strong>æ¡ä»¶è®°å½•</strong>ï¼šå¯¹äºé«˜é¢‘æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼æ§åˆ¶æ—¥å¿—è®°å½•é¢‘ç‡</li>
<li><strong>æ‰©å±•ä¿¡æ¯</strong>ï¼šä½¿ç”¨æ‰©å±•ä¿¡æ¯å­—æ®µè®°å½•ä¸šåŠ¡ç›¸å…³çš„è‡ªå®šä¹‰ä¿¡æ¯</li>
</ol>
<h2 data-id="heading-35">12. å¸¸è§é—®é¢˜</h2>
<p><strong>Q: æ—¥å¿—æ²¡æœ‰è®°å½•ï¼Ÿ</strong></p>
<p>A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ç¡®ä¿ <code>@OperateLog</code> æ³¨è§£çš„æ–¹æ³•è¢« Spring å®¹å™¨ç®¡ç†</li>
<li>æ£€æŸ¥ <code>condition</code> æ¡ä»¶æ˜¯å¦æ»¡è¶³</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰é…ç½® <code>ignoreException</code> å¿½ç•¥äº†å¼‚å¸¸</li>
</ul>
<p><strong>Q: å¦‚ä½•è‡ªå®šä¹‰å·®å¼‚æ¯”å¯¹é€»è¾‘ï¼Ÿ</strong></p>
<p>A: å®ç° <code>ObjectDiffHandler</code> æ¥å£ï¼Œå¹¶åœ¨ <code>@LogDiff</code> æ³¨è§£ä¸­æŒ‡å®šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@LogDiff(
    before = "#before",
    after = "#after",
    diffHandler = CustomDiffHandler.class
)</span>
</code></pre>
<p><strong>Q: å¦‚ä½•è¿½è¸ªå¤šçº¿ç¨‹æ“ä½œçš„æ—¥å¿—ï¼Ÿ</strong></p>
<p>A: ä½¿ç”¨ <code>AuditLogContextUtil</code> çš„åµŒå¥—çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨å¤„ç†çº¿ç¨‹é—´ä¸Šä¸‹æ–‡ä¼ é€’ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­çš„åŒæ­¥ & äº’æ–¥]]></title>    <link>https://juejin.cn/post/7601441797118148659</link>    <guid>https://juejin.cn/post/7601441797118148659</guid>    <pubDate>2026-02-01T14:09:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601441797118148659" data-draft-id="7601486204173811762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­çš„åŒæ­¥ &amp; äº’æ–¥"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-01T14:09:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SereneDream"/> <meta itemprop="url" content="https://juejin.cn/user/4250057782345273"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­çš„åŒæ­¥ &amp; äº’æ–¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4250057782345273/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SereneDream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T14:09:14.000Z" title="Sun Feb 01 2026 14:09:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡å°è®°çš„é‡ç‚¹åå‘äº Java çš„ä»£ç å®ç°åŒæ­¥å’Œäº’æ–¥ã€‚</p>
<p>è¿›ç¨‹ä¹‹é—´ä¸ºä»€ä¹ˆè¦å®ç°äº’æ–¥ï¼šä¸åŒè¿›ç¨‹ä¹‹é—´å¯èƒ½ä¼šå…±äº«æŸé¡¹èµ„æºã€‚</p>
<p>è¿›ç¨‹ä¹‹é—´ä¸ºä»€ä¹ˆè¦å®ç°åŒæ­¥ï¼šä¸åŒè¿›ç¨‹ä¹‹é—´çš„æ“ä½œå¯èƒ½ä¼šå­˜åœ¨å…ˆåå…³ç³»</p>
<p>åœ¨ OS çš„å­¦ä¹ ä¸­ï¼ŒåŒæ­¥ å’Œ äº’æ–¥ ç»å¯¹æ˜¯ç»•ä¸è¿‡å»çš„å¤§å±±ï¼Œè€Œåœ¨ Java ä¸­æ˜¯æ€æ ·åˆ©ç”¨ OS çš„åŒæ­¥å’Œäº’æ–¥çš„ï¼Ÿæ˜¯ç›´æ¥å¤ç”¨è¿˜æ˜¯å¤§èƒ†åˆ›æ–°ï¼Ÿ</p>
<h2 data-id="heading-0">Java æ€ä¹ˆå®ç° åŒæ­¥å’Œäº’æ–¥çš„</h2>
<p>é”ï¼ˆLockï¼‰ä¸æ˜¯èµ„æºæœ¬èº«ï¼Œé”æ˜¯è®¿é—®èµ„æºçš„â€œå…¥åœºåˆ¸â€ã€‚</p>
<h3 data-id="heading-1">æ˜¾å¼é” - ReentrantLock - äº’æ–¥é‡</h3>
<p>åœ¨ Java ä¸­å¯ä»¥ä½¿ç”¨ Lock.lock å¯¹ä¸€å—åœ°æ–¹ä¸Šé”ï¼ˆå…¶å®æ˜¯ JVM å‘ OS ç”³è¯·äº†ä¸€å—äº’æ–¥ç©ºé—´/ä¸´ç•Œèµ„æºï¼‰ï¼Œåœ¨ Java ä¸­ï¼Œå˜é‡å¯ä»¥è¢«æ”¾ç½®åˆ°ä¸´ç•Œèµ„æºåŒºä¸­ï¼Œè¿™æ ·å­æ¥å®ç°é”</p>
<p>ä¾‹å¦‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. ã€æŠ¢é’¥åŒ™ã€‘</span>
<span class="hljs-comment">// è¿™ä¸€æ­¥ä¸æ˜¯ç”³è¯·èµ„æºï¼Œè€Œæ˜¯â€œç”³è¯·è®¿é—®èµ„æºçš„æƒé™â€ã€‚</span>
<span class="hljs-comment">// å¦‚æœæ‹¿åˆ°é’¥åŒ™ï¼Œå°±è¿›é—¨ï¼›æ‹¿ä¸åˆ°ï¼Œå°±åœ¨é—¨å£æ’é˜Ÿï¼ˆé˜»å¡ï¼‰ã€‚</span>
<span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>(); 

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 2. ã€ä¸´ç•ŒåŒº (Critical Section)ã€‘</span>
    <span class="hljs-comment">// åªæœ‰æ‹¿åˆ°äº†é’¥åŒ™çš„çº¿ç¨‹ï¼Œæ‰èƒ½è¿è¡Œè¿™å‡ è¡Œä»£ç ã€‚</span>
    <span class="hljs-comment">// åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥å®‰å…¨åœ°æ“ä½œâ€œä¸´ç•Œèµ„æºâ€ï¼ˆæ¯”å¦‚ map.put, count++ï¼‰ã€‚</span>
    <span class="hljs-comment">// æ­¤æ—¶ï¼Œåˆ«äººè¿›ä¸æ¥ï¼Œå› ä¸ºé’¥åŒ™åœ¨ä½ å…œé‡Œã€‚</span>
    map.put(<span class="hljs-string">"key"</span>, <span class="hljs-number">1</span>); 

} <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 3. ã€è¿˜é’¥åŒ™ã€‘</span>
    <span class="hljs-comment">// è¿™ä¸€æ­¥ä¸æ˜¯æŠŠèµ„æºè¿˜ç»™ OSï¼ˆå•æ‰€è¿˜åœ¨ï¼‰ï¼Œè€Œæ˜¯â€œå½’è¿˜æƒé™â€ã€‚</span>
    <span class="hljs-comment">// æŠŠé’¥åŒ™æŒ‚å›å¢™ä¸Šï¼Œé€šçŸ¥é—¨å£æ’é˜Ÿçš„äººï¼šâ€œæˆ‘ç”¨å®Œäº†ï¼Œä½ ä»¬æŠ¢å§â€ã€‚</span>
    <span class="hljs-keyword">lock</span>.unlock(); 
}
</code></pre>
<p>å…¶å® Java åœ¨ lock çš„åº•å±‚å°±å·²ç»å®ç°äº†é˜»å¡äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±æœ‰äººè¦é—®äº†ï¼Œè€å¸ˆè€å¸ˆï¼Œé‚£æˆ‘ä»¬ï¼ˆConditionï¼‰å‘¢ï¼Ÿ</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šé˜»å¡ ä¸ç­‰äº é‡Šæ”¾é”ã€‚åªæœ‰ Condition.await() æ‰èƒ½åšåˆ° â€œåœ¨é˜»å¡çš„åŒæ—¶é‡Šæ”¾é”â€ã€‚</p>
<p>æŠŠè¯è¯´å¾—æ›´æ—¥å¸¸ä¸€ç‚¹ï¼šä½ åœ¨é£Ÿå ‚åƒé¥­ï¼Œä¸€èˆ¬æ¥è®²å°±æ˜¯ å…ˆæŠ¢ä½ç½®ï¼ˆæŠ¢é”ï¼‰ -&gt; å»æ‰“é¥­ï¼ˆè°ƒç”¨èµ„æºï¼‰ -&gt; åƒé¥­ï¼ˆä½¿ç”¨èµ„æºï¼‰ -&gt; ç¦»å¼€ï¼ˆé‡Šæ”¾èµ„æºå’Œé”ï¼‰ è¿™ä¸€ä¸ªè¿‡ç¨‹</p>
<p>lock ç›¸å½“äºä½ æŠ¢äº†ä¸€ä¸ªä½ç½®ï¼Œç„¶ååœ¨æ’æ‰“é¥­é˜Ÿä¼ï¼Œå¿«åˆ°ä½ äº†å‘Šè¯‰ä½ ï¼šå°ä¼™å­ä¸å¥½æ„æ€å•Šï¼Œé¥­æ²¡äº†ï¼Œä½ å¾—ç­‰ä¸€ä¸‹äº†ï¼Œcondition çš„åšæ³•æ˜¯ä½ å…ˆæŠŠåº§ä½æ”¾å¼€ï¼Œè®©å…¶ä»–å·²ç»æ‰“äº†é¥­åŒå­¦å¯ä»¥åï¼Œç„¶åä½ å»ç­‰é˜¿å§¨è·Ÿä½ è¯´ï¼Œé¥­å¥½äº†ï¼Œç„¶åä½ å†å»æŠ¢åº§ä½ï¼ŒæŠ¢é¥­ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ conditionï¼Œç›¸å½“äºé˜¿å§¨è·Ÿä½ è¯´æ²¡é¥­äº†ï¼Œä½ è¯´ï¼šé‚£æ²¡äº‹å„¿ï¼Œæˆ‘ç­‰ç­‰ï¼Œä½†æ˜¯åº§ä½è¿˜æ˜¯ä½ çš„å•Šï¼Œå…¶ä»–è¦åƒé¥­çš„äººå°±æ²¡åº§ä½äº†ï¼Œé‚£ä¸å°±æ˜¯å ç€èŒ…å‘ä¸æ‹‰å±äº†å—ï¼Ÿ</p>
<h3 data-id="heading-2">éšå¼é” - synchronized - ç®¡ç¨‹</h3>
<p>åœ¨ JDK ç¼–å†™è¿‡ç¨‹ï¼Œå¼€å‘è€…å°±å·²ç»ç»™æ¯ä¸€ä¸ªå¯¹è±¡ä¸Šäº†ä¸€æŠŠéšå¼é”</p>
<p>éšå¼é”å¯ä»¥é€šè¿‡æ·»åŠ  synchronized å…³é”®å­—å¼€å¯</p>
<h2 data-id="heading-3">ç”Ÿäº§è€… - æ¶ˆè´¹è€…</h2>
<p>åœ¨ OS ä¸­ï¼Œç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ç»å¯¹æ˜¯ååˆ†ç»å…¸çš„é—®é¢˜ï¼Œé—®é¢˜æè¿°å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db8bb9c802f141ddab9cd5d540b64ad3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=dV9f7oqoED8%2BZX7BzV5F5b8gei8%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œç¼“å†²åŒºæ˜¯æœ‰ç©ºé—´é™åˆ¶çš„ï¼Œæ¯”å¦‚ç¼“å­˜åŒºåªèƒ½æ”¾å…¥ 5 æ¡æ•°æ®ã€‚</p>
<p>ä»é¢˜ç›®æˆ‘ä»¬ä¸éš¾å‘ç°</p>
<ul>
<li>å¦‚æœç¼“å†²åŒºæ²¡æœ‰æ»¡ï¼Œåˆ™ç”Ÿäº§è€…å¯ä»¥å¾€ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®</li>
<li>å¦‚æœç¼“å†²åŒºä¸ä¸ºç©ºï¼Œåˆ™æ¶ˆè´¹è€…å¯ä»¥å¾€ç¼“å†²åŒºä¸­è¯»å‡ºæ•°æ®</li>
<li>å¦‚æœå¤šä¸ªç”Ÿäº§è€…åŒæ—¶å¾€ç¼“å†²åŒºçš„åŒä¸€åœ°æ–¹å†™å…¥æ•°æ®ï¼Œåˆ™ä¼šå¯¼è‡´æ•°æ®è¦†ç›–</li>
<li>å¦‚æœå¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶å¾€ç¼“å†²åŒºçš„åŒä¸€åœ°æ–¹è¯»å‡ºæ•°æ®ï¼Œåˆ™ä¼šå¯¼è‡´æ•°æ®è¯»å–å¼‚å¸¸</li>
</ul>
<p>æ‰€ä»¥</p>
<ul>
<li>ç¼“å†²åŒºä¸ºä¸´ç•Œèµ„æº</li>
<li>ç”Ÿäº§è€…/æ¶ˆè´¹è€…ä¹‹é—´åº”å½“å­˜åœ¨äº’æ–¥å…³ç³»ï¼Œå³å¤šä¸ªç”Ÿäº§è€…/æ¶ˆè´¹è€…åº”å½“äº’æ–¥åœ°è®¿é—®ç¼“å†²åŒºï¼ˆäº’æ–¥ï¼‰</li>
<li>ç”Ÿäº§è€…å¿…é¡»åœ¨ç¼“å†²åŒºä¸­å­˜åœ¨ç©ºé—´æ—¶æ‰èƒ½å†™å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…å¿…é¡»åœ¨ç¼“å†²åŒºä¸­å­˜åœ¨æ•°æ®æ—¶æ‰èƒ½è¯»å‡ºæ•°æ®ï¼ˆåŒæ­¥ï¼‰</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä½¿ç”¨ Java ä»£ç è¿›è¡Œæ¨¡æ‹Ÿ</p>
<pre><code class="hljs language-csharp" lang="csharp">import java.util.*;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> {

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
        <span class="hljs-comment">// äº’æ–¥ä¿¡å·é‡ï¼š äº’æ–¥æ“ä½œä¸­åˆ†å‘ç»™ç”Ÿäº§è€…/æ¶ˆè´¹è€…çš„é’¥åŒ™</span>
        map.put(<span class="hljs-string">"key"</span>, <span class="hljs-number">1</span>);
        <span class="hljs-comment">// åŒæ­¥ä¿¡å·é‡ï¼š ç¼“å­˜åŒºä¸­çš„æ•°æ®ä¸ªæ•°</span>
        map.put(<span class="hljs-string">"value"</span>, <span class="hljs-number">0</span>);
        <span class="hljs-comment">// ç¼“å­˜åŒºæœ€å¤§æ•°æ®é‡</span>
        map.put(<span class="hljs-string">"size"</span>, <span class="hljs-number">5</span>);

        Lock <span class="hljs-keyword">lock</span> = <span class="hljs-keyword">new</span> ReentrantLock();
        Condition condition = <span class="hljs-keyword">lock</span>.newCondition();


        <span class="hljs-comment">// ç”Ÿäº§è€…é˜Ÿåˆ—</span>
        Thread thread = <span class="hljs-keyword">new</span> Thread(() -&gt; {
            <span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ¤æ–­æ•°æ®æ˜¯å¦æ»¡äº†</span>
                <span class="hljs-comment">// å¦‚æœç”Ÿäº§è€…å‘ç°ç¼“å­˜åŒºæ»¡äº†ï¼Œåˆ™éœ€è¦é˜»å¡ç­‰å¾…æ¶ˆè´¹è€…å°†ç¼“å­˜åŒºçš„æ•°æ®è¯»å–</span>
                <span class="hljs-keyword">while</span> (Objects.<span class="hljs-keyword">equals</span>(map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"size"</span>), map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"value"</span>))) {
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç”Ÿäº§è€… æ­£åœ¨é˜»å¡è‡ªå·±"</span>);
                    <span class="hljs-comment">// è‡ªå·±è¿›å…¥é˜»å¡çŠ¶æ€</span>
                    condition.<span class="hljs-keyword">await</span>();
                }

                <span class="hljs-comment">// å‘ç¼“å­˜åŒºä¸­å†™å…¥æ•°æ®</span>
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç”Ÿäº§è€… æ­£åœ¨å†™å…¥æ•°æ®"</span>);
                Integer key = map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"key"</span>);
                Integer <span class="hljs-keyword">value</span> = map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"value"</span>);

                map.put(<span class="hljs-string">"value"</span>, ++<span class="hljs-keyword">value</span>);

                <span class="hljs-comment">// å”¤é†’å…¶ä»–æ‰€æœ‰çº¿ç¨‹</span>
                condition.signalAll();
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">lock</span>.unlock();
            }
        });
        thread.start();

        <span class="hljs-comment">// æ¶ˆè´¹è€…é˜Ÿåˆ—</span>
        Thread thread1 = <span class="hljs-keyword">new</span> Thread(() -&gt; {
            <span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ¤æ–­æ•°æ®æ˜¯å¦ä¸ºç©º</span>
                <span class="hljs-comment">// å¦‚æœæ¶ˆè´¹è€…å‘ç°ç¼“å­˜åŒºä¸ºç©ºï¼Œåˆ™éœ€è¦é˜»å¡ç­‰å¾…ç”Ÿäº§è€…å¢åŠ ç¼“å­˜åŒºçš„æ•°æ®</span>
                <span class="hljs-keyword">while</span> (Objects.<span class="hljs-keyword">equals</span>(<span class="hljs-number">0</span>, map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"value"</span>))) {
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ¶ˆè´¹è€… æ­£åœ¨é˜»å¡è‡ªå·±"</span>);
                    <span class="hljs-comment">// è‡ªå·±è¿›å…¥é˜»å¡çŠ¶æ€</span>
                    condition.<span class="hljs-keyword">await</span>();
                }

                <span class="hljs-comment">// å‘ç¼“å­˜åŒºä¸­è¯»å–æ•°æ®</span>
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ¶ˆè´¹è€… æ­£åœ¨è¯»å–æ•°æ®"</span>);
                Integer key = map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"key"</span>);
                Integer <span class="hljs-keyword">value</span> = map.<span class="hljs-keyword">get</span>(<span class="hljs-string">"value"</span>);

                map.put(<span class="hljs-string">"value"</span>, --<span class="hljs-keyword">value</span>);

                <span class="hljs-comment">// å”¤é†’å…¶ä»–æ‰€æœ‰çº¿ç¨‹</span>
                condition.signalAll();
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">lock</span>.unlock();
            }
        });
        thread1.start();

    }
}
</code></pre>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆé˜»å¡éƒ¨åˆ†çš„ä»£ç ä¼šä½¿ç”¨ while å¾ªç¯é‡å¤åˆ¤æ–­æ¡ä»¶ï¼Œè€Œä¸æ˜¯ if ï¼Ÿ</h3>
<p>è¿™ä¸äº’æ–¥æœºåˆ¶æœ‰å…³ç³»ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¢«å”¤é†’2åï¼Œå®ƒéœ€è¦å†å»æŠ¢é”ï¼Œåªæœ‰æŠ¢åˆ°äº†æ‰èƒ½å¤Ÿç»§ç»­å‘ä¸‹æ‰§è¡Œï¼ˆcondition.await(); ä»£ç ä¸­ï¼Œçº¿ç¨‹è¢«å”¤é†’ï¼Œç„¶åä¼šå»æŠ¢é”ï¼‰ï¼Œä¸è¿‡å¯èƒ½ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ çº¿ç¨‹A è¢«å”¤é†’æœŸé—´ï¼Œçº¿ç¨‹B å·²ç»æ·è¶³å…ˆç™»äº†ï¼Œå½“ çº¿ç¨‹A åœ¨æ‰¾é”æ—¶ çº¿ç¨‹B ä¹Ÿæ—©æ‰§è¡Œå®Œæˆï¼Œæ—© çº¿ç¨‹A ä¸€æ­¥æŠŠé”æ”¾å›å»äº†ï¼Œé‚£åœ¨çº¿ç¨‹Açš„è§†è§’é‡Œï¼š æˆ‘è¢«å”¤é†’äº†ï¼Œå› ä¸ºå½“å‰çš„æ¡ä»¶æ»¡è¶³äº†ï¼Œé”ä¹Ÿåœ¨ï¼Œæ‰€ä»¥æˆ‘æ‹¿ä¸Šé”å¼€å§‹æ‰§è¡Œæˆ‘çš„æ“ä½œã€‚ä½†æ˜¯åœ¨çº¿ç¨‹B æ·è¶³å…ˆç™»ä¹‹åï¼Œçº¿ç¨‹Aå¦‚æœå°±é‚£ä¹ˆç›²ç›®åœ°å»æ‰§è¡Œè‡ªå·±çš„æ“ä½œã€ä¿®æ”¹æ•°æ®ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´ OOM ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¼šè®© çº¿ç¨‹A å†çœ‹ä¸€éï¼Œç°åœ¨çš„æ¡ä»¶åˆ°åº•ç¬¦ä¸ç¬¦åˆï¼Œçº¿ç¨‹Aåˆ°åº•èƒ½ä¸èƒ½å‡ºå»å¹²æ´»ã€‚</p>
<h2 data-id="heading-5">å¤šç”Ÿäº§è€… - å¤šæ¶ˆè´¹è€…</h2>
<p>å¤šç”Ÿäº§è€… - å¤šæ¶ˆè´¹è€… é—®é¢˜å¹¶æ²¡æœ‰è¯´æ¯” ç”Ÿäº§è€… - æ¶ˆè´¹è€… é—®é¢˜éš¾å¤šå°‘ï¼Œæ— éå°±æ˜¯å¢åŠ å‡ ä¸ªåˆ¤æ–­å°±å¯ä»¥äº†ï¼Œä»£ç çš„é€»è¾‘æ˜¯å·®ä¸å¤šçš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64aac93200df469daa140732ce96dc7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=w0aLlMpg3bvj1UaA1hibt3oX%2F8Y%3D" alt="" loading="lazy"/></p>
<p>ä»£ç å®ç°å¦‚ä¸‹</p>
<pre><code class="hljs language-scss" lang="scss">import java<span class="hljs-selector-class">.util</span>.*;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.Condition</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.Lock</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.ReentrantLock</span>;

<span class="hljs-comment">// æ³¨ï¼š è¿™é‡Œçš„æ°´æœç±»éœ€è¦è‡ªå·±åˆ›å»º</span>
public class <span class="hljs-selector-tag">Main</span> {
    public static void <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-comment">// ä¸´ç•Œèµ„æº - ç›˜å­,åªèƒ½æ”¾å…¥ä¸€ä¸ªæ°´æœ</span>
        Queue&lt;Fruit&gt; queue = new ArrayDeque&lt;&gt;();
        Lock lock = new <span class="hljs-built_in">ReentrantLock</span>();
        Condition condition = lock<span class="hljs-selector-class">.newCondition</span>();

        Fruit apple = new <span class="hljs-built_in">Apple</span>();
        Fruit orange = new <span class="hljs-built_in">Orange</span>();
            <span class="hljs-comment">// çˆ¶äº²çº¿ç¨‹</span>
            new <span class="hljs-built_in">Thread</span>(() -&gt; {
                lock<span class="hljs-selector-class">.lock</span>();
                try {
                    <span class="hljs-comment">// åˆ¤æ–­ç›˜å­æ˜¯ä¸æ˜¯ç©ºçš„</span>
                    while (!queue.isEmpty()) {
                        condition<span class="hljs-selector-class">.await</span>();
                    }

                    <span class="hljs-comment">// å¾€ç›˜å­é‡Œé¢æ”¾æ°´æœ</span>
                    queue<span class="hljs-selector-class">.add</span>(apple);
                    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("çˆ¸çˆ¸æ”¾è‹¹æœ");
                } catch (InterruptedException e) {
                    throw new <span class="hljs-built_in">RuntimeException</span>(e);
                } finally {
                    lock<span class="hljs-selector-class">.unlock</span>();
                }
            })<span class="hljs-selector-class">.start</span>();

            <span class="hljs-comment">// æ¯äº²çº¿ç¨‹</span>
            new <span class="hljs-built_in">Thread</span>(() -&gt; {
                lock<span class="hljs-selector-class">.lock</span>();
                try {
                    <span class="hljs-comment">// åˆ¤æ–­ç›˜å­æ˜¯ä¸æ˜¯ç©ºçš„</span>
                    while (!queue.isEmpty()) {
                        condition<span class="hljs-selector-class">.await</span>();
                    }

                    <span class="hljs-comment">// å¾€ç›˜å­é‡Œé¢æ”¾æ°´æœ</span>
                    queue<span class="hljs-selector-class">.add</span>(orange);
                    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("å¦ˆå¦ˆæ”¾æ©˜å­");
                } catch (InterruptedException e) {
                    throw new <span class="hljs-built_in">RuntimeException</span>(e);
                } finally {
                    lock<span class="hljs-selector-class">.unlock</span>();
                }
            })<span class="hljs-selector-class">.start</span>();

            <span class="hljs-comment">// å„¿å­çº¿ç¨‹</span>
            new <span class="hljs-built_in">Thread</span>(() -&gt; {
                lock<span class="hljs-selector-class">.lock</span>();
                try {
                    <span class="hljs-comment">// åˆ¤æ–­ç›˜å­é‡Œæ˜¯è‹¹æœå—</span>
                    <span class="hljs-built_in">while</span>(!queue.contains(apple)){
                        condition<span class="hljs-selector-class">.await</span>();
                    }

                    <span class="hljs-comment">// åƒæ°´æœ</span>
                    queue<span class="hljs-selector-class">.poll</span>();
                    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("å„¿å­åƒè‹¹æœ");
                } catch (InterruptedException e) {
                    throw new <span class="hljs-built_in">RuntimeException</span>(e);
                } finally {
                    lock<span class="hljs-selector-class">.unlock</span>();
                }
            })<span class="hljs-selector-class">.start</span>();

            <span class="hljs-comment">// å¥³å„¿çº¿ç¨‹</span>
            new <span class="hljs-built_in">Thread</span>(() -&gt; {
                lock<span class="hljs-selector-class">.lock</span>();
                try {
                    <span class="hljs-comment">// åˆ¤æ–­ç›˜å­é‡Œæ˜¯æ©˜å­å—</span>
                    <span class="hljs-built_in">while</span>(!queue.contains(orange)){
                        condition<span class="hljs-selector-class">.await</span>();
                    }

                    <span class="hljs-comment">// åƒæ°´æœ</span>
                    queue<span class="hljs-selector-class">.poll</span>();
                    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("å¥³å„¿åƒæ©˜å­");
                } catch (InterruptedException e) {
                    throw new <span class="hljs-built_in">RuntimeException</span>(e);
                } finally {
                    lock<span class="hljs-selector-class">.unlock</span>();
                }
            })<span class="hljs-selector-class">.start</span>();
        
    }
}
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d259271331c740a79de65b8e3d3ee294~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=BNjJOIjxK47kWb5eplIZL%2B1WU3c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">è¯»è€… - å†™è€…</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee03081dff07419c8301d8abaafa5bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=AWVSxZTkRka5MftqnK41asx7hP0%3D" alt="" loading="lazy"/></p>
<p>è¯»å†™è€…é—®é¢˜å’Œç”Ÿäº§æ¶ˆè´¹è€…é—®é¢˜æœ€å¤§çš„ä¸åŒæ˜¯ï¼š</p>
<p>è¯»è€…ä¹‹é—´ä¸å­˜åœ¨äº’æ–¥å…³ç³»ï¼Œè€Œæ¶ˆè´¹è€…ä¹‹é—´å­˜åœ¨äº’æ–¥å…³ç³»</p>
<p>è¯´åˆ°è¯»å†™è€…å°±ä¸ç”±è‡ªä¸»åœ°æƒ³åˆ° MySQL ï¼ŒMySQL åœ¨æ‰§è¡Œä¸­ä¹Ÿé‡‡ç”¨äº†â€œè¯»æ•°æ®çš„è¿›ç¨‹å¯ä»¥å¹¶è¡Œï¼Œä½†å†™æ•°æ®è¿›ç¨‹çš„å¿…é¡»äº’æ–¥â€ï¼Œè€Œä¸”åœ¨å†™æ•°æ®çš„è¿›ç¨‹åœ¨æ‰§è¡Œæ“ä½œæ—¶ï¼Œä¸ºäº†ä¿æŠ¤æ•°æ®çš„å¯é æ€§ï¼Œä¸å…è®¸è¯»æ•°æ®è¿›ç¨‹è®¿é—®ï¼Œè¿™å°±æ˜¯è¯»å†™äº’æ–¥ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘å°†ä½¿ç”¨ Java ä»£ç è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé¢å¤–çš„æ³¨æ„ç‚¹ï¼šé”å¯ä»¥æœ‰å¾ˆå¤šæŠŠ</p>
<p>é¦–å…ˆï¼š</p>
<p>å†™è€…ä¸å…¶ä»–ä»»ä½•äººéƒ½æ˜¯äº’æ–¥å…³ç³»</p>
<p>è€Œè¯»è€…è¿›ç¨‹ä¸è¯»è€…è¿›ç¨‹ä¹‹é—´å¹¶ä¸äº’æ–¥</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ count æ¥è®°å½•å½“å‰æ˜¯å¦æœ‰è¯»è€…åœ¨è¯»ï¼Œå½“ count ä¸º 0 æ—¶è§£é”</p>
<pre><code class="hljs language-scss" lang="scss">import java<span class="hljs-selector-class">.util</span>.*;

import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.Condition</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.Lock</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.ReentrantLock</span>;

public class <span class="hljs-selector-tag">Main</span> {
    <span class="hljs-comment">// å†™è€…é”ï¼Œå†™è€…ä¸å…¶ä»–äººä¹‹é—´éƒ½éœ€è¦äº’æ–¥</span>
    static Lock writer_lock = new <span class="hljs-built_in">ReentrantLock</span>();
    static Condition writer_condition = writer_lock<span class="hljs-selector-class">.newCondition</span>();

    <span class="hljs-comment">// è¯»è€…é”ï¼Œé”ä½çš„å¹¶ä¸æ˜¯è¯»è€…ï¼Œé”ä½çš„æ˜¯è¯»è€…æ•°é‡ï¼Œè¯»è€…å¯¹äºä¿®æ”¹æ•°é‡æ˜¯äº’æ–¥çš„ï¼Œä½†æ˜¯å¯¹äºè®¿é—®æ–‡ç« æ˜¯å¹¶å‘çš„</span>
    static Lock reader_lock = new <span class="hljs-built_in">ReentrantLock</span>();
    static Condition reader_condition = reader_lock<span class="hljs-selector-class">.newCondition</span>();

    <span class="hljs-comment">// é˜²å†™è€…è¿›ç¨‹é¥¿æ­»é”/å†™è€…è¿›ç¨‹ä¼˜å…ˆé”</span>
    static Lock writer_before = new <span class="hljs-built_in">ReentrantLock</span>();
    static Condition writer_before_condition = writer_before<span class="hljs-selector-class">.newCondition</span>();

    <span class="hljs-comment">// è®°å½•å½“å‰ä¸´æ—¶ç©ºé—´å†…æ˜¯å¦æœ‰äºº</span>
    static Queue&lt;Integer&gt; queue = new ArrayDeque&lt;&gt;();
    <span class="hljs-comment">// è®°å½•è¯»è€…æ•°é‡</span>
    static Integer count = <span class="hljs-number">0</span>;

    public static void <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-comment">// å†™è€…è¿›ç¨‹</span>
        new <span class="hljs-built_in">Thread</span>(() -&gt; {
            writer_before<span class="hljs-selector-class">.lock</span>();
            writer_lock<span class="hljs-selector-class">.lock</span>();
            try {
                <span class="hljs-comment">// å†™æ–‡ç« ã€‚ã€‚ã€‚</span>
                queue<span class="hljs-selector-class">.add</span>(<span class="hljs-number">1</span>);
                
                System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(Thread.currentThread()<span class="hljs-selector-class">.getName</span>() + " æ­£åœ¨å†™ä¹¦...");
                Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">2000</span>);
            } catch (InterruptedException e) {
                throw new <span class="hljs-built_in">RuntimeException</span>(e);
            } finally {
                queue<span class="hljs-selector-class">.poll</span>();
                writer_lock<span class="hljs-selector-class">.unlock</span>();
                writer_before<span class="hljs-selector-class">.unlock</span>();
            }
        })<span class="hljs-selector-class">.start</span>();

        <span class="hljs-comment">// è¯»è€…è¿›ç¨‹</span>
        new <span class="hljs-built_in">Thread</span>(() -&gt; {
            <span class="hljs-comment">// å¦‚æœæœ‰å†™è€…åœ¨æ’é˜Ÿï¼Œè¯»è€…å°±è¿›ä¸æ¥</span>
            writer_before<span class="hljs-selector-class">.lock</span>();
            writer_before<span class="hljs-selector-class">.unlock</span>();

            <span class="hljs-comment">// å¯¹ count çš„æ“ä½œåªå…è®¸ä¸€ä¸ªè¯»è€…ä¸€ä¸ªè¯»è€…åœ°æ¥</span>
            reader_lock<span class="hljs-selector-class">.lock</span>();
            try {
                if (count == <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªè¯»è€…ï¼Œéœ€è¦æŠŠå†™è€…çš„é”æ‹¿ä¸Šï¼Œå› ä¸ºå†™è€…ä¸æ‰€æœ‰äººäº’æ–¥</span>
                    writer_lock<span class="hljs-selector-class">.lock</span>();
                }

                <span class="hljs-comment">// ç™»è®°äººæ•°</span>
                count++;
            } finally {
                reader_lock<span class="hljs-selector-class">.unlock</span>();
            }

            System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(Thread.currentThread()<span class="hljs-selector-class">.getName</span>() + " æ­£åœ¨è¯»ä¹¦...");
            try {
                Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">2000</span>);
            } catch (Exception e) {
            }

            <span class="hljs-comment">// è¯»è€…å®Œæˆè¯»ä¹¦æ“ä½œåçš„ count-- æ“ä½œä¹Ÿéœ€è¦äº’æ–¥</span>
            reader_lock<span class="hljs-selector-class">.lock</span>();
            try {
                count--;
                if (count == <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// å½“æ²¡æœ‰äººåœ¨è®¿é—®æ–‡ç« æ—¶ï¼ŒæŠŠå†™è€…è¿›ç¨‹çš„é”è¿˜å›å»</span>
                    writer_lock<span class="hljs-selector-class">.unlock</span>();
                }
            } finally {
                reader_lock<span class="hljs-selector-class">.unlock</span>();
            }
        })<span class="hljs-selector-class">.start</span>();
    }
}
</code></pre>
<p>å…¶ä¸­å®¹æ˜“æ··æ·†çš„æ˜¯ï¼š</p>
<p>è¯»è€…å¯¹äº count ï¼ˆäººæ•°çš„æ”¹å˜æ˜¯äº’æ–¥çš„ï¼‰ï¼Œä½†æ˜¯å¯¹äºè¯»ä¹¦ï¼ˆå…¶ä»–ä¸æ”¹å˜ä¸´ç•Œèµ„æºçš„æ“ä½œï¼‰æ˜¯å¹¶å‘çš„</p>
<h3 data-id="heading-7">é«˜å¹¶å‘ç¼“å­˜</h3>
<p>å…¶å®åœ¨åº•å±‚è·Ÿè¯»å†™è€…é—®é¢˜æ˜¯ä¸€æ ·çš„ï¼Œæ ¸å¿ƒç‚¹åœ¨äºï¼š</p>
<ul>
<li>è¯»è€…ä¸ä¼šæ›´æ”¹ä¸´ç•Œèµ„æº</li>
</ul>
<p>å½“ç¼“å­˜è¢«è·å–çš„æ—¶å€™æ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥å¹¶å‘è®¿é—®ç¼“å­˜åŒºçš„å†…å®¹ï¼Œ</p>
<p>ä½†å½“ç¼“å­˜åŒºçš„å†…å®¹è¢«ä¿®æ”¹æ—¶åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¿›è¡Œæ“ä½œï¼Œ</p>
<p>è¿™ä¸è¯»å†™è€…é—®é¢˜å®Œå…¨ä¸€æ ·ï¼</p>
<h2 data-id="heading-8">ç®¡ç¨‹</h2>
<h3 data-id="heading-9">ç®¡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ç®¡ç¨‹çš„ç›®çš„æ˜¯ï¼šä¸ºäº†å®ç°å„ä¸ªè¿›ç¨‹å¯¹äºå…±äº«èµ„æºçš„äº’æ–¥æˆ–åŒæ­¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcfcaca5c630492b88cf3f09c41a7a35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=OQWSjqiqlRws6VWsUkuYU6sgyRM%3D" alt="" loading="lazy"/></p>
<p>ç®¡ç¨‹åœ¨é¢å‘å¯¹è±¡ä¸­å¯ä»¥ç†è§£æˆï¼š</p>
<ul>
<li>å°†å…±äº«èµ„æºå°è£…åœ¨å¯¹è±¡ä¸­</li>
<li>åœ¨å¯¹è±¡å†…éƒ¨å¢åŠ å¯¹åº”çš„éœ€æ±‚æ–¹æ³•</li>
<li>åœ¨æ„é€ å‡½æ•°ä¸­å¯¹è¯¥å…±äº«èµ„æºè¿›è¡Œåˆå§‹åŒ–</li>
<li>å¯¹å¤–å…¬å¼€æ–¹æ³•ï¼Œæ–¹æ³•å†…éƒ¨å®ç°åŒæ­¥|äº’æ–¥</li>
</ul>
<h4 data-id="heading-10">ç®¡ç¨‹çš„åŸºæœ¬ç‰¹å¾ä¸º</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95cef4d08f894f4cb8d35efb02064690~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=MMIy2Xim8pBJHKVN39%2FvdLnfenI%3D" alt="" loading="lazy"/></p>
<p>åœ¨é¢å‘å¯¹è±¡ä¸­å¯ä»¥ç†è§£æˆï¼š</p>
<ul>
<li>å¯¹è±¡ä¸­çš„ä¸´ç•Œèµ„æºåªæœ‰è¯¥å¯¹è±¡æœ‰æƒåˆ©è®¿é—®</li>
<li>åªèƒ½ä½¿ç”¨å¯¹è±¡å…¬å¼€çš„æ–¹æ³•è®¿é—®å¯¹è±¡çš„å±æ€§ï¼ˆä¸´ç•Œèµ„æºï¼‰</li>
<li>ç¬¬ä¸‰ç‚¹å°±æ˜¯å­—é¢æ„æ€äº†</li>
</ul>
<h3 data-id="heading-11">synchronized</h3>
<p>Java ä¸­çš„åŠ é”é€šå¸¸ä½¿ç”¨çš„æ˜¯ synchronizedï¼Œè€Œè¿™ä¸ªæœºåˆ¶å°±å¾ˆç±»ä¼¼ä¸ç®¡ç¨‹ï¼ŒåŒä¸€æ—¶é—´è®¿é—® synchronized è®¿é—®çš„çº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ª</p>
<h2 data-id="heading-12">å“²å­¦å®¶é—®é¢˜</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d72114c720104225bb07edf875a475fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559754&amp;x-signature=RVla9zeLnTAx0%2FN4TRTS0DnqYI8%3D" alt="" loading="lazy"/></p>
<p>å“²å­¦å®¶é—®é¢˜çš„éš¾ç‚¹åœ¨äºä¸€ä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªä¸´ç•Œèµ„æºæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œå¦‚æœäº”ä½å“²å­¦å®¶åŒæ—¶æ‹¿èµ·ä¸€æ ¹ç­·å­å°±ä¼šäº§ç”Ÿæ­»é”ï¼</p>
<p>å“²å­¦å®¶é—®é¢˜çš„é‡ç‚¹æ˜¯é¿å…æ­»é”ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”Ÿæ­»é”ï¼Ÿ</p>
<ul>
<li>äº’æ–¥ï¼šæŸç§èµ„æºä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼Œå³è¯¥èµ„æºä¸€æ—¦åˆ†é…ç»™æŸä¸ªè¿›ç¨‹ï¼Œå…¶ä»–è¿›ç¨‹å°±ä¸èƒ½å†è®¿é—®ï¼Œç›´åˆ°è¯¥è¿›ç¨‹è®¿é—®ç»“æŸã€‚</li>
<li>å æœ‰ä¸”ç­‰å¾…ï¼šä¸€ä¸ªè¿›ç¨‹æœ¬èº«å æœ‰èµ„æºï¼ˆä¸€ç§æˆ–å¤šç§ï¼‰ï¼ŒåŒæ—¶è¿˜æœ‰èµ„æºæœªå¾—åˆ°æ»¡è¶³ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–è¿›ç¨‹é‡Šæ”¾è¯¥èµ„æºã€‚</li>
<li>ä¸å¯æŠ¢å ï¼šåˆ«äººå·²ç»å æœ‰äº†æŸé¡¹èµ„æºï¼Œä½ ä¸èƒ½å› ä¸ºè‡ªå·±ä¹Ÿéœ€è¦è¯¥èµ„æºï¼Œå°±å»æŠŠåˆ«äººçš„èµ„æºæŠ¢è¿‡æ¥ã€‚</li>
<li>å¾ªç¯ç­‰å¾…ï¼šå­˜åœ¨ä¸€ä¸ªè¿›ç¨‹é“¾ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½å æœ‰ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€çš„è‡³å°‘ä¸€ç§èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-13">è§£å†³æ–¹æ¡ˆ</h3>
<p>åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ol>
<li>æœ€å¤šåªå…è®¸ 4 åå“²å­¦å®¶åŒæ—¶åƒé¥­ï¼Œ</li>
<li>ç»™æ¯ä¸€ä½å“²å­¦å®¶ç¼–å·ï¼Œè¦æ±‚å¥‡æ•°å·å“²å­¦å®¶å¿…é¡»å…ˆæ‹¿å·¦è¾¹çš„ç­·å­å†æ‹¿å³è¾¹çš„ç­·å­ï¼Œå¶æ•°ç›¸å</li>
<li>ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªå“²å­¦å®¶è¿›è¡Œâ€œæ‹¿ç­·å­â€è¿™ä¸ªè¡Œä¸º</li>
</ol>
<p>æˆ‘è¿™é‡Œä½¿ç”¨ Java å®ç°ç¬¬ä¸‰ä¸ªæ–¹æ¡ˆ</p>
<p>è¿™é‡Œåªä»¥ç¬¬ä¸€ä¸ªå“²å­¦å®¶çš„å®ç°ä¸ºä¾‹å­</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.locks.Condition;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.Lock;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;
<span class="hljs-comment">// ä¸ºäº†æ¼”ç¤ºä»£ç ç®€æ´ï¼Œè¿™é‡Œæ¨¡æ‹Ÿçš„æ˜¯ç¬¬ 0 å·å“²å­¦å®¶çš„è§†è§’</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-comment">// åªæœ‰æ‹¿åˆ°è¿™ä¸ªé”çš„å“²å­¦å®¶æ‰èƒ½æ‹¿æ”¾ç­·å­</span>
    <span class="hljs-keyword">static</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">canEat_lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    <span class="hljs-keyword">static</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">canEat_condition</span> <span class="hljs-operator">=</span> canEat_lock.newCondition();

    <span class="hljs-comment">// è®°å½•å½“å‰çš„ 5 æ ¹ç­·å­,ç­·å­å¦‚æœå­˜åœ¨ï¼Œåˆ™æ ‡æ³¨ä¸º 1</span>
    <span class="hljs-keyword">static</span> Integer[] chops = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[]{<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>};

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æœ‰ 5 ä¸ªå“²å­¦å®¶ï¼Œæ¯ä¸ªå“²å­¦å®¶éƒ½åªèƒ½æ‹¿è‡ªå·±å·¦è¾¹ i å’Œå³è¾¹ i+1==5?i=0:i+=1 çš„ç­·å­</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            canEat_lock.lock();
            <span class="hljs-keyword">try</span>{
                <span class="hljs-comment">// æŠ¢åˆ°è¿™ä¸ªé”çš„å“²å­¦å®¶å¯ä»¥çœ‹ä¸€ä¸‹è‡ªå·±çš„ä¸¤è¾¹æœ‰æ²¡æœ‰ç­·å­</span>
                <span class="hljs-comment">// å½“ä¸€ä½å“²å­¦å®¶å·¦å³çš„ç­·å­æœ‰å…¶ä¸­ä¸€åªä¸åœ¨æ—¶ï¼Œè¿›å…¥é˜»å¡å¹¶å½’è¿˜é”</span>
                <span class="hljs-keyword">while</span> (chops[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span> || chops[<span class="hljs-number">1</span>] == <span class="hljs-number">0</span>) {
                    canEat_condition.await();
                }

                chops[<span class="hljs-number">0</span>]--;
                chops[<span class="hljs-number">1</span>]--;
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            } <span class="hljs-keyword">finally</span> {
                canEat_lock.unlock();
            }

            <span class="hljs-comment">// å“²å­¦å®¶åœ¨åƒé¥­ã€‚ã€‚ã€‚</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            }

            canEat_lock.lock();
            <span class="hljs-keyword">try</span>{
                chops[<span class="hljs-number">0</span>]++;
                chops[<span class="hljs-number">1</span>]++;
                canEat_condition.signalAll();
            } <span class="hljs-keyword">finally</span> {
                canEat_lock.unlock();
            }
        }).start();
    }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œå¤æ‚çš„åº”è¯¥æ˜¯æ¯ä¸ªè§’è‰²ä¹‹é—´çš„è”ç³»ï¼ˆåŒæ­¥ï¼‰ï¼Œä»¥åŠä¸ä¸´ç•Œèµ„æºçš„è®¿é—®ï¼ˆäº’æ–¥ï¼‰çš„é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[13 ä¸‡äººæ”¶è—çš„ Openclaw ç™»é¡¶GitHub No.1ï¼é™„ä¸Šè¶…ç»æ€§ä»·æ¯”éƒ¨ç½²æŒ‡å—ï¼(ä¿å§†çº§)]]></title>    <link>https://juejin.cn/post/7601435429409423394</link>    <guid>https://juejin.cn/post/7601435429409423394</guid>    <pubDate>2026-02-02T01:56:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601435429409423394" data-draft-id="7601384029611540495" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="13 ä¸‡äººæ”¶è—çš„ Openclaw ç™»é¡¶GitHub No.1ï¼é™„ä¸Šè¶…ç»æ€§ä»·æ¯”éƒ¨ç½²æŒ‡å—ï¼(ä¿å§†çº§)"/> <meta itemprop="keywords" content="GitHub,äººå·¥æ™ºèƒ½,å¼€æº"/> <meta itemprop="datePublished" content="2026-02-02T01:56:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€æºæ˜Ÿæ¢"/> <meta itemprop="url" content="https://juejin.cn/user/2977915149494248"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            13 ä¸‡äººæ”¶è—çš„ Openclaw ç™»é¡¶GitHub No.1ï¼é™„ä¸Šè¶…ç»æ€§ä»·æ¯”éƒ¨ç½²æŒ‡å—ï¼(ä¿å§†çº§)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2977915149494248/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€æºæ˜Ÿæ¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:56:20.000Z" title="Mon Feb 02 2026 01:56:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ClawdBot åˆæ”¹åäº†ï¼šClawdbot -&gt; Mlotbot -&gt; Openclawï¼Œè¿™æ¬¡çš„åå­—åº”è¯¥æ˜¯æ¯”è¾ƒäº§å“åŒ–çš„åç§°äº†ï¼Œè€Œä¸”æ‰€æœ‰æœåŠ¡åŠå‘½ä»¤è¡Œä¹Ÿéƒ½æ›´æ”¹æ‰äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c59684892cd841e3a5d3cfe0118b140d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=85tvXKYgyKCXHKawRXlAT1ppKic%3D" alt="" loading="lazy"/>
å¦‚ä»Š GitHub ä¸Š Star æ•°å³å°†ç ´ 13 ä¸‡äººæ¬¡ï¼ˆå†™æ–‡ç« æ—¶å·²åˆ°127Kï¼‰ï¼ŒåŒæ—¶ç™»ä¸Šäº† GitHub Trending æ—¥æ¦œã€å‘¨æ¦œã€æœˆæ¦œä¸‰ä¸ªTOP1ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0cbf313692a466aa5cfde5258b1ec24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=d9XgMJhAA806O8I1Mqi0rxJExG8%3D" alt="" loading="lazy"/>
æ‰€ä»¥å“ªæ€•ä¸€å‘¨è¿‡å»äº†ï¼Œæˆ‘æ¯å¤©è¿˜æ˜¯èƒ½å¤Ÿåˆ·åˆ°å„ç§å„æ ·çš„ openclawï¼ˆåŸclawdbotï¼‰æ­é…å„ç§æœåŠ¡å™¨ã€å„ç§åº”ç”¨çš„éƒ¨ç½²æ•™ç¨‹ã€‚</p>
<p>çœ‹äº†è¿™ä¹ˆå¤šéƒ¨ç½²æ–¹æ¡ˆï¼Œæˆ‘å‘ç° <strong>GitHub Codespaces</strong> è¿™ä¸ªæ–¹æ¡ˆæ˜¯æ€§ä»·æ¯”æœ€é«˜çš„ï¼Œå¯ä»¥è¯´å‡ ä¹ä¸ç”¨èŠ±ä¸€åˆ†é’±å°±èƒ½ä½“éªŒåˆ° clawdbot çš„å¿«ä¹ã€‚</p>
<p>åªè¦ä½ æœ‰ä¸€ä¸ª GitHub è´¦å·å³å¯ï¼Œå³ä½¿æ²¡æœ‰ä¹Ÿå¯ä»¥å¾ˆè½»æ¾çš„æ³¨å†Œä¸€ä¸ªã€‚</p>
<p>**GitHub Codespaces **å°±ç›¸å½“äºä¸€ä¸ª GitHub çš„äº‘ç«¯ç¯å¢ƒï¼Œæ¯ä¸ªè´¦å·éƒ½ä¼šæœ‰ï¼Œè€Œä¸”é…ç½®è¿˜ä¸ä½ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰ç”¨è½»é‡äº‘æœåŠ¡æˆ–VPSå¤§éƒ½é€‰æ‹©2æ ¸2Gå†…å­˜çš„ï¼Œè€Œ **Codespaces **ç›´æ¥é€ä½ 2æ ¸8Gå†…å­˜ã€32Gç¡¬ç›˜çš„äº‘æœåŠ¡å™¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c394624dc6c84ba28e74673637704985~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=RnHhj91Y03UQQg5Wbpf3S8Eq%2B48%3D" alt="" loading="lazy"/>
æ¥ä¸‹æ¥å°±å¸¦å¤§å®¶ä¸€æ­¥æ­¥é€šè¿‡ **GitHub Codespaces **æ­å»ºä¸€ä¸ªå®Œå…¨é›¶æˆæœ¬çš„ OpenClawï¼ˆclawdbotï¼‰æœåŠ¡ã€‚</p>
<p>å…¶ä¸­ä¸»æ¨¡å‹ä½¿ç”¨æœ€æ–°çš„å›½äº§ <strong>Kimi K2.5</strong>ï¼Œå³æ—¶èŠå¤©åº”ç”¨è¿™æ¬¡é€‰æ‹© <strong>Discord</strong>ã€‚</p>
<h3 data-id="heading-0">åˆ›å»º GitHub Codespaces</h3>
<h4 data-id="heading-1"><strong>æ–°å»ºé¡¹ç›®ä»“åº“</strong></h4>
<p>æˆ‘ä»¬éœ€è¦åœ¨ GitHub ä¸Šæ–°å»ºä¸€ä¸ªé¡¹ç›®ä»“åº“ã€‚æ‰“å¼€ GitHub ä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’â€œ+â€å·ï¼Œé€‰æ‹©â€œNew repositoryâ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8084695cf6bc4ac8afb3df445517f900~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=O18ZjqU%2By2SADmPPfe3pUimkPvY%3D" alt="" loading="lazy"/>
ç„¶åç»™æ–°ä»“åº“èµ·ä¸ªåç§°ï¼Œè¿™ä¸ªå¯ä»¥éšä¾¿èµ·ï¼Œæˆ‘è¿™é‡Œèµ·çš„æ˜¯ openclaw-spaceï¼Œå…¶ä»–å‚æ•°ä¸ç”¨ç®¡ï¼Œç›´æ¥ç‚¹å‡»â€œCreate repositoryâ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5994ee8f49df4a6eb571d7efec51c4e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=DrMuWswlEWrz3X0QEIswC4NEwRQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2"><strong>åˆ›å»º Codespace</strong></h4>
<p>ä»“åº“åˆ›å»ºå¥½ï¼Œä¼šè·³è½¬åˆ°ä»“åº“ç©ºé¡µé¢ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»é¡µé¢å·¦è¾¹çš„â€œ<strong>Create a codespace</strong>â€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5498c8066be6409693ccb80a8118c81d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=UuAYDCVl7hUMbNQmK7CiJpQfk6s%3D" alt="" loading="lazy"/>
ç„¶åä¼šè·³è½¬åˆ° Create codespaces é¡µé¢ï¼Œç‚¹å‡» â€œ<strong>Create new codespace</strong>â€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/440dd47b3cd146ac9502601b8cf50557~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=lCPetNNajHdpBDIUpeJsUalg698%3D" alt="" loading="lazy"/>
ç­‰å¾…æ–°é¡µé¢åˆ·æ–°å®Œæˆï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼ VS Code çš„Webé¡µé¢ï¼Œåˆ°è¿™é‡Œå°±è¯´æ˜Codespaceäº‘ç«¯ä¸»æœºå·²ç»å¼€æœºäº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e0b3b0600c0460390d104ef345dfeb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=efUJwcEveQj38y9UgloQY7KXKHY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸€é”®å®‰è£… openclawï¼ˆclawdbotï¼‰</h3>
<p>äº‘ç«¯ç¯å¢ƒå‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®‰è£…æˆ‘ä»¬çš„ä¸»è§’ openclawã€‚</p>
<p>æŠŠ Codespaces å°±å½“æˆ VScode IDEï¼Œæ‰“å¼€ä¸‹æ–¹ç»ˆç«¯ï¼Œç›´æ¥ç²˜è´´å®˜æ–¹çš„ä¸€é”®å®‰è£…å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">curl -fsSL https:<span class="hljs-comment">//openclaw.ai/install.sh | bash</span>
</code></pre>
<p>å¤§å®¶å‘ç°åŸæœ‰çš„ clawdbot å­—ç¬¦ç”»ä¹Ÿå˜ä¸º openclaw äº†ï¼Œè€Œä¸”è¿™æ¬¡å®‰è£…ç­‰å¾…çš„æ—¶é—´å¾ˆçŸ­ï¼Œä¼°è®¡åªæœ‰ä¸¤ä¸‰åˆ†é’Ÿå°±å®Œæˆå®‰è£…äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9ca424bd11844deaded4ae9c6da02c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=Nw3iW%2FxjPQtvnik4GdSB%2FisnObE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">Kimi K2.5 æ¨¡å‹APIå‡†å¤‡</h4>
<p>æˆ‘è¿™é‡Œä¸ºäº†éªŒè¯æ•ˆæœï¼Œæ¨¡å‹è¿˜æ˜¯é€‰æ‹©äº†è¿™ä¸¤å¤©æ¯”è¾ƒçƒ­é—¨çš„ Kimi K2.5ï¼Œè¿™ä¸ªæ¨¡å‹ä¹Ÿæ˜¯æœ‰è–…ç¾Šæ¯›çš„é€”å¾„çš„ï¼Œæ¯”å¦‚è‹±ä¼Ÿè¾¾å®˜æ–¹æ˜¯å…è´¹ä½¿ç”¨çš„ï¼Œä¸è¿‡å»¶è¿Ÿæœ‰ç‚¹é«˜ã€‚</p>
<p>æ‰€ä»¥è¿˜æ˜¯èŠ±äº†ä¸€ä¸ªåŒ…å­é’±ï¼Œä¹°äº†ä¸ªä¸ƒå¤©ä½“éªŒå¡ã€‚ç›´æ¥åœ¨ Kimi å®˜ç½‘é¡µé¢ kimi-code ä¸‹å°±å¯ä»¥çœ‹åˆ°ã€‚</p>
<p>kimi-codeï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kimi.com%2Fcode" target="_blank" title="https://www.kimi.com/code" ref="nofollow noopener noreferrer">www.kimi.com/code</a>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46ad9c41a04a4c7b892b80901cc364f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=xyN3QL%2B7g%2BLLMeFRXC4R5Xspakw%3D" alt="" loading="lazy"/>
è®¢é˜…åå°±æ˜¯ K2.5 æ¨¡å‹ï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª API-Key å¹¶ä¿å­˜èµ·æ¥ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8c3abb18f414d30891f7609217434ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=6fIArwVZmk4BBghrg2iEJAJFq%2FU%3D" alt="" loading="lazy"/>
æ¨¡å‹å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬å°±å›åˆ° codespaces é‡Œï¼Œç»§ç»­æˆ‘ä»¬çš„é…ç½®å‘å¯¼ã€‚</p>
<h4 data-id="heading-5">æ¨¡å‹é…ç½®</h4>
<p>ç»§ç»­å¾€ä¸‹èµ°ï¼Œé€‰æ‹©åŒæ„åè®®ï¼ˆYesï¼‰ï¼Œæ¨¡å¼é€‰æ‹©å¿«é€Ÿå¼€å§‹ï¼ˆQuick Startï¼‰ï¼Œæ¨¡å‹æˆ‘ä»¬å°±ç›´æ¥é€‰æ‹©æœˆä¹‹æš—é¢ï¼ˆMoonshot AIï¼‰çš„æ¨¡å‹ï¼Œç„¶åå†é€‰æ‹©Kimi Codeï¼ˆK2.5ï¼‰çš„APIï¼Œå¤åˆ¶ç²˜è´´åˆšåˆšåˆ›å»ºçš„ API Keyã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0f5bd9efa3342f1a29bed87d1f0e3f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=%2Fn1%2FoWL8kqbLFMG9ApZ02Ibul4Y%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">Discord é…ç½®</h4>
<p>ç»§ç»­é€‰æ‹© Channel åº”ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥é€‰æ‹©äº† Discordï¼Œç„¶åæ ¹æ®å®ƒçš„æç¤ºæ¥ç»§ç»­å¾€ä¸‹èµ°ï¼Œå¯ä»¥çœ‹åˆ°å®ƒéœ€è¦ä¸€ä¸ª Discord Bot Token æ‰èƒ½ç»§ç»­ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0da23c71ad1b4164b7d95b6d11367c1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=UFWKKlhQiZhOU6UjKNHRh5EuNnI%3D" alt="" loading="lazy"/>
å¦‚æœä½ æ²¡æœ‰ Discord è´¦å·ï¼Œéœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªï¼ˆdiscord.comï¼‰ã€‚</p>
<p>å®Œæˆåï¼Œæ‰“å¼€ Discord å¼€å‘è€…å¹³å°ï¼Œç‚¹å‡» <strong>New Application</strong>ï¼Œè¾“å…¥ Bot åç§°ï¼ŒåŒæ„æ¡æ¬¾åç‚¹å‡»åˆ›å»ºã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Fdevelopers%2Fapplications" target="_blank" title="https://discord.com/developers/applications" ref="nofollow noopener noreferrer">discord.com/developers/â€¦</a>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc73b1396a0644b9870a939eca4466ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=4yWDCkSSGS0vP%2B3jRUOlFtk8P10%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a098df3215d64ab4a04b187dfaf74fa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=VgFaZhJ8M4FLDN1IuNe4391z8uQ%3D" alt="" loading="lazy"/>
ç‚¹å‡»åˆ›å»ºåï¼Œä¼šè·³è½¬åˆ°æ–°é¡µé¢ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§ Bot æ ‡ç­¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d20630c19ab4aa285a9a5849a50f74f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=A%2F6O9u6CpbLU7CNUKRnZ%2BE1QxDI%3D" alt="" loading="lazy"/>
ä¸‹æ‹‰ï¼Œç‚¹å‡» <strong>Reset Token <strong>ç”Ÿæˆä¸€ä¸ªTokenï¼Œè¿™ä¸ªå°±æ˜¯ openclaw è¿æ¥ Discord æ‰€éœ€è¦çš„ Tokenã€‚ï¼ˆéœ€è¦å¦¥å–„ä¿å­˜ï¼Œæ³„éœ²ä¼šå¯¼è‡´ Bot è¢«æ»¥ç”¨ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/571294d5071540d18d4defe829060ac5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=nyuixzVcVHC3wutWrCkRpVzabIk%3D" alt="" loading="lazy"/>
ç„¶åå¼€å¯å…³é”®æƒé™ï¼ˆå¿…åšï¼Œå¦åˆ™ openclaw æ— æ³•è¯»å–æ¶ˆæ¯ / å‘é€å›å¤ï¼‰ï¼Œä¸‹æ»‘åˆ° <strong>Privileged Gateway Intents</strong>ï¼Œå¼€å¯</strong>MESSAGE CONTENT INTENT</strong>ï¼ˆè¯»å–æ¶ˆæ¯å†…å®¹ï¼‰ã€<strong>SERVER MEMBERS INTENT</strong>ï¼ˆå¯é€‰ï¼Œç”¨äºæœåŠ¡å™¨æˆå‘˜æƒé™æ§åˆ¶ï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d7ea1b1a6b54c9da61de3b66364e0f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=el4%2BhxHIS68IqjLApOXOMS7vbEQ%3D" alt="" loading="lazy"/>
å†ç‚¹å‡»å·¦ä¾§ **OAuth2 **â†’ <strong>OAuth2 URL Generator</strong>ï¼Œå‹¾é€‰ä»¥ä¸‹æƒé™ï¼š</p>
<p>Scopesï¼š<strong>botã€applications.commands</strong>ï¼›
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40aa6ec3a6b5494dab1eba834bb28c55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=b0AqkFzivwOp7qmy6zTl1kmcZRQ%3D" alt="" loading="lazy"/>
å†ä¸‹æ»‘åˆ° <strong>Bot Permissions</strong> æƒé™ï¼Œå‹¾é€‰ä»¥ä¸‹æƒé™ï¼š<strong>Send Messagesã€Read Message Historyã€Embed Linksã€Use Slash Commands</strong>ï¼›
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b6e1360887c47f287884e0e0064013f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=cltGZeoIfjtqIK106cOGPh3Py%2FI%3D" alt="" loading="lazy"/>
ä¸‹æ»‘åˆ°é¡µé¢æœ€åº•éƒ¨ï¼Œå¤åˆ¶ç”Ÿæˆçš„URLé“¾æ¥ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8475575424f459ab454812083173911~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=SW6idEeBBxWVx0zHwM3EFcYv4bk%3D" alt="" loading="lazy"/>
å°†å…¶å¤åˆ¶å‡ºæ¥å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå°† Bot é‚€è¯·åˆ°ä½ çš„ Discord æœåŠ¡å™¨ï¼ˆéœ€æœåŠ¡å™¨ç®¡ç†å‘˜æƒé™ï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/280a8483637443f496b631afa19d8169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=9Xjdor8E82BDuTMRmjY4qf6QAaM%3D" alt="" loading="lazy"/>
ç‚¹å‡»ç»§ç»­åè¿›è¡Œæˆæƒï¼Œå³å¯é‚€è¯·botï¼ˆOpenClawBotï¼‰åŠ å…¥ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c095376895104c9b8dc83044536696ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=xFrOaa%2BU8GUaH0xl2PU0fNRf2b8%3D" alt="" loading="lazy"/>
æ‰“å¼€æˆ‘ä»¬è‡ªå·±çš„DiscordæœåŠ¡å™¨ä¸»å¯¹è¯æ¡†å†…ï¼Œä½ å°±å‘ç°åˆšåˆšæ·»åŠ çš„ <strong>OpenClawBot</strong> å·²ç»æ˜¾ç¤ºäº†ï¼Œä¸è¿‡æ˜¯ç¦»çº¿çŠ¶æ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeb15091f00b48b7b1fe2a83d41c2d17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=TVMgjtQod5A5QqHr75qyNcN%2F%2F%2FY%3D" alt="" loading="lazy"/>
ç„¶åå›åˆ°é…ç½®å‘å¯¼é‡Œé¢ï¼Œå°†ä¹‹å‰çš„Tokenå¤åˆ¶ç²˜è´´åˆ°è¾“å…¥åŒºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31de88f21ac64439b2d8c33319e485fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=PS16fH%2BqVrjjj24RITjKcfd8slU%3D" alt="" loading="lazy"/>
åˆ°è¿™é‡Œ Discord ç›¸å…³çš„é…ç½®å·²ç»å…¨éƒ¨å®Œæˆã€‚</p>
<p>æ¥ä¸‹æ¥åªéœ€è¦æŠŠåç»­çš„é…ç½®æŒ‰ç…§å‘å¯¼ä¸€æ­¥æ­¥å®Œæˆå³å¯ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2283249f0554c438aa1ebffc37af724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=zbToZnyY%2BDKVh1v%2F8u78MYe1otI%3D" alt="" loading="lazy"/>
åœ¨æœ€åè¾“å‡ºçš„å†…å®¹ä¸­ï¼ŒæŠŠæœ‰Tokençš„é‚£æ®µä¿¡æ¯é“¾æ¥æœ€å¥½å…ˆä¿å­˜ä¸‹æ¥ï¼Œå…å¾—åç»­å†å»æŸ¥çœ‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3f68a31ee14fc9b2916b1660bc0f36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=icL6K%2F2FnKZeU6K6or6UjOB8Scc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">å¯åŠ¨ OpenClaw</h3>
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨ GitHub äº‘æœåŠ¡å™¨ï¼ˆcodespacesï¼‰ä¸Šå¯åŠ¨ OpenClaw æœåŠ¡äº†ã€‚</p>
<pre><code class="hljs language-css" lang="css">openclaw gateway <span class="hljs-attr">--verbose</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a98dacd461424d8aab5d926944802f31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=GfMxP%2BybeXVYKDL7m77JSV7E21I%3D" alt="" loading="lazy"/>
å¯åŠ¨æˆåŠŸåï¼Œä»å¯åŠ¨æ—¥å¿—ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸»æ¨¡å‹ç”¨çš„Kimi-Codeçš„æ¨¡å‹ï¼Œchannelåº”ç”¨è¿æ¥çš„Discordã€‚</p>
<p>ç„¶åæ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°Discordï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥å‘ç° Discord é‡Œåˆšåˆšè¿˜æ˜¯ç¦»çº¿çŠ¶æ€çš„ Botï¼Œå·²ç»å˜ä¸ºåœ¨çº¿çŠ¶æ€äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1e780765ff042b18620ee7941ac864f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=3Srjcb085ztTDki04qAHsfFfUQ8%3D" alt="" loading="lazy"/>
æˆ‘ä»¬ç›´æ¥ä¸Botè¿›è¡Œå¯¹è¯åæ‹¿åˆ°é…å¯¹ç ï¼ˆåˆ‡è®°ä¸€å®šéœ€è¦å’ŒOpenClawBotè¿›è¡Œç§èŠï¼ï¼ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a6f51178f4f4c1ea4e2f6aa96d4f4f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=eVksZhbquE0zvh%2Brow8cQHGE7Ac%3D" alt="" loading="lazy"/>
æ‹¿åˆ°é…å¯¹ç åï¼Œæˆ‘ä»¬å›åˆ°ç»ˆç«¯ï¼Œå…ˆå…³é—­ Gateway æœåŠ¡ï¼Œç„¶åç²˜è´´å¹¶è¿è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œé…å¯¹ï¼ˆæŠŠ<code>æ›¿æ¢ä¸ºä¸Šå›¾ä¸­çš„â€œPairing codeâ€ç ï¼‰ï¼š</code></p><code>
<pre><code class="hljs">openclaw pairing approve discord 
</code></pre>
<p>æ‰§è¡Œå®Œæˆåå†å¯åŠ¨ OpenClaw Gateway æœåŠ¡ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c626c276813848fb8a7b4a60dff6835d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=unc2fF3WkDh1PmhJCzWouqkxwGY%3D" alt="" loading="lazy"/>
æœ€åå›åˆ°Discordä¸Botè¿›è¡Œå¯¹è¯ï¼Œå¦‚æœæ­£å¸¸å›å¤åˆ™è¯´æ˜éƒ¨ç½²æˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d53636dc4044401a186b8fdc63c6b06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=hrM6MjZjoa5PKzzpZE9s1fyEijo%3D" alt="" loading="lazy"/>
ç»ˆç«¯æ—¥å¿—ä¹Ÿå¯ä»¥çœ‹å¾—åˆ°å¯¹è¯æ¡†ä¸­çš„è¾“å‡ºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07b0ec5d29c74966b9f90d1e6759dba8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=l6NC6HiQHxkep8oHxYLriVLGtp4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">å¸¸è§é—®é¢˜ç­”ç–‘</h3>
<p>æ—¢ç„¶ Discord å·²ç»æˆåŠŸè¿æ¥ä¸Šäº†ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨æœ¬åœ°éƒ¨ç½²æ˜¯é€šè¿‡<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A18789%2F%3Ftoken%3Dxxx%25E6%259D%25A5%25E8%25AE%25BF%25E9%2597%25AEWeb%25E6%258E%25A7%25E5%2588%25B6%25E5%258F%25B0%25EF%25BC%258C%25E9%2582%25A3%25E4%25B9%2588%25E7%258E%25B0%25E5%259C%25A8%25E5%25A6%2582%25E4%25BD%2595%25E9%2580%259A%25E8%25BF%2587" target="_blank" title="http://localhost:18789/?token=xxx%E6%9D%A5%E8%AE%BF%E9%97%AEWeb%E6%8E%A7%E5%88%B6%E5%8F%B0%EF%BC%8C%E9%82%A3%E4%B9%88%E7%8E%B0%E5%9C%A8%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87" ref="nofollow noopener noreferrer">http://localhost:18789/?token=xxxæ¥è®¿é—®Webæ§åˆ¶å°ï¼Œé‚£ä¹ˆç°åœ¨å¦‚ä½•é€šè¿‡</a> GitHub æ¥è®¿é—® OpenClaw çš„Webæ§åˆ¶å°å‘¢ï¼Ÿ</p>
<p>å…¶å®ä¹Ÿéå¸¸åœ°ç®€å•ï¼ŒGitHub å…¶å®ä¹Ÿä¸ºæˆ‘ä»¬è€ƒè™‘åˆ°äº†ï¼Œå®ƒä¼šè‡ªåŠ¨è¯†åˆ« OpenClaw å¼€å¯çš„æœåŠ¡ï¼Œå¹¶å¸®æˆ‘ä»¬æŠŠå†…ç½‘ç«¯å£æ˜ å°„åˆ°å…¬ç½‘ï¼ˆå…¥å£å°±åœ¨â€œç»ˆç«¯â€æ—è¾¹çš„â€œç«¯å£â€é‚£æ ï¼‰ã€‚</p>
<p>æˆ‘ä»¬åœ¨ç«¯å£åˆ—è¡¨ä¸­æ‰¾åˆ° <strong>18789 ç«¯å£ï¼Œ<strong>æŠŠé¼ æ ‡ç§»åˆ°è½¬å‘åœ°å€çš„å…¬ç½‘åœ°å€ä¸Šï¼Œç‚¹å‡»é‚£ä¸ªçš„â€œåœ°çƒâ€å›¾æ ‡ï¼Œæ‰“å¼€å³å¯ã€‚ï¼ˆå¦‚æœæ²¡æœ‰ 18789 ç«¯å£ä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ ä¸Šï¼Œæˆ‘çš„å°±æ˜¯è‡ªå·±æ·»åŠ ä¸Šçš„ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80f6e5d87afc47d29973e4875da57342~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=4%2Bj75sqffwk%2F%2BwuAqXxSKlz2ewU%3D" alt="" loading="lazy"/>
æ‰“å¼€åä½ ä¼šå‘ç°æœ‰ä¸¤ç±» 1008 æŠ¥é”™ï¼Œä¸€ä¸ªæ˜¯</strong>ç¼ºToken</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯<strong>ç¼ºé…å¯¹</strong>ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0a93c201f504049b594ba8425307f3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=ntf%2BUvi4mlASHIDaDNV2PmSivPE%3D" alt="" loading="lazy"/>
æˆ‘ä»¬å…ˆè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æˆªå›¾æ‰€ç¤ºçš„é—®é¢˜ï¼Œç¼ºä»¤ç‰Œï¼Œéœ€è¦è®¤è¯ã€‚è¿™æ˜¯å› ä¸ºä¸ºäº†å®‰å…¨ï¼ŒWeb æ§åˆ¶å°é»˜è®¤å¼€å¯äº† Token éªŒè¯ã€‚</p>
<p>è¿˜è®°å¾—ä¹‹å‰åœ¨é…ç½®å‘å¯¼ç»“æŸæ—¶ï¼Œè®©å¤§å®¶è®°å½•çš„åœ°å€+Tokenå˜›ï¼Œå°±æ˜¯é‚£ä¸ªTokenï¼Œç„¶åæŠŠå®ƒå¡«å…¥ Overview -&gt; Gateway Tokenï¼Œç„¶åç‚¹å‡» Connectã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42c21b20bab84426966f99d352afbcfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=7xXcTtAkJWgNE21p4SYabT8J3hI%3D" alt="" loading="lazy"/>
ç„¶åå°±ä¼šå‡ºç°æ–°çš„ 1008 æŠ¥é”™ï¼šdisconnected (1008): pairing requiredã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10e15c2f3f514df2a9c78be7d89c79b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=iDET5%2FkSCIK2c8d402o7JZ8Xd8s%3D" alt="" loading="lazy"/>
è¿™æ˜¯å› ä¸º OpenClaw æ£€æµ‹åˆ°æœ‰æ–°è®¾å¤‡ï¼ˆä½ çš„æµè§ˆå™¨ï¼‰æ¥å…¥ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå®ƒéœ€è¦ä½ åœ¨åå°åŒæ„ã€‚(è¿™ä¸ªåœ¨ä¸Šä¸€æ¬¡å‘çš„ã€ŒMoltBot æ¥å…¥é£ä¹¦ã€çš„æ–‡ç« ä¸­ä¹Ÿæœ‰å†™è¿‡ã€‚ï¼‰</p>
<p>å…¶å®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯<strong>å‘½ä»¤è¡Œ</strong>ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä¸Šæ¬¡ç”¨çš„ï¼‰ï¼Œä¸€ç§æ˜¯<strong>æ”¹é…ç½®æ–¹å¼</strong>ã€‚</p>
<h4 data-id="heading-9">è§£å†³æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œæ–¹å¼</h4>
<p>å›åˆ° GitHub Codespaces çš„ç»ˆç«¯ï¼Œå¦å¤–å¼€å¯ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯·æ±‚åˆ—è¡¨ï¼š</p>
<pre><code class="hljs">openclaw devices list
</code></pre>
<p>å¤§å®¶ä¼šçœ‹åˆ°ä¸€ä¸ª <strong>Pending (1)</strong> çš„è¯·æ±‚ï¼Œè®°ä¸‹ç¬¬ä¸€ä¸²é•¿é•¿çš„ Request IDã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3001ccdbe542ff97205f5e6da50a33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=SBCeoLdExl5%2FBH3AP82ZOSdaImc%3D" alt="" loading="lazy"/>
è¾“å…¥æ‰¹å‡†å‘½ä»¤ï¼ˆæŠŠä¸‹é¢çš„ ID æ¢æˆä½ æŸ¥åˆ°çš„ï¼‰ï¼š</p>
<pre><code class="hljs">openclaw devices approve 0a22644c-205d-4912-a127-cbd71a4c74b8
</code></pre>
<h4 data-id="heading-10">è§£å†³æ–¹å¼äºŒï¼šæ”¹é…ç½®</h4>
<p>ä¾æ—§åœ¨ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢è¿™ä¸ªå‘½ä»¤ç”¨Vimæˆ–codeæ‰“å¼€ç”¨äºéªŒè¯çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">vim ~<span class="hljs-regexp">/.openclaw/</span>devices/pending.<span class="hljs-property">json</span>
</code></pre>
<p>æ‰¾åˆ° "silent": false è¿™ä¸€è¡Œï¼Œ**å°†å…¶falseä¿®æ”¹ä¸ºtrueï¼Œ**ä¿å­˜ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3d7222a39924fd7a37e4f6cff41e137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=hv72muY61n7swTo2Yr%2BsmycfNg8%3D" alt="" loading="lazy"/>
æœ€åå›åˆ° OpenClaw Web æ§åˆ¶å°é¡µé¢ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸äº†ï¼ˆå®ƒä¼šè‡ªåŠ¨åˆ·æ–°çŠ¶æ€ï¼‰ï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰çº¢è‰²çš„ç›‘æ§çŠ¶æ€äº†ï¼Œè€Œä¸”è¿˜æœ‰ä¹‹å‰é€šè¿‡ Discord å¯¹è¯çš„è®°å½•ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ­£å¼çš„å¼€å§‹ä½¿ç”¨äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/697f2713836e45e790d4fe02c1d32b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=dh%2BRIdZNREIk7tqwBV4dtwZz3go%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">å®Œå…¨ä½“ OpenClaw ä»»åŠ¡æ¼”ç¤º</h3>
<p>ä¸€åˆ‡å°±ç»ªï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Discordï¼ˆè¿™ä¸ªä¸å…‰åªæœ‰ç½‘é¡µå’Œç”µè„‘å®¢æˆ·ç«¯ï¼Œä¹Ÿæ˜¯æœ‰æ‰‹æœºç«¯APPçš„ï¼‰ æ¥å®Œæˆ 7x24 å°æ—¶çš„éšæ—¶ä¸‹å‘å†™é‚®ä»¶ã€æ¢³ç†å·¥ä½œæ—¥æŠ¥ã€è‡ªåŠ¨å¼€å‘è„šæœ¬ç­‰ä»»åŠ¡ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è¿›è¡Œå®šæ—¶ä»»åŠ¡ã€‚</p>
<blockquote>
<p>æ¯”å¦‚ï¼šæœ€è¿‘æœ‰å“ªäº› GitHub å¼€æºé¡¹ç›®å¾ˆç«ï¼Ÿæ•´ç†ä¸€ä¸ªæœ¬å‘¨æœ€ç«çš„å¼€æºé¡¹ç›®æ¸…å•ç»™æˆ‘ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6df94220adc437886315924e318fe9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=2ZsDG8AwqPYOpPx452Uf7Qvkqjs%3D" alt="" loading="lazy"/>
ç­‰å¾…äº†ä¸€ä¼šï¼Œå®ƒå°±è¾“å‡ºç»™æˆ‘äº†æ¯”è¾ƒè¯¦ç»†çš„ç»“æœï¼ŒåŒ…æ‹¬é¡¹ç›®ç±»å‹ã€åç§°ã€Staræ•°ã€å¼€å‘è¯­è¨€ã€ç®€ä»‹ç­‰ç­‰ã€‚ä¸è¿‡ Discord å¯¹è¯ä¸­å¯¹äº Markdown æ ¼å¼è¿˜æ˜¯ä¸å‹å¥½ï¼Œæˆ‘ä»¬åˆ°æ§åˆ¶å°çœ‹çœ‹ï¼Œæ•ˆæœéå¸¸ä¸é”™ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42323ae7029b4d92a36ddf068f803b17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=7LA4q4wpQRqQ0L6QIiG8Kfc3FEE%3D" alt="" loading="lazy"/>
æ—¢ç„¶åœ¨ GitHub ä¸Šï¼Œæˆ‘ä»¬è®©å®ƒå¸®æˆ‘ä»¬**ã€Œå¼€å‘ä»£ç &amp;è‡ªåŠ¨éƒ¨ç½²ã€**å°±åœ¨åˆé€‚ä¸è¿‡äº†ã€‚</p>
</blockquote>
<blockquote>
<p>æ¯”å¦‚ï¼šç”¨Three.jså¸®æˆ‘å¼€å‘ä¸€ä¸ªå®æ—¶æ´»åŠ¨åœ°çƒæ•ˆæœçš„ç«™ç‚¹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4f82e7669540bcbdeb7b2a1bcf4ce1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=Vc%2Fpx8fF9wCjwwyI96qANMJaUYI%3D" alt="" loading="lazy"/>
ä½†å®ƒè®©æˆ‘åœ¨æœ¬åœ°éƒ¨ç½²å¹¶å¯åŠ¨æœåŠ¡ï¼Œé‚£å½“ç„¶ä¸å¯èƒ½å•¦ã€‚ç»§ç»­è®©å®ƒç»™æˆ‘éƒ¨ç½²åˆ° GitHub Pages ä¸Šã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d27ba405c5df47e4a82f4ffcbb5e6a9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=H%2FNXIcdAX%2BSe6gO5S14htKmGbeI%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f02d4115f884a3f8e443e7a5b96bc80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=IfIbBs%2FH%2F0YJw2qUxnOcbrdG1oE%3D" alt="" loading="lazy"/>
å½“ç„¶å®ƒä¸æ­¢ç»™æˆ‘æ¨èäº† GitHub Pages è¿™ä¸€ç§æ–¹å¼ï¼Œè¿˜æœ‰Netlifyã€Vercelè¿™äº›ä¸»æµçš„éƒ¨ç½²å¹³å°ã€‚ç”±äº GitHub Pages è‡ªåŠ¨éƒ¨ç½²éœ€è¦ç»™å®ƒä¸€å®šçš„æƒé™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªä½æƒé™ä½æ—¶é™çš„Tokenç„¶åå‘ç»™ OpenClaw å¸®æˆ‘ä»¬è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/265132bb6d4c42b48dc8ccd21531a4e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=B6M3apEPnbQCN3Ea70B7rDv6vw0%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b7d10af68644f0988a26d36094a078d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=LoZjYRs6X9SjhC4IZ3T5e9qtsVY%3D" alt="" loading="lazy"/>
å®æ—¶æ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74a11f3e28ab436389f5652498ecffd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=2d4kJ7MPQ6wwMmGfvRuyJw0sCts%3D" alt="" loading="lazy"/>
æ•ˆæœè¿˜æ˜¯éå¸¸ä¸é”™çš„ï¼Œå¾ˆé…·å¾ˆç¾è§‚ã€‚ç„¶åæˆ‘ä»¬å›åˆ°è¿™ä¸ªè‡ªåŠ¨åˆ›å»ºçš„ä»“åº“ä»£ç é¡µé¢ï¼Œé‡Œé¢ä¹Ÿæœ‰æœ€æ–°çš„éƒ¨ç½²ï¼ˆDeploymentï¼‰çŠ¶æ€æ˜¾ç¤ºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/033d9f1e07b346848bc259d296a18c59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=z8KTNj4ySsrTBdIexMtH5QL3qSA%3D" alt="" loading="lazy"/>
ä¸è¿‡å¥½åƒè¿™ä¸ªé¡¹ç›®å·®ç‚¹ä»€ä¹ˆä¸œè¥¿ï¼Œå°±æ˜¯æ˜ å…¥çœ¼å¸˜çš„Readme.mdæ–‡æ¡£ã€‚æˆ‘ä»¬ç»§ç»­è®© OpenClaw å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆå¹¶æ¨é€åˆ°ä»“åº“ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74e1815cf4d943b48153790da67d02b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=L4VQuuEzXyQLhF97gGsY7%2BxMYmY%3D" alt="" loading="lazy"/>
æ–‡æ¡£æ¨é€åé¡µé¢ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7bf34efab60440ba82a82ea91926e6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=uMw01txLuLCRVfeIpAqDzVFncxs%3D" alt="" loading="lazy"/>
å…¶ä¸­ï¼Œæ–‡æ¡£ä¸­å›¾ç‰‡æœ¬æ¥æ˜¾ç¤ºå¼‚å¸¸ï¼Œè®© OpenClaw å¸®æˆ‘å¤„ç†äº†ä¸‹ï¼Œè¿˜ç›´æ¥ä¼˜åŒ–æˆåŠ¨æ€å›¾äº†ï¼Œç»™åŠ›ï¼
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19b19e0f8f9c4cfb9e01bcd587bde7c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=oiV%2BzWqZbeTDcWp47%2B3lbHR6LWA%3D" alt="" loading="lazy"/>
åˆ°è¿™é‡Œï¼Œå¤§å®¶å°±çœŸæ­£å®Œå…¨æŒæ¡äº†ä¸€ä¸ª0 æˆæœ¬çš„ OpenClawï¼ˆClawdbotï¼‰è¿è¡Œç¯å¢ƒï¼Œå¤ªçˆ½äº†ã€‚è¿™åº”è¯¥å°±æ˜¯ç›®å‰è¶…ç»æ€§ä»·æ¯”çš„ Clawdbot ç©æ³•äº†ã€‚</p>
</blockquote>
<blockquote>
<p><strong>Tips</strong>ï¼šGitHub Codespaces æ˜¯äº‘ç«¯å¼€å‘ç¯å¢ƒï¼Œé•¿æ—¶é—´ä¸æ“ä½œä¼šè‡ªåŠ¨ä¼‘çœ ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œä½ å¦‚æœé•¿æ—¶é—´ä¸ç”¨äº†ï¼Œå¯ä»¥åœ¨ CodeSpaces é¡µé¢å°†å½“å‰æœåŠ¡å™¨ç»™å…³æœºäº†ä¹Ÿè¡Œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18631cee120f40eda6c7ca1ec2f022f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=ndklBNtYsbpNtEDYB%2FPOIInIF0M%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">å†™åœ¨æœ€å</h3>
<p>è¿™æ¬¡çš„æ¨¡å‹é€‰ç”¨Kimi K2.5ï¼Œèƒ½åŠ›æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚è€Œä¸”é€šè¿‡å®é™…çš„ä¸€äº›ä»»åŠ¡è·‘ä¸‹æ¥ï¼Œç¡®å®éå¸¸çš„ä¸é”™ã€‚å®é™…æµ‹è¯•ä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†ä» Kimi ä½¿ç”¨é¢åº¦ä¸Šçœ‹æ„Ÿè§‰ 7 å¤©éƒ½ç”¨ä¸å®Œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3e96b8d9bdd446b9123ecdd572fb788~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602179&amp;x-signature=YSw0%2Bh6L29eXZPL%2BIcfztPxTf24%3D" alt="" loading="lazy"/>
Openclaw æ˜¯ AI Agent èµ°å‘å¹³æ°‘åŒ–ã€å®ç”¨åŒ–çš„ä¸€ä¸ªç°å®äº§ç‰©ã€‚é€šè¿‡å®ƒä½ å¯ä»¥å®Œå…¨æ‹¥æœ‰ã€å®Œå…¨æŒæ§ã€ç”šè‡³å¯è‡ªä¸»é­”æ”¹çš„AI ç®¡å®¶ã€‚</p>
<p>æœªæ¥çš„ AI å½¢æ€ï¼Œä¸€å®šæ˜¯ Agentï¼ˆæ™ºèƒ½ä½“ï¼‰çš„å¤©ä¸‹ã€‚å®ƒä»¬å¿…é¡»èƒ½æ„ŸçŸ¥ç¯å¢ƒã€èƒ½ä½¿ç”¨å·¥å…·ã€èƒ½è‡ªåŠ¨è§„åˆ’å¤šæ­¥ä»»åŠ¡ã€‚</p>
<blockquote>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></p>
<p>æ¡ˆä¾‹threejsé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffanan-uyun%2Fearth-activity" target="_blank" title="https://github.com/fanan-uyun/earth-activity" ref="nofollow noopener noreferrer">github.com/fanan-uyun/â€¦</a></p>
<p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Flqshow%2Fstatus%2F2017099124156297271%3Fs%3D20" target="_blank" title="https://x.com/lqshow/status/2017099124156297271?s=20" ref="nofollow noopener noreferrer">x.com/lqshow/statâ€¦</a></p>
</blockquote></code></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠ±äº†ä¸¤å¹´ç”¨éäº† React æ‰€æœ‰çŠ¶æ€ç®¡ç†åº“ï¼Œæˆ‘é€‰å‡ºäº†æœ€ç°ä»£åŒ–çš„ Signal æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7601384029611655183</link>    <guid>https://juejin.cn/post/7601384029611655183</guid>    <pubDate>2026-02-02T01:58:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601384029611655183" data-draft-id="7601175299011641359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠ±äº†ä¸¤å¹´ç”¨éäº† React æ‰€æœ‰çŠ¶æ€ç®¡ç†åº“ï¼Œæˆ‘é€‰å‡ºäº†æœ€ç°ä»£åŒ–çš„ Signal æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,Redux"/> <meta itemprop="datePublished" content="2026-02-02T01:58:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯…æ—¶ç "/> <meta itemprop="url" content="https://juejin.cn/user/3936714046056088"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠ±äº†ä¸¤å¹´ç”¨éäº† React æ‰€æœ‰çŠ¶æ€ç®¡ç†åº“ï¼Œæˆ‘é€‰å‡ºäº†æœ€ç°ä»£åŒ–çš„ Signal æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3936714046056088/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯…æ—¶ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:58:25.000Z" title="Mon Feb 02 2026 01:58:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">èŠ±äº†ä¸¤å¹´ç”¨éäº† React æ‰€æœ‰çŠ¶æ€ç®¡ç†åº“ï¼Œæˆ‘é€‰å‡ºäº†æœ€ç°ä»£åŒ–çš„ Signal æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">æˆ‘çŸ¥é“ã€ŒReact å­å­ã€å¾ˆå¤šï¼Œå…ˆåˆ«æ€¥ç€éª‚ï¼Œçœ‹å®Œå†è¯´</h3>
<p>å½“ä½ è¿˜åœ¨ <code>useState</code> çš„é—­åŒ…é™·é˜±é‡Œè·Ÿ React æ–—æ™ºæ–—å‹‡ï¼Œåœ¨ <code>useEffect</code> ä¾èµ–æ•°ç»„é‡Œå½“äººè‚‰ç¼–è¯‘å™¨ï¼Œåœ¨ Zustand çš„ selector é‡Œå†™åˆ°æ€€ç–‘äººç”Ÿ â€”â€” å“¥ä»¬ï¼Œè¯¥æ¢ä¸ªæ´»æ³•äº†ã€‚</p>
<p><strong>Signal</strong>ï¼Œæ¥è‡ª Preactï¼Œæœ¬è´¨å°±æ˜¯ Vue é‚£å¥—å“åº”å¼çš„ React ç‰ˆï¼šå¯¹è±¡å¼•ç”¨è¯»å†™ï¼Œä¾èµ–è‡ªåŠ¨è¿½è¸ªï¼Œä¸ç”¨ä½ æ‰‹åŠ¨å–‚ã€‚æ¥å…¥ <code>@preact/signals-react</code> ä¹‹åä½ å°±ä¼šå‘ç°ï¼ŒåŸæ¥ã€Œç°ä»£åŒ–ã€ä¸‰ä¸ªå­—å¯ä»¥è¿™ä¹ˆå†™ï¼Œè€Œä¸æ˜¯é  React é‚£å¥—ã€Œè®¾è®¡å“²å­¦ã€è‡ªå—¨ã€‚</p>
<hr/>
<p>æˆ‘çŸ¥é“ã€ŒReact å­å­ã€å¾ˆå¤šï¼Œæ¯æ¬¡è®¨è®ºæ—¶ä»–ä»¬æ€»æ¬å‡ºä¸¤å¥—è¯ï¼š</p>
<ol>
<li>
<p><strong>ã€ŒReact æ‰‹åŠ¨æŒ¡ã€Vue è‡ªåŠ¨æŒ¡ï¼Œè€å¸æœºéƒ½æ˜¯æ‰‹åŠ¨æŒ¡ã€‚ã€</strong><br/>
çº¯çº¯çš„é€»è¾‘è°¬è¯¯ã€‚å¼€è½¦çš„æ‰‹åŠ¨/è‡ªåŠ¨å’Œå†™ä»£ç çš„ã€Œè¦ä¸è¦äº²æ‰‹ç®¡ä¾èµ–ã€æ ¹æœ¬ä¸æ˜¯åŒä¸€å›äº‹ï¼›æŠŠã€Œæ§åˆ¶æ¬²ã€åŒ…è£…æˆã€Œä¸“ä¸šã€æ˜¯å·æ¢æ¦‚å¿µã€‚è¿™æ¯”å–»çš„è’è°¬ç¨‹åº¦ï¼Œä¸äºšäºç­ä¸»ä»»é‚£å¥ã€Œä¸€ä¸ªäººæµªè´¹ä¸€åˆ†é’Ÿï¼Œå…¨ç­å››åä¸ªäººå°±æµªè´¹å››ååˆ†é’Ÿã€ â€”â€” æ—¶é—´ä¸èƒ½é‚£æ ·çº¿æ€§å ç»™å…¨ç­ï¼Œæ¡†æ¶ä¼˜åŠ£ä¹Ÿä¸èƒ½ç”¨ã€Œæ‰‹åŠ¨/è‡ªåŠ¨ã€ä¸€ä¸ªè½´åˆ¤æ­»åˆ‘ã€‚</p>
</li>
<li>
<p><strong>ã€Œæ—¢ç„¶ä½ è¿™ä¹ˆè®¨åŒ Reactï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨ï¼Ÿã€</strong><br/>
å› ä¸ºå‡ºç°çš„æ—©ã€ç”Ÿæ€ç¹è£ï¼Œæ‰€ä»¥ä½ å¿…ç„¶è¦æ¥è§¦åˆ°ã€‚ä»»ä½•ç¬¬ä¸‰æ–¹å‰ç«¯åº“ï¼Œç¬¬ä¸€ä¸ªå…¼å®¹ç›®æ ‡éƒ½æ˜¯ Reactï¼›
<strong>AI First</strong> æ—¶ä»£æ›´ç‹ </p>
</li>
</ol>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flovable.dev" target="_blank" title="https://lovable.dev" ref="nofollow noopener noreferrer">Lovable</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv0.dev" target="_blank" title="https://v0.dev" ref="nofollow noopener noreferrer">V0.dev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbolt.new" target="_blank" title="https://bolt.new" ref="nofollow noopener noreferrer">Bolt.new</a></li>
</ul>
<p>è¿™äº› AI å·¥å…·ä¸€æ‰“å¼€ï¼Œå…¨æ˜¯ Reactã€‚ç”¨ React ä¸ç­‰äºè®¤åŒå®ƒæ¯ä¸€å¤„è®¾è®¡ â€”â€” å†å²åŒ…è¢±å’Œç½‘ç»œæ•ˆåº”æ‘†åœ¨é‚£å„¿ï¼Œæ¢æ¡†æ¶æˆæœ¬æé«˜ï¼Œè€Œ AI ç”Ÿæˆä»£ç å‡ ä¹å…¨æ˜¯ Reactï¼Œæ­£åé¦ˆå¾ªç¯åªä¼šè¶Šæ»šè¶Šå¤§ã€‚æ‰€ä»¥ã€Œè®¨åŒã€å’Œã€Œåœ¨ç”¨ã€å¯ä»¥åŒæ—¶æˆç«‹ï¼Œä¸çŸ›ç›¾ã€‚</p>
<hr/>
<p>ä¸å¯å¦è®¤çš„æ˜¯ï¼Œ<strong>JSX æ˜¯åˆ’æ—¶ä»£çš„</strong>ã€‚</p>
<p>React çœŸæ­£è´¡çŒ®çš„æ˜¯ï¼šç»„ä»¶åŒ–ã€å£°æ˜å¼ UIã€å•å‘æ•°æ®æµæˆäº†è¡Œä¸šå…±è¯†ï¼Œåé¢ Vueã€Svelte çš„æ¨¡æ¿æˆ–è¯­æ³•ç³–ï¼Œéƒ½æ˜¯åœ¨ã€ŒReact ç¡®ç«‹çš„èŒƒå¼ã€ä¸Šåšæ”¹è¿›ã€‚</p>
<p>æˆ‘å†™è¿™ç¯‡ä¸æ˜¯ä¸ºäº†å½“ä¼ æ•™å£«ï¼Œä¹Ÿä¸æƒ³ä¸€å‘³éª‚è¡— â€”â€” æˆ‘åªæƒ³å®‰å®‰é™é™åˆ†äº«è‡ªå·±çš„å¿ƒå¾—ï¼Œè®²è¿°å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Œé¡ºä¾¿å¸®åˆ°è¢«é—­åŒ…å’Œä¾èµ–æ•°ç»„æŠ˜ç£¨çš„äººã€‚</p>
<p>æ‰¹è¯„ <code>useState</code> çš„é—­åŒ…å’Œ <code>useEffect</code> çš„ä¾èµ–æ•°ç»„ï¼Œä¸ç­‰äºå¦å®šæ•´ä¸ª Reactï¼›è€Œæ˜¯è¯´<strong>è¿™ä¸€å—</strong>è®¾è®¡å¾—åäººç±»ï¼Œå€¼å¾—ç”¨ Signal ä¹‹ç±»çš„æ–¹å¼è¡¥ä¸Šã€‚</p>
<hr/>
<p>è€Œä¸”å…³äº Reactã€Vue æˆ‘æ˜¯æœ‰å‘è¨€æƒçš„ï¼Œä¸¤è¾¹æºç éƒ½ç¿»è¿‡ä¸€äº›ï¼Œ<strong>React çš„å¾ˆå¤šå‘æˆ‘éƒ½è‡ªå·±å¡«è¿‡</strong>ï¼š</p>
<ul>
<li>è·¯ç”±æ²¡æœ‰ Keep-Aliveï¼Œå°±è‡ªå·±å†™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-router" target="_blank" title="https://github.com/beixiyo/react-router" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></li>
<li><code>useState</code> é—­åŒ…æ‹¿ä¸åˆ°æœ€æ–°å€¼ï¼Œå°±å°è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fhooks%2Fsrc%2Fstate%2FuseGetState.ts" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/hooks/src/state/useGetState.ts" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></li>
<li>React 19.2 ä¹‹å‰æ²¡æœ‰å®˜æ–¹ KeepAlive ç¼“å­˜ï¼Œå°±è‡ªå·±å®ç° <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fcomps%2Fsrc%2Fcomponents%2FKeepAlive%2FKeepAlive.tsx" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/comps/src/components/KeepAlive/KeepAlive.tsx" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></li>
</ul>
<p>ä¸æ˜¯æ™’ä»“åº“ï¼Œè€Œæ˜¯è¯´æ˜ï¼šæˆ‘æ—¢åœ¨ React é‡Œå¹²æ´»ï¼Œåˆäº²æ‰‹ç»•è¿‡å®ƒçš„å‘ã€‚æ‰€ä»¥ä¸‹é¢èŠ Signal å’ŒçŠ¶æ€ç®¡ç†ï¼Œæ˜¯<strong>åœ¨ React ç”Ÿæ€é‡Œæ€ä¹ˆæ´»å¾—æ›´åƒäºº</strong>çš„å®æ“ç»“è®ºï¼Œä¸æ˜¯è·Ÿé£æ§æ–°ç©æ„å„¿ï¼Œä¹Ÿä¸æ˜¯é”®ç›˜å…šå˜´ç‚®ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€é—­åŒ…é™·é˜±ï¼šReact çš„ã€Œè®¾è®¡å“²å­¦ã€æœ‰å¤šå¯ç¬‘</h3>
<p><code>useState</code> æœ‰ä¸ªç¥–ä¼ é—®é¢˜ï¼š<code>setState</code> æ˜¯å¼‚æ­¥çš„ï¼Œä½ åˆš set å®Œï¼Œä¸‹ä¸€ç§’æ¢ä¸ªå‡½æ•°è¯»ï¼Œæ‹¿åˆ°çš„è¿˜æ˜¯æ—§å€¼ã€‚é€»è¾‘ä¸€æ‹†åˆ†ï¼Œåé¢çš„å‡½æ•°æ°¸è¿œæ´»åœ¨ã€Œä¸Šä¸€ä¸ªæ¸²æŸ“å‘¨æœŸã€çš„æ¢¦é‡Œã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é—®é¢˜ï¼šfn2 æ‹¿ä¸åˆ°æœ€æ–° count</span>
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn1</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>)
  <span class="hljs-title function_">fn2</span>() <span class="hljs-comment">// count ä»æ˜¯æ—§å€¼ï¼ŒæƒŠä¸æƒŠå–œï¼Ÿ</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn2</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count) <span class="hljs-comment">// 0ï¼Œæ„ä¸æ„å¤–ï¼Ÿ</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleXx</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">fn1</span>()
  <span class="hljs-title function_">fn2</span>() <span class="hljs-comment">// è¿™è¾ˆå­éƒ½æ‹¿ä¸åˆ°æœ€æ–°å€¼</span>
}
</code></pre>
<p>React å®˜æ–¹ä¼šè¯´ï¼šè¿™æ˜¯ã€Œè°ƒåº¦ã€ã€Œå¯é¢„æµ‹æ€§ã€ã€Œé¿å…åŠæˆå“ UIã€ â€”â€” ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼š<strong>æˆ‘è®©ä½ æ‹¿ä¸åˆ°ä½ å°±æ˜¯æ‹¿ä¸åˆ°ï¼Œä½ å¾—æŒ‰æˆ‘çš„è§„çŸ©æ¥</strong>ã€‚ä¸€æ—¦é€»è¾‘æ‹†åˆ†ã€è·¨æ¨¡å—å¤ç”¨ï¼Œä½ å°±å¾—è·Ÿé—­åŒ…æ–—æ™ºæ–—å‹‡ï¼Œå†™ä¸€å † <code>useCallback</code>ã€<code>useRef</code> æ¥æ“¦å±è‚¡ã€‚è¿™å«è®¾è®¡å“²å­¦ï¼Ÿè¿™å«ç”©é”…ç»™å¼€å‘è€…ã€‚</p>
<p>Signal ä¸è·Ÿä½ ç©è¿™å¥—ã€‚çŠ¶æ€æ”¾åœ¨<strong>å¯¹è±¡</strong>é‡Œï¼Œ<code>.value</code> è¯»å°±æ˜¯å½“å‰å€¼ï¼Œå†™å°±æ˜¯ç«‹åˆ»ç”Ÿæ•ˆã€‚æ²¡æœ‰å¿«ç…§ï¼Œæ²¡æœ‰ã€Œä¸‹ä¸€æ¬¡æ¸²æŸ“æ‰æ›´æ–°ã€ï¼Œè¯»åˆ°çš„æ°¸è¿œæ˜¯å®æ—¶çš„ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { signal } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn1</span> = (<span class="hljs-params"/>) =&gt; {
  count.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>
  <span class="hljs-title function_">fn2</span>() <span class="hljs-comment">// æ­¤æ—¶ count.value å·²ç»æ˜¯ 1 äº†</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn2</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>) <span class="hljs-comment">// 1ï¼Œç»ˆäºåƒä¸ªæ­£å¸¸äººè¯¥æœ‰çš„è¡Œä¸º</span>
}
</code></pre>
<p>æš‚æ—¶è¿˜å¾—ç”¨ <code>useState</code>ï¼Ÿè¡Œï¼Œç”¨ <code>useGetState</code> æ•‘ä¸ªæ€¥ï¼Œ<code>setCount.getLatest()</code> ç›´æ¥æ‹¿æœ€æ–°å€¼ï¼Œä¸ç”¨å†ä¼ ä»€ä¹ˆå›è°ƒäº†ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// æ•‘æ€¥æ–¹æ¡ˆï¼šuseGetState</span>
<span class="hljs-keyword">import</span> { useGetState } <span class="hljs-keyword">from</span> <span class="hljs-string">'hooks'</span>

<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useGetState</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn2</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setCount.<span class="hljs-title function_">getLatest</span>()) <span class="hljs-comment">// 1</span>
}
</code></pre>
<p>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fhooks%2Fsrc%2Fstate%2FuseGetState.ts" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/hooks/src/state/useGetState.ts" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<hr/>
<h3 data-id="heading-3">äºŒã€useEffect ä¾èµ–æ•°ç»„ï¼šäººè‚‰ç¼–è¯‘å™¨ï¼Œä½ å½“å®šäº†</h3>
<p><code>useEffect</code> çš„ä¾èµ–æ•°ç»„ï¼Œå ªç§° React å¼€å‘è€…çš„å™©æ¢¦ï¼šæ¼å†™ä¸€ä¸ªï¼Œé—­åŒ…æ‹¿æ—§å€¼ï¼›</p>
<p>å¤šå†™ä¸€ä¸ªï¼Œ<strong>effect è·‘æˆé™€èº</strong>ã€‚å¤æ‚å¯¹è±¡è¿˜å¾—è‡ªå·± <code>useMemo</code> åŒ…ä¸€å±‚ï¼Œä¸ç„¶æ¯æ¬¡éƒ½æ˜¯ã€Œæ–°å¼•ç”¨ã€ï¼Œä¾èµ–æ•°ç»„å½¢åŒè™šè®¾ã€‚</p>
<p>Signal çš„ <code>effect</code> å’Œ <code>useSignalEffect</code> ç›´æ¥<strong>è‡ªåŠ¨è¿½è¸ª</strong>ä½ åœ¨å›è°ƒé‡Œè¯»äº†å“ªäº› signalï¼Œå˜äº†æ‰è·‘ã€‚è·Ÿ Vue çš„ <code>watchEffect</code> ä¸€æ ·ï¼Œè¯¥æœ‰çš„æ™ºå•†å®ƒéƒ½æœ‰ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { effect, signal } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">'Jane'</span>)

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>, name.<span class="hljs-property">value</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'cleanup'</span>)
})
</code></pre>
<p>ä¸ç”¨å†™ä¾èµ–æ•°ç»„ï¼Œä¸ç”¨çº ç»“ã€Œè¿™ä¸ªåˆ°åº•è¯¥ä¸è¯¥å¡è¿› depsã€ï¼Œä¸ç”¨å½“äººè‚‰ä¾èµ–åˆ†æå™¨ã€‚çœä¸‹æ¥çš„è„‘å­ï¼Œå¹²ç‚¹åˆ«çš„ä¸å¥½å—ï¼Ÿ</p>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€Signal API ç®€æ´ï¼Œæ²¡æœ‰åºŸè¯</h3>
<p>Signal çš„ API å°±å››ä¸ªï¼š</p>
<ul>
<li><code>signal(initial)</code>ï¼šå»ºçŠ¶æ€</li>
<li><code>computed(fn)</code>ï¼šæ´¾ç”Ÿ</li>
<li><code>effect(fn)</code>ï¼šå‰¯ä½œç”¨</li>
<li><code>batch(fn)</code>ï¼šæ‰¹é‡å†™ï¼Œeffect åªè·‘ä¸€æ¬¡</li>
</ul>
<p>æ²¡æœ‰ Actionã€Reducerã€Sliceï¼Œæ²¡æœ‰ Store é…ç½®ï¼Œæ²¡æœ‰ä¸­é—´ä»¶é“¾ã€‚æƒ³ç”¨å°±å†™ï¼Œå†™å®Œå°±ç®—ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸‹é¢é‚£äº›ã€Œå½“çº¢ã€åº“ï¼Œä¸ªä¸ªéƒ½æ˜¯æ¨¡æ¿ä»£ç ç”Ÿäº§å™¨ã€‚</p>
<h4 data-id="heading-5">1. æ¸²æŸ“ä¼˜åŒ–ï¼šç›´æ¥ä¼  signal åˆ° JSXï¼Œè·³è¿‡ç»„ä»¶é‡æ¸²æŸ“</h4>
<p>è¿™æ˜¯ Signal æœ€é¦™çš„ç”¨æ³•ä¹‹ä¸€ã€‚<code>count.value</code> ä¼šå»ºç«‹è®¢é˜…ï¼Œsignal ä¸€å˜ç»„ä»¶å°±é‡æ¸²æŸ“ï¼›ä½†<strong>ç›´æ¥æŠŠ signal ä¸¢è¿› JSX</strong>ï¼ŒPreact ä¼šç»‘å®šåˆ° DOM æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ›´æ–°æ—¶åªæ”¹ DOMï¼Œä¸è§¦å‘ç»„ä»¶é‡æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> countOptimized = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)

<span class="hljs-comment">// âŒ æœªä¼˜åŒ–ï¼šè¯» .value ä¼šè®¢é˜…ï¼Œæ¯æ¬¡å˜åŒ–éƒ½é‡æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UnoptimizedDisplay</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">useSignals</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{ countOptimized.value }<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span></span>  <span class="hljs-comment">// å˜è‰² = é‡æ¸²æŸ“</span>
})

<span class="hljs-comment">// âœ… ä¼˜åŒ–ï¼šç›´æ¥ä¼  signalï¼Œè·³è¿‡ VDOMï¼Œåªæ›´æ–° DOM æ–‡æœ¬</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">OptimizedDisplay</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">useSignals</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;&gt;</span>{ countOptimized }<span class="hljs-tag">&lt;/&gt;</span></span>&lt;<span class="hljs-regexp">/strong&gt;  /</span><span class="hljs-regexp">/ ä¸å˜è‰² = æ— é‡æ¸²æŸ“
  )
})
</span></code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1840e273a562439caaccb17b824ac546~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-F5pe256CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602669&amp;x-signature=4tnZ5C5h%2BQwnTxKApSLzsZi8gaM%3D" alt="PixPin_2026-02-02_10-03-36.webp" loading="lazy"/></p>
<p>ç‚¹å‡» +1 æ—¶ï¼Œæœªä¼˜åŒ–ä¾§èƒŒæ™¯è‰²ä¼šå˜ï¼ˆé‡æ¸²æŸ“ï¼‰ï¼Œä¼˜åŒ–ä¾§å¯èƒ½ä¸å˜è‰²ï¼ˆç›´æ¥æ”¹ DOMï¼‰ã€‚æºç è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fapp%2Fsrc%2Fviews%2Fsignals%2Fcomponents%2FRenderingOptimization.tsx" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/app/src/views/signals/components/RenderingOptimization.tsx" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<h4 data-id="heading-6">2. computedï¼šæ´¾ç”ŸçŠ¶æ€ï¼Œè‡ªåŠ¨ç¼“å­˜</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { signal, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> doubled = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)

<span class="hljs-comment">// doubled.value éš count å˜ï¼Œä¾èµ–è‡ªåŠ¨è¿½è¸ªï¼Œä¸ç”¨å†™ useMemo ä¾èµ–æ•°ç»„</span>
</code></pre>
<h4 data-id="heading-7">3. signals åŸç”Ÿ <code>effect</code>ï¼ˆæ¨èã€æœ€çœè„‘ï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { signal, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doubled = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)

<span class="hljs-comment">// âœ… è‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼Œä¸å†™ä¾èµ–æ•°ç»„</span>
<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  doubled.<span class="hljs-property">value</span> = count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>
})
</code></pre>
<p>ç‰¹ç‚¹ä¸€å¥è¯è¯´æ˜ï¼š</p>
<ul>
<li>ä¾èµ–æ˜¯è°ï¼Œè¿è¡Œæ—¶è‡ªåŠ¨è¿½è¸ª</li>
<li>è¯»äº† <code>count.value</code>ï¼Œå°±åªä¾èµ– <code>count</code></li>
<li>é‡æ„å®‰å…¨ï¼Œåˆ ä»£ç =åˆ ä¾èµ–</li>
</ul>
<h4 data-id="heading-8">4. Hook ç‰ˆï¼š<code>useSignalEffect</code>ï¼ˆç»„ä»¶å†…ç”¨ï¼‰</h4>
<p>é€‚åˆ<strong>å¿…é¡»å†™åœ¨ç»„ä»¶é‡Œçš„å‰¯ä½œç”¨</strong>ï¼ˆæ¯”å¦‚ä¾èµ– props / ç”Ÿå‘½å‘¨æœŸï¼‰ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { signal, useSignalEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// âœ… å’Œ effect ä¸€æ ·ï¼šä¸ç”¨ä¾èµ–æ•°ç»„</span>
  <span class="hljs-title function_">useSignalEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count changed:'</span>, count.<span class="hljs-property">value</span>)
  })

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> count.value++}&gt;
      +1
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š</p>
<blockquote>
<p><code>useEffect + è‡ªåŠ¨ä¾èµ–æ”¶é›† + æ—  deps</code></p>
</blockquote>
<h4 data-id="heading-9">5. å¯¹ç…§ï¼šReact <code>useEffect</code> ç­‰ä»·å†™æ³•ï¼ˆåä¾‹ï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count changed:'</span>, count)
}, [count]) <span class="hljs-comment">// âŒ äººè‚‰ç»´æŠ¤ä¾èµ–</span>
</code></pre>
<p>é—®é¢˜ä¸åœ¨â€œèƒ½ä¸èƒ½ç”¨â€ï¼Œè€Œåœ¨ï¼š</p>
<ul>
<li>ä¾èµ–è¦äººæƒ³</li>
<li>é‡æ„å®¹æ˜“æ¼</li>
<li>é€»è¾‘ä¸€å¤æ‚å°±å¼€å§‹ç³Š deps</li>
</ul>
<hr/>
<h4 data-id="heading-10">åœ¨çº¿ä½“éªŒ</h4>
<p>è¿™æ˜¯æˆ‘éƒ¨ç½²çš„ Signal ç¤ºä¾‹ Demoï¼Œé‡Œé¢æ¶µç›–äº†å‡ ä¹æ‰€æœ‰ API ç”¨æ³•ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ï¼Œéœ€è¦å¯ä»¥åœ¨çº¿ä½“éªŒã€‚</p>
<ul>
<li>åœ¨çº¿ä½“éªŒé¡µé¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Freact-tool-70q.pages.dev%2Fsignals" target="_blank" title="https://react-tool-70q.pages.dev/signals" ref="nofollow noopener noreferrer">react-tool-70q.pages.dev/signals</a></li>
<li>æºç  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fapp%2Fsrc%2Fviews%2Fsignals%2Fpage.tsx" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/app/src/views/signals/page.tsx" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></li>
</ul>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/607542abb3114354b8f285072a2fce8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-F5pe256CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602669&amp;x-signature=RfHaBvE3VOJE0ew2U6aVeMTd5NU%3D" alt="image.png" width="70%" loading="lazy"/>
<p>å¦‚æœèƒŒæ™¯è‰²å˜åŒ–ä»£è¡¨é‡æ–°æ¸²æŸ“äº†</p>
<hr/>
<h3 data-id="heading-11">å››ã€å…¶ä»–çŠ¶æ€ç®¡ç†åº“ï¼šä¸€ä¸ªæ¯”ä¸€ä¸ªç¦»è°±</h3>
<h4 data-id="heading-12">1. Zustandï¼šSelector å†™åˆ°æ‰‹é…¸ï¼Œä¸­é—´ä»¶å æˆå±å±±</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpmndrs%2Fzustand" target="_blank" title="https://github.com/pmndrs/zustand" ref="nofollow noopener noreferrer">github.com/pmndrs/zustâ€¦</a></p>
<p>Zustand æœ¬èº«ä¸ç®—å¤æ‚ï¼Œä½†è¦<strong>æŒ‰éœ€è®¢é˜…</strong>é¿å…å¤šä½™æ¸²æŸ“ï¼Ÿå¯¹ä¸èµ·ï¼Œæ¯ä¸ªå­—æ®µè‡ªå·±å†™ selector å»å§ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useCount</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useStore</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useName</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useStore</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">name</span>)
<span class="hljs-comment">// å­—æ®µä¸€å¤šï¼Œselector å†™åˆ°è…±é˜ç‚</span>
</code></pre>
<p>æ›´ç¦»è°±çš„æ˜¯<strong>ä¸­é—´ä»¶</strong>ã€‚persistã€devtoolsã€immer ä¸€å±‚å¥—ä¸€å±‚ï¼Œå¥—å®Œå°±æ˜¯è¿™å¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = create&lt;<span class="hljs-keyword">typeof</span> initState&gt;()(<span class="hljs-title function_">immer</span>(
  <span class="hljs-title function_">devtools</span>(
    <span class="hljs-title function_">persist</span>(
      <span class="hljs-function">() =&gt;</span> initState,
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'counter'</span>,
        <span class="hljs-attr">storage</span>: <span class="hljs-title function_">createJSONStorage</span>(<span class="hljs-function">() =&gt;</span> sessionStorage),
        <span class="hljs-attr">partialize</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
          <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(state).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[key]</span>) =&gt;</span> !key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'user'</span>))
        ),
      }
    ),
    { <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span> }
  )
))
</code></pre>
<p>ä½ è§‰å¾—è¿˜èƒ½çœ‹ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ç‰¹æ„æ ¼å¼åŒ–è¿‡äº†ã€‚çœŸå®é¡¹ç›®é‡Œä¸­é—´ä»¶ä¸€å¤šï¼Œæ‹¬å·å¥—æ‹¬å·ï¼Œç¼©è¿›å¥—ç¼©è¿›ï¼Œå¯è¯»æ€§ç›´æ¥å½’é›¶ã€‚</p>
<p>è¿™ç§å±‚å±‚åµŒå¥—çš„å†™æ³•ï¼Œçº¯çº¯ä¸€å¨ã€‚ä½ èƒ½ç¡®ä¿æ¯ä¸ªåŒäº‹ä»£ç éƒ½åƒæˆ‘ä¸€æ ·å†™å¾—è¿™ä¹ˆã€Œè®²ç©¶ã€ï¼Ÿä¸èƒ½çš„è¯ï¼Œè¿™å°±æ˜¯å®šæ—¶ç‚¸å¼¹ã€‚</p>
<hr/>
<h4 data-id="heading-13">2. Jotaiï¼šåŸå­åŒ–æŒºå¥½ï¼Œä½† useAtom è¦å†™åäº†</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpmndrs%2Fjotai" target="_blank" title="https://github.com/pmndrs/jotai" ref="nofollow noopener noreferrer">github.com/pmndrs/jotaâ€¦</a></p>
<p>Jotai çš„åŸå­åŒ–æ€è·¯æˆ‘è®¤å¯ï¼Œç»†ç²’åº¦è®¢é˜…ã€æŒ‰éœ€æ›´æ–°ï¼Œæ²¡é—®é¢˜ã€‚ä½†åŸç‰ˆç”¨æ³•æœ‰ä¸ªè‡´å‘½é—®é¢˜ï¼š<strong>æ¯ä¸ª atom éƒ½å¾—å•ç‹¬ <code>useAtom</code> / <code>useAtomValue</code></strong>ï¼Œç»„ä»¶é¡¶ä¸Šä¸€æ’ hookï¼Œå­—æ®µä¸€å¤šç›´æ¥çˆ†ç‚¸ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useAtom</span>(countAtom)
<span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useAtom</span>(nameAtom)
<span class="hljs-keyword">const</span> [age, setAge] = <span class="hljs-title function_">useAtom</span>(ageAtom)
<span class="hljs-comment">// å†æ¥åä¸ªå­—æ®µï¼Ÿç»§ç»­å¾€ä¸Šå å‘—</span>
</code></pre>
<p>è€Œä¸”ä¸ºäº†æ€§èƒ½ä½ å¾—ä¿è¯åŸå­æ€§ï¼ŒåŸºç¡€å±æ€§éƒ½å¾—æ‹†æˆç‹¬ç«‹ atomï¼Œæ¯ä¸ªç»„ä»¶æ¯ä¸ªå±æ€§éƒ½å¾—æ¥ä¸€é <code>useAtom</code>ï¼Œç¹çåˆ°ä»¤äººå‘æŒ‡ã€‚</p>
<h5 data-id="heading-14">è§£å†³åŠæ³•</h5>
<p>æˆ‘è‡ªå·±å°è£…äº† jotaiTool <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fapp%2Fsrc%2Fviews%2FjotaiTest%2FjotaiTool%2Findex.ts" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/app/src/views/jotaiTest/jotaiTool/index.ts" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<p>é€šè¿‡ <code>createUseAtoms</code> ä¼ å…¥ atom å¯¹è±¡ï¼Œè‡ªåŠ¨ç”Ÿæˆ <code>useAtoms</code>ã€<code>getAtoms</code>ã€<code>useReset</code>ã€<code>createReset</code> ç­‰ï¼ŒæŒ‰éœ€è®¢é˜…ã€ç±»å‹å®‰å…¨ã€ç»„ä»¶å¤–ä¹Ÿèƒ½è¯»å†™ã€‚ç®—æ˜¯ç»™ Jotai æä¾›äº†ç‚¹è¯­æ³•ç³–ã€‚</p>
<p>å®ç°åŸç†æ˜¯é€šè¿‡ Proxy è¿”å›ï¼Œå¹¶ä¸”ç¡®ä¿ç»†ç²’åº¦è®¢é˜…å’Œç±»å‹å®‰å…¨ï¼Œæ”¯æŒ Reset ç­‰é«˜çº§ç‰¹æ€§ã€‚æ‰€æœ‰åŠŸèƒ½å‡ä»¥æµ‹è¯•</p>
<p>æˆ‘éƒ¨å±åˆ°äº† CloudFlareï¼Œåœ¨çº¿ä½“éªŒåˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Freact-tool-70q.pages.dev%2FjotaiTest" target="_blank" title="https://react-tool-70q.pages.dev/jotaiTest" ref="nofollow noopener noreferrer">react-tool-70q.pages.dev/jotaiTest</a></p>
<p>å¦‚æœèƒŒæ™¯è‰²å˜åŒ–ä»£è¡¨é‡æ–°æ¸²æŸ“äº†</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c0742a1f0e14e44bd7299e45cd000f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-F5pe256CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602669&amp;x-signature=h8l3hxtPziiqTct7dmFhclnUzKU%3D" alt="image.png" width="70%" loading="lazy"/>
<p><strong>ç¤ºä¾‹</strong>ï¼šå®šä¹‰ atom å¯¹è±¡åè°ƒç”¨ <code>createUseAtoms</code>ï¼Œåœ¨ç»„ä»¶é‡Œç”¨ <code>useAtoms()</code> æ‹¿åˆ°ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œç›´æ¥è¯»å±æ€§ã€å†™å±æ€§æˆ–è°ƒ <code>setXxx</code>ï¼Œä¸‹åˆ’çº¿å¼€å¤´çš„ key ä¼šè¢«è‡ªåŠ¨è¿‡æ»¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a4f1e1441c94d57888932fb3ae03c0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-F5pe256CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602669&amp;x-signature=ns5rlNbtt4ftWYzXcbDzW1HZlms%3D" alt="image.png" loading="lazy"/></p>
<p>æ›´å¤šç”¨æ³•ï¼ˆå«æŒ‰éœ€ selectorã€useResetã€createResetï¼‰è§ä»“åº“å†… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-tool%2Fblob%2Fmain%2Fpackages%2Fapp%2Fsrc%2Fviews%2FjotaiTest%2Fpage.tsx" target="_blank" title="https://github.com/beixiyo/react-tool/blob/main/packages/app/src/views/jotaiTest/page.tsx" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<p>å³ä¾¿å¦‚æ­¤ï¼Œä½ è¿˜æ˜¯å¾—ç†è§£ atomã€selectorã€store è¿™ä¸€å †æ¦‚å¿µã€‚Signal å‘¢ï¼Ÿä¸€ä¸ªå¯¹è±¡ï¼Œ<code>.value</code> è¯»å†™ï¼Œå®Œäº‹ã€‚</p>
<hr/>
<h4 data-id="heading-15">3. Recoilï¼šJotai çš„ä½é…ç‰ˆï¼Œè¿˜è¦è‡ªå·±å†™ key</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frecoiljs.org%2Fdocs%2Fintroduction%2Fgetting-started" target="_blank" title="https://recoiljs.org/docs/introduction/getting-started" ref="nofollow noopener noreferrer">recoiljs.org/docs/introdâ€¦</a></p>
<p>å’Œ Jotai æ€è·¯å·®ä¸å¤šï¼Œä½†æ¯ä¸ª atom éƒ½å¾—æ‰‹å†™å”¯ä¸€ keyï¼Œæ—¢å•°å—¦åˆå®¹æ˜“å†²çªã€‚Recoil è¿˜è¦ä½ è‡ªå·±æƒ³å­—ç¬¦ä¸²ã€‚å¤ªè ¢äº†ï¼Œä¸è¯´äº†ã€‚</p>
<hr/>
<h4 data-id="heading-16">4. Valtioï¼šæ›¾ç»çš„æœ€çˆ±ï¼Œä½†æ˜¯æœ‰äº›é—®é¢˜æ— æ³•è§£å†³</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fvaltio.dev%2F" target="_blank" title="https://valtio.dev/" ref="nofollow noopener noreferrer">valtio.dev/</a></p>
<p>Valtio ç”¨èµ·æ¥æ˜¯çœŸçš„çˆ½ï¼Œ<code>proxy</code> ä¸€åŒ…ï¼Œæ”¹å±æ€§è‡ªåŠ¨æ›´æ–°ï¼ŒVue é‚£å‘³ã€‚ä½†æœ‰ä¸¤ä¸ªç¡¬ä¼¤ç›´æ¥åŠé€€ï¼š</p>
<ol>
<li><strong><code>snap</code> è¿”å› readonly</strong>ï¼Œç±»å‹åˆ«æ‰­å¾—è¦æ­»ï¼Œå’Œã€Œæ”¹å®Œç›´æ¥ç”¨ã€çš„ä¹ æƒ¯å®Œå…¨ä¸æ­ï¼Œç±»å‹å®‰å…¨å¤©å¤©è·Ÿä½ æ‰“æ¶ã€‚</li>
<li><strong>input ç»„ä»¶æœ‰ bug</strong>ï¼Œå¿…é¡»å¼€ sync æ¨¡å¼æ‰èƒ½æ­£å¸¸ç”¨ã€‚åº•å±‚å’Œ React çš„æ‰¹é‡æ›´æ–°å…«å­—ä¸åˆï¼Œè¿™éƒ½èƒ½å‡ºé—®é¢˜ï¼Œæˆ‘ä¹Ÿæ˜¯æœäº†ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-17">5. Reduxï¼šæ²‰æµ¸å¼å±å±±ï¼ŒLSP éƒ½æ•‘ä¸äº†</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fredux.js.org%2F" target="_blank" title="https://redux.js.org/" ref="nofollow noopener noreferrer">redux.js.org/</a></p>
<p>Redux çš„ã€Œå•å‘æ•°æ®æµã€ã€Œå¯é¢„æµ‹ã€ã€Œè§„èŒƒåŒ–ã€ â€”â€” ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š<strong>å†™ä¸€å † Actionã€Reducerã€Sliceã€Middlewareï¼Œæ¨¡æ¿ä»£ç å †æˆå±±</strong>ã€‚å®ç°æˆæœ¬é«˜åˆ°ç¦»è°±ï¼Œè¿˜è¡ç”Ÿå‡ºäº† Redux Toolkit è¿™ä¸ªã€Œç®€åŒ–ç‰ˆã€å±å±±ã€‚æ‡‚çš„éƒ½æ‡‚ã€‚</p>
<p>æœ€ç¦»è°±çš„æ˜¯<strong>æ‰¾ä»£ç </strong>ã€‚ä½ æƒ³æ‰¾ã€Œç”¨æˆ·åˆ—è¡¨ã€çš„æ•°æ®å®šä¹‰åœ¨å“ªï¼ŸCtrl+ç‚¹å‡»ã€F12 è·³è½¬ã€LSP æ™ºèƒ½å¯¼èˆª â€”â€” é€šé€šæ²¡ç”¨ã€‚ä½ åªèƒ½çœ‹åˆ°ä¸€å † Actionã€Reducerã€Sliceï¼ŒçœŸæ­£çš„æ•°æ®å®šä¹‰è—å¾—è·Ÿè°æˆ˜ç‰‡ä¸€æ ·ã€‚<strong>å†™è¿™ä¸ªåº“çš„äººæ˜¯ä¸æ˜¯ä¸çŸ¥é“ä»€ä¹ˆå« LSPï¼Ÿ</strong> æ‰¾ä»£ç çº¯é å…¨å±€æœç´¢æ˜¯å§ï¼Ÿä»€ä¹ˆå¹´ä»£äº†ï¼Œå¼€å‘ä½“éªŒè¿˜åœç•™åœ¨æ–‡æœ¬æœç´¢æ—¶ä»£ï¼ŒçœŸæ˜¯æ²¡æ•‘äº†ã€‚</p>
<hr/>
<h3 data-id="heading-18">äº”ã€Reactï¼š2026 å¹´äº†ï¼Œè¿˜ç¼ºè¿™ç¼ºé‚£</h3>
<p>React 19.2 ç»ˆäºä¸Šäº† Keep-Aliveï¼Œè¿™ä¹ˆå¤šå¹´æ¥éš¾å¾—å¹²äº†ä»¶äººäº‹ã€‚ä½†é—®é¢˜æ˜¯ï¼š<strong>2025 å¹´æ‰ä¸Š</strong>ã€‚è¿™ä¹ˆåŸºç¡€çš„èƒ½åŠ›ï¼Œç¤¾åŒºè‡ªå·± hack äº†å¤šå°‘å¹´ï¼Ÿç°åœ¨æ‰å®˜æ–¹æ”¯æŒï¼Œæ—©å¹²å˜›å»äº†ã€‚</p>
<p>ç›®å‰ React ç”Ÿæ€è¿˜ç¼ºå•¥ï¼š</p>
<ol>
<li>
<p><strong>å®˜æ–¹å¥½ç”¨çš„çŠ¶æ€ç®¡ç†</strong>ï¼šSignal è¿™ç§ã€Œå¯¹è±¡å¼•ç”¨ + è‡ªåŠ¨ä¾èµ–ã€æ‰æ˜¯ç°ä»£å‰ç«¯çš„è¯¥æœ‰çš„æ ·å­ã€‚<code>useState</code> çš„é—­åŒ…é™·é˜±ã€<code>useEffect</code> çš„ä¾èµ–æ•°ç»„ï¼Œæ—©è¯¥è¢«æ‰«è¿›å†å²åƒåœ¾å †äº†ã€‚åˆ«è®©å¼€å‘è€…å†å†™å±å±±äº†ã€‚</p>
</li>
<li>
<p><strong>å®˜æ–¹ Router</strong>ï¼šç¬¬ä¸‰æ–¹è·¯ç”±å…¨éƒ½æ²¡ Keep-Aliveã€‚å¤æ‚åº”ç”¨åªèƒ½è‡ªå·±é€ è½®å­ï¼Œæ¶å¿ƒåˆ°å®¶äº†ã€‚æ‰€ä»¥æˆ‘åªèƒ½è‡ªå·±å†™ä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-router" target="_blank" title="https://github.com/beixiyo/react-router" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<p><strong>å†…ç½®é¡µé¢ç¼“å­˜ï¼ˆKeep-Aliveï¼‰</strong>ï¼ŒLRU ç­–ç•¥ + <code>include</code>/<code>exclude</code> ç™½åå•ï¼Œå†ä¹Ÿä¸ç”¨åˆ‡ä¸ª Tab å›æ¥è¡¨å•å…¨ä¸¢ã€‚é¡ºå¸¦è¿˜æœ‰å…¨å±€å®ˆå« <code>beforeEach</code>/<code>afterEach</code>ã€Vue é£æ ¼ä¸­é—´ä»¶ã€å…¨å±€ <code>navigate</code>/<code>replace</code>/<code>back</code>ï¼ŒAPI ç®€æ´æ— åºŸè¯ã€‚</p>
</li>
</ol>
<p>ä»£ç ç¤ºä¾‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbeixiyo%2Freact-router%2Fblob%2Fmain%2Fsrc%2Froutes%2Findex.tsx" target="_blank" title="https://github.com/beixiyo/react-router/blob/main/src/routes/index.tsx" ref="nofollow noopener noreferrer">github.com/beixiyo/reaâ€¦</a></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { lazy } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouterProvider</span>, createBrowserRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@jl-org/react-router'</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>({
  <span class="hljs-attr">routes</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/home'</span>)) },
    {
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/dashboard'</span>)),
      <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'Dashboard'</span>, <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span> },
    },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/list'</span>)) },
  ],
  <span class="hljs-attr">options</span>: {
    <span class="hljs-comment">// é¡µé¢ç¼“å­˜ï¼šåªç¼“å­˜æŒ‡å®šè·¯å¾„ï¼Œæœ€å¤š 5 ä¸ªé¡µé¢ï¼ŒLRU æ·˜æ±°</span>
    <span class="hljs-attr">cache</span>: {
      <span class="hljs-attr">limit</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">include</span>: [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/dashboard'</span>, <span class="hljs-string">'/list'</span>],  <span class="hljs-comment">// ç™½åå•ï¼Œä¹Ÿå¯ç”¨ RegExp</span>
    },
    <span class="hljs-attr">beforeEach</span>: <span class="hljs-keyword">async</span> (to, _from, next) =&gt; {
      <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>?.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">getUser</span>()) {
        <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>)
        <span class="hljs-keyword">return</span>
      }
      <span class="hljs-title function_">next</span>()
    },
    <span class="hljs-attr">afterEach</span>: <span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = (<span class="hljs-keyword">typeof</span> to.<span class="hljs-property">meta</span>?.<span class="hljs-property">title</span> === <span class="hljs-string">'string'</span> ? to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> : <span class="hljs-string">'App'</span>)
    },
  },
})
</code></pre>
<ol start="3">
<li><strong>å®˜æ–¹åŠ¨ç”»æ–¹æ¡ˆ</strong>ï¼šè¿˜å¥½æœ‰ Framer Motion å…œåº•ã€‚æ²¡æœ‰ Motionï¼Œæœ‰å‡ ä¸ªäººçŸ¥é“ React å¸è½½åŠ¨ç”»å’‹å†™ï¼Ÿå®˜æ–¹æ–‡æ¡£æœ‰æ•™å—ï¼Ÿæ²¡æœ‰ã€‚å…¨é ç¤¾åŒºè‡ªæ•‘ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-19">å…­ã€Signal ä½¿ç”¨æŒ‡å—ï¼šå®‰è£…ä¸ Babel</h3>
<h4 data-id="heading-20">1. å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm i @preact/signals-react
</code></pre>
<p>è·‘ä¸šåŠ¡ç”¨è¿™å››ä¸ª API å°±å¤Ÿäº†ï¼š<code>signal</code>ã€<code>computed</code>ã€<code>effect</code>ã€<code>batch</code>ã€‚è‹¥æƒ³<strong>å°‘å†™ä¸€å±‚è®¢é˜…ä»£ç </strong>ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œå†è£… Babel æ’ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm i @preact/signals-react-transform -D
</code></pre>
<h4 data-id="heading-21">2. Babel æ’ä»¶ï¼šåšäº†ä»€ä¹ˆã€å’Œ React Compiler å†²çªã€ä¸ç”¨æ—¶æ€ä¹ˆå†™</h4>
<p><strong>Babel åšäº†ä»€ä¹ˆ</strong></p>
<p><code>@preact/signals-react-transform</code> ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæ‰«æç»„ä»¶å†…å¯¹ <code>signal.value</code> çš„ <strong>è¯»å–</strong>ï¼Œè‡ªåŠ¨æ’å…¥ã€Œè®¢é˜…ã€é€»è¾‘ã€‚ç»“æœæ˜¯ï¼šåœ¨ JSX é‡Œå†™ <code>count.value</code> æ—¶ï¼Œ<strong>ä¸ç”¨</strong> åœ¨ç»„ä»¶é‡Œå†è°ƒ <code>useSignals()</code>ï¼Œç»„ä»¶ä¹Ÿä¼šåœ¨ signal å˜åŒ–æ—¶æ­£ç¡®é‡æ¸²æŸ“ã€‚<br/>
æ¢å¥è¯è¯´ï¼ŒBabel å¸®ä½ æŠŠã€Œè°åœ¨ç”¨è¿™ä¸ª signalã€åˆ†æå¥½äº†ï¼Œå¹¶æ³¨å…¥è®¢é˜…ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥å†™ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{count.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>   <span class="hljs-comment">// ä¸ç”¨ useSignals()ï¼Œç…§æ ·å“åº”æ›´æ–°</span>
}
</code></pre>
<p>å®˜æ–¹æ–‡æ¡£æ˜¯è¿™ä¹ˆæè¿°è§„åˆ™çš„ï¼š</p>
<ul>
<li>
<p>å‡½æ•°æ˜¯ç»„ä»¶å—ï¼Ÿ</p>
</li>
<li>
<p>å¦‚æœæ˜¯çš„è¯ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä½¿ç”¨ä¿¡å·å—ï¼Ÿ</p>
</li>
<li>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°åç§°å¤§å†™ï¼ˆä¾‹å¦‚å‡½æ•° MyComponentï¼ˆï¼‰ {}ï¼‰ä¸”åŒ…å« JSXï¼Œåˆ™ç§°è¯¥å‡½æ•°ä¸ºç»„ä»¶ã€‚</p>
</li>
<li>
<p>å¦‚æœå‡½æ•°çš„ä¸»ä½“åŒ…å«ä¸€ä¸ªæˆå‘˜è¡¨è¾¾å¼å¼•ç”¨ .valueï¼ˆå³æŸæŸçš„å€¼ ï¼‰ï¼Œæˆ‘ä»¬å‡è®¾å®ƒæ˜¯ä¿¡å·ã€‚</p>
</li>
</ul>
<p>å¦‚æœä½ çš„å‡½æ•°/ç»„ä»¶ç¬¦åˆè¿™äº›æ¡ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¼šå¯¹å®ƒè¿›è¡Œè½¬æ¢ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šè¢«æ”¾ä»»ä¸ç®¡ã€‚</p>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªå‡½æ•°ä½¿ç”¨ä¿¡å·ä½†ä¸ç¬¦åˆè¿™äº›æ¡ä»¶ï¼ˆä¾‹å¦‚æ‰‹åŠ¨è°ƒç”¨ createElement è€Œä¸æ˜¯ä½¿ç”¨ JSXï¼‰ï¼Œä½ å¯ä»¥æ·»åŠ å¸¦æœ‰å­—ç¬¦ä¸² @useSignals çš„æ³¨é‡Šï¼ŒæŒ‡ç¤ºè¯¥æ’ä»¶è½¬æ¢è¯¥å‡½æ•°ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€‰æ‹©ä¸è½¬æ¢å‡½æ•°ï¼Œæ–¹æ³•æ˜¯æ·»åŠ å¸¦æœ‰å­—ç¬¦ä¸² @noUseSignals çš„æ³¨é‡Šã€‚</p>
<hr/>
<p><strong>å’Œ React Compiler å†²çª</strong></p>
<p>åŒä¸€ä»½æ–‡ä»¶é‡Œï¼Œ<strong>ä¸èƒ½</strong> åŒæ—¶å¯ç”¨ <code>signals-react-transform</code> å’Œ <code>babel-plugin-react-compiler</code>ï¼Œå¦åˆ™å“åº”å¼ä¼šä¹±ï¼ˆè§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpreactjs%2Fsignals%2Fissues%2F652" target="_blank" title="https://github.com/preactjs/signals/issues/652" ref="nofollow noopener noreferrer">preactjs/signals#652</a>ï¼‰ã€‚</p>
<p>è‡³äºè¿™ä¸ª issue æˆ‘æ˜¯æ€ä¹ˆæ‰¾çš„ï¼Œé‚£å½“ç„¶ä¸æ˜¯äººè‚‰æœç´¢ï¼Œè€Œæ˜¯é  <strong>AI + Bash + CLI</strong></p>
<p>æ¯”å¦‚ Github æä¾›äº† <strong>MCP</strong> å’Œ <strong>gh</strong> CLIï¼ˆGithub CLIï¼‰ å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥è®©ä½ æŸ¥æ‰¾ä»£ç å’Œ issue ç­‰ï¼Œä¸‹é¢å†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <strong>gh</strong>ï¼Œè¿™é‡Œå…ˆçœ‹æ•ˆæœ</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/606970db97ef4a66bb15604bf06f75d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-F5pe256CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602669&amp;x-signature=lHCiNy%2FyAhRg3ZlUJS3Lt8mVi84%3D" alt="ai2.png" width="70%" loading="lazy"/>
<p>è§£å†³åšæ³•æ˜¯<strong>æŒ‰è·¯å¾„åˆ†æµ</strong>ï¼šä¾‹å¦‚åªå¯¹ <code>views/signals/</code> ä¸‹çš„æ–‡ä»¶ç”¨ transformï¼Œå…¶å®ƒæ–‡ä»¶åªç”¨ react-compilerï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">react</span>({
      <span class="hljs-attr">babel</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> isSignals = <span class="hljs-regexp">/[\\/]views[\\/]signals[\\/]/</span>.<span class="hljs-title function_">test</span>(id)
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">plugins</span>: isSignals
            ? [[<span class="hljs-string">'module:@preact/signals-react-transform'</span>]]
            : [<span class="hljs-string">'babel-plugin-react-compiler'</span>],
        }
      },
    }),
  ],
})
</code></pre>
<p><strong>ä¸ç”¨ Babel æ—¶ä»£ç æ€ä¹ˆå†™</strong></p>
<p>ä¸è£…ã€æˆ–ä¸ç”¨ <code>signals-react-transform</code> æ—¶ï¼Œåœ¨<strong>æ¶ˆè´¹</strong> signal çš„ç»„ä»¶é‡Œå¿…é¡»æ˜¾å¼è°ƒç”¨ <code>useSignals()</code>ï¼Œå¦åˆ™è¯» <code>count.value</code> ä¸ä¼šå»ºç«‹è®¢é˜…ï¼Œç•Œé¢ä¸ä¼šæ›´æ–°ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useSignals } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react/runtime'</span>
<span class="hljs-keyword">import</span> { signal } <span class="hljs-keyword">from</span> <span class="hljs-string">'@preact/signals-react'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">signal</span>(<span class="hljs-number">0</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useSignals</span>()   <span class="hljs-comment">// å¿…é¡»å†™ï¼šè®©ç»„ä»¶è®¢é˜…ç”¨åˆ°çš„ signal</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Value: {count.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
}
</code></pre>
<p>åŒæ—¶ç”¨ Signals å’Œ React Compiler æ—¶ï¼Œä¹Ÿåªèƒ½ç”¨è¿™ç§ã€Œæ‰‹å†™ <code>useSignals()</code>ã€çš„æ–¹å¼ï¼Œä¸èƒ½åœ¨åŒä¸€æ–‡ä»¶ä¸Šå¼€ Babel transformã€‚</p>
<hr/>
<h3 data-id="heading-22">ä¸ƒã€gh CLIï¼ˆGithub CLIï¼‰ï¼Œè®©ä½ çš„ AI æŒæ¡æ•´ä¸ª Github</h3>
<p>GitHub CLI æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨ç»ˆç«¯ä¸­ç›´æ¥ä¸ GitHub äº¤äº’ã€‚<strong>é€‚åˆè®© LLM é€šè¿‡å‘½ä»¤è¡ŒæŸ¥é˜…å’Œé˜…è¯»ä»“åº“å†…å®¹ï¼ŒèŠ‚çœ MCP Token æ¶ˆè€—ã€‚</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcli.github.com%2Fmanual%2F" target="_blank" title="https://cli.github.com/manual/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fzh%2Fgithub-cli" target="_blank" title="https://docs.github.com/zh/github-cli" ref="nofollow noopener noreferrer">ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fen%2Frest" target="_blank" title="https://docs.github.com/en/rest" ref="nofollow noopener noreferrer">API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcli%2Fcli%2Freleases" target="_blank" title="https://github.com/cli/cli/releases" ref="nofollow noopener noreferrer">Github Releases</a></li>
</ul>
<h4 data-id="heading-23">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Windows (ä½¿ç”¨ winget æˆ– scoop)</span>
<span class="hljs-comment"># æˆ–è€… Github Releases ä¸‹è½½</span>
winget install --<span class="hljs-built_in">id</span> GitHub.cli
<span class="hljs-comment"># æˆ–</span>
scoop install gh

<span class="hljs-comment"># macOS</span>
brew install gh

<span class="hljs-comment"># Linux</span>
<span class="hljs-comment"># å‚è€ƒï¼šhttps://github.com/cli/cli/blob/trunk/docs/install_linux.md#debian</span>
(<span class="hljs-built_in">type</span> -p wget &gt;/dev/null || (sudo apt update &amp;&amp; sudo apt install wget -y)) \
	&amp;&amp; sudo <span class="hljs-built_in">mkdir</span> -p -m 755 /etc/apt/keyrings \
	&amp;&amp; out=$(<span class="hljs-built_in">mktemp</span>) &amp;&amp; wget -nv -O<span class="hljs-variable">$out</span> https://cli.github.com/packages/githubcli-archive-keyring.gpg \
	&amp;&amp; <span class="hljs-built_in">cat</span> <span class="hljs-variable">$out</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/keyrings/githubcli-archive-keyring.gpg &gt; /dev/null \
	&amp;&amp; sudo <span class="hljs-built_in">chmod</span> go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg \
	&amp;&amp; sudo <span class="hljs-built_in">mkdir</span> -p -m 755 /etc/apt/sources.list.d \
	&amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/github-cli.list &gt; /dev/null \
	&amp;&amp; sudo apt update \
	&amp;&amp; sudo apt install gh -y
</code></pre>
<p><strong>èº«ä»½éªŒè¯ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">gh auth login              <span class="hljs-comment"># äº¤äº’å¼ç™»å½•</span>
gh auth status             <span class="hljs-comment"># æŸ¥çœ‹è®¤è¯çŠ¶æ€</span>
gh auth refresh            <span class="hljs-comment"># åˆ·æ–° token</span>
</code></pre>
<h4 data-id="heading-24">ä»“åº“ä¿¡æ¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å»ºè®®ä¼˜å…ˆä½¿ç”¨ JSON è¾“å‡ºï¼Œé¿å… README å¯¼è‡´è¾“å‡ºè¿‡é•¿</span>
gh repo view {owner}/{repo} --json name,description,primaryLanguage,stargazerCount,url
</code></pre>
<h4 data-id="heading-25">æ–‡ä»¶å†…å®¹ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆéœ€è§£ç ï¼‰</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/contents/{path/to/file}"</span> --jq <span class="hljs-string">'.content'</span> | <span class="hljs-built_in">base64</span> -d

<span class="hljs-comment"># è¯»å– README</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/readme"</span> --jq <span class="hljs-string">'.content'</span> | <span class="hljs-built_in">base64</span> -d

<span class="hljs-comment"># åˆ—å‡ºç›®å½•ï¼ˆä»…æ˜¾ç¤ºåç§°ï¼ŒèŠ‚çœ Tokenï¼‰</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/contents/{path}"</span> --jq <span class="hljs-string">'.[].name'</span>
</code></pre>
<h4 data-id="heading-26">åˆ†æ”¯å’Œæäº¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯åç§°</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/branches"</span> --jq <span class="hljs-string">'.[].name'</span>

<span class="hljs-comment"># è·å–æœ€è¿‘ 3 æ¡æäº¤è®°å½•ï¼ˆæ ¼å¼åŒ–è¾“å‡ºï¼‰</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/commits?per_page=3"</span> --jq <span class="hljs-string">'.[] | {sha: .sha[0:7], message: .commit.message, author: .commit.author.name}'</span>
</code></pre>
<h4 data-id="heading-27">Issue å’Œ PR</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—è¡¨æ˜¾ç¤ºï¼ˆå¸¦é™åˆ¶ï¼‰</span>
gh issue list --repo {owner}/{repo} --<span class="hljs-built_in">limit</span> 5
gh <span class="hljs-built_in">pr</span> list --repo {owner}/{repo} --<span class="hljs-built_in">limit</span> 5

<span class="hljs-comment"># æœç´¢ç‰¹å®šå…³é”®è¯çš„ Issue</span>
gh issue list --repo {owner}/{repo} --search <span class="hljs-string">"{keyword}"</span> --<span class="hljs-built_in">limit</span> 5

<span class="hljs-comment"># è·å– PR è¯¦æƒ…ï¼ˆJSONï¼‰</span>
gh api <span class="hljs-string">"repos/{owner}/{repo}/pulls/{number}"</span> --jq <span class="hljs-string">'{title, body, state, html_url}'</span>
</code></pre>
<h4 data-id="heading-28">é€šç”¨ API</h4>
<pre><code class="hljs language-bash" lang="bash">gh api {endpoint} --jq <span class="hljs-string">'.field'</span>              <span class="hljs-comment"># ä»»æ„ API + jq è¿‡æ»¤</span>
gh api -X POST {endpoint} -f key=value       <span class="hljs-comment"># POST è¯·æ±‚</span>
</code></pre>
<h4 data-id="heading-29">ä½¿ç”¨åœºæ™¯</h4>
<ol>
<li><strong>å¿«é€ŸæŸ¥é˜…ä»“åº“ç»“æ„</strong>ï¼šå…ˆç”¨ <code>gh repo view --json ...</code> äº†è§£æ¦‚å†µï¼Œå†ç”¨ <code>gh api .../contents --jq '.[].name'</code> æµè§ˆæ ¹ç›®å½•</li>
<li><strong>æ·±åº¦æŸ¥çœ‹ä»£ç </strong>ï¼šå®šä½æ–‡ä»¶åï¼Œä½¿ç”¨ <code>gh api .../contents/path --jq '.content' | base64 -d</code> è¯»å–</li>
<li><strong>æ’æŸ¥å†å²</strong>ï¼šä½¿ç”¨ <code>gh api .../commits?per_page=5</code> æŸ¥çœ‹æœ€è¿‘å˜æ›´</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å•å…ƒæµ‹è¯•]]></title>    <link>https://juejin.cn/post/7601374137411797027</link>    <guid>https://juejin.cn/post/7601374137411797027</guid>    <pubDate>2026-02-01T14:29:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601374137411797027" data-draft-id="7601355703240196136" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å•å…ƒæµ‹è¯•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T14:29:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xyy123"/> <meta itemprop="url" content="https://juejin.cn/user/688733962386237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å•å…ƒæµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/688733962386237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xyy123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T14:29:15.000Z" title="Sun Feb 01 2026 14:29:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ ¸å¿ƒç†å¿µ (Why &amp; What)</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•ï¼Ÿ</h3>
<p>å•å…ƒæµ‹è¯•æ˜¯å¯¹è½¯ä»¶ä¸­çš„<strong>æœ€å°å¯æµ‹è¯•å•å…ƒ</strong>ï¼ˆé€šå¸¸æ˜¯ç±»ä¸­çš„æ–¹æ³•ï¼‰è¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ã€‚</p>
<ul>
<li><strong>ç›®æ ‡ï¼š</strong> ç¡®ä¿é€»è¾‘åœ¨éš”ç¦»ç¯å¢ƒä¸­æŒ‰é¢„æœŸè¿è¡Œã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> ä¸ä¾èµ–æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œæˆ–å…¶ä»–å¤–éƒ¨ç¯å¢ƒã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 FIRST åŸåˆ™ (é»„é‡‘æ³•åˆ™)</h3>
<p>æ‰€æœ‰ä¼˜ç§€çš„å•å…ƒæµ‹è¯•éƒ½å¿…é¡»éµå®ˆ FIRST åŸåˆ™ï¼š</p>
<ul>
<li><strong>F (Fast) å¿«é€Ÿï¼š</strong> è¿è¡Œé€Ÿåº¦å¿…é¡»æå¿«ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</li>
<li><strong>I (Isolated) éš”ç¦»ï¼š</strong> æµ‹è¯•ä¹‹é—´äº’ä¸å¹²æ‰°ï¼Œä¸ä¾èµ–æ‰§è¡Œé¡ºåºã€‚</li>
<li><strong>R (Repeatable) å¯é‡å¤ï¼š</strong> åœ¨ä»»ä½•ç¯å¢ƒã€ä»»ä½•æ—¶é—´è¿è¡Œç»“æœä¸€è‡´ï¼ˆä¸ä¾èµ– <code>DateTime.Now</code> æˆ–éšæœºæ•°ï¼‰ã€‚</li>
<li><strong>S (Self-validating) è‡ªéªŒè¯ï¼š</strong> æµ‹è¯•ç»“æœåªæœ‰ Pass æˆ– Failï¼Œä¸éœ€è¦äººå·¥æŸ¥çœ‹æ—¥å¿—ã€‚</li>
<li><strong>T (Timely) åŠæ—¶ï¼š</strong> éšä»£ç ç¼–å†™åŒæ—¶å®Œæˆï¼Œä¸è¦ç­‰åˆ°é¡¹ç›®ç»“æŸå†è¡¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">2. æŠ€æœ¯æ ˆä¸å·¥å…· (Tools)</h2>
<p>åœ¨ç°ä»£ .NET / C# å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ç»„åˆï¼š</p>






























<table><thead><tr><th><strong>ç»„ä»¶</strong></th><th><strong>æ¨èå·¥å…·</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>æµ‹è¯•æ¡†æ¶</strong></td><td><strong>xUnit</strong></td><td>ç°ä»£ã€ç®€æ´ã€ç¤¾åŒºæ”¯æŒæœ€å¼ºï¼ˆä¼˜äº MSTestï¼‰ã€‚</td></tr><tr><td><strong>æ¨¡æ‹Ÿæ¡†æ¶</strong></td><td><strong>Moq</strong></td><td>ç”¨äºæ¨¡æ‹Ÿæ¥å£è¡Œä¸ºï¼ˆMockingï¼‰ã€‚</td></tr><tr><td><strong>æ–­è¨€åº“</strong></td><td>xUnit è‡ªå¸¦ / FluentAssertions</td><td>ç”¨äºéªŒè¯ç»“æœï¼ˆ<code>Assert.Equal</code>ï¼‰ã€‚</td></tr><tr><td><strong>è¿è¡Œå·¥å…·</strong></td><td>Visual Studio Test Explorer</td><td>å¿«æ·é”® <code>Ctrl + E, T</code>ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">3. ç¼–å†™è§„èŒƒ (How to Write)</h2>
<h3 data-id="heading-5">3.1 3A æ¨¡å¼ (ä»£ç ç»“æ„)</h3>
<p>æ¯ä¸ªæµ‹è¯•æ–¹æ³•å†…éƒ¨å¿…é¡»æ¸…æ™°åœ°åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>Arrange (å‡†å¤‡)ï¼š</strong> åˆå§‹åŒ–å¯¹è±¡ã€è®¾ç½® Mock è¡Œä¸ºã€å‡†å¤‡æ•°æ®ã€‚</li>
<li><strong>Act (æ‰§è¡Œ)ï¼š</strong> è°ƒç”¨è¢«æµ‹è¯•çš„æ–¹æ³•ã€‚</li>
<li><strong>Assert (æ–­è¨€)ï¼š</strong> éªŒè¯è¿”å›å€¼æ˜¯å¦æ­£ç¡®ï¼Œæˆ–æ˜¯å¦è°ƒç”¨äº†é¢„æœŸçš„æ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-6">3.2 å‘½åè§„èŒƒ</h3>
<p>æµ‹è¯•æ–¹æ³•çš„åç§°åº”å½“åƒâ€œå¥å­â€ä¸€æ ·æ¸…æ™°ï¼Œæè¿° <strong>[æµ‹ä»€ä¹ˆ] + [ä»€ä¹ˆæ¡ä»¶ä¸‹] + [æœŸæœ›ç»“æœ]</strong> ã€‚</p>
<ul>
<li><em>æ ¼å¼ï¼š</em> <code>MethodName_StateUnderTesting_ExpectedBehavior</code></li>
<li><em>ç¤ºä¾‹ï¼š</em> <code>Register_WithExistingEmail_ThrowsException</code></li>
</ul>
<h3 data-id="heading-7">3.3 Mock (æ¨¡æ‹Ÿ) çš„è¾¹ç•Œ</h3>
<p>è¿™æ˜¯åŒºåˆ†â€œå•å…ƒæµ‹è¯•â€ä¸â€œé›†æˆæµ‹è¯•â€çš„å…³é”®ã€‚</p>
<ul>
<li>
<p><strong>éœ€è¦ Mock çš„ï¼ˆå¤–éƒ¨ä¾èµ–ï¼‰ï¼š</strong></p>
<ul>
<li>æ•°æ®åº“æ“ä½œ (<code>Repository</code>, <code>DbContext</code>)</li>
<li>ç¬¬ä¸‰æ–¹ API è°ƒç”¨ (<code>HttpClient</code>)</li>
<li>æ–‡ä»¶ I/Oã€ç³»ç»Ÿæ—¶é—´ã€éšæœºæ•°</li>
</ul>
</li>
<li>
<p><strong>ä¸éœ€è¦ Mock çš„ï¼ˆå†…éƒ¨é€»è¾‘ï¼‰ï¼š</strong></p>
<ul>
<li>DTO / Entity å®ä½“å¯¹è±¡</li>
<li>LINQ æŸ¥è¯¢ï¼ˆå†…å­˜ä¸­ï¼‰</li>
<li>ç§æœ‰æ–¹æ³•ï¼ˆé€šè¿‡æµ‹è¯• Public æ–¹æ³•è¦†ç›–ï¼‰</li>
<li>å·¥å…·ç±»æ–¹æ³•ï¼ˆå¦‚ <code>String.Split</code>ï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-8">4. æµ‹è¯•ç­–ç•¥ä¸èŒƒå›´ (Strategy)</h2>
<h3 data-id="heading-9">4.1 æµ‹è¯•ç²’åº¦</h3>
<ul>
<li>
<p><strong>é‡ç‚¹æµ‹è¯•ï¼š</strong> <strong>Service å±‚</strong> çš„ Public æ–¹æ³•ã€‚è¿™é‡Œæ˜¯ä¸šåŠ¡é€»è¾‘æœ€å¯†é›†çš„åœ°æ–¹ã€‚</p>
</li>
<li>
<p><strong>è½»é‡æµ‹è¯•/ä¸æµ‹è¯•ï¼š</strong></p>
<ul>
<li><strong>Controller å±‚ï¼š</strong> ä»…éªŒè¯ HTTP çŠ¶æ€ç è½¬æ¢ï¼Œä¸æµ‹ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>Repository å±‚ï¼š</strong> é€šå¸¸ç”±é›†æˆæµ‹è¯•è¦†ç›–ã€‚</li>
<li><strong>çº¯ CRUDï¼š</strong> å¦‚æœæ–¹æ³•åªæ˜¯ç®€å•çš„ä¸€è¡Œé€ä¼ ï¼Œä¸å€¼å¾—æµ‹è¯•ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">4.2 è¦†ç›–ç‡ä¸ ROI (æŠ•å…¥äº§å‡ºæ¯”)</h3>
<ul>
<li>
<p><strong>ä¸è¦è¿½æ±‚ 100% è¦†ç›–ç‡ã€‚</strong> æ¨èç›®æ ‡ï¼š<strong>æ ¸å¿ƒä¸šåŠ¡æ¨¡å— 80%+</strong> ã€‚</p>
</li>
<li>
<p><strong>å¿…æµ‹è·¯å¾„ï¼š</strong></p>
<ol>
<li><strong>Happy Pathï¼š</strong> ä¸€åˆ‡æ­£å¸¸çš„æµç¨‹ã€‚</li>
<li><strong>Edge Casesï¼š</strong> å…³é”®çš„è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚ç©ºå€¼ã€è´Ÿæ•°ã€é‡å¤æ•°æ®ï¼‰ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ•ˆç‡ç¥å™¨ï¼š</strong> ä½¿ç”¨ xUnit çš„ <code>[Theory]</code> å’Œ <code>[InlineData]</code> æ¥åˆå¹¶é‡å¤çš„æµ‹è¯•é€»è¾‘ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-11">5. å®æˆ˜ä»£ç é€ŸæŸ¥è¡¨ (Cheat Sheet)</h2>
<h3 data-id="heading-12">åœºæ™¯ï¼šæµ‹è¯•ä¸€ä¸ªç”¨æˆ·æ³¨å†ŒæœåŠ¡</h3>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">using</span> Xunit;
<span class="hljs-keyword">using</span> Moq;
<span class="hljs-keyword">using</span> MyProject.Services;
<span class="hljs-keyword">using</span> MyProject.Interfaces;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceTests</span>
{
    <span class="hljs-comment">// å®šä¹‰ Mocks (æ¨¡æ‹Ÿå¯¹è±¡)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Mock&lt;IUserRepository&gt; _mockRepo;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Mock&lt;IEmailService&gt; _mockEmail;
    <span class="hljs-comment">// å®šä¹‰è¢«æµ‹å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> UserService _service;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceTests</span>()</span>
    {
        <span class="hljs-comment">// Arrange: åˆå§‹åŒ– (ä¼šåœ¨æ¯ä¸ªæµ‹è¯•è¿è¡Œå‰æ‰§è¡Œ)</span>
        _mockRepo = <span class="hljs-keyword">new</span> Mock&lt;IUserRepository&gt;();
        _mockEmail = <span class="hljs-keyword">new</span> Mock&lt;IEmailService&gt;();
        _service = <span class="hljs-keyword">new</span> UserService(_mockRepo.Object, _mockEmail.Object);
    }

    <span class="hljs-comment">// æ¡ˆä¾‹ 1: å¿«ä¹è·¯å¾„ (Happy Path)</span>
    [<span class="hljs-meta">Fact</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Register_ValidUser_ReturnsTrueAndSendsEmail</span>()</span>
    {
        <span class="hljs-comment">// Arrange</span>
        <span class="hljs-keyword">var</span> email = <span class="hljs-string">"new@test.com"</span>;
        <span class="hljs-comment">// æ¨¡æ‹Ÿï¼šæ•°æ®åº“é‡Œæ‰¾ä¸åˆ°è¿™ä¸ªé‚®ç®± (è¿”å› null)</span>
        _mockRepo.Setup(r =&gt; r.GetByEmail(email)).ReturnsAsync((User)<span class="hljs-literal">null</span>);

        <span class="hljs-comment">// Act</span>
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _service.Register(email);

        <span class="hljs-comment">// Assert</span>
        Assert.True(result); <span class="hljs-comment">// éªŒè¯è¿”å›å€¼</span>
        <span class="hljs-comment">// éªŒè¯ï¼šæ˜¯å¦ç¡®å®è°ƒç”¨äº†æ•°æ®åº“ä¿å­˜æ–¹æ³•ï¼Ÿ(éªŒè¯è¡Œä¸º)</span>
        _mockRepo.Verify(r =&gt; r.Add(It.IsAny&lt;User&gt;()), Times.Once);
        <span class="hljs-comment">// éªŒè¯ï¼šæ˜¯å¦ç¡®å®å‘äº†é‚®ä»¶ï¼Ÿ</span>
        _mockEmail.Verify(e =&gt; e.SendWelcome(email), Times.Once);
    }

    <span class="hljs-comment">// æ¡ˆä¾‹ 2: å¼‚å¸¸è·¯å¾„ (Edge Case) - é‚®ç®±å·²å­˜åœ¨</span>
    [<span class="hljs-meta">Fact</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Register_ExistingEmail_ThrowsException</span>()</span>
    {
        <span class="hljs-comment">// Arrange</span>
        <span class="hljs-keyword">var</span> email = <span class="hljs-string">"exist@test.com"</span>;
        <span class="hljs-comment">// æ¨¡æ‹Ÿï¼šæ•°æ®åº“é‡Œå·²ç»æœ‰è¿™ä¸ªç”¨æˆ·äº†</span>
        _mockRepo.Setup(r =&gt; r.GetByEmail(email)).ReturnsAsync(<span class="hljs-keyword">new</span> User());

        <span class="hljs-comment">// Act &amp; Assert</span>
        <span class="hljs-comment">// éªŒè¯æ˜¯å¦æŠ›å‡ºäº†ç‰¹å®šå¼‚å¸¸</span>
        <span class="hljs-keyword">await</span> Assert.ThrowsAsync&lt;InvalidOperationException&gt;(() =&gt; _service.Register(email));

        <span class="hljs-comment">// éªŒè¯ï¼šç¡®ä¿æ²¡æœ‰è°ƒç”¨ä¿å­˜ï¼Œä¹Ÿæ²¡æœ‰å‘é‚®ä»¶</span>
        _mockRepo.Verify(r =&gt; r.Add(It.IsAny&lt;User&gt;()), Times.Never);
        _mockEmail.Verify(e =&gt; e.SendWelcome(It.IsAny&lt;<span class="hljs-built_in">string</span>&gt;()), Times.Never);
    }
    
    <span class="hljs-comment">// æ¡ˆä¾‹ 3: å‚æ•°åŒ–æµ‹è¯• (å¤šç»„æ•°æ®)</span>
    [<span class="hljs-meta">Theory</span>]
    [<span class="hljs-meta">InlineData(<span class="hljs-string">""</span>)</span>]
    [<span class="hljs-meta">InlineData(null)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Register_InvalidInput_ThrowsArgumentException</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> invalidEmail</span>)</span>
    {
         <span class="hljs-keyword">await</span> Assert.ThrowsAsync&lt;ArgumentException&gt;(() =&gt; _service.Register(invalidEmail));
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-13">6. è‡ªæ£€æ¸…å• (Checklist)</h2>
<p>åœ¨æäº¤ä»£ç å‰ï¼Œé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æˆ‘çš„æµ‹è¯•è·‘å¾—å¿«å—ï¼Ÿï¼ˆæ˜¯å¦è¿äº†çœŸå®æ•°æ®åº“ï¼Ÿï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æµ‹è¯•åèƒ½è®©æˆ‘ä¸€çœ¼çœ‹æ‡‚åœ¨æµ‹ä»€ä¹ˆå—ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æˆ‘æ˜¯å¦åªæµ‹è¯•äº† Public æ–¹æ³•ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æˆ‘æ˜¯å¦è¦†ç›–äº†â€œæˆåŠŸâ€å’Œâ€œå¤±è´¥â€ä¸¤ç§ä¸»è¦æƒ…å†µï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¦‚æœæˆ‘é‡æ„ä»£ç å†…éƒ¨å®ç°ï¼ˆä¸æ”¹åŠŸèƒ½ï¼‰ï¼Œæµ‹è¯•ä¼šæŒ‚å—ï¼Ÿï¼ˆå¦‚æœä¸æ”¹åŠŸèƒ½æµ‹è¯•å´æŒ‚äº†ï¼Œè¯´æ˜æµ‹è¯•å†™å¾—å¤ªå…³æ³¨ç»†èŠ‚äº†ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-14">7. æµ‹è¯•ç­–ç•¥</h2>
<h3 data-id="heading-15">1. ä¼ä¸šä¸€èˆ¬çš„è¦æ±‚æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨å¤§å¤šæ•°æ­£è§„çš„è½¯ä»¶å¼€å‘å›¢é˜Ÿï¼ˆéåªæœ‰ 1-2 äººçš„åˆåˆ›å›¢é˜Ÿï¼‰ä¸­ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ç¡¬æ€§æˆ–è½¯æ€§æŒ‡æ ‡ï¼š</p>
<h4 data-id="heading-16">A. ä»£ç è¦†ç›–ç‡ (Code Coverage) â€”â€” æ ¸å¿ƒæŒ‡æ ‡</h4>
<p>è¿™æ˜¯æœ€ç›´è§‚çš„æ•°æ®ã€‚Visual Studio ä¼ä¸šç‰ˆæˆ– DevOps å¹³å°ï¼ˆå¦‚ Azure DevOps, Jenkinsï¼‰éƒ½ä¼šç»Ÿè®¡è¿™ä¸ªæ•°å­—ã€‚</p>
<ul>
<li>
<p><strong>åŠæ ¼çº¿ï¼š60% - 70%</strong></p>
<ul>
<li>è¿™é€šå¸¸æ„å‘³ç€è¦†ç›–äº†ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ï¼ˆHappy Pathï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¡Œä¸šæ ‡å‡†/ä¼˜ç§€çº¿ï¼š80%</strong></p>
<ul>
<li>è¿™æ˜¯å¤§å¤šæ•°æˆç†Ÿäº’è”ç½‘å…¬å¸å’Œå¤–ä¼è¿½æ±‚çš„ç›®æ ‡ã€‚å¦‚æœæœ‰ CI/CD æµæ°´çº¿ï¼Œ<strong>ä½äº 80% çš„è¦†ç›–ç‡å¯èƒ½ä¼šå¯¼è‡´ä»£ç åˆå¹¶è¢«æ‹’ç»</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>é‡‘è/åŒ»ç–—/èˆªç©ºï¼š90% - 100%</strong></p>
<ul>
<li>è¿™äº›é¢†åŸŸæå…¶ä¸¥è‹›ï¼Œä½†è¿™é€šå¸¸ä¸é€‚ç”¨äºæ™®é€šå•†ä¸šé¡¹ç›®ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-17">B. å¿…æµ‹èŒƒå›´</h4>
<ul>
<li><strong>æ ¸å¿ƒä¸šåŠ¡ (Core Domain)ï¼š</strong> æ¶‰åŠé‡‘é’±è®¡ç®—ã€è®¢å•çŠ¶æ€æµè½¬ã€æƒé™æ ¡éªŒçš„ä»£ç ï¼Œå¿…é¡»æœ‰æµ‹è¯•ã€‚</li>
<li><strong>å…¬å…±åº“ (Shared Libraries)ï¼š</strong> ç»™å…¶ä»–å›¢é˜Ÿç”¨çš„å·¥å…·ç±»ï¼Œå¿…é¡»é«˜è¦†ç›–ç‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-18">2. æ¯ä¸ª Public æ–¹æ³•éƒ½è¦å†™ä¸€ä¸ªæµ‹è¯•å—ï¼Ÿ</h3>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šç»å¯¹ä¸éœ€è¦ã€‚</strong> ç›²ç›®è¿½æ±‚â€œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰æµ‹è¯•â€æ˜¯ä½æ•ˆçš„æºå¤´ã€‚</p>
<h4 data-id="heading-19">âŒ ä¸éœ€è¦æµ‹è¯•çš„æ–¹æ³•ï¼ˆä½ä»·å€¼ï¼‰</h4>
<ol>
<li>
<p><strong>çç¢ä»£ç  (Trivial Code)ï¼š</strong></p>
<ul>
<li>ç®€å•çš„ Getter/Setter å±æ€§ã€‚</li>
<li>æ²¡æœ‰ä»»ä½•é€»è¾‘åˆ¤æ–­ï¼Œåªæ˜¯æŠŠæ•°æ®ä» A ä¼ ç»™ B çš„æ–¹æ³•ï¼ˆçº¯é€ä¼ ï¼‰ã€‚</li>
<li>æ„é€ å‡½æ•°ï¼ˆé™¤éé‡Œé¢æœ‰å¤æ‚çš„åˆå§‹åŒ–é€»è¾‘ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¡†æ¶ç”Ÿæˆçš„ä»£ç ï¼š</strong> æ¯”å¦‚ Entity Framework çš„ Migration æ–‡ä»¶ï¼Œæˆ–è€…è‡ªåŠ¨ç”Ÿæˆçš„ DTOã€‚</p>
</li>
<li>
<p><strong>ç®€å•çš„ CRUDï¼š</strong> å¦‚æœä½ çš„ Service æ–¹æ³•åªæ˜¯è°ƒç”¨äº†ä¸€ä¸‹ <code>Repository.GetById()</code> ç„¶åç›´æ¥è¿”å›ï¼Œ<strong>ä¸è¦æµ‹å®ƒ</strong>ã€‚ä½ æ˜¯åœ¨æµ‹å¾®è½¯çš„ç¼–è¯‘å™¨ï¼Œè¿™æ²¡æœ‰æ„ä¹‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-20">âœ… å¿…é¡»æµ‹è¯•çš„æ–¹æ³•ï¼ˆé«˜ä»·å€¼ï¼‰</h4>
<ol>
<li><strong>æœ‰æ¡ä»¶åˆ†æ”¯çš„ï¼š</strong> åŒ…å« <code>if</code>, <code>switch</code>, <code>while</code> çš„æ–¹æ³•ã€‚</li>
<li><strong>æœ‰è®¡ç®—é€»è¾‘çš„ï¼š</strong> åŒ…å« <code>+ - * /</code> æˆ–å­—ç¬¦ä¸²å¤„ç†çš„æ–¹æ³•ã€‚</li>
<li><strong>æœ‰å¼‚å¸¸æŠ›å‡ºçš„ï¼š</strong> ä¸šåŠ¡è§„åˆ™æ ¡éªŒï¼ˆä¾‹å¦‚ï¼šä½™é¢ä¸è¶³æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-21">3. å¦‚ä½•å¹³è¡¡å¼€å‘æ•ˆç‡ä¸æµ‹è¯•è¯¦ç»†åº¦ï¼Ÿ</h3>
<p>å¦‚æœä½ è§‰å¾—å†™æµ‹è¯•å¤ªæ…¢ï¼Œé€šå¸¸æ˜¯å› ä¸ºä½ è¯•å›¾è¦†ç›–â€œæ‰€æœ‰å¯èƒ½â€ï¼Œæˆ–è€…æµ‹è¯•å†™å¾—å¤ªéš¾ç»´æŠ¤ã€‚</p>
<h4 data-id="heading-22">ç­–ç•¥ä¸€ï¼šéµå¾ª "80/20 æ³•åˆ™" (é‡è¦ï¼)</h4>
<p><strong>åªå†™ä¸¤ä¸ªç»´åº¦çš„æµ‹è¯•ï¼Œå°±èƒ½è¦†ç›– 80% çš„é£é™©ï¼š</strong></p>
<ol>
<li><strong>Happy Path (å¿«ä¹è·¯å¾„)ï¼š</strong> è¾“å…¥å®Œå…¨æ­£ç¡®ï¼Œæµç¨‹ä¸€åˆ‡æ­£å¸¸ï¼Œæœ€åè¿”å›æˆåŠŸã€‚è¿™æ˜¯å¿…é¡»è¦æœ‰çš„ã€‚</li>
<li><strong>Edge Cases (å…³é”®è¾¹ç¼˜è·¯å¾„)ï¼š</strong> æœ€å®¹æ˜“å‡ºé”™çš„ 1-2 ç§æƒ…å†µï¼ˆä¾‹å¦‚è¾“å…¥ä¸º nullï¼ŒID ä¸å­˜åœ¨ï¼Œé‡‘é¢ä¸ºè´Ÿæ•°ï¼‰ã€‚</li>
</ol>
<p><strong>æ”¾å¼ƒä»€ä¹ˆï¼Ÿ</strong></p>
<p>æ”¾å¼ƒé‚£äº›æä½æ¦‚ç‡å‘ç”Ÿçš„è¾¹ç•Œæƒ…å†µï¼Œæˆ–è€…éœ€è¦æå…¶å¤æ‚çš„ Mock æ‰èƒ½æ¨¡æ‹Ÿå‡ºæ¥çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-23">ç­–ç•¥äºŒï¼šä½¿ç”¨å‚æ•°åŒ–æµ‹è¯• (Parameterized Tests)</h4>
<p>è¿™æ˜¯ C# xUnit æå‡æ•ˆç‡çš„ç¥å™¨ã€‚<strong>ä¸è¦ä¸ºæ¯ç§è¾“å…¥éƒ½å¤åˆ¶ç²˜è´´å†™ä¸€ä¸ªæ–°æ–¹æ³•</strong>ã€‚</p>
<p><strong>ä½æ•ˆå†™æ³•ï¼š</strong></p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Fact</span>] <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test_Age_10_Return_False</span>()</span> { ... }
[<span class="hljs-meta">Fact</span>] <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test_Age_20_Return_True</span>()</span> { ... }
[<span class="hljs-meta">Fact</span>] <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test_Age_18_Return_True</span>()</span> { ... }
</code></pre>
<p><strong>é«˜æ•ˆå†™æ³• (ä½¿ç”¨ <code>[Theory]</code> å’Œ <code>[InlineData]</code>)ï¼š</strong></p>
<p>å†™ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œæµ‹ 5 ç§æƒ…å†µï¼Œä»£ç é‡å‡ ä¹ä¸å¢åŠ ã€‚</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Theory</span>]
[<span class="hljs-meta">InlineData(10, false)</span>] <span class="hljs-comment">// è¾“å…¥10ï¼ŒæœŸæœ› false</span>
[<span class="hljs-meta">InlineData(17, false)</span>]
[<span class="hljs-meta">InlineData(18, true)</span>]  <span class="hljs-comment">// ä¸´ç•Œç‚¹</span>
[<span class="hljs-meta">InlineData(20, true)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CheckAdult_ReturnsExpectedResult</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> age, <span class="hljs-built_in">bool</span> expected</span>)</span>
{
    <span class="hljs-comment">// Arrange</span>
    <span class="hljs-keyword">var</span> service = <span class="hljs-keyword">new</span> UserService();
    
    <span class="hljs-comment">// Act</span>
    <span class="hljs-keyword">var</span> result = service.IsAdult(age);
    
    <span class="hljs-comment">// Assert</span>
    Assert.Equal(expected, result);
}
</code></pre>
<h4 data-id="heading-24">ç­–ç•¥ä¸‰ï¼šé¿å…æµ‹è¯•â€œå®ç°ç»†èŠ‚â€</h4>
<p>è¿™æ˜¯å¯¼è‡´æµ‹è¯•éš¾ä»¥ç»´æŠ¤ã€å¼€å‘æ•ˆç‡ä½ä¸‹çš„æœ€å¤§åŸå› ã€‚</p>
<ul>
<li><strong>ç³Ÿç³•çš„æµ‹è¯•ï¼š</strong> éªŒè¯â€œService æ˜¯å¦å…ˆè¯»å–äº†ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰å†è¯»å–æ•°æ®åº“ï¼Œç„¶åæŠŠæ•°æ®å†™å…¥ç¼“å­˜â€ã€‚ï¼ˆå¦‚æœä»¥åä½ åˆ é™¤äº†ç¼“å­˜é€»è¾‘ï¼Œæµ‹è¯•å°±æŒ‚äº†ï¼Œè™½ç„¶åŠŸèƒ½æ²¡å˜ï¼‰ã€‚</li>
<li><strong>å¥½çš„æµ‹è¯•ï¼š</strong> éªŒè¯â€œæˆ‘è¾“å…¥ IDï¼ŒService æ˜¯å¦è¿”å›äº†æ­£ç¡®çš„ç”¨æˆ·â€ã€‚ï¼ˆä¸ç®¡ä½ å†…éƒ¨æ€ä¹ˆæŠ˜è…¾ï¼Œåªè¦ç»“æœå¯¹å°±è¡Œï¼‰ã€‚</li>
</ul>
<p><strong>åŸåˆ™ï¼šåƒç”¨æˆ·ä¸€æ ·æµ‹è¯•ä½ çš„æ¥å£ï¼Œè€Œä¸æ˜¯åƒåšæ‰‹æœ¯ä¸€æ ·å»æµ‹è¯•å†…éƒ¨å˜é‡ã€‚</strong></p>
<hr/>
<h3 data-id="heading-25">æ€»ç»“ï¼šç»™ä½ çš„è¡ŒåŠ¨æŒ‡å—</h3>
<p>å¦‚æœä½ ç°åœ¨è¿˜åœ¨â€œä» 0 åˆ° 1â€çš„é˜¶æ®µï¼Œæˆ‘å»ºè®®ä½ é‡‡å–**â€œé˜²å¾¡æ€§æµ‹è¯•ç­–ç•¥â€**ï¼š</p>
<ol>
<li><strong>æ–°åŠŸèƒ½å¿…æµ‹ï¼š</strong> ä»¥åæ–°å†™çš„æ ¸å¿ƒ Service æ–¹æ³•ï¼Œå¿…é¡»å†™ä¸€ä¸ª Happy Path æµ‹è¯•ã€‚</li>
<li><strong>Bug ä¿®å¤å¿…æµ‹ï¼š</strong> æ¯æ¬¡ä¿®å¤ä¸€ä¸ª Bugï¼Œå…ˆå†™ä¸€ä¸ªæµ‹è¯•å¤ç°è¿™ä¸ª Bugï¼Œä¿®å¤åæµ‹è¯•é€šè¿‡ã€‚è¿™èƒ½é˜²æ­¢ Bug å¤å‘ï¼ˆå›å½’æµ‹è¯•ï¼‰ã€‚</li>
<li><strong>æ—§ä»£ç éšç¼˜ï¼š</strong> ä¸è¦è¯•å›¾å›å¤´å»ç»™å‡ å¹´å‰çš„æ—§ä»£ç è¡¥æµ‹è¯•ï¼Œé™¤éä½ è¦é‡æ„å®ƒã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—­åŒ…ï¼šä»ã€Œèƒ½è·‘ã€åˆ°ã€Œå¯æ§ã€â€”â€”ç”¨æ‰§è¡Œä¸Šä¸‹æ–‡æŠŠå®ƒè®²é€ï¼Œå†æŠŠæ³„æ¼é£é™©å‹ä½]]></title>    <link>https://juejin.cn/post/7601427909703974966</link>    <guid>https://juejin.cn/post/7601427909703974966</guid>    <pubDate>2026-02-02T01:58:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601427909703974966" data-draft-id="7601477334931587078" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—­åŒ…ï¼šä»ã€Œèƒ½è·‘ã€åˆ°ã€Œå¯æ§ã€â€”â€”ç”¨æ‰§è¡Œä¸Šä¸‹æ–‡æŠŠå®ƒè®²é€ï¼Œå†æŠŠæ³„æ¼é£é™©å‹ä½"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-02T01:58:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="swipe"/> <meta itemprop="url" content="https://juejin.cn/user/858052674727959"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—­åŒ…ï¼šä»ã€Œèƒ½è·‘ã€åˆ°ã€Œå¯æ§ã€â€”â€”ç”¨æ‰§è¡Œä¸Šä¸‹æ–‡æŠŠå®ƒè®²é€ï¼Œå†æŠŠæ³„æ¼é£é™©å‹ä½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/858052674727959/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    swipe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:58:35.000Z" title="Mon Feb 02 2026 01:58:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆå›¢é˜Ÿé‡Œé—­åŒ…æ€»æ˜¯ã€Œä¼šç”¨ä½†è®²ä¸æ¸…ã€</h2>
<p>é—­åŒ…å‡ ä¹æ˜¯æ¯ä¸ªå‰ç«¯éƒ½â€œç”¨è¿‡â€çš„èƒ½åŠ›ï¼šå›è°ƒã€äº‹ä»¶å¤„ç†ã€èŠ‚æµé˜²æŠ–ã€æŸ¯é‡ŒåŒ–ã€çŠ¶æ€ç¼“å­˜â€¦â€¦åˆ°å¤„éƒ½æ˜¯å®ƒã€‚ä½†ä¸€åˆ°æ’æŸ¥çº¿ä¸Šå†…å­˜é£™å‡ã€è§£é‡Šâ€œä¸ºä»€ä¹ˆå˜é‡æ²¡è¢«å›æ”¶â€ã€æˆ–è€…è¯„å®¡é‡Œè®¨è®ºâ€œè¿™ä¸ªå†™æ³•ä¼šä¸ä¼šæ³„æ¼â€ï¼Œå°±å®¹æ˜“é™·å…¥ä¸¤ç§æç«¯ï¼š</p>
<ul>
<li><strong>æŠŠé—­åŒ…å½“ç„å­¦</strong>ï¼šåªè®°ä½â€œå‡½æ•°å¥—å‡½æ•° + å¼•ç”¨å¤–éƒ¨å˜é‡â€ï¼Œä½†ä¸çŸ¥é“åº•å±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</li>
<li><strong>æŠŠé—­åŒ…å½“æ´ªæ°´çŒ›å…½</strong>ï¼šé‡åˆ°é—­åŒ…å°±æ€•æ³„æ¼ï¼ŒåŠ¨ä¸åŠ¨â€œå…¨å±€å˜é‡/å•ä¾‹å°±æ˜¯åâ€ã€‚</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼š<strong>ç”¨â€œæ‰§è¡Œä¸Šä¸‹æ–‡ + AO/GO + å¯è¾¾æ€§â€æŠŠé—­åŒ…æ‹†å¼€è®²æ¸…æ¥š</strong>ï¼Œå†è½åˆ°å·¥ç¨‹å®è·µï¼š<strong>å“ªäº›å†™æ³•ä¼šå¯¼è‡´å†…å­˜å¸¸é©»ã€æ€ä¹ˆå®šä½ã€æ€ä¹ˆé‡Šæ”¾ã€æ€ä¹ˆéªŒè¯</strong>ã€‚å¾ˆå¤šå†…å®¹éœ€è¦é…åˆå†…å­˜å›¾ç†è§£ï¼ˆå›¾ç‰‡å¿…é¡»ä¿ç•™ï¼‰ï¼Œå»ºè®®è¾¹çœ‹è¾¹å¯¹ç…§å›¾ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç›®å½•</h2>
<ul>
<li>
<ol>
<li>è„‰ç»œï¼šä¸ºä»€ä¹ˆé—­åŒ…åœ¨ JS é‡Œå¦‚æ­¤å…³é”®</li>
</ol>
</li>
<li>
<ol start="2">
<li>é—­åŒ…åˆ°åº•æ˜¯ä»€ä¹ˆï¼šå®šä¹‰ã€è‡ªç”±å˜é‡ä¸è¯æ³•ç»‘å®š</li>
</ol>
</li>
<li>
<ol start="3">
<li>ä»è°ƒç”¨æ ˆçœ‹é—­åŒ…ï¼šé«˜é˜¶å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼ˆGO / AO / FECï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>é—­åŒ…å½¢æˆçš„å…³é”®ï¼š[[scope]] / parentScope ä¸ºä»€ä¹ˆèƒ½â€œè·¨å‡ºä¸Šä¸‹æ–‡â€</li>
</ol>
</li>
<li>
<ol start="5">
<li>å†…å­˜è§†è§’ï¼šæ™®é€šå‡½æ•° vs é—­åŒ…å‡½æ•°ï¼Œå˜é‡ä¸ºä»€ä¹ˆå›æ”¶/ä¸å›æ”¶</li>
</ol>
</li>
<li>
<ol start="6">
<li>é—­åŒ…ä¸å†…å­˜æ³„æ¼ï¼šä»€ä¹ˆæ—¶å€™æ˜¯â€œæ­£å¸¸é©»ç•™â€ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯â€œæ³„æ¼â€</li>
</ol>
</li>
<li>
<ol start="7">
<li>å¦‚ä½•é‡Šæ”¾ï¼šæœ€å°åŒ–ä½œç”¨åŸŸã€è§£é™¤å¼•ç”¨ã€å¼±å¼•ç”¨æ€è·¯</li>
</ol>
</li>
<li>
<ol start="8">
<li>æ€§èƒ½ä¸æ’æŸ¥ï¼šç”¨æµè§ˆå™¨å·¥å…·å®šä½é—­åŒ…å¯¼è‡´çš„å†…å­˜/è€—æ—¶</li>
</ol>
</li>
<li>
<ol start="9">
<li>å¼•æ“ä¼˜åŒ–ï¼šé—­åŒ…é‡Œâ€œæ²¡ç”¨åˆ°çš„å˜é‡â€ä¼šæ€æ ·ï¼ˆV8 ä¼˜åŒ–ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>è¿›é˜¶è¾¹ç•Œï¼šå¤šä¸ªé—­åŒ…å®ä¾‹å½¼æ­¤ç‹¬ç«‹ï¼›ä¸ºä»€ä¹ˆ <code>null</code> èƒ½æ–­å¼•ç”¨è€Œ <code>undefined</code> ä¸è¡Œ</li>
</ol>
</li>
<li>
<ol start="11">
<li>å®æˆ˜å»ºè®®ï¼šå›¢é˜Ÿè½åœ°æ¸…å• &amp; æŒ‡æ ‡éªŒè¯</li>
</ol>
</li>
<li>
<ol start="12">
<li>æ€»ç»“ï¼šå…³é”®ç»“è®º + ä¸‹ä¸€æ­¥å»ºè®®</li>
</ol>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">f è„‰ç»œæ¢ç´¢ï¼šé—­åŒ…ä¸ºä»€ä¹ˆå€¼å¾—è¢«ã€Œè®¤çœŸå¯¹å¾…ã€</h2>
<p>é—­åŒ…æ˜¯ JavaScript ä¸­ä¸€ä¸ªéå¸¸å®¹æ˜“è®©äººè¿·æƒ‘çš„çŸ¥è¯†ç‚¹ï¼šå®ƒæ—¢æ˜¯è¯­è¨€è¡¨è¾¾åŠ›çš„æºæ³‰ï¼Œä¹Ÿå¯èƒ½æˆä¸ºå†…å­˜ä¸å¯ç»´æŠ¤æ€§çš„é£é™©ç‚¹ã€‚å¾ˆå¤šç»å…¸èµ„æ–™å¯¹å®ƒè¯„ä»·æé«˜â€”â€”å› ä¸ºå®ƒèƒŒåç‰µæ‰¯çš„æ˜¯ä¸€æ•´å¥—â€œè¯æ³•ä½œç”¨åŸŸ + æ‰§è¡Œä¸Šä¸‹æ–‡ + åƒåœ¾å›æ”¶â€çš„ä½“ç³»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af8fae0ed83645c2a2a12564e9cfcd19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=E1NoWfiAhwuCAfj4bIH33KaOITE%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-1 ã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹ä¸Šå·ä¸­å¯¹é—­åŒ…çš„è¯„è¯­**</p>
<p>æŠŠè¿™å¼ å›¾æ”¾åœ¨å¼€å¤´çš„æ„ä¹‰æ˜¯ï¼š<strong>é—­åŒ…ä¸æ˜¯ä¸€ä¸ªâ€œè¯­æ³•ç‚¹â€ï¼Œè€Œæ˜¯ç†è§£ JS è¿è¡Œæœºåˆ¶çš„å…¥å£</strong>ã€‚å½“ä½ èƒ½æŠŠé—­åŒ…è®²æ¸…æ¥šï¼Œå¾ˆå¤šâ€œJS ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡â€çš„é—®é¢˜éƒ½ä¼šè¿èµ·æ¥ã€‚</p>
<h3 data-id="heading-3">æœ¬ç« å°ç»“ï¼ˆå¯è¿ç§»çš„ç»éªŒï¼‰</h3>
<ul>
<li>é—­åŒ…ä¸æ˜¯â€œå‡½æ•°å¥—å‡½æ•°â€çš„è¡¨è±¡ï¼Œè€Œæ˜¯ <strong>è¯æ³•ä½œç”¨åŸŸå¦‚ä½•åœ¨è¿è¡Œæ—¶è¢«ä¿ç•™</strong>ã€‚</li>
<li>é—­åŒ…ç›¸å…³çš„äº‰è®ºï¼Œå¾€å¾€ä¸æ˜¯â€œå¯¹é”™â€ï¼Œè€Œæ˜¯ <strong>è®¨è®ºå£å¾„ï¼ˆå¹¿ä¹‰/ç‹­ä¹‰ï¼‰ä¸åŒ</strong>ã€‚</li>
<li>çœŸæ­£å·¥ç¨‹é£é™©æ¥è‡ªï¼š<strong>é—­åŒ…è®©æŸäº›å¯¹è±¡å˜æˆâ€œé•¿æœŸå¯è¾¾â€</strong> ï¼Œä»è€Œå½±å“ GCã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸€ã€é—­åŒ…åˆ°åº•æ˜¯ä»€ä¹ˆï¼šå®šä¹‰ã€è‡ªç”±å˜é‡ä¸è¯æ³•ç»‘å®š</h2>
<h3 data-id="heading-5">1.1 é—­åŒ…çš„æ¦‚å¿µå®šä¹‰ï¼šæŠŠâ€œæ„Ÿè§‰â€å˜æˆâ€œå¯è¯æ˜â€</h3>
<p>é—­åŒ…å¹¶ä¸æ˜¯ JavaScript ç‹¬æœ‰ã€‚è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé—­åŒ…ï¼ˆClosureï¼‰åˆç§°<strong>è¯æ³•é—­åŒ…</strong>ï¼ˆLexical Closureï¼‰ï¼Œæ˜¯ä¸€ç§åœ¨æ”¯æŒ<strong>å¤´ç­‰å‡½æ•°</strong>çš„è¯­è¨€ä¸­å®ç°<strong>è¯æ³•ç»‘å®š</strong>çš„æŠ€æœ¯ï¼šé—­åŒ…åœ¨å®ç°ä¸Šå¯ä»¥ç†è§£ä¸ºâ€œ<strong>å‡½æ•° + å…³è”ç¯å¢ƒï¼ˆè‡ªç”±å˜é‡çš„ç»‘å®šï¼‰</strong> â€çš„ç»„åˆç»“æ„ã€‚</p>
<p>åœ¨ JavaScript è¯­å¢ƒä¸‹ï¼Œå¯ä»¥ç”¨æ›´å·¥ç¨‹åŒ–çš„è¡¨è¾¾ï¼š</p>
<blockquote>
<p><strong>é—­åŒ… = ä¸€ä¸ªå‡½æ•° + è¯¥å‡½æ•°åœ¨å®šä¹‰æ—¶å¯è®¿é—®çš„å¤–å±‚ä½œç”¨åŸŸå¼•ç”¨ï¼ˆè‡ªç”±å˜é‡æ‰€åœ¨çš„è¯æ³•ç¯å¢ƒï¼‰ã€‚</strong></p>
</blockquote>
<p>è¿™é‡Œæœ€å…³é”®çš„æ˜¯ä¸¤ä¸ªè¯ï¼š</p>
<ul>
<li><strong>è‡ªç”±å˜é‡</strong>ï¼šè·¨å‡ºè‡ªå·±ä½œç”¨åŸŸã€æ¥è‡ªå¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼ˆâ€œä¸æ˜¯æˆ‘å®¶é‡Œçš„å˜é‡ï¼Œä½†æˆ‘èƒ½ç”¨â€ï¼‰ã€‚</li>
<li><strong>è¯æ³•è§£æé˜¶æ®µç¡®å®š</strong>ï¼šå‡½æ•°â€œèƒ½è®¿é—®å“ªäº›å˜é‡â€ï¼Œåœ¨**ä»£ç å†™å‡ºæ¥é‚£ä¸€åˆ»ï¼ˆå®šä¹‰æ—¶ï¼‰**å°±å†³å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶éšæœºå†³å®šã€‚</li>
</ul>
<blockquote>
<p>ä¸€ä¸ªå¸¸ç”¨çš„å·¥ä½œè®°å¿†æ³•ï¼š <strong>â€œå‡½æ•°å®šä¹‰æ—¶å°±æŠŠå¤–å±‚ç¯å¢ƒâ€˜é”â€™ä½äº†â€</strong> ã€‚åç»­ä½ æŠŠå‡½æ•°æ‹¿åˆ°å“ªé‡Œè°ƒç”¨ï¼Œå®ƒéƒ½æ²¿ç€å½“åˆé”å®šçš„é“¾å»æ‰¾å˜é‡ã€‚</p>
</blockquote>
<h3 data-id="heading-6">1.2 å¹¿ä¹‰ vs ç‹­ä¹‰ï¼šå›¢é˜Ÿæ²Ÿé€šæ—¶è¦å…ˆç»Ÿä¸€å£å¾„</h3>
<p>ç¤¾åŒºå¯¹â€œä»€ä¹ˆç®—é—­åŒ…â€å¸¸è§ä¸¤ç§å£å¾„ï¼š</p>
<ul>
<li><strong>å¹¿ä¹‰</strong>ï¼šJS é‡Œâ€œå‡½æ•°â€å‡ ä¹éƒ½å¸¦ç€è¯æ³•ä½œç”¨åŸŸä¿¡æ¯ï¼Œå› æ­¤éƒ½å¯ä»¥å«é—­åŒ…ã€‚</li>
<li><strong>ç‹­ä¹‰ï¼ˆæ›´ä¸¥è°¨ï¼‰</strong> ï¼šåªæœ‰å½“å‡½æ•°<strong>å®é™…æ•è·å¹¶ä½¿ç”¨</strong>å¤–å±‚å˜é‡ï¼Œæ‰è®¨è®ºâ€œé—­åŒ…å¸¦æ¥çš„æ•ˆæœâ€ï¼ˆæ¯”å¦‚å˜é‡é©»ç•™ï¼‰ã€‚</li>
</ul>
<p>ä¸‹é¢è¿™æ®µä»£ç å°±ä½“ç°äº†å·®å¼‚ç‚¹ï¼šå®ƒèƒ½è®¿é—® <code>name</code>ï¼Œä½†æ˜¯å¦æŠŠå®ƒè§†ä¸ºâ€œé—­åŒ…â€ï¼ˆä¸¥æ ¼æ„ä¹‰ï¼‰çœ‹ä½ ç«™å“ªç§å£å¾„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯ä»¥è®¿é—® nameï¼štest ç®—é—­åŒ…ï¼ˆå¹¿ä¹‰ï¼‰</span>
<span class="hljs-comment">// æœ‰è®¿é—®åˆ° nameï¼štest ç®—é—­åŒ…ï¼ˆæ›´ä¸¥è°¨ï¼Œè®¨è®ºâ€œé—­åŒ…æ•ˆæœâ€æ›´æœ‰æ„ä¹‰ï¼‰</span>
<span class="hljs-keyword">var</span> name = <span class="hljs-string">"æ”¾å¯’å‡äº†"</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name);
}
<span class="hljs-title function_">test</span>();
</code></pre>
<h3 data-id="heading-7">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>å›¢é˜Ÿè®¨è®ºé—­åŒ…å‰ï¼Œå…ˆæ˜ç¡®å£å¾„ï¼š<strong>è®¨è®ºâ€œé—­åŒ…æœºåˆ¶â€è¿˜æ˜¯â€œé—­åŒ…æ•ˆæœï¼ˆå˜é‡é©»ç•™ï¼‰â€</strong> ã€‚</li>
<li>è®°ä½é—­åŒ…æ ¸å¿ƒï¼š<strong>å®šä¹‰æ—¶é”å®šè¯æ³•ç¯å¢ƒ</strong>ï¼Œä¸æ˜¯è°ƒç”¨æ—¶å†³å®šã€‚</li>
<li>æ‰€è°“â€œè‡ªç”±å˜é‡â€ï¼Œæœ¬è´¨å°±æ˜¯ï¼š<strong>è·¨ä½œç”¨åŸŸè®¿é—®çš„å˜é‡</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">äºŒã€ä»è°ƒç”¨æ ˆçœ‹é—­åŒ…ï¼šé«˜é˜¶å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼ˆGO / AO / FECï¼‰</h2>
<p>é—­åŒ…å¾ˆå®¹æ˜“è¢«è®²æˆâ€œæ¦‚å¿µâ€ï¼Œä½†å·¥ç¨‹ä¸Šè¦åšåˆ°â€œå¯æ§â€ï¼Œä¸€å®šè¦è½åˆ°æ‰§è¡Œè¿‡ç¨‹ï¼š<strong>è°ƒç”¨æ ˆå¦‚ä½•åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŸAO/GO ä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Ÿå¼•ç”¨é“¾æ€æ ·å½¢æˆå¯è¾¾æ€§ï¼Ÿ</strong></p>
<h3 data-id="heading-9">2.1 å…ˆçœ‹ä¸€ä¸ªæœ€å°é«˜é˜¶å‡½æ•°ï¼šè¿”å›å‡½æ•°æŒ‡é’ˆå‘ç”Ÿäº†ä»€ä¹ˆ</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-comment">// bar é¢„è§£æï¼Œå‰é¢æœ‰è®²è¿‡</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>) </span>{
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"å°å´"</span>);
  }
  <span class="hljs-keyword">return</span> bar;
}

<span class="hljs-keyword">var</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-title">foo</span>(<span class="hljs-params"/>)</span>;

<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>;
<span class="hljs-comment">// å°å´</span>
</code></pre>
<p>å…³é”®ç‚¹ï¼š<strong>è°ƒç”¨å‡½æ•°ä¼šåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</strong> ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºå‰ï¼Œä¼šå…ˆåˆ›å»ºå¯¹åº”çš„ <strong>AOï¼ˆActivation Objectï¼‰</strong> ï¼šç”¨äºå­˜æ”¾å½¢å‚ã€å±€éƒ¨å˜é‡ã€å‡½æ•°å£°æ˜ç­‰ã€‚</p>
<h3 data-id="heading-10">2.2 å†…å­˜å›¾ï¼šä»â€œæ ˆ/å †â€è§†è§’ç†è§£ <code>fn = foo()</code> çš„æ„ä¹‰</h3>
<blockquote>
<p>å»ºè®®æŠŠè¿™ä¸€æ®µå½“æˆé—­åŒ…å…¨ç¯‡çš„â€œåº•åº§â€ï¼Œåé¢æ‰€æœ‰é—­åŒ…/æ³„æ¼/å›æ”¶éƒ½åœ¨é‡å¤è¿™ä¸ªç»“æ„ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07bb612aa1bf4c11bf15f92122c9f2fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=7eKY%2BMsGiQ99YG5DDEy2CT27wRI%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-2 é«˜é˜¶å‡½æ•°æ‰§è¡Œå‰**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c171432b1871484d8ef3c786b332b0b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=pFm9jys%2FzADxJPXKlauLD6UOt6Q%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-3 fooå‡½æ•°è°ƒç”¨é˜¶æ®µå†…å­˜å›¾**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18273724433646b3857415a33fe5a19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=R1ZVuPdj76dutr5kEpofWq8KeIw%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-4 fooå‡½æ•°ä¸­çš„barå‡½æ•°è°ƒç”¨é˜¶æ®µå†…å­˜å›¾**</p>
<p>æŠŠå›¾ 7-2 ~ 7-4 ç”¨ä¸€å¥è¯ä¸²èµ·æ¥ï¼š</p>
<ul>
<li><code>foo()</code> è°ƒç”¨æ—¶åˆ›å»º <code>foo</code> çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ AOï¼›</li>
<li><code>bar</code> å‡½æ•°å¯¹è±¡å­˜åœ¨äºå †ä¸Šï¼Œ<code>foo</code> çš„ AO é‡Œä¿å­˜äº†å®ƒçš„å¼•ç”¨ï¼›</li>
<li><code>return bar</code> è®©å…¨å±€ <code>fn</code> æŒ‡å‘ <code>bar</code> çš„å‡½æ•°å¯¹è±¡åœ°å€ï¼›</li>
<li>åç»­ <code>fn()</code> æœ¬è´¨æ˜¯åœ¨æ‰§è¡Œ <code>bar()</code>ã€‚</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆï¼š<strong><code>return</code> è¿”å›çš„ä¸æ˜¯å‡½æ•°ä½“ï¼Œè€Œæ˜¯â€œå‡½æ•°å¯¹è±¡çš„æŒ‡é’ˆâ€</strong> ã€‚<code>fn</code> æ¥ä½è¿™ä¸ªæŒ‡é’ˆåï¼Œå°±å’Œ <code>bar</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šäº†ã€‚</p>
<h3 data-id="heading-11">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>AO æ˜¯â€œå‡½æ•°å³å°†æ‰§è¡Œå‰â€åˆ›å»ºçš„ï¼Œä¸æ˜¯å®šä¹‰å‡½æ•°æ—¶å°±åˆ›å»ºï¼ˆé¿å…æ— è°“å¼€é”€ï¼‰ã€‚</li>
<li><code>return function</code> çš„æœ¬è´¨æ˜¯ï¼š<strong>è¿”å›å †ä¸Šå‡½æ•°å¯¹è±¡çš„å¼•ç”¨</strong>ã€‚</li>
<li>åç»­ <code>fn()</code> æ‰§è¡Œçš„æ˜¯â€œé‚£å—å‡½æ•°å¯¹è±¡â€ï¼Œè€Œä¸æ˜¯é‡æ–°ç”Ÿæˆä¸€ä»½ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€é—­åŒ…å½¢æˆçš„å…³é”®ï¼šä¸ºä»€ä¹ˆ <code>[[scope]] / parentScope</code> èƒ½è®©å˜é‡è·¨å‡ºä¸Šä¸‹æ–‡</h2>
<p>ä¸Šä¸€ç« åªæ˜¯â€œè¿”å›äº†å‡½æ•°â€ã€‚é—­åŒ…çœŸæ­£â€œç¥å¥‡â€çš„ç‚¹åœ¨äºï¼š<strong>å¤–å±‚å‡½æ•°æ‰§è¡Œå®Œäº†ï¼Œå†…å±‚å‡½æ•°è¿˜èƒ½è®¿é—®å¤–å±‚å˜é‡</strong>ã€‚</p>
<p>æ¥çœ‹è¿™ä¸ªä¾‹å­</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">var</span> name = <span class="hljs-string">"why"</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>) </span>{
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"å°å´"</span>, name);
  }
  <span class="hljs-keyword">return</span> bar;
}

<span class="hljs-keyword">var</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-title">foo</span>(<span class="hljs-params"/>)</span>;

<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>;
<span class="hljs-comment">// å°å´ why</span>
</code></pre>
<p>å¦‚æœåªèƒŒæ¦‚å¿µä¼šè¯´ï¼šâ€œbar å¼•ç”¨äº† foo çš„å˜é‡ nameï¼Œæ‰€ä»¥å½¢æˆé—­åŒ…â€ã€‚ä½†å·¥ç¨‹ä¸Šæ›´é‡è¦çš„æ˜¯ <strong>â€œå®ƒå‡­ä»€ä¹ˆå¼•ç”¨å¾—åˆ°ï¼Ÿâ€</strong> â€”â€”ç­”æ¡ˆæ˜¯ï¼š<strong>å‡½æ•°å¯¹è±¡å†…éƒ¨ä¼šä¿å­˜å®šä¹‰æ—¶çš„å¤–å±‚ä½œç”¨åŸŸå¼•ç”¨ï¼ˆå¸¸è¢«æè¿°ä¸º <code>[[scope]] / parentScope</code>ï¼‰</strong> ã€‚</p>
<h3 data-id="heading-13">3.1 å‘ç”Ÿäº†ä»€ä¹ˆï¼šæŠŠâ€œè®¿é—®å¤–å±‚å˜é‡â€å†™æˆä¸€æ¡å¯æ‰§è¡Œçš„æŸ¥æ‰¾é“¾</h3>
<p><code>bar()</code> æ‰§è¡Œæ—¶è¦æŸ¥ <code>name</code>ï¼š</p>
<ol>
<li>å…ˆæŸ¥è‡ªå·±çš„ VO/AOï¼ˆ<code>bar</code> çš„æ´»åŠ¨å¯¹è±¡ï¼‰â€”â€”æ²¡æœ‰ã€‚</li>
<li>æ²¿ç€å‡½æ•°å¯¹è±¡è®°å½•çš„ <code>parentScope</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>foo</code> çš„ AOï¼‰ç»§ç»­æŸ¥â€”â€”æ‰¾åˆ°äº†ã€‚</li>
<li>è¾“å‡º <code>why</code>ã€‚</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé—­åŒ…å¹¶ä¸æ˜¯â€œè®©å˜é‡ä¸é”€æ¯â€çš„é­”æ³•ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong><code>bar</code> çš„å‡½æ•°å¯¹è±¡æ¡ä½äº† <code>foo</code> çš„ AO å¼•ç”¨ï¼Œä½¿å¾—è¿™å— AO å¯¹ GC æ¥è¯´ä¸€ç›´æ˜¯â€œå¯è¾¾çš„â€ã€‚</strong></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ffe2e56f0f4e51b50aaccd6b0419ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=cPiTS%2Fqx20OVbpS3TrlSRJ9X%2BBU%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-5 barå‡½æ•°ä¸­çš„nameå½¢æˆé—­åŒ…å†…å­˜å›¾**</p>
<h3 data-id="heading-14">3.2 å¸¸è§è¯¯åŒºï¼šé—­åŒ… â‰  æ‰§è¡Œä¸Šä¸‹æ–‡æ°¸è¿œä¸é”€æ¯</h3>
<p>ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„ç‚¹ï¼š<strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆFECï¼‰ä¼šé”€æ¯</strong>ï¼Œä½† <strong>AO æ˜¯å¦å¯å›æ”¶</strong> å–å†³äºæœ‰æ²¡æœ‰è¢«å¤–ç•Œå¼•ç”¨é“¾ä¿æŒå¯è¾¾ã€‚</p>
<ul>
<li><code>foo()</code> çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»è°ƒç”¨æ ˆå¼¹å‡ºï¼Œè¿™æ˜¯å¿…ç„¶çš„ï¼›</li>
<li>ä½† <code>foo</code> çš„ AO å¦‚æœè¢« <code>bar</code> çš„ <code>parentScope</code> å¼•ç”¨ç€ï¼Œå¹¶ä¸” <code>bar</code> åˆè¢« <code>fn</code> å¼•ç”¨ç€ï¼Œé‚£ä¹ˆå®ƒå°±ä»ç„¶å¯è¾¾ï¼Œæ— æ³•å›æ”¶ï¼›</li>
<li>â€œé—­åŒ…æ•ˆæœâ€æ¥è‡ªè¿™æ¡å¼•ç”¨é“¾ï¼Œè€Œä¸æ˜¯æ¥è‡ªâ€œæ‰§è¡Œä¸Šä¸‹æ–‡ä¸é”€æ¯â€ã€‚</li>
</ul>
<h3 data-id="heading-15">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>é—­åŒ…çš„åº•å±‚æŠ“æ‰‹æ˜¯ï¼š<strong>å‡½æ•°å¯¹è±¡æŒæœ‰ <code>parentScope</code>ï¼ˆè¯æ³•ç¯å¢ƒå¼•ç”¨ï¼‰</strong> ã€‚</li>
<li>â€œå˜é‡æ²¡è¢«å›æ”¶â€ä¸æ˜¯å› ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡ä¸å¼¹æ ˆï¼Œè€Œæ˜¯å› ä¸º <strong>å¯¹è±¡ä»å¯è¾¾</strong>ã€‚</li>
<li>è§£é‡Šé—­åŒ…æ—¶ï¼ŒæŠŠâ€œæŸ¥æ‰¾é“¾â€è®²å‡ºæ¥ï¼Œå›¢é˜Ÿæ²Ÿé€šä¼šæ›´ä¸€è‡´ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-16">å››ã€å†…å­˜è§†è§’ï¼šæ™®é€šå‡½æ•° vs é—­åŒ…å‡½æ•°ï¼Œå˜é‡ä¸ºä»€ä¹ˆå›æ”¶/ä¸å›æ”¶</h2>
<h3 data-id="heading-17">4.1 æ™®é€šå‡½æ•°ï¼šæ‰§è¡Œå®Œå°±â€œè‡ªç”±å˜é‡ä¸è‡ªç”±â€äº†</h3>
<pre><code class="hljs language-ini" lang="ini">function foo() {
  var <span class="hljs-attr">name</span> = <span class="hljs-string">"xiaowu"</span><span class="hljs-comment">;</span>
  var <span class="hljs-attr">age</span> = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
}

function test() {
  console.log("test")<span class="hljs-comment">;</span>
}

foo()<span class="hljs-comment">;</span>
test()<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/938b26f9e5094ca590b68bd2e3dc42cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=rY%2BBe0XIfBk%2BCvmCQQVJMbluUv4%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-6 fooä¸testå‡½æ•°æ‰§è¡Œå‰çš„åˆå§‹åŒ–è¡¨ç°**</p>
<p>è¿™å¼ å›¾å¼ºè°ƒï¼šå…¨å±€ GO ä¸­ä¿å­˜çš„æ˜¯å‡½æ•°å¯¹è±¡å¼•ç”¨ï¼›å‡½æ•°å¯¹è±¡é‡Œä¿å­˜äº† <code>parentScope</code> æŒ‡å‘ GOï¼›è°ƒç”¨æ—¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ä¸ AOã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a6a08a2991f4c2789cce2266691d628~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=6rayJ0bDUlqyBt%2Bu%2BkWSDIyzYpk%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-7 fooå‡½æ•°å’Œtestå‡½æ•°çš„å†…å­˜å›¾æ‰§è¡Œè¿‡ç¨‹**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b979adce5bd4dae8769a805ede4c59b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=6a6E880XmQveY%2BdLGQiKmo4zsdY%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-8 fooçš„æ‰§è¡Œä¸Šä¸‹æ–‡é”€æ¯å‰åå¯¹æ¯”**</p>
<p>å…³é”®ç»“è®ºåœ¨å›¾ 7-8ï¼š<strong>foo æ‰§è¡Œç»“æŸï¼ŒAO é‡Œ <code>name/age</code> æ²¡æœ‰è¢«ä»»ä½•å¤–éƒ¨å¼•ç”¨é“¾æŒæœ‰ï¼Œäºæ˜¯å˜ä¸ºä¸å¯è¾¾ï¼Œè¢«å›æ”¶</strong>ã€‚è¿™å°±æ˜¯â€œè‡ªç”±å˜é‡æ²¡èƒ½çœŸçš„è‡ªç”±â€ã€‚</p>
<h3 data-id="heading-18">4.2 é—­åŒ…å‡½æ•°ï¼šAO è¢«å¤–éƒ¨å¼•ç”¨é“¾é”ä½ï¼Œå˜é‡é©»ç•™</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">var</span> name = <span class="hljs-string">"xiaowu"</span>;
  <span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>) </span>{
    <span class="hljs-comment">// å¼•ç”¨äº†å¤–å±‚å˜é‡ï¼Œå½¢æˆé—­åŒ…</span>
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"è¿™æ˜¯æˆ‘çš„åå­—"</span>, name);
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"è¿™æ˜¯æˆ‘çš„å¹´é¾„"</span>, age);
  }

  <span class="hljs-keyword">return</span> bar;
}

<span class="hljs-keyword">var</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-title">foo</span>(<span class="hljs-params"/>)</span>;
<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>;
<span class="hljs-comment">// è¿™æ˜¯æˆ‘çš„åå­— xiaowu</span>
<span class="hljs-comment">// è¿™æ˜¯æˆ‘çš„å¹´é¾„ 20</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ae9a99d740f4b3a8a22d8085283326c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=zPYoV40RD9lciGOTEHv3yJeo1Gk%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-9 é—­åŒ…æ‰§è¡Œå‰å†…å­˜å›¾**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c44bd167e7d4ce39d1a5f70f7cf10ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=FjpVMibCRYp7jEOzYzbVlnompgg%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-10 fooå‡½æ•°æ‰§è¡Œå†…å­˜å›¾**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4348e96efb047e9a12c7180893fc061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=S3x6Y001CcgeO3Cv0EUTM2GBL7U%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-11 barçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f46090704142da9614eecd8bbd7a6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=sw4TIgkC1vSyU3%2FykeMAMJpAawI%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-12 barè„±ç¦»æ•æ‰æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œè‡ªç”±å˜é‡ä¾æ—§å­˜åœ¨**</p>
<p>å›¾ 7-12 æ˜¯é—­åŒ…â€œå¯è§£é‡Šâ€çš„å…³é”®ç”»é¢ï¼š</p>
<ul>
<li><code>fn -&gt; barå‡½æ•°å¯¹è±¡</code>ï¼ˆå…¨å±€æ ¹å¯¹è±¡å¯è¾¾ï¼‰</li>
<li><code>barå‡½æ•°å¯¹è±¡ -&gt; parentScope -&gt; foo çš„ AO</code></li>
<li>å› ä¸ºè¿™æ¡é“¾å­˜åœ¨ï¼Œæ‰€ä»¥ <code>foo AO</code> ä»å¯è¾¾ï¼Œ<code>name/age</code> ä»å¯è¾¾</li>
</ul>
<h3 data-id="heading-19">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>æ™®é€šå‡½æ•°æ‰§è¡Œå®Œï¼šAO é€šå¸¸ä¸å¯è¾¾ â†’ å›æ”¶ã€‚</li>
<li>é—­åŒ…èƒ½é©»ç•™å˜é‡ï¼šæœ¬è´¨æ˜¯ <strong>AO è¢«å‡½æ•°å¯¹è±¡çš„ parentScope å¼•ç”¨ï¼Œå¹¶ä¸”å‡½æ•°å¯¹è±¡åˆè¢«æ ¹å¯¹è±¡å¼•ç”¨</strong>ã€‚</li>
<li>æ˜¯å¦å›æ”¶ï¼Œå½’æ ¹åˆ°åº•çœ‹ï¼š<strong>ä»æ ¹å¯¹è±¡å‡ºå‘æ˜¯å¦å¯è¾¾</strong>ï¼ˆæ ‡è®°æ¸…é™¤çš„æ ¸å¿ƒåˆ¤æ–­ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-20">äº”ã€é—­åŒ…ä¸å†…å­˜æ³„æ¼ï¼šä»€ä¹ˆæ—¶å€™æ˜¯â€œæ­£å¸¸é©»ç•™â€ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯â€œæ³„æ¼â€</h2>
<p>é—­åŒ…ä¼šè®©å˜é‡é©»ç•™ï¼Œä½†<strong>é©»ç•™ â‰  æ³„æ¼</strong>ã€‚å·¥ç¨‹ä¸Šåˆ¤æ–­æ³„æ¼çš„æ ‡å‡†éå¸¸æœ´ç´ ï¼š</p>
<blockquote>
<p><strong>æœ¬è¯¥é‡Šæ”¾ã€å´å› ä¸ºä¸å¿…è¦çš„å¼•ç”¨é“¾è€Œé•¿æœŸå¯è¾¾çš„å†…å­˜ï¼Œå ç”¨ä¸æ–­å¢é•¿æˆ–é•¿æ—¶é—´ä¸ä¸‹é™ã€‚</strong></p>
</blockquote>
<p>åœ¨é—­åŒ…è¯­å¢ƒé‡Œï¼Œå¸¸è§æ³„æ¼æ¨¡å¼å°±æ˜¯ï¼š<strong>è¿”å›çš„å‡½æ•°è¢«é•¿æœŸä¿å­˜ï¼ˆå…¨å±€æ•°ç»„/ç¼“å­˜/äº‹ä»¶å›è°ƒ/å®šæ—¶å™¨ï¼‰ï¼Œå¯¼è‡´å…¶æ•è·çš„å¤–å±‚ AO ä¸€ç›´å¯è¾¾</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-21">å…­ã€å¦‚ä½•é‡Šæ”¾ï¼šæœ€å°åŒ–é—­åŒ…ä½œç”¨åŸŸã€è§£é™¤å¼•ç”¨ã€å¼±å¼•ç”¨æ€è·¯</h2>
<h3 data-id="heading-22">6.1 è§£å†³ç­–ç•¥ä¸‰ä»¶å¥—</h3>
<ol>
<li><strong>æœ€å°åŒ–é—­åŒ…ä½œç”¨åŸŸ</strong>ï¼šåªæ•è·å¿…è¦æ•°æ®ï¼ˆä¸è¦æŠŠæ•´å¨å¯¹è±¡/å¤§æ•°ç»„/DOM èŠ‚ç‚¹é¡ºæ‰‹é—­åŒ…è¿›å»ï¼‰ã€‚</li>
<li><strong>è§£é™¤å¼•ç”¨</strong>ï¼šç”¨å®Œå°±æ–­å¼€å¼•ç”¨é“¾ï¼Œè®©å¯¹è±¡ä»æ ¹ä¸å¯è¾¾ã€‚</li>
<li><strong>å¼±å¼•ç”¨ï¼ˆWeakMap/WeakSetï¼‰</strong> ï¼šå¯¹â€œç¼“å­˜ç±»â€åœºæ™¯éå¸¸æœ‰æ•ˆï¼ˆä¸ä¼šé˜»æ­¢ GCï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-23">6.2 â€œè§£é™¤å¼•ç”¨â€çš„æ ‡å‡†å†™æ³•ï¼šæŠŠ <code>fn</code> æŒ‡å‘ <code>null</code></h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å†…å­˜æ³„æ¼è§£å†³æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">var</span> name = <span class="hljs-string">"xiaowu"</span>;
  <span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"/>) </span>{
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"è¿™æ˜¯æˆ‘çš„åå­—"</span>, name);
    console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"è¿™æ˜¯æˆ‘çš„å¹´é¾„"</span>, age);
  }

  <span class="hljs-keyword">return</span> test;
}

<span class="hljs-keyword">var</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-title">foo</span>(<span class="hljs-params"/>)</span>;
<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>;

<span class="hljs-comment">// è§£é™¤å¼•ç”¨ï¼šæ–­å¼€ root -&gt; fn -&gt; å‡½æ•°å¯¹è±¡ -&gt; AO çš„é“¾</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-title">null</span></span>; <span class="hljs-comment">// æ³¨æ„ï¼šç½® null ä¸ä¼šç«‹åˆ»å›æ”¶ï¼Œä¼šåœ¨åç»­ GC å‘¨æœŸä¸­å›æ”¶</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/668f57b5a85444d083de958b78b0800f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=PwpDCN%2FQfiVAdWGiIsn0sEqEpSI%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-13 fnæŒ‡å‘barçš„æŒ‡é’ˆ**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f22d0013d114cf997baaca588a5da2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=q1djT4hRd%2F8HpvjslKexdIcRNKo%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-14 fnæŒ‡å‘barçš„æŒ‡é’ˆç½®ä¸ºnull**</p>
<p>å›¾ 7-14 çš„â€œå­¤å²›â€æ˜¯ä½ éœ€è¦åœ¨è„‘å­é‡Œå½¢æˆçš„è‚Œè‚‰è®°å¿†ï¼š<br/>
<strong>åªè¦æ ¹å¯¹è±¡åˆ°ä¸äº†è¿™å—å†…å­˜ï¼Œå®ƒè¿Ÿæ—©ä¼šè¢«å›æ”¶</strong>ï¼ˆæ ‡è®°æ¸…é™¤çš„å¯è¾¾æ€§åˆ¤æ–­ï¼‰ã€‚</p>
<h3 data-id="heading-24">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>é‡Šæ”¾é—­åŒ…çš„æ ¸å¿ƒåŠ¨ä½œï¼š<strong>æ–­å¼€æ ¹å¯¹è±¡åˆ°å‡½æ•°å¯¹è±¡çš„å¼•ç”¨é“¾</strong>ï¼ˆå¸¸è§æ˜¯ç½® <code>null</code> / ç§»é™¤ç›‘å¬ / æ¸…ç†æ•°ç»„ç¼“å­˜ï¼‰ã€‚</li>
<li>è®¾è®¡é—­åŒ…æ—¶å…ˆé—®ä¸€å¥ï¼š <strong>â€œæˆ‘çœŸçš„éœ€è¦æ•è·æ•´ä¸ªå¯¹è±¡/å¤§æ•°ç»„/DOM å—ï¼Ÿâ€</strong></li>
<li>ç¼“å­˜åœºæ™¯ä¼˜å…ˆè€ƒè™‘ï¼š<strong>WeakMap/WeakSet</strong>ï¼ˆé¿å…â€œç¼“å­˜è¶Šç”¨è¶Šå¤§â€ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-25">ä¸ƒã€é—­åŒ…æ³„æ¼æ¡ˆä¾‹ï¼šå¤§å¯¹è±¡è¢«é—­åŒ…æ•è·ï¼Œå†…å­˜ä¸è€—æ—¶å¦‚ä½•çˆ†ç‚¸</h2>
<p>ä¸ºäº†æŠŠé—®é¢˜è®²â€œåˆºç—›â€ï¼Œç”¨ä¸€ä¸ªæç«¯ä½†å¾ˆçœŸå®çš„ä¾‹å­ï¼šé—­åŒ…æ•è·ä¸€ä¸ªå¤§æ•°ç»„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createFnArray</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º1024*1024çš„æ•°ç»„ï¼Œå¾€é‡Œé¢æ¯ä¸ªä½ç½®å¡«å……1.è§‚å¯Ÿå äº†å¤šå°‘çš„å†…å­˜ç©ºé—´(intç±»å‹ï¼Œæ•´æ•°1å 4ä¸ªå­—èŠ‚byte)</span>
  <span class="hljs-comment">// 4byte*1024=4kbï¼Œå†*1024ä¸º4mbï¼Œå æ®çš„ç©ºé—´æ˜¯4M Ã— 100 + å…¶ä»–çš„å†…å­˜ = 400M+</span>
  <span class="hljs-comment">// åœ¨jsé‡Œé¢ä¸ç®¡æ˜¯æ•´æ•°ç±»å‹è¿˜æ˜¯æµ®ç‚¹æ•°ç±»å‹ï¼Œçœ‹èµ·æ¥éƒ½æ˜¯æ•°å­—ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™å æ®çš„éƒ½æ˜¯8å­—èŠ‚ï¼Œä½†æ˜¯jså¼•æ“ä¸ºäº†æé«˜ç©ºé—´çš„åˆ©ç”¨ç‡ï¼Œå¯¹å¾ˆå¤šå°çš„æ•°å­—æ˜¯ç”¨ä¸åˆ°8ä¸ªå­—èŠ‚(byte)çš„ï¼Œ8å­—èŠ‚ = 2çš„64æ¬¡æ–¹ï¼Œæ‰€ä»¥8å­—èŠ‚æ˜¯å¾ˆå¤§çš„ï¼Œç°åœ¨çš„jså¼•æ“å¤§å¤šæ•°éƒ½ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå¯¹å°çš„æ•°å­—ç±»å‹ï¼Œåœ¨V8ä¸­ç§°ä¸ºSmiï¼Œå°æ•°å­— 2çš„32æ¬¡æ–¹</span>
  <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">1</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">length</span>);
  };
}

<span class="hljs-keyword">var</span> arrayFn = <span class="hljs-title function_">createFnArray</span>();
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f44d02d451164fc48aefe0818476e00d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=hwtr7vlbl3jblR3N8rqRRQDpLkk%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-15 é—­åŒ…æ³„éœ²æ¡ˆä¾‹**</p>
<p>å¦‚æœä½ æŠŠ <code>createFnArray()</code> åˆ›å»ºå‡ºæ¥çš„å‡½æ•°æŒç»­ä¿å­˜ï¼ˆæ¯”å¦‚ push è¿›æ•°ç»„ï¼‰ï¼Œå¼•ç”¨é“¾ä¼šä¸æ–­å åŠ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b73c30d842d14a03af28b8566a3232fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=v3adpfzNLSEhR3x9VUYif8m6J6Y%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-16 å¼•ç”¨å åŠ ï¼Œé—­åŒ…æ— æ³•é‡Šæ”¾**</p>
<h3 data-id="heading-26">7.1 ç”¨æ€§èƒ½å·¥å…·çœ‹â€œæ³„æ¼â€é•¿ä»€ä¹ˆæ ·</h3>
<p>åœ¨æµè§ˆå™¨ Performance é¢æ¿å‹¾é€‰ Memoryï¼Œåˆ·æ–°/æ‰§è¡Œåï¼Œä½ ä¼šçœ‹åˆ°è„šæœ¬è€—æ—¶æ˜¾è‘—å‡é«˜ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f9286297a86467583855e85ea6a638a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=WFke6mso1MbutEPgxY2RvtXIyDg%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-17 é—­åŒ…çš„æ€§èƒ½æ£€æµ‹**</p>
<h3 data-id="heading-27">7.2 é‡Šæ”¾åçš„å¯¹æ¯”ï¼šä¸ä¸€å®šç«‹åˆ»å›æ”¶ï¼Œä½†è¶‹åŠ¿ä¼šå›æ¥</h3>
<pre><code class="hljs language-ini" lang="ini">function createFnArray() {
  var <span class="hljs-attr">arr</span> = new Array(<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>).fill(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>

  return function () {
    console.log(arr.length)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}

var <span class="hljs-attr">arrayFns</span> = []<span class="hljs-comment">;</span>
for (var <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 100; i++) {</span>
  // createFnArray() // ä¸æ¥æ”¶å°±ä¼šå¾ˆå¿«å˜æˆä¸å¯è¾¾
  arrayFns.push(createFnArray())<span class="hljs-comment">;</span>
}

setTimeout(() =&gt; {
  <span class="hljs-attr">arrayFns</span> = null<span class="hljs-comment">; // å…³é”®ï¼šæ–­å¼€å¼•ç”¨é“¾</span>
}, 2000)<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1abec8bf4b2e4e19a52f7b6778a1c2d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=jvH4jsTBh4jv4%2FRbiBpjt1K8H%2BU%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-18 æ€§èƒ½æå‡æ•ˆæœ**</p>
<p>ä½ è¿˜èƒ½é€šè¿‡è°ƒç”¨æ ‘çœ‹åˆ°è€—æ—¶ä¸»è¦æ¥æºäºé—­åŒ…ç›¸å…³é€»è¾‘ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bae886e2577b48caa0ec91a9ec18caab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=e4mdk6tI4nGHyfrhQeLAqJD9%2FXM%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-19 é—­åŒ…è€—æ—¶æ¥æº**</p>
<h3 data-id="heading-28">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>é—­åŒ…æ³„æ¼å¸¸è§è§¦å‘å™¨ï¼š<strong>é—­åŒ…æ•è·å¤§å¯¹è±¡ + é•¿æœŸä¿å­˜é—­åŒ…å¼•ç”¨</strong>ï¼ˆæ•°ç»„/ç¼“å­˜/äº‹ä»¶/å®šæ—¶å™¨ï¼‰ã€‚</li>
<li>Performance å‹¾é€‰ Memoryï¼šå…³æ³¨ <strong>è„šæœ¬è€—æ—¶ + å†…å­˜æ›²çº¿æ˜¯å¦æŒç»­ä¸Šå‡</strong>ã€‚</li>
<li>â€œç½® nullâ€ä¸ä¿è¯ç«‹åˆ»å›æ”¶ï¼Œä½†èƒ½ä¿è¯ï¼š<strong>åç»­ GC å‘¨æœŸå…·å¤‡å›æ”¶æ¡ä»¶</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-29">å…«ã€å¼•æ“ä¼˜åŒ–ï¼šé—­åŒ…é‡Œâ€œæ²¡ç”¨åˆ°çš„å˜é‡â€ä¼šæ€æ ·ï¼ˆV8ï¼‰</h2>
<p>ä¸€ä¸ªå¾ˆå®ç”¨çš„é—®é¢˜ï¼šé—­åŒ…è®©å¤–å±‚ AO ä¸å›æ”¶ï¼Œé‚£ AO é‡Œ<strong>æ²¡ç”¨åˆ°çš„å±æ€§</strong>ä¼šä¸ä¼šä¹Ÿä¸€ç›´å ç€ï¼Ÿ</p>
<p>ä¾‹å­ï¼šé—­åŒ…åªç”¨ <code>name</code>ï¼Œæ²¡æœ‰ç”¨ <code>age</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function foo() {
  var <span class="hljs-attr">name</span> = <span class="hljs-string">"why"</span><span class="hljs-comment">;</span>
  var <span class="hljs-attr">age</span> = <span class="hljs-number">18</span><span class="hljs-comment">;</span>

  function bar() {
    debugger<span class="hljs-comment">;</span>
    console.log(name)<span class="hljs-comment">;</span>
  }

  return bar<span class="hljs-comment">;</span>
}

var <span class="hljs-attr">fn</span> = foo()<span class="hljs-comment">;</span>
fn()<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56f5062a91f248f6841ef63559e92bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=rb3kLzpnrKYqoR5biTWZLaM8avY%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-20 V8å¼•æ“ä¼˜åŒ–æ•ˆæœ(æœªä½¿ç”¨å˜é‡è¢«é”€æ¯)**</p>
<p>ç»§ç»­åœ¨ debugger æš‚åœæ—¶éªŒè¯ï¼š<code>name</code> èƒ½è®¿é—®ï¼Œ<code>age</code> å¯èƒ½å› ä¸ºæœªä½¿ç”¨è¢«ä¼˜åŒ–æ‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fee0b4211abd427daef68878db2e1537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770602315&amp;x-signature=2f8TZzsUN0U7nGEH8E%2FMUkSOVyw%3D" alt="" loading="lazy"/></p>
<p>** å›¾7-21 debuggeræ£€æµ‹æœªä½¿ç”¨çš„ageå˜é‡æ˜¯å¦çœŸè¢«å›æ”¶**</p>
<p>è¿™ç‚¹å¯¹å·¥ç¨‹å®è·µçš„å¯ç¤ºéå¸¸ç›´æ¥ï¼š</p>
<ul>
<li>è§„èŒƒä¸Šä½ å¯ä»¥è®¤ä¸ºâ€œé—­åŒ…ä¼šä¿ç•™æ•´ä¸ª AOâ€ï¼›</li>
<li>ä½†å¼•æ“å®ç°ä¼šåšé€ƒé€¸åˆ†æ/å˜é‡æå‡ä¼˜åŒ–ç­‰ï¼Œ<strong>å‡å°‘æ— ç”¨å˜é‡å ç”¨</strong>ï¼›</li>
<li><strong>ä¸è¦ä¾èµ–è¿™ç§ä¼˜åŒ–å†™ä»£ç </strong>ï¼šå®ƒæ˜¯å®ç°ç»†èŠ‚ï¼Œä¸æ˜¯ç¨³å®šå¥‘çº¦ï¼ˆå°¤å…¶è·¨å¼•æ“/è·¨ç‰ˆæœ¬ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-30">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>V8 å¯èƒ½å›æ”¶é—­åŒ…å¤–å±‚ AO ä¸­â€œæœªè¢«ä½¿ç”¨çš„å˜é‡â€ï¼ˆå®ç°ä¼˜åŒ–ï¼‰ã€‚</li>
<li>å·¥ç¨‹åˆ¤æ–­åˆ«é â€œå¼•æ“å¯èƒ½å¸®æˆ‘ä¼˜åŒ–â€ï¼Œä»ä»¥ <strong>å¼•ç”¨é“¾æ˜¯å¦å¯è¾¾</strong> ä¸ºä¸»ã€‚</li>
<li>è¯„å®¡æ—¶æ›´å…³æ³¨ï¼š<strong>é—­åŒ…æ˜¯å¦æ•è·äº†ä¸å¿…è¦çš„å¤§å¯¹è±¡/DOM/ä¸šåŠ¡ä¸Šä¸‹æ–‡</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-31">ä¹ã€è¿›é˜¶è¾¹ç•Œï¼šå¤šä¸ªé—­åŒ…å®ä¾‹å½¼æ­¤ç‹¬ç«‹ï¼›ä¸ºä»€ä¹ˆ <code>null</code> èƒ½æ–­å¼•ç”¨è€Œ <code>undefined</code> ä¸è¡Œ</h2>
<h3 data-id="heading-32">9.1 å¤šä¸ªé—­åŒ…å®ä¾‹ï¼šäº’ä¸å½±å“ï¼Œé‡Šæ”¾ä¹Ÿåªé‡Šæ”¾è‡ªå·±çš„é‚£ä»½</h3>
<p>åŒä¸€ä¸ª <code>foo()</code> è°ƒä¸¤æ¬¡ï¼Œå¾—åˆ°çš„æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„ AO ä¸å‡½æ•°å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function foo() {
  var <span class="hljs-attr">name</span> = <span class="hljs-string">"å°å´"</span><span class="hljs-comment">;</span>
  var <span class="hljs-attr">age</span> = <span class="hljs-number">18</span><span class="hljs-comment">;</span>

  function bar() {
    console.log(name)<span class="hljs-comment">;</span>
    console.log(age)<span class="hljs-comment">;</span>
  }

  return bar<span class="hljs-comment">;</span>
}

var <span class="hljs-attr">fn</span> = foo()<span class="hljs-comment">;</span>
fn()<span class="hljs-comment">;</span>

var <span class="hljs-attr">baz</span> = foo()<span class="hljs-comment">;</span>

<span class="hljs-attr">fn</span> = null<span class="hljs-comment">; // åªä¼šé‡Šæ”¾ fn å¯¹åº”çš„é‚£ä¸€å¥—å¼•ç”¨é“¾</span>
baz()<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ¡ç»“è®ºåœ¨å·¥ç¨‹é‡Œç‰¹åˆ«é‡è¦ï¼š<strong>ä½ æ¸…ç†äº†ä¸€ä¸ªå¼•ç”¨ï¼Œä¸ä»£è¡¨å…¨å±€éƒ½é‡Šæ”¾äº†</strong>ã€‚å¦‚æœä½ æŠŠé—­åŒ…å­˜è¿›å¤šä¸ªåœ°æ–¹ï¼ˆä¾‹å¦‚å¤šä¸ªæ•°ç»„ã€å¤šä¸ªäº‹ä»¶å›è°ƒã€å¤šä¸ªç¼“å­˜ï¼‰ï¼Œå°±éœ€è¦é€ä¸ªæ–­é“¾ã€‚</p>
<h3 data-id="heading-33">9.2 ä¸ºä»€ä¹ˆ <code>null</code> å¯ä»¥è§£é™¤å¼•ç”¨ï¼Œè€Œ <code>undefined</code> ä¸è¡Œï¼Ÿ</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆ <code>null</code> å¯ä»¥è§£é™¤å¼•ç”¨ï¼Œè€Œ <code>undefined</code> ä¸è¡Œï¼Ÿ</p>
<p>ä»â€œå¼•ç”¨é“¾â€çš„è§’åº¦çœ‹ï¼š</p>
<ul>
<li><code>null</code> æ˜¯ä¸€ä¸ªæ˜ç¡®çš„â€œç©ºå€¼â€ï¼ŒæŠŠå˜é‡æŒ‡å‘ç©ºå¤„ï¼Œç­‰ä»·äº <strong>æŠŠè¿™æ¡å¼•ç”¨è¾¹ç æ‰</strong>ã€‚</li>
<li><code>undefined</code> æ›´å¤šè¡¨è¾¾â€œæœªåˆå§‹åŒ–/ç¼ºçœå€¼â€ï¼Œå®ƒä¾ç„¶æ˜¯ä¸€ä¸ªå€¼ï¼›æ›´å…³é”®çš„æ˜¯ï¼Œåœ¨å¾ˆå¤šè¯­ä¹‰ä¸‹å®ƒå¹¶ä¸è¢«ç”¨ä½œâ€œä¸»åŠ¨æ–­é“¾â€çš„è¡¨è¾¾ï¼ˆå›¢é˜Ÿä»£ç è§„èŒƒä¹Ÿé€šå¸¸ä¸æ¨èç”¨ <code>undefined</code> è¡¨è¾¾é‡Šæ”¾ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>å·¥ç¨‹å»ºè®®ï¼š<strong>é‡Šæ”¾å¼•ç”¨è¯·ç”¨ <code>null</code></strong>ï¼ˆè¯­ä¹‰æ¸…æ™°ã€å›¢é˜Ÿå…±è¯†å¼ºã€ä¾¿äº code review ä¸é™æ€æ£€æŸ¥ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-34">æœ¬ç« å°ç»“ï¼ˆè½åœ°æ¸…å•ï¼‰</h3>
<ul>
<li>æ¯æ¬¡è°ƒç”¨å¤–å±‚å‡½æ•°ï¼Œéƒ½ä¼šåˆ›å»ºä¸€å¥—æ–°çš„ AO/å‡½æ•°å¯¹è±¡ï¼šé—­åŒ…å®ä¾‹å½¼æ­¤ç‹¬ç«‹ã€‚</li>
<li>é‡Šæ”¾å¼•ç”¨åªå½±å“å¯¹åº”é‚£æ¡é“¾ï¼š<strong>ä½ æ¸…ç†ä¸€ä¸ªï¼Œä¸ä¼šè‡ªåŠ¨æ¸…ç†æ‰€æœ‰</strong>ã€‚</li>
<li>æ–­é“¾ç”¨ <code>null</code>ï¼šè¡¨è¾¾â€œæˆ‘ä¸»åŠ¨é‡Šæ”¾â€ï¼Œæ¯” <code>undefined</code> æ›´æ¸…æ™°ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-35">åã€å®æˆ˜å»ºè®®ï¼šæŠŠâ€œé—­åŒ…å¯æ§â€è½åˆ°å›¢é˜Ÿå·¥ç¨‹è§„èŒƒé‡Œ</h2>
<p>ä¸‹é¢ç»™ä¸€ä»½å¯ä»¥ç›´æ¥æ”¾è¿›å›¢é˜Ÿâ€œä»£ç è¯„å®¡ checklist / æ€§èƒ½æ’æŸ¥ SOPâ€çš„æ¸…å•ã€‚</p>
<h3 data-id="heading-36">10.1 è¯„å®¡ Checklistï¼ˆé—­åŒ…ç›¸å…³ï¼‰</h3>
<ul>
<li><strong>æ•è·å†…å®¹æœ€å°åŒ–</strong>ï¼šé—­åŒ…é‡Œåªå¼•ç”¨å¿…è¦å­—æ®µï¼Œé¿å…æŠŠæ•´ä¸ª <code>props/state/context/å¤§å¯¹è±¡</code> æ•è·è¿›å»ã€‚</li>
<li><strong>é¿å…æ•è· DOM èŠ‚ç‚¹</strong>ï¼šå°¤å…¶æ˜¯é•¿ç”Ÿå‘½å‘¨æœŸçš„é—­åŒ…ï¼ˆäº‹ä»¶å›è°ƒ/å•ä¾‹ç¼“å­˜ï¼‰æ•è· DOMï¼Œä¼šè®©èŠ‚ç‚¹éš¾ä»¥å›æ”¶ã€‚</li>
<li><strong>é•¿ç”Ÿå‘½å‘¨æœŸå®¹å™¨è¦å¯æ¸…ç†</strong>ï¼šå…¨å±€æ•°ç»„ã€Map ç¼“å­˜ã€äº‹ä»¶æ€»çº¿ã€å®šæ—¶å™¨å›è°ƒâ€”â€”éƒ½è¦æœ‰å¯¹åº”çš„æ¸…ç†è·¯å¾„ã€‚</li>
<li><strong>ç»„ä»¶/é¡µé¢å¸è½½å¿…é¡»æ–­é“¾</strong>ï¼šç§»é™¤äº‹ä»¶ç›‘å¬ã€å–æ¶ˆè®¢é˜…ã€æ¸…ç†å®šæ—¶å™¨ã€æ¸…ç©ºç¼“å­˜å¼•ç”¨ï¼ˆ<code>= null</code>ï¼‰ã€‚</li>
<li><strong>ç¼“å­˜ä¼˜å…ˆ WeakMap</strong>ï¼škey æ˜¯å¯¹è±¡çš„ç¼“å­˜ï¼ˆå¦‚ DOM èŠ‚ç‚¹ã€ç»„ä»¶å®ä¾‹ï¼‰ä¼˜å…ˆ WeakMapï¼Œå‡å°‘â€œç¼“å­˜å¸¸é©»â€ã€‚</li>
</ul>
<h3 data-id="heading-37">10.2 æ’æŸ¥ SOPï¼ˆå†…å­˜/æ€§èƒ½ï¼‰</h3>
<ol>
<li>Performance å‹¾é€‰ Memoryï¼šå¤ç°æ“ä½œï¼Œè§‚å¯Ÿå†…å­˜æ›²çº¿æ˜¯å¦æŒç»­ä¸Šå‡ï¼ˆä¸å›è½ï¼‰ã€‚</li>
<li>å½•åˆ¶å¹¶çœ‹è°ƒç”¨æ ‘ï¼šå®šä½é«˜è€—æ—¶å‡½æ•°æ˜¯å¦æ¥è‡ªé—­åŒ…åˆ›å»º/å¤§å¯¹è±¡æ•è·ã€‚</li>
<li>ç¼©å°å¤ç°ï¼šæŠŠé—­åŒ…å¼•ç”¨å®¹å™¨ï¼ˆæ•°ç»„/ç¼“å­˜ï¼‰é€æ­¥ç½® <code>null</code>ï¼Œè§‚å¯Ÿè¶‹åŠ¿å˜åŒ–ï¼ˆä¸æ˜¯ç«‹åˆ»å›æ”¶ï¼Œä½†è¶‹åŠ¿ä¼šå˜ï¼‰ã€‚</li>
<li>æ£€æŸ¥å¼•ç”¨é“¾ï¼šè°åœ¨æŒæœ‰é—­åŒ…ï¼Ÿï¼ˆå…¨å±€å˜é‡ã€å•ä¾‹æ¨¡å—ã€äº‹ä»¶æ€»çº¿ã€å®šæ—¶å™¨ã€DOM ç›‘å¬å™¨æœ€å¸¸è§ï¼‰</li>
</ol>
<h3 data-id="heading-38">10.3 æŒ‡æ ‡éªŒè¯ï¼ˆå»ºè®®å›¢é˜Ÿå…±ç”¨ï¼‰</h3>
<ul>
<li><strong>å†…å­˜æŒ‡æ ‡</strong>ï¼šå…³é”®é¡µé¢æ“ä½œ 5 åˆ†é’Ÿåï¼ŒJS Heap æ˜¯å¦å¯ç¨³å®šå›è½åˆ°é˜ˆå€¼åŒºé—´</li>
<li><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼šå…³é”®äº¤äº’çš„ Long Task æ¬¡æ•°/æ€»è€—æ—¶æ˜¯å¦ä¸‹é™</li>
<li><strong>å›å½’éªŒè¯</strong>ï¼šå¢åŠ â€œå¸è½½/åˆ‡é¡µ/é‡å¤è¿›å…¥â€å‹æµ‹è„šæœ¬ï¼ŒéªŒè¯å¼•ç”¨é“¾ä¸ä¼šç´¯ç§¯</li>
</ul>
<hr/>
<h2 data-id="heading-39">æ€»ç»“ï¼šå…³é”®ç»“è®º + å›¢é˜Ÿè½åœ°å»ºè®®</h2>
<h3 data-id="heading-40">å…³é”®ç»“è®ºï¼ˆèƒŒä¸‹æ¥å°±å¤Ÿç”¨ï¼‰</h3>
<ul>
<li>é—­åŒ…çš„æœ¬è´¨æ˜¯ï¼š<strong>å‡½æ•°å¯¹è±¡æŒæœ‰å®šä¹‰æ—¶çš„å¤–å±‚ä½œç”¨åŸŸå¼•ç”¨ï¼ˆparentScope/è¯æ³•ç¯å¢ƒï¼‰</strong> ï¼Œä»è€Œè®©å¤–å±‚ AO ç»§ç»­å¯è¾¾ã€‚</li>
<li>æ˜¯å¦å›æ”¶ä¸çœ‹â€œå‡½æ•°æ‰§è¡Œæ²¡æ‰§è¡Œå®Œâ€ï¼Œåªçœ‹ <strong>ä»æ ¹å¯¹è±¡å‡ºå‘æ˜¯å¦å¯è¾¾</strong>ï¼ˆæ ‡è®°æ¸…é™¤çš„æ ¸å¿ƒï¼‰ã€‚</li>
<li>é—­åŒ…é€ æˆçš„é£é™©ä¸æ˜¯â€œç”¨äº†é—­åŒ…â€ï¼Œè€Œæ˜¯ï¼š<strong>é—­åŒ…æ•è·äº†ä¸è¯¥é•¿æœŸé©»ç•™çš„å¯¹è±¡ï¼Œå¹¶ä¸”é—­åŒ…å¼•ç”¨è¢«é•¿æœŸæŒæœ‰</strong>ã€‚</li>
<li>é‡Šæ”¾é—­åŒ…çš„å…³é”®åŠ¨ä½œæ˜¯ï¼š<strong>æ–­å¼€å¼•ç”¨é“¾</strong>ï¼ˆç½® <code>null</code>ã€ç§»é™¤ç›‘å¬ã€æ¸…ç©ºå®¹å™¨ã€å–æ¶ˆè®¢é˜…ç­‰ï¼‰ã€‚</li>
<li>å¼•æ“å¯èƒ½ä¼˜åŒ–æœªä½¿ç”¨å˜é‡ï¼ˆå¦‚ V8ï¼‰ï¼Œä½†å·¥ç¨‹ä¸Šä¸è¦ä¾èµ–å®ç°ç»†èŠ‚ï¼Œä»ä»¥å¼•ç”¨é“¾åˆ†æä¸ºå‡†ã€‚</li>
</ul>
<h3 data-id="heading-41">ä¸‹ä¸€æ­¥å»ºè®®ï¼ˆæ€ä¹ˆåœ¨å›¢é˜Ÿé‡ŒçœŸæ­£è½åœ°ï¼‰</h3>
<ol>
<li>æŠŠâ€œé—­åŒ…è¯„å®¡ checklistâ€åŠ å…¥ PR æ¨¡æ¿ï¼šæ¶‰åŠäº‹ä»¶ã€ç¼“å­˜ã€å®šæ—¶å™¨ã€è®¢é˜…æ—¶å¿…é¡»å‹¾é€‰æ¸…ç†é¡¹ã€‚</li>
<li>å»ºç«‹ 1~2 ä¸ªâ€œå…¸å‹æ³„æ¼ demoâ€ç”¨äº onboardingï¼šè®©æ–°äººç”¨ Performance/Memory äº²æ‰‹çœ‹è§â€œå¯è¾¾æ€§â€æ˜¯ä»€ä¹ˆã€‚</li>
<li>åœ¨å…³é”®ä¸šåŠ¡é¡µå¼•å…¥å®šæœŸå‹æµ‹ï¼ˆé‡å¤è¿›å…¥/é€€å‡º/æ»šåŠ¨/ç­›é€‰ç­‰ï¼‰ï¼Œç”¨æŒ‡æ ‡éªŒè¯â€œå†…å­˜å¯å›è½â€ã€‚</li>
<li>å¯¹ç¼“å­˜ç­–ç•¥åšç»Ÿä¸€çº¦æŸï¼šå¯¹è±¡ key çš„ç¼“å­˜ä¼˜å…ˆ WeakMapï¼›å…¨å±€æ•°ç»„ç¼“å­˜å¿…é¡»æä¾›æ¸…ç† APIã€‚</li>
</ol>
<p>åªè¦å›¢é˜Ÿèƒ½æŠŠé—­åŒ…ä»â€œè¯­æ³•ç‚¹â€å‡çº§æˆâ€œå¼•ç”¨é“¾ä¸å¯è¾¾æ€§â€çš„å…±è¯†ï¼Œé—­åŒ…å°±ä¼šä»â€œç„å­¦â€å˜æˆâ€œå¯æ§å·¥å…·â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­çš„åŒæ­¥ & äº’æ–¥]]></title>    <link>https://juejin.cn/post/7601486204173795378</link>    <guid>https://juejin.cn/post/7601486204173795378</guid>    <pubDate>2026-02-01T14:07:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601486204173795378" data-draft-id="7601374668961579058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­çš„åŒæ­¥ &amp; äº’æ–¥"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-01T14:07:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SereneDream"/> <meta itemprop="url" content="https://juejin.cn/user/4250057782345273"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­çš„åŒæ­¥ &amp; äº’æ–¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4250057782345273/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SereneDream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T14:07:45.000Z" title="Sun Feb 01 2026 14:07:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡å°è®°åå‘äºç†è®ºï¼Œå³ Java åº•å±‚æ˜¯æ€ä¹ˆå®ç°äº’æ–¥åŒæ­¥</p>
<p>é”æ˜¯ä¿¡å·é‡çš„ä¸€ä¸ªå­é›†ï¼Œç›®çš„å°±æ˜¯é€šè¿‡ PV æ“ä½œæ§åˆ¶ä¿¡å·é‡ä»è€Œä¿æŠ¤ä¸´ç•ŒåŒºä¸­çš„ä¸´ç•Œèµ„æº</p>
<p>ä¿¡å·é‡æ˜¯é”çš„è¶…é›†ï¼Œè€ŒPVæ“ä½œæ˜¯æ“ä½œä¿¡å·é‡çš„åŸè¯­ã€‚é”ï¼ˆäº’æ–¥é”ï¼‰æ˜¯ä¿¡å·é‡çš„ä¸€ç§ç‰¹æ®Šç”¨æ³•ï¼ˆåˆå§‹å€¼ä¸º1çš„ä¿¡å·é‡ï¼‰ã€‚å®ƒä»¬å…±åŒçš„ç›®æ ‡æ˜¯ä¸ºäº†ä¿æŠ¤ä¸´ç•ŒåŒºï¼Œä»è€Œå®ç°å®‰å…¨åœ°è®¿é—®ä¸´ç•Œèµ„æºã€‚PV æ“ä½œçš„ä½œç”¨å°±æ˜¯ä¸ºäº†å®ŒæˆåŒæ­¥å’Œäº’æ–¥è¿™ä¸¤ä¸ªåŠŸèƒ½</p>
<p>PV æ“ä½œæ˜¯ OS è‡ªå¸¦çš„åŸè¯­æ“ä½œï¼Œå†…æ ¸æ‰æœ‰é˜²æ­¢ä¸­æ–­çš„æƒé™ï¼Œå¹¶å‘å’Œå¹¶è¡Œæ˜¯äº§ç”Ÿæ•°æ®ä¸åŒæ­¥çš„æ ¹æœ¬åŸå› ï¼ŒPV æ“æ§é€šè¿‡æ§åˆ¶ä¿¡å·é‡æ¥äº’æ–¥åœ°è®¿é—®ä¸´ç•ŒåŒºä¸­çš„ä¸´ç•Œèµ„æºï¼Œè€Œé”æ˜¯ä¿¡å·é‡çš„ä¸€ä¸ªå­é›†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a7a7780cf2644c9a07069aafdd9acc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=gr9A8jv1U%2F9SEJ%2BDixsGtUc56io%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">é¢˜è®°</h2>
<p>è¿›ç¨‹ä¹‹é—´ä¸ºä»€ä¹ˆè¦å®ç°äº’æ–¥ï¼šä¸åŒè¿›ç¨‹ä¹‹é—´å¯èƒ½ä¼šå…±äº«æŸé¡¹èµ„æºã€‚</p>
<p>è¿›ç¨‹ä¹‹é—´ä¸ºä»€ä¹ˆè¦å®ç°åŒæ­¥ï¼šä¸åŒè¿›ç¨‹ä¹‹é—´çš„æ“ä½œå¯èƒ½ä¼šå­˜åœ¨å…ˆåå…³ç³»</p>
<h2 data-id="heading-1">ä¸´ç•Œèµ„æº &amp;&amp; ä¸´ç•ŒåŒº</h2>
<p>ä¸´ç•Œèµ„æºè¢«å­˜æ”¾åœ¨ä¸´ç•ŒåŒºä¸­ï¼ŒOS å¯ä»¥é€šè¿‡è®¿é—®ä¸´ç•ŒåŒºå»è®¿é—®å¯¹åº”çš„ä¸´ç•Œèµ„æº</p>
<ol>
<li>ä¸´ç•Œèµ„æº</li>
</ol>
<p>ä¸´ç•Œèµ„æºæ˜¯<strong>ä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„å…±äº«èµ„æº</strong>ã€‚å„è¿›ç¨‹é‡‡å–<strong>äº’æ–¥</strong>çš„æ–¹å¼ï¼Œå®ç°å…±äº«çš„èµ„æºç§°ä½œä¸´ç•Œèµ„æºã€‚</p>
<p>å±äºä¸´ç•Œèµ„æºçš„ç¡¬ä»¶æœ‰ï¼Œæ‰“å°æœºï¼Œç£å¸¦æœºç­‰ï¼›è½¯ä»¶æœ‰æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼Œç¼“å†²åŒºç­‰ã€‚è¯¸è¿›ç¨‹é—´é‡‡å–äº’æ–¥æ–¹å¼ï¼Œå®ç°å¯¹è¿™ç§èµ„æºçš„å…±äº«ã€‚</p>
<ol start="2">
<li>ä¸´ç•ŒåŒºï¼š</li>
</ol>
<p>æ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒºï¼ˆcriticalsectionï¼‰ï¼Œæ¯æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿›å…¥åï¼Œä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥ã€‚ä¸è®ºæ˜¯ç¡¬ä»¶ä¸´ç•Œèµ„æºè¿˜æ˜¯è½¯ä»¶ä¸´ç•Œèµ„æºï¼Œå¤šä¸ªè¿›ç¨‹å¿…é¡»äº’æ–¥çš„å¯¹å®ƒè¿›è¡Œè®¿é—®ã€‚</p>
<p><strong>å¤šä¸ªè¿›ç¨‹æ¶‰åŠåˆ°åŒä¸€ä¸ªä¸´ç•Œèµ„æºçš„çš„ä¸´ç•ŒåŒºç§°ä¸ºç›¸å…³ä¸´ç•ŒåŒºã€‚</strong></p>
<p>ä½¿ç”¨ä¸´ç•ŒåŒºæ—¶ï¼Œä¸€èˆ¬ä¸å…è®¸å…¶è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œåªè¦è¿è¡Œåœ¨ä¸´ç•ŒåŒºçš„è¿›ç¨‹è¿˜æ²¡æœ‰ç¦»å¼€ï¼Œå…¶ä»–æ‰€æœ‰è¿›å…¥æ­¤ä¸´ç•ŒåŒºçš„è¿›ç¨‹éƒ½ä¼šè¢«æŒ‚èµ·è€Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šå½±å“ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚</p>
<p>ä¸´ç•Œèµ„æºä¸€èˆ¬è¢«æ”¾ç½®åœ¨å†…å­˜ä¸­ï¼Œåœ¨ä¸€å°è®¡ç®—æœºä¸­çš„å¤„ç†æœºè¯»å–çš„æ˜¯åŒä¸€ä¸ªå†…å­˜ã€‚</p>
<p>åŒæ­¥æœºåˆ¶åº”å½“éµå¾ªçš„å‡†åˆ™:</p>
<ul>
<li>ç©ºé—²è®©è¿›ï¼šä¸´ç•ŒåŒºç©ºé—²æ—¶ï¼Œå¯ä»¥å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒº</li>
<li>å¿™åˆ™ç­‰å¾…ï¼šå½“å·²ç»æœ‰è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…</li>
<li>æœ‰é™ç­‰å¾…ï¼šå¯¹è¯·æ±‚è®¿é—®ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼Œåº”ä¿è¯å…¶åœ¨æœ‰é™çš„æ—¶é—´å†…è¿›å…¥ä¸´ç•ŒåŒº</li>
<li>è®©æƒç­‰å¾…ï¼šå½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœº</li>
</ul>
<h2 data-id="heading-2">åŸè¯­æ“ä½œ</h2>
<p>åŸè¯­æ“ä½œæŒ‡çš„æ˜¯ä¸€ç³»åˆ—æ“ä½œä»å¼€å§‹æ‰§è¡Œåˆ°ç»“æŸéƒ½ä¸å…è®¸è¢«ä¸­æ–­</p>
<h2 data-id="heading-3">å¹¶å‘ &amp; å¹¶è¡Œ</h2>
<p>å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«ä»…åœ¨äºâ€œæ˜¯å¦æ‹¥æœ‰å¤šä¸ªå¤„ç†æœºâ€</p>
<p>ä»å®è§‚æ¥çœ‹ï¼Œå¹¶å‘ä¸å¹¶è¡Œå±äºåŒæ—¶è¿è¡Œçš„ï¼Œå¤šä¸ªè¿›ç¨‹ä¹‹é—´å¤„äºå¼‚æ­¥ï¼Œæ²¡æœ‰åŒºåˆ«</p>
<p>ä»å¾®è§‚æ¥çœ‹ï¼š</p>
<ul>
<li>å¹¶å‘ï¼šå‘ç”Ÿåœ¨ä¸€ä¸ªå¤„ç†æœºä¸Šçš„å¤šä¸ªè¿›ç¨‹ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œæœ‰å¤šä¸ªä»»åŠ¡éƒ½å¤„äºå¯åŠ¨åˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´çš„çŠ¶æ€ï¼Œè¿™äº›ä»»åŠ¡åœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸Šè¿è¡Œã€‚</li>
<li>å¹¶è¡Œï¼šå‘ç”Ÿåœ¨å¤šä¸ªå¤„ç†æœºä¸Šçš„å¤šä¸ªè¿›ç¨‹ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œå¤šä¸ªå¤„ç†å™¨æˆ–è€…å¤šæ ¸å¤„ç†å™¨ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚</li>
</ul>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p>å¹¶è¡Œ</p>
<p>X è½´æ˜¯æ—¶é—´ï¼›Y è½´æ˜¯è¿›ç¨‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7e646f4f82543b387e72ae0115d9730~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=1mZ8hhBL%2BsIn5AfyMyM7Kipnhkg%3D" alt="" loading="lazy"/></p>
<p>å¹¶å‘</p>
<p>X è½´æ˜¯æ—¶é—´ï¼›Y è½´æ˜¯è¿›ç¨‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39c7854940724a9ebb2778a965a13444~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=7gbQIDWMLinn1l7coa0ac49COXQ%3D" alt="" loading="lazy"/></p>
<p>å¹¶å‘å°±æ˜¯ä¸€ä¸ªå¤„ç†å™¨å»åˆ†ç¥å¤„ç†å¤šä¸ªè¿›ç¨‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a330ded6cf2425c9dd64e588342247f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=8irsiFBC8%2BrekIm40KAovrJbLbM%3D" alt="" loading="lazy"/></p>
<p>å¹¶è¡Œå°±æ˜¯å¤šä¸ªå¤„ç†å™¨ä¸“ä¸€å»å¤„ç†å¤šä¸ªè¿›ç¨‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eb5c6889b3f4702a5aa7ee16292da2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=9hxvEiaOaCKachIZjRibZx0R4e0%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸ªæ¯”å–»ï¼šå¹¶å‘æ˜¯ä¸€ä¸ªäººåŒæ—¶åƒä¸‰ä¸ªé¦’å¤´ï¼Œè€Œå¹¶è¡Œæ˜¯ä¸‰ä¸ªäººåŒæ—¶åƒä¸‰ä¸ªé¦’å¤´ã€‚</p>
<p>å®è§‚è§’åº¦æ¥çœ‹ï¼Œéƒ½æ²¡äº†ä¸‰ä¸ªé¦’å¤´ï¼Œä½†ä»å¾®è§‚çš„è§’åº¦çœ‹å°±ä¸ä¸€æ ·äº†</p>
<h2 data-id="heading-4">ä¿¡å·é‡ - â€œæ•°æ® / è®¡æ•°å™¨â€</h2>
<p>å®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•´æ•°å˜é‡ï¼Œç”¨æ¥è®°å½•æŸé¡¹èµ„æºçš„æ•°é‡ã€‚</p>
<p>ä¿¡å·é‡æ˜¯ OS æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºè¡¨ç¤ºä¸´ç•Œèµ„æºçš„æ•°é‡</p>
<p>æ¯”å¦‚ int count = 5</p>
<h2 data-id="heading-5">PV æ“ä½œ - â€œåŠ¨ä½œ / æ–¹æ³•â€</h2>
<p>è¿™æ˜¯å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œçš„å”¯ä¸€é€”å¾„ï¼ˆåŸè¯­ï¼‰ï¼š</p>
<p>P (Proberen = å°è¯•/ç”³è¯·ï¼‰--- ç”³è¯·ä¸€ä¸ªèµ„æºï¼Œå¦‚æœèµ„æºä¸å¤Ÿå°±é˜»å¡ç­‰å¾…ï¼ˆè¿›å…¥é˜»å¡é˜Ÿåˆ—ï¼‰</p>
<p>Pæ“ä½œçš„åº•å±‚ï¼Œæ˜¯ç”³è¯·å¹¶è·å¾—äº†å¯¹â€œä¿¡å·é‡â€è¿™ä¸ªå…±äº«æ•°æ®ç»“æ„çš„ç‹¬å ä¿®æ”¹æƒã€‚åˆ©ç”¨è¿™ä¸ªç‹¬å æƒï¼Œå®ƒåŸå­åœ°å®Œæˆäº†å¯¹èµ„æºçŠ¶æ€çš„åˆ¤æ–­å’Œæ›´æ–°ï¼Œä»è€Œå†³å®šäº†å½“å‰è¿›ç¨‹æ˜¯å¦æœ‰æƒè®¿é—®çœŸæ­£çš„ä¸´ç•Œèµ„æº</p>
<p>V (Verhogen = å¢åŠ /é‡Šæ”¾) --- é‡Šæ”¾ä¸€ä¸ªèµ„æºï¼Œå¦‚æœæœ‰è¿›ç¨‹åœ¨ç­‰å¾…è¯¥èµ„æºï¼Œåˆ™å”¤é†’ä¸€ä¸ªè¿›ç¨‹</p>
<p>Væ“ä½œçš„åº•å±‚åˆ™æ˜¯è¿”è¿˜äº†â€œä¿¡å·é‡â€è¿™ä¸ªå…±äº«æ•°æ®ç»“æ„ï¼Œåœ¨â€œä¿¡å·é‡â€è¿™ä¸ªå…±äº«æ•°æ®ç»“æ„è¢«æ›´æ–°åï¼Œå¦‚æœå½“å‰â€œä¿¡å·é‡â€ä»ä¸ºè´Ÿæ•°ï¼ˆä»£è¡¨å½“å‰æœ‰å…¶ä»–è¿›ç¨‹æ­£åœ¨è¯·æ±‚è¿™ä¸ªå…±äº«æ•°æ®ç»“æ„ï¼Œå¹¶å¤„äºé˜»å¡çŠ¶æ€ï¼‰å°±å°†é˜»å¡é˜Ÿåˆ—çš„å¤´è¿›ç¨‹å”¤é†’ï¼Œå®ƒä¼šè¿›å…¥å°±ç»ªæ€</p>
<h2 data-id="heading-6">é” - â€œç‰¹ä¾‹ / åº”ç”¨â€</h2>
<p>é”æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¿¡å·é‡ï¼Œå®ƒçš„èµ„æºåªæœ‰ 1ï¼ˆå³ï¼šè¦ä¹ˆæ˜¯ 0ï¼Œè¦ä¹ˆæ˜¯ 1ï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼Œäº’æ–¥ = åˆå§‹å€¼ä¸º 1 çš„ä¿¡å·é‡ã€‚</p>
<p>åœ¨ Java ä¸­ï¼ŒReentrantLock å°±æ˜¯æŠŠ PV æ“ä½œå°è£…æˆäº† lock() å’Œ unlock() æ–¹æ³•ç»™ç¨‹åºå‘˜ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-7">Java æ˜¯æ€ä¹ˆä½¿ç”¨åŒæ­¥å’Œäº’æ–¥çš„ï¼Ÿ</h2>
<p>é”ï¼ˆLockï¼‰ä¸æ˜¯èµ„æºæœ¬èº«ï¼Œé”æ˜¯è®¿é—®èµ„æºçš„â€œå…¥åœºåˆ¸â€ã€‚</p>
<h3 data-id="heading-8">æ˜¾å¼é” - ReentrantLock - äº’æ–¥é‡</h3>
<p>åœ¨ Java ä¸­å¯ä»¥ä½¿ç”¨ Lock.lock å¯¹ä¸€å—åœ°æ–¹ä¸Šé”ï¼ˆå…¶å®æ˜¯ JVM å‘ OS ç”³è¯·äº†ä¸€å—äº’æ–¥ç©ºé—´/ä¸´ç•Œèµ„æºï¼‰ï¼Œåœ¨ Java ä¸­ï¼Œå˜é‡å¯ä»¥è¢«æ”¾ç½®åˆ°ä¸´ç•Œèµ„æºåŒºä¸­ï¼Œè¿™æ ·å­æ¥å®ç°é”</p>
<p>ä¾‹å¦‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. ã€æŠ¢é’¥åŒ™ã€‘</span>
<span class="hljs-comment">// è¿™ä¸€æ­¥ä¸æ˜¯ç”³è¯·èµ„æºï¼Œè€Œæ˜¯â€œç”³è¯·è®¿é—®èµ„æºçš„æƒé™â€ã€‚</span>
<span class="hljs-comment">// å¦‚æœæ‹¿åˆ°é’¥åŒ™ï¼Œå°±è¿›é—¨ï¼›æ‹¿ä¸åˆ°ï¼Œå°±åœ¨é—¨å£æ’é˜Ÿï¼ˆé˜»å¡ï¼‰ã€‚</span>
<span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>(); 

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 2. ã€ä¸´ç•ŒåŒº (Critical Section)ã€‘</span>
    <span class="hljs-comment">// åªæœ‰æ‹¿åˆ°äº†é’¥åŒ™çš„çº¿ç¨‹ï¼Œæ‰èƒ½è¿è¡Œè¿™å‡ è¡Œä»£ç ã€‚</span>
    <span class="hljs-comment">// åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥å®‰å…¨åœ°æ“ä½œâ€œä¸´ç•Œèµ„æºâ€ï¼ˆæ¯”å¦‚ map.put, count++ï¼‰ã€‚</span>
    <span class="hljs-comment">// æ­¤æ—¶ï¼Œåˆ«äººè¿›ä¸æ¥ï¼Œå› ä¸ºé’¥åŒ™åœ¨ä½ å…œé‡Œã€‚</span>
    map.put(<span class="hljs-string">"key"</span>, <span class="hljs-number">1</span>); 

} <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 3. ã€è¿˜é’¥åŒ™ã€‘</span>
    <span class="hljs-comment">// è¿™ä¸€æ­¥ä¸æ˜¯æŠŠèµ„æºè¿˜ç»™ OSï¼ˆå•æ‰€è¿˜åœ¨ï¼‰ï¼Œè€Œæ˜¯â€œå½’è¿˜æƒé™â€ã€‚</span>
    <span class="hljs-comment">// æŠŠé’¥åŒ™æŒ‚å›å¢™ä¸Šï¼Œé€šçŸ¥é—¨å£æ’é˜Ÿçš„äººï¼šâ€œæˆ‘ç”¨å®Œäº†ï¼Œä½ ä»¬æŠ¢å§â€ã€‚</span>
    <span class="hljs-keyword">lock</span>.unlock(); 
}
</code></pre>
<p>å…¶å® Java åœ¨ lock çš„åº•å±‚å°±å·²ç»å®ç°äº†é˜»å¡äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±æœ‰äººè¦é—®äº†ï¼Œè€å¸ˆè€å¸ˆï¼Œé‚£æˆ‘ä»¬ï¼ˆConditionï¼‰å‘¢ï¼Ÿ</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šé˜»å¡ ä¸ç­‰äº é‡Šæ”¾é”ã€‚åªæœ‰ Condition.await() æ‰èƒ½åšåˆ° â€œåœ¨é˜»å¡çš„åŒæ—¶é‡Šæ”¾é”â€ã€‚</p>
<p>æŠŠè¯è¯´å¾—æ›´æ—¥å¸¸ä¸€ç‚¹ï¼šä½ åœ¨é£Ÿå ‚åƒé¥­ï¼Œä¸€èˆ¬æ¥è®²å°±æ˜¯ å…ˆæŠ¢ä½ç½®ï¼ˆæŠ¢é”ï¼‰ -&gt; å»æ‰“é¥­ï¼ˆè°ƒç”¨èµ„æºï¼‰ -&gt; åƒé¥­ï¼ˆä½¿ç”¨èµ„æºï¼‰ -&gt; ç¦»å¼€ï¼ˆé‡Šæ”¾èµ„æºå’Œé”ï¼‰ è¿™ä¸€ä¸ªè¿‡ç¨‹</p>
<p>lock ç›¸å½“äºä½ æŠ¢äº†ä¸€ä¸ªä½ç½®ï¼Œç„¶ååœ¨æ’æ‰“é¥­é˜Ÿä¼ï¼Œå¿«åˆ°ä½ äº†å‘Šè¯‰ä½ ï¼šå°ä¼™å­ä¸å¥½æ„æ€å•Šï¼Œé¥­æ²¡äº†ï¼Œä½ å¾—ç­‰ä¸€ä¸‹äº†ï¼Œcondition çš„åšæ³•æ˜¯ä½ å…ˆæŠŠåº§ä½æ”¾å¼€ï¼Œè®©å…¶ä»–å·²ç»æ‰“äº†é¥­åŒå­¦å¯ä»¥åï¼Œç„¶åä½ å»ç­‰é˜¿å§¨è·Ÿä½ è¯´ï¼Œé¥­å¥½äº†ï¼Œç„¶åä½ å†å»æŠ¢åº§ä½ï¼ŒæŠ¢é¥­ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ conditionï¼Œç›¸å½“äºé˜¿å§¨è·Ÿä½ è¯´æ²¡é¥­äº†ï¼Œä½ è¯´ï¼šé‚£æ²¡äº‹å„¿ï¼Œæˆ‘ç­‰ç­‰ï¼Œä½†æ˜¯åº§ä½è¿˜æ˜¯ä½ çš„å•Šï¼Œå…¶ä»–è¦åƒé¥­çš„äººå°±æ²¡åº§ä½äº†ï¼Œé‚£ä¸å°±æ˜¯å ç€èŒ…å‘ä¸æ‹‰å±äº†å—ï¼Ÿ</p>
<h3 data-id="heading-9">éšå¼é” - synchronized - ç®¡ç¨‹</h3>
<p>åœ¨ JDK ç¼–å†™è¿‡ç¨‹ï¼Œå¼€å‘è€…å°±å·²ç»ç»™æ¯ä¸€ä¸ªå¯¹è±¡ä¸Šäº†ä¸€æŠŠéšå¼é”</p>
<p>éšå¼é”å¯ä»¥é€šè¿‡æ·»åŠ  synchronized å…³é”®å­—å¼€å¯</p>
<h3 data-id="heading-10">Javaä¸­ä¸ºä»€ä¹ˆåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åŠ é”</h3>
<p>ç®€å•æ¥è¯´ï¼Œä¹‹æ‰€ä»¥åŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åŠ é”çš„åŸå› æ˜¯ï¼šåŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºé—´å»æ”¾é”å¤´</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d040615fa584d4f896586acc4977d15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VyZW5lRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770559665&amp;x-signature=Z4CAJpadxq7%2BiYzHC4JVG5a0nRo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ­»é”</h3>
<p>ç”±å¤šä¸ªå¹¶å‘è¿›ç¨‹å› äº‰å¤ºç³»ç»Ÿèµ„æºè€Œäº§ç”Ÿç›¸äº’ç­‰å¾…çš„ç°è±¡</p>
<p>æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶</p>
<ul>
<li>äº’æ–¥ï¼šæŸç§èµ„æºä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼Œå³è¯¥èµ„æºä¸€æ—¦åˆ†é…ç»™æŸä¸ªè¿›ç¨‹ï¼Œå…¶ä»–è¿›ç¨‹å°±ä¸èƒ½å†è®¿é—®ï¼Œç›´åˆ°è¯¥è¿›ç¨‹è®¿é—®ç»“æŸã€‚</li>
<li>å æœ‰ä¸”ç­‰å¾…ï¼šä¸€ä¸ªè¿›ç¨‹æœ¬èº«å æœ‰èµ„æºï¼ˆä¸€ç§æˆ–å¤šç§ï¼‰ï¼ŒåŒæ—¶è¿˜æœ‰èµ„æºæœªå¾—åˆ°æ»¡è¶³ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–è¿›ç¨‹é‡Šæ”¾è¯¥èµ„æºã€‚</li>
<li>ä¸å¯æŠ¢å ï¼šåˆ«äººå·²ç»å æœ‰äº†æŸé¡¹èµ„æºï¼Œä½ ä¸èƒ½å› ä¸ºè‡ªå·±ä¹Ÿéœ€è¦è¯¥èµ„æºï¼Œå°±å»æŠŠåˆ«äººçš„èµ„æºæŠ¢è¿‡æ¥ã€‚</li>
<li>å¾ªç¯ç­‰å¾…ï¼šå­˜åœ¨ä¸€ä¸ªè¿›ç¨‹é“¾ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½å æœ‰ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€çš„è‡³å°‘ä¸€ç§èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-12">å¦‚ä½•é¢„é˜²å’Œé¿å…æ­»é”</h3>
<p>é¢„é˜²æ­»é”ï¼šå¯ä»¥é€šè¿‡<strong>ç ´åæ­»é”äº§ç”Ÿçš„4ä¸ªå¿…è¦æ¡ä»¶æ¥ é¢„é˜²æ­»é”</strong></p>
<p>æ­»é”é¿å…ï¼šåœ¨ä½¿ç”¨å‰è¿›è¡Œåˆ¤æ–­ï¼Œåªå…è®¸ä¸ä¼šäº§ç”Ÿæ­»é”çš„è¿›ç¨‹ç”³è¯·èµ„æºï¼›</p>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>åœ¨ Java ä¸­ï¼Œé”æ˜¯ JDK åº•å±‚è¯·æ±‚ OS å¯¹ä¸´ç•ŒåŒºä¸­çš„ä¸´ç•Œèµ„æºè¿›è¡Œ PV æ“ä½œçš„å®é™…æ“ä½œï¼Œå¯¹äºå¤šçº¿ç¨‹å’Œé«˜å¹¶å‘æ¥è®²ååˆ†é‡è¦ã€‚</p>
<p>é”æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨å­˜åœ¨èµ„æºç«äº‰çš„ç¯å¢ƒä¸­ï¼Œå¼ºåˆ¶é™åˆ¶å¯¹èµ„æºçš„è®¿é—®é¡ºåºã€‚å®ƒå¯ä»¥è¢«ç†è§£ä¸ºä¸€ä¸ªâ€œä»¤ç‰Œâ€æˆ–â€œè®¸å¯è¯â€ï¼Œè°æ‹¿åˆ°äº†è¿™ä¸ªä»¤ç‰Œï¼Œè°å°±æœ‰æƒè®¿é—®è¢«ä¿æŠ¤çš„èµ„æºã€‚</p>
<p>é”çš„é€»è¾‘å›´ç»•ç€ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šè·å–é” å’Œ é‡Šæ”¾é”ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä»£ç åŒºåŸŸâ€”â€”ä¸´ç•ŒåŒºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢†åŸŸé©±åŠ¨è®¾è®¡å®è·µ01ï¼šæ•è·è¡Œä¸ºéœ€æ±‚ä¸é¢†åŸŸå»ºæ¨¡]]></title>    <link>https://juejin.cn/post/7601374137411846179</link>    <guid>https://juejin.cn/post/7601374137411846179</guid>    <pubDate>2026-02-01T15:05:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601374137411846179" data-draft-id="7601175299012001807" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢†åŸŸé©±åŠ¨è®¾è®¡å®è·µ01ï¼šæ•è·è¡Œä¸ºéœ€æ±‚ä¸é¢†åŸŸå»ºæ¨¡"/> <meta itemprop="keywords" content="é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2026-02-01T15:05:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zephyr"/> <meta itemprop="url" content="https://juejin.cn/user/184373685791992"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢†åŸŸé©±åŠ¨è®¾è®¡å®è·µ01ï¼šæ•è·è¡Œä¸ºéœ€æ±‚ä¸é¢†åŸŸå»ºæ¨¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373685791992/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zephyr
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T15:05:41.000Z" title="Sun Feb 01 2026 15:05:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<ul>
<li>æœ€è¿‘åœ¨ç»™å›¢é˜Ÿå†…éƒ¨åšDDDå®è·µè½åœ°çš„å®£è®²ä¸åŸ¹è®­ï¼ŒæœŸé—´ä¹Ÿç•¥æœ‰ä¸€äº›å¿ƒå¾—ï¼Œ
ä¼šå®šæœŸå‘è¡¨å‡ºæ¥è·Ÿå¤§å®¶ä¸€èµ·äº¤æµã€‚å¦‚æœæ–‡ä¸­æœ‰é”™è¯¯çš„éƒ¨åˆ†ï¼Œæ³è¯·å¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚</li>
<li>æ„Ÿè°¢ ThoughtWorks å„å¤§DDDä¸“å®¶çš„ä¸æ‡ˆå¸ƒé“ã€‚</li>
</ul>
</blockquote>
<p>DDDï¼ˆDomain-Driven Designï¼‰çš„å®šä¹‰ï¼šæ˜¯ä¸€ç§å¼€å‘å¤æ‚è½¯ä»¶çš„æ–¹æ³•ä¸æ€æƒ³ã€‚</p>
<p>DDDä¸­çš„é¢†åŸŸï¼ŒæŒ‡çš„æ˜¯è½¯ä»¶è¦è§£å†³çš„ä¸šåŠ¡é—®é¢˜ï¼Œå› æ­¤ä¹Ÿå¯ç§°ä¸ºâ€œä¸šåŠ¡é¢†åŸŸâ€ï¼ˆBusiness Domainï¼‰ã€‚</p>
<p>DDDæ˜¯ä»¥é¢†åŸŸæ¨¡å‹ä¸ºæ ¸å¿ƒçš„ï¼Œå…·ä½“åˆ†ä¸º2ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>é¢†åŸŸå»ºç«‹ï¼ˆ2ä¸ªæ­¥éª¤ï¼‰ï¼šæ•è·è¡Œä¸ºéœ€æ±‚ï¼ˆäº‹ä»¶é£æš´ï¼‰ â†’ é¢†åŸŸå»ºæ¨¡
<ul>
<li>æ•è·è¡Œä¸ºéœ€æ±‚ï¼šä¹Ÿå°±æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„è·å–éœ€æ±‚ï¼Œè¯†åˆ«ä¸šåŠ¡æµç¨‹ä¸åŠŸèƒ½ã€ç”±å“ªäº›è§’è‰²æ“ä½œã€äº§ç”Ÿä»€ä¹ˆç»“æœç­‰</li>
<li>é¢†åŸŸå»ºæ¨¡ï¼šé€šè¿‡å»ºç«‹é¢†åŸŸæ¨¡å‹ï¼ŒæŠŠä¸»è¦çš„ä¸šåŠ¡çŸ¥è¯†æè¿°æ¸…æ¥š</li>
</ul>
</li>
<li>é¢†åŸŸå®ç°ï¼ˆ3ä¸ªæ­¥éª¤ï¼‰ï¼šæ¶æ„è®¾è®¡ â†’ æ•°æ®åº“è®¾è®¡ â†’ ä»£ç å®ç°
<ul>
<li>å®ç°çš„éƒ¨åˆ†ä¸»è¦å°±æ˜¯åŸºäºä¹‹å‰çš„é¢†åŸŸå»ºæ¨¡ï¼Œé€šè¿‡ä»£ç çš„æ–¹å¼å‘ˆç°ã€‚</li>
</ul>
</li>
</ul>
<p>åç»­æ¡ˆä¾‹ä¸­ä¸»è¦åŸºäºä¸€ä¸ªå°å‹ä¼ä¸šæœåŠ¡é¡¹ç›®å±•å¼€ï¼Œå…¶ä¸­çš„ä¸šåŠ¡åŠŸèƒ½ä¸»è¦åŒ…å«ï¼šç§Ÿæˆ·ç®¡ç†ã€äººå‘˜ä¸ç»„ç»‡ç®¡ç†ã€é¡¹ç›®ç®¡ç†ã€å·¥æ—¶ç®¡ç†ç­‰ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•è·è¡Œä¸ºéœ€æ±‚ï¼šäº‹ä»¶é£æš´</h2>
<p>ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶é£æš´ï¼šéœ€æ±‚é€šå¸¸åœç•™åœ¨é¢†åŸŸä¸“å®¶çš„è„‘æµ·ä¸­ï¼Œå¾ˆéš¾ä¸€è‚¡è„‘å…¨éƒ¨è®²å‡ºæ¥ï¼Œäº‹ä»¶é£æš´æ­£æ˜¯ä¸€ç§å¥—è·¯åŒ–æ–¹æ³•ï¼Œèƒ½å¤ŸæŠŠè¿™äº›éœ€æ±‚æŒ–æ˜å‡ºæ¥</p>
<p>æ•è·è¡Œä¸ºéœ€æ±‚æŒ‡çš„æ˜¯ï¼šåˆ†æç³»ç»Ÿå…·æœ‰å“ªäº›åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ç”±ä»€ä¹ˆäººæ“ä½œï¼Œä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœã€‚</p>
<p>è¿‡ç¨‹ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯äº‹ä»¶é£æš´ï¼Œå…¶ä¸»è¦è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7612b54f5c04cedaa4c70140fcec3fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=fgoUBRYzKYZHISfxLGGFe5d81Go%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>è¯†åˆ«é¢†åŸŸäº‹ä»¶ï¼šä¸šåŠ¡æµç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ</li>
<li>è¯†åˆ«å‘½ä»¤ï¼šä»€ä¹ˆè§’è‰²åšäº†ä»€ä¹ˆæ“ä½œ</li>
<li>è¯†åˆ«é¢†åŸŸåè¯ï¼šä»é¢†åŸŸäº‹ä»¶ã€å‘½ä»¤ä¸­æ‰¾åˆ°æ¦‚å¿µæ€§åè¯</li>
</ul>
<h3 data-id="heading-1">1.1 ç¬¬ä¸€æ­¥ï¼šè¯†åˆ«é¢†åŸŸäº‹ä»¶</h3>
<p>é¢†åŸŸäº‹ä»¶ï¼šæŒ‡çš„æ˜¯ä¸šåŠ¡æµç¨‹ä¸­æ¯ä¸ªæ­¥éª¤å¼•å‘çš„ç»“æœã€‚ï¼ˆæ³¨æ„ï¼Œå¿…é¡»æ˜¯å¼•å‘çš„ç»“æœï¼‰</p>
<p>ä¾‹å¦‚ï¼šè®¢å•ï¼ˆå·²ï¼‰æäº¤ã€å•†å“ï¼ˆå·²ï¼‰ç­¾æ”¶ç­‰ã€‚</p>
<p>ä»æ“ä½œç»“æœæ¥æ¢³ç†éœ€æ±‚ï¼Œæ¯”ç›´æ¥ä»æ“ä½œè¿‡ç¨‹ä¸­æ¢³ç†ï¼Œæ›´å®¹æ˜“æ¢³ç†æ¸…æ¥šã€‚äº‹ä»¶é£æš´ä¸­çš„â€œäº‹ä»¶â€ï¼Œå°±æ¥è‡ªäºé¢†åŸŸäº‹ä»¶ã€‚</p>
<p>åœ¨å‘½åé¢†åŸŸäº‹ä»¶æ—¶ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯ã€xxå·²xxã€‘çš„å½¢å¼ã€‚ä½†å¦‚æœå·²ç»æœ‰å¹¿æ³›ä½¿ç”¨æˆ–ç°æˆçš„è¡Œä¸šæœ¯è¯­ï¼Œåˆ™åº”ä¼˜å…ˆä½¿ç”¨è¿™éƒ¨åˆ†æœ¯è¯­ã€‚ä¾‹å¦‚ï¼šé€šå¸¸ç”¨ã€å·²ç«‹é¡¹ã€‘è€Œä¸æ˜¯ã€é¡¹ç›®å·²åˆ›å»ºã€‘</p>
<p>è¯†åˆ«é¢†åŸŸäº‹ä»¶æ˜¯å›¢é˜Ÿåä½œç­‰è¿‡ç¨‹ï¼Œå°¤å…¶æ³¨æ„ä¸šåŠ¡äººå‘˜ã€å¼€å‘ä»»åŠ¡è¦ç»Ÿä¸€è¯­è¨€ï¼ˆç»Ÿä¸€ä¸šåŠ¡æœ¯è¯­ã€ç”¨è¯ç­‰ï¼‰ã€‚</p>
<p>å¦‚ä¸‹ä¸¤ä¸ªç§æƒ…å†µï¼Œä¸å±äºé¢†åŸŸäº‹ä»¶ï¼š</p>
<ul>
<li>æŠ€æœ¯äº‹ä»¶ï¼Œä¾‹å¦‚ï¼šäº‹åŠ¡å·²å›æ»šã€ç¼“å­˜å·²å‘½ä¸­ç­‰</li>
<li>æŸ¥è¯¢åŠŸèƒ½ï¼Œå› ä¸ºæŸ¥è¯¢å¹¶ä¸èƒ½å¯¹äº‹ç‰©äº§ç”Ÿå®é™…å½±å“</li>
</ul>
<p>åœ¨æ¢³ç†ä¸è¯†åˆ«é¢†åŸŸäº‹ä»¶æ—¶ï¼Œå¯ä»¥æŒ‰ä¸åŒçš„ä¸šåŠ¡æµåˆ†åˆ«æ¢³ç†åˆ°è¡¨æ ¼ä¸­ã€‚è¿™æ˜¯å›¢é˜Ÿåä½œçš„è¿‡ç¨‹ï¼Œæ¯ä¸ªé¢†åŸŸäº‹ä»¶éƒ½è¦å¾—åˆ°å›¢é˜Ÿé›†ä½“çš„è®¤å¯ã€‚é¦–å…ˆå¯ä»¥åœ¨è¡¨æ ¼ä¸­ç»´æŠ¤ä¸šåŠ¡æµç¨‹åã€é¢†åŸŸäº‹ä»¶ï¼ˆä¸šåŠ¡ç»“æœï¼‰ï¼Œå¤‡æ³¨ï¼ˆçº¦æŸæ¡ä»¶ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/560a8fb09edb4d9e9ff582a6f4b6c41f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=OVPAsarmll8cQ6G3k35UjCwLy4A%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">1.2 ç¬¬äºŒæ­¥ï¼šè¯†åˆ«å‘½ä»¤</h3>
<p>å‘½ä»¤ï¼ŒæŒ‡çš„æ˜¯å¼•å‘é¢†åŸŸäº‹ä»¶çš„æ“ä½œã€‚ä¾‹å¦‚ã€åˆåŒå·²ç­¾è®¢ã€‘è¿™ä¸ªäº‹ä»¶å¯¹åº”çš„å‘½ä»¤å°±æ˜¯ã€ç­¾è®¢åˆåŒã€‘ã€‚</p>
<p>é™¤äº†è¯†åˆ«å‡ºå‘½ä»¤æœ¬èº«ï¼Œè¿˜è¦èƒ½è¯†åˆ«å‡ºæ¥å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>è°æ‰§è¡Œçš„å‘½ä»¤</li>
<li>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æŸ¥è¯¢äº†å“ªäº›æ•°æ®</li>
</ul>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¡¨æ ¼ä¸­æ·»åŠ 3åˆ—ï¼šå‘½ä»¤ã€æ‰§è¡Œè€…ã€æŸ¥è¯¢æ•°æ®:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b06d70c30e448eb6754a296716f5c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=scREQvQyvGkvE2m3UUE%2BB3vXbvA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">1.3 ç¬¬ä¸‰æ­¥ï¼šè¯†åˆ«é¢†åŸŸåè¯</h3>
<p>é¢†åŸŸåè¯ï¼Œæ˜¯ä»å‘½ä»¤ã€é¢†åŸŸäº‹ä»¶ã€æ‰§è¡Œè€…ã€æŸ¥è¯¢æ•°æ®é‡Œæ‰¾åˆ°çš„ã€å—å½±å“çš„åè¯æ€§æ¦‚å¿µã€‚ä¾‹å¦‚ï¼šå‘½ä»¤ã€ç­¾è®¢åˆåŒã€‘ã€é¢†åŸŸäº‹ä»¶ã€åˆåŒå·²ç­¾è®¢ã€‘ï¼Œå½±å“åˆ°çš„åè¯æ€§æ¦‚å¿µéƒ½æ˜¯ã€åˆåŒã€‘ã€‚</p>
<p>å¯ä»¥æ ¹æ®å‰ä¸€æ­¥éª¤æ±‡æ€»çš„æ•°æ®ï¼ˆé¢†åŸŸäº‹ä»¶ã€å‘½ä»¤ã€æ‰§è¡Œè€…ã€æŸ¥è¯¢æ•°æ®ï¼‰ï¼ŒæŠŠå›´ç»•åŒä¸€ä¸ªåè¯çš„æ”¾åˆ°åŒä¸€ä¸ªç»„ä¸‹ï¼Œå¦‚æœä¸€ä¸ªå‘½ä»¤æˆ–é¢†åŸŸäº‹ä»¶æ¶‰åŠäº†å¤šä¸ªé¢†åŸŸåè¯ï¼ˆä¾‹å¦‚ï¼šã€å‘˜å·¥å·²åˆ†é…åˆ°é¡¹ç›®ã€‘è¿™ä¸ªé¢†åŸŸäº‹ä»¶å°±åŒæ—¶ä¸ã€å‘˜å·¥ã€‘ã€ã€é¡¹ç›®ã€‘è¿™2ä¸ªé¢†åŸŸåè¯æœ‰å…³ï¼‰ï¼Œåˆ™èªŠå†™å¤šä»½ï¼Œåˆ†åˆ«æ”¾åˆ°ä¸åŒçš„é¢†åŸŸåè¯åˆ†ç»„ä¸‹ï¼Œå¹¶æ ‡è®°èªŠå†™çš„æ¬¡æ•°ï¼ˆ2ã€3ç­‰ï¼‰ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1668bbdf62484d6f9b6f2d6a1332ed78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=%2B%2BYqby7KMSw5o32lGevbw0KZpCU%3D" alt="image.png" loading="lazy"/></p>
<p>éƒ¨åˆ†åˆ†ç»„ï¼ˆä¼ä¸šã€ç®¡ç†å‘˜ç­‰ï¼‰ç¼ºå°‘é¢†åŸŸäº‹ä»¶ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥åœ¨åé¢é¢†åŸŸå»ºæ¨¡ç­‰æ—¶å€™å†ç»†åŒ–ã€‚</p>
<h3 data-id="heading-4">1.4 æ³¨æ„äº‹é¡¹ï¼š</h3>
<ul>
<li>åœ¨äº‹ä»¶é£æš´é‡Œåªåˆ—å‡ºä¸»è¦çš„æ­¥éª¤ï¼Œæ— éœ€åˆ—ä¸¾å¢åˆ æ”¹ç­‰åŸºç¡€åŠŸèƒ½</li>
<li>äº‹ä»¶é£æš´ä¸­é¢†åŸŸäº‹ä»¶åªéœ€è¦æŒ‰ç…§å¤§è‡´çš„æ—¶é—´é¡ºåºå‘ˆç°ï¼Œä¸ç”¨å¾ˆä¸¥æ ¼ï¼ˆå¦‚æœéœ€è¦ä¸¥æ ¼æ—¶é—´é¡ºåºï¼Œå¯ä»¥å•ç‹¬ç”»å…·ä½“çš„æµç¨‹å›¾ã€æ—¶åºå›¾ç­‰ï¼‰</li>
<li>æ¯ä¸ªæ­¥éª¤ï¼ˆä¸€å¯¹é¢†åŸŸäº‹ä»¶ä¸å‘½ä»¤ï¼‰çš„ç²’åº¦å®œç²—ä¸å®œç»†ã€‚ä¾‹å¦‚â€œç­¾è®¢åˆåŒâ€œæ˜¯ä¸€ä¸ªåˆç†çš„æ­¥éª¤ï¼Œä¸ç”¨æ‹†åˆ†æˆâ€å½•å…¥åˆåŒåŸºæœ¬ä¿¡æ¯â€œã€â€å½•å…¥åˆåŒæ˜ç»†â€œã€â€ä¸Šä¼ é™„ä»¶â€œç­‰</li>
<li>äº‹ä»¶é£æš´åªæ˜¯ç†æ¸…ä¸šåŠ¡ç­‰ä¸€ç§æ‰‹æ®µï¼Œå®é™…æ‰§è¡Œæ—¶ä¸ç”¨æ‹˜æ³¥äºå½¢å¼ã€‚å¯ä»¥ç”¨è¡¨æ ¼ç­‰å½¢å¼ï¼Œä»¥ç”µå­ç­‰å½¢å¼ä¿å­˜ã€ç»´æŠ¤äº‹ä»¶é£æš´çš„æˆæœã€‚</li>
<li>é¢†åŸŸè§„åˆ™ï¼ˆä¸šåŠ¡ä¸Šå¿…é¡»æˆç«‹çš„æ¡ä»¶æˆ–çº¦æŸï¼‰æ˜¯é‡è¦çš„é¢†åŸŸçŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©è¡¨æ ¼çš„å½¢å¼æ¢³ç†ï¼Œä¸äº‹ä»¶é£æš´ï¼ˆæ•è·è¡Œä¸ºéœ€æ±‚ï¼‰çš„æˆæœåˆ†å¼€ç»´æŠ¤ï¼Œè¿™éƒ¨åˆ†çš„ä»£ç éœ€è¦å®Œå…¨åœ¨é¢†åŸŸå±‚å®ç°ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a4809acdcdd43efbeec1c0d88882b51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=IY%2BK93EHU3PBdgXQjoxOFmKa6yo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">äºŒã€é¢†åŸŸå»ºæ¨¡å®è·µ</h2>
<p>é¢†åŸŸå»ºæ¨¡çš„ç›®çš„ï¼š</p>
<ul>
<li>å‡†ç¡®åæ˜ é¢†åŸŸçŸ¥è¯†ï¼ŒæŠŠçŸ¥è¯†å¯è§†åŒ–ï¼Œåœ¨ä¸šåŠ¡ã€æŠ€æœ¯äººå‘˜ä¹‹é—´è¾¾æˆä¸€è‡´</li>
<li>æŒ‡å¯¼ç³»ç»Ÿä¸ç¼–ç ï¼Œèƒ½å¤Ÿè¾ƒå®¹æ˜“åœ°è½¬åŒ–ä¸ºæ•°æ®åº“æ¨¡æ•°ä¸ä»£ç å®ç°</li>
</ul>
<p>å»ºç«‹é¢†åŸŸæ¨¡å‹ï¼Œå°±æ˜¯è¦ï¼š</p>
<ul>
<li>
<p>è¯†åˆ«é¢†åŸŸå¯¹è±¡ï¼ˆdomain objectï¼‰</p>
</li>
<li>
<p>è¯†åˆ«é¢†åŸŸå¯¹è±¡ä¹‹é—´çš„å…³ç³»</p>
</li>
<li>
<p>è¯†åˆ«é¢†åŸŸå¯¹è±¡çš„å…³é”®å±æ€§</p>
</li>
<li>
<p>æŒ‰éœ€æŠŠé¢†åŸŸå¯¹è±¡ç»„ç»‡æˆæ¨¡å—</p>
</li>
</ul>
<h3 data-id="heading-6">2.1 å»ºæ¨¡å®è·µ</h3>
<p>é¢†åŸŸå¯¹è±¡æŒ‡çš„æ˜¯ç³»ç»Ÿä¸­è¦å¤„ç†çš„å„ç§â€œäº‹ç‰©â€ï¼Œæ¯”å¦‚è¯´é¡¹ç›®ã€å‘˜å·¥ã€è´¦æˆ·ç­‰ç­‰ã€‚</p>
<p>é¢†åŸŸæ¨¡å‹å›¾é€šå¸¸ç”¨UMLå›¾ï¼ˆUnified Modeling Languageï¼‰æ¥ç”»ï¼Œå…¶ä¸­çš„é¢†åŸŸæ¨¡å‹å¸¸ç”¨ç±»å›¾æ¥ç”»ï¼Œè¡¨å¤´è¡¨ç¤ºé¢†åŸŸå¯¹è±¡çš„åè¯ï¼Œä¸‹é¢çš„å±æ€§è¡¨ç¤ºå¯¹è±¡çš„å±æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5a8552340494d5b9323f88372b9d348~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=z5nATIb9JzBgkl0p1d7SqL5A17Q%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨é¢†åŸŸå»ºæ¨¡è¿‡ç¨‹ä¸­è¯´é¢†åŸŸå¯¹è±¡æ—¶ï¼Œæœ‰æ—¶æŒ‡ç±»ï¼Œæœ‰æ—¶æŒ‡å®ä¾‹ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¥åŒºåˆ†ã€‚æ¯”å¦‚ï¼Œå‘˜å·¥æ˜¯é¢†åŸŸå¯¹è±¡çš„ä¸€ä¸ªç±»ï¼Œå¼ ä¸‰å’Œæå››æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ã€‚</p>
<p>åœ¨é¢†åŸŸå»ºæ¨¡é˜¶æ®µï¼Œåœ¨ç”»ç±»å›¾çš„æ—¶å€™ï¼Œæ— éœ€å†™å‡ºå±æ€§ã€‚ä¸»è¦å…³æ³¨çš„æ˜¯å®ä½“å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚æœå®ä½“çš„åå­—å·²ç»èƒ½æ¸…æ™°è¯´æ˜å®ä½“çš„å«ä¹‰ï¼Œé‚£å°±ä¸éœ€è¦åŠ å±æ€§äº†ã€‚</p>
<p>å¦‚æœåªå…³æ³¨å‰é¢æ¢³ç†çš„ç§Ÿæˆ·ã€ç»„ç»‡ï¼Œåˆ™å¯ä»¥å…ˆç”»å‡ºå¦‚ä¸‹çš„ç±»å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a25ddbf60aa24564ada937f6bc275c37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=uOEVowDlHu8JuJ6r8eeO3r2O2Go%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±äºæ¯ä¸ªå®ä½“éƒ½è¦å±äºç§Ÿæˆ·ï¼Œå› æ­¤ï¼ŒUMLå›¾ä¸Šå°±ä¸æŠŠç§Ÿæˆ·è·Ÿæ¯ä¸ªå®ä½“å…³è”èµ·æ¥äº†ï¼Œè€Œæ˜¯åœ¨ç§Ÿæˆ·çš„æ—è¾¹åŠ ä¸Šä¸€æ®µè¡¨ç¤ºçº¦æŸçš„è¯´æ˜ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3bd2f0f12d94bc5a48d5b052f40a7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=Jk%2B1Jp5cHbLJCCdWTA4SUEvbNbg%3D" alt="image.png" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬å¼€çœ‹ä¸‹ä¼ä¸šã€å¼€å‘ä¸­å¿ƒã€å¼€å‘ç»„ï¼Œä»–ä»¬ä»å·¦åˆ°å³ä¾æ¬¡æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚å¦‚æœç›´æ¥ç”»åˆ°UMLå›¾ä¸­ï¼Œåˆ™å¦‚æœå…¶ä¸­åç»­ç»„ç»‡æ¶æ„è°ƒæ•´ï¼Œè¦æ·»åŠ å…¶ä»–éƒ¨é—¨ï¼Œæˆ–å¼€å‘ä¸­å¿ƒä¸‹ä¸å†è®¾ç½®å¼€å‘ç»„ï¼Œé‚£è¿™ä¸ªæ¨¡å‹å°±è¦ä¿®æ”¹äº†ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ¨¡å‹ä¸æ˜“é€‚åº”ä¸šåŠ¡çš„å˜åŒ–ã€‚è¿™ä¸ªæ—¶å€™å°±è¦æŠŠå®ä½“è¿›è¡ŒæŠ½è±¡ï¼ˆå½’çº³å…±æ€§ï¼‰</p>
<p>ä¼ä¸šã€å¼€å‘ä¸­å¿ƒã€å¼€å‘ç»„ï¼Œéƒ½å¯ä»¥æŠ½è±¡ä¸ºâ€œç»„ç»‡â€ï¼Œé€šè¿‡ç±»å‹åŒºåˆ†ã€‚å¹¶æ·»åŠ è‡ªæˆ‘å…³è”çš„æ–¹å¼ä½“ç°ä¸Šä¸‹çº§å…³ç³»ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e2563bd2e7143b08906e1974565512f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=tYgqL%2B6emY8NV3R3IKNqZHkZsMU%3D" alt="image.png" loading="lazy"/>
å…¶ä¸­ï¼š</p>
<ul>
<li>æ¯ä¸ªç±»å›¾éƒ½è¡¨ç¤ºä¸€ä¸ªé¢†åŸŸå¯¹è±¡</li>
<li>é¢†åŸŸå¯¹è±¡ä¹‹é—´çš„è¿çº¿è¡¨ç¤ºå…³è”å…³ç³»</li>
<li>é¢†åŸŸå¯¹è±¡çš„è‡ªæˆ‘å…³è”åˆ™ä½“ç°äº†ä¸Šä¸‹çº§çš„å±‚çº§å…³ç³»ï¼Œçº¿è¾¹çš„æ–‡å­—è¡¨ç¤ºè§’è‰²ï¼ˆä¾‹å¦‚ï¼šä¸Šçº§ã€ä¸‹çº§â€¦â€¦ï¼‰</li>
<li>å¸¦æŠ˜è§’çš„å›¾å½¢æè¿°äº†ç›¸å…³çš„è¯´æ˜ï¼Œé€šè¿‡è™šçº¿è¿æ¥åˆ°é¢†åŸŸå¯¹è±¡</li>
<li>å¸¦æŠ˜è§’å›¾å½¢ä¸­ç”¨{Â  } åŒ…è£¹çš„éƒ¨åˆ†ï¼Œè¡¨ç¤ºå¯¹åº”çš„çº¦æŸï¼Œéœ€è¦åœ¨ä»£ç ä¸­åšå¯¹åº”çš„å®ç°</li>
<li>çº¿è¾¹çš„æ•°å­—è¡¨ç¤ºAå¯¹è±¡æœ€å°‘..æœ€å¤šå…³è”å¤šå°‘ä¸ªBå¯¹è±¡</li>
</ul>
<p>æ³¨æ„åŒæ­¥ä¿®æ”¹é¢†åŸŸæ±‡æ€»è¡¨ï¼ˆäº‹ä»¶é£æš´æˆæœç‰©ï¼‰ä¸­çš„å†…å®¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a86b4d066d54496184c2a71659f26cc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=jDfgtvOkbo9FCopvE9iCy8iYqXo%3D" alt="image.png" loading="lazy"/>
åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­é¡¹ç›®æƒ³æŠŠå¤šé‡æ€§ææ¸…æ¥šï¼Œåˆ™å¯ä»¥é€šè¿‡é—®å››ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>
<p>å®ä½“ A æœ€å¤šå¯ä»¥å¯¹åº”å¤šå°‘ä¸ªå®ä½“ Bï¼Ÿ</p>
</li>
<li>
<p>å®ä½“ A æœ€å°‘å¯ä»¥å¯¹åº”å¤šå°‘ä¸ªå®ä½“ Bï¼Ÿ</p>
</li>
<li>
<p>å®ä½“ B æœ€å¤šå¯ä»¥å¯¹åº”å¤šå°‘ä¸ªå®ä½“ Aï¼Ÿ</p>
</li>
</ul>
<h3 data-id="heading-7">2.2 æ‹†åˆ†å¤šå¯¹å¤šå…³è”</h3>
<p>æœ‰äº›ä¸šåŠ¡æ•°æ®æ˜¯åŸºäºå…³è”å…³ç³»è®°å½•çš„ï¼Œåªæœ‰å…³è”å…³ç³»æˆç«‹ï¼Œè¿™äº›ä¸šåŠ¡æ•°æ®æ‰æœ‰æ„ä¹‰ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ªè¡¨ç¤ºå…³è”çš„å®ä½“ï¼ŒæŠŠä¸€ä¸ªå¤šå¯¹å¤šå…³ç³»æ‹†æˆä¸¤ä¸ªä¸€å¯¹å¤šçš„å…³è”ã€‚</p>
<p>æ¯”å¦‚å‘˜å·¥ä¸é¡¹ç›®æ˜¯å¤šå¯¹å¤šå…³ç³»ï¼Œè¿™ä¸ªæ—¶å€™åˆéœ€è¦è®°å½•å‘˜å·¥çš„é¢„è®¡æŠ•å…¥ç™¾åˆ†æ¯”ï¼Œè¿™ä¸ªå±æ€§è®°å½•åœ¨å‘˜å·¥æˆ–é¡¹ç›®éƒ½ä¸åˆé€‚ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å¼•å…¥ä¸€ä¸ªè¡¨ç¤ºå…³è”çš„å®ä½“ï¼ˆé¡¹ç›®æˆå‘˜ï¼‰ï¼Œæ¥è®°å½•è¿™äº›éœ€è¦è®°å½•åœ¨å¤šå¯¹å¤šå…³è”ä¸Šçš„å±æ€§</p>
<p>æœ€ç»ˆå½¢æˆäº†å¦‚ä¸‹çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/801544a766a349b7bc57295ed5c0a0bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=FBa8k2NtaPHbrvaV4oEIZVRpBxE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¾èµ–ä¸å…³è”è¡¨è¾¾çš„æ˜¯ä¸åŒçš„å«ä¹‰ã€‚</p>
<ul>
<li>å…³è”ï¼šè¡¨ç¤ºçš„æ˜¯æ•°æ®ä¸Šçš„å¯¼èˆªå…³ç³»ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¯´ç»„ç»‡å’Œå‘˜å·¥ä¹‹é—´å…·æœ‰ä¸€å¯¹å¤šå…³è”çš„æ—¶å€™ï¼Œå°±æ„å‘³ç€ï¼Œç”±ç»„ç»‡å¯ä»¥æ‰¾åˆ°ä¸‹é¢çš„å‘˜å·¥ï¼Œç”±å‘˜å·¥ä¹Ÿå¯ä»¥æ‰¾åˆ°æ‰€å±çš„ç»„ç»‡ã€‚</li>
<li>ä¾èµ–ï¼šè¡¨ç¤ºçš„æ„æ€æ›´ä¸ºå¹¿æ³›ã€‚å¦‚æœ Aã€B ä¸¤ä¸ªå…ƒç´ ï¼Œæœ‰äº† A æ‰èƒ½æœ‰ Bï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´ B ä¾èµ–äºAã€‚</li>
</ul>
<p>æ­¤æ—¶ï¼Œè¿™ä¸ªå›¾å·²ç»æœ‰ç‚¹ä¹±äº†ï¼Œå¾ˆå¤šå®ä½“å’Œå…³è”æ··æ‚åœ¨ä¸€èµ·ï¼Œè€Œäººçš„è®¤çŸ¥èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œé¢å¯¹è¿™æ ·ä¸€å¼ å¤æ‚çš„å¯¹è±¡ç½‘ç»œï¼Œå°±äº§ç”Ÿäº†è®¤çŸ¥è¿‡è½½ã€‚éœ€è¦æŠŠè¿™å¼ å›¾æ¨¡å—åŒ–ï¼ŒæŠŠæ¨¡å‹ä¸­çš„ä¸šåŠ¡æ¦‚å¿µç»„ç»‡æˆè‹¥å¹²é«˜å†…èšçš„æ¨¡å—ï¼ˆmoduleï¼‰ï¼Œè€Œæ¨¡å—ä¹‹é—´å°½é‡ä½è€¦åˆã€‚</p>
<h3 data-id="heading-8">2.3 åˆ’åˆ†æ¨¡å—</h3>
<p>åœ¨ UML ä¸­ï¼Œå¯ä»¥ç”¨åŒ…æ¥è¡¨ç¤ºæ¨¡å—ï¼ŒåŒ…çš„å†…éƒ¨å¯ä»¥åŒ…å«å®ä½“ï¼Œä¹Ÿå¯ä»¥åŒ…å«å¦å¤–çš„åŒ…ã€‚åŒ…çš„ç¬¦å·æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cc95aa137cc41c1bcb7cad30969de62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=VavWPy4DyZ2QP2cNt%2BZtGPqrqTs%3D" alt="image.png" loading="lazy"/></p>
<p>ç»è¿‡æ¨¡å—åŒ–å¤„ç†ä¹‹åï¼ŒæŠŠæ¨¡å‹åˆ†æˆäº† 4 ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯ç§Ÿæˆ·ç®¡ç†ã€ç»„ç»‡ç®¡ç†ã€é¡¹ç›®ç®¡ç†å’Œå·¥æ—¶ç®¡ç†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d7662e333b4921abf2db14e9dd875e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=b2%2B%2F9sRe6AlUExhVQrvCEkhN8hk%3D" alt="image.png" loading="lazy"/></p>
<p>æœ‰äº†æ¨¡å—ï¼Œå°±å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢ç†è§£æ¨¡å‹ã€‚</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯å®è§‚å±‚é¢ã€‚å®è§‚å±‚é¢åªå…³å¿ƒæ¨¡å‹ä¸­æœ‰å“ªäº›æ¨¡å—ï¼Œä»¥åŠæ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸å…³å¿ƒæ¨¡å—çš„å†…éƒ¨ç»†èŠ‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a341573bbeec45aa87296506a94c6f95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=o9%2B5XkpbeJWS6i5OR4Po8frFFFs%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶ä¸­çš„è™šçº¿è¡¨ç¤ºä¾èµ–å…³ç³»ï¼Œç®­å¤´ç”±ä¾èµ–æ–¹æŒ‡å‘è¢«ä¾èµ–æ–¹ã€‚</p>
<p>ç¬¬äºŒä¸ªå±‚é¢æ˜¯å¾®è§‚å±‚é¢ï¼Œä¹Ÿå°±æ˜¯æ·±å…¥åˆ°æ¨¡å—å†…éƒ¨ï¼Œäº†è§£å®ä½“å’Œå…³è”ç­‰ç­‰çš„ç»†èŠ‚ã€‚</p>
<p>ä¸ºäº†å®Œå–„å¼€å‘è¿‡ç¨‹ï¼Œæˆ‘ä»¬è¿˜è¦å†è¿›è¡Œä¸¤ä¸ªå®è·µï¼šä¸€ä¸ªæ˜¯å®Œå–„ä¸šåŠ¡è§„åˆ™ï¼Œå¦ä¸€ä¸ªæ˜¯å»ºç«‹è¯æ±‡è¡¨ã€‚</p>
<p>è¯æ±‡è¡¨å¯ä»¥è§„èŒƒé¢†åŸŸæ¨¡å‹ä¸­çš„è¯æ±‡ï¼Œå¹¶ç”¨äºåç»­ç¼–ç¨‹ä¸­çš„å‘½å</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ce1f5f6b9d04aa9b1c9290092f085f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=dxVyqy5wjyYZC5%2FDR%2FZ0wothMiA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/764437b141514eefacc3a95ab6c3fb9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemVwaHly:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563144&amp;x-signature=sWNVat6V8rvATOimXtKValcoAnU%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€pythonå­¦ä¹ ç¬”è®°2ã€‘äºŒPythonä»‹ç»ä»¥åŠä»å…¥é—¨åˆ°ç¬¬ä¸€ä¸ªç¨‹åºï¼ˆéå¸¸è¯¦ç»†ï¼‰]]></title>    <link>https://juejin.cn/post/7601387539334070308</link>    <guid>https://juejin.cn/post/7601387539334070308</guid>    <pubDate>2026-02-01T15:14:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601387539334070308" data-draft-id="7601477334931619846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€pythonå­¦ä¹ ç¬”è®°2ã€‘äºŒPythonä»‹ç»ä»¥åŠä»å…¥é—¨åˆ°ç¬¬ä¸€ä¸ªç¨‹åºï¼ˆéå¸¸è¯¦ç»†ï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-01T15:14:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±åƒæ©˜å­æ©™å­æŸšå­"/> <meta itemprop="url" content="https://juejin.cn/user/3276985492575864"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€pythonå­¦ä¹ ç¬”è®°2ã€‘äºŒPythonä»‹ç»ä»¥åŠä»å…¥é—¨åˆ°ç¬¬ä¸€ä¸ªç¨‹åºï¼ˆéå¸¸è¯¦ç»†ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3276985492575864/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±åƒæ©˜å­æ©™å­æŸšå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T15:14:57.000Z" title="Sun Feb 01 2026 15:14:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.csdn.net%2F%3Fspm%3D1001.2100.3001.4476" target="_blank" title="https://www.csdn.net/?spm=1001.2100.3001.4476" ref="nofollow noopener noreferrer"><img src="" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.csdn.net%2Fmp_blog%2Fmanage%2Farticle%3Fspm%3D1015.2103.3001.5298" title="https://mp.csdn.net/mp_blog/manage/article?spm=1015.2103.3001.5298" target="_blank" ref="nofollow noopener noreferrer">**</a></p>
<p>å‘å¸ƒæ–‡ç« Â **</p>
<p>30/100</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.csdn.net%2Fmp_blog%2Fmanage%2Farticle%3Fspm%3D1015.2103.3001.5298" target="_blank" title="https://mp.csdn.net/mp_blog/manage/article?spm=1015.2103.3001.5298" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d29fe9a67c60462188243a1df0b80431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=hxFZww5BNSM%2Bhi%2B9%2B4BFhRJH2W0%3D" alt="weixin_62173811" loading="lazy"/></a></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">##### ä¸€ç¨‹åºè®¾è®¡è¯­è¨€</span>


*   æœºå™¨è¯­è¨€ï¼šæ˜¯ä¸€ç§äºŒè¿›åˆ¶è¯­è¨€ï¼Œå®ƒç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶ä»£ç è¡¨è¾¾æŒ‡ä»¤ï¼Œæ˜¯è®¡ç®—æœºç¡¬ä»¶å¯ä»¥ç›´æ¥è¯†åˆ«å’Œæ‰§è¡Œçš„ç¨‹åºè®¾è®¡è¯­è¨€
*   æ±‡ç¼–è¯­è¨€ï¼šä½¿ç”¨æ–¹ä¾¿åŠ©è®°ç¬¦ä¸æœºå™¨è¯­è¨€ä¸­çš„æŒ‡ä»¤ä¸€ä¸€å¯¹åº”
*   é«˜çº§è¯­è¨€ï¼šæ˜¯æ¥è¿‘è‡ªç„¶è¯­è¨€çš„ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡è¯­è¨€ï¼ŒPythonã€Javaéƒ½æ˜¯é«˜çº§è¯­è¨€


<span class="hljs-comment">##### äºŒç¼–è¯‘ä¸è§£é‡Š</span>


ç¼–è¯‘å‹ï¼ˆåˆå«é™æ€è¯­è¨€ï¼‰æ˜¯æŒ‡å°†æºä»£ç è½¬æ¢æˆç›®æ ‡ä»£ç çš„è¿‡ç¨‹ï¼Œé€šå¸¸æºä»£ç æ˜¯é«˜çº§è¯­è¨€ä»£ç ï¼Œç›®æ ‡ä»£ç æ˜¯æœºå™¨è¯­è¨€ä»£ç ï¼Œæ‰§è¡Œç¼–è¯‘çš„è®¡ç®—æœºç¨‹åºç§°ä¸ºç¼–è¯‘å™¨ï¼ˆCompilerï¼‰
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37d475f21d004cb3bf83c8a94fc55eaa~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=UNPQg%2BsGogtNJnw8bsZpH2UInXo%3D)


è§£é‡Šå‹(åˆå«è„šæœ¬è¯­è¨€ï¼‰æ˜¯æŒ‡å°†æºä»£ç é€æ¡è½¬æ¢æˆç›®æ ‡ä»£ç åŒæ—¶é€æ¡è¿è¡Œç›®æ ‡ä»£ç çš„è¿‡ç¨‹ï¼Œæ‰§è¡Œè§£é‡Šçš„è®¡ç®—æœºç¨‹åºç§°ä¸ºè§£é‡Šå™¨ï¼ˆInterpreterï¼‰
!![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67b69d1669024492b1689e689127d06b~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=n3PLinKh8vS5wt6qkWWCJ%2Bnx3zs%3D)




<span class="hljs-comment">##### ä¸‰Pythonè¯­è¨€ç®€ä»‹</span>


*   Pythonè¯­è¨€çš„å‘æ˜äººâ€”å‰å¤š.èŒƒç½—è‹å§†ï¼ˆè·å…°äººï¼‰
*   Pythonè¯­è¨€çš„è®¾è®¡éå¸¸ä¼˜é›…ã€æ˜ç¡®ã€ç®€å•
*   Pythonè¯­è¨€å…·æœ‰ä¸°å¯Œå’Œå¼ºå¤§çš„åº“ï¼Œèƒ½å¤ŸæŠŠä½¿ç”¨å…¶ä»–è¯­è¨€åˆ¶ä½œçš„å„ç§æ¨¡å—ï¼ˆå°¤å…¶æ˜¯C/C++)å¾ˆè½»æ¾åœ°è”ç»“åœ¨ä¸€èµ·


<span class="hljs-comment">##### å››Pythonè¯­è¨€çš„å‘å±•</span>


*   Pythonè¯­è¨€æ˜¯åœ¨<span class="hljs-number">1989</span>å¹´è¯ç”Ÿçš„ï¼Œä½†æ˜¯æœ€æ—©çš„å¯ç”¨ç‰ˆæœ¬è¯ç”Ÿäº<span class="hljs-number">1991</span>å¹´ï¼Œåœ¨ä¹‹åçš„è¿‘<span class="hljs-number">20</span>å¹´é—´åˆç»å†äº†Python2åˆ°Python3çš„æ¼”åŒ–è¿‡ç¨‹ã€‚
*   <span class="hljs-number">2000</span>å¹´<span class="hljs-number">10</span>æœˆï¼ŒPython2<span class="hljs-number">.0</span>ç‰ˆæœ¬å‘å¸ƒï¼Œå¼€å¯äº†Pythonå¹¿æ³›åº”ç”¨çš„æ–°æ—¶ä»£ã€‚
*   <span class="hljs-number">2010</span>å¹´ï¼ŒPython2.xç³»ç»Ÿå‘å¸ƒäº†æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸»ç‰ˆæœ¬å·ä¸º<span class="hljs-number">2.7</span>ï¼Œç”¨äºç»ˆç»“<span class="hljs-number">2.</span>xç³»åˆ—ç‰ˆæœ¬çš„çš„å‘å±•ï¼Œå¹¶ä¸”ä¸å†è¿›è¡Œé‡å¤§æ”¹è¿›ã€‚
*   <span class="hljs-number">2008</span>å¹´<span class="hljs-number">12</span>æœˆï¼ŒPython3<span class="hljs-number">.0</span>ç‰ˆæœ¬å‘å¸ƒï¼Œè¿™ä¸ªç‰ˆæœ¬çš„è§£é‡Šå™¨å†…éƒ¨å®Œå…¨é‡‡ç”¨é¢å‘å¯¹è±¡æ–¹å¼å®ç°ï¼Œåœ¨è¯­æ³•å±‚é¢åšäº†å¾ˆå¤šé‡å¤§æ”¹è¿›ã€‚
*   <span class="hljs-number">2016</span>å¹´ï¼Œæ‰€æœ‰Pythoné‡è¦çš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“éƒ½å·²ç»åœ¨Python3.xç‰ˆæœ¬ä¸‹è¿›è¡Œæ¼”è¿›å’Œå‘å±•ã€‚Pythonè¯­è¨€ç‰ˆæœ¬å‡çº§è¿‡ç¨‹å®£å‘Šç»“æŸã€‚
*


<span class="hljs-comment">##### äº”Pythonè¯­è¨€çš„ç‰¹ç‚¹</span>


![å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ ](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c3d012097d44d7fb45caa5ae3826bb4~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=bwBm6QOSkZbfMxUeJGS%2BL56%2Bbwk%3D)



<span class="hljs-comment">##### å…­Pythonåº”ç”¨é¢†åŸŸ</span>


![å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ ](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01215664de8d4fc6b9a607d6d02e0ed8~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=77L6yDDl7sMvd%2F782hk1XNN%2BXzk%3D)



<span class="hljs-comment">##### ä¸ƒPythonå¼€å‘å·¥å…·</span>


Pythonè‡ªå¸¦çš„é›†æˆå¼€å‘å­¦ä¹ ç¯å¢ƒIDLE
ï¼ˆIntegrated  Development Learning Environmentï¼‰


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b97c7c7ec9740918e6c5874dcac5b1b~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=q4ZBz24se8kIRQS6kakxXbmZK6k%3D)


ç¬¬ä¸‰æ–¹å¼€å‘å·¥å…·PyCharm
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9c54699a11344d39411015ac7bbd664~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=bcx46NVKg3n3yQDQ2c2xVjNrQzk%3D)



<span class="hljs-comment">##### å…«ç¼–å†™ç¬¬ä¸€ä¸ªPythonç¨‹åº</span>


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09846496dcfe4114932fb4a24bb538c0~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=8eZ8kiGr6zZVxbbNyjQ0MoeHUIw%3D)



<span class="hljs-comment">###### 1 IPOç¨‹åºç¼–å†™æ–¹æ³•</span>


ï¼ˆIPOï¼ˆInputï¼ŒProcessï¼ŒOutputï¼‰ï¼‰
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45383fae3bbc4ebba298675e80a60fcc~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=VuNwIaS7LPbmyK9Y%2FtWt916wh0A%3D)



<span class="hljs-comment">###### 2 åŸºæœ¬çš„è¾“å‡ºå‡½æ•°print</span>


è¯­æ³•ç»“æ„ï¼š <span class="hljs-built_in">print</span>(è¾“å‡ºå†…å®¹)
<span class="hljs-built_in">print</span>()å‡½æ•°å®Œæ•´çš„è¯­æ³•æ ¼å¼ï¼š
<span class="hljs-built_in">print</span>(value,...,sep=â€˜ â€™,end=â€˜\nâ€™,file=<span class="hljs-literal">None</span>)
sepæ˜¯ç©ºæ ¼ç¬¦


**<span class="hljs-comment">#å®ä¾‹01  pirntå‡½æ•°ç®€å•è¾“å‡º**</span>


```
<span class="hljs-comment">#å®ä¾‹01  pirntå‡½æ•°ç®€å•è¾“å‡º</span>
a=<span class="hljs-number">100</span> <span class="hljs-comment"># å˜é‡aï¼Œ</span>
b=<span class="hljs-number">50</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">90</span>)
<span class="hljs-built_in">print</span>(a) <span class="hljs-comment">#è¾“å‡ºå˜é‡çš„å€¼ï¼Œaçš„å€¼ä¸º100</span>
<span class="hljs-built_in">print</span>(a*b) <span class="hljs-comment">#è¾“å‡ºa*bçš„è¿ç®—ç»“æœ</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬æ¬¢è¿ä½ !'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŒ—äº¬æ¬¢è¿ä½ !"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'''åŒ—äº¬æ¬¢è¿ä½ !'''</span>)           <span class="hljs-comment">#ä¸‰ä¸ªå•å¼•å·ä¹Ÿå¯ä»¥</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"""åŒ—äº¬æ¬¢è¿ä½ !"""</span>)         <span class="hljs-comment">#ä¸‰ä¸ªåŒå¼•å·ä¹Ÿå¯ä»¥</span>

<span class="hljs-comment">#è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
<span class="hljs-number">90</span>
<span class="hljs-number">100</span>
<span class="hljs-number">5000</span>
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !

```


**å®ä¾‹02 æ‰“å°æ¢è¡Œå’Œä¸æ¢è¡Œ**

    å®ä¾‹02 
    <span class="hljs-comment">#ä¸æ¢è¡Œä¸€æ¬¡è¾“å‡ºå¤šä¸ªæ•°æ®</span>
    a=<span class="hljs-number">100</span> <span class="hljs-comment"># å˜é‡aï¼Œ</span>
    b=<span class="hljs-number">50</span>
    <span class="hljs-built_in">print</span>(a,b,<span class="hljs-string">'è¦ä¹ˆå‡ºä¼—ï¼Œè¦ä¹ˆå‡ºå±€ï¼ï¼ï¼'</span>)

    <span class="hljs-comment"># (),[],{}é‡Œçš„å¤šè¡Œå†…å®¹ä¸ç”¨\è¿æ¥ï¼Œä½†éœ€è¦æ¯è¡Œå¼•èµ·æ¥;æ‰“å°å‡ºæ¥çš„ç»“æœä¸æ¢è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello world"</span>
    <span class="hljs-string">"python"</span>) 

    <span class="hljs-comment">#å¤šä¸ªprintå‡½æ•°ç»“æœåœ¨ä¸€è¡Œæ˜¾ç¤º</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬'</span>,end=<span class="hljs-string">'--&gt;'</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ¬¢è¿ä½ '</span>) <span class="hljs-comment">#æ²¡æœ‰ä¿®æ”¹ç»“æŸç¬¦ï¼Œæ‰€æœ‰printä¹‹åä¼šæœ‰ä¸ªç©ºè¡Œ</span>

    <span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
    <span class="hljs-number">100</span> <span class="hljs-number">50</span> è¦ä¹ˆå‡ºä¼—ï¼Œè¦ä¹ˆå‡ºå±€ï¼ï¼ï¼
    hello worldpython
    åŒ—äº¬--&gt;æ¬¢è¿ä½ 


```
<span class="hljs-comment">###æ‰“å°çš„ç»“æœä¼šæ¢è¡Œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello\npython"</span>)

<span class="hljs-comment">###æ‰“å°çš„ç»“æœä¼šæ¢è¡Œï¼Œä¸‰ä¸ªå•å¼•å·å’Œä¸‰ä¸ªåŒå¼•å·éƒ½æ˜¯é‡Œé¢æ˜¯ä»€ä¹ˆæ ·å­æ‰“å°çš„å°±æ˜¯ä»€ä¹ˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"""hello 
python"""</span>)



<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
hello 
python
hello 
python

```


**å®ä¾‹03 è¾“å‡ºASCIIç æ‰€å¯¹åº”çš„å­—ç¬¦**


```
<span class="hljs-comment">#å®ä¾‹03 è¾“å‡ºASCIIç æ‰€å¯¹åº”çš„å­—ç¬¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'b'</span>)  <span class="hljs-comment">#ç›´æ¥è¾“å‡ºäº†b</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">98</span>)) <span class="hljs-comment">#ä¹Ÿè¾“å‡ºbã€‚ä½¿ç”¨chr() å°†98è½¬æ¢æˆASCIIè¡¨ä¸­çš„å­—ç¬¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'C'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">67</span>)) 
<span class="hljs-built_in">print</span>(<span class="hljs-string">'8'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">56</span>)) 
<span class="hljs-built_in">print</span>(<span class="hljs-string">'['</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">91</span>)) 


<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
b
b
C
C
<span class="hljs-number">8</span>
<span class="hljs-number">8</span>
[
[

```


**å®ä¾‹04 è¾“å‡ºä¸­æ–‡Unicodeç **

    <span class="hljs-comment">#ä¸­æ–‡ç¼–ç çš„èŒƒå›´æ˜¯[u4e00~u9fa5]</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">ord</span>(<span class="hljs-string">'åŒ—'</span>)) 
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">ord</span>(<span class="hljs-string">'äº¬'</span>)) 
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">21271</span>),<span class="hljs-built_in">chr</span>(<span class="hljs-number">20140</span>)) 

    <span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
    <span class="hljs-number">21271</span>
    <span class="hljs-number">20140</span>
    åŒ— äº¬


**å®ä¾‹05 å°†å†…å®¹è¾“å…¥åˆ°æ–‡ä»¶**

    <span class="hljs-comment">#å®ä¾‹05 å°†å†…å®¹è¾“å…¥åˆ°æ–‡ä»¶</span>
    fp=<span class="hljs-built_in">open</span>(<span class="hljs-string">'note.txt'</span>,<span class="hljs-string">'w'</span>)  <span class="hljs-comment">#æ‰“å¼€æ–‡ä»¶ w----&gt;write</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬æ¬¢è¿ä½ '</span>,file=fp) <span class="hljs-comment">#å°†å†…å®¹å†™å…¥æ–‡ä»¶</span>
    fp.close() <span class="hljs-comment">#å…³é—­æ–‡ä»¶</span>

    <span class="hljs-comment">#æ‰§è¡Œè„šæœ¬åä¼šåœ¨åŒçº§ç›®å½•çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶</span>


**å®ä¾‹06 ä½¿ç”¨è¿æ¥ç¬¦+  ç”¨æ¥è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²**


```
<span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬æ¬¢è¿ä½ '</span>+<span class="hljs-string">'2023'</span>)

<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
åŒ—äº¬æ¬¢è¿ä½ <span class="hljs-number">2023</span> 

```


**å®ä¾‹07 ä½¿ç”¨VT100æ§åˆ¶ç (ç”¨æ¥åœ¨ç»ˆç«¯æ‰©å±•æ˜¾ç¤ºçš„ä»£ç )å®ç°æœ‰é¢œè‰²çš„æ‰“å°**

    pythoné‡Œå®ç°çš„æœ‰é¢œè‰²æ‰“å°
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;31mhello world\033[0m"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;32mhello world\033[0m"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;33mhello world\033[0m"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;34mhello world\033[0m"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;35mhello world\033[0m"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;36mhello world\033[0m"</span>)
    ç»“æœå¦‚ä¸‹:


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/257c3bb79fcd4e7c9ed963a4127f5c55~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=YcAlErjXF4fiQp9b27bopEuS6Nc%3D)



**å¼‚å¸¸**


```
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;35mhello world\033[0m"</span>)
 <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[31;1;36mhello world\033[0m"</span>)
 
æ‰§è¡Œä¹‹å
IndentationError: unexpected indentï¼ˆè¯‘ä¸º æ„å¤–ç¼©è¿›ï¼‰
<span class="hljs-comment">#è¡¨ç¤ºç¼©è¿›é”™è¯¯</span>


<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello\npython"</span>) <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello\npython"</span>)

æ‰§è¡Œä¹‹å
SyntaxError: invalid syntaxï¼ˆè¯‘ä¸º è¯­æ³•é”™è¯¯ï¼šæ— æ•ˆçš„è¯­æ³•ï¼‰
<span class="hljs-comment">#è¡¨ç¤ºä¸€è¡Œä¸èƒ½æ‰“å°å¤šæ¬¡</span>


```


<span class="hljs-comment">###### 3 Pythonä¸­çš„æ³¨é‡Š</span>


*   ç¨‹åºå‘˜åœ¨ä»£ç ä¸­å¯¹ä»£ç åŠŸèƒ½è§£é‡Šè¯´æ˜çš„æ ‡æ³¨æ€§æ–‡å­—
*   å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§
*   æ³¨é‡Šçš„å†…å®¹å°†è¢«Pythonè§£é‡Šå™¨å¿½ç•¥ï¼Œä¸è¢«è®¡ç®—æœºæ‰§è¡Œ
*   å•è¡Œæ³¨é‡Šã€å¤šè¡Œæ³¨é‡Šå’Œä¸­æ–‡å£°æ˜æ³¨é‡Š


å°æŠ€å·§:åœ¨pycharmé‡Œå¯ä»¥ç”¨ctrl+/æ¥ç»™å¤šè¡ŒåŠ <span class="hljs-comment">#æ³¨é‡Šæˆ–å»æ‰æ³¨é‡Š</span>
**å•è¡Œæ³¨é‡Š**
äº•å·åé¢æœ‰ä¸ªç©ºæ ¼æ›´è§„èŒƒ
åœ¨ä»£ç çš„åé¢æ·»åŠ æ³¨é‡Šï¼šæ³¨é‡Šå’Œä»£ç ä¹‹é—´è¦è‡³å°‘æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œ æ›´è§„èŒƒ


```
<span class="hljs-comment"># è¦æ±‚ä»é”®ç›˜è¾“å…¥å‡ºç”Ÿå¹´ä»½ï¼Œè¦æ±‚æ˜¯4ä½çš„å¹´ä»½ï¼Œä¸¾ä¾‹1990</span>

year=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿå¹´ä»½:'</span>)
year=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿå¹´ä»½:'</span>)  <span class="hljs-comment"># è¦æ±‚ä»é”®ç›˜è¾“å…¥å‡ºç”Ÿå¹´ä»½ï¼Œè¦æ±‚æ˜¯4ä½çš„å¹´ä»½ï¼Œä¸¾ä¾‹1990</span>

```


**å¤šè¡Œæ³¨é‡Š**
ä¸‰ä¸ªå•å¼•å·ä¹‹é—´  æˆ–è€…ä¸‰ä¸ªåŒå¼•å·ä¹‹é—´éƒ½å¯ä»¥è¡¨ç¤ºå¤šè¡Œæ³¨é‡Š


```
<span class="hljs-string">'''
ç‰ˆæƒæ‰€æœ‰ï¼šaaaaaa
æ–‡ä»¶åï¼šç¤ºä¾‹aaa
'''</span>


<span class="hljs-string">"""
ç‰ˆæƒæ‰€æœ‰ï¼šaaaaaa
æ–‡ä»¶åï¼šç¤ºä¾‹aaa
åˆ›å»ºäººï¼šaaaa
"""</span>

```


**ä¸­æ–‡å£°æ˜æ³¨é‡Š**


```
<span class="hljs-comment"># coding=utf-8</span>
<span class="hljs-comment"># ä¸­æ–‡å£°æ˜æ³¨é‡Š,ä¸€å®šå¸è½½ç¬¬ä¸€è¡Œ</span>
<span class="hljs-comment">#å¦‚æœç¬¬ä¸€è¡Œ coding=gbkã€‚ é‚£ä¹ˆä¸‹é¢éªŒè¯çš„æ—¶å€™ï¼Œä¼šçœ‹è§ç¼–ç æ ¼å¼å°±æ˜¯ANSIäº†</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'hello'</span>)


<span class="hljs-comment">#å¦‚ä½•éªŒè¯ï¼šåœ¨ç”µè„‘ä¸Šæ‰¾æ‰“è¿™ä¸ªpyæ–‡ä»¶ä½ç½®ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œç‚¹å‡»å¦å­˜ä¸ºï¼Œåœ¨å¼¹çª—å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡æ¡£æ˜¯utf-8</span>


```


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/<span class="hljs-number">7</span>10ae605bf774326a91c55f8f2625ce5~tplv-73owjymdk6-jj-mark-v1:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=<span class="hljs-number">1770563697</span>&amp;x-signature=JArnIEYP13sw00yQ%2B0jfihOiXyE%3D)



<span class="hljs-comment">###### ä»£ç ç¼©è¿›</span>


æ˜¯æŒ‡æ¯è¡Œè¯­å¥å¼€å§‹å‰çš„ç©ºç™½åŒºåŸŸ
ç”¨æ¥è¡¨ç¤ºPythonç¨‹åºé—´çš„åŒ…å«å’Œå±‚æ¬¡å…³ç³»
ç±»å®šä¹‰ã€å‡½æ•°å®šä¹‰ã€æµç¨‹æ§åˆ¶è¯­å¥ä»¥åŠå¼‚å¸¸å¤„ç†è¯­å¥ç­‰è¡Œå°¾çš„å†’å·å’Œä¸‹ä¸€è¡Œçš„ç¼©è¿›è¡¨ç¤ºä¸€ä¸ªä»£ç å—çš„å¼€å§‹ï¼Œè€Œç¼©è¿›ç»“æŸï¼Œåˆ™è¡¨ç¤ºä¸€ä¸ªä»£ç å—çš„ç»“æŸ
é€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨<span class="hljs-number">4</span>ä¸ªç©ºæ ¼ä½œä¸ºä¸€ä¸ªç¼©è¿›é‡


```
<span class="hljs-comment">#ä¸€èˆ¬ä»£ç ï¼Œä¸éœ€è¦ç¼©è¿›</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'hello'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'world'</span>)

<span class="hljs-comment"># ç±»çš„å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>:
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment">#å‡½æ•°çš„å®šä¹‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fun</span>():
    <span class="hljs-keyword">pass</span>

```


<span class="hljs-comment">###### 4 ä»£ç è§„èŒƒ</span>


**pycharmä¸­ä¼šæœ‰æç¤ºä¸è§„èŒƒï¼Œä¸ç”¨ç‰¹æ„è®°è§„èŒƒ**


Python å®˜æ–¹æä¾›æœ‰ä¸€ç³»åˆ— PEPï¼ˆPython Enhancement Proposalsï¼‰ æ–‡æ¡£
å…¶ä¸­ç¬¬ <span class="hljs-number">8</span> ç¯‡æ–‡æ¡£ä¸“é—¨é’ˆå¯¹ Python çš„ä»£ç æ ¼å¼ ç»™å‡ºäº†å»ºè®®ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„ PEP <span class="hljs-number">8</span>


æ–‡æ¡£åœ°å€ï¼š&lt;https://www.python.org/dev/peps/pep-0008/&gt;


è°·æ­Œæœ‰å¯¹åº”çš„ä¸­æ–‡æ–‡æ¡£ï¼š&lt;http://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_style_rules/&gt;


<span class="hljs-comment">##### ä¹å®æˆ˜</span>


```
å®æˆ˜ä¸€ï¼šè¾“å‡ºâ€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonâ€
éœ€æ±‚ï¼šä½¿ç”¨<span class="hljs-built_in">print</span>()å‡½æ•°å°†â€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonâ€è¾“å‡ºåˆ°æ–‡æœ¬æ–‡ä»¶text.txtä¸­

fp=<span class="hljs-built_in">open</span>(<span class="hljs-string">'text.txt'</span>,<span class="hljs-string">'w'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'äººç”Ÿè‹¦çŸ­,æˆ‘ç”¨python'</span>,file=fp)
fp.close()


å®æˆ˜äºŒï¼šè¾“å‡ºä¸ªäººè‡ªæˆ‘ä»‹ç»
éœ€æ±‚ï¼šä½¿ç”¨<span class="hljs-built_in">input</span>()å‡½æ•°ä»é”®ç›˜è¾“å…¥å§“åã€å¹´é¾„ï¼Œåº§å³é“­ï¼Œå¹¶ä½¿ç”¨<span class="hljs-built_in">print</span>()å‡½æ•°è¾“å‡ºåˆ°æ§åˆ¶å°


<span class="hljs-comment"># coding=utf-8</span>
name=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å§“å:'</span>)
age=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å¹´é¾„:'</span>)
believe=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„åº§å³é“­:'</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">'--------è‡ªæˆ‘ä»‹ç»-----------'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å§“å:'</span>,name)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å¹´é¾„:'</span>,age)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'åº§å³é“­:'</span>,believe)

```
</code></pre>
<h5 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸€ç¨‹åºè®¾è®¡è¯­è¨€</h5>
<ul>
<li>æœºå™¨è¯­è¨€ï¼šæ˜¯ä¸€ç§äºŒè¿›åˆ¶è¯­è¨€ï¼Œå®ƒç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶ä»£ç è¡¨è¾¾æŒ‡ä»¤ï¼Œæ˜¯è®¡ç®—æœºç¡¬ä»¶å¯ä»¥ç›´æ¥è¯†åˆ«å’Œæ‰§è¡Œçš„ç¨‹åºè®¾è®¡è¯­è¨€</li>
<li>æ±‡ç¼–è¯­è¨€ï¼šä½¿ç”¨æ–¹ä¾¿åŠ©è®°ç¬¦ä¸æœºå™¨è¯­è¨€ä¸­çš„æŒ‡ä»¤ä¸€ä¸€å¯¹åº”</li>
<li>é«˜çº§è¯­è¨€ï¼šæ˜¯æ¥è¿‘è‡ªç„¶è¯­è¨€çš„ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡è¯­è¨€ï¼ŒPythonã€Javaéƒ½æ˜¯é«˜çº§è¯­è¨€</li>
</ul>
<h5 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒç¼–è¯‘ä¸è§£é‡Š</h5>
<p>ç¼–è¯‘å‹ï¼ˆåˆå«é™æ€è¯­è¨€ï¼‰æ˜¯æŒ‡å°†æºä»£ç è½¬æ¢æˆç›®æ ‡ä»£ç çš„è¿‡ç¨‹ï¼Œé€šå¸¸æºä»£ç æ˜¯é«˜çº§è¯­è¨€ä»£ç ï¼Œç›®æ ‡ä»£ç æ˜¯æœºå™¨è¯­è¨€ä»£ç ï¼Œæ‰§è¡Œç¼–è¯‘çš„è®¡ç®—æœºç¨‹åºç§°ä¸ºç¼–è¯‘å™¨ï¼ˆCompilerï¼‰<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58abb72cfd474d3b8cd1da5b11e0345e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=4hYgGMJHIdrL6XkO0mb%2FCy7u%2F4Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è§£é‡Šå‹(åˆå«è„šæœ¬è¯­è¨€ï¼‰æ˜¯æŒ‡å°†æºä»£ç é€æ¡è½¬æ¢æˆç›®æ ‡ä»£ç åŒæ—¶é€æ¡è¿è¡Œç›®æ ‡ä»£ç çš„è¿‡ç¨‹ï¼Œæ‰§è¡Œè§£é‡Šçš„è®¡ç®—æœºç¨‹åºç§°ä¸ºè§£é‡Šå™¨ï¼ˆInterpreterï¼‰<br/>
!<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18703ad6b69849b7ab9e3557321fd096~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=xZ035vVK%2BPh8Tpoi9HqobzxcPtc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h5 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰Pythonè¯­è¨€ç®€ä»‹</h5>
<ul>
<li>Pythonè¯­è¨€çš„å‘æ˜äººâ€”å‰å¤š.èŒƒç½—è‹å§†ï¼ˆè·å…°äººï¼‰</li>
<li>Pythonè¯­è¨€çš„è®¾è®¡éå¸¸ä¼˜é›…ã€æ˜ç¡®ã€ç®€å•</li>
<li>Pythonè¯­è¨€å…·æœ‰ä¸°å¯Œå’Œå¼ºå¤§çš„åº“ï¼Œèƒ½å¤ŸæŠŠä½¿ç”¨å…¶ä»–è¯­è¨€åˆ¶ä½œçš„å„ç§æ¨¡å—ï¼ˆå°¤å…¶æ˜¯C/C++)å¾ˆè½»æ¾åœ°è”ç»“åœ¨ä¸€èµ·</li>
</ul>
<h5 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››Pythonè¯­è¨€çš„å‘å±•</h5>
<ul>
<li>Pythonè¯­è¨€æ˜¯åœ¨1989å¹´è¯ç”Ÿçš„ï¼Œä½†æ˜¯æœ€æ—©çš„å¯ç”¨ç‰ˆæœ¬è¯ç”Ÿäº1991å¹´ï¼Œåœ¨ä¹‹åçš„è¿‘20å¹´é—´åˆç»å†äº†Python2åˆ°Python3çš„æ¼”åŒ–è¿‡ç¨‹ã€‚</li>
<li>2000å¹´10æœˆï¼ŒPython2.0ç‰ˆæœ¬å‘å¸ƒï¼Œå¼€å¯äº†Pythonå¹¿æ³›åº”ç”¨çš„æ–°æ—¶ä»£ã€‚</li>
<li>2010å¹´ï¼ŒPython2.xç³»ç»Ÿå‘å¸ƒäº†æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸»ç‰ˆæœ¬å·ä¸º2.7ï¼Œç”¨äºç»ˆç»“2.xç³»åˆ—ç‰ˆæœ¬çš„çš„å‘å±•ï¼Œå¹¶ä¸”ä¸å†è¿›è¡Œé‡å¤§æ”¹è¿›ã€‚</li>
<li>2008å¹´12æœˆï¼ŒPython3.0ç‰ˆæœ¬å‘å¸ƒï¼Œè¿™ä¸ªç‰ˆæœ¬çš„è§£é‡Šå™¨å†…éƒ¨å®Œå…¨é‡‡ç”¨é¢å‘å¯¹è±¡æ–¹å¼å®ç°ï¼Œåœ¨è¯­æ³•å±‚é¢åšäº†å¾ˆå¤šé‡å¤§æ”¹è¿›ã€‚</li>
<li>2016å¹´ï¼Œæ‰€æœ‰Pythoné‡è¦çš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“éƒ½å·²ç»åœ¨Python3.xç‰ˆæœ¬ä¸‹è¿›è¡Œæ¼”è¿›å’Œå‘å±•ã€‚Pythonè¯­è¨€ç‰ˆæœ¬å‡çº§è¿‡ç¨‹å®£å‘Šç»“æŸã€‚</li>
<li/>
</ul>
<h5 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äº”Pythonè¯­è¨€çš„ç‰¹ç‚¹</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65bd4be9098442948762c4640c08b89c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=%2B0aqoUX3iG0YqKJ4GkWBDr3ULpw%3D" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ " loading="lazy"/></p>
<h5 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…­Pythonåº”ç”¨é¢†åŸŸ</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/555ff10d63da47dabc70179b9e6e1d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=iNQBr%2Bg9NT65x%2FfJCgySCN%2FdH4E%3D" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ " loading="lazy"/></p>
<h5 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸ƒPythonå¼€å‘å·¥å…·</h5>
<p>Pythonè‡ªå¸¦çš„é›†æˆå¼€å‘å­¦ä¹ ç¯å¢ƒIDLE<br/>
ï¼ˆIntegrated Development Learning Environmentï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a7e2695a14d47719821f11e88fddd9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=FGKozGGZhkx19SsESzP57oGEOlI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ–¹å¼€å‘å·¥å…·PyCharm<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c3f63ebc64b4e2bb3828790f772a2b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=WSHS6GzE44M42eA67Z8Y%2FK5o4T4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h5 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…«ç¼–å†™ç¬¬ä¸€ä¸ªPythonç¨‹åº</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83761128bf37410e841d62206c031387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=CthyE4AjnXEkHfw5dMSwomZyg10%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h6 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1 IPOç¨‹åºç¼–å†™æ–¹æ³•</h6>
<p>ï¼ˆIPOï¼ˆInputï¼ŒProcessï¼ŒOutputï¼‰ï¼‰<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a0fbd8b68f548ecbcef0fade9c805ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=dnC1G8xM4VHThIz9d3nRaDNlYEg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h6 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 åŸºæœ¬çš„è¾“å‡ºå‡½æ•°print</h6>
<p>è¯­æ³•ç»“æ„ï¼š print(è¾“å‡ºå†…å®¹)<br/>
print()å‡½æ•°å®Œæ•´çš„è¯­æ³•æ ¼å¼ï¼š<br/>
print(value,â€¦,sep=â€˜ â€™,end=â€˜\nâ€™,file=None)<br/>
sepæ˜¯ç©ºæ ¼ç¬¦</p>
<p><strong>#å®ä¾‹01 pirntå‡½æ•°ç®€å•è¾“å‡º</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#å®ä¾‹01  pirntå‡½æ•°ç®€å•è¾“å‡º</span>
a=<span class="hljs-number">100</span> <span class="hljs-comment"># å˜é‡aï¼Œ</span>
b=<span class="hljs-number">50</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">90</span>)
<span class="hljs-built_in">print</span>(a) <span class="hljs-comment">#è¾“å‡ºå˜é‡çš„å€¼ï¼Œaçš„å€¼ä¸º100</span>
<span class="hljs-built_in">print</span>(a*b) <span class="hljs-comment">#è¾“å‡ºa*bçš„è¿ç®—ç»“æœ</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬æ¬¢è¿ä½ !'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŒ—äº¬æ¬¢è¿ä½ !"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'''åŒ—äº¬æ¬¢è¿ä½ !'''</span>)           <span class="hljs-comment">#ä¸‰ä¸ªå•å¼•å·ä¹Ÿå¯ä»¥</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"""åŒ—äº¬æ¬¢è¿ä½ !"""</span>)         <span class="hljs-comment">#ä¸‰ä¸ªåŒå¼•å·ä¹Ÿå¯ä»¥</span>

<span class="hljs-comment">#è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
<span class="hljs-number">90</span>
<span class="hljs-number">100</span>
<span class="hljs-number">5000</span>
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !
åŒ—äº¬æ¬¢è¿ä½ !
</code></pre>
<p><strong>å®ä¾‹02 æ‰“å°æ¢è¡Œå’Œä¸æ¢è¡Œ</strong></p>
<pre><code class="hljs language-bash" lang="bash">å®ä¾‹02 
<span class="hljs-comment">#ä¸æ¢è¡Œä¸€æ¬¡è¾“å‡ºå¤šä¸ªæ•°æ®</span>
a=100 <span class="hljs-comment"># å˜é‡aï¼Œ</span>
b=50
<span class="hljs-built_in">print</span>(a,b,<span class="hljs-string">'è¦ä¹ˆå‡ºä¼—ï¼Œè¦ä¹ˆå‡ºå±€ï¼ï¼ï¼'</span>)

<span class="hljs-comment"># (),[],{}é‡Œçš„å¤šè¡Œå†…å®¹ä¸ç”¨\è¿æ¥ï¼Œä½†éœ€è¦æ¯è¡Œå¼•èµ·æ¥;æ‰“å°å‡ºæ¥çš„ç»“æœä¸æ¢è¡Œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello world"</span>
<span class="hljs-string">"python"</span>) 

<span class="hljs-comment">#å¤šä¸ªprintå‡½æ•°ç»“æœåœ¨ä¸€è¡Œæ˜¾ç¤º</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬'</span>,end=<span class="hljs-string">'--&gt;'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ¬¢è¿ä½ '</span>) <span class="hljs-comment">#æ²¡æœ‰ä¿®æ”¹ç»“æŸç¬¦ï¼Œæ‰€æœ‰printä¹‹åä¼šæœ‰ä¸ªç©ºè¡Œ</span>

<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
100 50 è¦ä¹ˆå‡ºä¼—ï¼Œè¦ä¹ˆå‡ºå±€ï¼ï¼ï¼
hello worldpython
åŒ—äº¬--&gt;æ¬¢è¿ä½ 
</code></pre>

<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">###æ‰“å°çš„ç»“æœä¼šæ¢è¡Œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello\npython"</span>)

<span class="hljs-comment">###æ‰“å°çš„ç»“æœä¼šæ¢è¡Œï¼Œä¸‰ä¸ªå•å¼•å·å’Œä¸‰ä¸ªåŒå¼•å·éƒ½æ˜¯é‡Œé¢æ˜¯ä»€ä¹ˆæ ·å­æ‰“å°çš„å°±æ˜¯ä»€ä¹ˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"""hello 
python"""</span>)



<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
hello 
python
hello 
python
</code></pre>
<p><strong>å®ä¾‹03 è¾“å‡ºASCIIç æ‰€å¯¹åº”çš„å­—ç¬¦</strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#å®ä¾‹03 è¾“å‡ºASCIIç æ‰€å¯¹åº”çš„å­—ç¬¦</span>
<span class="hljs-keyword">print</span>(<span class="hljs-string">'b'</span>)  <span class="hljs-comment">#ç›´æ¥è¾“å‡ºäº†b</span>
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">chr</span>(<span class="hljs-number">98</span>)) <span class="hljs-comment">#ä¹Ÿè¾“å‡ºbã€‚ä½¿ç”¨chr() å°†98è½¬æ¢æˆASCIIè¡¨ä¸­çš„å­—ç¬¦</span>
<span class="hljs-keyword">print</span>(<span class="hljs-string">'C'</span>)
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">chr</span>(<span class="hljs-number">67</span>)) 
<span class="hljs-keyword">print</span>(<span class="hljs-string">'8'</span>)
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">chr</span>(<span class="hljs-number">56</span>)) 
<span class="hljs-keyword">print</span>(<span class="hljs-string">'['</span>)
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">chr</span>(<span class="hljs-number">91</span>)) 


<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
b
b
C
C
<span class="hljs-number">8</span>
<span class="hljs-number">8</span>
[
[
</code></pre>
<p><strong>å®ä¾‹04 è¾“å‡ºä¸­æ–‡Unicodeç </strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#ä¸­æ–‡ç¼–ç çš„èŒƒå›´æ˜¯[u4e00~u9fa5]</span>
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">'åŒ—'</span>)) 
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">'äº¬'</span>)) 
<span class="hljs-keyword">print</span>(<span class="hljs-keyword">chr</span>(<span class="hljs-number">21271</span>),<span class="hljs-keyword">chr</span>(<span class="hljs-number">20140</span>)) 

<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
<span class="hljs-number">21271</span>
<span class="hljs-number">20140</span>
åŒ— äº¬
</code></pre>
<p><strong>å®ä¾‹05 å°†å†…å®¹è¾“å…¥åˆ°æ–‡ä»¶</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#å®ä¾‹05 å°†å†…å®¹è¾“å…¥åˆ°æ–‡ä»¶</span>
<span class="hljs-attr">fp</span>=open(<span class="hljs-string">'note.txt'</span>,<span class="hljs-string">'w'</span>)  <span class="hljs-comment">#æ‰“å¼€æ–‡ä»¶ w----&gt;write</span>
print('åŒ—äº¬æ¬¢è¿ä½ ',<span class="hljs-attr">file</span>=fp) <span class="hljs-comment">#å°†å†…å®¹å†™å…¥æ–‡ä»¶</span>
fp.close() <span class="hljs-comment">#å…³é—­æ–‡ä»¶</span>

<span class="hljs-comment">#æ‰§è¡Œè„šæœ¬åä¼šåœ¨åŒçº§ç›®å½•çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶</span>
</code></pre>
<p><strong>å®ä¾‹06 ä½¿ç”¨è¿æ¥ç¬¦+ ç”¨æ¥è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">print</span>(<span class="hljs-string">'åŒ—äº¬æ¬¢è¿ä½ '</span>+<span class="hljs-string">'2023'</span>)

<span class="hljs-comment">##è¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°ç»“æœ</span>
åŒ—äº¬æ¬¢è¿ä½ 2023 
</code></pre>
<p><strong>å®ä¾‹07 ä½¿ç”¨VT100æ§åˆ¶ç (ç”¨æ¥åœ¨ç»ˆç«¯æ‰©å±•æ˜¾ç¤ºçš„ä»£ç )å®ç°æœ‰é¢œè‰²çš„æ‰“å°</strong></p>
<pre><code class="hljs language-swift" lang="swift">pythoné‡Œå®ç°çš„æœ‰é¢œè‰²æ‰“å°
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;31mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;32mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;33mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;34mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;35mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;36mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
ç»“æœå¦‚ä¸‹:
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33e38d25f67b48d18d6e7dcea4ca9ab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=KwvQrmaMG12Knu8RxdNGja3kFUs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;35mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
 <span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\0</span>33[31;1;36mhello world<span class="hljs-subst">\0</span>33[0m"</span>)
 
æ‰§è¡Œä¹‹å
<span class="hljs-type">IndentationError</span>: unexpected indentï¼ˆè¯‘ä¸º æ„å¤–ç¼©è¿›ï¼‰
#è¡¨ç¤ºç¼©è¿›é”™è¯¯


<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello<span class="hljs-subst">\n</span>python"</span>) <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello<span class="hljs-subst">\n</span>python"</span>)

æ‰§è¡Œä¹‹å
<span class="hljs-type">SyntaxError</span>: invalid syntaxï¼ˆè¯‘ä¸º è¯­æ³•é”™è¯¯ï¼šæ— æ•ˆçš„è¯­æ³•ï¼‰
#è¡¨ç¤ºä¸€è¡Œä¸èƒ½æ‰“å°å¤šæ¬¡
</code></pre>
<h6 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3 Pythonä¸­çš„æ³¨é‡Š</h6>
<ul>
<li>ç¨‹åºå‘˜åœ¨ä»£ç ä¸­å¯¹ä»£ç åŠŸèƒ½è§£é‡Šè¯´æ˜çš„æ ‡æ³¨æ€§æ–‡å­—</li>
<li>å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§</li>
<li>æ³¨é‡Šçš„å†…å®¹å°†è¢«Pythonè§£é‡Šå™¨å¿½ç•¥ï¼Œä¸è¢«è®¡ç®—æœºæ‰§è¡Œ</li>
<li>å•è¡Œæ³¨é‡Šã€å¤šè¡Œæ³¨é‡Šå’Œä¸­æ–‡å£°æ˜æ³¨é‡Š</li>
</ul>
<p>å°æŠ€å·§:åœ¨pycharmé‡Œå¯ä»¥ç”¨ctrl+/æ¥ç»™å¤šè¡ŒåŠ #æ³¨é‡Šæˆ–å»æ‰æ³¨é‡Š<br/>
<strong>å•è¡Œæ³¨é‡Š</strong><br/>
äº•å·åé¢æœ‰ä¸ªç©ºæ ¼æ›´è§„èŒƒ<br/>
åœ¨ä»£ç çš„åé¢æ·»åŠ æ³¨é‡Šï¼šæ³¨é‡Šå’Œä»£ç ä¹‹é—´è¦è‡³å°‘æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œ æ›´è§„èŒƒ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¦æ±‚ä»é”®ç›˜è¾“å…¥å‡ºç”Ÿå¹´ä»½ï¼Œè¦æ±‚æ˜¯4ä½çš„å¹´ä»½ï¼Œä¸¾ä¾‹1990</span>

<span class="hljs-attr">year</span>=input(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿå¹´ä»½:'</span>)
<span class="hljs-attr">year</span>=input(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿå¹´ä»½:'</span>)  <span class="hljs-comment"># è¦æ±‚ä»é”®ç›˜è¾“å…¥å‡ºç”Ÿå¹´ä»½ï¼Œè¦æ±‚æ˜¯4ä½çš„å¹´ä»½ï¼Œä¸¾ä¾‹1990</span>
</code></pre>
<p><strong>å¤šè¡Œæ³¨é‡Š</strong><br/>
ä¸‰ä¸ªå•å¼•å·ä¹‹é—´ æˆ–è€…ä¸‰ä¸ªåŒå¼•å·ä¹‹é—´éƒ½å¯ä»¥è¡¨ç¤ºå¤šè¡Œæ³¨é‡Š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">'''
ç‰ˆæƒæ‰€æœ‰ï¼šaaaaaa
æ–‡ä»¶åï¼šç¤ºä¾‹aaa
'''</span>


<span class="hljs-string">"""
ç‰ˆæƒæ‰€æœ‰ï¼šaaaaaa
æ–‡ä»¶åï¼šç¤ºä¾‹aaa
åˆ›å»ºäººï¼šaaaa
"""</span>
</code></pre>
<p><strong>ä¸­æ–‡å£°æ˜æ³¨é‡Š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># coding=utf-8</span>
<span class="hljs-comment"># ä¸­æ–‡å£°æ˜æ³¨é‡Š,ä¸€å®šå¸è½½ç¬¬ä¸€è¡Œ</span>
<span class="hljs-comment">#å¦‚æœç¬¬ä¸€è¡Œ coding=gbkã€‚ é‚£ä¹ˆä¸‹é¢éªŒè¯çš„æ—¶å€™ï¼Œä¼šçœ‹è§ç¼–ç æ ¼å¼å°±æ˜¯ANSIäº†</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'hello'</span>)


<span class="hljs-comment">#å¦‚ä½•éªŒè¯ï¼šåœ¨ç”µè„‘ä¸Šæ‰¾æ‰“è¿™ä¸ªpyæ–‡ä»¶ä½ç½®ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œç‚¹å‡»å¦å­˜ä¸ºï¼Œåœ¨å¼¹çª—å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡æ¡£æ˜¯utf-8</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f48f8d744fb84bc79ba9bd3cfa5b78b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCD5qmY5a2Q5qmZ5a2Q5p-a5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770563697&amp;x-signature=mUlNzKroGd4LuA%2BSNGD9mmrhaIw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h6 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä»£ç ç¼©è¿›</h6>
<p>æ˜¯æŒ‡æ¯è¡Œè¯­å¥å¼€å§‹å‰çš„ç©ºç™½åŒºåŸŸ<br/>
ç”¨æ¥è¡¨ç¤ºPythonç¨‹åºé—´çš„åŒ…å«å’Œå±‚æ¬¡å…³ç³»<br/>
ç±»å®šä¹‰ã€å‡½æ•°å®šä¹‰ã€æµç¨‹æ§åˆ¶è¯­å¥ä»¥åŠå¼‚å¸¸å¤„ç†è¯­å¥ç­‰è¡Œå°¾çš„å†’å·å’Œä¸‹ä¸€è¡Œçš„ç¼©è¿›è¡¨ç¤ºä¸€ä¸ªä»£ç å—çš„å¼€å§‹ï¼Œè€Œç¼©è¿›ç»“æŸï¼Œåˆ™è¡¨ç¤ºä¸€ä¸ªä»£ç å—çš„ç»“æŸ<br/>
é€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨4ä¸ªç©ºæ ¼ä½œä¸ºä¸€ä¸ªç¼©è¿›é‡</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#ä¸€èˆ¬ä»£ç ï¼Œä¸éœ€è¦ç¼©è¿›</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'hello'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'world'</span>)

<span class="hljs-comment"># ç±»çš„å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>:
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment">#å‡½æ•°çš„å®šä¹‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fun</span>():
    <span class="hljs-keyword">pass</span>
</code></pre>
<h6 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4 ä»£ç è§„èŒƒ</h6>
<p><strong>pycharmä¸­ä¼šæœ‰æç¤ºä¸è§„èŒƒï¼Œä¸ç”¨ç‰¹æ„è®°è§„èŒƒ</strong></p>
<p>Python å®˜æ–¹æä¾›æœ‰ä¸€ç³»åˆ— PEPï¼ˆPython Enhancement Proposalsï¼‰ æ–‡æ¡£<br/>
å…¶ä¸­ç¬¬ 8 ç¯‡æ–‡æ¡£ä¸“é—¨é’ˆå¯¹ Python çš„ä»£ç æ ¼å¼ ç»™å‡ºäº†å»ºè®®ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„ PEP 8</p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python.org%2Fdev%2Fpeps%2Fpep-0008%2F" target="_blank" title="https://www.python.org/dev/peps/pep-0008/" ref="nofollow noopener noreferrer">www.python.org/dev/peps/peâ€¦</a></p>
<p>è°·æ­Œæœ‰å¯¹åº”çš„ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fzh-google-styleguide.readthedocs.io%2Fen%2Flatest%2Fgoogle-python-styleguide%2Fpython_style_rules%2F" target="_blank" title="http://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_style_rules/" ref="nofollow noopener noreferrer">zh-google-styleguide.readthedocs.io/en/latest/gâ€¦</a></p>
<h5 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¹å®æˆ˜</h5>
<pre><code class="hljs language-lua" lang="lua">å®æˆ˜ä¸€ï¼šè¾“å‡ºâ€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonâ€
éœ€æ±‚ï¼šä½¿ç”¨<span class="hljs-built_in">print</span>()å‡½æ•°å°†â€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonâ€è¾“å‡ºåˆ°æ–‡æœ¬æ–‡ä»¶text.txtä¸­

fp=<span class="hljs-built_in">open</span>(<span class="hljs-string">'text.txt'</span>,<span class="hljs-string">'w'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'äººç”Ÿè‹¦çŸ­,æˆ‘ç”¨python'</span>,file=fp)
fp.<span class="hljs-built_in">close</span>()


å®æˆ˜äºŒï¼šè¾“å‡ºä¸ªäººè‡ªæˆ‘ä»‹ç»
éœ€æ±‚ï¼šä½¿ç”¨<span class="hljs-built_in">input</span>()å‡½æ•°ä»é”®ç›˜è¾“å…¥å§“åã€å¹´é¾„ï¼Œåº§å³é“­ï¼Œå¹¶ä½¿ç”¨<span class="hljs-built_in">print</span>()å‡½æ•°è¾“å‡ºåˆ°æ§åˆ¶å°


# coding=utf<span class="hljs-number">-8</span>
name=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å§“å:'</span>)
age=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„å¹´é¾„:'</span>)
believe=<span class="hljs-built_in">input</span>(<span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„åº§å³é“­:'</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">'--------è‡ªæˆ‘ä»‹ç»-----------'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å§“å:'</span>,name)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å¹´é¾„:'</span>,age)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'åº§å³é“­:'</span>,believe)
</code></pre>
<p>æ–‡ç« ç›®å½•</p>
<p>MarkdownÂ 4997Â å­—æ•°Â 342Â è¡Œæ•°Â å½“å‰è¡Œ 1, å½“å‰åˆ— 0</p>
<p>HTMLÂ 3914Â å­—æ•°Â 199Â æ®µè½</p>
<p>å‘å¸ƒæ–‡ç« </p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ListeneråŠ è½½é¡ºåºæš—å‘ï¼šæˆ‘çš„åˆå§‹åŒ–ä»£ç â€œäººé—´è’¸å‘â€ï¼Œæµ‹è¯•å¦¹å­ç¬¬5æ¬¡ç«™æˆ‘å·¥ä½å‰â€¦]]></title>    <link>https://juejin.cn/post/7601374137411911715</link>    <guid>https://juejin.cn/post/7601374137411911715</guid>    <pubDate>2026-02-01T15:39:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601374137411911715" data-draft-id="7601384029611048975" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ListeneråŠ è½½é¡ºåºæš—å‘ï¼šæˆ‘çš„åˆå§‹åŒ–ä»£ç â€œäººé—´è’¸å‘â€ï¼Œæµ‹è¯•å¦¹å­ç¬¬5æ¬¡ç«™æˆ‘å·¥ä½å‰â€¦"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-01T15:39:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³æ‰“å·¥çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/2172290705931335"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ListeneråŠ è½½é¡ºåºæš—å‘ï¼šæˆ‘çš„åˆå§‹åŒ–ä»£ç â€œäººé—´è’¸å‘â€ï¼Œæµ‹è¯•å¦¹å­ç¬¬5æ¬¡ç«™æˆ‘å·¥ä½å‰â€¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2172290705931335/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³æ‰“å·¥çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T15:39:17.000Z" title="Sun Feb 01 2026 15:39:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼šä¸æƒ³æ‰“å·¥çš„ç å†œ<br/>
åŸåˆ›æ‰‹è®°ï½œTomcatæºç çº§æ’æŸ¥ï½œæ‹’ç»â€œå¤åˆ¶ç²˜è´´å¼å¼€å‘â€<br/>
ï¼ˆç¯å¢ƒï¼šTomcat 9.0.85 + Spring 5.3.28 + JDK 17ï½œå…¨æ–‡æ— AIç”Ÿæˆç—•è¿¹ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸŒ§ï¸ å‘¨ä¸‰ä¸‹åˆ3:27ï¼Œæµ‹è¯•å°å¦¹ç¬¬5æ¬¡æ•²æˆ‘æ¡Œå­</h2>
<p>â€œå“¥ï¼é¢„å‘ç¯å¢ƒç”¨æˆ·ç™»å½•æŠ¥â€˜ç³»ç»Ÿé…ç½®ç¼ºå¤±â€™ï¼ä½†æœ¬åœ°è·‘å¾—é£èµ·å•Šï¼â€<br/>
å¥¹æ‰‹æœºæ€¼åˆ°æˆ‘çœ¼å‰ï¼š<br/>
<code>Caused by: NullPointerException: configMap is null</code></p>
<p>æˆ‘å¿ƒå¤´ä¸€ç´§â€”â€”è¿™è¡Œä»£ç æˆ‘äº²æ‰‹å†™çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@WebListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemConfigLoader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">contextInitialized</span>(<span class="hljs-params">ServletContextEvent sce</span>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; configMap = <span class="hljs-title class_">ConfigService</span>.<span class="hljs-title function_">load</span>(); <span class="hljs-comment">// ä»DBåŠ è½½</span>
        sce.<span class="hljs-title function_">getServletContext</span>().<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"GLOBAL_CONFIG"</span>, configMap); <span class="hljs-comment">// âš ï¸å…³é”®ï¼</span>
    }
}
</code></pre>
<p><strong>è¯¡å¼‚ç°è±¡</strong>ï¼š<br/>
âœ… æœ¬åœ°IDEå¯åŠ¨ï¼šconfigMapæœ‰å€¼ï¼Œç™»å½•æ­£å¸¸<br/>
âœ… é¢„å‘ç¯å¢ƒï¼šconfigMapä¸ºnullï¼Œä½†DBæŸ¥è¯¢æ—¥å¿—æ˜¾ç¤ºâ€œåŠ è½½æˆåŠŸâ€<br/>
âœ… é‡å¯10æ¬¡ï¼š7æ¬¡å¤±è´¥ï¼Œ3æ¬¡æˆåŠŸï¼ˆç„å­¦ï¼Ÿï¼‰</p>
<p>æˆ‘ç›¯ç€å¤©èŠ±æ¿ï¼šâ€œè¿™ä»£ç â€¦å®ƒè‡ªå·±ä¼šéšèº«ï¼Ÿâ€</p>
<hr/>
<h2 data-id="heading-1">ğŸ” ä¸‰å°æ—¶ç¡¬æ ¸æº¯æºï¼ˆé™„çœŸå®æ’æŸ¥æµæ°´ï¼‰</h2>
<h3 data-id="heading-2">ç¬¬ä¸€å›åˆï¼šç”©é”…éƒ¨ç½²è„šæœ¬ï¼ŸâŒ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¹æ¯”æœ¬åœ°ä¸é¢„å‘çš„waråŒ…</span>
diff -r <span class="hljs-built_in">local</span>/WEB-INF/classes prod/WEB-INF/classes | grep SystemConfigLoader
<span class="hljs-comment"># ç»“æœï¼šå­—èŠ‚ç å®Œå…¨ä¸€è‡´ï¼</span>
</code></pre>
<p>è¿ç»´å…„å¼Ÿæ‘Šæ‰‹ï¼šâ€œéƒ¨ç½²æµç¨‹æ²¡åŠ¨è¿‡ï¼Œå°±ä½ æ˜¨å¤©æçš„ä»£ç ã€‚â€</p>
<h3 data-id="heading-3">ç¬¬äºŒå›åˆï¼šæ—¥å¿—åŸ‹ç‚¹ç°åŸå½¢ âœ…</h3>
<p>åœ¨ListeneråŠ å…³é”®æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">contextInitialized</span>(<span class="hljs-params">ServletContextEvent sce</span>) {
    log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ã€STEP1ã€‘å¼€å§‹åŠ è½½é…ç½®..."</span>);
    <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; configMap = <span class="hljs-title class_">ConfigService</span>.<span class="hljs-title function_">load</span>();
    log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ã€STEP2ã€‘åŠ è½½ç»“æœ: {}"</span>, configMap != <span class="hljs-literal">null</span> ? configMap.<span class="hljs-title function_">size</span>() : <span class="hljs-string">"NULL"</span>);
    sce.<span class="hljs-title function_">getServletContext</span>().<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"GLOBAL_CONFIG"</span>, configMap);
    log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ã€STEP3ã€‘è®¾ç½®ServletContextå±æ€§å®Œæˆ"</span>);
}
</code></pre>
<p><strong>é¢„å‘æ—¥å¿—æš´å‡»</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024-06-19 15:41:02</span> [<span class="hljs-string">INFO</span>] <span class="hljs-string">ã€STEP1ã€‘å¼€å§‹åŠ è½½é…ç½®...</span>
<span class="hljs-number">2024-06-19 15:41:03</span> [<span class="hljs-string">INFO</span>] <span class="hljs-string">ã€STEP2ã€‘åŠ è½½ç»“æœ:</span> <span class="hljs-number">42</span>
<span class="hljs-number">2024-06-19 15:41:03</span> [<span class="hljs-string">INFO</span>] <span class="hljs-string">ã€STEP3ã€‘è®¾ç½®ServletContextå±æ€§å®Œæˆ</span>
<span class="hljs-number">2024-06-19 15:41:05</span> [<span class="hljs-string">ERROR</span>] <span class="hljs-attr">NullPointerException:</span> <span class="hljs-string">configMap</span> <span class="hljs-string">is</span> <span class="hljs-literal">null</span> <span class="hljs-string">â†</span> <span class="hljs-string">ç™»å½•æ—¶å–ä¸åˆ°ï¼</span>
</code></pre>
<p><strong>çµé­‚ç–‘é—®</strong>ï¼š<br/>
â“ Listeneræ˜æ˜æ‰§è¡Œäº†ï¼Œä¸ºä»€ä¹ˆåç»­å–ä¸åˆ°ï¼Ÿ<br/>
â“ ä¸ºä»€ä¹ˆæœ‰æ—¶èƒ½å–åˆ°ï¼ˆé‡å¯æˆåŠŸçš„3æ¬¡ï¼‰ï¼Ÿ</p>
<h3 data-id="heading-4">ç¬¬ä¸‰å›åˆï¼šArthasç›‘æ§ServletContext âœ…</h3>
<pre><code class="hljs language-scss" lang="scss"># ç›‘æ§ç™»å½•æ—¶è·å–çš„configMap
watch com<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.controller</span><span class="hljs-selector-class">.LoginController</span> login '{params<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.getServletContext</span>()<span class="hljs-selector-class">.getAttribute</span>("GLOBAL_CONFIG")}' -x <span class="hljs-number">3</span>
</code></pre>
<p><strong>å…³é”®å‘ç°</strong>ï¼š</p>
<ul>
<li>æˆåŠŸæ—¶ï¼šè¿”å›HashMap@7a8f...</li>
<li>å¤±è´¥æ—¶ï¼šè¿”å›Â <strong>null</strong></li>
<li>ä½†Listeneræ—¥å¿—æ˜¾ç¤ºâ€œè®¾ç½®å®Œæˆâ€ï¼</li>
</ul>
<p>æˆ‘çŒ›æ‹å¤§è…¿ï¼šâ€œ<strong>æœ‰å¦ä¸€ä¸ªListeneræŠŠå±æ€§è¦†ç›–äº†ï¼</strong> "</p>
<hr/>
<h2 data-id="heading-5">ğŸ’¥ æºç æ‰’çš®ï¼šTomcatå¦‚ä½•æ‰§è¡ŒListeneré“¾ï¼Ÿ</h2>
<h3 data-id="heading-6">ç¿»Tomcat 9.0.85æºç ï¼ˆContextConfig.javaï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">// ç¬¬1872è¡Œï¼šæŒ‰web.xmlå£°æ˜é¡ºåºæ„å»ºListeneré“¾
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; listeners.length; i++) {</span>
    applicationListeners.add(listeners<span class="hljs-section">[i]</span>)<span class="hljs-comment">; // é¡ºåºæ·»åŠ </span>
}
// ç¬¬1905è¡Œï¼šæ‰§è¡Œæ—¶å€’åºéå†ï¼
for (int <span class="hljs-attr">i</span> = applicationListeners.size() - <span class="hljs-number">1</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
    lifecycle.fireLifecycleEvent(Lifecycle.START_EVENT, null)<span class="hljs-comment">; // é€†åºè§¦å‘ï¼</span>
}
</code></pre>
<p><strong>çœŸç›¸æ ¸çˆ†</strong>ï¼š<br/>
1ï¸âƒ£ Listeneræ‰§è¡Œé¡ºåº =Â <strong>web.xmlå£°æ˜é¡ºåºçš„é€†åº</strong>ï¼<br/>
2ï¸âƒ£ é¡¹ç›®ä¸­å­˜åœ¨ä¸¤ä¸ªå…³é”®Listenerï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- web.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.xxx.SystemConfigLoader<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span> <span class="hljs-comment">&lt;!-- æˆ‘çš„ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span> <span class="hljs-comment">&lt;!-- Springçš„ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>
</code></pre>
<p>3ï¸âƒ£Â <strong>æ‰§è¡Œæ—¶åº</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">Tomcatå¯åŠ¨ â†’ å…ˆæ‰§è¡ŒContextLoaderListenerï¼ˆåå£°æ˜ï¼‰ â†’ åˆå§‹åŒ–Springå®¹å™¨  
<span class="hljs-code">            â†’ å†æ‰§è¡ŒSystemConfigLoaderï¼ˆå…ˆå£°æ˜ï¼‰ â†’ è®¾ç½®GLOBAL_CONFIG  
            â†’ ä½†ï¼ContextLoaderListenerå†…éƒ¨ä¼šæ¸…ç©ºServletContextå±æ€§ï¼ï¼ˆè§ä¸‹æ–‡ï¼‰
</span></code></pre>
<h3 data-id="heading-7">æ·±æ‰’ContextLoaderListenerï¼ˆSpring 5.3.28ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ContextLoader.java ç¬¬288è¡Œ</span>
<span class="hljs-keyword">public</span> WebApplicationContext initWebApplicationContext(...) {
    <span class="hljs-comment">// âš ï¸ å…³é”®æ“ä½œï¼šæ¸…ç†æ—§ä¸Šä¸‹æ–‡ï¼ˆåŒ…å«æ‰€æœ‰setAttributeè®¾ç½®çš„å±æ€§ï¼ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.contextAttribute != <span class="hljs-literal">null</span>) {
        servletContext.removeAttribute(<span class="hljs-keyword">this</span>.contextAttribute);
    }
    <span class="hljs-comment">// ... åˆå§‹åŒ–æ–°Springä¸Šä¸‹æ–‡</span>
}
</code></pre>
<p><strong>äº‹æ•…é“¾è·¯è¿˜åŸ</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">SystemConfigLoaderæ‰§è¡Œ â†’ <span class="hljs-built_in">setAttribute</span>(<span class="hljs-string">"GLOBAL_CONFIG"</span>, map)  
â†“  
ContextLoaderListeneræ‰§è¡Œ â†’ removeAttributeæ¸…ç†æ—§ä¸Šä¸‹æ–‡ â†’ GLOBAL_CONFIGè¢«åˆ ï¼  
â†“  
ç™»å½•æ—¶å–å±æ€§ â†’ null â†’ NPEï¼  
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæœ‰æ—¶æˆåŠŸ</strong>ï¼Ÿ</p>
<ul>
<li>æœ¬åœ°IDEå¯åŠ¨ï¼šSpringæ’ä»¶åŠ è½½é¡ºåºéšæœºï¼Œå¶å°”SystemConfigLoaderåæ‰§è¡Œ</li>
<li>é¢„å‘ç¯å¢ƒï¼šTomcatä¸¥æ ¼æŒ‰web.xmlé€†åºæ‰§è¡Œï¼Œ100%è¦†ç›–</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ› ï¸ ä¸‰æ‹›æ ¹æ²»ï¼ˆå·²ä¸Šçº¿2å‘¨é›¶æ•…éšœï¼‰</h2>
<h3 data-id="heading-9">âœ… æ–¹æ¡ˆ1ï¼šè°ƒæ•´web.xmlå£°æ˜é¡ºåºï¼ˆæœ€å¿«ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æŠŠSpring Listeneræ”¾å‰é¢ï¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.xxx.SystemConfigLoader<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>
</code></pre>
<p><strong>åŸç†</strong>ï¼šé€†åºæ‰§è¡Œ â†’ Springå…ˆåˆå§‹åŒ– â†’ æˆ‘çš„Listeneråè®¾ç½®å±æ€§ â†’ ä¸è¢«è¦†ç›–</p>
<h3 data-id="heading-10">âœ… æ–¹æ¡ˆ2ï¼šæ”¹ç”¨Springç”Ÿå‘½å‘¨æœŸï¼ˆæ¨èï¼ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfigLoader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationListener</span>&lt;<span class="hljs-title class_">ContextRefreshedEvent</span>&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onApplicationEvent</span>(<span class="hljs-params">ContextRefreshedEvent event</span>) {
        <span class="hljs-comment">// æ­¤æ—¶Springå®¹å™¨å·²å°±ç»ªï¼Œä¸”ä¸ä¼šè¢«æ¸…ç†</span>
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; configMap = <span class="hljs-title class_">ConfigService</span>.<span class="hljs-title function_">load</span>();
        event.<span class="hljs-title function_">getApplicationContext</span>()
             .<span class="hljs-title function_">getBean</span>(<span class="hljs-title class_">ServletContext</span>.<span class="hljs-property">class</span>)
             .<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"GLOBAL_CONFIG"</span>, configMap);
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ä¸Springç”Ÿå‘½å‘¨æœŸæ·±åº¦ç»‘å®š</li>
<li>é¿å…Servlet APIä¸Springæ··ç”¨é£é™©</li>
<li>æ”¯æŒ@Orderæ§åˆ¶æ‰§è¡Œé¡ºåº</li>
</ul>
<h3 data-id="heading-11">âœ… æ–¹æ¡ˆ3ï¼šListenerå†…å»¶è¿Ÿè®¾ç½®ï¼ˆåº”æ€¥ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@WebListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeConfigLoader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">contextInitialized</span>(<span class="hljs-params">ServletContextEvent sce</span>) {
        <span class="hljs-comment">// å»¶è¿Ÿ1ç§’ï¼Œç­‰Springåˆå§‹åŒ–å®Œæˆï¼ˆä¸æ¨èï¼ä»…åº”æ€¥ï¼‰</span>
        <span class="hljs-title class_">Executors</span>.<span class="hljs-title function_">newSingleThreadScheduledExecutor</span>().<span class="hljs-title function_">schedule</span>(() -&gt; {
            sce.<span class="hljs-title function_">getServletContext</span>().<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"GLOBAL_CONFIG"</span>, <span class="hljs-title class_">ConfigService</span>.<span class="hljs-title function_">load</span>());
        }, <span class="hljs-number">1</span>, <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>);
    }
}
</code></pre>
<p>âš ï¸ æ³¨æ„ï¼šä»…é™ä¸´æ—¶æ–¹æ¡ˆï¼å­˜åœ¨ç«æ€é£é™©</p>
<hr/>
<h2 data-id="heading-12">ğŸ“Œ è¡€æ³ªæ€»ç»“ï¼šListenerä½¿ç”¨çº¢ç»¿ç¯</h2>
<p>è¡¨æ ¼</p>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>é¿å‘å£è¯€</th></tr></thead><tbody><tr><td>éœ€è¦Spring Bean</td><td><strong>ç”¨ApplicationListener</strong></td><td>â€œListeneré‡Œåˆ«ç¢°Beanï¼ŒSpringäº‹ä»¶æœ€ç¨³å¦¥â€</td></tr><tr><td>çº¯Servletç¯å¢ƒ</td><td><strong>ä¸¥æ ¼æŒ‰web.xmlé€†åºå£°æ˜</strong></td><td>â€œå…ˆå£°æ˜çš„åæ‰§è¡Œï¼Œç”»ä¸ªæµç¨‹å›¾å†ä¸Šçº¿â€</td></tr><tr><td>å¤šListeneråä½œ</td><td><strong>åŠ æ‰§è¡Œæ—¥å¿—+ArthaséªŒè¯</strong></td><td>â€œçœ¼è§ä¸ºå®ï¼Œåˆ«çŒœé¡ºåºâ€</td></tr><tr><td>Spring Booté¡¹ç›®</td><td><strong>å½»åº•å¼ƒç”¨@WebListener</strong></td><td>â€œç”¨@PostConstruct/@EventListenerâ€</td></tr></tbody></table>
<p><strong>çµé­‚ä¸‰é—®ï¼ˆä¸Šçº¿å‰å¿…ç­”ï¼‰</strong> ï¼š<br/>
1ï¸âƒ£ æˆ‘çš„Listenerä¾èµ–å…¶ä»–æ¡†æ¶åˆå§‹åŒ–å—ï¼Ÿâ†’ ä¾èµ–ï¼Ÿæ”¹ç”¨æ¡†æ¶ç”Ÿå‘½å‘¨æœŸï¼<br/>
2ï¸âƒ£ web.xmlé‡ŒListenerå£°æ˜é¡ºåºç”»è¿‡æ‰§è¡Œæµç¨‹å›¾å—ï¼Ÿâ†’ æ²¡ç”»ï¼Ÿç°åœ¨å°±ç”»ï¼<br/>
3ï¸âƒ£ æœ¬åœ°å’ŒæœåŠ¡å™¨ç¯å¢ƒåŠ è½½é¡ºåºä¸€è‡´å—ï¼Ÿâ†’ ä¸ä¸€è‡´ï¼Ÿç”¨Arthaså®æµ‹ï¼</p>
<hr/>
<h2 data-id="heading-13">ğŸŒ± å†™åœ¨å¤ç›˜ä¼šå</h2>
<p>ç»„é•¿æŠŠâ€œListeneræ‰§è¡Œé¡ºåºæ£€æŸ¥â€åŠ è¿›ä¸Šçº¿Checklistã€‚<br/>
æµ‹è¯•å°å¦¹é€’æ¥æ‰‹å†™å¡ç‰‡ï¼šâ€œå“¥ï¼Œè¿™æ¬¡æ’æŸ¥ç¬”è®°èƒ½å½“å›¢é˜Ÿæ•™æå—ï¼Ÿâ€<br/>
æˆ‘ç¬‘ç€è´´åˆ°å·¥ä½ç™½æ¿ä¸Šï¼š</p>
<blockquote>
<p><strong>â€œé…ç½®é¡ºåºä¸æ˜¯ç„å­¦ï¼Œæ˜¯æºç å†™æ­»çš„è§„åˆ™â€</strong></p>
</blockquote>
<p>æŠ€æœ¯æˆé•¿ï¼Œè—åœ¨æ¯ä¸€æ¬¡â€œä¸ºä»€ä¹ˆæœ¬åœ°èƒ½è·‘çº¿ä¸Šå´©â€çš„è¿½é—®é‡Œã€‚<br/>
é‚£äº›ç¿»æºç ç†¬çº¢çš„çœ¼ï¼Œç»ˆä¼šå˜æˆä»£ç é‡Œç¨³ç¨³çš„åº•æ°”ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ä¸ºçœŸå®é¡¹ç›®è„±æ•å¤ç›˜ï¼Œæ‰€æœ‰å‘½ä»¤/ä»£ç ç»ç”Ÿäº§éªŒè¯ã€‚<br/>
ğŸ‘‰Â <strong>äº’åŠ¨æ—¶é—´</strong>ï¼šä½ è¢«Listeneré¡ºåºå‘è¿‡å—ï¼Ÿè¯„è®ºåŒºæ™’å‡ºä½ çš„â€œç¿»è½¦ç°åœºâ€ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeetCode 48. æ—‹è½¬å›¾åƒï¼šåŸåœ°æ—‹è½¬æœ€ä¼˜è§£æ³•]]></title>    <link>https://juejin.cn/post/7601076694105587748</link>    <guid>https://juejin.cn/post/7601076694105587748</guid>    <pubDate>2026-02-01T12:21:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076694105587748" data-draft-id="7601073900526305322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeetCode 48. æ—‹è½¬å›¾åƒï¼šåŸåœ°æ—‹è½¬æœ€ä¼˜è§£æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-01T12:21:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Wect"/> <meta itemprop="url" content="https://juejin.cn/user/4185164878720068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeetCode 48. æ—‹è½¬å›¾åƒï¼šåŸåœ°æ—‹è½¬æœ€ä¼˜è§£æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185164878720068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Wect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T12:21:06.000Z" title="Sun Feb 01 2026 12:21:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨LeetCodeæ•°ç»„ç±»é¢˜ç›®ä¸­ï¼Œã€ŒåŸåœ°æ“ä½œã€æ˜¯é«˜é¢‘è€ƒç‚¹ï¼Œä¹Ÿæ˜¯æå‡è§£é¢˜éš¾åº¦çš„å…³é”®ã€‚å®ƒè¦æ±‚æˆ‘ä»¬ä¸å€ŸåŠ©é¢å¤–ç©ºé—´ï¼Œç›´æ¥ä¿®æ”¹è¾“å…¥æ•°æ®ï¼Œæ—¢è€ƒéªŒå¯¹æ•°ç»„ç´¢å¼•çš„æ•æ„Ÿåº¦ï¼Œä¹Ÿå®¹æ˜“å› ç»†èŠ‚å¤±è¯¯è¸©å‘ã€‚ä»Šå¤©æˆ‘ä»¬èšç„¦ç¬¬48é¢˜ã€Œæ—‹è½¬å›¾åƒã€ï¼Œæ‹†è§£é¢˜å¹²è¦æ±‚ï¼Œè¯¦è§£æœ€ä¼˜åŸåœ°è§£æ³•ï¼ˆå³ä½ æä¾›çš„TypeScriptä»£ç ï¼‰ï¼Œå¸®ä½ åƒé€æ ¸å¿ƒé€»è¾‘ã€é¿å¼€å¸¸è§è¯¯åŒºï¼Œè½»æ¾æ‹¿ä¸‹è¿™é“ç»å…¸é¢˜ç›®ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é¢˜å¹²æ ¸å¿ƒè¦æ±‚ï¼ˆå¿…çœ‹ï¼‰</h2>
<p>é¢˜ç›®ç»™å‡ºä¸€ä¸ª <code>nÃ—n</code> çš„äºŒç»´çŸ©é˜µ <code>matrix</code> è¡¨ç¤ºä¸€å¹…å›¾åƒï¼Œè¦æ±‚æˆ‘ä»¬å°†å…¶<strong>é¡ºæ—¶é’ˆæ—‹è½¬90åº¦</strong>ï¼Œä¸”å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ ¸å¿ƒçº¦æŸï¼š</p>
<ul>
<li>
<p>åŸåœ°ä¿®æ”¹ï¼šç¦æ­¢ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µå­˜å‚¨æ—‹è½¬åçš„ç»“æœï¼Œåªèƒ½ç›´æ¥æ“ä½œè¾“å…¥çš„ <code>matrix</code>ï¼›</p>
</li>
<li>
<p>è¾¹ç•Œè¯´æ˜ï¼š<code>n</code> çš„èŒƒå›´æ˜¯ [1, 20]ï¼ŒçŸ©é˜µå…ƒç´ ä¸ºæ•´æ•°ï¼Œæ— éœ€å¤„ç†è¾¹ç•Œå¤–å¼‚å¸¸ï¼Œä½†éœ€ä¿è¯æ—‹è½¬åç´¢å¼•ä¸è¶Šç•Œã€å…ƒç´ ä½ç½®æ­£ç¡®ã€‚</p>
</li>
</ul>
<p>ä¸¾ä¸ªç›´è§‚ä¾‹å­ï¼šè¾“å…¥3Ã—3çŸ©é˜µ <code>[[1,2,3],[4,5,6],[7,8,9]]</code>ï¼Œæ—‹è½¬åéœ€å¾—åˆ° <code>[[7,4,1],[8,5,2],[9,6,3]]</code>ã€‚</p>
<h2 data-id="heading-1">äºŒã€æœ€ä¼˜åŸåœ°è§£æ³•ï¼ˆä½ çš„ä»£ç ï¼Œé€è¡Œè§£æï¼‰</h2>
<p>ä½ æä¾›çš„ä»£ç æ˜¯ã€ŒæŒ‰åœˆæ—‹è½¬ã€4å…ƒç´ å¾ªç¯äº¤æ¢ã€çš„æœ€ä¼˜å®ç°â€”â€”é€»è¾‘ç›´è§‚ã€æ— å†—ä½™ã€æ•ˆç‡æ‹‰æ»¡ï¼ˆæ—¶é—´å¤æ‚åº¦ <code>O(nÂ²)</code>ï¼Œç©ºé—´å¤æ‚åº¦ <code>O(1)</code>ï¼Œå®Œå…¨æ»¡è¶³åŸåœ°è¦æ±‚ï¼‰ã€‚ä¸‹é¢é€è¡Œæ‹†è§£ï¼Œè®©ä½ æ¸…æ¥šæ¯ä¸€æ­¥çš„ä½œç”¨å’Œåº•å±‚é€»è¾‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">/**
 Do not return anything, modify matrix in-place instead.
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">rotate</span>(<span class="hljs-params">matrix: <span class="hljs-built_in">number</span>[][]</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> side = matrix.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">if</span> (side === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">const</span> laps = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(side / <span class="hljs-number">2</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> lap = <span class="hljs-number">0</span>; lap &lt; laps; lap++) {
    <span class="hljs-keyword">const</span> start = lap;
    <span class="hljs-keyword">const</span> end = side - lap - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = start; index &lt; end; index++) {
      <span class="hljs-comment">// ä¿å­˜å½“å‰ä½ç½®çš„åˆå§‹å€¼ï¼ˆé¡¶éƒ¨è¾¹ï¼‰</span>
      <span class="hljs-keyword">const</span> tempTop = matrix[start][index];
      
      <span class="hljs-comment">// 1. å·¦ä¾§è¾¹ -&gt; é¡¶éƒ¨è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
      matrix[start][index] = matrix[side - <span class="hljs-number">1</span> - index][start];
      
      <span class="hljs-comment">// 2. åº•éƒ¨è¾¹ -&gt; å·¦ä¾§è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
      matrix[side - <span class="hljs-number">1</span> - index][start] = matrix[end][side - <span class="hljs-number">1</span> - index];
      
      <span class="hljs-comment">// 3. å³ä¾§è¾¹ -&gt; åº•éƒ¨è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
      matrix[end][side - <span class="hljs-number">1</span> - index] = matrix[index][end];
      
      <span class="hljs-comment">// 4. é¡¶éƒ¨è¾¹åˆå§‹å€¼ -&gt; å³ä¾§è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
      matrix[index][end] = tempTop;
    }
  }
}
</code></pre>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šè¾¹ç•Œå¤„ç†ä¸åœˆæ•°è®¡ç®—</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">const</span> side = matrix.<span class="hljs-property">length</span>;
<span class="hljs-keyword">if</span> (side === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
<span class="hljs-keyword">const</span> laps = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(side / <span class="hljs-number">2</span>);
</code></pre>
<p>è¿™3è¡Œæ˜¯è§£é¢˜çš„åŸºç¡€ï¼Œä¸»è¦è§£å†³ã€Œæ— éœ€æ—‹è½¬ã€å’Œã€Œæ—‹è½¬å¤šå°‘åœˆã€çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p><code>side = matrix.length</code>ï¼šè·å–çŸ©é˜µçš„è¾¹é•¿ï¼ˆnÃ—nçŸ©é˜µï¼Œè¾¹é•¿å³nï¼‰ï¼›</p>
</li>
<li>
<p><code>if (side === 1) return</code>ï¼šè¾¹ç•Œä¼˜åŒ–â€”â€”1Ã—1çŸ©é˜µæ—‹è½¬åè¿˜æ˜¯è‡ªèº«ï¼Œæ— éœ€ä»»ä½•æ“ä½œï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æ— æ•ˆå¾ªç¯ï¼›</p>
</li>
<li>
<p><code>laps = Math.floor(side / 2)</code>ï¼šè®¡ç®—éœ€è¦æ—‹è½¬çš„åœˆæ•°ã€‚æ ¸å¿ƒé€»è¾‘ï¼šçŸ©é˜µæ—‹è½¬æ˜¯ã€Œä»å¤–åˆ°å†…ï¼Œä¸€åœˆä¸€åœˆæ—‹è½¬ã€ï¼Œnä¸ºå¥‡æ•°æ—¶ï¼Œä¸­å¿ƒå…ƒç´ æ—‹è½¬åä½ç½®ä¸å˜ï¼Œæ— éœ€æ—‹è½¬ï¼Œå› æ­¤åœˆæ•°ä¸ºnçš„ä¸€åŠï¼ˆå‘ä¸‹å–æ•´ï¼‰ã€‚</p>
</li>
</ul>
<p>ä¸¾ä¾‹è¯´æ˜ï¼š4Ã—4çŸ©é˜µï¼ˆå¶æ•°ï¼‰ï¼Œåœˆæ•°=2ï¼ˆå¤–åœˆã€å†…åœˆï¼‰ï¼›3Ã—3çŸ©é˜µï¼ˆå¥‡æ•°ï¼‰ï¼Œåœˆæ•°=1ï¼ˆä»…å¤–åœˆï¼Œä¸­å¿ƒå…ƒç´ 5æ— éœ€æ—‹è½¬ï¼‰ã€‚</p>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šå¤–å±‚å¾ªç¯â€”â€”éå†æ¯ä¸€åœˆ</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> lap = <span class="hljs-number">0</span>; lap &lt; laps; lap++) {
  <span class="hljs-keyword">const</span> start = lap;
  <span class="hljs-keyword">const</span> end = side - lap - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// å†…å±‚å¾ªç¯ï¼šå¤„ç†å½“å‰åœˆçš„å…ƒç´ </span>
}
</code></pre>
<p>å¤–å±‚å¾ªç¯æ§åˆ¶ã€Œæ—‹è½¬å“ªä¸€åœˆã€ï¼Œæ¯å¾ªç¯ä¸€æ¬¡ï¼Œå‘å†…æ¨è¿›ä¸€åœˆï¼Œå…³é”®æ˜¯ç¡®å®šå½“å‰åœˆçš„ã€Œè¾¹ç•Œç´¢å¼•ã€ï¼š</p>
<ul>
<li>
<p><code>start = lap</code>ï¼šå½“å‰åœˆçš„ã€Œèµ·å§‹ç´¢å¼•ã€ï¼ˆè¡Œå’Œåˆ—ä¸€è‡´ï¼‰ã€‚æ¯”å¦‚ç¬¬0åœˆï¼ˆæœ€å¤–åœˆï¼‰ï¼Œstart=0ï¼›ç¬¬1åœˆï¼ˆå†…åœˆï¼‰ï¼Œstart=1ï¼Œä»¥æ­¤ç±»æ¨ï¼›</p>
</li>
<li>
<p><code>end = side - lap - 1</code>ï¼šå½“å‰åœˆçš„ã€Œç»“æŸç´¢å¼•ã€ï¼ˆè¡Œå’Œåˆ—ä¸€è‡´ï¼‰ã€‚æ¯”å¦‚4Ã—4çŸ©é˜µï¼Œç¬¬0åœˆend=3ï¼ˆæœ€å³/æœ€ä¸‹è¾¹ç•Œï¼‰ï¼Œç¬¬1åœˆend=2ï¼ˆå†…åœˆè¾¹ç•Œï¼‰ï¼›3Ã—3çŸ©é˜µï¼Œç¬¬0åœˆend=2ã€‚</p>
</li>
</ul>
<p>æœ‰äº†startå’Œendï¼Œå°±ç¡®å®šäº†å½“å‰åœˆçš„èŒƒå›´ï¼šè¡Œå’Œåˆ—éƒ½ä»startåˆ°endï¼Œæ„æˆä¸€ä¸ªæ­£æ–¹å½¢çš„åœˆã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šå†…å±‚å¾ªç¯â€”â€”å¤„ç†å½“å‰åœˆçš„å…ƒç´ ï¼ˆæ ¸å¿ƒäº¤æ¢é€»è¾‘ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = start; index &lt; end; index++) {
  <span class="hljs-comment">// ä¿å­˜å½“å‰ä½ç½®çš„åˆå§‹å€¼ï¼ˆé¡¶éƒ¨è¾¹ï¼‰</span>
  <span class="hljs-keyword">const</span> tempTop = matrix[start][index];
  
  <span class="hljs-comment">// 1. å·¦ä¾§è¾¹ -&gt; é¡¶éƒ¨è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
  matrix[start][index] = matrix[side - <span class="hljs-number">1</span> - index][start];
  
  <span class="hljs-comment">// 2. åº•éƒ¨è¾¹ -&gt; å·¦ä¾§è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
  matrix[side - <span class="hljs-number">1</span> - index][start] = matrix[end][side - <span class="hljs-number">1</span> - index];
  
  <span class="hljs-comment">// 3. å³ä¾§è¾¹ -&gt; åº•éƒ¨è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
  matrix[end][side - <span class="hljs-number">1</span> - index] = matrix[index][end];
  
  <span class="hljs-comment">// 4. é¡¶éƒ¨è¾¹åˆå§‹å€¼ -&gt; å³ä¾§è¾¹ï¼ˆå¯¹åº”ä½ç½®ï¼‰</span>
  matrix[index][end] = tempTop;
}
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ªä»£ç çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯åŸåœ°æ—‹è½¬çš„å…³é”®â€”â€”<strong>æ¯ä¸€åœˆçš„å…ƒç´ ï¼ŒæŒ‰ã€Œé¡¶éƒ¨è¾¹â†’å³ä¾§è¾¹â†’åº•éƒ¨è¾¹â†’å·¦ä¾§è¾¹ã€çš„é¡ºåºï¼Œ4ä¸ªå¯¹åº”ä½ç½®å¾ªç¯äº¤æ¢</strong>ã€‚æˆ‘ä»¬ç”¨ã€Œä¸´æ—¶å˜é‡ä¿å­˜èµ·å§‹å€¼ã€ï¼Œé¿å…èµ‹å€¼æ—¶è¦†ç›–åŸæ•°æ®ï¼Œé€å¥è§£æï¼š</p>
<h4 data-id="heading-5">1. ç¡®å®šäº¤æ¢çš„4ä¸ªæ ¸å¿ƒä½ç½®</h4>
<p>ä»¥å½“å‰åœˆçš„ã€Œé¡¶éƒ¨è¾¹å…ƒç´  <code>matrix[start][index]</code>ã€ä¸ºèµ·ç‚¹ï¼Œè¿™4ä¸ªä½ç½®çš„å¯¹åº”å…³ç³»çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šé¡ºæ—¶é’ˆæ—‹è½¬90åº¦ï¼Œæ¯ä¸ªå…ƒç´ çš„ä½ç½®éƒ½ä¼šè½¬ç§»åˆ°å®ƒçš„ã€Œé¡ºæ—¶é’ˆç›¸é‚»è¾¹ã€çš„å¯¹åº”ä½ç½®ï¼Œå…·ä½“å¯¹åº”å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>é¡¶éƒ¨è¾¹ï¼š<code>matrix[start][index]</code> â€”â€” è¦ç§»åŠ¨åˆ°ã€Œå³ä¾§è¾¹ã€çš„å¯¹åº”ä½ç½®ï¼›</p>
</li>
<li>
<p>å·¦ä¾§è¾¹ï¼š<code>matrix[side-1-index][start]</code> â€”â€” è¦ç§»åŠ¨åˆ°ã€Œé¡¶éƒ¨è¾¹ã€çš„å½“å‰ä½ç½®ï¼›</p>
</li>
<li>
<p>åº•éƒ¨è¾¹ï¼š<code>matrix[end][side-1-index]</code> â€”â€” è¦ç§»åŠ¨åˆ°ã€Œå·¦ä¾§è¾¹ã€çš„å¯¹åº”ä½ç½®ï¼›</p>
</li>
<li>
<p>å³ä¾§è¾¹ï¼š<code>matrix[index][end]</code> â€”â€” è¦ç§»åŠ¨åˆ°ã€Œåº•éƒ¨è¾¹ã€çš„å¯¹åº”ä½ç½®ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">2. 4æ­¥å¾ªç¯èµ‹å€¼ï¼ˆå…³é”®ï¼Œé¿å…è¦†ç›–ï¼‰</h4>
<p>èµ‹å€¼é¡ºåºä¸èƒ½ä¹±ï¼Œå¿…é¡»ä»ã€Œå·¦ä¾§è¾¹â†’é¡¶éƒ¨è¾¹ã€å¼€å§‹ï¼Œæœ€åå°†é¡¶éƒ¨è¾¹çš„åˆå§‹å€¼èµ‹ç»™å³ä¾§è¾¹ï¼ŒåŸå› æ˜¯ï¼šæˆ‘ä»¬ç”¨<code>tempTop</code>ä¿å­˜äº†é¡¶éƒ¨è¾¹çš„åˆå§‹å€¼ï¼Œè‹¥å…ˆä¿®æ”¹é¡¶éƒ¨è¾¹ï¼Œä¼šå¯¼è‡´åç»­èµ‹å€¼ä¸¢å¤±åŸå§‹æ•°æ®ã€‚</p>
<ol>
<li>
<p><code>const tempTop = matrix[start][index]</code>ï¼šä¿å­˜é¡¶éƒ¨è¾¹å½“å‰å…ƒç´ çš„åˆå§‹å€¼ï¼Œé˜²æ­¢åç»­èµ‹å€¼è¦†ç›–ï¼›</p>
</li>
<li>
<p><code>matrix[start][index] = matrix[side-1-index][start]</code>ï¼šå°†å·¦ä¾§è¾¹çš„å¯¹åº”å…ƒç´ ï¼Œç§»åŠ¨åˆ°é¡¶éƒ¨è¾¹çš„å½“å‰ä½ç½®ï¼›</p>
</li>
<li>
<p><code>matrix[side-1-index][start] = matrix[end][side-1-index]</code>ï¼šå°†åº•éƒ¨è¾¹çš„å¯¹åº”å…ƒç´ ï¼Œç§»åŠ¨åˆ°å·¦ä¾§è¾¹çš„å¯¹åº”ä½ç½®ï¼›</p>
</li>
<li>
<p><code>matrix[end][side-1-index] = matrix[index][end]</code>ï¼šå°†å³ä¾§è¾¹çš„å¯¹åº”å…ƒç´ ï¼Œç§»åŠ¨åˆ°åº•éƒ¨è¾¹çš„å¯¹åº”ä½ç½®ï¼›</p>
</li>
<li>
<p><code>matrix[index][end] = tempTop</code>ï¼šå°†é¡¶éƒ¨è¾¹çš„åˆå§‹å€¼ï¼ˆtempTopï¼‰ï¼Œç§»åŠ¨åˆ°å³ä¾§è¾¹çš„å¯¹åº”ä½ç½®ã€‚</p>
</li>
</ol>
<h3 data-id="heading-7">ç”¨3Ã—3çŸ©é˜µä¸¾ä¾‹ï¼Œç›´è§‚ç†è§£äº¤æ¢è¿‡ç¨‹</h3>
<p>è¾“å…¥3Ã—3çŸ©é˜µï¼š<code>[[1,2,3],[4,5,6],[7,8,9]]</code>ï¼Œside=3ï¼Œlaps=1ï¼Œä»…æ—‹è½¬æœ€å¤–åœˆï¼ˆstart=0ï¼Œend=2ï¼‰ï¼Œindexä»0éå†åˆ°1ï¼ˆä¸åŒ…å«end=2ï¼‰ï¼š</p>
<p>å½“index=0æ—¶ï¼š</p>
<ul>
<li>
<p>tempTop = matrix[0][0] = 1ï¼ˆä¿å­˜é¡¶éƒ¨è¾¹åˆå§‹å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[0][0] = matrix[2][0] = 7ï¼ˆå·¦ä¾§è¾¹â†’é¡¶éƒ¨è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[2][0] = matrix[2][2] = 9ï¼ˆåº•éƒ¨è¾¹â†’å·¦ä¾§è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[2][2] = matrix[0][2] = 3ï¼ˆå³ä¾§è¾¹â†’åº•éƒ¨è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[0][2] = tempTop = 1ï¼ˆé¡¶éƒ¨è¾¹åˆå§‹å€¼â†’å³ä¾§è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>æ­¤æ—¶çŸ©é˜µå˜ä¸ºï¼š<code>[[7,2,1],[4,5,6],[9,8,3]]</code>ã€‚</p>
</li>
</ul>
<p>å½“index=1æ—¶ï¼š</p>
<ul>
<li>
<p>tempTop = matrix[0][1] = 2ï¼ˆä¿å­˜é¡¶éƒ¨è¾¹åˆå§‹å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[0][1] = matrix[1][0] = 4ï¼ˆå·¦ä¾§è¾¹â†’é¡¶éƒ¨è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[1][0] = matrix[2][1] = 8ï¼ˆåº•éƒ¨è¾¹â†’å·¦ä¾§è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[2][1] = matrix[1][2] = 6ï¼ˆå³ä¾§è¾¹â†’åº•éƒ¨è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>matrix[1][2] = tempTop = 2ï¼ˆé¡¶éƒ¨è¾¹åˆå§‹å€¼â†’å³ä¾§è¾¹ï¼‰ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆçŸ©é˜µå˜ä¸ºï¼š<code>[[7,4,1],[8,5,2],[9,6,3]]</code>ï¼Œæ—‹è½¬å®Œæˆã€‚</p>
</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€å¸¸è§è¯¯åŒºé¿å‘ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<p>å¾ˆå¤šäººå®ç°åŸåœ°æ—‹è½¬æ—¶ï¼Œå®¹æ˜“è¸©å‘å¯¼è‡´ç»“æœé”™è¯¯æˆ–ç´¢å¼•è¶Šç•Œï¼Œç»“åˆè¿™é“é¢˜å’Œä½ çš„ä»£ç ï¼Œæ€»ç»“3ä¸ªé«˜é¢‘è¯¯åŒºï¼š</p>
<h3 data-id="heading-9">è¯¯åŒº1ï¼šç´¢å¼•é¢ å€’ï¼ˆæœ€è‡´å‘½ï¼‰</h3>
<p>äºŒç»´çŸ©é˜µ <code>matrix[x][y]</code> ä¸­ï¼Œ<code>x</code> æ˜¯è¡Œå·ï¼ˆå‚ç›´æ–¹å‘ï¼Œä»ä¸Šåˆ°ä¸‹é€’å¢ï¼‰ï¼Œ<code>y</code> æ˜¯åˆ—å·ï¼ˆæ°´å¹³æ–¹å‘ï¼Œä»å·¦åˆ°å³é€’å¢ï¼‰ã€‚æ–°æ‰‹å®¹æ˜“æŠŠè¡Œå’Œåˆ—é¢ å€’ï¼Œæ¯”å¦‚è¯¯å°† <code>matrix[side-1-index][start]</code> å†™æˆ <code>matrix[start][side-1-index]</code>ï¼Œå¯¼è‡´å…ƒç´ èµ‹å€¼åˆ°é”™è¯¯ä½ç½®ã€‚</p>
<h3 data-id="heading-10">è¯¯åŒº2ï¼šèµ‹å€¼é¡ºåºé”™è¯¯ï¼ˆè¦†ç›–åŸå§‹æ•°æ®ï¼‰</h3>
<p>è‹¥ä¸å…ˆä¿å­˜é¡¶éƒ¨è¾¹çš„åˆå§‹å€¼ï¼ˆtempTopï¼‰ï¼Œæˆ–é¢ å€’èµ‹å€¼é¡ºåºï¼ˆæ¯”å¦‚å…ˆå°†é¡¶éƒ¨è¾¹çš„å€¼èµ‹ç»™å³ä¾§è¾¹ï¼‰ï¼Œä¼šå¯¼è‡´åç»­èµ‹å€¼æ—¶ï¼ŒåŸå§‹æ•°æ®è¢«è¦†ç›–ï¼Œæœ€ç»ˆæ—‹è½¬ç»“æœé”™è¯¯ã€‚ä½ çš„ä»£ç é€šè¿‡ã€Œå…ˆä¿å­˜ã€å†ä»å·¦åˆ°å³èµ‹å€¼ã€å®Œç¾é¿å¼€äº†è¿™ä¸ªå‘ã€‚</p>
<h3 data-id="heading-11">è¯¯åŒº3ï¼šåœˆæ•°è®¡ç®—é”™è¯¯</h3>
<p>æœ‰äººä¼šç›´æ¥ç”¨ <code>laps = side / 2</code>ï¼ˆä¸å‘ä¸‹å–æ•´ï¼‰ï¼Œå½“sideä¸ºå¥‡æ•°æ—¶ï¼Œä¼šå¤šå¾ªç¯ä¸€æ¬¡ï¼ˆæ¯”å¦‚3Ã—3çŸ©é˜µï¼Œlaps=1.5ï¼Œå¾ªç¯2æ¬¡ï¼‰ï¼Œå¯¼è‡´ä¸­å¿ƒå…ƒç´ è¢«é”™è¯¯ä¿®æ”¹ã€‚æ­£ç¡®å†™æ³•æ˜¯ <code>Math.floor(side / 2)</code>ï¼Œç¡®ä¿å¥‡æ•°è¾¹é•¿æ—¶ï¼Œä¸­å¿ƒå…ƒç´ ä¸è¢«å¤„ç†ã€‚</p>
<h2 data-id="heading-12">å››ã€æ‹“å±•ï¼šå¦ä¸€ç§ç®€æ´è§£æ³•ï¼ˆè½¬ç½®+åè½¬ï¼‰</h2>
<p>é™¤äº†ä½ çš„ã€ŒæŒ‰åœˆäº¤æ¢ã€æ€è·¯ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€æ´çš„åŸåœ°è§£æ³•â€”â€”ã€Œå…ˆè½¬ç½®çŸ©é˜µï¼Œå†åè½¬æ¯ä¸€è¡Œã€ï¼Œä»£ç æ›´çŸ­ï¼Œé€‚åˆé¢è¯•æ—¶å¿«é€Ÿä¹¦å†™ï¼Œè¿™é‡Œä¹Ÿæä¾›TypeScriptå®ç°ï¼Œä¾›ä½ æ‹“å±•æ€è·¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">rotate</span>(<span class="hljs-params">matrix: <span class="hljs-built_in">number</span>[][]</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> n = matrix.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šè½¬ç½®çŸ©é˜µï¼ˆè¡Œå˜åˆ—ï¼Œåˆ—å˜è¡Œï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i; j &lt; n; j++) {
      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];
    }
  }
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåè½¬æ¯ä¸€è¡Œï¼ˆå®Œæˆé¡ºæ—¶é’ˆæ—‹è½¬90åº¦ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
    matrix[i].<span class="hljs-title function_">reverse</span>();
  }
}
</code></pre>
<p>é€»è¾‘è¯´æ˜ï¼šè½¬ç½®çŸ©é˜µåï¼Œæ¯ä¸€è¡Œçš„å…ƒç´ é¡ºåºæ°å¥½æ˜¯æ—‹è½¬åå…ƒç´ çš„é€†åºï¼Œåè½¬æ¯ä¸€è¡Œå³å¯å¾—åˆ°é¡ºæ—¶é’ˆæ—‹è½¬90åº¦çš„ç»“æœã€‚æ¯”å¦‚3Ã—3çŸ©é˜µï¼Œè½¬ç½®åä¸º <code>[[1,4,7],[2,5,8],[3,6,9]]</code>ï¼Œåè½¬æ¯ä¸€è¡Œåå°±æ˜¯ç›®æ ‡ç»“æœã€‚</p>
<p>å¯¹æ¯”ä½ çš„è§£æ³•ï¼šè¿™ç§æ–¹æ³•ä»£ç æ›´ç®€æ´ï¼Œä½†éœ€è¦ç†è§£ã€Œè½¬ç½®+åè½¬ã€ä¸ã€Œé¡ºæ—¶é’ˆæ—‹è½¬90åº¦ã€çš„ç­‰ä»·æ€§ï¼Œå¯¹æ–°æ‰‹ä¸å¤Ÿå‹å¥½ï¼›è€Œä½ çš„è§£æ³•é€»è¾‘æ›´ç›´è§‚ï¼Œè´´åˆæ—‹è½¬çš„æœ¬è´¨ï¼Œæ›´å®¹æ˜“ç†è§£å’Œè°ƒè¯•ï¼Œæ¨èæ–°æ‰‹ä¼˜å…ˆæŒæ¡ã€‚</p>
<h2 data-id="heading-13">äº”ã€åˆ·é¢˜æ€»ç»“</h2>
<p>LeetCode 48é¢˜ã€Œæ—‹è½¬å›¾åƒã€çš„æ ¸å¿ƒæ˜¯ã€ŒåŸåœ°æ“ä½œã€ï¼Œä½ çš„ä»£ç å·²ç»æ˜¯æœ€ä¼˜è§£æ³•ï¼Œæ€»ç»“å…³é”®ç‚¹ï¼š</p>
<ol>
<li>
<p>æ ¸å¿ƒæ€è·¯ï¼šæŒ‰åœˆæ—‹è½¬ï¼Œä»å¤–åˆ°å†…ï¼Œæ¯ä¸€åœˆçš„4ä¸ªå¯¹åº”ä½ç½®å¾ªç¯äº¤æ¢ï¼›</p>
</li>
<li>
<p>å…³é”®æŠ€å·§ï¼šç”¨ä¸´æ—¶å˜é‡ä¿å­˜èµ·å§‹å€¼ï¼Œé¿å…èµ‹å€¼è¦†ç›–ï¼Œèµ‹å€¼é¡ºåºä¸èƒ½ä¹±ï¼›</p>
</li>
<li>
<p>æ•ˆç‡ä¼˜åŠ¿ï¼šæ—¶é—´å¤æ‚åº¦<code>O(nÂ²)</code>ï¼ˆéå†æ‰€æœ‰å…ƒç´ ä¸€æ¬¡ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦<code>O(1)</code>ï¼ˆæ— é¢å¤–ç©ºé—´ï¼‰ï¼Œå®Œå…¨æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼›</p>
</li>
<li>
<p>é¿å‘é‡ç‚¹ï¼šæ˜ç¡®çŸ©é˜µè¡Œå’Œåˆ—çš„ç´¢å¼•å«ä¹‰ï¼Œæ­£ç¡®è®¡ç®—æ—‹è½¬åœˆæ•°ï¼Œé¿å…èµ‹å€¼é¡ºåºé”™è¯¯ã€‚</p>
</li>
</ol>
<p>æœ€åæé†’ï¼šåˆ·é¢˜æ—¶ï¼Œå»ºè®®æŠŠä½ çš„ä»£ç å¤åˆ¶åˆ°LeetCodeç¼–è¾‘å™¨ï¼Œæµ‹è¯•ä¸åŒç”¨ä¾‹ï¼ˆå¶æ•°nã€å¥‡æ•°nï¼‰ï¼Œäº²æ‰‹è°ƒè¯•æ¯ä¸€æ­¥çš„ç´¢å¼•å˜åŒ–ï¼Œæ‰èƒ½çœŸæ­£åƒé€é€»è¾‘ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„åŸåœ°æ—‹è½¬é¢˜ç›®ï¼Œå°±èƒ½å¿«é€Ÿä¸Šæ‰‹ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±01ï¼šä»€ä¹ˆæ˜¯Agentå¼€å‘]]></title>    <link>https://juejin.cn/post/7601175299012165647</link>    <guid>https://juejin.cn/post/7601175299012165647</guid>    <pubDate>2026-02-02T00:02:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299012165647" data-draft-id="7601169244454748186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±01ï¼šä»€ä¹ˆæ˜¯Agentå¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-02T00:02:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±01ï¼šä»€ä¹ˆæ˜¯Agentå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:02:06.000Z" title="Mon Feb 02 2026 00:02:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>åœ¨å’Œä¸€ä¸ªå¥³å­©æ‹çˆ±ä¹‹å‰ï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹æ°¸è¿œæ˜¯ï¼š</p>
<blockquote>
<p>è®¤è¯†è¿™ä¸ªå¥³å­©ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åœ¨å¼€å‘ AI Agentä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è®¤è¯† <code>AI Agent</code>ï¼Œæ˜ç¡®å®ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒçš„ä»·å€¼åœ¨å“ªé‡Œã€‚åªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½é€‰æ‹©åˆé€‚çš„æŠ€æœ¯è·¯çº¿ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€AI Agent æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<blockquote>
<p>ä¸€å¥è¯ï¼šAI Agent æ˜¯ä¸€ä¸ªä»¥ LLM ä¸ºå¤§è„‘ï¼Œèƒ½å¤Ÿé€šè¿‡é€»è¾‘æ¨ç†ï¼ˆReasoningï¼‰ï¼Œè‡ªä¸»è§„åˆ’æ­¥éª¤å¹¶è°ƒç”¨å·¥å…·ï¼ˆToolsï¼‰ï¼Œä»¥è§£å†³éå›ºå®šæµç¨‹ä»»åŠ¡çš„ç³»ç»Ÿã€‚</p>
</blockquote>
<p>ä»€ä¹ˆï¼Œè¿˜æœ‰ç‚¹æŠ½è±¡ï¼Ÿ</p>
<p>é‚£æˆ‘ä»¬è¯´äººè¯ï¼š</p>
<blockquote>
<p>AI Agent å°±æ˜¯ï¼šèƒ½å¸®ä½ å¹²æ´»å„¿çš„AIç³»ç»Ÿã€‚</p>
</blockquote>
<p>è¿™é‡Œçš„å…³é”®å…¶å®æ˜¯â€œèƒ½å¹²æ´»â€è¿™ä¸‰ä¸ªå­—ï¼Œè¿™æ˜¯æŠŠAI Agenté‚£äº›åªèƒ½å’Œä½ èŠå¤©çš„ LLM å¤§è¯­è¨€æ¨¡å‹åŒºåˆ†å¼€çš„å…³é”®æ‰€åœ¨ã€‚</p>
<p>ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<h3 data-id="heading-1">ä¾‹å­ä¸€ï¼šæ•°æ®åˆ†æ</h3>
<p>å‡è®¾ï¼šä½ æ˜¯ä¸€ä¸ªé”€å”®ç»ç†ï¼Œæ‰‹é‡Œæœ‰ä¸€ä¸ª 100MB çš„ Excel è¡¨æ ¼ï¼Œä½ æƒ³çŸ¥é“â€œä¸Šä¸ªæœˆå“ªä¸ªäº§å“çš„åˆ©æ¶¦ç‡æœ€é«˜â€ã€‚</p>
<ul>
<li>LLM å¯¹è¯èƒ½åŠ›ï¼šâ€œä½ å¯ä»¥ç”¨ Excel çš„é€è§†è¡¨åŠŸèƒ½ï¼Œæˆ–è€…å†™ä¸€æ®µ Python ä»£ç æ¥åˆ†æâ€¦â€¦â€ï¼ˆå®ƒç»™ä½ æ–¹æ³•ï¼Œä½†ä½ è¦è‡ªå·±åŠ¨æ‰‹ï¼‰ã€‚</li>
<li>AI Agentï¼š
<ul>
<li>ç†è§£æ„å›¾ï¼Œâ€œè®¡ç®—åˆ©æ¶¦ç‡â€å¹¶â€œæ’åºâ€ã€‚</li>
<li>è§„åˆ’è·¯å¾„ï¼š
<ul>
<li>å…ˆè¯»å–æ–‡ä»¶å‰å‡ è¡Œï¼Œç†è§£è¡¨å¤´ã€‚</li>
<li>ç¼–å†™ Python ä»£ç è®¡ç®— (é”€å”®é¢-æˆæœ¬)/é”€å”®é¢ã€‚</li>
<li>ç»˜åˆ¶æŸ±çŠ¶å›¾å¹¶ç”Ÿæˆç»“è®ºã€‚</li>
</ul>
</li>
<li>è°ƒç”¨å·¥å…·ï¼š
<ul>
<li>è°ƒç”¨ Python è§£é‡Šå™¨ï¼ˆæ²™ç›’ç¯å¢ƒï¼‰ï¼ŒçœŸæ­£æ‰§è¡Œäº†ä»£ç ï¼Œç”Ÿæˆäº†å›¾è¡¨æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>è®°å¿†å­˜å‚¨ï¼š
<ul>
<li>å®ƒè®°ä½äº†ä½ åˆšåˆšä¸Šä¼ çš„ CSV æ–‡ä»¶ç»“æ„ï¼Œåç»­ä½ é—®â€œé‚£è¿™ä¸ªäº§å“çš„åº“å­˜å‘¢ï¼Ÿâ€å®ƒä¸éœ€è¦ä½ é‡æ–°ä¸Šä¼ æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131092453658.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ä¾‹å­äºŒï¼šAIç¼–ç¨‹</h3>
<p>å‡è®¾ï¼šä½ æƒ³å†™ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆï¼Œä½†ä½ ä¸æ‡‚ä»£ç ã€‚</p>
<ul>
<li>LLM å¯¹è¯èƒ½åŠ›ï¼šå®ƒä¼šåç»™ä½ ä¸€æ®µä»£ç ã€‚å½“ä½ è¿è¡ŒæŠ¥é”™æ—¶ï¼Œä½ å¾—æŠŠæŠ¥é”™ä¿¡æ¯å¤åˆ¶å›ç»™å®ƒï¼Œå®ƒå†æ”¹ï¼Œååå¤å¤ã€‚ï¼ˆå®ƒæ˜¯è¢«åŠ¨çš„ï¼‰ã€‚</li>
<li>AI Agent: ä½ åªéœ€è¦è¯´ä¸€å¥â€œå¸®æˆ‘å†™ä¸ªè´ªåƒè›‡â€ï¼Œç„¶åå°±å¯ä»¥å»å–å’–å•¡äº†ã€‚
<ul>
<li>ç†è§£æ„å›¾ï¼Œç”Ÿæˆæ¸¸æˆçš„æ ¸å¿ƒé€»è¾‘ä»£ç ã€‚</li>
<li>è§„åˆ’è·¯å¾„ï¼š
<ul>
<li>å†™ä»£ç ã€‚</li>
<li>ä¸»åŠ¨è¿è¡Œ python snake.pyã€‚</li>
<li>è§‚å¯Ÿåˆ°æŠ¥é”™äº†ï¼ˆæ¯”å¦‚å°‘äº†ä¸€ä¸ªåº“ï¼‰ã€‚</li>
<li>è‡ªä¸»å†³å®šè°ƒç”¨ pip install pygame å®‰è£…åº“ã€‚</li>
<li>å†æ¬¡è¿è¡Œï¼Œç›´åˆ°æˆåŠŸã€‚</li>
</ul>
</li>
<li>è°ƒç”¨å·¥å…·ï¼š
<ul>
<li>å®ƒæœ‰æƒé™è®¿é—®ä½ çš„ç»ˆç«¯ (Terminal) å’Œ æ–‡ä»¶ç¼–è¾‘å™¨ã€‚å®ƒç›´æ¥åœ¨ä½ çš„æ–‡ä»¶å¤¹é‡Œåˆ›å»ºäº† snake.pyã€‚</li>
</ul>
</li>
<li>è®°å¿†å­˜å‚¨ï¼š
<ul>
<li>å®ƒçŸ¥é“åˆšæ‰ä¿®è¿‡å“ªäº› bugï¼Œä¸ä¼šåœ¨åŒä¸€ä¸ªå‘é‡Œè·Œå€’ä¸¤æ¬¡ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131093459290.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">äºŒã€AI Agent çš„æ¶æ„</h2>
<p>ç”±äº Agent è¿œè¿œè¿˜æ²¡æœ‰åƒ Springå…¨å®¶æ¡¶ç»Ÿæ²»webå¼€å‘é‚£æ ·çš„æœ€ä½³å®è·µï¼Œæ‰€ä»¥ç›®å‰æ‰€æœ‰çš„æ¶æ„åˆ†äº«éƒ½åªèƒ½æ˜¯åŸºäºå¸‚é¢ä¸Šå¤§éƒ¨åˆ†äº§å“å½¢æˆçš„å…±è¯†æ€»ç»“çš„ï¼Œåªèƒ½ä½œä¸ºå‚è€ƒã€‚</p>
<p>ä½†ç›®å‰è®¤å¯åº¦æœ€é«˜çš„ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å¤§è„‘ï¼šLLM</li>
<li>è§„åˆ’ï¼šPlanning</li>
<li>è®°å¿†ï¼šMemory</li>
<li>å·¥å…·ï¼šTool Use</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131095302048.png" alt="" loading="lazy"/></p>
<p>ä¸è¦æŠŠ Agent æƒ³å¾—å¤ªç„ä¹ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªå…¬å¼ï¼š</p>
<p>Agentï¼ˆæ™ºèƒ½ä½“ï¼‰ = å¤§è„‘ (LLM) + åŒæ‰‹ (Tools) + è®°å¿† (Memory) + è§„åˆ’ (Planning)</p>
<ul>
<li>
<p>å¤§è„‘ï¼šè´Ÿè´£é€»è¾‘æ¨ç†ï¼ˆæ¯”å¦‚ DeepSeek, GPT-4ï¼‰ã€‚</p>
</li>
<li>
<p>åŒæ‰‹ï¼šè´Ÿè´£ä¸ç°å®ä¸–ç•Œäº¤äº’ï¼ˆæœç´¢ã€å†™æ–‡ä»¶ã€å‘é‚®ä»¶ï¼‰ã€‚</p>
</li>
<li>
<p>è®°å¿†ï¼šè´Ÿè´£è®°ä½ç”¨æˆ·åå¥½å’Œç§æœ‰æ•°æ®ï¼ˆæ•°æ®åº“ã€å‘é‡åº“ï¼‰ã€‚</p>
</li>
<li>
<p>è§„åˆ’ï¼šè´Ÿè´£æ‹†è§£å¤æ‚ä»»åŠ¡ï¼ˆå…ˆæŸ¥å¤©æ°”ï¼Œå†å†³å®šå¸¦ä¸å¸¦ä¼ï¼‰ã€‚</p>
</li>
</ul>
<p>æˆ‘ä»¬çš„å­¦ä¹ è·¯å¾„ï¼Œå°±æ˜¯é€ä¸€æ”»å…‹è¿™å››ä¸ªæ¨¡å—çš„è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-4">å­¦ä¹ ç›®æ ‡ä¸€ï¼šæŒæ§LLMï¼Œç»“æ„åŒ–è¾“å‡º</h2>
<blockquote>
<p>è®© AI è¯´â€œæœºå™¨è¯â€ï¼Œè€Œä¸æ˜¯â€œäººè¯â€ã€‚</p>
</blockquote>
<p>å¾ˆå¤šæ–°æ‰‹åªä¼šåœ¨èŠå¤©æ¡†é‡Œé—® AI é—®é¢˜ã€‚ä½†ç¨‹åºæ— æ³•å¤„ç† AI éšå¿ƒæ‰€æ¬²çš„å›ç­”ã€‚ Agent å¼€å‘çš„ç¬¬ä¸€è¯¾ï¼Œæ˜¯å¼ºè¿« AI è¾“å‡ºç»“æ„åŒ–æ•°æ®ï¼ˆJSONï¼‰ã€‚åªæœ‰è¾“å‡º JSONï¼Œä½ çš„ Python ä»£ç æ‰èƒ½æ¥ä½æ•°æ®ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥é€»è¾‘å¤„ç†ã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>
<p>Prompt Engineeringï¼ˆè§’è‰²è®¾å®šã€System Promptï¼‰ã€‚</p>
</li>
<li>
<p>JSON Modeï¼šå¼ºåˆ¶æ¨¡å‹è¾“å‡º JSONã€‚</p>
</li>
<li>
<p>Pydanticï¼šPython çš„æ•°æ®éªŒè¯åº“ï¼ˆAgent å¼€å‘ç¥å™¨ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p>å®æˆ˜å°ç›®æ ‡ï¼šä¿¡æ¯æå–å™¨</p>
<ul>
<li>
<p>è¾“å…¥ï¼šä¸€æ®µä¹±ä¸ƒå…«ç³Ÿçš„ç”¨æˆ·è¯„è®ºï¼ˆâ€œApp å¤ªå¡äº†ï¼Œæˆ‘æ˜¯ iPhone 13ï¼Œç»™ä¸€æ˜Ÿâ€ï¼‰ã€‚</p>
</li>
<li>
<p>è¾“å‡ºï¼š{"sentiment": "negative", "device": "iPhone 13", "issue": "performance"}ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131101241497.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å­¦ä¹ ç›®æ ‡äºŒï¼šèƒ½åŠ›è°ƒç”¨(Function Calling)</h2>
<blockquote>
<p>ä¸å†æ˜¯è®© AI å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯è®© AI å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä¸æ˜¯ AI è‡ªå·±å»è”ç½‘ï¼Œè€Œæ˜¯ AI å‘Šè¯‰ä½ ï¼šâ€œè¯·å¸®æˆ‘è¿è¡Œ Google Search å‡½æ•°ï¼Œå…³é”®è¯æ˜¯ Pythonâ€ï¼Œç„¶åä½ å¸®å®ƒè¿è¡Œï¼ŒæŠŠç»“æœå–‚ç»™å®ƒã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>
<p>Tools Schemaï¼šå¦‚ä½•ç»™ AI å†™â€œå·¥å…·è¯´æ˜ä¹¦â€ã€‚</p>
</li>
<li>
<p>Tool Choiceï¼šå¤„ç† AI çš„è°ƒç”¨è¯·æ±‚ã€‚</p>
</li>
<li>
<p>API é›†æˆï¼šé€šè¿‡ Python requests åº“è¿æ¥å¤–éƒ¨ä¸–ç•Œã€‚</p>
</li>
</ul>
</li>
<li>
<p>å®æˆ˜å°ç›®æ ‡ï¼šæ™ºèƒ½æ–‡ä»¶æ•´ç†åŠ©æ‰‹</p>
<ul>
<li>
<p>ç”¨æˆ·æŒ‡ä»¤ï¼šâ€œæŠŠæ‰€æœ‰å›¾ç‰‡æ”¾åˆ° Images æ–‡ä»¶å¤¹ï¼Œæ–‡æ¡£æ”¾åˆ° Docs æ–‡ä»¶å¤¹ã€‚â€</p>
</li>
<li>
<p>Agent è¡Œä¸ºï¼šè‡ªä¸»è°ƒç”¨ Python çš„ os å’Œ shutil åº“ï¼ŒçœŸå®åœ°æ“ä½œä½ çš„ç”µè„‘æ–‡ä»¶ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131101610697.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">å­¦ä¹ ç›®æ ‡ä¸‰ï¼šæ„å»ºè®°å¿† (RAG &amp; Vector DB)</h2>
<blockquote>
<p>ç»™ AI å¤–æŒ‚ä¸€ä¸ªâ€œç¡¬ç›˜â€ã€‚</p>
</blockquote>
<p>å¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Œä¸”è®°ä¸ä½ä½ çš„ç§æœ‰æ•°æ®ï¼ˆæ¯”å¦‚ä½ çš„ä¸ªäººæ—¥è®°ã€å…¬å¸æ–‡æ¡£ï¼‰ã€‚æˆ‘ä»¬éœ€è¦ç”¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ æŠ€æœ¯ï¼Œè®© Agent æ‹¥æœ‰é•¿æœŸè®°å¿†ã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>
<p>Embeddingsï¼šæŠŠæ–‡å­—å˜æˆå‘é‡ï¼ˆä¸€ä¸²æ•°å­—ï¼‰ã€‚</p>
</li>
<li>
<p>Vector DBï¼šå‘é‡æ•°æ®åº“ï¼ˆå¦‚ ChromaDBï¼‰ã€‚</p>
</li>
<li>
<p>Chunkingï¼šå¦‚ä½•æŠŠé•¿æ–‡æ¡£åˆ‡ç‰‡ã€‚</p>
</li>
</ul>
</li>
<li>
<p>å®æˆ˜å°ç›®æ ‡ï¼šç§äººçŸ¥è¯†åº“é—®ç­” Bot</p>
<ul>
<li>
<p>æŠŠä½ çš„â€œæŠ€æœ¯å­¦ä¹ ç¬”è®°â€æˆ–â€œæ¸¸æˆè®¾è®¡è‰ç¨¿â€å–‚ç»™ Agentã€‚</p>
</li>
<li>
<p>ä½ å¯ä»¥é—®å®ƒï¼šâ€œæˆ‘ä¸Šå‘¨å…³äºæˆ˜æ–—ç³»ç»Ÿçš„è®¾è®¡æ€è·¯æ˜¯ä»€ä¹ˆï¼Ÿâ€å®ƒèƒ½ç²¾å‡†å¼•ç”¨ä½ çš„æ–‡æ¡£å›ç­”ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131101850131.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">å­¦ä¹ ç›®æ ‡å››ï¼šæ€è€ƒä¸è¡ŒåŠ¨çš„å¾ªç¯</h2>
<blockquote>
<p>ä»â€œå•æ­¥æ“ä½œâ€è¿›åŒ–åˆ°â€œè‡ªä¸»è§£å†³å¤æ‚é—®é¢˜â€ã€‚</p>
</blockquote>
<p>å¦‚æœç”¨æˆ·é—®â€œåˆ†æä¸€ä¸‹ 2026 å¹´çš„æ¸¸æˆå¸‚åœºè¶‹åŠ¿â€ï¼Œè¿™ä¸æ˜¯è°ƒç”¨ä¸€ä¸ªå·¥å…·èƒ½è§£å†³çš„ã€‚Agent éœ€è¦å­¦ä¼šï¼šæœç´¢ -&gt; é˜…è¯» -&gt; æ€è€ƒ -&gt; å†æœç´¢ -&gt; æ€»ç»“ã€‚è¿™å°±éœ€è¦ ReActï¼ˆReasoning + Actingï¼‰ æ¨¡å¼ã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>
<p>ReAct Loopï¼šæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿçš„å¾ªç¯ã€‚</p>
</li>
<li>
<p>LangGraphï¼šå­¦ä¹ å¦‚ä½•ç”¨å›¾ï¼ˆGraphï¼‰çš„æ¦‚å¿µæ¥ç®¡ç†å¤æ‚çš„ Agent çŠ¶æ€ã€‚</p>
</li>
</ul>
</li>
<li>
<p>å®æˆ˜å°ç›®æ ‡ï¼šå…¨è‡ªåŠ¨ç ”æŠ¥ç”Ÿæˆå™¨</p>
<ul>
<li>è¾“å…¥ä¸€ä¸ªè¯¾é¢˜ï¼ŒAgent è‡ªåŠ¨ä¸Šç½‘æœç´¢å¤šç¯‡èµ„æ–™ï¼Œé˜…è¯»å¹¶æ±‡æ€»ï¼Œæœ€åç”Ÿæˆä¸€ç¯‡æœ‰ç†æœ‰æ®çš„ Markdown æŠ¥å‘Šä¿å­˜åˆ°æœ¬åœ°ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131102129964.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">å­¦ä¹ ç›®æ ‡äº”ï¼šå¤šAgentç³»ç»Ÿ</h2>
<blockquote>
<p>ç›®æ ‡ï¼šæŒ‡æŒ¥ä¸€ç¾¤AIå¹²å¥½ä¸€ä¸ªæ´»å„¿ã€‚</p>
</blockquote>
<p>å½“ä»»åŠ¡æå…¶å¤æ‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ª Agent åˆ†å·¥åä½œã€‚æ¯”å¦‚ä¸€ä¸ªè´Ÿè´£é€šè¿‡ API å†™ä»£ç ï¼Œå¦ä¸€ä¸ªè´Ÿè´£è¿è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ä¸é€šè¿‡å°±æ‰“å›é‡å†™ã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>
<p>Role Playingï¼šé€šè¿‡ Prompt éš”ç¦»ä¸åŒ Agent çš„èŒè´£ã€‚</p>
</li>
<li>
<p>Handoffsï¼šä»»åŠ¡åœ¨ä¸åŒ Agent ä¹‹é—´çš„æµè½¬ã€‚</p>
</li>
<li>
<p>æ¡†æ¶åº”ç”¨ï¼šCrewAI æˆ– AutoGenã€‚</p>
</li>
</ul>
</li>
<li>
<p>å®æˆ˜å°ç›®æ ‡ï¼šè™šæ‹Ÿæ¸¸æˆå¼€å‘å·¥ä½œå®¤</p>
<ul>
<li>
<p>ç­–åˆ’ Agentï¼šæå‡ºåˆ›æ„ã€‚</p>
</li>
<li>
<p>ç¼–å‰§ Agentï¼šå®Œå–„ä¸–ç•Œè§‚æ•…äº‹ã€‚</p>
</li>
<li>
<p>ç¾æœ¯ Agentï¼šç”Ÿæˆå¯¹åº”çš„ç”»é¢æç¤ºè¯ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>ä¸€é”®è¿è¡Œï¼Œä¸‰ä¸ª AI è‡ªåŠ¨å¼€ä¼šï¼Œç»™ä½ è¾“å‡ºä¸€ä»½å®Œæ•´çš„æ¸¸æˆè®¾è®¡æ¡ˆã€‚
<img src="https://pic.zhangshichun.top/pic/20260131102347165.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">å°èŠ‚</h2>
<p>æœ¬æ–‡æˆ‘ä»¬æ˜ç¡®äº†AI Agentæ˜¯ä»€ä¹ˆï¼Œå®ƒå’ŒLLM Chatçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå®ƒæœ‰é‚£äº›ç‰¹ç‚¹ï¼Œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œæ˜¯å¦‚ä½•æ¶æ„çš„ã€‚</p>
<p>å¹¶ä¸”æˆ‘ä»¬æ‹Ÿå®šäº†ä¸€ä¸ªäº”æ­¥èµ°çš„å­¦ä¹ ç›®æ ‡ã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦ä»å¤´å¼€å§‹ï¼šæ­å»ºä¸€ä¸ªä¸»æµçš„AIå¼€å‘ç¯å¢ƒã€‚</p>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©]]></title>    <link>https://juejin.cn/post/7601419065128239123</link>    <guid>https://juejin.cn/post/7601419065128239123</guid>    <pubDate>2026-02-02T00:07:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601419065128239123" data-draft-id="7601419065128222739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-02T00:07:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:07:51.000Z" title="Mon Feb 02 2026 00:07:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>å¾ˆå¤šæƒ³å­¦ AI å¼€å‘çš„æœ‹å‹ï¼Œå¾€å¾€å€’åœ¨äº†ç¬¬ä¸€æ­¥ï¼šé…ç¯å¢ƒã€‚</p>
<p>æˆ‘ä»¬è¦åšçš„ä¸æ˜¯ç®€å•çš„â€œå®‰è£…è½¯ä»¶â€ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªä¸“ä¸šçš„æ•°å­—åŒ–å·¥ä½œå°ã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è§£é‡Šä¸ºä»€ä¹ˆ Python æ˜¯ä¸äºŒä¹‹é€‰ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Condaï¼Œå¹¶å¸¦ä½ ä»é›¶å¼€å§‹è·‘é€šç¬¬ä¸€è¡Œ AI ä»£ç ï¼ˆä»¥ DeepSeek ä¸ºä¾‹ï¼‰ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆæ˜¯ Python</h2>
<p>è™½ç„¶ Javaã€Goã€JavaScript ä¹Ÿèƒ½å†™ AI åº”ç”¨ï¼Œä½†æ˜¯ã€‚</p>
<p>åœ¨ AI Agent å¼€å‘é¢†åŸŸï¼ŒPython æ˜¯ç»å¯¹çš„â€œç¬¬ä¸€å…¬æ°‘â€ï¼Œå®ƒæ‹¥æœ‰æ— æ³•æ’¼åŠ¨çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p>ç»Ÿæ²»çº§çš„ç”Ÿæ€ï¼šå‡ ä¹æ‰€æœ‰ä¸»æµ AI æ¡†æ¶ï¼ˆPyTorch, LangChain, CrewAIï¼‰éƒ½ä¼˜å…ˆå‘å¸ƒ Python ç‰ˆã€‚</p>
</li>
<li>
<p>èƒ¶æ°´è¯­è¨€ï¼šAgent çš„æ ¸å¿ƒæ˜¯â€œè¿æ¥â€â€”â€”è¿æ¥å¤§æ¨¡å‹ã€è¿æ¥ APIã€è¿æ¥æœ¬åœ°æ–‡ä»¶ã€‚Python å†™è¿™ç§è¿æ¥é€»è¾‘æœ€å¿«ã€‚</p>
</li>
<li>
<p>é—¨æ§›ä½ï¼šå®ƒçš„è¯­æ³•æ¥è¿‘è‹±è¯­ï¼Œè®©ä½ èƒ½æŠŠç²¾åŠ›é›†ä¸­åœ¨â€œè®¾è®¡æ™ºèƒ½ä½“é€»è¾‘â€ä¸Šï¼Œè€Œä¸æ˜¯çº ç»“è¯­æ³•ç»†èŠ‚ã€‚</p>
</li>
</ul>
<p>ç»“è®ºï¼šæƒ³åš AI Agentï¼Œé¦–é€‰ Pythonã€‚</p>
<p>å°¤å…¶æ˜¯å­¦ä¹ çš„è¯ï¼Œå…ˆå­¦ pythonï¼Œé¢å‘æœ€å…ˆè¿›æœ€å…¨é¢çš„å·¥å…·é“¾æ˜¯æœ€ä¼˜é€‰ï¼Œç­‰pythonè¿™å—ç†Ÿæ‚‰åŸç†äº†ï¼Œå†æŒ‰è¯‰æ±‚è¾å°„åˆ°è‡ªå·±éœ€è¦çš„åœºæ™¯å’Œè¯­è¨€ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260131131848180.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ ä¸ºä»€ä¹ˆè¦ç”¨ Minicondaï¼Ÿ</h2>
<p>å¾ˆå¤šæ–°æ‰‹ä¼šç›´æ¥å» Python å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œè¿™å…¶å®æ˜¯ä¸ªâ€œå¤§å‘â€ã€‚</p>
<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç®¡ç†å„ç§å¤æ‚çš„åº“ï¼ˆä¾èµ–ï¼‰ã€‚ä¸ºäº†é˜²æ­¢é¡¹ç›® A çš„åº“å’Œé¡¹ç›® B çš„åº“æ‰“æ¶ï¼ˆç‰ˆæœ¬å†²çªï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ <strong>â€œè™šæ‹Ÿç¯å¢ƒâ€</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸ç”¨ <code>Docker</code> ï¼Ÿ</p>
<ul>
<li>Dockerè™½ç„¶éš”ç¦»æ€§æœ€å¥½ï¼Œä½†å¯¹åˆå­¦è€…æ¥è¯´ï¼Œæ“ä½œæ–‡ä»¶å’Œè°ƒè¯•å¤ªéº»çƒ¦ï¼Œé˜»ç¢å­¦ä¹ å¿ƒæµã€‚</li>
<li>ä¹±ä¸ƒå…«ç³Ÿçš„ç¯å¢ƒé—®é¢˜ä¼šè®©åˆå­¦è€…ä¿¡å¿ƒå—æŒ«ï¼Œå®¹æ˜“è¢«æ‰“æ–­å­¦ä¹ è¿›ç¨‹ã€‚</li>
</ul>
<p><code>Miniconda</code> æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</p>
<p><code>Miniconda</code> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç¯å¢ƒç®¡ç†å·¥å…·ã€‚</p>
<ul>
<li>
<p>å®ƒå¯ä»¥å¸®ä½ ä¸€é”®åˆ‡æ¢ Python ç‰ˆæœ¬ï¼ˆ3.10, 3.11, 3.12 éšæ„åˆ‡ï¼‰ã€‚</p>
</li>
<li>
<p>å®ƒèƒ½åˆ›å»ºç‹¬ç«‹çš„â€œæ²™ç›’â€ï¼Œè®©ä½ éšæ„æŠ˜è…¾è€Œä¸ç ´åç”µè„‘ç³»ç»Ÿã€‚</p>
</li>
<li>
<p>å®ƒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œæ¯” <code>docker</code> æ–¹ä¾¿ä¸€ä¸‡å€ï¼Œä¸éœ€è¦æŒ‚è½½ä»€ä¹ˆ<code>volumes</code>æ˜ å°„ï¼Œå¯¹åˆå­¦è€…è¿è´¯å­¦ä¹ æ›´æ–¹ä¾¿ã€‚</p>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260131133124958.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€ æ‰‹æŠŠæ‰‹æ­å»ºç¯å¢ƒ</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå®‰è£… MinicondaåŠç¯å¢ƒå˜é‡</h3>
<p>è®¿é—® Miniconda å®˜ç½‘ ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…ã€‚åœ°å€ï¼š<a href="https://link.juejin.cn?target=docs.conda.io%2Fen%2Flatest%2Fminiconda.html" target="_blank" title="docs.conda.io/en/latest/miniconda.html" ref="nofollow noopener noreferrer">docs.conda.io/en/latest/mâ€¦</a></p>
<p>å®‰è£…ä¹‹åï¼Œè®°å¾—æŠŠå®‰è£…æ–‡ä»¶å¤¹ä¸‹<code>condabin</code>ç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡é‡Œã€‚ï¼ˆé’ˆå¯¹windowsç”¨æˆ·å“ˆï¼‰</p>
<p>æ¯”å¦‚æˆ‘çš„ï¼Œå°±æ˜¯æŠŠ <code>D:\miniconda\condabin</code> åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260131155507332.png" alt="" loading="lazy"/></p>
<p>ä»¥ <code>cmd</code> èƒ½æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda --version
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201093046760.png" alt="" loading="lazy"/></p>
<p>è¾“å‡º<code>25.11.1</code>è¿™æ ·çš„ç‰ˆæœ¬å·å°±ä»£è¡¨ç¯å¢ƒå˜é‡é…ç½®okã€‚</p>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šåˆ›å»º AI ä¸“å±ç¯å¢ƒ</h3>
<p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆWindows ç”¨æˆ·æ¨è PowerShellï¼ŒMac ç”¨æˆ·ç”¨ Terminalï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»ºä¸€ä¸ªåä¸º ai_agent çš„ç¯å¢ƒï¼ŒæŒ‡å®šä½¿ç”¨ Python 3.11ï¼ˆç¨³å®šæ€§æœ€ä½³ï¼‰</span>
conda create -n ai_agent python=3.11 -y

<span class="hljs-comment"># 2. æ¿€æ´»ç¯å¢ƒï¼ˆçœ‹åˆ°å‘½ä»¤è¡Œå‰ç¼€å˜æˆ (ai_agent) å³æˆåŠŸï¼‰</span>
conda activate ai_agent
</code></pre>
<p>è¿™é‡Œ <code>powerShell</code> å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªå‘ï¼šæ‰§è¡Œå®Œ <code>conda activate ai_agent</code> åæ²¡ååº”ã€‚</p>
<ul>
<li>
<p>åŸå› ï¼šPowerShell çš„å®‰å…¨ç­–ç•¥é»˜è®¤æ¯”è¾ƒä¸¥æ ¼ï¼Œç¦æ­¢è¿è¡Œæœªç­¾åçš„è„šæœ¬ï¼ˆConda çš„æ¿€æ´»è„šæœ¬æœ¬è´¨ä¸Šæ˜¯ä¸€æ®µ PowerShell è„šæœ¬ï¼‰ã€‚</p>
</li>
<li>
<p>è§£å†³æ–¹æ³•ï¼šä½ éœ€è¦èµ‹äºˆ PowerShell æ‰§è¡Œæƒé™ã€‚</p>
<ul>
<li>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShellã€‚</p>
</li>
<li>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre>
<ul>
<li>è¾“å…¥ Y ç¡®è®¤</li>
<li>é‡æ–°è¿è¡Œ <code>conda init powershell</code>ï¼Œç„¶åé‡å¯ PowerShell çª—å£ã€‚</li>
</ul>
</li>
</ul>
<p>åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹ä»£ç åï¼š</p>
<pre><code class="hljs language-css" lang="css">conda activate ai_agent
python <span class="hljs-attr">--version</span>
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201093259212.png" alt="" loading="lazy"/>
å¦‚æœèƒ½æˆåŠŸæ˜¾ç¤ºpythonçš„ç‰ˆæœ¬å·ä»£è¡¨okã€‚</p>
<h2 data-id="heading-5">å››ã€æ¥å…¥Deepseekå¤§æ¨¡å‹</h2>
<p><code>deepseek</code> è¢«ç§°ä¸ºæ€§ä»·æ¯”ä¹‹ç‹ã€‚åŸå› åœ¨äºtokenå•ä»·éå¸¸åˆ’ç®—ï¼Œè€Œä¸”å¯¹äºå›½å†…ç”¨æˆ·æ¥è¯´ç½‘ç»œæ¡ä»¶æ”¯æŒä¹Ÿæ˜¯æå¥½çš„ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå­¦ä¹ é€‰æ‹©ã€‚</p>
<p>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2Fusage" target="_blank" title="https://platform.deepseek.com/usage" ref="nofollow noopener noreferrer">platform.deepseek.com/usage</a> å¯ä»¥éå¸¸ä¾¿æ·åœ°å®Œæˆæ³¨å†Œå’Œå……å€¼ï¼Œ2-3å—é’±å°±è¶³å¤Ÿç”¨å¾ˆä¹…å¾ˆä¹…äº†ã€‚</p>
<p>ç„¶ååœ¨ <code>api keys</code> é¡µé¢åˆ›å»ºä¸€ä¸ª <code>API Key</code>ï¼Œå¤åˆ¶è¿™ä¸ªkeyï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šç”¨åˆ°ã€‚</p>
<h3 data-id="heading-6">4.1 å®‰è£…æ ¸å¿ƒåº“</h3>
<p>éšä¾¿åˆ›å»ºä¸€ä¸ªå­¦ä¹ ç”¨çš„æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹é‡Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda activate ai_agent
pip install openai python-dotenv pydantic
</code></pre>
<h3 data-id="heading-7">4.2 é…ç½®ä½ çš„key</h3>
<p>æ°¸è¿œä¸è¦æŠŠ API Key ç›´æ¥å†™åœ¨ä»£ç é‡Œï¼ ä¸€æ—¦ä½ ä¸å°å¿ƒæˆªå›¾æˆ–æŠŠä»£ç ä¸Šä¼  GitHubï¼ŒKey å°±ä¼šæ³„éœ²ã€‚</p>
<p>æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º .env çš„æ–‡ä»¶ï¼ˆæ³¨æ„å‰é¢æœ‰ä¸ªç‚¹ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-.env" lang=".env"># è¿™é‡Œçš„ Key ä»…ä½œç¤ºä¾‹ï¼Œè¯·æ›¿æ¢ä¸ºä½ è‡ªå·±çš„
DEEP_SEEK_API_KEY=sk-xxxx
DEEP_SEEK_API_URL=https://api.deepseek.com
</code></pre>
<h3 data-id="heading-8">4.3 3. ç¼–å†™â€œHello Worldâ€æµ‹è¯•è„šæœ¬</h3>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ check_env.pyï¼Œç²˜è´´ä»¥ä¸‹ä»£ç ã€‚è¿™æ®µä»£ç ä¼šè‡ªåŠ¨è¯»å– .env é‡Œçš„é…ç½®æ¥è¿æ¥ DeepSeekã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># 1. åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-comment"># 2. ä»ç¯å¢ƒè¯»å–é…ç½®</span>
api_key = os.getenv(<span class="hljs-string">"DEEP_SEEK_API_KEY"</span>)
base_url = os.getenv(<span class="hljs-string">"DEEP_SEEK_API_URL"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­£åœ¨æ£€æŸ¥ç¯å¢ƒé…ç½®..."</span>)

<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> api_key:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° API KEYï¼Œè¯·æ£€æŸ¥ .env æ–‡ä»¶"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># ä¸ºäº†å®‰å…¨ï¼Œåªæ‰“å°å‰å‡ ä½å’Œåå‡ ä½</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… API Key è¯»å–æˆåŠŸ: <span class="hljs-subst">{api_key[:<span class="hljs-number">6</span>]}</span>******<span class="hljs-subst">{api_key[-<span class="hljs-number">4</span>:]}</span>"</span>)

<span class="hljs-comment"># 3. å°è¯•å‘èµ·ä¸€æ¬¡çœŸå®çš„å¯¹è¯è¯·æ±‚</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># DeepSeek å…¼å®¹ OpenAI SDKï¼Œåªéœ€æ›¿æ¢ base_url</span>
    client = OpenAI(api_key=api_key, base_url=base_url)
    
    response = client.chat.completions.create(
        model=<span class="hljs-string">"deepseek-chat"</span>,  <span class="hljs-comment"># DeepSeek çš„æ¨¡å‹åç§°</span>
        messages=[
            {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹"</span>},
            {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½ï¼Œè¯·ç”¨ä¸€å¥è¯è¯æ˜ä½ å·²ç»è¿æ¥æˆåŠŸäº†ã€‚"</span>},
        ]
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ‰ è¿æ¥æˆåŠŸï¼å¤§æ¨¡å‹å›å¤ï¼š"</span>)
    <span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
    
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâŒ è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-9">4.4 è¿è¡ŒéªŒè¯</h3>
<p>åœ¨ç»ˆç«¯è¿è¡Œï¼š</p>
<pre><code class="hljs">python check_env.py
</code></pre>
<p>å¦‚æœä½ çœ‹åˆ° â€œğŸ‰ è¿æ¥æˆåŠŸï¼â€ ä»¥åŠ DeepSeek çš„å›å¤ï¼Œæ­å–œä½ ï¼ä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªå¯ä»¥éšæ—¶è°ƒç”¨çš„ AI å¤§è„‘ï¼Œå¹¶ä¸”æ­å»ºå¥½äº†ä¸“ä¸šçš„ Python å¼€å‘ç¯å¢ƒã€‚
<img src="https://pic.zhangshichun.top/pic/20260201093415136.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">ä¸‹ä¸€æ­¥é¢„å‘Š</h2>
<p>ç¯å¢ƒæ­å¥½äº†ï¼Œåªä¼šèŠå¤©å¯ä¸è¡Œã€‚</p>
<p>åœ¨ä¸‹ä¸€ç¯‡ ã€ŠAI Agent ç¼–ç¨‹å…¥é—¨ 03ï¼šç»“æ„åŒ–è¾“å‡ºã€‹ ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•é€šè¿‡ Prompt å·¥ç¨‹ å’Œ ç»“æ„åŒ–æ•°æ®ï¼ˆJSONï¼‰ï¼Œå¼ºè¿« AI ä¸å†â€œèƒ¡è¨€ä¹±è¯­â€ï¼Œè€Œæ˜¯åƒç¨‹åºä¸€æ ·ç²¾å‡†è¾“å‡ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®æ ¼å¼ã€‚</p>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ä¸€ä¸ªå° Demoï¼Œå¸¦ä½ å…¥é—¨å®‰å“ Clean Architecture]]></title>    <link>https://juejin.cn/post/7601486204174123058</link>    <guid>https://juejin.cn/post/7601486204174123058</guid>    <pubDate>2026-02-02T00:10:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601486204174123058" data-draft-id="7601028900886462510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ä¸€ä¸ªå° Demoï¼Œå¸¦ä½ å…¥é—¨å®‰å“ Clean Architecture"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-02T00:10:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/2313028195058471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ä¸€ä¸ªå° Demoï¼Œå¸¦ä½ å…¥é—¨å®‰å“ Clean Architecture
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028195058471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:10:42.000Z" title="Mon Feb 02 2026 00:10:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆä½ çš„ä»£ç è¶Šæ¥è¶Šéš¾ç»´æŠ¤ï¼Ÿ</h2>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘ç›´æ¥å†™åœ¨ <code>Activity / Fragment</code> é‡Œ</li>
<li>UIã€ç½‘ç»œã€æ•°æ®åº“ä»£ç æ··åœ¨ä¸€èµ·ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«</li>
<li>ä¸€ä¸ªæ¥å£å­—æ®µæ”¹åŠ¨ï¼Œæ•´ä¸ªé¡¹ç›®åˆ°å¤„æŠ¥é”™</li>
<li>æƒ³å†™å•å…ƒæµ‹è¯•ï¼Œå´å‘ç°ä¸¥é‡ä¾èµ– Android Framework</li>
</ul>
<p>å¦‚æœä½ å¯¹ä»¥ä¸Šæƒ…å†µå¹¶ä¸é™Œç”Ÿï¼Œé‚£ä¹ˆé—®é¢˜å¾€å¾€ä¸æ˜¯ä½ å†™å¾—ä¸å¤ŸåŠªåŠ›ï¼Œè€Œæ˜¯<strong>é¡¹ç›®ç¼ºä¹æ¸…æ™°çš„æ¶æ„è®¾è®¡</strong>ã€‚</p>
<p><strong>Clean Architectureï¼ˆæ•´æ´æ¶æ„ï¼‰</strong>ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œæå‡ºçš„ä¸€ç§æ¶æ„æ€æƒ³ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Clean Architectureï¼Ÿ</h2>
<p><strong>Clean Architecture ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ã€‚</strong></p>
<p>å®ƒçš„æ ¸å¿ƒç›®æ ‡å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>è®©æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äº UIã€æ¡†æ¶å’Œå®ç°ç»†èŠ‚ã€‚</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li>UI å¯ä»¥éšæ„æ›´æ¢ï¼ˆXML â†’ Composeï¼‰</li>
<li>ç½‘ç»œåº“å¯ä»¥æ›¿æ¢ï¼ˆRetrofit â†’ Ktorï¼‰</li>
<li>æ•°æ®æ¥æºå¯ä»¥å˜åŒ–ï¼ˆAPI â†’ æœ¬åœ°æ•°æ®åº“ï¼‰</li>
</ul>
<p>ğŸ‘‰ <strong>ä½†ä¸šåŠ¡é€»è¾‘å‡ ä¹ä¸ç”¨æ”¹åŠ¨ã€‚</strong></p>
<h3 data-id="heading-2">æ ¸å¿ƒåŸåˆ™ï¼šä¾èµ–å€’ç½®ï¼ˆDependency Ruleï¼‰</h3>
<p>Clean Architecture æœ€é‡è¦çš„ä¸€æ¡è§„åˆ™æ˜¯ï¼š</p>
<blockquote>
<p><strong>ä»£ç çš„ä¾èµ–æ–¹å‘ï¼Œåªèƒ½ä»å¤–å±‚æŒ‡å‘å†…å±‚ã€‚</strong></p>
</blockquote>
<ul>
<li>å†…å±‚ï¼šä¸šåŠ¡è§„åˆ™ï¼ˆæœ€ç¨³å®šï¼‰</li>
<li>å¤–å±‚ï¼šUIã€ç½‘ç»œã€æ•°æ®åº“ï¼ˆæœ€å®¹æ˜“å˜åŒ–ï¼‰</li>
</ul>
<p>ğŸ“Œ å†…å±‚æ°¸è¿œä¸çŸ¥é“å¤–å±‚çš„å­˜åœ¨</p>
<hr/>
<h2 data-id="heading-3">Clean Architecture çš„åˆ†å±‚ç»“æ„</h2>
<p>åœ¨ Android é¡¹ç›®ä¸­ï¼ŒClean Architecture é€šå¸¸å¯ä»¥æ‹†åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<h3 data-id="heading-4">1ï¸âƒ£ Presentationï¼ˆè¡¨ç°å±‚ï¼‰</h3>
<p><strong>èŒè´£ï¼šè´Ÿè´£ UI å±•ç¤ºå’Œç”¨æˆ·äº¤äº’</strong></p>
<p>å¸¸è§ç»„ä»¶ï¼š</p>
<ul>
<li>Activity / Fragment</li>
<li>Jetpack Compose</li>
<li>ViewModel</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸åŒ…å«ä¸šåŠ¡è§„åˆ™</li>
<li>åªè´Ÿè´£ç®¡ç† UI State</li>
<li>é€šè¿‡ UseCase è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li>
</ul>
<hr/>
<h3 data-id="heading-5">2ï¸âƒ£ Domainï¼ˆé¢†åŸŸå±‚ï¼‰â­ æ ¸å¿ƒå±‚</h3>
<p><strong>èŒè´£ï¼šå®šä¹‰ä¸šåŠ¡è§„åˆ™å’Œä¸šåŠ¡æ¨¡å‹</strong></p>
<p>åŒ…å«å†…å®¹ï¼š</p>
<ul>
<li>Entity / Model</li>
<li>UseCase</li>
<li>Repository æ¥å£ï¼ˆæŠ½è±¡ï¼‰</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>çº¯ Kotlin</li>
<li>ä¸ä¾èµ– Android</li>
<li>ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“</li>
<li>æ˜¯æ•´ä¸ªé¡¹ç›®ä¸­æœ€ç¨³å®šçš„ä¸€å±‚</li>
</ul>
<p>ğŸ“Œ è¿™ä¸€å±‚æ‰¿è½½äº†é¡¹ç›®çœŸæ­£çš„â€œä¸šåŠ¡ä»·å€¼â€ã€‚</p>
<hr/>
<h3 data-id="heading-6">3ï¸âƒ£ Dataï¼ˆæ•°æ®å±‚ï¼‰</h3>
<p><strong>èŒè´£ï¼šè´Ÿè´£æ•°æ®ä»å“ªé‡Œæ¥ã€å¦‚ä½•è·å–</strong></p>
<p>åŒ…å«å†…å®¹ï¼š</p>
<ul>
<li>ç½‘ç»œè¯·æ±‚ï¼ˆAPIï¼‰</li>
<li>æœ¬åœ°æ•°æ®åº“</li>
<li>Repository çš„å…·ä½“å®ç°</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å®ç° Domain å±‚å®šä¹‰çš„æ¥å£</li>
<li>å¯ä»¥è‡ªç”±åˆ‡æ¢æ•°æ®æ¥æº</li>
<li>æ˜¯å˜åŒ–æœ€é¢‘ç¹çš„ä¸€å±‚</li>
</ul>
<hr/>
<h2 data-id="heading-7"><code>CleanArc</code> é¡¹ç›®å®è·µ</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹é¡¹ç›® <strong>CleanArc</strong>ï¼Œæ¥çœ‹çœ‹ Clean Architecture åœ¨çœŸå® Android é¡¹ç›®ä¸­æ˜¯å¦‚ä½•è½åœ°çš„ã€‚</p>
<p>ğŸ¯ é¡¹ç›®ç›®æ ‡å¾ˆç®€å•ï¼š</p>
<blockquote>
<p><strong>ä»æœåŠ¡å™¨è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œå¹¶å°†å…¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-8">Data å±‚ï¼šæ•°æ®çš„æ¥æºï¼ˆHowï¼‰</h2>
<p>Data å±‚åªå…³å¿ƒä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p><strong>æˆ‘å¦‚ä½•æŠŠæ•°æ®æ‹¿åˆ°ï¼Ÿ</strong></p>
</blockquote>
<h3 data-id="heading-9">Repository å®ç°</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fef8074fe1054699ac8efe7c6a05d763~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770595842&amp;x-signature=lqKvt7SKd04u0kQeYPBAAW20%2B5A%3D" alt="image.png" loading="lazy"/></p>
<p>ğŸ“Œ åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œ<strong>å¼‚å¸¸æ˜¯åœ¨ Repository å±‚ä¸­è¢«å¤„ç†çš„</strong>ã€‚
Repository æœ€æ¸…æ¥šå¼‚å¸¸çš„æ¥æºï¼Œå› æ­¤åœ¨è¿™é‡Œå°†æŠ€æœ¯å¼‚å¸¸è½¬æ¢ä¸ºä¸šåŠ¡å¯ç†è§£çš„ç»“æœã€‚</p>
<hr/>
<h2 data-id="heading-10">Domain å±‚ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆWhatï¼‰</h2>
<p>Domain å±‚åªå…³å¿ƒï¼š</p>
<blockquote>
<p><strong>æˆ‘è¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåš</strong></p>
</blockquote>
<h3 data-id="heading-11">Repository æ¥å£ï¼ˆå¥‘çº¦ï¼‰</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f08b4c0205348018e7c1292f2088c0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770595842&amp;x-signature=e8Bqwbao19ASJKDPPyrIur3mgwE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">UseCaseï¼šä¸šåŠ¡è¡Œä¸ºçš„å°è£…</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae2d99513b8241d5924ace93bb3ce7a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770595842&amp;x-signature=pvp%2BCgOUrf4hLr1BrFR%2Ffvdo6Vs%3D" alt="image.png" loading="lazy"/></p>
<p>ğŸ“Œ UseCase ä¸è´Ÿè´£æ•è·å¼‚å¸¸
ğŸ“Œ å®ƒåªç»„åˆå’Œæ‰§è¡Œä¸šåŠ¡è§„åˆ™
ğŸ“Œ Domain å±‚å› æ­¤ä¿æŒé«˜åº¦çº¯å‡€</p>
<hr/>
<h2 data-id="heading-13">Presentation å±‚ï¼šUI å±•ç¤ºï¼ˆShowï¼‰</h2>
<p>Presentation å±‚è´Ÿè´£å°†æ•°æ®è½¬æ¢ä¸ºç”¨æˆ·å¯æ„ŸçŸ¥çš„ç•Œé¢çŠ¶æ€ã€‚</p>
<h3 data-id="heading-14">ViewModel</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bbd9eaec32c4841a6c79bb816acd6d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770595842&amp;x-signature=euHVIi8Y1TQ8ErOtOU6iLEY10Tw%3D" alt="image.png" loading="lazy"/></p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ViewModel ä¸ç›´æ¥ä¾èµ– Repository</li>
<li>åªé€šè¿‡ UseCase ä¸ Domain å±‚äº¤äº’</li>
<li>ä¸“æ³¨äº UI State ç®¡ç†</li>
</ul>
<p>UIï¼ˆCompose / XMLï¼‰åªéœ€æ ¹æ® State æ¸²æŸ“ç•Œé¢ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…³äºå¼‚å¸¸å¤„ç†ï¼šä¸ºä»€ä¹ˆæ”¾åœ¨ Repository å±‚ï¼Ÿ</h2>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œ<strong>å¼‚å¸¸å¤„ç†ä¸»è¦é›†ä¸­åœ¨ Repositoryï¼ˆData å±‚ï¼‰ä¸­å®Œæˆ</strong>ï¼Œè€Œä¸æ˜¯åœ¨ UseCase å±‚ç»Ÿä¸€ try-catchã€‚</p>
<p>åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>Repository æœ€äº†è§£å¼‚å¸¸çš„çœŸå®æ¥æºï¼ˆç½‘ç»œã€æ•°æ®åº“ã€è§£æï¼‰</li>
<li>å¯ä»¥åœ¨è¿™é‡Œå°†æŠ€æœ¯å¼‚å¸¸è½¬æ¢ä¸ºä¸šåŠ¡é”™è¯¯</li>
<li>é¿å…å°† Retrofitã€HTTP Code ç­‰ç»†èŠ‚æ³„éœ²åˆ° Domain å±‚</li>
<li>ä¿æŒ Domain å±‚çš„çº¯å‡€å’Œç¨³å®š</li>
</ul>
<p>è¿™ç§åšæ³•åœ¨ Android å·¥ç¨‹å®è·µä¸­éå¸¸å¸¸è§ï¼Œä¹Ÿæ›´åˆ©äºé•¿æœŸç»´æŠ¤ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¾èµ–æ³¨å…¥ï¼šå°†å„å±‚è¿æ¥èµ·æ¥</h2>
<p>ä¸ºäº†å°†æ¥å£å’Œå®ç°è§£è€¦ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ <strong>Koin</strong> è¿›è¡Œä¾èµ–æ³¨å…¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63423494b6e641cdb2a498afcff35225~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770595842&amp;x-signature=LqcB7EogJ0HZofg2eX1uyv2YdY0%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ä¾èµ–æ³¨å…¥ï¼š</p>
<ul>
<li>Domain å±‚åªå®šä¹‰æ¥å£</li>
<li>Data å±‚æä¾›å®ç°</li>
<li>Presentation å±‚åªæ¶ˆè´¹èƒ½åŠ›</li>
<li>å„å±‚ä¹‹é—´æ— ç›´æ¥è€¦åˆ</li>
</ul>
<hr/>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>é€šè¿‡ <code>CleanArc</code> è¿™ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Clean Architecture å¸¦æ¥çš„ä»·å€¼ï¼š</p>
<ul>
<li>âœ… <strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šUIã€ä¸šåŠ¡ã€æ•°æ®å„å¸å…¶èŒ</li>
<li>âœ… <strong>å¯æµ‹è¯•æ€§å¼º</strong>ï¼šUseCase å’Œ ViewModel æ˜“äºå•å…ƒæµ‹è¯•</li>
<li>âœ… <strong>é«˜å¯ç»´æŠ¤æ€§</strong>ï¼šä¿®æ”¹æ•°æ®æ¥æºä¸ä¼šå½±å“ä¸šåŠ¡å±‚</li>
<li>âœ… <strong>é€‚åˆé•¿æœŸæ¼”è¿›çš„é¡¹ç›®</strong></li>
</ul>
<p>Clean Architecture å¯¹äºä¸­å¤§å‹é¡¹ç›®æ¥è¯´ï¼Œå®ƒèƒ½æ˜¾è‘—é™ä½ç»´æŠ¤æˆæœ¬ï¼Œè®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€å¯æ§ã€‚</p>
<hr/>
<h2 data-id="heading-18">ç¤ºä¾‹ä»£ç </h2>
<p>ğŸ“¦ é¡¹ç›®å®Œæ•´ä»£ç å·²ä¸Šä¼ è‡³ GitHubï¼š</p>
<p>ğŸ‘‰ <strong>CleanArc ç¤ºä¾‹é¡¹ç›®</strong>
ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FThirdPrince%2FCleanArc" target="_blank" title="https://github.com/ThirdPrince/CleanArc" ref="nofollow noopener noreferrer">github.com/yourname/Clâ€¦</a></p>
<p>æ¬¢è¿ Star â­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JFRï¼šSpring Boot åº”ç”¨çš„æ€§èƒ½è¯Šæ–­åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7601486204174139442</link>    <guid>https://juejin.cn/post/7601486204174139442</guid>    <pubDate>2026-02-02T00:12:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601486204174139442" data-draft-id="7601374668961546290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JFRï¼šSpring Boot åº”ç”¨çš„æ€§èƒ½è¯Šæ–­åˆ©å™¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T00:12:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JFRï¼šSpring Boot åº”ç”¨çš„æ€§èƒ½è¯Šæ–­åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:12:33.000Z" title="Mon Feb 02 2026 00:12:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>GC åœé¡¿ã€å†…å­˜æ³„æ¼ã€æ¥å£å“åº”å˜æ…¢â€”â€”çº¿ä¸ŠæœåŠ¡å‡ºé—®é¢˜çš„æ—¶å€™ï¼Œä½ æ˜¯å¦ä¹Ÿæ›¾å¯¹ç€ç›‘æ§é¢æ¿å‘å‘†ï¼Œä¸çŸ¥é“æ ¹å› åœ¨å“ªï¼Ÿ</p>
<p>ä»Šå¤©èŠèŠ Java è‡ªå¸¦çš„æ€§èƒ½è¯Šæ–­ç¥å™¨ JFRï¼ˆJava Flight Recorderï¼‰ï¼Œé…åˆ Spring Boot ä½¿ç”¨ï¼Œæ•ˆæœç¿»å€ã€‚</p>
<h2 data-id="heading-0">JFR æ˜¯ä»€ä¹ˆ</h2>
<p>JFR æ˜¯ JDK å†…ç½®çš„æ€§èƒ½é‡‡é›†å·¥å…·ï¼ŒçŸ¥é“çš„äººä¸å¤šï¼Œä½†ç”¨è¿‡çš„äººéƒ½è¯´æ˜¯ã€ŒçœŸé¦™ã€ã€‚</p>
<p>å‡ ä¸ªæ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¼€é”€å¯æ§</strong>ï¼šé€šè¿‡äº‹ä»¶å¼€å…³æ§åˆ¶é‡‡é›†ç²’åº¦ï¼Œç²¾å‡†åœºæ™¯ä¸‹å¼€é”€å¯å‹åˆ°æä½</li>
<li><strong>äº‹ä»¶ä¸°å¯Œ</strong>ï¼šGCã€çº¿ç¨‹ã€IOã€é”ã€CPUã€å¼‚å¸¸â€¦â€¦100+ ç§äº‹ä»¶ç±»å‹</li>
<li><strong>å†å²å›æº¯</strong>ï¼šå½•åˆ¶æ–‡ä»¶å¯ä»¥ç¦»çº¿åˆ†æï¼Œäº‹åå®šä½æ²¡é—®é¢˜</li>
<li><strong>æŒç»­å½•åˆ¶</strong>ï¼šæ”¯æŒåå°å¸¸é©»ï¼Œå‡ºé—®é¢˜éšæ—¶æœ‰æ•°æ®å…œåº•</li>
</ul>
<blockquote>
<p>JDK 8 åŠä¹‹å‰ JFR æ˜¯å•†ä¸šç‰¹æ€§ï¼ŒJDK 9+ å…è´¹å¼€æºã€‚</p>
</blockquote>
<p>ç”Ÿäº§ç¯å¢ƒå¯ç”¨å‰å»ºè®®ç¡®è®¤ï¼šç£ç›˜ç©ºé—´å……è¶³ã€å¼€å¯äº† JFR æƒé™æ§åˆ¶ã€é‡‡é›†çš„äº‹ä»¶èŒƒå›´ç¬¦åˆéœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">Spring Boot å¯ç”¨ JFR</h2>
<h4 data-id="heading-2">æ–¹å¼ä¸€ï¼šå¯åŠ¨å‚æ•°ï¼ˆæœ€ç®€å•ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">java -XX:StartFlightRecording:filename=recording.jfr,duration=60s -jar app.jar
</code></pre>
<p>æ›´å¤šå‚æ•°é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -XX:StartFlightRecording=\
    filename=app-recording.jfr,\
    dumponexit=<span class="hljs-literal">true</span>,\
    maxsize=500M,\
    maxage=1d,\
    settings=profile -jar app.jar
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>





























<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>filename</code></td><td>å½•åˆ¶æ–‡ä»¶ä¿å­˜è·¯å¾„</td></tr><tr><td><code>dumponexit</code></td><td>JVM é€€å‡ºæ—¶è‡ªåŠ¨ dump</td></tr><tr><td><code>maxsize</code></td><td>å•æ–‡ä»¶æœ€å¤§ size</td></tr><tr><td><code>maxage</code></td><td>æœ€è€æ•°æ®çš„ä¿ç•™æ—¶é—´</td></tr><tr><td><code>settings</code></td><td>æ¨¡æ¿ï¼ˆproduction/profileï¼‰</td></tr></tbody></table>
<h4 data-id="heading-3">æ–¹å¼äºŒï¼šAPI åŠ¨æ€æ§åˆ¶</h4>
<p>Spring Boot å¯ä»¥é€šè¿‡ JMX è¿œç¨‹æ§åˆ¶ JFR å¼€å§‹/åœæ­¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JfrController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MBeanServer</span> <span class="hljs-variable">mBeanServer</span> <span class="hljs-operator">=</span> ManagementFactory.getPlatformMBeanServer();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">JFR_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"com.oracle.jdk:jfrType=FlightRecorder"</span>;

    <span class="hljs-meta">@PostMapping("/jfr/start")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">start</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String filename)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ObjectName</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectName</span>(JFR_BEAN_NAME);
        Map&lt;String, String&gt; settings = Map.of(
            <span class="hljs-string">"jdk.JavaMonitorEnter#enabled"</span>, <span class="hljs-string">"true"</span>,
            <span class="hljs-string">"jdk.SocketRead#enabled"</span>, <span class="hljs-string">"true"</span>
        );
        mBeanServer.invoke(name, <span class="hljs-string">"startRecording"</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{filename, settings},
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{String.class.getName(), Map.class.getName()}
        );
        <span class="hljs-keyword">return</span> <span class="hljs-string">"started: "</span> + filename;
    }

    <span class="hljs-meta">@PostMapping("/jfr/stop")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ObjectName</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectName</span>(JFR_BEAN_NAME);
        mBeanServer.invoke(name, <span class="hljs-string">"stopRecording"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{}, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{});
        <span class="hljs-keyword">return</span> <span class="hljs-string">"stopped"</span>;
    }
}
</code></pre>
<h4 data-id="heading-4">æ–¹å¼ä¸‰ï¼šActuator é›†æˆ</h4>
<p>Spring Boot Actuator ä¹Ÿèƒ½æš´éœ² JFR ç«¯ç‚¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,info,jfr</span>
  <span class="hljs-attr">jfr:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">directory:</span> <span class="hljs-string">/var/log/jfr</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">å½•åˆ¶æ–‡ä»¶æ€ä¹ˆåˆ†æ</h2>
<h4 data-id="heading-6">JDK Mission Control (JMC)</h4>
<p>è¿™æ˜¯å®˜æ–¹æä¾›çš„ GUI åˆ†æå·¥å…·ï¼ŒJDK 11+ è‡ªå¸¦ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">jmc
</code></pre>
<p>æ‰“å¼€å½•åˆ¶æ–‡ä»¶åï¼Œé‡ç‚¹çœ‹è¿™å‡ ä¸ªè§†å›¾ï¼š</p>
<p><strong>1. Recording View</strong> - äº‹ä»¶åˆ—è¡¨å’Œåˆ†å¸ƒ
<strong>2. Code Path</strong> - çƒ­ç‚¹æ–¹æ³•è°ƒç”¨é“¾
<strong>3. Memory</strong> - GC å’Œå¯¹è±¡åˆ†é…
<strong>4. Threads</strong> - é”ç«äº‰ã€çº¿ç¨‹çŠ¶æ€
<strong>5. I/O</strong> - æ–‡ä»¶å’Œç½‘ç»œå»¶è¿Ÿ</p>
<h4 data-id="heading-7">å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¦‚è§ˆ</span>
jfr summary recording.jfr

<span class="hljs-comment"># åªçœ‹æŸç±»äº‹ä»¶</span>
jfr <span class="hljs-built_in">print</span> --events <span class="hljs-string">"jdk.GC*,jdk.JavaMonitorEnter"</span> recording.jfr

<span class="hljs-comment"># æ‰¾å‡ºè€—æ—¶æœ€é•¿çš„è°ƒç”¨</span>
jfr <span class="hljs-built_in">print</span> --events <span class="hljs-string">"jdk.ExecutionSample"</span> recording.jfr | <span class="hljs-built_in">head</span> -30
</code></pre>
<h4 data-id="heading-8">ä»£ç åˆ†æè„šæœ¬</h4>
<p>å†™ä¸ªè„šæœ¬æ‰¹é‡å¤„ç†å¤šä¸ªå½•åˆ¶æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JfrAnalyzer</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">var</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(args[<span class="hljs-number">0</span>]);
        Map&lt;String, Long&gt; durations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        Map&lt;String, Integer&gt; counts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> RecordingFile.open(file)) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> event : rs) {
                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> event.getEventType().getName();
                counts.merge(name, <span class="hljs-number">1</span>, Integer::sum);
                <span class="hljs-keyword">if</span> (event.hasValue(<span class="hljs-string">"duration"</span>)) {
                    <span class="hljs-type">long</span> <span class="hljs-variable">ns</span> <span class="hljs-operator">=</span> event.getDuration(<span class="hljs-string">"duration"</span>).toNanos();
                    durations.merge(name, ns, Long::sum);
                }
            }
        }

        <span class="hljs-comment">// æ‰“å°ç»“æœ</span>
        System.out.println(<span class="hljs-string">"=== Most Frequent ==="</span>);
        counts.entrySet().stream()
            .sorted((a, b) -&gt; b.getValue() - a.getValue())
            .limit(<span class="hljs-number">10</span>).forEach(e -&gt;
                System.out.printf(<span class="hljs-string">"  %s: %d%n"</span>, e.getKey(), e.getValue()));

        System.out.println(<span class="hljs-string">"=== Slowest ==="</span>);
        durations.entrySet().stream()
            .sorted((a, b) -&gt; (<span class="hljs-type">int</span>)(b.getValue() - a.getValue()))
            .limit(<span class="hljs-number">10</span>).forEach(e -&gt;
                System.out.printf(<span class="hljs-string">"  %s: %d ms%n"</span>, e.getKey(), e.getValue() / <span class="hljs-number">1_000_000</span>));
    }
}
</code></pre>
<h2 data-id="heading-9">å®æˆ˜åœºæ™¯</h2>
<h4 data-id="heading-10">GC åœé¡¿æ’æŸ¥</h4>
<pre><code class="hljs language-bash" lang="bash">java -XX:StartFlightRecording:\
    filename=gc.jfr,\
    events=<span class="hljs-string">"jdk.GC*,jdk.YoungGarbageCollection,jdk.OldGarbageCollection"</span> -jar app.jar
</code></pre>
<p>JMC é‡Œé‡ç‚¹çœ‹ï¼š</p>
<ul>
<li>GC Pause æ€»æ—¶é•¿å’Œé¢‘ç‡</li>
<li>Young GC é¢‘ç‡æ˜¯å¦è¿‡é«˜</li>
<li>å¯¹è±¡æ™‹å‡ï¼ˆPromotionï¼‰æ˜¯å¦é¢‘ç¹</li>
</ul>
<h4 data-id="heading-11">æ¥å£æ…¢è¯·æ±‚å®šä½</h4>
<p>å…ˆå†™ä¸ªç®€å•çš„è€—æ—¶æ—¥å¿— AOPï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimingAspect</span> {

    <span class="hljs-meta">@Around("@annotation(GetMapping)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">trace</span><span class="hljs-params">(ProceedingJoinPoint p)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">var</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> p.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">var</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
            <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">1000</span>) {
                System.out.printf(<span class="hljs-string">"[SLOW] %s: %d ms%n"</span>, p.getSignature(), cost);
            }
        }
    }
}
</code></pre>
<p>æ…¢è¯·æ±‚å‡ºç°åï¼Œé…åˆ JFR å®šä½å…·ä½“ç“¶é¢ˆï¼š</p>

























<table><thead><tr><th>JFR äº‹ä»¶</th><th>å¯¹åº”é—®é¢˜</th></tr></thead><tbody><tr><td><code>jdk.ExecutionSample</code></td><td>CPU çƒ­ç‚¹</td></tr><tr><td><code>jdk.FileRead/Write</code></td><td>ç£ç›˜ IO æ…¢</td></tr><tr><td><code>jdk.SocketRead/Write</code></td><td>ç½‘ç»œ IO æ…¢</td></tr><tr><td><code>jdk.JavaMonitorEnter</code></td><td>é”ç­‰å¾…</td></tr></tbody></table>
<h4 data-id="heading-12">å†…å­˜æ³„æ¼</h4>
<p>å¼€å¯å¯¹è±¡åˆ†é…äº‹ä»¶ï¼š</p>
<pre><code class="hljs">jdk.ObjectAllocationInNewTLAB
jdk.ObjectAllocationOutsideTLAB
jdk.OldGarbageCollection
</code></pre>
<p>è€å¹´ä»£å›æ”¶é¢‘ç‡å¼‚å¸¸å‡é«˜ + å †å¤§å°æŒç»­å¢é•¿ï¼ŒåŸºæœ¬å°±æ˜¯æ³„æ¼äº†ã€‚é…åˆ <code>jfr print --events "jdk.OldGarbageCollection"</code> çœ‹å›æ”¶æ¨¡å¼ï¼Œå†å¯¼å‡ºå † dump å®šä½æ³„æ¼å¯¹è±¡ã€‚</p>
<h2 data-id="heading-13">ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹</h2>
<h4 data-id="heading-14">1. èµ„æºé™åˆ¶</h4>
<pre><code class="hljs language-bash" lang="bash">-XX:FlightRecorderOptions=maxchunksize=100M,memorysize=50M
</code></pre>
<h4 data-id="heading-15">2. æŒç»­å½•åˆ¶ + è½®è½¬</h4>
<pre><code class="hljs language-bash" lang="bash">java -XX:StartFlightRecording=\
    filename=/opt/jfr/app.jfr,\
    dumponexit=<span class="hljs-literal">true</span>,\
    maxage=7d,\
    maxsize=1G,\
    settings=production -jar app.jar
</code></pre>
<h4 data-id="heading-16">3. æƒé™æ§åˆ¶</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">export</span> <span class="hljs-string">COM_SUN_JDK_JFR_OPTIONS="security-manager=true"</span>
</code></pre>
<h4 data-id="heading-17">4. å‘Šè­¦è”åŠ¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedRate = 60000)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">alertIfNeeded</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// è¯»å– JFR äº‹ä»¶ï¼Œå¼‚å¸¸æ—¶æ¨é€åˆ°å‘Šè­¦å¹³å°</span>
}
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>JFR ä¸æ˜¯ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Œä½†ç¡®å®æ˜¯ã€Œå¹³æ—¶ç”¨ä¸ä¸Šï¼Œå‡ºäº‹èƒ½æ•‘å‘½ã€çš„å·¥å…·ã€‚</p>
<p>Spring Boot é›†æˆåï¼Œå¯ç”¨æˆæœ¬ä¸é«˜ã€‚ç”Ÿäº§ç¯å¢ƒæŒ‰éœ€å¼€å¯ï¼Œé…åˆèµ„æºé™åˆ¶å’Œè½®è½¬ç­–ç•¥ï¼Œé‡åˆ°é—®é¢˜ç›´æ¥çœ‹å½•åˆ¶æ–‡ä»¶ï¼Œæ¯”çŒœæ—¥å¿—é«˜æ•ˆå¾—å¤šã€‚</p>
<p>å‡ ä¸ªå»ºè®®ï¼š</p>
<ul>
<li>å…ˆè®°å‡ ä¸ªå¸¸ç”¨ JFR äº‹ä»¶åï¼Œç”¨åˆ°å†æŸ¥æ–‡æ¡£</li>
<li>æŒç»­å½•åˆ¶ + 7 å¤©è½®è½¬ï¼Œå‡ºé—®é¢˜æœ‰æ•°æ®å¯æŸ¥</li>
<li>é…åˆ JMC å¯è§†åŒ–ï¼Œåˆ†ææ•ˆç‡æ›´é«˜</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue çŠ¶æ€ç®¡ç†ç»ˆæå¯¹å†³ï¼šPinia vs Vuex è°æ‰æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601175299012198415</link>    <guid>https://juejin.cn/post/7601175299012198415</guid>    <pubDate>2026-02-02T00:19:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299012198415" data-draft-id="7601374137412059171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue çŠ¶æ€ç®¡ç†ç»ˆæå¯¹å†³ï¼šPinia vs Vuex è°æ‰æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-02T00:19:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue çŠ¶æ€ç®¡ç†ç»ˆæå¯¹å†³ï¼šPinia vs Vuex è°æ‰æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:19:48.000Z" title="Mon Feb 02 2026 00:19:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue çŠ¶æ€ç®¡ç†ç»ˆæå¯¹å†³ï¼šPinia vs Vuex è°æ‰æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ï¼Ÿ</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ã€‚å¯¹äº Vue.js å¼€å‘è€…æ¥è¯´ï¼ŒVuex é•¿æœŸä»¥æ¥æ˜¯çŠ¶æ€ç®¡ç†çš„é»˜è®¤é€‰æ‹©ï¼Œä½†éšç€ Vue 3 çš„æ¨å‡ºå’Œ Composition API çš„å¼•å…¥ï¼ŒPinia ä½œä¸ºæ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“è¿…é€Ÿå´›èµ·ã€‚æœ¬æ–‡å°†æ·±å…¥å¯¹æ¯” Pinia å’Œ Vuexï¼Œä»è®¾è®¡å“²å­¦ã€API è®¾è®¡ã€æ€§èƒ½ã€å¼€å‘ä½“éªŒç­‰å¤šä¸ªç»´åº¦è¿›è¡Œåˆ†æï¼Œå¸®åŠ©ä½ åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯é€‰å‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. Vuexï¼šç»å…¸çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-3">1.1 Vuex çš„è®¾è®¡å“²å­¦</h4>
<p>Vuex æ˜¯ Vue.js å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æºè‡ª Flux æ¶æ„ã€‚Vuex é€šè¿‡é›†ä¸­å¼å­˜å‚¨ï¼ˆStoreï¼‰ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶éµå¾ªä¸¥æ ¼çš„å•å‘æ•°æ®æµåŸåˆ™ã€‚å®ƒçš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>State</strong>ï¼šå•ä¸€çŠ¶æ€æ ‘ï¼Œå­˜å‚¨åº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ã€‚</li>
<li><strong>Getters</strong>ï¼šæ´¾ç”ŸçŠ¶æ€ï¼Œç±»ä¼¼äºè®¡ç®—å±æ€§ã€‚</li>
<li><strong>Mutations</strong>ï¼šåŒæ­¥ä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€é€”å¾„ã€‚</li>
<li><strong>Actions</strong>ï¼šå¤„ç†å¼‚æ­¥æ“ä½œå¹¶æäº¤ Mutationsã€‚</li>
</ul>
<h4 data-id="heading-4">1.2 Vuex çš„ä¼˜åŠ¿</h4>
<ul>
<li><strong>å®˜æ–¹èƒŒä¹¦</strong>ï¼šä½œä¸º Vue.js çš„å®˜æ–¹åº“ï¼ŒVuex æ‹¥æœ‰å¹¿æ³›çš„ç¤¾åŒºæ”¯æŒå’Œæˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿã€‚</li>
<li><strong>ä¸¥æ ¼çš„æ•°æ®æµ</strong>ï¼šå¼ºåˆ¶ä½¿ç”¨ Mutations ä¿®æ”¹çŠ¶æ€ï¼Œé€‚åˆå¤§å‹å›¢é˜Ÿåä½œã€‚</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šæ”¯æŒä¸°å¯Œçš„æ’ä»¶ï¼ˆå¦‚æŒä¹…åŒ–ã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">1.3 Vuex çš„å±€é™æ€§</h4>
<ul>
<li><strong>æ¨¡æ¿ä»£ç å¤š</strong>ï¼šå®šä¹‰ Stateã€Mutationsã€Actions éœ€è¦å¤§é‡æ ·æ¿ä»£ç ã€‚</li>
<li><strong>TypeScript æ”¯æŒæœ‰é™</strong>ï¼šå°½ç®¡ Vuex 4 æ”¹è¿›äº† TypeScript æ”¯æŒï¼Œä½†ä»ä¸å¦‚ Pinia ç›´è§‚ã€‚</li>
<li><strong>Composition API é€‚é…é—®é¢˜</strong>ï¼šVuex æœ€åˆæ˜¯ä¸º Options APIè®¾è®¡çš„ï¼Œä¸ Composition APIç»“åˆæ—¶ç•¥æ˜¾ç¬¨é‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">2. Piniaï¼šè½»é‡çº§ä¸”ç°ä»£åŒ–çš„æ›¿ä»£æ–¹æ¡ˆ</h3>
<h4 data-id="heading-7">2.1 Piniaçš„è®¾è®¡å“²å­¦</h4>
<p>Piniaæ˜¯ Vue.jsæ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘çš„ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼Œä¸“ä¸º Vue3å’ŒComposition APIä¼˜åŒ–ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ç®€åŒ–çŠ¶æ€ç®¡ç†æµç¨‹ï¼ŒåŒæ—¶ä¿æŒçµæ´»æ€§å’Œç±»å‹å®‰å…¨ã€‚Piniaçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ— Mutations</strong>ï¼šç›´æ¥é€šè¿‡ Actionsä¿®æ”¹çŠ¶æ€ï¼ˆæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼‰ã€‚</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šæ¯ä¸ª Storeéƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ— éœ€åµŒå¥—æ¨¡å—åŒ–é…ç½®ã€‚</li>
<li><strong>TypeScriptä¼˜å…ˆ</strong>ï¼šæä¾›å®Œæ•´çš„ç±»å‹æ¨æ–­å’Œç±»å‹å®‰å…¨æ”¯æŒã€‚</li>
</ul>
<p>####2.2 Piniaçš„ä¼˜åŠ¿</p>
<ul>
<li><strong>æ›´ç®€æ´çš„API</strong>ï¼šå‡å°‘æ ·æ¿ä»£ç ï¼ˆå¦‚æ— éœ€ Mutationsï¼‰ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ã€‚</li>
<li><strong>ä¼˜ç§€çš„ TypeScriptæ”¯æŒ</strong>ï¼šç±»å‹æ¨æ–­å¼€ç®±å³ç”¨ï¼Œé€‚åˆå¤§å‹é¡¹ç›®ã€‚</li>
<li><strong>Composition APIå‹å¥½</strong>ï¼šå¤©ç„¶é€‚é… setupè¯­æ³•å’Œå“åº”å¼ç¼–ç¨‹æ¨¡å‹ã€‚</li>
<li><strong>è½»é‡çº§</strong> ï¼šä½“ç§¯æ›´å°ï¼ˆçº¦1KBï¼‰ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</li>
</ul>
<p>####2.3 Piniaçš„å±€é™æ€§</p>
<ul>
<li><strong>ç”Ÿæ€ç›¸å¯¹å¹´è½»</strong>:è™½ç„¶å¢é•¿è¿…é€Ÿ,ä½†æ’ä»¶å’Œå·¥å…·é“¾ä¸å¦‚Vuexä¸°å¯Œã€‚</li>
<li>è¿ç§»æˆæœ¬:ç°æœ‰Vuexé¡¹ç›®éœ€é‡æ„æ‰èƒ½åˆ‡æ¢åˆ°Piniaã€‚</li>
</ul>
<hr/>
<p>###3.æ·±åº¦å¯¹æ¯”:Pinia vs Vuex</p>
<p>####3.1 APIè®¾è®¡ä¸å¼€å‘ä½“éªŒ</p>
<ul>
<li>ä»£ç é‡å¯¹æ¯”:
<ul>
<li>Vuexéœ€è¦å®šä¹‰State,Mutations,Actions,Getterså››ä¸ªéƒ¨åˆ†ã€‚</li>
<li>Piniaåªéœ€å®šä¹‰Stateå’ŒActions(æˆ–Getters)ã€‚</li>
</ul>
</li>
<li>ç±»å‹å®‰å…¨:
<ul>
<li>Piniaçš„ç±»å‹æ¨æ–­æ›´è‡ªç„¶,æ— éœ€é¢å¤–é…ç½®ã€‚</li>
<li>Vuexéœ€è¦æ‰‹åŠ¨å£°æ˜ç±»å‹æˆ–ä½¿ç”¨è¾…åŠ©å·¥å…·ã€‚</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹å¯¹æ¯”:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Vuex</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
 <span class="hljs-attr">state</span>: { <span class="hljs-attr">count</span>:<span class="hljs-number">0</span> },
 <span class="hljs-attr">mutations</span>:{ <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>){state.<span class="hljs-property">count</span>++} },
 <span class="hljs-attr">actions</span>:{ <span class="hljs-title function_">incrementAsync</span>(<span class="hljs-params">{commit}</span>){<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>),<span class="hljs-number">1000</span>)} }
})

<span class="hljs-comment">// Pinia</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore=<span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>,{
 <span class="hljs-attr">state</span>:<span class="hljs-function">()=&gt;</span>({<span class="hljs-attr">count</span>:<span class="hljs-number">0</span>}),
 <span class="hljs-attr">actions</span>:{
 <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++},
 <span class="hljs-keyword">async</span> <span class="hljs-title function_">incrementAsync</span>(<span class="hljs-params"/>){<span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">increment</span>,<span class="hljs-number">1000</span>)}
 }
})
</code></pre>
<p>####3.2æ€§èƒ½ä¸ä½“ç§¯</p>
<ul>
<li>Bundleå¤§å°:
<ul>
<li>Piniaçº¦1KB(vsVuexçš„4KB+)</li>
</ul>
</li>
<li>è¿è¡Œæ—¶æ€§èƒ½:
-ä¸¤è€…å·®å¼‚ä¸å¤§,ä½†Piniaçš„è½»é‡è®¾è®¡å¯èƒ½åœ¨å°å¹…åœºæ™¯ä¸­ç•¥ä¼˜ã€‚</li>
</ul>
<p>####3.3å¯æ‰©å±•æ€§</p>
<ul>
<li>æ’ä»¶ç³»ç»Ÿ:</li>
<li>Vuexæœ‰æ›´æˆç†Ÿçš„æ’ä»¶ç”Ÿæ€(å¦‚vuex-persistedstate)ã€‚</li>
<li>Piniaå¯é€šè¿‡æ‹¦æˆªå™¨å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚</li>
<li>SSRæ”¯æŒ:
ä¸¤è€…å‡æä¾›è‰¯å¥½SSRæ”¯æŒ,ä½†Piniaçš„è®¾è®¡æ›´ç°ä»£åŒ–ã€‚</li>
</ul>
<p>####3.4å­¦ä¹ æ›²çº¿ä¸å›¢é˜Ÿé€‚é…</p>
<ul>
<li>æ–°æ‰‹å‹å¥½åº¦:</li>
<li>Piniaçš„å­¦ä¹ æˆæœ¬æ›´ä½(æ¦‚å¿µæ›´å°‘)ã€‚</li>
<li>å›¢é˜Ÿåä½œ:
-Vuexçš„ä¸¥æ ¼æµç¨‹é€‚åˆå¤§å‹å›¢é˜Ÿè§„èŒƒã€‚
-Piniaçš„çµæ´»æ€§å¯èƒ½éœ€é¢å¤–çº¦å®šã€‚</li>
</ul>
<hr/>
<p>###4.ä½•æ—¶é€‰æ‹©Vuexæˆ–Pinia?</p>
<p>####4.1é€‰æ‹©VueXçš„åœºæ™¯
-ç»´æŠ¤é—ç•™Vue2é¡¹ç›®
-éœ€è¦æˆç†Ÿæ’ä»¶ç”Ÿæ€(å¦‚å¤æ‚æŒä¹…åŒ–éœ€æ±‚)
-å›¢é˜Ÿå·²æ·±åº¦é€‚åº”Fluxæ¨¡å¼</p>
<p>####4.2é€‰æ‹©PinIaçš„åœºæ™¯
â€“æ–°å¯Vue3é¡¹ç›®
â€“TypeScripté‡åº¦ç”¨æˆ·
â€“è¿½æ±‚å¼€å‘æ•ˆç‡å’Œç®€æ´æ€§
â€“CompositionAPIæŠ€æœ¯æ ˆ</p>
<hr/>
<p>###5.VueXçš„æœªæ¥ä¸è¿ç§»ç­–ç•¥</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯,Vueå®˜æ–¹å·²å°†PiniAä½œä¸ºæ¨èçš„çŠ¶æ€ç®¡ç†åº“,VueXç›®å‰å¤„äºç»´æŠ¤æ¨¡å¼è¿™æ„å‘³ç€:</p>
<p>1é•¿æœŸæ¥çœ‹,PiniAä¼šæˆä¸ºä¸»æµé€‰æ‹©
2ç°æœ‰VUEXé¡¹ç›®æ— éœ€ç«‹å³è¿ç§»
3è¿ç§»è·¯å¾„:
â€“å°å‹é¡¹ç›®å¯é€æ­¥æ›¿æ¢æ¨¡å—
â€“å¤§å‹é¡¹ç›®å¯å…±å­˜è¿‡æ¸¡</p>
<p>å®˜æ–¹æä¾›äº†è¿ç§»æŒ‡å—å’Œäº’æ“ä½œAPI(å¦‚useStorefromvueX)ã€‚</p>
<hr/>
<p>###6æ€»ç»“</p>
<p>æŠ€æœ¯é€‰å‹çš„æ ¸å¿ƒæ˜¯åŒ¹é…é¡¹ç›®éœ€æ±‚:</p>
<p>â€“å¦‚æœä½ éœ€è¦ç¨³å®šæ€§å’Œæˆç†Ÿæ–¹æ¡ˆ,VUEXä»æ˜¯å¯é é€‰æ‹©
â€“å¦‚æœä½ è¿½æ±‚ç°ä»£åŒ–å¼€å‘å’ŒTSä½“éªŒ,PiniAæ˜æ˜¾èƒœå‡º</p>
<p>ä¸ªäººè§‚ç‚¹:PiniAä»£è¡¨äº†æœªæ¥æ–¹å‘,å…¶ç®€æ´æ€§å’Œå¼€å‘ä½“éªŒçš„æå‡æ˜¯ä¸å¯é€†çš„è¶‹åŠ¿å»ºè®®æ–°é¡¹ç›®ä¼˜å…ˆè€ƒè™‘PiniAè€Œè€é¡¹ç›®å¯æŒ‰éœ€æ¸è¿›è¿ç§»æœ€ç»ˆ,VUEç”Ÿæ€çš„è¿™ç§è¿­ä»£æ­£æ˜¯å…¶å¥åº·å‘å±•çš„ä½“ç°â€”â€”åœ¨ä¿ç•™æ ¸å¿ƒæ€æƒ³çš„åŒæ—¶æŒç»­è¿›åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ç¨‹å¦‚ä½•åœæ­¢ï¼Ÿçº¿ç¨‹ä¹‹é—´å¦‚ä½•åä½œï¼Ÿçº¿ç¨‹ä¹‹é—´çš„å¼‚å¸¸å¦‚ä½•å¤„ç†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601441797118640179</link>    <guid>https://juejin.cn/post/7601441797118640179</guid>    <pubDate>2026-02-02T00:35:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601441797118640179" data-draft-id="7601020578490269705" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" çº¿ç¨‹å¦‚ä½•åœæ­¢ï¼Ÿçº¿ç¨‹ä¹‹é—´å¦‚ä½•åä½œï¼Ÿçº¿ç¨‹ä¹‹é—´çš„å¼‚å¸¸å¦‚ä½•å¤„ç†ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-02T00:35:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             çº¿ç¨‹å¦‚ä½•åœæ­¢ï¼Ÿçº¿ç¨‹ä¹‹é—´å¦‚ä½•åä½œï¼Ÿçº¿ç¨‹ä¹‹é—´çš„å¼‚å¸¸å¦‚ä½•å¤„ç†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:35:10.000Z" title="Mon Feb 02 2026 00:35:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çº¿ç¨‹åœæ­¢</h2>
<h3 data-id="heading-1">stopæ–¹æ³•</h3>
<p>stop æ–¹æ³•è™½ç„¶å¯ä»¥åœæ­¢çº¿ç¨‹ï¼Œä½†å®ƒå·²ç»æ˜¯ä¸å»ºè®®ä½¿ç”¨çš„åºŸå¼ƒæ–¹æ³•äº†ï¼Œè¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡ Thread ç±»ä¸­çš„æºç å‘ç°ï¼Œstop æºç å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eab53a7a56d40118b0ca4567f0a83b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=TBnNA8tC3gA703jjcGch2n5vMVI%3D" alt="" loading="lazy"/></p>
<p>stop æ–¹æ³•æ˜¯è¢« @Deprecated ä¿®é¥°çš„ä¸å»ºè®®ä½¿ç”¨çš„è¿‡æœŸæ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æ³¨é‡Šçš„ç¬¬ä¸€å¥è¯å°±è¯´æ˜äº† stop æ–¹æ³•ä¸ºéå®‰å…¨çš„æ–¹æ³•ã€‚</p>
<p>åŸå› åœ¨äºå®ƒåœ¨ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹æ—¶ä¼šå¼ºåˆ¶ä¸­æ–­çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ç®¡runæ–¹æ³•æ˜¯å¦æ‰§è¡Œå®Œäº†ï¼Œå¹¶ä¸”è¿˜ä¼šé‡Šæ”¾è¿™ä¸ªçº¿ç¨‹æ‰€æŒæœ‰çš„æ‰€æœ‰çš„é”å¯¹è±¡ã€‚è¿™ä¸€ç°è±¡ä¼šè¢«å…¶å®ƒå› ä¸ºè¯·æ±‚é”è€Œé˜»å¡çš„çº¿ç¨‹çœ‹åˆ°ï¼Œä½¿ä»–ä»¬ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚è¿™å°±ä¼šé€ æˆæ•°æ®çš„ä¸ä¸€è‡´ã€‚</p>
<p>æ¯”å¦‚é“¶è¡Œè½¬è´¦ï¼Œä»Aè´¦æˆ·å‘Bè´¦æˆ·è½¬è´¦500å…ƒï¼Œè¿™ä¸€è¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯ä»Aè´¦æˆ·ä¸­å‡å»500å…ƒï¼Œå‡å¦‚åˆ°è¿™æ—¶çº¿ç¨‹å°±è¢«stopäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±ä¼šé‡Šæ”¾å®ƒæ‰€å–å¾—é”ï¼Œç„¶åå…¶ä»–çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·Aè´¦æˆ·å°±è«åå…¶å¦™çš„å°‘äº†500å…ƒè€ŒBè´¦æˆ·ä¹Ÿæ²¡æœ‰æ”¶åˆ°é’±ã€‚è¿™å°±æ˜¯stopæ–¹æ³•çš„ä¸å®‰å…¨æ€§ã€‚</p>
<h3 data-id="heading-2">è®¾ç½®æ ‡å¿—ä½</h3>
<p>å¦‚æœçº¿ç¨‹çš„runæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªé‡å¤æ‰§è¡Œçš„å¾ªç¯ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªæ ‡è®°æ¥æ§åˆ¶å¾ªç¯æ˜¯å¦ç»§ç»­</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlagThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isInterrupt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¦‚æœä¸º true -&gt; ä¸­æ–­æ‰§è¡Œ</span>
        <span class="hljs-keyword">while</span> (!isInterrupt) {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å¤„ç†</span>
        }
    }
}
</code></pre>
<p>ä½†è‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦çš„é—®é¢˜åœ¨äºï¼šçº¿ç¨‹ä¸­æ–­çš„ä¸å¤ŸåŠæ—¶ã€‚å› ä¸ºçº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ— æ³•è°ƒç”¨ while(!isInterrupt) æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºç»ˆæ­¢çŠ¶æ€ï¼Œå®ƒåªèƒ½åœ¨ä¸‹ä¸€è½®è¿è¡Œæ—¶åˆ¤æ–­æ˜¯å¦è¦ç»ˆæ­¢å½“å‰çº¿ç¨‹ï¼Œæ‰€ä»¥å®ƒä¸­æ–­çº¿ç¨‹ä¸å¤ŸåŠæ—¶ï¼Œæ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InterruptFlag</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰çš„ä¸­æ–­æ ‡è¯†ç¬¦</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isInterrupt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-comment">// åˆ›å»ºå¯ä¸­æ–­çš„çº¿ç¨‹å®ä¾‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (!isInterrupt) { <span class="hljs-comment">// å¦‚æœ isInterrupt=true åˆ™åœæ­¢çº¿ç¨‹</span>
                System.out.println(<span class="hljs-string">"thread æ‰§è¡Œæ­¥éª¤1ï¼šçº¿ç¨‹å³å°†è¿›å…¥ä¼‘çœ çŠ¶æ€"</span>);
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// ä¼‘çœ  1s</span>
                    Thread.sleep(<span class="hljs-number">1000</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(<span class="hljs-string">"thread æ‰§è¡Œæ­¥éª¤2ï¼šçº¿ç¨‹æ‰§è¡Œäº†ä»»åŠ¡"</span>);
            }
        });
        thread.start(); <span class="hljs-comment">// å¯åŠ¨çº¿ç¨‹</span>

        <span class="hljs-comment">// ä¼‘çœ  100msï¼Œç­‰å¾… thread çº¿ç¨‹è¿è¡Œèµ·æ¥</span>
        Thread.sleep(<span class="hljs-number">100</span>);
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šè¯•å›¾ç»ˆæ­¢çº¿ç¨‹ thread"</span>);
        <span class="hljs-comment">// ä¿®æ”¹ä¸­æ–­æ ‡è¯†ç¬¦ï¼Œä¸­æ–­çº¿ç¨‹</span>
        isInterrupt = <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>è¾“å‡ºï¼šæˆ‘ä»¬æœŸæœ›çš„æ˜¯ï¼šçº¿ç¨‹æ‰§è¡Œäº†æ­¥éª¤ 1 ä¹‹åï¼Œæ”¶åˆ°ä¸­æ–­çº¿ç¨‹çš„æŒ‡ä»¤ï¼Œç„¶åå°±ä¸è¦å†æ‰§è¡Œæ­¥éª¤ 2 äº†ï¼Œä½†ä»ä¸Šè¿°æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨è‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦æ˜¯æ²¡åŠæ³•å®ç°æˆ‘ä»¬é¢„æœŸçš„ç»“æœçš„ï¼Œè¿™å°±æ˜¯è‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦ï¼Œå“åº”ä¸å¤ŸåŠæ—¶çš„é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0960d27c52b949baa7bc455227bad000~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=yvQ%2FLga7fwZ8XhFJs%2FD9CKT8yWI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">interruptedä¸­æ–­</h3>
<p>è¿™ç§æ–¹å¼éœ€è¦åœ¨whileå¾ªç¯ä¸­åˆ¤æ–­ä½¿ç”¨</p>
<p>ä½¿ç”¨ interrupt æ–¹æ³•å¯ä»¥ç»™æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼Œå‘é€ä¸€ä¸ªä¸­æ–­çº¿ç¨‹çš„æŒ‡ä»¤ï¼Œå®ƒå¹¶ä¸ç›´æ¥ä¸­æ–­çº¿ç¨‹ï¼Œè€Œæ˜¯å‘é€ä¸€ä¸ªä¸­æ–­çº¿ç¨‹çš„ä¿¡å·ï¼ŒæŠŠæ˜¯å¦æ­£åœ¨ä¸­æ–­çº¿ç¨‹çš„ä¸»åŠ¨æƒäº¤ç»™ä»£ç ç¼–å†™è€…ã€‚ç›¸æ¯”äºè‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦è€Œç„¶ï¼Œå®ƒèƒ½æ›´åŠæ—¶çš„æ¥æ”¶åˆ°ä¸­æ–­æŒ‡ä»¤ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-comment">// åˆ›å»ºå¯ä¸­æ–­çš„çº¿ç¨‹å®ä¾‹</span>
    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
        <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
            System.out.println(<span class="hljs-string">"thread æ‰§è¡Œæ­¥éª¤1ï¼šçº¿ç¨‹å³å°†è¿›å…¥ä¼‘çœ çŠ¶æ€"</span>);
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä¼‘çœ  1s</span>
                Thread.sleep(<span class="hljs-number">1000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                System.out.println(<span class="hljs-string">"thread çº¿ç¨‹æ¥æ”¶åˆ°ä¸­æ–­æŒ‡ä»¤ï¼Œæ‰§è¡Œä¸­æ–­æ“ä½œ"</span>);
                <span class="hljs-comment">// ä¸­æ–­å½“å‰çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œ</span>
                <span class="hljs-keyword">break</span>;
            }
            System.out.println(<span class="hljs-string">"thread æ‰§è¡Œæ­¥éª¤2ï¼šçº¿ç¨‹æ‰§è¡Œäº†ä»»åŠ¡"</span>);
        }
    });
    thread.start(); <span class="hljs-comment">// å¯åŠ¨çº¿ç¨‹</span>

    <span class="hljs-comment">// ä¼‘çœ  100msï¼Œç­‰å¾… thread çº¿ç¨‹è¿è¡Œèµ·æ¥</span>
    Thread.sleep(<span class="hljs-number">100</span>);
    System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šè¯•å›¾ç»ˆæ­¢çº¿ç¨‹ thread"</span>);
    <span class="hljs-comment">// ä¿®æ”¹ä¸­æ–­æ ‡è¯†ç¬¦ï¼Œä¸­æ–­çº¿ç¨‹</span>
    thread.interrupt();
}
</code></pre>
<p>è¾“å‡ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6290745792d48c4886af5b7b93709b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=xRmZIKc4%2FJKCPuA%2BHcGo8ms99rM%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šè¿°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œçº¿ç¨‹åœ¨æ¥æ”¶åˆ°ä¸­æ–­æŒ‡ä»¤ä¹‹åï¼Œç«‹å³ä¸­æ–­äº†çº¿ç¨‹ï¼Œç›¸æ¯”äºä¸Šä¸€ç§è‡ªå®šä¹‰ä¸­æ–­æ ‡è¯†ç¬¦çš„æ–¹æ³•æ¥è¯´ï¼Œå®ƒèƒ½æ›´åŠæ—¶çš„å“åº”ä¸­æ–­çº¿ç¨‹æŒ‡ä»¤ã€‚</p>
<h3 data-id="heading-4">åˆ©ç”¨interruptedException</h3>
<p>è¿™ç§æ–¹å¼ ä¸ éœ€è¦åœ¨whileå¾ªç¯ä¸­åˆ¤æ–­ä½¿ç”¨</p>
<p>å¦‚æœçº¿ç¨‹å› ä¸ºæ‰§è¡Œjoin()ï¼Œsleepæˆ–è€…wait()è€Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œæ­¤æ—¶æƒ³è¦åœæ­¢å®ƒï¼Œå¯ä»¥è°ƒç”¨interrupt()ï¼Œç¨‹åºä¼šæŠ›å‡ºinterruptedExceptionå¼‚å¸¸ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¼‚å¸¸ç»ˆæ­¢çº¿ç¨‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
    System.out.println(<span class="hljs-built_in">this</span>.getName() + <span class="hljs-string">"start"</span>);
    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;
    <span class="hljs-comment">//while (!Thread.interrupted()){</span>
    <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()){
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">10000</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-comment">//e.printStackTrace();</span>
            System.out.println(<span class="hljs-string">"ä¸­æ–­çº¿ç¨‹"</span>);
            <span class="hljs-keyword">break</span>;<span class="hljs-comment">//é€šè¿‡è¯†åˆ«åˆ°å¼‚å¸¸æ¥ä¸­æ–­</span>
        }
        System.out.println(<span class="hljs-built_in">this</span>.getName() + <span class="hljs-string">" "</span>+ i);
        i++;
    }
    System.out.println(<span class="hljs-built_in">this</span>.getName() + <span class="hljs-string">"end"</span>);
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa6b19e12fe84ca9b0a1c8d20a5def29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=AE0fP38nHP93VwxOnqOXfeTmHYs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">Executor çš„ä¸­æ–­æ“ä½œ</h3>
<p>è°ƒç”¨ Executor çš„ shutdown() æ–¹æ³•ä¼šç­‰å¾…çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•ä¹‹åå†å…³é—­ï¼Œä½†æ˜¯å¦‚æœè°ƒç”¨çš„æ˜¯ shutdownNow() æ–¹æ³•ï¼Œåˆ™ç›¸å½“äºè°ƒç”¨æ¯ä¸ªçº¿ç¨‹çš„ interrupt() æ–¹æ³•ã€‚</p>
<p>ä»¥ä¸‹ä½¿ç”¨ Lambda åˆ›å»ºçº¿ç¨‹ï¼Œç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå†…éƒ¨çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();
    executorService.execute(() -&gt; {
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">2000</span>);
            System.out.println(<span class="hljs-string">"Thread run"</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
    });
    executorService.shutdownNow();
    System.out.println(<span class="hljs-string">"Main run"</span>);
}
</code></pre>
<pre><code class="hljs language-java" lang="java">Main run
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at ExecutorInterruptExample.lambda$main$<span class="hljs-number">0</span>(ExecutorInterruptExample.java:<span class="hljs-number">9</span>)
    at ExecutorInterruptExample$$Lambda$<span class="hljs-number">1</span>/<span class="hljs-number">1160460865.</span>run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="hljs-number">1142</span>)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="hljs-number">617</span>)
    at java.lang.Thread.run(Thread.java:<span class="hljs-number">745</span>)
</code></pre>
<p>å¦‚æœåªæƒ³ä¸­æ–­ Executor ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ submit() æ–¹æ³•æ¥æäº¤ä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <code>Future&lt;?&gt;</code> å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„ cancel(true) æ–¹æ³•å°±å¯ä»¥ä¸­æ–­çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-java" lang="java">Future&lt;?&gt; future = executorService.submit(() -&gt; {
    <span class="hljs-comment">// ..</span>
});
future.cancel(<span class="hljs-literal">true</span>);
</code></pre>
<h2 data-id="heading-6">çº¿ç¨‹ä¹‹é—´çš„åä½œ</h2>
<p>å½“å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸€èµ·å·¥ä½œå»è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œå¦‚æœæŸäº›éƒ¨åˆ†å¿…é¡»åœ¨å…¶å®ƒéƒ¨åˆ†ä¹‹å‰å®Œæˆï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œåè°ƒã€‚</p>
<h3 data-id="heading-7">join()</h3>
<h4 data-id="heading-8">æ¡ˆä¾‹</h4>
<p>åœ¨çº¿ç¨‹ä¸­è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œä¼šå°†å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œè€Œä¸æ˜¯å¿™ç­‰å¾…ï¼Œç›´åˆ°ç›®æ ‡çº¿ç¨‹ç»“æŸã€‚</p>
<p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œè™½ç„¶ b çº¿ç¨‹å…ˆå¯åŠ¨ï¼Œä½†æ˜¯å› ä¸ºåœ¨ b çº¿ç¨‹ä¸­è°ƒç”¨äº† a çº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œb çº¿ç¨‹ä¼šç­‰å¾… a çº¿ç¨‹ç»“æŸæ‰ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤æœ€åèƒ½å¤Ÿä¿è¯ a çº¿ç¨‹çš„è¾“å‡ºå…ˆäº b çº¿ç¨‹çš„è¾“å‡ºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JoinExample</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"A"</span>);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {

        <span class="hljs-keyword">private</span> A a;

        B(A a) {
            <span class="hljs-built_in">this</span>.a = a;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">try</span> {
                a.join();
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println(<span class="hljs-string">"B"</span>);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();
        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(a);
        b.start();
        a.start();
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">JoinExample</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JoinExample</span>();
    example.test();
}
</code></pre>
<pre><code class="hljs language-java" lang="java">A
B
</code></pre>
<h4 data-id="heading-9">åŸç†</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8be012fe0bc444b7bbbc7bad0c14275e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=VdfEf%2F7gmvXzAIufUnChpUN3zOA%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">join</span><span class="hljs-params">(<span class="hljs-type">long</span> millis)</span>
<span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-type">long</span> <span class="hljs-variable">base</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (millis &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"timeout value is negative"</span>);
    }

    <span class="hljs-keyword">if</span> (millis == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">while</span> (isAlive()) {<span class="hljs-comment">//æ£€æŸ¥çº¿ç¨‹æ˜¯å¦å­˜æ´»ï¼Œåªè¦çº¿ç¨‹è¿˜æ²¡ç»“æŸï¼Œä¸»çº¿ç¨‹å°±ä¼šä¸€ç›´é˜»å¡</span>
            wait(<span class="hljs-number">0</span>);<span class="hljs-comment">//è¿™é‡Œçš„waitè°ƒç”¨çš„æœ¬åœ°æ–¹æ³•ã€‚</span>
        }
    } <span class="hljs-keyword">else</span> {<span class="hljs-comment">//ç­‰å¾…ä¸€æ®µæŒ‡å®šçš„æ—¶é—´</span>
        <span class="hljs-keyword">while</span> (isAlive()) {
            <span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> millis - now;
            <span class="hljs-keyword">if</span> (delay &lt;= <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">break</span>;
            }
            wait(delay);
            now = System.currentTimeMillis() - base;
        }
    }
}
</code></pre>
<p>ä»æºç æ¥çœ‹ï¼Œå®é™…ä¸Šjoinæ–¹æ³•å°±æ˜¯è°ƒç”¨äº†waitæ–¹æ³•æ¥ä½¿å¾—çº¿ç¨‹é˜»å¡ï¼Œä¸€ç›´åˆ°çº¿ç¨‹ç»“æŸè¿è¡Œã€‚æ³¨æ„åˆ°ï¼Œjoinæ–¹æ³•å‰çš„synchronizedä¿®é¥°ç¬¦ï¼Œå®ƒç›¸å½“äºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">join</span><span class="hljs-params">(<span class="hljs-type">long</span> millis)</span>{
 <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>){
        <span class="hljs-comment">//ä»£ç å—</span>
    }
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´åŠ é”çš„å¯¹è±¡å³è°ƒç”¨è¿™ä¸ªé”çš„çº¿ç¨‹å¯¹è±¡ï¼Œåœ¨main()æ–¹æ³•ä¸­å³ä¸ºt1ï¼ŒæŒæœ‰è¿™ä¸ªé”çš„æ˜¯ä¸»çº¿ç¨‹å³main()æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ä»£ç ç›¸å½“äºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//t1.join()å‰çš„ä»£ç </span>
<span class="hljs-keyword">synchronized</span> (t1) {
 <span class="hljs-comment">// è°ƒç”¨è€…çº¿ç¨‹è¿›å…¥ t1 çš„ waitSet ç­‰å¾…, ç›´åˆ° t1 è¿è¡Œç»“æŸ</span>
 <span class="hljs-keyword">while</span> (t1.isAlive()) {
  t1.wait(<span class="hljs-number">0</span>);
 }
}
<span class="hljs-comment">//t1.join()åçš„ä»£ç </span>
</code></pre>
<p>ä¹Ÿå› æ­¤ä¸»çº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ° t1 çº¿ç¨‹ç»“æŸã€‚</p>
<blockquote>
<p>è¿™é‡Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šäººä¼šæœ‰ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆt1.waitäº†ï¼Œé˜»å¡çš„ä¸æ˜¯t1ï¼Œè€Œæ˜¯ä¸»çº¿ç¨‹ï¼Ÿ</p>
<p>å®é™…ä¸Šï¼Œå¦‚æœè¦é˜»å¡t1ï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨t1çš„run æ–¹æ³•é‡Œè¿›è¡Œé˜»å¡ï¼Œå¦‚åœ¨runæ–¹æ³•é‡Œå†™wait()ï¼›ï¼ˆå½“ç„¶è¿˜æœ‰suspendæ–¹æ³•ï¼Œè¿™å±äºéJavaå±‚é¢ï¼Œå¦è¯´ï¼‰</p>
<p>è€Œè¿™é‡Œçš„ wait æ–¹æ³•è¢«è°ƒç”¨ä»¥åï¼Œæ˜¯è®©æŒæœ‰é”çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå³ä¸»çº¿ç¨‹è°ƒç”¨ï¼Œå› æ­¤ t1 çº¿ç¨‹å¹¶ä¸ä¼šè¢«é˜»å¡ï¼Œé˜»å¡çš„æ˜¯ä¸»çº¿ç¨‹ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œjoinæ–¹æ³•æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå½“ä¸»çº¿ç¨‹è°ƒç”¨t1.join()æ–¹æ³•æ—¶ï¼Œä¸»çº¿ç¨‹å…ˆè·å¾—äº†t1å¯¹è±¡çš„é”ï¼Œéšåè¿›å…¥æ–¹æ³•ï¼Œè°ƒç”¨äº†t1å¯¹è±¡çš„wait()æ–¹æ³•ï¼Œä½¿ä¸»çº¿ç¨‹è¿›å…¥äº†t1å¯¹è±¡çš„ç­‰å¾…æ± ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜åœ¨äºï¼Œè¿™é‡Œåªçœ‹åˆ°äº†waitæ–¹æ³•ï¼Œå´å¹¶æ²¡æœ‰çœ‹åˆ°notifyæˆ–è€…æ˜¯notifyAllæ–¹æ³•ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹åœ¨é‚£é‡Œè¢«å”¤é†’å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œå‚è€ƒjvmçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensure_join</span><span class="hljs-params">(JavaThread* thread)</span> {

 Handle <span class="hljs-title function_">threadObj</span><span class="hljs-params">(thread, thread-&gt;threadObj()</span>);

 ObjectLocker <span class="hljs-title function_">lock</span><span class="hljs-params">(threadObj, thread)</span>;

 hread-&gt;clear_pending_exception();

 <span class="hljs-comment">//è¿™ä¸€å¥ä¸­çš„TERMINATEDè¡¨ç¤ºè¿™æ˜¯çº¿ç¨‹ç»“æŸä»¥åè¿è¡Œçš„</span>
 java_lang_Thread::set_thread_status(threadObj(), java_lang_Thread::TERMINATED);

    <span class="hljs-comment">//è¿™é‡Œä¼šæ¸…æ¥šnativeçº¿ç¨‹ï¼ŒisAlive()æ–¹æ³•ä¼šè¿”å›false</span>
    java_lang_Thread::set_thread(threadObj(), NULL);

 <span class="hljs-comment">//threadå°±æ˜¯å½“å‰çº¿ç¨‹ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚</span>
 lock.notify_all(thread);

 hread-&gt;clear_pending_exception();

}
</code></pre>
<p>å…¶å®æ˜¯jvmè™šæ‹Ÿæœºä¸­å­˜åœ¨æ–¹æ³•lock.notify_all(thread)ï¼Œåœ¨t1çº¿ç¨‹ç»“æŸä»¥åï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œæœ€åå”¤é†’ä¸»çº¿ç¨‹ã€‚</p>
<p>æ‰€ä»¥ç®€åŒ–ä¸€ä¸‹ï¼Œæµç¨‹å³ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d33c8228ee7448aa71f3cbcf4a13f7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597310&amp;x-signature=zZROaLA9jgb50JCC3aAYgDdbJ%2FI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">wait() notify() notifyAll()</h3>
<p>è°ƒç”¨ wait() ä½¿å¾—çº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡è¶³ï¼Œçº¿ç¨‹åœ¨ç­‰å¾…æ—¶ä¼šè¢«æŒ‚èµ·ï¼Œå½“å…¶ä»–çº¿ç¨‹çš„è¿è¡Œä½¿å¾—è¿™ä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹ä¼šè°ƒç”¨ notify() æˆ–è€… notifyAll() æ¥å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ã€‚</p>
<p>å®ƒä»¬éƒ½å±äº Object çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸å±äº Threadã€‚</p>
<p>åªèƒ½ç”¨åœ¨åŒæ­¥æ–¹æ³•synchronizedæˆ–è€…åŒæ­¥æ§åˆ¶å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º IllegalMonitorStateExeceptionã€‚</p>
<p>ä½¿ç”¨ wait() æŒ‚èµ·æœŸé—´ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾é”ã€‚è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾é”ï¼Œé‚£ä¹ˆå…¶å®ƒçº¿ç¨‹å°±æ— æ³•è¿›å…¥å¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—ä¸­ï¼Œé‚£ä¹ˆå°±æ— æ³•æ‰§è¡Œ notify() æˆ–è€… notifyAll() æ¥å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ï¼Œé€ æˆæ­»é”ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WaitNotifyExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"before"</span>);
        notifyAll();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            wait();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(<span class="hljs-string">"after"</span>);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();
    <span class="hljs-type">WaitNotifyExample</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WaitNotifyExample</span>();
    executorService.execute(() -&gt; example.after());
    executorService.execute(() -&gt; example.before());
}
</code></pre>
<pre><code class="hljs language-java" lang="java">before
after
</code></pre>
<p><strong>wait() å’Œ sleep() çš„åŒºåˆ«</strong></p>
<ul>
<li>
<p>wait() æ˜¯ Object çš„æ–¹æ³•ï¼Œè€Œ sleep() æ˜¯ Thread çš„é™æ€æ–¹æ³•ï¼›</p>
</li>
<li>
<p>wait() ä¼šé‡Šæ”¾é”ï¼Œsleep() ä¸ä¼šã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">await() signal() signalAll()</h3>
<p>java.util.concurrent ç±»åº“ä¸­æä¾›äº† Condition ç±»æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åè°ƒï¼Œå¯ä»¥åœ¨ Condition ä¸Šè°ƒç”¨ await() æ–¹æ³•ä½¿çº¿ç¨‹ç­‰å¾…ï¼Œå…¶å®ƒçº¿ç¨‹è°ƒç”¨ signal() æˆ– signalAll() æ–¹æ³•å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚ç›¸æ¯”äº wait() è¿™ç§ç­‰å¾…æ–¹å¼ï¼Œawait() å¯ä»¥æŒ‡å®šç­‰å¾…çš„æ¡ä»¶ï¼Œå› æ­¤æ›´åŠ çµæ´»ã€‚</p>
<p>ä½¿ç”¨ Lock æ¥è·å–ä¸€ä¸ª Condition å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AwaitSignalExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> lock.newCondition();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            System.out.println(<span class="hljs-string">"before"</span>);
            condition.signalAll();
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            condition.await();
            System.out.println(<span class="hljs-string">"after"</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();
    <span class="hljs-type">AwaitSignalExample</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AwaitSignalExample</span>();
    executorService.execute(() -&gt; example.after());
    executorService.execute(() -&gt; example.before());
}
</code></pre>
<pre><code class="hljs language-java" lang="java">before
after
</code></pre>
<h2 data-id="heading-12">çº¿ç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†</h2>
<h3 data-id="heading-13">Runnableä¸­å¼‚å¸¸å¦‚ä½•è¢«åæ‰</h3>
<p><code>Runnable</code> æ¥å£çš„ <code>run()</code> æ–¹æ³•ä¸å…è®¸æŠ›å‡ºä»»ä½•è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼ˆchecked exceptionsï¼‰ï¼Œåªèƒ½å¤„ç†æˆ–æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆunchecked exceptionsï¼‰ã€‚å½“åœ¨ <code>run()</code> æ–¹æ³•å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼åœ°æ•è·å’Œå¤„ç†è¿™äº›å¼‚å¸¸ï¼Œå®ƒä»¬é€šå¸¸ä¼šåœ¨æ‰§è¡Œè¯¥ <code>Runnable</code> çš„çº¿ç¨‹ä¸­è¢«â€œåæ‰â€ï¼Œå³å¼‚å¸¸ä¼šå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼Œä½†ä¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> {
   <span class="hljs-keyword">if</span> (parent != <span class="hljs-literal">null</span>) {
        parent.uncaughtException(t, e);
   } <span class="hljs-keyword">else</span> {
        Thread.<span class="hljs-type">UncaughtExceptionHandler</span> <span class="hljs-variable">ueh</span> <span class="hljs-operator">=</span>
            Thread.getDefaultUncaughtExceptionHandler();
        <span class="hljs-keyword">if</span> (ueh != <span class="hljs-literal">null</span>) {
            ueh.uncaughtException(t, e);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(e <span class="hljs-keyword">instanceof</span> ThreadDeath)) {
            System.err.print(<span class="hljs-string">"Exception in thread \""</span>
                             + t.getName() + <span class="hljs-string">"\" "</span>);
            e.printStackTrace(System.err);
        }
    }
}
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>
<p>åœ¨runæ–¹æ³•ä¸­æ˜¾ç¤ºçš„æ•è·å¼‚å¸¸</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-comment">// è®°å½•æ—¥å¿—æˆ–å¤„ç†å¼‚å¸¸</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
    }
}
</code></pre>
</li>
<li>
<p>ä¸ºåˆ›å»ºçš„çº¿ç¨‹è®¾ç½®ä¸€ä¸ª<code>UncaughtExceptionHandler</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
   <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>;
}, <span class="hljs-string">"t1"</span>);
t.setUncaughtExceptionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>.UncaughtExceptionHandler() {
   <span class="hljs-meta">@Override</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> {
        logger.error(<span class="hljs-string">'---'</span>, e);
   }
});
</code></pre>
</li>
<li>
<p>ä½¿ç”¨<code>Callable</code>ä»£æ›¿<code>Runnable</code>ï¼Œ<code>Callable</code>çš„<code>call</code>æ–¹æ³•å…è®¸æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åå¯ä»¥é€šè¿‡æäº¤ç»™<code>ExecutorService</code>è¿”å›çš„<code>Future</code>æ¥æ•è·å’Œå¤„ç†è¿™äº›å¼‚å¸¸</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
Future&lt;?&gt; future = executor.submit(() -&gt; {
    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span>
});

<span class="hljs-keyword">try</span> {
    future.get(); <span class="hljs-comment">// è¿™é‡Œä¼šæ•è·åˆ°Callableä¸­çš„å¼‚å¸¸</span>
} <span class="hljs-keyword">catch</span> (ExecutionException e) {
    <span class="hljs-type">Throwable</span> <span class="hljs-variable">cause</span> <span class="hljs-operator">=</span> e.getCause(); <span class="hljs-comment">// è·å–åŸå§‹å¼‚å¸¸</span>
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-14">Callableä¸­å¼‚å¸¸å¦‚ä½•è¢«åæ‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"===&gt; å¼€å§‹æ‰§è¡Œcallable"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>; <span class="hljs-comment">//å¼‚å¸¸çš„åœ°æ–¹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"callableçš„ç»“æœ"</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallableAndRunnableTest</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">" =========&gt; main start "</span>);
        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPoolExecutor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">100</span>));
        Future&lt;String&gt; submit = threadPoolExecutor.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>());
        <span class="hljs-keyword">try</span> {
            TimeUnit.SECONDS.sleep(<span class="hljs-number">2</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(<span class="hljs-string">" =========&gt; main end "</span>);
    }
}
</code></pre>
<p>è¿è¡Œç»“æœ</p>
<pre><code class="hljs language-java" lang="java"> =========&gt; main start 
 ===&gt; å¼€å§‹æ‰§è¡Œcallable
 =========&gt; main end 
</code></pre>
<p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> &lt;T&gt; Future&lt;T&gt; <span class="hljs-title function_">submit</span><span class="hljs-params">(Callable&lt;T&gt; task)</span> {
    <span class="hljs-keyword">if</span> (task == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullPointerException</span>();
    RunnableFuture&lt;T&gt; ftask = newTaskFor(task);
    execute(ftask);
    <span class="hljs-keyword">return</span> ftask;
}

<span class="hljs-keyword">protected</span> &lt;T&gt; RunnableFuture&lt;T&gt; <span class="hljs-title function_">newTaskFor</span><span class="hljs-params">(Callable&lt;T&gt; callable)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;T&gt;(callable);
}
</code></pre>
<p><code>RunableFuture&lt;T&gt;</code> æ˜¯ä¸ªæ¥å£ï¼Œä½†æ˜¯å®ƒç»§æ‰¿äº†Runnable æ¥å£ ï¼Œ å®ç°ç±»æ˜¯ FutureTask ï¼Œå› æ­¤å°±éœ€è¦çœ‹ä¸‹ FutureTaské‡Œçš„runæ–¹æ³• æ˜¯ä¸æ˜¯å’Œ æ„é€ æ—¶çš„Callable æœ‰å…³ç³»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
     <span class="hljs-comment">// çŠ¶æ€ä¸å±äºåˆå§‹çŠ¶æ€çš„æƒ…å†µä¸‹ï¼Œä¸è¿›è¡Œåç»­é€»è¾‘å¤„ç†</span>
     <span class="hljs-comment">// é‚£ä¹Ÿå°±æ˜¯run æ–¹æ³•åªèƒ½æ‰§è¡Œä¸€æ¬¡</span>
     <span class="hljs-keyword">if</span> (state != NEW ||
        !UNSAFE.compareAndSwapObject(<span class="hljs-built_in">this</span>, runnerOffset,
                                   <span class="hljs-literal">null</span>, Thread.currentThread()))
        <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">try</span> { 
        Callable&lt;V&gt; c = callable;
        <span class="hljs-keyword">if</span> (c != <span class="hljs-literal">null</span> &amp;&amp; state == NEW) {
            V result;
            <span class="hljs-comment">// </span>
            <span class="hljs-type">boolean</span> ran;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œ Callable é‡Œçš„ call æ–¹æ³• ï¼Œå°†ç»“æœå­˜å…¥resultå˜é‡ä¸­</span>
                result = c.call();
                ran = <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">catch</span> (Throwable ex) {
                result = <span class="hljs-literal">null</span>;
                ran = <span class="hljs-literal">false</span>;
                 <span class="hljs-comment">// call æ–¹æ³•å¼‚å¸¸ ï¼Œ è®°å½•ä¸‹å¼‚å¸¸ç»“æœ</span>
                setException(ex);
            }
            <span class="hljs-comment">// call æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯• ï¼Œè¿›è¡Œç»“æœå­˜å‚¨</span>
            <span class="hljs-keyword">if</span> (ran)
                set(result);
        }
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// runner must be non-null until state is settled to</span>
        <span class="hljs-comment">// prevent concurrent calls to run()</span>
        runner = <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// state must be re-read after nulling runner to prevent</span>
        <span class="hljs-comment">// leaked interrupts</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> state;
        <span class="hljs-keyword">if</span> (s &gt;= INTERRUPTING)
            handlePossibleCancellationInterrupt(s);
    }
}
</code></pre>
<p>æ¥ä¸‹æ¥å°±è¦çœ‹ï¼Œå¦‚æœå­˜å‚¨æ­£å¸¸ç»“æœçš„<code>set(result)</code>æ–¹æ³• å’Œå­˜å‚¨å¼‚å¸¸ç»“æœçš„ <code>setException(ex)</code> æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setException</span><span class="hljs-params">(Throwable t)</span> {
    <span class="hljs-keyword">if</span> (UNSAFE.compareAndSwapInt(<span class="hljs-built_in">this</span>, stateOffset, NEW, COMPLETING)) {
        outcome = t;
        UNSAFE.putOrderedInt(<span class="hljs-built_in">this</span>, stateOffset, EXCEPTIONAL); <span class="hljs-comment">// final state</span>
        finishCompletion();
    }
}

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(V v)</span> {
    <span class="hljs-keyword">if</span> (UNSAFE.compareAndSwapInt(<span class="hljs-built_in">this</span>, stateOffset, NEW, COMPLETING)) {
        outcome = v;
        UNSAFE.putOrderedInt(<span class="hljs-built_in">this</span>, stateOffset, NORMAL); <span class="hljs-comment">// final state</span>
        finishCompletion();
    }
}
</code></pre>
<p>è¿™ä¸¤ä¸ªä»£ç éƒ½åšäº†ä¸€ä¸ªæ“ä½œï¼Œå°±æ˜¯å°†æ­£å¸¸ç»“æœ<code>result</code> å’Œ å¼‚å¸¸ç»“æœ <code>exception</code> éƒ½èµ‹å€¼ç»™äº† <code>outcome</code> è¿™ä¸ªå˜é‡ ã€‚</p>
<p>æ¥ç€å†çœ‹ä¸‹futureçš„getæ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//è¿™é‡Œæœ‰å¿…é¡»çœ‹ä¸‹Taskçš„ç»“æŸæ—¶çš„çŠ¶æ€ï¼Œå¦‚æœæ­£å¸¸ç»“æŸï¼ŒçŠ¶æ€ä¸º NORMAL ï¼Œ å¼‚å¸¸ç»“æœï¼ŒçŠ¶æ€ä¸ºEXCEPTIONAL ã€‚ çœ‹ä¸‹å‡ ä¸ªçŠ¶æ€çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> state;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NEW</span>          <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">COMPLETING</span>   <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NORMAL</span>       <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">EXCEPTIONAL</span>  <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CANCELLED</span>    <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INTERRUPTING</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INTERRUPTED</span>  <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;

<span class="hljs-comment">/**
* <span class="hljs-doctag">@throws</span> CancellationException {<span class="hljs-doctag">@inheritDoc</span>}
*/</span>
<span class="hljs-keyword">public</span> V <span class="hljs-title function_">get</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException {
    <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> state;
    <span class="hljs-comment">// NORMAL(2) ã€EXCEPTIONAL(3) éƒ½å¤§äº COMPLETINGï¼ˆ1ï¼‰,æ‰€ä»¥Taskç»“æŸä¹‹åï¼Œä¸ä¼šèµ°è¯¥if</span>
    <span class="hljs-keyword">if</span> (s &lt;= COMPLETING)
         s = awaitDone(<span class="hljs-literal">false</span>, <span class="hljs-number">0L</span>);
    <span class="hljs-comment">// é‡ç‚¹ï¼š è¿”å›ç»“æœ</span>
    <span class="hljs-keyword">return</span> report(s);
}

<span class="hljs-keyword">private</span> V <span class="hljs-title function_">report</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span> <span class="hljs-keyword">throws</span> ExecutionException {
    <span class="hljs-comment">// ä¹‹å‰æ­£å¸¸ç»“æœæˆ–è€…å¼‚å¸¸éƒ½å­˜æ”¾åœ¨Object outcomme ä¸­äº†</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> outcome;
    <span class="hljs-comment">// æ­£å¸¸è¿”å›</span>
    <span class="hljs-keyword">if</span> (s == NORMAL)
        <span class="hljs-keyword">return</span> (V)x;
    <span class="hljs-comment">// EXCEPTIONAL(3) å°äº CANCELLED(4) ï¼Œæ‰€ä»¥ä¸ä¼šèµ°è¯¥ifåˆ†æ”¯ï¼Œç›´æ¥åç»­çš„throw æŠ›å¼‚å¸¸çš„é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (s &gt;= CANCELLED)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CancellationException</span>();
    <span class="hljs-comment">// ä¸ç­‰äºNORMAL ä¸” å¤§äºç­‰äº CANCELLED  ,  å†ç»“åˆ è°ƒç”¨ report(int s ) ä¹‹å‰ä¹Ÿåšäº†state çš„è¿‡æ»¤</span>
    <span class="hljs-comment">//åˆ°è¿™ä¸€æ­¥ï¼Œé‚£åªèƒ½æ˜¯EXCEPTIONAL(3) </span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutionException</span>((Throwable)x);
}
</code></pre>
<p>å› æ­¤å¯ä»¥é€šè¿‡getæ–¹æ³•è·å–åˆ°å¼‚å¸¸ç»“æœ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–ä¹‹â½¹ç»œå±‚â¾¯ä¼˜åŒ–--è®©ä½ çš„â½¹ç«™è·‘å¾—â½å¿«é€’å‘˜è¿˜å¿«]]></title>    <link>https://juejin.cn/post/7601606188618367014</link>    <guid>https://juejin.cn/post/7601606188618367014</guid>    <pubDate>2026-02-02T00:37:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601606188618367014" data-draft-id="7592622563546972195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½ä¼˜åŒ–ä¹‹â½¹ç»œå±‚â¾¯ä¼˜åŒ–--è®©ä½ çš„â½¹ç«™è·‘å¾—â½å¿«é€’å‘˜è¿˜å¿«"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-02-02T00:37:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="destinying"/> <meta itemprop="url" content="https://juejin.cn/user/896842287549703"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½ä¼˜åŒ–ä¹‹â½¹ç»œå±‚â¾¯ä¼˜åŒ–--è®©ä½ çš„â½¹ç«™è·‘å¾—â½å¿«é€’å‘˜è¿˜å¿«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/896842287549703/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    destinying
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:37:32.000Z" title="Mon Feb 02 2026 00:37:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">â½¹ç»œå±‚â¾¯ä¼˜åŒ–ï¼šè®©ä½ çš„â½¹ç«™è·‘å¾—â½å¿«é€’å‘˜è¿˜å¿«</h2>
<blockquote>
<p>å‰è¨€ï¼šæœ¬â½‚çº¯å±çœŸå®ç»å†ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±ä½ ä¹Ÿè¸©è¿‡å‘ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. æµè§ˆå™¨ç¼“å­˜ï¼šåˆ«è®©â½¤æˆ·é‡å¤ä¸‹è½½ä½ çš„"ç¥–ä¼ ä»£ç "</h3>
<p>å…„å¼Ÿä»¬ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Ÿä½ æ˜æ˜å·²ç»ä¼˜åŒ–è¿‡ä»£ç äº†ï¼Œâ½¤æˆ·è¿˜æ˜¯è¯´"â½¹ç«™æ€ä¹ˆè¿˜æ˜¯é‚£ä¸ªæ ·â¼¦ï¼Ÿ"ç„¶åä½ â¼€è„¸æ‡µé€¼åœ°å‘ç°ï¼šæµè§ˆå™¨ç¼“å­˜è¿˜åœ¨ä½¿â½¤ä½ ä¸Šä¸ªæœˆå†™çš„"å±â¼­ä»£ç "ã€‚</p>
<p><strong>æµè§ˆå™¨ç¼“å­˜å°±åƒæ˜¯é‚£ä¸ªè®°æ€§è¶…å¥½çš„å‰å¥³å‹</strong>ï¼Œä½ æ”¹äº†ä»€ä¹ˆå¥¹éƒ½è®°å¾—ï¼Œä½†å°±æ˜¯ä¸æ„¿æ„æ‰¿è®¤ä½ å·²ç»å˜äº†ã€‚</p>
<h4 data-id="heading-2">1.1 LocalStorage â¼€æŠŠæ¢­ï¼Ÿå¿«ä½æ‰‹ï¼</h4>
<p>å¾ˆå¤šåŒå­¦å–œæ¬¢æŠŠä»€ä¹ˆä¸œè¥¿éƒ½å¾€ LocalStorage â¾¥å¡ï¼Œæ¨ä¸å¾—æŠŠæ•´ä¸ªé¡¹â½¬éƒ½å­˜è¿›å»ã€‚å¬æˆ‘â¼€å¥åŠï¼ŒLocalStorage å°±åƒä½ çš„é’±åŒ…ï¼Œåˆ«ä»€ä¹ˆéƒ½å¾€â¾¥å¡ï¼Œå¦åˆ™å“ªå¤©çˆ†äº†å°±å°´å°¬äº†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒ</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'æ•´ä¸ªé¡¹ç›®'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(yourProject))

<span class="hljs-comment">// âœ… æ­£ç¡®å§¿åŠ¿ï¼šå°è£…ä¸€ä¸‹ï¼ŒåŠ ä¸Šè¿‡æœŸæ—¶é—´</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Storage</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value, expire = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span></span>) {
    <span class="hljs-keyword">const</span> data = {
      value,
      <span class="hljs-attr">expire</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + expire
    }
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key))
    <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; data.<span class="hljs-property">expire</span>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(key)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
    <span class="hljs-keyword">return</span> data.<span class="hljs-property">value</span>
  }
}

<span class="hljs-comment">// ä½¿ç”¨èµ·æ¥æ›´ä¼˜é›…</span>
<span class="hljs-title class_">Storage</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'userInfo'</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> })
<span class="hljs-keyword">const</span> user = <span class="hljs-title class_">Storage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'userInfo'</span>)
</code></pre>
<h4 data-id="heading-3">1.2 SessionStorage æ˜¯"éœ²â½”æƒ…ç¼˜"</h4>
<p>å…³æ‰æ ‡ç­¾é¡µå°±æ‹œæ‹œï¼Œä¸å¤šåºŸè¯ã€‚é€‚åˆå­˜é‚£äº›"â½¤å®Œå³å¼ƒ"çš„æ•°æ®ï¼Œâ½å¦‚è¡¨å•æš‚å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¡¨å•æš‚å­˜ç¤ºä¾‹ï¼Œé˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œä¸¢å¤±æ•°æ®</span>
<span class="hljs-keyword">const</span> form = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#myForm'</span>)

<span class="hljs-comment">// è¾“å…¥æ—¶è‡ªåŠ¨ä¿å­˜</span>
form.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(form)
  sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'formData'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(formData)))
})

<span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶æ¢å¤</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'formData'</span>)
  <span class="hljs-keyword">if</span> (saved) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved)
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      form.<span class="hljs-property">elements</span>[key].<span class="hljs-property">value</span> = data[key]
    })
  }
})

<span class="hljs-comment">// æäº¤åæ¸…é™¤</span>
form.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-function">() =&gt;</span> {
  sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'formData'</span>)
})
</code></pre>
<h4 data-id="heading-4">1.3 IndexedDBï¼Ÿé‚£æ˜¯çœŸçš„çŒ›</h4>
<p>å½“ä½ éœ€è¦å­˜ç‚¹â¼¤ä¸œè¥¿çš„æ—¶å€™ï¼Œâ½å¦‚ç¦»çº¿ç¼“å­˜ã€å›¾ç‰‡å•¥çš„ï¼ŒIndexedDB æ‰æ˜¯ä½ çš„èœã€‚è™½ç„¶ API è®¾è®¡å¾—åƒè¿·å®«ï¼Œä½†å¥½æ­¹æ˜¯ä¸ªè¿·å®«â¾¥æœ‰å®è—çš„é‚£ç§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// â¼¿å†™ IndexedDB ç®€ç›´æŠ˜ç£¨ï¼Œæ¨èâ½¤ idb è¿™ä¸ªåº“</span>
<span class="hljs-keyword">import</span> { openDB } <span class="hljs-keyword">from</span> <span class="hljs-string">'idb'</span>

<span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®åº“</span>
<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">openDB</span>(<span class="hljs-string">'myDB'</span>, <span class="hljs-number">1</span>, {
  <span class="hljs-title function_">upgrade</span>(<span class="hljs-params">db</span>) {
    <span class="hljs-keyword">if</span> (!db.<span class="hljs-property">objectStoreNames</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'images'</span>)) {
      db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'images'</span>, { <span class="hljs-attr">keyPath</span>: <span class="hljs-string">'id'</span> })
    }
  }
})

<span class="hljs-comment">// å­˜å‚¨å›¾ç‰‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveImage</span>(<span class="hljs-params">id, blob</span>) {
  <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">put</span>(<span class="hljs-string">'images'</span>, { id, blob, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() })
}

<span class="hljs-comment">// è¯»å–å›¾ç‰‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getImage</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">get</span>(<span class="hljs-string">'images'</span>, id)
}
</code></pre>
<h4 data-id="heading-5">1.4 Cache APIï¼šPWA çš„çµé­‚</h4>
<p>æƒ³åš PWAï¼ŸCache API å¿…é¡»å¾—ä¼šã€‚å®ƒèƒ½è®©ä½ åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿèƒ½è®¿é—®â½¹ç«™ï¼Œç®€ç›´æ˜¯â½¹ç»œå¼€â¼©å·®æ—¶çš„æ•‘å‘½ç¨»è‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// sw.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'my-cache-v1'</span>
<span class="hljs-keyword">const</span> urlsToCache = [
  <span class="hljs-string">'/'</span>,
  <span class="hljs-string">'/styles/main.css'</span>,
  <span class="hljs-string">'/scripts/main.js'</span>,
  <span class="hljs-string">'/images/logo.png'</span>
]

<span class="hljs-comment">// å®‰è£…æ—¶ç¼“å­˜é™æ€èµ„æº</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> cache.<span class="hljs-title function_">addAll</span>(urlsToCache))
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> self.<span class="hljs-title function_">skipWaiting</span>())
  )
})

<span class="hljs-comment">// æ‹¦æˆªè¯·æ±‚ï¼Œä¼˜å…ˆä»ç¼“å­˜è¯»å–</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-comment">// ç¼“å­˜å‘½ä¸­ç›´æ¥è¿”å›ï¼Œå¦åˆ™â¾›ç½‘ç»œ</span>
        <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
          <span class="hljs-comment">// æŠŠæ–°èµ„æºç¼“å­˜èµ·æ¥</span>
          <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
            cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, response.<span class="hljs-title function_">clone</span>())
            <span class="hljs-keyword">return</span> response
          })
        })
      })
  )
})

<span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> cacheWhitelist = [<span class="hljs-variable constant_">CACHE_NAME</span>]
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cacheNames</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">cacheName</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (cacheWhitelist.<span class="hljs-title function_">indexOf</span>(cacheName) === -<span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(cacheName)
          }
        })
      )
    })
  )
})
</code></pre>
<h4 data-id="heading-6">1.5 å°è´´å£«</h4>
<ul>
<li>ç»™ç¼“å­˜åŠ ç‚¹è¿‡æœŸæ—¶é—´ï¼Œåˆ«è®©â½¤æˆ·çš„æ‰‹æœºå˜æˆäº†ä½ çš„"åƒåœ¾åœº"</li>
<li>æ•æ„Ÿæ•°æ®åˆ«å­˜ç¼“å­˜ï¼Œä¸ç„¶å“ªå¤©è¢«æŠ“åŒ…äº†åˆ«æ€ªæˆ‘æ²¡æé†’ä½ </li>
<li>å®šæœŸæ¸…ç†ç¼“å­˜ï¼Œå°±åƒæ‰“æ‰«æˆ¿é—´â¼€æ ·é‡è¦</li>
</ul>
<h3 data-id="heading-7">2. èµ„æºå‹ç¼©ï¼šè®©ä½“ç§¯ç¼©â½”ï¼Œè®©é€Ÿåº¦èµ·é£</h3>
<p>è¯´çœŸçš„ï¼Œèµ„æºå‹ç¼©æ˜¯æœ€ç®€å•ä¹Ÿæœ€æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚â½¤å¥½äº†ï¼Œèƒ½å‡å°‘ 70%+ çš„ä¼ è¾“ä½“ç§¯ï¼›â½¤ä¸å¥½ï¼Œâ½¤æˆ·åŠ è½½æ—¶å°±åƒåœ¨ç­‰å¿«é€’ã€‚</p>
<h4 data-id="heading-8">2.1 Gzip/Brotli å‹ç¼©</h4>
<p>è¿™ä¸ªä¸»è¦æ˜¯åç«¯å’Œè¿ç»´é…ç½®çš„ï¼Œä½†å‰ç«¯ä¹Ÿè¦çŸ¥é“åŸç†ã€‚Gzip èƒ½å‹ç¼©åˆ°åŸä½“ç§¯çš„ 30-40%ï¼ŒBrotli æ›´å¼ºï¼Œèƒ½åˆ° 20-30%ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vite å¼€å‘ç¯å¢ƒä¹Ÿå¼€å¯å‹ç¼©</span>
<span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Encoding'</span>: <span class="hljs-string">'gzip'</span>
    }
  }
})
</code></pre>
<p><strong>å‘Šè¯‰åç«¯å¤§ä½¬ï¼š</strong></p>
<ul>
<li>HTMLã€CSSã€JSã€JSON éƒ½è¦å¼€å¯ Gzip/Brotli</li>
<li>å›¾ç‰‡ã€è§†é¢‘è¿™ç±»å·²ç»å‹ç¼©è¿‡çš„æ–‡ä»¶å°±ä¸ç”¨å†å‹äº†</li>
<li>ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆç”¨ Brotliï¼Œå…¼å®¹æ€§ç”¨ Gzip</li>
</ul>
<h4 data-id="heading-9">2.2 ä»£ç å‹ç¼©ï¼šTree Shaking + å‹ç¼©å·¥å…·</h4>
<p>ç°ä»£æ„å»ºå·¥å…·ï¼ˆViteã€Webpackï¼‰éƒ½å†…ç½®äº†è¿™äº›åŠŸèƒ½ï¼Œé…ç½®å¥½å°±è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],

  <span class="hljs-attr">build</span>: {
    <span class="hljs-comment">// å¼€å¯ CSS ä»£ç åˆ†å‰²</span>
    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// è®¾ç½® chunk å¤§å°è­¦å‘Šé˜ˆå€¼ï¼ˆkbï¼‰</span>
    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1000</span>,

    <span class="hljs-comment">// å‹ç¼©é…ç½®</span>
    <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,
    <span class="hljs-attr">terserOptions</span>: {
      <span class="hljs-attr">compress</span>: {
        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå»æ‰ console</span>
        <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå»æ‰ debugger</span>
      }
    },

    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-comment">// å¼€å¯ Tree Shaking</span>
        <span class="hljs-attr">treeshake</span>: <span class="hljs-literal">true</span>
      }
    }
  }
})
</code></pre>
<h4 data-id="heading-10">2.3 å›¾ç‰‡å‹ç¼©ï¼šä½“ç§¯å‡åŠï¼Œä½“éªŒç¿»å€</h4>
<p>å¾ˆå¤šåŒå­¦ç›´æ¥æŠŠè®¾è®¡å¸ˆç»™çš„åŸå›¾æ”¾ä¸Šå»ï¼Œä¸€å¼ å›¾å¥½å‡  MBï¼Œâ½¤æˆ·åŠ è½½è¦ç­‰åŠå¤©ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite-plugin-imageminï¼šè‡ªåŠ¨å‹ç¼©å›¾ç‰‡</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> viteImagemin <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-imagemin'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">viteImagemin</span>({
      <span class="hljs-attr">gifsicle</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span> },
      <span class="hljs-attr">optipng</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span> },
      <span class="hljs-attr">mozjpeg</span>: { <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span> },
      <span class="hljs-attr">pngquant</span>: { <span class="hljs-attr">quality</span>: [<span class="hljs-number">0.8</span>, <span class="hljs-number">0.9</span>] },
      <span class="hljs-attr">svgo</span>: {
        <span class="hljs-attr">plugins</span>: [
          { <span class="hljs-attr">name</span>: <span class="hljs-string">'removeViewBox'</span> },
          { <span class="hljs-attr">name</span>: <span class="hljs-string">'removeEmptyAttrs'</span> }
        ]
      }
    })
  ]
})
</code></pre>
<p><strong>æ›´ç®€å•çš„æ–¹æ³•ï¼šç”¨åœ¨çº¿å·¥å…·</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftinypng.com%2F" target="_blank" title="https://tinypng.com/" ref="nofollow noopener noreferrer">TinyPNG</a>ï¼šå…è´¹ï¼Œå‹ç¼©æ•ˆæœå¥½</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsquoosh.app%2F" target="_blank" title="https://squoosh.app/" ref="nofollow noopener noreferrer">Squoosh</a>ï¼šGoogle å‡ºå“ï¼ŒåŠŸèƒ½å¼ºå¤§</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fimageoptim.com%2F" target="_blank" title="https://imageoptim.com/" ref="nofollow noopener noreferrer">ImageOptim</a>ï¼šMac ä¸“ç”¨ï¼Œæ‹–è¿›å»å°±è¡Œ</li>
</ul>
<h4 data-id="heading-11">2.4 WebP æ ¼å¼ï¼šæ–°æ—¶ä»£çš„å›¾ç‰‡æ ¼å¼</h4>
<p>WebP æ¯”ä¼ ç»Ÿæ ¼å¼ï¼ˆJPGã€PNGï¼‰å° 25-35%ï¼Œè´¨é‡è¿˜æ›´å¥½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¼ ç»Ÿå†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä¼˜åŒ–å†™æ³•ï¼šæ”¯æŒ WebP ç”¨ WebPï¼Œä¸æ”¯æŒé™çº§åˆ° JPG --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.webp"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªåŠ¨è½¬ WebPï¼švite-plugin-webp</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> webp <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-webp'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">webp</span>({
      <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span>,
      <span class="hljs-attr">enablePlugin</span>: <span class="hljs-literal">true</span>
    })
  ]
})
</code></pre>
<h4 data-id="heading-12">2.5 é›ªç¢§å›¾ vs SVG Sprite</h4>
<p>è¿‡å»å¸¸ç”¨é›ªç¢§å›¾ï¼Œç°åœ¨æ›´æ¨è SVG Spriteã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite-plugin-svg-icons</span>
<span class="hljs-keyword">import</span> { createSvgIconsPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-svg-icons'</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">createSvgIconsPlugin</span>({
      <span class="hljs-attr">iconDirs</span>: [path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'src/assets/icons'</span>)],
      <span class="hljs-attr">symbolId</span>: <span class="hljs-string">'icon-[name]'</span>
    })
  ]
})
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
&lt;svg&gt;
  &lt;use xlink:href="#icon-user" /&gt;
&lt;/svg&gt;
</code></pre>
<h4 data-id="heading-13">2.6 æŒ‰éœ€åŠ è½½ï¼šåªåŠ è½½éœ€è¦çš„</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Select</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">Form</span>, ... } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>

<span class="hljs-comment">// âœ… æŒ‰éœ€åŠ è½½</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>

<span class="hljs-comment">// æˆ–è€…ç”¨åŠ¨æ€å¯¼å…¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Table</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'element-ui/lib/table'</span>)

<span class="hljs-comment">// Vue è·¯ç”±æ‡’åŠ è½½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">About</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/About.vue'</span>)

<span class="hljs-keyword">const</span> routes = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span> }
]
</code></pre>
<h3 data-id="heading-14">3. DNS ç¼“å­˜ï¼šè®©ä½ çš„â½¹å€è§£æâ½ç‚¹å¤–å–è¿˜å¿«</h3>
<p>DNS è§£æå°±åƒæ˜¯æŸ¥ç”µè¯æœ¬ï¼Œä½ æ¯æ¬¡è®¿é—®â½¹ç«™éƒ½è¦å…ˆæŸ¥â¼€ä¸‹ IP åœ°å€ã€‚ä½†å¦‚æœæ¯æ¬¡éƒ½è¦æŸ¥ï¼Œé‚£å°±å¤ªæ…¢äº†ã€‚</p>
<h4 data-id="heading-15">3.1 DNS é¢„å–ï¼ˆDNS Prefetchingï¼‰</h4>
<p>æå‰å‘Šè¯‰æµè§ˆå™¨"å˜¿ï¼Œç­‰ä¸‹â¼‰å¯èƒ½è¦å»è¿™ä¸ªåŸŸåï¼Œå…ˆæŠŠç”µè¯æŸ¥å¥½"ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åœ¨ HTML head ä¸­æ·»åŠ  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://static.example.com"</span>&gt;</span>
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>CDN åŸŸå</li>
<li>ç¬¬ä¸‰æ–¹ API åŸŸå</li>
<li>ç»Ÿè®¡åˆ†æåŸŸåï¼ˆå¦‚ Google Analyticsï¼‰</li>
<li>å­—ä½“æœåŠ¡åŸŸåï¼ˆå¦‚ Google Fontsï¼‰</li>
</ul>
<h4 data-id="heading-16">3.2 é¢„è¿æ¥ï¼ˆPreconnectï¼‰</h4>
<p>é¢„è¿æ¥æ¯” DNS é¢„å–æ›´è¿›ä¸€æ­¥ï¼Œå®ƒä¸ä»…è§£æ DNSï¼Œè¿˜ä¼šå»ºç«‹ TCP è¿æ¥å’Œ TLS æ¡æ‰‹ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- é€‚ç”¨äºå¿…å®šä¼šä½¿ç”¨çš„åŸŸå --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> ä¸è¦æ»¥ç”¨ï¼Œæ¯ä¸ªé¢„è¿æ¥éƒ½ä¼šæ¶ˆè€—èµ„æºã€‚åªç”¨äºå¿…å®šä¼šåŠ è½½çš„åŸŸåã€‚</p>
<h4 data-id="heading-17">3.3 åŸŸåæ”¶æ•›</h4>
<p>ä¸€ä¸ªç½‘ç«™ç”¨å¤ªå¤šåŸŸåä¼šé™ä½æ€§èƒ½ã€‚HTTP/1.1 æ—¶ä»£éœ€è¦åŸŸååˆ†ç‰‡æ¥çªç ´æµè§ˆå™¨å¹¶å‘é™åˆ¶ï¼Œç°åœ¨ HTTP/2 å¤šè·¯å¤ç”¨åè€Œæ”¶æ•›æ›´å¥½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ å¤ªå¤šåŸŸå</span>
&lt;img src=<span class="hljs-string">"https://cdn1.example.com/a.jpg"</span>&gt;
&lt;img src="https://cdn2.example.com/b.jpg"&gt;
&lt;img src="https://cdn3.example.com/c.jpg"&gt;

// âœ… æ”¶æ•›åˆ° 1-2 ä¸ªåŸŸå
&lt;img src="https://cdn.example.com/a.jpg"&gt;
&lt;img src="https://cdn.example.com/b.jpg"&gt;
&lt;img src="https://cdn.example.com/c.jpg"&gt;
</code></pre>
<p><strong>å®æˆ˜ç»éªŒï¼š</strong></p>
<ul>
<li>é™æ€èµ„æºç”¨ 1 ä¸ª CDN åŸŸå</li>
<li>API ç”¨ 1 ä¸ªåŸŸå</li>
<li>æ€»å…±ä¸è¶…è¿‡ 2-3 ä¸ªåŸŸå</li>
</ul>
<h3 data-id="heading-18">4. CDNï¼šè®©ä½ çš„â½¹ç«™éå¸ƒå…¨çƒ</h3>
<p>CDN æ˜¯ä»€ä¹ˆï¼Ÿç®€å•è¯´ï¼Œå°±æ˜¯æŠŠä½ çš„â½¹ç«™å¤åˆ¶åˆ°ä¸–ç•Œå„åœ°ï¼Œè®©â½¤æˆ·è®¿é—®æœ€è¿‘çš„èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-19">4.1 CDN çš„å¥½å¤„</h4>
<ul>
<li><strong>é€Ÿåº¦æå‡</strong>ï¼šâ½¤æˆ·è®¿é—®å°±è¿‘èŠ‚ç‚¹ï¼Œå»¶è¿Ÿé™ä½</li>
<li><strong>å‡è½»æœåŠ¡å™¨å‹åŠ›</strong>ï¼šæµé‡åˆ†æ‘Šåˆ°å„ä¸ªèŠ‚ç‚¹</li>
<li><strong>æå‡å¯ç”¨æ€§</strong>ï¼šæŸä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œå…¶ä»–èŠ‚ç‚¹è¿˜èƒ½â½¤</li>
</ul>
<h4 data-id="heading-20">4.2 å‰ç«¯èµ„æºæ–‡ä»¶å hash ç­–ç•¥</h4>
<p>è¿™æ˜¯å‰ç«¯ä½¿ç”¨ CDN çš„å…³é”®ï¼åªæœ‰æ–‡ä»¶åå¸¦äº† hashï¼Œæ‰èƒ½æ”¾å¿ƒè®¾ç½®é•¿æœŸç¼“å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash:8].js'</span>,
    <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'[name].[contenthash:8].chunk.js'</span>
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpg|gif)$/</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'asset/resource'</span>,
        <span class="hljs-attr">generator</span>: {
          <span class="hljs-attr">filename</span>: <span class="hljs-string">'images/[name].[contenthash:8][ext]'</span>
        }
      }
    ]
  }
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'assets/[name].[hash].js'</span>,
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'assets/[name].[hash].js'</span>,
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name].[hash].[ext]'</span>
      }
    }
  }
})
</code></pre>
<h4 data-id="heading-21">4.3 Cloudflare Workers å‰ç«¯å®æˆ˜</h4>
<p>ç°åœ¨çš„ CDN ä¸æ­¢æ˜¯å­˜é™æ€èµ„æºï¼Œè¿˜èƒ½åœ¨è¾¹ç¼˜èŠ‚ç‚¹è¿â¾ä»£ç ã€‚Cloudflare Workers å’±ä»¬å‰ç«¯å¯ä»¥è‡ªå·±å†™ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Cloudflare Workers ç¤ºä¾‹ï¼šè¾¹ç¼˜å›¾ç‰‡å‹ç¼©</span>
<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">handleRequest</span>(event.<span class="hljs-property">request</span>))
})

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>)

  <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦æ˜¯å›¾ç‰‡è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\.(jpg|jpeg|png|webp)$/</span>)) {
    <span class="hljs-comment">// æ£€æŸ¥ URL å‚æ•°</span>
    <span class="hljs-keyword">const</span> quality = <span class="hljs-built_in">parseInt</span>(url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'quality'</span>)) || <span class="hljs-number">80</span>
    <span class="hljs-keyword">const</span> format = url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'format'</span>) || <span class="hljs-string">'webp'</span>

    <span class="hljs-comment">// ä»æºç«™è·å–å›¾ç‰‡</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(request)

    <span class="hljs-comment">// è½¬æ¢å›¾ç‰‡æ ¼å¼å’Œå‹ç¼©ï¼ˆä½¿ç”¨ WebAssembly å®ç°çš„å›¾ç‰‡å¤„ç†åº“ï¼‰</span>
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>()
    <span class="hljs-keyword">const</span> compressed = <span class="hljs-keyword">await</span> <span class="hljs-title function_">compressImage</span>(image, { quality, format })

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(compressed, {
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">`image/<span class="hljs-subst">${format}</span>`</span>,
        <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'public, max-age=31536000'</span>
      }
    })
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(request)
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">compressImage</span>(<span class="hljs-params">imageBuffer, options</span>) {
  <span class="hljs-comment">// ä½¿ç”¨å‰ç«¯ç†Ÿæ‚‰çš„åº“ï¼ˆå¦‚ sharp-wasmï¼‰</span>
  <span class="hljs-keyword">const</span> sharp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'sharp-wasm'</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">sharp</span>(imageBuffer)
    .<span class="hljs-title function_">webp</span>({ <span class="hljs-attr">quality</span>: options.<span class="hljs-property">quality</span> })
    .<span class="hljs-title function_">toBuffer</span>()
}
</code></pre>
<h4 data-id="heading-22">4.4 å®æˆ˜æ¡ˆä¾‹</h4>
<p>ä¹‹å‰ä¸€ä¸ªè§†é¢‘â½¹ç«™ï¼Œâ½¤æˆ·éå¸ƒå…¨çƒã€‚æ²¡â½¤ CDN çš„æ—¶å€™ï¼Œå›½å¤–â½¤æˆ·åŠ è½½è¦ 30 ç§’ï¼›â½¤äº† CDN ä¹‹åï¼Œâ¼¤éƒ¨åˆ†åœ°åŒº 3 ç§’å†…åŠ è½½å®Œæˆã€‚è¿™æå‡ï¼Œâ¾¹ï¼</p>
<h4 data-id="heading-23">4.5 æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>CDN èŠ‚ç‚¹çš„ç¼“å­˜è¦åŠæ—¶æ›´æ–°ï¼Œä¸ç„¶ä½ æ”¹äº† bug â½¤æˆ·è¿˜æ˜¯çœ‹æ—§ç‰ˆ</li>
<li>HTTPS è¯ä¹¦è¦é…å¥½ï¼ŒCDN å’Œæºç«™éƒ½è¦é…</li>
<li>â½‡å¿—æ”¶é›†è¦è€ƒè™‘ CDN çš„å½±å“ï¼Œä¸ç„¶ç»Ÿè®¡æ•°æ®ä¼šå</li>
<li>å‘Šè¯‰è¿ç»´å¤§ä½¬ï¼šé™æ€èµ„æºï¼ˆå¸¦ hash çš„ï¼‰å¯ä»¥è®¾ç½®é•¿æœŸç¼“å­˜ï¼Œindex.html ä¸è¦ç¼“å­˜</li>
</ul>
<h3 data-id="heading-24">5. æ¸²æŸ“å±‚â¾¯ä¼˜åŒ–ï¼šè®©é¡µâ¾¯æµç•…å¦‚ä¸</h3>
<p>ç½‘ç»œå±‚é¢çš„ä¼˜åŒ–è®©èµ„æºåŠ è½½æ›´å¿«ï¼Œä½†æ¸²æŸ“å±‚é¢çš„ä¼˜åŒ–è®©ç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚</p>
<h4 data-id="heading-25">5.1 å…³é”®æ¸²æŸ“è·¯å¾„ä¼˜åŒ–</h4>
<p>æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„æµç¨‹ï¼šDOM â†’ CSSOM â†’ Render Tree â†’ Layout â†’ Paint</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ é˜»å¡æ¸²æŸ“çš„å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"large.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <span class="hljs-comment">&lt;!-- é˜»å¡åç»­å†…å®¹ --&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… ä¼˜åŒ–å†™æ³• --&gt;</span>
<span class="hljs-comment">&lt;!-- å†…è”å…³é”® CSS --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-comment">/* é¦–å±å¿…éœ€çš„æ ·å¼ */</span>
  <span class="hljs-selector-class">.header</span> { <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#333</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- éå…³é”®æ ·å¼å¼‚æ­¥åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"non-critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"this.onload=null;this.rel='stylesheet'"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"non-critical.css"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>

<span class="hljs-comment">&lt;!-- JS æ”¾åˆ°åº•éƒ¨æˆ–å¼‚æ­¥åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"analytics.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-26">5.2 å›¾ç‰‡æ‡’åŠ è½½ï¼šåªåŠ è½½ç”¨æˆ·èƒ½çœ‹åˆ°çš„</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Intersection Observer APIï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰</span>
<span class="hljs-keyword">const</span> lazyImages = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img.lazy'</span>)

<span class="hljs-keyword">const</span> imageObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries, observer</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-keyword">const</span> img = entry.<span class="hljs-property">target</span>
      img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>
      img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'lazy'</span>)
      observer.<span class="hljs-title function_">unobserve</span>(img)
    }
  })
})

lazyImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> imageObserver.<span class="hljs-title function_">observe</span>(img))
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- HTML ä½¿ç”¨æ–¹å¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Vue æ‡’åŠ è½½ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;img v-lazy="imageUrl" alt="ç¤ºä¾‹å›¾ç‰‡"&gt;
&lt;/template&gt;

&lt;script&gt;
import { lazyLoad } from '@/directives/lazyLoad'

export default {
  directives: {
    lazy: lazyLoad
  },
  data() {
    return {
      imageUrl: 'https://example.com/image.jpg'
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-27">5.3 è™šæ‹Ÿåˆ—è¡¨ï¼šé•¿åˆ—è¡¨æ€§èƒ½æ•‘æ˜Ÿ</h4>
<p>å¦‚æœåˆ—è¡¨æœ‰å‡ åƒæ¡æ•°æ®ï¼Œå…¨éƒ¨æ¸²æŸ“ä¼šè®©é¡µé¢å¡é¡¿ã€‚è™šæ‹Ÿåˆ—è¡¨åªæ¸²æŸ“å¯è§åŒºåŸŸçš„é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue-virtual-scroller ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RecycleScroller</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-virtual-scroller'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'vue-virtual-scroller/dist/vue-virtual-scroller.css'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">RecycleScroller</span>
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">items</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
        <span class="hljs-attr">id</span>: i,
        <span class="hljs-attr">text</span>: <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>
      }))
    }
  }
}
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;RecycleScroller
    class="scroller"
    :items="items"
    :item-size="50"
    key-field="id"
  &gt;
    &lt;template #default="{ item }"&gt;
      &lt;div class="item"&gt;{{ item.text }}&lt;/div&gt;
    &lt;/template&gt;
  &lt;/RecycleScroller&gt;
&lt;/template&gt;

&lt;style&gt;
.scroller {
  height: 400px;
}

.item {
  height: 50px;
  line-height: 50px;
  border-bottom: 1px solid #eee;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-28">5.4 é˜²æŠ–å’ŒèŠ‚æµï¼šä¼˜åŒ–é«˜é¢‘äº‹ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜²æŠ–ï¼šåªæ‰§è¡Œæœ€åä¸€æ¬¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timer)
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args), delay)
  }
}

<span class="hljs-comment">// èŠ‚æµï¼šå›ºå®šæ—¶é—´æ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> lastTime = <span class="hljs-number">0</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    <span class="hljs-keyword">if</span> (now - lastTime &gt;= delay) {
      lastTime = now
      fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> searchInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'search'</span>)

<span class="hljs-comment">// æœç´¢è¾“å…¥é˜²æŠ–</span>
searchInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢:'</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)
}, <span class="hljs-number">300</span>))

<span class="hljs-comment">// æ»šåŠ¨èŠ‚æµ</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»šåŠ¨ä½ç½®:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>)
}, <span class="hljs-number">100</span>))
</code></pre>
<h4 data-id="heading-29">5.5 ä»£ç åˆ†å‰²ï¼šæŒ‰éœ€åŠ è½½</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±æ‡’åŠ è½½</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/About.vue'</span>)
  }
]

<span class="hljs-comment">// ç»„ä»¶æ‡’åŠ è½½</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">HeavyComponent</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/HeavyComponent.vue'</span>)
  }
}

<span class="hljs-comment">// æ¡ä»¶åŠ è½½</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadModule</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (needsFeature) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/features/advanced'</span>)
    <span class="hljs-variable language_">module</span>.<span class="hljs-title function_">doSomething</span>()
  }
}
</code></pre>
<h4 data-id="heading-30">5.6 å‡å°‘ DOM æ“ä½œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¢‘ç¹æ“ä½œ DOM</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ DocumentFragment</span>
<span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>()

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>
  fragment.<span class="hljs-title function_">appendChild</span>(div)
}

<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(fragment)

<span class="hljs-comment">// âœ… æˆ–è€…ä½¿ç”¨ innerHTML ä¸€æ¬¡æ€§æ’å…¥</span>
<span class="hljs-keyword">let</span> html = <span class="hljs-string">''</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  html += <span class="hljs-string">`&lt;div&gt;Item <span class="hljs-subst">${i}</span>&lt;/div&gt;`</span>
}
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = html
</code></pre>
<h4 data-id="heading-31">5.7 ä½¿ç”¨ CSS3 åŠ¨ç”»ä»£æ›¿ JS åŠ¨ç”»</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ JS åŠ¨ç”»ï¼ˆæ€§èƒ½å·®ï¼‰ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transition</span>: none;
}

<span class="hljs-comment">/* âœ… CSS3 åŠ¨ç”»ï¼ˆæ€§èƒ½å¥½ï¼‰ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>);
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-comment">/* æ›´å¥½çš„ï¼šä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨ä¼˜åŒ– */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">will-change</span>: transform;
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ JS å®ç°åŠ¨ç”»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">let</span> position = <span class="hljs-number">0</span>
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    position += <span class="hljs-number">10</span>
    element.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = position + <span class="hljs-string">'px'</span>
  }, <span class="hljs-number">16</span>)
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ CSS3</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params">element</span>) {
  element.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">'translateX(100px)'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">'transform 0.3s ease'</span>
}
</code></pre>
<h4 data-id="heading-32">5.8 Web Workerï¼šæŠŠç¹é‡è®¡ç®—æ”¾åˆ°åå°çº¿ç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'./worker.js'</span>)

worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">data</span>: largeData })

worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—ç»“æœ:'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>)
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">heavyCalculation</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>)
  self.<span class="hljs-title function_">postMessage</span>({ result })
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">heavyCalculation</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// è€—æ—¶è®¡ç®—</span>
  <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>)
}
</code></pre>
<h3 data-id="heading-33">ç»¼åˆå®æˆ˜ï¼šæ‰“é€ ä¸€å¥—å®Œæ•´çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</h3>
<p>è®²äº†è¿™ä¹ˆå¤šï¼Œæ€ä¹ˆç»„åˆèµ·æ¥ç”¨ï¼Ÿæ¥ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œçº¯å‰ç«¯æ“ä½œï¼š</p>
<h4 data-id="heading-34">é¡¹ç›®ç»“æ„</h4>
<pre><code class="hljs language-arduino" lang="arduino">my-project/
â”œâ”€â”€ <span class="hljs-keyword">public</span>/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ cache.js
â”‚   â”‚   â””â”€â”€ request.js
â”‚   â”œâ”€â”€ sw.js
â”‚   â””â”€â”€ main.js
â””â”€â”€ vite.config.js
</code></pre>
<h4 data-id="heading-35">å®Œæ•´é…ç½®ï¼ˆvite.config.jsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> viteImagemin <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-imagemin'</span>
<span class="hljs-keyword">import</span> webp <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-webp'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">viteImagemin</span>({
      <span class="hljs-attr">gifsicle</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span> },
      <span class="hljs-attr">optipng</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span> },
      <span class="hljs-attr">mozjpeg</span>: { <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span> },
      <span class="hljs-attr">svgo</span>: {
        <span class="hljs-attr">plugins</span>: [
          { <span class="hljs-attr">name</span>: <span class="hljs-string">'removeViewBox'</span> },
          { <span class="hljs-attr">name</span>: <span class="hljs-string">'removeEmptyAttrs'</span> }
        ]
      }
    }),
    <span class="hljs-title function_">webp</span>({
      <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span>
    })
  ],

  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'assets/[name].[hash].js'</span>,
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'assets/[name].[hash].js'</span>,
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name].[hash].[ext]'</span>
      }
    },
    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,
    <span class="hljs-attr">terserOptions</span>: {
      <span class="hljs-attr">compress</span>: {
        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>
      }
    }
  }
})
</code></pre>
<h4 data-id="heading-36">HTML ä¼˜åŒ–ï¼ˆindex.htmlï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- DNS é¢„å– --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- å†…è”å…³é”® CSS --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* é¦–å±å¿…éœ€çš„æ ·å¼ */</span>
  <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, sans-serif; }
  <span class="hljs-selector-class">.header</span> { <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#333</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>; }
  <span class="hljs-selector-class">.loading</span> { <span class="hljs-attribute">position</span>: fixed; <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>; <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>); }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- éå…³é”®æ ·å¼å¼‚æ­¥åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/assets/style.[hash].css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"this.onload=null;this.rel='stylesheet'"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/assets/style.[hash].css"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- è„šæœ¬å¼‚æ­¥åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/main.[hash].js"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-37">æ€§èƒ½ç›‘æ§ï¼ˆutils/performance.jsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">trackPerformance</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'PerformanceObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    <span class="hljs-comment">// ç›‘æ§èµ„æºåŠ è½½</span>
    <span class="hljs-keyword">const</span> resourceObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
        <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">transferSize</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ“ ç¼“å­˜å‘½ä¸­: <span class="hljs-subst">${entry.name}</span>`</span>)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ— ç½‘ç»œåŠ è½½: <span class="hljs-subst">${entry.name}</span> (<span class="hljs-subst">${(entry.transferSize / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span>KB)`</span>)
        }
      }
    })
    resourceObserver.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'resource'</span>] })

    <span class="hljs-comment">// ç›‘æ§é•¿ä»»åŠ¡</span>
    <span class="hljs-keyword">const</span> longTaskObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`âš ï¸ é•¿ä»»åŠ¡: <span class="hljs-subst">${entry.name}</span> (<span class="hljs-subst">${entry.duration}</span>ms)`</span>)
      }
    })
    longTaskObserver.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'longtask'</span>] })
  }
}

<span class="hljs-comment">// åœ¨ main.js ä¸­è°ƒç”¨</span>
<span class="hljs-title function_">trackPerformance</span>()
</code></pre>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯â¼€è¹´â½½å°±çš„ï¼Œéœ€è¦æŒç»­è¿­ä»£ã€‚è®°ä½â¼ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li><strong>èƒ½ç¼“å­˜çš„å°½é‡ç¼“å­˜</strong>ï¼Œè®©â½¤æˆ·å°‘ç­‰â¼ç§’</li>
<li><strong>èƒ½å‹ç¼©çš„å°½é‡å‹ç¼©</strong>ï¼Œä½“ç§¯å°äº†ä¼ è¾“å°±å¿«</li>
<li><strong>DNS é¢„å–å’Œé¢„è¿æ¥</strong>ï¼Œæå‰åšå¥½å‡†å¤‡</li>
<li><strong>CDN æ˜¯ç¥å™¨</strong>ï¼Œè®©å…¨çƒç”¨æˆ·éƒ½èƒ½å¿«é€Ÿè®¿é—®</li>
<li><strong>æ¸²æŸ“ä¼˜åŒ–å¾ˆé‡è¦</strong>ï¼ŒåŠ è½½å¿«ä¸ç­‰äºä½“éªŒå¥½</li>
<li><strong>æ‡’åŠ è½½å’ŒæŒ‰éœ€åŠ è½½</strong>ï¼ŒåªåŠ è½½ç”¨æˆ·éœ€è¦çš„</li>
<li><strong>ç›‘æ§è¦è·Ÿä¸Š</strong>ï¼Œä¸ç„¶ä½ éƒ½ä¸çŸ¥é“ä¼˜åŒ–æœ‰æ²¡æœ‰â½¤</li>
</ol>
<p>æœ€åï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡â½‚ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œ<strong>ç‚¹ä¸ªèµå‘—</strong>ï¼å¦‚æœè§‰å¾—æœ‰é—®é¢˜ï¼Œ<strong>è¯„è®ºåŒºå–·æˆ‘</strong>ï¼Œæˆ‘æŠ—æã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬11ç« ã€é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æœºåˆ¶â€”â€”æ„å»ºå¥å£®ç¨‹åº]]></title>    <link>https://juejin.cn/post/7601355703240441896</link>    <guid>https://juejin.cn/post/7601355703240441896</guid>    <pubDate>2026-02-02T00:41:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601355703240441896" data-draft-id="7601175299012214799" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬11ç« ã€é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æœºåˆ¶â€”â€”æ„å»ºå¥å£®ç¨‹åº"/> <meta itemprop="keywords" content="åç«¯,Go,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-02-02T00:41:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬11ç« ã€é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æœºåˆ¶â€”â€”æ„å»ºå¥å£®ç¨‹åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:41:49.000Z" title="Mon Feb 02 2026 00:41:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï½ åœ¨å‰ä¸¤ç« æˆ‘ä»¬æŒæ¡äº†Goçš„ç»“æ„ä½“ã€æ–¹æ³•ä»¥åŠæ¥å£ä¸å¤šæ€çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œè¿™äº›æ˜¯æ„å»ºGoç¨‹åºçš„åŸºç¡€éª¨æ¶ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†èšç„¦ç¨‹åºç¨³å®šæ€§çš„å…³é”®â€”â€”<strong>é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æœºåˆ¶</strong>ã€‚</p>
<p>ä¸åŒäºJavaã€Pythonçš„try-catchå¼‚å¸¸æ•è·æ¨¡å¼ï¼ŒGoé‡‡ç”¨äº†â€œæ˜¾å¼é”™è¯¯è¿”å›+è½»é‡çº§å¼‚å¸¸æ¢å¤â€çš„è®¾è®¡ç†å¿µã€‚è¿™ç§è®¾è®¡è®©é”™è¯¯å¤„ç†æ›´å¯æ§ã€ä»£ç æ›´æ¸…æ™°ï¼Œä½†ä¹Ÿå¯¹å¼€å‘è€…çš„è§„èŒƒä½¿ç”¨æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚ä¸€ä¸ªå¥å£®çš„Goç¨‹åºï¼Œå¿…ç„¶ç¦»ä¸å¼€åˆç†çš„é”™è¯¯å¤„ç†ç­–ç•¥å’Œå¼‚å¸¸é˜²æŠ¤æœºåˆ¶ã€‚</p>
<p>æœ¬æ–‡å°†ä¸¥æ ¼æŒ‰ç…§ç›®å½•é€èŠ‚æ‹†è§£ï¼Œä»åŸºç¡€çš„erroræ¥å£åˆ°å¤æ‚çš„defer+panic+recoverååŒä½¿ç”¨ï¼Œæ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½é…å¥—<strong>å¯ç›´æ¥è¿è¡Œçš„ä»£ç ç¤ºä¾‹</strong>ï¼ŒåŒæ—¶è¡¥å……å®˜æ–¹æ–‡æ¡£ã€å®ç”¨å·¥å…·å’Œå®æˆ˜æŠ€å·§ã€‚æ— è®ºæ˜¯å…¥é—¨è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½ä»ä¸­ç†æ¸…é”™è¯¯å¤„ç†çš„æ ¸å¿ƒé€»è¾‘ï¼ŒæŒæ¡æ„å»ºå¥å£®ç¨‹åºçš„å…³é”®æ–¹æ³•ã€‚è¯ä¸å¤šè¯´ï¼Œå¼€å§‹æ­£æ–‡ï½</p>
<h2 data-id="heading-0">ä¸€ã€erroræ¥å£ä¸é”™è¯¯å¤„ç†æƒ¯ä¾‹</h2>
<p>åœ¨Goä¸­ï¼Œé”™è¯¯å¤„ç†çš„åŸºç¡€æ˜¯<code>error</code>æ¥å£ã€‚Goæ²¡æœ‰å†…ç½®çš„å¼‚å¸¸ç±»å‹ï¼Œè€Œæ˜¯é€šè¿‡è¿”å›<code>error</code>ç±»å‹å€¼æ¥è¡¨ç¤ºå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸æƒ…å†µã€‚è¿™ç§â€œæ˜¾å¼è¿”å›ã€ä¸»åŠ¨æ£€æŸ¥â€çš„æ¨¡å¼ï¼Œæ˜¯Goé”™è¯¯å¤„ç†çš„æ ¸å¿ƒæƒ¯ä¾‹ã€‚</p>
<h3 data-id="heading-1">1.1 erroræ¥å£çš„å®šä¹‰ä¸æ ¸å¿ƒç‰¹æ€§</h3>
<p>erroræ¥å£æ˜¯Goæ ‡å‡†åº“<code>builtin</code>åŒ…ä¸­å®šä¹‰çš„ä¸€ä¸ªæç®€æ¥å£ï¼Œä»…åŒ…å«ä¸€ä¸ª<code>Error()</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// erroræ¥å£å®šä¹‰ï¼ˆbuiltinåŒ…ï¼‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">error</span> <span class="hljs-keyword">interface</span> {
    Error() <span class="hljs-type">string</span> <span class="hljs-comment">// è¿”å›é”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²</span>
}

</code></pre>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>
<p><strong>éšå¼å®ç°</strong>ï¼šä»»ä½•ç±»å‹åªè¦å®ç°äº†<code>Error() string</code>æ–¹æ³•ï¼Œå°±è‡ªåŠ¨å®ç°äº†erroræ¥å£ï¼Œæ— éœ€æ˜¾å¼å£°æ˜ï¼›</p>
</li>
<li>
<p><strong>å€¼è¯­ä¹‰</strong>ï¼šerroræ¥å£å˜é‡å­˜å‚¨çš„æ˜¯â€œå…·ä½“é”™è¯¯ç±»å‹çš„å€¼ï¼ˆæˆ–æŒ‡é’ˆï¼‰â€ï¼Œæ”¯æŒç±»å‹æ–­è¨€å’Œç±»å‹é€‰æ‹©ï¼›</p>
</li>
<li>
<p><strong>é›¶å€¼å®‰å…¨</strong>ï¼šerroræ¥å£çš„é›¶å€¼æ˜¯<code>nil</code>ï¼Œè¡¨ç¤ºâ€œæ— é”™è¯¯â€ï¼Œå¯ç›´æ¥ç”¨äºåˆ¤æ–­ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">1.2 Goé”™è¯¯å¤„ç†çš„æ ¸å¿ƒæƒ¯ä¾‹</h3>
<p>Goç¤¾åŒºå½¢æˆäº†ä¸€å¥—é€šç”¨çš„é”™è¯¯å¤„ç†æƒ¯ä¾‹ï¼Œéµå¾ªè¿™äº›æƒ¯ä¾‹èƒ½è®©ä»£ç æ›´å…·å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š</p>
<ul>
<li>
<p><strong>æ˜¾å¼è¿”å›é”™è¯¯</strong>ï¼šå‡½æ•°å¦‚æœå¯èƒ½å‡ºç°é”™è¯¯ï¼Œåº”å°†errorä½œä¸ºæœ€åä¸€ä¸ªè¿”å›å€¼ï¼›</p>
</li>
<li>
<p><strong>ä¼˜å…ˆæ£€æŸ¥é”™è¯¯</strong>ï¼šè°ƒç”¨è¿”å›é”™è¯¯çš„å‡½æ•°åï¼Œåº”ç«‹å³æ£€æŸ¥erroræ˜¯å¦ä¸ºnilï¼Œé¿å…é”™è¯¯ä¼ æ’­ï¼›</p>
</li>
<li>
<p><strong>é”™è¯¯æè¿°ç®€æ´å‡†ç¡®</strong>ï¼šé”™è¯¯ä¿¡æ¯åº”æ¸…æ™°è¯´æ˜â€œä»€ä¹ˆé”™è¯¯â€â€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹â€ï¼Œé¿å…æ¨¡ç³Šè¡¨è¿°ï¼›</p>
</li>
<li>
<p><strong>ä¸å¿½ç•¥é”™è¯¯</strong>ï¼šé™¤éæ˜ç¡®çŸ¥é“è¯¥é”™è¯¯æ— å…³ç´§è¦ï¼ˆå¦‚å…³é—­æ–‡ä»¶æ—¶çš„æŸäº›é”™è¯¯ï¼‰ï¼Œå¦åˆ™ä¸¥ç¦å¿½ç•¥é”™è¯¯ï¼›</p>
</li>
<li>
<p><strong>é”™è¯¯ä¼ é€’æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</strong>ï¼šå‘ä¸Šå±‚ä¼ é€’é”™è¯¯æ—¶ï¼Œåº”è¡¥å……å½“å‰åœºæ™¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">1.3 ä»£ç ç¤ºä¾‹ï¼šåŸºç¡€é”™è¯¯å¤„ç†å®è·µ</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"errors"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-comment">// Divide é™¤æ³•å‡½æ•°ï¼šå¯èƒ½å‡ºç°é™¤æ•°ä¸º0çš„é”™è¯¯ï¼Œæ˜¾å¼è¿”å›error</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Divide</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
        <span class="hljs-comment">// ç”¨errors.Newåˆ›å»ºåŸºç¡€é”™è¯¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, errors.New(<span class="hljs-string">"é™¤æ•°ä¸èƒ½ä¸º0"</span>)
    }
    <span class="hljs-keyword">return</span> a / b, <span class="hljs-literal">nil</span> <span class="hljs-comment">// æ— é”™è¯¯æ—¶è¿”å›nil</span>
}

<span class="hljs-comment">// Calculate è®¡ç®—å‡½æ•°ï¼šè°ƒç”¨Divideï¼Œæ£€æŸ¥å¹¶ä¼ é€’é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Calculate</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">error</span>) {
    result, err := Divide(a, b)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// é”™è¯¯ä¼ é€’æ—¶è¡¥å……ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, fmt.Errorf(<span class="hljs-string">"è®¡ç®—å¤±è´¥ï¼ˆa=%d, b=%dï¼‰ï¼š%w"</span>, a, b, err)
    }
    <span class="hljs-keyword">return</span> result * <span class="hljs-number">2</span>, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// è°ƒç”¨å¯èƒ½è¿”å›é”™è¯¯çš„å‡½æ•°ï¼Œä¼˜å…ˆæ£€æŸ¥é”™è¯¯</span>
    result, err := Calculate(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"æ‰§è¡ŒæˆåŠŸï¼Œç»“æœï¼š%d\n"</span>, result)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
æ‰§è¡Œå¤±è´¥ï¼šè®¡ç®—å¤±è´¥ï¼ˆa=10, b=0ï¼‰ï¼šé™¤æ•°ä¸èƒ½ä¸º0

</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>Divide</code>å‡½æ•°å°†errorä½œä¸ºæœ€åä¸€ä¸ªè¿”å›å€¼ï¼Œç¬¦åˆâ€œæ˜¾å¼è¿”å›é”™è¯¯â€æƒ¯ä¾‹ï¼›</p>
</li>
<li>
<p>è°ƒç”¨<code>Divide</code>åç«‹å³æ£€æŸ¥errï¼Œé¿å…é”™è¯¯ä¼ æ’­åˆ°åç»­é€»è¾‘ï¼›</p>
</li>
<li>
<p>ä¼ é€’é”™è¯¯æ—¶ä½¿ç”¨<code>fmt.Errorf</code>å’Œ<code>%w</code>ï¼ˆGo 1.13+ï¼‰ï¼Œæ—¢è¡¥å……äº†ä¸Šä¸‹æ–‡ï¼Œåˆä¿ç•™äº†åŸå§‹é”™è¯¯ä¿¡æ¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">1.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpkg.go.dev%2Fbuiltin%23error" target="_blank" title="https://pkg.go.dev/builtin#error" ref="nofollow noopener noreferrer">error interface</a></p>
</li>
<li>
<p>Goå®˜æ–¹åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fblog%2Ferror-handling-and-go" target="_blank" title="https://go.dev/blog/error-handling-and-go" ref="nofollow noopener noreferrer">Error Handling and Go</a></p>
</li>
</ul>
<h2 data-id="heading-5">äºŒã€è‡ªå®šä¹‰é”™è¯¯ç±»å‹ä¸é”™è¯¯åŒ…è£…</h2>
<p>åŸºç¡€çš„<code>errors.New</code>å’Œ<code>fmt.Errorf</code>åªèƒ½åˆ›å»ºç®€å•çš„é”™è¯¯ä¿¡æ¯ï¼Œä½†åœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æºå¸¦æ›´å¤šé”™è¯¯ä¿¡æ¯ï¼ˆå¦‚é”™è¯¯ç ã€é”™è¯¯è¯¦æƒ…ã€å †æ ˆä¿¡æ¯ç­‰ï¼‰ã€‚è¿™æ—¶å°±éœ€è¦å®šä¹‰è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œå¹¶é€šè¿‡â€œé”™è¯¯åŒ…è£…â€å®ç°é”™è¯¯ä¿¡æ¯çš„å±‚çº§ä¼ é€’ã€‚</p>
<h3 data-id="heading-6">2.1 è‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„å®ç°</h3>
<p>è‡ªå®šä¹‰é”™è¯¯ç±»å‹åªéœ€å®ç°<code>error</code>æ¥å£çš„<code>Error()</code>æ–¹æ³•å³å¯ã€‚é€šå¸¸æˆ‘ä»¬ä¼šå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«éœ€è¦çš„é¢å¤–å­—æ®µï¼ˆå¦‚é”™è¯¯ç ã€é”™è¯¯ä¿¡æ¯ã€åŸå§‹é”™è¯¯ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-7">2.1.1 ä»£ç ç¤ºä¾‹ï¼šåŸºç¡€è‡ªå®šä¹‰é”™è¯¯</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// MyError è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼šåŒ…å«é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯</span>
<span class="hljs-keyword">type</span> MyError <span class="hljs-keyword">struct</span> {
    Code    <span class="hljs-type">int</span>    <span class="hljs-comment">// é”™è¯¯ç ï¼šç”¨äºä¸Šå±‚æ ¹æ®é”™è¯¯ç åšå·®å¼‚åŒ–å¤„ç†</span>
    Message <span class="hljs-type">string</span> <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯ï¼šç”¨æˆ·å¯ç†è§£çš„é”™è¯¯æè¿°</span>
}

<span class="hljs-comment">// Error å®ç°erroræ¥å£çš„Error()æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *MyError)</span></span> Error() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"é”™è¯¯ç ï¼š%dï¼Œé”™è¯¯ä¿¡æ¯ï¼š%s"</span>, e.Code, e.Message)
}

<span class="hljs-comment">// Login æ¨¡æ‹Ÿç™»å½•å‡½æ•°ï¼šè¿”å›è‡ªå®šä¹‰é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Login</span><span class="hljs-params">(username, password <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">if</span> username == <span class="hljs-string">""</span> {
        <span class="hljs-keyword">return</span> &amp;MyError{Code: <span class="hljs-number">400</span>, Message: <span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>}
    }
    <span class="hljs-keyword">if</span> password == <span class="hljs-string">""</span> {
        <span class="hljs-keyword">return</span> &amp;MyError{Code: <span class="hljs-number">400</span>, Message: <span class="hljs-string">"å¯†ç ä¸èƒ½ä¸ºç©º"</span>}
    }
    <span class="hljs-keyword">if</span> username != <span class="hljs-string">"admin"</span> || password != <span class="hljs-string">"123456"</span> {
        <span class="hljs-keyword">return</span> &amp;MyError{Code: <span class="hljs-number">401</span>, Message: <span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>}
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    err := Login(<span class="hljs-string">"admin"</span>, <span class="hljs-string">"wrong"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// é€šè¿‡ç±»å‹æ–­è¨€è·å–è‡ªå®šä¹‰é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯</span>
        <span class="hljs-keyword">if</span> e, ok := err.(*MyError); ok {
            fmt.Printf(<span class="hljs-string">"ç™»å½•å¤±è´¥ï¼š%s\n"</span>, e.Error())
            <span class="hljs-comment">// æ ¹æ®é”™è¯¯ç æ‰§è¡Œå·®å¼‚åŒ–é€»è¾‘</span>
            <span class="hljs-keyword">switch</span> e.Code {
            <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
                fmt.Println(<span class="hljs-string">"å»ºè®®ï¼šæ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦å¡«å†™å®Œæ•´"</span>)
            <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                fmt.Println(<span class="hljs-string">"å»ºè®®ï¼šé‡æ–°è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç "</span>)
            }
        }
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
ç™»å½•å¤±è´¥ï¼šé”™è¯¯ç ï¼š401ï¼Œé”™è¯¯ä¿¡æ¯ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
å»ºè®®ï¼šé‡æ–°è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç 

</code></pre>
<h4 data-id="heading-8">2.1.2 è¿›é˜¶ï¼šæºå¸¦å †æ ˆä¿¡æ¯çš„è‡ªå®šä¹‰é”™è¯¯</h4>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé”™è¯¯çš„å †æ ˆä¿¡æ¯å¯¹é—®é¢˜å®šä½è‡³å…³é‡è¦ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚<code>github.com/pkg/errors</code>ï¼‰å®ç°å¸¦å †æ ˆä¿¡æ¯çš„è‡ªå®šä¹‰é”™è¯¯ã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>

    <span class="hljs-string">"github.com/pkg/errors"</span>
)

<span class="hljs-comment">// BusinessError å¸¦å †æ ˆä¿¡æ¯çš„ä¸šåŠ¡é”™è¯¯</span>
<span class="hljs-keyword">type</span> BusinessError <span class="hljs-keyword">struct</span> {
    Code    <span class="hljs-type">int</span>
    Message <span class="hljs-type">string</span>
    Err     <span class="hljs-type">error</span> <span class="hljs-comment">// åŸå§‹é”™è¯¯ï¼šç”¨äºå­˜å‚¨åº•å±‚é”™è¯¯</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *BusinessError)</span></span> Error() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"ä¸šåŠ¡é”™è¯¯[code:%d]ï¼š%sï¼ŒåŸå§‹é”™è¯¯ï¼š%v"</span>, e.Code, e.Message, e.Err)
}

<span class="hljs-comment">// Wrap åŒ…è£…é”™è¯¯ï¼šæ·»åŠ å †æ ˆä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *BusinessError)</span></span> Wrap(err <span class="hljs-type">error</span>) *BusinessError {
    e.Err = errors.WithStack(err)
    <span class="hljs-keyword">return</span> e
}

<span class="hljs-comment">// QueryUser æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·ï¼šè¿”å›å¸¦å †æ ˆçš„è‡ªå®šä¹‰é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QueryUser</span><span class="hljs-params">(id <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">if</span> id &lt;= <span class="hljs-number">0</span> {
        err := errors.New(<span class="hljs-string">"ç”¨æˆ·IDå¿…é¡»å¤§äº0"</span>)
        <span class="hljs-keyword">return</span> &amp;BusinessError{Code: <span class="hljs-number">400</span>, Message: <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥"</span>}.Wrap(err)
    }
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢å¤±è´¥</span>
    dbErr := errors.New(<span class="hljs-string">"æ•°æ®åº“è¿æ¥è¶…æ—¶"</span>)
    <span class="hljs-keyword">return</span> &amp;BusinessError{Code: <span class="hljs-number">500</span>, Message: <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥"</span>}.Wrap(dbErr)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    err := QueryUser(<span class="hljs-number">-1</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-comment">// æ‰“å°å †æ ˆä¿¡æ¯</span>
        <span class="hljs-keyword">if</span> e, ok := err.(*BusinessError); ok {
            fmt.Printf(<span class="hljs-string">"å †æ ˆä¿¡æ¯ï¼š%+v\n"</span>, e.Err)
        }
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼ˆåŒ…å«å †æ ˆä¿¡æ¯ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">
æ‰§è¡Œå¤±è´¥ï¼šä¸šåŠ¡é”™è¯¯[code:400]ï¼šæŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼ŒåŸå§‹é”™è¯¯ï¼šç”¨æˆ·IDå¿…é¡»å¤§äº0
å †æ ˆä¿¡æ¯ï¼šç”¨æˆ·IDå¿…é¡»å¤§äº0
main.QueryUser
        /path/to/your/file.go:28
main.main
        /path/to/your/file.go:36
runtime.main
        /usr/local/go/src/runtime/proc.go:250
runtime.goexit
        /usr/local/go/src/runtime/asm_amd64.s:1598

</code></pre>
<h3 data-id="heading-9">2.2 é”™è¯¯åŒ…è£…ä¸è§£åŒ…ï¼ˆGo 1.13+ï¼‰</h3>
<p>Go 1.13å¼•å…¥äº†é”™è¯¯åŒ…è£…æœºåˆ¶ï¼Œé€šè¿‡<code>fmt.Errorf</code>çš„<code>%w</code>åŠ¨è¯å¯ä»¥åŒ…è£…é”™è¯¯ï¼Œé€šè¿‡<code>errors.Is</code>å’Œ<code>errors.As</code>å‡½æ•°å¯ä»¥è§£åŒ…å’Œåˆ¤æ–­é”™è¯¯ç±»å‹ã€‚è¿™ç§æœºåˆ¶è®©é”™è¯¯çš„å±‚çº§ä¼ é€’å’Œç±»å‹åˆ¤æ–­æ›´è§„èŒƒã€‚</p>
<h4 data-id="heading-10">2.2.1 æ ¸å¿ƒå‡½æ•°è¯´æ˜</h4>
<ul>
<li>
<p><code>fmt.Errorf("%w", err)</code>ï¼šåŒ…è£…é”™è¯¯ï¼Œå°†åŸå§‹é”™è¯¯erråŒ…è£…åˆ°æ–°çš„é”™è¯¯ä¸­ï¼›</p>
</li>
<li>
<p><code>errors.Is(err, target error)</code>ï¼šåˆ¤æ–­erré“¾ä¸­æ˜¯å¦åŒ…å«targeté”™è¯¯ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ï¼›</p>
</li>
<li>
<p><code>errors.As(err, target interface{}) bool</code>ï¼šåˆ¤æ–­erré“¾ä¸­æ˜¯å¦å­˜åœ¨å¯èµ‹å€¼ç»™targetçš„é”™è¯¯ç±»å‹ï¼ˆç±»å‹åŒ¹é…ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-11">2.2.2 ä»£ç ç¤ºä¾‹ï¼šé”™è¯¯åŒ…è£…ä¸è§£åŒ…</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"errors"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-comment">// å®šä¹‰åŸºç¡€é”™è¯¯</span>
<span class="hljs-keyword">var</span> (
    ErrNotFound  = errors.New(<span class="hljs-string">"èµ„æºä¸å­˜åœ¨"</span>)
    ErrPermission = errors.New(<span class="hljs-string">"æƒé™ä¸è¶³"</span>)
)

<span class="hljs-comment">// QueryResource æ¨¡æ‹ŸæŸ¥è¯¢èµ„æºï¼šåŒ…è£…åŸºç¡€é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QueryResource</span><span class="hljs-params">(id <span class="hljs-type">int</span>, userRole <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">if</span> id &lt;= <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æŸ¥è¯¢èµ„æºï¼ˆid=%dï¼‰å¤±è´¥ï¼š%w"</span>, id, ErrNotFound)
    }
    <span class="hljs-keyword">if</span> userRole != <span class="hljs-string">"admin"</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æŸ¥è¯¢èµ„æºï¼ˆid=%dï¼‰å¤±è´¥ï¼š%w"</span>, id, ErrPermission)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åœºæ™¯1ï¼šèµ„æºä¸å­˜åœ¨é”™è¯¯</span>
    err1 := QueryResource(<span class="hljs-number">-1</span>, <span class="hljs-string">"admin"</span>)
    <span class="hljs-keyword">if</span> err1 != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"é”™è¯¯ä¿¡æ¯ï¼š%v\n"</span>, err1)
        <span class="hljs-comment">// ç”¨errors.Isåˆ¤æ–­é”™è¯¯ç±»å‹</span>
        <span class="hljs-keyword">if</span> errors.Is(err1, ErrNotFound) {
            fmt.Println(<span class="hljs-string">"å¤„ç†ï¼šèµ„æºä¸å­˜åœ¨ï¼Œå¼•å¯¼ç”¨æˆ·æ£€æŸ¥ID"</span>)
        }
    }

    <span class="hljs-comment">// åœºæ™¯2ï¼šæƒé™ä¸è¶³é”™è¯¯</span>
    err2 := QueryResource(<span class="hljs-number">1</span>, <span class="hljs-string">"user"</span>)
    <span class="hljs-keyword">if</span> err2 != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"é”™è¯¯ä¿¡æ¯ï¼š%v\n"</span>, err2)
        <span class="hljs-keyword">if</span> errors.Is(err2, ErrPermission) {
            fmt.Println(<span class="hljs-string">"å¤„ç†ï¼šæƒé™ä¸è¶³ï¼Œå¼•å¯¼ç”¨æˆ·ç”³è¯·æƒé™"</span>)
        }
    }

    <span class="hljs-comment">// åœºæ™¯3ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„è§£åŒ…</span>
    <span class="hljs-keyword">type</span> MyError <span class="hljs-keyword">struct</span> {
        Code <span class="hljs-type">int</span>
        Msg  <span class="hljs-type">string</span>
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *MyError)</span></span> Error() <span class="hljs-type">string</span> { <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"code:%d, msg:%s"</span>, e.Code, e.Msg) }

    err3 := fmt.Errorf(<span class="hljs-string">"åŒ…è£…è‡ªå®šä¹‰é”™è¯¯ï¼š%w"</span>, &amp;MyError{Code: <span class="hljs-number">500</span>, Msg: <span class="hljs-string">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"</span>})
    <span class="hljs-keyword">if</span> err3 != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">var</span> e *MyError
        <span class="hljs-comment">// ç”¨errors.Asåˆ¤æ–­å¹¶æå–è‡ªå®šä¹‰é”™è¯¯ç±»å‹</span>
        <span class="hljs-keyword">if</span> errors.As(err3, &amp;e) {
            fmt.Printf(<span class="hljs-string">"æå–è‡ªå®šä¹‰é”™è¯¯ï¼šcode=%d, msg=%s\n"</span>, e.Code, e.Msg)
        }
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
é”™è¯¯ä¿¡æ¯ï¼šæŸ¥è¯¢èµ„æºï¼ˆid=-1ï¼‰å¤±è´¥ï¼šèµ„æºä¸å­˜åœ¨
å¤„ç†ï¼šèµ„æºä¸å­˜åœ¨ï¼Œå¼•å¯¼ç”¨æˆ·æ£€æŸ¥ID
é”™è¯¯ä¿¡æ¯ï¼šæŸ¥è¯¢èµ„æºï¼ˆid=1ï¼‰å¤±è´¥ï¼šæƒé™ä¸è¶³
å¤„ç†ï¼šæƒé™ä¸è¶³ï¼Œå¼•å¯¼ç”¨æˆ·ç”³è¯·æƒé™
æå–è‡ªå®šä¹‰é”™è¯¯ï¼šcode=500, msg=æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

</code></pre>
<h3 data-id="heading-12">2.3 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpkg.go.dev%2Ferrors" target="_blank" title="https://pkg.go.dev/errors" ref="nofollow noopener noreferrer">errors åŒ…</a></p>
</li>
<li>
<p>ç¬¬ä¸‰æ–¹é”™è¯¯å¤„ç†åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpkg%2Ferrors" target="_blank" title="https://github.com/pkg/errors" ref="nofollow noopener noreferrer">github.com/pkg/errors</a></p>
</li>
</ul>
<h2 data-id="heading-13">ä¸‰ã€ä½¿ç”¨fmt.Errorfä¸%wæ ¼å¼åŒ–</h2>
<p>åœ¨Go 1.13ä¹‹å‰ï¼Œ<code>fmt.Errorf</code>åªèƒ½ç”¨äºåˆ›å»ºç®€å•çš„é”™è¯¯å­—ç¬¦ä¸²ï¼Œæ— æ³•ä¿ç•™åŸå§‹é”™è¯¯ä¿¡æ¯ã€‚Go 1.13ä¸º<code>fmt.Errorf</code>æ–°å¢äº†<code>%w</code>åŠ¨è¯ï¼Œä½¿å…¶æ”¯æŒâ€œé”™è¯¯åŒ…è£…â€â€”â€”æ—¢å¯ä»¥æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œåˆèƒ½ä¿ç•™åŸå§‹é”™è¯¯çš„ç±»å‹å’Œä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­é€šè¿‡<code>errors.Is</code>å’Œ<code>errors.As</code>è§£åŒ…ã€‚</p>
<h3 data-id="heading-14">3.1 %wçš„æ ¸å¿ƒç”¨æ³•</h3>
<p><code>%w</code>çš„æ ¸å¿ƒä½œç”¨æ˜¯â€œåŒ…è£…é”™è¯¯â€ï¼Œè¯­æ³•æ ¼å¼ï¼š</p>
<pre><code class="hljs language-go" lang="go">
newErr := fmt.Errorf(<span class="hljs-string">"ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š%w"</span>, originalErr)

</code></pre>
<p>æ ¸å¿ƒè§„åˆ™ï¼š</p>
<ul>
<li>
<p>ä¸€ä¸ª<code>fmt.Errorf</code>è°ƒç”¨ä¸­åªèƒ½ä½¿ç”¨ä¸€ä¸ª<code>%w</code>åŠ¨è¯ï¼Œå¦åˆ™ä¼šç¼–è¯‘é”™è¯¯ï¼›</p>
</li>
<li>
<p>è¢«åŒ…è£…çš„é”™è¯¯å¿…é¡»æ˜¯<code>error</code>ç±»å‹ï¼Œå¦åˆ™ä¼šè§¦å‘è¿è¡Œæ—¶panicï¼›</p>
</li>
<li>
<p>åŒ…è£…åçš„é”™è¯¯å¯ä»¥é€šè¿‡<code>errors.Is</code>å’Œ<code>errors.As</code>è·å–åŸå§‹é”™è¯¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">3.2 ä»£ç ç¤ºä¾‹ï¼š%wçš„åŸºç¡€ä½¿ç”¨</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"errors"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-comment">// å®šä¹‰åŸå§‹é”™è¯¯</span>
<span class="hljs-keyword">var</span> ErrInvalidParam = errors.New(<span class="hljs-string">"å‚æ•°æ— æ•ˆ"</span>)

<span class="hljs-comment">// Process å¤„ç†å‡½æ•°ï¼šåŒ…è£…é”™è¯¯å¹¶æ·»åŠ ä¸Šä¸‹æ–‡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Process</span><span class="hljs-params">(param <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">if</span> param &lt; <span class="hljs-number">0</span> {
        <span class="hljs-comment">// ç”¨%wåŒ…è£…åŸå§‹é”™è¯¯ï¼Œæ·»åŠ ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"Process: å‚æ•°param=%dä¸åˆæ³•ï¼š%w"</span>, param, ErrInvalidParam)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// CallProcess è°ƒç”¨å¤„ç†å‡½æ•°ï¼šå†æ¬¡åŒ…è£…é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CallProcess</span><span class="hljs-params">(param <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
    err := Process(param)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// å¤šå±‚åŒ…è£…ï¼Œæ·»åŠ æ›´ä¸Šå±‚çš„ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"CallProcess: è°ƒç”¨Processå¤±è´¥ï¼š%w"</span>, err)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    err := CallProcess(<span class="hljs-number">-5</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// æ‰“å°å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ï¼ˆåŒ…å«æ‰€æœ‰å±‚çº§çš„ä¸Šä¸‹æ–‡ï¼‰</span>
        fmt.Printf(<span class="hljs-string">"æœ€ç»ˆé”™è¯¯ï¼š%v\n"</span>, err)

        <span class="hljs-comment">// ç”¨errors.Isåˆ¤æ–­åŸå§‹é”™è¯¯ç±»å‹</span>
        <span class="hljs-keyword">if</span> errors.Is(err, ErrInvalidParam) {
            fmt.Println(<span class="hljs-string">"åˆ¤æ–­ç»“æœï¼šé”™è¯¯é“¾ä¸­åŒ…å«ErrInvalidParam"</span>)
        }

        <span class="hljs-comment">// è§£åŒ…åŸå§‹é”™è¯¯</span>
        <span class="hljs-keyword">var</span> originalErr <span class="hljs-type">error</span>
        originalErr = err
        <span class="hljs-keyword">for</span> {
            unwrapped := errors.Unwrap(originalErr)
            <span class="hljs-keyword">if</span> unwrapped == <span class="hljs-literal">nil</span> {
                <span class="hljs-keyword">break</span>
            }
            originalErr = unwrapped
        }
        fmt.Printf(<span class="hljs-string">"åŸå§‹é”™è¯¯ï¼š%v\n"</span>, originalErr)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
æœ€ç»ˆé”™è¯¯ï¼šCallProcess: è°ƒç”¨Processå¤±è´¥ï¼šProcess: å‚æ•°param=-5ä¸åˆæ³•ï¼šå‚æ•°æ— æ•ˆ
åˆ¤æ–­ç»“æœï¼šé”™è¯¯é“¾ä¸­åŒ…å«ErrInvalidParam
åŸå§‹é”™è¯¯ï¼šå‚æ•°æ— æ•ˆ
</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>
<p>é€šè¿‡å¤šå±‚<code>%w</code>åŒ…è£…ï¼Œé”™è¯¯ä¿¡æ¯åŒ…å«äº†æ¯ä¸€å±‚çš„ä¸Šä¸‹æ–‡ï¼Œä¾¿äºé—®é¢˜å®šä½ï¼›</p>
</li>
<li>
<p>å³ä½¿ç»è¿‡å¤šå±‚åŒ…è£…ï¼Œ<code>errors.Is</code>ä»èƒ½å‡†ç¡®åˆ¤æ–­é”™è¯¯é“¾ä¸­æ˜¯å¦åŒ…å«åŸå§‹é”™è¯¯ï¼›</p>
</li>
<li>
<p><code>errors.Unwrap</code>å‡½æ•°å¯ä»¥é€å±‚è§£åŒ…é”™è¯¯ï¼Œç›´åˆ°è·å–æœ€åŸå§‹çš„é”™è¯¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-16">3.3 %wä¸å…¶ä»–æ ¼å¼åŒ–åŠ¨è¯çš„åŒºåˆ«</h3>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šæ··æ·†<code>%w</code>ä¸<code>%v</code>ã€<code>%s</code>ç­‰æ ¼å¼åŒ–åŠ¨è¯ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äºï¼š<strong>%wä¼šä¿ç•™åŸå§‹é”™è¯¯çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œå…¶ä»–åŠ¨è¯ä»…ä¿ç•™é”™è¯¯çš„å­—ç¬¦ä¸²ä¿¡æ¯</strong>ã€‚</p>
<h4 data-id="heading-17">3.3.1 ä»£ç ç¤ºä¾‹ï¼šå¯¹æ¯”%wä¸%v</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"errors"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-keyword">var</span> ErrTest = errors.New(<span class="hljs-string">"æµ‹è¯•é”™è¯¯"</span>)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç”¨%wåŒ…è£…é”™è¯¯</span>
    errW := fmt.Errorf(<span class="hljs-string">"ç”¨%%wåŒ…è£…ï¼š%w"</span>, ErrTest)
    <span class="hljs-comment">// ç”¨%væ‹¼æ¥é”™è¯¯</span>
    errV := fmt.Errorf(<span class="hljs-string">"ç”¨%%væ‹¼æ¥ï¼š%v"</span>, ErrTest)

    <span class="hljs-comment">// ç”¨errors.Isåˆ¤æ–­åŸå§‹é”™è¯¯</span>
    fmt.Printf(<span class="hljs-string">"errWåŒ…å«ErrTestï¼š%t\n"</span>, errors.Is(errW, ErrTest)) <span class="hljs-comment">// true</span>
    fmt.Printf(<span class="hljs-string">"errVåŒ…å«ErrTestï¼š%t\n"</span>, errors.Is(errV, ErrTest)) <span class="hljs-comment">// false</span>

    <span class="hljs-comment">// æ‰“å°é”™è¯¯ç±»å‹</span>
    fmt.Printf(<span class="hljs-string">"errWç±»å‹ï¼š%T\n"</span>, errW) <span class="hljs-comment">// *fmt.wrapErrorï¼ˆåŒ…è£…é”™è¯¯ç±»å‹ï¼‰</span>
    fmt.Printf(<span class="hljs-string">"errVç±»å‹ï¼š%T\n"</span>, errV) <span class="hljs-comment">// *errors.errorStringï¼ˆæ™®é€šé”™è¯¯ç±»å‹ï¼‰</span>
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
errWåŒ…å«ErrTestï¼štrue
errVåŒ…å«ErrTestï¼šfalse
errWç±»å‹ï¼š*fmt.wrapError
errVç±»å‹ï¼š*errors.errorString

</code></pre>
<p>ç»“è®ºï¼š</p>
<ul>
<li>
<p>å¦‚æœéœ€è¦ä¿ç•™åŸå§‹é”™è¯¯çš„ç±»å‹ä¿¡æ¯ï¼ˆä¾¿äºåç»­åˆ¤æ–­å’Œå¤„ç†ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨<code>%w</code>ï¼›</p>
</li>
<li>
<p>å¦‚æœä»…éœ€è¦å°†é”™è¯¯ä¿¡æ¯ä½œä¸ºå­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆæ— éœ€åç»­ç±»å‹åˆ¤æ–­ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>%v</code>æˆ–<code>%s</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">3.4 å®ç”¨æŠ€å·§ï¼šé”™è¯¯ä¸Šä¸‹æ–‡çš„è§„èŒƒå†™æ³•</h3>
<p>æ·»åŠ é”™è¯¯ä¸Šä¸‹æ–‡æ—¶ï¼Œåº”éµå¾ªâ€œè°å‡ºé”™+ä»€ä¹ˆæ“ä½œ+ä»€ä¹ˆå‚æ•°+åŸå§‹é”™è¯¯â€çš„æ ¼å¼ï¼Œä¾¿äºé—®é¢˜å®šä½ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// è§„èŒƒå†™æ³•</span>
<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡ï¼šæŸ¥è¯¢ç”¨æˆ·ï¼ˆID=%dï¼‰å¤±è´¥ï¼š%w"</span>, userID, err)

<span class="hljs-comment">// ä¸è§„èŒƒå†™æ³•ï¼ˆä¿¡æ¯æ¨¡ç³Šï¼‰</span>
<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥ï¼š%w"</span>, err)

</code></pre>
<h2 data-id="heading-19">å››ã€deferè¯­å¥çš„æ‰§è¡Œæ—¶æœºä¸ç”¨é€”</h2>
<p><code>defer</code>æ˜¯Goä¸­çš„å»¶è¿Ÿæ‰§è¡Œè¯­å¥ï¼Œç”¨äºå»¶è¿Ÿè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œç›´åˆ°åŒ…å«<code>defer</code>è¯­å¥çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼ˆè¿”å›ä¹‹å‰ï¼‰ã€‚<code>defer</code>çš„æ ¸å¿ƒç”¨é€”æ˜¯â€œèµ„æºæ¸…ç†â€ï¼Œå¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾é”ã€å…³é—­æ•°æ®åº“è¿æ¥ç­‰ï¼Œç¡®ä¿èµ„æºæ— è®ºå‡½æ•°æ­£å¸¸è¿”å›è¿˜æ˜¯å¼‚å¸¸è¿”å›éƒ½èƒ½è¢«æ­£ç¡®æ¸…ç†ã€‚</p>
<h3 data-id="heading-20">4.1 deferçš„æ‰§è¡Œæ—¶æœºä¸é¡ºåº</h3>
<p>æ ¸å¿ƒè§„åˆ™ï¼š</p>
<ul>
<li>
<p><code>defer</code>è¯­å¥åœ¨å®šä¹‰æ—¶ä¼šç«‹å³è®¡ç®—å‡½æ•°å‚æ•°çš„å€¼ï¼Œä½†å‡½æ•°ä½“çš„æ‰§è¡Œä¼šå»¶è¿Ÿåˆ°åŒ…å«<code>defer</code>çš„å‡½æ•°è¿”å›ä¹‹å‰ï¼›</p>
</li>
<li>
<p>å¤šä¸ª<code>defer</code>è¯­å¥æŒ‰â€œåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰â€çš„é¡ºåºæ‰§è¡Œï¼ˆæœ€åå®šä¹‰çš„<code>defer</code>æœ€å…ˆæ‰§è¡Œï¼‰ï¼›</p>
</li>
<li>
<p>å³ä½¿å‡½æ•°ä¸­å‡ºç°<code>return</code>ã€<code>panic</code>ç­‰ç»ˆæ­¢æ‰§è¡Œçš„æƒ…å†µï¼Œ<code>defer</code>è¯­å¥ä»ä¼šæ‰§è¡Œã€‚</p>
</li>
</ul>
<h4 data-id="heading-21">4.1.1 ä»£ç ç¤ºä¾‹ï¼šdeferçš„æ‰§è¡Œé¡ºåº</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œmainå‡½æ•°"</span>)

    <span class="hljs-comment">// å®šä¹‰å¤šä¸ªdeferè¯­å¥</span>
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"defer 1ï¼šæœ€å…ˆå®šä¹‰ï¼Œæœ€åæ‰§è¡Œ"</span>)
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"defer 2ï¼šä¸­é—´å®šä¹‰ï¼Œä¸­é—´æ‰§è¡Œ"</span>)
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"defer 3ï¼šæœ€åå®šä¹‰ï¼Œæœ€å…ˆæ‰§è¡Œ"</span>)

    <span class="hljs-comment">// deferå‡½æ•°å‚æ•°åœ¨å®šä¹‰æ—¶è®¡ç®—</span>
    x := <span class="hljs-number">10</span>
    <span class="hljs-keyword">defer</span> fmt.Printf(<span class="hljs-string">"defer 4ï¼šxçš„å€¼=%d\n"</span>, x) <span class="hljs-comment">// å‚æ•°x=10åœ¨å®šä¹‰æ—¶å·²ç¡®å®š</span>
    x = <span class="hljs-number">20</span>

    fmt.Println(<span class="hljs-string">"mainå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå‡†å¤‡è¿”å›"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
å¼€å§‹æ‰§è¡Œmainå‡½æ•°
mainå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå‡†å¤‡è¿”å›
defer 3ï¼šæœ€åå®šä¹‰ï¼Œæœ€å…ˆæ‰§è¡Œ
defer 2ï¼šä¸­é—´å®šä¹‰ï¼Œä¸­é—´æ‰§è¡Œ
defer 1ï¼šæœ€å…ˆå®šä¹‰ï¼Œæœ€åæ‰§è¡Œ
defer 4ï¼šxçš„å€¼=10

</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>
<p>ä¸‰ä¸ª<code>defer</code>æŒ‰â€œåè¿›å…ˆå‡ºâ€é¡ºåºæ‰§è¡Œï¼Œdefer 3æœ€å…ˆæ‰§è¡Œï¼Œdefer 1æœ€åæ‰§è¡Œï¼›</p>
</li>
<li>
<p>defer 4çš„å‚æ•°<code>x</code>åœ¨å®šä¹‰æ—¶å°±è®¡ç®—ä¸º10ï¼Œåç»­ä¿®æ”¹<code>x=20</code>ä¸ä¼šå½±å“deferå‡½æ•°çš„è¾“å‡ºã€‚</p>
</li>
</ul>
<h3 data-id="heading-22">4.2 deferçš„æ ¸å¿ƒç”¨é€”</h3>
<h4 data-id="heading-23">4.2.1 èµ„æºæ¸…ç†ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>ç”¨äºå…³é—­æ–‡ä»¶ã€é‡Šæ”¾é”ã€å…³é—­æ•°æ®åº“è¿æ¥ç­‰ï¼Œç¡®ä¿èµ„æºè¢«æ­£ç¡®é‡Šæ”¾ã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">readFile</span><span class="hljs-params">(filename <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
    file, err := os.Open(filename)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%w"</span>, err)
    }
    <span class="hljs-comment">// å»¶è¿Ÿå…³é—­æ–‡ä»¶ï¼šæ— è®ºå‡½æ•°æ­£å¸¸è¿”å›è¿˜æ˜¯é”™è¯¯è¿”å›ï¼Œéƒ½ä¼šæ‰§è¡Œfile.Close()</span>
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> errClose := file.Close(); errClose != <span class="hljs-literal">nil</span> {
            fmt.Printf(<span class="hljs-string">"å…³é—­æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, errClose)
        }
    }()

    <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰</span>
    <span class="hljs-keyword">var</span> buf [<span class="hljs-number">1024</span>]<span class="hljs-type">byte</span>
    n, err := file.Read(buf[:])
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"è¯»å–æ–‡ä»¶å¤±è´¥ï¼š%w"</span>, err)
    }

    fmt.Printf(<span class="hljs-string">"è¯»å–åˆ°çš„å†…å®¹ï¼š%s\n"</span>, buf[:n])
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    err := readFile(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼š%v\n"</span>, err)
    }
}

</code></pre>
<h4 data-id="heading-24">4.2.2 æ•è·å‡½æ•°è¿”å›å€¼ï¼ˆä¿®æ”¹è¿”å›å€¼ï¼‰</h4>
<p>deferå‡½æ•°å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹åŒ…å«å®ƒçš„å‡½æ•°çš„è¿”å›å€¼ï¼ˆéœ€æ³¨æ„è¿”å›å€¼çš„å‘½åï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// å‘½åè¿”å›å€¼å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calc</span><span class="hljs-params">()</span></span> (result <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å‘½åè¿”å›å€¼</span>
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            result = <span class="hljs-number">-1</span> <span class="hljs-comment">// é”™è¯¯æ—¶å°†è¿”å›å€¼resultè®¾ä¸º-1</span>
            fmt.Printf(<span class="hljs-string">"deferï¼šæ•è·é”™è¯¯ï¼Œå°†resultè®¾ä¸º%d\n"</span>, result)
        }
    }()

    x := <span class="hljs-number">10</span>
    y := <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> y == <span class="hljs-number">0</span> {
        err = fmt.Errorf(<span class="hljs-string">"é™¤æ•°ä¸èƒ½ä¸º0"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-comment">// æ­¤æ—¶ä¼šå…ˆæ‰§è¡Œdeferå‡½æ•°ï¼Œå†è¿”å›resultå’Œerr</span>
    }
    result = x / y
    <span class="hljs-keyword">return</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    res, err := calc()
    fmt.Printf(<span class="hljs-string">"è¿”å›ç»“æœï¼šres=%d, err=%v\n"</span>, res, err)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
deferï¼šæ•è·é”™è¯¯ï¼Œå°†resultè®¾ä¸º-1
è¿”å›ç»“æœï¼šres=-1, err=é™¤æ•°ä¸èƒ½ä¸º0

</code></pre>
<h4 data-id="heading-25">4.2.3 æ—¥å¿—è®°å½•ä¸æ€§èƒ½ç»Ÿè®¡</h4>
<p>ç”¨äºè®°å½•å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ã€å…¥å‚å‡ºå‚ç­‰ä¿¡æ¯ï¼Œä¾¿äºæ€§èƒ½åˆ†æå’Œé—®é¢˜å®šä½ã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-comment">// æ€§èƒ½ç»Ÿè®¡è£…é¥°å™¨ï¼šè®°å½•å‡½æ•°æ‰§è¡Œæ—¶é—´</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">withTimer</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    start := time.Now()
    fmt.Printf(<span class="hljs-string">"å‡½æ•°%så¼€å§‹æ‰§è¡Œ\n"</span>, name)
    <span class="hljs-comment">// è¿”å›deferå‡½æ•°ï¼Œç”¨äºè®°å½•ç»“æŸæ—¶é—´</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        duration := time.Since(start)
        fmt.Printf(<span class="hljs-string">"å‡½æ•°%sæ‰§è¡Œå®Œæ¯•ï¼Œè€—æ—¶ï¼š%v\n"</span>, name, duration)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">complexTask</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œæ€§èƒ½ç»Ÿè®¡å‡½æ•°</span>
    <span class="hljs-keyword">defer</span> withTimer(<span class="hljs-string">"complexTask"</span>)()

    <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚ä»»åŠ¡</span>
    time.Sleep(<span class="hljs-number">2</span> * time.Second)
    fmt.Println(<span class="hljs-string">"å¤æ‚ä»»åŠ¡æ‰§è¡Œä¸­..."</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    complexTask()
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
å‡½æ•°complexTaskå¼€å§‹æ‰§è¡Œ
å¤æ‚ä»»åŠ¡æ‰§è¡Œä¸­...
å‡½æ•°complexTaskæ‰§è¡Œå®Œæ¯•ï¼Œè€—æ—¶ï¼š2.000123456s

</code></pre>
<h3 data-id="heading-26">4.3 deferçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p><strong>é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨defer</strong>ï¼šå¾ªç¯ä¸­å®šä¹‰çš„deferä¼šç­‰åˆ°å¾ªç¯æ‰€åœ¨çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•åæ‰æ‰¹é‡æ‰§è¡Œï¼Œå¯èƒ½å¯¼è‡´èµ„æºæ³„éœ²ï¼ˆå¦‚å¤§é‡æ–‡ä»¶å¥æŸ„æœªåŠæ—¶å…³é—­ï¼‰ã€‚è§£å†³æ–¹æ¡ˆï¼šå°†å¾ªç¯ä½“å†…éƒ¨çš„é€»è¾‘å°è£…ä¸ºå‡½æ•°ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨deferï¼›</p>
</li>
<li>
<p><strong>æ³¨æ„deferå‡½æ•°çš„å‚æ•°è®¡ç®—æ—¶æœº</strong>ï¼šdeferå‡½æ•°çš„å‚æ•°åœ¨å®šä¹‰æ—¶å°±å·²è®¡ç®—ï¼Œåç»­ä¿®æ”¹å‚æ•°å˜é‡ä¸ä¼šå½±å“deferå‡½æ•°çš„æ‰§è¡Œï¼›</p>
</li>
<li>
<p><strong>deferå‡½æ•°çš„æ‰§è¡Œé¡ºåº</strong>ï¼šå¤šä¸ªdeferæŒ‰â€œåè¿›å…ˆå‡ºâ€æ‰§è¡Œï¼Œè®¾è®¡æ—¶éœ€æ³¨æ„é¡ºåºï¼ˆå¦‚å…ˆé”åè§£é”ï¼Œdeferè§£é”åº”ç´§è·Ÿé”çš„è·å–ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é¿å…deferå‡½æ•°ä¸­äº§ç”Ÿé”™è¯¯</strong>ï¼šdeferå‡½æ•°çš„é”™è¯¯ä¸ä¼šå½±å“ä¸»å‡½æ•°çš„æ‰§è¡Œï¼Œä¹Ÿæ— æ³•è¢«ä¸»å‡½æ•°æ•è·ï¼Œåº”åœ¨deferå‡½æ•°å†…éƒ¨å¤„ç†è‡ªèº«çš„é”™è¯¯ï¼ˆå¦‚å…³é—­æ–‡ä»¶çš„é”™è¯¯ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-27">4.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fref%2Fspec%23Defer_statements" target="_blank" title="https://go.dev/ref/spec#Defer_statements" ref="nofollow noopener noreferrer">Defer statements</a></li>
</ul>
<h2 data-id="heading-28">äº”ã€panicä¸recoverçš„å¼‚å¸¸æ¢å¤æœºåˆ¶</h2>
<p>åœ¨Goä¸­ï¼Œ<code>panic</code>ç”¨äºè§¦å‘è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä¼šç»ˆæ­¢å½“å‰å‡½æ•°çš„æ‰§è¡Œï¼Œå¹¶å‘ä¸Šå±‚å‡½æ•°ä¼ æ’­ï¼Œç›´åˆ°ç¨‹åºå´©æºƒï¼ˆé™¤éè¢«<code>recover</code>æ•è·ï¼‰ã€‚<code>recover</code>ç”¨äºæ•è·<code>panic</code>è§¦å‘çš„å¼‚å¸¸ï¼Œæ¢å¤ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œã€‚</p>
<p>æ ¸å¿ƒåŸåˆ™ï¼š<strong>panicç”¨äºå¤„ç†ä¸å¯æ¢å¤çš„è‡´å‘½é”™è¯¯ï¼Œrecoverä»…ç”¨äºåœ¨deferä¸­æ•è·panicï¼Œæ¢å¤ç¨‹åºæ‰§è¡Œ</strong>ã€‚Goä¸é¼“åŠ±ä½¿ç”¨panic/recoveræ›¿ä»£æ­£å¸¸çš„é”™è¯¯å¤„ç†ï¼ˆå¦‚å‚æ•°æ ¡éªŒé”™è¯¯åº”è¿”å›errorï¼Œè€Œéè§¦å‘panicï¼‰ã€‚</p>
<h3 data-id="heading-29">5.1 panicçš„è§¦å‘ä¸ä¼ æ’­æœºåˆ¶</h3>
<p>è§¦å‘panicçš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// æ–¹å¼1ï¼šç›´æ¥è°ƒç”¨panicï¼Œå‚æ•°ä¸ºé”™è¯¯ä¿¡æ¯</span>
<span class="hljs-built_in">panic</span>(<span class="hljs-string">"è‡´å‘½é”™è¯¯ï¼šxxx"</span>)

<span class="hljs-comment">// æ–¹å¼2ï¼šè°ƒç”¨å†…ç½®å‡½æ•°è§¦å‘çš„panicï¼ˆå¦‚æ•°ç»„è¶Šç•Œã€ç©ºæŒ‡é’ˆå¼•ç”¨ï¼‰</span>
<span class="hljs-keyword">var</span> arr [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>
fmt.Println(arr[<span class="hljs-number">10</span>]) <span class="hljs-comment">// æ•°ç»„è¶Šç•Œï¼Œè§¦å‘panic</span>

</code></pre>
<p>ä¼ æ’­æœºåˆ¶ï¼š</p>
<ul>
<li>
<p>å½“å‡½æ•°ä¸­è§¦å‘panicæ—¶ï¼Œå‡½æ•°ä¼šç«‹å³åœæ­¢æ‰§è¡Œå½“å‰é€»è¾‘ï¼Œå¼€å§‹æ‰§è¡Œå·²å®šä¹‰çš„deferè¯­å¥ï¼›</p>
</li>
<li>
<p>deferè¯­å¥æ‰§è¡Œå®Œæ¯•åï¼Œå‡½æ•°ä¼šç»ˆæ­¢ï¼Œå¹¶å°†panicå‘ä¸Šå±‚è°ƒç”¨å‡½æ•°ä¼ æ’­ï¼›</p>
</li>
<li>
<p>å¦‚æœä¸Šå±‚å‡½æ•°ä¹Ÿæ²¡æœ‰æ•è·panicï¼Œpanicä¼šç»§ç»­å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°mainå‡½æ•°ï¼Œæœ€ç»ˆå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
</li>
</ul>
<h4 data-id="heading-30">5.1.1 ä»£ç ç¤ºä¾‹ï¼španicçš„ä¼ æ’­ä¸ç¨‹åºå´©æºƒ</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">funcA</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥funcA"</span>)
    funcB()
    fmt.Println(<span class="hljs-string">"é€€å‡ºfuncAï¼ˆä¸ä¼šæ‰§è¡Œï¼‰"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">funcB</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥funcB"</span>)
    <span class="hljs-comment">// è§¦å‘panic</span>
    <span class="hljs-built_in">panic</span>(<span class="hljs-string">"funcBä¸­å‘ç”Ÿè‡´å‘½é”™è¯¯"</span>)
    fmt.Println(<span class="hljs-string">"é€€å‡ºfuncBï¼ˆä¸ä¼šæ‰§è¡Œï¼‰"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥main"</span>)
    funcA()
    fmt.Println(<span class="hljs-string">"é€€å‡ºmainï¼ˆä¸ä¼šæ‰§è¡Œï¼‰"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼ˆç¨‹åºå´©æºƒï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">
è¿›å…¥main
è¿›å…¥funcA
è¿›å…¥funcB
panic: funcBä¸­å‘ç”Ÿè‡´å‘½é”™è¯¯

goroutine 1 [running]:
main.funcB()
        /path/to/your/file.go:13 +0x70
main.funcA()
        /path/to/your/file.go:7 +0x25
main.main()
        /path/to/your/file.go:18 +0x25
exit status 2

</code></pre>
<h3 data-id="heading-31">5.2 recoverçš„ä½¿ç”¨ä¸å¼‚å¸¸æ¢å¤</h3>
<p>recoverçš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>
<p>recoveråªèƒ½åœ¨deferå‡½æ•°ä¸­ä½¿ç”¨ï¼Œåœ¨édeferå‡½æ•°ä¸­è°ƒç”¨recoverä¼šè¿”å›nilï¼Œæ— æ³•æ•è·panicï¼›</p>
</li>
<li>
<p>recoverä¼šæ•è·å½“å‰goroutineä¸­çš„panicï¼Œè¿”å›panicçš„å‚æ•°ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰ï¼›</p>
</li>
<li>
<p>æ•è·æˆåŠŸåï¼Œç¨‹åºä¼šä»è§¦å‘panicçš„å‡½æ•°çš„ä¸Šå±‚å‡½æ•°ç»§ç»­æ‰§è¡Œï¼Œä¸å†å‘ä¸Šä¼ æ’­panicã€‚</p>
</li>
</ul>
<h4 data-id="heading-32">5.2.1 ä»£ç ç¤ºä¾‹ï¼šç”¨recoveræ•è·panicï¼Œæ¢å¤ç¨‹åºæ‰§è¡Œ</h4>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">funcA</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥funcA"</span>)
    <span class="hljs-comment">// å®šä¹‰deferå‡½æ•°ï¼Œç”¨recoveræ•è·panic</span>
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {
            fmt.Printf(<span class="hljs-string">"funcAä¸­æ•è·åˆ°panicï¼š%v\n"</span>, r)
        }
    }()
    funcB()
    fmt.Println(<span class="hljs-string">"é€€å‡ºfuncAï¼ˆä¼šæ‰§è¡Œå—ï¼Ÿçœ‹funcBæ˜¯å¦è§¦å‘panicï¼‰"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">funcB</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥funcB"</span>)
    <span class="hljs-comment">// è§¦å‘panic</span>
    <span class="hljs-built_in">panic</span>(<span class="hljs-string">"funcBä¸­å‘ç”Ÿè‡´å‘½é”™è¯¯"</span>)
    fmt.Println(<span class="hljs-string">"é€€å‡ºfuncBï¼ˆä¸ä¼šæ‰§è¡Œï¼‰"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"è¿›å…¥main"</span>)
    funcA()
    fmt.Println(<span class="hljs-string">"é€€å‡ºmainï¼ˆä¼šæ‰§è¡Œï¼Œå› ä¸ºpanicè¢«æ•è·ï¼‰"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
è¿›å…¥main
è¿›å…¥funcA
è¿›å…¥funcB
funcAä¸­æ•è·åˆ°panicï¼šfuncBä¸­å‘ç”Ÿè‡´å‘½é”™è¯¯
é€€å‡ºmainï¼ˆä¼šæ‰§è¡Œï¼Œå› ä¸ºpanicè¢«æ•è·ï¼‰

</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>
<p>åœ¨funcAä¸­å®šä¹‰äº†deferå‡½æ•°ï¼Œå†…éƒ¨è°ƒç”¨recoveræ•è·panicï¼›</p>
</li>
<li>
<p>funcBè§¦å‘panicåï¼Œä¼šå…ˆæ‰§è¡ŒfuncAä¸­å·²å®šä¹‰çš„deferå‡½æ•°ï¼Œrecoveræ•è·åˆ°panicï¼›</p>
</li>
<li>
<p>æ•è·æˆåŠŸåï¼Œç¨‹åºä¸ä¼šå´©æºƒï¼Œè€Œæ˜¯ä»funcAæ‰§è¡Œå®Œæ¯•åç»§ç»­æ‰§è¡Œmainå‡½æ•°çš„åç»­é€»è¾‘ã€‚</p>
</li>
</ul>
<h3 data-id="heading-33">5.3 panicä¸errorçš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯</h3>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>error</th><th>panic</th></tr></thead><tbody><tr><td>æœ¬è´¨</td><td>æ¥å£ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå¯é¢„æœŸçš„é”™è¯¯çŠ¶æ€</td><td>è¿è¡Œæ—¶å¼‚å¸¸ï¼Œç”¨äºè¡¨ç¤ºä¸å¯é¢„æœŸçš„è‡´å‘½é”™è¯¯</td></tr><tr><td>å¤„ç†æ–¹å¼</td><td>æ˜¾å¼è¿”å›ï¼Œä¸»åŠ¨æ£€æŸ¥å¹¶å¤„ç†</td><td>è§¦å‘åç»ˆæ­¢å‡½æ•°æ‰§è¡Œï¼Œéœ€é€šè¿‡recoveræ•è·æ¢å¤</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å¯é¢„æœŸçš„é”™è¯¯ï¼ˆå¦‚å‚æ•°æ— æ•ˆã€æ–‡ä»¶ä¸å­˜åœ¨ã€ç½‘ç»œè¶…æ—¶ï¼‰</td><td>ä¸å¯é¢„æœŸçš„è‡´å‘½é”™è¯¯ï¼ˆå¦‚æ•°ç»„è¶Šç•Œã€ç©ºæŒ‡é’ˆå¼•ç”¨ã€é…ç½®æ–‡ä»¶ç¼ºå¤±å¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œï¼‰</td></tr><tr><td>ç¨‹åºå½±å“</td><td>ä¸å½±å“ç¨‹åºç»§ç»­æ‰§è¡Œï¼Œä»…å½“å‰å‡½æ•°é€»è¾‘å¯èƒ½ä¸­æ–­</td><td>ä¸æ•è·åˆ™å¯¼è‡´ç¨‹åºå´©æºƒ</td></tr></tbody></table>
<h3 data-id="heading-34">5.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fref%2Fspec%23Handling_panics" target="_blank" title="https://go.dev/ref/spec#Handling_panics" ref="nofollow noopener noreferrer">Handling panics</a></li>
</ul>
<h2 data-id="heading-35">å…­ã€deferã€panicã€recoverååŒä½¿ç”¨</h2>
<p>åœ¨Goä¸­ï¼Œdeferã€panicã€recoverä¸‰è€…é€šå¸¸ååŒä½¿ç”¨ï¼Œæ„æˆâ€œå¼‚å¸¸æ•è·ä¸æ¢å¤â€çš„å®Œæ•´æœºåˆ¶ã€‚æ ¸å¿ƒæ¨¡å¼æ˜¯ï¼š<strong>åœ¨å¯èƒ½è§¦å‘panicçš„å‡½æ•°ä¸­ï¼Œé€šè¿‡deferæ³¨å†Œrecoverå‡½æ•°ï¼Œæ•è·panicå¹¶æ¢å¤ç¨‹åºæ‰§è¡Œï¼ŒåŒæ—¶è®°å½•é”™è¯¯ä¿¡æ¯</strong>ã€‚</p>
<p>è¿™ç§æ¨¡å¼å¹¿æ³›åº”ç”¨äºéœ€è¦ä¿è¯ç¨‹åºç¨³å®šæ€§çš„åœºæ™¯ï¼ˆå¦‚WebæœåŠ¡çš„è¯·æ±‚å¤„ç†ã€åå°ä»»åŠ¡çš„å¾ªç¯æ‰§è¡Œç­‰ï¼‰ï¼Œç¡®ä¿å•ä¸ªè¯·æ±‚æˆ–ä»»åŠ¡çš„å¼‚å¸¸ä¸ä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡å´©æºƒã€‚</p>
<h3 data-id="heading-36">6.1 æ ¸å¿ƒååŒæ¨¡å¼</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-function"><span class="hljs-keyword">func</span> å¯èƒ½è§¦å‘<span class="hljs-title">panic</span>çš„å‡½æ•°<span class="hljs-params">()</span></span> (err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. å®šä¹‰deferå‡½æ•°ï¼Œç”¨recoveræ•è·panic</span>
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {
            <span class="hljs-comment">// 2. æ•è·åˆ°panicï¼Œå°†panicä¿¡æ¯è½¬ä¸ºerrorè¿”å›</span>
            err = fmt.Errorf(<span class="hljs-string">"å‘ç”Ÿå¼‚å¸¸ï¼š%v"</span>, r)
            <span class="hljs-comment">// 3. è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆåŒ…å«å †æ ˆä¿¡æ¯ï¼‰</span>
            log.Printf(<span class="hljs-string">"panic recovered: %v, stack: %s"</span>, r, debug.Stack())
        }
    }()

    <span class="hljs-comment">// 4. æ‰§è¡Œå¯èƒ½è§¦å‘panicçš„é€»è¾‘</span>
    å¯èƒ½è§¦å‘<span class="hljs-built_in">panic</span>çš„æ“ä½œ()

    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

</code></pre>
<h3 data-id="heading-37">6.2 ä»£ç ç¤ºä¾‹ï¼šWebæœåŠ¡ä¸­çš„å¼‚å¸¸æ•è·</h3>
<p>åœ¨WebæœåŠ¡ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è¿è¡Œåœ¨ç‹¬ç«‹çš„goroutineä¸­ã€‚å¦‚æœæŸä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­è§¦å‘panicï¼Œæœªæ•è·ä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡å´©æºƒã€‚é€šè¿‡defer+recoveræ•è·æ¯ä¸ªè¯·æ±‚çš„panicï¼Œå¯ç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"debug/stack"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"net/http"</span>
)

<span class="hljs-comment">// å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶ï¼šæ•è·è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­çš„panic</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">recoverMiddleware</span><span class="hljs-params">(next http.HandlerFunc)</span></span> http.HandlerFunc {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
        <span class="hljs-comment">// æ³¨å†Œdeferå‡½æ•°ï¼Œæ•è·panic</span>
        <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {
                <span class="hljs-comment">// è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆåŒ…å«å †æ ˆä¿¡æ¯ï¼‰</span>
                log.Printf(<span class="hljs-string">"è¯·æ±‚å¤„ç†å¼‚å¸¸ï¼š%vï¼Œè¯·æ±‚è·¯å¾„ï¼š%sï¼Œå †æ ˆä¿¡æ¯ï¼š%s"</span>,
                    r, r.URL.Path, stack.Caller(<span class="hljs-number">0</span>))
                <span class="hljs-comment">// å‘å®¢æˆ·ç«¯è¿”å›500é”™è¯¯</span>
                http.Error(w, <span class="hljs-string">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"</span>, http.StatusInternalServerError)
            }
        }()
        <span class="hljs-comment">// æ‰§è¡Œåç»­çš„è¯·æ±‚å¤„ç†é€»è¾‘</span>
        next(w, r)
    }
}

<span class="hljs-comment">// æµ‹è¯•æ¥å£ï¼šæ•…æ„è§¦å‘panic</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼Œè§¦å‘panic</span>
    <span class="hljs-built_in">panic</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å¼‚å¸¸ï¼Œæ— æ³•æŸ¥è¯¢æ•°æ®"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ³¨å†Œè·¯ç”±ï¼Œä½¿ç”¨å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶</span>
    http.HandleFunc(<span class="hljs-string">"/test"</span>, recoverMiddleware(testHandler))

    log.Println(<span class="hljs-string">"æœåŠ¡å¯åŠ¨ï¼Œç›‘å¬ç«¯å£8080"</span>)
    err := http.ListenAndServe(<span class="hljs-string">":8080"</span>, <span class="hljs-literal">nil</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        log.Fatalf(<span class="hljs-string">"æœåŠ¡å¯åŠ¨å¤±è´¥ï¼š%v"</span>, err)
    }
}

</code></pre>
<p>æµ‹è¯•æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>å¯åŠ¨æœåŠ¡ï¼Œè®¿é—®<code>http://localhost:8080/test</code>ï¼›</p>
</li>
<li>
<p>å®¢æˆ·ç«¯ä¼šæ”¶åˆ°<code>500 Internal Server Error</code>å“åº”ï¼›</p>
</li>
<li>
<p>æœåŠ¡ç«¯æ—¥å¿—ä¼šè®°å½•panicä¿¡æ¯å’Œå †æ ˆä¿¡æ¯ï¼Œä½†æœåŠ¡ä¸ä¼šå´©æºƒï¼Œä»å¯å¤„ç†å…¶ä»–è¯·æ±‚ã€‚</p>
</li>
</ol>
<h3 data-id="heading-38">6.3 è¿›é˜¶ç¤ºä¾‹ï¼šæ‰¹é‡ä»»åŠ¡å¤„ç†ä¸­çš„å¼‚å¸¸éš”ç¦»</h3>
<p>åœ¨æ‰¹é‡å¤„ç†ä»»åŠ¡æ—¶ï¼Œå•ä¸ªä»»åŠ¡çš„å¼‚å¸¸ä¸åº”å½±å“å…¶ä»–ä»»åŠ¡çš„æ‰§è¡Œã€‚é€šè¿‡defer+recoverå¯å®ç°å¼‚å¸¸éš”ç¦»ï¼Œç¡®ä¿æ‰¹é‡ä»»åŠ¡çš„ç¨³å®šæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"debug/stack"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"log"</span>
)

<span class="hljs-comment">// å¤„ç†å•ä¸ªä»»åŠ¡ï¼šå¯èƒ½è§¦å‘panic</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processTask</span><span class="hljs-params">(taskID <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {
            <span class="hljs-comment">// æ•è·panicï¼Œè½¬ä¸ºerrorè¿”å›</span>
            log.Printf(<span class="hljs-string">"å¤„ç†ä»»åŠ¡%då¼‚å¸¸ï¼š%vï¼Œå †æ ˆä¿¡æ¯ï¼š%s"</span>, taskID, r, stack.Caller(<span class="hljs-number">0</span>))
        }
    }()

    <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡å¤„ç†é€»è¾‘</span>
    <span class="hljs-keyword">if</span> taskID == <span class="hljs-number">3</span> {
        <span class="hljs-built_in">panic</span>(fmt.Sprintf(<span class="hljs-string">"ä»»åŠ¡%dæ•°æ®å¼‚å¸¸"</span>, taskID))
    }

    fmt.Printf(<span class="hljs-string">"ä»»åŠ¡%då¤„ç†æˆåŠŸ\n"</span>, taskID)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// æ‰¹é‡å¤„ç†ä»»åŠ¡ï¼šå¼‚å¸¸éš”ç¦»ï¼Œå•ä¸ªä»»åŠ¡å¤±è´¥ä¸å½±å“å…¶ä»–ä»»åŠ¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">batchProcessTasks</span><span class="hljs-params">(taskIDs []<span class="hljs-type">int</span>)</span></span> {
    <span class="hljs-keyword">for</span> _, id := <span class="hljs-keyword">range</span> taskIDs {
        err := processTask(id)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            log.Printf(<span class="hljs-string">"ä»»åŠ¡%då¤„ç†å¤±è´¥ï¼š%v"</span>, id, err)
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ‰¹é‡ä»»åŠ¡IDåˆ—è¡¨</span>
    taskIDs := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
    fmt.Println(<span class="hljs-string">"å¼€å§‹æ‰¹é‡å¤„ç†ä»»åŠ¡"</span>)
    batchProcessTasks(taskIDs)
    fmt.Println(<span class="hljs-string">"æ‰¹é‡å¤„ç†ä»»åŠ¡ç»“æŸ"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-text" lang="text">
å¼€å§‹æ‰¹é‡å¤„ç†ä»»åŠ¡
ä»»åŠ¡1å¤„ç†æˆåŠŸ
ä»»åŠ¡2å¤„ç†æˆåŠŸ
2024/05/20 10:00:00 å¤„ç†ä»»åŠ¡3å¼‚å¸¸ï¼šä»»åŠ¡3æ•°æ®å¼‚å¸¸ï¼Œå †æ ˆä¿¡æ¯ï¼š[0x49a2b0 0x49a8c0 0x49a9a0 0x4c7e60 0x4c9a80 0x4f5f80 0x5252c0]
ä»»åŠ¡4å¤„ç†æˆåŠŸ
ä»»åŠ¡5å¤„ç†æˆåŠŸ
æ‰¹é‡å¤„ç†ä»»åŠ¡ç»“æŸ

</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>
<p>ä»»åŠ¡3è§¦å‘panicï¼Œä½†è¢«processTaskä¸­çš„defer+recoveræ•è·ï¼›</p>
</li>
<li>
<p>å…¶ä»–ä»»åŠ¡ï¼ˆ1ã€2ã€4ã€5ï¼‰ä¸å—å½±å“ï¼Œæ­£å¸¸å¤„ç†å®Œæˆï¼›</p>
</li>
<li>
<p>æ‰¹é‡å¤„ç†ä»»åŠ¡æ­£å¸¸ç»“æŸï¼Œå®ç°äº†å¼‚å¸¸éš”ç¦»ã€‚</p>
</li>
</ul>
<h3 data-id="heading-39">6.4 ååŒä½¿ç”¨çš„æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p><strong>recoverå¿…é¡»åœ¨deferä¸­ä½¿ç”¨</strong>ï¼šédeferå‡½æ•°ä¸­çš„recoveræ— æ³•æ•è·panicï¼›</p>
</li>
<li>
<p><strong>deferå¿…é¡»åœ¨å¯èƒ½è§¦å‘panicçš„é€»è¾‘ä¹‹å‰å®šä¹‰</strong>ï¼šå¦‚æœdeferå®šä¹‰åœ¨panicä¹‹åï¼Œdeferå‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œæ— æ³•æ•è·panicï¼›</p>
</li>
<li>
<p><strong>é¿å…è¿‡åº¦ä½¿ç”¨recover</strong>ï¼šrecoverä»…ç”¨äºæ•è·ä¸å¯é¢„æœŸçš„è‡´å‘½é”™è¯¯ï¼Œä¸åº”ç”¨äºå¤„ç†å¯é¢„æœŸçš„ä¸šåŠ¡é”™è¯¯ï¼ˆå¦‚å‚æ•°æ— æ•ˆåº”è¿”å›errorï¼‰ï¼›</p>
</li>
<li>
<p><strong>æ•è·panicåå¿…é¡»è®°å½•æ—¥å¿—</strong>ï¼španicé€šå¸¸è¡¨ç¤ºä¸¥é‡é”™è¯¯ï¼Œéœ€è¯¦ç»†è®°å½•é”™è¯¯ä¿¡æ¯å’Œå †æ ˆä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜å®šä½ï¼›</p>
</li>
<li>
<p><strong>recoveråªèƒ½æ•è·å½“å‰goroutineçš„panic</strong>ï¼šæ— æ³•æ•è·å…¶ä»–goroutineè§¦å‘çš„panicã€‚</p>
</li>
</ul>
<h2 data-id="heading-40">ä¸ƒã€é”™è¯¯æ—¥å¿—è®°å½•ä¸ä¸Šä¸‹æ–‡ä¼ é€’</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé”™è¯¯å¤„ç†çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€æ˜¯â€œå¿«é€Ÿå®šä½é—®é¢˜â€ã€‚è¿™éœ€è¦æˆ‘ä»¬åœ¨è®°å½•é”™è¯¯æ—¥å¿—æ—¶ï¼Œä¸ä»…è¦è®°å½•é”™è¯¯ä¿¡æ¯æœ¬èº«ï¼Œè¿˜è¦ä¼ é€’è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚è¯·æ±‚IDã€ç”¨æˆ·IDã€å‡½æ•°è°ƒç”¨æ ˆã€å‚æ•°ä¿¡æ¯ç­‰ï¼‰ã€‚åŒæ—¶ï¼Œåœ¨å¤šå±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œé”™è¯¯ä¸Šä¸‹æ–‡çš„ä¼ é€’ä¹Ÿè‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-41">7.1 é”™è¯¯æ—¥å¿—åº”åŒ…å«çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</h4>
<p>ä¸€ä»½é«˜è´¨é‡çš„é”™è¯¯æ—¥å¿—åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p><strong>åŸºç¡€ä¿¡æ¯</strong>ï¼šæ—¶é—´æˆ³ã€æ—¥å¿—çº§åˆ«ï¼ˆERROR/WARN/INFOï¼‰ã€é”™è¯¯ä¿¡æ¯ï¼›</p>
</li>
<li>
<p><strong>ä¸šåŠ¡ä¸Šä¸‹æ–‡</strong>ï¼šè¯·æ±‚IDã€ç”¨æˆ·IDã€æ¥å£åã€å‚æ•°å€¼ã€æ“ä½œç±»å‹ï¼›</p>
</li>
<li>
<p><strong>æŠ€æœ¯ä¸Šä¸‹æ–‡</strong>ï¼šå‡½æ•°è°ƒç”¨æ ˆã€goroutine IDã€æœåŠ¡å™¨IPã€è¿›ç¨‹IDï¼›</p>
</li>
<li>
<p><strong>å…³è”ä¿¡æ¯</strong>ï¼šä¸Šä¸‹æ¸¸æœåŠ¡è°ƒç”¨è®°å½•ã€æ•°æ®åº“SQLè¯­å¥ã€ç¼“å­˜é”®å€¼ã€‚</p>
</li>
</ul>
<h4 data-id="heading-42">7.2 æ—¥å¿—å·¥å…·é€‰å‹ä¸æœ€ä½³å®è·µ</h4>
<p>Go ç”Ÿæ€ä¸­æœ‰å¾ˆå¤šæˆç†Ÿçš„æ—¥å¿—åº“ï¼Œæ¨èä½¿ç”¨æ”¯æŒç»“æ„åŒ–æ—¥å¿—ã€ä¸Šä¸‹æ–‡ä¼ é€’çš„åº“ï¼š</p>
<ul>
<li>
<p><strong>æ ‡å‡†åº“</strong>ï¼š<code>log</code> åŒ…ï¼ˆåŸºç¡€åŠŸèƒ½ï¼Œæ— ç»“æ„åŒ–æ—¥å¿—ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹åº“</strong>ï¼š<code>zap</code>ï¼ˆé«˜æ€§èƒ½ã€ç»“æ„åŒ–æ—¥å¿—ï¼ŒUber å¼€æºï¼‰ã€<code>logrus</code>ï¼ˆæ˜“ç”¨æ€§å¼ºï¼Œç¤¾åŒºæ´»è·ƒï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-43">ä»£ç ç¤ºä¾‹ï¼šä½¿ç”¨ zap è®°å½•å¸¦ä¸Šä¸‹æ–‡çš„é”™è¯¯æ—¥å¿—</h5>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"go.uber.org/zap"</span>
    <span class="hljs-string">"go.uber.org/zap/zapcore"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆå§‹åŒ– zap æ—¥å¿—ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Production é…ç½®ï¼‰</span>
    logger, _ := zap.NewProduction(zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))
    <span class="hljs-keyword">defer</span> logger.Sync() <span class="hljs-comment">// ç¡®ä¿æ—¥å¿—åˆ·ç›˜</span>

    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡é”™è¯¯</span>
    userID := <span class="hljs-string">"1001"</span>
    err := queryUser(userID)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// è®°å½•å¸¦ä¸Šä¸‹æ–‡çš„é”™è¯¯æ—¥å¿—</span>
        logger.Error(
            <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥"</span>,
            zap.String(<span class="hljs-string">"user_id"</span>, userID),
            zap.Error(err),
            zap.String(<span class="hljs-string">"operation"</span>, <span class="hljs-string">"user_query"</span>),
        )
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">queryUser</span><span class="hljs-params">(userID <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢é”™è¯¯</span>
    <span class="hljs-keyword">return</span> zap.NewError(<span class="hljs-string">"æ•°æ®åº“è¿æ¥è¶…æ—¶"</span>)
}
</code></pre>
<p><strong>æ—¥å¿—è¾“å‡ºï¼ˆç»“æ„åŒ– JSON æ ¼å¼ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-JSON" lang="JSON">
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ts"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1716234567.890</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"caller"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main/main.go:18"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"user_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ•°æ®åº“è¿æ¥è¶…æ—¶"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"operation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user_query"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"stacktrace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main.queryUser\n\t/path/to/main.go:25\nmain.main\n\t/path/to/main.go:18"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-44">7.3 åŸºäº context ä¼ é€’é”™è¯¯ä¸Šä¸‹æ–‡</h4>
<p>åœ¨ Go ä¸­ï¼Œ<code>context.Context</code> æ˜¯ä¼ é€’è¯·æ±‚çº§ä¸Šä¸‹æ–‡çš„æ ‡å‡†æ–¹å¼ï¼Œå¯ç”¨äºæºå¸¦è¯·æ±‚ IDã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼Œæ–¹ä¾¿åœ¨é”™è¯¯å‘ç”Ÿæ—¶å…³è”ä¸Šä¸‹æ–‡ã€‚</p>
<h5 data-id="heading-45">ä»£ç ç¤ºä¾‹ï¼šcontext ä¼ é€’è¯·æ±‚ä¸Šä¸‹æ–‡</h5>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"context"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"go.uber.org/zap"</span>
)

<span class="hljs-comment">// å®šä¹‰ä¸Šä¸‹æ–‡ key ç±»å‹ï¼ˆé¿å…å‘½åå†²çªï¼‰</span>
<span class="hljs-keyword">type</span> ctxKey <span class="hljs-type">string</span>
<span class="hljs-keyword">const</span> (
    reqIDKey ctxKey = <span class="hljs-string">"req_id"</span>
    userIDKey ctxKey = <span class="hljs-string">"user_id"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    logger, _ := zap.NewProduction()
    <span class="hljs-keyword">defer</span> logger.Sync()

    <span class="hljs-comment">// åˆå§‹åŒ–è¯·æ±‚ä¸Šä¸‹æ–‡</span>
    ctx := context.WithValue(context.Background(), reqIDKey, <span class="hljs-string">"req-20240520-001"</span>)
    ctx = context.WithValue(ctx, userIDKey, <span class="hljs-string">"1001"</span>)

    <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡å‡½æ•°</span>
    err := processOrder(ctx, <span class="hljs-string">"order-001"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡æå–ä¿¡æ¯ï¼Œè®°å½•æ—¥å¿—</span>
        reqID := ctx.Value(reqIDKey).(<span class="hljs-type">string</span>)
        userID := ctx.Value(userIDKey).(<span class="hljs-type">string</span>)
        logger.Error(
            <span class="hljs-string">"å¤„ç†è®¢å•å¤±è´¥"</span>,
            zap.String(<span class="hljs-string">"req_id"</span>, reqID),
            zap.String(<span class="hljs-string">"user_id"</span>, userID),
            zap.String(<span class="hljs-string">"order_id"</span>, <span class="hljs-string">"order-001"</span>),
            zap.Error(err),
        )
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processOrder</span><span class="hljs-params">(ctx context.Context, orderID <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡è·å–è¯·æ±‚ ID</span>
    reqID := ctx.Value(reqIDKey).(<span class="hljs-type">string</span>)
    fmt.Printf(<span class="hljs-string">"å¤„ç†è®¢å•ï¼š%sï¼Œè¯·æ±‚ IDï¼š%s\n"</span>, orderID, reqID)

    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡é”™è¯¯</span>
    <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œè®¢å• IDï¼š%s"</span>, orderID)
}
</code></pre>
<h4 data-id="heading-46">7.4 é”™è¯¯ä¸Šä¸‹æ–‡ä¼ é€’çš„æœ€ä½³å®è·µ</h4>
<ul>
<li>
<p><strong>ä¸è¦åœ¨é”™è¯¯ä¿¡æ¯ä¸­é‡å¤ä¸Šä¸‹æ–‡</strong>ï¼šé€šè¿‡ç»“æ„åŒ–æ—¥å¿—å­—æ®µä¼ é€’ï¼ˆå¦‚ <code>user_id</code>ã€<code>req_id</code>ï¼‰ï¼Œè€Œéæ‹¼æ¥åœ¨é”™è¯¯å­—ç¬¦ä¸²ä¸­ï¼›</p>
</li>
<li>
<p><strong>ä½¿ç”¨ context ä¼ é€’è¯·æ±‚çº§ä¸Šä¸‹æ–‡</strong>ï¼šé¿å…é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’å¤§é‡ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›</p>
</li>
<li>
<p><strong>æ—¥å¿—çº§åˆ«åŒºåˆ†</strong>ï¼šERROR çº§åˆ«è®°å½•è‡´å‘½é”™è¯¯ï¼ŒWARN çº§åˆ«è®°å½•éè‡´å‘½é”™è¯¯ï¼ŒINFO çº§åˆ«è®°å½•å…³é”®æ“ä½œï¼›</p>
</li>
<li>
<p><strong>ç”Ÿäº§ç¯å¢ƒå¼€å¯å †æ ˆè·Ÿè¸ª</strong>ï¼šä»…åœ¨ ERROR çº§åˆ«è®°å½•å †æ ˆä¿¡æ¯ï¼Œå‡å°‘æ€§èƒ½å¼€é”€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-47">å…«ã€æ„å»ºå¯æ¢å¤çš„å¥å£®ç³»ç»Ÿ</h3>
<p>é”™è¯¯å¤„ç†çš„æœ€ç»ˆç›®æ ‡æ˜¯æ„å»º<strong>é«˜å¯ç”¨ã€å¯æ¢å¤</strong>çš„ç³»ç»Ÿã€‚ä¸€ä¸ªå¥å£®çš„ç³»ç»Ÿéœ€è¦ä»<strong>é¢„é˜²ã€æ£€æµ‹ã€æ¢å¤</strong>ä¸‰ä¸ªå±‚é¢è®¾è®¡é”™è¯¯å¤„ç†ç­–ç•¥ã€‚</p>
<h4 data-id="heading-48">8.1 é”™è¯¯é¢„é˜²ï¼šå‡å°‘é”™è¯¯å‘ç”Ÿçš„æ¦‚ç‡</h4>
<ul>
<li>
<p><strong>å‚æ•°æ ¡éªŒå‰ç½®</strong>ï¼šæ‰€æœ‰å¤–éƒ¨è¾“å…¥ï¼ˆAPI å‚æ•°ã€é…ç½®æ–‡ä»¶ã€æ•°æ®åº“æ•°æ®ï¼‰å¿…é¡»è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼›</p>
</li>
<li>
<p><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šé’ˆå¯¹ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œç­‰å¸¸è§ panic åœºæ™¯ï¼Œæå‰åšåˆ¤ç©ºã€è¾¹ç•Œæ£€æŸ¥ï¼›</p>
</li>
<li>
<p><strong>èµ„æºéš”ç¦»</strong>ï¼šä½¿ç”¨è¿æ¥æ± ã€é™æµã€ç†”æ–­ç­‰æœºåˆ¶ï¼Œé¿å…å•ä¸ªèµ„æºè€—å°½å½±å“æ•´ä¸ªç³»ç»Ÿï¼›</p>
</li>
<li>
<p><strong>é…ç½®å…œåº•</strong>ï¼šæ ¸å¿ƒé…ç½®å¿…é¡»è®¾ç½®é»˜è®¤å€¼ï¼Œé¿å…é…ç½®ç¼ºå¤±å¯¼è‡´ç¨‹åºå¯åŠ¨å¤±è´¥ã€‚</p>
</li>
</ul>
<h5 data-id="heading-49">ä»£ç ç¤ºä¾‹ï¼šå‚æ•°æ ¡éªŒä¸é˜²å¾¡æ€§ç¼–ç¨‹</h5>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// GetUser è·å–ç”¨æˆ·ä¿¡æ¯ï¼šå‚æ•°æ ¡éªŒå‰ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetUser</span><span class="hljs-params">(userID <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// é˜²å¾¡æ€§æ£€æŸ¥ï¼šç”¨æˆ· ID éç©º</span>
    <span class="hljs-keyword">if</span> userID == <span class="hljs-string">""</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"user_id ä¸èƒ½ä¸ºç©º"</span>)
    }
    <span class="hljs-comment">// é˜²å¾¡æ€§æ£€æŸ¥ï¼šç”¨æˆ· ID æ ¼å¼åˆæ³•</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(userID) != <span class="hljs-number">4</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"user_id æ ¼å¼éæ³•ï¼Œå¿…é¡»ä¸º4ä½å­—ç¬¦ä¸²"</span>)
    }
    <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·</span>
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼š%s"</span>, userID), <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    userInfo, err := GetUser(<span class="hljs-string">""</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è·å–ç”¨æˆ·å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(userInfo)
}
</code></pre>
<h4 data-id="heading-50">8.2 é”™è¯¯æ£€æµ‹ï¼šå¿«é€Ÿå‘ç°é—®é¢˜</h4>
<ul>
<li>
<p><strong>å®Œå–„çš„æ—¥å¿—ç›‘æ§</strong>ï¼šä½¿ç”¨ ELKã€Prometheus + Grafana ç­‰å·¥å…·ï¼Œå¯¹é”™è¯¯æ—¥å¿—è¿›è¡Œå®æ—¶ç›‘æ§å’Œå‘Šè­¦ï¼›</p>
</li>
<li>
<p><strong>å¥åº·æ£€æŸ¥æ¥å£</strong>ï¼šæš´éœ² <code>/health</code> æ¥å£ï¼Œå®šæœŸæ£€æŸ¥æ•°æ®åº“ã€ç¼“å­˜ã€ä¾èµ–æœåŠ¡çš„å¯ç”¨æ€§ï¼›</p>
</li>
<li>
<p><strong>é“¾è·¯è¿½è¸ª</strong>ï¼šä½¿ç”¨ Jaegerã€Zipkin ç­‰å·¥å…·ï¼Œè¿½è¸ªè¯·æ±‚çš„å®Œæ•´é“¾è·¯ï¼Œå®šä½è·¨æœåŠ¡è°ƒç”¨çš„é”™è¯¯ã€‚</p>
</li>
<li/>
</ul>
<h4 data-id="heading-51">8.3 é”™è¯¯æ¢å¤ï¼šè‡ªåŠ¨é™çº§ä¸é‡è¯•</h4>
<ul>
<li>
<p><strong>é‡è¯•æœºåˆ¶</strong>ï¼šå¯¹ç½‘ç»œæŠ–åŠ¨ã€æ•°æ®åº“è¿æ¥è¶…æ—¶ç­‰<strong>ä¸´æ—¶æ€§é”™è¯¯</strong>ï¼Œå®ç°å¹‚ç­‰é‡è¯•ï¼ˆæ³¨æ„é‡è¯•æ¬¡æ•°å’Œé—´éš”ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é™çº§ç­–ç•¥</strong>ï¼šå¯¹æ ¸å¿ƒåŠŸèƒ½ï¼Œè®¾è®¡é™çº§æ–¹æ¡ˆï¼ˆå¦‚ç¼“å­˜é™çº§ã€æœåŠ¡ç†”æ–­ã€è¿”å›é»˜è®¤å€¼ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ä¼˜é›…é‡å¯</strong>ï¼šä½¿ç”¨ä¿¡å·é‡ï¼ˆå¦‚ <code>SIGTERM</code>ï¼‰å®ç°ä¼˜é›…å…³é—­ï¼Œç¡®ä¿ç¨‹åºé€€å‡ºå‰å®Œæˆèµ„æºæ¸…ç†ã€‚</p>
</li>
</ul>
<h5 data-id="heading-52">ä»£ç ç¤ºä¾‹ï¼šåŸºäºé‡è¯•çš„é”™è¯¯æ¢å¤</h5>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-comment">// Retry é€šç”¨é‡è¯•å‡½æ•°ï¼šä»…é‡è¯•ä¸´æ—¶æ€§é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Retry</span><span class="hljs-params">(maxRetries <span class="hljs-type">int</span>, interval time.Duration, fn <span class="hljs-keyword">func</span>()</span></span> <span class="hljs-type">error</span>) <span class="hljs-type">error</span> {
    <span class="hljs-keyword">var</span> err <span class="hljs-type">error</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; maxRetries; i++ {
        err = fn()
        <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// æ‰§è¡ŒæˆåŠŸï¼Œç›´æ¥è¿”å›</span>
        }
        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºä¸´æ—¶æ€§é”™è¯¯ï¼ˆå®é™…åœºæ™¯å¯å®šä¹‰é”™è¯¯ç±»å‹ï¼‰</span>
        <span class="hljs-keyword">if</span> isTemporaryError(err) {
            fmt.Printf(<span class="hljs-string">"ç¬¬%dæ¬¡é‡è¯•ï¼Œé”™è¯¯ï¼š%v\n"</span>, i+<span class="hljs-number">1</span>, err)
            time.Sleep(interval)
            <span class="hljs-keyword">continue</span>
        }
        <span class="hljs-comment">// éä¸´æ—¶æ€§é”™è¯¯ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">return</span> err
    }
    <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•° %dï¼Œæœ€ç»ˆé”™è¯¯ï¼š%v"</span>, maxRetries, err)
}

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸´æ—¶æ€§é”™è¯¯åˆ¤æ–­</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isTemporaryError</span><span class="hljs-params">(err <span class="hljs-type">error</span>)</span></span> <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> err.Error() == <span class="hljs-string">"æ•°æ®åº“è¿æ¥è¶…æ—¶"</span> || err.Error() == <span class="hljs-string">"ç½‘ç»œæŠ–åŠ¨"</span>
}

<span class="hljs-comment">// QueryDB æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QueryDB</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå‰ä¸¤æ¬¡å¤±è´¥ï¼Œç¬¬ä¸‰æ¬¡æˆåŠŸ</span>
    staticCount++
    <span class="hljs-keyword">if</span> staticCount &lt;= <span class="hljs-number">2</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"æ•°æ®åº“è¿æ¥è¶…æ—¶"</span>)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-keyword">var</span> staticCount <span class="hljs-type">int</span> <span class="hljs-comment">// æ¨¡æ‹Ÿé‡è¯•è®¡æ•°</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    err := Retry(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>*time.Second, QueryDB)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"æ‰§è¡ŒæˆåŠŸ"</span>)
}
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
ç¬¬1æ¬¡é‡è¯•ï¼Œé”™è¯¯ï¼šæ•°æ®åº“è¿æ¥è¶…æ—¶
ç¬¬2æ¬¡é‡è¯•ï¼Œé”™è¯¯ï¼šæ•°æ®åº“è¿æ¥è¶…æ—¶
æ‰§è¡ŒæˆåŠŸ
</code></pre>
<h4 data-id="heading-53">8.4 æ„å»ºå¥å£®ç³»ç»Ÿçš„æ ¸å¿ƒåŸåˆ™</h4>
<ul>
<li>
<p><strong>æ•…éšœéš”ç¦»</strong>ï¼šå•ä¸ªæ¨¡å—çš„é”™è¯¯ä¸åº”æ‰©æ•£åˆ°å…¶ä»–æ¨¡å—ï¼ˆå¦‚ä½¿ç”¨ goroutine éš”ç¦»ã€æœåŠ¡ç†”æ–­ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å¹‚ç­‰æ€§è®¾è®¡</strong>ï¼šæ ¸å¿ƒæ¥å£å¿…é¡»å®ç°å¹‚ç­‰æ€§ï¼Œç¡®ä¿é‡è¯•ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼›</p>
</li>
<li>
<p><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šç¨‹åºè¿è¡Œçš„æƒé™ã€èµ„æºè®¿é—®æƒé™åº”æœ€å°åŒ–ï¼Œå‡å°‘é”™è¯¯å½±å“èŒƒå›´ï¼›</p>
</li>
<li>
<p><strong>æŒç»­ä¼˜åŒ–</strong>ï¼šå®šæœŸåˆ†æé”™è¯¯æ—¥å¿—ï¼Œæ€»ç»“é«˜é¢‘é”™è¯¯ç±»å‹ï¼Œä»æ ¹æºä¸Šä¼˜åŒ–ä»£ç ã€‚</p>
</li>
</ul>
<h3 data-id="heading-54">æ€»ç»“</h3>
<p>Go è¯­è¨€çš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯â€œ<strong>æ˜¾å¼é”™è¯¯è¿”å› + è½»é‡çº§å¼‚å¸¸æ¢å¤</strong>â€çš„ç»„åˆï¼Œä¸ä¼ ç»Ÿçš„ try-catch æ¨¡å¼æœ‰æœ¬è´¨åŒºåˆ«ã€‚æœ¬ç« æˆ‘ä»¬ä»åŸºç¡€çš„ <code>error</code> æ¥å£å‡ºå‘ï¼Œé€æ­¥æ·±å…¥åˆ°è‡ªå®šä¹‰é”™è¯¯ã€é”™è¯¯åŒ…è£…ã€<code>defer/panic/recover</code> ååŒä½¿ç”¨ï¼Œæœ€åå»¶ä¼¸åˆ°é”™è¯¯æ—¥å¿—è®°å½•å’Œå¥å£®ç³»ç»Ÿæ„å»ºï¼Œæ ¸å¿ƒè¦ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>error æ¥å£</strong>æ˜¯ Go é”™è¯¯å¤„ç†çš„åŸºç¡€ï¼Œé€šè¿‡æ˜¾å¼è¿”å›å’Œæ£€æŸ¥ <code>nil</code> å®ç°é”™è¯¯å¤„ç†ï¼›</li>
</ol>
<ul>
<li>
<p><strong>è‡ªå®šä¹‰é”™è¯¯</strong>å¯æºå¸¦é¢å¤–ä¿¡æ¯ï¼ˆé”™è¯¯ç ã€å †æ ˆï¼‰ï¼Œ<code>%w</code> åŠ¨è¯å®ç°é”™è¯¯åŒ…è£…ä¸è§£åŒ…ï¼›</p>
</li>
<li>
<p><strong>defer</strong> ç”¨äºå»¶è¿Ÿæ‰§è¡Œèµ„æºæ¸…ç†é€»è¾‘ï¼Œéµå¾ªâ€œåè¿›å…ˆå‡ºâ€æ‰§è¡Œé¡ºåºï¼›</p>
</li>
<li>
<p><strong>panic/recover</strong> ç”¨äºå¤„ç†ä¸å¯é¢„æœŸçš„è‡´å‘½é”™è¯¯ï¼Œ<code>recover</code> å¿…é¡»åœ¨ <code>defer</code> ä¸­ä½¿ç”¨ï¼›</p>
</li>
<li>
<p><strong>é”™è¯¯æ—¥å¿—</strong>éœ€åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç»“åˆ <code>context</code> å®ç°è¯·æ±‚çº§ä¸Šä¸‹æ–‡ä¼ é€’ï¼›</p>
</li>
<li>
<p><strong>å¥å£®ç³»ç»Ÿ</strong>éœ€è¦ä»é¢„é˜²ã€æ£€æµ‹ã€æ¢å¤ä¸‰ä¸ªå±‚é¢è®¾è®¡ï¼Œå®ç°æ•…éšœéš”ç¦»å’Œè‡ªåŠ¨æ¢å¤ã€‚</p>
</li>
</ul>
<p>éµå¾ªè¿™äº›åŸåˆ™å’Œå®è·µï¼Œä½ å¯ä»¥å†™å‡ºæ›´ç¨³å®šã€æ›´æ˜“ç»´æŠ¤çš„ Go ç¨‹åºï¼Œä»å®¹åº”å¯¹å¤æ‚çš„ç”Ÿäº§ç¯å¢ƒæŒ‘æˆ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderAgent A2UI æŠ€æœ¯åŸç†æ·±åº¦æ­ç§˜]]></title>    <link>https://juejin.cn/post/7601387539334807588</link>    <guid>https://juejin.cn/post/7601387539334807588</guid>    <pubDate>2026-02-02T00:46:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601387539334807588" data-draft-id="7601464318408966186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderAgent A2UI æŠ€æœ¯åŸç†æ·±åº¦æ­ç§˜"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-02T00:46:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderAgent A2UI æŠ€æœ¯åŸç†æ·±åº¦æ­ç§˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T00:46:29.000Z" title="Mon Feb 02 2026 00:46:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ooderA2UI æ˜¯ä¸€ä¸ªè®¾è®¡åˆ°ä»£ç å¼•æ“ï¼Œå®ƒé€šè¿‡å¤šç§å»ºæ¨¡æ¨¡å¼å®ç°äº†ä»è‡ªç„¶è¯­è¨€æè¿°åˆ°å¯è¿è¡Œä»£ç çš„æ— ç¼è¡”æ¥ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ ooderA2UI çš„æ ¸å¿ƒæŠ€æœ¯åŸç†ï¼Œé‡ç‚¹å…³æ³¨ LLM å‚ä¸æµç¨‹ã€Skills æŒ‚æ¥æœºåˆ¶ã€bridge code å·¥ä½œåŸç†ä»¥åŠ NlpModule å·¥ä½œåŸç†ç­‰æ ¸å¿ƒå†…å®¹ï¼Œä¸ºæ‚¨æ­å¼€è¿™ä¸ªæ™ºèƒ½è½¬æ¢å¼•æ“çš„æŠ€æœ¯å¥¥ç§˜ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸æœ¯è¯­</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¦‚å¿µ</h3>
<ul>
<li><strong>LLM</strong>ï¼šå¤§å‹è¯­è¨€æ¨¡å‹ï¼Œç”¨äºè§£æè‡ªç„¶è¯­è¨€æè¿°ï¼Œæå–è®¾è®¡æ„å›¾å’Œç»„ä»¶éœ€æ±‚</li>
<li><strong>NlpModule (NLPMod)</strong>ï¼šNLPæ¨¡å—ï¼Œæ˜¯æœ€ç»ˆç”Ÿæˆçš„æ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…å«å®Œæ•´çš„åŠŸèƒ½å®ç°</li>
<li><strong>UIComponent (UIC)</strong>ï¼šUIç»„ä»¶ï¼Œä¸å‰ç«¯ç»„ä»¶å½¢æˆ1:1æ˜ å°„çš„åç«¯ç»„ä»¶å¯¹è±¡</li>
<li><strong>bridgeCode (BC)</strong>ï¼šæ¡¥æ¥ä»£ç ï¼ŒåŒ…æ‹¬ OneCode (OC) ç­‰å¤šç§å½¢å¼ï¼Œæ˜¯è¿æ¥è®¾è®¡å±‚å’Œä»£ç å±‚çš„æ¡¥æ¢</li>
<li><strong>Skills</strong>ï¼šæŠ€èƒ½æ¨¡å—ï¼Œç”¨äºæ‰©å±• ooderA2UI çš„åŠŸèƒ½ï¼Œæä¾›ç‰¹å®šé¢†åŸŸçš„èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-3">1.2 æœ¯è¯­å¯¹åº”å…³ç³»</h3>






















































<table><thead><tr><th align="left">æ¦‚å¿µ</th><th align="left">ç®€å†™</th><th align="left">è®¾è®¡å™¨æœ¯è¯­</th><th align="left">å¼•æ“æœ¯è¯­</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">NlpModule</td><td align="left">NLPMod</td><td align="left">NlpModule</td><td align="left">NLPMod</td><td align="left">æœ€ç»ˆç”Ÿæˆçš„ NLP æ¨¡å—ï¼ŒåŒ…å«å®Œæ•´çš„åŠŸèƒ½å®ç°</td></tr><tr><td align="left">UIComponent</td><td align="left">UIC</td><td align="left">Design Component</td><td align="left">UIComponent</td><td align="left">ä¸å‰ç«¯ç»„ä»¶å½¢æˆ1:1æ˜ å°„çš„åç«¯ç»„ä»¶å¯¹è±¡</td></tr><tr><td align="left">bridgeCode</td><td align="left">BC</td><td align="left">OneCode</td><td align="left">UIBridge</td><td align="left">æ¡¥æ¥ä»£ç ï¼Œè¿æ¥è®¾è®¡å±‚å’Œä»£ç å±‚çš„æ¡¥æ¢</td></tr><tr><td align="left">LLM</td><td align="left">LLM</td><td align="left">-</td><td align="left">LLM</td><td align="left">å¤§å‹è¯­è¨€æ¨¡å‹ï¼Œç”¨äºè§£æè‡ªç„¶è¯­è¨€æè¿°</td></tr><tr><td align="left">OneCode</td><td align="left">OC</td><td align="left">OneCode</td><td align="left">UIBridge</td><td align="left">ä¸€ç§æ¡¥æ¥ä»£ç å½¢å¼ï¼Œç”¨äºè¿æ¥ UI å’Œåç«¯é€»è¾‘</td></tr><tr><td align="left">Skills</td><td align="left">Skills</td><td align="left">Skills</td><td align="left">Skills</td><td align="left">æŠ€èƒ½æ¨¡å—ï¼Œç”¨äºæ‰©å±• ooderA2UI çš„åŠŸèƒ½</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€ç¬¬ä¸€ç§å»ºæ¨¡æ¨¡å¼ï¼šLLM â†’ NlpModule â†’ åŒäº§ç‰©è¾“å‡º</h2>
<h4 data-id="heading-5">æ¨¡å¼æ¦‚è¿°</h4>
<p>ä»è‡ªç„¶è¯­è¨€æè¿°å‡ºå‘ï¼Œé€šè¿‡ LLM è§£ææå–è®¾è®¡æ„å›¾ï¼Œç”Ÿæˆ NlpModuleï¼Œæœ€ç»ˆåŒæ­¥è¾“å‡º UIComponent å’Œ bridgeCode ä¸¤ç§äº§ç‰©ã€‚è¿™æ˜¯ ooderA2UI æœ€æ ¸å¿ƒçš„å»ºæ¨¡æ¨¡å¼ï¼Œå±•ç¤ºäº†ä»è‡ªç„¶è¯­è¨€åˆ°å¯è¿è¡Œä»£ç çš„å®Œæ•´è½¬æ¢æµç¨‹ã€‚</p>
<h3 data-id="heading-6">2.1 è¯¦ç»†æµç¨‹å›¾</h3>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61312f8930024b2880992ac0cdbdbed7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=%2FRKi88Ow6DGQwEhlOsyNFt7tcNY%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/341932a36d954f9b87d1180cb484d4c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=9UAm6VbX4rz7uU4SU8794d6CBHc%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
<h3 data-id="heading-7">2.2 LLM å‚ä¸æµç¨‹è¯¦è§£</h3>
<p>LLM åœ¨ç¬¬ä¸€ç§å»ºæ¨¡æ¨¡å¼ä¸­æ‰®æ¼”ç€æ ¸å¿ƒè§’è‰²ï¼Œè´Ÿè´£å°†è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºç»“æ„åŒ–çš„è®¾è®¡æ„å›¾ã€‚ä»¥ä¸‹æ˜¯ LLM å‚ä¸çš„è¯¦ç»†æµç¨‹ï¼š</p>
<h4 data-id="heading-8">2.2.1 LLM è§£æè¿‡ç¨‹</h4>
<ol>
<li><strong>è¾“å…¥å¤„ç†</strong>ï¼š
<ul>
<li>æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æè¿°</li>
<li>è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬åˆ†è¯ã€è¯­æ³•åˆ†æç­‰</li>
<li>æ„å»ºæç¤ºè¯ï¼ˆPromptï¼‰ï¼Œå¼•å¯¼ LLM ç”Ÿæˆç»“æ„åŒ–è¾“å‡º</li>
</ul>
</li>
<li><strong>æ„å›¾è¯†åˆ«</strong>ï¼š
<ul>
<li>LLM åˆ†æè‡ªç„¶è¯­è¨€æè¿°ï¼Œè¯†åˆ«ç”¨æˆ·çš„è®¾è®¡æ„å›¾</li>
<li>æå–æ ¸å¿ƒéœ€æ±‚ï¼Œå¦‚é¡µé¢ç±»å‹ã€ç»„ä»¶ç±»å‹ã€å¸ƒå±€è¦æ±‚ç­‰</li>
<li>è¯†åˆ«ç”¨æˆ·æåˆ°çš„å®ä½“ã€å…³ç³»å’Œå±æ€§</li>
</ul>
</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼š
<ul>
<li>LLM ç”Ÿæˆç»“æ„åŒ–çš„è¾“å‡ºï¼Œå¦‚ JSON æ ¼å¼çš„è®¾è®¡æ„å›¾</li>
<li>åŒ…å«ç»„ä»¶ç±»å‹ã€å±æ€§ã€äº‹ä»¶ã€æ ·å¼ç­‰ä¿¡æ¯</li>
<li>æä¾›è®¾è®¡å†³ç­–çš„ç†ç”±å’Œä¾æ®</li>
</ul>
</li>
</ol>
<h4 data-id="heading-9">2.2.2 LLM å†³ç­–ç‚¹</h4>
<ul>
<li><strong>ç»„ä»¶ç±»å‹å†³ç­–</strong>ï¼šæ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ï¼Œå†³å®šä½¿ç”¨å“ªç§ç±»å‹çš„ç»„ä»¶</li>
<li><strong>å¸ƒå±€ç»“æ„å†³ç­–</strong>ï¼šç¡®å®šé¡µé¢çš„æ•´ä½“å¸ƒå±€ç»“æ„å’Œç»„ä»¶æ’åˆ—æ–¹å¼</li>
<li><strong>äº‹ä»¶ç»‘å®šå†³ç­–</strong>ï¼šè¯†åˆ«ç»„ä»¶éœ€è¦ç»‘å®šçš„äº‹ä»¶å’Œå¯¹åº”çš„å¤„ç†é€»è¾‘</li>
<li><strong>æ ·å¼è®¾è®¡å†³ç­–</strong>ï¼šæ ¹æ®æè¿°ç”Ÿæˆé€‚å½“çš„æ ·å¼ä¿¡æ¯ï¼Œå¦‚é¢œè‰²ã€å­—ä½“ã€å¤§å°ç­‰</li>
<li><strong>API è°ƒç”¨å†³ç­–</strong>ï¼šè¯†åˆ«éœ€è¦è°ƒç”¨çš„åç«¯ API å’Œæ•°æ®æµå‘</li>
</ul>
<h3 data-id="heading-10">2.3 Skills æŒ‚æ¥æœºåˆ¶</h3>
<p>Skills æ˜¯ ooderA2UI çš„æ‰©å±•æœºåˆ¶ï¼Œå…è®¸ç³»ç»Ÿé›†æˆç‰¹å®šé¢†åŸŸçš„èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ Skills æŒ‚æ¥çš„è¯¦ç»†æœºåˆ¶ï¼š</p>
<h4 data-id="heading-11">2.3.1 Skills åœ¨ LLM è§£æä¸­çš„ä½œç”¨</h4>
<p><strong>é‡è¦æŠ€æœ¯é€»è¾‘ä¿®æ­£</strong>ï¼šSkills ä¸æ˜¯ LLM è§£æçš„ç‹¬ç«‹æ­¥éª¤ï¼Œè€Œæ˜¯åœ¨ LLM è§£æè¿‡ç¨‹ä¸­è¢«è°ƒç”¨çš„æ‰©å±•æœºåˆ¶ã€‚LLM è§£æå¼•æ“åœ¨è§£æè‡ªç„¶è¯­è¨€æ—¶ï¼Œä¼šæ ¹æ®éœ€è¦è°ƒç”¨ç›¸åº”çš„ Skills æ¥å¢å¼ºè§£æèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-12">2.3.2 Skills è°ƒç”¨æ—¶æœº</h4>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17e553e63cfe45d4879321c7725f2ff3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=dupUmP2V5Qc8lSeySI1Cq6%2F37Qc%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9d91b80330c4c79b57092b6c4a82169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=3p3g%2FarTsyR1493OCtTQpRZdB7Y%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<h3 data-id="heading-13">2.4 bridge code å·¥ä½œåŸç†</h3>
<p>bridge code æ˜¯è¿æ¥è®¾è®¡å±‚å’Œä»£ç å±‚çš„æ¡¥æ¢ï¼Œè´Ÿè´£å°† NlpModule è½¬æ¢ä¸ºå¯è¿è¡Œçš„ä»£ç ã€‚ä»¥ä¸‹æ˜¯ bridge code çš„å·¥ä½œåŸç†ï¼š</p>
<h4 data-id="heading-14">2.4.1 bridge code ç”Ÿæˆè¿‡ç¨‹</h4>
<ol>
<li><strong>åˆ†æ NlpModule</strong>ï¼š
<ul>
<li>åˆ†æ NlpModule çš„ç»“æ„ï¼ŒåŒ…æ‹¬ç»„ä»¶ã€äº‹ä»¶ã€æ ·å¼ç­‰</li>
<li>è¯†åˆ«ç»„ä»¶é—´çš„å…³ç³»å’Œä¾èµ–</li>
<li>æå–éœ€è¦è½¬æ¢ä¸ºä»£ç çš„å…³é”®ä¿¡æ¯</li>
</ul>
</li>
<li><strong>ä»£ç ç»“æ„ç”Ÿæˆ</strong>ï¼š
<ul>
<li>ç”Ÿæˆç»„ä»¶çš„ HTML ç»“æ„</li>
<li>ç”Ÿæˆ CSS æ ·å¼ä»£ç </li>
<li>ç”Ÿæˆ JavaScript äº‹ä»¶å¤„ç†ä»£ç </li>
<li>ç”Ÿæˆä¸åç«¯ API äº¤äº’çš„ä»£ç </li>
</ul>
</li>
<li><strong>ä»£ç ä¼˜åŒ–</strong>ï¼š
<ul>
<li>ä¼˜åŒ–ä»£ç ç»“æ„ï¼Œæé«˜å¯è¯»æ€§</li>
<li>å‹ç¼©ä»£ç ä½“ç§¯ï¼Œæé«˜æ€§èƒ½</li>
<li>æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">2.5 NlpModule å·¥ä½œåŸç†</h3>
<p>NlpModule æ˜¯ ooderA2UI çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ŒåŒ…å«äº†ä»è‡ªç„¶è¯­è¨€æè¿°ä¸­æå–çš„æ‰€æœ‰è®¾è®¡ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ NlpModule çš„å·¥ä½œåŸç†ï¼š</p>
<h4 data-id="heading-16">2.5.1 NlpModule æ•°æ®å¡«å……æœºåˆ¶</h4>
<p>NlpModule æ•°æ®å¡«å……æœºåˆ¶</p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54424225e6cc4c4f96e711a67639708d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=AmqWeZ2ccNyLQVP1H7dzPmJEKCA%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<h2 data-id="heading-17">ä¸‰ã€ç¬¬äºŒç§å»ºæ¨¡æ¨¡å¼ï¼šç”¨æˆ·å·²æœ‰Code â†’ bridgeCode â†’ NlpModuleè¿˜åŸ</h2>
<h4 data-id="heading-18">æ¨¡å¼æ¦‚è¿°</h4>
<p>ä»ç”¨æˆ·ç°æœ‰çš„ä»£ç å‡ºå‘ï¼Œé€šè¿‡ä»£ç åˆ†ææå–æ¡¥æ¥ä¿¡æ¯ï¼Œç”Ÿæˆ bridgeCodeï¼Œæœ€ç»ˆè¿˜åŸç”Ÿæˆ NlpModuleã€‚è¿™ä¸€æ¨¡å¼å±•ç¤ºäº† ooderA2UI å¦‚ä½•å¤„ç†ç°æœ‰ä»£ç ï¼Œå®ç°ä»£ç çš„æ™ºèƒ½åŒ–æ”¹é€ å’Œç®¡ç†ã€‚</p>
<h3 data-id="heading-19">3.1 è¯¦ç»†æµç¨‹å›¾</h3>
<p>ç¬¬äºŒç§å»ºæ¨¡æ¨¡å¼ï¼šç”¨æˆ·å·²æœ‰Code â†’ bridgeCode â†’ NlpModuleè¿˜åŸï¼ˆè¯¦ç»†æµç¨‹ï¼‰</p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34c965dd4594b1db02b31a38ace4cd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=zK27%2BPjmfe%2BI%2FOzoLA%2BSPiXBmvk%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7d510da0f70447ab0f05cbcbb244cfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=M%2FaoqoxKP%2F%2Fp3CqxCdZiGTsbtoY%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p>â€‹</p>
<h3 data-id="heading-20">3.2 ä»£ç åˆ†æä¸ bridgeCode ç”Ÿæˆ</h3>
<h4 data-id="heading-21">3.2.1 ä»£ç åˆ†æè¿‡ç¨‹</h4>
<ol>
<li><strong>ä»£ç ç»“æ„åˆ†æ</strong>ï¼š
<ul>
<li>åˆ†æç°æœ‰ä»£ç çš„æ–‡ä»¶ç»“æ„å’Œç›®å½•ç»„ç»‡</li>
<li>è¯†åˆ«é¡µé¢ç»„ä»¶ã€æ ·å¼æ–‡ä»¶å’Œè„šæœ¬æ–‡ä»¶</li>
<li>ç†è§£ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦å’Œä¾èµ–å…³ç³»</li>
</ul>
</li>
<li><strong>ç»„ä»¶è¯†åˆ«</strong>ï¼š
<ul>
<li>è¯†åˆ«é¡µé¢ä¸­çš„ UI ç»„ä»¶åŠå…¶å±æ€§</li>
<li>æå–ç»„ä»¶çš„äº‹ä»¶å¤„ç†é€»è¾‘</li>
<li>åˆ†æç»„ä»¶çš„æ ·å¼å®šä¹‰</li>
</ul>
</li>
<li><strong>API è¯†åˆ«</strong>ï¼š
<ul>
<li>è¯†åˆ«ä»£ç ä¸­çš„ API è°ƒç”¨</li>
<li>åˆ†æ API çš„å‚æ•°å’Œè¿”å›å€¼</li>
<li>ç†è§£æ•°æ®æµå‘å’ŒçŠ¶æ€ç®¡ç†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-22">3.2.2 bridgeCode ç”Ÿæˆè¿‡ç¨‹</h4>
<p><strong>å…³é”®æŠ€æœ¯é€»è¾‘</strong>ï¼šåœ¨ç¬¬äºŒç§å»ºæ¨¡æ¨¡å¼ä¸­ï¼ŒbridgeCode çš„ç”Ÿæˆä¸ç¬¬ä¸€ç§æ¨¡å¼ä¸åŒï¼Œå®ƒä¸æ˜¯ä» NlpModule ç”Ÿæˆçš„ï¼Œè€Œæ˜¯ç›´æ¥ä»ç°æœ‰ä»£ç åˆ†æç»“æœç”Ÿæˆçš„ã€‚</p>
<ol>
<li><strong>æå–æ¡¥æ¥ä¿¡æ¯</strong>ï¼š
<ul>
<li>ä»åˆ†æç»“æœä¸­æå–ç»„ä»¶ã€äº‹ä»¶ã€æ ·å¼å’Œ API ä¿¡æ¯</li>
<li>æ„å»ºç»„ä»¶é—´çš„å…³ç³»å›¾</li>
<li>è¯†åˆ«ä»£ç ä¸­çš„å¯å¤ç”¨éƒ¨åˆ†</li>
</ul>
</li>
<li><strong>ç”Ÿæˆ bridgeCode</strong>ï¼š
<ul>
<li>æ ¹æ®æå–çš„ä¿¡æ¯ç”Ÿæˆç»“æ„åŒ–çš„ bridgeCode</li>
<li>ä¿æŒä¸åŸå§‹ä»£ç çš„ä¸€è‡´æ€§</li>
<li>æ·»åŠ å¿…è¦çš„å…ƒæ•°æ®å’Œæ³¨é‡Š</li>
</ul>
</li>
</ol>
<h3 data-id="heading-23">3.3 NlpModule è¿˜åŸè¿‡ç¨‹</h3>
<h4 data-id="heading-24">3.3.1 ä» bridgeCode åˆ° NlpModule</h4>
<ol>
<li><strong>è§£æ bridgeCode</strong>ï¼š
<ul>
<li>è§£æ bridgeCode çš„ JSON ç»“æ„</li>
<li>æå–ç»„ä»¶ã€äº‹ä»¶ã€åŠ¨ä½œå’Œ API ä¿¡æ¯</li>
<li>éªŒè¯ bridgeCode çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
</ul>
</li>
<li><strong>æ„å»º NlpModule</strong>ï¼š
<ul>
<li>åˆ›å»º NlpModule å®ä¾‹</li>
<li>å¡«å……ç»„ä»¶ã€äº‹ä»¶ã€åŠ¨ä½œå’Œ API ä¿¡æ¯</li>
<li>å»ºç«‹ç»„ä»¶é—´çš„å…³ç³»å’Œä¾èµ–</li>
</ul>
</li>
<li><strong>ä¼˜åŒ– NlpModule</strong>ï¼š
<ul>
<li>ä¼˜åŒ–ç»„ä»¶ç»“æ„ï¼Œæé«˜å¯ç»´æŠ¤æ€§</li>
<li>åˆå¹¶é‡å¤çš„æ ·å¼å’Œäº‹ä»¶å¤„ç†é€»è¾‘</li>
<li>ç¡®ä¿ NlpModule çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</li>
</ul>
</li>
</ol>
<h2 data-id="heading-25">å››ã€ç¬¬ä¸‰ç§å»ºæ¨¡æ¨¡å¼ï¼šUIComponent â†’ è‡ªåŠ¨è¯†åˆ«å…³è” â†’ NlpModule</h2>
<h4 data-id="heading-26">æ¨¡å¼æ¦‚è¿°</h4>
<p>ä»è®¾è®¡å™¨ç”Ÿæˆçš„ UIComponent å‡ºå‘ï¼Œé€šè¿‡è‡ªåŠ¨è¯†åˆ«å…³è”å¼•æ“è¯†åˆ«ç»„ä»¶ä¸åç«¯ API çš„å…³è”ï¼Œæœ€ç»ˆç”Ÿæˆå®Œæ•´çš„ NlpModuleã€‚è¿™ä¸€æ¨¡å¼å±•ç¤ºäº† ooderA2UI å¦‚ä½•å®ç°è®¾è®¡é©±åŠ¨å¼€å‘ï¼Œå°†è®¾è®¡å™¨ä¸­çš„ UI ç»„ä»¶è½¬æ¢ä¸ºå¯è¿è¡Œçš„ä»£ç ã€‚</p>
<h3 data-id="heading-27">4.1 è¯¦ç»†æµç¨‹å›¾</h3>
<p>ç¬¬ä¸‰ç§å»ºæ¨¡æ¨¡å¼ï¼šUIComponent â†’ è‡ªåŠ¨è¯†åˆ«å…³è” â†’ NlpModuleï¼ˆè¯¦ç»†æµç¨‹ï¼‰</p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b60537bb9723431a9a12782f495b899a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=%2BI19kHYwlAkVld7WwqDcy3bMQbU%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03653b7079f6452abcd90469cf2f1974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770597989&amp;x-signature=dtVehoD%2Fp0ve9BXa6moOOhJYpbU%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹</p>
<h3 data-id="heading-28">4.2 UIComponent åˆ†æä¸å…³è”è¯†åˆ«</h3>
<h4 data-id="heading-29">4.2.1 UIComponent åˆ†æè¿‡ç¨‹</h4>
<ol>
<li><strong>ç»“æ„åˆ†æ</strong>ï¼š
<ul>
<li>åˆ†æ UIComponent çš„å±‚çº§ç»“æ„</li>
<li>è¯†åˆ«ç»„ä»¶ç±»å‹å’Œå±æ€§</li>
<li>æå–ç»„ä»¶çš„äº‹ä»¶å’Œæ ·å¼ä¿¡æ¯</li>
</ul>
</li>
<li><strong>å…³ç³»åˆ†æ</strong>ï¼š
<ul>
<li>åˆ†æç»„ä»¶é—´çš„çˆ¶å­å…³ç³»å’Œå…„å¼Ÿå…³ç³»</li>
<li>è¯†åˆ«ç»„ä»¶é—´çš„äº¤äº’å’Œæ•°æ®ä¼ é€’</li>
<li>æ„å»ºç»„ä»¶çš„ä¾èµ–å›¾</li>
</ul>
</li>
</ol>
<h4 data-id="heading-30">4.2.2 å…³è”è¯†åˆ«è¿‡ç¨‹</h4>
<ol>
<li><strong>API è¯†åˆ«</strong>ï¼š
<ul>
<li>åˆ†æç»„ä»¶çš„åŠŸèƒ½å’Œæ•°æ®éœ€æ±‚</li>
<li>è¯†åˆ«å¯èƒ½éœ€è¦è°ƒç”¨çš„åç«¯ API</li>
<li>åŒ¹é… API ä¸ç»„ä»¶çš„äº¤äº’é€»è¾‘</li>
</ul>
</li>
<li><strong>æ•°æ®æµå‘åˆ†æ</strong>ï¼š
<ul>
<li>åˆ†ææ•°æ®ä» API åˆ°ç»„ä»¶çš„æµå‘</li>
<li>è¯†åˆ«æ•°æ®è½¬æ¢å’Œå¤„ç†é€»è¾‘</li>
<li>æ„å»ºæ•°æ®æµå‘å›¾</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">4.3 UIComponent åˆ° NlpModule çš„è½¬æ¢</h3>
<p><strong>å…³é”®æŠ€æœ¯é€»è¾‘</strong>ï¼šUIComponent åˆ° NlpModule çš„è½¬æ¢æ˜¯ç¬¬ä¸‰ç§å»ºæ¨¡æ¨¡å¼çš„æ ¸å¿ƒç¯èŠ‚ï¼Œå±•ç¤ºäº†å¦‚ä½•å°†è®¾è®¡å™¨ä¸­çš„ UI ç»„ä»¶è½¬æ¢ä¸ºåŒ…å«å®Œæ•´åŠŸèƒ½å®ç°çš„æ ¸å¿ƒæ¨¡å—ã€‚</p>
<h4 data-id="heading-32">4.3.1 è½¬æ¢è¿‡ç¨‹</h4>
<ol>
<li><strong>åŸºæœ¬ä¿¡æ¯è½¬æ¢</strong>ï¼š
<ul>
<li>å°† UIComponent çš„åŸºæœ¬ä¿¡æ¯è½¬æ¢ä¸º NlpModule çš„å…ƒæ•°æ®</li>
<li>ä¿æŒç»„ä»¶çš„åç§°ã€æè¿°ç­‰ä¿¡æ¯ä¸€è‡´</li>
<li>æ·»åŠ å¿…è¦çš„ç‰ˆæœ¬å’ŒçŠ¶æ€ä¿¡æ¯</li>
</ul>
</li>
<li><strong>ç»„ä»¶ç»“æ„è½¬æ¢</strong>ï¼š
<ul>
<li>å°† UIComponent çš„å±‚çº§ç»“æ„è½¬æ¢ä¸º NlpModule çš„ç»„ä»¶åˆ—è¡¨</li>
<li>ä¿æŒç»„ä»¶çš„ç±»å‹ã€å±æ€§å’Œæ ·å¼ä¿¡æ¯</li>
<li>è½¬æ¢ç»„ä»¶çš„äº‹ä»¶å’Œäº¤äº’é€»è¾‘</li>
</ul>
</li>
<li><strong>å…³è”å…³ç³»è½¬æ¢</strong>ï¼š
<ul>
<li>å°†è¯†åˆ«åˆ°çš„ API å…³è”è½¬æ¢ä¸º NlpModule çš„ API è°ƒç”¨ä¿¡æ¯</li>
<li>è½¬æ¢æ•°æ®æµå‘ä¸º NlpModule çš„æ•°æ®æµå®šä¹‰</li>
<li>æ·»åŠ å¿…è¦çš„åŠ¨ä½œå’Œå¤„ç†é€»è¾‘</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–ä¸éªŒè¯</strong>ï¼š
<ul>
<li>ä¼˜åŒ– NlpModule çš„ç»“æ„å’Œç»„ç»‡</li>
<li>éªŒè¯è½¬æ¢ç»“æœçš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
<li>ç¡®ä¿æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯éƒ½å·²è½¬æ¢</li>
</ul>
</li>
</ol>
<h2 data-id="heading-33">äº”ã€æ ¸å¿ƒæŠ€æœ¯åŸç†æ€»ç»“</h2>
<h3 data-id="heading-34">5.1 LLM å‚ä¸çš„æ ¸å¿ƒä½œç”¨</h3>
<h4 data-id="heading-35">LLM åœ¨ ooderA2UI ä¸­çš„è§’è‰²</h4>
<ul>
<li><strong>è‡ªç„¶è¯­è¨€ç†è§£</strong>ï¼šè§£æç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œæå–è®¾è®¡æ„å›¾</li>
<li><strong>è®¾è®¡å†³ç­–</strong>ï¼šåŸºäºè‡ªç„¶è¯­è¨€æè¿°ï¼Œåšå‡ºç»„ä»¶ç±»å‹ã€å¸ƒå±€ç»“æ„ç­‰è®¾è®¡å†³ç­–</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šç”Ÿæˆç»“æ„åŒ–çš„è®¾è®¡ä¿¡æ¯ï¼Œä¸ºåç»­å¤„ç†æä¾›åŸºç¡€</li>
<li><strong>ä¸Šä¸‹æ–‡ç†è§£</strong>ï¼šç†è§£è®¾è®¡çš„ä¸Šä¸‹æ–‡å’Œç”¨æˆ·éœ€æ±‚ï¼Œæä¾›æ›´å‡†ç¡®çš„è®¾è®¡å»ºè®®</li>
</ul>
<h3 data-id="heading-36">5.2 Skills æŒ‚æ¥çš„æŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-37">Skills æ‰©å±•æœºåˆ¶</h4>
<ul>
<li><strong>æ’ä»¶åŒ–æ¶æ„</strong>ï¼šé‡‡ç”¨æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒåŠ¨æ€æ³¨å†Œå’Œå¸è½½æŠ€èƒ½</li>
<li><strong>æ ‡å‡†åŒ–æ¥å£</strong>ï¼šå®šä¹‰æ ‡å‡†åŒ–çš„æŠ€èƒ½æ¥å£ï¼Œç¡®ä¿æŠ€èƒ½çš„ä¸€è‡´æ€§å’Œå¯æ‰©å±•æ€§</li>
<li><strong>æ™ºèƒ½è·¯ç”±</strong>ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹ï¼Œæ™ºèƒ½é€‰æ‹©åˆé€‚çš„æŠ€èƒ½å¤„ç†</li>
<li><strong>ç»“æœé›†æˆ</strong>ï¼šå°†æŠ€èƒ½æ‰§è¡Œç»“æœæ— ç¼é›†æˆåˆ° ooderA2UI çš„å¤„ç†æµç¨‹ä¸­</li>
</ul>
<h3 data-id="heading-38">5.3 bridge code çš„æŠ€æœ¯ä»·å€¼</h3>
<h4 data-id="heading-39">bridge code çš„ä½œç”¨</h4>
<ul>
<li><strong>ä¸­é—´è¡¨ç¤º</strong>ï¼šä½œä¸ºè®¾è®¡å±‚å’Œä»£ç å±‚ä¹‹é—´çš„ä¸­é—´è¡¨ç¤ºï¼Œç®€åŒ–è½¬æ¢è¿‡ç¨‹</li>
<li><strong>ä»£ç ç”Ÿæˆ</strong>ï¼šä¸ºä»£ç ç”Ÿæˆæä¾›ç»“æ„åŒ–çš„è¾“å…¥ï¼Œç¡®ä¿ç”Ÿæˆä»£ç çš„è´¨é‡</li>
<li><strong>ä»£ç ç®¡ç†</strong>ï¼šæä¾›æ ‡å‡†åŒ–çš„ä»£ç ç»“æ„ï¼Œä¾¿äºä»£ç çš„ç®¡ç†å’Œç»´æŠ¤</li>
<li><strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šæ”¯æŒç”Ÿæˆä¸åŒå¹³å°çš„ä»£ç ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§</li>
</ul>
<h3 data-id="heading-40">5.4 NlpModule çš„æ ¸å¿ƒåœ°ä½</h3>
<h4 data-id="heading-41">NlpModule çš„ä½œç”¨</h4>
<ul>
<li><strong>ç»Ÿä¸€æ•°æ®æ¨¡å‹</strong>ï¼šä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç»Ÿä¸€æ•°æ®æ¨¡å‹ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§</li>
<li><strong>ä¿¡æ¯èšåˆ</strong>ï¼šèšåˆä»ä¸åŒæ¥æºï¼ˆLLMã€ä»£ç åˆ†æã€UIè®¾è®¡ï¼‰è·å–çš„ä¿¡æ¯</li>
<li><strong>è½¬æ¢ä¸­å¿ƒ</strong>ï¼šä½œä¸ºä¸åŒè¡¨ç¤ºå½¢å¼ï¼ˆUIComponentã€bridgeCodeï¼‰ä¹‹é—´çš„è½¬æ¢ä¸­å¿ƒ</li>
<li><strong>éªŒè¯æœºåˆ¶</strong>ï¼šæä¾›ä¿¡æ¯éªŒè¯æœºåˆ¶ï¼Œç¡®ä¿è®¾è®¡ä¿¡æ¯çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
</ul>
<h2 data-id="heading-42">å…­ã€ç»“è®º</h2>
<p>ooderA2UI é€šè¿‡ä¸‰ç§æ ¸å¿ƒå»ºæ¨¡æ¨¡å¼ï¼Œå®ç°äº†ä»è‡ªç„¶è¯­è¨€æè¿°åˆ°å¯è¿è¡Œä»£ç çš„æ— ç¼è¡”æ¥ã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨äº† ooderA2UI çš„æ ¸å¿ƒæŠ€æœ¯åŸç†ï¼Œé‡ç‚¹å…³æ³¨äº† LLM å‚ä¸æµç¨‹ã€Skills æŒ‚æ¥æœºåˆ¶ã€bridge code å·¥ä½œåŸç†ä»¥åŠ NlpModule å·¥ä½œåŸç†ç­‰æ ¸å¿ƒå†…å®¹ï¼Œä¸ºæ‚¨æ­å¼€è¿™ä¸ªæ™ºèƒ½è½¬æ¢å¼•æ“çš„æŠ€æœ¯å¥¥ç§˜ã€‚</p>
<p>ooderA2UI çš„æŠ€æœ¯ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>æ™ºèƒ½è®¾è®¡</strong>ï¼šåˆ©ç”¨ LLM å®ç°ä»è‡ªç„¶è¯­è¨€åˆ°è®¾è®¡çš„æ™ºèƒ½è½¬æ¢</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šé€šè¿‡ Skills æœºåˆ¶ï¼Œæ”¯æŒåŠŸèƒ½çš„çµæ´»æ‰©å±•</li>
<li><strong>ä»£ç è´¨é‡é«˜</strong>ï¼šé€šè¿‡ bridge code ç”Ÿæˆæœºåˆ¶ï¼Œç¡®ä¿ç”Ÿæˆä»£ç çš„è´¨é‡å’Œä¸€è‡´æ€§</li>
<li><strong>æµç¨‹å®Œæ•´</strong>ï¼šæä¾›ä»è®¾è®¡åˆ°ä»£ç çš„å®Œæ•´è½¬æ¢æµç¨‹ï¼Œæ”¯æŒå¤šç§å»ºæ¨¡æ¨¡å¼</li>
</ul>
<p>ooderA2UI å±•ç¤ºäº†å¦‚ä½•å°† AI æŠ€æœ¯ä¸ä¼ ç»Ÿçš„ä»£ç ç”ŸæˆæŠ€æœ¯ç›¸ç»“åˆï¼Œä¸ºå‰ç«¯å¼€å‘å¸¦æ¥æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚é€šè¿‡æ·±å…¥ç†è§£å…¶æ ¸å¿ƒæŠ€æœ¯åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°åº”ç”¨å’Œæ‰©å±•è¿™ä¸ªæ™ºèƒ½è½¬æ¢å¼•æ“ï¼Œä¸ºå‰ç«¯å¼€å‘å¸¦æ¥æ›´å¤šä¾¿åˆ©å’Œæ•ˆç‡æå‡ã€‚</p>
<p><strong>ä½œè€…</strong>ï¼šooder å¼€å‘å›¢é˜Ÿ</p>
<p><strong>æ—¥æœŸ</strong>ï¼š2026-02-02</p>
<p><strong>é€‚ç”¨èŒƒå›´</strong>ï¼šooderA2UI 1.0+</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>