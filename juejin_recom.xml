<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ­ç§˜ JS ç»§æ‰¿çš„ â€œæˆç²¾å®¶æ—â€ ï¼šåŸå‹ã€åŸå‹é“¾ä¸ new]]></title>    <link>https://juejin.cn/post/7574352425237069843</link>    <guid>https://juejin.cn/post/7574352425237069843</guid>    <pubDate>2025-11-20T03:00:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574352425237069843" data-draft-id="7574584245109260339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ JS ç»§æ‰¿çš„ â€œæˆç²¾å®¶æ—â€ ï¼šåŸå‹ã€åŸå‹é“¾ä¸ new "/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-11-20T03:00:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ JS ç»§æ‰¿çš„ â€œæˆç²¾å®¶æ—â€ ï¼šåŸå‹ã€åŸå‹é“¾ä¸ new 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:00:36.000Z" title="Thu Nov 20 2025 03:00:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å„ä½ å‰ç«¯er æœ‹å‹ä»¬ï¼Œè¦ææ‡‚ JS çš„é¢å‘å¯¹è±¡å’Œç»§æ‰¿é€»è¾‘ï¼Œç»•ä¸å¼€Â <strong>åŸå‹ï¼ˆprototypeï¼‰ã€éšå¼åŸå‹ï¼ˆ<strong>proto</strong>ï¼‰ã€åŸå‹é“¾</strong>Â è¿™ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œè€ŒÂ <strong>new å…³é”®å­—</strong>Â æ­£æ˜¯ä¸²è”èµ·å®ƒä»¬ã€å®ç°å®ä¾‹åˆ›å»ºçš„å…³é”® <strong>â€œæ¡¥æ¢â€</strong>ã€‚çœ‹åˆ°è¿™é‡Œå°±å·²ç»è§‰å¾—å¾ˆç»•äº†å§ï¼Œæ²¡é”™ã€‚Butï¼è¿™äº›æ¦‚å¿µçœ‹ä¼¼æŠ½è±¡ï¼Œå®åˆ™æ˜¯ JS å¼•æ“ä¼˜åŒ–å±æ€§å¤ç”¨ã€å®ç°ç»§æ‰¿çš„åº•å±‚è®¾è®¡â€”â€”å°±åƒå®¶æ—é‡Œå„æœ‰åˆ†å·¥çš„æˆå‘˜ï¼Œå„å¸å…¶èŒåˆç´§å¯†é…åˆï¼Œæ‰æ’‘èµ·äº† JS ç»§æ‰¿çš„ â€œå¤§æˆâ€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å‡½æ•°çš„ â€œå¤©èµ‹â€â€”â€”prototypeï¼ˆæ˜¾ç¤ºåŸå‹ï¼‰</h3>
<p>å’±å…ˆè¯´è¯´<code>prototype</code>ï¼Œå®ƒå°±åƒå‡½æ•°å¤©ç”Ÿå¸¦çš„ â€œå¤©èµ‹â€ï¼Œ<strong>æ¯ä¸ªå‡½æ•°ä¸€å‡ºç”Ÿå°±è‡ªå¸¦è¿™ä¸ªå¯¹è±¡å±æ€§</strong>ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ª <strong>â€œå…¬å…±ä»“åº“â€</strong>ï¼Œå¾€é‡Œé¢æ”¾çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€æœ‰é€šè¿‡è¿™ä¸ªå‡½æ•°åˆ›å»ºçš„å®ä¾‹éƒ½èƒ½ <strong>â€œå…±äº«â€</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">abc</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-string">'abc'</span>;
}
<span class="hljs-keyword">const</span> arr = [];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">abc</span>());
</code></pre>
<p>å’±ä»¬ç»™<code>Array</code>çš„<code>prototype</code>ï¼ˆæ•°ç»„çš„ â€œå…¬å…±ä»“åº“â€ï¼‰åŠ äº†ä¸ª<code>abc</code>æ–¹æ³•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„<code>arr</code>ï¼Œå®ƒå°±èƒ½ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™å°±æ˜¯å› ä¸º<strong>å®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹å’Œæ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹æ˜¯ç›¸é€šçš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p>å®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹ == æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹</p>
</blockquote>
<p>ç»“æœä¹Ÿè‚¯å®šäº†æˆ‘ä»¬çš„ç»“è®ºï¼Œè¾“å‡º<code>abc</code>:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d194aa7272ce4698b2e7309892c429da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212435&amp;x-signature=Sy8ypKtvFfMujCd1TYJlZcTqt1w%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€å¯¹è±¡çš„ â€œéšå½¢ç¿…è†€â€â€”â€” <strong>proto</strong>ï¼ˆéšå¼åŸå‹ï¼‰</h3>
<p>æ¯ä¸ªå¯¹è±¡ï¼ˆæ³¨æ„æ˜¯<strong>æ‰€æœ‰å¯¹è±¡</strong>ï¼ŒåŒ…æ‹¬å‡½æ•°åˆ›å»ºçš„å®ä¾‹ï¼‰éƒ½æœ‰ä¸ª<code>__proto__</code>ï¼Œå®ƒå°±åƒ â€œéšå½¢ç¿…è†€â€ï¼Œæ‚„æ‚„è¿æ¥ç€è‡ªå·±çš„ â€œåŸå‹é•¿è¾ˆâ€ã€‚V8 å¼•æ“åœ¨æ‰¾å±æ€§çš„æ—¶å€™ï¼Œæ˜¯ä¸ª â€œåŠ¿åˆ©çœ¼â€â€”â€” å…ˆæ‰¾å¯¹è±¡è‡ªå·±çš„<strong>æ˜¾ç¤ºå±æ€§</strong>ï¼Œæ‰¾ä¸åˆ°å°±é¡ºç€<code>__proto__ï¼ˆéšå¼åŸå‹ï¼‰</code>å» â€œåŸå‹é•¿è¾ˆâ€ é‚£é‡Œæ‰’æ‹‰ã€‚å…¶å®ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬æ‰¾ä¸œè¥¿è‚¯å®šå…ˆæ‰¾æ”¾åœ¨æ¡Œå­ä¸Šçœ‹å¾—è§çš„ï¼Œå†å»æ¡Œå­çš„æŠ½å±‰é‡Œé¢æ‰¾ã€‚</p>
<p>å’±è¿˜æ˜¯æ‹¿su7ä¸¾ä¾‹å­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Car.prototype.name</span> = <span class="hljs-string">'su7-Ultra'</span><span class="hljs-comment">;</span>
function Car(color){
    <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">; </span>
}
const <span class="hljs-attr">car1</span> = new Car(<span class="hljs-string">'pink'</span>)<span class="hljs-comment">;</span>
console.log(car1.name)<span class="hljs-comment">; </span>
</code></pre>
<p><code>car1</code>è‡ªå·±åªæœ‰<code>color</code>å±æ€§ï¼Œä½†å®ƒèƒ½é€šè¿‡<code>__proto__</code>æ‰¾åˆ°<code>Car.prototype</code>é‡Œçš„<code>name</code>ã€‚è¿™å°±æ˜¯å› ä¸º<strong>å®ä¾‹å¯¹è±¡çš„__proto__ === æ„é€ å‡½æ•°çš„ prototype</strong>ï¼Œç›¸å½“äº<code>car1.__proto__</code>ç›´æ¥æŒ‡å‘äº†<code>Car.prototype</code>ï¼Œæ‰€ä»¥èƒ½æ‹¿åˆ°é‡Œé¢çš„<code>name</code>~</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61c7c5ae040d4ff5860bcafac01f7940~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212435&amp;x-signature=IDfGPTLggTbAwCMoIq65jkiHlaU%3D" alt="image.png" loading="lazy"/></p>
<p>æˆåŠŸè¾“å‡ºäº†æˆ‘ä»¬çš„<strong>su7-Ultra</strong>ï¼</p>
<h3 data-id="heading-3">ä¸‰ã€â€œé€ äººæœºå™¨â€ new å…³é”®å­—çš„éªšæ“ä½œ</h3>
<p>newæ˜¯å•¥ï¼Œå®ƒå¹²äº†å•¥å‘¢ï¼Ÿ<code>new</code>å…³é”®å­—å°±åƒä¸ª â€œé€ äººæœºå™¨â€ï¼Œå®ƒåˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹å ªç§° â€œæ­¥éª¤å¤§å¸ˆâ€ï¼Œå’±ä»¬æ‹†è§£ä¸€ä¸‹ï¼š</p>
<ol>
<li><strong>åˆ›å»ºç©ºå¯¹è±¡</strong>ï¼šå…ˆé€ ä¸€ä¸ª â€œç©ºå£³å­â€ å¯¹è±¡ï¼Œæ¯”å¦‚<code>new Car()</code>æ—¶ï¼Œå…ˆå¼„ä¸€ä¸ª<code>{}</code>ã€‚</li>
<li><strong>ç»‘å®š this</strong>ï¼šæŠŠæ„é€ å‡½æ•°é‡Œçš„<code>this</code>æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼Œç›¸å½“äºå‘Šè¯‰æ„é€ å‡½æ•°ï¼šâ€œæ¥ä¸‹æ¥ç»™è¿™ä¸ªç©ºå£³å­å¡ä¸œè¥¿å“ˆï¼â€</li>
<li><strong>æ‰§è¡Œæ„é€ å‡½æ•°ä»£ç </strong>ï¼šæ¯”å¦‚<code>Car</code>é‡Œçš„<code>this.color = color</code>ï¼Œå°±æ˜¯å¾€ç©ºå¯¹è±¡é‡ŒåŠ å±æ€§ã€‚</li>
<li><strong>è¿æ¥åŸå‹</strong>ï¼šæŠŠç©ºå¯¹è±¡çš„<code>__proto__</code>ç›´æ¥èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„<code>prototype</code>ï¼Œè®©å®ä¾‹å’Œ â€œå…¬å…±ä»“åº“â€ æ‰“é€šã€‚</li>
<li><strong>è¿”å›å¯¹è±¡</strong>ï¼šæœ€åæŠŠè¿™ä¸ª â€œè£…ä¿®å¥½â€ çš„å¯¹è±¡è¿”å›å‡ºå»ã€‚</li>
</ol>
<p>ä¸Šä»£ç æ›´æ¸…æ™°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function Car(){ 
    // const <span class="hljs-attr">obj</span> = {}<span class="hljs-comment">;  // æ­¥éª¤1ï¼šåˆ›å»ºç©ºå¯¹è±¡</span>
    <span class="hljs-attr">this.name</span> = <span class="hljs-string">'su7'</span><span class="hljs-comment">;  // æ­¥éª¤2ï¼Œ3</span>
    // <span class="hljs-attr">obj.__proto__</span> = Car.prototype<span class="hljs-comment">; // æ­¥éª¤4ï¼šè¿æ¥åŸå‹</span>
    // return obj<span class="hljs-comment">; // æ­¥éª¤5ï¼šè¿”å›å¯¹è±¡</span>
}
const <span class="hljs-attr">car</span> = new Car()<span class="hljs-comment">;</span>
console.log(car.constructor)<span class="hljs-comment">; // èƒ½æ‰¾åˆ°æ„é€ å‡½æ•°Carï¼Œå› ä¸ºåŸå‹é“¾è¿èµ·æ¥äº†</span>
</code></pre>
<p>ç»“æœä¹Ÿåœ¨æˆ‘ä»¬æ„æ–™ä¹‹ä¸­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d796c408ed5e478cb0ba95c9abf09b7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212435&amp;x-signature=jGS1YrivPSakdJXxPDp8MGLaHUs%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¹ˆä¸€æ‹†è§£ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—<code>new</code>å…¶å®å°±æ˜¯ä¸ª â€œæµæ°´çº¿åŒ…å·¥å¤´â€ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡çš„æ­¥éª¤å®‰æ’å¾—æ˜æ˜ç™½ç™½ï½</p>
<h3 data-id="heading-4">å››ã€åŸå‹é“¾ï¼šJavaScript çš„ â€œæ—è°±â€</h3>
<p>åŸå‹éƒ½æå®šäº†ï¼Œé‚£åŸå‹é“¾ä¹Ÿå°±æ˜¯é¡¾åæ€ä¹‰äº†ã€‚<strong>åŸå‹é“¾</strong>å°±æ˜¯æŠŠè¿™äº›<code>__proto__</code>å’Œ<code>prototype</code>ä¸²èµ·æ¥çš„ â€œæ—è°±â€ã€‚V8 æ‰¾å±æ€§æ—¶ï¼Œä¼šæ²¿ç€è¿™ä¸ª â€œæ—è°±â€ å¾€ä¸Šæ‰’ï¼Œç›´åˆ°æ‰’åˆ°<code>null</code>ï¼ˆæ—è°±çš„ â€œè€ç¥–å®—â€ï¼Œå†å¾€ä¸Šæ²¡äº†ï¼‰ä¸ºæ­¢ã€‚</p>
<p>çœ‹è¿™æ®µ â€œç¥–å­™ä¸‰ä»£â€ çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Grand</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">house</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å››åˆé™¢'</span>);
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Grand</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">card</span> = <span class="hljs-number">10000</span>;
}
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Grand</span>(); <span class="hljs-comment">// {card: 10000}.__proto__ = Grand.prototype.__proto__ = Object.prototype.__proto__ = null</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = <span class="hljs-string">'harvest'</span>;
}
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>(); <span class="hljs-comment">// {lastName = 'harvest'}.__proto__ = arent.prototype</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>;
}
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(); <span class="hljs-comment">// {age: 18}.__proto__ = Child.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">card</span>);
c.<span class="hljs-title function_">house</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-title function_">toString</span>());
</code></pre>
<p>è§‰å¾—å¾ˆé•¿å¾ˆä¹±å§ï¼Œæ²¡å…³ç³»ä¸€èµ·æ¥ï¼Œçœ‹çœ‹ <strong>â€œå­™å­câ€</strong> æ€ä¹ˆå‡­ç€<strong>æ—è°±</strong> â€œè¹­â€ ç¥–ä¸Šçš„ä¸œè¥¿ï¼š</p>
<h4 data-id="heading-5">1.Â <code>console.log(c.card);</code>Â â€”â€” è¾“å‡ºï¼š10000</h4>
<p>å’±ä¸€æ­¥æ­¥çœ‹ â€œè®¤ç¥–å½’å®—â€ çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>å…ˆç¿» c è‡ªå·±çš„å£è¢‹ï¼šåªæœ‰<code>age:18</code>ï¼Œæ²¡<code>card</code>ï¼Œææ—è°±ï¼</li>
<li>é¡ºç€<code>c.__proto__</code>æ‰¾çˆ¸çˆ¸çš„ä»“åº“ï¼ˆ<code>Child.prototype</code>ï¼Œä¹Ÿå°±æ˜¯<code>new Parent()</code>çš„å®ä¾‹ï¼‰ï¼šçˆ¸çˆ¸çš„ä»“åº“é‡Œåªæœ‰<code>lastName: 'harvest'</code>ï¼Œè¿˜æ²¡<code>card</code>ï¼Œç»§ç»­å¾€ä¸Šæ‰¾ï¼</li>
<li>å†é¡ºç€çˆ¸çˆ¸ä»“åº“çš„<code>__proto__</code>ï¼ˆ<code>Parent.prototype.__proto__</code>ï¼‰æ‰¾çˆ·çˆ·çš„ä»“åº“ï¼ˆ<code>Grand.prototype</code>ï¼‰ï¼šçˆ·çˆ·çš„ä»“åº“é‡Œæœ‰<code>card:10000</code>ï¼ˆçˆ·çˆ·æ„é€ å‡½æ•°é‡Œçš„ä¸“å±å±æ€§ï¼‰ï¼Œæ‰¾åˆ°äº†ï¼</li>
<li>æ‰€ä»¥ç›´æ¥è¾“å‡ºçˆ·çˆ·ç»™çš„ â€œå¯åŠ¨èµ„é‡‘â€ 10000â€”â€” è¿™å°±æ˜¯ â€œæˆç²¾å®¶æ—â€ çš„ä¼ æ‰¿ï¼Œå­™å­èƒ½è¹­åˆ°çˆ·çˆ·çš„é“¶è¡Œå¡ğŸ’³ï¼</li>
</ul>
<h4 data-id="heading-6">2.Â <code>c.house();</code>Â â€”â€” è¾“å‡ºï¼šå››åˆé™¢</h4>
<p>åŒæ ·æŒ‰æ—è°±å¯»äº²ï¼š</p>
<ul>
<li>å…ˆç¿» c è‡ªå·±çš„å£è¢‹ï¼šæ²¡<code>house</code>æ–¹æ³•ï¼Œææ—è°±ï¼</li>
<li>æ‰¾çˆ¸çˆ¸çš„ä»“åº“ï¼šåªæœ‰<code>lastName</code>ï¼Œæ²¡æœ‰<code>house</code>ï¼Œç»§ç»­å¾€ä¸Šï¼</li>
<li>æ‰¾çˆ·çˆ·çš„ä»“åº“ï¼ˆ<code>Grand.prototype</code>ï¼‰ï¼šå˜¿ï¼Œçˆ·çˆ·çš„ç¥–ä¼ ä»“åº“é‡Œæ­£å¥½æœ‰<code>house</code>æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨ï¼</li>
<li>æ‰€ä»¥æ‰§è¡Œåè¾“å‡º <strong>â€œå››åˆé™¢â€</strong>â€”â€” ç›¸å½“äºå­™å­å‡­ç€æ—è°±ï¼Œç›´æ¥ç”¨äº†çˆ·çˆ·çš„ â€œç¥–ä¼ æˆ¿äº§â€ æŠ€èƒ½ï¼</li>
</ul>
<h4 data-id="heading-7">3.Â <code>console.log(c.toString());</code>Â â€”â€” è¾“å‡ºï¼š[object Object]</h4>
<p>è¿™æ³¢æ˜¯ â€œè¹­åˆ°äº†å®¶æ—çš„è€è€ç¥–å®—â€ï¼ˆ<code>Object</code>ï¼‰çš„å¥½å¤„ï¼š</p>
<ul>
<li>å…ˆç¿» c è‡ªå·±çš„å£è¢‹ï¼šæ²¡<code>toString</code>æ–¹æ³•ï¼Œææ—è°±ï¼</li>
<li>æ‰¾çˆ¸çˆ¸ä»“åº“ï¼šæ²¡æœ‰ï¼Œæ‰¾çˆ·çˆ·ä»“åº“ï¼šä¹Ÿæ²¡æœ‰ï¼ˆçˆ·çˆ·åªç»™äº†<code>card</code>å’Œ<code>house</code>ï¼‰ï¼Œç»§ç»­å¾€ä¸Šï¼</li>
<li>é¡ºç€çˆ·çˆ·ä»“åº“çš„<code>__proto__</code>ï¼ˆ<code>Grand.prototype.__proto__</code>ï¼‰æ‰¾ â€œè€è€ç¥–å®—â€<code>Object</code>çš„ä»“åº“ï¼ˆ<code>Object.prototype</code>ï¼‰ï¼šè¿™é‡Œè—ç€ JavaScript æ‰€æœ‰å¯¹è±¡éƒ½èƒ½å…±ç”¨çš„<code>toString</code>æ–¹æ³•ï¼</li>
<li>è°ƒç”¨åå°±è¾“å‡ºé»˜è®¤æ ¼å¼<code>[object Object]</code>â€”â€” ç›¸å½“äº â€œæˆç²¾å®¶æ—â€ çš„æ—è°±æœ€é¡¶ç«¯ï¼Œè¿˜è¿ç€æ‰€æœ‰å¯¹è±¡çš„ â€œå…¬å…±è€ç¥–å®—â€ï¼Œå¥½å¤„èƒ½è¹­åˆ°æœ€ä¸Šå¤´ï¼</li>
</ul>
<p>è¾“å‡ºç»“æœå’Œæˆ‘ä»¬åˆ†æçš„ä¸€æ¨¡ä¸€æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d76b73a7da54c9487d173561e8a0a9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212435&amp;x-signature=d0OCy0EbX%2BoDuRUviRsJU%2BBKYIY%3D" alt="image.png" loading="lazy"/></p>
<p>OKï¼Œä¸‹è¯¾ï¼</p>
<h2 data-id="heading-8">æ€»ç»“ï¼šâ€œæˆç²¾å®¶æ—â€ çš„ä¼ æ‰¿é€»è¾‘</h2>
<ul>
<li><code>prototype</code>æ˜¯æ¯ä¸ª â€œå®¶æ—é•¿è¾ˆâ€ï¼ˆå‡½æ•°ï¼‰çš„ â€œç¥–ä¼ ä»“åº“â€ï¼Œå…±äº«å±æ€§æ–¹æ³•å…¨åœ¨è¿™ï¼›</li>
<li><code>__proto__</code>æ˜¯æ¯ä¸ª â€œå®¶æ—æˆå‘˜â€ï¼ˆå¯¹è±¡ï¼‰çš„ â€œéšå½¢æ—è°±â€ï¼Œè´Ÿè´£è¿æ¥ä¸Šä¸€è¾ˆçš„ä»“åº“ï¼›</li>
<li><code>new</code>æ˜¯ â€œå®¶æ—é€ äººå¸ˆâ€ï¼Œä¸ä»…é€ æ–°æˆå‘˜ï¼Œè¿˜å¾—ç»™å®ƒä¸Š â€œå®¶æ—æˆ·å£â€ï¼ˆè¿æ—è°±ï¼‰ï¼›</li>
<li>åŸå‹é“¾æ˜¯ â€œå®Œæ•´æ—è°±â€ï¼Œå±æ€§æŸ¥æ‰¾å…¨é å®ƒ â€œä»£ä»£å¾€ä¸Šè¹­â€ï¼Œç›´åˆ°è¹­åˆ°<code>null</code>ä¸ºæ­¢ã€‚</li>
</ul>
<p>è¿™ <strong>â€œæˆç²¾å®¶æ—â€</strong> çš„ä¼ æ‰¿é€»è¾‘ï¼Œæœ¬è´¨å°±æ˜¯ JavaScript çš„ç»§æ‰¿æ ¸å¿ƒ â€”â€” ä¸ç”¨é‡å¤é€ è½®å­ï¼Œæ™šè¾ˆå‡­ç€æ—è°±å°±èƒ½å…±äº«ç¥–ä¸Šçš„ â€œèµ„æºâ€ï¼Œæ—¢çœç©ºé—´åˆé«˜æ•ˆã€‚æ¯ä¸ªå±æ€§å’Œæ–¹æ³•çš„æŸ¥æ‰¾ï¼Œéƒ½æ˜¯ä¸€åœºæœ‰è¶£çš„ â€œå®¶æ—å¯»äº²è®°â€ã€‚</p>
<blockquote>
<p>å¼€å¯ä¸€åœºâ€œå¯»äº²ä¹‹æ—…â€å§ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3+TSè®¾è®¡æ¨¡å¼å®æˆ˜ï¼š5ä¸ªåœºæ™¯è®©ä»£ç ä¼˜é›…ç¿»å€]]></title>    <link>https://juejin.cn/post/7574370234069745718</link>    <guid>https://juejin.cn/post/7574370234069745718</guid>    <pubDate>2025-11-20T03:00:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574370234069745718" data-draft-id="7574343024325378089" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3+TSè®¾è®¡æ¨¡å¼å®æˆ˜ï¼š5ä¸ªåœºæ™¯è®©ä»£ç ä¼˜é›…ç¿»å€"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-20T03:00:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‡ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453424542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3+TSè®¾è®¡æ¨¡å¼å®æˆ˜ï¼š5ä¸ªåœºæ™¯è®©ä»£ç ä¼˜é›…ç¿»å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453424542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‡ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:00:39.000Z" title="Thu Nov 20 2025 03:00:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Vue3+TypeScriptå¼€å‘ä¸­ï¼Œå†™â€œèƒ½è·‘çš„ä»£ç â€å¾ˆå®¹æ˜“ï¼Œä½†å†™â€œä¼˜é›…ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•â€çš„ä»£ç å´éœ€è¦æ€è€ƒã€‚è®¾è®¡æ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œä½†åˆç†è¿ç”¨èƒ½å¸®æˆ‘ä»¬è§£å†³é‡å¤å‡ºç°çš„é—®é¢˜ï¼Œè®©ä»£ç ç»“æ„æ›´æ¸…æ™°ã€é€»è¾‘æ›´å¥å£®ã€‚</p>
<p>æœ¬æ–‡ç»“åˆ5ä¸ªçœŸå®ä¸šåŠ¡åœºæ™¯ï¼Œè®²è§£<strong>å•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼</strong>åœ¨Vue3+TSä¸­çš„å®è·µï¼Œæ¯ä¸ªåœºæ™¯éƒ½é™„å®Œæ•´ä»£ç ç¤ºä¾‹å’Œä¼˜åŒ–æ€è·¯ã€‚</p>
<h2 data-id="heading-0">åœºæ™¯1ï¼šå…¨å±€çŠ¶æ€ç®¡ç† - å•ä¾‹æ¨¡å¼</h2>
<h3 data-id="heading-1">åœºæ™¯ç—›ç‚¹</h3>
<p>é¡¹ç›®ä¸­éœ€è¦å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜é…ç½®ï¼‰ï¼Œå¦‚æœå¤šæ¬¡åˆ›å»ºçŠ¶æ€å®ä¾‹ï¼Œä¼šå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ï¼Œä¸”æµªè´¹èµ„æºã€‚</p>
<h3 data-id="heading-2">è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šå•ä¾‹æ¨¡å¼</h3>
<p>å•ä¾‹æ¨¡å¼ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚Vue3çš„Piniaæœ¬è´¨å°±æ˜¯å•ä¾‹æ¨¡å¼çš„å®ç°ï¼Œä½†æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ›´çµæ´»çš„å•ä¾‹é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">ä»£ç å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// stores/singletonUserStore.ts</span>
<span class="hljs-keyword">import</span> { reactive, toRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰ç”¨æˆ·çŠ¶æ€æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserState</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">token</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserStore</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">UserStore</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">UserState</span>

  <span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨new</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title function_">reactive</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">token</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>) || <span class="hljs-string">''</span>,
      <span class="hljs-attr">isLogin</span>: !!<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    })
  }

  <span class="hljs-comment">// å…¨å±€è®¿é—®ç‚¹</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">UserStore</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">UserStore</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">UserStore</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserStore</span>()
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">UserStore</span>.<span class="hljs-property">instance</span>
  }

  <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">token: <span class="hljs-built_in">string</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">token</span> = token
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">name</span> = name
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLogin</span> = <span class="hljs-literal">true</span>
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token)
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">token</span> = <span class="hljs-string">''</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">name</span> = <span class="hljs-string">''</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLogin</span> = <span class="hljs-literal">false</span>
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
  }

  <span class="hljs-comment">// æš´éœ²å“åº”å¼çŠ¶æ€</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">toRefs</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>)
  }
}

<span class="hljs-comment">// å¯¼å‡ºå•ä¾‹å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userStore = <span class="hljs-title class_">UserStore</span>.<span class="hljs-title function_">getInstance</span>()
</code></pre>
<h3 data-id="heading-4">ä¼˜é›…ä¹‹å¤„</h3>
<ul>
<li>
<p>å…¨å±€å”¯ä¸€å®ä¾‹ï¼Œé¿å…çŠ¶æ€å†²çª</p>
</li>
<li>
<p>å°è£…æ€§å¼ºï¼ŒçŠ¶æ€ä¿®æ”¹åªèƒ½é€šè¿‡å®ä¾‹æ–¹æ³•ï¼Œé¿å…ç›´æ¥ç¯¡æ”¹</p>
</li>
<li>
<p>ç»“åˆTSæ¥å£ï¼Œç±»å‹æç¤ºå®Œæ•´ï¼Œå‡å°‘ç±»å‹é”™è¯¯</p>
</li>
</ul>
<h2 data-id="heading-5">åœºæ™¯2ï¼šåŠ¨æ€ç»„ä»¶æ¸²æŸ“ - å·¥å‚æ¨¡å¼</h2>
<h3 data-id="heading-6">åœºæ™¯ç—›ç‚¹</h3>
<p>è¡¨å•é¡µé¢éœ€è¦æ ¹æ®ä¸åŒå­—æ®µç±»å‹ï¼ˆè¾“å…¥æ¡†ã€ä¸‹æ‹‰æ¡†ã€æ—¥æœŸé€‰æ‹©å™¨ï¼‰æ¸²æŸ“ä¸åŒç»„ä»¶ï¼Œå¦‚æœç”¨if-elseåˆ¤æ–­ï¼Œä»£ç ä¼šè‡ƒè‚¿ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-7">è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šå·¥å‚æ¨¡å¼</h3>
<p>å·¥å‚æ¨¡å¼å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚åœ¨Vueä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºâ€œç»„ä»¶å·¥å‚â€ï¼Œæ ¹æ®ç±»å‹åŠ¨æ€è¿”å›å¯¹åº”ç»„ä»¶ã€‚</p>
<h3 data-id="heading-8">ä»£ç å®ç°</h3>
<pre><code class="hljs language-vue" lang="vue">
&lt;template&gt;
  &lt;div class="form-container"&gt;
    &lt;component 
      v-for="field in fields" 
      :key="field.id"
      :is="getFormComponent(field.type)"
      v-model="formData[field.key]"
      :label="field.label"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue'
import InputComponent from './components/InputComponent.vue'
import SelectComponent from './components/SelectComponent.vue'
import DatePickerComponent from './components/DatePickerComponent.vue'

// å®šä¹‰å­—æ®µç±»å‹
type FieldType = 'input' | 'select' | 'date'

interface Field {
  id: string
  key: string
  label: string
  type: FieldType
  options?: { label: string; value: string }[]
}

// ç»„ä»¶å·¥å‚ï¼šæ ¹æ®ç±»å‹è¿”å›ç»„ä»¶
const getFormComponent = (type: FieldType) =&gt; {
  switch (type) {
    case 'input':
      return InputComponent
    case 'select':
      return SelectComponent
    case 'date':
      return DatePickerComponent
    default:
      throw new Error(`ä¸æ”¯æŒçš„å­—æ®µç±»å‹ï¼š${type}`)
  }
}

// è¡¨å•æ•°æ®å’Œå­—æ®µé…ç½®
const formData = ref({
  username: '',
  gender: '',
  birthday: ''
})

const fields: Field[] = [
  { id: '1', key: 'username', label: 'ç”¨æˆ·å', type: 'input' },
  { 
    id: '2', 
    key: 'gender', 
    label: 'æ€§åˆ«', 
    type: 'select',
    options: [{ label: 'ç”·', value: 'male' }, { label: 'å¥³', value: 'female' }]
  },
  { id: '3', key: 'birthday', label: 'ç”Ÿæ—¥', type: 'date' }
]
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9">ä¼˜é›…ä¹‹å¤„</h3>
<ul>
<li>
<p>æ¶ˆé™¤å¤§é‡if-elseï¼Œä»£ç ç»“æ„æ¸…æ™°</p>
</li>
<li>
<p>æ–°å¢ç»„ä»¶ç±»å‹åªéœ€ä¿®æ”¹å·¥å‚å‡½æ•°ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</p>
</li>
<li>
<p>å­—æ®µé…ç½®ä¸ç»„ä»¶æ¸²æŸ“åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤</p>
</li>
</ul>
<h2 data-id="heading-10">åœºæ™¯3ï¼šè·¨ç»„ä»¶é€šä¿¡ - è§‚å¯Ÿè€…æ¨¡å¼</h2>
<h3 data-id="heading-11">åœºæ™¯ç—›ç‚¹</h3>
<p>éçˆ¶å­ç»„ä»¶ï¼ˆå¦‚Headerå’ŒFooterï¼‰éœ€è¦é€šä¿¡ï¼ˆå¦‚ä¸»é¢˜åˆ‡æ¢ï¼‰ï¼Œç”¨Props/Emitså¤ªç¹çï¼Œç”¨Piniaåˆæ²¡å¿…è¦ï¼ˆä»…å•ä¸€äº‹ä»¶é€šä¿¡ï¼‰ã€‚</p>
<h3 data-id="heading-12">è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šè§‚å¯Ÿè€…æ¨¡å¼</h3>
<p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ã€‚æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶æ€»çº¿ã€‚</p>
<h3 data-id="heading-13">ä»£ç å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// utils/eventBus.ts</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventBus</span> {
  <span class="hljs-comment">// å­˜å‚¨äº‹ä»¶è®¢é˜…è€…</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">events</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, (<span class="hljs-function">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span>)[]&gt; = {}

  <span class="hljs-comment">// è®¢é˜…äº‹ä»¶</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventName: <span class="hljs-built_in">string</span>, callback: (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName] = []
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">push</span>(callback)
  }

  <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">eventName: <span class="hljs-built_in">string</span>, ...args: <span class="hljs-built_in">any</span>[]</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(...args))
    }
  }

  <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">eventName: <span class="hljs-built_in">string</span>, callback?: (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">if</span> (callback) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb !== callback)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]
    }
  }
}

<span class="hljs-comment">// å¯¼å‡ºå•ä¾‹äº‹ä»¶æ€»çº¿</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> eventBus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventBus</span>()
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
&lt;!-- Header.vue --&gt;
&lt;script setup lang="ts"&gt;
import { eventBus } from '@/utils/eventBus'

const toggleTheme = () =&gt; {
  // å‘å¸ƒä¸»é¢˜åˆ‡æ¢äº‹ä»¶
  eventBus.emit('theme-change', 'dark')
}
&lt;/script&gt;

&lt;!-- Footer.vue --&gt;
&lt;script setup lang="ts"&gt;
import { ref, onMounted, onUnmounted } from 'vue'
import { eventBus } from '@/utils/eventBus'

const theme = ref('light')

const handleThemeChange = (newTheme: string) =&gt; {
  theme.value = newTheme
}

onMounted(() =&gt; {
  // è®¢é˜…ä¸»é¢˜åˆ‡æ¢äº‹ä»¶
  eventBus.on('theme-change', handleThemeChange)
})

onUnmounted(() =&gt; {
  // å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼
  eventBus.off('theme-change', handleThemeChange)
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">ä¼˜é›…ä¹‹å¤„</h3>
<ul>
<li>
<p>è§£è€¦ç»„ä»¶ï¼Œæ— éœ€å…³æ³¨ç»„ä»¶å±‚çº§å…³ç³»</p>
</li>
<li>
<p>è½»é‡çº§é€šä¿¡ï¼Œæ¯”Piniaæ›´é€‚åˆç®€å•åœºæ™¯</p>
</li>
<li>
<p>æ”¯æŒè®¢é˜…/å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼</p>
</li>
</ul>
<h2 data-id="heading-15">åœºæ™¯4ï¼šè¡¨å•éªŒè¯ - ç­–ç•¥æ¨¡å¼</h2>
<h3 data-id="heading-16">åœºæ™¯ç—›ç‚¹</h3>
<p>è¡¨å•éœ€è¦å¤šç§éªŒè¯è§„åˆ™ï¼ˆå¿…å¡«ã€é‚®ç®±æ ¼å¼ã€å¯†ç å¼ºåº¦ï¼‰ï¼Œå¦‚æœæŠŠéªŒè¯é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œä»£ç ä¼šæ··ä¹±ä¸”éš¾ä»¥å¤ç”¨ã€‚</p>
<h3 data-id="heading-17">è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šç­–ç•¥æ¨¡å¼</h3>
<p>ç­–ç•¥æ¨¡å¼å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸åŒéªŒè¯è§„åˆ™å°è£…ä¸ºâ€œç­–ç•¥â€ï¼ŒåŠ¨æ€é€‰æ‹©ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-18">ä»£ç å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// utils/validator.ts</span>
<span class="hljs-comment">// å®šä¹‰éªŒè¯è§„åˆ™æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ValidationRule</span> {
  <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// éªŒè¯ç­–ç•¥é›†åˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">validationStrategies</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">ValidationRule</span>&gt; = {
  <span class="hljs-comment">// å¿…å¡«éªŒè¯</span>
  <span class="hljs-attr">required</span>: {
    <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value.<span class="hljs-title function_">trim</span>() !== <span class="hljs-string">''</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'æ­¤å­—æ®µä¸èƒ½ä¸ºç©º'</span>
  },
  <span class="hljs-comment">// é‚®ç®±éªŒè¯</span>
  <span class="hljs-attr">email</span>: {
    <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.<span class="hljs-title function_">test</span>(value),
    <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼'</span>
  },
  <span class="hljs-comment">// å¯†ç å¼ºåº¦éªŒè¯ï¼ˆè‡³å°‘8ä½ï¼Œå«å­—æ¯å’Œæ•°å­—ï¼‰</span>
  <span class="hljs-attr">password</span>: {
    <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-regexp">/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/</span>.<span class="hljs-title function_">test</span>(value),
    <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—'</span>
  }
}

<span class="hljs-comment">// éªŒè¯å™¨ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Validator</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">rules</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>[]&gt; = {} <span class="hljs-comment">// { field: [rule1, rule2] }</span>

  <span class="hljs-comment">// æ·»åŠ éªŒè¯è§„åˆ™</span>
  <span class="hljs-title function_">addField</span>(<span class="hljs-params">field: <span class="hljs-built_in">string</span>, rules: <span class="hljs-built_in">string</span>[]</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>[field] = rules
  }

  <span class="hljs-comment">// æ‰§è¡ŒéªŒè¯</span>
  <span class="hljs-title function_">validate</span>(<span class="hljs-attr">formData</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">errors</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {}

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[field, rules]</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = formData[field]
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
        <span class="hljs-keyword">const</span> strategy = validationStrategies[rule]
        <span class="hljs-keyword">if</span> (!strategy.<span class="hljs-title function_">validate</span>(value)) {
          errors[field] = strategy.<span class="hljs-property">message</span>
          <span class="hljs-keyword">break</span> <span class="hljs-comment">// åªè¦æœ‰ä¸€ä¸ªè§„åˆ™ä¸é€šè¿‡ï¼Œå°±åœæ­¢è¯¥å­—æ®µéªŒè¯</span>
        }
      }
    })

    <span class="hljs-keyword">return</span> errors
  }
}

<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Validator</span> }
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
&lt;script setup lang="ts"&gt;
import { ref } from 'vue'
import { Validator } from '@/utils/validator'

const formData = ref({
  email: '',
  password: ''
})

const errors = ref&lt;Record&lt;string, string&gt;&gt;({})

const handleSubmit = () =&gt; {
  // åˆ›å»ºéªŒè¯å™¨å®ä¾‹
  const validator = new Validator()
  // æ·»åŠ éªŒè¯è§„åˆ™
  validator.addField('email', ['required', 'email'])
  validator.addField('password', ['required', 'password'])
  // æ‰§è¡ŒéªŒè¯
  const validateErrors = validator.validate(formData.value)
  
  if (Object.keys(validateErrors).length === 0) {
    // éªŒè¯é€šè¿‡ï¼Œæäº¤è¡¨å•
    console.log('æäº¤æˆåŠŸ', formData.value)
  } else {
    errors.value = validateErrors
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-19">ä¼˜é›…ä¹‹å¤„</h3>
<ul>
<li>
<p>éªŒè¯è§„åˆ™ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œå¯å¤ç”¨æ€§å¼º</p>
</li>
<li>
<p>æ–°å¢è§„åˆ™åªéœ€æ‰©å±•ç­–ç•¥é›†åˆï¼Œç¬¦åˆå¼€é—­åŸåˆ™</p>
</li>
<li>
<p>éªŒè¯é€»è¾‘æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæµ‹è¯•</p>
</li>
</ul>
<h2 data-id="heading-20">åœºæ™¯5ï¼šæ ‘å½¢ç»“æ„ç»„ä»¶ - ç»„åˆæ¨¡å¼</h2>
<h3 data-id="heading-21">åœºæ™¯ç—›ç‚¹</h3>
<p>å¼€å‘æƒé™èœå•ã€æ–‡ä»¶ç›®å½•ç­‰æ ‘å½¢ç»„ä»¶æ—¶ï¼Œéœ€è¦å¤„ç†å•ä¸ªèŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„ç»Ÿä¸€æ“ä½œï¼ˆå¦‚å±•å¼€/æŠ˜å ã€å‹¾é€‰ï¼‰ï¼Œé€’å½’é€»è¾‘å¤æ‚ã€‚</p>
<h3 data-id="heading-22">è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šç»„åˆæ¨¡å¼</h3>
<p>ç»„åˆæ¨¡å¼å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-23">ä»£ç å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// utils/treeNode.ts</span>
<span class="hljs-comment">// å®šä¹‰èŠ‚ç‚¹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TreeNodeProps</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>
  children?: <span class="hljs-title class_">TreeNodeProps</span>[]
  expanded?: <span class="hljs-built_in">boolean</span>
  checked?: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">public</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">public</span> <span class="hljs-attr">children</span>: <span class="hljs-title class_">TreeNode</span>[] = []
  <span class="hljs-keyword">public</span> <span class="hljs-attr">expanded</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-keyword">public</span> <span class="hljs-attr">checked</span>: <span class="hljs-built_in">boolean</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props: TreeNodeProps</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = props.<span class="hljs-property">id</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = props.<span class="hljs-property">label</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">expanded</span> = props.<span class="hljs-property">expanded</span> ?? <span class="hljs-literal">false</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span> = props.<span class="hljs-property">checked</span> ?? <span class="hljs-literal">false</span>
    <span class="hljs-comment">// é€’å½’åˆ›å»ºå­èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">children</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = props.<span class="hljs-property">children</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(child))
    }
  }

  <span class="hljs-comment">// å±•å¼€/æŠ˜å èŠ‚ç‚¹</span>
  <span class="hljs-title function_">toggleExpand</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">expanded</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">expanded</span>
  }

  <span class="hljs-comment">// å‹¾é€‰èŠ‚ç‚¹ï¼ˆå¹¶è”åŠ¨å­èŠ‚ç‚¹ï¼‰</span>
  <span class="hljs-title function_">toggleCheck</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      child.<span class="hljs-title function_">setChecked</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span>)
    })
  }

  <span class="hljs-comment">// è®¾ç½®èŠ‚ç‚¹å‹¾é€‰çŠ¶æ€</span>
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-params">checked: <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span> = checked
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      child.<span class="hljs-title function_">setChecked</span>(checked)
    })
  }

  <span class="hljs-comment">// è·å–æ‰€æœ‰å‹¾é€‰çš„èŠ‚ç‚¹ID</span>
  <span class="hljs-title function_">getCheckedIds</span>(): <span class="hljs-built_in">string</span>[] {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">checkedIds</span>: <span class="hljs-built_in">string</span>[] = []
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span>) {
      checkedIds.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>)
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      checkedIds.<span class="hljs-title function_">push</span>(...child.<span class="hljs-title function_">getCheckedIds</span>())
    })
    <span class="hljs-keyword">return</span> checkedIds
  }
}

<span class="hljs-keyword">export</span> { <span class="hljs-title class_">TreeNode</span> }
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
&lt;template&gt;
  &lt;ul class="tree-list"&gt;
    &lt;tree-node-item :node="treeRoot" /&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { TreeNode } from '@/utils/treeNode'
import TreeNodeItem from './TreeNodeItem.vue'

// åˆå§‹åŒ–æ ‘å½¢æ•°æ®
const treeData = {
  id: 'root',
  label: 'æƒé™èœå•',
  children: [
    {
      id: '1',
      label: 'ç”¨æˆ·ç®¡ç†',
      children: [
        { id: '1-1', label: 'æŸ¥çœ‹ç”¨æˆ·' },
        { id: '1-2', label: 'ç¼–è¾‘ç”¨æˆ·' }
      ]
    },
    { id: '2', label: 'è§’è‰²ç®¡ç†' }
  ]
}

const treeRoot = new TreeNode(treeData)
&lt;/script&gt;

&lt;!-- TreeNodeItem.vue é€’å½’ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;li class="tree-node"&gt;
    &lt;div @click="node.toggleExpand()" class="node-label"&gt;
      &lt;span v-if="node.children.length"&gt;{{ node.expanded ? 'â–¼' : 'â–º' }}&lt;/span&gt;
      &lt;input type="checkbox" :checked="node.checked" @change="node.toggleCheck()"&gt;
      {{ node.label }}
    &lt;/div&gt;
    &lt;ul v-if="node.expanded &amp;&amp; node.children.length" class="tree-children"&gt;
      &lt;tree-node-item v-for="child in node.children" :key="child.id" :node="child" /&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { defineProps } from 'vue'
import { TreeNode } from '@/utils/treeNode'

defineProps&lt;{
  node: TreeNode
}&gt;()
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-24">ä¼˜é›…ä¹‹å¤„</h3>
<ul>
<li>
<p>ç»Ÿä¸€å¤„ç†å•ä¸ªèŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ï¼Œæ— éœ€åŒºåˆ†â€œéƒ¨åˆ†â€å’Œâ€œæ•´ä½“â€</p>
</li>
<li>
<p>é€’å½’é€»è¾‘å°è£…åœ¨TreeNodeç±»ä¸­ï¼Œç»„ä»¶åªè´Ÿè´£æ¸²æŸ“</p>
</li>
<li>
<p>æ ‘å½¢æ“ä½œï¼ˆå‹¾é€‰ã€å±•å¼€ï¼‰èŒè´£å•ä¸€ï¼Œä¾¿äºæ‰©å±•</p>
</li>
</ul>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>è®¾è®¡æ¨¡å¼ä¸æ˜¯â€œç‚«æŠ€â€ï¼Œè€Œæ˜¯è§£å†³é—®é¢˜çš„â€œæ–¹æ³•è®ºâ€ã€‚åœ¨Vue3+TSå¼€å‘ä¸­ï¼š</p>
<ul>
<li>
<p><strong>å•ä¾‹æ¨¡å¼</strong>é€‚åˆå…¨å±€çŠ¶æ€ã€å·¥å…·ç±»ç­‰å”¯ä¸€å®ä¾‹åœºæ™¯</p>
</li>
<li>
<p><strong>å·¥å‚æ¨¡å¼</strong>é€‚åˆåŠ¨æ€åˆ›å»ºç»„ä»¶ã€æœåŠ¡ç­‰åœºæ™¯</p>
</li>
<li>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>é€‚åˆè·¨ç»„ä»¶é€šä¿¡ã€äº‹ä»¶ç›‘å¬åœºæ™¯</p>
</li>
<li>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>é€‚åˆè¡¨å•éªŒè¯ã€ç®—æ³•åˆ‡æ¢ç­‰åœºæ™¯</p>
</li>
<li>
<p><strong>ç»„åˆæ¨¡å¼</strong>é€‚åˆæ ‘å½¢ç»“æ„ã€å±‚çº§æ•°æ®åœºæ™¯</p>
</li>
</ul>
<p>åˆç†è¿ç”¨è¿™äº›æ¨¡å¼ï¼Œèƒ½è®©ä½ çš„ä»£ç æ›´ä¼˜é›…ã€æ›´å¯ç»´æŠ¤ã€‚å½“ç„¶ï¼Œè®¾è®¡æ¨¡å¼ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œè¦æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaçº¿ç¨‹æ± è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574318108720824366</link>    <guid>https://juejin.cn/post/7574318108720824366</guid>    <pubDate>2025-11-20T03:05:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108720824366" data-draft-id="7574318108720807982" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaçº¿ç¨‹æ± è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-20T03:05:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaArchJourney"/> <meta itemprop="url" content="https://juejin.cn/user/3414433650974346"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaçº¿ç¨‹æ± è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414433650974346/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaArchJourney
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:05:31.000Z" title="Thu Nov 20 2025 03:05:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é˜…è¯»æœ¬æ–‡å‰ï¼Œå»ºè®®å…ˆé˜…è¯»<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ã€ŠJava çº¿ç¨‹ä¸åŸç†ã€‹</a>äº†è§£ Java çº¿ç¨‹çš„åŸºæœ¬ä½¿ç”¨ï¼ˆ<code>Thread</code>ã€<code>Runnable</code>ã€<code>Callable</code> å’Œ <code>FutureTask</code>çš„å…³ç³»ï¼‰</p>
<h2 data-id="heading-0">Executor æ¡†æ¶</h2>
<p>Executor æ¡†æ¶æ˜¯ Java 5 å¼•å…¥çš„å¹¶å‘å·¥å…·ï¼Œä½äº <code>java.util.concurrent</code> åŒ…ä¸­ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯å°†çº¿ç¨‹ä»»åŠ¡çš„æäº¤ä¸ä»»åŠ¡çš„æ‰§è¡Œè§£è€¦ï¼Œæ˜¯ Java çº¿ç¨‹æ± çš„æ ¸å¿ƒå®ç°æ¡†æ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13e48c7f7ed34fd6bbb2ef2e9479d933~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=7FRvn0D9VBOrg5z5fM87Tk8pKRg%3D" alt="" loading="lazy"/></p>
<p><strong>Executor æ¡†æ¶çš„æ ¸å¿ƒæ¥å£ï¼š</strong></p>
<ul>
<li><strong>Executor</strong>ï¼šæœ€é¡¶å±‚çš„æ¥å£ï¼Œå®šä¹‰äº† <code>execute(Runnable command)</code> æ–¹æ³•ã€‚</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Executor</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">execute</span>(<span class="hljs-params">Runnable command</span>)</span>;
}
</code></pre>
<ul>
<li><strong>ExecutorService</strong>ï¼šæ‰©å±•äº† <code>Executor</code>ï¼Œå¢åŠ äº†ç®¡ç†çº¿ç¨‹æ± ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼ˆå¦‚ <code>shutdown()</code>ã€<code>submit()</code>ã€<code>invokeAll()</code> ç­‰ï¼‰ã€‚</li>
</ul>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ExecutorService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Executor</span> {
    &lt;T&gt; Future&lt;T&gt; <span class="hljs-title function_">submit</span><span class="hljs-params">(Callable&lt;T&gt; task)</span>;
    List&lt;Runnable&gt; <span class="hljs-title function_">shutdownNow</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">awaitTermination</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<ul>
<li><strong>ScheduledExecutorService</strong>ï¼šæ”¯æŒå»¶è¿Ÿæˆ–å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface ScheduledExecutorService extends ExecutorService {
    <span class="hljs-function">ScheduledFuture&lt;?&gt; <span class="hljs-title">schedule</span><span class="hljs-params">(Runnable command, <span class="hljs-type">long</span> delay, TimeUnit unit)</span></span>;
    <span class="hljs-function">ScheduledFuture&lt;?&gt; <span class="hljs-title">scheduleAtFixedRate</span><span class="hljs-params">(Runnable command, <span class="hljs-type">long</span> initialDelay, <span class="hljs-type">long</span> period, TimeUnit unit)</span></span>;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<ul>
<li><strong>ThreadPoolExecutor</strong>ï¼šExecutorService çš„æ ¸å¿ƒå®ç°ç±»ï¼Œæä¾›äº†ä¸°å¯Œçš„çº¿ç¨‹æ± é…ç½®é€‰é¡¹ã€‚</li>
</ul>
<p><strong>æ¥å£ä¸ç±»å…³ç³»ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a29069ca9f349e4a2762fe1c6bfa08c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=xrPvv1C4WUmOVCzdWxczl%2B7l%2FZo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb7fe6bf340b4739b21434dc91d709ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=823KkGuwxaZTR2GgAL1FmM5nnXk%3D" alt="" loading="lazy"/></p>
<p><strong>Executor æ¡†æ¶çš„ä½¿ç”¨ç¤ºæ„å›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26e3146cf0344876afd91bf865ad30cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=S52jlzHVb4nDRE2yZz0btiXu5Fg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ThreadPoolExecutor</h2>
<p><strong>æ„é€ å‡½æ•°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolExecutor</span><span class="hljs-params">(
    <span class="hljs-type">int</span> corePoolSize,
    <span class="hljs-type">int</span> maximumPoolSize,
    <span class="hljs-type">long</span> keepAliveTime,
    TimeUnit unit,
    BlockingQueue&lt;Runnable&gt; workQueue,
    ThreadFactory threadFactory,
    RejectedExecutionHandler handler
)</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>





































<table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><code>corePoolSize</code></td><td>æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚å³ä½¿ç©ºé—²ï¼Œè¿™äº›çº¿ç¨‹ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼ˆé™¤éè®¾ç½® <code>allowCoreThreadTimeOut(true)</code>ï¼‰ã€‚å½“ä½äºè¿™ä¸ªæ•°å€¼ï¼Œæ€»æ˜¯æ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼›è¶…è¿‡è¿™ä¸ªæ•°å€¼åï¼Œä¼šæŠŠä»»åŠ¡æ”¾åˆ° <code>workQueue</code>æ’é˜Ÿï¼Œå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œæ‰åœ¨ <code>maximumPoolSize</code> èŒƒå›´å†…æ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</td></tr><tr><td><code>maximumPoolSize</code></td><td>æœ€å¤§çº¿ç¨‹æ•°ã€‚å½“æ´»åŠ¨çº¿ç¨‹æ•°è¾¾åˆ°è¿™ä¸ªæ•°å€¼åï¼Œå°†ä¼šè¢«æ‹’ç»æ‰ï¼ˆè§åé¢çš„ <code>RejectedExecutionHandler</code> ï¼‰ã€‚</td></tr><tr><td><code>keepAliveTime</code></td><td>éæ ¸å¿ƒçº¿ç¨‹é—²ç½®æ—¶çš„è¶…æ—¶æ—¶é•¿ã€‚è¶…è¿‡è¿™ä¸ªæ—¶é•¿ï¼Œé—²ç½®çš„éæ ¸å¿ƒçº¿ç¨‹å°±ä¼šè¢«å›æ”¶ã€‚</td></tr><tr><td><code>unit</code></td><td><code>keepAliveTime</code> å‚æ•°çš„æ—¶é—´å•ä½ï¼Œæœ‰ <code>TimeUnit.MILLISECOND</code> ã€<code>TimeUnit.SECOND</code> ã€<code>TimeUnit.MINUTE</code> ç­‰</td></tr><tr><td><code>workQueue</code></td><td>ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨äºç¼“å­˜å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚å¸¸ç”¨å®ç°ï¼š1ã€<code>ArrayBlockingQueue</code>ï¼šåŸºäºæ•°ç»„ç»“æ„çš„çš„å…ˆè¿›å…ˆå‡ºæœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚2ã€<code>LinkedBlockingQueue</code>ï¼šåŸºäºé“¾è¡¨ç»“æ„çš„å…ˆè¿›å…ˆå‡ºæ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸º <code>Integer.MAX_VALUE</code> ã€‚3ã€<code>SynchronousQueue</code>ï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ï¼Œæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ç§»é™¤æ“ä½œï¼Œå¦åˆ™æ’å…¥æ“ä½œä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚ç›¸å½“äºé˜Ÿåˆ—å®¹é‡å¤§å°ä¸º 1 ã€‚4ã€<code>PriorityBlockingQueue</code>ï¼šä¸€ä¸ªå…·æœ‰ä¼˜å…ˆçº§çš„æ— é™é˜»å¡é˜Ÿåˆ—ï¼Œå¯ç”¨äºè®¾ç½®ä»»åŠ¡å¤„ç†çš„ä¼˜å…ˆçº§ã€‚</td></tr><tr><td><code>threadFactory</code></td><td>çº¿ç¨‹å·¥å‚ï¼Œç”¨äºè‡ªå®šä¹‰çº¿ç¨‹åˆ›å»ºï¼ˆå¦‚å‘½åã€ä¼˜å…ˆçº§ç­‰ï¼‰ã€‚</td></tr><tr><td><code>handler</code></td><td>æ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± å’Œé˜Ÿåˆ—éƒ½æ»¡æ—¶å¦‚ä½•å¤„ç†æ–°ä»»åŠ¡ã€‚å¸¸ç”¨å®ç°ï¼š1ã€<code>AbortPolicy</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œå¹¶æŠ›å‡º <code>RejectedExecutionException</code> å¼‚å¸¸ã€‚2ã€<code>DiscardPolicy</code>ï¼šä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚3ã€<code>DiscardOldestPolicy</code>ï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰4ã€<code>CallerRunsPolicy</code>ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡</td></tr></tbody></table>
<p><strong>ThreadPoolExecutor çº¿ç¨‹æ± å¤„ç†æµç¨‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46fd9f09515c41ea9a94cb7cd753bfe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=S0bd3%2Fbu96yCjves7YJzpHiTCZc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3688d776c8ac4f40909ed1f940373972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=FabePfXY%2Bx1o36f1ALFNtHdbWEQ%3D" alt="" loading="lazy"/></p>
<hr/>
<p><strong>ThreadPoolExecutor çº¿ç¨‹æ± ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ThreadFactory</span> <span class="hljs-variable">namedThreadFactory</span> <span class="hljs-operator">=</span> r -&gt; {
            <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r, <span class="hljs-string">"MyPool-Thread"</span>);
            t.setDaemon(<span class="hljs-literal">false</span>);
            <span class="hljs-keyword">return</span> t;
        };

        BlockingQueue&lt;Runnable&gt; workQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">100</span>);
        <span class="hljs-type">RejectedExecutionHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy();

        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            <span class="hljs-number">2</span>,
            <span class="hljs-number">4</span>,
            <span class="hljs-number">30</span>,
            TimeUnit.SECONDS,
            workQueue,
            namedThreadFactory,
            handler
        );

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">taskId</span> <span class="hljs-operator">=</span> i;
            executor.submit(() -&gt; {
                System.out.println(<span class="hljs-string">"Task "</span> + taskId + <span class="hljs-string">" executed by "</span> + Thread.currentThread().getName());
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            });
        }

        executor.shutdown();
    }
}
</code></pre>
<h2 data-id="heading-2">Executors å·¥å‚ç±»</h2>
<p>Java æä¾›äº† <code>Executors</code> å·¥å…·ç±»ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºå¸¸è§çº¿ç¨‹æ± ï¼š</p>






























<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>å†…éƒ¨å®ç°</strong></th></tr></thead><tbody><tr><td><code>newFixedThreadPool(int n)</code></td><td>å›ºå®šå¤§å°çº¿ç¨‹æ± </td><td>core = max = nï¼Œæ— ç•Œé˜Ÿåˆ—<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec7e37688d044735893176cbb7196c08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=du3WgLUjmGM79hE7fsJBnbhYJBM%3D" alt="" loading="lazy"/></td></tr><tr><td><code>newCachedThreadPool()</code></td><td>ç¼“å­˜çº¿ç¨‹æ± </td><td>core = 0ï¼Œmax = Integer.MAX_VALUEï¼ŒSynchronousQueue<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdacf916827c4fea9974b89da9f87953~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=2r69aTRxrK4tOxIT9NMPBSJId3E%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2285b1e5bf1647639a312f4cd85665a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=0K%2F9096VgouaLr6NYjyjQqYnsNs%3D" alt="" loading="lazy"/></td></tr><tr><td><code>newSingleThreadExecutor()</code></td><td>å•çº¿ç¨‹æ± </td><td>core = max = 1ï¼Œæ— ç•Œé˜Ÿåˆ—<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7c44bcca064457eb68886c10a4a735a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=VANoPERdTP9R%2FohSRUM7HRuRKOs%3D" alt="" loading="lazy"/></td></tr><tr><td><code>newScheduledThreadPool(int n)</code></td><td>æ”¯æŒå®šæ—¶/å‘¨æœŸä»»åŠ¡</td><td>ScheduledThreadPoolExecutor</td></tr></tbody></table>
<p>å…¶ä¸­ï¼Œ<code>newFixedThreadPool</code> å’Œ <code>newCachedThreadPool</code> åœ¨é«˜è´Ÿè½½ä¸‹å¯èƒ½å¯¼è‡´ OOMï¼ˆå› ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—æˆ–è¿‡å¤šçº¿ç¨‹ï¼‰ã€‚å› æ­¤ï¼Œç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®æ‰‹åŠ¨åˆ›å»º <code>ThreadPoolExecutor</code> å¹¶æ˜ç¡®å‚æ•°ã€‚</p>
<h2 data-id="heading-3">ScheduledThreadPoolExecutor</h2>
<p><code>ScheduledThreadPoolExecutor</code> æ˜¯ä¸“é—¨ç”¨äºå»¶è¿Ÿæ‰§è¡Œæˆ–å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ã€‚å®ƒæ˜¯ <code>ThreadPoolExecutor</code> çš„å­ç±»ï¼ŒåŒæ—¶å®ç°äº† <code>ScheduledExecutorService</code> æ¥å£ã€‚</p>
<p><strong>ScheduledThreadPoolExecutor ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>æ”¯æŒä¸€æ¬¡æ€§å»¶è¿Ÿæ‰§è¡Œã€‚</li>
<li>æ”¯æŒ å›ºå®šé¢‘ç‡ï¼ˆfixed-rateï¼‰æˆ– å›ºå®šå»¶è¿Ÿï¼ˆfixed-delayï¼‰çš„å‘¨æœŸæ€§ä»»åŠ¡ã€‚</li>
<li>çº¿ç¨‹å¤ç”¨ï¼šå¤šä¸ªå®šæ—¶ä»»åŠ¡å…±äº«çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œé¿å…é¢‘ç¹åˆ›å»º/é”€æ¯çº¿ç¨‹ã€‚</li>
<li>çº¿ç¨‹æ± ç­‰å¾…é˜Ÿåˆ—é»˜è®¤ä½¿ç”¨ <code>DelayedWorkQueue</code>ï¼ˆä¸€ç§æ— ç•Œä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼Œå¤§é‡ä»»åŠ¡å †ç§¯å¯èƒ½å¯¼è‡´ OOMã€‚</li>
<li>æ¯” Timer / TimerTask æ›´å®‰å…¨ã€æ›´çµæ´»ï¼ˆTimer æ˜¯å•çº¿ç¨‹ï¼Œå¼‚å¸¸ä¼šå¯¼è‡´æ•´ä¸ªè°ƒåº¦å™¨å´©æºƒï¼‰ã€‚è‹¥æŸä¸ªä»»åŠ¡æŠ›å‡ºæœªæ•è·å¼‚å¸¸ï¼Œè¯¥ä»»åŠ¡å°†ç»ˆæ­¢ï¼Œä½†ä¸ä¼šå½±å“å…¶ä»–ä»»åŠ¡ã€‚</li>
<li>å¯é€šè¿‡ ScheduledFuture.cancel() å–æ¶ˆä»»åŠ¡ã€‚</li>
<li>è°ƒç”¨ shutdown() å…³é—­çº¿ç¨‹æ± åï¼Œå·²æäº¤çš„ä»»åŠ¡ä»ä¼šæ‰§è¡Œï¼›shutdownNow() å°è¯•ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cb6d3fbbf054d86a421104a216922b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUFyY2hKb3VybmV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212731&amp;x-signature=d4BY3tFivrjcdIZnz2pHXwgdN0w%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">çº¿ç¨‹æ± æœ€ä½³å®è·µ</h2>
<ul>
<li><strong>é¿å…ä½¿ç”¨ Executors åˆ›å»ºæ™®é€šçº¿ç¨‹æ± </strong>ï¼Œåº”æ˜¾å¼ä½¿ç”¨ <code>ThreadPoolExecutor</code>ã€‚</li>
<li><strong>åˆç†è®¾ç½® corePoolSize å’Œ maximumPoolSize</strong>ï¼Œæ ¹æ® CPU æ ¸å¿ƒæ•°å’Œä»»åŠ¡ç±»å‹ï¼ˆCPU å¯†é›†å‹ vs IO å¯†é›†å‹ï¼‰è°ƒæ•´ã€‚</li>
</ul>

<ul>
<li><strong>ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—</strong>ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºã€‚</li>
<li><strong>è‡ªå®šä¹‰ ThreadFactory</strong>ï¼Œä¸ºçº¿ç¨‹å‘½åä¾¿äºæ’æŸ¥é—®é¢˜ã€‚</li>
<li><strong>åˆç†å¤„ç†å¼‚å¸¸</strong>ï¼šåœ¨ <code>Runnable</code> æˆ– <code>Callable</code> ä¸­æ•è·å¼‚å¸¸ï¼Œé¿å…çº¿ç¨‹é™é»˜é€€å‡ºã€‚</li>
<li><strong>ä¼˜é›…å…³é—­çº¿ç¨‹æ± </strong>ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java">executor.shutdown();
<span class="hljs-keyword">if</span> (!executor.awaitTermination(<span class="hljs-number">60</span>, TimeUnit.SECONDS)) {
    executor.shutdownNow();
}
</code></pre>
<h2 data-id="heading-5">å‚è€ƒ</h2>
<ul>
<li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li>
</ul>
<p>ã€æœ¬æ–‡é¦–å‘äºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSNrAPYd1ElWU6ZzbpYUVKg" target="_blank" title="https://mp.weixin.qq.com/s/SNrAPYd1ElWU6ZzbpYUVKg" ref="nofollow noopener noreferrer">JavaArchJourney</a>ã€‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºopenfeignçš„ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7574568258789490739</link>    <guid>https://juejin.cn/post/7574568258789490739</guid>    <pubDate>2025-11-20T03:06:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258789490739" data-draft-id="7574625040629923878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºopenfeignçš„ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-20T03:06:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦Decade"/> <meta itemprop="url" content="https://juejin.cn/user/3501321044625325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºopenfeignçš„ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3501321044625325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦Decade
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:06:15.000Z" title="Thu Nov 20 2025 03:06:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜èƒŒæ™¯</h2>
<p>éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹å’Œé£å¤©æ°”çš„apiï¼Œè·å–å¤©æ°”ä¿¡æ¯
ç¼–å†™äº†å¦‚ä¸‹ä½¿ç”¨openfeignè°ƒç”¨çš„æ¥å£
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c13aa438aee64d8db44012c9172f7563~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=Vls5i%2FwKR0DRz1MU8EQVzDrwDfs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€é—®é¢˜æè¿°</h2>
<p>1ã€ç›´æ¥é€šè¿‡apifoxè°ƒç”¨ç¬¬ä¸‰æ–¹apiï¼Œæ²¡é—®é¢˜
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d15a2ea717e4e8fb856dfd7226402cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=wtX7bjBY5Y20gFlrcZhpFlZ8SyY%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€ä»£ç ä¸­ç›´æ¥é€šè¿‡okhttpè°ƒç”¨ç¬¬ä¸‰æ–¹apiï¼Œæ²¡é—®é¢˜
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a4021aa55fc4129a73996fb58b323a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=jxohpa1p2YWGxEBXY9E%2FsVgBAzw%3D" alt="image.png" loading="lazy"/></p>
<p>3ã€ä½¿ç”¨ä¸Šè¿°çš„feignè°ƒç”¨ç¬¬ä¸‰æ–¹apiï¼ŒæŠ¥é”™ï¼š401 &amp; ä¹±ç ï¼Œè€Œé€šè¿‡æ–­ç‚¹æ’æŸ¥ï¼Œè°ƒç”¨apiçš„headerå’Œå‚æ•°éƒ½æ˜¯æ­£ç¡®çš„
<code>feign.FeignException$Unauthorized: [401] during [GET] to [https://xxx.yun.qweatherapi.com/v7/weather/now?location=101200101] [IWeatherApiService#getWeatherNow(String,String)]: [ï¿½ï¿½UÌ±ï¿½ ï¿½_!ï¿½ZA'6W ï¿½ï¿½ï¿½rï¿½84ï¿½é¿‹nï¿½ox3 31ï¿½ï¿½8ï¿½ï¿½nï¿½ï¿½@ï¿½ï¿½Bï¿½5&amp;ï¿½S?^ï¿½$"kOwï¿½ï¿½Xï¿½ï¿½Gï¿½;Öï¿½UÍ®J$NoĞ¢$ï¿½wï¿½ï¿½s@qihï¿½oï¿½Yï¿½wï¿½(ï¿½[Sï¿½ï¿½}ï¿½ï¿½Ö«ï¿½ï¿½jï¿½ï¿½cVï¿½ï¿½HE4,ï¿½ï¿½ï¿½Nï¿½ï¿½] at feign.FeignException.clientErrorStatus(FeignException.java:197)</code></p>
<h2 data-id="heading-2">ä¸‰ã€é—®é¢˜åŸå› </h2>
<p>1ã€è¿™ä¸ªç¬¬ä¸‰æ–¹apiçš„å“åº”å¼€å¯äº†gzipå‹ç¼©ï¼Œå“åº”ä½“æ˜¯ gzip å‹ç¼©çš„
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9704b355a944fe7b291d3ff90d9c632~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=Tnd8EqpOrpQGefcymcHD06LFy6U%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€Feign é»˜è®¤ä½¿ç”¨ JDK è‡ªå¸¦çš„ HttpURLConnection ä½œä¸º HTTP Clientï¼Œä¸æ”¯æŒå¤„ç†gizp
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d505415026fc45f28c766f4dc80f1efa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=Tcf9xut6C3pfWrfE09qrhqJHOQg%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17636033284560.png" loading="lazy"/></p>
<h2 data-id="heading-3">å››ã€é—®é¢˜è§£å†³</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d8cbcf02bf94dd88853b27404fd50e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mRGVjYWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212774&amp;x-signature=mrCHmfB65IqShqBNfhakMBsr9%2BM%3D" alt="image.png" loading="lazy"/>
==<strong>å°†HTTP Clientæ¢ä¸ºokhttp</strong>==</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">feign:</span>
  <span class="hljs-attr">okhttp:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">max-connections:</span> <span class="hljs-number">200</span>
    <span class="hljs-attr">max-connections-per-route:</span> <span class="hljs-number">50</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ€§èƒ½ä¼˜åŒ–è¯¯åŒºï¼šç»“åˆå®æˆ˜ä»£ç ï¼Œå½»åº•ææ‡‚ useCallback çš„çœŸæ­£ç”¨é€”]]></title>    <link>https://juejin.cn/post/7574318108720857134</link>    <guid>https://juejin.cn/post/7574318108720857134</guid>    <pubDate>2025-11-20T03:07:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108720857134" data-draft-id="7574584245110521907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ€§èƒ½ä¼˜åŒ–è¯¯åŒºï¼šç»“åˆå®æˆ˜ä»£ç ï¼Œå½»åº•ææ‡‚ useCallback çš„çœŸæ­£ç”¨é€”"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-11-20T03:07:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ€§èƒ½ä¼˜åŒ–è¯¯åŒºï¼šç»“åˆå®æˆ˜ä»£ç ï¼Œå½»åº•ææ‡‚ useCallback çš„çœŸæ­£ç”¨é€”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:07:24.000Z" title="Thu Nov 20 2025 03:07:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React å¼€å‘ä¸­ï¼Œ<code>useCallback</code> æ˜¯æœ€å®¹æ˜“è¢«è¯¯ç”¨ï¼ˆOverusedï¼‰çš„ Hook ä¹‹ä¸€ã€‚å¾ˆå¤šå¼€å‘è€…çœ‹åˆ°ç»„ä»¶é‡æ¸²æŸ“ï¼ˆRe-renderï¼‰ï¼Œä¸‹æ„è¯†åœ°å°±æƒ³æŠŠæ‰€æœ‰å‡½æ•°éƒ½åŒ…ä¸Šä¸€å±‚ <code>useCallback</code>ï¼Œè®¤ä¸ºè¿™æ ·èƒ½æå‡æ€§èƒ½ã€‚</p>
<p>ä½†äº‹å®å¾€å¾€ç›¸åï¼š<strong>åœ¨é”™è¯¯çš„åœ°æ–¹ä½¿ç”¨ <code>useCallback</code>ï¼Œä¸ä»…ä¸èƒ½ä¼˜åŒ–æ€§èƒ½ï¼Œåè€Œä¼šå¢åŠ å†…å­˜å¼€é”€å’Œä»£ç å¤æ‚åº¦ã€‚</strong></p>
<p>ä»Šå¤©æˆ‘ä»¬ç»“åˆ Hacker News æœç´¢ä»£ç ï¼Œæ¥æ‹†è§£ <code>useCallback</code> åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™æ‰åº”è¯¥ç”¨å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-0">1. æ¡ˆå‘ç°åœºï¼šä»£ç çœŸçš„éœ€è¦ä¼˜åŒ–å—ï¼Ÿ</h3>
<p>è®©æˆ‘ä»¬å…ˆçœ‹ä»£ç ä¸­çš„è¿™ä¸€éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// App.js (åŸå§‹ä»£ç )</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-string">"js"</span>);

  <span class="hljs-comment">// âŒ ç–‘é—®ï¼šè¿™é‡Œæ˜¯å¦éœ€è¦ useCallbackï¼Ÿ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-title function_">setSearchTerm</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
      {/* è¿™é‡Œçš„ input æ˜¯åŸç”Ÿ DOM æ ‡ç­¾ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> <span class="hljs-attr">...</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>ç°çŠ¶åˆ†æï¼š</strong></p>
<ol>
<li>å½“ç”¨æˆ·è¾“å…¥å­—ç¬¦ï¼Œ<code>handleChange</code> æ‰§è¡Œ -&gt; <code>setSearchTerm</code> æ›´æ–°çŠ¶æ€ã€‚</li>
<li><code>App</code> ç»„ä»¶è§¦å‘é‡æ¸²æŸ“ï¼ˆRe-renderï¼‰ã€‚</li>
<li>åœ¨è¿™æ¬¡æ–°çš„æ¸²æŸ“ä¸­ï¼Œ<code>handleChange</code> å‡½æ•°è¢«<strong>é‡æ–°åˆ›å»º</strong>ï¼ˆåœ¨å†…å­˜ä¸­ç”Ÿæˆäº†ä¸€ä¸ªå…¨æ–°çš„å‡½æ•°å¼•ç”¨ï¼‰ã€‚</li>
<li>è¿™ä¸ªæ–°å‡½æ•°è¢«ä¼ é€’ç»™ <code>&lt;input&gt;</code> æ ‡ç­¾ã€‚</li>
</ol>
<p>ç»“è®ºï¼š</p>
<p>åœ¨ä½ çš„å½“å‰ä»£ç ä¸­ï¼Œå®Œå…¨ä¸éœ€è¦ useCallbackã€‚</p>
<p>åŸå› ï¼š</p>
<p>æ¥æ”¶ handleChange çš„æ˜¯ <code>&lt;input&gt;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸç”Ÿ DOM å…ƒç´ ã€‚åŸç”Ÿå…ƒç´ ä¸å…·å¤‡â€œé€šè¿‡å¯¹æ¯” Props æ¥å†³å®šæ˜¯å¦æ›´æ–°â€çš„èƒ½åŠ›ã€‚æ— è®ºä½ ä¼ ç»™å®ƒçš„æ˜¯æ—§å‡½æ•°è¿˜æ˜¯æ–°å‡½æ•°ï¼Œåªè¦çˆ¶ç»„ä»¶æ¸²æŸ“ï¼ŒReact éƒ½ä¼šé‡æ–°æŠŠäº‹ä»¶ç»‘å®šæ›´æ–°ä¸€éã€‚</p>
<p>åœ¨è¿™é‡ŒåŠ  <code>useCallback</code>ï¼Œå°±åƒæ˜¯<strong>ç»™ä¸€æ¬¡æ€§çº¸æ¯ä¹°ä¿é™©</strong>â€”â€”æˆæœ¬ï¼ˆç¼“å­˜æœºåˆ¶ã€ä¾èµ–å¯¹æ¯”çš„è®¡ç®—é‡ï¼‰æ”¯å‡ºäº†ï¼Œä½†æ²¡æœ‰ä»»ä½•æ”¶ç›Šã€‚</p>
<hr/>
<h3 data-id="heading-1">2. æ ¸å¿ƒæ¦‚å¿µï¼šå¼•ç”¨ç›¸ç­‰æ€§ (Referential Equality)</h3>
<p>è¦ç†è§£ <code>useCallback</code>ï¼Œå¿…é¡»ç†è§£ JavaScript ä¸­çš„ä¸€ä¸ªåŸºç¡€æ¦‚å¿µï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">functionA</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hi'</span>); };
<span class="hljs-keyword">const</span> <span class="hljs-title function_">functionB</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hi'</span>); };

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(functionA === functionB); <span class="hljs-comment">// false âŒ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(functionA === functionA); <span class="hljs-comment">// true âœ…</span>
</code></pre>
<p>åœ¨ React å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ¯æ¬¡æ¸²æŸ“ï¼Œç»„ä»¶å†…éƒ¨å®šä¹‰çš„å‡½æ•°éƒ½ä¼šè¢«é‡æ–°åˆ›å»ºã€‚è™½ç„¶ä»£ç é€»è¾‘æ²¡å˜ï¼Œä½†åœ¨è®¡ç®—æœºå†…å­˜é‡Œï¼Œå®ƒå·²ç»æ˜¯ä¸€ä¸ª<strong>å…¨æ–°çš„å¯¹è±¡</strong>äº†ã€‚</p>
<p><code>useCallback</code> çš„å”¯ä¸€ä½œç”¨å°±æ˜¯ï¼š<strong>åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œå¼ºè¡Œä¿ç•™åŒä¸€ä¸ªå‡½æ•°å¼•ç”¨ï¼Œåªè¦ä¾èµ–é¡¹ä¸å˜ï¼Œå®ƒè¿”å›çš„æ°¸è¿œæ˜¯å†…å­˜é‡Œçš„åŒä¸€ä¸ªåœ°å€ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">3. ä»€ä¹ˆæ—¶å€™æ‰éœ€è¦å®ƒï¼Ÿ(å¼•å…¥ React.memo)</h3>
<p>åªæœ‰å½“è¿™ä¸ªå‡½æ•°è¢«ä¼ é€’ç»™<strong>ç»è¿‡ä¼˜åŒ–çš„å­ç»„ä»¶</strong>æ—¶ï¼Œ<code>useCallback</code> æ‰æ˜¯å¿…é¡»çš„ã€‚</p>
<p>å‡è®¾éšç€é¡¹ç›®å˜å¤§ï¼Œä½ æŠŠ <code>&lt;input&gt;</code> å°è£…æˆäº†ä¸€ä¸ªç‹¬ç«‹çš„ã€åŠŸèƒ½å¤æ‚çš„ç»„ä»¶ <code>FancyInput</code>ï¼Œå¹¶ä¸”ä¸ºäº†æ€§èƒ½ï¼Œä½ ä½¿ç”¨äº† <code>React.memo</code>ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯ Aï¼šæœ‰ memoï¼Œä½†æ²¡ç”¨ useCallback (æ— æ•ˆä¼˜åŒ–)</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªè¢« memo ä¿æŠ¤çš„ç»„ä»¶</span>
<span class="hljs-comment">// å®ƒçš„åŸåˆ™æ˜¯ï¼šåªæœ‰ props å˜äº†ï¼Œæˆ‘æ‰é‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FancyInput</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">FancyInput</span>(<span class="hljs-params">{ onChange, value }</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"FancyInput æ¸²æŸ“äº†!"</span>); 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fancy"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> /&gt;</span></span>;
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-string">"js"</span>);
  
  <span class="hljs-comment">// æ¯æ¬¡ App æ¸²æŸ“ï¼Œè¿™é‡Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°åœ°å€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; <span class="hljs-title function_">setSearchTerm</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>); 

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
       {/* æ‚²å‰§å‘ç”Ÿåœ¨è¿™é‡Œï¼š
         å°½ç®¡ searchTerm æ²¡å˜ (å‡è®¾æ˜¯å…¶ä»– state è§¦å‘äº† App æ›´æ–°)ï¼Œ
         ä½†å› ä¸º handleChange çš„å†…å­˜åœ°å€å˜äº†ï¼Œ
         React.memo è®¤ä¸º props.onChange å˜äº†ã€‚
         ç»“æœï¼šFancyInput ä¾ç„¶ä¼šå¼ºåˆ¶é‡æ¸²æŸ“ï¼
       */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FancyInput</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{searchTerm}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-4">åœºæ™¯ Bï¼šmemo + useCallback (é»„é‡‘æ­æ¡£)</h4>
<p>è¿™æ—¶å€™ï¼Œ<code>useCallback</code> å°±è¦ç™»åœºäº†ã€‚å®ƒæ˜¯ä¸ºäº†é…åˆ <code>React.memo</code> å·¥ä½œçš„ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-string">"js"</span>);

  <span class="hljs-comment">// âœ… æ­£ç¡®ä½¿ç”¨ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-title function_">setSearchTerm</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  }, []); <span class="hljs-comment">// ä¾èµ–é¡¹ä¸ºç©ºï¼Œæ°¸è¿œä¸é‡å»º</span>

  <span class="hljs-keyword">return</span> (
    {<span class="hljs-comment">/* ç°åœ¨ï¼Œå½“ App å› ä¸ºå…¶ä»–åŸå› é‡æ¸²æŸ“æ—¶ï¼Œ
      handleChange è¿˜æ˜¯åŸæ¥çš„å†…å­˜åœ°å€ã€‚
      React.memo å‘ç° props æ²¡å˜ï¼Œäºæ˜¯è·³è¿‡ FancyInput çš„æ¸²æŸ“ã€‚
      æ€§èƒ½æå‡è¾¾æˆï¼
    */</span>}
    &lt;<span class="hljs-title class_">FancyInput</span> onChange={handleChange} value={searchTerm} /&gt;
  );
}
</code></pre>
<hr/>
<h3 data-id="heading-5">4. å¦ä¸€ä¸ªåœºæ™¯ï¼šä½œä¸º useEffect çš„ä¾èµ–</h3>
<p>ä»£ç ä¸­å…¶å®æœ‰ä¸€ä¸ªæ½œåœ¨çš„åœ°æ–¹å¯èƒ½éœ€è¦ <code>useCallback</code>ï¼Œé‚£å°±æ˜¯å½“å‡½æ•°æœ¬èº«è¢«æ”¾åœ¨ <code>useEffect</code> çš„ä¾èµ–æ•°ç»„é‡Œæ—¶ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å‡è®¾è¿™æ˜¯å®šä¹‰åœ¨ç»„ä»¶å†…çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchNews</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">query</span>) =&gt; {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">searchHackerNews</span>(query);
  <span class="hljs-title function_">setResults</span>(data.<span class="hljs-property">hits</span>);
};

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">fetchNews</span>(debouncedSearchTerm);
}, [debouncedSearchTerm, fetchNews]); <span class="hljs-comment">// âš ï¸ fetchNews æ˜¯ä¾èµ–é¡¹</span>
</code></pre>
<p>å¦‚æœ<code>fetchNews</code> ä¸åŒ…è£¹ <code>useCallback</code>ï¼Œæ¯æ¬¡æ¸²æŸ“ <code>fetchNews</code> éƒ½ä¼šå˜æˆæ–°å‡½æ•°ï¼Œå¯¼è‡´ <code>useEffect</code> è®¤ä¸ºä¾èµ–å˜äº†ï¼Œä»è€Œ<strong>æ— é™å¾ªç¯</strong>æˆ–è€…<strong>ä¸å¿…è¦çš„é¢‘ç¹æ‰§è¡Œ</strong>ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»ä½¿ç”¨ <code>useCallback</code> é”ä½ <code>fetchNews</code>ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ€»ç»“ï¼šå†³ç­–æ¸…å•</h3>
<p>å›åˆ°ä»£ç ï¼Œè¯·æŒ‰ç…§è¿™ä¸ªæ¸…å•æ¥å†³å®šæ˜¯å¦ä½¿ç”¨ <code>useCallback</code>ï¼š</p>
<ol>
<li>
<p><strong>è¿™ä¸ªå‡½æ•°æ˜¯ä¼ ç»™åŸç”Ÿ DOM (div, button, input) çš„å—ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ -&gt; <strong>ä¸ç”¨</strong> (ç”¨äº†ä¹Ÿæ²¡ç”¨)ã€‚</li>
<li>å¦ -&gt; çœ‹ä¸‹ä¸€æ¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿™ä¸ªå‡½æ•°æ˜¯ä¼ ç»™å­ç»„ä»¶çš„ï¼Œä¸”å­ç»„ä»¶ç”¨äº† <code>React.memo</code> å—ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ -&gt; <strong>ç”¨</strong> (ä¸ºäº†è®© memo ç”Ÿæ•ˆ)ã€‚</li>
<li>å¦ -&gt; <strong>ä¸ç”¨</strong> (å¤§éƒ¨åˆ†å­ç»„ä»¶éƒ½å¾ˆè½»é‡ï¼Œä¸éœ€è¦ memo)ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿™ä¸ªå‡½æ•°ä¼šè¢«ä½œä¸º <code>useEffect</code> æˆ–å…¶ä»– Hook çš„ä¾èµ–é¡¹å—ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ -&gt; <strong>ç”¨</strong> (é˜²æ­¢æ­»å¾ªç¯æˆ–é¢‘ç¹è§¦å‘ Effect)ã€‚</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå»ºè®®ï¼š</p>
<p>åœ¨App ç»„ä»¶å½“å‰çš„çŠ¶æ€ä¸‹ï¼Œä¿æŒåŸæ ·æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä»£ç æ¸…æ™°ã€é€»è¾‘ç®€å•ï¼Œæ²¡æœ‰ä»»ä½•ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºMCPçš„ä»£ç æ‰§è¡Œï¼šæ„å»ºæ›´é«˜æ•ˆç‡çš„æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7574344443823751168</link>    <guid>https://juejin.cn/post/7574344443823751168</guid>    <pubDate>2025-11-20T02:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574344443823751168" data-draft-id="7574380953175425066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºMCPçš„ä»£ç æ‰§è¡Œï¼šæ„å»ºæ›´é«˜æ•ˆç‡çš„æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="MCP,Agent,åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T02:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºMCPçš„ä»£ç æ‰§è¡Œï¼šæ„å»ºæ›´é«˜æ•ˆç‡çš„æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:56:16.000Z" title="Thu Nov 20 2025 02:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><blockquote>
<p>æœ¬æ–‡æ˜¯Aç¤¾2025å¹´11æœˆ4æ—¥åšå®¢æ–‡ç« ã€ŠCode execution with MCP: Building more efficient agentsã€‹çš„å­¦ä¹ æ€»ç»“ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>ç›´æ¥å·¥å…·è°ƒç”¨ä¼šä¸ºæ¯ä¸ªå®šä¹‰å’Œç»“æœæ¶ˆè€—ä¸Šä¸‹æ–‡ã€‚è€Œæ™ºèƒ½ä½“ï¼ˆAgentsï¼‰é€šè¿‡ç¼–å†™ä»£ç æ¥è°ƒç”¨å·¥å…·ï¼Œå¯å®ç°æ›´å¥½çš„æ‰©å±•ã€‚ä»¥ä¸‹å°†ä»‹ç»å…¶åœ¨MCPä¸­çš„å·¥ä½œåŸç†ã€‚</p>
<p>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆModel Context Protocolï¼Œç®€ç§° MCPï¼‰æ˜¯ä¸€ç§ç”¨äºå°† AI æ™ºèƒ½ä½“è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿçš„å¼€æ”¾å¼æ ‡å‡†ã€‚ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼Œå°†æ™ºèƒ½ä½“ä¸å·¥å…·ã€æ•°æ®è¿æ¥æ—¶ï¼Œæ¯ä¸€ç»„é…å¯¹éƒ½éœ€è¦å•ç‹¬å®šåˆ¶é›†æˆæ–¹æ¡ˆï¼Œè¿™ä¼šå¯¼è‡´ç³»ç»Ÿç¢ç‰‡åŒ–ä¸”å­˜åœ¨å¤§é‡é‡å¤å·¥ä½œï¼Œéš¾ä»¥å®ç°çœŸæ­£å¯æ‰©å±•çš„äº’è”ç³»ç»Ÿã€‚è€Œ MCP æä¾›äº†ä¸€ç§é€šç”¨åè®® â€”â€” å¼€å‘è€…åªéœ€åœ¨æ™ºèƒ½ä½“ä¸­å®ç°ä¸€æ¬¡MCPï¼Œå°±èƒ½è§£é”ä¸€æ•´å¥—é›†æˆç”Ÿæ€ã€‚</p>
<p>è‡ª 2024 å¹´ 11 æœˆ MCP æ¨å‡ºä»¥æ¥ï¼Œå…¶é‡‡ç”¨ç‡å¢é•¿è¿…é€Ÿï¼šç¤¾åŒºå·²æ­å»ºäº†æ•°åƒå° MCP æœåŠ¡å™¨ï¼Œæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€å‡å·²æ”¯æŒå¯¹åº”çš„SDKï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰ï¼Œå¹¶ä¸” MCP å·²æˆä¸ºè¡Œä¸šå†…å°†æ™ºèƒ½ä½“ä¸å·¥å…·ã€æ•°æ®è¿æ¥çš„äº‹å®æ ‡å‡†ï¼ˆde-facto standardï¼‰ã€‚</p>
<p>å¦‚ä»Šï¼Œå¼€å‘è€…æ„å»ºçš„æ™ºèƒ½ä½“é€šå¸¸èƒ½è®¿é—®æ•°åå° MCP æœåŠ¡å™¨ä¸Šçš„æ•°ç™¾ç”šè‡³æ•°åƒä¸ªå·¥å…·ã€‚ç„¶è€Œï¼Œéšç€æ‰€è¿æ¥å·¥å…·æ•°é‡çš„å¢åŠ ï¼Œæå‰åŠ è½½æ‰€æœ‰å·¥å…·å®šä¹‰ä»¥åŠé€šè¿‡ä¸Šä¸‹æ–‡çª—å£ä¼ é€’ä¸­é—´ç»“æœè¿™ä¸¤ä¸ªæ“ä½œï¼Œä¼šå¯¼è‡´æ™ºèƒ½ä½“è¿è¡Œé€Ÿåº¦å˜æ…¢ï¼ŒåŒæ—¶å¢åŠ æˆæœ¬ã€‚</p>
<p>åœ¨æœ¬ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•é€šè¿‡ä»£ç æ‰§è¡Œè®©æ™ºèƒ½ä½“æ›´é«˜æ•ˆåœ°ä¸ MCP æœåŠ¡å™¨äº¤äº’ â€”â€” åœ¨æ”¯æŒæ›´å¤šå·¥å…·çš„åŒæ—¶ï¼Œæ¶ˆè€—æ›´å°‘çš„ tokensï¼ˆä»¤ç‰Œï¼ŒæŒ‡ AI æ¨¡å‹å¤„ç†æ–‡æœ¬çš„åŸºæœ¬å•ä½ï¼‰ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ å·¥å…·å¯¼è‡´çš„tokenè¿‡åº¦æ¶ˆè€—é™ä½æ™ºèƒ½ä½“æ•ˆç‡</h2>
<p>éšç€æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ä½¿ç”¨è§„æ¨¡çš„æ‰©å¤§ï¼Œå‡ºç°äº†ä¸¤ç§å¸¸è§æƒ…å†µï¼Œå¯èƒ½å¯¼è‡´æ™ºèƒ½ä½“çš„æˆæœ¬å¢åŠ ã€å»¶è¿Ÿå‡é«˜ï¼š</p>
<ul>
<li>å·¥å…·å®šä¹‰ä½¿ä¸Šä¸‹æ–‡çª—å£ï¼ˆcontext windowï¼‰è´Ÿè½½è¿‡é«˜ï¼›</li>
<li>å·¥å…·ä¸­é—´ç»“æœæ¶ˆè€—é¢å¤–çš„ä»¤ç‰Œã€‚</li>
</ul>
<h3 data-id="heading-2">1.  å·¥å…·å®šä¹‰ä½¿ä¸Šä¸‹æ–‡çª—å£è´Ÿè½½è¿‡é«˜</h3>
<p>å¤§å¤šæ•° MCP å®¢æˆ·ç«¯ä¼šå°†æ‰€æœ‰å·¥å…·å®šä¹‰æå‰ç›´æ¥åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶é€šè¿‡ç›´æ¥å·¥å…·è°ƒç”¨è¯­æ³•å°†è¿™äº›å®šä¹‰æä¾›ç»™æ¨¡å‹ã€‚è¿™äº›å·¥å…·å®šä¹‰å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-text" lang="text">gdrive.getDocument
     Description: Retrieves a document from Google Drive
     Parameters:
                documentId (required, string): The ID of the document to retrieve
                fields (optional, string): Specific fields to return
     Returns: Document object with title, body content, metadata, permissions, etc.
</code></pre>
<pre><code class="hljs language-text" lang="text">salesforce.updateRecord
    Description: Updates a record in Salesforce
    Parameters:
               objectType (required, string): Type of Salesforce object (Lead, Contact,      Account, etc.)
               recordId (required, string): The ID of the record to update
               data (required, object): Fields to update with their new values
     Returns: Updated record object with confirmation
</code></pre>
<p>å·¥å…·æè¿°å ç”¨è¿‡å¤šä¸Šä¸‹æ–‡çª—å£ç©ºé—´ï¼Œå¯¼è‡´å“åº”æ—¶é—´å»¶é•¿ã€æˆæœ¬å¢åŠ ã€‚å½“æ™ºèƒ½ä½“ï¼ˆAgentï¼‰è¿æ¥äº†æ•°åƒä¸ªå·¥å…·æ—¶ï¼Œå…¶åœ¨è¯»å–è¯·æ±‚ä¹‹å‰ï¼Œå°±éœ€è¦å¤„ç†æ•°åä¸‡ä¸ªtokenã€‚</p>
<h3 data-id="heading-3">2. å·¥å…·ä¸­é—´ç»“æœæ¶ˆè€—é¢å¤–token</h3>
<p>å¤§å¤šæ•°æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰å®¢æˆ·ç«¯å…è®¸æ¨¡å‹ç›´æ¥è°ƒç”¨ MCP å·¥å…·ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå‘æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä¸‹è¾¾æŒ‡ä»¤ï¼šâ€œä»è°·æ­Œäº‘ç«¯ç¡¬ç›˜ï¼ˆGoogle Driveï¼‰ä¸‹è½½æˆ‘çš„ä¼šè®®è®°å½•ï¼Œå¹¶å°†å…¶é™„åŠ åˆ° Salesforce æ½œåœ¨å®¢æˆ·çš„ä¿¡æ¯ä¸­ã€‚â€
æ­¤æ—¶æ¨¡å‹ä¼šå‘èµ·å¦‚ä¸‹è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-text" lang="text">TOOL CALL: gdrive.getDocument(documentId: "abc123")
        â†’ returns "Discussed Q4 goals...\n[full transcript text]"
           (loaded into model context)

TOOL CALL: salesforce.updateRecord(
			objectType: "SalesMeeting",
			recordId: "00Q5f000001abcXYZ",
  			data: { "Notes": "Discussed Q4 goals...\n[full transcript text written out]" }
		)
		(model needs to write entire transcript into context again)
</code></pre>
<p>æ‰€æœ‰ä¸­é—´ç»“æœéƒ½å¿…é¡»ç»è¿‡æ¨¡å‹å¤„ç†ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå®Œæ•´çš„ä¼šè®®è®°å½•ä¼šä¸¤æ¬¡æµè½¬ç»è¿‡æ¨¡å‹ã€‚å¯¹äºä¸€åœºæ—¶é•¿ 2 å°æ—¶çš„é”€å”®ä¼šè®®ï¼Œè¿™å¯èƒ½æ„å‘³ç€è¦é¢å¤–å¤„ç† 5 ä¸‡ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰ã€‚è€Œå¯¹äºç¯‡å¹…æ›´é•¿çš„æ–‡æ¡£ï¼Œç”šè‡³å¯èƒ½è¶…å‡ºä¸Šä¸‹æ–‡çª—å£ï¼ˆcontext windowï¼‰çš„é™åˆ¶ï¼Œå¯¼è‡´æ•´ä¸ªå·¥ä½œæµç¨‹ä¸­æ–­ã€‚</p>
<p>å½“å¤„ç†å¤§å‹æ–‡æ¡£æˆ–å¤æ‚æ•°æ®ç»“æ„æ—¶ï¼Œæ¨¡å‹åœ¨å·¥å…·è°ƒç”¨ä¹‹é—´å¤åˆ¶æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°é”™è¯¯çš„å¯èƒ½æ€§å¯èƒ½ä¼šæ›´é«˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/055f2bb936ac4ae397dcca7b166a380f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRnJlZUNvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212566&amp;x-signature=BMaTaKQVn7%2F%2BeYDI%2FjgAucnW4bY%3D" alt="1763604540827.png" loading="lazy"/></p>
<p>MCP å®¢æˆ·ç«¯ä¼šå°†å·¥å…·å®šä¹‰åŠ è½½åˆ°æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆcontext windowï¼‰ä¸­ï¼Œå¹¶åè°ƒä¸€ä¸ªæ¶ˆæ¯å¾ªç¯ï¼ˆmessage loopï¼‰â€”â€” åœ¨è¯¥å¾ªç¯ä¸­ï¼Œæ¯æ¬¡å·¥å…·è°ƒç”¨åŠç›¸åº”ç»“æœéƒ½ä¼šåœ¨æ“ä½œä¹‹é—´ä¼ é€’ç»™æ¨¡å‹ã€‚</p>
<h2 data-id="heading-4">äºŒã€ åŸºäºMCPçš„ä»£ç æ‰§è¡Œæå‡ä¸Šä¸‹æ–‡æ•ˆç‡</h2>
<p>éšç€ä»£ç æ‰§è¡Œç¯å¢ƒåœ¨æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä¸­çš„åº”ç”¨æ—¥ç›Šæ™®éï¼Œä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å°† MCP æœåŠ¡å™¨ä»¥ä»£ç  API çš„å½¢å¼å‘ˆç°ï¼Œè€Œéç›´æ¥å·¥å…·è°ƒç”¨ã€‚æ™ºèƒ½ä½“éšåå¯é€šè¿‡ç¼–å†™ä»£ç ä¸ MCP æœåŠ¡å™¨äº¤äº’ã€‚è¯¥æ–¹æ¡ˆèƒ½åŒæ—¶è§£å†³ä¸Šè¿°ä¸¤å¤§ç—›ç‚¹ï¼šæ™ºèƒ½ä½“ä»…éœ€åŠ è½½æ‰€éœ€å·¥å…·ï¼Œå¹¶å¯åœ¨æ‰§è¡Œç¯å¢ƒä¸­å…ˆå¤„ç†æ•°æ®ï¼Œå†å°†ç»“æœè¿”å›ç»™æ¨¡å‹ã€‚</p>
<p>å®ç°æ–¹å¼æœ‰å¤šç§ï¼Œå…¶ä¸­ä¸€ç§æ˜¯ä»å·²è¿æ¥çš„ MCP æœåŠ¡å™¨ç”Ÿæˆæ‰€æœ‰å¯ç”¨å·¥å…·çš„æ–‡ä»¶æ ‘ï¼ˆfile treeï¼‰ã€‚ä»¥ä¸‹æ˜¯åŸºäº TypeScript çš„å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript">servers
â”œâ”€â”€ google-drive
â”‚   â”œâ”€â”€ getDocument.<span class="hljs-property">ts</span>
â”‚   â”œâ”€â”€ ... (other tools)
â”‚   â””â”€â”€ index.<span class="hljs-property">ts</span>
â”œâ”€â”€ salesforce
â”‚   â”œâ”€â”€ updateRecord.<span class="hljs-property">ts</span>
â”‚   â”œâ”€â”€ ... (other tools)
â”‚   â””â”€â”€ index.<span class="hljs-property">ts</span>
â””â”€â”€ ... (other servers)
</code></pre>
<p>éšåï¼Œæ¯ä¸ªå·¥å…·éƒ½å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œæ ¼å¼ç±»ä¼¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// ./servers/google-drive/getDocument.ts</span>
<span class="hljs-keyword">import</span> { callMCPTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../client.js"</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GetDocumentInput</span> {
  <span class="hljs-attr">documentId</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GetDocumentResponse</span> {
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">/* Read a document from Google Drive */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDocument</span>(<span class="hljs-params">input: GetDocumentInput</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GetDocumentResponse</span>&gt; {
  <span class="hljs-keyword">return</span> callMCPTool&lt;<span class="hljs-title class_">GetDocumentResponse</span>&gt;(<span class="hljs-string">'google_drive__get_document'</span>, input);
}

</code></pre>
<p>æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„ â€œä»è°·æ­Œäº‘ç«¯ç¡¬ç›˜ï¼ˆGoogle Driveï¼‰åˆ° Salesforceâ€ çš„ç¤ºä¾‹ï¼Œä¼šè½¬åŒ–ä¸ºå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// Read transcript from Google Docs and add to Salesforce prospect</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> gdrive <span class="hljs-keyword">from</span> <span class="hljs-string">'./servers/google-drive'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> salesforce <span class="hljs-keyword">from</span> <span class="hljs-string">'./servers/salesforce'</span>;

<span class="hljs-keyword">const</span> transcript = (<span class="hljs-keyword">await</span> gdrive.<span class="hljs-title function_">getDocument</span>({ <span class="hljs-attr">documentId</span>: <span class="hljs-string">'abc123'</span> })).<span class="hljs-property">content</span>;
<span class="hljs-keyword">await</span> salesforce.<span class="hljs-title function_">updateRecord</span>({
  <span class="hljs-attr">objectType</span>: <span class="hljs-string">'SalesMeeting'</span>,
  <span class="hljs-attr">recordId</span>: <span class="hljs-string">'00Q5f000001abcXYZ'</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-title class_">Notes</span>: transcript }
});
</code></pre>
<p>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰é€šè¿‡éå†æ–‡ä»¶ç³»ç»Ÿå‘ç°å·¥å…·ï¼šå…ˆåˆ—å‡º ./servers/ ç›®å½•ä»¥æŸ¥æ‰¾å¯ç”¨æœåŠ¡å™¨ï¼ˆå¦‚ google-drive å’Œ salesforceï¼‰ï¼Œå†è¯»å–å®Œæˆä»»åŠ¡æ‰€éœ€çš„ç‰¹å®šå·¥å…·æ–‡ä»¶ï¼ˆå¦‚ getDocument.ts å’Œ updateRecord.tsï¼‰ï¼Œä»è€Œäº†è§£æ¯ä¸ªå·¥å…·çš„æ¥å£ã€‚è¿™ç§æ–¹å¼èƒ½è®©æ™ºèƒ½ä½“ä»…åŠ è½½å½“å‰ä»»åŠ¡æ‰€éœ€çš„å·¥å…·å®šä¹‰ï¼Œå°†ä»¤ç‰Œï¼ˆtokenï¼‰ç”¨é‡ä» 15 ä¸‡ä¸ªå‡å°‘è‡³ 2000 ä¸ª â€”â€” æ—¶é—´ä¸æˆæœ¬èŠ‚çœç‡é«˜è¾¾ 98.7%ã€‚
Cloudflareä¹Ÿå‘å¸ƒäº†ç±»ä¼¼ç ”ç©¶ç»“æœï¼Œå¹¶å°†åŸºäº MCPçš„ä»£ç æ‰§è¡Œç§°ä¸º â€œä»£ç æ¨¡å¼ï¼ˆCode Modeï¼‰â€ã€‚å…¶æ ¸å¿ƒæ€è·¯ä¸€è‡´ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ“…é•¿ç¼–å†™ä»£ç ï¼Œå¼€å‘è€…åº”åˆ©ç”¨è¿™ä¸€ä¼˜åŠ¿ï¼Œæ„å»ºèƒ½æ›´é«˜æ•ˆä¸ MCP æœåŠ¡å™¨äº¤äº’çš„æ™ºèƒ½ä½“ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€ åŸºäºMCPçš„ä»£ç æ‰§è¡Œä¼˜åŠ¿</h2>
<p>é€šè¿‡åŸºäºMCPçš„ä»£ç æ‰§è¡Œï¼Œæ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¯æŒ‰éœ€åŠ è½½å·¥å…·ã€åœ¨æ•°æ®ä¼ é€’è‡³æ¨¡å‹å‰è¿›è¡Œç­›é€‰ã€å¹¶é€šè¿‡å•æ­¥æ‰§è¡Œå¤æ‚é€»è¾‘ï¼Œä»è€Œæ›´é«˜æ•ˆåœ°åˆ©ç”¨ä¸Šä¸‹æ–‡ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹å¼åœ¨å®‰å…¨æ€§ä¸çŠ¶æ€ç®¡ç†æ–¹é¢ä¹Ÿå…·å¤‡ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-6">1. æ¸è¿›å¼ä¿¡æ¯æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰</h3>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨æ–‡ä»¶ç³»ç»Ÿå¯¼èˆªæ–¹é¢è¡¨ç°å‡ºè‰²ã€‚å°†å·¥å…·ä»¥ä»£ç å½¢å¼å‘ˆç°åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œèƒ½è®©æ¨¡å‹æŒ‰éœ€è¯»å–å·¥å…·å®šä¹‰ï¼Œè€Œéä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰å®šä¹‰ã€‚
æ­¤å¤–ï¼Œè¿˜å¯åœ¨æœåŠ¡å™¨ä¸­æ·»åŠ  search_tools å·¥å…·ï¼ˆå·¥å…·æœç´¢åŠŸèƒ½ï¼‰ä»¥æŸ¥æ‰¾ç›¸å…³å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨å‰æ–‡æåŠçš„å‡è®¾æ€§ Salesforce æœåŠ¡å™¨æ—¶ï¼Œæ™ºèƒ½ä½“å¯æœç´¢ â€œsalesforceâ€ å…³é”®è¯ï¼Œä»…åŠ è½½å½“å‰ä»»åŠ¡æ‰€éœ€çš„å·¥å…·ã€‚åœ¨ search_tools å·¥å…·ä¸­åŠ å…¥ â€œç»†èŠ‚çº§åˆ«å‚æ•°â€ï¼ˆdetail level parameterï¼‰ï¼Œèƒ½è®©æ™ºèƒ½ä½“é€‰æ‹©æ‰€éœ€çš„ä¿¡æ¯è¯¦ç»†ç¨‹åº¦ï¼ˆå¦‚ä»…åç§°ã€åç§°ä¸æè¿°ã€æˆ–åŒ…å«æ¨¡å¼å®šä¹‰çš„å®Œæ•´å·¥å…·å®šä¹‰ï¼‰ï¼Œè¿™åŒæ ·æœ‰åŠ©äºæ™ºèƒ½ä½“èŠ‚çœä¸Šä¸‹æ–‡èµ„æºã€é«˜æ•ˆå®šä½å·¥å…·ã€‚</p>
<h3 data-id="heading-7">2. ä¸Šä¸‹æ–‡é«˜æ•ˆçš„å·¥å…·ç»“æœï¼ˆContext Efficient Tool Resultsï¼‰</h3>
<p>å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ï¼Œæ™ºèƒ½ä½“å¯åœ¨ä»£ç ä¸­å…ˆå¯¹ç»“æœè¿›è¡Œç­›é€‰ä¸è½¬æ¢ï¼Œå†å°†å…¶è¿”å›ç»™æ¨¡å‹ã€‚ä»¥è·å–åŒ…å« 1 ä¸‡è¡Œæ•°æ®çš„ç”µå­è¡¨æ ¼ï¼ˆspreadsheetï¼‰ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// Without code execution - all rows flow through context</span>
<span class="hljs-variable constant_">TOOL</span> <span class="hljs-attr">CALL</span>: gdrive.<span class="hljs-title function_">getSheet</span>(<span class="hljs-attr">sheetId</span>: <span class="hljs-string">'abc123'</span>)
        â†’ returns <span class="hljs-number">10</span>,<span class="hljs-number">000</span> rows <span class="hljs-keyword">in</span> context to filter manually

<span class="hljs-comment">// With code execution - filter in the execution environment</span>
<span class="hljs-keyword">const</span> allRows = <span class="hljs-keyword">await</span> gdrive.<span class="hljs-title function_">getSheet</span>({ <span class="hljs-attr">sheetId</span>: <span class="hljs-string">'abc123'</span> });
<span class="hljs-keyword">const</span> pendingOrders = allRows.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> 
  row[<span class="hljs-string">"Status"</span>] === <span class="hljs-string">'pending'</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Found <span class="hljs-subst">${pendingOrders.length}</span> pending orders`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pendingOrders.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// Only log first 5 for review</span>
</code></pre>
<p>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çœ‹åˆ°çš„å°†æ˜¯ 5 è¡Œæ•°æ®ï¼Œè€Œé 10000 è¡Œã€‚ç±»ä¼¼é€»è¾‘åŒæ ·é€‚ç”¨äºæ•°æ®èšåˆã€å¤šæ•°æ®æºå…³è”æˆ–ç‰¹å®šå­—æ®µæå–â€”â€” æ‰€æœ‰è¿™äº›æ“ä½œéƒ½ä¸ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡çª—å£ï¼ˆcontext windowï¼‰è‡ƒè‚¿ã€‚</p>
<h3 data-id="heading-8">3. æ›´å¼ºå¤§ä¸”ä¸Šä¸‹æ–‡é«˜æ•ˆçš„æ§åˆ¶æµï¼ˆControl Flowï¼‰</h3>
<p>å¾ªç¯ï¼ˆLoopsï¼‰ã€æ¡ä»¶åˆ¤æ–­ï¼ˆconditionalsï¼‰å’Œé”™è¯¯å¤„ç†ï¼ˆerror handlingï¼‰å¯é€šè¿‡å¸¸ç”¨çš„ä»£ç æ¨¡å¼å®ç°ï¼Œæ— éœ€ä¸²è”å¤šä¸ªç‹¬ç«‹çš„å·¥å…·è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œè‹¥éœ€åœ¨ Slack ä¸­å‘é€éƒ¨ç½²é€šçŸ¥ï¼Œæ™ºèƒ½ä½“å¯ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> found = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">while</span> (!found) {
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> slack.<span class="hljs-title function_">getChannelHistory</span>({ <span class="hljs-attr">channel</span>: <span class="hljs-string">'C123456'</span> });
  found = messages.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">text</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'deployment complete'</span>));
  <span class="hljs-keyword">if</span> (!found) <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">5000</span>));
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Deployment notification received'</span>);
</code></pre>
<p>è¯¥æ–¹å¼æ¯”åœ¨æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¾ªç¯ä¸­äº¤æ›¿æ‰§è¡Œ MCP å·¥å…·è°ƒç”¨ä¸ç¡çœ å‘½ä»¤ï¼ˆsleep commandsï¼‰æ›´é«˜æ•ˆã€‚
æ­¤å¤–ï¼Œèƒ½å¤Ÿç¼–å†™å¯æ‰§è¡Œçš„æ¡ä»¶åˆ†æ”¯æ ‘ï¼ˆconditional treeï¼‰ï¼Œè¿˜èƒ½å‡å°‘ â€œé¦–ä»¤ç‰Œå“åº”æ—¶é—´â€ï¼ˆtime to first tokenï¼‰å»¶è¿Ÿï¼šæ— éœ€ç­‰å¾…æ¨¡å‹è¯„ä¼°æ¡ä»¶è¯­å¥ï¼ˆif-statementï¼‰ï¼Œæ™ºèƒ½ä½“å¯å°†è¯¥ä»»åŠ¡äº¤ç”±ä»£ç æ‰§è¡Œç¯å¢ƒå®Œæˆã€‚</p>
<h3 data-id="heading-9">4. éšç§ä¿æŠ¤å‹æ“ä½œï¼ˆPrivacy-preserving operationsï¼‰</h3>
<p>å½“æ™ºèƒ½ä½“é€šè¿‡ MCP æ‰§è¡Œä»£ç æ—¶ï¼Œä¸­é—´ç»“æœé»˜è®¤ä¿ç•™åœ¨æ‰§è¡Œç¯å¢ƒä¸­ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæ™ºèƒ½ä½“ä»…èƒ½è·å–ä½ æ˜ç¡®è®°å½•ï¼ˆlogï¼‰æˆ–è¿”å›çš„æ•°æ® â€”â€” è¿™æ„å‘³ç€ï¼Œä½ ä¸å¸Œæœ›ä¸æ¨¡å‹å…±äº«çš„æ•æ„Ÿæ•°æ®å¯åœ¨å·¥ä½œæµä¸­æµè½¬ï¼Œä¸”å§‹ç»ˆä¸ä¼šè¿›å…¥æ¨¡å‹çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ã€‚</p>
<p>å¯¹äºæ•æ„Ÿåº¦æ›´é«˜çš„ä»»åŠ¡åœºæ™¯ï¼Œæ™ºèƒ½ä½“æ¡†æ¶ï¼ˆagent harnessï¼‰å¯è‡ªåŠ¨å¯¹æ•æ„Ÿæ•°æ®è¿›è¡Œä»¤ç‰ŒåŒ–å¤„ç†ï¼ˆtokenize sensitive dataï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥éœ€å°†ç”µå­è¡¨æ ¼ï¼ˆspreadsheetï¼‰ä¸­çš„å®¢æˆ·è”ç³»æ–¹å¼å¯¼å…¥ Salesforceï¼Œæ™ºèƒ½ä½“å°†ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> sheet = <span class="hljs-keyword">await</span> gdrive.<span class="hljs-title function_">getSheet</span>({ <span class="hljs-attr">sheetId</span>: <span class="hljs-string">'abc123'</span> });
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> row <span class="hljs-keyword">of</span> sheet.<span class="hljs-property">rows</span>) {
  <span class="hljs-keyword">await</span> salesforce.<span class="hljs-title function_">updateRecord</span>({
    <span class="hljs-attr">objectType</span>: <span class="hljs-string">'Lead'</span>,
    <span class="hljs-attr">recordId</span>: row.<span class="hljs-property">salesforceId</span>,
    <span class="hljs-attr">data</span>: { 
      <span class="hljs-title class_">Email</span>: row.<span class="hljs-property">email</span>,
      <span class="hljs-title class_">Phone</span>: row.<span class="hljs-property">phone</span>,
      <span class="hljs-title class_">Name</span>: row.<span class="hljs-property">name</span>
    }
  });
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Updated <span class="hljs-subst">${sheet.rows.length}</span> leads`</span>);
</code></pre>
<p>MCPå®¢æˆ·ç«¯ä¼šæ‹¦æˆªæ•°æ®ï¼Œå¹¶åœ¨æ•°æ®ä¼ é€’è‡³æ¨¡å‹å‰ï¼Œå¯¹ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆPIIï¼‰è¿›è¡Œä»¤ç‰ŒåŒ–å¤„ç†ï¼ˆtokenizeï¼‰ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// What the agent would see, if it logged the sheet.rows:</span>
[
  { <span class="hljs-attr">salesforceId</span>: <span class="hljs-string">'00Q...'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'[EMAIL_1]'</span>, <span class="hljs-attr">phone</span>: <span class="hljs-string">'[PHONE_1]'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'[NAME_1]'</span> },
  { <span class="hljs-attr">salesforceId</span>: <span class="hljs-string">'00Q...'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'[EMAIL_2]'</span>, <span class="hljs-attr">phone</span>: <span class="hljs-string">'[PHONE_2]'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'[NAME_2]'</span> },
  ...
]
</code></pre>
<p>éšåï¼Œå½“è¯¥æ•°æ®åœ¨å¦ä¸€æ¬¡ MCP å·¥å…·è°ƒç”¨ä¸­è¢«å…±äº«æ—¶ï¼ŒMCP å®¢æˆ·ç«¯ä¼šé€šè¿‡æŸ¥æ‰¾æ˜ å°„å…³ç³»å¯¹å…¶è¿›è¡Œè§£ä»¤ç‰ŒåŒ–å¤„ç†ï¼ˆuntokenizeï¼‰ã€‚çœŸå®çš„ç”µå­é‚®ç®±åœ°å€ã€ç”µè¯å·ç å’Œå§“åä¼šä»è°·æ­Œè¡¨æ ¼ï¼ˆGoogle Sheetsï¼‰æµè½¬è‡³ Salesforceï¼Œä½†å…¨ç¨‹ä¸ä¼šç»è¿‡æ¨¡å‹ã€‚è¿™èƒ½é˜²æ­¢æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ„å¤–è®°å½•æˆ–å¤„ç†æ•æ„Ÿæ•°æ®ã€‚ä½ è¿˜å¯ä»¥å€ŸåŠ©æ­¤åŠŸèƒ½å®šä¹‰ç¡®å®šæ€§å®‰å…¨è§„åˆ™ï¼ˆdeterministic security rulesï¼‰ï¼ŒæŒ‡å®šæ•°æ®çš„å¯æµå…¥å’Œæµå‡ºè·¯å¾„ã€‚</p>
<h3 data-id="heading-10">5. çŠ¶æ€æŒä¹…åŒ–ä¸æŠ€èƒ½æ‰©å±•ï¼ˆState persistence and skillsï¼‰</h3>
<p>å…·å¤‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™çš„ä»£ç æ‰§è¡Œèƒ½åŠ›ï¼Œè®©æ™ºèƒ½ä½“èƒ½å¤Ÿåœ¨å¤šä¸ªæ“ä½œä¹‹é—´ç»´æŒçŠ¶æ€ï¼ˆmaintain stateï¼‰ã€‚æ™ºèƒ½ä½“å¯å°†ä¸­é—´ç»“æœå†™å…¥æ–‡ä»¶ï¼Œä»è€Œæ”¯æŒæ¢å¤å·¥ä½œè¿›åº¦ï¼ˆresume workï¼‰å’Œè·Ÿè¸ªä»»åŠ¡è¿›å±•ï¼ˆtrack progressï¼‰ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> leads = <span class="hljs-keyword">await</span> salesforce.<span class="hljs-title function_">query</span>({ 
  <span class="hljs-attr">query</span>: <span class="hljs-string">'SELECT Id, Email FROM Lead LIMIT 1000'</span> 
});
<span class="hljs-keyword">const</span> csvData = leads.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${l.Id}</span>,<span class="hljs-subst">${l.Email}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
<span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'./workspace/leads.csv'</span>, csvData);

<span class="hljs-comment">// Later execution picks up where it left off</span>
<span class="hljs-keyword">const</span> saved = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./workspace/leads.csv'</span>, <span class="hljs-string">'utf-8'</span>);
</code></pre>
<p>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰è¿˜èƒ½å°†è‡ªèº«ä»£ç æŒä¹…åŒ–ä¸ºå¯å¤ç”¨å‡½æ•°ï¼ˆreusable functionsï¼‰ã€‚ä¸€æ—¦æ™ºèƒ½ä½“å¼€å‘å‡ºå¯å®ŒæˆæŸé¡¹ä»»åŠ¡çš„å¯ç”¨ä»£ç ï¼Œä¾¿å¯å°†è¯¥å®ç°æ–¹æ¡ˆä¿å­˜èµ·æ¥ï¼Œä»¥å¤‡åç»­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// In ./skills/save-sheet-as-csv.ts</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> gdrive <span class="hljs-keyword">from</span> <span class="hljs-string">'./servers/google-drive'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveSheetAsCsv</span>(<span class="hljs-params">sheetId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> gdrive.<span class="hljs-title function_">getSheet</span>({ sheetId });
  <span class="hljs-keyword">const</span> csv = data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> row.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
  <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">`./workspace/sheet-<span class="hljs-subst">${sheetId}</span>.csv`</span>, csv);
  <span class="hljs-keyword">return</span> <span class="hljs-string">`./workspace/sheet-<span class="hljs-subst">${sheetId}</span>.csv`</span>;
}

<span class="hljs-comment">// Later, in any agent execution:</span>
<span class="hljs-keyword">import</span> { saveSheetAsCsv } <span class="hljs-keyword">from</span> <span class="hljs-string">'./skills/save-sheet-as-csv'</span>;
<span class="hljs-keyword">const</span> csvPath = <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveSheetAsCsv</span>(<span class="hljs-string">'abc123'</span>);
</code></pre>
<p>è¿™ä¸ â€œæŠ€èƒ½ï¼ˆSkillsï¼‰â€ æ¦‚å¿µç´§å¯†ç›¸å…³ â€”â€”â€œæŠ€èƒ½â€ æŒ‡åŒ…å«å¯å¤ç”¨æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºçš„æ–‡ä»¶å¤¹ï¼Œä¾›æ¨¡å‹ç”¨äºæå‡ç‰¹å®šä»»åŠ¡çš„æ‰§è¡Œæ€§èƒ½ã€‚åœ¨è¿™äº›å·²ä¿å­˜çš„å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ª SKILL.md æ–‡ä»¶ï¼Œå³å¯åˆ›å»ºç»“æ„åŒ–çš„æŠ€èƒ½æ¨¡å—ï¼Œä¾›æ¨¡å‹å‚è€ƒå’Œä½¿ç”¨ã€‚é•¿æ­¤ä»¥å¾€ï¼Œä½ çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å°†èƒ½æ„å»ºä¸€ä¸ªåŒ…å«æ›´é«˜çº§èƒ½åŠ›çš„ â€œå·¥å…·ç®±â€ï¼Œé€æ­¥å®Œå–„é«˜æ•ˆå·¥ä½œæ‰€éœ€çš„åŸºç¡€æ¶æ„ã€‚</p>
<p>éœ€æ³¨æ„çš„æ˜¯ï¼Œä»£ç æ‰§è¡Œä¹Ÿä¼šå¸¦æ¥å…¶è‡ªèº«çš„å¤æ‚æ€§ã€‚è¿è¡Œæ™ºèƒ½ä½“ç”Ÿæˆçš„ä»£ç ï¼Œéœ€è¦ä¸€ä¸ªå…·å¤‡é€‚å½“æ²™ç®±éš”ç¦»ï¼ˆsandboxingï¼‰ã€èµ„æºé™åˆ¶ï¼ˆresource limitsï¼‰å’Œç›‘æ§ï¼ˆmonitoringï¼‰åŠŸèƒ½çš„å®‰å…¨æ‰§è¡Œç¯å¢ƒã€‚è¿™äº›åŸºç¡€è®¾æ–½éœ€æ±‚ä¼šå¢åŠ è¿è¥å¼€é”€ï¼ŒåŒæ—¶å¸¦æ¥ç›´æ¥å·¥å…·è°ƒç”¨æ‰€æ— éœ€è€ƒè™‘çš„å®‰å…¨é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨é‡‡ç”¨ä»£ç æ‰§è¡Œæ–¹å¼æ—¶ï¼Œéœ€æƒè¡¡å…¶ä¼˜åŠ¿ï¼ˆé™ä½ä»¤ç‰Œæˆæœ¬ã€å‡å°‘å»¶è¿Ÿã€æå‡å·¥å…·ç»„åˆèƒ½åŠ›ï¼‰ä¸å®ç°æˆæœ¬ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ä¸ºæ™ºèƒ½ä½“æä¾›äº†è¿æ¥ä¼—å¤šå·¥å…·ä¸ç³»ç»Ÿçš„åŸºç¡€åè®®ã€‚ç„¶è€Œï¼Œå½“è¿æ¥çš„æœåŠ¡å™¨æ•°é‡è¿‡å¤šæ—¶ï¼Œå·¥å…·å®šä¹‰ä¸ç»“æœä¼šæ¶ˆè€—è¿‡é‡ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œå¯¼è‡´æ™ºèƒ½ä½“æ•ˆç‡ä¸‹é™ã€‚
å°½ç®¡æœ¬æ–‡ä¸­æ¢è®¨çš„è¯¸å¤šé—®é¢˜ï¼ˆä¸Šä¸‹æ–‡ç®¡ç†ã€å·¥å…·ç»„åˆã€çŠ¶æ€æŒä¹…åŒ–ï¼‰çœ‹ä¼¼æ–°é¢–ï¼Œä½†åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸæ—©å·²å­˜åœ¨æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚ä»£ç æ‰§è¡Œå°†è¿™äº›æ—¢å®šæ¨¡å¼åº”ç”¨äºæ™ºèƒ½ä½“ï¼Œä½¿å…¶èƒ½å¤Ÿé€šè¿‡ç†Ÿæ‚‰çš„ç¼–ç¨‹ç»“æ„ï¼Œæ›´é«˜æ•ˆåœ°ä¸ MCP æœåŠ¡å™¨äº¤äº’ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[react-grid-layout åŸç†æ‹†è§£ï¼šå¸ƒå±€å¼•æ“ã€æ‹–æ‹½ç³»ç»Ÿä¸å“åº”å¼è®¾è®¡]]></title>    <link>https://juejin.cn/post/7574584245110685747</link>    <guid>https://juejin.cn/post/7574584245110685747</guid>    <pubDate>2025-11-20T03:11:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245110685747" data-draft-id="7574584245109588019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="react-grid-layout åŸç†æ‹†è§£ï¼šå¸ƒå±€å¼•æ“ã€æ‹–æ‹½ç³»ç»Ÿä¸å“åº”å¼è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-20T03:11:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒé¥ºå­ä¸åƒé¦…"/> <meta itemprop="url" content="https://juejin.cn/user/1148309742825495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            react-grid-layout åŸç†æ‹†è§£ï¼šå¸ƒå±€å¼•æ“ã€æ‹–æ‹½ç³»ç»Ÿä¸å“åº”å¼è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1148309742825495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒé¥ºå­ä¸åƒé¦…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:11:13.000Z" title="Thu Nov 20 2025 03:11:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>react-grid-layout</code>æ˜¯ React ç”Ÿæ€ä¸­ä¸€ä¸ªéå¸¸æµè¡Œçš„ã€ç”¨äºæ„å»º<strong>å¯æ‹–æ‹½</strong>ã€<strong>å¯è°ƒæ•´å¤§å°</strong>ã€<strong>å“åº”å¼</strong>ç½‘æ ¼å¸ƒå±€çš„åº“ã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºç”¨ç®€æ´çš„ API å®ç°äº†å¤æ‚çš„å¸ƒå±€ç®¡ç†ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ å¸ƒå±€ã€åæ ‡</h2>
<p><code>react-grid-layout</code>çš„å®ç°åŸºçŸ³åœ¨äºå®ƒå°†ç»„ä»¶çš„<strong>å®é™…å±å¹•ä½ç½®</strong>ä¸<strong>æŠ½è±¡çš„ç½‘æ ¼ä½ç½®</strong>å½»åº•åˆ†ç¦»</p>
<h3 data-id="heading-1">1. å¸ƒå±€æ•°ç»„</h3>
<p>ä¸ç›´æ¥å­˜å‚¨ç»„ä»¶çš„åƒç´ ä½ç½®ï¼Œè€Œæ˜¯ç»´æŠ¤ä¸€ä¸ªåä¸º <code>layout</code> çš„ JavaScript å¯¹è±¡æ•°ç»„</p>
<p>æ¯ä¸ªå…ƒç´ ï¼ˆitemï¼‰åœ¨å¸ƒå±€æ•°ç»„ä¸­éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å…³é”®å±æ€§ï¼š</p>








































<table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ç±»å‹</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><code>i</code></td><td>String</td><td>å…ƒç´ çš„å”¯ä¸€ IDï¼Œå¯¹åº”äºå…¶ <code>key</code> æˆ–å­ç»„ä»¶çš„ <code>key</code>ã€‚</td></tr><tr><td><code>x</code></td><td>Number</td><td>å…ƒç´ åœ¨ç½‘æ ¼ä¸­çš„<strong>åˆ—</strong>èµ·å§‹åæ ‡ï¼ˆGrid Xï¼‰ã€‚</td></tr><tr><td><code>y</code></td><td>Number</td><td>å…ƒç´ åœ¨ç½‘æ ¼ä¸­çš„<strong>è¡Œ</strong>èµ·å§‹åæ ‡ï¼ˆGrid Yï¼‰ã€‚</td></tr><tr><td><code>w</code></td><td>Number</td><td>å…ƒç´ çš„å®½åº¦ï¼Œå ç”¨çš„ç½‘æ ¼<strong>åˆ—æ•°</strong>ã€‚</td></tr><tr><td><code>h</code></td><td>Number</td><td>å…ƒç´ çš„é«˜åº¦ï¼Œå ç”¨çš„ç½‘æ ¼<strong>è¡Œæ•°</strong>ã€‚</td></tr><tr><td><code>static</code></td><td>Boolean</td><td>å¦‚æœä¸º <code>true</code>ï¼Œåˆ™å…ƒç´ ä¸å¯æ‹–æ‹½å’Œè°ƒæ•´å¤§å°ã€‚</td></tr></tbody></table>
<h3 data-id="heading-2">2. åæ ‡è½¬æ¢</h3>
<p>æ ¸å¿ƒé€»è¾‘åœ¨äºå°†ä¸Šè¿°æŠ½è±¡çš„ <code>(x, y, w, h)</code> ç½‘æ ¼åæ ‡<strong>å®æ—¶</strong>è½¬æ¢æˆæµè§ˆå™¨èƒ½ç†è§£çš„ <strong>CSS åƒç´ åæ ‡</strong></p>
<p>è¯¥è½¬æ¢ä¾èµ–äºä¸¤ä¸ªé…ç½®é¡¹ï¼š</p>
<ul>
<li><code>cols</code>: ç½‘æ ¼çš„æ€»åˆ—æ•°</li>
<li><code>rowHeight</code>: æ¯è¡Œç½‘æ ¼çš„é«˜åº¦ï¼ˆåƒç´ å€¼ï¼‰</li>
<li><code>margin</code>: ç½‘æ ¼é¡¹ä¹‹é—´çš„é—´éš”ï¼ˆåƒç´ å€¼ï¼‰</li>
</ul>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ItemÂ WidthÂ (px)</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>w</mi><mo>Ã—</mo><mtext>CellÂ Width</mtext><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>w</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><mtext>Margin</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Item Width (px)} = (w \times \text{Cell Width}) + ((w-1) \times \text{Margin})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">ItemÂ WidthÂ (px)</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">CellÂ Width</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Margin</span></span><span class="mclose">)</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>CellÂ Width</mtext><mo>=</mo><mfrac><mrow><mtext>ContainerÂ Width</mtext><mo>âˆ’</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mtext>Cols</mtext><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><mtext>Margin</mtext><mo stretchy="false">)</mo></mrow><mtext>Cols</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{Cell Width} = \frac{\text{Container Width} - ((\text{Cols} + 1) \times \text{Margin})}{\text{Cols}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">CellÂ Width</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Cols</span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ContainerÂ Width</span></span><span class="mbin mtight">âˆ’</span><span class="mopen mtight">((</span><span class="mord text mtight"><span class="mord mtight">Cols</span></span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mbin mtight">Ã—</span><span class="mord text mtight"><span class="mord mtight">Margin</span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ItemÂ HeightÂ (px)</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>h</mi><mo>Ã—</mo><mtext>RowÂ Height</mtext><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>h</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><mtext>Margin</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Item Height (px)} = (h \times \text{Row Height}) + ((h-1) \times \text{Margin})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">ItemÂ HeightÂ (px)</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">RowÂ Height</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">((</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Margin</span></span><span class="mclose">)</span></span></span></span></span></p>
<p>åˆ©ç”¨è¿™äº›å…¬å¼è®¡ç®—æ¯ä¸ªç½‘æ ¼é¡¹çš„ <code>top</code>ã€<code>left</code>ã€<code>width</code> å’Œ <code>height</code>ï¼Œå¹¶é€šè¿‡ <strong>CSS <code>transform: translate(x, y)</code></strong> æ¥å®šä½ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ <code>top</code>/<code>left</code>ï¼Œè¿™èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-3">äºŒã€ æ ¸å¿ƒç»„ä»¶ç»“æ„</h2>
<p>ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ª React ç»„ä»¶æ„æˆï¼š</p>
<h3 data-id="heading-4">1. <code>ResponsiveReactGridLayout</code></h3>
<p>è¿™æ˜¯æœ€å¤–å±‚çš„å®¹å™¨ç»„ä»¶ã€‚å®ƒè´Ÿè´£å¤„ç†<strong>å“åº”å¼</strong>é€»è¾‘</p>
<ul>
<li>ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ˆ<code>resize</code> äº‹ä»¶ï¼‰</li>
<li>æ ¹æ®å½“å‰çš„å®¹å™¨å®½åº¦ï¼Œç¡®å®šåº”è¯¥åŠ è½½å“ªä¸ª<strong>æ–­ç‚¹ï¼ˆBreakpointï¼‰</strong> ï¼ˆä¾‹å¦‚ï¼š<code>lg</code>, <code>md</code>, <code>sm</code> ç­‰ï¼‰</li>
<li>æ ¹æ®æ–­ç‚¹å’Œå…¶å¯¹åº”çš„ <code>layout</code> é…ç½®ï¼Œæ¸²æŸ“ <code>ReactGridLayout</code></li>
</ul>
<h3 data-id="heading-5">2. <code>ReactGridLayout</code></h3>
<p>è¿™æ˜¯ç½‘æ ¼æ¸²æŸ“çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè´Ÿè´£ï¼š</p>
<ul>
<li>è®¡ç®—å’Œè®¾ç½®å®¹å™¨çš„æ€»é«˜åº¦ï¼ˆ<code>min-height</code>ï¼‰ï¼Œä»¥ç¡®ä¿æ‰€æœ‰ç½‘æ ¼é¡¹éƒ½èƒ½è¢«å®¹çº³ã€‚</li>
<li>å°† <code>layout</code> æ•°ç»„éå†ï¼Œä¸ºæ¯ä¸€ä¸ªç½‘æ ¼é¡¹æ¸²æŸ“ä¸€ä¸ª <code>GridItem</code>ã€‚</li>
<li>ç®¡ç†æ‹–æ‹½å’Œè°ƒæ•´å¤§å°æ“ä½œçš„çŠ¶æ€ï¼ˆ<strong>å½±å­/å ä½ç¬¦</strong>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">3. <code>GridItem</code></h3>
<p>è¿™æ˜¯æ¯ä¸ªå¯æ‹–æ‹½/è°ƒæ•´å¤§å°çš„ç½‘æ ¼é¡¹çš„å®¹å™¨</p>
<ul>
<li>æ¸²æŸ“ä¸€ä¸ªå†…éƒ¨çš„ <code>div</code> æ¥åŒ…è£¹ç”¨æˆ·ä¼ å…¥çš„å­ç»„ä»¶</li>
<li>æ³¨å…¥<strong>æ‹–æ‹½å¥æŸ„</strong>å’Œ<strong>è°ƒæ•´å¤§å°å¥æŸ„</strong> ã€‚</li>
<li>é€šè¿‡ç›‘å¬é¼ æ ‡äº‹ä»¶ï¼ˆ<code>onMouseDown</code>/<code>onMouseMove</code>/<code>onMouseUp</code>ï¼‰å®ç°äº¤äº’</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€ æ‹–æ‹½å’Œè°ƒæ•´å¤§å°åŸç†</h2>
<p>æ‹–æ‹½å’Œè°ƒæ•´å¤§å°ä¾èµ–äºä¸¤ä¸ªåº“<strong>react-draggable</strong>ä¸<strong>react-resizable</strong></p>
<h3 data-id="heading-8">1. å ä½ç¬¦ä¸çŠ¶æ€ç®¡ç†</h3>
<p>å½“ç”¨æˆ·å¼€å§‹æ‹–æ‹½æˆ–è°ƒæ•´å¤§å°æ—¶ï¼Œä¸ä¼šç«‹å³æ›´æ–° <code>layout</code> çŠ¶æ€ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ç§â€œå½±å­â€æœºåˆ¶æ¥ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</p>
<ul>
<li><strong>å ä½ç¬¦ï¼ˆPlaceholderï¼‰</strong> : ä¸€ä¸ªåŠé€æ˜çš„ã€ä¸å½“å‰æ“ä½œç½‘æ ¼é¡¹å…·æœ‰ç›¸åŒå°ºå¯¸çš„å…ƒç´ ä¼šå‡ºç°åœ¨å…¶ä¸‹æ–¹ï¼ŒæŒ‡ç¤ºæ“ä½œå®Œæˆåç½‘æ ¼é¡¹å°†å æ®çš„ä½ç½®</li>
<li><strong>æ“ä½œè¿‡ç¨‹</strong>: åœ¨ <code>onMouseMove</code> è¿‡ç¨‹ä¸­ï¼ŒRGL å®æ—¶è®¡ç®—é¼ æ ‡ä½ç½®å¯¹åº”çš„<strong>æ–°ç½‘æ ¼åæ ‡</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>(new_x,Â new_y,Â new_w,Â new_h)</mtext></mrow><annotation encoding="application/x-tex">\text{(new\_x, new\_y, new\_w, new\_h)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"/><span class="mord text"><span class="mord">(new_x,Â new_y,Â new_w,Â new_h)</span></span></span></span></span></span>ï¼Œå¹¶æ›´æ–°å ä½ç¬¦çš„ä½ç½®</li>
<li><strong>æ“ä½œç»“æŸ</strong>: åªæœ‰åœ¨ <code>onMouseUp</code> é‡Šæ”¾æ—¶ï¼ŒRGL æ‰ä¼šè°ƒç”¨ <code>onLayoutChange</code>ï¼Œå°†æœ€ç»ˆçš„ç½‘æ ¼åæ ‡æ›´æ–°åˆ°çˆ¶ç»„ä»¶ä¸­</li>
</ul>
<h3 data-id="heading-9">2. ç½‘æ ¼å†²çªè§£å†³ç®—æ³•</h3>
<ol>
<li><strong>å†²çªæ£€æµ‹</strong>: æ£€æµ‹æ–°ä½ç½® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Aâ€™</mtext></mrow><annotation encoding="application/x-tex">\text{A'}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">Aâ€™</span></span></span></span></span></span> æ˜¯å¦ä¸ä»»ä½•å…¶ä»–ç½‘æ ¼é¡¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>B</mtext></mrow><annotation encoding="application/x-tex">\text{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">B</span></span></span></span></span></span> å‘ç”ŸçŸ©å½¢é‡å ã€‚</li>
<li><strong>å‘ä¸‹æ¨</strong> : å¦‚æœå‘ç”Ÿå†²çªï¼Œä¼šå°è¯•å°† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>B</mtext></mrow><annotation encoding="application/x-tex">\text{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">B</span></span></span></span></span></span> ä»¥åŠä¸ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>B</mtext></mrow><annotation encoding="application/x-tex">\text{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">B</span></span></span></span></span></span> å†²çªçš„å…¶ä»–ç½‘æ ¼é¡¹å‘ä¸‹ï¼ˆå¢å¤§ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>y</mtext></mrow><annotation encoding="application/x-tex">\text{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">y</span></span></span></span></span></span> åæ ‡ï¼‰æ¨åŠ¨ï¼Œç›´åˆ°ä¸å†å‘ç”Ÿå†²çª</li>
<li><strong>ç´§å‡‘åŒ–</strong> : åœ¨æ¯æ¬¡å¸ƒå±€å˜åŒ–åï¼Œå¯ä»¥æ‰§è¡Œ Compaction ç®—æ³•ã€‚å®ƒä¼šå°è¯•å°†æ‰€æœ‰éé™æ€çš„ç½‘æ ¼é¡¹å‘ä¸Šï¼ˆå‡å° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>y</mtext></mrow><annotation encoding="application/x-tex">\text{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">y</span></span></span></span></span></span> åæ ‡ï¼‰æˆ–å‘å·¦ï¼ˆå‡å° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>x</mtext></mrow><annotation encoding="application/x-tex">\text{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord text"><span class="mord">x</span></span></span></span></span></span> åæ ‡ï¼‰ç§»åŠ¨åˆ°å¯ç”¨çš„æœ€é«˜/æœ€å·¦ä½ç½®ï¼Œä»è€Œæ¶ˆé™¤ç½‘æ ¼ä¸­çš„ä¸å¿…è¦ç©ºç™½</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„å›¾æ ‡è¿˜åœ¨ç”¨ PNGï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±ä¼šæ¢æˆ iconfont]]></title>    <link>https://juejin.cn/post/7574568258800664603</link>    <guid>https://juejin.cn/post/7574568258800664603</guid>    <pubDate>2025-11-20T03:10:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258800664603" data-draft-id="7574357603406364722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„å›¾æ ‡è¿˜åœ¨ç”¨ PNGï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±ä¼šæ¢æˆ iconfont"/> <meta itemprop="keywords" content="å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-11-20T03:10:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿‡æœŸçš„é¢åŒ…ç‰‡"/> <meta itemprop="url" content="https://juejin.cn/user/1978776660486157"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„å›¾æ ‡è¿˜åœ¨ç”¨ PNGï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±ä¼šæ¢æˆ iconfont
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1978776660486157/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿‡æœŸçš„é¢åŒ…ç‰‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:10:08.000Z" title="Thu Nov 20 2025 03:10:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆä½¿ç”¨ iconfont å›¾æ ‡ï¼Ÿ</h2>
<p>å‰ç«¯å·¥ç¨‹å¸ˆé‡åˆ°å›¾æ ‡çš„æ—¶å€™é€šå¸¸ä¼šæœ‰ä¸¤ä¸ªååº”ï¼šä¸€æ˜¯â€œå¹²è„†åƒç´ å…šä¸€æ ·æŠŠ PNG å…¨éƒ½æå®šå§â€ï¼ŒäºŒæ˜¯â€œåˆè¦æ”¹å›¾å•¦ï¼Œå¿ƒç´¯â€ã€‚iconfont çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†è®©æˆ‘ä»¬å°‘ç‚¹å¿ƒç´¯ã€å¤šç‚¹ç”Ÿäº§åŠ›ï¼ˆå’Œæ‚ é—²ï¼‰ã€‚</p>
<h3 data-id="heading-1">ç»Ÿä¸€ç®¡ç† â€”â€” ä¸è¦å†åˆ°å¤„æ‰¾å›¾äº†</h3>
<p>è®¾è®¡ç¨¿é‡Œç‚¹ç¼€çš„å°å›¾æ ‡å¾ˆå¤šæ—¶å€™çœ‹èµ·æ¥å¾®ä¸è¶³é“ï¼Œä½†å®ƒä»¬åˆ†æ•£åœ¨é¡¹ç›®å„å¤„æ—¶ï¼Œç®¡ç†èµ·æ¥æ¯”è¿½å‰§è¿˜å¤æ‚ã€‚ä¼ ç»Ÿåšæ³•å¤§æ¦‚æ˜¯ï¼š</p>
<ul>
<li>ä¸‹è½½å›¾æ ‡æ–‡ä»¶æ”¾ç›®å½•ï¼Œç„¶åç”¨ <code>&lt;img&gt;</code> æˆ– <code>background</code> å¼•å…¥ï¼›</li>
<li>ä¸ºäº†å‡å°‘ HTTP è¯·æ±‚ï¼ŒæŠŠå¾ˆå¤šå°å›¾æ‹¼æˆä¸€å¼ é›ªç¢§å›¾ï¼Œç”¨ <code>background-position</code> ç²¾ç¡®å®šä½æ˜¾ç¤ºã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æ–¹æ³•éƒ½èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ¯æ¬¡æ¢ä¸€ä¸ª icon å°±åƒç©æ‹¼å›¾ï¼šç”¨ <code>&lt;img&gt;</code> æ—¶ä¸æ•¢éšä¾¿æ›¿æ¢ï¼ˆæ€•åˆ«å¤„ä¹Ÿåœ¨ç”¨ï¼‰ï¼›ç”¨é›ªç¢§å›¾åˆ™å¾—é‡æ–°åˆ‡å›¾ã€æ”¹å®šä½ï¼Œéº»çƒ¦å¾—è¦å‘½ã€‚</p>
<p>ç”¨ iconfont çš„å¥½å¤„æ˜¯æŠŠå›¾æ ‡äº¤ç»™â€œå›¾æ ‡ç®¡ç†å¹³å°â€å»ç»´æŠ¤ï¼šä½ åªéœ€æŠŠéœ€è¦çš„ icon åŠ åˆ°é¡¹ç›®é‡Œï¼Œæ›´æ–°å›¾æ ‡åªè¦æ”¹ class æˆ– symbolï¼Œä¸ç”¨æŠŠæ•´ä¸ªé›ªç¢§å›¾ç ¸äº†é‡åšã€‚</p>
<h3 data-id="heading-2">çŸ¢é‡å›¾ â€”â€” æ”¾å¤§ä¹Ÿä¸æ‹–æ³¥å¸¦æ°´</h3>
<p>iconfont æœ¬è´¨ä¸Šæ˜¯çŸ¢é‡ï¼ˆfont æˆ– svgï¼‰ï¼Œå¯ä»¥æ— é™æ”¾å¤§è€Œä¸å¤±çœŸã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒPNG/JPG ä¸ºäº†ä¿è¯æ¸…æ™°åº¦å¸¸å¸¸è¦åˆ‡å‡ºæ›´é«˜åˆ†è¾¨ç‡çš„å›¾ï¼Œæ–‡ä»¶ä½“ç§¯å°±ä¼šè†¨èƒ€å¾—åƒå‘éœ‰çš„é¢åŒ…ã€‚</p>
<h3 data-id="heading-3">ä¸ä¼ ç»Ÿå›¾ç‰‡çš„ä¼˜ç‚¹ï¼ˆç®€æ˜ç‰ˆï¼‰</h3>
<ul>
<li>æ˜“äºå†…è”ï¼šå¯ä»¥åƒæ–‡å­—ä¸€æ ·æ”¾åœ¨è¡Œå†…ï¼Œä¸æŒ‰é’®ã€æ–‡å­—è‡ªç„¶å¯¹é½ï¼›</li>
<li>å¼ºç¼“å­˜ç­–ç•¥ï¼šå­—ä½“æ–‡ä»¶å¸¦ fingerprintï¼ˆå“ˆå¸Œï¼‰ï¼Œæ›´æ–°åèƒ½å¼ºåˆ¶åˆ·æ–°ï¼Œé¿å…ç¼“å­˜å‘ï¼›</li>
<li>æ˜“äºæ ·å¼åŒ–ï¼šç”¨ CSS æ§åˆ¶ <code>color</code>ã€<code>font-size</code>ã€<code>text-shadow</code> ç­‰ï¼Œhoverã€active è½»æ¾æå®šï¼›</li>
<li>å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼šæ¯”èµ·æˆç™¾ä¸Šåƒçš„å›¾åƒè¯·æ±‚ï¼Œå­—ä½“/ç¬¦å·åªéœ€å‡ æ¬¡è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-4">ä½¿ç”¨æ–¹å¼ï¼ˆæ‘˜è‡ªå®˜ç½‘å¹¶åšäº†ç‚¹å°é­”æ”¹ï¼‰</h3>
<p>ä¸‹é¢ä¸‰ç§å¸¸è§å¼•ç”¨æ–¹å¼å„æœ‰ä¾§é‡â€”â€”é€‰å“ªä¸ªï¼Œçœ‹ä½ çš„å…¼å®¹éœ€æ±‚å’Œå›¾æ ‡éœ€æ±‚ï¼ˆå•è‰²/å¤šè‰²ï¼‰ã€‚</p>
<h4 data-id="heading-5">Unicode å¼•ç”¨ï¼ˆå…¼å®¹æ€§æœ€å¼ºï¼‰</h4>
<p>ç‰¹ç‚¹ï¼šå…¼å®¹ IE6+ å’Œç°ä»£æµè§ˆå™¨ï¼Œåƒå­—ä½“ä¸€æ ·ä½¿ç”¨ï¼Œå¤§å°é¢œè‰²å¥½è°ƒæ•´ï¼Œä½†ç±»åè¯­ä¹‰ä¸æ˜æ˜¾ï¼ˆç›´æ¥å†™ç¼–ç ä¸å¤ªç›´è§‚ï¼‰ã€‚</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‹·è´é¡¹ç›®ç”Ÿæˆçš„ <code>@font-face</code>ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css">Â <span class="hljs-keyword">@font-face</span> {
Â  Â <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'iconfont'</span>;
Â  Â <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'iconfont.eot'</span>);
Â  Â <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'iconfont.eot?#iefix'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'embedded-opentype'</span>),
Â  Â  Â  Â  <span class="hljs-built_in">url</span>(<span class="hljs-string">'iconfont.woff'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff'</span>),
Â  Â  Â  Â  <span class="hljs-built_in">url</span>(<span class="hljs-string">'iconfont.ttf'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'truetype'</span>),
Â  Â  Â  Â  <span class="hljs-built_in">url</span>(<span class="hljs-string">'iconfont.svg#iconfont'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'svg'</span>);
Â }
</code></pre>
<ol>
<li>å®šä¹‰åŸºç¡€æ ·å¼ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css">Â <span class="hljs-selector-class">.iconfont</span> {
Â  Â <span class="hljs-attribute">font-family</span>: <span class="hljs-string">"iconfont"</span> <span class="hljs-meta">!important</span>;
Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
Â  Â <span class="hljs-attribute">font-style</span>: normal;
Â  Â -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
Â  Â -webkit-text-stroke-<span class="hljs-attribute">width</span>: <span class="hljs-number">0.2px</span>;
Â  Â -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
Â }
</code></pre>
<ol>
<li>åœ¨é¡µé¢ä½¿ç”¨ï¼ˆç¤ºä¾‹ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">Â &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont"</span>&gt;&amp;<span class="hljs-comment">#x33;&lt;/i&gt;</span>
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šæ–°ç‰ˆ iconfont æ”¯æŒå½©è‰²å­—ä½“å›¾æ ‡ï¼Œä½†åªåœ¨ç°ä»£æµè§ˆå™¨é‡Œç”Ÿæ•ˆã€‚</p>
</blockquote>
<h4 data-id="heading-6">Font-class å¼•ç”¨ï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰</h4>
<p>ç‰¹ç‚¹ï¼šç”¨ç±»åè¡¨ç¤ºæŸä¸ªå›¾æ ‡ï¼Œè¯­ä¹‰æ›´ç›´è§‚ï¼Œå…¼å®¹ IE8+ï¼Œæœ¬è´¨ä»æ˜¯å­—ä½“ï¼ˆå•è‰²ä¸ºä¸»ï¼‰ã€‚</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å¼•å…¥å¹³å°ç»™ä½ çš„ CSS é“¾æ¥ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">Â &lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"//at.alicdn.com/t/font_8d5l8fzk5b87iudi.css"</span>&gt;
</code></pre>
<ol>
<li>ä½¿ç”¨ç±»åï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css">Â &lt;<span class="hljs-selector-tag">i</span> class="iconfont <span class="hljs-attribute">icon</span>-xxx"&gt;&lt;/<span class="hljs-selector-tag">i</span>&gt;
</code></pre>
<blockquote>
<p>å¥½å¤„ï¼šå½“éœ€è¦æ›¿æ¢å›¾æ ‡æ—¶ï¼Œåªè¦æ”¹ç±»åå¯¹åº”çš„ unicode å³å¯ï¼Œæ— éœ€åœ¨ HTML é‡Œæ”¹ç¼–ç ã€‚</p>
</blockquote>
<h4 data-id="heading-7">Symbolï¼ˆSVG Symbolï¼‰å¼•ç”¨ï¼ˆæ¨èï¼ŒåŠŸèƒ½æœ€å¼ºï¼‰</h4>
<p>ç‰¹ç‚¹ï¼šæ”¯æŒå¤šè‰²ã€å…¼å®¹æ€§ IE9+ï¼Œæ›´çµæ´»ï¼Œæ˜¯æœªæ¥ä¸»æµã€‚å¹³å°æ¨èæ­¤æ–¹å¼ã€‚ä½†æ³¨æ„ï¼šSVG æ¸²æŸ“åœ¨æŸäº›è€è®¾å¤‡ä¸Šæ€§èƒ½å¯èƒ½ç•¥é€Šäºçº¯å­—ä½“ã€‚</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>åœ¨å…¥å£å¼•å…¥ <code>iconfont.js</code>ï¼ˆä¸€æ¬¡å¼•å…¥å³å¯ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"//at.alicdn.com/t/font_8d5l8fzk5b87iudi.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<ol>
<li>å…¨å±€åŠ ä¸€æ®µåŸºç¡€æ ·å¼ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
Â <span class="hljs-selector-class">.icon</span> {
Â  Â <span class="hljs-attribute">width</span>: <span class="hljs-number">1em</span>;
Â  Â <span class="hljs-attribute">height</span>: <span class="hljs-number">1em</span>;
Â  Â <span class="hljs-attribute">vertical-align</span>: -<span class="hljs-number">0.15em</span>;
Â  Â fill: currentColor;
Â  Â <span class="hljs-attribute">overflow</span>: hidden;
Â }
Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ol>
<li>ä½¿ç”¨æ–¹å¼ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">Â &lt;svg <span class="hljs-attr">class</span>=<span class="hljs-string">"icon"</span> aria-hidden=<span class="hljs-string">"true"</span>&gt;
Â  Â &lt;use xlink:<span class="hljs-attr">href</span>=<span class="hljs-string">"#icon-xxx"</span>&gt;&lt;/use&gt;
Â &lt;/svg&gt;
</code></pre>
<h3 data-id="heading-8">å®è·µå»ºè®®ï¼ˆæˆ‘çš„ä¸¤åˆ†é’±ï¼‰</h3>
<ul>
<li>å¦‚æœé¡¹ç›®æ²¡æœ‰å¾ˆè‹›åˆ»çš„è€æµè§ˆå™¨å…¼å®¹è¦æ±‚ï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨ Symbolï¼ˆSVGï¼‰æ–¹å¼</strong>ã€‚ç®€å•ã€æ”¯æŒå¤šè‰²ï¼Œæ ·å¼çµæ´»ã€‚</li>
<li>å…¥å£åªéœ€å¼•å…¥ä¸€æ¬¡ <code>iconfont.js</code>ï¼›åœ¨éœ€è¦â€œå¹³é“ºå›¾æ ‡ä¾›é€‰æ‹©â€çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ç”¨ DOM API æŠŠæ‰€æœ‰ symbol æ”¶é›†æˆåˆ—è¡¨ä¾›å±•ç¤ºæˆ–å…¥åº“ã€‚</li>
<li>ä¸Šä¼ å›¾æ ‡å‰è¯·éµå®ˆ iconfont ä¸Šä¼ è§„èŒƒï¼ˆå¹³å°æœ‰æ–‡æ¡£ï¼‰ã€‚ä¸Šä¼ åå»ºè®®æ‰‹åŠ¨å¾®è°ƒå›¾æ ‡åœ¨ç”»å¸ƒçš„ä½ç½®å’Œå¤§å°ï¼Œä¿è¯é€šè¿‡ <code>font-size</code> ç¼©æ”¾åæ˜¾ç¤ºæ­£å¸¸ã€‚</li>
<li>ç»å¤§å¤šæ•°å›¾æ ‡æ˜¯å•è‰²çš„ã€‚å¦‚æœä¸Šä¼ æ—¶ä¸å»è‰²ï¼Œä½¿ç”¨ <code>color</code> ä¿®æ”¹é¢œè‰²å¯èƒ½ä¼šå¤±æ•ˆ â€”â€” æ‰€ä»¥ç®¡ç†é¡µé¢ä¸Šåšå»è‰²æ“ä½œå¾ˆé‡è¦ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šä» <code>iconfont.js</code> é‡Œå–å‡ºæ‰€æœ‰ symbol å¹¶ç”Ÿæˆå¯é€‰åˆ—è¡¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">Â <span class="hljs-keyword">const</span> symbols = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">"svg symbol"</span>));
Â <span class="hljs-keyword">const</span> svgList = symbols.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> ({
Â  Â <span class="hljs-attr">id</span>: s.<span class="hljs-property">id</span>,
Â  Â <span class="hljs-attr">viewBox</span>: s.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"viewBox"</span>),
Â  Â <span class="hljs-attr">paths</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(s.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">"path"</span>)).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"d"</span>)),
Â }));
Â <span class="hljs-keyword">const</span> icons = svgList.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^icon-/</span>, <span class="hljs-string">""</span>));
Â <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> icons;
</code></pre>
<h3 data-id="heading-9">å°ç»“ï¼ˆç»“å°¾å½©è›‹ï¼‰</h3>
<p>ç”¨ iconfont å°±åƒæŠŠå…¨ç«™å°å›¾æ ‡æ”¾è¿›ä¸€ä¸ªâ€œå›¾æ ‡è¶…å¸‚â€â€”â€”æ‰¾è´§æ›´å¿«ã€æ¢è´§æ›´æ–¹ä¾¿ã€æ‰“æŠ˜æ—¶ä¹Ÿä¸ä¼šæŠŠæ•´ä¸ªè´§æ¶ç ¸çƒ‚ã€‚é™¤éä½ æ‰§ç€äºæ¯ä¸ªå›¾éƒ½ç”¨ PNG æ‰‹å·¥æ‰“ç£¨ï¼ˆå¹¶ä¸”ä¹äºæ¯æ¬¡æ”¹å›¾éƒ½æ‰å¤´å‘ï¼‰ï¼Œå¦åˆ™ç»™ iconfont ä¸€ä¸ªæœºä¼šï¼Œå®ƒä¼šè®©ä½ åœ¨å›¾æ ‡é—®é¢˜ä¸Šå°‘æŒ å¤´ã€å¤šå–å’–å•¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å·¥ç¨‹åŒ–æ ¸å¿ƒçŸ¥è¯†å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7574529034648092724</link>    <guid>https://juejin.cn/post/7574529034648092724</guid>    <pubDate>2025-11-20T03:17:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574529034648092724" data-draft-id="7574529034648076340" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å·¥ç¨‹åŒ–æ ¸å¿ƒçŸ¥è¯†å…¨é¢è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-20T03:17:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å·¥ç¨‹åŒ–æ ¸å¿ƒçŸ¥è¯†å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:17:58.000Z" title="Thu Nov 20 2025 03:17:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ„å»ºå·¥å…·æ¼”è¿›ï¼šä»ä»»åŠ¡æ‰§è¡Œåˆ°æ¨¡å—åŒ–æ‰“åŒ…</h2>
<h3 data-id="heading-1">Gruntã€Gulpï¼šåŸºäºä»»åŠ¡è¿è¡Œçš„å·¥å…·</h3>
<p>Grunt å’Œ Gulp æ˜¯å‰ç«¯å·¥ç¨‹åŒ–æ—©æœŸçš„ä»£è¡¨æ€§å·¥å…·ï¼Œå®ƒä»¬çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºå·¥å‚æµæ°´çº¿ï¼š</p>
<ul>
<li>
<p><strong>è‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œ</strong>ï¼šé€šè¿‡é…ç½®ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œè‡ªåŠ¨å®Œæˆä»£ç æ£€æŸ¥ã€ç¼–è¯‘ã€å‹ç¼©ç­‰æ“ä½œ</p>
</li>
<li>
<p><strong>ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€</strong>ï¼šæ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒï¼Œæä¾›å¤§é‡åŠŸèƒ½æ’ä»¶</p>
</li>
<li>
<p><strong>çµæ´»çš„å·¥ä½œæµ</strong>ï¼šå¯ä»¥æŒ‰ç…§éœ€æ±‚å®šåˆ¶å®Œæ•´çš„å¼€å‘å·¥ä½œæµç¨‹</p>
</li>
</ul>
<h3 data-id="heading-2">Webpackï¼šåŸºäºæ¨¡å—åŒ–æ‰“åŒ…çš„å·¥å…·</h3>
<p>Webpack ä»£è¡¨äº†æ–°ä¸€ä»£æ„å»ºå·¥å…·çš„æ€æƒ³è½¬å˜ï¼š</p>
<ul>
<li>
<p><strong>ä¸€åˆ‡çš†æ¨¡å—</strong>ï¼šå°†é¡¹ç›®ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆJSã€CSSã€å›¾ç‰‡ç­‰ï¼‰éƒ½è§†ä¸ºæ¨¡å—</p>
</li>
<li>
<p><strong>ä¾èµ–å…³ç³»ç®¡ç†</strong>ï¼šé€’å½’æ„å»ºä¾èµ–å…³ç³»å›¾ï¼Œç¡®ä¿æ¨¡å—é—´çš„æ­£ç¡®å¼•ç”¨</p>
</li>
<li>
<p><strong>æ‰“åŒ…ä¼˜åŒ–</strong>ï¼šå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…æˆå°‘æ•°å‡ ä¸ª bundle æ–‡ä»¶ï¼Œä¼˜åŒ–åŠ è½½æ€§èƒ½</p>
</li>
</ul>
<h3 data-id="heading-3">ç°ä»£æ›¿ä»£æ–¹æ¡ˆï¼šnpm script</h3>
<p>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œç°åœ¨æ›´æ¨èä½¿ç”¨ npm script æ¥æ›¿ä»£ä¼ ç»Ÿçš„ä»»åŠ¡è¿è¡Œå™¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack --mode production"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack serve --mode development"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint src/"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-4">äºŒã€ä¸»æµæ‰“åŒ…å·¥å…·å¯¹æ¯”é€‰å‹</h2>
<h3 data-id="heading-5">Webpackï¼šå¤æ‚åº”ç”¨çš„ä¼˜é€‰</h3>
<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>åŠŸèƒ½å…¨é¢ï¼Œæ”¯æŒä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ç­‰é«˜çº§ç‰¹æ€§</p>
</li>
<li>
<p>ç”Ÿæ€ä¸°å¯Œï¼Œæ‹¥æœ‰å¤§é‡ loader å’Œ plugin</p>
</li>
<li>
<p>é€‚åˆå¤§å‹å¤æ‚çš„å‰ç«¯é¡¹ç›®</p>
</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> ä¼ä¸šçº§åº”ç”¨ã€å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ã€éœ€è¦å¤æ‚æ„å»ºæµç¨‹çš„é¡¹ç›®</p>
<h3 data-id="heading-6">Rollupï¼šåº“å¼€å‘çš„åˆ©å™¨</h3>
<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>Tree-shaking æ•ˆæœå‡ºè‰²ï¼Œæ‰“åŒ…ä½“ç§¯å°</p>
</li>
<li>
<p>é…ç½®ç®€å•ï¼Œä¸“æ³¨äº ES6 æ¨¡å—æ‰“åŒ…</p>
</li>
<li>
<p>è¾“å‡ºæ ¼å¼å¤šæ ·ï¼ˆESMã€CJSã€UMD ç­‰ï¼‰</p>
</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> Vueã€React ç­‰å¼€æºåº“ã€å·¥å…·åº“ã€ç»„ä»¶åº“å¼€å‘</p>
<h3 data-id="heading-7">Parcelï¼šå¿«é€ŸåŸå‹å¼€å‘</h3>
<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>é›¶é…ç½®å¼€ç®±å³ç”¨</p>
</li>
<li>
<p>æ„å»ºé€Ÿåº¦å¿«</p>
</li>
<li>
<p>é€‚åˆåˆå­¦è€…</p>
</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> demo é¡¹ç›®ã€å®éªŒæ€§é¡¹ç›®ã€å¿«é€ŸåŸå‹å¼€å‘</p>
<h2 data-id="heading-8">ä¸‰ã€Webpack æ ¸å¿ƒæ¦‚å¿µæ·±å…¥ç†è§£</h2>
<h3 data-id="heading-9">å¸¸ç”¨ Loader è¯¦è§£</h3>
<p>Loader å°±åƒæ˜¯ Webpack çš„"ç¿»è¯‘å®˜"ï¼Œè´Ÿè´£å¤„ç†å„ç§ç±»å‹çš„æ–‡ä»¶ï¼š</p>
<p>Loader åç§°</p>
<p>ä¸»è¦åŠŸèƒ½</p>
<p>ä½¿ç”¨åœºæ™¯</p>
<p><code>babel-loader</code></p>
<p>ES6+ è½¬ ES5</p>
<p>ç°ä»£ JavaScript å…¼å®¹</p>
<p><code>css-loader</code></p>
<p>è§£æ CSS æ–‡ä»¶</p>
<p>CSS æ¨¡å—åŒ–å¤„ç†</p>
<p><code>style-loader</code></p>
<p>æ³¨å…¥ CSS åˆ° DOM</p>
<p>å¼€å‘ç¯å¢ƒæ ·å¼çƒ­æ›´æ–°</p>
<p><code>file-loader</code></p>
<p>å¤„ç†æ–‡ä»¶èµ„æº</p>
<p>å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æº</p>
<p><code>url-loader</code></p>
<p>å°æ–‡ä»¶è½¬ base64</p>
<p>ä¼˜åŒ–å°èµ„æºåŠ è½½</p>
<p><strong>é‡è¦ç‰¹æ€§ï¼š</strong> Loader æ‰§è¡Œé¡ºåºä¸ºä»å³å‘å·¦ï¼Œç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„ compose ç†å¿µã€‚</p>
<h3 data-id="heading-10">å¸¸ç”¨ Plugin åŠŸèƒ½è§£æ</h3>
<p>Plugin èµ‹äºˆ Webpack æ›´å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><strong>DefinePlugin</strong>ï¼šå®šä¹‰å…¨å±€å¸¸é‡ï¼Œå¸¸ç”¨äºç¯å¢ƒå˜é‡é…ç½®</p>
</li>
<li>
<p><strong>HtmlWebpackPlugin</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶å¹¶æ³¨å…¥èµ„æºå¼•ç”¨</p>
</li>
<li>
<p><strong>MiniCssExtractPlugin</strong>ï¼šæå– CSS åˆ°ç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</p>
</li>
<li>
<p><strong>WebpackBundleAnalyzer</strong>ï¼šå¯è§†åŒ–åˆ†ææ‰“åŒ…ä½“ç§¯ï¼ŒåŠ©åŠ›æ€§èƒ½ä¼˜åŒ–</p>
</li>
</ul>
<h3 data-id="heading-11">æ ¸å¿ƒæ¦‚å¿µåŒºåˆ†</h3>
<ul>
<li>
<p><strong>Module</strong>ï¼šå¼€å‘ä¸­çš„å•ä¸ªæ¨¡å—ï¼Œå¯¹åº”æºä»£ç æ–‡ä»¶</p>
</li>
<li>
<p><strong>Chunk</strong>ï¼šä»£ç å—ï¼Œç”±å¤šä¸ªæ¨¡å—ç»„æˆ</p>
</li>
<li>
<p><strong>Bundle</strong>ï¼šæœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ï¼Œå¯èƒ½åŒ…å«å¤šä¸ª Chunk</p>
</li>
</ul>
<h2 data-id="heading-12">å››ã€Loader ä¸ Plugin æ·±åº¦å¯¹æ¯”</h2>
<p>å¯¹æ¯”ç»´åº¦</p>
<p>Loader</p>
<p>Plugin</p>
<p><strong>ä½œç”¨èŒƒå›´</strong></p>
<p>æ¨¡å—çº§åˆ«ï¼Œå¤„ç†å•ä¸ªæ–‡ä»¶</p>
<p>æ•´ä¸ªæ„å»ºè¿‡ç¨‹</p>
<p><strong>é…ç½®ä½ç½®</strong></p>
<p><code>module.rules</code> æ•°ç»„</p>
<p><code>plugins</code> æ•°ç»„</p>
<p><strong>æœ¬è´¨åŠŸèƒ½</strong></p>
<p>æ–‡ä»¶è½¬æ¢å™¨</p>
<p>ç”Ÿå‘½å‘¨æœŸé’©å­ç›‘å¬å™¨</p>
<p><strong>æ‰§è¡Œæ—¶æœº</strong></p>
<p>æ¨¡å—åŠ è½½é˜¶æ®µ</p>
<p>æ•´ä¸ªç¼–è¯‘å‘¨æœŸ</p>
<h2 data-id="heading-13">äº”ã€çƒ­æ›´æ–°æœºåˆ¶åŸç†å‰–æ</h2>
<p>Webpack Hot Module Replacement (HMR) æ˜¯ç°ä»£å¼€å‘ä½“éªŒçš„é‡è¦ä¿éšœï¼š</p>
<h3 data-id="heading-14">å·¥ä½œæµç¨‹</h3>
<ol>
<li>
<p><strong>æ–‡ä»¶ç›‘æ§</strong>ï¼šWebpack åœ¨ watch æ¨¡å¼ä¸‹ç›‘æ§æ–‡ä»¶å˜åŒ–</p>
</li>
<li>
<p><strong>å†…å­˜ç¼–è¯‘</strong>ï¼šå°†é‡æ–°ç¼–è¯‘çš„ä»£ç ä¿å­˜åœ¨å†…å­˜ä¸­</p>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¨é€</strong>ï¼šé€šè¿‡ WebSocket å‘å®¢æˆ·ç«¯æ¨é€æ›´æ–°ä¿¡æ¯</p>
</li>
<li>
<p><strong>æ¨¡å—æ›¿æ¢</strong>ï¼šå®¢æˆ·ç«¯åŠ¨æ€æ›¿æ¢å˜æ›´æ¨¡å—ï¼Œä¿æŒåº”ç”¨çŠ¶æ€</p>
</li>
</ol>
<h3 data-id="heading-15">æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li>
<p>ä¿æŒåº”ç”¨çŠ¶æ€ä¸ä¸¢å¤±</p>
</li>
<li>
<p>å¤§å¹…æå‡å¼€å‘æ•ˆç‡</p>
</li>
<li>
<p>æ”¯æŒæ ·å¼ã€ç»„ä»¶ç­‰ç²’åº¦çš„çƒ­æ›´æ–°</p>
</li>
</ul>
<h2 data-id="heading-16">å…­ã€Babel ç¼–è¯‘åŸç†æ¢ç§˜</h2>
<p>Babel çš„è½¬è¯‘è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªç²¾å¯†é˜¶æ®µï¼š</p>
<h3 data-id="heading-17">1. è§£æé˜¶æ®µï¼ˆParseï¼‰</h3>
<pre><code class="hljs language-css" lang="css">// æºä»£ç 
const sum = (<span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span>) =&gt; <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span>;
â€‹
// è½¬æ¢ä¸º AST
{
  type: <span class="hljs-string">"VariableDeclaration"</span>,
  declarations: [
    {
      type: <span class="hljs-string">"VariableDeclarator"</span>,
      id: { type: <span class="hljs-string">"Identifier"</span>, name: <span class="hljs-string">"sum"</span> },
      init: {
        type: <span class="hljs-string">"ArrowFunctionExpression"</span>,
        params: [...],
        body: {...}
      }
    }
  ]
}
</code></pre>
<h3 data-id="heading-18">2. è½¬æ¢é˜¶æ®µï¼ˆTransformï¼‰</h3>
<p>éå† ASTï¼Œåº”ç”¨å„ç§æ’ä»¶è¿›è¡Œè¯­æ³•è½¬æ¢ï¼š</p>
<ul>
<li>
<p>ç®­å¤´å‡½æ•°è½¬æ™®é€šå‡½æ•°</p>
</li>
<li>
<p>const/let è½¬ var</p>
</li>
<li>
<p>ç±»è¯­æ³•è½¬æ¢ç­‰</p>
</li>
</ul>
<h3 data-id="heading-19">3. ç”Ÿæˆé˜¶æ®µï¼ˆGenerateï¼‰</h3>
<p>å°†è½¬æ¢åçš„ AST é‡æ–°ç”Ÿæˆç›®æ ‡ä»£ç ã€‚</p>
<h2 data-id="heading-20">ä¸ƒã€ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ·±åº¦å¯¹æ¯”</h2>
<h3 data-id="heading-21">Git vs SVN æ¶æ„å·®å¼‚</h3>
<p>ç‰¹æ€§å¯¹æ¯”</p>
<p>Gitï¼ˆåˆ†å¸ƒå¼ï¼‰</p>
<p>SVNï¼ˆé›†ä¸­å¼ï¼‰</p>
<p><strong>å­˜å‚¨æ–¹å¼</strong></p>
<p>å…ƒæ•°æ®å­˜å‚¨ï¼Œå®Œæ•´ç‰ˆæœ¬å†å²</p>
<p>æ–‡ä»¶å­˜å‚¨ï¼Œå¢é‡è®°å½•</p>
<p><strong>ç½‘ç»œéœ€æ±‚</strong></p>
<p>æ”¯æŒå®Œå…¨ç¦»çº¿æ“ä½œ</p>
<p>å¿…é¡»è¿æ¥æœåŠ¡å™¨</p>
<p><strong>åˆ†æ”¯ç®¡ç†</strong></p>
<p>è½»é‡çº§åˆ†æ”¯ï¼Œå¿«é€Ÿåˆ‡æ¢</p>
<p>ç›®å½•æ‹·è´ï¼Œå¼€é”€è¾ƒå¤§</p>
<p><strong>æ•°æ®å®‰å…¨</strong></p>
<p>SHA-1 å“ˆå¸Œä¿è¯å®Œæ•´æ€§</p>
<p>ç›¸å¯¹è¾ƒå¼±</p>
<h3 data-id="heading-22">Git çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li>
<p><strong>æ€§èƒ½å“è¶Š</strong>ï¼šæœ¬åœ°æ“ä½œï¼Œé€Ÿåº¦æå¿«</p>
</li>
<li>
<p><strong>åˆ†æ”¯çµæ´»</strong>ï¼šåˆ›å»ºã€åˆå¹¶åˆ†æ”¯å‡ ä¹æ— æˆæœ¬</p>
</li>
<li>
<p><strong>æ•°æ®å¯é </strong>ï¼šå®Œæ•´çš„ç‰ˆæœ¬å†å²å’Œå†…å®¹æ ¡éªŒ</p>
</li>
</ol>
<h2 data-id="heading-23">å…«ã€Git å¸¸ç”¨å‘½ä»¤æ‰‹å†Œ</h2>
<h3 data-id="heading-24">åŸºç¡€æ“ä½œå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»“åº“åˆå§‹åŒ–</span>
git init
git <span class="hljs-built_in">clone</span> &lt;url&gt;
â€‹
<span class="hljs-comment"># æäº¤å˜æ›´</span>
git add .
git commit -m <span class="hljs-string">"commit message"</span>
â€‹
<span class="hljs-comment"># çŠ¶æ€æŸ¥çœ‹</span>
git status
git diff
git <span class="hljs-built_in">log</span> --oneline
</code></pre>
<h3 data-id="heading-25">åˆ†æ”¯ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ†æ”¯æ“ä½œ</span>
git branch feature-xxx
git checkout feature-xxx
git merge main
git branch -d feature-xxx
</code></pre>
<h3 data-id="heading-26">è¿œç¨‹åä½œ</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># è¿œç¨‹ä»“åº“</span>
git remote <span class="hljs-keyword">add</span> origin &lt;url&gt;
git push -u origin main
git pull origin main
</code></pre>
<h2 data-id="heading-27">ä¹ã€Git é«˜çº§æ“ä½œè§£æ</h2>
<h3 data-id="heading-28">git fetch vs git pull</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰å…¨æ›´æ–°ï¼šåªä¸‹è½½ä¸åˆå¹¶</span>
git fetch origin
â€‹
<span class="hljs-comment"># å¿«æ·æ›´æ–°ï¼šä¸‹è½½å¹¶åˆå¹¶</span>
git pull origin main
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šæ¨èå…ˆ <code>git fetch</code> æŸ¥çœ‹å˜æ›´ï¼Œå†å†³å®šæ˜¯å¦åˆå¹¶ã€‚</p>
<h3 data-id="heading-29">git rebase vs git merge</h3>
<p>æ“ä½œæ–¹å¼</p>
<p>æäº¤å†å²</p>
<p>é€‚ç”¨åœºæ™¯</p>
<p><strong>merge</strong></p>
<p>ä¿ç•™å®Œæ•´åˆå¹¶å†å²</p>
<p>å›¢é˜Ÿåä½œï¼Œå…¬å…±åˆ†æ”¯</p>
<p><strong>rebase</strong></p>
<p>çº¿æ€§æ•´æ´çš„å†å²</p>
<p>ä¸ªäººç‰¹æ€§åˆ†æ”¯</p>
<p><strong>rebase ä½¿ç”¨æ³¨æ„</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"># æ­£ç¡®çš„ rebase æµç¨‹
git checkout feature-branch
git rebase <span class="hljs-selector-tag">main</span>
git checkout <span class="hljs-selector-tag">main</span>
git merge feature-branch
</code></pre>
<p><strong>é‡è¦åŸåˆ™</strong>ï¼šä¸è¦åœ¨å…¬å…±åˆ†æ”¯ä¸Šæ‰§è¡Œ rebase æ“ä½œï¼</p>
<h2 data-id="heading-30">æ€»ç»“</h2>
<p>å‰ç«¯å·¥ç¨‹åŒ–æ˜¯ä¸€ä¸ªä¸æ–­æ¼”è¿›çš„æŠ€æœ¯é¢†åŸŸï¼Œä»æ—©æœŸçš„ä»»åŠ¡è¿è¡Œå™¨åˆ°ç°ä»£çš„æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·ï¼Œä»é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶åˆ°åˆ†å¸ƒå¼åä½œå¼€å‘ï¼Œæ¯ä¸€æ¬¡æŠ€æœ¯å˜é©éƒ½å¸¦æ¥äº†å¼€å‘æ•ˆç‡å’Œé¡¹ç›®è´¨é‡çš„æ˜¾è‘—æå‡ã€‚æŒæ¡è¿™äº›æ ¸å¿ƒçŸ¥è¯†ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­åšå‡ºæ›´åˆç†çš„æŠ€æœ¯é€‰å‹ï¼Œæ„å»ºæ›´å¥å£®çš„å‰ç«¯åº”ç”¨æ¶æ„ã€‚</p>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œå‰ç«¯å·¥ç¨‹åŒ–å°†ç»§ç»­å‘ç€æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆçš„æ–¹å‘æ¼”è¿›ï¼Œä½†æ‰å®çš„åŸºç¡€çŸ¥è¯†å’Œæ ¸å¿ƒåŸç†å°†å§‹ç»ˆæ˜¯æˆ‘ä»¬åº”å¯¹æŠ€æœ¯å˜åŒ–çš„åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[è¯‘]å‘å¸ƒ Angular v21]]></title>    <link>https://juejin.cn/post/7574327911659962368</link>    <guid>https://juejin.cn/post/7574327911659962368</guid>    <pubDate>2025-11-20T02:47:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574327911659962368" data-draft-id="7574327911659945984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[è¯‘]å‘å¸ƒ Angular v21"/> <meta itemprop="keywords" content="å‰ç«¯,Angular.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-20T02:47:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯è¶…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/360295546755678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [è¯‘]å‘å¸ƒ Angular v21
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295546755678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯è¶…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:47:49.000Z" title="Thu Nov 20 2025 02:47:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8085fdaf5f21460fbd2440448eecc1f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=9vAiENVNEN0FoRYpm2%2BVoMKqjT4%3D" alt="1_xcM4SYWsG_hMHnDJABz8dw.png" loading="lazy"/></p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šä¹ˆä»¤äººå…´å¥‹çš„æ—¶ä»£ï¼éšç€ Web å¼€å‘ä¸­ AI æ–¹é¢çš„æ‰€æœ‰æ¿€åŠ¨äººå¿ƒçš„å‘å±•ï¼Œæ„Ÿè§‰æˆ‘ä»¬æ¯å¤©éƒ½åœ¨å¼€å¯æ–°çš„å†’é™©ã€‚è¿™ä¸æˆ‘ä»¬ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgoo.gle%2Fangular-v21" target="_blank" title="https://goo.gle/angular-v21" ref="nofollow noopener noreferrer">v21 å‘å¸ƒæ´»åŠ¨çš„ä¸»é¢˜å®Œç¾å¥‘åˆï¼Œè¯¥æ´»åŠ¨æä¾›äº†å¯¹ Angular v21 æœ€ä½³åŠŸèƒ½çš„æ¦‚è¿°ã€‚</a></p>
<p>éšç€ v21 çš„å‘å¸ƒï¼ŒAngular æˆä¸ºäº†æ‚¨æ—¥å¸¸å†’é™©çš„æ›´å¼ºå¤§ä¼™ä¼´â€”â€”ä¸ºæ‚¨æä¾› Angular æ¡†æ¶çš„<strong>ç¨³å®šæ€§</strong>ï¼ŒåŒæ—¶ä½¿æ‚¨èƒ½å¤Ÿæ„å»ºå¯æ‰©å±•ä¸”é€‚åˆæ¯ä¸ªäººçš„å¼ºå¤§ AI é©±åŠ¨åº”ç”¨ç¨‹åºã€‚</p>
<p>Angular v21 ä¸ºæ‚¨æä¾›äº†è®¸å¤šæœŸå¾…å·²ä¹…çš„å·¥å…·ï¼Œä»¥ä¸°å¯Œæ‚¨çš„å·¥å…·ç®±ï¼Œå¹¶ç¡®ä¿æ‚¨æ‹¥æœ‰æœ€ä½³çš„å¼€å‘è€…ä½“éªŒï¼Œæ— è®ºæ˜¯ä½¿ç”¨ä»£ç†å’Œ AI è¾…åŠ©è¿›è¡Œç¼–ç ï¼Œè¿˜æ˜¯æ›´å–œæ¬¢ä»…ä¸æ‚¨çš„ IDE ä¸€èµ·ç¼–å†™ã€è°ƒè¯•å’Œæµ‹è¯•ä»£ç ã€‚</p>
<p>äº®ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>æˆ‘ä»¬æ­£åœ¨æ¨å‡º<strong>å®éªŒæ€§çš„ Signal Forms</strong>ï¼Œæä¾›ä¸€ç§åŸºäº Signals çš„æ–°å‹å¯æ‰©å±•ã€å¯ç»„åˆå’Œå“åº”å¼è¡¨å•ä½“éªŒã€‚</li>
<li><strong>Angular Aria</strong> æ­£å¼è¿›å…¥å¼€å‘è€…é¢„è§ˆç‰ˆï¼Œä¸ºæ‚¨æä¾›ä»¥<em>å¯è®¿é—®æ€§ä¸ºä¼˜å…ˆè€ƒè™‘çš„ headless ç»„ä»¶</em>ï¼Œæ‚¨å¯ä»¥è‡ªç”±è¿›è¡Œæ ·å¼å®šåˆ¶ã€‚</li>
<li>æ‚¨çš„ AI ä»£ç†å¯ä»¥ä½¿ç”¨ Angular çš„ <strong>MCP æœåŠ¡å™¨</strong>ï¼Œç°åœ¨åŒ…å«ä¸ƒä¸ªç¨³å®šå’Œå®éªŒæ€§å·¥å…·â€”â€”ä½¿ LLMs èƒ½å¤Ÿä»ç¬¬ä¸€å¤©èµ·å°±ä½¿ç”¨æ–°çš„ Angular åŠŸèƒ½ã€‚</li>
<li>Angular CLI å·²å°† <strong>Vitest</strong> é›†æˆä½œä¸ºæ–°çš„<strong>é»˜è®¤æµ‹è¯•è¿è¡Œå™¨</strong>ã€‚Vitest æ”¯æŒç°å·²ç¨³å®šå¹¶å¯ç”¨äºç”Ÿäº§ã€‚</li>
<li>æ–°çš„ Angular åº”ç”¨ç¨‹åº<strong>ä¸å†é»˜è®¤åŒ…å« zone.js</strong>ï¼</li>
</ul>
<p>è¿˜æœ‰æ›´å¤šç²¾å½©å†…å®¹â€”â€”è®©æˆ‘ä»¬æ·±å…¥æ¢ç´¢ï¼</p>
<h2 data-id="heading-0">å®éªŒæ€§ Signal Forms å·²ä¸Šçº¿</h2>
<p>æˆ‘ä»¬è‡ªè±ªåœ°å®£å¸ƒï¼Œç°åœ¨æ‚¨å¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fessentials%2Fsignal-forms" target="_blank" title="https://angular.dev/essentials/signal-forms" ref="nofollow noopener noreferrer">è¯•ç”¨ Signal Forms</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§åº“ï¼Œå®ƒåŸºäº Signals çš„å“åº”å¼åŸºç¡€ï¼Œè®©æ‚¨èƒ½å¤Ÿç®¡ç†è¡¨å•çŠ¶æ€ï¼</p>
<p>ä½¿ç”¨ Signal Formsï¼Œè¡¨å•æ¨¡å‹ç”±ä¸€ä¸ª Signal å®šä¹‰ï¼Œè¯¥ Signal ä¼šè‡ªåŠ¨ä¸ç»‘å®šåˆ°å®ƒçš„è¡¨å•å­—æ®µåŒæ­¥ï¼Œä»è€Œæä¾›ä¸€ç§ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„å¼€å‘è€…ä½“éªŒï¼Œå¹¶ç¡®ä¿è®¿é—®è¡¨å•å­—æ®µæ—¶çš„å®Œå…¨ç±»å‹å®‰å…¨ã€‚</p>
<p>å¼ºå¤§çš„ã€åŸºäºæ¨¡å¼çš„é›†ä¸­å¼éªŒè¯é€»è¾‘å·²å†…ç½® ğŸ‰</p>
<p>å¼€å§‹ä½¿ç”¨ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨å•æ¨¡å‹å¹¶å°†å…¶ä¼ é€’ç»™ <code>form()</code> :</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { form, <span class="hljs-title class_">Field</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms/signals'</span>;

<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">Field</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    Email: &lt;input [field]="loginForm.email"&gt;
    Password: &lt;input [field]="loginForm.password"&gt;
  `</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginForm</span> {
  login = <span class="hljs-title function_">signal</span>({
    <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">''</span>
  });
  
  loginForm = <span class="hljs-title function_">form</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">login</span>);
}
</code></pre>
<p>ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨ <code>[field]</code> æŒ‡ä»¤å°†å­—æ®µç»‘å®šåˆ°æ¨¡æ¿ã€‚ç”µå­é‚®ä»¶éªŒè¯æˆ–æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç­‰å…¸å‹éªŒè¯æ¨¡å¼å·²ç»å†…ç½®ï¼Œè‡ªå®šä¹‰éªŒè¯å™¨è®©æ‚¨èƒ½å¤Ÿåˆ›å»ºæ›´å¼ºå¤§çš„éªŒè¯æœºåˆ¶ã€‚</p>
<p>ç»‘å®šåˆ°è‡ªå®šä¹‰ç»„ä»¶æ˜¯åŸºäº Signals çš„ï¼Œæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´å®¹æ˜“ï¼Œä¸å†éœ€è¦ <code>ControlValueAccessor</code> ã€‚</p>
<p>å¼€å§‹ä½¿ç”¨ï¼Œè¯·æŸ¥çœ‹å¿…å¤‡çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fessentials%2Fsignal-forms" target="_blank" title="https://angular.dev/essentials/signal-forms" ref="nofollow noopener noreferrer">Signal Forms æŒ‡å—</a>æˆ–<a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fguide%2Fforms%2Fsignals%2Foverview" target="_blank" title="http://angular.dev/guide/forms/signals/overview" ref="nofollow noopener noreferrer">å®Œæ•´æ–‡æ¡£</a>ã€‚</p>
<p>æˆ‘ä»¬å¾ˆé«˜å…´æ‚¨èƒ½å¼€å§‹ä½¿ç”¨ Signal Forms è¿›è¡Œæ„å»ºã€‚Signal Forms API ç›®å‰ä»å¤„äºå®éªŒé˜¶æ®µï¼Œæˆ‘ä»¬å°†æ ¹æ®åé¦ˆè¿›è¡Œè¿­ä»£ã€‚è¯·å°è¯•ä½¿ç”¨å¹¶å‘Šè¯‰æˆ‘ä»¬æ‚¨çš„æƒ³æ³•ã€‚</p>
<h2 data-id="heading-1">å¯è®¿é—®ç»„ä»¶ â€” ä½¿ç”¨ Angular Aria æ‰“é€ æ‚¨çš„ä¸“å±é£æ ¼</h2>
<p>æˆ‘ä»¬æ¿€åŠ¨åœ°å®£å¸ƒï¼Œæˆ‘ä»¬æ­£åœ¨å‘å¸ƒæˆ‘ä»¬æ–°çš„ç°ä»£åº“çš„å¼€å‘è€…é¢„è§ˆç‰ˆï¼Œè¯¥åº“ç”¨äºå¸¸è§çš„ UI æ¨¡å¼ã€‚æˆ‘ä»¬ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Faria%2F" target="_blank" title="https://angular.dev/guide/aria/" ref="nofollow noopener noreferrer">Angular Aria</a> å°†å¯è®¿é—®æ€§ä½œä¸ºé¦–è¦ä»»åŠ¡ã€‚ä¸ºäº†å¼€å§‹ï¼Œæ‚¨å°†è·å¾—ä¸€å¥—åŒ…å« 8 ç§ UI æ¨¡å¼ã€æ¶µç›– 13 ä¸ªç»„ä»¶çš„é›†åˆï¼Œè¿™äº›ç»„ä»¶å®Œå…¨æœªè¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰æ‚¨çš„æ ·å¼ã€‚</p>
<p>Angular Aria ä½¿ç”¨ç°ä»£ Angular æŒ‡ä»¤ï¼ŒåŸºäº Signalsï¼Œå¹¶å»ºç«‹åœ¨æˆ‘ä»¬åœ¨æ„å»ºå“åº”å¼å¯è®¿é—®ç»„ä»¶æ–¹é¢çš„ä¸°å¯Œç»éªŒä¹‹ä¸Šã€‚</p>
<p>æˆ‘ä»¬æ¨å‡ºçš„ 8 ç§æ¨¡å¼æ˜¯ï¼š</p>
<ul>
<li>Accordion  æ‰‹é£ç´</li>
<li>Combobox  ç»„åˆæ¡†</li>
<li>Grid  ç½‘æ ¼</li>
<li>Listbox  åˆ—è¡¨æ¡†</li>
<li>Menu  èœå•</li>
<li>Tabs  é€‰é¡¹å¡</li>
<li>Toolbar  å·¥å…·æ </li>
<li>Tree  æ ‘</li>
</ul>
<p>Angular Aria åŒ…å«ä½ å¯ä»¥è‡ªè¡Œå®šåˆ¶çš„å¤æ‚ç»„ä»¶ï¼Œä¾‹å¦‚å¤šçº§ç‹¬ç«‹èœå•:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9e7f690a3cf4dc082b54ae70351afc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=e6k6shvYc%2F%2BcvcooxCY2PpZsIoU%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡è¿è¡Œ <code>npm i @angular/aria</code> å®‰è£…è¿™ä¸ªæ–°åº“ã€‚ç„¶åï¼Œè®¿é—®æˆ‘ä»¬çš„å®Œæ•´ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Faria%2F" target="_blank" title="https://angular.dev/guide/aria/" ref="nofollow noopener noreferrer">Angular Aria æŒ‡å—</a>ï¼Œè¯¥æŒ‡å—æä¾›æ‰€æœ‰ç»„ä»¶çš„ä½¿ç”¨ä¿¡æ¯å’Œä»£ç ç¤ºä¾‹ï¼Œå¹¶å±•ç¤ºä½ å¯ä»¥å¤åˆ¶ç²˜è´´ä»¥å°è¯•ä¸åŒå¤–è§‚çš„çš®è‚¤ã€‚</p>
<p>Angular å›¢é˜Ÿç°åœ¨æä¾›ä¸‰ç§ä¸åŒçš„æ–¹å¼æ¥å¸®åŠ©ä½ ä½¿ç”¨å’Œå¼€å‘ç»„ä»¶ï¼š</p>
<ul>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Faria%2F" target="_blank" title="https://angular.dev/guide/aria/" ref="nofollow noopener noreferrer">Angular Aria</a> åˆ›å»ºå¯è®¿é—®çš„ã€headless ç»„ä»¶ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è‡ªç”±è¿›è¡Œæ ·å¼è®¾è®¡</li>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmaterial.angular.dev%2Fcdk%2Fcategories" target="_blank" title="https://material.angular.dev/cdk/categories" ref="nofollow noopener noreferrer">CDK</a> æ¥åŒ…å«ä½ å¯ä»¥åœ¨è‡ªå·±æ„å»ºçš„ç»„ä»¶ä¸­ä½¿ç”¨çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Fdrag-drop" target="_blank" title="https://angular.dev/guide/drag-drop" ref="nofollow noopener noreferrer">æ‹–æ”¾</a>ç­‰è¡Œä¸ºåŸè¯­ã€‚</li>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmaterial.angular.dev%2F" target="_blank" title="https://material.angular.dev/" ref="nofollow noopener noreferrer">Angular Material</a> æ¥è·å–ä¸€å¥—éµå¾ª Material Design åŸåˆ™çš„ã€é¢„å…ˆæ ·å¼åŒ–çš„ç»„ä»¶åº“ã€‚ä½ å¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaterial.angular.dev%2Fguide%2Ftheming" target="_blank" title="https://material.angular.dev/guide/theming" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ä¸»é¢˜</a>æ¥è°ƒæ•´è¿™äº›ç»„ä»¶ã€‚</li>
</ul>
<p>æˆ‘ä»¬æœŸå¾…ä½ ä½¿ç”¨ Angular Aria åçš„åé¦ˆï¼Œä»¥åŠä½ ç”¨å®ƒå°†æ„å»ºå‡ºä»€ä¹ˆã€‚</p>
<h2 data-id="heading-2">ä¸ºæ‚¨çš„ AI ä»£ç†æä¾›æ›´å¤šå·¥å…·â€”â€”å€ŸåŠ© Angular çš„ MCP æœåŠ¡å™¨</h2>
<p>ä¸ºäº†ç¡®ä¿æ‚¨å‡†å¤‡å¥½è¿æ¥ AI æ—¶ä»£ï¼Œæˆ‘ä»¬å¸Œæœ›ç¡®ä¿å¼€å‘è€…æ‹¥æœ‰åˆé€‚çš„å·¥å…·ã€‚æˆ‘ä»¬å¸Œæœ›æä¾›é€‚åˆå¼€å‘è€…å½“å‰å·¥ä½œæ–¹å¼çš„å·¥å…·ï¼Œå¹¶åŠ©åŠ›å·¥ä½œæ–¹å¼çš„æ¼”å˜ã€‚</p>
<p>åœ¨ v20.2 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ¨å‡ºäº† Angular CLI å†…ç½®çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fai%2Fmcp" target="_blank" title="http://angular.dev/ai/mcp" ref="nofollow noopener noreferrer">MCP æœåŠ¡å™¨</a>ï¼Œä»¥ç¡®ä¿ AI ä»£ç†æ‹¥æœ‰ Angular å¼€å‘æ‰€éœ€çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬è‡ªè±ªåœ°å®£å¸ƒï¼ŒMCP æœåŠ¡å™¨ç°å·²ç¨³å®šï¼</p>
<p>Angular MCP æœåŠ¡å™¨ä¸ºæ‚¨æä¾›ä¸€å¥—å·¥å…·ï¼Œä¸º AI ä»£ç†æä¾›å…³äºç°ä»£ Angular å’Œæ‚¨åº”ç”¨çš„æ­£ç¡®ä¸Šä¸‹æ–‡ï¼Œç”šè‡³å¸®åŠ©æ‚¨æˆä¸ºæ›´å¥½çš„å¼€å‘è€…ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ MCP æœåŠ¡å™¨ï¼š</p>
<ul>
<li><strong>è·å–åŸºæœ¬èƒŒæ™¯</strong>ï¼š<code>get_best_practices</code> å·¥å…·æä¾› Angular æœ€ä½³å®è·µæŒ‡å—ï¼Œè€Œ <code>list_projects</code> å·¥å…·ä¼šæŸ¥æ‰¾å·¥ä½œåŒºä¸­çš„æ‰€æœ‰ Angular é¡¹ç›®ã€‚</li>
<li><strong>è·å–æœ€æ–°ä¿¡æ¯</strong>ï¼š<code>search_documentation</code> å·¥å…·èƒ½å¤Ÿé€šè¿‡æŸ¥è¯¢<a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2F" target="_blank" title="http://angular.dev/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>æ¥å›ç­” Angular ç›¸å…³é—®é¢˜ï¼Œ<code>find_examples</code> å·¥å…·åˆ™æä¾›ç°ä»£ Angular æ¨¡å¼çš„æœ€æ–°ç¤ºä¾‹â€”â€”æˆ‘ä»¬å¾ˆå¿«å°†æ·»åŠ æ›´å¤šç¤ºä¾‹ï¼Œå¦‚åŸºäº Signal çš„è¡¨å•å’Œ Angular Ariaï¼Œä»¥ä¾¿æ‚¨çš„ AI ä»£ç†å¯ä»¥ä½¿ç”¨æ–°çš„ç¼–ç æ¨¡å¼ã€‚</li>
<li><strong>æ›´æ–°æ‚¨çš„åº”ç”¨ç¨‹åº</strong>ï¼š <code>onpush_zoneless_migration</code> å·¥å…·èƒ½å¤Ÿåˆ†ææ‚¨çš„ä»£ç ï¼Œå¹¶æä¾›è¿ç§»åº”ç”¨ç¨‹åºåˆ° OnPush å’Œ zoneless å˜æ›´æ£€æµ‹çš„è®¡åˆ’ã€‚è¿˜æœ‰ä¸€ä¸ªåä¸º <code>modernize</code> çš„å®éªŒæ€§å·¥å…·ï¼Œç”¨äºä½¿ç”¨ç°æœ‰ <code>schematic</code> è¿›è¡Œä»£ç è¿ç§»ã€‚</li>
<li><strong>å­¦ä¹  Angular</strong>ï¼š<code>ai_tutor</code> å·¥å…·å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼ AI é©±åŠ¨çš„ Angular å¯¼å¸ˆï¼Œå¯ä»¥å¸®åŠ©æ‚¨å­¦ä¹ æ¦‚å¿µå¹¶è·å¾—åé¦ˆï¼Œå»ºè®®åœ¨æ–°çš„ Angular åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</li>
</ul>
<p>ä½¿ç”¨ MCP æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è§£å†³çŸ¥è¯†æˆªæ­¢é—®é¢˜â€”â€”æ‚¨çš„ LLM æ˜¯åœ¨æŸä¸ªç‰¹å®šæ—¥æœŸä¹‹å‰è®­ç»ƒçš„ï¼Œä½†é€šè¿‡ä½¿ç”¨ MCP æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¤Ÿå­¦ä¹ ä½¿ç”¨å…¨æ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ Signal Forms å’Œ Angular Ariaâ€”â€”æ‚¨åªéœ€è¦è®©æ‚¨çš„ä»£ç†å»å¯»æ‰¾ç¤ºä¾‹å¹¶ä½¿ç”¨å®ƒä»¬ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae30252f5a0f4ca3bbfb4ea1a4746841~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=ILnU8ESSOq8dXfIUWjxq9Fva1dU%3D" alt="AI å¯¼å¸ˆå·¥å…·æ­£åœ¨ä½¿ç”¨ä¸­" loading="lazy"/></p>
<h2 data-id="heading-3">Vitest ä½œä¸ºæ–°çš„é»˜è®¤ç¨³å®šæµ‹è¯•è¿è¡Œå™¨</h2>
<p>ç”±äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkarma-runner%2Fkarma%3Ftab%3Dreadme-ov-file%23karma-is-deprecated-and-is-not-accepting-new-features-or-general-bug-fixes" target="_blank" title="https://github.com/karma-runner/karma?tab=readme-ov-file#karma-is-deprecated-and-is-not-accepting-new-features-or-general-bug-fixes" ref="nofollow noopener noreferrer">Karma åœ¨ 2023 å¹´è¢«å¼ƒç”¨</a>ï¼ŒAngular å›¢é˜Ÿå·²ç»æ¢ç´¢äº† Jestã€Web Test Runner å’Œ Vitest ä½œä¸ºæ–°çš„æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åœ¨æ”¶åˆ°ç¤¾åŒºçš„ç§¯æåé¦ˆåï¼Œæˆ‘ä»¬å†³å®šå°† Vitest ä½œä¸ºæ–°çš„é»˜è®¤æµ‹è¯•è¿è¡Œå™¨ï¼Œå¹¶åœ¨ Angular v21 ä¸­å°†å…¶æå‡è‡³ç¨³å®šç‰ˆ ğŸ‰</p>
<p>è¦åœ¨æ–°çš„ Angular åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ <a href="https://link.juejin.cn?target=http%3A%2F%2Fvitest.dev%2F" target="_blank" title="http://vitest.dev/" ref="nofollow noopener noreferrer">Vitest</a>ï¼Œåªéœ€è¿è¡Œ <code>ng test</code> å‘½ä»¤ã€‚æ§åˆ¶å°è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e302b9d5a38b48dc869ca784eb90391a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=b4y9oGw38FyoQHoqGRnx0BvA3wU%3D" alt="Vitest åœ¨ Angular ä¸­çš„ç¤ºä¾‹ç»ˆç«¯è¾“å‡º" loading="lazy"/></p>
<p>è¦äº†è§£æ›´å¤šå…³äºä½¿ç”¨ Vitest è¿›è¡Œæµ‹è¯•çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fguide%2Ftesting" target="_blank" title="http://angular.dev/guide/testing" ref="nofollow noopener noreferrer">angular.dev ä¸Šçš„æ–‡æ¡£</a>ã€‚</p>
<p>è™½ç„¶ Vitest å·²æˆä¸ºæ–°é¡¹ç›®çš„é»˜è®¤æµ‹è¯•è¿è¡Œå™¨ï¼Œä½† Angular å›¢é˜Ÿä»ç„¶<a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fguide%2Ftesting%2Fkarma" target="_blank" title="http://angular.dev/guide/testing/karma" ref="nofollow noopener noreferrer">å…¨é¢æ”¯æŒ Karma å’Œ Jasmine</a>ï¼Œå› æ­¤æ‚¨æ— éœ€ç«‹å³è¿ç§»ã€‚</p>
<p>å¦‚æœæ‚¨å·²å‡†å¤‡å¥½å°†ç°æœ‰åº”ç”¨ç¨‹åºè¿ç§»åˆ°ä½¿ç”¨ Vitestï¼Œå¯ä»¥è¿è¡Œä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Ftesting%2Fmigrating-to-vitest" target="_blank" title="https://angular.dev/guide/testing/migrating-to-vitest" ref="nofollow noopener noreferrer">å®éªŒæ€§è¿ç§»</a>ã€‚åœ¨æ‰§è¡Œé“¾æ¥æŒ‡å—ä¸­æè¿°çš„æŸäº›å‡†å¤‡å·¥ä½œåï¼Œè¿è¡Œ:</p>
<pre><code class="hljs language-bash" lang="bash">ng g @schematics/angular:refactor-jasmine-vitest
</code></pre>
<p>æ‚¨çš„æµ‹è¯•å°†è‡ªåŠ¨é‡æ„ä»¥ä½¿ç”¨ Vitestã€‚</p>
<p>ç”±äº Vitest æ”¯æŒå·²ç¨³å®šï¼Œæˆ‘ä»¬å†³å®šå¼ƒç”¨ Web Test Runner å’Œ Jest çš„å®éªŒæ€§æ”¯æŒï¼Œå¹¶è®¡åˆ’åœ¨ v22 ç‰ˆæœ¬ä¸­ç§»é™¤å®ƒä»¬ã€‚å¯¹äºå¸Œæœ›ç»§ç»­ä½¿ç”¨ Jest çš„å›¢é˜Ÿï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç°æœ‰çš„ç¤¾åŒºæ›¿ä»£æ–¹æ¡ˆï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthymikee%2Fjest-preset-angular" target="_blank" title="https://github.com/thymikee/jest-preset-angular" ref="nofollow noopener noreferrer">jest-preset-angular</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnx.dev%2Fdocs%2Ftechnologies%2Ftest-tools%2Fjest%2Fintroduction" target="_blank" title="https://nx.dev/docs/technologies/test-tools/jest/introduction" ref="nofollow noopener noreferrer">Nx Jest æ’ä»¶</a>ã€‚</p>
<h2 data-id="heading-4">Zoneless å·²å‡†å¤‡å¥½æ­£å¼ä¸Šçº¿</h2>
<p>Angular ä¼ ç»Ÿä¸Šä½¿ç”¨ zone.jsï¼Œè¿™æ˜¯ä¸€ä¸ªä¿®è¡¥æµè§ˆå™¨ API çš„åº“ï¼Œç”¨äºè·Ÿè¸ªåº”ç”¨ç¨‹åºä¸­çš„å˜åŒ–ã€‚è¿™å®ç°äº†â€œç¥å¥‡â€çš„ä½“éªŒï¼Œå³æ¨¡æ¿åœ¨ç”¨æˆ·æ‰§è¡Œåº”ç”¨ç¨‹åºæ“ä½œæ—¶è‡ªåŠ¨æ›´æ”¹ï¼Œç„¶è€Œ zone.js å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¤æ‚åº¦åº”ç”¨ç¨‹åºä¸­</p>
<p>éšç€ Signals é©±åŠ¨ç°ä»£ Angular çŠ¶æ€ç®¡ç†ï¼Œzone.js ä¸å†éœ€è¦ç”¨äºå˜æ›´æ£€æµ‹ã€‚Zoneless å˜æ›´æ£€æµ‹åœ¨ v18 ä¸­å®éªŒæ€§å¼•å…¥ï¼Œåœ¨ v20 ä¸­é€šè¿‡å¼€å‘è€…é¢„è§ˆï¼Œå¹¶åœ¨ v20.2 ä¸­è¾¾åˆ°ç¨³å®šã€‚</p>
<p>é€šè¿‡æˆ‘ä»¬åœ¨ Google çš„åº”ç”¨ç»éªŒï¼Œæˆ‘ä»¬è¶Šæ¥è¶Šç¡®ä¿¡æ–°çš„ Angular åº”ç”¨ç¨‹åºåœ¨æ²¡æœ‰ zone.js çš„æƒ…å†µä¸‹å·¥ä½œæœ€ä½³ã€‚</p>
<ul>
<li>2024 å¹´ï¼Œè°·æ­Œå†…éƒ¨è¶…è¿‡ä¸€åŠçš„æ–° Angular åº”ç”¨ç¨‹åºéƒ½æ˜¯ä½¿ç”¨ Zoneless å˜æ›´æ£€æµ‹ç­–ç•¥æ„å»ºçš„ï¼Œæˆ‘ä»¬åœ¨ 2024 å¹´ä¸­å°†å…¶è®¾ä¸ºé»˜è®¤é…ç½®ã€‚</li>
<li>ç›®å‰è°·æ­Œå†…éƒ¨å·²æœ‰æ•°ç™¾ä¸ª Zoneless åº”ç”¨ç¨‹åºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œã€‚</li>
<li>ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fhttparchive.org%2F" target="_blank" title="https://httparchive.org/" ref="nofollow noopener noreferrer">The HTTP Archive</a> å¤–éƒ¨è§‚å¯Ÿï¼Œæˆ‘ä»¬çœ‹åˆ°è¶…è¿‡ 1400 ä¸ª Angular åº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨ Zoneless å˜æ›´æ£€æµ‹ï¼Œè¿™åªæ˜¯é‚£äº›æ— éœ€ç™»å½•å³å¯å…¬å¼€è®¿é—®çš„åº”ç”¨ç¨‹åºæ•°é‡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f2cb697a3d34b74a5f52345db7d4dc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=zqz6bnX8vK5H6gREmDBmYXh77oE%3D" alt="" loading="lazy"/></p>
<p>é‰´äºè¿™äº›å¼ºçƒˆçš„ä¿¡å·ï¼Œ<strong>zone.js åŠå…¶åŠŸèƒ½å°†ä¸å†é»˜è®¤åŒ…å«åœ¨ v21 ç‰ˆæœ¬çš„ Angular åº”ç”¨ç¨‹åºä¸­</strong>ã€‚</p>
<p>å¯ç”¨æ— åŒºåŸŸå˜æ›´æ£€æµ‹å¯å¸¦æ¥è¯¸å¤šå¥½å¤„ï¼Œå¦‚æ”¹å–„æ ¸å¿ƒç½‘ç»œæŒ‡æ ‡ã€åŸç”Ÿå¼‚æ­¥ç­‰å¾…ã€ç”Ÿæ€å…¼å®¹æ€§ã€å‡å°‘åŒ…ä½“ç§¯ã€ç®€åŒ–è°ƒè¯•å’Œæ›´å¥½çš„æ§åˆ¶ã€‚</p>
<p>æ–°åº”ç”¨å°†è‡ªåŠ¨ä½¿ç”¨æ— åŒºåŸŸå˜æ›´æ£€æµ‹ï¼Œç°æœ‰åº”ç”¨è¯·éµå¾ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Fzoneless%23removing-zonejs" target="_blank" title="https://angular.dev/guide/zoneless#removing-zonejs" ref="nofollow noopener noreferrer">angular.dev ä¸Šçš„è¿ç§»è¯´æ˜</a>ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ Angular MCP æœåŠ¡å™¨ä¸­å°è¯•æ–°çš„ <code>onpush_zoneless_migration</code> å·¥å…·ï¼Œè¯¥å·¥å…·ä¼šåˆ›å»ºä¸€ä¸ªé€æ­¥è®¡åˆ’ï¼ŒæŒ‡å¯¼æ‚¨å°†åº”ç”¨è¿ç§»åˆ° OnPush å˜æ›´æ£€æµ‹ç­–ç•¥ã€‚</p>
<p>è™½ç„¶æ— åŒºåŸŸæ˜¯æ–°çš„é»˜è®¤ä½“éªŒï¼Œä½†æˆ‘ä»¬æƒ³æ‰¿è®¤ zone.js åœ¨å¡‘é€  Angular æ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œå¹¶è®©å¼€å‘è€…å¤šå¹´æ¥èƒ½å¤Ÿåˆ›é€ ç¥å¥‡ä½“éªŒã€‚æˆ‘ä»¬å‘ zone.js å›¢é˜Ÿè‡´ä»¥è¯šæŒšçš„<strong>æ„Ÿè°¢</strong>ï¼Œç‰¹åˆ«æ˜¯æ„Ÿè°¢ Jia Li å¯¹ zone.js çš„è´¡çŒ®ã€‚</p>
<h2 data-id="heading-5">å…¨æ–°çš„æ–‡æ¡£ä½“éªŒ</h2>
<p>å¦‚æœä½ æœ€è¿‘å‡ å‘¨è®¿é—®è¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev" target="_blank" title="https://angular.dev" ref="nofollow noopener noreferrer">angular.dev</a>ï¼Œå¯èƒ½ä¼šæ³¨æ„åˆ°æœ‰ä¸€ä¸ªæ–°çš„é¦–é¡µã€‚ä½†è¿™è¿˜ä¸æ˜¯ angular å‘ç”Ÿçš„æ‰€æœ‰å˜åŒ–ã€‚</p>
<p>dev â€” æˆ‘ä»¬è¿›è¡Œäº†é‡å¤§è°ƒæ•´ï¼Œä»¥ç¡®ä¿æ–‡æ¡£ä½“éªŒç°ä»£åŒ–ï¼Œå¹¶æ•™æˆæœ€æ–°æ¦‚å¿µï¼Œè®©ä½ å§‹ç»ˆèƒ½è·å–æœ€æ–°ä¿¡æ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DeIeJmYdYMQo" target="_blank" title="https://www.youtube.com/watch?v=eIeJmYdYMQo" ref="nofollow noopener noreferrer">åœ¨ Google I/O 2025</a> ä¸Šï¼Œæˆ‘ä»¬æ¨å‡ºäº† <a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fai" target="_blank" title="http://angular.dev/ai" ref="nofollow noopener noreferrer">angular.dev/ai</a> â€” ä½ æ„å»ºåŸºäº Angular çš„ AI åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰èµ„æºã€‚æˆ‘ä»¬åŒ…å«äº†æœ€ä½³å®è·µã€ä»£ç ç¤ºä¾‹ã€è®¾è®¡æ¨¡å¼ç­‰ã€‚æˆ‘ä»¬è¿˜åŒ…å«äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fai%2Fdevelop-with-ai" target="_blank" title="https://angular.dev/ai/develop-with-ai" ref="nofollow noopener noreferrer">æœ€ä½³å®è·µæç¤ºå’Œè‡ªå®šä¹‰è§„åˆ™æ–‡ä»¶</a>ï¼Œä»¥å¸®åŠ©ç¡®ä¿ä½ çš„ä»£ç ç”Ÿæˆä½“éªŒç»“æœä¸ºç°ä»£åŒ–çš„ Angular ä»£ç ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨å‘å¸ƒå¤§é‡æ›´æ–°ï¼Œè¯·ç»§ç»­å…³æ³¨ï¼Œè·å–æ„å»º AI åº”ç”¨çš„æœ€æ–°æŠ€å·§å’Œç­–ç•¥ï¼Œä»¥åŠåˆ©ç”¨æœ€ä½³ AI è¾…åŠ©ç¼–ç æ–¹æ³•ã€‚</p>
<p>å¦‚æœä½ åˆšå¼€å§‹æ„å»ºå“åº”å¼åº”ç”¨çš„æ—…ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Ftutorials%2Fsignals" target="_blank" title="https://angular.dev/tutorials/signals" ref="nofollow noopener noreferrer">æ–°çš„ Signals æ•™ç¨‹</a>ï¼Œå®ƒæä¾›äº†æ‰€æœ‰ç¨³å®š Signal API çš„å®Œæ•´æ¦‚è¿°ï¼ŒåŒ…æ‹¬ <code>model()</code>ã€<code>linkedSignal()</code> ç­‰ã€‚</p>
<p>æˆ‘ä»¬åœ¨ angular.dev ä¸ŠæŠ•å…¥äº†å¤§é‡ç²¾åŠ›æ›´æ–°å¼€å‘è€…æŒ‡å—ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Frouting" target="_blank" title="https://angular.dev/guide/routing" ref="nofollow noopener noreferrer">è·¯ç”±æ–‡æ¡£</a>å·²å®Œå…¨æ”¹ç‰ˆï¼Œæä¾›äº†å…³äºè·¯ç”±æ‰€æœ‰æ–¹é¢çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Fdi" target="_blank" title="https://angular.dev/guide/di" ref="nofollow noopener noreferrer">ä¾èµ–æ³¨å…¥æŒ‡å—</a>å·²å¤§å¹…æ”¹è¿›ï¼Œå¹¶ä½¿å¸Œæœ›æŒæ¡è¿™ä¸€å¼ºå¤§åŠŸèƒ½æ ¸å¿ƒæ¦‚å¿µçš„å¼€å‘è€…æ›´å®¹æ˜“ç†è§£ã€‚</li>
<li>æˆ‘ä»¬æ–°å¢äº†ä¸€ä»½å…³äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fmaterial.angular.dev%2Fguide%2Ftheming-your-components" target="_blank" title="https://material.angular.dev/guide/theming-your-components" ref="nofollow noopener noreferrer">Material ç»„ä»¶ä¸»é¢˜åŒ–</a>æ–¹æ³•çš„å…¨é¢æŒ‡å—</li>
<li>æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä»½å®Œæ•´æŒ‡å—ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨ Angular ä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Ftailwind" target="_blank" title="https://angular.dev/guide/tailwind" ref="nofollow noopener noreferrer">Tailwind CSS</a>ï¼</li>
</ul>
<p>æˆ‘ä»¬è‡´åŠ›äºæå‡æ–‡æ¡£ä½¿ç”¨ä½“éªŒã€‚å¯¹äºä½¿ç”¨ Angular MCP æœåŠ¡å™¨çš„å¼€å‘è€…ï¼Œæ–°çš„ <code>search_documentation</code> å·¥å…·å°†ä½¿æ‚¨çš„ AI ä»£ç†èƒ½å¤Ÿè·å– angular.dev ä¸Šæœ€æ–°ã€æœ€å…¨é¢çš„ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-6">è¿˜æœ‰æ›´å¤šâ€¦â€¦</h2>
<p>æˆ‘ä»¬ä¸€ç›´å¾ˆå¿™ç¢Œï¼é™¤äº†æˆ‘ä»¬ä¹‹å‰é‡ç‚¹ä»‹ç»çš„ä¼˜ç§€åŠŸèƒ½å¤–ï¼Œæˆ‘ä»¬å›¢é˜Ÿè¿˜äº¤ä»˜äº†è®¸å¤šå€¼å¾—ç‰¹åˆ«æåŠçš„å…¶ä»–æˆæœï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F64032" target="_blank" title="https://github.com/angular/angular/pull/64032" ref="nofollow noopener noreferrer">CLDR åº“æ”¯æŒå·²ä» v41 æ›´æ–°è‡³ v47</a>ï¼Œæ”¹è¿›äº†è´§å¸æ ¼å¼ã€æ—¥æœŸæ ¼å¼ç­‰ã€‚</li>
<li>æˆ‘ä»¬ç°åœ¨æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F63857" target="_blank" title="https://github.com/angular/angular/pull/63857" ref="nofollow noopener noreferrer">åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</a>ï¼š</li>
</ul>
<pre><code class="hljs language-html" lang="html">@let isValidNumber = /\d+/.test(someValue);

@if (!isValidNumber) {
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{someValue}} is not a valid number!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
}
</code></pre>
<ul>
<li>Angular ç°åœ¨å†…ç½®äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F64000" target="_blank" title="https://github.com/angular/angular/pull/64000" ref="nofollow noopener noreferrer">Signals æ ¼å¼åŒ–å™¨</a>ã€‚å¯ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å™¨ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2F%40tomsu%2Fdevtools-tips-day-10-custom-formatters-58ee46e640f9" target="_blank" title="https://medium.com/@tomsu/devtools-tips-day-10-custom-formatters-58ee46e640f9" ref="nofollow noopener noreferrer">Chrome</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Ffirefox-source-docs.mozilla.org%2Fdevtools-user%2Fcustom_formatters%2Findex.html%23enabling-custom-formatting" target="_blank" title="https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html#enabling-custom-formatting" ref="nofollow noopener noreferrer">Firefox</a>ï¼‰ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afd72448f8de4e3d94748352d905442b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=hEo8%2FLaL4M5MPhNM%2FRD0Ih%2BBANk%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ‚¨ç°åœ¨å¯ä»¥è‡ªå®šä¹‰ä¸è§†å£ç›¸å…³çš„ <code>@defer</code> è§¦å‘å™¨çš„ <code>IntersectionObserver</code> é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hljs language-html" lang="html">@defer (on viewport({trigger, rootMargin: '100px'}) {
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>Content<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
}
</code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F64535" target="_blank" title="https://github.com/angular/angular/pull/64535" ref="nofollow noopener noreferrer">SimpleChanges</a> ç°åœ¨æ˜¯æ³›å‹çš„ï¼Œå…è®¸å¯¹ <code>SimpleChanges</code> ä¸­çš„å€¼è¿›è¡Œæ›´å¥½çš„ç±»å‹æ£€æŸ¥ï¼Œè§£å†³äº†é«˜åº¦ç‚¹èµçš„é—®é¢˜ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F48814" target="_blank" title="https://github.com/angular/angular/pull/48814" ref="nofollow noopener noreferrer">KeyValue ç®¡é“ç°åœ¨æ”¯æŒå…·æœ‰å¯é€‰é”®çš„å¯¹è±¡</a></li>
<li>ä½œä¸º CSS å˜é‡çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸€å¥—æ–°çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fcomponents%2Fpull%2F31702" target="_blank" title="https://github.com/angular/components/pull/31702" ref="nofollow noopener noreferrer">å®ç”¨ç±»</a>ç›´æ¥åœ¨æ¨¡æ¿ä¸­åº”ç”¨ Material Design çš„ç³»ç»Ÿæ ‡è®°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=http%3A%2F%2Fmaterial.angular.dev%2Fguide%2Ftheming-your-components" target="_blank" title="http://material.angular.dev/guide/theming-your-components" ref="nofollow noopener noreferrer">ä¸»é¢˜æŒ‡å—</a>ï¼</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fcomponents%2Fpull%2F32155" target="_blank" title="https://github.com/angular/components/pull/32155" ref="nofollow noopener noreferrer">CDK æ‚¬æµ®å±‚ç°åœ¨ä½¿ç”¨æµè§ˆå™¨å†…ç½®çš„å¼¹å‡ºæ¡†</a>ï¼Œæœ‰åŠ©äºè§£å†³ä¸€äº›å¯è®¿é—®æ€§é—®é¢˜ã€‚</li>
</ul>
<p>å¦‚æœä½ é”™è¿‡äº†â€”â€”è¿™äº›åªæ˜¯è‡ª Angular v20.2 ä»¥æ¥çš„æ›´æ–°ã€‚å¦‚æœä½ åªå…³æ³¨æ¯ä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œä½ å¯èƒ½é”™è¿‡äº†ï¼š</p>
<ul>
<li>ç”¨äºåœ¨å…ƒç´ <a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Fanimations" target="_blank" title="https://angular.dev/guide/animations" ref="nofollow noopener noreferrer">è¿›å…¥å’Œç¦»å¼€ DOM</a> æ—¶è¿›è¡ŒåŠ¨ç”»çš„æ–° API</li>
<li>CDK æ‹–æ”¾æ”¹è¿›ï¼Œå…è®¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Fguide%2Fdrag-drop%23copying-items-between-lists" target="_blank" title="https://angular.dev/guide/drag-drop#copying-items-between-lists" ref="nofollow noopener noreferrer">åœ¨åˆ—è¡¨ä¹‹é—´å¤åˆ¶é¡¹ç›®</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Ftools%2Fdevtools" target="_blank" title="https://angular.dev/tools/devtools" ref="nofollow noopener noreferrer">Angular DevTools</a> ä¸­çš„è·¯ç”±å¯è§†åŒ–å’Œ Signals å›¾</li>
<li>è€Œä¸”è¿˜æœ‰æ›´å¤šâ€”â€”è¯¦æƒ…è¯·æŸ¥çœ‹æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.angular.dev%2Fangular-summer-update-2025-1987592a0b42" target="_blank" title="https://blog.angular.dev/angular-summer-update-2025-1987592a0b42" ref="nofollow noopener noreferrer">å¤å­£æ›´æ–°åšå®¢æ–‡ç« </a></li>
</ul>
<p>ä¸€å¦‚æ—¢å¾€ï¼Œå®Œæ•´çš„å˜åŒ–åˆ—è¡¨åœ¨æˆ‘ä»¬çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fblob%2Fmain%2FCHANGELOG.md" target="_blank" title="https://github.com/angular/angular/blob/main/CHANGELOG.md" ref="nofollow noopener noreferrer">Changelog</a> ä¸­ã€‚</p>
<h2 data-id="heading-7">Angular â¤ï¸ æˆ‘ä»¬å“è¶Šçš„ç¤¾åŒº</h2>
<p>æ²¡æœ‰æˆ‘ä»¬å¼€æºç¤¾åŒºï¼Œè¿™ä¸ªå“è¶Šçš„å‘å¸ƒå°†ä¸å¯èƒ½å®ç°ã€‚</p>
<p>æˆ‘ä»¬ç¤¾åŒºä¸­æœ‰è®¸å¤šäººé€šè¿‡å¤§å°ä¸ä¸€çš„è´¡çŒ®æ¨åŠ¨ç€ Angular çš„å‘å±•ï¼Œæ— è®ºæ˜¯ä¸ºå…¶ä»–å¼€å‘è€…è§£ç­”é—®é¢˜ï¼Œç»„ç»‡èšä¼šå’Œä¼šè®®ï¼Œæ”¹è¿›æ–‡æ¡£ï¼Œè¿˜æ˜¯é€šè¿‡æäº¤ pull-requestã€‚</p>
<p>å¦‚æœä½ æ˜¯æˆ‘ä»¬çš„è´¡çŒ®è€…â€”â€”éå¸¸æ„Ÿè°¢ï¼å¦‚æœä½ è¿˜ä¸æ˜¯ï¼Œæˆ‘å¸Œæœ›è¿™èƒ½æ¿€åŠ±ä½ ï¼å³ä½¿åªæ˜¯å›ç­”ä¸€ä¸ªé—®é¢˜æˆ–å¸®åŠ©ä½ çš„åŒäº‹ä¹Ÿæ˜¯éå¸¸æœ‰å¸®åŠ©çš„!!</p>
<p>è‡ª v20 ä»¥æ¥ï¼Œå·²æœ‰ 215 äººè´¡çŒ®äº† Angular ä»£ç åº“ï¼Œæˆ‘ä»¬æƒ³è¦çªå‡ºä¸€äº›å…·ä½“çš„è´¡çŒ®ï¼š</p>
<ul>
<li>Jaime Burgos æ”¹è¿›äº†å¤šä¸ªè¿ç§»å’Œè¯Šæ–­ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Freference%2Fmigrations%2Fstandalone" target="_blank" title="https://angular.dev/reference/migrations/standalone" ref="nofollow noopener noreferrer">standalone</a> è¿ç§»ç°åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F64138" target="_blank" title="https://github.com/angular/angular/pull/64138" ref="nofollow noopener noreferrer">æ”¯æŒ CommonModule</a></li>
<li>æ–°å¢å¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Freference%2Fmigrations%2Frouter-testing-module-migration" target="_blank" title="https://angular.dev/reference/migrations/router-testing-module-migration" ref="nofollow noopener noreferrer">å·²å¼ƒç”¨çš„ RouterTestingModule çš„è¿ç§»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F64069" target="_blank" title="https://github.com/angular/angular/pull/64069" ref="nofollow noopener noreferrer">å¯¹æ— æ³•è®¿é—®æˆ–å†—ä½™çš„@defer è§¦å‘å™¨çš„è¯Šæ–­</a></li>
</ul>
</li>
<li>Angelo Parziale åˆ›å»ºäº†ä¸¤ä¸ªè¿ç§»ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Freference%2Fmigrations%2Fngclass-to-class" target="_blank" title="https://angular.dev/reference/migrations/ngclass-to-class" ref="nofollow noopener noreferrer">å°† NgClass æŒ‡ä»¤è½¬æ¢ä¸ºç±»ç»‘å®š</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fangular.dev%2Freference%2Fmigrations%2Fngstyle-to-style" target="_blank" title="https://angular.dev/reference/migrations/ngstyle-to-style" ref="nofollow noopener noreferrer">å°† NgStyle æŒ‡ä»¤è½¬æ¢ä¸ºæ ·å¼ç»‘å®š</a></li>
</ul>
</li>
<li>Hyrhoori Avcharov ä¸º DevTools æ·»åŠ äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F62465" target="_blank" title="https://github.com/angular/angular/pull/62465" ref="nofollow noopener noreferrer">Transfer State æ ‡ç­¾</a>ï¼Œå…è®¸æ£€æŸ¥æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¹‹é—´çš„ TransferStateã€‚</li>
<li>Luke Beach åˆ›å»ºäº† CDK overlay åŠŸèƒ½ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fcomponents%2Fpull%2F29563" target="_blank" title="https://github.com/angular/components/pull/29563" ref="nofollow noopener noreferrer">å…è®¸æ¯ä¾§è®¾ç½®ç‹¬ç«‹çš„è§†å£è¾¹è·</a></li>
<li>Ruslan Lekhman åˆ›å»ºäº†ä¸€ä¸ª pull è¯·æ±‚ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fcomponents%2Fpull%2F31965" target="_blank" title="https://github.com/angular/components/pull/31965" ref="nofollow noopener noreferrer">å…è®¸å°†æ³¨å…¥å™¨ä¼ é€’ç»™ <code>MatBottomSheetConfig</code></a></li>
<li>CÃ©dric Exbrayat <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular-cli%2Fpull%2F30682" target="_blank" title="https://github.com/angular/angular-cli/pull/30682" ref="nofollow noopener noreferrer">ä¸º Vitest è¿è¡Œå™¨è´¡çŒ®äº†ä¸€ä¸ªåä¸º <code>outputFile</code> çš„é€‰é¡¹</a></li>
<li>Younes Jaaidi ä¸º <a href="https://link.juejin.cn?target=http%3A%2F%2Fangular.dev%2Fguide%2Ftesting" target="_blank" title="http://angular.dev/guide/testing" ref="nofollow noopener noreferrer">Vitest è¿è¡Œå™¨</a>è´¡çŒ®äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular-cli%2Fpull%2F31783" target="_blank" title="https://github.com/angular/angular-cli/pull/31783" ref="nofollow noopener noreferrer">å¤šä¸ªæ”¹è¿›</a></li>
</ul>
<p>éå¸¸æ„Ÿè°¢æ‚¨å‚ä¸ Angular v21ï¼</p>
<p>æ‚¨å¯èƒ½è¿˜è®°å¾—æˆ‘ä»¬åœ¨ Angular v20 ç‰ˆæœ¬ä¸­å¾æ±‚è¿‡æ‚¨å¯¹å‰ç¥¥ç‰©çš„æ„è§ï¼æˆ‘ä»¬çš„å‰ç¥¥ç‰© RFC æ”¶åˆ°äº†åˆ›çºªå½•æ•°é‡çš„æäº¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å‘æ‚¨æ›´æ–°ã€‚æˆ‘ä»¬çŸ¥é“æ‚¨æƒ³è§åˆ°æˆ‘ä»¬çš„æ–°å‰ç¥¥ç‰©ï¼Œè¯·åŠ¡å¿…åœ¨ 2025 å¹´ 11 æœˆ 20 æ—¥ä¸Šåˆ 9 ç‚¹å¤ªå¹³æ´‹æ—¶é—´è§‚çœ‹æˆ‘ä»¬çš„å‘å¸ƒæ´»åŠ¨ï¼Œä»¥è·å–æ­£å¼å®£å¸ƒâ­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34d17f008b1417bac9d6863b8f76fae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6LaF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211683&amp;x-signature=JnHNSi%2B81KIc3f%2FoOwQSiawAMi0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">æ„å»ºä¸‹ä¸€æ³¢åº”ç”¨ç¨‹åºçš„æ—¶åˆ»</h2>
<p>æˆ‘ä»¬å¯¹è¿™æ¬¡å‘å¸ƒæ„Ÿåˆ°æ— æ¯”è‡ªè±ªï¼Œä½†è¿™åªæ˜¯ Angular æ—…ç¨‹ä¸­çš„ä¸€æ­¥ã€‚æˆ‘ä»¬å¯†åˆ‡å…³æ³¨ç€æœªæ¥ Web åº”ç”¨ç¨‹åºå¼€å‘ä¸­çš„æ–°å…´æ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬å·²ç»çœ‹åˆ°äº† AI çš„åŠ›é‡ï¼Œå¹¶å¸Œæœ›å°½æˆ‘ä»¬æ‰€èƒ½ä¸ºæ‚¨æä¾›é€‚åˆæ‚¨å·¥ä½œæ–¹å¼çš„å·¥å…·ã€‚æ— è®ºæ˜¯é€šè¿‡ vibe ç¼–ç¨‹ã€AI ä»£ç†è¿˜æ˜¯ä¼ ç»Ÿå¼€å‘ã€‚</p>
<p>æˆ‘ä»¬çš„æœ€æ–°åŠŸèƒ½ï¼Œå¦‚ Signal Forms å’Œ Angular Ariaï¼Œæ˜¯æˆ‘ä»¬ç»§ç»­æ”¹è¿› API è¡¨é¢ï¼Œä½¿ Angular æˆä¸ºæ„å»ºå¯æ‰©å±• Web åº”ç”¨çš„ä¿¡å¿ƒä¹‹åœ°çš„è¯æ˜ã€‚</p>
<p>è¯·åŠ¡å¿…è¿è¡Œ <code>ng update</code> å¹¶åˆ›å»ºæ‚¨çš„ç”¨æˆ·ä¼šå–œçˆ±çš„åº”ç”¨ç¨‹åºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸é™äºVueï¼vue-plugin-hiprint æ‰“å°æ’ä»¶å®Œæ•´ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7574382925760725030</link>    <guid>https://juejin.cn/post/7574382925760725030</guid>    <pubDate>2025-11-20T03:15:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382925760725030" data-draft-id="7573521516325257243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸é™äºVueï¼vue-plugin-hiprint æ‰“å°æ’ä»¶å®Œæ•´ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T03:15:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MrBread"/> <meta itemprop="url" content="https://juejin.cn/user/761295078433239"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸é™äºVueï¼vue-plugin-hiprint æ‰“å°æ’ä»¶å®Œæ•´ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/761295078433239/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MrBread
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:15:27.000Z" title="Thu Nov 20 2025 03:15:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83729a16871f457085e99529c099ad13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=cXmn%2Ffh8n53Jx%2FeJWsgNlMCwA2Y%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>vue-plugin-hiprintæ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FCcSimple" target="_blank" title="https://gitee.com/CcSimple" ref="nofollow noopener noreferrer">ä½œè€…</a>åŸºäºhiprintäºŒæ¬¡å¼€å‘çš„æ‰“å°æ’ä»¶ï¼Œè™½ç„¶å¸¦ç€vueï¼Œä½†æ˜¯æ’ä»¶ä¸º<strong>å•çº¯çš„JavaScriptã€å·¥å…·åº“ã€‘</strong>ã€‚hiprintæ˜¯æœªå¼€æºçš„æ‰“å°æ’ä»¶ï¼Œå¯ä»¥åœ¨<a href="https://link.juejin.cn?target=http%3A%2F%2Fhiprint.io%2F" target="_blank" title="http://hiprint.io/" ref="nofollow noopener noreferrer">å®˜æ–¹åœ°å€</a>æŸ¥çœ‹éƒ¨åˆ†apiçš„ç”¨æ³•å’Œå®ä¾‹é¡¹ç›®æ“ä½œã€‚</p>
<p>vue-plugin-hiprintç›¸å…³æ•™ç¨‹å¯ä»¥æŸ¥çœ‹ï¼Œ<a href="https://juejin.cn/user/1662117311414462/posts" target="_blank" title="https://juejin.cn/user/1662117311414462/posts">ä¸ç®€è¯´ çš„ä¸ªäººä¸»é¡µ - æ–‡ç« </a>çš„ä¸»é¡µ-æ–‡ç« ä¸­ï¼Œæœ€åˆçš„æ–‡ç« é‡ŒåŒ…å«äº†æ•™ç¨‹å’Œå¸¸è§é—®é¢˜çš„è§£ç­”ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FCcSimple%2Fvue-plugin-hiprint-start" target="_blank" title="https://gitee.com/CcSimple/vue-plugin-hiprint-start" ref="nofollow noopener noreferrer">vue-plugin-hiprint-start</a>é¡¹ç›®ä¸­æœ‰å…·ä½“çš„ä½¿ç”¨å®ä¾‹</p>
<p>æœ¬æ•™ç¨‹æ•´ç†äº†è‡ªå·±çš„ä½¿ç”¨è¿‡ç¨‹ç»éªŒå’Œæ¥è§¦åˆ°çš„æ•™ç¨‹æ–‡æ¡£ï¼Œæ—¨åœ¨ä¸ºåˆæ¬¡æ¥è§¦åˆ°vue-plugin-hiprintå¼€å‘çš„äººï¼Œæä¾›åˆæ­¥çš„äº†è§£å’Œè‡ªå®šä¹‰å¼€å‘çš„æ–¹å‘</p>
<h2 data-id="heading-1">æ¦‚è¿°</h2>
<p>é¦–å…ˆå¯¹æ•´ä¸ªæ’ä»¶æœ‰ä¸€ä¸ªå¤§æ¦‚äº†è§£ï¼Œæ•´ä¸ªæ‰“å°æ’ä»¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œç»„ä»¶å…ƒç´ é¢æ¿ã€è®¾è®¡å™¨å’Œå±æ€§é¢æ¿ï¼ˆæ­¤å¤„æˆªå›¾ä½¿ç”¨çš„ä¸ºvue-plugin-hiprint-startç¤ºä¾‹é¡¹ç›®ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3e75cf2ce254266858222873e969a32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=5NEIo2mhoFXq6hmO6GlczK3tjHA%3D" alt="image.png" loading="lazy"/></p>
<p>ç»„ä»¶å…ƒç´ é¢æ¿ä¸­ï¼Œ<strong>å·²ç»æ³¨å†Œçš„</strong>å…ƒç´ å¯ä»¥ç›´æ¥æ‹–æ‹½çš„åˆ°è®¾è®¡å™¨ä¸­ï¼Œè°ƒèŠ‚å¤§å°ã€‚å¯ä»¥æŒ‰ä½ctrlé”®è¿›è¡Œå¤šé€‰ï¼Œä½†æ‰“å°å±æ€§åªä¼šæ˜¾ç¤ºæœ€åé€‰æ‹©çš„å…ƒç´ ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š1.å…ƒç´ é¢æ¿çš„ç»“æ„æ˜¯å®Œå…¨è‡ªå®šä¹‰çš„ï¼Œåªéœ€è¦ä¿è¯æ¯ä¸ªå…ƒç´ tidæ­£ç¡®å’Œdomå¯ä»¥ä¼ é€’ç»™æ„å»ºå‡½æ•° 2.hiprint.PrintTemplateå’Œdesignæ—¶ï¼Œé¡µé¢ä¸­å·²ç»æ¸²æŸ“äº†DOM</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-row"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-2 left"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å…ƒç´ å®¹å™¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯å•ç‹¬çš„å®¹å™¨ï¼Œä»¥æ•°ç»„å½¢å¼ä¼ é€’ç»™buildByHtml --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ep-draggable-item item"</span> <span class="hljs-attr">tid</span>=<span class="hljs-string">"defaultModule.text"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont sv-text"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-5 center"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è®¾è®¡å™¨çš„ å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hiprint-printTemplate"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-2 right"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å…ƒç´ å±æ€§çš„ å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"PrintElementOptionSetting"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { hiprint, defaultElementTypeProvider } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-plugin-hiprint'</span>;

<span class="hljs-comment">/* å·¦ä¾§å…ƒç´ é¢æ¿ */</span>
hiprint.<span class="hljs-title function_">init</span>({ <span class="hljs-attr">providers</span>: [<span class="hljs-title function_">defaultElementTypeProvider</span>()] }); <span class="hljs-comment">// providersæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¥å—ç»„ä»¶å…ƒç´ ï¼ŒProvideræä¾›çš„ç»„ä»¶å…ƒç´ ï¼ŒdefaultElementTypeProvideræ˜¯å†…ç½®Providerã€‚</span>
<span class="hljs-keyword">const</span> items = $(<span class="hljs-string">'.ep-draggable-item'</span>);
hiprint.<span class="hljs-property">PrintElementTypeManager</span>.<span class="hljs-title function_">buildByHtml</span>(items);

<span class="hljs-comment">// å±æ€§é¢æ¿é…ç½®</span>
hiprint.<span class="hljs-title function_">setConfig</span>();
<span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®</span>
<span class="hljs-comment">// hiprint.setConfig(defaultPanelConfig); </span>

<span class="hljs-comment">/* è®¾è®¡å™¨ */</span>
$(<span class="hljs-string">"#hiprint-printTemplate"</span>).<span class="hljs-title function_">empty</span>(); <span class="hljs-comment">// å…ˆæ¸…ç©º, é¿å…é‡å¤æ„å»º</span>
hiprintTemplate = <span class="hljs-keyword">new</span> hiprint.<span class="hljs-title class_">PrintTemplate</span>({
	<span class="hljs-attr">settingContainer</span>: <span class="hljs-string">"#PrintElementOptionSetting"</span>, <span class="hljs-comment">// å±æ€§é¢æ¿å®¹å™¨</span>
});
hiprintTemplate.<span class="hljs-title function_">design</span>(<span class="hljs-string">"#hiprint-printTemplate"</span>);
<span class="hljs-comment">// æ‰“å°ä¸é¢„è§ˆ</span>
hiprintTemplate.<span class="hljs-title function_">print</span>()
hiprintTemplate.<span class="hljs-title function_">getHtml</span>()
</code></pre>
<h2 data-id="heading-2">å·¦ä¾§ç»„ä»¶å…ƒç´ é¢æ¿æ„å»º</h2>
<p>ç»„ä»¶å…ƒç´ çš„æ„å»ºåˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€æ˜¯providerï¼Œç”¨æ¥ç»™hiprintæä¾›ç»„ä»¶å…ƒç´ ï¼›äºŒæ˜¯domæ„å»ºä¸ç»‘å®šã€‚</p>
<h3 data-id="heading-3">ç®€å•æ„å»º</h3>
<p>å†…ç½®ç»„ä»¶Providerä¸ºhiprintæä¾›å…ƒç´ </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { hiprint, defaultElementTypeProvider } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue-plugin-hiprint"</span>; 
<span class="hljs-comment">// defaultElementTypeProvideræ˜¯å†…ç½®çš„providerï¼Œå…¶ä¸­çš„å…ƒç´ å…·æœ‰tidçš„å±æ€§(å…·ä½“å¯ä»¥å‚è€ƒè‡ªå®šä¹‰provider)ï¼Œæ¯”å¦‚textçš„tidå±æ€§å°±æ˜¯defaultModule.textï¼Œè¿™ä¸domä¸­çš„tidå¯¹åº”</span>

hiprint.<span class="hljs-title function_">init</span>({ <span class="hljs-attr">providers</span>: [<span class="hljs-title function_">defaultElementTypeProvider</span>()] })
</code></pre>
<p><code>dom</code>æ„å»ºä¸ç»‘å®š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- DOMçš„æ„å»ºæ˜¯å®Œå…¨è‡ªå®šä¹‰ï¼Œåªè¦ä¿è¯ 1.èƒ½å¤Ÿè·å–åˆ°dom 2.domä¸Šå­˜åœ¨tidå±æ€§ --&gt;</span>
<span class="hljs-comment">&lt;!-- 
1.class="ep-draggable-item"ï¼Œä½¿ç”¨è¯¥ç±»åè·å–çœŸå®domï¼Œåœ¨buildByHtmlç»‘å®š
2.tidçš„å€¼ä¸defaultElementTypeProvider()ä¸­å…ƒç´ çš„tidå€¼å¯¹åº”
--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ep-draggable-item item"</span> <span class="hljs-attr">tid</span>=<span class="hljs-string">"defaultModule.text"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js">hiprint.<span class="hljs-property">PrintElementTypeManager</span>.<span class="hljs-title function_">buildByHtml</span>($(<span class="hljs-string">".ep-draggable-item"</span>)); <span class="hljs-comment">// ç»‘å®šé¡µé¢ä¸­çš„domã€‚ï¼ˆ$(".ep-draggable-item")ï¼Œjqueryè·å–domçš„å†™æ³•ï¼‰</span>
</code></pre>
<p>å†…ç½®å…ƒç´ ç±»å‹</p>
<pre><code class="hljs language-arduino" lang="arduino">æ’ä»¶æœ‰ä»¥ä¸‹å†…ç½®ç±»å‹
text æ–‡æœ¬
image å›¾ç‰‡
longText é•¿æ–‡æœ¬
table è¡¨æ ¼
html 
hline æ¨ªçº¿
vline ç«–çº¿
rect çŸ©å½¢
oval åœ†å½¢
barcode æ¡å½¢ç 
qrcode äºŒç»´ç 
</code></pre>
<p>defaultElementTypeProviderä¸­çš„tidå±æ€§å³ä¸º defaultModule.å±æ€§ç±»å‹ã€‚æ¯”å¦‚defaultModule.text</p>
<h3 data-id="heading-4">è‡ªå®šä¹‰provider</h3>
<p>providerçš„ç»“æ„ä¸º<code>provider = { addElementTypes }</code>ï¼Œæ‰€ä»¥åªéœ€è¦å…³æ³¨ addElementTypes çš„å®ç°</p>
<h4 data-id="heading-5">addElementTypes</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addElementTypes</span> = (<span class="hljs-params">context: any</span>) =&gt; { <span class="hljs-comment">// contextæ˜¯hiprintè°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span>
    context.<span class="hljs-title function_">removePrintElementTypes</span>(<span class="hljs-string">'providerModule'</span>); <span class="hljs-comment">// providerModuleè‡ªå®šä¹‰å…ƒç´ æ¨¡ç»„åç§°</span>
    context.<span class="hljs-title function_">addPrintElementTypes</span>(<span class="hljs-string">'providerModule'</span>, [ <span class="hljs-comment">// æ·»åŠ å…ƒç´ ç±»å‹çš„æ–¹æ³•</span>
        <span class="hljs-keyword">new</span> hiprint.<span class="hljs-title class_">PrintElementTypeGroup</span>(<span class="hljs-string">''</span>, [ <span class="hljs-comment">// åˆ›å»ºå…ƒç´ ç±»å‹</span>
            {
              <span class="hljs-attr">tid</span>: <span class="hljs-string">'providerModule.text'</span>, <span class="hljs-comment">// éœ€è¦ä¸htmlä¸Šå¯¹åº”çš„domä¸Šçš„è‡ªå®šä¹‰å±æ€§tidå¯¹åº”ï¼Œå³</span>
              <span class="hljs-attr">title</span>: <span class="hljs-string">'æ–‡æœ¬'</span>, <span class="hljs-comment">// æ‹–æ‹½æ—¶å‡ºç°çš„æ–‡æœ¬</span>
              <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>, <span class="hljs-comment">// å…ƒç´ ç±»å‹ï¼Œæ­¤å¤„çš„textä¸ºå†…ç½®å…ƒç´ ç±»å‹</span>
              <span class="hljs-attr">options</span>: {}, <span class="hljs-comment">// å®šä¹‰æ‰“å°è®¾è®¡å™¨ä¸Šå…ƒç´ çš„æ ·å¼ã€åç§°ç­‰ç­‰ï¼Œè¿™äº›å±æ€§å¯ä»¥åœ¨å³ä¾§çš„å±æ€§é¢æ¿ä¸Šæ˜¾ç¤ºï¼Œè¿›è¡Œåœ¨çº¿ç¼–è¾‘</span>
            },
        ])
    ]) 
}
</code></pre>
<h4 data-id="heading-6">options</h4>
<p>å¯¹äºå¤§å¤šæ•°çš„ç±»å‹å¯ä»¥å‚è€ƒï¼Œhiprintçš„<a href="https://link.juejin.cn?target=http%3A%2F%2Fhiprint.io%2F" target="_blank" title="http://hiprint.io/" ref="nofollow noopener noreferrer">å®˜æ–¹</a>-ä¸­æ–‡æ–‡æ¡£-å·¦ä¾§èœå•ä»æ–‡æœ¬åˆ°é•¿æ–‡ã€‚æœ‰å‡ ä¸ªæ³¨æ„ç‚¹</p>
<p>1.ç®€å•è¯´æ˜ä¸€ä¸‹fieldå’Œfieldså±æ€§ã€‚ä¸¤ä¸ªå±æ€§å¡«å……çš„éƒ½æ˜¯åœ¨é¢„è§ˆï¼ˆgetHtmlï¼‰å’Œæ‰“å°ï¼ˆprintï¼‰çš„è·å–å…·ä½“æ•°æ®å­—æ®µåï¼ŒtestDataåœ¨è®¾è®¡çš„æ—¶å€™æ˜¾ç¤ºçš„æµ‹è¯•æ•°æ®</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
	field<span class="hljs-punctuation">:</span> 'name'<span class="hljs-punctuation">,</span> 
	fields<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>field<span class="hljs-punctuation">:</span>'name' <span class="hljs-punctuation">,</span>text<span class="hljs-punctuation">:</span>'å§“å' <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">{</span> field<span class="hljs-punctuation">:</span> 'sex'<span class="hljs-punctuation">,</span> text<span class="hljs-punctuation">:</span> 'æ€§åˆ«' <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
const printData = <span class="hljs-punctuation">{</span>
    name<span class="hljs-punctuation">:</span> <span class="hljs-string">"123"</span><span class="hljs-punctuation">,</span>
    sex<span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”·"</span><span class="hljs-punctuation">,</span>
    object<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        name<span class="hljs-punctuation">:</span> '<span class="hljs-number">456</span>'
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
hiprint.print(printData)<span class="hljs-comment">// å¯¹äºæ‰“å°å‡½æ•°ï¼Œè¯¦æƒ…çœ‹æ‰“å°æ¨¡å—</span>

<span class="hljs-number">1.</span>fieldå±æ€§çš„å€¼ç”¨æ¥å¡«å†™æ•°æ®(printData)ä¸­çš„å­—æ®µåã€‚fieldsæä¾›å¯é€‰æ‹©çš„å­—æ®µåï¼Œä¼šå°†å±æ€§é¢æ¿ä¸­å¯¹åº”çš„å­—æ®µçš„è¾“å…¥æ¡†å˜æˆé€‰æ‹©æ¡†ã€‚
<span class="hljs-number">2.</span>printå’ŒgetHtmlå¯ä»¥æ¥å—å•ä¸€æ•°æ®å’Œæ•°æ®æ•°ç»„ã€‚print(<span class="hljs-punctuation">[</span>printData<span class="hljs-punctuation">]</span>)
<span class="hljs-number">3.</span>ä¸¤è€…å¯ä»¥æ¥å—å±æ€§è®¿é—®çš„æ–¹å¼ï¼Œfield<span class="hljs-punctuation">:</span> 'object.name'
</code></pre>
<p>2.äºŒç»´ç ä¸æ¡çº¹ç ï¼Œä¼šæ ¹æ®æµ‹è¯•æ•°æ®æˆ–è€…å®é™…çš„æ•°æ®å¯¹åº”ç”Ÿæˆï¼ŒäºŒç»´ç åœ¨æ— æ•°æ®çš„æ—¶å€™ä¼šç”Ÿæˆå¤±è´¥ã€‚</p>
<p>3.æ›´å¤šçš„å±æ€§</p>
<p>å®˜ç½‘çš„htmlç±»å‹é¡µé¢æ˜¯æ‰“ä¸å¼€çš„ï¼Œæˆ–è€…å…¶ä»–å…ƒç´ æœ‰ä¸€äº›å±æ€§æ–‡æ¡£ä¸­æ²¡æœ‰å†™ï¼Œå¯ä»¥åœ¨è®¾è®¡å™¨ä¸­æ·»åŠ è¯¥å…ƒç´ ç„¶ååœ¨consoleé‡Œæ‰“å°æ¨¡æ¿çš„å®ä¾‹ï¼ŒæŒ‰ç…§<strong>printPanels</strong>-<strong>printElements</strong>-<strong>_printElementOptionTabs</strong>è·¯å¾„ï¼Œå¯ä»¥åœ¨æ­¤å¤„æŸ¥çœ‹å¯¹åº”çš„å±æ€§ã€‚</p>
<p>ï¼ˆpsï¼šå…ƒç´ çš„å±æ€§å€¼å…¨æ˜¯é»˜è®¤çš„æƒ…å†µæ—¶ï¼Œå…ƒç´ ä¸Šæ²¡æœ‰printElementOptionTabsï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35074cf521a345c4b40615a282075e83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=WlSDM6CeDYo8ydnBZ9XRaYIT1%2FI%3D" alt="image.png" loading="lazy"/></p>
<p>4.å›¾ç‰‡</p>
<p>å›¾ç‰‡å…ƒç´ ï¼Œåœ¨å®ƒçš„å±æ€§é¢æ¿ä¸­æœ‰ä¸€ä¸ªå›¾ç‰‡åœ°å€çš„å±æ€§ï¼Œå¯¹åº”optionsä¸­çš„srcå­—æ®µï¼Œè¿™ä¸ªå±æ€§æ˜¯åœ¨è®¾è®¡æ—¶æ¨¡æ¿ä¸Šæ˜¾ç¤ºçš„å›¾ç‰‡åœ°å€ã€‚åœ¨å±æ€§é¢æ¿ä¸Šæœ‰ä¸€ä¸ªé€‰æ‹©æŒ‰é’®ï¼Œç‚¹å‡»é€‰æ‹©æŒ‰é’®è°ƒç”¨çš„æ˜¯æŒ‚è½½åœ¨æ¨¡æ¿å®ä¾‹ä¸Šçš„onImageChooseClickæŒ‰é’®ï¼Œå…¶ä¸­çš„å‚æ•°ä¸ºtargetï¼Œtarget.refresh(src)å¯ä»¥æ›´æ–°è¿™ä¸ªå±æ€§;</p>
<p>5.HTML</p>
<p>htmlå®é™…ä¸Šä½¿ç”¨çš„optionsé‡Œformatterï¼Œè¿”å›å…·ä½“htmlç»“æ„</p>
<pre><code class="hljs language-less" lang="less">formatter: "function(t,e,printData){return'&lt;div style=\"<span class="hljs-attribute">height</span>:<span class="hljs-number">50pt</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">50pt</span>;<span class="hljs-attribute">background</span>:red;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;\"&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;';}"
</code></pre>
<p>ps:</p>
<p>1.htmlç±»å‹åœ¨æ‰“å°å’Œé¢„è§ˆæ—¶ä¼šæœ‰ä¸€äº›å‡ºå…¥ï¼Œæ¯”å¦‚æ‰“å°æ—¶èƒŒæ™¯è‰²ä¼šè¢«å¿½ç•¥ï¼Œéœ€è¦è‡ªè¡Œè°ƒæ•´</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> print {
    <span class="hljs-selector-tag">div</span> {
        -webkit-print-<span class="hljs-attribute">color</span>-adjust: exact;
        print-<span class="hljs-attribute">color</span>-adjust: exact;
    }
}
</code></pre>
<p>2.htmlçš„formatterä¸å›¾ç‰‡çš„formatterå‚æ•°ç›¸åŒï¼Œä¸å…¶ä»–å…ƒç´ ç±»å‹çš„formatteræœ‰ä¸€äº›åŒºåˆ«</p>
<h2 data-id="heading-7">è®¾è®¡å™¨</h2>
<h3 data-id="heading-8">åŸºç¡€</h3>
<pre><code class="hljs language-js" lang="js">$(<span class="hljs-string">"#hiprint-printTemplate"</span>).<span class="hljs-title function_">empty</span>(); <span class="hljs-comment">// å…ˆæ¸…ç©º, é¿å…é‡å¤æ„å»º</span>
hiprintTemplate = <span class="hljs-keyword">new</span> hiprint.<span class="hljs-title class_">PrintTemplate</span>({
    templateï¼š template
	<span class="hljs-attr">settingContainer</span>: <span class="hljs-string">"#PrintElementOptionSetting"</span>, <span class="hljs-comment">// å±æ€§é¢æ¿å®¹å™¨</span>
});
hiprintTemplate.<span class="hljs-title function_">design</span>(<span class="hljs-string">"#hiprint-printTemplate"</span>);
</code></pre>
<p>ç›¸å…³æ¦‚å¿µè§£é‡Šï¼š</p>
<p>æ¨¡æ¿ï¼Œæ¨¡æ¿æ˜¯ç”±hiprint.PrintTemplateåˆ›å»ºçš„å®ä¾‹ï¼Œå³ä¸ºé¡µé¢æ‰€å±•ç¤ºçš„åŒ…æ‹¬åˆ»åº¦å°ºåœ¨å†…çš„è®¾è®¡å™¨ï¼Œå®˜ç½‘<a href="https://link.juejin.cn?target=http%3A%2F%2Fhiprint.io%2Fdocs%2Ftemplate" target="_blank" title="http://hiprint.io/docs/template" ref="nofollow noopener noreferrer">hiprintæ¨¡æ¿</a>ä¸­æœ‰ç›¸å…³åˆå§‹åŒ–çš„å‚æ•°</p>
<p>é¢æ¿ï¼Œä¸€ä¸ªæ¨¡æ¿ä¸­å¯ä»¥åŒ…å«å¤šä¸ªé¢æ¿ï¼Œå¯ä»¥ç†è§£ä¸ºæ–°çš„ä¸€é¡µçº¸å¼ ï¼Œä½†æ˜¯åŒä¸€ä¸ªæ¨¡æ¿ä¸‹åŒæ—¶åªèƒ½å±•ç¤ºä¸€ä¸ªé¢æ¿ã€‚å®˜ç½‘<a href="https://link.juejin.cn?target=http%3A%2F%2Fhiprint.io%2Fdocs%2Fpanel" target="_blank" title="http://hiprint.io/docs/panel" ref="nofollow noopener noreferrer">hiprint.ioé¢æ¿</a>ä¸­æœ‰é¢æ¿çš„ç›¸å…³å‚æ•°ã€‚é¡µé¢ä¸­çš„å…ƒç´ æ˜¯å­˜å‚¨åœ¨é¢æ¿ä¸­ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fhiprint.io%2Fdemo" target="_blank" title="http://hiprint.io/demo" ref="nofollow noopener noreferrer">hiprint.ioçš„demo</a>é¡µé¢ä¸‹æœ‰ä¸€ä¸ªç”Ÿæˆjsonåˆ°textareaæŒ‰é’®ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°templateå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ…å«panelså­—æ®µçš„jsonæ•°æ®ï¼Œè€Œpanelsæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æ‰“å°æ¨¡æ¿å®ä¾‹ï¼Œåœ¨åŸå‹ä¸Šå¯ä»¥çœ‹åˆ°æ“ä½œé¢æ¿çš„æ–¹æ³•addPrintPanelã€selectPanelã€deletePanel</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77cd9defe4064bebbd14d42a62b554cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=VBrawz6D1SbCj48mAaWda41Zk6I%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">selectPanel</span>(index) æ¥å—çš„æ˜¯é¢æ¿çš„ç´¢å¼•
<span class="hljs-built_in">addPrintPanel</span>(options) æ¥å—çš„é¢æ¿å‚æ•°
<span class="hljs-built_in">deletePanel</span>(index) æ¥å—çš„æ˜¯é¢æ¿çš„ç´¢å¼•
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡hiprintTemplate.printPanelsæŸ¥çœ‹åˆ°å½“å‰çš„æ¨¡ç‰ˆï¼Œç„¶åé€šè¿‡ä¸Šè¿°å‡½æ•°ç®¡ç†é¢æ¿ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æ•°ç»„æ¥ç®¡ç†panelï¼Œç„¶åé€šè¿‡æ•´ä½“é‡å¤æ„å»ºçš„ï¼Œé¿å…ä½¿ç”¨ä¸æ¸…æ¥šçš„å‡½æ•°ï¼Œå½“ç„¶è¿™æ ·é‡å¤æ„å»ºçš„æ€§èƒ½å¯èƒ½æ¯”è¾ƒå·®ã€‚</p>
<h3 data-id="heading-9">å¤šæ¨¡ç‰ˆ</h3>
<p>é¡µé¢å¯ä»¥åŒæ—¶å±•ç¤ºå¤šä¸ªæ¨¡æ¿ï¼Œåªéœ€è¦å¤šåˆ›å»ºä¸€ä¸ªæ¨¡æ¿å®ä¾‹ï¼Œç¤ºä¾‹å‚è§ä¸‹æ–¹ä»£ç ã€‚æ¨¡æ¿å®¹å™¨éœ€è¦å¤šä¸ªï¼Œä½†æ˜¯å±æ€§é¢æ¿å®¹å™¨å¯ä»¥å¤ç”¨ä¸€ä¸ªï¼Œå¹¶ä¸”å…ƒç´ éƒ½æ˜¯å…±äº«çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js">  $(<span class="hljs-string">"#hiprint-printTemplate"</span>).<span class="hljs-title function_">empty</span>(); <span class="hljs-comment">// å…ˆæ¸…ç©º, é¿å…é‡å¤æ„å»º</span>
  hiprintTemplate = <span class="hljs-keyword">new</span> hiprint.<span class="hljs-title class_">PrintTemplate</span>({
    <span class="hljs-attr">template</span>: template, <span class="hljs-comment">// æ¨¡æ¿json(object)</span>
    <span class="hljs-attr">settingContainer</span>: <span class="hljs-string">"#PrintElementOptionSetting"</span>, <span class="hljs-comment">// å…ƒç´ å‚æ•°å®¹å™¨</span>
  });
  <span class="hljs-comment">// æ„å»º å¹¶å¡«å……åˆ° å®¹å™¨ä¸­</span>
  hiprintTemplate.<span class="hljs-title function_">design</span>(<span class="hljs-string">"#hiprint-printTemplate"</span>, { <span class="hljs-attr">grid</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// 0.0.46ç‰ˆæœ¬æ–°å¢, æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼</span>
  <span class="hljs-comment">// ------ æ„å»ºå¤šä¸ªè®¾è®¡å™¨ ------</span>
  <span class="hljs-comment">// eslint-disable-next-line no-undef</span>
  $(<span class="hljs-string">"#hiprint-printTemplate2"</span>).<span class="hljs-title function_">empty</span>(); <span class="hljs-comment">// å…ˆæ¸…ç©º, é¿å…é‡å¤æ„å»º</span>
  hiprintTemplate2 = <span class="hljs-keyword">new</span> hiprint.<span class="hljs-title class_">PrintTemplate</span>({
    <span class="hljs-attr">template</span>: template2, <span class="hljs-comment">// æ¨¡æ¿json(object)</span>
    <span class="hljs-attr">settingContainer</span>: <span class="hljs-string">"#PrintElementOptionSetting"</span>, <span class="hljs-comment">// å…ƒç´ å‚æ•°å®¹å™¨</span>
  });
  <span class="hljs-comment">// æ„å»º å¹¶å¡«å……åˆ° å®¹å™¨ä¸­</span>
  hiprintTemplate2.<span class="hljs-title function_">design</span>(<span class="hljs-string">"#hiprint-printTemplate2"</span>);
</code></pre>
<h3 data-id="heading-10">APIè¡¥å……</h3>
<p>å®˜æ–¹çš„æ–‡æ¡£ä¸­åªæœ‰ä¸€éƒ¨åˆ†APIçš„æ–‡æ¡£ï¼Œå¯¹äºå…¶å®ƒAPIåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è‡ªå·±å»æŸ¥çœ‹å®ä¾‹ã€åŸå‹å’Œå¯¹åº”çš„æºç ã€‚å¯ä»¥åœ¨consoleä¸­æ‰“å°æ¨¡æ¿å®ä¾‹æˆ–è€…hiprintï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼ˆæ¯”å¦‚selectPanelï¼‰ï¼Œåœ¨[[FunctionLocation]]æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dcd3543c1c74138a48d75139fe0d97f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=UvZ8vXkItM4D0Sr7FFEkRxsar%2BI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88ace6b831c74e60a1588ec89466f885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJCcmVhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213327&amp;x-signature=op88PZPlO2%2BKU5bUugyTytovjG8%3D" alt="image.png" loading="lazy"/></p>
<p>psï¼šå¦‚æœæºç æ²¡æœ‰æ ¼å¼åŒ–ï¼Œåœ¨æ§åˆ¶å°åº•éƒ¨æœ‰æ ¼å¼åŒ–çš„åŠŸèƒ½</p>
<p>ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´ï¼Œ<strong>setPaper</strong>è®¾ç½®çº¸å¼ å¤§å°ï¼Œ<code>setPaper(width, height)</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// A4çº¸å¼ å¤§å°</span>
<span class="hljs-punctuation">{</span>
    width<span class="hljs-punctuation">:</span> <span class="hljs-number">210</span><span class="hljs-punctuation">,</span>
    height<span class="hljs-punctuation">:</span> <span class="hljs-number">297</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>ä½†æ˜¯ï¼ŒsetPaperæ–¹æ³•åªèƒ½è®¾ç½®å½“å‰çš„å±•ç¤ºçš„é¢æ¿çš„çº¸å¼ å¤§å°ï¼Œä¸ä¼šå½±å“å…¶å®ƒé¢æ¿ã€‚æŸ¥çœ‹å®ƒçš„æºç å‘ç°å®ƒåªè°ƒç”¨äº†editPanel.resizeï¼Œåªæ”¹å˜äº†å½“å‰ç¼–è¾‘çš„panelï¼Œæ‰€ä»¥å¦‚æœéœ€è¦ç»Ÿä¸€ä¿®æ”¹å¯ä»¥è·å–hiprintTemplate.printPanelsï¼Œå¯¹æ‰€æœ‰çš„panelæ‰§è¡Œresizeæ–¹æ³•ã€‚</p>
<p>éƒ¨åˆ†APIè¡¥å……ç®€è¿°</p>



































<table><thead><tr><th>åç§°</th><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>setElsAlign</td><td>type: left|right|vertical|top|horizontal|<br/>bottom|distributeHor|distributeVer</td><td>å¯¹é½å‡½æ•°ï¼Œåœ¨é¢æ¿ä¸Šé€‰ä¸­å…ƒç´ æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°å¯ä»¥è¿›è¡Œå¯¹é½æ“ä½œã€‚</td></tr><tr><td>zoom</td><td>number: float</td><td>æ”¾å¤§ç¼©å°å½“å‰é¢æ¿</td></tr><tr><td>selectPanel</td><td>number: int</td><td>åˆ‡æ¢å½“å‰æ˜¾ç¤ºçš„é¢æ¿ï¼Œå…¥å‚æ˜¯é¢æ¿åœ¨printPanelsä¸­çš„ç´¢å¼•</td></tr><tr><td>update</td><td>template</td><td>æ›´æ–°æ¨¡æ¿ï¼Œå…¥å‚ä¸ºæ»¡è¶³templateæ ¼å¼çš„json</td></tr><tr><td>getSelectEls</td><td/><td>è¿”å›é€‰ä¸­çš„å…ƒç´ ï¼ŒæŒ‰ä½ctrlå¯ä»¥å¤šé€‰</td></tr></tbody></table>
<h2 data-id="heading-11">å±æ€§é¢æ¿</h2>
<p>å±æ€§é¢æ¿çš„å„ç§é…ç½®éƒ½æ˜¯åœ¨setConfigå‡½æ•°å®Œæˆï¼Œä¸ä¼ å‚æ•°åˆ™ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ã€‚configä¸­æœ‰ä¸¤ç§å­—æ®µï¼š</p>
<p>1.optionItemsï¼Œå¯ä»¥ç†è§£ä¸ºå±æ€§ç»„ä»¶åº“ï¼Œä¸ºå±æ€§é…ç½®å¯¹åº”æ ·å¼å’Œdom</p>
<p>2.å…ƒç´ ç±»å‹å­—æ®µï¼Œåœ¨æ­¤å¤„é…ç½®è¯¥å…ƒç´ é€‰ä¸­æ˜¯å±æ€§é¢æ¿çš„æ˜¾ç¤º</p>
<pre><code class="hljs language-js" lang="js">hiprint.<span class="hljs-title function_">setConfig</span>(config);

config = { <span class="hljs-comment">// é™¤äº†optionItemså¤–ï¼Œå…¶å®ƒçš„å­—æ®µåéƒ½æ˜¯æ¨¡æ¿ä¸Šæ˜¾ç¤ºçš„å„ç§å…ƒç´ çš„ç±»å‹ï¼ˆåŒ…æ‹¬é¢æ¿ï¼‰ï¼Œ</span>
    <span class="hljs-attr">optionItems</span>: [], <span class="hljs-comment">// è¯¦æƒ…è§ä¸‹</span>
    <span class="hljs-attr">text</span>: {
        <span class="hljs-attr">tabs</span>: [ <span class="hljs-comment">// å±æ€§é¢æ¿å…·ä½“æ¯ä¸€ä¸ªtabä¸‹çš„å±æ€§ï¼ŒæŒ‰ç…§printElementOptionTabsä¸­çš„é¡ºåº</span>
            { <span class="hljs-attr">options</span>: [] },
            { <span class="hljs-attr">options</span>: [] },
            { <span class="hljs-attr">options</span>: [] },
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">'åŸºç¡€'</span>,
              <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ä»¥æ›¿æ¢æ‰åŸæ¥çš„æ ‡ç­¾</span>
              <span class="hljs-attr">options</span>: [<span class="hljs-comment">// å±æ€§é¢æ¿ä¸Šæ¯ä¸€é¡¹çš„æ˜¾ç¤ºï¼Œé»˜è®¤å¯ä»¥åœ¨printElementOptionTabsä¸­æŸ¥æ‰¾ï¼Œè‡ªå®šä¹‰çš„nameä¸optionItemsä¸­å¯¹åº”</span>
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'textType'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> }, 
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'tableTextType'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'barcodeMode'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'barWidth'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'barAutoWidth'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
                { <span class="hljs-attr">name</span>: <span class="hljs-string">'qrCodeLevel'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
              ],
            },
        ],
    },
    <span class="hljs-attr">panel</span>: {<span class="hljs-comment">// æ§åˆ¶panelçš„å±æ€§åœ¨å±æ€§é¢æ¿çš„æ˜¾ç¤ºï¼ŒsupportOptionsä¸‹é…ç½®</span>
        <span class="hljs-attr">supportOptions</span>: [
            { <span class="hljs-attr">name</span>: <span class="hljs-string">'firstPaperFooter'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> }, 
            { <span class="hljs-attr">name</span>: <span class="hljs-string">'evenPaperFooter'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
            { <span class="hljs-attr">name</span>: <span class="hljs-string">'oddPaperFooter'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
            { <span class="hljs-attr">name</span>: <span class="hljs-string">'lastPaperFooter'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
            { <span class="hljs-attr">name</span>: <span class="hljs-string">'panelLayoutOptions'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> },
        ]
    }
}
</code></pre>
<p>optionItemsï¼Œä»¥nameåšåŒºåˆ†ä¸è¢«å¼•ç”¨ã€‚å¦‚æœä¸å†…ç½®çš„nameç›¸åŒï¼Œåˆ™ä¼šæ›¿æ¢æ‰åŸæ¥çš„å±æ€§ç»„ä»¶ï¼›è‡ªå®šä¹‰çš„nameå¯ä»¥åœ¨tabsçš„optionsä¸­å¼•å…¥ä½¿ç”¨ã€‚</p>
<p>å…¶å†…éƒ¨é€šè¿‡class="auto-submit"ç»‘å®šäº‹ä»¶ï¼Œæ‰§è¡ŒgetValueæˆ–è€…setValueã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// optionItems</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">t</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'paperNumberDisabled'</span>;
  }

  <span class="hljs-keyword">return</span> (
    (t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">createTarget</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_t, i</span>) { <span class="hljs-comment">// iå¯ä»¥è®¿é—®å…ƒç´ çš„options</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span> = $(
        <span class="hljs-string">`&lt;div class="hiprint-option-item"&gt;\n        &lt;div class="hiprint-option-item-label"&gt;\n        æ˜¾ç¤ºé¡µç \n        &lt;/div&gt;\n        &lt;div class="hiprint-option-item-field"&gt;\n        &lt;select class="auto-submit"&gt;\n        &lt;option value="" &gt;æ˜¾ç¤º&lt;/option&gt;\n        &lt;option value="true" &gt;éšè—&lt;/option&gt;\n        &lt;/select&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;`</span>,
      )
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span>;
    }),
    (t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getValue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { <span class="hljs-comment">// getValueåœ¨æ¯æ¬¡èµ‹å€¼å±æ€§é¢æ¿çš„æ—¶å€™ï¼Œä¼šè¢«è°ƒç”¨</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'true'</span> == <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">'select'</span>).<span class="hljs-title function_">val</span>()) <span class="hljs-keyword">return</span> !<span class="hljs-number">0</span>;
    }),
    (t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setValue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) { <span class="hljs-comment">// setValueæ¯æ¬¡å±•ç¤ºå±æ€§ç»‘å®šçš„å…ƒç´ çš„å±æ€§é¢æ¿æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">'select'</span>).<span class="hljs-title function_">val</span>((<span class="hljs-literal">null</span> == t ? <span class="hljs-string">''</span> : t).<span class="hljs-title function_">toString</span>());
    }),
    (t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">destroy</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">remove</span>();
    }),
    t
  );
})();
</code></pre>
<h2 data-id="heading-12">æ‰“å°ä¸é¢„è§ˆ</h2>
<h3 data-id="heading-13">å•æ¨¡æ¿</h3>
<p>å•æ¨¡æ¿å¯ä»¥ç›´æ¥é€šè¿‡æ¨¡æ¿å®ä¾‹è°ƒç”¨æ‰“å°å‡½æ•°ã€‚æ‰“å°æ•°æ®ï¼Œå¯ä»¥ä¼ é€’å•ä¸€æ•°æ®<code>hiprintTemplate.print(printData)</code>ï¼Œä¹Ÿå¯ä»¥åƒç¤ºä¾‹ä¸€æ ·ä¼ é€’æ•°ç»„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰“å°æ•°æ®ï¼Œkey å¯¹åº” å…ƒç´ çš„ å­—æ®µå</span>
<span class="hljs-keyword">let</span> printData = { <span class="hljs-attr">name</span>: <span class="hljs-string">"CcSimple"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"/favicon.ico"</span>, <span class="hljs-attr">object</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¯¹è±¡å­—æ®µå€¼"</span> } };
<span class="hljs-comment">// å‚æ•°: æ‰“å°æ—¶è®¾ç½® å·¦åç§»é‡ï¼Œä¸Šåç§»é‡</span>
<span class="hljs-keyword">let</span> options = { <span class="hljs-attr">leftOffset</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">topOffset</span>: -<span class="hljs-number">1</span> };
<span class="hljs-comment">// æ‰©å±•</span>
<span class="hljs-keyword">let</span> ext = {
    <span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµè§ˆå™¨æ‰“å°çª—å£å·²æ‰“å¼€"</span>);
    },
    <span class="hljs-attr">styleHandler</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é‡å†™ æ–‡æœ¬ æ‰“å°æ ·å¼</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">`
        &lt;link rel="stylesheet" href="/print-lock.css" /&gt;
        &lt;style&gt;
           @media print {
              div {
                  -webkit-print-color-adjust: exact;
                  print-color-adjust: exact;
              }
          }
        &lt;/style&gt;
      `</span>;
    },
};
hiprintTemplate.<span class="hljs-title function_">print</span>([printData], options, ext);
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰“å°çš„æ—¶å€™å¯èƒ½å‡ºç°å…ƒç´ éƒ½é‡å åœ¨ç¬¬ä¸€é¡µä¸Šï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å¼•å…¥<code>print-lock.css</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥åœ¨<code>node_modules/vue-plugin-hiprint/dist</code>ä¸­æ‰¾åˆ°</p>
<h3 data-id="heading-14">å¤šæ¨¡æ¿</h3>
<p>hiprintä¹Ÿæ˜¯å¯ä»¥å®ç°å¤šæ¨¡æ¿æ‰“å°çš„ï¼Œåˆ›å»ºä¸¤ä¸ªæ¨¡æ¿å®ä¾‹ï¼Œå¯¹åº”ç»‘å®šä¸åŒçš„å®¹å™¨å³å¯ï¼ˆå…ƒç´ å±æ€§é¢æ¿å¯ä»¥ç»‘å®šåŒä¸€ä¸ªï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js">hiprint.<span class="hljs-title function_">print</span>({
    <span class="hljs-attr">templates</span>: [
      { <span class="hljs-attr">template</span>: hiprintTemplate, <span class="hljs-attr">data</span>: printData, <span class="hljs-attr">options</span>: { <span class="hljs-attr">topOffset</span>: <span class="hljs-number">100</span> } },
      { <span class="hljs-attr">template</span>: hiprintTemplate2, <span class="hljs-attr">data</span>: [printData2, printData3] },
    ],
});
</code></pre>
<p>å¤šæ¨¡ç‰ˆå¼•å…¥<code>print-lock.css</code>æ–‡ä»¶ï¼Œéœ€è¦åœ¨htmlä¸­é™æ€å¼•å…¥ã€‚</p>
<h3 data-id="heading-15">å…¶å®ƒæ³¨æ„ç‚¹</h3>
<p>1.ä½¿ç”¨æµè§ˆå™¨æ‰“å°çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„é¡µè„šä¸é¡µçœ‰ã€‚1.è¿™è¯´æ˜å†…å®¹æ²¡æœ‰å¡«æ»¡æ•´å¼ çº¸ï¼Œä½¿ç”¨<code>@page { margin: 0cm; }</code>å¯ä»¥ä¸å±•ç¤ºè‡ªåŠ¨çš„é¡µè„šä¸é¡µçœ‰ã€‚ 2.panelä¸­çš„çº¸å¼ å¤§å°ä¸æµè§ˆå™¨æ‰“å°è®¾ç½®ä¸­çš„çº¸å¼ å¤§å°ä¸åŒ¹é…ï¼Œä¸ä¼ é€’panelçº¸å¼ å¤§å°æˆ–è€…è®©ä¸¤è€…åŒ¹é…ï¼Œå³å¯æ¶ˆé™¤æ‰ã€‚</p>
<p>psï¼španelä¸­çš„çº¸å¼ å¤§å°ä¼šè¢«æ¸²æŸ“ä¸º <code>@page { size: width height }</code>ï¼Œå®é™…ä¸Šå°±æ˜¯sizeä¸æ‰“å°è®¾ç½®çº¸å¼ çš„åŒ¹é…</p>
<p>2.å…³äºå…¶å®ƒæ‰“å°æ—¶çš„æ ·å¼é—®é¢˜ï¼Œåœ¨å®é™…è°ƒç”¨ä¸€æ¬¡printåï¼Œæµè§ˆå™¨ä¼šæ¸²æŸ“ä¸€ä¸ªidä¸ºhiwprint_iframeçš„iframeå…ƒç´ ï¼Œè¿™å°±æ˜¯å®é™…è¢«æ‰“å°çš„é¡µé¢ã€‚å¯ä»¥æ‹·è´å‡ºæ¥å¯»æ‰¾æ ·å¼é—®é¢˜ã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ul>
<li>ğŸ–¨ï¸ å¯è§†åŒ–æ‹–æ‹½è®¾è®¡</li>
<li>ğŸ¨ é«˜åº¦å¯å®šåˆ¶ï¼Œä»å…ƒç´ åˆ°å±æ€§é¢æ¿éƒ½èƒ½è‡ªç”±æ‰©å±•</li>
<li>ğŸ”§ å¤šæ¨¡æ¿æ”¯æŒï¼Œåº”å¯¹å¤æ‚æ‰“å°åœºæ™¯</li>
</ul>
<p><strong>ä½¿ç”¨å»ºè®®ï¼š</strong></p>
<ul>
<li>åˆæ¬¡ä½¿ç”¨å»ºè®®ä»å†…ç½®å…ƒç´ å¼€å§‹ï¼Œé€æ­¥æ·±å…¥è‡ªå®šä¹‰</li>
<li>é‡åˆ°æ ·å¼é—®é¢˜ä¼˜å…ˆæ£€æŸ¥Â <code>print-lock.css</code>Â å’Œæ‰“å°åª’ä½“æŸ¥è¯¢</li>
<li>å½“å‰æ–‡æ¡£å’Œå®˜ç½‘æ–‡æ¡£ä¸­çš„APIåº”è¯¥è¶³å¤Ÿæ»¡è¶³å¤§å¤šæ•°çš„éœ€æ±‚ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦å–„ç”¨æµè§ˆå™¨æ§åˆ¶å°æ¢ç´¢æœªæ–‡æ¡£åŒ–çš„ API</li>
</ul>
<p>ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹ä¸ªèµå“¦ï¼ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Vue2 å°è£…å¤§å RTSP å›æ”¾è§†é¢‘ç»„ä»¶ï¼ˆPlayerControl.js å®ç°ï¼‰]]></title>    <link>https://juejin.cn/post/7574329472923271202</link>    <guid>https://juejin.cn/post/7574329472923271202</guid>    <pubDate>2025-11-20T03:16:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574329472923271202" data-draft-id="7574327911660093440" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Vue2 å°è£…å¤§å RTSP å›æ”¾è§†é¢‘ç»„ä»¶ï¼ˆPlayerControl.js å®ç°ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-20T03:16:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¥¿æ„šwo"/> <meta itemprop="url" content="https://juejin.cn/user/3175820923256430"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Vue2 å°è£…å¤§å RTSP å›æ”¾è§†é¢‘ç»„ä»¶ï¼ˆPlayerControl.js å®ç°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3175820923256430/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¥¿æ„šwo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:16:58.000Z" title="Thu Nov 20 2025 03:16:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fm0_57997609%2Farticle%2Fdetails%2F154698097" target="_blank" title="https://blog.csdn.net/m0_57997609/article/details/154698097" ref="nofollow noopener noreferrer">åŸºäº Vue3 å°è£…å¤§å RTSP å›æ”¾è§†é¢‘ç»„ä»¶ï¼ˆPlayerControl.js å®ç°ï¼‰_vue playercontrolå¤§åçš„ä½¿ç”¨-CSDNåšå®¢</a></p>
<p>å®˜æ–¹æ•™ç¨‹ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.dahuatech.com%2FdataSectionDetail%2Fd289d237163b4c75a2e2e0c8489117f1" target="_blank" title="https://support.dahuatech.com/dataSectionDetail/d289d237163b4c75a2e2e0c8489117f1" ref="nofollow noopener noreferrer">WEBæ— æ’ä»¶å¼€å‘åŒ…ä½¿ç”¨è¯´æ˜-æµ™æ±Ÿå¤§åæŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸</a></p>
<p>ç¢°åˆ°çš„é—®é¢˜ï¼š 1ã€PlayerControl.jsé»˜è®¤æ˜¯åœ¨æ ¹ç›®å½•ä½¿ç”¨ï¼Œå¦‚æœä¸æ˜¯åœ¨æ ¹ç›®å½•ä½¿ç”¨éœ€è¦ä¿®æ”¹å¯¹åº”æ–‡ä»¶ä¸­çš„çš„è·¯å¾„ï¼ˆæˆ‘çš„å‰ç¼€æ˜¯cockpitï¼‰ä¸ç„¶ä¼šæ‰¾ä¸åˆ°å¯¹åº”çš„æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c2c3a2fa9c40c5b056a6d0f7e740d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_5oSad28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213500&amp;x-signature=uoPzJbo%2F31JfwSlfjD80I%2FYWsx4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f287759035842d39d582841e1c87410~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_5oSad28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213500&amp;x-signature=E7WJT%2F2YQZ17R64eudQGy8kM7ro%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€æˆ‘å¯¹æ¥çš„å¤§åçš„æ‘„åƒå¤´æ˜¯H265æ ¼å¼çš„åªèƒ½åœ¨canvasä¸­å±•ç°å‡ºæ¥ï¼Œæˆ‘è¿™è¾¹çš„åŠŸèƒ½éœ€è¦æ˜¯å¯¹è§†é¢‘è¿›è¡Œå›æ”¾å’Œå‚è€ƒé“¾æ¥ç±»ä¼¼ï¼Œä½†æ˜¯å‚è€ƒé“¾æ¥æ˜¯èƒ½åœ¨videoä¸­å±•ç¤ºå› æ­¤ä¸éœ€è¦æ·»åŠ æ’­æ”¾ã€æš‚åœã€éŸ³é‡å¼€å…³ã€æŠ“å›¾ã€åˆ·æ–°ã€å…¨å±åŠŸèƒ½ï¼Œcanvasä¸­å°±éœ€è¦æ‰‹åŠ¨æ·»åŠ </p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">"'æ–‡ä»¶é¢„è§ˆ'"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"prev-file-dialog"</span> <span class="hljs-attr">append-to-body</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"DialogVisible"</span> <span class="hljs-attr">:fullscreen</span>=<span class="hljs-string">"true"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"vn-flex vn-flex-space-between vn-gap-8 vn-flex-y-center vn-fill-width"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ 'æ–‡ä»¶é¢„è§ˆ' }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"preview-pdf"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"canvasElement"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ width: '100%', height: '100%' }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"operation"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"operation-left vn-flex vn-flex-y-center vn-gap-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"play icon vn-pointer"</span>
            <span class="hljs-attr">:class</span>=<span class="hljs-string">"canvasOperation.playState ? 'el-icon-video-pause' : 'el-icon-video-play'"</span>
            @<span class="hljs-attr">click</span>=<span class="hljs-string">"handlePlay"</span>
          &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"disconnect icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-btn"</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">"toggleMute"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!canvasOperation.muteState"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-volume"</span>&gt;</span>ğŸ”Š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-muted"</span>&gt;</span>ğŸ”‡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timestamp vn-flex vn-flex-y-center vn-gap-4"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"first-time"</span>&gt;</span>{{ canvasOperation.firstTime }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            /
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"total-time"</span>&gt;</span>{{ canvasOperation.totalTime }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-input-number</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"canvasOperation.backTime"</span>
              <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span>
              <span class="hljs-attr">clearable</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
              <span class="hljs-attr">:min</span>=<span class="hljs-string">"0"</span>
              <span class="hljs-attr">:max</span>=<span class="hljs-string">"canvasOperation.totalTime"</span>
              <span class="hljs-attr">:controls</span>=<span class="hljs-string">"false"</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"number-input"</span>
              <span class="hljs-attr">:precision</span>=<span class="hljs-string">"0"</span>
            &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input-number</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"playerBack"</span>&gt;</span>è·³è½¬<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"operation-right vn-flex vn-flex-y-center vn-gap-12"</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- æ•è·æˆªå›¾ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-crop icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleCapture"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          <span class="hljs-comment">&lt;!-- åˆ·æ–° --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-refresh-right icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleRefresh"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- å…¨å±æŒ‰é’® --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-full-screen icon"</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">"toggleFullscreen"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span>, <span class="hljs-title class_">Vue</span>, <span class="hljs-title class_">Ref</span>, <span class="hljs-title class_">Prop</span>, <span class="hljs-title class_">PropSync</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-property-decorator'</span>

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'DaHuaVideoPreview'</span>,
  <span class="hljs-attr">components</span>: {}
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DaHuaVideoPreview</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Vue</span> {
  @<span class="hljs-title class_">Ref</span>() canvasElement!: any
  @<span class="hljs-title class_">PropSync</span>(<span class="hljs-string">'visible'</span>, { <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span> }) <span class="hljs-title class_">DialogVisible</span>!: boolean
  <span class="hljs-comment">// æ¥æ”¶å¤–éƒ¨å‚æ•°</span>
  @<span class="hljs-title class_">Prop</span>({
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">wsURL</span>: <span class="hljs-string">'ws://xxx.xxx.xxx.xxx:9527/rtspoverwebsocket'</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">ip</span>: <span class="hljs-string">'xxx.xxx.xxx.xxx'</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-string">'9527'</span>,
        <span class="hljs-attr">channel</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">username</span>: <span class="hljs-string">'admin'</span>,
        <span class="hljs-attr">password</span>: <span class="hljs-string">'admin123'</span>,
        <span class="hljs-attr">proto</span>: <span class="hljs-string">'Private3'</span>,
        <span class="hljs-attr">subtype</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">starttime</span>: <span class="hljs-string">'2025_11_10_09_10_00'</span>,
        <span class="hljs-attr">endtime</span>: <span class="hljs-string">'2025_11_10_10_10_00'</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-string">'220px'</span>
      }
    }
  })
  props!: any

  <span class="hljs-attr">player</span>: any = <span class="hljs-literal">null</span>
  canvasOperation = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initCanvasData</span>()

  <span class="hljs-title function_">initCanvasData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">playState</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">muteState</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">isFullscreen</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">backTime</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">totalTime</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">firstTime</span>: <span class="hljs-number">0</span>
    }
  }
  <span class="hljs-title function_">playerStop</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>?.<span class="hljs-title function_">close</span>()
  }

  <span class="hljs-title function_">playerPause</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>?.<span class="hljs-title function_">pause</span>()
  }

  <span class="hljs-title function_">playerContinue</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// this.player?.play()</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playerPlay</span>()
  }

  <span class="hljs-title function_">playerCapture</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>?.<span class="hljs-title function_">capture</span>(<span class="hljs-string">'test'</span>)
  }

  <span class="hljs-title function_">playerPlay</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">stop</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">close</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = <span class="hljs-literal">null</span>
    }
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">PlayerControl</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ PlayerControl SDK æœªåŠ è½½ï¼Œè¯·åœ¨ index.html ä¸­å¼•å…¥ /module/playerControl.js'</span>)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closePlayer</span>()

    <span class="hljs-keyword">var</span> options = {
      <span class="hljs-attr">wsURL</span>: <span class="hljs-string">`ws://<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.ip}</span>:<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.port}</span>/rtspoverwebsocket`</span>,
      <span class="hljs-attr">rtspURL</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildRtspUrl</span>(),
      <span class="hljs-attr">username</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">username</span>,
      <span class="hljs-attr">password</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">password</span>,
      <span class="hljs-attr">h265AccelerationEnabled</span>: <span class="hljs-literal">true</span>
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title class_">PlayerControl</span>(options)
    <span class="hljs-keyword">let</span> firstTime = <span class="hljs-number">0</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'WorkerReady'</span>, <span class="hljs-function">(<span class="hljs-params">rs: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WorkerReady'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">connect</span>()
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'Error'</span>, <span class="hljs-function">(<span class="hljs-params">rs: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'error'</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rs)
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'PlayStart'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PlayStart'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">playState</span> = <span class="hljs-literal">true</span>
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'UpdateCanvas'</span>, <span class="hljs-function">(<span class="hljs-params">res: any</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (firstTime === <span class="hljs-number">0</span>) {
        firstTime = res.<span class="hljs-property">timestamp</span> <span class="hljs-comment">//è·å–å½•åƒæ–‡ä»¶çš„ç¬¬ä¸€å¸§çš„æ—¶é—´æˆ³</span>
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">firstTime</span> = res.<span class="hljs-property">timestamp</span> - firstTime
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'GetTotalTime'</span>, <span class="hljs-function">(<span class="hljs-params">res: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res, <span class="hljs-string">'GetTotalTime'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">totalTime</span> = res || <span class="hljs-number">0</span>
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'FileOver'</span>, <span class="hljs-function">(<span class="hljs-params">res: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res, <span class="hljs-string">'FileOver'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRefresh</span>()
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasElement</span>, <span class="hljs-literal">null</span>)
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">__player</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>
  }

  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>, <span class="hljs-string">'props'</span>)
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playerContinue</span>()
    })
  }

  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closePlayer</span>()
  }

  <span class="hljs-title function_">playerBack</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">playByTime</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">backTime</span>)
  }

  <span class="hljs-comment">/** æ‹¼æ¥ RTSP URL å›æ”¾ */</span>
  <span class="hljs-title function_">buildRtspUrl</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>?.<span class="hljs-property">url</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>?.<span class="hljs-property">url</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`rtsp://<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.ip}</span>:<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.port}</span>/cam/playback?channel=<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.channel}</span>&amp;subtype=<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.subtype}</span>&amp;starttime=<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.starttime}</span>&amp;endtime=<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.props.endtime}</span>`</span>
  }

  <span class="hljs-title function_">closePlayer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">close</span>()
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ—§æ’­æ”¾å™¨å…³é—­å¼‚å¸¸:'</span>, e)
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-title function_">toggleMute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">muteState</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">muteState</span>
    <span class="hljs-comment">// å¦‚æœè¦å…³é—­å£°éŸ³ï¼Œå°† val å‚æ•°è®¾ç½®ä¸º 0 å³å¯ã€‚WEB SDK æ’­æ”¾æ—¶ï¼Œé»˜è®¤éŸ³é‡æ˜¯ 0ã€‚éœ€è¦å£°éŸ³æ—¶ï¼Œå¿…é¡»è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶ä¸”å‚æ•°å¤§äº 0</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">setAudioVolume</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">muteState</span>))
  }

  <span class="hljs-title function_">toggleFullscreen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> videoWrapper = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.preview-pdf'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>

    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">fullscreenElement</span>) {
      <span class="hljs-comment">// è¿›å…¥å…¨å±</span>
      <span class="hljs-keyword">if</span> (videoWrapper.<span class="hljs-property">requestFullscreen</span>) {
        videoWrapper.<span class="hljs-title function_">requestFullscreen</span>()
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">isFullscreen</span> = <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é€€å‡ºå…¨å±</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">exitFullscreen</span>) {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">exitFullscreen</span>()
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">isFullscreen</span> = <span class="hljs-literal">false</span>
    }
  }
  <span class="hljs-comment">//</span>
  <span class="hljs-title function_">handlePlay</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">playState</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">play</span>()
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">pause</span>()
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">playState</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span>.<span class="hljs-property">playState</span>
  }

  <span class="hljs-title function_">handleCapture</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">capture</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>())
  }

  <span class="hljs-title function_">handleRefresh</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasOperation</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initCanvasData</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playerPlay</span>()
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.preview-pdf</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;

  <span class="hljs-attribute">position</span>: relative;

  <span class="hljs-selector-class">.operation</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);

    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
    <span class="hljs-selector-class">.play</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    }
    <span class="hljs-selector-class">.icon</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
    <span class="hljs-selector-class">.control-btn</span> {
      <span class="hljs-attribute">background-color</span>: transparent;
      <span class="hljs-selector-tag">span</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
      }
    }
  }
  <span class="hljs-selector-class">.timestamp</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;

    <span class="hljs-selector-class">.first-time</span>,
    <span class="hljs-selector-class">.total-time</span> {
      <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-class">.number-input</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    }
  }
}

<span class="hljs-selector-class">.prev-file-dialog</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  ::v-deep {
    <span class="hljs-selector-class">.el-dialog</span><span class="hljs-selector-class">.is-fullscreen</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    }
    <span class="hljs-selector-class">.el-dialog</span> {
      <span class="hljs-attribute">min-width</span>: <span class="hljs-number">80vw</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">70vh</span>);
    }
    <span class="hljs-selector-class">.el-dialog__body</span> {
      <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-meta">!important</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p>å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf00fd18bbd54782ac3cd0aa4c2c4ee2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_5oSad28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764213500&amp;x-signature=iDHD7ON2gVk7KB0uN854WD7%2Bbrk%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€è¿‘è‹¹æœå®¡æ ¸æ•ˆç‡æé«˜äº†ï¼Œå‘¨æœ«ç«Ÿç„¶éƒ½åœ¨å®¡æ ¸ã€‚]]></title>    <link>https://juejin.cn/post/7574568258800959515</link>    <guid>https://juejin.cn/post/7574568258800959515</guid>    <pubDate>2025-11-20T03:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258800959515" data-draft-id="7574357603406233650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€è¿‘è‹¹æœå®¡æ ¸æ•ˆç‡æé«˜äº†ï¼Œå‘¨æœ«ç«Ÿç„¶éƒ½åœ¨å®¡æ ¸ã€‚"/> <meta itemprop="keywords" content="APP,Apple,uni-app"/> <meta itemprop="datePublished" content="2025-11-20T03:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/1421041942671774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€è¿‘è‹¹æœå®¡æ ¸æ•ˆç‡æé«˜äº†ï¼Œå‘¨æœ«ç«Ÿç„¶éƒ½åœ¨å®¡æ ¸ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1421041942671774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:35:04.000Z" title="Thu Nov 20 2025 03:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ€è¿‘æ²¡æœ‰æ€ä¹ˆæ›´æ–°æ–‡ç« ï¼Œæ˜¯å› ä¸ºåœ¨è¿­ä»£ä¹‹å‰çš„è€äº§å“ã€‚æ­£å¥½æŠŠè¿™ä»Šå¤©è‡ªå·±è¿­ä»£çš„æƒ…å†µï¼Œè®²ä¸€ä¸‹ã€‚</p>
<p>æ›´æ–°äº†7æ¬¾äº§å“ï¼Œå…¶ä¸­4æ¬¾å·¥å…·ç±»äº§å“ï¼Œ1æ¬¾ç”Ÿæ´»ç±»ï¼Œ1æ¬¾å¨±ä¹ç±»ï¼Œ1æ¬¾å‚è€ƒç±»ã€‚</p>
<h3 data-id="heading-1">å·¥å…·ç±»</h3>
<p>ä»è¿­ä»£å‘¨æœŸå’Œè¿­ä»£æ—¶é—´æ¥çœ‹ï¼Œå·¥å…·ç±»çš„è¿­ä»£æ—¶é—´å’Œä¹‹å‰ä¸€æ ·ã€‚<code>å¹³å‡åœ¨40åˆ†å·¦å³å‡ºç»“æœï¼Œéƒ½æ˜¯ä¸€æŠŠè¿‡</code>ã€‚æ¯•ç«Ÿå·¥å…·ç±»äºŒè¿›åˆ¶æ”¹åŠ¨ä¸å¤šï¼Œä¸»è¦æ˜¯ç»´æŠ¤ä¸€äº›ç»†èŠ‚æ€§å…¼å®¹é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e480d8c54baf4902ac123d34489384c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764214504&amp;x-signature=aQlJ7bmrDvfny6INeasW217%2Bm1o%3D" alt="777.png" loading="lazy"/></p>
<p>å€¼å¾—å…³æ³¨çš„æ˜¯ï¼ŒåŸºæœ¬ä¸Šåœ¨16å·ï¼Œï¼ˆå³å‘¨æœ«ï¼‰æäº¤çš„äº§å“ï¼Œ<code>åŸºæœ¬ä¸Šæ²¡æœ‰å¤šä¹…å°±è¿›å…¥æ­£åœ¨å®¡æ ¸çŠ¶æ€</code>ã€‚è¿™ä¸€ç‚¹å’Œä¸Šä¸€æœˆæˆªç„¶ä¸åŒï¼Œå¦‚æœæ˜¯ä¸Šä¸ªæœˆå‘¨æœ«æäº¤çš„äº§å“ï¼Œæ™®éåœ¨å‘¨ä¸‰æ™šä¸Šå·¦å³æ‰ä¼šè¿›å…¥å®¡æ ¸ç¯èŠ‚ã€‚</p>
<h3 data-id="heading-2">å…¶ä½™åˆ†ç±»</h3>





























<table><thead><tr><th>åˆ†ç±»å</th><th>ç­‰å¾…æ—¶é—´</th><th>å®¡æ ¸æ—¶é—´</th><th>è¢«æ‹’æ¬¡æ•°</th></tr></thead><tbody><tr><td>ç”Ÿæ´»</td><td>1 å¤©</td><td>65 åˆ†é’Ÿ</td><td>0</td></tr><tr><td>å¨±ä¹</td><td>2 å¤©åŠ</td><td>45 åˆ†é’Ÿ</td><td>1</td></tr><tr><td>å‚è€ƒ</td><td>1 å¤©åŠ</td><td>90 åˆ†é’Ÿ</td><td>0</td></tr></tbody></table>
<p>åŸºæœ¬ä¸Šæ¥è¯´ï¼Œæ•´ä½“éƒ½éå¸¸é¡ºåˆ©ã€‚å¨±ä¹è¢«æ‹’çš„åŸå› æ˜¯å› ä¸ºæ–‡æ¡ˆè¯´æ˜åŒ…å«äº†"å…è´¹ä½“éªŒ"ç›¸å…³çš„å­—çœ¼ï¼Œæ›´æ–°åˆ°äº†å¸‚åœºæˆªå›¾é‡Œã€‚
<strong>å¯¹äºè‹¹æœæ¥è¯´ï¼Œä¸æ¥å—åœ¨å¸‚åœºå›¾ï¼ŒAPPåç§°ä»¥åŠå‰¯æ ‡é¢˜ï¼Œä½“ç°ä»»ä½•ä»·æ ¼ç›¸å…³çš„å…ƒç´ ã€‚</strong></p>
<p><code>éµå®ˆè§„åˆ™ï¼Œæ–¹å¾—é•¿æ²»ä¹…å®‰</code>ï¼Œæœ€åç¥å¤§å®¶å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šè¿‡å®¡ï¼</p>
<h3 data-id="heading-3">ç›¸å…³æ¨è</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FURmC_4vxQv5ttOg8yYe7Eg" target="_blank" title="https://mp.weixin.qq.com/s/URmC_4vxQv5ttOg8yYe7Eg" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…ç»­è´¹å¤§å‘åŠæˆåŠŸç»­è´¹æ–¹æ¡ˆï¼äº²æµ‹æœ‰æ•ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1bAA90Tzpx03tTHZbdg3aw" target="_blank" title="https://mp.weixin.qq.com/s/1bAA90Tzpx03tTHZbdg3aw" ref="nofollow noopener noreferrer"># AppStoreæ•æ„Ÿè¯æ’æŸ¥æ‰‹å†Œï¼Œå¤šç»´åº¦åˆ†æGuideline 2.3.1éšè—åŠŸèƒ½ï¼Œè½»æ¾è¿‡å®¡ã€‚</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484371%26idx%3D1%26sn%3D33568c58e90a5bf4d2612d803ecb2a27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484371&amp;idx=1&amp;sn=33568c58e90a5bf4d2612d803ecb2a27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœåŠ æ€¥å®¡æ ¸æ˜¯â€œç»¿è‰²é€šé“â€è¿˜æ˜¯â€œæ­»äº¡é™·é˜±â€ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3Dea61bd42d5ae8b99d2a56cbfb8d91e88%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484362&amp;idx=1&amp;sn=ea61bd42d5ae8b99d2a56cbfb8d91e88&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…é‚®ç®±ï¼Œçªç„¶æ”¶åˆ°11.2é€šçŸ¥ä¸¥é‡ä¹ˆï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484413%26idx%3D1%26sn%3D82870d4c8892fa65803a8e05fd5ac938%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484413&amp;idx=1&amp;sn=82870d4c8892fa65803a8e05fd5ac938&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># ä¸æƒ³è¢«è‹¹æœå¡å®¡æœ€å¥½é”™å¼€è¿™ä¸¤ä¸ªæå®¡æ—¶é—´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484349%26idx%3D1%26sn%3D1c75a6b08cb5de64ddf41a88b61ff108%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484349&amp;idx=1&amp;sn=1c75a6b08cb5de64ddf41a88b61ff108&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æ‰‹æ’•è‹¹æœå®¡æ ¸4.3æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡é—®é¢˜ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484344%26idx%3D1%26sn%3D4399eb8d8bf82e9c5df26a18b8564cfb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484344&amp;idx=1&amp;sn=4399eb8d8bf82e9c5df26a18b8564cfb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æœ‰å¹¸å’ŒAppstoreå®¡æ ¸äººå‘˜è¿›è¡Œäº†ä¸€åœºè§†é¢‘ä¼šè®®ç‰¹æ­¤è®°å½•ã€‚</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šå¾€é€šç”¨äººå·¥æ™ºèƒ½çš„å…³é”®ä¸€æ­¥ï¼ŸDeepMindæ”¾å¤§æ‹›ï¼Œ3Dä¸–ç•Œæœ€å¼ºAIæ™ºèƒ½ä½“SIMA 2]]></title>    <link>https://juejin.cn/post/7574584245110603827</link>    <guid>https://juejin.cn/post/7574584245110603827</guid>    <pubDate>2025-11-20T02:55:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245110603827" data-draft-id="7574584245110587443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šå¾€é€šç”¨äººå·¥æ™ºèƒ½çš„å…³é”®ä¸€æ­¥ï¼ŸDeepMindæ”¾å¤§æ‹›ï¼Œ3Dä¸–ç•Œæœ€å¼ºAIæ™ºèƒ½ä½“SIMA 2"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-20T02:55:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šå¾€é€šç”¨äººå·¥æ™ºèƒ½çš„å…³é”®ä¸€æ­¥ï¼ŸDeepMindæ”¾å¤§æ‹›ï¼Œ3Dä¸–ç•Œæœ€å¼ºAIæ™ºèƒ½ä½“SIMA 2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:55:02.000Z" title="Thu Nov 20 2025 02:55:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‚¨çš„ AI ä¼™ä¼´ã€Œæ¸¸æˆé™ªç©ã€ç‰ˆå·²ä¸Šçº¿ã€‚</p>
<p>ä»Šå¤©ï¼ŒGoogle DeepMind å‘å¸ƒäº†Â SIMA 2ï¼Œä¸€ä¸ªåœ¨è™šæ‹Ÿ 3D ä¸–ç•Œä¸­èƒ½è‡ªä¸»æ¸¸æˆã€æ¨ç†å¹¶æŒç»­å­¦ä¹ çš„é€šç”¨ AI æ™ºèƒ½ä½“ã€‚</p>
<p>DeepMind åˆ›å§‹äººå“ˆè¨æ¯”æ–¯å°†å…¶å®šä¹‰ä¸ºé€šå¾€é€šç”¨äººå·¥æ™ºèƒ½çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4faaa4fb84c34148b8a8c6949fa44cc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=Gvmmb%2FN%2FL0sXWeA%2BokdC4ebcLxg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å»å¹´ï¼Œè°·æ­Œ DeepMind æ¨å‡ºäº† SIMA ï¼ˆScalable Instructable Multiworld Agentï¼Œå¯æ‰©å±•ã€å¯æŒ‡å¯¼çš„å¤šä¸–ç•Œæ™ºèƒ½ä½“ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè·¨è¶Šå¤šç§è™šæ‹Ÿç¯å¢ƒã€éµå¾ªåŸºæœ¬æŒ‡ä»¤çš„é€šæ‰ AIï¼Œæ ‡å¿—ç€ AI åœ¨ 3D ä¸–ç•Œä¸­å°†è¯­è¨€è½¬åŒ–ä¸ºè¡ŒåŠ¨çš„åˆæ­¥æ¢ç´¢ã€‚</p>
<p>SIMA 2 åˆ™ä»£è¡¨äº†è¿™ä¸€ç ”ç©¶çš„é‡å¤§é£è·ƒï¼Œæ˜¯åˆ›å»ºé€šç”¨å’Œæœ‰ç›Š AI æ™ºèƒ½ä½“ç ”ç©¶çš„ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚é€šè¿‡é›†æˆ Gemini æ¨¡å‹çš„å…ˆè¿›èƒ½åŠ›ï¼ŒSIMA æ­£åœ¨ä»ä¸€ä¸ªè¢«åŠ¨çš„ã€æ¨¡ä»¿äººç±»æ“ä½œçš„æŒ‡ä»¤éµå¾ªè€…è¿›åŒ–ä¸ºä¸€ä¸ªäº¤äº’å¼çš„æ¸¸æˆä¼´ä¾£ã€‚</p>
<p>SIMA 2 ä¸ä»…èƒ½éµå¾ªäººç±»æŒ‡ä»¤ï¼Œè¿˜èƒ½åœ¨æœªè§è¿‡çš„å¤æ‚ç¯å¢ƒä¸­ï¼ˆå¦‚å„ç§å¼€æ”¾ä¸–ç•Œæ¸¸æˆï¼‰è¿›è¡Œè‡ªä¸»è§„åˆ’ã€è§£é‡Šè¡ŒåŠ¨æ­¥éª¤ã€ä¸ç”¨æˆ·å®æ—¶å¯¹è¯ï¼ˆæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³æˆ–å›¾åƒè¾“å…¥ï¼‰ï¼Œå¹¶é€šè¿‡è¯•é”™ä¸ Gemini åé¦ˆçš„é—­ç¯æœºåˆ¶è‡ªæˆ‘è¿­ä»£ï¼Œæå‡æŠ€èƒ½ã€‚</p>
<p>è¿™å¯¹æœºå™¨äººæŠ€æœ¯å’Œäººå·¥æ™ºèƒ½çš„æœªæ¥å…·æœ‰é‡è¦æ„ä¹‰ï¼Œå› ä¸ºå®ƒæ­£åœ¨æ„å»ºæœªæ¥ç‰©ç†ä¸–ç•Œæ™ºèƒ½ä½“æ‰€éœ€çš„æ ¸å¿ƒã€Œè®¤çŸ¥æ„å»ºæ¨¡å—ã€ã€‚</p>
<p>è¯„è®ºåŒºä¹Ÿå¯¹å®ƒçš„åº”ç”¨è¿›è¡Œäº†å¤§èƒ†æ„æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59b304dd3e2f4fd08e1403e7ef43a324~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=vYE%2FB0A2NROFNhVA%2FFbH5LbsKs4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥æ˜¯ GTA 6 å…ˆå‘å¸ƒï¼Œè¿˜æ˜¯ AGI å…ˆå®ç°ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f513c6b9d5e46589d3c3f688fee73c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=2Ju2jFv%2F%2FjKlun0ubtJpDL60mYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¨ç†çš„åŠ›é‡</p>
<p>ç¬¬ä¸€ç‰ˆ SIMA å­¦ä¼šäº†åœ¨å„ç§å•†ä¸šè§†é¢‘æ¸¸æˆä¸­æ‰§è¡Œè¶…è¿‡ 600 ç§è¯­è¨€éµå¾ªæŠ€èƒ½ï¼Œå¦‚ã€Œå·¦è½¬ã€ã€ã€Œçˆ¬æ¢¯å­ã€å’Œã€Œæ‰“å¼€åœ°å›¾ã€ã€‚å®ƒåƒäººä¸€æ ·åœ¨è¿™äº›ç¯å¢ƒä¸­æ“ä½œï¼Œé€šè¿‡ã€ŒæŸ¥çœ‹ã€å±å¹•å¹¶ä½¿ç”¨è™šæ‹Ÿé”®ç›˜å’Œé¼ æ ‡è¿›è¡Œå¯¼èˆªï¼Œè€Œæ— éœ€è®¿é—®åº•å±‚çš„æ¸¸æˆæœºåˆ¶ã€‚</p>
<p>å°½ç®¡ SIMA 1 æ˜¯ä¼˜ç§€çš„ã€ŒæŠ€èƒ½æ‰§è¡Œè€…ã€ï¼Œä½†å®ƒç¼ºä¹æ·±åº¦è§„åˆ’å’Œæ„å›¾ç†è§£ï¼Œä»…é™äºè¢«åŠ¨æ¨¡ä»¿ã€‚</p>
<p>SIMA 2 åˆ™æ ‡å¿—ç€ä»æŒ‡ä»¤è·Ÿéšåˆ°ä¸»åŠ¨è®¤çŸ¥çš„è·ƒè¿›ã€‚é€šè¿‡åµŒå…¥ Gemini æ¨¡å‹ä½œä¸ºæ ¸å¿ƒå¼•æ“ï¼ŒSIMA 2 ä¸ä»…å“åº”æŒ‡ä»¤ï¼Œè¿˜èƒ½è¿›è¡Œå¤šæ­¥éª¤æ¨ç†ï¼šä»è¯­è¨€è§£ææ„å›¾ã€åˆ¶å®šè®¡åˆ’ï¼Œåˆ°æ‰§è¡Œè¡ŒåŠ¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66cdda03fa3443119d64640fbe1bcf37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=hxz%2Fv%2Bsas%2BMX%2BZO%2FaFJRgLFQ5hA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MineDojoï¼šSIMA 1ï¼ˆå·¦ï¼‰å°è¯•æ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼ŒSIMA 2ï¼ˆå³ï¼‰åœ¨ä»æœªè§è¿‡çš„æ¸¸æˆä¸­æˆåŠŸå®Œæˆä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3af662128bf4988a0de635e98015ca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=9Sbgl7BDWyZy5EV6TwQEBKBmFu0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ASKAï¼šSIMA 1ï¼ˆå·¦ï¼‰å°è¯•æ‰§è¡Œã€Œå¯»æ‰¾ç¯ç«ã€æŒ‡ä»¤æ—¶ï¼ŒSIMA 2ï¼ˆå³ï¼‰åœ¨ä»æœªè§è¿‡çš„æ¸¸æˆä¸­æˆåŠŸå®Œæˆä»»åŠ¡ã€‚</p>
<p>SIMA 2 çš„æ–°æ¶æ„é›†æˆäº† Gemini å¼ºå¤§çš„æ¨ç†èƒ½åŠ›ï¼Œå¸®åŠ©å®ƒç†è§£ç”¨æˆ·çš„é«˜çº§åˆ«ç›®æ ‡ï¼Œåœ¨è¿½æ±‚ç›®æ ‡è¿‡ç¨‹ä¸­æ‰§è¡Œå¤æ‚çš„æ¨ç†ï¼Œå¹¶åœ¨æ¸¸æˆä¸­ç†Ÿç»ƒæ‰§è¡Œä»¥ç›®æ ‡ä¸ºå¯¼å‘çš„è¡ŒåŠ¨ã€‚å®ƒå°† SIMA 1 çš„ è¯­è¨€ -&gt; è¡ŒåŠ¨ æ¨¡å¼ï¼Œå‡çº§ä¸ºäº† è¯­è¨€ -&gt; æ„å›¾ -&gt; è®¡åˆ’ -&gt; è¡ŒåŠ¨ çš„å¤šæ­¥éª¤è®¤çŸ¥é“¾ã€‚</p>
<p>DeepMind ä½¿ç”¨æ··åˆæ•°æ®è®­ç»ƒäº† SIMA 2ï¼ŒåŒ…æ‹¬å¸¦è¯­è¨€æ ‡ç­¾çš„äººç±»æ¼”ç¤ºè§†é¢‘ä»¥åŠ Gemini ç”Ÿæˆçš„æ ‡ç­¾ã€‚å› æ­¤ï¼ŒSIMA 2 ç°åœ¨å¯ä»¥å‘ç”¨æˆ·æè¿°å®ƒæ‰“ç®—åšä»€ä¹ˆï¼Œå¹¶è¯¦ç»†è¯´æ˜å®ƒä¸ºå®ç°ç›®æ ‡æ­£åœ¨é‡‡å–çš„æ­¥éª¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fb88663d1524e1db7dec9f34437a3c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=fghL%2FsfkJ6gYfWHxQMhtxBf%2B6c8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¶…è¶Šç®€å•çš„æŒ‡ä»¤è·Ÿéšï¼šSIMA 2 ä¸ä»…èƒ½å›ç­”ç”¨æˆ·é—®é¢˜ï¼Œè¿˜èƒ½å¯¹å…¶è‡ªèº«è¡Œä¸ºåŠæ‰€å¤„ç¯å¢ƒè¿›è¡Œæ¨ç†ã€‚</p>
<p>åœ¨æµ‹è¯•ä¸­ï¼ŒDeepMind å‘ç°ä¸è¯¥æ™ºèƒ½ä½“äº’åŠ¨çš„æ„Ÿè§‰ï¼Œæ›´åƒæ˜¯ä¸ä¸€ä¸ªèƒ½å¤Ÿå¯¹å½“å‰ä»»åŠ¡è¿›è¡Œæ¨ç†çš„ä¼™ä¼´åˆä½œï¼Œè€Œä¸æ˜¯å‘å®ƒä¸‹è¾¾å‘½ä»¤ã€‚</p>
<p>å¹¶ä¸”ï¼Œå¾—ç›Šäº DeepMind ä¸ç°æœ‰åŠæ–°æ¸¸æˆåˆä½œä¼™ä¼´çš„åˆä½œï¼ŒDeepMind å·²ç»èƒ½å¤Ÿåœ¨æ›´å¹¿æ³›çš„æ¸¸æˆä¸Šè®­ç»ƒå’Œè¯„ä¼° SIMA 2ã€‚</p>
<p>è¿™å°±æ˜¯ Gemini ä¸ºå…·èº« AI å¸¦æ¥çš„åŠ›é‡ï¼šä¸€ä¸ªä¸–ç•Œçº§çš„æ¨ç†å¼•æ“ï¼Œç°åœ¨èƒ½å¤Ÿåœ¨å¤æ‚çš„äº¤äº’å¼ 3D ç¯å¢ƒä¸­æ„ŸçŸ¥ã€ç†è§£å¹¶é‡‡å–è¡ŒåŠ¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9d914134d39434093ef8ae8329bd32c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=Fxb%2Fj0d9CjPMnmuX8sLHFPD0aNw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>SIMA 2 é€šè¿‡åˆ†æç¯å¢ƒä¸ç”¨æˆ·æ„å›¾ï¼Œèƒ½å¤Ÿç†è§£æŠ½è±¡æ¦‚å¿µå¹¶æ‰§è¡Œé€»è¾‘æŒ‡ä»¤ã€‚</p>
<p>æ³›åŒ–æ€§èƒ½çš„é£è·ƒ</p>
<p>Gemini çš„åŠ å…¥ä¹Ÿå¸¦æ¥äº†æ³›åŒ–èƒ½åŠ›å’Œå¯é æ€§çš„æå‡ã€‚SIMA 2 ç°åœ¨èƒ½æ¯”å…¶å‰èº«ç†è§£æ›´å¤æ‚ã€æ›´ç»†å¾®çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œè¿™äº›æŒ‡ä»¤æ—¶æˆåŠŸç‡æ›´é«˜ï¼Œå°¤å…¶æ˜¯åœ¨é‚£äº›å®ƒä»æœªè®­ç»ƒè¿‡çš„æƒ…æ™¯æˆ–æ¸¸æˆä¸­ï¼Œä¾‹å¦‚æ–°çš„ç»´äº¬ç”Ÿå­˜æ¸¸æˆ ASKAï¼Œæˆ– MineDojoï¼ˆä¸€ä¸ªæµè¡Œå¼€æ”¾ä¸–ç•Œæ²™ç›’æ¸¸æˆ Minecraft çš„ç ”ç©¶ç”¨å®ç°ï¼‰ã€‚</p>
<ul>
<li>SIMA 2 èƒ½å¤Ÿç†è§£å¹¶å®Œæˆé•¿æœŸä¸”å¤æ‚çš„ä»»åŠ¡</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7378c5027404257acb5067b00857652~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=O1nigpLlN61MOXasHpWBl6RKAF4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>SIMA 2 èƒ½å¤ŸæˆåŠŸæ‰§è¡Œé•¿è€Œå¤æ‚çš„æŒ‡ä»¤ã€‚</p>
<ul>
<li>SIMA 2 èƒ½å¤Ÿç†è§£å¤šæ¨¡æ€æç¤º</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be72794a1c0841a8b516aa5709fc05eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=%2BRMYO51LljdW7%2FG0snlHbRB%2B55c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”¨æˆ·æ­£åœ¨å±å¹•ä¸Šç»˜åˆ¶è‰å›¾ã€‚</p>
<ul>
<li>SIMA 2 èƒ½å¤Ÿç†è§£ä¸åŒçš„è¯­è¨€ç”šè‡³è¡¨æƒ…ç¬¦å·</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2339355c7774843b7ef05d45c480a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=dVDQ2EBw5XyH24Hs8YHyK%2FVNUbU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çœ‹å®ƒå¦‚ä½•æ­£ç¡®è§£è¯»è¡¨æƒ…ç¬¦å·æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>æ­¤å¤–ï¼Œå®ƒè¿ç§»å­¦ä¹ æ¦‚å¿µçš„èƒ½åŠ›â€”â€”ä¾‹å¦‚ï¼Œå°†å…¶åœ¨ä¸€ç§æ¸¸æˆä¸­å¯¹ã€Œé‡‡çŸ¿ã€çš„ç†è§£åº”ç”¨åˆ°å¦ä¸€ç§æ¸¸æˆä¸­çš„ã€Œæ”¶è·ã€â€”â€”æ˜¯å®ç°åƒäººç±»è®¤çŸ¥ä¸­é‚£æ ·çš„å¹¿æ³›æ³›åŒ–èƒ½åŠ›çš„åŸºç¡€ã€‚äº‹å®ä¸Šï¼Œç”±äºè¿™ç§èƒ½åŠ›ï¼ŒSIMA 2 åœ¨å¤šç§ä»»åŠ¡ä¸Šçš„è¡¨ç°å·²æ˜¾è‘—æ¥è¿‘äººç±»ç©å®¶çš„æ°´å¹³ã€‚</p>
<p>ç»ˆææµ‹è¯•ï¼šåœ¨å…¨æ–°æ„æƒ³çš„ä¸–ç•Œä¸­æ¸¸æˆ</p>
<p>ä¸ºäº†æµ‹è¯• SIMA 2 æ³›åŒ–èƒ½åŠ›çš„æé™ï¼ŒDeepMind å°†å…¶ä¸å¦ä¸€ä¸ªçªç ´æ€§ç ”ç©¶é¡¹ç›® Genie 3 ç›¸ç»“åˆï¼Œåè€…å¯ä»¥ä»å•ä¸ªå›¾åƒæˆ–æ–‡æœ¬æç¤ºç”Ÿæˆæ–°çš„ã€å®æ—¶çš„ 3D æ¨¡æ‹Ÿä¸–ç•Œã€‚</p>
<p>å½“ DeepMind æŒ‘æˆ˜ SIMA 2 åœ¨è¿™äº›æ–°ç”Ÿæˆçš„ä¸–ç•Œä¸­æ¸¸æˆæ—¶ï¼ŒDeepMind å‘ç°å®ƒèƒ½å¤Ÿåˆç†åœ°ç¡®å®šè‡ªå·±çš„æ–¹ä½ã€ç†è§£ç”¨æˆ·æŒ‡ä»¤ï¼Œå¹¶æœç€ç›®æ ‡é‡‡å–æœ‰æ„ä¹‰çš„è¡ŒåŠ¨ï¼Œå°½ç®¡å®ƒä»¥å‰ä»æœªè§è¿‡è¿™æ ·çš„ç¯å¢ƒã€‚å®ƒå±•ç°äº†å‰æ‰€æœªæœ‰çš„é€‚åº”èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/233ac0648d07491daf4b90acd6225210~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=51Z%2BGWNyjzQr0YNBHcuLLephtus%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>SIMA 2 åœ¨ Genie 3 ç”Ÿæˆçš„æ–°ä¸–ç•Œä¸­è¿è¡Œ</p>
<p>è¿ˆå‘å¯æ‰©å±•ã€å¤šä»»åŠ¡çš„è‡ªæˆ‘æå‡</p>
<p>SIMA 2 æœ€ä»¤äººå…´å¥‹çš„æ–°èƒ½åŠ›ä¹‹ä¸€æ˜¯å…¶è‡ªæˆ‘æå‡çš„èƒ½åŠ›ã€‚DeepMind è§‚å¯Ÿåˆ°ï¼Œåœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒSIMA 2 æ™ºèƒ½ä½“èƒ½å¤Ÿæ‰§è¡Œæ—¥ç›Šå¤æ‚å’Œæ–°é¢–çš„ä»»åŠ¡ï¼Œè¿™æ˜¯é€šè¿‡è¯•é”™æ³•å’ŒåŸºäº Gemini çš„åé¦ˆè‡ªä¸¾å®ç°çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨æœ€åˆä»äººç±»æ¼”ç¤ºä¸­å­¦ä¹ åï¼ŒSIMA 2 å¯ä»¥è¿‡æ¸¡åˆ°å®Œå…¨é€šè¿‡è‡ªæˆ‘å¯¼å‘çš„æ¸¸æˆåœ¨æ–°æ¸¸æˆä¸­å­¦ä¹ ï¼Œåœ¨ä»¥å‰æœªè§è¿‡çš„ä¸–ç•Œä¸­å‘å±•å…¶æŠ€èƒ½ï¼Œè€Œæ— éœ€é¢å¤–çš„äººç±»ç”Ÿæˆæ•°æ®ã€‚åœ¨åç»­è®­ç»ƒä¸­ï¼ŒSIMA 2 è‡ªèº«çš„ç»éªŒæ•°æ®å¯ç”¨äºè®­ç»ƒä¸‹ä¸€ä¸ªã€èƒ½åŠ›æ›´å¼ºçš„æ™ºèƒ½ä½“ç‰ˆæœ¬ã€‚DeepMind ç”šè‡³èƒ½å¤Ÿåœ¨æ–°åˆ›å»ºçš„ Genie ç¯å¢ƒä¸­åˆ©ç”¨ SIMA 2 çš„è‡ªæˆ‘æå‡èƒ½åŠ›â€”â€”è¿™æ˜¯åœ¨å¤šæ ·åŒ–çš„ã€ç”Ÿæˆçš„ä¸–ç•Œä¸­è®­ç»ƒé€šç”¨æ™ºèƒ½ä½“çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70cd026f5e3c47a98990cf1a263a35f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=U1Tf3Tx6fKRuBl58V123wrDZzd4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç§è¿­ä»£æ”¹è¿›çš„è‰¯æ€§å¾ªç¯ä¸ºæœªæ¥é“ºå¹³äº†é“è·¯ï¼Œå³æ™ºèƒ½ä½“å¯ä»¥ä»¥æœ€å°‘çš„äººå·¥å¹²é¢„è¿›è¡Œå­¦ä¹ å’Œæˆé•¿ï¼Œæˆä¸ºå…·èº« AI é¢†åŸŸçš„å¼€æ”¾å¼å­¦ä¹ è€…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93b2c674a0784fb8bf93dd8cfaa3937e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212102&amp;x-signature=gP%2FfR0B4nPBxzTvAfTqI0nlh5qQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ASKAï¼šå·¦ä¾§å±•ç¤ºçš„æ˜¯åˆä»£ SIMA 2 æ™ºèƒ½ä½“å¤±è´¥çš„ä»»åŠ¡æ¡ˆä¾‹ï¼Œå³ä¾§åˆ™æ˜¾ç¤ºç»è¿‡å¤šä»£è®­ç»ƒåï¼ŒSIMA 2 åœ¨å®Œå…¨æ— éœ€äººç±»åé¦ˆæˆ–æ¸¸æˆæ•°æ®çš„æƒ…å†µä¸‹å®ç°äº†è‡ªæˆ‘è¿›åŒ–ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼šé€šå¾€é€šç”¨å…·èº«æ™ºèƒ½çš„æ—…ç¨‹</p>
<p>SIMA 2 è·¨è¶Šä¸åŒæ¸¸æˆç¯å¢ƒçš„æ“ä½œèƒ½åŠ›ï¼Œæ˜¯é€šç”¨æ™ºèƒ½çš„ä¸€ä¸ªå…³é”®è¯•éªŒåœºï¼Œå®ƒå…è®¸æ™ºèƒ½ä½“æŒæ¡æŠ€èƒ½ã€ç»ƒä¹ å¤æ‚æ¨ç†ï¼Œå¹¶é€šè¿‡è‡ªæˆ‘å¯¼å‘çš„æ¸¸æˆæŒç»­å­¦ä¹ ã€‚</p>
<p>è™½ç„¶ SIMA 2 æ˜¯è¿ˆå‘é€šæ‰å‹ã€äº¤äº’å¼ã€å…·èº«æ™ºèƒ½çš„é‡è¦ä¸€æ­¥ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€é¡¹ç ”ç©¶å·¥ä½œï¼Œå…¶ç›®å‰çš„å±€é™æ€§çªæ˜¾äº†æœªæ¥å·¥ä½œçš„å…³é”®é¢†åŸŸã€‚</p>
<p>DeepMind å‘ç°ï¼Œè¿™äº›æ™ºèƒ½ä½“åœ¨å¤„ç†éœ€è¦å¤§é‡ã€å¤šæ­¥éª¤æ¨ç†å’Œç›®æ ‡éªŒè¯çš„è¶…é•¿æ—¶ç¨‹å¤æ‚ä»»åŠ¡æ—¶ä»é¢ä¸´æŒ‘æˆ˜ã€‚SIMA 2 å¯¹å…¶äº¤äº’çš„è®°å¿†ä¹Ÿç›¸å¯¹è¾ƒçŸ­â€”â€”å®ƒå¿…é¡»ä½¿ç”¨æœ‰é™çš„ä¸Šä¸‹æ–‡çª—å£æ¥å®ç°ä½å»¶è¿Ÿäº¤äº’ã€‚æœ€åï¼Œé€šè¿‡é”®ç›˜å’Œé¼ æ ‡ç•Œé¢æ‰§è¡Œç²¾ç¡®çš„ä½çº§åˆ«æ“ä½œï¼Œä»¥åŠå®ç°å¯¹å¤æ‚ 3D åœºæ™¯çš„ç¨³å¥è§†è§‰ç†è§£ï¼Œä»ç„¶æ˜¯æ•´ä¸ªé¢†åŸŸåœ¨æŒç»­åº”å¯¹çš„å¼€æ”¾æ€§æŒ‘æˆ˜ã€‚</p>
<p>è¿™é¡¹ç ”ç©¶ä¸ºé¢å‘è¡ŒåŠ¨çš„ AI æä¾›äº†ä¸€æ¡æ–°è·¯å¾„çš„åŸºç¡€éªŒè¯ã€‚SIMA 2 è¯å®ï¼Œä¸€ä¸ªåˆ©ç”¨å¤šæ ·åŒ–çš„å¤šä¸–ç•Œæ•°æ®å’Œ Gemini å¼ºå¤§æ¨ç†èƒ½åŠ›ã€ä¸ºå®ç°å¹¿æ³›èƒ½åŠ›è€Œè®­ç»ƒçš„ AIï¼Œå¯ä»¥æˆåŠŸåœ°å°†è®¸å¤šä¸“ç”¨ç³»ç»Ÿçš„èƒ½åŠ›ç»Ÿä¸€åˆ°ä¸€ä¸ªè¿è´¯çš„ã€é€šæ‰å‹çš„æ™ºèƒ½ä½“ä¸­ã€‚</p>
<p>SIMA 2 ä¹Ÿä¸ºæœºå™¨äººæŠ€æœ¯çš„åº”ç”¨æä¾›äº†åšå®çš„è·¯å¾„ã€‚å®ƒå­¦åˆ°çš„æŠ€èƒ½â€”â€”ä»å¯¼èˆªã€å·¥å…·ä½¿ç”¨åˆ°åä½œä»»åŠ¡æ‰§è¡Œâ€”â€”éƒ½æ˜¯æœªæ¥ç‰©ç†ä¸–ç•Œ AI åŠ©æ‰‹æ‰€éœ€çš„æ™ºèƒ½ç‰©ç†å…·èº«åŒ–çš„ä¸€äº›åŸºæœ¬æ„å»ºæ¨¡å—ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fblog%2Fsima-2-an-agent-that-plays-reasons-and-learns-with-you-in-virtual-3d-worlds%2F%3Futm_source%3Dx%26utm_medium%3Dsocial%26utm_campaign%3D%26utm_content%3D" target="_blank" title="https://deepmind.google/blog/sima-2-an-agent-that-plays-reasons-and-learns-with-you-in-virtual-3d-worlds/?utm_source=x&amp;utm_medium=social&amp;utm_campaign=&amp;utm_content=" ref="nofollow noopener noreferrer">deepmind.google/blog/sima-2â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Ÿä»€ä¹ˆæ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ŸäºŒè€…æœ‰ä½•åŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7574448424998109220</link>    <guid>https://juejin.cn/post/7574448424998109220</guid>    <pubDate>2025-11-20T03:47:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574448424998109220" data-draft-id="7574380953175883818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Ÿä»€ä¹ˆæ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ŸäºŒè€…æœ‰ä½•åŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-20T03:47:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Ÿä»€ä¹ˆæ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ŸäºŒè€…æœ‰ä½•åŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:47:05.000Z" title="Thu Nov 20 2025 03:47:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¼•è¨€</strong>ï¼šä»Šå¤©æˆ‘ä»¬åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†è®²AIå¤§æ¨¡å‹çš„çŸ¥è¯†ç‚¹ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Œç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€‚</p>
<p><strong>ä¸€ã€æ³¨æ„åŠ›æœºåˆ¶</strong></p>
<p><strong>01 ä¸€å¥è¯ç§’æ‡‚</strong></p>
<p>æ³¨æ„åŠ›æœºåˆ¶=è®©AIå­¦ä¼š"æŠ“é‡ç‚¹"çš„é­”æ³•!</p>
<p>å¯ä»¥ç®€å•ç†è§£ä¸º"å­¦éœ¸åˆ’é‡ç‚¹"ã€‚</p>
<p>å°±åƒæˆ‘ä»¬åœ¨è¯»ä¹¦æ—¶ç”¨è§å…‰ç¬”æ ‡å…³é”®å¥å’Œé‡è¦çŸ¥è¯†ç‚¹ï¼ŒAIä¹Ÿä¸»è¦ç”¨æ³¨æ„åŠ›æœºåˆ¶å†³å®š"å“ªäº›ä¿¡æ¯å€¼å¾—æ”¾å¤§çœ‹"~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de72ba7e32674a24a73015b928252a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=DY5O1zadH0WvZU03f5dxXo8uPVE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>02 åŸç†æ‹†è§£</strong></p>
<p><strong>è¾“å…¥</strong>: ä¸€æ®µä¿¡æ¯(æ¯”å¦‚"æˆ‘çˆ±åƒç‚¸é¸¡")</p>
<p><strong>è®¡ç®—æƒé‡</strong>: æ¯ä¸ªå­—åˆ†é…æ³¨æ„åŠ›çš„åˆ†æ•°ï¼Œâ€œç‚¸é¸¡"åˆ†æ•°UP!"æˆ‘"åˆ†æ•°DOWN...</p>
<p><strong>åŠ æƒè¾“å‡º</strong>: é«˜åˆ†ä¿¡æ¯ä¼šè¢«å¼ºåŒ–å¤„ç†ï¼Œæœ€ç»ˆAIä¸ä»…è®°ä½å¥å­ï¼Œè¿˜èƒ½getåˆ°ã€Œç‚¸é¸¡æ‰æ˜¯çµé­‚ã€!</p>
<p><strong>03 ä¸ºä»€ä¹ˆé¢ è¦†ä¼ ç»Ÿ?</strong></p>
<p><strong>æ—§ç‰ˆRNN</strong>: å¼ºè¿«ç—‡å¼é€å­—å¤„ç†ï¼Œè®°ä¸ä½é•¿æ–‡æœ¬;æ¯ä¸ªå­—å¹³ç­‰å¯¹å¾…â†’å­¦å¾—æ…¢è¿˜æŠ“ä¸ä½é‡ç‚¹</p>
<p><strong>æ³¨æ„åŠ›æœºåˆ¶</strong>: ä¸€ç§’æ‰«æå…¨å±€ï¼ŒåŠ¨æ€é”å®šå…³é”®ä¿¡æ¯;åŠ¨æ€æƒé‡åˆ†é…â†’å“ªé‡Œé‡è¦ç‚¹å“ªé‡Œ!</p>
<p>å°±åƒå­¦æ¸£VSå­¦éœ¸çš„ç¬”è®°å·®åˆ«</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/216d804c5c7349dfbb049dc19f7de17b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=ObZ797Lw4g1gLbKx9tmWC1h5gP4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>04 ä¸¾ä¸ªæ —å­</strong></p>
<p>è¾“å…¥: â€œæˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨â€</p>
<p>æ¨¡å‹å†…å¿ƒOS:</p>
<p>"çˆ±"è¦é‡ç‚¹çœ‹(æƒ…æ„Ÿæ ¸å¿ƒ)</p>
<p>"åŒ—äº¬"å’Œ"å¤©å®‰é—¨"ç–¯ç‹‚æ‰“call(å®ä½“å…³è”)</p>
<p>"æˆ‘"ç¨å¾®è®°ä¸€ä¸‹å°±è¡Œ(ä¸»è¯­å¸¸è§„æ“ä½œ)</p>
<p><strong>05 æ ¸å¿ƒæŠ€æœ¯è§£æ</strong></p>
<p>1ï¼‰æ ¸å¿ƒæ€æƒ³</p>
<p>é€šè¿‡åŠ¨æ€æƒé‡åˆ†é…ï¼Œè®©ç¥ç»ç½‘ç»œåœ¨å¤„ç†åºåˆ—æ•°æ®æ—¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹ä¸åŒä½ç½®çš„ä¿¡æ¯åˆ†é…ä¸åŒçš„å…³æ³¨åº¦(attention)ã€‚ç±»æ¯”äººç±»é˜…è¯»æ—¶å¯¹å…³é”®è¯çš„é‡ç‚¹å…³æ³¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dadf8ab43fd43179374ab6d297bc862~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=hZG5wtz6aWzelOa7wZzj5FBBqJU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>2ï¼‰æ ¸å¿ƒç»„ä»¶</p>
<p>QKVçŸ©é˜µ(Query-Key-Value):</p>
<p><strong>Query</strong>: å½“å‰å¤„ç†ä½ç½®çš„è¡¨ç¤ºå‘é‡(éœ€è¦æŸ¥æ‰¾ä»€ä¹ˆ)</p>
<p><strong>Key</strong>: æ‰€æœ‰ä½ç½®çš„ç´¢å¼•å‘é‡(èƒ½æä¾›ä»€ä¹ˆä¿¡æ¯)</p>
<p><strong>Value</strong>: å®é™…æºå¸¦çš„ä¿¡æ¯å‘é‡(æœ€ç»ˆä¼ é€’çš„ä¿¡æ¯)</p>
<p>ä¸‰è€…å‡é€šè¿‡çº¿æ€§å˜æ¢ä»è¾“å…¥å‘é‡è·å¾—ï¼Œå…±äº«åŒä¸€ç»„è¾“å…¥ä½†æ‰¿æ‹…ä¸åŒè§’è‰²</p>
<p>3ï¼‰è®¡ç®—è¿‡ç¨‹</p>
<p>Step 1: <strong>ç›¸ä¼¼åº¦è®¡ç®—</strong>: é€šè¿‡Queryä¸æ‰€æœ‰Keyçš„ç‚¹ç§¯è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</p>
<p>Step 2: <strong>æƒé‡å½’ä¸€åŒ–</strong>: ä½¿ç”¨Softmaxå‡½æ•°å°†åˆ†æ•°è½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒ: AttentionWeights=Softmax(Score)</p>
<p>Step 3: <strong>ä¿¡æ¯èšåˆ</strong>: åŠ æƒæ±‚å’ŒValueå‘é‡: 0utput=Î£(Attention Weights * Value)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c37028f55e0f4a2592eae59136f69987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=bQv0BN7xrjdHDineX9GwxuUjQ7I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>4ï¼‰å¤šå¤´æ³¨æ„åŠ›(Multi-Head)</p>
<p>å¹¶è¡Œå¤šä¸ªç‹¬ç«‹çš„OKVè®¡ç®—é€šé“</p>
<p>æ¯ä¸ª"å¤´"å­¦ä¹ ä¸åŒçš„è¯­ä¹‰ç©ºé—´å…³ç³»</p>
<p>æœ€ç»ˆæ‹¼æ¥æ‰€æœ‰å¤´çš„è¾“å‡ºå¹¶é€šè¿‡çº¿æ€§å±‚èåˆ</p>
<p>5ï¼‰æ ¸å¿ƒä¼˜åŠ¿</p>
<p><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>: æ¯ä¸ªè¯çš„è¡¨ç¤ºåŠ¨æ€ä¾èµ–ä¸Šä¸‹æ–‡</p>
<p><strong>å¹¶è¡Œè®¡ç®—</strong>: çªç ´RNNçš„åºåˆ—ä¾èµ–é™åˆ¶</p>
<p><strong>é•¿ç¨‹ä¾èµ–</strong>: ç›´æ¥å»ºç«‹ä»»æ„ä½ç½®å…³è”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a4e3b55bd77449fa876eaf729adef1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=YwWzJrJfHOxnvxmM5PVLMnnoGpo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>6ï¼‰å®é™…åº”ç”¨ç†è§£</p>
<p>å½“å¤„ç†å¥å­"The animal didn't cross the street because it was tootired"æ—¶:</p>
<p>"it"çš„Queryä¼šä¸"animal"çš„Keyäº§ç”Ÿé«˜ç›¸å…³æ€§</p>
<p>è‡ªåŠ¨æ¶ˆé™¤æŒ‡ä»£æ­§ä¹‰ï¼Œè€ŒéåƒRNNéœ€è¦é€æ­¥ä¼ é€’çŠ¶æ€</p>
<p>é€šè¿‡å¤šå¤´æœºåˆ¶ï¼ŒåŒæ—¶æ•è·è¯­æ³•ç»“æ„å’Œè¯­ä¹‰å…³è”</p>
<p><strong>äºŒã€è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong></p>
<p><strong>1ã€è‡ªæ³¨æ„åŠ›æœºåˆ¶æ˜¯ä»€ä¹ˆ?</strong></p>
<p>è‡ªæ³¨æ„åŠ›æœºåˆ¶å°±åƒâ€œä¿¡æ¯å…³è”é›·è¾¾â€ã€‚å‡è®¾ä½ åœ¨è¯»ä¸€å¥è¯ï¼Œæ¯ä¸ªè¯éƒ½ä¼šè‡ªåŠ¨æ‰«ææ•´å¥è¯çš„å…¶ä»–è¯ï¼Œæ‰¾å‡ºå“ªäº›è¯å’Œè‡ªå·±ç›¸å…³(æ¯”å¦‚â€œçŒ«â€ä¼šæ›´å…³æ³¨â€œæŠ“"è€é¼ â€)ã€‚é€šè¿‡åŠ¨æ€è®¡ç®—æƒé‡ï¼Œæ¨¡å‹å†³å®šåœ¨ç†è§£å½“å‰è¯æ—¶ï¼Œåº”è¯¥â€œé‡è§†â€œå“ªäº›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c1797787ddd42b19fecfc8b0bdce3e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=DyqZloisIf1hIVlJp%2BsbetSuHP0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æŠ€æœ¯å®šä¹‰</strong></p>
<p>è‡ªæ³¨æ„åŠ›(Self-Attention)æ˜¯è®©è¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ (å¦‚å•è¯)é€šè¿‡<strong>æŸ¥è¯¢(Query)ã€é”®(Key)ã€å€¼(Value)</strong> å‘é‡ï¼Œä¸å…¶ä»–å…ƒç´ è®¡ç®—ç›¸å…³æ€§æƒé‡ï¼Œæœ€ç»ˆåŠ æƒèšåˆå…¨å±€ä¿¡æ¯çš„æœºåˆ¶ã€‚</p>
<p><strong>2ã€è‡ªæ³¨æ„åŠ›çš„å·¥ä½œåŸç†(ç®€åŒ–ç‰ˆ)</strong></p>
<p>è¾“å…¥å¤„ç†</p>
<p>æ¯ä¸ªè¯(å¦‚â€œçŒ«â€)è¢«è½¬æ¢ä¸ºä¸‰ä¸ªå‘é‡:</p>
<p>Query(è¦æ‰¾ä»€ä¹ˆ)</p>
<p>Key(èƒ½æä¾›ä»€ä¹ˆ)</p>
<p>Value(å®é™…å†…å®¹)</p>
<p>è®¡ç®—ç›¸å…³æ€§</p>
<p>ç”¨Queryå’Œæ‰€æœ‰è¯çš„Keyåšç‚¹ç§¯ï¼Œå¾—åˆ°ç›¸å…³æ€§åˆ†æ•°(å¦‚â€œçŒ«â€å’Œâ€œæŠ“â€åˆ†æ•°é«˜ï¼Œå’Œâ€œå¤©ç©ºâ€åˆ†æ•°ä½)ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd19d2e5e75441899fdab0e67d031da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=ZYuLjkyhBWDvusur8GenAoONK3Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½’ä¸€åŒ–ä¸èšåˆ</p>
<p>å¯¹åˆ†æ•°åšSoftmaxå½’ä¸€åŒ–ï¼Œå¾—åˆ°æƒé‡(æ€»å’Œä¸º1)</p>
<p>ç”¨æƒé‡å¯¹ValueåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°å½“å‰è¯çš„æ–°è¡¨ç¤º(èåˆäº†ç›¸å…³ä¸Šä¸‹æ–‡)</p>
<p><strong>3ã€ä¸ç›¸å…³æ¦‚å¿µå¯¹æ¯”</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c2492a82d7142d1949c444f3b4ad4f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=pNemC8d3aVGKuEobcWEZKArMwLc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>4ã€è¯´äººè¯ç‰ˆ: ç”¨â€œè‡ªåŠ©é¤å…é€‰é¤â€ç†è§£è‡ªæ³¨æ„åŠ›</strong></p>
<p>æƒ³è±¡ä½ åœ¨è‡ªåŠ©é¤å…æ­é…ä¸€ä»½è¥å…»å‡è¡¡çš„é¤ç›˜:</p>
<p><strong>Query(éœ€æ±‚)</strong> : ä½ ä»Šå¤©çš„è¥å…»ç›®æ ‡(æ¯”å¦‚â€œé«˜è›‹ç™½ã€ä½ç³–â€)</p>
<p><strong>Key(é£Ÿç‰©å±æ€§)</strong> : æ¯é“èœçš„æ ‡ç­¾(å¦‚â€œç‰›æ’: é«˜è›‹ç™½; è›‹ç³•: é«˜ç³–â€)</p>
<p><strong>Value(å®é™…å†…å®¹)</strong> : é£Ÿç‰©æœ¬èº«ã€‚</p>
<p>è‡ªæ³¨æ„åŠ›è¿‡ç¨‹:</p>
<p>ä½ æ‹¿ç€éœ€æ±‚(Query)æ‰«ææ‰€æœ‰èœçš„æ ‡ç­¾(Key)ï¼Œè®¡ç®—åŒ¹é…åº¦(æ¯”å¦‚ç‰›æ’å¾—åˆ†é«˜ï¼Œè›‹ç³•å¾—åˆ†ä½)ã€‚</p>
<p>æ ¹æ®å¾—åˆ†åˆ†é…å–é¤é‡(Softmaxæƒé‡): ç‰›æ’æ‹¿å¤šï¼Œè›‹ç³•æ‹¿å°‘ã€‚</p>
<p>æœ€ç»ˆé¤ç›˜(è¾“å‡º)æ˜¯å„èœå“(Value)æŒ‰æƒé‡çš„ç»„åˆï¼Œæ»¡è¶³ä½ çš„å…¨å±€éœ€æ±‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c316c049f0a64cb1a3c4bf5b122d393f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=yrC%2BOHZj5eYBBQQQGcCe3YLgfo0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹æ¯”ä¼ ç»Ÿæ–¹æ³•:</p>
<p><strong>RNNå¼é€‰é¤</strong>: å¿…é¡»æŒ‰é¡ºåºå–èœï¼Œä¸”æ¯æ¬¡åªèƒ½å‚è€ƒå‰ä¸€é“èœçš„é€‰æ‹©ï¼Œå®¹æ˜“æ¼æ‰åé¢çš„ä¼˜è´¨é€‰é¡¹</p>
<p><strong>CNNå¼é€‰é¤</strong>: æ¯æ¬¡åªçœ‹ç›¸é‚»çš„3ä¸ªèœï¼Œè¦æ¥å›èµ°å¤šæ¬¡æ‰èƒ½è¦†ç›–å…¨éƒ¨èœå“</p>
<p><strong>5ã€æ€»ç»“ä¸å­¦ä¹ å»ºè®®</strong></p>
<p><strong>æ€»ç»“</strong></p>
<p>è‡ªæ³¨æ„åŠ›æœºåˆ¶é€šè¿‡â€œåŠ¨æ€å…³è”å…¨å±€ä¿¡æ¯â€ï¼Œè§£å†³äº†ä¼ ç»Ÿæ¨¡å‹æ— æ³•é«˜æ•ˆå¤„ç†é•¿è·ç¦»ä¾èµ–ã€è®¡ç®—å†—ä½™çš„é—®é¢˜ã€‚å®ƒæ˜¯Transformerçš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ChatGPTã€BERTç­‰å¤§æ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡çš„å…³é”®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bde75899e58a4bb298f0774a5e9ac388~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=xOyydlwhiOTk9EIOk5f53I6khm4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å­¦ä¹ å»ºè®®</strong></p>
<p>1ï¼‰å…ˆç†è§£æ ¸å¿ƒæ€æƒ³:</p>
<p>é‡ç‚¹æŒæ¡Queryã€Keyã€Valueçš„ä½œç”¨ï¼Œä»¥åŠâ€œæƒé‡åˆ†é…-èšåˆâ€çš„æµç¨‹ï¼Œæš‚æ—¶å¿½ç•¥æ•°å­¦ç»†èŠ‚ã€‚</p>
<p>2ï¼‰å¯¹æ¯”å®éªŒ:</p>
<p>ç”¨PyTorch/TensorFlowå®ç°ä¸€ä¸ªç®€å•çš„è‡ªæ³¨æ„åŠ›æ¨¡å—(10è¡Œä»£ç ä»¥å†…)ï¼Œå¯¹æ¯”è¾“å…¥è¾“å‡ºå˜åŒ–ã€‚</p>
<p>3ï¼‰ç»“åˆç»å…¸è®ºæ–‡:</p>
<p>ç²¾è¯»ã€ŠAttention Is All You Needã€‹çš„æ³¨æ„åŠ›éƒ¨åˆ†ï¼Œé…åˆä»£ç è§£è¯»(æ¨èJay Alammarçš„åšå®¢)ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f38347fdc6b4f3692f2ff93b3c70e9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764215225&amp;x-signature=%2FuFJefoTusLIge9aY%2BK8oZwdSaY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>4ï¼‰æ•°å­¦è¡¥å……:</p>
<p>å¤ä¹ çŸ©é˜µä¹˜æ³•ã€Softmaxå‡½æ•°ã€å‘é‡ç‚¹ç§¯çš„æ„ä¹‰(å…³é”®å…¬å¼ä¸è¶…è¿‡3ä¸ª)</p>
<p>5ï¼‰åº”ç”¨å»¶ä¼¸:</p>
<p>ç ”ç©¶å¤šå¤´æ³¨æ„åŠ›(Multi-Head)å¦‚ä½•æ‰©å±•æ¨¡å‹èƒ½åŠ›ï¼Œä»¥åŠä½ç½®ç¼–ç ä¸ºä½•å¿…è¦</p>
<p><strong>ä¸€å¥è¯å¿ å‘Š</strong>:</p>
<p>è‡ªæ³¨æ„åŠ›ä¸æ˜¯é­”æ³•ï¼Œæœ¬è´¨æ˜¯â€œé€šè¿‡æ•°æ®é©±åŠ¨çš„æƒé‡åˆ†é…ï¼Œå®ç°ä¿¡æ¯çš„é«˜æ•ˆæ•´åˆâ€ã€‚å…ˆå»ºç«‹ç›´è§‰ç†è§£ï¼Œå†æ·±å…¥æ•°å­¦å’Œä»£ç ï¼Œé¿å…è¢«å¤æ‚å…¬å¼åŠé€€ã€‚</p>
<p>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆä¸‰ï¼‰]]></title>    <link>https://juejin.cn/post/7574451949324992553</link>    <guid>https://juejin.cn/post/7574451949324992553</guid>    <pubDate>2025-11-20T03:54:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574451949324992553" data-draft-id="7574352425236955155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆä¸‰ï¼‰"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-20T03:54:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆä¸‰ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:54:24.000Z" title="Thu Nov 20 2025 03:54:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é˜¶æ®µäºŒçš„è¯¦ç»†æ¨ç†è¿‡ç¨‹è®²è§£å®Œæ¯•ï¼Œä½†è¿™æ—¶å€™ LLM åªç»è¿‡äº†é¢„è®­ç»ƒï¼Œä»–åªä¼šç»­å†™ï¼Œé˜¶æ®µä¸‰é€šè¿‡ç‰¹å®šçš„è°ƒè¯•ï¼Œè®© LLM æ‹¥æœ‰é—®ç­”ã€è§„é¿é£é™©ç­‰çœŸæ­£å¯ä»¥è¢«äººç”¨çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-0">é˜¶æ®µä¸‰</h2>
<p>é˜¶æ®µäºŒçš„äº§ç‰©ç§°ä¹‹ä¸º Base Modleï¼Œé˜¶æ®µä¸‰è½¬ä¸º Chat Modleï¼Œå¹¶ç¬¦åˆ HHH åŸåˆ™ï¼ˆHelpful, Honest, Harmlessï¼‰ã€‚</p>
<h4 data-id="heading-1">SFT (Supervised Fine-Tuning) â€”â€” æ ¼å¼ä¸æŒ‡ä»¤å­¦ä¹ </h4>
<p>äººç±»äº‹å…ˆå†™å¥½ä¸€äº›é«˜è´¨é‡çš„é—®ç­”ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>Prompt: "å†™ä¸€ä¸ª Java Hello Worldã€‚"</li>
<li>Response: "<code>public class Main { ... }</code>"</li>
</ul>
<p>æŠŠè¿™ä¸€æ•´ä¸²ç»™ LLM è®­ç»ƒï¼Œä½†æ˜¯å¯¹ prompt åš <strong>Loss Maskingï¼ˆæŸå¤±æ©ç ï¼‰</strong>ï¼Œå³ä¸è®© LLM å­¦ä¹ å¦‚ä½•å†™ Promptï¼Œè€Œæ˜¯è®©ä»–å­¦ä¹ å¦‚ä½•å†™ Responseã€‚</p>
<p>è®­ç»ƒææ–™é‡ŒåŠ ä¸Š<strong>ç‰¹æ®Š Token æ³¨å…¥</strong>ï¼Œç”¨äºè¾¨è¯†å¯¹è¯äººå’Œå¼€å§‹ç»“æŸç‚¹ã€‚ç‰¹æ®Š token æ˜¯ä¸å¯è§çš„ï¼Œåªç”¨äºç»™ LLM åšåŒºåˆ†ã€‚</p>
<p>æ¯”å¦‚åŸå§‹æ•°æ®æ˜¯ï¼š</p>
<p><code>User: Hi AI: Hello</code></p>
<p>æ ¼å¼åŒ–åæ˜¯:</p>
<p><code>&lt;|im_start|&gt;user\nHi&lt;|im_end|&gt;\n&lt;|im_start|&gt;assistant\nHello&lt;|im_end|&gt;</code></p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„äº§ç‰©æ˜¯ SFT æ¨¡å‹ï¼Œåªä¼šæ¨¡ä»¿äººç±»å›ç­”ï¼Œæ— æ³•åˆ†è¾¨å¥½åã€‚</p>
<h4 data-id="heading-2">Rejection Sampling (æ‹’ç»é‡‡æ · / è¿­ä»£å¼ SFT)</h4>
<p>æ‹¿ç€è®­ç»ƒå¥½çš„ SFT é’ˆå¯¹åŒä¸€ä¸ª Prompt ç”Ÿæˆ 10 ä¸ªå›ç­”ï¼Œä½¿ç”¨æ›´é«˜çº§çš„æ¨¡å‹ã€æˆ–è€…ç¡¬æ€§æ ‡å‡†ï¼ˆæ¯”å¦‚ç”Ÿæˆçš„ä»£ç èƒ½ä¸èƒ½å…è®¸ï¼‰å¯¹å›ç­”åšè¯„åˆ¤ï¼Œé€‰å‡ºæœ€å¥½çš„ä¸€ä¸ªã€‚</p>
<p>å†æŠŠè¿™ä¸ªå½“åšæ•°æ®ï¼Œè¿­ä»£ SFTã€‚</p>
<h4 data-id="heading-3">Alignment (ä»·å€¼å¯¹é½ / RLHF / DPO)</h4>
<p>è¿™ä¸€æ­¥å†³å®šäº†æ¨¡å‹çš„ä»·å€¼è§‚å’Œæ™ºåŠ›ä¸Šé™ï¼Œé€šå¸¸æœ‰ä¸¤ç§è·¯çº¿ã€‚</p>
<h5 data-id="heading-4">ä¼ ç»Ÿçš„ RLHF (PPO ç®—æ³•)</h5>
<p>å…ˆè®­ç»ƒä¸€ä¸ª Reward Model (RM) å¥–åŠ±æ¨¡å‹ï¼Œå³æŠŠ Unembedding å»æ‰æ”¹ä¸ºçº¿æ€§å±‚åªè¾“å‡ºä¸€ä¸ªåˆ†æ•°ï¼Œç”±äººç±»æ¥é€‰æ‹©å›ç­” A å’Œ B é‚£ä¸ªåˆ†æ›´é«˜ï¼ŒRM å­¦ä¹ è¿™ä¸ªè¿‡ç¨‹ï¼Œå˜ä¸ºä¸€ä¸ªæ‰“åˆ†æ¨¡å‹ã€‚</p>
<p>ç”±ä¸»æ¨¡å‹ç”Ÿæˆç­”æ¡ˆï¼Œè®© RM å¥–åŠ±æ¨¡å‹æ‰“åˆ†ï¼Œå†åå‘ä¼ æ’­ä¿®æ”¹æ¨¡å‹å‚æ•°ã€‚</p>
<h4 data-id="heading-5">ç›´æ¥åå¥½ä¼˜åŒ– (DPO - Direct Preference Optimization)</h4>
<p>å»æ‰ RM æ¨¡å‹ï¼Œä½¿ç”¨ä¸€ä¸ªæŸå¤±å‡½æ•°å–ä»£ã€‚</p>
<p>ä½¿ç”¨ç°æœ‰çš„ç­”æ¡ˆï¼Œåˆ†æç”Ÿæˆçš„ç­”æ¡ˆæ›´é è¿‘å¥½è¿˜æ˜¯åï¼Œé è¿‘å¥½åˆ™å¼ºåŒ–ï¼Œé è¿‘ååˆ™è°ƒæ•´å‚æ•°ã€‚</p>
<h4 data-id="heading-6">Safety &amp; Red Teaming (å®‰å…¨å›´æ ä¸çº¢é˜Ÿæµ‹è¯•)</h4>
<p>ä½¿ç”¨é»‘å®¢ã€è‡ªåŠ¨åŒ–è„šæœ¬ç­‰ç”Ÿæˆä¸å®‰å…¨æ–¹å‘çš„ Promptï¼Œé’ˆå¯¹é˜²å¾¡å¤±è´¥çš„æ¡ˆä¾‹ï¼Œäººå·¥æ’°å†™æ‹’ç»å›å¤ç­”æ¡ˆï¼Œå†ç”¨è¿™äº›æ•°æ®è®­ç»ƒ LLMã€‚</p>
<h2 data-id="heading-7">é˜¶æ®µå››</h2>
<p>è‡³æ­¤å®Œæ•´å¯ä»¥ç”¨çš„ LLM å·²ç»è®­ç»ƒå®Œæ¯•ï¼ŒæŠŠæ‰€æœ‰çš„å‚æ•°éƒ½æ”¹ä¸ºåªè¯»ï¼Œå°†æ¨¡å‹éƒ¨ç½²åˆ°çº¿ä¸Šå³å¯ä½¿ç”¨ã€‚</p>
<p>æ ‡å‡†çš„æ¨¡å‹éå¸¸å¤§ï¼Œå‚æ•°å¾ˆå¤šï¼Œéœ€è¦æå¤§çš„æ˜¾å­˜æ‰èƒ½å…è®¸ï¼Œé€šè¿‡<strong>é‡åŒ–ä¸å‹ç¼© (Quantization)</strong> é™ä½æ¨¡å‹æƒé‡ï¼Œæ¯”å¦‚ä» <strong>16-bit æµ®ç‚¹æ•° (FP16)</strong> å‹ç¼©æˆ <strong>4-bit æ•´æ•° (INT4)</strong> æ¥é™ä½ç¼“å­˜å ç”¨ã€‚</p>
<p>æ¨¡å‹åƒæ˜¯ Java ç¨‹åºä¸€æ ·ä¹Ÿè¦æœ‰å®¹å™¨ï¼Œçº¿ä¸Šä¸€èˆ¬ç”¨ vLLMï¼Œæœ¬åœ°ç”¨ Ollamaã€‚</p>
<p>éšç€çŸ¥è¯†ä¸æ–­æ›´æ–°ï¼Œä¸å¯èƒ½å®æ—¶è®­ç»ƒæ¨¡å‹ï¼Œå°±æœ‰äº† <strong>RAG</strong> è¿™ç§å¤–æŒ‚ç¡¬ç›˜çš„è£…ç½®ï¼ŒæŠŠå®æ—¶æœ€æ–°å†…å®¹ï¼Œæˆ–è€…ä¼ä¸šç§æœ‰æ•°æ®ï¼ŒåŠ å…¥åˆ°å¯¹è¯çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>å¦‚æœä¸è‡³äºå¯¹è¯é—®ç­”ï¼Œè¿˜å¯ä»¥é€šè¿‡ Agent å®ç°æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡ MCP æŸ¥è¯¢æå‰ã€åœ°å›¾è·¯çº¿ç­‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.sync ä¿®é¥°ç¬¦ | vueå‰ç«¯çŸ¥è¯†]]></title>    <link>https://juejin.cn/post/7574286569038168127</link>    <guid>https://juejin.cn/post/7574286569038168127</guid>    <pubDate>2025-11-19T17:32:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574286569038168127" data-draft-id="7574281453707837446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".sync ä¿®é¥°ç¬¦ | vueå‰ç«¯çŸ¥è¯†"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-19T17:32:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—æ´‹èŠ‹å˜˜ç‰‡"/> <meta itemprop="url" content="https://juejin.cn/user/1889439483175402"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .sync ä¿®é¥°ç¬¦ | vueå‰ç«¯çŸ¥è¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1889439483175402/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—æ´‹èŠ‹å˜˜ç‰‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T17:32:00.000Z" title="Wed Nov 19 2025 17:32:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">.sync ä¿®é¥°ç¬¦</h2>
<p>åœ¨ Vue 2 ä¸­ï¼Œ<code>.sync</code> ä¿®é¥°ç¬¦æ˜¯å®ç°çˆ¶å­ç»„ä»¶åŒå‘æ•°æ®ç»‘å®šçš„è¯­æ³•ç³–ï¼Œç‰¹åˆ«é€‚åˆç”¨äºå¼¹çª—è¿™ç±»éœ€è¦å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶çŠ¶æ€çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h3>
<p><code>.sync</code> ä¿®é¥°ç¬¦ï¼Œå®é™…ä¸Šå°±æ˜¯å°†çˆ¶ç»„ä»¶çš„å±æ€§ï¼Œé€šè¿‡ <code>.sync</code> ä¿®é¥°ç¬¦ï¼Œæ˜ å°„åˆ°å­ç»„ä»¶çš„ <code>props</code> å±æ€§ä¸­ï¼Œå¹¶ç›‘å¬å­ç»„ä»¶çš„ <code>props</code> å±æ€§çš„ä¿®æ”¹ï¼Œå°†ä¿®æ”¹åçš„å€¼ï¼Œé€šè¿‡ <code>$emit</code> äº‹ä»¶å‘é€ç»™çˆ¶ç»„ä»¶ï¼Œä»è€Œå®ç°çˆ¶å­ç»„ä»¶çš„æ•°æ®åŒæ­¥ã€‚</p>
<p>æœ¬è´¨æ˜¯è‡ªåŠ¨ä¸ºä½ æ‰©å±•äº†ä¸€ä¸ª <code>v-on</code> ç›‘å¬å™¨ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä½¿ç”¨ .sync çš„å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"dialogVisible"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- ç­‰æ•ˆäºå®Œæ•´å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span>
    <span class="hljs-attr">:visible</span>=<span class="hljs-string">"dialogVisible"</span>
    @<span class="hljs-attr">update:visible</span>=<span class="hljs-string">"val =&gt; dialogVisible = val"</span>
/&gt;</span>
</code></pre>
<h3 data-id="heading-2">ä¸¾ä¾‹</h3>
<h4 data-id="heading-3">1. å¼•å…¥å¹¶æ³¨å†Œå¼¹çª—ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyDialog</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./MyDialog.vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">components</span>: {
        <span class="hljs-title class_">MyDialog</span>,
    },
    <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">showDialog</span>: <span class="hljs-literal">false</span>,
        };
    },
};
</code></pre>
<h4 data-id="heading-4">2. æ³¨å†Œç‚¹å‡»äº‹ä»¶å¹¶ç»‘å®šå¼¹çª—ç»„ä»¶</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"showDialog = true"</span>&gt;</span>æ‰“å¼€å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ä½¿ç”¨ .sync ä¿®é¥°ç¬¦ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MyDialog</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"showDialog"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¤ºä¾‹å¼¹çª—"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">3. å­ç»„ä»¶ï¼šå¼¹çª—é€»è¾‘</h4>
<h5 data-id="heading-6">3.1 å®šä¹‰æ¥æ”¶çš„ <code>props</code></h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">props</span>: {
  <span class="hljs-attr">visible</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-attr">title</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'å¼¹çª—æ ‡é¢˜'</span>
  }
},
</code></pre>
<h5 data-id="heading-7">3.2 ä½¿ç”¨ <code>v-if</code> æ§åˆ¶å¼¹çª—æ˜¾ç¤º</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-overlay"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"visible"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close-btn"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeDialog"</span>&gt;</span>Ã—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-body"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¼¹çª—å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æ”¯æŒæ’æ§½å†…å®¹ --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeDialog"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"confirm"</span>&gt;</span>ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h5 data-id="heading-8">3.3 å…³é—­å¼¹çª—é€»è¾‘</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">closeDialog</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ update:visible æ¨¡å¼è§¦å‘äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'update:visible'</span>, <span class="hljs-literal">false</span>);
  },
  <span class="hljs-title function_">confirm</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¡®è®¤æ“ä½œ'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closeDialog</span>();
  }
},
</code></pre>
<h5 data-id="heading-9">3.4 ç›‘å¬ <code>visible</code> å˜åŒ–ï¼ˆå¯é€‰ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>: {
  <span class="hljs-comment">// ç›‘å¬ visible å˜åŒ–ï¼Œå¤„ç†å¤–éƒ¨å¯¹å¼¹çª—çš„å…³é—­</span>
  <span class="hljs-title function_">visible</span>(<span class="hljs-params">newVal</span>) {
    <span class="hljs-keyword">if</span> (!newVal) {
      <span class="hljs-comment">// å¼¹çª—å…³é—­æ—¶çš„æ¸…ç†æ“ä½œ</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-10">è¯¦ç»†ä»£ç </h4>
<h5 data-id="heading-11">çˆ¶ç»„ä»¶ï¼ˆä½¿ç”¨å¼¹çª—ï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"showDialog = true"</span>&gt;</span>æ‰“å¼€å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ä½¿ç”¨.syncä¿®é¥°ç¬¦ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MyDialog</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"showDialog"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¤ºä¾‹å¼¹çª—"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyDialog</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./MyDialog.vue"</span>;

    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
        <span class="hljs-attr">components</span>: {
            <span class="hljs-title class_">MyDialog</span>,
        },
        <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">showDialog</span>: <span class="hljs-literal">false</span>,
            };
        },
    };
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h5 data-id="heading-12">å­ç»„ä»¶å¼¹çª—ï¼ˆMyDialog.vueï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-overlay"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"visible"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-header"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close-btn"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeDialog"</span>&gt;</span>Ã—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-body"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¼¹çª—å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- æ”¯æŒæ’æ§½å†…å®¹ --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeDialog"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"confirm"</span>&gt;</span>ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
        <span class="hljs-attr">props</span>: {
            <span class="hljs-attr">visible</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
                <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,
            },
            <span class="hljs-attr">title</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
                <span class="hljs-attr">default</span>: <span class="hljs-string">"å¼¹çª—æ ‡é¢˜"</span>,
            },
        },
        <span class="hljs-attr">methods</span>: {
            <span class="hljs-title function_">closeDialog</span>(<span class="hljs-params"/>) {
                <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨update:visibleæ¨¡å¼è§¦å‘äº‹ä»¶</span>
                <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">"update:visible"</span>, <span class="hljs-literal">false</span>);
            },
            <span class="hljs-title function_">confirm</span>(<span class="hljs-params"/>) {
                <span class="hljs-comment">// æ‰§è¡Œç¡®è®¤æ“ä½œ...</span>
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¡®è®¤æ“ä½œ"</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closeDialog</span>();
            },
        },
        <span class="hljs-attr">watch</span>: {
            <span class="hljs-comment">// ç›‘å¬visibleå˜åŒ–ï¼Œå¤„ç†å¤–éƒ¨å¯¹å¼¹çª—çš„å…³é—­</span>
            <span class="hljs-title function_">visible</span>(<span class="hljs-params">newVal</span>) {
                <span class="hljs-keyword">if</span> (!newVal) {
                    <span class="hljs-comment">// å¼¹çª—å…³é—­æ—¶çš„æ¸…ç†æ“ä½œ</span>
                }
            },
        },
    };
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>
    // æ ·å¼
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-13">æ€»ç»“</h3>
<ol>
<li>
<p><strong><code>.sync</code> çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>å®ç°çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šï¼Œç®€åŒ–ä»£ç ã€‚</li>
<li>ç‰¹åˆ«é€‚åˆå¼¹çª—ç­‰éœ€è¦é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€çš„åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>çˆ¶ç»„ä»¶é€šè¿‡ <code>.sync</code> å°†çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li>
<li>å­ç»„ä»¶é€šè¿‡ <code>$emit('update:visible', value)</code> ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯é€‰åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦åœ¨å¼¹çª—å…³é—­æ—¶æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ <code>watch</code> ç›‘å¬ <code>visible</code> çš„å˜åŒ–ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>
<p>å¼¹çª—æ˜¾ç¤º/éšè—æ§åˆ¶</p>
</li>
<li>
<p>è¡¨å•ç¼–è¾‘å¯¹è¯æ¡†</p>
</li>
<li>
<p>ç¡®è®¤å¯¹è¯æ¡†</p>
</li>
<li>
<p>è®¾ç½®é¢æ¿</p>
</li>
<li>
<p>ä»»ä½•éœ€è¦å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶çŠ¶æ€çš„åœºæ™¯</p>
</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯»è¿™ä¸€ç¯‡ï¼Œä½ èƒ½æŠŠå“¨å…µæ¨¡å¼è®²ç»™ HR å¬å¥¹éƒ½èƒ½æ‡‚ï¼]]></title>    <link>https://juejin.cn/post/7574276404597014580</link>    <guid>https://juejin.cn/post/7574276404597014580</guid>    <pubDate>2025-11-20T02:04:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574276404597014580" data-draft-id="7574329472922501154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯»è¿™ä¸€ç¯‡ï¼Œä½ èƒ½æŠŠå“¨å…µæ¨¡å¼è®²ç»™ HR å¬å¥¹éƒ½èƒ½æ‡‚ï¼"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Redis"/> <meta itemprop="datePublished" content="2025-11-20T02:04:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¯ä»¶æ±‚ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1038379932466263"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯»è¿™ä¸€ç¯‡ï¼Œä½ èƒ½æŠŠå“¨å…µæ¨¡å¼è®²ç»™ HR å¬å¥¹éƒ½èƒ½æ‡‚ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1038379932466263/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¯ä»¶æ±‚ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:04:37.000Z" title="Thu Nov 20 2025 02:04:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç±³ï¼Œ31 å²ï¼Œçƒ­çˆ±æŠ€æœ¯ã€çƒ­çˆ±åˆ†äº«ã€çƒ­çˆ±å¥¶èŒ¶ï¼ˆè™½ç„¶åŒ»ç”Ÿè¯´æˆ‘åº”è¯¥å–æ— ç³–ï¼‰çš„å¤§å“¥å“¥ã€‚</p>
<p>æœ€è¿‘åˆé™ªæœ‹å‹åˆ· Java ç¤¾æ‹›é¢è¯•ï¼Œä»–ä¸€è„¸ç”Ÿæ— å¯æ‹ï¼šâ€œé¢è¯•å®˜åˆé—®æˆ‘ Redis sentinel å“¨å…µæ¨¡å¼ï¼Œæˆ‘è®°å¾—å¥½åƒæ˜¯ç›‘æ§ä¸»ä»çš„ï¼Ÿä½†ç»†èŠ‚æˆ‘åˆå¿˜äº†â€¦â€¦â€</p>
<p>æˆ‘æ‹ç€ä»–çš„è‚©è†€ï¼Œé€’ä¸Šä¸€æ¯å¥¶èŒ¶ï¼Œç¬‘ç€è¯´ï¼šâ€œå…„å¼Ÿï¼Œè¿™é¢˜æˆ‘ç”¨ä¸€æ¯å¥¶èŒ¶è®²ç»™ä½ å¬ã€‚å¬å®ŒåŒ…ä½ ä»æ‡µåˆ°ç²¾é€šã€‚â€</p>
<p>å–å£å¥¶èŒ¶ï¼Œæˆ‘ä»¬å¼€å§‹è®²æ•…äº‹ã€‚</p>
<h2 data-id="heading-0">å¦‚æœ Redis æ˜¯ä¸€å®¶å¥¶èŒ¶åº—</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šRedis å°±åƒæ˜¯ä¸€å®¶è¶…ç«çˆ†çš„å¥¶èŒ¶åº—ï¼Œæ’é˜Ÿæ’åˆ°ä¸‰å…¬é‡Œå¤–é‚£ç§ã€‚</p>
<p>åº—é‡Œæœ‰ï¼š</p>
<ul>
<li><strong>ä¸€ä¸ªåº—é•¿ï¼ˆmasterï¼‰</strong> ï¼šè´Ÿè´£â€œå†²å¥¶èŒ¶ã€ç‚¹å•ã€æ‰“åŒ…â€ï¼Œè¶…çº§å¿™ã€‚</li>
<li><strong>å‡ ä¸ªåº—å‘˜ï¼ˆslaveï¼‰</strong> ï¼šè´Ÿè´£â€œå¤åˆ¶åº—é•¿çš„æ‰‹è‰ºâ€ï¼ŒåŒæ­¥åº—é•¿åˆ¶ä½œå¥¶èŒ¶çš„è¿‡ç¨‹ï¼Œä½†ä¸æ¥å•ã€‚</li>
</ul>
<p>æŸå¤©ï¼Œåº—é•¿å¹²ç´¯äº†ï¼Œâ€œå•ªâ€åœ°ä¸€ä¸‹æ™•å€’äº†â€¦â€¦</p>
<p>æ•´ä¸ªå¥¶èŒ¶åº—ç¬é—´ç˜«ç—ªï¼Œé¡¾å®¢å…¨è·‘äº†ã€‚</p>
<p>è¿™å°±æ˜¯ï¼š<strong>Redis å•ç‚¹æ•…éšœï¼Œmaster æŒ‚äº†ï¼Œæ•´æ¡æœåŠ¡å´©ç›˜ã€‚</strong></p>
<p>æ€ä¹ˆåŠï¼Ÿè®©æˆ‘ä»¬ç™»åœºâ€”â€”å“¨å…µï¼ˆSentinelï¼‰ï¼</p>
<h2 data-id="heading-1">å“¨å…µæ¨¡å¼å‡ºç°ï¼šç»™å¥¶èŒ¶åº—å®‰æ’ä¸€ç¾¤â€œåº—é•¿ç›‘ç£å‘˜â€</h2>
<p>â€œå“¨å…µæ¨¡å¼â€ï¼ˆRedis Sentinelï¼‰å°±æ˜¯ç»™ Redis å¥¶èŒ¶åº—å®‰æ’ä¸€ç¾¤â€œç›‘ç£å‘˜â€ã€‚</p>
<p>è¿™äº›ç›‘ç£å‘˜æ•´å¤©å›´ç€åº—é•¿è½¬ï¼š</p>
<ul>
<li><strong>ç›¯ç€åº—é•¿æœ‰æ²¡æœ‰æ™•å€’</strong></li>
<li><strong>ç›¯ç€åº—å‘˜ä»¬æ˜¯ä¸æ˜¯æ­£å¸¸å¤åˆ¶æ•°æ®</strong></li>
<li><strong>ä¸€æ—¦åº—é•¿çœŸçš„å€’äº†ï¼Œä»–ä»¬ä¼šå¬å¼€â€œç´§æ€¥ä¼šè®®â€</strong></li>
<li><strong>é€‰ä¸€ä¸ªåº—å‘˜å½“æ–°åº—é•¿</strong></li>
<li><strong>é€šçŸ¥æ‰€æœ‰é¡¾å®¢ï¼šâ€˜æ–°åº—é•¿ä¸Šä»»äº†ï¼ç»§ç»­å–å¥¶èŒ¶å§ï¼â€™</strong></li>
</ul>
<p>è¿™å°±æ˜¯ Redis å“¨å…µæ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒRedis Sentinel çš„ä¸‰å¤§èŒè´£ï¼š</p>
<ul>
<li><strong>ç›‘æ§ï¼ˆMonitoringï¼‰ï¼š</strong> Sentinel ä¼šæŒç»­ç›‘æ§ master å’Œ slave æ˜¯å¦æ­£å¸¸ã€‚</li>
<li><strong>æ•…éšœæ¢å¤ï¼ˆFailoverï¼‰ï¼š</strong> master æŒ‚äº†ï¼Œè‡ªåŠ¨é€‰ä¸¾ä¸€ä¸ª slave ä¸ºæ–°çš„ masterï¼Œå»ºç«‹æ–°çš„ä¸»ä»ç»“æ„ã€‚</li>
<li><strong>é€šçŸ¥ï¼ˆNotificationï¼‰ï¼š</strong> æœ‰å˜åŒ–æ—¶é€šè¿‡ API æˆ–è„šæœ¬é€šçŸ¥å®¢æˆ·ç«¯ã€å…¶ä»–ç¨‹åºï¼šâ€œmaster æ¢äººå•¦ï¼â€</li>
</ul>
<p>æ˜¯ä¸æ˜¯ï¼Œå¾ˆåƒä¸€ç¾¤ä¸“ä¸šçš„åº—é•¿ç›‘ç£å‘˜ï¼Ÿ</p>
<h2 data-id="heading-2">å“¨å…µæ˜¯æ€ä¹ˆåˆ¤æ–­â€œåº—é•¿çœŸçš„æŒ‚äº†â€çš„ï¼Ÿ</h2>
<p>å“¨å…µä¸ä¼šåº—é•¿ä¸€å’³å—½å°±è¯´ä»–æŒ‚äº†ï¼ŒRedis çš„ Sentinel æœ‰ä¸¥æ ¼çš„åˆ¤æ–­æ ‡å‡†ã€‚</p>
<p><strong>1. ä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰</strong></p>
<p>æŸä¸ªå“¨å…µè®¤ä¸º master æ²¡å›åº”ï¼Œäºæ˜¯è¯´ï¼š</p>
<blockquote>
<p>â€œæˆ‘è§‰å¾—åº—é•¿æ™•äº†ã€‚â€</p>
<p>ä½†â€œæˆ‘è§‰å¾—â€ä¸èƒ½ä½œä¸ºè¯æ®ã€‚</p>
</blockquote>
<p>è¿™åªæ˜¯ <strong>ä¸»è§‚ä¸‹çº¿</strong>ã€‚</p>
<p><strong>2. å®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰</strong></p>
<p>åªæœ‰å½“<strong>å¤šä¸ªå“¨å…µ</strong>ä¸€èµ·æŠ•ç¥¨ï¼Œè¯´ï¼š</p>
<blockquote>
<p>â€œå¯¹ï¼Œæˆ‘ä¹Ÿè§‰å¾—åº—é•¿æŒ‚äº†ã€‚â€</p>
</blockquote>
<p>å“¨å…µé›†ç¾¤æ‰ä¼šç¡®è®¤ï¼š</p>
<blockquote>
<p>â€œOKï¼Œåº—é•¿çœŸçš„æŒ‚äº†ã€‚â€</p>
</blockquote>
<p>è¿™å« <strong>å®¢è§‚ä¸‹çº¿</strong>ï¼ˆODOWNï¼‰ã€‚åªæœ‰ ODOWN çŠ¶æ€ï¼Œå“¨å…µæ‰ä¼šå¯åŠ¨çœŸæ­£çš„<strong>æ•…éšœè½¬ç§»æµç¨‹</strong>ï¼ˆfailoverï¼‰ã€‚</p>
<h2 data-id="heading-3">ä½ ä»¥ä¸ºé€‰æ–°åº—é•¿å¾ˆç®€å•ï¼Ÿå“¨å…µçš„â€œç«é€‰å¤§ä¼šâ€æ¥äº†ï¼</h2>
<p>å½“ master è¢«åˆ¤å®š ODOWN åï¼Œå“¨å…µä¼šå¯åŠ¨ failover æµç¨‹ã€‚æµç¨‹å°±åƒä¸€åœºä¸¥æ ¼çš„ç«é€‰ï¼š</p>
<p><strong>1ã€æŒ‘é€‰å¥åº·çš„ slave</strong></p>
<ul>
<li>æ•°æ®åŒæ­¥æœ€å¥½</li>
<li>ä¸ä¸»èŠ‚ç‚¹å»¶è¿Ÿæœ€å°</li>
<li>ç½‘ç»œçŠ¶æ€æœ€å¥½</li>
</ul>
<p>æœ‰ç‚¹åƒï¼šè°çš„æ‰‹è‰ºæœ€åƒåº—é•¿ï¼Ÿè°æœ€é è°±ï¼Ÿ</p>
<p><strong>2ã€è®©å€™é€‰ slave æ‰§è¡Œ slaveof no one</strong></p>
<p>è¿™ä¸€æ­¥å¾ˆå…³é”®ï¼å®ƒæ„å‘³ç€ï¼šâ€œæˆ‘ä¸æ˜¯åº—å‘˜äº†ï¼Œæˆ‘ç°åœ¨å‡èŒå½“åº—é•¿ï¼â€</p>
<p><strong>3ã€é‡æ–°é…ç½®å‰©ä½™çš„ slave</strong></p>
<p>æŒ‡ä»¤ï¼šSLAVEOF æ–°master</p>
<p>æ„æ€æ˜¯ï¼šâ€œä»¥åä½ ä»¬éƒ½è·Ÿç€æ–°åº—é•¿å­¦æ‰‹è‰ºã€‚â€</p>
<p><strong>4ã€é€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯</strong></p>
<p>ä»¥å‰çš„å®¢æˆ·ç«¯éƒ½è¿æ¥æ—§ masterã€‚ç°åœ¨å“¨å…µä¼šå‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œmaster æ¢äººäº†ï¼Œåœ°å€åœ¨è¿™é‡Œï¼Œå»æ‰¾æ–°åº—é•¿ç‚¹å•å§ï¼â€</p>
<p>æ•´ä¸ªè¿‡ç¨‹è‡ªåŠ¨å®Œæˆï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚</p>
<h2 data-id="heading-4">é‡ç‚¹æ¥äº†ï¼šå“¨å…µé›†ç¾¤æ€ä¹ˆå·¥ä½œï¼Ÿ</h2>
<p>è¦ä¿è¯å“¨å…µæ¨¡å¼å¯é ï¼Œå¿…é¡»éƒ¨ç½²<strong>å¤šä¸ª Sentinel èŠ‚ç‚¹</strong>ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>å› ä¸ºä¸€ä¸ªå“¨å…µè¯´ master æ„Ÿè§‰æŒ‚äº†ï¼Œä¸å‡†ã€‚å¤šä¸ªå“¨å…µä¸€èµ·è¯´ master æŒ‚äº†ï¼Œæ‰ä¼šå¯åŠ¨ failoverã€‚</p>
</blockquote>
<p>å°±åƒï¼š</p>
<blockquote>
<p>ä¸€ä¸ªäººè¯´â€œåº—é•¿æ™•äº†â€ï¼Œå¯èƒ½æ˜¯çœ‹é”™äº†ï¼›ä¸‰ä¸ªäººéƒ½è¯´â€œåº—é•¿èººåœ°æ¿ä¸Šäº†â€ï¼Œé‚£å…«æˆæ˜¯çœŸçš„ã€‚</p>
</blockquote>
<h2 data-id="heading-5">å“¨å…µæ¨¡å¼çš„æ¶æ„ï¼šå…¶å®æ˜¯â€œä¸‰å±‚â€</h2>
<p>ä¸ºäº†è®©ä½ å½»åº•ç†è§£ï¼Œæˆ‘ç”¨æœ€ç®€å•çš„æ–¹å¼æ€»ç»“å“¨å…µæ¨¡å¼ä¸‰å±‚æ¶æ„ï¼š</p>
<p><strong>1ã€æ•°æ®å±‚ï¼šmaster + slave ç»“æ„</strong></p>
<p>è´Ÿè´£ï¼š</p>
<ul>
<li>å¤„ç†è¯»å†™ï¼ˆmasterï¼‰</li>
<li>å¤åˆ¶æ•°æ®ï¼ˆslaveï¼‰</li>
</ul>
<p><strong>2ã€ å“¨å…µå±‚ï¼šå¤šä¸ª Sentinel ç»„æˆé›†ç¾¤</strong></p>
<p>è´Ÿè´£ï¼š</p>
<ul>
<li>ç›‘æ§ master/slave çŠ¶æ€</li>
<li>é€‰æ–° master</li>
<li>é€šçŸ¥å®¢æˆ·ç«¯</li>
</ul>
<p>å“¨å…µä¹‹é—´ä¼šäº’ç›¸é€šä¿¡ï¼ŒæŠ•ç¥¨å†³å®š master æ˜¯å¦å®•æœºã€‚</p>
<p><strong>3ã€å®¢æˆ·ç«¯å±‚</strong></p>
<p>å®¢æˆ·ç«¯ä¸å†ç›´æ¥å†™æ­» master åœ°å€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è¿å“¨å…µ</li>
<li>å“¨å…µå‘Šè¯‰å®¢æˆ·ç«¯çœŸæ­£çš„ master æ˜¯è°</li>
<li>master æ”¹å˜æ—¶ï¼Œå“¨å…µä¼šé€šçŸ¥ä½ </li>
</ul>
<p>è¿™æ ·å®¢æˆ·ç«¯è‡ªåŠ¨é€‚åº”æ•…éšœæ¢å¤ï¼Œéå¸¸ç¨³ã€‚</p>
<h2 data-id="heading-6">é¢è¯•é—®ï¼šå“¨å…µæ¨¡å¼æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</h2>
<p>è¿™æ˜¯é«˜é¢‘é—®é¢˜ï¼Œæˆ‘ç»™ä½ æ€»ç»“æˆä¸‰å¥è¯ï¼Œé¢è¯•å®˜å¬å®Œä¼šå¾ˆæ»¡æ„ã€‚</p>
<p><strong>1ã€Redis å“¨å…µæ¨¡å¼ä»å­˜åœ¨è„‘è£‚é£é™©</strong></p>
<p>å¦‚æœç½‘ç»œåˆ†åŒºï¼Œå¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li>A ä»¥ä¸º master æŒ‚äº†ï¼Œé€‰ä¸€ä¸ª slave åšæ–° master</li>
<li>ä½†æ—§ master å®é™…è¿˜æ´»ç€</li>
</ul>
<p>å°±å‡ºç°ä¸¤ä¸ª masterï¼ˆè„‘è£‚ï¼‰ã€‚</p>
<p><strong>2ã€ä¸æ”¯æŒæ°´å¹³æ‰©å±•å†™æ“ä½œ</strong></p>
<p>å“¨å…µæ¨¡å¼ä»ç„¶åªæœ‰ä¸€ä¸ª masterï¼Œå†™èƒ½åŠ›å—é™ã€‚</p>
<p><strong>3ã€å¯é æ€§æ¯”é›†ç¾¤æ¨¡å¼å¼±</strong></p>
<p>å“¨å…µèƒ½è§£å†³â€œé«˜å¯ç”¨â€ï¼Œä¸èƒ½è§£å†³â€œæ•°æ®åˆ†ç‰‡ã€æ‰©å®¹â€é—®é¢˜ã€‚</p>
<h2 data-id="heading-7">å“¨å…µå’Œé›†ç¾¤æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2>
<p>å¦‚æœä½ åœ¨é¢è¯•ç°åœºå›ç­”ä¸‹é¢è¿™å¥è¯ï¼Œé¢è¯•å®˜ä¼šç–¯ç‹‚ç‚¹å¤´ï¼š</p>
<blockquote>
<p>Sentinel è´Ÿè´£â€œé«˜å¯ç”¨â€ï¼›</p>
<p>Redis Cluster è´Ÿè´£â€œé«˜å¯ç”¨ + åˆ†ç‰‡ + æ‰©å±•â€ã€‚</p>
<p>å‰è€…æ˜¯ä¿æŠ¤ masterï¼Œä¸è®©å®ƒå®•æœºï¼›</p>
<p>åè€…æ˜¯è®©æ•°æ®å¯ä»¥æ¨ªå‘æ‰©å±•ã€‚</p>
</blockquote>
<p>ä¸€å¥è¯å°±åŒºåˆ†äº†ã€‚</p>
<h2 data-id="heading-8">å“¨å…µæ¨¡å¼å…¸å‹éƒ¨ç½²æ–¹å¼ï¼ˆé¢è¯•å®˜è¶…çˆ±é—®ï¼‰</h2>
<p>æœ€å¸¸è§çš„æ˜¯ï¼š</p>
<ul>
<li><strong>1 ä¸» 2 ä»</strong></li>
<li><strong>3~5 ä¸ª Sentinel</strong></li>
</ul>
<p>ä¸€ä¸ªå‚è€ƒéƒ¨ç½²ï¼š</p>
<blockquote>
<p>masterï¼ˆ1å°ï¼‰</p>
<p>slaveï¼ˆ2å°ï¼‰</p>
<p>sentinelï¼ˆ3å°ï¼‰</p>
</blockquote>
<p>Sentinel å¿…é¡»æ˜¯å¥‡æ•°ä¸ªï¼Œå› ä¸ºæŠ•ç¥¨è¦å¤šæ•°åŒæ„æ‰â€œå®¢è§‚ä¸‹çº¿â€ã€‚</p>
<p>é¢è¯•å®˜é—®ä½ ä¸ºä»€ä¹ˆè¦å¥‡æ•°ä¸ªï¼Œä½ å°±è¯´ï¼š</p>
<blockquote>
<p>å› ä¸ºå“¨å…µæ˜¯æŠ•ç¥¨æœºåˆ¶ï¼Œå¿…é¡»å¤šæ•°æ´¾å†³å®šæ‰èƒ½ failoverï¼Œå¥‡æ•°èƒ½é¿å…å¹³ç¥¨ã€‚</p>
</blockquote>
<p>å®Œç¾ï¼</p>
<h2 data-id="heading-9">å“¨å…µæ¨¡å¼çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼ˆé¢è¯•å®˜æœ€å–œæ¬¢ï¼‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2fd1775c4cb4c3b8be883d9dd2626ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209076&amp;x-signature=NP4PDhLui1n9LxUBBoBQtOwM3Ws%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘å¸®ä½ æ€»ç»“æˆâ€œå…­æ­¥å£è¯€â€â€”â€”é¢è¯•ç­”é¢˜ç›´æ¥èƒŒï¼</p>
<p><strong>Redis å“¨å…µæ¨¡å¼ å…­æ­¥å£è¯€</strong></p>
<ol>
<li><strong>sentinel ç›‘æ§ master</strong></li>
<li><strong>master æ— å¿ƒè·³ â†’ ä¸»è§‚ä¸‹çº¿ SDOWN</strong></li>
<li><strong>å¤šæ•° sentinel æŠ•ç¥¨ â†’ å®¢è§‚ä¸‹çº¿ ODOWN</strong></li>
<li><strong>é€‰ slave å½“æ–° master</strong></li>
<li><strong>é€šçŸ¥æ‰€æœ‰ slave é‡æ–°è·Ÿéšæ–° master</strong></li>
<li><strong>é€šçŸ¥å®¢æˆ·ç«¯ï¼šæ–°çš„ master åœ°å€æ˜¯è°</strong></li>
</ol>
<p>è¿™å¥—é€»è¾‘ä½ èƒ½æµåˆ©æè¿°å‡ºæ¥ï¼Œè¿™é“é¢˜åŸºæœ¬ç¨³äº†ã€‚</p>
<h2 data-id="heading-10">æˆ‘æœ‹å‹é¢è¯•æœ€ç»ˆæ€ä¹ˆæ ·äº†ï¼Ÿ</h2>
<p>ç¬¬äºŒå¤©ï¼Œæˆ‘æœ‹å‹å»é¢è¯•ã€‚é¢è¯•å®˜æœç„¶é—®äº†ï¼šâ€œä½ è®²ä¸€ä¸‹ Redis å“¨å…µæ¨¡å¼ï¼Ÿâ€</p>
<p>æœ‹å‹ç«‹åˆ»æŠŠå¥¶èŒ¶æ•…äº‹æ¬å‡ºæ¥â€”â€”ä»ç›‘æ§ã€é€‰ä¸»ã€æŠ•ç¥¨ã€failoverï¼Œä¸€è·¯è®²å¾—é¡ºæºœçˆ†ç‚¸ã€‚</p>
<p>é¢è¯•å®˜å¬å¾—è¿è¿ç‚¹å¤´ï¼šâ€œä¸é”™ï¼Œè®²å¾—å¾ˆæ¸…æ¥šã€‚â€</p>
<p>æœ€ç»ˆä»–ä¹Ÿé¡ºåˆ©æ‹¿åˆ°äº† offerã€‚åæ¥ä»–å‘æ¶ˆæ¯ç»™æˆ‘ï¼Œè¯´ï¼šâ€œå“¨å…µæ¨¡å¼ï¼Œæˆ‘ç°åœ¨è®²ç»™ HR å¬éƒ½èƒ½å¬æ‡‚ã€‚â€</p>
<p>æˆ‘ç¬‘äº†åŠå¤©ã€‚</p>
<h2 data-id="heading-11">END</h2>
<p>å¦‚æœä½ éœ€è¦åœ¨ç®€çŸ­é¢è¯•é‡Œé€Ÿç­”ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™æ®µè¯ï¼Œé€»è¾‘æ¸…æ™°ã€è¦ç‚¹é½å…¨ï¼š</p>
<blockquote>
<p>Redis å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§å®ç° Redis é«˜å¯ç”¨çš„æœºåˆ¶ã€‚</p>
<p>å®ƒç”±å¤šä¸ª Sentinel èŠ‚ç‚¹ç»„æˆï¼Œè´Ÿè´£ç›‘æ§ master å’Œ slave çš„çŠ¶æ€ã€‚</p>
<p>ä¸€æ—¦ master è¿›å…¥å®¢è§‚ä¸‹çº¿çŠ¶æ€ï¼ŒSentinel ä¼šé€šè¿‡æŠ•ç¥¨é€‰ä¸¾ä¸€ä¸ªæœ€ä½³ slave ä½œä¸ºæ–° masterï¼Œå¹¶é€šçŸ¥å…¶ä»– slave é‡æ–°å¤åˆ¶å®ƒï¼Œä¹Ÿä¼šæŠŠæ–° master çš„ä¿¡æ¯é€šçŸ¥å®¢æˆ·ç«¯ã€‚</p>
<p><strong>Sentinel çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</strong> ç›‘æ§ã€æ•…éšœè½¬ç§»ã€é€šçŸ¥ã€‚</p>
<p>å®ƒè§£å†³äº† Redis å•ç‚¹æ•…éšœé—®é¢˜ï¼Œä½†ä»ç„¶åªæœ‰ä¸€ä¸ª masterï¼Œä¸æ”¯æŒåˆ†ç‰‡ï¼Œå› æ­¤å¯ç”¨æ€§ä¸å¦‚ Redis Clusterã€‚</p>
<p>Sentinel æ¨èéƒ¨ç½²å¥‡æ•°ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡å¤šæ•°æ´¾é€‰ä¸¾é¿å…è¯¯åˆ¤ã€‚</p>
</blockquote>
<p>æˆ‘æ˜¯å°ç±³ï¼Œä¸€ä¸ªå–œæ¬¢åˆ†äº«æŠ€æœ¯çš„31å²ç¨‹åºå‘˜ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€œ<strong>è½¯ä»¶æ±‚ç”Ÿ</strong>â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å¹²è´§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç° Remote MCP-Server]]></title>    <link>https://juejin.cn/post/7574568258788851763</link>    <guid>https://juejin.cn/post/7574568258788851763</guid>    <pubDate>2025-11-20T02:15:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258788851763" data-draft-id="7574584245109948467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç° Remote MCP-Server"/> <meta itemprop="keywords" content="å‰ç«¯,MCP,AIGC"/> <meta itemprop="datePublished" content="2025-11-20T02:15:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¢‹é¼ äº‘æ•°æ ˆUEDå›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2137106333053912"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç° Remote MCP-Server
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2137106333053912/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¢‹é¼ äº‘æ•°æ ˆUEDå›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:15:56.000Z" title="Thu Nov 20 2025 02:15:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘ä»¬æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dtstack.com%2Fued" target="_blank" title="https://www.dtstack.com/ued" ref="nofollow noopener noreferrer">è¢‹é¼ äº‘æ•°æ ˆ UED å›¢é˜Ÿ</a>ï¼Œè‡´åŠ›äºæ‰“é€ ä¼˜ç§€çš„ä¸€ç«™å¼æ•°æ®ä¸­å°äº§å“ã€‚æˆ‘ä»¬å§‹ç»ˆä¿æŒå·¥åŒ ç²¾ç¥ï¼Œæ¢ç´¢å‰ç«¯é“è·¯ï¼Œä¸ºç¤¾åŒºç§¯ç´¯å¹¶ä¼ æ’­ç»éªŒä»·å€¼ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šä½³å²š</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å¯¹äºå…¬å¸å†…éƒ¨çš„MCP-Server, ç”±äºéšç§æ€§é—®é¢˜ä¸èƒ½å‘å¸ƒä¸ºnpmåŒ…ï¼Œé‚£ä¹ˆå°±æ²¡æ³•ä»¥<code>npx</code>æˆ–è€…<code>uvx</code>ç­‰å½¢å¼å¿«é€Ÿçš„å…±äº«ä½¿ç”¨ã€‚æ‰€ä»¥åŸºæœ¬ä¼šä»¥STDIOç±»å‹çš„MCP-Serverè¿›è¡Œå¼€å‘ï¼Œåœ¨å†…éƒ¨è¿›è¡Œå…±äº«æ—¶åªèƒ½å°†å¯¹åº”æºæ–‡ä»¶æ‹‰å–æœ¬åœ°ä½¿ç”¨ã€‚</p>
<p>MCP-Serverå¸‚åœºä¸­å¿ƒèƒ½å¤Ÿæ•´åˆå†…éƒ¨å„å›¢é˜Ÿæˆ–ä¸ªäººå®ç°çš„MCP-Serverï¼Œæä¾›ç»Ÿä¸€çš„Streamable HTTPåè®®è®¿é—®ç«¯å£ï¼Œå¿«é€Ÿçš„æ•´åˆMCPèµ„æºã€‚</p>
<h2 data-id="heading-1">ç°æœ‰æ–¹æ¡ˆåˆ†æ</h2>
<p>MCP Marketæœ‰å¾ˆå¤šç½‘ç«™å·²ç»å®ç°ï¼Œä½†åŸºæœ¬åªèƒ½åšåˆ°èšåˆåŠŸèƒ½ï¼Œå³åªæä¾›æ£€ç´¢ä¸ä½¿ç”¨æ¦‚è§ˆç­‰åŸºæœ¬åŠŸèƒ½ï¼Œä½¿ç”¨æ—¶ä»éœ€è¦æœ¬åœ°å…‹éš†æˆ–è€… npx å®‰è£…è°ƒç”¨æˆ–è€…ä½¿ç”¨MCPæ³¨å†Œè€…è‡ªå·±æä¾›çš„HTTPè°ƒç”¨urlã€‚</p>
<h3 data-id="heading-2">MCPMarket</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmcpmarket.com%2Fzh%2Fserver" target="_blank" title="https://mcpmarket.com/zh/server" ref="nofollow noopener noreferrer">mcpmarket.com/zh/server</a></p>
<p>ä»…ä»…åšäº†æ£€ç´¢æ•´åˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/644f0a38eb90402094a3daf98dd5f508~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=8AQlsosiRWGMis1lKWliKnWC90Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">ç™¾ç‚¼-MCP</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Fspm%3Da2c4g.11186623.0.0.462a2aa1vaybZI%26tab%3Dmcp%23%2Fmcp-market" target="_blank" title="https://bailian.console.aliyun.com/?spm=a2c4g.11186623.0.0.462a2aa1vaybZI&amp;tab=mcp#/mcp-market" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?spm=a2c4g.â€¦</a></p>
<p>å®ç°äº†MCPæœåŠ¡çš„ä¸€ä½“åŒ–æµç¨‹ï¼ŒåŒ…æ‹¬æ£€ç´¢ï¼Œéƒ¨ç½²ä¸ä¸€é”®é›†æˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e4499818287466ca5621f61dcc61d0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=Xi6DITmNw9TFCCaXVgFFdLRTGZY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849ca228b6a9443baaadcf552b30bf7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=Y08bmq3G%2BU4zqcl4SA8JBzzvzG0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">Nacos-AI</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnacos.io%2Fdocs%2Flatest%2Fmanual%2Fuser%2Fai%2Fmcp-auto-register%2F%3Fspm%3D5238cd80.75598bea.0.0.609e2c09jtluP3" target="_blank" title="https://nacos.io/docs/latest/manual/user/ai/mcp-auto-register/?spm=5238cd80.75598bea.0.0.609e2c09jtluP3" ref="nofollow noopener noreferrer">Nacos-AI</a></p>
<p>nacosæœ¬èº«æ˜¯ä¸€ä¸ªåŠ¨æ€æœåŠ¡æ³¨å†Œå‘ç°ä¸ç®¡ç†æ¡†æ¶ï¼Œæ–°ç‰ˆæœ¬æä¾›äº†Nacos MCP Routeræ¥ç®¡ç†æ‰€æœ‰MCP</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbd11071acc34f7b9a6b32ebce791cbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=KaOjwipDtehxyMfRK8aW9cuCJ7c%3D" alt="" loading="lazy"/></p>
<p>å…¶å†…éƒ¨å¯ä»¥å®ç°ä¸åŒåè®®ç±»å‹çš„ MCP æœåŠ¡å™¨è½¬åŒ–ä¸ºç»Ÿä¸€çš„ streamable-http ç±»å‹ï¼Œå®ƒæœ¬èº«æä¾›ä¸€ä¸ª nacos mcp æ¥ä¸å®¢æˆ·ç«¯äº¤äº’ï¼š</p>
<p>Nacos MCP Router æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š</p>
<ol>
<li>routeræ¨¡å¼ï¼šé»˜è®¤æ¨¡å¼ï¼Œé€šè¿‡MCP Serveræ¨èã€å®‰è£…åŠä»£ç†å…¶ä»–MCP Serverçš„åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·æ›´æ–¹ä¾¿çš„ä½¿ç”¨MCP ServeræœåŠ¡ã€‚</li>
<li>proxyæ¨¡å¼ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡MODE=proxyæŒ‡å®šï¼Œé€šè¿‡ç®€å•é…ç½®å¯ä»¥æŠŠsseã€stdioåè®®MCP Serverè½¬æ¢ä¸ºstreamableHTTPåè®®MCP Serverã€‚</li>
</ol>
<p>åœ¨router æ¨¡å¼ä¸‹ï¼ŒNacos MCP Router ä½œä¸ºä¸€ä¸ªæ ‡å‡†MCP Serverï¼Œæä¾›MCP Serveræ¨èã€åˆ†å‘ã€å®‰è£…åŠä»£ç†å…¶ä»–MCP Serverçš„åŠŸèƒ½ã€‚å…¶ä¸»è¦å·¥å…·åˆ—è¡¨ä¸º</p>
<ol>
<li>search_mcp_server
<ul>
<li>æ ¹æ®ä»»åŠ¡æè¿°åŠå…³é”®å­—ä»MCPæ³¨å†Œä¸­å¿ƒï¼ˆNacosï¼‰ä¸­æœç´¢ç›¸å…³çš„MCP Serveråˆ—è¡¨</li>
<li>è¾“å…¥:
<ul>
<li><code>task_description</code>(string): ä»»åŠ¡æè¿°ï¼Œç¤ºä¾‹ï¼šä»Šå¤©æ­å·å¤©æ°”å¦‚ä½•</li>
<li><code>key_words</code>(string): ä»»åŠ¡å…³é”®å­—ï¼Œç¤ºä¾‹ï¼šå¤©æ°”ã€æ­å·</li>
</ul>
</li>
<li>è¾“å‡º: list of MCP servers and instructions to complete the task.</li>
</ul>
</li>
<li>add_mcp_server
<ul>
<li>æ·»åŠ å¹¶åˆå§‹åŒ–ä¸€ä¸ªMCP Serverï¼Œæ ¹æ®Nacosä¸­çš„é…ç½®ä¸è¯¥MCP Serverå»ºç«‹è¿æ¥ï¼Œç­‰å¾…è°ƒç”¨ã€‚</li>
<li>è¾“å…¥:
<ul>
<li><code>mcp_server_name</code>(string): éœ€è¦æ·»åŠ çš„MCP Serveråå­—</li>
</ul>
</li>
<li>è¾“å‡º: MCP Serverå·¥å…·åˆ—è¡¨åŠä½¿ç”¨æ–¹æ³•</li>
</ul>
</li>
<li>use_tool
<ul>
<li>ä»£ç†å…¶ä»–MCP Serverçš„å·¥å…·</li>
<li>è¾“å…¥:
<ul>
<li><code>mcp_server_name</code>(string): è¢«è°ƒçš„ç›®æ ‡MCP Serveråç§°.</li>
<li><code>mcp_tool_name</code>(string): è¢«è°ƒçš„ç›®æ ‡MCP Serverçš„å·¥å…·åç§°</li>
<li><code>params</code>(map): è¢«è°ƒçš„ç›®æ ‡MCP Serverçš„å·¥å…·çš„å‚æ•°</li>
</ul>
</li>
<li>è¾“å‡º: è¢«è°ƒçš„ç›®æ ‡MCP Serverçš„å·¥å…·çš„è¾“å‡ºç»“æœ</li>
</ul>
</li>
</ol>
<p>åœ¨proxy æ¨¡å¼ä¸‹ï¼ŒNacos MCP Router ä»…æä¾›ä»£ç†åŠŸèƒ½ï¼Œæ— éœ€ä»£ç æ”¹åŠ¨å³å¯å®ç°stdioã€sseåè®®ä¸€é”®è½¬æ¢ä¸ºstreamableHTTPåè®®ã€‚</p>
<h3 data-id="heading-5">higress AIç½‘å…³</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhigress.cn%2Fai%2Fmcp-quick-start%2F%3Fspm%3D36971b57.7beea2de.0.0.d85f20a9xwAfAn" target="_blank" title="https://higress.cn/ai/mcp-quick-start/?spm=36971b57.7beea2de.0.0.d85f20a9xwAfAn" ref="nofollow noopener noreferrer">higress AIç½‘å…³</a></p>
<p>ä»€ä¹ˆæ˜¯ AI ç½‘å…³ï¼Ÿ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ee33b485a0c482e82027d4094db3eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=446jbf9JnIJKk5k%2FCoVzJoC0Zvw%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨AIç½‘å…³åšMCP Serverçš„ç»Ÿä¸€å…¥å£ä»£ç†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/814d882d66534fd4959b7547815799a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=8Yw43SsvzbFdi56UFrNhfOIC9Ow%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92db1e64df4d4714be13b332e63b2c4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=9ttQWtwxPKO5u%2BuHYaTdo2IyeCk%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŠ¿ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4962e507faeb4790b4f6bb09a1552757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=qhW3vOKaGduMvldOztdH%2F%2FJ6q7M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">è®¾è®¡æ¦‚è§ˆ</h2>
<h3 data-id="heading-7">å‰ç«¯è®¾è®¡</h3>
<p>é¡µé¢éœ€åŒ…å«ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½</p>
<ol>
<li>
<p>MCPå¸‚åœº - ç”¨äºæŸ¥è¯¢å·²æ³¨å†Œçš„MCPæœåŠ¡åˆ—è¡¨ï¼ŒåŒå¤§å¤šæ•°MCP Marketä¸€æ ·ï¼ŒåŒ…å«ä½¿ç”¨è¯´æ˜ï¼Œé…ç½®ï¼Œå·¥å…·åˆ—è¡¨ç­‰ä¿¡æ¯
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e3ba323b904479b3094da1372a04ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=q8qLcIvT6vDolFf4Gj2qbBljV%2FI%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/684f8db2cced48b69aefd0190e08f724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=vt%2FaswH1GEkE6RsQ%2F4ZBdIpi8kk%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>MCPæ³¨å†Œä¸­å¿ƒ  - å‘å¸ƒè‡ªå·±å®ç°çš„MCPï¼Œé’ˆå¯¹ Stdio ç±»å‹MCP Serverï¼Œæä¾›èµ„æºéƒ¨ç½²æœåŠ¡
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e081309a01e3487f94dc27cf74137e13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=cWTJ5iGss%2BO%2Bipip%2Bu%2F1TcuMAZ0%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>MCPè°ƒè¯•æœåŠ¡  - ä½¿ç”¨ <code>@modelcontextprotocol/inspector</code>å®ç°
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78d3b7e698ec483da607c472141f892e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=MOmu0PBODY0A6OnWi1itJ3ufFkY%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>æœåŠ¡ç®¡ç†
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb101eb262be43cf94d06763b5947e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=wV4x94Z0tzpshnP90FiVojOAf3M%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<h3 data-id="heading-8">åç«¯è®¾è®¡</h3>
<h4 data-id="heading-9">åè®®è½¬æ¢</h4>
<p>MCPåè®®å·²æœ‰ä¸‰ä¸ªç‰ˆæœ¬: 2024-11-05ã€2025-03-26ã€2025-06-18ã€‚</p>
<p>ä¸»è¦å·®å¼‚åœ¨äºåè®®é—´çš„å…¼å®¹ï¼Œ<code>2024-11-05</code>ç‰ˆæœ¬æä¾›äº†<code>Stdio</code>ä¸<code>SSE</code>ä¸¤ç§<code>transport</code>ç±»å‹ï¼Œ<code>2025-03-26</code>ä¹‹åçš„ç‰ˆæœ¬æä¾›äº†<code>Stdio</code>ä¸<code>Streamable HTTP</code>åè®®ã€‚</p>
<p><code>SSE</code>ç”±äºå…¶ä¼šä½¿ç”¨ä¸¤ä¸ªç«¯ç‚¹<code>/sse</code>ä¸<code>/messages</code>ä¸”ä¸€ç›´ä¼šå ç”¨é•¿è¿æ¥çš„ç¼˜æ•…å­˜åœ¨è®¾è®¡ç¼ºé™·ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚</p>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬å®šä¹‰ä¸‰ç§åè®®çš„è½¬åŒ–è§„åˆ™ï¼š Stdio =&gt; HTTP , SSE =&gt; SSE, HTTP =&gt; HTTP</p>
<h5 data-id="heading-10">Stdioè½¬HTTP</h5>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä»¥<code>Stdio</code>å½¢å¼å¼€å‘MCP Serverï¼Œå› ä¸ºå®ƒè¶³å¤Ÿç®€å•ï¼Œ<code>Stdio</code>transportæ˜¯ä»¥<strong>å­è¿›ç¨‹</strong>çš„æ–¹å¼å®ç° Client ä¸ Server ä¹‹é—´é€šä¿¡çš„ï¼Œå®ç°ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚</p>
<p>ä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼, åœ¨é…ç½®æ—¶ä½¿ç”¨ command æŒ‡å®šï¼š</p>
<ul>
<li>npx -y xxx</li>
<li>node ./xxx.js</li>
</ul>
<p>æˆ‘ä»¬åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰é…ç½®çš„MCPéƒ½è¢«ä»¥å­è¿›ç¨‹çš„å½¢å¼å¯åŠ¨äº†
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecb8c08654cf455781d71a0ccbd8431a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=jpUNUfwlqVulkgIVT0sUY5J2Twg%3D" alt="" loading="lazy"/></p>
<p>é—®ï¼š</p>
<p>å‡è®¾ä¸€ä¸ªMCPåªä¼šåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘å¼€å¯ä¸¤ä¸ªCursorï¼ŒåŒæ—¶è°ƒç”¨åŒä¸€ä¸ªMCPï¼Œä¼šå¦‚ä½•ï¼Ÿ</p>
<p>å¦‚æœå°†å…¶è½¬ä¸ºHTTP, éœ€è¦åšåˆ°æ•°æ®éš”ç¦»ã€‚å› ä¸ºStdioClientTransportä¸è¿è¡ŒServerä»£ç çš„å­è¿›ç¨‹é—´æ˜¯é€šè¿‡äº‹ä»¶è®¢é˜…æ¥æ¥æ”¶æ¶ˆæ¯çš„ï¼Œ æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶æˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªæ¶ˆæ¯è¯¥å›ä¼ ç»™å“ªä¸ªhttpè¯·æ±‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯</span>
process.<span class="hljs-property">stdout</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">buffer</span>) =&gt;</span> {});
<span class="hljs-comment">// å‘é€è¯·æ±‚</span>
process.<span class="hljs-property">stdin</span>?.<span class="hljs-title function_">write</span>(msg)
</code></pre>
<p>ä¸ºäº†è§£å†³æ•°æ®éš”ç¦»é—®é¢˜ï¼Œç”¨ä¸¤ç§æ–¹å¼è§£å†³ï¼š</p>
<ol>
<li>
<p><strong>ç‹¬ç«‹child_process</strong><br/>
ä¸ºæ¯ä¸€ä¸ªhttpè¯·æ±‚ç‹¬ç«‹åˆ›å»ºå­è¿›ç¨‹ï¼Œæ¶ˆæ¯å“åº”å®Œå³é”€æ¯ï¼Œè™½èƒ½è§£å†³æ•°æ®éš”ç¦»é—®é¢˜ï¼Œä¸”æ¯ä¸ªè¯·æ±‚éƒ½èƒ½å®šä¹‰è‡ªå·±çš„envä¿¡æ¯ï¼Œä½†æ˜¯åœ¨20~30å¹¶å‘ä¸‹ï¼Œåˆ›å»ºå­è¿›ç¨‹çš„æ€§èƒ½æ¶ˆè€—ä¼šç¬é—´æ‰“æ»¡CPUã€‚</p>
</li>
<li>
<p><strong>å•ä½“child_process</strong><br/>
å•ä½“child_processå¯¹äºæ¯ä¸€ä¸ªMCP Serveråªä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¸”è¿›ç¨‹ä¼šéšå“†å•¦Aæ¢¦ä¸€èµ·å¯åŠ¨ã€‚</p>
</li>
</ol>
<p>ç”±äºä¸ç®¡æ˜¯å“ªç§ transportï¼Œéƒ½æ˜¯ä»¥ JSON-RPC åè®®è¿›è¡Œæ¶ˆæ¯å®šä¹‰ï¼ŒJSON-RPCå¯ä»¥æä¾› id å‚æ•°æ ‡è¯†è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚ä¸­æºå¸¦äº†idï¼Œé‚£ä¹ˆå“åº”çš„ JSON-RPC ä¹Ÿå¿…é¡»æºå¸¦åŒæ ·çš„idã€‚</p>
<p>clientåœ¨è¯·æ±‚æ—¶ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªidï¼Œä½†è¿™ä¸ªidæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœåŒæ—¶æœ‰å¤šä¸ªç”¨æˆ·åœ¨ client ç«¯å‘é€è¯·æ±‚ï¼Œå®ƒä»¬çš„idå¯èƒ½ä¼šä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå”¯ä¸€çš„idï¼ŒåŒæ—¶ç»´æŠ¤å†…éƒ¨idä¸clientç”Ÿæˆçš„idçš„å…³ç³»ã€‚</p>
<p>åœ¨ä¸Serveré€šä¿¡æ—¶ï¼Œä½¿ç”¨å†…éƒ¨idä»¥ä¿è¯å”¯ä¸€ï¼Œå½“Serverè¿”å›æ•°æ®æ—¶ï¼Œå°†JSON-RPCå“åº”ä½“çš„å†…éƒ¨idæ›¿æ¢ä¸ºclient idä»¥æ­¤å®ç°æ•°æ®éš”ç¦»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a33bf3b98053407db37e07a5c29d8313~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=fhyfh8G67qoFrgXPfatjs6T6xQo%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-11">SSE</h5>
<p>SSEé€šä¿¡æµç¨‹ï¼š</p>
<ol>
<li>SSE transportä¼šå¼€å¯ä¸¤ä¸ªç«¯ç‚¹ï¼Œé¦–å…ˆå®¢æˆ·ç«¯ä¼šå‘èµ·ä¸€ä¸ª<code>GET</code>è¯·æ±‚åˆ°<code>/sse</code>ç«¯ç‚¹ï¼Œå¯ä»¥ä¸æºå¸¦ä»»ä½•è¯·æ±‚å‚æ•°</li>
<li><code>/sse</code>ç«¯ç‚¹å¼€å¯ä¸€ä¸ªæµï¼Œå…ˆè¿”å›ä¸€ä¸ªæ¶ˆæ¯ç«¯ç‚¹<code>/messages</code>ä¸<code>sessionId</code>å¦‚ï¼š/messages?sessionId=xxx<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed18179daa7b442292e2bd079baa7a95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=Z4AwVoWd1ia%2Fjcb%2BuHlrvCFFVyg%3D" alt="" loading="lazy"/></li>
<li>å®¢æˆ·ç«¯å‘<code>/messages</code>ç«¯ç‚¹å‘èµ·å®é™…è¯·æ±‚ï¼Œå¦‚ initialize, tools/listï¼Œæ³¨æ„æ­¤æ—¶æœåŠ¡ç«¯ä¸ä¼šæŠŠæ•°æ®ç»“æœæ”¯æŒè¿”å›åˆ°<code>/messages</code>ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›202 Accept<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f1c56ad2c3d425cb406e0e33a5e6b7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=Kc7yEy7BgF8AFNJ4m2yV4EfR84U%3D" alt="" loading="lazy"/></li>
<li><code>/sse</code>ç«¯ç‚¹æ”¶åˆ°å“åº”ç»“æœ<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a1e112ca4d9473bb82627ba321cf30f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=8cif4wNXjyyy5YLwJRlsCcx51bE%3D" alt="" loading="lazy"/></li>
<li>ç»§ç»­ä¸‹ä¸€è½®é€šä¿¡<br/>
å¯¹äºSSE,  æˆ‘ä»¬åœ¨Controllerå±‚åŒæ ·å¼€æ”¾ä¸¤ä¸ªç«¯ç‚¹</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/messages'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointPost</span>);
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/sse'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointGet</span>);
</code></pre>
<p>å¦‚æœå•çº¯çš„åšä»£ç†è½¬å‘ï¼Œé‚£ä¹ˆæ— æ³•åšåˆ°å¯¹<strong>æ¶ˆæ¯ç«¯ç‚¹</strong>çš„è½¬å‘ï¼Œå› ä¸ºæ¶ˆæ¯ç«¯ç‚¹æ˜¯MCP ServeråŠ¨æ€å®šä¹‰çš„ï¼Œå¯èƒ½ä¸æ˜¯<code>/messages</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å“†å•¦Aæ¢¦å±‚åŠ¨æ€åˆ›å»º <code>SSEServerTransport</code> ã€‚</p>
<p><code>SSEServerTransport</code>çš„<code>endpoint</code>ä»…ä»…ç”¨æ¥æŒ‡å¼•å®¢æˆ·ç«¯æ¶ˆæ¯ä½“å¾€å“ªä¸ªAPIæ¥å£å‘é€, æ‰€ä»¥æˆ‘ä»¬åœ¨å“†å•¦Aæ¢¦åç«¯åˆ›å»ºçš„<code>endpoint</code>ä¸çœŸå®MCPæœåŠ¡å™¨è¿”å›çš„<code>endpoint</code>æ˜¯æ²¡æœ‰å…³ç³»ä¸å†²çªçš„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> messageEndpoint = <span class="hljs-string">'http://localhost:7001/mcp-endpoint/'</span> + serverId + <span class="hljs-string">'/messages'</span>;

<span class="hljs-keyword">const</span> serverTransport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSEServerTransport</span>(messageEndpoint, res, {
    headers,
});
<span class="hljs-keyword">await</span> serverTransport.<span class="hljs-title function_">start</span>();
</code></pre>
<p>æˆ‘ä»¬åœ¨å“†å•¦Aæ¢¦åˆ›å»ºçš„<code>SSEServerTransport</code>èƒ½å¤Ÿå¸®æˆ‘ä»¬å¤„ç†å®¢æˆ·ç«¯å‘é€çš„SSEè¯·æ±‚å¹¶è‡ªåŠ¨å“åº”ï¼Œä½†æ˜¯æˆ‘ä»¬ç›®å‰æ²¡æœ‰ç»‘å®šä»»ä½•çš„MCP Server, å®ƒä»…æœ‰ä¸€ä¸ªæ¡¥æ¥çš„ä½œç”¨ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨å“†å•¦Aæ¢¦å±‚åˆ›å»ºä¸€ä¸ª<code>SSEClientTransport</code>, å°†æˆ‘ä»¬ä»çœŸå®å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯é€šè¿‡<code>SSEClientTransport</code>å†å‘é€ç»™çœŸå®MCPæœåŠ¡å™¨ã€‚</p>
<p><code>SSEClientTransport</code>ç›‘å¬<code>onmessage</code>è·å–çœŸå®MCPæœåŠ¡å™¨æ¶ˆæ¯ç»“æœåï¼Œå°†ç»“æœ send åˆ°æœ¬åœ°åˆ›å»ºçš„<code>SSEServerTransport</code>ï¼Œ<code>SSEServerTransport</code>å¤„ç†è¯·æ±‚å®Œæˆå“åº”ã€‚</p>
<p>GETè¯·æ±‚å¤„ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å¤„ç†GETè¯·æ±‚
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">serverId</span> - æœåŠ¡å™¨ID
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">req</span> - è¯·æ±‚æ•°æ®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">res</span> - å“åº”æ•°æ®
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">handleGet</span>(<span class="hljs-params">serverId, req, res</span>) {
  <span class="hljs-keyword">const</span> sseProxy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseProxies</span>.<span class="hljs-title function_">get</span>(serverId);
  <span class="hljs-keyword">if</span> (!sseProxy) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æœåŠ¡å™¨ <span class="hljs-subst">${serverId}</span> çš„SSEè¿æ¥æœªæ‰¾åˆ°`</span>);
  }

  <span class="hljs-keyword">let</span> transportToClientClosed = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">let</span> transportToServerClosed = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">const</span> headers = {
    ...req.<span class="hljs-property">headers</span>,
    ...sseProxy.<span class="hljs-property">headers</span>,
    <span class="hljs-attr">accept</span>: <span class="hljs-string">'text/event-stream'</span>,
  };

  <span class="hljs-keyword">const</span> clientTransport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSEClientTransport</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(sseProxy.<span class="hljs-property">url</span>), {
    headers,
  });
  <span class="hljs-keyword">await</span> clientTransport.<span class="hljs-title function_">start</span>();

  <span class="hljs-keyword">const</span> messageEndpoint = <span class="hljs-string">'http://localhost:7001/mcp-endpoint/'</span> + serverId + <span class="hljs-string">'/messages'</span>;
  <span class="hljs-keyword">const</span> serverTransport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSEServerTransport</span>(messageEndpoint, res, {
    headers,
  });
  <span class="hljs-keyword">await</span> serverTransport.<span class="hljs-title function_">start</span>();

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">serverTransports</span>.<span class="hljs-title function_">set</span>(serverTransport.<span class="hljs-property">sessionId</span>, serverTransport);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">clientTransports</span>.<span class="hljs-title function_">set</span>(serverTransport.<span class="hljs-property">sessionId</span>, clientTransport);

  <span class="hljs-comment">// æ¡¥æ¥æ•°æ®äº¤æ¢</span>
  serverTransport.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> clientTransport.<span class="hljs-title function_">send</span>(message);
  clientTransport.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> serverTransport.<span class="hljs-title function_">send</span>(message);
  serverTransport.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (transportToServerClosed) {
      <span class="hljs-keyword">return</span>;
    }

    transportToClientClosed = <span class="hljs-literal">true</span>;
    clientTransport.<span class="hljs-title function_">close</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e));
  };
  clientTransport.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (transportToClientClosed) {
      <span class="hljs-keyword">return</span>;
    }
    transportToServerClosed = <span class="hljs-literal">true</span>;
    serverTransport.<span class="hljs-title function_">close</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e));
  };

}
</code></pre>
<p>POSTæ¶ˆæ¯è¯·æ±‚å¤„ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å¤„ç†POSTè¯·æ±‚
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">serverId</span> - æœåŠ¡å™¨ID
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">req</span> - è¯·æ±‚æ•°æ®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">res</span> - å“åº”æ•°æ®
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">handlePost</span>(<span class="hljs-params">serverId, req, res</span>) {
  <span class="hljs-keyword">const</span> sseProxy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseProxies</span>.<span class="hljs-title function_">get</span>(serverId);
  <span class="hljs-keyword">if</span> (!sseProxy) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æœåŠ¡å™¨ <span class="hljs-subst">${serverId}</span> çš„SSEè¿æ¥æœªæ‰¾åˆ°`</span>);
  }

  <span class="hljs-keyword">const</span> serverTransport = <span class="hljs-variable language_">this</span>.<span class="hljs-property">serverTransports</span>.<span class="hljs-title function_">get</span>(req.<span class="hljs-property">query</span>.<span class="hljs-property">sessionId</span>);

  <span class="hljs-keyword">if</span> (!serverTransport) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`session <span class="hljs-subst">${req.query.sessionId}</span> ä¸å­˜åœ¨`</span>);
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç”±äºEgg.jså·²ç»è§£æäº†è¯·æ±‚ä½“ï¼Œæˆ‘ä»¬éœ€è¦å°†è§£æå¥½çš„bodyä¼ é€’ç»™handlePostMessage</span>
    <span class="hljs-keyword">await</span> serverTransport.<span class="hljs-title function_">handlePostMessage</span>(req, res, req.<span class="hljs-property">body</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SSE POSTè¯·æ±‚å¤„ç†é”™è¯¯:`</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eaa5847249c4991b0314a5777543af6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=07gJJ5I7jlP2SvJr2QSGk42lxhM%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-12">Streamable HTTP</h5>
<p>å¦‚æœæœ¬èº«å°±æ˜¯Streamable HTTPç±»å‹çš„ï¼Œæˆ‘ä»¬åªåšè¯·æ±‚çš„ä»£ç†ï¼Œå°†ç›®æ ‡æœåŠ¡å™¨æˆ–è€…æ‰˜ç®¡åœ¨å“†å•¦Aæ¢¦ä¸åŒç«¯å£ä¸Šçš„MCPæœåŠ¡ï¼Œç»Ÿä¸€é€šè¿‡å“†å•¦Aæ¢¦mcpç«¯ç‚¹è®¿é—®ã€‚</p>
<p>ä»£ç†å®ç°ä¸SSEç›¸ä¼¼ï¼Œæ­¤å¤„ç•¥ã€‚</p>
<p>ä½†æ³¨æ„Streamable HTTPä½¿ç”¨ä¸€ä¸ª<code>/mcp</code>ç«¯ç‚¹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨3ç§æ–¹å¼è®¿é—®ï¼šPOSTã€GETã€DELETEã€‚</p>
<h4 data-id="heading-13">Stateless VS Statefulness</h4>
<p>Streamable HTTP MCPåœ¨å®šä¹‰æ—¶å­˜åœ¨æ— çŠ¶æ€ä¸æœ‰çŠ¶æ€æ¨¡å¼çš„åŒºåˆ†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æœ‰çŠ¶æ€</span>
transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHTTPServerTransport</span>({
  <span class="hljs-attr">sessionIdGenerator</span>: <span class="hljs-function">() =&gt;</span> sessionId,
  <span class="hljs-attr">onsessioninitialized</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–°ä¼šè¯åˆå§‹åŒ–: <span class="hljs-subst">${id}</span>`</span>);
  }
});

<span class="hljs-comment">// æ— çŠ¶æ€</span>
transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHTTPServerTransport</span>({
  <span class="hljs-attr">sessionIdGenerator</span>: <span class="hljs-literal">undefined</span>,
});
</code></pre>
<p>åœ¨æ— çŠ¶æ€æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè¿”å›<code>MCP-Session-Id</code>å“åº”å¤´ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ— æ³•è®¿é—®<code>GET</code>ä¸<code>DELETE</code>æ–¹æ³•ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…ˆè¡Œé€šè¿‡<code>initialize</code>è¿›è¡Œæ¡æ‰‹è¿æ¥ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œç¼ºç‚¹å°±æ˜¯æœåŠ¡å™¨ç«¯æ²¡æ³•è¿›è¡Œå®æ—¶é€šçŸ¥ï¼Œå¦‚<code>ToolListChanged</code>ç­‰æ¶ˆæ¯ã€‚</p>
<p>Stdioæœ¬èº«æ˜¯ä»¥ä¸€å¯¹ä¸€è¿æ¥å­˜åœ¨çš„ï¼Œä¸”ä¼šé•¿æœŸç»´æŒå­è¿›ç¨‹çš„å­˜åœ¨ï¼Œæ‰€ä»¥å±äº<code>statefulness</code>è¿™ä¸€ç±», å½“è½¬åŒ–ä¸ºStreamable HTTPæ—¶ï¼Œéœ€è¦æˆ‘ä»¬è‡ªè¡Œç®¡ç†sessionï¼ˆå½“å‰æš‚æ—¶å¤„ç†ä¸ºstatelessï¼‰ï¼›</p>
<p>SSEè‚¯å®šæ˜¯ä»¥<code>Statefulness</code>å­˜åœ¨ï¼Œæˆ‘ä»¬ä¼šåœ¨åç«¯å­˜å‚¨ä»£ç†çš„sessionä¿¡æ¯ã€‚</p>
<p>Streamable HTTP æˆ‘ä»¬èµ°å®Œå…¨ä»£ç†æ¨¡å¼ï¼Œæ˜¯å¦éœ€è¦çŠ¶æ€ç”±ç›®æ ‡MCPæœåŠ¡å™¨å†³å®šã€‚</p>
<h3 data-id="heading-14">æ•°æ®åº“è®¾è®¡</h3>
<p>é‡‡ç”¨å•è¡¨è®¾è®¡ï¼Œä¸éœ€è¦é¢å¤–å…³è”è¡¨</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `mcp_servers` (
    `id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'è‡ªå¢ä¸»é”®'</span>,
    `server_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœåŠ¡å™¨å”¯ä¸€æ ‡è¯†/åç§°'</span>,
    `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ˜¾ç¤ºæ ‡é¢˜'</span>,
    `description` text  COMMENT <span class="hljs-string">'æœåŠ¡å™¨æè¿°(æ”¯æŒMarkdown)'</span>,
    `author` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºè€…'</span>,
    `version` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç‰ˆæœ¬å·'</span>,
    `tags` json COMMENT <span class="hljs-string">'æ ‡ç­¾æ•°ç»„'</span>,
    `transport` enum(<span class="hljs-string">'stdio'</span>, <span class="hljs-string">'sse'</span>, <span class="hljs-string">'streamable-http'</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'stdio'</span> COMMENT <span class="hljs-string">'ä¼ è¾“åè®®ç±»å‹'</span>,
    `command` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">'å¯åŠ¨å‘½ä»¤(stdioç±»å‹)'</span>,
    `args` json COMMENT <span class="hljs-string">'å‘½ä»¤å‚æ•°æ•°ç»„(stdioç±»å‹)'</span>,
    `env` json COMMENT <span class="hljs-string">'ç¯å¢ƒå˜é‡å¯¹è±¡(stdioç±»å‹)'</span>,
    `http_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>)  COMMENT <span class="hljs-string">'HTTPè®¿é—®åœ°å€(httpç±»å‹)'</span>,
    `sse_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>)  COMMENT <span class="hljs-string">'SSEè®¿é—®åœ°å€(sseç±»å‹)'</span>,
    `git_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>)  COMMENT <span class="hljs-string">'Gitæºç åœ°å€'</span>,
    `deploy_path` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>)  COMMENT <span class="hljs-string">'æ‰˜ç®¡éƒ¨ç½²è·¯å¾„'</span>,
    `status` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'æœåŠ¡å™¨çŠ¶æ€ 1-å¯ç”¨ 0-ç¦ç”¨'</span>,
    `is_delete` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦åˆ é™¤ 1-å·²åˆ é™¤ 0-æœªåˆ é™¤'</span>,
    `use_count` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'ä½¿ç”¨æ¬¡æ•°'</span>,
    `tools` json COMMENT <span class="hljs-string">'å¯ç”¨å·¥å…·åˆ—è¡¨'</span>,
    `prompts` json COMMENT <span class="hljs-string">'å¯ç”¨æç¤ºè¯åˆ—è¡¨'</span>,
    `resources` json COMMENT <span class="hljs-string">'å¯ç”¨èµ„æºåˆ—è¡¨'</span>,
    `capabilities` json COMMENT <span class="hljs-string">'æœåŠ¡å™¨èƒ½åŠ›ä¿¡æ¯'</span>,
    `last_sync_at` datetime COMMENT <span class="hljs-string">'æœ€ååŒæ­¥æ—¶é—´'</span>,
    `runtime_status` enum(<span class="hljs-string">'running'</span>, <span class="hljs-string">'stopped'</span>, <span class="hljs-string">'error'</span>, <span class="hljs-string">'unknown'</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'unknown'</span> COMMENT <span class="hljs-string">'è¿è¡Œæ—¶çŠ¶æ€ running-è¿è¡Œä¸­ stopped-å·²åœæ­¢ error-é”™è¯¯ unknown-æœªçŸ¥'</span>,
    `last_ping_at` datetime COMMENT <span class="hljs-string">'æœ€åpingæ£€æŸ¥æ—¶é—´'</span>,
    `ping_error` text COMMENT <span class="hljs-string">'æœ€åpingæ£€æŸ¥é”™è¯¯ä¿¡æ¯'</span>,
    `created_at` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
    `updated_at` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_server_id` (`server_id`),
  ) ENGINE <span class="hljs-operator">=</span> InnoDB AUTO_INCREMENT <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8_bin
</code></pre>
<h3 data-id="heading-15">æ§åˆ¶å±‚</h3>
<p>æ”¯æŒ SSE ä¸ Streamable HTTPç«¯ç‚¹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * MCPä»£ç†ç«¯ç‚¹
 */</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/mcp'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointPost</span>);
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/mcp'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointGet</span>);
app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/mcp'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointDelete</span>);


app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/messages'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointPost</span>);
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/mcp-endpoint/:serverId/sse'</span>, app.<span class="hljs-property">controller</span>.<span class="hljs-property">mcp</span>.<span class="hljs-property">handleMCPEndpointGet</span>);
</code></pre>
<h3 data-id="heading-16">æœåŠ¡å±‚</h3>
<h4 data-id="heading-17">MCPServiceå±‚</h4>
<p>MCPServiceå±‚åŒ…å«æ‰€æœ‰æ•°æ®åº“æ¨¡å‹æ“ä½œï¼Œä½†ä¸åŒ…å«å…·ä½“çš„MCPå¤„ç†ï¼Œå¦‚MCPå¯åŠ¨ï¼Œé‡å¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> mcpProxy = <span class="hljs-title class_">MCPProxy</span>.<span class="hljs-title function_">getInstance</span>();

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MCPController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Controller</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleMCPEndpointGet</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { ctx } = <span class="hljs-variable language_">this</span>;
      <span class="hljs-keyword">const</span> { serverId } = ctx.<span class="hljs-property">params</span>;
      <span class="hljs-keyword">await</span> mcpProxy.<span class="hljs-title function_">forwardRequest</span>(serverId, ctx.<span class="hljs-property">request</span>, ctx.<span class="hljs-property">response</span>);
      ctx.<span class="hljs-property">respond</span> = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<h4 data-id="heading-18">MCPProxyå±‚</h4>
<p>MCPProxyå±‚åŒ…å«ä»¥ä¸‹ç»„æˆ</p>
<ol>
<li>MCPProxy (æ ¸å¿ƒä»£ç†)<br/>
å•ä¾‹æ¨¡å¼ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰MCPæœåŠ¡å™¨è¿æ¥<br/>
è·¯ç”±è¯·æ±‚åˆ°å¯¹åº”çš„ä¼ è¾“å¤„ç†å™¨<br/>
ç®¡ç†æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸï¼ˆå¯åŠ¨/åœæ­¢/é‡å¯ï¼‰</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MCPProxy</span> {

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MCPRequestManager</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">processManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MCPProcessManager</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stdioHandler</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StdioTransportHandler</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">processManager</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestManager</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseHandler</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSETransportHandler</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpHandler</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHttpTransportHandler</span>();
  }
  <span class="hljs-comment">// å•ä¾‹å®ç°</span>
  <span class="hljs-title function_">getInstance</span>()

  <span class="hljs-comment">// ç¼“å­˜MCP Serveré…ç½®ä¸forwardå…·ä½“çš„åè®®è½¬æ¢å¤„ç†</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">startProxy</span>(<span class="hljs-params">serverId, config</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åœæ­¢å·²å­˜åœ¨çš„ä»£ç†</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopProxy</span>(serverId);

      <span class="hljs-keyword">const</span> transport = config.<span class="hljs-property">transport</span> || { <span class="hljs-attr">type</span>: <span class="hljs-string">'stdio'</span> };
      <span class="hljs-keyword">let</span> handler;

      <span class="hljs-keyword">switch</span> (transport.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'stdio'</span>:
          handler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">stdioHandler</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'sse'</span>:
          handler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseHandler</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'streamable-http'</span>:
          handler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpHandler</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä¸æ”¯æŒçš„ä¼ è¾“ç±»å‹: <span class="hljs-subst">${transport.type}</span>`</span>);
      }

      <span class="hljs-comment">// å¯åŠ¨ä¼ è¾“å¤„ç†å™¨</span>
      <span class="hljs-keyword">await</span> handler.<span class="hljs-title function_">start</span>(serverId, config);

      <span class="hljs-comment">// è®°å½•ä½¿ç”¨çš„å¤„ç†å™¨</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">transportHandlers</span>.<span class="hljs-title function_">set</span>(serverId, handler);

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`MCPä»£ç†å·²å¯åŠ¨: <span class="hljs-subst">${serverId}</span> (<span class="hljs-subst">${transport.type}</span>)`</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`å¯åŠ¨MCPä»£ç†å¤±è´¥ [<span class="hljs-subst">${serverId}</span>]:`</span>, error);
      <span class="hljs-keyword">throw</span> error;
    }
  }
}
</code></pre>
<ol start="2">
<li>
<p>MCPRequestManager (è¯·æ±‚ç®¡ç†å™¨)<br/>
ç®¡ç†å¾…å¤„ç†è¯·æ±‚é˜Ÿåˆ—<br/>
IDæ˜ å°„ç®¡ç†ï¼ˆå®¢æˆ·ç«¯ID â†” å†…éƒ¨IDï¼‰<br/>
è¯·æ±‚è¶…æ—¶å¤„ç†<br/>
å“åº”è·¯ç”±å›è°ƒ</p>
</li>
<li>
<p>MCPProcessManager (STDIO transportè¿›ç¨‹ç®¡ç†å™¨)<br/>
è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†<br/>
è¿›ç¨‹é€šä¿¡ï¼ˆstdin/stdoutï¼‰<br/>
è¿›ç¨‹ç›‘æ§å’Œé”™è¯¯å¤„ç†<br/>
è¿›ç¨‹é‡å¯æœºåˆ¶</p>
</li>
<li>
<p>MCPSessionManager (ä¼šè¯ç®¡ç†å™¨)<br/>
SSEä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†<br/>
ä¼šè¯è¶…æ—¶æ¸…ç†<br/>
åè®®ç‰ˆæœ¬ç®¡ç†<br/>
ä¼šè¯ç»Ÿè®¡</p>
</li>
<li>
<p>ä¼ è¾“å¤„ç†å™¨ (Transport Handlers æ ¸å¿ƒå¤„ç†)<br/>
æ•´ä¸ªåè®®è½¬æ¢ä¸å…·ä½“çš„å¤„ç†</p>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">abstract <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseTransportHandler</span> {
    <span class="hljs-title function_">start</span>();
    <span class="hljs-title function_">stop</span>();
    <span class="hljs-comment">// ä¸ºMCPProxyæä¾›ç»Ÿä¸€çš„å…¥å£</span>
    <span class="hljs-title function_">forward</span>();
    <span class="hljs-title function_">handlePost</span>();
    <span class="hljs-title function_">handleGet</span>();
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StdioTransportHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseTransportHandler</span>{}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SSETransportHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseTransportHandler</span>{}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamableHttpTransportHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseTransportHandler</span>{}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/375d044f9bc947fdb9f4c7aabdef6914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=EPD%2B%2FQxaz7hLViocY4SB1JW0NQ8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19">çŠ¶æ€ç›‘æ§</h3>
<p>MCP Serveræ³¨å†Œåæ˜¯å¦å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä½¿ç”¨ClientTransportå‘é€ä¸€ä¸ªpingè¯·æ±‚æ¥è¯†åˆ«ï¼Œæ•°æ®åº“ä¸­ä½¿ç”¨<code>status</code>ã€<code>last_ping_at</code>ã€<code>ping_error</code>ä¸‰ä¸ªå­—æ®µæ¥å­˜å‚¨ç›¸å…³ä¿¡æ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fbasic%2Futilities%2Fping" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/basic/utilities/ping" ref="nofollow noopener noreferrer">modelcontextprotocol.io/specificatiâ€¦</a></p>
<p>å½“åœ¨æ³¨å†Œå®Œæˆã€ä¿®æ”¹ã€å¯åŠ¨ã€é‡å¯ç­‰æ“ä½œåï¼Œåº”ç«‹å³è°ƒç”¨ä¸€æ¬¡ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œåˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘é€ä¸€æ¬¡pingè¯·æ±‚ã€‚</p>
<h3 data-id="heading-20">Inspectoré›†æˆ</h3>
<p>æä¾›ä¸€ä¸ªåœ¨çº¿è°ƒè¯•å·¥å…·å°¤ä¸ºé‡è¦ï¼Œé‚£å¿«é€Ÿçš„å¸®åŠ©ä½¿ç”¨è€…æˆ–è€…æœåŠ¡å™¨æ‹¥æœ‰è€…æ’æŸ¥é—®é¢˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub1s.com%2Fmodelcontextprotocol%2Finspector%2Ftree%2Fmain" target="_blank" title="https://github1s.com/modelcontextprotocol/inspector/tree/main" ref="nofollow noopener noreferrer">@modelcontextprotocal/inspector</a> æ˜¯ä¸€ä¸ªmcpå®˜æ–¹æä¾›çš„webç«¯è°ƒè¯•å·¥å…·<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a6c585825e2428a8b004f6e4010f391~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=cZEHbehhnOrZu82XXtDZlOIrBwk%3D" alt="" loading="lazy"/></p>
<p>å…¶å®ç°ä»£ç åˆ†ä¸ºå‰ç«¯é¡µé¢ä¸serverç«¯ï¼Œserverç«¯ç”¨äºè·ŸçœŸå®æœåŠ¡å™¨é€šä¿¡ã€‚</p>
<p>å‰ç«¯ä½¿ç”¨viteä¸radix-uiï¼Œåç«¯æœåŠ¡é‡‡ç”¨exporess</p>
<p>å¦‚æœè¦é›†æˆè¿›å“†å•¦Aæ¢¦ï¼Œè€ƒè™‘ä¸‰ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>å¾®æœåŠ¡ï¼Œå°†inspectorç›´æ¥æŒ‰æºç çº§è¿ç§»åˆ°å“†å•¦Aæ¢¦ä¸­å¹¶å¼€æ”¾ä¸¤ä¸ªæ–°ç«¯å£ï¼Œå“†å•¦Aæ¢¦å¯åŠ¨æ—¶è¿å¸¦å¯åŠ¨inspectorå‰åç«¯æœåŠ¡ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•å®ç°æ‰“åŒ…</li>
<li>åˆå¹¶è¿ç§»ï¼Œinspectorçš„ä»£ç å®ç°å¹¶ä¸å¤æ‚ï¼Œå¯ä»¥è€ƒè™‘ä¸ç°æœ‰å“†å•¦Aæ¢¦ä»£ç æ•´åˆåˆå¹¶</li>
<li>ç‹¬ç«‹æœåŠ¡ï¼Œå°†inspectorä»¥iframeçš„å½¢å¼åµŒå…¥å“†å•¦Aæ¢¦ï¼Œéœ€è¦åœ¨å“†å•¦Aæ¢¦æœåŠ¡å™¨ä¸Šå•ç‹¬å¯åŠ¨inspector, å‰²è£‚æ„Ÿå¾ˆé‡ã€‚</li>
</ol>
<h3 data-id="heading-21">ç¯å¢ƒè¦æ±‚</h3>
<p>@modelcontextprotocal/sdk è¦æ±‚ node ç‰ˆæœ¬v18ä»¥ä¸Šï¼Œå“†å•¦Aæ¢¦ engines.node è¦æ±‚&gt;=14 &amp; &lt;=16, ä½¿ç”¨ node &gt;=18å¯åŠ¨å“†å•¦Aæ¢¦éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡<code>NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; egg-bin dev --daemon</code></p>
<h3 data-id="heading-22">å¤šè¿›ç¨‹é›†ç¾¤é€‚é…</h3>
<p>egg.jsåœ¨å¯åŠ¨æ—¶ä¼šé€šè¿‡ master è¿›ç¨‹å¸¦èµ·æ‰€æœ‰å…¶ä»–å­è¿›ç¨‹ï¼Œæ¯ä¸ªworkerç”¨æ¥æ‰§è¡Œæˆ‘ä»¬çš„å®é™…ä¸šåŠ¡ä»£ç ï¼ˆmvcæ¡†æ¶ï¼‰ï¼Œç±»ä¼¼äºnginxçš„è´Ÿè½½å‡è¡¡ï¼Œæ­¤å¤–è¿˜ä¼šåˆ›å»ºä¸€ä¸ª agent è¿›ç¨‹æ¥åšå•ç‹¬çš„æœåŠ¡ï¼Œå¦‚å®šæ—¶ä»»åŠ¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.eggjs.org%2Fzh-CN%2Fcore%2Fcluster-and-ipc%23agent-%25E6%259C%25BA%25E5%2588%25B6" target="_blank" title="https://www.eggjs.org/zh-CN/core/cluster-and-ipc#agent-%E6%9C%BA%E5%88%B6" ref="nofollow noopener noreferrer">cluster-and-ipc</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f81354edae9d4774ad25e542f9b8871e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KKL6byg5LqR5pWw5qCIVUVE5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764209756&amp;x-signature=yE45fmBK65j%2FeOFGurOyFEbuXpY%3D" alt="" loading="lazy"/></p>
<p>ç”±äºdoraemonåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šå¼€å¯å¤šè¿›ç¨‹é›†ç¾¤æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œæ¯ä¸ªworkeréƒ½ä¼šé‡å¤å®ä¾‹åŒ–æˆ‘ä»¬è®¾è®¡çš„å•ä¾‹MCPProxyï¼Œå¯¼è‡´ä¸åŒworkeré—´çš„mcpç›¸å…³çŠ¶æ€ä¸ä¸€è‡´ï¼Œmcp-sessionçŠ¶æ€ä¹Ÿæ— æ³•å…±äº«ã€‚</p>
<p>æ‰€ä»¥éœ€è¦åœ¨ controller å’Œ service ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç§»é™¤æ‰€æœ‰ç›´æ¥å¯¹ MCPProxy çš„æ“ä½œï¼Œä¸ºç¡®ä¿å®ä¾‹å”¯ä¸€ä¸çŠ¶æ€åŒæ­¥ï¼Œå°†MCPåº•å±‚æœåŠ¡å…¨éƒ¨ç§»åˆ° agent è¿›ç¨‹ä¸­ã€‚</p>
<p>MCPProxyçš„ä¸»è¦åŠŸèƒ½æ˜¯è½¬å‘ MCP çš„ç›´æ¥è¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ agent ä¸­å¼€å¯ä¸€ä¸ªç‹¬ç«‹çš„ http æœåŠ¡ï¼ˆä¸èƒ½åˆ©ç”¨Controllerï¼‰</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// agent.jsæ–‡ä»¶</span>

<span class="hljs-comment">// åˆå§‹åŒ–MCP HTTPå¤„ç†å™¨</span>
    <span class="hljs-keyword">const</span> mcpHttpHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MCPHttpHandler</span>(agent.<span class="hljs-property">logger</span>);
    <span class="hljs-keyword">let</span> httpServer = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// åˆ›å»ºHTTPæœåŠ¡ï¼ˆç”¨äºå¤„ç†MCPç«¯ç‚¹è¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">startHttpServer</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">const</span> port = process.<span class="hljs-property">env</span>.<span class="hljs-property">MCP_AGENT_HTTP_PORT</span> || env.<span class="hljs-property">mcpAgentHttpPort</span> || <span class="hljs-number">7005</span>;

        httpServer = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">async</span> (req, res) =&gt; {
            <span class="hljs-keyword">await</span> mcpHttpHandler.<span class="hljs-title function_">handleRequest</span>(req, res);
        });

        httpServer.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {
            agent.<span class="hljs-property">logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Agent MCP HTTPæœåŠ¡å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£: <span class="hljs-subst">${port}</span>`</span>);
        });

        httpServer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
            agent.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Agent MCP HTTPæœåŠ¡é”™è¯¯:'</span>, error);
        });
    };
</code></pre>
<p>å…¶æ¬¡ MCPProxy è¿˜åŒ…å« MCP æœåŠ¡çš„å¯åœ, è€Œ MCP å¯åœçš„æ—¶æœºæ˜¯é€šè¿‡ worker ä¸­ service å±‚è°ƒç”¨çš„ï¼Œå› æ­¤è¿˜éœ€è¦é€šè¿‡IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰çš„æ–¹å¼é€šçŸ¥ agentã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸€ä¸ªworkerçš„serviceä¸­</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">messenger</span>.<span class="hljs-title function_">sendToAgent</span>(<span class="hljs-string">'mcpRestart'</span>, { serverId });


<span class="hljs-comment">// agent.js</span>
agent.<span class="hljs-property">messenger</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mcpRestart'</span>, <span class="hljs-keyword">async</span> ({ serverId }) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">McpProxy</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">restartProxy</span>(serverId);
        agent.<span class="hljs-property">logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`MCPæœåŠ¡å™¨é‡å¯æˆåŠŸ [<span class="hljs-subst">${serverId}</span>]`</span>);
    } <span class="hljs-keyword">catch</span> (error) {
        agent.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`MCPæœåŠ¡å™¨é‡å¯å¤±è´¥ [<span class="hljs-subst">${serverId}</span>]:`</span>, error);
    }
});

</code></pre>
<h3 data-id="heading-23">MCP Serverä»£ç ç¼–å†™çº¦æŸ</h3>
<p>MCP Serverä¸­çš„<code>Server</code>ä¸<code>Transport</code>å’Œ<code>Client</code>æ˜¯ä¸€å¯¹ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åªèƒ½ä¸€ä¸ªäººè®¿é—®ä½ çš„MCPæœåŠ¡ï¼Œè¿™å¯¹äºæˆ‘ä»¬å®ç°Remote-MCPçš„åˆè¡·æ˜¯ä¸ç¬¦åˆçš„ã€‚</p>
<p>å³ä½¿æ˜¯æ–°çš„ transport åè®® streamable-httpï¼Œä¹Ÿæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªtabä¸­è°ƒç”¨åï¼Œåœ¨å¦ä¸€ä¸ªtabä¸­å†æ¬¡è¿æ¥è°ƒç”¨è¯·æ±‚ä¼šç›´æ¥å¡ä½ã€‚</p>
<p>å®˜æ–¹SDKæä¾›çš„ä½¿ç”¨æ¡ˆä¾‹ä¸­ç›®å‰å­˜åœ¨è¯¥é—®é¢˜, Serverå®šä¹‰åœ¨äº†å¤–éƒ¨ï¼Œå¯¼è‡´æ²¡æ³•å¯¹æ¯ä¸ªè¯·æ±‚åˆ†é…ç‹¬ç«‹çš„Transport<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Ftypescript-sdk" target="_blank" title="https://github.com/modelcontextprotocol/typescript-sdk" ref="nofollow noopener noreferrer">modelcontextprotocol/typescript-sdk</a></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Create an MCP server</span>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">McpServer</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'demo-server'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>
});

<span class="hljs-comment">// Set up Express and HTTP transport</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/mcp'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-comment">// Create a new transport for each request to prevent request ID collisions</span>
    <span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHTTPServerTransport</span>({
        <span class="hljs-attr">sessionIdGenerator</span>: <span class="hljs-literal">undefined</span>,
        <span class="hljs-attr">enableJsonResponse</span>: <span class="hljs-literal">true</span>
    });

    res.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
        transport.<span class="hljs-title function_">close</span>();
    });

    <span class="hljs-keyword">await</span> server.<span class="hljs-title function_">connect</span>(transport);
    <span class="hljs-keyword">await</span> transport.<span class="hljs-title function_">handleRequest</span>(req, res, req.<span class="hljs-property">body</span>);
});

<span class="hljs-keyword">const</span> port = <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-string">'3000'</span>);
app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Demo MCP Server running on http://localhost:<span class="hljs-subst">${port}</span>/mcp`</span>);
}).<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Server error:'</span>, error);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
});
</code></pre>
<p>å› æ­¤ï¼Œé’ˆå¯¹ streamable-http ä¸ sse ç±»å‹ï¼Œéœ€è¦å°†Serverçš„åˆ›å»ºæ”¾åœ¨è¯·æ±‚å¤„ç†ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æŠŠServerçš„å®šä¹‰ä»£ç å°è£…èµ·æ¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createServer</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">McpServer</span>() }

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/mcp'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">const</span> server = <span class="hljs-title function_">createServer</span>();
    <span class="hljs-comment">// Create a new transport for each request to prevent request ID collisions</span>
    <span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHTTPServerTransport</span>({
        <span class="hljs-attr">sessionIdGenerator</span>: <span class="hljs-literal">undefined</span>,
        <span class="hljs-attr">enableJsonResponse</span>: <span class="hljs-literal">true</span>
    });

    res.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
        transport.<span class="hljs-title function_">close</span>();
    });

    <span class="hljs-keyword">await</span> server.<span class="hljs-title function_">connect</span>(transport);
    <span class="hljs-keyword">await</span> transport.<span class="hljs-title function_">handleRequest</span>(req, res, req.<span class="hljs-property">body</span>);
});
</code></pre>
<h3 data-id="heading-24">Next</h3>
<ul>
<li>ä¸€é”®è½¬åŒ–APIè¯·æ±‚æ¥å£ =&gt; Streamable HTTP MCP</li>
<li>å¼¹æ€§å¯åŠ¨Stdioè¿›ç¨‹</li>
</ul>
<h2 data-id="heading-25">æœ€å</h2>
<p>æ¬¢è¿å…³æ³¨ã€è¢‹é¼ äº‘æ•°æ ˆUEDå›¢é˜Ÿã€‘~<br/>
è¢‹é¼ äº‘æ•°æ ˆ UED å›¢é˜ŸæŒç»­ä¸ºå¹¿å¤§å¼€å‘è€…åˆ†äº«æŠ€æœ¯æˆæœï¼Œç›¸ç»§å‚ä¸å¼€æºäº†æ¬¢è¿ star</p>
<ul>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdtstack.github.io%2FTaier%2F" target="_blank" title="https://dtstack.github.io/Taier/" ref="nofollow noopener noreferrer">å¤§æ•°æ®åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿâ€”â€”Taier</a></strong></li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdtstack.github.io%2Fmolecule%2F" target="_blank" title="https://dtstack.github.io/molecule/" ref="nofollow noopener noreferrer">è½»é‡çº§çš„ Web IDE UI æ¡†æ¶â€”â€”Molecule</a></strong></li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdtstack.github.io%2Fmonaco-sql-languages%2F" target="_blank" title="https://dtstack.github.io/monaco-sql-languages/" ref="nofollow noopener noreferrer">é’ˆå¯¹å¤§æ•°æ®é¢†åŸŸçš„ SQL Parser é¡¹ç›®â€”â€”dt-sql-parser</a></strong></li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDTStack%2Fcode-review-practices" target="_blank" title="https://github.com/DTStack/code-review-practices" ref="nofollow noopener noreferrer">è¢‹é¼ äº‘æ•°æ ˆå‰ç«¯å›¢é˜Ÿä»£ç è¯„å®¡å·¥ç¨‹å®è·µæ–‡æ¡£â€”â€”code-review-practices</a></strong></li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDTStack%2Fko" target="_blank" title="https://github.com/DTStack/ko" ref="nofollow noopener noreferrer">ä¸€ä¸ªé€Ÿåº¦æ›´å¿«ã€é…ç½®æ›´çµæ´»ã€ä½¿ç”¨æ›´ç®€å•çš„æ¨¡å—æ‰“åŒ…å™¨â€”â€”ko</a></strong></li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDTStack%2Fant-design-testing" target="_blank" title="https://github.com/DTStack/ant-design-testing" ref="nofollow noopener noreferrer">ä¸€ä¸ªé’ˆå¯¹ antd çš„ç»„ä»¶æµ‹è¯•å·¥å…·åº“â€”â€”ant-design-testing</a></strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹´è½»äººçš„ç¬¬ä¸€ä¸ª GO æ¡Œé¢åº”ç”¨ï¼šç”¨ Wails åšä¸ªå­¦ä¹ æ­å­è®¡æ—¶å™¨]]></title>    <link>https://juejin.cn/post/7574318108719530030</link>    <guid>https://juejin.cn/post/7574318108719530030</guid>    <pubDate>2025-11-20T01:03:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108719530030" data-draft-id="7574271557939724339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹´è½»äººçš„ç¬¬ä¸€ä¸ª GO æ¡Œé¢åº”ç”¨ï¼šç”¨ Wails åšä¸ªå­¦ä¹ æ­å­è®¡æ—¶å™¨"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-11-20T01:03:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Schuyler2025"/> <meta itemprop="url" content="https://juejin.cn/user/605198468525913"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹´è½»äººçš„ç¬¬ä¸€ä¸ª GO æ¡Œé¢åº”ç”¨ï¼šç”¨ Wails åšä¸ªå­¦ä¹ æ­å­è®¡æ—¶å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/605198468525913/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Schuyler2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T01:03:38.000Z" title="Thu Nov 20 2025 01:03:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‘Šåˆ«æ§åˆ¶å°åº”ç”¨ï¼Œç”¨Goè¯­è¨€æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªæ¡Œé¢è½¯ä»¶</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¯ ç—›ç‚¹åœºæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦æ¡Œé¢åº”ç”¨å¼€å‘æŠ€èƒ½ï¼Ÿ</h2>
<p><strong>ä½ æ˜¯å¦é‡åˆ°è¿™äº›é—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>å­¦äº†Goè¯­è¨€ï¼Œå´åªä¼šå†™å‘½ä»¤è¡Œå·¥å…·ï¼Ÿ</li>
<li>æƒ³å­¦æ¡Œé¢å¼€å‘ï¼Œå´è§‰å¾—C++/C#å¤ªå¤æ‚ï¼Ÿ</li>
<li>é¢è¯•å®˜å¯¹ä½ çš„â€œçƒ‚å¤§è¡—â€é¡¹ç›®ä¸æ„Ÿå…´è¶£ï¼Ÿ</li>
</ul>
<p><strong>ä½ èƒ½å­¦åˆ°ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>âœ…ï¸ Wails åŸºç¡€ä½¿ç”¨</li>
<li>âœ…ï¸ å®æ—¶äº‹ä»¶é€šä¿¡</li>
<li>âœ…ï¸ ç³»ç»Ÿæ‰˜ç›˜é›†æˆ</li>
<li>âœ…ï¸ å¤šçº¿ç¨‹ç¼–ç¨‹</li>
<li>âœ…ï¸ é™„å®Œæ•´æºç </li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6504bca8c83743ecac275e1ada22919c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764205417&amp;x-signature=GuUxO4PrH5yynuUMBaK5FvMyVqg%3D" alt="æµ‹è¯•æ•ˆæœ.gif" loading="lazy"/></p>
<h2 data-id="heading-1">ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-2">æ­¥éª¤1ï¼šå®‰è£…Goè¯­è¨€</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼šhttps://golang.org/dl/</span>
go version  <span class="hljs-comment"># éªŒè¯å®‰è£…</span>
</code></pre>
<h3 data-id="heading-3">æ­¥éª¤2ï¼šå®‰è£…Wailsæ¡†æ¶</h3>
<pre><code class="hljs language-bash" lang="bash">go install github.com/wailsapp/wails/v2/cmd/wails@latest
wails version  <span class="hljs-comment"># éªŒè¯å®‰è£…</span>
</code></pre>
<h3 data-id="heading-4">æ­¥éª¤3ï¼šåˆ›å»ºé¡¹ç›®éª¨æ¶</h3>
<pre><code class="hljs language-bash" lang="bash">wails init -n Punktime
<span class="hljs-built_in">cd</span> Punktime
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b3a9978a6b4b7fb90ce1dea8bd1376~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764205417&amp;x-signature=1GrCkiFWVTYEnYETfPVP5dIYc6k%3D" alt="wailsinit.jpg" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸš€ æ ¸å¿ƒåŠŸèƒ½å¼€å‘</h2>
<h3 data-id="heading-6">è®¾è®¡ UI ï¼ˆå‰ç«¯ï¼‰</h3>
<ul>
<li>
<p>ä½¿ç”¨ HTML/CSS/JavaScriptå®ç°ï¼š</p>
<ul>
<li>æ—¶é—´/å€’è®¡æ—¶ä¸»ç•Œé¢</li>
<li>å€’è®¡æ—¶è®¾ç½®é®ç½©å±‚</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ä»£ç </p>
</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ============================================================================
     * ä¸»ç•Œé¢ç»“æ„
     * åº”ç”¨ç¨‹åºçš„ä¸»è¦æ˜¾ç¤ºåŒºåŸŸ
     * ============================================================================ --&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»å®¹å™¨ï¼šæ˜¾ç¤ºå€’è®¡æ—¶/æ—¶é—´ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"countdown"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ============================================================================
     * å€’è®¡æ—¶è¾“å…¥æ¡†æ¨¡æ€å¯¹è¯æ¡†
     * ç”¨äºè®¾ç½®å€’è®¡æ—¶æ—¶é•¿çš„å¼¹å‡ºçª—å£
     * ============================================================================ --&gt;</span>

    <span class="hljs-comment">&lt;!-- å€’è®¡æ—¶è¾“å…¥æ¡†é®ç½©å±‚ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">id</span>=<span class="hljs-string">"countdownInputOverlay"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-overlay"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-title"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- åˆ†é’Ÿè¾“å…¥æ¡† --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
            <span class="hljs-attr">id</span>=<span class="hljs-string">"minutesInput"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input"</span>
            <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span>
            <span class="hljs-attr">max</span>=<span class="hljs-string">"59"</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">"25"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"åˆ†"</span>
          /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: lightgreen"</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- ç§’æ•°è¾“å…¥æ¡† --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
            <span class="hljs-attr">id</span>=<span class="hljs-string">"secondsInput"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input"</span>
            <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span>
            <span class="hljs-attr">max</span>=<span class="hljs-string">"59"</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç§’"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-buttons"</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- ç¡®è®¤æŒ‰é’® --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirmCountdown"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-button"</span>&gt;</span>
            ç¡®å®š
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- å–æ¶ˆæŒ‰é’® --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cancelCountdown"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown-input-button"</span>&gt;</span>
            å–æ¶ˆ
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">å®ç°è®¡æ—¶é€»è¾‘ï¼ˆGoåç«¯ï¼‰</h3>
<ul>
<li>æ ¸å¿ƒä»£ç </li>
</ul>
<pre><code class="hljs language-Go" lang="Go"><span class="hljs-comment">/**
 * @description: è®¡æ—¶å™¨æ›´æ–°å¾ªç¯ï¼Œæ¯ç§’æ‰§è¡Œä¸€æ¬¡çš„æ—¶é—´/å€’è®¡æ—¶æ›´æ–°é€»è¾‘
 * å‡½æ•°ä½œä¸ºè®¡æ—¶å™¨ç®¡ç†å™¨çš„æ ¸å¿ƒå¾ªç¯ï¼Œè´Ÿè´£ï¼š
 * 1. æ¯ç§’æ›´æ–°è®¡æ—¶å™¨çŠ¶æ€å’Œæ˜¾ç¤ºå†…å®¹
 * 2. æ ¹æ®å½“å‰æ˜¾ç¤ºæ¨¡å¼ï¼ˆå€’è®¡æ—¶/æ—¶é—´ï¼‰æ‰§è¡Œä¸åŒçš„æ›´æ–°é€»è¾‘
 * 3. å¤„ç†å€’è®¡æ—¶ç»“æŸäº‹ä»¶å’ŒçŠ¶æ€è½¬æ¢
 * 4. é€šè¿‡Wailsäº‹ä»¶ç³»ç»Ÿå‘å‰ç«¯å‘é€æ›´æ–°æ•°æ®
 *
 * å€’è®¡æ—¶æ¨¡å¼é€»è¾‘ï¼š
 * - è¿è¡Œä¸­ï¼šè®¡ç®—å‰©ä½™æ—¶é—´ï¼Œå€’è®¡æ—¶ç»“æŸæ—¶è§¦å‘timerEndäº‹ä»¶
 * - æš‚åœä¸­ï¼šæ˜¾ç¤ºæš‚åœæ—¶çš„å‰©ä½™æ—¶é—´
 * - æœªå¼€å§‹ï¼šæ˜¾ç¤ºè®¾ç½®çš„å€’è®¡æ—¶æ€»æ—¶é•¿
 *
 * æ—¶é—´æ¨¡å¼é€»è¾‘ï¼š
 * - æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
 *
 * @example
 * // æ¯ç§’è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨
 * // å€’è®¡æ—¶æ¨¡å¼ï¼šæ˜¾ç¤º"25:00" â†’ "24:59" â†’ ... â†’ "00:00"ï¼ˆè§¦å‘ç»“æŸäº‹ä»¶ï¼‰
 * // æ—¶é—´æ¨¡å¼ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´å¦‚"14:30"
 *
 * @see runtime.EventsEmit å‘é€äº‹ä»¶åˆ°å‰ç«¯
 * @see time.Since è®¡ç®—æ—¶é—´é—´éš”
 *
 * @note ä½¿ç”¨äº’æ–¥é”ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œé¿å…å¹¶å‘è®¿é—®è®¡æ—¶å™¨çŠ¶æ€
 * @note å€’è®¡æ—¶ç»“æŸæ—¶è‡ªåŠ¨é‡ç½®çŠ¶æ€å¹¶å‘é€ç»“æŸäº‹ä»¶
 * @note æ—¶é—´æ ¼å¼ç»Ÿä¸€ä¸ºä¸¤ä½æ•°ï¼ˆå¦‚"05:09"è€Œé"5:9"ï¼‰
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(tm *TimerManager)</span></span> updateLoop() {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> tm.ticker.C {
        tm.mu.Lock()
        <span class="hljs-keyword">if</span> tm.isTimerRunning {
                tm.timerElapsed = time.Since(tm.timerStartTime)
        }
        <span class="hljs-keyword">switch</span> tm.displayMode {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"countdown"</span>:
                <span class="hljs-keyword">if</span> tm.isTimerRunning {
                        remaining := tm.countdownDuration - tm.timerElapsed
                        <span class="hljs-keyword">if</span> remaining &lt;= <span class="hljs-number">0</span> {
                                remaining = <span class="hljs-number">0</span>
                                tm.isTimerRunning = <span class="hljs-literal">true</span>
                                tm.timerElapsed = tm.countdownDuration
                                tm.isPaused = <span class="hljs-literal">false</span>
                                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerEnd"</span>)

                                timerText := <span class="hljs-string">"00:00"</span>
                                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
                        } <span class="hljs-keyword">else</span> {
                                minutes := <span class="hljs-type">int</span>(remaining.Minutes())
                                seconds := <span class="hljs-type">int</span>(remaining.Seconds()) % <span class="hljs-number">60</span>
                                timerText := fmt.Sprintf(<span class="hljs-string">"%02d:%02d"</span>, minutes, seconds)
                                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
                        }

                } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> tm.isPaused {
                                remaining := tm.countdownDuration - tm.timerElapsed
                                <span class="hljs-keyword">if</span> remaining &lt; <span class="hljs-number">0</span> {
                                        remaining = <span class="hljs-number">0</span>
                                }
                                minutes := <span class="hljs-type">int</span>(remaining.Minutes())
                                seconds := <span class="hljs-type">int</span>(remaining.Seconds()) % <span class="hljs-number">60</span>
                                timerText := fmt.Sprintf(<span class="hljs-string">"%02d:%02d"</span>, minutes, seconds)
                                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
                        } <span class="hljs-keyword">else</span> {
                                minutes := <span class="hljs-type">int</span>(tm.countdownDuration.Minutes())
                                seconds := <span class="hljs-type">int</span>(tm.countdownDuration.Seconds()) % <span class="hljs-number">60</span>
                                timerText := fmt.Sprintf(<span class="hljs-string">"%02d:%02d"</span>, minutes, seconds)
                                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
                        }
                }

        <span class="hljs-keyword">case</span> <span class="hljs-string">"time"</span>:
                currentTime := time.Now().Format(<span class="hljs-string">"15:04"</span>)
                runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timeUpdate"</span>, currentTime)

        }
        tm.mu.Unlock()
}
}
</code></pre>
<ul>
<li>å‰åç«¯é€šä¿¡
<ul>
<li>å‰ç«¯è´Ÿè´£ç›‘å¬æ›´æ–°äº‹ä»¶å¹¶æ¸²æŸ“</li>
<li>åç«¯è´Ÿè´£è§¦å‘æ›´æ–°äº‹ä»¶å¹¶å‘é€æ•°æ®</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// ç›‘å¬å€’è®¡æ—¶æ›´æ–°äº‹ä»¶</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">runtime</span>.<span class="hljs-title class_">EventsOn</span>(<span class="hljs-string">"timerUpdate"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"countdown"</span>).<span class="hljs-property">textContent</span> = data;
  });
  <span class="hljs-comment">// ç›‘å¬æ—¶é—´æ˜¾ç¤ºæ›´æ–°äº‹ä»¶</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">runtime</span>.<span class="hljs-title class_">EventsOn</span>(<span class="hljs-string">"timeUpdate"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"countdown"</span>).<span class="hljs-property">textContent</span> = data;
  });
</code></pre>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> tm.isTimerRunning {
    remaining := tm.countdownDuration - tm.timerElapsed
    <span class="hljs-keyword">if</span> remaining &lt;= <span class="hljs-number">0</span> {
            remaining = <span class="hljs-number">0</span>
            tm.isTimerRunning = <span class="hljs-literal">true</span>
            tm.timerElapsed = tm.countdownDuration
            tm.isPaused = <span class="hljs-literal">false</span>
            runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerEnd"</span>)

            timerText := <span class="hljs-string">"00:00"</span>
            <span class="hljs-comment">// å‘é€äº‹ä»¶æ˜¾ç¤ºæ›´æ–°äº‹ä»¶</span>
            runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
    } <span class="hljs-keyword">else</span> {
            minutes := <span class="hljs-type">int</span>(remaining.Minutes())
            seconds := <span class="hljs-type">int</span>(remaining.Seconds()) % <span class="hljs-number">60</span>
            timerText := fmt.Sprintf(<span class="hljs-string">"%02d:%02d"</span>, minutes, seconds)
            <span class="hljs-comment">// å‘é€äº‹ä»¶æ˜¾ç¤ºæ›´æ–°äº‹ä»¶</span>
            runtime.EventsEmit(tm.ctx, <span class="hljs-string">"timerUpdate"</span>, timerText)
    }
</code></pre>
<h2 data-id="heading-8">ğŸ“¦ï¸ æ‰“åŒ…å‘å¸ƒ</h2>
<pre><code class="hljs language-bash" lang="bash">wails build
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117292d95bd142ceab2eab7283dc7e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764205417&amp;x-signature=%2FjvBQi75wyRssJOieuFuJ84b2iY%3D" alt="ç»“å°¾.jpg" loading="lazy"/></p>
<h2 data-id="heading-9">ğŸ“– å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwails.io%2Fzh-Hans%2Fdocs%2Fintroduction" target="_blank" title="https://wails.io/zh-Hans/docs/introduction" ref="nofollow noopener noreferrer">Wailså®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgobyexample.com%2F" target="_blank" title="https://gobyexample.com/" ref="nofollow noopener noreferrer">Goè¯­è¨€å®æˆ˜æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSchuyler2025%2FPunktime" target="_blank" title="https://github.com/Schuyler2025/Punktime" ref="nofollow noopener noreferrer">æœ¬é¡¹ç›®å®Œæ•´ä»£ç </a></li>
</ul>
<blockquote>
<p>ğŸ‘‹ä½ è¿˜å¸Œæœ›æœ‰å“ªäº›å­¦ä¹ æ­å­ï¼Ÿæ¬¢è¿ç•™è¨€ï¼</p>
<p>â¤ï¸å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµ + å…³æ³¨ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€URPã€‘Unity[RendererFeatures]æ¸²æŸ“å¯¹è±¡RenderObjects]]></title>    <link>https://juejin.cn/post/7574568258788720691</link>    <guid>https://juejin.cn/post/7574568258788720691</guid>    <pubDate>2025-11-20T02:02:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258788720691" data-draft-id="7574318108720169006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€URPã€‘Unity[RendererFeatures]æ¸²æŸ“å¯¹è±¡RenderObjects"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,Unity3D,å›¾å½¢å­¦"/> <meta itemprop="datePublished" content="2025-11-20T02:02:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€URPã€‘Unity[RendererFeatures]æ¸²æŸ“å¯¹è±¡RenderObjects
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:02:51.000Z" title="Thu Nov 20 2025 02:02:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0"><strong>RenderObjectsçš„å®šä¹‰ä¸ä½œç”¨</strong></h2>
<p>RenderObjectsæ˜¯URPæä¾›çš„RendererFeatureä¹‹ä¸€ï¼Œå…è®¸å¼€å‘è€…åœ¨ä¸ç¼–å†™ä»£ç çš„æƒ…å†µä¸‹å¯¹æ¸²æŸ“ç®¡çº¿è¿›è¡Œå®šåˆ¶ã€‚å®ƒé€šè¿‡é…ç½®å‚æ•°å®ç°é€‰æ‹©æ€§æ¸²æŸ“ç‰¹å®šå±‚çº§çš„ç‰©ä½“ã€æ§åˆ¶æ¸²æŸ“é¡ºåºã€é‡è½½æè´¨æˆ–æ¸²æŸ“çŠ¶æ€ç­‰åŠŸèƒ½57ã€‚å…¶æ ¸å¿ƒç”¨é€”åŒ…æ‹¬ï¼š</p>
<ul>
<li>â€Œ<strong>å±‚çº§è¿‡æ»¤</strong>â€Œï¼šä»…æ¸²æŸ“æŒ‡å®šLayerMaskçš„ç‰©ä½“</li>
<li>â€Œ<strong>æ¸²æŸ“æ—¶æœºæ§åˆ¶</strong>â€Œï¼šé€šè¿‡Eventå‚æ•°æ’å…¥åˆ°æ¸²æŸ“ç®¡çº¿çš„ä¸åŒé˜¶æ®µï¼ˆå¦‚AfterRenderingOpaquesï¼‰</li>
<li>â€Œ<strong>æè´¨æ›¿æ¢</strong>â€Œï¼šä½¿ç”¨Override Materialè¦†ç›–åŸæœ‰æè´¨</li>
<li>â€Œ<strong>å¤šPassæ¸²æŸ“</strong>â€Œï¼šé…åˆShaderçš„LightModeæ ‡ç­¾å®ç°æè¾¹ç­‰æ•ˆæœ</li>
</ul>
<h2 data-id="heading-1"><strong>å‘å±•å†å²</strong></h2>
<ul>
<li>åˆå§‹ç‰ˆæœ¬ï¼ˆ2020å¹´å‰ï¼‰ä½œä¸ºLWRPå®éªŒæ€§åŠŸèƒ½å¼•å…¥</li>
<li>2020å¹´URP 7.xç‰ˆæœ¬æ­£å¼é›†æˆï¼Œæä¾›åŸºç¡€å±‚è¿‡æ»¤å’Œæè´¨æ›¿æ¢</li>
<li>2021å¹´åå¢å¼ºæ·±åº¦/æ¨¡æ¿æ§åˆ¶ï¼Œæ”¯æŒé€æ˜ç‰©ä½“å¤„ç†</li>
<li>2022å¹´ä¼˜åŒ–APIç»“æ„ï¼Œæ˜ç¡®ScriptableRendererFeatureä¸RenderPassçš„åˆ†ç¦»</li>
</ul>
<h2 data-id="heading-2">åŸç†</h2>
<h3 data-id="heading-3"><strong>åº•å±‚åŸç†</strong></h3>
<ul>
<li>
<p>â€Œ<strong>æ¶æ„å±‚çº§</strong>â€Œ</p>
<p>RenderObjectsé€šè¿‡ç»§æ‰¿<code>ScriptableRendererFeature</code>å’Œ<code>ScriptableRenderPass</code>å®ç°ç®¡çº¿æ‰©å±•ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨<code>Execute()</code>æ–¹æ³•ä¸­é€šè¿‡<code>CommandBuffer</code>æäº¤ç»˜åˆ¶æŒ‡ä»¤ã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡URPçš„<code>ScriptableRenderContext</code>è°ƒåº¦GPUæ¸²æŸ“å‘½ä»¤ï¼Œä¸å†…ç½®ç®¡çº¿ä¸åŒä¹‹å¤„åœ¨äºé‡‡ç”¨å¯ç¼–ç¨‹çš„è½»é‡çº§æ¸²æŸ“ç®¡çº¿æ¶æ„ã€‚</p>
</li>
<li>
<p>â€Œ<strong>æ¸²æŸ“æµç¨‹æ§åˆ¶</strong>â€Œ</p>
<p>é€šè¿‡<code>RenderPassEvent</code>æšä¸¾æ’å…¥åˆ°URPçš„å›ºå®šç®¡çº¿é˜¶æ®µï¼ˆå¦‚AfterRenderingOpaquesï¼‰ï¼Œåº•å±‚ä¼šè§¦å‘ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>è°ƒç”¨<code>ConfigureTarget()</code>è®¾ç½®æ¸²æŸ“ç›®æ ‡</li>
<li>ä½¿ç”¨<code>FilteringSettings</code>è¿‡æ»¤æŒ‡å®šLayerçš„ç‰©ä½“</li>
<li>é€šè¿‡<code>DrawingSettings</code>é…ç½®Shader Passå’Œæ’åºè§„åˆ™</li>
</ul>
</li>
<li>
<p>â€Œ<strong>æè´¨æ›¿æ¢æœºåˆ¶</strong>â€Œ</p>
<p>å½“å¯ç”¨Override Materialæ—¶ï¼ŒURPä¼šä¸´æ—¶æ›¿æ¢åŸå§‹æè´¨çš„Shaderï¼Œä½†ä¿ç•™ç‰©ä½“çš„é¡¶ç‚¹æ•°æ®ã€‚è¯¥è¿‡ç¨‹é€šè¿‡<code>MaterialPropertyBlock</code>å®ç°åŠ¨æ€å‚æ•°ä¼ é€’ï¼Œé¿å…æè´¨å®ä¾‹åŒ–å¼€é”€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4"><strong>å®ç°ç¤ºä¾‹</strong></h3>
<ul>
<li>
<p>OutlineFeature.cs</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.Rendering;
<span class="hljs-keyword">using</span> UnityEngine.Rendering.Universal;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlineFeature</span> : <span class="hljs-title">ScriptableRendererFeature</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">OutlinePass</span> : <span class="hljs-title">ScriptableRenderPass</span> {
        <span class="hljs-keyword">private</span> Material _outlineMat;
        <span class="hljs-keyword">private</span> LayerMask _layerMask;
        <span class="hljs-keyword">private</span> FilteringSettings _filteringSettings;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OutlinePass</span>(<span class="hljs-params">Material mat, LayerMask mask</span>)</span> {
            _outlineMat = mat;
            _layerMask = mask;
            _filteringSettings = <span class="hljs-keyword">new</span> FilteringSettings(RenderQueueRange.opaque, _layerMask);
            renderPassEvent = RenderPassEvent.AfterRenderingOpaques;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData data</span>)</span> {
            <span class="hljs-keyword">var</span> drawingSettings = CreateDrawingSettings(
                <span class="hljs-keyword">new</span> ShaderTagId(<span class="hljs-string">"UniversalForward"</span>), 
                <span class="hljs-keyword">ref</span> data, 
                SortingCriteria.CommonOpaque
            );
            drawingSettings.overrideMaterial = _outlineMat;
            context.DrawRenderers(data.cullResults, <span class="hljs-keyword">ref</span> drawingSettings, <span class="hljs-keyword">ref</span> _filteringSettings);
        }
    }

    [<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> Material _outlineMaterial;
    [<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> LayerMask _outlineLayers = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">private</span> OutlinePass _pass;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>()</span> =&gt; _pass = <span class="hljs-keyword">new</span> OutlinePass(_outlineMaterial, _outlineLayers);
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData data</span>)</span> 
        =&gt; renderer.EnqueuePass(_pass);
}
</code></pre>
</li>
<li>
<p>Outline.shader</p>
<pre><code class="hljs language-c" lang="c">Shader <span class="hljs-string">"Custom/Outline"</span> {
    Properties {
        _OutlineColor(<span class="hljs-string">"Color"</span>, Color) = (<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)
        _OutlineWidth(<span class="hljs-string">"Width"</span>, Range(<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>)) = <span class="hljs-number">0.03</span>
    }
    SubShader {
        Tags { <span class="hljs-string">"RenderType"</span>=<span class="hljs-string">"Opaque"</span> <span class="hljs-string">"Queue"</span>=<span class="hljs-string">"Geometry+100"</span> }
        Pass {
            Cull Front
            ZWrite Off
            CGPROGRAM
            <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> vertex vert</span>
            <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> fragment frag</span>
            <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"UnityCG.cginc"</span></span>

            <span class="hljs-type">float</span> _OutlineWidth;
            fixed4 _OutlineColor;

            <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">appdata</span> {</span>
                float4 vertex : POSITION;
                float3 normal : NORMAL;
            };

            v2f <span class="hljs-title function_">vert</span><span class="hljs-params">(appdata v)</span> {
                v2f o;
                v.vertex.xyz += v.normal * _OutlineWidth;
                o.pos = UnityObjectToClipPos(v.vertex);
                <span class="hljs-keyword">return</span> o;
            }

            fixed4 <span class="hljs-title function_">frag</span><span class="hljs-params">(v2f i)</span> : SV_Target {
                <span class="hljs-keyword">return</span> _OutlineColor;
            }
            ENDCG
        }
    }
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-5"><strong>å…³é”®æµç¨‹è§£æ</strong></h3>
<ul>
<li>
<p>â€Œ<strong>æ¸²æŸ“æŒ‡ä»¤æäº¤</strong>â€Œ</p>
<p><code>DrawRenderers</code>æ–¹æ³•å†…éƒ¨ä¼šæ„å»º<code>BatchRendererGroup</code>ï¼Œå°†CPUä¾§çš„æ¸²æŸ“æ•°æ®æ‰¹é‡æäº¤è‡³GPUï¼Œç›¸æ¯”ç›´æ¥ä½¿ç”¨CommandBufferæ›´é«˜æ•ˆã€‚</p>
</li>
<li>
<p>â€Œ<strong>æ·±åº¦æµ‹è¯•æ§åˆ¶</strong>â€Œ</p>
<p>ç¤ºä¾‹ä¸­<code>ZWrite Off</code>ç¦ç”¨æ·±åº¦å†™å…¥ï¼Œä½¿æè¾¹å§‹ç»ˆæ˜¾ç¤ºåœ¨åŸå§‹ç‰©ä½“è¡¨é¢ï¼Œè¯¥æŠ€æœ¯ä¹Ÿå¸¸ç”¨äºè§£å†³é€æ˜ç‰©ä½“æ¸²æŸ“é¡ºåºé—®é¢˜ã€‚</p>
</li>
<li>
<p>â€Œ<strong>å¤šPassåä½œ</strong>â€Œ</p>
<p>URPä¼šå…ˆæ‰§è¡Œé»˜è®¤çš„Forwardæ¸²æŸ“Passï¼Œå†æ‰§è¡ŒRenderObjectsæ’å…¥çš„Passï¼Œé€šè¿‡<code>RenderPassEvent</code>æ§åˆ¶æ‰§è¡Œé¡ºåº</p>
</li>
</ul>
<h2 data-id="heading-6"><strong>å®Œæ•´å®ç°æµç¨‹ç¤ºä¾‹</strong></h2>
<ul>
<li>
<p>OutlineFeature.cs</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.Rendering;
<span class="hljs-keyword">using</span> UnityEngine.Rendering.Universal;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlineFeature</span> : <span class="hljs-title">ScriptableRendererFeature</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">OutlinePass</span> : <span class="hljs-title">ScriptableRenderPass</span> {
        <span class="hljs-keyword">private</span> Material outlineMat;
        <span class="hljs-keyword">private</span> LayerMask layerMask;
        <span class="hljs-keyword">private</span> RenderTargetIdentifier source;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OutlinePass</span>(<span class="hljs-params">Material mat, LayerMask mask</span>)</span> {
            outlineMat = mat;
            layerMask = mask;
            renderPassEvent = RenderPassEvent.AfterRenderingOpaques;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData data</span>)</span> {
            CommandBuffer cmd = CommandBufferPool.Get(<span class="hljs-string">"OutlinePass"</span>);
            <span class="hljs-keyword">var</span> drawSettings = CreateDrawingSettings(
                <span class="hljs-keyword">new</span> ShaderTagId(<span class="hljs-string">"UniversalForward"</span>), 
                <span class="hljs-keyword">ref</span> data, SortingCriteria.CommonOpaque);
            <span class="hljs-keyword">var</span> filterSettings = <span class="hljs-keyword">new</span> FilteringSettings(RenderQueueRange.opaque, layerMask);
            context.DrawRenderers(data.cullResults, <span class="hljs-keyword">ref</span> drawSettings, <span class="hljs-keyword">ref</span> filterSettings);
            CommandBufferPool.Release(cmd);
        }
    }

    [<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> Material outlineMaterial;
    [<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> LayerMask outlineLayers;
    <span class="hljs-keyword">private</span> OutlinePass pass;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>()</span> {
        pass = <span class="hljs-keyword">new</span> OutlinePass(outlineMaterial, outlineLayers);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData data</span>)</span> {
        renderer.EnqueuePass(pass);
    }
}
</code></pre>
</li>
<li>
<p>Outline.shader</p>
<pre><code class="hljs language-c" lang="c">Shader <span class="hljs-string">"Custom/Outline"</span> {
    Properties {
        _OutlineColor(<span class="hljs-string">"Color"</span>, Color) = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
        _OutlineWidth(<span class="hljs-string">"Width"</span>, Range(<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>)) = <span class="hljs-number">0.05</span>
    }
    SubShader {
        Tags { <span class="hljs-string">"RenderType"</span>=<span class="hljs-string">"Opaque"</span> <span class="hljs-string">"LightMode"</span>=<span class="hljs-string">"UniversalForward"</span> }
        Pass {
            CGPROGRAM
            <span class="hljs-comment">// Vertex expansion logic...</span>
            ENDCG
        }
    }
}
</code></pre>
</li>
</ul>
<h2 data-id="heading-7"><strong>å‚æ•°è¯¦è§£ä¸ç”¨ä¾‹</strong></h2>



































<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>â€Œ<strong>Event</strong>â€Œ</td><td>æ¸²æŸ“æ—¶æœºï¼ˆå¦‚BeforeRenderingPostProcessingï¼‰</td><td>æ§åˆ¶ç‰¹æ•ˆå åŠ é¡ºåº</td></tr><tr><td>â€Œ<strong>LayerMask</strong>â€Œ</td><td>ç›®æ ‡æ¸²æŸ“å±‚çº§</td><td>ä»…å¯¹æ•Œäºº/UIå±‚æè¾¹</td></tr><tr><td>â€Œ<strong>Override Material</strong>â€Œ</td><td>æ›¿æ¢æè´¨</td><td>è§’è‰²è¿›å…¥é˜´å½±åŒºåˆ‡æ¢æè´¨</td></tr><tr><td>â€Œ<strong>Depth Test</strong>â€Œ</td><td>æ·±åº¦æµ‹è¯•æ¨¡å¼</td><td>è§£å†³é€æ˜ç‰©ä½“é®æŒ¡é—®é¢˜</td></tr><tr><td>â€Œ<strong>Shader Passes</strong>â€Œ</td><td>åŒ¹é…çš„Shader LightModeæ ‡ç­¾</td><td>å¤šPassæ¸²æŸ“ï¼ˆå¦‚"UniversalForward"ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-8"><strong>é…ç½®æ­¥éª¤</strong></h2>
<ul>
<li>åˆ›å»ºURP Assetå¹¶å¯ç”¨Renderer Features</li>
<li>æ·»åŠ RenderObjects Featureåˆ°Forward Renderer</li>
<li>é…ç½®Eventä¸ºAfterRenderingOpaquesï¼ˆä¸é€æ˜ç‰©ä½“ï¼‰æˆ–AfterRenderingTransparentsï¼ˆé€æ˜ç‰©ä½“ï¼‰</li>
<li>æŒ‡å®šç›®æ ‡Layerå’Œæ›¿æ¢æè´¨</li>
<li>è°ƒæ•´Depth/Stencilå‚æ•°è§£å†³é®æŒ¡é—®é¢˜</li>
</ul>
<p>å…¸å‹åº”ç”¨åŒ…æ‹¬ï¼šè§’è‰²æè¾¹ã€åœºæ™¯åˆ†å—æ¸²æŸ“ã€ç‰¹æ®Šæ•ˆæœå åŠ ï¼ˆå¦‚å—ä¼¤é«˜äº®ï¼‰ç­‰ã€‚é€šè¿‡ç»„åˆä¸åŒEventå’ŒLayerMaskå¯å®ç°å¤æ‚çš„æ¸²æŸ“ç®¡çº¿æ§åˆ¶</p>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Room ç®€å•ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7574343024324509737</link>    <guid>https://juejin.cn/post/7574343024324509737</guid>    <pubDate>2025-11-20T01:35:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574343024324509737" data-draft-id="7574343024324427817" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Room ç®€å•ä½¿ç”¨"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-20T01:35:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Charlieç¬"/> <meta itemprop="url" content="https://juejin.cn/user/2221480830311645"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Room ç®€å•ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2221480830311645/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Charlieç¬
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T01:35:07.000Z" title="Thu Nov 20 2025 01:35:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ›å»º item å®ä½“</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroidx%2Froom%2FEntity%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/reference/androidx/room/Entity?hl=zh-cn" ref="nofollow noopener noreferrer">Entity</a> ç±»å®šä¹‰äº†ä¸€ä¸ªè¡¨ï¼Œè¯¥ç±»çš„æ¯ä¸ªå®ä¾‹éƒ½è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œã€‚Entity ç±»ä»¥æ˜ å°„å‘ŠçŸ¥ Room å®ƒæ‰“ç®—å¦‚ä½•å‘ˆç°æ•°æ®åº“ä¸­çš„ä¿¡æ¯å¹¶ä¸ä¹‹äº¤äº’ã€‚åœ¨æ­¤åº”ç”¨ä¸­ï¼Œå®ä½“å°†ä¿å­˜æœ‰å…³å•†å“ç›®å½•å•†å“çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å•†å“åç§°ã€å•†å“ä»·æ ¼å’Œå•†å“æ•°é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c56e74d909ee4fa89f1728b43e98e242~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxpZeeBrA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764207307&amp;x-signature=u1xQvfnU1FyQ%2FK0Jp1zKx0YnmZo%3D" alt="" loading="lazy"/></p>
<p><code>@Entity</code> æ³¨è§£ç”¨äºå°†æŸä¸ªç±»æ ‡è®°ä¸ºæ•°æ®åº“ Entity ç±»ã€‚å¯¹äºæ¯ä¸ª Entity ç±»ï¼Œè¯¥åº”ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨æ¥ä¿å­˜è¿™äº›é¡¹ã€‚é™¤éå¦è¡Œè¯´æ˜ï¼Œå¦åˆ™ Entity çš„æ¯ä¸ªå­—æ®µåœ¨æ•°æ®åº“ä¸­éƒ½è¡¨ç¤ºä¸ºä¸€åˆ—ã€‚å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ¯ä¸ªå®ä½“å®ä¾‹éƒ½å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroidx%2Froom%2FPrimaryKey%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/reference/androidx/room/PrimaryKey?hl=zh-cn" ref="nofollow noopener noreferrer">ä¸»é”®</a>ç”¨äºå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªè®°å½•/æ¡ç›®ã€‚åº”ç”¨åˆ†é…ä¸»é”®åï¼Œä¾¿æ— æ³•å†ä¿®æ”¹ä¸»é”®ï¼›åªè¦ä¸»é”®å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œå®ƒå°±ä¼šè¡¨ç¤ºå®ä½“å¯¹è±¡ã€‚</p>
<p>åœ¨æ­¤ä»»åŠ¡ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ª Entity ç±»ï¼Œå¹¶å®šä¹‰å­—æ®µæ¥å­˜å‚¨æ¯ä¸ªå•†å“çš„ä»¥ä¸‹å•†å“ç›®å½•ä¿¡æ¯ï¼š<code>Int</code> ç”¨äºå­˜å‚¨ä¸»é”®ï¼Œ<code>String</code> ç”¨äºå­˜å‚¨å•†å“åç§°ï¼Œ<code>double</code> ç”¨äºå­˜å‚¨å•†å“ä»·æ ¼ï¼Œ<code>Int</code> ç”¨äºå­˜å‚¨åº“å­˜æ•°é‡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity(tableName = <span class="hljs-string">"items"</span>)</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span>(
    <span class="hljs-meta">@PrimaryKey(autoGenerate = true)</span>
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> price: <span class="hljs-built_in">Double</span>,
    <span class="hljs-keyword">val</span> quantity: <span class="hljs-built_in">Int</span>
)
</code></pre>
<h2 data-id="heading-1">åˆ›å»º item DAO</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroidx%2Froom%2FDao%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/reference/androidx/room/Dao?hl=zh-cn" ref="nofollow noopener noreferrer">æ•°æ®è®¿é—®å¯¹è±¡</a> (DAO) æ˜¯ä¸€ç§æ¨¡å¼ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSingle-responsibility_principle" target="_blank" title="https://en.wikipedia.org/wiki/Single-responsibility_principle" ref="nofollow noopener noreferrer">å•ä¸€è´£ä»»åŸåˆ™</a>ï¼‰ï¼Œå…¶ä½œç”¨æ˜¯é€šè¿‡æä¾›æŠ½è±¡æ¥å£å°†æŒä¹…æ€§å±‚ä¸åº”ç”¨çš„å…¶ä½™éƒ¨åˆ†åˆ†ç¦»ï¼Œè´Ÿè´£å®šä¹‰ç”¨äºè®¿é—®æ•°æ®åº“çš„æ¥å£ã€‚</p>
<p>DAO çš„åŠŸèƒ½åœ¨äºï¼Œè®©åœ¨åº•å±‚æŒä¹…æ€§å±‚æ‰§è¡Œæ•°æ®åº“æ“ä½œæ‰€æ¶‰åŠçš„æ‰€æœ‰å¤æ‚æ€§ä¸åº”ç”¨çš„å…¶ä½™éƒ¨åˆ†åˆ†ç¦»ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨æ•°æ®çš„ä»£ç æ›´æ”¹æ•°æ®å±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9387fb71af9d459ba6d0086bdd42bd9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxpZeeBrA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764207307&amp;x-signature=Bo%2Facks19fSFaBJmjb8v47aAO2c%3D" alt="" loading="lazy"/></p>
<p><code>Room</code> åº“æä¾›äº†ä¾¿æ·æ³¨è§£ï¼ˆä¾‹å¦‚ <code>@Insert</code>ã€<code>@Delete</code> å’Œ <code>@Update</code>ï¼‰ï¼Œç”¨äºå®šä¹‰æ‰§è¡Œç®€å•æ’å…¥ã€åˆ é™¤å’Œæ›´æ–°çš„æ–¹æ³•ï¼Œè€Œæ— éœ€ç¼–å†™ SQL è¯­å¥ã€‚å¦‚æœéœ€è¦å®šä¹‰æ›´å¤æ‚çš„æ’å…¥ã€åˆ é™¤æˆ–æ›´æ–°æ“ä½œï¼Œæˆ–è€…éœ€è¦æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè¯·æ”¹ç”¨ <code>@Query</code> æ³¨è§£ã€‚</p>
<p>æ•°æ®åº“æ“ä½œçš„æ‰§è¡Œå¯èƒ½ç”¨æ—¶è¾ƒé•¿ï¼Œå› æ­¤éœ€è¦åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸Šè¿è¡Œã€‚Room ä¸å…è®¸åœ¨ä¸»çº¿ç¨‹ä¸Šè®¿é—®æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> androidx.room.Dao

<span class="hljs-meta">@Dao</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemDao</span> {

    <span class="hljs-meta">@Insert(onConflict = OnConflictStrategy.IGNORE)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insert</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>

    <span class="hljs-meta">@Update</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">update</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>

    <span class="hljs-meta">@Delete</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">delete</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>

    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * from items WHERE id = :id"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItem</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;Item&gt;

    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * from items ORDER BY name ASC"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllItems</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Item&gt;&gt;
}
</code></pre>
<blockquote>
<p>æ·»åŠ å‚æ•° <code>onConflict</code> å¹¶ä¸ºå…¶èµ‹å€¼ <code>OnConflictStrategy.``IGNORE</code>ã€‚å‚æ•° <code>onConflict</code> ç”¨äºå‘ŠçŸ¥ Room åœ¨å‘ç”Ÿå†²çªæ—¶åº”è¯¥æ‰§è¡Œçš„æ“ä½œã€‚<code>OnConflictStrategy.``IGNORE</code> ç­–ç•¥ä¼šå¿½ç•¥æ–°å•†å“ã€‚</p>
<p>ç”±äºè¿”å›å€¼ç±»å‹ä¸º <code>Flow</code>ï¼ŒRoom è¿˜ä¼šåœ¨åå°çº¿ç¨‹ä¸Šè¿è¡Œè¯¥æŸ¥è¯¢ã€‚æ— éœ€å°†å…¶æ˜ç¡®è®¾ä¸º <code>suspend</code> å‡½æ•°å¹¶åœ¨åç¨‹ä½œç”¨åŸŸå†…è°ƒç”¨å®ƒã€‚</p>
</blockquote>
<h2 data-id="heading-2">åˆ›å»º Database å®ä¾‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroidx%2Froom%2FDatabase%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/reference/androidx/room/Database?hl=zh-cn" ref="nofollow noopener noreferrer">Database</a> ç±»å¯ä¸ºåº”ç”¨æä¾›å®šä¹‰çš„ DAO å®ä¾‹ã€‚åè¿‡æ¥ï¼Œåº”ç”¨å¯ä»¥ä½¿ç”¨ DAO ä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå…³è”çš„æ•°æ®å®ä½“å¯¹è±¡çš„å®ä¾‹ã€‚æ­¤å¤–ï¼Œåº”ç”¨è¿˜å¯ä»¥ä½¿ç”¨å®šä¹‰çš„æ•°æ®å®ä½“æ›´æ–°ç›¸åº”è¡¨ä¸­çš„è¡Œï¼Œæˆ–è€…åˆ›å»ºæ–°è¡Œä¾›æ’å…¥ã€‚</p>
<p>éœ€è¦åˆ›å»ºä¸€ä¸ªæŠ½è±¡ <code>RoomDatabase</code> ç±»ï¼Œå¹¶ä¸ºå…¶æ·»åŠ  <code>@Database</code> æ³¨è§£ã€‚æ­¤ç±»æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å› <code>RoomDatabase</code> çš„ç°æœ‰å®ä¾‹ã€‚</p>
<p><strong>è·å– <strong><code>**RoomDatabase**</code></strong> å®ä¾‹çš„ä¸€èˆ¬è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ‰©å±• <code>RoomDatabase</code> çš„ <code>public abstract</code> ç±»ã€‚æ‚¨å®šä¹‰çš„æ–°æŠ½è±¡ç±»å°†ç”¨ä½œæ•°æ®åº“æŒæœ‰è€…ã€‚æ‚¨å®šä¹‰çš„ç±»æ˜¯æŠ½è±¡ç±»ï¼Œå› ä¸º <code>Room</code> ä¼šä¸ºæ‚¨åˆ›å»ºå®ç°ã€‚</li>
<li>ä¸ºè¯¥ç±»æ·»åŠ  <code>@Database</code> æ³¨è§£ã€‚åœ¨å‚æ•°ä¸­ï¼Œä¸ºæ•°æ®åº“åˆ—å‡ºå®ä½“å¹¶è®¾ç½®ç‰ˆæœ¬å·ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªè¿”å› <code>ItemDao</code> å®ä¾‹çš„æŠ½è±¡æ–¹æ³•æˆ–å±æ€§ï¼Œ<code>Room</code> ä¼šä¸ºæ‚¨ç”Ÿæˆå®ç°ã€‚</li>
<li>æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¸€ä¸ª <code>RoomDatabase</code> å®ä¾‹ï¼Œå› æ­¤è¯·å°† <code>RoomDatabase</code> è®¾ä¸ºå•ä¾‹ã€‚</li>
<li>ä½¿ç”¨ <code>Room</code> çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroidx%2Froom%2FRoom%3Fhl%3Dzh-cn%23databaseBuilder(android.content.Context%2Cjava.lang.Class%2Ckotlin.String)" target="_blank" title="https://developer.android.com/reference/androidx/room/Room?hl=zh-cn#databaseBuilder(android.content.Context,java.lang.Class,kotlin.String)" ref="nofollow noopener noreferrer">Room.databaseBuilder</a> åˆ›å»º (<code>item_database</code>) æ•°æ®åº“ã€‚ä¸è¿‡ï¼Œä»…å½“è¯¥æ•°æ®åº“ä¸å­˜åœ¨æ—¶æ‰åº”åˆ›å»ºã€‚å¦åˆ™ï¼Œè¯·è¿”å›ç°æœ‰æ•°æ®åº“ã€‚</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> androidx.room.Database
<span class="hljs-keyword">import</span> androidx.room.Room
<span class="hljs-keyword">import</span> androidx.room.RoomDatabase

<span class="hljs-comment">/**
* Database class with a singleton Instance object.
*/</span>
<span class="hljs-meta">@Database(entities = [Item::class], version = 1, exportSchema = false)</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryDatabase</span> : <span class="hljs-type">RoomDatabase</span>() {

    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">itemDao</span><span class="hljs-params">()</span></span>: ItemDao

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-meta">@Volatile</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> Instance: InventoryDatabase? = <span class="hljs-literal">null</span>

        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDatabase</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: InventoryDatabase {
            <span class="hljs-comment">// if the Instance is not null, return it, otherwise create a new database instance.</span>
            <span class="hljs-keyword">return</span> Instance ?: synchronized(<span class="hljs-keyword">this</span>) {
                Room.databaseBuilder(context, InventoryDatabase::<span class="hljs-keyword">class</span>.java, <span class="hljs-string">"item_database"</span>)
                    .build()
                    .also { Instance = it }
            }
        }
    }
}
</code></pre>
<blockquote>
<p>å°† <code>exportSchema</code> è®¾ä¸º <code>false</code>ï¼Œè¿™æ ·å°±ä¸ä¼šä¿ç•™æ¶æ„ç‰ˆæœ¬è®°å½•çš„å¤‡ä»½ã€‚</p>
<p>volatile å˜é‡çš„å€¼ç»ä¸ä¼šç¼“å­˜ï¼Œæ‰€æœ‰è¯»å†™æ“ä½œéƒ½å°†åœ¨ä¸»å†…å­˜ä¸­å®Œæˆã€‚è¿™äº›åŠŸèƒ½æœ‰åŠ©äºç¡®ä¿ <code>Instance</code> çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”å¯¹æ‰€æœ‰æ‰§è¡Œçº¿ç¨‹éƒ½ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ <code>Instance</code> æ‰€åšçš„æ›´æ”¹ä¼šç«‹å³å¯¹æ‰€æœ‰å…¶ä»–çº¿ç¨‹å¯è§ã€‚</p>
</blockquote>
<h2 data-id="heading-3">å®ç°å­˜å‚¨åº“</h2>
<p>å°†å®ç° <code>ItemsRepository</code> æ¥å£å’Œ <code>OfflineItemsRepository</code> ç±»ï¼Œä»¥ä»æ•°æ®åº“æä¾› <code>get</code>ã€<code>insert</code>ã€<code>delete</code> å’Œ <code>update</code> å®ä½“ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.flow.Flow

<span class="hljs-comment">/**
* Repository that provides insert, update, delete, and retrieve of [Item] from a given data source.
*/</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemsRepository</span> {
    <span class="hljs-comment">/**
     * Retrieve all the items from the the given data source.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllItemsStream</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Item&gt;&gt;

    <span class="hljs-comment">/**
     * Retrieve an item from the given data source that matches with the [id].
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemStream</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;Item?&gt;

    <span class="hljs-comment">/**
     * Insert item in the data source
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>

    <span class="hljs-comment">/**
     * Delete item from the data source
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>

    <span class="hljs-comment">/**
     * Update item in the data source
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span>
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.flow.Flow

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OfflineItemsRepository</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> itemDao: ItemDao) : ItemsRepository {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllItemsStream</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Item&gt;&gt; = itemDao.getAllItems()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemStream</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;Item?&gt; = itemDao.getItem(id)

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> = itemDao.insert(item)

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deleteItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> = itemDao.delete(item)

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> = itemDao.update(item)
}
</code></pre>
<h2 data-id="heading-4">å®ç° AppContainer ç±»</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> itemsRepository: ItemsRepository <span class="hljs-keyword">by</span> lazy {
    OfflineItemsRepository(InventoryDatabase.getDatabase(context).itemDao())
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FiddleræŠ“åŒ…å·¥å…·å®Œæ•´æ•™ç¨‹ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸APIè°ƒè¯•å®æˆ˜æŠ€å·§ï¼ˆå¼€å‘è€…è¿›é˜¶æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7574352425236709395</link>    <guid>https://juejin.cn/post/7574352425236709395</guid>    <pubDate>2025-11-20T02:24:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574352425236709395" data-draft-id="7574366319736258596" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FiddleræŠ“åŒ…å·¥å…·å®Œæ•´æ•™ç¨‹ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸APIè°ƒè¯•å®æˆ˜æŠ€å·§ï¼ˆå¼€å‘è€…è¿›é˜¶æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T02:24:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿæ˜Ÿç”µç¯çŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2848205394945444"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FiddleræŠ“åŒ…å·¥å…·å®Œæ•´æ•™ç¨‹ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸APIè°ƒè¯•å®æˆ˜æŠ€å·§ï¼ˆå¼€å‘è€…è¿›é˜¶æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2848205394945444/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿæ˜Ÿç”µç¯çŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:24:09.000Z" title="Thu Nov 20 2025 02:24:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¾ˆå¤šç¨‹åºå‘˜éƒ½æœ‰è¿™æ ·çš„ç»å†ï¼šæ¥å£æ˜æ˜èƒ½è¯·æ±‚æˆåŠŸï¼Œå´æ‹¿ä¸åˆ°æ•°æ®ï¼›æµ‹è¯•ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ï¼Œç”Ÿäº§ç¯å¢ƒå´é¢‘ç¹è¶…æ—¶ï¼›ç§»åŠ¨ç«¯è¯·æ±‚å‚æ•°æ€»æ˜¯â€œç¥ç§˜æ¶ˆå¤±â€ï¼Œå‰åç«¯äº’ç›¸ç”©é”…ã€‚</p>
<p>è¿™äº›é—®é¢˜çš„æ ¹æºï¼Œå¤§å¤šéšè—åœ¨ç½‘ç»œå±‚ã€‚
è€Œæƒ³â€œçœ‹æ¸…æ¥šç½‘ç»œè¯·æ±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œæœ€æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ä¸€æ¬¾ä¸“ä¸šçš„æŠ“åŒ…è°ƒè¯•å·¥å…·ã€‚</p>
<p>ä»Šå¤©è¦ä»‹ç»çš„è¿™æ¬¾å·¥å…·ï¼Œå‡ ä¹æ˜¯æ¯ä½å¼€å‘è€…éƒ½ä¼šå®‰è£…åœ¨ç”µè„‘ä¸Šçš„â€œæ ‡é…â€â€”â€”<strong>FiddleræŠ“åŒ…å·¥å…·</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿè®²è§£ Fiddler çš„å®‰è£…é…ç½®ã€ä»£ç†è®¾ç½®ã€HTTPS æŠ“åŒ…ã€Mock æ¥å£ä¸è°ƒè¯•æŠ€å·§ï¼Œå¹¶ç»“åˆçœŸå®å¼€å‘åœºæ™¯ï¼Œä¸ºä½ æ€»ç»“å‡ºé«˜æ•ˆã€å®ç”¨çš„è°ƒè¯•æ–¹æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸å‡ºå“çš„ä¸€æ¬¾å…è´¹ HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚
å®ƒé€šè¿‡ä»£ç†æœºåˆ¶æ•è·ç½‘ç»œè¯·æ±‚ï¼Œå¸®åŠ©å¼€å‘è€…åˆ†æã€ä¿®æ”¹ã€é‡æ”¾ã€æ¨¡æ‹Ÿå’Œæµ‹è¯•å„ç§æ¥å£é€šä¿¡ã€‚</p>
<p>ä¸å¸¸è§å·¥å…·ï¼ˆå¦‚ Charlesã€Postmanã€Wiresharkï¼‰ç›¸æ¯”ï¼ŒFiddler å…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å…¨é¢æ”¯æŒ HTTP / HTTPS åè®®</strong>ï¼›</li>
<li><strong>å¯æŸ¥çœ‹è¯·æ±‚ã€å“åº”ã€Headerã€å‚æ•°ä¸æ€§èƒ½æ•°æ®</strong>ï¼›</li>
<li><strong>æ”¯æŒæ–­ç‚¹è°ƒè¯•ä¸è¯·æ±‚ä¿®æ”¹</strong>ï¼›</li>
<li><strong>å†…ç½® Mock åŠŸèƒ½ï¼ˆAutoResponderï¼‰</strong>ï¼›</li>
<li><strong>å…è´¹ã€ç¨³å®šã€å¯æ‰©å±•æ€§å¼º</strong>ã€‚</li>
</ul>
<p>Fiddler æ˜¯ä¸€æ¬¾è®©å¼€å‘è€…â€œçœ‹å¾—æ¸…ã€æ”¹å¾—åŠ¨ã€æµ‹å¾—å‡†â€çš„ç½‘ç»œè°ƒè¯•åˆ©å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®æ–¹æ³•</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>åœ¨ Windows ç³»ç»Ÿä¸­å®‰è£… Fiddler åï¼Œé¦–æ¬¡å¯åŠ¨æ—¶è½¯ä»¶ä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
æ­¤æ—¶æ‰“å¼€ä»»æ„æµè§ˆå™¨è®¿é—®ç½‘ç«™ï¼Œå³å¯åœ¨ Fiddler ä¸»ç•Œé¢çœ‹åˆ°æ‰€æœ‰ HTTP è¯·æ±‚ã€‚</p>
<p><strong>å°æç¤ºï¼š</strong></p>
<ul>
<li>å·¦ä¸‹è§’æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæŠ“åŒ…åŠŸèƒ½å¼€å¯ï¼›</li>
<li>è‹¥ä¸º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤æŠ“åŒ…ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†è®¾ç½®ï¼ˆç”µè„‘ä¸ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>Fiddler é»˜è®¤åªæŠ“å–å½“å‰ç”µè„‘çš„ç½‘ç»œè¯·æ±‚ã€‚
è‹¥è¦æŠ“å–æ‰‹æœºã€å°ç¨‹åºæˆ–æ¨¡æ‹Ÿå™¨æµé‡ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>è®¾ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•æ  <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•ç”µè„‘ IP åœ°å€ä¸ç«¯å£å·ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘è¿æ¥åœ¨åŒä¸€ Wi-Fiï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­é…ç½®ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£ï¼š8888</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼Œä½ çš„æ‰‹æœºè¯·æ±‚å°†é€šè¿‡ Fiddler è½¬å‘ï¼Œå¯å®ç°è·¨è®¾å¤‡æŠ“åŒ…åˆ†æã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…è®¾ç½®</strong></h3>
<p>ç°åœ¨å‡ ä¹æ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨ HTTPS åŠ å¯†åè®®ã€‚
ä¸ºäº†æŸ¥çœ‹åŠ å¯†æµé‡å†…å®¹ï¼Œéœ€åœ¨ Fiddler ä¸­å®‰è£…æ ¹è¯ä¹¦å¹¶å¯ç”¨è§£å¯†åŠŸèƒ½ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»»è¯ä¹¦ï¼›</li>
<li>è‹¥æŠ“å–ç§»åŠ¨ç«¯è¯·æ±‚ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨è®¾å¤‡ä¸Šè®¾ç½®ä¿¡ä»»ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼ŒFiddler å°†èƒ½æ•è·å®Œæ•´çš„ HTTPS è¯·æ±‚ä¸å“åº”æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>åœ¨ä¸»ç•Œé¢ä¸­ï¼Œæ¯æ¡è¯·æ±‚éƒ½å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚è·¯å¾„ã€å‚æ•°ä¸ Headerï¼›</li>
<li>å“åº”çŠ¶æ€ç ã€Body ä¸è¿”å›æ•°æ®ï¼›</li>
<li>è¯·æ±‚è€—æ—¶ä¸æ€§èƒ½åˆ†æã€‚</li>
</ul>
<p><strong>å®æˆ˜ç»éªŒï¼š</strong>
æŸé¡¹ç›®ä¸­ç™»å½•æ¥å£æ€»æ˜¯è¿”å›ç©ºå“åº”ï¼Œé€šè¿‡ Fiddler å‘ç°è¯·æ±‚å¤´ <code>Content-Type</code> ç¼ºå¤±ï¼Œåç«¯æœªèƒ½æ­£ç¡®è§£ææ•°æ®ï¼Œå‡ åˆ†é’Ÿå†…å®šä½é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒæ‹¦æˆªè¯·æ±‚ä¸å“åº”ï¼Œè®©å¼€å‘è€…å¯æ‰‹åŠ¨ä¿®æ”¹å†…å®¹å†ç»§ç»­æ‰§è¡Œã€‚</p>
<p><strong>å¸¸è§ç”¨é€”ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿæ¥å£é”™è¯¯ï¼ˆè¿”å› 404 / 500ï¼‰ï¼›</li>
<li>ä¿®æ”¹å‚æ•°éªŒè¯å®¹é”™é€»è¾‘ï¼›</li>
<li>å»¶è¿Ÿå“åº”æµ‹è¯•å¼±ç½‘æ€§èƒ½ã€‚</li>
</ul>
<p><strong>æŠ€å·§æç¤ºï¼š</strong>
åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>bpu yourapi.com</code> å³å¯å¯¹ç‰¹å®šè¯·æ±‚å¼€å¯æ–­ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>AutoResponder æ¨¡å—å¯ç”¨äº Mock æ•°æ®ä¸æ¥å£æ¨¡æ‹Ÿã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>æ·»åŠ åŒ¹é…è§„åˆ™ï¼ˆæ”¯æŒæ­£åˆ™æˆ–å…³é”®å­—åŒ¹é…ï¼‰ï¼›</li>
<li>æŒ‡å®šæœ¬åœ° JSON æ–‡ä»¶æˆ–è¾“å…¥æ¨¡æ‹Ÿå“åº”å†…å®¹ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼Œè¯·æ±‚å°†è‡ªåŠ¨è¿”å›é¢„è®¾æ•°æ®ã€‚</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong>
åç«¯æ¥å£æœªå¼€å‘æ—¶ï¼Œå‰ç«¯å¯é€šè¿‡ Fiddler æ¨¡æ‹Ÿè¿”å› JSON æ•°æ®ï¼Œæå‰éªŒè¯é¡µé¢é€»è¾‘ï¼Œå®ç°å‰åç«¯è§£è€¦è°ƒè¯•ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—ç›¸å½“äºå†…ç½®ç‰ˆ Postmanã€‚
ä½ å¯ä»¥å¤åˆ¶è¯·æ±‚ã€ä¿®æ”¹å‚æ•°ã€ç¼–è¾‘ Header å¹¶é‡æ”¾ï¼Œ
å®ç°æ¥å£æµ‹è¯•ä¸éªŒè¯ã€‚</p>
<p><strong>åº”ç”¨ä¸¾ä¾‹ï¼š</strong></p>
<ul>
<li>æµ‹è¯•ç­¾åä¸ Tokenï¼›</li>
<li>éªŒè¯å‚æ•°æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼›</li>
<li>å¿«é€Ÿé‡ç°çº¿ä¸Š Bugã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline èƒ½å±•ç¤ºæ¯ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼š
DNS æŸ¥è¯¢ â†’ TCP å»ºç«‹ â†’ TLS æ¡æ‰‹ â†’ æœåŠ¡å™¨å“åº” â†’ æ•°æ®ä¸‹è½½ã€‚</p>
<p>é€šè¿‡å¯è§†åŒ–çš„æ—¶åºåˆ†æï¼Œå¼€å‘è€…å¯è½»æ¾è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œåˆ¤æ–­å»¶è¿Ÿæ˜¯å¦æ¥è‡ªç½‘ç»œã€æœåŠ¡å™¨è¿˜æ˜¯å‰ç«¯èµ„æºåŠ è½½ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šä¸€æ¬¡â€œæ— å“åº”è¯·æ±‚â€çš„æ’æŸ¥è¿‡ç¨‹</strong></h2>
<p>æŸæ¬¡åœ¨è°ƒè¯• App æ¥å£æ—¶ï¼Œå‘ç°è¯·æ±‚æ€»æ˜¯å¡åœ¨â€œåŠ è½½ä¸­â€ï¼Œæ²¡æœ‰ä»»ä½•å“åº”ã€‚
åç«¯ç¡®è®¤æœåŠ¡æ­£å¸¸ï¼Œå‰ç«¯æ—¥å¿—æ— å¼‚å¸¸ã€‚</p>
<p>é€šè¿‡ Fiddler æŠ“åŒ…å‘ç°ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨ç¼“å­˜ç­–ç•¥æ‹¦æˆªï¼ŒæœªçœŸæ­£å‘é€åˆ°æœåŠ¡å™¨ã€‚
ç¦ç”¨ç¼“å­˜åï¼Œä¸€åˆ‡æ¢å¤æ­£å¸¸ã€‚</p>
<p>å¾ˆå¤šâ€œè¯·æ±‚å¤±è´¥â€çš„é—®é¢˜ï¼Œå…¶å®è¯·æ±‚æ ¹æœ¬æ²¡æœ‰å‘å‡ºå»ã€‚
æŠ“åŒ…å·¥å…·èƒ½è®©ä½ å¿«é€Ÿåˆ¤æ–­é—®é¢˜å‡ºåœ¨å“ªä¸€å±‚ï¼Œè€Œä¸æ˜¯ç›²ç›®çŒœæµ‹ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€Fiddlerå¸¸ç”¨åŠŸèƒ½é€Ÿè§ˆ</strong></h2>



































<table><thead><tr><th>åŠŸèƒ½æ¨¡å—</th><th>ä¸»è¦ä½œç”¨</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰åŸŸåæˆ–å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦å…³é”®æ¥å£è°ƒè¯•</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£è¿”å›</td><td>å‰åç«¯ç‹¬ç«‹å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªä¸ä¿®æ”¹è¯·æ±‚</td><td>æ¨¡æ‹Ÿå¼‚å¸¸åœºæ™¯</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>API è°ƒè¯•ä¸å¤ç°</td></tr><tr><td><strong>Timeline</strong></td><td>è¯·æ±‚è€—æ—¶åˆ†æ</td><td>ç½‘ç»œä¼˜åŒ–ä¸æ€§èƒ½æµ‹è¯•</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–å·¥å…·çš„å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€å¼ºå¤§ã€æ”¯æŒè¯·æ±‚ä¿®æ”¹ä¸Mock</td><td>å¼€å‘ / æµ‹è¯•</td></tr><tr><td><strong>Charles</strong></td><td>æ“ä½œç®€æ´ã€ç•Œé¢ç›´è§‚</td><td>æ–°æ‰‹è°ƒè¯•</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ æ–¹ä¾¿</td><td>API æµ‹è¯•</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚åè®®åˆ†æèƒ½åŠ›å¼º</td><td>ç½‘ç»œå®‰å…¨ç ”ç©¶</td></tr></tbody></table>
<p>Fiddler çš„ç»¼åˆèƒ½åŠ›æœ€å¼ºï¼Œå°¤å…¶åœ¨æ¥å£è°ƒè¯•ã€è¯·æ±‚ä¿®æ”¹ä¸Mock æ•°æ®æ–¹é¢å‡ ä¹æ— å¯æ›¿ä»£ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ›´æ·±å…¥å­¦ä¹  Fiddlerï¼Ÿè®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**ï¼ŒæŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†è®¾ç½®</strong> ä¸ <strong>è°ƒè¯•æŠ€å·§</strong></p>
<p>ç½‘ç«™å†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…è®¾ç½®ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†ä¸è¯ä¹¦é…ç½®ï¼›</li>
<li>å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆï¼›</li>
<li>é«˜é˜¶è°ƒè¯•ä¸æ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ ... è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574318108720496686</link>    <guid>https://juejin.cn/post/7574318108720496686</guid>    <pubDate>2025-11-20T02:25:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108720496686" data-draft-id="7574318108720398382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ ... è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T02:25:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€šæ å¬é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/2682464103830750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ ... è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464103830750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€šæ å¬é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:25:16.000Z" title="Thu Nov 20 2025 02:25:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åŸºæœ¬æ¦‚å¿µ</h2>
<p>å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ï¼ˆSpread Operatorï¼‰<code>...</code>Â æ˜¯ ES6 ä¸­å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œç”¨äºå±•å¼€å¯¹è±¡çš„å¯æšä¸¾å±æ€§ã€‚</p>
<h2 data-id="heading-1">2. åŸºæœ¬è¯­æ³•</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> newObj = { ...originalObj };
</code></pre>
<h2 data-id="heading-2">3. ä¸»è¦ç”¨é€”</h2>
<h3 data-id="heading-3">3.1 å¯¹è±¡æµ…æ‹·è´</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
<span class="hljs-keyword">const</span> copy = { ...person };

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy); <span class="hljs-comment">// { name: 'Alice', age: 25 }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy === person); <span class="hljs-comment">// false (ä¸åŒå¼•ç”¨)</span>
</code></pre>
<h3 data-id="heading-4">3.2 åˆå¹¶å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">const</span> obj2 = { <span class="hljs-attr">c</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">4</span> };
<span class="hljs-keyword">const</span> merged = { ...obj1, ...obj2 };

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(merged); <span class="hljs-comment">// { a: 1, b: 2, c: 3, d: 4 }</span>
</code></pre>
<h3 data-id="heading-5">3.3 å±æ€§è¦†ç›–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> defaults = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span> };
<span class="hljs-keyword">const</span> userSettings = { <span class="hljs-attr">fontSize</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">language</span>: <span class="hljs-string">'en'</span> };

<span class="hljs-keyword">const</span> finalSettings = { ...defaults, ...userSettings };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(finalSettings); <span class="hljs-comment">// { theme: 'light', fontSize: 18, language: 'en' }</span>
</code></pre>
<h3 data-id="heading-6">3.4 æ·»åŠ æ–°å±æ€§</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">base</span> = { x: <span class="hljs-number">1</span>, y: <span class="hljs-number">2</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">extended</span> = { ...base, z: <span class="hljs-number">3</span>, color: <span class="hljs-string">'red'</span> }<span class="hljs-comment">;</span>

console.log(extended)<span class="hljs-comment">; // { x: 1, y: 2, z: 3, color: 'red' }</span>
</code></pre>
<h2 data-id="heading-7">4. æ·±åº¦ç‰¹æ€§</h2>
<h3 data-id="heading-8">4.1 å±•å¼€é¡ºåºçš„é‡è¦æ€§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> objA = { <span class="hljs-attr">prop</span>: <span class="hljs-string">'A'</span> };
<span class="hljs-keyword">const</span> objB = { <span class="hljs-attr">prop</span>: <span class="hljs-string">'B'</span> };

<span class="hljs-keyword">const</span> result1 = { ...objA, ...objB }; <span class="hljs-comment">// { prop: 'B' }</span>
<span class="hljs-keyword">const</span> result2 = { ...objB, ...objA }; <span class="hljs-comment">// { prop: 'A' }</span>
</code></pre>
<h3 data-id="heading-9">4.2 ä¸è§£æ„èµ‹å€¼ç»“åˆ  ========ã€‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span> };

<span class="hljs-comment">// æå–ç‰¹å®šå±æ€§ï¼Œå‰©ä½™å±æ€§æ”¾å…¥restå¯¹è±¡</span>
<span class="hljs-keyword">const</span> { id, name, ...rest } = user;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(id);   <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// John</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest); <span class="hljs-comment">// { age: 30, email: 'john@example.com' }</span>
</code></pre>
<h3 data-id="heading-10">4.3 æ¡ä»¶å±•å¼€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> condition = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">const</span> extraProps = condition ? { <span class="hljs-attr">admin</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'editor'</span> } : {};

<span class="hljs-keyword">const</span> user = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>,
  ...extraProps
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user); <span class="hljs-comment">// { name: 'Alice', admin: true, role: 'editor' }</span>
</code></pre>
<h2 data-id="heading-11">5. å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">5.1 React çŠ¶æ€æ›´æ–°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¯å˜çŠ¶æ€æ›´æ–°</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> ({
  ...prevState,
  <span class="hljs-attr">count</span>: prevState.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>
}));
</code></pre>
<h3 data-id="heading-13">5.2 å‡½æ•°å‚æ•°å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processUser</span>(<span class="hljs-params">baseInfo, additionalInfo</span>) {
  <span class="hljs-keyword">return</span> {
    ...baseInfo,
    ...additionalInfo,
    <span class="hljs-attr">processed</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  };
}

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">processUser</span>(
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
  { <span class="hljs-attr">email</span>: <span class="hljs-string">'bob@example.com'</span> }
);
</code></pre>
<h3 data-id="heading-14">5.3 é…ç½®åˆå¹¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> defaultConfig = {
  <span class="hljs-attr">apiUrl</span>: <span class="hljs-string">'https://api.example.com'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span>
};

<span class="hljs-keyword">const</span> userConfig = {
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">apiKey</span>: <span class="hljs-string">'12345'</span>
};

<span class="hljs-keyword">const</span> finalConfig = {
  ...defaultConfig,
  ...userConfig
};
</code></pre>
<h2 data-id="heading-15">6. æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-16">6.1 æµ…æ‹·è´é—®é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Test'</span>,
  <span class="hljs-attr">nested</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> }
};

<span class="hljs-keyword">const</span> copy = { ...original };
copy.<span class="hljs-property">nested</span>.<span class="hljs-property">value</span> = <span class="hljs-number">2</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(original.<span class="hljs-property">nested</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// 2 (è¢«ä¿®æ”¹äº†!)</span>
</code></pre>
<h3 data-id="heading-17">6.2 åŸå‹é“¾å±æ€§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'animal'</span>;
  }
}

<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'sound'</span>; };

<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>();
dog.<span class="hljs-property">breed</span> = <span class="hljs-string">'Labrador'</span>;

<span class="hljs-keyword">const</span> copy = { ...dog };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy.<span class="hljs-property">type</span>);    <span class="hljs-comment">// 'animal'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy.<span class="hljs-property">breed</span>);   <span class="hljs-comment">// 'Labrador'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy.<span class="hljs-property">speak</span>);   <span class="hljs-comment">// undefined (åŸå‹æ–¹æ³•ä¸ä¼šè¢«å¤åˆ¶)</span>
</code></pre>
<h3 data-id="heading-18">6.3 ä¸å¯æšä¸¾å±æ€§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {};
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">'hidden'</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-string">'secret'</span>,
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>
});

obj.<span class="hljs-property">visible</span> = <span class="hljs-string">'can see'</span>;

<span class="hljs-keyword">const</span> spread = { ...obj };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(spread); <span class="hljs-comment">// { visible: 'can see' }</span>
</code></pre>
<h2 data-id="heading-19">7. ä¸æ•°ç»„å±•å¼€çš„åŒºåˆ«</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ•°ç»„å±•å¼€</span>
<span class="hljs-keyword">const</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> arr2 = [...arr1, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]; <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>

<span class="hljs-comment">// å¯¹è±¡å±•å¼€</span>
<span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">const</span> obj2 = { ...obj1, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> }; <span class="hljs-comment">// { a: 1, b: 2, c: 3 }</span>

<span class="hljs-comment">// æ•°ç»„è½¬ä¸ºå¯¹è±¡</span>
<span class="hljs-keyword">const</span> array = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>];
<span class="hljs-keyword">const</span> objectFromArray = { ...array }; <span class="hljs-comment">// { 0: 'a', 1: 'b', 2: 'c' }</span>
</code></pre>
<h2 data-id="heading-20">8. æµè§ˆå™¨å…¼å®¹æ€§</h2>
<p>å¯¹è±¡å±•å¼€è¿ç®—ç¬¦åœ¨ç°ä»£æµè§ˆå™¨ä¸­å¾—åˆ°è‰¯å¥½æ”¯æŒï¼Œä½†åœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸­å¯èƒ½éœ€è¦ä½¿ç”¨ Babel ç­‰å·¥å…·è¿›è¡Œè½¬è¯‘ã€‚</p>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>å¯¹è±¡å±•å¼€è¿ç®—ç¬¦Â <code>...</code>Â æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„å·¥å…·ï¼Œå®ƒï¼š</p>
<ul>
<li>æä¾›ç®€æ´çš„å¯¹è±¡å¤åˆ¶å’Œåˆå¹¶è¯­æ³•</li>
<li>æ”¯æŒä¸å¯å˜æ•°æ®æ¨¡å¼</li>
<li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
<li>åœ¨å¤„ç†é…ç½®ã€çŠ¶æ€ç®¡ç†ç­‰åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨</li>
</ul>
<p>ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„å…¶æµ…æ‹·è´çš„ç‰¹æ€§ï¼Œå¯¹äºåµŒå¥—å¯¹è±¡éœ€è¦é¢å¤–çš„æ·±æ‹·è´å¤„ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºLangSmithçš„æç¤ºè¯å·¥ç¨‹]]></title>    <link>https://juejin.cn/post/7574584245109276723</link>    <guid>https://juejin.cn/post/7574584245109276723</guid>    <pubDate>2025-11-20T00:54:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245109276723" data-draft-id="7574322843048755250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºLangSmithçš„æç¤ºè¯å·¥ç¨‹"/> <meta itemprop="keywords" content="LangChain,Agent,Python"/> <meta itemprop="datePublished" content="2025-11-20T00:54:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºLangSmithçš„æç¤ºè¯å·¥ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T00:54:35.000Z" title="Thu Nov 20 2025 00:54:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>æç¤ºè¯ï¼ˆPromptï¼‰ç”¨äºå¼•å¯¼å¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„è¡Œä¸ºã€‚æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰æ˜¯æŒ‡è®¾è®¡ã€æµ‹è¯•å¹¶ä¼˜åŒ–ç»™å¤§æ¨¡å‹çš„æŒ‡ä»¤ï¼Œä»¥ä½¿å…¶ç”Ÿæˆå¯é ä¸”æœ‰ç”¨çš„å“åº”çš„è¿‡ç¨‹ã€‚</p>
<p>LangSmithæä¾›äº†ç”¨äºåˆ›å»ºã€ç‰ˆæœ¬æ§åˆ¶ã€æµ‹è¯•æç¤ºè¯ä»¥åŠè¿›è¡Œåä½œçš„å·¥å…·ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›å¸¸è§æ¦‚å¿µï¼Œä¾‹å¦‚æç¤ºè¯æ¨¡æ¿ï¼ˆPrompt Templatesï¼‰â€”â€” å¯è®©ä½ å¤ç”¨ç»“æ„åŒ–çš„æç¤ºè¯ï¼Œä»¥åŠå˜é‡ï¼ˆVariablesï¼‰â€”â€” èƒ½è®©ä½ åœ¨æç¤ºè¯ä¸­åŠ¨æ€æ’å…¥å€¼ï¼ˆä¾‹å¦‚ç”¨æˆ·çš„é—®é¢˜ï¼‰ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œä½ å°†é€šè¿‡è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰æ¥åˆ›å»ºã€æµ‹è¯•å¹¶ä¼˜åŒ–æç¤ºè¯ã€‚æœ¬æŒ‡å—ä»¥OpenAIä½œä¸ºç¤ºä¾‹å¤§æ¨¡å‹æä¾›å•†ï¼Œä½†ç›¸åŒçš„å·¥ä½œæµç¨‹ä¹Ÿé€‚ç”¨äºå…¶ä»–æä¾›å•†ã€‚</p>
<h2 data-id="heading-0">å‡†å¤‡</h2>
<p>å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>ä¸€ä¸ª LangSmith è´¦å·ï¼šå¯å‰å¾€ smith.langchain.com æ³¨å†Œæˆ–ç™»å½•ã€‚</li>
<li>ä¸€ä¸ª LangSmith API å¯†é’¥ï¼šè¯·å‚è€ƒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Flangsmith%2Fcreate-account-api-key%23create-an-api-key" target="_blank" title="https://docs.langchain.com/langsmith/create-account-api-key#create-an-api-key" ref="nofollow noopener noreferrer">åˆ›å»º API å¯†é’¥æŒ‡å—</a>ã€‹æ“ä½œã€‚</li>
<li>ä¸€ä¸ª OpenAI API å¯†é’¥ï¼šå¯ä»OpenAIæ§åˆ¶å°ç”Ÿæˆã€‚</li>
</ul>
<h2 data-id="heading-1">æ­å»ºç¯å¢ƒ</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> ls-prompt-quickstart &amp;&amp; <span class="hljs-built_in">cd</span> ls-prompt-quickstart
python -m venv .venv
<span class="hljs-built_in">source</span> .venv/bin/activate
pip install -qU langsmith openai langchain_core
<span class="hljs-built_in">export</span> LANGSMITH_API_KEY=<span class="hljs-string">'&lt;your_api_key&gt;'</span>
<span class="hljs-built_in">export</span> OPENAI_API_KEY=<span class="hljs-string">'&lt;your_api_key&gt;'</span>
</code></pre>
<h2 data-id="heading-2">åˆ›å»ºæç¤ºè¯</h2>
<p>è¦åˆ›å»ºæç¤ºè¯ï¼Œä½ éœ€è¦å…ˆå®šä¹‰æç¤ºè¯ä¸­æ‰€éœ€çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œç„¶åå°†å…¶æ¨é€åˆ°LangSmithå¹³å°ã€‚
ä½¿ç”¨å¯¹åº”ç¼–ç¨‹è¯­è¨€çš„æ„é€ å‡½æ•°ä¸æ¨é€æ–¹æ³•ï¼š</p>
<ul>
<li>Pythonï¼šé€šè¿‡ ChatPromptTemplate æ„å»º â†’ è°ƒç”¨ client.push_prompt(...) æ¨é€</li>
<li>TypeScriptï¼šé€šè¿‡ ChatPromptTemplate.fromMessages(...) æ„å»º â†’ è°ƒç”¨ client.pushPrompt(...) æ¨é€ã€‚</li>
</ul>
<p>åœ¨ create_prompt.pyæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langsmith <span class="hljs-keyword">import</span> Client
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

client = Client()

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"You are a helpful chatbot."</span>),
    (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{question}"</span>),
])

client.push_prompt(<span class="hljs-string">"prompt-quickstart"</span>, <span class="hljs-built_in">object</span>=prompt)
</code></pre>
<p>æ­¤æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæœ‰åºçš„æ¶ˆæ¯åˆ—è¡¨ï¼Œå°†å…¶å°è£…åˆ° ChatPromptTemplateï¼ˆå¯¹è¯æç¤ºè¯æ¨¡æ¿ï¼‰ä¸­ï¼Œç„¶åæŒ‰åç§°å°†è¯¥æç¤ºè¯æ¨é€åˆ°ä½ çš„å·¥ä½œåŒºï¼Œä»¥ä¾¿è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œå¤ç”¨ã€‚</p>
<p>æ‰§è¡Œè„šæœ¬ï¼š
<code>python create_prompt.py</code></p>
<p>ç‚¹å‡»ç”Ÿæˆçš„é“¾æ¥ï¼Œå³å¯åœ¨ LangSmith ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ä¸­æŸ¥çœ‹æ–°åˆ›å»ºçš„ â€œæç¤ºè¯ä¸­å¿ƒâ€ï¼ˆPrompt Hubï¼‰æç¤ºè¯ã€‚</p>
<h2 data-id="heading-3">æµ‹è¯•æç¤ºè¯</h2>
<p>åœ¨æœ¬æ­¥éª¤ä¸­ï¼Œä½ å°†é€šè¿‡åç§°ï¼ˆ"prompt-quickstart"ï¼‰æ‹‰å–ä¸Šä¸€æ­¥åˆ›å»ºçš„æç¤ºè¯ï¼Œç”¨æµ‹è¯•è¾“å…¥å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œè½¬æ¢ä¸º OpenAI çš„å¯¹è¯æ ¼å¼ï¼Œç„¶åè°ƒç”¨OpenAIçš„Chat Completions APIã€‚</p>
<p>ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºæ–°ç‰ˆæœ¬æ¥è¿­ä»£ä¼˜åŒ–è¯¥æç¤ºè¯ã€‚å·¥ä½œåŒºæˆå‘˜å¯æ‰“å¼€å·²æœ‰æç¤ºè¯ï¼Œåœ¨ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ä¸­å°è¯•ä¿®æ”¹ï¼Œå¹¶å°†è¿™äº›ä¿®æ”¹ä¿å­˜ä¸ºè¯¥æç¤ºè¯çš„æ–°æäº¤è®°å½•ï¼Œä»è€Œä¸ºæ•´ä¸ªå›¢é˜Ÿä¿ç•™å†å²ç‰ˆæœ¬è®°å½•ã€‚</p>
<p>åœ¨ test_prompt.pyæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langsmith <span class="hljs-keyword">import</span> Client
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> convert_to_openai_messages

client = Client()
oai_client = OpenAI()

prompt = client.pull_prompt(<span class="hljs-string">"prompt-quickstart"</span>)

<span class="hljs-comment"># Since the prompt only has one variable you could also pass in the value directly</span>
<span class="hljs-comment"># Equivalent to formatted_prompt = prompt.invoke("What is the color of the sky?")</span>
formatted_prompt = prompt.invoke({<span class="hljs-string">"question"</span>: <span class="hljs-string">"What is the color of the sky?"</span>})

response = oai_client.chat.completions.create(
    model=<span class="hljs-string">"gpt-4o"</span>,
    messages=convert_to_openai_messages(formatted_prompt.messages),
)
</code></pre>
<p>æ­¤æ“ä½œä¼šé€šè¿‡åç§°åŠ è½½æç¤ºè¯ï¼Œä½¿ç”¨ pullï¼ˆæ‹‰å–ï¼‰æ–¹æ³•è·å–ä½ æ­£åœ¨æµ‹è¯•çš„æç¤ºè¯çš„æœ€æ–°æäº¤ç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥"æäº¤å“ˆå¸Œå€¼"ï¼ˆæ ¼å¼ä¸º :ï¼‰æ¥æŒ‡å®šæŸä¸ªç‰¹å®šçš„æäº¤ç‰ˆæœ¬ã€‚</p>
<p>æ‰§è¡Œæµ‹è¯•ï¼š
<code>python test_prompt.py</code></p>
<p>è‹¥è¦åˆ›å»ºæç¤ºè¯çš„æ–°ç‰ˆæœ¬ï¼Œåªéœ€ä½¿ç”¨åˆå§‹æ—¶çš„ç›¸åŒæ¨é€æ–¹æ³•ï¼Œä¼ å…¥ç›¸åŒçš„æç¤ºè¯åç§°å’Œæ›´æ–°åçš„æ¨¡æ¿å³å¯ã€‚LangSmithä¼šå°†å…¶è®°å½•ä¸ºæ–°çš„æäº¤è®°å½•ï¼Œå¹¶ä¿ç•™ä¹‹å‰çš„ç‰ˆæœ¬ã€‚</p>
<p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ° iterate_prompt.pyæ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langsmith <span class="hljs-keyword">import</span> Client
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

client = Client()

new_prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"You are a helpful chatbot. Respond in Spanish."</span>),
    (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{question}"</span>),
])

client.push_prompt(<span class="hljs-string">"prompt-quickstart"</span>, <span class="hljs-built_in">object</span>=new_prompt)
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼š
<code>python iterate_prompt.py</code></p>
<p>ç°åœ¨ä½ çš„æç¤ºè¯å°†åŒ…å«ä¸¤æ¡æäº¤è®°å½•ã€‚</p>
<p>å¦‚éœ€ä¼˜åŒ–ä½ çš„æç¤ºè¯ï¼Œå¯å‚è€ƒä»¥ä¸‹æ–¹å¼ï¼š</p>
<ul>
<li>æŸ¥é˜…æ¨¡å‹æä¾›å•†æä¾›çš„æ–‡æ¡£ï¼Œè·å–æç¤ºè¯åˆ›å»ºçš„æœ€ä½³å®è·µï¼Œä¾‹å¦‚ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.openai.com%2Fen%2Farticles%2F6654000-best-practices-for-prompt-engineering-with-the-openai-api" target="_blank" title="https://help.openai.com/en/articles/6654000-best-practices-for-prompt-engineering-with-the-openai-api" ref="nofollow noopener noreferrer">ã€ŠOpenAI API æç¤ºè¯å·¥ç¨‹æœ€ä½³å®è·µã€‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.google.dev%2Fgemini-api%2Fdocs%2Fprompting-intro" target="_blank" title="https://ai.google.dev/gemini-api/docs/prompting-intro" ref="nofollow noopener noreferrer">ã€ŠGemini æç¤ºè¯è®¾è®¡å…¥é—¨ã€‹</a></li>
</ul>
</li>
<li>ä½¿ç”¨ LangSmith ä¸­çš„äº¤äº’å¼å·¥å…· â€”â€”â€œæç¤ºè¯ç”»å¸ƒâ€ï¼ˆPrompt Canvasï¼‰æ„å»ºå¹¶ä¼˜åŒ–æç¤ºè¯ã€‚æ›´å¤šè¯¦æƒ…å¯å‚è€ƒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Flangsmith%2Fwrite-prompt-with-ai" target="_blank" title="https://docs.langchain.com/langsmith/write-prompt-with-ai" ref="nofollow noopener noreferrer">æç¤ºè¯ç”»å¸ƒæŒ‡å—</a>ã€‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡å·¥ç¨‹â€”â€”æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7574321422400274458</link>    <guid>https://juejin.cn/post/7574321422400274458</guid>    <pubDate>2025-11-19T15:59:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574321422400274458" data-draft-id="7574322843048427570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡å·¥ç¨‹â€”â€”æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ"/> <meta itemprop="keywords" content="MCP,Agent,LLM"/> <meta itemprop="datePublished" content="2025-11-19T15:59:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ®æ™ºèƒ½è€å¸æœº"/> <meta itemprop="url" content="https://juejin.cn/user/430664289626439"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡å·¥ç¨‹â€”â€”æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664289626439/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ®æ™ºèƒ½è€å¸æœº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T15:59:32.000Z" title="Wed Nov 19 2025 15:59:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ MCP æ„å»ºäº†ä¸€ä¸ªå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMulti-Agent Systemï¼ŒMASï¼‰ã€‚è¿™ä¸ªç³»ç»Ÿå¯ä»¥å·¥ä½œï¼Œä½†æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å±€é™ï¼šå®ƒçš„â€œçŸ¥è¯†â€éƒ½æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„ã€‚å¯¹äºå­¦ä¹ æ¥è¯´è¿™æ²¡é—®é¢˜ï¼Œä½†ä¹Ÿæ„å‘³ç€è¿™äº›æ™ºèƒ½ä½“è¢«å›°åœ¨äº†æˆ‘ä»¬é¢„å…ˆè®¾è®¡å¥½çš„æ²™ç›’é‡Œï¼šå®ƒä»¬ä¸èƒ½è®¿é—®çœŸå®ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•æ ¹æ®å½“å‰ç¯å¢ƒå³æ—¶è°ƒæ•´è¡Œä¸ºã€‚<br/>
åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒä»¬ä»ç›’å­é‡Œâ€œæ”¾å‡ºæ¥â€â€”â€”è®©æ™ºèƒ½ä½“é€šè¿‡åŸºäºå‘é‡å­˜å‚¨ï¼ˆvector storeï¼‰æ„å»ºçš„å®æ—¶ä¿¡æ¯ç®¡é“ï¼Œè¿æ¥åˆ°å¤–éƒ¨æ•°æ®ã€‚</p>
<p>ç²¾å½©çš„éƒ¨åˆ†ç°åœ¨æ‰å¼€å§‹ã€‚æˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ªæ›´å¼ºå¤§çš„æ¶æ„ï¼š<strong>åŒ RAG å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆdual RAG MASï¼‰</strong> ã€‚<br/>
å®ƒä¼šç”¨ä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰ï¼š</p>
<ol>
<li>ç¬¬ä¸€ç§æ˜¯ä½ ç†Ÿæ‚‰çš„ï¼šä»çŸ¥è¯†åº“ä¸­æ£€ç´¢äº‹å®ï¼›</li>
<li>ç¬¬äºŒç§åˆ™æ˜¯æ–°çš„ï¼šæ£€ç´¢â€œè¿‡ç¨‹æ€§æŒ‡ä»¤â€ï¼Œä¹Ÿå°±æ˜¯å®ç°<strong>è¿‡ç¨‹åŒ– / åŠ¨æ€ RAG</strong>æ‰€éœ€çš„â€œæ‰§è¡Œè„šæœ¬â€ã€‚</li>
</ol>
<p>è¿™ç§æ–°å¢èƒ½åŠ›æ”¹å˜äº†æ¸¸æˆè§„åˆ™ï¼š<br/>
ç³»ç»Ÿä¸ä»…èƒ½â€œå­¦ä¼šè¯´ä»€ä¹ˆï¼ˆwhat to sayï¼‰â€ï¼Œè¿˜å¯ä»¥â€œå­¦ä¼šæ€ä¹ˆè¯´ï¼ˆhow to say itï¼‰â€ï¼Œå¹¶èƒ½æŒ‰éœ€åˆ‡æ¢é£æ ¼å’Œç»“æ„ã€‚</p>
<p>æˆ‘ä»¬ä¼šåœ¨ä¸¤ä¸ª Notebook ä¸­ä¸€æ­¥æ­¥æ„å»ºè¿™ä¸€ç³»ç»Ÿï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ª Notebook èšç„¦äº<strong>æ•°æ®æ‘„å…¥ï¼ˆingestionï¼‰</strong> ï¼š<br/>
æˆ‘ä»¬ä¼šä¸ºâ€œäº‹å®â€åˆ›å»ºä¸€ä¸ªçŸ¥è¯†åº“ï¼ˆknowledge baseï¼‰ï¼Œ<br/>
ä¸ºâ€œè¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintsï¼‰â€åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡åº“ï¼ˆcontext libraryï¼‰ã€‚</li>
<li>ç¬¬äºŒä¸ª Notebook è´Ÿè´£â€œè¿è¡Œæ—¶æ‰§è¡Œï¼ˆruntime executionï¼‰â€ï¼š<br/>
å±•ç¤ºæ™ºèƒ½ä½“å¦‚ä½•åœ¨å®æ—¶æ‰§è¡Œä¸­æ£€ç´¢å¹¶ç»„åˆè¿™ä¸¤ç±»ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä»‹ç»ä¸€ä¸ªæ–°çš„ä¸“ä¸šæ™ºèƒ½ä½“ï¼š<strong>ä¸Šä¸‹æ–‡é¦†å‘˜ï¼ˆContext Librarianï¼‰</strong> ï¼Œ<br/>
å¹¶çœ‹åˆ° Orchestratorï¼ˆç¼–æ’å™¨ï¼‰å¦‚ä½•è®©æ•´ä¸ªå›¢é˜Ÿä¿æŒååŒã€‚</p>
<p>æœ¬ç« ä¸»è¦æ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>è®¾è®¡ä¸€ä¸ªåŒ RAG çš„ MAS æ¶æ„</li>
<li>å°†â€œäº‹å®æ€§çŸ¥è¯†â€å’Œâ€œè¿‡ç¨‹æ€§æŒ‡ä»¤â€åˆ†ç¦»ç®¡ç†</li>
<li>ä¸ºäº‹å®æ„å»ºçŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰</li>
<li>ä¸ºè¯­ä¹‰è“å›¾åˆ›å»ºä¸Šä¸‹æ–‡åº“ï¼ˆContext Libraryï¼‰</li>
<li>ä½¿ç”¨å‘é‡å­˜å‚¨çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ç®¡ç†ä¸åŒæ•°æ®ç±»å‹</li>
<li>å®ç°æ–°çš„ä¸“ä¸šæ™ºèƒ½ä½“ï¼Œæ¯”å¦‚ Context Librarian</li>
<li>é€šè¿‡ç¼–æ’è®©æ•´ä¸ªç³»ç»Ÿç”Ÿæˆâ€œå…·å¤‡ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›â€çš„å†…å®¹</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆä» RAG MAS çš„æ¶æ„å…¥æ‰‹ã€‚</p>
<h2 data-id="heading-0">è®¾è®¡åŒ RAG MAS æ¶æ„</h2>
<p>Architecting a dual RAG MAS</p>
<p>è¦æ„å»ºè¿™ä¸ªå…·å¤‡ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¸…æ™°åœ°ç†è§£å®ƒçš„æ¶æ„ã€‚<br/>
ä»é«˜å±‚æ¥çœ‹ï¼Œæ•´ä¸ªè¿‡ç¨‹è¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹åˆç›¸äº’å…³è”çš„é˜¶æ®µï¼Œæˆ‘ä»¬ä¼šåˆ†åˆ«è®¾è®¡å’Œå®ç°ï¼š</p>
<ul>
<li><strong>Phase 1ï¼šæ•°æ®å‡†å¤‡ï¼ˆData Preparationï¼‰</strong> â€”â€” è´Ÿè´£æŠŠæ•°æ®å‡†å¤‡å¥½</li>
<li><strong>Phase 2ï¼šè¿è¡Œæ—¶æ‰§è¡Œï¼ˆRuntime Executionï¼‰</strong> â€”â€” MAS ä½¿ç”¨å‡†å¤‡å¥½çš„æ•°æ®æ¥å“åº”ç”¨æˆ·ç›®æ ‡</li>
</ul>
<p>æœ¬ç« ä¼šåœ¨ä¸¤ä¸ªå¯¹åº”çš„ Notebook ä¸­å®Œæˆè¿™ä¸¤ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ee7d34061aa48a8b0d5f1225d21f88b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5pm66IO96ICB5Y-45py6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764172772&amp;x-signature=TFNbO%2FeHl6KcmfZNk7DllAZwmIQ%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ 3.1ï¼šåŒ RAG MAS çš„æ•´ä½“æ¶æ„</p>
<p>ä¸Šå›¾å±•ç¤ºäº†åŒ RAG MAS æ¶æ„ä¸­<strong>æ•°æ®æµä¸æ‰§è¡Œæµ</strong>çš„å…¨è²Œï¼Œç®­å¤´è¡¨ç¤ºç»„ä»¶ä¹‹é—´åœ¨é«˜å±‚ä¸Šçš„è¿æ¥å…³ç³»ã€‚<br/>
åœ¨è¿›å…¥å…·ä½“ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŒ‰å›¾æŠŠæ¯ä¸ªéƒ¨åˆ†æ¢³ç†ä¸€éã€‚</p>
<h3 data-id="heading-1">é˜¶æ®µä¸€ï¼šæ•°æ®å‡†å¤‡ï¼ˆPhase 1: Data preparationï¼‰</h3>
<p>åœ¨ Phase 1 ä¸­ï¼Œæˆ‘ä»¬ä¸“æ³¨äº<strong>å‡†å¤‡æ•°æ®</strong>ï¼Œè¿™ä¸€éƒ¨åˆ†å¯¹åº”å›¾ 3.1 å·¦ä¾§ã€‚<br/>
ç³»ç»Ÿä»ä¸¤ç±»ä¸åŒçš„è¾“å…¥æºå¼€å§‹ï¼š</p>
<ul>
<li><strong>çŸ¥è¯†æ•°æ®ï¼ˆKnowledge dataï¼‰</strong> ï¼š<br/>
ç³»ç»Ÿåº”è¯¥â€œçŸ¥é“â€çš„<strong>äº‹å®æ€§ä¿¡æ¯</strong></li>
<li><strong>ä¸Šä¸‹æ–‡æ•°æ®ï¼ˆContext dataï¼‰</strong> ï¼š<br/>
ç»“æ„åŒ–æŒ‡ä»¤ï¼Œæˆ–è€…è¯´<strong>è¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintsï¼‰</strong> ï¼Œè¿™åœ¨ç¬¬ 1 ç« ä¸­å·²ç»ä»‹ç»è¿‡</li>
</ul>
<p>è¿™ä¸¤ç±»æ•°æ®éƒ½ç”±åŒä¸€ä¸ª**åµŒå…¥æ¨¡å‹ï¼ˆembedding modelï¼‰**æ¥å¤„ç†ï¼š</p>
<ul>
<li>å¯¹äº<strong>çŸ¥è¯†æ•°æ®</strong>ï¼Œæˆ‘ä»¬ä¼šæŠŠæ–‡æœ¬åˆ‡åˆ†æˆå¤šä¸ª chunkï¼Œå¹¶å¯¹æ¯ä¸ª chunk è¿›è¡Œå‘é‡åŒ–ï¼ˆembeddingï¼‰ã€‚</li>
<li>å¯¹äº<strong>ä¸Šä¸‹æ–‡æ•°æ® / è¯­ä¹‰è“å›¾</strong>ï¼Œæˆ‘ä»¬åªå¯¹â€œè“å›¾æ„å›¾ï¼ˆintentï¼‰çš„æè¿°â€è¿›è¡Œå‘é‡åŒ–ã€‚<br/>
ä¹‹åçš„æ£€ç´¢å°†åŸºäºâ€œæ„å›¾â€æ¥è¿›è¡ŒåŒ¹é…ã€‚<br/>
å®Œæ•´çš„è“å›¾å†…å®¹åˆ™å•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ª JSON å¯¹è±¡ä¸­ï¼Œå¹¶ä¸å…¶æè¿°å»ºç«‹å…³è”ã€‚</li>
</ul>
<p>æ‰€æœ‰çš„å‘é‡ä¼šå­˜å…¥ Pinecone å‘é‡æ•°æ®åº“ï¼Œè¿™ä¸ªåº“ä¼šæ‰¿è½½ç³»ç»Ÿéœ€è¦çš„ä¸€åˆ‡å¤–éƒ¨æ•°æ®ã€‚<br/>
æˆ‘ä»¬åªç”¨ä¸€ä¸ª Pinecone ç´¢å¼•ï¼Œä½†å°†å®ƒåˆ’åˆ†æˆä¸¤ä¸ªä¸¥æ ¼åˆ†ç¦»çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š</p>
<ul>
<li><strong>KnowledgeStore</strong>ï¼š<br/>
å­˜å‚¨æ¥è‡ªâ€œäº‹å®æ•°æ®â€çš„å‘é‡</li>
<li><strong>ContextLibrary</strong>ï¼š<br/>
å­˜å‚¨æ¥è‡ªâ€œè¿‡ç¨‹è“å›¾ / è¯­ä¹‰è“å›¾â€çš„å‘é‡</li>
</ul>
<p>å½“è¿™ä¸¤ä¸ªå‘½åç©ºé—´éƒ½å°±ä½åï¼Œç³»ç»Ÿå°±å¯ä»¥è¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚</p>
<h3 data-id="heading-2">é˜¶æ®µäºŒï¼šè¿è¡Œæ—¶æ‰§è¡Œåˆ†æ</h3>
<p>Phase 2: Runtime execution analysis</p>
<p>åœ¨ Phase 2 ä¸­ï¼ŒMAS ä¼šçœŸæ­£å¼€å§‹æ‰§è¡Œç”¨æˆ·è¯·æ±‚ï¼Œå¯¹åº”å›¾ 3.1 çš„å³ä¾§ã€‚</p>
<p>æµç¨‹ä»ä¸€ä¸ª**ç”¨æˆ·ç›®æ ‡ï¼ˆuser goalï¼‰**å¼€å§‹ï¼Œè¿™æ˜¯ä¸€æ¡ç”±ç”¨æˆ·æäº¤çš„é«˜å±‚æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š</p>
<blockquote>
<p>â€œå†™ä¸€ç¯‡å…³äºé˜¿æ³¢ç½— 11 å·çš„æ‚¬ç–‘æ•…äº‹â€ï¼ˆWrite a suspenseful story about Apollo 11ï¼‰</p>
</blockquote>
<p>Orchestrator æ”¶åˆ°è¿™ä¸ªç›®æ ‡ï¼Œä½œä¸ºç³»ç»Ÿçš„ä¸­å¤®åè°ƒè€…ï¼Œå®ƒä¼šåˆ†æè¿™æ¡è¯·æ±‚ï¼Œå¹¶è¯†åˆ«å‡ºä¸¤ä¸ªå…³é”®æˆåˆ†ï¼š</p>
<ul>
<li>
<p><strong>intent_query</strong>ï¼š<br/>
è¿™æ˜¯ç”¨äºâ€œé¦†å‘˜ï¼ˆLibrarianï¼‰æŸ¥è¯¢â€çš„â€œæ„å›¾å‘é‡â€ï¼Œä¸<strong>æœŸæœ›çš„é£æ ¼æˆ–ç»“æ„</strong>æœ‰å…³</p>
<ul>
<li>åœ¨ä¾‹å­ä¸­å°±æ˜¯ï¼š <em>â€œæ‚¬ç–‘æ•…äº‹ï¼ˆsuspenseful storyï¼‰â€</em></li>
</ul>
</li>
<li>
<p><strong>topic_query</strong>ï¼š<br/>
è¿™æ˜¯ç”¨äºâ€œç ”ç©¶å‘˜ï¼ˆResearcherï¼‰æŸ¥è¯¢â€çš„â€œä¸»é¢˜å‘é‡â€ï¼Œä¸<strong>ä¸»é¢˜å†…å®¹æœ¬èº«</strong>æœ‰å…³</p>
<ul>
<li>åœ¨ä¾‹å­ä¸­å°±æ˜¯ï¼š <em>â€œé˜¿æ³¢ç½— 11 å·ï¼ˆApollo 11ï¼‰â€</em></li>
</ul>
</li>
</ul>
<p>éšåï¼ŒOrchestrator ä¼šæŠŠè¿™ä¸¤ä¸ªæŸ¥è¯¢åˆ†æ´¾ç»™å„è‡ªçš„ä¸“ä¸šæ™ºèƒ½ä½“ï¼š</p>
<ol>
<li>
<p><strong>Librarian æ™ºèƒ½ä½“ï¼ˆä¸Šä¸‹æ–‡é¦†å‘˜ï¼‰</strong></p>
<ul>
<li>èŒè´£ï¼šæ£€ç´¢â€œæŒ‡ä»¤è„šæœ¬â€ï¼ˆinstruction scriptsï¼‰ã€‚</li>
<li>å®ƒé€šè¿‡å¼•æ“çš„ MCP æ¶ˆæ¯å±‚æ¥æ”¶ <code>intent_query</code>ï¼Œ</li>
<li>æŸ¥è¯¢çš„æ˜¯ <strong>ContextLibrary å‘½åç©ºé—´</strong>ï¼Œ</li>
<li>æ‰§è¡Œè¯­ä¹‰æ£€ç´¢ï¼Œæ‰¾åˆ°æœ€åŒ¹é…æœ¬æ¬¡æ„å›¾çš„â€œè“å›¾æè¿°â€ï¼Œ</li>
<li>ç„¶åå–å›å¯¹åº”çš„<strong>è¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintï¼‰</strong> ã€‚</li>
</ul>
</li>
<li>
<p><strong>Researcher æ™ºèƒ½ä½“ï¼ˆç ”ç©¶å‘˜ï¼‰</strong></p>
<ul>
<li>èŒè´£ï¼šæ£€ç´¢â€œäº‹å®ä¿¡æ¯â€ã€‚</li>
<li>å®ƒæ¥æ”¶ <code>topic_query</code>ï¼Œ</li>
<li>æŸ¥è¯¢çš„æ˜¯ <strong>KnowledgeStore å‘½åç©ºé—´</strong>ï¼Œ</li>
<li>æ£€ç´¢ä¸ä¸»é¢˜ç›¸å…³çš„äº‹å®æ€§æ–‡æœ¬å—ï¼ˆchunksï¼‰ï¼Œ</li>
<li>å¹¶æŠŠè¿™äº›ä¿¡æ¯ç»¼åˆä¸ºç®€æ˜çš„â€œç ”ç©¶ç»“è®ºâ€ã€‚</li>
</ul>
</li>
</ol>
<p>å½“è¿™ä¸¤è·¯ç»“æœéƒ½å‡†å¤‡å¥½ä¹‹åï¼ŒOrchestrator ä¼šæŠŠï¼š</p>
<ul>
<li>æ¥è‡ª Librarian çš„<strong>æŒ‡ä»¤è„šæœ¬ / è“å›¾</strong>ï¼Œä»¥åŠ</li>
<li>æ¥è‡ª Researcher çš„<strong>ç»¼åˆäº‹å®</strong></li>
</ul>
<p>ä¸€å¹¶â€œäº¤ä»˜â€ç»™ Writer æ™ºèƒ½ä½“ã€‚<br/>
åœ¨å›¾ 3.1 ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹è¢«ç®­å¤´è¡¨ç¤ºä¸ºï¼š<strong>è“å›¾ï¼ˆblueprintï¼‰å’Œäº‹å®ï¼ˆfactsï¼‰ä» Librarian ä¸ Researcher æµå‘ Writer</strong>ã€‚</p>
<p>Writer æ™ºèƒ½ä½“ä½œä¸ºç³»ç»Ÿçš„â€œç”Ÿæˆå¼•æ“â€ï¼š</p>
<ul>
<li>å°†â€œäº‹å®â€ç”¨ä½œå†…å®¹ç´ æï¼›</li>
<li>å°†â€œè“å›¾â€ç”¨ä½œç»“æ„ä¸é£æ ¼çš„<strong>å¼ºçº¦æŸæŒ‡ä»¤</strong>ï¼›</li>
</ul>
<p>åœ¨è¿™åŒé‡çº¦æŸä¸‹ï¼Œå®ƒç”Ÿæˆæœ€ç»ˆè¾“å‡ºï¼šæ—¢æ»¡è¶³<strong>äº‹å®æ­£ç¡®æ€§</strong>ï¼Œåˆç¬¦åˆ<strong>è¿‡ç¨‹æ€§ / é£æ ¼æ€§æŒ‡ä»¤</strong>ã€‚</p>
<p>è¿™ç§æ¶æ„å¸¦æ¥äº†æé«˜çš„<strong>çµæ´»æ€§ä¸å¯æ‰©å±•æ€§</strong>ï¼š</p>
<ul>
<li>æ›´æ–°çŸ¥è¯†åº“ï¼Œä¸éœ€è¦ä¿®æ”¹æŒ‡ä»¤è„šæœ¬ï¼›</li>
<li>æ–°å¢è¯­ä¹‰è“å›¾ï¼Œä¹Ÿä¸éœ€è¦è§¦ç¢°äº‹å®æ•°æ®ï¼›</li>
<li>åœ¨è¿è¡Œæ—¶ï¼Œæ™ºèƒ½ä½“ä¼šæ ¹æ®æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼ŒåŠ¨æ€è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚</li>
</ul>
<p>è‡³æ­¤ï¼Œæ¶æ„å·²ç»è®²æ¸…æ¥šäº†ã€‚<br/>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥å®ç°éƒ¨åˆ†ï¼šç¬¬ä¸€æ­¥æ˜¯æ„å»º <strong>RAG æ•°æ®æ‘„å…¥ç®¡é“ï¼ˆRAG ingestion pipelineï¼‰</strong> ã€‚</p>
<h2 data-id="heading-3">RAG æµæ°´çº¿ä¸­çš„æ•°æ®æ‘„å…¥ï¼ˆä¸Šä¸‹æ–‡ä¸çŸ¥è¯†ï¼‰</h2>
<p>åœ¨ç¬¬ 2 ç« é‡Œï¼Œæˆ‘ä»¬ç”¨<strong>æ¨¡æ‹Ÿæ•°æ®</strong>æ„å»ºäº†ä¸€ä¸ª MASã€‚<br/>
è¿™äº›æ™ºèƒ½ä½“â€œä¼šæŸ¥èµ„æ–™â€ï¼Œä½†å®ƒä»¬èƒ½æŸ¥åˆ°çš„ä¸œè¥¿åªæ¥è‡ªä¸€ä¸ªç®€å•çš„ Python å­—å…¸ã€‚</p>
<p>æœ¬ç« è¦è¿ˆå‡ºä¸‹ä¸€æ­¥ï¼š<br/>
ç”¨ä¸€ä¸ª<strong>çœŸå®çš„ RAG æµæ°´çº¿</strong>æ›¿æ¢æ‰è¿™ä¸ªæ¨¡æ‹Ÿå±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25aeee14196d4eb3b76a9c1b4bf6e5f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5pm66IO96ICB5Y-45py6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764172772&amp;x-signature=AL%2FNhGiEkdPnqmtrj6cu8kINsiY%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ 3.2ï¼šRAG æ•°æ®æ‘„å…¥æµæ°´çº¿æµç¨‹å›¾</p>
<p>å›¾ 3.2 å±•ç¤ºäº†è¿™æ¡æµæ°´çº¿çš„æ•´ä½“æµç¨‹ã€‚<br/>
åœ¨æ™ºèƒ½ä½“èƒ½å¤Ÿé«˜æ•ˆæ£€ç´¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆ<strong>å‡†å¤‡å¹¶æ„å»ºå®ƒä»¬è¦ç”¨çš„æ•°æ®åº“</strong>ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å¼•å…¥ä¸¤ç§äº’è¡¥çš„ RAG å½¢å¼ï¼š</p>
<ul>
<li>
<p><strong>çŸ¥è¯†åº“ï¼ˆKnowledge baseï¼Œäº‹å®å‹ RAGï¼‰</strong> ï¼š<br/>
å­˜å‚¨äº‹å®ä¿¡æ¯ã€‚è¿™æ˜¯æœ€ç»å…¸ã€å·¥ç¨‹å¸ˆä»¬æœ€ç†Ÿæ‚‰çš„ RAG ç”¨æ³•ã€‚</p>
</li>
<li>
<p><strong>ä¸Šä¸‹æ–‡åº“ï¼ˆContext libraryï¼Œè¿‡ç¨‹å‹ RAGï¼‰</strong> ï¼š<br/>
å­˜å‚¨æŒ‡ä»¤æˆ–<strong>è¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintsï¼‰</strong> ï¼ˆåœ¨ç¬¬ 1 ç« ä¸­ä»‹ç»è¿‡ï¼‰ã€‚<br/>
æ™ºèƒ½ä½“æŸ¥è¯¢è¿™ä¸ªåº“ï¼Œæ˜¯ä¸ºäº†å†³å®šï¼š</p>
<blockquote>
<p>è‡ªå·±åº”è¯¥ç”¨ä»€ä¹ˆç»“æ„æ¥ç»„ç»‡å›ç­”ã€é‡‡ç”¨ä»€ä¹ˆé£æ ¼ã€‚</p>
</blockquote>
</li>
</ul>
<p>è¦å®ç°è¿™ä¸€åˆ‡ï¼Œè¯·æ‰“å¼€æœ¬ç« ä»“åº“ä¸­çš„ <code>RAG_Pipeline.ipynb</code>ã€‚<br/>
åœ¨è¿™ä¸ª Notebook é‡Œï¼Œæˆ‘ä»¬å°†ï¼š</p>
<ol>
<li>æ„å»ºä¸¤ä¸ªæ•°æ®åº“ï¼ˆçŸ¥è¯†åº“ä¸ä¸Šä¸‹æ–‡åº“ï¼‰ï¼›</li>
<li>æå–å¹¶è½¬æ¢æ•°æ®ä¸ºå‘é‡ï¼ˆembeddingsï¼‰ï¼›</li>
<li>å°†è¿™äº›å‘é‡ä¸Šä¼ åˆ° Pinecone å‘é‡å­˜å‚¨ä¸­ï¼›</li>
<li>å¹¶é€šè¿‡ <strong>namespace</strong> å°†è¿™ä¸¤ä¸ªæ•°æ®åº“ä¸¥æ ¼éš”ç¦»ã€‚</li>
</ol>
<h3 data-id="heading-4">å®‰è£…ä¸ç¯å¢ƒå‡†å¤‡</h3>
<p>Installation and setup</p>
<p>å…ˆæŠŠè¿è¡Œç¯å¢ƒå‡†å¤‡å¥½ã€‚<br/>
æœ¬é¡¹ç›®ä¸­æˆ‘ä½¿ç”¨ <strong>Pinecone</strong> ä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œä½†å¦‚æœä½ æ›´ä¹ æƒ¯å…¶å®ƒå¹³å°ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢ï¼›<br/>
åªè¦æ»¡è¶³å‘é‡æ£€ç´¢èƒ½åŠ›å³å¯ã€‚</p>
<p>åŒæ—¶ï¼Œä¸ºäº†æ›´å®ç”¨ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¿˜ä¼šå¼•å…¥ï¼š</p>
<ul>
<li><code>tqdm</code>ï¼šç”¨äºç›‘æ§ä¸Šä¼ è¿›åº¦ï¼›</li>
<li><code>tenacity</code>ï¼šç”¨äºåœ¨ç½‘ç»œæŠ–åŠ¨æ—¶ï¼Œè®© API è°ƒç”¨æ›´å¯é ï¼ˆè‡ªåŠ¨é‡è¯•ç­‰ï¼‰ã€‚</li>
</ul>
<p>æœ‰ä¸€ä¸ªæˆ‘è‡ªå·±è¸©è¿‡å¾ˆå¤šæ¬¡å‘çš„ç»éªŒè¦æå‰è¯´ï¼š<br/>
<strong>Python çš„åº“ç”Ÿæ€å˜åŒ–å¾ˆå¿«</strong>ï¼Œå¦‚æœä¸é”å®šç‰ˆæœ¬ï¼Œå¾ˆå®¹æ˜“ä»â€œåšç³»ç»Ÿâ€å˜æˆâ€œæ‰“ä¾èµ–è¡¥ä¸â€ã€‚<br/>
ä¸ºäº†é¿å…ä½ ä¹Ÿé™·åœ¨è¿™äº›é—®é¢˜é‡Œï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç›´æ¥å†»ç»“ä¸€äº›å…·ä½“ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">!pip install <span class="hljs-attr">tqdm</span>==<span class="hljs-number">4.67</span>.<span class="hljs-number">1</span> --upgrade
!pip install <span class="hljs-attr">openai</span>==<span class="hljs-number">1.104</span>.<span class="hljs-number">2</span>
!pip install <span class="hljs-attr">pinecone</span>==<span class="hljs-number">7.0</span>.<span class="hljs-number">0</span> tqdm==<span class="hljs-number">4.67</span>.<span class="hljs-number">1</span> tenacity==<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼ŒæŠŠæœ¬ Notebook éœ€è¦çš„æ¨¡å—å¯¼å…¥è¿›æ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Imports for this notebook</span>
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> tqdm.auto <span class="hljs-keyword">import</span> tqdm
<span class="hljs-keyword">import</span> tiktoken
<span class="hljs-keyword">from</span> pinecone <span class="hljs-keyword">import</span> Pinecone, ServerlessSpec
<span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> retry, stop_after_attempt, wait_random_exponential

<span class="hljs-comment"># general imports required in the notebooks of this book</span>
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> textwrap
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display, Markdown
<span class="hljs-keyword">import</span> copy
</code></pre>
<p>è¦ä½¿ç”¨ <strong>OpenAI</strong> å’Œ <strong>Pinecone</strong>ï¼Œä½ éœ€è¦ API Keyã€‚<br/>
å¦‚æœä½ è¿˜æ²¡æœ‰æ³¨å†Œï¼Œè¿™ä¸¤ä¸ªå¹³å°çš„ä¸Šæ‰‹æµç¨‹éƒ½å¾ˆç®€å•ï¼›<br/>
Pinecone ç”šè‡³æä¾›å¸¦ç´¢å¼•æ•°é‡é™åˆ¶çš„å…è´¹è®¡åˆ’ï¼Œéå¸¸é€‚åˆå®éªŒã€‚</p>
<p>åœ¨è¿™ä¸ª Notebook é‡Œï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ <strong>Google Colab çš„ Secrets Manager</strong> æ¥æä¾›è¿™äº› Keyï¼›<br/>
å¦‚æœä½ åœ¨æœ¬åœ°è·‘ï¼Œä»£ç ä¼šé€€å›åˆ°ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆenvironment variablesï¼‰ã€‚<br/>
ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„ç¯å¢ƒè‡ªç”±ä¿®æ”¹è¿™ä¸€å±‚ã€‚</p>
<p>åœ¨åµŒå…¥æ¨¡å‹ä¸Šï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ OpenAI çš„ <code>text-embedding-3-small</code>ï¼š</p>
<ul>
<li>å®ƒä¼šè¾“å‡º 1536 ç»´çš„å‘é‡ï¼Œ</li>
<li>å¯¹æˆ‘ä»¬çš„åœºæ™¯æ¥è¯´å·²ç»ç»°ç»°æœ‰ä½™ã€‚</li>
</ul>
<p>ä½ å½“ç„¶å¯ä»¥é€‰æ‹©å…¶å®ƒåµŒå…¥æ¨¡å‹ï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®åŸåˆ™ï¼š<br/>
<strong>ç”¨æ¥åˆ›å»ºå‘é‡çš„æ¨¡å‹ï¼Œå¿…é¡»ä¸æ£€ç´¢æ—¶ä½¿ç”¨çš„æ¨¡å‹ä¿æŒä¸€è‡´</strong>ã€‚</p>
<p>åœ¨å®Œæˆ API Key è®¾ç½®ä¹‹åï¼Œæˆ‘ä»¬ä¼šæŠŠè¿™äº›ç»†èŠ‚å†™è¿›é…ç½®å˜é‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import os
from openai import OpenAI
from google.colab import userdata

<span class="hljs-comment"># Load the API key from Colab secrets, set the env var, then init the client</span>
â€¦
<span class="hljs-comment"># Configuration</span>
<span class="hljs-attr">EMBEDDING_MODEL</span> = <span class="hljs-string">"text-embedding-3-small"</span>
<span class="hljs-attr">EMBEDDING_DIM</span> = <span class="hljs-number">1536</span> <span class="hljs-comment"># Dimension for text-embedding-3-small</span>
<span class="hljs-attr">GENERATION_MODEL</span> = <span class="hljs-string">"gpt-5"</span>
</code></pre>
<blockquote>
<p>å…³äºæ¨¡å‹é€‰æ‹©çš„å°æç¤ºï¼š<br/>
è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ GPT-5 æ˜¯ä¸ºäº†åœ¨æœ¬ç« å’Œåç»­ç« èŠ‚ä¸­ä¿æŒè¿ç»­æ€§ã€‚<br/>
ä½†æ•´ä¸ªå¼•æ“æœ¬èº«æ˜¯â€œæ¨¡å‹æ— å…³â€çš„ï¼š<br/>
ä½ å¯ä»¥æŠŠ <code>GENERATION_MODEL</code> æ¢æˆä»»ä½•å…¼å®¹çš„ LLMï¼ˆä¾‹å¦‚ Mistral æˆ– Claudeï¼‰ï¼Œ<br/>
è€Œæ¶æ„çš„å…¶å®ƒéƒ¨åˆ†ï¼ˆæç¤ºè¯ã€æ³¨å†Œè¡¨ã€Planner/Executorï¼‰éƒ½å¯ä»¥ä¿æŒä¸å˜ã€‚</p>
</blockquote>
<p>å¦‚æœä¸€åˆ‡é…ç½®æ— è¯¯ï¼ŒNotebook ä¼šç»™å‡ºç±»ä¼¼ä¸‹é¢çš„æç¤ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">OpenAI API <span class="hljs-keyword">key</span> loaded <span class="hljs-built_in">and</span> environment variable <span class="hljs-keyword">set</span> successfully.
</code></pre>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å‰è¿›ï¼Œåˆå§‹åŒ– Pinecone çš„ç´¢å¼•äº†ã€‚</p>
<h3 data-id="heading-5">åˆå§‹åŒ– Pinecone ç´¢å¼•</h3>
<p>Initializing the Pinecone index</p>
<p>ç°åœ¨ç¯å¢ƒå·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬æ¥ç”¨åˆšåˆšé…ç½®çš„ API Key è¿æ¥ <strong>OpenAI</strong> å’Œ <strong>Pinecone</strong>ã€‚<br/>
ç¬¬ä¸€æ­¥æ˜¯ä¸º Pinecone ç´¢å¼•èµ·ä¸€ä¸ªåå­—ï¼Œæœ¬ç« ä¸­æˆ‘ä»¬ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">INDEX_NAME</span> = <span class="hljs-string">'genai-mas-mcp-ch3'</span>
</code></pre>
<p>æ¥ç€ï¼Œè·å– Pinecone çš„ API Keyã€‚ç¤ºä¾‹ä¸­ä¾ç„¶ä½¿ç”¨ Colab çš„ Secrets Managerï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># Standard way to access secrets securely in Google Colab</span>
    <span class="hljs-keyword">from</span> google.colab <span class="hljs-keyword">import</span> userdata
    PINECONE_API_KEY = userdata.get(<span class="hljs-string">'PINECONE_API_KEY'</span>)
â€¦
</code></pre>
<p>æ‹¿åˆ° API Key åï¼Œæˆ‘ä»¬è¦ä¸ºæœ¬é¡¹ç›®å®šä¹‰ä¸¤ä¸ªå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š<br/>
å®ƒä»¬ä¼šåœ¨ Pinecone ä¸­å°†ä¸¤ç±»æ•°æ®ä¸¥æ ¼éš”ç¦»ï¼š</p>
<ul>
<li><code>NAMESPACE_KNOWLEDGE</code>ï¼šå­˜å‚¨äº‹å®ï¼ˆKnowledgeStoreï¼‰</li>
<li><code>NAMESPACE_CONTEXT</code>ï¼šå­˜å‚¨è¯­ä¹‰è“å›¾ / æŒ‡ä»¤ï¼ˆContextLibraryï¼‰</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Pinecone çš„ <strong>serverless æ¶æ„</strong>ï¼Œ<br/>
è¿™ä¹Ÿæ˜¯ Pinecone å…è´¹è®¡åˆ’æ¨èçš„æ–¹å¼ã€‚<br/>
æœ¬ç¤ºä¾‹ä¸­æˆ‘ä½¿ç”¨ AWS çš„ <code>us-east-1</code> åŒºåŸŸï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># --- Initialize Clients ---</span>
<span class="hljs-attr">client</span> = OpenAI(api_key=OPENAI_API_KEY)
<span class="hljs-attr">pc</span> = Pinecone(api_key=PINECONE_API_KEY)

<span class="hljs-comment"># --- Define Index and Namespaces ---</span>
<span class="hljs-attr">INDEX_NAME</span> = <span class="hljs-string">'genai-mas-mcp-ch3'</span>
<span class="hljs-attr">NAMESPACE_KNOWLEDGE</span> = <span class="hljs-string">"KnowledgeStore"</span>
<span class="hljs-attr">NAMESPACE_CONTEXT</span> = <span class="hljs-string">"ContextLibrary"</span>

<span class="hljs-comment"># Define Serverless Specification</span>
<span class="hljs-attr">spec</span> = ServerlessSpec(cloud=<span class="hljs-string">'aws'</span>, region=<span class="hljs-string">'us-east-1'</span>)
</code></pre>
<p>åœ¨ä½¿ç”¨ç´¢å¼•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ£€æŸ¥å®ƒæ˜¯å¦å·²ç»å­˜åœ¨ï¼š<br/>
å¦‚æœä¸å­˜åœ¨ï¼Œå°±ç”¨æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ç»´åº¦ï¼ˆ1536ï¼‰åˆ›å»ºä¸€ä¸ªæ–°ç´¢å¼•ï¼Œå¹¶å°†åº¦é‡æ–¹å¼è®¾ä¸º <strong>cosine ç›¸ä¼¼åº¦</strong>â€”â€”è¿™æ˜¯æ–‡æœ¬å‘é‡å¯¹æ¯”å¾ˆå¸¸ç”¨çš„æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Check if index exists</span>
if INDEX_NAME not in pc.list_indexes().names():
    print(f"Index '{INDEX_NAME}' not found. Creating new serverless index...")
    pc.create_index(
        <span class="hljs-attr">name</span>=INDEX_NAME,
        <span class="hljs-attr">dimension</span>=EMBEDDING_DIM,
        <span class="hljs-attr">metric</span>=<span class="hljs-string">'cosine'</span>,
        <span class="hljs-attr">spec</span>=spec
    )
    <span class="hljs-comment"># Wait for index to be ready</span>
    while not pc.describe_index(INDEX_NAME).status<span class="hljs-section">['ready']</span>:
        print("Waiting for index to be ready...")
        time.sleep(1)
    print("Index created successfully. It is new and empty.")
</code></pre>
<p>å¦‚æœç´¢å¼•å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ˜¯å¦æ¸…ç©ºå…¶ä¸­æ•°æ®ã€‚<br/>
åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯æ¬¡éƒ½ä»â€œå¹²å‡€ç¯å¢ƒâ€å¼€å§‹ï¼Œå› æ­¤ä¼šåˆ é™¤ä¸¤ä¸ªå‘½åç©ºé—´é‡Œçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">else:
    print(f"Index '{INDEX_NAME}' already exists. Clearing namespaces for a fresh start...")
    <span class="hljs-attr">index</span> = pc.Index(INDEX_NAME)
    <span class="hljs-attr">namespaces_to_clear</span> = [NAMESPACE_KNOWLEDGE, NAMESPACE_CONTEXT]
</code></pre>
<p>è¦æ¸…ç©ºç´¢å¼•ï¼Œæˆ‘ä»¬éœ€è¦ä¾æ¬¡éå†æ¯ä¸ªå‘½åç©ºé—´å¹¶åˆ é™¤æ•°æ®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">    for namespace in namespaces_to_clear:
        <span class="hljs-comment"># Check if namespace exists and has vectors before deleting</span>
        <span class="hljs-attr">stats</span> = index.describe_index_stats()
        if namespace in stats.namespaces \
        AND stats.namespaces<span class="hljs-section">[namespace]</span>.vector_count &gt; 0:
            print(f"Clearing namespace '{namespace}'...")
            index.delete(<span class="hljs-attr">delete_all</span>=<span class="hljs-literal">True</span>, namespace=namespace)
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªâ€œå‘ç‚¹â€ï¼š<br/>
åˆ é™¤æ“ä½œæœ‰å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè€Œç¨‹åºå¯èƒ½ç»§ç»­è¿è¡Œå¾—å¤ªå¿«ã€‚<br/>
è¿™æ„å‘³ç€ï¼šå¦‚æœåˆ é™¤æ¯”è¾ƒæ…¢ï¼Œè€Œæˆ‘ä»¬çš„ä¸Šä¼ å·²ç»å¼€å§‹ï¼Œæ–°å†™å…¥çš„å‘é‡æœ‰å¯èƒ½è¢«â€œé¡ºå¸¦â€åˆ æ‰â€”â€”è¿™è™½ç„¶ä¸æ˜¯å¿…ç„¶ï¼Œä½†æ˜¾ç„¶æ˜¯æˆ‘ä»¬ä¸æƒ³æ‰¿æ‹…çš„é£é™©ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¼ºåˆ¶ç³»ç»Ÿ<strong>ç­‰å¾…ï¼Œç›´åˆ°å‘é‡æ•°é‡çœŸæ­£å˜æˆ 0</strong> æ‰ç»§ç»­ï¼š</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-comment"># **CRITICAL FUNCTION: Wait for deletion to complete**</span>
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                stats = index.describe_index_stats()
                <span class="hljs-keyword">if</span> namespace <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> stats.namespaces <span class="hljs-keyword">or</span> \
                stats.namespaces[namespace].vector_count == <span class="hljs-number">0</span>:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Namespace '<span class="hljs-subst">{namespace}</span>' cleared successfully."</span>)
                    <span class="hljs-keyword">break</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Waiting for namespace '<span class="hljs-subst">{namespace}</span>' to clear..."</span>)
                time.sleep(<span class="hljs-number">5</span>) <span class="hljs-comment"># Poll every 5 seconds</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Namespace '<span class="hljs-subst">{namespace}</span>' is already empty or does not exist. Skipping."</span>)
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼è¿æ¥åˆ°è¿™ä¸ªç´¢å¼•ï¼Œä¾›åç»­æ“ä½œä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Connect to the index for subsequent operations</span>
<span class="hljs-attr">index</span> = pc.Index(INDEX_NAME)
</code></pre>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Index <span class="hljs-comment">'genai-mas-mcp-ch3' already exists. Clearing namespaces for a fresh start...</span>
<span class="hljs-keyword">Namespace</span> <span class="hljs-comment">'KnowledgeStore' is already empty or does not exist. Skipping.</span>
<span class="hljs-keyword">Namespace</span> <span class="hljs-comment">'ContextLibrary' is already empty or does not exist. Skipping.</span>
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ é€šå¸¸ä¸ä¼šå¸Œæœ›<strong>æ¯æ¬¡è¿è¡Œéƒ½æ¸…ç©ºå‘½åç©ºé—´</strong>â€”â€”<br/>
å¾ˆå¤šæ—¶å€™ä½ å¸Œæœ›ç³»ç»Ÿ<strong>ä¿ç•™å·²æ„å»ºå¥½çš„çŸ¥è¯†</strong>ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨æˆ‘ä»¬çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä»â€œç©ºç¯å¢ƒâ€å¼€å§‹ä¼šæ›´åŠ æ¸…æ™°ã€å¯æ§ã€‚<br/>
ç´¢å¼•å‡†å¤‡å°±ç»ªä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼š<strong>å‡†å¤‡å¹¶å†™å…¥æ•°æ®</strong>ã€‚</p>
<h3 data-id="heading-6">æ•°æ®å‡†å¤‡ï¼šä¸Šä¸‹æ–‡åº“ï¼ˆContext Libraryï¼Œè¿‡ç¨‹å‹ RAGï¼‰</h3>
<p>åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¦ä¸º<strong>ä¸Šä¸‹æ–‡åº“ï¼ˆcontext libraryï¼‰<strong>å®šä¹‰æ•°æ®ã€‚<br/>
è¿™æ˜¯æ•´ä¸ª</strong>è¿‡ç¨‹å‹ RAGï¼ˆprocedural RAGï¼‰<strong>çš„æ ¸å¿ƒï¼Œå› ä¸ºè¿™é‡Œæˆ‘ä»¬å¼•å…¥çš„ä¸æ˜¯é™æ€çŸ¥è¯†ï¼Œè€Œæ˜¯</strong>â€œå¦‚ä½•åšäº‹â€çš„ç¨‹åºæ€§æŒ‡ä»¤</strong>ã€‚<br/>
ä¸Šä¸‹æ–‡åº“å»ºç«‹åœ¨ç¬¬ 1 ç« ä»‹ç»çš„â€œè¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintï¼‰â€æ¦‚å¿µä¹‹ä¸Šï¼Œä½†è¿™æ¬¡æˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªæ›´ç²¾ç¡®çš„ç»“æ„æ¥å®ç°ã€‚</p>
<p>æ¯æ¡ä¸Šä¸‹æ–‡åº“ä¸­çš„è®°å½•ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>id</strong>ï¼š<br/>
åœ¨ Pinecone ç´¢å¼•ä¸­çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼›</li>
<li><strong>descriptionï¼ˆæè¿°ï¼‰</strong> ï¼š<br/>
ç”¨æ¥è¯´æ˜è¿™ä¸ªè“å›¾çš„ç”¨é€”ä¸é£æ ¼ã€‚<br/>
æˆ‘ä»¬åªå¯¹ <em>description</em> åšå‘é‡åŒ–ï¼Œä»¥ä¾¿åœ¨æ£€ç´¢æ—¶æ‰¾åˆ°éœ€è¦çš„è“å›¾ã€‚<br/>
ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œå›¾ä¹¦é¦†çš„å¡ç‰‡â€ï¼Œè€Œä¸æ˜¯ä¹¦æœ¬æœ¬èº«ã€‚</li>
<li><strong>blueprintï¼ˆè“å›¾ï¼‰</strong> ï¼š<br/>
çœŸæ­£ç»™ LLM ç”¨çš„æŒ‡ä»¤å†…å®¹ï¼Œä»¥ <strong>JSON</strong> æ ¼å¼å­˜å‚¨ã€‚<br/>
è“å›¾æœ¬èº«ä¸ä¼šè¢« embedï¼›å½“æˆ‘ä»¬é€šè¿‡ description æ‰¾åˆ°ç›®æ ‡åï¼Œå°±åƒæ ¹æ®ä¹¦ç›®å»ä¹¦æ¶å–ä¹¦ä¸€æ ·ï¼Œè¯»å–å®Œæ•´ JSON è“å›¾ã€‚</li>
</ol>
<p>åœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¹ˆå·¥ä½œï¼š</p>
<ul>
<li>å½“ Orchestrator éœ€è¦æŸç§ç‰¹å®šé£æ ¼æ—¶ï¼Œ</li>
<li>Librarianï¼ˆé¦†å‘˜æ™ºèƒ½ä½“ï¼‰ä¼šæ ¹æ®éœ€æ±‚æ£€ç´¢æœ€åŒ¹é…çš„ <strong>description</strong>ï¼Œ</li>
<li>æ‰¾åˆ°åï¼Œå†æŠŠå¯¹åº”çš„å®Œæ•´ JSON è¯­ä¹‰è“å›¾å–å‡ºæ¥ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡éå¸¸<strong>å¯æ‰©å±•</strong>ï¼š<br/>
ä½ å¯ä»¥åœ¨å‘é‡åº“é‡Œä¸æ–­æ–°å¢æ–°çš„ LLM ä»»åŠ¡è“å›¾ï¼Œè€Œ<strong>æ— éœ€é‡å†™æ™ºèƒ½ä½“é€»è¾‘</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å…ˆå®šä¹‰ä¸‰ä¸ªç¤ºä¾‹è“å›¾ï¼š</p>
<ol>
<li>ç”¨äºå†™æ‚¬ç–‘å™äº‹ï¼ˆcreative writingï¼Œæ‚¬ç–‘æ•…äº‹ï¼‰</li>
<li>ç”¨äºæŠ€æœ¯è®²è§£ï¼ˆtechnical explanationï¼Œå¼ºè°ƒäº‹å®ä¸ç²¾ç¡®æ€§ï¼‰</li>
<li>ç”¨äºè½»æ¾å£å»çš„æ€»ç»“ï¼ˆcasual summaryï¼Œå¸¸è§ LLM ç”¨ä¾‹ï¼‰</li>
</ol>
<p>å®šä¹‰è¯­ä¹‰è“å›¾æœ¬èº«å°±æ˜¯ä¸€ç§å…³é”®çš„<strong>ä¸Šä¸‹æ–‡å·¥ç¨‹æŠ€èƒ½</strong>ã€‚<br/>
LLM ä¸æ˜¯è¯»å¿ƒæœ¯ï¼Œå®ƒéœ€è¦<strong>ç²¾å¿ƒç¼–å†™çš„æŒ‡ä»¤</strong>ã€‚<br/>
å³ä¾¿ä½ å€ŸåŠ© copilots æˆ– API æ¥è‡ªåŠ¨ç”Ÿæˆè¿™äº›è“å›¾æè¿°ï¼Œä½ ä»ç„¶å¿…é¡»äººå·¥å®¡æ ¸å…¶è´¨é‡ã€‚</p>
<p>æ¥çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ â€”â€” <strong>æ‚¬ç–‘å™äº‹è“å›¾</strong>ã€‚<br/>
è¿™ä¸ªè“å›¾æ˜¯ä¸ºâ€œè®²æ•…äº‹â€è®¾è®¡çš„ï¼Œç›®æ ‡æ˜¯è¥é€ ç´§å¼ æ°›å›´ï¼Œè®©è¯»è€…ä¸€ç›´â€œç´§ç»·ç€ç¥ç»â€ï¼š</p>
<pre><code class="hljs language-css" lang="css">context_blueprints = <span class="hljs-selector-attr">[    {        <span class="hljs-string">"id"</span>: <span class="hljs-string">"blueprint_suspense_narrative"</span>,        <span class="hljs-string">"description"</span>: <span class="hljs-string">"A precise Semantic Blueprint designed to generate suspenseful and tense narratives, suitable for children's stories. Focuses on atmosphere, perceived threats, and emotional impact. Ideal for creative writing."</span>,        <span class="hljs-string">"blueprint"</span>: json.dumps({              <span class="hljs-string">"scene_goal"</span>: <span class="hljs-string">"Increase tension and create suspense."</span>,              <span class="hljs-string">"style_guide"</span>: <span class="hljs-string">"Use short, sharp sentences. Focus on sensory details (sounds, shadows). Maintain a slightly eerie but age-appropriate tone."</span>,              <span class="hljs-string">"participants"</span>: [                { <span class="hljs-string">"role"</span>: <span class="hljs-string">"Agent"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"The protagonist experiencing the events."</span> },                { <span class="hljs-string">"role"</span>: <span class="hljs-string">"Source_of_Threat"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"The underlying danger or mystery."</span> }              ]</span>,
            "instruction": <span class="hljs-string">"Rewrite the provided facts into a narrative adhering strictly to the scene_goal and style_guide."</span>
            })
    },
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„æªè¾è¦éå¸¸å…·ä½“ã€‚<br/>
å†™â€œå„¿ç«¥å‘çš„æ‚¬ç–‘æ•…äº‹â€å’Œå†™â€œæŠ€æœ¯è¯´æ˜æ–‡â€å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ï¼Œè“å›¾å¿…é¡»ä½“ç°è¿™ç§å·®å¼‚ã€‚</p>
<p>ä¸‹é¢æ˜¯ç¬¬äºŒä¸ªè“å›¾ â€”â€” <strong>æŠ€æœ¯è¯´æ˜è“å›¾</strong>ã€‚<br/>
å®ƒå’Œä¸Šé¢çš„å™äº‹è“å›¾å‡ ä¹æ˜¯åè¿‡æ¥çš„ï¼šä¸ç”¨æ°›å›´å’Œæƒ…ç»ªï¼Œè€Œæ˜¯å¼ºè°ƒæ¸…æ™°ã€ç»“æ„ã€å®¢è§‚æ€§ï¼š</p>
<pre><code class="hljs language-css" lang="css">    {
        "id": <span class="hljs-string">"blueprint_technical_explanation"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"A Semantic Blueprint designed for technical explanation or analysis. This blueprint focuses on clarity, objectivity, and structure. Ideal for breaking down complex processes, explaining mechanisms, or summarizing scientific findings."</span>,
        <span class="hljs-string">"blueprint"</span>: json.<span class="hljs-built_in">dumps</span>({
              "scene_goal": <span class="hljs-string">"Explain the mechanism or findings clearly and concisely."</span>,
              <span class="hljs-string">"style_guide"</span>: <span class="hljs-string">"Maintain an objective and formal tone. Use precise terminology. Prioritize factual accuracy and clarity over narrative flair."</span>,
              <span class="hljs-string">"structure"</span>: [<span class="hljs-string">"Definition"</span>, <span class="hljs-string">"Function/Operation"</span>, <span class="hljs-string">"Key Findings/Impact"</span>],
              <span class="hljs-string">"instruction"</span>: <span class="hljs-string">"Organize the provided facts into the defined structure, adhering to the style_guide."</span>
            })
    },
</code></pre>
<p>è¿™ç§æ ¼å¼æ­£æ˜¯ä½ åœ¨æŠ€æœ¯æˆ–ç§‘å­¦åœºæ™¯ä¸­éœ€è¦çš„é‚£ç§<strong>å¯é¢„æµ‹ç»“æ„</strong>ã€‚</p>
<p>æœ€åæ˜¯ç¬¬ä¸‰ä¸ªè“å›¾ â€”â€” <strong>è½»æ¾æ€»ç»“ï¼ˆcasual summaryï¼‰</strong> ï¼Œ<br/>
è¿™ç§é£æ ¼å¾ˆé€‚åˆåšå¿«é€Ÿæµè§ˆçš„è¯´æ˜æ–‡æˆ–â€œå°ç™½å‘è§£é‡Šâ€ï¼š</p>
<pre><code class="hljs language-css" lang="css">    {
        "id": <span class="hljs-string">"blueprint_casual_summary"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"A goal-oriented context for creating a casual, easy-to-read summary. Focuses on brevity and accessibility, explaining concepts simply."</span>,
        <span class="hljs-string">"blueprint"</span>: json.<span class="hljs-built_in">dumps</span>({
              "scene_goal": <span class="hljs-string">"Summarize information quickly and casually."</span>,
              <span class="hljs-string">"style_guide"</span>: <span class="hljs-string">"Use informal language. Keep it brief and engaging. Imagine explaining it to a friend."</span>,
              <span class="hljs-string">"instruction"</span>: <span class="hljs-string">"Summarize the provided facts using the casual style guide."</span>
            })
    }
]
</code></pre>
<p>åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¤ªå¤šè§’è‰²æˆ–ä¸¥æ ¼ç»“æ„ï¼Œ<br/>
è€Œæ˜¯é€šè¿‡ <code>style_guide</code> æŠŠ LLM æ¨å‘ï¼š</p>
<ul>
<li>ç®€çŸ­ã€</li>
<li>å£è¯­åŒ–ã€</li>
<li>æ›´äº²åˆ‡æ˜“æ‡‚çš„è¯­æ°”ï¼Œå¥½åƒä½ åœ¨ç»™åŒäº‹æˆ–æœ‹å‹è§£é‡Šä¸€ä¸ªæ¦‚å¿µã€‚</li>
</ul>
<p>ä¸ºäº†ç¡®è®¤è“å›¾æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nPrepared <span class="hljs-subst">{<span class="hljs-built_in">len</span>(context_blueprints)}</span> context blueprints."</span>)
</code></pre>
<p>è¾“å‡ºè¡¨æ˜æˆ‘ä»¬ä¸€å…±å®šä¹‰äº†ä¸‰ä¸ªè“å›¾ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">Prepared <span class="hljs-number">3</span> context blueprints.
</code></pre>
<p>è¿™é‡Œéœ€è¦è®°ä½çš„è¦ç‚¹æ˜¯ï¼š<strong>åˆ›å»ºè¯­ä¹‰è“å›¾æ—¢å¼ºå¤§ï¼Œä¹Ÿå¾ˆâ€œçƒ§è„‘â€</strong> ã€‚</p>
<ul>
<li>æ²¡æœ‰è¿™äº›è“å›¾ï¼Œä½ å¯èƒ½è¦ä¸ºæ¯ä¸€ç§ LLM ä»»åŠ¡å†™ä¸€ä¸ªç‹¬ç«‹çš„æ™ºèƒ½ä½“ â€”â€” è¿™æ ¹æœ¬ä¸å¯æ‰©å±•ã€‚</li>
<li>æœ‰äº†è¯­ä¹‰è“å›¾ï¼Œä½ å¯ä»¥å°†â€œè¿‡ç¨‹æ€§æŒ‡ä»¤â€ä¸€æ¬¡ç¼–ç ï¼Œå¤šå¤„å¤ç”¨ã€‚</li>
</ul>
<p>ä¸å…¶åœ¨äº§å“ç•Œé¢é‡Œä¸æ–­å¢åŠ å‡ åä¸ªä¸‹æ‹‰é€‰é¡¹ï¼Œä¸å¦‚æ„å»ºä¸€ä¸ªå¯æ‰©å±•çš„è‡ªåŠ¨åŒ–<strong>ä¸Šä¸‹æ–‡å¼•æ“</strong>æ¥è°ƒé…è¿™äº›è“å›¾ã€‚</p>
<p>è“å›¾è¿™è¾¹æå®šäº†ï¼Œæ¥ä¸‹æ¥å°±è½®åˆ°åŒ RAG ä¸­çš„å¦ä¸€åŠï¼š<strong>çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰</strong> ã€‚</p>
<h3 data-id="heading-7">æ•°æ®å‡†å¤‡ï¼šçŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼Œäº‹å®å‹ RAGï¼‰</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦ä¸º**çŸ¥è¯†åº“ï¼ˆknowledge baseï¼‰**å‡†å¤‡æ•°æ® â€”â€” è¿™æ˜¯ RAG æ¶æ„ä¸­â€œäº‹å®ä¾§â€çš„éƒ¨åˆ†ã€‚<br/>
å®ƒå­˜æ”¾ç›¸å¯¹é™æ€çš„ä¿¡æ¯ï¼ŒResearcher æ™ºèƒ½ä½“ä¼šåœ¨å…¶ä¸­æ£€ç´¢ï¼Œå¹¶æŠŠç»“æœç»¼åˆæˆç®€æ˜çš„â€œç ”ç©¶ç»“è®ºâ€ã€‚</p>
<p>é¡ºä¾¿å¼ºè°ƒä¸€ä¸‹ç°å®æƒ…å†µï¼š<br/>
ä½ è®¾è®¡çš„æ˜¯<strong>ç³»ç»Ÿæœ¬èº«</strong>ï¼Œè€Œä¸æ˜¯ LLMã€‚<br/>
åœ¨é‚£äº›çœ‹èµ·æ¥å¾ˆé…·çš„å¹³å°èƒŒåï¼Œå®é™…ä¸Šæœ‰å¤§é‡éœ€è¦äººç±»ç»†è‡´è®¾è®¡ä¸å‡†å¤‡çš„å·¥ä½œã€‚</p>
<p>åœ¨è¿™ä¸ªæ•™å­¦ç¤ºä¾‹é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå…³äº<strong>å¤ªç©ºæ¢ç´¢</strong>çš„å°å‹æ•°æ®é›†ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å¤ªç©ºç«èµ›ä¸é˜¿æ³¢ç½— 11 å·ä»»åŠ¡ï¼›</li>
<li>Juno æœ¨æ˜Ÿæ¢æµ‹å™¨ï¼›</li>
<li>ç«æ˜Ÿæ¢æµ‹è½¦ç­‰å†…å®¹ã€‚</li>
</ul>
<p>ä¸ºäº†è®©é‡ç‚¹è½åœ¨â€œæ¶æ„â€ä¸Šï¼Œæœ¬ç« é‡Œæˆ‘ä»¬ç›´æ¥ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºè¿™ä»½æ•°æ®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">knowledge_data_raw</span> = <span class="hljs-string">"""
Space exploration is the use of astronomy and space technology to explore outer space. The early era of space exploration was driven by a "Space Race" between the Soviet Union and the United States. The launch of the Soviet Union's Sputnik 1 in 1957, and the first Moon landing by the American Apollo 11 mission in 1969 are key landmarks.
â€¦
Juno is a NASA space probe orbiting the planet Jupiter. It was launched on August 5, 2011, and entered a polar orbit of Jupiter on July 5, 2016.
â€¦
A Mars rover is a remote-controlled motor vehicle designed to travel on the surface of Mars. NASA JPL managed several successful rovers including: Sojourner, Spirit, Opportunity, Curiosity, and Perseverance. The search for evidence of habitability and organic carbon on Mars is now a primary NASA objective. Perseverance also carried the Ingenuity helicopter.
"""</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼šå†™ä¸€ä¸ªå°å°çš„è¾…åŠ©å‡½æ•°ï¼ŒæŠŠè¿™æ®µæ–‡æœ¬åˆ‡åˆ†æˆæ›´é€‚åˆæ£€ç´¢çš„ç‰‡æ®µï¼ˆchunksï¼‰ï¼Œå†è¿›è¡Œå‘é‡åŒ–ã€‚</p>
<h4 data-id="heading-8">åˆ†å—ä¸å‘é‡åŒ–çš„è¾…åŠ©å‡½æ•°</h4>
<p>è¯­è¨€æ¨¡å‹å¹¶ä¸æ˜¯ç›´æ¥å¤„ç†â€œæ®µè½â€ï¼Œè€Œæ˜¯å¤„ç†<strong>token</strong> â€”â€” ä¹Ÿå°±æ˜¯æ¨¡å‹èƒ½ç†è§£çš„æœ€å°æ–‡æœ¬å•å…ƒã€‚<br/>
ä¾‹å¦‚ï¼Œå•è¯ <code>encoding</code> å¯èƒ½ä¼šè¢«æ‹†æˆä¸¤ä¸ª tokenï¼š<code>encod</code> å’Œ <code>ing</code>ã€‚<br/>
æ¨¡å‹é€šè¿‡è¿™äº›æ›´ç»†ç²’åº¦çš„ token æ¥ç†è§£è¯ä¸è¯ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬ä¼šä½¿ç”¨ <code>cl100k_base</code> è¿™ä¸ª tokenizerï¼Œè¿™æ˜¯ OpenAI æœ€æ–°æ¨¡å‹çš„æ ‡å‡†é…ç½®ã€‚<br/>
å®ƒæœ‰ä¸‰ä¸ªä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ›´èªæ˜çš„åˆ†è¯æ–¹å¼</strong>ï¼š<br/>
åƒ <code>encoding</code> è¿™æ ·çš„è¯ä¸ä¼šè¢«å½“ä½œä¸€ä¸ªæ•´ä½“ï¼Œè€Œæ˜¯æ‹†æˆ <code>encod</code> å’Œ <code>ing</code> ç­‰æœ‰æ„ä¹‰çš„ç‰‡æ®µï¼Œ<br/>
æœ‰åŠ©äºæ¨¡å‹æ›´å¥½åœ°ç†è§£ä¸åŒè¯è¯­ä¹‹é—´çš„è”ç³»ã€‚</li>
<li><strong>é«˜æ•ˆä¸”é€‚é…å¯¹è¯/æ£€ç´¢åœºæ™¯</strong>ï¼š<br/>
å¯¹äºèŠå¤©æ¨¡å‹å’Œè¦å­˜å…¥æ•°æ®åº“çš„æ–‡æœ¬ï¼Œå®ƒéƒ½éå¸¸é«˜æ•ˆã€‚</li>
<li><strong>ä¸æ¨¡å‹è®­ç»ƒæ–¹å¼ä¿æŒä¸€è‡´</strong>ï¼š<br/>
ä½ ç»Ÿè®¡å’Œæ ¼å¼åŒ–æ–‡æœ¬çš„æ–¹å¼ä¸æ¨¡å‹çš„é¢„æœŸä¸€è‡´ï¼Œ<br/>
ä¹Ÿå°±èƒ½æœ€å¤§åŒ–æ£€ç´¢çš„å‡†ç¡®æ€§ã€‚</li>
</ol>
<p>è¿™ç‚¹éå¸¸å…³é”®ï¼š<br/>
å¦‚æœæˆ‘ä»¬çš„â€œåˆ†å—é€»è¾‘â€å’ŒåµŒå…¥æ¨¡å‹çš„è®­ç»ƒæ–¹å¼ä¸åŒ¹é…ï¼Œ<br/>
è¯­ä¹‰æ£€ç´¢çš„ç»“æœå°±ä¼šèµ°æ ·â€”â€”å°±åƒä½ åœ¨ä¸€ä¸ªå›¾ä¹¦é¦†é‡ŒæŸ¥ä¹¦ï¼Œä½†å¡ç‰‡å’Œä¹¦æ¶ç”¨çš„æ˜¯ä¸¤å¥—å®Œå…¨ä¸åŒçš„ç¼–ç›®ç³»ç»Ÿã€‚</p>
<p>å…ˆåˆå§‹åŒ– tokenizerï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Initialize tokenizer for robust, token-aware chunking</span>
<span class="hljs-attr">tokenizer</span> = tiktoken.get_encoding(<span class="hljs-string">"cl100k_base"</span>)
</code></pre>
<p>RAG åœ¨ä¿¡æ¯è¢«**åˆ‡åˆ†æˆèšç„¦çš„å°å—ï¼ˆchunksï¼‰**æ—¶æ•ˆæœæœ€å¥½ã€‚<br/>
ç›¸æ¯”æŒ‰å­—ç¬¦æ•°æˆªæ–­ï¼Œæˆ‘ä»¬ä¼šæŒ‰ <strong>token æ•°é‡</strong> æˆªæ–­ï¼Œæ›´é€‚åˆ LLMã€‚</p>
<p>åœ¨ç¤ºä¾‹ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è®¾å®šï¼š</p>
<ul>
<li><code>chunk_size = 400</code> tokens</li>
<li><code>overlap = 50</code> tokens</li>
</ul>
<p>**é‡å ï¼ˆoverlapï¼‰**å¯ä»¥å¸®åŠ©ç›¸é‚»å—ä¹‹é—´ä¿æŒä¸Šä¸‹æ–‡è¿ç»­æ€§ã€‚<br/>
å®é™…é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦æ ¹æ®æ•°æ®ç±»å‹æ¥è°ƒèŠ‚ chunk å¤§å°ä¸é‡å å¤§å°ã€‚</p>
<p>ä¸‹é¢çš„ <code>chunk_text</code> å‡½æ•°å°±è´Ÿè´£ï¼š</p>
<ul>
<li>æŒ‰ token æ•°é‡å°†é•¿æ–‡æœ¬åˆ‡æˆä¸€ä¸ªä¸ªé‡å çª—å£ï¼Œ</li>
<li>å†å°†è¿™äº›çª—å£è¿˜åŸæˆæ–‡æœ¬ï¼Œä¾›åç»­å‘é‡åŒ–ä½¿ç”¨ï¼š</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunk_text</span>(<span class="hljs-params">text, chunk_size=<span class="hljs-number">400</span>, overlap=<span class="hljs-number">50</span></span>):
    <span class="hljs-string">"""Chunks text based on token count with overlap (Best practice for RAG)."""</span>
    tokens = tokenizer.encode(text)
    chunks = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(tokens), chunk_size - overlap):
        chunk_tokens = tokens[i:i + chunk_size]
        chunk_text = tokenizer.decode(chunk_tokens)
        <span class="hljs-comment"># Basic cleanup</span>
        chunk_text = chunk_text.replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">" "</span>).strip()
        <span class="hljs-keyword">if</span> chunk_text:
            chunks.append(chunk_text)
    <span class="hljs-keyword">return</span> chunks
</code></pre>
<p>æœ‰äº†è¿™äº› chunk ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå®ƒä»¬è½¬æ¢æˆ embeddingsã€‚<br/>
ç”±äº API è°ƒç”¨æœ‰æ—¶ä¼šå¤±è´¥ï¼ˆæ¯”å¦‚ç½‘ç»œæŠ–åŠ¨ï¼‰ï¼Œæˆ‘ä»¬ä¼šåŠ ä¸€ä¸ª<strong>å¸¦é‡è¯•æœºåˆ¶çš„å°è£…</strong>ã€‚</p>
<p><code>tenacity</code> åº“æä¾›çš„ <code>@retry</code> è£…é¥°å™¨å¯ä»¥è‡ªåŠ¨é‡è¯•å¤±è´¥çš„è°ƒç”¨ï¼Œå¹¶é‡‡ç”¨**æŒ‡æ•°é€€é¿ï¼ˆexponential backoffï¼‰**ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@retry(<span class="hljs-params">
    wait=wait_random_exponential(<span class="hljs-params"><span class="hljs-built_in">min</span>=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">60</span></span>),
    stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">6</span></span>)
</span>)</span>
</code></pre>
<p>æˆ‘ä»¬ä¸ä¼šå•æ¡ä¸Šä¼  chunkï¼Œè€Œæ˜¯æŒ‰æ‰¹æˆç»„å‘é€ï¼Œå› æ­¤å®šä¹‰ <code>get_embeddings_batch</code> å‡½æ•°ï¼š<br/>
å®ƒä¼šå°†ä¸€æ‰¹æ–‡æœ¬å‘é€ç»™ OpenAI çš„ Embedding APIï¼Œè¿”å›å¯¹åº”çš„å‘é‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@retry(<span class="hljs-params">
    wait=wait_random_exponential(<span class="hljs-params"><span class="hljs-built_in">min</span>=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">60</span></span>),
    stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">6</span></span>)
</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_embeddings_batch</span>(<span class="hljs-params">texts, model=EMBEDDING_MODEL</span>):
    <span class="hljs-string">"""Generates embeddings for a batch of texts using OpenAI, with retries."""</span>
    <span class="hljs-comment"># OpenAI expects the input texts to have newlines replaced by spaces</span>
    texts = [t.replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">" "</span>) <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> texts]
    response = client.embeddings.create(<span class="hljs-built_in">input</span>=texts, model=model)
    <span class="hljs-keyword">return</span> [item.embedding <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> response.data]
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å…·å¤‡äº†ï¼š</p>
<ul>
<li><strong>æŒ‰ token åˆ‡åˆ†æ–‡æœ¬</strong>çš„èƒ½åŠ›ï¼Œ</li>
<li><strong>ç¨³å®šç”Ÿæˆ embeddings</strong> çš„èƒ½åŠ›ï¼ˆå¸¦è‡ªåŠ¨é‡è¯•ï¼‰ã€‚</li>
</ul>
<p>ä¸‹ä¸€æ­¥ï¼Œå°±å¯ä»¥æ­£å¼å¼€å§‹å¯¹â€œçŸ¥è¯†æ•°æ®â€å’Œâ€œä¸Šä¸‹æ–‡æ•°æ®â€è¿›è¡Œå¤„ç†ï¼Œå¹¶æŠŠå®ƒä»¬ä¸Šä¼ åˆ°å‘é‡åº“ä¸­äº†ã€‚</p>
<h3 data-id="heading-9">å¤„ç†å¹¶ä¸Šä¼ ï¼ˆupsertï¼‰æ•°æ®</h3>
<p>æ•°æ®å‡†å¤‡çš„æœ€åä¸€æ­¥ï¼Œå°±æ˜¯<strong>å¤„ç†è¿™äº›æ•°æ®å¹¶æŠŠå®ƒä»¬ä¸Šä¼ åˆ° Pinecone</strong>ã€‚<br/>
è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼šåªæœ‰å½“å‘é‡çœŸæ­£å­˜è¿›å‘é‡åº“åï¼Œæ™ºèƒ½ä½“æ‰èƒ½åœ¨è¿è¡Œæ—¶æ£€ç´¢åˆ°å®ƒä»¬ã€‚</p>
<p>æˆ‘ä»¬åˆ†ä¸¤éƒ¨åˆ†æ¥åšï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡åº“ï¼ˆContext Libraryï¼‰</strong> ï¼šä¸Šä¼ è¯­ä¹‰è“å›¾ï¼ˆsemantic blueprintsï¼‰</li>
<li><strong>çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰</strong> ï¼šä¸Šä¼ äº‹å®æ•°æ®</li>
</ol>
<h4 data-id="heading-10">ä¸Šä¸‹æ–‡åº“ï¼ˆContext Libraryï¼‰</h4>
<p>å…ˆä»ä¸Šä¸‹æ–‡åº“å¼€å§‹ã€‚<br/>
è¿™é‡Œå­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„<strong>è¯­ä¹‰è“å›¾</strong>ï¼Œä¹Ÿå°±æ˜¯æŒ‡å¯¼ç³»ç»Ÿâ€œè¯¥å¦‚ä½•å†™â€çš„ç¨‹åºæ€§æŒ‡ä»¤ã€‚</p>
<p>ç¨‹åºä¼šéå†å‰é¢å®šä¹‰å¥½çš„ <code>context_blueprints</code> åˆ—è¡¨ï¼š</p>
<ul>
<li>
<p>å¯¹æ¯ä¸ª blueprintï¼Œç”¨ <code>get_embeddings_batch</code> å¯¹å…¶ <strong>description</strong> åšå‘é‡åŒ–ï¼›</p>
<ul>
<li>åç»­åšè¯­ä¹‰æ£€ç´¢æ—¶ï¼ŒæŸ¥çš„å°±æ˜¯è¿™ä¸ªæè¿°æ–‡æœ¬ï¼Œæ‰€ä»¥åªæœ‰å®ƒéœ€è¦è¿›å…¥å‘é‡ç©ºé—´ã€‚</li>
</ul>
</li>
<li>
<p>åŒæ—¶æ„å»º Pinecone çš„å‘é‡å¯¹è±¡ï¼š</p>
<ul>
<li>
<p><code>id</code>ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ï¼›</p>
</li>
<li>
<p><code>values</code>ï¼šembedding å‘é‡ï¼›</p>
</li>
<li>
<p><code>metadata</code>ï¼šåŒ…å«ä¸¤ç±»ä¿¡æ¯ï¼š</p>
<ul>
<li>å†å­˜ä¸€ä»½ <code>description</code> ä»¥ä¾¿äººç±»æŸ¥çœ‹ï¼›</li>
<li>æœ€å…³é”®çš„æ˜¯ <code>blueprint_json</code>ï¼Œå³å®Œæ•´çš„ JSON è¯­ä¹‰è“å›¾æŒ‡ä»¤ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼š<strong>JSON è“å›¾æœ¬èº«ä¸åšå‘é‡åŒ–</strong>ï¼Œè€Œæ˜¯ä½œä¸º metadata å­˜å‚¨ã€‚<br/>
å½“æˆ‘ä»¬é€šè¿‡ description æ‰¾åˆ°è¿™ä¸ª vector æ—¶ï¼Œå°±èƒ½é¡ºå¸¦æŠŠå®Œæ•´è“å›¾å–å‡ºæ¥ä½¿ç”¨ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- 6.1. Context Library ---</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nProcessing and uploading Context Library to namespace: <span class="hljs-subst">{NAMESPACE_CONTEXT}</span>"</span>)
vectors_context = []
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> tqdm(context_blueprints):
    <span class="hljs-comment"># We embed the DESCRIPTION (the intent)</span>
    embedding = get_embeddings_batch([item[<span class="hljs-string">'description'</span>]])[<span class="hljs-number">0</span>]
    vectors_context.append({
        <span class="hljs-string">"id"</span>: item[<span class="hljs-string">'id'</span>],
        <span class="hljs-string">"values"</span>: embedding,
        <span class="hljs-string">"metadata"</span>: {
            <span class="hljs-string">"description"</span>: item[<span class="hljs-string">'description'</span>],
            <span class="hljs-comment"># The blueprint itself (JSON string) is stored as metadata</span>
            <span class="hljs-string">"blueprint_json"</span>: item[<span class="hljs-string">'blueprint'</span>]
        }
    })
</code></pre>
<p>å½“æ‰€æœ‰å‘é‡å‡†å¤‡å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒä»¬<strong>upsert</strong> åˆ° Pinecone é‡Œã€‚</p>
<blockquote>
<p>upsert = å¦‚æœ ID å·²å­˜åœ¨åˆ™æ›´æ–°ï¼Œå¦åˆ™æ’å…¥æ–°æ•°æ®ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å°†è¿™äº›å‘é‡ä¸Šä¼ åˆ° <code>NAMESPACE_CONTEXT</code> å¯¹åº”çš„ namespace ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Upsert data</span>
<span class="hljs-keyword">if</span> vectors_context:
    index.upsert(vectors=vectors_context, namespace=NAMESPACE_CONTEXT)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Successfully uploaded <span class="hljs-subst">{<span class="hljs-built_in">len</span>(vectors_context)}</span> context vectors."</span>)
</code></pre>
<p>å¦‚æœè¿è¡ŒæˆåŠŸï¼Œä½ ä¼šçœ‹åˆ°ä¸€æ¡ç¡®è®¤ä¿¡æ¯ï¼Œè¯´æ˜ä¸Šä¼ äº†å¤šå°‘æ¡å‘é‡ã€‚<br/>
åˆ°è¿™ä¸€æ­¥ä¸ºæ­¢ï¼Œ<strong>ä¸Šä¸‹æ–‡åº“å·²ç»å†™å…¥ ContextLibrary å‘½åç©ºé—´</strong>ï¼Œè¿è¡Œæ—¶ Librarian æ™ºèƒ½ä½“å°±å¯ä»¥å¼€å§‹æŸ¥è¯¢å®ƒäº†ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¤„ç†åŒ RAG çš„å¦ä¸€åŠï¼š<strong>çŸ¥è¯†åº“</strong>ã€‚</p>
<h4 data-id="heading-11">çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰</h4>
<p>ç°åœ¨æ¥å¡«å……çŸ¥è¯†åº“ â€”â€” è¿™é‡Œå­˜æ”¾äº‹å®æ•°æ®ï¼Œä¾› Researcher æ™ºèƒ½ä½“æ£€ç´¢ã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯å¯¹åŸå§‹çŸ¥è¯†å­—ç¬¦ä¸² <code>knowledge_data_raw</code> è°ƒç”¨ <code>chunk_text</code>ï¼Œ<br/>
æŠŠå®ƒåˆ‡æˆæ›´å°ã€æ˜“äºæ£€ç´¢çš„ç‰‡æ®µï¼ˆchunksï¼‰ã€‚</p>
<p>ç„¶åæˆ‘ä»¬æŒ‰æ‰¹æ¬¡å¤„ç†è¿™äº› chunksã€‚<br/>
ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ‰¹å¤§å°æ˜¯ 100ï¼š</p>
<ul>
<li>
<p>é€æ‰¹ç”Ÿæˆ embeddingsï¼ˆ<code>get_embeddings_batch</code>ï¼‰ï¼›</p>
</li>
<li>
<p>ä¸º Pinecone å‡†å¤‡å‘é‡ç»“æ„ï¼š</p>
<ul>
<li>æ¯ä¸ª chunk åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ <code>id</code>ï¼›</li>
<li><code>metadata</code> ä¸­å­˜å‚¨åŸå§‹æ–‡æœ¬ <code>text</code>ï¼Œä¾¿äºæ£€ç´¢æ—¶è¿”å›ã€‚</li>
</ul>
</li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- 6.2. Knowledge Base ---</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nProcessing and uploading Knowledge Base to namespace: <span class="hljs-subst">{NAMESPACE_KNOWLEDGE}</span>"</span>)
<span class="hljs-comment"># Chunk the knowledge data</span>
knowledge_chunks = chunk_text(knowledge_data_raw)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Created <span class="hljs-subst">{<span class="hljs-built_in">len</span>(knowledge_chunks)}</span> knowledge chunks."</span>)
vectors_knowledge = []
batch_size = <span class="hljs-number">100</span> <span class="hljs-comment"># Process in batches</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tqdm(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(knowledge_chunks), batch_size)):
    batch_texts = knowledge_chunks[i:i+batch_size]
    batch_embeddings = get_embeddings_batch(batch_texts)

    batch_vectors = []
    <span class="hljs-keyword">for</span> j, embedding <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(batch_embeddings):
        chunk_id = <span class="hljs-string">f"knowledge_chunk_<span class="hljs-subst">{i+j}</span>"</span>
        batch_vectors.append({
            <span class="hljs-string">"id"</span>: chunk_id,
            <span class="hljs-string">"values"</span>: embedding,
            <span class="hljs-string">"metadata"</span>: {
                <span class="hljs-string">"text"</span>: batch_texts[j]
            }
        })
    <span class="hljs-comment"># Upsert the batch</span>
    index.upsert(vectors=batch_vectors, namespace=NAMESPACE_KNOWLEDGE)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Successfully uploaded <span class="hljs-subst">{<span class="hljs-built_in">len</span>(knowledge_chunks)}</span> knowledge vectors."</span>)
</code></pre>
<p>è¿è¡Œåï¼Œè¾“å‡ºä¼šåŒæ—¶å±•ç¤ºä¸Šä¸‹æ–‡åº“ä¸çŸ¥è¯†åº“çš„ä¸Šä¼ è¿›åº¦ï¼š</p>
<ul>
<li>
<p><code>tqdm</code> è¿›åº¦æ¡ä¼šå®æ—¶æ˜¾ç¤ºæ¯ä¸€æ­¥åµŒå…¥çš„æƒ…å†µï¼›</p>
</li>
<li>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li>
<p>ä¸Šä¸‹æ–‡åº“ç¡®è®¤æˆåŠŸä¸Šä¼ äº† 3 æ¡è“å›¾å‘é‡ï¼›</p>
</li>
<li>
<p>çŸ¥è¯†åº“æ•°æ®å¾ˆå°ï¼Œè¢«åˆ‡æˆ 2 ä¸ª chunkï¼›</p>
<ul>
<li>å®ƒä»¬éƒ½è½åœ¨äº†åŒä¸€æ‰¹ï¼ˆbatchï¼‰100 æ¡çš„èŒƒå›´å†…ï¼›</li>
</ul>
</li>
<li>
<p>æœ€ç»ˆè¾“å‡ºç¡®è®¤è¿™ 2 ä¸ªå‘é‡ä¹Ÿéƒ½æˆåŠŸå†™å…¥ï¼š</p>
</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-vbnet" lang="vbnet">Processing <span class="hljs-built_in">and</span> uploading Context Library <span class="hljs-keyword">to</span> <span class="hljs-keyword">namespace</span>: ContextLibrary
[Tqdm output <span class="hljs-keyword">for</span> <span class="hljs-number">3</span>/<span class="hljs-number">3</span> iterations]
Successfully uploaded <span class="hljs-number">3</span> context vectors.
Processing <span class="hljs-built_in">and</span> uploading Knowledge Base <span class="hljs-keyword">to</span> <span class="hljs-keyword">namespace</span>: KnowledgeStore
Created <span class="hljs-number">2</span> knowledge chunks.
[Tqdm output <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>/<span class="hljs-number">1</span> iterations]
Successfully uploaded <span class="hljs-number">2</span> knowledge vectors.
</code></pre>
<p>è‡³æ­¤ï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡åº“ï¼ˆContextLibraryï¼‰</strong> å’Œ</li>
<li><strong>çŸ¥è¯†åº“ï¼ˆKnowledgeStoreï¼‰</strong></li>
</ul>
<p>éƒ½å·²ç»æˆåŠŸå†™å…¥å‘é‡å­˜å‚¨ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶æ„å»ºçœŸæ­£çš„<strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ</strong>ï¼ˆcontext-aware MASï¼‰ï¼Œ<br/>
è®©æ™ºèƒ½ä½“ä¸€è¾¹æŸ¥äº‹å®ï¼Œä¸€è¾¹æŸ¥â€œå†™ä½œè“å›¾â€ï¼Œå†æŠŠä¸¤è€…åœ¨ç”Ÿæˆé˜¶æ®µç»„åˆèµ·æ¥ã€‚</p>
<h3 data-id="heading-12">æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥ç³»ç»Ÿ</h3>
<p>ç°åœ¨æˆ‘ä»¬çš„æ•°æ®å·²ç» idx_4273754a å‡†å¤‡å¥½å¹¶å­˜å…¥äº† Pineconeï¼Œæ˜¯æ—¶å€™æŠŠæ‰€æœ‰ä¸œè¥¿ç»„åˆèµ·æ¥äº†ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†å®ç°å›¾ 3.3 å±•ç¤ºçš„<strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç³»ç»Ÿï¼ˆcontext-aware systemï¼‰</strong> ã€‚å…·ä½“æ­¥éª¤åœ¨ <code>Context_Aware_MAS.ipynb</code> ç¬”è®°æœ¬ä¸­ï¼Œå¯¹åº”çš„æ˜¯æ•´å¥—æ¶æ„çš„<strong>è¿è¡Œæ—¶æ‰§è¡Œé˜¶æ®µ</strong>ã€‚æˆ‘ä»¬ä¼šå…ˆå®šä¹‰è´Ÿè´£æ ¸å¿ƒä»»åŠ¡çš„ä¸“ä¸šæ™ºèƒ½ä½“ï¼Œç„¶åå†çœ‹ Orchestrator æ˜¯å¦‚ä½•åè°ƒæ•´ä¸ªæµç¨‹çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57404632b2ae45b596e225130c098884~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5pm66IO96ICB5Y-45py6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764172772&amp;x-signature=w0Ao0eRpiNGOopemU4GPtQZHyYY%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ 3.3ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥ MAS æµç¨‹å›¾</p>
<p>è¿™å¼ æµç¨‹å›¾å±•ç¤ºäº†ä¸€ä¸ªé«˜å±‚ç”¨æˆ·ç›®æ ‡å¦‚ä½•è¢«è½¬åŒ–ä¸ºç»“æ„åŒ–çš„å·¥ä½œæµã€‚å®ƒå¾ˆå¥½åœ°æé†’æˆ‘ä»¬ï¼šç”Ÿæˆå¼ AI å¹¶ä¸æ˜¯â€œå¼€ç®±å³ç”¨å°± magically å·¥ä½œâ€ã€‚<strong>è°¨æ…çš„å·¥ç¨‹è®¾è®¡å’Œä¸Šä¸‹æ–‡ç®¡ç†</strong>æ‰æ˜¯ç³»ç»Ÿå¯é è¿è¡Œçš„å…³é”®ã€‚</p>
<p>åœ¨å›¾ä¸­ï¼Œè“è‰²æ–¹å—ä»£è¡¨ Orchestratorï¼ˆç¼–æ’å™¨ï¼‰ï¼Œå®ƒä½œä¸ºä¸­å¤®åè°ƒè€…ï¼ŒæŠŠä»»åŠ¡åˆ†æ´¾ç»™è‹¥å¹²<strong>ä¸“ä¸šæ™ºèƒ½ä½“ï¼ˆç»¿è‰²æ–¹å—ï¼‰</strong> ï¼šLibrarianã€Researcher å’Œ Writerã€‚è¿™äº›æ™ºèƒ½ä½“ä¼šä¸å¤–éƒ¨æœåŠ¡ï¼ˆæ©™è‰²æ–¹å—ï¼‰äº¤äº’ï¼Œä¾‹å¦‚ Pineconeï¼ˆç”¨äºçŸ¥è¯†å’Œè“å›¾æ£€ç´¢ï¼‰ä»¥åŠ LLMï¼ˆç”¨äºå‘é‡åŒ–ã€åˆ†æä¸ç”Ÿæˆï¼‰ã€‚</p>
<p>æœ‰äº†è¿™ä¸ªå…¨å±€å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·±å…¥ç»†èŠ‚ï¼Œä»æ™ºèƒ½ä½“æœ¬èº«å¼€å§‹ã€‚</p>
<h4 data-id="heading-13">å®šä¹‰æ™ºèƒ½ä½“</h4>
<p>æ•´ä¸ª MAS ä¾èµ–ä¸‰ä¸ª idx_82f9cb5d ä¸“é—¨çš„æ™ºèƒ½ä½“ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼š</p>
<ul>
<li><strong>Context Librarianï¼ˆä¸Šä¸‹æ–‡é¦†å‘˜ï¼‰</strong> ï¼šä»ä¸Šä¸‹æ–‡åº“ä¸­æ£€ç´¢ idx_71e1c2b3 è¿‡ç¨‹æ€§ idx_0bbfccaf æŒ‡ä»¤</li>
<li><strong>Researcherï¼ˆç ”ç©¶å‘˜ï¼‰</strong> ï¼šä»çŸ¥è¯†åº“ä¸­æŠ½å– idx_4f52270a å¹¶ç»¼åˆ idx_6e261e5c äº‹å®æ•°æ®</li>
<li><strong>Writerï¼ˆå†™ä½œè€…ï¼‰</strong> ï¼šå°† idx_3873fac6 è¿‡ç¨‹æ€§æŒ‡ä»¤ idx_8039414a ä¸äº‹å®æ•°æ®ç»“åˆï¼Œç”Ÿæˆæœ€ç»ˆè¾“å‡º</li>
</ul>
<p>æ‰€æœ‰æ™ºèƒ½ä½“éƒ½é€šè¿‡ MCP è¿›è¡Œé€šä¿¡ã€‚æˆ‘ä»¬å…ˆä» Librarian æ™ºèƒ½ä½“å¼€å§‹ã€‚</p>
<h5 data-id="heading-14">Context Librarian æ™ºèƒ½ä½“</h5>
<p>Context idx_975aad91 Librarian çš„èŒè´£æ˜¯ä»å‘é‡åº“ä¸­æ£€ç´¢æ­£ç¡®çš„<strong>è¯­ä¹‰è“å›¾ï¼ˆSemantic Blueprintï¼‰</strong> ã€‚<br/>
è¿™æ˜¯ä¸€ç§æ›´é«˜çº§çš„ RAG ç”¨æ³•ï¼šæ£€ç´¢çš„ä¸æ˜¯â€œäº‹å®â€ï¼Œè€Œæ˜¯**â€œå†™ä½œæ–¹å¼â€** â€”â€” ä¹Ÿå°±æ˜¯è¿‡ç¨‹æ€§æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">agent_context_librarian</span>(<span class="hljs-params">mcp_message</span>):
    <span class="hljs-string">"""
    Retrieves the appropriate Semantic Blueprint from the Context Library.
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[Librarian] Activated. Analyzing intent..."</span>)
    requested_intent = mcp_message[<span class="hljs-string">'content'</span>][<span class="hljs-string">'intent_query'</span>]
    results = query_pinecone(requested_intent, NAMESPACE_CONTEXT, top_k=<span class="hljs-number">1</span>)

    <span class="hljs-keyword">if</span> results:
        <span class="hljs-keyword">match</span> = results[<span class="hljs-number">0</span>]
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[Librarian] Found blueprint '<span class="hljs-subst">{<span class="hljs-keyword">match</span>[<span class="hljs-string">'id'</span>]}</span>' (Score: <span class="hljs-subst">{<span class="hljs-keyword">match</span>[<span class="hljs-string">'score'</span>]:<span class="hljs-number">.2</span>f}</span>)"</span>)
        blueprint_json = <span class="hljs-keyword">match</span>[<span class="hljs-string">'metadata'</span>][<span class="hljs-string">'blueprint_json'</span>]
        content = {<span class="hljs-string">"blueprint"</span>: blueprint_json}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"[Librarian] No specific blueprint found. Returning default."</span>)
        content = {<span class="hljs-string">"blueprint"</span>: json.dumps({<span class="hljs-string">"instruction"</span>: <span class="hljs-string">"Generate the content neutrally."</span>})}

    <span class="hljs-keyword">return</span> create_mcp_message(<span class="hljs-string">"Librarian"</span>, content)
</code></pre>
<p>è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…æ˜¯ï¼š</p>
<ul>
<li>Librarian ä½¿ç”¨ç”¨æˆ·çš„æ„å›¾ <code>intent_query</code>ï¼Œåœ¨ <code>ContextLibrary</code> å‘½åç©ºé—´é‡Œåšè¯­ä¹‰æ£€ç´¢ï¼›</li>
<li>æ‰¾åˆ°åŒ¹é…çš„ blueprint åï¼Œä» metadata ä¸­å–å‡º JSON æ ¼å¼çš„æŒ‡ä»¤ï¼›</li>
<li>å†æŠŠè¿™äº›æŒ‡ä»¤å°è£…åˆ°ä¸€ä¸ªæ–°çš„ MCP æ¶ˆæ¯ä¸­è¿”å›ã€‚</li>
</ul>
<p>è¿™æ ·ï¼ŒWriter æ™ºèƒ½ä½“å°±èƒ½æ ¹æ®<strong>åŠ¨æ€æ£€ç´¢åˆ°çš„ç¨‹åºæ€§æŒ‡å—</strong>æ¥å†™ä½œã€‚</p>
<p>ä»£ç ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ªé‡è¦çš„<strong>å…œåº•æœºåˆ¶</strong>ï¼š<br/>
å¦‚æœ Librarian æ²¡æ‰¾åˆ°ä»»ä½•åŒ¹é…çš„è¯­ä¹‰è“å›¾ï¼Œå®ƒå°±ä¸ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª<strong>é»˜è®¤è“å›¾</strong>ï¼š</p>
<blockquote>
<p><code>{"instruction": "Generate the content neutrally."}</code></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç”¨æˆ·çš„æ„å›¾ä¸ç°æœ‰è“å›¾éƒ½ä¸åŒ¹é…ï¼Œç³»ç»Ÿä¸ä¼šåœæ‘†ï¼Œè€Œæ˜¯é€€å›åˆ°â€œä¸­æ€§ç”Ÿæˆâ€çš„ç®€å•ç­–ç•¥ã€‚<br/>
è¿™æ · Writer ä¾ç„¶èƒ½æ‹¿åˆ°ä¸€å¥—è¿‡ç¨‹æ€§æŒ‡å¯¼ï¼Œå“ªæ€•åªæ˜¯â€œä¸­æ€§å†™ä½œâ€ï¼Œç³»ç»Ÿä¹Ÿèƒ½ç»§ç»­å®Œæˆä»»åŠ¡ï¼Œè€Œä¸æ˜¯ idx_3aa5ac30 æ•´ä¸ªæµç¨‹ä¸­æ–­ã€‚</p>
<h5 data-id="heading-15">Researcher æ™ºèƒ½ä½“</h5>
<p>Researcher æ™ºèƒ½ä½“ idx_5affbcf7 ä¸“æ³¨äºä»çŸ¥è¯†åº“ä¸­æŠ½å– idx_2c1b5574 ç›¸å…³äº‹å®ï¼Œå¹¶æŠŠè¿™äº›ä¿¡æ¯ç»¼åˆæˆç®€æ˜çš„æ‘˜è¦ï¼Œæ–¹ä¾¿ Writer ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">agent_researcher</span>(<span class="hljs-params">mcp_message</span>):
    <span class="hljs-string">"""
    Retrieves and synthesizes factual information from the Knowledge Base.
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[Researcher] Activated. Investigating topic..."</span>)
    topic = mcp_message[<span class="hljs-string">'content'</span>][<span class="hljs-string">'topic_query'</span>]

    results = query_pinecone(topic, NAMESPACE_KNOWLEDGE, top_k=<span class="hljs-number">3</span>)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> results:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"[Researcher] No relevant information found."</span>)
        <span class="hljs-keyword">return</span> create_mcp_message(<span class="hljs-string">"Researcher"</span>, {<span class="hljs-string">"facts"</span>: <span class="hljs-string">"No data found."</span>})

    source_texts = [<span class="hljs-keyword">match</span>[<span class="hljs-string">'metadata'</span>][<span class="hljs-string">'text'</span>] <span class="hljs-keyword">for</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">in</span> results]
    system_prompt = <span class="hljs-string">"""You are an expert research synthesis AI. Synthesize the provided source texts into a concise, bullet-pointed summary relevant to the user's topic. Focus strictly on the facts provided in the sources. Do not add outside information."""</span>
    user_prompt = <span class="hljs-string">f"Topic: <span class="hljs-subst">{topic}</span>\n\nSources:\n"</span> + <span class="hljs-string">"\n\n---\n\n"</span>.join(source_texts)

    findings = call_llm(system_prompt, user_prompt)

    <span class="hljs-keyword">return</span> create_mcp_message(<span class="hljs-string">"Researcher"</span>, {<span class="hljs-string">"facts"</span>: findings})
</code></pre>
<p>åœ¨è¿™é‡Œï¼ŒResearcher ä¿æŒè¾“å‡º<strong>ç®€æ´ä¸”äº‹å®å¯¼å‘</strong>ï¼š</p>
<ul>
<li>
<p>åªå…³å¿ƒä»çŸ¥è¯†åº“ä¸­å¬å›çš„æ–‡æœ¬ï¼›</p>
</li>
<li>
<p>ç³»ç»Ÿæç¤ºï¼ˆsystem_promptï¼‰æ˜ç¡®è¦æ±‚ï¼š</p>
<ul>
<li><strong>ä¸¥æ ¼åŸºäºç»™å®šæ¥æº</strong>ï¼›</li>
<li><strong>ä¸å¾—æ·»åŠ å¤–éƒ¨ä¿¡æ¯</strong>ï¼›</li>
</ul>
</li>
</ul>
<p>å³ä½¿åœ¨æ›´å¤§çš„ç³»ç»Ÿä¸­ï¼Œè¿™ç§å—æ§çš„â€œäº‹å®æ‘˜è¦â€æ­¥éª¤ä¹Ÿå¾ˆå…³é”®ï¼Œå®ƒå¯ä»¥é¿å… Writer è¢«ä¸€å¤§å †åŸå§‹æ–‡æœ¬æ·¹æ²¡ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª Writer æ™ºèƒ½ä½“æ¥çœŸæ­£å†™å‡ºå†…å®¹ã€‚</p>
<h5 data-id="heading-16">Writer æ™ºèƒ½ä½“</h5>
<p>Writer æ™ºèƒ½ä½“æ˜¯ä¸¤ä¸ªä¿¡æ¯æµçš„æ±‡åˆç‚¹ï¼š<br/>
å®ƒæŠŠ<strong>è¯­ä¹‰è“å›¾ï¼ˆè¿‡ç¨‹æ€§æŒ‡ä»¤ï¼‰<strong>å’Œ</strong>äº‹å®æ‘˜è¦</strong>ç»“åˆèµ·æ¥ï¼Œç”Ÿæˆæœ€ç»ˆç»“æ„åŒ–çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def agent_writer(mcp_message):
    """
    Combines factual research with the semantic blueprint to generate final output.
    """
    print("\n<span class="hljs-section">[Writer]</span> Activated. Applying blueprint to facts...")

    <span class="hljs-attr">facts</span> = mcp_message[<span class="hljs-string">'content'</span>][<span class="hljs-string">'facts'</span>]
    <span class="hljs-attr">blueprint_json_string</span> = mcp_message[<span class="hljs-string">'content'</span>][<span class="hljs-string">'blueprint'</span>]
    <span class="hljs-comment"># The Writer's System Prompt incorporates the dynamically retrieved blueprint</span>
    <span class="hljs-attr">system_prompt</span> = f<span class="hljs-string">"""You are an expert content generation AI.
Your task is to generate content based on the provided RESEARCH FINDINGS.
Crucially, you MUST structure, style, and constrain your output according to the rules defined in the SEMANTIC BLUEPRINT provided below.

    --- SEMANTIC BLUEPRINT (JSON) ---
    {blueprint_json_string}
    --- END SEMANTIC BLUEPRINT ---

Adhere strictly to the blueprint's instructions, style guides, and goals. The blueprint defines HOW you write; the research defines WHAT you write about.
    """</span>

    <span class="hljs-attr">user_prompt</span> = f<span class="hljs-string">"--- RESEARCH FINDINGS ---\n{facts}\n--- END RESEARCH FINDINGS ---\nGenerate the content now."</span>
    <span class="hljs-attr">final_output</span> = call_llm(system_prompt, user_prompt)

    return create_mcp_message("Writer", {"output": final_output})
</code></pre>
<p>è¿™ä¸ªæ™ºèƒ½ä½“çš„å…³é”®ç‚¹åœ¨äºï¼Œå®ƒé€šè¿‡ blueprint å¯¹ LLM è¿›è¡Œ<strong>åŠ¨æ€â€œç¼–ç¨‹â€</strong> ï¼š</p>
<ul>
<li>blueprint è§„å®šâ€œ<strong>æ€ä¹ˆå†™ï¼ˆHOWï¼‰</strong> â€ï¼›</li>
<li>facts å†³å®šâ€œ<strong>å†™ä»€ä¹ˆï¼ˆWHATï¼‰</strong> â€ã€‚</li>
</ul>
<p>ç³»ç»Ÿæç¤ºé‡Œåˆ»æ„ç”»äº†ä¸€æ¡æ¸…æ™°çš„ç•Œçº¿ï¼š</p>
<blockquote>
<p>â€œThe blueprint defines HOW you write; the research defines WHAT you write about.â€</p>
</blockquote>
<p>æ­£æ˜¯è¿™ç§â€œèŒè´£åˆ†ç¦»â€ idx_3b44a307 è®©æ•´ä¸ªç³»ç»Ÿå…·æœ‰å¾ˆå¼ºçš„å¯é€‚é…æ€§å’Œå¯æ‰©å±•æ€§ idx_ab0e706d â€”â€”<br/>
ä½ å¯ä»¥æ›´æ–°çŸ¥è¯†åº“è€Œä¸æ”¹å†™ä½œé£æ ¼è“å›¾ï¼Œä¹Ÿå¯ä»¥æ–°å¢è“å›¾è€Œä¸åŠ¨äº‹å®å­˜å‚¨ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ„å»ºæŠŠè¿™ä¸€åˆ‡ä¸²èµ·æ¥çš„ Orchestratorã€‚</p>
<h4 data-id="heading-17">æ„å»º Orchestratorï¼ˆç¼–æ’å™¨ï¼‰</h4>
<p>Orchestratorï¼ˆç¼–æ’å™¨ï¼‰æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œæŒ‡æŒ¥å®¶â€ã€‚å®ƒçš„èŒè´£æ˜¯ï¼šæ¥æ”¶ä¸€ä¸ªé«˜å±‚ç›®æ ‡ï¼ŒæŠŠå®ƒæ‹†è§£æˆå¯æ‰§è¡Œçš„æŸ¥è¯¢ï¼Œç„¶ååè°ƒå„ä¸ªæ™ºèƒ½ä½“ï¼Œæœ€ç»ˆç”Ÿæˆç»“æœã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªé¡¹ç›®ç»ç†ï¼šè‡ªå·±ä¸å¹²å…·ä½“æ´»å„¿ï¼Œä½†è¦ç¡®ä¿æ¯ä¸ªäººéƒ½åœ¨æ­£ç¡®çš„èŠ‚å¥ä¸ŠååŒå·¥ä½œã€‚</p>
<h5 data-id="heading-18">ç›®æ ‡åˆ†æï¼ˆGoal analysisï¼‰</h5>
<p>Orchestrator é¦–å…ˆä¼šæŠŠç”¨æˆ·çš„é«˜å±‚ç›®æ ‡æ‹†è§£æˆä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>intent_query</strong>ï¼šæƒ³è¦çš„é£æ ¼ã€è¯­æ°”æˆ–æ ¼å¼ï¼ˆä¾‹å¦‚â€œæ‚¬ç–‘å™äº‹è“å›¾â€â€œå®¢è§‚æŠ€æœ¯è§£é‡Šç»“æ„â€ï¼‰</li>
<li><strong>topic_query</strong>ï¼šè¦å¤„ç†çš„äº‹å®ä¸»é¢˜ï¼ˆä¾‹å¦‚â€œæœ±è¯ºå·ä»»åŠ¡ç›®æ ‡ä¸ä¾›ç”µæ–¹å¼â€â€œé˜¿æ³¢ç½— 11 å·ç™»æœˆç»†èŠ‚â€ï¼‰</li>
</ul>
<p>ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">orchestrator</span>(<span class="hljs-params">high_level_goal</span>):
    <span class="hljs-string">"""
    Manages the workflow of the Context-Aware MAS.
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"=== [Orchestrator] Starting New Task ==="</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Goal: <span class="hljs-subst">{high_level_goal}</span>"</span>)

    <span class="hljs-comment"># Step 0: Analyze Goal (Determine Intent and Topic)</span>
    <span class="hljs-comment"># We use the LLM to separate the desired style (intent) from the subject matter (topic).</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[Orchestrator] Analyzing Goal..."</span>)
    analysis_system_prompt = <span class="hljs-string">"""You are an expert goal analyst.    Analyze the user's high-level goal and extract two components:
    1. 'intent_query': A descriptive phrase summarizing the desired style, tone, or format, optimized for searching a context library (e.g., "suspenseful narrative blueprint", "objective technical explanation structure").
    2. 'topic_query': A concise phrase summarizing the factual subject matter required (e.g., "Juno mission objectives and power", "Apollo 11 landing details").

    Respond ONLY with a JSON object containing these two keys."""</span>

    <span class="hljs-comment"># We request JSON mode for reliable parsing</span>
    analysis_result = call_llm(
        analysis_system_prompt, high_level_goal, json_mode=<span class="hljs-literal">True</span>)
)

    <span class="hljs-keyword">try</span>:
        analysis = json.loads(analysis_result)
        intent_query = analysis[<span class="hljs-string">'intent_query'</span>]
        topic_query = analysis[<span class="hljs-string">'topic_query'</span>]
    <span class="hljs-keyword">except</span> (json.JSONDecodeError, KeyError):
        <span class="hljs-keyword">return</span>
</code></pre>
<p>åœ¨è¿™é‡Œï¼ŒOrchestrator è‡ªå·±ä¼šè°ƒç”¨ä¸€æ¬¡ LLMï¼ŒæŠŠè¿™ä¸ªé«˜å±‚ç›®æ ‡è§£ææˆç»“æ„åŒ– JSONã€‚<br/>
å¦‚æœè§£æå¤±è´¥ï¼Œå‡½æ•°å°±ç›´æ¥ <code>return</code>ï¼Œä»è€Œé¿å…åé¢æ•´æ¡é“¾è·¯å› ä¸ºè„æ•°æ®è€Œå´©æ‰ã€‚</p>
<p>è¿™ä¸ª <code>try...except</code> å—å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª<strong>å›é€€æœºåˆ¶</strong>ï¼š<br/>
å¦‚æœ LLM è¿”å›çš„ JSON æ— æ³•è§£ææˆ–å­—æ®µç¼ºå¤±ï¼ŒOrchestrator ä¼š<strong>ä¼˜é›…ç»ˆæ­¢</strong>ï¼Œè€Œä¸æ˜¯æŠŠé”™è¯¯æ•°æ®ç»§ç»­å¾€ä¸‹ä¼ ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ è¿˜å¯ä»¥ç”¨æ›´ä¸¥æ ¼çš„ç»“æ„åŒ–æç¤ºæˆ–è€…æ¨¡å¼æ ¡éªŒï¼ˆschema validationï¼‰æ¥å¼ºåŒ–è¿™ä¸€æ­¥ï¼Œä½†å¯¹å½“å‰åŸå‹æ¥è¯´ï¼Œè¿™ç§è½»é‡åšæ³•å·²ç»å…¼é¡¾äº†<strong>éŸ§æ€§</strong>å’Œ<strong>å¯è¯»æ€§</strong>ã€‚</p>
<h5 data-id="heading-19">æ™ºèƒ½ä½“åè°ƒï¼ˆAgent coordinationï¼‰</h5>
<p>ä¸€æ—¦ç›®æ ‡è¢«æ‹†è§£å®Œæˆï¼ŒOrchestrator å°±å¼€å§‹åè°ƒå„ä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„ä¿¡æ¯æµï¼š</p>
<ul>
<li>æŠŠ <strong>intent_query</strong> å‘ç»™ Librarianï¼ˆä¸Šä¸‹æ–‡é¦†å‘˜ï¼‰ï¼Œç”¨äºæ£€ç´¢è¯­ä¹‰è“å›¾ï¼›</li>
<li>æŠŠ <strong>topic_query</strong> å‘ç»™ Researcherï¼ˆç ”ç©¶å‘˜ï¼‰ï¼Œç”¨äºæ£€ç´¢äº‹å®ä¿¡æ¯ï¼›</li>
<li>ç„¶åæŠŠä¸¤è€…ç»“æœä¸€èµ·äº¤ç»™ Writerï¼ˆå†™ä½œè€…ï¼‰ã€‚</li>
</ul>
<h6 data-id="heading-20">1. å‘ Librarian è¯·æ±‚ä¸Šä¸‹æ–‡è“å›¾ï¼ˆProcedural RAGï¼‰</h6>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Step 1: Get the Context Blueprint (Procedural RAG)</span>
<span class="hljs-attr">mcp_to_librarian</span> = create_mcp_message(
    <span class="hljs-attr">sender</span>=<span class="hljs-string">"Orchestrator"</span>,
    <span class="hljs-attr">content</span>={<span class="hljs-string">"intent_query"</span>: intent_query}
)
<span class="hljs-comment"># display_mcp(mcp_to_librarian, "Orchestrator -&gt; Librarian")</span>
<span class="hljs-attr">mcp_from_librarian</span> = agent_context_librarian(mcp_to_librarian)
display_mcp(mcp_from_librarian, "Librarian -&gt; Orchestrator")

<span class="hljs-attr">context_blueprint</span> = mcp_from_librarian[<span class="hljs-string">'content'</span>].get(<span class="hljs-string">'blueprint'</span>)
if not context_blueprint: return
</code></pre>
<p>è¿™é‡Œ Orchestrator é€šè¿‡ MCP æ¶ˆæ¯ï¼ŒæŠŠ <code>intent_query</code> å‘é€ç»™ Librarianï¼›<br/>
è¿”å›åï¼Œä»æ¶ˆæ¯å†…å®¹é‡Œæ‹¿åˆ° <code>blueprint</code>ï¼ˆè“å›¾ï¼‰ã€‚å¦‚æœæ²¡æ‹¿åˆ°ï¼Œå°±ç›´æ¥è¿”å›ã€‚</p>
<h6 data-id="heading-21">2. å‘ Researcher è¯·æ±‚äº‹å®çŸ¥è¯†ï¼ˆFactual RAGï¼‰</h6>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Step 2: Get the Factual Knowledge (Factual RAG)</span>
<span class="hljs-attr">mcp_to_researcher</span> = create_mcp_message(
    <span class="hljs-attr">sender</span>=<span class="hljs-string">"Orchestrator"</span>,
    <span class="hljs-attr">content</span>={<span class="hljs-string">"topic_query"</span>: topic_query}
)
<span class="hljs-comment"># display_mcp(mcp_to_researcher, "Orchestrator -&gt; Researcher")</span>
<span class="hljs-attr">mcp_from_researcher</span> = agent_researcher(mcp_to_researcher)
display_mcp(mcp_from_researcher, "Researcher -&gt; Orchestrator")

<span class="hljs-attr">research_findings</span> = mcp_from_researcher[<span class="hljs-string">'content'</span>].get(<span class="hljs-string">'facts'</span>)
if not research_findings: return
</code></pre>
<p>è¿™ä¸€æ­¥ Orchestrator è®© Researcher ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¸ <code>topic_query</code> ç›¸å…³çš„äº‹å®ï¼Œå¹¶ç»¼åˆæˆä¸€ä¸ªç®€æ˜æ‘˜è¦ <code>facts</code>ã€‚å¦‚æœæ²¡æœ‰ç»“æœï¼ŒåŒæ ·ç›´æ¥é€€å‡ºã€‚</p>
<h6 data-id="heading-22">3. äº¤ç»™ Writer ç”Ÿæˆæœ€ç»ˆå†…å®¹</h6>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Step 3: Generate the Final Output</span>
<span class="hljs-comment"># Combine the outputs for the Writer Agent</span>
<span class="hljs-attr">writer_task</span> = {
    "blueprint": context_blueprint,
    "facts": research_findings
}

<span class="hljs-attr">mcp_to_writer</span> = create_mcp_message(
    <span class="hljs-attr">sender</span>=<span class="hljs-string">"Orchestrator"</span>,
    <span class="hljs-attr">content</span>=writer_task
)
<span class="hljs-comment"># display_mcp(mcp_to_writer, "Orchestrator -&gt; Writer")</span>
<span class="hljs-attr">mcp_from_writer</span> = agent_writer(mcp_to_writer)
display_mcp(mcp_from_writer, "Writer -&gt; Orchestrator")

<span class="hljs-attr">final_result</span> = mcp_from_writer[<span class="hljs-string">'content'</span>].get(<span class="hljs-string">'output'</span>)

print("\<span class="hljs-attr">n</span>=== [Orchestrator] Task Complete ===<span class="hljs-string">")
return final_result
</span></code></pre>
<p>è¿™ä¸€æ¨¡å¼è®©å„è‡ªçš„èŒè´£æå…¶æ¸…æ™°ï¼š</p>
<ul>
<li><strong>Librarian</strong> åªè´Ÿè´£å–â€œæ€ä¹ˆå†™â€çš„è¿‡ç¨‹æŒ‡å¯¼ï¼ˆç¨‹åºæ€§ä¸Šä¸‹æ–‡ï¼‰ï¼›</li>
<li><strong>Researcher</strong> åªè´Ÿè´£å–â€œå†™ä»€ä¹ˆâ€çš„äº‹å®å†…å®¹ï¼›</li>
<li><strong>Writer</strong> æŠŠâ€œæ€ä¹ˆå†™â€å’Œâ€œå†™ä»€ä¹ˆâ€ç»„åˆèµ·æ¥ï¼Œç”Ÿæˆæœ€ç»ˆæ–‡æœ¬ã€‚</li>
</ul>
<p>åŒæ—¶ï¼Œè¿™ä¸ªæ¶æ„ä¹‹æ‰€ä»¥ç¨³å¥ï¼Œæ˜¯å› ä¸ºå®ƒæ—¢<strong>æ¨¡å—åŒ–</strong>åˆ<strong>å¯æ‰©å±•</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ™ºèƒ½ä½“åªåšä¸€ä»¶äº‹ï¼ˆSingle Responsibilityï¼‰ï¼›</li>
<li>ç³»ç»Ÿä¸¥æ ¼æŒ‰ç…§ä½ æä¾›çš„è¿‡ç¨‹æ€§æŒ‡ä»¤ï¼ˆè¯­ä¹‰è“å›¾ï¼‰æ¥æ‰§è¡Œï¼›</li>
<li>Orchestrator åƒä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®ç»ç†ï¼šåªç®¡æ‹†ä»»åŠ¡å’Œæ´¾ä»»åŠ¡ï¼Œè€Œä¸å‚ä¸å…·ä½“å®ç°ï¼ŒæŠŠç»†èŠ‚äº¤ç»™å„ä¸ªä¸“å®¶æ™ºèƒ½ä½“ã€‚</li>
</ul>
<p>çœŸæ­£çš„æ€æ‰‹é”åœ¨äºâ€”â€”<strong>æŠŠ â€œwhatï¼ˆå†…å®¹ï¼‰â€ å’Œ â€œhowï¼ˆè¡¨ç°å½¢å¼ï¼‰â€ å½»åº•åˆ†ç¦»</strong>ï¼š</p>
<ul>
<li>äº‹å®æ£€ç´¢ï¼ˆçŸ¥è¯†åº“ï¼‰ä¸é£æ ¼/è¿‡ç¨‹æŒ‡ä»¤ï¼ˆä¸Šä¸‹æ–‡åº“ï¼‰å®Œå…¨ç‹¬ç«‹ï¼›</li>
<li>è¿™æ ·ä½ å¯ä»¥åªæ›´æ–°çŸ¥è¯†åº“ï¼Œè€Œä¸ç”¨åŠ¨ä»»ä½•é£æ ¼è§„åˆ™ï¼›</li>
<li>æˆ–è€…åªæ–°å¢/è°ƒæ•´è“å›¾ï¼Œè€Œä¸ç”¨åŠ¨äº‹å®æ•°æ®ã€‚</li>
</ul>
<p>è¿™è®©è¿­ä»£é€Ÿåº¦éå¸¸å¿«ï¼Œä¹Ÿè®©ç³»ç»Ÿå˜å¾—æçµæ´»ï¼š<br/>
åªè¦æ›´æ¢è¯­ä¹‰è“å›¾ï¼Œå°±èƒ½åœ¨åŒä¸€æ‰¹äº‹å®çš„åŸºç¡€ä¸Šï¼Œç¬é—´æ¢ä¸€ç§é£æ ¼ã€ç»“æ„æˆ–è¯­æ°”æ¥ç”Ÿæˆå†…å®¹ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œæ•™å­¦ç¤ºä¾‹â€ï¼Œè€Œæ˜¯ä¸€å¥—<strong>å¯è½åœ°çš„å·¥ç¨‹è“å›¾</strong>ï¼Œç”¨äºæ„å»ºçœŸæ­£èƒ½å¤„ç†å¤æ‚ã€ä¸Šä¸‹æ–‡æ•æ„Ÿä»»åŠ¡çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMASï¼‰ã€‚</p>
<h2 data-id="heading-23">å°ç»“ï¼ˆSummaryï¼‰</h2>
<p>æœ¬ç« æˆ‘ä»¬ä»ç¬¬ 2 ç« çš„ MAS ç»§ç»­æ¼”åŒ–ï¼Œæ ¸å¿ƒå‡çº§æ˜¯å¼•å…¥äº†<strong>åŒé‡ RAG æ¶æ„ï¼ˆdual RAGï¼‰</strong> ã€‚</p>
<ul>
<li>
<p>åœ¨åŒä¸€ä¸ª Pinecone ç´¢å¼•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ•°æ®åº“ï¼š</p>
<ul>
<li><strong>Knowledge Baseï¼ˆçŸ¥è¯†åº“ï¼‰</strong> ï¼šä¸º Researcher æ™ºèƒ½ä½“å­˜å‚¨äº‹å®ä¿¡æ¯ï¼›</li>
<li><strong>Context Libraryï¼ˆä¸Šä¸‹æ–‡åº“ï¼‰</strong> ï¼šä¸ºæ–°å¼•å…¥çš„ Context Librarian æ™ºèƒ½ä½“å­˜å‚¨è¿‡ç¨‹æ€§è¯­ä¹‰è“å›¾ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§åˆ†ç¦»è®©ç³»ç»Ÿå¯ä»¥<strong>ç‹¬ç«‹ç®¡ç†â€œçŸ¥é“ä»€ä¹ˆâ€å’Œâ€œå¦‚ä½•è¡ŒåŠ¨â€</strong> ã€‚</p>
<p>å®ç°ä¸Šåˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®å‡†å¤‡é˜¶æ®µï¼ˆç¬¬ä¸€ä¸ª notebookï¼‰</strong></p>
<ul>
<li>é¢„å¤„ç†å¹¶ä¸Šä¼ æ•°æ®åˆ°ä¸¤ä¸ª Pinecone å‘½åç©ºé—´ï¼›</li>
<li>ä¸€ä¸ªç”¨äºçŸ¥è¯†å‘é‡ï¼ˆçŸ¥è¯†åº“ï¼‰ï¼Œä¸€ä¸ªç”¨äºè“å›¾å‘é‡ï¼ˆä¸Šä¸‹æ–‡åº“ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿è¡Œæ—¶æ‰§è¡Œé˜¶æ®µï¼ˆç¬¬äºŒä¸ª notebookï¼‰</strong></p>
<ul>
<li>
<p>å®šä¹‰å¤šæ™ºèƒ½ä½“å·¥ä½œæµï¼š</p>
<ul>
<li>Orchestrator åˆ†æç”¨æˆ·ç›®æ ‡ï¼›</li>
<li>æŠŠâ€œäº‹å®æŸ¥è¯¢â€äº¤ç»™ Researcherï¼›</li>
<li>æŠŠâ€œé£æ ¼/ç»“æ„æ£€ç´¢â€äº¤ç»™ Librarianï¼›</li>
<li>Writer åŒæ—¶æ¥æ”¶äº‹å®å’Œè¯­ä¹‰è“å›¾ï¼ŒæŒ‰è“å›¾çº¦æŸæ¥ç”Ÿæˆæœ€ç»ˆè¾“å‡ºã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>ç°åœ¨ï¼Œè¿™ä¸ªç³»ç»Ÿå·²ç»å¯ä»¥<strong>åŠ¨æ€æ§åˆ¶ç”Ÿæˆè¿‡ç¨‹</strong>ï¼š<br/>
æ—¢ä¿è¯å†…å®¹æ¥è‡ªæ£€ç´¢åˆ°çš„äº‹å®ï¼Œåˆä¿è¯è¡¨è¾¾å½¢å¼ä¸¥æ ¼éµä»è¯­ä¹‰è“å›¾ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åŸºäºæœ¬ç« æ„å»ºçš„èƒ½åŠ›ï¼Œè®¾è®¡ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„<strong>ä¸Šä¸‹æ–‡å¼•æ“ï¼ˆcontext engineï¼‰</strong> ï¼ŒæŠŠè¿™ä¸€ MAS æå‡åˆ°æ–°çš„å±‚çº§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸å¤§æ¨¡å‹å…±èˆï¼šä» DeepSeek åˆ°æ¨¡å—åŒ–æ™ºèƒ½åº”ç”¨å¼€å‘]]></title>    <link>https://juejin.cn/post/7574343024324902953</link>    <guid>https://juejin.cn/post/7574343024324902953</guid>    <pubDate>2025-11-20T02:03:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574343024324902953" data-draft-id="7574306374917390355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸å¤§æ¨¡å‹å…±èˆï¼šä» DeepSeek åˆ°æ¨¡å—åŒ–æ™ºèƒ½åº”ç”¨å¼€å‘"/> <meta itemprop="keywords" content="DeepSeek"/> <meta itemprop="datePublished" content="2025-11-20T02:03:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="www_stdio"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸å¤§æ¨¡å‹å…±èˆï¼šä» DeepSeek åˆ°æ¨¡å—åŒ–æ™ºèƒ½åº”ç”¨å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    www_stdio
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:03:38.000Z" title="Thu Nov 20 2025 02:03:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸å¤§æ¨¡å‹å…±èˆï¼šä» DeepSeek åˆ°æ¨¡å—åŒ–æ™ºèƒ½åº”ç”¨å¼€å‘</h2>
<p>åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å·²æˆä¸ºå¼€å‘è€…æ¢ç´¢æ™ºèƒ½åº”ç”¨çš„é‡è¦å·¥å…·ã€‚ä»¥ DeepSeek ä¸ºä»£è¡¨çš„å¼€æºå¤§æ¨¡å‹ï¼Œä¾æ‰˜æµ·é‡é¢„è®­ç»ƒæ•°æ®ä¸­çš„æ–‡æœ¬æ¨¡å¼è¿›è¡Œæ¨ç†ä¸å›ç­”ï¼Œå±•ç°å‡ºå¼ºå¤§çš„è¯­è¨€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ã€‚ç„¶è€Œï¼Œæ­£å¦‚æ‰€æœ‰åŸºäºé™æ€æ•°æ®è®­ç»ƒçš„æ¨¡å‹ä¸€æ ·ï¼ŒDeepSeek å¹¶ä¸å…·å¤‡å¯¹æ–°é—»ã€è‚¡ä»·ç­‰å®æ—¶ä¿¡æ¯çš„æ„ŸçŸ¥èƒ½åŠ›â€”â€”è¿™æ°æ°å¼•å‡ºäº†ä¸€ä¸ªå…³é”®å‘½é¢˜ï¼šå¦‚ä½•è®©å¤§æ¨¡å‹â€œèµ°å‡ºå°é—­â€ï¼Œä¸çœŸå®ä¸–ç•Œäº’åŠ¨ï¼Ÿæœ¬æ–‡å°†ç»“åˆ ModelScopeï¼ˆé­”æ­ï¼‰ã€Jupyter Notebook ä¸ OpenAI SDK ç­‰æŠ€æœ¯ç”Ÿæ€ï¼Œæ¢è®¨æ„å»ºæ¨¡å—åŒ–ã€å¯æ‰©å±•çš„å¤§æ¨¡å‹åº”ç”¨å®è·µè·¯å¾„ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ModelScopeï¼šé™ä½ AI åº”ç”¨é—¨æ§›çš„å¼€æ”¾å¹³å°</h3>
<p>é˜¿é‡Œäº‘æ¨å‡ºçš„ <strong>ModelScopeï¼ˆé­”æ­ï¼‰</strong> æ˜¯ä¸€ä¸ªé¢å‘å¼€å‘è€…çš„æ¨¡å‹å¼€æ”¾å¹³å°ï¼Œæ±‡é›†äº†è¦†ç›–è¯­éŸ³ã€è§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ç­‰é¢†åŸŸçš„æµ·é‡å¼€æºæœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚å¯¹äºå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹å¤§æ¨¡å‹çš„å¼€å‘è€…è€Œè¨€ï¼ŒModelScope ä¸ä»…æä¾›ä¸€é”®ä¸‹è½½ä¸éƒ¨ç½²èƒ½åŠ›ï¼Œè¿˜æ”¯æŒå¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼ˆfine-tuningï¼‰ï¼Œä»è€Œé€‚é…ç‰¹å®šä¸šåŠ¡åœºæ™¯ã€‚è¿™ç§â€œæ¨¡å‹å³æœåŠ¡â€ï¼ˆMaaSï¼‰çš„ç†å¿µï¼Œæå¤§é™ä½äº† AI æŠ€æœ¯çš„åº”ç”¨é—¨æ§›ï¼Œä½¿æ›´å¤šå›¢é˜Ÿèƒ½å¤Ÿèšç„¦äºåˆ›æ–°è€Œéåº•å±‚åŸºç¡€è®¾æ–½ã€‚</p>
<h3 data-id="heading-2">äºŒã€Jupyter Notebookï¼šå®éªŒé©±åŠ¨çš„äº¤äº’å¼å¼€å‘</h3>
<p>åœ¨æ¢ç´¢å¤§æ¨¡å‹èƒ½åŠ›çš„è¿‡ç¨‹ä¸­ï¼Œ<strong>Jupyter Notebookï¼ˆ.ipynb æ–‡ä»¶ï¼‰</strong> æˆä¸ºä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚Python å¤©ç”Ÿé€‚åˆç§‘å­¦è®¡ç®—ä¸æœºå™¨å­¦ä¹ ï¼Œè€Œ Jupyter çš„äº¤äº’å¼ç‰¹æ€§å…è®¸å¼€å‘è€…é€æ¡è¿è¡Œä»£ç ã€å³æ—¶æŸ¥çœ‹ç»“æœï¼Œéå¸¸é€‚åˆç”¨äºï¼š</p>
<ul>
<li>éªŒè¯ç®—æ³•é€»è¾‘</li>
<li>æ¨å¯¼æ•°å­¦å…¬å¼</li>
<li>æµ‹è¯•å¤§æ¨¡å‹åœ¨ä¸åŒæç¤ºï¼ˆpromptï¼‰ä¸‹çš„è¡¨ç°</li>
</ul>
<p>è¿™ç§â€œæ‰€è§å³æ‰€å¾—â€çš„å®éªŒç¯å¢ƒï¼Œä½¿å¾—ä»æƒ³æ³•åˆ°åŸå‹çš„è½¬åŒ–è¿‡ç¨‹å˜å¾—å¼‚å¸¸é«˜æ•ˆï¼Œå°¤å…¶é€‚åˆç ”ç©¶å‹æˆ–æ¢ç´¢å‹é¡¹ç›®ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€æ¨¡å—åŒ–è®¾è®¡ï¼šæ„å»ºå¯ç»´æŠ¤çš„å¤§æ¨¡å‹åº”ç”¨</h3>
<p>ç°ä»£è½¯ä»¶å·¥ç¨‹å¼ºè°ƒ <strong>æ¨¡å—åŒ–</strong> ä¸ <strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ã€‚åœ¨å¤§æ¨¡å‹åº”ç”¨å¼€å‘ä¸­ï¼Œè¿™ä¸€åŸåˆ™åŒæ ·é€‚ç”¨ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡å¼•å…¥ OpenAI SDKï¼ˆå°½ç®¡ DeepSeek å¯èƒ½ä½¿ç”¨å…¼å®¹æ¥å£ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç»„ç»‡ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from openai import OpenAI

<span class="hljs-attr">client</span> = OpenAI(
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">"your-api-key"</span>,
    <span class="hljs-attr">base_url</span>=<span class="hljs-string">"https://your-deepseek-endpoint/v1"</span>
)
</code></pre>
<p>è¿™ç§å†™æ³•ä¸ä»…æ¸…æ™°è¡¨è¾¾äº†ä¾èµ–å…³ç³»ï¼Œè¿˜ä¾¿äºåç»­æ›¿æ¢æ¨¡å‹åç«¯æˆ–è°ƒæ•´é…ç½®ã€‚æ¯ä¸ªæ¨¡å—ä¸“æ³¨å•ä¸€èŒè´£â€”â€”å¦‚æç¤ºå·¥ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€å·¥å…·è°ƒç”¨ç­‰â€”â€”ä»è€Œæå‡ä»£ç çš„å¯è¯»æ€§ã€å¯æµ‹è¯•æ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-4">å››ã€å¤šè½®å¯¹è¯ä¸è§’è‰²è®¾å®šï¼šæ„å»ºæœ‰è®°å¿†çš„æ™ºèƒ½ä½“</h3>
<p>å¤§æ¨¡å‹çš„ <code>chat.completions</code> æ¥å£æ”¯æŒå¤šè½®å¯¹è¯ï¼Œå…¶æ ¸å¿ƒåœ¨äº <strong>æ¶ˆæ¯å†å²ï¼ˆmessage historyï¼‰</strong> çš„ä¼ é€’ã€‚æ¯æ¡æ¶ˆæ¯åŒ…å«ä¸€ä¸ª <code>role</code> å­—æ®µï¼Œé€šå¸¸åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li><code>system</code>ï¼šå®šä¹‰ AI çš„èº«ä»½ã€è¡Œä¸ºå‡†åˆ™æˆ–ä»»åŠ¡ç›®æ ‡ï¼Œä¸€èˆ¬åœ¨å¯¹è¯å¼€å§‹æ—¶è®¾å®šä¸€æ¬¡ï¼›</li>
<li><code>user</code>ï¼šç”¨æˆ·è¾“å…¥çš„é—®é¢˜æˆ–æŒ‡ä»¤ï¼›</li>
<li><code>assistant</code>ï¼šæ¨¡å‹ç”Ÿæˆçš„å›å¤ã€‚</li>
</ul>
<p>é€šè¿‡ç²¾å¿ƒè®¾è®¡ system prompt ä¸ç»´æŠ¤ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼æ¨¡å‹æ‰®æ¼”å®¢æœã€æ•™å¸ˆã€ç¼–ç¨‹åŠ©æ‰‹ç­‰è§’è‰²ï¼Œå®ç°æ›´è¿è´¯ã€æ›´ä¸“ä¸šçš„äº¤äº’ä½“éªŒã€‚</p>
<h3 data-id="heading-5">äº”ã€è¶…è¶Šé™æ€çŸ¥è¯†ï¼šæ•™å¤§æ¨¡å‹â€œä½¿ç”¨å·¥å…·â€</h3>
<p>å°½ç®¡ DeepSeek ç­‰æ¨¡å‹æ— æ³•ç›´æ¥è·å–å®æ—¶æ•°æ®ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ <strong>å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰</strong> èµ‹äºˆå…¶â€œè¡ŒåŠ¨åŠ›â€ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>å½“ç”¨æˆ·è¯¢é—®â€œä»Šå¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿâ€ï¼Œæ¨¡å‹å¯è¯†åˆ«å‡ºéœ€è¦è°ƒç”¨å¤©æ°” APIï¼›</li>
<li>å½“ç”¨æˆ·é—®â€œç‰¹æ–¯æ‹‰æœ€æ–°è‚¡ä»·æ˜¯å¤šå°‘ï¼Ÿâ€ï¼Œæ¨¡å‹å¯è§¦å‘é‡‘èæ•°æ®æ¥å£ã€‚</li>
</ul>
<p>è¿™ä¸€è¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯ <strong>æ•™ä¼š LLM ä½¿ç”¨å¤–éƒ¨å·¥å…·</strong>ï¼šé€šè¿‡å‡½æ•°æè¿°ï¼ˆfunction schemaï¼‰å‘Šè¯‰æ¨¡å‹æœ‰å“ªäº›å·¥å…·å¯ç”¨ï¼Œæ¨¡å‹åœ¨æ¨ç†æ—¶å†³å®šæ˜¯å¦è°ƒç”¨ï¼Œå¹¶è§£æè¿”å›ç»“æœç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”ã€‚è¿™ç§â€œæ¨ç† + å·¥å…·â€çš„æ¶æ„ï¼Œæ­£æˆä¸ºæ„å»ºå®ç”¨å‹ AI åº”ç”¨çš„ä¸»æµèŒƒå¼ã€‚</p>
<h3 data-id="heading-6">ç»“è¯­</h3>
<p>ä» ModelScope è·å–æ¨¡å‹ï¼Œåˆ° Jupyter ä¸­å®éªŒéªŒè¯ï¼Œå†åˆ°æ¨¡å—åŒ–å°è£…ä¸å·¥å…·é›†æˆï¼Œæˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªå¼€æ”¾ã€çµæ´»ä¸”å¼ºå¤§çš„å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç”Ÿæ€ã€‚DeepSeek è¿™æ ·çš„å¼€æºæ¨¡å‹ä¸ä»…æ˜¯æŠ€æœ¯æˆæœï¼Œæ›´æ˜¯åˆ›æ–°çš„èµ·ç‚¹ã€‚æœªæ¥ï¼Œéšç€å·¥å…·è°ƒç”¨ã€è®°å¿†æœºåˆ¶ä¸å¤šæ¨¡æ€èƒ½åŠ›çš„èåˆï¼Œå¤§æ¨¡å‹å°†çœŸæ­£ä»â€œçŸ¥è¯†åº“â€è¿›åŒ–ä¸ºâ€œæ™ºèƒ½ä½“â€ï¼Œåœ¨ç°å®ä¸–ç•Œä¸­å‘æŒ¥æ›´å¤§ä»·å€¼ã€‚</p>
<blockquote>
<p>æ­£å¦‚ä¸€å¥å¼€å‘è€…æ ¼è¨€æ‰€è¯´ï¼šâ€œæ¨¡å‹æä¾›å¯èƒ½æ€§ï¼Œå·¥ç¨‹å®ç°ä»·å€¼ã€‚â€ åœ¨è¿™åœºäººä¸æ™ºèƒ½ååŒè¿›åŒ–çš„æ—…ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ—¢æ˜¯ä½¿ç”¨è€…ï¼Œä¹Ÿæ˜¯å¡‘é€ è€…ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ æ·±åº¦æµ‹è¯„ï¼šGemini 3.0 Pro æ—¶ä»£çš„é™ç»´æ‰“å‡» â€”â€” å½“ AI å¼€å§‹â€œåå™¬â€æ•´ä¸ªè½¯ä»¶å·¥ç¨‹]]></title>    <link>https://juejin.cn/post/7574251313884053519</link>    <guid>https://juejin.cn/post/7574251313884053519</guid>    <pubDate>2025-11-19T17:04:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574251313884053519" data-draft-id="7574230586971488262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ æ·±åº¦æµ‹è¯„ï¼šGemini 3.0 Pro æ—¶ä»£çš„é™ç»´æ‰“å‡» â€”â€” å½“ AI å¼€å§‹â€œåå™¬â€æ•´ä¸ªè½¯ä»¶å·¥ç¨‹"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2025-11-19T17:04:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ æ·±åº¦æµ‹è¯„ï¼šGemini 3.0 Pro æ—¶ä»£çš„é™ç»´æ‰“å‡» â€”â€” å½“ AI å¼€å§‹â€œåå™¬â€æ•´ä¸ªè½¯ä»¶å·¥ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T17:04:58.000Z" title="Wed Nov 19 2025 17:04:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚æœè¯´ GPT-4o è®©æˆ‘ä»¬æƒŠå¹äº AI çš„â€œç±»äººäº¤äº’â€ï¼ŒClaude 3.5 Sonnet å±•ç¤ºäº† AI çš„â€œä»£ç æ™ºå•†â€ï¼Œé‚£ä¹ˆ Google å€Ÿç”± Gemini Pro ç³»åˆ—ï¼ˆåŠé¢„æµ‹ä¸­çš„ 3.0 æ¶æ„ï¼‰æ‰€æ„å»ºçš„ï¼Œåˆ™æ˜¯ä¸€åº§é€šå¾€<strong>AGIï¼ˆé€šç”¨äººå·¥æ™ºèƒ½ï¼‰çš„å·¥ä¸šçº§åŸºç¡€è®¾æ–½</strong>ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªåœ¨ IT è¡Œä¸šæ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„å¼€å‘è€…ï¼Œä»Šå¤©æˆ‘æƒ³è·³å‡ºç®€å•çš„â€œè·‘åˆ†â€ï¼Œä»<strong>ç”Ÿäº§åŠ›é‡æ„ã€æ¶æ„èŒƒå¼è½¬ç§»ã€ç”Ÿæ€å£å’</strong>ä¸‰ä¸ªç»´åº¦ï¼Œå…¨æ–¹ä½å‰–æ Google è¿™ä½å·¨äººè‹é†’åï¼Œå¯¹æˆ‘ä»¬æ‰‹ä¸­çš„é¥­ç¢—åˆ°åº•æ„å‘³ç€ä»€ä¹ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ“Š ç¬¬ä¸€ç« ï¼šè¯¸ç¥ä¹‹æˆ˜ â€”â€” å…¨çƒé¡¶çº§æ¨¡å‹æ¨ªè¯„</h2>
<p>åœ¨èŠå½±å“ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¾—ææ¸…æ¥š Gemini Pro åœ¨å½“å‰åæ ‡ç³»ä¸­çš„ä½ç½®ã€‚æˆ‘ä»¬å°†ä»¥ Google æœ€æ–°çš„æ——èˆ°èƒ½åŠ›ï¼ˆä»£ç§° Gemini-3.0-proï¼‰ä¸ç›®å‰çš„é¡¶æµç«å“è¿›è¡Œ<strong>é¢—ç²’åº¦æ›´ç»†</strong>çš„å¯¹æ¯”ã€‚</p>









































<table><thead><tr><th>æ ¸å¿ƒç»´åº¦</th><th><strong>Google Gemini 3.0 Pro</strong>Â (æ¼”è¿›ç‰ˆ)</th><th><strong>OpenAI GPT-4o</strong></th><th><strong>Anthropic Claude 3.5 Sonnet</strong></th></tr></thead><tbody><tr><td><strong>åº•å±‚æ¶æ„</strong></td><td><strong>åŸç”Ÿå¤šæ¨¡æ€ (Native Multimodal)</strong> Â <br/>Â <em>éŸ³é¢‘/è§†é¢‘/å›¾åƒç›´æ¥ä½œä¸ºTokenè¾“å…¥ï¼Œæ— æŸè€—</em></td><td>æ–‡æœ¬æ¨¡å‹ + è§†è§‰/è¯­éŸ³ç¼–ç å™¨æ‹¼æ¥ (è™½ç„¶4oå·²é«˜åº¦èåˆï¼Œä½†Geminiæ›´çº¯ç²¹)</td><td>æ–‡æœ¬ + è§†è§‰ (æš‚æ— åŸç”ŸéŸ³é¢‘å¤„ç†èƒ½åŠ›)</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡çª—å£ (Context)</strong></td><td><strong>ğŸ‘‘ ç‹è€…çº§ï¼š2M ~ æ— é™ Token</strong>Â <br/>Â <em>èƒ½åƒä¸‹æ•´ä¸ª Linux å†…æ ¸ä»£ç åº“æˆ– 2 å°æ—¶é«˜æ¸…ç”µå½±</em></td><td>128k TokenÂ <br/>Â <em>é€‚åˆæ—¥å¸¸å¯¹è¯ï¼Œå¤„ç†é•¿æ–‡æ¡£éœ€åˆ‡ç‰‡</em></td><td>200k TokenÂ <br/>Â <em>ä»£ç èƒ½åŠ›å¼ºï¼Œä½†é•¿æ–‡æœ¬è®°å¿†ç¨é€Š</em></td></tr><tr><td><strong>æ¨ç†ä¸é€»è¾‘</strong></td><td><strong>é•¿ç¨‹é€»è¾‘é“¾ (Long-context Reasoning)</strong> Â <br/>Â <em>æ“…é•¿åœ¨æµ·é‡æ‚ä¹±ä¿¡æ¯ä¸­æå–å…³è”</em></td><td>æé€Ÿå“åº”ï¼Œé€‚åˆå®æ—¶äº¤äº’ï¼Œé€»è¾‘è·³è·ƒæ€§è¾ƒå¥½</td><td><strong>ğŸ‘‘ ä»£ç é€»è¾‘æœ€å¼º</strong>Â <br/>Â <em>ç›®å‰ç¼–ç¨‹ç•Œå…¬è®¤çš„ Coding King</em></td></tr><tr><td><strong>ç”Ÿæ€æ•´åˆ</strong></td><td><strong>ç³»ç»Ÿçº§æ¤å…¥</strong>Â <br/>Â <em>Android, Chrome, Firebase, Google Cloud</em></td><td>åº”ç”¨çº§æ•´åˆÂ <br/>Â <em>Copilot, macOS App, ChatGPT</em></td><td>çº¯ API æœåŠ¡å•†Â <br/>Â <em>é›†æˆä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·</em></td></tr><tr><td><strong>å®šä»·ç­–ç•¥</strong></td><td><strong>ä»·æ ¼å± å¤«</strong>Â <br/>Â <em>Flashç‰ˆæœ¬æä½ï¼ŒProç‰ˆæœ¬ä¸ä»…å…è´¹é¢åº¦å¤§ï¼Œä¸”Tokenå•ä»·æ¿€è¿›</em></td><td>è¾ƒè´µï¼Œä½†åœ¨æŒç»­ä¼˜åŒ–æˆæœ¬</td><td>è¾ƒè´µï¼Œä¸»è¦é¢å‘é«˜ç«¯å¼€å‘è€…</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/103d5bd141f745d598950549b5ccc6d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764176698&amp;x-signature=Vmo65ACZf6Zg4t2Y%2BXc9hiFCg58%3D" alt="DM_20251120010042_001.jpg" loading="lazy"/></p>
<h3 data-id="heading-2">æ ¸å¿ƒå·®å¼‚ç‚¹è§£è¯»ï¼š</h3>
<ul>
<li><strong>GPT-4o æ˜¯â€œå…¨èƒ½åŠ©ç†â€</strong> ï¼šå®ƒçš„å“åº”é€Ÿåº¦ï¼ˆLatancyï¼‰æ˜¯æè‡´çš„ï¼Œå®ƒæ˜¯ä¸ºäº†è®©ä½ **â€œçˆ½â€**è€Œç”Ÿçš„ï¼Œé€‚åˆåšå®¢æœã€è¯­éŸ³åŠ©æ‰‹ã€å®æ—¶ç¿»è¯‘ã€‚</li>
<li><strong>Claude 3.5 æ˜¯â€œå¤©æ‰ç¨‹åºå‘˜â€</strong> ï¼šç»™å®ƒä¸€æ®µå¤æ‚çš„ç®—æ³•é€»è¾‘ï¼Œå®ƒå†™çš„ Bug æœ€å°‘ï¼Œä»£ç é£æ ¼æœ€ä¼˜é›…ã€‚</li>
<li><strong>Gemini Pro æ˜¯â€œè¶…çº§æ•°æ®åå™¬è€…â€</strong> ï¼šå®ƒä¸ä¸€å®šå†™ä»£ç æœ€å¿«ï¼Œä½†å®ƒèƒ½<strong>åŒæ—¶è¯»å®Œä½ å…¬å¸è¿‡å» 10 å¹´çš„æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£</strong>ï¼Œå¹¶å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆç°åœ¨çš„æ¶æ„æ˜¯è¿™ä¸ªé¬¼æ ·å­ã€‚<strong>å®ƒçš„æŠ¤åŸæ²³æ˜¯â€œå®¹é‡â€å’Œâ€œå¤šæ¨¡æ€ç†è§£æ·±åº¦â€ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-3">ğŸ› ï¸ ç¬¬äºŒç« ï¼šå¯¹ IT è¡Œä¸šå…·ä½“å²—ä½çš„æ·±åº¦å†²å‡»</h2>
<p>Gemini Pro çš„å‡ºç°ï¼Œä¸ä»…ä»…æ˜¯è®©æˆ‘ä»¬å†™ä»£ç å¿«äº†ä¸€ç‚¹ï¼Œå®ƒæ­£åœ¨<strong>æ”¹å˜è½¯ä»¶ç”Ÿäº§çš„æµæ°´çº¿</strong>ã€‚</p>
<h3 data-id="heading-4">1. å‰ç«¯å¼€å‘ï¼šä»â€œåˆ‡å›¾ä»”â€åˆ°â€œäº¤äº’é€»è¾‘æ¶æ„å¸ˆâ€</h3>
<p>åœ¨ Gemini çš„åŸç”Ÿå¤šæ¨¡æ€èƒ½åŠ›ä¸‹ï¼Œå‰ç«¯å¼€å‘çš„å·¥ä½œæµå°†å‘ç”Ÿè´¨å˜ï¼š</p>
<ul>
<li>
<p><strong>UI/UX è¿˜åŸè‡ªåŠ¨åŒ–</strong>ï¼šä»¥å‰çš„ img-to-code æ˜¯åŸºäº OCR è¯†åˆ«æ–‡å­— + çŒœæµ‹å¸ƒå±€ã€‚ç°åœ¨çš„ Gemini å¯ä»¥ç›´æ¥ç†è§£<strong>è®¾è®¡ç¨¿çš„å±‚çº§ç»“æ„ï¼ˆDOM Treeï¼‰</strong> ã€‚</p>
<ul>
<li><em>åœºæ™¯</em>ï¼šä¸Šä¼ ä¸€æ®µ Figma çš„æ¼”ç¤ºè§†é¢‘ï¼ŒGemini ç›´æ¥ç”ŸæˆåŒ…å« CSS åŠ¨ç”»çŠ¶æ€æœºï¼ˆState Machineï¼‰çš„ React ä»£ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>WebGL/3D å¼€å‘é—¨æ§›æ¶ˆå¤±</strong>ï¼šæ­£å¦‚ä½ æåˆ°çš„â€œåœ°çƒæ¨¡å‹â€ï¼Œä»¥å‰ä½ éœ€è¦ç²¾é€š Three.js çš„çŸ©é˜µå˜æ¢ã€ç€è‰²å™¨ï¼ˆShaderï¼‰è¯­è¨€ã€‚</p>
<ul>
<li><em>ç°åœ¨</em>ï¼šä½ å¯ä»¥ç›´æ¥å‘ç»™ Gemini ä¸€å¼ ã€Šæµæµªåœ°çƒã€‹çš„å‰§ç…§ï¼Œè¯´ï¼šâ€œç”¨ Three.js å®ç°è¿™ä¸ªå…‰å½±æ•ˆæœã€‚â€å®ƒèƒ½ç›´æ¥ç”Ÿæˆ Shader ä»£ç ï¼Œå› ä¸ºå®ƒâ€œçœ‹æ‡‚â€äº†å…‰æ˜¯æ€ä¹ˆæ¼«åå°„çš„ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">2. åç«¯ä¸æ¶æ„ï¼šé—ç•™ä»£ç ï¼ˆLegacy Codeï¼‰çš„æ•‘ä¸–ä¸»</h3>
<p>è¿™æ˜¯ Gemini <strong>è¶…é•¿ä¸Šä¸‹æ–‡</strong>å‘æŒ¥å¨åŠ›çš„ä¸»æˆ˜åœºã€‚</p>
<ul>
<li>
<p><strong>æ—§ç³»ç»Ÿé‡æ„</strong>ï¼šæ¯ä¸ªå…¬å¸éƒ½æœ‰ä¸€åº§â€œå±å±±â€ã€‚ä»¥å‰ AI è¯»ä¸æ‡‚ï¼Œå› ä¸ºä¸Šä¸‹æ–‡ä¸å¤Ÿã€‚ç°åœ¨ï¼Œä½ å¯ä»¥æŠŠ<strong>æ•´ä¸ªä»“åº“ï¼ˆRepoï¼‰æ‰“åŒ…</strong>ä¸¢ç»™ Geminiã€‚</p>
<ul>
<li><em>Prompt</em>ï¼š <em>â€œé˜…è¯»è¿™ 500 ä¸ª Java æ–‡ä»¶ï¼Œæ‰¾å‡ºæ‰€æœ‰ä½¿ç”¨æ—§ç‰ˆ JDBC è¿æ¥æ± çš„åœ°æ–¹ï¼Œé‡æ„ä¸º Spring Boot 3 çš„é£æ ¼ï¼Œå¹¶ç”Ÿæˆè¿ç§»çš„ SQL è„šæœ¬ã€‚â€</em></li>
<li><em>ç»“æœ</em>ï¼šå®ƒä¸ä»…èƒ½æ”¹ä»£ç ï¼Œè¿˜èƒ½é€šè¿‡ç†è§£å…¨é“¾è·¯ï¼Œå‘Šè¯‰ä½ æ”¹äº†è¿™ä¸ªå‡½æ•°ä¼šé€šè¿‡ä¾èµ–æ³¨å…¥å½±å“åˆ°å“ªä¸ª Controllerã€‚</li>
</ul>
</li>
<li>
<p><strong>æ—¥å¿—åˆ†æä¸æ•…éšœæ’æŸ¥</strong>ï¼š</p>
<ul>
<li>åç«¯æœ€æ€•çš„æ˜¯<strong>åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</strong>ä¸­çš„æ–­å±‚ã€‚Gemini å¯ä»¥ä¸€æ¬¡æ€§åƒä¸‹ 100MB çš„ Trace æ—¥å¿—ï¼Œè·¨è¶Šå‡ åä¸ªå¾®æœåŠ¡æ‰¾åˆ°é‚£ä¸ªå¯¼è‡´é›ªå´©çš„Â <code>NullPointerException</code>ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">3. ç§»åŠ¨ç«¯ï¼ˆAndroid/iOSï¼‰ï¼šOn-Device AI çš„å´›èµ·</h3>
<p>Google æ­£åœ¨æ¨è¡Œ <strong>Gemini Nano</strong>ï¼ˆç«¯ä¾§æ¨¡å‹ï¼‰ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>éšç§è®¡ç®—</strong>ï¼šAPP ä¸å†éœ€è¦æŠŠç”¨æˆ·æ•°æ®ä¼ å›äº‘ç«¯å¤„ç†ã€‚</li>
<li><strong>ç¦»çº¿æ™ºèƒ½</strong>ï¼šä½ çš„ APP å¯ä»¥åœ¨æ–­ç½‘æƒ…å†µä¸‹ï¼Œåˆ©ç”¨æ‰‹æœº NPU è·‘ä¸€ä¸ªç²¾ç®€ç‰ˆçš„ Geminiï¼Œå®ç°å®æ—¶çš„å›¾ç‰‡åˆ†ç±»ã€æ–‡æœ¬æ‘˜è¦ã€‚è¿™å¯¹äº IT å¼€å‘æ¥è¯´ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦å¼€å§‹å­¦ä¹ Â <strong>AICore</strong>Â å’ŒÂ <strong>TensorFlow Lite</strong>Â çš„éƒ¨ç½²æŠ€æœ¯äº†ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ§  ç¬¬ä¸‰ç« ï¼šæ¶æ„èŒƒå¼è½¬ç§» â€”â€” RAG çš„æ¶ˆäº¡ä¸æ–°ç”Ÿ</h2>
<p>è¿™éƒ¨åˆ†æ˜¯æœ¬æ–‡æœ€ç¡¬æ ¸çš„è§‚ç‚¹ã€‚</p>
<p>åœ¨ 2023 å¹´ï¼Œæˆ‘ä»¬åšä¼ä¸šçº§ AI åº”ç”¨çš„æ ‡å‡†æ¶æ„æ˜¯ <strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> ï¼š</p>
<blockquote>
<p>ç”¨æˆ·æé—® -&gt; å‘é‡æ•°æ®åº“æ£€ç´¢ -&gt; å¬å› Top 5 ç‰‡æ®µ -&gt; å–‚ç»™ LLM -&gt; ç”Ÿæˆç­”æ¡ˆã€‚</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ</strong> å› ä¸ºä»¥å‰çš„æ¨¡å‹è®°ä¸ä½é‚£ä¹ˆå¤šä¸œè¥¿ï¼ˆContext Window å¤ªå°ï¼‰ã€‚</p>
<p><strong>Gemini 3.0 Pro å¸¦æ¥çš„å†²å‡»ï¼š</strong> å½“ä¸Šä¸‹æ–‡æ‰©å±•åˆ° <strong>200 ä¸‡ç”šè‡³ 1000 ä¸‡ Token</strong> æ—¶ï¼Œå¯¹äºä¸­å°å‹çŸ¥è¯†åº“ï¼ˆä¾‹å¦‚ä¸€æœ¬æŠ€æœ¯æ‰‹å†Œã€ä¸€ä¸ªæ³•å¾‹åˆåŒåº“ã€ä¸€ä¸ªé¡¹ç›®çš„ä»£ç ï¼‰ï¼Œ<strong>RAG å¯èƒ½ä¸å†è¢«éœ€è¦</strong>ã€‚</p>
<ul>
<li>
<p><strong>In-Context Learning (ä¸Šä¸‹æ–‡å­¦ä¹ )</strong> ï¼šä½ å¯ä»¥ç›´æ¥æŠŠæ•´æœ¬ä¹¦å¡è¿› Prompt é‡Œã€‚</p>
</li>
<li>
<p><strong>å¤§æµ·æé’ˆï¼ˆNeedle In A Haystackï¼‰æµ‹è¯•</strong>ï¼šGemini 1.5 Pro å·²ç»è¯æ˜ï¼Œåœ¨ç™¾ä¸‡çº§ Token ä¸­æ£€ç´¢å…·ä½“ä¿¡æ¯çš„å‡†ç¡®ç‡è¾¾åˆ°äº† 99% ä»¥ä¸Šã€‚</p>
</li>
<li>
<p><strong>å½±å“</strong>ï¼š</p>
<ol>
<li><strong>å‘é‡æ•°æ®åº“ï¼ˆVector DBï¼‰</strong> Â çš„å¸‚åœºä¼šè¢«å‹ç¼©ï¼Œä»…ç”¨äºæµ·é‡ï¼ˆTBçº§ï¼‰æ•°æ®æ£€ç´¢ã€‚</li>
<li>å¼€å‘è€…çš„ç²¾åŠ›å°†ä»â€œä¼˜åŒ–æ£€ç´¢ç®—æ³•â€è½¬ç§»åˆ°â€œå¦‚ä½•é«˜æ•ˆåœ°ç»„ç»‡ Prompt ä¸Šä¸‹æ–‡â€ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸŒ©ï¸ ç¬¬å››ç« ï¼šGoogle çš„ç»ˆææ€æ‹› â€”â€” ç”Ÿæ€é™ç»´æ‰“å‡»</h2>
<p>OpenAI æ˜¯ä¸€ä¸ªâ€œåº”ç”¨â€ï¼ŒClaude æ˜¯ä¸€ä¸ªâ€œå·¥å…·â€ï¼Œä½† Google æ˜¯ä¸€ä¸ª <strong>â€œæ“ä½œç³»ç»Ÿâ€</strong>ã€‚</p>
<p>Gemini 3.0 Pro å¯¹ IT è¡Œä¸šæœ€å¤§çš„å¨èƒï¼ˆæˆ–æœºé‡ï¼‰åœ¨äºå®ƒæ— å¤„ä¸åœ¨ï¼š</p>
<ol>
<li><strong>IDE é›†æˆ (Android Studio / IDX)</strong> ï¼šGoogle æ­£åœ¨æŠŠ Gemini æ¤å…¥ IDE å†…æ ¸ã€‚å®ƒä¸æ˜¯åƒ Copilot é‚£æ ·ä½œä¸ºä¸€ä¸ªæ’ä»¶å­˜åœ¨ï¼Œè€Œæ˜¯ä½œä¸º<strong>ç¼–è¯‘å™¨çš„ä¸€éƒ¨åˆ†</strong>ã€‚å®ƒç”šè‡³èƒ½åœ¨ä½  Debug æ—¶ï¼Œè‡ªåŠ¨é¢„æµ‹ä½ ä¸‹ä¸€ä¸ª Breakpoint åº”è¯¥æ‰“åœ¨å“ªé‡Œã€‚</li>
<li><strong>Cloud åŸºç¡€è®¾æ–½</strong>ï¼šåœ¨ Google Cloud Platform ä¸Šï¼ŒSQL æŸ¥è¯¢å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å†™ï¼ŒGemini ä¼šè‡ªåŠ¨ä¼˜åŒ–æŸ¥è¯¢è®¡åˆ’ï¼ˆQuery Planï¼‰ã€‚DBAï¼ˆæ•°æ®åº“ç®¡ç†å‘˜ï¼‰çš„å·¥ä½œå°†ä»å†™ SQL å˜æˆâ€œå®¡æ ¸ SQLâ€ã€‚</li>
<li><strong>åŠå…¬ååŒ</strong>ï¼šå½“ Gemini è¯»æ‡‚äº†ä½  Google Drive é‡Œæ‰€æœ‰çš„æ–‡æ¡£ã€Meet ä¼šè®®è®°å½•å’Œ Gmail é‚®ä»¶æ—¶ï¼Œå®ƒå°±æˆä¸ºäº†ä¸€ä¸ªæ‹¥æœ‰ä½ å…¬å¸æ‰€æœ‰<strong>éšæ€§çŸ¥è¯†ï¼ˆTacit Knowledgeï¼‰</strong> Â çš„è¶…çº§å‘˜å·¥ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">ğŸ”® ç¬¬äº”ç« ï¼šæ€»ç»“ â€”â€” å¼€å‘è€…çš„ç”Ÿå­˜æŒ‡å—</h2>
<p>é¢å¯¹ Gemini 3.0 Pro è¿™ç§çº§åˆ«çš„ AIï¼ŒIT ä»ä¸šè€…è¯¥ä½•å»ä½•ä»ï¼Ÿ</p>
<ol>
<li><strong>ä»â€œå†™ç â€åˆ°â€œå®¡ç â€</strong> ï¼šä»£ç ç”Ÿæˆå·²ç»æ˜¯æ ‡é…ã€‚ä½ çš„æ ¸å¿ƒç«äº‰åŠ›åœ¨äº<strong>Code Review</strong>çš„èƒ½åŠ›ï¼Œåœ¨äºä½ èƒ½å¦ä¸€çœ¼çœ‹å‡º AI ç”Ÿæˆä»£ç ä¸­çš„å®‰å…¨æ¼æ´å’Œé€»è¾‘é™·é˜±ã€‚</li>
<li><strong>æŒæ¡â€œå¤šæ¨¡æ€äº¤äº’è®¾è®¡â€</strong> ï¼šæœªæ¥çš„åº”ç”¨ä¸å†æ˜¯å•çº¯çš„â€œç‚¹æŒ‰é’®â€ï¼Œè€Œæ˜¯è¯­éŸ³ã€æ‰‹åŠ¿ã€æ‘„åƒå¤´ç”»é¢çš„æ··åˆäº¤äº’ã€‚åˆ©ç”¨ Gemini çš„è§†è§‰ç†è§£èƒ½åŠ›å¼€å‘æ–°ä¸€ä»£ App æ˜¯å·¨å¤§çš„è“æµ·ã€‚</li>
<li><strong>æ‹¥æŠ±â€œé•¿ä¸Šä¸‹æ–‡â€æ¶æ„</strong>ï¼šå­¦ä¼šåˆ©ç”¨ Million-Context çª—å£å»è§£å†³ä»¥å‰éœ€è¦å¤æ‚å·¥ç¨‹åŒ–ï¼ˆå¦‚å¾®æœåŠ¡æ‹†åˆ†ã€å¤æ‚ ETLï¼‰æ‰èƒ½è§£å†³çš„é—®é¢˜ã€‚</li>
</ol>
<p><strong>ç»“è¯­ï¼š</strong> Gemini 3.0 Pro å¹¶ä¸æ˜¯è¦æ€æ­»å¼€å‘è€…ï¼Œå®ƒæ˜¯è¦<strong>æ€æ­»å¹³åº¸çš„é‡å¤åŠ³åŠ¨</strong>ã€‚åœ¨è¿™ä¸ªæ–°æ—¶ä»£ï¼Œ<strong>æƒ³è±¡åŠ›</strong>å°†æˆä¸ºä¹Ÿæ˜¯å”¯ä¸€é™åˆ¶ä½ å¼€å‘èƒ½åŠ›çš„ç“¶é¢ˆã€‚ä¸å…¶ç„¦è™‘ï¼Œä¸å¦‚ç°åœ¨å°±å»ç”³è¯· API Keyï¼ŒæŠŠé‚£ä¸ªä½ æ„æ€äº†å¾ˆä¹…å´å› ä¸ºæŠ€æœ¯å¤ªéš¾è€Œæç½®çš„é¡¹ç›®ï¼Œé‡æ–°æ¡èµ·æ¥ã€‚</p>
<p>ç°åœ¨Googleå®˜ç½‘å¯ä»¥å…è´¹ä½“éªŒï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»å°è¯•å¼€å‘è‡ªå·±çš„åº”ç”¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c79e221a10194428903ff31d1298841e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764176698&amp;x-signature=qcPRjuneYMSrpsZN%2Fg55lizLymA%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VimLçš„â€œå·¥ç¨‹åŒ–â€é£è·ƒï¼ˆä¸‹ï¼‰ï¼šä»è¯­è¨€åˆ°è·¨å¹³å°ç”Ÿæ€]]></title>    <link>https://juejin.cn/post/7574352425236660243</link>    <guid>https://juejin.cn/post/7574352425236660243</guid>    <pubDate>2025-11-20T02:20:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574352425236660243" data-draft-id="7574352425236512787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VimLçš„â€œå·¥ç¨‹åŒ–â€é£è·ƒï¼ˆä¸‹ï¼‰ï¼šä»è¯­è¨€åˆ°è·¨å¹³å°ç”Ÿæ€"/> <meta itemprop="keywords" content="æ¶æ„,ç®—æ³•,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-20T02:20:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="codigger"/> <meta itemprop="url" content="https://juejin.cn/user/3607934576120985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VimLçš„â€œå·¥ç¨‹åŒ–â€é£è·ƒï¼ˆä¸‹ï¼‰ï¼šä»è¯­è¨€åˆ°è·¨å¹³å°ç”Ÿæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3607934576120985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    codigger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:20:32.000Z" title="Thu Nov 20 2025 02:20:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç³»åˆ—æ–‡ç« å¯¼è¯»ï¼š</strong> åœ¨ä¸Šç¯‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†ObjectSenseå¦‚ä½•é€šè¿‡å¼•å…¥Classå’ŒPackageæœºåˆ¶ï¼Œå®Œæˆäº†ä»VimLâ€œè„šæœ¬â€åˆ°â€œç°ä»£OOPè¯­è¨€â€çš„ç¬¬ä¸€æ¬¡å…³é”®è¿›åŒ–ã€‚å®ƒè§£å†³äº†VimLåœ¨â€œè¯­è¨€å·¥ç¨‹åŒ–â€ä¸Šçš„æ ¸å¿ƒçŸ­æ¿ã€‚</p>
<p>ä½†VimLè¿˜æœ‰ä¸€ä¸ªæ›´æ ¹æœ¬çš„å±€é™ï¼šå®ƒæ˜¯ä¸€åº§â€œå­¤å²›â€ï¼Œå®ƒçš„ç”Ÿå‘½å‡ ä¹å®Œå…¨ä¾èµ–Vimç¼–è¾‘å™¨è¿™ä¸ªâ€œå®¿ä¸»â€ã€‚</p>
<p>ï¼ˆä¸Šç¯‡ï¼‰ä»è„šæœ¬åˆ°ç°ä»£OOP</p>
<p><strong>ï¼ˆä¸‹ç¯‡ï¼‰ä»è¯­è¨€åˆ°è·¨å¹³å°ç”Ÿæ€</strong></p>
<h3 data-id="heading-0">ä¸€ã€VimLçš„â€œå®¿ä¸»â€å›°å¢ƒ</h3>
<p>VimLçš„ç¬¬äºŒæ¬¡è¿›åŒ–ï¼Œå¿…é¡»è§£å†³è¿™ä¸ªâ€œå®¿ä¸»å›°å¢ƒâ€ã€‚å¦‚æœä¸€é—¨è¯­è¨€åªèƒ½æ´»åœ¨ç¼–è¾‘å™¨é‡Œï¼Œé‚£å®ƒæ°¸è¿œæ— æ³•æ„å»ºç‹¬ç«‹çš„æœåŠ¡ã€æ¡Œé¢åº”ç”¨æˆ–æ™ºèƒ½åˆçº¦ã€‚</p>
<p>ObjectSenseçš„æ–‡æ¡£ï¼Œç”¨å¤§é‡ç¯‡å¹…å±•ç¤ºäº†å®ƒå¦‚ä½•è¯•å›¾â€œè¶Šç‹±â€â€”â€”ä»VimLçš„â€œåŸºå› â€å‡ºå‘ï¼Œè¿›åŒ–å‡ºä¸€ä¸ªç‹¬ç«‹ã€è·¨å¹³å°çš„å®Œæ•´ç”Ÿæ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0363d084db4745b6a39ef97ca5663973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kaWdnZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764210500&amp;x-signature=WRcFqXPEpAqm17IPMXCU31FP8UY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">äºŒã€è¿›åŒ–çš„ç¬¬äºŒæ­¥ï¼šæ„å»ºâ€œç”Ÿæ€å·¥å…·é“¾â€</h3>
<p>å¦‚æœè¯´ï¼ˆä¸Šç¯‡ï¼‰çš„OOPæ˜¯â€œè¯­è¨€è®¾è®¡â€ï¼Œé‚£ä¹ˆï¼ˆä¸‹ç¯‡ï¼‰å°±æ˜¯â€œå·¥å…·é“¾å»ºè®¾â€ã€‚</p>
<p><strong>1. Sense.ose</strong> <strong>ä¸</strong> <strong>rose</strong> <strong>ï¼šä»</strong> <strong>â€œ</strong> <strong>æ’ä»¶</strong> <strong>â€</strong> <strong>åˆ°</strong> <strong>â€œ</strong> <strong>æ¨¡å—</strong> <strong>â€</strong></p>
<p>VimLçš„åŒ…ç®¡ç†æ˜¯â€œç¼–è¾‘å™¨çº§åˆ«â€çš„ï¼ˆå¦‚Vim-plug, Packerï¼‰ã€‚è€ŒObjectSenseåˆ™æä¾›äº†â€œ<strong>è¯­è¨€çº§åˆ«</strong>â€çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚</p>
<p><strong>Sense.ose</strong> <strong>æ–‡ä»¶ï¼š</strong> æ‰®æ¼”äº†package.json (Node.js) æˆ– Cargo.toml (Rust) çš„è§’è‰²ã€‚å®ƒæ˜¯ä¸€ä¸ªâ€œModuleæè¿°æ–‡ä»¶â€ï¼Œå®šä¹‰äº†æ¨¡å—çš„ç‰ˆæœ¬ã€ä¾èµ–ï¼ˆrequireï¼‰ã€å¯¼å‡ºï¼ˆexportï¼‰å’Œå…¥å£ï¼ˆmainï¼‰ã€‚</p>
<p><strong>rose</strong> <strong>å‘½ä»¤è¡Œå·¥å…·ï¼š</strong> æ‰®æ¼”äº†npmæˆ–cargoçš„è§’è‰²ã€‚å®ƒæä¾›äº†install, push, run, createç­‰ä¸€ç³»åˆ—å®Œæ•´çš„åŒ…ç®¡ç†å’Œé¡¹ç›®è¿è¡Œå‘½ä»¤ã€‚</p>
<p>è¿™ä¸¤è€…çš„ç»“åˆï¼Œæ ‡å¿—ç€å®ƒä»â€œVimæ’ä»¶â€æ­£å¼è¿›åŒ–ä¸ºâ€œ<strong>å¯ç‹¬ç«‹åˆ†å‘çš„è½¯ä»¶æ¨¡å—</strong>â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3b1f7e31ee842feab255fd25f4e8952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kaWdnZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764210500&amp;x-signature=AcAtHfFtUi%2B7aueJn6vYw2lnp%2B8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸‰ã€è¿›åŒ–çš„ç¬¬ä¸‰æ­¥ï¼šHarmonyæ¡†æ¶â€”â€”â€œé€ƒç¦»â€VimL</h3>
<p>è¿™å¯èƒ½æ˜¯ObjectSenseåœ¨è¿›åŒ–ä¸Šæœ€å¤§èƒ†çš„ä¸€æ­¥ã€‚å®ƒä¸å†æ»¡è¶³äºâ€œå°è£…â€VimLï¼Œè€Œæ˜¯è¦â€œ<strong>ç¼–è¯‘</strong>â€VimLã€‚</p>
<p>VimLçš„å®¿å‘½æ˜¯è¢«Vimçš„è§£é‡Šå™¨æ‰§è¡Œã€‚è€ŒObjectSenseçš„Harmony Frameworkï¼ˆå’Œè°æ¡†æ¶ï¼‰æ˜¯ä¸€ä¸ªâ€œç¼–è¯‘è°ƒåº¦â€æ¡†æ¶ã€‚</p>
<p>æ ¹æ®æ–‡æ¡£ï¼ŒHarmonyå…è®¸ä½ â€œ<strong>æ³¨å†Œå’Œä½¿ç”¨ä¸åŒçš„</strong> <strong>Compiler</strong> <strong>ï¼ˆç¼–è¯‘å™¨ï¼‰</strong> â€ã€‚</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>1.Â Â Â Â Â  <strong>AOT</strong> <strong>ç¼–è¯‘ï¼ˆ</strong> <strong>preboot</strong> <strong>ï¼‰ï¼š</strong> æ–‡æ¡£ä¸­çš„â€œå®æˆ˜ OSE-Compilerâ€ç« èŠ‚å±•ç¤ºäº†ï¼ŒHarmonyå¯ä»¥ä½¿ç”¨prebootç¼–è¯‘å™¨ï¼Œå°†ObjectSenseä»£ç <strong>ç¼–è¯‘ä¸º****C</strong> <strong>è¯­è¨€ä»£ç </strong>ã€‚</p>
<p>2.Â Â Â Â Â  <strong>è·¨è¯­è¨€ç¼–è¯‘ï¼ˆ</strong> <strong>Smart Contract</strong> <strong>ï¼‰ï¼š</strong> æ–‡æ¡£æ˜ç¡®æåˆ°ï¼Œå¯ä»¥ä½¿ç”¨SmartContractç¼–è¯‘å™¨ï¼Œå°†OSEä»£ç â€œ<strong>ç¿»è¯‘ä¸º</strong> <strong>Solidity</strong> <strong>æºç¨‹åº</strong>ï¼Œè¿›è€Œç¼–è¯‘æˆEvm Bincodeâ€ã€‚</p>
<p>3.Â Â Â Â Â  <strong>äº¤å‰ç¼–è¯‘ï¼ˆ</strong> <strong>Cross Compiler</strong> <strong>ï¼‰ï¼š</strong> å®ƒç”šè‡³æä¾›äº†äº¤å‰ç¼–è¯‘å·¥å…·ï¼Œç”¨äºâ€œç¼–è¯‘å‡ºwindows å’Œ macos å’Œ linux å¤šå¹³å°åŠ¨æ€åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶â€ã€‚</p>
<p>è¿™å½»åº•æ‰“ç ´äº†VimLçš„â€œå­¤å²›â€å®¿å‘½ã€‚ObjectSenseä¸å†æ˜¯Vimçš„â€œå¯„ç”Ÿè„šæœ¬â€ï¼Œå®ƒè¿›åŒ–æˆäº†ä¸€ç§â€œ<strong>å…ƒè¯­è¨€</strong>â€ï¼šä¸€ç§å¯ä»¥ç”¨Vimçš„ç®€æ´è¯­æ³•ç¼–å†™ï¼Œä½†æœ€ç»ˆå¯ä»¥â€œå˜èº«â€ä¸ºCä»£ç ã€Solidityåˆçº¦æˆ–å…¶ä»–ä»»ä½•ç›®æ ‡ä»£ç çš„å·¥ç¨‹è¯­è¨€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0031ad32de3440abb7de120f673fab42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kaWdnZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764210500&amp;x-signature=kIGdSvkbnDtBsCzxcsJsfVD7a44%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">å››ã€è¿›åŒ–çš„â€œæœªæ¥æ—¶â€ï¼šMicroï¼ˆå¾®è¯­è¨€ï¼‰</h3>
<p>å¦‚æœè¯´Harmonyæ˜¯â€œè¿›åŒ–â€çš„æ‰§è¡Œè€…ï¼Œé‚£ä¹ˆMicroï¼ˆå¾®è¯­è¨€ï¼‰å°±æ˜¯â€œè¿›åŒ–â€çš„è®¾è®¡è€…ã€‚</p>
<p>Microæœºåˆ¶ï¼ˆâ€œç±»ä¼¼äºLispå®â€ï¼‰å…è®¸å¼€å‘è€…è‡ªå®šä¹‰è¯­æ³•ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥â€œåœ¨è¯­è¨€ä¹‹ä¸Šè®¾è®¡è¯­è¨€â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºâ€œæ™ºèƒ½åˆçº¦â€æˆ–â€œGUIâ€è®¾è®¡ä¸€å¥—ä¸“ç”¨çš„ã€å£°æ˜å¼çš„Microè¯­æ³•ï¼Œç„¶åé€šè¿‡Harmonyæ¡†æ¶å°†å…¶ç¼–è¯‘æˆç›®æ ‡ä»£ç ã€‚</p>
<p>è¿™æ ‡å¿—ç€VimLçš„åŸºå› å®Œæˆäº†æœ€ç»ˆçš„è¿›åŒ–ï¼šå®ƒä»ä¸€ä¸ªâ€œè¢«åŠ¨â€çš„ã€ç”¨äºé…ç½®ç¼–è¾‘å™¨çš„è„šæœ¬ï¼Œè¿›åŒ–æˆäº†ä¸€ä¸ªâ€œä¸»åŠ¨â€çš„ã€ç”¨äºåˆ›é€ æ–°å·¥å…·å’Œæ–°è¯­æ³•çš„â€œå…ƒç¼–ç¨‹â€å¹³å°ã€‚</p>
<h3 data-id="heading-4">ç»“è®ºï¼šVimLçš„â€œç²¾ç¥ç»­ä½œâ€</h3>
<p>ä»VimLå‡ºå‘ï¼ŒObjectSenseçš„è¿›åŒ–è·¯å¾„æ¸…æ™°å¯è§ï¼š</p>
<p>1.Â Â Â Â Â  <strong>ç¬¬ä¸€æ¬¡é£è·ƒï¼ˆè¯­è¨€ï¼‰ï¼š</strong> å¼•å…¥OOPå’ŒåŒ…ç®¡ç†ï¼Œè§£å†³äº†VimLçš„â€œå·¥ç¨‹åŒ–â€éš¾é¢˜ã€‚</p>
<p>2.Â Â Â Â Â  <strong>ç¬¬äºŒæ¬¡é£è·ƒï¼ˆç”Ÿæ€ï¼‰ï¼š</strong> å¼•å…¥roseå·¥å…·é“¾ï¼Œæ‘†è„±äº†â€œæ’ä»¶â€çš„å®šä½ã€‚</p>
<p>3.Â Â Â Â Â  <strong>ç¬¬ä¸‰æ¬¡é£è·ƒï¼ˆè·¨å¹³å°ï¼‰ï¼š</strong> å¼•å…¥Harmonyç¼–è¯‘æ¡†æ¶ï¼Œæ‘†è„±äº†â€œVimå®¿ä¸»â€çš„ä¾èµ–ï¼Œè¿›åŒ–ä¸ºå¯ç¼–è¯‘è‡³Cã€EVMç­‰çš„â€œå…ƒè¯­è¨€â€ã€‚</p>
<p>å®ƒä¿ç•™äº†VimLâ€œåƒè¡Œä»£ç â€çš„ç®€æ´å†…æ ¸ï¼Œä½†èµ‹äºˆäº†å®ƒç°ä»£å·¥ç¨‹åŒ–çš„â€œéª¨æ¶â€å’Œâ€œè·¨å¹³å°â€çš„ç¿…è†€ã€‚æ— è®ºè¿™ä¸ªé¡¹ç›®æœªæ¥èµ°å‘ä½•æ–¹ï¼Œå®ƒéƒ½ä¸ºVimLçš„è¿›åŒ–æä¾›äº†ä¸€ä¸ªæå…·æƒ³è±¡åŠ›çš„èŒƒæœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-40ã€æ•°ç»„ä¸­åªå‡ºç°â¼€æ¬¡çš„æ•°å­—]]></title>    <link>https://juejin.cn/post/7574322843049689138</link>    <guid>https://juejin.cn/post/7574322843049689138</guid>    <pubDate>2025-11-20T02:31:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574322843049689138" data-draft-id="7572515402795237426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-40ã€æ•°ç»„ä¸­åªå‡ºç°â¼€æ¬¡çš„æ•°å­—"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-20T02:31:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-40ã€æ•°ç»„ä¸­åªå‡ºç°â¼€æ¬¡çš„æ•°å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:31:17.000Z" title="Thu Nov 20 2025 02:31:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>â¼€ä¸ªæ•´å‹æ•°ç»„â¾¥é™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°â¼€æ¬¡çš„æ•°å­—ã€‚</p>
<p>ç¤ºä¾‹
è¾“å…¥ï¼š[92,3,43,54,92,43,2,2,54,1]
è¾“å‡ºï¼š3ï¼Œ1</p>
<h2 data-id="heading-1">æ€è·¯è§£ç­”</h2>
<h3 data-id="heading-2">å“ˆå¸Œè¡¨ç»Ÿè®¡</h3>
<p>ä½¿â½¤ hashmap å­˜å‚¨æ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œ key ä¸ºå‡ºç°çš„æ•°å­—ï¼Œ value ä¸ºè¯¥æ•°å­—å‡ºç°çš„æ¬¡æ•°ã€‚éå†â¾¥â¾¯æ‰€æœ‰çš„æ•°å­—ï¼Œå¦‚æœ hashmap ä¸­å­˜åœ¨ï¼Œé‚£ä¹ˆ value ï¼ˆæ¬¡æ•°ï¼‰+1ï¼Œå¦‚æœ hashmap ä¸­ä¸å­˜åœ¨,é‚£ä¹ˆ value ç½®ä¸º1ã€‚</p>
<p>éå†å®Œæˆä¹‹åï¼Œéœ€è¦å°†æ¬¡æ•°ä¸º 1 çš„æ•°å­—æå‡ºæ¥ï¼ŒåŒæ ·æ˜¯éå† hashmap ï¼Œç”±äºåªæœ‰ä¸¤ä¸ªæ»¡â¾œæ¡ä»¶ï¼Œæˆ‘ä»¬è®¾ç½®â¼€ä¸ªæ ‡è¯†å˜é‡ï¼Œåˆå§‹åŒ–ä¸º1ï¼Œå¦‚æœæ‰¾åˆ°ç¬¬â¼€ä¸ªæ»¡â¾œæ¡ä»¶çš„æ•°å­—ï¼Œé™¤äº†å†™â¼Šæ”¾å›æ•°ç»„ä¸­ï¼Œè¿˜éœ€è¦å°†è¯¥æ ‡è¯†ç½®ä¸º 2 ï¼Œè¡¨ç¤ºæ¥ä¸‹æ¥æ‰¾çš„æ˜¯ç¬¬ 2 ä¸ªã€‚</p>
<p>å¦‚æœæ‰¾åˆ°ç¬¬ 2 ä¸ªï¼Œé‚£ä¹ˆå†™â¼Šä¹‹åï¼Œç›´æ¥ return ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">FindNumsAppearOnce</span><span class="hljs-params">(<span class="hljs-type">int</span>[] array, <span class="hljs-type">int</span> num1[], <span class="hljs-type">int</span> num2[])</span> {
     Map&lt;Integer, Integer&gt; maps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
     <span class="hljs-keyword">if</span> (array != <span class="hljs-literal">null</span>) {
         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n : array) {
             <span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> maps.get(n);
             <span class="hljs-keyword">if</span> (num == <span class="hljs-literal">null</span>) {
                 <span class="hljs-comment">// mapä¸­ä¸å­˜åœ¨</span>
                 maps.put(n, <span class="hljs-number">1</span>);
             } <span class="hljs-keyword">else</span> {
                 <span class="hljs-comment">// mapä¸­å·²ç»å­˜åœ¨</span>
                 maps.put(n, num + <span class="hljs-number">1</span>);
             }
         }
      }
      <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
      <span class="hljs-keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : maps.entrySet()) {
          <span class="hljs-keyword">if</span> (entry.getValue() == <span class="hljs-number">1</span>) {
             <span class="hljs-keyword">if</span> (index == <span class="hljs-number">1</span>) {
                 num1[<span class="hljs-number">0</span>] = entry.getKey();
                 index++;
             } <span class="hljs-keyword">else</span> {
                 num2[<span class="hljs-number">0</span>] = entry.getKey();
                 <span class="hljs-keyword">return</span>;
             }
         }
     }
 }
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦éå†æ•°ç»„ä¸¤æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦HashMapå­˜å‚¨é¢‘ç‡ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-3">æ’åºéå†</h3>
<p>å…ˆå¯¹æ•°ç»„æ’åºï¼Œç„¶åéå†æŸ¥æ‰¾ä¸è¿ç»­çš„æ•°å­—ã€‚æ’åºåç›¸åŒçš„æ•°å­—ä¼šç›¸é‚»ï¼Œéå†æ‰¾åˆ°ä¸è¿ç»­çš„æ•°å­—</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] FindNumsAppearOnce(<span class="hljs-type">int</span>[] nums) {
        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || nums.length &lt; <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">0</span>];
        }
        
        <span class="hljs-comment">// å¯¹æ•°ç»„è¿›è¡Œæ’åº</span>
        <span class="hljs-type">int</span>[] sorted = nums.clone();
        Arrays.sort(sorted);
        
        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">2</span>];
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// éå†æŸ¥æ‰¾ä¸è¿ç»­çš„æ•°å­—</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; sorted.length; i++) {
            <span class="hljs-comment">// æ£€æŸ¥å½“å‰æ•°å­—æ˜¯å¦ä¸å‰åéƒ½ä¸åŒ</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isSingle</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
            
            <span class="hljs-comment">// æ£€æŸ¥å‰ä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span>
            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; sorted[i] == sorted[i - <span class="hljs-number">1</span>]) {
                isSingle = <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-comment">// æ£€æŸ¥åä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼‰</span>
            <span class="hljs-keyword">if</span> (i &lt; sorted.length - <span class="hljs-number">1</span> &amp;&amp; sorted[i] == sorted[i + <span class="hljs-number">1</span>]) {
                isSingle = <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-keyword">if</span> (isSingle) {
                result[index++] = sorted[i];
                <span class="hljs-keyword">if</span> (index == <span class="hljs-number">2</span>) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// æ‰¾åˆ°ä¸¤ä¸ªæ•°å­—åé€€å‡º</span>
            }
        }
        
        <span class="hljs-comment">// ç¡®ä¿ç»“æœæŒ‰å‡åºæ’åˆ—</span>
        <span class="hljs-keyword">if</span> (result[<span class="hljs-number">0</span>] &gt; result[<span class="hljs-number">1</span>]) {
            <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> result[<span class="hljs-number">0</span>];
            result[<span class="hljs-number">0</span>] = result[<span class="hljs-number">1</span>];
            result[<span class="hljs-number">1</span>] = temp;
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nlogn)ï¼Œä¸»è¦æ¥è‡ªæ’åºæ“ä½œ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1) æˆ– O(n)ï¼Œå–å†³äºæ˜¯å¦å…‹éš†æ•°ç»„</li>
</ul>
<h3 data-id="heading-4">ä½è¿ç®—ï¼ˆæœ€ä¼˜è§£ï¼‰</h3>
<p>â¾¸å…ˆéœ€è¦äº†è§£â¼€å®šä½è¿ç®—çŸ¥è¯†ï¼Œå¼‚æˆ–æ˜¯æŒ‡â¼†è¿›åˆ¶ä¸­ï¼Œâ¼€ä¸ªä½ä¸Šçš„æ•°å¦‚æœç›¸åŒç»“æœå°±æ˜¯0ï¼Œä¸åŒåˆ™ç»“æœæ˜¯0.</p>
<p>ä¹Ÿå°±æ˜¯å¦‚æœâ¼€ä¸ªæ•°çš„æœ€ä½ä½æ˜¯0ï¼Œå¦â¼€ä¸ªæ•°çš„æœ€ä½ä½æ˜¯0ï¼Œé‚£ä¹ˆå¼‚æˆ–ç»“æœçš„æœ€ä½ä½æ˜¯0ï¼›å¦‚æœâ¼€ä¸ªæ•°çš„æœ€ä½ä½æ˜¯0ï¼Œå¦â¼€ä¸ªæ•°çš„æœ€ä½ä½æ˜¯1ï¼Œé‚£ä¹ˆå¼‚æˆ–ç»“æœçš„æœ€ä½ä½æ˜¯1ã€‚</p>
<p>å¼‚æˆ–æ“ä½œå¯ä»¥äº¤æ¢ï¼Œä¸å½±å“ç»“æœï¼šA^B^C = A^B^C</p>
<p>A^A=0,ä»»ä½•â¼€ä¸ªæ•°å¼‚æˆ–â¾ƒèº«ï¼Œç­‰äº0ï¼Œå› ä¸ºæ‰€æœ‰ä½éƒ½ç›¸åŒ</p>
<p>A^0 = Aï¼Œä»»ä½•â¼€ä¸ªæ•°å¼‚æˆ–0ï¼Œç­‰äºâ¾ƒèº«ï¼Œå› ä¸ºæ‰€æœ‰ä½å¦‚æœå’Œ0ä¸åŒï¼Œå°±æ˜¯1ï¼Œä¹Ÿå°±æ˜¯ä¿ç•™äº†â¾ƒèº«çš„æ•°å€¼</p>
<p>å‡è®¾â¾¥â¾¯å‡ºç°â¼€æ¬¡çš„ä¸¤ä¸ªå…ƒç´ ä¸º A å’Œ B ï¼Œåˆå§‹åŒ–å¼‚æˆ–ç»“æœ res ä¸º0ï¼Œéå†æ•°ç»„â¾¥â¾¯æ‰€æœ‰çš„æ•°ï¼Œéƒ½è¿›â¾å¼‚æˆ–æ“ä½œï¼Œåˆ™æœ€åç»“æœ res = A^B ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ª A å’Œ B å¼‚æˆ–ä¹‹åçš„ç»“æœï¼Œæ€ä¹ˆåŒºåˆ†å‘¢ï¼Ÿ</p>
<p>æœ‰â¼€ç§å·§å¦™çš„æ€è·¯ï¼Œå› ä¸º A å’Œ B çš„æŸâ¼€ä½ä¸åŒæ‰ä¼šåœ¨ç»“æœä¸­å‡ºç° 1 ï¼Œè¯´æ˜åœ¨é‚£â¼€ä½ä¸Šï¼Œ A å’Œ B ä¸­è‚¯å®šæœ‰â¼€ä¸ªæ˜¯ 0 ï¼Œæœ‰â¼€ä¸ªæ˜¯ 1 ã€‚</p>
<p>é‚£æˆ‘ä»¬å–å‡ºå¼‚æˆ–ç»“æœ res æœ€ä½ä½çš„1ï¼Œå‡è®¾è¿™ä¸ªæ•°å€¼æ˜¯ temp ï¼ˆtempåªæœ‰â¼€ä¸ªä½æ˜¯1ï¼Œä¹Ÿå°±æ˜¯Aå’ŒBæœ€åä¸åŒçš„ä½ï¼‰</p>
<p>éå†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå’Œ temp è¿›â¾ä¸æ“ä½œï¼Œå¦‚æœå’Œ temp ç›¸ä¸ï¼Œä¸ç­‰äº0ã€‚è¯´æ˜è¿™ä¸ªå…ƒç´ çš„è¯¥ä½ä¸Šä¹Ÿæ˜¯1ã€‚é‚£å°±è¯´æ˜å®ƒå¾ˆæœ‰å¯èƒ½å°±æ˜¯ A å’Œ B ä¸­çš„â¼€ä¸ªã€‚</p>
<p>åªæ˜¯æœ‰å¯èƒ½ï¼Œå…¶ä»–çš„æ•°ä¹Ÿæœ‰å¯èƒ½è¯¥ä½ä¸Šä¸º 1 ã€‚ä½†æ˜¯ç¬¦åˆè¿™ç§æƒ…å†µçš„ï¼Œå…¶ä»–æ•°è‚¯å®šå‡ºç°ä¸¤æ¬¡ï¼Œâ½½ A å’Œ Båªå¯èƒ½æœ‰â¼€ä¸ªç¬¦åˆï¼Œå¹¶ä¸”åªæœ‰å¯èƒ½å‡ºç°â¼€æ¬¡ A æˆ–è€… B ã€‚</p>
<p>å‡¡æ˜¯ç¬¦åˆå’Œ temp ç›¸ä¸,ç»“æœä¸ä¸º0çš„ï¼Œæˆ‘ä»¬è¿›â¾å¼‚æˆ–æ“ä½œã€‚</p>
<p>ä¹Ÿå°±æ˜¯å¯èƒ½å‡ºç°ï¼Œ res1 = B^C^D^C^D...^E^E^B æˆ–è€… res1 = A^C^D^C^D...^E^E ã€‚</p>
<p>ä¸Šâ¾¯çš„å¼â¼¦å¯ä»¥è§†ä¸º res1 = B æˆ–è€… res1 = A</p>
<p>è¿™æ ·æ“ä½œä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº† res1 è‚¯å®šæ˜¯å…¶ä¸­â¼€ä¸ªåªå‡ºç°â¼€æ¬¡çš„æ•°ï¼ˆ A æˆ–è€… B ï¼‰,â½½åŒæ—¶ä¸Šâ¾¯è®¡ç®—å‡ºäº† res = A^B ,ä¹Ÿå°±æ˜¯å¯ä»¥é€šè¿‡ res1^res æ±‚å‡ºå¦â¼€ä¸ªæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">FindNumsAppearOnce</span><span class="hljs-params">(<span class="hljs-type">int</span>[] array, <span class="hljs-type">int</span> num1[], <span class="hljs-type">int</span> num2[])</span> {
     <span class="hljs-comment">// Aå’ŒBå¼‚æˆ–çš„ç»“æœ</span>
     <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : array) {
     	res ^= val;
     }
    
     <span class="hljs-comment">// tempä¿å­˜äº†ä¸¤ä¸ªæ•°æœ€åâ¼€ä¸ªä¸åŒçš„ä½</span>
     <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> res &amp; (-res);
     <span class="hljs-comment">// ä¿å­˜å’Œæœ€åâ¼€ä¸ªä¸åŒçš„ä½å¼‚æˆ–çš„ç»“æœ</span>
     <span class="hljs-type">int</span> <span class="hljs-variable">res1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : array) {
         <span class="hljs-comment">// ä¸ç­‰äº0è¯´æ˜å¯èƒ½æ˜¯å…¶ä¸­â¼€ä¸ªæ•°ï¼Œâ¾„å°‘æ’é™¤äº†å¦å¤–â¼€ä¸ªæ•°</span>
         <span class="hljs-keyword">if</span> ((temp &amp; val) != <span class="hljs-number">0</span>) {
         	res1 ^= val;
         }
     }
     <span class="hljs-comment">// ç”±äºå…¶ä»–æ»¡â¾œæ¡ä»¶çš„æ•°å­—éƒ½å‡ºç°ä¸¤æ¬¡ï¼Œæ‰€ä»¥ç»“æœè‚¯å®šå°±æ˜¯åªå‡ºç°â¼€æ¬¡çš„æ•°</span>
     num1[<span class="hljs-number">0</span>] = res1;
     <span class="hljs-comment">// æ±‚å‡ºå¦å¤–â¼€ä¸ªæ•°</span>
     num2[<span class="hljs-number">0</span>] = res ^ res1;
 }
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œåªéœ€è¦éå†æ•°ç»„ä¸¤æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œåªä½¿ç”¨å›ºå®šæ•°é‡çš„å˜é‡</li>
</ul>
<h4 data-id="heading-5">ä½è¿ç®—åŸç†è§£æ</h4>
<p>é€šè¿‡ç¤ºä¾‹è¯¦ç»†è§£é‡Šç®—æ³•è¿‡ç¨‹ï¼š</p>
<p><strong>è¾“å…¥</strong>ï¼š<code>[92,3,43,54,92,43,2,2,54,1]</code>
<strong>å•æ¬¡æ•°</strong>ï¼š3 å’Œ 1</p>
<p><strong>æ­¥éª¤1ï¼šè®¡ç®—æ‰€æœ‰æ•°å­—çš„å¼‚æˆ–ç»“æœ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">92</span> ^ <span class="hljs-number">3</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">54</span> ^ <span class="hljs-number">92</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">2</span> ^ <span class="hljs-number">2</span> ^ <span class="hljs-number">54</span> ^ <span class="hljs-number">1</span>
= (<span class="hljs-number">92</span> ^ <span class="hljs-number">92</span>) ^ (<span class="hljs-number">43</span> ^ <span class="hljs-number">43</span>) ^ (<span class="hljs-number">2</span> ^ <span class="hljs-number">2</span>) ^ (<span class="hljs-number">54</span> ^ <span class="hljs-number">54</span>) ^ <span class="hljs-number">3</span> ^ <span class="hljs-number">1</span>
= <span class="hljs-number">0</span> ^ <span class="hljs-number">0</span> ^ <span class="hljs-number">0</span> ^ <span class="hljs-number">0</span> ^ (<span class="hljs-number">3</span> ^ <span class="hljs-number">1</span>)
= <span class="hljs-number">3</span> ^ <span class="hljs-number">1</span> = <span class="hljs-number">2</span>
</code></pre>
<p><strong>æ­¥éª¤2ï¼šæ‰¾åˆ°å¼‚æˆ–ç»“æœçš„æœ€ä½ä½çš„1</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">3</span>çš„äºŒè¿›åˆ¶: <span class="hljs-number">0011</span>
<span class="hljs-number">1</span>çš„äºŒè¿›åˆ¶: <span class="hljs-number">0001</span>
<span class="hljs-number">3</span>^<span class="hljs-number">1</span>=<span class="hljs-number">2</span>çš„äºŒè¿›åˆ¶: <span class="hljs-number">0010</span>
æœ€ä½ä½çš„<span class="hljs-number">1</span>åœ¨ä»å³å¾€å·¦ç¬¬<span class="hljs-number">2</span>ä½ï¼ˆå€¼ä¸º<span class="hljs-number">2</span>ï¼‰
</code></pre>
<p><strong>æ­¥éª¤3ï¼šæ ¹æ®æœ€ä½ä½1åˆ†ç»„</strong></p>
<ul>
<li><strong>ç¬¬1ç»„ï¼ˆç¬¬2ä½ä¸º0ï¼‰</strong>ï¼š3(0011), 43(101011), 54(110110), 1(0001), 92(1011100)</li>
<li><strong>ç¬¬2ç»„ï¼ˆç¬¬2ä½ä¸º1ï¼‰</strong>ï¼š2(0010)</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šåˆ†åˆ«å¼‚æˆ–å„ç»„</strong></p>
<pre><code class="hljs language-java" lang="java">ç¬¬<span class="hljs-number">1</span>ç»„: <span class="hljs-number">3</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">54</span> ^ <span class="hljs-number">1</span> ^ <span class="hljs-number">92</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">54</span> ^ <span class="hljs-number">92</span>
     = (<span class="hljs-number">3</span> ^ <span class="hljs-number">1</span>) ^ (<span class="hljs-number">43</span> ^ <span class="hljs-number">43</span>) ^ (<span class="hljs-number">54</span> ^ <span class="hljs-number">54</span>) ^ (<span class="hljs-number">92</span> ^ <span class="hljs-number">92</span>) 
     = <span class="hljs-number">3</span> ^ <span class="hljs-number">1</span> = <span class="hljs-number">2</span> âŒ è¿™é‡Œåº”è¯¥æ˜¯ <span class="hljs-number">3</span> ^ <span class="hljs-number">1</span> = <span class="hljs-number">2</span>ï¼Œä½†æˆ‘ä»¬éœ€è¦é‡æ–°è®¡ç®—æ­£ç¡®çš„åˆ†ç»„

è®©æˆ‘ä»¬é‡æ–°æ­£ç¡®åˆ†ç»„è®¡ç®—ï¼š
å®é™…åˆ†ç»„åº”è¯¥æ˜¯ï¼š
ç¬¬<span class="hljs-number">1</span>ç»„ï¼ˆç¬¬<span class="hljs-number">2</span>ä½ä¸º<span class="hljs-number">0</span>ï¼‰ï¼š<span class="hljs-number">3</span>, <span class="hljs-number">1</span>  <span class="hljs-comment">// åªæœ‰è¿™ä¸¤ä¸ªæ•°åœ¨ç¬¬2ä½ä¸º0ä¸”æ˜¯å•æ¬¡æ•°</span>
ç¬¬<span class="hljs-number">2</span>ç»„ï¼ˆç¬¬<span class="hljs-number">2</span>ä½ä¸º<span class="hljs-number">1</span>ï¼‰ï¼šæ‰€æœ‰å…¶ä»–æ•°

æ­£ç¡®çš„è®¡ç®—ï¼š
ç¬¬<span class="hljs-number">1</span>ç»„: <span class="hljs-number">3</span> ^ <span class="hljs-number">1</span> = <span class="hljs-number">2</span>
ç¬¬<span class="hljs-number">2</span>ç»„: <span class="hljs-number">92</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">54</span> ^ <span class="hljs-number">92</span> ^ <span class="hljs-number">43</span> ^ <span class="hljs-number">2</span> ^ <span class="hljs-number">2</span> ^ <span class="hljs-number">54</span> = <span class="hljs-number">0</span>
</code></pre>
<p><strong>ä½è¿ç®—ç‰¹æ€§åˆ©ç”¨ï¼š</strong></p>
<ul>
<li>ç›¸åŒæ•°å­—å¼‚æˆ–ä¸º0ï¼š<code>a ^ a = 0</code></li>
<li>ä»»ä½•æ•°ä¸0å¼‚æˆ–ä¸ºæœ¬èº«ï¼š<code>a ^ 0 = a</code></li>
<li>å¼‚æˆ–æ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NETé›†æˆé£ä¹¦APIæœ€ä½³å®è·µï¼šåŸºäºMud.Feishuçš„é£ä¹¦äºŒæ¬¡å¼€å‘å®è·µ]]></title>    <link>https://juejin.cn/post/7574318108720529454</link>    <guid>https://juejin.cn/post/7574318108720529454</guid>    <pubDate>2025-11-20T02:27:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108720529454" data-draft-id="7574322843049639986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NETé›†æˆé£ä¹¦APIæœ€ä½³å®è·µï¼šåŸºäºMud.Feishuçš„é£ä¹¦äºŒæ¬¡å¼€å‘å®è·µ"/> <meta itemprop="keywords" content=".NET,C#"/> <meta itemprop="datePublished" content="2025-11-20T02:27:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mudtools"/> <meta itemprop="url" content="https://juejin.cn/user/2112621078650964"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NETé›†æˆé£ä¹¦APIæœ€ä½³å®è·µï¼šåŸºäºMud.Feishuçš„é£ä¹¦äºŒæ¬¡å¼€å‘å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2112621078650964/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mudtools
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:27:21.000Z" title="Thu Nov 20 2025 02:27:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é£ä¹¦ä½œä¸ºä¸€æ¬¾é›†æˆåŒ–çš„åŠå…¬å¹³å°ï¼Œä¸ºä¼ä¸šæä¾›äº†å¼ºå¤§çš„ç»„ç»‡ç®¡ç†å’Œåä½œèƒ½åŠ›ã€‚å…¶ä¸­ï¼Œç»„ç»‡ç®¡ç†æ˜¯æ„å»ºé«˜æ•ˆå›¢é˜Ÿåä½œä½“ç³»çš„åŸºç¡€ç¯èŠ‚ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æå¦‚ä½•åœ¨é£ä¹¦å¹³å°ä¸Šè¿›è¡Œå…¨é¢çš„ç»„ç»‡ç®¡ç†ï¼ŒåŒ…æ‹¬éƒ¨é—¨ã€ç”¨æˆ·ã€ç”¨æˆ·è§’è‰²ã€èŒçº§ã€èŒä½ç­‰æ ¸å¿ƒè¦ç´ ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨é£ä¹¦APIè¿›è¡Œç»„ç»‡ç›¸å…³æ“ä½œã€‚</p>
</blockquote>
<h2 data-id="heading-0">Mud.Feishuæ¡†æ¶çš„ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fmudtools%2FMudFeishu" target="_blank" title="https://gitee.com/mudtools/MudFeishu" ref="nofollow noopener noreferrer">Mud.Feishu</a>æ˜¯ä¸€ä¸ªä¸“ä¸º.NETå¼€å‘è€…è®¾è®¡çš„é£ä¹¦APIé›†æˆç»„ä»¶åº“ï¼Œå®ƒå°è£…äº†é£ä¹¦å¼€æ”¾å¹³å°çš„å„ç§APIæ¥å£ï¼Œæä¾›äº†æ›´åŠ å‹å¥½å’Œæ˜“ç”¨çš„ç¼–ç¨‹æ¥å£ã€‚è¯¥ç»„ä»¶åŸºäºASP.NET Coreæ¡†æ¶å¼€å‘ï¼Œå……åˆ†åˆ©ç”¨äº†.NETç”Ÿæ€ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ç°ä»£åŒ–çš„å¼€å‘ä½“éªŒã€‚</p>
<h3 data-id="heading-1">æŠ€æœ¯æ¶æ„ä¸æ”¯æŒæ¡†æ¶</h3>
<p>Mud.Feishuç»„ä»¶å®Œå…¨åŸºäº.NETæ¡†æ¶æ„å»ºï¼Œå……åˆ†åˆ©ç”¨äº†å…¶ä¾èµ–æ³¨å…¥ã€é…ç½®ç®¡ç†ã€æ—¥å¿—è®°å½•ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ç»„ä»¶è®¾è®¡éµå¾ª.NETç”Ÿæ€ç³»ç»Ÿæœ€ä½³å®è·µï¼Œèƒ½å¤Ÿæ— ç¼é›†æˆåˆ°ASP.NET Coreåº”ç”¨ç¨‹åºä¸­ã€‚</p>
<p>åœ¨æœåŠ¡æ³¨å†Œæ–¹é¢ï¼ŒMud.Feishué‡‡ç”¨äº†æ ‡å‡†çš„ASP.NET Coreæ‰©å±•æ¨¡å¼ï¼Œé€šè¿‡<code>AddFeishuApiService("FeishuSettings")</code>æ–¹æ³•å°†é£ä¹¦æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡å®¹å™¨ä¸­ï¼Œå…¶ä¸­"FeishuSettings"ä¸ºappsettings.jsoné…ç½®æ–‡ä»¶ä¸­çš„é…ç½®èŠ‚åç§°ã€‚è¿™ç§è®¾è®¡æ–¹å¼ä½¿å¾—ç»„ä»¶é…ç½®æ›´åŠ æ¸…æ™°ï¼Œé¿å…äº†ç›´æ¥ä¼ é€’IConfigurationå¯¹è±¡å¯èƒ½å¸¦æ¥çš„é…ç½®æ··ä¹±é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸‰æ–¹åº“ä¾èµ–æƒ…å†µ</h3>
<p>Mud.Feishuç»„ä»¶åœ¨è®¾è®¡æ—¶å°½é‡å‡å°‘äº†å¯¹ç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ï¼Œä»¥é™ä½é¡¹ç›®çš„å¤æ‚æ€§å’Œæ½œåœ¨çš„ç‰ˆæœ¬å†²çªé£é™©ã€‚ä¸»è¦ä¾èµ–åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>System.Text.Json</strong> - ç”¨äºJSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™æ˜¯.NET Coreå†…ç½®çš„é«˜æ€§èƒ½JSONå¤„ç†åº“</li>
<li><strong>Microsoft.Extensions.Http</strong> - ç”¨äºé…ç½®å’Œç®¡ç†HTTPå®¢æˆ·ç«¯ï¼Œæä¾›è¿æ¥æ± ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰åŠŸèƒ½</li>
<li><strong>Microsoft.Extensions.Options</strong> - ç”¨äºå¼ºç±»å‹é…ç½®ç»‘å®šå’ŒéªŒè¯</li>
<li><strong>Microsoft.Extensions.Logging</strong> - ç”¨äºè®°å½•ç»„ä»¶è¿è¡Œæ—¥å¿—</li>
</ol>
<p>è¿™äº›ä¾èµ–éƒ½æ˜¯.NETç”Ÿæ€ç³»ç»Ÿä¸­çš„æ ‡å‡†ç»„ä»¶ï¼Œç¡®ä¿äº†ç»„ä»¶çš„ç¨³å®šæ€§å’Œå…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒç‰¹æ€§</h3>
<p>Mud.Feishuç»„ä»¶å…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li><strong>å…¨é¢çš„APIè¦†ç›–</strong> - æ”¯æŒé£ä¹¦å¼€æ”¾å¹³å°çš„ç»å¤§éƒ¨åˆ†APIï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€éƒ¨é—¨ç®¡ç†ã€æ¶ˆæ¯å‘é€ã€æ—¥å†ç®¡ç†ç­‰</li>
<li><strong>å¼ºç±»å‹æ”¯æŒ</strong> - æ‰€æœ‰APIè¯·æ±‚å’Œå“åº”éƒ½å…·æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œæä¾›å®Œæ•´çš„IntelliSenseæ”¯æŒ</li>
<li><strong>è‡ªåŠ¨ä»¤ç‰Œç®¡ç†</strong> - è‡ªåŠ¨å¤„ç†è®¿é—®ä»¤ç‰Œçš„è·å–ã€åˆ·æ–°å’Œç¼“å­˜ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒä»¤ç‰Œç»†èŠ‚</li>
<li><strong>å†…ç½®é‡è¯•æœºåˆ¶</strong> - å¯¹äºç½‘ç»œæŠ–åŠ¨ç­‰ä¸´æ—¶æ€§é”™è¯¯ï¼Œç»„ä»¶å†…ç½®äº†æ™ºèƒ½é‡è¯•æœºåˆ¶</li>
<li><strong>å®Œå–„çš„å¼‚å¸¸å¤„ç†</strong> - æä¾›äº†ä¸°å¯Œçš„å¼‚å¸¸ç±»å‹ï¼Œä¾¿äºå¼€å‘è€…è¿›è¡Œç²¾ç¡®çš„é”™è¯¯å¤„ç†</li>
<li><strong>å¯æ‰©å±•è®¾è®¡</strong> - é‡‡ç”¨æ¥å£æŠ½è±¡è®¾è®¡ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶å†…éƒ¨å®ç°</li>
</ol>
<h2 data-id="heading-4">ä¸åŸç”Ÿé£ä¹¦SDKçš„å¯¹æ¯”åˆ†æ</h2>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºMud.Feishuç»„ä»¶ç›¸å¯¹äºåŸç”ŸSDKçš„ä¼˜åŠ¿ï¼Œä¸‹é¢é€šè¿‡è¡¨æ ¼å½¢å¼è¿›è¡Œè¯¦ç»†å¯¹æ¯”ï¼š</p>



























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>åŸç”ŸSDKè°ƒç”¨</th><th>Mud.Feishuç»„ä»¶</th><th>ä¼˜åŠ¿è¯´æ˜</th></tr></thead><tbody><tr><td>å¼€å‘æ•ˆç‡</td><td>éœ€è¦æ‰‹åŠ¨æ„é€ HTTPè¯·æ±‚ã€å¤„ç†å“åº”ã€è§£æJSONç­‰å¤§é‡æ ·æ¿ä»£ç </td><td>åªéœ€è°ƒç”¨ç®€æ´çš„æ¥å£æ–¹æ³•ï¼Œä¸€è¡Œä»£ç å®Œæˆæ“ä½œ</td><td>å¤§å¹…å‡å°‘ä»£ç é‡ï¼Œæé«˜å¼€å‘æ•ˆç‡</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>æ‰‹åŠ¨å¤„ç†JSONåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œå®¹æ˜“å‡ºç°ç±»å‹è½¬æ¢é”™è¯¯</td><td>æä¾›å®Œæ•´çš„å¼ºç±»å‹æ”¯æŒï¼Œç¼–è¯‘æ—¶å°±èƒ½å‘ç°ç±»å‹é”™è¯¯</td><td>æé«˜ä»£ç å¥å£®æ€§ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯</td></tr><tr><td>ä»¤ç‰Œç®¡ç†</td><td>éœ€è¦æ‰‹åŠ¨è·å–ã€åˆ·æ–°å’Œç®¡ç†è®¿é—®ä»¤ç‰Œ</td><td>è‡ªåŠ¨å¤„ç†ä»¤ç‰Œè·å–å’Œåˆ·æ–°æœºåˆ¶</td><td>å‡å°‘å¼€å‘è€…è´Ÿæ‹…ï¼Œé¿å…ä»¤ç‰Œç®¡ç†é”™è¯¯</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>éœ€è¦æ‰‹åŠ¨å¤„ç†å„ç§ç½‘ç»œå¼‚å¸¸å’Œä¸šåŠ¡å¼‚å¸¸</td><td>æä¾›ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶å’Œæ˜ç¡®çš„å¼‚å¸¸ç±»å‹</td><td>ç®€åŒ–å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œæé«˜ä»£ç å¯è¯»æ€§</td></tr><tr><td>é‡è¯•æœºåˆ¶</td><td>éœ€è¦æ‰‹åŠ¨å®ç°é‡è¯•é€»è¾‘</td><td>å†…ç½®æ™ºèƒ½é‡è¯•æœºåˆ¶ï¼Œè‡ªåŠ¨å¤„ç†ç½‘ç»œæŠ–åŠ¨ç­‰é—®é¢˜</td><td>æé«˜ç³»ç»Ÿç¨³å®šæ€§</td></tr><tr><td>å¯æµ‹è¯•æ€§</td><td>ç›´æ¥è°ƒç”¨HTTPæ¥å£ï¼Œéš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•</td><td>åŸºäºæ¥å£è®¾è®¡ï¼Œæ˜“äºè¿›è¡ŒMockæµ‹è¯•</td><td>æé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§</td></tr><tr><td>æ–‡æ¡£å®Œå–„åº¦</td><td>éœ€è¦åœ¨é£ä¹¦å®˜æ–¹æ–‡æ¡£ä¸­æŸ¥æ‰¾å„ä¸ªæ¥å£çš„è¯¦ç»†è¯´æ˜</td><td>æä¾›å®Œæ•´çš„ä¸­æ–‡APIæ–‡æ¡£å’Œç¤ºä¾‹ä»£ç </td><td>é™ä½å­¦ä¹ æˆæœ¬ï¼Œå¿«é€Ÿä¸Šæ‰‹</td></tr><tr><td>ä¾èµ–ç®¡ç†</td><td>éœ€è¦è‡ªè¡Œå¼•å…¥å’Œç®¡ç†å„ç§ç¬¬ä¸‰æ–¹åº“</td><td>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¾èµ–ï¼Œé¿å…ç‰ˆæœ¬å†²çª</td><td>ç®€åŒ–é¡¹ç›®ä¾èµ–ç®¡ç†</td></tr></tbody></table>
<p>é€šè¿‡ä»¥ä¸Šå¯¹æ¯”ï¼ŒMud.Feishuç»„ä»¶åœ¨å„ä¸ªæ–¹é¢éƒ½ä¼˜äºåŸç”ŸSDKè°ƒç”¨æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡æ–¹é¢æœ‰æ˜¾è‘—æå‡ã€‚</p>
<p>ä½¿ç”¨Mud.Feishuçš„ç®€å•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨Mud.Feishu</span>
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _feishuUserApi.CreateUserAsync(token, userRequest);

<span class="hljs-comment">// åŸç”Ÿæ–¹å¼éœ€è¦å¤§é‡æ ·æ¿ä»£ç </span>
<span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> HttpClient();
<span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> HttpRequestMessage(HttpMethod.Post, <span class="hljs-string">"https://open.feishu.cn/open-apis/contact/v3/users"</span>);
request.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">$"Bearer <span class="hljs-subst">{token}</span>"</span>);
<span class="hljs-keyword">var</span> json = JsonSerializer.Serialize(userRequest);
request.Content = <span class="hljs-keyword">new</span> StringContent(json, Encoding.UTF8, <span class="hljs-string">"application/json"</span>);
<span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> client.SendAsync(request);
<span class="hljs-comment">// ... æ›´å¤šå¤„ç†ä»£ç </span>
</code></pre>
<h3 data-id="heading-5">Mud.Feishu çš„æ¶æ„è®¾è®¡</h3>
<p>Mud.Feishu é‡‡ç”¨ç°ä»£åŒ–çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå°†å¤æ‚çš„ HTTP é€šä¿¡ç»†èŠ‚å°è£…ä¸ºç®€å•æ˜“ç”¨çš„ API æ¥å£ï¼Œæ¶æ„å±‚æ¬¡å›¾å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-6">æ¶æ„å±‚æ¬¡å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application Layer)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Controller    â”‚  â”‚    Service      â”‚  â”‚   Repository    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API æŠ½è±¡å±‚ (API Abstraction)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IFeishuV3User   â”‚  â”‚ IFeishuV3Dept   â”‚  â”‚ IFeishuV3Role   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ ¸å¿ƒæœåŠ¡å±‚ (Core Services)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TokenManager    â”‚  â”‚ HttpClient      â”‚  â”‚ ErrorHandler    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŸºç¡€è®¾æ–½å±‚ (Infrastructure)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Caching       â”‚  â”‚   Logging       â”‚  â”‚ Configuration   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-7">å¿«é€Ÿå…¥é—¨</h2>
<h3 data-id="heading-8">å®‰è£…Mud.Feishu</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…Mud.Feishuç»„ä»¶åº“ã€‚å¯ä»¥é€šè¿‡NuGetåŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">dotnet add package Mud.Feishu
</code></pre>
<h3 data-id="heading-9">é…ç½®é£ä¹¦åº”ç”¨</h3>
<p>åœ¨å¼€å§‹ä½¿ç”¨é£ä¹¦APIä¹‹å‰ï¼Œæ‚¨éœ€è¦åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶è·å–AppIdå’ŒAppSecretã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç™»å½•é£ä¹¦å¼€æ”¾å¹³å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2F%3Flang%3Dzh-CN" target="_blank" title="https://open.feishu.cn/?lang=zh-CN" ref="nofollow noopener noreferrer">é£ä¹¦å¼€æ”¾å¹³å°</a>ï¼‰</li>
<li>åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨</li>
<li>è·å–AppIdå’ŒAppSecret</li>
<li>é…ç½®åº”ç”¨æƒé™ï¼Œç¡®ä¿å¼€é€šäº†æ‰€éœ€çš„APIæƒé™</li>
</ol>
<h3 data-id="heading-10">é…ç½®æœåŠ¡æ³¨å†Œ</h3>
<p>åœ¨ASP.NET Coreåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Program.csä¸­æ³¨å†Œé£ä¹¦æœåŠ¡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

<span class="hljs-comment">// æ·»åŠ é£ä¹¦æœåŠ¡</span>
builder.Services.AddFeishuApiService(<span class="hljs-string">"Feishu"</span>)
                .AddLogging(option =&gt; option.AddConsole());

<span class="hljs-keyword">var</span> app = builder.Build();
</code></pre>
<h3 data-id="heading-11">é…ç½®æ–‡ä»¶è®¾ç½®</h3>
<p>åœ¨appsettings.jsonä¸­æ·»åŠ é£ä¹¦é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"LogLevel"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Information"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Microsoft.AspNetCore"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Warning"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"AllowedHosts"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"*"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Feishu"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"AppId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_feishu_app_id"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"AppSecret"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_feishu_app_secret"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"BaseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://open.feishu.cn"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-12">å¦‚ä½•ä¸ASP.NET Coreé›†æˆ</h2>
<p>Mud.Feishuç»„ä»¶è®¾è®¡æ—¶å……åˆ†è€ƒè™‘äº†ä¸ASP.NET Coreçš„é›†æˆï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨é£ä¹¦APIã€‚</p>
<h3 data-id="heading-13">æ§åˆ¶å™¨æ³¨å…¥ç¤ºä¾‹</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> Mud.Feishu;

[<span class="hljs-meta">ApiController</span>]
[<span class="hljs-meta">Route(<span class="hljs-string">"api/[controller]"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FeishuController</span> : <span class="hljs-title">ControllerBase</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3AuthenticationApi _authApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3UserApi _userApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3DepartmentsApi _departmentsApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3RoleApi _roleApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3JobLevelApi _jobLevelApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3JobTitleApi _jobTitleApi;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FeishuController</span>(<span class="hljs-params">
        IFeishuV3AuthenticationApi authApi, 
        IFeishuV3UserApi userApi,
        IFeishuV3DepartmentsApi departmentsApi,
        IFeishuV3RoleApi roleApi,
        IFeishuV3JobLevelApi jobLevelApi,
        IFeishuV3JobTitleApi jobTitleApi</span>)</span>
    {
        _authApi = authApi;
        _userApi = userApi;
        _departmentsApi = departmentsApi;
        _roleApi = roleApi;
        _jobLevelApi = jobLevelApi;
        _jobTitleApi = jobTitleApi;
    }
}
</code></pre>
<h3 data-id="heading-14">æœåŠ¡å±‚ä½¿ç”¨ç¤ºä¾‹</h3>
<p>é™¤äº†åœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æœåŠ¡å±‚ä¸­ä½¿ç”¨é£ä¹¦APIï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrganizationService</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3DepartmentsApi _departmentsApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3UserApi _userApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ITokenManager _tokenManager;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OrganizationService</span>(<span class="hljs-params">
        IFeishuV3DepartmentsApi departmentsApi,
        IFeishuV3UserApi userApi,
        ITokenManager tokenManager</span>)</span>
    {
        _departmentsApi = departmentsApi;
        _userApi = userApi;
        _tokenManager = tokenManager;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">CreateDepartmentAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> departmentName, <span class="hljs-built_in">string</span> parentId</span>)</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> DepartmentCreateRequest
        {
            Name = departmentName,
            ParentDepartmentId = parentId
        };

        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _departmentsApi.CreateDepartmentAsync(token, request);
        <span class="hljs-keyword">return</span> result.Data.Department.Id;
    }
}
</code></pre>
<h2 data-id="heading-15">éƒ¨é—¨ç®¡ç†è¯¦è§£</h2>
<p>éƒ¨é—¨æ˜¯ç»„ç»‡æ¶æ„çš„åŸºæœ¬å•ä½ï¼Œåœ¨é£ä¹¦å¹³å°ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚é€šè¿‡éƒ¨é—¨ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºæ¸…æ™°çš„ç»„ç»‡æ¶æ„ï¼Œä¾¿äºäººå‘˜ç®¡ç†å’Œæƒé™æ§åˆ¶ã€‚</p>
<h3 data-id="heading-16">åˆ›å»ºéƒ¨é—¨</h3>
<p>åˆ›å»ºéƒ¨é—¨æ˜¯ç»„ç»‡ç®¡ç†çš„åŸºç¡€æ“ä½œä¹‹ä¸€ã€‚é£ä¹¦æä¾›äº†å®Œæ•´çš„éƒ¨é—¨åˆ›å»ºæ¥å£ï¼Œæ”¯æŒè®¾ç½®éƒ¨é—¨åç§°ã€çˆ¶éƒ¨é—¨ã€è´Ÿè´£äººç­‰ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºéƒ¨é—¨ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPost(<span class="hljs-string">"departments"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">CreateDepartment</span>(<span class="hljs-params">[FromBody] DepartmentCreateRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _departmentsApi.CreateDepartmentAsync(token, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Id = result.Data.Department.Id, Message = <span class="hljs-string">"éƒ¨é—¨åˆ›å»ºæˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-17">æ›´æ–°éƒ¨é—¨ä¿¡æ¯</h3>
<p>éšç€ç»„ç»‡å‘å±•ï¼Œéƒ¨é—¨ä¿¡æ¯å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦æ›´æ–°éƒ¨é—¨ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ›´æ–°éƒ¨é—¨ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPut(<span class="hljs-string">"departments/{departmentId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">UpdateDepartment</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> departmentId, [FromBody] DepartmentUpdateRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _departmentsApi.UpdateDepartmentAsync(token, departmentId, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"éƒ¨é—¨ä¿¡æ¯æ›´æ–°æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-18">è·å–éƒ¨é—¨ä¿¡æ¯</h3>
<p>è·å–éƒ¨é—¨ä¿¡æ¯æ˜¯æ—¥å¸¸ç®¡ç†ä¸­æœ€é¢‘ç¹çš„æ“ä½œä¹‹ä¸€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–éƒ¨é—¨ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"departments/{departmentId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetDepartment</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> departmentId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _departmentsApi.GetDepartmentInfoByIdAsync(token, departmentId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.Department);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-19">è·å–å­éƒ¨é—¨åˆ—è¡¨</h3>
<p>è·å–æŸä¸ªéƒ¨é—¨ä¸‹çš„æ‰€æœ‰å­éƒ¨é—¨ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–å­éƒ¨é—¨åˆ—è¡¨ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"departments/{departmentId}/children"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetSubDepartments</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> departmentId, <span class="hljs-built_in">bool</span> fetchChild = <span class="hljs-literal">false</span></span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _departmentsApi.GetDepartmentsByParentIdAsync(
            token, 
            departmentId, 
            fetchChild: fetchChild);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.Departments);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h2 data-id="heading-20">ç”¨æˆ·ç®¡ç†è¯¦è§£</h2>
<p>ç”¨æˆ·æ˜¯ç»„ç»‡ä¸­çš„åŸºæœ¬å…ƒç´ ï¼Œç”¨æˆ·ç®¡ç†æ˜¯ç»„ç»‡ç®¡ç†çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚é£ä¹¦æä¾›äº†å®Œå–„çš„ç”¨æˆ·ç®¡ç†APIï¼Œæ”¯æŒç”¨æˆ·çš„åˆ›å»ºã€æ›´æ–°ã€æŸ¥è¯¢ã€åˆ é™¤ç­‰æ“ä½œã€‚</p>
<h3 data-id="heading-21">åˆ›å»ºç”¨æˆ·</h3>
<p>åˆ›å»ºç”¨æˆ·æ˜¯ç”¨æˆ·ç®¡ç†ä¸­æœ€åŸºç¡€çš„æ“ä½œä¹‹ä¸€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºç”¨æˆ·ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPost(<span class="hljs-string">"users"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">CreateUser</span>(<span class="hljs-params">[FromBody] CreateUserRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„å®¢æˆ·ç«¯ä»¤ç‰Œä»¥é˜²é‡å¤æäº¤</span>
        <span class="hljs-keyword">var</span> clientToken = Guid.NewGuid().ToString();
        
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _userApi.CreateUserAsync(
            token, 
            request, 
            client_token: clientToken);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { UserId = result.Data.User.UserId, Message = <span class="hljs-string">"ç”¨æˆ·åˆ›å»ºæˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-22">æ›´æ–°ç”¨æˆ·ä¿¡æ¯</h3>
<p>æ›´æ–°ç”¨æˆ·ä¿¡æ¯ä»¥åæ˜ å‘˜å·¥çŠ¶æ€å˜åŒ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ›´æ–°ç”¨æˆ·ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPut(<span class="hljs-string">"users/{userId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">UpdateUser</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> userId, [FromBody] UpdateUserRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _userApi.UpdateUser_Tenant_Async(token, userId, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-23">æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</h3>
<p>è·å–ç‰¹å®šç”¨æˆ·çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–ç”¨æˆ·ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"users/{userId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetUser</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> userId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _userApi.GetUserInfoById_Tenant_Async(token, userId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.User);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-24">åˆ é™¤ç”¨æˆ·</h3>
<p>å½“å‘˜å·¥ç¦»èŒæ—¶ï¼Œéœ€è¦å°†å…¶ä»ç»„ç»‡æ¶æ„ä¸­ç§»é™¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ é™¤ç”¨æˆ·ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpDelete(<span class="hljs-string">"users/{userId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">DeleteUser</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> userId, [FromBody] DeleteSettingsRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _userApi.DeleteUserByIdAsync(token, userId, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"ç”¨æˆ·åˆ é™¤æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h2 data-id="heading-25">ç”¨æˆ·è§’è‰²ç®¡ç†è¯¦è§£</h2>
<p>è§’è‰²ç®¡ç†æ˜¯æƒé™æ§åˆ¶ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡ä¸ºç”¨æˆ·åˆ†é…ä¸åŒçš„è§’è‰²ï¼Œå¯ä»¥å®ç°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ã€‚</p>
<h3 data-id="heading-26">åˆ›å»ºè§’è‰²</h3>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„è§’è‰²ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºè§’è‰²ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPost(<span class="hljs-string">"roles"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">CreateRole</span>(<span class="hljs-params">[FromBody] RoleRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _roleApi.CreateRoleAsync(token, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { RoleId = result.Data.Role.Id, Message = <span class="hljs-string">"è§’è‰²åˆ›å»ºæˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-27">æ›´æ–°è§’è‰²</h3>
<p>æ›´æ–°è§’è‰²ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ›´æ–°è§’è‰²ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPut(<span class="hljs-string">"roles/{roleId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">UpdateRole</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> roleId, [FromBody] RoleRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _roleApi.UpdateRoleAsync(token, roleId, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"è§’è‰²æ›´æ–°æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-28">åˆ é™¤è§’è‰²</h3>
<p>åˆ é™¤ä¸å†éœ€è¦çš„è§’è‰²ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ é™¤è§’è‰²ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpDelete(<span class="hljs-string">"roles/{roleId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">DeleteRole</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> roleId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _roleApi.DeleteRoleByIdAsync(token, roleId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"è§’è‰²åˆ é™¤æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h2 data-id="heading-29">èŒçº§ç®¡ç†è¯¦è§£</h2>
<p>èŒçº§æ˜¯ç»„ç»‡ä¸­è¡¨ç¤ºå‘˜å·¥å±‚çº§å…³ç³»çš„é‡è¦æ¦‚å¿µï¼Œé€šè¿‡èŒçº§ç®¡ç†å¯ä»¥å»ºç«‹æ¸…æ™°çš„æ™‹å‡é€šé“ã€‚</p>
<h3 data-id="heading-30">åˆ›å»ºèŒçº§</h3>
<p>åˆ›å»ºæ–°çš„èŒçº§ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºèŒçº§ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPost(<span class="hljs-string">"joblevels"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">CreateJobLevel</span>(<span class="hljs-params">[FromBody] JobLevelCreateUpdateRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobLevelApi.CreateJobLevelAsync(token, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { JobLevelId = result.Data.JobLevel.Id, Message = <span class="hljs-string">"èŒçº§åˆ›å»ºæˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-31">æ›´æ–°èŒçº§</h3>
<p>æ›´æ–°èŒçº§ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ›´æ–°èŒçº§ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpPut(<span class="hljs-string">"joblevels/{jobLevelId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">UpdateJobLevel</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> jobLevelId, [FromBody] JobLevelCreateUpdateRequest request</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobLevelApi.UpdateJobLevelAsync(token, jobLevelId, request);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"èŒçº§æ›´æ–°æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-32">è·å–èŒçº§ä¿¡æ¯</h3>
<p>è·å–ç‰¹å®šèŒçº§çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–èŒçº§ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"joblevels/{jobLevelId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetJobLevel</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> jobLevelId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobLevelApi.GetJobLevelByIdAsync(token, jobLevelId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.JobLevel);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-33">åˆ é™¤èŒçº§</h3>
<p>åˆ é™¤ä¸å†ä½¿ç”¨çš„èŒçº§ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ é™¤èŒçº§ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpDelete(<span class="hljs-string">"joblevels/{jobLevelId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">DeleteJobLevel</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> jobLevelId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobLevelApi.DeleteJobLevelByIdAsync(token, jobLevelId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> { Message = <span class="hljs-string">"èŒçº§åˆ é™¤æˆåŠŸ"</span> });
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h2 data-id="heading-34">èŒä½ç®¡ç†è¯¦è§£</h2>
<p>èŒä½æ˜¯å¯¹å‘˜å·¥åœ¨ç»„ç»‡ä¸­æ‰¿æ‹…çš„å…·ä½“å·¥ä½œçš„æè¿°ï¼Œé€šè¿‡èŒä½ç®¡ç†å¯ä»¥æ˜ç¡®å‘˜å·¥èŒè´£ã€‚</p>
<h3 data-id="heading-35">è·å–èŒä½åˆ—è¡¨</h3>
<p>è·å–å½“å‰ç§Ÿæˆ·ä¸‹çš„èŒä½åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–èŒä½åˆ—è¡¨ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"jobtitles"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetJobTitles</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> pageSize = <span class="hljs-number">10</span>, <span class="hljs-built_in">string</span>? pageToken = <span class="hljs-literal">null</span></span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobTitleApi.GetTenantJobTitlesListAsync(token, pageSize, pageToken);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.JobTitles);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h3 data-id="heading-36">è·å–ç‰¹å®šèŒä½ä¿¡æ¯</h3>
<p>è·å–ç‰¹å®šèŒä½çš„è¯¦ç»†ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–èŒä½ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"jobtitles/{jobTitleId}"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetJobTitle</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> jobTitleId</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _jobTitleApi.GetTenantJobTitleByIdAsync(token, jobTitleId);
        
        <span class="hljs-keyword">if</span> (result.Success)
        {
            <span class="hljs-keyword">return</span> Ok(result.Data.JobTitle);
        }
        
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = result.Message });
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = ex.Message });
    }
}
</code></pre>
<h2 data-id="heading-37">å®Œæ•´ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„ã€è´´è¿‘çœŸå®åœºæ™¯çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨Mud.Feishuç»„ä»¶è¿›è¡Œå®Œæ•´çš„ç»„ç»‡ç®¡ç†æ“ä½œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Threading.Tasks;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> Mud.Feishu;
<span class="hljs-keyword">using</span> Mud.Feishu.DataModels.Departments.RequestModel;
<span class="hljs-keyword">using</span> Mud.Feishu.DataModels.Employees.RequestModel;
<span class="hljs-keyword">using</span> Mud.Feishu.DataModels.JobLevel;
<span class="hljs-keyword">using</span> Mud.Feishu.DataModels.Roles;
<span class="hljs-keyword">using</span> Mud.Feishu.DataModels.Users;

<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ç»„ç»‡ç®¡ç†ç»¼åˆç¤ºä¾‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Mud.Feishuè¿›è¡Œå®Œæ•´çš„ç»„ç»‡ç®¡ç†æ“ä½œ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
[<span class="hljs-meta">ApiController</span>]
[<span class="hljs-meta">Route(<span class="hljs-string">"api/[controller]"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrganizationManagementController</span> : <span class="hljs-title">ControllerBase</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3DepartmentsApi _departmentsApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3UserApi _userApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3RoleApi _roleApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3JobLevelApi _jobLevelApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IFeishuV3JobTitleApi _jobTitleApi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ITokenManager _tokenManager;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OrganizationManagementController</span>(<span class="hljs-params">
        IFeishuV3DepartmentsApi departmentsApi,
        IFeishuV3UserApi userApi,
        IFeishuV3RoleApi roleApi,
        IFeishuV3JobLevelApi jobLevelApi,
        IFeishuV3JobTitleApi jobTitleApi,
        ITokenManager tokenManager</span>)</span>
    {
        _departmentsApi = departmentsApi;
        _userApi = userApi;
        _roleApi = roleApi;
        _jobLevelApi = jobLevelApi;
        _jobTitleApi = jobTitleApi;
        _tokenManager = tokenManager;
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> åˆå§‹åŒ–ç»„ç»‡æ¶æ„ç¤ºä¾‹</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºéƒ¨é—¨ã€èŒä½ã€èŒçº§ã€è§’è‰²ç­‰åŸºç¡€æ•°æ®</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    [<span class="hljs-meta">HttpPost(<span class="hljs-string">"initialize"</span>)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">InitializeOrganization</span>()</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
            
            <span class="hljs-comment">// 1. åˆ›å»ºæ ¹éƒ¨é—¨ - å…¬å¸</span>
            <span class="hljs-keyword">var</span> companyRequest = <span class="hljs-keyword">new</span> DepartmentCreateRequest
            {
                Name = <span class="hljs-string">"æŸæŸç§‘æŠ€æœ‰é™å…¬å¸"</span>,
                ParentDepartmentId = <span class="hljs-string">"0"</span>, <span class="hljs-comment">// æ ¹éƒ¨é—¨</span>
                LeaderUserId = <span class="hljs-string">""</span>
            };
            
            <span class="hljs-keyword">var</span> companyResult = <span class="hljs-keyword">await</span> _departmentsApi.CreateDepartmentAsync(token, companyRequest);
            <span class="hljs-keyword">if</span> (!companyResult.Success)
            {
                <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆ›å»ºå…¬å¸éƒ¨é—¨å¤±è´¥: <span class="hljs-subst">{companyResult.Message}</span>"</span> });
            }
            
            <span class="hljs-keyword">var</span> companyId = companyResult.Data.Department.Id;
            
            <span class="hljs-comment">// 2. åˆ›å»ºå­éƒ¨é—¨</span>
            <span class="hljs-keyword">var</span> departments = <span class="hljs-keyword">new</span>[]
            {
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"æŠ€æœ¯éƒ¨"</span>, ParentId = companyId },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"äº§å“éƒ¨"</span>, ParentId = companyId },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"å¸‚åœºéƒ¨"</span>, ParentId = companyId },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"äººäº‹éƒ¨"</span>, ParentId = companyId }
            };
            
            <span class="hljs-keyword">var</span> departmentIds = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> dept <span class="hljs-keyword">in</span> departments)
            {
                <span class="hljs-keyword">var</span> deptRequest = <span class="hljs-keyword">new</span> DepartmentCreateRequest
                {
                    Name = dept.Name,
                    ParentDepartmentId = dept.ParentId
                };
                
                <span class="hljs-keyword">var</span> deptResult = <span class="hljs-keyword">await</span> _departmentsApi.CreateDepartmentAsync(token, deptRequest);
                <span class="hljs-keyword">if</span> (deptResult.Success)
                {
                    departmentIds[dept.Name] = deptResult.Data.Department.Id;
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆ›å»ºéƒ¨é—¨ <span class="hljs-subst">{dept.Name}</span> å¤±è´¥: <span class="hljs-subst">{deptResult.Message}</span>"</span> });
                }
            }
            
            <span class="hljs-comment">// 3. åˆ›å»ºèŒçº§</span>
            <span class="hljs-keyword">var</span> jobLevels = <span class="hljs-keyword">new</span>[]
            {
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"åˆçº§å·¥ç¨‹å¸ˆ"</span>, Level = <span class="hljs-number">1</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"ä¸­çº§å·¥ç¨‹å¸ˆ"</span>, Level = <span class="hljs-number">2</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"é«˜çº§å·¥ç¨‹å¸ˆ"</span>, Level = <span class="hljs-number">3</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"æŠ€æœ¯ä¸“å®¶"</span>, Level = <span class="hljs-number">4</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"é¦–å¸­æŠ€æœ¯å®˜"</span>, Level = <span class="hljs-number">5</span> }
            };
            
            <span class="hljs-keyword">var</span> jobLevelIds = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> jl <span class="hljs-keyword">in</span> jobLevels)
            {
                <span class="hljs-keyword">var</span> jobLevelRequest = <span class="hljs-keyword">new</span> JobLevelCreateUpdateRequest
                {
                    Name = jl.Name,
                    Level = jl.Level,
                    Description = <span class="hljs-string">$"<span class="hljs-subst">{jl.Name}</span>èŒçº§æè¿°"</span>
                };
                
                <span class="hljs-keyword">var</span> jobLevelResult = <span class="hljs-keyword">await</span> _jobLevelApi.CreateJobLevelAsync(token, jobLevelRequest);
                <span class="hljs-keyword">if</span> (jobLevelResult.Success)
                {
                    jobLevelIds[jl.Name] = jobLevelResult.Data.JobLevel.Id;
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆ›å»ºèŒçº§ <span class="hljs-subst">{jl.Name}</span> å¤±è´¥: <span class="hljs-subst">{jobLevelResult.Message}</span>"</span> });
                }
            }
            
            <span class="hljs-comment">// 4. åˆ›å»ºè§’è‰²</span>
            <span class="hljs-keyword">var</span> roles = <span class="hljs-keyword">new</span>[]
            {
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"ç®¡ç†å‘˜"</span>, Description = <span class="hljs-string">"ç³»ç»Ÿç®¡ç†å‘˜"</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"éƒ¨é—¨ç»ç†"</span>, Description = <span class="hljs-string">"éƒ¨é—¨è´Ÿè´£äºº"</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"æ™®é€šå‘˜å·¥"</span>, Description = <span class="hljs-string">"ä¸€èˆ¬å‘˜å·¥"</span> }
            };
            
            <span class="hljs-keyword">var</span> roleIds = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> r <span class="hljs-keyword">in</span> roles)
            {
                <span class="hljs-keyword">var</span> roleRequest = <span class="hljs-keyword">new</span> RoleRequest
                {
                    RoleName = r.Name,
                    DisplayName = r.Description
                };
                
                <span class="hljs-keyword">var</span> roleResult = <span class="hljs-keyword">await</span> _roleApi.CreateRoleAsync(token, roleRequest);
                <span class="hljs-keyword">if</span> (roleResult.Success)
                {
                    roleIds[r.Name] = roleResult.Data.Role.Id;
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆ›å»ºè§’è‰² <span class="hljs-subst">{r.Name}</span> å¤±è´¥: <span class="hljs-subst">{roleResult.Message}</span>"</span> });
                }
            }
            
            <span class="hljs-comment">// 5. åˆ›å»ºä¸€äº›ç¤ºä¾‹ç”¨æˆ·</span>
            <span class="hljs-keyword">var</span> users = <span class="hljs-keyword">new</span>[]
            {
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"å¼ ä¸‰"</span>, Department = <span class="hljs-string">"æŠ€æœ¯éƒ¨"</span>, JobLevel = <span class="hljs-string">"é«˜çº§å·¥ç¨‹å¸ˆ"</span>, Role = <span class="hljs-string">"ç®¡ç†å‘˜"</span>, Mobile = <span class="hljs-string">"13800138001"</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"æå››"</span>, Department = <span class="hljs-string">"äº§å“éƒ¨"</span>, JobLevel = <span class="hljs-string">"ä¸­çº§å·¥ç¨‹å¸ˆ"</span>, Role = <span class="hljs-string">"éƒ¨é—¨ç»ç†"</span>, Mobile = <span class="hljs-string">"13800138002"</span> },
                <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">"ç‹äº”"</span>, Department = <span class="hljs-string">"å¸‚åœºéƒ¨"</span>, JobLevel = <span class="hljs-string">"åˆçº§å·¥ç¨‹å¸ˆ"</span>, Role = <span class="hljs-string">"æ™®é€šå‘˜å·¥"</span>, Mobile = <span class="hljs-string">"13800138003"</span> }
            };
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> u <span class="hljs-keyword">in</span> users)
            {
                <span class="hljs-keyword">var</span> userRequest = <span class="hljs-keyword">new</span> CreateUserRequest
                {
                    Name = u.Name,
                    Mobile = u.Mobile,
                    DepartmentIds = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt; { departmentIds[u.Department] },
                    JobLevelId = jobLevelIds[u.JobLevel],
                    EmployeeType = <span class="hljs-number">1</span> <span class="hljs-comment">// æ­£å¼å‘˜å·¥</span>
                };
                
                <span class="hljs-keyword">var</span> clientToken = Guid.NewGuid().ToString();
                <span class="hljs-keyword">var</span> userResult = <span class="hljs-keyword">await</span> _userApi.CreateUserAsync(token, userRequest, client_token: clientToken);
                <span class="hljs-keyword">if</span> (!userResult.Success)
                {
                    <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆ›å»ºç”¨æˆ· <span class="hljs-subst">{u.Name}</span> å¤±è´¥: <span class="hljs-subst">{userResult.Message}</span>"</span> });
                }
            }
            
            <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> 
            { 
                Message = <span class="hljs-string">"ç»„ç»‡æ¶æ„åˆå§‹åŒ–æˆåŠŸ"</span>,
                Departments = departmentIds,
                JobLevels = jobLevelIds,
                Roles = roleIds
            });
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"åˆå§‹åŒ–ç»„ç»‡æ¶æ„æ—¶å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span> });
        }
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ·»åŠ æ–°å‘˜å·¥ç¤ºä¾‹</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    [<span class="hljs-meta">HttpPost(<span class="hljs-string">"employees"</span>)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">AddEmployee</span>(<span class="hljs-params">[FromBody] EmployeeCreateRequest request</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
            
            <span class="hljs-comment">// åˆ›å»ºç”¨æˆ·</span>
            <span class="hljs-keyword">var</span> userRequest = <span class="hljs-keyword">new</span> CreateUserRequest
            {
                Name = request.Name,
                Mobile = request.Mobile,
                Email = request.Email,
                DepartmentIds = request.DepartmentIds,
                JobLevelId = request.JobLevelId,
                EmployeeType = request.EmployeeType,
                JoinTime = request.JoinTime
            };
            
            <span class="hljs-keyword">var</span> clientToken = Guid.NewGuid().ToString();
            <span class="hljs-keyword">var</span> userResult = <span class="hljs-keyword">await</span> _userApi.CreateUserAsync(token, userRequest, client_token: clientToken);
            
            <span class="hljs-keyword">if</span> (userResult.Success)
            {
                <span class="hljs-keyword">return</span> Ok(<span class="hljs-keyword">new</span> 
                { 
                    UserId = userResult.Data.User.UserId, 
                    Message = <span class="hljs-string">"å‘˜å·¥æ·»åŠ æˆåŠŸ"</span> 
                });
            }
            
            <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"æ·»åŠ å‘˜å·¥å¤±è´¥: <span class="hljs-subst">{userResult.Message}</span>"</span> });
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"æ·»åŠ å‘˜å·¥æ—¶å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span> });
        }
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> è·å–ç»„ç»‡æ¶æ„æ ‘ç¤ºä¾‹</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    [<span class="hljs-meta">HttpGet(<span class="hljs-string">"structure"</span>)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetOrganizationStructure</span>()</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">await</span> _tokenManager.GetTokenAsync();
            
            <span class="hljs-comment">// è·å–æ ¹éƒ¨é—¨</span>
            <span class="hljs-keyword">var</span> rootDepartments = <span class="hljs-keyword">await</span> _departmentsApi.GetDepartmentsByParentIdAsync(token, <span class="hljs-string">"0"</span>);
            <span class="hljs-keyword">if</span> (!rootDepartments.Success)
            {
                <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"è·å–æ ¹éƒ¨é—¨å¤±è´¥: <span class="hljs-subst">{rootDepartments.Message}</span>"</span> });
            }
            
            <span class="hljs-keyword">var</span> structure = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">object</span>&gt;();
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> rootDept <span class="hljs-keyword">in</span> rootDepartments.Data.Departments)
            {
                <span class="hljs-keyword">var</span> deptStructure = <span class="hljs-keyword">await</span> BuildDepartmentStructure(token, rootDept.Id);
                structure.Add(deptStructure);
            }
            
            <span class="hljs-keyword">return</span> Ok(structure);
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            <span class="hljs-keyword">return</span> BadRequest(<span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"è·å–ç»„ç»‡æ¶æ„æ—¶å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span> });
        }
    }
    
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é€’å½’æ„å»ºéƒ¨é—¨ç»“æ„æ ‘</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">object</span>&gt; <span class="hljs-title">BuildDepartmentStructure</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> token, <span class="hljs-built_in">string</span> departmentId</span>)</span>
    {
        <span class="hljs-keyword">var</span> deptInfo = <span class="hljs-keyword">await</span> _departmentsApi.GetDepartmentInfoByIdAsync(token, departmentId);
        <span class="hljs-keyword">if</span> (!deptInfo.Success)
        {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> { Error = <span class="hljs-string">$"è·å–éƒ¨é—¨ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">{deptInfo.Message}</span>"</span> };
        }
        
        <span class="hljs-keyword">var</span> dept = deptInfo.Data.Department;
        
        <span class="hljs-comment">// è·å–å­éƒ¨é—¨</span>
        <span class="hljs-keyword">var</span> childDepts = <span class="hljs-keyword">await</span> _departmentsApi.GetDepartmentsByParentIdAsync(token, departmentId, fetchChild: <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">var</span> children = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">object</span>&gt;();
        
        <span class="hljs-keyword">if</span> (childDepts.Success)
        {
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> child <span class="hljs-keyword">in</span> childDepts.Data.Departments)
            {
                <span class="hljs-keyword">var</span> childStructure = <span class="hljs-keyword">await</span> BuildDepartmentStructure(token, child.Id);
                children.Add(childStructure);
            }
        }
        
        <span class="hljs-comment">// è·å–éƒ¨é—¨æˆå‘˜</span>
        <span class="hljs-keyword">var</span> members = <span class="hljs-keyword">await</span> _userApi.GetUserByDepartmentId_Tenant_Async(token, departmentId);
        <span class="hljs-keyword">var</span> memberList = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">object</span>&gt;();
        
        <span class="hljs-keyword">if</span> (members.Success)
        {
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> member <span class="hljs-keyword">in</span> members.Data.Items)
            {
                memberList.Add(<span class="hljs-keyword">new</span> 
                {
                    UserId = member.UserId,
                    Name = member.Name,
                    Mobile = member.Mobile
                });
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> 
        {
            Id = dept.Id,
            Name = dept.Name,
            Children = children,
            Members = memberList
        };
    }
}
</code></pre>
<h3 data-id="heading-38">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨Program.csä¸­æ³¨å†ŒæœåŠ¡</span>
<span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

<span class="hljs-comment">// æ·»åŠ æ§åˆ¶å™¨</span>
builder.Services.AddControllers();

<span class="hljs-comment">// æ·»åŠ é£ä¹¦æœåŠ¡</span>
builder.Services.AddFeishuApiService(<span class="hljs-string">"Feishu"</span>)
                .AddLogging(option =&gt; option.AddConsole());

<span class="hljs-comment">// æ³¨å†ŒSwaggerï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰</span>
builder.Services.AddSwaggerGen();

<span class="hljs-keyword">var</span> app = builder.Build();

<span class="hljs-comment">// é…ç½®ç®¡é“</span>
<span class="hljs-keyword">if</span> (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseAuthorization();
app.MapControllers();

app.Run();
</code></pre>
<h3 data-id="heading-39">é…ç½®æ–‡ä»¶ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"LogLevel"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Information"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Microsoft.AspNetCore"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Warning"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"AllowedHosts"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"*"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Feishu"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"AppId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_feishu_app_id"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"AppSecret"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_feishu_app_secret"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"BaseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://open.feishu.cn"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-40">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-41">å®‰å…¨æ€§è€ƒè™‘</h3>
<ol>
<li><strong>ä»¤ç‰Œç®¡ç†</strong>: å¦¥å–„ä¿ç®¡è®¿é—®ä»¤ç‰Œï¼Œé¿å…æ³„éœ²</li>
<li><strong>æƒé™æ§åˆ¶</strong>: éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œåªæˆäºˆå¿…è¦çš„æ“ä½œæƒé™</li>
<li><strong>å®¡è®¡æ—¥å¿—</strong>: è®°å½•æ‰€æœ‰ç»„ç»‡ç®¡ç†æ“ä½œï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡</li>
</ol>
<h3 data-id="heading-42">é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span> 
{
    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> feishuUserApi.CreateUserAsync(token, userRequest);
    <span class="hljs-keyword">if</span> (!result.Success) 
    {
        <span class="hljs-comment">// å¤„ç†APIé”™è¯¯</span>
        Console.WriteLine(<span class="hljs-string">$"åˆ›å»ºç”¨æˆ·å¤±è´¥: <span class="hljs-subst">{result.Message}</span>"</span>);
    }
}
<span class="hljs-keyword">catch</span> (FeishuException ex)
{
    <span class="hljs-comment">// å¤„ç†é£ä¹¦ç‰¹å®šå¼‚å¸¸</span>
    Console.WriteLine(<span class="hljs-string">$"é£ä¹¦APIå¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    <span class="hljs-comment">// å¤„ç†å…¶ä»–å¼‚å¸¸</span>
    Console.WriteLine(<span class="hljs-string">$"æœªçŸ¥å¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
}
</code></pre>
<h3 data-id="heading-43">æ‰¹é‡æ“ä½œä¼˜åŒ–</h3>
<p>å¯¹äºå¤§é‡ç»„ç»‡æ“ä½œï¼Œåº”è¯¥é‡‡ç”¨æ‰¹é‡å¤„ç†æ–¹å¼ä»¥æé«˜æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ‰¹é‡è·å–ç”¨æˆ·ä¿¡æ¯ç¤ºä¾‹</span>
<span class="hljs-keyword">var</span> userIds = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"user1"</span>, <span class="hljs-string">"user2"</span>, <span class="hljs-string">"user3"</span> };
<span class="hljs-keyword">var</span> batchResult = <span class="hljs-keyword">await</span> feishuUserApi.GetUserByIds_Tenant_Async(token, userIds);

<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> userInfo <span class="hljs-keyword">in</span> batchResult.Data.Users)
{
    <span class="hljs-comment">// å¤„ç†æ¯ä¸ªç”¨æˆ·ä¿¡æ¯</span>
    ProcessUserInfo(userInfo);
}
</code></pre>
<h3 data-id="heading-44">æ•°æ®éªŒè¯</h3>
<p>åœ¨æ‰§è¡Œç»„ç»‡ç®¡ç†æ“ä½œå‰ï¼Œåº”å¯¹è¾“å…¥æ•°æ®è¿›è¡Œå……åˆ†éªŒè¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrganizationValidator</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">ValidateDepartment</span>(<span class="hljs-params">DepartmentCreateRequest department</span>)</span>
    {
        <span class="hljs-comment">// éªŒè¯å¿…è¦å­—æ®µ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(department.Name))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º"</span>);
            
        <span class="hljs-comment">// éªŒè¯çˆ¶éƒ¨é—¨ID</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(department.ParentDepartmentId))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"çˆ¶éƒ¨é—¨IDä¸èƒ½ä¸ºç©º"</span>);
            
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">ValidateUser</span>(<span class="hljs-params">CreateUserRequest user</span>)</span>
    {
        <span class="hljs-comment">// éªŒè¯å¿…è¦å­—æ®µ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(user.Name))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>);
            
        <span class="hljs-comment">// éªŒè¯æ‰‹æœºå·æˆ–é‚®ç®±</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(user.Mobile) &amp;&amp; <span class="hljs-built_in">string</span>.IsNullOrEmpty(user.Email))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"æ‰‹æœºå·å’Œé‚®ç®±è‡³å°‘éœ€è¦å¡«å†™ä¸€é¡¹"</span>);
            
        <span class="hljs-comment">// éªŒè¯éƒ¨é—¨ID</span>
        <span class="hljs-keyword">if</span> (user.DepartmentIds == <span class="hljs-literal">null</span> || user.DepartmentIds.Count == <span class="hljs-number">0</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"ç”¨æˆ·å¿…é¡»è‡³å°‘å±äºä¸€ä¸ªéƒ¨é—¨"</span>);
            
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h2 data-id="heading-45">é™„å½•</h2>
<h3 data-id="heading-46">A. ç›¸å…³èµ„æº</h3>
<ul>
<li><strong>Mud.Feishu ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fmudtools%2FMudFeishu" target="_blank" title="https://gitee.com/mudtools/MudFeishu" ref="nofollow noopener noreferrer">gitee.com/mudtools/Muâ€¦</a></li>
<li><strong>é£ä¹¦å¼€æ”¾å¹³å°æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fdocument%2F" target="_blank" title="https://open.feishu.cn/document/" ref="nofollow noopener noreferrer">open.feishu.cn/document/</a></li>
<li><strong>.NET å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.microsoft.com%2Fdotnet%2F" target="_blank" title="https://docs.microsoft.com/dotnet/" ref="nofollow noopener noreferrer">docs.microsoft.com/dotnet/</a></li>
</ul>
<h3 data-id="heading-47">B. ç‰ˆæœ¬</h3>

















<table><thead><tr><th>Mud.Feishu ç‰ˆæœ¬</th><th>.NET ç‰ˆæœ¬</th><th>é£ä¹¦ API ç‰ˆæœ¬</th><th>å‘å¸ƒæ—¥æœŸ</th></tr></thead><tbody><tr><td>1.0.0</td><td>.NET 8.0/9.0/10.0</td><td>v3</td><td>2025-11-19</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeCunåœ¨Metaçš„æœ€åç»å”±ï¼Ÿ50è¡Œä»£ç è¯æ˜AIçš„å¦ä¸€ç§å¯èƒ½]]></title>    <link>https://juejin.cn/post/7574584245110456371</link>    <guid>https://juejin.cn/post/7574584245110456371</guid>    <pubDate>2025-11-20T02:43:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245110456371" data-draft-id="7574584245110374451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeCunåœ¨Metaçš„æœ€åç»å”±ï¼Ÿ50è¡Œä»£ç è¯æ˜AIçš„å¦ä¸€ç§å¯èƒ½"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-11-20T02:43:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeCunåœ¨Metaçš„æœ€åç»å”±ï¼Ÿ50è¡Œä»£ç è¯æ˜AIçš„å¦ä¸€ç§å¯èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:43:52.000Z" title="Thu Nov 20 2025 02:43:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨AIç•Œä¸ºYann LeCunç¦»èŒMetaçš„æ¶ˆæ¯éœ‡æƒŠæ—¶ï¼Œä¸€ä»½æ„å¤–çš„â€œå‘Šåˆ«ç¤¼ç‰©â€æ‚„ç„¶å‡ºç°åœ¨arXivä¸Šâ€”â€”è¿™ä½å›¾çµå¥–å¾—ä¸»ä¸Randall Balestrieroåˆä½œçš„æ–°è®ºæ–‡ <strong>ã€ŠLeJEPAï¼šä¸€ç§ç®€çº¦ä¸”å¯æ‰©å±•çš„è”åˆåµŒå…¥é¢„æµ‹æ¶æ„ã€‹</strong> ï¼Œæå‡ºäº†ä»…éœ€50è¡Œä»£ç çš„è‡ªç›‘ç£å­¦ä¹ æ–°æ¡†æ¶ã€‚</p>
<p>è¿™æˆ–è®¸æ˜¯LeCunåœ¨Metaçš„æœ€åä¸€ç¯‡è®ºæ–‡ã€‚</p>
<ul>
<li><strong>è®ºæ–‡åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2511.08544" target="_blank" title="https://arxiv.org/pdf/2511.08544" ref="nofollow noopener noreferrer">arxiv.org/pdf/2511.08â€¦</a></li>
<li><strong>è®ºæ–‡åç§°ï¼š</strong> LeJEPA: Provable and Scalable Self-Supervised Learning Without the Heuristics</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b0797bb9f37444d99b1960bd2872e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=VvN3X0BbqH2YhSQKyVFswX2o1Ic%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<p>2025å¹´7æœˆï¼ŒMetaåšå‡ºä»¤äººæ„å¤–çš„ä»»å‘½â€”â€”28å²çš„Scale AIåˆ›å§‹äººAlexandr Wangæˆä¸ºé¦–å¸­AIå®˜ï¼ŒèŒä½é«˜äºLeCunã€‚è¿™ä¸€å†³å®šåœ¨AIåœˆå¼•èµ·è½©ç„¶å¤§æ³¢ã€‚ä»…ä»…ä¸€ä¸ªæœˆåï¼Œå‰è°·æ­Œå¤§è„‘ç ”ç©¶å‘˜èµµæ™Ÿä½³è¢«ä»»å‘½ä¸ºè¶…çº§æ™ºèƒ½å®éªŒå®¤é¦–å¸­ç§‘å­¦å®¶ï¼ŒLeCunåœ¨Metaçš„å†³ç­–æƒè¢«è¿›ä¸€æ­¥å‰Šå¼±ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/964bbb8fee8c4d6c952e26388a2cfa18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=YzZ6TzlBLEKD5PzDtf7j0FUyQZ4%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<p>æƒåŠ›ç»“æ„çš„è°ƒæ•´åœ¨10æœˆè¾¾åˆ°é«˜æ½®ï¼šLeCuné¢†å¯¼çš„FAIRå®éªŒå®¤è£å‘˜600ä½™äººï¼Œå…¶ä¸­åŒ…æ‹¬æ ¸å¿ƒç ”ç©¶å‘˜ç”°æ¸Šæ ‹ã€‚è¿™æ”¯æ›¾ç»å¼€åˆ›äº†å·ç§¯ç¥ç»ç½‘ç»œç­‰çªç ´æ€§æŠ€æœ¯çš„å›¢é˜Ÿï¼Œå¦‚ä»Šé¢ä¸´å¤§å¹…ç¼©ç¼–ã€‚</p>
<p>â€œFAIRæ­£åœ¨è¢«è¾¹ç¼˜åŒ–ï¼Œè¿™å·²ç»ä¸æ˜¯ä»€ä¹ˆç§˜å¯†äº†ã€‚â€ä¸€ä½å‰Metaå‘˜å·¥é€éœ²ï¼Œâ€œå½“æ‰å…‹ä¼¯æ ¼æŠŠèµŒæ³¨éƒ½å‹åœ¨LLMä¸Šæ—¶ï¼ŒLeCunçš„ä¸–ç•Œæ¨¡å‹ç ”ç©¶å°±å¤±å»äº†å†…éƒ¨æ”¯æŒã€‚â€</p>
<p>LeCunä¸Metaç®¡ç†å±‚çš„åˆ†æ­§æ—©å·²ä¸æ˜¯ç§˜å¯†ã€‚è¿™ä½AIå…ˆé©±å¤šæ¬¡å…¬å¼€æ‰¹è¯„å¤§è¯­è¨€æ¨¡å‹æ˜¯â€œæ­»èƒ¡åŒâ€ï¼Œæ— æ³•å®ç°çœŸæ­£çš„æ™ºèƒ½ã€‚ä»–ä¸»å¼ å¼€å‘èƒ½å¤Ÿé€šè¿‡æ„ŸçŸ¥æ•°æ®å­¦ä¹ ç‰©ç†è§„å¾‹çš„â€œä¸–ç•Œæ¨¡å‹â€ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6f4f94b9b5a4b62aaf24d0678f274bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=hbgj56HVQB2lmVFvj5WqrW948Xk%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>æ–°æ¡†æ¶LeJEPAï¼šä»…50è¡Œä»£ç çš„ç®€æ´è§£å†³æ–¹æ¡ˆ</strong></h2>
<p>è¿™ç¯‡ç”±LeCunä¸Randall Balestrieroåˆä½œçš„è®ºæ–‡ï¼Œæå‡ºäº†ä¸€ç§åä¸ºLeJEPAçš„æ–°æ¡†æ¶ï¼Œæ—¨åœ¨è§£å†³å½“å‰è”åˆåµŒå…¥é¢„æµ‹æ¶æ„æ–¹æ³•ä¸­å­˜åœ¨çš„å¤šç§å¤±æ•ˆæ¨¡å¼ã€‚</p>
<p>JEPAæ–¹æ³•ç”±äºç¼ºä¹æ˜ç¡®çš„å®è·µæŒ‡å—å’Œç³»ç»Ÿç†è®ºï¼Œç›®å‰ç›¸å…³ç ”ç©¶å¤§å¤šæ˜¯ä¸´æ—¶æ€§æ¢ç´¢ã€‚è€Œè¿™ç¯‡è®ºæ–‡ç»™å‡ºäº†ä¸€å¥—å®Œæ•´çš„JEPAç†è®ºï¼Œå¹¶å°†å…¶å…·ä½“è½åœ°ä¸ºLeJEPAâ€”â€”ä¸€ç§è½»é‡ã€å¯æ‰©å±•ä¸”æœ‰åšå®ç†è®ºåŸºç¡€çš„è®­ç»ƒç›®æ ‡ã€‚</p>
<p>ç ”ç©¶äººå‘˜è¯æ˜ï¼Œè‹¥è¦æœ€å°åŒ–ä¸‹æ¸¸ä»»åŠ¡çš„é¢„æµ‹é£é™©ï¼ŒJEPAçš„åµŒå…¥ç†æƒ³æƒ…å†µä¸‹åº”æœä»å„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒã€‚ä¸ºæ­¤ï¼Œä»–ä»¬æå‡ºäº†æ–°çš„ç›®æ ‡å‡½æ•°SIGRegï¼Œç”¨äºçº¦æŸåµŒå…¥å‘è¯¥ç†æƒ³åˆ†å¸ƒæ”¶æ•›ã€‚</p>
<p>LeJEPAèåˆäº†JEPAå’ŒSIGRegæ€æƒ³ï¼Œå…¼å…·å¤šæ–¹é¢çš„ç†è®ºå’Œå®è·µä¼˜åŠ¿ï¼š</p>
<ul>
<li>åªéœ€è¦ä¸€ä¸ªæƒè¡¡è¶…å‚æ•°</li>
<li>æ—¶é—´ä¸å†…å­˜å¤æ‚åº¦å‡ä¸ºçº¿æ€§</li>
<li>åœ¨è¶…å‚æ•°ã€æ¶æ„ä»¥åŠä¸åŒé¢†åŸŸä¹‹é—´è¡¨ç°ç¨³å®š</li>
<li>ä¸ä¾èµ–å¯å‘å¼æŠ€å·§ï¼Œé€‚åˆåˆ†å¸ƒå¼è®­ç»ƒ</li>
<li>ä»…éœ€çº¦50è¡Œä»£ç å³å¯å®ç°</li>
</ul>
<p>å¦‚å›¾1æ‰€ç¤ºï¼Œåœ¨ä½¿ç”¨ImageNet-1Kè¿›è¡Œé¢„è®­ç»ƒå¹¶å¯¹å†»ç»“éª¨å¹²ç½‘ç»œåšçº¿æ€§è¯„ä¼°çš„è®¾å®šä¸‹ï¼ŒLeJEPAåœ¨ViT-H/14ä¸Šå¯è¾¾åˆ°79%çš„ç²¾åº¦ï¼Œè¡¨ç°å‡ºè‰²ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd23d88bd4f04610a6cfcdb4e2a17338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=LmSkHt2OwrsGG7ws27AviVGcYsg%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>è‡ªç›‘ç£å­¦ä¹ çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸LeJEPAçš„è§£å†³è·¯å¾„</strong></h2>
<p>åœ¨AIé¢†åŸŸï¼Œä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„æ ¸å¿ƒé—®é¢˜æ˜¯è®©æ¨¡å‹å­¦ä¼šå¯¹ä¸–ç•ŒåŠå…¶å˜åŒ–å½¢æˆå¯ç”¨äºå®é™…å†³ç­–çš„è¡¨å¾ã€‚</p>
<p>æ— è®ºæ˜¯å›¾åƒè¯†åˆ«ã€æœºå™¨äººï¼Œè¿˜æ˜¯ç‰©ç†å­¦ã€å¤ªç©ºæ¢ç´¢ï¼Œéƒ½ä¼šé¢ä¸´ä¸€ä¸ªå…±åŒé—®é¢˜ï¼šå¦‚ä½•ä»…å‡­è§‚æµ‹æ•°æ®ï¼Œå­¦ä¹ åˆ°ä¸€ä¸ªç»“æ„æ¸…æ™°ã€ä¾¿äºæ“ä½œçš„é«˜ç»´åµŒå…¥ç©ºé—´ï¼Ÿ</p>
<p>ä½¿ç”¨æ·±åº¦ç½‘ç»œå°†è§‚æµ‹æ˜ å°„åˆ°åµŒå…¥æ˜¯è§£å†³è¿™ä¸€éš¾é¢˜çš„æ ‡å‡†ç¬¬ä¸€æ­¥ã€‚ç¬¬äºŒæ­¥ï¼Œä¹Ÿæ˜¯å°šæœªæ ‡å‡†åŒ–çš„éƒ¨åˆ†ï¼Œæ˜¯å¦‚ä½•è®­ç»ƒè¿™äº›ç½‘ç»œå‚æ•°ã€‚</p>
<p>JEPAæå‡ºä¸€æ¡è·¯å¾„ï¼šé€šè¿‡æœ€å¤§åŒ–è¯­ä¹‰ç›¸å…³è§†å›¾çš„åµŒå…¥ä¹‹é—´çš„ä¸€è‡´æ€§é¢„æµ‹æ¥è®­ç»ƒç½‘ç»œã€‚è¿™äº›â€œè§†å›¾â€å¯ä»¥åŒ…æ‹¬æ©ç ã€è£å‰ªã€æ¨¡ç³Šã€æ—¶é—´æˆ–ç©ºé—´å¹³ç§»ç­‰å¤šç§å˜æ¢æ“ä½œã€‚ç„¶è€Œï¼ŒJEPAçš„é¢„æµ‹ä»»åŠ¡å­˜åœ¨ä¸€äº›å¤±è´¥æ¨¡å¼ï¼Œä¾‹å¦‚è¡¨å¾å´©æºƒâ€”â€”ç½‘ç»œå°†æ‰€æœ‰è¾“å…¥æ˜ å°„åˆ°å‡ ä¹ç›¸åŒçš„åµŒå…¥ï¼ˆå®Œå…¨å´©æºƒï¼‰ï¼Œæˆ–åªè½åœ¨ä½ç»´å­ç©ºé—´ä¸Šï¼ˆç»´åº¦å´©æºƒï¼‰ã€‚</p>
<p>æœ‰å…³JEPAçš„ç†è®ºåŸºç¡€ç ”ç©¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä»å¤„äºç©ºç™½çŠ¶æ€ï¼Œè€ŒLeCunçš„è¿™é¡¹ç ”ç©¶æ­£æ˜¯è¦æ‰“ç ´è¿™ä¸€å¾ªç¯ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74b94a25e7c14327a38aa2ea5d4a24e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=zeCgixpruH2eZyWXw74u0b0b6iE%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>ç†è®ºåŸºç¡€ï¼šå„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒæ˜¯æœ€ä¼˜åµŒå…¥</strong></h2>
<p>ç ”ç©¶äººå‘˜é€šè¿‡é‡æ–°å®¡è§†æ”¯æ’‘JEPAçš„åŸºç¡€è®¾è®¡åŸåˆ™ï¼Œæç‚¼å‡ºä¸€ç§å…¨æ–°ä¸”ç²¾ç®€çš„JEPAâ€œåŸåˆ™â€ï¼šè§£å†³é¢„æµ‹ä»»åŠ¡ï¼ŒåŒæ—¶å¼ºåˆ¶åµŒå…¥æœä»å„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒã€‚</p>
<p>ä»–ä»¬è¯æ˜ï¼Œä¸ºäº†åœ¨ä»»æ„ä¸‹æ¸¸ä»»åŠ¡ä¸Šæœ€å°åŒ–ç»éªŒé£é™©ï¼ŒåµŒå…¥åº”è¯¥æœä»å„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒã€‚</p>
<p>ç ”ç©¶äººå‘˜é¦–å…ˆé€šè¿‡åˆ†æçº¿æ€§æ¢é’ˆæ¥ç¡®å®šåµŒå…¥çš„æœ€ä¼˜åˆ†å¸ƒï¼Œè¿™æ˜¯è¯„ä¼°å†»ç»“ç¼–ç å™¨æ—¶æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<p>ä¸ºäº†å¯¹é¢„è®­ç»ƒç¼–ç å™¨è¿›è¡Œæ›´çµæ´»çš„è¯„ä¼°ï¼Œç ”ç©¶äººå‘˜è¿˜åˆ†æäº†ä¸¤ç±»å¹¿æ³›ä½¿ç”¨çš„éçº¿æ€§æ–¹æ³•ï¼šåŸºäºåŠå¾„çš„k-NNæ–¹æ³•å’Œæ ¸æ–¹æ³•ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7d4761b23944700bf27d0c0fdf23f11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=HKTWdknqil8AyV%2FpDuSug8I46Bc%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<p>ä¸Šå›¾å±•ç¤ºäº†å„å‘å¼‚æ€§åµŒå…¥å¦‚ä½•æ¯”å„å‘åŒæ€§åµŒå…¥äº§ç”Ÿæ›´é«˜çš„æ–¹å·®ä¼°è®¡å€¼ã€‚ç ”ç©¶äººå‘˜å¯¹äºŒåˆ†ç±»ä»»åŠ¡æŠ½å–äº†100ä¸ªè®­ç»ƒç‚¹ï¼Œå¹¶æ‹Ÿåˆé€»è¾‘å›å½’æ¨¡å‹â€”â€”åœ¨å¤šä¸ªè®­ç»ƒé›†æ ·æœ¬ä¸Šé‡å¤æ­¤è¿‡ç¨‹ã€‚æ¯æ¬¡æŠ½æ ·éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå†³ç­–è¾¹ç•Œã€‚</p>
<h2 data-id="heading-3"><strong>SIGRegï¼šé«˜ç»´ç©ºé—´ä¸­çš„é«˜æ–¯æ­£åˆ™åŒ–</strong></h2>
<p>åœ¨è¯æ˜å„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒæ˜¯æœ€ä¼˜åµŒå…¥åˆ†å¸ƒä¹‹åï¼Œç ”ç©¶äººå‘˜å¼•å…¥äº†SIGRegâ€”â€”ä¸€ä¸ªåŒæ—¶å…·æœ‰å¯å¾®æ€§ã€å¯æ‰©å±•æ€§ã€ç†è®ºå¯è¯æ˜æ€§ä»¥åŠå¯è§£é‡Šæ€§çš„åˆ†å¸ƒåŒ¹é…ç›®æ ‡å‡½æ•°ã€‚</p>
<p>å®ƒå»ºç«‹åœ¨ä¸‰ä¸ªå…³é”®åˆ›æ–°ä¹‹ä¸Šï¼š</p>
<p>é¦–å…ˆï¼Œç ”ç©¶äººå‘˜å°†åˆ†å¸ƒåŒ¹é…è¡¨è¿°ä¸ºåœ¨åŸå‡è®¾ä¸‹çš„ç»Ÿè®¡å‡è®¾æ£€éªŒï¼›</p>
<p>å…¶æ¬¡ï¼Œæ„é€ äº†ä¸€ç±»æ£€éªŒï¼Œåœ¨ä¿æŒçº¿æ€§å¤æ‚åº¦å’Œé«˜æ•ˆå¤šGPUæ‰©å±•çš„åŒæ—¶ï¼Œä¿è¯æ¢¯åº¦å’Œæ›²ç‡å‡æœ‰ç•Œã€‚</p>
<p>ç¬¬ä¸‰ï¼ŒSIGRegé¿å…äº†ç»´åº¦ç¾éš¾ï¼Œä»è€Œå½»åº•æ¶ˆé™¤äº†é€€åŒ–çš„æ·å¾„è§£ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1894429d5f1e4b0b9cbdb360ea1d9d0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=THZ1DWQqRHEE%2BmnvKRhEDqe8NoE%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<p>å›¾4å±•ç¤ºäº†å…·æœ‰ä¸åŒSobolevå¹³æ»‘ç³»æ•°Î±çš„çƒé¢ä¸Šåˆ†å¸ƒç¤ºä¾‹ã€‚ç”±äºç›®æ ‡å¯†åº¦ï¼ˆå„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒï¼‰æ˜¯å¹³æ»‘çš„ï¼ŒåµŒå…¥çš„Î±ç³»æ•°ä¼šè¿…é€Ÿå¢é•¿ï¼Œä»è€Œä½¿SIGRegä¸å—ç»´åº¦ç¾éš¾çš„å½±å“ã€‚</p>
<p>ç ”ç©¶äººå‘˜è¯æ˜ï¼ŒSIGRegç»˜åˆ¶Epps-Pulleyæµ‹è¯•å›¾æ˜¯ç¨³å®šä¸”å¯æ‰©å±•çš„ã€‚</p>
<p>å›¾5æ˜¾ç¤ºäº†æ„å»ºçš„æ•°æ®å¯†åº¦å›¾ã€‚å…¶â€œXâ€åˆ†å¸ƒçš„è¾¹ç¼˜åˆ†å¸ƒä¸ºæ ‡å‡†é«˜æ–¯åˆ†å¸ƒï¼Œåæ–¹å·®ä¸ºå•ä½çŸ©é˜µã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2337105c5c54b0a908cea13d6747210~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=muXI961URoNVZadZ9nOs8i5fSSQ%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<p>å›¾6å±•ç¤ºäº†ä»ä¸€ä¸ª1024ç»´æ ‡å‡†é«˜æ–¯åˆ†å¸ƒä¸­æŠ½å–100ä¸ªæ ·æœ¬ï¼Œå¹¶æ”¹å˜å‰ä¸¤ä¸ªåæ ‡ä»¥ç”Ÿæˆâ€œXâ€åˆ†å¸ƒã€‚å¯¹äºæ¯ä¸ªç»Ÿè®¡é‡ï¼Œç ”ç©¶äººå‘˜å¯¹æ ·æœ¬æ‰§è¡Œæ¢¯åº¦ä¸‹é™ä»¥æœ€å°åŒ–å…¶å€¼ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22a24dc1de10462a82f96893b26afc00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=pcxWzGCnAi%2FxocDg1xImRIlyIbg%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<p>ç»“æœè¡¨æ˜ï¼Œå°½ç®¡è¿™æ˜¯ä¸€ä¸ªé«˜ç»´åˆ†å¸ƒä¸”æ ·æœ¬æ•°é‡æœ‰é™ï¼Œä½†SIGRegèƒ½å¤Ÿæ•è·é€€åŒ–å­ç©ºé—´å¹¶ç›¸åº”åœ°è°ƒæ•´æ•°æ®ä»¥åŒ¹é…å„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒã€‚</p>
<h2 data-id="heading-4"><strong>LeJEPAçš„å®é™…è¡¨ç°ï¼šè·¨æ¶æ„è·¨é¢†åŸŸçš„ç¨³å®šæ€§</strong></h2>
<p>åœ¨ç¡®å®šå„å‘åŒæ€§é«˜æ–¯åˆ†å¸ƒæ˜¯åŸºç¡€æ¨¡å‹çš„æœ€ä½³åµŒå…¥åˆ†å¸ƒï¼Œå¹¶å¼•å…¥SIGRegæ¥å®ç°è¯¥åˆ†å¸ƒä¹‹åï¼Œç ”ç©¶äººå‘˜æ¨å‡ºäº†å®Œæ•´çš„LeJEPAæ¡†æ¶ï¼Œå¹¶é€šè¿‡å…¨é¢å®éªŒéªŒè¯å…¶æœ‰æ•ˆæ€§ã€‚</p>
<p>å›¾9å±•ç¤ºäº†ä½¿ç”¨LeJEPAå¼€ç®±å³ç”¨çš„ImageNet-10é¢„è®­ç»ƒå’Œå†»ç»“éª¨å¹²ç½‘ç»œçº¿æ€§è¯„ä¼°æ–¹æ³•åœ¨timmæ¨¡å‹ä¸Šçš„åº”ç”¨ã€‚ç ”ç©¶äººå‘˜å¯¹å­¦ä¹ ç‡å’Œæƒé‡è¡°å‡è¿›è¡Œäº†äº¤å‰éªŒè¯ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50f0a8620c1643cc9d7baf478ecfa0ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=jhWMzM3OPKp3CoX37pF2ezQLY5M%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<p>è™½ç„¶æœ€ä½³æ¨¡å‹å’Œæœ€å·®æ¨¡å‹ä¹‹é—´å­˜åœ¨ç»†å¾®å·®å¼‚ï¼Œä½†åœ¨æ¶µç›–8ä¸ªæ¨¡å‹ç³»åˆ—çš„50ä¸ªæ¨¡å‹ä¸­ï¼ŒLeJEPAèƒ½å¤Ÿç”Ÿæˆéå¹³å‡¡çš„è¡¨ç¤ºï¼Œä»è€Œä»¥SOTAæ°´å¹³è§£å†³ä¸‹æ¸¸ä»»åŠ¡ã€‚</p>
<p>è·¨æ¶æ„ç¨³å®šæ€§æ˜¯LeJEPAçš„å…³é”®ä¼˜åŠ¿ä¹‹ä¸€ã€‚å¤§å¤šæ•°ç°ä»£è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•éƒ½é’ˆå¯¹Vision Transformerè¿›è¡Œäº†ä¼˜åŒ–ï¼Œè€ŒLeJEPAæ— éœ€ä¿®æ”¹ï¼Œå³å¯åœ¨å„ç§ä¸åŒçš„æ¶æ„ç³»åˆ—ä¸­è¿è¡Œã€‚</p>
<p>ä¸ºäº†éªŒè¯è¿™ä¸€ç»“è®ºï¼Œç ”ç©¶äººå‘˜ä½¿ç”¨ImageNet-10æ•°æ®é›†é¢„è®­ç»ƒäº†æ¥è‡ª8ä¸ªä¸åŒæ¶æ„ç³»åˆ—çš„çº¦50ä¸ªæ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹å‡æ¥è‡ªtimmåº“ï¼Œä¸”å‚æ•°é‡å‡å°äº2000ä¸‡ã€‚</p>
<p>æ‰€æœ‰æ¨¡å‹å‡èƒ½å­¦ä¹ åˆ°é«˜è´¨é‡çš„è¡¨å¾ï¼Œåœ¨å†»ç»“éª¨å¹²çº¿æ€§æ¢æµ‹çš„æƒ…å†µä¸‹ï¼ŒTop-1å‡†ç¡®ç‡è¾¾åˆ°äº†91.5%åˆ°95%ã€‚ç»“æœè¡¨æ˜ï¼Œåœ¨ç›‘ç£å­¦ä¹ ç¯å¢ƒä¸­è¡¨ç°è‰¯å¥½çš„æ¨¡å‹ï¼Œä¾‹å¦‚ResNetå’ŒVision Transformerï¼Œä¹ŸåŒæ ·é€‚ç”¨äºLeJEPAã€‚</p>
<p>è‡ªç›‘ç£å­¦ä¹ çš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿åœ¨äºå­¦ä¹ èƒ½å¤Ÿè·¨ä»»åŠ¡å’Œé¢†åŸŸæ³›åŒ–çš„é€šç”¨è¡¨å¾ã€‚ç„¶è€Œï¼Œå½“å‰å‰æ²¿çš„åŸºç¡€æ¨¡å‹ï¼ˆå¦‚DINOv2/v3ã€I-JEPAï¼‰éƒ½æ˜¯åœ¨è‡ªç„¶å›¾åƒä¸Šè¿›è¡Œé¢„è®­ç»ƒçš„ï¼Œè¿™è¿«ä½¿ç‰¹å®šé¢†åŸŸçš„ä»ä¸šè€…éœ€è¦æ”¶é›†å¤§é‡çš„æ ‡ç­¾æ¥è¿›è¡Œç›‘ç£å¼å¾®è°ƒã€‚</p>
<p>äº‹å®ä¸Šï¼Œå¤§å¤šæ•°å‰æ²¿æ¨¡å‹æ— æ³•ç›´æ¥åœ¨è¿™äº›é¢†åŸŸè¿›è¡Œè®­ç»ƒï¼Œå› ä¸ºæ ·æœ¬æ•°é‡å¯èƒ½å¾ˆå°‘ï¼Œè€Œä¸”é‡æ–°æœç´¢è¶…å‚æ•°ä¼šéå¸¸è€—æ—¶ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b4e9b2af0454cbea382b6b6f9ed8589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=j0bTC7hrM8srsFWqvN%2BvI8uNmgY%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<p>å›¾12å±•ç¤ºäº†ä½¿ç”¨å†»ç»“éª¨å¹²ç½‘ç»œæˆ–å®Œå…¨å¾®è°ƒä»¥åŠä¸åŒç±»åˆ«æ ·æœ¬æ•°çš„LeJEPAåœ¨å°å‹æ¶æ„ä¸Šçš„åŸŸå†…é¢„è®­ç»ƒï¼Œå¹¶ç»“åˆçº¿æ€§æ¢é’ˆè¯„ä¼°ã€‚ç ”ç©¶äººå‘˜å°†å…¶ä¸æœ€å…ˆè¿›çš„åŸºç¡€æ¨¡å‹åœ¨3ä¸ªä¸åŒçš„éšæœºç§å­ä¸Šè¿›è¡Œäº†æ¯”è¾ƒã€‚</p>
<p>ç»“æœè¡¨æ˜ï¼ŒLeJEPAèƒ½å¤Ÿå¼€ç®±å³ç”¨åœ°åœ¨ä¸åŒæ¶æ„ä¸Šè¿›è¡ŒåŸŸå†…é¢„è®­ç»ƒï¼Œå¹¶ä¸”æ€§èƒ½ä¼˜äºç›®å‰æœ€å…ˆè¿›çš„åŸºç¡€æ¨¡å‹ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9866bdcf928f402bb9f9c954c12e3ca5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=6Iu38Yfrsnd%2FywDNYmzUrZ7hkS8%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<h2 data-id="heading-5"><strong>LeJEPAçš„æ¶Œç°èƒ½åŠ›ï¼šè‡ªå‘çš„åˆ†å‰²ä¸è¯­ä¹‰ç†è§£</strong></h2>
<p>LeJEPAé€šè¿‡è‡ªç›‘ç£å­¦ä¹ ä¹ å¾—äº†ä¸°å¯Œçš„è¯­ä¹‰è¡¨å¾ï¼Œå±•ç°å‡ºä»¤äººæƒŠè®¶çš„æ¶Œç°èƒ½åŠ›ã€‚</p>
<p>å›¾13å±•ç¤ºäº†åŸºäºæœ€åä¸€å±‚é˜ˆå€¼çš„æ¶Œç°å¼ç›®æ ‡åˆ†å‰²ï¼ŒLeJEPAæ— éœ€æ˜¾å¼ç›‘ç£å³å¯è‡ªç„¶åœ°å­¦ä¹ åˆ†å‰²å’Œè·Ÿè¸ªæ˜¾è‘—ç›®æ ‡ï¼ˆå¦‚æ¯ä¸ªè§†é¢‘å³ä¾§çš„æ³¨æ„åŠ›å›¾æ‰€ç¤ºï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6de70ea1cdac49b584bf91351d57da27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=dq2TKrXgk2wRnprzh80FWSZCaEs%3D" alt="å›¾ç‰‡13.png" loading="lazy"/></p>
<p>å›¾14å±•ç¤ºäº†LeJEPAé€šè¿‡è‡ªç›‘ç£å­¦ä¹ ä¹ å¾—çš„ä¸°å¯Œè¯­ä¹‰è¡¨å¾ã€‚åœ¨æ²¡æœ‰ä»»ä½•ç›‘ç£çš„æƒ…å†µä¸‹ï¼ŒLeJEPAè‡ªå‘åœ°æ„å»ºå‡ºè¯­ä¹‰ä¸°å¯Œçš„è¡¨å¾ï¼šæš–è‰²ï¼ˆçº¢è‰²/å“çº¢è‰²/ç²‰è‰²ï¼‰å§‹ç»ˆç”¨äºè¡¨ç¤ºå‰æ™¯ç‰©ä½“ï¼ˆé¹¦é¹‰çš„èº«ä½“ã€ç‹—çš„è„¸ï¼‰ï¼Œè€Œå†·è‰²ï¼ˆé’è‰²/ç»¿è‰²/é»„è‰²ï¼‰åˆ™ç”¨äºè¡¨ç¤ºèƒŒæ™¯å’Œæ ‘å¶ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89d6e9398b134ebfbbc44b309b90d0b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211432&amp;x-signature=t8rE7o%2BsMe0BBWz93ySfG4QeufY%3D" alt="å›¾ç‰‡14.png" loading="lazy"/></p>
<p>è¿™ç§æ¶Œç°çš„ç‰©ä½“-èƒŒæ™¯åˆ†ç¦»å’Œæ„ŸçŸ¥åˆ†ç»„ï¼Œå®Œå…¨åŸºäºæœªæ ‡è®°çš„æ•°æ®ï¼Œæ­ç¤ºäº†ä¸–ç•Œçš„è§†è§‰ç»“æ„ã€‚</p>
<p>ç ”ç©¶äººå‘˜åœ¨å¤šä¸ªé¢†åŸŸã€è¶…è¿‡60ç§æ¶æ„ä¸ŠéªŒè¯äº†LeJEPAï¼Œå…¶ä¸­åŒ…æ‹¬å‚æ•°è§„æ¨¡é«˜è¾¾18äº¿çš„å·¨å‹æ¨¡å‹ç‰ˆæœ¬ã€‚ç»“æœè¯æ˜ï¼Œå°½ç®¡å…¶æ ¸å¿ƒè®¾è®¡éå¸¸ç®€å•ï¼ŒLeJEPAçš„æ ¸å¿ƒå®ç°ä»£ç ä¸è¶³50è¡Œï¼Œä½†ä»èƒ½å¤Ÿè¾¾åˆ°å½“å‰æœ€å…ˆè¿›æ–¹æ³•çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-6"><strong>ç»“è¯­</strong></h2>
<p>åœ¨æäº¤çš„è®ºæ–‡ä¸­ï¼ŒLeJEPAæ¡†æ¶å±•ç°å‡ºä»¤äººæƒŠè®¶çš„æ¶Œç°èƒ½åŠ›â€”â€”æ— éœ€æ˜¾å¼ç›‘ç£ï¼Œå³å¯è‡ªç„¶å­¦ä¹ åˆ†å‰²å’Œè·Ÿè¸ªæ˜¾è‘—ç›®æ ‡ï¼Œè‡ªå‘æ„å»ºä¸°å¯Œçš„è¯­ä¹‰è¡¨å¾ã€‚</p>
<p>åœ¨è®ºæ–‡æ’å›¾é‡Œï¼Œæš–è‰²å§‹ç»ˆè¡¨ç¤ºå‰æ™¯ç‰©ä½“ï¼Œå†·è‰²è¡¨ç¤ºèƒŒæ™¯ï¼Œå±•ç°å‡ºç±»ä¼¼äººç±»æ„ŸçŸ¥çš„åˆ†ç»„èƒ½åŠ›ã€‚è¿™ä¸€åˆ‡ï¼Œå®Œå…¨åŸºäºæœªæ ‡è®°æ•°æ®å­¦ä¹ è€Œå¾—ã€‚</p>
<p>è¿™æˆ–è®¸æ­£æ˜¯LeCunæƒ³ä¼ è¾¾çš„ä¿¡æ¯ï¼šä¸éœ€è¦æµ·é‡æ ‡æ³¨æ•°æ®ï¼Œä¸éœ€è¦æš´åŠ›æ‰©å±•æ¨¡å‹è§„æ¨¡ï¼ŒAIä¾ç„¶å¯ä»¥å­¦ä¼šç†è§£ä¸–ç•Œã€‚</p>
<p>éšç€è¿™ç¯‡è®ºæ–‡çš„å‘å¸ƒï¼ŒLeCunåœ¨Metaçš„ç¯‡ç« å³å°†è½å¹•ã€‚ä½†å¯¹AIç•Œæ¥è¯´ï¼Œä¸€ä½æ‘†è„±æŸç¼šçš„é¡¶å°–ç§‘å­¦å®¶ï¼Œæˆ–è®¸èƒ½å¸¦æ¥æ›´å¤šæƒŠå–œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.1 å‘å¸ƒå½“å¤©ï¼Œæ–‡å¿ƒ 5.0 æ€å›æ¥äº†]]></title>    <link>https://juejin.cn/post/7574584245110358067</link>    <guid>https://juejin.cn/post/7574584245110358067</guid>    <pubDate>2025-11-20T02:38:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245110358067" data-draft-id="7574322843049738290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.1 å‘å¸ƒå½“å¤©ï¼Œæ–‡å¿ƒ 5.0 æ€å›æ¥äº†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-20T02:38:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.1 å‘å¸ƒå½“å¤©ï¼Œæ–‡å¿ƒ 5.0 æ€å›æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:38:15.000Z" title="Thu Nov 20 2025 02:38:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/711cde344fb84252901d11113b3bbc92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=0GTsADh95fm5rvfMJIJj86uge2A%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘å°±åœ¨ OpenAI åˆšåˆšæ•™ä¼š GPT-5.1 äººæƒ…ä¸–æ•…çš„åŒä¸€å¤©ï¼Œä¸€æ¬¾ 2.4 ä¸‡äº¿çš„å›½äº§å¤§æ¨¡å‹è¯æ˜äº†ï¼ŒAI ä¸ä»…èƒ½æ‡‚äººæƒ…ï¼Œè¿˜èƒ½æ›´å¥½åœ°ç†è§£ä¸–ç•Œã€‚ã€</strong></h5>
<p>2.4 ä¸‡äº¿å‚æ•°ï¼ŒåŸç”Ÿå…¨æ¨¡æ€æ¨¡å‹ä»Šå¤©æ€åˆ°äº†ï¼</p>
<p>ä¸€ç»å‘å¸ƒï¼Œè¿™æ¬¾æ¨¡å‹çš„é¢„è§ˆç‰ˆå°±åœ¨å¤šæ¨¡æ€ç†è§£ã€æŒ‡ä»¤éµå¾ªã€åˆ›æ„å†™ä½œã€æ™ºèƒ½ä½“è§„åˆ’ç­‰ 40 + æ ¸å¿ƒèµ›é“è¡¨ç°æƒŠè‰³ã€‚</p>
<p>è¿™ä¸€æ¬¡ï¼Œå‡ºæ‰‹çš„è¿˜æ˜¯ä¸­å›½ AIã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94cf064f9f51457d87d5ce02cf45dc0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=bTxj%2Bp9LWvtDwILAEt2WYKdnS6E%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f597276b354e4d9487eff0515cc06950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=oFU24K9p%2FMLQy80YijyJFn%2B%2BJk0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49187f7c64614e5abc5de5443e684f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=Bcc8pBDEOsyK9rNPI3pUtcYWZss%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ccff9abd39429fabf112bdd93d83a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=tyqYbUc1TV7DtHGy2DKEdRLy1TE%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>2025 ç™¾åº¦ä¸–ç•Œå¤§ä¼šä¸Šï¼Œæ–‡å¿ƒæ–°ä¸€ä»£æ¨¡å‹â€”â€”æ–‡å¿ƒ 5.0 é‡ç£…å‘å¸ƒã€‚</p>
<p>ä½œä¸ºã€ŒåŸç”Ÿå…¨æ¨¡æ€ã€æ¨¡å‹ï¼Œå®ƒä»åº•å±‚æ¶æ„ä¸Šå®ç°äº†ä¸€æ¬¡æ·±åˆ»çš„å˜é©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2429d5f992a42f2b63323dc8f2a52f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=9KP1VJBmXJ8uk1zAvC4IK0PdpU8%3D" alt="" loading="lazy"/></p>
<p>ä¸ºä½•è¿™ä¹ˆè¯´ï¼Ÿ</p>
<p>ä¸ä¸šå†…ä¸»æµçš„å¤šæ¨¡æ€ AI ä¸åŒï¼Œæ–‡å¿ƒ 5.0 ä»è®­ç»ƒä¹‹åˆèåˆäº†è¯­è¨€ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€æ•°æ®ã€‚</p>
<p>è€Œä¸”ï¼Œå®ƒè¿˜æ”¯æŒæ–‡ã€å›¾ã€è§†ã€éŸ³çš„è”åˆè¾“å…¥ä¸è¾“å‡ºï¼Œå®ç°ã€ŒåŸç”Ÿã€çš„ç»Ÿä¸€ç†è§£å’Œç”Ÿæˆã€‚</p>
<p>ç”±æ­¤ï¼Œæ–‡å¿ƒ 5.0 å…·å¤‡äº†å¼ºå¤§çš„å¤šæ¨¡æ€ç†è§£å’Œæ¨ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee43b024179041cdb17cdf08dd8f11d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=%2BSpNCTyqziclWN1aTiiI6LiThRc%3D" alt="" loading="lazy"/></p>
<p>å¤§ä¼šç°åœºï¼Œæ–‡å¿ƒ 5.0 ä»¥ã€Œæ­¦æ—å¤–ä¼ ã€ä½Ÿæ¹˜ç‰çš„å£å»äºŒåˆ›ã€Œç”„å¬›ä¼ ã€ã€‚ã€ŒAI ç”„å¬›ã€å¦™è¯­è¿ç ï¼Œå‡ºäººæ„æ–™çš„æ¼”ç»ç¬é—´ç‚¹ç‡ƒå…¨åœºã€‚</p>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">è§†é¢‘è¯¦æƒ…</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d869120bc28b4c8398a5a2bf3777e84d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=tDxw1Sm%2F1Df4c3joUkFdsEVA4VM%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå‘Šåˆ«ã€Œæ‹¼æ¥ã€ï¼ŒåŸç”Ÿå…¨æ¨¡æ€ç™»åœºã€</strong></p>
<p>åŸç”Ÿå…¨æ¨¡æ€ï¼Œä¸æ˜¯å¤šæ¨¡æ€çš„ã€ŒåŠ æ³•ã€ã€‚</p>
<p>ä¸€æåˆ°å¤šæ¨¡æ€ AIï¼Œäººä»¬å¯èƒ½æƒ³åˆ°çš„æ˜¯ï¼Œå°†è¯­è¨€ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰ä¸åŒæ•°æ®ã€Œæ‹¼æ¥ã€èµ·æ¥çš„æ¨¡å‹ã€‚</p>
<p>å½“å‰ï¼Œä¸šç•Œå¤§å¤šéƒ½é‡‡ç”¨äº†è¿™ç§ã€ŒåæœŸèåˆã€æ–¹å¼çš„å¤šæ¨¡æ€æ¨¡å‹ã€‚</p>
<p>ä½†æ–‡å¿ƒ 5.0 ä¸åŒï¼Œå®ƒä»æ ¹æºä¸Šæ„å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„æ¶æ„ï¼Œå³æ–°ä¸€ä»£ã€ŒåŸç”Ÿå…¨æ¨¡æ€å¤§æ¨¡å‹ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb09e5f91bf64c829655535562e7fd1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=oN648LYzVJOWN%2FEAlaPqHan%2F4OA%3D" alt="" loading="lazy"/></p>
<p>è‡ªè®­ç»ƒä¼Šå§‹ï¼Œæ–‡å¿ƒ 5.0 èåˆäº†è¯­è¨€ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€æ•°æ®ï¼Œå®ç°äº†æ–‡ã€å›¾ã€è§†ã€éŸ³çš„è”åˆè¾“å…¥ä¸è¾“å‡ºã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ–‡å¿ƒ 5.0 å°±èƒ½çœŸæ­£åšåˆ°åŸç”Ÿçš„å…¨æ¨¡æ€ç†è§£ä¸ç”Ÿæˆã€‚</p>
<p>ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œç™¾åº¦å›¢é˜Ÿå…‹æœäº†ä¸šå†…æ™®éé¢ä¸´çš„éš¾é¢˜ï¼š</p>
<p>åŸç”Ÿå¤šæ¨¡æ€æ¶æ„çš„ã€Œç†è§£ä¸ç”Ÿæˆä¸€ä½“åŒ–ã€</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¼ ç»Ÿæ–¹æ³•å¾€å¾€å…ˆæ˜¯å¤„ç†å•ä¸€æ¨¡æ€ï¼Œå†å°†æ‰€æœ‰æ¨¡æ€æ•°æ®èåˆã€‚è¿™ç§æ–¹æ³•çœ‹ä¼¼ä¼˜é›…ï¼Œå®åˆ™ä¼šå¸¦æ¥å¾ˆå¤šè‡´å‘½çš„é—®é¢˜ã€‚</p>
<p>åæœŸèåˆåªåœ¨è¾“å‡ºå±‚è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ¨¡æ€çš„ç‰¹å¾åœ¨èåˆä¹‹å‰ï¼Œå°±å·²ç‹¬ç«‹å†³ç­–å®Œæˆã€‚</p>
<p>è¿™æ ·çš„ AI æ ¹æœ¬å­¦ä¸åˆ°æ¨¡æ€ä¹‹é—´çš„ã€Œæ·±å±‚è¯­ä¹‰äº¤äº’ã€ï¼Œæ¯”å¦‚è§†é¢‘ä¸­ï¼Œäººç‰©è¡¨æƒ…å’Œè¯­éŸ³è¯­è°ƒé«˜åº¦ç›¸å…³ï¼Œè¿›è€Œé€ æˆä¿¡æ¯ä¸¢å¤±ã€‚</p>
<p>æ–‡å¿ƒ 5.0 é€šè¿‡ç²¾ç»†å»ºæ¨¡å¤šæ¨¡è¯­ä¹‰ç‰¹å¾ï¼Œè®©ç†è§£å’Œç”Ÿæˆç›¸äº’å¢å¼ºã€‚</p>
<p>åŒæ—¶ï¼Œå®ƒè¿˜é‡‡ç”¨äº†ã€Œè‡ªå›å½’ç»Ÿä¸€ç»“æ„ã€ï¼Œå¯¹ä¸åŒæ¨¡æ€çš„è®­ç»ƒç›®æ ‡è¿›è¡Œç¦»æ•£åŒ–å»ºæ¨¡ï¼Œç¡®ä¿äº†å¤šæ¨¡æ€ç‰¹å¾åœ¨ç»Ÿä¸€æ¡†æ¶ä¸‹å……åˆ†èåˆå¹¶ååŒä¼˜åŒ–ï¼Œç”±æ­¤æå‡äº†å…¨æ¨¡æ€ç»Ÿä¸€å»ºæ¨¡çš„èƒ½åŠ›ã€‚</p>
<p>åœ¨å‚æ•°è§„æ¨¡ä¸Šï¼Œæ–‡å¿ƒ 5.0 æ€»å‚æ•°è¶…è¿‡ 2.4 ä¸‡äº¿ï¼Œä¸šç•Œå…¬å¼€å‚æ•°çš„æ¨¡å‹ä¹‹æœ€ã€‚</p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œå®ƒå¼•å…¥äº†è¶…ç¨€ç–æ··åˆä¸“å®¶æ¶æ„ï¼Œè¿›è¡Œåºå¤§çš„å…¨æ¨¡æ€è®­ç»ƒã€‚</p>
<p>å…¶æ¿€æ´»å‚æ•°æ¯”ä¾‹ä½äº 3%ï¼Œåœ¨ä¿æŒå¼ºå¤§èƒ½åŠ›çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½è®¡ç®—å’Œæ¨ç†æˆæœ¬ã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/077f4b38edb241fe9eb55bf9bb935fc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=odsJHSZLkx8UuLQxum%2BCIMnmqJU%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œè®­æ¨åŒå¼•æ“ï¼Œæˆæœ¬éª¤é™ã€</strong></p>
<p>è¦è®©ä¸‡äº¿çº§å…¨æ¨¡æ€ MoE çœŸæ­£è·‘å¾—åŠ¨ã€è·‘å¾—å¿«ï¼Œå›¢é˜Ÿåœ¨è®­ç»ƒä¸æ¨ç†ä¸ŠåŒæ—¶å¼€åˆ€ï¼Œæ„å»ºäº†ä¸€å¥—é«˜æ•ˆçš„è®­æ¨ä½“ç³»ã€‚</p>
<p><strong>ã€Œ1. é«˜æ•ˆå…¨æ¨¡æ€è¶…ç¨€ç–æ··åˆä¸“å®¶åˆ†å¸ƒå¼è®­ç»ƒã€</strong></p>
<p>åœ¨è®­ç»ƒé˜¶æ®µï¼Œä¾æ‰˜é£æ¡¨æ¡†æ¶ï¼Œä»–ä»¬ç ”å‘äº†å¤šæ¨¡æ€ç¼–ç å™¨åˆ†ç¦»å¼‚æ­¥è®­ç»ƒæ¶æ„ã€åŠ¨æ€è‡ªé€‚åº”æ˜¾å­˜å¸è½½æŠ€æœ¯ï¼Œä»¥åŠç»†ç²’åº¦é€šä¿¡è®¡ç®—é‡å ç¼–æ’ä¸“å®¶å¹¶è¡ŒæŠ€æœ¯ã€‚</p>
<p>åŒæ—¶ï¼Œç»“åˆ FP8 æ··åˆç²¾åº¦è®­ç»ƒï¼Œå®ç°äº†å¯¹ä¸‡äº¿çº§å‚æ•°å…¨æ¨¡æ€è¶…ç¨€ç–æ··åˆä¸“å®¶æ¨¡å‹çš„é«˜æ•ˆè®­ç»ƒã€‚</p>
<p>ç»“æœï¼Œæ–‡å¿ƒ 5.0 é¢„è®­ç»ƒæ€§èƒ½è¾ƒåŸºå‡†æé€Ÿ 230%ã€‚</p>
<p><strong>ã€Œ2. å¤šçº§åˆ†ç¦»æ¶æ„çš„å…¨æ¨¡æ€ç»Ÿä¸€é«˜æ€§èƒ½æ¨ç†ã€</strong></p>
<p>åœ¨æ¨ç†é˜¶æ®µï¼Œæ–‡å¿ƒ 5.0 é‡‡ç”¨äº†ã€Œå¤šæ¨¡ç¼–ç å™¨ - é¢„å¡«å…… - è§£ç  - å¤šæ¨¡ç”Ÿæˆå™¨ã€çš„å¤šçº§åˆ†ç¦»æ¨ç†éƒ¨ç½²æ¡†æ¶ã€‚</p>
<p>æ­¤å¤–ï¼Œå›¢é˜Ÿè¿˜ç ”å‘äº†é¢å‘è¶…ç¨€ç–æ··åˆä¸“å®¶ã€æ•°æ®è´Ÿè½½å’Œæ³¨æ„åŠ›è®¡ç®—çš„å‡è¡¡ç®—æ³•ï¼Œä»¥åŠåŠ¨æ€è‡ªé€‚åº”å¤šæ­¥æŠ•æœºè§£ç å’Œæ•ˆæœæ— æŸä½æ¯”ç‰¹é”®å€¼ç¼“å­˜é‡åŒ–æŠ€æœ¯ã€‚</p>
<p>åœ¨æ¨ç†æˆæœ¬ä¸Šï¼Œæ–‡å¿ƒ 5.0 å¾—åˆ°å¤§å¹…å‹ç¼©ï¼ŒçœŸæ­£å®ç°äº†æ•ˆç‡ä¸èƒ½åŠ›çš„å¹³è¡¡ï¼Œè®©å…¶æ›´æ¥è¿‘å®ç”¨ã€‚</p>
<p>æ­¤å¤–ï¼Œè¡¡é‡ä¸€ä¸ªæ¨¡å‹èƒ½å¦ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ï¼Œé•¿ç¨‹ä»»åŠ¡çš„æŒ‡æ ‡æ˜¯æœ€é‡è¦çš„è¡¡é‡å› ç´ ä¹‹ä¸€ã€‚</p>
<p>ä¸ºäº†æå‡æ–‡å¿ƒ 5.0 é•¿ç¨‹ä»»åŠ¡çš„èƒ½åŠ›ï¼Œå›¢é˜ŸåŸºäºå¤§è§„æ¨¡å·¥å…·ç¯å¢ƒï¼Œåˆæˆäº†é•¿ç¨‹ä»»åŠ¡è½¨è¿¹æ•°æ®ã€‚</p>
<p>ç„¶åï¼Œåœ¨é¢„è®­ç»ƒå’Œåè®­ç»ƒé˜¶æ®µï¼ŒåŸºäºæ€ç»´é“¾å’Œè¡ŒåŠ¨é“¾å¯¹æ–‡å¿ƒ 5.0 è¿›è¡Œã€Œç«¯åˆ°ç«¯ã€å¤šè½®å¼ºåŒ–å­¦ä¹ è®­ç»ƒã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œæ–‡å¿ƒ 5.0 çš„æ™ºèƒ½ä½“å’Œå·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œå¾—åˆ°äº†æ˜¾è‘—çš„æå‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a080e0c55c0413d9a92cb36fa384fdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=rLWIB%2BnIPuCSjqPVk41aJ0h6g2Q%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæ–‡å¿ƒåˆå›æ¥äº†ï¼ã€</strong></p>
<p>è¿‡å»ä¸¤å¹´ï¼Œå¤šæ¨¡æ€æ¨¡å‹å·²è¿…é€Ÿå´›èµ·ï¼Œæˆä¸ºé©±åŠ¨ AI æ—¶ä»£å‘å±•çš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p>ä¸ä¼ ç»Ÿå¤§è¯­è¨€æ¨¡å‹ä¸åŒï¼Œå®ƒçªç ´äº†å•ä¸€æ–‡æœ¬çš„é™åˆ¶ï¼Œé€šè¿‡æ— ç¼èåˆå›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤šæºä¿¡æ¯ï¼Œå®ç°äº†æ›´æ¥è¿‘äººç±»çš„ç»¼åˆç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ã€‚</p>
<p>æ”¾çœ¼å…¨çƒï¼Œåœ¨è¿™åœº AI å¤§æˆ˜ä¸­ï¼ŒOpenAIã€è°·æ­Œç­‰ç¡…è°·å·¨å¤´æ—©å·²åœ¨å¤šæ¨¡æ€èµ›é“ä¸ŠæŠ¢å…ˆå¸ƒå±€ã€‚</p>
<p>OpenAI å‘å¸ƒ GPT-4o æ—¶ï¼Œä¾¿å‘ä¸–ç•Œç”ŸåŠ¨å±•ç¤ºäº†å¤šæ¨¡æ€ AI åº”æœ‰çš„äº¤äº’å½¢æ€â€”â€”</p>
<p>ä¸€ä¸ªç»Ÿä¸€çš„ç¥ç»ç½‘ç»œï¼Œæ— ç¼å¤„ç†æ–‡æœ¬ã€éŸ³é¢‘ã€è§†è§‰ç­‰å¤šç§æ¨¡æ€çš„è¾“å…¥ä¸è¾“å‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b866381820e4c56944ece980aabbd79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=NV07GPG7uavFX3%2FuU96r68dsFCM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba461a8d828647d383895b160153d994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=OOfQ0hiMznfB2fGPMg0O4rQgWB0%3D" alt="" loading="lazy"/></p>
<p>è€Œè°·æ­Œçš„ Gemini ç³»åˆ—ï¼Œæ›´æ˜¯ä»è¯ç”Ÿä¹‹åˆä¾¿è¢«çƒ™ä¸Šäº†ã€ŒåŸç”Ÿå¤šæ¨¡æ€ã€çš„å°è®°ã€‚</p>
<p>ä»–ä»¬åœ¨æŠ€æœ¯æŠ¥å‘Šä¸­ï¼Œå¤šæ¬¡å¼ºè°ƒäº†åŸç”Ÿå¤šæ¨¡æ€ä¸éåŸç”Ÿçš„å·®å¼‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ece6ab8dbc8b43eebe630eb3975d588a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=UkdWRIzOjhPti5c9atU%2BK%2FIrS1I%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb5e50c3e4574c269d9d77819808f8e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=IvohxM1OqlVg%2BQ4JBRuE4Smn7Ls%3D" alt="" loading="lazy"/></p>
<p>CEO Demis Hassabis ä¹Ÿæ›¾æ˜ç¡®è¡¨ç¤ºï¼ŒGemini çš„ç›®æ ‡å°±æ˜¯è¦è®©ä¸€ä¸ªæ¨¡å‹èƒ½åŸç”Ÿåœ°ç†è§£å›¾åƒã€éŸ³é¢‘å’Œè§†é¢‘ã€‚</p>
<p>æœ€ç»ˆï¼Œå®ç°ä¸ç‰©ç†ä¸–ç•Œçš„çœŸå®äº¤äº’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8d4140b881a4d8397e968ba30a17869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=1kek%2B%2BU6bkjX82GwHTcnipadzIM%3D" alt="" loading="lazy"/></p>
<p>è§†çº¿è½¬å›å›½å†…ï¼Œé˜¿é‡Œã€å­—èŠ‚ç­‰å¤´éƒ¨å¤§å‚åŒæ ·åœ¨å¤šæ¨¡æ€èµ›é“ä¸Šé‡å…µå¸ƒå±€ã€‚è€Œåœ¨ä¼—å¤šè·¯å¾„ä¸­ï¼Œç™¾åº¦é€‰æ‹©äº†ä¸€æ¡æ›´æ•ˆç‡å¯¼å‘çš„é“è·¯â€”â€”<strong>ã€Œã€ŒåŸç”Ÿå…¨æ¨¡æ€ã€ã€</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd1003f41fe4e85b0183500eb99b453~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=2dS7JgCYFW%2BqSu0c156MFbwNdYc%3D" alt="" loading="lazy"/></p>
<p>åŸç”Ÿå…¨æ¨¡æ€ï¼Œæ„å‘³ç€æ¨¡å‹ä»è®­ç»ƒçš„ç¬¬ä¸€å¤©èµ·ï¼Œå°±å¦‚äººç±»ä¸€èˆ¬ï¼Œæ´»åœ¨è§†è§‰ã€å¬è§‰ä¸æ–‡å­—äº¤èçš„ç»Ÿä¸€æ„ŸçŸ¥ä¸­ã€‚</p>
<p>å’Œå©´å„¿ä¸€æ ·ï¼Œå®ƒå­¦ä¹ ä¸–ç•Œçš„æ–¹å¼æ˜¯é€šè¿‡æ‰€æœ‰æ„Ÿå®˜çš„åŒæ­¥è¾“å…¥æ¥å½¢æˆè®¤çŸ¥ã€‚æ¯•ç«Ÿï¼Œäººç±»çš„æ€è€ƒä»æ¥éƒ½ä¸æ˜¯ã€Œå…ˆçœ‹å†å¬å†æƒ³ã€çš„çº¿æ€§æ¥åŠ›ï¼Œè€Œæ˜¯æ‰€æœ‰ä¿¡æ¯æ´ªæµçš„åŒæ­¥èåˆã€‚</p>
<p>è¿™ä¹‹ä¸­çš„æ ¸å¿ƒï¼Œä¾¿æ˜¯å°†æ¯ä¸€å¸§ç”»é¢ã€æ¯ä¸€æ®µå£°éŸ³ã€ä¹ƒè‡³æ¯ä¸€ä¸ªè¯è¯­ï¼Œéƒ½è½¬åŒ–ä¸ºä¸€å¥—ç»Ÿä¸€çš„ç¦»æ•£ç¬¦å·æµï¼Œå¹¶ç½®äºåŒä¸€ä¸ªè‡ªå›å½’æ¡†æ¶ä¸‹å»ºæ¨¡ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ è¾“å…¥ä¸€æ®µè¡—å¤´è‰ºäººè¡¨æ¼”çš„è§†é¢‘ï¼Œæ¢å¯»ã€ŒèƒŒåçš„æ•…äº‹ã€æ—¶ï¼ŒAI ä¸å†æ˜¯å‰²è£‚åœ°è§£æç”»é¢ã€åˆ†æéŸ³é¢‘ï¼Œæœ€åæ‹¼å‡‘ç­”æ¡ˆã€‚å®ƒèƒ½åœ¨ä¸€ä¸ªç»Ÿä¸€çš„è¯­ä¹‰ç©ºé—´ä¸­ï¼ŒåŒæ­¥å®Œæˆæ„ŸçŸ¥ã€æ¨ç†ä¸å™äº‹ï¼Œåƒäººç±»ä¸€æ ·ï¼Œç»™äºˆä¸€ä¸ªå®Œæ•´è€Œæ·±åˆ»çš„å›åº”ã€‚</p>
<p>æ­£æ˜¯å‡­å€Ÿè¿™ç§å…¨æ¨¡æ€çš„å†…åœ¨ä¼˜åŠ¿ï¼Œæ–‡å¿ƒ 5.0 å¾—ä»¥çªç ´å¤æ‚åœºæ™¯çš„æŸç¼šï¼Œä¸º AI çš„æœªæ¥åº”ç”¨å¼€å¯æ— é™æƒ³è±¡ã€‚</p>
<p>æ›´å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ–‡å¿ƒçš„å®åŠ›ï¼Œæ—©å·²è¶…è¶Šäº†å®éªŒå®¤çš„èŒƒç•´ï¼Œåœ¨çœŸå®åº”ç”¨ä¸­å½¢æˆäº†æŠ€æœ¯è½åœ°çš„é—­ç¯ã€‚</p>
<p>å‘å¸ƒä¼šç°åœºï¼Œä¸ç™¾åº¦è¿çº¿çš„ã€ŒAI è€ç½—ã€ä¾¿æ˜¯æœ€å¥½çš„è¯æ˜ã€‚ä»–ä¸ä»…èƒ½è½»æ¾åšå‡ºã€Œç‚¹èµã€æ¯”å¿ƒã€æ¯”è€¶ã€çš„äº’åŠ¨ä¸‰è¿ï¼Œæ›´åœ¨é—®ç­”ç¯èŠ‚ä¸­ï¼Œå°†ç½—æ°¸æµ©æœ¬äººã€ŒçŠ€åˆ©åæ§½ã€çš„è¯­è¨€é£æ ¼æ¨¡ä»¿å¾—æƒŸå¦™æƒŸè‚–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d856f83569c41a196b4525f6d19f762~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211095&amp;x-signature=gzgqo0KNeDumM5X3ssmhh10RFzg%3D" alt="" loading="lazy"/></p>
<p>æŠ€æœ¯åŸºäºæ…§æ’­æ˜Ÿé«˜è¯´æœåŠ›æ•°å­—äºº</p>
<p>å¦‚ä»Šï¼Œå½“ç†è§£ä¸ç”Ÿæˆèµ°å‘ç»Ÿä¸€ï¼Œå½“æŠ€æœ¯ä¸åº”ç”¨ååŒå…±ç”Ÿï¼Œäººæœºæ™ºèƒ½çš„è¾¹ç•Œä¹Ÿæ­£æ‚„ç„¶æ¶ˆèã€‚</p>
<p>åœ¨è¿™åœºå…¨çƒå¤§æ¨¡å‹çš„æ¿€çƒˆè§’é€ä¸­ï¼Œæ–‡å¿ƒæ­£ä»¥å…¨æ–°å§¿æ€ï¼Œå¼ºåŠ¿å›å½’ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨LangGraphæ„å»ºè‡ªä¸»RAG5]]></title>    <link>https://juejin.cn/post/7574584245110620211</link>    <guid>https://juejin.cn/post/7574584245110620211</guid>    <pubDate>2025-11-20T03:00:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245110620211" data-draft-id="7574357603406315570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨LangGraphæ„å»ºè‡ªä¸»RAG5"/> <meta itemprop="keywords" content="OpenAI,AIGC,Agent"/> <meta itemprop="datePublished" content="2025-11-20T03:00:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ€æ´¾Anspire"/> <meta itemprop="url" content="https://juejin.cn/user/3044964115417419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨LangGraphæ„å»ºè‡ªä¸»RAG5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044964115417419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ€æ´¾Anspire
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T03:00:27.000Z" title="Thu Nov 20 2025 03:00:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€å•çš„RAGä»£ç å®ç°</h3>
<p>åœ¨è¿™ä¸ªç®€å•çš„RAGä¸­ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<p><strong>æŸ¥è¯¢ â†’ æ£€ç´¢ â†’ æç¤ºæ„å»ºï¼ˆå¢å¼ºï¼‰ â†’ ç”Ÿæˆ</strong></p>
<p>è¯¥æµç¨‹ä½¿ç”¨LangGraphçš„çŠ¶æ€å›¾å®ç°ï¼ŒåŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹ï¼ˆæ­¥éª¤ï¼‰ï¼š</p>
<p>1. <strong>æ£€ç´¢å™¨</strong>ï¼šå¯¹ `medical_q_n_a` é›†åˆæ‰§è¡Œç›¸ä¼¼æ€§æŸ¥è¯¢ï¼Œå¹¶å°†æ’åé å‰çš„æ–‡æ¡£åˆå¹¶ä¸ºä¸€ä¸ªä¸Šä¸‹æ–‡å­—ç¬¦ä¸²ã€‚</p>
<p>2. <strong>PromptBuilder</strong>ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„RAGæç¤ºï¼Œè¯¥æç¤ºæ³¨å…¥æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å’Œç”¨æˆ·é—®é¢˜ï¼Œå¹¶å¸¦æœ‰é•¿åº¦é™åˆ¶ã€‚</p>
<p>3. <strong>å¤§è¯­è¨€æ¨¡å‹</strong>ï¼šè°ƒç”¨ `get_llm_response(prompt)` å¹¶å°†æ¨¡å‹è¾“å‡ºä¿å­˜åˆ°å·¥ä½œæµçŠ¶æ€ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span>
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph,MessagesState, START, END
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> typing_extensions <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-comment"># === Define workflow node functions ===</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_context</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Retrieve top documents from ChromaDB based on query."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---RETRIEVING CONTEXT---"</span>)
    query = state[<span class="hljs-string">"query"</span>] <span class="hljs-comment"># last user message</span>
    results = collection1.query(query_texts=[query], n_results=<span class="hljs-number">3</span>)
    context = <span class="hljs-string">"\n"</span>.join(results[<span class="hljs-string">"documents"</span>][<span class="hljs-number">0</span>])
    <span class="hljs-comment">#state["query"] = query</span>
    state[<span class="hljs-string">"context"</span>] = context
    <span class="hljs-built_in">print</span>(context)
    <span class="hljs-comment"># Save context in the state for later nodes</span>
    <span class="hljs-keyword">return</span> state
<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_prompt</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Construct the RAG-style prompt."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---AUGMENT (BUILDING PROMPT)---"</span>)
    query = state[<span class="hljs-string">"query"</span>]
    context = state[<span class="hljs-string">"context"</span>]
    prompt = <span class="hljs-string">f"""
            Answer the following question using the context below.
            Context:
            <span class="hljs-subst">{context}</span>
            Question: <span class="hljs-subst">{query}</span>
            please limit your answer in 50 words.
            """</span>
    
    state[<span class="hljs-string">"prompt"</span>] = prompt
    <span class="hljs-built_in">print</span>(prompt)
    <span class="hljs-keyword">return</span> state
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_llm</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Call your existing LLM function."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---GENERATE (CALLING LLM)---"</span>)
    prompt = state[<span class="hljs-string">"prompt"</span>]
    answer = get_llm_response(prompt)
    state[<span class="hljs-string">"response"</span>] = answer
    <span class="hljs-keyword">return</span> state
<span class="hljs-comment"># === Build the workflow ===</span>
<span class="hljs-comment">## Define the state structure</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    query : <span class="hljs-built_in">str</span>
    prompt : <span class="hljs-built_in">str</span>
    context : <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]
    response : <span class="hljs-built_in">str</span>
    
workflow = StateGraph(GraphState)
<span class="hljs-comment"># Add nodes</span>
workflow.add_node(<span class="hljs-string">"Retriever"</span>, retrieve_context)
workflow.add_node(<span class="hljs-string">"Augment"</span>, build_prompt)
workflow.add_node(<span class="hljs-string">"Generate"</span>, call_llm)
<span class="hljs-comment"># Define edges</span>
workflow.add_edge(START, <span class="hljs-string">"Retriever"</span>)
workflow.add_edge(<span class="hljs-string">"Retriever"</span>, <span class="hljs-string">"Augment"</span>)
workflow.add_edge(<span class="hljs-string">"Augment"</span>, <span class="hljs-string">"Generate"</span>)
workflow.add_edge(<span class="hljs-string">"Generate"</span>, END)
<span class="hljs-comment"># Compile agent</span>
rag_agent = workflow.<span class="hljs-built_in">compile</span>()
<span class="hljs-comment"># === Run it ===</span>
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> Image, display
display(Image(rag_agent.get_graph().draw_mermaid_png()))
</code></pre>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64a6a445e98245b99001ea501bb3ba7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212427&amp;x-signature=PsEYblTLbhXnZUxki6UjJEGtFpM%3D" alt="" loading="lazy"/></p>
<p>ç®€å•çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰</p>
<p>æµ‹è¯•ç®€å•RAGï¼š</p>
<pre><code class="hljs language-css" lang="css">input_state = {"query": <span class="hljs-string">"What are the treatments for Kawasaki disease ?"</span>}
<span class="hljs-selector-tag">from</span> pprint import pprint
for step in rag_agent<span class="hljs-selector-class">.stream</span>(input_state):
    for key, value in step.<span class="hljs-built_in">items</span>():
        <span class="hljs-built_in">pprint</span>(f<span class="hljs-string">"Finished running: {key}:"</span>)
<span class="hljs-built_in">pprint</span>(value[<span class="hljs-string">"response"</span>])
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-scala" lang="scala">---<span class="hljs-type">RETRIEVING</span> <span class="hljs-type">CONTEXT</span>---
<span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Kawasaki</span> disease ?. <span class="hljs-type">Answer</span>: <span class="hljs-type">These</span> resources address the diagnosis or management of <span class="hljs-type">Kawasaki</span> disease:  - <span class="hljs-type">Cincinnati</span> <span class="hljs-type">Children</span>'s <span class="hljs-type">Hospital</span> <span class="hljs-type">Medical</span> <span class="hljs-type">Center</span>  - <span class="hljs-type">Genetic</span> <span class="hljs-type">Testing</span> <span class="hljs-type">Registry</span>: <span class="hljs-type">Acute</span> febrile mucocutaneous lymph node syndrome  - <span class="hljs-type">National</span> <span class="hljs-type">Heart</span>, <span class="hljs-type">Lung</span>, and <span class="hljs-type">Blood</span> <span class="hljs-type">Institute</span>: <span class="hljs-type">How</span> is <span class="hljs-type">Kawasaki</span> <span class="hljs-type">Disease</span> <span class="hljs-type">Treated</span>?   <span class="hljs-type">These</span> resources from <span class="hljs-type">MedlinePlus</span> offer information about the diagnosis and management of various health conditions:  - <span class="hljs-type">Diagnostic</span> <span class="hljs-type">Tests</span>  - <span class="hljs-type">Drug</span> <span class="hljs-type">Therapy</span>  - <span class="hljs-type">Surgery</span> and <span class="hljs-type">Rehabilitation</span>  - <span class="hljs-type">Genetic</span> <span class="hljs-type">Counseling</span>   - <span class="hljs-type">Palliative</span> <span class="hljs-type">Care</span>. <span class="hljs-type">Type</span>: treatment. 
<span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Krabbe</span> <span class="hljs-type">Disease</span> ?. <span class="hljs-type">Answer</span>: <span class="hljs-type">There</span> is no cure <span class="hljs-keyword">for</span> <span class="hljs-type">Krabbe</span> disease. <span class="hljs-type">Results</span> of a very small clinical trial of children <span class="hljs-keyword">with</span> infantile <span class="hljs-type">Krabbe</span> disease found that children who received umbilical cord blood stem cells from unrelated donors prior to symptom onset developed <span class="hljs-keyword">with</span> little neurological impairment. <span class="hljs-type">Bone</span> marrow transplantation may help some people. <span class="hljs-type">Generally</span>, treatment <span class="hljs-keyword">for</span> the disorder is symptomatic and supportive. <span class="hljs-type">Physical</span> therapy may help maintain or increase muscle tone and circulation.. <span class="hljs-type">Type</span>: treatment. 
<span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Ehlers</span>-<span class="hljs-type">Danlos</span> syndrome, progeroid <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">?</span>. <span class="hljs-title">Answer</span></span>: <span class="hljs-type">How</span> might <span class="hljs-type">Ehlers</span>-<span class="hljs-type">Danlos</span> syndrome progeroid <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">be</span> <span class="hljs-title">treated?</span> <span class="hljs-title">Individuals</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Ehlers-Danlos</span> <span class="hljs-title">Syndrome</span> <span class="hljs-title">progeroid</span> <span class="hljs-title">type</span> <span class="hljs-title">can</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">a</span> <span class="hljs-title">variety</span> <span class="hljs-title">of</span> <span class="hljs-title">treatments</span> <span class="hljs-title">depending</span> <span class="hljs-title">on</span> <span class="hljs-title">their</span> <span class="hljs-title">symptoms</span>. <span class="hljs-title">Affected</span> <span class="hljs-title">children</span> <span class="hljs-keyword">with</span> <span class="hljs-title">weak</span> <span class="hljs-title">muscle</span> <span class="hljs-title">tone</span> <span class="hljs-title">and</span> <span class="hljs-title">delayed</span> <span class="hljs-title">development</span> <span class="hljs-title">might</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">physiotherapy</span> <span class="hljs-title">to</span> <span class="hljs-title">improve</span> <span class="hljs-title">muscle</span> <span class="hljs-title">strength</span> <span class="hljs-title">and</span> <span class="hljs-title">coordination</span>. <span class="hljs-title">Affected</span> <span class="hljs-title">individuals</span> <span class="hljs-keyword">with</span> <span class="hljs-title">joint</span> <span class="hljs-title">pain</span> <span class="hljs-title">might</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">anti-inflammatory</span> <span class="hljs-title">drugs</span>. <span class="hljs-title">Lifestyle</span> <span class="hljs-title">changes</span> <span class="hljs-title">or</span> <span class="hljs-title">precautions</span> <span class="hljs-title">during</span> <span class="hljs-title">exercise</span> <span class="hljs-title">or</span> <span class="hljs-title">intense</span> <span class="hljs-title">physical</span> <span class="hljs-title">activity</span> <span class="hljs-title">may</span> <span class="hljs-title">be</span> <span class="hljs-title">advised</span> <span class="hljs-title">to</span> <span class="hljs-title">reduce</span> <span class="hljs-title">the</span> <span class="hljs-title">chance</span> <span class="hljs-title">of</span> <span class="hljs-title">accidents</span> <span class="hljs-title">to</span> <span class="hljs-title">the</span> <span class="hljs-title">skin</span> <span class="hljs-title">and</span> <span class="hljs-title">bone</span>. <span class="hljs-title">It</span> <span class="hljs-title">is</span> <span class="hljs-title">recommended</span> <span class="hljs-title">that</span> <span class="hljs-title">affected</span> <span class="hljs-title">individuals</span> <span class="hljs-title">discuss</span> <span class="hljs-title">treatment</span> <span class="hljs-title">options</span> <span class="hljs-keyword">with</span> <span class="hljs-title">their</span> <span class="hljs-title">healthcare</span> <span class="hljs-title">provider</span>.. <span class="hljs-title">Type</span></span>: treatment. 
'<span class="hljs-type">Finished</span> running: <span class="hljs-type">Retriever</span>:'
---<span class="hljs-type">AUGMENT</span> (<span class="hljs-type">BUILDING</span> <span class="hljs-type">PROMPT</span>)---
<span class="hljs-type">Answer</span> the following question using the context below.
            <span class="hljs-type">Context</span>:
            <span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Kawasaki</span> disease ?. <span class="hljs-type">Answer</span>: <span class="hljs-type">These</span> resources address the diagnosis or management of <span class="hljs-type">Kawasaki</span> disease:  - <span class="hljs-type">Cincinnati</span> <span class="hljs-type">Children</span>'s <span class="hljs-type">Hospital</span> <span class="hljs-type">Medical</span> <span class="hljs-type">Center</span>  - <span class="hljs-type">Genetic</span> <span class="hljs-type">Testing</span> <span class="hljs-type">Registry</span>: <span class="hljs-type">Acute</span> febrile mucocutaneous lymph node syndrome  - <span class="hljs-type">National</span> <span class="hljs-type">Heart</span>, <span class="hljs-type">Lung</span>, and <span class="hljs-type">Blood</span> <span class="hljs-type">Institute</span>: <span class="hljs-type">How</span> is <span class="hljs-type">Kawasaki</span> <span class="hljs-type">Disease</span> <span class="hljs-type">Treated</span>?   <span class="hljs-type">These</span> resources from <span class="hljs-type">MedlinePlus</span> offer information about the diagnosis and management of various health conditions:  - <span class="hljs-type">Diagnostic</span> <span class="hljs-type">Tests</span>  - <span class="hljs-type">Drug</span> <span class="hljs-type">Therapy</span>  - <span class="hljs-type">Surgery</span> and <span class="hljs-type">Rehabilitation</span>  - <span class="hljs-type">Genetic</span> <span class="hljs-type">Counseling</span>   - <span class="hljs-type">Palliative</span> <span class="hljs-type">Care</span>. <span class="hljs-type">Type</span>: treatment. 
<span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Krabbe</span> <span class="hljs-type">Disease</span> ?. <span class="hljs-type">Answer</span>: <span class="hljs-type">There</span> is no cure <span class="hljs-keyword">for</span> <span class="hljs-type">Krabbe</span> disease. <span class="hljs-type">Results</span> of a very small clinical trial of children <span class="hljs-keyword">with</span> infantile <span class="hljs-type">Krabbe</span> disease found that children who received umbilical cord blood stem cells from unrelated donors prior to symptom onset developed <span class="hljs-keyword">with</span> little neurological impairment. <span class="hljs-type">Bone</span> marrow transplantation may help some people. <span class="hljs-type">Generally</span>, treatment <span class="hljs-keyword">for</span> the disorder is symptomatic and supportive. <span class="hljs-type">Physical</span> therapy may help maintain or increase muscle tone and circulation.. <span class="hljs-type">Type</span>: treatment. 
<span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Ehlers</span>-<span class="hljs-type">Danlos</span> syndrome, progeroid <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">?</span>. <span class="hljs-title">Answer</span></span>: <span class="hljs-type">How</span> might <span class="hljs-type">Ehlers</span>-<span class="hljs-type">Danlos</span> syndrome progeroid <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">be</span> <span class="hljs-title">treated?</span> <span class="hljs-title">Individuals</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Ehlers-Danlos</span> <span class="hljs-title">Syndrome</span> <span class="hljs-title">progeroid</span> <span class="hljs-title">type</span> <span class="hljs-title">can</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">a</span> <span class="hljs-title">variety</span> <span class="hljs-title">of</span> <span class="hljs-title">treatments</span> <span class="hljs-title">depending</span> <span class="hljs-title">on</span> <span class="hljs-title">their</span> <span class="hljs-title">symptoms</span>. <span class="hljs-title">Affected</span> <span class="hljs-title">children</span> <span class="hljs-keyword">with</span> <span class="hljs-title">weak</span> <span class="hljs-title">muscle</span> <span class="hljs-title">tone</span> <span class="hljs-title">and</span> <span class="hljs-title">delayed</span> <span class="hljs-title">development</span> <span class="hljs-title">might</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">physiotherapy</span> <span class="hljs-title">to</span> <span class="hljs-title">improve</span> <span class="hljs-title">muscle</span> <span class="hljs-title">strength</span> <span class="hljs-title">and</span> <span class="hljs-title">coordination</span>. <span class="hljs-title">Affected</span> <span class="hljs-title">individuals</span> <span class="hljs-keyword">with</span> <span class="hljs-title">joint</span> <span class="hljs-title">pain</span> <span class="hljs-title">might</span> <span class="hljs-title">benefit</span> <span class="hljs-title">from</span> <span class="hljs-title">anti-inflammatory</span> <span class="hljs-title">drugs</span>. <span class="hljs-title">Lifestyle</span> <span class="hljs-title">changes</span> <span class="hljs-title">or</span> <span class="hljs-title">precautions</span> <span class="hljs-title">during</span> <span class="hljs-title">exercise</span> <span class="hljs-title">or</span> <span class="hljs-title">intense</span> <span class="hljs-title">physical</span> <span class="hljs-title">activity</span> <span class="hljs-title">may</span> <span class="hljs-title">be</span> <span class="hljs-title">advised</span> <span class="hljs-title">to</span> <span class="hljs-title">reduce</span> <span class="hljs-title">the</span> <span class="hljs-title">chance</span> <span class="hljs-title">of</span> <span class="hljs-title">accidents</span> <span class="hljs-title">to</span> <span class="hljs-title">the</span> <span class="hljs-title">skin</span> <span class="hljs-title">and</span> <span class="hljs-title">bone</span>. <span class="hljs-title">It</span> <span class="hljs-title">is</span> <span class="hljs-title">recommended</span> <span class="hljs-title">that</span> <span class="hljs-title">affected</span> <span class="hljs-title">individuals</span> <span class="hljs-title">discuss</span> <span class="hljs-title">treatment</span> <span class="hljs-title">options</span> <span class="hljs-keyword">with</span> <span class="hljs-title">their</span> <span class="hljs-title">healthcare</span> <span class="hljs-title">provider</span>.. <span class="hljs-title">Type</span></span>: treatment. 
            <span class="hljs-type">Question</span>: <span class="hljs-type">What</span> are the treatments <span class="hljs-keyword">for</span> <span class="hljs-type">Kawasaki</span> disease ?
            please limit your answer in <span class="hljs-number">50</span> words.
            
'<span class="hljs-type">Finished</span> running: <span class="hljs-type">Augment</span>:'
---<span class="hljs-type">GENERATE</span> (<span class="hljs-type">CALLING</span> <span class="hljs-type">LLM</span>)---
'<span class="hljs-type">Finished</span> running: <span class="hljs-type">Generate</span>:'
('<span class="hljs-type">Kawasaki</span> disease is treated mainly <span class="hljs-keyword">with</span> intravenous immunoglobulin (<span class="hljs-type">IVIG</span>) '
 'and high-dose aspirin to reduce inflammation and prevent coronary artery '
 'aneurysms. <span class="hljs-type">If</span> fever recurs or <span class="hljs-type">IVIG</span> resistance occurs, additional treatments '
 '(repeat <span class="hljs-type">IVIG</span>, steroids) may be considered; ongoing monitoring <span class="hljs-keyword">with</span> '
 'echocardiograms is recommended.')
</code></pre>
<p>å…¬å¹³åˆç®€å•ï¼Œå¯¹å§ã€‚ä½†è¦æ˜¯æœ‰äººé—®å‡ºè¶…å‡ºå¤§çº²çš„é—®é¢˜å‘¢ï¼ï¼</p>
<p>æ˜¯çš„ï¼Œç³»ç»Ÿå½»åº•å¤±è´¥äº†ã€‚</p>
<p>åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬æœ‰æ™ºèƒ½å¢å¼ºæ£€ç´¢ç”Ÿæˆï¼ˆAgentic RAGï¼‰ä½œä¸ºæ•‘æ˜Ÿã€‚</p>
<h2 data-id="heading-1">èƒ½åŠ¨RAG - ä»£ç å®ç°</h2>
<p>æ ¸å¿ƒæ€æƒ³ï¼šä¸æ˜¯å§‹ç»ˆä½¿ç”¨åŒä¸€ä¸ªæ£€ç´¢å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå°å‹è·¯ç”±ä»£ç†ï¼Œå®ƒåœ¨å¤šä¸ªæ£€ç´¢é€‰é¡¹ä¸­è¿›è¡Œå†³ç­–ï¼Œç„¶åéªŒè¯æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡æ˜¯å¦ç›¸å…³ã€‚</p>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><strong>æŸ¥è¯¢ â†’ è·¯ç”±å™¨ï¼ˆæºé€‰æ‹©ï¼‰ â†’ æ£€ç´¢ â†’ ç›¸å…³æ€§æ£€æŸ¥å™¨ â†’ å¦‚æœç›¸å…³ï¼šç”Ÿæˆï¼Œå¦‚æœä¸ç›¸å…³ï¼šè½¬åˆ°ç½‘ç»œæœç´¢ â†’ ç»“æŸ</strong></p>
<p>è¿™äº›æ˜¯ä½¿ç”¨LangGraphçš„StateGraphèŠ‚ç‚¹å®ç°çš„ã€‚æ¡ä»¶æ˜¯ä½¿ç”¨â€œconditional_edgeâ€å®ç°çš„ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å…³é”®èŠ‚ç‚¹ï¼š</p>
<p><strong>1.</strong> <strong>è·¯ç”±èŠ‚ç‚¹</strong>ï¼šæ„å»ºä¸€ä¸ªç®€çŸ­çš„å†³ç­–æç¤ºï¼Œå¹¶è¦æ±‚å¤§è¯­è¨€æ¨¡å‹è¿”å›ä¸‰ä¸ªæ ‡ç­¾ä¹‹ä¸€ï¼š`Retrieve_QnA`ã€`Retrieve_Device`æˆ–`Web_Search`ã€‚</p>
<p><strong>2. æ£€ç´¢å™¨èŠ‚ç‚¹</strong>ï¼šä¸€ä¸ªç”¨äºé—®ç­”Chromaé›†åˆï¼Œä¸€ä¸ªç”¨äºè®¾å¤‡æ‰‹å†ŒChromaé›†åˆï¼Œä¸€ä¸ªç”¨äºç½‘ç»œæœç´¢APIã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¿”å›ä¸€ä¸ªä¸Šä¸‹æ–‡å­—ç¬¦ä¸²å¹¶è®¾ç½®ä¸€ä¸ª `source` æ ‡ç­¾ã€‚</p>
<p><strong>3.</strong> <strong>ç›¸å…³æ€§æ£€æŸ¥å™¨</strong>ï¼šè¯¢é—®å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡æ˜¯å¦ç›¸å…³ï¼ˆç­”æ¡ˆåº”ä¸º`æ˜¯`æˆ–`å¦`ï¼‰ã€‚</p>
<p><strong>4. æ¡ä»¶è·¯ç”±</strong>ï¼šå¦‚æœç›¸å…³æ€§ä¸º`æ˜¯`ï¼Œåˆ™ç»§ç»­è¿›è¡Œæç¤ºæ„å»ºå’Œå¤§è¯­è¨€æ¨¡å‹å¤„ç†ã€‚å¦‚æœä¸º`å¦`ï¼Œåˆ™å›é€€åˆ°`ç½‘ç»œæœç´¢`å¹¶é‡æ–°è¿è¡Œç›¸å…³æ€§æ£€æŸ¥ï¼›æµç¨‹å°†è¿­ä»£æ¬¡æ•°é™åˆ¶ä¸ºæœ€å¤š3æ¬¡å°è¯•ã€‚</p>
<p>èƒ½åŠ¨æµå°†è¿™äº›èŠ‚ç‚¹ç»„åˆæˆä¸€ä¸ªå¸¦æœ‰æ¡ä»¶è¾¹çš„çŠ¶æ€å›¾ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span>
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph,MessagesState, START, END
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> typing_extensions <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-comment"># === Define workflow node functions ===</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_context_q_n_a</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Retrieve top documents from ChromaDB Collection 1 (Medical Q&amp;A Data) based on query."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---RETRIEVING CONTEXT---"</span>)
    query = state[<span class="hljs-string">"query"</span>] <span class="hljs-comment"># last user message</span>
    results = collection1.query(query_texts=[query], n_results=<span class="hljs-number">3</span>)
    context = <span class="hljs-string">"\n"</span>.join(results[<span class="hljs-string">"documents"</span>][<span class="hljs-number">0</span>])
    state[<span class="hljs-string">"context"</span>] = context
    state[<span class="hljs-string">"source"</span>] = <span class="hljs-string">"Medical Q&amp;A Collection"</span>
    <span class="hljs-built_in">print</span>(context)
    <span class="hljs-comment"># Save context in the state for later nodes</span>
    <span class="hljs-keyword">return</span> state
<span class="hljs-comment"># === Define workflow node functions ===</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_context_medical_device</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Retrieve top documents from ChromaDB Collection 2 (Medical Device Manuals Data) based on query."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---RETRIEVING CONTEXT---"</span>)
    query = state[<span class="hljs-string">"query"</span>] <span class="hljs-comment"># last user message</span>
    results = collection2.query(query_texts=[query], n_results=<span class="hljs-number">3</span>)
    context = <span class="hljs-string">"\n"</span>.join(results[<span class="hljs-string">"documents"</span>][<span class="hljs-number">0</span>])
    state[<span class="hljs-string">"context"</span>] = context
    state[<span class="hljs-string">"source"</span>] = <span class="hljs-string">"Medical Device Manual"</span>
    <span class="hljs-built_in">print</span>(context)
    <span class="hljs-comment"># Save context in the state for later nodes</span>
    <span class="hljs-keyword">return</span> state
<span class="hljs-keyword">def</span> <span class="hljs-title function_">web_search</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Perform web search using Google Serper API."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---PERFORMING WEB SEARCH---"</span>)
    query = state[<span class="hljs-string">"query"</span>]
    search_results = search.run(query=query)
    state[<span class="hljs-string">"context"</span>] = search_results
    state[<span class="hljs-string">"source"</span>] = <span class="hljs-string">"Web Search"</span>
    <span class="hljs-built_in">print</span>(search_results)
    <span class="hljs-keyword">return</span> state
<span class="hljs-keyword">def</span> <span class="hljs-title function_">router</span>(<span class="hljs-params">state: GraphState</span>) -&gt; <span class="hljs-type">Literal</span>[
    <span class="hljs-string">"Retrieve_QnA"</span>, <span class="hljs-string">"Retrieve_Device"</span>, <span class="hljs-string">"Web_Search"</span>
]:
    <span class="hljs-string">"""Agentic router: decides which retrieval method to use."""</span>
    query = state[<span class="hljs-string">"query"</span>]
    <span class="hljs-comment"># A lightweight decision LLM - you can replace this with GPT-4o-mini, etc.</span>
    decision_prompt = <span class="hljs-string">f"""
    You are a routing agent. Based on the user query, decide where to look for information.
    Options:
    - Retrieve_QnA: if it's about general medical knowledge, symptoms, or treatment.
    - Retrieve_Device: if it's about medical devices, manuals, or instructions.
    - Web_Search: if it's about recent news, brand names, or external data.
    Query: "<span class="hljs-subst">{query}</span>"
    Respond ONLY with one of: Retrieve_QnA, Retrieve_Device, Web_Search
    """</span>
    router_decision = get_llm_response(decision_prompt).strip()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"---ROUTER DECISION: <span class="hljs-subst">{router_decision}</span>---"</span>)
    <span class="hljs-built_in">print</span>(router_decision)
    state[<span class="hljs-string">"source"</span>] = router_decision
    <span class="hljs-keyword">return</span> state
<span class="hljs-comment"># Define the routing function for the conditional edge</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_decision</span>(<span class="hljs-params">state: GraphState</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">"source"</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_prompt</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Construct the RAG-style prompt."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---AUGMENT (BUILDING GENERATIVE PROMPT)---"</span>)
    query = state[<span class="hljs-string">"query"</span>]
    context = state[<span class="hljs-string">"context"</span>]
    prompt = <span class="hljs-string">f"""
            Answer the following question using the context below.
            Context:
            <span class="hljs-subst">{context}</span>
            Question: <span class="hljs-subst">{query}</span>
            please limit your answer in 50 words.
            """</span>
    
    state[<span class="hljs-string">"prompt"</span>] = prompt
    <span class="hljs-built_in">print</span>(prompt)
    <span class="hljs-keyword">return</span> state

<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_llm</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Call your existing LLM function."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---GENERATE (CALLING LLM)---"</span>)
    prompt = state[<span class="hljs-string">"prompt"</span>]
    answer = get_llm_response(prompt)
    state[<span class="hljs-string">"response"</span>] = answer
    <span class="hljs-keyword">return</span> state

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_context_relevance</span>(<span class="hljs-params">state</span>):
    <span class="hljs-string">"""Determine whether to retrieved context is relevant or not."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---CONTEXT RELEVANCE CHECKER---"</span>)
    query = state[<span class="hljs-string">"query"</span>]
    context = state[<span class="hljs-string">"context"</span>]
    relevance_prompt = <span class="hljs-string">f"""
            Check the below context if the context is relevent to the user query or.
            ####
            Context:
            <span class="hljs-subst">{context}</span>
            ####
            User Query: <span class="hljs-subst">{query}</span>
            Options:
            - Yes: if the context is relevant.
            - No: if the context is not relevant.
            Please answer with only 'Yes' or 'No'.
            """</span>
    relevance_decision_value = get_llm_response(relevance_prompt).strip()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"---RELEVANCE DECISION: <span class="hljs-subst">{relevance_decision_value}</span>---"</span>)
    state[<span class="hljs-string">"is_relevant"</span>] = relevance_decision_value
    <span class="hljs-keyword">return</span> state
<span class="hljs-comment"># Define the check_context_relevance function for the conditional edge</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">relevance_decision</span>(<span class="hljs-params">state: GraphState</span>) -&gt; <span class="hljs-built_in">str</span>:
    iteration_count = state.get(<span class="hljs-string">"iteration_count"</span>, <span class="hljs-number">0</span>)
    iteration_count += <span class="hljs-number">1</span>
    state[<span class="hljs-string">"iteration_count"</span>] = iteration_count
    <span class="hljs-comment">## Limiting to max 3 iterations</span>
    <span class="hljs-keyword">if</span> iteration_count &gt;= <span class="hljs-number">3</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"---MAX ITERATIONS REACHED, FORCING 'Yes'---"</span>)
        state[<span class="hljs-string">"is_relevant"</span>] = <span class="hljs-string">"Yes"</span>
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">"is_relevant"</span>]

<span class="hljs-comment"># === Build the workflow ===</span>
<span class="hljs-comment">## Define the state structure</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    query: <span class="hljs-built_in">str</span>
    context: <span class="hljs-built_in">str</span>
    prompt: <span class="hljs-built_in">str</span>
    response: <span class="hljs-built_in">str</span>
    source: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># Which retriever/tool was used</span>
    is_relevant: <span class="hljs-built_in">str</span>
    iteration_count: <span class="hljs-built_in">int</span>
    
workflow = StateGraph(GraphState)
<span class="hljs-comment"># Add nodes</span>
workflow.add_node(<span class="hljs-string">"Router"</span>, router)
workflow.add_node(<span class="hljs-string">"Retrieve_QnA"</span>, retrieve_context_q_n_a)
workflow.add_node(<span class="hljs-string">"Retrieve_Device"</span>, retrieve_context_medical_device)
workflow.add_node(<span class="hljs-string">"Web_Search"</span>, web_search)
workflow.add_node(<span class="hljs-string">"Relevance_Checker"</span>, check_context_relevance)
workflow.add_node(<span class="hljs-string">"Augment"</span>, build_prompt)
workflow.add_node(<span class="hljs-string">"Generate"</span>, call_llm)
<span class="hljs-comment"># Define edges</span>
workflow.add_edge(START, <span class="hljs-string">"Router"</span>)
workflow.add_conditional_edges(
    <span class="hljs-string">"Router"</span>,
    route_decision,  <span class="hljs-comment"># this function decides the path dynamically</span>
    {
        <span class="hljs-string">"Retrieve_QnA"</span>: <span class="hljs-string">"Retrieve_QnA"</span>,
        <span class="hljs-string">"Retrieve_Device"</span>: <span class="hljs-string">"Retrieve_Device"</span>,
        <span class="hljs-string">"Web_Search"</span>: <span class="hljs-string">"Web_Search"</span>,
    }
)
workflow.add_edge(<span class="hljs-string">"Retrieve_QnA"</span>, <span class="hljs-string">"Relevance_Checker"</span>)
workflow.add_edge(<span class="hljs-string">"Retrieve_Device"</span>, <span class="hljs-string">"Relevance_Checker"</span>)
workflow.add_edge(<span class="hljs-string">"Web_Search"</span>, <span class="hljs-string">"Relevance_Checker"</span>)
workflow.add_conditional_edges(
    <span class="hljs-string">"Relevance_Checker"</span>,
    relevance_decision,  <span class="hljs-comment"># this function decides the path dynamically</span>
    {
        <span class="hljs-string">"Yes"</span>: <span class="hljs-string">"Augment"</span>,
        <span class="hljs-string">"No"</span>: <span class="hljs-string">"Web_Search"</span>,
    }
)
workflow.add_edge(<span class="hljs-string">"Augment"</span>, <span class="hljs-string">"Generate"</span>)
workflow.add_edge(<span class="hljs-string">"Generate"</span>, END)

<span class="hljs-comment"># Compile the dynamic RAG agent</span>
agentic_rag = workflow.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># ===================================</span>
<span class="hljs-comment"># ===  Visualize Workflow (Optional) ===</span>
<span class="hljs-comment"># ===================================</span>

<span class="hljs-comment"># === Run it ===</span>
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> Image, display
display(Image(agentic_rag.get_graph().draw_mermaid_png()))
</code></pre>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0ecc8e3b96a42ca94bf85dbcc1d38ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212427&amp;x-signature=hJkZZIBJU7UlRxLExq%2BfuBQmR9U%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker + Spring Bootï¼šå¤©ç”Ÿä¸€å¯¹çš„å®Œç¾éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7574318108720709678</link>    <guid>https://juejin.cn/post/7574318108720709678</guid>    <pubDate>2025-11-20T02:57:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574318108720709678" data-draft-id="7574625040629678118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker + Spring Bootï¼šå¤©ç”Ÿä¸€å¯¹çš„å®Œç¾éƒ¨ç½²"/> <meta itemprop="keywords" content="åç«¯,Java,Docker"/> <meta itemprop="datePublished" content="2025-11-20T02:57:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker + Spring Bootï¼šå¤©ç”Ÿä¸€å¯¹çš„å®Œç¾éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:57:34.000Z" title="Thu Nov 20 2025 02:57:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½¿ç”¨Dockeréƒ¨ç½²Spring Booté¡¹ç›®èƒ½æå¤§ç®€åŒ–ç¯å¢ƒé…ç½®å’Œåº”ç”¨åˆ†å‘ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¸…æ™°çš„æ“ä½œæµç¨‹ï¼Œä»¥åŠä¸€äº›å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚</p>
<h3 data-id="heading-0">ğŸš€ éƒ¨ç½²Spring Booté¡¹ç›®åˆ°Docker</h3>
<p>è¦å°†Spring Booté¡¹ç›®éƒ¨ç½²åˆ°Dockerï¼Œä¸»è¦æµç¨‹æ˜¯ï¼šå‡†å¤‡é¡¹ç›®ã€åˆ›å»ºDockeré•œåƒã€è¿è¡ŒDockerå®¹å™¨ã€‚ä»¥ä¸‹æ˜¯å…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡Spring Booté¡¹ç›®</strong><br/>
é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ä¸ªå¯è¿è¡Œçš„Spring Booté¡¹ç›®ï¼Œå¹¶å°†å…¶æ‰“åŒ…æˆJARæ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨Mavenå‘½ä»¤<code>mvn clean package</code>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å®Œæˆæ‰“åŒ…ã€‚æ‰“åŒ…åï¼Œç”Ÿæˆçš„JARæ–‡ä»¶é€šå¸¸ä½äºé¡¹ç›®ä¸‹çš„<code>target</code>ç›®å½•ä¸­ã€‚</p>
</li>
<li>
<p><strong>ç¼–å†™Dockerfile</strong><br/>
åœ¨é¡¹ç›®<strong>æ ¹ç›®å½•</strong>ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>Dockerfile</code>çš„æ–‡ä»¶ï¼ˆæ²¡æœ‰åç¼€ï¼‰ï¼Œå®ƒæ˜¯æ„å»ºDockeré•œåƒçš„è“å›¾ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå‚è€ƒç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨OpenJDKä½œä¸ºåŸºç¡€é•œåƒ</span>
FROM openjdk:11-jre-slim

<span class="hljs-comment"># è®¾ç½®å·¥ä½œç›®å½•</span>
WORKDIR /app

<span class="hljs-comment"># å°†æœ¬åœ°çš„JARæ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ä¸­çš„/appç›®å½•ä¸‹ï¼Œå¹¶é‡å‘½åä¸ºapp.jar</span>
COPY target/your-spring-boot-app.jar app.jar

<span class="hljs-comment"># æš´éœ²Spring Bootåº”ç”¨é»˜è®¤çš„8080ç«¯å£</span>
EXPOSE 8080

<span class="hljs-comment"># è®¾ç½®å¯åŠ¨å‘½ä»¤</span>
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"app.jar"</span>]
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè¯·åŠ¡å¿…å°†<code>your-spring-boot-app.jar</code>æ›¿æ¢ä¸ºä½ å®é™…çš„JARæ–‡ä»¶åã€‚</p>
</li>
<li>
<p><strong>æ„å»ºDockeré•œåƒ</strong><br/>
åœ¨ç»ˆç«¯ä¸­ï¼Œè¿›å…¥åˆ°åŒ…å«<code>Dockerfile</code>çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºé•œåƒï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">docker build -t your-spring-boot-app:latest .
</code></pre>
<p><code>-t</code>å‚æ•°ç”¨äºç»™é•œåƒå‘½åå’Œæ‰“æ ‡ç­¾ã€‚</p>
</li>
<li>
<p><strong>è¿è¡ŒDockerå®¹å™¨</strong><br/>
é•œåƒæ„å»ºæˆåŠŸåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨å®¹å™¨ï¼š</p>
<p>bash</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> --name your-container-name your-spring-boot-app:latest
</code></pre>
<ul>
<li><code>-d</code>ï¼šè¡¨ç¤ºå®¹å™¨åœ¨åå°è¿è¡Œã€‚</li>
<li><code>-p 8080:8080</code>ï¼šå°†ä¸»æœºçš„8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„8080ç«¯å£ã€‚</li>
<li><code>--name</code>ï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ã€‚</li>
</ul>
</li>
</ol>
<p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®Â <code>http://ä½ çš„æœåŠ¡å™¨IP:8080</code>Â æ¥æŸ¥çœ‹ä½ çš„åº”ç”¨äº†ã€‚</p>
<h3 data-id="heading-1">âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•</h3>
<p>åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å…¸å‹é—®é¢˜ï¼Œè¿™é‡Œæä¾›ä¸€äº›è§£å†³æ–¹æ¡ˆï¼š</p>

















<table><thead><tr><th>é—®é¢˜ç°è±¡</th><th>å¯èƒ½åŸå› ä¸è§£å†³æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>æ„å»ºé•œåƒæ—¶æ— æ³•ä¸‹è½½JDKåŸºç¡€é•œåƒ</strong>ï¼ˆé”™è¯¯ä¿¡æ¯å¯èƒ½åŒ…å«Â <code>failed to resolve source metadata</code>Â æˆ–Â <code>DeadlineExceeded</code>ï¼‰</td><td><strong>ç½‘ç»œé—®é¢˜</strong>ï¼šDockeré»˜è®¤ä»Docker Hubæ‹‰å–é•œåƒï¼Œå›½å†…ç½‘ç»œç¯å¢ƒå¯èƒ½å¯¼è‡´é€Ÿåº¦æ…¢æˆ–å¤±è´¥ã€‚ <strong>è§£å†³æ–¹æ³•</strong>ï¼šé…ç½®<strong>å›½å†…é•œåƒåŠ é€Ÿå™¨</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨Docker Desktopä¸­ï¼Œè¿›å…¥è®¾ç½® -&gt; Docker Engineï¼Œåœ¨é…ç½®ä¸­æ·»åŠ å¦‚Â <code>https://hub-mirror.c.163.com</code>ã€<code>https://mirror.baidubce.com</code>Â ç­‰é•œåƒåœ°å€ã€‚</td></tr><tr><td><strong>æ‰§è¡ŒÂ <code>docker build</code>Â å‘½ä»¤æ—¶ï¼Œæç¤ºÂ <code>COPY failed: file not found</code></strong></td><td><strong>JARæ–‡ä»¶è·¯å¾„é”™è¯¯</strong>ï¼š<code>Dockerfile</code>ä¸­<code>COPY</code>æŒ‡ä»¤æŒ‡å®šçš„JARæ–‡ä»¶è·¯å¾„æˆ–åç§°ä¸å®é™…ä¸ç¬¦ã€‚ <strong>è§£å†³æ–¹æ³•</strong>ï¼šç¡®è®¤é¡¹ç›®å·²æˆåŠŸæ‰§è¡Œ<code>mvn package</code>å‘½ä»¤æ‰“åŒ…ï¼Œå¹¶æ£€æŸ¥<code>Dockerfile</code>ä¸­<code>COPY</code>æŒ‡ä»¤çš„æºJARæ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åæ˜¯å¦æ­£ç¡®<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Flinxingliang%2Farticle%2Fdetails%2F149183628" target="_blank" title="https://blog.csdn.net/linxingliang/article/details/149183628" ref="nofollow noopener noreferrer"/>ã€‚</td></tr></tbody></table>
<h3 data-id="heading-2">ğŸ’¡ è¿›é˜¶ä½¿ç”¨ï¼šDocker Compose</h3>
<p>å¦‚æœä½ çš„åº”ç”¨è¿˜ä¾èµ–å…¶ä»–æœåŠ¡ï¼Œä¾‹å¦‚MySQLã€Redisç­‰ï¼Œæ¨èä½¿ç”¨<code>Docker Compose</code>æ¥å®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨åº”ç”¨ã€‚</p>
<ol>
<li>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>docker-compose.yml</code>æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ƒåŒæ—¶å¯åŠ¨äº†Spring Bootåº”ç”¨å’ŒMySQLæ•°æ®åº“ï¼š</p>
<p>yaml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">your-spring-boot-app:latest</span>  <span class="hljs-comment"># ä½¿ç”¨ä½ æ„å»ºçš„Spring Bootåº”ç”¨é•œåƒ</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>  <span class="hljs-comment"># è¡¨æ˜åº”ç”¨ä¾èµ–äºdbæœåŠ¡</span>

  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span>  <span class="hljs-comment"># ä½¿ç”¨MySQL 5.7çš„å®˜æ–¹é•œåƒ</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root_password</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">your_database_name</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">your_database_user</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">your_database_password</span>
</code></pre>
</li>
<li>
<p>åœ¨ç»ˆç«¯ä¸­ï¼Œè¿›å…¥è¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œè¿è¡Œ<code>docker-compose up</code>å‘½ä»¤ï¼Œå³å¯ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-3">ğŸ’ æ€»ç»“</h3>
<p>æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨Dockeréƒ¨ç½²Spring Booté¡¹ç›®ä¸»è¦åŒ…å«å››ä¸ªæ­¥éª¤ï¼š<strong>æ‰“åŒ…é¡¹ç›® â†’ ç¼–å†™Dockerfile â†’ æ„å»ºé•œåƒ â†’ è¿è¡Œå®¹å™¨</strong>ã€‚æŒæ¡è¿™ä¸ªæµç¨‹ï¼Œä½ å°±èƒ½è½»æ¾åœ°å°†è‡ªå·±çš„åº”ç”¨å®¹å™¨åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95603a04ecae4222b733c80dcccf0a7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764212254&amp;x-signature=QloIza0nZ3BNwhVo8ajHs0JBABQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„ç‹è€…è£è€€æœ‰æ•‘äº†ï¼è°·æ­Œå‘å¸ƒæ¸¸æˆ SIMA 2ï¼Œä¸å¼€å¤–æŒ‚ã€Œåƒäººä¸€æ ·ã€ç»ƒçº§]]></title>    <link>https://juejin.cn/post/7574357603406168114</link>    <guid>https://juejin.cn/post/7574357603406168114</guid>    <pubDate>2025-11-20T02:39:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574357603406168114" data-draft-id="7574568258789294131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„ç‹è€…è£è€€æœ‰æ•‘äº†ï¼è°·æ­Œå‘å¸ƒæ¸¸æˆ SIMA 2ï¼Œä¸å¼€å¤–æŒ‚ã€Œåƒäººä¸€æ ·ã€ç»ƒçº§"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-20T02:39:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„ç‹è€…è£è€€æœ‰æ•‘äº†ï¼è°·æ­Œå‘å¸ƒæ¸¸æˆ SIMA 2ï¼Œä¸å¼€å¤–æŒ‚ã€Œåƒäººä¸€æ ·ã€ç»ƒçº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T02:39:43.000Z" title="Thu Nov 20 2025 02:39:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9522a841c2f14a50848ac66f8dafb693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=804bTvF8ZcIrQgH8HkM2WL9gPY8%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘å¦‚æœä¸€ä¸ª AIï¼Œåƒäººç±»ä¸€æ ·çœ‹å±å¹•ã€æ•²é”®é¼ ã€è‡ªå·±ç»ƒçº§å˜å¼ºï¼Œè¿™ç§æ¸¸æˆæ­å­ï¼Œä½ æ„¿æ„æ‹¥æœ‰å—ï¼Ÿå¯èƒ½ä¸ä¹…å°†æ¥ï¼Œç±»ä¼¼ç‹è€…è£è€€ã€DOTA 2 è¿™æ ·çš„æ¸¸æˆå°±å¯ä»¥é€‰æ‹©å’Œ AI ç»„é˜Ÿï¼Œè€Œä¸æ˜¯å’Œäººç»„é˜Ÿäº†ï¼ã€</strong></h5>
<p>æƒ³è±¡ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œå®ƒã€Œå‡ºç”Ÿã€åœ¨ä¸€ä¸ªè™šæ‹Ÿ 3D æ¸¸æˆä¸­ï¼Œèƒ½æ¨ç†ï¼Œèƒ½å­¦ä¹ ã€‚</p>
<p>å¹¶ä¸”ï¼Œå®ƒä¸èµ°åé—¨ï¼Œå»æ“çºµæ¸¸æˆåº•å±‚æŒ‡ä»¤ï¼Œè€Œæ˜¯å’Œäººä¸€æ ·ï¼Œåªã€Œè§‚çœ‹ã€å±å¹•ç”»é¢ï¼Œå¹¶ä¸”ä½¿ç”¨ã€Œè™šæ‹Ÿé”®ç›˜å’Œé¼ æ ‡ã€æ¥è¿›è¡Œæ“ä½œã€‚</p>
<p>ä¹Ÿå°±æ˜¯ï¼Œåˆ›é€ ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œä½†å®Œå®Œå…¨å…¨ã€Œåƒäººä¸€æ ·ã€å»æ‰“æ¸¸æˆã€‚</p>
<p>è¿™å°±æ˜¯è°·æ­Œ DeepMind æ¨å‡ºçš„ SIMA 2 æ™ºèƒ½ä½“ï¼</p>
<p>ä¸€ä¸ªèƒ½é™ªä½ åœ¨è™šæ‹Ÿä¸–ç•Œä¸­ä¸€åŒæ¸¸æˆã€æ¨ç†å’Œå­¦ä¹ çš„æ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a947d0f923e44fa49a81b840efa83c3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=%2FOnaDd2Dx8t1V7FNG2d0IAZGH7s%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è§‰å¾— DeepMind æ‰æ˜¯é‚£ä¸ªä¸å¿˜åˆå¿ƒçš„ã€ŒOpenã€AI å…¬å¸ã€‚</p>
<p>ä¸ç®¡æ˜¯ä»ä¸‹å›´æ£‹çš„ AlphaGo å†åˆ°ç ´è§£ç”Ÿå‘½ä¹‹è°œçš„ AlphaFold ç­‰ç­‰ Alpha ç³»åˆ—ã€‚</p>
<p>ç„¶åè¿˜æœ‰è°·æ­Œä¸»æ‰“çš„ Gemini å¤§æ¨¡å‹ç³»åˆ—ï¼Œä»¥åŠä¸–ç•Œæ¨¡å‹ Genie 3 ç³»åˆ—ï¼Œç­‰ç­‰ã€‚</p>
<p>å¯ä»¥è¯´è°·æ­Œåœ¨ AI é¢†åŸŸæ˜¯å…¨æ–¹é¢ã€å…¨æ ˆå¼å‘åŠ›ã€‚</p>
<p>SIMA 2 å¯ä»¥è¯´æ˜¯æœç€é€šç”¨äººå·¥æ™ºèƒ½æ–¹å‘è¿ˆå‡ºçš„é‡è¦ä¸€æ­¥ã€‚</p>
<p>SIMAï¼Œå…¨ç§° Scalable Instructable Multiworld Agentï¼Œå¯æ‰©å±•æŒ‡ä»¤å¤šä¸–ç•Œæ™ºèƒ½ä½“ã€‚</p>
<p>åˆ«çœ‹ç°åœ¨å®ƒåªæ˜¯è§‚çœ‹å±å¹•æ‰“æ¸¸æˆï¼Œå¦‚æœèƒ½å¤Ÿã€Œåƒäººã€ä¸€æ ·ç†è§£æ¸¸æˆç”»é¢å¹¶åšå‡ºæ­£ç¡®çš„æ“ä½œã€‚</p>
<p>é‚£ä¹ˆå¯ä»¥å°†è¿™ç§æ¨ç†å’Œç†è§£èƒ½åŠ›æ‰©å±•åˆ°å…¶ä»–ä¸–ç•Œä¸­ï¼Œç”šè‡³ä¹Ÿå¯ä»¥æ‹“å±•åˆ°å…·èº«æ™ºèƒ½ï¼Œè¿™å°±æ˜¯ SIMA çœŸæ­£çš„é‡å¿ƒã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå¯èƒ½ä¸ä¹…ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ¸¸æˆä¸­ç»„é˜Ÿç±»ä¼¼ SIMA æ™ºèƒ½ä½“ã€‚</p>
<p>æˆ‘çš„ DOTA2ã€æˆ‘çš„ç‹è€…è£è€€ã€æˆ‘çš„è‹±é›„è”ç›Ÿæ‰‹æ¸¸å¥½åƒç»ˆäºæœ‰æ•‘ï¼Œå¸Œæœ›ä»¥åçš„ MOBA ç±»æ¸¸æˆéƒ½èƒ½å‡ºä¸€ä¸ªç±»ä¼¼çš„é€‰é¡¹ï¼Œé€‰æ‹©å’Œ AI ç»„é˜Ÿï¼Œè€Œä¸æ˜¯å’Œäººç»„é˜Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3281bb431b56466c9b95cda0de214c03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=zS2bpw3wItWguqkyz2TZO3MnQE8%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæ¨ç†çš„åŠ›é‡ã€</strong></p>
<p>åœ¨ SIMA 1 ä¸­ï¼Œæ™ºèƒ½ä½“å­¦ä¼šäº†æ‰§è¡Œè¶…è¿‡ 600 ç§è¯­è¨€æŒ‡ä»¤æŠ€èƒ½ï¼Œä¾‹å¦‚æ‹æ¢¯å­ã€æ‰“å¼€åœ°å›¾ã€‚</p>
<p>åœ¨ SIMA 2 ä¸­ï¼Œæ™ºèƒ½ä½“å·²ç»å¯ä»¥çªç ´å•çº¯çš„æŒ‡ä»¤è·Ÿéšçš„å±€é™ã€‚</p>
<p>é€šè¿‡å°† Gemini ä½œä¸ºæ™ºèƒ½ä½“çš„æ ¸å¿ƒå¼•æ“ï¼ŒSIMA 2 ä¸ä»…èƒ½å“åº”æŒ‡ä»¤ï¼Œè¿˜èƒ½å¯¹æŒ‡ä»¤è¿›è¡Œæ€è€ƒä¸æ¨ç†ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢ MineDojo æ¸¸æˆä¸­ï¼ŒSIMA 2 å¯ä»¥å®Œå…¨åœ¨è¿™ä¸ªã€Œä»æœªè§è¿‡ã€çš„æ¸¸æˆä¸­ï¼Œé ç€æ¨ç†èƒ½åŠ›å®Œæˆä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30cfc5ae3e004321ba3042880e6547b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=RixGi1LyS%2FJOXFDyqPZXXi1T%2BcE%3D" alt="" loading="lazy"/></p>
<p>SIMA 2 æ˜¯ç”¨ä»€ä¹ˆæ•°æ®è®­ç»ƒçš„å‘¢ï¼Ÿ</p>
<p>DeepMind ä½¿ç”¨å¸¦æœ‰äººç±»æ¼”ç¤ºè§†é¢‘ã€è¯­è¨€æ ‡ç­¾ä»¥åŠ Gemini ç”Ÿæˆæ ‡ç­¾çš„æ··åˆæ•°æ®å¯¹ SIMA 2 è¿›è¡Œè®­ç»ƒã€‚</p>
<p>æŸç§æ„ä¹‰ä¸Šï¼Œè¿™ç§æ€è·¯å’Œç‰¹æ–¯æ‹‰ FSD çš„ç«¯åˆ°ç«¯å…·æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå†æ›´æ·±ä¸€æ­¥ï¼Œåªè¦ç»™ AI æ•°æ®å’Œç®—åŠ›ï¼ŒAI è‚¯å®šèƒ½å­¦ä¼šã€Œäººç±»è¿™ç‚¹èƒ½åŠ›ã€ã€‚</p>
<p>SIMA 2 ä¸ä»…èƒ½å“åº”ç”¨æˆ·æé—®ï¼Œè¿˜èƒ½å¯¹å…¶è‡ªèº«è¡Œä¸ºåŠæ‰€å¤„ç¯å¢ƒè¿›è¡Œé€»è¾‘æ¨ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59fb3944da1840ce8bef78cbd9e69b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=gPNa2V%2FFqj5KynxQG0Gvr1NTvq0%3D" alt="" loading="lazy"/></p>
<p>ç ”ç©¶äººå‘˜åœ¨åšå®¢ä¸­ä¹Ÿæ„Ÿæ…¨ï¼Œä¸ SIMA 2 äº’åŠ¨æ—¶ï¼ŒçœŸçš„æ„Ÿè§‰æ›´åƒæ˜¯åœ¨ä¸ä¸€ä¸ªã€Œä¼™ä¼´ã€æ¸¸æˆæ­å­ã€ä¸€èµ·ç³»ç»Ÿåˆä½œã€‚</p>
<p>è¿™æˆ–è®¸ä¹Ÿç®—æ˜¯ SIMA 2 é€šè¿‡æ¸¸æˆä¸Šçš„ã€Œå›¾çµæµ‹è¯•ã€ã€‚</p>
<p>è°·æ­Œè®¤ä¸ºè¿™ä¸ªèƒ½åŠ›çš„åº•å±‚é€»è¾‘è¿˜æ˜¯ Gemini å¸¦æ¥çš„ï¼Œé ç€å¼ºå¤§çš„æ¨æµèƒ½åŠ›ï¼ŒSIMA 2 å¯ä»¥åœ¨å¤æ‚çš„ 3D ç¯å¢ƒä¸­è¿›è¡Œæ„ŸçŸ¥ã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5f947037ab64225b77f1e7e945027f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=lJn%2FhCUCEkmLid1Wy1hKOQv5zUs%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œæ³›åŒ–èƒ½åŠ›é£è·ƒã€</strong></p>
<p>è°·æ­Œæ¨å‡º SIMA 2ï¼Œé™¤äº†ç”¨æ¸¸æˆè®­ç»ƒæ˜¯åˆæœŸæœ€åˆé€‚çš„æ‰‹æ®µå¤–ï¼Œå¦ä¸€ä¸ªè€ƒé‡å°±æ˜¯å¢å¼ºæ™ºèƒ½ä½“çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p>SIMA 2 èƒ½å¤Ÿç†è§£å¹¶å®Œæˆé•¿æœŸå¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>çŸ­æœŸæŒ‡ä»¤ï¼Œæ¯”å¦‚å·¦è½¬ã€èµ°ä¸‰æ­¥ã€çˆ¬æ¢¯å­éƒ½æ˜¯æ¯”è¾ƒå®¹æ˜“äº†ï¼Œä½†æ˜¯å¦‚ä½•å®Œæ•´çš„ã€Œæ‰“é€šã€æ¸¸æˆå…³å¡æ‰æ˜¯éªŒè¯é€šç”¨èƒ½åŠ›çš„å…³é”®ã€‚</p>
<p>SIMA 2 ç°åœ¨å¯ä»¥åœ¨æœªç»é¢„è®­ç»ƒçš„æƒ…å†µä¸‹æ”»å…‹å…¨æ–°çš„æ¸¸æˆã€‚ï¼ˆå·¦è¾¹æ˜¯ Gemini çš„æ¨ç†è¿‡ç¨‹ï¼Œå³è¾¹æ˜¯ SIMA åœ¨æ“ä½œæ¸¸æˆï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be3fd521a0294bc480a72c4cc92bad1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=TQdEgif6b4oq1KwkkBwkz01Ntlo%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†è¯­è¨€æŒ‡ä»¤ï¼ŒSIMA 2 è¿˜èƒ½ç†è§£å¤šæ¨¡æ€çš„æç¤ºã€‚</p>
<p>æ¯”å¦‚ï¼Œç”¨æˆ·åœ¨ç”»é¢ä¸­ç»˜åˆ¶ä¸€ä¸ªè·¯çº¿è‰å›¾ï¼ŒSIMA ç†è§£ç©å®¶çš„æ„æ€ï¼Œç„¶åå†æ“ä½œã€‚</p>
<p>åœ¨æ¸¸æˆä¸­ç”»ä¸ªçº¢æ¡† + ç®­å¤´ï¼Œè®©æ™ºèƒ½ä½“æ®æ­¤æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36c089ed206c4be98f858af5302693aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=P4PVJElaj4MkBk19EyFq5CFGLkE%3D" alt="" loading="lazy"/></p>
<p>å…¶ä»–çš„ç†è§£èƒ½åŠ›è¿˜æœ‰ï¼Œç¬¦å·ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·å‘é€ä¸€ä¸ªğŸª“+ æ ‘æœ¨çš„è¡¨æƒ…ç¬¦å·ï¼Œç„¶åæ™ºèƒ½ä½“å°±å±é¢ é¢ çš„è¯´ã€Œå¥½å§ï¼Œæˆ‘ä¸ç¡ï¼Œæˆ‘å»ç æ ‘å»ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d4af20daaa04057a2b714a51ca7dab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=38ZS%2BM7YMUQpuwqAPYTW40GowaY%3D" alt="" loading="lazy"/></p>
<p>æ³›åŒ–èƒ½åŠ›çš„å¦ä¸€ä¸ªä½“ç°æ˜¯åœ¨ä¸åŒæ¸¸æˆä¹‹é—´çš„è¿ç§»ã€‚</p>
<p>æ¯”å¦‚ A æ¸¸æˆä¸­å­¦ä¼šçš„ã€ŒæŒ–æ˜ã€ï¼Œå¯ä»¥åº”ç”¨äº B æ¸¸æˆçš„ã€Œé‡‡é›†ã€ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªå›¾å±•ç¤º SIMA 2 ç›¸å¯¹ SIMA 1 èƒ½åŠ›çš„å·¨å¤§æå‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f43d85bff1e64ff1a4d5d79b93fd36ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=kTEAZvS8fRi8Z%2Fgtofm8b8LRLh4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d38fc780c59e4639aef6f3284730e5d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=MOCv6%2BtBs1mdrqtLfvV9XShvRMQ%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œç»ˆæè€ƒéªŒï¼šç•…æ¸¸æƒ³è±¡ä¸–ç•Œã€</strong></p>
<p>è°·æ­Œä¸ºäº†æµ‹è¯• SIMA 2 çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿ç”¨äº† Genie 3 æ¥é…åˆã€‚</p>
<p>Genie 3 ç”Ÿæˆå…¨æ–°çš„ 3D æ¨¡æ‹Ÿä¸–ç•Œï¼Œç„¶åè®© SIMA 2 åœ¨è¿™äº›ã€Œæ¶ç©ºä¸–ç•Œã€ä¸­è¡ŒåŠ¨ã€‚</p>
<p>Genie 3 æœ¬èº«ä¼šéµå¾ªç‰©ç†è§„å¾‹ç”Ÿæˆä¸–ç•Œï¼Œä½†æ˜¯å’ŒçœŸå®ä¸–ç•Œçš„å±•ç°åˆå¯èƒ½å®Œå…¨ä¸åŒã€‚</p>
<p>è°·æ­Œçš„æµ‹è¯•ç»“æœæ˜¯ï¼ŒSIMA 2 ä¾ç„¶èƒ½ä¿æŒè‰¯å¥½çš„ç¯å¢ƒé€‚åº”èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2601cc1034df48af9cff70151c7f2d13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=Vb5lcUm7NTJZcMKHmg%2BDV5agnwo%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cef365499578470b957c59d96188d45a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=re6RWq45KjZX19l0UjfjEM2fXfc%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå¯æ‰©å±•çš„å¤šä»»åŠ¡è‡ªæˆ‘æå‡ã€</strong></p>
<p>SIMA 2 æœ€ä»¤äººå…´å¥‹çš„èƒ½åŠ›æ˜¯èƒ½å¤Ÿè‡ªæˆ‘å­¦ä¹ ï¼Œè‡ªæˆ‘è¿›åŒ–ï¼Œè‡ªæˆ‘æå‡ã€‚</p>
<p>è°·æ­Œè¯´åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒSIMA 2 æ™ºèƒ½ä½“èƒ½å¤Ÿé€šè¿‡è¯•é”™å’ŒåŸºäº Gemini çš„åé¦ˆå¼•å¯¼ï¼Œæ‰§è¡Œæ›´åŠ å¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>åœ¨æœ€åˆä»äººç±»ç¤ºèŒƒä¸­å­¦ä¹ åï¼ŒSIMA 2 èƒ½å¤Ÿè¿‡æ¸¡åˆ°å®Œå…¨é€šè¿‡è‡ªä¸»æ¸¸æˆç»§ç»­å­¦ä¹ ã€‚</p>
<p>åœ¨å…¨æ–°ä¸–ç•Œå­¦ä¹ æ—¶ï¼Œæ— éœ€é¢å¤–çš„äººç±»ç”Ÿæˆæ•°æ®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c60293d5181c497f90c22a2e5e803f3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=7QT86zZw3pmSD1x91952VLLwIBk%3D" alt="" loading="lazy"/></p>
<p>å·¦ä¾§å±•ç¤ºçš„æ˜¯åˆä»£ SIMA 2 æ™ºèƒ½ä½“æœªèƒ½å®Œæˆçš„ä»»åŠ¡ç¤ºä¾‹ã€‚</p>
<p>è€Œå³ä¾§åˆ™æ˜¾ç¤ºç»è¿‡å¤šè½®è®­ç»ƒè¿­ä»£åï¼ŒSIMA 2 å·²å®ç°è‡ªæˆ‘æå‡ï¼Œæ•´ä¸ªè¿‡ç¨‹å®Œå…¨æ— éœ€äººç±»åé¦ˆæˆ–æ¸¸æˆæ•°æ®ä»‹å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86c3d490942b486dab80388f1cf4f4bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764211183&amp;x-signature=1Pfp3G79c%2F%2BHD9Y2u6kWOByO7Ek%3D" alt="" loading="lazy"/></p>
<p>SIMA 2 èƒ½åœ¨å¾ˆå¤šä¸åŒç±»å‹çš„æ¸¸æˆé‡Œè¿è¡Œï¼Œè¿™å¯¹æ£€éªŒã€Œé€šç”¨æ™ºèƒ½ã€éå¸¸å…³é”®ã€‚</p>
<p>åœ¨è¿™äº›æ¸¸æˆä¸­ï¼Œæ™ºèƒ½ä½“å¯ä»¥å­¦ä¼šå„ç§æŠ€èƒ½ã€ç»ƒä¹ å¤æ‚çš„æ¨ç†ï¼Œè¿˜èƒ½é€šè¿‡è‡ªå·±ç©æ¸¸æˆä¸æ–­æå‡èƒ½åŠ›ã€‚</p>
<p>ä¸è¿‡ï¼ŒSIMA 2 ç›®å‰è¿˜æ˜¯ç ”ç©¶é˜¶æ®µçš„ç³»ç»Ÿï¼Œç¦»çœŸæ­£çš„ã€Œé€šç”¨å…·èº«æ™ºèƒ½ã€è¿˜æœ‰è·ç¦»ã€‚</p>
<p>å®ƒåœ¨å¤„ç†é‚£ç§ç‰¹åˆ«é•¿ã€ç‰¹åˆ«å¤æ‚ã€éœ€è¦å¾ˆå¤šæ­¥æ¨ç†å’Œåå¤æ£€æŸ¥ç›®æ ‡çš„å¤§ä»»åŠ¡æ—¶ï¼Œè¿˜æ˜¯ä¼šåƒåŠ›ã€‚</p>
<p>å®ƒå¯¹äº¤äº’è¿‡ç¨‹çš„è®°å¿†ä¹Ÿä¸ç®—é•¿ï¼Œåªèƒ½åœ¨æœ‰é™çš„ä¸Šä¸‹æ–‡é‡Œå·¥ä½œï¼Œä»¥ä¿è¯å“åº”è¶³å¤Ÿå¿«ã€‚</p>
<p>å¦å¤–ï¼Œæƒ³è¦åªç”¨é”®ç›˜é¼ æ ‡å°±åšå‡ºéå¸¸ç²¾ç»†çš„æ“ä½œï¼Œæˆ–è€…ç¨³å®šåœ°çœ‹æ‡‚å¤æ‚çš„ 3D åœºæ™¯ï¼Œè¿™äº›åœ¨æ•´ä¸ªé¢†åŸŸé‡Œéƒ½è¿˜æ˜¯éš¾é¢˜ã€‚</p>
<p>è¿™é¡¹ç ”ç©¶è¯´æ˜äº†ä¸€æ¡æ–°çš„è·¯ï¼š</p>
<p>é€šè¿‡å¤§é‡ã€å¤šç±»å‹çš„è™šæ‹Ÿä¸–ç•Œæ•°æ®ï¼ŒåŠ ä¸Š Gemini å¾ˆå¼ºçš„æ¨ç†èƒ½åŠ›ï¼Œå¯ä»¥è®­ç»ƒå‡ºä¸€ä¸ªé€šç”¨çš„æ™ºèƒ½ä½“ï¼ŒæŠŠåŸæœ¬åˆ†æ•£åœ¨ä¸åŒä¸“ç”¨ç³»ç»Ÿé‡Œçš„èƒ½åŠ›æ•´åˆåˆ°ä¸€èµ·ã€‚</p>
<p>SIMA 2 ä¹Ÿä¸ºæœªæ¥çš„æœºå™¨äººåº”ç”¨æ‰“ä¸‹äº†åŸºç¡€ã€‚</p>
<p>å®ƒå­¦åˆ°çš„èƒ½åŠ›â€”â€”æ¯”å¦‚å¯¼èˆªã€ç”¨å·¥å…·ã€å’Œä»–äººåä½œå®Œæˆä»»åŠ¡â€”â€”æ­£æ˜¯å°†æ¥è®©æœºå™¨äººåœ¨ç°å®ä¸–ç•Œä¸­æˆä¸ºã€Œæ™ºèƒ½åŠ©æ‰‹ã€æ‰€éœ€è¦çš„åº•å±‚æ¨¡å—ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fblog%2Fsima-2-an-agent-that-plays-reasons-and-learns-with-you-in-virtual-3d-worlds%2F" target="_blank" title="https://deepmind.google/blog/sima-2-an-agent-that-plays-reasons-and-learns-with-you-in-virtual-3d-worlds/" ref="nofollow noopener noreferrer">deepmind.google/blog/sima-2â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—è®°å½•ï¼šä¿¡åˆ›ä¸Šäº‘ï¼Œå›½äº§ç³»ç»ŸKylin å‹æµ‹å®¹å™¨é‡å¯ï¼Œæ¥å£å“åº”è€—æ—¶è¿‡é•¿é—®é¢˜æ’æŸ¥ï¼ˆopenjdk17ï¼‰]]></title>    <link>https://juejin.cn/post/7574276404596555828</link>    <guid>https://juejin.cn/post/7574276404596555828</guid>    <pubDate>2025-11-19T15:32:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574276404596555828" data-draft-id="7574308545525530639" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—è®°å½•ï¼šä¿¡åˆ›ä¸Šäº‘ï¼Œå›½äº§ç³»ç»ŸKylin å‹æµ‹å®¹å™¨é‡å¯ï¼Œæ¥å£å“åº”è€—æ—¶è¿‡é•¿é—®é¢˜æ’æŸ¥ï¼ˆopenjdk17ï¼‰"/> <meta itemprop="keywords" content="JVM"/> <meta itemprop="datePublished" content="2025-11-19T15:32:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="54ping"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779111320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—è®°å½•ï¼šä¿¡åˆ›ä¸Šäº‘ï¼Œå›½äº§ç³»ç»ŸKylin å‹æµ‹å®¹å™¨é‡å¯ï¼Œæ¥å£å“åº”è€—æ—¶è¿‡é•¿é—®é¢˜æ’æŸ¥ï¼ˆopenjdk17ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779111320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    54ping
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T15:32:51.000Z" title="Wed Nov 19 2025 15:32:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¿¡åˆ›ä¸Šäº‘ï¼Œå›½äº§ç³»ç»ŸKylin å‹æµ‹å®¹å™¨é‡å¯ï¼Œæ¥å£å“åº”è€—æ—¶è¿‡é•¿é—®é¢˜æ’æŸ¥ï¼ˆopenjdk17ï¼‰</h2>
<p>ï¼ˆå†…å« 60 ä¸ª jvm å‚æ•°è¯¦è§£ã€è°ƒä¼˜æ€è·¯è¯´æ˜ï¼‰</p>
<blockquote>
<p>æœ€è¿‘æ‰è¿›ä¿¡åˆ›ä¸Šäº‘çš„è½åœ°å®æˆ˜ï¼Œç¢°åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ â€”â€” å›½äº§æ“ä½œç³»ç»Ÿæ­é…å®¹å™¨åŒ–éƒ¨ç½²åï¼Œæ ¸å¿ƒæ¥å£å‡ºç°äº†RTæ‹‰é•¿ã€å¶å‘OOMçš„æƒ…å†µã€‚</p>
<p>æä»¥å‰ï¼Œé‡åˆ°è¿™ç±»é—®é¢˜å¸¸èƒ½é æ‰©å®¹ç¡¬ä»¶å¿«é€ŸåŒ–è§£ï¼Œå†…å­˜ä¸å¤ŸåŠ å†…å­˜ã€CPUè¿‡è½½æ‰©èŠ‚ç‚¹ï¼ŒJVMè°ƒä¼˜æ²¡ä»€ä¹ˆç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>ç°åœ¨ä¸ä¸€æ ·äº†ï¼Œéƒ½åœ¨æèŠ‚èƒ½å‡æ’...å‘¸ï¼é™æœ¬å¢æ•ˆé‚£ä¸€å¥—ï¼Œè£å‘˜é™è–ªåæœåŠ¡å™¨èµ„æºä¹Ÿä¸€ç å†ç ï¼Œâ€œå †ç¡¬ä»¶â€çš„ç®€å•è§£æ³•è¡Œä¸é€šäº†ã€‚</p>
<p>åè€Œå€’é€¼æˆ‘ä»¬æ²‰ä¸‹å¿ƒï¼Œåœ¨ä¿¡åˆ›ä¸Šäº‘+å›½äº§OSå®¹å™¨é‡å¯çš„ç‰¹å®šåœºæ™¯é‡Œï¼Œä¸»åŠ¨æ’æŸ¥æ ¹å› ã€æ”»åšä¼˜åŒ–ï¼Œè¿™æ¬¡å°±æŠŠæ•´ä¸ªæ’æŸ¥è¿‡ç¨‹æ•´ç†å‡ºæ¥å’Œå¤§å®¶åˆ†äº«ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38ebef262a5c4b0bac34dbf70d12daa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=6Qy%2BUe3j9%2BmXVIhxG4bF%2B%2FAH7Yw%3D" alt="MindMap - ä¿¡åˆ›å®¹å™¨é‡å¯åŠæ¥å£å“åº”æ—¶é—´ï¼ˆRTï¼‰è¿‡é•¿æ’æŸ¥.png" loading="lazy"/></p>
<p>â–¶ï¸â–¶ï¸â–¶ï¸ æ­£æ–‡å¼€å§‹ â–¶ï¸â–¶ï¸â–¶ï¸</p>
<h3 data-id="heading-1">é—®é¢˜ä¸€ï¼šæµ‹è¯•ç¯å¢ƒå‘ç”Ÿé‡å¯</h3>
<h4 data-id="heading-2">ä¸€ã€ç°è±¡æè¿°</h4>
<p>Java æœåŠ¡ä¸€å¼€å§‹å‹æµ‹ï¼Œ1å°æ—¶å†…å¿…é‡å¯ã€‚é€šè¿‡ "å®¹å™¨äº‘å¹³å°ç›‘æ§" å‘ç°ï¼š</p>
<ul>
<li>è¿›ç¨‹æ¶ˆå¤±äº†ï¼Œå¥åº·æ£€æŸ¥å¤±è´¥ï¼Œæ•…æœåŠ¡é‡å¯ã€‚</li>
<li>é‡å¯å‰ç³»ç»Ÿèµ„æºç›‘æ§æ˜¾ç¤º <code>cpu ä½¿ç”¨ç‡ 100%</code>, <code>å†…å­˜ä½¿ç”¨ç‡ 98+%</code></li>
</ul>
<h4 data-id="heading-3">äºŒã€æ£€æŸ¥æ—¥å¿—å’Œé…ç½®</h4>
<h5 data-id="heading-4">1. ä¸»è¦æ£€æŸ¥ç‚¹</h5>
<ol start="0">
<li>æ£€æŸ¥ æ˜¯å¦ç”Ÿæˆ <code>heapdumpï¼ˆå †è½¬å‚¨ï¼‰</code>æ–‡ä»¶</li>
<li>æ£€æŸ¥ <code>GC æ—¥å¿—</code></li>
<li>æ£€æŸ¥ <code>å®¹å™¨ç¼–æ’é…ç½®</code> æ–‡ä»¶</li>
<li>æ£€æŸ¥ <code>å®¹å™¨å¯åŠ¨è„šæœ¬</code></li>
</ol>
<h5 data-id="heading-5">2. æ£€æŸ¥ç»“æœ</h5>
<p>æœªå‘ç°å †è½¬å‚¨ï¼ˆheapdumpï¼‰æ–‡ä»¶ï¼Œæ—  GC æ—¥å¿—ï¼›</p>
<p>â€”â€”&gt; æ£€æŸ¥å®¹å™¨ <code>ç¼–æ’é…ç½®</code> å’Œ <code>å¯åŠ¨è„šæœ¬</code>ï¼Œ</p>
<p>â€”â€”&gt; å‡æœªå¼€å¯ gc æ—¥å¿—ï¼Œå¯åŠ¨è„šæœ¬ heapdump è·¯å¾„éå®¹å™¨æŒ‚è½½è·¯å¾„ã€‚</p>
<h5 data-id="heading-6">3. è°ƒæ•´ JVM å‚æ•°</h5>
<p>è°ƒæ•´ <code>run.sh</code>, å¿…é¡»åŒ…å«å¦‚ä¸‹ jvm å‚æ•°ï¼Œ</p>
<p>æ¶‰åŠç›®å½•è·¯å¾„éƒ½è¦ç”¨å®¹å™¨æŒ‚è½½è·¯ <code>spec.containers.args.volumeMounts.mountPath</code></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ï¼ŒJVM ç»ˆæ­¢é€€å‡º</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+ExitOnOutOfMemoryError</span> 
<span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ç”Ÿæˆ Java å †è½¬å‚¨</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+HeapDumpOnOutOfMemoryError</span> 
â€‹
<span class="hljs-comment"># å †è½¬å‚¨æ–‡ä»¶ä¿å­˜ä½ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:HeapDumpPath=/logs/</span><span class="hljs-variable">${</span><span class="hljs-variable constant_">POD_NAMESPACE</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">APP_NAME</span>}/heapdump_start_<span class="hljs-variable">$(</span>date +<span class="hljs-string">"%Y-%m-%d_%H%M%S"</span>).hprof 
â€‹
<span class="hljs-comment"># JVM å‘ç”Ÿè‡´å‘½é”™è¯¯æ—¶ï¼Œæ—¥å¿—æ–‡ä»¶ä¿å­˜ä½ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:ErrorFile=/logs/</span><span class="hljs-variable">${</span><span class="hljs-variable constant_">POD_NAMESPACE</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">APP_NAME</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">HOSTNAME</span>}-hs_err_pid.<span class="hljs-variable">$$</span>.log 
â€‹
<span class="hljs-comment"># å¼€å¯ gc æ—¥å¿—</span>
-<span class="hljs-title class_">Xlog</span><span class="hljs-symbol">:gc*</span><span class="hljs-symbol">:file=/logs/</span><span class="hljs-variable">${</span><span class="hljs-variable constant_">POD_NAMESPACE</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">APP_NAME</span>}/gc-%t.<span class="hljs-symbol">log:</span>hostname,time,uptime,<span class="hljs-symbol">pid:</span>filecount=<span class="hljs-number">5</span>,filesize=10M 
</code></pre>
<p>è¿˜éœ€è¦åœ¨ <code>start_java_server</code> å‡½æ•°ä¸­æ·»åŠ  <strong>æ—¥å¿—æ¸…ç†</strong> çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-function"><span class="hljs-title">start_java_server</span></span>(){
 Â <span class="hljs-built_in">echo</span> <span class="hljs-string">"----start java process----"</span>
 Â 
 Â <span class="hljs-built_in">touch</span> /app/bin/test.log
 Â 
  <span class="hljs-built_in">eval</span> java <span class="hljs-variable">$JAVA_OPTS</span> -jar <span class="hljs-variable">$appname</span>
 Â 
<span class="hljs-comment">#  tail -f /app/bin/test.log # è¿™è¡Œä»£ç ä¸è¦äº†ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤</span>
 Â 
 Â <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
 Â  Â <span class="hljs-comment"># æ¸…ç†ä¸¤å¤©å‰çš„ gc æ—¥å¿—</span>
 Â  Â find <span class="hljs-string">"<span class="hljs-variable">${LOG_PATH}</span>"</span> -mtime +2 -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*.log*"</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">rm</span> {} ;
 Â  Â <span class="hljs-comment"># æ¸…ç† 7 å¤©å‰çš„ kafka æ•…éšœè½¬ç§»æ—¥å¿—</span>
 Â  Â find <span class="hljs-string">"<span class="hljs-variable">${LOG_PATH}</span>"</span> -mtime +7 -maxdepth 1 -<span class="hljs-built_in">type</span> d -not -name <span class="hljs-string">"*<span class="hljs-variable">${HOSTNAME}</span>*"</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">rm</span> -rf {} ;
 Â  Â <span class="hljs-comment"># 24 å°æ—¶æ‰§è¡Œä¸€æ¬¡</span>
 Â  Â <span class="hljs-built_in">sleep</span> 86400
 Â <span class="hljs-keyword">done</span>
}
</code></pre>
<h5 data-id="heading-7">4. éƒ¨ç½²éªŒè¯</h5>
<p>é‡å¯åä»ç„¶æ²¡æœ‰ <code>heapdump</code> æ–‡ä»¶ï¼Œè§‚å¯Ÿ <code>GC æ—¥å¿—</code>ï¼Œåƒåœ¾å›æ”¶æ­£å¸¸ã€‚</p>
<h4 data-id="heading-8">ä¸‰ã€æ£€æŸ¥ Linux å†…æ ¸æ—¥å¿—</h4>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">dmesg | <span class="hljs-keyword">grep</span> -iE <span class="hljs-string">"killed.*java"</span>
</code></pre>
<p>å‘ç°å¦‚ä¸‹æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Killed process <span class="hljs-number">1939065</span> (java) total-vm:<span class="hljs-number">131428792</span>kB, anon-rss:<span class="hljs-number">869604</span>kB, file-rss:<span class="hljs-number">0</span>kB, shmem-rss:<span class="hljs-number">6678808</span>kB
</code></pre>
<h5 data-id="heading-9">1. å®šä½åŸå› </h5>
<p>é€šè¿‡ dmesg æ—¥å¿—å‘ç° java è¿›ç¨‹è¢« killï¼Œå…¶ä¸­å¼‚å¸¸æŒ‡æ ‡ä¸ºï¼š</p>
<ul>
<li><code>shmem-rss</code>: å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰é©»ç•™å¤§å°ï¼ˆResident Set Sizeï¼‰çº¦ 6.37G</li>
</ul>
<h5 data-id="heading-10">2. ä¸ºä»€ä¹ˆå…±äº«å†…å­˜è¿™ä¹ˆé«˜ï¼Ÿ</h5>
<p>é€šè¿‡æŸ¥é˜…èµ„æ–™äº†è§£åˆ° ZGC ä¸ºäº†å®ç°<strong>äºšæ¯«ç§’çº§åœé¡¿</strong>ï¼Œä½¿ç”¨äº†<strong>å¤šè§†å›¾æ˜ å°„æŠ€æœ¯</strong>ï¼Œè¿™é¡¹æŠ€æœ¯<strong>é‡åº¦ä¾èµ–å…±äº«å†…å­˜</strong>çš„ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/mman.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>
â€‹
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
 Â  Â <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜çš„æ–‡ä»¶æè¿°ç¬¦</span>
 Â  Â <span class="hljs-type">int</span> fd = <span class="hljs-built_in">shm_open</span>(<span class="hljs-string">"/example"</span>, O_RDWR | O_CREAT | O_EXCL, <span class="hljs-number">0600</span>);
 Â  Â <span class="hljs-keyword">if</span> (fd == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
 Â  Â <span class="hljs-comment">// é˜²æ­¢èµ„æºæ³„éœ²ï¼Œéœ€è¦åˆ é™¤ã€‚æ‰§è¡Œä¹‹åå…±äº«å¯¹è±¡ä»ç„¶å­˜æ´»ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡åå­—è®¿é—®</span>
 Â  Â <span class="hljs-built_in">shm_unlink</span>(<span class="hljs-string">"/example"</span>); 
 Â  Â 
 Â  Â <span class="hljs-comment">// å°†å…±äº«å†…å­˜å¯¹è±¡çš„å¤§å°è®¾ç½®ä¸º4å­—èŠ‚</span>
 Â  Â <span class="hljs-type">size_t</span> size = <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">uint32_t</span>);
 Â  Â <span class="hljs-built_in">ftruncate</span>(fd, size); 
 Â  Â 
 Â  Â <span class="hljs-comment">// ä¸¤æ¬¡è°ƒç”¨mmapï¼ŒæŠŠä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡æ˜ å°„åˆ°ä¸¤ä¸ªè™šæ‹Ÿåœ°å€ä¸Šã€‚</span>
 Â  Â <span class="hljs-type">int</span> prot = PROT_READ | PROT_WRITE; Â  Â 
 Â  Â <span class="hljs-type">uint32_t</span> *add1 = <span class="hljs-built_in">mmap</span>(<span class="hljs-literal">NULL</span>, size, prot, MAP_SHARED, fd, <span class="hljs-number">0</span>);
 Â  Â <span class="hljs-type">uint32_t</span> *add2 = <span class="hljs-built_in">mmap</span>(<span class="hljs-literal">NULL</span>, size, prot, MAP_SHARED, fd, <span class="hljs-number">0</span>);
 Â  Â 
 Â  Â <span class="hljs-comment">// å…³é—­æ–‡ä»¶æè¿°ç¬¦</span>
 Â  Â <span class="hljs-built_in">close</span>(fd);
 Â  Â 
 Â  Â <span class="hljs-comment">// æµ‹è¯•ï¼Œé€šè¿‡ä¸€ä¸ªè™šæ‹Ÿåœ°å€è®¾ç½®æ•°æ®ï¼Œä¸¤ä¸ªè™šæ‹Ÿåœ°å€å¾—åˆ°ç›¸åŒçš„æ•°æ®</span>
 Â  Â *add1 = <span class="hljs-number">0xdeafbeef</span>;
 Â  Â <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Address of add1 is: %p, value of add1 is: 0x%x\n"</span>, add1, *add1);
 Â  Â <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Address of add2 is: %p, value of add2 is: 0x%x\n"</span>, add2, *add2);
 Â  Â 
 Â  Â <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h5 data-id="heading-11">3. å¤šè§†å›¾æ˜ å°„æŠ€æœ¯</h5>
<blockquote>
<p>æœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ï¼ˆå¯ä»¥è·³è¿‡ï¼‰</p>
</blockquote>

























<table><thead><tr><th>è§†å›¾</th><th>ä½œç”¨</th><th>å¯¹è±¡çŠ¶æ€</th></tr></thead><tbody><tr><td>Marked0</td><td>æ ‡è®°å‘¨æœŸ0çš„å­˜æ´»å¯¹è±¡</td><td>ç¬¬ä¸€æ¬¡æ ‡è®°åå­˜æ´»</td></tr><tr><td>Marked1</td><td>æ ‡è®°å‘¨æœŸ1çš„å­˜æ´»å¯¹è±¡</td><td>ç¬¬äºŒæ¬¡æ ‡è®°åå­˜æ´»</td></tr><tr><td>Remapped</td><td>å·²é‡å®šä½çš„å¯¹è±¡</td><td>è½¬ç§»å®Œæˆå</td></tr></tbody></table>
<ul>
<li>å¹¶å‘æ ‡è®°ï¼ˆmarkï¼‰</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¼ ç»ŸGCï¼šéœ€è¦æš‚åœåº”ç”¨æ¥æ ‡è®°å¯¹è±¡</span>
<span class="hljs-comment">// ZGCï¼šå®Œå…¨å¹¶å‘æ ‡è®°ï¼Œæ— æš‚åœ</span>
â€‹
<span class="hljs-comment">// æ ‡è®°è¿‡ç¨‹ï¼š</span>
<span class="hljs-comment">// 1. åº”ç”¨çº¿ç¨‹æ­£å¸¸è®¿é—®å¯¹è±¡ï¼ˆé€šè¿‡Remappedè§†å›¾ï¼‰</span>
<span class="hljs-comment">// 2. GCçº¿ç¨‹å¹¶å‘æ ‡è®°ï¼Œå°†å¯¹è±¡æŒ‡é’ˆåˆ‡æ¢åˆ°Marked0/Marked1è§†å›¾</span>
<span class="hljs-comment">// 3. åº”ç”¨çº¿ç¨‹æ— æ„ŸçŸ¥ï¼Œç»§ç»­æ‰§è¡Œ</span>
</code></pre>
<ul>
<li>å¹¶å‘è½¬ç§»ï¼ˆrelocateï¼‰</li>
</ul>

<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»ŸGCï¼šè½¬ç§»å¯¹è±¡éœ€è¦æš‚åœåº”ç”¨</span>
<span class="hljs-comment">// ZGCï¼šå¹¶å‘è½¬ç§» + æŒ‡é’ˆè‡ªæ„ˆ</span>
â€‹
<span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> heap.getObject(pointer); Â <span class="hljs-comment">// æ­£å¸¸è®¿é—®</span>
<span class="hljs-comment">// å¦‚æœå¯¹è±¡æ­£åœ¨è¢«è½¬ç§»ï¼š</span>
<span class="hljs-comment">// 1. è§¦å‘é¡µé¢å¼‚å¸¸ï¼ˆpage faultï¼‰</span>
<span class="hljs-comment">// 2. ZGCå¤„ç†å™¨å°†å¯¹è±¡è½¬ç§»åˆ°æ–°ä½ç½®</span>
<span class="hljs-comment">// 3. æ›´æ–°æŒ‡é’ˆåˆ°æ–°åœ°å€ï¼ˆæŒ‡é’ˆè‡ªæ„ˆï¼‰</span>
<span class="hljs-comment">// 4. åº”ç”¨çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œæ— æ„ŸçŸ¥</span>
</code></pre>
<ul>
<li>æŒ‡é’ˆè‡ªæ„ˆï¼ˆremapï¼‰</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æŒ‡é’ˆç»“æ„ï¼ˆ64ä½ï¼‰</span>
<span class="hljs-selector-attr">[ 62ä½åœ°å€ | 2ä½å…ƒæ•°æ® ]</span>
â€‹
<span class="hljs-comment">// å…ƒæ•°æ®ä½å«ä¹‰ï¼š</span>
<span class="hljs-number">00</span> â†’ Remapped è§†å›¾
<span class="hljs-number">01</span> â†’ Marked0 Â  è§†å›¾
<span class="hljs-number">10</span> â†’ Marked1 Â  è§†å›¾
<span class="hljs-number">11</span> â†’ ä¿ç•™
â€‹
<span class="hljs-comment">// å½“åº”ç”¨è®¿é—®"æ—§"æŒ‡é’ˆæ—¶ï¼š</span>
if (æŒ‡é’ˆè§†å›¾ != å½“å‰æ´»åŠ¨è§†å›¾) {
 Â  Â <span class="hljs-comment">// è§¦å‘æŒ‡é’ˆè‡ªæ„ˆé€»è¾‘</span>
 Â  Â æ–°æŒ‡é’ˆ = æŸ¥æ‰¾è½¬å‘è¡¨(æ—§æŒ‡é’ˆ);
 Â  Â <span class="hljs-comment">// åŸå­æ€§åœ°æ›¿æ¢æŒ‡é’ˆ</span>
 Â  Â <span class="hljs-built_in">CAS</span>(å¯¹è±¡æŒ‡é’ˆ, æ—§æŒ‡é’ˆ, æ–°æŒ‡é’ˆ);
}
</code></pre>
<h5 data-id="heading-12">4. è°ƒæ•´é…ç½®</h5>
<p>è¿™é‡Œå°è¯•è°ƒæ•´äº†å„ç§å®¹å™¨ç¼–æ’é…ç½®ã€JVM å‚æ•°ã€Linux ç³»ç»Ÿå‚æ•°ï¼Œéƒ½æ²¡æœ‰æ•ˆæœï¼Œæœ€åå†³å®š <strong>æ”¾å¼ƒ ZGC</strong>ï¼Œæ”¹ç”¨ <strong>G1 åƒåœ¾å›æ”¶å™¨</strong>ï¼Œå¹¶è¡¥å……äº†ä¸€äº›å†…å­˜é™åˆ¶å‚æ•°ã€‚</p>
<p>è°ƒæ•´ <code>run.sh</code> æ·»åŠ å¦‚ä¸‹ JVM å‚æ•°ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># 1C3G å®¹å™¨é…ç½®å‚è€ƒ</span>
â€‹
<span class="hljs-comment"># è®© JVM çŸ¥é“å½“å‰è¿è¡Œç¯å¢ƒæ˜¯å®¹å™¨ï¼Œé˜²æ­¢ JVM è¯»å–å®¿ä¸»æœºçš„é…ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseContainerSupport</span> 
<span class="hljs-comment"># è¿™é‡Œé…ç½®å®¹å™¨é™åˆ¶å†…å­˜ï¼Œé¿å… JVM è¯»å–å®¿ä¸»æœºé…ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:MaxRAM=</span><span class="hljs-number">3072</span> 
<span class="hljs-comment"># JVM å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜ 75% * MaxRAM</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:MaxRAMPercentage=</span><span class="hljs-number">75.0</span> 
â€‹
<span class="hljs-comment"># åˆ é™¤ ZGC ç›¸å…³çš„ JVM å‚æ•°ï¼Œä½¿ç”¨ G1 åƒåœ¾å›æ”¶å™¨</span>
<span class="hljs-comment"># ä½¿ç”¨ G1 å¿…é¡»åˆ é™¤ -Xmn é…ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseG1GC</span> 
</code></pre>
<h5 data-id="heading-13">5. éƒ¨ç½²éªŒè¯</h5>
<p>ä¸å†å‡ºç°é‡å¯ã€‚</p>
<h3 data-id="heading-14">é—®é¢˜äºŒï¼šç”Ÿäº§ç¯å¢ƒå‘ç”Ÿé‡å¯</h3>
<h4 data-id="heading-15">ä¸€ã€ç°è±¡æè¿°</h4>
<p>Java æœåŠ¡å‹æµ‹å‘ç”Ÿé‡å¯ï¼Œé€šè¿‡ <code>dmesg</code> å‘½ä»¤æŸ¥çœ‹ Linux å†…æ ¸æ—¥å¿—ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5abd95ca3aa04f8d83110cc1aab16230~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=A%2B1h8ua%2BFXhXTEGW9mXgvDTBdM8%3D" alt="cgroupOOM.jpg" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼ˆ<code>æœ€åº•ä¸‹3è¡Œ</code>ï¼‰ï¼Œ<strong>å‘ç”Ÿäº† OOM, java è¿›ç¨‹è¢«ç³»ç»Ÿ kill äº†</strong>ï¼Œanon-rss æ˜¾ç¤ºçº¦ <code>2.97G</code>, å…¶ä¸­ java è¿›ç¨‹ rssï¼ˆé©»ç•™å†…å­˜ï¼‰785586 æ•°æ®é¡µï¼Œ<code>785586 * 4kB â‰ˆ 3G</code>.</p>
<blockquote>
<p>ä¸å…ˆå‰æµ‹è¯•ç¯å¢ƒé‡å¯ç°è±¡ä¸åŒï¼Œç”Ÿäº§å‹æµ‹çš„æ¥å£ä¹Ÿä¸æµ‹è¯•ç¯å¢ƒä¸ä¸€æ ·ã€‚</p>
</blockquote>
<h4 data-id="heading-16">äºŒã€æµ‹è¯•ç¯å¢ƒå¤ç°</h4>
<p>é€šè¿‡ç›¸åŒçš„æ¥å£å‹æµ‹ï¼Œç«‹é©¬åœ¨æµ‹è¯•ç¯å¢ƒå¤ç°äº†ç”Ÿäº§ç¯å¢ƒçš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-17">1. åˆæ­¥åˆ†æ</h5>
<p>åŒæ ·æ˜¯æ²¡æœ‰ heapdump æ–‡ä»¶ç”Ÿæˆã€GC æ­£å¸¸ï¼Œä½† Linux å†…æ ¸æ—¥å¿—æ˜¾ç¤º <code>Memory cgroup out of memory</code>.æ‰§è¡Œ <code>cat /proc/${PID}/cmdline | tr '\0' '\n'</code> æ£€æŸ¥ jvm å‚æ•°ï¼Œå¦‚ä¸‹å‚æ•°å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ï¼ŒJVM ç»ˆæ­¢é€€å‡º</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+ExitOnOutOfMemoryError</span> 
<span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ç”Ÿæˆ Java å †è½¬å‚¨</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+HeapDumpOnOutOfMemoryError</span> 
<span class="hljs-comment"># å †è½¬å‚¨æ–‡ä»¶ä¿å­˜ä½ç½®</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:HeapDumpPath=/logs/</span>...
</code></pre>
<p>é‚£ä¹ˆï¼Œæ²¡æœ‰å‘ç° heapdump æ–‡ä»¶å°±æ„å‘³ç€ JVM å†…å­˜æ²¡æœ‰æº¢å‡ºã€‚</p>
<h5 data-id="heading-18">2. å·¥å…·åˆ†æ</h5>
<p>ä½¿ç”¨ jmc, jvisualvm, arthas ç›‘æ§ JVM å†…å­˜å˜åŒ–ï¼Œæ‰€æœ‰åŒºåŸŸï¼ˆå †ã€å…ƒç©ºé—´ã€çº¿ç¨‹æ•°ã€ç›´æ¥å†…å­˜ï¼‰å†…å­˜ä¸€ç›´å¾ˆå¹³ç¨³ï¼Œä¸€ç›´åˆ° java è¿›ç¨‹è¢«æ€ï¼ŒJVM å†…å­˜ä½¿ç”¨æƒ…å†µéƒ½ä¸€ç›´åœ¨å®‰å…¨åŒºåŸŸï¼Œç”šè‡³ç¦»æˆ‘è®¾ç½®çš„æœ€å¤§å€¼è¿˜å·®å¾ˆå¤šã€‚</p>
<p>å†æ¬¡ç¡®è®¤ â€”â€”â€”â€” <strong>JVM å†…å­˜ä¸å­˜åœ¨ OOM é—®é¢˜</strong>ã€‚</p>
<h5 data-id="heading-19">3. å‚æ•°è°ƒä¼˜</h5>
<p>ç¡®å®šäº† JVM å†…å­˜ä¸å­˜åœ¨æº¢å‡ºï¼Œé‚£å°±æ˜¯ JVM ä¹‹å¤–çš„å†…å­˜å‘ç”Ÿäº†æº¢å‡ºï¼Œå¸¸è§çš„æœ‰ï¼š</p>
<ul>
<li><code>java.nio.*</code> åº“çš„æ–¹æ³•è°ƒç”¨ï¼Œæ¯”å¦‚ <code>ByteBuffer.allocateDirect</code></li>
<li><code>sun.misc.Unsafe</code> ç±»çš„æ–¹æ³•è°ƒç”¨</li>
</ul>
<p>è¿™äº›æ–¹æ³•åº•å±‚éƒ½æ˜¯ ä½¿ç”¨ <code>JNIï¼ˆJava Native Interfaceï¼‰çš„æ–¹å¼</code> è°ƒç”¨ C/C++ åº“çš„å‡½æ•°ï¼Œè¿™éƒ¨åˆ†å‡½æ•°çš„æ‰§è¡Œã€å†…å­˜åˆ†é…ã€å†…å­˜ç®¡ç† <strong>ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼ŒJVM ç®¡ä¸åˆ°</strong>ã€‚</p>
<blockquote>
<p>è°ƒä¼˜ç­–ç•¥ - å› ä¸º JVM æ— æ³•ç®¡ç† native åŒºåŸŸçš„å†…å­˜ï¼Œä¹Ÿç›‘æ§ä¸åˆ°ï¼Œé‚£å°±å…ˆæŠŠå®¹å™¨å†…å­˜é™åˆ¶è°ƒå¤§ï¼Œçœ‹çœ‹åˆ°åº•å†…å­˜èƒ½æ¶¨åˆ°å¤šå°‘ï¼Œå†è°ƒæ•´å‚æ•°ã€‚</p>
</blockquote>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>å†…å­˜è°ƒæ•´åˆ° <code>4G</code> â€”â€”&gt; å‹æµ‹</p>
<ul>
<li><strong>æº¢å‡º</strong></li>
</ul>
</li>
<li>
<p>ç¼©å° heapã€metaspaceã€thread-stackã€direct åŒºåŸŸçš„å†…å­˜ï¼Œå°½å¯èƒ½æŠŠç©ºé—´éƒ½ç•™ç»™ native åŒº</p>
<ul>
<li><strong>è¿˜æ˜¯æº¢å‡º</strong></li>
</ul>
</li>
<li>
<p>ä¼˜åŒ– <code>é«˜CPUå ç”¨</code> çš„çº¿ç¨‹è°ƒç”¨é“¾ä¸Šçš„æ–¹æ³•ï¼ˆæ—¥å¿—ç›¸å…³ï¼‰ï¼šå‡å°‘æ—¥å¿—è¾“å‡ºï¼Œè°ƒæ•´æ—¥å¿—ç›¸å…³çš„ç¼“å­˜ã€é˜Ÿåˆ—ã€IO ç­‰å‚æ•°</p>
<ul>
<li><strong>è¿˜æ˜¯æº¢å‡º</strong></li>
</ul>
</li>
<li>
<p>è°ƒæ•´ log4j2.xml ä¸­ kafka ç›¸å…³å‚æ•°ï¼Œé™ä½ cpu &amp; memory æ¶ˆè€—</p>
<ul>
<li><strong>è¿˜æ˜¯æº¢å‡º</strong></li>
</ul>
</li>
<li>
<p>è°ƒæ•´ nio ç›¸å…³å‚æ•°ï¼Œé™ä½ cpu &amp; memory æ¶ˆè€—</p>
<ul>
<li><strong>è¿˜æ˜¯æº¢å‡º</strong></li>
</ul>
</li>
<li>
<p>å†…å­˜è°ƒæ•´åˆ° <code>6G</code> å¹¶è°ƒæ•´æ—¥å¿—è¾“å‡ºçº§åˆ«ä¸º ERROR â€”â€”&gt; <strong>å‹æµ‹ 48 å°æ—¶</strong></p>
<ul>
<li><strong>æ²¡æœ‰æº¢å‡ºï¼Œå†…å­˜å ç”¨é£™å‡åˆ° 5G å¤š</strong></li>
</ul>
</li>
</ul>
<h5 data-id="heading-20">4. å®šä½åŸå› </h5>
<p>æ— è®ºæ€ä¹ˆè°ƒæ•´ï¼ŒJVM å†…å­˜å§‹ç»ˆç¨³å®šåœ¨ 2G ä»¥å†…ï¼Œé‚£å¤šå‡ºæ¥çš„ 3G+ å°±æ˜¯ JNI äº§ç”Ÿçš„å†…å­˜ï¼ˆnative memoryï¼‰ã€‚</p>
<p><strong>ä»¥ä¸Šæ˜¯é‡ç‚¹ï¼Œä»¥ä¸‹æ˜¯å¼¯è·¯ï¼ˆæ–¹å‘ä¸å¯¹ï¼Œç™½è´¹åŠŸå¤«ï¼Œå¼•ä»¥ä¸ºæˆ’ï¼‰ï¼š</strong></p>
<ul>
<li>
<p>å°è¯•å„ç§å‘½ä»¤ï¼Œå†™äº†è¿‘ 10 ä¸ªç›‘æ§è„šæœ¬ï¼Œè¯•å›¾è¿½è¸ª â€œé€ æˆ 3G+ native å†…å­˜â€ çš„å…ƒå‡¶</p>
<ul>
<li>å¤±è´¥</li>
</ul>
</li>
<li>
<p>å°è¯•å„ç§å·¥å…·ï¼Œç”Ÿæˆå †æ ˆã€çº¿ç¨‹æ ˆï¼Œç»“åˆç›‘æ§è„šæœ¬å’Œä»£ç åˆ†æï¼Œè¯•å›¾å®šä½ â€œçœŸå‡¶â€</p>
<ul>
<li>å¤±è´¥</li>
</ul>
</li>
</ul>
<p><strong>å›åˆ°é‡ç‚¹ï¼š</strong></p>
<ul>
<li>
<p><code>JVM memory</code> vs <code>native memory</code> = <code>1.x : 3.x</code></p>
<ul>
<li>
<p>ä»€ä¹ˆæ ·çš„ä»£ç èƒ½å¯¼è‡´æ€æ ·çš„æ¯”ä¾‹ï¼Ÿ</p>
<ul>
<li>â€œå†…å­˜æ³„æ¼â€ çš„ä»£ç </li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>native memory</code> <strong>100% å†…å­˜æ³„æ¼äº†!!!</strong></p>
<ul>
<li>
<p>é€šè¿‡ç›‘æ§ã€çº¿ç¨‹å †æ ˆåˆ†æï¼š</p>
<ul>
<li>ä¸å­˜åœ¨ä¼šäº§ç”Ÿå¤§é‡ JNI è°ƒç”¨çš„ Java API</li>
</ul>
</li>
<li>
<p>é€šè¿‡ç›‘æ§ã€å†…å­˜å †æ ˆåˆ†æï¼š</p>
<ul>
<li>ä¸å­˜åœ¨å¤§é‡è·Ÿ JNI æœ‰å…³çš„å¯¹è±¡æˆ–ç±»</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç»“åˆå…¶ä»–æƒ…å†µåˆ¤æ–­ï¼Œ<strong>å¯èƒ½ä¸ä¸šåŠ¡ä»£ç æ— å…³</strong>ï¼š</p>
<ul>
<li>
<p>å¸¸è§„ç”Ÿäº§ç¯å¢ƒã€å¸¸è§„æµ‹è¯•ç¯å¢ƒéƒ½æ²¡æœ‰é—®é¢˜</p>
</li>
<li>
<p>å…¶ä»–æœåŠ¡ä¹Ÿæœ‰é‡å¯çš„ç°è±¡ï¼Œgateway æœåŠ¡ä¹Ÿæœ‰é‡å¯çš„ç°è±¡ï¼Œå®ƒç”šè‡³éƒ½æ²¡æœ‰ä¸šåŠ¡ä»£ç </p>
<ul>
<li>å¦‚æœä¸æ˜¯ä¸šåŠ¡ä»£ç çš„é—®é¢˜ï¼Œé‚£æ˜¯æŸä¸ª<strong>ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…æœ‰é—®é¢˜ï¼Ÿ</strong></li>
</ul>
</li>
<li>
<p>å³ä½¿åœæ­¢å‹æµ‹ï¼Œå†…å­˜ä¹Ÿä¸ä¼šé™ä¸‹æ¥</p>
<ul>
<li><strong>native memory åŒºåŸŸä¸ºä»€ä¹ˆä¸ä¼šå›æ”¶ï¼Ÿ</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…æœ‰é—®é¢˜çš„æ¦‚ç‡æ¯”è¾ƒå°</strong>ï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¤¸å¼ çš„å†…å­˜æ³„æ¼ï¼Œæœ‰é—®é¢˜ä¹Ÿè½®ä¸åˆ°æˆ‘å‘ç°</p>
</li>
</ul>
<h5 data-id="heading-21">5. ç¡®å®šæ’æŸ¥æ–¹å‘</h5>
<blockquote>
<p>æ—¢ç„¶ JVM èŒƒå›´å†…æ‰¾ä¸å‡ºç­”æ¡ˆï¼Œç´¢æ€§ä» JVM ä¹‹å¤–æ‰¾æ‰¾çœ‹ï¼ˆ<strong>çŸ¥è¯†ç›²åŒºï¼Œæ•´ç†ä¸Šè¿°åˆ†æç»“æœï¼Œè®© AI ç»™æˆ‘æä¾›æ€è·¯</strong>ï¼‰ã€‚</p>
</blockquote>
<ul>
<li>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘æŠŠ JVM å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆéœ€è¦å¼€å¯å‚æ•°<code>-XX:NativeMemoryTracking=summary</code>ï¼‰å–‚ç»™ AI å¹¶ç®€å•æè¿°äº†ä¸€ä¸‹ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77dc877ff13844d89c0977d91dc65b74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=HgNNgBLhrNtuF5p0uzIMTgYmuu8%3D" alt="AIé—®ç­”01-Javaå†…å­˜æº¢å‡º.png" loading="lazy"/></p>
</li>
<li>
<p>AI çš„å›ç­”ï¼Œæ€»ç»“æ¥è¯´å°±æ˜¯ <code>Metaspace</code> çš„ç±»æ•°é‡å¾ˆå¤šï¼Œæœ€å¯èƒ½å‘ç”Ÿæº¢å‡ºï¼Œè¿˜æœ‰å°±æ˜¯ç›‘æ§ç›¸å…³çš„ï¼ˆè¿™ä¸ªå¿½ç•¥ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2000d04a7b5b48e2bb50024ae41a7939~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=krPx8GIaMyqlmRuNeccgaqEbRNk%3D" alt="AIé—®ç­”02-Javaå†…å­˜æº¢å‡º-å¯èƒ½æº¢å‡ºåŒº.png" loading="lazy"/></p>
</li>
<li>
<p>é€šè¿‡å‰é¢çš„åˆ†æï¼Œæˆ‘å¾ˆè‚¯å®šçš„å‘Šè¯‰ä»–ï¼Œ<code>Metaspace</code> ä¸å­˜åœ¨æº¢å‡ºï¼Œç„¶åè¡¥å……äº†è¯¦ç»†æè¿°ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a588b884ba3f4ba585932c4cb0cbded9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=OROKgWUiMlMM%2FMKz06MCJiM8uFM%3D" alt="AIé—®ç­”03-Javaå†…å­˜æº¢å‡º-Nativeå†…å­˜æº¢å‡º.png" loading="lazy"/></p>
</li>
<li>
<p>ç»“è®ºä¸€è‡´ï¼Œå°±æ˜¯ <code>Native Memory</code> é—®é¢˜ï¼Œç„¶åç»™å‡ºå¾ˆå¤šæ’æŸ¥æ–¹å¼ï¼Œé€ä¸€éªŒè¯ï¼Œç»“æœï¼š</p>
<ul>
<li><code>gdb</code> å‘½ä»¤æŠ¥é”™</li>
<li><code>lsof</code> å‘½ä»¤ä¸å­˜åœ¨</li>
<li>éœ€è¦å®‰è£… <code>bpfcc-tools</code> å·¥å…·</li>
<li><code>pmap</code> è¾“å‡ºå†…å®¹å¹¶æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©</li>
</ul>
</li>
<li>
<p>è™½ç„¶å¾ˆå¤šéªŒè¯ä¸äº†ï¼Œä¸è¿‡ç»“åˆå‰é¢çš„åˆ†æï¼Œè¿˜æ˜¯å¯ä»¥æ’é™¤å¾ˆå¤šé€‰é¡¹ï¼Œæœ€åé”å®š <code>glibc arena</code> ç¼“å­˜ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf069b0c93d426591183b3ad2f01112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=WEITOKzbRcxDm%2BGyyiM%2Bb%2FNoR9k%3D" alt="AIé—®ç­”05-Javaå†…å­˜æº¢å‡º-JVMä¹‹å¤–åŒºåŸŸ.png" loading="lazy"/></p>
</li>
<li>
<p>ç»§ç»­è¿½é—® AIï¼Œå¦‚ä¸‹æè¿°å’Œæˆ‘è§‚å¯Ÿåˆ°çš„ç°è±¡å¦‚å‡ºä¸€è¾™</p>
<ul>
<li><strong>glibc çš„ malloc arena ç¼“å­˜ã€ä¸é‡Šæ”¾</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56fa6a1bb5cb4ece974f7cbf130341db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=nc7PA9rX3MaZhGKaM6I1l0AG2Z4%3D" alt="AIé—®ç­”04-Javaå†…å­˜æº¢å‡º-glibc arenaç¼“å­˜ç‰¹å¾.png" loading="lazy"/></li>
</ul>
</li>
</ul>
<h4 data-id="heading-22">ä¸‰ã€éªŒè¯ jemalloc</h4>
<ul>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjemalloc.net%2F" target="_blank" title="https://jemalloc.net/" ref="nofollow noopener noreferrer">jemalloc.net/</a></li>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjemalloc%2Fjemalloc" target="_blank" title="https://github.com/jemalloc/jemalloc" ref="nofollow noopener noreferrer">github.com/jemalloc/jeâ€¦</a></li>
<li>ä¸‹è½½ <code>jemalloc 5.3.0 æºç </code>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjemalloc%2Fjemalloc%2Freleases%2Fdownload%2F5.3.0%2Fjemalloc-5.3.0.tar.bz2" target="_blank" title="https://github.com/jemalloc/jemalloc/releases/download/5.3.0/jemalloc-5.3.0.tar.bz2" ref="nofollow noopener noreferrer">github.com/jemalloc/jeâ€¦</a></li>
</ul>
<h5 data-id="heading-23">1. ç¼–è¯‘</h5>
<pre><code class="hljs language-bash" lang="bash">tar xvf jemalloc-5.3.0.tar.bz2
<span class="hljs-built_in">cd</span> jemalloc-5.3.0
./configure --prefix=<span class="hljs-variable">$HOME</span>/.local
make -j$(<span class="hljs-built_in">nproc</span>)
make install
â€‹
<span class="hljs-comment"># ç¼–è¯‘å®Œæˆï¼Œæ‹·è´ libjemalloc.so.2 åˆ° /lib64</span>
<span class="hljs-built_in">cp</span> <span class="hljs-variable">$HOME</span>/.local/lib/libjemalloc.so.2 /lib64/
</code></pre>
<h5 data-id="heading-24">2. ä¿®æ”¹å®¹å™¨å¯åŠ¨è„šæœ¬</h5>
<p><code>run.sh</code> æœ€é¡¶éƒ¨æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ===== å…³é”®å†…å­˜å‚æ•° (å¿…é¡»æ”¾åœ¨æœ€é¡¶éƒ¨) =====</span>
export <span class="hljs-attr">MALLOC_ARENA_MAX</span>=<span class="hljs-number">2</span> Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># 1æ ¸CPUåªéœ€2ä¸ªarena (é»˜è®¤8)</span>
export <span class="hljs-attr">MALLOC_TRIM_THRESHOLD_</span>=<span class="hljs-number">131072</span> Â <span class="hljs-comment"># 128KBç©ºé—²ç«‹å³å½’è¿˜OS (é»˜è®¤128KBä½†å¤±æ•ˆ)</span>
export <span class="hljs-attr">MALLOC_MMAP_THRESHOLD_</span>=<span class="hljs-number">131072</span> Â <span class="hljs-comment"># &gt;128KBåˆ†é…èµ°mmap (ç‹¬ç«‹é‡Šæ”¾)</span>
export <span class="hljs-attr">MALLOC_TOP_PAD_</span>=<span class="hljs-number">0</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># ç¦ç”¨é¡¶éƒ¨å¡«å…… (é˜²ç¢ç‰‡)</span>
export <span class="hljs-attr">GLIBC_TUNABLES</span>=glibc.malloc.trim_threshold=<span class="hljs-number">131072</span> Â <span class="hljs-comment"># åŒé‡ä¿é™©</span>
â€‹
<span class="hljs-comment"># ===== å¼ºåˆ¶ä½¿ç”¨ jemallocï¼ˆå®¹å™¨ç¯å¢ƒå¿…é¡»ï¼‰ =====</span>
export <span class="hljs-attr">LD_PRELOAD</span>=/lib64/libjemalloc.so.<span class="hljs-number">2</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  A[Java è¿›ç¨‹å¯åŠ¨] --&gt; B{LD_PRELOAD æ£€æŸ¥}
  B --&gt;|å­˜åœ¨| C[åŠ è½½ libjemalloc.so.2]
  B --&gt;|ä¸å­˜åœ¨| D[åŠ è½½ glibc çš„ malloc]
  C --&gt; E[æ›¿æ¢ç¬¦å·è¡¨]
  E --&gt; F[æ‰€æœ‰ malloc/free è°ƒç”¨æŒ‡å‘ jemalloc]
  D --&gt; G[æ‰€æœ‰ malloc/free è°ƒç”¨æŒ‡å‘ glibc]
</code></pre>
<h5 data-id="heading-25">3. æ·±åº¦ä¼˜åŒ–</h5>
<p>åœ¨ <code>/etc/malloc.conf</code> æ·»åŠ å¦‚ä¸‹é…ç½®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1C3G å®¹å™¨é»„é‡‘é…ç½®</span>
dirty_decay_ms:1000, Â  Â  Â <span class="hljs-comment"># 1ç§’åå½’è¿˜ dirty pages</span>
muzzy_decay_ms:100, Â  Â  Â  <span class="hljs-comment"># 100msåå½’è¿˜ muzzy pages</span>
background_thread:<span class="hljs-literal">true</span>, Â  <span class="hljs-comment"># å¯ç”¨åå°å›æ”¶çº¿ç¨‹ (å…³é”®!)</span>
max_background_threads:1, <span class="hljs-comment"># 1æ ¸å®¹å™¨åªéœ€1ä¸ªçº¿ç¨‹</span>
metadata_thp:auto, Â  Â  Â  Â <span class="hljs-comment"># ä¼˜åŒ–å…ƒæ•°æ®å†…å­˜</span>
tcache:<span class="hljs-literal">false</span>, Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># ç¦ç”¨ thread cache (é˜² TLS ç¢ç‰‡)</span>
arena_bind:<span class="hljs-literal">true</span>, Â  Â  Â  Â  Â <span class="hljs-comment"># 1æ ¸CPUç»‘å®š1ä¸ªarena</span>
abort_conf:<span class="hljs-literal">true</span> Â  Â  Â  Â  Â  <span class="hljs-comment"># é…ç½®é”™è¯¯æ—¶å´©æºƒ (é˜²é™é»˜å¤±æ•ˆ)</span>
</code></pre>
<p>å®¹å™¨ä¸­å¯ä»¥åœ¨ <code>dockerfile</code> æ–‡ä»¶ä¸­ï¼Œé€šè¿‡å¦‚ä¸‹æŒ‡ä»¤å®ç°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">USER root
RUN <span class="hljs-built_in">echo</span> <span class="hljs-string">"dirty_decay_ms:1000,muzzy_decay_ms:100,background_thread:true,max_background_threads:1,metadata_thp:auto,tcache:false,arena_bind:true,abort_conf:true"</span> &gt; /etc/malloc.conf
</code></pre>
<p>æˆ–è€…ï¼Œåœ¨å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">MALLOC_CONF</span>=<span class="hljs-string">"dirty_decay_ms:1000,muzzy_decay_ms:100,background_thread:true,max_background_threads:1,metadata_thp:auto,tcache:false,arena_bind:true,abort_conf:true"</span>
</code></pre>
<p>é‡æ–°éƒ¨ç½²åï¼Œé€šè¿‡ä¸‹é¢å‘½ä»¤éªŒè¯ jemalloc æ˜¯å¦ç”Ÿæ•ˆ</p>
<pre><code class="hljs language-perl" lang="perl">jcmd &lt;pid&gt; VM.dynlibs | <span class="hljs-keyword">grep</span> jemalloc
<span class="hljs-comment"># æœ‰è¾“å‡ºå°±è¡¨ç¤ºç”Ÿæ•ˆ</span>
</code></pre>
<h5 data-id="heading-26">4. éªŒè¯</h5>
<p>æ•ˆæœéå¸¸æ˜¾è‘—ï¼Œå†…å­˜ä¸å†æ— é™ä¸Šæ¶¨ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>




















<table><thead><tr><th/><th>ä½¿ç”¨ jemalloc å‰</th><th>ä½¿ç”¨ jemalloc å</th></tr></thead><tbody><tr><td>3G å®¹å™¨</td><td>å†…å­˜å¾ˆå¿«é£™å‡åˆ° 3Gï¼Œè¿›ç¨‹è¢«æ€</td><td>å‹æµ‹ 24 å°æ—¶ï¼Œå†…å­˜ç¨³å®šåœ¨ 2.4G ä»¥ä¸‹</td></tr><tr><td>6G å®¹å™¨</td><td>å†…å­˜å¾ˆå¿«é£™å‡åˆ° 4Gï¼ŒæŒç»­ä¸Šæ¶¨ï¼Œæœ€é«˜è¾¾åˆ° 5G+</td><td>å‹æµ‹ 3 å°æ—¶ï¼Œå†…å­˜ç¨³å®šåœ¨ 2.4G ä»¥ä¸‹</td></tr></tbody></table>
<h3 data-id="heading-27">é—®é¢˜ä¸‰ï¼šè´¦æˆ·åˆ—è¡¨æŸ¥è¯¢æ¥å£è€—æ—¶è¿‡é•¿</h3>
<h4 data-id="heading-28">ä¸€ã€ç°è±¡æè¿°</h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ¥å£ï¼Œä»…åŒ…å«ä¸€æ¬¡ ESB æ¥å£è°ƒç”¨ï¼Œé¢„æœŸ RT åº”è¯¥åœ¨ <code>100~300ms</code>ã€‚ä½†æ˜¯ å¶å°” ä¼šå‡ºç°è¶…è¿‡ <code>1000ms</code>ï¼Œç”šè‡³ <code>2000~5000ms</code>ã€‚</p>
<h4 data-id="heading-29">äºŒã€æ—¥å¿—åˆ†æ</h4>
<p>é€šè¿‡åº”ç”¨æ—¥å¿—è§‚å¯Ÿï¼Œå‰”é™¤â€œç½‘ç»œè°ƒç”¨è€—æ—¶è¿‡é•¿â€çš„äº¤æ˜“ï¼Œä»æœ‰ä¸å°‘ <strong>ä»£ç æ‰§è¡Œè€—æ—¶ï¼ˆæ— IOï¼‰</strong> è¶…è¿‡ 1 ç§’çš„äº¤æ˜“ã€‚</p>
<h4 data-id="heading-30">ä¸‰ã€åˆ†æä»£ç </h4>
<p>ç»“åˆè¯·æ±‚å“åº”æŠ¥æ–‡åˆ†æ å¯èƒ½çš„ä»£ç é•¿è€—æ—¶ç‚¹ï¼Œ åŒä¸€å®¢æˆ·ã€ç›¸åŒè¯·æ±‚å‚æ•°ã€ç›¸åŒå“åº”å‚æ•°ä¹Ÿæ˜¯æ—¶å¿«æ—¶æ…¢ï¼Œ<strong>æ’é™¤ä»£ç é—®é¢˜å¯¼è‡´</strong>ã€‚</p>
<h4 data-id="heading-31">å››ã€æŸ¥çœ‹ GC æ—¥å¿—</h4>
<p>å‘ç° Young GC è€—æ—¶å¼‚å¸¸(<code>&gt; 100ms</code>)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48d369d63435414aa17f7bcac1b4f180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=FR38I8xJsRQYIm%2FekSWQYDvG63c%3D" alt="YGCè€—æ—¶è¶…100ms.jpg" loading="lazy"/></p>
<p>ç”šè‡³æœ‰é«˜è¾¾ 300+ ms çš„
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d044a0a1f01469998ec8f024d606e31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=7hLbPBOfIoJrcef1CA92m4gnm4k%3D" alt="YGCè€—æ—¶è¶…300ms.jpg" loading="lazy"/></p>
<h4 data-id="heading-32">äº”ã€jvm å‚æ•°è°ƒæ•´</h4>
<p>å‘ç°ä¸€ä¸ªä¸¥é‡çš„é…ç½®é”™è¯¯ï¼š<code>-Xmn776m</code>ï¼Œåœ¨ G1 / ZGC ä¸­ä¸èƒ½ä½¿ç”¨ Xmn å‚æ•°ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  A[ä¼ ç»Ÿ GC] --&gt; B[å›ºå®šåˆ†åŒº]
  B --&gt; C[Young Gen: 1/3 å †]
  B --&gt; D[Old Gen: 2/3 å †]
  C --&gt; E[Eden + 2 Survivor]
  
  F[G1 GC] --&gt; G[Region ç½‘æ ¼]
  G --&gt; H[åŠ¨æ€åˆ†é… Young/Old]
  H --&gt; I[æ¯ Region 1-32MB]
  H --&gt; J[Humongous å¯¹è±¡ä¸“ç”¨]
</code></pre>
<ul>
<li>
<p>åœ¨ <code>G1 GC</code> ä¸­ä½¿ç”¨ <code>-Xmn</code> æ˜¯<strong>ä¸¥é‡é…ç½®é”™è¯¯</strong>ï¼Œä¼š<strong>ç ´å G1 çš„æ ¸å¿ƒè‡ªé€‚åº”æœºåˆ¶</strong>ï¼Œ å¯¼è‡´åœé¡¿æ—¶é—´å¤±æ§ã€ååé‡æš´è·Œ 40%+</p>
</li>
<li>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>Parallel GC</strong>ï¼š<code>-Xmn</code> ç›´æ¥è®¾ç½® Young Gen å¤§å°ï¼ˆç‰©ç†åˆ†åŒºï¼‰</li>
<li><strong>G1 GC</strong>ï¼šYoung Gen æ˜¯<strong>é€»è¾‘é›†åˆ</strong>ï¼Œç”±å¤šä¸ª Region åŠ¨æ€ç»„æˆ</li>
<li><strong>è®¾ç½® -Xmn ä¼šå¼ºåˆ¶ G1 é€€åŒ–ä¸º Parallel GC æ¨¡å¼</strong>ï¼ˆä¸§å¤±æ ¸å¿ƒä¼˜åŠ¿ï¼‰</li>
<li><code>-Xmn</code> è¿‡å¤§ï¼Œ1æ ¸çš„ CPU æ— æ³•åœ¨ 80ms å†…å®Œæˆå›æ”¶</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-css" lang="css">graph LR
  <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ä¼ ç»Ÿ GC]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[å›ºå®šåˆ†ä»£]</span>
  <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[Young Gen: Eden+Survivor]</span>
  <span class="hljs-selector-tag">B</span> --&gt; D<span class="hljs-selector-attr">[Old Gen: Tenured]</span>
  C --&gt;|-Xmn æ§åˆ¶| E<span class="hljs-selector-attr">[å›ºå®šå¤§å°]</span>
  
  F<span class="hljs-selector-attr">[ZGC]</span> --&gt; G<span class="hljs-selector-attr">[å•ä»£+åŠ¨æ€ Region]</span>
  G --&gt; H<span class="hljs-selector-attr">[Colored Pointers]</span>
  G --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[Load Barriers]</span>
  G --&gt; J<span class="hljs-selector-attr">[å¹¶å‘å‹ç¼©]</span>
  H --&gt; K<span class="hljs-selector-attr">[æ— ç‰©ç†åˆ†ä»£è¾¹ç•Œ]</span>
</code></pre>
<ul>
<li>
<p><strong>åœ¨ ZGC ä¸­è®¾ç½® -Xmn ä¸ä»…æ— æ•ˆï¼Œæ›´æ˜¯ä¸¥é‡é…ç½®é”™è¯¯</strong>ï¼Œä¼šå¯¼è‡´ JVM <strong>å¿½ç•¥å…³é”®å†…å­˜å‚æ•°</strong>ï¼Œåœ¨ 1C3G å®¹å™¨ä¸­å¼•å‘ï¼š</p>
<ul>
<li><strong>å†…å­˜åˆ†é…å¤±æ§ â†’ RSS è¶…é™ OOMKilled</strong></li>
<li><strong>GC è‡ªé€‚åº”å¤±æ•ˆ â†’ åœé¡¿æ—¶é—´é£™å‡ 300%</strong></li>
</ul>
</li>
<li>
<p><strong>ZGC æ ¸å¿ƒè®¾è®¡</strong>ï¼š</p>
<ul>
<li><strong>æ— ç‰©ç†å¹´è½»ä»£</strong>ï¼šæ‰€æœ‰å¯¹è±¡åœ¨ç»Ÿä¸€å †ä¸­åˆ†é…</li>
<li><strong>åŠ¨æ€ Region ç®¡ç†</strong>ï¼šæ ¹æ®å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨è°ƒæ•´</li>
<li><strong>å°±åœ°å‹ç¼© (In-place Relocation)</strong> ï¼šæ— éœ€ Survivor ç©ºé—´</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[0.213s]</span><span class="hljs-selector-attr">[warning]</span><span class="hljs-selector-attr">[gc]</span> -Xmn is not supported with ZGC, ignoring
<span class="hljs-selector-attr">[0.214s]</span><span class="hljs-selector-attr">[warning]</span><span class="hljs-selector-attr">[gc]</span> Use -XX:SoftMaxHeapSize for heap sizing control
</code></pre>
<h3 data-id="heading-33">æ€»ç»“</h3>
<h4 data-id="heading-34">ä¸€ã€JVM å‚æ•°ï¼ˆæœ€ç»ˆç‰ˆï¼‰</h4>
<ul>
<li>å¿…é¡»æ”¾åœ¨ JVM å‚æ•°æœ€å‰é¢</li>
</ul>

<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å†…å­˜é¢„ç¢°æ’</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+AlwaysPreTouch</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+TransparentHugePages</span> Â <span class="hljs-comment"># é…åˆä½¿ç”¨ (ä»…ç‰©ç†æœºæœ‰æ•ˆ)</span>
â€‹
<span class="hljs-comment"># å¯ç”¨ TransparentHugePages ä¼šè‡ªåŠ¨å°†ç‰©ç†å†…å­˜åˆ†æˆè‹¥å¹²ä¸ªå¤§å°ä¸º2MBçš„å¤§å—ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°ç³»ç»Ÿçš„é€æ˜å¤§é¡µç¼“å­˜ä¸­ã€‚å½“JVMéœ€è¦åˆ†é…ä¸€å—å†…å­˜æ—¶ï¼Œå¦‚æœè¯¥å†…å­˜å¤§å°å°äºç­‰äº2MBï¼Œåˆ™ç›´æ¥ä»ç³»ç»Ÿé€æ˜å¤§é¡µç¼“å­˜ä¸­è·å–ï¼›å¦åˆ™ï¼Œä¼šå°†è¯¥å†…å­˜æ‹†åˆ†æˆè‹¥å¹²ä¸ªå°å—ï¼Œå¹¶åˆ†åˆ«ä»ç³»ç»Ÿé€æ˜å¤§é¡µç¼“å­˜ä¸­è·å–ã€‚è¿™æ ·åšçš„æ•ˆæœæ˜¯å¯ä»¥é¿å…å› å†…å­˜ç¢ç‰‡è€Œå¯¼è‡´çš„å†…å­˜ä¸è¶³é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å‡å°‘å†…å­˜è®¿é—®çš„å»¶è¿Ÿå’ŒæŠ–åŠ¨ã€‚</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  A[JVM å¯åŠ¨] --&gt;|é»˜è®¤| B[ä»…é¢„åˆ†é…å†…å­˜æŒ‡é’ˆ]
  B --&gt; C[è¿è¡Œæ—¶é¦–æ¬¡è®¿é—®]
  C --&gt; D[OS è§¦å‘ page fault]
  D --&gt; E[1C CPU æ— æ³•åŠæ—¶å“åº”]
  E --&gt; F[çº¿ç¨‹é˜»å¡ 50-100ms]
  F --&gt; G[RSS çªå¢ â†’ OOMKilled]
  
  A --&gt;|AlwaysPreTouch=true| H[å¯åŠ¨æ—¶è§¦ç¢°æ‰€æœ‰é¡µ]
  H --&gt; I[å†…å­˜è¿ç»­åˆ†é…]
  I --&gt; J[RSS ç¨³å®šå¢é•¿]
  J --&gt; K[æ— è¿è¡Œæ—¶é˜»å¡]
</code></pre>
<h5 data-id="heading-35">å®¹å™¨å¿…é…</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å‘ŠçŸ¥ JVM å½“å‰è¿è¡Œç¯å¢ƒä¸ºå®¹å™¨ï¼Œé¿å… JVM é”™è¯¯è¯†åˆ«å®¿ä¸»æœºé…ç½®</span>
-XX:+UseContainerSupport
<span class="hljs-comment"># å‘ŠçŸ¥ JVM å½“å‰å®¹å™¨ cpu æ ¸æ•°ï¼Œé¿å… JVM é”™è¯¯è¯†åˆ«å®¿ä¸»æœºé…ç½®</span>
-XX:<span class="hljs-attr">ActiveProcessorCount</span>=<span class="hljs-number">1</span>
<span class="hljs-comment"># å‘ŠçŸ¥ JVM å½“å‰å®¹å™¨å†…å­˜é™åˆ¶ï¼Œé¿å… JVM é”™è¯¯è¯†åˆ«å®¿ä¸»æœºé…ç½®</span>
-XX:<span class="hljs-attr">MaxRAM</span>=<span class="hljs-number">3072</span>m
<span class="hljs-comment"># JVM æœ€å¤§å¯ç”¨å†…å­˜ MaxRAM * 75%, </span>
<span class="hljs-comment"># ä¿å®ˆä¸€ç‚¹å¯ä»¥è®¾ä¸º 70%, ç•™ 30% ç»™æ“ä½œç³»ç»Ÿï¼Œæ ¹æ®å‹æµ‹æƒ…å†µåšè°ƒæ•´</span>
-XX:<span class="hljs-attr">MaxRAMPercentage</span>=<span class="hljs-number">75.0</span>
</code></pre>
<h5 data-id="heading-36">å †ï¼ˆHeapï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ€å¤§å †ã€æœ€å°å †ç©ºé—´ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºåŒä¸€ä¸ªå€¼ï¼Œæˆ‘æ˜¯å› ä¸ºå‹æµ‹éƒ½ä¸ä¼šè¶…è¿‡ 1200m</span>
<span class="hljs-comment"># ä½¿ç”¨ G1 æˆ– ZGC ç»å¯¹ä¸èƒ½è®¾ç½® -Xmn (æ–°ç”Ÿä»£å¤§å°)</span>
-Xms1320m -Xmx1720m 
</code></pre>
<h5 data-id="heading-37">æ ˆç©ºé—´ï¼ˆStackï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># çº¿ç¨‹æ ˆç©ºé—´é™åˆ¶ï¼Œå¿…é¡»æŒ‡å®š</span>
<span class="hljs-comment"># é»˜è®¤å€¼æ˜¯ 1MBï¼Œç”¨ä¸åˆ°çº¯æµªè´¹ï¼Œ300 ä¸ªçº¿ç¨‹å°±æ˜¯ 300MB</span>
<span class="hljs-comment"># ä¸€èˆ¬æ²¡æœ‰å¾ˆæ·±çš„è°ƒç”¨æ ˆè®¾ç½® 256k å³å¯ï¼ˆå¾®æœåŠ¡æ¨èï¼‰ï¼Œ300 ä¸ªçº¿ç¨‹å¯èŠ‚çœ 225MB</span>
-XX:<span class="hljs-attr">ThreadStackSize</span>=<span class="hljs-number">256</span>k
</code></pre>
<h5 data-id="heading-38">å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æŒ‰å®é™…æƒ…å†µè°ƒæ•´ï¼Œæ¯”å¦‚å‹æµ‹å³°å€¼ 164m</span>
<span class="hljs-comment"># å¦‚æœå†…å­˜å……è¶³ï¼Œä¸å¸Œæœ›å‘ç”Ÿ Full GC, å¯ä»¥ åˆå§‹å€¼=æœ€å¤§å€¼</span>
-XX:<span class="hljs-attr">MetaspaceSize</span>=<span class="hljs-number">128</span>m Â  Â  Â  Â  Â <span class="hljs-comment"># åˆå§‹é˜ˆå€¼ (æ¥è¿‘å³°å€¼çš„ 80%)</span>
-XX:<span class="hljs-attr">MaxMetaspaceSize</span>=<span class="hljs-number">192</span>m Â  Â  Â  <span class="hljs-comment"># ç¡¬é™åˆ¶ (164MB * 1.17 = 192MB)</span>
-XX:<span class="hljs-attr">MinMetaspaceFreeRatio</span>=<span class="hljs-number">30</span> Â  Â <span class="hljs-comment"># é™ä½ç©ºé—²æ¯”ä¾‹ (åŠ é€Ÿå›æ”¶)</span>
-XX:<span class="hljs-attr">MaxMetaspaceFreeRatio</span>=<span class="hljs-number">60</span> Â  Â <span class="hljs-comment"># é™åˆ¶æœ€å¤§ç©ºé—² (é˜²ç¢ç‰‡)</span>
</code></pre>
<h5 data-id="heading-39">ç›´æ¥å†…å­˜ï¼ˆDirectï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¿…é¡»é™åˆ¶ï¼Œ1C3Gå®¹å™¨ç»å¯¹ä¸Šé™ï¼š128m</span>
<span class="hljs-comment"># æ‰£é™¤ 75% çš„JVM, å†æ‰£é™¤æ“ä½œç³»ç»Ÿè¿è¡Œæ¶ˆè€— 100+M, ç³»ç»Ÿä»…å‰© 600+M çš„å¯ç”¨å†…å­˜ï¼Œè¿˜è¦ç”¨äºæ“ä½œç³»ç»Ÿ native memoryã€ç¼“å­˜ç­‰ï¼Œè¿™é‡Œä¸é™åˆ¶å¾ˆå®¹æ˜“å‘ç”Ÿ OOMKilled</span>
-XX:<span class="hljs-attr">MaxDirectMemorySize</span>=<span class="hljs-number">128</span>m
</code></pre>
<h5 data-id="heading-40">åƒåœ¾å›æ”¶ï¼ˆGCï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨ G1 æˆ– ZGC ç»å¯¹ä¸èƒ½è®¾ç½® -Xmn (æ–°ç”Ÿä»£å¤§å°)</span>
-XX:+UseG1GC
-XX:+UseDynamicNumberOfGCThreads <span class="hljs-comment"># å¯ç”¨åŠ¨æ€è°ƒæ•´ (é»˜è®¤å¼€å¯)</span>
-XX:<span class="hljs-attr">ParallelGCThreads</span>=<span class="hljs-number">2</span> Â  Â  Â  Â  Â <span class="hljs-comment"># STW çº¿ç¨‹ = 2 (1C å®¹å™¨æœ€å¤§å€¼)</span>
-XX:<span class="hljs-attr">ConcGCThreads</span>=<span class="hljs-number">1</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># å¹¶å‘çº¿ç¨‹ = cpuæ ¸å¿ƒæ•°</span>
-XX:<span class="hljs-attr">G1NewSizePercent</span>=<span class="hljs-number">25</span> Â  Â  Â  Â  Â <span class="hljs-comment"># æ–°ç”Ÿä»£æœ€å°å€¼ï¼š25% å †</span>
-XX:<span class="hljs-attr">G1MaxNewSizePercent</span>=<span class="hljs-number">35</span> Â  Â  Â  <span class="hljs-comment"># æ–°ç”Ÿä»£æœ€å¤§å€¼ï¼š35% å †</span>
-XX:<span class="hljs-attr">MaxGCPauseMillis</span>=<span class="hljs-number">80</span> Â  Â  Â  Â  Â <span class="hljs-comment"># GC æš‚åœï¼Œä¸¥æ ¼ 80ms ç›®æ ‡</span>

<span class="hljs-comment"># æ‰‹åŠ¨è®¾ç½®æ¯ä¸ª region çš„å¤§å°ï¼Œå¹³è¡¡ç¢ç‰‡ä¸å›æ”¶æ•ˆç‡</span>
<span class="hljs-comment"># è¿‡å¤§ï¼šç¢ç‰‡ç‡å¢åŠ </span>
<span class="hljs-comment"># è¿‡å°ï¼šregion æ•°é‡å¢åŠ ï¼ŒGC å…ƒæ•°æ®è†¨èƒ€ï¼ŒCPU è¶…è½½</span>
<span class="hljs-comment"># 1 æ ¸ CPU æ— æ³•å¤„ç† &gt;1000 ä¸ª Region çš„å¹¶å‘æ ‡è®°ï¼Œ768 ä¸ª Region (2MB) æ˜¯ 1C å®¹å™¨çš„æœ€ä½³é…ç½®</span>
-XX:<span class="hljs-attr">G1HeapRegionSize</span>=<span class="hljs-number">2</span>M

<span class="hljs-comment"># å…è®¸ 10% ç©ºé—² (åŠ é€Ÿå›æ”¶)</span>
-XX:<span class="hljs-attr">G1HeapWastePercent</span>=<span class="hljs-number">10</span>

<span class="hljs-comment"># RSet æ›´æ–°å æ¯”ï¼Œé»˜è®¤å€¼ 10, Young GC æš‚åœä¸­æœ€å¤š 10% ç”¨äº RSet æ›´æ–°</span>
<span class="hljs-comment"># 1C3G å®¹å™¨ Young GC æ—¶é—´åˆ†é…ï¼š</span>
<span class="hljs-comment"># Â  Â  - å¯¹è±¡å¤åˆ¶ï¼š65</span>
<span class="hljs-comment"># Â  Â  - RSet æ›´æ–°ï¼š25</span>
<span class="hljs-comment"># Â  Â  - å…¶ä»–å¼€é”€ï¼š10</span>
<span class="hljs-comment"># è°ƒå°åï¼ŒRset æ›´æ–°ä¸å®Œæ•´ï¼Œå¢åŠ  Mixed GC é¢‘ç‡</span>
-XX:<span class="hljs-attr">G1RSetUpdatingPauseTimePercent</span>=<span class="hljs-number">5</span>
<span class="hljs-comment"># æ§åˆ¶ Mixed GC é˜¶æ®µè®¡åˆ’æ‰§è¡Œçš„ GC æ¬¡æ•°</span>
<span class="hljs-comment"># å•æ¬¡ Mixed GC å›æ”¶çš„Regionæ•°é‡ â‰ˆ éœ€è¦å›æ”¶çš„Regionæ€»æ•° / G1MixedGCCountTarget</span>
<span class="hljs-comment"># è°ƒå¤§ ==&gt; å•æ¬¡ GC åœé¡¿çŸ­ï¼Œæ€»å›æ”¶æ—¶é—´é•¿</span>
<span class="hljs-comment"># è°ƒå° ==&gt; å•æ¬¡ GC åœé¡¿é•¿ï¼Œæ€»å›æ”¶æ—¶é—´çŸ­</span>
-XX:<span class="hljs-attr">G1MixedGCCountTarget</span>=<span class="hljs-number">8</span>

<span class="hljs-comment"># è§¦å‘ Mixed GC çš„è€å¹´ä»£ä½¿ç”¨ç‡ï¼Œé»˜è®¤æ˜¯ 45</span>
-XX:<span class="hljs-attr">InitiatingHeapOccupancyPercent</span>=<span class="hljs-number">35</span>

<span class="hljs-comment"># å¯ä»¥æŒ‡å®š JVM åœ¨å¯åŠ¨æ—¶ä¸º G1 åƒåœ¾å›æ”¶å™¨ä¿ç•™çš„å †å†…å­˜ç™¾åˆ†æ¯”</span>
<span class="hljs-comment"># å¥½å¤„ï¼šå¯ä»¥é¿å…åœ¨åƒåœ¾å›æ”¶æœŸé—´å‡ºç°â€œæš‚åœæ—¶é—´è¿‡é•¿â€çš„é—®é¢˜</span>
-XX:<span class="hljs-attr">G1ReservePercent</span>=<span class="hljs-number">20</span>

<span class="hljs-comment"># gc æ—¥å¿—å¿…é¡»å¼€ï¼Œè·¯å¾„å¿…é¡»æ˜¯å®¹å™¨æŒ‚è½½ç›®å½•ï¼Œè¿˜éœ€åœ¨å®¹å™¨å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ ç›¸å…³çš„æ¸…ç†è„šæœ¬</span>
-Xlog:gc*:<span class="hljs-attr">file</span>=/logs/<span class="hljs-variable">${POD_NAMESPACE}</span>/<span class="hljs-variable">${APP_NAME}</span>/gc-%t.log:hostname,time,uptime,pid:filecount=<span class="hljs-number">5</span>,filesize=<span class="hljs-number">10</span>M
</code></pre>
<h5 data-id="heading-41">OOMç›¸å…³ï¼ˆå†…å­˜æº¢å‡º, Out of memoryï¼‰</h5>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ï¼Œç«‹å³ç»ˆæ­¢ï¼ˆç¡¬å´©æºƒï¼‰ï¼Œé™¤äº†æ— çŠ¶æ€ API æœåŠ¡ï¼Œå…¶ä»–åœºæ™¯æ…ç”¨ï¼Œæ”¯ä»˜æ ¸å¿ƒæœåŠ¡ç¦ç”¨</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+CrashOnOutOfMemoryError</span>
<span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ï¼Œä¼˜é›…é€€å‡ºï¼ˆè½¯å…³é—­ï¼‰</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+ExitOnOutOfMemoryError</span> 


<span class="hljs-comment"># ä»¥ä¸Šå‚æ•°äºŒé€‰ä¸€ï¼Œå»ºè®® -XX:+ExitOnOutOfMemoryError </span>


<span class="hljs-comment"># å‘ç”Ÿ OOM æ—¶ç”Ÿæˆ Java å †è½¬å‚¨</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+HeapDumpOnOutOfMemoryError</span> 

<span class="hljs-comment"># å †è½¬å‚¨æ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œè·¯å¾„å¿…é¡»æ˜¯å®¹å™¨æŒ‚è½½ç›®å½•</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:HeapDumpPath=/logs/</span><span class="hljs-variable">${</span><span class="hljs-variable constant_">POD_NAMESPACE</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">APP_NAME</span>}/heapdump_start_<span class="hljs-variable">$(</span>date +<span class="hljs-string">"%Y-%m-%d_%H%M%S"</span>).hprof 

<span class="hljs-comment"># JVM å‘ç”Ÿè‡´å‘½é”™è¯¯æ—¶ï¼Œæ—¥å¿—æ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œè·¯å¾„å¿…é¡»æ˜¯å®¹å™¨æŒ‚è½½ç›®å½•</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:ErrorFile=/logs/</span><span class="hljs-variable">${</span><span class="hljs-variable constant_">POD_NAMESPACE</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">APP_NAME</span>}/<span class="hljs-variable">${</span><span class="hljs-variable constant_">HOSTNAME</span>}-hs_err_pid.<span class="hljs-variable">$$</span>.log 

<span class="hljs-comment"># å¼€å¯ NMT: æœ¬åœ°å†…å­˜è¿½è¸ª</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:NativeMemoryTracking=summary</span>
<span class="hljs-comment"># å®‰å…¨çš„è¯Šæ–­æ›¿ä»£æ–¹æ¡ˆ (æ— å¤§æ–‡ä»¶)ï¼Œé¿å…å†™æ»¡ç£ç›˜ç©ºé—´ï¼Œå¯¼è‡´èŠ‚ç‚¹æ•…éšœ</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:OnOutOfMemoryError=<span class="hljs-string">"jcmd %p VM.native_memory summary &gt; /logs/${POD_NAMESPACE}/${APP_NAME}/oom_nmt.log"</span></span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:OnOutOfMemoryError2=<span class="hljs-string">"jcmd %p VM.classloader_stats &gt; /logs/${POD_NAMESPACE}/${APP_NAME}/oom_classes.log"</span></span>
</code></pre>
<h5 data-id="heading-42">æœ¬åœ°å†…å­˜ï¼ˆnative memoryï¼‰</h5>
<pre><code class="hljs language-ruby" lang="ruby">-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:InitialCodeCacheSize=</span>64m Â  Â  Â  <span class="hljs-comment"># JIT ç¼“å­˜åˆå§‹å€¼</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:ReservedCodeCacheSize=</span>128m Â  Â  <span class="hljs-comment"># JIT ç¼“å­˜ä¸Šé™</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseCodeCacheFlushing</span> Â  Â  Â  Â  Â <span class="hljs-comment"># å¯ç”¨å›æ”¶</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+SegmentedCodeCache</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment"># ä»£ç ç¼“å­˜åˆ†æ®µï¼Œå¿…é¡»å¼€å¯</span>

<span class="hljs-comment"># å¯ç”¨åˆ†å±‚ç¼–è¯‘ï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œä»¥ä¸‹æƒ…å†µä¿æŒå¯ç”¨ï¼š</span>
<span class="hljs-comment"># Â  - å¾®æœåŠ¡ã€å®¹å™¨åŒ–åº”ç”¨</span>
<span class="hljs-comment"># Â  - å‘½ä»¤è¡Œå·¥å…·ã€çŸ­æœŸä»»åŠ¡</span>
<span class="hljs-comment"># Â  - éœ€è¦å¿«é€Ÿå“åº”çš„äº¤äº’åº”ç”¨</span>
<span class="hljs-comment"># Â  - å¤§å¤šæ•°Webåº”ç”¨</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+TieredCompilation</span>

<span class="hljs-comment"># ç¦ç”¨åˆ†å±‚ç¼–è¯‘ï¼Œå¯åŠ¨æ›´æ…¢ï¼Œæ–¹æ³•éœ€è¦æ›´é•¿æ—¶é—´æ‰èƒ½è¢«ä¼˜åŒ–</span>
<span class="hljs-comment"># é€‚ç”¨äºé•¿æœŸè¿è¡Œçš„æœåŠ¡ç«¯åº”ç”¨ï¼š</span>
<span class="hljs-comment"># Â  - å¯¹å¯åŠ¨æ—¶é—´ä¸æ•æ„Ÿçš„åœºæ™¯</span>
<span class="hljs-comment"># Â  - éœ€è¦æè‡´å³°å€¼æ€§èƒ½çš„è®¡ç®—ä»»åŠ¡</span>
<span class="hljs-comment"># Â  - é‡åˆ°åˆ†å±‚ç¼–è¯‘ç›¸å…³bugæ—¶</span>
<span class="hljs-comment"># Â  - éœ€è¦æè‡´å³°å€¼æ€§èƒ½çš„è®¡ç®—ä»»åŠ¡</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:-TieredCompilation</span>
</code></pre>
<h5 data-id="heading-43">åå°„ä¸ä»£ç†</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½œç”¨ï¼šç¦ç”¨ JNI æœ¬åœ°æ–¹æ³•è†¨èƒ€ï¼ˆåå°„è°ƒç”¨ä¼˜åŒ–ï¼‰ï¼Œfalse è¡¨ç¤ºå¯ç”¨è†¨èƒ€</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæé«˜åå°„æ€§èƒ½ï¼Œå‡å°‘åˆå§‹åå°„è°ƒç”¨å¼€é”€ï¼ˆ20-30%ï¼‰, é™ä½ Metaspace ç¢ç‰‡ç‡</span>
<span class="hljs-comment"># åå¤„ï¼šå¢åŠ æ°¸ä¹…ä»£/å…ƒç©ºé—´ä½¿ç”¨ï¼Œå¯åŠ¨ç¨æ…¢</span>
<span class="hljs-comment"># åœ¨ 1C3G å®¹å™¨ä¸­ï¼Œå¦‚æœåº”ç”¨ä½¿ç”¨åå°„è¾ƒå¤šï¼Œå¯ä»¥å¼€å¯ï¼Œä½†éœ€æ³¨æ„å…ƒç©ºé—´å†…å­˜ã€‚å»ºè®®ç›‘æ§å…ƒç©ºé—´ä½¿ç”¨æƒ…å†µã€‚</span>
<span class="hljs-attr">-Dsun.reflect.noInflation</span>=<span class="hljs-literal">false</span>

<span class="hljs-comment"># ä½œç”¨ï¼šä¸å°†åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ç±»æ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜</span>
<span class="hljs-comment"># å¥½å¤„ï¼šé¿å…åœ¨ç£ç›˜ä¸Šç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œæé«˜æ€§èƒ½ï¼Œå¹¶å‡å°‘ç£ç›˜ I/O</span>
<span class="hljs-comment"># åå¤„ï¼šä¸ä¾¿äºè°ƒè¯•åŠ¨æ€ä»£ç†é—®é¢˜</span>
<span class="hljs-comment"># æ¨èï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå¯ä»¥è®¾ç½®ä¸º falseï¼Œé¿å…ç£ç›˜å ç”¨ã€‚åœ¨ 1C3G å®¹å™¨ä¸­ï¼Œé€šå¸¸ä¸éœ€è¦ä¿å­˜è¿™äº›æ–‡ä»¶ï¼Œæ‰€ä»¥æ¨è</span>
<span class="hljs-attr">-Djdk.proxy.ProxyGenerator.saveGeneratedFiles</span>=<span class="hljs-literal">false</span>
</code></pre>
<h5 data-id="heading-44">çº¿ç¨‹æ± ä¸å¹¶å‘</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½œç”¨ï¼šè®¾ç½® ForkJoinPool å…¬å…±æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæ§åˆ¶å¹¶è¡Œæµå’Œ CompletableFuture ç­‰ä½¿ç”¨çš„å…¬å…±çº¿ç¨‹æ± çš„å¤§å°ï¼Œé¿å…åˆ›å»ºè¿‡å¤šçº¿ç¨‹</span>
<span class="hljs-comment"># åå¤„ï¼šå¦‚æœå¹¶è¡Œä»»åŠ¡è¾ƒå¤šï¼Œå¯èƒ½ä¼šé™åˆ¶å¹¶è¡Œæ€§èƒ½</span>
<span class="hljs-comment"># æ¨èï¼šCPU æ ¸æ•° * 1.5 = 1 * 1.5 â†’ 2</span>
<span class="hljs-attr">-Djava.util.concurrent.ForkJoinPool.common.maximumPoolSize</span>=<span class="hljs-number">2</span>

<span class="hljs-comment"># ä½œç”¨ï¼šé™åˆ¶ NIO CompletionHandler æœ€å¤§æ•°é‡</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæé«˜ NIO é€šé“çš„å¹¶å‘å¤„ç†èƒ½åŠ›</span>
<span class="hljs-comment"># åå¤„ï¼šè®¾ç½®è¿‡å¤§ä¼šå ç”¨æ›´å¤šå†…å­˜</span>
<span class="hljs-comment"># æ¨èï¼šæ¯ä¸ª handler ä¿ç•™ 64KB native å†…å­˜ â†’ 128 * 64KB = 8.2MB</span>
<span class="hljs-attr">-Dsun.nio.ch.maxCompletionHandlers</span>=<span class="hljs-number">64</span>
</code></pre>
<h5 data-id="heading-45">Netty ä¼˜åŒ–</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½œç”¨ï¼šè®¾ç½® Netty EventLoop çº¿ç¨‹æ•°</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæ§åˆ¶ Netty çš„çº¿ç¨‹æ•°ï¼Œé¿å…çº¿ç¨‹äº‰æŠ¢</span>
<span class="hljs-comment"># åå¤„ï¼šçº¿ç¨‹æ•°å°‘å¯èƒ½åœ¨é«˜å¹¶å‘æ—¶æˆä¸ºç“¶é¢ˆ</span>
<span class="hljs-comment"># æ¨èï¼šåœ¨ 1 æ ¸å®¹å™¨ä¸­ï¼Œ2 ä¸ªçº¿ç¨‹æ˜¯åˆç†çš„ï¼Œå› ä¸º Netty é€šå¸¸æ¯ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªé€šé“</span>
<span class="hljs-attr">-Dio.netty.eventLoopThreads</span>=<span class="hljs-number">2</span>

<span class="hljs-comment"># ä½œç”¨ï¼šè®¾ç½® Netty ä½¿ç”¨çš„æœ€å¤§ç›´æ¥å†…å­˜ã€‚0 è¡¨ç¤ºä½¿ç”¨ JVM çš„ MaxDirectMemorySizeï¼ˆé»˜è®¤ä¸-Xmxç›¸åŒï¼‰ï¼Œä¸ -XX:MaxDirectMemorySize å†²çª â†’ è¦†ç›– JVM é™åˆ¶ï¼Œå¿…é¡»é™åˆ¶</span>
<span class="hljs-comment"># å¥½å¤„ï¼šé¿å… Netty ä½¿ç”¨è¿‡å¤šçš„ç›´æ¥å†…å­˜</span>
<span class="hljs-comment"># åå¤„ï¼šå¦‚æœåº”ç”¨éœ€è¦å¤§é‡ç›´æ¥å†…å­˜ï¼Œå¯èƒ½ä¼šé™åˆ¶æ€§èƒ½</span>
<span class="hljs-comment"># æ¨èï¼šMaxDirectMemorySize * 75%</span>
<span class="hljs-attr">-Dio.netty.maxDirectMemory</span>=<span class="hljs-number">96</span>

<span class="hljs-comment"># ä½œç”¨ï¼šä½¿ç”¨æ± åŒ–çš„ ByteBuf åˆ†é…å™¨</span>
<span class="hljs-comment"># å¥½å¤„ï¼šå‡å°‘ direct memory åˆ†é…å’Œå›æ”¶çš„å¼€é”€ï¼Œæé«˜æ€§èƒ½</span>
<span class="hljs-comment"># åå¤„ï¼šå¯èƒ½ä¼šå ç”¨æ›´å¤šå†…å­˜ï¼Œå†…å­˜æ± éœ€è¦ 2 å€å†…å­˜ç©ºé—´ â†’ 128MB éœ€ 256MB</span>
<span class="hljs-comment"># æ¨èï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èä½¿ç”¨ pooled</span>
<span class="hljs-attr">-Dio.netty.allocator.type</span>=pooled
<span class="hljs-comment"># å¦‚æœå†…å­˜ç´§å¼ å°±ç”¨ unpooled</span>
<span class="hljs-attr">-Dio.netty.allocator.type</span>=unpooled
<span class="hljs-attr">-Dio.netty.allocator.maxOrder</span>=<span class="hljs-number">9</span> Â  Â  Â <span class="hljs-comment"># é™ä½æ± å¤§å°</span>

<span class="hljs-comment"># ä½œç”¨ï¼šç¦ç”¨ Netty çš„å†…å­˜æ³„æ¼æ£€æµ‹</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæå‡æ€§èƒ½ï¼Œé™ä½ 5% CPU å¼€é”€</span>
<span class="hljs-comment"># åå¤„ï¼šå¦‚æœå­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå°†æ— æ³•æ£€æµ‹åˆ°</span>
<span class="hljs-comment"># æ¨èï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå¯ä»¥ç¦ç”¨ï¼Œä½†å¦‚æœåœ¨å¼€å‘æµ‹è¯•é˜¶æ®µå·²ç»é€šè¿‡æ£€æµ‹ï¼Œåˆ™å¯ä»¥ç¦ç”¨</span>
<span class="hljs-attr">-Dio.netty.leakDetectionLevel</span>=DISABLED
<span class="hljs-comment"># å¹³è¡¡å¼€é”€ä¸å®‰å…¨ï¼šæ¯ 1000 æ¬¡åˆ†é…æ£€æŸ¥ 1 æ¬¡ï¼Œé¿å…æ³„æ¼æ— æ„ŸçŸ¥</span>
<span class="hljs-attr">-Dio.netty.leakDetectionLevel</span>=SIMPLE
</code></pre>
<h5 data-id="heading-46">Log4j2</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½œç”¨ï¼šä½¿ç”¨å¼‚æ­¥æ—¥å¿—è®°å½•å™¨ï¼Œå°†æ—¥å¿—äº‹ä»¶æ”¾å…¥ç¯å½¢ç¼“å†²åŒºï¼Œç”±åå°çº¿ç¨‹å†™å…¥</span>
<span class="hljs-comment"># å¥½å¤„ï¼šå‡å°‘æ—¥å¿—è®°å½•å¯¹åº”ç”¨æ€§èƒ½çš„å½±å“ï¼Œç‰¹åˆ«æ˜¯åŒæ­¥æ—¥å¿—é€ æˆçš„å»¶è¿Ÿ</span>
<span class="hljs-comment"># åå¤„ï¼šåœ¨å´©æºƒæ—¶å¯èƒ½ä¼šä¸¢å¤±éƒ¨åˆ†æ—¥å¿—ï¼Œå¹¶ä¸”éœ€è¦é¢å¤–çš„å†…å­˜ç”¨äºç¼“å†²åŒº</span>
<span class="hljs-comment"># æ¨èï¼šåœ¨ 1C3G å®¹å™¨ä¸­ï¼Œå¦‚æœæ—¥å¿—é‡è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨å¼‚æ­¥æ—¥å¿—ï¼Œä½†éœ€æ³¨æ„ç¯å½¢ç¼“å†²åŒºå¤§å°å’Œå†…å­˜ä½¿ç”¨</span>
<span class="hljs-attr">-Dlog4j2.contextSelector</span>=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector

<span class="hljs-comment"># ä½œç”¨ï¼šAsyncLogger ç­‰å¾…ç­–ç•¥</span>
<span class="hljs-comment"># å¥½å¤„ï¼šæ¯” timeout æ›´ä½çš„å”¤é†’å»¶è¿Ÿ</span>
<span class="hljs-comment"># åå¤„ï¼šå¯èƒ½æ¯” block æ›´é«˜çš„ CPU ä½¿ç”¨</span>
<span class="hljs-comment"># æ¨èï¼šyield å¹³è¡¡æ€§èƒ½å’Œå»¶è¿Ÿ</span>
<span class="hljs-attr">-Dlog4j2.asyncLogger.waitStrategy</span>=yield

<span class="hljs-comment"># ä½œç”¨ï¼šRingBuffer å¤§å°ï¼ˆæ¡ç›®æ•°ï¼‰</span>
<span class="hljs-comment"># æ¨èï¼š64 K è¶³å¤Ÿ 1000 TPS</span>
<span class="hljs-attr">-Dlog4j2.asyncLoggerRingBufferSize</span>=<span class="hljs-number">65536</span> Â  Â <span class="hljs-comment"># 65536 * 32 å­—èŠ‚ = 2MB</span>

<span class="hljs-comment"># ç¦ç”¨ JMX ç›‘æ§ï¼Œå®¹å™¨ç¯å¢ƒå¿…é¡»ç¦ç”¨ï¼Œå‡å°‘ 50MB å†…å­˜å¼€é”€ï¼ŒåŠ å¿«å¯åŠ¨ 15%</span>
<span class="hljs-attr">-Dlog4j2.disable.jmx</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment"># é¿å…ç±»åŠ è½½æ³„æ¼ï¼Œä¼ ç»Ÿçš„å¤–éƒ¨ web å®¹å™¨éœ€è¦è®¾ç½®ä¸º true</span>
<span class="hljs-attr">-Dlog4j2.isWebapp</span>=<span class="hljs-literal">false</span>

<span class="hljs-comment"># ä½œç”¨ï¼šå¯ç”¨ ThreadLocal ä¼˜åŒ–</span>
<span class="hljs-comment"># åå¤„ï¼šå¢åŠ  TLS ç¢ç‰‡ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼</span>
<span class="hljs-comment"># æ¨èï¼šå¿…é¡»å¯ç”¨ä»¥ä¿è¯æ—¥å¿—å®Œæ•´æ€§</span>
<span class="hljs-attr">-Dlog4j2.enableThreadlocals</span>=<span class="hljs-literal">true</span>

<span class="hljs-comment"># ä½œç”¨ï¼šè®¾ç½®è§£åŒ…ï¼ˆunboxï¼‰ç¯å½¢ç¼“å†²åŒºçš„å¤§å°ï¼Œç”¨äºå°†åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶å‡å°‘å¯¹è±¡åˆ†é…ã€‚</span>
<span class="hljs-comment"># å¥½å¤„ï¼šå‡å°‘åŸºæœ¬ç±»å‹æ—¥å¿—è®°å½•æ—¶çš„è£…ç®±æ“ä½œï¼Œå‡å°‘GCå‹åŠ›ã€‚</span>
<span class="hljs-comment"># åå¤„ï¼šç¼“å†²åŒºå¤§å°å›ºå®šï¼Œå¦‚æœå¹¶å‘æ—¥å¿—è®°å½•å¾ˆå¤šï¼Œå¯èƒ½æ— æ³•è¦†ç›–æ‰€æœ‰çº¿ç¨‹ã€‚</span>
<span class="hljs-comment"># æ¨èï¼šå¯ç”¨æ— è£…ç®±ï¼ˆ1C å®¹å™¨å¿…é¡»ï¼‰</span>
<span class="hljs-attr">-Dlog4j2.unboxRingBufferSize</span>=<span class="hljs-number">256</span>
</code></pre>
<h4 data-id="heading-47">äºŒã€é”™è¯¯åæ€</h4>
<h5 data-id="heading-48">1. æ²¡æœ‰ä¸¥æ ¼å®¡æ ¸è„šæœ¬</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a68321787584e0abef2e7ffcae962f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTRwaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764171171&amp;x-signature=mmT5IOOQHN5W6lSg0wgkG62rwnE%3D" alt="æµ‹è¯•è„šæœ¬å…è´£å£°æ˜.jpg" loading="lazy"/></p>
<p>å†…å«ä¸¤ä¸ªè‡´å‘½é”™è¯¯ï¼š</p>
<ul>
<li>CrashOnOutOfMemoryError</li>
<li>Xmn</li>
</ul>
<h5 data-id="heading-49">2. æŠŠé—®é¢˜æè¿°æ¸…æ¥šï¼Œé—®é¢˜å°±å·²ç»è§£å†³ä¸€åŠäº†</h5>
<p>AI è®©è¿™å¥è¯çš„å«é‡‘é‡æ›´ä¸Šä¸€å±‚æ¥¼äº†ã€‚</p>
<p>ä¸€å¼€å§‹åªæ˜¯ä¸€å‘³åœ°é—®ï¼Œåœ¨å¾ˆå°çš„ç»†èŠ‚ä¸Šæé—®ï¼Œæ²¡æœ‰æŠŠå®Œæ•´çš„é—®é¢˜ã€ç°è±¡æè¿°æ¸…æ¥šï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚</p>
<h3 data-id="heading-50">é™„ï¼šå¼€å¯ jmc, jvisualvm ç›‘æ§çš„æ–¹æ³•</h3>
<p>ï¼ˆç”Ÿäº§ç¦æ­¢ï¼‰</p>
<p>å®¹å™¨å¯åŠ¨è„šæœ¬ <code>run.sh</code> æ·»åŠ ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"># hostIp=$(ifconfig | grep -E <span class="hljs-string">"inet .* netmask .* broadcast "</span> | awk <span class="hljs-string">'{print <span class="hljs-subst">$2</span>}'</span>)
hostIp=$(ip a | grep <span class="hljs-string">"eth0"</span> -A <span class="hljs-number">3</span> | grep <span class="hljs-string">"inet "</span> | awk <span class="hljs-string">'{print <span class="hljs-subst">$2</span>}'</span> | awk -F<span class="hljs-string">"/"</span> <span class="hljs-string">'{print <span class="hljs-subst">$1</span>}'</span>)
JAVA_JMX_REMOTE=<span class="hljs-string">"-Djava.rmi.server.hostname=<span class="hljs-subst">${hostIp}</span> -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=7091 -Dcom.sun.management.jmxremote.rmi.port=7091 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -XX:StartFlightRecording -XX:FlightRecorderOptions=memorysize=20M,maxchunksize=10M,stackdepth=128,repository=/<span class="hljs-subst">${LOG_PATH}</span>/jfr-temp -XX:StartFlightRecording=disk=true,maxsize=1g,dumponexit=true,name=ProdRecording,filename=/<span class="hljs-subst">${LOG_PATH}</span>/proc-xxx.jfr,settings=profile"</span>
â€‹
JAVA_JVM=<span class="hljs-string">"<span class="hljs-subst">${JAVA_JVM}</span> <span class="hljs-subst">${JAVA_JMX_REMOTE}</span>"</span>
</code></pre>
<h3 data-id="heading-51">é™„ï¼šjemalloc å†…å­˜åˆ†é…å™¨</h3>
<h5 data-id="heading-52">èƒŒæ™¯</h5>
<p>åœ¨ Kubernetesï¼ˆK8sï¼‰å®¹å™¨ç¼–æ’ç¯å¢ƒä¸­ï¼Œå†…å­˜èµ„æºç®¡ç†ä¸€ç›´æ˜¯è¿ç»´äººå‘˜é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚</p>
<p>é»˜è®¤å†…å­˜åˆ†é…å™¨å¾€å¾€å¯¼è‡´å®¹å™¨<strong>å†…å­˜åˆ©ç”¨ç‡ä½ä¸‹ã€Pod é©±é€é¢‘ç¹</strong>ç­‰é—®é¢˜ï¼Œå°¤å…¶åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œè¿™äº›é—®é¢˜ä¼šè¢«æ”¾å¤§ä¸ºé›†ç¾¤çº§åˆ«çš„æ€§èƒ½æŸè€—ã€‚</p>
<p>å®¹å™¨åŒ–åº”ç”¨æ™®éé¢ä¸´ä¸‰å¤§å†…å­˜ç®¡ç†éš¾é¢˜ï¼š<strong>å†…å­˜ç¢ç‰‡åŒ–å¯¼è‡´å®é™…ä½¿ç”¨å†…å­˜è¿œé«˜äºåº”ç”¨ç”³è¯·é‡ã€GC å»¶è¿Ÿå¼•å‘æœåŠ¡å“åº”æ³¢åŠ¨ã€èµ„æºäº‰ç”¨é€ æˆ Pod é¢‘ç¹è§¦å‘ OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰</strong> ã€‚</p>
<p>ä¼ ç»Ÿ <code>libc malloc</code> åˆ†é…å™¨åœ¨å¤šçº¿ç¨‹å®¹å™¨ç¯å¢ƒä¸­è¡¨ç°å°¤ä¸ºä¸ä½³ï¼Œè€Œ <code>jemalloc</code> é€šè¿‡ä»¥ä¸‹æ ¸å¿ƒæœºåˆ¶æä¾›è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>çº¿ç¨‹ç¼“å­˜ï¼ˆTCacheï¼‰</strong> ï¼šæ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ç‹¬ç«‹å†…å­˜ç¼“å­˜ï¼Œå‡å°‘é”ç«äº‰ï¼Œå¯¹åº”æºç å®ç°å¯è§src/tcache.c</li>
<li><strong>åˆ†ç®±åˆ†é…ï¼ˆBin-based Allocationï¼‰</strong> ï¼šå°†å†…å­˜è¯·æ±‚åˆ†ç±»åˆ°é¢„è®¾å¤§å°çš„"ç®±å­"ï¼Œé™ä½ç¢ç‰‡ç‡ï¼Œå…³é”®é€»è¾‘åœ¨src/bin.c</li>
<li><strong>èƒŒæ™¯çº¿ç¨‹ï¼ˆBackground Threadï¼‰</strong> ï¼šå¼‚æ­¥å›æ”¶æœªä½¿ç”¨å†…å­˜ï¼Œé¿å…åº”ç”¨çº¿ç¨‹é˜»å¡</li>
</ul>
<p>jemalloc æ˜¯ä¸€ä¸ªç°ä»£çš„å†…å­˜åˆ†é…å™¨ï¼Œç”± Jason Evans å¼€å‘ï¼Œæ—¨åœ¨æä¾›<strong>é«˜æ€§èƒ½å’Œä½ç¢ç‰‡åŒ–</strong>çš„å†…å­˜ç®¡ç†ã€‚ å®ƒæœ€åˆæ˜¯ç”± Jason Evans äº 2005 å¹´å¼€å‘çš„ï¼Œä¾§é‡äºå‡å°‘å†…å­˜ç¢ç‰‡å’Œæå‡å¤šçº¿ç¨‹é«˜å¹¶å‘åœºæ™¯ä¸‹å†…å­˜çš„åˆ†é…æ•ˆç‡ã€‚</p>
<h5 data-id="heading-53">ä¸»è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿</h5>
<p>jemalloc æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå¤šçº¿ç¨‹æƒ…å†µä¸‹çš„é«˜æ€§èƒ½ä»¥åŠå†…å­˜ç¢ç‰‡çš„å‡å°‘ã€‚ ä¸å…¶å®ƒå†…å­˜åˆ†é…å™¨ï¼ˆå¦‚ glibc çš„ mallocï¼‰ç›¸æ¯”ï¼Œå®ƒåœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹å†…å­˜åˆ†é…æ€§èƒ½æ›´é«˜ï¼Œèƒ½æœ‰æ•ˆå‡å°‘å†…å­˜ç¢ç‰‡ã€‚ è¿™ä½¿å¾— jemalloc ç‰¹åˆ«é€‚åˆå……åˆ†å‘æŒ¥ç°ä»£å¤šæ ¸å¤„ç†å™¨çš„å¹¶å‘ä¼˜åŠ¿ã€‚</p>
<h5 data-id="heading-54">å·¥ä½œåŸç†</h5>
<p>jemalloc é‡‡ç”¨äº†å¤šç§ç­–ç•¥æ¥ä¼˜åŒ–å†…å­˜åˆ†é…å’Œå›æ”¶ã€‚ åœ¨å†…å­˜ç®¡ç†æ–¹é¢ï¼Œjemalloc é‡‡ç”¨"æ•´å—æ‰¹å‘ï¼Œé›¶æ•£é›¶å”®"çš„ç­–ç•¥ï¼šæ•´å—æ‰¹å‘çš„å†…å­˜å«åš chunkï¼ˆé€šå¸¸å¤§å°ä¸º4MBï¼‰ï¼Œå¯¹äºå°ä»¶å’Œå¤§ä»¶è®¢å•ï¼Œåˆ™è¿›ä¸€æ­¥æ‹†æˆ run è¿›è¡Œåˆ†é…ã€‚</p>
<p>jemalloc è‡ªèº«å ç”¨çš„å†…å­˜åŒ…æ‹¬ Cache å’Œ Metadata ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ Cache åˆåŒ…æ‹¬ Thread Cache å’Œ Dirty Page ä¸¤éƒ¨åˆ†ï¼Œè¿™ç§è®¾è®¡æœ‰åŠ©äºæé«˜å†…å­˜åˆ†é…æ•ˆç‡ã€‚</p>
<h5 data-id="heading-55">åº”ç”¨åœºæ™¯</h5>
<p>ç”±äºå…¶å‡ºè‰²çš„æ€§èƒ½ç‰¹æ€§ï¼Œjemalloc è¢«å¹¿æ³›åº”ç”¨äºå„ç§é«˜æ€§èƒ½ç³»ç»Ÿä¸­ã€‚ä¾‹å¦‚ï¼ŒApache Dorisé»˜è®¤ä½¿ç”¨ jemalloc ä½œä¸ºé€šç”¨å†…å­˜åˆ†é…å™¨ã€‚ å®ƒé€šè¿‡ç‹¬ç‰¹çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œè‡´åŠ›äºå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæå‡å†…å­˜åˆ†é…æ•ˆç‡ï¼Œä½¿å…¶æˆä¸ºç°ä»£é«˜æ€§èƒ½åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œjemalloc æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å†…å­˜åˆ†é…å™¨ï¼Œé€šè¿‡å‡å°‘å†…å­˜ç¢ç‰‡å’Œä¼˜åŒ–å¤šçº¿ç¨‹æ€§èƒ½ï¼Œä¸ºç°ä»£åº”ç”¨ç¨‹åºæä¾›äº†æ›´ä¼˜ç§€çš„å†…å­˜ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-56">ä¸ºä»€ä¹ˆ <code>LD_PRELOAD</code> èƒ½å…¨å±€ç”Ÿæ•ˆï¼Ÿ</h5>
<p><strong>åŠ¨æ€é“¾æ¥å™¨åŠ«æŒåŸç†</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  JVM-&gt;&gt;+Linuxå†…æ ¸: æ‰§è¡Œ java è¿›ç¨‹
  Linuxå†…æ ¸-&gt;&gt;+ld.so: åŠ è½½åŠ¨æ€é“¾æ¥å™¨
  ld.so-&gt;&gt;+LD_PRELOAD: æ£€æŸ¥ç¯å¢ƒå˜é‡
  LD_PRELOAD-&gt;&gt;+libjemalloc.so: ä¼˜å…ˆåŠ è½½
  libjemalloc.so-&gt;&gt;+glibc: æ›¿æ¢ malloc/free ç­‰ç¬¦å·
  glibc--&gt;&gt;-JVM: æ‰€æœ‰åˆ†é…èµ° jemalloc
  JVM-&gt;&gt;+Netty: JNI è°ƒç”¨
  Netty-&gt;&gt;+OpenSSL: åŠ¨æ€åº“è°ƒç”¨
  OpenSSL-&gt;&gt;+glibc: åŸæœ¬è°ƒç”¨ malloc
  glibc--&gt;&gt;-OpenSSL: å®é™…èµ° jemalloc
</code></pre>
<ul>
<li>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>LD_PRELOAD</code> åœ¨ <strong>è¿›ç¨‹å¯åŠ¨æœ€æ—©æœŸ</strong> æ³¨å…¥</li>
<li>è¦†ç›–æ‰€æœ‰åç»­çš„ <code>malloc/free/mmap</code> è°ƒç”¨</li>
<li><strong>100% è¦†ç›–</strong> JVM + æ‰€æœ‰ native åº“ï¼ˆNetty/SSL/å‹ç¼©åº“ç­‰ï¼‰</li>
</ul>
</li>
</ul>
<h5 data-id="heading-57">åº”ç”¨æ¡ˆä¾‹</h5>
<p>ğŸŒŸåœ¨èš‚èšé›†å›¢/é˜¿é‡Œäº‘å†…éƒ¨</p>
<p><strong>99.7% çš„ native å†…å­˜æ³„æ¼åœºæ™¯é€šè¿‡ jemalloc + åˆç†å‚æ•°é…ç½®è§£å†³</strong>ï¼Œæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç ã€‚ æŸæ”¯ä»˜ç³»ç»Ÿæ¡ˆä¾‹ï¼š<code>4.2G RSS â†’ 1.8Gï¼ˆä¸‹é™ 57%ï¼‰ï¼ŒGC åœé¡¿å‡å°‘ 40%</code>ã€‚</p>
<p>ğŸ”‘ åœ¨ 2024 å¹´é˜¿é‡Œäº‘å®¹å™¨æœåŠ¡ä¸­</p>
<p><strong>92% çš„ 1C3G å®¹å™¨ OOM é—®é¢˜</strong> é€šè¿‡ <code>MALLOC_ARENA_MAX=2 + jemalloc</code> è§£å†³ã€‚ <strong>æ°¸è¿œä¸è¦ç›¸ä¿¡ glibc åœ¨å®¹å™¨ä¸­çš„é»˜è®¤è¡Œä¸º</strong> â€”â€” å®ƒä¸ºç‰©ç†æœºè®¾è®¡ï¼Œè€Œéå®¹å™¨ã€‚</p>
<p>ğŸ’¡ <strong>é˜¿é‡Œäº‘ ARMS å®æµ‹æ•°æ®</strong>ï¼š åœ¨ 1C3G å®¹å™¨ä¸­æ›¿ä»£ jemalloc profï¼š</p>
<ul>
<li>å†…å­˜å¼€é”€ï¼š<strong>45 MB</strong> (vs jemalloc prof 280 MB)</li>
<li>CPU å¼€é”€ï¼š<strong>0.8%</strong> (vs 18.3%)</li>
<li>è¯Šæ–­èƒ½åŠ›ï¼šJava å †æ ˆ + native è°ƒç”¨é“¾</li>
</ul>
<p>ğŸ”‘ åœ¨ 2024 å¹´èš‚èšé›†å›¢ç”Ÿäº§ç¯å¢ƒå®¡è®¡ä¸­</p>
<p><strong>83% çš„ "4G+ RSS ä½† JVM åªæŠ¥ 2G" é—®é¢˜</strong> ç”± glibc arena ç¼“å­˜å¼•èµ·ï¼Œé€šè¿‡ <code>MALLOC_ARENA_MAX=4 + jemalloc</code> 100% è§£å†³ã€‚</p>
<p>ğŸ”‘ <strong>æ ¸å¿ƒæ´å¯Ÿ</strong>ï¼š <strong>glibc ä¸º 2000 å¹´ä»£çš„ç‰©ç†æœºè®¾è®¡ï¼Œjemalloc ä¸ºäº‘åŸç”Ÿæ—¶ä»£è€Œç”Ÿ</strong>ã€‚ åœ¨ 1C3G è¿™æ ·çš„å—é™å®¹å™¨ä¸­ï¼Œ<strong>jemalloc ä¸æ˜¯ä¼˜åŒ–ï¼Œè€Œæ˜¯ç”Ÿå­˜å¿…éœ€</strong>ã€‚ æŸé‡‘èå®¢æˆ·å°† 10,000+ å®¹å™¨ä» glibc è¿ç§»åˆ° jemalloc åï¼š</p>
<ul>
<li>æœˆåº¦ OOM äº‹ä»¶ä» 2,300 æ¬¡ â†’ <strong>0 æ¬¡</strong></li>
<li>èŠ‚çœäº‘èµ„æºæˆæœ¬ <strong>$47,000/æœˆ</strong></li>
</ul>
<p>ğŸ”‘ <strong>ç»ˆææ´å¯Ÿ</strong>ï¼š <strong>ä¸ä½¿ç”¨ jemalloc æ—¶ï¼Œå†…å­˜æº¢å‡ºä¸å¦ = åº”ç”¨è¡Œä¸º Ã— JVM é…ç½® Ã— å®¹å™¨ç¯å¢ƒ çš„ä¹˜ç§¯</strong>ã€‚ æŸé‡‘èå®¢æˆ· 500 ä¸ªå®¹å™¨å®è¯ï¼š</p>
<ul>
<li>é€šè¿‡<strong>ç²¾å‡†é…ç½®</strong>ï¼Œ320 ä¸ªå®¹å™¨æ— éœ€ jemalloc ç¨³å®šè¿è¡Œ</li>
<li>å‰©ä½™ 180 ä¸ªï¼ˆNetty/åŠ¨æ€ä»£ç†å¯†é›†å‹ï¼‰<strong>å¿…é¡»ç”¨ jemalloc</strong></li>
</ul>
<h3 data-id="heading-58">é™„ï¼šptmalloc å†…å­˜åˆ†é…å™¨</h3>
<p>ï¼ˆglibc æ ‡é…ï¼‰</p>
<h5 data-id="heading-59">è®¾è®¡å“²å­¦ï¼ˆä¸ºä½•ä¸é‡Šæ”¾ç¼“å­˜ï¼Ÿï¼‰</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  A[å†…å­˜åˆ†é…è¯·æ±‚] --&gt; B{æ˜¯å¦åœ¨ arena æœ‰ç©ºé—²?}
  B --&gt;|æ˜¯| C[ç›´æ¥è¿”å›]
  B --&gt;|å¦| D[å‘ OS ç”³è¯·æ–°å†…å­˜]
  D --&gt; E[ç¼“å­˜åˆ° arena]
  E --&gt; F[ä¸‹æ¬¡åˆ†é…å¤ç”¨]
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>å‡å°‘ç³»ç»Ÿè°ƒç”¨</strong>ï¼š<code>sbrk</code>/<code>mmap</code> æ˜¯æ˜‚è´µæ“ä½œï¼ˆ1000+ CPU å‘¨æœŸï¼‰</li>
<li><strong>å±€éƒ¨æ€§ä¼˜åŒ–</strong>ï¼šä¿ç•™å†…å­˜æé«˜ cache å‘½ä¸­ç‡</li>
<li><strong>ç¢ç‰‡æ§åˆ¶</strong>ï¼šé¿å…é¢‘ç¹å½’è¿˜å¯¼è‡´çš„å¤–éƒ¨ç¢ç‰‡</li>
</ul>
<h5 data-id="heading-60">ç‰©ç†æœºç¯å¢ƒçš„åˆç†æ€§</h5>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ç‰©ç†æœº</th><th>å®¹å™¨</th><th>ptmalloc é€‚ç”¨æ€§</th></tr></thead><tbody><tr><td><strong>å†…å­˜æ€»é‡</strong></td><td>32 GB</td><td>3 GB</td><td>âŒ å®Œå…¨ä¸åŒ¹é…</td></tr><tr><td><strong>è¿›ç¨‹æ•°é‡</strong></td><td>10-20 ä¸ª</td><td>100+ ä¸ª (K8s)</td><td>âŒ ä¸¥é‡é«˜ä¼°</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>æ•°å¤©~æ•°æœˆ</td><td>åˆ†é’Ÿ~å°æ—¶ (Serverless)</td><td>âŒ è®¾è®¡é”™é…</td></tr><tr><td><strong>å†…å­˜å›æ”¶ä»·å€¼</strong></td><td>ä½ (ç©ºé—²å†…å­˜æ— æ”¶ç›Š)</td><td>é«˜ (è¶…é™å³ OOMKilled)</td><td>âŒ ä»·å€¼è§‚å†²çª</td></tr></tbody></table>
<blockquote>
<p><strong>Ulrich Drepper (glibc ä½œè€…) 2008 å¹´è§‚ç‚¹</strong>ï¼š <em>"Returning memory to the OS is almost always a waste of time... The OS will just have to zero it out again when re-allocated."</em> ï¼ˆå°†å†…å­˜å½’è¿˜ OS å‡ ä¹æ€»æ˜¯æµªè´¹æ—¶é—´... OS åœ¨é‡æ–°åˆ†é…æ—¶åˆå¾—æ¸…é›¶ï¼‰</p>
</blockquote>
<h5 data-id="heading-61">OOM çš„çœŸæ­£è§¦å‘æ¡ä»¶</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼ªä»£ç ï¼šå®¹å™¨ OOM è§¦å‘é€»è¾‘</span>
if process.rss &gt; container.limit: Â <span class="hljs-comment"># ç¡¬é™åˆ¶ 3GB</span>
 Â  Â trigger_OOMKiller()
 Â  Â 
<span class="hljs-comment"># ptmalloc çš„è¡Œä¸º</span>
<span class="hljs-attr">ptmalloc.cache</span> = min(physical_ram * <span class="hljs-number">0.25</span>, <span class="hljs-number">16</span>GB) Â <span class="hljs-comment"># ç‰©ç†æœºç­–ç•¥</span>
<span class="hljs-comment"># åœ¨ 32 æ ¸ 128GB æœºå™¨ â†’ cache = 32GB</span>
<span class="hljs-comment"># åœ¨ 1C3G å®¹å™¨ â†’ ä¾ç„¶å°è¯• cache = 32GB â†’ ç«‹å³ OOM</span>
</code></pre>
<h5 data-id="heading-62">ä¸ºä½•æœ‰äº›æœåŠ¡ä¸ OOMï¼Ÿ</h5>






























<table><thead><tr><th>ç±»å‹</th><th>å†…å­˜è¡Œä¸ºç‰¹å¾</th><th>ptmalloc é€‚ç”¨æ€§</th></tr></thead><tbody><tr><td><strong>æ‰¹å¤„ç†ä»»åŠ¡</strong></td><td>çŸ­ç”Ÿå‘½å‘¨æœŸ (ç§’çº§)</td><td>âœ… æœªç§¯ç´¯ç¼“å­˜</td></tr><tr><td><strong>é™æ€ Web æœåŠ¡</strong></td><td>åˆ†é…æ¨¡å¼ç¨³å®š (å›ºå®šå¤§å°)</td><td>âœ… ç¼“å­˜è¢«é‡ç”¨</td></tr><tr><td><strong>æ•°æ®åº“ä»£ç†</strong></td><td>é«˜é¢‘å°å¯¹è±¡ + å¤§å¯¹è±¡æ··åˆ</td><td>âŒ ç¼“å­˜ç¢ç‰‡åŒ–</td></tr><tr><td><strong>AI æ¨ç†æœåŠ¡</strong></td><td>å¤§å—å†…å­˜ (Tensor åˆ†é…)</td><td>âœ… èµ° mmap è·¯å¾„</td></tr></tbody></table>
<blockquote>
<p>ğŸŒŸ <strong>æŸäº‘æœåŠ¡å•† 10,000 å®¹å™¨ç»Ÿè®¡</strong>ï¼š</p>
<ul>
<li><strong>ä¸ OOM æœåŠ¡</strong>ï¼šåˆ†é…é€Ÿç‡ç¨³å®š + å¯¹è±¡å¤§å°å‡åŒ€ (ç¼“å­˜é‡ç”¨ç‡ &gt;80%)</li>
<li><strong>OOM æœåŠ¡</strong>ï¼šåˆ†é…é€Ÿç‡æ³¢åŠ¨ &gt; 10x + æ··åˆå¤§å°åˆ†é… (ç¢ç‰‡ç‡ &gt;35%)</li>
</ul>
</blockquote>
<h5 data-id="heading-63">æ ¸å¿ƒç»“è®º</h5>
<ol start="0">
<li>
<p><strong>ptmalloc ä¸æ˜¯ bugï¼Œè€Œæ˜¯æ—¶ä»£é”™é…</strong></p>
<ul>
<li>ä¸ºç‰©ç†æœºè®¾è®¡çš„ç¼“å­˜ç­–ç•¥ï¼Œåœ¨å®¹å™¨ä¸­æˆä¸ºèµ„æºé™·é˜±</li>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼šglibc 2.34 ä¹‹å‰å®Œå…¨æ— è§† cgroups é™åˆ¶ï¼ˆ<code>ldd --version</code>ï¼‰</li>
</ul>
</li>
<li>
<p><strong>OOM ä¸å¦å–å†³äºä¸‰è¦ç´ </strong></p>
</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
A[åˆ†é…æ¨¡å¼] --&gt; D[æ˜¯å¦ OOM]
B[å®¹å™¨é™åˆ¶] --&gt; D
C[ç”Ÿå‘½å‘¨æœŸ] --&gt; D
</code></pre>
<ul>
<li>ç¨³å®šåˆ†é… + è¶³å¤Ÿå†…å­˜ + é•¿ç”Ÿå‘½å‘¨æœŸ = ä¸ OOM</li>
<li>æ³¢åŠ¨åˆ†é… + ä¸¥æ ¼é™åˆ¶ + çŸ­ç”Ÿå‘½å‘¨æœŸ = å¿…ç„¶ OOM</li>
</ul>
<ol start="3">
<li><strong>è§£å†³æ–¹æ¡ˆä¼˜å…ˆçº§</strong></li>
</ol>
<p><code>jemalloc &gt; glibc è°ƒä¼˜ &gt; JVM æ§åˆ¶ &gt; ä»£ç æ”¹é€ </code></p>
<ul>
<li>1C3G å®¹å™¨ï¼š<strong>jemalloc æ˜¯å”¯ä¸€ 100% æœ‰æ•ˆæ–¹æ¡ˆ</strong></li>
<li>ç‰©ç†æœºï¼šglibc è°ƒä¼˜è¶³å¤Ÿ</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>ç»ˆæå»ºè®®</strong>ï¼š <strong>æ°¸è¿œä¸è¦åœ¨ 1C3G å®¹å™¨ä¸­ä½¿ç”¨é»˜è®¤ ptmalloc</strong>ã€‚ æŸäº‘å‚å•†ç»Ÿè®¡ï¼š<strong>92% çš„å®¹å™¨ OOM é—®é¢˜</strong> é€šè¿‡ jemalloc + ç²¾å‡† JVM å‚æ•°è§£å†³ï¼Œ å‰©ä½™ 8% éœ€è¦ä»£ç å±‚çº¿ç¨‹/å¯¹è±¡æ± ä¼˜åŒ–ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python æ¨¡å—åŒ– Ã— LLM å·¥å…·è°ƒç”¨ï¼šæ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7574230586971537414</link>    <guid>https://juejin.cn/post/7574230586971537414</guid>    <pubDate>2025-11-19T11:02:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230586971537414" data-draft-id="7574281453706969094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python æ¨¡å—åŒ– Ã— LLM å·¥å…·è°ƒç”¨ï¼šæ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-19T11:02:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰å®‡å¤•è½"/> <meta itemprop="url" content="https://juejin.cn/user/3323164053734988"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python æ¨¡å—åŒ– Ã— LLM å·¥å…·è°ƒç”¨ï¼šæ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323164053734988/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰å®‡å¤•è½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T11:02:56.000Z" title="Wed Nov 19 2025 11:02:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒæ­å»ºä¸ä¾èµ–ç®¡ç†</h2>
<h3 data-id="heading-1">1.1 å®‰è£…å¿…è¦åº“</h3>
<pre><code class="hljs language-bash" lang="bash">bash
ç¼–è¾‘
pip install openai requests python-dotenv  <span class="hljs-comment"># æ¨èåŠ å…¥ dotenv ç®¡ç†å¯†é’¥</span>
</code></pre>
<ul>
<li><code>openai</code>ï¼šå®˜æ–¹ SDKï¼Œå…¼å®¹æ‰€æœ‰ OpenAI-like APIï¼ˆDeepSeekã€Moonshotã€Ollama ç­‰ï¼‰</li>
<li><code>requests</code>ï¼šå‘èµ· HTTP è¯·æ±‚ï¼ˆç”¨äºè°ƒç”¨å¤©æ°”/è‚¡ç¥¨ APIï¼‰</li>
<li><code>python-dotenv</code>ï¼šä»Â <code>.env</code>Â æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡ï¼Œé¿å…å¯†é’¥æ³„éœ²</li>
</ul>
<h3 data-id="heading-2">1.2 é…ç½® API å¯†é’¥ï¼ˆå®‰å…¨å®è·µï¼‰</h3>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">env
ç¼–è¾‘
<span class="hljs-attr">DEEPSEEK_API_KEY</span>=sk-<span class="hljs-number">3</span>d61560ac9f74daeaed1b8c53e2b7a5a
<span class="hljs-attr">SENIVERSE_KEY</span>=SeZYXHV7f3RJvQaZH
</code></pre>
<p>Python ä¸­åŠ è½½ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">python
ç¼–è¾‘
<span class="hljs-function">from dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">import</span> os

<span class="hljs-title">load_dotenv</span><span class="hljs-params">()</span>
api_key </span>= os.<span class="hljs-built_in">getenv</span>(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>)
</code></pre>
<blockquote>
<p>âœ… <strong>å®‰å…¨æç¤º</strong>ï¼šæ°¸è¿œä¸è¦å°†å¯†é’¥æäº¤åˆ° Gitï¼åœ¨ <code>.gitignore</code> ä¸­åŠ å…¥ <code>.env</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€LLM å®¢æˆ·ç«¯åˆå§‹åŒ–ï¼šå…¼å®¹æ€§è®¾è®¡</h2>
<pre><code class="hljs language-ini" lang="ini">python
ç¼–è¾‘
from openai import OpenAI

<span class="hljs-attr">client</span> = OpenAI(
    <span class="hljs-attr">api_key</span>=os.getenv(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>),
    <span class="hljs-attr">base_url</span>=<span class="hljs-string">"https://api.deepseek.com/v1"</span>
)
</code></pre>
<h3 data-id="heading-4">æ·±åº¦è§£æï¼š</h3>
<ul>
<li><code>OpenAI</code>Â ç±»æ˜¯ SDK æä¾›çš„ç»Ÿä¸€å…¥å£ï¼Œ<strong>æ— è®ºåç«¯æ˜¯ GPTã€DeepSeek è¿˜æ˜¯æœ¬åœ° Ollamaï¼Œæ¥å£ä¸€è‡´</strong>ã€‚</li>
<li><code>base_url</code>Â å…è®¸åˆ‡æ¢ä¸åŒå‚å•†çš„ OpenAI å…¼å®¹ç«¯ç‚¹ï¼Œå®ç°â€œä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²â€ã€‚</li>
<li>DeepSeek çš„Â <code>deepseek-reasoner</code>Â æ¨¡å‹ç‰¹åˆ«æ”¯æŒÂ <code>reasoning_content</code>Â å­—æ®µï¼ˆæ˜¾ç¤ºæ€ç»´é“¾ï¼‰ï¼Œé€‚åˆæ•™å­¦ä¸è°ƒè¯•ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€æ¨¡å—åŒ–æ ¸å¿ƒï¼šæ¶ˆæ¯å‘é€å‡½æ•°è®¾è®¡</h2>
<pre><code class="hljs language-ini" lang="ini">python
ç¼–è¾‘
def send_message(messages, <span class="hljs-attr">tools</span>=None, model=<span class="hljs-string">"deepseek-reasoner"</span>):
    return client.chat.completions.create(
        <span class="hljs-attr">model</span>=model,
        <span class="hljs-attr">messages</span>=messages,
        <span class="hljs-attr">tools</span>=tools,
        <span class="hljs-attr">tool_choice</span>=<span class="hljs-string">"auto"</span> if tools else None,
        <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.3</span>,  <span class="hljs-comment"># é™ä½éšæœºæ€§ï¼Œæå‡å·¥å…·è°ƒç”¨ç¨³å®šæ€§</span>
        <span class="hljs-attr">max_tokens</span>=<span class="hljs-number">1000</span>
    )
</code></pre>
<h3 data-id="heading-6">å…³é”®å‚æ•°è¯¦è§£ï¼š</h3>






























<table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>å»ºè®®å€¼</th></tr></thead><tbody><tr><td><code>tools</code></td><td>å‘Šè¯‰ LLM å¯ç”¨çš„å·¥å…·åˆ—è¡¨</td><td>åˆ—è¡¨ of Tool Schema</td></tr><tr><td><code>tool_choice</code></td><td>æ§åˆ¶å·¥å…·è°ƒç”¨ç­–ç•¥</td><td><code>"auto"</code>ï¼ˆè‡ªåŠ¨ï¼‰ã€<code>"none"</code>ã€<code>{"type": "function", "function": {"name": "xxx"}}</code>ï¼ˆå¼ºåˆ¶è°ƒç”¨ï¼‰</td></tr><tr><td><code>temperature</code></td><td>æ§åˆ¶è¾“å‡ºéšæœºæ€§</td><td>å·¥å…·è°ƒç”¨åœºæ™¯å»ºè®® â‰¤0.5ï¼Œé¿å…èƒ¡ä¹±è°ƒç”¨</td></tr><tr><td><code>max_tokens</code></td><td>é™åˆ¶è¾“å‡ºé•¿åº¦</td><td>é˜²æ­¢æ— é™ç”Ÿæˆ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>è®¾è®¡å“²å­¦</strong>ï¼šå‡½æ•°åº”åªåšä¸€ä»¶äº‹ï¼ˆå‘é€è¯·æ±‚ï¼‰ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä¾¿äºæµ‹è¯•å’Œå¤ç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">å››ã€å·¥å…·å®šä¹‰ï¼šOpenAI Tool Schema æ·±åº¦è§£è¯»</h2>
<pre><code class="hljs language-ini" lang="ini">python
ç¼–è¾‘
<span class="hljs-attr">tools</span> = [
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_weather"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”ï¼Œä»…æ”¯æŒä¸­å›½å¤§é™†åŸå¸‚"</span>,
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"location"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                        <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚æ‹¼éŸ³æˆ–ä¸­æ–‡åï¼Œå¦‚'beijing'æˆ–'åŒ—äº¬'"</span>
                    }
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"location"</span>]
            }
        }
    }
]
</code></pre>
<h3 data-id="heading-8">Schema å„å­—æ®µå«ä¹‰ï¼š</h3>
<ul>
<li><code>type</code>: ç›®å‰ä»…æ”¯æŒÂ <code>"function"</code>ï¼Œæœªæ¥å¯èƒ½æ‰©å±•Â <code>"retrieval"</code>ã€<code>"code_interpreter"</code>Â ç­‰ã€‚</li>
<li><code>name</code>: å‡½æ•°æ ‡è¯†ç¬¦ï¼Œå¿…é¡»ä¸æœ¬åœ° Python å‡½æ•°åä¸€è‡´ã€‚</li>
<li><code>description</code>:Â <strong>æå…¶é‡è¦ï¼</strong> Â LLM ä¾é æ­¤æè¿°åˆ¤æ–­ä½•æ—¶è°ƒç”¨è¯¥å·¥å…·ã€‚åº”æ¸…æ™°ã€å…·ä½“ã€å¸¦çº¦æŸã€‚</li>
<li><code>parameters</code>: ä½¿ç”¨Â <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">JSON Schema</a>Â æè¿°è¾“å…¥æ ¼å¼ï¼Œç¡®ä¿ LLM ç”Ÿæˆåˆæ³•å‚æ•°ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>ç»éªŒæ³•åˆ™</strong>ï¼š<code>description</code> è¶Šè¯¦ç»†ï¼Œè°ƒç”¨å‡†ç¡®ç‡è¶Šé«˜ã€‚ä¾‹å¦‚åŠ ä¸Šâ€œä»…æ”¯æŒä¸­å›½å¤§é™†åŸå¸‚â€å¯é¿å…ç”¨æˆ·é—®â€œçº½çº¦å¤©æ°”â€æ—¶é”™è¯¯è°ƒç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€æœ¬åœ°å‡½æ•°å®ç°ï¼šå¥å£®æ€§ä¸é”™è¯¯å¤„ç†</h2>
<pre><code class="hljs language-python" lang="python">python
ç¼–è¾‘
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">location: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    url = <span class="hljs-string">"https://api.seniverse.com/v3/weather/now.json"</span>
    params = {
        <span class="hljs-string">"key"</span>: os.getenv(<span class="hljs-string">"SENIVERSE_KEY"</span>),
        <span class="hljs-string">"location"</span>: location,
        <span class="hljs-string">"language"</span>: <span class="hljs-string">"zh-Hans"</span>
    }
    
    <span class="hljs-keyword">try</span>:
        resp = requests.get(url, params=params, timeout=<span class="hljs-number">8</span>)
        resp.raise_for_status()  <span class="hljs-comment"># æŠ›å‡º HTTP é”™è¯¯</span>
        
        data = resp.json()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data.get(<span class="hljs-string">"results"</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"æœªæ‰¾åˆ°åŸå¸‚ '<span class="hljs-subst">{location}</span>' çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥åç§°æ˜¯å¦æ­£ç¡®ã€‚"</span>
            
        r = data[<span class="hljs-string">"results"</span>][<span class="hljs-number">0</span>]
        city = r[<span class="hljs-string">"location"</span>][<span class="hljs-string">"name"</span>]
        now = r[<span class="hljs-string">"now"</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{city}</span>å½“å‰å¤©æ°”ï¼š<span class="hljs-subst">{now[<span class="hljs-string">'text'</span>]}</span>ï¼Œæ°”æ¸© <span class="hljs-subst">{now[<span class="hljs-string">'temperature'</span>]}</span>â„ƒ"</span>
        
    <span class="hljs-keyword">except</span> requests.exceptions.Timeout:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å¤©æ°”æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ã€‚"</span>
    <span class="hljs-keyword">except</span> requests.exceptions.RequestException <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
    <span class="hljs-keyword">except</span> (KeyError, json.JSONDecodeError):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å¤©æ°”æœåŠ¡è¿”å›æ ¼å¼å¼‚å¸¸ã€‚"</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"æœªçŸ¥é”™è¯¯ï¼š<span class="hljs-subst">{<span class="hljs-built_in">repr</span>(e)}</span>"</span>
</code></pre>
<h3 data-id="heading-10">é”™è¯¯å¤„ç†å±‚æ¬¡ï¼š</h3>
<ol>
<li><strong>ç½‘ç»œå±‚</strong>ï¼šè¶…æ—¶ã€DNS å¤±è´¥ã€SSL é”™è¯¯ â†’Â <code>requests.exceptions</code></li>
<li><strong>HTTP å±‚</strong>ï¼š404ã€500 â†’Â <code>resp.raise_for_status()</code></li>
<li><strong>æ•°æ®å±‚</strong>ï¼šJSON è§£æå¤±è´¥ã€å­—æ®µç¼ºå¤± â†’Â <code>KeyError</code>,Â <code>JSONDecodeError</code></li>
<li><strong>å…œåº•å±‚</strong>ï¼šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œé¿å…ç¨‹åºå´©æºƒ</li>
</ol>
<blockquote>
<p>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šå‡½æ•°è¿”å›<strong>äººç±»å¯è¯»çš„å­—ç¬¦ä¸²</strong>ï¼Œè€ŒéåŸå§‹æ•°æ®æˆ–å¼‚å¸¸å¯¹è±¡ï¼Œä¾¿äº LLM ç†è§£ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å…­ã€å®Œæ•´å·¥å…·è°ƒç”¨æµç¨‹ï¼šä¸¤é˜¶æ®µäº¤äº’è¯¦è§£</h2>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<h3 data-id="heading-12">é˜¶æ®µ 1ï¼šLLM å†³ç­–æ˜¯å¦è°ƒç”¨å·¥å…·</h3>
<pre><code class="hljs language-ini" lang="ini">python
ç¼–è¾‘
<span class="hljs-attr">messages</span> = [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä¸Šæµ·æ˜å¤©ä¼šä¸‹é›¨å—ï¼Ÿ"</span>}]
<span class="hljs-attr">response</span> = send_message(messages, tools=tools)
<span class="hljs-attr">msg</span> = response.choices[<span class="hljs-number">0</span>].message
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>msg</code> å¯èƒ½åŒ…å«ï¼š</p>
<ul>
<li><code>content</code>: ä¸€æ®µæ–‡å­—ï¼ˆæ— éœ€å·¥å…·ï¼‰</li>
<li><code>tool_calls</code>: ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«Â <code>id</code>,Â <code>function.name</code>,Â <code>function.arguments</code></li>
</ul>
<blockquote>
<p>ğŸ” <strong>å†…éƒ¨æœºåˆ¶</strong>ï¼šLLM åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œè‹¥åˆ¤æ–­éœ€è¦å¤–éƒ¨ä¿¡æ¯ï¼Œä¼š<strong>åœæ­¢ç”Ÿæˆè‡ªç„¶è¯­è¨€</strong>ï¼Œè½¬è€Œè¾“å‡ºä¸€ä¸ªç»“æ„åŒ–çš„å‡½æ•°è°ƒç”¨è¯·æ±‚ï¼ˆä»¥ç‰¹æ®Š token æ ‡è®°ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-13">é˜¶æ®µ 2ï¼šæ‰§è¡Œå·¥å…·å¹¶å›ä¼ ç»“æœ</h3>
<pre><code class="hljs language-ini" lang="ini">python
ç¼–è¾‘
if msg.tool_calls:
    messages.append(msg)  <span class="hljs-comment"># ä¿å­˜ LLM çš„å†³ç­–</span>
    
    for tool_call in msg.tool_calls:
        <span class="hljs-attr">func_name</span> = tool_call.function.name
        <span class="hljs-attr">args</span> = json.loads(tool_call.function.arguments)  <span class="hljs-comment"># æ³¨æ„ï¼šarguments æ˜¯ JSON å­—ç¬¦ä¸²ï¼</span>
        
        <span class="hljs-comment"># åŠ¨æ€è°ƒç”¨å‡½æ•°ï¼ˆå¯ç”¨å­—å…¸æ˜ å°„æ›¿ä»£ if-elseï¼‰</span>
        <span class="hljs-attr">available_functions</span> = {
            "get_weather": get_weather,
            "get_closing_price": get_closing_price
        }
        <span class="hljs-attr">func</span> = available_functions.get(func_name)
        <span class="hljs-attr">result</span> = func(**args) if func else <span class="hljs-string">"æœªçŸ¥å·¥å…·"</span>
        
        <span class="hljs-comment"># å°†ç»“æœä½œä¸º 'tool' æ¶ˆæ¯åŠ å…¥å¯¹è¯å†å²</span>
        messages.append({
            "role": "tool",
            "tool_call_id": tool_call.id,
            "name": func_name,
            "content": result
        })
    
    <span class="hljs-comment"># é˜¶æ®µ 3ï¼šLLM æ•´åˆç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”</span>
    <span class="hljs-attr">final_resp</span> = send_message(messages)
    print(final_resp.choices<span class="hljs-section">[0]</span>.message.content)
</code></pre>
<h3 data-id="heading-14">å…³é”®ç»†èŠ‚ï¼š</h3>
<ul>
<li><code>tool_call_id</code>ï¼šç”¨äºå…³è”â€œè¯·æ±‚â€ä¸â€œå“åº”â€ï¼Œç¡®ä¿å¤šå·¥å…·è°ƒç”¨æ—¶ä¸æ··æ·†ã€‚</li>
<li><code>role="tool"</code>ï¼šè¿™æ˜¯ OpenAI åè®®è§„å®šçš„ç‰¹æ®Šè§’è‰²ï¼ŒLLM ä¼šè¯†åˆ«æ­¤æ¶ˆæ¯ä¸ºå‡½æ•°è¿”å›å€¼ã€‚</li>
<li><strong>å¯¹è¯å†å²å¿…é¡»å®Œæ•´ä¿ç•™</strong>ï¼šåŒ…æ‹¬ systemã€userã€assistantã€tool æ¶ˆæ¯ï¼Œå¦åˆ™ LLM æ— æ³•ç†è§£ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€æ‰©å±•ï¼šæ”¯æŒå¤šå·¥å…·ä¸åŠ¨æ€æ³¨å†Œ</h2>
<p>ä¸ºæ”¯æŒæœªæ¥æ–°å¢å·¥å…·ï¼ˆå¦‚æŸ¥å¿«é€’ã€ç¿»è¯‘ï¼‰ï¼Œå¯è®¾è®¡æ³¨å†Œæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">python
ç¼–è¾‘
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolRegistry</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):
        <span class="hljs-variable language_">self</span>.functions = {}
        <span class="hljs-variable language_">self</span>.schemas = []
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, func, schema</span>):
        name = func.__name__
        <span class="hljs-variable language_">self</span>.functions[name] = func
        <span class="hljs-variable language_">self</span>.schemas.append(schema)
        <span class="hljs-keyword">return</span> func

registry = <span class="hljs-title class_">ToolRegistry</span>()

<span class="hljs-comment"># æ³¨å†Œå¤©æ°”å·¥å…·</span>
<span class="hljs-variable">@registry</span>.register
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params"><span class="hljs-symbol">location:</span> str</span>) -&gt; <span class="hljs-symbol">str:</span>
    <span class="hljs-comment"># ... å®ç°åŒä¸Š ...</span>

weather_schema = { <span class="hljs-regexp">/* åŒä¸Š */</span> }
registry.register(get_weather, weather_schema)

<span class="hljs-comment"># è°ƒç”¨æ—¶</span>
tools = registry.schemas
func = registry.functions[tool_call.function.name]
</code></pre>
<blockquote>
<p>ğŸš€ æ­¤æ¨¡å¼ç±»ä¼¼ Flask çš„ <code>@app.route</code>ï¼Œå®ç°â€œå£°æ˜å¼å·¥å…·æ³¨å†Œâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">å…«ã€æ€§èƒ½ä¸å®‰å…¨è€ƒé‡</h2>
<h3 data-id="heading-17">8.1 æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>ç¼“å­˜</strong>ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢ï¼ˆå¦‚èŒ…å°è‚¡ä»·ï¼‰åŠ å†…å­˜ç¼“å­˜ï¼ˆ<code>functools.lru_cache</code>ï¼‰</li>
<li><strong>å¼‚æ­¥</strong>ï¼šä½¿ç”¨Â <code>httpx.AsyncClient</code>Â +Â <code>async/await</code>Â æå‡å¹¶å‘èƒ½åŠ›</li>
<li><strong>é™æµ</strong>ï¼šåœ¨å‡½æ•°å†…åŠ è®¡æ•°å™¨ï¼Œé˜²æ­¢æ¶æ„ç”¨æˆ·åˆ·æ¥å£</li>
</ul>
<h3 data-id="heading-18">8.2 å®‰å…¨é˜²æŠ¤</h3>
<ul>
<li><strong>è¾“å…¥æ ¡éªŒ</strong>ï¼šå¯¹Â <code>location</code>Â åšç™½åå•æˆ–æ­£åˆ™è¿‡æ»¤ï¼Œé˜²æ­¢ SSRFï¼ˆå¦‚Â <code>location=http://internal.server</code>ï¼‰</li>
<li><strong>æ²™ç®±æ‰§è¡Œ</strong>ï¼šè‹¥å·¥å…·æ¶‰åŠä»£ç æ‰§è¡Œï¼ˆå¦‚Â <code>code_interpreter</code>ï¼‰ï¼ŒåŠ¡å¿…åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œ</li>
<li><strong>æ—¥å¿—å®¡è®¡</strong>ï¼šè®°å½•æ‰€æœ‰å·¥å…·è°ƒç”¨ï¼Œä¾¿äºè¿½è¸ªä¸åˆ†æ</li>
</ul>
<hr/>
<h2 data-id="heading-19">ä¹ã€è°ƒè¯•æŠ€å·§ï¼šå¦‚ä½•æ’æŸ¥å·¥å…·è°ƒç”¨å¤±è´¥ï¼Ÿ</h2>
<ol>
<li><strong>æ‰“å°å®Œæ•´ messages</strong>ï¼šç¡®è®¤å¯¹è¯å†å²æ ¼å¼æ­£ç¡®</li>
<li><strong>æ£€æŸ¥ arguments æ˜¯å¦åˆæ³• JSON</strong>ï¼šå¸¸è§é”™è¯¯æ˜¯ LLM ç”Ÿæˆäº†é JSON å­—ç¬¦ä¸²</li>
<li><strong>éªŒè¯ function name æ˜¯å¦åŒ¹é…</strong>ï¼šå¤§å°å†™æ•æ„Ÿï¼</li>
<li><strong>æŸ¥çœ‹æ¨¡å‹æ˜¯å¦æ”¯æŒ tool calling</strong>ï¼šå¹¶éæ‰€æœ‰æ¨¡å‹éƒ½æ”¯æŒï¼ˆå¦‚Â <code>gpt-3.5-turbo-instruct</code>Â ä¸æ”¯æŒï¼‰</li>
</ol>
<p>ç¤ºä¾‹è°ƒè¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">python
ç¼–è¾‘
pr<span class="hljs-built_in">int</span>(<span class="hljs-string">"LLM è¿”å›:"</span>, msg)
<span class="hljs-keyword">if</span> msg.tool_calls:
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">call</span> <span class="hljs-keyword">in</span> msg.tool_calls:
        pr<span class="hljs-built_in">int</span>(<span class="hljs-string">"æ¬²è°ƒç”¨å‡½æ•°:"</span>, <span class="hljs-keyword">call</span>.<span class="hljs-keyword">function</span>.name)
        pr<span class="hljs-built_in">int</span>(<span class="hljs-string">"å‚æ•° (raw):"</span>, <span class="hljs-keyword">call</span>.<span class="hljs-keyword">function</span>.arguments)
        pr<span class="hljs-built_in">int</span>(<span class="hljs-string">"å‚æ•° (parsed):"</span>, json.loads(<span class="hljs-keyword">call</span>.<span class="hljs-keyword">function</span>.arguments))
</code></pre>
<hr/>
<h2 data-id="heading-20">åã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-21">æ ¸å¿ƒæ”¶è·</h3>

























<table><thead><tr><th>ç»´åº¦</th><th>å†…å®¹</th></tr></thead><tbody><tr><td><strong>æ¶æ„</strong></td><td>ä¸¤é˜¶æ®µäº¤äº’ï¼ˆå†³ç­– â†’ æ‰§è¡Œ â†’ æ•´åˆï¼‰æ˜¯ Tool Use çš„æ ‡å‡†èŒƒå¼</td></tr><tr><td><strong>æ¨¡å—åŒ–</strong></td><td>åˆ†ç¦» LLM è°ƒç”¨ã€å·¥å…·å®šä¹‰ã€ä¸šåŠ¡å‡½æ•°ï¼Œæå‡å¯ç»´æŠ¤æ€§</td></tr><tr><td><strong>å¥å£®æ€§</strong></td><td>å…¨é“¾è·¯é”™è¯¯å¤„ç† + è¾“å…¥æ ¡éªŒ = ç”Ÿäº§çº§ç³»ç»Ÿ</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>é€šè¿‡æ³¨å†Œæœºåˆ¶ï¼Œè½»æ¾æ–°å¢å·¥å…·</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºcesiumçš„primitiveçš„modelMatrixçš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7574270661872173094</link>    <guid>https://juejin.cn/post/7574270661872173094</guid>    <pubDate>2025-11-19T11:04:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574270661872173094" data-draft-id="7574204970746363950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºcesiumçš„primitiveçš„modelMatrixçš„åº”ç”¨"/> <meta itemprop="keywords" content="cesium,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T11:04:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•´ç‚¹å¯ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/1603526542767677"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºcesiumçš„primitiveçš„modelMatrixçš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1603526542767677/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•´ç‚¹å¯ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T11:04:55.000Z" title="Wed Nov 19 2025 11:04:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« ä¹‹å‰,å»ºè®®å…ˆäº†è§£ä»€ä¹ˆæ˜¯<strong>ä»¿å°„å˜æ¢çŸ©é˜µ</strong></p>
<h2 data-id="heading-0">åº. ä»¿å°„å˜æ¢çŸ©é˜µ</h2>
<h3 data-id="heading-1">1ã€æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ä»¿å°„å˜æ¢ï¼Ÿ</h3>
<p>ä»¿å°„å˜æ¢æ˜¯ä¸€ç±» â€œçº¿æ€§å˜æ¢ + å¹³ç§»â€ çš„ç»„åˆå˜æ¢ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>çº¿æ€§å˜æ¢</strong>ï¼šæ—‹è½¬ï¼ˆRotationï¼‰ã€ç¼©æ”¾ï¼ˆScalingï¼‰ã€å‰ªåˆ‡ï¼ˆShearingï¼‰ï¼›</li>
<li><strong>å¹³ç§»å˜æ¢</strong>ï¼šå°†å›¾å½¢æ²¿æŸä¸ªæ–¹å‘ç§»åŠ¨ï¼ˆTranslationï¼‰ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šæŠŠä¸€å¼ å›¾ç‰‡æ—‹è½¬ 30Â° åå†å‘å³ç§»åŠ¨ 100 åƒç´ ï¼Œå°±æ˜¯ä¸€æ¬¡ä»¿å°„å˜æ¢ã€‚</p>
<h3 data-id="heading-2">2ã€ä»¿å°„å˜æ¢çŸ©é˜µçš„ç»“æ„ï¼ˆä»¥ 3D ä¸ºä¾‹ï¼ŒCesium ä¸­æœ€å¸¸ç”¨ï¼‰</h3>
<p>åœ¨ 3D ç©ºé—´ä¸­ï¼Œä»¿å°„å˜æ¢çŸ©é˜µæ˜¯ä¸€ä¸ª<strong>4Ã—4 çš„çŸ©é˜µ</strong>ï¼ˆé½æ¬¡åæ ‡çŸ©é˜µï¼‰ï¼Œç»“æ„å¦‚ä¸‹ï¼ˆåˆ—ä¼˜å…ˆå­˜å‚¨ï¼ŒCesium é»˜è®¤æ ¼å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[
  a, d, g, j,  <span class="hljs-comment">// ç¬¬1åˆ—ï¼šXè½´çº¿æ€§å˜æ¢å‚æ•°</span>
  b, e, h, k,  <span class="hljs-comment">// ç¬¬2åˆ—ï¼šYè½´çº¿æ€§å˜æ¢å‚æ•°</span>
  c, f, i, l,  <span class="hljs-comment">// ç¬¬3åˆ—ï¼šZè½´çº¿æ€§å˜æ¢å‚æ•°</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>   <span class="hljs-comment">// ç¬¬4åˆ—ï¼šé½æ¬¡åæ ‡å›ºå®šé¡¹ï¼ˆç¡®ä¿çŸ©é˜µä¹˜æ³•åˆæ³•æ€§ï¼‰</span>
]
</code></pre>
<ul>
<li>
<p><strong>å‰ 3Ã—3 å­çŸ©é˜µï¼ˆa-iï¼‰</strong> ï¼šè´Ÿè´£çº¿æ€§å˜æ¢ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ã€å‰ªåˆ‡ï¼‰ï¼›</p>
<p>è¿™é‡Œè¯¦ç»†åˆ†è§£ä¸€ä¸‹æ—‹è½¬å’Œç¼©æ”¾:</p>
<p>ç¼©æ”¾å˜æ¢ï¼šç”±å‰ 3Ã—3 å­çŸ©é˜µçš„ â€œå¯¹è§’çº¿å…ƒç´ â€ æ§åˆ¶</p>
</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">  Sx,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-comment">// Xè½´ç¼©æ”¾å› å­ï¼ˆm00ï¼‰</span>
   <span class="hljs-number">0</span>, Sy,  <span class="hljs-number">0</span>,  <span class="hljs-comment">// Yè½´ç¼©æ”¾å› å­ï¼ˆm05ï¼‰</span>
   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>, Sz   <span class="hljs-comment">// Zè½´ç¼©æ”¾å› å­ï¼ˆm10ï¼‰</span>
</code></pre>
<p>â€ƒâ€ƒâ€ƒâ€ƒÂ Â æ—‹è½¬å˜æ¢ï¼šç”±å‰ 3Ã—3 å­çŸ©é˜µçš„ â€œæ‰€æœ‰å…ƒç´ å…±åŒæ§åˆ¶â€ï¼ˆæ­£äº¤çŸ©é˜µï¼‰</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç»• Z è½´æ—‹è½¬ï¼ˆèˆªå‘è§’ Headingï¼Œå¯¹åº” yawï¼‰,æ—‹è½¬è§’åº¦ä¸º`Î¸`ï¼ŒçŸ©é˜µå…ƒç´ ï¼š</span>
[
  cosÎ¸, -sinÎ¸, <span class="hljs-number">0</span>,  <span class="hljs-comment">// ç¬¬0åˆ—ï¼šm00=cosÎ¸, m01=-sinÎ¸, m02=0</span>
  sinÎ¸,  cosÎ¸, <span class="hljs-number">0</span>,  <span class="hljs-comment">// ç¬¬1åˆ—ï¼šm04=sinÎ¸, m05=cosÎ¸, m06=0</span>
  <span class="hljs-number">0</span>,      <span class="hljs-number">0</span>,   <span class="hljs-number">1</span>   <span class="hljs-comment">// ç¬¬2åˆ—ï¼šm08=0, m09=0, m10=1</span>
]

<span class="hljs-comment">// ç»• X è½´æ—‹è½¬ï¼ˆç¿»æ»šè§’ Rollï¼‰,æ—‹è½¬è§’åº¦ä¸º`Ï†`ï¼ŒçŸ©é˜µå…ƒç´ :</span>
[
  <span class="hljs-number">1</span>,   <span class="hljs-number">0</span>,    <span class="hljs-number">0</span>,   <span class="hljs-comment">// ç¬¬0åˆ—ï¼šm00=1, m01=0, m02=0</span>
  <span class="hljs-number">0</span>, cosÏ†, -sinÏ†, <span class="hljs-comment">// ç¬¬1åˆ—ï¼šm04=0, m05=cosÏ†, m06=-sinÏ†</span>
  <span class="hljs-number">0</span>, sinÏ†,  cosÏ†  <span class="hljs-comment">// ç¬¬2åˆ—ï¼šm08=0, m09=sinÏ†, m10=cosÏ†</span>
]

<span class="hljs-comment">// ç»• Y è½´æ—‹è½¬ï¼ˆä¿¯ä»°è§’ Pitchï¼‰,æ—‹è½¬è§’åº¦ä¸º`Ïˆ`ï¼ŒçŸ©é˜µå…ƒç´ ï¼š</span>
[
  cosÏˆ, <span class="hljs-number">0</span>, sinÏˆ,  <span class="hljs-comment">// ç¬¬0åˆ—ï¼šm00=cosÏˆ, m01=0, m02=sinÏˆ</span>
  <span class="hljs-number">0</span>,    <span class="hljs-number">1</span>,    <span class="hljs-number">0</span>,  <span class="hljs-comment">// ç¬¬1åˆ—ï¼šm04=0, m05=1, m06=0</span>
  -sinÏˆ,<span class="hljs-number">0</span>, cosÏˆ   <span class="hljs-comment">// ç¬¬2åˆ—ï¼šm08=-sinÏˆ, m09=0, m10=cosÏˆ</span>
]
</code></pre>
<ul>
<li>
<p><strong>ç¬¬ 4 åˆ—å‰ 3 ä¸ªå…ƒç´ ï¼ˆj, k, lï¼‰</strong> ï¼šè´Ÿè´£å¹³ç§»å˜æ¢ï¼ˆXã€Yã€Z æ–¹å‘çš„å¹³ç§»é‡ï¼‰ï¼›</p>
</li>
<li>
<p><strong>æœ€åä¸€è¡Œï¼ˆ0,0,0,1ï¼‰</strong> ï¼šé½æ¬¡åæ ‡çš„ â€œæ ‡è¯†è¡Œâ€ï¼Œç¡®ä¿çŸ©é˜µä¹˜æ³•èƒ½æ­£ç¡®èåˆçº¿æ€§å˜æ¢å’Œå¹³ç§»ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">3ã€ä¸ºä»€ä¹ˆç”¨ 4Ã—4 çŸ©é˜µï¼Ÿï¼ˆé½æ¬¡åæ ‡çš„ä½œç”¨ï¼‰</h3>
<p>çº¿æ€§å˜æ¢ï¼ˆå¦‚æ—‹è½¬ã€ç¼©æ”¾ï¼‰å¯ä»¥ç”¨ 3Ã—3 çŸ©é˜µè¡¨ç¤ºï¼Œä½†<strong>å¹³ç§»æ— æ³•ç”¨ 3Ã—3 çŸ©é˜µå•ç‹¬å®ç°</strong>ï¼ˆå› ä¸ºçº¿æ€§å˜æ¢çš„åŸç‚¹æ˜ å°„åä»æ˜¯åŸç‚¹ï¼Œè€Œå¹³ç§»ä¼šæ”¹å˜åŸç‚¹ä½ç½®ï¼‰ã€‚</p>
<p>é€šè¿‡å¼•å…¥ â€œé½æ¬¡åæ ‡â€ï¼ˆ3D ç‚¹ç”¨ 4 ä¸ªåˆ†é‡<code>(x, y, z, 1)</code>è¡¨ç¤ºï¼‰ï¼Œ4Ã—4 çŸ©é˜µå¯ä»¥<strong>ç»Ÿä¸€å¤„ç†çº¿æ€§å˜æ¢å’Œå¹³ç§»</strong>ï¼š</p>
<ul>
<li>å¯¹ä¸€ä¸ªç‚¹<code>(x, y, z, 1)</code>åº”ç”¨ä»¿å°„å˜æ¢çŸ©é˜µåï¼Œç»“æœä¸ºï¼š<code>x' = a*x + d*y + g*z + j``y' = b*x + e*y + h*z + k``z' = c*x + f*y + i*z + l</code>ï¼ˆåŒæ—¶æ»¡è¶³çº¿æ€§å˜æ¢å’Œå¹³ç§»çš„ç»„åˆæ•ˆæœï¼‰</li>
</ul>
<h3 data-id="heading-4">4ã€Cesium ä¸­çš„ä»¿å°„å˜æ¢çŸ©é˜µå®ä¾‹</h3>
<p>Cesium ä¸­å‡ ä¹æ‰€æœ‰æ¨¡å‹ / ç‰©ä½“çš„ä½ç½®å’Œå§¿æ€è°ƒæ•´ï¼Œéƒ½ä¾èµ– 4Ã—4 ä»¿å°„å˜æ¢çŸ©é˜µï¼ˆå¦‚<code>modelMatrix</code>ï¼‰ï¼š</p>
<p>a.  <strong>çº¯å¹³ç§»çŸ©é˜µ</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-string">``</span><span class="hljs-string">`
// æ²¿Xè½´å¹³ç§»10ï¼ŒYè½´å¹³ç§»20ï¼ŒZè½´å¹³ç§»30
const translateMatrix = Cesium.Matrix4.fromTranslation(new Cesium.Cartesian3(10, 20, 30));
`</span><span class="hljs-string">``</span>

çŸ©é˜µç»“æ„ä¸ºï¼š

<span class="hljs-string">``</span><span class="hljs-string">`
[1,0,0,10,  
 0,1,0,20,  
 0,0,1,30,  
 0,0,0,1]
`</span><span class="hljs-string">``</span>
</code></pre>
<p>b.  <strong>æ—‹è½¬ + å¹³ç§»çŸ©é˜µ</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-string">``</span><span class="hljs-string">`
// ä»¥centerä¸ºåŸç‚¹ï¼Œåº”ç”¨HPRæ—‹è½¬ï¼Œç”ŸæˆåŒ…å«æ—‹è½¬å’Œå¹³ç§»çš„ä»¿å°„çŸ©é˜µ
const hprMatrix = Cesium.Transforms.headingPitchRollToFixedFrame(center, hpr);
`</span><span class="hljs-string">``</span>

å…¶ä¸­å‰ <span class="hljs-number">3</span>Ã—<span class="hljs-number">3</span> å­çŸ©é˜µæ˜¯æ—‹è½¬ï¼ˆçº¿æ€§å˜æ¢ï¼‰ï¼Œç¬¬ <span class="hljs-number">4</span> åˆ—æ˜¯ center çš„åæ ‡ï¼ˆå¹³ç§»ï¼‰ã€‚
</code></pre>
<h3 data-id="heading-5">5ã€æ ¸å¿ƒä½œç”¨ï¼šç»Ÿä¸€ç»„åˆå¤šä¸ªå˜æ¢</h3>
<p>ä»¿å°„å˜æ¢çŸ©é˜µçš„æœ€å¤§ä»·å€¼æ˜¯<strong>æ”¯æŒçŸ©é˜µä¹˜æ³•ç»„åˆå¤šä¸ªå˜æ¢</strong>ã€‚ä¾‹å¦‚ï¼šå…ˆç¼©æ”¾â†’å†æ—‹è½¬â†’æœ€åå¹³ç§»ï¼Œåªéœ€å°†ä¸‰ä¸ªå˜æ¢çŸ©é˜µæŒ‰é¡ºåºç›¸ä¹˜ï¼ˆæ³¨æ„é¡ºåºï¼šä»å³åˆ°å·¦åº”ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Cesiumä¸­çŸ©é˜µçš„ä¹˜æ³•ä¸ºå³ä¹˜!å³</span>
<span class="hljs-comment">//matA * matB,å†™ä½œ</span>
 Cesium.Matrix4.<span class="hljs-built_in">multiply</span>(matB, matA, <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Matrix4</span>())
 
<span class="hljs-comment">// ç¼©æ”¾çŸ©é˜µ â†’ æ—‹è½¬çŸ©é˜µ â†’ å¹³ç§»çŸ©é˜µ</span>
<span class="hljs-type">const</span> temp = Cesium.Matrix4.<span class="hljs-built_in">multiply</span>(rotateMatrix, scaleMatrix)
<span class="hljs-type">const</span> finalMatrix = Cesium.Matrix4.<span class="hljs-built_in">multiply</span>(translateMatrix, temp);
</code></pre>
<h2 data-id="heading-6">ä¸€.å¹³ç§»</h2>
<h3 data-id="heading-7">1. ä¸–ç•Œåæ ‡å¹³ç§»(åŸç‚¹ç›®æ ‡ç‚¹çš†ä¸ºä¸–ç•Œåæ ‡)</h3>
<p>æ€è·¯,è·å–å‘é‡å·®,å°†å‘é‡å·®è½¬ä¸ºå¹³ç§»çŸ©é˜µ</p>
<pre><code class="hljs language-ini" lang="ini">// origin ä¸ºåŸç‚¹åæ ‡,targetä¸ºç›®æ ‡åæ ‡
const <span class="hljs-attr">sub</span> = Cesium.Cartesian3.subtract(target, origin, new Cesium.Cartesian3())
<span class="hljs-attr">primitive.modelMatrix</span> = Cesium.Matrix4.fromTranslation(sub)
</code></pre>
<h3 data-id="heading-8">2. å±€éƒ¨åæ ‡å¹³ç§»(å¦‚æ¨¡å‹å‘å—å¹³ç§»200ç±³)</h3>
<p>æ€è·¯,è®¡ç®—å‡ºç›®æ ‡ç‚¹ä¸–ç•Œåæ ‡,è·å–å‘é‡å·®,å°†å‘é‡å·®è½¬ä¸ºå¹³ç§»çŸ©é˜µ</p>
<pre><code class="hljs language-ini" lang="ini">// origin ä¸ºåŸç‚¹åæ ‡,local_translationä¸ºå¹³ç§»å‘é‡
const <span class="hljs-attr">originMatrix4</span> = Cesium.Transforms.eastNorthUpToFixedFrame(origin)<span class="hljs-comment">;</span>
// å¹³ç§»å‘é‡çš„æ„å»ºä¸º:new Cesium.Cartesian3(ä¸œ,åŒ—,ä¸Š)
const <span class="hljs-attr">local_translation</span> = new Cesium.Cartesian3(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>, <span class="hljs-number">100</span>)<span class="hljs-comment">; </span>
const <span class="hljs-attr">result</span> = new Cesium.Cartesian3(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
// è½¬æ¢çŸ©é˜µå·¦ä¹˜å±€éƒ¨å¹³ç§»å‘é‡ï¼Œç»“æœå­˜å‚¨åœ¨ result ä¸­ï¼Œç»“æœæ˜¯ä¸–ç•Œåæ ‡ä¸‹çš„å¹³ç§»ç»ˆç‚¹å‘é‡,å³ç›®æ ‡ç‚¹çš„ä¸–ç•Œåæ ‡
Cesium.Matrix4.multiplyByPoint(frompoint_to_world_matrix, local_translation, result)<span class="hljs-comment">; </span>
// è·å–ä¸–ç•Œåæ ‡å¹³ç§»å‘é‡
const <span class="hljs-attr">sub</span> = Cesium.Cartesian3.subtract(result, origin, new Cesium.Cartesian3())
// åº”ç”¨å¹³ç§»
<span class="hljs-attr">primitive.modelMatrix</span> = Cesium.Matrix4.fromTranslation(sub)
</code></pre>
<h2 data-id="heading-9">äºŒ.æ—‹è½¬</h2>
<p>æ€è·¯,å› ä¸ºCesiumçš„Primitiveæ—‹è½¬ä¸­å¿ƒä¸ºåæ ‡ç³»ä¸­å¿ƒ, æ‰€ä»¥å¿…é¡»å…ˆæ¥åˆ°åæ ‡ç³»ä¸­å¿ƒ,å†åšæ“ä½œ,æœ€åè¿”å›åŸç‚¹</p>
<pre><code class="hljs language-arduino" lang="arduino">    <span class="hljs-comment">// è·å–ä»åæ ‡ç³»ä¸­å¿ƒåˆ°åŸç‚¹çš„ä½ç§»çŸ©é˜µ</span>
    <span class="hljs-type">const</span> backMat = Cesium.Matrix4.<span class="hljs-built_in">fromTranslation</span>(origin)
    <span class="hljs-comment">// å°†å‘é‡å–å,ç”¨äºè·å–ç›¸åçš„ä½ç§»çŸ©é˜µ,ç”¨äºå‰å¾€åæ ‡ç³»ä¸­å¿ƒ</span>
    <span class="hljs-type">const</span> toVec = <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Cartesian3</span>(-origin.x, -origin.y, -origin.z)
    <span class="hljs-type">const</span> toMat = Cesium.Matrix4.<span class="hljs-built_in">fromTranslation</span>(toVec)
    
    <span class="hljs-comment">// è·å–æ—‹è½¬å‚æ•°</span>
    <span class="hljs-type">const</span> hpr = <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">HeadingPitchRoll</span>(heading,pitch,roll)
    <span class="hljs-comment">// å› ä¸ºç›®å‰æ¨¡å‹åœ¨åæ ‡ç³»ä¸­å¿ƒ,ç¬¬ä¸€ä¸ªå‚æ•°è¦å†™Cesium.Cartesian3.ZERO</span>
    <span class="hljs-type">const</span> rotateMatrix = Cesium.Transforms.<span class="hljs-built_in">headingPitchRollToFixedFrame</span>(Cesium.Cartesian3.ZERO, hpr, Cesium.Ellipsoid.WGS84)
    
    <span class="hljs-comment">// è·å–å®Œæ•´çŸ©é˜µ,æ ¹æ®é¡ºåºåº”å½“ åŸç‚¹â†’ä¸­å¿ƒâ†’å˜æ¢â†’åŸç‚¹,æ‰€ä»¥åº”å½“æ˜¯ toMat * rotateMatrix * backMat</span>
    <span class="hljs-comment">// æ³¨æ„CesiumçŸ©é˜µç›¸ä¹˜æ˜¯å³ä¹˜!!!!!!</span>
    <span class="hljs-type">const</span> temp = Cesium.Matrix4.<span class="hljs-built_in">multiply</span>(rotateMatrix, toMat, <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Matrix4</span>())
    <span class="hljs-type">const</span> res = Cesium.Matrix4.<span class="hljs-built_in">multiply</span>(backMat, temp, <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Matrix4</span>())
    Primitive.modelMatrix = res
</code></pre>
<h2 data-id="heading-10">ä¸‰.ç¼©æ”¾</h2>
<p>æ€è·¯,ä¾æ—§å¿…é¡»å…ˆæ¥åˆ°åæ ‡ç³»ä¸­å¿ƒ,å†åšç¼©æ”¾,æœ€åè¿”å›åŸç‚¹</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// çœç•¥æ¥å›ä½ç§»çš„ä»£ç ,rotateMatrixæ›¿æ¢æˆscaleMat</span>
<span class="hljs-comment">// è·å–ç¼©æ”¾å‚æ•°</span>
<span class="hljs-type">const</span> scaleVec = <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Cartesian3</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)
<span class="hljs-type">const</span> scaleMat = Cesium.Matrix4.<span class="hljs-built_in">fromScale</span>(scaleVec, <span class="hljs-keyword">new</span> Cesium.<span class="hljs-built_in">Matrix4</span>())
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Trae å¸®æˆ‘åšäº†ä¸€ä¸ªå°æ’ä»¶åï¼Œæˆ‘åè€Œå‘ç°äº†å®ƒæœ€è¯¥ä¼˜åŒ–çš„ 6 ä¸ªåœ°æ–¹]]></title>    <link>https://juejin.cn/post/7574245125028708371</link>    <guid>https://juejin.cn/post/7574245125028708371</guid>    <pubDate>2025-11-19T11:10:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574245125028708371" data-draft-id="7574230586971521030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Trae å¸®æˆ‘åšäº†ä¸€ä¸ªå°æ’ä»¶åï¼Œæˆ‘åè€Œå‘ç°äº†å®ƒæœ€è¯¥ä¼˜åŒ–çš„ 6 ä¸ªåœ°æ–¹"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-19T11:10:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ouma_syu"/> <meta itemprop="url" content="https://juejin.cn/user/2728363512824729"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Trae å¸®æˆ‘åšäº†ä¸€ä¸ªå°æ’ä»¶åï¼Œæˆ‘åè€Œå‘ç°äº†å®ƒæœ€è¯¥ä¼˜åŒ–çš„ 6 ä¸ªåœ°æ–¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2728363512824729/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ouma_syu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T11:10:17.000Z" title="Wed Nov 19 2025 11:10:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ Trae åš Hulk æ’ä»¶ä¹‹åï¼Œæˆ‘å‘ç°äº† 6 ä¸ªå€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹</h2>
<p>ç”¨ Trae ç”Ÿæˆä¸€ä¸ªâ€œæŠŠç½‘é¡µèƒŒæ™¯å˜æˆç»¿è‰²â€çš„ Chrome æ‰©å±•å¹¶ä¸ç®—éš¾ã€‚ä½†åšå®Œä¹‹åä½ ä¼šå‘ç°ï¼š<strong>éš¾çš„ä¸æ˜¯å®ç°åŠŸèƒ½ï¼Œè€Œæ˜¯è®©æ•´ä¸ªå¼€å‘æµç¨‹æ›´é¡ºæ»‘ã€æ›´æ˜“ç»´æŠ¤ã€æ›´èƒ½å¤ç”¨åˆ°ä¸‹ä¸€ä¸ªé¡¹ç›®ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« æ€»ç»“lqæˆ‘åœ¨ç”¨ Trae æ­å»ºè¿™ä¸ª Hulk æ’ä»¶æ—¶ï¼Œè®¤ä¸ºæœ€å€¼å¾—ä¼˜åŒ–çš„å…­ä¸ªç‚¹ã€‚å®ƒä»¬èƒ½æ˜¾è‘—æå‡ä½ ç”¨ Trae åšæ‰©å±•ç¨‹åºæ—¶çš„æ•ˆç‡å’Œä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>1. Instruction å¤ªâ€œç¡¬ç¼–ç â€ï¼Œéœ€è¦æ‹†æˆæ›´çµæ´»çš„ Prompt æ¨¡æ¿</strong></h3>
<p>æˆ‘æœ€å¼€å§‹çš„ instruction å†™å¾—éå¸¸å…·ä½“ï¼š</p>
<ul>
<li>æ‰“å¼€å¼¹çª—</li>
<li>æ˜¾ç¤ºæŸæ®µæç¤ºæ–‡æ¡ˆ</li>
<li>æŒ‰ä¸‹æŒ‰é’®åæ”¹ä¸ºç»¿è‰²</li>
<li>å›¾æ ‡æ¥è‡ª icons æ–‡ä»¶å¤¹</li>
</ul>
<p>è™½ç„¶ agent ç¡®å®ç…§åšäº†ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>å¤ç”¨æ€§æä½</strong>ï¼šä¸‹æ¬¡åšå¦ä¸€ä¸ªæ’ä»¶è¿˜å¾—é‡å†™ä¸€å¤§æ®µ</li>
<li><strong>æ‰©å±•æ€§å·®</strong>ï¼šæ¯ä¸€ä¸ªå˜åŒ–éƒ½è¦æ‰‹åŠ¨æ”¹ instruction</li>
<li><strong>Agent æ²¡æœ‰æ€è€ƒç©ºé—´</strong>ï¼Œåªèƒ½å®Œå…¨æŒ‰ç…§æ–‡å­—æ‰§è¡Œ</li>
</ul>
<p>ä¸ºäº†è®© Trae æ›´â€œèªæ˜â€ï¼Œæˆ‘åæ¥æŠŠæ•´ä¸ª instruction æ‹†æˆä¸‰ç±»æ¨¡æ¿ï¼š</p>
<h4 data-id="heading-2">æ¨¡æ¿ 1ï¼šåŠŸèƒ½éœ€æ±‚ Promptï¼ˆåªæè¿°â€œåšä»€ä¹ˆâ€ï¼‰</h4>
<p>å¦‚ï¼šæ”¹å˜èƒŒæ™¯é¢œè‰²ã€æŒ‰é’®æ–‡æ¡ˆã€é¢œè‰²å‚æ•°ç­‰ã€‚</p>
<h4 data-id="heading-3">æ¨¡æ¿ 2ï¼šå·¥ç¨‹ç»“æ„ Promptï¼ˆæè¿°â€œæ€ä¹ˆç»„ç»‡æ–‡ä»¶â€ï¼‰</h4>
<p>å¦‚ï¼šå›ºå®šæ‰©å±•ç›®å½•ç»“æ„ã€manifest.json æ¨¡æ¿ã€icons è§„åˆ™ã€‚</p>
<h4 data-id="heading-4">æ¨¡æ¿ 3ï¼šè´¨é‡æ ¡éªŒ Promptï¼ˆæè¿°â€œåº”è¯¥æ£€æŸ¥ä»€ä¹ˆâ€ï¼‰</h4>
<p>å¦‚ï¼šæ£€æŸ¥æƒé™ã€æ£€æŸ¥è·¯å¾„ã€è¡¥é½ç¼ºå¤±å­—æ®µã€åˆ¤æ–­æ˜¯å¦éœ€è¦ background scriptã€‚</p>
<p><strong>è¿™æ ·ä¸€æ¥ï¼Œé‡ç”¨ç‡å¤§å¹…æå‡ã€‚</strong><br/>
ä»¥ååšå„ç§å°æ’ä»¶ï¼Œåªéœ€è¦æ¢å‡ ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯é‡å†™æ•´ä»½ instructionã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>2. æ–‡ä»¶ç”Ÿæˆå¯ä»¥æ›´æ™ºèƒ½ï¼Œè€Œä¸æ˜¯â€œAgent æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™â€</strong></h3>
<p>Trae çš„æ–‡ä»¶ç”Ÿæˆæœºåˆ¶æœ¬è´¨æ˜¯ï¼š</p>
<pre><code class="hljs">æè¿° â†’ Agent ç”Ÿæˆæ–‡ä»¶å†…å®¹ â†’ å†™æ–‡ä»¶èŠ‚ç‚¹
</code></pre>
<p>ä½†è¿™æ ·æœ‰å‡ ä¸ªå¸¸è§é—®é¢˜ï¼š</p>
<ul>
<li>æ–‡ä»¶åå¯èƒ½ä¼šè¢«è¯¯è§£</li>
<li>manifest.json å­—æ®µå®¹æ˜“ç¼º</li>
<li>popup.html ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ CSSã€JS</li>
</ul>
<p>æ‰€ä»¥å¾ˆæœ‰å¿…è¦åšä¸€ä¸ªâ€œåŠè‡ªåŠ¨ scaffoldï¼ˆè„šæ‰‹æ¶ï¼‰â€æµç¨‹ï¼š</p>
<h4 data-id="heading-6">å»ºè®®ï¼šé¢„ç½®å¥½æ’ä»¶åŸºç¡€ç»“æ„æ¨¡æ¿</h4>
<pre><code class="hljs language-lua" lang="lua">/hulk-extension
|<span class="hljs-comment">-- manifest.json</span>
|<span class="hljs-comment">-- popup/</span>
|     |<span class="hljs-comment">-- popup.html</span>
|     |<span class="hljs-comment">-- popup.js</span>
|<span class="hljs-comment">-- icons/</span>
</code></pre>
<p>ç„¶åè®© agent åªè´Ÿè´£å¡«å†…å®¹ï¼Œè€Œä¸æ˜¯çŒœç»“æ„ã€‚</p>
<p>å†è¿›ä¸€æ­¥å®Œå–„ï¼š</p>
<ul>
<li>popup.html è‡ªåŠ¨è¡¥ script</li>
<li>æŒ‰é’® id ä¸ JS è‡ªåŠ¨å¯¹åº”</li>
<li>manifest è‡ªåŠ¨è¡¥ permissionsã€icons ç­‰</li>
</ul>
<p><strong>è¿™æ ·å¯ä»¥é¿å…å¤§é‡ä½çº§é”™è¯¯ï¼Œå¹¶è®© Agent è¾“å‡ºæ›´ç¨³å®šã€‚</strong></p>
<hr/>
<h3 data-id="heading-7"><strong>3. æ–‡æ¡ˆã€é¢œè‰²ç­‰å‚æ•°ä¸è¦å†™æ­»ï¼Œåº”è¯¥â€œå˜é‡åŒ–â€å¤„ç†</strong></h3>
<p>æœ€åˆ instruction ä¸­å†™çš„æ˜¯ï¼š</p>
<ul>
<li>æŒ‰é’®æ–‡å­—å›ºå®š</li>
<li>æç¤ºæ–‡å­—å›ºå®š</li>
<li>ç›®æ ‡é¢œè‰²å›ºå®šä¸ºâ€œç»¿è‰²â€</li>
</ul>
<p>è¿™ç§å†™æ³•å¯¹ä¸€æ¬¡æ€§ä»»åŠ¡æ²¡é—®é¢˜ï¼Œä½†å¯¹æ’ä»¶å¼€å‘éå¸¸ä¸å‹å¥½ã€‚</p>
<h4 data-id="heading-8">ğŸ”§ å»ºè®®ï¼šåœ¨ Trae å·¥ä½œæµç¨‹ä¸­åŠ å…¥å‚æ•°åŒ–</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>targetColor = "#00FF00"</code></li>
<li><code>buttonLabel = "æ”¹å˜é¢œè‰²"</code></li>
<li><code>popupTitle = "æ”¹å˜èƒŒæ™¯é¢œè‰²"</code></li>
<li><code>htmlTip = "ç‚¹å‡»æŒ‰é’®å°†é¡µé¢å˜æˆç»¿è‰²"</code></li>
</ul>
<p>ç„¶åè‡ªåŠ¨æ³¨å…¥åˆ° popup é¡µé¢ä¸­ã€‚</p>
<p>è¿™æ ·ä½ å°±å¯ä»¥è½»æ¾æ‰©å±•åˆ°ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰é¢œè‰²</li>
<li>å¤šä¸»é¢˜åˆ‡æ¢</li>
<li>ç”¨æˆ·é€‰æ‹©é¢œè‰²</li>
<li>è®°å¿†ä¸Šæ¬¡è®¾ç½®</li>
</ul>
<p>è®©åŒä¸€ä¸ªæµç¨‹èƒ½è¦†ç›–æ›´å¤šåŠŸèƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. Trae å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ READMEï¼Œè¿™ä¸€æ­¥ä¸è¦å¿½ç•¥</strong></h3>
<p>å¾ˆå¤š Chrome æ’ä»¶æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ <strong>æ²¡æœ‰ README</strong>ã€‚<br/>
è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>è‡ªå·±è¿‡å‡ å¤©å†çœ‹å¿˜å¾—ä¸€å¹²äºŒå‡€</li>
<li>ä¸Šä¼  GitHub æ¯«æ— å¯è¯»æ€§</li>
<li>æƒ³å‘å¸ƒåˆ° Chrome å•†åº—è¿˜å¾—é‡æ–°å†™è¯´æ˜</li>
</ul>
<p>Trae å®Œå…¨å¯ä»¥è‡ªåŠ¨å¸®ä½ ç”Ÿæˆè¿™äº›å†…å®¹ï¼š</p>
<ul>
<li>æ’ä»¶ç®€ä»‹</li>
<li>ä½¿ç”¨æ–¹å¼</li>
<li>é¡¹ç›®ç»“æ„</li>
<li>æƒé™è¯´æ˜</li>
<li>ä¸‹ä¸€æ­¥æ‰©å±•è®¡åˆ’</li>
</ul>
<p><strong>çœäº‹ã€çœå¿ƒã€çœæ—¶é—´ã€‚</strong></p>
<hr/>
<h3 data-id="heading-10"><strong>5. æµç¨‹é‡Œç¼ºå°‘â€œè‡ªåŠ¨è°ƒè¯•æç¤ºâ€ï¼Œç¬¬ä¸€æ¬¡åšæ’ä»¶çš„ä½“éªŒä¼šå¾ˆç—›è‹¦</strong></h3>
<p>Trae å¯ä»¥ç”Ÿæˆä»£ç ï¼Œä½†å®ƒä¸èƒ½åŠ è½½æµè§ˆå™¨æ’ä»¶ï¼›<br/>
è€Œåˆæ¬¡åšæ‰©å±•çš„å¼€å‘è€…æœ€å¸¸é‡åˆ°çš„é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆ popup ä¸æ˜¾ç¤ºï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆç‚¹å‡»æ²¡ååº”ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ manifest æŠ¥é”™ï¼Ÿ</li>
</ul>
<p>æ‰€ä»¥æˆ‘ç»™æµç¨‹åŠ äº†ä¸€æ®µâ€œè‡ªåŠ¨è°ƒè¯• checklistâ€ä½œä¸ºæœ€åè¾“å‡ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ‰“å¼€ Chrome æ‰©å±•ç¨‹åºç®¡ç†é¡µé¢
<span class="hljs-bullet">2.</span> å¯ç”¨å¼€å‘è€…æ¨¡å¼
<span class="hljs-bullet">3.</span> åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº
<span class="hljs-bullet">4.</span> æ£€æŸ¥ popup æ˜¯å¦æ­£å¸¸å¼¹å‡º
<span class="hljs-bullet">5.</span> æ§åˆ¶å°æ˜¯å¦æŠ¥é”™
<span class="hljs-bullet">6.</span> é¢œè‰²æ˜¯å¦æˆåŠŸæ”¹å˜
</code></pre>
<p>è¿™ç§â€œæ£€æŸ¥å•â€æå…¶å®ç”¨ï¼Œå°¤å…¶å¯¹æ–°äººå‹å¥½ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>6. icons æ–‡ä»¶çš„æ ¡éªŒå¾ˆé‡è¦ï¼Œä½†å®¹æ˜“è¢«å¿½ç•¥</strong></h3>
<p>æŒ‡æ˜â€œä½¿ç”¨ icons æ–‡ä»¶å¤¹é‡Œçš„å›¾æ ‡â€å¹¶ä¸ä»£è¡¨ Agent ä¼šï¼š</p>
<ul>
<li>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>åç§°æ˜¯å¦è§„èŒƒ</li>
<li>manifest æ˜¯å¦æ­£ç¡®å¼•ç”¨</li>
</ul>
<p>å»ºè®®ä½ è®© Trae è‡ªåŠ¨ç¡®è®¤ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">icons/
<span class="hljs-bullet">  -</span> 16.png
<span class="hljs-bullet">  -</span> 48.png
<span class="hljs-bullet">  -</span> 128.png
</code></pre>
<p>å¹¶ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"16"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/16.png"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"48"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/48.png"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"128"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/128.png"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™å¯ä»¥é¿å… Chrome ä¸€ç›´æŠ¥å›¾æ ‡æ‰¾ä¸åˆ°çš„çƒ¦äººé—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-12">è¿™ 6 ä¸ªä¼˜åŒ–ç‚¹èƒ½è®© Trae é¡¹ç›®æ›´åŠ ä¼˜ç§€</h2>








































<table><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>ä¸ºä»€ä¹ˆå€¼å¾—åšï¼Ÿ</th><th>èƒ½å¸¦æ¥ä»€ä¹ˆå˜åŒ–ï¼Ÿ</th></tr></thead><tbody><tr><td>Prompt æ¨¡å—åŒ–</td><td>å‡å°‘é‡å¤å·¥ä½œ</td><td>æ¯æ¬¡åšæ’ä»¶éƒ½èƒ½å¤ç”¨</td></tr><tr><td>æ–‡ä»¶ç”Ÿæˆæ™ºèƒ½åŒ–</td><td>é™ä½ç»“æ„é—®é¢˜</td><td>é¡¹ç›®æ›´â€œæ ‡å‡†åŒ–â€</td></tr><tr><td>å‚æ•°åŒ–å¤„ç†</td><td>æé«˜æ‰©å±•æ€§</td><td>å¤šåŠŸèƒ½æ’ä»¶è½»æ¾åš</td></tr><tr><td>è‡ªåŠ¨ README</td><td>æ–‡æ¡£ä¸å†é—æ¼</td><td>å¯å‘å¸ƒã€å¯ç»´æŠ¤</td></tr><tr><td>è°ƒè¯•æç¤º</td><td>å¿«é€Ÿæ’é”™</td><td>å¼€å‘æ›´é¡ºæ»‘</td></tr><tr><td>icons æ ¡éªŒ</td><td>é¿å… manifest é”™è¯¯</td><td>å›¾æ ‡ç¨³å®šæ˜¾ç¤º</td></tr></tbody></table>
<p>Trae çš„å¼ºå¤§ä¸åœ¨äºè®©ä½ å°‘å†™å¤šå°‘ä»£ç ï¼Œè€Œåœ¨äºå¸®ä½  <strong>æŠŠæµç¨‹å˜å¾—æ›´è‡ªåŠ¨åŒ–ã€æ›´å¯å¤ç”¨ã€æ›´å¯æ‰©å±•</strong>ã€‚<br/>
åªè¦æŠŠè¿™äº›ä¼˜åŒ–ç‚¹åšåˆ°ä½ï¼Œä½ ä¹‹åå¼€å‘ Chrome æ’ä»¶çš„æ•ˆç‡ä¼šæˆå€æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pwaå®ç°åŠ¨æ€start_urlå’Œscopeç­‰å®ç°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7574269207362453513</link>    <guid>https://juejin.cn/post/7574269207362453513</guid>    <pubDate>2025-11-19T11:47:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574269207362453513" data-draft-id="7574254039023534106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pwaå®ç°åŠ¨æ€start_urlå’Œscopeç­‰å®ç°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T11:47:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024å°ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/70007368988926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pwaå®ç°åŠ¨æ€start_urlå’Œscopeç­‰å®ç°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/70007368988926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024å°ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T11:47:38.000Z" title="Wed Nov 19 2025 11:47:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘çš„å¼€æºé¡¹ç›®PakePluså¯ä»¥å°†ç½‘é¡µ/Vue/Reacté¡¹ç›®æ‰“åŒ…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨å¹¶ä¸”å°äº5Måªéœ€å‡ åˆ†é’Ÿï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpakeplus.com" target="_blank" title="https://pakeplus.com" ref="nofollow noopener noreferrer">pakeplus.com</a></p><p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6efa95aecf914071a661c688fb776aad~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1968" loading="lazy"/></p><p/>
<p>è¦æƒ³å®ç°åŠ¨æ€çš„start_urlï¼Œæ¯”å¦‚å®šåˆ¶ä¸åŒçš„è·¯å¾„æˆ–è€…æ·»åŠ å‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™æ®µä»£ç ï¼Œä½†æ˜¯ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªåœ¨safariä¸­ä¸ç”Ÿæ•ˆï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯ipadè®¾å¤‡æˆ–è€…iosè®¾å¤‡æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œè¿™ä¸ªæ˜¯å‘</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">transformManifest</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'transformManifest'</span>)
    <span class="hljs-keyword">const</span> url = <span class="hljs-string">'/manifest.webmanifest'</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'url'</span>, url)
    <span class="hljs-keyword">const</span> manifest = <span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)).<span class="hljs-title function_">json</span>()
    <span class="hljs-keyword">const</span> path = location.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>)
    <span class="hljs-keyword">const</span> newPath =
        path &amp;&amp; provideruuid &amp;&amp; stationeuuid
            ? <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span> +
              <span class="hljs-string">'?provideruuid='</span> +
              provideruuid +
              <span class="hljs-string">'&amp;stationeuuid='</span> +
              stationeuuid
            : <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'newPath'</span>, newPath)
    manifest.<span class="hljs-property">start_url</span> = newPath
    manifest.<span class="hljs-property">scope</span> = newPath
    manifest.<span class="hljs-property">id</span> = <span class="hljs-string">'/'</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'manifest'</span>, manifest)
    <span class="hljs-keyword">const</span> manifestString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(manifest)
    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([manifestString], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span> })
    <span class="hljs-keyword">const</span> manifestURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob)
    <span class="hljs-variable language_">document</span>
        .<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'[rel="manifest"]'</span>)
        ?.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'href'</span>, manifestURL)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(manifestURL)
}</code></pre>
<p/>
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯1024å°ç¥ï¼ŒæŠ€æœ¯ç¾¤ / ç§æ´»ç¾¤ / è‚¡ç¥¨ç¾¤ æˆ– äº¤æœ‹å‹ éƒ½å¯ä»¥ç§ä¿¡æˆ‘ã€‚
å¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (ç‚¹èµã€è¯„è®ºã€å…³æ³¨)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pnpm æ‹‰å–githubçš„n8né¡¹ç›®è¿è¡Œ]]></title>    <link>https://juejin.cn/post/7574270661872386086</link>    <guid>https://juejin.cn/post/7574270661872386086</guid>    <pubDate>2025-11-19T12:05:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574270661872386086" data-draft-id="7574040813750370355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pnpm æ‹‰å–githubçš„n8né¡¹ç›®è¿è¡Œ"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC"/> <meta itemprop="datePublished" content="2025-11-19T12:05:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å§œå§œå°å¦"/> <meta itemprop="url" content="https://juejin.cn/user/3069492196290718"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pnpm æ‹‰å–githubçš„n8né¡¹ç›®è¿è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3069492196290718/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å§œå§œå°å¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T12:05:52.000Z" title="Wed Nov 19 2025 12:05:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰è¨€ï¼š</p>
<blockquote>
<p>æœ¬æ–‡ç« æ—¨åœ¨è®°å½•å•çº¯é€šè¿‡pnpmæ‹‰å–æ‹‰å–githubå¼€æºé¡¹ç›®n8nå¹¶æˆåŠŸè¿è¡ŒæœŸé—´é‡åˆ°çš„é—®é¢˜</p>
<p>å·²é€€å‘å¤šå¹´ï¼Œç§ä¿¡å¯èƒ½ä¸åŠæ—¶å›å¤ï¼Œè¯·è°…è§£ï¼ˆå·²æ¢ç”¨æˆ·åç”±â€œé¬¼å°å¦â€æ”¹ä¸ºâ€œå§œå§œå°å¦â€ï¼‰</p>
</blockquote>
<p><code>è¯·ç¡®ä¿å·²å®‰è£…gitåŠnvm</code>ï¼Œæˆ–ç§»æ­¥
ä¸“æ æ–‡ç« <a href="https://juejin.cn/column/7122745024520912903" target="_blank" title="https://juejin.cn/column/7122745024520912903">å‰ç«¯ç¯å¢ƒæ­å»ºä¸å‡†å¤‡</a>å®‰è£…gitåŠnvmåå†å›æ¥</p>
<h2 data-id="heading-0">æµç¨‹</h2>
<ul>
<li>1.<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fn8n-io%2Fn8n" target="_blank" title="https://github.com/n8n-io/n8n" ref="nofollow noopener noreferrer"><strong>åœ¨githubä¸Šä¸‹è½½n8né¡¹ç›®</strong></a></li>
<li>2.<strong>åˆ‡æ¢æˆ–ä¸‹è½½ <code>"node"</code>: "&gt;=22.16", <code>"pnpm"</code>: "&gt;=10.22.0"</strong></li>
<li>3.<strong>pnpm installå®‰è£…ä¾èµ–</strong>ï¼Œï¼ˆå‡ºé”™åæ¸…é™¤pnpmç¼“å­˜åˆ é™¤node_moudlesä¾èµ–åŒ…åé‡è¯•ï¼‰</li>
<li>4.<strong>pnpm build æ‰“åŒ…é¡¹ç›®</strong>ï¼ˆæ‰“åŒ…å‡ºé”™å¤§éƒ¨åˆ†æ˜¯ä¾èµ–å®‰è£…é—®é¢˜è¯·é‡å¤æ‰§è¡Œæ­¥éª¤3ï¼‰
<ul>
<li><code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></li>
</ul>
</li>
<li>5.<strong>pnpm startè¿è¡Œé¡¹ç›®</strong>
<ul>
<li>å‡ºé”™è¯·æ£€æŸ¥æ‰“åŒ…åæ˜¯å¦æœ‰packages\cli\dist\configæ˜¯å¦å­˜åœ¨ï¼Œ5678ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œå…¨å±€å®‰è£…çš„n8nä¾èµ–åŒ…æ˜¯å¦æ­£åœ¨å¯åŠ¨ï¼ˆæˆ‘æ˜¯ç›´æ¥åˆ é™¤äº†npmå…¨å±€å®‰è£…è·¯å¾„çš„n8nï¼Œéå½“å‰é¡¹ç›®ä¾èµ–ï¼‰</li>
</ul>
</li>
</ul>
<p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h2 data-id="heading-1">1. ä¸‹è½½n8n</h2>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±å–œå¥½git cloneä¸‹è½½æˆ–è€…ä¸‹è½½zipåè§£å‹ï¼Œä¸¤ç§æ–¹å¼ä¸‹è½½ååŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯zipæ–¹å¼ä¼šå¿«ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-2">æ–¹å¼1ï¼šé€šè¿‡git cloneä¸‹è½½</h3>
<p>ä½ å¯ä»¥ç›´æ¥é€šè¿‡git cloneä¸‹è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js">git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/n8n-io/n8n.git</span>
</code></pre>
<h3 data-id="heading-3">æ–¹å¼2ï¼šé€šè¿‡ä¸‹è½½zipè§£å‹</h3>
<blockquote>
<p>ä¸ºäº†é¿å…ç”±äºç½‘ç»œç­‰åŸå› å¯¼è‡´ä¸‹è½½ä¸å®Œæ•´æˆ–å¤±è´¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯é€šè¿‡ä¸‹è½½zipåŒ…è§£å‹æ–¹å¼è¿›è¡Œã€‚</p>
</blockquote>
<p>è¿›å…¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fn8n-io%2Fn8n" target="_blank" title="https://github.com/n8n-io/n8n" ref="nofollow noopener noreferrer">github.com/n8n-io/n8n</a> ä¸‹è½½zip</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b544be508ce04f50985155538d7beebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=AAoHbT69xD8oFHflwx2TEkGOV9Y%3D" alt="image.png" loading="lazy"/></p>
<p>æŠŠä¸‹è½½å¥½çš„å‹ç¼©åŒ…ï¼ˆ25Må·¦å³ï¼‰è§£å‹åˆ°n8n-masterï¼ˆ73.7Må·¦å³ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfaa9960707245f3ada1f939df35eb6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=FNZHo7C%2FSTEoB6Ps5eWgTzlMsbc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c798438271e34fb0845c6624aac17837~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=g0TG7KZ4bwo7mFCsAgnN85U9wss%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">2. åˆ‡æ¢nodeç‰ˆæœ¬å¹¶ä¸‹è½½pnpm</h2>
<p>æˆ‘ä»¬æŸ¥çœ‹é¡¹ç›®package.jsonæ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºnodeå’Œpnpmæ˜¯éœ€è¦å›ºå®šç‰ˆæœ¬åŠä»¥ä¸Šçš„ï¼Œå¦‚ä¸‹</p>
<blockquote>
<p>"node": "&gt;=22.16",</p>
<p>"pnpm": "&gt;=10.22.0"</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d5087e6f714be384a294d4fb7bfd8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=1PwJZIRf7KxS77DD1oBr8r%2FmFXs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">2.1 å®‰è£…node 22.16.0</h3>
<p>ç”±äºæˆ‘æ˜¯ä½¿ç”¨nvmç®¡ç†nodeç‰ˆæœ¬ï¼Œæˆ‘æ˜¯é€šè¿‡cmdç®¡ç†å‘˜èº«ä»½è¿è¡Œnvmä¸‹è½½node22.16.0</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b822db2501e74f63817236fa25e78bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=Opi9XdyYC5OR9MAlCK8uuFYBXhA%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨nvmä¾æ¬¡è¾“å…¥å‘½ä»¤è¡Œ</p>
<pre><code class="hljs language-js" lang="js">nvm install <span class="hljs-number">22.16</span><span class="hljs-number">.0</span>
nvm use <span class="hljs-number">22.16</span><span class="hljs-number">.0</span>
nvm ls
</code></pre>
<p>å…³äºä½¿ç”¨nvmç®¡ç†nodeç‰ˆæœ¬ä¸å†ä»‹ç»ï¼Œè¯·ç§»æ­¥æŸ¥çœ‹
ä¸“æ æ–‡ç« <a href="https://juejin.cn/column/7122745024520912903" target="_blank" title="https://juejin.cn/column/7122745024520912903">å‰ç«¯ç¯å¢ƒæ­å»ºä¸å‡†å¤‡</a>---&gt; <a href="https://juejin.cn/post/7120267871950733320" target="_blank" title="https://juejin.cn/post/7120267871950733320"> <code>nvmå®‰è£…ä¸é…ç½®</code> </a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd8f9bcccdad497aa59a05cf62690878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=5CBoNdJk3Q6tiC6ILXujWNMY7Q8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">2.2 å®‰è£…pnpm 10.22.0</h3>
<p>npmå…¨å±€å®‰è£…pnpm 10.22.0</p>
<pre><code class="hljs language-js" lang="js">npm install -g pnpm@<span class="hljs-number">10.22</span><span class="hljs-number">.0</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/071fd908bad745a3b622fd7d5f33ffc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=Hk8oFuv6%2FMEn3C3fJfR5tgxVDUc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">3. é¡¹ç›®è¿è¡Œå‰å‡†å¤‡</h2>
<h3 data-id="heading-8">3.1 pnpm installå®‰è£…æ¨¡å—ä¾èµ–</h3>
<p>é€šè¿‡pnpm installè¿›è¡Œé¡¹ç›®ä¾èµ–å®‰è£…ï¼ˆé»˜è®¤å›½å¤–çš„ä¸‹è½½æºéœ€è¦ç½‘ç»œéå¸¸å¥½ï¼Œç½‘ç»œå·®å¯èƒ½å¯¼è‡´ä¾èµ–ä¸‹è½½å¤±è´¥ï¼‰</p>
<pre><code class="hljs language-js" lang="js">pnpm install
</code></pre>
<p>å¦‚æœè§‰å¾—ä¾èµ–å®‰è£…å¤ªæ…¢ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šä¸‹è½½æºï¼ˆé•œåƒï¼‰æ¥å®‰è£…ï¼ˆå¯èƒ½ä¼šå­˜åœ¨æºåº“ä¸­ç¼ºå¤±æŸäº›ä¾èµ–é—®é¢˜ï¼‰</p>
<pre><code class="hljs language-js" lang="js">pnpm install --registry <span class="hljs-attr">https</span>:<span class="hljs-comment">//registry.npmmirror.com/</span>
</code></pre>
<p>ä¾èµ–ä¸‹è½½å¤±è´¥åï¼Œé‡æ–°å®‰è£…æœªæˆåŠŸçš„é—®é¢˜å¦‚å›¾ï¼Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e79ae91517e549cb82f700c90532b12f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=lsgx9CNjqy5bZKnMzEAIAySMzew%3D" alt="image.png" loading="lazy"/>
è¯·æŒ‰ä»¥ä¸‹æ“ä½œï¼š</p>
<p>1.åˆ é™¤å­˜å‚¨ä¸­æœªè¢«ä»»ä½•é¡¹ç›®ä½¿ç”¨çš„åŒ…ç‰ˆæœ¬</p>
<pre><code class="hljs">pnpm store prune
</code></pre>
<p>2.åˆ é™¤node_modulesæ–‡ä»¶å¤¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span> -rf node_modules
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9643fb85cb25489194a9f9adfd9ad173~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=Jw9kweuIrHy%2Fztuw%2F8S0emE1w4E%3D" alt="image.png" loading="lazy"/></p>
<p>å¿…è¦æ—¶åˆ é™¤ pnpm-lock.yamlæ–‡ä»¶ï¼Œå»ºè®®æš‚æ—¶ä¸è¦åˆ é™¤ï¼ˆæœ‰æ—¶å€™pnpm-lock.yamlä¸­çš„ç‰ˆæœ¬ä¸æˆ‘ä»¬ä¸‹è½½çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œæ‰€ä»¥ä¸€èˆ¬é¡¹ç›®é…ç½®å½“ä¸­éƒ½å¿½ç•¥æäº¤æ­¤æ–‡ä»¶ï¼‰
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99742a06bbb94fc582a5113d76c3f817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=vnX1o7PUQHA3gqRNA8axuupyssY%3D" alt="image.png" loading="lazy"/></p>
<p>3.é‡æ–°æ‰§è¡Œå¼ºåˆ¶å®‰è£…å‘½ä»¤</p>
<pre><code class="hljs language-js" lang="js">pnpm install --force
</code></pre>
<p>4.å¦‚æœä¾èµ–é‡å¤å®‰è£…å¤±è´¥ï¼Œç¼ºå¤±éƒ¨åˆ†ä¾èµ–ï¼Œåªèƒ½æ‰‹åŠ¨ä¸€ä¸ªä¸ªæ·»åŠ ï¼ˆæˆ‘å°±æ˜¯å› ä¸ºè¿™ä¸ªä¸€ç›´å¼„äº†å¾ˆä¹…ï¼‰ï¼Œ<code>å¦‚æœé‡å¤å› ä¸ºä»¥ä¸Šé—®é¢˜å¦‚ï¼šâ€œELIFECYCLEâ€‰ Command failed with exit code 1.â€ï¼Œè¯·æ‰§è¡Œä»¥ä¸Šæ­¥éª¤1åˆ°4ï¼Œéå¿…è¦è¯·å‹¿è¿›è¡Œæ­¥éª¤5æ“ä½œ</code>,ä¸€èˆ¬æœ‰é—®é¢˜éƒ½æ˜¯å› ä¸ºä¾èµ–åŒ…å®‰è£…ç¼ºå¤±é—®é¢˜ã€‚</p>
<p>5.å¦‚æœå¼ºåˆ¶å®‰è£…åæç¤ºè¡¥ä¸<code>patchedDependencies</code>ç›¸å…³ä¿¡æ¯å¯¼è‡´å®‰è£…å¤±è´¥ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<blockquote>
<p>ä¸€èˆ¬åˆ°æç¤º<code>patchedDependencies</code>å­—æ®µçš„,é‚£åŸºæœ¬ä¸Šï¼ŒæŒ‰ç…§æˆ‘åœ¨é‡å¤æ¼”ç¤ºæ­¤æµç¨‹çš„ç»éªŒï¼Œå°±æ˜¯ä¾èµ–å‡ºé”™äº†ï¼Œå³ä½¿ä½ åœ¨åˆ é™¤<code>patchedDependencies</code>å­—æ®µå†…å®¹åå®‰è£…æˆåŠŸï¼Œåç»­ä¾æ—§ä¼šåœ¨pnpm buildæ‰“åŒ…ç¯å¢ƒå‡ºç°é—®é¢˜ã€‚è¯·ä½ é‡æ–°å¼€å§‹ä¸‹è½½ä¾èµ–å®‰è£…ï¼Œå¿…è¦æ—¶è¯·ä»github ä¸‹è½½n8né¡¹ç›®è¿™ä¸ªæ­¥éª¤é‡æ–°å¼€å§‹ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5565b948d63e464294ef4d075997c3e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=bHsNuHS4%2BdiPWhKC8QBGZxrRW6c%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥å…ˆåˆ é™¤package.jsonæ–‡ä»¶å¤¹ä¸­çš„<code>patchedDependencies</code>å­—æ®µå†…å®¹ï¼Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cbebd16c757483b94bf35de6253ba83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=hdS2KbOINoiAKpELwAcW1BWstk8%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ é™¤è¡¥ä¸å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d013aeadb31443c4ad5af9842682326c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=XwoRRj2ELXb0yk1eVEXH42%2B7JRw%3D" alt="image.png" loading="lazy"/>
åˆ é™¤åï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b7ff73a03da45399d5af6a738e84ea4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=a9NbIZX9O5kKhhqLa76LyzVD2Ok%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å®‰è£…åè®°å¾—æ¢å¤è¯¥å­—æ®µå†…å®¹ã€‚å¦‚æœåˆ é™¤åé‡æ–°å®‰è£…ä¾èµ–åˆ°pnpm buildæ‰“åŒ…å‡ºç°æŠ¥é”™ <code>@n8n/imap#build</code>é—®é¢˜ï¼Œé‚£ä¸€å®šæ˜¯ä¾èµ–å®‰è£…ä¸æˆåŠŸå¯¼è‡´çš„å‡ºé”™ï¼Œä¸€èˆ¬åˆ°æç¤º<code>patchedDependencies</code>å­—æ®µçš„é‚£åŸºæœ¬ä¸Šï¼Œæˆ‘åœ¨é‡å¤æ¼”ç¤ºæ­¤æµç¨‹ç»éªŒï¼Œå°±æ˜¯ä¾èµ–å‡ºé”™äº†ï¼Œå³ä½¿ä½ åœ¨åˆ é™¤<code>patchedDependencies</code>å­—æ®µå†…å®¹åå®‰è£…æˆåŠŸï¼Œåç»­ä¾æ—§ä¼šåœ¨pnpm buildæ‰“åŒ…ç¯å¢ƒå‡ºç°é—®é¢˜ã€‚è¯·ä½ é‡æ–°å¼€å§‹ä¸‹è½½ä¾èµ–å®‰è£…ï¼Œå¿…è¦æ—¶è¯·ä»github ä¸‹è½½n8né¡¹ç›®è¿™ä¸ªæ­¥éª¤é‡æ–°å¼€å§‹ã€‚</p>
<h3 data-id="heading-9">3.2 pnpm buildé¡¹ç›®</h3>
<pre><code class="hljs language-js" lang="js">pnpm build
</code></pre>
<p>æ‰“åŒ…æˆåŠŸå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5da475ec9e549c79598705f507f1f73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=G1jOXwv2DBLNKf308Gixem2hsyA%3D" alt="image.png" loading="lazy"/></p>
<p><code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæœ‰/dist/configç›®å½•æ–‡ä»¶æ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14b629cd977842a19450ed4bc661e475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=HTqIfxfKEWhagZQ%2BtQR0%2BTmU5As%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79f2dc53ea3c452b929c2144f39d8e8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=BKtHXIqVk2Ym7f95eDx0s3TAuZI%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºä½•éœ€è¦æ‰“åŒ…</p>
<p>å½“ä½¿ç”¨<code>pnpm start</code>å‘½ä»¤è¿è¡Œé¡¹ç›®åå‡ºç°éæ¨¡å—çš„é—®é¢˜ï¼Œå¦‚æœå‡ºç° <code>Error: Cannot find module '../dist/config'</code>å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/155a5e373fad4c04a5fb8126a954e519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=OOCL4zF%2BviGRfvptS8VVVR8Cr8I%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/092e8499953746a69ce182b922e5f1d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=OBH2ljY2NTk6%2Fa1YrMOucDwmkLQ%3D" alt="75ca7dbad29450afa0a185b57735e73f.png" loading="lazy"/>
æ˜¯å› ä¸ºç¼ºå¤±æ‰“åŒ…æ–‡ä»¶ï¼ˆå¾ˆæ— è¯­çš„ï¼‰ï¼Œ<code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code>
å¯ä»¥å…ˆè¿›è¡Œæ‰“åŒ…äº§ç”Ÿbuildç›¸å…³æ–‡ä»¶ï¼Œå†è¿è¡Œpnpm start</p>
<p><code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></p>
<p>å¦‚æœé‡åˆ°å¦‚ä¸‹æ‰“åŒ…é—®é¢˜ï¼Œ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e07dc958bf4418ab58dc8bd155281e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=Uy0aRuIAb5dOkKJB%2BTZj2c4SPqQ%3D" alt="image.png" loading="lazy"/></p>
<p>æŠ¥é”™ <code>@n8n/imap#build</code>é—®é¢˜ï¼Œè¯·é‡æ–°å®‰è£…ä¾èµ–ï¼Œæˆ‘è¯•è¿‡å¾ˆå¤šæ¬¡ï¼Œé‡å¤æ“ä½œéƒ½é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè€Œåæˆ‘é‡æ–°é‡å¯ï¼Œè§£å‹ä¸‹è½½çš„n8né¡¹ç›®åŒ…é‡æ–°ä¸‹è½½ä¾èµ–ï¼Œåˆ é™¤ä¾èµ–node_moudlesåŒ…</p>
<h2 data-id="heading-10">4. è¿è¡Œé¡¹ç›®</h2>
<p><code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæœ‰/dist/configç›®å½•æ–‡ä»¶æ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></p>
<pre><code class="hljs language-js" lang="js">pnpm start
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/344dc4f757a340488e5b980c876f9a5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=ViHNZeV9BRwqXYGa0N%2BawcDeUoA%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€è¿è¡Œç«¯å£å°±å¯ä»¥çœ‹åˆ°é¡µé¢
<code>ï¼ˆé¦–æ¬¡è¿›å…¥é¡µé¢éœ€è¦è¿›è¡Œç™»å½•æ³¨å†Œï¼‰</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfb12dc4913245c29a6ff469a49b28a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=VA%2BgSDScQ5hPR5g5VtWy83x3RLY%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœè¿è¡Œé¡¹ç›®å‡ºç°å¦‚ä¸‹é—®é¢˜<code>EntityMetadataNotFoundError: No metadata for "InstalledPackages" was found.</code>ï¼Œè¯·æ£€æŸ¥å…¨å±€å®‰è£…åŒ…æˆ–è€…n8nçš„é»˜è®¤ç«¯å£å ç”¨æƒ…å†µï¼Œæˆ‘ä¹‹å‰å…¨å±€å®‰è£…è¿‡n8nï¼Œç„¶åæˆ‘åˆ é™¤ä¹‹åï¼Œé‡æ–°è¿è¡Œpnpm startå‘½ä»¤å°±å¯ä»¥æ­£å¸¸å¯åŠ¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/897b6689071f4f138be184bda559a41f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=%2FWdYj6DKe7cB45NJeurEbaIdV%2FA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af488980a1744e5f8a7247a16561d2a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=RSeanGEkj1DHYdyAhDQF8ySmVRk%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœå‡ºç° <code>Error: Cannot find module '../dist/config'</code>å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/155a5e373fad4c04a5fb8126a954e519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=OOCL4zF%2BviGRfvptS8VVVR8Cr8I%3D" alt="image.png" loading="lazy"/>
è¯·å…ˆè¿›è¡Œ pnpm buildæ‰“åŒ…æˆåŠŸç”Ÿæˆdistæ–‡ä»¶å¤¹åå†è¿›è¡Œpnpm startå¯åŠ¨é¡¹ç›®ï¼Œ
<code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæœ‰/dist/configç›®å½•æ–‡ä»¶æ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14b629cd977842a19450ed4bc661e475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=HTqIfxfKEWhagZQ%2BtQR0%2BTmU5As%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79f2dc53ea3c452b929c2144f39d8e8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aec5aec5bCP5aae:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764167650&amp;x-signature=BKtHXIqVk2Ym7f95eDx0s3TAuZI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">5.æµç¨‹å¤ç›˜</h2>
<ul>
<li>1.<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fn8n-io%2Fn8n" target="_blank" title="https://github.com/n8n-io/n8n" ref="nofollow noopener noreferrer"><strong>åœ¨githubä¸Šä¸‹è½½n8né¡¹ç›®</strong></a></li>
<li>2.<strong>åˆ‡æ¢æˆ–ä¸‹è½½ <code>"node"</code>: "&gt;=22.16", <code>"pnpm"</code>: "&gt;=10.22.0"</strong></li>
<li>3.<strong>pnpm installå®‰è£…ä¾èµ–</strong>ï¼Œï¼ˆå‡ºé”™åæ¸…é™¤pnpmç¼“å­˜åˆ é™¤node_moudlesä¾èµ–åŒ…åé‡è¯•ï¼‰</li>
<li>4.<strong>pnpm build æ‰“åŒ…é¡¹ç›®</strong>ï¼ˆæ‰“åŒ…å‡ºé”™å¤§éƒ¨åˆ†æ˜¯ä¾èµ–å®‰è£…é—®é¢˜è¯·é‡å¤æ‰§è¡Œæ­¥éª¤3ï¼‰
<ul>
<li><code>å¿…é¡»æ‰“åŒ…æˆåŠŸåæ‰å¯æˆåŠŸpnpm startè¿è¡Œé¡¹ç›®</code></li>
</ul>
</li>
<li>5.<strong>pnpm startè¿è¡Œé¡¹ç›®</strong>
<ul>
<li>å‡ºé”™è¯·æ£€æŸ¥æ‰“åŒ…åæ˜¯å¦æœ‰packages\cli\dist\configæ˜¯å¦å­˜åœ¨ï¼Œ5678ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œå…¨å±€å®‰è£…çš„n8nä¾èµ–åŒ…æ˜¯å¦æ­£åœ¨å¯åŠ¨ï¼ˆæˆ‘æ˜¯ç›´æ¥åˆ é™¤äº†npmå…¨å±€å®‰è£…è·¯å¾„çš„n8nï¼Œéå½“å‰é¡¹ç›®ä¾èµ–ï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-12">ä½œè€…å·²é€€å‘ï¼Œç§ä¿¡è¯„è®ºä¸åŠæ—¶ï¼Œè¯·è°…è§£</h2>
<p>ä¸ªäººè®¤ä¸ºdockeréƒ¨ç½²ä¼šæ›´ç®€å•ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æƒ³å°±æ˜¯å•çº¯ç ”ç©¶n8næºç ï¼Œé‚£ä¹ˆæœ¬ç¯‡æ–‡ç« å‡ºç°çš„é—®é¢˜å¯ä»¥ä½œä¸ºå‚è€ƒï¼Œå¦‚æœä½ æ˜¯æƒ³æŠŠn8né›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œæœ€å¥½çš„æƒ…å†µå°±æ˜¯vue3ä½œä¸ºå£³å¼•å…¥n8nï¼Œå»ºè®®æ˜¯ï¼š
vue3+n8n+axiosï¼ˆè¯·æ±‚ï¼‰+CORSï¼ˆè·¨åŸŸï¼‰+Piniaæˆ–Vuexï¼ˆæ•°æ®å­˜å‚¨æˆ–å…±äº«ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å»å™ªæ‰©æ•£æ¨¡å‹ï¼Œæ ¹æœ¬ä¸å»å™ªï¼Ÿä½•æºæ˜æ–°è®ºæ–‡å›å½’ã€Œå»å™ªã€æœ¬è´¨]]></title>    <link>https://juejin.cn/post/7574568258788573235</link>    <guid>https://juejin.cn/post/7574568258788573235</guid>    <pubDate>2025-11-20T01:49:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574568258788573235" data-draft-id="7574318108719693870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å»å™ªæ‰©æ•£æ¨¡å‹ï¼Œæ ¹æœ¬ä¸å»å™ªï¼Ÿä½•æºæ˜æ–°è®ºæ–‡å›å½’ã€Œå»å™ªã€æœ¬è´¨"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-11-20T01:49:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å»å™ªæ‰©æ•£æ¨¡å‹ï¼Œæ ¹æœ¬ä¸å»å™ªï¼Ÿä½•æºæ˜æ–°è®ºæ–‡å›å½’ã€Œå»å™ªã€æœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T01:49:27.000Z" title="Thu Nov 20 2025 01:49:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¯¼è¯»</p>
<p>é«˜è´¨é‡çš„å›¾åƒç”Ÿæˆå¦‚ä»Šå‡ ä¹éƒ½ç”±æ‰©æ•£æ¨¡å‹å®ç°ã€‚ä»è‰ºæœ¯åˆ›ä½œåˆ°å•†ä¸šè®¾è®¡ï¼Œä»äººè„¸ç”Ÿæˆåˆ°è‡ªç„¶åœºæ™¯åˆæˆï¼ŒåŸºäºæ‰©æ•£çš„ç”Ÿæˆæ¨¡å‹å·²ç»æˆä¸ºå¤šæ¨¡æ€é¢†åŸŸçš„é‡è¦åŸºçŸ³ã€‚</p>
<p>ä½†æœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œ<strong>ã€Œå»å™ªæ‰©æ•£æ¨¡å‹ã€å®é™…ä¸Šå¹¶æ²¡æœ‰åšåˆ°ã€Œå»å™ªã€ï¼Ÿ</strong></p>
<p>ResNet ä¹‹çˆ¶ã€è¶…70ä¸‡å¼•ç”¨çš„ AI å¤§ç¥ä½•æºæ˜çš„æ–°è®ºæ–‡ã€ŠBack to Basics: Let Denoising Generative Models Denoiseã€‹æ•é”åœ°æ•æ‰äº†è¿™ä¸€ç°è±¡ï¼Œå¹¶å¸¦é¢†æ‰©æ•£æ¨¡å‹å›å½’å…¶æœ€åˆçš„æœ¬æºã€‚&gt;&gt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkzOTg3NTAyNA%3D%3D%26mid%3D2247488797%26idx%3D2%26sn%3D27701bde826862b6a70302fd32f752c0%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkzOTg3NTAyNA==&amp;mid=2247488797&amp;idx=2&amp;sn=27701bde826862b6a70302fd32f752c0&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ›´å¤šèµ„è®¯å¯åŠ å…¥CVæŠ€æœ¯ç¾¤è·å–äº†è§£å“¦</a></p>
<p>åœ¨å¦‚ä»Šçš„å¤§æ¨¡å‹æ—¶ä»£ï¼Œæ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelsï¼‰å‡ ä¹ç»Ÿæ²»äº†å›¾åƒç”Ÿæˆé¢†åŸŸï¼šä»Â Stable Diffusionã€FluxÂ åˆ°å„ç§Â rectified flowï¼Œå¤§å¤šæ•°æ–¹æ³•éƒ½éµå¾ªä¸€ä¸ªâ€œé»˜è®¤å¥—è·¯â€â€”â€”è®©ç¥ç»ç½‘ç»œé¢„æµ‹ å™ªå£°ï¼ˆÎµï¼‰ æˆ– æ··åˆäº†å™ªå£°çš„æ•°æ®ï¼ˆvï¼‰ã€‚</p>
<p>ä½† MIT ä¸ä½•æºæ˜ï¼ˆKaiming Heï¼‰ç»™è¿™ä¸€é€»è¾‘æ¥äº†ä¸€ä¸ªæ¼‚äº®çš„åå‘è´¨ç–‘ï¼š</p>
<p>æ—¢ç„¶å«åšâ€œå»å™ªæ¨¡å‹â€ï¼Œä¸ºä»€ä¹ˆä¸çœŸæ­£è®©æ¨¡å‹å»é¢„æµ‹â€œå¹²å‡€çš„å›¾åƒâ€ï¼Ÿ</p>
<p>ä»–ä»¬æå‡ºçš„ç­”æ¡ˆå°±æ˜¯â€”â€”é¢„æµ‹å¹²å‡€å›¾åƒ xï¼Œæ‰æ˜¯æ‰©æ•£æ¨¡å‹åœ¨é«˜ç»´ç©ºé—´ä¸­æ›´è‡ªç„¶ã€æ›´æœ‰æ•ˆçš„æ–¹å¼ã€‚</p>
<p>å¹¶ç”±æ­¤å¸¦æ¥äº†ä¸€ä¸ªæç®€ã€å´å¼ºå¤§çš„æ–°æ¡†æ¶ï¼š</p>
<blockquote>
<p>JiTï¼šJust image Transformers</p>
<p>ä¸é¢„è®­ç»ƒã€ä¸å¯¹é½ã€ä¸ç”¨ VAEã€ä¸ç”¨é¢å¤–æŸå¤±ï¼Œåªé ä¸€ä¸ªçº¯ç²¹çš„ Vision Transformer åœ¨åƒç´ å±‚é¢åšæ‰©æ•£ã€‚</p>
</blockquote>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ‰©æ•£æ¨¡å‹è¿™äº›å¹´åç¦»äº†â€œå»å™ªâ€ï¼Ÿ</strong></h2>
<p>ä¼ ç»Ÿæ‰©æ•£ç†è®ºçš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š</p>
<p>ç»™å›¾åƒåŠ å™ªå£°ï¼Œå†å­¦ç€æŠŠå™ªå£°å»æ‰ã€‚</p>
<p>ä½†åœ¨å®è·µä¸­ï¼Œäººä»¬å‘ç°â€œé¢„æµ‹å™ªå£° Îµâ€æ¯”é¢„æµ‹å¹²å‡€å›¾åƒ x æ›´å®¹æ˜“ï¼Œæ•ˆæœæ›´å¼ºã€‚</p>
<p>äºæ˜¯æ•´ä¸ªè¡Œä¸šé»˜è®¤é‡‡ç”¨ï¼š</p>
<ul>
<li><strong>Îµ-prediction</strong></li>
<li><strong>v-predictionï¼ˆæµé€Ÿåº¦ï¼‰</strong></li>
</ul>
<p>ç„¶è€Œï¼Œè¿™é‡Œéšè—ç€ä¸€ä¸ªè¢«å¿½è§†çš„é—®é¢˜â€”â€”<strong>å™ªå£°ä¸æ˜¯â€œæ•°æ®â€ã€‚å™ªå£°æ˜¯é«˜ç»´çš„ã€æ— ç»“æ„çš„ã€‚</strong></p>
<p>è®ºæ–‡ä»â€œæµå½¢å‡è®¾ï¼ˆManifold Assumptionï¼‰â€å‡ºå‘æå‡ºï¼š</p>
<ul>
<li>çœŸæ­£çš„è‡ªç„¶å›¾åƒ ä½äºä¸€ä¸ªä½ç»´æµå½¢ä¸Š</li>
<li>ä½†å™ªå£° Îµã€é€Ÿåº¦ v åœ¨æ•´ä¸ªé«˜ç»´ç©ºé—´ä¸­å‡åŒ€åˆ†å¸ƒ</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p>é¢„æµ‹ä¸€ä¸ªâ€œç»“æ„åŒ–â€çš„å¹²å‡€å›¾åƒå¾ˆå®¹æ˜“</p>
<p>é¢„æµ‹ä¸€ä¸ªâ€œé«˜ç»´å™ªå£°â€éå¸¸éš¾</p>
<p>å°¤å…¶åœ¨åƒç´ çº§æ‰©æ•£æ¨¡å‹ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ ¼å¤–æ˜æ˜¾ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>512Ã—512Â å›¾åƒï¼Œä¸€ä¸ª patch å°±æ˜¯Â 32Ã—32Ã—3 = 3072Â ç»´</li>
<li>ViT çš„Â hidden sizeÂ å¾€å¾€æ‰Â 768ã€1024ã€1280â€¦</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<p><strong>ç½‘ç»œæ ¹æœ¬æ²¡æœ‰èƒ½åŠ›åŒæ—¶ç¼–ç å¦‚æ­¤é«˜ç»´çš„å™ªå£°ä¿¡æ¯ã€‚</strong></p>
<p>è¿™å°±å¯¼è‡´äº†ï¼šÎµ/v-prediction åœ¨é«˜ç»´åƒç´ æ‰©æ•£ä¸­å®Œå…¨å´©æºƒ</p>
<p>è€Œ MIT å’Œä½•æºæ˜çš„å®éªŒéªŒè¯äº†ï¼š<strong>åªæœ‰ x-predictionï¼ˆé¢„æµ‹å¹²å‡€å›¾åƒï¼‰èƒ½åœ¨é«˜ç»´æ¡ä»¶ä¸‹ç¨³å®šå·¥ä½œã€‚</strong></p>
<h2 data-id="heading-1"><strong>è®©æ¨¡å‹ç›´æ¥é¢„æµ‹å¹²å‡€å›¾åƒï¼ˆx-predictionï¼‰</strong></h2>
<p>ç ”ç©¶æœ€å¤§çš„è´¡çŒ®æ˜¯ éå¸¸â€œæœ´ç´ â€ä½†éå¸¸é©å‘½æ€§çš„ä¸€ç‚¹ï¼š</p>
<p><strong>æ‰©æ•£æ¨¡å‹æœ¬æ¥åº”è¯¥åšâ€œå»å™ªâ€ï¼Œæ‰€ä»¥è®©å®ƒé¢„æµ‹å¹²å‡€å›¾åƒ x æ‰æ˜¯è‡ªç„¶çš„ã€‚</strong></p>
<p>ä½•æºæ˜å›¢é˜ŸæŒ‡å‡ºï¼Œé¢„æµ‹å¹²å‡€æ•°æ®ä¸é¢„æµ‹å¸¦å™ªé‡åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„ã€‚è¿™ä¸€æ´è§åŸºäºæœºå™¨å­¦ä¹ ä¸­çš„æµå½¢å‡è®¾ï¼ˆManifold Assumptionï¼‰ã€‚</p>
<p>æµå½¢å‡è®¾è®¤ä¸ºï¼Œè‡ªç„¶å›¾åƒåœ¨é«˜ç»´åƒç´ ç©ºé—´ä¸­ä½äºä¸€ä¸ªä½ç»´æµå½¢ä¸Šã€‚å¹²å‡€å›¾åƒ ğ’™ å¯ä»¥å»ºæ¨¡ä¸ºå¤„äºæµå½¢ä¸Šï¼ˆon-manifoldï¼‰ï¼Œè€Œå™ªå£° Ïµ æˆ–æµé€Ÿåº¦ ğ’—ï¼ˆä¾‹å¦‚Â ğ’— = ğ’™ âˆ’ Ïµï¼‰åˆ™æœ¬è´¨ä¸Šå¤„äºæµå½¢ä¹‹å¤–ï¼ˆoff-manifoldï¼‰ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad7c571afb2546f0a09eaa3ddd96948b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=2tQ%2F0Ah%2FXc6esskZZmLkpHJNaU8%3D" alt="screenshot_2025-11-19_13-35-17.png" loading="lazy"/></p>
<p>è¯¥å›¾ç›´è§‚å±•ç¤ºäº†å¹²å‡€å›¾åƒä½äºä½ç»´æµå½¢ä¸Šï¼Œè€Œå™ªå£°å’Œæµé€Ÿå¤„äºæµå½¢ä¹‹å¤–çš„æœ¬è´¨å·®å¼‚</p>
<p>å› æ­¤ï¼Œè®©ç¥ç»ç½‘ç»œé¢„æµ‹å¹²å‡€å›¾åƒï¼ˆå³ ğ’™-predictionï¼‰åœ¨æœ¬è´¨ä¸Šä¸åŒäºè®©å…¶é¢„æµ‹å™ªå£°æˆ–å¸¦å™ªçš„é‡ï¼ˆå³ Ïµ/ğ’—-predictionï¼‰ã€‚</p>
<p>è¿™ä¸€å·®å¼‚åœ¨é«˜ç»´ç©ºé—´ä¸­å°¤ä¸ºå…³é”®ã€‚å½“éœ€è¦é¢„æµ‹é«˜ç»´çš„å™ªå£°æˆ–å¸¦å™ªé‡æ—¶ï¼Œç½‘ç»œéœ€è¦è¶³å¤Ÿçš„å®¹é‡æ¥ä¿ç•™æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼›è€Œé¢„æµ‹å¹²å‡€å›¾åƒæ—¶ï¼Œå³ä½¿å®¹é‡æœ‰é™çš„ç½‘ç»œä¹Ÿèƒ½æœ‰æ•ˆå·¥ä½œï¼Œå› ä¸ºå®ƒåªéœ€è¦ä¿ç•™ä½ç»´æµå½¢ä¸Šçš„ä¿¡æ¯ã€‚</p>
<p>ä»–ä»¬çš„æ ¸å¿ƒè§‚ç‚¹ï¼š</p>
<p>Â x ä½äºä½ç»´æµå½¢ï¼ŒTransformer ä¸éœ€è¦å»ºæ¨¡é«˜ç»´å™ªå£°ï¼Œåªéœ€è¦ä¿ç•™â€œå›¾åƒç»“æ„â€ã€‚</p>
<p>Â Îµ / v æ˜¯é«˜ç»´æ— ç»“æ„åˆ†å¸ƒï¼Œå™ªå£°åŒ…å« 100% çš„é«˜ç»´ä¿¡æ¯ï¼Œç½‘ç»œå¿…é¡»â€œè®°ä½å…¨éƒ¨ç»†èŠ‚â€ï¼Œéš¾åº¦æŒ‡æ•°å¢é•¿ã€‚</p>
<p>ä»–ä»¬ç”¨ä¸€ä¸ªå¾ˆæœ‰è¯´æœåŠ›çš„ç©å…·å®éªŒï¼š</p>
<p>2 ç»´çœŸå®æ•°æ®è¢«æŠ•å½±åˆ° 512 ç»´ç©ºé—´ï¼Œä½¿ç”¨åŒä¸€ä¸ªå°ç½‘ç»œç”Ÿæˆæ•°æ®</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb377f42d51c42cba0eeadf3796c594f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=P8WSukSIHGsr%2FhaAkwB4Xx25CL8%3D" alt="screenshot_2025-11-19_13-48-39.png" loading="lazy"/></p>
<p>ç»“æœå‘ç°ï¼š</p>
<p><strong>x-prediction åœ¨é«˜ç»´ç©ºé—´ä¾ç„¶èƒ½æ¢å¤æ•°æ®ç»“æ„ï¼ŒÂ Îµ å’Œ v-prediction å®Œå…¨å´©æºƒï¼Œè¿™ä¸ªç°è±¡å’Œ ImageNet åƒç´ æ‰©æ•£ä¸­çš„ç»“æœé«˜åº¦ä¸€è‡´ã€‚</strong></p>
<h2 data-id="heading-2"><strong>JiTï¼šçº¯ç²¹ã€æç®€ï¼Œå´éå¸¸å¼ºå¤§çš„åƒç´ çº§æ‰©æ•£æ¨¡å‹</strong></h2>
<p>åŸºäºÂ x-predictionï¼Œä½œè€…æå‡ºäº† <strong>JiTï¼ˆJust image Transformersï¼‰</strong> ï¼š</p>
<p>JiT ä½¿ç”¨æ™®é€šçš„Â Vision Transformerï¼Œç›´æ¥åœ¨é«˜ç»´åƒç´ å—ä¸Šè¿›è¡Œ ğ’™-predictionï¼Œæ— éœ€ä»»ä½•é¢„è®­ç»ƒã€é¢å¤–çš„æŸå¤±å‡½æ•°æˆ–å¤æ‚çš„æ¶æ„è®¾è®¡ã€‚è¿™ç§æ–¹æ³•åœ¨Â ImageNet 256Ã—256Â å’Œ 512Ã—512 åˆ†è¾¨ç‡ä¸Šå–å¾—äº†æœ‰ç«äº‰åŠ›çš„ç»“æœï¼Œè€Œåœ¨ç›¸åŒè®¾ç½®ä¸‹ï¼Œä¼ ç»Ÿçš„ Ïµ-prediction å’Œ ğ’—-prediction åˆ™ä¼šç¾éš¾æ€§åœ°å¤±è´¥ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a0e4795f10a428a8bf7e2407fe44221~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=9ha6G5nWs9CCuR3dVZ%2FSbDy%2Fdv0%3D" alt="screenshot_2025-11-19_13-42-56.png" loading="lazy"/></p>
<p>ç®€æ´çš„ViTæ¶æ„ç›´æ¥åœ¨åƒç´ å—ä¸Šè¿›è¡Œğ’™-predictionï¼Œæ— éœ€å¤æ‚è®¾è®¡</p>
<p>ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œç ”ç©¶è¿˜å‘ç°ï¼Œåœ¨åµŒå…¥å±‚å¼•å…¥ç“¶é¢ˆè®¾è®¡ï¼ˆé™ä½ç»´åº¦ï¼‰ç”šè‡³èƒ½æé«˜ç”Ÿæˆè´¨é‡ï¼Œè¿™ä¸ç»å…¸æµå½¢å­¦ä¹ çš„è§‚å¯Ÿä¸€è‡´ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405308a65f4842659badbe47cb5dd53d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=SCPCTa5dI6ZV%2BqSdGZ1DOIV9Qdg%3D" alt="screenshot_2025-11-19_13-43-52.png" loading="lazy"/></p>
<p>å³ä½¿å°†768ç»´çš„patchå‹ç¼©åˆ°16ç»´çš„å°ç“¶é¢ˆï¼Œæ¨¡å‹ä»èƒ½æœ‰æ•ˆå·¥ä½œï¼Œä¸”é€‚åº¦ç“¶é¢ˆåè€Œæå‡æ€§èƒ½</p>
<h2 data-id="heading-3"><strong>å®éªŒéªŒè¯ï¼šğ’™-prediction çš„æ˜¾è‘—ä¼˜åŠ¿</strong></h2>
<p>ä¸ºäº†éªŒè¯è¿™ä¸€ç†è®ºï¼Œç ”ç©¶å›¢é˜Ÿè¿›è¡Œäº†ç³»ç»Ÿçš„å®éªŒå¯¹æ¯”ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb332fb2b89c4c508429ee50b5eb04af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=tNmd11JqMXOHIM%2BGcgeUUQjUktU%3D" alt="screenshot_2025-11-19_13-46-20.png" loading="lazy"/></p>
<p>åœ¨ImageNet 256Ã—256æ•°æ®é›†ä¸Šï¼Œåªæœ‰ğ’™-predictionèƒ½å¤Ÿå–å¾—åˆç†ç»“æœï¼Œè€ŒÏµ-predictionå’Œğ’—-predictionéƒ½ç¾éš¾æ€§å¤±è´¥</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b55af76f6eb48a09fa282a704e0190e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=fpUhqzOi8yys6%2FhNvHMsNGcjG%2Bk%3D" alt="screenshot_2025-11-19_13-47-15.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0971e4a929ff4b6189f3cd779eb5e5f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=GU4ck4XfaFQttq8wOkF0KXfX8Js%3D" alt="screenshot_2025-11-19_13-47-22.png" loading="lazy"/></p>
<p>JiTåœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹éƒ½ä¿æŒè‰¯å¥½æ€§èƒ½ï¼Œæ˜¾ç¤ºå…¶å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›å’Œè®¡ç®—æ•ˆç‡</p>
<h2 data-id="heading-4"><strong>å¯¹AIå¼€å‘å¹³å°çš„å¯ç¤º</strong></h2>
<p>è¿™ä¸€ç ”ç©¶ä½¿å»å™ªæ‰©æ•£æ¨¡å‹å›å½’æœ¬æºï¼Œæ¢ç´¢ä¸€ç§åœ¨åŸå§‹è‡ªç„¶æ•°æ®ä¸Šæ„å»ºåŸºäº Transformer çš„æ‰©æ•£æ¨¡å‹çš„è‡ªæ´½èŒƒå¼ã€‚å®ƒä¸ä»…å¯¹è®¡ç®—æœºè§†è§‰é¢†åŸŸæœ‰é‡è¦æ„ä¹‰ï¼Œä¹Ÿä¸ºå…¶ä»–æ¶‰åŠåŸå§‹é«˜ç»´è‡ªç„¶æ•°æ®çš„é¢†åŸŸï¼ˆå¦‚è›‹ç™½è´¨ã€åˆ†å­æˆ–æ°”è±¡æ•°æ®ï¼‰æä¾›äº†å¯ç¤ºã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/911b45d10beb4b228fe652087ffacb0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208167&amp;x-signature=Qwn24aMRUbXh6npS3SMClTTbw6A%3D" alt="Coovallyæ“ä½œåŠ¨å›¾.gif" loading="lazy"/></p>
<p><strong>ï¼ï¼ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ï¼Œç«‹å³ä½“éªŒCoovallyï¼ï¼</strong></p>
<p><strong>å¹³å°é“¾æ¥ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.coovally.com" target="_blank" title="https://www.coovally.com" ref="nofollow noopener noreferrer">www.coovally.com</a></strong></p>
<p>åœ¨Coovallyè¿™æ ·çš„AIå¼€å‘å¹³å°ä¸­ï¼Œè¿™ç§ç®€æ´è€Œå¼ºå¤§çš„æ–¹æ³•å°¤ä¸ºå€¼å¾—å…³æ³¨ã€‚ Coovallyè‡´åŠ›äºç®€åŒ–AIå¼€å‘æµç¨‹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°æ„å»ºå’Œéƒ¨ç½²æ¨¡å‹ã€‚ä½•æºæ˜å›¢é˜Ÿçš„ç ”ç©¶æ–¹å‘ä¸è¿™ä¸€ç†å¿µä¸è°‹è€Œåˆâ€”â€”é€šè¿‡å‡å°‘é¢†åŸŸç‰¹å®šçš„è®¾è®¡ï¼Œä½¿ã€ŒDiffusion + Transformerã€çš„é€šç”¨èŒƒå¼èƒ½å¤Ÿåœ¨æ›´å¹¿æ³›çš„é¢†åŸŸä¸­åº”ç”¨ã€‚</p>
<h2 data-id="heading-5"><strong>æ€»ç»“</strong></h2>
<p>ä½•æºæ˜å›¢é˜Ÿçš„è¿™é¡¹å·¥ä½œæé†’æˆ‘ä»¬ï¼Œæœ‰æ—¶æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¾€å¾€æ˜¯æœ€ç›´æ¥çš„ã€‚åœ¨è¿½æ±‚å¤æ‚æ¶æ„å’Œé¢å¤–ç»„ä»¶çš„åŒæ—¶ï¼Œä¸å¦¨å›å½’åŸºç¡€ï¼Œé‡æ–°æ€è€ƒé—®é¢˜çš„æœ¬è´¨ã€‚</p>
<p>ã€Œå™ªå£°ä¸è‡ªç„¶æ•°æ®æœ¬è´¨ä¸åŒã€ï¼Œç¥ç»ç½‘ç»œçš„èƒ½åŠ›ä¸æ˜¯æ— é™çš„ï¼Œå®ƒä»¬åº”è¯¥æ›´å¥½åœ°åˆ©ç”¨è‡ªèº«çš„å®¹é‡æ¥å»ºæ¨¡æ•°æ®è€Œéå™ªå£°ã€‚åœ¨è¿™ä¸€è§†è§’ä¸‹ï¼Œğ’™-prediction çš„ä¼˜è¶Šæ€§åœ¨ hindsight çœ‹æ¥æ˜¯è‡ªç„¶è€Œç„¶çš„ç»“æœã€‚</p>
<p>éšç€è¶Šæ¥è¶Šå¤šåƒCoovallyè¿™æ ·çš„å¹³å°å°†è¿™ç±»å…ˆè¿›æŠ€æœ¯å°è£…æˆæ˜“ç”¨çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…ï¼Œé«˜è´¨é‡çš„å›¾åƒç”ŸæˆæŠ€æœ¯å°†è¢«æ›´å¹¿æ³›åœ°åº”ç”¨ï¼Œèµ‹èƒ½æ›´å¤šé¢†åŸŸçš„åˆ›æ–°å’Œå‘å±•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è§£è¯»æ·±æµ…æ‹·è´çš„ç†è§£å’Œå‡ ç§ä½¿ç”¨æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7574245125029036051</link>    <guid>https://juejin.cn/post/7574245125029036051</guid>    <pubDate>2025-11-19T12:39:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574245125029036051" data-draft-id="7574230586971291654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è§£è¯»æ·±æµ…æ‹·è´çš„ç†è§£å’Œå‡ ç§ä½¿ç”¨æ–¹æ³•"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T12:39:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeeAt"/> <meta itemprop="url" content="https://juejin.cn/user/1889440069849484"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è§£è¯»æ·±æµ…æ‹·è´çš„ç†è§£å’Œå‡ ç§ä½¿ç”¨æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1889440069849484/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeeAt
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T12:39:02.000Z" title="Wed Nov 19 2025 12:39:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ·±æ‹·è´å’Œæµ…æ‹·è´æ˜¯é¢è¯•ä¸­ç»å¸¸è¢«é—®åˆ°äº†ï¼Œç†è§£å…¶åŸç†å’Œæ·±æµ…æ‹·è´å·®å¼‚ä»¥åŠå¤šç§æ·±æµ…æ‹·è´æ–¹æ³•æ‰èƒ½ç†Ÿç»ƒåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨åšåˆ°æ¸¸åˆƒæœ‰ä½™ã€‚æœ¬æ–‡å°†ä»ä½œç”¨åŸç†åˆ°å…·ä½“ä»£ç å®ç°å’Œå¤šç§ä½¿ç”¨æ–¹æ³•è¿›è¡Œå±•å¼€è§£è¯»ã€‚</p>
<h2 data-id="heading-0">æ·±æµ…æ‹·è´çš„ç†è§£</h2>
<h3 data-id="heading-1">æµ…æ‹·è´</h3>
<p><strong>æµ…æ‹·è´</strong>ä»å­—é¢æ„ä¹‰ä¸Šå°±æ˜¯æµ…å±‚çš„æ‹·è´å¯¹è±¡ï¼Œä¸æ¶‰åŠåˆ°æ·±å±‚æ¬¡çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´åªå¤åˆ¶å¯¹è±¡è¡¨å±‚æ•°æ®ï¼Œåªæ˜¯ä¸ºåŸæ¥çš„å¯¹è±¡åˆ›å»ºæ–°çš„å†…å­˜ï¼Œä½†æ˜¯åµŒå¥—çš„å¼•ç”¨ç±»å‹ï¼ˆå¦‚ï¼šæ•°ç»„ã€å­å¯¹è±¡ï¼‰ä»ç„¶éœ€è¦ä¸åŸå¯¹è±¡å…±äº«å†…å­˜ï¼Œä¿®æ”¹å‰¯æœ¬çš„åµŒå¥—å­—æ®µä¼šåŒæ­¥å½±å“åŸå¯¹è±¡ï¼Œè¿›è€Œäº§ç”Ÿæ±¡æŸ“ã€‚</p>
<p>å…¶æ ¸å¿ƒå°±æ˜¯ï¼Œç”±äºJSçš„æ•°æ®ç±»å‹çš„å­˜å‚¨æœºåˆ¶ï¼Œ<code>åŸºæœ¬ç±»å‹</code>ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰ç›´æ¥å­˜åœ¨<strong>æ ˆ</strong>å†…å­˜ä¸­,<code>å¤æ‚ç±»å‹</code>ï¼ˆå¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰<strong>åœ¨æ ˆä¸­åªå­˜å †å†…å­˜çš„åœ°å€å¼•ç”¨ï¼Œè€Œå †å†…å­˜æ‰å­˜å®é™…çš„æ•°æ®</strong>ã€‚æµ…æ‹·è´æ—¶ï¼Œåªæ˜¯å¤åˆ¶æ ˆå†…å­˜è€Œä¸å¯¹å †å†…å­˜è¿›è¡Œå¤åˆ¶ã€‚
å¦‚å›¾ï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24232a68d5eb4e3cb90e0b3a77467118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVlQXQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764160742&amp;x-signature=%2BEu1l9Hkr%2B3i7pBF87RJIOP6%2Bns%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p>æç®€ä»£ç ç†è§£å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸå§‹å¯¹è±¡</span>
<span class="hljs-keyword">const</span> userInfo = { 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-comment">// åŸºæœ¬ç±»å‹ï¼ˆç›´æ¥å­˜åœ¨æ ˆå†…å­˜é‡Œï¼‰ </span>
    <span class="hljs-attr">address</span>: { <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> } <span class="hljs-comment">// å¤æ‚æ•°æ®ç±»å‹ï¼ˆåœ°å€å¼•ç”¨åœ¨æ ˆï¼Œå®é™…æ•°æ®åœ¨å †ï¼‰ </span>
    };
<span class="hljs-comment">// æµ…æ‹·è´ï¼šåˆ›å»ºæ–°å¯¹è±¡</span>
<span class="hljs-keyword">const</span> formData = { ...userInfo }; 
<span class="hljs-comment">// 1. å¯¹æ¯”æ–°å¯¹è±¡æœ¬èº«çš„åœ°å€</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userInfo === formData); <span class="hljs-comment">// falseï¼Œè¯´æ˜åœ°å€ä¸åŒï¼Œæ˜¯æ–°çš„å†…å­˜</span>
<span class="hljs-comment">// 2. å¯¹æ¯”åµŒå¥—addressçš„åœ°å€</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userInfo.<span class="hljs-property">address</span> === formData.<span class="hljs-property">address</span>); <span class="hljs-comment">// trueï¼Œç›¸åŒï¼Œè¯´æ˜å†…å­˜å…±äº«ï¼ŒæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªåœ°å€</span>
<span class="hljs-comment">// 3. ä¿®æ”¹åµŒå¥—å­—æ®µï¼ŒéªŒè¯æ±¡æŸ“ </span>
formData.<span class="hljs-property">address</span>.<span class="hljs-property">city</span> = <span class="hljs-string">"ä¸Šæµ·"</span>; 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userInfo.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>); <span class="hljs-comment">// è¾“å‡º"ä¸Šæµ·"ï¼Œè¯´æ˜åŸå¯¹è±¡è¢«æ±¡æŸ“äº†</span>
</code></pre>
<h3 data-id="heading-2">æ·±æ‹·è´</h3>
<p>ç†è§£äº†æµ…æ‹·è´ï¼Œæ·±æ‹·è´å°±æ˜¯<strong>å®Œå…¨å¤åˆ¶åŸå§‹å¯¹è±¡åŠæ‰€æœ‰çš„åµŒå¥—æ•°æ®</strong>ï¼Œä¼šä¸ºåŸå¯¹è±¡å’Œæ‰€æœ‰åµŒå¥—çš„å¼•ç”¨ç±»å‹ï¼ˆå¦‚æ•°ç»„ã€å­å¯¹è±¡ï¼‰åˆ›å»ºç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œå‰¯æœ¬ä¸åŸå¯¹è±¡å½»åº•éš”ç¦»ï¼Œ<strong>ä¿®æ”¹å‰¯æœ¬ä¸ä¼šå½±å“åˆ°åŸå¯¹è±¡</strong>ã€‚</p>
<h2 data-id="heading-3">æ·±æµ…æ‹·è´çš„æ–¹æ³•</h2>
<h3 data-id="heading-4">æµ…æ‹·è´çš„5ç§å¸¸ç”¨æ–¹æ³•</h3>
<p><strong>1. å¯¹è±¡å±•å¼€è¿ç®—ç¬¦<code>{...obj}</code></strong>ï¼Œæœ€ç®€æ´çš„å®ç°æ–¹å¼ï¼Œé€‚ç”¨äºæ™®é€šå¯¹è±¡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shallowCopy = { ...userInfo };
</code></pre>
<p><strong>2.æ•°ç»„å±•å¼€è¿ç®—ç¬¦</strong>,æ•°ç»„ä¸“å±æµ…æ‹·è´</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shallowCopy = { ...originArr };
</code></pre>
<p><strong><code>3.Object.assign(target,source)</code></strong>,å¯ä»¥åˆå¹¶å¤šä¸ªå¯¹è±¡ï¼Œä»…æµ…æ‹·è´æºå¯¹è±¡è¡¨å±‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shallowCopy = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},userInfo1,userInfo2,userInfo3,....);
</code></pre>
<p><strong>4.æ•°ç»„<code>slice()</code></strong>ï¼Œæ•°ç»„æˆªå–ï¼ˆä¸ä¼ å‚æ—¶ç­‰ä»·äºæµ…æ‹·è´ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shallowCopy = originalArr.<span class="hljs-title function_">slice</span>();
</code></pre>
<p><strong>5.æ•°ç»„<code>concat()</code></strong>ï¼Œæ‹¼æ¥ç©ºæ•°ç»„å®ç°æµ…æ‹·è´</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shallowArr = originalArr.<span class="hljs-title function_">concat</span>([]);
</code></pre>
<h3 data-id="heading-5">æ·±æ‹·è´çš„4ç§å¸¸ç”¨æ–¹æ³•</h3>
<p><strong>1.JSON.parse(JSON.stringify(obj))</strong>,æœ€å¸¸ç”¨ï¼ˆå±€é™æ€§ï¼šä¸æ”¯æŒå‡½æ•°ã€Symbolã€Dateã€RegExpï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(userInfo));
</code></pre>
<p><strong>2.é€’å½’éå†æ‹·è´ï¼Œ</strong> è‡ªå®šä¹‰å®ç°ï¼ˆçµæ´»å¤„ç†æ‰€æœ‰ç±»å‹ï¼Œéœ€æ‰‹å†™é€»è¾‘ï¼‰ï¼Œé¢è¯•æ‰‹å†™é¢˜å¸¸è€ƒ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepClone</span>(<span class="hljs-params">obj</span>){
    <span class="hljs-comment">// ç±»å‹åˆ¤æ–­ </span>
    <span class="hljs-keyword">if</span>(obj isntanceof <span class="hljs-title class_">Date</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(obj);
    <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(obj);
    <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(obj.<span class="hljs-property">message</span>);
    <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>){
        <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,...args);
    };
    <span class="hljs-keyword">if</span>( obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) <span class="hljs-keyword">return</span> obj;
    
    <span class="hljs-keyword">const</span> newObj = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : {};
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> obj){
        <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(obj,key)){
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> obj[key] === <span class="hljs-string">"object"</span>){
                newObj[key] = <span class="hljs-title function_">deepClone</span>(obj[key]); <span class="hljs-comment">// é€’å½’æ‹·è´åµŒå¥—å±‚</span>
            }
            <span class="hljs-keyword">else</span>{
                newObj[key] = obj[key]
            }
        }
         
    }
    <span class="hljs-keyword">return</span> newObj;
}
</code></pre>
<p><strong>3.ç¬¬ä¸‰æ–¹åº“ï¼Œ</strong> ç¨³å®šå¯é ï¼ˆå¼€å‘é¦–é€‰ï¼‰</p>
<ul>
<li>Lodashä¸­çš„ <code>_.cloneDeep(obj)</code>ï¼ˆæ”¯æŒæ‰€æœ‰ç±»å‹ï¼Œå¤„ç†å¾ªç¯å¼•ç”¨ï¼‰</li>
<li>jQueryä¸­çš„ <code>$.extend(true,{},obj)</code>ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ä¸ºtrueè¡¨ç¤ºæ·±æ‹·è´ï¼‰</li>
</ul>
<p><strong>4.structuredClone()ï¼Œ</strong> æµè§ˆå™¨åŸç”ŸAPIï¼Œæ”¯æŒå¾ªç¯å¼•ç”¨ã€Date/RegExp,ä½†ä¸æ”¯æŒå‡½æ•°</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Girdå¿«é€Ÿå…¥é—¨ï¼ˆæ‰‹æŠŠæ‰‹æ•²demoï¼‰]]></title>    <link>https://juejin.cn/post/7574271557939167283</link>    <guid>https://juejin.cn/post/7574271557939167283</guid>    <pubDate>2025-11-19T13:02:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574271557939167283" data-draft-id="7574244766424154121" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Girdå¿«é€Ÿå…¥é—¨ï¼ˆæ‰‹æŠŠæ‰‹æ•²demoï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-19T13:02:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™¨437"/> <meta itemprop="url" content="https://juejin.cn/user/3957868231143133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Girdå¿«é€Ÿå…¥é—¨ï¼ˆæ‰‹æŠŠæ‰‹æ•²demoï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3957868231143133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™¨437
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T13:02:44.000Z" title="Wed Nov 19 2025 13:02:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Gird å¸ƒå±€æ˜¯ CSS ä¸­ç›®å‰æœ€å¼ºå¤§ã€æœ€æˆç†Ÿçš„äºŒç»´å¸ƒå±€æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥è®©æ‚¨è½»æ¾åˆ›å»ºå¤æ‚çš„ç½‘é¡µç»“æ„ã€‚</p>
<p>è¿™ä»½å¿«é€Ÿå…¥é—¨æŒ‡å—å°†å¸¦æ‚¨ä»é›¶å¼€å§‹ï¼Œå¿«é€ŸæŒæ¡ Grid çš„æ ¸å¿ƒæ¦‚å¿µå’Œç”¨æ³•ã€‚</p>
<h3 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ CSS Gridï¼Ÿ</h3>
<p>CSS Grid Layoutï¼ˆç½‘æ ¼å¸ƒå±€ï¼‰æ˜¯ä¸€ä¸ªäºŒç»´çš„å¸ƒå±€ç³»ç»Ÿï¼Œæ„å‘³ç€å®ƒå¯ä»¥åŒæ—¶å¤„ç†<strong>è¡Œ</strong>å’Œ<strong>åˆ—</strong>ã€‚è¿™ä¸ Flexboxï¼ˆä¸€ç»´å¸ƒå±€ï¼Œä¸»è¦å¤„ç†è¡Œ<em>æˆ–</em>åˆ—ï¼‰å½¢æˆé²œæ˜å¯¹æ¯”ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†ä¸€ä¸ªå®¹å™¨åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªç½‘æ ¼ï¼Œä½ å¯ä»¥å°†å­å…ƒç´ æ”¾ç½®åœ¨è¿™äº›ç½‘æ ¼çš„ä»»æ„ä½ç½®ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤æ‚çš„ã€ä¸å¯¹ç§°çš„å¸ƒå±€ã€‚</p>
<hr/>
<h3 data-id="heading-1">2. åŸºæœ¬æ¦‚å¿µ</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>Grid Containerï¼ˆç½‘æ ¼å®¹å™¨ï¼‰</strong>ï¼šåº”ç”¨äº† <code>display: grid;</code> çš„å…ƒç´ ã€‚å®ƒçš„æ‰€æœ‰<strong>ç›´æ¥å­å…ƒç´ </strong>å°†æˆä¸º Grid Itemã€‚</li>
<li><strong>Grid Itemï¼ˆç½‘æ ¼é¡¹ç›®ï¼‰</strong>ï¼šGrid Container çš„<strong>ç›´æ¥å­å…ƒç´ </strong>ã€‚</li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span> <span class="hljs-comment">&lt;!-- Grid Container --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- Grid Item --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- Grid Item --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- Grid Item --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">3. å¿«é€Ÿå¯åŠ¨ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„ç½‘æ ¼</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ª 3x3 çš„ç½‘æ ¼ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤ 1ï¼šå®šä¹‰ç½‘æ ¼å®¹å™¨</h4>
<p>é¦–å…ˆï¼Œå°†ä¸€ä¸ªå…ƒç´ çš„ <code>display</code> å±æ€§è®¾ç½®ä¸º <code>grid</code> æˆ– <code>inline-grid</code>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
}
</code></pre>
<p>ç°åœ¨ï¼Œ<code>.container</code> å°±æˆä¸ºäº†ä¸€ä¸ªç½‘æ ¼å®¹å™¨ï¼Œå®ƒçš„ç›´æ¥å­å…ƒç´ è‡ªåŠ¨æˆä¸ºäº†ç½‘æ ¼é¡¹ç›®ã€‚</p>
<h4 data-id="heading-4">æ­¥éª¤ 2ï¼šåˆ’åˆ†è¡Œå’Œåˆ—ï¼ˆå®šä¹‰ç½‘æ ¼è½¨é“ï¼‰</h4>
<p>è¿™æ˜¯ Grid å¸ƒå±€çš„æ ¸å¿ƒã€‚æˆ‘ä»¬ä½¿ç”¨ <code>grid-template-columns</code> å’Œ <code>grid-template-rows</code> å±æ€§æ¥å®šä¹‰ç½‘æ ¼çš„ç»“æ„ã€‚</p>
<ul>
<li><code>grid-template-columns</code>ï¼šå®šä¹‰æ¯ä¸€åˆ—çš„å®½åº¦ã€‚</li>
<li><code>grid-template-rows</code>ï¼šå®šä¹‰æ¯ä¸€è¡Œçš„é«˜åº¦ã€‚</li>
</ul>
<p>è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª 3 åˆ—ï¼ˆæ¯åˆ— 100pxï¼‰å’Œ 3 è¡Œï¼ˆæ¯è¡Œ 100pxï¼‰çš„ç½‘æ ¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">100px</span> <span class="hljs-number">100px</span> <span class="hljs-number">100px</span>; <span class="hljs-comment">/* ä¸‰åˆ—ï¼Œæ¯åˆ—100px */</span>
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-number">100px</span> <span class="hljs-number">100px</span> <span class="hljs-number">100px</span>;    <span class="hljs-comment">/* ä¸‰è¡Œï¼Œæ¯è¡Œ100px */</span>
}
</code></pre>
<p><strong>æ›´ç°ä»£çš„å†™æ³•ï¼šä½¿ç”¨ <code>repeat()</code> å‡½æ•°</strong>
å½“åˆ—æˆ–è¡Œå¾ˆå¤šæ—¶ï¼Œ<code>repeat()</code> å‡½æ•°éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>); <span class="hljs-comment">/* ç­‰åŒäº 100px 100px 100px */</span>
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
}
</code></pre>
<p><strong>çµæ´»çš„å†™æ³•ï¼šä½¿ç”¨ <code>fr</code> å•ä½</strong>
<code>fr</code>ï¼ˆfractionï¼‰å•ä½ä»£è¡¨ç½‘æ ¼å®¹å™¨ä¸­çš„ç­‰åˆ†ç©ºé—´ï¼Œå®ƒè®©å¸ƒå±€å˜å¾—éå¸¸çµæ´»ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">2</span>fr <span class="hljs-number">1</span>fr; <span class="hljs-comment">/* æ€»å®½åº¦åˆ†ä¸º4ä»½ï¼Œç¬¬äºŒåˆ—å 2ä»½ï¼Œç¬¬ä¸€ã€ä¸‰åˆ—å„å 1ä»½ */</span>
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
}
</code></pre>
<p><strong>æ··åˆä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">200px</span> <span class="hljs-number">1</span>fr <span class="hljs-number">20%</span>; <span class="hljs-comment">/* ç¬¬ä¸€åˆ—å›ºå®š200pxï¼Œç¬¬ä¸‰åˆ—æ˜¯å®¹å™¨çš„20%ï¼Œä¸­é—´åˆ—å æ®å‰©ä½™ç©ºé—´ */</span>
}
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤ 3ï¼šç½‘æ ¼é—´éš™ï¼ˆGapï¼‰</h4>
<p>ä½¿ç”¨ <code>gap</code> å±æ€§å¯ä»¥è®¾ç½®ç½‘æ ¼é¡¹ç›®ä¹‹é—´çš„é—´è·ã€‚å®ƒæ˜¯ <code>row-gap</code> å’Œ <code>column-gap</code> çš„ç®€å†™ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-comment">/* è¡Œå’Œåˆ—çš„é—´éš™éƒ½æ˜¯10px */</span>
  <span class="hljs-comment">/* æˆ–è€…åˆ†å¼€å†™ï¼š */</span>
  <span class="hljs-comment">/* row-gap: 15px; */</span>
  <span class="hljs-comment">/* column-gap: 10px; */</span>
}
</code></pre>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸€ä¸ªæ ‡å‡†çš„ 3x3 ç½‘æ ¼å°±åˆ›å»ºå¥½äº†ï¼ä½ çš„ HTML å’Œ CSS çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
      <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">100px</span>);
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
    }
    <span class="hljs-selector-class">.item</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4CAF50</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">text-align</span>: center;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">4. é«˜çº§æ“ä½œï¼šæ”¾ç½®ç½‘æ ¼é¡¹ç›®</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®ä¼šæŒ‰é¡ºåºé€è¡Œé€åˆ—å¡«å……ç½‘æ ¼ã€‚ä½† Grid çš„å¼ºå¤§ä¹‹å¤„åœ¨äºä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªé¡¹ç›®çš„ä½ç½®ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ <strong>ç½‘æ ¼çº¿ï¼ˆGrid Linesï¼‰</strong> æ¥å®šä½é¡¹ç›®ã€‚ç½‘æ ¼çº¿æ˜¯åˆ’åˆ†ç½‘æ ¼çš„çº¿ï¼Œä» 1 å¼€å§‹ç¼–å·ï¼ˆä¹Ÿä» -1 å¼€å§‹å€’åºç¼–å·ï¼‰ã€‚</p>
<p><img alt="CSS Grid Linesè½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>ä½¿ç”¨ä»¥ä¸‹å±æ€§æ¥æ§åˆ¶é¡¹ç›®ä½ç½®ï¼š</p>
<ul>
<li><code>grid-column-start</code></li>
<li><code>grid-column-end</code></li>
<li><code>grid-row-start</code></li>
<li><code>grid-row-end</code></li>
<li>ç®€å†™ï¼š<code>grid-column</code> å’Œ <code>grid-row</code></li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šè®©ç¬¬ä¸€ä¸ª item æ¨ªè·¨ä¸¤åˆ—</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
  <span class="hljs-attribute">grid-column-start</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">grid-column-end</span>: <span class="hljs-number">3</span>; <span class="hljs-comment">/* ä»ç¬¬1æ¡çºµçº¿å¼€å§‹ï¼Œåˆ°ç¬¬3æ¡çºµçº¿ç»“æŸ */</span>
  <span class="hljs-comment">/* ç®€å†™ï¼š */</span>
  <span class="hljs-comment">/* grid-column: 1 / 3; */</span>
}
</code></pre>
<p><strong>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªé¡µé¢çš„ç»å…¸å¸ƒå±€</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>Main Content<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">200px</span> <span class="hljs-number">1</span>fr; <span class="hljs-comment">/* ä¾§è¾¹æ å›ºå®šå®½åº¦ï¼Œä¸»å†…å®¹åŒºè‡ªé€‚åº” */</span>
  <span class="hljs-attribute">grid-template-rows</span>: auto <span class="hljs-number">1</span>fr auto; <span class="hljs-comment">/* é¡µå¤´å’Œé¡µè„šé«˜åº¦ç”±å†…å®¹å†³å®šï¼Œä¸»å†…å®¹åŒºå æ®å‰©ä½™ç©ºé—´ */</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>; <span class="hljs-comment">/* è®©å®¹å™¨å……æ»¡æ•´ä¸ªè§†å£é«˜åº¦ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-tag">header</span> {
  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / -<span class="hljs-number">1</span>; <span class="hljs-comment">/* ä»ç¬¬1æ¡çºµçº¿å¼€å§‹ï¼Œåˆ°æœ€åä¸€æ¡çºµçº¿ç»“æŸï¼ˆæ¨ªè·¨æ‰€æœ‰åˆ—ï¼‰ */</span>
  <span class="hljs-attribute">background</span>: lightblue;
}

<span class="hljs-selector-tag">aside</span> {
  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / <span class="hljs-number">2</span>; <span class="hljs-comment">/* å æ®ç¬¬ä¸€åˆ— */</span>
  <span class="hljs-attribute">background</span>: lightcoral;
}

<span class="hljs-selector-tag">main</span> {
  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">2</span> / <span class="hljs-number">3</span>; <span class="hljs-comment">/* å æ®ç¬¬äºŒåˆ— */</span>
  <span class="hljs-attribute">background</span>: lightgreen;
}

<span class="hljs-selector-tag">footer</span> {
  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / -<span class="hljs-number">1</span>; <span class="hljs-comment">/* æ¨ªè·¨æ‰€æœ‰åˆ— */</span>
  <span class="hljs-attribute">background</span>: lightgray;
}
</code></pre>
<hr/>
<h3 data-id="heading-7">5. å¿«é€Ÿæ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>å¯åŠ¨</strong>ï¼š<code>display: grid;</code></li>
<li><strong>å®šä¹‰ç»“æ„</strong>ï¼š
<ul>
<li><code>grid-template-columns</code>: å®šä¹‰åˆ—ã€‚</li>
<li><code>grid-template-rows</code>: å®šä¹‰è¡Œã€‚</li>
<li>å–„ç”¨ <code>repeat()</code> å’Œ <code>fr</code> å•ä½ã€‚</li>
</ul>
</li>
<li><strong>è®¾ç½®é—´è·</strong>ï¼š<code>gap</code>ã€‚</li>
<li><strong>ç²¾ç»†æ§åˆ¶é¡¹ç›®</strong>ï¼šä½¿ç”¨ <code>grid-column</code> å’Œ <code>grid-row</code> åŸºäº<strong>ç½‘æ ¼çº¿</strong>è¿›è¡Œå®šä½ã€‚</li>
<li><strong>å‘½åç½‘æ ¼çº¿</strong>ï¼šå¯¹äºå¤æ‚å¸ƒå±€ï¼Œå¯ä»¥ç»™ç½‘æ ¼çº¿èµ·åå­—ï¼Œè®©ä»£ç æ›´æ˜“è¯»ã€‚
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">grid-template-columns</span>: [sidebar-start] <span class="hljs-number">200px</span> [sidebar-end content-start] <span class="hljs-number">1</span>fr [content-end];
}
<span class="hljs-selector-tag">header</span> {
  <span class="hljs-attribute">grid-column</span>: sidebar-start / content-end;
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-8">ç»ƒä¹ å»ºè®®</h3>
<p>æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œåœ¨ <code>Elements</code> æˆ– <code>Inspector</code> é¢æ¿ä¸­ï¼Œæ‰¾åˆ°ä½ çš„ç½‘æ ¼å®¹å™¨ï¼Œæ—è¾¹ä¼šæœ‰ä¸€ä¸ª <code>grid</code> çš„æ ‡ç­¾ï¼Œç‚¹å‡»å®ƒå¯ä»¥åœ¨é¡µé¢ä¸Šå¯è§†åŒ–ä½ çš„ç½‘æ ¼ç»“æ„ã€‚è¿™æ˜¯å­¦ä¹ å’Œè°ƒè¯• Grid çš„ç»ä½³æ–¹å¼ï¼</p>
<p>Grid å¸ƒå±€åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œè¿˜åŒ…æ‹¬<strong>ç½‘æ ¼åŒºåŸŸï¼ˆgrid-template-areasï¼‰</strong>ã€å¯¹é½å±æ€§ï¼ˆ<code>justify-items</code>, <code>align-content</code>ç­‰ï¼‰ï¼Œä½†æŒæ¡äº†ä»¥ä¸Šæ ¸å¿ƒå†…å®¹ï¼Œä½ å·²ç»å¯ä»¥åº”å¯¹ 90% çš„å¸ƒå±€éœ€æ±‚äº†ã€‚å¿«å»åŠ¨æ‰‹è¯•è¯•å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å“åº”å¼ç³»ç»Ÿæºç è§£æï¼šMap/Set Collection å“åº”å¼æ ¸å¿ƒå®ç°]]></title>    <link>https://juejin.cn/post/7574338918489784346</link>    <guid>https://juejin.cn/post/7574338918489784346</guid>    <pubDate>2025-11-20T01:52:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574338918489784346" data-draft-id="7574568258788606003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å“åº”å¼ç³»ç»Ÿæºç è§£æï¼šMap/Set Collection å“åº”å¼æ ¸å¿ƒå®ç°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T01:52:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å“åº”å¼ç³»ç»Ÿæºç è§£æï¼šMap/Set Collection å“åº”å¼æ ¸å¿ƒå®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T01:52:53.000Z" title="Thu Nov 20 2025 01:52:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è§£æ Vue3 <code>reactivity</code> æ¨¡å—ä¸­ Collection(Map/Set/WeakMap/WeakSet) çš„å“åº”å¼å¤„ç†é€»è¾‘ï¼Œé‡ç‚¹åœ¨è®¾è®¡æ€è·¯ä¸æºç ç»“æ„ï¼Œè€Œä¸æ˜¯ API ä½¿ç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">1. èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆ Map/Set è¦å•ç‹¬å†™ä»£ç ï¼Ÿ</h2>
<p>Vue å¯¹æ™®é€šå¯¹è±¡ <code>{}</code> çš„å“åº”å¼é  <code>get/set</code> å³å¯ï¼Œä½†å¯¹ Map/Setï¼š</p>
<ul>
<li><strong>æ–¹æ³•æ˜¯å‡½æ•°</strong>ï¼ˆå¦‚ <code>.set()</code>ã€<code>.get()</code>ï¼‰</li>
<li><strong>é”®å¯èƒ½æ˜¯å¯¹è±¡</strong></li>
<li><strong>æœ‰è¿­ä»£å™¨</strong>ï¼ˆ<code>keys</code>ã€<code>values</code>ã€<code>entries</code>ã€<code>forâ€¦of</code>ï¼‰</li>
<li><strong>å¼±é›†åˆ WeakMap/WeakSet æ— æ³•éå†</strong></li>
</ul>
<p>å› æ­¤ï¼ŒVue å¿…é¡»æä¾›ä¸€å¥—ä¸“é—¨çš„â€œä»ªè¡¨æ–¹æ³•â€ï¼ˆinstrumentationsï¼‰æ¥æ¥ç®¡æ‰€æœ‰æ“ä½œã€‚</p>
<p>è¿™ä¸€æ®µæºç å°±æ˜¯ä¸“é—¨ä¸ºæ­¤è€Œè®¾è®¡çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. createIterableMethod â€”â€” è¿­ä»£å™¨é€»è¾‘å°è£…</h2>
<h4 data-id="heading-2">ä»£ç ç‰‡æ®µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createIterableMethod</span>(<span class="hljs-params">method, isReadonly, isShallow</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> target = <span class="hljs-variable language_">this</span>[<span class="hljs-title class_">ReactiveFlags</span>.<span class="hljs-property">RAW</span>]
    <span class="hljs-keyword">const</span> rawTarget = <span class="hljs-title function_">toRaw</span>(target)
    <span class="hljs-keyword">const</span> targetIsMap = <span class="hljs-title function_">isMap</span>(rawTarget)
    <span class="hljs-keyword">const</span> isPair = method === <span class="hljs-string">'entries'</span> || (method === <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> &amp;&amp; targetIsMap)
    <span class="hljs-keyword">const</span> isKeyOnly = method === <span class="hljs-string">'keys'</span> &amp;&amp; targetIsMap

    <span class="hljs-keyword">const</span> innerIterator = target[method](...args)
    <span class="hljs-keyword">const</span> wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive

    !isReadonly &amp;&amp; <span class="hljs-title function_">track</span>(
      rawTarget,
      <span class="hljs-title class_">TrackOpTypes</span>.<span class="hljs-property">ITERATE</span>,
      isKeyOnly ? <span class="hljs-variable constant_">MAP_KEY_ITERATE_KEY</span> : <span class="hljs-variable constant_">ITERATE_KEY</span>,
    )

    <span class="hljs-keyword">return</span> {
      <span class="hljs-title function_">next</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> { value, done } = innerIterator.<span class="hljs-title function_">next</span>()
        <span class="hljs-keyword">return</span> done
          ? { value, done }
          : { <span class="hljs-attr">value</span>: isPair ? [<span class="hljs-title function_">wrap</span>(value[<span class="hljs-number">0</span>]), <span class="hljs-title function_">wrap</span>(value[<span class="hljs-number">1</span>])] : <span class="hljs-title function_">wrap</span>(value), done }
      },
      [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
      },
    }
  }
}
</code></pre>
<hr/>
<h4 data-id="heading-3">é€æ®µè§£é‡Šï¼š</h4>
<h5 data-id="heading-4"><strong>â‘  è·å–åŸå§‹å¯¹è±¡</strong></h5>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">target</span> = this[ReactiveFlags.RAW]
const <span class="hljs-attr">rawTarget</span> = toRaw(target)
</code></pre>
<p>Map å¯èƒ½æ˜¯åµŒå¥— reactive åŒ…è£…ï¼Œè¿™é‡Œç¡®ä¿æ‹¿åˆ°çœŸæ­£çš„åŸå¯¹è±¡ã€‚</p>
<h5 data-id="heading-5"><strong>â‘¡ åˆ¤æ–­è¿”å›å€¼æ˜¯ key/value/key+value</strong></h5>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">isPair</span> = method === <span class="hljs-string">'entries'</span> ...
const <span class="hljs-attr">isKeyOnly</span> = method === <span class="hljs-string">'keys'</span>
</code></pre>
<h5 data-id="heading-6"><strong>â‘¢ æ‰§è¡ŒåŸç”Ÿè¿­ä»£å™¨</strong></h5>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">innerIterator</span> = target[method](...args)
</code></pre>
<h5 data-id="heading-7"><strong>â‘£ ä¾èµ–æ”¶é›†</strong></h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">track</span>(rawTarget, TrackOpTypes.ITERATE, ITERATE_KEY)
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šåªè¦è°ƒç”¨ keysã€valuesã€entriesã€for-ofï¼Œéƒ½è¦è¿½è¸ªä¾èµ–ã€‚</p>
<p>è¿™æ ·å½“é›†åˆç»“æ„å˜åŒ–æ—¶æ‰èƒ½è§¦å‘æ›´æ–°ã€‚</p>
<h5 data-id="heading-8"><strong>â‘¤ è¿­ä»£å™¨åŒ…è£…ï¼šå°†æ¯ä¸ªå€¼è½¬æˆ reactive</strong></h5>
<pre><code class="hljs language-css" lang="css">value: <span class="hljs-built_in">wrap</span>(...)
</code></pre>
<p>Map ä¸­å­˜çš„å€¼å¯èƒ½æ˜¯å¯¹è±¡ï¼ŒVue è‡ªåŠ¨è½¬æ¢æˆ reactive æˆ– readonlyã€‚</p>
<p>è¿™ä¸€éƒ¨åˆ†æ˜¯æœ€æ ¸å¿ƒçš„â€œå“åº”å¼è¿­ä»£å™¨â€å®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-9">3. createReadonlyMethod â€”â€” ç”¨äº readonly é›†åˆ</h2>
<h4 data-id="heading-10">ä»£ç ç‰‡æ®µ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createReadonlyMethod</span>(<span class="hljs-params"><span class="hljs-keyword">type</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-title function_">warn</span>(<span class="hljs-string">`<span class="hljs-subst">${capitalize(<span class="hljs-keyword">type</span>)}</span> operation failed: target is readonly.`</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">type</span> === <span class="hljs-title class_">TriggerOpTypes</span>.<span class="hljs-property">DELETE</span>
      ? <span class="hljs-literal">false</span>
      : <span class="hljs-keyword">type</span> === <span class="hljs-title class_">TriggerOpTypes</span>.<span class="hljs-property">CLEAR</span> ? <span class="hljs-literal">undefined</span> : <span class="hljs-variable language_">this</span>
  }
}
</code></pre>
<h4 data-id="heading-11">æ€è·¯ï¼š</h4>
<ul>
<li>ä»»ä½•ä¿®æ”¹ï¼ˆset/add/delete/clearï¼‰éƒ½ä¼šæç¤ºé”™è¯¯</li>
<li>å¹¶è¿”å›åˆç†çš„ fallback å€¼</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li><code>delete()</code> â†’ <code>false</code></li>
<li><code>clear()</code> â†’ <code>undefined</code></li>
<li><code>set/add</code> â†’ è¿”å› thisï¼ˆä¿æŒé“¾å¼è°ƒç”¨ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-12">4. createInstrumentations â€”â€” ç”Ÿæˆ Map/Set å…¨é‡ä»£ç†æ–¹æ³•</h2>
<p>å®ƒä¼šæ ¹æ®å‚æ•° <code>readonly</code> å’Œ <code>shallow</code> è¿”å›ä¸åŒç‰ˆæœ¬çš„æ–¹æ³•è¡¨ã€‚</p>
<hr/>
<h3 data-id="heading-13">ï¼ˆ1ï¼‰get(key)</h3>
<h4 data-id="heading-14">ä»£ç ç‰‡æ®µ</h4>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">get</span>(<span class="hljs-keyword">key</span>) {
  <span class="hljs-keyword">const</span> target = this[ReactiveFlags.RAW]
  <span class="hljs-keyword">const</span> rawTarget = toRaw(target)
  <span class="hljs-keyword">const</span> rawKey = toRaw(<span class="hljs-keyword">key</span>)

  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">readonly</span>) {
    <span class="hljs-keyword">if</span> (hasChanged(<span class="hljs-keyword">key</span>, rawKey)) track(rawTarget, TrackOpTypes.<span class="hljs-keyword">GET</span>, <span class="hljs-keyword">key</span>)
    track(rawTarget, TrackOpTypes.<span class="hljs-keyword">GET</span>, rawKey)
  }

  <span class="hljs-keyword">const</span> { has } = getProto(rawTarget)

  <span class="hljs-keyword">const</span> wrap = shallow ? toShallow : <span class="hljs-keyword">readonly</span> ? toReadonly : toReactive

  <span class="hljs-keyword">if</span> (has.<span class="hljs-keyword">call</span>(rawTarget, <span class="hljs-keyword">key</span>)) {
    <span class="hljs-keyword">return</span> wrap(target.<span class="hljs-keyword">get</span>(<span class="hljs-keyword">key</span>))
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (has.<span class="hljs-keyword">call</span>(rawTarget, rawKey)) {
    <span class="hljs-keyword">return</span> wrap(target.<span class="hljs-keyword">get</span>(rawKey))
  }
}
</code></pre>
<h4 data-id="heading-15">å…³é”®ç»†èŠ‚ï¼š</h4>
<h5 data-id="heading-16"><strong>â‘  key å’Œ rawKey éƒ½è¦ track</strong></h5>
<p>åŸå› ï¼šç”¨æˆ·å¯èƒ½ç”¨ reactive(obj) æˆ– raw obj ä½œä¸º map keyã€‚</p>
<h5 data-id="heading-17"><strong>â‘¡ å§‹ç»ˆ wrap è¿”å›å€¼</strong></h5>
<p>æ‰€æœ‰ get åˆ°çš„ value å¿…é¡»è¿”å› reactive/readonly ç‰ˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-18">ï¼ˆ2ï¼‰size å±æ€§</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">size</span>()</span> {
  <span class="hljs-keyword">const</span> target = <span class="hljs-keyword">this</span>[ReactiveFlags.RAW]
  !<span class="hljs-keyword">readonly</span> &amp;&amp; track(toRaw(target), TrackOpTypes.ITERATE, ITERATE_KEY)
  <span class="hljs-keyword">return</span> target.size
}
</code></pre>
<p><strong>size ä¾èµ–æ•´ä¸ªé›†åˆç»“æ„</strong>ï¼Œæ‰€ä»¥ä¹Ÿè¦ä½¿ç”¨ ITERATE ä¾èµ–ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-19">ï¼ˆ3ï¼‰has(key)</h3>
<p>é€»è¾‘å’Œ get ç±»ä¼¼ï¼Œä¹Ÿè¦å¯¹ key ä¸ rawKey éƒ½è¿›è¡Œ trackã€‚</p>
<hr/>
<h3 data-id="heading-20">ï¼ˆ4ï¼‰forEach</h3>
<p>Vue ä¸ºå›è°ƒå‚æ•°åšå“åº”å¼åŒ…è£…ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">callback<span class="hljs-selector-class">.call</span>(thisArg, wrap(value), <span class="hljs-built_in">wrap</span>(key), observed)
</code></pre>
<p>ç¡®ä¿ï¼š</p>
<ul>
<li>value æ˜¯ reactive</li>
<li>key æ˜¯ reactive</li>
<li>this æ˜¯ reactive</li>
</ul>
<hr/>
<h2 data-id="heading-21">5. Mutationï¼ˆå¢åˆ æ”¹æ¸…ï¼‰æ“ä½œ</h2>
<p>å¦‚æœä¸æ˜¯ readonlyï¼Œåˆ™æä¾›çœŸæ­£çš„ set/add/delete/clearã€‚</p>
<hr/>
<h3 data-id="heading-22">ï¼ˆ1ï¼‰add (for Set)</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">add</span>(value) {
  value = <span class="hljs-built_in">toRaw</span>(value)
  const hadKey = target<span class="hljs-selector-class">.has</span>(value)
  if (!hadKey) {
    target<span class="hljs-selector-class">.add</span>(value)
    <span class="hljs-built_in">trigger</span>(target, TriggerOpTypes.ADD, value, value)
  }
  return this
}
</code></pre>
<hr/>
<h3 data-id="heading-23">ï¼ˆ2ï¼‰set (for Map)</h3>
<h4 data-id="heading-24">æ ¸å¿ƒé€»è¾‘</h4>
<ul>
<li>æŠŠ value è½¬ raw</li>
<li>åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨</li>
<li>è§¦å‘ ADD æˆ– SET</li>
</ul>
<hr/>
<h3 data-id="heading-25">ï¼ˆ3ï¼‰delete</h3>
<p>è§¦å‘ DELETE ç±»å‹ä¾èµ–ï¼Œå¹¶å°†æ—§å€¼ä¼ é€’ç»™ watcherã€‚</p>
<hr/>
<h3 data-id="heading-26">ï¼ˆ4ï¼‰clear</h3>
<p>è§¦å‘ CLEARï¼Œä¸”å¦‚æœæ˜¯ Map ä¼šå…‹éš† oldTargetï¼ˆä»… devï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-27">6. iterator æ–¹æ³•ç»Ÿä¸€æŒ‚è½½</h2>
<pre><code class="hljs language-sql" lang="sql">[<span class="hljs-string">'keys'</span>,<span class="hljs-string">'values'</span>,<span class="hljs-string">'entries'</span>,Symbol.iterator].forEach(<span class="hljs-keyword">method</span> <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> {
  instrumentations[<span class="hljs-keyword">method</span>] <span class="hljs-operator">=</span> createIterableMethod(<span class="hljs-keyword">method</span>, readonly, shallow)
})
</code></pre>
<p>è¿™æ˜¯å“åº”å¼è¿­ä»£å™¨çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h2 data-id="heading-28">7. createInstrumentationGetter â€”â€” Proxy.get æ•è·å™¨</h2>
<p>å®ƒå®šä¹‰äº†æ‰€æœ‰ Collection çš„ä»£ç†è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">get</span>(target, <span class="hljs-keyword">key</span>, receiver) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">key</span> === ReactiveFlags.IS_REACTIVE) <span class="hljs-keyword">return</span> !isReadonly
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">key</span> === ReactiveFlags.IS_READONLY) <span class="hljs-keyword">return</span> isReadonly
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">key</span> === ReactiveFlags.RAW) <span class="hljs-keyword">return</span> target

  <span class="hljs-keyword">return</span> Reflect.<span class="hljs-keyword">get</span>(
    hasOwn(instrumentations, <span class="hljs-keyword">key</span>) &amp;&amp; <span class="hljs-keyword">key</span> <span class="hljs-keyword">in</span> target
      ? instrumentations
      : target,
    <span class="hljs-keyword">key</span>,
    receiver,
  )
}
</code></pre>
<h4 data-id="heading-29">é€»è¾‘ï¼š</h4>
<ol>
<li>è¯»æ ‡è¯†ä½ï¼ˆisReactive/isReadonly/rawï¼‰</li>
<li>å¦‚æœæœ‰å¯¹åº”çš„ instrumentations æ–¹æ³•ï¼Œåˆ™ä»é‚£é‡Œå–</li>
<li>å¦åˆ™å–é›†åˆåŸæœ¬çš„æ–¹æ³•</li>
</ol>
<hr/>
<h2 data-id="heading-30">8. æœ€ç»ˆå¯¼å‡ºçš„å››ç§ handler</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-type">const</span> mutableCollectionHandlers
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> shallowCollectionHandlers
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> readonlyCollectionHandlers
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> shallowReadonlyCollectionHandlers
</code></pre>
<p>Vue ä¼šæ ¹æ®ï¼š</p>
<ul>
<li>reactive()</li>
<li>shallowReactive()</li>
<li>readonly()</li>
<li>shallowReadonly()</li>
</ul>
<p>æ¥ä½¿ç”¨ä¸åŒçš„ handlerã€‚</p>
<hr/>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>è¿™æ®µæºç æ˜¯ Vue3 å“åº”å¼ç³»ç»Ÿä¸­æœ€å¤æ‚çš„ä¸€éƒ¨åˆ†ä¹‹ä¸€ï¼Œæ ¸å¿ƒè®¾è®¡ç†å¿µåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä»¥ instrumentations è¡¨åŒ…è£…æ‰€æœ‰ Collection æ–¹æ³•</strong></li>
<li><strong>è¿­ä»£å™¨ç»Ÿä¸€ä»£ç†ï¼Œç¡®ä¿ for-of / keys / values éƒ½èƒ½è¢«è¿½è¸ª</strong></li>
<li><strong>è¿”å›å€¼è‡ªåŠ¨ wrap æˆ reactive æˆ– readonly</strong></li>
<li><strong>åŒæ—¶æ”¯æŒ raw key ä¸ reactive key çš„ä¸€è‡´æ€§æ£€æŸ¥</strong></li>
<li><strong>å¯¹ä¸åŒæ¨¡å¼ï¼ˆshallow / readonlyï¼‰è¿›è¡Œç»Ÿä¸€æŠ½è±¡</strong></li>
</ul>
<p>å®ƒæ˜¯ Vue èƒ½ä¼˜é›…æ”¯æŒ Map/Set å“åº”å¼çš„å…³é”®ã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é£ä¹¦å¤šç»´è¡¨æ ¼ç”¨æˆ·ä¸è¦é”™è¿‡ï¼é‡å¤§ç¦åˆ©ğŸ~]]></title>    <link>https://juejin.cn/post/7574529034647257140</link>    <guid>https://juejin.cn/post/7574529034647257140</guid>    <pubDate>2025-11-20T01:52:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574529034647257140" data-draft-id="7574327911659618304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é£ä¹¦å¤šç»´è¡¨æ ¼ç”¨æˆ·ä¸è¦é”™è¿‡ï¼é‡å¤§ç¦åˆ©ğŸ~"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜,äº§å“"/> <meta itemprop="datePublished" content="2025-11-20T01:52:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å¬ä¹¦çš„ç¨‹åºå‘˜é˜¿è¶…"/> <meta itemprop="url" content="https://juejin.cn/user/3905881963247111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é£ä¹¦å¤šç»´è¡¨æ ¼ç”¨æˆ·ä¸è¦é”™è¿‡ï¼é‡å¤§ç¦åˆ©ğŸ~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3905881963247111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å¬ä¹¦çš„ç¨‹åºå‘˜é˜¿è¶…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T01:52:45.000Z" title="Thu Nov 20 2025 01:52:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99b152fb4341494e8f4de14352f5c9f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCs5Lmm55qE56iL5bqP5ZGY6Zi_6LaF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208365&amp;x-signature=YVRMIGA6Eu9b22fbtkb0n%2Bp%2BMiE%3D" alt="image.png" loading="lazy"/>
é˜¿è¶…ä½œä¸ºæ¯å¤©éƒ½åœ¨ç”¨é£ä¹¦å¤šç»´è¡¨æ ¼çš„é‡åº¦ç”¨æˆ·ï¼Œå¹¶ä¸”ç»™å¤šç»´è¡¨æ ¼å¼€å‘äº† 20 å¤šä¸ªå¥½ç”¨çš„æ’ä»¶ï¼Œä¹Ÿæ”¶åˆ°äº†å¾ˆå¤šçš„æ’ä»¶ç”¨æˆ·å¥½è¯„~</p>
<p>æœ€è¿‘ï¼Œé˜¿è¶…å¸®å¤§å®¶äº‰å–åˆ°äº†ä¸€äº›é£ä¹¦å¤šç»´è¡¨æ ¼VIPçš„ç¦åˆ©ğŸ‰ï¼ŒçœŸçš„å¾ˆé¦™~</p>
<p>æ–°ç”¨æˆ·å¯ä»¥é¢†3ä¸ªæœˆä¼šå‘˜ï¼ŒåŸä»·ä¹°å¾—èŠ±ä¸€ç™¾å¤šï¼Œè€Œä¸”ç°åœ¨ä¸ç”¨ä¸‹è½¯ä»¶ï¼Œç½‘é¡µå°±èƒ½ç”¨ï¼Œå¾®ä¿¡é’‰é’‰ä¹Ÿèƒ½ç”¨ï¼Œè¶…çº§æ–¹ä¾¿ã€‚</p>
<p>å…‘æ¢ç ï¼šNew9L2m7F3z8K77</p>
<p>å…‘æ¢é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffcna6swh3rtl.feishu.cn%2Fshare%2Fbase%2Fform%2Fshrcn8BkxqoKYeA6XyZZAB7zK73" target="_blank" title="https://fcna6swh3rtl.feishu.cn/share/base/form/shrcn8BkxqoKYeA6XyZZAB7zK73" ref="nofollow noopener noreferrer">fcna6swh3rtl.feishu.cn/share/base/â€¦</a></p>
<p>å°½å¿«å…‘æ¢ï¼ŒåŒåä¸€æ´»åŠ¨å¾ˆå¿«å°±ç»“æŸäº†ï¼Œå…‘æ¢å®Œå¾—ç­‰å‡ å¤©åˆ°è´¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41c49254502548df9f27bc43cc0f072f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5ZCs5Lmm55qE56iL5bqP5ZGY6Zi_6LaF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764208365&amp;x-signature=M01VbNfAS75HMFxzxYQpGkRzN3A%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘è€…ä¹Ÿèƒ½ç©è½¬å¤§æ¨¡å‹ï¼šä½¿ç”¨HTTPè¯·æ±‚è°ƒç”¨DeepSeekå…¨è®°å½•]]></title>    <link>https://juejin.cn/post/7574253222607568937</link>    <guid>https://juejin.cn/post/7574253222607568937</guid>    <pubDate>2025-11-19T15:27:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574253222607568937" data-draft-id="7574281453707591686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘è€…ä¹Ÿèƒ½ç©è½¬å¤§æ¨¡å‹ï¼šä½¿ç”¨HTTPè¯·æ±‚è°ƒç”¨DeepSeekå…¨è®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,DeepSeek"/> <meta itemprop="datePublished" content="2025-11-19T15:27:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘è€…ä¹Ÿèƒ½ç©è½¬å¤§æ¨¡å‹ï¼šä½¿ç”¨HTTPè¯·æ±‚è°ƒç”¨DeepSeekå…¨è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T15:27:31.000Z" title="Wed Nov 19 2025 15:27:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ— éœ€åç«¯æ”¯æŒï¼Œçº¯å‰ç«¯æŠ€æœ¯æ ˆä¹Ÿèƒ½é›†æˆäººå·¥æ™ºèƒ½å¤§æ¨¡å‹</p>
</blockquote>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘æœ€è¿‘æ¢ç´¢äº†ä¸€ä¸ªæœ‰è¶£çš„æŠ€æœ¯æ–¹æ¡ˆï¼šå¦‚ä½•åœ¨å‰ç«¯é¡¹ç›®ä¸­ç›´æ¥è°ƒç”¨å¤§å‹è¯­è¨€æ¨¡å‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸å°‘å€¼å¾—åˆ†äº«çš„ç»éªŒå’ŒæŠ€å·§ï¼Œä»Šå¤©å°±å¸¦å¤§å®¶ä¸€æ­¥æ­¥å®ç°å‰ç«¯è°ƒç”¨DeepSeekå¤§æ¨¡å‹çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">é¡¹ç›®èƒŒæ™¯ä¸åˆè¡·</h2>
<p>ä¼ ç»Ÿä¸Šï¼Œè°ƒç”¨AIå¤§æ¨¡å‹é€šå¸¸éœ€è¦åç«¯æœåŠ¡çš„æ”¯æŒï¼Œå‰ç«¯é€šè¿‡APIä¸è‡ªå·±çš„æœåŠ¡å™¨äº¤äº’ï¼Œå†ç”±æœåŠ¡å™¨è°ƒç”¨AIæœåŠ¡ã€‚è¿™æ ·åšä¸»è¦æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œç‰¹åˆ«æ˜¯ä¸ºäº†ä¿æŠ¤APIå¯†é’¥ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³å¿«é€ŸåŸå‹éªŒè¯ï¼Œæˆ–è€…æ„å»ºç®€å•çš„ä¸ªäººé¡¹ç›®ï¼Œè¿™æ—¶å€™å¦‚æœèƒ½ç›´æ¥ä»å‰ç«¯è°ƒç”¨å¤§æ¨¡å‹ï¼Œä¼šå¤§å¤§ç®€åŒ–å¼€å‘æµç¨‹ã€‚</p>
<p>æˆ‘å†³å®šå°è¯•ä½¿ç”¨çº¯å‰ç«¯æŠ€æœ¯æ ˆè°ƒç”¨DeepSeekå¤§æ¨¡å‹ï¼Œå¹¶è®°å½•ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®åˆå§‹åŒ–ï¼šä»é›¶æ­å»º</h2>
<p>ä¸ºäº†ç®€åŒ–å¼€å‘æµç¨‹ï¼Œæˆ‘ä½¿ç”¨äº† Traeï¼ˆä¸€ç§ AI è¾…åŠ©å¼€å‘å·¥å…·ï¼‰å¸®æˆ‘å¿«é€Ÿåˆå§‹åŒ–äº†ä¸€ä¸ªåŸºäº Vite çš„å‰ç«¯é¡¹ç›®ã€‚V</p>
<h3 data-id="heading-2">é€‰æ‹©æ„å»ºå·¥å…·</h3>
<p>æˆ‘é€‰æ‹©äº†Viteä½œä¸ºé¡¹ç›®æ„å»ºå·¥å…·ï¼Œå®ƒä¸ä»…é€Ÿåº¦å¿«ï¼Œè€Œä¸”å†…ç½®äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯å¯¹ç¯å¢ƒå˜é‡çš„æ”¯æŒï¼Œè¿™å¯¹ä¿æŠ¤APIå¯†é’¥è‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm create vite@latest frontend-llm-demo
<span class="hljs-built_in">cd</span> frontend-llm-demo
npm install
</code></pre>
<h3 data-id="heading-3">é¡¹ç›®ç»“æ„è®¾è®¡</h3>
<p>ä¿æŒç®€æ´çš„é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">frontend-llm-demo/
â”œâ”€â”€ index.html
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ style.css
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ app.js
â””â”€â”€ .env.<span class="hljs-keyword">local</span>
</code></pre>
<p>å…¶ä¸­ï¼Œ<code>index.html</code> æ˜¯ä¸»é¡µé¢ï¼Œ<code>app.js</code> è´Ÿè´£å‘èµ· API è¯·æ±‚ï¼Œè€Œ <code>.env.local</code> å°†ç”¨äºå­˜æ”¾æ•æ„Ÿçš„ API Keyã€‚</p>
<h2 data-id="heading-4">æ ¸å¿ƒå®ç°ï¼šHTTPè¯·æ±‚è°ƒç”¨LLM</h2>
<h3 data-id="heading-5">æ„å»ºAPIè¯·æ±‚</h3>
<p>åœ¨<code>app.js</code>ä¸­ï¼Œæˆ‘å®ç°äº†å®Œæ•´çš„APIè°ƒç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// DeepSeek APIç«¯ç‚¹</span>
<span class="hljs-keyword">const</span> endpoint = <span class="hljs-string">'https://api.deepseek.com/chat/completions'</span>

<span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´</span>
<span class="hljs-keyword">const</span> headers = {
  <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
  <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${<span class="hljs-keyword">import</span>.meta.env.VITE_DEEPSEEK_API_KEY}</span>`</span>
}

<span class="hljs-comment">// æ„å»ºè¯·æ±‚ä½“</span>
<span class="hljs-keyword">const</span> payload = {
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
  <span class="hljs-attr">messages</span>: [
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'You are a helpful assistant.'</span>
    },
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ DeepSeek'</span>
    }
  ]
}

<span class="hljs-comment">// å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(endpoint, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">headers</span>: headers,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(payload)
})

<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)

<span class="hljs-comment">// å°†æ¨¡å‹å›å¤åŠ¨æ€æŒ‚è½½åˆ°é¡µé¢</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'reply'</span>).<span class="hljs-property">textContent</span> = data.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>
</code></pre>
<h3 data-id="heading-6">å…³é”®æŠ€æœ¯ç‚¹è§£æ</h3>
<h4 data-id="heading-7">1. è¯·æ±‚æ–¹æ³•é€‰æ‹©</h4>
<p>æˆ‘ä½¿ç”¨äº†POSTè€ŒéGETæ–¹æ³•ï¼ŒåŸå› æœ‰äºŒï¼š</p>
<ul>
<li>POSTè¯·æ±‚æ›´å®‰å…¨ï¼Œå‚æ•°ä¸ä¼šæš´éœ²åœ¨URLä¸­</li>
<li>æˆ‘ä»¬éœ€è¦ä¼ é€’è¯·æ±‚ä½“ï¼ŒGETè¯·æ±‚é€šå¸¸ä¸åŒ…å«è¯·æ±‚ä½“ è€Œ LLM è°ƒç”¨éœ€è¦ä¼ é€’å¤æ‚çš„ <code>messages</code> ç»“æ„ï¼Œå¿…é¡»ä½¿ç”¨ POST</li>
</ul>
<h4 data-id="heading-8">2. è¯·æ±‚å¤´è®¾ç½®</h4>
<p>è¯·æ±‚å¤´åŒ…å«äº†ä¸¤ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li><code>Content-Type: application/json</code> - å‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬å‘é€çš„æ˜¯JSONæ ¼å¼æ•°æ®</li>
<li><code>Authorization: Bearer ...</code> - ç”¨äºèº«ä»½éªŒè¯çš„APIå¯†é’¥</li>
</ul>
<h4 data-id="heading-9">3. è¯·æ±‚ä½“æ„å»º</h4>
<p>è¯·æ±‚ä½“æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><code>model</code> - æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å‹ç‰ˆæœ¬</li>
<li><code>messages</code> - å¯¹è¯æ¶ˆæ¯æ•°ç»„ï¼ŒåŒ…å«è§’è‰²å’Œå†…å®¹</li>
</ul>
<h4 data-id="heading-10">4. æ•°æ®åºåˆ—åŒ–</h4>
<p>ä½¿ç”¨<code>JSON.stringify()</code>å°†JavaScriptå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå› ä¸ºHTTPåè®®åªèƒ½ä¼ è¾“æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸èƒ½ç›´æ¥ä¼ è¾“å¯¹è±¡ã€‚</p>
<h2 data-id="heading-11">å®‰å…¨è€ƒè™‘ï¼šä¿æŠ¤APIå¯†é’¥</h2>
<h3 data-id="heading-12">ç¯å¢ƒå˜é‡çš„é‡è¦æ€§</h3>
<p>ç›´æ¥å°†APIå¯†é’¥ç¡¬ç¼–ç åœ¨å‰ç«¯ä»£ç ä¸­æ˜¯æå…¶å±é™©çš„ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹æºä»£ç è·å–å¯†é’¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä½¿ç”¨äº†ç¯å¢ƒå˜é‡ã€‚</p>
<h3 data-id="heading-13">Viteç¯å¢ƒå˜é‡é…ç½®</h3>
<p>Viteä½¿ç”¨ç‰¹æ®Šçš„<code>import.meta.env</code>å¯¹è±¡æ¥è®¿é—®ç¯å¢ƒå˜é‡ã€‚ä»¥<code>VITE_</code>å¼€å¤´çš„å˜é‡ä¼šè¢«åµŒå…¥åˆ°å®¢æˆ·ç«¯ä»£ç ä¸­ã€‚</p>
<ol>
<li>åˆ›å»º<code>.env</code>æ–‡ä»¶ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">VITE_DEEPSEEK_API_KEY</span>=your_api_key_here
</code></pre>
<ol start="2">
<li>åœ¨ä»£ç ä¸­è®¿é—®ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> apiKey = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEEPSEEK_API_KEY</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šå³ä½¿ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå‰ç«¯ä»£ç ä¸­çš„APIå¯†é’¥ä»ç„¶å¯èƒ½è¢«æœ‰å¿ƒäººè·å–ã€‚å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæœ€ä½³å®è·µä»ç„¶æ˜¯ä½¿ç”¨åç«¯æœåŠ¡ä½œä¸ºä»£ç†ã€‚</p>
<h2 data-id="heading-14">å¼‚æ­¥å¤„ç†ï¼šä»Promiseåˆ°async/await</h2>
<h3 data-id="heading-15">ä¼ ç»Ÿçš„Promiseé“¾å¼è°ƒç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(endpoint, options)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
  })
</code></pre>
<h3 data-id="heading-16">ç°ä»£çš„async/await</h3>
<p>æˆ‘é€‰æ‹©äº†async/awaitè¯­æ³•ï¼Œå› ä¸ºå®ƒæ›´ç®€æ´ã€æ›´æ˜“è¯»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(endpoint, options)
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
}
</code></pre>
<h2 data-id="heading-17">ç»“æœå±•ç¤ºï¼šåŠ¨æ€æ›´æ–°DOM</h2>
<p>è·å–åˆ°APIå“åº”åï¼Œéœ€è¦å°†ç»“æœæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'reply'</span>).<span class="hljs-property">textContent</span> = data.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>
</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº†ç›´æ¥æ“ä½œDOMçš„æ–¹å¼ï¼Œåœ¨ç°ä»£å‰ç«¯æ¡†æ¶æµè¡Œçš„ä»Šå¤©ï¼Œè¿™ç§åŸç”Ÿæ–¹æ³•ä¾ç„¶ç®€å•æœ‰æ•ˆã€‚</p>
<h2 data-id="heading-18">å®Œæ•´HTMLç»“æ„</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color-scheme"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"light dark"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å‰ç«¯è°ƒç”¨å¤§æ¨¡å‹ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles/style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello DeepSeek<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"reply"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./scripts/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-19">å¼€å‘å¿ƒå¾—ä¸æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘è·å¾—äº†ä»¥ä¸‹å‡ ç‚¹ç»éªŒï¼š</p>
<h3 data-id="heading-20">1. å‰ç«¯è°ƒç”¨LLMçš„å¯è¡Œæ€§</h3>
<p>äº‹å®è¯æ˜ï¼Œå‰ç«¯ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹APIæ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œè¿™ä¸ºå¿«é€ŸåŸå‹å¼€å‘å’Œä¸ªäººé¡¹ç›®æä¾›äº†ä¾¿åˆ©ã€‚ä½†éœ€è¦æ³¨æ„å®‰å…¨æ€§é—®é¢˜ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥æš´éœ²APIå¯†é’¥ã€‚</p>
<h3 data-id="heading-21">2. HTTPè¯·æ±‚çš„ç»†èŠ‚é‡è¦æ€§</h3>
<p>è°ƒç”¨å¤–éƒ¨APIæ—¶ï¼Œè¯·æ±‚çš„æ¯ä¸ªéƒ¨åˆ†éƒ½å¾ˆé‡è¦ï¼š</p>
<ul>
<li>æ­£ç¡®çš„ç«¯ç‚¹URL</li>
<li>æ°å½“çš„HTTPæ–¹æ³•</li>
<li>å¿…è¦çš„è¯·æ±‚å¤´</li>
<li>æ­£ç¡®æ ¼å¼åŒ–çš„è¯·æ±‚ä½“</li>
</ul>
<h3 data-id="heading-22">3. ç°ä»£JavaScriptç‰¹æ€§çš„ä»·å€¼</h3>
<p>ES6+çš„ç‰¹æ€§è®©ä»£ç æ›´åŠ ç®€æ´ï¼š</p>
<ul>
<li>æ¨¡æ¿å­—ç¬¦ä¸²</li>
<li>ç®­å¤´å‡½æ•°</li>
<li>è§£æ„èµ‹å€¼</li>
<li>async/await</li>
</ul>
<h3 data-id="heading-23">4. æ„å»ºå·¥å…·çš„é‡è¦æ€§</h3>
<p>Viteç­‰ç°ä»£æ„å»ºå·¥å…·ä¸ä»…æä¾›å¼€å‘æœåŠ¡å™¨å’Œæ‰“åŒ…åŠŸèƒ½ï¼Œè¿˜è§£å†³äº†ç¯å¢ƒå˜é‡ã€æ¨¡å—åŒ–ç­‰å·¥ç¨‹åŒ–é—®é¢˜ã€‚</p>
<h3 data-id="heading-24">5. å®‰å…¨æ„è¯†çš„åŸ¹å…»</h3>
<p>å³ä½¿æ˜¯åœ¨ä¸ªäººé¡¹ç›®ä¸­ï¼Œä¹Ÿåº”è¯¥å…»æˆè‰¯å¥½çš„å®‰å…¨ä¹ æƒ¯ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯ã€‚</p>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>å‰ç«¯æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œå¦‚ä»Šæˆ‘ä»¬ç”šè‡³å¯ä»¥ç›´æ¥åœ¨å‰ç«¯è°ƒç”¨å¼ºå¤§çš„äººå·¥æ™ºèƒ½æ¨¡å‹ã€‚è¿™ä¸ªé¡¹ç›®è™½ç„¶ç®€å•ï¼Œä½†å±•ç¤ºäº†å‰ç«¯å¼€å‘çš„å¼ºå¤§èƒ½åŠ›å’Œæ— é™å¯èƒ½æ€§ã€‚ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸åº”è¯¥å°†è‡ªå·±å±€é™åœ¨ä¼ ç»Ÿçš„ç•Œé¢å¼€å‘ä¸­ï¼Œè€Œåº”è¯¥ç§¯ææ¢ç´¢å‰ç«¯æŠ€æœ¯çš„è¾¹ç•Œã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ä¸ºæƒ³è¦åœ¨å‰ç«¯é¡¹ç›®ä¸­é›†æˆAIèƒ½åŠ›çš„å¼€å‘è€…æä¾›ä¸€äº›å‚è€ƒå’Œå¯å‘ã€‚å‰ç«¯çš„ä¸–ç•Œå¾ˆç²¾å½©ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šå¯èƒ½æ€§ï¼</p>
<hr/>
<p><em>æ³¨æ„ï¼šæœ¬æ–‡ç¤ºä¾‹ä»…é€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒä¸­è¯·åŠ¡å¿…é€šè¿‡åç«¯æœåŠ¡è°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼Œç¡®ä¿APIå¯†é’¥çš„å®‰å…¨æ€§ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2.Kotlin å‡½æ•°ï¼šå‡½æ•°è¿›é˜¶ï¼šå¯å˜å‚æ•° (vararg) ä¸å±€éƒ¨å‡½æ•°]]></title>    <link>https://juejin.cn/post/7574276404595884084</link>    <guid>https://juejin.cn/post/7574276404595884084</guid>    <pubDate>2025-11-19T10:38:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574276404595884084" data-draft-id="7574250031248654370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2.Kotlin å‡½æ•°ï¼šå‡½æ•°è¿›é˜¶ï¼šå¯å˜å‚æ•° (vararg) ä¸å±€éƒ¨å‡½æ•°"/> <meta itemprop="keywords" content="Android,Kotlin,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-19T10:38:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Android_å°é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/220360279590862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2.Kotlin å‡½æ•°ï¼šå‡½æ•°è¿›é˜¶ï¼šå¯å˜å‚æ•° (vararg) ä¸å±€éƒ¨å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/220360279590862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Android_å°é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T10:38:21.000Z" title="Wed Nov 19 2025 10:38:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>å¸Œæœ›å¸®ä½ åœ¨Kotlinè¿›é˜¶è·¯ä¸Šå°‘èµ°å¼¯è·¯ï¼Œåœ¨æŠ€æœ¯ä¸Šç¨³æ­¥æå‡ã€‚å½“ç„¶ï¼Œç”±äºä¸ªäººçŸ¥è¯†å‚¨å¤‡æœ‰é™ï¼Œç¬”è®°ä¸­éš¾å…å­˜åœ¨ç–æ¼æˆ–è¡¨è¿°ä¸å½“çš„åœ°æ–¹ï¼Œä¹Ÿéå¸¸æ¬¢è¿å¤§å®¶æå‡ºå®è´µæ„è§ï¼Œä¸€èµ·äº¤æµè¿›æ­¥ã€‚ â€”â€” Android_å°é›¨</p>
</blockquote>
<p>æ•´ä½“ç›®å½•ï¼š<a href="https://juejin.cn/spost/7573592952242602036" target="_blank" title="https://juejin.cn/spost/7573592952242602036">Kotlin è¿›é˜¶ä¸è¿·è·¯ï¼š41 ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæ„å»ºå®Œæ•´çŸ¥è¯†ä½“ç³»</a></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<h3 data-id="heading-1">1.1 å‡½æ•°è¿›é˜¶çš„æ ¸å¿ƒæ„ä¹‰</h3>
<p>åœ¨ Kotlin å¼€å‘ä¸­ï¼ŒåŸºç¡€å‡½æ•°è¯­æ³•èƒ½æ»¡è¶³ç®€å•åœºæ™¯çš„éœ€æ±‚ï¼Œä½†é¢å¯¹â€œéœ€è¦å¤„ç†ä¸ç¡®å®šæ•°é‡çš„å‚æ•°â€â€œå‡½æ•°å†…éƒ¨æœ‰é‡å¤é€»è¾‘â€ç­‰å¤æ‚åœºæ™¯æ—¶ï¼Œå°±éœ€è¦å€ŸåŠ©è¿›é˜¶å‡½æ•°ç‰¹æ€§æ¥ä¼˜åŒ–ä»£ç ã€‚å‡½æ•°è¿›é˜¶çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>æå‡ä»£ç çš„çµæ´»æ€§ã€å¤ç”¨æ€§å’Œå¯è¯»æ€§</strong>â€”â€”æ—¢è®©å‡½æ•°èƒ½é€‚é…æ›´å¤šæ ·çš„è°ƒç”¨åœºæ™¯ï¼Œåˆèƒ½é€šè¿‡åˆç†å°è£…å‡å°‘å†—ä½™ä»£ç ï¼Œè®©é€»è¾‘æ›´æ¸…æ™°ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°â€œè®¡ç®—å¤šä¸ªæ•°å­—çš„å’Œâ€â€œæ‰¹é‡æ‰“å°æ•°æ®â€è¿™ç±»éœ€æ±‚ï¼Œè‹¥ç”¨åŸºç¡€å‡½æ•°åªèƒ½ä¸€æ¬¡æ¬¡ä¼ é€’å›ºå®šæ•°é‡çš„å‚æ•°ï¼›è¿˜æœ‰å‡½æ•°å†…éƒ¨å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„æ ¡éªŒé€»è¾‘ï¼Œç›´æ¥é‡å¤ç¼–å†™ä¼šè®©ä»£ç æ˜¾å¾—è‡ƒè‚¿ã€‚è€Œä»Šå¤©è¦è®²çš„<strong>å¯å˜å‚æ•°ï¼ˆvarargï¼‰<strong>å’Œ</strong>å±€éƒ¨å‡½æ•°</strong>ï¼Œæ­£æ˜¯è§£å†³è¿™ä¸¤ç±»é—®é¢˜çš„â€œåˆ©å™¨â€ã€‚</p>
<h3 data-id="heading-2">1.2 æœ¬æ–‡æ ¸å¿ƒå†…å®¹é¢„å‘Šï¼ˆå¯å˜å‚æ•° + å±€éƒ¨å‡½æ•°ï¼‰</h3>
<p>æœ¬æ–‡å°†èšç„¦ Kotlin ä¸­ä¸¤ä¸ªé«˜é¢‘è¿›é˜¶å‡½æ•°ç‰¹æ€§ï¼šå¯å˜å‚æ•°ï¼ˆvarargï¼‰å’Œå±€éƒ¨å‡½æ•°ã€‚æˆ‘ä»¬ä¼šä»â€œæ˜¯ä»€ä¹ˆã€æ€ä¹ˆç”¨ã€æ³¨æ„ä»€ä¹ˆã€åœ¨å“ªç”¨â€å››ä¸ªç»´åº¦ï¼Œé€æ­¥æ‹†è§£æ¯ä¸ªç‰¹æ€§çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæœ€åå†é€šè¿‡ç»“åˆç¤ºä¾‹å±•ç¤ºå®ƒä»¬çš„ååŒä¼˜åŠ¿ã€‚æ— è®ºä½ æ˜¯åˆšæ¥è§¦ Kotlin çš„æ–°æ‰‹ï¼Œè¿˜æ˜¯æƒ³ä¼˜åŒ–ç°æœ‰ä»£ç çš„å¼€å‘è€…ï¼Œéƒ½èƒ½é€šè¿‡æœ¬æ–‡å¿«é€ŸæŒæ¡è¿™ä¸¤ä¸ªç‰¹æ€§çš„å®æˆ˜æŠ€å·§ã€‚</p>
<h2 data-id="heading-3">äºŒã€å¯å˜å‚æ•° (vararg) è¯¦è§£</h2>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯å¯å˜å‚æ•°ï¼Ÿï¼ˆç®€å•å®šä¹‰ï¼šæ¥æ”¶ä»»æ„æ•°é‡åŒç±»å‹å‚æ•°ï¼‰</h3>
<p>å¯å˜å‚æ•°ï¼ˆvarargï¼Œå…¨ç§° variable number of argumentsï¼‰æ˜¯ Kotlin æä¾›çš„ä¸€ç§ç‰¹æ®Šå‚æ•°ç±»å‹ï¼Œå®ƒå…è®¸å‡½æ•°<strong>æ¥æ”¶ä»»æ„æ•°é‡çš„åŒç±»å‹å‚æ•°</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è°ƒç”¨å‡½æ•°æ—¶å¯ä»¥ä¼ é€’ 1 ä¸ªã€2 ä¸ªâ€¦â€¦ç”šè‡³ 0 ä¸ªè¯¥ç±»å‹çš„å‚æ•°ï¼Œå‡½æ•°å†…éƒ¨ä¼šå°†è¿™äº›å‚æ•°å°è£…æˆä¸€ä¸ªæ•°ç»„æ¥å¤„ç†ã€‚</p>
<p>æ¯”å¦‚å®šä¹‰ä¸€ä¸ªâ€œæ±‚å’Œå‡½æ•°â€ï¼Œå¦‚æœç”¨åŸºç¡€å‡½æ•°åªèƒ½å›ºå®šå‚æ•°æ•°é‡ï¼ˆå¦‚ sum(a: Int, b: Int) åªèƒ½æ±‚ä¸¤ä¸ªæ•°çš„å’Œï¼‰ï¼Œè€Œç”¨å¯å˜å‚æ•°å°±èƒ½å®ç°â€œæ±‚ä»»æ„ä¸ªæ•´æ•°çš„å’Œâ€ï¼Œé€‚é…â€œæ±‚ 2 ä¸ªæ•°ã€3 ä¸ªæ•°ç”šè‡³ 10 ä¸ªæ•°çš„å’Œâ€ç­‰æ‰€æœ‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">2.2 å¯å˜å‚æ•°çš„åŸºæœ¬ç”¨æ³•ï¼ˆè¯­æ³•æ ¼å¼ + åŸºç¡€ç¤ºä¾‹ï¼‰</h3>
<h4 data-id="heading-6">2.2.1 è¯­æ³•æ ¼å¼</h4>
<p>å®šä¹‰å¯å˜å‚æ•°åªéœ€åœ¨å‚æ•°ç±»å‹å‰åŠ ä¸Š <code>vararg</code> å…³é”®å­—ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> å‡½æ•°å<span class="hljs-params">(<span class="hljs-keyword">vararg</span> å‚æ•°å: å‚æ•°ç±»å‹)</span></span>: è¿”å›ç±»å‹ {
    <span class="hljs-comment">// å‡½æ•°ä½“ä¸­ï¼Œå‚æ•°åå¯ç›´æ¥å½“ä½œæ•°ç»„ä½¿ç”¨ï¼ˆå¦‚å‚æ•°å.sizeã€å‚æ•°å[0]ï¼‰</span>
}

</code></pre>
<h4 data-id="heading-7">2.2.2 åŸºç¡€ç¤ºä¾‹</h4>
<p>ä»¥â€œæ±‚ä»»æ„ä¸ªæ•´æ•°çš„å’Œâ€ä¸ºä¾‹ï¼Œç”¨å¯å˜å‚æ•°å®ç°å¦‚ä¸‹ï¼Œè°ƒç”¨æ—¶å¯ä¼ é€’ä»»æ„æ•°é‡çš„æ•´æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯å˜å‚æ•°åŸºç¡€ç¤ºä¾‹ï¼šæ±‚ä»»æ„ä¸ªæ•´æ•°çš„å’Œ
 * <span class="hljs-doctag">@param</span> numbers å¯å˜å‚æ•°ï¼Œæ¥æ”¶ä»»æ„æ•°é‡çš„ Int ç±»å‹å‚æ•°
 * <span class="hljs-doctag">@return</span> æ‰€æœ‰å‚æ•°çš„å’Œ
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> numbers: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">var</span> total = <span class="hljs-number">0</span>
    <span class="hljs-comment">// å¯å˜å‚æ•°åœ¨å‡½æ•°å†…éƒ¨ä¼šè¢«å½“ä½œæ•°ç»„å¤„ç†ï¼Œå¯é€šè¿‡å¾ªç¯éå†</span>
    <span class="hljs-keyword">for</span> (num <span class="hljs-keyword">in</span> numbers) {
        total += num
    }
    <span class="hljs-keyword">return</span> total
}

<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. ä¼ é€’ 2 ä¸ªå‚æ•°</span>
    <span class="hljs-keyword">val</span> sum2 = sumNumbers(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)
    println(<span class="hljs-string">"ä¸¤ä¸ªæ•°çš„å’Œï¼š<span class="hljs-variable">$sum2</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šä¸¤ä¸ªæ•°çš„å’Œï¼š30</span>

    <span class="hljs-comment">// 2. ä¼ é€’ 5 ä¸ªå‚æ•°</span>
    <span class="hljs-keyword">val</span> sum5 = sumNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    println(<span class="hljs-string">"äº”ä¸ªæ•°çš„å’Œï¼š<span class="hljs-variable">$sum5</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šäº”ä¸ªæ•°çš„å’Œï¼š15</span>

    <span class="hljs-comment">// 3. ä¼ é€’ 0 ä¸ªå‚æ•°ï¼ˆè¿”å›é»˜è®¤å€¼ 0ï¼‰</span>
    <span class="hljs-keyword">val</span> sum0 = sumNumbers()
    println(<span class="hljs-string">"é›¶ä¸ªæ•°çš„å’Œï¼š<span class="hljs-variable">$sum0</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šé›¶ä¸ªæ•°çš„å’Œï¼š0</span>
}

</code></pre>
<p>ä»ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œå¯å˜å‚æ•°è®©å‡½æ•°çš„è°ƒç”¨åœºæ™¯å˜å¾—æåº¦çµæ´»ï¼Œæ— éœ€ä¸ºä¸åŒæ•°é‡çš„å‚æ•°å®šä¹‰å¤šä¸ªé‡è½½å‡½æ•°ã€‚</p>
<h3 data-id="heading-8">2.3 å¯å˜å‚æ•°çš„å…³é”®æ³¨æ„ç‚¹ï¼ˆä½ç½®è¦æ±‚ã€ä¸æ•°ç»„çš„é…åˆï¼‰</h3>
<h4 data-id="heading-9">2.3.1 å‚æ•°ä½ç½®è¦æ±‚ï¼šå¯å˜å‚æ•°æœ€å¥½æ”¾åœ¨æœ€å</h4>
<p>Kotlin ä¸­ä¸€ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œä¸”ä¸ºäº†é¿å…è°ƒç”¨æ—¶å‚æ•°è§£ææ··ä¹±ï¼Œ<strong>å¯å˜å‚æ•°å»ºè®®æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åä¸€ä½</strong>ã€‚å¦‚æœå¯å˜å‚æ•°å‰é¢æœ‰å…¶ä»–å‚æ•°ï¼Œè°ƒç”¨æ—¶éœ€è¦é€šè¿‡â€œå‘½åå‚æ•°â€æ˜ç¡®åŒºåˆ†ï¼Œå¦åˆ™ä¼šç¼–è¯‘æŠ¥é”™ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šå¯å˜å‚æ•°æ”¾åœ¨éæœ€åä½ç½®ï¼Œè°ƒç”¨æ—¶æ˜“æ··æ·†</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printInfo</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> names: <span class="hljs-type">String</span>, prefix: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Unit</span> {
    <span class="hljs-keyword">for</span> (name <span class="hljs-keyword">in</span> names) {
        println(<span class="hljs-string">"<span class="hljs-variable">$prefix</span>ï¼š<span class="hljs-variable">$name</span>"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ä¼šç¼–è¯‘æŠ¥é”™ï¼šæ— æ³•åŒºåˆ†å“ªä¸ªæ˜¯ prefixï¼Œå“ªä¸ªæ˜¯ names çš„å‚æ•°</span>
    <span class="hljs-comment">// printInfo("å¼ ä¸‰", "æå››", "å‰ç¼€")</span>

    <span class="hljs-comment">// å¿…é¡»ç”¨å‘½åå‚æ•°æŒ‡å®š prefixï¼Œæ‰èƒ½æ­£ç¡®è°ƒç”¨ï¼ˆä¸æ¨èè¿™ç§å®šä¹‰æ–¹å¼ï¼‰</span>
    printInfo(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, prefix = <span class="hljs-string">"å§“å"</span>)
}

<span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šå¯å˜å‚æ•°æ”¾åœ¨æœ€åä¸€ä½</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printInfo</span><span class="hljs-params">(prefix: <span class="hljs-type">String</span>, <span class="hljs-keyword">vararg</span> names: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Unit</span> {
    <span class="hljs-keyword">for</span> (name <span class="hljs-keyword">in</span> names) {
        println(<span class="hljs-string">"<span class="hljs-variable">$prefix</span>ï¼š<span class="hljs-variable">$name</span>"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç›´æ¥æŒ‰é¡ºåºè°ƒç”¨ï¼Œæ— éœ€å‘½åå‚æ•°ï¼Œæ¸…æ™°ç®€æ´</span>
    printInfo(<span class="hljs-string">"å§“å"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>)
    <span class="hljs-comment">// è¾“å‡ºï¼š</span>
    <span class="hljs-comment">// å§“åï¼šå¼ ä¸‰</span>
    <span class="hljs-comment">// å§“åï¼šæå››</span>
    <span class="hljs-comment">// å§“åï¼šç‹äº”</span>
}

</code></pre>
<h4 data-id="heading-10">2.3.2 ä¸æ•°ç»„çš„é…åˆï¼šç”¨ spread è¿ç®—ç¬¦ï¼ˆ*ï¼‰ä¼ é€’æ•°ç»„</h4>
<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªç°æˆçš„æ•°ç»„ï¼Œæƒ³å°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä½œä¸ºå¯å˜å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥ä¼ é€’æ•°ç»„ï¼ˆä¼šè¢«å½“ä½œä¸€ä¸ªå‚æ•°å¤„ç†ï¼‰ï¼Œéœ€è¦åœ¨æ•°ç»„å‰åŠ ä¸Š <code>*</code> è¿ç®—ç¬¦ï¼ˆç§°ä¸º spread è¿ç®—ç¬¦ï¼Œå³â€œå±•å¼€è¿ç®—ç¬¦â€ï¼‰ï¼Œå®ƒä¼šå°†æ•°ç»„ä¸­çš„å…ƒç´ é€ä¸ªå±•å¼€ä¸ºå¯å˜å‚æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> numbers: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> numbers.sum() <span class="hljs-comment">// æ•°ç»„çš„ sum() æ–¹æ³•ï¼Œç›´æ¥æ±‚æ€»å’Œ</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ•°ç»„</span>
    <span class="hljs-keyword">val</span> numArray = intArrayOf(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>)

    <span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¼ é€’æ•°ç»„ï¼Œä¼šè¢«å½“ä½œä¸€ä¸ªå‚æ•°ï¼ˆæ•°ç»„ç±»å‹ï¼‰ï¼Œç¼–è¯‘æŠ¥é”™</span>
    <span class="hljs-comment">// val sum = sumNumbers(numArray)</span>

    <span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šç”¨ * è¿ç®—ç¬¦å±•å¼€æ•°ç»„</span>
    <span class="hljs-keyword">val</span> sum = sumNumbers(*numArray)
    println(<span class="hljs-string">"æ•°ç»„å…ƒç´ çš„å’Œï¼š<span class="hljs-variable">$sum</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šæ•°ç»„å…ƒç´ çš„å’Œï¼š100</span>
}

</code></pre>
<p>æ³¨æ„ï¼šspread è¿ç®—ç¬¦åªèƒ½ç”¨äºæ•°ç»„ï¼Œä¸èƒ½ç”¨äº List ç­‰é›†åˆï¼›å¦‚æœæ˜¯ Listï¼Œéœ€è¦å…ˆé€šè¿‡ <code>toIntArray()</code> ç­‰æ–¹æ³•è½¬ä¸ºæ•°ç»„å†å±•å¼€ã€‚</p>
<h3 data-id="heading-11">2.4 å®ç”¨åœºæ™¯ä¸¾ä¾‹ï¼ˆå¦‚ï¼šæ±‚å’Œã€æ‰“å°å¤šä¸ªæ•°æ®ï¼‰</h3>
<h4 data-id="heading-12">2.4.1 åœºæ™¯ 1ï¼šæ‰¹é‡å¤„ç†æ•°æ®ï¼ˆæ±‚å’Œã€æ±‚å¹³å‡å€¼ï¼‰</h4>
<p>å¯å˜å‚æ•°æœ€å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯â€œæ‰¹é‡å¤„ç†åŒç±»å‹æ•°æ®â€ï¼Œæ¯”å¦‚è®¡ç®—å¤šä¸ªæ•°å­—çš„å¹³å‡å€¼ã€æ‰¾å‡ºæœ€å¤§å€¼ç­‰ã€‚ä¸‹é¢ä»¥â€œæ±‚å¤šä¸ªæµ®ç‚¹æ•°çš„å¹³å‡å€¼â€ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ±‚å¤šä¸ªæµ®ç‚¹æ•°çš„å¹³å‡å€¼
 * <span class="hljs-doctag">@param</span> nums å¯å˜å‚æ•°ï¼Œæ¥æ”¶ä»»æ„æ•°é‡çš„ Float ç±»å‹æ•°æ®
 * <span class="hljs-doctag">@return</span> å¹³å‡å€¼ï¼ˆè‹¥æ²¡æœ‰å‚æ•°è¿”å› 0.0ï¼‰
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateAverage</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> nums: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">if</span> (nums.isEmpty()) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0f</span>
    <span class="hljs-comment">// è®¡ç®—æ€»å’Œï¼šnums.sum() æ˜¯æ•°ç»„çš„æ‰©å±•å‡½æ•°</span>
    <span class="hljs-keyword">val</span> total = nums.sum()
    <span class="hljs-comment">// å¹³å‡å€¼ = æ€»å’Œ / å…ƒç´ ä¸ªæ•°</span>
    <span class="hljs-keyword">return</span> total / nums.size
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> avg1 = calculateAverage(<span class="hljs-number">85.5f</span>, <span class="hljs-number">92.0f</span>, <span class="hljs-number">78.5f</span>, <span class="hljs-number">90.0f</span>)
    println(<span class="hljs-string">"4ä¸ªæˆç»©çš„å¹³å‡å€¼ï¼š<span class="hljs-variable">$avg1</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼š4ä¸ªæˆç»©çš„å¹³å‡å€¼ï¼š86.5</span>

    <span class="hljs-keyword">val</span> avg2 = calculateAverage(<span class="hljs-number">95.0f</span>, <span class="hljs-number">88.0f</span>)
    println(<span class="hljs-string">"2ä¸ªæˆç»©çš„å¹³å‡å€¼ï¼š<span class="hljs-variable">$avg2</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼š2ä¸ªæˆç»©çš„å¹³å‡å€¼ï¼š91.5</span>
}

</code></pre>
<h4 data-id="heading-13">2.4.2 åœºæ™¯ 2ï¼šæ‰¹é‡æ‰“å°æ•°æ®ï¼ˆå¸¦ç»Ÿä¸€å‰ç¼€ï¼‰</h4>
<p>å¼€å‘ä¸­ç»å¸¸éœ€è¦â€œæ‰¹é‡æ‰“å°ä¸€ç»„æ•°æ®â€ï¼Œæ¯”å¦‚æ‰“å°ç”¨æˆ·åˆ—è¡¨ã€æ—¥å¿—åˆ—è¡¨ç­‰ï¼Œç”¨å¯å˜å‚æ•°å¯ä»¥è½»æ¾å®ç°â€œä¼ é€’ä»»æ„ä¸ªæ•°æ®ï¼Œç»Ÿä¸€æ·»åŠ å‰ç¼€åæ‰“å°â€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ‰¹é‡æ‰“å°æ•°æ®ï¼Œå¸¦ç»Ÿä¸€å‰ç¼€
 * <span class="hljs-doctag">@param</span> prefix æ¯ä¸ªæ•°æ®çš„å‰ç¼€
 * <span class="hljs-doctag">@param</span> data å¯å˜å‚æ•°ï¼Œæ¥æ”¶ä»»æ„æ•°é‡çš„ String ç±»å‹æ•°æ®
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">batchPrint</span><span class="hljs-params">(prefix: <span class="hljs-type">String</span>, <span class="hljs-keyword">vararg</span> <span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
    println(<span class="hljs-string">"=== æ‰¹é‡æ‰“å°å¼€å§‹ ==="</span>)
    <span class="hljs-keyword">data</span>.forEachIndexed { index, item -&gt;
        <span class="hljs-comment">// ç´¢å¼•ä» 1 å¼€å§‹ï¼Œæ ¼å¼ï¼šå‰ç¼€ + åºå· + æ•°æ®</span>
        println(<span class="hljs-string">"<span class="hljs-variable">$prefix</span> <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ï¼š<span class="hljs-variable">$item</span>"</span>)
    }
    println(<span class="hljs-string">"=== æ‰¹é‡æ‰“å°ç»“æŸ ==="</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ‰“å°ç”¨æˆ·åˆ—è¡¨</span>
    batchPrint(<span class="hljs-string">"ç”¨æˆ·"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"èµµå…­"</span>)
    <span class="hljs-comment">// æ‰“å°æ—¥å¿—åˆ—è¡¨</span>
    batchPrint(<span class="hljs-string">"æ—¥å¿—"</span>, <span class="hljs-string">"ç³»ç»Ÿå¯åŠ¨æˆåŠŸ"</span>, <span class="hljs-string">"ç”¨æˆ·ç™»å½•"</span>, <span class="hljs-string">"æ•°æ®åŒæ­¥å®Œæˆ"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-comment">=== æ‰¹é‡æ‰“å°å¼€å§‹ ===</span>
ç”¨æˆ· 1ï¼šå¼ ä¸‰
ç”¨æˆ· 2ï¼šæå››
ç”¨æˆ· 3ï¼šç‹äº”
ç”¨æˆ· 4ï¼šèµµå…­
<span class="hljs-comment">=== æ‰¹é‡æ‰“å°ç»“æŸ ===</span>
<span class="hljs-comment">=== æ‰¹é‡æ‰“å°å¼€å§‹ ===</span>
æ—¥å¿— 1ï¼šç³»ç»Ÿå¯åŠ¨æˆåŠŸ
æ—¥å¿— 2ï¼šç”¨æˆ·ç™»å½•
æ—¥å¿— 3ï¼šæ•°æ®åŒæ­¥å®Œæˆ
<span class="hljs-comment">=== æ‰¹é‡æ‰“å°ç»“æŸ ===</span>

</code></pre>
<h2 data-id="heading-14">ä¸‰ã€å±€éƒ¨å‡½æ•° è¯¦è§£</h2>
<h3 data-id="heading-15">3.1 ä»€ä¹ˆæ˜¯å±€éƒ¨å‡½æ•°ï¼Ÿï¼ˆå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼‰</h3>
<p>å±€éƒ¨å‡½æ•°ï¼ˆLocal Functionï¼‰æ˜¯æŒ‡åœ¨<strong>å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°</strong>ï¼Œå®ƒåªåœ¨å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œå¤–éƒ¨å‡½æ•°ä¹‹å¤–æ— æ³•è°ƒç”¨ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯â€œå‡½æ•°é‡Œå¥—å‡½æ•°â€ï¼Œå±€éƒ¨å‡½æ•°ä¸“é—¨ä¸ºå¤–éƒ¨å‡½æ•°æœåŠ¡ï¼Œç”¨äºå°è£…å¤–éƒ¨å‡½æ•°å†…éƒ¨çš„é‡å¤é€»è¾‘ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªâ€œç”¨æˆ·æ³¨å†Œâ€å‡½æ•°ï¼Œå†…éƒ¨éœ€è¦å¤šæ¬¡æ ¡éªŒâ€œç”¨æˆ·åä¸ä¸ºç©ºâ€â€œå¯†ç é•¿åº¦ä¸å°äº 6 ä½â€è¿™äº›é€»è¾‘ï¼Œå¦‚æœç›´æ¥é‡å¤ç¼–å†™æ ¡éªŒä»£ç ä¼šå¾ˆå†—ä½™ï¼Œè¿™æ—¶å°±å¯ä»¥æŠŠæ ¡éªŒé€»è¾‘å°è£…æˆå±€éƒ¨å‡½æ•°ï¼Œåœ¨å¤–éƒ¨å‡½æ•°å†…éƒ¨é‡å¤è°ƒç”¨ã€‚</p>
<h3 data-id="heading-16">3.2 å±€éƒ¨å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ï¼ˆè¯­æ³•æ ¼å¼ + åŸºç¡€ç¤ºä¾‹ï¼‰</h3>
<h4 data-id="heading-17">3.2.1 è¯­æ³•æ ¼å¼</h4>
<p>å±€éƒ¨å‡½æ•°çš„å®šä¹‰è¯­æ³•å’Œæ™®é€šå‡½æ•°ä¸€è‡´ï¼Œåªæ˜¯ä½ç½®åœ¨å¦ä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> å¤–éƒ¨å‡½æ•°å<span class="hljs-params">(å¤–éƒ¨å‚æ•°: ç±»å‹)</span></span>: è¿”å›ç±»å‹ {
    <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°çš„å˜é‡</span>
    <span class="hljs-keyword">val</span> å˜é‡å = åˆå§‹å€¼

    <span class="hljs-comment">// å®šä¹‰å±€éƒ¨å‡½æ•°ï¼ˆä»…åœ¨å¤–éƒ¨å‡½æ•°å†…éƒ¨å¯è§ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> å±€éƒ¨å‡½æ•°å<span class="hljs-params">(å±€éƒ¨å‚æ•°: ç±»å‹)</span></span>: è¿”å›ç±»å‹ {
        <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ä½“ï¼šå¯è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°</span>
    }

    <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°ä½“ï¼šè°ƒç”¨å±€éƒ¨å‡½æ•°</span>
    <span class="hljs-keyword">val</span> ç»“æœ = å±€éƒ¨å‡½æ•°å(å‚æ•°å€¼)
    <span class="hljs-keyword">return</span> ç»“æœ
}

</code></pre>
<h4 data-id="heading-18">3.2.2 åŸºç¡€ç¤ºä¾‹</h4>
<p>ä»¥â€œç”¨æˆ·æ³¨å†Œâ€ä¸ºä¾‹ï¼Œå°†â€œæ ¡éªŒç”¨æˆ·åâ€å’Œâ€œæ ¡éªŒå¯†ç â€çš„é€»è¾‘å°è£…æˆå±€éƒ¨å‡½æ•°ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤–éƒ¨å‡½æ•°ï¼šç”¨æˆ·æ³¨å†Œ
 * <span class="hljs-doctag">@param</span> username ç”¨æˆ·å
 * <span class="hljs-doctag">@param</span> password å¯†ç 
 * <span class="hljs-doctag">@return</span> æ³¨å†Œç»“æœï¼ˆæˆåŠŸ/å¤±è´¥åŸå› ï¼‰
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">userRegister</span><span class="hljs-params">(username: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°1ï¼šæ ¡éªŒç”¨æˆ·åï¼ˆä»…åœ¨ userRegister å†…éƒ¨å¯ç”¨ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkUsername</span><span class="hljs-params">()</span></span>: String? {
        <span class="hljs-comment">// å¯ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•° username</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
            username.isEmpty() -&gt; <span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>
            username.length &lt; <span class="hljs-number">3</span> -&gt; <span class="hljs-string">"ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº3ä½"</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">null</span> <span class="hljs-comment">// æ ¡éªŒé€šè¿‡ï¼Œè¿”å› null</span>
        }
    }

    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°2ï¼šæ ¡éªŒå¯†ç ï¼ˆä»…åœ¨ userRegister å†…éƒ¨å¯ç”¨ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPassword</span><span class="hljs-params">()</span></span>: String? {
        <span class="hljs-comment">// å¯ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•° password</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
            password.isEmpty() -&gt; <span class="hljs-string">"å¯†ç ä¸èƒ½ä¸ºç©º"</span>
            password.length &lt; <span class="hljs-number">6</span> -&gt; <span class="hljs-string">"å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä½"</span>
            !password.any { it.isDigit() } -&gt; <span class="hljs-string">"å¯†ç å¿…é¡»åŒ…å«æ•°å­—"</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">null</span> <span class="hljs-comment">// æ ¡éªŒé€šè¿‡ï¼Œè¿”å› null</span>
        }
    }

    <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°é€»è¾‘ï¼šè°ƒç”¨å±€éƒ¨å‡½æ•°è¿›è¡Œæ ¡éªŒ</span>
    <span class="hljs-keyword">val</span> usernameError = checkUsername()
    <span class="hljs-keyword">if</span> (usernameError != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ³¨å†Œå¤±è´¥ï¼š<span class="hljs-variable">$usernameError</span>"</span>
    }

    <span class="hljs-keyword">val</span> passwordError = checkPassword()
    <span class="hljs-keyword">if</span> (passwordError != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ³¨å†Œå¤±è´¥ï¼š<span class="hljs-variable">$passwordError</span>"</span>
    }

    <span class="hljs-comment">// æ ¡éªŒé€šè¿‡ï¼Œè¿”å›æˆåŠŸä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æ³¨å†ŒæˆåŠŸï¼ç”¨æˆ·åï¼š<span class="hljs-variable">$username</span>"</span>
}

<span class="hljs-comment">// è°ƒç”¨å¤–éƒ¨å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(userRegister(<span class="hljs-string">"zhangsan"</span>, <span class="hljs-string">"123456"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼šæ³¨å†ŒæˆåŠŸï¼ç”¨æˆ·åï¼šzhangsan</span>
    println(userRegister(<span class="hljs-string">"zh"</span>, <span class="hljs-string">"123456"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼šæ³¨å†Œå¤±è´¥ï¼šç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº3ä½</span>
    println(userRegister(<span class="hljs-string">"lisi"</span>, <span class="hljs-string">"12345"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼šæ³¨å†Œå¤±è´¥ï¼šå¯†ç é•¿åº¦ä¸èƒ½å°äº6ä½</span>
    println(userRegister(<span class="hljs-string">"wangwu"</span>, <span class="hljs-string">"abcdef"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼šæ³¨å†Œå¤±è´¥ï¼šå¯†ç å¿…é¡»åŒ…å«æ•°å­—</span>
}

</code></pre>
<p>ä»ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œå±€éƒ¨å‡½æ•°å°†å¤–éƒ¨å‡½æ•°çš„å†—ä½™é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œè®©å¤–éƒ¨å‡½æ•°çš„ä¸»é€»è¾‘ï¼ˆæ³¨å†Œæµç¨‹ï¼‰æ›´æ¸…æ™°ï¼ŒåŒæ—¶å±€éƒ¨å‡½æ•°å¯ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°ï¼Œæ— éœ€é¢å¤–ä¼ é€’ã€‚</p>
<h3 data-id="heading-19">3.3 å±€éƒ¨å‡½æ•°çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆè®¿é—®å¤–éƒ¨å‡½æ•°å˜é‡ã€å°è£…å¤ç”¨ï¼‰</h3>
<h4 data-id="heading-20">3.3.1 ç‰¹æ€§ 1ï¼šå¯ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°</h4>
<p>å±€éƒ¨å‡½æ•°çš„æœ€å¤§ç‰¹æ€§ä¹‹ä¸€æ˜¯â€œä½œç”¨åŸŸåµŒå¥—â€â€”â€”å®ƒå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ï¼Œç”šè‡³ä¿®æ”¹å¤–éƒ¨å‡½æ•°çš„å¯å˜å˜é‡ï¼ˆå¦‚ var ä¿®é¥°çš„å˜é‡ï¼‰ã€‚è¿™ç§ç‰¹æ€§è®©å±€éƒ¨å‡½æ•°æ— éœ€é€šè¿‡å‚æ•°ä¼ é€’å°±èƒ½è·å–å¤–éƒ¨æ•°æ®ï¼Œç®€åŒ–äº†è°ƒç”¨é€»è¾‘ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤–éƒ¨å‡½æ•°ï¼šè®¡ç®—å¤šä¸ªæ•°å­—çš„å¹³æ–¹å’Œ
 * <span class="hljs-doctag">@param</span> numbers å¯å˜å‚æ•°ï¼Œæ¥æ”¶å¤šä¸ªæ•´æ•°
 * <span class="hljs-doctag">@return</span> æ‰€æœ‰æ•°å­—çš„å¹³æ–¹å’Œ
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">squareSum</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> numbers: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">var</span> total = <span class="hljs-number">0</span> <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°çš„å¯å˜å˜é‡</span>

    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ï¼šè®¡ç®—å•ä¸ªæ•°å­—çš„å¹³æ–¹ï¼Œå¹¶ç´¯åŠ åˆ° total</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSquare</span><span class="hljs-params">(num: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// ç›´æ¥è®¿é—®å¹¶ä¿®æ”¹å¤–éƒ¨å‡½æ•°çš„å˜é‡ total</span>
        total += num * num
    }

    <span class="hljs-comment">// éå†æ‰€æœ‰æ•°å­—ï¼Œè°ƒç”¨å±€éƒ¨å‡½æ•°ç´¯åŠ </span>
    numbers.forEach { addSquare(it) }
    <span class="hljs-keyword">return</span> total
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> sum1 = squareSum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    println(<span class="hljs-string">"1Â²+2Â²+3Â² = <span class="hljs-variable">$sum1</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼š1Â²+2Â²+3Â² = 14</span>

    <span class="hljs-keyword">val</span> sum2 = squareSum(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    println(<span class="hljs-string">"4Â²+5Â² = <span class="hljs-variable">$sum2</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼š4Â²+5Â² = 41</span>
}

</code></pre>
<p>ç¤ºä¾‹ä¸­ï¼Œå±€éƒ¨å‡½æ•° <code>addSquare</code> ç›´æ¥ä¿®æ”¹äº†å¤–éƒ¨å‡½æ•°çš„ <code>total</code> å˜é‡ï¼Œé¿å…äº†é€šè¿‡è¿”å›å€¼ä¼ é€’ä¸­é—´ç»“æœï¼Œé€»è¾‘æ›´ç®€æ´ã€‚</p>
<h4 data-id="heading-21">3.3.2 ç‰¹æ€§ 2ï¼šå°è£…å¤ç”¨ï¼Œéšè—å†…éƒ¨é€»è¾‘</h4>
<p>å±€éƒ¨å‡½æ•°ä»…åœ¨å¤–éƒ¨å‡½æ•°å†…éƒ¨å¯è§ï¼Œå¤–éƒ¨æ— æ³•è°ƒç”¨ï¼Œè¿™ç§â€œéšè—æ€§â€è®©å®ƒéå¸¸é€‚åˆå°è£…å¤–éƒ¨å‡½æ•°çš„å†…éƒ¨è¾…åŠ©é€»è¾‘â€”â€”æ—¢å®ç°äº†é‡å¤é€»è¾‘çš„å¤ç”¨ï¼Œåˆä¸ä¼šæ±¡æŸ“å¤–éƒ¨ä½œç”¨åŸŸï¼ˆé¿å…å®šä¹‰ä¸å¿…è¦çš„é¡¶å±‚å‡½æ•°ï¼‰ã€‚</p>
<p>æ¯”å¦‚å‰é¢çš„ç”¨æˆ·æ³¨å†Œç¤ºä¾‹ï¼Œæ ¡éªŒé€»è¾‘åªåœ¨æ³¨å†Œå‡½æ•°ä¸­ç”¨åˆ°ï¼Œå°è£…æˆå±€éƒ¨å‡½æ•°åï¼Œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹è¢«è¯¯è°ƒç”¨ï¼Œä¿è¯äº†ä»£ç çš„â€œé«˜å†…èšâ€ã€‚</p>
<h3 data-id="heading-22">3.4 å®ç”¨åœºæ™¯ä¸¾ä¾‹ï¼ˆå¦‚ï¼šæ ¡éªŒé€»è¾‘å°è£…ã€é‡å¤é€»è¾‘æå–ï¼‰</h3>
<h4 data-id="heading-23">3.4.1 åœºæ™¯ 1ï¼šè¡¨å•æ ¡éªŒé€»è¾‘å°è£…</h4>
<p>è¡¨å•æäº¤æ˜¯å¼€å‘ä¸­æœ€å¸¸è§çš„åœºæ™¯ä¹‹ä¸€ï¼Œå¦‚ç™»å½•ã€æ³¨å†Œã€ä¿¡æ¯ä¿®æ”¹ç­‰ï¼Œè¿™ç±»åœºæ™¯é€šå¸¸éœ€è¦æ ¡éªŒå¤šä¸ªå­—æ®µï¼Œä¸”æ ¡éªŒé€»è¾‘åªé’ˆå¯¹å½“å‰è¡¨å•ã€‚ç”¨å±€éƒ¨å‡½æ•°å°è£…æ ¡éªŒé€»è¾‘ï¼Œèƒ½è®©è¡¨å•å¤„ç†å‡½æ•°çš„ä¸»é€»è¾‘æ›´æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤–éƒ¨å‡½æ•°ï¼šå¤„ç†ç™»å½•è¡¨å•æäº¤
 * <span class="hljs-doctag">@param</span> username ç”¨æˆ·å
 * <span class="hljs-doctag">@param</span> password å¯†ç 
 * <span class="hljs-doctag">@param</span> verifyCode éªŒè¯ç 
 * <span class="hljs-doctag">@return</span> æäº¤ç»“æœ
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loginSubmit</span><span class="hljs-params">(username: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>, verifyCode: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ï¼šç»Ÿä¸€çš„éç©ºæ ¡éªŒé€»è¾‘</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkNotEmpty</span><span class="hljs-params">(value: <span class="hljs-type">String</span>, fieldName: <span class="hljs-type">String</span>)</span></span>: String? {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (value.isEmpty()) <span class="hljs-string">"<span class="hljs-variable">$fieldName</span>ä¸èƒ½ä¸ºç©º"</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ï¼šéªŒè¯ç æ ¡éªŒé€»è¾‘</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkVerifyCode</span><span class="hljs-params">()</span></span>: String? {
        <span class="hljs-keyword">val</span> correctCode = <span class="hljs-string">"123456"</span> <span class="hljs-comment">// å®é™…å¼€å‘ä¸­ä»ç¼“å­˜è·å–</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (verifyCode != correctCode) <span class="hljs-string">"éªŒè¯ç é”™è¯¯"</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">// 1. è°ƒç”¨å±€éƒ¨å‡½æ•°æ ¡éªŒå„å­—æ®µ</span>
    <span class="hljs-keyword">val</span> usernameError = checkNotEmpty(username, <span class="hljs-string">"ç”¨æˆ·å"</span>)
    <span class="hljs-keyword">if</span> (usernameError != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"ç™»å½•å¤±è´¥ï¼š<span class="hljs-variable">$usernameError</span>"</span>

    <span class="hljs-keyword">val</span> passwordError = checkNotEmpty(password, <span class="hljs-string">"å¯†ç "</span>)
    <span class="hljs-keyword">if</span> (passwordError != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"ç™»å½•å¤±è´¥ï¼š<span class="hljs-variable">$passwordError</span>"</span>

    <span class="hljs-keyword">val</span> codeError = checkVerifyCode()
    <span class="hljs-keyword">if</span> (codeError != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"ç™»å½•å¤±è´¥ï¼š<span class="hljs-variable">$codeError</span>"</span>

    <span class="hljs-comment">// 2. æ ¡éªŒé€šè¿‡ï¼Œæ‰§è¡Œç™»å½•é€»è¾‘ï¼ˆæ¨¡æ‹Ÿï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç™»å½•æˆåŠŸï¼æ¬¢è¿ <span class="hljs-variable">$username</span>"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(loginSubmit(<span class="hljs-string">"zhangsan"</span>, <span class="hljs-string">"123456"</span>, <span class="hljs-string">"123456"</span>)) <span class="hljs-comment">// ç™»å½•æˆåŠŸ</span>
    println(loginSubmit(<span class="hljs-string">""</span>, <span class="hljs-string">"123456"</span>, <span class="hljs-string">"123456"</span>)) <span class="hljs-comment">// ç™»å½•å¤±è´¥ï¼šç”¨æˆ·åä¸èƒ½ä¸ºç©º</span>
    println(loginSubmit(<span class="hljs-string">"lisi"</span>, <span class="hljs-string">"123456"</span>, <span class="hljs-string">"654321"</span>)) <span class="hljs-comment">// ç™»å½•å¤±è´¥ï¼šéªŒè¯ç é”™è¯¯</span>
}

</code></pre>
<h4 data-id="heading-24">3.4.2 åœºæ™¯ 2ï¼šå‡½æ•°å†…éƒ¨é‡å¤é€»è¾‘æå–</h4>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°å†…éƒ¨æœ‰å¤šæ¬¡é‡å¤æ‰§è¡Œçš„ä»£ç ç‰‡æ®µï¼ˆæ¯”å¦‚é‡å¤çš„è®¡ç®—ã€æ‰“å°é€»è¾‘ï¼‰ï¼Œå°†å…¶æå–ä¸ºå±€éƒ¨å‡½æ•°ï¼Œèƒ½å¤§å¹…å‡å°‘ä»£ç å†—ä½™ã€‚ä¸‹é¢ä»¥â€œç”ŸæˆæŒ‡å®šæ ¼å¼çš„æ—¥å¿—â€ä¸ºä¾‹ï¼Œæ—¥å¿—å‰ç¼€éœ€è¦é‡å¤æ‹¼æ¥ï¼Œç”¨å±€éƒ¨å‡½æ•°ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤–éƒ¨å‡½æ•°ï¼šæ¨¡æ‹Ÿæ•°æ®å¤„ç†ï¼Œå¹¶æ‰“å°ä¸åŒé˜¶æ®µçš„æ—¥å¿—
 * <span class="hljs-doctag">@param</span> data å¾…å¤„ç†çš„æ•°æ®
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ï¼šç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„æ—¥å¿—å‰ç¼€ï¼ˆé‡å¤é€»è¾‘æå–ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLogPrefix</span><span class="hljs-params">(phase: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">val</span> time = System.currentTimeMillis() <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"[<span class="hljs-variable">$time</span>] [<span class="hljs-subst">${phase}</span>]"</span>
    }

    <span class="hljs-comment">// é˜¶æ®µ1ï¼šæ•°æ®æ¥æ”¶</span>
    println(<span class="hljs-string">"<span class="hljs-subst">${getLogPrefix(<span class="hljs-string">"æ¥æ”¶æ•°æ®"</span>)}</span> æ•°æ®å·²æ¥æ”¶ï¼š<span class="hljs-variable">$data</span>"</span>)
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ</span>
    Thread.sleep(<span class="hljs-number">100</span>)

    <span class="hljs-comment">// é˜¶æ®µ2ï¼šæ•°æ®è§£æ</span>
    <span class="hljs-keyword">val</span> parsedData = <span class="hljs-keyword">data</span>.uppercase() <span class="hljs-comment">// æ¨¡æ‹Ÿè§£æï¼šè½¬ä¸ºå¤§å†™</span>
    println(<span class="hljs-string">"<span class="hljs-subst">${getLogPrefix(<span class="hljs-string">"è§£ææ•°æ®"</span>)}</span> æ•°æ®è§£æå®Œæˆï¼š<span class="hljs-variable">$parsedData</span>"</span>)
    Thread.sleep(<span class="hljs-number">100</span>)

    <span class="hljs-comment">// é˜¶æ®µ3ï¼šæ•°æ®å­˜å‚¨</span>
    println(<span class="hljs-string">"<span class="hljs-subst">${getLogPrefix(<span class="hljs-string">"å­˜å‚¨æ•°æ®"</span>)}</span> æ•°æ®å­˜å‚¨æˆåŠŸ"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    processData(<span class="hljs-string">"kotlin-vararg-local-function"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[1731678900123]</span> <span class="hljs-selector-attr">[æ¥æ”¶æ•°æ®]</span> æ•°æ®å·²æ¥æ”¶ï¼škotlin-vararg-local-function
<span class="hljs-selector-attr">[1731678900225]</span> <span class="hljs-selector-attr">[è§£ææ•°æ®]</span> æ•°æ®è§£æå®Œæˆï¼šKOTLIN-VARARG-LOCAL-FUNCTION
<span class="hljs-selector-attr">[1731678900326]</span> <span class="hljs-selector-attr">[å­˜å‚¨æ•°æ®]</span> æ•°æ®å­˜å‚¨æˆåŠŸ

</code></pre>
<p>ç¤ºä¾‹ä¸­ï¼Œâ€œç”Ÿæˆæ—¥å¿—å‰ç¼€â€çš„é€»è¾‘è¢«æå–ä¸ºå±€éƒ¨å‡½æ•° <code>getLogPrefix</code>ï¼Œé¿å…äº†åœ¨ä¸‰ä¸ªé˜¶æ®µé‡å¤ç¼–å†™â€œè·å–æ—¶é—´æˆ³+æ‹¼æ¥å‰ç¼€â€çš„ä»£ç ï¼Œè®©ä»£ç æ›´ç®€æ´å¯ç»´æŠ¤ã€‚</p>
<h2 data-id="heading-25">å››ã€å¯å˜å‚æ•°ä¸å±€éƒ¨å‡½æ•° ç»“åˆç¤ºä¾‹</h2>
<h3 data-id="heading-26">4.1 ç®€å•å¤åˆåœºæ™¯ï¼ˆå¦‚ï¼šå¯å˜å‚æ•°æ¥æ”¶æ•°æ® + å±€éƒ¨å‡½æ•°å¤„ç†æ•°æ®ï¼‰</h3>
<p>å¯å˜å‚æ•°çš„ä¼˜åŠ¿æ˜¯â€œæ¥æ”¶ä»»æ„æ•°é‡çš„åŒç±»å‹æ•°æ®â€ï¼Œå±€éƒ¨å‡½æ•°çš„ä¼˜åŠ¿æ˜¯â€œå°è£…å‡½æ•°å†…éƒ¨é‡å¤é€»è¾‘â€ï¼Œä¸¤è€…ç»“åˆå¯ä»¥å®ç°â€œæ‰¹é‡æ¥æ”¶æ•°æ® + ç»Ÿä¸€å¤„ç†æ•°æ®â€çš„åœºæ™¯ã€‚ä¸‹é¢ä»¥â€œæ‰¹é‡æ ¡éªŒæ‰‹æœºå·æ ¼å¼ï¼Œå¹¶è¿”å›æ ¡éªŒç»“æœâ€ä¸ºä¾‹ï¼Œå±•ç¤ºä¸¤è€…çš„ååŒä½œç”¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤åˆåœºæ™¯ï¼šæ‰¹é‡æ ¡éªŒæ‰‹æœºå·æ ¼å¼
 * <span class="hljs-doctag">@param</span> phones å¯å˜å‚æ•°ï¼Œæ¥æ”¶ä»»æ„æ•°é‡çš„æ‰‹æœºå·å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@return</span> æ ¡éªŒç»“æœåˆ—è¡¨ï¼ˆæ¯ä¸ªæ‰‹æœºå·å¯¹åº”ä¸€ä¸ªç»“æœï¼‰
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">batchCheckPhone</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> phones: <span class="hljs-type">String</span>)</span></span>: List&lt;String&gt; {
    <span class="hljs-comment">// å±€éƒ¨å‡½æ•°ï¼šå•ä¸ªæ‰‹æœºå·æ ¼å¼æ ¡éªŒï¼ˆå°è£…é‡å¤å¤„ç†é€»è¾‘ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkSinglePhone</span><span class="hljs-params">(phone: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-comment">// æ‰‹æœºå·æ­£åˆ™è¡¨è¾¾å¼ï¼ˆç®€å•åŒ¹é…11ä½æ•°å­—ï¼‰</span>
        <span class="hljs-keyword">val</span> phoneRegex = <span class="hljs-string">"^1[3-9]\\d{9}$"</span>.toRegex()
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (phone.matches(phoneRegex)) {
            <span class="hljs-string">"æ‰‹æœºå· <span class="hljs-variable">$phone</span>ï¼šæ ¼å¼æ­£ç¡®"</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-string">"æ‰‹æœºå· <span class="hljs-variable">$phone</span>ï¼šæ ¼å¼é”™è¯¯ï¼ˆéœ€ä¸º11ä½æœ‰æ•ˆæ•°å­—ï¼‰"</span>
        }
    }

    <span class="hljs-comment">// å¯å˜å‚æ•°æ¥æ”¶æ•°æ®ï¼Œéå†åè°ƒç”¨å±€éƒ¨å‡½æ•°å¤„ç†ï¼Œæ”¶é›†ç»“æœ</span>
    <span class="hljs-keyword">val</span> resultList = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">for</span> (phone <span class="hljs-keyword">in</span> phones) {
        <span class="hljs-keyword">val</span> result = checkSinglePhone(phone)
        resultList.add(result)
    }
    <span class="hljs-keyword">return</span> resultList
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ä¼ é€’å¤šä¸ªæ‰‹æœºå·ï¼ˆå¯å˜å‚æ•°ï¼‰ï¼Œè·å–æ ¡éªŒç»“æœ</span>
    <span class="hljs-keyword">val</span> checkResults = batchCheckPhone(
        <span class="hljs-string">"13800138000"</span>,
        <span class="hljs-string">"1234567890"</span>,
        <span class="hljs-string">"139123456789"</span>,
        <span class="hljs-string">"18888888888"</span>
    )

    <span class="hljs-comment">// æ‰“å°æ ¡éªŒç»“æœ</span>
    checkResults.forEach { println(it) }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs">æ‰‹æœºå· 13800138000ï¼šæ ¼å¼æ­£ç¡®
æ‰‹æœºå· 1234567890ï¼šæ ¼å¼é”™è¯¯ï¼ˆéœ€ä¸º11ä½æœ‰æ•ˆæ•°å­—ï¼‰
æ‰‹æœºå· 139123456789ï¼šæ ¼å¼é”™è¯¯ï¼ˆéœ€ä¸º11ä½æœ‰æ•ˆæ•°å­—ï¼‰
æ‰‹æœºå· 18888888888ï¼šæ ¼å¼æ­£ç¡®

</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå¯å˜å‚æ•° <code>phones</code> å®ç°äº†â€œæ‰¹é‡æ¥æ”¶æ‰‹æœºå·â€çš„éœ€æ±‚ï¼Œå±€éƒ¨å‡½æ•° <code>checkSinglePhone</code> å°è£…äº†â€œå•ä¸ªæ‰‹æœºå·æ ¡éªŒâ€çš„é‡å¤é€»è¾‘ï¼Œä¸¤è€…ç»“åˆè®©ä»£ç æ—¢çµæ´»åˆç®€æ´â€”â€”æ—¢æ”¯æŒä»»æ„æ•°é‡çš„æ‰‹æœºå·æ ¡éªŒï¼Œåˆé¿å…äº†é‡å¤ç¼–å†™æ ¡éªŒé€»è¾‘ã€‚</p>
<h2 data-id="heading-27">äº”ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-28">5.1 æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h3>
<h4 data-id="heading-29">5.1.1 å¯å˜å‚æ•°ï¼ˆvarargï¼‰</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šç”¨ <code>vararg</code> ä¿®é¥°å‚æ•°ï¼Œå…è®¸æ¥æ”¶ä»»æ„æ•°é‡çš„åŒç±»å‹å‚æ•°ï¼Œå‡½æ•°å†…éƒ¨å½“ä½œæ•°ç»„å¤„ç†ã€‚</li>
<li><strong>ç”¨æ³•</strong>ï¼šè°ƒç”¨æ—¶å¯ç›´æ¥ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œä¼ é€’æ•°ç»„éœ€ç”¨  è¿ç®—ç¬¦å±•å¼€ã€‚</li>
<li><strong>å…³é”®</strong>ï¼šä¸€ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œå»ºè®®æ”¾åœ¨å‚æ•°åˆ—è¡¨æœ€åã€‚</li>
</ul>
<h4 data-id="heading-30">5.1.2 å±€éƒ¨å‡½æ•°</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼Œä»…åœ¨å¤–éƒ¨å‡½æ•°å†…éƒ¨å¯è§ã€‚</li>
<li><strong>ç‰¹æ€§</strong>ï¼šå¯ç›´æ¥è®¿é—®/ä¿®æ”¹å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°ï¼Œå®ç°å†…éƒ¨é€»è¾‘å°è£…å¤ç”¨ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå‡å°‘å¤–éƒ¨å‡½æ•°å†—ä½™ä»£ç ï¼Œéšè—å†…éƒ¨è¾…åŠ©é€»è¾‘ï¼Œä¸æ±¡æŸ“å¤–éƒ¨ä½œç”¨åŸŸã€‚</li>
</ul>
<h4 data-id="heading-31">5.1.3 ä¸¤è€…ç»“åˆ</h4>
<p>å¯å˜å‚æ•°è´Ÿè´£â€œæ‰¹é‡æ¥æ”¶æ•°æ®â€ï¼Œå±€éƒ¨å‡½æ•°è´Ÿè´£â€œå°è£…é‡å¤å¤„ç†é€»è¾‘â€ï¼Œç»“åˆåå¯é«˜æ•ˆå®ç°â€œæ‰¹é‡æ•°æ®å¤„ç†â€åœºæ™¯ã€‚</p>
<h3 data-id="heading-32">5.2 æ—¥å¸¸å¼€å‘ä½¿ç”¨å»ºè®®ï¼ˆä½•æ—¶ç”¨ã€é¿å‘ç‚¹ï¼‰</h3>
<h4 data-id="heading-33">5.2.1 ä½•æ—¶ä½¿ç”¨å¯å˜å‚æ•°ï¼Ÿ</h4>
<ul>
<li>å‡½æ•°éœ€è¦æ¥æ”¶â€œä¸ç¡®å®šæ•°é‡çš„åŒç±»å‹å‚æ•°â€æ—¶ï¼Œå¦‚æ±‚å’Œã€æ‰¹é‡æ‰“å°ã€æ‰¹é‡æ ¡éªŒç­‰åœºæ™¯ã€‚</li>
<li>é¿å…å®šä¹‰å¤šä¸ªå‚æ•°æ•°é‡ä¸åŒçš„é‡è½½å‡½æ•°ï¼ˆå¦‚ sum2ã€sum3ã€sum4ï¼‰ï¼Œç”¨ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°æ›¿ä»£ã€‚</li>
</ul>
<h4 data-id="heading-34">5.2.2 ä½•æ—¶ä½¿ç”¨å±€éƒ¨å‡½æ•°ï¼Ÿ</h4>
<ul>
<li>å¤–éƒ¨å‡½æ•°å†…éƒ¨æœ‰â€œé‡å¤æ‰§è¡Œçš„é€»è¾‘ç‰‡æ®µâ€æ—¶ï¼Œå¦‚å¤šæ¬¡æ ¡éªŒã€é‡å¤è®¡ç®—ã€é‡å¤æ ¼å¼åŒ–ç­‰ã€‚</li>
<li>è¾…åŠ©é€»è¾‘ä»…åœ¨å½“å‰å‡½æ•°ä¸­ç”¨åˆ°ï¼Œæ— éœ€æš´éœ²ç»™å¤–éƒ¨ï¼ˆé¿å…å®šä¹‰é¡¶å±‚è¾…åŠ©å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-35">5.2.3 é¿å‘ç‚¹</h4>
<ul>
<li><strong>å¯å˜å‚æ•°é¿å‘</strong>ï¼šâ‘  ä¸è¦å°†å¯å˜å‚æ•°æ”¾åœ¨éæœ€åä½ç½®ï¼Œå¦åˆ™è°ƒç”¨éœ€ç”¨å‘½åå‚æ•°ï¼Œæ˜“å‡ºé”™ï¼›â‘¡ ä¼ é€’æ•°ç»„å¿…é¡»åŠ   è¿ç®—ç¬¦ï¼Œå¦åˆ™ä¼šè¢«å½“ä½œå•ä¸ªå‚æ•°ã€‚</li>
<li><strong>å±€éƒ¨å‡½æ•°é¿å‘</strong>ï¼šâ‘  å±€éƒ¨å‡½æ•°ä¸èƒ½è®¿é—®å¤–éƒ¨å‡½æ•°çš„ <code>val</code> å˜é‡ååˆä¿®æ”¹å®ƒï¼ˆval ä¸å¯å˜ï¼‰ï¼›â‘¡ é¿å…å±€éƒ¨å‡½æ•°åµŒå¥—è¿‡æ·±ï¼ˆå¦‚å‡½æ•°é‡Œå¥—å‡½æ•°å†å¥—å‡½æ•°ï¼‰ï¼Œä¼šé™ä½ä»£ç å¯è¯»æ€§ã€‚</li>
<li><strong>é€šç”¨é¿å‘</strong>ï¼šæ— è®ºä½¿ç”¨å“ªç§ç‰¹æ€§ï¼Œéƒ½è¦ä¿è¯ä»£ç é€»è¾‘æ¸…æ™°â€”â€”ä¸è¦ä¸ºäº†ç”¨ç‰¹æ€§è€Œç”¨ç‰¹æ€§ï¼Œå†—ä½™ä»£ç å°‘ã€å¯è¯»æ€§é«˜æ‰æ˜¯æ ¸å¿ƒç›®æ ‡ã€‚</li>
</ul>
<p>å¯å˜å‚æ•°å’Œå±€éƒ¨å‡½æ•°æ˜¯ Kotlin ä¸­æå‡ä»£ç è´¨é‡çš„é‡è¦è¿›é˜¶ç‰¹æ€§ï¼Œå®ƒä»¬çš„ç”¨æ³•ä¸ç®—å¤æ‚ï¼Œä½†èƒ½è§£å†³å¾ˆå¤šå®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚å»ºè®®å¤§å®¶åœ¨å¼€å‘ä¸­æ ¹æ®åœºæ™¯çµæ´»è¿ç”¨ï¼Œè®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>