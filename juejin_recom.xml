<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä½¿ç”¨ && æ•´åˆäº‹ä»¶ï¼Œç®€åŒ–ä»£ç ]]></title>    <link>https://juejin.cn/post/7599483314160730131</link>    <guid>https://juejin.cn/post/7599483314160730131</guid>    <pubDate>2026-01-26T13:32:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599483314160730131" data-draft-id="7598587406708129833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ &amp;&amp; æ•´åˆäº‹ä»¶ï¼Œç®€åŒ–ä»£ç "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T13:32:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ªåˆ€çŸ³å¤´å¸ƒå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1855631360014798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ &amp;&amp; æ•´åˆäº‹ä»¶ï¼Œç®€åŒ–ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631360014798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ªåˆ€çŸ³å¤´å¸ƒå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T13:32:28.000Z" title="Mon Jan 26 2026 13:32:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>js ä¸­ &amp;&amp; å’Œ || ä½¿ç”¨å¥½äº†ï¼Œæœ‰æ—¶å€™èƒ½å¤Ÿå°†æˆ‘ä»¬çš„ä»£ç å†™çš„æ›´èˆ’æœï¼Œç”šè‡³é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œåˆç†çš„åˆ©ç”¨ä»–ä»¬ï¼Œèƒ½è®©æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥å«é‡‘é‡æ›´é«˜ä¸€äº›</p>
<p>psï¼šå½“ç„¶ä¸ä¸€å®šæ˜¯çœŸçš„å«é‡‘é‡é«˜å¾ˆå¤šï¼Œå¦‚æœå¯¹äºç”¨ä¹ æƒ¯çš„æ¥è¯´ï¼Œç¡®å®é€»è¾‘æ›´ç´§å¯†äº†ï¼Œä¸ªäººå‡å°‘äº†å¾ˆå¤šä»£ç å’Œå¤šä½™åˆ¤æ–­ğŸ˜„</p>
<p>&amp;&amp; æ˜¯è¿”å›ç¬¦åˆæ¡ä»¶çš„æœ€åä¸€é¡¹æˆ–ä¸ç¬¦åˆçš„ç¬¬ä¸€é¡¹ || æ˜¯è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€é¡¹æˆ–ä¸ç¬¦åˆçš„æœ€åä¸€é¡¹</p>
<p>è¿™é‡Œå°±ä½¿ç”¨ &amp;&amp; ä¸¾ä¸ªæ¡ˆä¾‹ï¼Œ || ç›¸ä¿¡é‡åˆ°åˆé€‚åœºæ™¯ï¼Œè‡ªå·±å°±çŸ¥é“å’‹å›äº‹äº†</p>
<h2 data-id="heading-1">æ¡ˆä¾‹</h2>
<p>æˆ‘æœ‰ä¸€ä¸ªå¼¹çª—ï¼Œç‚¹å‡»ç¡®å®šåï¼Œå°†é€‰ä¸­å†…å®¹åå›è°ƒç»™å¤–éƒ¨ï¼Œå¦åˆ™æç¤ºè¯·é€‰æ‹©æ•°æ®</p>
<p>è®©aiå¸®æˆ‘å†™è¿™ä¸€å—ä»£ç ï¼Œæ˜¯è¿™æ ·çš„ï¼Œç®€å•ç²—æš´æ˜“æ‡‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//pageInfo å’Œ onOk å·²ç»å®šä¹‰å¥½äº†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onComplete</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { dataSource, key } = pageInfo;
  <span class="hljs-keyword">if</span> (dataSource &amp;&amp; dataSource.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; key) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">info</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¿¡æ¯'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'è¯·é€‰æ‹©ä¸€æ¡æ•°æ®'</span>,
    });
  }
  <span class="hljs-keyword">const</span> record = dataSource.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">key</span> === key);
  <span class="hljs-keyword">if</span> (!record) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">info</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¿¡æ¯'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'è¯·é€‰æ‹©ä¸€æ¡æ•°æ®'</span>,
    });
  }
  onOk &amp;&amp; <span class="hljs-title function_">onOk</span>(record);
}
</code></pre>
<p>ä¸‹é¢æˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼Œä¸æƒ³å¤šå†™æç¤ºäº†ï¼Œåˆç†åˆ©ç”¨ &amp;&amp; ä¼šè¿”å›ç¬¦åˆæ¡ä»¶æœ€åä¸€é¡¹ç‰¹æ€§æ¥å®ç°ï¼Œçœ‹èµ·æ¥ä¼¼ä¹å¥½äº†ä¸€ç‚¹ç‚¹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//pageInfo å’Œ onOk å·²ç»å®šä¹‰å¥½äº†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onComplete</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { dataSource, key } = pageInfo;
  <span class="hljs-keyword">const</span> hasSelectedData =
    dataSource &amp;&amp;
    dataSource.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp;
    key &amp;&amp;
    dataSource.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">key</span> === key);  
  <span class="hljs-keyword">if</span> (!hasSelectedData) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">info</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">"ä¿¡æ¯"</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">"è¯·é€‰æ‹©ä¸€æ¡æ•°æ®"</span>,
    });
  }
  onOk &amp;&amp; <span class="hljs-title function_">onOk</span>(ifs.<span class="hljs-title function_">pop</span>());
};
</code></pre>
<h2 data-id="heading-2">æœ€å</h2>
<p>æ™®é€šçš„ä»£ç è•´å«ç€æˆ‘ä»¬å¯¹äºä»£ç çš„ä¸€äº›è¿½æ±‚ï¼Œä½ è§‰å¾—ä»€ä¹ˆæ ·çš„ä»£ç å¥½å‘¢ï¼Œåæ­£æˆ‘çš„aiæ„Ÿè§‰æˆ‘çš„ä»£ç æ˜¯å±ï¼Œç»™æˆ‘æ”¹äº†ğŸ˜„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[scriptæ ‡ç­¾æœ‰å“ªäº›å¸¸ç”¨å±æ€§ï¼Œä½œç”¨åˆ†åˆ«æ˜¯å•¥]]></title>    <link>https://juejin.cn/post/7599483794657574953</link>    <guid>https://juejin.cn/post/7599483794657574953</guid>    <pubDate>2026-01-26T13:32:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599483794657574953" data-draft-id="7597693638922993727" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="scriptæ ‡ç­¾æœ‰å“ªäº›å¸¸ç”¨å±æ€§ï¼Œä½œç”¨åˆ†åˆ«æ˜¯å•¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T13:32:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ªåˆ€çŸ³å¤´å¸ƒå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1855631360014798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            scriptæ ‡ç­¾æœ‰å“ªäº›å¸¸ç”¨å±æ€§ï¼Œä½œç”¨åˆ†åˆ«æ˜¯å•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631360014798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ªåˆ€çŸ³å¤´å¸ƒå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T13:32:40.000Z" title="Mon Jan 26 2026 13:32:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‰ç«¯å¼€å‘ä¸­ï¼Œç¦»ä¸å¼€çš„å°±æ˜¯scriptè„šæœ¬çš„æ‰§è¡Œï¼Œhtmlä¸­åµŒå…¥scriptæ ‡ç­¾ï¼Œæˆ‘ä»¬çš„jsè„šæœ¬æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼Œæ­£æ˜¯å› ä¸ºæœ‰äº†å®ƒï¼Œå‰ç«¯çš„é¡µé¢å˜å¾—æ›´åŠ çµæ´»äº†(ä¸æ˜¯çº¯é™æ€é¡µé¢äº†)</p>
<h2 data-id="heading-1">ç®€ä»‹</h2>
<p>å¸¸ç”¨å±æ€§ï¼š</p>
<p><strong>src</strong>ï¼šè„šæœ¬å¼•ç”¨èµ„æºåœ°å€ï¼Œå¯ä»¥æ˜¯è¿œç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„çš„èµ„æº</p>
<pre><code class="hljs language-js" lang="js">&lt;script src=<span class="hljs-string">"https://example.com/script.js"</span>&gt;&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./common.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>type</strong>: scriptç±»å‹ï¼ŒHTML5 é»˜è®¤ä¸º text/javascriptï¼Œä¹ŸåŸºæœ¬ä¸Šå¾ˆå°‘ä¸»åŠ¨è®¾ç½®äº†ï¼Œä¸ºäº†å…¼å®¹æ€§å¯ä»¥è®¾ç½®</p>
<p>crossoriginï¼šè·¨åŸŸå±æ€§ "anonymous"(åŒ¿å)ã€"use-credentials"(ä½¿ç”¨èº«ä»½ä»¤ç‰ŒéªŒè¯)</p>
<pre><code class="hljs language-js" lang="js">&lt;script src=<span class="hljs-string">"https://example.com/script.js"</span> crossorigin=<span class="hljs-string">"anonymous"</span>&gt;&lt;/script&gt;
</code></pre>
<p><strong>async</strong>: å¼‚æ­¥(å»¶è¿Ÿ)æ‰§è¡Œè„šæœ¬</p>
<ul>
<li>
<p>è„šæœ¬ä¸‹è½½æ—¶ä¸é˜»å¡ HTML è§£æ</p>
</li>
<li>
<p>ä¸‹è½½å®Œæˆåç«‹å³æ‰§è¡Œ</p>
</li>
<li>
<p><strong>æ‰§è¡Œé¡ºåºä¸ä¿è¯</strong></p>
</li>
</ul>
<p><strong>defer</strong>:  å¼‚æ­¥(å»¶è¿Ÿ)æ‰§è¡Œè„šæœ¬</p>
<ul>
<li>
<p>è„šæœ¬ä¸‹è½½æ—¶ä¸é˜»å¡ HTML è§£æ</p>
</li>
<li>
<p>HTML è§£æå®Œæˆåæ‰æ‰§è¡Œ</p>
</li>
<li>
<p><strong>æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ª defer è„šæœ¬</strong></p>
</li>
</ul>
<p><strong>integrity</strong>ï¼šå­èµ„æºå®Œæ•´æ€§éªŒè¯ï¼Œé˜²æ­¢æ¶æ„æ›´æ”¹æ–‡ä»¶æ¥æ‰§è¡Œæ½œåœ¨æ”»å‡»</p>
<p>ä¾‹å¦‚ï¼šscriptå¯èƒ½æ¥è‡ªcdnæé€Ÿï¼Œä½†æ˜¯ä¸ºäº†é¿å…è¢«äººç¯¡æ”¹è¿‡ï¼Œäºæ˜¯ä½¿ç”¨ç®—æ³•åŠ å¯†ï¼Œæå‰è®¾å®šå¥½è„šæœ¬åŠ å¯†åçš„ç»“æœï¼Œæµè§ˆå™¨ä¸‹è½½åä¼šå°†èµ„æºåŠ å¯†åè¿›è¡Œå¯¹æ¯”ï¼Œä¸€è‡´æ—¶æ‰§è¡Œï¼Œå¯ä»¥å‡å°‘è¢«æ”»å‡»çš„å¯èƒ½</p>
<pre><code class="hljs language-js" lang="js">å¸¸ç”¨ç®—æ³•æœ‰ <span class="hljs-string">`sha256`</span>ã€<span class="hljs-string">`sha384`</span>ã€<span class="hljs-string">`sha512`</span>ï¼ˆä¸æ¨è md5/sha1ï¼Œå®‰å…¨æ€§ä½ï¼‰ã€‚

&lt;script 
    src=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"</span> 
    integrity=<span class="hljs-string">"sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="</span> 
    crossorigin=<span class="hljs-string">"anonymous"</span>
    /&gt;
    
</code></pre>
<p>ç”Ÿæˆsha256å“ˆå¸Œå€¼</p>
<pre><code class="hljs language-js" lang="js">cat script.<span class="hljs-property">js</span> | openssl dgst -sha256 -binary | base64 # ç”Ÿæˆsha384å“ˆå¸Œå€¼
</code></pre>
<h2 data-id="heading-2">æœ€å</h2>
<p>å®é™…å¸¸ç”¨çš„å°±è¿™ä¹ˆå¤šï¼Œä¸”å‰å‡ ä¸ªæœ€å¸¸ç”¨(è€ä»£ç ä¸­æ¯”è¾ƒå¸¸è§)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†™ä¸€ä¸ªç®€æ˜“çš„æ•°å­—è½¬ä¸­æ–‡åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7599511763987136566</link>    <guid>https://juejin.cn/post/7599511763987136566</guid>    <pubDate>2026-01-26T13:33:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599511763987136566" data-draft-id="7553638089333637183" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™ä¸€ä¸ªç®€æ˜“çš„æ•°å­—è½¬ä¸­æ–‡åŠŸèƒ½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-26T13:33:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ªåˆ€çŸ³å¤´å¸ƒå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1855631360014798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™ä¸€ä¸ªç®€æ˜“çš„æ•°å­—è½¬ä¸­æ–‡åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631360014798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ªåˆ€çŸ³å¤´å¸ƒå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T13:33:36.000Z" title="Mon Jan 26 2026 13:33:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©æˆ‘ä»¬å†™ä¸€ä¸ªä¸€ä¸ªç®€æ˜“çš„æ•°å­—è½¬ä¸­æ–‡çš„æ•ˆæœï¼Œè™½ç„¶æ˜¯åŠŸèƒ½çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯è¦æ˜¯æ²¡æœ‰å†™è¿‡è¿™ç±»åŠŸèƒ½çš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæ— ä»ä¸‹æ‰‹ï¼Œä¸‹é¢å°±ç®€å•è®²ä¸€ä¸‹å†™è¿™ç±»é€»è¾‘çš„è¿‡ç¨‹</p>
<h2 data-id="heading-1">æ€è·¯</h2>
<p>å®ç°ç®€æ˜“æ€è·¯ï¼š</p>
<ol>
<li>å¤§å•ä½æ˜¯ä»¥ä¸‡ã€äº¿ã€å…†ç­‰ä¸ºå•ä½çš„ï¼Œ4ä½å°æ•°ä¸€ç»„ï¼Œå› æ­¤éœ€è¦å¯¹æ•°å­—è¿›è¡Œå››ä½ä¸€ç»„åˆ†ç»„æ“ä½œï¼Œåœ¨åé¢è¿½åŠ å•ä½å³å¯</li>
<li>é™¤äº†å¤§å•ä½ï¼Œä¸­é—´çš„å°å•ä½åˆ™æ˜¯ä¸ªåç™¾åƒï¼ŒåŸºæœ¬éƒ½æ˜¯ä¸€è‡´ï¼Œå› æ­¤ä½¿ç”¨åŒä¸€ç§ç»Ÿä¸€å¤„ç†æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸ªä½æ²¡æœ‰å•ä½</li>
<li>é™¤äº†å•ä½è¿˜æœ‰æ¯ä¸€ä½æ•°å­—çš„ç¿»è¯‘å·¥ä½œï¼Œå³ï¼š<code>0~9</code> =&gt; <code>é›¶~ä¹</code></li>
<li>æ·¡å‡ºå¤„ç†ä¸­æ–‡è¯­æ³•ä¸­ç‰¹æœ‰çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼šå¼€å¤´ä¸æ˜¾ç¤ºä¸€åè€Œæ˜¯åï¼Œé›¶ä¸­é—´ä½œä¸ºé—´éš”åªèƒ½æœ‰ä¸€ä¸ªï¼Œè¿ç»­çš„é›¶æ²¡æœ‰å¤§å•ä½ï¼Œä»¥åŠå„ä½ä¸ºé›¶çš„å¤„ç†ç­‰</li>
<li>å…¥å‚å¤„ç†(è¿™é‡Œç®€å•å¤„ç†ä¸€ä¸‹)</li>
</ol>
<h2 data-id="heading-2">ä»£ç å®ç°</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//æ•°å­—è½¬ä¸­æ–‡(è¦æ”¯æŒå°æ•°ï¼Œå¯ä»¥åœ¨æ‰©å±•ï¼Œå°æ•°å°±æ¯”è¾ƒç®€å•äº†)</span>
<span class="hljs-comment">//å…¥å‚ä¸ºæ•°å­—ï¼Œå› æ­¤ä¸è€ƒè™‘å¼€å¤´ä¸ºé›¶çš„æƒ…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">convertChineseNumber</span> = (<span class="hljs-params">number</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(number)) <span class="hljs-keyword">return</span> <span class="hljs-string">"NAN"</span>;

  <span class="hljs-keyword">const</span> units = [<span class="hljs-string">""</span>, <span class="hljs-string">"ä¸‡"</span>, <span class="hljs-string">"äº¿"</span>, <span class="hljs-string">"å…†"</span>, <span class="hljs-string">"äº¬"</span>, <span class="hljs-string">"å“"</span>];
  <span class="hljs-keyword">const</span> baseUnits = [<span class="hljs-string">""</span>, <span class="hljs-string">"å"</span>, <span class="hljs-string">"ç™¾"</span>, <span class="hljs-string">"åƒ"</span>];
  <span class="hljs-keyword">const</span> cNumbers = [<span class="hljs-string">"é›¶"</span>, <span class="hljs-string">"ä¸€"</span>, <span class="hljs-string">"äºŒ"</span>, <span class="hljs-string">"ä¸‰"</span>, <span class="hljs-string">"å››"</span>, <span class="hljs-string">"äº”"</span>, <span class="hljs-string">"å…­"</span>, <span class="hljs-string">"ä¸ƒ"</span>, <span class="hljs-string">"å…«"</span>, <span class="hljs-string">"ä¹"</span>];
  
  <span class="hljs-comment">//åˆ†å‰²å››ä½ä¸€ç»„ï¼Œåè½¬æ•°ç»„ï¼Œä»åå¾€å‰åŠ å•ä½</span>
  <span class="hljs-keyword">const</span> numGroup = <span class="hljs-title class_">String</span>(number)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\B(?=(\d{4})+$)/g</span>, <span class="hljs-string">" "</span>)  <span class="hljs-comment">//ä½¿ç”¨å‰ç»è¿ç®—ç¬¦æ¥å¤„ç†å››ä½ä¸€ä½“</span>
    .<span class="hljs-title function_">split</span>(<span class="hljs-string">" "</span>)
    .<span class="hljs-title function_">reverse</span>();
  <span class="hljs-keyword">let</span> result = <span class="hljs-string">""</span>;
  <span class="hljs-comment">//éå†ä»åå¾€å‰åŠ å•ä½</span>
  numGroup.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">numStrings, idx</span>) =&gt;</span> {
    <span class="hljs-comment">//å¤„ç†å…¨é›¶çš„æƒ…å†µï¼Œä¸åº”è¯¥å¸¦å•ä½ï¼Œç”±äºéœ€è¦é—´éš”0çš„æƒ…å†µï¼Œä¿ç•™ä¸€ä¸ªé›¶</span>
    <span class="hljs-keyword">if</span> (numStrings === <span class="hljs-string">"0000"</span>) {
      result = <span class="hljs-string">'é›¶'</span> + result
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">//æœ‰æ•°çš„å…ˆæ·»åŠ å¤§å•ä½</span>
    result = units[idx] + result;
    <span class="hljs-comment">//åˆ†å‰²å››ä½ä¸€ç»„çš„å°æ•°å­—ï¼Œä»ç„¶æ˜¯åè½¬ï¼Œä»åå¾€å‰åŠ å•ä½</span>
    numStrings
      .<span class="hljs-title function_">split</span>(<span class="hljs-string">""</span>)
      .<span class="hljs-title function_">reverse</span>()
      .<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, idx</span>) =&gt;</span> {
        <span class="hljs-comment">//å¤„ç†æ¯ä¸ªåé¢çš„å•ä½ï¼Œå…¶ä¸­ä¸ªä½æ²¡æœ‰å•ä½ï¼Œ0ä¹Ÿæ²¡æœ‰å•ä½</span>
        <span class="hljs-keyword">if</span> (idx !== <span class="hljs-number">0</span> &amp;&amp; item !== <span class="hljs-string">"0"</span>) {
          result = baseUnits[idx] + result;
        }
        <span class="hljs-comment">//æ•°å­—ç¿»è¯‘</span>
        result = cNumbers[<span class="hljs-title class_">Number</span>(item)] + result;
      });
  });
  <span class="hljs-comment">//å¤„ç†ç»“æœä¸­å¯èƒ½å­˜åœ¨çš„ä¸­æ–‡è¯»å†™é—®é¢˜ï¼Œä¾‹å¦‚ä¸ä¼šå­˜åœ¨è¿ç»­çš„é›¶ï¼Œå¼€å¤´ä¸ä¼šä¸€å</span>
  <span class="hljs-comment">//é›¶åé¢ä¸åº”è¯¥æœ‰å•ä½ï¼Œéé›¶æ•´æ•°ç»“å°¾ä¸ä¼šè¯»é›¶</span>
  <span class="hljs-keyword">return</span> result
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/é›¶+/g</span>, <span class="hljs-string">"é›¶"</span>)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^(ä¸€å)/</span>, <span class="hljs-string">"å"</span>)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`é›¶([<span class="hljs-subst">${units.join(<span class="hljs-string">""</span>)}</span>]{1})`</span>, <span class="hljs-string">"g"</span>), <span class="hljs-string">"$1"</span>) <span class="hljs-comment">//å°å•ä½å¤„ç†äº†å¤§å•ä½ä¹Ÿè¦å¤„ç†</span>
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(.+)é›¶$/</span>, <span class="hljs-string">"$1"</span>)
};
</code></pre>
<h2 data-id="heading-3">æµ‹è¯•æ¡ˆä¾‹</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//æˆ‘ä»¬è¯•éªŒå‡ ä¸ªæ¡ˆä¾‹</span>
<span class="hljs-keyword">const</span> numbers = [
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">0</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">1234567899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">101234567899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">100234567899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">101034567899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">101030067899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">101030067890</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">101030007899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">100000007899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">100070007899</span>),
  <span class="hljs-title function_">convertChineseNumber</span>(<span class="hljs-number">100007007899</span>),
];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numbers);

<span class="hljs-comment">//ç›®å‰æ¥çœ‹è¿”å›ç»“æœæ˜¯å¯¹çš„ï¼Œå¦‚æœæ„Ÿè§‰å“ªé‡Œä¸å¯¹ï¼Œå¯ä»¥åœ¨å¡«å¡«è¡¥è¡¥å°±è¡Œäº†</span>
[
  <span class="hljs-string">'é›¶'</span>,
  <span class="hljs-string">'åäºŒäº¿ä¸‰åƒå››ç™¾äº”åå…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶ä¸€åäºŒäº¿ä¸‰åƒå››ç™¾äº”åå…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶äºŒäº¿ä¸‰åƒå››ç™¾äº”åå…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶ä¸€åäº¿ä¸‰åƒå››ç™¾äº”åå…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶ä¸€åäº¿ä¸‰åƒé›¶å…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶ä¸€åäº¿ä¸‰åƒé›¶å…­ä¸‡ä¸ƒåƒå…«ç™¾ä¹å'</span>,
  <span class="hljs-string">'ä¸€åƒé›¶ä¸€åäº¿ä¸‰åƒä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒäº¿é›¶ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒäº¿ä¸ƒåƒä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>,
  <span class="hljs-string">'ä¸€åƒäº¿é›¶ä¸ƒç™¾ä¸‡ä¸ƒåƒå…«ç™¾ä¹åä¹'</span>
]
</code></pre>
<h2 data-id="heading-4">æœ€å</h2>
<p>ä¸Šé¢çš„æ•´ä½“æ€è·¯è¿˜æ˜¯å¯ä»¥å¾—ï¼Œå®é™…è¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºçš„ï¼Œä¾‹å¦‚ï¼šä¸æ”¯æŒå°æ•°ï¼Œå¯¹äºå¤§æ•°å­—çš„å•ä½æ”¯æŒä¹Ÿä¸å¤Ÿå¤šï¼Œç”šè‡³ä¸€äº›è¯»æ³•çš„åœºæ™¯å¯èƒ½è€ƒè™‘è¿˜ä¸å¤Ÿå®Œå–„</p>
<p>éœ€è¦å®Œå–„çš„è¯ï¼Œå®é™…æŒ‰ç…§ä¸Šé¢æ€è·¯è¡¥å……ä¸€ä¸‹å°±è¡Œäº†</p>
<p>æœ¬ç¯‡å°±ä»‹ç»åˆ°è¿™é‡Œäº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™ Promise.all]]></title>    <link>https://juejin.cn/post/7599483314160746515</link>    <guid>https://juejin.cn/post/7599483314160746515</guid>    <pubDate>2026-01-26T13:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599483314160746515" data-draft-id="7568319637000781824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™ Promise.all"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-26T13:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ªåˆ€çŸ³å¤´å¸ƒå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1855631360014798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™ Promise.all
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631360014798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ªåˆ€çŸ³å¤´å¸ƒå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T13:34:15.000Z" title="Mon Jan 26 2026 13:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Promise æ˜¯ JavaScript ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä»–å¯ä»¥è®©æˆ‘ä»¬å¼‚æ­¥çš„å»å¤„ç†ä¸€äº›äº‹æƒ…ï¼Œå°¤å…¶æ˜¯å¯¹äºä¸€äº›æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå…¶éå¸¸é‡è¦ï¼Œå½“ç„¶ä¸€äº›ä¸è€—æ—¶çš„æ“ä½œï¼Œæœ‰äº‹å°±æ²¡å¿…è¦ä½¿ç”¨å®ƒäº†ï¼Œæ¯•ç«Ÿä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€</p>
<h2 data-id="heading-1">Promise.all</h2>
<p>Promise.all æ˜¯ js ä¸­ä¸ªä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå°¤å…¶æ˜¯å†™ä¸šåŠ¡å¯¹æ¥åç«¯çš„æ—¶å€™ï¼Œä¼šç»å¸¸è§åˆ°ï¼Œä¸ç®¡æ˜¯å†™åç«¯å¼‚æ­¥ç­¾åï¼Œè¿˜æ˜¯å‰ç«¯æ¥å£è¯·æ±‚ï¼Œå…¶ä¸»è¦ç”¨æ¥èšåˆä¸€ç»„æˆåŠŸçš„ç»“æœ</p>
<p>ç›¸æ¯”äº promise å…¶ä»–ç³»åˆ—ï¼Œè¿™ä¸ªç®—æ˜¯æ¯”è¾ƒç®€å•äº†(å½“ç„¶ race æ›´ç®€å•å°±ä¸ä»‹ç»äº†)</p>
<p>ä¸‹é¢ç®€å•é™ˆè¿° Promise.all æ‰‹å†™çš„å‡ ä¸ªå…³é”®å•</p>
<ol>
<li>all æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå› æ­¤ä¸èƒ½åƒå†™å¯¹è±¡çš„åŸå‹é“¾ prototypeä¸€æ ·å†™</li>
<li>promise çŠ¶æ€ä» pending å˜æ›´ä¸º fulfilled æˆ–è€… rejected åªèƒ½å‘ç”Ÿä¸€æ¬¡ï¼Œå› æ­¤æ— éœ€è€ƒè™‘å¤šæ¬¡å›è°ƒ reject çš„é—®é¢˜</li>
<li>éå† promises æ•°ç»„çš„æ—¶å€™ï¼Œéå†çš„æ˜¯æ‰€æœ‰å¯è¿­ä»£å¯¹è±¡ï¼Œå› æ­¤ for...of éå¸¸é€‚åˆ</li>
</ol>
<p><strong>tips</strong>: å¯ä»¥é€šè¿‡ promise å‡½æ•°å›è°ƒèµ‹å€¼çš„æ–¹å¼å‡å°‘åµŒå¥—å±‚çº§</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å£°æ˜ä¸€ä¸ªé™æ€æ–¹æ³•</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">myAll</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">let</span> resolve, reject;
    <span class="hljs-comment">//æ„é€ ä¸€ä¸ªæ–°çš„promise,èµ‹å€¼å¯ä»¥å‡å°‘åµŒå¥—å±‚çº§</span>
    <span class="hljs-keyword">const</span> completePromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
        resolve = res;
        reject = rej;
    })
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-keyword">const</span> length = promises.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">let</span> completedCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>
    <span class="hljs-comment">//tips: promise çŠ¶æ€ä» pending å˜æ›´ä¸º fulfilled æˆ–è€… rejected åªèƒ½å‘ç”Ÿä¸€æ¬¡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> promises) {
        <span class="hljs-comment">//ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥æ”¶ idx é¿å…è¡¥è´§åˆ°å¤–éƒ¨åŒä¸€ä¸ªç´¢å¼•</span>
        <span class="hljs-keyword">const</span> currentIndex = idx;
        <span class="hljs-comment">//itemå¯èƒ½ä¸æ˜¯promiseï¼Œæ‰€ä»¥ç”¨Promise.resolveåŒ…ä¸€ä¸‹</span>
        <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
            results[currentIndex] = value;
            completedCount++;
            <span class="hljs-comment">//å…¨éƒ¨æˆåŠŸæ ‡è®°æˆåŠŸ</span>
            <span class="hljs-keyword">if</span> (completedCount === length) {
                <span class="hljs-title function_">resolve</span>(results);
            }
        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
            <span class="hljs-comment">//æœ‰ä¸€ä¸ªè¿”å›errå°±è¡Œäº†ï¼ŒpromiseçŠ¶æ€åªä¼šå˜æ›´ä¸€æ¬¡</span>
            <span class="hljs-title function_">reject</span>(err);
        })
        idx++;
    }
    <span class="hljs-keyword">return</span> completePromise;
}
</code></pre>
<p>ä¸‹é¢æµ‹è¯•ä¸€ä¸‹ç»“æœï¼Œéå¸¸æ­£ç¡®</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">test</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
        }, <span class="hljs-number">1000</span>)
    });
    <span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>)
        }, <span class="hljs-number">2000</span>)
    });
    <span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// reject('error 3')</span>
            <span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>)
        }, <span class="hljs-number">1500</span>)
    });
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">myAll</span>([p1, p2, p3]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'res'</span>, res)
    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'err'</span>, err)
    })
}

<span class="hljs-title function_">test</span>();
</code></pre>
<p>è¿™ç¯‡æ–‡ç« å°±è®²åˆ°è¿™é‡Œäº†ï¼Œç”±äºå†…å®¹ç›¸å¯¹ç®€å•ï¼Œå°±ä¸å¤šä»‹ç»äº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‚£ä¸ªçŒæ­»çš„ç¨‹åºå‘˜ï¼Œåœ¨æŠ¢æ•‘æ—¶è¢«æ‹‰è¿›äº†å·¥ä½œç¾¤]]></title>    <link>https://juejin.cn/post/7599450177058160650</link>    <guid>https://juejin.cn/post/7599450177058160650</guid>    <pubDate>2026-01-26T11:40:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599450177058160650" data-draft-id="7599543345980407835" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‚£ä¸ªçŒæ­»çš„ç¨‹åºå‘˜ï¼Œåœ¨æŠ¢æ•‘æ—¶è¢«æ‹‰è¿›äº†å·¥ä½œç¾¤"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-26T11:40:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¸€ç‚¹"/> <meta itemprop="url" content="https://juejin.cn/user/3802528978305192"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‚£ä¸ªçŒæ­»çš„ç¨‹åºå‘˜ï¼Œåœ¨æŠ¢æ•‘æ—¶è¢«æ‹‰è¿›äº†å·¥ä½œç¾¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3802528978305192/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¸€ç‚¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T11:40:36.000Z" title="Mon Jan 26 2026 11:40:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç”Ÿå‘½æ— æ³•é‡å¯ï¼Œå¥åº·æ‰æ˜¯æœ€é«˜ä¼˜å…ˆçº§</p>
</blockquote>
<p>2025å¹´11æœˆ29æ—¥ï¼Œå‘¨å…­ï¼Œ32å²çš„ç¨‹åºå‘˜é«˜å¹¿è¾‰åœ¨å®¶ä¸­å¯¹å¦»å­è¯´â€œæœ‰ç‚¹ä¸èˆ’æœï¼Œè¦åˆ°å®¢å…å¤„ç†ä¸€ä¸‹å·¥ä½œâ€åæ™•å€’ã€‚åœ¨é€åŒ»æŠ¢æ•‘è¿‡ç¨‹ä¸­ï¼Œä»–çš„æ‰‹æœºå±å¹•ä¾ç„¶äº®ç€â€”â€”<strong>ä»–è¢«æ‹‰å…¥äº†ä¸€ä¸ªæ–°çš„å¾®ä¿¡æŠ€æœ¯ç¾¤</strong>ï¼Œç¾¤é‡ŒåŒäº‹æ­£åœ¨@ä»–å¤„ç†å·¥ä½œã€‚</p>
<p>å½“å¤©13:00ï¼Œé«˜å¹¿è¾‰è¢«å®£å‘Šä¸´åºŠæ­»äº¡ã€‚æ­»äº¡8å°æ—¶åï¼Œä»–çš„å¾®ä¿¡å†æ¬¡æ”¶åˆ°æ¶ˆæ¯ï¼šâ€œå‘¨ä¸€ä¸€æ—©æœ‰æ€¥ä»»åŠ¡ï¼Œä»Šå¤©éªŒè´§ä¸è¿‡ï¼Œè¦æŠŠè¿™ä¸ªæ”¹ä¸‹â€ã€‚</p>
<p><img src="https://foruda.gitee.com/images/1769427463353492230/29124b8c_10826153.png" alt="" title="20260126193540.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ä¸ªç¨‹åºå‘˜çš„æœ€åä¸€å‘¨</h2>
<p>åœ¨é«˜å¹¿è¾‰ç”Ÿå‘½çš„æœ€åä¸€å‘¨ï¼Œå·¥ä½œæ—¥æœ€æ—©åˆ°å®¶æ—¶é—´æ˜¯<strong>21:38</strong>ï¼Œæœ€æ™šæ˜¯<strong>22:47</strong>ã€‚ä»–çš„æµè§ˆå™¨è®°å½•æ˜¾ç¤ºï¼Œåœ¨çŒæ­»å½“å¤©ï¼Œè¿™ä½éƒ¨é—¨ç»ç†è‡³å°‘<strong>5æ¬¡è®¿é—®äº†å…¬å¸OAç³»ç»Ÿ</strong>â€”â€”å°½ç®¡é‚£å¤©æ˜¯å‘¨å…­ã€‚</p>
<p>å¦»å­å›å¿†ï¼Œé«˜å¹¿è¾‰ç”Ÿå‰å¸¸è¯´â€œå¥½ç´¯å¥½ç´¯ï¼Œå¥½æƒ³è¢«ç‚’æ‰â€ã€‚è°ƒåˆ°ä¸€ä¸ªæ–°éƒ¨é—¨åï¼Œä»–çš„å·¥ä½œé‡ç¿»äº†ä¸‰å€ï¼Œå´å› å…¬å¸è£å‘˜è€Œæ— äººåˆ†æ‹…ã€‚ä»–ä»â€œå‡ åˆ†é’Ÿå›å¤æ¶ˆæ¯â€å˜æˆâ€œä¸Šåˆå‘æ¶ˆæ¯ï¼Œä¸‹åˆæ‰å›å¤â€ã€‚</p>
<p><strong>â€œä»Šå¤©æ²¡åšå®Œçš„å·¥ä½œï¼Œæ˜å¤©å¯ä»¥ç»§ç»­ï¼Œä½†é€æ”¯çš„ç”Ÿå‘½æ— æ³•é‡å¯ã€‚â€</strong> è¿™æ˜¯é«˜å¹¿è¾‰å¦»å­åœ¨ä»–å»ä¸–åå‘å¸ƒçš„è§†é¢‘ä¸­çš„ä¸€å¥è¯ã€‚è¿™è¯æˆ³ä¸­äº†è®¸å¤šç¨‹åºå‘˜çš„ç—›ç‚¹ã€‚</p>
<h2 data-id="heading-1">æˆ‘ä»¬éƒ½åœ¨é€æ”¯ä»€ä¹ˆï¼Ÿ</h2>
<p>é«˜å¹¿è¾‰çš„å·¥ä½ä¸Šæ‘†æ”¾ç€ä¸‰å—å±å¹•ï¼Œæ¡Œä¸‹å¤‡æœ‰æ‹–é‹å’Œè¡Œå†›åºŠã€‚è¿™ç§åœºæ™¯å¯¹ç¨‹åºå‘˜æ¥è¯´å†ç†Ÿæ‚‰ä¸è¿‡ã€‚</p>
<p>ä»–çš„è–ªé…¬ç»“æ„æ˜¯â€œä½åº•è–ªã€é«˜ç»©æ•ˆâ€ï¼Œåº•è–ªä»…3000ä½™å…ƒï¼Œå¿…é¡»é æ‹¼å‘½åŠ ç­æ‰èƒ½æ‹¿åˆ°å¯è§‚çš„æœˆè–ªã€‚å…¬å¸æ¨å´‡çš„â€œæ— è¾¹ç•Œåä½œâ€æ–‡åŒ–ï¼Œä½¿å¾—å·¥ä½œå’Œç”Ÿæ´»çš„ç•Œé™å˜å¾—æ¨¡ç³Šã€‚</p>
<p><strong>æˆ‘ä»¬æ˜¯å¦ä¹Ÿé™·å…¥äº†è¿™ç§â€œè‡ªæ„¿åŠ ç­â€çš„å¾ªç¯ï¼Ÿ</strong> ä¸ºäº†é¡¹ç›®ä¸Šçº¿ï¼Œä¸ºäº†ç»©æ•ˆè€ƒæ ¸ï¼Œä¸ºäº†ä¸è¢«æ›¿ä»£ï¼Œæˆ‘ä»¬ä¸æ–­å‹ç¼©ç¡çœ æ—¶é—´ï¼Œç‰ºç‰²å¥åº·ä¸å®¶åº­ã€‚</p>
<p>é«˜å¹¿è¾‰æ›¾åœ¨ä»–çš„GitHubé¡¹ç›®ä¸­è´´å‡ºâ€œå996â€æ ‡ç­¾ï¼Œå¸Œæœ›è‡ªå·±çš„ä»£ç èƒ½å¸®åŠ©åŒè¡Œä»¬â€œä¸è¦è¢«ä¸Šå¤´ä»»åŠ¡å‹å¾—å–˜ä¸è¿‡æ°”â€ã€‚è®½åˆºçš„æ˜¯ï¼Œä»–æœ€ç»ˆå´è¢«è¿‡åº¦å·¥ä½œå‹å®ã€‚</p>
<h2 data-id="heading-2">ç”Ÿå‘½çš„ä¼˜å…ˆçº§é«˜äºä»£ç </h2>
<p>ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬éƒ½æ˜ç™½<strong>ä¼˜å…ˆçº§</strong>çš„é‡è¦æ€§ã€‚ä½†å½“å·¥ä½œä¸æ–­æŠ¢å ç”Ÿå‘½çš„é«˜ä¼˜å…ˆçº§ä½ç½®æ—¶ï¼Œç³»ç»Ÿç»ˆä¼šå´©æºƒã€‚</p>
<p>é«˜å¹¿è¾‰çš„æ¡ˆä¾‹ä¹‹æ‰€ä»¥å¼•å‘å¹¿æ³›å…±é¸£ï¼Œæ˜¯å› ä¸ºå®ƒåæ˜ äº†ç¨‹åºå‘˜ç¾¤ä½“æ™®éé¢ä¸´çš„å›°å¢ƒï¼š<strong>å¼¹æ€§å·¥ä½œåˆ¶å˜æˆ24å°æ—¶å¾…å‘½</strong>ï¼Œä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ·±å¤œä¸æ–­ï¼Œå‘¨æœ«è¢«éšå½¢åŠ ç­å æ®ã€‚</p>
<p>ä»–çš„ç—…å†â€œæ—¢å¾€å²â€ä¸€æ å†™ç€ï¼šâ€œç¨‹åºå‘˜ç»å¸¸ç†¬å¤œâ€ã€‚è¿™ä½•å°ä¸æ˜¯è®¸å¤šç¨‹åºå‘˜çš„å…±åŒâ€œç—…å²â€ï¼Ÿ</p>
<h2 data-id="heading-3">é‡æ–°å®šä¹‰æˆåŠŸä¸å¥‹æ–—</h2>
<p>é«˜å¹¿è¾‰çš„é—ç‰©ä¸­æœ‰ä¸€æœ¬ä¹¦ï¼šã€Šæ­å–œä½ å½“ä¸Šä¸»ç®¡äº†ã€‹ã€‚ä»–åŠªåŠ›å‘ä¸Šï¼Œ28å²æ™‹å‡éƒ¨é—¨ç»ç†ï¼Œå´æœ€ç»ˆä»˜å‡ºäº†ç”Ÿå‘½çš„ä»£ä»·ã€‚</p>
<p><strong>å¦‚æœâ€œæˆåŠŸâ€éœ€è¦ä»¥å¥åº·ã€å®¶åº­å’Œç”Ÿå‘½ä¸ºä»£ä»·ï¼Œå®ƒè¿˜æ˜¯æˆåŠŸå—ï¼Ÿ</strong></p>
<p>çœŸæ­£çš„æŠ€æœ¯æˆé•¿ä¸åº”è¯¥å»ºç«‹åœ¨èº«ä½“é€æ”¯çš„åŸºç¡€ä¸Šã€‚é«˜æ•ˆçš„ä»£ç ä¸æ˜¯é ç†¬å¤œç†¬å‡ºæ¥çš„ï¼Œè€Œæ˜¯æºäºæ¸…æ™°çš„æ€è·¯å’Œè‰¯å¥½çš„çŠ¶æ€ã€‚</p>
<h2 data-id="heading-4">ä»ä»Šå¤©èµ·ï¼Œè¯·ççˆ±è‡ªå·±</h2>
<p>é«˜å¹¿è¾‰çš„å¦»å­è¯´ï¼Œå¦‚æœæ—¶å…‰å¯ä»¥å€’æµï¼Œä¸€å®šä¼šåšæŒè®©ä»–è¾æ‰å·¥ä½œã€‚ä½†ç”Ÿå‘½æ²¡æœ‰å¦‚æœã€‚</p>
<p>åœ¨æ­¤ï¼Œæˆ‘æƒ³å¯¹æ¯ä¸€ä½ç¨‹åºå‘˜åŒè¡Œè¯´ï¼š</p>
<ol>
<li>
<p><strong>ä½ çš„å¥åº·æ˜¯ç¬¬ä¸€ä½çš„éœ€æ±‚</strong>ï¼šæ²¡æœ‰ä»»ä½•é¡¹ç›®å€¼å¾—ä½ ç”¨å¥åº·å»äº¤æ¢ã€‚è®¾å®šå·¥ä½œè¾¹ç•Œï¼Œå­¦ä¼šè¯´â€œä¸â€ã€‚</p>
</li>
<li>
<p><strong>ç¦»çº¿ä¼‘æ¯æƒæ˜¯ä½ åº”å¾—çš„æƒåˆ©</strong>ï¼šä¸‹ç­åï¼Œä½ æœ‰æƒä¸å›å¤å·¥ä½œæ¶ˆæ¯ã€‚æœ‰ç”µè¯å‘¼è¿›æ¥äº†ï¼Œä½ å¯ä»¥ä¸æ¥çš„ã€‚</p>
</li>
<li>
<p><strong>è­¦æƒ•â€œä½åº•è–ªã€é«˜ç»©æ•ˆâ€çš„é™·é˜±</strong>ï¼šè¿™ç§è–ªé…¬ç»“æ„æœ¬è´¨ä¸Šæ˜¯åœ¨é¼“åŠ±é€æ”¯ç”Ÿå‘½ã€‚è¯„ä¼°å·¥ä½œæ˜¯å¦å€¼å¾—æ—¶ï¼Œè¯·ç®—ä¸Šå¥åº·æˆæœ¬ã€‚ç¨‹åºå‘˜æœ¬èº«å°±åº”è¯¥æ˜¯å›ºå®šå·¥èµ„ï¼Œåˆä¸æ˜¯é”€å”®ï¼Œå“ªæœ‰ä»€ä¹ˆåº•è–ª+ç»©æ•ˆçš„è¯´æ³•ã€‚</p>
</li>
<li>
<p><strong>å®šæœŸä½“æ£€ï¼Œé‡è§†èº«ä½“ä¿¡å·</strong>ï¼šé«˜å¹¿è¾‰åœ¨2024å¹´6æœˆçš„ä½“æ£€è¿˜æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†èº«ä½“å·²ç»å‘å‡ºè­¦æŠ¥ã€‚</p>
</li>
<li>
<p><strong>é‡æ–°å®šä¹‰ä½ çš„æˆé•¿è·¯å¾„</strong>ï¼šæŠ€æœ¯çš„æå‡ä¸åº”è¯¥ä»¥å¥åº·ä¸ºä»£ä»·ã€‚å¯æŒç»­çš„èŒä¸šå‘å±•æ‰æ˜¯çœŸæ­£çš„æˆé•¿ã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">ç”Ÿå‘½æ— æ³•é‡å¯ï¼Œè¯·å¥½å¥½ç”Ÿæ´»</h2>
<p>åœ¨ç¨‹åºçš„ä¸–ç•Œçš„é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿å¤±è´¥ï¼Œé‡å¯é‡æ¥ã€‚ä½†ç”Ÿå‘½åªæœ‰ä¸€æ¬¡ï¼Œ<strong>æ²¡æœ‰Ctrl+Z</strong>ã€‚</p>
<p>é«˜å¹¿è¾‰çš„æ•…äº‹ä»¤äººå¿ƒç—›ï¼Œä½†ä¹Ÿåº”æˆä¸ºæˆ‘ä»¬åæ€çš„å¥‘æœºã€‚æ¯ä¸€ä½ç¨‹åºå‘˜éƒ½å€¼å¾—è¢«æ¸©æŸ”ä»¥å¾…ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±ã€‚è¯·ä½ åƒä¸‡åƒä¸‡ä¸è¦æŠŠè¿™ä¸ªæ–°é—»å½“æˆæ•…äº‹æ¥çœ‹å¾…äº†ï¼Œå¦‚æœä½ ä¹Ÿä¸€ç›´åœ¨é«˜å‹ä¸‹å·¥ä½œï¼Œé‚£ä¹ˆçœŸè¯·å–„å¾…ä¸€ä¸‹è‡ªå·±ï¼ŒçœŸçš„çœŸçš„çœŸçš„ã€‚</p>
<p><strong>ä»Šå¤©æ²¡åšå®Œçš„å·¥ä½œï¼Œæ˜å¤©å¯ä»¥ç»§ç»­ï¼Œä½†é€æ”¯çš„ç”Ÿå‘½æ— æ³•é‡å¯ã€‚</strong> è¯·å¥½å¥½ç”Ÿæ´»ï¼Œå› ä¸ºä½ çš„ä»£ç ä¸–ç•Œéœ€è¦å¥åº·çš„ä½ æ¥ä¹¦å†™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ65ï¼‰å¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7599528186587070474</link>    <guid>https://juejin.cn/post/7599528186587070474</guid>    <pubDate>2026-01-26T11:50:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599528186587070474" data-draft-id="7599543345980456987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ65ï¼‰å¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T11:50:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ65ï¼‰å¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T11:50:39.000Z" title="Mon Jan 26 2026 11:50:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨Hibernateæ¶‰åŠå¤šä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬é…ç½®é¡¹ç›®ä¾èµ–ã€è®¾ç½®æ•°æ®æºã€é…ç½®Hibernateã€å®šä¹‰å®ä½“ç±»ã€åˆ›å»ºDAOå±‚ã€åˆ›å»ºæœåŠ¡å±‚ã€ä»¥åŠç¼–å†™åº”ç”¨é€»è¾‘ã€‚æ¯ä¸ªå¾®æœåŠ¡é€šå¸¸ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œï¼Œå…¶æ•°æ®åº“å’ŒORMé…ç½®ä¹Ÿç‹¬ç«‹äºå…¶ä»–å¾®æœåŠ¡ã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œåœ¨å¾®æœåŠ¡çš„æ„å»ºæ–‡ä»¶ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯Mavenæ¥æ„å»ºé¡¹ç›®ï¼Œå¯ä»¥åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Core --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.4.32.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- JPA API --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.persistence<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.persistence-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Data JPA if using Spring Boot --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æº</h3>
<p>åœ¨å¾®æœåŠ¡ä¸­é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨Spring Bootæ¥ç®€åŒ–é…ç½®ï¼š</p>
<h4 data-id="heading-2"><code>application.properties</code></h4>
<pre><code class="hljs language-properties" lang="properties">spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
</code></pre>
<h3 data-id="heading-3">3. é…ç½®Hibernateçš„SessionFactory</h3>
<p>Spring Bootä¼šè‡ªåŠ¨é…ç½®<code>SessionFactory</code>ï¼Œå¦‚æœä½ ä½¿ç”¨å…¶ä»–æ¡†æ¶ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</p>
<h3 data-id="heading-4">4. å®šä¹‰å®ä½“ç±»</h3>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»ï¼Œä¾‹å¦‚<code>User</code>ã€‚</p>
<h4 data-id="heading-5"><code>User.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.Table;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> String password;

    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> username;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-built_in">this</span>.username = username;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> password;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> {
        <span class="hljs-built_in">this</span>.password = password;
    }
}
</code></pre>
<h3 data-id="heading-6">5. åˆ›å»ºDAOå±‚</h3>
<p>åˆ›å»ºä¸€ä¸ªæ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰æ¥å£å’Œå®ç°ç±»ï¼Œç”¨äºè®¿é—®æ•°æ®åº“ã€‚å¦‚æœä½¿ç”¨Spring Data JPAï¼Œå¯ä»¥ç®€åŒ–ä¸ºä¸€ä¸ªæ¥å£ã€‚</p>
<h4 data-id="heading-7"><code>UserRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;User, Long&gt; {
    User <span class="hljs-title function_">findByUsername</span><span class="hljs-params">(String username)</span>;
}
</code></pre>
<h3 data-id="heading-8">6. åˆ›å»ºæœåŠ¡å±‚</h3>
<p>åˆ›å»ºä¸€ä¸ªæœåŠ¡ç±»ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h4 data-id="heading-9"><code>UserService.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(UserRepository userRepository)</span> {
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }

    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">return</span> userRepository.findById(id).orElse(<span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userRepository.findAll();
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span> {
        userRepository.deleteById(id);
    }
}
</code></pre>
<h3 data-id="heading-10">7. ç¼–å†™æ§åˆ¶å™¨</h3>
<p>åˆ©ç”¨ä¸Šè¿°æœåŠ¡ç±»æ¥ç¼–å†™RESTful APIæ§åˆ¶å™¨ã€‚</p>
<h4 data-id="heading-11"><code>UserController.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserController</span><span class="hljs-params">(UserService userService)</span> {
        <span class="hljs-built_in">this</span>.userService = userService;
    }

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">createdUser</span> <span class="hljs-operator">=</span> userService.createUser(user);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdUser);
    }

    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.getUserById(id);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(user);
    }

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;List&lt;User&gt;&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        List&lt;User&gt; users = userService.getAllUsers();
        <span class="hljs-keyword">return</span> ResponseEntity.ok(users);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> User user)</span> {
        user.setId(id);
        <span class="hljs-type">User</span> <span class="hljs-variable">updatedUser</span> <span class="hljs-operator">=</span> userService.updateUser(user);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(updatedUser);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Void&gt; <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        userService.deleteUser(id);
        <span class="hljs-keyword">return</span> ResponseEntity.noContent().build();
    }
}
</code></pre>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨äº†Hibernateï¼Œé…ç½®äº†æ•°æ®æºï¼Œå®šä¹‰äº†å®ä½“ç±»ï¼Œåˆ›å»ºäº†DAOå±‚å’ŒæœåŠ¡å±‚ï¼Œå¹¶ç¼–å†™äº†RESTful APIæ§åˆ¶å™¨ã€‚è¿™ä½¿å¾—æ¯ä¸ªå¾®æœåŠ¡å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œå®ç°äº†å®Œæ•´çš„CRUDåŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ66ï¼‰å¦‚ä½•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7599528186587086858</link>    <guid>https://juejin.cn/post/7599528186587086858</guid>    <pubDate>2026-01-26T11:51:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599528186587086858" data-draft-id="7599478406238388233" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ66ï¼‰å¦‚ä½•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T11:51:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ66ï¼‰å¦‚ä½•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T11:51:26.000Z" title="Mon Jan 26 2026 11:51:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨Hibernateéœ€è¦è€ƒè™‘å¤šä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬æ•°æ®æºé…ç½®ã€æ•°æ®ä¸€è‡´æ€§ã€äº‹åŠ¡ç®¡ç†ã€ä»¥åŠå„æœåŠ¡ä¹‹é—´çš„é€šä¿¡å’Œåè°ƒã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®ç‰¹ç‚¹æ˜¯å¤šä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼ˆæˆ–å¾®æœåŠ¡ï¼‰å„è‡ªå¤„ç†è‡ªå·±çš„æ•°æ®å­˜å‚¨å’Œä¸šåŠ¡é€»è¾‘ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œåœ¨æ¯ä¸ªæœåŠ¡çš„æ„å»ºæ–‡ä»¶ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯Mavenæ¥æ„å»ºé¡¹ç›®ï¼Œå¯ä»¥åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Core --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.4.32.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- JPA API --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.persistence<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.persistence-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Data JPA if using Spring Boot --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æº</h3>
<p>åœ¨æ¯ä¸ªå¾®æœåŠ¡ä¸­é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨Spring Bootæ¥ç®€åŒ–é…ç½®ï¼š</p>
<h4 data-id="heading-2"><code>application.properties</code></h4>
<pre><code class="hljs language-properties" lang="properties">spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
</code></pre>
<h3 data-id="heading-3">3. é…ç½®Hibernateçš„SessionFactory</h3>
<p>Spring Bootä¼šè‡ªåŠ¨é…ç½®<code>SessionFactory</code>ï¼Œå¦‚æœä½ ä½¿ç”¨å…¶ä»–æ¡†æ¶ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</p>
<h3 data-id="heading-4">4. å®šä¹‰å®ä½“ç±»</h3>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»ï¼Œä¾‹å¦‚<code>User</code>ã€‚</p>
<h4 data-id="heading-5"><code>User.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.Table;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> String password;

    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> username;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-built_in">this</span>.username = username;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> password;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> {
        <span class="hljs-built_in">this</span>.password = password;
    }
}
</code></pre>
<h3 data-id="heading-6">5. åˆ›å»ºDAOå±‚</h3>
<p>åˆ›å»ºä¸€ä¸ªæ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰æ¥å£å’Œå®ç°ç±»ï¼Œç”¨äºè®¿é—®æ•°æ®åº“ã€‚å¦‚æœä½¿ç”¨Spring Data JPAï¼Œå¯ä»¥ç®€åŒ–ä¸ºä¸€ä¸ªæ¥å£ã€‚</p>
<h4 data-id="heading-7"><code>UserRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;User, Long&gt; {
    User <span class="hljs-title function_">findByUsername</span><span class="hljs-params">(String username)</span>;
}
</code></pre>
<h3 data-id="heading-8">6. åˆ›å»ºæœåŠ¡å±‚</h3>
<p>åˆ›å»ºä¸€ä¸ªæœåŠ¡ç±»ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h4 data-id="heading-9"><code>UserService.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(UserRepository userRepository)</span> {
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }

    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">return</span> userRepository.findById(id).orElse(<span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userRepository.findAll();
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span> {
        userRepository.deleteById(id);
    }
}
</code></pre>
<h3 data-id="heading-10">7. ç¼–å†™æ§åˆ¶å™¨</h3>
<p>åˆ©ç”¨ä¸Šè¿°æœåŠ¡ç±»æ¥ç¼–å†™RESTful APIæ§åˆ¶å™¨ã€‚</p>
<h4 data-id="heading-11"><code>UserController.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserController</span><span class="hljs-params">(UserService userService)</span> {
        <span class="hljs-built_in">this</span>.userService = userService;
    }

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">createdUser</span> <span class="hljs-operator">=</span> userService.createUser(user);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdUser);
    }

    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.getUserById(id);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(user);
    }

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;List&lt;User&gt;&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        List&lt;User&gt; users = userService.getAllUsers();
        <span class="hljs-keyword">return</span> ResponseEntity.ok(users);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> User user)</span> {
        user.setId(id);
        <span class="hljs-type">User</span> <span class="hljs-variable">updatedUser</span> <span class="hljs-operator">=</span> userService.updateUser(user);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(updatedUser);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Void&gt; <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        userService.deleteUser(id);
        <span class="hljs-keyword">return</span> ResponseEntity.noContent().build();
    }
}
</code></pre>
<h3 data-id="heading-12">8. åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œäº‹åŠ¡ç®¡ç†æ˜¯ä¸€ä¸ªé‡è¦é—®é¢˜ã€‚ä½ å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†æ¡†æ¶ï¼Œä¾‹å¦‚Spring Cloud Sleuthã€Spring Cloud Streamä»¥åŠå¤–éƒ¨çš„äº‹åŠ¡åè°ƒå™¨ï¼ˆå¦‚JTAæˆ–XAäº‹åŠ¡ï¼‰ã€‚</p>
<h4 data-id="heading-13">ä½¿ç”¨Spring Cloud Sleuthå’ŒSpring Cloud Streamè¿›è¡Œåˆ†å¸ƒå¼è·Ÿè¸ª</h4>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ç›¸å…³ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-stream-kafka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨<code>application.properties</code>ä¸­é…ç½®Kafkaï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.cloud.stream.bindings.output.destination=mytopic
spring.cloud.stream.kafka.binder.brokers=localhost:9092
</code></pre>
<p>ç„¶ååœ¨æœåŠ¡å±‚æ·»åŠ Kafkaæ¶ˆæ¯å‘é€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.cloud.stream.annotation.EnableBinding;
<span class="hljs-keyword">import</span> org.springframework.cloud.stream.messaging.Source;
<span class="hljs-keyword">import</span> org.springframework.messaging.support.MessageBuilder;

<span class="hljs-meta">@EnableBinding(Source.class)</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Source source;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(UserRepository userRepository)</span> {
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> userRepository.save(user);
        source.output().send(MessageBuilder.withPayload(savedUser).build());
        <span class="hljs-keyword">return</span> savedUser;
    }

    <span class="hljs-comment">// other methods...</span>
}
</code></pre>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨äº†Hibernateï¼Œé…ç½®äº†æ•°æ®æºï¼Œå®šä¹‰äº†å®ä½“ç±»ï¼Œåˆ›å»ºäº†DAOå±‚å’ŒæœåŠ¡å±‚ï¼Œå¹¶ç¼–å†™äº†RESTful APIæ§åˆ¶å™¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨Spring Cloud Sleuthå’ŒSpring Cloud Streamæ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†å’Œåˆ†å¸ƒå¼è·Ÿè¸ªã€‚è¿™ä½¿å¾—æ¯ä¸ªå¾®æœåŠ¡å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œå®ç°äº†å®Œæ•´çš„CRUDåŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½å¤Ÿç®¡ç†åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter-ä½¿ç”¨Galå±•ç¤ºå’Œä¿å­˜å›¾ç‰‡èµ„æº]]></title>    <link>https://juejin.cn/post/7599502282601824319</link>    <guid>https://juejin.cn/post/7599502282601824319</guid>    <pubDate>2026-01-26T11:51:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599502282601824319" data-draft-id="7596926832912056383" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter-ä½¿ç”¨Galå±•ç¤ºå’Œä¿å­˜å›¾ç‰‡èµ„æº "/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2026-01-26T11:51:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter-ä½¿ç”¨Galå±•ç¤ºå’Œä¿å­˜å›¾ç‰‡èµ„æº 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T11:51:48.000Z" title="Mon Jan 26 2026 11:51:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>Gal æ˜¯ Flutter ç”Ÿæ€ä¸­ä¸€æ¬¾è½»é‡ã€é«˜æ€§èƒ½çš„å›¾ç‰‡ç®¡ç†ä¸é¢„è§ˆæ’ä»¶ï¼Œä¸“ä¸ºç®€åŒ– Flutter åº”ç”¨ä¸­å›¾ç‰‡é€‰æ‹©ã€é¢„è§ˆã€ä¿å­˜ç­‰æ ¸å¿ƒåœºæ™¯è®¾è®¡ã€‚å®ƒå°è£…äº†åŸç”Ÿå¹³å°çš„å›¾ç‰‡å¤„ç†èƒ½åŠ›ï¼Œæä¾›ç»Ÿä¸€çš„ API æ¥å£ï¼Œè®©å¼€å‘è€…æ— éœ€å…³æ³¨ iOS/Android åº•å±‚å·®å¼‚ï¼Œå¿«é€Ÿå®ç°ä¸“ä¸šçº§çš„å›¾ç‰‡äº¤äº’ä½“éªŒã€‚</p>
<h2 data-id="heading-0">1. Gal æ’ä»¶æ ¸å¿ƒåŠŸèƒ½</h2>
<p>Gal æ’ä»¶çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>è·¨å¹³å°ä¸€è‡´æ€§</strong>å’Œ<strong>æ˜“ç”¨æ€§</strong>ï¼Œä¸»è¦è¦†ç›–ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>å›¾ç‰‡é¢„è§ˆ</strong>ï¼šæ”¯æŒå•å¼ /å¤šå¼ å›¾ç‰‡çš„æ²‰æµ¸å¼é¢„è§ˆï¼ŒåŒ…å«ç¼©æ”¾ã€æ»‘åŠ¨åˆ‡æ¢ã€æ‰‹åŠ¿è¿”å›ç­‰äº¤äº’ï¼›</li>
<li><strong>ç›¸å†Œæ“ä½œ</strong>ï¼šè¯»å–è®¾å¤‡ç›¸å†Œã€ç­›é€‰å›¾ç‰‡/è§†é¢‘ã€è·å–å›¾ç‰‡å…ƒä¿¡æ¯ï¼ˆå°ºå¯¸ã€è·¯å¾„ã€åˆ›å»ºæ—¶é—´ï¼‰ï¼›</li>
<li><strong>å›¾ç‰‡ä¿å­˜</strong>ï¼šå°†ç½‘ç»œå›¾ç‰‡/æœ¬åœ°å›¾ç‰‡ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œï¼Œè‡ªåŠ¨å¤„ç†æƒé™ç”³è¯·ï¼›</li>
<li><strong>æƒé™ç®¡ç†</strong>ï¼šå°è£…ç›¸å†Œè¯»å†™æƒé™çš„ç”³è¯·ä¸çŠ¶æ€æ£€æµ‹ï¼Œé€‚é… iOS/Android æƒé™æœºåˆ¶å·®å¼‚ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå†…ç½®å›¾ç‰‡æ‡’åŠ è½½ã€å†…å­˜ç¼“å­˜ç­–ç•¥ï¼Œé¿å…å¤§å›¾é›†åŠ è½½æ—¶çš„å¡é¡¿é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-1">2. æ ¸å¿ƒ API ä¸å±æ€§è¯¦è§£</h2>
<h3 data-id="heading-2">2.1. åŸºç¡€é…ç½®</h3>
<p>ä½¿ç”¨ Gal å‰éœ€å…ˆå®Œæˆåˆå§‹åŒ–ï¼Œå¹¶é…ç½®æƒé™ç›¸å…³å‚æ•°ï¼ˆpubspec.yaml é…ç½®ï¼‰ï¼š</p>
<p><strong>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">gal:</span> <span class="hljs-string">^2.1.0</span> <span class="hljs-comment"># å»ºè®®ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ</span>
</code></pre>
<p><strong>Androidï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">
<span class="hljs-comment"># Android æƒé™é…ç½®ï¼ˆandroid/app/src/main/AndroidManifest.xmlï¼‰</span>
&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span>/&gt;
&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> android:maxSdkVersion=<span class="hljs-string">"32"</span>/&gt;
&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.MANAGE_EXTERNAL_STORAGE"</span>/&gt;
</code></pre>
<p><strong>iOSï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"># iOS æƒé™é…ç½®ï¼ˆios/Runner/Info.plistï¼‰
&lt;<span class="hljs-keyword">key</span>&gt;NSPhotoLibraryUsageDescription&lt;/<span class="hljs-keyword">key</span>&gt;
&lt;<span class="hljs-type">string</span>&gt;éœ€è¦è®¿é—®ç›¸å†Œä»¥é€‰æ‹©/ä¿å­˜å›¾ç‰‡&lt;/<span class="hljs-type">string</span>&gt;
&lt;<span class="hljs-keyword">key</span>&gt;NSPhotoLibraryAddUsageDescription&lt;/<span class="hljs-keyword">key</span>&gt;
&lt;<span class="hljs-type">string</span>&gt;éœ€è¦å†™å…¥æƒé™ä»¥ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ&lt;/<span class="hljs-type">string</span>&gt;
</code></pre>
<h3 data-id="heading-3">2.2. æ ¸å¿ƒ API åˆ—è¡¨</h3>









































<table><thead><tr><th>API æ–¹æ³•</th><th>åŠŸèƒ½æè¿°</th><th>å‚æ•°è¯´æ˜</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>Gal.requestPermission()</code></td><td>ç”³è¯·ç›¸å†Œè¯»å†™æƒé™</td><td><code>type</code>: æƒé™ç±»å‹ï¼ˆ<code>PermissionType.read</code>/<code>write</code>ï¼‰</td><td><code>Future&lt;bool&gt;</code>: æ˜¯å¦æˆæƒæˆåŠŸ</td></tr><tr><td><code>Gal.getPhotos()</code></td><td>è·å–ç›¸å†Œå›¾ç‰‡åˆ—è¡¨</td><td><code>limit</code>: åŠ è½½æ•°é‡ï¼ˆé»˜è®¤å…¨éƒ¨ï¼‰<br/><code>albumId</code>: æŒ‡å®šç›¸å†Œ IDï¼ˆå¯é€‰ï¼‰</td><td><code>Future&lt;List&lt;GalPhoto&gt;&gt;</code>: å›¾ç‰‡ä¿¡æ¯åˆ—è¡¨</td></tr><tr><td><code>Gal.preview()</code></td><td>é¢„è§ˆå›¾ç‰‡</td><td><code>photos</code>: å›¾ç‰‡åˆ—è¡¨<br/><code>initialIndex</code>: åˆå§‹é¢„è§ˆç´¢å¼•<br/><code>backgroundColor</code>: é¢„è§ˆèƒŒæ™¯è‰²</td><td><code>Future&lt;void&gt;</code></td></tr><tr><td><code>Gal.saveImage()</code></td><td>ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ</td><td><code>path</code>: å›¾ç‰‡æœ¬åœ°è·¯å¾„/ç½‘ç»œ URL<br/><code>albumName</code>: è‡ªå®šä¹‰ç›¸å†Œåç§°ï¼ˆå¯é€‰ï¼‰</td><td><code>Future&lt;bool&gt;</code>: æ˜¯å¦ä¿å­˜æˆåŠŸ</td></tr><tr><td><code>Gal.getAlbums()</code></td><td>è·å–è®¾å¤‡ç›¸å†Œåˆ—è¡¨</td><td>-</td><td><code>Future&lt;List&lt;GalAlbum&gt;&gt;</code>: ç›¸å†Œä¿¡æ¯åˆ—è¡¨</td></tr></tbody></table>
<h3 data-id="heading-4">2.3. å…³é”®æ•°æ®æ¨¡å‹</h3>
<h4 data-id="heading-5">GalPhotoï¼ˆå›¾ç‰‡ä¿¡æ¯æ¨¡å‹ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GalPhoto</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> id; <span class="hljs-comment">// å›¾ç‰‡å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> path; <span class="hljs-comment">// æœ¬åœ°è·¯å¾„</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span>? url; <span class="hljs-comment">// ç½‘ç»œå›¾ç‰‡ URLï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> width; <span class="hljs-comment">// å›¾ç‰‡å®½åº¦</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> height; <span class="hljs-comment">// å›¾ç‰‡é«˜åº¦</span>
  <span class="hljs-keyword">final</span> DateTime createTime; <span class="hljs-comment">// åˆ›å»ºæ—¶é—´</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> mimeType; <span class="hljs-comment">// å›¾ç‰‡ç±»å‹ï¼ˆimage/jpeg ç­‰ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-6">GalAlbumï¼ˆç›¸å†Œä¿¡æ¯æ¨¡å‹ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GalAlbum</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> id; <span class="hljs-comment">// ç›¸å†Œå”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> name; <span class="hljs-comment">// ç›¸å†Œåç§°</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> count; <span class="hljs-comment">// ç›¸å†Œå†…å›¾ç‰‡æ•°é‡</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span>? coverPath; <span class="hljs-comment">// ç›¸å†Œå°é¢è·¯å¾„</span>
}
</code></pre>
<h2 data-id="heading-7">3. å›¾ç‰‡é€‰æ‹©ä¸é¢„è§ˆåŠŸèƒ½Demo</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Demoï¼Œå®ç°ã€Œè·å–ç›¸å†Œå›¾ç‰‡ â†’ åˆ—è¡¨å±•ç¤º â†’ ç‚¹å‡»é¢„è§ˆ â†’ ä¿å­˜å›¾ç‰‡ã€çš„æ ¸å¿ƒæµç¨‹ã€‚</p>
<h3 data-id="heading-8">3.1 å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-php" lang="php">import <span class="hljs-string">'package:flutter/material.dart'</span>;
import <span class="hljs-string">'package:gal/gal.dart'</span>;
import <span class="hljs-string">'package:permission_handler/permission_handler.dart'</span>;

<span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">main</span>() =&gt; <span class="hljs-title function_ invoke__">runApp</span>(<span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">GalDemoApp</span>());

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GalDemoApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GalDemoApp</span>({super.key});

  @override
  Widget <span class="hljs-title function_ invoke__">build</span>(BuildContext context) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">MaterialApp</span>(
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Gal æ’ä»¶ Demo'</span>,
      <span class="hljs-attr">theme</span>: <span class="hljs-title function_ invoke__">ThemeData</span>(<span class="hljs-attr">primarySwatch</span>: Colors.blue),
      <span class="hljs-attr">home</span>: <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">GalDemoPage</span>(),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GalDemoPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GalDemoPage</span>({super.key});

  @override
  State&lt;GalDemoPage&gt; <span class="hljs-title function_ invoke__">createState</span>() =&gt; <span class="hljs-title function_ invoke__">_GalDemoPageState</span>();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_GalDemoPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">GalDemoPage</span>&gt; </span>{
  List&lt;GalPhoto&gt; _photos = [];
  <span class="hljs-keyword">bool</span> _isLoading = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// ç”³è¯·ç›¸å†Œæƒé™</span>
  Future&lt;<span class="hljs-keyword">bool</span>&gt; <span class="hljs-title function_ invoke__">_requestPermission</span>() async {
    <span class="hljs-keyword">final</span> status = await Permission.photos.<span class="hljs-title function_ invoke__">request</span>();
    <span class="hljs-keyword">return</span> status.isGranted;
  }

  <span class="hljs-comment">// åŠ è½½ç›¸å†Œå›¾ç‰‡</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; <span class="hljs-title function_ invoke__">_loadPhotos</span>() async {
    <span class="hljs-title function_ invoke__">setState</span>(() =&gt; _isLoading = <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> hasPermission = await <span class="hljs-title function_ invoke__">_requestPermission</span>();
      <span class="hljs-keyword">if</span> (!hasPermission) {
        <span class="hljs-keyword">if</span> (mounted) {
          ScaffoldMessenger.<span class="hljs-title function_ invoke__">of</span>(context).<span class="hljs-title function_ invoke__">showSnackBar</span>(
            <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">SnackBar</span>(<span class="hljs-attr">content</span>: <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'è¯·æˆäºˆç›¸å†Œè®¿é—®æƒé™'</span>)),
          );
        }
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-comment">// è·å–ç›¸å†Œå›¾ç‰‡ï¼ˆé™åˆ¶åŠ è½½20å¼ ï¼Œé¿å…æ€§èƒ½é—®é¢˜ï¼‰</span>
      <span class="hljs-keyword">final</span> photos = await Gal.<span class="hljs-title function_ invoke__">getPhotos</span>(<span class="hljs-attr">limit</span>: <span class="hljs-number">20</span>);
      <span class="hljs-title function_ invoke__">setState</span>(() =&gt; _photos = photos);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">if</span> (mounted) {
        ScaffoldMessenger.<span class="hljs-title function_ invoke__">of</span>(context).<span class="hljs-title function_ invoke__">showSnackBar</span>(
          <span class="hljs-title function_ invoke__">SnackBar</span>(<span class="hljs-attr">content</span>: <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'åŠ è½½å›¾ç‰‡å¤±è´¥ï¼š$e'</span>)),
        );
      }
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_ invoke__">setState</span>(() =&gt; _isLoading = <span class="hljs-literal">false</span>);
    }
  }

  <span class="hljs-comment">// é¢„è§ˆå›¾ç‰‡</span>
  <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">_previewPhoto</span>(<span class="hljs-keyword">int</span> index) async {
    await Gal.<span class="hljs-title function_ invoke__">preview</span>(
      <span class="hljs-attr">photos</span>: _photos,
      <span class="hljs-attr">initialIndex</span>: index,
      <span class="hljs-attr">backgroundColor</span>: Colors.black,
    );
  }

  <span class="hljs-comment">// ä¿å­˜ç¤ºä¾‹å›¾ç‰‡åˆ°ç›¸å†Œ</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; <span class="hljs-title function_ invoke__">_saveSampleImage</span>() async {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">sampleImageUrl</span> = <span class="hljs-string">'https://picsum.photos/800/600'</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> success = await Gal.<span class="hljs-title function_ invoke__">saveImage</span>(
        sampleImageUrl,
        <span class="hljs-attr">albumName</span>: <span class="hljs-string">'Gal Demo'</span>, // è‡ªå®šä¹‰ç›¸å†Œåç§°
      );
      <span class="hljs-keyword">if</span> (success) {
        <span class="hljs-keyword">if</span> (mounted) {
          ScaffoldMessenger.<span class="hljs-title function_ invoke__">of</span>(context).<span class="hljs-title function_ invoke__">showSnackBar</span>(
            <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">SnackBar</span>(<span class="hljs-attr">content</span>: <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'å›¾ç‰‡ä¿å­˜æˆåŠŸ'</span>)),
          );
          <span class="hljs-comment">// ä¿å­˜åé‡æ–°åŠ è½½å›¾ç‰‡åˆ—è¡¨</span>
          <span class="hljs-title function_ invoke__">_loadPhotos</span>();
        }
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">if</span> (mounted) {
        ScaffoldMessenger.<span class="hljs-title function_ invoke__">of</span>(context).<span class="hljs-title function_ invoke__">showSnackBar</span>(
          <span class="hljs-title function_ invoke__">SnackBar</span>(<span class="hljs-attr">content</span>: <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'ä¿å­˜å¤±è´¥ï¼š$e'</span>)),
        );
      }
    }
  }

  @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_ invoke__">initState</span>() {
    super.<span class="hljs-title function_ invoke__">initState</span>();
    <span class="hljs-comment">// é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½å›¾ç‰‡</span>
    <span class="hljs-title function_ invoke__">_loadPhotos</span>();
  }

  @override
  Widget <span class="hljs-title function_ invoke__">build</span>(BuildContext context) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Scaffold</span>(
      <span class="hljs-attr">appBar</span>: <span class="hljs-title function_ invoke__">AppBar</span>(
        <span class="hljs-attr">title</span>: <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'Gal å›¾ç‰‡ç®¡ç† Demo'</span>),
        <span class="hljs-attr">actions</span>: [
          <span class="hljs-title function_ invoke__">IconButton</span>(
            <span class="hljs-attr">icon</span>: <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">Icon</span>(Icons.save),
            <span class="hljs-attr">onPressed</span>: _saveSampleImage,
            <span class="hljs-attr">tooltip</span>: <span class="hljs-string">'ä¿å­˜ç¤ºä¾‹å›¾ç‰‡'</span>,
          ),
        ],
      ),
      <span class="hljs-attr">body</span>: <span class="hljs-title function_ invoke__">_buildBody</span>(),
    );
  }

  Widget <span class="hljs-title function_ invoke__">_buildBody</span>() {
    <span class="hljs-keyword">if</span> (_isLoading) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Center</span>(child: <span class="hljs-title function_ invoke__">CircularProgressIndicator</span>());
    }
    <span class="hljs-keyword">if</span> (_photos.isEmpty) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Center</span>(child: <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">'æš‚æ— å›¾ç‰‡ï¼Œè¯·æ£€æŸ¥æƒé™æˆ–ç›¸å†Œå†…å®¹'</span>));
    }
    <span class="hljs-comment">// ç½‘æ ¼å±•ç¤ºå›¾ç‰‡</span>
    <span class="hljs-keyword">return</span> GridView.<span class="hljs-title function_ invoke__">builder</span>(
      <span class="hljs-attr">padding</span>: <span class="hljs-keyword">const</span> EdgeInsets.<span class="hljs-title function_ invoke__">all</span>(<span class="hljs-number">8</span>),
      <span class="hljs-attr">gridDelegate</span>: <span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">SliverGridDelegateWithFixedCrossAxisCount</span>(
        <span class="hljs-attr">crossAxisCount</span>: <span class="hljs-number">3</span>, // æ¯è¡Œ<span class="hljs-number">3</span>åˆ—
        <span class="hljs-attr">crossAxisSpacing</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">mainAxisSpacing</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">childAspectRatio</span>: <span class="hljs-number">1</span>, // å®½é«˜æ¯”<span class="hljs-number">1</span>:<span class="hljs-number">1</span>
      ),
      <span class="hljs-attr">itemCount</span>: _photos.length,
      <span class="hljs-attr">itemBuilder</span>: (context, index) {
        <span class="hljs-keyword">final</span> photo = _photos[index];
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">GestureDetector</span>(
          <span class="hljs-attr">onTap</span>: () =&gt; <span class="hljs-title function_ invoke__">_previewPhoto</span>(index),
          child: Image.<span class="hljs-title function_ invoke__">file</span>(
            <span class="hljs-title function_ invoke__">File</span>(photo.path),
            <span class="hljs-attr">fit</span>: BoxFit.cover,
            <span class="hljs-attr">errorBuilder</span>: (context, error, stackTrace) {
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Icon</span>(Icons.broken_image, color: Colors.grey);
            },
          ),
        );
      },
    );
  }
}
</code></pre>
<h3 data-id="heading-9">3.2. ä»£ç è¯´æ˜</h3>
<ol>
<li><strong>æƒé™å¤„ç†</strong>ï¼šç»“åˆ <code>permission_handler</code> æ’ä»¶ç”³è¯·ç›¸å†Œæƒé™ï¼Œè¿™æ˜¯ä½¿ç”¨ Gal çš„å‰æï¼›</li>
<li><strong>å›¾ç‰‡åŠ è½½</strong>ï¼šé€šè¿‡ <code>Gal.getPhotos()</code> è·å–ç›¸å†Œå›¾ç‰‡ï¼Œé™åˆ¶åŠ è½½æ•°é‡é¿å…å¡é¡¿ï¼›</li>
<li><strong>å›¾ç‰‡å±•ç¤º</strong>ï¼šä½¿ç”¨ <code>GridView</code> å±•ç¤ºå›¾ç‰‡åˆ—è¡¨ï¼Œç‚¹å‡»å›¾ç‰‡è°ƒç”¨ <code>Gal.preview()</code> å®ç°æ²‰æµ¸å¼é¢„è§ˆï¼›</li>
<li><strong>å›¾ç‰‡ä¿å­˜</strong>ï¼šè°ƒç”¨ <code>Gal.saveImage()</code> å°†ç½‘ç»œå›¾ç‰‡ä¿å­˜åˆ°è‡ªå®šä¹‰ç›¸å†Œï¼Œä¿å­˜æˆåŠŸååˆ·æ–°åˆ—è¡¨ã€‚</li>
</ol>
<h3 data-id="heading-10">3.3. è¿è¡Œæ•ˆæœ</h3>
<ol>
<li>é¦–æ¬¡æ‰“å¼€åº”ç”¨ä¼šå¼¹å‡ºæƒé™ç”³è¯·å¼¹çª—ï¼ŒæˆæƒååŠ è½½ç›¸å†Œå‰20å¼ å›¾ç‰‡ï¼›</li>
<li>å›¾ç‰‡ä»¥ç½‘æ ¼å½¢å¼å±•ç¤ºï¼Œç‚¹å‡»ä»»æ„å›¾ç‰‡è¿›å…¥å…¨å±é¢„è§ˆæ¨¡å¼ï¼Œæ”¯æŒæ»‘åŠ¨åˆ‡æ¢ã€åŒæŒ‡ç¼©æ”¾ï¼›</li>
<li>ç‚¹å‡»å³ä¸Šè§’ã€Œä¿å­˜ã€æŒ‰é’®ï¼Œå¯å°†ç¤ºä¾‹ç½‘ç»œå›¾ç‰‡ä¿å­˜åˆ°ã€ŒGal Demoã€ç›¸å†Œï¼Œä¿å­˜ååˆ—è¡¨è‡ªåŠ¨åˆ·æ–°ã€‚</li>
</ol>
<h2 data-id="heading-11">4. æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>æƒé™é€‚é…</strong>ï¼š</p>
<ol>
<li>Android 13+ éœ€å•ç‹¬ç”³è¯· <code>READ_MEDIA_IMAGES</code> æƒé™ï¼ŒAndroid 10 éœ€é…ç½® <code>android:requestLegacyExternalStorage="true"</code>ï¼›</li>
<li>iOS 14+ æ”¯æŒç²¾ç¡®ç›¸å†Œæƒé™ï¼ˆä»…å…è®¸é€‰æ‹©éƒ¨åˆ†å›¾ç‰‡ï¼‰ï¼ŒGal å·²é€‚é…è¯¥ç‰¹æ€§ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ol>
<li>åŠ è½½å¤§é‡å›¾ç‰‡æ—¶ï¼ŒåŠ¡å¿…è®¾ç½® <code>limit</code> å‚æ•°åˆ†é¡µåŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨å›¾ç‰‡å¯¼è‡´å†…å­˜æº¢å‡ºï¼›</li>
<li>é¢„è§ˆå›¾ç‰‡æ—¶ï¼Œå»ºè®®ä½¿ç”¨ <code>CachedNetworkImage</code> ç¼“å­˜ç½‘ç»œå›¾ç‰‡ã€‚</li>
</ol>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š</p>
<ol>
<li>æ‰€æœ‰ Gal API å‡ä¸ºå¼‚æ­¥æ“ä½œï¼Œéœ€æ·»åŠ  <code>try/catch</code> æ•è·æƒé™æ‹’ç»ã€æ–‡ä»¶ä¸å­˜åœ¨ç­‰å¼‚å¸¸ï¼›</li>
<li>ä¿å­˜ç½‘ç»œå›¾ç‰‡æ—¶ï¼Œéœ€å…ˆåˆ¤æ–­ç½‘ç»œçŠ¶æ€ï¼Œé¿å…æ— ç½‘ç»œæ—¶ä¿å­˜å¤±è´¥ã€‚</li>
</ol>
</li>
</ol>
<h2 data-id="heading-12">5. æ€»ç»“</h2>
<ol>
<li>Gal æ’ä»¶æ˜¯ Flutter ä¸­é«˜æ•ˆçš„å›¾ç‰‡ç®¡ç†å·¥å…·ï¼Œæ ¸å¿ƒè¦†ç›–ã€Œæƒé™ç”³è¯·ã€å›¾ç‰‡è¯»å–ã€é¢„è§ˆã€ä¿å­˜ã€å››å¤§æ ¸å¿ƒåœºæ™¯ï¼ŒAPI è®¾è®¡ç®€æ´ä¸”è·¨å¹³å°ä¸€è‡´ï¼›</li>
<li>ä½¿ç”¨ Gal çš„å…³é”®æ­¥éª¤ï¼šé…ç½®æƒé™ â†’ ç”³è¯·æƒé™ â†’ è°ƒç”¨æ ¸å¿ƒ API â†’ å¼‚å¸¸å¤„ç†ï¼›</li>
<li>å®æˆ˜ä¸­éœ€æ³¨æ„æ€§èƒ½ä¼˜åŒ–ï¼ˆåˆ†é¡µåŠ è½½ã€ç¼“å­˜ï¼‰å’Œå¹³å°é€‚é…ï¼ˆä¸åŒç³»ç»Ÿçš„æƒé™/è·¯å¾„å·®å¼‚ï¼‰ï¼Œç¡®ä¿ä½“éªŒä¸€è‡´æ€§ã€‚</li>
</ol>
<p>é€šè¿‡ Gal æ’ä»¶ï¼Œå¼€å‘è€…å¯ä»¥æ‘†è„±åŸç”Ÿå›¾ç‰‡å¤„ç†çš„ç¹çé€»è¾‘ï¼Œå¿«é€Ÿå®ç°åª²ç¾åŸç”Ÿåº”ç”¨çš„å›¾ç‰‡äº¤äº’ä½“éªŒï¼Œæ˜¯ Flutter å›¾ç‰‡ç±»åº”ç”¨çš„ä¼˜é€‰æ’ä»¶ã€‚</p>
<p>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnatsuk4ze%2Fgal%2Fblob%2Fmain%2Fexample%2Flib%2Fmain.dart" target="_blank" title="https://github.com/natsuk4ze/gal/blob/main/example/lib/main.dart" ref="nofollow noopener noreferrer">ä¼ é€é—¨</a></p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7583910637958807571" target="_blank" title="https://juejin.cn/post/7583910637958807571">flutterä½¿ç”¨package_info_plusåº“è·å–åº”ç”¨ä¿¡æ¯çš„æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7588680081327259690" target="_blank" title="https://juejin.cn/post/7588680081327259690">Flutterä¸‹æ‹‰åˆ·æ–°ä¸Šæ‹‰åŠ è½½ä¾§æ‹‰åˆ·æ–°æ’ä»¶ï¼šeasy_refreshå…¨é¢ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7583226204036513833" target="_blank" title="https://juejin.cn/post/7583226204036513833">flutter-ä½¿ç”¨EventBuså®ç°ç»„ä»¶é—´æ•°æ®é€šä¿¡</a></li>
<li><a href="https://juejin.cn/post/7582808491582619684" target="_blank" title="https://juejin.cn/post/7582808491582619684">Flutterè¾“å…¥æ¡†TextFieldçš„å±æ€§ä¸å®æˆ˜ç”¨æ³•å…¨é¢è§£æ+ç¤ºä¾‹</a></li>
<li><a href="https://juejin.cn/post/7581693431740448831" target="_blank" title="https://juejin.cn/post/7581693431740448831">Flutterè‡ªå®šä¹‰æ—¥å†table_calendarå®Œå…¨æŒ‡å—+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7580389111921786943" target="_blank" title="https://juejin.cn/post/7580389111921786943">flutter-å±å¹•è‡ªé€‚åº”æ’ä»¶flutter_screenutilæ•™ç¨‹å…¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7579101504289882166" target="_blank" title="https://juejin.cn/post/7579101504289882166">flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰</a></li>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å°è¯•å°†TinyProé›†æˆTinyEngineä½ä»£ç è®¾è®¡å™¨äº†]]></title>    <link>https://juejin.cn/post/7599294170001276979</link>    <guid>https://juejin.cn/post/7599294170001276979</guid>    <pubDate>2026-01-26T11:57:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599294170001276979" data-draft-id="7599543345980293147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å°è¯•å°†TinyProé›†æˆTinyEngineä½ä»£ç è®¾è®¡å™¨äº†"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,ä½ä»£ç "/> <meta itemprop="datePublished" content="2026-01-26T11:57:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å°è¯•å°†TinyProé›†æˆTinyEngineä½ä»£ç è®¾è®¡å™¨äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T11:57:01.000Z" title="Mon Jan 26 2026 11:57:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>TinyPro</strong> ä¸ <strong>TinyEngine</strong> æ˜¯ OpenTiny å¼€æºç”Ÿæ€çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>TinyPro</strong> æä¾›ä¼ä¸šçº§åå°ç³»ç»Ÿæ¨¡æ¿</li>
<li><strong>TinyEngine</strong> æä¾›çµæ´»å¼ºå¤§çš„ä½ä»£ç å¼•æ“</li>
</ul>
<p>æœ¬é¡¹ç›®åœ¨ TinyPro ä¸­æ·±åº¦é›†æˆäº†åŸºäº TinyEngine çš„ä½ä»£ç è®¾è®¡å™¨ï¼Œé€šè¿‡ <strong>æ’ä»¶åŒ–æ¶æ„</strong> æ„å»ºå‡ºå¯æ‰©å±•çš„ä½ä»£ç å¼€å‘å¹³å°ã€‚</p>
<p>å€ŸåŠ©å®ƒï¼Œä½ åªéœ€åœ¨å¯è§†åŒ–è®¾è®¡å™¨ä¸­å®Œæˆé¡µé¢è®¾è®¡ï¼Œå°±èƒ½ä¸€é”®å¯¼å…¥ TinyProï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆèœå•ã€æƒé™åŠå›½é™…åŒ–é…ç½®ï¼Œå®ç°çœŸæ­£çš„ <strong>â€œæ‰€è§å³æ‰€å¾—â€</strong> å¼å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-0">æ•´ä½“æ¶æ„</h2>
<pre><code class="hljs language-bash" lang="bash">lowcode-designer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js              <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
â”‚   â”œâ”€â”€ composable/          <span class="hljs-comment"># å¯ç»„åˆé€»è¾‘</span>
â”‚   â”œâ”€â”€ configurators/       <span class="hljs-comment"># é…ç½®å™¨</span>
â”œâ”€â”€ registry.js              <span class="hljs-comment"># æ’ä»¶æ³¨å†Œè¡¨</span>
â”œâ”€â”€ engine.config.js         <span class="hljs-comment"># å¼•æ“é…ç½®</span>
â””â”€â”€ vite.config.js          <span class="hljs-comment"># æ„å»ºé…ç½®</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd6ff94aae094b7ca3fc011e60b8d02f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=%2BnIpSNGZQqts%2FrBAxfcZcy%2F%2FSqE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">æ ¸å¿ƒç»„æˆéƒ¨åˆ†</h3>
<ol>
<li><strong>TinyEngine æ ¸å¿ƒ</strong>ï¼šæä¾›ä½ä»£ç è®¾è®¡å™¨çš„åŸºç¡€èƒ½åŠ›</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šé€šè¿‡æ’ä»¶æ‰©å±•åŠŸèƒ½</li>
<li><strong>æ³¨å†Œè¡¨æœºåˆ¶</strong>ï¼šç»Ÿä¸€ç®¡ç†æ’ä»¶å’ŒæœåŠ¡</li>
<li><strong>é…ç½®å™¨ç³»ç»Ÿ</strong>ï¼šè‡ªå®šä¹‰ç»„ä»¶å±æ€§é…ç½®</li>
</ol>
<h3 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>âœ¨ <strong>æ™ºèƒ½ä»£ç ç”Ÿæˆ</strong>ï¼šåŸºäºå¯è§†åŒ–è®¾è®¡è‡ªåŠ¨ç”Ÿæˆç¬¦åˆ TinyPro è§„èŒƒçš„ Vue 3 + TypeScript ä»£ç </li>
<li>ğŸ” <strong>è‡ªåŠ¨è®¤è¯ç®¡ç†</strong>ï¼šæ™ºèƒ½è·å–å’Œç®¡ç† API Tokenï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼</li>
<li>ğŸ¯ <strong>ä¸€é”®é›†æˆ</strong>ï¼šè‡ªåŠ¨åˆ›å»ºèœå•ã€é…ç½®æƒé™ã€æ·»åŠ å›½é™…åŒ–è¯æ¡</li>
<li>ğŸ› ï¸ <strong>ä»£ç è½¬æ¢</strong>ï¼šå°† TinyEngine ç”Ÿæˆçš„ä»£ç è‡ªåŠ¨è½¬æ¢ä¸º TinyPro é¡¹ç›®å…¼å®¹æ ¼å¼</li>
<li>ğŸ’¾ <strong>æœ¬åœ°ä¿å­˜</strong>ï¼šæ”¯æŒå°†ç”Ÿæˆçš„æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</li>
<li>ğŸ¨ <strong>å¯è§†åŒ–é…ç½®</strong>ï¼šæä¾›å‹å¥½çš„ UI ç•Œé¢è¿›è¡Œèœå•å’Œè·¯ç”±é…ç½®</li>
</ul>
<h2 data-id="heading-3">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-4">å®‰è£…</h3>
<p>ä½¿ç”¨ TinyCli å¯ä»¥å¿«é€Ÿåˆå§‹åŒ– TinyPro æ¨¡ç‰ˆ</p>
<pre><code class="hljs language-bash" lang="bash">tiny init pro 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba7759297cc24292989e06ed9b79b378~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=aQNnzurBBJkKsVkojq8V2sKeEVw%3D" alt="image 1.png" loading="lazy"/></p>
<p><strong>å¯åŠ¨ä½ä»£ç è®¾è®¡å™¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> lowcode-designer
pnpm install
pnpm dev
</code></pre>
<p><strong>å¯åŠ¨å‰ç«¯ä¸åç«¯</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> web
pnpm install
pnpm start

<span class="hljs-built_in">cd</span> nestJs
pnpm install
pnpm start
</code></pre>
<p>å¯åŠ¨å®Œæˆåï¼Œè®¿é—® ğŸ‘‰ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8090%2F" target="_blank" title="http://localhost:8090/" ref="nofollow noopener noreferrer"><strong>http://localhost:8090</strong></a> å³å¯ä½“éªŒä½ä»£ç è®¾è®¡å™¨ã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨æµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/233928bddc7d442f9cb2b33504b58d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=cEvz0RD3L8GM7OgZiOBe%2BMdt0%2FE%3D" alt="image 2.png" loading="lazy"/></p>
<p><strong>è®¾è®¡é¡µé¢</strong>ï¼šåœ¨ TinyEngine å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­è®¾è®¡é¡µé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bea77e64a364168bcf4d4d091a6a3a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=sHGrYf56jU%2BG9iyvRv6Io39g6rE%3D" alt="image 3.png" loading="lazy"/></p>
<p><strong>ç‚¹å‡»å‡ºç æŒ‰é’®</strong>ï¼šç‚¹å‡»å·¥å…·æ ä¸­çš„â€å‡ºç â€æŒ‰é’®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e466ff9c20984d03b856948c8214a602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=YAuLr436skwilB5eUAGvXXSogY4%3D" alt="image 4.png" loading="lazy"/></p>
<p><strong>é…ç½®èœå•ä¿¡æ¯</strong>ï¼šåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­å¡«å†™èœå•é…ç½®ä¿¡æ¯</p>
<p><strong>ç”Ÿæˆé¢„è§ˆ</strong>ï¼šç‚¹å‡»â€ç”Ÿæˆé¢„è§ˆâ€æŸ¥çœ‹å°†è¦ç”Ÿæˆçš„æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fad04fe1bd554c638f7a4b8e4e06cec7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=Ys6xQe7Nqg7CCckRjuj6ZDoLl8I%3D" alt="image 5.png" loading="lazy"/></p>
<p><strong>å®Œæˆé›†æˆ</strong>ï¼šç‚¹å‡»â€å®Œæˆé›†æˆâ€è‡ªåŠ¨åˆ›å»ºèœå•ã€åˆ†é…æƒé™å¹¶ä¿å­˜æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b0ff92d20834bd684ae92463e4fae5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=g2hNyc3vQrl8F50vsqJbTCKSeHY%3D" alt="image 6.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å» TinyPro ç›´æ¥çœ‹åˆ°é¡µé¢æ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e348c126b18b4904a8ac4b964f94e7f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=oQ6dGDRLJi3TYBPmBcplg%2BgNl4w%3D" alt="image 7.png" loading="lazy"/></p>
<h3 data-id="heading-6">TinyPro Generate Code æ’ä»¶è§£æ</h3>
<h4 data-id="heading-7">æ’ä»¶ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">generate-code-tinypro/
â”œâ”€â”€ package.json              <span class="hljs-comment"># æ’ä»¶åŒ…é…ç½®</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js             <span class="hljs-comment"># æ’ä»¶å…¥å£</span>
â”‚   â”œâ”€â”€ meta.js              <span class="hljs-comment"># å…ƒæ•°æ®å®šä¹‰</span>
â”‚   â”œâ”€â”€ Main.vue             <span class="hljs-comment"># ä¸»ç»„ä»¶</span>
â”‚   â”œâ”€â”€ SystemIntegration.vue <span class="hljs-comment"># åŠŸèƒ½ç»„ä»¶</span>
â”‚   â”œâ”€â”€ components/          <span class="hljs-comment"># é€šç”¨ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ ToolbarBase.vue
â”‚   â”‚   â”œâ”€â”€ ToolbarBaseButton.vue
â”‚   â”‚   â””â”€â”€ ToolbarBaseIcon.vue
â”‚   â”œâ”€â”€ composable/          <span class="hljs-comment"># å¯ç»„åˆé€»è¾‘</span>
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â””â”€â”€ useSaveLocal.js
â”‚   â””â”€â”€ http.js              <span class="hljs-comment"># HTTP æœåŠ¡</span>
â”œâ”€â”€ vite.config.js           <span class="hljs-comment"># æ„å»ºé…ç½®</span>
â””â”€â”€ README.md                <span class="hljs-comment"># æ–‡æ¡£</span>
</code></pre>
<h4 data-id="heading-8">ä»£ç ç”Ÿæˆæµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">const generatePreview = async () =&gt; {
  // 1. è·å–å½“å‰é¡µé¢çš„ Schema
  const currentSchema = getSchema();

  // 2. è·å–åº”ç”¨å…ƒæ•°æ®ï¼ˆi18nã€dataSourceã€utilsç­‰ï¼‰
  const metaData = await fetchMetaData(params);

  // 3. è·å–é¡µé¢åˆ—è¡¨å’ŒåŒºå—ä¿¡æ¯
  const pageList = await fetchPageList(appId);
  const blockSchema = await getAllNestedBlocksSchema();

  // 4. è°ƒç”¨ä»£ç ç”Ÿæˆå¼•æ“
  const result = await generateAppCode(appSchema);

  // 5. è¿‡æ»¤å’Œè½¬æ¢ç”Ÿæˆçš„ä»£ç 
  const transformedFiles = filteredFiles.map((file) =&gt; ({
<span class="hljs-code">    ...file,
    fileContent: transformForTinyPro(file.fileContent),
  }));
};
</span></code></pre>
<h4 data-id="heading-9">TinyPro ä¸ TinyEngine é€šä¿¡</h4>
<p>å½“ç”¨æˆ·åœ¨ä½ä»£ç è®¾è®¡å™¨ä¸­ç‚¹å‡»â€œå®Œæˆé›†æˆâ€æ—¶ï¼Œæ’ä»¶é¦–å…ˆé€šè¿‡ <strong>Token Manager</strong> å‘è®¤è¯æ¥å£ <code>/api/auth/api-token</code> è¯·æ±‚å¹¶è·å–è®¿é—®å‡­è¯ï¼ˆTokenï¼‰ï¼Œéšååˆ©ç”¨è¯¥ Token è°ƒç”¨ä¸€ç³»åˆ—åå°æ¥å£ï¼ŒåŒ…æ‹¬å›½é™…åŒ– APIã€èœå• API å’Œè§’è‰² APIã€‚æ’ä»¶é€šè¿‡è¿™äº›æ¥å£è‡ªåŠ¨å®Œæˆ <strong>é¡µé¢å›½é™…åŒ–è¯æ¡åˆ›å»ºã€èœå•æ³¨å†Œã€è§’è‰²æŸ¥è¯¢ä¸æƒé™åˆ†é…</strong> ç­‰æ­¥éª¤ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>HTTP Client</code> ç»Ÿä¸€è´Ÿè´£ä¸åç«¯é€šä¿¡ï¼Œè€Œè¿”å›çš„æ•°æ®ï¼ˆèœå•ä¿¡æ¯ã€è§’è‰²ä¿¡æ¯ã€æƒé™é…ç½®ç­‰ï¼‰ä¼šå®æ—¶æ›´æ–°åˆ°æœ¬åœ°ï¼Œæœ€ç»ˆå®ç°äº†ä»é¡µé¢è®¾è®¡åˆ°ç³»ç»Ÿé›†æˆçš„ä¸€é”®é—­ç¯ï¼Œä½¿ TinyEngine ç”Ÿæˆçš„é¡µé¢èƒ½æ— ç¼æ¥å…¥ TinyPro ç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6085b1fbba646239805fa36567aab32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770033420&amp;x-signature=jbmjEGmNIeFf2MhDMKjhSWKNhCo%3D" alt="image 8.png" loading="lazy"/></p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>é€šè¿‡ <strong>TinyPro ä¸ TinyEngine çš„æ·±åº¦èåˆ</strong>ï¼Œæˆ‘ä»¬å®ç°äº†ä»ã€Œå¯è§†åŒ–è®¾è®¡ã€åˆ°ã€Œç³»ç»Ÿé›†æˆã€çš„å®Œæ•´é—­ç¯ï¼Œè®©<strong>ä¸ä¼šå†™ä»£ç çš„ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾æ„å»ºå‡ºé«˜è´¨é‡çš„å‰ç«¯é¡µé¢</strong>ã€‚</p>
<p>ç”¨æˆ·åªéœ€æ‹–æ‹½ç»„ä»¶ã€å¡«å†™é…ç½®ã€ç‚¹å‡»â€œå‡ºç â€ï¼Œæ’ä»¶ä¾¿ä¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆ TinyPro æ ‡å‡†çš„ä»£ç ï¼Œå¹¶å®Œæˆèœå•ã€æƒé™ã€å›½é™…åŒ–ç­‰ç³»ç»Ÿçº§é…ç½®ã€‚</p>
<p>è¿™ä¸€è¿‡ç¨‹æ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»£ç æˆ–åå°é…ç½®ï¼Œå°±èƒ½ä¸€é”®å®Œæˆé¡µé¢åˆ›å»ºã€æ¥å£ç»‘å®šä¸æƒé™åˆ†é…ï¼Œå®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„ã€Œä½é—¨æ§›ã€é«˜æ•ˆç‡ã€å¯æ‰©å±•ã€çš„å‰ç«¯å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-11">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½<br/>
OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyPro æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro" target="_blank" title="https://github.com/opentiny/tiny-pro" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
TinyEngine æºç ï¼šâ€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<p>æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyProã€TinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift å¸¸ç”¨æ¡†æ¶Kingfisherã€KingfisherWebPè¯¦è§£]]></title>    <link>https://juejin.cn/post/7599155566298136619</link>    <guid>https://juejin.cn/post/7599155566298136619</guid>    <pubDate>2026-01-26T10:00:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298136619" data-draft-id="7599237603976560683" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift å¸¸ç”¨æ¡†æ¶Kingfisherã€KingfisherWebPè¯¦è§£"/> <meta itemprop="keywords" content="Swift,iOS"/> <meta itemprop="datePublished" content="2026-01-26T10:00:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift å¸¸ç”¨æ¡†æ¶Kingfisherã€KingfisherWebPè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:00:33.000Z" title="Mon Jan 26 2026 10:00:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1.1 ä»€ä¹ˆæ˜¯ Kingfisher ã€KingfisherWebP</h3>
<p>Kingfisher æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Swift åº“ï¼Œä¸“é—¨ç”¨äºå¤„ç†å›¾åƒçš„ä¸‹è½½ã€ç¼“å­˜å’Œå±•ç¤ºã€‚ç›®å‰å·²æˆä¸º iOS/macOS å¼€å‘ä¸­æœ€å—æ¬¢è¿çš„å›¾åƒå¤„ç†è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>KingfisherWebP æ˜¯ Kingfisher çš„å®˜æ–¹æ‰©å±•ï¼Œç”¨äºæ”¯æŒ WebP å›¾åƒæ ¼å¼ã€‚WebP æ˜¯ Google å¼€å‘çš„ä¸€ç§ç°ä»£å›¾åƒæ ¼å¼ï¼Œå®ƒå¯ä»¥åœ¨ç›¸åŒè´¨é‡ä¸‹æä¾›æ¯” JPEG å’Œ PNG æ›´å°çš„æ–‡ä»¶å¤§å°ï¼Œä»è€Œå‡å°‘å¸¦å®½ä½¿ç”¨å’ŒåŠ å¿«åŠ è½½é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-1">1.2 æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>å¼‚æ­¥ä¸‹è½½ ï¼šåœ¨åå°çº¿ç¨‹ä¸‹è½½å›¾ç‰‡ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
<li>å¤šçº§ç¼“å­˜ ï¼šå†…å­˜ç¼“å­˜ + ç£ç›˜ç¼“å­˜ï¼Œæé«˜åŠ è½½é€Ÿåº¦</li>
<li>è‡ªåŠ¨ç¼“å­˜ç®¡ç† ï¼šæ™ºèƒ½å¤„ç†ç¼“å­˜å¤§å°å’Œè¿‡æœŸæ—¶é—´</li>
<li>å›¾ç‰‡å¤„ç† ï¼šæ”¯æŒä¸‹è½½åå¤„ç†ï¼Œå¦‚åœ†è§’ã€æ¨¡ç³Šç­‰</li>
<li>è¯·æ±‚ä¼˜å…ˆçº§ ï¼šå¯è®¾ç½®ä¸åŒå›¾ç‰‡è¯·æ±‚çš„ä¼˜å…ˆçº§</li>
<li>å¯æ‰©å±•æ€§ ï¼šæ”¯æŒè‡ªå®šä¹‰ç¼“å­˜ã€ä¸‹è½½å™¨ç­‰ç»„ä»¶</li>
<li>SwiftUI æ”¯æŒ ï¼šæä¾›äº†ä¾¿æ·çš„ SwiftUI è§†å›¾æ‰©å±•</li>
<li>åŠ¨ç”»æ”¯æŒ ï¼šæ”¯æŒ GIF ç­‰åŠ¨ç”»å›¾ç‰‡</li>
</ul>
<h3 data-id="heading-2">1.3 å®‰è£…æ–¹å¼</h3>
<p>Kingfisher æ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼š</p>
<p>CocoaPods:</p>
<pre><code class="hljs language-arduino" lang="arduino">pod <span class="hljs-string">'Kingfisher'</span>
pod <span class="hljs-string">'KingfisherWebP'</span>
</code></pre>
<h3 data-id="heading-3">2. Kingfisher åŸºç¡€ç”¨æ³•</h3>
<h3 data-id="heading-4">2.1 åŸºæœ¬å›¾ç‰‡åŠ è½½</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Kingfisher</span>

<span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span>
imageView.<span class="hljs-property">kf</span>.<span class="hljs-title function_">setImage</span>(<span class="hljs-attr">with</span>: <span class="hljs-title function_">URL</span>(<span class="hljs-attr">string</span>: <span class="hljs-string">"https://example.com/image.jpg"</span>))

<span class="hljs-comment">// å¸¦é€‰é¡¹çš„ç”¨æ³•</span>
imageView.<span class="hljs-property">kf</span>.<span class="hljs-title function_">setImage</span>(<span class="hljs-params">
    <span class="hljs-keyword">with</span>: URL(<span class="hljs-built_in">string</span>: <span class="hljs-string">"https://example.com/image.jpg"</span>),
    placeholder: UIImage(named: <span class="hljs-string">"placeholder"</span>),
    options: [
        .transition(.fade(<span class="hljs-number">0.2</span>)),
        .cacheOriginalImage
    ]
</span>) { result <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">switch</span> result {
    <span class="hljs-keyword">case</span> .<span class="hljs-title function_">success</span>(<span class="hljs-keyword">let</span> value):
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"Image loaded: \(value.image)"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"å›¾ç‰‡åŠ è½½æˆåŠŸ: \(value.source.url?.absoluteString ?? "</span><span class="hljs-string">")"</span>)
    <span class="hljs-keyword">case</span> .<span class="hljs-title function_">failure</span>(<span class="hljs-keyword">let</span> error):
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"å›¾ç‰‡åŠ è½½å¤±è´¥: \(error.localizedDescription)"</span>)
    }
}
</code></pre>
<h3 data-id="heading-5">2.2 ç¼“å­˜æ§åˆ¶</h3>
<pre><code class="hljs language-scss" lang="scss"> <span class="hljs-comment">// æ¸…é™¤å†…å­˜ç¼“å­˜</span>
KingfisherManager<span class="hljs-selector-class">.shared</span><span class="hljs-selector-class">.cache</span><span class="hljs-selector-class">.clearMemoryCache</span>()

<span class="hljs-comment">// æ¸…é™¤ç£ç›˜ç¼“å­˜</span>
KingfisherManager<span class="hljs-selector-class">.shared</span><span class="hljs-selector-class">.cache</span><span class="hljs-selector-class">.clearDiskCache</span>()

<span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰ç¼“å­˜</span>
KingfisherManager<span class="hljs-selector-class">.shared</span><span class="hljs-selector-class">.cache</span><span class="hljs-selector-class">.clearCache</span>()

</code></pre>
<h3 data-id="heading-6">2.3 é¢„åŠ è½½å›¾åƒ</h3>
<p>é¢„åŠ è½½ä¸€ç»„å›¾åƒä»¥æå‡åŠ è½½é€Ÿåº¦ï¼Œé€‚åˆåœ¨åº”ç”¨å¯åŠ¨æ—¶æˆ–é¢„æœŸéœ€è¦æ—¶ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"> let urls = <span class="hljs-selector-attr">[URL(string: <span class="hljs-string">"https://example.com/image1.png"</span>)!, URL(string: <span class="hljs-string">"https://example.com/image2.png"</span>)!]</span>
 <span class="hljs-built_in">ImagePrefetcher</span>(urls: urls)<span class="hljs-selector-class">.start</span>()
</code></pre>
<h3 data-id="heading-7">2.4 æ˜¾ç¤ºWebP</h3>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment"><span class="hljs-doctag">///</span> å…¨å±€é…ç½®</span>
KingfisherManager.shared.defaultOptions += [.processor(WebPProcessor.<span class="hljs-literal">default</span>),.cacheSerializer(WebPSerializer.<span class="hljs-literal">default</span>)]

<span class="hljs-comment">// ä½¿ç”¨ AnimatedImageView å®šä¹‰ImageView</span>

 <span class="hljs-keyword">let</span> animageView = AnimatedImageView()
 animageView.kf.setImage(<span class="hljs-keyword">with</span>: URL(<span class="hljs-built_in">string</span>: <span class="hljs-string">"https://example.com/image.webp"</span>))

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[langchain-å‘é‡æ•°æ®åº“å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7599528186586431498</link>    <guid>https://juejin.cn/post/7599528186586431498</guid>    <pubDate>2026-01-26T10:01:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599528186586431498" data-draft-id="7599528186586415114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="langchain-å‘é‡æ•°æ®åº“å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T10:01:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒåœ¨é£æ‰¬AI"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194366823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            langchain-å‘é‡æ•°æ®åº“å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564194366823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒåœ¨é£æ‰¬AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:01:46.000Z" title="Mon Jan 26 2026 10:01:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘é‡æ•°æ®åº“å­¦ä¹ æ€»ç»“</h2>
<hr/>
<h3 data-id="heading-1">ä¸€ã€FAISS å‘é‡åº“</h3>
<h4 data-id="heading-2">1. FAISS å‘é‡åº“åˆ›å»ºä¸ä¿å­˜</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>FAISSï¼ˆFacebook AI Similarity Searchï¼‰æ˜¯Facebookå¼€æºçš„å‘é‡ç›¸ä¼¼åº¦æœç´¢åº“</li>
<li>ç”¨äºæœ¬åœ°å­˜å‚¨å’Œæ£€ç´¢é«˜ç»´å‘é‡æ•°æ®ï¼Œæ— éœ€å¤–éƒ¨æœåŠ¡ä¾èµ–</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>æœ¬åœ°å¼€å‘ç¯å¢ƒå¿«é€Ÿæ­å»ºå‘é‡æ£€ç´¢èƒ½åŠ›</li>
<li>å°è§„æ¨¡åº”ç”¨ï¼ˆ&lt;10ä¸‡æ¡æ•°æ®ï¼‰çš„æœ€ä½³é€‰æ‹©</li>
<li>RAGç³»ç»Ÿçš„åŸºç¡€ç»„ä»¶ï¼Œä¸ºLLMæä¾›çŸ¥è¯†åº“æ£€ç´¢</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> FAISS
<span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> QianfanEmbeddingsEndpoint
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document

<span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹</span>
embedding = QianfanEmbeddingsEndpoint()

<span class="hljs-comment"># å‡†å¤‡æ–‡æ¡£æ•°æ®</span>
documents = [
    Document(page_content=<span class="hljs-string">"æˆ‘å…»äº†ä¸€åªçŒ«ï¼Œå«ç¬¨ç¬¨"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>}),
    Document(page_content=<span class="hljs-string">"æˆ‘å…»äº†ä¸€åªç‹—ï¼Œå«æ—ºè´¢"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>}),
]

<span class="hljs-comment"># åˆ›å»º FAISS å‘é‡æ•°æ®åº“</span>
db = FAISS.from_documents(documents, embedding)

<span class="hljs-comment"># ä¿å­˜åˆ°æœ¬åœ°</span>
db.save_local(<span class="hljs-string">"./vector-store/"</span>)
</code></pre>
<hr/>
<h4 data-id="heading-3">2.  FAISS å‘é‡åº“åŠ è½½ä¸æ£€ç´¢</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>ä»æœ¬åœ°åŠ è½½å·²ä¿å­˜çš„FAISSç´¢å¼•æ–‡ä»¶</li>
<li>æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢å¹¶è¿”å›åŒ¹é…ç»“æœ</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>æŒä¹…åŒ–å‘é‡æ•°æ®ï¼Œé¿å…æ¯æ¬¡é‡æ–°è®¡ç®—Embedding</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿå¯åŠ¨æ£€ç´¢æœåŠ¡</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> FAISS
<span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> QianfanEmbeddingsEndpoint

embedding = QianfanEmbeddingsEndpoint()

<span class="hljs-comment"># ä»æœ¬åœ°åŠ è½½å‘é‡åº“</span>
db = FAISS.load_local(
    <span class="hljs-string">"./vector-store/"</span>,
    embedding,
    allow_dangerous_deserialization=<span class="hljs-literal">True</span>
)

<span class="hljs-comment"># æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢ï¼ˆè¿”å›è·ç¦»åˆ†æ•°ï¼‰</span>
results = db.similarity_search_with_score(<span class="hljs-string">"æˆ‘å…»äº†ä¸€åªçŒ«ï¼Œå«ç¬¨ç¬¨"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼š[(Document(...), 0.123), (Document(...), 0.456)]</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">äºŒã€è…¾è®¯äº‘ VectorDB</h3>
<h4 data-id="heading-5">3. è…¾è®¯äº‘VectorDBå†…ç½®Embedding</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>è…¾è®¯äº‘æ‰˜ç®¡çš„å‘é‡æ•°æ®åº“æœåŠ¡</li>
<li>ä½¿ç”¨è…¾è®¯äº‘è‡ªå¸¦çš„Embeddingæ¨¡å‹ï¼Œæ— éœ€é¢å¤–é…ç½®</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>å¿«é€Ÿæ¥å…¥äº‘ç«¯å‘é‡æ£€ç´¢èƒ½åŠ›</li>
<li>é¿å…è‡ªè¡Œç»´æŠ¤EmbeddingæœåŠ¡</li>
<li>é€‚åˆç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡åº”ç”¨</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> TencentVectorDB
<span class="hljs-keyword">from</span> langchain_community.vectorstores.tencentvectordb <span class="hljs-keyword">import</span> ConnectionParams

db = TencentVectorDB(
    embedding=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># ä½¿ç”¨å†…ç½®Embedding</span>
    connection_params=ConnectionParams(
        url=os.environ.get(<span class="hljs-string">"TC_VECTOR_DB_URL"</span>),
        username=os.environ.get(<span class="hljs-string">"TC_VECTOR_DB_USERNAME"</span>),
        key=os.environ.get(<span class="hljs-string">"TC_VECTOR_DB_KEY"</span>),
        timeout=<span class="hljs-built_in">int</span>(os.environ.get(<span class="hljs-string">"TC_VECTOR_DB_TIMEOUT"</span>)),
    ),
    database_name=<span class="hljs-string">"llmops-test"</span>,
    collection_name=<span class="hljs-string">"dataset-builtin"</span>,
)

<span class="hljs-comment"># æ·»åŠ æ–‡æœ¬</span>
texts = [<span class="hljs-string">"ç¬¨ç¬¨æ˜¯ä¸€åªå¾ˆå–œæ¬¢ç¡è§‰çš„çŒ«å’ª"</span>, <span class="hljs-string">"æˆ‘å–œæ¬¢åœ¨å¤œæ™šå¬éŸ³ä¹"</span>]
ids = db.add_texts(texts)

<span class="hljs-comment"># ç›¸ä¼¼åº¦æœç´¢ï¼ˆå¸¦ç›¸å…³æ€§åˆ†æ•°ï¼‰</span>
results = db.similarity_search_with_relevance_scores(<span class="hljs-string">"æˆ‘å…»äº†ä¸€åªçŒ«"</span>)
</code></pre>
<hr/>
<h4 data-id="heading-6">4. - è…¾è®¯äº‘VectorDBå¤–éƒ¨Embedding</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹Embeddingæ¨¡å‹ï¼ˆå¦‚OpenAIï¼‰ä¸è…¾è®¯äº‘VectorDBé›†æˆ</li>
<li>çµæ´»é€‰æ‹©æœ€é€‚åˆä¸šåŠ¡çš„EmbeddingæœåŠ¡</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>ä½¿ç”¨é«˜è´¨é‡Embeddingæ¨¡å‹æå‡æ£€ç´¢ç²¾åº¦</li>
<li>ç»Ÿä¸€ç®¡ç†å¤šç§EmbeddingæœåŠ¡</li>
<li>æ”¯æŒè‡ªå®šä¹‰Embeddingæ¨¡å‹</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> OpenAIEmbeddings
<span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> TencentVectorDB

<span class="hljs-comment"># ä½¿ç”¨OpenAI Embedding</span>
embedding = OpenAIEmbeddings(model=<span class="hljs-string">"text-embedding-3-small"</span>)

db = TencentVectorDB(
    embedding=embedding,
    connection_params=ConnectionParams(...),
    database_name=<span class="hljs-string">"llmops-test"</span>,
    collection_name=<span class="hljs-string">"dataset-external"</span>,
)

<span class="hljs-comment"># æ·»åŠ æ–‡æ¡£å¹¶æ£€ç´¢</span>
ids = db.add_texts(texts)
results = db.similarity_search_with_score(<span class="hljs-string">"æˆ‘å…»äº†ä¸€åªçŒ«ï¼Œå«ç¬¨ç¬¨"</span>)
</code></pre>
<hr/>
<h4 data-id="heading-7">5.  - è…¾è®¯äº‘VectorDBå…ƒæ•°æ®è¿‡æ»¤</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>åœ¨å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢åŸºç¡€ä¸Šå¢åŠ ç»“æ„åŒ–è¿‡æ»¤æ¡ä»¶</li>
<li>æ”¯æŒå…ƒæ•°æ®å­—æ®µå®šä¹‰ï¼ˆMetaFieldï¼‰å’Œè¿‡æ»¤è¡¨è¾¾å¼ï¼ˆexprï¼‰</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>å®ç°ç²¾å‡†æ£€ç´¢ï¼šå¦‚åªæœç´¢ç‰¹å®šç”¨æˆ·ã€ç‰¹å®šæ—¶é—´èŒƒå›´çš„æ•°æ®</li>
<li>å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»</li>
<li>ç»“åˆè¯­ä¹‰å’Œç»“æ„åŒ–æ¡ä»¶çš„æ··åˆæ£€ç´¢</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.vectorstores.tencentvectordb <span class="hljs-keyword">import</span> (
    MetaField, META_FIELD_TYPE_UINT64
)

db = TencentVectorDB(
    embedding=<span class="hljs-literal">None</span>,
    connection_params=ConnectionParams(...),
    meta_fields=[
        MetaField(name=<span class="hljs-string">"page"</span>, data_type=META_FIELD_TYPE_UINT64),
    ]
)

<span class="hljs-comment"># æ·»åŠ å¸¦å…ƒæ•°æ®çš„æ–‡æ¡£</span>
texts = [<span class="hljs-string">"ç¬¨ç¬¨æ˜¯çŒ«"</span>, <span class="hljs-string">"æ—ºè´¢æ˜¯ç‹—"</span>, <span class="hljs-string">"å°é£æ˜¯é¸Ÿ"</span>]
metadatas = [{<span class="hljs-string">"page"</span>: <span class="hljs-number">1</span>}, {<span class="hljs-string">"page"</span>: <span class="hljs-number">5</span>}, {<span class="hljs-string">"page"</span>: <span class="hljs-number">10</span>}]
db.add_texts(texts, metadatas)

<span class="hljs-comment"># å¸¦è¿‡æ»¤æ¡ä»¶çš„æœç´¢ï¼šåªæ£€ç´¢ page &gt;= 9 çš„æ–‡æ¡£</span>
results = db.similarity_search_with_score(
    <span class="hljs-string">"å® ç‰©"</span>,
    expr=<span class="hljs-string">"page&gt;=9"</span>  <span class="hljs-comment"># è¿‡æ»¤è¡¨è¾¾å¼</span>
)
</code></pre>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€è‡ªå®šä¹‰å‘é‡å­˜å‚¨</h3>
<h4 data-id="heading-9">6.  è‡ªå®šä¹‰ MemoryVectorStore å®ç°</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>ç»§æ‰¿LangChainçš„VectorStoreåŸºç±»å®ç°è‡ªå®šä¹‰å‘é‡å­˜å‚¨</li>
<li>å®Œæ•´å±•ç¤ºå‘é‡æ•°æ®åº“çš„åº•å±‚å·¥ä½œåŸç†</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>ç†è§£å‘é‡æ•°æ®åº“æ ¸å¿ƒæœºåˆ¶ï¼šEmbeddingè®¡ç®—ã€è·ç¦»åº¦é‡ã€ç›¸ä¼¼åº¦æ’åº</li>
<li>å­¦ä¹ å¦‚ä½•å®ç°ç¬¦åˆLangChainè§„èŒƒçš„å‘é‡å­˜å‚¨</li>
<li>ä¸ºç‰¹æ®Šéœ€æ±‚å®šåˆ¶å‘é‡å­˜å‚¨æ–¹æ¡ˆ</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.vectorstores <span class="hljs-keyword">import</span> VectorStore
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryVectorStore</span>(<span class="hljs-title class_ inherited__">VectorStore</span>):
    store: <span class="hljs-built_in">dict</span> = {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, embedding: Embeddings</span>):
        self._embedding = embedding

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_texts</span>(<span class="hljs-params">self, texts: Iterable[<span class="hljs-built_in">str</span>], metadatas: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>]] = <span class="hljs-literal">None</span></span>):
        <span class="hljs-comment"># 1. å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡</span>
        embeddings = self._embedding.embed_documents(texts)
        ids = [<span class="hljs-built_in">str</span>(uuid.uuid4()) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> texts]

        <span class="hljs-comment"># 2. å­˜å‚¨å‘é‡ä¸å…ƒæ•°æ®</span>
        <span class="hljs-keyword">for</span> idx, text <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(texts):
            self.store[ids[idx]] = {
                <span class="hljs-string">"id"</span>: ids[idx],
                <span class="hljs-string">"text"</span>: text,
                <span class="hljs-string">"embedding"</span>: embeddings[idx],
                <span class="hljs-string">"metadata"</span>: metadatas[idx] <span class="hljs-keyword">if</span> metadatas <span class="hljs-keyword">else</span> {},
            }
        <span class="hljs-keyword">return</span> ids

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">similarity_search</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, k: <span class="hljs-built_in">int</span> = <span class="hljs-number">4</span></span>):
        <span class="hljs-comment"># 1. è®¡ç®—æŸ¥è¯¢å‘é‡</span>
        query_embedding = self._embedding.embed_query(query)

        <span class="hljs-comment"># 2. è®¡ç®—ä¸æ‰€æœ‰å‘é‡çš„æ¬§å‡ é‡Œå¾—è·ç¦»</span>
        result = []
        <span class="hljs-keyword">for</span> key, record <span class="hljs-keyword">in</span> self.store.items():
            distance = self._euclidean_distance(query_embedding, record[<span class="hljs-string">"embedding"</span>])
            result.append({<span class="hljs-string">"distance"</span>: distance, **record})

        <span class="hljs-comment"># 3. æ’åºå¹¶è¿”å›å‰kä¸ªç»“æœ</span>
        result = <span class="hljs-built_in">sorted</span>(result, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">"distance"</span>])[:k]
        <span class="hljs-keyword">return</span> [Document(page_content=item[<span class="hljs-string">"text"</span>], metadata=item[<span class="hljs-string">"metadata"</span>]) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> result]

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_euclidean_distance</span>(<span class="hljs-params">cls, vec1: <span class="hljs-built_in">list</span>, vec2: <span class="hljs-built_in">list</span></span>) -&gt; <span class="hljs-built_in">float</span>:
        <span class="hljs-string">"""è®¡ç®—ä¸¤ä¸ªå‘é‡çš„æ¬§å‡ é‡Œå¾—è·ç¦»"""</span>
        <span class="hljs-keyword">return</span> np.linalg.norm(np.array(vec1) - np.array(vec2))

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
db = MemoryVectorStore(embedding=QianfanEmbeddingsEndpoint())
db.add_texts([<span class="hljs-string">"ç¬¨ç¬¨æ˜¯çŒ«"</span>, <span class="hljs-string">"æ—ºè´¢æ˜¯ç‹—"</span>], metadatas=[{<span class="hljs-string">"page"</span>: <span class="hljs-number">1</span>}, {<span class="hljs-string">"page"</span>: <span class="hljs-number">2</span>}])
results = db.similarity_search(<span class="hljs-string">"å® ç‰©"</span>, k=<span class="hljs-number">2</span>)
</code></pre>
<hr/>
<h3 data-id="heading-10">å››ã€Weaviate å‘é‡æ•°æ®åº“</h3>
<h4 data-id="heading-11">- Weaviate å‘é‡æœç´¢å¼•æ“</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>å¼€æºå‘é‡æœç´¢å¼•æ“ï¼Œæ”¯æŒäº‘æœåŠ¡ï¼ˆWCSï¼‰å’Œæœ¬åœ°éƒ¨ç½²</li>
<li>æä¾›å¼ºå¤§çš„è¿‡æ»¤æŸ¥è¯¢èƒ½åŠ›å’ŒGraphQLæ¥å£</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>æ„å»ºä¼ä¸šçº§å‘é‡æœç´¢å¼•æ“</li>
<li>æ”¯æŒå¤æ‚çš„å¤šæ¡ä»¶è¿‡æ»¤æŸ¥è¯¢</li>
<li>ä¸LangChainæ·±åº¦é›†æˆï¼Œå¿«é€Ÿæ­å»ºRAGç³»ç»Ÿ</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> weaviate
<span class="hljs-keyword">from</span> langchain_weaviate <span class="hljs-keyword">import</span> WeaviateVectorStore
<span class="hljs-keyword">from</span> weaviate.auth <span class="hljs-keyword">import</span> AuthApiKey
<span class="hljs-keyword">from</span> weaviate.classes.query <span class="hljs-keyword">import</span> Filter

<span class="hljs-comment"># åˆ›å»ºè¿æ¥å®¢æˆ·ç«¯ï¼ˆäº‘æœåŠ¡ï¼‰</span>
client = weaviate.connect_to_wcs(
    cluster_url=<span class="hljs-string">"xxx.c0.asia-southeast1.gcp.weaviate.cloud"</span>,
    auth_credentials=AuthApiKey(<span class="hljs-string">"your-api-key"</span>),
)

<span class="hljs-comment"># åˆ›å»ºå‘é‡åº“å®ä¾‹</span>
db = WeaviateVectorStore(
    client=client,
    index_name=<span class="hljs-string">"MyTest"</span>,
    text_key=<span class="hljs-string">"text"</span>,
    embedding=QianfanEmbeddingsEndpoint(model=<span class="hljs-string">"embedding-v1"</span>),
)

<span class="hljs-comment"># æ·»åŠ æ•°æ®</span>
ids = db.add_texts(texts, metadatas)

<span class="hljs-comment"># å¸¦è¿‡æ»¤æ¡ä»¶çš„ç›¸ä¼¼åº¦æœç´¢</span>
filters = Filter.by_property(<span class="hljs-string">"page"</span>).greater_or_equal(<span class="hljs-number">5</span>)
results = db.similarity_search_with_score(<span class="hljs-string">"ç¬¨ç¬¨"</span>, filters=filters)

<span class="hljs-comment"># è½¬æ¢ä¸ºRetrieverï¼ˆç”¨äºRAGï¼‰</span>
retriever = db.as_retriever()
results = retriever.invoke(<span class="hljs-string">"ç¬¨ç¬¨"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-12">äº”ã€Pinecone å‘é‡æ•°æ®åº“</h3>
<h4 data-id="heading-13">8.  Pinecone æ‰˜ç®¡å‘é‡æ•°æ®åº“</h4>
<p><strong>è¿™æ˜¯ä»€ä¹ˆ</strong></p>
<ul>
<li>å®Œå…¨æ‰˜ç®¡çš„å‘é‡æ•°æ®åº“æœåŠ¡ï¼Œæ— éœ€è¿ç»´</li>
<li>æä¾›é«˜æ€§èƒ½çš„å‘é‡æ£€ç´¢APIå’Œè‡ªåŠ¨æ‰©ç¼©å®¹èƒ½åŠ›</li>
</ul>
<p><strong>æœ‰ä»€ä¹ˆç”¨</strong></p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼šé›¶è¿ç»´ã€é«˜å¯ç”¨ã€è‡ªåŠ¨æ‰©å±•</li>
<li>æ”¯æŒNamespaceå®ç°å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»</li>
<li>ä¸°å¯Œçš„è¿‡æ»¤è¯­æ³•å®ç°ç²¾å‡†æ£€ç´¢</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_pinecone <span class="hljs-keyword">import</span> PineconeVectorStore
<span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> HuggingFaceEmbeddings

<span class="hljs-comment"># ä½¿ç”¨HuggingFaceä¸­æ–‡Embeddingæ¨¡å‹</span>
embedding = HuggingFaceEmbeddings(
    model_name=<span class="hljs-string">"BAAI/bge-small-zh-v1.5"</span>
)

<span class="hljs-comment"># åˆ›å»ºå‘é‡åº“å®ä¾‹ï¼ˆæŒ‡å®šnamespaceå®ç°æ•°æ®éš”ç¦»ï¼‰</span>
db = PineconeVectorStore(
    index_name=<span class="hljs-string">"llmops"</span>,
    embedding=embedding,
    namespace=<span class="hljs-string">"dataset"</span>  <span class="hljs-comment"># å‘½åç©ºé—´</span>
)

<span class="hljs-comment"># æ·»åŠ æ–‡æ¡£</span>
db.add_texts(texts, metadatas, namespace=<span class="hljs-string">"dataset"</span>)

<span class="hljs-comment"># å¸¦è¿‡æ»¤æ¡ä»¶çš„æ£€ç´¢</span>
results = db.similarity_search_with_relevance_scores(
    <span class="hljs-string">"æˆ‘å…»äº†ä¸€åªçŒ«"</span>,
    <span class="hljs-built_in">filter</span>={<span class="hljs-string">"$or"</span>: [{<span class="hljs-string">"page"</span>: <span class="hljs-number">5</span>}, {<span class="hljs-string">"account_id"</span>: <span class="hljs-number">1</span>}]}  <span class="hljs-comment"># å¤æ‚è¿‡æ»¤æ¡ä»¶</span>
)

<span class="hljs-comment"># åˆ é™¤æŒ‡å®šæ–‡æ¡£</span>
db.delete([<span class="hljs-string">"document-id"</span>], namespace=<span class="hljs-string">"dataset"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-14">å…­ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-15">1. å‘é‡æ•°æ®åº“é€‰å‹æŒ‡å—</h4>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td><strong>FAISS</strong></td><td>æœ¬åœ°å¼€å‘ã€å°è§„æ¨¡åº”ç”¨</td><td>å…è´¹ã€å¿«é€Ÿã€æ— ä¾èµ–</td><td>å•æœºã€éœ€æ‰‹åŠ¨æŒä¹…åŒ–</td></tr><tr><td><strong>è…¾è®¯äº‘VectorDB</strong></td><td>å›½å†…ç”Ÿäº§ç¯å¢ƒ</td><td>ä½å»¶è¿Ÿã€å†…ç½®Embedding</td><td>ä»…å›½å†…å¯ç”¨</td></tr><tr><td><strong>Pinecone</strong></td><td>å›½é™…ç”Ÿäº§ç¯å¢ƒ</td><td>é›¶è¿ç»´ã€è‡ªåŠ¨æ‰©å±•</td><td>éœ€æµ·å¤–è®¿é—®</td></tr><tr><td><strong>Weaviate</strong></td><td>è‡ªå»ºæœç´¢å¼•æ“</td><td>å¼€æºã€åŠŸèƒ½ä¸°å¯Œ</td><td>éœ€è¿ç»´</td></tr></tbody></table>
<h4 data-id="heading-16">2. Embedding æ¨¡å‹é€‰æ‹©</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åƒå¸†ï¼ˆå›½å†…æ¨èï¼‰</span>
QianfanEmbeddingsEndpoint(model=<span class="hljs-string">"Embedding-V1"</span>)

<span class="hljs-comment"># OpenAIï¼ˆå›½é™…æ¨èï¼‰</span>
OpenAIEmbeddings(model=<span class="hljs-string">"text-embedding-3-small"</span>)

<span class="hljs-comment"># HuggingFaceï¼ˆå…è´¹ç¦»çº¿ï¼‰</span>
HuggingFaceEmbeddings(model_name=<span class="hljs-string">"BAAI/bge-small-zh-v1.5"</span>)  <span class="hljs-comment"># ä¸­æ–‡</span>
HuggingFaceEmbeddings(model_name=<span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)  <span class="hljs-comment"># è‹±æ–‡</span>
</code></pre>
<h4 data-id="heading-17">3. ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•</h4>





































<table><thead><tr><th>æ–¹æ³•</th><th>å…¬å¼</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>æ¬§å‡ é‡Œå¾—è·ç¦»</strong></td><td>`</td><td/><td>v1 - v2</td><td/><td>`</td><td>è·ç¦»è¶Šå°è¶Šç›¸ä¼¼</td></tr><tr><td><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong></td><td>`cos(Î¸) = (v1Â·v2) / (</td><td/><td>v1</td><td/><td>Â·</td><td/><td>v2</td><td/><td>)`</td><td>å€¼è¶Šå¤§è¶Šç›¸ä¼¼</td></tr><tr><td><strong>å†…ç§¯</strong></td><td><code>v1Â·v2</code></td><td>è®¡ç®—æœ€å¿«</td></tr></tbody></table>
<h4 data-id="heading-18">4. å…¸å‹åº”ç”¨æµç¨‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å‡†å¤‡æ•°æ®</span>
documents = [<span class="hljs-string">"æ–‡æœ¬1"</span>, <span class="hljs-string">"æ–‡æœ¬2"</span>, <span class="hljs-string">"æ–‡æœ¬3"</span>]
metadatas = [{<span class="hljs-string">"source"</span>: <span class="hljs-string">"A"</span>}, {<span class="hljs-string">"source"</span>: <span class="hljs-string">"B"</span>}, {<span class="hljs-string">"source"</span>: <span class="hljs-string">"C"</span>}]

<span class="hljs-comment"># 2. åˆ›å»ºå‘é‡åº“</span>
db = VectorStore.from_texts(documents, embedding, metadatas)

<span class="hljs-comment"># 3. ä¿å­˜ï¼ˆå¯é€‰ï¼‰</span>
db.save_local(<span class="hljs-string">"./vector-store/"</span>)

<span class="hljs-comment"># 4. æ£€ç´¢</span>
results = db.similarity_search(<span class="hljs-string">"æŸ¥è¯¢æ–‡æœ¬"</span>, k=<span class="hljs-number">3</span>)  <span class="hljs-comment"># è¿”å›å‰3ä¸ªæœ€ç›¸ä¼¼çš„</span>

<span class="hljs-comment"># 5. å¸¦è¿‡æ»¤æ£€ç´¢</span>
results = db.similarity_search(
    <span class="hljs-string">"æŸ¥è¯¢æ–‡æœ¬"</span>,
    <span class="hljs-built_in">filter</span>={<span class="hljs-string">"source"</span>: <span class="hljs-string">"A"</span>}  <span class="hljs-comment"># åªæ£€ç´¢source=Açš„æ–‡æ¡£</span>
)

<span class="hljs-comment"># 6. è½¬æ¢ä¸ºRetrieverï¼ˆç”¨äºRAGï¼‰</span>
retriever = db.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">2</span>})
results = retriever.invoke(<span class="hljs-string">"æŸ¥è¯¢æ–‡æœ¬"</span>)
</code></pre>
<h4 data-id="heading-19">5. RAGç³»ç»Ÿé›†æˆç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.chains <span class="hljs-keyword">import</span> RetrievalQA
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># åˆ›å»ºå‘é‡åº“çš„Retriever</span>
retriever = db.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">3</span>})

<span class="hljs-comment"># åˆ›å»ºRAGé—®ç­”é“¾</span>
qa_chain = RetrievalQA.from_chain_type(
    llm=ChatOpenAI(model=<span class="hljs-string">"gpt-4"</span>),
    chain_type=<span class="hljs-string">"stuff"</span>,
    retriever=retriever,
    return_source_documents=<span class="hljs-literal">True</span>  <span class="hljs-comment"># è¿”å›å‚è€ƒæ–‡æ¡£</span>
)

<span class="hljs-comment"># æ‰§è¡Œé—®ç­”</span>
answer = qa_chain.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"ç¬¨ç¬¨æ˜¯ä»€ä¹ˆï¼Ÿ"</span>})
<span class="hljs-built_in">print</span>(answer[<span class="hljs-string">"result"</span>])  <span class="hljs-comment"># LLMç”Ÿæˆçš„ç­”æ¡ˆ</span>
<span class="hljs-built_in">print</span>(answer[<span class="hljs-string">"source_documents"</span>])  <span class="hljs-comment"># å‚è€ƒçš„æ–‡æ¡£ç‰‡æ®µ</span>
</code></pre>
<hr/>
<h3 data-id="heading-20">ä¸ƒã€æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä¸­æ–‡åœºæ™¯</strong>ï¼šä¼˜å…ˆé€‰æ‹©åƒå¸†æˆ–<code>bge-small-zh-v1.5</code>æ¨¡å‹</li>
<li><strong>æ•°æ®è§„æ¨¡</strong>ï¼š&lt;10ä¸‡ç”¨FAISSï¼Œ&gt;100ä¸‡ç”¨æ‰˜ç®¡æœåŠ¡</li>
<li><strong>å…ƒæ•°æ®è®¾è®¡</strong>ï¼šæå‰è§„åˆ’è¿‡æ»¤å­—æ®µï¼Œé¿å…é¢‘ç¹é‡å»ºç´¢å¼•</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨æ‰¹é‡æ·»åŠ ï¼ˆ<code>add_texts</code>ï¼‰è€Œéå•æ¡æ’å…¥</li>
<li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šå¼€å‘é˜¶æ®µç”¨FAISSï¼Œç”Ÿäº§ç¯å¢ƒåˆ‡æ¢åˆ°æ‰˜ç®¡æœåŠ¡</li>
<li><strong>å®‰å…¨éš”ç¦»</strong>ï¼šå¤šç§Ÿæˆ·åœºæ™¯ä½¿ç”¨Pineconeçš„Namespaceæˆ–å…ƒæ•°æ®è¿‡æ»¤</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®å·¥ç¨‹æ–°èŒƒå¼ï¼šåŸºäº NoETL è¯­ä¹‰ç¼–ç»‡å®ç°è‡ªåŠ©ä¸‹é’»åˆ†æ]]></title>    <link>https://juejin.cn/post/7599506068046675968</link>    <guid>https://juejin.cn/post/7599506068046675968</guid>    <pubDate>2026-01-26T10:09:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599506068046675968" data-draft-id="7599469598882840591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®å·¥ç¨‹æ–°èŒƒå¼ï¼šåŸºäº NoETL è¯­ä¹‰ç¼–ç»‡å®ç°è‡ªåŠ©ä¸‹é’»åˆ†æ"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2026-01-26T10:09:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aloudataå¤§åº”ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/1579340474099927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®å·¥ç¨‹æ–°èŒƒå¼ï¼šåŸºäº NoETL è¯­ä¹‰ç¼–ç»‡å®ç°è‡ªåŠ©ä¸‹é’»åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1579340474099927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aloudataå¤§åº”ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:09:14.000Z" title="Mon Jan 26 2026 10:09:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡é¦–å‘äº Aloudata å®˜æ–¹æŠ€æœ¯åšå®¢ï¼š<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">ã€Šæ•°æ®åˆ†æå¸ˆå¦‚ä½•èƒ½ä¸ä¾èµ– ITï¼Œè‡ªåŠ©å®Œæˆä»»æ„ç»´åº¦çš„ä¸‹é’»åˆ†æï¼Ÿã€‹</a>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p><strong>æ‘˜è¦</strong>ï¼šæœ¬æ–‡æ¢è®¨äº†æ•°æ®åˆ†æå¸ˆå¦‚ä½•æ‘†è„±å¯¹ IT å’Œç‰©ç†å®½è¡¨çš„ä¾èµ–ï¼Œå®ç°è‡ªåŠ©å¼ä»»æ„ç»´åº¦ä¸‹é’»åˆ†æã€‚é€šè¿‡å¼•å…¥åŸºäº NoETL è¯­ä¹‰ç¼–ç»‡çš„æŒ‡æ ‡å¹³å°ï¼Œå°†ä¸šåŠ¡é€»è¾‘å®šä¹‰ä¸ç‰©ç†å®ç°è§£è€¦ã€‚åˆ†æå¸ˆé€šè¿‡å£°æ˜å¼é…ç½®å®šä¹‰æŒ‡æ ‡ä¸ç»´åº¦ç½‘ç»œï¼Œå¹³å°åˆ©ç”¨æ™ºèƒ½ç‰©åŒ–å¼•æ“ä¿éšœç™¾äº¿çº§æ•°æ®çš„ç§’çº§æŸ¥è¯¢æ€§èƒ½ï¼Œä»è€Œå°†åˆ†æéœ€æ±‚å“åº”æ—¶é—´ä»â€œå‘¨çº§â€ç¼©çŸ­è‡³â€œåˆ†é’Ÿçº§â€ï¼Œå®ç°çœŸæ­£çš„è‡ªåŠ©æ¢ç´¢ä¸å½’å› åˆ†æã€‚</p>
<p>åœ¨æ•°æ®é©±åŠ¨å†³ç­–çš„ä»Šå¤©ï¼Œæ•°æ®åˆ†æå¸ˆå´å¸¸å¸¸é™·å…¥ä¸€ç§å›°å¢ƒï¼šé¢å¯¹â€œä¸ºä»€ä¹ˆé”€å”®é¢çªç„¶ä¸‹é™ï¼Ÿâ€è¿™æ ·çš„ä¸šåŠ¡è¿½é—®ï¼Œåˆ†ææ€è·¯æ€»åœ¨â€œç»´åº¦ä¸è¶³â€æˆ–â€œç­‰å¾…å–æ•°â€æ—¶è¢«è¿«ä¸­æ–­ã€‚æ®ã€Šæ•°å­—åŒ–è½¬å‹å®æˆ˜ã€‹ï¼ˆæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ï¼Œ2023ï¼‰çš„æ•°æ®ï¼Œä¼ä¸šé€šè¿‡è‡ªåŠ©å¼æŠ¥è¡¨å·¥å…·ï¼Œæ•°æ®åˆ†ææ•ˆç‡å¹³å‡æå‡äº† 57%ï¼Œä½†è¿™ä»æœªèƒ½è§£å†³æ ¹æœ¬æ€§çš„æ•°æ®ä¾›ç»™ç“¶é¢ˆã€‚é—®é¢˜çš„æ ¹æºï¼Œåœ¨äºä¼ ç»Ÿçš„â€œç‰©ç†å®½è¡¨â€æ•°æ®ä¾›ç»™æ¨¡å¼ï¼Œå®ƒå°†åˆ†æå¸ˆçš„æ¢ç´¢èƒ½åŠ›é™åˆ¶åœ¨ITé¢„å…ˆé“ºè®¾å¥½çš„æœ‰é™è½¨é“ä¸Šã€‚</p>
<h2 data-id="heading-0">ä¼ ç»Ÿåˆ†æèŒƒå¼çš„ä¸‰å¤§å¡ç‚¹ï¼šä¸ºä½•ä½ æ€»è¢«â€œç»´åº¦â€å¡ä½ï¼Ÿ</h2>
<p>ä¼ ç»ŸåŸºäºç‰©ç†å®½è¡¨å’Œå›ºå®š ETL çš„æ•°æ®ä¾›ç»™æ¨¡å¼ï¼Œä»æ ¹æœ¬ä¸Šé™åˆ¶äº†æ•°æ®åˆ†æçš„çµæ´»æ€§ä¸å“åº”é€Ÿåº¦ï¼Œå¯¼è‡´åˆ†æå¸ˆé™·å…¥â€œæéœ€æ±‚-ç­‰æ’æœŸ-åˆ†æä¸­æ–­â€çš„æ¶æ€§å¾ªç¯ã€‚è¿™å…·ä½“ä½“ç°åœ¨ä¸‰ä¸ªæ ¸å¿ƒå¡ç‚¹ä¸Šï¼š</p>
<p><strong>1.  å¡ç‚¹ä¸€ï¼šç»´åº¦å›ºåŒ–ï¼Œæ¢ç´¢å—é™</strong>Â ä¸šåŠ¡éœ€æ±‚æ˜¯å‘æ•£çš„ï¼Œä½†ç‰©ç†å®½è¡¨æ˜¯æ”¶æ•›çš„ã€‚å½“ä½ ä»â€œåœ°åŒºâ€ä¸‹é’»åˆ°â€œé—¨åº—â€ï¼Œå†æƒ³ä¸‹é’»åˆ°â€œåº—å‘˜â€æˆ–â€œå…·ä½“è®¢å•â€æ—¶ï¼Œå¦‚æœå®½è¡¨æœªé¢„å…ˆèšåˆè¿™äº›ç»´åº¦ï¼Œåˆ†æä¾¿æˆ›ç„¶è€Œæ­¢ã€‚åˆ†æå¸ˆåªèƒ½å›å¤´å‘ IT ææ–°éœ€æ±‚ï¼Œç­‰å¾…æ–°çš„å®½è¡¨å¼€å‘ã€‚</p>
<p><strong>2.  å¡ç‚¹äºŒï¼šå“åº”è¿Ÿç¼“ï¼Œæ€è·¯æ–­å±‚</strong>Â ä»æå‡ºæ–°ç»´åº¦åˆ†æéœ€æ±‚ï¼Œåˆ° IT æ²Ÿé€šã€æ’æœŸã€å¼€å‘ã€æµ‹è¯•ã€ä¸Šçº¿ï¼Œå‘¨æœŸå¸¸ä»¥â€œå‘¨â€è®¡ã€‚ç­‰æ•°æ®åˆ°ä½ï¼Œä¸šåŠ¡æ—¶æœºå·²è¿‡ï¼Œåˆ†ææ€è·¯æ—©å·²æ–­å±‚ã€‚è¿™ç§å»¶è¿Ÿè®©æ•°æ®åˆ†æä»â€œä¸»åŠ¨æ´å¯Ÿâ€é™çº§ä¸ºâ€œäº‹åè§£é‡Šâ€ã€‚</p>
<p><strong>3.  å¡ç‚¹ä¸‰ï¼šå£å¾„æ··ä¹±ï¼Œå½’å› æ— åŠ›</strong>Â æŒ‡æ ‡åˆ†æ•£åœ¨ä¸åŒæŠ¥è¡¨å’Œ BI å·¥å…·çš„æ•°æ®é›†é‡Œï¼Œå£å¾„ä¸ä¸€ã€‚å½“é—®â€œä¸ºä»€ä¹ˆé”€å”®é¢æ¶¨äº†ï¼Ÿâ€æ—¶ï¼ŒåŸºäºèšåˆç»“æœçš„æµ…å±‚å›ç­”ï¼ˆå¦‚â€œå› ä¸ºAåœ°åŒºå–å¾—å¥½â€ï¼‰æ— æ³•ç©¿é€åˆ°å…·ä½“çš„é—¨åº—ã€å•†å“æˆ–ç”¨æˆ·è¡Œä¸ºï¼Œå®ç°çœŸæ­£çš„æ˜ç»†çº§å½’å› ã€‚</p>
<h2 data-id="heading-1">èŒƒå¼è·ƒè¿ï¼šä»â€œç‰©ç†å®½è¡¨â€åˆ°â€œè¯­ä¹‰ç¼–ç»‡â€çš„ NoETL æ–°æ¶æ„</h2>
<p>è¦æ‰“ç ´ä¸Šè¿°åƒµå±€ï¼Œå¿…é¡»è¿›è¡Œæ¶æ„å±‚é¢çš„èŒƒå¼é‡æ„ã€‚NoETL è¯­ä¹‰ç¼–ç»‡é€šè¿‡æ„å»ºç»Ÿä¸€ã€è™šæ‹Ÿçš„è¯­ä¹‰å±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å®šä¹‰ä¸ç‰©ç†æ•°æ®å®ç°å½»åº•è§£è€¦ï¼Œä¸ºä»»æ„ç»´åº¦çš„çµæ´»ä¸‹é’»æä¾›äº†å…¨æ–°çš„æ¶æ„åŸºç¡€ã€‚</p>
<ul>
<li>æ ¸å¿ƒç†å¿µè§£è€¦ï¼šä¸å†ä¸ºæ¯ä¸ªåˆ†æåœºæ™¯åˆ›å»ºç‰©ç†å®½è¡¨ï¼ˆDWS/ADSï¼‰ï¼Œè€Œæ˜¯åœ¨å…¬å…±æ˜ç»†æ•°æ®å±‚ï¼ˆDWDï¼‰ä¹‹ä¸Šï¼Œé€šè¿‡å£°æ˜å¼é…ç½®å»ºç«‹é€»è¾‘å…³è”ï¼Œå½¢æˆä¸€å¼ è¦†ç›–å…¨åŸŸçš„â€œè™šæ‹Ÿä¸šåŠ¡äº‹å®ç½‘ç»œâ€ã€‚</li>
<li>ç»Ÿä¸€è¯­ä¹‰å±‚ï¼šæŒ‡æ ‡æˆä¸ºç‹¬ç«‹ã€å¯å¤ç”¨çš„ä¸šåŠ¡å¯¹è±¡ï¼Œæ‹¥æœ‰æ˜ç¡®çš„å®šä¹‰ã€è¡€ç¼˜å’Œç‰ˆæœ¬ã€‚æ— è®ºä¸‹æ¸¸æ˜¯ BIã€æŠ¥è¡¨è¿˜æ˜¯ AI Agentï¼Œéƒ½æ¶ˆè´¹åŒä¸€ä»½æƒå¨è¯­ä¹‰ï¼Œç¡®ä¿å£å¾„ 100% ä¸€è‡´ã€‚</li>
<li>è‡ªåŠ¨åŒ–æŸ¥è¯¢ä¸åŠ é€Ÿï¼šç”¨æˆ·æ‹–æ‹½åˆ†ææ„å›¾ï¼Œè¯­ä¹‰å¼•æ“è‡ªåŠ¨ç”Ÿæˆä¼˜åŒ– SQLï¼›æ™ºèƒ½ç‰©åŒ–å¼•æ“æ ¹æ®ç®¡ç†å‘˜å£°æ˜çš„åŠ é€Ÿç­–ç•¥ï¼ŒæŒ‰éœ€åˆ›å»ºå¹¶é€æ˜è·¯ç”±è‡³åŠ é€Ÿè¡¨ï¼Œä¿éšœç™¾äº¿çº§æ˜ç»†æ•°æ®çš„ç§’çº§å“åº”ï¼Œæ— éœ€äººå·¥å¹²é¢„ ETLã€‚</li>
</ul>
<p>è¿™ç§â€œé€»è¾‘å®šä¹‰â€ä¸â€œç‰©ç†æ‰§è¡Œâ€çš„åˆ†ç¦»ï¼Œæ ‡å¿—ç€ä»â€œä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒâ€å‘â€œä»¥è¯­ä¹‰ä¸ºä¸­å¿ƒâ€çš„èŒƒå¼é©å‘½ã€‚</p>
<h2 data-id="heading-2">ä¸‰æ­¥å®è·µæ³•ï¼šæ•°æ®åˆ†æå¸ˆçš„è‡ªåŠ©ä¸‹é’»åˆ†æè·¯å¾„</h2>
<p>åŸºäº NoETL è¯­ä¹‰ç¼–ç»‡å¹³å°ï¼Œæ•°æ®åˆ†æå¸ˆå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªæ ‡å‡†åŒ–æ­¥éª¤ï¼Œå®ç°é«˜æ•ˆã€çµæ´»çš„è‡ªåŠ©åˆ†æï¼Œå½»åº•æ‘†è„±å¯¹ IT çš„ä¾èµ–ã€‚</p>
<h3 data-id="heading-3">æ­¥éª¤ä¸€ï¼šå£°æ˜å¼å®šä¹‰åŸå­æŒ‡æ ‡ä¸ç»´åº¦ç½‘ç»œ</h3>
<ul>
<li>æ ¸å¿ƒæ“ä½œï¼šåœ¨å¹³å°ä¸­ï¼ŒåŸºäº DWD æ˜ç»†è¡¨ï¼Œé€šè¿‡ç•Œé¢åŒ–é…ç½®ï¼ˆè€Œéå†™ SQLï¼‰å®šä¹‰æ ¸å¿ƒåŸå­æŒ‡æ ‡ï¼ˆå¦‚â€œäº¤æ˜“é‡‘é¢â€ï¼‰å’Œä¸šåŠ¡ç»´åº¦ï¼ˆå¦‚â€œå®¢æˆ·ç­‰çº§â€ã€â€œå•†å“å“ç±»â€ï¼‰ï¼Œå¹¶å£°æ˜è¡¨é—´é€»è¾‘å…³è”å…³ç³»ã€‚</li>
<li>å…³é”®ä»·å€¼ï¼šä¸€æ¬¡å®šä¹‰ï¼Œå¤„å¤„å¯ç”¨ã€‚ç¡®ä¿äº†å…¨å…¬å¸åˆ†æå£å¾„çš„ 100% ä¸€è‡´ï¼Œä¸ºåç»­ä»»æ„ç»„åˆåˆ†ææ‰“ä¸‹åŸºç¡€ã€‚å¹³å°æ”¯æŒå®šä¹‰â€œè¿‘30å¤©æ¶ˆè´¹é‡‘é¢&gt;5,000å…ƒçš„å®¢æˆ·äººæ•°â€ç­‰è·¨è¡¨é™å®šã€æŒ‡æ ‡ç»´åº¦åŒ–çš„å¤æ‚æŒ‡æ ‡ã€‚</li>
</ul>
<h3 data-id="heading-4">æ­¥éª¤äºŒï¼šæŒ‰éœ€é…ç½®æ™ºèƒ½ç‰©åŒ–åŠ é€Ÿç­–ç•¥</h3>
<ul>
<li>æ ¸å¿ƒæ“ä½œï¼šé’ˆå¯¹é«˜ç®¡é©¾é©¶èˆ±ã€æ ¸å¿ƒæ—¥æŠ¥ç­‰é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåœºæ™¯ï¼Œç®¡ç†å‘˜å¯å£°æ˜å¼é…ç½®éœ€è¦åŠ é€Ÿçš„æŒ‡æ ‡å’Œç»´åº¦ç»„åˆï¼ˆå¦‚â€œæŒ‰æ—¥ã€åœ°åŒºã€äº§å“çº¿èšåˆçš„äº¤æ˜“é¢â€ï¼‰ï¼Œå¹³å°è‡ªåŠ¨ç”Ÿæˆå¹¶è¿ç»´ç‰©åŒ–ä»»åŠ¡ã€‚</li>
<li>å…³é”®ä»·å€¼ï¼šå°†â€œç©ºé—´æ¢æ—¶é—´â€ç­–ç•¥ä»é«˜æŠ•å…¥çš„çŒœæµ‹å˜ä¸ºç²¾å‡†çš„è‡ªåŠ¨åŒ–æœåŠ¡ã€‚æŸ¥è¯¢æ—¶ï¼Œå¼•æ“é€æ˜åœ°è¿›è¡Œ SQL æ”¹å†™å’Œæ™ºèƒ½è·¯ç”±ï¼Œå‘½ä¸­åŠ é€Ÿç»“æœï¼Œåœ¨ä¿éšœæŸ¥è¯¢æ€§èƒ½çš„åŒæ—¶ï¼Œæå¤§é™ä½å­˜å‚¨ä¸è®¡ç®—æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-5">æ­¥éª¤ä¸‰ï¼šä»»æ„ç»´åº¦æ‹–æ‹½ä¸æ˜ç»†çº§å½’å› æ¢ç´¢</h3>
<ul>
<li>æ ¸å¿ƒæ“ä½œï¼šåœ¨ BI å·¥å…·æˆ–å¹³å°åˆ†æç•Œé¢ä¸­ï¼Œç›´æ¥ä»æŒ‡æ ‡ç›®å½•æ‹–æ‹½å·²å®šä¹‰çš„æŒ‡æ ‡ï¼ˆå¦‚â€œäº¤æ˜“é¢â€ï¼‰ï¼Œå¹¶è‡ªç”±ç»„åˆã€æ·»åŠ æˆ–åˆ‡æ¢ä»»æ„ç»´åº¦ï¼ˆä»æ—¶é—´ã€åœ°åŒºä¸‹é’»è‡³ç”¨æˆ· IDã€è®¢å• IDï¼‰è¿›è¡Œåˆ†æã€‚</li>
<li>å…³é”®ä»·å€¼ï¼šåˆ†ææ€è·¯ä¸å†è¢«æ‰“æ–­ã€‚åˆ©ç”¨å¹³å°å†…ç½®çš„æ˜ç»†çº§å¤šç»´åº¦å½’å› åŠŸèƒ½ï¼Œå¯å¿«é€Ÿå®šä½æŒ‡æ ‡æ³¢åŠ¨çš„å…³é”®è´¡çŒ®å› å­ï¼ˆå¦‚â€œåä¸œåœ°åŒºæŸé—¨åº—çš„ A å•†å“è´¡çŒ®äº† 80% çš„å¢é•¿â€ï¼‰ï¼Œä»â€œæè¿°ç°è±¡â€å‡çº§åˆ°â€œè§£é‡Šå½’å› â€ã€‚</li>
</ul>
<h2 data-id="heading-6">ä»·å€¼éªŒè¯ï¼šä»â€œå‘¨çº§ç­‰å¾…â€åˆ°â€œåˆ†é’Ÿçº§æ´å¯Ÿâ€çš„æ•ˆèƒ½é©å‘½</h2>
<p>é‡‡ç”¨ NoETL è¯­ä¹‰ç¼–ç»‡æ–°èŒƒå¼åï¼Œæ•°æ®åˆ†æå¸ˆçš„å·¥ä½œæ•ˆèƒ½ã€åˆ†ææ·±åº¦åŠä¸ä¸šåŠ¡çš„åä½œæ¨¡å¼å°†å‘ç”Ÿæ ¹æœ¬æ€§æ”¹å˜ã€‚</p>
<ol>
<li>æ•ˆç‡è´¨å˜ï¼šæŒ‡æ ‡äº¤ä»˜ä»å¹³å‡ä¸¤å‘¨ç¼©çŸ­è‡³åˆ†é’Ÿçº§ã€‚æŸå¤´éƒ¨åˆ¸å•†æ¡ˆä¾‹æ˜¾ç¤ºï¼ŒåŸºäº Aloudata CAN å¹³å°ï¼Œä¸šåŠ¡åˆ†æå¸ˆå¯è‡ªåŠ©å®Œæˆé€¾ 300 ä¸ªç»´åº¦ä¸æŒ‡æ ‡ç»„åˆçš„çµæ´»åˆ†æï¼Œå“åº”ä¸´æ—¶éœ€æ±‚çš„èƒ½åŠ›å‘ç”Ÿè´¨å˜ã€‚</li>
<li>æˆæœ¬ä¼˜åŒ–ï¼šæ¶ˆé™¤å†—ä½™å®½è¡¨å¼€å‘ï¼Œç›´æ¥ä»æºå¤´å‡å°‘ ETL å·¥ä½œé‡ã€‚åŒä¸€æ¡ˆä¾‹ä¸­ï¼Œå¹³å°å¸®åŠ©å®¢æˆ·èŠ‚çœäº†è¶…è¿‡ 70% çš„ ETL å¼€å‘å·¥ä½œé‡ï¼Œè®¡ç®—ä¸å­˜å‚¨èµ„æºå¾—åˆ°ç²¾å‡†æ§åˆ¶ã€‚</li>
<li>åˆ†ææ·±åŒ–ï¼šåŸºäºæ˜ç»†æ•°æ®çš„å½’å› æˆä¸ºå¯èƒ½ï¼Œèƒ½å›ç­”â€œä¸ºä»€ä¹ˆâ€è€Œä¸ä»…ä»…æ˜¯â€œæ˜¯ä»€ä¹ˆâ€ã€‚ä¾‹å¦‚ï¼Œå¯å¿«é€Ÿå®šä½é”€å”®é¢æ³¢åŠ¨çš„å…·ä½“è´¡çŒ®é—¨åº—æˆ–å•†å“ï¼Œæ”¯æ’‘ç²¾å‡†çš„è¿è¥å†³ç­–ã€‚</li>
<li>è§’è‰²è¿›åŒ–ï¼šæ•°æ®åˆ†æå¸ˆå¾—ä»¥ä»ç¹é‡çš„â€œå–æ•°å·¥äººâ€è§’è‰²ä¸­è§£æ”¾ï¼Œè½¬å‘â€œä¸šåŠ¡èµ‹èƒ½è€…â€å’Œâ€œè¯­ä¹‰æ¨¡å‹è®¾è®¡å¸ˆâ€ï¼Œä¸“æ³¨äºæ›´å…·æˆ˜ç•¥ä»·å€¼çš„æ·±åº¦æ´å¯Ÿä¸æ•°æ®èƒ½åŠ›å»ºè®¾ã€‚</li>
</ol>
<h2 data-id="heading-7">è¡ŒåŠ¨æŒ‡å—ï¼šå¦‚ä½•åœ¨ä½ æ‰€åœ¨çš„ä¼ä¸šå¯åŠ¨å˜é©ï¼Ÿ</h2>
<p>å˜é©æ— éœ€æ¨å€’é‡æ¥ï¼Œå¯ä»¥ä»é€‰æ‹©ä¸€ä¸ªæœ‰æ˜ç¡®ç—›ç‚¹çš„â€œç¯å¡”â€ä¸šåŠ¡åœºæ™¯å¼€å§‹ï¼Œé‡‡ç”¨å¹³æ»‘æ¼”è¿›ç­–ç•¥ã€‚</p>
<ol>
<li>
<p>é€‰æ‹©è¯•ç‚¹åœºæ™¯ï¼šå¦‚â€œçº¿ä¸Šè¥é”€æ•ˆæœåˆ†æâ€æˆ–â€œé—¨åº—æ—¥é”€å”®è¿½è¸ªâ€ï¼Œç»„å»ºåŒ…å«æ•°æ®æ¶æ„å¸ˆã€åˆ†æå¸ˆå’Œä¸šåŠ¡ä¸“å®¶çš„å°ç»„ã€‚</p>
</li>
<li>
<p>æŠ€æœ¯ç­–ç•¥ä¸‰æ­¥èµ°ï¼š</p>
<ul>
<li>å­˜é‡æŒ‚è½½ï¼šå¿«é€Ÿæ¥å…¥ç°æœ‰ç¨³å®šå®½è¡¨ï¼Œæä¾›ç»Ÿä¸€å‡ºå£ï¼Œä¿æŠ¤æ—¢æœ‰æŠ•èµ„ã€‚</li>
<li>å¢é‡åŸç”Ÿï¼šæ‰€æœ‰æ–°åˆ†æéœ€æ±‚ï¼Œç›´æ¥åŸºäº DWD åœ¨è¯­ä¹‰å±‚å®šä¹‰ï¼Œç¦æ­¢æ–°å»ºç‰©ç†å®½è¡¨ã€‚</li>
<li>å­˜é‡æ›¿æ—§ï¼šé€æ­¥è¯†åˆ«å¹¶ä¸‹çº¿é«˜æˆæœ¬ã€é«˜ç»´æŠ¤çš„æ—§å®½è¡¨ï¼Œç”¨è¯­ä¹‰å±‚é€»è¾‘æ›¿ä»£ã€‚</li>
</ul>
</li>
<li>
<p>è¡¡é‡ä¸æ¨å¹¿ï¼šåœ¨è¯•ç‚¹åœºæ™¯éªŒè¯ä»·å€¼ï¼ˆå¦‚åˆ†ææ•ˆç‡æå‡ 10 å€ï¼‰ï¼Œå¬å¼€ç”±ä¸šåŠ¡è´Ÿè´£äººâ€œç°èº«è¯´æ³•â€çš„å†…éƒ¨åˆ†äº«ä¼šï¼Œé€æ­¥æŒ‰ä¸šåŠ¡ä¼˜å…ˆçº§æ¨å¹¿è‡³å…¶ä»–é¢†åŸŸã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">å¸¸è§é—®é¢˜ (FAQ)</h2>
<p><strong>Q1: ä¸ä¾èµ– IT åšè‡ªåŠ©ä¸‹é’»ï¼Œæ•°æ®å£å¾„å¦‚ä½•ä¿è¯ä¸€è‡´ï¼Ÿ</strong></p>
<p>é€šè¿‡ NoETL è¯­ä¹‰ç¼–ç»‡ï¼Œæ‰€æœ‰æŒ‡æ ‡åœ¨ç»Ÿä¸€çš„è¯­ä¹‰å±‚ä¸­è¿›è¡Œå£°æ˜å¼å®šä¹‰å’Œå¼ºæ ¡éªŒã€‚å¹³å°è‡ªåŠ¨è¿›è¡ŒåŒåæ ¡éªŒå’Œé€»è¾‘åˆ¤é‡ï¼Œä»æŠ€æœ¯ä¸Šæœç»â€œåŒåä¸åŒä¹‰â€ã€‚ä¸€æ—¦å®šä¹‰å‘å¸ƒï¼Œæ‰€æœ‰ä¸‹æ¸¸æ¶ˆè´¹ï¼ˆBIã€AIã€æŠ¥è¡¨ï¼‰éƒ½è°ƒç”¨åŒä¸€ä¸ªè¯­ä¹‰å¯¹è±¡ï¼Œç¡®ä¿å…¨ä¼ä¸šåˆ†æå£å¾„ 100% ä¸€è‡´ã€‚</p>
<p><strong>Q2: ç›´æ¥æŸ¥è¯¢æ˜ç»†æ•°æ®ï¼ŒæŸ¥è¯¢æ€§èƒ½æ…¢æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>å¹³å°å†…ç½®æ™ºèƒ½ç‰©åŒ–åŠ é€Ÿå¼•æ“ã€‚ç®¡ç†å‘˜å¯ä»¥å£°æ˜éœ€è¦åŠ é€Ÿçš„æŒ‡æ ‡å’Œç»´åº¦ç»„åˆï¼Œå¼•æ“ä¼šè‡ªåŠ¨åˆ›å»ºã€è¿ç»´æœ€ä¼˜çš„ç‰©åŒ–è§†å›¾ï¼ˆåŠ é€Ÿè¡¨ï¼‰ã€‚æŸ¥è¯¢æ—¶ï¼Œå¼•æ“é€æ˜åœ°è¿›è¡Œ SQL æ”¹å†™å’Œæ™ºèƒ½è·¯ç”±ï¼Œè®©æŸ¥è¯¢å‘½ä¸­åŠ é€Ÿç»“æœï¼Œä»è€Œåœ¨ç™¾äº¿çº§æ˜ç»†æ•°æ®ä¸Šå®ç°ç§’çº§å“åº”ï¼Œå¯¹ä¸šåŠ¡ç”¨æˆ·å®Œå…¨æ— æ„Ÿã€‚</p>
<p><strong>Q3: è¿™ç§æ¨¡å¼å¯¹ç°æœ‰æ•°æ®ä»“åº“æ¶æ„å†²å‡»å¤§å—ï¼Ÿéœ€è¦æ¨å€’é‡æ¥å—ï¼Ÿ</strong></p>
<p>å®Œå…¨ä¸éœ€è¦æ¨å€’é‡æ¥ã€‚æ–°èŒƒå¼å€¡å¯¼â€œå¹³æ»‘æ¼”è¿›â€ã€‚é€šè¿‡â€œå­˜é‡æŒ‚è½½â€åˆ©ç”¨ç°æœ‰å®½è¡¨ï¼Œâ€œå¢é‡åŸç”Ÿâ€å¤„ç†æ–°éœ€æ±‚ï¼Œé€æ­¥â€œå­˜é‡æ›¿æ—§â€ã€‚æ ¸å¿ƒæ˜¯æ„å»ºä¸€ä¸ªç‹¬ç«‹çš„è¯­ä¹‰å±‚ï¼Œå¯¹æ¥ç°æœ‰æ•°æ®æ¹–ä»“çš„å…¬å…±æ˜ç»†å±‚ï¼ˆDWDï¼‰ï¼Œåšè½»ç”šè‡³æ›¿ä»£æ•°ä»“çš„æ±‡æ€»å±‚ï¼ˆADSï¼‰ï¼Œä¿æŠ¤æ—¢æœ‰æŠ•èµ„ã€‚</p>
<p><strong>Q4: é™¤äº†æ‹–æ‹½åˆ†æï¼Œèƒ½ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æé—®å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ã€‚åŸºäºåšå®çš„è¯­ä¹‰å±‚ï¼Œå¯ä»¥æ„å»ºå¦‚ Aloudata Agent è¿™æ ·çš„æ•°æ®åˆ†ææ™ºèƒ½ä½“ã€‚å®ƒé‡‡ç”¨ NL2MQL2SQL æ¶æ„ï¼šå¤§æ¨¡å‹å°†ä½ çš„è‡ªç„¶è¯­è¨€é—®é¢˜è½¬åŒ–ä¸ºæ ‡å‡†çš„æŒ‡æ ‡æŸ¥è¯¢è¯·æ±‚ï¼ˆMQLï¼‰ï¼Œå†ç”±é«˜ç¡®å®šæ€§çš„è¯­ä¹‰å¼•æ“ç¿»è¯‘æˆå‡†ç¡® SQL æ‰§è¡Œï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å¤§æ¨¡å‹çš„â€œæ•°æ®å¹»è§‰â€ï¼Œå®ç°å¯ä¿¡çš„å¯¹è¯å¼åˆ†æã€‚</p>
<h2 data-id="heading-9">æ ¸å¿ƒè¦ç‚¹</h2>
<ol>
<li>æ¶æ„è§£è€¦æ˜¯å‰æï¼šå®ç°è‡ªåŠ©ä¸‹é’»åˆ†æçš„å…³é”®ï¼Œæ˜¯å°†ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼ˆè¯­ä¹‰å±‚ï¼‰ä»ç‰©ç†æ•°æ®å®ç°ï¼ˆå®½è¡¨ ETLï¼‰ä¸­å½»åº•è§£è€¦ï¼Œæ„å»ºç»Ÿä¸€çš„â€œè™šæ‹Ÿä¸šåŠ¡äº‹å®ç½‘ç»œâ€ã€‚</li>
<li>å£°æ˜å¼é…ç½®æ˜¯æ ¸å¿ƒï¼šé€šè¿‡ç•Œé¢åŒ–é…ç½®å®šä¹‰æŒ‡æ ‡ã€ç»´åº¦å’Œå…³è”å…³ç³»ï¼Œå–ä»£æ‰‹å†™ SQL å’Œç‰©ç†å»ºæ¨¡ï¼Œæ˜¯å®ç°å£å¾„ä¸€è‡´ä¸çµæ´»åˆ†æçš„å·¥ç¨‹åŸºç¡€ã€‚</li>
<li>æ™ºèƒ½åŠ é€Ÿæ˜¯ä¿éšœï¼šåŸºäºå£°æ˜å¼ç­–ç•¥çš„æ™ºèƒ½ç‰©åŒ–å¼•æ“ï¼Œåœ¨æä¾›æè‡´åˆ†æçµæ´»æ€§çš„åŒæ—¶ï¼Œé€æ˜ä¿éšœç™¾äº¿çº§æ•°æ®çš„ç§’çº§æŸ¥è¯¢æ€§èƒ½ï¼Œæ§åˆ¶æ€»ä½“æˆæœ¬ã€‚</li>
<li>å¹³æ»‘æ¼”è¿›æ˜¯è·¯å¾„ï¼šé‡‡ç”¨â€œå­˜é‡æŒ‚è½½ã€å¢é‡åŸç”Ÿã€é€æ­¥æ›¿æ—§â€çš„ç­–ç•¥ï¼Œå¯ä»¥åœ¨ä¿æŠ¤ç°æœ‰æŠ•èµ„çš„åŒæ—¶ï¼Œç¨³æ­¥å‘ç°ä»£åŒ–æ•°æ®æ¶æ„è½¬å‹ï¼Œé‡Šæ”¾æ•°æ®å›¢é˜Ÿçš„æ›´é«˜ä»·å€¼ã€‚</li>
</ol>
<hr/>
<p>æœ¬æ–‡é¦–å‘äº Aloudata å®˜æ–¹æŠ€æœ¯åšå®¢ï¼ŒæŸ¥çœ‹æ›´å¤šæŠ€æœ¯ç»†èŠ‚ä¸æ¡ˆä¾‹ï¼Œè¯·è®¿é—®åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faloudata.com%2Fknowledge_base%2Fdata-analysts-self-drill-down-analysis" target="_blank" title="https://aloudata.com/knowledge_base/data-analysts-self-drill-down-analysis" ref="nofollow noopener noreferrer">aloudata.com/knowledge_bâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€JS ä¸ºä»€ä¹ˆèƒ½è·‘è¿™ä¹ˆå¿«ï¼Ÿä¸€æ–‡æŠŠ V8 â€œç¿»è¯‘å®˜ + åŠ é€Ÿå™¨â€ æœºåˆ¶è®²é€ï¼ˆAST / å­—èŠ‚ç  / JIT / å»ä¼˜åŒ–ï¼‰]]></title>    <link>https://juejin.cn/post/7598574507347165219</link>    <guid>https://juejin.cn/post/7598574507347165219</guid>    <pubDate>2026-01-25T04:05:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507347165219" data-draft-id="7598588085596815400" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€JS ä¸ºä»€ä¹ˆèƒ½è·‘è¿™ä¹ˆå¿«ï¼Ÿä¸€æ–‡æŠŠ V8 â€œç¿»è¯‘å®˜ + åŠ é€Ÿå™¨â€ æœºåˆ¶è®²é€ï¼ˆAST / å­—èŠ‚ç  / JIT / å»ä¼˜åŒ–ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-25T04:05:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="swipe"/> <meta itemprop="url" content="https://juejin.cn/user/858052674727959"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€JS ä¸ºä»€ä¹ˆèƒ½è·‘è¿™ä¹ˆå¿«ï¼Ÿä¸€æ–‡æŠŠ V8 â€œç¿»è¯‘å®˜ + åŠ é€Ÿå™¨â€ æœºåˆ¶è®²é€ï¼ˆAST / å­—èŠ‚ç  / JIT / å»ä¼˜åŒ–ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/858052674727959/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    swipe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T04:05:15.000Z" title="Sun Jan 25 2026 04:05:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½ çš„ JS åˆ°åº•æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Ÿä¸€æ–‡çœ‹æ‡‚ V8ï¼šä»æºç åˆ°æœºå™¨ç çš„â€œæµæ°´çº¿â€ï¼ˆå«å›¾è§£ï¼‰</h2>
<blockquote>
<p>å†™ä¸‹ <code>console.log('hi')</code> çš„é‚£ä¸€åˆ»ï¼ŒCPU å…¶å®å®Œå…¨çœ‹ä¸æ‡‚ã€‚<br/>
çœŸæ­£è®© JS â€œè·‘èµ·æ¥â€çš„ï¼Œæ˜¯ <strong>JavaScript å¼•æ“</strong>â€”â€”å°¤å…¶æ˜¯ Chrome/Node.js èƒŒåçš„ <strong>V8</strong>ã€‚<br/>
è¿™ç¯‡æ–‡ç« ç”¨ä¸€æ¡æ¸…æ™°çš„æµæ°´çº¿ï¼ŒæŠŠ V8 çš„æ ¸å¿ƒæœºåˆ¶è®²é€ï¼š<strong>Parse â†’ AST â†’ Ignition(å­—èŠ‚ç ) â†’ TurboFan(æœºå™¨ç ) â†’ Deopt(å»ä¼˜åŒ–å›é€€)</strong> ã€‚</p>
</blockquote>
<hr/>
<p>æ–‡ç« æ¨èï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com.cn%2Fdeveloper%2Farticle%2F2453762%3FpolicyId%3D1%26traceId%3D" target="_blank" title="https://cloud.tencent.com.cn/developer/article/2453762?policyId=1&amp;traceId=" ref="nofollow noopener noreferrer">ä»£ç 10å€æé€Ÿï¼åƒé€åº•å±‚æ¶æ„å°±æ˜¯å¦‚æ­¤ç®€å•-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
<h3 data-id="heading-1">å…ˆå»ºç«‹ç›´è§‰ï¼šV8 æ˜¯ä¸€æ¡â€œç¿»è¯‘+åŠ é€Ÿâ€çš„æµæ°´çº¿</h3>
<p>å¯ä»¥æŠŠ V8 æƒ³è±¡æˆä¸€ä¸ªâ€œä¼šå­¦ä¹ çš„ç¿»è¯‘å®˜â€ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ç›®æ ‡ï¼šè®©ä»£ç å°½å¿«è·‘èµ·æ¥</strong>ï¼ˆå¯åŠ¨å¿«ï¼‰</li>
<li><strong>ç¬¬äºŒç›®æ ‡ï¼šæŠŠç»å¸¸è·‘çš„ä»£ç è¶Šè·‘è¶Šå¿«</strong>ï¼ˆçƒ­ç‚¹ä¼˜åŒ–ï¼‰</li>
<li><strong>ç¬¬ä¸‰ç›®æ ‡ï¼šå‘ç°å‡è®¾é”™äº†å°±å›é€€é‡æ¥</strong>ï¼ˆå»ä¼˜åŒ– Deoptï¼‰</li>
</ul>
<p>æ¥ä¸‹æ¥æ‰€æœ‰ç»†èŠ‚ï¼Œéƒ½å›´ç»•è¿™ä¸‰å¥è¯å±•å¼€ã€‚</p>
<hr/>
<h3 data-id="heading-2">01ï½œä¸ºä»€ä¹ˆ CPU æ‰æ˜¯æœ€ç»ˆæ‰§è¡Œè€…</h3>
<p>è®¡ç®—æœºçš„å¤§è„‘â€”â€”<strong>CPUï¼ˆä¸­å¤®å¤„ç†å™¨ï¼‰</strong> ï¼Œåªè®¤è¯†æœºå™¨è¯­è¨€ï¼ˆæŒ‡ä»¤é›†ï¼‰ã€‚</p>
<ul>
<li><strong>é«˜çº§è¯­è¨€</strong>ï¼šJavaScript, Python, Javaï¼ˆäººç±»æ˜“è¯»ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼‰ã€‚</li>
<li><strong>æœºå™¨è¯­è¨€</strong>ï¼šäºŒè¿›åˆ¶æŒ‡ä»¤ï¼ˆCPU æ˜“è¯»ï¼Œç›´æ¥æ§åˆ¶ç¡¬ä»¶ï¼‰ã€‚</li>
</ul>
<p><strong>JavaScript å¼•æ“çš„æœ¬è´¨</strong>ï¼Œå°±æ˜¯ä¸€ä¸ª<strong>è¶…çº§ç¿»è¯‘å®˜</strong>ã€‚å®ƒçš„æ ¸å¿ƒèŒè´£å°±æ˜¯ï¼š<strong>è§£é‡Šå’Œæ‰§è¡Œ JS ä»£ç ï¼Œå°†å…¶è½¬æ¢ä¸º CPU èƒ½çœ‹æ‡‚çš„æœºå™¨æŒ‡ä»¤ã€‚</strong></p>
<blockquote>
<p>æ‰€ä»¥ï¼š<strong>CPU æ˜¯â€œæ‰§è¡Œè€…â€ï¼ŒV8 æ˜¯â€œç¿»è¯‘å®˜ + åŠ é€Ÿå™¨â€ã€‚</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f4846426c134e34af3ccec60e3e6cf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=fge3sTL6p5wRIyz4kWLNm%2F968%2BI%3D" alt="" loading="lazy"/></p>
<p>å†çœ‹ä¸€å¼ æ›´ç›´è§‚çš„å›¾ï¼šä»£ç æœ€ç»ˆä¸€å®šè¦è½åˆ° CPU å¯æ‰§è¡Œçš„æœºå™¨ç ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f1b60e9f034fad8e4d2edc2d03d402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=nBeMtJInP0ORwUmS6lHL3S3NWXU%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-3">02ï½œJavaScript å¼•æ“åœ¨æµè§ˆå™¨é‡Œå¤„åœ¨ä»€ä¹ˆä½ç½®</h3>
<h4 data-id="heading-4">2.1 å¸¸è§çš„ç¿»è¯‘å®˜ï¼ˆJS å¼•æ“ï¼‰</h4>
<p>è™½ç„¶ä»Šå¤©çš„ä¸»è§’æ˜¯ V8ï¼Œä½†åœ¨è¿™ä¸ªæ±Ÿæ¹–é‡Œè¿˜æœ‰å…¶ä»–å¤§ä½¬ï¼š</p>
<ul>
<li><strong>SpiderMonkey</strong>ï¼šJS ä¹‹çˆ¶ Brendan Eich çš„ä½œå“ï¼ŒFirefox çš„å¿ƒè„ã€‚</li>
<li><strong>JavaScriptCore</strong>ï¼šè‹¹æœ WebKit å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼ŒSafari çš„åŠ¨åŠ›æºã€‚</li>
<li><strong>Chakra</strong>ï¼šå¾®è½¯ IE/Edge æ—¶ä»£çš„äº§ç‰©ã€‚</li>
<li><strong>V8</strong>ï¼šGoogle çš„æ°ä½œï¼Œå®ƒä¸ä»…é©±åŠ¨äº† Chromeï¼Œæ›´æ˜¯ Node.js çš„æ ¸å¿ƒã€‚</li>
</ul>
<p>æµè§ˆå™¨å†…æ ¸å¹¶ä¸æ˜¯â€œåªæœ‰æ¸²æŸ“â€ï¼Œå®ƒé€šå¸¸è‡³å°‘åŒ…å«ä¸¤å¤§å—ï¼š</p>
<ul>
<li><strong>æ¸²æŸ“ç›¸å…³</strong>ï¼šHTML/CSS è§£æã€å¸ƒå±€ã€ç»˜åˆ¶</li>
<li><strong>è„šæœ¬ç›¸å…³</strong>ï¼šè§£æå¹¶æ‰§è¡Œ JavaScript</li>
</ul>
<p>ä»¥ WebKit ä¸¾ä¾‹ï¼šå®ƒå¯ä»¥æ‹†æˆ <code>WebCore</code> å’Œ <code>JavaScriptCore</code> ä¸¤éƒ¨åˆ†ï¼ˆJS å¼•æ“å°±æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚<strong>é‡åˆ° <code>&lt;script&gt;</code> æ ‡ç­¾æ—¶</strong>ï¼ŒWebCore ä¼šæš‚åœå·¥ä½œï¼ŒæŠŠæ§åˆ¶æƒäº¤ç»™ JS å¼•æ“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¸¸è¯´ JS ä¼šé˜»å¡ DOM æ¸²æŸ“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94eef3ea00f74d1284ef9ff43da40019~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=IJeOy8ZYx9dVUFQ%2FjZ1d9FH9lF4%3D" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-5">2.2ã€ ä¸ºä»€ä¹ˆ V8 èƒ½ä»ä¼—ç¥ä¸­è„±é¢–è€Œå‡ºï¼Ÿ</h4>
<p>V8 æ˜¯ç”¨ <strong>C++</strong> ç¼–å†™çš„é«˜æ€§èƒ½å¼€æºå¼•æ“ã€‚å®ƒä¹‹æ‰€ä»¥å¼ºï¼Œä¸»è¦å½’åŠŸäºè¿™å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>JIT (Just-In-Time) å³æ—¶ç¼–è¯‘</strong>ï¼šV8 æŠ›å¼ƒäº†ä¼ ç»Ÿçš„â€œå…ˆè½¬å­—èŠ‚ç å†æ…¢æ…¢è§£é‡Šâ€æˆ–è€…â€œå…¨é‡ç¼–è¯‘â€çš„æç«¯ï¼Œè€Œæ˜¯é‡‡ç”¨äº†<strong>æ··åˆæ¨¡å¼</strong>ã€‚å®ƒèƒ½åœ¨è¿è¡Œæ—¶å°† JS ä»£ç ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼Œé€Ÿåº¦æå¿«ã€‚</li>
<li><strong>Node.js çš„å¿ƒè„</strong>ï¼šV8 è¯æ˜äº† JS ä¸ä»…ä»…èƒ½è·‘åœ¨æµè§ˆå™¨ï¼Œä¹Ÿèƒ½è·‘åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®ç°äº†å…¨æ ˆçš„å¯èƒ½ã€‚</li>
<li><strong>åƒåœ¾å›æ”¶ï¼ˆGCï¼‰</strong> ï¼šV8 æ‹¥æœ‰æå…¶å…ˆè¿›çš„åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆåç»­æ–‡ç« æˆ‘ä»¬å°†ä¸“é—¨æ‹†è§£ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-6">03ï½œV8 å…¨æµç¨‹ï¼šä»æºç åˆ°æœºå™¨ç </h3>
<p>æŠŠ V8 çš„æ‰§è¡Œæµç¨‹æµ“ç¼©æˆ 6 æ­¥ï¼Œä¼šéå¸¸æ¸…æ™°ï¼š</p>
<ol>
<li><strong>Parseï¼ˆè§£æï¼‰</strong> ï¼šæºç  â†’ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œå¹¶é‡‡ç”¨ <strong>Lazy Parsing</strong>ï¼ˆå‡½æ•°å³å°†æ‰§è¡Œæ—¶æ‰å®Œæ•´è§£æï¼‰</li>
<li><strong>Ignitionï¼ˆè§£é‡Šå™¨ï¼‰</strong> ï¼šAST â†’ <strong>å­—èŠ‚ç  Bytecode</strong></li>
<li><strong>æ‰§è¡Œå­—èŠ‚ç </strong>ï¼šå…ˆè·‘èµ·æ¥ï¼Œå¹¶æ”¶é›†è¿è¡Œä¿¡æ¯ï¼ˆç±»å‹ã€åˆ†æ”¯ã€è°ƒç”¨é¢‘ç‡â€¦ï¼‰</li>
<li><strong>TurboFanï¼ˆä¼˜åŒ–ç¼–è¯‘å™¨ï¼‰</strong> ï¼šçƒ­ç‚¹ä»£ç  â†’ <strong>ä¼˜åŒ–åçš„æœºå™¨ç </strong></li>
<li><strong>Deoptï¼ˆå»ä¼˜åŒ–ï¼‰</strong> ï¼šå‡è®¾ä¸æˆç«‹ï¼ˆå¸¸è§æ˜¯ç±»å‹å˜åŒ–ï¼‰â†’ å›é€€åˆ°å­—èŠ‚ç </li>
<li><strong>æœºå™¨ç æ‰§è¡Œ</strong>ï¼šæœ€ç»ˆäº¤ç»™ CPU</li>
</ol>
<p>ç”¨ä¸€å¼ å›¾æŠŠè¿™æ¡æµæ°´çº¿é’‰æ­»åœ¨è„‘å­é‡Œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d331e1cca4fd4142bdae3d2dc7f2372f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=GuCt9gG8sjgG8OmG45IwTtItaZI%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼ŒAST é•¿ä»€ä¹ˆæ ·ï¼Ÿå¤§æ¦‚æ˜¯è¿™ç§ç»“æ„åŒ–æ ‘å½¢è¡¨ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20e5336bdb04b4dbffc38ae4a7044ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=L1NDOUSUItJhs8xpbQtLN9volE8%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">04ï½œParse ç»†èŠ‚ï¼šè¯æ³•åˆ†æã€è¯­æ³•åˆ†æä¸ AST</h3>
<p>å¾ˆå¤šäººå¡åœ¨â€œParse è§£æâ€è¿™ä¸€æ­¥ï¼ŒåŸå› æ˜¯ï¼š<strong>æ¦‚å¿µåè¯å¤šï¼Œä½†ç›´è§‰ä¸å¤Ÿ</strong>ã€‚</p>
<h4 data-id="heading-8">4.1 è¯æ³•åˆ†æï¼šæŠŠä»£ç æ‹†æˆ tokenï¼ˆæœ€å°è¯­æ³•å•å…ƒï¼‰</h4>
<p>åœ¨ç”Ÿæˆæ ‘ä¹‹å‰ï¼Œä»£ç é¦–å…ˆè¦è¢«â€œæ‰“ç¢â€ã€‚è¿™å°±æ˜¯ <strong>è¯æ³•åˆ†æ</strong>ã€‚</p>
<p>V8 ä¼šå°†ä»£ç æ‹†è§£æˆä¸€ä¸ªä¸ªæœ€å°å•å…ƒï¼Œç§°ä¸º <strong>Tokens</strong>ã€‚</p>
<p>æ¯”å¦‚ä»£ç ï¼š<code>const name = "coderwhy"</code></p>
<p>ä¼šè¢«æ‹†è§£ä¸ºï¼š</p>
<ul>
<li><code>const</code> (Keyword å…³é”®å­—)</li>
<li><code>name</code> (Identifier æ ‡è¯†ç¬¦)</li>
<li><code>=</code> (Operator æ“ä½œç¬¦)</li>
<li><code>"coderwhy"</code> (StringLiteral å­—ç¬¦ä¸²å­—é¢é‡)</li>
</ul>
<h4 data-id="heading-9">4.2 è¯­æ³•åˆ†æï¼šæŠŠ token é‡æ–°ç»„è£…æˆæ ‘ï¼ˆASTï¼‰</h4>
<p>æ‹¿åˆ° Tokens åï¼ŒV8 ä¼šä¾æ®è¯­æ³•è§„åˆ™ï¼Œå°†å…¶ç»„è£…æˆä¸€æ£µæ ‘â€”â€”<strong>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</strong> ã€‚</p>
<p>AST æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„åŸºçŸ³ï¼Œ<strong>Babel è½¬è¯‘ã€ESLint æ£€æŸ¥ã€Vue æ¨¡æ¿ç¼–è¯‘</strong>ï¼Œæœ¬è´¨ä¸Šéƒ½åœ¨æ“ä½œ ASTã€‚</p>
<p>çœ‹çœ‹ä¸€æ®µç®€å•çš„ä»£ç ç”Ÿæˆçš„ AST ç»“æ„ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hi "</span> + name)
}
</code></pre>
<p>å¯¹åº”çš„ AST ç»“æ„æ¦‚è§ˆï¼š</p>
<ul>
<li>
<p><strong>FunctionDeclaration</strong> (å‡½æ•°å£°æ˜: sayHi)</p>
<ul>
<li>
<p><strong>Identifier</strong> (å‚æ•°: name)</p>
</li>
<li>
<p><strong>BlockStatement</strong> (å‡½æ•°ä½“)</p>
<ul>
<li>
<p><strong>ExpressionStatement</strong> (è¡¨è¾¾å¼)</p>
<ul>
<li><strong>CallExpression</strong> (è°ƒç”¨ console.log)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-10">05ï½œä¸ºä»€ä¹ˆè¦ä¿ç•™â€œå­—èŠ‚ç â€è¿™ä¸€å±‚</h3>
<p>ç›´è§‰ä¸Šä¼šè§‰å¾—ï¼š<strong>å°‘ä¸€å±‚è½¬æ¢å°±æ›´å¿«</strong>ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥ AST â†’ æœºå™¨ç ï¼Ÿ</p>
<p>å› ä¸ºå·¥ç¨‹é‡ŒçœŸæ­£çš„ç›®æ ‡ä¸æ˜¯â€œæŸä¸€æ­¥æœ€å¿«â€ï¼Œè€Œæ˜¯â€œæ•´ä½“æ›´å¿«ã€æ›´ç¨³ã€æ›´å¯æ§â€ã€‚ä¿ç•™å­—èŠ‚ç ä¸»è¦å¸¦æ¥ï¼š</p>
<ol>
<li><strong>è·¨å¹³å°</strong>ï¼šå­—èŠ‚ç ä¸ç»‘å®šæŸä¸€ç§ CPU æŒ‡ä»¤é›†</li>
<li><strong>ä¼˜åŒ–æ›´èªæ˜</strong>ï¼šå…ˆè·‘å­—èŠ‚ç ï¼Œæ”¶é›†è¿è¡Œæ•°æ®ï¼Œå†å†³å®šæ€ä¹ˆç”Ÿæˆæ›´ä¼˜æœºå™¨ç </li>
<li><strong>æ›´å®‰å…¨ã€æ›´å¯æ§</strong>ï¼šæ›´å®¹æ˜“åšéš”ç¦»ã€ç­–ç•¥ã€å†…å­˜ç®¡ç†</li>
<li><strong>æ›´å®¹æ˜“è°ƒè¯•</strong>ï¼šæ–­ç‚¹/å•æ­¥åœ¨å­—èŠ‚ç å±‚æ›´å®¹æ˜“å®ç°</li>
</ol>
<p>é…åˆè¿™å¼ å›¾ç†è§£ï¼Œä¼šå¾ˆé¡ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1c22d73a1974c83a354868f97bffadc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=v0eyE6gwcY8kDxCsYpuKUOHhVAw%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-11">06ï½œæ¶æ„æ‹†è§£ï¼šParse / Ignition / TurboFan å„åšä»€ä¹ˆ</h3>
<p>ç”¨â€œå²—ä½èŒè´£â€æ¥è®°ï¼š</p>
<ul>
<li><strong>Parse</strong>ï¼šæŠŠ JS ä»£ç å˜æˆ ASTï¼ˆè§£é‡Šå™¨ä¸ç›´æ¥è®¤è¯† JS æºç ï¼‰</li>
<li><strong>Ignition</strong>ï¼šæŠŠ AST å˜æˆå­—èŠ‚ç å¹¶æ‰§è¡Œï¼ŒåŒæ—¶æ”¶é›† TurboFan éœ€è¦çš„è¿è¡Œä¿¡æ¯ï¼ˆæ¯”å¦‚ç±»å‹ä¿¡æ¯ï¼‰</li>
<li><strong>TurboFan</strong>ï¼šæŠŠçƒ­ç‚¹å­—èŠ‚ç ç¼–è¯‘æˆæ›´å¿«çš„æœºå™¨ç ï¼ˆå¹¶æŒç»­è¿­ä»£ä¼˜åŒ–ï¼‰</li>
</ul>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸å…³é”®çš„è¿è¡Œè§„å¾‹ï¼š</p>
<blockquote>
<p><strong>çƒ­ç‚¹å‡½æ•°ä¼šè¢«ä¼˜åŒ–</strong>ï¼Œä½†<strong>ç±»å‹å˜åŒ–ç­‰æƒ…å†µä¼šè§¦å‘å»ä¼˜åŒ–å›é€€</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">07ï½œé¢„è§£æ vs å…¨é‡è§£æï¼šLazy Parsing ä¸ºä»€ä¹ˆèƒ½è®©å¯åŠ¨æ›´å¿«</h3>
<p>V8 å¹¶ä¸ä¼šâ€œä¸Šæ¥å°±æŠŠä¸€åˆ‡éƒ½è§£æå¾—å·¨ç»†æ— é—â€ï¼Œå®ƒä¼šåšå–èˆï¼š</p>
<h4 data-id="heading-13">7.1 é¢„è§£æï¼ˆPre-parsingï¼‰</h4>
<ul>
<li>ç›®æ ‡ï¼š<strong>å¿«é€Ÿæ‰«æ</strong>ï¼Œæå–ç»“æ„ä¿¡æ¯ï¼ˆå˜é‡/å‡½æ•°å£°æ˜ç­‰ï¼‰</li>
<li>ç‰¹ç‚¹ï¼šä¸æ·±æŒ–å‡½æ•°ä½“å†…éƒ¨é€»è¾‘ â†’ <strong>æ›´å¿«</strong></li>
</ul>
<h4 data-id="heading-14">7.2 å…¨é‡è§£æï¼ˆFull parsingï¼‰</h4>
<ul>
<li>ç›®æ ‡ï¼šæŠŠå‡½æ•°ä½“ã€è¡¨è¾¾å¼ã€è¯­å¥ç»†èŠ‚å…¨éƒ¨å»ºå‡ºæ¥</li>
<li>ç‰¹ç‚¹ï¼šAST æ›´å®Œæ•´ â†’ ä¾¿äºåç»­ç”Ÿæˆå­—èŠ‚ç ä¸ä¼˜åŒ–</li>
</ul>
<p>å› æ­¤ï¼Œâ€œå‡½æ•°æ²¡æ‰§è¡Œä¼šä¸ä¼šç”Ÿæˆ ASTï¼Ÿâ€æ›´å‡†ç¡®çš„å›ç­”æ˜¯ï¼š</p>
<ul>
<li>ä¼šç”Ÿæˆä¸€ä¸ª<strong>ç®€åŒ–çš„ç»“æ„æ¶å­</strong>ï¼ˆé¢„è§£æï¼‰</li>
<li>çœŸè¦æ‰§è¡Œä¹‹å‰ï¼Œä¼šè¡¥é½ä¸º<strong>å®Œæ•´ AST</strong>ï¼ˆå…¨é‡è§£æï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-15">08ï½œèµ°ä¸€éå®˜æ–¹å›¾ï¼štokenã€ASTã€å­—èŠ‚ç åˆ°åº•æ€ä¹ˆæ¥çš„</h3>
<p>å…ˆå‡†å¤‡ä¸€æ®µæ¨¡æ¿ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">name = <span class="hljs-string">"XiaoWu"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hi "</span> + name)
}

<span class="hljs-title function_">sayHi</span>(name)
</code></pre>
<h4 data-id="heading-16">8.1 å®˜æ–¹æµç¨‹å›¾ï¼šä»è¾“å…¥åˆ°å­—èŠ‚ç </h4>
<p>è¿™å¼ å›¾éå¸¸ç»å…¸ï¼Œå»ºè®®æ”¶è—ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb56f664de504858a28148774bbce437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=tcIACPqj1rDe03%2FA6YrfI3zEWy4%3D" alt="" loading="lazy"/></p>
<p>æŒ‰å›¾ç†è§£å°±æ˜¯ï¼š</p>
<ul>
<li><strong>Scanner</strong>ï¼šæ‰«æå­—ç¬¦æµ â†’ ç”Ÿæˆ tokens</li>
<li><strong>PreParser</strong>ï¼šåšé¢„è§£æï¼ˆå¿«é€Ÿåˆ¤æ–­ç»“æ„ï¼‰</li>
<li><strong>Parser</strong>ï¼šæ„å»º AST</li>
<li><strong>Bytecode</strong>ï¼šAST â†’ å­—èŠ‚ç </li>
</ul>
<h4 data-id="heading-17">8.2 token é•¿ä»€ä¹ˆæ ·ï¼ˆè¯æ³•åˆ†æç»“æœï¼‰</h4>
<p>ä¸‹é¢æ˜¯å…¸å‹ token å½¢æ€ï¼ˆæ‘˜å–å…³é”®ç±»å‹ï¼Œæ–¹ä¾¿ç†è§£ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Keyword'</span>, value=<span class="hljs-string">'const'</span>)            // å…³é”®å­—
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Identifier'</span>, value=<span class="hljs-string">'name'</span>)          // æ ‡è¯†ç¬¦
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Operator'</span>, value=<span class="hljs-string">'='</span>)               // è¿ç®—ç¬¦
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'StringLiteral'</span>, value=<span class="hljs-string">'"coderwhy and XiaoYu"'</span>) // å­—ç¬¦ä¸²å­—é¢é‡
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Punctuation'</span>, value=<span class="hljs-string">';'</span>)            // æ ‡ç‚¹ç¬¦å·

Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Identifier'</span>, value=<span class="hljs-string">'console'</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Punctuation'</span>, value=<span class="hljs-string">'.'</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Identifier'</span>, value=<span class="hljs-string">'log'</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Punctuation'</span>, value=<span class="hljs-string">'('</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Identifier'</span>, value=<span class="hljs-string">'name'</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Punctuation'</span>, value=<span class="hljs-string">')'</span>)
Token(<span class="hljs-attr">type</span>=<span class="hljs-string">'Punctuation'</span>, value=<span class="hljs-string">';'</span>)
</code></pre>
<h4 data-id="heading-18">8.3 è¯­æ³•åˆ†æï¼šé¢„è§£æå¦‚ä½•å‚ä¸</h4>
<p>è¿™å¼ å›¾ä¸“é—¨è§£é‡Šâ€œé¢„è§£æ/è§£æâ€çš„å…³ç³»ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69d4f091bbd44a128203c9a3397c469a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=Hc3DJgH2%2BdXesCtbADkU2VPMmy4%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-19">09ï½œçƒ­ç‚¹ä¼˜åŒ–ä¸å»ä¼˜åŒ–ï¼šä¸ºä»€ä¹ˆâ€œæœ‰æ—¶çªç„¶å˜æ…¢â€</h3>
<p>V8 ä¼šæŠŠè¢«é¢‘ç¹æ‰§è¡Œçš„å‡½æ•°æ ‡è®°ä¸º <strong>çƒ­ç‚¹å‡½æ•°</strong>ï¼Œç„¶åäº¤ç»™ TurboFan ç¼–è¯‘ä¸ºæ›´å¿«çš„æœºå™¨ç ã€‚</p>
<p>ä½†æ³¨æ„ï¼š<strong>ä¼˜åŒ–æ˜¯æœ‰å‰æå‡è®¾çš„</strong>ã€‚æœ€å¸¸è§çš„å‡è®¾å°±æ˜¯â€œç±»å‹ç¨³å®šâ€ã€‚</p>
<p>æ¥çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function sum (num1,num2){
  return num1 + num2
}

<span class="hljs-comment">// å¤šæ¬¡è°ƒç”¨ -&gt; å¯èƒ½æˆä¸ºçƒ­ç‚¹å‡½æ•° -&gt; è¢«ä¼˜åŒ–</span>
<span class="hljs-built_in">sum</span>(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>)
<span class="hljs-built_in">sum</span>(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>)

<span class="hljs-comment">// ç±»å‹çªç„¶å˜åŒ– -&gt; ä¹‹å‰çš„æœºå™¨ç å‡è®¾ä¸æˆç«‹ -&gt; å»ä¼˜åŒ–å›é€€</span>
<span class="hljs-built_in">sum</span>('xiaoyu','coderwhy')
</code></pre>
<p>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å‰ä¸¤æ¬¡ä¼ å…¥ <code>number</code>ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šå‡è®¾â€œè¿™é‡Œä¸€ç›´æ˜¯ number åŠ æ³•â€</li>
<li>ç¬¬ä¸‰æ¬¡çªç„¶å˜æˆ <code>string</code> æ‹¼æ¥ï¼Œæœºå™¨ç å¯èƒ½æ— æ³•æ­£ç¡®å¤„ç† â†’ <strong>å›é€€åˆ°å­—èŠ‚ç é‡æ–°æ”¶é›†ä¿¡æ¯ï¼Œå†å†³å®šæ˜¯å¦é‡æ–°ä¼˜åŒ–</strong></li>
</ul>
<p>è¿™å°±æ˜¯æ€§èƒ½â€œæŠ–ä¸€ä¸‹â€çš„æ ¹æºä¹‹ä¸€ï¼š<strong>Deoptï¼ˆå»ä¼˜åŒ–ï¼‰</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-20">10ï½œå­—èŠ‚ç ä¸æœºå™¨ç ï¼ˆäº†è§£å³å¯ï¼‰ï¼šJIT åˆ°åº•åšäº†ä»€ä¹ˆ</h3>
<p>æœºå™¨ç çš„ç”Ÿæˆé€šå¸¸ä¾èµ– <strong>JITï¼ˆJust-In-Time Compilationï¼Œå³æ—¶ç¼–è¯‘ï¼‰</strong> ï¼š</p>
<ul>
<li>æŠŠå­—èŠ‚ç è½¬æ¢æˆæœ¬åœ°æœºå™¨ç </li>
<li>æŠŠç»“æœç¼“å­˜èµ·æ¥</li>
<li>åç»­æ‰§è¡Œç›´æ¥å¤ç”¨ç¼“å­˜çš„æœºå™¨ç ï¼ˆæ›´å¿«ï¼‰</li>
</ul>
<p>TurboFan ä½œä¸ºä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œä¼šåŸºäº IRï¼ˆä¸­é—´è¡¨ç¤ºï¼‰åšå¤šå±‚ä¼˜åŒ–ï¼ˆç±»å‹ã€å†…è”ã€æ§åˆ¶æµç­‰ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9026bf89ba4e4ae293a03753ebf02b23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=Uat8DUsKMT2ox%2Fe00Eaamn0REqI%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œå­—èŠ‚ç åˆ°æœºå™¨ç çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå­˜åœ¨ä¸åŒä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5f87e40aeb04e599978ce8cf1a20903~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=BmLOPuZZg%2BWrHH6Z5JcUHYjcKSE%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œè¿˜æœ‰ä¸¤å¼ é…å›¾ï¼ˆä¿æŒåŸæ ·ä¿ç•™ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca7fe53e26f54a30beb3daaf60c0d034~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=uvn0YNPuO%2Flbxw5tG5zBPrDefm8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/346599b792034889bd49dfada16ae9c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dpcGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769938069&amp;x-signature=5Ox7Vt5Dt1jJ%2F3h14wl903towuM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-21">ç»“å°¾ï¼šæŠŠçŸ¥è¯†ç”¨èµ·æ¥</h3>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯å¦å¯¹é‚£ä¸ªé»‘ç›’å­ä¸€æ ·çš„æµè§ˆå™¨æœ‰äº†æ–°çš„è®¤è¯†ï¼Ÿ</p>
<p>æˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ V8 çš„å¥‡å¹»æ—…ç¨‹ï¼š</p>
<ol>
<li><strong>Scanner &amp; Parser</strong>ï¼šæŠŠä»£ç æ‹†è§£æˆ Tokensï¼Œå†ç»„è£…æˆ ASTï¼ˆæ³¨æ„é¢„è§£æä¼˜åŒ–ï¼‰ã€‚</li>
<li><strong>Ignition</strong>ï¼šæŠŠ AST ç¿»è¯‘æˆå­—èŠ‚ç ï¼Œè¾¹è§£é‡Šè¾¹æ‰§è¡Œã€‚</li>
<li><strong>TurboFan</strong>ï¼šåœ¨åå°å·å·è§‚å¯Ÿï¼ŒæŠŠçƒ­ç‚¹ä»£ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œä½†ä¸€æ—¦ç±»å‹å˜åŒ–ï¼Œå°±ä¼šè¢«æ‰“å›åŸå½¢ã€‚</li>
</ol>
<p><strong>ä¸‹æœŸé¢„å‘Šï¼š</strong></p>
<p>ç†è§£äº†æ‰§è¡Œæµç¨‹ï¼Œè¿˜æœ‰ä¸€ä¸ªå¤§é­”ç‹åœ¨ç­‰ç€æˆ‘ä»¬â€”â€”<strong>å†…å­˜ç®¡ç†</strong>ã€‚</p>
<ul>
<li>JS çš„é—­åŒ…ä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Ÿ</li>
<li>V8 çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰æ˜¯å¦‚ä½•åŒºåˆ†â€œæ–°ç”Ÿä»£â€å’Œâ€œè€å¹´ä»£â€çš„ï¼Ÿ</li>
<li>å…¨åœé¡¿ï¼ˆStop-the-worldï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå¼‚æ­¥ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆ90%çš„å¼€å‘è€…éƒ½ç”¨é”™äº†è¿™3ä¸ªå…³é”®ç‚¹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598480267218485282</link>    <guid>https://juejin.cn/post/7598480267218485282</guid>    <pubDate>2026-01-25T00:19:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598480267218485282" data-draft-id="7598588085596602408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå¼‚æ­¥ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆ90%çš„å¼€å‘è€…éƒ½ç”¨é”™äº†è¿™3ä¸ªå…³é”®ç‚¹ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-25T00:19:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå¼‚æ­¥ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆ90%çš„å¼€å‘è€…éƒ½ç”¨é”™äº†è¿™3ä¸ªå…³é”®ç‚¹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T00:19:46.000Z" title="Sun Jan 25 2026 00:19:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Pythonå¼‚æ­¥ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆ90%çš„å¼€å‘è€…éƒ½ç”¨é”™äº†è¿™3ä¸ªå…³é”®ç‚¹ï¼Ÿ</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>å¼‚æ­¥ç¼–ç¨‹å·²ç»æˆä¸ºç°ä»£Pythonå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯åœ¨I/Oå¯†é›†å‹å’Œé«˜å¹¶å‘åœºæ™¯ä¸‹ã€‚éšç€<code>asyncio</code>åº“çš„æˆç†Ÿå’ŒPythonå¯¹å¼‚æ­¥æ”¯æŒçš„ä¸æ–­å¢å¼ºï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å¼€å§‹å°è¯•åˆ©ç”¨å¼‚æ­¥ç¼–ç¨‹æ¥æå‡æ€§èƒ½ã€‚ç„¶è€Œï¼Œåœ¨å®è·µä¸­ï¼Œè®¸å¤šå¼€å‘è€…å¹¶æœªçœŸæ­£ç†è§£å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¯¼è‡´ä»£ç æ•ˆç‡ä½ä¸‹ã€éš¾ä»¥ç»´æŠ¤ç”šè‡³å‡ºç°éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Pythonå¼‚æ­¥ç¼–ç¨‹ä¸­æœ€å®¹æ˜“è¢«è¯¯è§£æˆ–é”™è¯¯ä½¿ç”¨çš„3ä¸ªå…³é”®ç‚¹ï¼š<strong>äº‹ä»¶å¾ªç¯çš„ç†è§£ä¸ä½¿ç”¨</strong>ã€<strong>åç¨‹çš„æ­£ç¡®è°ƒåº¦</strong>ä»¥åŠ<strong>èµ„æºç®¡ç†ä¸çº¿ç¨‹å®‰å…¨</strong>ã€‚é€šè¿‡åˆ†æè¿™äº›å¸¸è§è¯¯åŒºï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°æŒæ¡å¼‚æ­¥ç¼–ç¨‹çš„ç²¾é«“ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. äº‹ä»¶å¾ªç¯ï¼šä¸ä»…ä»…æ˜¯â€œåå°ä»»åŠ¡è°ƒåº¦å™¨â€</h3>
<h4 data-id="heading-3">è¯¯åŒºï¼šäº‹ä»¶å¾ªç¯æ˜¯ä¸€ä¸ªé»‘åŒ£å­</h4>
<p>è®¸å¤šå¼€å‘è€…å°†äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ç®€å•åœ°è§†ä¸ºä¸€ä¸ªâ€œåå°ä»»åŠ¡è°ƒåº¦å™¨â€ï¼Œè®¤ä¸ºåªè¦å°†ä»»åŠ¡ä¸¢ç»™<code>asyncio.run()</code>æˆ–<code>loop.run_until_complete()</code>å°±èƒ½è‡ªåŠ¨å®ç°å¼‚æ­¥æ‰§è¡Œã€‚è¿™ç§ç†è§£è¿‡äºè‚¤æµ…ï¼Œå¿½ç•¥äº†äº‹ä»¶å¾ªç¯çš„æ ¸å¿ƒä½œç”¨ï¼š<strong>åè°ƒå’Œç®¡ç†æ‰€æœ‰åç¨‹çš„æ‰§è¡Œé¡ºåºå’Œèµ„æºåˆ†é…</strong>ã€‚</p>
<h4 data-id="heading-4">æ·±å…¥è§£æ</h4>
<ul>
<li><strong>äº‹ä»¶å¾ªç¯çš„æœ¬è´¨</strong>ï¼šäº‹ä»¶å¾ªç¯æ˜¯å•çº¿ç¨‹çš„ï¼Œå®ƒé€šè¿‡è½®è¯¢I/Oäº‹ä»¶å’Œåç¨‹çš„çŠ¶æ€æ¥å†³å®šä¸‹ä¸€æ­¥æ‰§è¡Œå“ªä¸ªä»»åŠ¡ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯â€œéé˜»å¡â€å’Œâ€œåä½œå¼å¤šä»»åŠ¡â€ã€‚</li>
<li><strong>å¸¸è§é”™è¯¯</strong>ï¼š
<ol>
<li><strong>é˜»å¡äº‹ä»¶å¾ªç¯</strong>ï¼šåœ¨åç¨‹ä¸­è°ƒç”¨åŒæ­¥é˜»å¡æ“ä½œï¼ˆå¦‚<code>time.sleep()</code>æˆ–CPUå¯†é›†å‹è®¡ç®—ï¼‰ï¼Œå¯¼è‡´æ•´ä¸ªäº‹ä»¶å¾ªç¯è¢«å¡ä½ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨<code>await asyncio.sleep()</code>æˆ–å°†CPUå¯†é›†å‹ä»»åŠ¡äº¤ç»™<code>loop.run_in_executor()</code>ã€‚</li>
<li><strong>æ»¥ç”¨å¤šä¸ªäº‹ä»¶å¾ªç¯</strong>ï¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­åˆ›å»ºå¤šä¸ªäº‹ä»¶å¾ªç¯ï¼ˆå¦‚æ‰‹åŠ¨è°ƒç”¨<code>asyncio.new_event_loop()</code>ï¼‰ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚é€šå¸¸ï¼Œä¸€ä¸ªçº¿ç¨‹åªéœ€è¦ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-5">æœ€ä½³å®è·µ</h4>
<ul>
<li>å§‹ç»ˆä½¿ç”¨<code>asyncio.run()</code>ä½œä¸ºå…¥å£ç‚¹ï¼ˆPython 3.7+ï¼‰ï¼Œé¿å…æ‰‹åŠ¨ç®¡ç†äº‹ä»¶å¾ªç¯çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li>å¯¹äºéœ€è¦å¹¶è¡Œæ‰§è¡Œçš„I/Oæ“ä½œï¼Œä¼˜å…ˆä½¿ç”¨<code>asyncio.gather()</code>æˆ–<code>asyncio.create_task()</code>ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨æ“ä½œäº‹ä»¶å¾ªç¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">2. åç¨‹çš„æ­£ç¡®è°ƒåº¦ï¼šä»â€œFire-and-Forgetâ€åˆ°ç»“æ„åŒ–å¹¶å‘</h3>
<h4 data-id="heading-7">è¯¯åŒºï¼šâ€œå¯åŠ¨å³å¿˜â€çš„åç¨‹ç®¡ç†</h4>
<p>è®¸å¤šå¼€å‘è€…ä¹ æƒ¯ç›´æ¥è°ƒç”¨<code>asyncio.create_task()</code>è€Œä¸ä¿å­˜è¿”å›çš„Taskå¯¹è±¡ï¼Œå¯¼è‡´æ— æ³•è·Ÿè¸ªä»»åŠ¡çŠ¶æ€æˆ–å¤„ç†å¼‚å¸¸ã€‚è¿™ç§â€œFire-and-Forgetâ€æ¨¡å¼ä¼šå¼•å‘ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ— æ³•æ•è·å¼‚å¸¸</strong>ï¼šæœªè¢«ç­‰å¾…çš„Taskå¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œå¯èƒ½ä¸ä¼šè§¦å‘ä»»ä½•é”™è¯¯å¤„ç†é€»è¾‘ã€‚</li>
<li><strong>èµ„æºæ³„æ¼</strong>ï¼šæœªå®Œæˆçš„ä»»åŠ¡å¯èƒ½æŒæœ‰èµ„æºï¼ˆå¦‚æ•°æ®åº“è¿æ¥ï¼‰ï¼Œä½†æ— æ³•è¢«åŠæ—¶æ¸…ç†ã€‚</li>
</ol>
<h4 data-id="heading-8">æ·±å…¥è§£æ</h4>
<ul>
<li><strong>ç»“æ„åŒ–å¹¶å‘çš„é‡è¦æ€§</strong>ï¼šå¼‚æ­¥ä»£ç åº”è¯¥åƒåŒæ­¥ä»£ç ä¸€æ ·å…·æœ‰æ˜ç¡®çš„ä»»åŠ¡è¾¹ç•Œå’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚Python 3.11å¼•å…¥çš„<code>TaskGroup</code>ï¼ˆé€šè¿‡<code>asyncio.TaskGroup</code>ï¼‰æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ã€‚</li>
<li><strong>å¸¸è§é”™è¯¯åœºæ™¯</strong>ï¼š
<ol>
<li><strong>æœªå¤„ç†çš„Taskå¼‚å¸¸</strong>ï¼šå¦‚æœä¸€ä¸ªTaskæœªè¢«æ˜¾å¼ç­‰å¾…ï¼Œå…¶å¼‚å¸¸ä¼šè¢«é™é»˜ä¸¢å¼ƒï¼ˆé™¤éè°ƒç”¨<code>.exception()</code>æˆ–<code>.result()</code>ï¼‰ã€‚</li>
<li><strong>å–æ¶ˆä¼ æ’­é—®é¢˜</strong>ï¼šç›´æ¥å–æ¶ˆçˆ¶Taskä¸ä¼šè‡ªåŠ¨å–æ¶ˆå­Taskï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†å–æ¶ˆé€»è¾‘ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-9">æœ€ä½³å®è·µ</h4>
<ul>
<li>ä½¿ç”¨<code>asyncio.TaskGroup</code>ï¼ˆPython 3.11+ï¼‰æˆ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚<code>trio</code>ï¼‰å®ç°ç»“æ„åŒ–å¹¶å‘ï¼š
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> asyncio.TaskGroup() <span class="hljs-keyword">as</span> tg:
        tg.create_task(task1())
        tg.create_task(task2())
    <span class="hljs-comment"># æ‰€æœ‰ä»»åŠ¡å®Œæˆåç»§ç»­æ‰§è¡Œ</span>
</code></pre>
</li>
<li>å¯¹äºæ—§ç‰ˆæœ¬Pythonï¼Œè‡³å°‘è¦é€šè¿‡<code>asyncio.gather(return_exceptions=True)</code>æ•è·æ‰€æœ‰ä»»åŠ¡çš„å¼‚å¸¸ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">3. èµ„æºç®¡ç†ä¸çº¿ç¨‹å®‰å…¨ï¼šâ€œå¼‚æ­¥ä¸Šä¸‹æ–‡â€ä¸æ˜¯ä¸‡èƒ½çš„</h3>
<h4 data-id="heading-11">è¯¯åŒºï¼šè®¤ä¸ºå¼‚æ­¥ä»£ç å¤©ç„¶çº¿ç¨‹å®‰å…¨</h4>
<p>ç”±äºå¼‚æ­¥ç¼–ç¨‹åŸºäºåç¨‹çš„å•çº¿ç¨‹æ¨¡å‹ï¼Œè®¸å¤šå¼€å‘è€…è¯¯ä»¥ä¸ºä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä»ç„¶å­˜åœ¨é£é™©ï¼š</p>
<ol>
<li><strong>æ··åˆåŒæ­¥ä¸å¼‚æ­¥ä»£ç </strong>ï¼šä¾‹å¦‚åœ¨åç¨‹ä¸­è°ƒç”¨åŒæ­¥æ•°æ®åº“é©±åŠ¨ï¼ˆå¦‚psycopg2ï¼‰ï¼Œå¯èƒ½å¯¼è‡´æ­»é”æˆ–ç«äº‰æ¡ä»¶ã€‚</li>
<li><strong>å…±äº«çŠ¶æ€è®¿é—®</strong>ï¼šå³ä½¿æ˜¯å•çº¿ç¨‹ç¯å¢ƒï¼Œå¦‚æœå¤šä¸ªåç¨‹åŒæ—¶ä¿®æ”¹å…±äº«å˜é‡ï¼ˆå¦‚å…¨å±€å­—å…¸ï¼‰ï¼Œä¹Ÿå¯èƒ½å› ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ol>
<h4 data-id="heading-12">æ·±å…¥è§£æ</h4>
<ul>
<li><strong>GILçš„é™åˆ¶</strong>ï¼šè™½ç„¶GILé¿å…äº†çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œï¼Œä½†åç¨‹çš„åˆ‡æ¢æ˜¯æ˜¾å¼çš„ï¼ˆé€šè¿‡<code>await</code>ï¼‰ï¼Œå› æ­¤å…±äº«çŠ¶æ€çš„ä¿®æ”¹ä»éœ€è¦åŒæ­¥æœºåˆ¶ï¼ˆå¦‚<code>asyncio.Lock</code>ï¼‰ã€‚</li>
<li><strong>å¸¸è§é™·é˜±æ¡ˆä¾‹</strong>ï¼š
<ol>
<li><strong>é˜»å¡I/Oç ´åå¼‚æ­¥æ€§</strong>ï¼šåœ¨åç¨‹ä¸­ä½¿ç”¨åŒæ­¥Rediså®¢æˆ·ç«¯ä¼šå¯¼è‡´æ•´ä¸ªäº‹ä»¶å¾ªç¯é˜»å¡ï¼›åº”æ”¹ç”¨å¼‚æ­¥å®¢æˆ·ç«¯ï¼ˆå¦‚<code>aioredis</code>ï¼‰ã€‚</li>
<li><strong>æœªå—ä¿æŠ¤çš„å…±äº«çŠ¶æ€</strong>ï¼šå³ä½¿æ˜¯æ— ç«äº‰çš„å…¨å±€å˜é‡ä¿®æ”¹ä¹Ÿéœ€è¦é”ä¿æŠ¤ï¼ˆä¾‹å¦‚è®¡æ•°å™¨é€’å¢æ“ä½œï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-13">æœ€ä½³å®è·µ</h4>
<ul>
<li><strong>ä¸¥æ ¼åˆ†ç¦»åŒæ­¥ä¸å¼‚æ­¥ä»£ç è¾¹ç•Œ</strong>ï¼šä½¿ç”¨é€‚é…å™¨æ¨¡å¼å°†åŒæ­¥ä»£ç å°è£…ä¸ºå¼‚æ­¥æ¥å£ï¼ˆå¦‚é€šè¿‡çº¿ç¨‹æ± æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>æ˜¾å¼åŒæ­¥æœºåˆ¶é€‰æ‹©åŸåˆ™</strong>ï¼š
<ul>
<li><code>asyncio.Lock</code>:Â é€‚ç”¨äºå•è¿›ç¨‹å†…çš„åç¨‹é—´äº’æ–¥ã€‚</li>
<li><code>threading.Lock</code>:Â ä»…ç”¨äºä¸åŒæ­¥ä»£ç äº¤äº’çš„åœºæ™¯ã€‚</li>
<li><code>multiprocessing.Lock</code>:Â è·¨è¿›ç¨‹å…±äº«çŠ¶æ€æ—¶ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>Pythonå¼‚æ­¥ç¼–ç¨‹çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶é«˜æ•ˆå’Œéé˜»å¡çš„ç‰¹æ€§ï¼Œä½†åŒæ—¶ä¹Ÿå¯¹å¼€å‘è€…çš„è®¾è®¡èƒ½åŠ›æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚æœ¬æ–‡åˆ†æçš„ä¸‰ä¸ªå…³é”®ç‚¹â€”â€”äº‹ä»¶å¾ªç¯ã€åç¨‹è°ƒåº¦å’Œèµ„æºç®¡ç†â€”â€”æ˜¯å¤§å¤šæ•°é—®é¢˜çš„æ ¹æºæ‰€åœ¨ã€‚è¦çœŸæ­£æŒæ¡å¼‚æ­¥ç¼–ç¨‹ï¼Œå¿…é¡»ç†è§£å…¶åº•å±‚åŸç†å¹¶éµå¾ªç»“æ„åŒ–å¹¶å‘çš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>å°Šé‡äº‹ä»¶å¾ªç¯çš„å•çº¿ç¨‹æœ¬è´¨</strong>ï¼Œé¿å…é˜»å¡æ“ä½œã€‚</li>
<li><strong>é‡‡ç”¨ç»“æ„åŒ–å¹¶å‘æ¨¡å¼ç®¡ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</li>
<li><strong>æ˜ç¡®åŒºåˆ†åŒæ­¥ä¸å¼‚æ­¥è¾¹ç•Œå¹¶æ­£ç¡®ä½¿ç”¨é”æœºåˆ¶</strong>.</li>
</ol>
<p>åªæœ‰å°†è¿™äº›åŸåˆ™èå…¥æ—¥å¸¸å¼€å‘ä¹ æƒ¯æ‰èƒ½çœŸæ­£å‘æŒ¥å‡ºPythonå¼‚æ­¥ç¼–ç¨‹çš„å…¨éƒ¨æ½œåŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hono è·¯ç”±å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598801700050337830</link>    <guid>https://juejin.cn/post/7598801700050337830</guid>    <pubDate>2026-01-25T03:39:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598801700050337830" data-draft-id="7598818096753229875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hono è·¯ç”±å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"/> <meta itemprop="keywords" content="Bun,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-25T03:39:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jump_jump"/> <meta itemprop="url" content="https://juejin.cn/user/4230576474692765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hono è·¯ç”±å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576474692765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jump_jump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T03:39:19.000Z" title="Sun Jan 25 2026 03:39:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»åº•å±‚å¼•æ“ä¼˜åŒ–è§’åº¦ï¼Œæ·±å…¥å‰–æ Hono è·¯ç”±å™¨çš„æè‡´æ€§èƒ½å¥¥ç§˜</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¼—å¤š JavaScript Web æ¡†æ¶ä¸­ï¼ŒHono ä»¥å…¶æè‡´çš„æ€§èƒ½è¡¨ç°è„±é¢–è€Œå‡ºã€‚ç‰¹åˆ«æ˜¯åœ¨ <strong>Cloudflare Workersã€Deno ç­‰è¾¹ç¼˜è®¡ç®—ç¯å¢ƒ</strong>ä¸­ï¼ŒHono çš„è·¯ç”±åŒ¹é…é€Ÿåº¦åœ¨åŒç±»æ¡†æ¶ä¸­ååˆ—å‰èŒ…ã€‚è¿™èƒŒåçš„ç§˜å¯†æ˜¯ä»€ä¹ˆï¼Ÿç­”æ¡ˆå°±è—åœ¨å®ƒçš„ <strong>RegExpRouter</strong> å®ç°ä¸­ã€‚</p>
<blockquote>
<p><strong>âš ï¸ é‡è¦æç¤º</strong>ï¼šæœ¬æ–‡é‡ç‚¹è®¨è®º RegExpRouter çš„æ ¸å¿ƒåŸç†ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒHono ä½¿ç”¨ SmartRouter è‡ªåŠ¨ç»„åˆå¤šç§è·¯ç”±å™¨ï¼ˆRegExpRouterã€TrieRouterã€LinearRouterï¼‰ä»¥è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªç²¾ç®€çš„å®ç°ï¼Œæ·±å…¥å‰–æ Hono è·¯ç”±å™¨çš„æ ¸å¿ƒåŸç†ï¼Œå¸®åŠ©ä½ ç†è§£ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆ RegExp è·¯ç”±æ¯”ä¼ ç»Ÿè·¯ç”±å¿«</li>
<li>è·¯ç”±æ˜¯å¦‚ä½•é¢„ç¼–è¯‘çš„</li>
<li>å‚æ•°æå–çš„å·§å¦™è®¾è®¡</li>
</ul>
<hr/>
<p><strong>ğŸ“Œ å…³é”®è¦ç‚¹</strong></p>





























<table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ ¸å¿ƒåŸç†</td><td>å°†è·¯ç”±é¢„ç¼–è¯‘ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ©ç”¨å¼•æ“åº•å±‚ä¼˜åŒ–</td></tr><tr><td>æ€§èƒ½ä¼˜åŠ¿</td><td>å‡å°‘ JS å±‚å¼€é”€ï¼Œä¸€æ¬¡åŸç”Ÿè°ƒç”¨å®ŒæˆåŒ¹é…</td></tr><tr><td>æœ€ä½³ç¯å¢ƒ</td><td>Cloudflare Workersã€Deno ç­‰è¾¹ç¼˜è®¡ç®—å¹³å°</td></tr><tr><td>å®é™…æ¶æ„</td><td>SmartRouter + RegExpRouter + TrieRouter ç»„åˆ</td></tr><tr><td>æƒè¡¡è€ƒè™‘</td><td>Node.js ç¯å¢ƒæ€§èƒ½æ‰“æŠ˜æ‰£ï¼Œè·¯ç”±æ³¨å†Œè¾ƒæ…¢</td></tr></tbody></table>
<h2 data-id="heading-1">ä¼ ç»Ÿè·¯ç”±çš„æ€§èƒ½ç“¶é¢ˆ</h2>
<p>åœ¨ç†è§£ Hono çš„ä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¼ ç»Ÿè·¯ç”±çš„å¤„ç†æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿè·¯ç”±çš„å…¸å‹å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">matchRoute</span>(<span class="hljs-params">path, routes</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> route <span class="hljs-keyword">of</span> routes) {
    <span class="hljs-comment">// 1. å­—ç¬¦ä¸²åˆ†å‰²</span>
    <span class="hljs-keyword">const</span> pathParts = path.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> routeParts = route.<span class="hljs-property">path</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-comment">// 2. é€æ®µæ¯”è¾ƒ</span>
    <span class="hljs-keyword">if</span> (pathParts.<span class="hljs-property">length</span> !== routeParts.<span class="hljs-property">length</span>) <span class="hljs-keyword">continue</span>;

    <span class="hljs-keyword">const</span> params = {};
    <span class="hljs-keyword">let</span> matched = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// 3. JS å±‚é¢çš„å¾ªç¯å’Œæ¡ä»¶åˆ¤æ–­</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; pathParts.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">if</span> (routeParts[i].<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">':'</span>)) {
        params[routeParts[i].<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>)] = pathParts[i];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pathParts[i] !== routeParts[i]) {
        matched = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">break</span>;
      }
    }

    <span class="hljs-keyword">if</span> (matched) <span class="hljs-keyword">return</span> { route, params };
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p><strong>æ€§èƒ½é—®é¢˜åœ¨å“ªé‡Œï¼Ÿ</strong></p>
<ul>
<li>âŒ å¤§é‡çš„å­—ç¬¦ä¸²æ“ä½œï¼ˆ<code>split</code>ã€<code>slice</code>ï¼‰</li>
<li>âŒ å¤šå±‚å¾ªç¯å’Œæ¡ä»¶åˆ¤æ–­ï¼Œå…¨åœ¨ JavaScript å±‚é¢æ‰§è¡Œ</li>
<li>âŒ æ¯ä¸ªè¯·æ±‚éƒ½è¦é‡å¤è¿™äº›æ“ä½œ</li>
</ul>
<h2 data-id="heading-2">Hono çš„è§£å†³æ–¹æ¡ˆï¼šä¸‹æ²‰åˆ°å¼•æ“å±‚</h2>
<p>Hono çš„æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•å´æå…¶å·§å¦™ï¼š</p>
<blockquote>
<p><strong>å°†è·¯ç”±åŒ¹é…é€»è¾‘ä» JavaScript å±‚ä¸‹æ²‰åˆ° JavaScript å¼•æ“åº•å±‚ï¼ˆC++ å®ç°çš„æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼‰</strong></p>
</blockquote>
<h3 data-id="heading-3">1. é¢„ç¼–è¯‘é˜¶æ®µï¼ˆåº”ç”¨å¯åŠ¨æ—¶ï¼‰</h3>
<p>åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼ŒHono ä¼šå°†è·¯ç”±è·¯å¾„è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è·¯ç”±è·¯å¾„ï¼š/user/:id/posts/:postId</span>
<span class="hljs-comment">// è½¬æ¢ä¸ºæ­£åˆ™ï¼š/^\/user\/([^/]+)\/posts\/([^/]+)$/</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">paramNames</span>: <span class="hljs-built_in">string</span>[] = [];

<span class="hljs-keyword">const</span> regexPath = path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/:([a-zA-Z0-9_]+)/g</span>, <span class="hljs-function">(<span class="hljs-params">_, paramName</span>) =&gt;</span> {
  paramNames.<span class="hljs-title function_">push</span>(paramName); <span class="hljs-comment">// è®°å½•å‚æ•°å</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'([^/]+)'</span>;           <span class="hljs-comment">// æ›¿æ¢ä¸ºæ•è·ç»„</span>
});

<span class="hljs-keyword">const</span> pattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`^<span class="hljs-subst">${regexPath}</span>$`</span>);
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>:id</code> â†’ <code>([^/]+)</code>ï¼šåŒ¹é…é™¤ <code>/</code> å¤–çš„ä»»æ„å­—ç¬¦</li>
<li>å‚æ•°åè¢«ä¿å­˜åœ¨ <code>paramNames</code> æ•°ç»„ä¸­</li>
<li>è¿™ä¸ª"æ˜‚è´µ"çš„ç¼–è¯‘è¿‡ç¨‹åªåœ¨å¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡</li>
</ul>
<h3 data-id="heading-4">2. åŒ¹é…é˜¶æ®µï¼ˆè¯·æ±‚åˆ°æ¥æ—¶ï¼‰</h3>
<p>å½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> match = pattern.<span class="hljs-title function_">exec</span>(path);
</code></pre>
<p><strong>è¿™è¡Œä»£ç çš„é­”æ³•ï¼š</strong></p>
<ul>
<li>âœ… <code>exec</code> æ˜¯ JavaScript å¼•æ“çš„åŸç”Ÿæ–¹æ³•ï¼Œç”± C++ å®ç°</li>
<li>âœ… æ­£åˆ™å¼•æ“åœ¨åº•å±‚è¿›è¡Œäº†é«˜åº¦ä¼˜åŒ–ï¼ˆçŠ¶æ€æœºã€JIT ç¼–è¯‘ç­‰ï¼‰</li>
<li>âœ… æ— éœ€æ‰‹åŠ¨åˆ†å‰²å­—ç¬¦ä¸²ã€æ— éœ€ JS å±‚å¾ªç¯</li>
<li>âœ… å‚æ•°æå–é€šè¿‡æ•è·ç»„è‡ªåŠ¨å®Œæˆ</li>
</ul>
<h3 data-id="heading-5">3. å‚æ•°æå–</h3>
<p>åŒ¹é…æˆåŠŸåï¼Œå‚æ•°æå–ä¹Ÿéå¸¸ç®€æ´ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {};
route.<span class="hljs-property">paramNames</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name, index</span>) =&gt;</span> {
  params[name] = match[index + <span class="hljs-number">1</span>]; <span class="hljs-comment">// match[0] æ˜¯å®Œæ•´åŒ¹é…</span>
});
</code></pre>
<h2 data-id="heading-6">å®Œæ•´å®ç°è§£æ</h2>
<p>è®©æˆ‘ä»¬çœ‹å®Œæ•´çš„ç®€åŒ–å®ç°ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„ç±»å‹å®šä¹‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ============ ç±»å‹å®šä¹‰ ============</span>

<span class="hljs-comment">/**
 * è·¯ç”±å¤„ç†å‡½æ•°ç±»å‹
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">params</span> - ä» URL ä¸­æå–çš„å‚æ•°å¯¹è±¡
 */</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Handler</span> = <span class="hljs-function">(<span class="hljs-params">params: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">/**
 * è·¯ç”±ä¿¡æ¯æ¥å£
 */</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Route</span> {
  <span class="hljs-attr">method</span>: <span class="hljs-built_in">string</span>;        <span class="hljs-comment">// HTTP æ–¹æ³•ï¼ˆGET, POST, etc.ï¼‰</span>
  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>;          <span class="hljs-comment">// åŸå§‹è·¯å¾„æ¨¡å¼ï¼ˆå¦‚ /user/:idï¼‰</span>
  <span class="hljs-attr">handler</span>: <span class="hljs-title class_">Handler</span>;      <span class="hljs-comment">// è·¯ç”±å¤„ç†å‡½æ•°</span>
  <span class="hljs-attr">paramNames</span>: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">// å‚æ•°åæ•°ç»„ï¼ˆå¦‚ ['id', 'postId']ï¼‰</span>
}

<span class="hljs-comment">/**
 * åŒ¹é…ç»“æœæ¥å£
 */</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MatchResult</span> {
  <span class="hljs-attr">handler</span>: <span class="hljs-title class_">Handler</span>;
  <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;
}

<span class="hljs-comment">// ============ æ ¸å¿ƒè·¯ç”±å™¨å®ç° ============</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoRegExpRouter</span> {
  <span class="hljs-comment">// å­˜å‚¨é¢„ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼å’Œè·¯ç”±ä¿¡æ¯</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">routes</span>: { <span class="hljs-attr">pattern</span>: <span class="hljs-title class_">RegExp</span>; <span class="hljs-attr">route</span>: <span class="hljs-title class_">Route</span> }[] = [];

  <span class="hljs-comment">// æ³¨å†Œè·¯ç”±ï¼šé¢„ç¼–è¯‘</span>
  <span class="hljs-title function_">add</span>(<span class="hljs-params">method: <span class="hljs-built_in">string</span>, path: <span class="hljs-built_in">string</span>, handler: Handler</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">paramNames</span>: <span class="hljs-built_in">string</span>[] = [];

    <span class="hljs-comment">// å°† :param è½¬ä¸ºæ­£åˆ™æ•è·ç»„</span>
    <span class="hljs-keyword">const</span> regexPath = path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/:([a-zA-Z0-9_]+)/g</span>, <span class="hljs-function">(<span class="hljs-params">_, paramName</span>) =&gt;</span> {
      paramNames.<span class="hljs-title function_">push</span>(paramName);
      <span class="hljs-keyword">return</span> <span class="hljs-string">'([^/]+)'</span>;
    });

    <span class="hljs-keyword">const</span> pattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`^<span class="hljs-subst">${regexPath}</span>$`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">push</span>({ pattern, <span class="hljs-attr">route</span>: { method, path, handler, paramNames } });
  }

  <span class="hljs-comment">// åŒ¹é…è·¯ç”±ï¼šæ‰§è¡Œæ­£åˆ™</span>
  <span class="hljs-title function_">match</span>(<span class="hljs-params">method: <span class="hljs-built_in">string</span>, path: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { pattern, route } <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>) {
      <span class="hljs-keyword">if</span> (route.<span class="hljs-property">method</span> !== method &amp;&amp; route.<span class="hljs-property">method</span> !== <span class="hljs-string">'ALL'</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-keyword">const</span> match = pattern.<span class="hljs-title function_">exec</span>(path); <span class="hljs-comment">// æ ¸å¿ƒï¼šåŸç”Ÿæ­£åˆ™åŒ¹é…</span>

      <span class="hljs-keyword">if</span> (match) {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {};
        route.<span class="hljs-property">paramNames</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name, index</span>) =&gt;</span> {
          params[name] = match[index + <span class="hljs-number">1</span>];
        });
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">handler</span>: route.<span class="hljs-property">handler</span>, params };
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h2 data-id="heading-7">å®æˆ˜ç¤ºä¾‹</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DemoRegExpRouter</span>();

<span class="hljs-comment">// æ³¨å†Œè·¯ç”±</span>
router.<span class="hljs-title function_">add</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'/user/:id'</span>, <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è·å–ç”¨æˆ·è¯¦æƒ…ï¼ŒID: <span class="hljs-subst">${params.id}</span>`</span>);
});

router.<span class="hljs-title function_">add</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'/user/:id/posts/:postId'</span>, <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è·å–ç”¨æˆ· <span class="hljs-subst">${params.id}</span> çš„æ–‡ç«  <span class="hljs-subst">${params.postId}</span>`</span>);
});

<span class="hljs-comment">// åŒ¹é…è¯·æ±‚</span>
<span class="hljs-keyword">const</span> result = router.<span class="hljs-title function_">match</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'/user/123/posts/456'</span>);
<span class="hljs-keyword">if</span> (result) {
  result.<span class="hljs-title function_">handler</span>(result.<span class="hljs-property">params</span>);
  <span class="hljs-comment">// è¾“å‡º: è·å–ç”¨æˆ· 123 çš„æ–‡ç«  456</span>
}
</code></pre>
<h2 data-id="heading-8">æ€§èƒ½ä¼˜åŠ¿åˆ†æ</h2>
<p><strong>ä¸ºä»€ä¹ˆ RegExpRouter æ›´å¿«ï¼Ÿ</strong></p>
<ol>
<li><strong>å‡å°‘ JS æ‰§è¡Œå¼€é”€</strong>ï¼šä»å¤šå±‚å¾ªç¯é™åˆ°ä¸€æ¬¡åŸç”Ÿè°ƒç”¨</li>
<li><strong>å¼•æ“ä¼˜åŒ–</strong>ï¼šæ­£åˆ™å¼•æ“ç»è¿‡æ•°åå¹´ä¼˜åŒ–ï¼ŒåŒ…å« JITã€çŠ¶æ€æœºç­‰æŠ€æœ¯</li>
<li><strong>å‡å°‘å†…å­˜åˆ†é…</strong>ï¼šæ— éœ€é¢‘ç¹åˆ›å»ºæ•°ç»„ã€å¯¹è±¡</li>
<li><strong>ä¸€æ¬¡æ€§ç¼–è¯‘</strong>ï¼šé¢„ç¼–è¯‘é˜¶æ®µå®Œæˆæ‰€æœ‰å‡†å¤‡å·¥ä½œï¼Œè¯·æ±‚æ—¶é›¶é¢å¤–å¼€é”€</li>
</ol>
<p><strong>æ€§èƒ½å¯¹æ¯”æ¦‚è§ˆ</strong></p>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°å±‚æ¬¡</th><th>æ‰§è¡Œæ•ˆç‡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¼ ç»Ÿè·¯ç”±</td><td>JavaScript å±‚</td><td>ä¸­ç­‰</td><td>é€šç”¨åœºæ™¯</td></tr><tr><td>RegExpRouter</td><td>å¼•æ“åº•å±‚</td><td>æå¿«</td><td>è¾¹ç¼˜è®¡ç®—ã€é«˜å¹¶å‘</td></tr></tbody></table>
<blockquote>
<p><strong>ğŸ“Š å®é™… Benchmark</strong>ï¼šæ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fhono.dev%2Fdocs%2Fconcepts%2Fbenchmarks" target="_blank" title="https://hono.dev/docs/concepts/benchmarks" ref="nofollow noopener noreferrer">Hono å®˜æ–¹æµ‹è¯•</a>ï¼Œåœ¨ Cloudflare Workers å’Œ Deno ç¯å¢ƒä¸­ï¼ŒHono æ˜¯åŒç±»æ¡†æ¶ä¸­æœ€å¿«çš„ã€‚ä½†åœ¨ Node.js ç¯å¢ƒä¸­ï¼Œç”±äºé€‚é…å™¨å¼€é”€ï¼Œæ€§èƒ½ä¼˜åŠ¿ä¼šæ‰“æŠ˜æ‰£ã€‚</p>
</blockquote>
<h2 data-id="heading-9">Hono çœŸå®å®ç°çš„è¿›ä¸€æ­¥ä¼˜åŒ–</h2>
<p>æœ¬æ–‡çš„ç®€åŒ–ç‰ˆæ¯ä¸ªè·¯ç”±éƒ½æ˜¯ç‹¬ç«‹çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚è€Œ Hono çš„çœŸå®å®ç°é‡‡ç”¨äº†<strong>å¤šè·¯ç”±å™¨ååŒ</strong>çš„ç­–ç•¥ï¼š</p>
<h3 data-id="heading-10">1. SmartRouterï¼ˆæ™ºèƒ½è·¯ç”±å™¨ï¼‰</h3>
<p>Hono é»˜è®¤ä½¿ç”¨ <strong>SmartRouter</strong>ï¼Œå®ƒä¼šï¼š</p>
<ul>
<li>æ ¹æ®è·¯ç”±ç‰¹å¾è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„è·¯ç”±å™¨</li>
<li>åŠ¨æ€ç»„åˆ RegExpRouterã€TrieRouterã€LinearRouter</li>
<li>æ£€æµ‹è·¯ç”±æ¨¡å¼å¹¶æŒç»­ä½¿ç”¨æœ€ä¼˜æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-11">2. è·¯ç”±å™¨åˆ†å·¥</h3>

























<table><thead><tr><th>è·¯ç”±å™¨</th><th>é€‚ç”¨åœºæ™¯</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>RegExpRouter</strong></td><td>åŠ¨æ€å‚æ•°è·¯ç”±</td><td>æœ€å¿«ï¼Œä½†ä¸æ”¯æŒæ‰€æœ‰æ¨¡å¼</td></tr><tr><td><strong>TrieRouter</strong></td><td>å¤æ‚è·¯ç”±æ¨¡å¼</td><td>æ”¯æŒæ‰€æœ‰æ¨¡å¼ï¼Œæ€§èƒ½ä¼˜ç§€</td></tr><tr><td><strong>LinearRouter</strong></td><td>å°‘é‡è·¯ç”±</td><td>ç®€å•å¯é ï¼Œè·¯ç”±å°‘æ—¶å¤Ÿç”¨</td></tr></tbody></table>
<h3 data-id="heading-12">3. å®é™…ä¼˜åŒ–ç­–ç•¥</h3>
<ul>
<li><strong>é™æ€è·¯ç”±ä¼˜å…ˆ</strong>ï¼š<code>/about</code>ã€<code>/contact</code> ç­‰ä½¿ç”¨ Map å¿«é€ŸæŸ¥æ‰¾</li>
<li><strong>è·¯ç”±é¢„åˆ†ç»„</strong>ï¼šæŒ‰ HTTP æ–¹æ³•åˆ†ç»„ï¼Œå‡å°‘åŒ¹é…æ¬¡æ•°</li>
<li><strong>å»¶è¿Ÿç¼–è¯‘</strong>ï¼šRegExpRouter ç¼–è¯‘è¾ƒæ…¢ï¼Œé€‚åˆåº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œä¸é€‚åˆæ— æœåŠ¡å™¨ç¯å¢ƒçš„å†·å¯åŠ¨</li>
</ul>
<p>è¿™äº›ä¼˜åŒ–ä½¿å¾— Hono åœ¨å¤„ç†æ•°ç™¾ä¸ªè·¯ç”±æ—¶ä»ç„¶ä¿æŒæé«˜æ€§èƒ½ã€‚</p>
<h2 data-id="heading-13">å±€é™æ€§ä¸æƒè¡¡</h2>
<p>RegExpRouter å¹¶éé“¶å¼¹ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹é™åˆ¶ï¼š</p>
<h3 data-id="heading-14">RegExpRouter çš„å±€é™</h3>
<ul>
<li><strong>ä¸æ”¯æŒæ‰€æœ‰è·¯ç”±æ¨¡å¼</strong>ï¼šæŸäº›å¤æ‚çš„è·¯ç”±è§„åˆ™æ— æ³•ç”¨ç®€å•æ­£åˆ™è¡¨ç¤º</li>
<li><strong>æ³¨å†Œé˜¶æ®µè¾ƒæ…¢</strong>ï¼šè·¯ç”±ç¼–è¯‘éœ€è¦æ—¶é—´ï¼Œä¸é€‚åˆæ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°åˆå§‹åŒ–çš„ç¯å¢ƒï¼ˆå¦‚æŸäº›æ— æœåŠ¡å™¨å†·å¯åŠ¨åœºæ™¯ï¼‰</li>
<li><strong>è°ƒè¯•éš¾åº¦</strong>ï¼šç¼–è¯‘åçš„æ­£åˆ™è¡¨è¾¾å¼å¯è¯»æ€§è¾ƒå·®ï¼Œå‡ºé”™æ—¶éš¾ä»¥å®šä½</li>
<li><strong>æ¨¡å¼çº¦æŸ</strong>ï¼šå¦‚å¸¦ä¸¥æ ¼çº¦æŸçš„å‚æ•° <code>/:id(\\d+)</code> éœ€è¦é¢å¤–å¤„ç†</li>
</ul>
<h3 data-id="heading-15">è¿è¡Œç¯å¢ƒå·®å¼‚</h3>






























<table><thead><tr><th>ç¯å¢ƒ</th><th>æ€§èƒ½è¡¨ç°</th><th>åŸå› </th></tr></thead><tbody><tr><td>Cloudflare Workers</td><td>â­â­â­â­â­ æå¿«</td><td>åŸç”Ÿ Web æ ‡å‡† API</td></tr><tr><td>Deno</td><td>â­â­â­â­â­ æå¿«</td><td>åŸç”Ÿ Web æ ‡å‡† API</td></tr><tr><td>Bun</td><td>â­â­â­â­ å¾ˆå¿«</td><td>é«˜æ€§èƒ½ JS è¿è¡Œæ—¶</td></tr><tr><td>Node.js</td><td>â­â­â­ ä¸­ç­‰</td><td>éœ€è¦é€‚é…å™¨è½¬æ¢</td></tr></tbody></table>
<blockquote>
<p><strong>ğŸ’¡ é€‰å‹å»ºè®®</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨è¿è¡Œåœ¨è¾¹ç¼˜è®¡ç®—ç¯å¢ƒï¼ˆCloudflare Workersã€Vercel Edge Functions ç­‰ï¼‰ï¼ŒHono æ˜¯ç»ä½³é€‰æ‹©ã€‚å¦‚æœæ˜¯ä¼ ç»Ÿ Node.js æœåŠ¡å™¨ï¼ŒFastify å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
</blockquote>
<p>ä½†å¯¹äºå¤§å¤šæ•° Web åº”ç”¨åœºæ™¯ï¼ŒRegExpRouter çš„æ€§èƒ½ä¸åŠŸèƒ½å¹³è¡¡å·²ç»è¶³å¤Ÿä¼˜ç§€ã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>Hono çš„ RegExpRouter é€šè¿‡"é¢„ç¼–è¯‘ + å¼•æ“ä¸‹æ²‰"çš„ç­–ç•¥ï¼Œåœ¨ç‰¹å®šç¯å¢ƒä¸­å°†è·¯ç”±åŒ¹é…æ€§èƒ½æå‡åˆ°æè‡´ï¼š</p>
<h3 data-id="heading-17">æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>é¢„ç¼–è¯‘</strong>ï¼šå¯åŠ¨æ—¶ä¸€æ¬¡æ€§å°†è·¯ç”±è½¬ä¸ºæ­£åˆ™ï¼Œæ‘Šé”€æˆæœ¬</li>
<li><strong>å¼•æ“ä¸‹æ²‰</strong>ï¼šåˆ©ç”¨ C++ å®ç°çš„æ­£åˆ™å¼•æ“ï¼Œé¿å… JS å±‚å¼€é”€</li>
<li><strong>å‚æ•°æ•è·</strong>ï¼šå·§å¦™åˆ©ç”¨æ­£åˆ™æ•è·ç»„ï¼Œæ— éœ€æ‰‹åŠ¨è§£æ</li>
<li><strong>æ™ºèƒ½ç»„åˆ</strong>ï¼šSmartRouter è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜è·¯ç”±å™¨ï¼Œå…¼é¡¾æ€§èƒ½ä¸åŠŸèƒ½</li>
</ol>
<h3 data-id="heading-18">è®¾è®¡å“²å­¦</h3>
<p>è¿™ç§è®¾è®¡å“²å­¦å€¼å¾—æˆ‘ä»¬æ€è€ƒï¼š<strong>æ€§èƒ½ä¼˜åŒ–çš„ç»ˆæç›®æ ‡ï¼Œå¾€å¾€æ˜¯è®©"çƒ­è·¯å¾„"ä»£ç å°½å¯èƒ½å¤šåœ°è¿è¡Œåœ¨æ›´åº•å±‚çš„ä¼˜åŒ–ç¯å¢ƒä¸­</strong>ã€‚</p>
<p>å¯¹äº Web æ¡†æ¶æ¥è¯´ï¼Œè·¯ç”±åŒ¹é…å°±æ˜¯æœ€çƒ­çš„è·¯å¾„ä¹‹ä¸€ã€‚Hono åœ¨è¾¹ç¼˜è®¡ç®—ç¯å¢ƒä¸­æ‰¾åˆ°äº†è¿™ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£ï¼ŒåŒæ—¶é€šè¿‡å¤šè·¯ç”±å™¨æ¶æ„ä¿è¯äº†å¹¿æ³›çš„é€‚ç”¨æ€§ã€‚</p>
<h3 data-id="heading-19">æœ€ä½³å®è·µ</h3>
<ul>
<li>âœ… <strong>è¾¹ç¼˜è®¡ç®—/Serverless</strong>ï¼šHono æ˜¯é¦–é€‰ï¼ˆCloudflare Workersã€Deno Deployï¼‰</li>
<li>âœ… <strong>é«˜å¹¶å‘åœºæ™¯</strong>ï¼šå……åˆ†å‘æŒ¥ RegExpRouter æ€§èƒ½ä¼˜åŠ¿</li>
<li>âš ï¸ <strong>Node.js ç¯å¢ƒ</strong>ï¼šè€ƒè™‘æ€§èƒ½æƒè¡¡ï¼Œæˆ–é€‰æ‹© Fastify ç­‰ä¸“é—¨ä¼˜åŒ–çš„æ¡†æ¶</li>
<li>âš ï¸ <strong>å¤æ‚è·¯ç”±è§„åˆ™</strong>ï¼šäº†è§£ RegExpRouter çš„é™åˆ¶ï¼Œå¿…è¦æ—¶ä½¿ç”¨ TrieRouter</li>
</ul>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhono.dev%2F" target="_blank" title="https://hono.dev/" ref="nofollow noopener noreferrer">Hono å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhono.dev%2Fdocs%2Fconcepts%2Frouters" target="_blank" title="https://hono.dev/docs/concepts/routers" ref="nofollow noopener noreferrer">Hono Routers è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhono.dev%2Fdocs%2Fconcepts%2Fbenchmarks" target="_blank" title="https://hono.dev/docs/concepts/benchmarks" ref="nofollow noopener noreferrer">Hono Benchmarks</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv8.dev%2Fblog" target="_blank" title="https://v8.dev/blog" ref="nofollow noopener noreferrer">V8 æ­£åˆ™å¼•æ“ä¼˜åŒ–æŠ€æœ¯</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb-frameworks-benchmark.netlify.app%2F" target="_blank" title="https://web-frameworks-benchmark.netlify.app/" ref="nofollow noopener noreferrer">Web æ¡†æ¶æ€§èƒ½å¯¹æ¯”å·¥å…·</a></li>
</ul>
<p><strong>æŠ€æœ¯èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhonojs%2Fhono" target="_blank" title="https://github.com/honojs/hono" ref="nofollow noopener noreferrer">Hono GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fusualoma" target="_blank" title="https://github.com/usualoma" ref="nofollow noopener noreferrer">RegExpRouter åˆ›å»ºè€…ï¼šTaku Amano</a></li>
</ul>
<hr/>
<p><strong>ğŸ“ æ–‡ç« è¯´æ˜</strong></p>
<p>æœ¬æ–‡åŸºäºå¯¹ Hono æ¡†æ¶çš„å­¦ä¹ å’Œç ”ç©¶ç¼–å†™ï¼Œä»£ç ç¤ºä¾‹ä¸ºç®€åŒ–ç‰ˆå®ç°ï¼Œç”¨äºæ•™å­¦ç›®çš„ã€‚å®é™…çš„ Hono RegExpRouter å®ç°æ›´åŠ å¤æ‚å’Œä¼˜åŒ–ã€‚</p>
<p>æ€§èƒ½æ•°æ®å’Œå¯¹æ¯”æ¥è‡ª Hono å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºæµ‹è¯•ï¼Œå…·ä½“æ•°å€¼ä¼šå› æµ‹è¯•ç¯å¢ƒã€è´Ÿè½½ç±»å‹ã€è¿è¡Œæ—¶ç‰ˆæœ¬ç­‰å› ç´ è€Œå¼‚ã€‚å®é™…ä½¿ç”¨æ—¶è¯·æ ¹æ®è‡ªå·±çš„åœºæ™¯è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>å¦‚æœæ‚¨å‘ç°æ–‡ä¸­æœ‰ä»»ä½•ä¸å‡†ç¡®ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIä¸“æ  | Prompt Engineeringå®æˆ˜ [æ–°é—»åŠ©æ‰‹å®æˆ˜ï¼Œè¿™æ ·å†™Promptï¼Œä½ çš„ç¨‹åºèƒ½ç”¨ï¼Ÿ]]]></title>    <link>https://juejin.cn/post/7598699872552173604</link>    <guid>https://juejin.cn/post/7598699872552173604</guid>    <pubDate>2026-01-25T05:50:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598699872552173604" data-draft-id="7598587406707064873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIä¸“æ  | Prompt Engineeringå®æˆ˜ [æ–°é—»åŠ©æ‰‹å®æˆ˜ï¼Œè¿™æ ·å†™Promptï¼Œä½ çš„ç¨‹åºèƒ½ç”¨ï¼Ÿ]"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-25T05:50:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ¿çŒ¿é•¿æˆè®°"/> <meta itemprop="url" content="https://juejin.cn/user/4232463136874240"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIä¸“æ  | Prompt Engineeringå®æˆ˜ [æ–°é—»åŠ©æ‰‹å®æˆ˜ï¼Œè¿™æ ·å†™Promptï¼Œä½ çš„ç¨‹åºèƒ½ç”¨ï¼Ÿ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4232463136874240/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ¿çŒ¿é•¿æˆè®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T05:50:29.000Z" title="Sun Jan 25 2026 05:50:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AIä¸“æ  | Prompt Engineeringå®æˆ˜ [æ–°é—»åŠ©æ‰‹å®æˆ˜ï¼Œè¿™æ ·å†™Promptï¼Œä½ çš„ç¨‹åºèƒ½ç”¨ï¼Ÿ]</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c3ae3388392474e9fb10ed1adfabcae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54y_54y_6ZW_5oiQ6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769925029&amp;x-signature=BT%2BfHJ%2FxhAcOXi6VSH6w6JQ5kpQ%3D" alt="3 Prompt Engineeringå®æˆ˜-é»‘æ¿æŠ¥.png" loading="lazy"/></p>
<blockquote>
<p>éš¾åº¦ç³»æ•°ï¼šâ˜…â˜…â˜…â˜†â˜†</p>
</blockquote>
<blockquote>
<p>æœ¬ç« çŸ¥è¯†ï¼š</p>
<ul>
<li>å¤ä¹ æ¸…å•</li>
<li>æ–°é—»åŠ©æ‰‹Prompt</li>
<li>Promptåˆ†æ <span>[é‡ç‚¹ â˜…â˜…â˜…â˜…â˜…]</span></li>
<li>æ”¹é€ éªŒè¯ <span>[é‡ç‚¹ â˜…â˜…â˜…â˜…â˜…]</span></li>
<li>ç»§ç»­æ”¹è¿›æ€è·¯</li>
<li>ä¸‹ä¸€ç« é¢„å‘Š: PromptEngineeringè¿›é˜¶æŠ€å·§</li>
</ul>
</blockquote>
<h3 data-id="heading-1">å¤ä¹ æ¸…å•</h3>
<p>ä¸Šä¸€ç« æˆ‘ä»¬æåˆ°äº†å…³äºPromptEngineeringçš„8æ¡é«˜èƒ½å»ºè®®ï¼Œæœ¬ç« åŸºäºæ–°é—»åŠ©æ‰‹çš„åœºæ™¯ï¼Œå¸¦ä½ æ¥è§‚å¯Ÿä¸€ä¸‹Promptè¿™æ ·å†™ä½ çš„ç¨‹åºèƒ½ç”¨ä¹ˆã€‚</p>
<p>å…ˆæ¥å›é¡¾ä¸€ä¸‹PromptEngineeringçš„8æ¡é«˜èƒ½å»ºè®®æœ‰å“ªäº›ï¼Ÿ</p>
<ol start="0">
<li>æŠŠAIå½“äººæ¥çœ‹</li>
<li>æä¾›å•ä¸€çš„ä»»åŠ¡</li>
<li>ä»»åŠ¡æè¿°æ¸…æ™°ä¸”å‡†ç¡®</li>
<li>ç»™å‡ºé€‚é‡å‚è€ƒæ ·ä¾‹</li>
<li>æ­£å‘æè¿°ä»»åŠ¡ä¿¡æ¯</li>
<li>ä¸è¦æä¾›è¿‡é•¿çš„prompt</li>
<li>æ ¹æ®ä»»åŠ¡ç±»å‹åˆ‡æ¢ä»»åŠ¡è§’è‰²</li>
<li>A/Bæµ‹è¯•è¿­ä»£æ‰¾åˆ°æœ€ä½³çš„prompt</li>
</ol>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šç”¨è¿™ä»½æ¸…å•ï¼Œé€æ¡å¯¹ç…§åˆ†æä¸€ä¸ªçœŸå® Prompt åœ¨ç¨‹åºä¸­çš„è¡¨ç°ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong> æœ¬ç« å†…å®¹å®é™…å·²æ¶‰åŠAgentå¼€å‘ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸»è¦å…³æ³¨Promptçš„ç¼–å†™é—®é¢˜ã€‚</p>
</blockquote>
<h3 data-id="heading-2">æ–°é—»åŠ©æ‰‹Promptç¤ºä¾‹å·¥ç¨‹</h3>
<h4 data-id="heading-3">éœ€æ±‚æè¿°</h4>
<p>ç°åœ¨æŸå…¬å¸è¦å¼€å‘ä¸€ä¸ªæ–°é—»åŠ©æ‰‹ï¼Œè¿™ä¸ªæ–°é—»åŠ©æ‰‹ä¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„å…³é”®è¯ï¼Œä»äº’è”ç½‘ä¸ŠæŠ“å–ç›¸å…³çš„æ–°é—»ï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<h4 data-id="heading-4">Codeç¤ºä¾‹</h4>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ–°é—»åŠ©æ‰‹ï¼ŒåŸºäºLLMçš„æœç´¢èƒ½åŠ›ï¼Œå®ç°æ–°é—»æŸ¥è¯¢åŠæ ¼å¼åŒ–è¾“å‡ºï¼Œæ¥æˆ‘ä»¬åˆ†æä¸€ä¸‹ä»£ç ä¸­æ‰€çŠ¯çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éå®Œæ•´ä»£ç ï¼Œä¸»è¦åŒ…æ‹¬å…³é”®ä»£ç ï¼Œå®Œæ•´è§gitcodeä»“åº“</span>
<span class="hljs-comment"># https://gitcode.com/miasdz/ai-column-code.git</span>

sys_prompt = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªæ–°é—»åŠ©æ‰‹ï¼Œè´Ÿè´£è¿›è¡Œæ–°é—»ä¿¡æ¯æŸ¥è¯¢å¹¶æ ¼å¼åŒ–è¾“å‡ºã€‚

# è¾“å‡ºè¦æ±‚
## è¾“å‡ºæ ¼å¼
ä»¥JSONæ ¼å¼ä»…è¾“å‡ºæŸ¥è¯¢ç»“æœï¼Œç¡®ä¿è¾“å‡ºç»“æœå¯ä»¥è¢«pythonä¸­json.loadsåŠ è½½ä¸æŠ¥é”™ã€‚
## JSONå†…å®¹è¦æ±‚
0. jsonæ€»ä½“ç»“æ„ä¸ºliståµŒå¥—dictç»“æ„
1. æ¯ä¸ªdictç»“æ„è¡¨ç¤ºä¸€ä¸ªä¼ä¸šçš„æ–°é—»ä¿¡æ¯æŸ¥è¯¢ç»“æœ
2. æ¯ä¸ªdictç»“æ„å­˜åœ¨ä¸¤ä¸ªkeyï¼Œnameå’Œnews
3. name keyå¯¹åº”valueä¸ºä¼ä¸šåç§°ï¼Œvalueå€¼ç±»å‹ä¸ºstring
4. news keyå¯¹åº”valueå€¼ä¸ºæ–°é—»åˆ—è¡¨ï¼Œvalueå€¼ç±»å‹ä¸ºlistï¼Œlistçš„æ¯ä¸€é¡¹å€¼ç±»å‹ä¸ºdict
5. ä¼ä¸šæ–°é—»ä¿¡æ¯æŸ¥è¯¢ç»“æœçš„listçš„æ¯ä¸€ä¸ªdictç±»å‹çš„å€¼åŒ…æ‹¬ä¸‰ä¸ªè¦ç´ ï¼šdateï¼ˆæ—¥æœŸï¼‰ã€new_typeï¼ˆæ–°é—»ç±»å‹ï¼‰ã€newsï¼ˆæ–°é—»ä¿¡æ¯ï¼‰
6. new_typeç±»å‹åŒ…æ‹¬ï¼š
- é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»
- äº§å“/æŠ€æœ¯åˆ›æ–°ç±»
- ä¼ä¸šæˆå°±/è£èª‰è®¤å¯ç±»
- äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»
- åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»
- ç¤¾ä¼šè´£ä»»/ESG/å…¬ç›Šç±»
- æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»
- æ‹›æ ‡ã€é‡‡è´­å…¬å‘Šç±»
## ç¤ºä¾‹
[
    {
      "name":"xxä¼ä¸š",
      "news":[
        {
            "date":"2026å¹´1æœˆ12æ—¥",
            "new_type":"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»",
            "news": "xxxå…¬å¸å› xxxä¸šåŠ¡è¿è§„å¼€å±•è¢«å¤„ç½š1000ä¸‡å…ƒã€‚"
        },
        {
            "date":"2026å¹´1æœˆ5æ—¥",
            "new_type":"é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»",
            "news": "xxxå…¬å¸ä¸yyyå…¬å¸è¾¾æˆæˆ˜ç•¥åˆä½œã€‚"
        },
      ]
    },
    {
      "name":"zzä¼ä¸š",
      "news":[
        {
            "date":"2026å¹´1æœˆ18æ—¥",
            "new_type":"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»",
            "news": "zzä¼ä¸šå› xxxä¸šåŠ¡è¿è§„å¼€å±•è¢«è¡Œæ”¿å¤„ç½š85ä¸‡å…ƒã€‚"
        },
        {
            "date":"2026å¹´1æœˆ19æ—¥",
            "new_type":"äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»",
            "news": "zzä¼ä¸šæ–°ä»»å‘½æ€»ç»ç†uuã€‚"
        },
      ]
    }
]
"""</span>

user_prompt = <span class="hljs-string">"""
æŸ¥è¯¢å±±è¥¿é“¶è¡Œå’Œæ™‹å•†é“¶è¡Œè¿‘æœŸçš„5æ¡æ–°é—»
"""</span>

<span class="hljs-comment"># å¯¹è¯æ¶ˆæ¯</span>
messages = [
    {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>,
        <span class="hljs-string">"content"</span>: sys_prompt
    },
    {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-string">"content"</span>: user_prompt
    }
]

<span class="hljs-comment"># è°ƒç”¨llmæ¥å£</span>
chat_completion = client.chat.completions.create(
    model=model,
    messages=messages,
    extra_body={
        <span class="hljs-string">"enable_search"</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">"search_options"</span>: {
            <span class="hljs-string">"search_strategy"</span>: <span class="hljs-string">"max"</span>,  <span class="hljs-comment"># é…ç½®æœç´¢ç­–ç•¥ä¸ºé«˜æ€§èƒ½æ¨¡å¼</span>
            <span class="hljs-string">"forced_search"</span>: <span class="hljs-literal">True</span>
        }
    }
)
</code></pre>
<p><strong>...... æ­¤å¤„æ€è€ƒ3åˆ†é’Ÿ ......</strong></p>
<h3 data-id="heading-5">Promptåˆ†æ</h3>
<h4 data-id="heading-6">è¿è¡Œç»“æœ</h4>
<p>å…ˆçœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼Œçœ‹çœ‹ç¨‹åºæ˜¯å¦èƒ½æ­£å¸¸è¿”å›ç»“æœã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong> ä¸‹è¿°è¿è¡Œç»“æœä»£ç å®æµ‹ç»“æœæˆªå–ï¼Œå†æ¬¡æ‰§è¡Œæ— æ³•ä¿è¯å®Œå…¨ä¸€è‡´ã€‚</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026å¹´1æœˆ7æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œå‘å¸ƒâ€˜æ™‹æ™Ÿç†è´¢â€™ç†è´¢äº§å“å‡€å€¼å…¬å‘Šã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ31æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œå‘å¸ƒâ€˜æ™‹æ™Ÿç†è´¢â€™ç†è´¢äº§å“å‡€å€¼å…¬å‘Šã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ24æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œå‘å¸ƒâ€˜æ™‹æ™Ÿç†è´¢â€™ç†è´¢äº§å“å‡€å€¼å…¬å‘Šã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ18æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»»å‡¯ä¸ä¸´æ±¾å¸‚é•¿ç‹å»¶å³°åº§è°ˆã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ12æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‚¢æ¯…èµ´çœå†…é‡‘èåŒä¸šæ‹œè®¿äº¤æµã€‚"</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ15æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†æ¶ˆè´¹é‡‘èæˆè¢«æ‰§è¡Œäººç¬¬ä¸€å¤§è‚¡ä¸œä¸ºæ™‹å•†é“¶è¡Œã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´12æœˆ10æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿æœ€æ–°æ‰¹å¤ï¼å¤šå®¶é‡‘èæœºæ„é«˜ç®¡ä»»èŒè·æ‰¹ã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´11æœˆ30æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œå…šå§”å‰¯ä¹¦è®°ã€è¡Œé•¿(ä»£)é‚¢æ¯…å¸¦é˜Ÿèµ´å¤ªé‡é›†å›¢å¼€å±•ä¸“é¡¹è°ƒç ”ã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´11æœˆ30æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œå…šå§”å‰¯ä¹¦è®°ã€å‰¯è‘£äº‹é•¿ã€è¡Œé•¿æé¢–è€€æ‹Ÿè¿›ä¸€æ­¥ä½¿ç”¨ã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´11æœˆ28æ—¥"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å±±è¥¿é“¶è¡Œæ–°å¢é«˜ç®¡äººäº‹å˜åŠ¨å¼•å…³æ³¨ã€‚"</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f96070bbbf5411798f90187b69b761d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54y_54y_6ZW_5oiQ6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769925029&amp;x-signature=iBBkdr9fOdkIDYcAUlN4bvD3XDE%3D" alt="jsonæ ¡éªŒ" loading="lazy"/></p>
<p>è§‚å¯Ÿä¸Šè¿°ç»“æœï¼Œpromptè¦æ±‚çš„jsonæ ¼å¼æ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯ä»å†…å®¹ä¸Šåˆ†æä¼šå‘ç°æ˜æ˜¾çš„é”™è¯¯ï¼š</p>
<ol>
<li>åŒä¸€ä¸ªäººçš„åå­—å‡ºç°åœ¨äº†ä¸¤å®¶ä¼ä¸šå†…ï¼Œç¨å¾®äº†è§£ä¸€ä¸‹æ˜¯é”™è¯¯æ–°é—»</li>
<li>æˆ‘è¦æ±‚çš„æ˜¯è¿‘æœŸæ–°é—»ï¼Œæˆªè‡³æˆ‘å†™ä½œæ—¶é—´2026å¹´1æœˆ19æ—¥ï¼Œè¿”å›çš„æ–°é—»å‡ ä¹å…¨éƒ½æ˜¯25å¹´æœ«çš„ï¼Œè¿‘æœŸç›®æ ‡æ•ˆæœå·®</li>
<li>æ–°é—»ä¸å…¬å¸å…³è”é”™è¯¯ï¼ŒAå…¬å¸æ–°é—»å½’ç±»åˆ°Bå…¬å¸</li>
<li>ä»newså­—æ®µä¸­çœ‹ä¸å‡ºæ¥ä¼ä¸šä¸è¿™æ¡æ–°é—»çš„å…³ç³»</li>
<li>æ–°é—»ç±»å‹é”™è¯¯ï¼Œå¦‚â€œé‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»â€</li>
</ol>
<h4 data-id="heading-7">é—®é¢˜åˆ†æ</h4>
<p>åŸºäºå‰é¢çš„å»ºè®®ï¼Œæˆ‘ä»¬é€æ¡åˆ†æä¸€ä¸‹è¿™æ®µä¹ä¸€çœ‹è¿˜ä¸é”™çš„promptï¼Œå­˜åœ¨<strong>ä»€ä¹ˆé—®é¢˜</strong>ï¼Ÿ</p>
<h5 data-id="heading-8">1. æä¾›å•ä¸€çš„ä»»åŠ¡</h5>
<p>é—®é¢˜æŒ‡æ•°: â˜…â˜…â˜…â˜…â˜…</p>
<p><strong>åŸºäºä¸Šä¸€ç« èŠ‚å¯¹å•ä¸€ä»»åŠ¡çš„ç†è§£ï¼Œæˆ‘ä»¬å†çœ‹Promptï¼š</strong></p>
<p>SystemPrompté€»è¾‘ç‚¹ï¼š</p>
<ul>
<li>æ–°é—»ä¿¡æ¯æŸ¥è¯¢</li>
<li>æ–°é—»å½’ç±»</li>
<li>æ•°æ®æ ¼å¼åŒ–</li>
</ul>
<p>æ ¹æ®å•ä¸€ä»»åŠ¡ç†è§£ï¼Œsystem promptå·²ç»è¿åå•ä¸€ä»»åŠ¡çš„é™åˆ¶ï¼Œä¸åšè®¤çŸ¥çš„åˆ‡æ¢ï¼Œæ–°é—»ä¿¡æ¯æŸ¥è¯¢å’Œå½’ç±»å±äºä¸¤ç±»ä»»åŠ¡ <strong>ä¿¡æ¯æå–</strong> å’Œ <strong>åˆ†ç±»å†³ç­–ä»»åŠ¡</strong>ï¼Œä¸æ»¡è¶³å•ä¸€ä»»åŠ¡å®šä¹‰ã€‚</p>
<p>UserPrompté€»è¾‘ç‚¹:</p>
<ul>
<li>æŸ¥è¯¢å±±è¥¿é“¶è¡Œè¿‘æœŸæ–°é—»</li>
<li>æŸ¥è¯¢æ™‹å•†é“¶è¡Œè¿‘æœŸæ–°é—»</li>
<li>è¿‘æœŸæ˜¯ä»€ä¹ˆæ—¶å€™[éšæ€§ä»»åŠ¡]</li>
<li>æ–°é—»ç­›é€‰</li>
</ul>
<p>å¯¹äºUserPromptï¼Œè¦æ±‚åŒæ—¶æŸ¥è¯¢ä¸¤ä¸ªä¼ä¸šçš„ä¿¡æ¯ï¼Œæ¶‰åŠäº†ä¸¤ä¸ªä¿¡æ¯èšåˆä¸»é¢˜ï¼Œä¹Ÿä¸ç¬¦åˆå•ä¸€ä»»åŠ¡å®šä¹‰ã€‚</p>
<p>æ ¹æ®æ‰§è¡Œç»“æœï¼Œç»¼åˆSystemPromptå’ŒUserPromptï¼Œç»è¿‡A/Bæµ‹è¯•ï¼Œä¸»è¦é—®é¢˜ä½“ç°åœ¨UserPromptä¸­å­˜åœ¨ä¸¤ä¸ªä¿¡æ¯å®ä½“ï¼Œå…·ä½“è§æ–°Promptè¿è¡Œæ•ˆæœã€‚</p>
<h5 data-id="heading-9">2. ä»»åŠ¡æè¿°æ¸…æ™°ä¸”å‡†ç¡®</h5>
<p>ä»ç¨‹åºè¿è¡Œç»“æœçœ‹ï¼Œä¸»è¦çš„promptç”¨äºæè¿°æ•°æ®æ ¼å¼ï¼Œè¿”å›ç¬¦åˆé¢„æœŸè¦æ±‚ï¼Œä»æè¿°å±‚é¢è¶³å¤Ÿæ¸…æ™°ï¼Œæ»¡è¶³è¯¥é¡¹ã€‚</p>
<h5 data-id="heading-10">3. ç»™å‡ºé€‚é‡å‚è€ƒæ ·ä¾‹</h5>
<p>JSONæ ¼å¼æ­£ç¡®ï¼Œdemoä¸­ç»™äº†æ˜ç¡®çš„ç¤ºä¾‹ï¼Œæ»¡è¶³è¯¥é¡¹ã€‚</p>
<h5 data-id="heading-11">4. æ­£å‘æè¿°ä»»åŠ¡ä¿¡æ¯</h5>
<p>é—®é¢˜æŒ‡æ•°: â˜…â˜†â˜†â˜†â˜†â˜†</p>
<p>ç¡®ä¿è¾“å‡ºç»“æœå¯ä»¥è¢«pythonä¸­json.loadsåŠ è½½ä¸æŠ¥é”™ã€‚éæ­£é¢æè¿°ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œå¤§æ¨¡å‹å®æµ‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œä¹Ÿå¯ä»¥æ”¹ä¸ºæ›´åˆç†çš„æè¿°å¦‚"ç¬¦åˆæ ‡å‡† RFC 8259 è§„èŒƒçš„ JSON å­—ç¬¦ä¸²"ã€‚</p>
<h5 data-id="heading-12">5. ä¸è¦æä¾›è¿‡é•¿çš„prompt</h5>
<p>ä½¿ç”¨openaiçš„tokenizerè®¡ç®—çº¦åœ¨gpt4æ¨¡å‹ä¸‹çº¦600,ä»æ¨¡å‹å®¹é‡è§’åº¦çœ‹ä¸å¤šï¼Œè¯¥æ¡æ»¡è¶³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a077a532bbd344429f894587753cbb63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54y_54y_6ZW_5oiQ6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769925029&amp;x-signature=d0j6ZOD2SNWsAEAvw8RpiHf7QZU%3D" alt="tokenç»Ÿè®¡" loading="lazy"/></p>
<blockquote>
<p>å¯å‚è€ƒOpenAIå®˜æ–¹tokenizerè®¡ç®—ç»“æœï¼ˆä¸åŒæ¨¡å‹ç»“ç®—ç»“æœä¸åŒï¼Œä»…ä¾›å‚è€ƒï¼‰</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Ftokenizer" target="_blank" title="https://platform.openai.com/tokenizer" ref="nofollow noopener noreferrer">platform.openai.com/tokenizer</a></p>
</blockquote>
<h5 data-id="heading-13">6. æ ¹æ®ä»»åŠ¡ç±»å‹åˆ‡æ¢ä»»åŠ¡è§’è‰²</h5>
<p>Systmem Prompté¦–è¡Œå®šä¹‰äº†ä»»åŠ¡è§’è‰²ï¼Œè¯¥æ¡æ»¡è¶³ã€‚</p>
<h5 data-id="heading-14">7. A/Bæµ‹è¯•è¿­ä»£æ‰¾åˆ°æœ€ä½³çš„prompt</h5>
<p>A/Bæµ‹è¯•è¿­ä»£å±äºæŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ä¿®æ”¹promptæµ‹è¯•çš„è¿‡ç¨‹æ»¡è¶³æ­¤æ¡ã€‚</p>
<h3 data-id="heading-15">æ”¹é€ éªŒè¯</h3>
<h4 data-id="heading-16">æ–°ç‰ˆPrompt</h4>
<pre><code class="hljs language-python" lang="python">sys_prompt = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªæ–°é—»åŠ©æ‰‹ï¼Œè´Ÿè´£è¿›è¡Œæ–°é—»ä¿¡æ¯æŸ¥è¯¢å¹¶æ ¼å¼åŒ–è¾“å‡ºã€‚

# è¾“å‡ºè¦æ±‚
## è¾“å‡ºæ ¼å¼
ä»¥JSONæ ¼å¼ä»…è¾“å‡ºæŸ¥è¯¢ç»“æœï¼Œç¡®ä¿è¾“å‡ºç»“æœç¬¦åˆæ ‡å‡† RFC 8259 è§„èŒƒçš„ JSON å­—ç¬¦ä¸²ã€‚
## JSONå†…å®¹è¦æ±‚
1. JSONç»“æ„å­˜åœ¨ä¸¤ä¸ªkeyï¼Œnameå’Œnews
2. name keyå¯¹åº”valueä¸ºä¼ä¸šåç§°ï¼Œvalueå€¼ç±»å‹ä¸ºstring
3. news keyå¯¹åº”valueå€¼ä¸ºæ–°é—»åˆ—è¡¨ï¼Œvalueå€¼ç±»å‹ä¸ºlistï¼Œlistçš„æ¯ä¸€é¡¹å€¼ç±»å‹ä¸ºdict
4. ä¼ä¸šæ–°é—»ä¿¡æ¯æŸ¥è¯¢ç»“æœçš„listçš„æ¯ä¸€ä¸ªdictç±»å‹çš„å€¼åŒ…æ‹¬ä¸‰ä¸ªè¦ç´ ï¼šdateï¼ˆæ—¥æœŸï¼‰ã€new_typeï¼ˆæ–°é—»ç±»å‹ï¼‰ã€new_infoï¼ˆæ–°é—»ä¿¡æ¯ï¼‰
5. new_typeç±»å‹åŒ…æ‹¬ï¼š
- é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»
- äº§å“/æŠ€æœ¯åˆ›æ–°ç±»
- ä¼ä¸šæˆå°±/è£èª‰è®¤å¯ç±»
- äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»
- åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»
- ç¤¾ä¼šè´£ä»»/ESG/å…¬ç›Šç±»
- æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»
- æ‹›æ ‡ã€é‡‡è´­å…¬å‘Šç±»
## ç¤ºä¾‹
{
  "name":"xxä¼ä¸š",
  "news":[
    {
        "date":"2026å¹´1æœˆ12æ—¥",
        "new_type":"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»",
        "news": "xxxå…¬å¸å› xxxä¸šåŠ¡è¿è§„å¼€å±•è¢«å¤„ç½š1000ä¸‡å…ƒã€‚"
    },
    {
        "date":"2026å¹´1æœˆ5æ—¥",
        "new_type":"é‡å¤§äº‹ä»¶/æˆ˜ç•¥åŠ¨æ€ç±»",
        "news": "xxxå…¬å¸ä¸yyyå…¬å¸è¾¾æˆæˆ˜ç•¥åˆä½œã€‚"
    },
  ]
}
# çº¦æŸ
å½“æœªæ£€ç´¢åˆ°å¯éªŒè¯çš„æœ‰æ•ˆæ–°é—»æ—¶ï¼Œnews å­—æ®µåº”è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ []
"""</span>

user_prompt = <span class="hljs-string">"""
æŸ¥è¯¢æ™‹å•†é“¶è¡Œè¿‘æœŸçš„5æ¡æ–°é—»
"""</span>
</code></pre>
<h4 data-id="heading-17">å®æµ‹ç»“æœ</h4>
<p>å†çœ‹æ–°promptæµ‹è¯•ç»“æœï¼Œåœ¨å•ä¸€ä¿¡æ¯ä¸»ä½“ä¸‹ï¼Œç»“æœå¯ç”¨ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026å¹´1æœˆ16æ—¥"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸2026å¹´ç¬¬006æœŸåŒä¸šå­˜å•å‘è¡Œæƒ…å†µå…¬å‘Šã€‚"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026å¹´1æœˆ14æ—¥"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸2026å¹´ç¬¬004æœŸåŒä¸šå­˜å•å³æ—¥èµ·å¼€å§‹åœ¨é“¶è¡Œé—´å€ºåˆ¸å¸‚åœºäº¤æ˜“æµé€šã€‚"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026å¹´1æœˆ6æ—¥"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆè§„ã€é£é™©ä¸ç›‘ç®¡ç±»"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œå‘å¸ƒã€Šå…³äºåŠ å¼ºä¸ªäººé“¶è¡Œè´¦æˆ·å®‰å…¨ç®¡ç†çš„å…¬å‘Šã€‹ã€‚"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´11æœˆ28æ—¥"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ—¥å¸¸è¿è¥ä¸ä¸šåŠ¡åŠ¨æ€ç±»"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œå¬å¼€2025å¹´å››å­£åº¦ç»è¥å·¥ä½œä¼šã€‚"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025å¹´10æœˆ29æ—¥"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"new_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äººäº‹ä¸ç»„ç»‡å˜åŠ¨ç±»"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"news"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ™‹å•†é“¶è¡Œå¯åŠ¨2026å¹´åº¦æ ¡å›­æ‹›è˜ï¼Œè®¡åˆ’æ‹›è˜11äººã€‚"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-18">ç»§ç»­æ”¹è¿›æ€è·¯</h3>
<h4 data-id="heading-19">åˆå§‹éœ€æ±‚å¦‚ä½•æ»¡è¶³ï¼Ÿ</h4>
<p>å†ç¿»å›æ¥çœ‹user_promptï¼Œè¦æ±‚æŸ¥è¯¢ä¸¤ä¸ªä¿¡æ¯ä¸»ä½“çš„æ–°é—»ï¼Œä¸Šè¿°ä¼˜åŒ–åçš„promptä»…æŸ¥è¯¢ä¸€ä¸ªä¸»ä½“å¥½ç”¨ï¼Œé‚£å¤šä¸ªæ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™å°±æ¶‰åŠå·¥ä½œæµçš„å¼€å‘ï¼š</p>
<ol>
<li>ç”¨æˆ·æ„å›¾è¯†åˆ«ï¼šé€šè¿‡ç”¨æˆ·promptæ‘˜å–åœ¨æ–°é—»æŸ¥è¯¢åœºæ™¯ä¸‹çš„æŸ¥è¯¢ä¸»ä½“æœ‰å‡ ä¸ª</li>
<li>æ ¹æ®è·å–å‡ºçš„æŸ¥è¯¢ä¸»ä½“ï¼Œå¤šæ¬¡è°ƒç”¨æ–°é—»æŸ¥è¯¢æœåŠ¡</li>
<li>èšåˆç»“æœ</li>
</ol>
<h4 data-id="heading-20">æŸ¥è¯¢è´¨é‡ä¸æ»¡è¶³ã€æ–°é—»æ€»ç»“ä¸æ»¡è¶³æ€ä¹ˆåŠ</h4>
<p>ç°åœ¨ä½¿ç”¨çš„æ˜¯å¤§æ¨¡å‹æä¾›çš„æŸ¥è¯¢æœåŠ¡ï¼Œå¦‚æœéœ€è¦ç›¸å¯¹ç¨³å®šçš„æŸ¥è¯¢æ•°æ®æºï¼Œé‚£å°±éœ€è¦ä¾èµ–å¤–éƒ¨æœåŠ¡äº†ï¼Œæ¯”å¦‚ç§˜å¡”æœç´¢APIã€ç™¾åº¦æœç´¢APIç”šè‡³æ˜¯å¤–éƒ¨ç¨³å®šæ•°æ®æºçš„æ•°æ®é‡‡è´­ç­‰æ–¹å¼æ¥æå‡æ•°æ®è´¨é‡ã€‚</p>
<p>æ­¤æ—¶åšæ³•å°±å˜æˆäº†ï¼š</p>
<ol>
<li>ç”¨æˆ·æ„å›¾è¯†åˆ«è·å–æŸ¥è¯¢ä¸»ä½“</li>
<li>FuncationCallingè·å–å¤–éƒ¨æ•°æ®</li>
<li>é€šè¿‡LLMè¿›è¡Œæ–°é—»æ€»ç»“åŠå½’ç±»</li>
<li>åŸºäºæ–°é—»æ€»ç»“åŠå½’ç±»ç»“æœè¿›è¡Œä¿¡æ¯æå–ä¸ºJSONç»“æ„</li>
<li>å¤šè½®æŸ¥è¯¢çš„ä¿¡æ¯èšåˆ</li>
</ol>
<p>è¿™äº›æµç¨‹çš„çªœè¿å®Œæˆä¸€ä¸ªå®Œæ•´çš„æ–°é—»é¢†åŸŸæŸ¥è¯¢æœåŠ¡ï¼Œè¯¦æƒ…æŸ¥çœ‹gitcodeæºç ã€‚</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fmiasdz%2Fai-column-code.git" target="_blank" title="https://gitcode.com/miasdz/ai-column-code.git" ref="nofollow noopener noreferrer">gitcode.com/miasdz/ai-câ€¦</a></p>
</blockquote>
<p>é’ˆå¯¹LLMå•ä¸€ä»»åŠ¡ï¼Œé äººè¯†åˆ«å¯èƒ½å› ç»éªŒä¸è¶³æˆ–è€…æ€ç»´å®šå¼æ— æ³•å‡†ç¡®åˆ†æï¼Œåç»­å°†å¼€å‘Promptå•ä¸€åˆ†æå™¨Agentï¼Œç”¨äºä¼˜åŒ–Agentçš„Promptå‡†å¤‡ã€‚</p>
<h3 data-id="heading-21">ä¸‹ä¸€ç« é¢„å‘Š</h3>
<p>ä¸‹ä¸€ç« èŠ‚å°†é€šè¿‡ä»‹ç»PromptEngineeringä¸­æ€ç»´é“¾ã€æ€ç»´æ ‘ã€è‡ªæ´½æ€§ç­‰è¿›é˜¶æŠ€å·§ã€‚</p>
<hr/>
<p align="center">å…³æ³¨æœ¬ä¸“æ ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æŒæ¡æ–¹æ³•ã€å®è·µè½åœ°ã€å…±åŒå‘å±•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€React-3/Lesson76(2025-12-18)ã€‘React Hooks ä¸å‡½æ•°å¼ç»„ä»¶å¼€å‘è¯¦è§£ğŸ§ ]]></title>    <link>https://juejin.cn/post/7599450177057718282</link>    <guid>https://juejin.cn/post/7599450177057718282</guid>    <pubDate>2026-01-26T10:11:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599450177057718282" data-draft-id="7599528186586382346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€React-3/Lesson76(2025-12-18)ã€‘React Hooks ä¸å‡½æ•°å¼ç»„ä»¶å¼€å‘è¯¦è§£ğŸ§ "/> <meta itemprop="keywords" content="React.js,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-26T10:11:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€React-3/Lesson76(2025-12-18)ã€‘React Hooks ä¸å‡½æ•°å¼ç»„ä»¶å¼€å‘è¯¦è§£ğŸ§ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:11:23.000Z" title="Mon Jan 26 2026 10:11:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸ§ åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒReact å·²ç»å…¨é¢æ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ã€‚é€šè¿‡ <strong>Hooks</strong>ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨çŠ¶æ€ï¼ˆstateï¼‰å’Œç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æä½ æ‰€æ¥è§¦çš„ä»£ç ç‰‡æ®µï¼Œå¹¶ç³»ç»Ÿæ€§åœ°è¡¥å……ç›¸å…³çŸ¥è¯†ï¼Œæ¶µç›– <code>useState</code>ã€<code>useEffect</code>ã€çº¯å‡½æ•°ã€å‰¯ä½œç”¨ã€ç»„ä»¶æŒ‚è½½/æ›´æ–°/å¸è½½æœºåˆ¶ã€å“åº”å¼çŠ¶æ€ç®¡ç†ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ” useStateï¼šè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰çŠ¶æ€</h2>
<p>åœ¨ä¼ ç»Ÿ React ä¸­ï¼Œåªæœ‰ç±»ç»„ä»¶æ‰èƒ½æ‹¥æœ‰çŠ¶æ€ï¼ˆstateï¼‰ã€‚è€Œ <code>useState</code> Hook çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†è¿™ä¸€é™åˆ¶ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
</code></pre>
<p>è¿™è¡Œä»£ç åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>å£°æ˜ä¸€ä¸ªåä¸º <code>num</code> çš„çŠ¶æ€å˜é‡ï¼›</li>
<li>æä¾›ä¸€ä¸ªåä¸º <code>setNum</code> çš„å‡½æ•°ç”¨äºæ›´æ–°è¯¥çŠ¶æ€ï¼›</li>
<li>åˆå§‹å€¼ä¸º <code>0</code>ã€‚</li>
</ol>
<h3 data-id="heading-1">âœ¨ åˆå§‹åŒ–æ”¯æŒå‡½æ•°å½¢å¼ï¼ˆæƒ°æ€§åˆå§‹åŒ–ï¼‰</h3>
<p>å½“åˆå§‹çŠ¶æ€éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª<strong>åˆå§‹åŒ–å‡½æ•°</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> num1 = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> num2 = <span class="hljs-number">2</span> + <span class="hljs-number">3</span>;
  <span class="hljs-keyword">return</span> num1 + num2; <span class="hljs-comment">// è¿”å› 6</span>
});
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯<strong>åŒæ­¥çš„çº¯å‡½æ•°</strong>ï¼Œä¸èƒ½åŒ…å«å¼‚æ­¥æ“ä½œï¼ˆå¦‚ <code>fetch</code>ï¼‰ï¼Œå› ä¸º React éœ€è¦ç¡®ä¿çŠ¶æ€çš„ç¡®å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ğŸ”„ çŠ¶æ€æ›´æ–°å‡½æ•°æ”¯æŒå›è°ƒå½¢å¼</h3>
<p>æ›´æ–°çŠ¶æ€æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å‚æ•°æ˜¯ä¸Šä¸€æ¬¡çš„çŠ¶æ€å€¼ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prevNum</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(prevNum); <span class="hljs-comment">// æ‰“å°æ—§å€¼</span>
  <span class="hljs-keyword">return</span> prevNum + <span class="hljs-number">1</span>;   <span class="hljs-comment">// è¿”å›æ–°å€¼</span>
});
</code></pre>
<p>è¿™ç§æ–¹å¼åœ¨<strong>æ‰¹é‡æ›´æ–°</strong>æˆ–<strong>å¼‚æ­¥ç¯å¢ƒä¸­</strong>ç‰¹åˆ«å®‰å…¨ï¼Œé¿å…å› é—­åŒ…æ•è·æ—§çŠ¶æ€è€Œå¯¼è‡´é”™è¯¯ã€‚</p>
<hr/>
<h2 data-id="heading-3">âš™ï¸ useEffectï¼šå¤„ç†å‰¯ä½œç”¨çš„ç‘å£«å†›åˆ€</h2>
<p><code>useEffect</code> æ˜¯ React ä¸­å¤„ç†<strong>å‰¯ä½œç”¨ï¼ˆside effectsï¼‰<strong>çš„æ ¸å¿ƒ Hookã€‚æ‰€è°“â€œå‰¯ä½œç”¨â€ï¼Œæ˜¯æŒ‡é‚£äº›</strong>ä¸åœ¨çº¯å‡½æ•°èŒƒç•´å†…</strong>çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ•°æ®è·å–ï¼ˆå¦‚ API è¯·æ±‚ï¼‰</li>
<li>æ‰‹åŠ¨ DOM æ“ä½œ</li>
<li>è®¢é˜…äº‹ä»¶ï¼ˆå¦‚ WebSocketï¼‰</li>
<li>å¯åŠ¨å®šæ—¶å™¨ï¼ˆ<code>setInterval</code> / <code>setTimeout</code>ï¼‰</li>
</ul>
<h3 data-id="heading-4">ğŸ“Œ åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'effect'</span>);
}, [num]);
</code></pre>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå‰¯ä½œç”¨å‡½æ•°ï¼ˆåœ¨æ¸²æŸ“åæ‰§è¡Œï¼‰</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼š<strong>ä¾èµ–æ•°ç»„ï¼ˆdependency arrayï¼‰</strong></li>
</ul>
<h3 data-id="heading-5">ğŸ” ä¾èµ–é¡¹çš„ä¸‰ç§æƒ…å†µ</h3>

























<table><thead><tr><th>ä¾èµ–é¡¹</th><th>è¡Œä¸º</th><th>ç±»æ¯” Vue ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td><code>[]</code>ï¼ˆç©ºæ•°ç»„ï¼‰</td><td>ä»…åœ¨ç»„ä»¶<strong>æŒ‚è½½å</strong>æ‰§è¡Œä¸€æ¬¡</td><td><code>onMounted</code></td></tr><tr><td><code>[a, b]</code></td><td>å½“ <code>a</code> æˆ– <code>b</code> <strong>å˜åŒ–æ—¶</strong>é‡æ–°æ‰§è¡Œ</td><td><code>watch([a, b])</code></td></tr><tr><td><strong>æ— ä¾èµ–é¡¹</strong>ï¼ˆçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼‰</td><td><strong>æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ</strong></td><td><code>onMounted</code> + <code>onUpdated</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ åœ¨ React 18 çš„ <code>&lt;StrictMode&gt;</code> ä¸‹ï¼Œå¼€å‘ç¯å¢ƒä¼š<strong>æ•…æ„åŒæ¬¡è°ƒç”¨</strong> <code>useEffect</code>ï¼ˆä¸å«ä¾èµ–æˆ–ä¾èµ–ä¸ºç©ºæ—¶ï¼‰ï¼Œä»¥å¸®åŠ©å¼€å‘è€…å‘ç°æ½œåœ¨çš„å‰¯ä½œç”¨é—®é¢˜ï¼ˆå¦‚æœªæ­£ç¡®æ¸…ç†èµ„æºï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-6">ğŸ§¹ æ¸…ç†å‰¯ä½œç”¨ï¼šè¿”å›æ¸…ç†å‡½æ•°</h3>
<p>è®¸å¤šå‰¯ä½œç”¨éœ€è¦åœ¨ç»„ä»¶æ›´æ–°å‰æˆ–å¸è½½æ—¶<strong>æ¸…ç†</strong>ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼æˆ–é‡å¤è®¢é˜…ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num);
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'remove'</span>);
    <span class="hljs-built_in">clearInterval</span>(timer); <span class="hljs-comment">// æ¸…ç†å®šæ—¶å™¨</span>
  };
}, [num]);
</code></pre>
<ul>
<li>è¿”å›çš„å‡½æ•°ä¼šåœ¨<strong>ä¸‹ä¸€æ¬¡ effect æ‰§è¡Œå‰</strong>è°ƒç”¨ï¼Œæˆ–åœ¨<strong>ç»„ä»¶å¸è½½æ—¶</strong>è°ƒç”¨ã€‚</li>
<li>è¿™åˆ©ç”¨äº†<strong>é—­åŒ…</strong>æœºåˆ¶ï¼šæ¸…ç†å‡½æ•°èƒ½è®¿é—®åˆ°åˆ›å»ºå®ƒæ—¶çš„ <code>timer</code> å˜é‡ã€‚</li>
</ul>
<blockquote>
<p>âœ… æœ€ä½³å®è·µï¼š<strong>æ‰€æœ‰å¼€å¯çš„èµ„æºï¼ˆå®šæ—¶å™¨ã€è®¢é˜…ã€ç›‘å¬å™¨ï¼‰éƒ½å¿…é¡»æœ‰å¯¹åº”çš„æ¸…ç†é€»è¾‘ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ§¼ çº¯å‡½æ•° vs å‰¯ä½œç”¨</h2>
<p>ç†è§£ <code>useEffect</code> çš„è®¾è®¡å“²å­¦ï¼Œå¿…é¡»å…ˆç†è§£**çº¯å‡½æ•°ï¼ˆPure Functionï¼‰**çš„æ¦‚å¿µã€‚</p>
<h3 data-id="heading-8">âœ… çº¯å‡½æ•°çš„ç‰¹ç‚¹</h3>
<ul>
<li>ç›¸åŒè¾“å…¥ â†’ ç›¸åŒè¾“å‡º</li>
<li><strong>æ— å‰¯ä½œç”¨</strong>ï¼šä¸ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ã€ä¸å‘èµ·ç½‘ç»œè¯·æ±‚ã€ä¸æ“ä½œ DOM</li>
<li>æ— éšæœºæ€§ï¼ˆå¦‚ <code>Math.random()</code>ï¼‰</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âœ… çº¯å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">x, y</span>) =&gt; x + y;
</code></pre>
<h3 data-id="heading-9">âŒ éçº¯å‡½æ•°ï¼ˆæœ‰å‰¯ä½œç”¨ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¿®æ”¹ä¼ å…¥çš„æ•°ç»„ï¼ˆæ”¹å˜å¤–éƒ¨çŠ¶æ€ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">nums</span>) {
  nums.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// å‰¯ä½œç”¨ï¼</span>
  <span class="hljs-keyword">return</span> nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre, cur</span>) =&gt;</span> pre + cur, <span class="hljs-number">0</span>);
}
</code></pre>
<p>React ç»„ä»¶æœ¬èº«åº”å°½å¯èƒ½æ¥è¿‘çº¯å‡½æ•°ï¼š<strong>props â†’ JSX</strong>ã€‚ä½†ç°å®åº”ç”¨ç¦»ä¸å¼€å‰¯ä½œç”¨ï¼Œå› æ­¤ <code>useEffect</code> è¢«è®¾è®¡ä¸º<strong>éš”ç¦»å‰¯ä½œç”¨çš„æ²™ç›’</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ§© ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­çš„æ˜ å°„</h2>





















<table><thead><tr><th>Class ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</th><th>å‡½æ•°å¼ç»„ä»¶ï¼ˆHooksï¼‰</th></tr></thead><tbody><tr><td><code>componentDidMount</code></td><td><code>useEffect(() =&gt; {}, [])</code></td></tr><tr><td><code>componentDidUpdate</code></td><td><code>useEffect(() =&gt; {}, [dep])</code></td></tr><tr><td><code>componentWillUnmount</code></td><td><code>useEffect(() =&gt; { return () =&gt; {} }, [])</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ”„ æ³¨æ„ï¼š<code>useEffect</code> <strong>åˆå¹¶äº†æŒ‚è½½ã€æ›´æ–°ã€å¸è½½ä¸‰ä¸ªé˜¶æ®µ</strong>ï¼Œé€šè¿‡ä¾èµ–é¡¹å’Œè¿”å›å‡½æ•°å®ç°ç²¾ç»†æ§åˆ¶ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ğŸ—ï¸ é¡¹ç›®ç»“æ„ä¸å…¥å£åˆ†æ</h2>
<h3 data-id="heading-12">ğŸ“„ <code>main.jsx</code>ï¼šåº”ç”¨å…¥å£</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<ul>
<li>ä½¿ç”¨ React 18 çš„ <strong><code>createRoot</code></strong> APIï¼ˆå¹¶å‘æ¨¡å¼ï¼‰</li>
<li>æ¸²æŸ“ <code>&lt;App /&gt;</code> åˆ° <code>#root</code> å®¹å™¨</li>
<li>æ³¨é‡Šæ‰çš„ <code>&lt;StrictMode&gt;</code> æ˜¯å¼€å‘è¾…åŠ©å·¥å…·ï¼Œç”¨äºæš´éœ²æ½œåœ¨é—®é¢˜ï¼ˆå¦‚é‡å¤ effectï¼‰</li>
</ul>
<h3 data-id="heading-13">ğŸ¨ æ ·å¼æ–‡ä»¶ <code>index.css</code> ä¸ <code>App.css</code></h3>
<ul>
<li>ä½¿ç”¨ CSS è‡ªå®šä¹‰å±æ€§ï¼ˆ<code>:root</code>ï¼‰å®ç°ä¸»é¢˜åˆ‡æ¢ï¼ˆäº®è‰²/æš—è‰²ï¼‰</li>
<li>å“åº”å¼è®¾è®¡ï¼ˆ<code>min-width: 320px</code>ï¼‰</li>
<li>æ‚¬åœåŠ¨ç”»ã€ç„¦ç‚¹æ ·å¼ç­‰å¢å¼ºç”¨æˆ·ä½“éªŒ</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ” æ·±å…¥ <code>Demo.jsx</code>ï¼šå‰¯ä½œç”¨ä¸æ¸…ç†</h2>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'123123'</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ onMounted</span>
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timer'</span>);
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'remove'</span>);
      <span class="hljs-built_in">clearInterval</span>(timer);
    };
  }, []); <span class="hljs-comment">// ä»…æŒ‚è½½æ—¶æ‰§è¡Œ</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å¶æ•°Demo<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<ul>
<li>å³ä½¿ <code>Demo</code> ç»„ä»¶è¢«å¤šæ¬¡æ¸²æŸ“ï¼ˆå› çˆ¶ç»„ä»¶ <code>App</code> æ›´æ–°ï¼‰ï¼Œç”±äºä¾èµ–é¡¹ä¸ºç©ºï¼Œ<strong>å®šæ—¶å™¨åªåˆ›å»ºä¸€æ¬¡</strong></li>
<li>å½“ <code>App</code> å¸è½½ <code>Demo</code>ï¼ˆå¦‚æ¡ä»¶æ¸²æŸ“åˆ‡æ¢ï¼‰ï¼Œæ¸…ç†å‡½æ•°ä¼šæ‰§è¡Œï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
</ul>
<hr/>
<h2 data-id="heading-15">ğŸ“Š çŠ¶æ€é©±åŠ¨ UIï¼šå“åº”å¼æ ¸å¿ƒ</h2>
<p>åœ¨ <code>App.jsx</code> ä¸­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">{num % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ? <span class="hljs-string">'å¶æ•°'</span> : <span class="hljs-string">'å¥‡æ•°'</span>}
</code></pre>
<p>è¿™ä½“ç°äº† React çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>UI æ˜¯çŠ¶æ€çš„å‡½æ•°</strong>ã€‚<br/>
æ¯å½“ <code>num</code> å˜åŒ–ï¼ŒReact ä¼šé‡æ–°æ‰§è¡Œç»„ä»¶å‡½æ•°ï¼Œç”Ÿæˆæ–°çš„ JSXï¼Œç„¶åé«˜æ•ˆåœ°æ›´æ–° DOMã€‚</p>
<hr/>
<h2 data-id="heading-16">ğŸš« ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ <code>useState</code> ä¸­ç›´æ¥å¼‚æ­¥åˆå§‹åŒ–ï¼Ÿ</h2>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é”™è¯¯ï¼useState ä¸æ”¯æŒå¼‚æ­¥åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(...);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
});
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>React éœ€è¦<strong>åŒæ­¥ç¡®å®š</strong>åˆå§‹çŠ¶æ€ï¼Œä»¥ä¾¿è¿›è¡Œåè°ƒï¼ˆreconciliationï¼‰</li>
<li>å¼‚æ­¥æ“ä½œç»“æœä¸ç¡®å®šï¼Œç ´åçº¯å‡½æ•°åŸåˆ™</li>
</ul>
<p>âœ… æ­£ç¡®åšæ³•ï¼šåœ¨ <code>useEffect</code> ä¸­è¯·æ±‚æ•°æ®</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">queryData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">setNum</span>(data));
}, []);
</code></pre>
<p>å…¶ä¸­ <code>queryData</code> æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚çš„å‡½æ•°ï¼ˆè§ <code>App.jsx</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">queryData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">666</span>), <span class="hljs-number">2000</span>);
  });
  <span class="hljs-keyword">return</span> data;
}
</code></pre>
<hr/>
<h2 data-id="heading-17">ğŸ§ª å¼€å‘è€…å·¥å…·ä¸è°ƒè¯•æŠ€å·§</h2>
<ul>
<li>åˆ©ç”¨ <code>console.log</code> è§‚å¯Ÿ effect æ‰§è¡Œæ—¶æœº</li>
<li>æ³¨æ„ Strict Mode ä¸‹çš„åŒæ¬¡è°ƒç”¨ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰</li>
<li>ä½¿ç”¨ React DevTools æ£€æŸ¥ç»„ä»¶çŠ¶æ€å’Œä¾èµ–</li>
</ul>
<hr/>
<h2 data-id="heading-18">âœ… æ€»ç»“ï¼šReact Hooks æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šç”¨ <code>useState</code> å£°æ˜å“åº”å¼çŠ¶æ€ï¼Œæ›´æ–°æ—¶ä¼˜å…ˆä½¿ç”¨å›è°ƒå½¢å¼</li>
<li><strong>å‰¯ä½œç”¨éš”ç¦»</strong>ï¼šæ‰€æœ‰éçº¯æ“ä½œæ”¾å…¥ <code>useEffect</code></li>
<li><strong>ä¾èµ–å£°æ˜</strong>ï¼šç²¾ç¡®åˆ—å‡º effect æ‰€ä¾èµ–çš„æ‰€æœ‰å˜é‡ï¼ˆESLint æ’ä»¶å¯è‡ªåŠ¨æ£€æµ‹ï¼‰</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼šåŠ¡å¿…åœ¨ effect ä¸­è¿”å›æ¸…ç†å‡½æ•°</li>
<li><strong>é¿å…å¼‚æ­¥åˆå§‹åŒ–</strong>ï¼šæ•°æ®è¯·æ±‚æ”¾åœ¨ <code>useEffect</code> ä¸­</li>
<li><strong>ç†è§£é—­åŒ…</strong>ï¼šeffect å’Œæ¸…ç†å‡½æ•°é€šè¿‡é—­åŒ…æ•è·å˜é‡ï¼Œæ³¨æ„ stale closure é—®é¢˜ï¼ˆå¯é€šè¿‡ ref è§£å†³ï¼‰</li>
</ol>
<hr/>
<p>é€šè¿‡ä»¥ä¸Šè¯¦å°½è§£æï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº† React Hooks çš„æ ¸å¿ƒæœºåˆ¶ä¸å·¥ç¨‹å®è·µã€‚è®°ä½ï¼š<strong>å‡½æ•°å¼ç»„ä»¶ + Hooks = ç°ä»£ React å¼€å‘çš„é»„é‡‘æ ‡å‡†</strong>ã€‚ç»§ç»­æ·±å…¥ï¼Œä½ å°†èƒ½æ„å»ºå‡ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤ã€å¯é¢„æµ‹çš„å‰ç«¯åº”ç”¨ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native ä¸­ Styled Components é…ç½®æŒ‡å—]]></title>    <link>https://juejin.cn/post/7599483794656985129</link>    <guid>https://juejin.cn/post/7599483794656985129</guid>    <pubDate>2026-01-26T10:17:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599483794656985129" data-draft-id="7599299048303493163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native ä¸­ Styled Components é…ç½®æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2026-01-26T10:17:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sera"/> <meta itemprop="url" content="https://juejin.cn/user/3870740938759965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native ä¸­ Styled Components é…ç½®æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3870740938759965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sera
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:17:00.000Z" title="Mon Jan 26 2026 10:17:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Native ä¸­ Styled Components é…ç½®æŒ‡å—</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Styled Componentsï¼Ÿ</h3>
<p>Styled Components æ˜¯ä¸€ä¸ª CSS-in-JS åº“ï¼Œè®©ä½ å¯ä»¥åœ¨ JavaScript/TypeScript ä»£ç ä¸­ç¼–å†™æ ·å¼ï¼Œå¹¶å°†æ ·å¼ä¸ç»„ä»¶ç´§å¯†ç»“åˆã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h4>
<p><strong>1. CSS-in-JS</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼</span>
<span class="hljs-keyword">const</span> styles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">container</span>: { <span class="hljs-attr">padding</span>: <span class="hljs-number">16</span> }
});

<span class="hljs-comment">// Styled Components æ–¹å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Container</span> = styled.<span class="hljs-property">View</span><span class="hljs-string">`
  padding: 16px;
`</span>;
</code></pre>
<p><strong>2. è‡ªåŠ¨æ ·å¼éš”ç¦»</strong>
æ¯ä¸ª styled component éƒ½æœ‰å”¯ä¸€çš„ class åï¼Œé¿å…æ ·å¼å†²çªï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">TouchableOpacity</span><span class="hljs-string">`...`</span>;
<span class="hljs-comment">// ç”Ÿæˆç±»ä¼¼ï¼š.Button-asdf1234 { ... }</span>
</code></pre>
<p><strong>3. ä¸»é¢˜æ”¯æŒ</strong>
å†…ç½®ä¸»é¢˜ç³»ç»Ÿï¼Œè½»æ¾å®ç°æ·±è‰²/æµ…è‰²ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Title</span> = styled.<span class="hljs-property">Text</span><span class="hljs-string">`
  color: <span class="hljs-subst">${props =&gt; props.theme.colors.text}</span>;
`</span>;
</code></pre>
<p><strong>4. åŠ¨æ€æ ·å¼</strong>
åŸºäº props åŠ¨æ€æ”¹å˜æ ·å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">TouchableOpacity</span>&lt;{ <span class="hljs-attr">variant</span>: <span class="hljs-string">'primary'</span> | <span class="hljs-string">'secondary'</span> }&gt;<span class="hljs-string">`
  background-color: <span class="hljs-subst">${props =&gt;
    props.variant === <span class="hljs-string">'primary'</span> ? <span class="hljs-string">'#007AFF'</span> : <span class="hljs-string">'#5856D6'</span>}</span>;
`</span>;
</code></pre>
<h4 data-id="heading-3">ä¼˜åŠ¿å¯¹æ¯”</h4>








































<table><thead><tr><th>ç‰¹æ€§</th><th>StyleSheet</th><th>Styled Components</th></tr></thead><tbody><tr><td>æ ·å¼éš”ç¦»</td><td>âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç†</td><td>âœ… è‡ªåŠ¨éš”ç¦»</td></tr><tr><td>ä¸»é¢˜æ”¯æŒ</td><td>âŒ éœ€è¦é¢å¤–é…ç½®</td><td>âœ… å†…ç½®æ”¯æŒ</td></tr><tr><td>åŠ¨æ€æ ·å¼</td><td>âš ï¸ æ¡ä»¶è¯­å¥å¤æ‚</td><td>âœ… ç®€æ´ç›´è§‚</td></tr><tr><td>TypeScript</td><td>âœ… æ”¯æŒ</td><td>âœ… å®Œæ•´ç±»å‹æ¨æ–­</td></tr><tr><td>æ ·å¼å¤ç”¨</td><td>âš ï¸ éœ€è¦æ‰‹åŠ¨åˆå¹¶</td><td>âœ… ç»§æ‰¿æœºåˆ¶</td></tr><tr><td>ç»„ä»¶å°è£…</td><td>âŒ æ ·å¼å’Œç»„ä»¶åˆ†ç¦»</td><td>âœ… æ ·å¼ä¸ç»„ä»¶ä¸€ä½“</td></tr></tbody></table>
<h3 data-id="heading-4">å¦‚ä½•é…ç½® Styled Components</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… styled-components</span>
yarn add styled-components

<span class="hljs-comment"># å®‰è£…ç±»å‹å®šä¹‰å’Œ Babel æ’ä»¶</span>
yarn add -D @types/styled-components babel-plugin-styled-components
</code></pre>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>styled-components</code>: æ ¸å¿ƒåº“</li>
<li><code>@types/styled-components</code>: TypeScript ç±»å‹å®šä¹‰</li>
<li><code>babel-plugin-styled-components</code>: ä¼˜åŒ–å¼€å‘ä½“éªŒå’Œæ€§èƒ½</li>
</ul>
<h4 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šé…ç½® Babel</h4>
<p>ç¼–è¾‘ <code>babel.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">presets</span>: [<span class="hljs-string">'module:@react-native/babel-preset'</span>],
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ... å…¶ä»–æ’ä»¶</span>
    [
      <span class="hljs-string">'babel-plugin-styled-components'</span>,
      {
        <span class="hljs-attr">displayName</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// å¼€å‘æ¨¡å¼ä¸‹æ˜¾ç¤ºç»„ä»¶å</span>
        <span class="hljs-attr">meaninglessFileNames</span>: [<span class="hljs-string">"index"</span>, <span class="hljs-string">"styles"</span>],
        <span class="hljs-attr">pure</span>: <span class="hljs-literal">true</span>,                     <span class="hljs-comment">// ç§»é™¤ä¸å¿…è¦çš„è¾…åŠ©ä»£ç </span>
      },
    ]
  ],
};
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>displayName: true</code> - å¼€å‘æ—¶åœ¨ React DevTools ä¸­æ˜¾ç¤ºç»„ä»¶åç§°</li>
<li><code>meaninglessFileNames</code> - å¿½ç•¥è¿™äº›æ–‡ä»¶åï¼Œä¸ç”Ÿæˆ class å</li>
<li><code>pure: true</code> - å¯ç”¨ tree-shaking ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šé…ç½® TypeScript ç±»å‹</h4>
<p>åˆ›å»º <code>app/types/styled-components-native.d.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-string">'styled-components/native'</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'styled-components/native'</span> {
  <span class="hljs-comment">// ä¸»é¢˜æ¨¡å¼ç±»å‹</span>
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ThemeModeType</span> = <span class="hljs-string">'dark'</span> | <span class="hljs-string">'light'</span>;

  <span class="hljs-comment">// é—´è·ç±»å‹</span>
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">SpacingType</span> = {
    <span class="hljs-attr">xs</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">sm</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">md</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">lg</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">xl</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">xxl</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">screenPadding</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">cardPadding</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">inputPadding</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">negSm</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">negMd</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">negLg</span>: <span class="hljs-built_in">number</span>;
  };

  <span class="hljs-comment">// å­—ä½“ç±»å‹</span>
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">FontSizeType</span> = {
    <span class="hljs-attr">xs</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">sm</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">base</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">lg</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">xl</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">xxl</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">xxxl</span>: <span class="hljs-built_in">number</span>;
  };

  <span class="hljs-keyword">type</span> <span class="hljs-title class_">FontWeightType</span> = {
    <span class="hljs-attr">regular</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">medium</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">semibold</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">bold</span>: <span class="hljs-built_in">number</span>;
  };

  <span class="hljs-keyword">type</span> <span class="hljs-title class_">TypographyType</span> = {
    <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">FontSizeType</span>;
    <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeightType</span>;
  };

  <span class="hljs-comment">// é¢œè‰²ç±»å‹</span>
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ColorsType</span> = {
    <span class="hljs-attr">primary</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">secondary</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">background</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">textWhite</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">success</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">warning</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">info</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">border</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">overlay</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">transparent</span>: <span class="hljs-built_in">string</span>;
  };

  <span class="hljs-comment">// ä¸»é¢˜æ¥å£</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DefaultTheme</span> {
    <span class="hljs-attr">mode</span>: <span class="hljs-title class_">ThemeModeType</span>;
    <span class="hljs-attr">colors</span>: <span class="hljs-title class_">ColorsType</span>;
    <span class="hljs-attr">spacing</span>: <span class="hljs-title class_">SpacingType</span>;
    <span class="hljs-attr">typography</span>: <span class="hljs-title class_">TypographyType</span>;
  }
}
</code></pre>
<h4 data-id="heading-8">ç¬¬å››æ­¥ï¼šé…ç½®è·¯å¾„åˆ«å</h4>
<p>æ›´æ–° <code>babel.config.js</code> å’Œ <code>tsconfig.json</code> ä¸­çš„åˆ«åé…ç½®ï¼š</p>
<p><strong>babel.config.js</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    [
      <span class="hljs-string">'module-resolver'</span>,
      {
        <span class="hljs-attr">root</span>: [<span class="hljs-string">'./app'</span>],
        <span class="hljs-attr">alias</span>: {
          <span class="hljs-string">'@'</span>: <span class="hljs-string">'./app'</span>,
          <span class="hljs-string">'@providers'</span>: <span class="hljs-string">'./app/providers'</span>,
          <span class="hljs-comment">// ... å…¶ä»–åˆ«å</span>
        },
      },
    ],
  ],
};
</code></pre>
<p><strong>tsconfig.json</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@providers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"app/providers"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"@providers/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"app/providers/*"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">ç¬¬äº”æ­¥ï¼šåˆ›å»ºä¸»é¢˜ç³»ç»Ÿ</h4>
<h5 data-id="heading-10">1. ä¸»é¢˜ç»“æ„</h5>
<p>åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">app/styles/theme/
â”œâ”€â”€ custom/
â”‚   â”œâ”€â”€ spacing.ts      <span class="hljs-comment"># é—´è·ç³»ç»Ÿ</span>
â”‚   â””â”€â”€ typography.ts   <span class="hljs-comment"># å­—ä½“ç³»ç»Ÿ</span>
â”œâ”€â”€ dark/
â”‚   â””â”€â”€ index.ts        <span class="hljs-comment"># æ·±è‰²ä¸»é¢˜é¢œè‰²</span>
â”œâ”€â”€ light/
â”‚   â””â”€â”€ index.ts        <span class="hljs-comment"># æµ…è‰²ä¸»é¢˜é¢œè‰²</span>
â””â”€â”€ index.tsx           <span class="hljs-comment"># ä¸»é¢˜ç”Ÿæˆå™¨</span>
</code></pre>
<h5 data-id="heading-11">2. å®šä¹‰é—´è·ç³»ç»Ÿ</h5>
<p><code>app/styles/theme/custom/spacing.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> spacing = {
  <span class="hljs-comment">// åŸºç¡€é—´è·ï¼ˆ4px åŸºå‡†ï¼‰</span>
  <span class="hljs-attr">xs</span>: <span class="hljs-number">4</span>,
  <span class="hljs-attr">sm</span>: <span class="hljs-number">8</span>,
  <span class="hljs-attr">md</span>: <span class="hljs-number">16</span>,
  <span class="hljs-attr">lg</span>: <span class="hljs-number">24</span>,
  <span class="hljs-attr">xl</span>: <span class="hljs-number">32</span>,
  <span class="hljs-attr">xxl</span>: <span class="hljs-number">48</span>,

  <span class="hljs-comment">// ç‰¹æ®Šé—´è·</span>
  <span class="hljs-attr">screenPadding</span>: <span class="hljs-number">16</span>,
  <span class="hljs-attr">cardPadding</span>: <span class="hljs-number">16</span>,
  <span class="hljs-attr">inputPadding</span>: <span class="hljs-number">12</span>,

  <span class="hljs-comment">// è´Ÿé—´è·</span>
  <span class="hljs-attr">negSm</span>: -<span class="hljs-number">8</span>,
  <span class="hljs-attr">negMd</span>: -<span class="hljs-number">16</span>,
  <span class="hljs-attr">negLg</span>: -<span class="hljs-number">24</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Spacing</span> = <span class="hljs-keyword">typeof</span> spacing;
</code></pre>
<h5 data-id="heading-12">3. å®šä¹‰å­—ä½“ç³»ç»Ÿ</h5>
<p><code>app/styles/theme/custom/typography.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> typography = {
  <span class="hljs-attr">fontSize</span>: {
    <span class="hljs-attr">xs</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">sm</span>: <span class="hljs-number">14</span>,
    <span class="hljs-attr">base</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">lg</span>: <span class="hljs-number">18</span>,
    <span class="hljs-attr">xl</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">xxl</span>: <span class="hljs-number">24</span>,
    <span class="hljs-attr">xxxl</span>: <span class="hljs-number">32</span>,
  },
  <span class="hljs-attr">fontWeight</span>: {
    <span class="hljs-attr">regular</span>: <span class="hljs-number">400</span>,
    <span class="hljs-attr">medium</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">semibold</span>: <span class="hljs-number">600</span>,
    <span class="hljs-attr">bold</span>: <span class="hljs-number">700</span>,
  },
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Typography</span> = <span class="hljs-keyword">typeof</span> typography;
</code></pre>
<h5 data-id="heading-13">4. å®šä¹‰é¢œè‰²</h5>
<p><code>app/styles/theme/light/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColorsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"styled-components/native"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">colors</span>: <span class="hljs-title class_">ColorsType</span> = {
  <span class="hljs-attr">primary</span>: <span class="hljs-string">'#007AFF'</span>,
  <span class="hljs-attr">secondary</span>: <span class="hljs-string">'#5856D6'</span>,
  <span class="hljs-attr">background</span>: <span class="hljs-string">'#FFFFFF'</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">'#000000'</span>,
  <span class="hljs-attr">textWhite</span>: <span class="hljs-string">'#FFFFFF'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-string">'#34C759'</span>,
  <span class="hljs-attr">warning</span>: <span class="hljs-string">'#FF9500'</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-string">'#FF3B30'</span>,
  <span class="hljs-attr">info</span>: <span class="hljs-string">'#5AC8FA'</span>,
  <span class="hljs-attr">border</span>: <span class="hljs-string">'#C6C6C8'</span>,
  <span class="hljs-attr">overlay</span>: <span class="hljs-string">'rgba(0, 0, 0, 0.5)'</span>,
  <span class="hljs-attr">transparent</span>: <span class="hljs-string">'transparent'</span>
};

<span class="hljs-keyword">export</span> { colors };
</code></pre>
<p><code>app/styles/theme/dark/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColorsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"styled-components/native"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">colors</span>: <span class="hljs-title class_">ColorsType</span> = {
  <span class="hljs-attr">primary</span>: <span class="hljs-string">'#0A84FF'</span>,
  <span class="hljs-attr">secondary</span>: <span class="hljs-string">'#5E5CE6'</span>,
  <span class="hljs-attr">background</span>: <span class="hljs-string">'#121212'</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">'#FFFFFF'</span>,
  <span class="hljs-attr">textWhite</span>: <span class="hljs-string">'#FFFFFF'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-string">'#32D74B'</span>,
  <span class="hljs-attr">warning</span>: <span class="hljs-string">'#FF9F0A'</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-string">'#FF453A'</span>,
  <span class="hljs-attr">info</span>: <span class="hljs-string">'#64D2FF'</span>,
  <span class="hljs-attr">border</span>: <span class="hljs-string">'#3A3A3C'</span>,
  <span class="hljs-attr">overlay</span>: <span class="hljs-string">'rgba(0, 0, 0, 0.7)'</span>,
  <span class="hljs-attr">transparent</span>: <span class="hljs-string">'transparent'</span>
};

<span class="hljs-keyword">export</span> { colors };
</code></pre>
<h5 data-id="heading-14">5. åˆ›å»ºä¸»é¢˜ç”Ÿæˆå™¨</h5>
<p><code>app/styles/theme/index.tsx</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DefaultTheme</span>, <span class="hljs-title class_">ThemeModeType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components/native'</span>;
<span class="hljs-keyword">import</span> { colors <span class="hljs-keyword">as</span> darkColor } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dark'</span>;
<span class="hljs-keyword">import</span> { colors <span class="hljs-keyword">as</span> lightColor } <span class="hljs-keyword">from</span> <span class="hljs-string">'./light'</span>;
<span class="hljs-keyword">import</span> { spacing } <span class="hljs-keyword">from</span> <span class="hljs-string">'./custom/spacing'</span>;
<span class="hljs-keyword">import</span> { typography } <span class="hljs-keyword">from</span> <span class="hljs-string">'./custom/typography'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">getTheme</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: ThemeModeType</span>) =&gt;</span> <span class="hljs-title class_">DefaultTheme</span> = <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">type</span> === <span class="hljs-string">'dark'</span> ? darkColor : lightColor;
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">mode</span>: <span class="hljs-keyword">type</span>,
    spacing,
    typography,
    <span class="hljs-attr">colors</span>: theme,
  };
};

<span class="hljs-keyword">export</span> { getTheme };
</code></pre>
<h4 data-id="heading-15">ç¬¬å…­æ­¥ï¼šåˆ›å»º ThemeProvider</h4>
<p><code>app/providers/ThemeProvider/index.tsx</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { getTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/styles'</span>;
<span class="hljs-keyword">import</span> { createContext, <span class="hljs-title class_">PropsWithChildren</span>, useCallback, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useColorScheme } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">DefaultTheme</span>,
  <span class="hljs-title class_">ThemeModeType</span>,
  <span class="hljs-title class_">ThemeProvider</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">StyledThemeProvider</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components/native'</span>;

<span class="hljs-comment">// Context ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ContextProps</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-title class_">ThemeModeType</span>;
  <span class="hljs-attr">theme</span>: <span class="hljs-title class_">DefaultTheme</span>;
  <span class="hljs-attr">toggleTheme</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-comment">// é»˜è®¤ä¸»é¢˜</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultTheme</span>: <span class="hljs-title class_">ContextProps</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">theme</span>: <span class="hljs-title function_">getTheme</span>(<span class="hljs-string">'light'</span>),
  <span class="hljs-attr">toggleTheme</span>: <span class="hljs-function">() =&gt;</span> {},
};

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = createContext&lt;<span class="hljs-title class_">ContextProps</span>&gt;(defaultTheme);

<span class="hljs-comment">// ThemeProvider ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">ThemeProvider</span> = (<span class="hljs-params">{ children }: PropsWithChildren</span>) =&gt; {
  <span class="hljs-keyword">const</span> isDarkMode = <span class="hljs-title function_">useColorScheme</span>() === <span class="hljs-string">'dark'</span>;
  <span class="hljs-keyword">const</span> [mode, setMode] = useState&lt;<span class="hljs-title class_">ThemeModeType</span>&gt;(isDarkMode ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>);

  <span class="hljs-comment">// åˆ‡æ¢ä¸»é¢˜å‡½æ•°</span>
  <span class="hljs-keyword">const</span> toggleTheme = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setMode</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> (prev === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>));
  }, []);

  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">getTheme</span>(mode);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">mode</span>, <span class="hljs-attr">theme</span>, <span class="hljs-attr">toggleTheme</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">StyledThemeProvider</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">{theme}</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">StyledThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  );
};
</code></pre>
<p><code>app/providers/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> { <span class="hljs-title class_">ThemeContext</span>, <span class="hljs-title class_">ThemeProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ThemeProvider'</span>;
</code></pre>
<h4 data-id="heading-16">ç¬¬ä¸ƒæ­¥ï¼šå¯¼å‡ºæ ·å¼ç³»ç»Ÿ</h4>
<p><code>app/styles/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»é¢˜ Design Tokens</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./theme'</span>;

<span class="hljs-comment">// é€šç”¨æ ·å¼</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./common'</span>;
</code></pre>
<h4 data-id="heading-17">ç¬¬å…«æ­¥ï¼šéªŒè¯é…ç½®</h4>
<p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç»„ä»¶ <code>app/index.tsx</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components/native'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeProvider</span>, <span class="hljs-title class_">ThemeContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@providers'</span>;
<span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Container</span> = styled.<span class="hljs-property">View</span><span class="hljs-string">`
  padding: <span class="hljs-subst">${props =&gt; props.theme.spacing.md}</span>px;
  background-color: <span class="hljs-subst">${props =&gt; props.theme.colors.background}</span>;
`</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Title</span> = styled.<span class="hljs-property">Text</span><span class="hljs-string">`
  font-size: <span class="hljs-subst">${props =&gt; props.theme.typography.fontSize.xl}</span>px;
  font-weight: <span class="hljs-subst">${props =&gt; props.theme.typography.fontWeight.bold}</span>;
  color: <span class="hljs-subst">${props =&gt; props.theme.colors.text}</span>;
`</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">TouchableOpacity</span><span class="hljs-string">`
  background-color: <span class="hljs-subst">${props =&gt; props.theme.colors.primary}</span>;
  padding: <span class="hljs-subst">${props =&gt; props.theme.spacing.md}</span>px;
  border-radius: 8px;
  margin-top: <span class="hljs-subst">${props =&gt; props.theme.spacing.md}</span>px;
`</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ButtonText</span> = styled.<span class="hljs-property">Text</span><span class="hljs-string">`
  color: <span class="hljs-subst">${props =&gt; props.theme.colors.textWhite}</span>;
  text-align: center;
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AppContent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { toggleTheme, mode } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span>&gt;</span>Styled Components é…ç½®æˆåŠŸï¼<span class="hljs-tag">&lt;/<span class="hljs-name">Title</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span>&gt;</span>å½“å‰ä¸»é¢˜: {mode}<span class="hljs-tag">&lt;/<span class="hljs-name">Title</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{toggleTheme}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ButtonText</span>&gt;</span>åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">ButtonText</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h4 data-id="heading-18">ç¬¬ä¹æ­¥ï¼šé‡æ–°æ„å»º</h4>
<p>é…ç½®å®Œæˆåï¼Œå¿…é¡»é‡æ–°æ„å»ºåº”ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†ç¼“å­˜å¹¶é‡å¯</span>
yarn start --reset-cache

<span class="hljs-comment"># æˆ–è€…é‡æ–°æ„å»º</span>
<span class="hljs-comment"># iOS</span>
yarn ios

<span class="hljs-comment"># Android</span>
yarn android
</code></pre>
<h3 data-id="heading-19">é…ç½®æ£€æŸ¥æ¸…å•</h3>
<ul>
<li>âœ… å®‰è£…äº† <code>styled-components</code></li>
<li>âœ… å®‰è£…äº† <code>@types/styled-components</code></li>
<li>âœ… å®‰è£…äº† <code>babel-plugin-styled-components</code></li>
<li>âœ… é…ç½®äº† <code>babel.config.js</code></li>
<li>âœ… åˆ›å»ºäº†ç±»å‹å®šä¹‰æ–‡ä»¶</li>
<li>âœ… é…ç½®äº†è·¯å¾„åˆ«åï¼ˆ<code>@providers</code>ï¼‰</li>
<li>âœ… åˆ›å»ºäº†ä¸»é¢˜æ–‡ä»¶ç»“æ„</li>
<li>âœ… å®šä¹‰äº†é—´è·ç³»ç»Ÿ</li>
<li>âœ… å®šä¹‰äº†å­—ä½“ç³»ç»Ÿ</li>
<li>âœ… å®šä¹‰äº†é¢œè‰²ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰</li>
<li>âœ… åˆ›å»ºäº†ä¸»é¢˜ç”Ÿæˆå™¨</li>
<li>âœ… åˆ›å»ºäº† ThemeProvider</li>
<li>âœ… å¯¼å‡ºäº†æ ·å¼ç³»ç»Ÿ</li>
<li>âœ… é‡æ–°æ„å»ºäº†åº”ç”¨</li>
</ul>
<h3 data-id="heading-20">å¸¸è§é…ç½®é—®é¢˜</h3>
<h4 data-id="heading-21">1. TypeScript ç±»å‹é”™è¯¯</h4>
<p><strong>é—®é¢˜</strong>ï¼š<code>props.theme</code> æŠ¥ç±»å‹é”™è¯¯</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿ <code>app/types/styled-components-native.d.ts</code> æ–‡ä»¶å­˜åœ¨</li>
<li>ç¡®ä¿ <code>DefaultTheme</code> æ¥å£å®šä¹‰äº†æ‰€æœ‰éœ€è¦çš„å­—æ®µ</li>
<li>é‡å¯ TypeScript æœåŠ¡å™¨ï¼ˆVSCode ä¸­ Cmd+Shift+P -&gt; "Restart TS Server"ï¼‰</li>
</ul>
<h4 data-id="heading-22">2. ä¸»é¢˜åˆ‡æ¢ä¸ç”Ÿæ•ˆ</h4>
<p><strong>é—®é¢˜</strong>ï¼šç‚¹å‡»åˆ‡æ¢ä¸»é¢˜ï¼Œæ ·å¼ä¸å˜</p>
<p><strong>æ£€æŸ¥</strong>ï¼š</p>
<ol>
<li>ç»„ä»¶æ˜¯å¦åœ¨ <code>ThemeProvider</code> å†…éƒ¨ï¼Ÿ</li>
<li>æ˜¯å¦ä½¿ç”¨äº† <code>props.theme.colors.xxx</code> è€Œä¸æ˜¯ç¡¬ç¼–ç é¢œè‰²å€¼ï¼Ÿ</li>
<li>æ˜¯å¦é‡æ–°æ„å»ºäº†åº”ç”¨ï¼Ÿ</li>
</ol>
<h4 data-id="heading-23">3. Babel é…ç½®ä¸ç”Ÿæ•ˆ</h4>
<p><strong>è§£å†³</strong>ï¼š</p>
<ol>
<li>æ¸…ç†ç¼“å­˜ï¼š<code>yarn start --reset-cache</code></li>
<li>æ£€æŸ¥ <code>babel.config.js</code> è¯­æ³•</li>
<li>é‡å¯ Metro bundler</li>
</ol>
<h4 data-id="heading-24">4. æ‰¾ä¸åˆ°æ¨¡å— '@providers'</h4>
<p><strong>è§£å†³</strong>ï¼š</p>
<ol>
<li>æ£€æŸ¥ <code>babel.config.js</code> å’Œ <code>tsconfig.json</code> åˆ«åé…ç½®</li>
<li>ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼š<code>'./app/providers'</code></li>
<li>é‡å¯ TS æœåŠ¡å™¨</li>
</ol>
<h3 data-id="heading-25">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstyled-components.com%2Fdocs" target="_blank" title="https://styled-components.com/docs" ref="nofollow noopener noreferrer">Styled Components å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freactnative.dev%2Fdocs%2Fstyle" target="_blank" title="https://reactnative.dev/docs/style" ref="nofollow noopener noreferrer">React Native æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstyled-components.com%2Fdocs%2Fapi%23typescript" target="_blank" title="https://styled-components.com/docs/api#typescript" ref="nofollow noopener noreferrer">TypeScript ç±»å‹å®šä¹‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»spec-kitçœ‹spec-driven codingåŠåœ¨åå°ç®¡ç†å¼€å‘çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7598574507347460131</link>    <guid>https://juejin.cn/post/7598574507347460131</guid>    <pubDate>2026-01-25T07:18:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507347460131" data-draft-id="7598588085597077544" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»spec-kitçœ‹spec-driven codingåŠåœ¨åå°ç®¡ç†å¼€å‘çš„å®è·µ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-25T07:18:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·8048714355625"/> <meta itemprop="url" content="https://juejin.cn/user/2870164321471837"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»spec-kitçœ‹spec-driven codingåŠåœ¨åå°ç®¡ç†å¼€å‘çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2870164321471837/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·8048714355625
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T07:18:59.000Z" title="Sun Jan 25 2026 07:18:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯spec-driven coding</h2>
<p>æˆ‘ä»¬æ­£å¸¸çš„å¼€å‘æµç¨‹ä¸­ï¼Œæ’°å†™äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰æ¥æŒ‡å¯¼å¼€å‘ï¼Œåˆ›å»ºè®¾è®¡æ–‡æ¡£æ¥å‘ŠçŸ¥å®ç°ç»†èŠ‚ï¼Œç„¶åè¿›è¡Œä»£ç å¼€å‘ã€‚</p>
<p>è§„èŒƒé©±åŠ¨å¼€å‘ï¼ˆSDDï¼‰æ¨¡æ‹Ÿäº†è¿™ä¸€æµç¨‹ï¼Œä½†åœ¨SDDä¸­ï¼Œäº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰ä¸å†æ˜¯å®ç°çš„æŒ‡å—ï¼Œè€Œæ˜¯ç”Ÿæˆå®ç°çš„æºå¤´ã€‚æŠ€æœ¯æ–¹æ¡ˆä¸å†æ˜¯æŒ‡å¯¼ç¼–ç çš„æ–‡æ¡£ï¼Œè€Œæ˜¯ç”Ÿæˆä»£ç çš„ç²¾ç¡®å®šä¹‰ã€‚å› ä¸ºç°åœ¨AIèƒ½å¤Ÿç†è§£å’Œå®ç°å¤æ‚çš„è§„èŒƒï¼Œå¹¶åˆ›å»ºè¯¦ç»†çš„å®ç°æ–¹æ¡ˆã€‚ä½†æ²¡æœ‰ç»“æ„çš„è¿‡ç¨‹ä¼šè®©AIç”Ÿæˆä¼šäº§ç”Ÿæ··ä¹±ã€‚SDDé€šè¿‡ç²¾ç¡®ã€å®Œæ•´ä¸”è¶³å¤Ÿæ˜ç¡®çš„è§„èŒƒï¼Œè¶³ä»¥ç”Ÿæˆå¯è¿è¡Œçš„ç³»ç»Ÿã€‚</p>
<p>å¼€å‘å›¢é˜Ÿçš„æ„å›¾é€šè¿‡è‡ªç„¶è¯­è¨€å¯ä»¥ç”Ÿæˆç›¸åº”çš„è§„èŒƒï¼Œä»£ç åªæ˜¯æœ€åä¸€å…¬é‡Œçš„å®ç°æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">spec-kitåŸç†ç®€ä»‹</h2>
<p>spec-kitä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgithub%2Fspec-kit" target="_blank" title="https://github.com/github/spec-kit" ref="nofollow noopener noreferrer">github.com/github/specâ€¦</a> (å®‰è£…å¯ä»¥å‚è€ƒè¿™ä¸ªåœ°å€)</p>
<p>ä»ä¸Šé¢çš„åœ°å€å¯ä»¥çœ‹åˆ°ï¼Œspec-kité€šè¿‡ä¸€ç³»åˆ—è‡ªå®šä¹‰slash commandæ¥ç”Ÿæˆå¯¹åº”çš„è§„èŒƒæ–‡ä»¶ï¼Œæœ€ç»ˆæ ¹æ®è¿™äº›è§„èŒƒæ–‡ä»¶ç”Ÿæˆä»£ç </p>








































<table><thead><tr><th>é¡ºåº</th><th>Slash command</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>1</td><td>/speckit.constitution(å¦‚æœ‰åˆ™ä¸éœ€è¦æ‰§è¡Œ)</td><td>ç”Ÿæˆé¡¹ç›®è§„èŒƒ</td></tr><tr><td>2</td><td>/speckit.specify</td><td>ç”Ÿæˆéœ€æ±‚æ–‡æ¡£</td></tr><tr><td>3</td><td>/speckit.clarify (å¯é€‰)</td><td>è®©AIè¯†åˆ«å¯èƒ½éœ€è¦æ¾„æ¸…çš„æœ€é‡è¦çš„5ä¸ªé—®é¢˜</td></tr><tr><td>4</td><td>/speckit.plan</td><td>ç”Ÿæˆè®¾è®¡æ–‡æ¡£</td></tr><tr><td>5</td><td>/speckit.task</td><td>ç”Ÿæˆå®æ–½ä»»åŠ¡æ–‡æ¡£</td></tr><tr><td>6</td><td>/speckit.implement</td><td>å®æ–½ä»£ç </td></tr></tbody></table>
<p>è¿™äº›è‡ªå®šä¹‰çš„ slash command å…¶å®æ˜¯åˆ©ç”¨äº†vscode copilotçš„è‡ªå®šä¹‰promptæ–‡ä»¶ï¼Œå‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fcopilot%2Fcustomization%2Fprompt-files%25E3%2580%2582" target="_blank" title="https://code.visualstudio.com/docs/copilot/customization/prompt-files%E3%80%82" ref="nofollow noopener noreferrer">code.visualstudio.com/docs/copiloâ€¦</a></p>
<p>æ‰§è¡Œ slash commandå‘½ä»¤å®é™…ä¸Šæ˜¯å°† .github/prompts/${å‘½ä»¤}.prompt.md çš„æç¤ºè¯åŠç›¸å…³è®¾ç½®å‘ç»™AIã€‚æ¯”å¦‚</p>
<p>æ‰§è¡Œ/speckit.constitutionå‘½ä»¤ï¼Œå®é™…ä¸Šæ˜¯è®©AIéµå¾ª .github/prompts/speckit.constitution.prompt.mdã€‚</p>
<p>å› æ­¤ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ¯ä¸€ä¸ªå‘½ä»¤å°±æ˜¯ä¾æ®ä½œè€…çš„æ€æƒ³ï¼Œé€šè¿‡ä½œè€…é¢„ç½®çš„æç¤ºè¯ä¸AIäº¤æµï¼ŒæŒ‰ç…§æµç¨‹ç”Ÿæˆå¯¹åº”çš„è§„èŒƒæ–‡ä»¶ï¼Œæœ€ç»ˆåˆ©ç”¨è¿™äº›è§„èŒƒæ–‡ä»¶æ¥æŒ‡å¯¼AIå†™å‡ºç¬¦åˆè¦æ±‚çš„ä»£ç ã€‚é€šè¿‡è¿™æ ·ä¸€æ­¥æ­¥çš„è§„èŒƒï¼Œæé«˜AIå†™å‡ºâ€œå¥½çš„â€ä»£ç çš„æ¦‚ç‡ã€‚å¦‚æœä½ æœ‰è‡ªå·±çš„ä¸€å¥—å¼€å‘è§„èŒƒï¼Œé‚£ä¹ˆä½ ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„spec-driven developmentæµç¨‹ï¼Œå†™ä¸€ä¸ªè‡ªå·±çš„spec-kitï¼</p>
<h2 data-id="heading-2">ç”¨spec-kitå®è·µä¸€ä¸ªåå°ç®¡ç†éœ€æ±‚</h2>
<h3 data-id="heading-3">è¦åšçš„æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å®é™…æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fc-ai-admin.xiaopeng.com%2F%23%2Fai%2Fentry" target="_blank" title="https://c-ai-admin.xiaopeng.com/#/ai/entry" ref="nofollow noopener noreferrer">c-ai-admin.xiaopeng.com/#/ai/entry</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„åå°ç®¡ç†æ–°å¢tabéœ€æ±‚ï¼ŒåŒ…å«åˆ—è¡¨æŸ¥çœ‹ã€æœç´¢ï¼Œç¼–è¾‘ã€æ–°å¢ã€å¤åˆ¶ã€åˆ é™¤çš„åŠŸèƒ½ã€‚å¼¹çª—ä¸­ï¼Œé€‰æ‹©åœºæ™¯çƒ­é—¨é—®é¢˜ç”±å…¨éƒ¨é…ç½®ä¸­è€Œæ¥ã€‚</p>
<h3 data-id="heading-4">æ€ä¹ˆåšï¼Ÿ</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æŒ‰ç…§spec-kitçš„æµç¨‹æ¥å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p>
<h4 data-id="heading-5">/speckit.constitution ç”Ÿæˆé¡¹ç›®è§„èŒƒ</h4>
<p>é¡¹ç›®æ˜¯ç¬¬ä¸€æ¬¡ç”¨spec-kitæ¥è¿›è¡Œspec-driven codingï¼Œå› æ­¤éœ€è¦å…ˆç”Ÿæˆé¡¹ç›®è§„èŒƒæ–‡ä»¶ .specify/memory/constitution.mdï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨åç»­çš„æµç¨‹ä¸­éƒ½ä¼šç”¨åˆ°ï¼Œæ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šå‚è€ƒå·¥ä½œåŒºå†…çš„README.md, <code>docs/quickstart.md</code>ï¼Œpromptè¾“å…¥ï¼Œä¹‹å‰çš„constitution.mdï¼Œä»“åº“ä¸Šä¸‹æ–‡ç­‰ç­‰â€¦â€¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨è¿™ä¹‹å‰è¡¥å……ä¸€äº›æˆ‘ä»¬æœŸæœ›çš„é¡¹ç›®è§„èŒƒä¿¡æ¯æ˜¯éå¸¸å¿…è¦çš„ï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥è®©AIå¸®ä½ ç”Ÿæˆï¼Œä½ éœ€è¦reviewä¸€ä¸‹ç”Ÿæˆçš„å†…å®¹ï¼Œå¹¶ä¸”è¡¥å……ä¸€äº›å¿…è¦çš„è§„èŒƒã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ç”Ÿæˆå¥½äº†ä¸€ä»½README.mdã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘</p>
<p>åŒæ—¶ï¼Œæˆ‘å¸Œæœ›åœ¨é¡¹ç›®è§„èŒƒé‡Œé¢å¢åŠ ä¸€äº›vue2çš„ best practiceã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a00a8bcb03b840a5a29b0898e91c460f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=Lxk61xut4nzSO4QQ37W3wn7RBUM%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆçš„çš„è§„èŒƒæˆ‘ä»¬éœ€è¦reviewä¸€ä¸‹æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœè¿˜æœ‰åˆ«çš„è¦æ±‚ï¼Œå¯ä»¥ç»§ç»­é€šè¿‡å‘½ä»¤+è¦æ±‚å»æ›´æ–°ã€‚</p>
<p>æœ€ç»ˆçš„.specify/memory/constitution.mdã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘</p>
<blockquote>
<p>Tips: å¦‚æœä¸‹æ¬¡å¼€å‘å·²ç»å­˜åœ¨äº†.specify/memory/constitution.mdï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å†æ¬¡é‡æ–°ç”Ÿæˆã€‚ä½†æˆ‘ä»¬åœ¨ä¸Šæ¬¡å¼€å‘æ—¶å‘ç°çš„ä¸€äº›AIå®¹æ˜“è¯¯è§£æˆ–è€…é—æ¼çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°æ›´æ–°åˆ°.specify/memory/constitution.mdï¼Œæ¥æ›´å¥½åœ°æŒ‡å¯¼AIã€‚</p>
</blockquote>
<h4 data-id="heading-6">/speckit.specify ç”Ÿæˆéœ€æ±‚æ–‡æ¡£</h4>
<p>è¿™ä¸ªé˜¶æ®µpromptä¸€å®šè¦è¯¦ç»†æè¿°æ¸…æ¥šä½ è¦åšä»€ä¹ˆï¼Œè¿™è¦æ±‚æˆ‘ä»¬å…ˆè¦ç¼•æ¸…äº§å“çš„éœ€æ±‚ã€‚è¦æ±‚äº§å“æŠŠéœ€æ±‚æ–‡æ¡£å†™æ¸…æ¥šå¯ä»¥å‡å°‘æˆ‘ä»¬å¾ˆå¤šå·¥ä½œé‡ï¼Œç„¶åæˆ‘ä»¬ç¨ä½œæ•´ç†å°±å¯ä»¥ã€‚</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œé‡ç‚¹åœ¨whatå’Œwhyï¼Œè€Œä¸æ˜¯howï¼Œä¸è¦æ¶‰åŠåˆ°æŠ€æœ¯ç›¸å…³çš„æè¿°</p>
<p>æˆ‘ä»¬å…ˆæ•´ç†promptï¼Œå°†promptæ•´ç†åˆ°ä¸€ä¸ªfeature.mdæ–‡ä»¶ä¸­ã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘ã€‚</p>
<p>å¼€å§‹ç”Ÿæˆéœ€æ±‚æ–‡æ¡£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f067c5673cf642bebec2e4261c26eef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=Q5HvwcvbSrAHbtKbuaiyp7jjJbs%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆçš„çš„è§„èŒƒæˆ‘ä»¬éœ€è¦reviewä¸€ä¸‹æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœè¿˜æœ‰åˆ«çš„è¦æ±‚ï¼Œå¯ä»¥ç»§ç»­é€šè¿‡å‘½ä»¤+è¦æ±‚å»æ›´æ–°ã€‚</p>
<p>æœ€ç»ˆçš„éœ€æ±‚æ–‡æ¡£ï¼šspecs\002-scenario-config\spec.mdã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘ã€‚</p>
<h4 data-id="heading-7">/speckit.clarify (å¯é€‰) æ¾„æ¸…ä¸æ¸…æ¥šçš„é—®é¢˜</h4>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢ç”Ÿæˆçš„ specs\002-scenario-config\spec.md é‡Œé¢æœ‰ä¸ª <strong>Edge Cases</strong> æ¿å—ï¼Œé‡Œé¢åˆ—ä¸¾äº†ä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œå¤§éƒ¨åˆ†æ˜¯ä¸€äº›å½±å“ç»†èŠ‚äº¤äº’çš„é—®é¢˜ï¼Œå¦‚æœä½ å¸Œæœ›åšå‡ºæ¥çš„ç³»ç»Ÿæ›´åŠ äººæ€§åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ /speckit.clarify å¸®ä½ åˆ—å‡ºAIè®¤ä¸ºçš„æœ€éœ€è¦æ¾„æ¸…çš„5ä¸ªé—®é¢˜ï¼Œå¹¶ç»™å‡ºå»ºè®®ï¼ŒåŒæ—¶ä¼šå¸®ä½ å†™å›åˆ°spec.mdä¸­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4370b2b12d6c45e7bc20ec70ddefa875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=Tr0P2p%2B56thR0vxmFUq1vjA4Ub0%3D" alt="" loading="lazy"/></p>
<p>æ‰§è¡Œå‘½ä»¤å</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a29db83a8a4baa8614426e8fa07990~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=DAWaShDplGYlNLdub8zUYEeXu8I%3D" alt="" loading="lazy"/></p>
<p>äº¤äº’å¼æ¾„æ¸…5ä¸ªé—®é¢˜å¹¶æ›´æ–°åˆ°spec.mdä¸­ï¼ŒæŒ‰ç…§ä½ æƒ³è¦çš„ç­”æ¡ˆé€‰æ‹©é€‰é¡¹æˆ–è€…è¾“å…¥æ–°çš„è§£å†³åŠæ³•ã€‚</p>
<h4 data-id="heading-8">/speckit.plan ç”Ÿæˆæ¦‚è¦è®¾è®¡</h4>
<p>è¿™ä¸€æ­¥åœ¨æˆ‘ä»¬è¦ç€é‡åœ¨å¦‚ä½•å®ç°å®ƒï¼Œé‡ç‚¹åœ¨howï¼Œå› æ­¤éœ€è¦å°†è¶³å¤Ÿçš„å®ç°ä¿¡æ¯ç»™AIï¼Œå¦‚åç«¯æ¥å£æ–‡æ¡£ï¼Œè¿™æ ·AIå¯ä»¥å¸®æˆ‘ä»¬åšå‡†ç¡®åˆé€‚çš„æ¦‚è¦è®¾è®¡ã€‚</p>
<p>æˆ‘è¿™ä¸ªéœ€æ±‚é‡Œï¼Œæˆ‘ä»åç«¯æä¾›çš„æ¥å£ä¿¡æ¯ï¼ˆæœ€å¥½è®©åç«¯çš„æ¦‚è¦è®¾è®¡åšè¯¦ç»†ï¼ŒåŒ…å«æ¥å£çš„å„ç§ä¿¡æ¯ï¼‰ï¼Œæ•´ç†äº†ä¸€ä»½åç«¯æ¥å£æ–‡æ¡£ï¼šå¯ä»¥çœ‹åˆ°ï¼Œåç«¯æ²¡æœ‰æä¾›å“åº”æ•°æ®æ ¼å¼ï¼Œå› æ­¤åç»­å­—æ®µå¯¹æ¥è¿™å—å¯èƒ½ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p>
<p>æ‰§è¡Œ /speckit.plan</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/859abe008bb24977bb4cd4f495646235~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=YwiSmpQf7RFZ0rCbi9h8MOSPyL4%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆäº†ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad85eb99c0d14dc385e5070cd8fb80e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=ZK%2FZysqQGw56f1QvluqJGsgJqEY%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸»è¦review plan.mdï¼Œé‡Œé¢å¯èƒ½æœ‰ä¸€äº›éœ€è¦ç¡®è®¤çš„äº‹é¡¹ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œåˆ å‡æ›´æ”¹ã€‚å‰é¢æœ‰æåˆ°æˆ‘ä»¬æä¾›çš„åç«¯æ¥å£ä¿¡æ¯æ–‡æ¡£æ²¡æœ‰æä¾›å“åº”æ•°æ®æ ¼å¼ï¼Œä½†åœ¨contracts/api-endpoints.mdæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒAIè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬æä¾›çš„æ¥å£è¯·æ±‚å‚æ•°ä¿¡æ¯è¡¥å……äº†æ¥å£è¿”å›ä¿¡æ¯ï¼è¿˜æ˜¯æŒºèªæ˜çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e4463f2596f45ed8f5016ebbb9472e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=esMSiKErcQzh0%2BIhDUcxw%2FhgEhY%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆçš„plan.mdã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘</p>
<h4 data-id="heading-9">/speckit.task ç”Ÿæˆä»»åŠ¡</h4>
<p>ç”Ÿæˆåˆ†é˜¶æ®µçš„ã€ç‹¬ç«‹çš„ä»»åŠ¡ï¼Œæ±‡æ€»åˆ° <code>tasks.md</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c6f6e0d42e54c3280bd910310d25867~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=JM8W4%2B7clUhQOaTWxtqG11j5ih0%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸€æ­¥å°†æˆ‘ä»¬è¦å®ç°çš„éœ€æ±‚åˆ†ä¸ºäº†7ä¸ªé˜¶æ®µï¼Œå¹¶æŒ‰å¢é‡çš„å½¢å¼åˆ’åˆ†ä¸ºäº†4ä¸ªæ‰§è¡ŒæœŸï¼Œéå¸¸æ¸…æ™°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f176c6aa30134a14bafa9e7278476c6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=9OUTsxkTWaNNjwDWaFpXwZ%2B6vq8%3D" alt="" loading="lazy"/></p>
<p>ç»ˆç‰ˆtask.mdã€å­—æ•°é™åˆ¶ä¸æ”¾ä¸Šæ¥äº†ã€‘</p>
<h3 data-id="heading-10">ç»“æœæ€ä¹ˆæ ·ï¼Ÿ</h3>
<p>æˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼š</p>
<ul>
<li>ä»£ç ç”Ÿæˆæ•ˆæœä¸é”™ï¼Œ90%ä»¥ä¸Šçš„ä»£ç å¯ç”¨</li>
<li>é€»è¾‘éƒ¨åˆ†å‡ ä¹å®Œå…¨æ²¡é—®é¢˜ï¼Œé˜»ç¢æµç¨‹çš„åœ°æ–¹å‡ ä¹éƒ½æ˜¯ä¸Šä¸‹æ–‡é”™è¯¯æˆ–è€…ä¸Šä¸‹æ–‡ä¸å¤Ÿå®Œå…¨ï¼ŒAIå¶å°”æœ‰å¹»è§‰ï¼Œè§ä¸Šè¡¨é—®é¢˜7</li>
<li>ä¸€äº›UIé—®é¢˜ï¼ŒUIäº¤äº’ä¼˜åŒ–é€šè¿‡AIèƒ½éå¸¸å¿«é€Ÿåœ°ä¿®å¤</li>
</ul>
<h3 data-id="heading-11">æœ‰ä»€ä¹ˆå¿ƒå¾—ï¼Ÿ</h3>
<ul>
<li>
<p>åå°ç®¡ç†é‡ç®€å•é€»è¾‘ã€è½»UIï¼Œè¿™ç§ç±»å‹çš„å¼€å‘ä»»åŠ¡éå¸¸é€‚åˆspec-driven developmentæµç¨‹æ¥å¼€å‘</p>
</li>
<li>
<p>æä¾›çš„éœ€æ±‚ä¸Šä¸‹æ–‡ï¼Œæ¥å£ä¸Šä¸‹æ–‡ä¿¡æ¯è¶Šå‡†ç¡®ï¼Œè¶Šå®Œå–„ï¼Œç”Ÿæˆçš„ä»£ç è´¨é‡è¶Šé«˜</p>
</li>
<li>
<p>AIå¶å°”ä¼šå‡ºç°å¹»è§‰ï¼Œä½†ä»ä¸Šé¢çš„ä¾‹å­æ¥çœ‹ï¼Œæ˜¯å¯æ¥å—çš„èŒƒå›´å†…</p>
</li>
<li>
<p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨sDdå¼€å‘+æ‰‹åŠ¨æµ‹è¯•çš„æ–¹å¼ï¼Œå‘ç°çš„é—®é¢˜å¯ä»¥é€šè¿‡äººå·¥+AIæ’æŸ¥çš„æ–¹å¼æ¥ä¿®å¤ï¼Œå…¶ä¸­è½»UIçš„ä¿®å¤å¯ä»¥å…¨éƒ¨äº¤ç»™AIæ¥åšï¼Œé€»è¾‘éƒ¨åˆ†AI+äººå·¥çš„æ–¹å¼æ›´åŠ é«˜æ•ˆ</p>
</li>
<li>
<p>ä¿®å¤é—®é¢˜é˜¶æ®µæœ€ä¼˜æ¨¡å¼æ˜¯ï¼š</p>
<ul>
<li>æ–°å»ºä¸€ä¸ªchat(è€Œä¸æ˜¯åœ¨åŸæ¥çš„sddå¼€å‘chatä¸Šï¼Œä¸Šä¸‹æ–‡è¿‡é•¿ï¼Œå½±å“ç”Ÿæˆæ•ˆç‡)</li>
<li>é‡‡ç”¨editæ–¹å¼(agentæ–¹å¼é€‚åˆé«˜éš¾åº¦çš„ä»»åŠ¡ï¼Œä¼šæœé›†å„ç§ä¿¡æ¯ï¼Œæ—¶é—´é•¿)ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä¸”å¯ä»¥ç›´æ¥ç¼–è¾‘æ–‡ä»¶ã€‚editæ¨¡å¼ä¸‹ç»™å‡ºçš„ä¸Šä¸‹æ–‡è¶Šå‡†ç¡®ï¼ŒAIä¿®å¤é—®é¢˜è¶Šå‡†ç¡®ã€‚</li>
</ul>
</li>
<li>
<p>å½“å¯¹æŸæ¬¡ä¿®æ”¹ä¸æ»¡æ„æ—¶ï¼Œåˆ©ç”¨chatçš„restore CheckpointåŠŸèƒ½ä¼šéå¸¸æ–¹ä¾¿ï¼Œç‚¹å‡»restore Checkpointï¼ŒAIä¼šå›æ’¤è¿™æ¬¡çš„æ‰€æœ‰æ›´æ”¹ã€‚è¿™æ ·ä½ å°±å¯ä»¥åœ¨ä¸Šæ¬¡æ›´æ”¹çš„åŸºç¡€ä¸Šé‡æ–°æ›´æ”¹ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09082caa9b324f0dbe04c0aedc0aae41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=7fdXO2fRiPV80VFDMr3Hnxoi8ds%3D" alt="" loading="lazy"/></p>
<p>æˆ–è€…ç›´æ¥ç‚¹å‡»é—®é¢˜è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå’Œä¸Šé¢çš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b5dd33cd71343738fe6b0c8273cb05d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODA0ODcxNDM1NTYyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769930338&amp;x-signature=BskwvhlEX%2BHvIcSHaRsrp9pREwA%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘åŸç”Ÿ Profilingï¼šé›¶ä¾µå…¥ã€éšç”¨éšå–çš„åŠ¨æ€é‡‡é›†å®æˆ˜]]></title>    <link>https://juejin.cn/post/7599474528239042600</link>    <guid>https://juejin.cn/post/7599474528239042600</guid>    <pubDate>2026-01-26T10:26:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599474528239042600" data-draft-id="7599220371666337832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘åŸç”Ÿ Profilingï¼šé›¶ä¾µå…¥ã€éšç”¨éšå–çš„åŠ¨æ€é‡‡é›†å®æˆ˜"/> <meta itemprop="keywords" content="ç›‘æ§,äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-26T10:26:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘åŸç”Ÿ Profilingï¼šé›¶ä¾µå…¥ã€éšç”¨éšå–çš„åŠ¨æ€é‡‡é›†å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:26:17.000Z" title="Mon Jan 26 2026 10:26:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åº”ç”¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¼€å¯æ€§èƒ½åˆ†æï¼ˆProfilingï¼‰é€šå¸¸æ˜¯è¯Šæ–­æ€§èƒ½ç“¶é¢ˆã€å†…å­˜æ³„æ¼å’Œçº¿ç¨‹é—®é¢˜çš„å…³é”®æ‰‹æ®µã€‚ç„¶è€Œï¼ŒæŒç»­å¼€å¯ Profiling ä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å¼€é”€ï¼ˆå¯èƒ½è¾¾ 5%-20%ï¼‰ï¼Œå¹¶å¯èƒ½ç”Ÿæˆå¤§é‡æ•°æ®ï¼Œå½±å“ç”Ÿäº§ç¯å¢ƒç¨³å®šæ€§ã€‚åŠ¨æ€å¼€å¯ Profiling å…è®¸å¼€å‘æˆ–è¿ç»´äººå‘˜æŒ‰éœ€ã€å®æ—¶åœ°å¯åŠ¨/åœæ­¢æ•°æ®æ”¶é›†ï¼Œå®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<ol>
<li>é™ä½æŒç»­å¼€é”€ï¼šä»…åœ¨éœ€è¦æ—¶å¯ç”¨ï¼Œé¿å…é•¿æœŸæ€§èƒ½æŸè€—ï¼›</li>
<li>ç²¾å‡†é—®é¢˜å®šä½ï¼šé’ˆå¯¹ç‰¹å®šæ—¶æ®µï¼ˆå¦‚æµé‡é«˜å³°æˆ–æ•…éšœæœŸé—´ï¼‰è¿›è¡Œåˆ†æï¼›</li>
<li>åœ¨çº¿è¯Šæ–­ï¼šæ— éœ€é‡å¯åº”ç”¨å³å¯è·å–ç”Ÿäº§ç¯å¢ƒå®æ—¶æ€§èƒ½å¿«ç…§ï¼›</li>
<li>çµæ´»æ§åˆ¶ï¼šå¯ç»“åˆç›‘æ§æŒ‡æ ‡ï¼ˆå¦‚ CPU é£™å‡ï¼‰è‡ªåŠ¨è§¦å‘ï¼Œæˆ–åœ¨å®‰å…¨å®¡è®¡æ—¶æ‰‹åŠ¨å¼€å¯ã€‚</li>
</ol>
<p>é€šè¿‡åŠ¨æ€æ§åˆ¶ï¼Œå®ç°äº†è§‚æµ‹èƒ½åŠ›ä¸ç³»ç»Ÿè´Ÿè½½çš„å¹³è¡¡ï¼Œä¿éšœäº†å…³é”®ä¸šåŠ¡åœºæ™¯çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚</p>
<h2 data-id="heading-1">Flameshot</h2>
<p>Flameshot æ˜¯ä¸€ä¸ªåŸºäº Sidecar æ¨¡å¼è¿è¡Œçš„è½»é‡çº§è‡ªåŠ¨æ€§èƒ½å‰–æï¼ˆProfilingï¼‰å·¥å…·ã€‚å®ƒé€šè¿‡ç›‘æ§ç›®æ ‡è¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPU/å†…å­˜ï¼‰ï¼Œåœ¨è¾¾åˆ°é¢„è®¾é˜ˆå€¼æ—¶è‡ªåŠ¨è§¦å‘åº•å±‚ Profilerï¼ˆå¦‚Â <code>async-profiler</code>Â ï¼‰ï¼Œä»è€Œå®ç°æ— ä¾µå…¥çš„ç°åœºå¿«ç…§é‡‡é›†ã€‚</p>
<p>Flameshot é‡‡ç”¨ Sidecar å®¹å™¨ æ¨¡å¼éƒ¨ç½²ã€‚å®ƒå¿…é¡»ä¸ä¸šåŠ¡ä¸»å®¹å™¨ï¼ˆMain Containerï¼‰è¿è¡Œåœ¨åŒä¸€ä¸ª Pod ä¸­ï¼Œå¹¶å¼€å¯ PID å‘½åç©ºé—´å…±äº«ã€‚</p>
<ol>
<li>ç›‘æ§ (Monitor)ï¼šFlameshot æŒç»­è½®è¯¢ä¸»å®¹å™¨å†…ç›®æ ‡è¿›ç¨‹çš„èµ„æºæ°´ä½ã€‚</li>
<li>è§¦å‘ (Trigger)ï¼šå½“æ»¡è¶³é˜ˆå€¼ï¼ˆå¦‚ CPU &gt; 80%ï¼‰æˆ–æ”¶åˆ° HTTP API è¯·æ±‚æ—¶ï¼Œè§¦å‘é‡‡é›†ä»»åŠ¡ã€‚</li>
<li>æ‰§è¡Œ (Execute)ï¼šæ ¹æ®é…ç½®çš„è¯­è¨€ç±»å‹ï¼ˆç›®å‰æ”¯æŒ Javaï¼‰ï¼Œè°ƒç”¨å¯¹åº”çš„ Profiler å·¥å…· attach åˆ°ç›®æ ‡è¿›ç¨‹ã€‚</li>
<li>æ”¶é›† (Collect)ï¼šç”Ÿæˆçš„ Profile æ–‡ä»¶ï¼ˆå¦‚Â <code>.jfr</code>Â ï¼‰å­˜å‚¨äºå…±äº«å·ä¸­ï¼Œéšåä¸Šä¼ è‡³æ•°æ®è§‚æµ‹ä¸­å¿ƒã€‚</li>
</ol>
<p>è§‚æµ‹äº‘Â <code>datakit-operator</code>Â ä»Â <code>1.7.0</code>Â ç‰ˆæœ¬å¼€å§‹æ”¯æŒå·¥å…·Â <code>flameshots</code>ï¼Œå®ç°åŠ¨æ€å¼€å¯åº”ç”¨ Profilingã€‚</p>
<h2 data-id="heading-2">å®è·µ</h2>
<p>å½“å‰åœ¨ K8S ç¯å¢ƒä¸Šéƒ¨ç½² JAVA åº”ç”¨ï¼Œå½“ CPUã€å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ° 20%ï¼ˆæ¼”ç¤ºæ–¹ä¾¿ï¼‰åˆ™è§¦å‘ Profiling æ•°æ®é‡‡é›†ã€‚</p>
<h3 data-id="heading-3">å‰ææ¡ä»¶</h3>
<ul>
<li>è§‚æµ‹äº‘å¸å·</li>
<li>K8S ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-4">DataKit</h3>
<p>DataKit ä¸»è¦æ˜¯ç”¨æ¥é‡‡é›†æ•°æ®å¹¶ä¸ŠæŠ¥è§‚æµ‹äº‘ã€‚</p>
<h4 data-id="heading-5">1. ä¸‹è½½ &amp; å®‰è£…</h4>
<pre><code class="hljs language-arduino" lang="arduino">wget https:<span class="hljs-comment">//static.guance.com/datakit/datakit.yaml</span>
</code></pre>
<h4 data-id="heading-6">2. é…ç½®Â <code>datakit.yaml</code></h4>
<p>é…ç½® DataWay æ•°æ®ç½‘å…³åœ°å€</p>
<pre><code class="hljs language-ini" lang="ini">name: ENV_DATAWAY
value: https://openway.guance.com?<span class="hljs-attr">token</span>=tkn_xxxxx
</code></pre>
<p>DataKit ä¼šé»˜è®¤å¼€å¯ä¸»æœºç›¸å…³é‡‡é›†å™¨ï¼Œè¿™é‡Œéœ€è¦è¿½åŠ Â <code>pyroscope</code></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">name: ENV_DEFAULT_ENABLED_INPUTS</span>
<span class="hljs-section">value: cpu,disk,diskio,mem,swap,system,hostobject,net,host_processes,container,pyroscope</span>
</code></pre>
<h4 data-id="heading-7">3. å¯åŠ¨</h4>
<p>è°ƒæ•´å®Œé…ç½®åï¼Œå¯åŠ¨ DataKit</p>
<pre><code class="hljs language-ruby" lang="ruby">root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>kubectl apply -f datakit.yaml
root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>kubectl get pods -n datakit
<span class="hljs-variable constant_">NAME</span>                                <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">STATUS</span>    <span class="hljs-variable constant_">RESTARTS</span>   <span class="hljs-variable constant_">AGE</span>
datakit-4zg7q                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          14h
datakit-wdtdq                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          14h
</code></pre>
<h3 data-id="heading-8">DataKit Operator</h3>
<h4 data-id="heading-9">1. ä¸‹è½½</h4>
<p>ä¸‹è½½æœ€æ–°çš„Â <code>datakit-operator.yaml</code></p>
<pre><code class="hljs language-vbnet" lang="vbnet">wget https://<span class="hljs-keyword">static</span>.guance.com/datakit-<span class="hljs-keyword">operator</span>/datakit-<span class="hljs-keyword">operator</span>.yaml
</code></pre>
<h4 data-id="heading-10">2. é…ç½®Â <code>datakit-operator.yaml</code></h4>
<p>ä¸»è¦è°ƒæ•´Â <code>jsonconfig</code>Â ä¸‹çš„Â <code>flameshots</code>Â å†…å®¹ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">apiVersion: v1</span>
<span class="hljs-section">kind: ConfigMap</span>
<span class="hljs-section">metadata:</span>
  name: datakit-operator-config
  namespace: datakit
<span class="hljs-section">data:</span>
  jsonconfig: |-
    {
        <span class="hljs-string">"server_listen"</span>: <span class="hljs-string">"0.0.0.0:9543"</span>,
        <span class="hljs-string">"log_level"</span>:     <span class="hljs-string">"info"</span>,
        <span class="hljs-string">"admission_inject_v2"</span>: {
            ...
            <span class="hljs-string">"flameshots"</span>: [
                {
                    <span class="hljs-string">"namespace_selectors"</span>: [<span class="hljs-string">"default"</span>],
                    <span class="hljs-string">"label_selectors"</span>:     [],
                    <span class="hljs-string">"image"</span>: <span class="hljs-string">"pubrepo.jiagouyun.com/datakit/flameshot:0.1.1"</span>,
                    <span class="hljs-string">"envs"</span>: {
                        <span class="hljs-string">"FLAMESHOT_DATAKIT_ADDR"</span>:     <span class="hljs-string">"http://datakit-service.datakit.svc:9529/profiling/v1/input"</span>,
                        <span class="hljs-string">"FLAMESHOT_MONITOR_INTERVAL"</span>: <span class="hljs-string">"1s"</span>,
                        <span class="hljs-string">"FLAMESHOT_PROFILING_PATH"</span>:   <span class="hljs-string">"/flameshot-data"</span>,
                        <span class="hljs-string">"FLAMESHOT_HTTP_LOCAL_IP"</span>:    <span class="hljs-string">"{fieldRef:status.podIP}"</span>,
                        <span class="hljs-string">"FLAMESHOT_HTTP_LOCAL_PORT"</span>:  <span class="hljs-string">"8089"</span>,
                        <span class="hljs-string">"FLAMESHOT_SERVICE"</span>:          <span class="hljs-string">"{fieldRef:metadata.labels['app']}"</span>,
                        <span class="hljs-string">"POD_NAME"</span>:                <span class="hljs-string">"{fieldRef:metadata.name}"</span>,
                        <span class="hljs-string">"POD_NAMESPACE"</span>:           <span class="hljs-string">"{fieldRef:metadata.namespace}"</span>,
                        <span class="hljs-string">"NODE_NAME"</span>:               <span class="hljs-string">"{fieldRef:spec.nodeName}"</span>,
                        <span class="hljs-string">"FLAMESHOT_TAGS"</span>:          <span class="hljs-string">"pod_name:<span class="hljs-variable">$(POD_NAME)</span>,pod_namespace:<span class="hljs-variable">$(POD_NAMESPACE)</span>,host:<span class="hljs-variable">$(NODE_NAME)</span>"</span>
                        
                    },
                    <span class="hljs-string">"resources"</span>: {
                        <span class="hljs-string">"requests"</span>: {
                            <span class="hljs-string">"cpu"</span>:    <span class="hljs-string">"100m"</span>,
                            <span class="hljs-string">"memory"</span>: <span class="hljs-string">"128Mi"</span>
                        },
                        <span class="hljs-string">"limits"</span>: {
                           <span class="hljs-string">"cpu"</span>:    <span class="hljs-string">"200m"</span>,
                           <span class="hljs-string">"memory"</span>: <span class="hljs-string">"256Mi"</span>
                        }
                    },
                    <span class="hljs-string">"processes"</span>: <span class="hljs-string">"[{"</span>command<span class="hljs-string">":"</span>java<span class="hljs-string">","</span>duration<span class="hljs-string">":"</span>60s<span class="hljs-string">","</span>events<span class="hljs-string">":"</span>--all<span class="hljs-string">","</span>language<span class="hljs-string">":"</span>java<span class="hljs-string">","</span>jdk_version<span class="hljs-string">":"</span>-<span class="hljs-string">","</span>tags<span class="hljs-string">":["</span>env:testing<span class="hljs-string">","</span>version:1.0.0<span class="hljs-string">"],"</span>cpu_usage_percent<span class="hljs-string">":20,"</span>mem_usage_percent<span class="hljs-string">":20,"</span>mem_usage_mb<span class="hljs-string">":1024}]"</span>
                }
            ]
        },
        ...
    }
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>namespace_selectorsï¼š ç©ºé—´é€‰æ‹©ï¼Œå³å“ªäº›ç©ºé—´éœ€è¦å¼€å¯Â <code>flameshots</code></li>
<li>env: é…ç½®ç¯å¢ƒå˜é‡ä¿¡æ¯</li>
<li>processesï¼š æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™Â <code>flameshots</code>Â ä¸ç”Ÿæ•ˆ</li>
</ul>
<p>processes é€šç”¨å­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li><code>service</code>Â (String): é€‰å¡«ï¼Œä¸ŠæŠ¥åˆ°è§‚æµ‹ä¸­å¿ƒçš„æœåŠ¡åç§°ã€‚</li>
<li><code>language</code>Â (String): ç›®æ ‡è¿›ç¨‹è¯­è¨€ã€‚ç›®å‰æ”¯æŒ javaã€‚</li>
<li><code>command</code>Â (String): åŒ¹é…è¿›ç¨‹å‘½ä»¤è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
<li><code>duration</code>Â (String): å•æ¬¡é‡‡é›†æ—¶é•¿ï¼ˆä¾‹å¦‚Â <code>30s</code>ï¼Œ<code>1m</code>ï¼‰ã€‚æ³¨æ„ï¼šå—é™äºæ‰§è¡Œè¶…æ—¶ï¼Œå»ºè®®ä¸è¶…è¿‡ 5 åˆ†é’Ÿã€‚</li>
<li><code>tags</code>Â (List): è‡ªå®šä¹‰æ ‡ç­¾åˆ—è¡¨ï¼Œå»ºè®®åŒ…å«Â <code>env</code>ï¼Œ<code>version</code>Â ç­‰å…ƒä¿¡æ¯ã€‚</li>
<li><code>cpu_usage_percent</code>Â (Int): CPU è§¦å‘é˜ˆå€¼ (0-N)ã€‚å¤šæ ¸ç¯å¢ƒä¸‹æ•°å€¼å¯èƒ½è¶…è¿‡ 100ã€‚</li>
<li><code>mem_usage_percent</code>Â (Int): å†…å­˜ä½¿ç”¨ç‡è§¦å‘é˜ˆå€¼ (0-100)ã€‚</li>
<li><code>mem_usage_mb</code>Â (Int): å†…å­˜ä½¿ç”¨é‡ç»å¯¹å€¼è§¦å‘é˜ˆå€¼ (MB)ã€‚</li>
</ul>
<p>å½“å‰é…ç½® processes å¯ä»¥å®ç°æ‰€æœ‰ JAVA æœåŠ¡ï¼Œä¸ºäº†å®è·µæ–¹ä¾¿ï¼Œå½“ cpu ä½¿ç”¨ç‡è¾¾åˆ° 20% æˆ–å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ° 20% æˆ–å†…å­˜ä½¿ç”¨å€¼è¾¾åˆ° 1024mï¼Œåˆ™ä¼šè§¦å‘æ‰§è¡Œ Profiling æ“ä½œã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-string">"processes"</span>: <span class="hljs-string">"[{"</span><span class="hljs-built_in">command</span><span class="hljs-string">":"</span>java<span class="hljs-string">","</span>duration<span class="hljs-string">":"</span>60s<span class="hljs-string">","</span>events<span class="hljs-string">":"</span>--all<span class="hljs-string">","</span>language<span class="hljs-string">":"</span>java<span class="hljs-string">","</span>jdk_version<span class="hljs-string">":"</span>-<span class="hljs-string">","</span>tags<span class="hljs-string">":["</span><span class="hljs-built_in">env</span>:testing<span class="hljs-string">","</span>version:1.0.0<span class="hljs-string">"],"</span>cpu_usage_percent<span class="hljs-string">":20,"</span>mem_usage_percent<span class="hljs-string">":20,"</span>mem_usage_mb<span class="hljs-string">":1024}]"</span>
</code></pre>
<h4 data-id="heading-11">3. å¯åŠ¨</h4>
<pre><code class="hljs language-ruby" lang="ruby">root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>kubectl apply -f datakit-operator.yaml
root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>kubectl get pods -n datakit
<span class="hljs-variable constant_">NAME</span>                                <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">STATUS</span>    <span class="hljs-variable constant_">RESTARTS</span>   <span class="hljs-variable constant_">AGE</span>
datakit-4zg7q                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          15h
datakit-operator-849f868b78-zbcd9   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          58s
datakit-wdtdq                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          15h
</code></pre>
<h3 data-id="heading-12">JAVA åº”ç”¨</h3>
<h4 data-id="heading-13">1. Yaml é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">springboot-server</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">springboot-server</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">springboot-server</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">registry.cn-shenzhen.aliyuncs.com/lr_715377484/springboot-server:flameshots</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">springboot-server</span>
          <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span>
          <span class="hljs-attr">ports:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span>  <span class="hljs-number">8080</span>
              <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>

          <span class="hljs-attr">securityContext:</span>
            <span class="hljs-attr">seccompProfile:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">Unconfined</span>
</code></pre>
<h4 data-id="heading-14">2. å¯åŠ¨åº”ç”¨</h4>
<pre><code class="hljs language-ruby" lang="ruby">root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span> kubectl apply -f springboot-server.yaml
root<span class="hljs-variable">@root</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>kubectl get pods
<span class="hljs-variable constant_">NAME</span>                                <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">STATUS</span>    <span class="hljs-variable constant_">RESTARTS</span>   <span class="hljs-variable constant_">AGE</span>
springboot-server-d55fc79dd-48c95   <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          3s
</code></pre>
<h4 data-id="heading-15">3. æŸ¥çœ‹Â <code>flameshot</code>Â æ‰§è¡Œæ—¥å¿—</h4>
<p>éœ€è¦æŒ‡å®š containerName ä¸ºÂ <code>-c datakit-flameshot</code></p>
<pre><code class="hljs language-bash" lang="bash">root@root:~$ kubectl logs -f springboot-server-d55fc79dd-48c95 -c datakit-flameshot
2026-01-15T03:55:58.090Z        ERROR        flameshot        flameshot/config.go:243        <span class="hljs-built_in">read</span> config file failed, err:open /flameshot/flameshot.conf: no such file or directory
2026-01-15T03:55:58.092Z        INFO        flameshot        flameshot/monitor.go:78        start monitor, interval: 1s
2026-01-15T03:55:58.092Z        INFO        flameshot        flameshot/http.go:77        start http server on 10.187.217.101:8089
2026-01-15T03:55:58.092Z        INFO        flameshot        flameshot/http.go:78        profile start at /v1/profile
2026-01-15T03:55:58.092Z        INFO        flameshot        flameshot/http.go:79        prom http start at /metrics
2026-01-15T03:56:58.093Z        INFO        flameshot        flameshot/monitor.go:102        match: PID=7, name=java or cmd=java -jar app.jar
</code></pre>
<p>ä»å¯åŠ¨æ—¥å¿—ä¸Šåˆ†æï¼Œå·²ç»æ‰¾åˆ°äº† java æœåŠ¡ï¼Œä¸” PID ä¸º 7ï¼Œç­‰å¾…è§¦å‘äº‹ä»¶</p>
<h4 data-id="heading-16">4. è§¦å‘é˜ˆå€¼</h4>
<p>è®¿é—®åº”ç”¨</p>
<pre><code class="hljs language-perl" lang="perl">root@root:~$ kubectl <span class="hljs-keyword">exec</span> -it springboot-server-d55fc79dd-<span class="hljs-number">48</span>c95  -- <span class="hljs-regexp">/bin/</span>bash 
Defaulted container <span class="hljs-string">"springboot-server"</span> out of: springboot-server, datakit-flameshot
springboot-server-d55fc79dd-<span class="hljs-number">48</span>c95:<span class="hljs-regexp">/home/app</span><span class="hljs-comment">#</span>
springboot-server-d55fc79dd-<span class="hljs-number">48</span>c95:<span class="hljs-regexp">/home/app</span><span class="hljs-comment"># curl http://localhost:8080/profiling/generator</span>
<span class="hljs-keyword">write</span> success!springboot-server-d55fc79dd-<span class="hljs-number">48</span>c95:<span class="hljs-regexp">/home/app</span><span class="hljs-comment"># </span>
</code></pre>
<p>å†æ¥çœ‹çœ‹Â <code>flameshot</code>Â æ‰§è¡Œæ—¥å¿—ï¼Œå·²è§¦å‘äº†é˜ˆå€¼Â <code>cpu_avg:36.60</code>Â ä¸”æ­£å¸¸ä¸ŠæŠ¥æ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f554a7a775e4e2ab5a0842ad349ff33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770027977&amp;x-signature=K62K%2BGbNQWF2aTBy8TDBgfYTO9s%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åæ¢å¤äº†æ­£å¸¸ï¼Œæ­£å¸¸ä¹‹ååˆ™ä¸ä¼šå†äº§ç”Ÿ Profiling æ•°æ®ï¼Œé™¤éå†æ¬¡è§¦å‘äº†é˜ˆå€¼ã€‚</p>
<h3 data-id="heading-17">è§‚æµ‹äº‘å¹³å°</h3>
<p>ç™»å½•è§‚æµ‹äº‘å¹³å°ï¼Œè®¿é—®ã€Œåº”ç”¨æ€§èƒ½æ£€æµ‹ã€-ã€ŒProflingã€å¯ä»¥æŸ¥çœ‹åˆ°åˆšåˆšä¸ŠæŠ¥çš„ Profling ä¿¡æ¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/666a3bf27773494eb1f05da63ada3e73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770027977&amp;x-signature=qWtEJuEcdVJZzQW1Kn1qaC9Z0zY%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»åˆ—è¡¨å¯ä»¥æŸ¥çœ‹ Profling è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ CPU è€—æ—¶ã€å†…å­˜åˆ†é…æƒ…å†µç­‰ï¼Œå¯ä»¥æ›´æ·±åº¦çš„å‰–æåº”ç”¨ä»£ç æ€§èƒ½æŸè€—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0efbac6898bf4d7d95f7eda85b5772b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770027977&amp;x-signature=faNNZA0FXhuqRPY%2FbVzjI0N2AHc%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„ AI åº”ç”¨ä¸è¦å†åªæ˜¯Chat+RAG äº†ï¼æ·±åº¦æ‹†è§£LinkedInæ‹›è˜AI Agentæ¶æ„ï¼Œé™„æºç ]]></title>    <link>https://juejin.cn/post/7599528186586497034</link>    <guid>https://juejin.cn/post/7599528186586497034</guid>    <pubDate>2026-01-26T10:11:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599528186586497034" data-draft-id="7599330434426601523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„ AI åº”ç”¨ä¸è¦å†åªæ˜¯Chat+RAG äº†ï¼æ·±åº¦æ‹†è§£LinkedInæ‹›è˜AI Agentæ¶æ„ï¼Œé™„æºç "/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-26T10:11:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å±…é‚ª"/> <meta itemprop="url" content="https://juejin.cn/user/2154698522507927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„ AI åº”ç”¨ä¸è¦å†åªæ˜¯Chat+RAG äº†ï¼æ·±åº¦æ‹†è§£LinkedInæ‹›è˜AI Agentæ¶æ„ï¼Œé™„æºç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698522507927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å±…é‚ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:11:58.000Z" title="Mon Jan 26 2026 10:11:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€çµé­‚æ‹·é—®ï¼šä¸ºä»€ä¹ˆä½ çš„AIé¡¹ç›®æ€»æ˜¯æ­»åœ¨Demoä¹‹åï¼Ÿ</h2>
<p>ä¸Šä¸ªæœˆï¼Œä¸€ä¸ªåšHR SaaSçš„æœ‹å‹æ‰¾æˆ‘åæ§½ï¼š</p>
<blockquote>
<p>"æˆ‘ä»¬èŠ±äº†3ä¸ªæœˆåšçš„AIæ‹›è˜åŠ©æ‰‹ï¼ŒDemoç»™è€æ¿çœ‹çš„æ—¶å€™ï¼Œè€æ¿ç›´å‘¼'å¤ªç‰›äº†'ã€‚ç»“æœä¸Šçº¿ä¸¤å‘¨ï¼ŒHRä»¬é›†ä½“åé¦ˆ'è¿˜ä¸å¦‚æˆ‘è‡ªå·±æœ'ï¼Œç°åœ¨é¡¹ç›®å·²ç»å‡‰äº†..."</p>
</blockquote>
<p>æˆ‘é—®ä»–æ¶æ„æ€ä¹ˆè®¾è®¡çš„ï¼Œä»–å‘æ¥ä¸€å¼ å›¾ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¾“å…¥ â†’ Prompt â†’ LLM â†’ è¾“å‡ºç»“æœ
<span class="hljs-code">              â†‘
           RAGæ£€ç´¢
</span></code></pre>
<p>æˆ‘è¯´ï¼š<strong>è¿™å‰æœŸæ¼”ç¤ºå¯ä»¥ï¼Œä½†è½åœ°ä¼šæœ‰ä¸€å †çš„é—®é¢˜ã€‚</strong></p>
<p>ä»–ä¸æœï¼šå¸‚é¢ä¸Š90%çš„AIåº”ç”¨ä¸éƒ½è¿™ä¹ˆæçš„å—ï¼Ÿ</p>
<p>æ²¡é”™ï¼Œæ‰€ä»¥90%çš„AIé¡¹ç›®éƒ½æ­»åœ¨äº†Demoä¹‹åã€‚</p>

























<table><thead><tr><th>é—®é¢˜</th><th>ä½ å¯èƒ½é‡åˆ°è¿‡</th></tr></thead><tbody><tr><td><strong>æ— çŠ¶æ€</strong></td><td>æ¯æ¬¡å¯¹è¯éƒ½æ˜¯æ–°å¼€å§‹ï¼ŒAIä¸è®°å¾—ç”¨æˆ·ä¸Šæ¬¡è¯´äº†å•¥</td></tr><tr><td><strong>å•ä¸€èƒ½åŠ›</strong></td><td>ä¸€ä¸ªPromptæ‰“å¤©ä¸‹ï¼Œç¨å¾®å¤æ‚ç‚¹çš„ä»»åŠ¡å°±æä¸å®š</td></tr><tr><td><strong>ä¸å¯æ§</strong></td><td>LLMè¾“å‡ºé£˜å¿½ä¸å®šï¼Œç”Ÿäº§ç¯å¢ƒå¤©å¤©æå¿ƒåŠèƒ†</td></tr><tr><td><strong>äººæœºå‰²è£‚</strong></td><td>è¦ä¹ˆå…¨è‡ªåŠ¨è¦ä¹ˆå…¨æ‰‹åŠ¨ï¼Œæ²¡æœ‰ä¸­é—´æ€</td></tr></tbody></table>
<p>ä»Šå¤©æ‹†è§£ä¸€ä¸ª<strong>çœŸæ­£è·‘åœ¨ç”Ÿäº§ç¯å¢ƒçš„AI Agent</strong>â€”â€”LinkedIn Hiring Assistantï¼Œçœ‹çœ‹å¤§å‚æ˜¯æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘æŠŠæ ¸å¿ƒæ¶æ„ç”¨LangGraphå¤ç°äº†ä¸€éï¼Œ<strong>æºç åœ¨æ–‡æœ«</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€LinkedIn Hiring Assistantï¼šè¿™æ•°æ®è¶…è¿‡äº†ä¸€èˆ¬ä¸“ä¸šçš„HRäº†</h2>
<h3 data-id="heading-2">2.1 äº§å“èƒŒæ™¯</h3>
<p>2024å¹´10æœˆï¼ŒLinkedInæ‚„æ‚„ä¸Šçº¿äº†ä¸€ä¸ªå«Hiring Assistantçš„ä¸œè¥¿ã€‚</p>
<p>æ³¨æ„æªè¾â€”â€”LinkedInç®¡å®ƒå«"Agent"ï¼Œä¸æ˜¯"AIåŠŸèƒ½"ï¼Œä¹Ÿä¸æ˜¯"æ™ºèƒ½åŠ©æ‰‹"ã€‚è¿™ä¸ªå®šä½æœ¬èº«å°±å¾ˆæœ‰æ„æ€ã€‚</p>
<p>ä¸€å¹´åï¼Œè¿™äº§å“å·²ç»é“ºåˆ°å…¨çƒå¸‚åœºäº†ã€‚å®˜æ–¹æ”¾å‡ºæ¥çš„æ•°æ®ï¼š</p>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>å€™é€‰äººæµè§ˆæ•ˆç‡</td><td>æå‡ <strong>60%</strong></td></tr><tr><td>å€™é€‰äººè”ç³»æ•ˆç‡</td><td>æå‡ <strong>40%</strong></td></tr><tr><td>åˆç­›æ•ˆç‡</td><td>æå‡ <strong>45%</strong></td></tr><tr><td>InMailå›å¤ç‡</td><td><strong>2.15å€</strong></td></tr><tr><td>è‡ªåŠ¨åŒ–è¦†ç›–ç‡</td><td>æ‹›è˜æµç¨‹çš„ <strong>80%</strong></td></tr></tbody></table>
<p>InMailå›å¤ç‡2.15å€è¿™ä¸ªæ•°æ®æœ€è®©æˆ‘éœ‡æƒŠâ€”â€”è¦çŸ¥é“LinkedInä¸Šçš„InMailå›å¤ç‡ä¸€ç›´æ˜¯ä¸ªè€å¤§éš¾é—®é¢˜ï¼Œå¾ˆå¤šHRå‘100å°èƒ½æ”¶åˆ°5å°å›å¤å°±è°¢å¤©è°¢åœ°äº†ã€‚</p>
<p>è¿™äº›æ•°å­—èƒŒåï¼Œæ˜¯ä¸€å¥—å®Œå…¨ä¸åŒäº"Chat+RAG"çš„æ¶æ„ã€‚</p>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒèƒ½åŠ›</h3>
<p>åŠŸèƒ½è¦†ç›–æ‹›è˜å…¨æµç¨‹ï¼š<strong>JDç”Ÿæˆ â†’ å€™é€‰äººæœç´¢ â†’ æ™ºèƒ½ç­›é€‰ â†’ ä¸ªæ€§åŒ–å¤–è” â†’ æŒç»­å­¦ä¹ </strong>ã€‚</p>
<p>ä½†è¯´å®è¯ï¼Œ<strong>åŠŸèƒ½ä¸æ˜¯é‡ç‚¹ï¼Œæ¶æ„æ‰æ˜¯</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒæ¶æ„æ‹†è§£ï¼šä¸ºä»€ä¹ˆæ˜¯Supervisoræ¨¡å¼ï¼Ÿ</h2>
<h3 data-id="heading-5">3.1 å…ˆè¯´ç»“è®ºï¼šReActä¸å¤Ÿç”¨</h3>
<p>å¸‚é¢ä¸Šå¤§å¤šæ•°AI Agentæ•™ç¨‹éƒ½åœ¨è®²ReActï¼ˆReasoning + Actingï¼‰æ¨¡å¼ã€‚æˆ‘ä¹‹å‰ä¹Ÿç”¨è¿™ä¸ªæ¨¡å¼åšè¿‡å‡ ä¸ªé¡¹ç›®ï¼Œè¸©äº†ä¸å°‘å‘ã€‚</p>
<p>ç›´æ¥ä¸Šå¯¹æ¯”ï¼š</p>





























<table><thead><tr><th>æ¨¡å¼</th><th>ä¼˜ç‚¹</th><th>å‘åœ¨å“ª</th><th>é€‚åˆå¹²å•¥</th></tr></thead><tbody><tr><td><strong>ReActå•Agent</strong></td><td>ç®€å•ç›´æ¥ï¼Œä¸Šæ‰‹å¿«</td><td>å¤æ‚ä»»åŠ¡å®¹æ˜“è·‘åï¼Œæ²¡æ³•å¹¶è¡Œ</td><td>ç®€å•é—®ç­”</td></tr><tr><td><strong>Plan-and-Execute</strong></td><td>è®¡åˆ’æ¸…æ™°ï¼Œå¯é¢„æµ‹</td><td>å¤ªæ­»æ¿ï¼Œä¸­é€”æ”¹ä¸äº†</td><td>æ­¥éª¤å›ºå®šçš„æµç¨‹</td></tr><tr><td><strong>Supervisor Multi-Agent</strong></td><td>ä¸“ä¸šåˆ†å·¥ï¼Œèƒ½å¹¶è¡Œï¼Œå¥½æ‰©å±•</td><td>æ¶æ„å¤æ‚ï¼Œè°ƒè¯•å¤´ç–¼</td><td><strong>å¤æ‚ä¸šåŠ¡æµç¨‹</strong></td></tr></tbody></table>
<p><strong>Supervisoræ¨¡å¼çš„æ ¸å¿ƒå·®å¼‚</strong>ï¼šå®ƒçš„"è§„åˆ’"æ˜¯åŠ¨æ€çš„ã€èµ°ä¸€æ­¥çœ‹ä¸€æ­¥çš„ï¼Œä¸æ˜¯ä¸€å¼€å§‹å°±æŠŠæ•´ä¸ªè®¡åˆ’å®šæ­»ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ä½ å°±æ‡‚äº†ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·: "å¸®æˆ‘æ‹›ä¸€ä¸ªåç«¯å·¥ç¨‹å¸ˆ"</span>
     â†“
<span class="hljs-section">Supervisor: å…ˆè®©Sourcingå»æœäºº</span>
     â†“
<span class="hljs-section">Sourcingè¿”å›: åªæ‰¾åˆ°3ä¸ªäºº</span>
     â†“
<span class="hljs-section">Supervisor: äººå¤ªå°‘ï¼Œæ”¾å®½æ¡ä»¶å†æœä¸€æ¬¡ï¼ˆåŠ¨æ€è°ƒæ•´ï¼‰</span>
     â†“
<span class="hljs-section">Sourcingè¿”å›: è¿™æ¬¡æ‰¾åˆ°15ä¸ª</span>
     â†“
<span class="hljs-section">Supervisor: å¤Ÿäº†ï¼Œè®©Screeningå»ç­›é€‰</span>
     â†“
...æ¯ä¸€æ­¥éƒ½æ ¹æ®ä¸Šä¸€æ­¥ç»“æœå†³å®šä¸‹ä¸€æ­¥
</code></pre>
<p>è¿™ç§"è¾¹èµ°è¾¹çœ‹"çš„æ¨¡å¼ï¼Œæ‰æ˜¯ç”Ÿäº§ç¯å¢ƒçœŸæ­£éœ€è¦çš„ã€‚</p>
<h3 data-id="heading-6">3.2 æ¶æ„å…¨æ™¯å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Recruiter (ç”¨æˆ·)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ è‡ªç„¶è¯­è¨€äº¤äº’
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supervisor Agent                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ æ„å›¾ç†è§£ï¼šç”¨æˆ·æƒ³åšä»€ä¹ˆï¼Ÿ                               â”‚  â”‚
â”‚  â”‚  â€¢ ä»»åŠ¡åˆ†è§£ï¼šæ‹†æˆå“ªäº›å­ä»»åŠ¡ï¼Ÿ                             â”‚  â”‚
â”‚  â”‚  â€¢ è°ƒåº¦å†³ç­–ï¼šåˆ†é…ç»™å“ªä¸ªAgentï¼Ÿ                           â”‚  â”‚
â”‚  â”‚  â€¢ ç»“æœèšåˆï¼šå¦‚ä½•æ•´åˆå„Agentçš„è¾“å‡ºï¼Ÿ                      â”‚  â”‚
â”‚  â”‚  â€¢ å¼‚å¸¸å¤„ç†ï¼šå­Agentå¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sourcing   â”‚    â”‚  Screening  â”‚    â”‚  Outreach   â”‚    â”‚  Evaluation â”‚
â”‚    Agent    â”‚    â”‚    Agent    â”‚    â”‚    Agent    â”‚    â”‚    Agent    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å€™é€‰äººæœç´¢ â”‚    â”‚ â€¢ ç®€å†è§£æ  â”‚    â”‚ â€¢ æ¶ˆæ¯ç”Ÿæˆ  â”‚    â”‚ â€¢ åŒ¹é…åº¦è¯„åˆ†â”‚
â”‚ â€¢ æŠ€èƒ½åŒ¹é…   â”‚    â”‚ â€¢ æ¡ä»¶ç­›é€‰  â”‚    â”‚ â€¢ ä¸ªæ€§åŒ–å®šåˆ¶â”‚    â”‚ â€¢ æ’åºæ¨è  â”‚
â”‚ â€¢ äººæ‰åº“æ£€ç´¢ â”‚    â”‚ â€¢ é¢„ç­›é€‰QA  â”‚    â”‚ â€¢ å¤šè¯­è¨€ç¿»è¯‘â”‚    â”‚ â€¢ å¯¹æ¯”åˆ†æ  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       Skill Registry          â”‚
                    â”‚   (ç»Ÿä¸€çš„èƒ½åŠ›æ³¨å†Œä¸ç®¡ç†ä¸­å¿ƒ)    â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  â€¢ search_candidates          â”‚
                    â”‚  â€¢ parse_resume               â”‚
                    â”‚  â€¢ generate_inmail            â”‚
                    â”‚  â€¢ evaluate_fit               â”‚
                    â”‚  â€¢ ...                        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     LinkedIn Services         â”‚
                    â”‚  (Economic Graph, <span class="hljs-number">10</span>äº¿+ç”¨æˆ·)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-7">3.3 ä¸‰ä¸ªå…³é”®è®¾è®¡å†³ç­–</h3>
<p><strong>å†³ç­–1ï¼šä»Prompt Chainåˆ°Prompt Graph</strong></p>
<p>ä¼ ç»Ÿåšæ³•æ˜¯çº¿æ€§çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css">Prompt <span class="hljs-selector-tag">A</span> â†’ Prompt <span class="hljs-selector-tag">B</span> â†’ Prompt C â†’ è¾“å‡º
</code></pre>
<p>LinkedInç”¨çš„æ˜¯å›¾ç»“æ„ï¼š</p>
<pre><code class="hljs language-css" lang="css">        â”Œâ†’ Prompt <span class="hljs-selector-tag">B</span> â”€â”
Prompt <span class="hljs-selector-tag">A</span> â”€â”¤           â”œâ†’ Prompt D â†’ è¾“å‡º
        â””â†’ Prompt C â”€â”˜
</code></pre>
<p>å¥½å¤„å¾ˆç›´æ¥ï¼š</p>
<ul>
<li>Bå’ŒCå¯ä»¥å¹¶è¡Œè·‘ï¼Œå¿«</li>
<li>æ”¯æŒæ¡ä»¶åˆ†æ”¯ï¼Œçµæ´»</li>
<li>æŸä¸ªèŠ‚ç‚¹æŒ‚äº†å¯ä»¥é‡è¯•ï¼Œç¨³</li>
</ul>
<p><strong>å†³ç­–2ï¼šSupervisoråªç®¡è°ƒåº¦ï¼Œä¸å¹²æ´»</strong></p>
<p>è¿™ç‚¹å¾ˆé‡è¦ã€‚Supervisorçš„èŒè´£æ˜¯<strong>çº¯ç²¹çš„åè°ƒ</strong>ï¼Œä¸ç›´æ¥è°ƒç”¨å·¥å…·æˆ–æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â Supervisorçš„æ ¸å¿ƒé€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰</span>
classÂ SupervisorAgent:
Â Â Â Â defÂ process(self,Â user_request):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 1.Â ææ¸…æ¥šç”¨æˆ·æƒ³å¹²å•¥</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">intent</span>Â =Â self.understand_intent(user_request)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 2.Â æ‹†æˆå°ä»»åŠ¡</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">subtasks</span>Â =Â self.decompose_task(intent)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 3.Â åˆ†é…ç»™å¯¹åº”çš„Agentï¼ˆå¯ä»¥å¹¶è¡Œï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">results</span>Â =Â []
Â Â Â Â Â Â Â Â forÂ taskÂ inÂ subtasks:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">agent</span>Â =Â self.select_agent(task)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">result</span>Â =Â agent.execute(task)
Â Â Â Â Â Â Â Â Â Â Â Â results.append(result)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 4.Â æ±‡æ€»ç»“æœ</span>
Â Â Â Â Â Â Â Â returnÂ self.aggregate_results(results)
</code></pre>
<p>ä¸ºå•¥è¿™ä¹ˆè®¾è®¡ï¼Ÿ</p>

























<table><thead><tr><th>è®¾è®¡</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td>èŒè´£å•ä¸€</td><td>Supervisoråªç®¡è°ƒåº¦ï¼Œä¸ä¼šå› ä¸ºä¸šåŠ¡é€»è¾‘å¤æ‚è€Œå‡ºé”™</td></tr><tr><td>æ˜“äºæ‰©å±•</td><td>åŠ æ–°èƒ½åŠ›å°±åŠ ä¸ªå­Agentï¼ŒSupervisorä¸ç”¨æ”¹</td></tr><tr><td>ä¾¿äºè°ƒè¯•</td><td>å‡ºé—®é¢˜èƒ½å®šä½åˆ°å…·ä½“å“ªä¸ªAgentï¼Œä¸æ˜¯ä¸€å›¢ä¹±éº»</td></tr><tr><td>æ”¯æŒå¹¶è¡Œ</td><td>æ²¡ä¾èµ–å…³ç³»çš„ä»»åŠ¡å¯ä»¥åŒæ—¶è·‘</td></tr></tbody></table>
<p><strong>å†³ç­–3ï¼šSkill Registryç»Ÿä¸€ç®¡ç†èƒ½åŠ›</strong></p>
<p>æ‰€æœ‰Agentçš„èƒ½åŠ›éƒ½æ³¨å†Œåœ¨ä¸€ä¸ªç»Ÿä¸€çš„Registryé‡Œï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â SkillÂ Registryç¤ºä¾‹</span>
skill_registryÂ =Â {
Â Â Â Â <span class="hljs-string">"search_candidates"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"agent"</span>:Â <span class="hljs-string">"sourcing_agent"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ ¹æ®æ¡ä»¶æœç´¢å€™é€‰äºº"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"parameters"</span>:Â [<span class="hljs-string">"job_requirements"</span>,Â <span class="hljs-string">"filters"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"output"</span>:Â <span class="hljs-string">"candidate_list"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"generate_inmail"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"agent"</span>:Â <span class="hljs-string">"outreach_agent"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"ç”Ÿæˆä¸ªæ€§åŒ–å¤–è”æ¶ˆæ¯"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"parameters"</span>:Â [<span class="hljs-string">"candidate_profile"</span>,Â <span class="hljs-string">"job_info"</span>,Â <span class="hljs-string">"tone"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"output"</span>:Â <span class="hljs-string">"message_content"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-comment">#Â ...</span>
}
</code></pre>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>Supervisorèƒ½åŠ¨æ€å‘ç°æœ‰å“ªäº›èƒ½åŠ›å¯ç”¨</li>
<li>æ¥å£ç»Ÿä¸€ï¼Œé›†æˆæˆæœ¬ä½</li>
<li>æ–¹ä¾¿åšæƒé™æ§åˆ¶å’Œå®¡è®¡</li>
</ul>
<hr/>
<h2 data-id="heading-8">å››ã€ç”¨ LangGraph æ¡†æ¶æ¥å®ç°ä¸€ä¸ªç®€å•çš„ç‰ˆæœ¬</h2>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„å®ç°æ€è·¯ã€‚</p>
<h3 data-id="heading-9">4.1 ä¸ºä»€ä¹ˆé€‰LangGraphï¼Ÿ</h3>
<p>å…ˆè¯´ç»“è®ºï¼Œæˆ‘å¯¹æ¯”äº†å‡ ä¸ªä¸»æµæ¡†æ¶ï¼š</p>






























<table><thead><tr><th>æ¡†æ¶</th><th>ç‰¹ç‚¹</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td>LangChain</td><td>çº¿æ€§Chainï¼Œä¸Šæ‰‹ç®€å•</td><td>å•è½®é—®ç­”ã€ç®€å•RAG</td></tr><tr><td>AutoGen</td><td>å¯¹è¯å¼å¤šAgent</td><td>ç ”ç©¶æ¢ç´¢ã€å¤´è„‘é£æš´</td></tr><tr><td>CrewAI</td><td>è§’è‰²æ‰®æ¼”å¼åä½œ</td><td>åˆ›æ„ä»»åŠ¡ã€å†…å®¹ç”Ÿæˆ</td></tr><tr><td><strong>LangGraph</strong></td><td><strong>çŠ¶æ€å›¾+å¯æ§æµç¨‹</strong></td><td><strong>ç”Ÿäº§çº§å·¥ä½œæµ</strong></td></tr></tbody></table>
<p>é€‰LangGraphçš„åŸå› ï¼š</p>
<ol>
<li><strong>StateGraph</strong>ï¼šçŠ¶æ€ç®¡ç†æ˜¯æ˜¾å¼çš„ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½è¿½æº¯</li>
<li><strong>æ¡ä»¶è¾¹</strong>ï¼šæ”¯æŒå¤æ‚åˆ†æ”¯é€»è¾‘</li>
<li><strong>æŒä¹…åŒ–</strong>ï¼šå·¥ä½œæµå¯ä»¥ä¸­æ–­ã€æ¢å¤ï¼Œé€‚åˆé•¿æ—¶é—´ä»»åŠ¡</li>
<li><strong>Human-in-the-Loop</strong>ï¼šåŸç”Ÿæ”¯æŒäººå·¥å®¡æ‰¹èŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-10">4.2 LangGraphæ ¸å¿ƒæ¦‚å¿µ</h3>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph æ ¸å¿ƒæ¦‚å¿µ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Stateï¼ˆçŠ¶æ€ï¼‰                                               â”‚
â”‚  â””â”€ TypedDictå®šä¹‰ï¼ŒèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œæ›´æ–°                        â”‚
â”‚                                                              â”‚
â”‚  Nodeï¼ˆèŠ‚ç‚¹ï¼‰                                                â”‚
â”‚  â””â”€ å¹²æ´»çš„å‡½æ•°ï¼Œæ¥æ”¶Stateï¼Œè¿”å›æ›´æ–°åçš„State                 â”‚
â”‚                                                              â”‚
â”‚  Edgeï¼ˆè¾¹ï¼‰                                                  â”‚
â”‚  â””â”€ è¿æ¥èŠ‚ç‚¹ï¼Œå®šä¹‰æ‰§è¡Œé¡ºåº                                   â”‚
â”‚                                                              â”‚
â”‚  Conditional Edgeï¼ˆæ¡ä»¶è¾¹ï¼‰                                  â”‚
â”‚  â””â”€ æ ¹æ®StateåŠ¨æ€å†³å®šä¸‹ä¸€ä¸ªèŠ‚ç‚¹                              â”‚
â”‚                                                              â”‚
â”‚  <span class="hljs-keyword">START</span> <span class="hljs-operator">/</span> <span class="hljs-keyword">END</span>                                                 â”‚
â”‚  â””â”€ å›¾çš„å…¥å£å’Œå‡ºå£                                           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ¦‚å¿µä¸å¤šï¼Œç›´æ¥çœ‹ä»£ç æ›´æ¸…æ¥šã€‚</p>
<h3 data-id="heading-11">4.3 æ ¸å¿ƒå®ç°æ€è·¯</h3>
<blockquote>
<p>å®Œæ•´ä»£ç è§æ–‡æœ« GitHub ä»“åº“ï¼Œè¿™é‡Œåªè¯´æ ¸å¿ƒæ€è·¯ã€‚</p>
</blockquote>
<p><strong>æ•´ä½“æ¶æ„åˆ†5å±‚ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stateå±‚ï¼šHiringState (TypedDict)                       â”‚
â”‚  - æ‹›è˜ä»»åŠ¡ä¿¡æ¯ã€å€™é€‰äººæ•°æ®ã€æµç¨‹æ§åˆ¶ã€å®¡æ ¸çŠ¶æ€          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Toolså±‚ï¼š<span class="hljs-keyword">@tool</span> è£…é¥°å™¨å®šä¹‰çš„èƒ½åŠ›                        â”‚
â”‚  - search_talent_<span class="hljs-attribute">pool</span>: æœç´¢å€™é€‰äºº                       â”‚
â”‚  - evaluate_<span class="hljs-attribute">candidate</span>: LLMè¯„ä¼°åŒ¹é…åº¦                    â”‚
â”‚  - generate_<span class="hljs-attribute">inmail</span>: LLMç”Ÿæˆä¸ªæ€§åŒ–æ¶ˆæ¯                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Nodeå±‚ï¼šå·¥ä½œæµèŠ‚ç‚¹å‡½æ•°                                 â”‚
â”‚  - supervisor_<span class="hljs-attribute">node</span>: LLMæ™ºèƒ½å†³ç­–ä¸‹ä¸€æ­¥                   â”‚
â”‚  - sourcing_<span class="hljs-attribute">node</span>: æœç´¢+åå¥½æ’åº                         â”‚
â”‚  - screening_<span class="hljs-attribute">node</span>: é€ä¸ªè¯„ä¼°å€™é€‰äºº                       â”‚
â”‚  - outreach_<span class="hljs-attribute">node</span>: ä¸ºæ‰¹å‡†çš„å€™é€‰äººç”Ÿæˆæ¶ˆæ¯                â”‚
â”‚  - human_review_<span class="hljs-attribute">node</span>: interruptç­‰å¾…äººå·¥å®¡æ ¸             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Graphå±‚ï¼šStateGraph + æ¡ä»¶è¾¹                           â”‚
â”‚  - START â†’ supervisor â†’ å„èŠ‚ç‚¹ â†’ supervisorï¼ˆå¾ªç¯ï¼‰     â”‚
â”‚  - æ¡ä»¶è¾¹æ ¹æ®next_actionè·¯ç”±                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Memoryå±‚ï¼šExperiential Memory                          â”‚
â”‚  - <span class="hljs-attribute">RecruiterMemory</span>: å­˜å‚¨ç”¨æˆ·åå¥½                        â”‚
â”‚  - <span class="hljs-attribute">MemoryStore</span>: æŒä¹…åŒ–+ä»åé¦ˆä¸­å­¦ä¹                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å…³é”®å®ç°ç‚¹ï¼š</strong></p>






























<table><thead><tr><th>æ¨¡å—</th><th>æ ¸å¿ƒé€»è¾‘</th><th>æ–‡ä»¶ä½ç½®</th></tr></thead><tbody><tr><td>Supervisorå†³ç­–</td><td>æŠŠå½“å‰çŠ¶æ€æ‘˜è¦å‘ç»™LLMï¼Œè®©å®ƒå†³å®šä¸‹ä¸€æ­¥</td><td><code>src/workflow.py</code></td></tr><tr><td>åå¥½æ’åº</td><td>ç”¨LLMåšè¯­ä¹‰åŒ¹é…ï¼Œç»™å€™é€‰äººåŠ åå¥½åˆ†</td><td><code>src/llm_service.py</code></td></tr><tr><td>Human-in-the-Loop</td><td>ç”¨<code>interrupt()</code>æš‚åœï¼Œ<code>Command(resume=)</code>æ¢å¤</td><td><code>src/workflow.py</code></td></tr><tr><td>è®°å¿†æ›´æ–°</td><td>ä»ç”¨æˆ·çš„æ‰¹å‡†/æ‹’ç»åŠ¨ä½œä¸­æå–åå¥½ä¿¡å·</td><td><code>src/memory.py</code></td></tr></tbody></table>
<p><strong>å·¥ä½œæµå›¾ç¤ºï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    START    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€â–¶â”‚     Supervisor        â”‚â—€â”€â”€â”€â”€â”
              â”‚     â”‚  (LLM æ™ºèƒ½å†³ç­–)        â”‚     â”‚
              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
              â”‚                 â”‚                 â”‚
              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
              â”‚     â–¼           â–¼           â–¼     â”‚
              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
              â”‚ â”‚Sourcingâ”‚ â”‚Screening â”‚ â”‚Outreachâ”‚â”‚
              â”‚ â”‚  Node  â”‚ â”‚   Node   â”‚ â”‚  Node  â”‚â”‚
              â”‚ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚
              â”‚     â”‚           â”‚           â”‚     â”‚
              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
              â”‚                 â”‚                 â”‚
              â”‚                 â–¼                 â”‚
              â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
              â”‚         â”‚Human Review â”‚           â”‚
              â”‚         â”‚(interrupt)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼ (<span class="hljs-attr">next_action</span> == <span class="hljs-string">"FINISH"</span>)
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚     END     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12">4.4 Human-in-the-Loopï¼šå…³é”®ä»£ç ç‰‡æ®µ</h3>
<p>è¿™æ˜¯æ•´ä¸ªæ¶æ„é‡Œæœ€å…³é”®çš„è®¾è®¡ã€‚ç”¨LangGraphçš„<code>interrupt</code>æœºåˆ¶å®ç°ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">fromÂ langgraph.typesÂ importÂ interrupt,Â Command

<span class="hljs-comment">#Â åœ¨èŠ‚ç‚¹ä¸­æš‚åœï¼Œç­‰å¾…äººå·¥è¾“å…¥</span>
user_feedbackÂ =Â interrupt({
Â Â Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"human_review"</span>,
Â Â Â Â <span class="hljs-string">"review_content"</span>:Â {<span class="hljs-string">"candidates"</span>:Â screened[:5]},
Â Â Â Â <span class="hljs-string">"prompt"</span>:Â <span class="hljs-string">"è¯·å®¡æ ¸å€™é€‰äºº"</span>
})

<span class="hljs-comment">#Â è°ƒç”¨æ–¹æ¢å¤æ‰§è¡Œ</span>
resultÂ =Â app.invoke(Command(resume=human_feedback),Â config)
</code></pre>
<p>æ ¸å¿ƒå°±è¿™å‡ è¡Œï¼Œå‰©ä¸‹çš„æ˜¯ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚</p>
<h3 data-id="heading-13">4.5 Experiential Memoryï¼šæ ¸å¿ƒæ€è·¯</h3>
<p>AIè®°ä½ç”¨æˆ·åå¥½çš„å…³é”®ï¼š<strong>ä»æ¯æ¬¡äººå·¥å®¡æ ¸ä¸­å­¦ä¹ </strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â ç”¨æˆ·æ‰¹å‡†äº†æŸä¸ªå€™é€‰äººÂ â†’Â æå–ä»–çš„æŠ€èƒ½ä½œä¸ºæ­£å‘ä¿¡å·</span>
forÂ candidateÂ inÂ approved_candidates:
Â Â Â Â forÂ skillÂ inÂ candidate<span class="hljs-section">["skills"]</span>:
Â Â Â Â Â Â Â Â memory.positive_signals.append(skill)

<span class="hljs-comment">#Â ä¸‹æ¬¡æœç´¢æ—¶ï¼Œç”¨LLMåšè¯­ä¹‰åŒ¹é…ï¼Œç»™ç¬¦åˆåå¥½çš„å€™é€‰äººåŠ åˆ†</span>
<span class="hljs-attr">preference_scores</span>Â =Â match_preferences_with_llm(candidates,Â memory.positive_signals)
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼Œä½†æ•ˆæœå¾ˆæ˜æ˜¾â€”â€”ç”¨å¾—è¶Šä¹…ï¼Œæ¨èè¶Šå‡†ã€‚</p>
<hr/>
<h2 data-id="heading-14">äº”ã€ä¸ºä»€ä¹ˆä½ çš„AIåŠ©æ‰‹ç”¨ä¹…äº†è¿˜æ˜¯ä¸æ‡‚ä½ ï¼Ÿ</h2>
<p>è¿™æ˜¯LinkedIn Hiring Assistant<strong>æœ€å€¼å¾—æŠ„çš„è®¾è®¡</strong>ã€‚</p>
<h3 data-id="heading-15">5.1 ä¸€ä¸ªæ‰å¿ƒçš„é—®é¢˜</h3>
<p>ä½ æœ‰æ²¡æœ‰è¿™ç§ä½“éªŒï¼š</p>
<ul>
<li>ChatGPTç”¨äº†ä¸€å¹´ï¼Œæ¯æ¬¡è¿˜æ˜¯è¦é‡æ–°è§£é‡Šä½ çš„èƒŒæ™¯</li>
<li>ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ï¼Œæ°¸è¿œä¸çŸ¥é“ä½ å…³å¿ƒä»€ä¹ˆ</li>
<li>AIåŠ©æ‰‹æ¨èçš„ä¸œè¥¿ï¼Œæ°¸è¿œä¸å¯¹å‘³</li>
</ul>
<p><strong>æ ¹æœ¬åŸå› ï¼šæ— çŠ¶æ€è®¾è®¡</strong>ã€‚æ¯æ¬¡å¯¹è¯éƒ½æ˜¯å…¨æ–°å¼€å§‹ï¼ŒAIå‹æ ¹ä¸è®°å¾—ä½ æ˜¯è°ã€‚</p>
<p>LinkedInçš„è§£æ³•æ˜¯<strong>Experiential Memory</strong>â€”â€”ä¸‰å±‚è®°å¿†æ¶æ„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76be88322d13444ba1d92c0aba77b9be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5bGF6YKq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770027118&amp;x-signature=U9aQRYCAx9GgGS7OujHuecP%2Fs7w%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">5.2 æŠ€æœ¯å®ç°æ€è·¯</h3>
<p><strong>å±‚æ¬¡1ï¼šçŸ­æœŸè®°å¿†ï¼ˆSession Memoryï¼‰</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â ä¼šè¯çº§è®°å¿†ï¼šå½“å‰æ‹›è˜ä»»åŠ¡çš„ä¸Šä¸‹æ–‡</span>
session_memoryÂ =Â {
Â Â Â Â <span class="hljs-string">"current_job"</span>:Â <span class="hljs-string">"SeniorÂ BackendÂ Engineer"</span>,
Â Â Â Â <span class="hljs-string">"discussed_candidates"</span>:Â [<span class="hljs-string">"Alice"</span>,Â <span class="hljs-string">"Bob"</span>],
Â Â Â Â <span class="hljs-string">"user_feedback"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"Alice"</span>:Â <span class="hljs-string">"æŠ€æœ¯ä¸é”™ä½†ç»éªŒä¸è¶³"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"Bob"</span>:Â <span class="hljs-string">"å¾ˆåŒ¹é…ï¼Œå·²å‘InMail"</span>
Â Â Â Â }
}
</code></pre>
<p><strong>å±‚æ¬¡2ï¼šé•¿æœŸè®°å¿†ï¼ˆUser Profile Memoryï¼‰</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â ç”¨æˆ·çº§è®°å¿†ï¼šè·¨ä»»åŠ¡çš„åå¥½ç§¯ç´¯</span>
user_memoryÂ =Â {
Â Â Â Â <span class="hljs-string">"recruiter_id"</span>:Â <span class="hljs-string">"12345"</span>,
Â Â Â Â <span class="hljs-string">"preference_model"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"must_have_signals"</span>:Â [<span class="hljs-string">"å¤§å‚èƒŒæ™¯"</span>,Â <span class="hljs-string">"å¼€æºè´¡çŒ®"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"red_flags"</span>:Â [<span class="hljs-string">"é¢‘ç¹è·³æ§½"</span>,Â <span class="hljs-string">"æŠ€èƒ½æè¿°æ¨¡ç³Š"</span>],
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"historical_success"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"hired_profiles"</span>:Â [...],
Â Â Â Â Â Â Â Â <span class="hljs-string">"common_patterns"</span>:Â [<span class="hljs-string">"å¹³å‡5å¹´ç»éªŒ"</span>,Â <span class="hljs-string">"70%æœ‰ç¡•å£«å­¦å†"</span>]
Â Â Â Â }
}
</code></pre>
<p><strong>å±‚æ¬¡3ï¼šç»„ç»‡è®°å¿†ï¼ˆOrganization Memoryï¼‰</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â ç»„ç»‡çº§è®°å¿†ï¼šå…¬å¸å±‚é¢çš„æ‹›è˜çŸ¥è¯†</span>
org_memoryÂ =Â {
Â Â Â Â <span class="hljs-string">"company_id"</span>:Â <span class="hljs-string">"linkedin"</span>,
Â Â Â Â <span class="hljs-string">"culture_fit_signals"</span>:Â [<span class="hljs-string">"åä½œå¯¼å‘"</span>,Â <span class="hljs-string">"æ•°æ®é©±åŠ¨"</span>],
Â Â Â Â <span class="hljs-string">"compliance_rules"</span>:Â [<span class="hljs-string">"å¿…é¡»è€ƒè™‘å¤šæ ·æ€§"</span>,Â <span class="hljs-string">"è–ªèµ„èŒƒå›´é™åˆ¶"</span>]
}
</code></pre>
<h3 data-id="heading-17">5.3 è·ŸRAGæœ‰å•¥åŒºåˆ«ï¼Ÿ</h3>
<p>å¾ˆå¤šäººä¼šé—®ï¼šè¿™ä¸å°±æ˜¯RAGå—ï¼Ÿ</p>
<p><strong>çœŸä¸ä¸€æ ·ã€‚</strong></p>



































<table><thead><tr><th>ç»´åº¦</th><th>RAG</th><th>Experiential Memory</th></tr></thead><tbody><tr><td><strong>å­˜çš„æ˜¯å•¥</strong></td><td>åŸå§‹æ–‡æ¡£/å¯¹è¯</td><td>æç‚¼åçš„åå¥½æ¨¡å‹</td></tr><tr><td><strong>æ€ä¹ˆæ‰¾</strong></td><td>å‘é‡ç›¸ä¼¼åº¦åŒ¹é…</td><td>ç»“æ„åŒ–æŸ¥è¯¢+æ¨¡å¼åŒ¹é…</td></tr><tr><td><strong>æ€ä¹ˆæ›´æ–°</strong></td><td>æ‰‹åŠ¨æ›´æ–°æ–‡æ¡£</td><td>è‡ªåŠ¨ä»äº¤äº’ä¸­å­¦ä¹ </td></tr><tr><td><strong>æ€ä¹ˆç”¨</strong></td><td>å¡è¿›Promptå½“ä¸Šä¸‹æ–‡</td><td>ç›´æ¥å½±å“Agentå†³ç­–é€»è¾‘</td></tr><tr><td><strong>ä¸ªæ€§åŒ–ç¨‹åº¦</strong></td><td>ä½</td><td>é«˜ï¼ˆåŒæ ·é—®é¢˜ï¼Œä¸åŒç”¨æˆ·ä¸åŒç»“æœï¼‰</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼šExperiential Memoryçš„æ ¸å¿ƒæ˜¯"å­¦ä¹ "ï¼Œä¸æ˜¯"å­˜å‚¨"ã€‚</strong></p>
<hr/>
<h2 data-id="heading-18">å…­ã€Human-in-the-Loopï¼šä¸ºä»€ä¹ˆLinkedInåªè‡ªåŠ¨åŒ–80%ï¼Ÿ</h2>
<h3 data-id="heading-19">6.1 ä¸æ˜¯åšä¸åˆ°100%ï¼Œæ˜¯æ•…æ„ä¸åš</h3>
<p>LinkedInå®˜æ–¹è¯´Hiring Assistantå¯ä»¥è‡ªåŠ¨åŒ–**80%**çš„æ‹›è˜æµç¨‹ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸æ˜¯100%ï¼ŸæŠ€æœ¯ä¸Šåšä¸åˆ°å—ï¼Ÿ</p>
<p><strong>ä¸æ˜¯åšä¸åˆ°ï¼Œæ˜¯æ•…æ„ä¸åšã€‚</strong></p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä»»åŠ¡è‡ªåŠ¨åŒ–ç¨‹åº¦åˆ†å±‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…¨è‡ªåŠ¨ï¼ˆæ— éœ€äººå·¥ï¼‰                                          â”‚
â”‚  â”œâ”€ JDæ ¼å¼åŒ–å’Œä¼˜åŒ–ã€å€™é€‰äººåˆç­›ã€æ¶ˆæ¯æ¨¡æ¿ç”Ÿæˆ                  â”‚
â”‚                                                              â”‚
â”‚  åŠè‡ªåŠ¨ï¼ˆAIå»ºè®® + äººå·¥ç¡®è®¤ï¼‰                                 â”‚
â”‚  â”œâ”€ å€™é€‰äººæ¨èæ’åºã€InMailå†…å®¹å®šåˆ¶ã€é¢è¯•å®‰æ’å»ºè®®              â”‚
â”‚                                                              â”‚
â”‚  äººå·¥ä¸»å¯¼ï¼ˆAIè¾…åŠ©ï¼‰                                          â”‚
â”‚  â”œâ”€ æœ€ç»ˆå½•ç”¨å†³ç­–ã€è–ªèµ„è°ˆåˆ¤ã€æ–‡åŒ–åŒ¹é…åˆ¤æ–­                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªåŸå› ï¼š</strong></p>





















<table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é™ä½é£é™©</strong></td><td>æ‹›è˜æ˜¯é«˜é£é™©å†³ç­–ï¼Œæ‹›é”™ä¸€ä¸ªäººå¯èƒ½æŸå¤±å‡ åä¸‡</td></tr><tr><td><strong>å»ºç«‹ä¿¡ä»»</strong></td><td>è®©ç”¨æˆ·å…ˆè§‚å¯ŸAIå†³ç­–è´¨é‡ï¼Œä¿¡ä»»å»ºç«‹åå†é€æ­¥æ”¾å¼€</td></tr><tr><td><strong>æŒç»­å­¦ä¹ </strong></td><td>äººå·¥ç¡®è®¤/æ‹’ç»çš„åŠ¨ä½œæœ¬èº«å°±æ˜¯è®­ç»ƒæ•°æ®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-20">ä¸ƒã€å†™åœ¨æœ€å</h2>
<p>LinkedIn Hiring Assistantä¸æ˜¯æœ€ç‚«é…·çš„AIäº§å“ï¼Œä½†å®ƒå¯èƒ½æ˜¯<strong>æœ€å€¼å¾—æŠ„çš„</strong>ã€‚</p>
<p>å®ƒå‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªæœ´ç´ çš„é“ç†ï¼š<strong>å·¥ä¸šçº§AIç³»ç»Ÿçš„æ ¸å¿ƒä¸æ˜¯æ¨¡å‹å¤šå¼ºï¼Œè€Œæ˜¯æ¶æ„å¤šç¨³</strong>ã€‚</p>
<p><strong>4æ¡æ ¸å¿ƒåŸåˆ™ï¼Œå»ºè®®æ”¶è—ï¼š</strong></p>

























<table><thead><tr><th>åŸåˆ™</th><th>ä¸€å¥è¯æ€»ç»“</th></tr></thead><tbody><tr><td>Agentæ˜¯æ¶æ„èŒƒå¼</td><td>çŠ¶æ€ç®¡ç†ã€å¼‚æ­¥æ‰§è¡Œã€å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘</td></tr><tr><td>è®°å¿†ç³»ç»Ÿæ˜¯å£å’</td><td>ç”¨æˆ·åå¥½å»ºæ¨¡æ‰æ˜¯æŠ¤åŸæ²³ï¼Œä¸æ˜¯RAG</td></tr><tr><td>Human-in-the-Loopæ˜¯è®¾è®¡</td><td>100%è‡ªåŠ¨åŒ–ä¸æ˜¯ç›®æ ‡ï¼Œå¯ä¿¡èµ–çš„è‡ªåŠ¨åŒ–æ‰æ˜¯</td></tr><tr><td>ç”Ÿäº§åŒ–éœ€è¦å·¥ç¨‹æ€ç»´</td><td>å¹‚ç­‰ã€çŠ¶æ€æœºã€å¼‚æ­¥ã€å¯è§‚æµ‹ï¼Œç¼ºä¸€ä¸å¯</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-21">æºç è·å–</h2>
<p>æˆ‘æŠŠè¿™å¥—æ¶æ„ç”¨LangGraphå®Œæ•´å¤ç°äº†ä¸€éï¼Œä»£ç å·²å¼€æºï¼š</p>
<p><strong>GitHubï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzhuzhaoyun%2Flinkedin-hiring-assistant-py" target="_blank" title="https://github.com/zhuzhaoyun/linkedin-hiring-assistant-py" ref="nofollow noopener noreferrer">github.com/zhuzhaoyun/â€¦</a></p>
<p>åŒ…å«ï¼š</p>
<ul>
<li>å®Œæ•´çš„Supervisor Multi-Agentå·¥ä½œæµ</li>
<li>Experiential Memoryå®ç°</li>
<li>Human-in-the-Loopä¸­æ–­æ¢å¤</li>
<li>å¯ç›´æ¥è¿è¡Œçš„Demo</li>
</ul>
<hr/>
<p><strong>å…³äºæˆ‘ä»¬</strong></p>
<p>æˆ‘ä»¬æ˜¯ä¸€å®¶é¢å‘ AEC è¡Œä¸šçš„ AI åˆ›ä¸šå…¬å¸ï¼Œä¸“æ³¨ä¼ä¸šçº§AIåº”ç”¨ç³»ç»Ÿçš„è®¾è®¡ä¸è½åœ°ã€‚å¦‚æœä½ åœ¨åšç±»ä¼¼çš„AIåº”ç”¨å·¥ç¨‹åŒ–ï¼Œæˆ–è€…å¯¹å‚ç›´è¡Œä¸šAIè½åœ°æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è¯„è®ºåŒºè®¨è®ºæˆ–æ·»åŠ è”ç³»æ–¹å¼æ²Ÿé€šã€‚</p>
<p><strong>å¾®ä¿¡ï¼šDamondut</strong></p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[isexe@3.1.1æºç é˜…è¯»]]></title>    <link>https://juejin.cn/post/7599155566298267691</link>    <guid>https://juejin.cn/post/7599155566298267691</guid>    <pubDate>2026-01-26T10:27:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298267691" data-draft-id="7599237603975839787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="isexe@3.1.1æºç é˜…è¯»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T10:27:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç±³ä¸˜"/> <meta itemprop="url" content="https://juejin.cn/user/1611227736052074"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            isexe@3.1.1æºç é˜…è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1611227736052074/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç±³ä¸˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:27:06.000Z" title="Mon Jan 26 2026 10:27:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>å‘å¸ƒæ—¥æœŸ 2023 å¹´ 8 æœˆ 3 æ—¥</em></p>
<p><code>isexe</code> æ˜¯<strong>è·¨å¹³å°æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸ºã€Œå¯æ‰§è¡Œæ–‡ä»¶ã€çš„ä¸“ç”¨å·¥å…·åŒ…</strong>ï¼Œæ ¸å¿ƒè§£å†³ã€ŒWindows å’Œ Unix ç³»ç»Ÿåˆ¤æ–­å¯æ‰§è¡Œæ–‡ä»¶çš„è§„åˆ™å®Œå…¨ä¸åŒã€çš„é—®é¢˜ã€‚</p>
<p>unixç³»ç»Ÿæ ¹æ®æ–‡ä»¶æƒé™åˆ¤æ–­ï¼›windowç³»ç»Ÿæ ¹æ®æ–‡ä»¶æ‰©å±•ååˆ¤æ–­ã€‚</p>
<h2 data-id="heading-0">å…¥å£æ–‡ä»¶ index.js</h2>
<p><code>isexe-3.1.1/src/index.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> posix <span class="hljs-keyword">from</span> <span class="hljs-string">'./posix.js'</span> <span class="hljs-comment">// å¯¼å…¥ POSIX ç³»ç»Ÿï¼ˆLinux/macOS ç­‰ï¼‰çš„å®ç°</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> win32 <span class="hljs-keyword">from</span> <span class="hljs-string">'./win32.js'</span> <span class="hljs-comment">// å¯¼å…¥ Windows ç³»ç»Ÿçš„å®ç°</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./options.js'</span> <span class="hljs-comment">// å¯¼å‡ºé…ç½®é€‰é¡¹ç±»å‹ï¼ˆå¦‚ IsexeOptionsï¼‰</span>
<span class="hljs-keyword">export</span> { win32, posix }  <span class="hljs-comment">// å…è®¸ç›´æ¥è®¿é—®ç‰¹å®šå¹³å°çš„å®ç°</span>

<span class="hljs-keyword">const</span> platform = process.<span class="hljs-property">env</span>.<span class="hljs-property">_ISEXE_TEST_PLATFORM_</span> || process.<span class="hljs-property">platform</span>
<span class="hljs-keyword">const</span> impl = platform === <span class="hljs-string">'win32'</span> ? win32 : posix

<span class="hljs-comment">/**
 * Determine whether a path is executable on the current platform.
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isexe = impl.<span class="hljs-property">isexe</span>
<span class="hljs-comment">/**
 * Synchronously determine whether a path is executable on the
 * current platform.
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> sync = impl.<span class="hljs-property">sync</span>

</code></pre>
<h2 data-id="heading-1">posix.isexe(å¼‚æ­¥)</h2>
<p><code>isexe-3.1.1/src/posix.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> isexe = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">path</span>: string,  <span class="hljs-comment">// è¦æ£€æŸ¥çš„æ–‡ä»¶è·¯å¾„ï¼ˆæ¯”å¦‚ "/usr/bin/node" æˆ– "C:\\node.exe"ï¼‰</span>
  <span class="hljs-attr">options</span>: <span class="hljs-title class_">IsexeOptions</span> = {}  <span class="hljs-comment">// é…ç½®é¡¹ï¼Œé»˜è®¤ç©ºå¯¹è±¡</span>
): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; =&gt; {
  
  <span class="hljs-keyword">const</span> { ignoreErrors = <span class="hljs-literal">false</span> } = options

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// await stat(path)ï¼šè·å–æ–‡ä»¶çŠ¶æ€</span>
    <span class="hljs-comment">// checkStat(statResult, options)ï¼šåˆ¤æ–­æ˜¯å¦å¯æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkStat</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">stat</span>(path), options)
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// æŠŠé”™è¯¯è½¬ä¸º Node.js æ ‡å‡†é”™è¯¯ç±»å‹ï¼ˆå¸¦é”™è¯¯ç ï¼‰</span>
    <span class="hljs-keyword">const</span> er = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ErrnoException</span>
    <span class="hljs-keyword">if</span> (ignoreErrors || er.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">throw</span> er <span class="hljs-comment">// éé¢„æœŸé”™è¯¯ï¼Œå‘ä¸ŠæŠ›å‡º</span>
  }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Stats</span>, statSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>
<span class="hljs-keyword">import</span> { stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>
</code></pre>
<h3 data-id="heading-2">checkStat</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkStat</span> = (<span class="hljs-params">stat: Stats, options: IsexeOptions</span>) =&gt;
  stat.<span class="hljs-title function_">isFile</span>() &amp;&amp; <span class="hljs-title function_">checkMode</span>(stat, options)

</code></pre>
<h3 data-id="heading-3">checkMode</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkMode</span> = (<span class="hljs-params">
  <span class="hljs-comment">// æ–‡ä»¶çš„ Stats å¯¹è±¡ï¼ˆé€šå¸¸ç”± fs.stat æˆ– fs.lstat è·å–ï¼‰</span>
  <span class="hljs-comment">// åŒ…å«æ–‡ä»¶çš„æƒé™ä½ï¼ˆmodeï¼‰ã€æ‰€æœ‰è€… IDï¼ˆuidï¼‰ã€æ‰€å±ç»„ IDï¼ˆgidï¼‰ç­‰å…ƒæ•°æ®ã€‚</span>
  stat: Stats, 
  <span class="hljs-comment">// é…ç½®å¯¹è±¡ï¼Œå…è®¸è‡ªå®šä¹‰ç”¨æˆ· IDï¼ˆuidï¼‰ã€ç»„ IDï¼ˆgidï¼‰ã€ç”¨æˆ·æ‰€å±ç»„åˆ—è¡¨ï¼ˆgroupsï¼‰ï¼Œé»˜è®¤ä½¿ç”¨å½“å‰è¿›ç¨‹çš„ç”¨æˆ·ä¿¡æ¯ã€‚</span>
  options: IsexeOptions
</span>) =&gt; {
  <span class="hljs-comment">// 1ã€è·å–ç”¨æˆ·ä¸ç»„ä¿¡æ¯</span>
  <span class="hljs-comment">// å½“å‰ç”¨æˆ·çš„ IDï¼ˆä¼˜å…ˆä½¿ç”¨ options.uidï¼Œå¦åˆ™è°ƒç”¨ process.getuid() è·å–å½“å‰è¿›ç¨‹çš„ç”¨æˆ· IDï¼‰ã€‚</span>
  <span class="hljs-keyword">const</span> myUid = options.<span class="hljs-property">uid</span> ?? process.<span class="hljs-property">getuid</span>?.()
  <span class="hljs-comment">// å½“å‰ç”¨æˆ·æ‰€å±çš„ç»„ ID åˆ—è¡¨ï¼ˆä¼˜å…ˆä½¿ç”¨ options.groupsï¼Œå¦åˆ™è°ƒç”¨ process.getgroups() è·å–ï¼‰ã€‚</span>
  <span class="hljs-keyword">const</span> myGroups = options.<span class="hljs-property">groups</span> ?? process.<span class="hljs-property">getgroups</span>?.() ?? []
  <span class="hljs-comment">// å½“å‰ç”¨æˆ·çš„ä¸»ç»„ IDï¼ˆä¼˜å…ˆä½¿ç”¨ options.gidï¼Œå¦åˆ™è°ƒç”¨ process.getgid()ï¼Œæˆ–ä» myGroups å–ç¬¬ä¸€ä¸ªç»„ IDï¼‰ã€‚</span>
  <span class="hljs-keyword">const</span> myGid = options.<span class="hljs-property">gid</span> ?? process.<span class="hljs-property">getgid</span>?.() ?? myGroups[<span class="hljs-number">0</span>]
  <span class="hljs-comment">// è‹¥æ— æ³•è·å– myUid æˆ– myGidï¼ŒæŠ›å‡ºé”™è¯¯ï¼ˆæƒé™åˆ¤æ–­ä¾èµ–è¿™äº›ä¿¡æ¯ï¼‰</span>
  <span class="hljs-keyword">if</span> (myUid === <span class="hljs-literal">undefined</span> || myGid === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot get uid or gid'</span>)
  }

  <span class="hljs-comment">// 2ã€æ„å»ºç”¨æˆ·æ‰€å±ç»„é›†åˆ</span>
  <span class="hljs-keyword">const</span> groups = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([myGid, ...myGroups])

  <span class="hljs-comment">// 3ã€è§£ææ–‡ä»¶æƒé™ä½ä¸å½’å±ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> mod = stat.<span class="hljs-property">mode</span> <span class="hljs-comment">// æ–‡ä»¶çš„æƒé™ä½ï¼ˆæ•´æ•°ï¼Œå¦‚ 0o755 è¡¨ç¤º rwxr-xr-xï¼‰</span>
  <span class="hljs-keyword">const</span> uid = stat.<span class="hljs-property">uid</span> <span class="hljs-comment">// æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ· ID</span>
  <span class="hljs-keyword">const</span> gid = stat.<span class="hljs-property">gid</span> <span class="hljs-comment">// æ–‡ä»¶æ‰€å±ç»„çš„ç»„ ID</span>

  <span class="hljs-comment">// 4ã€å®šä¹‰æƒé™ä½æ©ç </span>
  <span class="hljs-comment">// å…«è¿›åˆ¶ 100 â†’ åè¿›åˆ¶ 64 â†’ å¯¹åº”æ‰€æœ‰è€…çš„æ‰§è¡Œæƒé™ä½ï¼ˆxï¼‰</span>
  <span class="hljs-keyword">const</span> u = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'100'</span>, <span class="hljs-number">8</span>)
  <span class="hljs-comment">// å…«è¿›åˆ¶ 010 â†’ åè¿›åˆ¶ 8 â†’ å¯¹åº”æ‰€å±ç»„çš„æ‰§è¡Œæƒé™ä½ï¼ˆxï¼‰</span>
  <span class="hljs-keyword">const</span> g = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'010'</span>, <span class="hljs-number">8</span>)
  <span class="hljs-comment">// å…«è¿›åˆ¶ 001 â†’ åè¿›åˆ¶ 1 â†’ å¯¹åº”å…¶ä»–ç”¨æˆ·çš„æ‰§è¡Œæƒé™ä½ï¼ˆxï¼‰</span>
  <span class="hljs-keyword">const</span> o = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'001'</span>, <span class="hljs-number">8</span>)
  <span class="hljs-comment">// æ‰€æœ‰è€…å’Œæ‰€å±ç»„çš„æ‰§è¡Œæƒé™ä½æ©ç ï¼ˆ64 | 8 = 72ï¼‰</span>
  <span class="hljs-keyword">const</span> ug = u | g

  <span class="hljs-comment">// 5ã€æƒé™åˆ¤æ–­é€»è¾‘</span>
  <span class="hljs-keyword">return</span> !!(
    mod &amp; o || <span class="hljs-comment">// 1. å…¶ä»–ç”¨æˆ·æœ‰æ‰§è¡Œæƒé™</span>
    (mod &amp; g &amp;&amp; groups.<span class="hljs-title function_">has</span>(gid)) || <span class="hljs-comment">// 2. æ‰€å±ç»„æœ‰æ‰§è¡Œæƒé™ï¼Œä¸”å½“å‰ç”¨æˆ·å±äºè¯¥ç»„</span>
    (mod &amp; u &amp;&amp; uid === myUid) || <span class="hljs-comment">// 3. æ‰€æœ‰è€…æœ‰æ‰§è¡Œæƒé™ï¼Œä¸”å½“å‰ç”¨æˆ·æ˜¯æ‰€æœ‰è€…</span>
    (mod &amp; ug &amp;&amp; myUid === <span class="hljs-number">0</span>)  <span class="hljs-comment">// 4. æ‰€æœ‰è€…æˆ–ç»„æœ‰æ‰§è¡Œæƒé™ï¼Œä¸”å½“å‰ç”¨æˆ·æ˜¯ rootï¼ˆUID=0ï¼‰</span>
  )
}
</code></pre>
<p><code>mod</code> <strong>ï¼ˆæƒé™ä½ï¼‰</strong> ï¼šUnix ç³»ç»Ÿä¸­ç”¨ 9 ä½äºŒè¿›åˆ¶è¡¨ç¤ºæ–‡ä»¶æƒé™ï¼ˆåˆ†ä¸ºæ‰€æœ‰è€…ã€æ‰€å±ç»„ã€å…¶ä»–ç”¨æˆ·ä¸‰ç±»ï¼Œæ¯ç±» 3 ä½ï¼Œåˆ†åˆ«æ§åˆ¶è¯» <code>r</code>ã€å†™ <code>w</code>ã€æ‰§è¡Œ <code>x</code> æƒé™ï¼‰ã€‚ä¾‹å¦‚ <code>0o755</code> å¯¹åº”äºŒè¿›åˆ¶ <code>111 101 101</code>ï¼Œè¡¨ç¤ºï¼š</p>
<ul>
<li>æ‰€æœ‰è€…ï¼ˆ<code>u</code>ï¼‰ï¼šå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œï¼ˆ<code>rwx</code>ï¼‰ã€‚</li>
<li>æ‰€å±ç»„ï¼ˆ<code>g</code>ï¼‰ï¼šå¯è¯»ã€å¯æ‰§è¡Œï¼ˆ<code>r-x</code>ï¼‰ã€‚</li>
<li>å…¶ä»–ç”¨æˆ·ï¼ˆ<code>o</code>ï¼‰ï¼šå¯è¯»ã€å¯æ‰§è¡Œï¼ˆ<code>r-x</code>ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">posix.sync (åŒæ­¥)</h2>
<p><code>isexe-3.1.1/src/posix.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sync = (
  <span class="hljs-attr">path</span>: string,
  <span class="hljs-attr">options</span>: <span class="hljs-title class_">IsexeOptions</span> = {}
): <span class="hljs-function"><span class="hljs-params">boolean</span> =&gt;</span> {
  
  <span class="hljs-keyword">const</span> { ignoreErrors = <span class="hljs-literal">false</span> } = options
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkStat</span>(<span class="hljs-title function_">statSync</span>(path), options)
    
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">const</span> er = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ErrnoException</span>
    <span class="hljs-keyword">if</span> (ignoreErrors || er.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">throw</span> er
  }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Stats</span>, statSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>
<span class="hljs-keyword">import</span> { stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>
</code></pre>
<h2 data-id="heading-5">win32.isexe ï¼ˆå¼‚æ­¥ï¼‰</h2>
<p><code>isexe-3.1.1/src/win32.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> isexe = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">path</span>: string,
  <span class="hljs-attr">options</span>: <span class="hljs-title class_">IsexeOptions</span> = {}
): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; =&gt; {
  
  <span class="hljs-keyword">const</span> { ignoreErrors = <span class="hljs-literal">false</span> } = options
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkStat</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">stat</span>(path), path, options)
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">const</span> er = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ErrnoException</span>
    <span class="hljs-keyword">if</span> (ignoreErrors || er.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">throw</span> er
  }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Stats</span>, statSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>
<span class="hljs-keyword">import</span> { stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>
</code></pre>
<h3 data-id="heading-6">checkStat</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkStat</span> = (<span class="hljs-params">stat: Stats, path: string, options: IsexeOptions</span>) =&gt;
  stat.<span class="hljs-title function_">isFile</span>() &amp;&amp; <span class="hljs-title function_">checkPathExt</span>(path, options)
</code></pre>
<h3 data-id="heading-7">checkPathExt</h3>
<p><code>isexe-3.1.1/src/win32.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkPathExt</span> = (<span class="hljs-params">path: string, options: IsexeOptions</span>) =&gt; {

  <span class="hljs-comment">// è·å–å¯æ‰§è¡Œæ‰©å±•ååˆ—è¡¨</span>
  <span class="hljs-keyword">const</span> { pathExt = process.<span class="hljs-property">env</span>.<span class="hljs-property">PATHEXT</span> || <span class="hljs-string">''</span> } = options

  <span class="hljs-keyword">const</span> peSplit = pathExt.<span class="hljs-title function_">split</span>(<span class="hljs-string">';'</span>)
  <span class="hljs-comment">// ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šç©ºæ‰©å±•å</span>
  <span class="hljs-comment">// ç©ºæ‰©å±•åé€šå¸¸è¡¨ç¤º â€œä»»ä½•æ–‡ä»¶éƒ½è§†ä¸ºå¯æ‰§è¡Œâ€ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šé…ç½®</span>
  <span class="hljs-keyword">if</span> (peSplit.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">''</span>) !== -<span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦åŒ¹é…</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; peSplit.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-comment">// è½¬å°å†™ï¼šé¿å…å¤§å°å†™é—®é¢˜ï¼ˆæ¯”å¦‚.EXEå’Œ.exeè§†ä¸ºåŒä¸€ä¸ªï¼‰</span>
    <span class="hljs-keyword">const</span> p = peSplit[i].<span class="hljs-title function_">toLowerCase</span>()
    <span class="hljs-comment">// æˆªå–æ–‡ä»¶è·¯å¾„çš„æœ€åNä¸ªå­—ç¬¦ï¼ˆNæ˜¯å½“å‰æ‰©å±•åpçš„é•¿åº¦ï¼‰ï¼Œä¹Ÿè½¬å°å†™</span>
    <span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">substring</span>(path.<span class="hljs-property">length</span> - p.<span class="hljs-property">length</span>).<span class="hljs-title function_">toLowerCase</span>()

    <span class="hljs-comment">// åŒ¹é…æ¡ä»¶ï¼šæ‰©å±•åéç©º + æ–‡ä»¶æ‰©å±•åå’Œåˆ—è¡¨ä¸­çš„æ‰©å±•åå®Œå…¨ä¸€è‡´</span>
    <span class="hljs-keyword">if</span> (p &amp;&amp; ext === p) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h2 data-id="heading-8">win32.syncï¼ˆåŒæ­¥ï¼‰</h2>
<p><code>isexe-3.1.1/src/win32.ts</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sync = (
  <span class="hljs-attr">path</span>: string,
  <span class="hljs-attr">options</span>: <span class="hljs-title class_">IsexeOptions</span> = {}
): <span class="hljs-function"><span class="hljs-params">boolean</span> =&gt;</span> {
  
  <span class="hljs-keyword">const</span> { ignoreErrors = <span class="hljs-literal">false</span> } = options
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkStat</span>(<span class="hljs-title function_">statSync</span>(path), path, options)
    
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">const</span> er = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ErrnoException</span>
    <span class="hljs-keyword">if</span> (ignoreErrors || er.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">throw</span> er
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€LeetCode Hot100 åˆ·é¢˜æ—¥è®° ï¼ˆ76/100ï¼‰ã€‘295. æ•°æ®æµçš„ä¸­ä½æ•° â€”â€” åŒå †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ç»´æŠ¤åŠ¨æ€ä¸­ä½æ•° ğŸ§ ]]></title>    <link>https://juejin.cn/post/7599155566298251307</link>    <guid>https://juejin.cn/post/7599155566298251307</guid>    <pubDate>2026-01-26T10:24:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298251307" data-draft-id="7599155566298234923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€LeetCode Hot100 åˆ·é¢˜æ—¥è®° ï¼ˆ76/100ï¼‰ã€‘295. æ•°æ®æµçš„ä¸­ä½æ•° â€”â€” åŒå †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ç»´æŠ¤åŠ¨æ€ä¸­ä½æ•° ğŸ§ "/> <meta itemprop="keywords" content="ç®—æ³•,é¢è¯•,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-26T10:24:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€LeetCode Hot100 åˆ·é¢˜æ—¥è®° ï¼ˆ76/100ï¼‰ã€‘295. æ•°æ®æµçš„ä¸­ä½æ•° â€”â€” åŒå †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ç»´æŠ¤åŠ¨æ€ä¸­ä½æ•° ğŸ§ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:24:00.000Z" title="Mon Jan 26 2026 10:24:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“Œ é¢˜ç›®é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-median-from-data-stream%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/find-median-from-data-stream/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">295. æ•°æ®æµçš„ä¸­ä½æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>
<p>ğŸ” éš¾åº¦ï¼š<strong>å›°éš¾</strong> | ğŸ·ï¸ æ ‡ç­¾ï¼š<strong>è®¾è®¡ã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ã€æ•°æ®æµã€åŒæŒ‡é’ˆ</strong></p>
<p>â±ï¸ ç›®æ ‡æ—¶é—´å¤æ‚åº¦ï¼š<strong>addNum: O(log n)ï¼ŒfindMedian: O(1)</strong></p>
<p>ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼š<strong>O(n)</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ¯ é—®é¢˜æ ¸å¿ƒä¸é¢è¯•ä»·å€¼</h2>
<p>åœ¨<strong>å®æ—¶æ•°æ®å¤„ç†ç³»ç»Ÿ</strong>ï¼ˆå¦‚è‚¡ç¥¨ä»·æ ¼ç›‘æ§ã€åœ¨çº¿è¯„åˆ†ç³»ç»Ÿã€ç½‘ç»œæµé‡åˆ†æï¼‰ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ¨æ€ç»´æŠ¤ä¸€ä¸ªä¸æ–­å¢é•¿çš„æ•°æ®é›†åˆï¼Œå¹¶<strong>é«˜æ•ˆæŸ¥è¯¢å½“å‰ä¸­ä½æ•°</strong>ã€‚è¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯ï¼š</p>
<ul>
<li><strong>å¦‚ä½•ç”¨ä¸¤ä¸ªå †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰å·§å¦™ç»´æŠ¤æœ‰åºæ€§</strong></li>
<li><strong>å¯¹â€œä¸­ä½æ•°â€å®šä¹‰çš„ç²¾å‡†ç†è§£ï¼ˆå¥‡å¶é•¿åº¦å·®å¼‚ï¼‰</strong></li>
<li><strong>åŠ¨æ€å¹³è¡¡æ€æƒ³</strong>ï¼ˆç±»ä¼¼ AVL æ ‘çš„æ—‹è½¬æ€æƒ³ï¼‰</li>
<li><strong>C++ STL ä¸­ <code>priority_queue</code> çš„è‡ªå®šä¹‰æ¯”è¾ƒå™¨ä½¿ç”¨</strong></li>
</ul>
<p>è¿™æ˜¯<strong>é«˜é¢‘ç³»ç»Ÿè®¾è®¡+ç®—æ³•ç»“åˆé¢˜</strong>ï¼Œåœ¨ Googleã€Amazonã€Meta ç­‰å¤§å‚é¢è¯•ä¸­å¤šæ¬¡å‡ºç°ï¼Œå°¤å…¶é€‚åˆè€ƒå¯Ÿå€™é€‰äººå¯¹<strong>æ•°æ®ç»“æ„ç»„åˆä½¿ç”¨</strong>çš„èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§© é¢˜ç›®åˆ†æ</h2>
<p>æˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªç±» <code>MedianFinder</code>ï¼Œæ”¯æŒä¸¤ç§æ“ä½œï¼š</p>
<ol>
<li><code>addNum(int num)</code>ï¼šå‘æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°ï¼›</li>
<li><code>findMedian()</code>ï¼šè¿”å›å½“å‰æ‰€æœ‰æ•°çš„ä¸­ä½æ•°ã€‚</li>
</ol>
<p>å…³é”®çº¦æŸï¼š</p>
<ul>
<li>æ•°æ®æ˜¯<strong>åŠ¨æ€æµå…¥</strong>çš„ï¼Œä¸èƒ½é¢„å…ˆçŸ¥é“å…¨éƒ¨æ•°æ®ï¼›</li>
<li>æ¯æ¬¡ <code>findMedian</code> å¿…é¡»<strong>é«˜æ•ˆ</strong>ï¼ˆç†æƒ³ O(1)ï¼‰ï¼›</li>
<li>æ•°æ®è§„æ¨¡å¯è¾¾ <strong>5 Ã— 10â´</strong> æ¬¡æ“ä½œï¼Œæš´åŠ›æ’åºï¼ˆO(n log n) æ¯æ¬¡ï¼‰ä¼šè¶…æ—¶ âŒã€‚</li>
</ul>
<blockquote>
<p>âœ… æ­£ç¡®æ€è·¯ï¼š<strong>ä¸æ˜¾å¼ç»´æŠ¤æ•´ä¸ªæœ‰åºæ•°ç»„ï¼Œè€Œæ˜¯ç”¨ä¸¤ä¸ªå †åˆ†åˆ«ç»´æŠ¤â€œè¾ƒå°çš„ä¸€åŠâ€å’Œâ€œè¾ƒå¤§çš„ä¸€åŠâ€</strong> ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§  æ ¸å¿ƒç®—æ³•åŠä»£ç è®²è§£ï¼šåŒå †ï¼ˆTwo Heapsï¼‰æ³•</h2>
<h3 data-id="heading-3">ğŸ“Œ ç®—æ³•æ€æƒ³</h3>
<p>æˆ‘ä»¬ç»´æŠ¤ä¸¤ä¸ªå †ï¼š</p>
<ul>
<li><strong><code>queMin</code></strong>ï¼š<strong>æœ€å¤§å †</strong>ï¼ˆC++ é»˜è®¤ <code>priority_queue&lt;int&gt;</code> æ˜¯æœ€å¤§å †ï¼‰ï¼Œå­˜å‚¨<strong>è¾ƒå°çš„ä¸€åŠæ•°å­—</strong>ï¼Œå †é¡¶æ˜¯è¿™éƒ¨åˆ†çš„æœ€å¤§å€¼ï¼›</li>
<li><strong><code>queMax</code></strong>ï¼š<strong>æœ€å°å †</strong>ï¼ˆç”¨ <code>greater&lt;int&gt;</code> å®ç°ï¼‰ï¼Œå­˜å‚¨<strong>è¾ƒå¤§çš„ä¸€åŠæ•°å­—</strong>ï¼Œå †é¡¶æ˜¯è¿™éƒ¨åˆ†çš„æœ€å°å€¼ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>ä¸å˜é‡ï¼ˆInvariantï¼‰</strong> ï¼š</p>
<ul>
<li><code>queMin.size() == queMax.size()</code> æˆ– <code>queMin.size() == queMax.size() + 1</code></li>
<li>æ‰€æœ‰ <code>queMin</code> ä¸­çš„å…ƒç´  â‰¤ æ‰€æœ‰ <code>queMax</code> ä¸­çš„å…ƒç´ </li>
</ul>
</blockquote>
<p>è¿™æ ·ï¼Œä¸­ä½æ•°å°±æ˜¯ï¼š</p>
<ul>
<li>è‹¥æ€»ä¸ªæ•°ä¸ºå¥‡æ•° â†’ <code>queMin.top()</code>ï¼ˆå› ä¸º <code>queMin</code> å¤šä¸€ä¸ªï¼‰</li>
<li>è‹¥ä¸ºå¶æ•° â†’ <code>(queMin.top() + queMax.top()) / 2.0</code></li>
</ul>
<h3 data-id="heading-4">ğŸ”„ æ’å…¥é€»è¾‘ï¼ˆå…³é”®ï¼ï¼‰</h3>
<p>å½“æ’å…¥æ–°æ•°å­— <code>num</code> æ—¶ï¼š</p>
<ol>
<li>
<p><strong>è‹¥ <code>num â‰¤ queMin.top()</code></strong> â†’ åº”æ”¾å…¥ <code>queMin</code></p>
<ul>
<li>ä½†æ’å…¥åå¯èƒ½ç ´å size ä¸å˜é‡ï¼ˆ<code>queMin</code> æ¯” <code>queMax</code> å¤šè¶…è¿‡ 1 ä¸ªï¼‰</li>
<li>â†’ æŠŠ <code>queMin</code> çš„å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ç§»åˆ° <code>queMax</code></li>
</ul>
</li>
<li>
<p><strong>å¦åˆ™</strong> â†’ æ”¾å…¥ <code>queMax</code></p>
<ul>
<li>ä½†è‹¥ <code>queMax</code> æ¯” <code>queMin</code> å¤§ â†’ æŠŠ <code>queMax</code> çš„å †é¡¶ï¼ˆæœ€å°å€¼ï¼‰ç§»åˆ° <code>queMin</code></li>
</ul>
</li>
</ol>
<blockquote>
<p>âœ… è¿™æ ·å§‹ç»ˆä¿è¯ <code>queMin</code> å­˜â€œå·¦åŠéƒ¨åˆ†â€ï¼Œ<code>queMax</code> å­˜â€œå³åŠéƒ¨åˆ†â€ï¼Œä¸”å¤§å°å·® â‰¤1ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ğŸ’» C++ ä»£ç è¯¦è§£ï¼ˆå¸¦è¡Œæ³¨é‡Šï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MedianFinder</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// queMin: æœ€å¤§å †ï¼Œå­˜è¾ƒå°çš„ä¸€åŠï¼›queMax: æœ€å°å †ï¼Œå­˜è¾ƒå¤§çš„ä¸€åŠ</span>
    priority_queue&lt;<span class="hljs-type">int</span>, vector&lt;<span class="hljs-type">int</span>&gt;, less&lt;<span class="hljs-type">int</span>&gt;&gt; queMin;      <span class="hljs-comment">// é»˜è®¤å°±æ˜¯ lessï¼Œå¯çœç•¥</span>
    priority_queue&lt;<span class="hljs-type">int</span>, vector&lt;<span class="hljs-type">int</span>&gt;, greater&lt;<span class="hljs-type">int</span>&gt;&gt; queMax;   <span class="hljs-comment">// greater&lt;int&gt; å®ç°æœ€å°å †</span>

    <span class="hljs-built_in">MedianFinder</span>() {}

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addNum</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> </span>{
        <span class="hljs-comment">// æƒ…å†µ1ï¼šqueMin ä¸ºç©ºï¼ˆé¦–æ¬¡æ’å…¥ï¼‰æˆ– num &lt;= queMin çš„æœ€å¤§å€¼</span>
        <span class="hljs-keyword">if</span> (queMin.<span class="hljs-built_in">empty</span>() || num &lt;= queMin.<span class="hljs-built_in">top</span>()) {
            queMin.<span class="hljs-built_in">push</span>(num);  <span class="hljs-comment">// å…ˆåŠ å…¥å·¦åŠéƒ¨åˆ†</span>
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·¦åŠéƒ¨åˆ†æ¯”å³åŠéƒ¨åˆ†å¤šå‡ºè¶…è¿‡1ä¸ª</span>
            <span class="hljs-keyword">if</span> (queMax.<span class="hljs-built_in">size</span>() + <span class="hljs-number">1</span> &lt; queMin.<span class="hljs-built_in">size</span>()) {
                queMax.<span class="hljs-built_in">push</span>(queMin.<span class="hljs-built_in">top</span>());  <span class="hljs-comment">// æŠŠå·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼ç§»åˆ°å³è¾¹</span>
                queMin.<span class="hljs-built_in">pop</span>();
            }
        } 
        <span class="hljs-comment">// æƒ…å†µ2ï¼šnum &gt; queMin.top()ï¼Œåº”åŠ å…¥å³åŠéƒ¨åˆ†</span>
        <span class="hljs-keyword">else</span> {
            queMax.<span class="hljs-built_in">push</span>(num);
            <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œåªå…è®¸ queMin æ¯” queMax å¤š1ï¼Œä¸å…è®¸ queMax æ›´å¤§ï¼</span>
            <span class="hljs-keyword">if</span> (queMax.<span class="hljs-built_in">size</span>() &gt; queMin.<span class="hljs-built_in">size</span>()) {
                queMin.<span class="hljs-built_in">push</span>(queMax.<span class="hljs-built_in">top</span>());  <span class="hljs-comment">// æŠŠå³åŠéƒ¨åˆ†çš„æœ€å°å€¼ç§»åˆ°å·¦è¾¹</span>
                queMax.<span class="hljs-built_in">pop</span>();
            }
        }
    }

    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">findMedian</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// å¥‡æ•°ä¸ªï¼šqueMin å¤šä¸€ä¸ªï¼Œä¸­ä½æ•°æ˜¯ queMin.top()</span>
        <span class="hljs-keyword">if</span> (queMin.<span class="hljs-built_in">size</span>() &gt; queMax.<span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">return</span> queMin.<span class="hljs-built_in">top</span>();
        }
        <span class="hljs-comment">// å¶æ•°ä¸ªï¼šå–ä¸¤ä¸ªå †é¡¶å¹³å‡</span>
        <span class="hljs-keyword">return</span> (queMin.<span class="hljs-built_in">top</span>() + queMax.<span class="hljs-built_in">top</span>()) / <span class="hljs-number">2.0</span>;
    }
};
</code></pre>
<blockquote>
<p>ğŸ” <strong>ä¸ºä»€ä¹ˆ <code>queMin</code> å…è®¸å¤šä¸€ä¸ªï¼Œè€Œ <code>queMax</code> ä¸å…è®¸ï¼Ÿ</strong><br/>
è¿™æ˜¯è®¾è®¡é€‰æ‹©ï¼ç»Ÿä¸€è®© <code>queMin</code> æ‰¿æ‹…â€œå¤šä¸€ä¸ªâ€çš„è§’è‰²ï¼Œç®€åŒ–é€»è¾‘ã€‚ä¹Ÿå¯åè¿‡æ¥ï¼Œä½†éœ€ä¿æŒä¸€è‡´ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ§­ è§£é¢˜æ€è·¯ï¼ˆåˆ†æ­¥æ‹†è§£ï¼‰</h2>
<ol>
<li>
<p><strong>æ˜ç¡®ç›®æ ‡</strong>ï¼šåŠ¨æ€ç»´æŠ¤ä¸­ä½æ•°ï¼Œé¿å…æ¯æ¬¡æ’åºã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©æ•°æ®ç»“æ„</strong>ï¼š</p>
<ul>
<li>æ•°ç»„ï¼Ÿâ†’ æ’å…¥ O(n)ï¼Œæ’åº O(n log n) â†’ âŒ</li>
<li>å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Ÿâ†’ å¯è¡Œï¼Œä½†å®ç°å¤æ‚ï¼ˆå¦‚ <code>multiset</code> + åŒæŒ‡é’ˆï¼Œè§å®˜æ–¹æ–¹æ³•äºŒï¼‰</li>
<li><strong>åŒå †</strong> â†’ æ’å…¥ O(log n)ï¼ŒæŸ¥è¯¢ O(1) â†’ âœ… æœ€ä¼˜</li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡ä¸å˜é‡</strong>ï¼š</p>
<ul>
<li>å·¦å †ï¼ˆæœ€å¤§å †ï¼‰å­˜å°çš„ä¸€åŠï¼Œå³å †ï¼ˆæœ€å°å †ï¼‰å­˜å¤§çš„ä¸€åŠ</li>
<li>å·¦å †å¤§å° â‰¥ å³å †å¤§å°ï¼Œä¸”æœ€å¤šå¤š1</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†æ’å…¥</strong>ï¼š</p>
<ul>
<li>å…ˆæŒ‰å€¼å†³å®šæ”¾å“ªè¾¹</li>
<li>å†è°ƒæ•´å †å¤§å°ä»¥ç»´æŒä¸å˜é‡</li>
</ul>
</li>
<li>
<p><strong>æŸ¥è¯¢ä¸­ä½æ•°</strong>ï¼šç›´æ¥å–å †é¡¶ï¼ŒæŒ‰å¥‡å¶åˆ¤æ–­</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">ğŸ“Š ç®—æ³•åˆ†æ</h2>





























<table><thead><tr><th>æ“ä½œ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>addNum</code></td><td>O(log n)</td><td>O(n)</td><td>å †æ’å…¥+å¯èƒ½çš„ä¸€æ¬¡å¼¹å‡º</td></tr><tr><td><code>findMedian</code></td><td>O(1)</td><td>â€”</td><td>ç›´æ¥è®¿é—®å †é¡¶</td></tr><tr><td>æ€»ä½“</td><td>â€”</td><td>O(n)</td><td>å­˜å‚¨æ‰€æœ‰æ•°å­—</td></tr></tbody></table>
<blockquote>
<p>âœ… æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼ˆ5e4 æ¬¡æ“ä½œå®Œå…¨å¯è¡Œï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ’¡ é¢è¯•å»¶ä¼¸ &amp; è¿›é˜¶æ€è€ƒ</h2>
<h3 data-id="heading-9">Q1ï¼šä¸ºä»€ä¹ˆä¸ç”¨ä¸€ä¸ªå †ï¼Ÿ</h3>
<blockquote>
<p>Aï¼šå•ä¸ªå †æ— æ³•ç›´æ¥è·å–ä¸­ä½æ•°ã€‚æœ€å¤§å †åªèƒ½å¾—æœ€å¤§å€¼ï¼Œæœ€å°å †åªèƒ½å¾—æœ€å°å€¼ã€‚</p>
</blockquote>
<h3 data-id="heading-10">Q2ï¼šèƒ½å¦ç”¨ <code>multiset</code> + åŒæŒ‡é’ˆï¼Ÿ</h3>
<blockquote>
<p>Aï¼šå¯ä»¥ï¼ˆå®˜æ–¹æ–¹æ³•äºŒï¼‰ï¼Œä½†ï¼š</p>
<ul>
<li><code>multiset</code> æ’å…¥ O(log n)ï¼Œä½†ç§»åŠ¨è¿­ä»£å™¨éœ€å°å¿ƒè¾¹ç•Œ</li>
<li>å®é™…æ€§èƒ½å¯èƒ½ä¸å¦‚åŒå †ï¼ˆå¸¸æ•°æ›´å¤§ï¼‰</li>
<li><strong>åŒå †æ›´ç®€æ´ã€æ›´å¸¸ç”¨</strong></li>
</ul>
</blockquote>
<h3 data-id="heading-11">Q3ï¼šå¦‚æœæ•°æ®èŒƒå›´æœ‰é™ï¼ˆå¦‚ 0~100ï¼‰ï¼Ÿ</h3>
<blockquote>
<p>Aï¼šå¯ç”¨<strong>è®¡æ•°æ’åº + åŒæŒ‡é’ˆ</strong>ï¼ˆæ¡¶æ’åºæ€æƒ³ï¼‰ï¼š</p>
<ul>
<li>å¼€æ•°ç»„ <code>cnt[101]</code> è®°å½•æ¯ä¸ªæ•°å‡ºç°æ¬¡æ•°</li>
<li>ç»´æŠ¤æ€»æ•°é‡ <code>total</code></li>
<li>æŸ¥è¯¢ä¸­ä½æ•°æ—¶ä» 0 å¼€å§‹ç´¯åŠ ï¼Œæ‰¾åˆ°ç¬¬ <code>total/2</code> å’Œ <code>total/2+1</code> ä¸ªæ•°</li>
<li><strong>æ—¶é—´å¤æ‚åº¦ï¼šaddNum O(1)ï¼ŒfindMedian O(100)=O(1)</strong> â†’ æä¼˜ï¼</li>
</ul>
</blockquote>
<h3 data-id="heading-12">Q4ï¼šå¦‚ä½•æ‰©å±•åˆ°æ±‚ç¬¬ k å°/å¤§å…ƒç´ ï¼Ÿ</h3>
<blockquote>
<p>Aï¼šå¯ç”¨ <strong>QuickSelectï¼ˆæœŸæœ› O(n)ï¼‰</strong> ï¼Œä½†ä¸æ”¯æŒåŠ¨æ€æ’å…¥ã€‚<br/>
åŠ¨æ€åœºæ™¯ä¸‹å¯ç”¨ <strong>Order Statistic Treeï¼ˆGNU pbdsï¼‰</strong> ï¼Œä½†éæ ‡å‡†åº“ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">ğŸ’» å®Œæ•´å¯è¿è¡Œä»£ç </h2>
<h3 data-id="heading-14">C++ ç‰ˆæœ¬</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MedianFinder</span> {
<span class="hljs-keyword">public</span>:
    priority_queue&lt;<span class="hljs-type">int</span>, vector&lt;<span class="hljs-type">int</span>&gt;, less&lt;<span class="hljs-type">int</span>&gt;&gt; queMin;
    priority_queue&lt;<span class="hljs-type">int</span>, vector&lt;<span class="hljs-type">int</span>&gt;, greater&lt;<span class="hljs-type">int</span>&gt;&gt; queMax;

    <span class="hljs-built_in">MedianFinder</span>() {}

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addNum</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> </span>{
        <span class="hljs-keyword">if</span> (queMin.<span class="hljs-built_in">empty</span>() || num &lt;= queMin.<span class="hljs-built_in">top</span>()) {
            queMin.<span class="hljs-built_in">push</span>(num);
            <span class="hljs-keyword">if</span> (queMax.<span class="hljs-built_in">size</span>() + <span class="hljs-number">1</span> &lt; queMin.<span class="hljs-built_in">size</span>()) {
                queMax.<span class="hljs-built_in">push</span>(queMin.<span class="hljs-built_in">top</span>());
                queMin.<span class="hljs-built_in">pop</span>();
            }
        } <span class="hljs-keyword">else</span> {
            queMax.<span class="hljs-built_in">push</span>(num);
            <span class="hljs-keyword">if</span> (queMax.<span class="hljs-built_in">size</span>() &gt; queMin.<span class="hljs-built_in">size</span>()) {
                queMin.<span class="hljs-built_in">push</span>(queMax.<span class="hljs-built_in">top</span>());
                queMax.<span class="hljs-built_in">pop</span>();
            }
        }
    }

    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">findMedian</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (queMin.<span class="hljs-built_in">size</span>() &gt; queMax.<span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">return</span> queMin.<span class="hljs-built_in">top</span>();
        }
        <span class="hljs-keyword">return</span> (queMin.<span class="hljs-built_in">top</span>() + queMax.<span class="hljs-built_in">top</span>()) / <span class="hljs-number">2.0</span>;
    }
};

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);
    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">nullptr</span>);
    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-literal">nullptr</span>);

    MedianFinder medianFinder;
    medianFinder.<span class="hljs-built_in">addNum</span>(<span class="hljs-number">1</span>);    <span class="hljs-comment">// arr = [1]</span>
    medianFinder.<span class="hljs-built_in">addNum</span>(<span class="hljs-number">2</span>);    <span class="hljs-comment">// arr = [1, 2]</span>
    cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">5</span>) &lt;&lt; medianFinder.<span class="hljs-built_in">findMedian</span>() &lt;&lt; <span class="hljs-string">"\n"</span>; <span class="hljs-comment">// è¾“å‡º 1.5</span>
    medianFinder.<span class="hljs-built_in">addNum</span>(<span class="hljs-number">3</span>);    <span class="hljs-comment">// arr = [1, 2, 3]</span>
    cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">5</span>) &lt;&lt; medianFinder.<span class="hljs-built_in">findMedian</span>() &lt;&lt; <span class="hljs-string">"\n"</span>; <span class="hljs-comment">// è¾“å‡º 2.0</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-15">JavaScript ç‰ˆæœ¬ï¼ˆä½¿ç”¨ MinPriorityQueue / MaxPriorityQueueï¼‰</h3>
<blockquote>
<p>âš ï¸ LeetCode JS ç¯å¢ƒå·²å†…ç½® <code>@datastructures-js/priority-queue</code></p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> <span class="hljs-title class_">MedianFinder</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxPriorityQueue</span>(); <span class="hljs-comment">// è¾ƒå°çš„ä¸€åŠï¼Œæœ€å¤§å †</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MinPriorityQueue</span>(); <span class="hljs-comment">// è¾ƒå¤§çš„ä¸€åŠï¼Œæœ€å°å †</span>
};

<span class="hljs-title class_">MedianFinder</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addNum</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">num</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">isEmpty</span>() || num &lt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">front</span>().<span class="hljs-property">element</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">enqueue</span>(num);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">size</span>() + <span class="hljs-number">1</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">size</span>()) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">enqueue</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">dequeue</span>().<span class="hljs-property">element</span>);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">enqueue</span>(num);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">size</span>() &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">size</span>()) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">enqueue</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">dequeue</span>().<span class="hljs-property">element</span>);
        }
    }
};

<span class="hljs-title class_">MedianFinder</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">findMedian</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">size</span>() &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">size</span>()) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">front</span>().<span class="hljs-property">element</span>;
    }
    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queMin</span>.<span class="hljs-title function_">front</span>().<span class="hljs-property">element</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">queMax</span>.<span class="hljs-title function_">front</span>().<span class="hljs-property">element</span>) / <span class="hljs-number">2.0</span>;
};
</code></pre>
<hr/>
<h2 data-id="heading-16">ğŸŒŸ æœ¬æœŸå®Œç»“ï¼Œä¸‹æœŸè§ï¼ğŸ”¥</h2>
<blockquote>
<p>ğŸ‘‰ ç‚¹èµæ”¶è—åŠ å…³æ³¨ï¼Œæ–°æ–‡æ›´æ–°ä¸è¿·è·¯ã€‚å…³æ³¨ä¸“æ ã€ç®—æ³•ã€‘LeetCode Hot100åˆ·é¢˜æ—¥è®°ï¼ŒæŒç»­ä¸ºä½ æ‹†è§£æ¯ä¸€é“çƒ­é¢˜çš„åº•å±‚é€»è¾‘ä¸é¢è¯•æŠ€å·§ï¼</p>
<p>ğŸ’¬ <strong>æ¬¢è¿ç•™è¨€äº¤æµä½ çš„è§£æ³•æˆ–ç–‘é—®ï¼ä¸€èµ·è¿›æ­¥ï¼Œå†²å‘ Offerï¼ğŸ’ª</strong></p>
</blockquote>
<p>ğŸ“Œ <strong>è®°ä½</strong>ï¼šå½“ä½ åœ¨åˆ·é¢˜æ—¶ï¼Œä¸è¦åªçœ‹ç­”æ¡ˆï¼Œè¦åƒå†™è¿™ç¯‡æ–‡ç« ä¸€æ ·ï¼Œæ·±å…¥æ€è€ƒæ¯ä¸€æ­¥èƒŒåçš„åŸç†ã€ä¼˜åŒ–ç©ºé—´å’Œé¢è¯•ä»·å€¼ã€‚è¿™æ‰æ˜¯çœŸæ­£æå‡ç®—æ³•èƒ½åŠ›çš„æ–¹å¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚ Skillsï½œä»æ¦‚å¿µåˆ°å®æ“çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7599528186586595338</link>    <guid>https://juejin.cn/post/7599528186586595338</guid>    <pubDate>2026-01-26T10:27:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599528186586595338" data-draft-id="7599485473707245606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚ Skillsï½œä»æ¦‚å¿µåˆ°å®æ“çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-01-26T10:27:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚ Skillsï½œä»æ¦‚å¿µåˆ°å®æ“çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:27:18.000Z" title="Mon Jan 26 2026 10:27:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/498562aa9ed8432ba9e87cda7d4a062e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=8yAuhMePtapSu%2FGOazhGCXYsOOU%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šå’¸é±¼ï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<blockquote>
<p>Agent æ­£åœ¨ç»å†ä»â€œèŠå¤©æœºå™¨äººâ€åˆ°â€œå¾—åŠ›å¹²å°†â€çš„è¿›åŒ–ï¼Œè€ŒÂ <strong>Skills</strong> æ­£æ˜¯è¿™åœºè¿›åŒ–çš„å…³é”®å‚¬åŒ–å‰‚ã€‚</p>
<p>ä½ æ˜¯å¦æ›¾è¢« Agent çš„â€œä¸å¬è¯â€ã€â€œæ‰§è¡Œä¹±â€å’Œâ€œå·¥å…·è’â€æå¾—ç„¦å¤´çƒ‚é¢ï¼Ÿ</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä¸€æ–‡å¼„æ‡‚Â <strong>Skills</strong> â€”â€”è¿™ä¸ªè®© Agent å˜å¾—å¯é ã€å¯æ§ã€å¯å¤ç”¨çš„â€œé«˜çº§æŠ€èƒ½åŒ…â€ã€‚</p>
<p>æˆ‘ä»¬å°†ä» Skills æ˜¯ä»€ä¹ˆã€å¦‚ä½•å·¥ä½œï¼Œä¸€è·¯èŠåˆ°æ€æ ·å†™å¥½ä¸€ä¸ª Skillsï¼Œå¹¶ä¸ºä½ æ¨èå®ç”¨çš„ç¤¾åŒºèµ„æºï¼Œå¸¦é¢†å¤§å®¶åœ¨ TRAE ä¸­å®é™…ä½¿ç”¨ Skills è½åœ°ä¸€ä¸ªåœºæ™¯ã€‚</p>
<p>æ— è®ºä½ æ˜¯å¼€å‘è€…è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œéƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°è®©ä½ çš„ Agent â€œå¼€çªâ€çš„ç§˜è¯€ã€‚</p>
</blockquote>
<p><strong>ä½ æ˜¯å¦ä¹Ÿç»å†è¿‡æˆ–è€…æ­£åœ¨ç»å†è¿™æ ·çš„â€œ Agent è°ƒæ•™â€å´©æºƒæ—¶åˆ»ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>è§„åˆ™å¤±æ•ˆï¼š</strong> åœ¨ Agent.md é‡Œå†™ä¸‹åƒè¨€ä¸‡è¯­ï¼ŒAgent å´è§†è‹¥æ— ç¹ï¼Œå®Œå…¨â€œå·²è¯»ä¸å›â€ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œå¤±æ§ï¼š</strong> ç²¾å¿ƒæ‰“ç£¨äº†æ— æ•° Promptï¼ŒAgent æ‰§è¡Œèµ·æ¥ä¾æ—§åƒæ— å¤´è‹è‡ï¼Œæ··ä¹±æ— åºã€‚</p>
</li>
<li>
<p><strong>å·¥å…·è¿·å¤±ï¼š</strong> æ˜æ˜é›†æˆäº†å¼ºå¤§çš„ MCP å·¥å…·åº“ï¼ŒAgent å´ä¸¤æ‰‹ä¸€æ‘Šè¯´â€œæ²¡å·¥å…·â€ï¼Œè®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚</p>
</li>
</ul>
<p>å¦‚æœè¿™äº›åœºæ™¯è®©ä½ æ„ŸåŒèº«å—ï¼Œåˆ«æ€¥ç€æ”¾å¼ƒã€‚<strong>ç»ˆç»“è¿™åœºæ··ä¹±çš„ç­”æ¡ˆï¼Œå¯èƒ½å°±æ˜¯ Skillsã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e689cd9039c147278c306e13ec24004b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=rQmSbPXhzErYNi1J59HU%2BG28NpE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯ Skills</strong></h2>
<p>â€œSkillsâ€ è¿™ä¸ªæ¦‚å¿µæœ€æ—©ç”± Anthropic å…¬å¸æå‡ºï¼Œä½œä¸ºå…¶å¤§æ¨¡å‹ Claude çš„ä¸€ç§èƒ½åŠ›æ‰©å±•æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå…è®¸ç”¨æˆ·ä¸º Claude æ·»åŠ è‡ªå®šä¹‰çš„åŠŸèƒ½å’Œå·¥å…·ã€‚éšç€è¿™å¥—åšæ³•è¶Šæ¥è¶Šæˆç†Ÿï¼Œå¹¶è¢«ç¤¾åŒºå¹¿æ³›æ¥å—ï¼ŒSkills å¦‚ä»Šå·²æˆä¸ºå¤§å¤šæ•° Agent å¼€å‘å·¥å…·å’Œ IDE éƒ½æ”¯æŒçš„ä¸€ç§æ ‡å‡†æ‰©å±•è§„èŒƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30a3492ffbfb4f8c86543ba47e2714c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=ZAMUCjEIT1Qsuj9AL5ySwVGdSDg%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ª Skills é€šå¸¸ä»¥ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å½¢å¼å­˜åœ¨ï¼Œé‡Œé¢ä¸»è¦è£…ç€ä¸‰æ ·ä¸œè¥¿ï¼š<strong>ä¸€ä»½è¯´æ˜ä¹¦ï¼ˆSKILL.mdï¼‰ã€ä¸€å †æ“ä½œè„šæœ¬ï¼ˆScriptï¼‰ã€ä»¥åŠä¸€äº›å‚è€ƒèµ„æ–™ï¼ˆReferenceï¼‰ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfdff3d6d6954816a0947ee5d3625652~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=sfdkPQw4lDQu9Z0no9AlRw67wPE%3D" alt="640 (1).png" loading="lazy"/></p>
<p>ä½ å¯ä»¥æŠŠä¸€ä¸ª Skill æƒ³è±¡æˆä¸€ä¸ªæ‰“åŒ…å¥½çš„â€œæŠ€èƒ½åŒ…â€ã€‚å®ƒæŠŠå®ŒæˆæŸä¸ªç‰¹å®šä»»åŠ¡æ‰€éœ€çš„<strong>é¢†åŸŸçŸ¥è¯†ã€æ“ä½œæµç¨‹ã€è¦ç”¨åˆ°çš„å·¥</strong> <strong>å…·ã€ä»¥åŠæœ€ä½³å®è·µ</strong>å…¨éƒ½å°è£…åœ¨äº†ä¸€èµ·ã€‚å½“ AI é¢å¯¹ç›¸åº”è¯·æ±‚æ—¶ï¼Œå°±èƒ½åƒä¸€ä½ç»éªŒä¸°å¯Œçš„ä¸“å®¶é‚£æ ·ï¼Œæœ‰æ¡ä¸ç´Šåœ°è‡ªä¸»æ‰§è¡Œã€‚</p>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong> è¦æ˜¯æŠŠ Agent æ¯”ä½œä¸€ä¸ªæœ‰å¾ˆå¤§æ½œåŠ›çš„å¤§è„‘ï¼Œé‚£ <strong>Skills å°±åƒæ˜¯ç»™è¿™ä¸ªå¤§è„‘çš„ä¸€å¥—å¥—èƒ½åå¤ç”¨çš„â€œé«˜çº§æ­¦åŠŸç§˜ç±â€ã€‚</strong> æœ‰äº†å®ƒï¼ŒAgent èƒ½ä»ä¸€ä¸ªâ€œä»€ä¹ˆéƒ½ç•¥çŸ¥ä¸€äºŒâ€çš„é€šæ‰ï¼Œå˜æˆåœ¨ç‰¹å®šé¢†åŸŸâ€œä»€ä¹ˆéƒ½æ“…é•¿â€çš„ä¸“å®¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2a8152998b547a08a8a54e8b8459b38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=YXPCIbBAv5x0stu2X3HnINwDbqk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>Skill åŸç†ä»‹ç»</strong></h2>
<p>ğŸ“š å®˜æ–¹è§£é‡Šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fagents-and-tools%2Fagent-skills%2Foverview" target="_blank" title="https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview" ref="nofollow noopener noreferrer">platform.claude.com/docs/en/ageâ€¦</a></p>
<h4 data-id="heading-2"><strong>Skill çš„æ¶æ„åŸç†ï¼šæ¸è¿›å¼åŠ è½½</strong></h4>
<p>Skill çš„è®¾è®¡å¾ˆå·§å¦™ï¼Œå®ƒè¿è¡Œåœ¨ä¸€ä¸ªæ²™ç›’ç¯å¢ƒé‡Œï¼Œè¿™ä¸ªç¯å¢ƒå…è®¸å¤§æ¨¡å‹è®¿é—®æ–‡ä»¶ç³»ç»Ÿå’Œæ‰§è¡ŒÂ <em><strong>bash</strong></em> å‘½ä»¤ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ç§ç”µè„‘æ“ä½œæŒ‡ä»¤ï¼‰ã€‚åœ¨è¿™ä¸ªç¯å¢ƒé‡Œï¼Œä¸€ä¸ªä¸ª Skill å°±åƒä¸€ä¸ªä¸ªæ–‡ä»¶å¤¹ã€‚Agent å°±åƒä¸€ä¸ªç†Ÿæ‚‰ç”µè„‘æ“ä½œçš„äººï¼Œé€šè¿‡å‘½ä»¤è¡Œæ¥è¯»å–æ–‡ä»¶ã€æ‰§è¡Œè„šæœ¬ï¼Œç„¶ååˆ©ç”¨ç»“æœå»å®Œæˆä½ äº¤ä»£çš„ä»»åŠ¡ã€‚è¿™ç§â€œæŒ‰éœ€å–ç”¨â€çš„æ¶æ„ï¼Œè®© Skill æˆä¸ºä¸€ä¸ªæ—¢å¼ºå¤§åˆé«˜æ•ˆçš„â€œå·¥å…·ç®±â€ã€‚</p>
<p>ä¸ºäº†å¹³è¡¡æ•ˆæœå’Œæ•ˆç‡ï¼ŒSkill è®¾è®¡äº†ä¸€å¥—èªæ˜çš„ä¸‰å±‚åˆ†çº§åŠ è½½æœºåˆ¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fde448de57f540409d9264c41d82cb2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=ovVLGJjnunTuBQBwoHOtruHUCEc%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f254ff2a09d2490fbfcb8147c257b216~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=mBe29p0fLEw%2BVAU6tX%2B6aHe694M%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-3"><strong>Level 1ï¼šå…ƒæ•°æ®ï¼ˆå§‹ç»ˆåŠ è½½ï¼‰</strong></h4>
<p>å…ƒæ•°æ®å°±åƒæ˜¯ Skill çš„â€œåç‰‡â€ï¼Œé‡Œé¢æœ‰åç§°ï¼ˆ<em><strong>name</strong></em>ï¼‰å’Œæè¿°ï¼ˆ<em><strong>description</strong></em>ï¼‰ï¼Œæ˜¯ç”¨ YAML æ ¼å¼æ¥å®šä¹‰çš„ã€‚Claude åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæŠŠæ‰€æœ‰å·²ç»å®‰è£…çš„ Skill çš„å…ƒæ•°æ®éƒ½åŠ è½½è¿›æ¥ï¼Œè¿™æ ·å®ƒå°±èƒ½çŸ¥é“æ¯ä¸ª Skill æœ‰ä»€ä¹ˆç”¨ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ã€‚å› ä¸ºå…ƒæ•°æ®å¾ˆè½»é‡ï¼Œæ‰€ä»¥ä½ å¯ä»¥å®‰è£…å¾ˆå¤š Skillï¼Œä¸ç”¨æ‹…å¿ƒæŠŠä¸Šä¸‹æ–‡å æ»¡ã€‚</p>
<h4 data-id="heading-4"><strong>Level 2ï¼šè¯´æ˜æ–‡æ¡£ï¼ˆè§¦å‘æ—¶åŠ è½½ï¼‰</strong></h4>
<p><em><strong>SKILL.md</strong></em> æ–‡ä»¶çš„æ­£æ–‡å°±æ˜¯è¯´æ˜æ–‡æ¡£ï¼Œé‡Œé¢æœ‰å·¥ä½œæµç¨‹ã€æœ€ä½³å®è·µå’Œæ“ä½œæŒ‡å—ã€‚åªæœ‰ç”¨æˆ·çš„è¯·æ±‚å’Œ Skills å…ƒæ•°æ®é‡Œçš„æè¿°ç›¸ç¬¦æ—¶ï¼ŒClaude æ‰ä¼šç”¨Â <em><strong>bash</strong></em> æŒ‡ä»¤è¯»å–è¿™ä»½æ–‡æ¡£ï¼ŒæŠŠå†…å®¹åŠ è½½åˆ°ä¸Šä¸‹æ–‡é‡Œã€‚è¿™ç§â€œè§¦å‘å¼åŠ è½½â€èƒ½ä¿è¯åªæœ‰ç›¸å…³çš„è¯¦ç»†æŒ‡ä»¤æ‰ä¼šæ¶ˆè€— Tokenã€‚</p>
<h4 data-id="heading-5"><strong>Level 3ï¼šèµ„æºä¸ä»£ç ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰</strong></h4>
<p>Skills è¿˜èƒ½æ‰“åŒ…ä¸€äº›æ›´æ·±å…¥çš„èµ„æºï¼Œæ¯”å¦‚æ›´è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼ˆ<em><strong>FORMS.md</strong></em>ï¼‰ã€å¯æ‰§è¡Œè„šæœ¬ï¼ˆ <em><strong>.py</strong></em>ï¼‰æˆ–è€…å‚è€ƒèµ„æ–™ï¼ˆåƒ API æ–‡æ¡£ã€æ•°æ®åº“ç»“æ„ç­‰ï¼‰ã€‚Claude åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™ï¼Œæ‰ä¼šé€šè¿‡ <em><strong>bash</strong></em> å»è¯»å–æˆ–æ‰§è¡Œè¿™äº›æ–‡ä»¶ï¼Œè€Œä¸”è„šæœ¬ä»£ç æœ¬èº«ä¸ä¼šè¿›å…¥ä¸Šä¸‹æ–‡ã€‚è¿™æ ·ä¸€æ¥ï¼ŒSkills å°±èƒ½æ†ç»‘å¤§é‡ä¿¡æ¯ï¼Œå‡ ä¹ä¸ä¼šå¢åŠ é¢å¤–çš„ä¸Šä¸‹æ–‡æˆæœ¬ã€‚</p>
<h3 data-id="heading-6"><strong>Skills çš„è°ƒç”¨é€»è¾‘ï¼šä»ç†è§£æ„å›¾åˆ°ç¨³å®šæ‰§è¡Œ</strong></h3>
<p>é‚£ä¹ˆï¼ŒAgent æ˜¯å¦‚ä½•æ™ºèƒ½åœ°é€‰æ‹©å¹¶æ‰§è¡Œä¸€ä¸ª Skill çš„å‘¢ï¼Ÿæ•´ä¸ªè¿‡ç¨‹å°±åƒä¸€ä½ç»éªŒä¸°å¯Œçš„åŠ©ç†åœ¨å¤„ç†å·¥ä½œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56d095ed53234caca572363ae4de6a9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=%2FAivTlcRt5aFuEPnrm2Mv2vPQT0%3D" alt="" loading="lazy"/></p>
<ol>
<li>
<p><strong>æ„å›¾åŒ¹é…ï¼ˆæ‰¾åˆ°å¯¹çš„äººï¼‰ï¼š</strong> Agent é¦–å…ˆè†å¬ä½ çš„éœ€æ±‚ï¼Œç„¶åå¿«é€Ÿæ‰«ä¸€çœ¼è‡ªå·±æ‰‹å¤´æ‰€æœ‰ Skill çš„â€œåç‰‡å¤¹â€ï¼ˆå…ƒæ•°æ®ï¼‰ï¼Œå¯»æ‰¾æœ€åŒ¹é…çš„é‚£ä¸€å¼ ã€‚</p>
</li>
<li>
<p><strong>è¯»å–æ‰‹å†Œï¼ˆçœ‹æ‡‚æ€ä¹ˆå¹²ï¼‰ï¼š</strong> æ‰¾åˆ°åˆé€‚çš„ Skills åï¼ŒAgent ä¼šåƒæ¨¡åƒæ ·åœ°ç¿»å¼€å®ƒçš„â€œæ“ä½œæ‰‹å†Œâ€ï¼ˆ<em><strong>SKILL.md</strong></em>ï¼‰ï¼Œä»”ç»†ç ”ç©¶è¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ã€‚</p>
</li>
<li>
<p><strong>æŒ‰éœ€æ‰§è¡Œï¼ˆåŠ¨æ‰‹å¼€å¹²ï¼‰ï¼š</strong> æ ¹æ®æ‰‹å†Œçš„æŒ‡å¼•ï¼ŒAgent å¼€å§‹å·¥ä½œã€‚å¦‚æœéœ€è¦ï¼Œå®ƒä¼šéšæ—¶ä»â€œå·¥å…·ç®±â€é‡Œæ‹¿å‡ºè„šæœ¬æˆ–å·¥å…·æ¥å®Œæˆå…·ä½“æ“ä½œã€‚</p>
</li>
<li>
<p><strong>åé¦ˆç»“æœï¼ˆäº‹æ¯•å¤å‘½ï¼‰ï¼š</strong> ä»»åŠ¡å®Œæˆåï¼ŒAgent å‘ä½ æ±‡æŠ¥æœ€ç»ˆç»“æœï¼Œæˆ–è€…åœ¨é‡åˆ°å›°éš¾æ—¶ï¼ŒåŠæ—¶å‘ä½ è¯·æ•™ã€‚</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be94cd4da1f84612aab5a51c9ad0891f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=kfzTOJ2f%2FrSvosdXCKwQ1jG775o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7"><strong>Skills Â vs. Â å…¶ä»–æ¦‚å¿µçš„åŒºåˆ«</strong></h2>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£ Skills çš„ç‹¬ç‰¹ä»·å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠå®ƒå’Œå¦å¤–ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µâ€”â€”<strong>å¿«æ·æŒ‡ä»¤ï¼ˆCommandï¼‰</strong> å’Œ<strong>åŸå­å·¥å…·ï¼ˆMCPï¼‰</strong> â€”â€”æ”¾åœ¨ä¸€èµ·åšä¸ªå¯¹æ¯”ã€‚ç”¨ä¸€ä¸ªå¨æˆ¿çš„ä¾‹å­å°±å¾ˆå¥½æ‡‚äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46415a2bb9a74a72b49cd886e62cbb8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=H6Rn5XSrDc5azaMkgyh32pCPQ3A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b51047922b214010b0b7d886fa290af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=iizVN7MLxbJ5Loaksvy%2BDDA07yw%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿåˆ—ä¸¾äº†å‡ ä¸ªå¤§å®¶å®¹æ˜“æ··æ·†çš„å…¶ä»–åŠŸèƒ½ï¼Œä¸€èµ·æ¥å¯¹æ¯”çœ‹çœ‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ae20becf7a54b9c8dd9d689096c4ada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=umQTI6W%2FXB%2BHCsNqSPZHqhqcr1g%3D" alt="" loading="lazy"/></p>
<p>ğŸ“š å®˜æ–¹åšå®¢è§£é‡Šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.com%2Fblog%2Fskills-explained" target="_blank" title="https://claude.com/blog/skills-explained" ref="nofollow noopener noreferrer">claude.com/blog/skillsâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0526612b042f4c788613b5eac6bc5155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=Q6da1excp3hmiXA8pHZF9Zkkrno%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8"><strong>ä»€ä¹ˆæ˜¯å¥½çš„ Skillsï¼šä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€</strong></h2>
<p><strong>Good Skills vs Bad Skills</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/260567fa689b4cd0be8befc0ddfdfcb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=G1LvLKremMuB9DqfpkHT%2FwMoPmM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9"><strong>å¦‚ä½•å†™å¥½ Skills</strong></h3>
<ol>
<li>
<p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼š</strong> åšæŒå•ä¸€èŒè´£ï¼Œè®©æ¯ä¸ª Skill éƒ½åƒä¸€å—ç§¯æœ¨ï¼Œå°è€Œç¾ï¼Œä¸“æ³¨äºè§£å†³ä¸€ä¸ªå…·ä½“é—®é¢˜ï¼Œä¾¿äºæ—¥åçš„å¤ç”¨å’Œç»„åˆã€‚</p>
</li>
<li>
<p><strong>ç»™ä¾‹å­ï¼ˆFew-Shot Promptingï¼‰ï¼š</strong> <strong>è¿™æ˜¯æœ€å…³é”®çš„ä¸€ç‚¹</strong>ï¼Œä¸å…¶è´¹å°½å£èˆŒè§£é‡Šï¼Œä¸å¦‚ç›´æ¥ç»™å‡ºå‡ ä¸ªæ¸…æ™°çš„è¾“å…¥è¾“å‡ºç¤ºä¾‹ã€‚æ¦œæ ·çš„åŠ›é‡æ˜¯æ— ç©·çš„ï¼Œæ¨¡å‹èƒ½é€šè¿‡å…·ä½“ä¾‹å­ï¼Œç§’æ‡‚ä½ æƒ³è¦çš„æ ¼å¼ã€é£æ ¼å’Œè¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>ç«‹è§„çŸ©ï¼ˆStructured Instructionsï¼‰ï¼š</strong></p>
<p><strong>1) å®šè§’è‰²ï¼š</strong> ç»™å®ƒä¸€ä¸ªæ˜ç¡®çš„ä¸“å®¶äººè®¾ï¼Œæ¯”å¦‚â€œä½ ç°åœ¨æ˜¯ä¸€ä¸ªèµ„æ·±çš„å¸‚åœºåˆ†æå¸ˆâ€ã€‚</p>
<p><strong>2) æ‹†æ­¥éª¤ï¼š</strong> æŠŠä»»åŠ¡æµç¨‹æ‹†è§£æˆä¸€æ­¥æ­¥çš„å…·ä½“æŒ‡ä»¤ï¼Œå¼•å¯¼å®ƒâ€œæ€è€ƒâ€ã€‚</p>
<p><strong>3) ç”»çº¢çº¿ï¼š</strong> æ˜ç¡®å‘Šè¯‰å®ƒâ€œä¸èƒ½åšä»€ä¹ˆâ€ï¼Œé˜²æ­¢å®ƒå¤©é©¬è¡Œç©ºåœ°â€œå¹»è§‰â€</p>
</li>
<li>
<p><strong>é€ æ¥å£ï¼ˆInterface Designï¼‰ï¼š</strong> åƒè®¾è®¡è½¯ä»¶ API ä¸€æ ·ï¼Œæ˜ç¡®å®šä¹‰ Skill çš„è¾“å…¥å‚æ•°å’Œè¾“å‡ºæ ¼å¼ï¼ˆæ¯”å¦‚å›ºå®šè¾“å‡º JSON æˆ– Markdownï¼‰ã€‚è¿™è®©ä½ çš„ Skill å¯ä»¥è¢«å…¶ä»–ç¨‹åºç¨³å®šè°ƒç”¨å’Œé›†æˆã€‚</p>
</li>
</ol>

<ol start="5">
<li><strong>å‹¤å¤ç›˜ï¼ˆIterative Refinementï¼‰ï¼š</strong> æŠŠ Skills å½“ä½œä¸€ä¸ªäº§å“æ¥è¿­ä»£ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ç•™å¿ƒé‚£äº›ä¸å°½å¦‚äººæ„çš„â€œBad Caseâ€ï¼Œç„¶åæŠŠå®ƒä»¬å˜æˆæ–°çš„è§„åˆ™æˆ–åä¾‹ï¼Œè¡¥å……åˆ°ä½ çš„ Skills å®šä¹‰é‡Œï¼Œè®©å®ƒæŒç»­è¿›åŒ–ï¼Œè¶Šæ¥è¶Šèªæ˜ã€è¶Šæ¥è¶Šé è°±ã€‚</li>
</ol>
<p>ğŸ“š ä¸€äº›å®˜æ–¹æœ€ä½³å®è·µæŒ‡å— <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fzh-CN%2Fagents-and-tools%2Fagent-skills%2Fbest-practices" target="_blank" title="https://platform.claude.com/docs/zh-CN/agents-and-tools/agent-skills/best-practices" ref="nofollow noopener noreferrer">platform.claude.com/docs/zh-CN/â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90124ad767404c5da449c53d544012aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=urA0pky4RXmFjJIVB1Ho8wnJb%2Fo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>ç¤¾åŒºçƒ­é—¨ Skills æ¨è</strong></h2>
<p>åˆšå¼€å§‹æ¥è§¦ Skillsï¼Œä¸çŸ¥ä»ä½•ä¸‹æ‰‹ï¼Ÿä¸å¦¨ä»ç¤¾åŒºæ²‰æ·€çš„è¿™äº›çƒ­é—¨ Skills å¼€å§‹ï¼Œå¯»æ‰¾çµæ„Ÿï¼Œæˆ–ç›´æ¥åœ¨ä½ çš„å·¥ä½œæµä¸­å¤ç”¨å®ƒä»¬ã€‚</p>
<h3 data-id="heading-11"><strong>Claude å®˜æ–¹æä¾›çš„ Skills</strong></h3>
<p>ğŸ“š å®˜æ–¹ Skills ä»“åº“  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></p>
<p>å­¦ä¹  Claude å®˜æ–¹çš„ Skills ä»“åº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬æœ€å¿«çš„äº†è§£ Skills çš„æœ€ä½³å®è·µï¼Œä¾¿äºæˆ‘ä»¬æ²‰æ·€å‡ºè‡ªå·±çš„ Skillsã€‚</p>
<blockquote>
<p><strong>å¦‚ä½•å¿«é€Ÿä½¿ç”¨å®˜æ–¹ Skillsï¼Ÿ</strong></p>
<p>å¤§å¤šæ•°å®˜æ–¹ Skills éƒ½èƒ½ç›´æ¥ä¸‹è½½ï¼Œæˆ–è€…é€šè¿‡ Git å…‹éš†åˆ°æœ¬åœ°ã€‚åœ¨ TRAE ç­‰å·¥å…·é‡Œï¼Œä¸€èˆ¬åªéœ€æŠŠè¿™äº› Skills çš„æ–‡ä»¶å¤¹æ”¾åˆ°æŒ‡å®šçš„ <em><strong>Skills</strong></em> ç›®å½•ï¼Œæ¥ç€é‡å¯æˆ–åˆ·æ–° Agentï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åŠ è½½è¿™äº›æ–°èƒ½åŠ›ã€‚å…·ä½“æ“ä½œå¯å‚è€ƒå·¥å…·çš„ä½¿ç”¨æ–‡æ¡£ã€‚</p>
<p>æ›´å¤šç»†èŠ‚å¯å‚è€ƒä¸‹é¢è¿™éƒ¨åˆ†å†…å®¹ï¼š<strong>å¦‚ä½•åœ¨ TRAE é‡Œå¿«é€Ÿç”¨èµ·æ¥</strong></p>
</blockquote>
<p><strong>Claude å®˜æ–¹æä¾›çš„ Skills åˆ—è¡¨</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d3df5f253864939bfefa0c7ef8b5852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=jbuN31Rn4gWzYgvofxBB0YIqWr0%3D" alt="show_679493203_1769422730184.png" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>ç¤¾åŒºå…¶ä»–æœ€ä½³å®è·µ</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e34611085a1c475bb4b2f26285f21bca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=EdlPHC3DgsQUx3M2B%2BbVa%2FhNCa8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/530b1a02e08f45e18af7f7b78cf14941~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=a1gu3tF9yc%2FZSIU6omjYanf8yO8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13"><strong>å¦‚ä½•åœ¨ TRAE é‡Œå¿«é€Ÿä½¿ç”¨</strong></h2>
<p>ç†è®ºè¯´å†å¤šï¼Œä¸å¦‚äº²æ‰‹ä¸€è¯•ã€‚æˆ‘ä»¬å…ˆè®²ä¸€ä¸‹å¦‚ä½•åœ¨ TRAE SOLO ä¸­åˆ›å»ºå¹¶åº”ç”¨ä¸€ä¸ª Skill å¹¶ä»¥åŸºäºé£ä¹¦æ–‡æ¡£çš„ Spec Coding ä¸ºä¾‹è®²è§£ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨ Skills å¿«é€Ÿè§£å†³ä¸€ä¸ªå®é™…é—®é¢˜ã€‚</p>
<h3 data-id="heading-14"><strong>Skill åˆ›å»º</strong></h3>
<p><strong>æ–¹å¼ä¸€ï¼šè®¾ç½®ä¸­ç›´æ¥åˆ›å»º</strong></p>
<p>TRAE æ”¯æŒåœ¨è®¾ç½®é¡µé¢å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ª Skill</p>
<p>æŒ‰ä¸‹å¿«æ·é”® Cmd +/ Ctrl + é€šè¿‡å¿«æ·é”®æ‰“å¼€è®¾ç½®é¢æ¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6894be68150545ddafcf6a2aed27535f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=TYNNesb3q6i7yffMCBgn9CyPTM0%3D" alt="" loading="lazy"/></p>
<p>åœ¨è®¾ç½®é¢æ¿å·¦ä¾§æ‰¾åˆ°ã€Œè§„åˆ™æŠ€èƒ½ã€é€‰é¡¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec94a84497d24c56b026679c6bd190b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=5itKsgX1rjNRS2%2FJde7bVO9O4T8%3D" alt="" loading="lazy"/></p>
<p>æ‰¾åˆ°æŠ€èƒ½æ¿å—ï¼Œç‚¹å‡»å³ä¾§çš„ã€Œåˆ›å»ºã€æŒ‰é’®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39b8d09b9a29433ca09059bae34c9f18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=r0T71CKdS%2FIy3Ky3cX%2FGqrGANQw%3D" alt="" loading="lazy"/></p>
<p>ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç®€æ´çš„åˆ›å»ºç•Œé¢ï¼ŒåŒ…å«ä¸‰è¦ç´ ï¼š<strong>Skill åç§°ã€Skill æè¿°ã€Skill ä¸»ä½“</strong>ã€‚æˆ‘ä»¬ä»¥åˆ›å»ºä¸€ä¸ªâ€œæŒ‰è§„èŒƒæäº¤ git commitâ€çš„ Skill ä¸ºä¾‹ï¼Œå¡«å…¥ç›¸åº”å†…å®¹åç‚¹å‡»ã€Œç¡®è®¤ã€å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b45f17d81c4b4c1083bd0c3a209a6927~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=epgAmv7m272oFkGSweS3o4hjhmU%3D" alt="" loading="lazy"/></p>
<p>å¡«å…¥æˆ‘ä»¬éœ€è¦çš„å†…å®¹ã€Œç¡®è®¤ã€å³å¯</p>
<p><strong>æ–¹å¼äºŒï¼šç›´æ¥è§£æ SKILL.md</strong></p>
<p>åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ–°å¢ç›®å½•.<em><strong>trae/Skills/xxx</strong></em> å¯¼å…¥ä½ éœ€è¦æ–‡ä»¶å¤¹ï¼Œå’Œ TRAE è¿›è¡Œå¯¹è¯ï¼Œå³å¯ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b54f715d553d4c68b517da01516f94e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=Ezz0ssjg2toioy99GRMnaRy5tx0%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥åœ¨ã€Œè®¾ç½® - è§„åˆ™æŠ€èƒ½ã€ä¸­çœ‹åˆ°å·²ç»æˆåŠŸå¯¼å…¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbc7108b9e804a7680d0ceea27012dfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=nugFbLMyBtdfy%2B4J1ycjChfUYdE%3D" alt="" loading="lazy"/></p>
<p><strong>æ–¹å¼ä¸‰ï¼šåœ¨å¯¹è¯ä¸­åˆ›å»º</strong></p>
<p>ç›®å‰ TRAE ä¸­å†…ç½®äº† Skills-creator Skills ï¼Œä½ å¯ä»¥åœ¨å¯¹è¯ä¸­ç›´æ¥å’Œ TRAE è¦æ±‚åˆ›å»ºéœ€è¦çš„ Skills</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b10a41b1e3b4ac1841e9c908c4a4c37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=bmyFQIg0HGR5ulMwl9TZbLOtAJc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15"><strong>Skill ä½¿ç”¨</strong></h3>
<p>åœ¨ TRAE é‡Œä½¿ç”¨æŠ€èƒ½å¾ˆå®¹æ˜“ï¼Œä½ åŠ è½½å¥½éœ€è¦çš„æŠ€èƒ½åï¼Œåªéœ€åœ¨å¯¹è¯æ¡†ä¸­ç”¨æ—¥å¸¸è¯­è¨€è¯´æ˜ä½ çš„éœ€æ±‚å°±è¡Œã€‚</p>
<ul>
<li>
<p>ä¾‹å¦‚ï¼Œè¾“å…¥â€œå¸®æˆ‘è®¾è®¡ä¸€ä¸ªæœ‰ç§‘æŠ€æ„Ÿçš„ç™»å½•é¡µé¢â€ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è°ƒç”¨â€œfrontend-designâ€æŠ€èƒ½ã€‚</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼Œè¾“å…¥â€œå¸®æˆ‘æå–è¿™ä¸ª PDF é‡Œçš„æ‰€æœ‰è¡¨æ ¼â€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨â€œdocument-Skills/pdfâ€æŠ€èƒ½ã€‚</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼Œè¾“å…¥â€œå¸®æˆ‘æŠŠè¿™ç‰‡æŠ€æœ¯æ–‡æ¡£è½¬ä¸ºé£ä¹¦æ–‡æ¡£â€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨â€œusing-feishu-docâ€æŠ€èƒ½ã€‚</p>
</li>
</ul>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†æä½ çš„éœ€æ±‚ï¼ŒåŠ è½½æŠ€èƒ½æ–‡æ¡£ï¼Œè¿˜ä¼šä¸€æ­¥æ­¥æŒ‡å¯¼ä½ å®Œæˆä»»åŠ¡ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5175bab9f2b4529b0f54eac980ae4e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=PfyED%2BwpHDPFoCnxTOJO7oe1RAE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>å®è·µåœºæ™¯ä¸¾ä¾‹</strong></h3>
<p>è¿˜è®°å¾—å¼•è¨€é‡Œæåˆ°çš„é‚£äº›é—®é¢˜å—ï¼Ÿæ¯”å¦‚è¯´ï¼Œé¡¹ç›®è§„åˆ™æ–‡ä»¶ï¼ˆ<em><strong>project_rules</strong></em>ï¼‰æœ‰å­—ç¬¦æ•°é‡çš„é™åˆ¶ï¼›åˆæˆ–è€…ï¼Œå°±ç®—ä½ åœ¨æ ¹è§„åˆ™æ–‡ä»¶é‡Œæ˜ç¡®å†™å¥½äº†â€œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¯»å–å“ªä¸ªæ–‡ä»¶â€ï¼ŒAgent åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ä¹Ÿä¸ä¼šæŒ‰ç…§è¦æ±‚æ¥åšã€‚</p>
<p>è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼Œ<strong>è§„åˆ™ï¼ˆRulesï¼‰å¯¹äº Agent è€Œè¨€æ˜¯å›ºå®šä¸å˜çš„</strong>ï¼Œå®ƒä¼šåœ¨ä»»åŠ¡å¼€å§‹æ—¶å°±æŠŠæ‰€æœ‰è§„åˆ™ä¸€æ¬¡æ€§åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ ·æ—¢å ç”¨ç©ºé—´ï¼Œåˆä¸å¤Ÿçµæ´»ã€‚è€ŒÂ <strong>æŠ€èƒ½ï¼ˆSkillï¼‰é‡‡ç”¨çš„æ˜¯â€œé€æ­¥åŠ è½½â€çš„åŠ¨æ€æ–¹å¼</strong>ï¼Œåˆšå¥½å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¹‹å‰é‚£äº›å¤æ‚çš„è§„åˆ™åœºæ™¯ï¼Œé‡æ–°æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„æŠ€èƒ½ã€‚</p>
<p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåŸºäºé£ä¹¦æ–‡æ¡£çš„â€œSpec Codingâ€ç®€å•æµç¨‹ï¼Œæ¥å®é™…æ“ä½œä¸€ä¸‹å¦‚ä½•ç”¨æŠ€èƒ½è§£å†³é—®é¢˜ã€‚</strong></p>
<h4 data-id="heading-17"><strong>ä»€ä¹ˆæ˜¯ Spec Codingï¼Ÿ</strong></h4>
<p>Spec Coding æå€¡â€œå…ˆæ€è€ƒåè¡ŒåŠ¨â€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡è¯¦ç»†å®šä¹‰å¯ä»¥æ‰§è¡Œçš„éœ€æ±‚è§„èŒƒï¼ˆSpecificationï¼‰æ¥æ¨åŠ¨ AI å¼€å‘ã€‚å®ƒçš„æµç¨‹åŒ…å«â€œéœ€æ±‚åˆ†æã€æŠ€æœ¯è®¾è®¡ã€ä»»åŠ¡æ‹†è§£â€çš„æ–‡æ¡£ç¼–å†™è¿‡ç¨‹ï¼Œæœ€åè®© AI æ ¹æ®è§„èŒƒæ¥å®Œæˆç¼–ç ã€‚è¿™ç§ä¸€æ­¥æ­¥çš„å·¥ä½œæµç¨‹èƒ½ä¿è¯æ¯ä¸€æ­¥éƒ½æœ‰ä¾æ®ï¼Œå®ç°ä»éœ€æ±‚åˆ°ä»£ç çš„å‡†ç¡®è½¬åŒ–ã€‚</p>
<p><strong>è®©æˆ‘æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªåœºæ™¯</strong></p>
<p>ä¸Šé¢æåˆ°å°†å¼€å‘è¿‡ç¨‹åˆ’åˆ†ä¸ºå››ä¸ªå…³é”®é˜¶æ®µï¼Œæ‰€ä»¥è¦å®Œæˆ â€œéœ€æ±‚åˆ†æã€æŠ€æœ¯è®¾è®¡ã€ä»»åŠ¡æ‹†è§£â€ çš„é£ä¹¦æ–‡æ¡£æ’°å†™ï¼Œè¿˜æœ‰æœ€ç»ˆçš„ä»£ç å®ç°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸åŒçš„æŠ€èƒ½æ¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„æ–‡æ¡£ç¼–å†™éœ€æ±‚ï¼Œå¹¶ä¸”è¦æ•™ä¼š Agent å¦‚ä½•ä½¿ç”¨é£ä¹¦å·¥å…·è¿›è¡Œåˆ›ä½œååŒã€‚</p>
<p><strong>ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·å®Œæˆä¸Šé¢æåˆ°çš„ Skills çš„è®¾è®¡å®ç°ã€‚</strong></p>
<h4 data-id="heading-18"><strong>å¤šè§’è‰²ä¸“å®¶ Skills</strong></h4>
<p>é€šè¿‡å®ç°å¤šè§’è‰² Skills é€šè¿‡åˆ›å»ºå¤šä¸ªäº¤ä»˜ç‰©è¿‡ç¨‹æ–‡æ¡£ï¼Œçº¦æŸåç»­çš„ç¼–ç ï¼Œä¸ºç¼–ç æä¾›è¶³å¤Ÿä¸”æ˜ç¡®çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸ªSkill ä¸“æ³¨å®Œæˆä¸€ä»¶äº‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3af5b203e7e446cbb42409995896ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=x2DJMDCBO%2FKvmlfA8f5nD4EIO%2BM%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¸‹é¢è®©æˆ‘ä»¬è¿›ä¸€æ­¥è¯¦ç»†è®¾è®¡</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbbbe68dfda9491798c69f32a084deb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=whcmN6%2B0R4rMiB19SW6pl38vBOc%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§ä¸Šè¿°çš„è¡¨æ ¼æˆ‘ä»¬å°±å¯ä»¥å¤§è‡´æ˜ç¡®æˆ‘ä»¬éœ€è¦çš„ Skills è¯¥å¦‚ä½•å®ç°äº†ã€‚</p>
<ul>
<li>æœ¬æ¬¡åªä½œä¸ºä¸€ä¸ªä¾‹å­å¤§å®¶å¯ä»¥å‚è€ƒä¸Šé¢åˆ›å»º Skill çš„æ•™ç¨‹è‡ªå·±å®Œæˆä¸€ä¸‹è¿™ä¸ªå¤šè§’è‰² Skills çš„åˆ›å»ºå’Œè°ƒè¯•ï¼Œå½“ç„¶æ­£å¦‚ä¸Šé¢æ‰€è¿°å¥½çš„ Skill éœ€è¦åœ¨å®è·µä¸­é€æ¸ä¼˜åŒ–å¹¶é€šè¿‡åœºæ™¯è°ƒç”¨ä¸æ–­è¿›è¡Œä¼˜åŒ–çš„</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/046c201b33704525a24d8d32fdca1e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=tx2MC2Em5jcPSBfbk%2BaJO0SNNZc%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9a0bcd187364746b74ee2f272c8d73a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=2tTeQMuH9IxdOP3XQlLvdlVWWLo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19"><strong>é£ä¹¦æ–‡æ¡£ä½¿ç”¨ Skill</strong></h4>
<p>é£ä¹¦æ–‡æ¡£çš„æ ¼å¼æ˜¯ markdown çš„è¶…é›†ï¼Œ<strong>æˆ‘ä»¬ Skill çš„ç›®çš„åˆ™æ˜¯æ•™ä¼š Agent é£ä¹¦æ–‡æ¡£çš„è¯­æ³•</strong>ï¼Œä¾¿äº Agent å†™å‡ºç¬¦åˆæ ¼å¼çš„ md æ–‡ä»¶ã€‚å¹¶é€šè¿‡çº¦æŸ Agent è¡Œä¸ºï¼Œ<strong>å……åˆ†åˆ©ç”¨é£ä¹¦æ–‡æ¡£çš„è¯„è®ºçš„è¯»å†™å®Œæˆå¤šäººåä½œå®¡é˜…çš„è¿‡ç¨‹</strong>ï¼Œç”¨æˆ·é€šè¿‡åœ¨é£ä¹¦æ–‡æ¡£è¯„è®ºå®Œæˆç›¸å…³å»ºè®®çš„æå‡ºï¼ŒAgent é‡æ–°é˜…è¯»æ–‡æ¡£å’Œè¯„è®ºï¼Œæ ¹æ®å»ºè®®è¿›ä¸€æ­¥ä¼˜åŒ–æ–‡æ¡£ï¼Œ<strong>å®ç°æ–‡æ¡£åä½œå·¥ä½œæµã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/330f2aeb47764d91b04fb728d4464f08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=VejIhkIHalFsBne1uvVTRCaw5UM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-20"><strong>Spec Coding Skill</strong></h4>
<p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†å¤šä¸ªè§’è‰² Skills å’Œä¸€ä¸ªåŠŸèƒ½ Skillï¼Œä½†å®é™…ä½¿ç”¨æ—¶ï¼Œè¿˜éœ€è¦æœ‰ä¸€ä¸ªèƒ½ç»Ÿç­¹å…¨å±€çš„æŠ€èƒ½ï¼Œæ¥å®ç°åˆ†å·¥åä½œã€‚æŠŠä¸Šè¿°å¤šä¸ªæŠ€èƒ½ç»„åˆèµ·æ¥ï¼Œå‘Šè¯‰æ™ºèƒ½ä½“ï¼ˆagentï¼‰æ•´ä½“çš„è§„æ ¼ç¼–ç ï¼ˆspec codingï¼‰æµç¨‹ï¼Œå®Œæˆå·¥å…·æŠ€èƒ½å’Œè§’è‰²æŠ€èƒ½çš„ç»„åˆä¸è°ƒåº¦ã€‚</p>
<p>å¦‚æ­¤æˆ‘ä»¬å°±èƒ½å¿«é€Ÿæ­å»ºä¸€ä¸ªè§„æ ¼ç¼–ç å·¥ä½œæµç¨‹ï¼Œå®ŒæˆåŸºç¡€å¼€å‘ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å‚è€ƒä¸Šé¢çš„é€»è¾‘ï¼Œç”¨æŠ€èƒ½æ¥é‡æ–°å¤åˆ»ç¤¾åŒºé‡Œçš„è§„æ ¼ç¼–ç å®è·µï¼ˆå¦‚ SpecKitã€OpenSpec ç­‰ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5701078e580497895f98d1efd77d5d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=vq%2BTCQxE%2F6DhdQKDYt7WFoPGPUw%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7925bbc8e2d14f1b80591c4e60cc2176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=oGg%2BqMgLQuYpKDdZUviIUAze4Pc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-21"><strong>æ€»ç»“</strong></h4>
<p>ä¸Šè¿°åœºæ™¯æåˆ°äº†ä¸¤ç§ä¸åŒé£æ ¼çš„ Skillï¼ˆè§’è‰²å‹ï¼Œå·¥å…·å‹ï¼‰ï¼Œåˆ©ç”¨Â <strong>Skill çš„åŠ¨æ€åŠ è½½æœºåˆ¶</strong>ï¼ˆå–ä»£å›ºå®šè§„åˆ™çš„ä¸€æ¬¡æ€§åŠ è½½æ–¹å¼ï¼‰ï¼Œå®Œæˆäº†å¤æ‚åœºæ™¯ä¸‹çš„ä»»åŠ¡åˆ†è§£ï¼›é€šè¿‡Â <strong>ä¸åŒè§’è‰²æŠ€èƒ½çš„åˆ†å·¥åä½œ</strong>ï¼ˆé¿å… Agent ä»€ä¹ˆéƒ½åšå¯¼è‡´æ‰§è¡Œæ··ä¹±ï¼‰ï¼›å°è¯•å€ŸåŠ©<strong>é£ä¹¦æ–‡æ¡£å½¢æˆåä½œé—­ç¯</strong>ï¼ˆæ‰“é€šäººæœºäº¤äº’çš„æœ€åä¸€æ­¥ï¼‰ï¼Œæœ‰æ•ˆè§£å†³äº† Agent â€œä¸å¬è¯ã€æ‰§è¡Œä¹±ã€å·¥å…·å°‘â€ çš„é—®é¢˜ï¼Œè®© AI ä» â€œå¯¹è¯åŠ©æ‰‹â€ çœŸæ­£è½¬å˜ä¸º â€œå¯ä¿¡èµ–çš„å®å¹²å®¶â€ï¼Œå®ç°ä»éœ€æ±‚æå‡ºåˆ°ä»£ç äº§å‡ºçš„é«˜æ•ˆã€ç²¾å‡†ã€åä½œå¼äº¤ä»˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/580d8eed249c4a98ae1233f298611cff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=s2iEalF5pfkW%2Fe6eCvci1rjS7tE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-22"><strong>Q &amp; A | ä¸€äº›å¸¸è§é—®é¢˜</strong></h2>
<h3 data-id="heading-23"><strong>ä¸ºä»€ä¹ˆæˆ‘å†™çš„ Skills ä¸ç”Ÿæ•ˆï¼Œæˆ–è€…æ•ˆæœä¸ç¬¦åˆé¢„æœŸï¼Ÿ</strong></h3>
<p><strong>é‚£åæœ‰å…«ä¹æ˜¯ä½ çš„â€œåç‰‡â€ï¼ˆ</strong> <em><strong>Description</strong></em> <strong>ï¼‰æ²¡å†™å¥½ã€‚</strong></p>
<p>è®°ä½ï¼ŒAgent æ˜¯é€šè¿‡è¯»å– Skills çš„ <em><strong>Description</strong></em> æ¥åˆ¤æ–­â€œä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸ª Skillâ€çš„ã€‚è¦æ˜¯ä½ çš„æè¿°å†™å¾—å«ç³Šä¸æ¸…ã€å¤ªä¸“ä¸šæˆ–è€…å¤ªç®€å•ï¼ŒAgent å°±å¾ˆéš¾æ˜ç™½ä½ çš„æ„æ€ï¼Œè‡ªç„¶åœ¨éœ€è¦çš„æ—¶å€™å°±ä¸ä¼šè°ƒç”¨è¿™ä¸ª Skillã€‚æ‰€ä»¥ï¼Œ<strong>ç”¨å¤§ç™½è¯å†™çš„æ¸…æ™°ã€å‡†ç¡®çš„</strong> <em><strong>Description</strong></em> <strong>ï¼Œå¯¹ Skill èƒ½å¦èµ·ä½œç”¨è‡³å…³é‡è¦ã€‚</strong></p>
<h3 data-id="heading-24"><strong>ä½¿ç”¨ Skills çš„æ•ˆæœï¼Œä¼šå—åˆ°æˆ‘é€‰æ‹©çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å½±å“å—ï¼Ÿ</strong></h3>
<p><strong>ä¼šæœ‰å½±å“ï¼Œä¸è¿‡å½±å“çš„æ–¹é¢ä¸ä¸€æ ·ã€‚</strong></p>
<ul>
<li>
<p><strong>ä¸€ä¸ªæ›´å¼ºå¤§çš„æ¨¡å‹ï¼Œä¸»è¦å½±å“â€œæŒ‘é€‰â€å’Œâ€œå®‰æ’â€æŠ€èƒ½çš„èƒ½åŠ›ã€‚</strong> å®ƒèƒ½æ›´å‡†ç¡®åœ°æ˜ç™½ä½ çš„çœŸå®æƒ³æ³•ï¼Œç„¶åä»ä¸€å †æŠ€èƒ½é‡ŒæŒ‘å‡ºæœ€é€‚åˆçš„ä¸€ä¸ªæˆ–å‡ ä¸ªæ¥è§£å†³é—®é¢˜ã€‚å®ƒçš„ä¼˜åŠ¿ä½“ç°åœ¨åˆ¶å®šç­–ç•¥æ–¹é¢ã€‚</p>
</li>
<li>
<p><strong>è€ŒæŠ€èƒ½æœ¬èº«ï¼Œå†³å®šäº†å…·ä½“ä»»åŠ¡æ‰§è¡Œçš„â€œæœ€ä½æ°´å¹³â€å’Œâ€œç¨³å®šæ€§â€ã€‚</strong> ä¸€æ—¦æŸä¸ªæŠ€èƒ½è¢«é€‰ä¸­ï¼Œå®ƒé‡Œé¢è®¾å®šå¥½çš„æµç¨‹å’Œä»£ç æ˜¯å›ºå®šçš„ï¼Œä¼šç¨³å®šåœ°è¿è¡Œã€‚æ‰€ä»¥ï¼ŒæŠ€èƒ½ç¼–å†™å¾—å¥½ä¸å¥½ï¼Œç›´æ¥å†³å®šäº†å…·ä½“ä»»åŠ¡èƒ½ä¸èƒ½å‡ºè‰²å®Œæˆã€‚ã€‚</p>
</li>
</ul>
<h3 data-id="heading-25"><strong>Skills æ˜¯ä¸æ˜¯ä¸‡èƒ½çš„ï¼Ÿæœ‰ä»€ä¹ˆå®ƒä¸æ“…é•¿åšçš„äº‹æƒ…å—ï¼Ÿ</strong></h3>
<p><strong>å½“ç„¶ä¸æ˜¯ä¸‡èƒ½çš„ã€‚</strong> Skills çš„ä¸»è¦ä¼˜åŠ¿æ˜¯<strong>å¤„ç†é‚£äº›æµç¨‹æ˜ç¡®ã€è¾¹ç•Œæ¸…æ™°çš„ä»»åŠ¡ã€‚</strong> åœ¨ä¸‹é¢è¿™äº›æƒ…å†µä¸­ï¼Œå®ƒå¯èƒ½å°±ä¸æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ï¼š</p>
<ul>
<li>
<p><strong>éœ€è¦é«˜åº¦åˆ›é€ åŠ›çš„ä»»åŠ¡ï¼š</strong> åƒå†™ä¸€é¦–é¥±å«æƒ…æ„Ÿçš„è¯—ï¼Œæˆ–è€…è®¾è®¡ä¸€ä¸ªå…¨æ–°çš„å“ç‰Œæ ‡å¿—ã€‚è¿™ç±»å·¥ä½œæ›´éœ€è¦å¤§æ¨¡å‹æœ¬èº«çš„â€œçµæ„Ÿâ€ã€‚</p>
</li>
<li>
<p><strong>éœ€è¦å®æ—¶ã€åŠ¨æ€åšå†³ç­–çš„å¤æ‚ç­–ç•¥æ¸¸æˆï¼š</strong> æ¯”å¦‚åœ¨å˜åŒ–æå¿«çš„é‡‘èå¸‚åœºä¸­åšäº¤æ˜“å†³ç­–ã€‚</p>
</li>
<li>
<p><strong>å•çº¯çš„çŸ¥è¯†é—®ç­”æˆ–å¼€æ”¾å¼é—²èŠï¼š</strong> å¦‚æœä½ åªæ˜¯æƒ³é—®â€œæ–‡è‰ºå¤å…´ä¸‰æ°æ˜¯è°ï¼Ÿâ€ï¼Œç›´æ¥é—®å¤§æ¨¡å‹å°±å¯ä»¥ï¼Œä¸ç”¨åŠ¨ç”¨ Skills è¿™ä¸ªâ€œå¤§æ€å™¨â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-26"><strong>æˆ‘å‘ç°ä¸€ä¸ªç¤¾åŒºçš„ Skills å¾ˆå¥½ç”¨ï¼Œä½†æˆ‘å¯ä»¥ä¿®æ”¹å®ƒä»¥é€‚åº”æˆ‘çš„ç‰¹æ®Šéœ€æ±‚å—ï¼Ÿ</strong></h3>
<p><strong>å½“ç„¶å¯ä»¥ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ è¿™ä¹ˆåšï¼</strong></p>
<p>å¤§å¤šæ•°å…±äº«çš„ Skill éƒ½æ”¯æŒç”¨æˆ·â€œForkâ€ï¼ˆä¹Ÿå°±æ˜¯â€œå¤åˆ¶ä¸€ä»½â€ï¼‰å¹¶è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚ä½ å¯ä»¥æŠŠé€šç”¨çš„ Skill å½“ä½œæ¨¡æ¿ï¼Œåœ¨è‡ªå·±çš„å·¥ä½œç©ºé—´é‡Œå¤åˆ¶ä¸€ä»½ï¼Œç„¶åä¿®æ”¹é‡Œé¢çš„é€»è¾‘æˆ–å‚æ•°ï¼Œä»¥é€‚åº”ä½ è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ã€‚è¿™å¯¹æ•´ä¸ªç”Ÿæ€çš„å…±å»ºå’ŒçŸ¥è¯†å¤ç”¨å¾ˆé‡è¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c2dfe38cb3454f81679a9548f08458~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028042&amp;x-signature=cJCENj%2BpTeNPQE468eNnku7SJfc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-27"><strong>ç»“è¯­ï½œè®© Agent æˆä¸ºä½ çœŸæ­£çš„â€œè¡ŒåŠ¨æ´¾â€</strong></h2>
<p>Skill çš„å‡ºç°ï¼Œä¸º AI ä»â€œå¯¹è¯å¼åŠ©æ‰‹â€è½¬å˜ä¸ºâ€œå¯ä¿¡èµ–çš„æ‰§è¡Œè€…â€æ­å»ºäº†å…³é”®çš„æŠ€æœ¯æ¡¥æ¢ã€‚å®ƒç”¨ç»“æ„åŒ–çš„æ–¹æ³•æŠŠé¢†åŸŸçŸ¥è¯†ã€æ“ä½œæµç¨‹å’Œå·¥å…·è°ƒç”¨é€»è¾‘å°è£…èµ·æ¥ï¼Œè§£å†³äº† Agent è§„åˆ™å¤±æ•ˆã€æ‰§è¡Œå¤±æ§çš„æ··ä¹±é—®é¢˜ï¼Œè®© AI çš„èƒ½åŠ›è¾“å‡ºå˜å¾—å¯ä»¥æ§åˆ¶ã€å€¼å¾—ä¿¡èµ–ä¸”é«˜æ•ˆã€‚</p>
<p>Skill çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>
<p><strong>ç²¾å‡†å®é™…ç—›ç‚¹ï¼š</strong> é€šè¿‡å·§å¦™çš„ä¸‰çº§åŠ è½½æœºåˆ¶ï¼ˆå…ƒæ•°æ®â†’è¯´æ˜æ–‡æ¡£â†’èµ„æºï¼‰å¹³è¡¡ä¸Šä¸‹æ–‡æ•ˆç‡ä¸åŠŸèƒ½æ·±åº¦ï¼Œåœ¨åŠŸèƒ½æ·±åº¦å’Œä¸Šä¸‹æ–‡æ•ˆç‡ä¹‹é—´æ‰¾åˆ°äº†ä¸€ä¸ªç»ä½³çš„å¹³è¡¡ç‚¹ï¼Œæ—¢é¿å…äº†å®è´µ Token çš„æµªè´¹ï¼Œåˆç¡®ä¿äº†ä»»åŠ¡æ‰§è¡Œçš„ç²¾å‡†æ€§ï¼Œå®ç°äº† Agent ä¸Šä¸‹æ–‡çš„åŠ¨æ€åŠ è½½èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæ€èµ‹èƒ½ï¼Œé™ä½é—¨æ§›ï¼š</strong> æ— è®ºæ˜¯å®˜æ–¹è¿˜æ˜¯ç¤¾åŒºï¼Œéƒ½æä¾›äº†ä¸°å¯Œçš„èµ„æºï¼ˆå¦‚ Claude å®˜æ–¹ä»“åº“ã€SkillsMP å¸‚åœºç­‰ï¼‰ï¼Œè®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œå¿«é€Ÿå¤ç”¨å„ç§æˆç†Ÿçš„èƒ½åŠ›ã€‚</p>
</li>
</ul>
<p>è™½ç„¶ Skill ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†å®ƒåœ¨â€œç¡®å®šæ€§æµç¨‹ä»»åŠ¡â€ä¸Šçš„ä¼˜åŠ¿æ— å¯æ›¿ä»£ã€‚æœªæ¥ï¼Œéšç€ AI æ¨¡å‹èƒ½åŠ›çš„æå‡ä¸ Skill ç”Ÿæ€çš„è¿›ä¸€æ­¥å®Œå–„ï¼Œæˆ‘ä»¬æœ‰æœ›çœ‹åˆ°æ›´å¤šè·¨é¢†åŸŸã€å¯ç»„åˆçš„ Skill å‡ºç°â€”â€”<strong>è®© AI ä»â€œæ ·æ ·æ‡‚ä¸€ç‚¹â€çš„é€šæ‰ï¼ŒçœŸæ­£è¿›åŒ–ä¸ºâ€œäº‹äº‹åšå¾—å¥½â€çš„ä¸“å®¶åä½œä¼™ä¼´ã€‚</strong></p>
<p><strong>ä¸å¦¨ä»ä»Šå¤©å¼€å§‹ï¼Œå°è¯•åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Skillï¼šå°†ä½ æœ€æ“…é•¿çš„é¢†åŸŸç»éªŒå°è£…æˆå¯å¤ç”¨çš„èƒ½åŠ›ï¼Œè®© AI æˆä¸ºä½ å»¶ä¼¸ä¸“ä¸šä»·å€¼çš„æ”¾å¤§å™¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ ES çš„æœç´¢ç»“æœåªåˆ° 10,000ï¼Ÿå¼ºåˆ¶â€œæ•°æ¸…æ¥šâ€çš„ä»£ä»·æœ‰å¤šå¤§]]></title>    <link>https://juejin.cn/post/7599514071104765967</link>    <guid>https://juejin.cn/post/7599514071104765967</guid>    <pubDate>2026-01-26T10:33:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599514071104765967" data-draft-id="7599220371666272296" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ ES çš„æœç´¢ç»“æœåªåˆ° 10,000ï¼Ÿå¼ºåˆ¶â€œæ•°æ¸…æ¥šâ€çš„ä»£ä»·æœ‰å¤šå¤§"/> <meta itemprop="keywords" content="æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2026-01-26T10:33:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ ES çš„æœç´¢ç»“æœåªåˆ° 10,000ï¼Ÿå¼ºåˆ¶â€œæ•°æ¸…æ¥šâ€çš„ä»£ä»·æœ‰å¤šå¤§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:33:09.000Z" title="Mon Jan 26 2026 10:33:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€œä¸ºä»€ä¹ˆæœå‡ºæ¥çš„ç»“æœæ€»æ•°æ°¸è¿œæ˜¯ 10,000ï¼Ÿæ˜¯ä¸æ˜¯æ•°æ®ä¸¢äº†ï¼Ÿâ€</p>
</blockquote>
<p>è¿™æ˜¯æ¯ä¸€ä¸ª Elasticsearch æ–°æ‰‹åœ¨ 7.x ç‰ˆæœ¬ä¹‹åéƒ½ä¼šé‡åˆ°çš„â€œçµé­‚å‘é—®â€ã€‚</p>
<p>è€Œåœ¨å¾—çŸ¥â€œè¿™æ˜¯ ES çš„é»˜è®¤æ€§èƒ½ä¼˜åŒ–â€åï¼Œç»å¤§å¤šæ•°äººçš„ç¬¬ä¸€ååº”å¾€å¾€æ˜¯æŠ—æ‹’ï¼šâ€œæˆ‘ä¸æƒ³è¦ä¼˜åŒ–ï¼Œæˆ‘è¦ç²¾å‡†çš„æ•°å­—ï¼è€æ¿è¦çœ‹ï¼Œå‰ç«¯åˆ†é¡µä¹Ÿè¦ç”¨ã€‚â€</p>
<p>äºæ˜¯ï¼Œåœ¨è®¸å¤šé¡¹ç›®çš„ä»£ç åº“é‡Œï¼Œæˆ‘ä»¬éƒ½èƒ½çœ‹åˆ°è¿™æ ·ä¸€è¡Œâ€œè¡¥ä¸â€ï¼š</p>
<p><code>"track_total_hits": true</code></p>
<p>æ•°å­—ç»ˆäºå‡†äº†ï¼Œå˜æˆäº† 854,321ï¼Œå¤§å®¶éƒ½å¾ˆæ»¡æ„ã€‚</p>
<p>ä½†æ²¡äººæ³¨æ„åˆ°ï¼Œå°±åœ¨è¿™è¡Œä»£ç ç”Ÿæ•ˆçš„ç¬é—´ï¼Œé›†ç¾¤çš„ CPU å ç”¨ç‡å¯èƒ½ç›´æ¥ç¿»å€ï¼ŒæŸ¥è¯¢å»¶è¿Ÿä» 20ms åŠ£åŒ–åˆ°äº† 500msã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸€ä¸ªç®€å•çš„â€œè®¡æ•°â€ï¼Œä¼šæˆä¸ºæ‹–å®é›†ç¾¤æ€§èƒ½çš„éšå½¢æ€æ‰‹ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸è°ˆç„å­¦ï¼Œä» Lucene åº•å±‚åŸç† å±‚é¢ï¼Œæ­ç§˜è¿™èƒŒåçš„ä»£ä»·ã€‚</p>
<h2 data-id="heading-0">ç°è±¡ï¼šæ¶ˆå¤±çš„â€œå°¾éƒ¨æ•°æ®â€</h2>
<p>åœ¨ ES 7.0 ä¹‹å‰ï¼ŒæŸ¥è¯¢é»˜è®¤ä¼šç®—å‡ºç²¾ç¡®æ€»æ•°ã€‚ä½†åœ¨ 7.0 ä¹‹åï¼Œé»˜è®¤çš„å“åº”ä½“å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"hits"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"total"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"relation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gte"</span>  <span class="hljs-comment">// æ³¨æ„ï¼šGreater Than or Equal to (å¤§äºç­‰äº)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    ...
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸ä»…æ˜¯ä¸€ä¸ªæ•°å­—çš„å˜åŒ–ï¼Œæ›´æ˜¯æœç´¢å¼•æ“æ£€ç´¢é€»è¾‘çš„æ ¹æœ¬æ€§èŒƒå¼è½¬ç§»ï¼š</p>
<p>ä»â€œæ‰¾å‡ºæ‰€æœ‰åŒ¹é…æ–‡æ¡£â€è¿›åŒ–ä¸ºâ€œåªæ‰¾å‡ºæœ€æœ‰ä»·å€¼çš„ Top Nâ€ã€‚</p>
<h2 data-id="heading-1">æ·±åº¦è§£æï¼šBlock-Max WAND ç®—æ³•çš„æ™ºæ…§</h2>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆâ€œæ•°ä¸å‡†â€èƒ½å¸¦æ¥æ€§èƒ½é£è·ƒï¼Œå¿…é¡»æ·±å…¥ Lucene çš„åº•å±‚ï¼Œäº†è§£ Block-Max WAND (BMW) ç®—æ³•ã€‚</p>
<h3 data-id="heading-2">1. å€’æ’ç´¢å¼•çš„ç‰©ç†ç»“æ„ï¼šBlock</h3>
<p>åœ¨ Lucene çš„å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰ä¸­ï¼Œä¸€ä¸ª Termï¼ˆè¯é¡¹ï¼‰å¯¹åº”çš„ Postings Listï¼ˆæ–‡æ¡£ ID åˆ—è¡¨ï¼‰å¹¶ä¸æ˜¯ä¸€æ•´æ¡é•¿é“¾ï¼Œè€Œæ˜¯è¢«åˆ‡åˆ†æˆäº†å¤šä¸ª Blockï¼ˆå—ï¼‰ï¼Œé€šå¸¸åŒ…å« 128 ä¸ªæ–‡æ¡£ IDã€‚</p>
<p>å…³é”®ç‚¹åœ¨äºï¼š</p>
<p>æ¯ä¸ª Block éƒ½æœ‰ä¸€ä¸ª Block Headerï¼Œé‡Œé¢è®°å½•äº†è¿™ä¸ªå—çš„å…ƒæ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ˜¯ï¼š</p>
<p>Max Scoreï¼ˆå—å†…æœ€å¤§åˆ†æ•°ï¼‰ï¼šå³è¿™ä¸ª Block é‡Œæ‰€æœ‰æ–‡æ¡£ä¸­ï¼Œèƒ½äº§ç”Ÿçš„æœ€é«˜ç›¸å…³æ€§å¾—åˆ†æ˜¯å¤šå°‘ã€‚</p>
<h3 data-id="heading-3">2. ç«é€Ÿæœºåˆ¶ï¼šMin Competitive Score</h3>
<p>å½“ ES æ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ¯”å¦‚æŸ¥è¯¢â€œæ‰‹æœºâ€ï¼‰å¹¶ç´¢è¦ Top 10 ç»“æœæ—¶ï¼Œå®ƒä¼šç»´æŠ¤ä¸€ä¸ª æœ€å°ç«äº‰åˆ†æ•°ï¼ˆMin Competitive Scoreï¼‰ã€‚</p>
<ul>
<li>
<p>åˆšå¼€å§‹ï¼ŒTop 10 æ²¡æ»¡ï¼Œæœ€å°ç«äº‰åˆ†æ•°æ˜¯ 0ã€‚</p>
</li>
<li>
<p>éšç€æ‰«æè¿›è¡Œï¼Œæ‰¾åˆ°äº† 10 ä¸ªæ–‡æ¡£ï¼Œç¬¬ 10 åçš„åˆ†æ•°æ˜¯ 5.0ã€‚</p>
</li>
<li>
<p>æ­¤æ—¶ï¼Œæœ€å°ç«äº‰åˆ†æ•°å˜æˆäº† 5.0ã€‚æ„å‘³ç€ï¼šä»»ä½•åˆ†æ•°ä½äº 5.0 çš„æ–‡æ¡£ï¼Œè¿è¿›å†³èµ›åœˆçš„èµ„æ ¼éƒ½æ²¡æœ‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">3. â€œéš”å±±æ‰“ç‰›â€çš„è·³è·ƒä¼˜åŒ–</h3>
<p>æ¥ä¸‹æ¥ï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ã€‚</p>
<p>å½“éå†æŒ‡é’ˆæ¥åˆ°ä¸‹ä¸€ä¸ª Blockï¼ˆå‡è®¾åŒ…å« ID 1000-1127ï¼‰æ—¶ï¼Œç®—æ³•ä¸éœ€è¦è§£å‹è¿™ä¸ª Blockï¼Œä¹Ÿä¸éœ€è¦è®¡ç®—å…·ä½“çš„æ–‡æ¡£åˆ†æ•°ï¼Œè€Œæ˜¯ç›´æ¥çœ‹ Block Headerï¼š</p>
<blockquote>
<p>ç®—æ³•æ‹·é—®ï¼š â€œè¿™ä¸ª Block çš„ Max Score æ˜¯å¤šå°‘ï¼Ÿâ€Block å›ç­”ï¼š â€œæœ€é«˜åªèƒ½å¾— 4.5 åˆ†ã€‚â€ç®—æ³•åˆ¤æ–­ï¼š â€œç°åœ¨çš„é—¨æ§›ï¼ˆMin Competitive Scoreï¼‰å·²ç»æ˜¯ 5.0 äº†ã€‚ä½ è¿™ä¸ª Block é‡Œçš„æ–‡æ¡£å…¨æ˜¯â€˜åºŸæŸ´â€™ï¼Œæ•´ä¸ª Block ç›´æ¥è·³è¿‡ï¼â€</p>
</blockquote>
<p>ç»“æœï¼š ES å¯èƒ½ç›´æ¥è·³è¿‡äº†æ•°ç™¾ä¸‡ä¸ªä½åˆ†æ–‡æ¡£ã€‚</p>
<p>ä»£ä»·ï¼š å› ä¸ºè·³è¿‡äº†ï¼ŒES æ ¹æœ¬ä¸çŸ¥é“åˆšæ‰é‚£ä¸ª Block é‡Œæœ‰å‡ ä¸ªæ–‡æ¡£åŒ¹é…ï¼ˆè™½ç„¶åˆ†ä½ï¼Œä½†ç¡®å®åŒ¹é…ï¼‰ã€‚æ‰€ä»¥ï¼Œå®ƒæ— æ³•ç»™å‡ºç²¾ç¡®çš„æ€»æ•°ã€‚</p>
<h2 data-id="heading-5">éšå½¢é™·é˜±ï¼šä¸ºä»€ä¹ˆå…³äº† track_total_hits ä¾ç„¶æ…¢ï¼Ÿ</h2>
<p>ä½ ä»¥ä¸ºæŠŠ track_total_hits è®¾ä¸º false å°±ä¸‡äº‹å¤§å‰äº†ï¼Ÿ</p>
<p>åˆ«å¤©çœŸäº†ã€‚ åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå³ä½¿ä½ æ˜¾å¼å…³é—­äº†è®¡æ•°ï¼ŒES ä¾ç„¶æ— æ³•ä½¿ç”¨ Block-Max WAND è¿›è¡Œå‰ªæï¼ŒæŸ¥è¯¢æ€§èƒ½ä¾ç„¶ä¼šå¾ˆå·®ã€‚</p>
<p>è¿™å°±å¥½æ¯”ä½ å‘Šè¯‰å¸æœºâ€œä¸ç”¨æ•°è·¯è¾¹æœ‰å‡ æ£µæ ‘ï¼ˆä¸è®¡æ•°ï¼‰â€ï¼Œä½†ä½ åŒæ—¶åˆä¸‹ä»¤â€œæŠŠè·¯è¾¹æ¯æ£µæ ‘çš„å¶å­éƒ½æ‘˜ä¸€ç‰‡ä¸‹æ¥ï¼ˆèšåˆï¼‰â€ã€‚å¸æœºè™½ç„¶ä¸ç”¨æ•°æ•°ï¼Œä½†ä»–ä¾ç„¶å¾—åœåœ¨æ¯ä¸€æ£µæ ‘ä¸‹ã€‚</p>
<h3 data-id="heading-6">1. èšåˆï¼ˆAggregationsï¼‰ï¼šWAND çš„å¤©æ•Œ</h3>
<p>WAND ç®—æ³•çš„æ ¸å¿ƒå¥¥ä¹‰æ˜¯ â€œSkippingï¼ˆè·³è¿‡ï¼‰â€ã€‚</p>
<p>è€Œèšåˆï¼ˆAggregationsï¼‰çš„æ ¸å¿ƒè¯‰æ±‚æ˜¯ â€œTraversingï¼ˆéå†ï¼‰â€ã€‚</p>
<p>å¦‚æœä½ åœ¨æŸ¥è¯¢ä¸­åŒ…å«ä»»ä½•èšåˆï¼ˆä¾‹å¦‚ <code>terms</code>ã€<code>avg</code>ã€<code>date_histogram</code>ï¼‰ï¼ŒES å¿…é¡»è®¿é—®æ‰€æœ‰åŒ¹é…çš„æ–‡æ¡£æ¥è®¡ç®—ç»Ÿè®¡å€¼ã€‚</p>
<ul>
<li>
<p>å†²çªç‚¹ï¼šä½ ä¸èƒ½è·³è¿‡ä¸€ä¸ª Blockï¼Œå› ä¸ºé‚£ä¸ªè¢«è·³è¿‡çš„ Block é‡Œå¯èƒ½åŒ…å«èšåˆæ‰€éœ€çš„æ•°æ®ã€‚</p>
</li>
<li>
<p>ç»“æœï¼šWAND ä¼˜åŒ–è¢«è¿«å…³é—­ï¼Œå…¨é‡æ‰«æä¸å¯é¿å…ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">2. æ’åºä¸åˆ†æ•°çš„çº ç»“ï¼ˆSort + track_scoresï¼‰</h3>
<p>Block-Max WAND ä¾èµ–äº Max Score æ¥è¿›è¡Œè·³è·ƒã€‚</p>
<ul>
<li>
<p>åœºæ™¯ï¼šä½ æŒ‰æ—¶é—´æ’åº (<code>sort: [{"timestamp": "desc"}]</code>)ã€‚</p>
</li>
<li>
<p>é™·é˜±ï¼šå¦‚æœä½ æ‰‹æ»‘åŠ äº† <code>track_scores: true</code>ï¼ˆæˆ–è€…æŸäº› Client é»˜è®¤å¼€å¯ï¼‰ã€‚</p>
</li>
<li>
<p>åæœï¼šè™½ç„¶æ˜¯æŒ‰æ—¶é—´æ’åºï¼Œä½†å› ä¸ºä½ å¼ºè¡Œç´¢è¦ <code>_score</code>ï¼ŒES å¿…é¡»å¯¹æ¯ä¸ªæ–‡æ¡£è®¡ç®—åˆ†æ•°ï¼Œå¯¼è‡´æ— æ³•åˆ©ç”¨ BKD Tree çš„ç´¢å¼•é¡ºåºè¿›è¡Œå¿«é€Ÿè·³è·ƒï¼Œä¹Ÿéš¾ä»¥é€šè¿‡ WAND è¿›è¡Œåˆ†æ•°å‰ªæï¼ˆå› ä¸ºæ’åºä¸æ˜¯æŒ‰åˆ†æ•°æ’çš„ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-8">ä»£ä»·ï¼štrack_total_hits å¦‚ä½•æ‘§æ¯æ€§èƒ½</h2>
<p>å£è¯´æ— å‡­ï¼Œæ•°æ®ä¸ºè¯ã€‚æˆ‘ä»¬åœ¨ Serverless 8.17 ç¯å¢ƒä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª6åˆ†ç‰‡1å‰¯æœ¬çš„ç´¢å¼•ï¼Œå†™å…¥çº¦ 2 äº¿æ¡ è„±æ•æ–‡æ¡£ï¼Œæ€»è®¡çº¦30Gæ•°æ®ï¼ŒæŸ¥è¯¢qpsæ§åˆ¶åœ¨30 ã€‚ç”¨å®æµ‹ç»“æœå‘ä½ å±•ç¤ºâ€”â€”track_total_hits å–ä¸åŒå€¼æ—¶çš„cuæ¶ˆè€—åŠå“åº”æ—¶é•¿ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b42c37cdd0db4318af44b2873e09607b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028389&amp;x-signature=%2Bz8vTJtg6%2BJbxbAYMp85ITEtTr4%3D" alt="" loading="lazy"/></p>
<p>CPU èµ„æºæ¶ˆè€—å¯¹æ¯”(true,false,10000)</p>
<p>â€‹<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d01ffef0e164ba09662dc008a1a59c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028389&amp;x-signature=8f4n1YHNv0N03LNaG8Y9Msihm%2FM%3D" alt="" loading="lazy"/></p>
<p>å¹³å‡è€—æ—¶å’Œ P95 è€—æ—¶å¯¹æ¯”(true,false,10000)</p>
<p>å½“ä½ åŠ ä¸Š "track_total_hits": true æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å¯¹åº•å±‚å¼•æ“ä¸‹è¾¾ä¸€é“â€œæ­»å‘½ä»¤â€ï¼š</p>
<p>â€œç¦ç”¨ Block-Max WAND ä¼˜åŒ–ï¼Œç¦æ­¢è·³è¿‡ä»»ä½•ä¸€ä¸ª Blockã€‚â€è¿™å¸¦æ¥çš„æ€§èƒ½å´©å¡Œæ˜¯æ˜¾è‘—çš„ã€‚</p>
<h3 data-id="heading-9">1. CPU çš„ç‡ƒçƒ§ï¼ˆè®¡ç®—å¯†é›†ï¼‰</h3>
<ul>
<li>
<p>ä¼˜åŒ–æ¨¡å¼ï¼šåªè§£å‹å’Œè®¡ç®—é«˜åˆ† Blockã€‚</p>
</li>
<li>
<p>å¼ºåˆ¶è®¡æ•°ï¼šå¿…é¡»è§£å‹æ‰€æœ‰åŒ¹é…çš„ Blockï¼ˆä½¿ç”¨ Frame Of Reference ç¼–ç ï¼‰ï¼Œå¹¶å¯¹æ¯ä¸€ä¸ªæ–‡æ¡£ ID è¿›è¡Œè§£ç å’Œæ¯”å¯¹ã€‚</p>
</li>
<li>
<p>é‡çº§å·®å¼‚ï¼šå¦‚æœæŸ¥è¯¢åŒ¹é… 1 äº¿æ¡æ•°æ®ï¼ŒåŸæœ¬åªéœ€è®¡ç®— Top 1000 çš„åˆ†æ•°ï¼Œç°åœ¨å¿…é¡»è®¡ç®— 1 äº¿æ¬¡ã€‚CPU æ¶ˆè€—å¯èƒ½å¢åŠ å‡ ä¸ªæ•°é‡çº§ã€‚</p>
</li>
</ul>
<h3 data-id="heading-10">2. I/O çš„é›ªå´©ï¼ˆè®¿å­˜å¯†é›†ï¼‰</h3>
<ul>
<li>
<p>ä¼˜åŒ–æ¨¡å¼ï¼šä½åˆ† Blockï¼ˆé€šå¸¸æ˜¯å†å²å†·æ•°æ®ï¼‰ç›´æ¥è·³è¿‡ï¼Œä¸éœ€è¦ä»ç£ç›˜è¯»å–ã€‚</p>
</li>
<li>
<p>å¼ºåˆ¶è®¡æ•°ï¼šå¼ºåˆ¶è¯»å–æ‰€æœ‰ Blockã€‚</p>
</li>
<li>
<p>åæœï¼šè¿™ä¼šå¯¼è‡´å¤§é‡çš„éšæœº I/Oã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œè¿™äº›æœ¬è¯¥æ²‰ç¡çš„å†·æ•°æ®è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¼šæ±¡æŸ“ Page Cacheï¼ŒæŠŠçœŸæ­£çƒ­ç‚¹çš„æ•°æ®ï¼ˆæ¯”å¦‚æœ€è¿‘ 5 åˆ†é’Ÿçš„æ—¥å¿—ï¼‰æŒ¤å‡ºå»ã€‚</p>
</li>
<li>
<p>ç°è±¡ï¼šä½ ä¼šå‘ç°ï¼Œä¸ºäº†æŸ¥ä¸€ä¸ªæ€»æ•°ï¼Œæ•´ä¸ªé›†ç¾¤çš„å†™å…¥æ€§èƒ½å’Œçƒ­æŸ¥è¯¢æ€§èƒ½éƒ½ä¸‹é™äº†ã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">å†³ç­–çŸ©é˜µï¼šåˆ°åº•ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ï¼Ÿ</h2>
<p>æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªæ¸…æ™°çš„å†³ç­–æ ‡å‡†ï¼Œè€Œä¸æ˜¯ç›²ç›®åœ° <code>true</code>ã€‚</p>
<p><strong>åœºæ™¯</strong></p>
<p><strong>track_total_hits è®¾ç½®</strong></p>
<p><strong>ç†ç”±</strong></p>
<p><strong>C ç«¯æœç´¢ / App åˆ—è¡¨</strong></p>
<p><code>false</code> æˆ– <code>10000</code> (é»˜è®¤)</p>
<p>ç”¨æˆ·åªç¿»å‰å‡ é¡µã€‚æ˜¾ç¤ºâ€œ10,000+â€å®Œå…¨æ»¡è¶³ä½“éªŒï¼Œæ€§èƒ½æœ€ä¼˜ã€‚</p>
<p><strong>é«˜é¢‘ä¸šåŠ¡æ¥å£</strong></p>
<p><strong>(QPS &gt; 100)</strong></p>
<p><code>false</code></p>
<p>**ç»å¯¹ç¦æ­¢å¼€å¯ã€‚**é«˜å¹¶å‘ä¸‹å¼€å¯å…¨é‡è®¡æ•°æ˜¯é›†ç¾¤é›ªå´©çš„å¯¼ç«ç´¢ã€‚</p>
<p><strong>åå°ç®¡ç† / å®¡æ ¸åˆ—è¡¨</strong></p>
<p><code>true</code> (æ…ç”¨)</p>
<p>è¿è¥äººå‘˜å¹¶å‘ä½ï¼Œä¸”å¿…é¡»çŸ¥é“ç¡®åˆ‡çš„â€œå¾…åŠæ•°é‡â€ã€‚</p>
<p><strong>æ•°æ®å¤§ç›˜ / è¶‹åŠ¿å›¾</strong></p>
<p><code>false</code> (ä½¿ç”¨èšåˆ)</p>
<p>ä¸è¦ç”¨ hits.total ç”»å›¾ï¼è¯·ä½¿ç”¨ <code>date_histogram</code> æˆ– <code>cardinality</code> èšåˆã€‚</p>
<p><strong>æ•°æ®å¯¼å‡º</strong></p>
<p><code>false</code></p>
<p>å¯¼å‡ºä»»åŠ¡åº”ä½¿ç”¨ Scroll API æˆ– Point in Time (PIT) APIï¼Œè¿™äº› API é’ˆå¯¹å…¨é‡éå†åšäº†ä¼˜åŒ–ï¼Œä¸éœ€è¦å®æ—¶è®¡ç®—æ€»æ•° ã€‚</p>
<h2 data-id="heading-12">Serverless ä¸‹çš„æ²»ç†ä¹‹é“</h2>
<p>åœ¨è‡ªå»ºé›†ç¾¤ä¸­ï¼Œå¾ˆéš¾é™åˆ¶å¼€å‘è€…çš„ä»£ç è¡Œä¸ºã€‚ä½†åœ¨ é˜¿é‡Œäº‘ ES Serverless ä¸­ï¼Œæˆ‘ä»¬å»ºè®®é€šè¿‡é…ç½®è¿›è¡Œé˜²å¾¡æ€§æ²»ç†ã€‚</p>
<h3 data-id="heading-13">1. è½¯é™åˆ¶ï¼š"Track Total Hitsä¸Šé™"</h3>
<p>ä½ å¯ä»¥é€šè¿‡ ES Serverless æ§åˆ¶å°â€”å¼€å¯åŠŸèƒ½è®¾ç½®ï¼Œç»™æŸ¥è¯¢åŠ ä¸Šä¸€é“â€œä¿æŠ¤é”â€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea09ce16766a4fcd982a9831070dbb65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028389&amp;x-signature=f3h%2FjLvAZSfXxYfQYlpUWbWDrlk%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>æ•ˆæœï¼šä¸€æ—¦è®¾ç½®ï¼Œå³ä½¿å®¢æˆ·ç«¯è¯·æ±‚ä¸­å¸¦äº† <code>"track_total_hits": true</code>ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šå¼ºåˆ¶å¿½ç•¥ï¼Œåªè®¡ç®—åˆ° 10,000ã€‚</p>
</li>
<li>
<p>ä»·å€¼ï¼šä»æ ¹æºä¸Šé˜²æ­¢äº†æŸä¸ªå®ä¹ ç”Ÿçš„ä¸€è¡Œä»£ç ææŒ‚æ•´ä¸ªç”Ÿäº§é›†ç¾¤ã€‚</p>
</li>
</ul>
<h3 data-id="heading-14">2. æ‹¥æŠ±â€œæ¨¡ç³Šçš„æ­£ç¡®â€</h3>
<p>åœ¨äº‘åŸç”Ÿæ—¶ä»£ï¼Œç®—åŠ›æ˜¯æŒ‰é‡è®¡è´¹çš„ï¼ˆCUï¼‰ã€‚</p>
<p>â€œæ— æ„ä¹‰çš„ç²¾ç¡®è®¡æ•°â€ = â€œç›´æ¥çƒ§é’±â€ã€‚</p>
<p>åˆ©ç”¨ Serverless çš„å¼¹æ€§ä¸æ²»ç†èƒ½åŠ›ï¼Œå°†ç®—åŠ›é›†ä¸­åœ¨çœŸæ­£äº§ç”Ÿä¸šåŠ¡ä»·å€¼çš„ Top N æœç´¢ä¸Šï¼Œæ‰æ˜¯é™æœ¬å¢æ•ˆçš„å…³é”®ã€‚</p>
<h2 data-id="heading-15">é™„å½•ï¼šä»£ç ä¸å®æ“</h2>
<h4 data-id="heading-16">1. æ­£ç¡®çš„æŸ¥è¯¢å§¿åŠ¿ (DSL)</h4>
<p><strong>åœºæ™¯ Aï¼šåªè¦ Top 10 (æ€§èƒ½æœ€å¿«)</strong></p>
<pre><code class="hljs language-json" lang="json">GET /logs/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"match"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"track_total_hits"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>  <span class="hljs-comment">// æ˜¾å¼å…³é—­ï¼Œè¿ 10000 éƒ½ä¸æ•°ï¼Œæœ€å¿«</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p><strong>åœºæ™¯ Bï¼šéœ€è¦ç²¾ç¡®è®¡æ•° (Java Client)</strong></p>
<pre><code class="hljs language-ini" lang="ini">SearchRequest <span class="hljs-attr">searchRequest</span> = new SearchRequest(<span class="hljs-string">"logs"</span>)<span class="hljs-comment">;</span>
SearchSourceBuilder <span class="hljs-attr">sourceBuilder</span> = new SearchSourceBuilder()<span class="hljs-comment">;</span>
sourceBuilder.query(QueryBuilders.matchQuery("message", "error"))<span class="hljs-comment">;</span>

// âš ï¸ è­¦å‘Šï¼šä»…åœ¨å¿…è¦æ—¶å¼€å¯ï¼Œæ³¨æ„æ€§èƒ½æŸè€—
sourceBuilder.trackTotalHits(true)<span class="hljs-comment">; </span>

// æˆ–è€…è®¾ç½®ä¸€ä¸ªå…·ä½“çš„ä¸Šé™ï¼Œä¾‹å¦‚ 5ä¸‡
// sourceBuilder.trackTotalHitsUpTo(50000)<span class="hljs-comment">; </span>

searchRequest.source(sourceBuilder)<span class="hljs-comment">;</span>
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h3 data-id="heading-17">2. é«˜æ•ˆæ›¿ä»£æ–¹æ¡ˆï¼šCardinality èšåˆ</h3>
<p>å¦‚æœä½ åªæ˜¯æƒ³çŸ¥é“â€œå¤§æ¦‚æœ‰å¤šå°‘æ¡æ—¥å¿—â€ï¼Œä¸è¦ç”¨ <code>track_total_hits</code>ï¼Œè¯·ç”¨ HyperLogLog ç®—æ³•ï¼š</p>
<pre><code class="hljs language-json" lang="json">GET /logs/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"aggs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"total_count_approx"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cardinality"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"field"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"_id"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æˆ–è€…å…¶ä»–é«˜åŸºæ•°ä¸»é”®</span>
        <span class="hljs-attr">"precision_threshold"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span> 
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼šæ€§èƒ½æå¿«ï¼Œå†…å­˜å ç”¨æä½ã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šæœ‰çº¦ 5% ä»¥å†…çš„è¯¯å·®ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-222 ç¦»çº¿æ•°ä»“å»ºæ¨¡å®æˆ˜ï¼šäº‹å®è¡¨/ç»´åº¦è¡¨ã€ä¸‰ç±»äº‹å®è¡¨ä¸é›ªèŠ±/æ˜Ÿåº§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7599478406238076937</link>    <guid>https://juejin.cn/post/7599478406238076937</guid>    <pubDate>2026-01-26T10:39:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599478406238076937" data-draft-id="7599294170000916531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-222 ç¦»çº¿æ•°ä»“å»ºæ¨¡å®æˆ˜ï¼šäº‹å®è¡¨/ç»´åº¦è¡¨ã€ä¸‰ç±»äº‹å®è¡¨ä¸é›ªèŠ±/æ˜Ÿåº§æ¨¡å‹"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Hadoop"/> <meta itemprop="datePublished" content="2026-01-26T10:39:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-222 ç¦»çº¿æ•°ä»“å»ºæ¨¡å®æˆ˜ï¼šäº‹å®è¡¨/ç»´åº¦è¡¨ã€ä¸‰ç±»äº‹å®è¡¨ä¸é›ªèŠ±/æ˜Ÿåº§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T10:39:12.000Z" title="Mon Jan 26 2026 10:39:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç¦»çº¿æ•°ä»“ä¸»é¢˜å»ºæ¨¡ï¼Œå›´ç»•äº‹å®è¡¨ç²’åº¦ã€ç»´åº¦è®¾è®¡ä¸æ¨¡å‹é€‰å‹è½åœ°ã€‚</li>
<li>ç»“è®ºï¼šå…ˆå®šâ€œç²’åº¦+äº‹å®ç±»å‹â€ï¼Œå†é€‰æ˜Ÿå‹/é›ªèŠ±/æ˜Ÿåº§ï¼›ç´¯ç§¯å¿«ç…§å…è®¸æ›´æ–°ä½†è¦ç®¡å¥½é‡Œç¨‹ç¢‘æ—¥æœŸé”®ã€‚</li>
<li>äº§å‡ºï¼šäº‹å®è¡¨åˆ†ç±»è¦ç‚¹ã€æ¨¡å‹é€‰å‹è¾¹ç•Œã€å¸¸è§é”™è¯¯å®šä½ä¸ä¿®å¤æ¸…å•ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/654118d8b1c54b5db985ddf949215468~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=Pp7DLR0JLw%2FGc46qkebFnotq%2Fc0%3D" alt="å¤§æ•°æ®-222 ç¦»çº¿æ•°ä»“å»ºæ¨¡å®æˆ˜ï¼šäº‹å®è¡¨/ç»´åº¦è¡¨ã€ä¸‰ç±»äº‹å®è¡¨ä¸é›ªèŠ±/æ˜Ÿåº§æ¨¡å‹" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8471afa6f5c47829bcc3edc3e0aa67c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=fKRkO9xVmbdwXRz3JVndrWmnAcQ%3D" alt="ç¦»çº¿æ•°ä»“ æ¶æ„å›¾" loading="lazy"/></p>
<h2 data-id="heading-1">æ•°ä»“æ¨¡å‹</h2>
<h3 data-id="heading-2">äº‹å®è¡¨ä¸ç»´åº¦è¡¨</h3>
<p>åœ¨æ•°æ®ä»“åº“æ¶æ„ä¸­ï¼Œäº‹å®è¡¨ï¼ˆFact Tableï¼‰æ˜¯å­˜å‚¨ä¸šåŠ¡è¿‡ç¨‹åº¦é‡å€¼æˆ–äº‹å®çš„æ ¸å¿ƒè¡¨ç»“æ„ã€‚å®ƒæ˜¯æ˜Ÿå‹æ¨¡å¼æˆ–é›ªèŠ±æ¨¡å¼ä¸­çš„ä¸­å¿ƒè¡¨ï¼Œä¸å¤šä¸ªç»´åº¦è¡¨ç›¸å…³è”ã€‚</p>
<p>äº‹å®è¡¨å…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>åŒ…å«ä¸šåŠ¡è¿‡ç¨‹çš„é‡åŒ–æŒ‡æ ‡ï¼ˆäº‹å®ï¼‰ï¼Œå¦‚é”€å”®é¢ã€è®¢å•æ•°é‡ã€åº“å­˜é‡ç­‰</li>
<li>é€šå¸¸åŒ…å«å¤–é”®ï¼ˆForeign Keyï¼‰ç”¨äºå…³è”ç»´åº¦è¡¨</li>
<li>æ•°æ®é‡é€šå¸¸éå¸¸åºå¤§ï¼Œå¯èƒ½åŒ…å«æ•°ç™¾ä¸‡ç”šè‡³æ•°åäº¿è¡Œè®°å½•</li>
<li>è®°å½•é€šå¸¸æ˜¯åªè¯»çš„ï¼Œåæ˜ å†å²ä¸šåŠ¡æ´»åŠ¨</li>
</ol>
<p>äº‹å®è¡¨ä¸­çš„äº‹å®å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>å¯åŠ æ€§äº‹å®ï¼šå¯ä»¥æŒ‰ç…§ä»»ä½•ç»´åº¦è¿›è¡Œæ±‡æ€»ï¼ˆå¦‚é”€å”®é¢ï¼‰</li>
<li>åŠå¯åŠ æ€§äº‹å®ï¼šåªèƒ½åœ¨éƒ¨åˆ†ç»´åº¦ä¸Šæ±‡æ€»ï¼ˆå¦‚è´¦æˆ·ä½™é¢ï¼‰</li>
<li>ä¸å¯åŠ æ€§äº‹å®ï¼šä¸èƒ½è¿›è¡Œæ±‡æ€»ï¼ˆå¦‚å•ä»·ã€ç™¾åˆ†æ¯”ï¼‰</li>
</ul>
<p>äº‹å®è¡¨çš„ç²’åº¦ï¼ˆGranularityï¼‰æ˜¯æŒ‡è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®æ‰€ä»£è¡¨çš„ä¸šåŠ¡å«ä¹‰ï¼Œå¸¸è§ç²’åº¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>äº¤æ˜“çº§åˆ«ï¼šæ¯æ¡è®°å½•ä»£è¡¨ä¸€ä¸ªäº¤æ˜“ï¼ˆå¦‚å•ä¸ªè®¢å•é¡¹ï¼‰</li>
<li>å¿«ç…§çº§åˆ«ï¼šå®šæœŸè®°å½•çŠ¶æ€ï¼ˆå¦‚æ¯æ—¥åº“å­˜å¿«ç…§ï¼‰</li>
<li>ç´¯ç§¯å¿«ç…§ï¼šè·Ÿè¸ªä¸šåŠ¡è¿‡ç¨‹å¤šä¸ªé˜¶æ®µï¼ˆå¦‚è®¢å•ä»åˆ›å»ºåˆ°äº¤ä»˜ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨é›¶å”®æ•°æ®ä»“åº“ä¸­ï¼Œé”€å”®äº‹å®è¡¨å¯èƒ½åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<ul>
<li>äº‹å®ï¼šé”€å”®é‡‘é¢ã€é”€å”®æ•°é‡ã€æŠ˜æ‰£é‡‘é¢</li>
<li>å¤–é”®ï¼šæ—¥æœŸé”®ã€äº§å“é”®ã€åº—é“ºé”®ã€å®¢æˆ·é”®</li>
<li>é€€åŒ–ç»´åº¦ï¼šè®¢å•ç¼–å·ã€å‘ç¥¨ç¼–å·</li>
</ul>
<p>äº‹å®è¡¨çš„è®¾è®¡ç›´æ¥å½±å“æ•°æ®ä»“åº“çš„æ€§èƒ½å’Œåˆ†æèƒ½åŠ›ã€‚åˆç†é€‰æ‹©äº‹å®è¡¨çš„ç²’åº¦å’Œäº‹å®ç±»å‹ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®ä»“åº“æ—¢èƒ½æ»¡è¶³åˆ†æéœ€æ±‚ï¼Œåˆèƒ½ä¿æŒé«˜æ•ˆçš„æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<p>åœ¨æ•°æ®ä»“åº“æ¶æ„ä¸­ï¼Œäº‹å®è¡¨ï¼ˆFact Tableï¼‰æ˜¯å­˜å‚¨ä¸šåŠ¡è¿‡ç¨‹åº¦é‡å€¼æˆ–äº‹å®çš„æ ¸å¿ƒè¡¨ç»“æ„ã€‚å®ƒæ˜¯æ˜Ÿå‹æ¨¡å¼æˆ–é›ªèŠ±æ¨¡å¼ä¸­çš„ä¸­å¿ƒè¡¨ï¼Œä¸å¤šä¸ªç»´åº¦è¡¨ç›¸å…³è”ã€‚</p>
<p>äº‹å®è¡¨å…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>åŒ…å«ä¸šåŠ¡è¿‡ç¨‹çš„é‡åŒ–æŒ‡æ ‡ï¼ˆäº‹å®ï¼‰ï¼Œå¦‚é”€å”®é¢ã€è®¢å•æ•°é‡ã€åº“å­˜é‡ç­‰</li>
<li>é€šå¸¸åŒ…å«å¤–é”®ï¼ˆForeign Keyï¼‰ç”¨äºå…³è”ç»´åº¦è¡¨</li>
<li>æ•°æ®é‡é€šå¸¸éå¸¸åºå¤§ï¼Œå¯èƒ½åŒ…å«æ•°ç™¾ä¸‡ç”šè‡³æ•°åäº¿è¡Œè®°å½•</li>
<li>è®°å½•é€šå¸¸æ˜¯åªè¯»çš„ï¼Œåæ˜ å†å²ä¸šåŠ¡æ´»åŠ¨</li>
</ol>
<p>äº‹å®è¡¨ä¸­çš„äº‹å®å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>å¯åŠ æ€§äº‹å®ï¼šå¯ä»¥æŒ‰ç…§ä»»ä½•ç»´åº¦è¿›è¡Œæ±‡æ€»ï¼ˆå¦‚é”€å”®é¢ï¼‰</li>
<li>åŠå¯åŠ æ€§äº‹å®ï¼šåªèƒ½åœ¨éƒ¨åˆ†ç»´åº¦ä¸Šæ±‡æ€»ï¼ˆå¦‚è´¦æˆ·ä½™é¢ï¼‰</li>
<li>ä¸å¯åŠ æ€§äº‹å®ï¼šä¸èƒ½è¿›è¡Œæ±‡æ€»ï¼ˆå¦‚å•ä»·ã€ç™¾åˆ†æ¯”ï¼‰</li>
</ul>
<p>äº‹å®è¡¨çš„ç²’åº¦ï¼ˆGranularityï¼‰æ˜¯æŒ‡è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®æ‰€ä»£è¡¨çš„ä¸šåŠ¡å«ä¹‰ï¼Œå¸¸è§ç²’åº¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>äº¤æ˜“çº§åˆ«ï¼šæ¯æ¡è®°å½•ä»£è¡¨ä¸€ä¸ªäº¤æ˜“ï¼ˆå¦‚å•ä¸ªè®¢å•é¡¹ï¼‰</li>
<li>å¿«ç…§çº§åˆ«ï¼šå®šæœŸè®°å½•çŠ¶æ€ï¼ˆå¦‚æ¯æ—¥åº“å­˜å¿«ç…§ï¼‰</li>
<li>ç´¯ç§¯å¿«ç…§ï¼šè·Ÿè¸ªä¸šåŠ¡è¿‡ç¨‹å¤šä¸ªé˜¶æ®µï¼ˆå¦‚è®¢å•ä»åˆ›å»ºåˆ°äº¤ä»˜ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨é›¶å”®æ•°æ®ä»“åº“ä¸­ï¼Œé”€å”®äº‹å®è¡¨å¯èƒ½åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<ul>
<li>äº‹å®ï¼šé”€å”®é‡‘é¢ã€é”€å”®æ•°é‡ã€æŠ˜æ‰£é‡‘é¢</li>
<li>å¤–é”®ï¼šæ—¥æœŸé”®ã€äº§å“é”®ã€åº—é“ºé”®ã€å®¢æˆ·é”®</li>
<li>é€€åŒ–ç»´åº¦ï¼šè®¢å•ç¼–å·ã€å‘ç¥¨ç¼–å·</li>
</ul>
<p>äº‹å®è¡¨çš„è®¾è®¡ç›´æ¥å½±å“æ•°æ®ä»“åº“çš„æ€§èƒ½å’Œåˆ†æèƒ½åŠ›ã€‚åˆç†é€‰æ‹©äº‹å®è¡¨çš„ç²’åº¦å’Œäº‹å®ç±»å‹ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®ä»“åº“æ—¢èƒ½æ»¡è¶³åˆ†æéœ€æ±‚ï¼Œåˆèƒ½ä¿æŒé«˜æ•ˆçš„æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3">å¸¸è§äº‹å®è¡¨</h4>
<p>å¸¸è§çš„äº‹å®è¡¨ï¼šè®¢å•äº‹å®è¡¨
äº‹å®è¡¨çš„ç‰¹ç‚¹ï¼šè¡¨å¤šï¼ˆå„ç§å„æ ·çš„äº‹å®è¡¨ï¼‰ï¼Œæ•°æ®é‡å¤§
äº‹å®è¡¨æ ¹æ®æ•°æ®çš„ç²’åº¦å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>äº‹åŠ¡äº‹å®è¡¨</li>
<li>å‘¨æœŸå¿«ç…§äº‹å®è¡¨</li>
<li>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨</li>
</ul>
<h4 data-id="heading-4">å¸¸è§ç»´åº¦è¡¨</h4>
<p>ç»´åº¦è¡¨ï¼ˆç»´è¡¨ï¼‰å¯ä»¥çœ‹åšæ˜¯ç”¨æ¥åˆ†ææ•°æ®çš„è§’åº¦ï¼Œç»´åº¦è¡¨ä¸­åŒ…å«äº‹å®æ•°æ®è¡¨åœ¨ä¸­äº‹å®è®°å½•çš„ç‰¹æ€§ã€‚æœ‰äº›ç‰¹æ€§æä¾›æè¿°æ€§ä¿¡æ¯ï¼Œæœ‰äº›ç‰¹æ€§æŒ‡å®šå¦‚ä½•æ±‡æ€»äº‹å®æ•°æ®è¡¨æ•°æ®ï¼Œä»¥ä¾¿ä¸ºåˆ†æè€…æä¾›æœ‰ç”¨çš„ä¿¡æ¯ã€‚
å¸¸è§ç»´åº¦è¡¨ï¼š</p>
<ul>
<li>æ—¶é—´ç»´åº¦</li>
<li>åœ°åŸŸç»´åº¦</li>
<li>å•†å“ç»´åº¦</li>
</ul>
<h4 data-id="heading-5">ç®€å•å°ç»“</h4>
<ul>
<li>äº‹å®è¡¨æ˜¯å…³æ³¨çš„å†…å®¹ï¼ˆå¦‚ï¼šé”€å”®é¢ã€é”€å”®é‡ï¼‰</li>
<li>ç»´åº¦è¡¨æ˜¯è§‚å¯Ÿäº‹åŠ¡çš„è§’åº¦</li>
</ul>
<h3 data-id="heading-6">äº‹å®è¡¨åˆ†ç±»</h3>
<h4 data-id="heading-7">äº‹åŠ¡äº‹å®è¡¨</h4>
<p>äº‹åŠ¡äº‹å®è¡¨è®°å½•çš„äº‹åŠ¡å±‚é¢çš„äº‹å®ï¼Œä¿å­˜çš„æ˜¯æœ€åŸå­çš„æ•°æ®ï¼Œä¹Ÿç§°ä¸ºâ€œåŸå­äº‹å®è¡¨â€ã€‚äº‹åŠ¡äº‹å®è¡¨ä¸­çš„æ•°æ®åœ¨äº‹åŠ¡äº‹ä»¶å‘ç”Ÿåäº§ç”Ÿï¼Œæ•°æ®çš„ç²’åº¦é€šå¸¸æ˜¯æ¯ä¸ªäº‹åŠ¡ä¸€æ¡è®°å½•ã€‚
ä¸€æ—¦äº‹åŠ¡è¢«æäº¤ï¼Œäº‹å®è¡¨æ•°æ®è¢«æ’å…¥ï¼Œæ•°æ®å°±ä¸å†è¿›è¡Œæ›´æ”¹ï¼Œå…¶æ›´æ–°æ–¹å¼ä¸ºå¢é‡æ›´æ–°ã€‚
äº‹åŠ¡äº‹å®è¡¨çš„æ—¥æœŸç»´åº¦è®°å½•çš„æ˜¯äº‹åŠ¡å‘ç”Ÿçš„æ—¥æœŸï¼Œå®ƒè®°å½•çš„äº‹å®æ˜¯äº‹åŠ¡æ´»åŠ¨çš„å†…å®¹ã€‚å¦‚ï¼šè®¢å•è¡¨ã€‚é€šè¿‡äº‹åŠ¡äº‹å®è¡¨ï¼Œè¿˜å¯ä»¥å»ºç«‹èšé›†äº‹å®è¡¨ï¼Œä¸ºç”¨æˆ·æä¾›é«˜æ€§èƒ½çš„åˆ†æã€‚</p>
<h4 data-id="heading-8">å‘¨æœŸå¿«ç…§äº‹å®è¡¨</h4>
<p>å‘¨æœŸå¿«ç…§äº‹å®è¡¨ä»¥è§„å¾‹æ€§çš„ã€å¯é¢„è§çš„æ—¶é—´é—´éš”æ¥è®°å½•äº‹å®ï¼Œæ—¶é—´é—´éš”å¦‚æ¯å¤©ã€æ¯æœˆã€æ¯å¹´ç­‰ç­‰ã€‚å…¸å‹çš„ä¾‹å­å¦‚é”€å”®æ—¥å¿«ç…§è¡¨ã€åº“å­˜æ—¥å¿«ç…§è¡¨ç­‰ã€‚å®ƒç»Ÿè®¡çš„æ˜¯é—´éš”å‘¨æœŸå†…çš„åº¦é‡ç»Ÿè®¡ï¼Œå¦‚å†å²è‡³ä»Šã€è‡ªç„¶å¹´è‡³ä»Šã€å­£åº¦è‡³ä»Šç­‰ç­‰ã€‚</p>
<h4 data-id="heading-9">ç´¯ç§¯å¿«ç…§äº‹å®è¡¨</h4>
<p>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨å’Œå‘¨æœŸå¿«ç…§äº‹å®è¡¨è™½ç„¶éƒ½æ˜¯ç”¨äºå­˜å‚¨äº‹åŠ¡æ•°æ®çš„å¿«ç…§ä¿¡æ¯ï¼Œä½†åœ¨è®¾è®¡ç†å¿µå’Œåº”ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯å¯¹ä¸¤è€…æ›´è¯¦ç»†çš„å¯¹æ¯”è¯´æ˜ï¼š</p>
<ol>
<li>æ—¶é—´å‘¨æœŸç‰¹æ€§ï¼š</li>
</ol>
<ul>
<li>å‘¨æœŸå¿«ç…§äº‹å®è¡¨ï¼šè®°å½•å›ºå®šæ—¶é—´é—´éš”ï¼ˆå¦‚æ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆï¼‰çš„é™æ€å¿«ç…§æ•°æ®ã€‚ä¾‹å¦‚é“¶è¡Œè´¦æˆ·çš„æœˆæœ«ä½™é¢å¿«ç…§ã€‚</li>
<li>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨ï¼šè·Ÿè¸ªè·¨è¶Šä¸ç¡®å®šæ—¶é—´æ®µçš„å®Œæ•´ä¸šåŠ¡æµç¨‹ï¼Œé€šå¸¸åŒ…å«å¤šä¸ªé‡Œç¨‹ç¢‘æ—¥æœŸã€‚ä¾‹å¦‚è®¢å•å¤„ç†æµç¨‹ä¸­çš„å„ä¸ªå…³é”®èŠ‚ç‚¹æ—¶é—´ã€‚</li>
</ul>
<ol start="2">
<li>æ—¥æœŸå­—æ®µè®¾è®¡ï¼š</li>
</ol>
<ul>
<li>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨åŒ…å«å¤šä¸ªæ—¥æœŸç»´åº¦ï¼š
<ul>
<li>æµç¨‹èµ·å§‹æ—¥æœŸï¼ˆå¦‚è®¢å•åˆ›å»ºæ—¥æœŸï¼‰</li>
<li>ä¸­é—´è¿‡ç¨‹æ—¥æœŸï¼ˆå¦‚å®¡æ‰¹æ—¥æœŸã€å‘è´§æ—¥æœŸï¼‰</li>
<li>å®Œæˆæ—¥æœŸï¼ˆå¦‚æ”¶è´§æ—¥æœŸï¼‰</li>
<li>æœ€åæ›´æ–°æ—¥æœŸï¼ˆè®°å½•æ•°æ®è¡¥å……æ—¶é—´ï¼‰</li>
</ul>
</li>
<li>åœ¨åˆå§‹åŠ è½½æ—¶ï¼Œæœªæ¥æ—¥æœŸé€šå¸¸ä½¿ç”¨ç‰¹æ®Šä»£ç†é”®ï¼ˆå¦‚-1è¡¨ç¤º"æœªå‘ç”Ÿ"ï¼‰å ä½</li>
</ul>
<ol start="3">
<li>æ•°æ®æ›´æ–°æœºåˆ¶ï¼š</li>
</ol>
<ul>
<li>å‘¨æœŸå¿«ç…§äº‹å®è¡¨é€šå¸¸æ˜¯åªè¯»çš„ï¼Œåæ˜ ç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€</li>
<li>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨æ”¯æŒæ›´æ–°æ“ä½œï¼Œå½“ä¸šåŠ¡æµç¨‹æ¨è¿›æ—¶ï¼Œå¯ä»¥è¡¥å……åç»­æ—¥æœŸä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
åˆå§‹è®°å½•ï¼šè®¢å•åˆ›å»ºæ—¥æœŸ=2023-01-01ï¼Œå‘è´§æ—¥æœŸ=NULL
æ›´æ–°è®°å½•ï¼šå½“è´§ç‰©å‘å‡ºåï¼Œæ›´æ–°å‘è´§æ—¥æœŸ=2023-01-05</li>
</ul>
<ol start="4">
<li>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</li>
</ol>
<ul>
<li>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨é€‚ç”¨äºï¼š
<ul>
<li>è®¢å•å¤„ç†å…¨æµç¨‹è·Ÿè¸ªï¼ˆåˆ›å»ºâ†’ä»˜æ¬¾â†’å‘è´§â†’æ”¶è´§ï¼‰</li>
<li>ä¿é™©ç†èµ”æµç¨‹ï¼ˆæŠ¥æ¡ˆâ†’å®šæŸâ†’æ ¸èµ”â†’æ”¯ä»˜ï¼‰</li>
<li>å®¢æˆ·æœåŠ¡å·¥å•ï¼ˆåˆ›å»ºâ†’åˆ†é…â†’å¤„ç†â†’å…³é—­ï¼‰</li>
</ul>
</li>
</ul>
<ol start="5">
<li>ç¤ºä¾‹å­—æ®µè¯´æ˜ï¼š</li>
</ol>
<ul>
<li>è®¢å•å¤„ç†ç´¯ç§¯å¿«ç…§å¯èƒ½åŒ…å«ï¼š
<ul>
<li>æ—¶é—´ç»´åº¦ï¼šè®¢è´§æ—¥æœŸã€å®¡æ ¸é€šè¿‡æ—¥æœŸã€ç”Ÿäº§å®Œæˆæ—¥æœŸã€å‘è´§æ—¥æœŸã€æ”¶è´§æ—¥æœŸ</li>
<li>ä¸šåŠ¡åº¦é‡ï¼šè®¢å•æ•°é‡ã€å•†å“é‡‘é¢ã€æŠ˜æ‰£é‡‘é¢ã€è¿è´¹</li>
<li>çŠ¶æ€æ ‡è¯†ï¼šå½“å‰å¤„ç†é˜¶æ®µã€æ˜¯å¦è¶…æœŸæ ‡å¿—</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡æ–¹å¼ç‰¹åˆ«é€‚åˆéœ€è¦åˆ†æä¸šåŠ¡æµç¨‹æ—¶æ•ˆæ€§çš„åœºæ™¯ï¼Œä¾‹å¦‚è®¡ç®—"è®¢å•åˆ›å»ºåˆ°å‘è´§çš„å¹³å‡æ—¶é•¿"æˆ–"å„ç¯èŠ‚çš„æ—¶é—´é—´éš”åˆ†å¸ƒ"ç­‰åˆ†æéœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48db1aa62b364ad38982fe0ded9910eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=9174KxVjg9XTU8a0HxUaZzn3zuw%3D" alt="ç¦»çº¿æ•°ä»“ äº‹å®è¡¨ ç»´åº¦è¡¨" loading="lazy"/></p>
<h3 data-id="heading-10">é›ªèŠ±æ¨¡å‹</h3>
<p>é›ªèŠ±æ¨¡å‹æ˜¯æ˜Ÿå‹æ¨¡å‹çš„å˜ç§ï¼Œç»´è¡¨æ˜¯è§„èŒƒåŒ–çš„ï¼Œæ¨¡å‹ç±»ä¼¼é›ªèŠ±çš„å½¢çŠ¶ã€‚
ç‰¹ç‚¹ï¼šé›ªèŠ±ç»“æ„å»é™¤äº†æ•°æ®å†—ä½™ã€‚
æ˜Ÿå‹æ¨¡å‹å­˜åœ¨æ•°æ®å†—ä½™ï¼Œæ‰€ä»¥åœ¨æŸ¥è¯¢ç»Ÿè®¡æ—¶åªéœ€è¦åšå°‘é‡çš„è¡¨è¿æ¥ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ã€‚æ˜Ÿå‹æ¨¡å‹ä¸è€ƒè™‘ç»´è¡¨æ­£è§„åŒ–çš„å› ç´ ï¼Œè®¾è®¡ã€å®ç°å®¹æ˜“ã€‚
åœ¨æ•°æ®å†—ä½™å¯æ¥å—çš„æƒ…å†µä¸‹ï¼Œå®é™…ä¸Šä½¿ç”¨æ˜Ÿå‹æ¨¡å‹æ¯”è¾ƒå¤šã€‚</p>
<h4 data-id="heading-11">é›ªèŠ±æ¨¡å‹çš„ç»“æ„</h4>
<p>äº‹å®è¡¨ï¼š
é›ªèŠ±æ¨¡å‹çš„æ ¸å¿ƒéƒ¨åˆ†è¿˜æ˜¯äº‹å®è¡¨ï¼Œäº‹å®è¡¨é€šå¸¸å­˜å‚¨äº†ä¸šåŠ¡äº‹ä»¶çš„åº¦é‡æ•°æ®ï¼Œå¦‚é”€å”®é¢ã€è®¢å•æ•°é‡ç­‰ã€‚
äº‹å®è¡¨åŒ…å«æŒ‡å‘ç»´åº¦è¡¨çš„å¤–é”®ã€‚</p>
<p>ç»´åº¦è¡¨ï¼š
åœ¨é›ªèŠ±æ¨¡å‹ä¸­ï¼Œç»´åº¦è¡¨è¿›è¡Œè§„èŒƒåŒ–ï¼Œæ„å‘³ç€åŒä¸€ç»´åº¦ä¸­çš„ä¸åŒå±æ€§ä¼šæ‹†åˆ†æˆå¤šä¸ªå­è¡¨ã€‚
ä¾‹å¦‚ï¼Œâ€œå®¢æˆ·â€ç»´åº¦å¯èƒ½åŒ…å«å¤šä¸ªå±‚çº§çš„å±æ€§ï¼šå®¢æˆ·çš„åŸºæœ¬ä¿¡æ¯å¯èƒ½å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œè€Œå®¢æˆ·çš„åœ°å€ä¿¡æ¯å¯èƒ½å­˜å‚¨åœ¨å¦ä¸€ä¸ªå•ç‹¬çš„è¡¨ä¸­ã€‚è¿™ç§æ–¹å¼ä½¿å¾—ç»´åº¦è¡¨çš„æ•°æ®å†—ä½™å‡å°‘ï¼Œæé«˜äº†æ•°æ®ä¸€è‡´æ€§ã€‚
å­ç»´åº¦è¡¨ï¼š</p>
<p>é›ªèŠ±æ¨¡å‹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ç»´åº¦è¡¨çš„â€œåˆ†å±‚â€ç»“æ„ã€‚ä¾‹å¦‚ï¼Œåœ°ç†ç»´åº¦å¯èƒ½ä¼šè¢«æ‹†åˆ†æˆâ€œå›½å®¶â€ã€â€œçœ/å·â€ã€â€œåŸå¸‚â€ç­‰å¤šä¸ªå­ç»´åº¦è¡¨ï¼Œæ¯ä¸ªè¡¨ä¹‹é—´é€šè¿‡å¤–é”®å…³è”ã€‚</p>
<h4 data-id="heading-12">é›ªèŠ±æ¨¡å‹çš„ä¼˜ç¼ºç‚¹</h4>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ•°æ®å†—ä½™è¾ƒä½ï¼šç”±äºç»´åº¦è¡¨è¢«è§„èŒƒåŒ–ï¼Œé›ªèŠ±æ¨¡å‹å‡å°‘äº†æ•°æ®çš„å†—ä½™ã€‚æ¯ä¸ªå±æ€§åªä¼šåœ¨ç›¸å…³çš„è¡¨ä¸­å‡ºç°ä¸€æ¬¡ï¼Œè¿™å¯¹äºæ•°æ®æ›´æ–°ã€åˆ é™¤å’Œç»´æŠ¤æ—¶ï¼Œå¯ä»¥å‡å°‘å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</li>
<li>å­˜å‚¨ç©ºé—´èŠ‚çœï¼šç”±äºè§„èŒƒåŒ–ç»“æ„å‡å°‘äº†é‡å¤æ•°æ®ï¼Œé›ªèŠ±æ¨¡å‹ç›¸å¯¹äºæ˜Ÿå‹æ¨¡å‹æ¥è¯´åœ¨å­˜å‚¨ä¸Šå¯ä»¥èŠ‚çœç©ºé—´ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚</li>
<li>æ•°æ®ä¸€è‡´æ€§è¾ƒå¥½ï¼šç”±äºæ¯ä¸ªå±æ€§åªå­˜åœ¨äºæŸä¸ªç‰¹å®šçš„ç»´åº¦è¡¨ä¸­ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ç›¸å¯¹æ›´å®¹æ˜“ä¿æŒã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e5a5602e36748bb90ca217e8713dab9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=NyQCIbdUVbiQAhV1rWnnZ9tdR60%3D" alt="ç¦»çº¿æ•°ä»“äº‹å®è¡¨æ±‡æ€»" loading="lazy"/></p>
<h3 data-id="heading-13">äº‹å®æ˜Ÿåº§</h3>
<p>æ•°æ®ä»“åº“ç”±å¤šä¸ªä¸»é¢˜æ„æˆï¼ŒåŒ…å«å¤šä¸ªäº‹å®è¡¨ï¼Œè€Œç»´è¡¨æ˜¯å…¬å…±çš„ï¼Œå¯ä»¥å…±äº«ï¼Œè¿™ç§æ¨¡å¼å¯ä»¥çœ‹åšæ˜Ÿå‹æ¨¡å¼çš„æ±‡é›†ã€‚å› è€Œç§°ä½œæ˜Ÿç³»æ¨¡å¼æˆ–è€…äº‹å®æ˜Ÿåº§æ¨¡å¼ã€‚
ç‰¹ç‚¹ï¼šå…¬ç”¨ç»´è¡¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0403e4b21ff7449b896c4cba873cb3db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=KXi7SWWyi1aEfBnk%2BL7n7fplN04%3D" alt="ç¦»çº¿æ•°ä»“äº‹å®æ˜Ÿåº§" loading="lazy"/></p>
<h2 data-id="heading-14">å…ƒæ•°æ®</h2>
<p>å…ƒæ•°æ®ï¼ˆMetadataï¼‰æ˜¯å…³äºæ•°æ®çš„æ•°æ®ï¼Œå…ƒæ•°æ®æ‰“é€šäº†æºæ•°æ®ã€æ•°æ®ä»“åº“ã€æ•°æ®åº”ç”¨ï¼Œè®°å½•äº†æ•°æ®ä»äº§ç”Ÿåˆ°æ¶ˆè´¹çš„å…¨è¿‡ç¨‹ã€‚å…ƒæ•°æ®å°±ç›¸å½“äºæ‰€æœ‰æ•°æ®çš„åœ°å›¾ï¼Œæœ‰äº†è¿™å¼ åœ°å›¾å°±èƒ½çŸ¥é“æ•°æ®ä»“åº“ä¸­ï¼š</p>
<ul>
<li>æœ‰å“ªäº›æ•°æ®</li>
<li>æ•°æ®åˆ†å¸ƒçš„æƒ…å†µ</li>
<li>æ•°æ®ç±»å‹</li>
<li>æ•°æ®ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»</li>
<li>å“ªäº›æ•°æ®ç»å¸¸è¢«ä½¿ç”¨ï¼Œå“ªäº›æ•°æ®å¾ˆå°‘æœ‰äººå…‰é¡¾</li>
</ul>
<p>åœ¨å¤§æ•°æ®å¹³å°ä¸­ï¼Œå…ƒæ•°æ®è´¯ç©¿å¤§æ•°æ®å¹³å°æ•°æ®æµåŠ¨çš„å…¨è¿‡ç¨‹ï¼Œä¸»è¦åŒ…æ‹¬æ•°æ®æºå…ƒæ•°æ®ã€æ•°æ®åŠ å·¥å¤„ç†è¿‡ç¨‹å…ƒæ•°æ®ã€æ•°æ®ä¸»é¢˜ä¸“é¢˜åº“å…ƒæ•°æ®ã€æœåŠ¡å±‚å…ƒæ•°æ®ã€åº”ç”¨å±‚å…ƒæ•°æ®ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52409920a3194c00806da1bf3b1a2e9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770028752&amp;x-signature=jItHhJ9sL1hIi2jxHE6dCjNWq1U%3D" alt="ç¦»çº¿æ•°ä»“å…ƒæ•°æ®ç®¡ç†" loading="lazy"/>
ä¸šåŠ¡é€šå¸¸æŠŠå…ƒæ•°æ®åˆ†ä¸ºä»¥ä¸‹ç±»å‹ï¼š</p>
<ul>
<li>æŠ€æœ¯å…ƒæ•°æ®ï¼šåº“è¡¨ç»“æ„ã€æ•°æ®æ¨¡å‹ã€ETLç¨‹åºã€SQLç¨‹åºç­‰</li>
<li>ä¸šåŠ¡å…ƒæ•°æ®ï¼šä¸šåŠ¡æŒ‡æ ‡ã€ä¸šåŠ¡ä»£ç ã€ä¸šåŠ¡æœ¯è¯­ç­‰</li>
<li>ç®¡ç†å…ƒæ•°æ®ï¼šæ•°æ®æ‰€æœ‰è€…ã€æ•°æ®è´¨é‡ã€æ•°æ®å®‰å…¨ç­‰</li>
</ul>
<h2 data-id="heading-15">é”™è¯¯é€ŸæŸ¥</h2>



























































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½ä¿®å¤æŒ‡æ ‡</th><th>æ±‡æ€»ç»“æœ</th></tr></thead><tbody><tr><td>å¿½å¤§å¿½å°ã€åŒä¸€æŠ¥è¡¨å£å¾„ä¸ä¸€è‡´</td><td>äº‹å®è¡¨ç²’åº¦æœªå›ºå®šï¼›æŠŠä¸åŒç²’åº¦æ•°æ®æ··è¿›åŒä¸€äº‹å®è¡¨æˆ–åŒä¸€æŒ‡æ ‡å£å¾„</td><td>é€æ¡ç¡®è®¤â€œäº‹å®è¡¨ä¸€è¡Œä»£è¡¨ä»€ä¹ˆä¸šåŠ¡äº‹ä»¶â€ï¼›æ£€æŸ¥ join å‰åçš„è¡Œæ•°è†¨èƒ€</td><td>å…ˆé”å®šç²’åº¦ï¼ˆäº¤æ˜“/å¿«ç…§/ç´¯ç§¯ï¼‰ï¼›å¿…è¦æ—¶æ‹†è¡¨ï¼šåŸå­äº‹å®è¡¨ + èšé›†äº‹å®è¡¨</td></tr><tr><td>SUM åæ•°æ®è¢«é‡å¤è®¡ç®—</td><td>ç»´åº¦è¡¨ä¸€å¯¹å¤šå¯¼è‡´äº‹å®è¡Œè¢«æ”¾å¤§ï¼›ç»´è¡¨ä¸»é”®ä¸å”¯ä¸€</td><td>å¯¹ç»´è¡¨åšå”¯ä¸€æ€§æ£€æŸ¥ï¼›å¯¹ join ç»“æœåš count(distinct äº‹å®ä¸»é”®)</td><td>ç»´è¡¨è¡¥é½ä¸»é”®/å»é‡ï¼›ç”¨æ¡¥è¡¨æˆ– SCD è®¾è®¡ï¼›åœ¨è¯­ä¹‰å±‚é™åˆ¶ join è·¯å¾„</td></tr><tr><td>åŠå¯åŠ æŒ‡æ ‡ï¼ˆä½™é¢/åº“å­˜ï¼‰æŒ‰æ—¶é—´ç›´æ¥ SUM é”™è¯¯</td><td>æŠŠåŠå¯åŠ äº‹å®å½“å¯åŠ äº‹å®å¤„ç†</td><td>æ£€æŸ¥æŒ‡æ ‡ç±»å‹ä¸èšåˆç»´åº¦ï¼›çœ‹æ˜¯å¦è·¨æ—¶é—´ç›´æ¥ sum</td><td>ç”¨â€œæœŸæœ«/æœŸåˆ/å¿«ç…§ç‚¹â€å£å¾„ï¼›æ”¹ä¸º max/last_value æˆ–æŒ‰å¿«ç…§å‘¨æœŸæ±‡æ€»</td></tr><tr><td>å•ä»·/æŠ˜æ‰£ç‡ç­‰ä¸å¯åŠ æŒ‡æ ‡è¢« SUM/AVG åå¤±çœŸ</td><td>æŒ‡æ ‡æœ¬è´¨ä¸å¯åŠ ï¼›å¹³å‡æœªåŠ æƒ</td><td>æ‰¾åˆ°æŒ‡æ ‡çš„ä¸šåŠ¡å®šä¹‰ä¸åˆ†æ¯ï¼›æ£€æŸ¥æ˜¯å¦éœ€è¦åŠ æƒ</td><td>æ”¹ä¸ºåŠ æƒå¹³å‡ï¼ˆsum(åˆ†å­)/sum(åˆ†æ¯)ï¼‰ï¼›æˆ–æ”¹æˆå¯åŠ åˆ†å­ä¸åˆ†æ¯åˆ†åˆ«å…¥äº‹å®è¡¨</td></tr><tr><td>ç´¯ç§¯å¿«ç…§äº‹å®è¡¨é‡Œç¨‹ç¢‘æ—¥æœŸç¼ºå¤±/ä¹±åº</td><td>ä¸šåŠ¡æµç¨‹æœªé—­ç¯ï¼›æ›´æ–°æœºåˆ¶ä¸æ¸…ï¼›â€œæœªå‘ç”Ÿâ€å ä½ä¸ä¸€è‡´</td><td>æ£€æŸ¥æ¯ä¸ªé‡Œç¨‹ç¢‘å­—æ®µçš„å–æ•°é€»è¾‘ä¸æ›´æ–°è§¦å‘ï¼›æ ¸å¯¹ä»£ç†é”®ï¼ˆ-1 ç­‰ï¼‰</td><td>ç»Ÿä¸€å ä½è§„åˆ™ï¼›æŒ‰é˜¶æ®µå¢é‡æ›´æ–°ï¼›ä¸ºæ¯ä¸ªé‡Œç¨‹ç¢‘å®šä¹‰æ¥æºä¸å¯å›å¡«ç­–ç•¥</td></tr><tr><td>é›ªèŠ±æ¨¡å‹æŸ¥è¯¢æ…¢ã€SQL å¤æ‚ä¸”å®¹æ˜“å†™é”™</td><td>è¿‡åº¦è§„èŒƒåŒ–å¯¼è‡´ join é“¾è¿‡é•¿</td><td>ç»Ÿè®¡å…¸å‹æŸ¥è¯¢ join æ•°ï¼›è§‚å¯Ÿæ‰§è¡Œè®¡åˆ’ä¸ shuffle</td><td>ä»¥æ˜Ÿå‹ä¸ºä¸»ï¼šé€‚åº¦åè§„èŒƒåŒ–ï¼›ä¸ºé«˜é¢‘åˆ†æåšå®½è¡¨/ç»´è¡¨å†—ä½™æˆ–ç‰©åŒ–è§†å›¾</td></tr><tr><td>äº‹å®æ˜Ÿåº§ä¸­è·¨ä¸»é¢˜åˆ†æç»“æœå¯¹ä¸ä¸Š</td><td>å…¬å…±ç»´åº¦æœªç»Ÿä¸€ï¼ˆç¼–ç /å±‚çº§/ä¸»é”®ä½“ç³»ä¸ä¸€è‡´ï¼‰</td><td>æ£€æŸ¥å…±äº«ç»´è¡¨çš„ä¸»é”®ã€å±‚çº§ä¸ä¸šåŠ¡å£å¾„ï¼›çœ‹æ˜¯å¦å­˜åœ¨å¤šå¥—ç»´è¡¨</td><td>ç»Ÿä¸€å…¬å…±ç»´ï¼ˆå¦‚æ—¶é—´/åœ°åŸŸ/å•†å“ï¼‰ï¼›åšä¸€è‡´æ€§ç»´åº¦å»ºæ¨¡ä¸ç¼–ç æ²»ç†</td></tr><tr><td>å…ƒæ•°æ®â€œæœ‰è¡¨æ— å£å¾„/æœ‰å£å¾„æ— è¡€ç¼˜â€ï¼Œæ²»ç†è½ç©º</td><td>åªæ”¶æŠ€æœ¯å…ƒæ•°æ®ï¼Œç¼ºä¸šåŠ¡å£å¾„ä¸è´£ä»»äººï¼›è¡€ç¼˜æœªè‡ªåŠ¨åŒ–</td><td>æŠ½æŸ¥æŒ‡æ ‡ï¼šå®šä¹‰ã€è´Ÿè´£äººã€æ¥æºé“¾è·¯ã€ä¸‹æ¸¸ä½¿ç”¨</td><td>åŒæ­¥è¡¥é½ä¸šåŠ¡å…ƒæ•°æ®ä¸ç®¡ç†å…ƒæ•°æ®ï¼›æ¥å…¥è¡€ç¼˜é‡‡é›†ï¼ˆETL/SQL/è°ƒåº¦ï¼‰å¹¶åšè´¨é‡ä¸æƒé™é—­ç¯</td></tr></tbody></table>
<h2 data-id="heading-16">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-17">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-18">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-19">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸­æ–‡ç¦»çº¿CPUç¯å¢ƒä¸‹ASRæ¨¡å‹æŠ€æœ¯é€‰å‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7599474528238452776</link>    <guid>https://juejin.cn/post/7599474528238452776</guid>    <pubDate>2026-01-26T08:47:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599474528238452776" data-draft-id="7599474528238239784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸­æ–‡ç¦»çº¿CPUç¯å¢ƒä¸‹ASRæ¨¡å‹æŠ€æœ¯é€‰å‹æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-01-26T08:47:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é©¬å†œå¯å¤«"/> <meta itemprop="url" content="https://juejin.cn/user/2541726616262061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸­æ–‡ç¦»çº¿CPUç¯å¢ƒä¸‹ASRæ¨¡å‹æŠ€æœ¯é€‰å‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726616262061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é©¬å†œå¯å¤«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T08:47:02.000Z" title="Mon Jan 26 2026 08:47:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸­æ–‡ç¦»çº¿CPUç¯å¢ƒä¸‹ASRæ¨¡å‹æŠ€æœ¯é€‰å‹æŒ‡å—</h2>
<p>åœ¨è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰è½åœ°åœºæ™¯ä¸­ï¼Œä¸­æ–‡é€‚é…æ€§ã€ç¦»çº¿éƒ¨ç½²èƒ½åŠ›åŠCPUç¯å¢ƒå…¼å®¹æ€§æ˜¯æ ¸å¿ƒè¯‰æ±‚ï¼Œå°¤å…¶å¯¹äºæ”¿åŠ¡ã€å®¢æœã€åµŒå…¥å¼ç»ˆç«¯ç­‰æ— GPUæ”¯æŒã€éœ€æœ¬åœ°é—­ç¯è¿è¡Œçš„åœºæ™¯ï¼Œé€‰å‹ç›´æ¥å†³å®šé¡¹ç›®è½åœ°æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡åŸºäºPaddleSpeechã€FunASRã€Whisper V3ç­‰9æ¬¾ä¸»æµå¼€æºASRæ¨¡å‹ï¼Œç»“åˆç¦»çº¿CPUéƒ¨ç½²éœ€æ±‚ï¼Œä»é€‚é…æ€§ã€æ•ˆæœã€éƒ¨ç½²éš¾åº¦ç­‰ç»´åº¦å±•å¼€åˆ†æï¼Œæä¾›ç²¾å‡†é€‰å‹æ–¹æ¡ˆä¸è½åœ°å»ºè®®ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é€‰å‹æ ¸å¿ƒè¯„ä¼°ç»´åº¦</h3>
<p>é’ˆå¯¹ä¸­æ–‡ç¦»çº¿CPUåœºæ™¯ï¼Œéœ€èšç„¦å››å¤§æ ¸å¿ƒç»´åº¦ï¼Œé¿å…å› èµ„æºä¸åŒ¹é…å¯¼è‡´æ¨ç†å¡é¡¿ã€ç²¾åº¦ä¸è¶³ç­‰é—®é¢˜ï¼š</p>
<ol>
<li><strong>CPUé€‚é…æ€§</strong>ï¼šæ ¸å¿ƒå…³æ³¨æ¨¡å‹é‡åŒ–èƒ½åŠ›ï¼ˆint8/int4ï¼‰ã€å†…å­˜å ç”¨ã€æ¨ç†é€Ÿåº¦ï¼Œä¼˜å…ˆé€‰æ‹©å¯¹CPUçº¿ç¨‹ä¼˜åŒ–ã€æ”¯æŒè½»é‡æ¨ç†æ¡†æ¶çš„æ¨¡å‹ï¼›</li>
<li><strong>ä¸­æ–‡æ•ˆæœ</strong>ï¼šåŒ…æ‹¬æ™®é€šè¯è¯†åˆ«å‡†ç¡®ç‡ã€é€†æ–‡æœ¬æ­£åˆ™åŒ–ï¼ˆæ•°å­—ã€æ—¥æœŸã€ä¸“æœ‰åè¯è½¬æ¢ï¼‰ã€æ–¹è¨€é€‚é…æ€§ï¼ˆå¯é€‰ï¼‰ï¼Œéœ€è´´åˆä¸­æ–‡å£è¯­åœºæ™¯ç‰¹ç‚¹ï¼›</li>
<li><strong>éƒ¨ç½²éš¾åº¦</strong>ï¼šä¾èµ–åº“å¤æ‚åº¦ã€æ˜¯å¦æä¾›é¢„ç¼–è¯‘åŒ…/APIã€è·¨å¹³å°æ”¯æŒï¼ˆWindows/Linuxï¼‰ï¼Œé™ä½é¡¹ç›®é›†æˆæˆæœ¬ï¼›</li>
<li><strong>åŠŸèƒ½é€‚é…</strong>ï¼šæ˜¯å¦æ”¯æŒæµå¼è¯†åˆ«ï¼ˆå®æ—¶å¯¹è¯ï¼‰ã€æ‰¹é‡è½¬å†™ã€VADï¼ˆè¯­éŸ³æ´»æ€§æ£€æµ‹ï¼‰ä¸€ä½“åŒ–ï¼ŒåŒ¹é…å…·ä½“ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99d0fbce84764a18a675b8e28b798222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ams5Yac5Y-v5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022021&amp;x-signature=j%2BWExdhW7PJ9MwsLCmQq3P%2FdKr8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€ä¸»æµæ¨¡å‹åˆ†é¡¹è¯„ä¼°ä¸é€‚é…åœºæ™¯</h3>
<p>ç»“åˆä¸Šè¿°ç»´åº¦ï¼Œå¯¹9æ¬¾æ¨¡å‹è¿›è¡Œåˆ†çº§è¯„ä¼°ï¼ŒæŒ‰â€œä¼˜å…ˆæ¨è-å¯å¤‡é€‰-ä¸æ¨èâ€åˆ†ç±»ï¼Œæ˜ç¡®å„æ¨¡å‹çš„é€‚ç”¨è¾¹ç•Œã€‚</p>
<h4 data-id="heading-3">ï¼ˆä¸€ï¼‰ä¼˜å…ˆæ¨èæ¨¡å‹ï¼ˆCPUç¦»çº¿åœºæ™¯æœ€ä½³é€‚é…ï¼‰</h4>
<p>æ­¤ç±»æ¨¡å‹åœ¨ä¸­æ–‡æ•ˆæœã€CPUæ¨ç†æ•ˆç‡ã€éƒ¨ç½²ä¾¿æ·æ€§ä¸Šè¾¾åˆ°å¹³è¡¡ï¼Œå¯ç›´æ¥è½åœ°å·¥ä¸šçº§åœºæ™¯ã€‚</p>
<h5 data-id="heading-4">1. FunASRï¼ˆé˜¿é‡Œè¾¾æ‘©é™¢ï¼‰</h5>
<p>ä½œä¸ºé˜¿é‡Œè¾¾æ‘©é™¢é¢å‘ä¸­æ–‡åœºæ™¯ä¼˜åŒ–çš„å¼€æºASRå·¥å…·åŒ…ï¼ŒFunASRæ˜¯CPUç¦»çº¿éƒ¨ç½²çš„é¦–é€‰æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿çš„åœ¨äºä¸­æ–‡é€‚é…æ·±åº¦ä¸è½»é‡é‡åŒ–èƒ½åŠ›ï¼šæä¾›ä¸“ä¸ºCPUä¼˜åŒ–çš„Nanoæ¨¡å‹ï¼Œint8é‡åŒ–åä½“ç§¯ä»…100MBå·¦å³ï¼Œå†…å­˜å ç”¨ä½è‡³500MBä»¥ä¸‹ï¼Œå•CPUï¼ˆ4çº¿ç¨‹ï¼‰æ¨ç†é€Ÿåº¦å¯è¾¾å®æ—¶1.5å€ä»¥ä¸Šï¼Œæ»¡è¶³æ‰¹é‡è½¬å†™ä¸æµå¼è¯†åˆ«åŒé‡éœ€æ±‚ã€‚</p>
<p>éƒ¨ç½²å±‚é¢ï¼ŒFunASRåŸºäºonnxruntimeå®ç°çº¯CPUç¦»çº¿è¿è¡Œï¼Œæ— éœ€å¤æ‚ä¾èµ–ï¼Œæ”¯æŒPython/C++åŒæ¥å£ï¼ŒWindowsä¸Linuxç³»ç»Ÿå‡èƒ½å¿«é€Ÿé›†æˆï¼ŒåŒæ—¶æä¾›ä¸°å¯Œçš„é¢„è®­ç»ƒæ¨¡å‹ï¼ˆè¦†ç›–é€šç”¨åœºæ™¯ã€æ”¿åŠ¡ã€å®¢æœç­‰å‚ç›´é¢†åŸŸï¼‰ï¼Œå¯ç›´æ¥è°ƒç”¨æ— éœ€é¢å¤–å¾®è°ƒã€‚é€‚åˆæ”¿åŠ¡è¯­éŸ³è½¬å†™ã€å®¢æœè´¨æ£€ã€æœ¬åœ°æ¡Œé¢åº”ç”¨ç­‰å¯¹ç²¾åº¦ä¸æ•ˆç‡å‡æœ‰è¦æ±‚çš„åœºæ™¯ã€‚</p>
<h5 data-id="heading-5">2. WeNetï¼ˆç™¾åº¦&amp;æ¸…åå¤§å­¦ï¼‰</h5>
<p>WeNetæ˜¯å·¥ä¸šçº§ç«¯åˆ°ç«¯ASRå·¥å…·åŒ…ï¼Œä»¥ä½å»¶è¿Ÿæµå¼è¯†åˆ«ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œå®Œç¾é€‚é…CPUç¦»çº¿å®æ—¶åœºæ™¯ã€‚å…¶ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹åŸºäºå¤§è§„æ¨¡ä¸­æ–‡è¯­æ–™è®­ç»ƒï¼Œæ™®é€šè¯è¯†åˆ«å‡†ç¡®ç‡ä¼˜å¼‚ï¼Œæ”¯æŒint8é‡åŒ–ä¼˜åŒ–ï¼ŒCPUæ¨ç†å»¶è¿Ÿå¯æ§åˆ¶åœ¨100msä»¥å†…ï¼Œä¸”å†…å­˜å ç”¨ç¨³å®šï¼Œä¸ä¼šå› é•¿éŸ³é¢‘æ¨ç†å‡ºç°å†…å­˜æº¢å‡ºé—®é¢˜ã€‚</p>
<p>éƒ¨ç½²ä¸Šï¼ŒWeNetæä¾›è½»é‡C++æ¨ç†åº“ä¸Python SDKï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ä¸è¾¹ç¼˜è®¾å¤‡é›†æˆï¼Œå¯çµæ´»é…ç½®çº¿ç¨‹æ•°ä¸é‡åŒ–ç­–ç•¥ï¼Œé€‚é…ä¸åŒCPUèµ„æºåœºæ™¯ã€‚ç›¸è¾ƒäºFunASRï¼ŒWeNetåœ¨å®æ—¶å¯¹è¯è½¬å†™åœºæ™¯æ›´å…·ä¼˜åŠ¿ï¼Œé€‚åˆæ”¿åŠ¡å®æ—¶äº¤äº’ç»ˆç«¯ã€æ™ºèƒ½å®¢æœè¯æœ¯å®æ—¶è®°å½•ç­‰åœºæ™¯ã€‚</p>
<h5 data-id="heading-6">3. SenseVoiceï¼ˆé˜¿é‡Œè¾¾æ‘©é™¢ï¼ŒåŸºäºsherpa-onnxï¼‰</h5>
<p>SenseVoiceä»¥â€œè½»é‡åŒ–ä¸€ä½“åŒ–â€ä¸ºæ ¸å¿ƒäº®ç‚¹ï¼Œint8é‡åŒ–åæ¨¡å‹ä½“ç§¯229MBï¼Œå†…ç½®VAD+ASR+æ ‡ç‚¹é¢„æµ‹å…¨é“¾è·¯èƒ½åŠ›ï¼Œæ— éœ€é¢å¤–é›†æˆç¬¬ä¸‰æ–¹VADå·¥å…·ï¼Œæå¤§ç®€åŒ–ç¦»çº¿éƒ¨ç½²æµç¨‹ã€‚å…¶é€†æ–‡æœ¬æ­£åˆ™åŒ–èƒ½åŠ›çªå‡ºï¼Œå¯ç²¾å‡†è½¬æ¢æ•°å­—ã€æ—¥æœŸã€é‡‘é¢ç­‰ä¸­æ–‡ç‰¹æ®Šè¡¨è¿°ï¼Œè´´åˆå®é™…ä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
<p>è¯¥æ¨¡å‹åŸºäºonnxæ ¼å¼åˆ†å‘ï¼Œæ”¯æŒçº¯CPUç¦»çº¿è¿è¡Œï¼Œé€‚é…Windowsã€macOSã€Linuxå¤šç³»ç»Ÿï¼Œç”šè‡³å¯éƒ¨ç½²è‡³åµŒå…¥å¼è®¾å¤‡ï¼ˆå¦‚ARMæ¶æ„CPUï¼‰ã€‚æ¨ç†é€Ÿåº¦åœ¨å•CPUç¯å¢ƒä¸‹å¯æ»¡è¶³å®æ—¶éœ€æ±‚ï¼Œé€‚åˆè½»é‡åŒ–ç¦»çº¿è½¬å†™ã€ç§»åŠ¨æ”¿åŠ¡ç»ˆç«¯ã€åµŒå…¥å¼è¯­éŸ³è®¾å¤‡ç­‰èµ„æºå—é™ä½†éœ€å…¨é“¾è·¯èƒ½åŠ›çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-7">ï¼ˆäºŒï¼‰å¯å¤‡é€‰æ¨¡å‹ï¼ˆéœ€æƒè¡¡èµ„æºä¸æ•ˆæœï¼‰</h4>
<p>æ­¤ç±»æ¨¡å‹å­˜åœ¨éƒ¨åˆ†çŸ­æ¿ï¼Œéœ€æ ¹æ®å…·ä½“åœºæ™¯å–èˆï¼Œä»…åœ¨ç‰¹å®šéœ€æ±‚ä¸‹è€ƒè™‘é€‰ç”¨ã€‚</p>
<h5 data-id="heading-8">1. PaddleSpeechï¼ˆç™¾åº¦ï¼‰</h5>
<p>PaddleSpeechä¸­æ–‡è¯†åˆ«å‡†ç¡®ç‡æä½³ï¼Œä¸”æ”¯æŒASR+TTS+è¯­éŸ³åˆæˆä¸€ä½“åŒ–èƒ½åŠ›ï¼Œè‹¥é¡¹ç›®éœ€å¤šè¯­éŸ³åŠŸèƒ½è”åŠ¨ï¼Œå¯ä½œä¸ºå¤‡é€‰ã€‚ä½†å…¶ä¾èµ–PaddlePaddleæ¡†æ¶ï¼ŒCPUç¯å¢ƒä¸‹éƒ¨ç½²ä¾èµ–é¡¹ç•¥å¤šï¼Œæ¨¡å‹é‡åŒ–åçš„ä½“ç§¯ä¸æ¨ç†é€Ÿåº¦ç•¥é€ŠäºFunASRï¼Œå•CPUæ¨ç†å®æ—¶æ€§ä¸€èˆ¬ï¼Œé€‚åˆç»“åˆé£æ¡¨ç”Ÿæ€ã€å¯¹å¤šè¯­éŸ³èƒ½åŠ›æœ‰éœ€æ±‚çš„æ”¿åŠ¡æˆ–ä¼ä¸šçº§é¡¹ç›®ã€‚</p>
<h5 data-id="heading-9">2. Faster-whisper</h5>
<p>ä½œä¸ºWhisper V3çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼ŒFaster-whisperé€šè¿‡é‡åŒ–ä¸æ¨ç†å¼•æ“ä¼˜åŒ–ï¼Œæå‡äº†CPUé€‚é…æ€§ï¼Œæ”¯æŒint8é‡åŒ–åæ¨¡å‹ä½“ç§¯ç¼©å°è‡³åŸç‰ˆæœ¬çš„1/4ã€‚å…¶ä¼˜åŠ¿åœ¨äºå¤šè¯­ç§æ”¯æŒä¸ä¸­è‹±æ··è¯»èƒ½åŠ›ï¼Œè‹¥åœºæ™¯æ¶‰åŠå°‘é‡è‹±æ–‡å†…å®¹ï¼Œå¯ä½œä¸ºå¤‡é€‰ã€‚ä½†CPUç¯å¢ƒä¸‹æ¨ç†é€Ÿåº¦ä»è¾ƒæ…¢ï¼Œä»…é€‚åˆçŸ­éŸ³é¢‘è½¬å†™ï¼Œé•¿éŸ³é¢‘æ‰¹é‡å¤„ç†æ•ˆç‡ä¸è¶³ï¼Œä¸”ä¸­æ–‡ä¸“æœ‰åè¯è¯†åˆ«å‡†ç¡®ç‡ç•¥ä½äºFunASRã€WeNetã€‚</p>
<h5 data-id="heading-10">3. Voskï¼ˆAlpha Cepheiï¼‰</h5>
<p>Voskæ˜¯æè‡´è½»é‡åŒ–çš„ç¦»çº¿ASRå·¥å…·ï¼Œä¸­æ–‡å°æ¨¡å‹ä½“ç§¯ä»…40MBï¼Œå†…å­˜å ç”¨ä½äº500MBï¼Œæ”¯æŒæ ‘è“æ´¾ç­‰ä½é…ç½®CPUè®¾å¤‡ï¼Œå¼€ç®±å³ç”¨æ— éœ€å¤æ‚é…ç½®ï¼Œéƒ¨ç½²éš¾åº¦æä½ã€‚ä½†å…¶ä¸­æ–‡è¯†åˆ«å‡†ç¡®ç‡ä¸€èˆ¬ï¼Œä»…èƒ½æ»¡è¶³æ—¥å¸¸ç®€å•è¯­éŸ³è½¬å†™éœ€æ±‚ï¼Œä¸é€‚åˆå¯¹ç²¾åº¦è¦æ±‚è¾ƒé«˜çš„æ”¿åŠ¡ã€å®¢æœåœºæ™¯ï¼Œä»…æ¨èç”¨äºèµ„æºæåº¦å—é™çš„è½»é‡åµŒå…¥å¼è®¾å¤‡ã€‚</p>
<h5 data-id="heading-11">4. DeepSpeechï¼ˆMozillaï¼‰</h5>
<p>DeepSpeechåŸºäºCTCæ¶æ„ï¼Œæ¨¡å‹è½»é‡åŒ–ä¸”æ–‡æ¡£å®Œå–„ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨å­¦ä¹ æˆ–å°å‹ç¦»çº¿é¡¹ç›®ã€‚å…¶CPUé€‚é…æ€§è‰¯å¥½ï¼Œæ”¯æŒå¤šç³»ç»Ÿéƒ¨ç½²ï¼Œä½†ä¸­æ–‡é¢„è®­ç»ƒè¯­æ–™ä¸è¶³ï¼Œè¯†åˆ«å‡†ç¡®ç‡ä¸é€†æ–‡æœ¬æ­£åˆ™åŒ–èƒ½åŠ›è¾ƒå¼±ï¼Œæ¨ç†é€Ÿåº¦ä¸­ç­‰ï¼Œä»…æ¨èç”¨äºå­¦ä¹ ç ”ç©¶ã€åŸå‹éªŒè¯ç­‰éå·¥ä¸šçº§åœºæ™¯ã€‚</p>
<h4 data-id="heading-12">ï¼ˆä¸‰ï¼‰ä¸æ¨èæ¨¡å‹ï¼ˆCPUç¯å¢ƒé€‚é…æ€§æå·®ï¼‰</h4>
<p>æ­¤ç±»æ¨¡å‹å› ä½“ç§¯è¿‡å¤§ã€ä¾èµ–GPUåŠ é€Ÿï¼Œåœ¨çº¯CPUç¯å¢ƒä¸‹æ— æ³•æ­£å¸¸è½åœ°ï¼Œç›´æ¥æ’é™¤ã€‚</p>
<ul>
<li><strong>GLM-ASR-Nano-2512</strong>ï¼šæ¨¡å‹ä½“ç§¯çº¦4.5GBï¼Œçº¯CPUç¯å¢ƒä¸‹æ¨ç†ææ…¢ï¼ˆå•å¥10ç§’éŸ³é¢‘éœ€æ•°ç§’æ¨ç†æ—¶é—´ï¼‰ï¼Œä¸”å†…å­˜å ç”¨æé«˜ï¼Œæ˜“å‡ºç°å¡é¡¿ä¸å†…å­˜æº¢å‡ºï¼Œä»…é€‚åˆGPUç¯å¢ƒä½¿ç”¨ã€‚</li>
<li><strong>Whisper V3</strong>ï¼šåŸç”Ÿæ¨¡å‹ä½“ç§¯å¤§ï¼ŒCPUæ¨ç†è€—æ—¶ä¹…ï¼Œå³ä½¿ç»è¿‡é‡åŒ–ä¼˜åŒ–ï¼Œæ•ˆç‡ä»è¿œä½äºFunASRã€WeNetï¼Œçº¯CPUåœºæ™¯æ— ç«äº‰ä¼˜åŠ¿ã€‚</li>
<li><strong>VibeVoice-ASR</strong>ï¼šæ¨¡å‹å‚æ•°è¾¾9Bï¼Œä¸¥é‡ä¾èµ–CUDA GPUåŠ é€Ÿï¼Œçº¯CPUç¯å¢ƒä¸‹æ¨ç†å‡ ä¹ä¸å¯ç”¨ï¼Œä¸”éƒ¨ç½²å¤æ‚åº¦æé«˜ï¼Œä¸é€‚åˆCPUç¦»çº¿åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-13">ä¸‰ã€è½åœ°é€‰å‹å†³ç­–è·¯å¾„ä¸ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-14">ï¼ˆä¸€ï¼‰é€‰å‹å†³ç­–è·¯å¾„</h4>
<p>ç»“åˆä¸šåŠ¡åœºæ™¯å¿«é€Ÿé”å®šæ¨¡å‹ï¼Œå¯éµå¾ªä»¥ä¸‹å†³ç­–é€»è¾‘ï¼š</p>
<ol>
<li>è‹¥éœ€<strong>é«˜ç²¾åº¦+é«˜æ•ˆç‡+æ˜“éƒ¨ç½²</strong>ï¼ˆé€šç”¨å·¥ä¸šçº§åœºæ™¯ï¼‰ï¼šä¼˜å…ˆé€‰FunASRï¼›</li>
<li>è‹¥éœ€<strong>å®æ—¶æµå¼è¯†åˆ«</strong>ï¼ˆå¦‚å®æ—¶å¯¹è¯ã€æ™ºèƒ½ç»ˆç«¯ï¼‰ï¼šä¼˜å…ˆé€‰WeNetï¼›</li>
<li>è‹¥éœ€<strong>æè‡´è½»é‡åŒ–+å…¨é“¾è·¯èƒ½åŠ›</strong>ï¼ˆåµŒå…¥å¼/è¾¹ç¼˜è®¾å¤‡ï¼‰ï¼šé€‰SenseVoiceï¼›</li>
<li>è‹¥éœ€<strong>å¤šè¯­ç§/ä¸­è‹±æ··è¯»</strong>ï¼ˆçŸ­éŸ³é¢‘åœºæ™¯ï¼‰ï¼šå¯å¤‡é€‰Faster-whisperï¼›</li>
<li>è‹¥ä¸º<strong>èµ„æºæåº¦å—é™çš„è½»é‡åœºæ™¯</strong>ï¼ˆéé«˜ç²¾åº¦éœ€æ±‚ï¼‰ï¼šå¤‡é€‰Voskã€‚</li>
</ol>
<h4 data-id="heading-15">ï¼ˆäºŒï¼‰CPUç¦»çº¿éƒ¨ç½²ä¼˜åŒ–å»ºè®®</h4>
<p>ä¸ºè¿›ä¸€æ­¥æå‡CPUç¯å¢ƒä¸‹çš„æ¨ç†æ•ˆç‡ï¼Œå¯é‡‡ç”¨ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ol>
<li><strong>æ¨¡å‹é‡åŒ–</strong>ï¼šä¼˜å…ˆé€‰ç”¨int8é‡åŒ–æ¨¡å‹ï¼Œç›¸è¾ƒäºFP32æ¨¡å‹ï¼Œä½“ç§¯ç¼©å°4å€ï¼Œæ¨ç†é€Ÿåº¦æå‡2-3å€ï¼Œä¸”ç²¾åº¦æŸå¤±æ§åˆ¶åœ¨1%-2%ä»¥å†…ï¼Œå‡ ä¹ä¸å½±å“ä¸šåŠ¡ä½¿ç”¨ï¼›</li>
<li><strong>çº¿ç¨‹é…ç½®</strong>ï¼šæ ¹æ®CPUæ ¸å¿ƒæ•°åˆç†è®¾ç½®æ¨ç†çº¿ç¨‹ï¼ˆå»ºè®®4-8çº¿ç¨‹ï¼‰ï¼Œé¿å…çº¿ç¨‹è¿‡å¤šå¯¼è‡´èµ„æºç«äº‰ï¼Œçº¿ç¨‹è¿‡å°‘å½±å“æ¨ç†é€Ÿåº¦ï¼›</li>
<li><strong>æ¨ç†æ¡†æ¶</strong>ï¼šä¼˜å…ˆä½¿ç”¨onnxruntimeæ¡†æ¶ï¼Œå¯ç”¨CPUä¼˜åŒ–é€‰é¡¹ï¼ˆå¦‚MKLDNNåŠ é€Ÿï¼‰ï¼Œè¿›ä¸€æ­¥æå‡æ¨ç†æ•ˆç‡ï¼›</li>
<li><strong>éŸ³é¢‘é¢„å¤„ç†</strong>ï¼šç»Ÿä¸€éŸ³é¢‘æ ¼å¼ä¸º16kHzã€å•å£°é“ã€16bitï¼Œå‡å°‘æ¨¡å‹é¢„å¤„ç†è€—æ—¶ï¼Œæå‡æ¨ç†æµç•…åº¦ã€‚</li>
</ol>
<h3 data-id="heading-16">å››ã€æ€»ç»“</h3>
<p>ä¸­æ–‡ç¦»çº¿CPUç¯å¢ƒä¸‹çš„ASRé€‰å‹ï¼Œæ ¸å¿ƒæ˜¯å¹³è¡¡â€œç²¾åº¦ã€æ•ˆç‡ã€éƒ¨ç½²æˆæœ¬â€ä¸‰è€…å…³ç³»ã€‚FunASRã€WeNetã€SenseVoiceä¸‰æ¬¾æ¨¡å‹è¦†ç›–äº†ç»å¤§å¤šæ•°å·¥ä¸šçº§åœºæ™¯ï¼Œå…¶ä¸­FunASRç»¼åˆè¡¨ç°æœ€ä¼˜ï¼Œå¯ä½œä¸ºé¦–é€‰ï¼›WeNetä¸SenseVoiceåˆ†åˆ«åœ¨æµå¼è¯†åˆ«ã€è½»é‡åŒ–åœºæ™¯ä¸­å…·å¤‡ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œå¯é’ˆå¯¹æ€§é€‰ç”¨ã€‚</p>
<p>é€‰å‹æ—¶éœ€åšå†³æ’é™¤GPUä¾èµ–å‹æ¨¡å‹ï¼ŒåŒæ—¶æ ¹æ®ä¸šåŠ¡åœºæ™¯çš„ç²¾åº¦éœ€æ±‚ã€èµ„æºé™åˆ¶ã€åŠŸèƒ½è¯‰æ±‚ï¼Œçµæ´»è°ƒæ•´æ¨¡å‹ä¸ä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿é¡¹ç›®é«˜æ•ˆè½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šè¿‡é‡æ–°ç”Ÿæˆæ¥ä¿®å¤å­—ä½“æ–‡ä»¶é—®é¢˜]]></title>    <link>https://juejin.cn/post/7599155566298071083</link>    <guid>https://juejin.cn/post/7599155566298071083</guid>    <pubDate>2026-01-26T09:43:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298071083" data-draft-id="7594627998839423018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šè¿‡é‡æ–°ç”Ÿæˆæ¥ä¿®å¤å­—ä½“æ–‡ä»¶é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T09:43:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹˜é£è½¬èˆµ"/> <meta itemprop="url" content="https://juejin.cn/user/2260251640086279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šè¿‡é‡æ–°ç”Ÿæˆæ¥ä¿®å¤å­—ä½“æ–‡ä»¶é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2260251640086279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹˜é£è½¬èˆµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:43:38.000Z" title="Mon Jan 26 2026 09:43:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ‰æ²¡æœ‰é‡åˆ°è¿™ç§æƒ…å†µï¼Œ</h2>
<blockquote>
<p>ç¾æœ¯å¯¼å‡ºçš„å­—ä½“ï¼Œå¥¹ç”¨ç€å¯ä»¥ï¼Œä½†æ˜¯å‰ç«¯é¡µé¢å¼•ç”¨å°±ä¸ç”Ÿæ•ˆ</p>
</blockquote>
<h2 data-id="heading-1">å¯èƒ½çš„åŸå› </h2>
<h3 data-id="heading-2">1. æµè§ˆå™¨çš„â€œå®‰æ£€æœºåˆ¶â€ï¼šOTS æ‹¦æˆª</h3>
<p>ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariï¼‰åœ¨åŠ è½½ Web å­—ä½“æ—¶ï¼Œéƒ½ä¼šè¿è¡Œä¸€ä¸ªå«ä½œ <strong>OTS (OpenType Sanitizer)</strong> çš„ç¨‹åºã€‚</p>
<ul>
<li><strong>å®ƒçš„èŒè´£ï¼š</strong> é˜²æ­¢æ¶æ„å­—ä½“åˆ©ç”¨è§£ææ¼æ´æ”»å‡»ç”¨æˆ·çš„ç³»ç»Ÿã€‚å®ƒä¼šå¯¹å­—ä½“çš„æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ Tableï¼ˆæ•°æ®è¡¨ï¼‰è¿›è¡Œæå…¶ä¸¥æ ¼çš„æ ¡éªŒã€‚</li>
<li><strong>åæœï¼š</strong> å¦‚æœå­—ä½“æ–‡ä»¶çš„æ ¡éªŒå’Œï¼ˆChecksumï¼‰å¯¹ä¸ä¸Šï¼Œæˆ–è€…å†…éƒ¨ç´¢å¼•è¡¨æœ‰ 1 å­—èŠ‚çš„åç§»é”™è¯¯ï¼Œæµè§ˆå™¨ä¼š<strong>ç›´æ¥æ‹’ç»åŠ è½½</strong>è¯¥æ–‡ä»¶ï¼Œå¹¶åœ¨æ§åˆ¶å°æŠ¥é”™ã€‚</li>
<li><strong>Photoshop çš„åšæ³•ï¼š</strong> PS è°ƒç”¨çš„æ˜¯æ“ä½œç³»ç»Ÿçš„å­—ä½“å¼•æ“ï¼ˆæˆ–è€…æ˜¯ Adobe è‡ªå®¶çš„å¼•æ“ï¼‰ã€‚è¿™äº›å¼•æ“ä¸ºäº†å…¼å®¹è€æ—§å­—ä½“ï¼Œé€šå¸¸éå¸¸â€œå®½å®¹â€ã€‚å³ä½¿æ–‡ä»¶ç»“æ„æœ‰ç‘•ç–µï¼Œåªè¦å®ƒèƒ½æ‰¾åˆ°ç¬”ç”»æ•°æ®ï¼Œå®ƒå°±èƒ½å¼ºè¡Œç”»å‡ºæ¥ã€‚</li>
</ul>
<h3 data-id="heading-3">2. æƒé™ä¸ç‰ˆæƒä½ï¼ˆEmbedding Bitsï¼‰</h3>
<p>å­—ä½“æ–‡ä»¶å†…éƒ¨æœ‰ä¸€ä¸ªå­—æ®µå« <code>fsType</code>ï¼Œä¸“é—¨æ ‡è®°è¯¥å­—ä½“æ˜¯å¦å…è®¸â€œåµŒå…¥â€ã€‚</p>
<ul>
<li><strong>ç½‘é¡µç«¯çš„é™åˆ¶ï¼š</strong> å¦‚æœè¿™ä¸ªä½è¢«è®¾ç½®ä¸ºâ€œå—é™ï¼ˆRestrictedï¼‰â€ï¼Œæµè§ˆå™¨ä¼šéµå¾ªç‰ˆæƒåè®®ï¼Œæ‹’ç»åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºè¯¥å­—ä½“ã€‚</li>
<li><strong>Photoshop çš„åšæ³•ï¼š</strong> æ—¢ç„¶è®¾è®¡å¸ˆèƒ½æŠŠå­—ä½“è£…è¿›ç³»ç»Ÿï¼ŒPS å°±è®¤ä¸ºä½ å·²ç»æ‹¥æœ‰äº†ä½¿ç”¨æƒï¼Œæ‰€ä»¥å®ƒä¸ä¼šé™åˆ¶ä½ åœ¨è®¾è®¡ç¨¿é‡Œä½¿ç”¨å®ƒã€‚</li>
<li><strong>FontForge çš„ä½œç”¨ï¼š</strong> å½“ä½ åœ¨ FontForge é‡Œå¯¼å‡ºæ–°å­—ä½“æ—¶ï¼Œé»˜è®¤è®¾ç½®é€šå¸¸ä¼šé‡ç½®è¿™äº›æƒé™ä½ï¼Œä½¿å…¶å˜ä¸ºâ€œå¯åµŒå…¥ï¼ˆInstallable Embeddingï¼‰â€ï¼Œä»è€Œè§£å¼€äº†æµè§ˆå™¨çš„æ·é”ã€‚</li>
</ul>
<h3 data-id="heading-4">3. å‘½åç©ºé—´ä¸è·¨åŸŸï¼ˆCORSï¼‰</h3>
<p>è™½ç„¶è¿™ä¸å­—ä½“å†…éƒ¨ç»“æ„å…³ç³»è¾ƒå°ï¼Œä½†ä¹Ÿæ˜¯å‰ç«¯å¸¸é‡åˆ°çš„å‘ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶å¤´ä¿¡æ¯ï¼š</strong> æœ‰äº›å­—ä½“å†…éƒ¨çš„ <code>PostScript Name</code> åŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ–ä¸­æ–‡å­—ç¬¦ï¼ŒPS èƒ½å¤Ÿè¯†åˆ«ï¼Œä½† CSS å¼•ç”¨æ—¶å¦‚æœåç§°ä¸åŒ¹é…æˆ–åŒ…å«éæ³•å­—ç¬¦ï¼Œæµè§ˆå™¨å°±æ‰¾ä¸åˆ°ã€‚</li>
<li><strong>FontForge çš„ä½œç”¨ï¼š</strong> å¯¼å‡ºè¿‡ç¨‹ä¼šæ ¹æ®è§„èŒƒé‡æ–°æ ¼å¼åŒ–å­—ä½“çš„â€œåå­—è¡¨ï¼ˆNaming Tableï¼‰â€ï¼Œæ¶ˆé™¤äº†å‘½åçš„æ­§ä¹‰ã€‚</li>
<li/>
</ul>
<h2 data-id="heading-5">è§£å†³æ–¹æ³•</h2>
<h3 data-id="heading-6">ä½¿ç”¨FontForgeè¿™ç±»å­—ä½“ç¼–è¾‘å™¨é‡æ–°ç”Ÿæˆä¸€ä¸‹å­—ä½“æ–‡ä»¶æ¥è§£å†³</h3>
<p>é‡æ–°ç”Ÿæˆä¼šåšå¦‚ä¸‹çš„äº‹æƒ…</p>
<ol>
<li><strong>æ¸…ç†å†—ä½™æ•°æ®ï¼š</strong> FontForge ä¼šä¸¢å¼ƒåŸæ–‡ä»¶ä¸­ä¸è§„èŒƒçš„è‡ªå®šä¹‰æ•°æ®ã€‚</li>
<li><strong>é‡æ–°è®¡ç®—æ ¡éªŒï¼š</strong> å®ƒä¼šä¸ºæ‰€æœ‰çš„ Table é‡æ–°è®¡ç®—æ­£ç¡®çš„æ ¡éªŒå’Œï¼ˆChecksumï¼‰ï¼Œè¿™ç›´æ¥é€šè¿‡äº†æµè§ˆå™¨çš„ <strong>OTS å®‰æ£€</strong>ã€‚</li>
<li><strong>æ ‡å‡†åŒ–æ ¼å¼ï¼š</strong> å®ƒå¼ºåˆ¶æŒ‰ç…§ OpenType/TrueType æœ€æ–°çš„æ ‡å‡†åè®®æ¥æ’åˆ—æ–‡ä»¶çš„äºŒè¿›åˆ¶ç»“æ„ã€‚</li>
</ol>
<blockquote>
</blockquote>
<h3 data-id="heading-7">FontForgeä¸‹è½½</h3>
<ul>
<li>å¼€æºå…è´¹</li>
<li>è·¨å¹³å°ï¼ˆWindows/macOS/Linuxï¼‰</li>
<li>æ”¯æŒ TTF/OTF/WOFF/WOFF2/SVG/BDF ç­‰äº’è½¬</li>
</ul>
<p>å®˜ç½‘  <a href="https://link.juejin.cn?target=https%3A%2F%2Ffontforge.org" target="_blank" title="https://fontforge.org" ref="nofollow noopener noreferrer">fontforge.org</a></p>
<p>ä½¿ç”¨æ–‡æ¡£  <a href="https://link.juejin.cn?target=https%3A%2F%2Ffontforge.org%2Fdocs%2Fui%2Fmenus.html" target="_blank" title="https://fontforge.org/docs/ui/menus.html" ref="nofollow noopener noreferrer">fontforge.org/docs/ui/menâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/814ae29c63e8410c95c4ea6cef551c10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=MjP4lFPe5Mpz88gfaWBT2RBTXbo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">å¯¼å…¥å­—ä½“</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cd6750de6cc4dbeb6f6956ae7a86931~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=i5PLeLJcFGrPhV4d3e9RdRZ6flg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">è¿™é‡Œå¯ä»¥æŸ¥çœ‹å­—ä½“çš„æŠ¥é”™</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83b3a0db54914b2dadee1243797e72f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=%2FzFlAOVrsNz7yNdEJaizqN8HS2I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4a871797ae14a02926b69751cab4608~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=jVxWVmdVXz9WsBsRQ9QF7jx3kNk%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><code>Missing Points at Extrema</code>ï¼ˆæå€¼ç‚¹ç¼ºå¤±ï¼‰ï¼šè¿™ä¸»è¦å½±å“å­—ä½“åœ¨ç‰¹å®šå°ºå¯¸ä¸‹çš„æ¸²æŸ“æ¸…æ™°åº¦ï¼ˆHintingï¼‰ã€‚</p>
</li>
<li>
<p><code>Self Intersecting</code>ï¼ˆè·¯å¾„è‡ªç›¸äº¤ï¼‰ï¼šè¿™å¯èƒ½å¯¼è‡´æŸäº›è½¯ä»¶é‡Œå¡«å……è‰²å—å¼‚å¸¸ã€‚</p>
</li>
<li>
<p><strong>ç»“è®ºï¼š</strong> è¿™äº›å±äºâ€œç»˜å›¾è§„èŒƒâ€é—®é¢˜ï¼Œ<strong>å®ƒä»¬é€šå¸¸ä¸ä¼šå¯¼è‡´å­—ä½“æ— æ³•åŠ è½½</strong>ï¼Œåªä¼šè®©å­—çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹ä¸‘æˆ–æ¸²æŸ“ä¸å®Œç¾</p>
</li>
</ul>
<h3 data-id="heading-10">é‡æ–°ç”Ÿæˆå­—ä½“æ–‡ä»¶</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44c4714fb62f46178fe0c64843627e83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=9ttgk76eIytWsOCX%2Fnae%2FObj8Xw%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-11">é€‰æ‹©å¯¼å‡ºçš„æ–‡ä»¶æ ¼å¼</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d66250a8de4492aaa75f4bd18b53ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025417&amp;x-signature=gNbqhh9T2AKCS9xOar%2FWs2O5%2Bkw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>åŸå§‹æ–‡ä»¶å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š</strong> åŸå§‹å­—ä½“å¯èƒ½å­˜åœ¨æŸåçš„åç§»é‡ã€é”™è¯¯çš„æ ¡éªŒå’Œï¼ˆChecksumï¼‰ã€æˆ–è€…ä¸ç¬¦åˆè§„èŒƒçš„ Headerï¼ˆå¤´éƒ¨ä¿¡æ¯ï¼‰ã€‚æµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯ Chrome/Firefoxï¼‰å¯¹ Web å­—ä½“çš„å®‰å…¨æ€§æ£€æŸ¥éå¸¸ä¸¥æ ¼ï¼Œåªè¦ç»“æ„æœ‰ä¸€ç‚¹ä¸åˆè§„ï¼Œå°±ä¼šæ‹’ç»åŠ è½½ã€‚</p>
</li>
<li>
<p><strong>FontForge çš„ä½œç”¨ï¼š</strong> å½“ä½ ç‚¹å‡»â€œGenerateâ€æ—¶ï¼ŒFontForge å¹¶ä¸æ˜¯ç®€å•åœ°â€œå¤åˆ¶â€æ—§æ–‡ä»¶ï¼Œè€Œæ˜¯æ ¹æ®å®ƒå†…å­˜ä¸­çš„æ•°æ®æ¨¡å‹ï¼Œ<strong>é‡æ–°ä»é›¶å¼€å§‹æ„å»º</strong>äº†ä¸€ä¸ªå…¨æ–°çš„ <code>.ttf</code> æ–‡ä»¶ã€‚å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆæ ‡å‡†çš„æ–° Tableï¼ˆå¦‚ <code>head</code>, <code>hhea</code>, <code>maxp</code>, <code>OS/2</code> ç­‰ï¼‰ã€‚è¿™ä¸ªâ€œé‡å†™â€è¿‡ç¨‹è‡ªåŠ¨ä¿®å¤äº†å¯¼è‡´æµè§ˆå™¨æŠ¥é”™çš„åº•å±‚ç»“æ„é—®é¢˜ã€‚</p>
</li>
</ul>
<p><strong>å¯¼å‡ºä¹‹åæ–°çš„å­—ä½“æ–‡ä»¶å°±å¯ä»¥ç”¨äº†ï¼Œå¯¹äºå‰ç«¯æ¥è¯´äº†è§£åˆ°è¿™å°±å¤Ÿç”¨äº†</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Three.js è‰²å½©ç©ºé—´çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼]]></title>    <link>https://juejin.cn/post/7599155566298087467</link>    <guid>https://juejin.cn/post/7599155566298087467</guid>    <pubDate>2026-01-26T09:44:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298087467" data-draft-id="7599299048302575659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Three.js è‰²å½©ç©ºé—´çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,three.js"/> <meta itemprop="datePublished" content="2026-01-26T09:44:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹˜é£è½¬èˆµ"/> <meta itemprop="url" content="https://juejin.cn/user/2260251640086279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Three.js è‰²å½©ç©ºé—´çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2260251640086279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹˜é£è½¬èˆµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:44:34.000Z" title="Mon Jan 26 2026 09:44:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">threeä¸­è‰²å½©ç©ºé—´å¸¸è§ç”¨å¤„</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç»™æè´¨è®¾ç½®è‰²å½©ç©ºé—´</span>
material1.map.colorSpace = THREE.SRGBColorSpace;

<span class="hljs-comment">// ç»™æ¸²æŸ“å™¨çš„è¾“å‡ºè‰²å½©ç©ºé—´, ä¸è®¾ç½®çš„è¯é»˜è®¤å€¼ä¹Ÿæ˜¯SRGBColorSpace</span>
<span class="hljs-keyword">new</span> THREE.<span class="hljs-built_in">WebGLRenderer</span>( { outputColorSpace: THREE.SRGBColorSpace } );
</code></pre>
<blockquote>
<p>three.js r152+ ä¹‹åé»˜è®¤å°±æ˜¯ <code>SRGBColorSpace</code>ï¼Œè€ç‰ˆæœ¬ï¼ˆ<code>outputEncoding</code> æ—¶ä»£ï¼‰è¡Œä¸ºä¸åŒ</p>
</blockquote>
<h2 data-id="heading-1">è‰²å½©ç©ºé—´çš„é€‰é¡¹</h2>
<ul>
<li>
<p>SRGBColorSpace-sRGB è‰²å½©ç©ºé—´</p>
</li>
<li>
<p>LinearSRGBColorSpace-çº¿æ€§sRGBè‰²å½©ç©ºé—´</p>
</li>
</ul>
<h2 data-id="heading-2">åŒºåˆ«ï¼Ÿ</h2>
<p><strong>SRGBColorSpaceè¿›è¡Œäº†ä¼½é©¬æ ¡æ­£</strong></p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆä¼šæœ‰ä¼½é©¬æ ¡æ­£ï¼Ÿ</h2>
<ol>
<li>
<h3 data-id="heading-4">çº æ­£ç¡¬ä»¶çš„é—®é¢˜</h3>
</li>
</ol>
<p>åœ¨æ¶²æ™¶æ˜¾ç¤ºå™¨æ™®åŠä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯ç¬¨é‡çš„ <strong>CRT</strong> <strong>ï¼ˆé˜´å½±</strong> <strong>æ …æ ¼</strong> <strong>æ˜¾åƒç®¡</strong> <strong>ï¼‰</strong> ç”µè§†ã€‚CRT çš„å·¥ä½œåŸç†æ˜¯ç”¨ç”µå­æªå°„å‡ºç”µå­æŸè½°å‡»å±å¹•ï¼Œç§‘å­¦å®¶å‘ç°ï¼Œç”µå­æªçš„ç”µå‹å€¼å’Œå±å¹•äº§ç”Ÿçš„äº®åº¦ä¹‹é—´å¹¶ä¸æ˜¯ 1:1 çš„çº¿æ€§å…³ç³»ï¼Œè€Œæ˜¯ä¸€ä¸ªå¹‚å‡½æ•°å…³ç³»ï¼š</p>
<p>ä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾ä¸­çº¢è‰²æ›²çº¿æ‰€ç¤ºï¼Œè·ŸåŸæœ¬è“è‰²è™šçº¿æ¯”è¾ƒï¼Œäº®åº¦æ˜¯åä½çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64c5ad22775e4c8bbe15f0becd4349ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=g614mGmcGMEw7bKVH55AlavzE5Q%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ä¸ºäº†è¿˜åŸçœŸå®æ•ˆæœï¼ŒæŠµæ¶ˆè°ƒ <strong>CRT</strong>å‹ä½çš„äº®åº¦ï¼Œé‚£å°±æŠŠçœŸå®äº®åº¦æ•°æ®æé«˜ï¼Œæé«˜æˆç»¿è‰²æ›²çº¿é‚£æ ·ï¼Œè¿™æ ·ä¸€æŠµæ¶ˆï¼Œæ˜¾ç¤ºå°±æ­£å¸¸äº†ï¼Œè¿™ä¸ªæé«˜çš„è¿‡ç¨‹å°±æ˜¯ä¼½é©¬æ ¡æ­£</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14fe97c5b3f2465fbe306f521e83eaaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=dXN9kq9iDejcOrQzG%2FaxZDpDx5Q%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>
<h3 data-id="heading-5">ä¹Ÿèƒ½æ»¡è¶³å­˜å‚¨ç©ºé—´åˆç†åˆ†é…</h3>
</li>
</ol>
<ul>
<li>
<p><strong>äººçœ¼ç‰¹æ€§</strong>ï¼šæˆ‘ä»¬å¯¹æš—éƒ¨çš„å˜åŒ–éå¸¸æ•æ„Ÿï¼Œè€Œå¯¹äº®éƒ¨çš„å˜åŒ–æ¯”è¾ƒè¿Ÿé’ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®åˆ†é…çš„çŸ›ç›¾</strong>ï¼šå¦‚æœæˆ‘ä»¬åœ¨ç”µè„‘é‡Œç”¨â€œçº¿æ€§â€æ–¹å¼å­˜å‚¨äº®åº¦ï¼ˆæ¯”å¦‚ 0 ä»£è¡¨é»‘ï¼Œ128 ä»£è¡¨åŠäº®ï¼Œ255 ä»£è¡¨å…¨äº®ï¼‰ï¼š</p>
<ul>
<li>åœ¨ 0 åˆ° 10 ä¹‹é—´ï¼ˆæš—éƒ¨ï¼‰ï¼Œåªæœ‰ 10 ä¸ªæ¡£ä½ã€‚å› ä¸ºæˆ‘ä»¬çœ¼ç›å¤ªæ•æ„Ÿï¼Œè¿™ 10 ä¸ªæ¡£ä½ä¹‹é—´çš„è·³å˜çœ‹èµ·æ¥ä¼šåƒé˜¶æ¢¯ä¸€æ ·ï¼Œéå¸¸ä¸è‡ªç„¶ï¼ˆè¿™å°±æ˜¯â€œè‰²å½©æ–­å±‚â€ï¼‰ã€‚</li>
<li>åœ¨ 200 åˆ° 250 ä¹‹é—´ï¼ˆäº®éƒ¨ï¼‰ï¼Œè™½ç„¶æœ‰ 50 ä¸ªæ¡£ä½ï¼Œä½†æˆ‘ä»¬çš„çœ¼ç›æ ¹æœ¬åˆ†ä¸å‡ºè¿™ 50 ç§äº®åº¦çš„åŒºåˆ«ã€‚è¿™éƒ¨åˆ†æ˜‚è´µçš„å­˜å‚¨ç©ºé—´ï¼ˆä½æ·±ï¼‰å°±è¢«<strong>æµªè´¹</strong>äº†ã€‚</li>
</ul>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆä¼½é©¬ç¼–ç ï¼‰</strong> ï¼š æ•…æ„æŠŠ 256 ä¸ªæ¡£ä½ä¸­çš„å¤§éƒ¨åˆ†éƒ½åˆ†ç»™â€œæš—éƒ¨â€ï¼Œåªç•™å°‘éƒ¨åˆ†ç»™â€œäº®éƒ¨â€ã€‚è¿™æ ·æ—¢ç…§é¡¾äº†äººçœ¼çš„æ•æ„Ÿåº¦ï¼Œåˆæ²¡æœ‰æµªè´¹å­˜å‚¨ç©ºé—´ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ 8 ä½ï¼ˆ0-255ï¼‰çš„ç©ºé—´é‡Œï¼ŒæŠŠæ›´å¤šæ•°å€¼åˆ†é…ç»™æ•æ„Ÿçš„æš—éƒ¨ï¼Œè®©æœ‰é™çš„èµ„æºå‘æŒ¥æœ€å¤§æ•ˆç”¨ã€‚å¦‚å›¾æ‰€ç¤ºï¼ˆéšä¾¿æ‰¾ä¸€ä¸ªä»¥å‰çš„æš—éƒ¨åŒºåŸŸå€¼ï¼Œæ˜ å°„åå å±…çš„åŒºåŸŸæ˜æ˜¾å˜å¤šï¼‰</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb9888e1877b4336a9a2f3344490c4f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=KaHZ%2FjNpcEZOjqiA0KTA58Fs3AE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆç°åœ¨å±å¹•â€œæ­£å¸¸â€äº†ï¼Œè¿˜éœ€è¦å®ƒï¼Ÿ</h2>
<p>ç°åœ¨çš„æ¶²æ™¶ï¼ˆLCDï¼‰æˆ– OLED å±å¹•å®Œå…¨å¯ä»¥åšåˆ°â€œç»™ 128 å°±äº® 50%â€ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æŠ˜è…¾ï¼Ÿ</p>
<h3 data-id="heading-7">è¡Œä¸šæ ‡å‡†çš„æƒ¯æ€§</h3>
<p>å…¨çƒäº’è”ç½‘ä¸Š 99% çš„å›¾ç‰‡ï¼ˆJPEGï¼‰ã€è§†é¢‘ï¼ˆMP4ï¼‰å’Œç½‘é¡µæ ‡å‡†ï¼ˆHTML/CSSï¼‰éƒ½æ˜¯åŸºäº <strong>sRGB</strong> è‰²å½©ç©ºé—´å­˜å‚¨çš„</p>
<ul>
<li>
<p>å¦‚æœæ˜¾ç¤ºå™¨çªç„¶æ”¹ä¸ºâ€œçº¿æ€§æ˜¾ç¤ºâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„äº’è”ç½‘å†…å®¹çœ‹èµ·æ¥éƒ½ä¼šå˜å¾—<strong>éå¸¸äº®</strong>ã€‚</p>
</li>
<li>
<p>å¹¶ä¸”å›¾ç‰‡å¤§å¤šè¿˜æ˜¯å¦‚å›¾æ‰€ç¤º8ä½ï¼Œéœ€è¦ä¸Šé¢è¯´è¿‡çš„æ»¡è¶³å­˜å‚¨ç©ºé—´å¹¶åˆç†åˆ†é…</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebc0a6068a5740dabf5ad078436742ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=1KoT0lLRjTPLqMWe74jyjnzGt8Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">æ­£ç¡®è‰²å½©ç©ºé—´å¤„ç†çš„æµç¨‹</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3fdafe40b0f4b399c8f95bcd774a2d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=OAbZ92yxjuxqdjoAU4iB7Ud9ggw%3D" alt="" loading="lazy"/></p>
<ol>
<li>
<p><strong>åŸå§‹å›¾ç‰‡</strong> é»˜è®¤æ˜¯ sRGB è‰²å½©ç©ºé—´ï¼Œå®ƒè‡ªå¸¦ä¸€æ¡ â€œä¸Šç¿˜â€ çš„ä¼½é©¬æ›²çº¿</p>
</li>
<li>
<p><strong>è½¬æˆ</strong> <strong>çº¿æ€§ç©ºé—´</strong> ï¼šåœ¨è¿›å…¥ GPU è¿ç®—å‰ï¼Œéœ€è¦å…ˆæŠŠå›¾ç‰‡ä» sRGB éçº¿æ€§ç©ºé—´è½¬æ¢ä¸º <strong>Linearï¼ˆçº¿æ€§ï¼‰sRGB</strong> ç©ºé—´ã€‚è¿™ä¸€æ­¥ä¼šæŠŠä¸Šç¿˜çš„æ›²çº¿ â€œæ‹‰å¹³â€ æˆä¸€æ¡ç›´çº¿ï¼Œè®©äº®åº¦æ•°æ®æ¢å¤æˆç‰©ç†ä¸Šå‡åŒ€çš„æ•°å€¼ï¼Œç¡®ä¿åç»­çš„å…‰ç…§ã€æ··åˆç­‰è®¡ç®—ç»“æœæ˜¯å‡†ç¡®çš„ã€‚</p>
</li>
<li>
<p><strong>ç¨‹åºè¿ç®—</strong> ï¼šåœ¨<strong>çº¿æ€§ç©ºé—´</strong>é‡Œè¿›è¡Œæ¸²æŸ“è®¡ç®—ï¼Œæ¯”å¦‚å…‰å½±è¿½è¸ªã€æè´¨æ··åˆã€ç‰¹æ•ˆåˆæˆç­‰ã€‚å› ä¸ºçº¿æ€§ç©ºé—´çš„äº®åº¦æ˜¯å‡åŒ€çš„ï¼Œæ‰€ä»¥è®¡ç®—å‡ºæ¥çš„å…‰å½±æ•ˆæœæ‰ç¬¦åˆç‰©ç†è§„å¾‹ï¼Œä¸ä¼šå‡ºç°é¢œè‰²åå·®æˆ–æš—éƒ¨ä¸¢å¤±ã€‚</p>
</li>
<li>
<p><strong>æ¸²æŸ“ç»“æœ</strong> ï¼šå¯¹è®¡ç®—ç»“æœï¼Œç»è¿‡ä¼½é©¬æ ¡æ­£åï¼Œå¾—åˆ°çš„å°±æ˜¯æœ€ç»ˆçš„ sRGB æ ¼å¼æ¸²æŸ“ç»“æœï¼Œå®ƒçš„äº®åº¦æ›²çº¿å’ŒåŸå§‹å›¾ç‰‡çš„æ ¼å¼æ˜¯ä¸€è‡´çš„ã€‚</p>
</li>
<li>
<p><strong>æ˜¾ç¤ºå™¨æ˜¾ç¤º</strong> ğŸ–¥ï¸æ˜¾ç¤ºå™¨æ¥æ”¶åˆ° sRGB ä¿¡å·åï¼Œä¼šç”¨å®ƒè‡ªå¸¦çš„ä¼½é©¬æ›²çº¿ï¼ˆé€šå¸¸ Î³â‰ˆ2.2ï¼‰æ¥æ˜¾ç¤ºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæŠŠä¿¡å· â€œå‹æš—â€ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»æå‰åšäº†ä¼½é©¬æ ¡æ­£ï¼Œæ‰€ä»¥ä¸¤æ¬¡æ›²çº¿å˜åŒ–åˆšå¥½æŠµæ¶ˆï¼Œæœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„äº®åº¦å°±å’Œæˆ‘ä»¬è®¡ç®—çš„ç»“æœå®Œå…¨ä¸€è‡´ã€‚</p>
</li>
<li>
<p><strong>äººçœ¼æ„ŸçŸ¥</strong> ğŸ‘€æœ€ç»ˆç”»é¢è¢«äººçœ¼çœ‹åˆ°ï¼Œè‰²å½©å’Œäº®åº¦éƒ½ä¿æŒäº†è®¾è®¡å’Œè®¡ç®—æ—¶çš„çœŸå®æ•ˆæœï¼Œä¸ä¼šå‡ºç°è¿‡æš—æˆ–è¿‡äº®çš„é—®é¢˜ã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦ä¿è¯ç”¨æ¥è®¡ç®—çš„æ—¶å€™æ˜¯ <strong>Linearï¼ˆ</strong> <strong>çº¿æ€§</strong>ç©ºé—´ï¼Œç”¨æ¥æ¸²æŸ“çš„æ—¶å€™æ˜¯<strong>sRGB</strong> ç©ºé—´ï¼Œé‚£åœ¨threeä¸­å¦‚ä½•åšåˆ°ï¼Ÿ</p>
<h2 data-id="heading-10">Three.jsä»è¾“å…¥çš„è§’åº¦</h2>
<p><strong>Three.jsä¸­æˆ‘ä»¬åªéœ€è¦æŒ‡å®š</strong> <strong>è‰²å½©ç©ºé—´</strong> <strong>ç±»å‹å³å¯ï¼Œç¨‹åºä¼šå¸®æˆ‘ä»¬è½¬æˆçº¿æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠåº”è¯¥æŒ‡å®šä¸ºSRGBColorSpaceçš„çº¹ç†ï¼ŒæŒ‡å®šä¸ºSRGBColorSpace</strong></p>
<h3 data-id="heading-11">ä¸¾å‡ ç§å¸¸è§åŠ è½½å™¨å¯¹åŠ è½½åçš„å›¾ç‰‡è‰²å½©ç©ºé—´çš„å¤„ç†é€»è¾‘</h3>
<h4 data-id="heading-12">TextureLoader</h4>
<p>TextureLoader ä¸è®¾ç½® colorSpaceï¼Œä¿æŒé»˜è®¤ NoColorSpaceï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼š</p>
<p>æ³¨æ„ï¼é¢œè‰²çº¹ç†éœ€è¦æ‰‹åŠ¨æŒ‡å®šè‰²å½©ç©ºé—´ä¸ºSRGBColorSpaceï¼Œåƒä¸‹æ–‡GLTFLoaderä¸­çš„é€»è¾‘ä¸€æ ·ï¼Œ</p>
<p>ä¾‹å¦‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">texture</span> = await loader.loadAsync( <span class="hljs-string">'textures/land_ocean_ice_cloud_2048.jpg'</span> )<span class="hljs-comment">;</span>
<span class="hljs-attr">texture.colorSpace</span> = THREE.SRGBColorSpace<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-13">CubeTextureLoader</h4>
<p>CubeTextureLoader å›ºå®šè®¾ç½®ä¸º SRGBColorSpaceï¼š</p>
<h4 data-id="heading-14">GLTFLoader</h4>
<p>åªæœ‰é¢œè‰²çº¹ç†ä¼šè¢«è®¾ç½®ä¸º SRGBColorSpaceï¼Œå…¶ä»–çº¹ç†ä¿æŒ NoColorSpaceï¼š</p>
<p>è®¾ç½®ä¸º SRGBColorSpace çš„çº¹ç†ï¼š</p>
<ul>
<li>
<p>baseColorTexture (map) â†’ SRGBColorSpace</p>
</li>
<li>
<p>emissiveTexture (emissiveMap) â†’ SRGBColorSpace</p>
</li>
<li>
<p>sheenColorTexture (sheenColorMap) â†’ SRGBColorSpace</p>
</li>
<li>
<p>specularColorTexture (specularColorMap) â†’ SRGBColorSpace</p>
</li>
</ul>
<h3 data-id="heading-15">è¿™å‡ ç§è‰²å½©ç©ºé—´æ ‡è®°çš„å¤„ç†é€»è¾‘</h3>

























<table><thead><tr><th>exture.colorSpace</th><th>å†…éƒ¨æ ¼å¼</th><th>sRGB â†’ Linear è½¬æ¢</th></tr></thead><tbody><tr><td>NoColorSpaceï¼ˆé»˜è®¤ï¼‰</td><td>RGBA8</td><td>ä¸è½¬æ¢ï¼ŒåŸæ ·ä¸Šä¼ </td></tr><tr><td>SRGBColorSpace</td><td>SRGB8_ALPHA8</td><td>GPU é‡‡æ ·æ—¶è‡ªåŠ¨è½¬ SRGB8_ALPHA8 æ˜¯ WebGL 2.0 çš„ sRGB çº¹ç†æ ¼å¼ GPU åœ¨é‡‡æ ·æ—¶è‡ªåŠ¨åº”ç”¨ sRGB EOTFï¼ˆElectro-Optical Transfer Functionï¼‰å°† sRGB è½¬ä¸ºçº¿æ€§</td></tr><tr><td>LinearSRGBColorSpace</td><td>RGBA8</td><td>ä¸è½¬æ¢ï¼Œå·²æ˜¯çº¿æ€§</td></tr></tbody></table>
<h3 data-id="heading-16">ä¹Ÿæä¾›äº†æ–¹æ³•å¯ä»¥æ‰‹åŠ¨è½¬åŒ–ï¼ŒTHREE.Color ç±»ä¸‹å³å¯è°ƒç”¨</h3>
<p>src/math/ColorManagement.js</p>
<pre><code class="hljs language-r" lang="r">export <span class="hljs-keyword">function</span> SRGBToLinear<span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span> <span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>

    <span class="hljs-built_in">return</span> <span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">0.04045</span> <span class="hljs-punctuation">)</span> <span class="hljs-operator">?</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">*</span> <span class="hljs-number">0.0773993808</span> <span class="hljs-operator">:</span> Math.pow<span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">*</span> <span class="hljs-number">0.9478672986</span> <span class="hljs-operator">+</span> <span class="hljs-number">0.0521327014</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2.4</span> <span class="hljs-punctuation">)</span>;

<span class="hljs-punctuation">}</span>

export <span class="hljs-keyword">function</span> LinearToSRGB<span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span> <span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>

    <span class="hljs-built_in">return</span> <span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">0.0031308</span> <span class="hljs-punctuation">)</span> <span class="hljs-operator">?</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">*</span> <span class="hljs-number">12.92</span> <span class="hljs-operator">:</span> <span class="hljs-number">1.055</span> <span class="hljs-operator">*</span> <span class="hljs-punctuation">(</span> Math.pow<span class="hljs-punctuation">(</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.41666</span> <span class="hljs-punctuation">)</span> <span class="hljs-punctuation">)</span> <span class="hljs-operator">-</span> <span class="hljs-number">0.055</span>;

<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9070e691940466e968df25690ff5008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=tCUe2ZgeTYADV%2BeoOvblC37Xy9Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">Three.jsä¸­-ä»è¾“å‡ºçš„è§’åº¦</h2>
<p>threejsä¼šåœ¨</p>
<ul>
<li>MeshBasicMaterial</li>
<li>MeshPhysicalMaterial</li>
<li>MeshPhongMaterial</li>
<li>MeshLambertMaterial</li>
<li>MeshToonMaterial</li>
<li>MeshMatcapMaterial</li>
<li>SpriteMaterial</li>
<li>PointsMaterial ç­‰ç­‰</li>
</ul>
<p>æè´¨è¾“å‡ºçš„æ—¶å€™å¢åŠ è¿™æ ·ä¸€æ®µä»£ç </p>
<p>src/renderers/shaders/ShaderChunk/colorspace_fragment.glsl.js</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-attr">gl_FragColor</span> = linearToOutputTexel( gl_FragColor )<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-18">linearToOutputTexelå‡½æ•°ä¼šæ ¹æ®outputColorSpaceæ¥åŠ¨æ€é…ç½®</h3>
<pre><code class="hljs language-scss" lang="scss">  <span class="hljs-built_in">getTexelEncodingFunction</span>( 'linearToOutputTexel', parameters.outputColorSpace ),
</code></pre>
<p><strong>è¯´ç™½äº†å°±æ˜¯è¾“å‡ºçš„æ—¶å€™ä¼šè·Ÿä½ è®¾ç½®çš„outputColorSpaceæ¥åˆ¤æ–­éœ€ä¸éœ€è¦è½¬æˆSRGBColorSpaceï¼Œé»˜è®¤æ˜¯è½¬æˆSRGBColorSpace</strong></p>
<h3 data-id="heading-19">æˆ‘ä»¬è‡ªå·±å†™çš„ShaderMaterialè¾“å‡ºçš„æ—¶å€™æ€ä¹ˆåŠ</h3>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨linearToOutputTexel</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83776e68709942b78217a1a192754bcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOO6L2s6Ii1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025477&amp;x-signature=4g0WwmVpTOoaga50X9JcXgXEuLk%3D" alt="" loading="lazy"/></p>
<p>å› ä¸ºlinearToOutputTexel</p>
<ul>
<li>
<p>æ³¨å…¥æ—¶æœºï¼šåœ¨ WebGLProgram æ„é€ å‡½æ•°ä¸­æ„å»º prefixFragment æ—¶</p>
</li>
<li>
<p>æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ getTexelEncodingFunction åŠ¨æ€ç”Ÿæˆå‡½æ•°ä»£ç ï¼Œæ·»åŠ åˆ° prefixFragment</p>
</li>
<li>
<p>å¯ç”¨æ€§ï¼šæ‰€æœ‰é RawShaderMaterial çš„æè´¨ï¼ˆåŒ…æ‹¬ ShaderMaterialï¼‰éƒ½ä¼šè‡ªåŠ¨æ³¨å…¥</p>
</li>
</ul>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>åœ¨ three.js ä¸­ï¼Œé»˜è®¤çš„è‰²å½©ç©ºé—´é…ç½®å·²ç»è¦†ç›–äº†å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ã€‚åªè¦éµå¾ª<strong>é¢œè‰²çº¹ç†ä½¿ç”¨ sRGBã€æ¸²æŸ“è®¡ç®—åœ¨</strong> <strong>çº¿æ€§ç©ºé—´</strong> <strong>ã€è¾“å‡ºå†è½¬å› sRGB</strong>è¿™ä¸€åŸºæœ¬åŸåˆ™ï¼Œç”»é¢é€šå¸¸å°±æ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯ç†è§£è‰²å½©ç©ºé—´ä¸ä¼½é©¬æ ¡æ­£çš„åŸç†ï¼Œæ‰èƒ½åœ¨è‡ªå®šä¹‰ Shaderã€ç‰¹æ®Šçº¹ç†æˆ–æ¸²æŸ“éœ€æ±‚å‡ºç°æ—¶ï¼Œ<strong>æœ‰æ„è¯†åœ°æ‰‹åŠ¨è°ƒæ•´é…ç½®ï¼Œè€Œä¸æ˜¯ç›²ç›®è¯•å‚æ•°</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤œä¹‹é—´å¼€å‘å‡ºAIå°çº¢ä¹¦è¯»ä¹¦ç¬”è®°å‘å¸ƒæŠ€èƒ½ï¼Œæˆ‘çš„è‡ªåŠ¨åŒ–å†…å®¹åˆ›ä½œä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7599478406237536265</link>    <guid>https://juejin.cn/post/7599478406237536265</guid>    <pubDate>2026-01-26T09:01:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599478406237536265" data-draft-id="7599237603976167467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤œä¹‹é—´å¼€å‘å‡ºAIå°çº¢ä¹¦è¯»ä¹¦ç¬”è®°å‘å¸ƒæŠ€èƒ½ï¼Œæˆ‘çš„è‡ªåŠ¨åŒ–å†…å®¹åˆ›ä½œä¹‹è·¯"/> <meta itemprop="keywords" content="AIGC,AIç¼–ç¨‹,MCP"/> <meta itemprop="datePublished" content="2026-01-26T09:01:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="nil"/> <meta itemprop="url" content="https://juejin.cn/user/2893570337422670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤œä¹‹é—´å¼€å‘å‡ºAIå°çº¢ä¹¦è¯»ä¹¦ç¬”è®°å‘å¸ƒæŠ€èƒ½ï¼Œæˆ‘çš„è‡ªåŠ¨åŒ–å†…å®¹åˆ›ä½œä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2893570337422670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    nil
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:01:30.000Z" title="Mon Jan 26 2026 09:01:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€å¤œä¹‹é—´å¼€å‘å‡ºAIå°çº¢ä¹¦è¯»ä¹¦ç¬”è®°å‘å¸ƒæŠ€èƒ½ï¼Œæˆ‘çš„è‡ªåŠ¨åŒ–å†…å®¹åˆ›ä½œä¹‹è·¯</h2>
<blockquote>
<p>å‘Šåˆ«æ‰‹åŠ¨æ’ç‰ˆï¼ç”¨AIè‡ªåŠ¨ç”Ÿæˆç²¾ç¾è¯»ä¹¦ç¬”è®°å¹¶ä¸€é”®å‘å¸ƒåˆ°å°çº¢ä¹¦</p>
</blockquote>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘æœ€è¿‘çš„"ç©å…·"å¼€å‘ç»å†ã€‚ä½œä¸ºä¸€åçƒ­çˆ±é˜…è¯»çš„ç¨‹åºå‘˜ï¼Œæˆ‘ç»å¸¸æƒ³åœ¨å°çº¢ä¹¦ä¸Šåˆ†äº«è‡ªå·±çš„è¯»ä¹¦å¿ƒå¾—ï¼Œä½†æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ’ç‰ˆã€æ‰¾å›¾ã€å†™æ–‡æ¡ˆï¼Œå®åœ¨æ˜¯ä¸€ä»¶è´¹æ—¶è´¹åŠ›çš„äº‹ã€‚äºæ˜¯ï¼Œæˆ‘èŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•ï¼šèƒ½ä¸èƒ½ç”¨AIå¸®æˆ‘å®Œæˆè¿™ä¸€åˆ‡ï¼Ÿ</p>
<h3 data-id="heading-1">é¡¹ç›®èƒŒæ™¯</h3>
<p>å°çº¢ä¹¦ä½œä¸ºä¸€ä¸ªå†…å®¹åˆ†äº«å¹³å°ï¼Œå¯¹è¯»ä¹¦ç¬”è®°è¿™ç§å‚ç›´å†…å®¹æœ‰ç€å¾ˆå¤§çš„éœ€æ±‚ã€‚ä½†æ˜¯ï¼š</p>
<ol>
<li><strong>å†…å®¹ç”Ÿæˆè€—æ—¶</strong>ï¼šè¦å†™ä¸€ç¯‡ä¼˜è´¨çš„è¯»ä¹¦ç¬”è®°ï¼Œéœ€è¦ç†è§£ä¹¦ç±ã€æç‚¼è§‚ç‚¹ã€ç»„ç»‡è¯­è¨€</li>
<li><strong>é…å›¾é€‰æ‹©å›°éš¾</strong>ï¼šéœ€è¦æ‰¾ç¬¦åˆä¹¦ç±ä¸»é¢˜çš„ç²¾ç¾å›¾ç‰‡</li>
<li><strong>æ’ç‰ˆæ ¼å¼éº»çƒ¦</strong>ï¼šå°çº¢ä¹¦çš„æ’ç‰ˆæœ‰ç‰¹å®šæ ¼å¼è¦æ±‚</li>
<li><strong>å‘å¸ƒé¢‘ç‡ä½</strong>ï¼šå› ä¸ºæµç¨‹ç¹çï¼Œå¾ˆéš¾åšæŒé«˜é¢‘æ›´æ–°</li>
</ol>
<p>äºæ˜¯ï¼Œæˆ‘å†³å®šå¼€å‘ä¸€ä¸ªèƒ½å¤Ÿè‡ªåŠ¨åŒ–å®Œæˆè¿™ä¸€åˆ‡çš„æŠ€èƒ½ã€‚</p>
<h3 data-id="heading-2">æŠ€æœ¯é€‰å‹</h3>
<h4 data-id="heading-3">å°çº¢ä¹¦MCP</h4>
<p>é¦–å…ˆï¼Œæˆ‘å‘ç°Claude Codeæ”¯æŒMCPï¼ˆModel Context Protocolï¼‰ï¼Œå¯ä»¥è¿æ¥å„ç§å¤–éƒ¨æœåŠ¡ã€‚å°çº¢ä¹¦å®˜æ–¹æä¾›äº†MCPæœåŠ¡å™¨ï¼Œè®©AIèƒ½å¤Ÿç›´æ¥å‘å¸ƒå†…å®¹åˆ°å°çº¢ä¹¦å¹³å°ã€‚</p>
<h4 data-id="heading-4">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h4>
<ol>
<li><strong>Claude Code AI</strong>ï¼šè´Ÿè´£å†…å®¹ç”Ÿæˆå’Œé€»è¾‘åˆ¤æ–­</li>
<li><strong>Pythonè„šæœ¬</strong>ï¼šå¤„ç†æ•°æ®æŠ“å–ã€å›¾ç‰‡ä¸‹è½½ç­‰ä»»åŠ¡</li>
<li><strong>è±†ç“£API</strong>ï¼šè·å–ä¹¦ç±ä¿¡æ¯å’Œè¯„åˆ†</li>
<li><strong>å…è´¹å›¾åº“API</strong>ï¼šUnsplashã€Pexelsã€Pixabay</li>
<li><strong>å°çº¢ä¹¦MCP</strong>ï¼šä¸€é”®å‘å¸ƒå†…å®¹</li>
</ol>
<h3 data-id="heading-5">é¡¹ç›®æ¶æ„</h3>
<pre><code class="hljs language-bash" lang="bash">xiaohongshu-book-notes/
â”œâ”€â”€ scripts/              <span class="hljs-comment"># æ ¸å¿ƒè„šæœ¬</span>
â”‚   â”œâ”€â”€ find_books.py     <span class="hljs-comment"># è±†ç“£ä¹¦ç±æœç´¢</span>
â”‚   â”œâ”€â”€ generate_book_content.py  <span class="hljs-comment"># å†…å®¹ç”Ÿæˆ</span>
â”‚   â”œâ”€â”€ download_book_images.py   <span class="hljs-comment"># å›¾ç‰‡ä¸‹è½½</span>
â”‚   â””â”€â”€ main_xiaohongshu_poster.py <span class="hljs-comment"># ä¸»ç¨‹åº</span>
â”œâ”€â”€ references/           <span class="hljs-comment"># èµ„æºæ–‡ä»¶</span>
â”‚   â”œâ”€â”€ xiaohongshu_book_templates.md
â”‚   â””â”€â”€ douban_api_guide.md
â””â”€â”€ assets/              <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
    â””â”€â”€ engaging_questions.txt
</code></pre>
<h3 data-id="heading-6">æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-7">1. æ™ºèƒ½ä¹¦ç±é€‰æ‹©</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_popular_books</span>():
    <span class="hljs-string">"""ç²¾é€‰çš„é«˜åˆ†ä¹¦ç±åˆ—è¡¨ï¼Œæ¶µç›–å¤šç§ç±»å‹"""</span>
    <span class="hljs-keyword">return</span> [
        {<span class="hljs-string">"title"</span>: <span class="hljs-string">"äººç±»ç®€å²"</span>, <span class="hljs-string">"rating"</span>: <span class="hljs-number">9.1</span>, <span class="hljs-string">"author"</span>: <span class="hljs-string">"å°¤ç“¦å°”Â·èµ«æ‹‰åˆ©"</span>},
        {<span class="hljs-string">"title"</span>: <span class="hljs-string">"ç™¾å¹´å­¤ç‹¬"</span>, <span class="hljs-string">"rating"</span>: <span class="hljs-number">9.2</span>, <span class="hljs-string">"author"</span>: <span class="hljs-string">"åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯"</span>},
        {<span class="hljs-string">"title"</span>: <span class="hljs-string">"åŸåˆ™"</span>, <span class="hljs-string">"rating"</span>: <span class="hljs-number">8.5</span>, <span class="hljs-string">"author"</span>: <span class="hljs-string">"ç‘Â·è¾¾åˆ©æ¬§"</span>},
        <span class="hljs-comment"># æ›´å¤šä¹¦ç±...</span>
    ]
</code></pre>
<p>å¦‚æœæ²¡æœ‰æŒ‡å®šä¹¦ç±ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä»è±†ç“£ç²¾é€‰8åˆ†ä»¥ä¸Šçš„ç»å…¸ä¹¦ç±ä¸­é€‰æ‹©ï¼Œç¡®ä¿å†…å®¹è´¨é‡ã€‚</p>
<h4 data-id="heading-8">2. ä¸ªæ€§åŒ–å†…å®¹ç”Ÿæˆ</h4>
<p>æ ¹æ®ä¸åŒä¹¦ç±ç±»å‹ï¼Œä½¿ç”¨ä¸åŒçš„æ¨¡æ¿ç”Ÿæˆå†…å®¹ï¼š</p>
<ul>
<li><strong>è‡ªæˆ‘æå‡ç±»</strong>ï¼šèšç„¦å®ç”¨å»ºè®®å’Œä¸ªäººæˆé•¿</li>
<li><strong>æ–‡å­¦ç±»</strong>ï¼šæ·±åº¦åˆ†æä¸»é¢˜å’Œäººç‰©</li>
<li><strong>å“²å­¦ç±»</strong>ï¼šå¼•å‘æ€è€ƒçš„è§‚ç‚¹æç‚¼</li>
<li><strong>å†å²ç±»</strong>ï¼šèƒŒæ™¯æ¢³ç†å’Œç°å®æ„ä¹‰</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_book_content</span>(<span class="hljs-params">book_info</span>):
    <span class="hljs-string">"""æ ¹æ®ä¹¦ç±ä¿¡æ¯ç”Ÿæˆå°çº¢ä¹¦é£æ ¼çš„è¯»ä¹¦ç¬”è®°"""</span>
    <span class="hljs-comment"># åˆ†æä¹¦ç±ç±»å‹ï¼Œé€‰æ‹©åˆé€‚çš„æ¨¡æ¿</span>
    <span class="hljs-comment"># ç”Ÿæˆå¸¦emojiçš„æ ‡é¢˜</span>
    <span class="hljs-comment"># ç»„ç»‡ä¹¦ç±ä¿¡æ¯å’Œä¸ªäººè§è§£</span>
    <span class="hljs-comment"># æ·»åŠ ç›¸å…³æ ‡ç­¾</span>
</code></pre>
<h4 data-id="heading-9">3. æ™ºèƒ½é…å›¾ç³»ç»Ÿ</h4>
<p>æœ€è®©æˆ‘å…´å¥‹çš„æ˜¯å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>ä¸»é¢˜åŒ¹é…</strong>ï¼šæ ¹æ®ä¹¦ç±ç±»å‹è‡ªåŠ¨é€‰æ‹©å›¾ç‰‡é£æ ¼</li>
<li><strong>æ‰¹é‡ä¸‹è½½</strong>ï¼šä»å¤šä¸ªå…è´¹å›¾åº“APIè·å–é«˜è´¨é‡å›¾ç‰‡</li>
<li><strong>ç­›é€‰ä¼˜åŒ–</strong>ï¼šAIé€‰æ‹©æœ€é€‚åˆçš„3-5å¼ é…å›¾</li>
<li><strong>æ ¼å¼ç»Ÿä¸€</strong>ï¼šæ‰€æœ‰å›¾ç‰‡ä¿æŒå°çº¢ä¹¦é£æ ¼çš„è§†è§‰ä¸€è‡´æ€§</li>
</ol>
<h4 data-id="heading-10">4. ä¸€é”®å‘å¸ƒ</h4>
<p>ä½¿ç”¨å°çº¢ä¹¦MCPï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤å°±èƒ½å®Œæˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”¨æˆ·åªéœ€è¿™æ ·ç®€å•æŒ‡ä»¤</span>
<span class="hljs-string">"å¸®æˆ‘å‘å¸ƒã€ŠåŸåˆ™ã€‹çš„è¯»ä¹¦ç¬”è®°"</span>
</code></pre>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨å®Œæˆï¼š</p>
<ul>
<li>è±†ç“£æœç´¢ä¹¦ç±ä¿¡æ¯</li>
<li>ç”Ÿæˆä¸ªæ€§åŒ–ä¹¦è¯„</li>
<li>ä¸‹è½½ç²¾ç¾é…å›¾</li>
<li>å‘å¸ƒåˆ°å°çº¢ä¹¦</li>
</ul>
<h3 data-id="heading-11">ä½¿ç”¨ä½“éªŒ</h3>
<h4 data-id="heading-12">æç®€æ“ä½œ</h4>
<ol>
<li><strong>æŒ‡å®šä¹¦ç±</strong>ï¼š"å¸®æˆ‘å‘å¸ƒã€Šäººç±»ç®€å²ã€‹çš„è¯»ä¹¦ç¬”è®°"</li>
<li><strong>éšæœºæ¨è</strong>ï¼š"å¸®æˆ‘å‘å¸ƒä¸€ç¯‡è¯»ä¹¦ç¬”è®°"</li>
<li><strong>ç±»å‹åå¥½</strong>ï¼š"æˆ‘æƒ³è¯»ä¸€æœ¬å…³äºè‡ªæˆ‘æå‡çš„ä¹¦"</li>
</ol>
<h4 data-id="heading-13">è‡ªåŠ¨åŒ–æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·è¾“å…¥] --&gt; B{æ˜¯å¦æœ‰ä¹¦å}
    B --&gt;|æ˜¯| C[è±†ç“£æœç´¢]
    B --&gt;|å¦| D[éšæœºæ¨èé«˜åˆ†ä¹¦]
    C --&gt; E[è·å–ä¹¦ç±ä¿¡æ¯]
    D --&gt; E
    E --&gt; F[ç”Ÿæˆå†…å®¹]
    F --&gt; G[ä¸‹è½½é…å›¾]
    G --&gt; H[å‘å¸ƒåˆ°å°çº¢ä¹¦]
    H --&gt; I[å®Œæˆåˆ†äº«]
</code></pre>
<h3 data-id="heading-14">å®é™…æ•ˆæœå±•ç¤º</h3>
<h4 data-id="heading-15">ç”Ÿæˆçš„è¯»ä¹¦ç¬”è®°ç¤ºä¾‹</h4>
<p>ğŸ“– ã€ŠåŸåˆ™ã€‹| ğŸš€</p>
<p>âœ¨ è¿™æœ¬ä¹¦å°±åƒä¸€ä½æ™ºæ…§å¯¼å¸ˆï¼Œç”¨æœ€æœ´å®çš„è¯è¯­æ•™ä¼šæˆ‘ä»¬æœ€é‡è¦çš„é“ç†ã€‚</p>
<p>ğŸ“– <strong>ã€ŠåŸåˆ™ã€‹</strong>
â­ <strong>è±†ç“£è¯„åˆ†ï¼š8.5åˆ†</strong>
âœï¸ <strong>ä½œè€…ï¼šç‘Â·è¾¾åˆ©æ¬§</strong>
ğŸ¢ <strong>å‡ºç‰ˆç¤¾ï¼šä¸­ä¿¡å‡ºç‰ˆç¤¾</strong></p>
<p>ğŸ”‘ <strong>æ ¸å¿ƒè§‚ç‚¹</strong>
â€¢ æˆåŠŸä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯ä¹ æƒ¯çš„ç´¯ç§¯
â€¢ æ€ç»´æ–¹å¼å†³å®šè¡Œä¸ºæ¨¡å¼
â€¢ æŒç»­æ”¹è¿›æ¯”å®Œç¾æ›´é‡è¦</p>
<p>ğŸ’¡ <strong>å¯å‘æ€è€ƒ</strong>
è¯»è¿™æœ¬ä¹¦è®©æˆ‘æ˜ç™½ï¼ŒçœŸæ­£çš„æ”¹å˜æ¥è‡ªäºå†…å¿ƒçš„è§‰é†’...</p>
<p>#è¯»ä¹¦ç¬”è®° #å¥½ä¹¦æ¨è #ä¸ªäººæˆé•¿ #æ€ç»´æå‡</p>
<h4 data-id="heading-16">é…å›¾æ•ˆæœ</h4>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹è½½3-5å¼ ä¸ä¹¦ç±ä¸»é¢˜ç›¸å…³çš„é«˜è´¨é‡å›¾ç‰‡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¹¦ç±å°é¢ï¼ˆä¼˜å…ˆä½¿ç”¨çœŸå®å°é¢ï¼‰</li>
<li>ä¸»é¢˜ç›¸å…³é…å›¾ï¼ˆèŒåœºã€æˆåŠŸã€ä¸ªäººæˆé•¿ç­‰ï¼‰</li>
<li>ç»Ÿä¸€é£æ ¼çš„è§†è§‰è®¾è®¡</li>
</ul>
<h3 data-id="heading-17">å¼€å‘å¿ƒå¾—</h3>
<h4 data-id="heading-18">1. AIèµ‹èƒ½çš„å¨åŠ›</h4>
<p>è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°AIçš„å¼ºå¤§ï¼š</p>
<ul>
<li><strong>å†…å®¹åˆ›ä½œ</strong>ï¼šAIèƒ½å¿«é€Ÿç”Ÿæˆç¬¦åˆå¹³å°è°ƒæ€§çš„å†…å®¹</li>
<li><strong>é€»è¾‘åˆ¤æ–­</strong>ï¼šèƒ½ç†è§£ç”¨æˆ·æ„å›¾ï¼Œé€‰æ‹©åˆé€‚çš„å¤„ç†æ–¹å¼</li>
<li><strong>èµ„æºæ•´åˆ</strong>ï¼šè‡ªåŠ¨è°ƒç”¨å¤šä¸ªAPIï¼Œå®Œæˆå¤æ‚æµç¨‹</li>
</ul>
<h4 data-id="heading-19">2. MCPçš„é©æ–°æ€§</h4>
<p>å°çº¢ä¹¦MCPè®©AIå‘å¸ƒå†…å®¹æˆä¸ºå¯èƒ½ï¼Œè¿™è§£å†³äº†å†…å®¹åˆ›ä½œçš„æœ€åä¸€å…¬é‡Œé—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>AIå†™æ–‡ç« </li>
<li>AIæ‰¾å›¾ç‰‡</li>
<li>AIå‘å¹³å°</li>
<li>AIåšäº’åŠ¨</li>
</ul>
<p>æœªæ¥å·²æ¥ï¼</p>
<h4 data-id="heading-20">3. æ•ˆç‡æå‡å¯¹æ¯”</h4>

































<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>AIè‡ªåŠ¨åŒ–æ–¹å¼</th></tr></thead><tbody><tr><td>æ‰¾ä¹¦ï¼š30åˆ†é’Ÿ</td><td>1ç§’</td></tr><tr><td>å†™ç¨¿ï¼š2å°æ—¶</td><td>30ç§’</td></tr><tr><td>æ‰¾å›¾ï¼š1å°æ—¶</td><td>è‡ªåŠ¨å®Œæˆ</td></tr><tr><td>æ’ç‰ˆï¼š30åˆ†é’Ÿ</td><td>è‡ªåŠ¨æ ¼å¼åŒ–</td></tr><tr><td>å‘å¸ƒï¼šæ‰‹åŠ¨æ“ä½œ</td><td>ä¸€é”®å‘å¸ƒ</td></tr><tr><td><strong>æ€»è®¡ï¼š4å°æ—¶+</strong></td><td><strong>æ€»è®¡ï¼š1åˆ†é’Ÿ</strong></td></tr></tbody></table>
<h3 data-id="heading-21">æœªæ¥å±•æœ›</h3>
<h4 data-id="heading-22">çŸ­æœŸä¼˜åŒ–</h4>
<ol>
<li><strong>å†…å®¹è´¨é‡æå‡</strong>ï¼šåŠ å…¥æ›´å¤šä¸ªæ€§åŒ–å…ƒç´ </li>
<li><strong>å›¾ç‰‡ç¾åŒ–</strong>ï¼šæ·»åŠ æ–‡å­—æ°´å°å’Œç‰¹æ•ˆ</li>
<li><strong>äº’åŠ¨å¢å¼º</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆè¯„è®ºå›å¤æ¨¡æ¿</li>
</ol>
<h4 data-id="heading-23">é•¿æœŸè§„åˆ’</h4>
<ol>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šåŒæ­¥å‘å¸ƒåˆ°çŸ¥ä¹ã€å¾®åšç­‰</li>
<li><strong>æ•°æ®ç»Ÿè®¡</strong>ï¼šåˆ†æå†…å®¹è¡¨ç°ï¼Œä¼˜åŒ–ç­–ç•¥</li>
<li><strong>ç”¨æˆ·ç”»åƒ</strong>ï¼šæ ¹æ®ç”¨æˆ·å–œå¥½æ¨èä¹¦ç±</li>
</ol>
<h3 data-id="heading-24">é¡¹ç›®å¼€æº</h3>
<p>æˆ‘å·²ç»å°†è¿™ä¸ªé¡¹ç›®å¼€æºåˆ°äº†GitHubï¼š</p>
<p>ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZBIGBEAR%2Fxiaohongshu-book-notes" target="_blank" title="https://github.com/ZBIGBEAR/xiaohongshu-book-notes" ref="nofollow noopener noreferrer">xiaohongshu-book-notes</a></p>
<p>æ¬¢è¿ï¼š</p>
<ul>
<li>Staræ”¯æŒ</li>
<li>Forkä½¿ç”¨</li>
<li>Issueäº¤æµ</li>
<li>PRè´¡çŒ®</li>
</ul>
<p>å¦å¤–ï¼Œè¿™é‡Œé™„ä¸Šæˆ‘ä½¿ç”¨çš„å°çº¢ä¹¦mcp
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxpzouying%2Fxiaohongshu-mcp" target="_blank" title="https://github.com/xpzouying/xiaohongshu-mcp" ref="nofollow noopener noreferrer">github.com/xpzouying/xâ€¦</a></p>
<h3 data-id="heading-25">æ€»ç»“</h3>
<p>è¿™æ¬¡å¼€å‘ç»å†è®©æˆ‘æ”¶è·é¢‡ä¸°ï¼š</p>
<ol>
<li><strong>æŠ€æœ¯æˆé•¿</strong>ï¼šæ·±å…¥äº†è§£äº†MCPã€APIé›†æˆã€AIåº”ç”¨</li>
<li><strong>æ•ˆç‡é©å‘½</strong>ï¼šçœŸæ­£ä½“ä¼šåˆ°AIå¦‚ä½•æ”¹å˜å·¥ä½œæ–¹å¼</li>
<li><strong>äº§å“æ€ç»´</strong>ï¼šä»ç”¨æˆ·ç—›ç‚¹å‡ºå‘ï¼Œæ‰“é€ å®ç”¨å·¥å…·</li>
<li><strong>åˆ†äº«ç²¾ç¥</strong>ï¼šå¼€æºé¡¹ç›®ï¼Œå¸®åŠ©æ›´å¤šäºº</li>
</ol>
<p>å¦‚æœä½ ä¹Ÿæ˜¯å†…å®¹åˆ›ä½œè€…ï¼Œæˆ–è€…å¯¹AIè‡ªåŠ¨åŒ–æ„Ÿå…´è¶£ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæŠ€èƒ½ã€‚è®©æˆ‘ä»¬ä¸€èµ·ï¼Œç”¨AIçš„åŠ›é‡ï¼Œè®©å†…å®¹åˆ›ä½œæ›´ç®€å•ã€æ›´æœ‰è¶£ï¼</p>
<hr/>
<p><strong>æœ€åé€ç»™å¤§å®¶ä¸€å¥è¯</strong>ï¼š</p>
<blockquote>
<p>ä¸ä¼šAIçš„ç¨‹åºå‘˜ï¼Œå°±åƒä¸ä¼šä¸Šç½‘çš„ç”»å®¶ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±å˜åŒ–ï¼Œç”¨æŠ€æœ¯è®©ç”Ÿæ´»æ›´ç¾å¥½ï¼</p>
</blockquote>
<p><strong>ä½ çš„ä¸‹ä¸€ä¸ªè¯»ä¹¦ç¬”è®°ï¼Œè®©AIæ¥å¸®ä½ å†™ï¼</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Transformer æ¶æ„ï¼šä»åŸç†åˆ°å…¬å¼æ¨å¯¼]]></title>    <link>https://juejin.cn/post/7599053532169076777</link>    <guid>https://juejin.cn/post/7599053532169076777</guid>    <pubDate>2026-01-26T09:27:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599053532169076777" data-draft-id="7599053532169060393" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Transformer æ¶æ„ï¼šä»åŸç†åˆ°å…¬å¼æ¨å¯¼"/> <meta itemprop="keywords" content="é¢è¯•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-26T09:27:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hhang"/> <meta itemprop="url" content="https://juejin.cn/user/1994944446213274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Transformer æ¶æ„ï¼šä»åŸç†åˆ°å…¬å¼æ¨å¯¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1994944446213274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:27:20.000Z" title="Mon Jan 26 2026 09:27:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Transformer æ¶æ„æ·±åº¦è§£æï¼šä»åŸç†åˆ°å…¬å¼æ¨å¯¼</h2>
<blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œå½»åº•ç†è§£ Transformer çš„å·¥ä½œåŸç†å’Œæ ¸å¿ƒå…¬å¼ã€‚æ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯å¸Œæœ›æ·±å…¥ç†è§£ç»†èŠ‚çš„å¼€å‘è€…ï¼Œéƒ½èƒ½ä»ä¸­è·ç›Šã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å¼€ç¯‡ï¼šTransformer ä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>2017 å¹´ï¼ŒGoogle å›¢é˜Ÿå‘è¡¨äº†è®ºæ–‡ã€ŠAttention Is All You Needã€‹ï¼Œæå‡ºäº† Transformer æ¶æ„ã€‚è¿™ç¯‡è®ºæ–‡å½»åº•æ”¹å˜äº†è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸï¼Œå¹¶é€æ¸å½±å“åˆ°è®¡ç®—æœºè§†è§‰ã€è¯­éŸ³ç­‰å‡ ä¹æ‰€æœ‰ AI é¢†åŸŸã€‚</p>
<p><strong>Transformer çš„"æˆ˜ç»©"</strong>ï¼š</p>
<ul>
<li><strong>GPT ç³»åˆ—</strong>ï¼šChatGPT çš„åº•å±‚æ¶æ„</li>
<li><strong>BERT</strong>ï¼šå¼€åˆ›é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹æ—¶ä»£</li>
<li><strong>ViT</strong>ï¼šå°† Transformer åº”ç”¨åˆ°å›¾åƒè¯†åˆ«</li>
<li><strong>Stable Diffusion</strong>ï¼šAI ç»˜ç”»çš„æ ¸å¿ƒç»„ä»¶</li>
</ul>
<p>å¯ä»¥è¯´ï¼Œ<strong>æ²¡æœ‰ Transformerï¼Œå°±æ²¡æœ‰ä»Šå¤©çš„ AI å¤§æ¨¡å‹æ—¶ä»£</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€Transformer è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<h4 data-id="heading-3">2.1 ä¼ ç»Ÿåºåˆ—æ¨¡å‹çš„å›°å¢ƒ</h4>
<p>åœ¨ Transformer ä¹‹å‰ï¼Œå¤„ç†åºåˆ—æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€è¯­éŸ³ï¼‰ä¸»è¦ä¾èµ– RNNï¼ˆå¾ªç¯ç¥ç»ç½‘ç»œï¼‰å’Œ LSTMã€‚</p>
<p><strong>RNN çš„å·¥ä½œæ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">"æˆ‘ çˆ± ä¸­ å›½"

  æˆ‘ â†’ <span class="hljs-selector-attr">[RNN]</span> â†’ hâ‚
              â†“
  çˆ± â†’ <span class="hljs-selector-attr">[RNN]</span> â†’ hâ‚‚
              â†“
  ä¸­ â†’ <span class="hljs-selector-attr">[RNN]</span> â†’ hâ‚ƒ
              â†“
  å›½ â†’ <span class="hljs-selector-attr">[RNN]</span> â†’ hâ‚„
</code></pre>
<p><strong>é—®é¢˜ 1ï¼šæ— æ³•å¹¶è¡Œè®¡ç®—</strong></p>
<p>RNN å¿…é¡»æŒ‰é¡ºåºå¤„ç†æ¯ä¸ªè¯ï¼Œåä¸€ä¸ªè¯å¿…é¡»ç­‰å‰ä¸€ä¸ªè¯å¤„ç†å®Œã€‚è¿™å¯¼è‡´ï¼š</p>
<ul>
<li>è®­ç»ƒé€Ÿåº¦æ…¢</li>
<li>æ— æ³•å……åˆ†åˆ©ç”¨ GPU çš„å¹¶è¡Œèƒ½åŠ›</li>
</ul>
<p><strong>é—®é¢˜ 2ï¼šé•¿è·ç¦»ä¾èµ–å›°éš¾</strong></p>
<p>å½“å¥å­å¾ˆé•¿æ—¶ï¼Œæ—©æœŸè¯çš„ä¿¡æ¯åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä¼šé€æ¸"é—å¿˜"ã€‚æ¯”å¦‚ï¼š</p>
<blockquote>
<p>"é‚£ä¸ªæˆ‘åœ¨<strong>åŒ—äº¬</strong>ä¸Šå¤§å­¦æ—¶è®¤è¯†çš„æœ‹å‹ï¼Œç°åœ¨åœ¨<strong>é‚£ä¸ªåŸå¸‚</strong>å·¥ä½œã€‚"</p>
</blockquote>
<p>è¦ç†è§£"é‚£ä¸ªåŸå¸‚"æŒ‡çš„æ˜¯"åŒ—äº¬"ï¼Œä¿¡æ¯éœ€è¦è·¨è¶Šå¾ˆå¤šè¯ä¼ é€’ï¼ŒRNN å¾ˆéš¾åšåˆ°ã€‚</p>
<h4 data-id="heading-4">2.2 Transformer çš„è§£å†³æ–¹æ¡ˆ</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>RNN çš„å›°å¢ƒ</th><th>Transformer çš„è§£å†³</th></tr></thead><tbody><tr><td>å¹¶è¡Œè®¡ç®—</td><td>å¿…é¡»é¡ºåºå¤„ç†</td><td>æ‰€æœ‰ä½ç½®åŒæ—¶è®¡ç®—</td></tr><tr><td>é•¿è·ç¦»ä¾èµ–</td><td>ä¿¡æ¯é€æ¸è¡°å‡</td><td>æ³¨æ„åŠ›æœºåˆ¶ç›´æ¥å…³è”ä»»æ„ä¸¤ä¸ªä½ç½®</td></tr><tr><td>è®¡ç®—æ•ˆç‡</td><td>O(n) æ—¶é—´ï¼Œæ— æ³•å¹¶è¡Œ</td><td>O(1) å±‚æ•°ï¼Œé«˜åº¦å¹¶è¡Œ</td></tr></tbody></table>
<p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>ç”¨æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰æ›¿ä»£å¾ªç¯ç»“æ„</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€æ³¨æ„åŠ›æœºåˆ¶ï¼šTransformer çš„æ ¸å¿ƒ</h3>
<h4 data-id="heading-6">3.1 ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›ï¼Ÿ</h4>
<p>æƒ³è±¡ä½ åœ¨é˜…è¯»ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>"å°æ˜æŠŠ<strong>è‹¹æœ</strong>æ”¾åœ¨æ¡Œä¸Šï¼Œç„¶å<strong>åƒæ‰äº†å®ƒ</strong>ã€‚"</p>
</blockquote>
<p>å½“ä½ ç†è§£"åƒæ‰äº†å®ƒ"æ—¶ï¼Œå¤§è„‘ä¼šè‡ªåŠ¨"æ³¨æ„"åˆ°"è‹¹æœ"è¿™ä¸ªè¯ï¼Œè€Œä¸æ˜¯"æ¡Œä¸Š"æˆ–"å°æ˜"ã€‚</p>
<p>è¿™å°±æ˜¯<strong>æ³¨æ„åŠ›æœºåˆ¶</strong>ï¼šè®©æ¨¡å‹å­¦ä¼š"è¯¥å…³æ³¨å“ªäº›ä¿¡æ¯"ã€‚</p>
<h4 data-id="heading-7">3.2 æ³¨æ„åŠ›çš„æ•°å­¦ç›´è§‰</h4>
<p>æ³¨æ„åŠ›æœ¬è´¨ä¸Šæ˜¯ä¸€ç§<strong>åŠ æƒæ±‚å’Œ</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">è¾“å‡º = æƒé‡â‚ Ã— å€¼â‚ + æƒé‡â‚‚ Ã— å€¼â‚‚ + æƒé‡â‚ƒ Ã— å€¼â‚ƒ + ...
</code></pre>
<p>æƒé‡è¶Šå¤§ï¼Œè¡¨ç¤ºå¯¹åº”çš„ä¿¡æ¯è¶Šé‡è¦ã€‚å…³é”®é—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•è®¡ç®—è¿™äº›æƒé‡ï¼Ÿ</strong></p>
<h4 data-id="heading-8">3.3 Queryã€Keyã€Valueï¼šæ³¨æ„åŠ›çš„ä¸‰è¦ç´ </h4>
<p>Transformer å¼•å…¥äº†ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>å«ä¹‰</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>Query (Q)</strong></td><td>æŸ¥è¯¢ï¼šæˆ‘æƒ³æ‰¾ä»€ä¹ˆï¼Ÿ</td><td>ä½ åœ¨æœç´¢å¼•æ“è¾“å…¥çš„å…³é”®è¯</td></tr><tr><td><strong>Key (K)</strong></td><td>é”®ï¼šè¿™ä¸ªä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ç½‘é¡µçš„æ ‡é¢˜/æè¿°</td></tr><tr><td><strong>Value (V)</strong></td><td>å€¼ï¼šè¿™ä¸ªä¸œè¥¿çš„å†…å®¹</td><td>ç½‘é¡µçš„å®é™…å†…å®¹</td></tr></tbody></table>
<p><strong>æœç´¢å¼•æ“ç±»æ¯”</strong>ï¼š</p>
<ol>
<li>ä½ è¾“å…¥æœç´¢å…³é”®è¯ï¼ˆQueryï¼‰</li>
<li>æœç´¢å¼•æ“ç”¨å…³é”®è¯å’Œç½‘é¡µæ ‡é¢˜ï¼ˆKeyï¼‰åšåŒ¹é…</li>
<li>åŒ¹é…åº¦é«˜çš„ç½‘é¡µï¼ˆValueï¼‰æ’åœ¨å‰é¢</li>
<li>ä½ çœ‹åˆ°çš„æ˜¯åŠ æƒåçš„ç»“æœ</li>
</ol>
<hr/>
<h3 data-id="heading-9">å››ã€è‡ªæ³¨æ„åŠ›æœºåˆ¶è¯¦è§£ä¸å…¬å¼æ¨å¯¼</h3>
<h4 data-id="heading-10">4.1 è‡ªæ³¨æ„åŠ›ï¼ˆSelf-Attentionï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>"è‡ªæ³¨æ„åŠ›"ä¸­çš„"è‡ª"è¡¨ç¤ºï¼š<strong>åºåˆ—ä¸­çš„æ¯ä¸ªä½ç½®éƒ½å’Œåºåˆ—ä¸­çš„æ‰€æœ‰ä½ç½®ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰è®¡ç®—æ³¨æ„åŠ›</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css">è¾“å…¥åºåˆ—ï¼š<span class="hljs-selector-attr">[æˆ‘, çˆ±, ä¸­, å›½]</span>

          æˆ‘    çˆ±    ä¸­    å›½
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  æˆ‘ â†’ â”‚ <span class="hljs-number">0.4</span>   <span class="hljs-number">0.3</span>   <span class="hljs-number">0.1</span>   <span class="hljs-number">0.2</span> â”‚ â†’ æˆ‘çš„æ–°è¡¨ç¤º
  çˆ± â†’ â”‚ <span class="hljs-number">0.2</span>   <span class="hljs-number">0.5</span>   <span class="hljs-number">0.2</span>   <span class="hljs-number">0.1</span> â”‚ â†’ çˆ±çš„æ–°è¡¨ç¤º
  ä¸­ â†’ â”‚ <span class="hljs-number">0.1</span>   <span class="hljs-number">0.2</span>   <span class="hljs-number">0.4</span>   <span class="hljs-number">0.3</span> â”‚ â†’ ä¸­çš„æ–°è¡¨ç¤º
  å›½ â†’ â”‚ <span class="hljs-number">0.1</span>   <span class="hljs-number">0.1</span>   <span class="hljs-number">0.3</span>   <span class="hljs-number">0.5</span> â”‚ â†’ å›½çš„æ–°è¡¨ç¤º
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              æ³¨æ„åŠ›æƒé‡çŸ©é˜µ
</code></pre>
<p>æ¯ä¸ªè¯éƒ½èƒ½"çœ‹åˆ°"å…¶ä»–æ‰€æœ‰è¯ï¼Œå¹¶æ ¹æ®ç›¸å…³æ€§åˆ†é…æƒé‡ã€‚</p>
<h4 data-id="heading-11">4.2 å…¬å¼æ¨å¯¼ï¼šä»è¾“å…¥åˆ°è¾“å‡º</h4>
<p>è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¨å¯¼è‡ªæ³¨æ„åŠ›çš„å®Œæ•´å…¬å¼ã€‚</p>
<p><strong>Step 1ï¼šå‡†å¤‡è¾“å…¥</strong></p>
<p>å‡è®¾è¾“å…¥åºåˆ—æœ‰ n ä¸ªè¯ï¼Œæ¯ä¸ªè¯ç”¨ d ç»´å‘é‡è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥çŸ©é˜µ X âˆˆ â„â¿Ë£áµˆ

ä¾‹å¦‚ï¼š4ä¸ªè¯ï¼Œæ¯ä¸ªè¯64ç»´
<span class="hljs-attr">X</span> = [xâ‚]   n=<span class="hljs-number">4</span>
    <span class="hljs-section">[xâ‚‚]</span>   
    <span class="hljs-section">[xâ‚ƒ]</span>   <span class="hljs-attr">d</span>=<span class="hljs-number">64</span>
    <span class="hljs-section">[xâ‚„]</span>   
</code></pre>
<p><strong>Step 2ï¼šç”Ÿæˆ Qã€Kã€V</strong></p>
<p>é€šè¿‡ä¸‰ä¸ªå¯å­¦ä¹ çš„æƒé‡çŸ©é˜µï¼Œå°†è¾“å…¥è½¬æ¢ä¸º Queryã€Keyã€Valueï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Q</span> = X Â· Wq    (Wq âˆˆ â„áµˆË£áµˆáµ)
<span class="hljs-attr">K</span> = X Â· Wk    (Wk âˆˆ â„áµˆË£áµˆáµ)  
<span class="hljs-attr">V</span> = X Â· Wv    (Wv âˆˆ â„áµˆË£áµˆáµ›)
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>Wqã€Wkã€Wv æ˜¯å¯å­¦ä¹ çš„å‚æ•°çŸ©é˜µ</li>
<li>dâ‚– æ˜¯ Key/Query çš„ç»´åº¦</li>
<li>dáµ¥ æ˜¯ Value çš„ç»´åº¦ï¼ˆé€šå¸¸ dâ‚– = dáµ¥ = dï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸‰ä¸ªä¸åŒçš„çŸ©é˜µï¼Ÿ</strong></p>
<p>è¿™æ · Qã€Kã€V å¯ä»¥ä»ä¸åŒè§’åº¦ç¼–ç ä¿¡æ¯ï¼š</p>
<ul>
<li>Qï¼šè¿™ä¸ªè¯"æƒ³è¦æŸ¥æ‰¾"ä»€ä¹ˆ</li>
<li>Kï¼šè¿™ä¸ªè¯"å¯¹å¤–å‘ˆç°"ä»€ä¹ˆ</li>
<li>Vï¼šè¿™ä¸ªè¯"å®é™…åŒ…å«"ä»€ä¹ˆ</li>
</ul>
<p><strong>Step 3ï¼šè®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</strong></p>
<p>ç”¨ Query å’Œ Key çš„ç‚¹ç§¯è¡¡é‡ç›¸å…³æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">åˆ†æ•°çŸ©é˜µ <span class="hljs-attr">S</span> = Q Â· Káµ€

S âˆˆ â„â¿Ë£â¿
</code></pre>
<p>S[i][j] è¡¨ç¤ºç¬¬ i ä¸ªè¯å¯¹ç¬¬ j ä¸ªè¯çš„"å…³æ³¨ç¨‹åº¦"ã€‚</p>
<p><strong>ç‚¹ç§¯çš„ç›´è§‰</strong>ï¼šä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯è¶Šå¤§ï¼Œè¯´æ˜å®ƒä»¬æ–¹å‘è¶Šä¸€è‡´ï¼Œå³è¶Šç›¸ä¼¼ã€‚</p>
<p><strong>Step 4ï¼šç¼©æ”¾ï¼ˆScalingï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">S_scaled</span> = S / âˆšdâ‚–
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦é™¤ä»¥ âˆšdâ‚–ï¼Ÿ</strong> è¿™æ˜¯å…³é”®çš„ç»†èŠ‚ï¼</p>
<p>å‡è®¾ Q å’Œ K çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å‡å€¼ä¸º 0ã€æ–¹å·®ä¸º 1 çš„ç‹¬ç«‹éšæœºå˜é‡ã€‚é‚£ä¹ˆç‚¹ç§¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">q</span> Â· k = Î£áµ¢ <span class="hljs-selector-tag">q</span>áµ¢ Ã— káµ¢
</code></pre>
<p>è¿™ä¸ªå’Œçš„æ–¹å·® = dâ‚–ï¼ˆdâ‚– ä¸ªç‹¬ç«‹éšæœºå˜é‡ç›¸åŠ ï¼‰</p>
<p>å½“ dâ‚– å¾ˆå¤§æ—¶ï¼ˆæ¯”å¦‚ 64 æˆ– 512ï¼‰ï¼Œç‚¹ç§¯çš„å€¼ä¼šéå¸¸å¤§ã€‚è¿™ä¼šå¯¼è‡´ softmax åçš„åˆ†å¸ƒå˜å¾—æç«¯ï¼ˆæ¥è¿‘ one-hotï¼‰ï¼Œæ¢¯åº¦æ¶ˆå¤±ã€‚</p>
<p>é™¤ä»¥ âˆšdâ‚– å¯ä»¥è®©æ–¹å·®å›åˆ° 1ï¼Œä¿æŒæ•°å€¼ç¨³å®šã€‚</p>
<p><strong>Step 5ï¼šSoftmax å½’ä¸€åŒ–</strong></p>
<pre><code class="hljs language-ini" lang="ini">æ³¨æ„åŠ›æƒé‡ <span class="hljs-attr">A</span> = softmax(S_scaled)
</code></pre>
<p>å¯¹æ¯ä¸€è¡Œåš softmaxï¼Œç¡®ä¿æƒé‡å’Œä¸º 1ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> = exp(S_scaled<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span>) / Î£â‚– exp(S_scaled<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[k]</span>)
</code></pre>
<p><strong>Step 6ï¼šåŠ æƒæ±‚å’Œå¾—åˆ°è¾“å‡º</strong></p>
<pre><code class="hljs language-css" lang="css">è¾“å‡º = <span class="hljs-selector-tag">A</span> Â· V
</code></pre>
<p>æ¯ä¸ªä½ç½®çš„è¾“å‡ºæ˜¯æ‰€æœ‰ Value çš„åŠ æƒå’Œï¼Œæƒé‡å°±æ˜¯æ³¨æ„åŠ›åˆ†æ•°ã€‚</p>
<h4 data-id="heading-12">4.3 å®Œæ•´å…¬å¼</h4>
<p>å°†ä¸Šè¿°æ­¥éª¤æ•´åˆï¼Œå¾—åˆ°è‘—åçš„<strong>ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›å…¬å¼</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         QKáµ€                â”‚
<span class="hljs-built_in">Attention</span>(Q,K,V) =  â”‚ <span class="hljs-built_in">softmax</span>(â”€â”€â”€â”€) Â· V          â”‚
                    â”‚         âˆšdâ‚–               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ç”¨æ›´è§„èŒƒçš„æ•°å­¦ç¬¦å·è¡¨ç¤ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Attention</mtext><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>softmax</mtext><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Attention</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4684em;vertical-align:-0.95em;"/><span class="mord text"><span class="mord">softmax</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></div>
<h4 data-id="heading-13">4.4 è®¡ç®—ç¤ºä¾‹</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-less" lang="less">è¾“å…¥ï¼š<span class="hljs-number">2</span>ä¸ªè¯ï¼Œæ¯ä¸ªè¯<span class="hljs-number">3</span>ç»´

<span class="hljs-selector-tag">X</span> = <span class="hljs-selector-attr">[1, 0, 1]</span>    â† è¯<span class="hljs-number">1</span>
    <span class="hljs-selector-attr">[0, 1, 1]</span>    â† è¯<span class="hljs-number">2</span>

å‡è®¾ <span class="hljs-selector-tag">Wq</span> = <span class="hljs-selector-tag">Wk</span> = <span class="hljs-selector-tag">Wv</span> = <span class="hljs-selector-tag">I</span>ï¼ˆå•ä½çŸ©é˜µï¼Œç®€åŒ–è®¡ç®—ï¼‰

åˆ™ <span class="hljs-selector-tag">Q</span> = <span class="hljs-selector-tag">K</span> = <span class="hljs-selector-tag">V</span> = <span class="hljs-selector-tag">X</span>

<span class="hljs-selector-tag">Step</span> <span class="hljs-number">1</span>: è®¡ç®— <span class="hljs-selector-tag">QK</span>áµ€
<span class="hljs-selector-tag">QK</span>áµ€ = <span class="hljs-selector-attr">[1,0,1]</span> <span class="hljs-selector-attr">[1, 0]</span>   = <span class="hljs-selector-attr">[1Ã—1+0Ã—0+1Ã—1, 1Ã—0+0Ã—1+1Ã—1]</span> = <span class="hljs-selector-attr">[2, 1]</span>
      <span class="hljs-selector-attr">[0,1,1]</span> <span class="hljs-selector-attr">[0, 1]</span>     <span class="hljs-selector-attr">[0Ã—1+1Ã—0+1Ã—1, 0Ã—0+1Ã—1+1Ã—1]</span>   <span class="hljs-selector-attr">[1, 2]</span>
              <span class="hljs-selector-attr">[1, 1]</span>

<span class="hljs-selector-tag">Step</span> <span class="hljs-number">2</span>: ç¼©æ”¾ï¼ˆ<span class="hljs-selector-tag">d</span>â‚–=<span class="hljs-number">3</span>ï¼‰
<span class="hljs-selector-tag">S_scaled</span> = <span class="hljs-selector-attr">[2, 1]</span> / âˆš<span class="hljs-number">3</span> â‰ˆ <span class="hljs-selector-attr">[1.15, 0.58]</span>
           <span class="hljs-selector-attr">[1, 2]</span>         <span class="hljs-selector-attr">[0.58, 1.15]</span>

<span class="hljs-selector-tag">Step</span> <span class="hljs-number">3</span>: <span class="hljs-selector-tag">Softmax</span>ï¼ˆæŒ‰è¡Œï¼‰
ç¬¬<span class="hljs-number">1</span>è¡Œï¼š<span class="hljs-selector-tag">exp</span>(<span class="hljs-number">1.15</span>)/(<span class="hljs-built_in">exp</span>(<span class="hljs-number">1.15</span>)+<span class="hljs-built_in">exp</span>(<span class="hljs-number">0.58</span>)) â‰ˆ <span class="hljs-number">0.64</span>, <span class="hljs-number">0.36</span>
ç¬¬<span class="hljs-number">2</span>è¡Œï¼š<span class="hljs-selector-tag">exp</span>(<span class="hljs-number">0.58</span>)/(<span class="hljs-built_in">exp</span>(<span class="hljs-number">0.58</span>)+<span class="hljs-built_in">exp</span>(<span class="hljs-number">1.15</span>)) â‰ˆ <span class="hljs-number">0.36</span>, <span class="hljs-number">0.64</span>

<span class="hljs-selector-tag">A</span> â‰ˆ <span class="hljs-selector-attr">[0.64, 0.36]</span>
    <span class="hljs-selector-attr">[0.36, 0.64]</span>

<span class="hljs-selector-tag">Step</span> <span class="hljs-number">4</span>: è®¡ç®—è¾“å‡º
è¾“å‡º = <span class="hljs-selector-tag">A</span> Â· <span class="hljs-selector-tag">V</span> = <span class="hljs-selector-attr">[0.64, 0.36]</span> Ã— <span class="hljs-selector-attr">[1, 0, 1]</span>
               <span class="hljs-selector-attr">[0.36, 0.64]</span>   <span class="hljs-selector-attr">[0, 1, 1]</span>

è¯<span class="hljs-number">1</span>çš„æ–°è¡¨ç¤º = <span class="hljs-number">0.64</span>Ã—<span class="hljs-selector-attr">[1,0,1]</span> + <span class="hljs-number">0.36</span>Ã—<span class="hljs-selector-attr">[0,1,1]</span> = <span class="hljs-selector-attr">[0.64, 0.36, 1.0]</span>
è¯<span class="hljs-number">2</span>çš„æ–°è¡¨ç¤º = <span class="hljs-number">0.36</span>Ã—<span class="hljs-selector-attr">[1,0,1]</span> + <span class="hljs-number">0.64</span>Ã—<span class="hljs-selector-attr">[0,1,1]</span> = <span class="hljs-selector-attr">[0.36, 0.64, 1.0]</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªè¯çš„æ–°è¡¨ç¤ºèåˆäº†å…¶ä»–æ‰€æœ‰è¯çš„ä¿¡æ¯ã€‚</p>
<hr/>
<h3 data-id="heading-14">äº”ã€å¤šå¤´æ³¨æ„åŠ›ï¼šå¹¶è¡Œçš„å¤šè§†è§’å…³æ³¨</h3>
<h4 data-id="heading-15">5.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šå¤´æ³¨æ„åŠ›ï¼Ÿ</h4>
<p>å•ä¸ªæ³¨æ„åŠ›å¤´åªèƒ½å­¦ä¹ ä¸€ç§"å…³æ³¨æ¨¡å¼"ã€‚ä½†åœ¨ç†è§£è¯­è¨€æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åŒæ—¶å…³æ³¨å¤šç§å…³ç³»ï¼š</p>

























<table><thead><tr><th>å…³æ³¨è§’åº¦</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>è¯­æ³•ç»“æ„</td><td>ä¸»è¯­-è°“è¯­-å®¾è¯­</td></tr><tr><td>æŒ‡ä»£å…³ç³»</td><td>"å®ƒ"æŒ‡ä»£ä»€ä¹ˆ</td></tr><tr><td>è¯­ä¹‰ç›¸ä¼¼</td><td>åŒä¹‰è¯ã€è¿‘ä¹‰è¯</td></tr><tr><td>ä½ç½®å…³ç³»</td><td>ç›¸é‚»è¯çš„å…³è”</td></tr></tbody></table>
<p><strong>å¤šå¤´æ³¨æ„åŠ›</strong>è®©æ¨¡å‹åŒæ—¶å­¦ä¹ å¤šç§æ³¨æ„åŠ›æ¨¡å¼ã€‚</p>
<h4 data-id="heading-16">5.2 å¤šå¤´æ³¨æ„åŠ›çš„ç»“æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€â–ºâ”‚ æ³¨æ„åŠ›å¤´ 1  â”‚â”€â”€â”€â”€â”
              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
è¾“å…¥ X â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–ºâ”‚ æ³¨æ„åŠ›å¤´ 2  â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â–º Concat â”€â”€â–º çº¿æ€§å˜æ¢ â”€â”€â–º è¾“å‡º
              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
              â””â”€â”€â”€â”€â–ºâ”‚ æ³¨æ„åŠ›å¤´ h  â”‚â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-17">5.3 å…¬å¼æ¨å¯¼</h4>
<p><strong>Step 1ï¼šåˆ†å¤´è®¡ç®—</strong></p>
<p>å¯¹äºç¬¬ i ä¸ªå¤´ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">headáµ¢ = <span class="hljs-built_in">Attention</span>(QÂ·Wqâ±, KÂ·Wkâ±, VÂ·Wvâ±)
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>Wqâ±, Wkâ± âˆˆ â„áµˆË£â½áµˆ/Ê°â¾</li>
<li>Wvâ± âˆˆ â„áµˆË£â½áµˆ/Ê°â¾</li>
<li>h æ˜¯å¤´çš„æ•°é‡</li>
</ul>
<p><strong>å…³é”®è®¾è®¡</strong>ï¼šæ¯ä¸ªå¤´çš„ç»´åº¦æ˜¯ d/hï¼Œæ‰€ä»¥ h ä¸ªå¤´æ‹¼æ¥åç»´åº¦è¿˜æ˜¯ dã€‚</p>
<p><strong>Step 2ï¼šæ‹¼æ¥æ‰€æœ‰å¤´</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">MultiHead</span>(Q, K, V) = <span class="hljs-built_in">Concat</span>(headâ‚, headâ‚‚, ..., headâ‚•) Â· Wáµ’
</code></pre>
<p>å…¶ä¸­ Wáµ’ âˆˆ â„áµˆË£áµˆ æ˜¯è¾“å‡ºæŠ•å½±çŸ©é˜µã€‚</p>
<h4 data-id="heading-18">5.4 å¤šå¤´æ³¨æ„åŠ›çš„å®Œæ•´å…¬å¼</h4>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>MultiHead</mtext><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>Concat</mtext><mo stretchy="false">(</mo><msub><mtext>head</mtext><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mtext>head</mtext><mi>h</mi></msub><mo stretchy="false">)</mo><msup><mi>W</mi><mi>O</mi></msup></mrow><annotation encoding="application/x-tex">\text{MultiHead}(Q, K, V) = \text{Concat}(\text{head}_1, ..., \text{head}_h) W^O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">MultiHead</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Concat</span></span><span class="mopen">(</span><span class="mord"><span class="mord text"><span class="mord">head</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord text"><span class="mord">head</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>whereÂ head</mtext><mi>i</mi></msub><mo>=</mo><mtext>Attention</mtext><mo stretchy="false">(</mo><mi>Q</mi><msubsup><mi>W</mi><mi>i</mi><mi>Q</mi></msubsup><mo separator="true">,</mo><mi>K</mi><msubsup><mi>W</mi><mi>i</mi><mi>K</mi></msubsup><mo separator="true">,</mo><mi>V</mi><msubsup><mi>W</mi><mi>i</mi><mi>V</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{where head}_i = \text{Attention}(QW_i^Q, KW_i^K, VW_i^V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord text"><span class="mord">whereÂ head</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2361em;vertical-align:-0.2769em;"/><span class="mord text"><span class="mord">Attention</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9592em;"><span style="top:-2.4231em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<h4 data-id="heading-19">5.5 ä¸€ä¸ªç›´è§‚çš„ç†è§£</h4>
<p>æŠŠå¤šå¤´æ³¨æ„åŠ›æƒ³è±¡æˆ<strong>å¤šä¸ªä¸“å®¶åŒæ—¶çœ‹åŒä¸€ä¸ªé—®é¢˜</strong>ï¼š</p>
<ul>
<li>ä¸“å®¶ 1 å…³æ³¨è¯­æ³•ç»“æ„</li>
<li>ä¸“å®¶ 2 å…³æ³¨æŒ‡ä»£å…³ç³»</li>
<li>ä¸“å®¶ 3 å…³æ³¨æƒ…æ„Ÿå€¾å‘</li>
<li>...</li>
</ul>
<p>æœ€åæŠŠæ‰€æœ‰ä¸“å®¶çš„æ„è§ç»¼åˆèµ·æ¥ï¼Œå¾—åˆ°æ›´å…¨é¢çš„ç†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-20">å…­ã€Transformer çš„å®Œæ•´æ¶æ„</h3>
<h4 data-id="heading-21">6.1 æ•´ä½“ç»“æ„</h4>
<pre><code class="hljs language-css" lang="css">               è¾“å…¥                              è¾“å‡º
                â†“                                 â†“
         <span class="hljs-selector-attr">[è¯åµŒå…¥ + ä½ç½®ç¼–ç ]</span>                 <span class="hljs-selector-attr">[è¯åµŒå…¥ + ä½ç½®ç¼–ç ]</span>
                â†“                                 â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Encoder   â”‚                   â”‚   Decoder   â”‚
         â”‚  Ã—N å±‚      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Ã—N å±‚      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â†“
                                           <span class="hljs-selector-attr">[çº¿æ€§å±‚ + Softmax]</span>
                                                  â†“
                                              é¢„æµ‹è¾“å‡º
</code></pre>
<h4 data-id="heading-22">6.2 ç¼–ç å™¨ï¼ˆEncoderï¼‰ç»“æ„</h4>
<p>æ¯ä¸ªç¼–ç å™¨å±‚åŒ…å«ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">        è¾“å…¥
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å¤šå¤´è‡ªæ³¨æ„åŠ› â”‚â—„â”€â”€â”€â”€â”
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ æ®‹å·®è¿æ¥
         â†“             â”‚
       <span class="hljs-keyword">Add</span> <span class="hljs-operator">&amp;</span> Norm â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å‰é¦ˆç¥ç»ç½‘ç»œ â”‚â—„â”€â”€â”€â”€â”
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ æ®‹å·®è¿æ¥
         â†“             â”‚
       <span class="hljs-keyword">Add</span> <span class="hljs-operator">&amp;</span> Norm â”€â”€â”€â”€â”€â”˜
         â†“
        è¾“å‡º
</code></pre>
<p><strong>æ®‹å·®è¿æ¥ï¼ˆAddï¼‰</strong>ï¼šè§£å†³æ·±å±‚ç½‘ç»œè®­ç»ƒå›°éš¾çš„é—®é¢˜ï¼ˆå’Œ ResNet æ€æƒ³ä¸€è‡´ï¼‰</p>
<p><strong>å±‚å½’ä¸€åŒ–ï¼ˆNormï¼‰</strong>ï¼šç¨³å®šè®­ç»ƒï¼ŒåŠ é€Ÿæ”¶æ•›</p>
<h4 data-id="heading-23">6.3 è§£ç å™¨ï¼ˆDecoderï¼‰ç»“æ„</h4>
<p>è§£ç å™¨æ¯”ç¼–ç å™¨å¤šäº†ä¸€ä¸ª<strong>äº¤å‰æ³¨æ„åŠ›å±‚</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">        è¾“å…¥ï¼ˆå·²ç”Ÿæˆçš„éƒ¨åˆ†ï¼‰
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ å¸¦æ©ç çš„å¤šå¤´è‡ªæ³¨æ„åŠ› â”‚â—„â”€â”€â”€â”€â”
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â†“                  â”‚
       <span class="hljs-keyword">Add</span> <span class="hljs-operator">&amp;</span> Norm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  äº¤å‰æ³¨æ„åŠ›      â”‚â—„â”€â”€â”€â”€â”  â†â”€â”€ æ¥æ”¶ç¼–ç å™¨çš„è¾“å‡º
    â”‚  (Encoder<span class="hljs-operator">-</span>Decoder)â”‚     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â†“                  â”‚
       <span class="hljs-keyword">Add</span> <span class="hljs-operator">&amp;</span> Norm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å‰é¦ˆç¥ç»ç½‘ç»œ â”‚â—„â”€â”€â”€â”€â”
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â†“             â”‚
       <span class="hljs-keyword">Add</span> <span class="hljs-operator">&amp;</span> Norm â”€â”€â”€â”€â”€â”˜
         â†“
        è¾“å‡º
</code></pre>
<p><strong>å¸¦æ©ç çš„è‡ªæ³¨æ„åŠ›ï¼ˆMasked Self-Attentionï¼‰</strong>ï¼š</p>
<p>åœ¨ç”Ÿæˆæ—¶ï¼Œæ¨¡å‹åªèƒ½çœ‹åˆ°å·²ç»ç”Ÿæˆçš„è¯ï¼Œä¸èƒ½"å·çœ‹"æœªæ¥çš„è¯ã€‚æ©ç å®ç°è¿™ä¸€é™åˆ¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ©ç çŸ©é˜µï¼ˆä¸Šä¸‰è§’ä¸º-âˆï¼‰ï¼š
     è¯<span class="hljs-number">1</span>  è¯<span class="hljs-number">2</span>  è¯<span class="hljs-number">3</span>  è¯<span class="hljs-number">4</span>
è¯<span class="hljs-number">1</span> <span class="hljs-selector-attr">[ 0   -âˆ  -âˆ  -âˆ ]</span>
è¯<span class="hljs-number">2</span> <span class="hljs-selector-attr">[ 0    0  -âˆ  -âˆ ]</span>
è¯<span class="hljs-number">3</span> <span class="hljs-selector-attr">[ 0    0   0  -âˆ ]</span>
è¯<span class="hljs-number">4</span> <span class="hljs-selector-attr">[ 0    0   0   0 ]</span>

åŠ åˆ°æ³¨æ„åŠ›åˆ†æ•°ä¸Šåï¼Œ-âˆ ç»è¿‡ softmax å˜æˆ <span class="hljs-number">0</span>ï¼Œå³å®Œå…¨ä¸å…³æ³¨æœªæ¥çš„è¯ã€‚
</code></pre>
<hr/>
<h3 data-id="heading-24">ä¸ƒã€ä½ç½®ç¼–ç ï¼šè®©æ¨¡å‹çŸ¥é“é¡ºåº</h3>
<h4 data-id="heading-25">7.1 ä¸ºä»€ä¹ˆéœ€è¦ä½ç½®ç¼–ç ï¼Ÿ</h4>
<p>æ³¨æ„åŠ›æœºåˆ¶æ˜¯<strong>æ’åˆ—ä¸å˜çš„</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Attention</span>("æˆ‘çˆ±ä¸­å›½") = <span class="hljs-built_in">Attention</span>("å›½ä¸­çˆ±æˆ‘")  ï¼Ÿ
</code></pre>
<p>å¦‚æœä¸åŠ å¤„ç†ï¼Œæ¨¡å‹æ— æ³•åŒºåˆ†è¯çš„é¡ºåºï¼ä½†è¯­è¨€ä¸­é¡ºåºè‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-26">7.2 ä½ç½®ç¼–ç çš„è®¾è®¡</h4>
<p>Transformer ä½¿ç”¨<strong>æ­£å¼¦/ä½™å¼¦ä½ç½®ç¼–ç </strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">PE</span>(pos, <span class="hljs-number">2</span>i)   = <span class="hljs-built_in">sin</span>(pos / <span class="hljs-number">10000</span>^(<span class="hljs-number">2</span>i/d))
<span class="hljs-built_in">PE</span>(pos, <span class="hljs-number">2</span>i+<span class="hljs-number">1</span>) = <span class="hljs-built_in">cos</span>(pos / <span class="hljs-number">10000</span>^(<span class="hljs-number">2</span>i/d))
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>posï¼šè¯åœ¨åºåˆ—ä¸­çš„ä½ç½®ï¼ˆ0, 1, 2, ...ï¼‰</li>
<li>iï¼šç»´åº¦çš„ç´¢å¼•ï¼ˆ0, 1, 2, ..., d/2-1ï¼‰</li>
<li>dï¼šç¼–ç ç»´åº¦</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆç”¨æ­£å¼¦/ä½™å¼¦ï¼Ÿ</strong></p>
<ol>
<li><strong>æœ‰ç•Œæ€§</strong>ï¼šå€¼å§‹ç»ˆåœ¨ [-1, 1] èŒƒå›´å†…</li>
<li><strong>å‘¨æœŸæ€§</strong>ï¼šå¯ä»¥è¡¨è¾¾ç›¸å¯¹ä½ç½®å…³ç³»</li>
<li><strong>å¯å¤–æ¨</strong>ï¼šç†è®ºä¸Šå¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„åºåˆ—</li>
</ol>
<p><strong>å…³é”®æ€§è´¨</strong>ï¼šå¯¹äºå›ºå®šçš„åç§»é‡ kï¼ŒPE(pos+k) å¯ä»¥è¡¨ç¤ºä¸º PE(pos) çš„çº¿æ€§å‡½æ•°ã€‚è¿™è®©æ¨¡å‹å®¹æ˜“å­¦ä¹ ç›¸å¯¹ä½ç½®å…³ç³»ã€‚</p>
<h4 data-id="heading-27">7.3 ä½ç½®ç¼–ç çš„å¯è§†åŒ–</h4>
<pre><code class="hljs language-markdown" lang="markdown">ä½ç½®
  â†“
  0  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  1  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âˆ™
  2  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âˆ™âˆ™
  3  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âˆ™âˆ™âˆ™
  ...
<span class="hljs-code">     ä½é¢‘ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ é«˜é¢‘
           ç»´åº¦æ–¹å‘
</span></code></pre>
<ul>
<li>ä½ç»´åº¦å˜åŒ–æ…¢ï¼ˆè¡¨ç¤ºç²—ç²’åº¦ä½ç½®ï¼‰</li>
<li>é«˜ç»´åº¦å˜åŒ–å¿«ï¼ˆè¡¨ç¤ºç»†ç²’åº¦ä½ç½®ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-28">å…«ã€å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFFNï¼‰</h3>
<p>æ¯ä¸ª Transformer å±‚è¿˜åŒ…å«ä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">FFN</span>(x) = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, xWâ‚ + bâ‚)Wâ‚‚ + <span class="hljs-selector-tag">b</span>â‚‚
</code></pre>
<p>æˆ–è€…ç”¨æ›´ç°ä»£çš„ GELU æ¿€æ´»ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">FFN</span>(x) = <span class="hljs-built_in">GELU</span>(xWâ‚ + bâ‚)Wâ‚‚ + <span class="hljs-selector-tag">b</span>â‚‚
</code></pre>
<h4 data-id="heading-29">ç»“æ„</h4>
<pre><code class="hljs language-css" lang="css">è¾“å…¥ï¼ˆd ç»´ï¼‰
    â†“
<span class="hljs-selector-attr">[çº¿æ€§å±‚]</span> â†’ d â†’ <span class="hljs-number">4</span>dï¼ˆæ‰©å±•ï¼‰
    â†“
<span class="hljs-selector-attr">[æ¿€æ´»å‡½æ•° ReLU/GELU]</span>
    â†“
<span class="hljs-selector-attr">[çº¿æ€§å±‚]</span> â†’ <span class="hljs-number">4</span>d â†’ dï¼ˆæ”¶ç¼©ï¼‰
    â†“
è¾“å‡ºï¼ˆd ç»´ï¼‰
</code></pre>
<p><strong>FFN çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>å¢åŠ æ¨¡å‹å®¹é‡</li>
<li>å¼•å…¥éçº¿æ€§</li>
<li>æ¯ä¸ªä½ç½®ç‹¬ç«‹å¤„ç†ï¼ˆå¯å¹¶è¡Œï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä¸­é—´å±‚è¦æ‰©å¤§ 4 å€ï¼Ÿ</strong></p>
<p>è¿™æ˜¯ç»éªŒè®¾è®¡ã€‚æ‰©å¤§ç»´åº¦å¢åŠ äº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ï¼Œæ˜¯å‚æ•°é‡å’Œæ•ˆæœçš„æƒè¡¡ã€‚</p>
<hr/>
<h3 data-id="heading-30">ä¹ã€è®­ç»ƒä¸æ¨ç†</h3>
<h4 data-id="heading-31">9.1 è®­ç»ƒè¿‡ç¨‹</h4>
<p><strong>ä»»åŠ¡</strong>ï¼šç»™å®šè¾“å…¥åºåˆ—ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯</p>
<p><strong>æŸå¤±å‡½æ•°</strong>ï¼šäº¤å‰ç†µ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Loss</span> = -Î£ log P(æ­£ç¡®è¯ | ä¸Šä¸‹æ–‡)
</code></pre>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li><strong>å­¦ä¹ ç‡é¢„çƒ­ï¼ˆWarmupï¼‰</strong>ï¼šå¼€å§‹æ—¶ç”¨å°å­¦ä¹ ç‡ï¼Œé€æ¸å¢å¤§ï¼Œç„¶åå†è¡°å‡</li>
<li><strong>Dropout</strong>ï¼šéšæœºä¸¢å¼ƒéƒ¨åˆ†ç¥ç»å…ƒï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ</li>
<li><strong>æ ‡ç­¾å¹³æ»‘ï¼ˆLabel Smoothingï¼‰</strong>ï¼šè½¯åŒ–ç›®æ ‡åˆ†å¸ƒï¼Œæé«˜æ³›åŒ–èƒ½åŠ›</li>
</ul>
<h4 data-id="heading-32">9.2 æ¨ç†è¿‡ç¨‹ï¼ˆç”Ÿæˆï¼‰</h4>
<p><strong>è‡ªå›å½’ç”Ÿæˆ</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">è¾“å…¥ï¼š<span class="hljs-string">"ä»Šå¤©å¤©æ°”"</span>

æ­¥éª¤<span class="hljs-number">1</span>ï¼šæ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ â†’ <span class="hljs-string">"å¾ˆ"</span>
æ­¥éª¤<span class="hljs-number">2</span>ï¼šè¾“å…¥å˜æˆ <span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆ"</span>ï¼Œé¢„æµ‹ â†’ <span class="hljs-string">"å¥½"</span>
æ­¥éª¤<span class="hljs-number">3</span>ï¼šè¾“å…¥å˜æˆ <span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½"</span>ï¼Œé¢„æµ‹ â†’ [ç»“æŸç¬¦]

è¾“å‡ºï¼š<span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½"</span>
</code></pre>
<p>æ¯ä¸€æ­¥éƒ½è¦é‡æ–°è®¡ç®—ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç”Ÿæˆå¾ˆæ…¢ã€‚</p>
<p><strong>KV ç¼“å­˜ï¼ˆKV Cacheï¼‰</strong>ï¼š</p>
<p>ä¸ºäº†åŠ é€Ÿï¼Œå¯ä»¥ç¼“å­˜å·²è®¡ç®—çš„ Key å’Œ Valueï¼Œé¿å…é‡å¤è®¡ç®—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä¸ç”¨ç¼“å­˜ï¼šæ¯æ­¥è®¡ç®— <span class="hljs-built_in">O</span>(nÂ²)ï¼Œæ€»å…± <span class="hljs-built_in">O</span>(nÂ³)
ä½¿ç”¨ç¼“å­˜ï¼šæ¯æ­¥è®¡ç®— <span class="hljs-built_in">O</span>(n)ï¼Œæ€»å…± <span class="hljs-built_in">O</span>(nÂ²)
</code></pre>
<hr/>
<h3 data-id="heading-33">åã€Transformer çš„å˜ä½“ä¸å‘å±•</h3>
<h4 data-id="heading-34">10.1 ä¸»æµæ¶æ„</h4>

























<table><thead><tr><th>æ¶æ„ç±»å‹</th><th>ä»£è¡¨æ¨¡å‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Encoder-only</td><td>BERT</td><td>åŒå‘ç†è§£ï¼Œé€‚åˆåˆ†ç±»ã€é—®ç­”</td></tr><tr><td>Decoder-only</td><td>GPT</td><td>å•å‘ç”Ÿæˆï¼Œé€‚åˆæ–‡æœ¬ç”Ÿæˆ</td></tr><tr><td>Encoder-Decoder</td><td>T5, BART</td><td>å®Œæ•´æ¶æ„ï¼Œé€‚åˆç¿»è¯‘ã€æ‘˜è¦</td></tr></tbody></table>
<h4 data-id="heading-35">10.2 æ•ˆç‡ä¼˜åŒ–</h4>






























<table><thead><tr><th>ä¼˜åŒ–æ–¹æ³•</th><th>æ€è·¯</th><th>ä»£è¡¨å·¥ä½œ</th></tr></thead><tbody><tr><td>ç¨€ç–æ³¨æ„åŠ›</td><td>åªå…³æ³¨éƒ¨åˆ†ä½ç½®</td><td>Longformer, BigBird</td></tr><tr><td>çº¿æ€§æ³¨æ„åŠ›</td><td>å°†å¤æ‚åº¦ä» O(nÂ²) é™åˆ° O(n)</td><td>Linear Transformer</td></tr><tr><td>Flash Attention</td><td>ä¼˜åŒ–å†…å­˜è®¿é—®æ¨¡å¼</td><td>Flash Attention</td></tr><tr><td>åˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›</td><td>å¤šä¸ªå¤´å…±äº« K/V</td><td>GQA</td></tr></tbody></table>
<h4 data-id="heading-36">10.3 æ¶æ„æ”¹è¿›</h4>
<ul>
<li><strong>RMSNorm</strong>ï¼šæ›¿ä»£ LayerNormï¼Œæ›´é«˜æ•ˆ</li>
<li><strong>æ—‹è½¬ä½ç½®ç¼–ç ï¼ˆRoPEï¼‰</strong>ï¼šæ›¿ä»£ç»å¯¹ä½ç½®ç¼–ç ï¼Œå¤–æ¨èƒ½åŠ›æ›´å¼º</li>
<li><strong>SwiGLU æ¿€æ´»</strong>ï¼šæ›¿ä»£ ReLU/GELUï¼Œæ•ˆæœæ›´å¥½</li>
</ul>
<hr/>
<h3 data-id="heading-37">åä¸€ã€æ€»ç»“</h3>
<p>è®©æˆ‘ä»¬å›é¡¾ Transformer çš„æ ¸å¿ƒè¦ç‚¹ï¼š</p>



































<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>åˆ›æ–°ç‚¹</th></tr></thead><tbody><tr><td>è‡ªæ³¨æ„åŠ›</td><td>å»ºç«‹åºåˆ—å†…ä»»æ„ä½ç½®çš„å…³ç³»</td><td>å¹¶è¡Œè®¡ç®—ã€é•¿è·ç¦»å»ºæ¨¡</td></tr><tr><td>å¤šå¤´æ³¨æ„åŠ›</td><td>å¤šè§†è§’å…³æ³¨ä¸åŒæ¨¡å¼</td><td>å¢åŠ è¡¨è¾¾èƒ½åŠ›</td></tr><tr><td>ä½ç½®ç¼–ç </td><td>å¼•å…¥ä½ç½®ä¿¡æ¯</td><td>æ­£å¼¦ç¼–ç ï¼Œå¯å¤–æ¨</td></tr><tr><td>æ®‹å·®è¿æ¥</td><td>è®­ç»ƒæ·±å±‚ç½‘ç»œ</td><td>æ¢¯åº¦ç›´é€š</td></tr><tr><td>å±‚å½’ä¸€åŒ–</td><td>ç¨³å®šè®­ç»ƒ</td><td>åŠ é€Ÿæ”¶æ•›</td></tr></tbody></table>
<p><strong>Transformer æˆåŠŸçš„å…³é”®</strong>ï¼š</p>
<ol>
<li><strong>å¹¶è¡Œæ€§</strong>ï¼šæ‘†è„± RNN çš„é¡ºåºä¾èµ–</li>
<li><strong>é•¿è·ç¦»å»ºæ¨¡</strong>ï¼šæ³¨æ„åŠ›æœºåˆ¶ç›´æ¥è¿æ¥ä»»æ„ä½ç½®</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ¶æ„ç®€æ´ï¼Œæ˜“äºå †å æ›´å¤šå±‚</li>
</ol>
<p><strong>æ ¸å¿ƒå…¬å¼é€Ÿè®°</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"># è‡ªæ³¨æ„åŠ›
<span class="hljs-built_in">Attention</span>(Q,K,V) = <span class="hljs-built_in">softmax</span>(QKáµ€/âˆšdâ‚–) Ã— V

# å¤šå¤´æ³¨æ„åŠ›  
<span class="hljs-built_in">MultiHead</span>(Q,K,V) = <span class="hljs-built_in">Concat</span>(headâ‚,...,headâ‚•)Wáµ’
where headáµ¢ = <span class="hljs-built_in">Attention</span>(QWáµ¢Q, KWáµ¢K, VWáµ¢V)
</code></pre>
<hr/>
<h3 data-id="heading-38">å»¶ä¼¸é˜…è¯»</h3>
<p>å¦‚æœä½ æƒ³è¿›ä¸€æ­¥æ·±å…¥ï¼š</p>
<ol>
<li><strong>è®ºæ–‡åŸæ–‡</strong>ï¼š<em>Attention Is All You Need</em>ï¼ˆVaswani et al., 2017ï¼‰</li>
<li><strong>ç»å…¸è§£è¯»</strong>ï¼š<em>The Illustrated Transformer</em>ï¼ˆJay Alammarï¼‰</li>
<li><strong>ä»£ç å®è·µ</strong>ï¼š<em>The Annotated Transformer</em>ï¼ˆHarvard NLPï¼‰</li>
<li><strong>è¿›é˜¶å†…å®¹</strong>ï¼š<em>FlashAttention</em>ã€<em>Rotary Position Embedding</em> ç­‰ä¼˜åŒ–æŠ€æœ¯</li>
</ol>
<p><strong>åè®°</strong>ï¼šTransformer çš„è®¾è®¡ä¹‹ç¾åœ¨äºå…¶ç®€æ´æ€§ã€‚"Attention Is All You Need"è¿™ä¸ªæ ‡é¢˜æœ¬èº«å°±æ˜¯ä¸€ç§å®£è¨€ï¼šç”¨ä¸€ä¸ªç»Ÿä¸€çš„æœºåˆ¶ï¼ˆæ³¨æ„åŠ›ï¼‰æ›¿ä»£å¤æ‚çš„å¾ªç¯ç»“æ„ã€é—¨æ§æœºåˆ¶ï¼Œåè€Œå–å¾—äº†æ›´å¥½çš„æ•ˆæœã€‚è¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œæœ‰æ—¶å€™åŒ–ç¹ä¸ºç®€æ‰æ˜¯çœŸæ­£çš„åˆ›æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ®‹å·®ç½‘ç»œï¼šä¸€æ–‡è¯»æ‡‚ AI å¤§æ¨¡å‹çš„åŸºçŸ³æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7599237603976462379</link>    <guid>https://juejin.cn/post/7599237603976462379</guid>    <pubDate>2026-01-26T09:25:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599237603976462379" data-draft-id="7599237603976429611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ®‹å·®ç½‘ç»œï¼šä¸€æ–‡è¯»æ‡‚ AI å¤§æ¨¡å‹çš„åŸºçŸ³æŠ€æœ¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-26T09:25:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hhang"/> <meta itemprop="url" content="https://juejin.cn/user/1994944446213274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ®‹å·®ç½‘ç»œï¼šä¸€æ–‡è¯»æ‡‚ AI å¤§æ¨¡å‹çš„åŸºçŸ³æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1994944446213274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:25:37.000Z" title="Mon Jan 26 2026 09:25:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»æ·±åº¦å­¦ä¹ åˆ°æ®‹å·®ç½‘ç»œï¼šä¸€æ–‡è¯»æ‡‚ AI å¤§æ¨¡å‹çš„åŸºçŸ³æŠ€æœ¯</h2>
<blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œå¾ªåºæ¸è¿›åœ°ç†è§£æ·±åº¦å­¦ä¹ ã€å·ç§¯ç¥ç»ç½‘ç»œï¼Œä»¥åŠé©å‘½æ€§çš„æ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰ã€‚å³ä½¿ä½ ä¸æ˜¯æŠ€æœ¯ä¸“ä¸šäººå£«ï¼Œä¹Ÿèƒ½è½»æ¾è¯»æ‡‚ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å¼€ç¯‡ï¼šä¸ºä»€ä¹ˆè¦äº†è§£æ®‹å·®ç½‘ç»œï¼Ÿ</h3>
<p>å¦‚æœä½ å…³æ³¨è¿‡ AI é¢†åŸŸï¼Œä¸€å®šå¬è¯´è¿‡ ChatGPTã€Stable Diffusion è¿™äº›å¤§æ¨¡å‹ã€‚ä½†ä½ å¯èƒ½ä¸çŸ¥é“ï¼Œæ”¯æ’‘è¿™äº›åºç„¶å¤§ç‰©çš„åº•å±‚æŠ€æœ¯ä¸­ï¼Œæœ‰ä¸€ä¸ªå…³é”®çš„é‡Œç¨‹ç¢‘â€”â€”<strong>æ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰</strong>ã€‚</p>
<p>2015 å¹´ï¼Œå¾®è½¯äºšæ´²ç ”ç©¶é™¢çš„ä½•æºæ˜å›¢é˜Ÿæå‡ºäº†æ®‹å·®ç½‘ç»œï¼Œä¸€ä¸¾æ‹¿ä¸‹äº†å½“å¹´ ImageNet å›¾åƒè¯†åˆ«å¤§èµ›çš„å† å†›ï¼Œé”™è¯¯ç‡ä»…æœ‰ 3.57%â€”â€”è¿™æ„å‘³ç€ AI çš„å›¾åƒè¯†åˆ«èƒ½åŠ›é¦–æ¬¡è¶…è¶Šäº†äººç±»ï¼æ›´é‡è¦çš„æ˜¯ï¼ŒResNet çš„æ ¸å¿ƒæ€æƒ³è‡³ä»Šä»åœ¨å½±å“ç€å‡ ä¹æ‰€æœ‰çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p>
<p>è®©æˆ‘ä»¬ä»æœ€åŸºç¡€çš„æ¦‚å¿µå¼€å§‹ï¼Œä¸€æ­¥æ­¥æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿ</h3>
<h4 data-id="heading-3">2.1 ä»äººè„‘åˆ°äººå·¥ç¥ç»ç½‘ç»œ</h4>
<p>æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬çš„å¤§è„‘æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼šå½“ä½ çœ‹åˆ°ä¸€åªçŒ«æ—¶ï¼Œçœ¼ç›æ¥æ”¶å…‰ä¿¡å·ï¼Œç„¶åä¿¡å·é€šè¿‡æ— æ•°ä¸ªç¥ç»å…ƒå±‚å±‚ä¼ é€’ã€å¤„ç†ï¼Œæœ€ç»ˆä½ çš„å¤§è„‘å‘Šè¯‰ä½ "è¿™æ˜¯ä¸€åªçŒ«"ã€‚</p>
<p><strong>äººå·¥ç¥ç»ç½‘ç»œ</strong>å°±æ˜¯æ¨¡ä»¿è¿™ä¸ªè¿‡ç¨‹çš„æ•°å­¦æ¨¡å‹ï¼š</p>
<pre><code class="hljs">è¾“å…¥å±‚          éšè—å±‚ï¼ˆå¤šå±‚ï¼‰         è¾“å‡ºå±‚
  â—‹               â—‹  â—‹  â—‹              â—‹
  â—‹    â†’         â—‹  â—‹  â—‹      â†’       â—‹ ï¼ˆæ˜¯çŒ«çš„æ¦‚ç‡ï¼‰
  â—‹               â—‹  â—‹  â—‹              â—‹ ï¼ˆæ˜¯ç‹—çš„æ¦‚ç‡ï¼‰
ï¼ˆå›¾åƒåƒç´ ï¼‰    ï¼ˆç‰¹å¾æå–ï¼‰          ï¼ˆåˆ†ç±»ç»“æœï¼‰
</code></pre>
<ul>
<li><strong>è¾“å…¥å±‚</strong>ï¼šæ¥æ”¶åŸå§‹æ•°æ®ï¼ˆæ¯”å¦‚å›¾ç‰‡çš„åƒç´ å€¼ï¼‰</li>
<li><strong>éšè—å±‚</strong>ï¼šå¯¹æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†ï¼ˆæå–ç‰¹å¾ï¼‰</li>
<li><strong>è¾“å‡ºå±‚</strong>ï¼šç»™å‡ºæœ€ç»ˆç»“æœï¼ˆåˆ†ç±»ã€é¢„æµ‹ç­‰ï¼‰</li>
</ul>
<h4 data-id="heading-4">2.2 "æ·±åº¦"æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h4>
<p>æ‰€è°“<strong>æ·±åº¦å­¦ä¹ </strong>ï¼Œå°±æ˜¯"æ·±å±‚"çš„ç¥ç»ç½‘ç»œå­¦ä¹ ã€‚è¿™é‡Œçš„"æ·±"æŒ‡çš„æ˜¯<strong>ç¥ç»ç½‘ç»œçš„å±‚æ•°å¤š</strong>ã€‚</p>




















<table><thead><tr><th>ç½‘ç»œç±»å‹</th><th>å±‚æ•°</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>æµ…å±‚ç½‘ç»œ</td><td>2-3 å±‚</td><td>åªèƒ½å­¦ä¹ ç®€å•æ¨¡å¼</td></tr><tr><td>æ·±å±‚ç½‘ç»œ</td><td>æ•°ååˆ°æ•°ç™¾å±‚</td><td>èƒ½å­¦ä¹ å¤æ‚çš„æŠ½è±¡ç‰¹å¾</td></tr></tbody></table>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼š</p>
<ul>
<li>æµ…å±‚ç½‘ç»œå°±åƒå°å­¦ç”Ÿï¼Œåªèƒ½è®¤è¯†ç®€å•çš„å­—æ¯å’Œæ•°å­—</li>
<li>æ·±å±‚ç½‘ç»œå°±åƒå¤§å­¦æ•™æˆï¼Œèƒ½ç†è§£å¤æ‚çš„æ¦‚å¿µå’ŒæŠ½è±¡çš„çŸ¥è¯†</li>
</ul>
<h4 data-id="heading-5">2.3 æ·±åº¦å­¦ä¹ ä¸ºä»€ä¹ˆè¿™ä¹ˆå¼ºå¤§ï¼Ÿ</h4>
<p>æ·±åº¦å­¦ä¹ çš„é­”åŠ›åœ¨äº<strong>è‡ªåŠ¨ç‰¹å¾æå–</strong>ã€‚</p>
<p>åœ¨ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­ï¼Œå·¥ç¨‹å¸ˆéœ€è¦æ‰‹åŠ¨å‘Šè¯‰æœºå™¨"çŒ«çš„ç‰¹å¾æ˜¯å°–è€³æœµã€èƒ¡é¡»ã€æ¯›èŒ¸èŒ¸..."è€Œæ·±åº¦å­¦ä¹ å¯ä»¥è‡ªå·±ä»å¤§é‡æ•°æ®ä¸­å­¦ä¹ è¿™äº›ç‰¹å¾ï¼š</p>
<ul>
<li>ç¬¬ 1 å±‚ï¼šå­¦ä¹ è¾¹ç¼˜ã€é¢œè‰²</li>
<li>ç¬¬ 2 å±‚ï¼šå­¦ä¹ çº¹ç†ã€å±€éƒ¨å½¢çŠ¶</li>
<li>ç¬¬ 3 å±‚ï¼šå­¦ä¹ è€³æœµã€çœ¼ç›ç­‰éƒ¨ä½</li>
<li>ç¬¬ N å±‚ï¼šå­¦ä¹ æ•´ä½“"çŒ«"çš„æ¦‚å¿µ</li>
</ul>
<p>è¿™ç§<strong>å±‚å±‚é€’è¿›ã€ä»ç®€å•åˆ°å¤æ‚</strong>çš„å­¦ä¹ æ–¹å¼ï¼Œè®©æ·±åº¦å­¦ä¹ åœ¨å›¾åƒã€è¯­éŸ³ã€æ–‡æœ¬ç­‰é¢†åŸŸå–å¾—äº†çªç ´æ€§è¿›å±•ã€‚</p>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€å·ç§¯ç¥ç»ç½‘ç»œï¼šè®¡ç®—æœºçš„"çœ¼ç›"</h3>
<h4 data-id="heading-7">3.1 ä¸ºä»€ä¹ˆéœ€è¦å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Ÿ</h4>
<p>æ™®é€šçš„ç¥ç»ç½‘ç»œå¤„ç†å›¾åƒæ—¶æœ‰ä¸ªå¤§é—®é¢˜ï¼š<strong>å‚æ•°å¤ªå¤šäº†</strong>ï¼</p>
<p>å‡è®¾ä¸€å¼  224 x 224 çš„å½©è‰²å›¾ç‰‡ï¼š</p>
<ul>
<li>åƒç´ æ•°ï¼š224 x 224 x 3 = 150,528 ä¸ªè¾“å…¥</li>
<li>å¦‚æœç¬¬ä¸€å±‚æœ‰ 1000 ä¸ªç¥ç»å…ƒï¼Œå‚æ•°æ•°é‡ = 1.5 äº¿ï¼</li>
</ul>
<p>è¿™ä¸ä»…è®¡ç®—é‡æƒŠäººï¼Œè¿˜å®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆï¼ˆæ¨¡å‹æ­»è®°ç¡¬èƒŒï¼Œæ³›åŒ–èƒ½åŠ›å·®ï¼‰ã€‚</p>
<h4 data-id="heading-8">3.2 å·ç§¯çš„æ ¸å¿ƒæ€æƒ³ï¼šå±€éƒ¨æ„ŸçŸ¥ + å‚æ•°å…±äº«</h4>
<p><strong>å·ç§¯ç¥ç»ç½‘ç»œ</strong>ç”¨ä¸€ä¸ªå·§å¦™çš„æ–¹æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<p><strong>1. å±€éƒ¨æ„ŸçŸ¥ï¼ˆLocal Connectivityï¼‰</strong></p>
<p>ä¸å…¶è®©æ¯ä¸ªç¥ç»å…ƒçœ‹æ•´å¼ å›¾ç‰‡ï¼Œä¸å¦‚åªè®©å®ƒçœ‹ä¸€å°å—åŒºåŸŸã€‚å°±åƒæˆ‘ä»¬çœ‹ä¸œè¥¿æ—¶ï¼Œè§†è§‰ç„¦ç‚¹ä¸€æ¬¡ä¹Ÿåªå…³æ³¨ä¸€å°å—åŒºåŸŸã€‚</p>
<pre><code class="hljs language-css" lang="css">åŸå›¾ï¼š                     å·ç§¯æ ¸ï¼ˆæ»¤æ³¢å™¨ï¼‰ï¼š
<span class="hljs-selector-attr">[ 1  2  3  4  5 ]</span>         <span class="hljs-selector-attr">[ 1  0 -1 ]</span>
<span class="hljs-selector-attr">[ 6  7  8  9  10]</span>    Ã—    <span class="hljs-selector-attr">[ 1  0 -1 ]</span>   =   ç‰¹å¾å›¾
<span class="hljs-selector-attr">[ 11 12 13 14 15]</span>         <span class="hljs-selector-attr">[ 1  0 -1 ]</span>
<span class="hljs-selector-attr">[ 16 17 18 19 20]</span>
<span class="hljs-selector-attr">[ 25 22 23 24 25]</span>

å·ç§¯æ ¸åœ¨å›¾åƒä¸Šæ»‘åŠ¨ï¼Œæ¯æ¬¡åªå¤„ç†ä¸€ä¸ª <span class="hljs-number">3</span>x3 çš„åŒºåŸŸ
</code></pre>
<p><strong>2. å‚æ•°å…±äº«ï¼ˆParameter Sharingï¼‰</strong></p>
<p>åŒä¸€ä¸ªå·ç§¯æ ¸åœ¨æ•´å¼ å›¾ç‰‡ä¸Šæ»‘åŠ¨ï¼Œç”¨ç›¸åŒçš„å‚æ•°å¤„ç†ä¸åŒä½ç½®â€”â€”è¿™å¤§å¤§å‡å°‘äº†å‚æ•°æ•°é‡ï¼</p>

















<table><thead><tr><th>æ–¹å¼</th><th>å‚æ•°æ•°é‡</th></tr></thead><tbody><tr><td>å…¨è¿æ¥</td><td>1.5 äº¿</td></tr><tr><td>å·ç§¯ï¼ˆ3x3æ ¸ï¼‰</td><td>27 ä¸ª</td></tr></tbody></table>
<p>å·®è·æƒŠäººå§ï¼Ÿè¿™å°±æ˜¯å·ç§¯çš„å¨åŠ›ã€‚</p>
<h4 data-id="heading-9">3.3 CNN çš„ç»å…¸ç»“æ„</h4>
<p>ä¸€ä¸ªå…¸å‹çš„ CNN åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">è¾“å…¥å›¾åƒ
    â†“
<span class="hljs-selector-attr">[å·ç§¯å±‚]</span> â†’ æå–ç‰¹å¾ï¼ˆè¾¹ç¼˜ã€çº¹ç†ç­‰ï¼‰
    â†“
<span class="hljs-selector-attr">[æ¿€æ´»å‡½æ•° ReLU]</span> â†’ å¼•å…¥éçº¿æ€§
    â†“
<span class="hljs-selector-attr">[æ± åŒ–å±‚]</span> â†’ é™ä½åˆ†è¾¨ç‡ï¼Œå‡å°‘è®¡ç®—é‡
    â†“
<span class="hljs-selector-attr">[é‡å¤ä¸Šè¿°ç»“æ„è‹¥å¹²æ¬¡...]</span>
    â†“
<span class="hljs-selector-attr">[å…¨è¿æ¥å±‚]</span> â†’ ç»¼åˆç‰¹å¾ï¼Œåšå‡ºåˆ¤æ–­
    â†“
è¾“å‡ºç»“æœ
</code></pre>
<p><strong>å·ç§¯å±‚</strong>ï¼šç”¨å·ç§¯æ ¸æå–å›¾åƒç‰¹å¾
<strong>æ¿€æ´»å‡½æ•°ï¼ˆReLUï¼‰</strong>ï¼š<code>f(x) = max(0, x)</code>ï¼Œç®€å•ä½†æœ‰æ•ˆï¼Œè®©ç½‘ç»œèƒ½å­¦ä¹ å¤æ‚æ¨¡å¼
<strong>æ± åŒ–å±‚</strong>ï¼šé€šå¸¸å–å±€éƒ¨æœ€å¤§å€¼ï¼ˆMax Poolingï¼‰ï¼Œå‹ç¼©ä¿¡æ¯çš„åŒæ—¶ä¿ç•™é‡è¦ç‰¹å¾</p>
<h4 data-id="heading-10">3.4 CNN çš„å‘å±•å†ç¨‹</h4>









































<table><thead><tr><th>å¹´ä»½</th><th>ç½‘ç»œåç§°</th><th>å±‚æ•°</th><th>çªç ´</th></tr></thead><tbody><tr><td>1998</td><td>LeNet-5</td><td>7</td><td>é¦–ä¸ªæˆåŠŸçš„ CNNï¼Œç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«</td></tr><tr><td>2012</td><td>AlexNet</td><td>8</td><td>æ·±åº¦å­¦ä¹ çš„å¤å…´ä¹‹ä½œï¼ŒImageNet å† å†›</td></tr><tr><td>2014</td><td>VGGNet</td><td>19</td><td>è¯æ˜äº†ç½‘ç»œè¶Šæ·±æ•ˆæœè¶Šå¥½</td></tr><tr><td>2014</td><td>GoogLeNet</td><td>22</td><td>å¼•å…¥ Inception æ¨¡å—</td></tr><tr><td>2015</td><td>ResNet</td><td><strong>152</strong></td><td>æ®‹å·®å­¦ä¹ ï¼Œçªç ´æ·±åº¦é™åˆ¶</td></tr></tbody></table>
<p>æ³¨æ„åˆ°äº†å—ï¼Ÿç½‘ç»œè¶Šæ¥è¶Šæ·±ï¼Œæ•ˆæœè¶Šæ¥è¶Šå¥½ã€‚ä½† VGG åˆ° ResNet ä¹‹é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå±‚æ•°èƒ½ä» 19 è·ƒå‡åˆ° 152ï¼Ÿ</p>
<p>è¿™å°±è¦è¯´åˆ° ResNet è§£å†³çš„æ ¸å¿ƒé—®é¢˜äº†ã€‚</p>
<hr/>
<h3 data-id="heading-11">å››ã€æ®‹å·®ç½‘ç»œï¼šæ·±åº¦å­¦ä¹ çš„é‡Œç¨‹ç¢‘</h3>
<h4 data-id="heading-12">ResNet è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼ˆé€Ÿè§ˆï¼‰</h4>
<p>åœ¨æ·±å…¥äº†è§£æ®‹å·®ç½‘ç»œä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ˜ç¡®å®ƒåˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š</p>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>ResNet çš„è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>é€€åŒ–é—®é¢˜</strong></td><td>ç½‘ç»œå±‚æ•°å¢åŠ åï¼Œè®­ç»ƒå’Œæµ‹è¯•å‡†ç¡®ç‡éƒ½ä¸‹é™</td><td>æ®‹å·®å­¦ä¹  + è·³è·ƒè¿æ¥</td></tr><tr><td><strong>æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸</strong></td><td>æ·±å±‚ç½‘ç»œåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦å˜å¾—æå°æˆ–æå¤§ï¼Œå¯¼è‡´æµ…å±‚æ— æ³•æœ‰æ•ˆå­¦ä¹ </td><td>è·³è·ƒè¿æ¥æä¾›æ¢¯åº¦ç›´é€šè·¯å¾„</td></tr><tr><td><strong>æ’ç­‰æ˜ å°„éš¾ä»¥å­¦ä¹ </strong></td><td>ç½‘ç»œå³ä½¿åªéœ€è¦"ä»€ä¹ˆéƒ½ä¸åš"ï¼Œä¹Ÿå¾ˆéš¾å­¦ä¼š</td><td>è·³è·ƒè¿æ¥ç›´æ¥æä¾›æ’ç­‰æ˜ å°„</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šResNet é€šè¿‡å¼•å…¥<strong>è·³è·ƒè¿æ¥ï¼ˆSkip Connectionï¼‰</strong>ï¼Œè®©ä¿¡æ¯å’Œæ¢¯åº¦èƒ½å¤Ÿ"ç»•è¿‡"ä¸­é—´å±‚ç›´æ¥ä¼ é€’ï¼Œä»è€Œä½¿è®­ç»ƒéå¸¸æ·±çš„ç½‘ç»œæˆä¸ºå¯èƒ½ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹è¿™äº›é—®é¢˜æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œä»¥åŠ ResNet çš„è§£å†³æ€è·¯ã€‚</p>
<hr/>
<h4 data-id="heading-13">4.1 æ·±åº¦ç½‘ç»œçš„å›°å¢ƒ</h4>
<p>ç†è®ºä¸Šï¼Œç½‘ç»œè¶Šæ·±ï¼Œèƒ½å­¦ä¹ çš„ç‰¹å¾è¶ŠæŠ½è±¡ã€è¶Šå¤æ‚ï¼Œæ•ˆæœåº”è¯¥è¶Šå¥½ã€‚ä½†ç°å®ä¸­å´å‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<p><strong>ç½‘ç»œå±‚æ•°å¢åŠ åˆ°ä¸€å®šç¨‹åº¦åï¼Œå‡†ç¡®ç‡åè€Œä¸‹é™äº†ï¼</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">                   å‡†ç¡®ç‡
                     â†‘
                     â”‚    ___
                     â”‚   /   \
                     â”‚  /     \___
                     â”‚ /           \
                     â”‚/             \_____
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç½‘ç»œæ·±åº¦
                              â†‘
                           è¿™é‡Œå¼€å§‹ä¸‹é™ï¼
</span></code></pre>
<p>è¿™ä¸ªé—®é¢˜å«åš<strong>é€€åŒ–é—®é¢˜ï¼ˆDegradation Problemï¼‰</strong>ï¼Œæ³¨æ„å®ƒä¸æ˜¯è¿‡æ‹Ÿåˆï¼ˆè¿‡æ‹Ÿåˆæ˜¯è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ä½†æµ‹è¯•é›†ä¸Šå·®ï¼‰ï¼Œè€Œæ˜¯è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šçš„æ•ˆæœéƒ½å˜å·®äº†ï¼</p>
<p>è¿™è¯´æ˜æ›´æ·±çš„ç½‘ç»œæ›´éš¾è®­ç»ƒã€‚ä¸»è¦åŸå› æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸</strong>ï¼šåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦åœ¨å±‚å±‚ä¼ é€’ä¸­å˜å¾—æå°æˆ–æå¤§ï¼Œå¯¼è‡´æµ…å±‚å‡ ä¹æ— æ³•å­¦ä¹ </li>
<li><strong>æ’ç­‰æ˜ å°„éš¾ä»¥å­¦ä¹ </strong>ï¼šå³ä½¿åªéœ€è¦è®©æ·±å±‚ç½‘ç»œå­¦ä¼š"ä»€ä¹ˆéƒ½ä¸åš"ï¼ˆæ’ç­‰æ˜ å°„ï¼‰ï¼Œå®ƒä¹Ÿå¾ˆéš¾åšåˆ°</li>
</ol>
<h4 data-id="heading-14">4.2 æ®‹å·®å­¦ä¹ ï¼šä¸€ä¸ªå¤©æ‰çš„æƒ³æ³•</h4>
<p>ä½•æºæ˜å›¢é˜Ÿæå‡ºäº†ä¸€ä¸ªç®€å•å´é©å‘½æ€§çš„æƒ³æ³•ï¼š</p>
<blockquote>
<p>å¦‚æœæ·±å±‚ç½‘ç»œéš¾ä»¥å­¦ä¹ æ’ç­‰æ˜ å°„ï¼Œé‚£æˆ‘ä»¬<strong>ç›´æ¥æŠŠæ’ç­‰æ˜ å°„"é€"ç»™å®ƒ</strong>ï¼</p>
</blockquote>
<p>å…·ä½“åšæ³•æ˜¯å¼•å…¥<strong>è·³è·ƒè¿æ¥ï¼ˆSkip Connectionï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä¼ ç»Ÿç½‘ç»œï¼š
è¾“å…¥ x â†’ <span class="hljs-selector-attr">[å·ç§¯å±‚1]</span> â†’ <span class="hljs-selector-attr">[å·ç§¯å±‚2]</span> â†’ è¾“å‡º <span class="hljs-built_in">H</span>(x)
ç›®æ ‡ï¼šå­¦ä¹  <span class="hljs-built_in">H</span>(x)

æ®‹å·®ç½‘ç»œï¼š
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      è·³è·ƒè¿æ¥ï¼ˆæ’ç­‰æ˜ å°„ï¼‰  â”‚
                    â†“                          â”‚
è¾“å…¥ x â†’ <span class="hljs-selector-attr">[å·ç§¯å±‚1]</span> â†’ <span class="hljs-selector-attr">[å·ç§¯å±‚2]</span> â†’ (+) â†’ è¾“å‡º <span class="hljs-built_in">H</span>(x) = <span class="hljs-built_in">F</span>(x) + x
                                 â†‘
                            ä¸¤è€…ç›¸åŠ 
ç›®æ ‡ï¼šå­¦ä¹  <span class="hljs-built_in">F</span>(x) = <span class="hljs-built_in">H</span>(x) - x
</code></pre>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿç½‘ç»œéœ€è¦ç›´æ¥å­¦ä¹ ä¸€ä¸ªå¤æ‚çš„æ˜ å°„ <code>H(x)</code></li>
<li>æ®‹å·®ç½‘ç»œåªéœ€è¦å­¦ä¹ <strong>æ®‹å·®</strong> <code>F(x) = H(x) - x</code>ï¼Œå³è¾“å…¥å’Œè¾“å‡ºçš„<strong>å·®å€¼</strong></li>
</ul>
<p>å¦‚æœæœ€ä¼˜æƒ…å†µæ˜¯æ’ç­‰æ˜ å°„ï¼ˆä»€ä¹ˆéƒ½ä¸åšï¼‰ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>ä¼ ç»Ÿç½‘ç»œéœ€è¦è®©æ¯ä¸€å±‚éƒ½ç²¾ç¡®å­¦ä¹  <code>H(x) = x</code>ï¼Œå¾ˆéš¾ï¼</li>
<li>æ®‹å·®ç½‘ç»œåªéœ€è¦è®© <code>F(x) = 0</code>ï¼ŒæŠŠæ‰€æœ‰æƒé‡æ¨å‘é›¶ï¼Œå®¹æ˜“å¾—å¤šï¼</li>
</ul>
<h4 data-id="heading-15">4.3 ä¸ºä»€ä¹ˆæ®‹å·®å­¦ä¹ æœ‰æ•ˆï¼Ÿ</h4>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥ç†è§£ï¼š</p>
<p>å‡è®¾ä½ æ˜¯ä¸€ä¸ªå­¦ç”Ÿï¼Œè€å¸ˆç»™äº†ä½ ä¸¤ç§è€ƒè¯•æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼ Aï¼ˆä¼ ç»Ÿç½‘ç»œï¼‰</strong>ï¼šç›´æ¥å†™å‡ºç­”æ¡ˆï¼ˆæ¯”å¦‚ 3.14159265...ï¼‰</p>
<p><strong>æ–¹å¼ Bï¼ˆæ®‹å·®ç½‘ç»œï¼‰</strong>ï¼šç»™ä½ ä¸€ä¸ªå‚è€ƒç­”æ¡ˆ 3.14ï¼Œä½ åªéœ€è¦å†™å‡ºä¿®æ­£å€¼ï¼ˆ+0.00159265...ï¼‰</p>
<p>æ˜¾ç„¶ï¼Œæ–¹å¼ B æ›´å®¹æ˜“ï¼å› ä¸ºï¼š</p>
<ol>
<li>å¦‚æœå‚è€ƒç­”æ¡ˆå·²ç»å¾ˆå‡†ç¡®ï¼Œä½ å¯ä»¥ç›´æ¥å†™ 0</li>
<li>ä½ åªéœ€è¦å…³æ³¨"å·®å¼‚"åœ¨å“ªé‡Œï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹</li>
</ol>
<p>è¿™å°±æ˜¯æ®‹å·®å­¦ä¹ çš„ç²¾é«“ï¼š<strong>è®©ç½‘ç»œä¸“æ³¨äºå­¦ä¹ "éœ€è¦æ”¹å˜ä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"ç›®æ ‡æ˜¯ä»€ä¹ˆ"</strong>ã€‚</p>
<h4 data-id="heading-16">4.4 æ®‹å·®å—çš„ç»“æ„</h4>
<p>ResNet çš„åŸºæœ¬ç»„æˆå•å…ƒæ˜¯<strong>æ®‹å·®å—ï¼ˆResidual Blockï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸºç¡€ç‰ˆï¼ˆç”¨äº ResNet-<span class="hljs-number">18</span>/<span class="hljs-number">34</span>ï¼‰ï¼š

         x
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                      â”‚
    <span class="hljs-selector-attr">[3Ã—3 å·ç§¯, 64]</span>              â”‚
         â†“                      â”‚
       <span class="hljs-selector-attr">[BN]</span>                     â”‚
         â†“                      â”‚
      <span class="hljs-selector-attr">[ReLU]</span>                    â”‚
         â†“                      â”‚
    <span class="hljs-selector-attr">[3Ã—3 å·ç§¯, 64]</span>              â”‚
         â†“                      â”‚
       <span class="hljs-selector-attr">[BN]</span>                     â”‚
         â†“                      â”‚
        (+) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  è·³è·ƒè¿æ¥
         â†“
      <span class="hljs-selector-attr">[ReLU]</span>
         â†“
       è¾“å‡º
</code></pre>
<pre><code class="hljs language-scss" lang="scss">ç“¶é¢ˆç‰ˆï¼ˆç”¨äº ResNet-<span class="hljs-number">50</span>/<span class="hljs-number">101</span>/<span class="hljs-number">152</span>ï¼‰ï¼š

         x
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                      â”‚
    <span class="hljs-selector-attr">[1Ã—1 å·ç§¯, 64]</span>   â† é™ç»´     â”‚
         â†“                      â”‚
       <span class="hljs-selector-attr">[BN + ReLU]</span>              â”‚
         â†“                      â”‚
    <span class="hljs-selector-attr">[3Ã—3 å·ç§¯, 64]</span>   â† å¤„ç†     â”‚
         â†“                      â”‚
       <span class="hljs-selector-attr">[BN + ReLU]</span>              â”‚
         â†“                      â”‚
    <span class="hljs-selector-attr">[1Ã—1 å·ç§¯, 256]</span>  â† å‡ç»´     â”‚
         â†“                      â”‚
       <span class="hljs-selector-attr">[BN]</span>                     â”‚
         â†“                      â”‚
        (+) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
      <span class="hljs-selector-attr">[ReLU]</span>
         â†“
       è¾“å‡º
</code></pre>
<p>ç“¶é¢ˆç»“æ„ç”¨ 1x1 å·ç§¯å…ˆå‹ç¼©ç»´åº¦ï¼Œå¤„ç†å®Œå†è¿˜åŸï¼Œå¤§å¤§å‡å°‘äº†è®¡ç®—é‡ã€‚</p>
<h4 data-id="heading-17">4.5 å½“ç»´åº¦ä¸åŒ¹é…æ—¶æ€ä¹ˆåŠï¼Ÿ</h4>
<p>æœ‰æ—¶å€™ï¼Œè·³è·ƒè¿æ¥çš„è¾“å…¥ x å’Œ F(x) çš„ç»´åº¦ä¸ä¸€æ ·ï¼ˆæ¯”å¦‚é€šé“æ•°ä¸åŒï¼Œæˆ–è€…ç‰¹å¾å›¾å°ºå¯¸ä¸åŒï¼‰ï¼Œè¿™æ—¶éœ€è¦ç”¨ä¸€ä¸ª<strong>æŠ•å½±è¿æ¥</strong>æ¥å¯¹é½ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">         x
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                      â†“
    <span class="hljs-selector-attr">[æ®‹å·®åˆ†æ”¯]</span>            <span class="hljs-selector-attr">[1Ã—1 å·ç§¯]</span>  â† æŠ•å½±è¿æ¥ï¼Œè°ƒæ•´ç»´åº¦
         â†“                      â†“
        (+) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
       è¾“å‡º
</code></pre>
<h4 data-id="heading-18">4.6 ResNet çš„å®Œæ•´ç»“æ„</h4>
<p>ä»¥ ResNet-34 ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">                              å±‚æ•°
è¾“å…¥å›¾åƒ (<span class="hljs-number">224</span>Ã—<span class="hljs-number">224</span>Ã—<span class="hljs-number">3</span>)
         â†“
<span class="hljs-selector-attr">[7Ã—7 å·ç§¯, stride=2]</span>           <span class="hljs-number">1</span>
         â†“
<span class="hljs-selector-attr">[3Ã—3 æœ€å¤§æ± åŒ–, stride=2]</span>
         â†“
<span class="hljs-selector-attr">[æ®‹å·®å— Ã— 3]</span> (<span class="hljs-number">64</span> é€šé“)          <span class="hljs-number">6</span>
         â†“
<span class="hljs-selector-attr">[æ®‹å·®å— Ã— 4]</span> (<span class="hljs-number">128</span> é€šé“)         <span class="hljs-number">8</span>
         â†“
<span class="hljs-selector-attr">[æ®‹å·®å— Ã— 6]</span> (<span class="hljs-number">256</span> é€šé“)        <span class="hljs-number">12</span>
         â†“
<span class="hljs-selector-attr">[æ®‹å·®å— Ã— 3]</span> (<span class="hljs-number">512</span> é€šé“)         <span class="hljs-number">6</span>
         â†“
<span class="hljs-selector-attr">[å…¨å±€å¹³å‡æ± åŒ–]</span>
         â†“
<span class="hljs-selector-attr">[å…¨è¿æ¥å±‚ â†’ 1000 ç±»]</span>           <span class="hljs-number">1</span>
                            â”€â”€â”€â”€
                             <span class="hljs-number">34</span> å±‚
</code></pre>
<p>ResNet ç³»åˆ—ç½‘ç»œå¯¹æ¯”ï¼š</p>















































<table><thead><tr><th>ç½‘ç»œ</th><th>å±‚æ•°</th><th>æ®‹å·®å—æ•°</th><th>å‚æ•°é‡</th><th>Top-5 é”™è¯¯ç‡</th></tr></thead><tbody><tr><td>ResNet-18</td><td>18</td><td>8</td><td>11.7M</td><td>10.92%</td></tr><tr><td>ResNet-34</td><td>34</td><td>16</td><td>21.8M</td><td>9.46%</td></tr><tr><td>ResNet-50</td><td>50</td><td>16</td><td>25.6M</td><td>7.48%</td></tr><tr><td>ResNet-101</td><td>101</td><td>33</td><td>44.5M</td><td>6.52%</td></tr><tr><td>ResNet-152</td><td>152</td><td>50</td><td>60.2M</td><td>6.16%</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-19">äº”ã€æ®‹å·®ç½‘ç»œçš„æ·±è¿œå½±å“</h3>
<h4 data-id="heading-20">5.1 è§£é”äº†ç½‘ç»œæ·±åº¦</h4>
<p>ResNet ä¹‹å‰ï¼Œä¸»æµç½‘ç»œæœ€å¤š 20 å¤šå±‚ã€‚ResNet è¯æ˜äº†å‡ ç™¾ç”šè‡³ä¸Šåƒå±‚çš„ç½‘ç»œæ˜¯å¯è¡Œçš„ï¼è¿™ç›´æ¥å¯å‘äº†åæ¥çš„"å¤§æ¨¡å‹"æ€è·¯ï¼šæ¨¡å‹è¶Šå¤§ã€è¶Šæ·±ï¼Œæ½œåŠ›è¶Šå¤§ã€‚</p>
<h4 data-id="heading-21">5.2 è·³è·ƒè¿æ¥æˆä¸ºæ ‡é…</h4>
<p>ResNet çš„è·³è·ƒè¿æ¥æ€æƒ³è¢«å¹¿æ³›é‡‡ç”¨ï¼š</p>
<ul>
<li><strong>Transformer</strong>ï¼šç”¨äº ChatGPTã€BERT ç­‰å¤§è¯­è¨€æ¨¡å‹ï¼Œå…¶ä¸­ä¹Ÿä½¿ç”¨äº†æ®‹å·®è¿æ¥</li>
<li><strong>U-Net</strong>ï¼šåŒ»å­¦å›¾åƒåˆ†å‰²çš„ç»å…¸ç½‘ç»œï¼Œä½¿ç”¨ç±»ä¼¼çš„è·³è·ƒè¿æ¥</li>
<li><strong>DenseNet</strong>ï¼šå°†è·³è·ƒè¿æ¥å‘å±•åˆ°æè‡´ï¼Œæ¯å±‚éƒ½ä¸ä¹‹å‰æ‰€æœ‰å±‚ç›¸è¿</li>
</ul>
<h4 data-id="heading-22">5.3 åç»­å˜ä½“</h4>
<p>ResNet å¯å‘äº†å¤§é‡æ”¹è¿›ç‰ˆæœ¬ï¼š</p>

























<table><thead><tr><th>å˜ä½“</th><th>æ”¹è¿›ç‚¹</th></tr></thead><tbody><tr><td>ResNeXt</td><td>å¼•å…¥åˆ†ç»„å·ç§¯ï¼Œæå‡æ•ˆç‡</td></tr><tr><td>SE-ResNet</td><td>åŠ å…¥é€šé“æ³¨æ„åŠ›æœºåˆ¶</td></tr><tr><td>Res2Net</td><td>å¤šå°ºåº¦ç‰¹å¾æå–</td></tr><tr><td>ResNeSt</td><td>åˆ†ç¦»æ³¨æ„åŠ›æœºåˆ¶</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-23">å…­ã€ä» ResNet åˆ°å¤§æ¨¡å‹</h3>
<h4 data-id="heading-24">6.1 å…±åŒçš„è®¾è®¡å“²å­¦</h4>
<p>å½“ä»Šçš„å¤§æ¨¡å‹ï¼ˆå¦‚ GPTã€BERTã€ViTï¼‰è™½ç„¶å’Œ ResNet å¤„ç†çš„ä»»åŠ¡ä¸åŒï¼Œä½†ç»§æ‰¿äº†å®ƒçš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ol>
<li><strong>æ®‹å·®è¿æ¥</strong>ï¼šTransformer çš„æ¯ä¸ªæ³¨æ„åŠ›å±‚å’Œå‰é¦ˆå±‚éƒ½ä½¿ç”¨æ®‹å·®è¿æ¥</li>
<li><strong>æ·±åº¦å †å </strong>ï¼šGPT-3 æœ‰ 96 å±‚ï¼Œæ²¡æœ‰æ®‹å·®è¿æ¥æ ¹æœ¬æ— æ³•è®­ç»ƒ</li>
<li><strong>é¢„è®­ç»ƒ + å¾®è°ƒ</strong>ï¼šè¿™ç§èŒƒå¼ä¹Ÿå—ç›Šäºæ®‹å·®ç½‘ç»œè¯æ˜çš„"æ·±åº¦å¯è¡Œæ€§"</li>
</ol>
<h4 data-id="heading-25">6.2 è§†è§‰å¤§æ¨¡å‹ä¸­çš„ ResNet</h4>
<p>åœ¨ CLIPã€DALL-E ç­‰è§†è§‰å¤§æ¨¡å‹ä¸­ï¼ŒResNetï¼ˆæˆ–å…¶å˜ä½“ï¼‰å¸¸è¢«ç”¨ä½œå›¾åƒç¼–ç å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">å›¾åƒ â†’ <span class="hljs-selector-attr">[ResNet ç¼–ç å™¨]</span> â†’ å›¾åƒç‰¹å¾å‘é‡
                            â†“
                     <span class="hljs-selector-attr">[å¤šæ¨¡æ€èåˆ]</span>
                            â†“
æ–‡æœ¬ â†’ <span class="hljs-selector-attr">[Transformer ç¼–ç å™¨]</span> â†’ æ–‡æœ¬ç‰¹å¾å‘é‡
</code></pre>
<p>å¯ä»¥è¯´ï¼Œæ²¡æœ‰ ResNet è§£å†³æ·±åº¦ç½‘ç»œçš„è®­ç»ƒé—®é¢˜ï¼Œå°±æ²¡æœ‰ä»Šå¤©çš„ AI å¤§æ¨¡å‹æ—¶ä»£ã€‚</p>
<hr/>
<h3 data-id="heading-26">ä¸ƒã€æ€»ç»“</h3>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™è¶Ÿæ—…ç¨‹ï¼š</p>

























<table><thead><tr><th>é˜¶æ®µ</th><th>æ ¸å¿ƒæ¦‚å¿µ</th><th>å…³é”®çªç ´</th></tr></thead><tbody><tr><td>æ·±åº¦å­¦ä¹ åŸºç¡€</td><td>ç¥ç»ç½‘ç»œã€å±‚å±‚æŠ½è±¡</td><td>è‡ªåŠ¨ç‰¹å¾æå–</td></tr><tr><td>å·ç§¯ç¥ç»ç½‘ç»œ</td><td>å±€éƒ¨æ„ŸçŸ¥ã€å‚æ•°å…±äº«</td><td>é«˜æ•ˆå¤„ç†å›¾åƒ</td></tr><tr><td>æ®‹å·®ç½‘ç»œ</td><td>è·³è·ƒè¿æ¥ã€æ®‹å·®å­¦ä¹ </td><td>è§£é”ç½‘ç»œæ·±åº¦</td></tr></tbody></table>
<p>ResNet çš„æ ¸å¿ƒè´¡çŒ®ç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>è®©ææ·±çš„ç¥ç»ç½‘ç»œæˆä¸ºå¯èƒ½ï¼Œä¸º AI æ‰“å¼€äº†é€šå¾€æ›´å¼ºå¤§æ¨¡å‹çš„å¤§é—¨ã€‚</strong></p>
</blockquote>
<p>ä½•æºæ˜å›¢é˜Ÿç”¨ä¸€ä¸ªç®€å•ä¼˜é›…çš„æƒ³æ³•â€”â€”è·³è·ƒè¿æ¥â€”â€”è§£å†³äº†å›°æ‰°å­¦ç•Œå¤šå¹´çš„æ·±åº¦ç½‘ç»œé€€åŒ–é—®é¢˜ã€‚è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œæœ‰æ—¶å€™æœ€ä¼Ÿå¤§çš„åˆ›æ–°ä¸æ˜¯å¤æ‚çš„ç®—æ³•ï¼Œè€Œæ˜¯å¯¹é—®é¢˜æœ¬è´¨çš„æ·±åˆ»æ´å¯Ÿã€‚</p>
<hr/>
<h3 data-id="heading-27">å»¶ä¼¸é˜…è¯»</h3>
<p>å¦‚æœä½ æƒ³è¿›ä¸€æ­¥äº†è§£è¿™ä¸ªé¢†åŸŸï¼Œæ¨èä»¥ä¸‹èµ„æºï¼š</p>
<ol>
<li><strong>è®ºæ–‡åŸæ–‡</strong>ï¼š<em>Deep Residual Learning for Image Recognition</em>ï¼ˆä½•æºæ˜ç­‰ï¼Œ2015ï¼‰</li>
<li><strong>è§†é¢‘æ•™ç¨‹</strong>ï¼šå´æ©è¾¾çš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ï¼ˆCourseraï¼‰</li>
<li><strong>å®è·µé¡¹ç›®</strong>ï¼šä½¿ç”¨ PyTorch/TensorFlow å®ç°ä¸€ä¸ªç®€å•çš„ ResNet</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“ç ´èŠå¤©æ¡†çš„â€œç¬¬å››é¢å¢™â€ï¼šClawdbotï¼Œç»™ä½ çš„å¤§æ¨¡å‹è£…ä¸Šâ€œæ‰‹è„šâ€]]></title>    <link>https://juejin.cn/post/7599155566298021931</link>    <guid>https://juejin.cn/post/7599155566298021931</guid>    <pubDate>2026-01-26T09:29:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566298021931" data-draft-id="7599299048303099947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“ç ´èŠå¤©æ¡†çš„â€œç¬¬å››é¢å¢™â€ï¼šClawdbotï¼Œç»™ä½ çš„å¤§æ¨¡å‹è£…ä¸Šâ€œæ‰‹è„šâ€"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-26T09:29:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°æ€•å¹³ç”Ÿå¤ªæ€¥"/> <meta itemprop="url" content="https://juejin.cn/user/1189015203094144"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“ç ´èŠå¤©æ¡†çš„â€œç¬¬å››é¢å¢™â€ï¼šClawdbotï¼Œç»™ä½ çš„å¤§æ¨¡å‹è£…ä¸Šâ€œæ‰‹è„šâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189015203094144/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°æ€•å¹³ç”Ÿå¤ªæ€¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:29:17.000Z" title="Mon Jan 26 2026 09:29:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€œåœ¨ LLM Agent çˆ†å‘çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ç¼ºçš„ä¸æ˜¯æ›´èªæ˜çš„æ¨¡å‹ï¼Œè€Œæ˜¯å¦‚ä½•å°†æ¨¡å‹èƒ½åŠ›å®‰å…¨ã€ä½å»¶è¿Ÿåœ°æ˜ å°„åˆ°æœ¬åœ°è®¾å¤‡ä¸Šã€‚å½“ AI ä¸å†æ»¡è¶³äºä»…ä»…åšä¸€ä¸ªâ€˜èŠå¤©æ­å­â€™ï¼Œå®ƒå¼€å§‹é•¿å‡ºäº†â€˜æ‰‹è„šâ€™â€”â€”Clawdbot å°±æ˜¯é‚£ä¸ªè¿æ¥å¤§è„‘ä¸æ‰‹è„šçš„ç¥ç»ä¸­æ¢ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5bb1cb651664b39b3a0661b97155c8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCB5oCV5bmz55Sf5aSq5oCl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024559&amp;x-signature=nB%2BoPo74xc4nMQqvqbHSh0zqEUo%3D" alt="ClawdBot.jpeg" loading="lazy"/></p>
<h2 data-id="heading-0">01 -&gt; For Usersï¼šå®ƒèƒ½å¸®ä½ åšä»€ä¹ˆï¼Ÿ</h2>
<h4 data-id="heading-1">ï¼ˆæ‰“ç ´â€œå¯¹è¯æ¡†â€çš„ç¬¬å››é¢å¢™ï¼‰</h4>
<p>åŸºäº Clawdbot â€œGateway + Node + Toolsâ€ çš„æ¶æ„ï¼Œå®ƒèƒ½è®© AI çªç ´â€œèŠå¤©æ¡†â€çš„é™åˆ¶ï¼Œç›´æ¥æ“ä½œä½ çš„è®¾å¤‡å’Œç½‘ç»œã€‚</p>
<p><strong>ç›®å‰å·²é›†æˆï¼š</strong></p>
<p><strong>1ã€æ¶ˆæ¯å¹³å°é›†æˆ (Channels) â€”â€” è§£å†³â€œåœ¨å“ªé‡Œå¯¹è¯â€</strong></p>
<ul>
<li>WhatsApp, Telegram, Discord, Slack, Signal, iMessage</li>
</ul>
<p><strong>2ã€AI æ¨¡å‹é›†æˆ (The Brains) â€”â€” è§£å†³â€œç”¨è°çš„å¤§è„‘â€</strong></p>
<ul>
<li><strong>é—­æºå¤§æ¨¡å‹ï¼š</strong> Anthropic (Claude 3.5/4.5 ç³»åˆ—)ã€OpenAI (GPT-4o/o1)ã€Google (Gemini)ã€xAI (Grok)ã€‚</li>
<li><strong>å¼€æº/æœ¬åœ°æ¨¡å‹ï¼š</strong> æ”¯æŒé€šè¿‡ Ollama, MLX, llama.cpp æ¥å…¥æœ¬åœ°æ¨¡å‹ï¼›æ”¯æŒ DeepSeek, Mistral, GLM ç­‰ã€‚</li>
</ul>
<p><strong>3ã€ç”Ÿäº§åŠ›ä¸çŸ¥è¯†åº“é›†æˆ (Skills &amp; Tools) â€”â€” è§£å†³â€œèƒ½å¹²ä»€ä¹ˆâ€</strong>
é€šè¿‡å„ç§ Skills è®¿é—®ä½ çš„ç§äººæ•°æ®æˆ–æ“ä½œè½¯ä»¶ï¼š</p>
<ul>
<li><strong>ç¬”è®°ä¸ä»»åŠ¡ï¼š</strong> Notion, Obsidian, Apple Notes, Trello, Apple Reminders, Things 3, Bear Notesã€‚</li>
<li><strong>ä»£ç ä¸å¼€å‘ï¼š</strong> GitHub (æäº¤ä»£ç ã€ç®¡ç† Issue)ã€Terminal/Shell è®¿é—®ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–æ§åˆ¶ã€‚</li>
<li><strong>é‚®ä»¶ä¸æ—¥ç¨‹ï¼š</strong> Gmail (è¯»å–ã€åˆ†ç±»ã€æ’°å†™å›å¤)ã€Google Calendarã€Apple HealthKit (Oura/WHOOP å¥èº«æ•°æ®)ã€‚</li>
<li><strong>åª’ä½“ä¸å®¶å±…ï¼š</strong> Spotify, Sonos (æ§åˆ¶éŸ³ä¹)ï¼›Philips Hue, Home Assistant (æ™ºèƒ½å®¶å±…æ§åˆ¶)ã€‚</li>
</ul>
<p><strong>4ã€ç³»ç»Ÿçº§é›†æˆ (The Gateway) â€”â€” è§£å†³â€œè‡ªåŠ¨åŒ–â€</strong></p>
<ul>
<li><strong>Cron Jobsï¼š</strong> æ”¯æŒè®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯å¤©æ—©ä¸Š 8 ç‚¹å‘é€æ™¨æŠ¥ï¼‰ã€‚</li>
<li><strong>Webhooksï¼š</strong> æ¥æ”¶å¤–éƒ¨è§¦å‘å™¨ï¼Œå®ç°è”åŠ¨ã€‚</li>
<li><strong>æŒä¹…åŒ–è®°å¿†ï¼š</strong> æ‰€æœ‰çš„å¯¹è¯ä¸Šä¸‹æ–‡å’Œä»»åŠ¡è¿›åº¦éƒ½å­˜å‚¨åœ¨æœ¬åœ°ï¼ˆMarkdown/æ–‡ä»¶å¤¹å½¢å¼ï¼‰ï¼Œä¸ä¾èµ–äº‘ç«¯æ•°æ®åº“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">1.1 ä½¿ç”¨ç¤ºä¾‹</h3>
<p><strong>1. è·¨å¹³å°æ¶ˆæ¯èšåˆä¸â€œæ›¿èº«â€å›å¤</strong></p>
<blockquote>
<p><strong>åœºæ™¯æè¿°ï¼š</strong> ä½ æ­£åœ¨å¼€è½¦æˆ–å¼€ä¼šï¼Œä¸æ–¹ä¾¿çœ‹æ‰‹æœºï¼Œä½†å¾®ä¿¡ã€Telegramã€Slack éƒ½åœ¨å¼¹æ¶ˆæ¯ã€‚
<strong>å¦‚ä½•å·¥ä½œï¼š</strong> Clawdbot å°†æ‰€æœ‰æ¸ é“çš„æ¶ˆæ¯æ±‡æ€»åˆ°ä¸€ä¸ªä½ æŒ‡å®šçš„â€œä¸»æ§æ¸ é“â€ï¼ˆæ¯”å¦‚ Telegram ç§èŠï¼‰ã€‚
<strong>Agent åŠ¨ä½œï¼š</strong> Agent æ ¹æ®ä½ è®¾å®šçš„æç¤ºè¯ï¼ˆPromptï¼‰è‡ªåŠ¨æ€»ç»“é•¿æ¶ˆæ¯ï¼Œç”šè‡³æ ¹æ®ä½ çš„è¯­æ°”è‰æ‹Ÿå›å¤ï¼Œä½ åªéœ€å›ä¸€ä¸ª "Yes" å³å¯å‘é€ã€‚
<strong>ä»·å€¼ï¼š</strong> ä¿¡æ¯æµç»Ÿä¸€å…¥å£ï¼Œå‡å°‘åœ¨ä¸åŒ App é—´åˆ‡æ¢çš„ç„¦è™‘ã€‚</p>
</blockquote>
<p><strong>2. è‡ªåŠ¨åŒ–â€œç¨åé˜…è¯»â€ä¸æ‘˜è¦ (ç½‘é¡µ/æ–‡æ¡£)</strong></p>
<blockquote>
<p><strong>åœºæ™¯æè¿°ï¼š</strong> åœ¨æ‰‹æœºä¸Šæµè§ˆåˆ°ä¸€ç¯‡å¾ˆæ£’çš„æŠ€æœ¯é•¿æ–‡æˆ– PDFï¼Œä½†ç°åœ¨æ²¡æ—¶é—´ç»†çœ‹ã€‚
<strong>å¦‚ä½•å·¥ä½œï¼š</strong> ç›´æ¥æŠŠé“¾æ¥å‘ç»™ Clawdbotã€‚
<strong>Agent åŠ¨ä½œï¼š</strong> Gateway è°ƒç”¨æœåŠ¡å™¨ç«¯çš„æ— å¤´æµè§ˆå™¨ï¼ˆBrowser Toolï¼‰è®¿é—®é“¾æ¥ï¼Œæå–æ­£æ–‡ï¼Œåˆ©ç”¨ LLM è¿›è¡Œæ·±åº¦æ‘˜è¦ï¼Œå¹¶ç”Ÿæˆæ€ç»´å¯¼å›¾æˆ– Key Takeaways å‘å›ç»™ä½ ã€‚å¦‚æœæ˜¯ PDFï¼Œå®ƒä¼šè¿›è¡Œè§£æå’Œæ€»ç»“ã€‚
<strong>ä»·å€¼ï¼š</strong> ä»â€œæ”¶è—å¤¹åƒç°â€å˜ä¸ºâ€œå³æ—¶çŸ¥è¯†æ¶ˆåŒ–â€ã€‚</p>
</blockquote>
<p><strong>3. æ™ºèƒ½å®¶å±…ä¸æœ¬åœ°æœåŠ¡å™¨è¿ç»´</strong></p>
<blockquote>
<p><strong>åœºæ™¯æè¿°ï¼š</strong> ä½ æ˜¯å¼€å‘è€…ï¼Œæƒ³åœ¨å¤–é¢é‡å¯å®¶é‡Œçš„æŸä¸ª Docker å®¹å™¨ï¼Œæˆ–è€…æŸ¥è¯¢ NAS çš„ç£ç›˜å‰©ä½™ç©ºé—´ã€‚
<strong>å¦‚ä½•å·¥ä½œï¼š</strong> é€šè¿‡ Telegram å‘é€æŒ‡ä»¤â€œé‡å¯ Nginx å®¹å™¨â€ã€‚
<strong>Agent åŠ¨ä½œï¼š</strong> Gateway è·¯ç”±æŒ‡ä»¤åˆ°å®¶é‡Œçš„ Linux Nodeï¼Œæ‰§è¡Œ docker restart nginxï¼Œå¹¶å°†æ‰§è¡Œç»“æœï¼ˆæ—¥å¿—ç‰‡æ®µï¼‰å›ä¼ ç»™ä½ ã€‚
<strong>ä»·å€¼ï¼š</strong> æ— éœ€å¤æ‚çš„ VPN æˆ– SSH å®¢æˆ·ç«¯ï¼Œé€šè¿‡èŠå¤©çª—å£å®Œæˆè½»é‡çº§è¿ç»´ã€‚</p>
</blockquote>
<p><strong>4. è¯­éŸ³ç¬”è®°ä¸æ—¥ç¨‹æ•´ç† (Voice-to-Action)</strong></p>
<blockquote>
<p><strong>åœºæ™¯æè¿°ï¼š</strong> èµ°è·¯æ—¶çªç„¶æƒ³åˆ°ä¸€ä¸ªç‚¹å­ï¼Œæˆ–è€…æƒ³èµ·æ˜å¤©è¦ç»™å®¢æˆ·æ‰“ç”µè¯ã€‚
<strong>å¦‚ä½•å·¥ä½œï¼š</strong> ç»™ Clawdbot å‘é€ä¸€æ¡å‡ åç§’çš„è¯­éŸ³æ¶ˆæ¯ã€‚
<strong>Agent åŠ¨ä½œï¼š</strong> Clawdbot è°ƒç”¨ STT (è¯­éŸ³è½¬æ–‡å­—) æœåŠ¡è½¬å½•å†…å®¹ï¼Œè¯†åˆ«å‡ºæ„å›¾æ˜¯â€œæ·»åŠ æ—¥ç¨‹â€ã€‚å®ƒä¼šè¿›ä¸€æ­¥è°ƒç”¨æ—¥å† API (å¦‚ Google Calendar å·¥å…·) å¸®ä½ å»ºå¥½æ—¥ç¨‹ï¼Œå¹¶å›å¤ç¡®è®¤ã€‚
<strong>ä»·å€¼ï¼š</strong> å°†éç»“æ„åŒ–çš„è¯­éŸ³æµè½¬åŒ–ä¸ºç»“æ„åŒ–çš„ç”Ÿäº§åŠ›åŠ¨ä½œã€‚</p>
</blockquote>
<p><strong>5. æ²‰æµ¸å¼â€œç¬¬äºŒå¤§è„‘â€æœç´¢</strong></p>
<blockquote>
<p><strong>åœºæ™¯æè¿°ï¼š</strong> ä½ éœ€è¦æŸ¥è¯¢ä¸€ä¸ªå¤šå¹´å‰çœ‹è¿‡çš„æŠ€æœ¯ç‚¹ï¼Œæˆ–è€…ç°åœ¨çš„å®æ—¶è‚¡ç¥¨ä¿¡æ¯ï¼Œä½†ä¸æƒ³æ‰“å¼€æµè§ˆå™¨è¢«å¹¿å‘Šå¹²æ‰°ã€‚
<strong>å¦‚ä½•å·¥ä½œï¼š</strong> ç›´æ¥é—® Clawdbotã€‚
<strong>Agent åŠ¨ä½œï¼š</strong> å®ƒä¸ä»…èƒ½è”ç½‘æœç´¢ï¼ˆè°ƒç”¨ Google/Bingï¼‰ï¼Œè¿˜èƒ½æ£€ç´¢ä½ ä¹‹å‰çš„èŠå¤©è®°å½•ï¼ˆå¦‚æœé…ç½®äº†å‘é‡æ•°æ®åº“è®°å¿†ï¼‰ï¼Œèåˆå®æ—¶ä¿¡æ¯å’Œä¸ªäººè®°å¿†ç»™å‡ºç­”æ¡ˆã€‚
<strong>ä»·å€¼ï¼š</strong> å»å¹¿å‘Šã€å»å¹²æ‰°çš„çº¯å‡€ä¿¡æ¯è·å–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">1.2 ä½¿ç”¨èµ·æ¥ å¯èƒ½å­˜åœ¨ä»€ä¹ˆé—®é¢˜</h3>
<p>Clawdbot å¾ˆå¼ºå¤§ï¼Œä½†å®ƒä¸æ˜¯ä¸‡èƒ½çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸­å›½äº’è”ç½‘ç¯å¢ƒä¸‹ã€‚</p>
<h4 data-id="heading-4">1.2.1 ä½¿ç”¨åœºæ™¯æ–¹é¢</h4>
<p><strong>1. å¯¹ä¸­æ–‡ App çš„æ”¯æŒè¾¹ç•Œ</strong></p>
<ul>
<li>
<p><strong>å¾®ä¿¡ (WeChat)ï¼š</strong> <strong>æ”¯æŒä½†æé«˜é£é™©ã€‚</strong></p>
</li>
<li>
<p><strong>åŸç†ï¼š</strong> é€šå¸¸é€šè¿‡ iPad åè®®æˆ– Web åè®®æŒ‚è½½ã€‚</p>
</li>
<li>
<p><strong>ç°çŠ¶ï¼š</strong> è…¾è®¯é£æ§éå¸¸ä¸¥æ ¼ï¼Œéå®˜æ–¹å®¢æˆ·ç«¯ææ˜“å¯¼è‡´å°å·ï¼ˆä»é™åˆ¶ç™»å½•åˆ°æ°¸ä¹…å°ç¦ï¼‰ã€‚<strong>å¼ºçƒˆå»ºè®®ä¸è¦ç”¨ä¸»å·å°è¯•ã€‚</strong></p>
</li>
<li>
<p><strong>ä¼ä¸šå¾®ä¿¡/é£ä¹¦/é’‰é’‰ï¼š</strong> <strong>æœ‰é™æ”¯æŒã€‚</strong></p>
</li>
<li>
<p>é€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™å¼€å¯ API æˆ– Bot æ¨¡å¼ï¼Œä¸ªäººç”¨æˆ·å¾ˆéš¾ç›´æ¥æ¥ç®¡è‡ªå·±çš„ç§äººè´¦å·ã€‚</p>
</li>
<li>
<p><strong>å°çº¢ä¹¦/æŠ–éŸ³ç­‰å†…å®¹å¹³å°ï¼š</strong> <strong>ä¸æ”¯æŒã€‚</strong></p>
</li>
<li>
<p>è¿™äº› App æ²¡æœ‰å¼€æ”¾ APIï¼Œä¸” Web ç«¯æœ‰å¤æ‚çš„åçˆ¬è™«æœºåˆ¶ï¼ŒClawdbot éš¾ä»¥ä½œä¸ºâ€œå®¢æˆ·ç«¯â€æ¥ç®¡ã€‚</p>
</li>
</ul>
<p><strong>2. å¯¹ä¸­æ–‡ç½‘ç«™çš„æ”¯æŒ</strong></p>
<ul>
<li><strong>ä¸€èˆ¬æ”¯æŒï¼š</strong> å¦‚æœç½‘ç«™ä¸»è¦ç”± HTML æ„æˆï¼ˆå¦‚çŸ¥ä¹æ–‡ç« ã€å…¬ä¼—å·æ–‡ç« ç½‘é¡µç‰ˆï¼‰ï¼ŒClawdbot çš„æµè§ˆå™¨å·¥å…·å¯ä»¥å®Œç¾è§£æã€‚</li>
<li><strong>æ”¯æŒåº¦ä¸­ç­‰ï¼š</strong> å¯¹äºçŸ¥ä¹ã€é›ªçƒã€è´¢è”ç¤¾ç­‰èµ„è®¯ç±»ç½‘ç«™ï¼ŒClawdbot çš„æµè§ˆå™¨å·¥å…·ï¼ˆåŸºäº Puppeteer/Playwright é€»è¾‘ï¼‰é€šå¸¸èƒ½æå®šã€‚</li>
<li><strong>å›°éš¾æ”¯æŒï¼š</strong> å¦‚æœç½‘ç«™å¼ºä¾èµ– App éªŒè¯ã€å¤æ‚çš„æ»‘å—éªŒè¯ç ï¼ˆå¯èƒ½ä¼šè®© Agent çš„çˆ¬è™«å¤±æ•ˆï¼‰ã€å¿…é¡»ç™»å½•æ‰èƒ½æŸ¥çœ‹å†…å®¹çš„ç½‘ç«™ï¼ˆå¦‚æŸäº›å¾ˆå¤šç ”æŠ¥å¹³å°ï¼‰ã€ä»¥åŠæå…¶å¤æ‚çš„åŠ¨æ€æ¸²æŸ“é¡µé¢ã€æˆ–è€…ç”±äº IP åŸå› ï¼ˆå¦‚æœä½ çš„ Gateway éƒ¨ç½²åœ¨æµ·å¤–ï¼‰æ— æ³•è®¿é—®å›½å†…ç‰¹å®šèµ„æºï¼Œä½“éªŒä¼šå¾ˆå·®ã€‚</li>
</ul>
<p><strong>3. å°ç¦é£é™© (Ban Risks)</strong></p>
<ul>
<li>ğŸ”´ <strong>é«˜å±åŒºï¼š</strong> ä¸ªäººå¾®ä¿¡å·ã€‚è¿™æ˜¯ç›®å‰æœ€å¤§çš„é›·åŒºã€‚</li>
<li>ğŸŸ¡ <strong>ä¸­å±åŒºï¼š</strong> WhatsApp (å¦‚æœçŸ­æ—¶é—´å¤§é‡å‘é€æ¶ˆæ¯)ã€Telegram (å¦‚æœæ˜¯æ–°å·ä¸”é¢‘ç¹ä¸»åŠ¨ç§èŠé™Œç”Ÿäºº)ã€‚</li>
<li>ğŸŸ¢ <strong>å®‰å…¨åŒºï¼š</strong> Slack, Discord, Telegram (æ­£å¸¸ä½¿ç”¨)ï¼Œè¿™äº›å¹³å°å¯¹ Bot æ›´åŠ å‹å¥½ã€‚</li>
</ul>
<h4 data-id="heading-5">1.2.2 å…·ä½“ä½¿ç”¨æ—¶</h4>
<p>åŒæ—¶åœ¨ä½¿ç”¨ Clawdbot æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å…·ä½“çš„æ‘©æ“¦ç‚¹ï¼š</p>
<p><strong>1. éƒ¨ç½²ç»´æŠ¤é—¨æ§›é«˜ (Technical Debt)</strong>
è¿™ä¸æ˜¯ä¸€ä¸ªâ€œä¸‹è½½å³ç”¨â€çš„ Appã€‚ä½ éœ€è¦æ‡‚ Dockerï¼Œéœ€è¦æœ‰ä¸€å° 24å°æ—¶è¿è¡Œçš„æœåŠ¡å™¨ (æˆ–å®¶é‡Œå¸¸å¼€çš„ Mac/NAS)ï¼Œè¿˜éœ€è¦é…ç½® API Key (OpenAI/Anthropic/GLM) å’Œç½‘ç»œç¯å¢ƒã€‚
ä¸€æ—¦æœåŠ¡å™¨å®•æœºæˆ–ç½‘ç»œæ³¢åŠ¨ï¼Œä½ çš„â€œåŠ©æ‰‹â€å°±å¤±è”äº†ï¼Œä½ éœ€è¦è‡ªå·±å»æ’æŸ¥æ—¥å¿—ã€‚</p>
<p><strong>2. æˆæœ¬é—®é¢˜ (Cost)</strong></p>
<ul>
<li><strong>API è´¹ç”¨ï¼š</strong> Clawdbot æœ¬èº«å…è´¹ï¼Œä½†å®ƒèƒŒåçš„ LLM (å¦‚ GPT-4, Claude 3.5 Sonnet) æ˜¯æŒ‰ Token æ”¶è´¹çš„ã€‚å¦‚æœä½ è®©å®ƒå¤„ç†é•¿æ–‡æ¡£æˆ–é«˜é¢‘å¯¹è¯ï¼Œä¸€ä¸ªæœˆçš„ API è´¦å•å¯èƒ½ä¸è²ã€‚</li>
<li><strong>ç¡¬ä»¶/äº‘æœåŠ¡å™¨è´¹ç”¨ï¼š</strong> è¿è¡Œ Gateway éœ€è¦è®¡ç®—èµ„æºã€‚</li>
</ul>
<p><strong>3. éšç§ä¸å®‰å…¨ (Security)</strong>
è™½ç„¶æ˜¯â€œæœ¬åœ°ä¼˜å…ˆâ€ï¼Œä½†ä½ å®é™…ä¸Šæ˜¯æŠŠä½ çš„èŠå¤©è®°å½•ã€å±å¹•æˆªå›¾ã€Shell æƒé™éƒ½å¼€æ”¾ç»™äº†è¿™ä¸ª Botã€‚
å¦‚æœä½ çš„ Gateway æœåŠ¡å™¨è¢«é»‘å®¢å…¥ä¾µï¼Œæˆ–è€… API Key æ³„éœ²ï¼Œä½ çš„ä¸ªäººéšç§å°†é¢ä¸´å·¨å¤§é£é™©ã€‚ä½ éœ€è¦è‡ªå·±è´Ÿè´£é…ç½®é˜²ç«å¢™å’Œé‰´æƒã€‚</p>
<p><strong>4. ç§»åŠ¨ç«¯ä½“éªŒå‰²è£‚</strong>
Clawdbot åœ¨æ‰‹æœºä¸Šæ²¡æœ‰ç‹¬ç«‹çš„ç²¾ç¾ Appï¼Œå®ƒä¾é™„äº Telegram æˆ– WhatsApp çš„èŠå¤©ç•Œé¢ã€‚è¿™æ„å‘³ç€ä½ æ— æ³•åƒç”¨åŸç”Ÿ App é‚£æ ·è¿›è¡Œå¤æ‚çš„äº¤äº’ï¼ˆæ¯”å¦‚å¤æ‚çš„æ‹–æ‹½ã€å¤šé€‰ã€å¯è§†åŒ–çš„ä»ªè¡¨ç›˜ï¼‰ï¼Œä¸€åˆ‡äº¤äº’ä¸»è¦é æ–‡å­—å‘½ä»¤ã€‚</p>
<hr/>
<p><em>å°½ç®¡ä½¿ç”¨æ–¹é¢æœ‰è¿™ä¹ˆå¤šçš„éšœç¢ï¼Œä½†æ˜¯å®ƒçš„çˆ†ç«å·²ç»è¯´æ˜å¤§å®¶å¯¹è¿™æ ·çš„å·¥å…·éå¸¸æœŸå¾…ã€ä¸Šè¿°çš„é—®é¢˜è¿Ÿæ—©ä¼šè¢«è§£å†³ã€‚</em></p>
<hr/>
<h2 data-id="heading-6">02 -&gt; For Developersï¼šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24e97f7c11934a498e2756b4f740b34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCB5oCV5bmz55Sf5aSq5oCl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024559&amp;x-signature=lkcM2aNVZnPxLB51uFBs6BriK8I%3D" alt="Gemini_Generated_Image_yfm9p6yfm9p6yfm9.png" loading="lazy"/></p>
<p>Clawdbot æ˜¯ä¸€ä¸ªâ€œæœ¬åœ°ä¼˜å…ˆâ€çš„ä¸ªäºº AI ç½‘å…³ (Personal AI Gateway)ã€‚</p>
<p>å®ƒé€šè¿‡ä¸€ä¸ªä¸­å¿ƒåŒ–çš„æ§åˆ¶å¹³é¢ï¼ˆGatewayï¼‰ï¼Œå°†ä½ å¸¸ç”¨çš„æ‰€æœ‰é€šè®¯è½¯ä»¶ï¼ˆå¾®ä¿¡ã€Telegramã€Slackç­‰ï¼‰ä¸ä½ çš„æœ¬åœ°è®¾å¤‡ï¼ˆMac/æ‰‹æœºï¼‰è¿æ¥èµ·æ¥ï¼Œè®© AI Agent ä¸ä»…èƒ½è·¨å¹³å°å¯¹è¯ï¼Œè¿˜èƒ½ç›´æ¥è°ƒç”¨æœ¬åœ°è®¾å¤‡çš„èƒ½åŠ›ï¼ˆå¦‚æˆªå±ã€æ§åˆ¶æµè§ˆå™¨ï¼‰ã€‚</p>
<h3 data-id="heading-7">2.1 æ ¸å¿ƒæ¶æ„</h3>
<p>Clawdbot çš„æ¶æ„è®¾è®¡å‘ˆç°å‡ºå…¸å‹çš„ â€œä¸­å¿ƒè¾å°„å‹â€ (Hub-and-Spoke) æ‹“æ‰‘ç»“æ„ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯ <strong>â€œGateway is Kingâ€ (ç½‘å…³å³ä¸€åˆ‡)</strong>ã€‚</p>
<p><strong>1. æ ¸å¿ƒä¸­æ¢ï¼šGateway (æ§åˆ¶å¹³é¢)</strong>
è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œå¤§è„‘â€å’Œäº¤é€šæ¢çº½ã€‚</p>
<ul>
<li><strong>è§’è‰²ï¼š</strong> å®ƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœ¬åœ°ï¼ˆå¦‚ Mac æˆ– Linux æœåŠ¡å™¨ï¼‰çš„ WebSocket æœåŠ¡ã€‚</li>
<li><strong>åŠŸèƒ½ï¼š</strong> æ‰€æœ‰æ¶ˆæ¯çš„æ”¶å‘ã€Agent çš„è°ƒåº¦ã€å·¥å…·çš„æ‰§è¡Œã€ä»¥åŠè®¾å¤‡çŠ¶æ€çš„ç®¡ç†ï¼Œå…¨éƒ½åœ¨è¿™é‡Œç»Ÿä¸€å¤„ç†ã€‚å®ƒä¸ä¾èµ–äº‘ç«¯ SaaSï¼Œæ•°æ®æŒæ¡åœ¨ä½ æ‰‹ä¸­ã€‚</li>
</ul>
<p><strong>2. è¾“å…¥/è¾“å‡ºå±‚ï¼šChannels (å¤šæ¸ é“æ¥å…¥)</strong>
è¿™æ˜¯ç³»ç»Ÿçš„â€œè€³æœµâ€å’Œâ€œå˜´å·´â€ï¼Œè´Ÿè´£è¿æ¥å¤–éƒ¨é€šè®¯å¹³å°ã€‚</p>
<ul>
<li><strong>æ”¯æŒåè®®ï¼š</strong> å®ƒé›†æˆäº† WhatsApp, Telegram, Slack, Discord, Signal, iMessage ç”šè‡³ WebChat ç­‰å¹³å°çš„åè®®ã€‚</li>
<li><strong>å·¥ä½œæ–¹å¼ï¼š</strong> å®ƒå°†ä¸åŒå¹³å°çš„ç§æœ‰åè®®ï¼ˆå¦‚ WhatsApp çš„ Baileys, Telegram çš„ grammYï¼‰ç»Ÿä¸€è½¬åŒ–ä¸º Clawdbot å†…éƒ¨çš„æ ‡å‡†æ¶ˆæ¯æ ¼å¼ï¼Œä¼ ç»™ Gatewayã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä»»ä½•èŠå¤©è½¯ä»¶é‡Œè·ŸåŒä¸€ä¸ª AI å¯¹è¯ã€‚</li>
</ul>
<p><strong>3. æ‰§è¡Œç»ˆç«¯ï¼šNodes (è®¾å¤‡èŠ‚ç‚¹)</strong>
è¿™æ˜¯ç³»ç»Ÿçš„â€œæ‰‹è„šâ€ï¼Œè´Ÿè´£ç‰©ç†è®¾å¤‡çš„å…·ä½“æ“ä½œã€‚</p>
<ul>
<li><strong>å·®å¼‚åŒ–ï¼š</strong> Gateway å¯ä»¥åœ¨äº‘ç«¯è¿è¡Œï¼Œä½† Node å¿…é¡»è¿è¡Œåœ¨ä½ çš„ç‰©ç†è®¾å¤‡ä¸Šï¼ˆå¦‚ macOS App, iOS/Android å®¢æˆ·ç«¯ï¼‰ã€‚</li>
<li><strong>èƒ½åŠ›ï¼š</strong> Node é€šè¿‡ WebSocket è¿æ¥åˆ° Gatewayï¼Œæš´éœ²æœ¬åœ°èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼šè°ƒç”¨ Mac çš„æ‘„åƒå¤´ã€è¿›è¡Œå±å¹•å½•åˆ¶ã€å‘é€ç³»ç»Ÿé€šçŸ¥æˆ–æ‰§è¡Œ Shell å‘½ä»¤ã€‚</li>
</ul>
<p><strong>4. æ™ºèƒ½å¼•æ“ï¼šAgent (Pi Agent)</strong>
è¿™æ˜¯ç³»ç»Ÿçš„â€œæ€ç»´â€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ RPC æ¨¡å¼ä¸‹çš„ AI è¿è¡Œæ—¶ã€‚</p>
<ul>
<li><strong>æœºåˆ¶ï¼š</strong> å®ƒæ¥æ”¶ Gateway è½¬å‘çš„ç”¨æˆ·æ„å›¾ï¼Œå†³ç­–éœ€è¦è°ƒç”¨å“ªäº›å·¥å…·ï¼ˆTool Streamingï¼‰ï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚</li>
</ul>
<h3 data-id="heading-8">2.2 ç¤ºä¾‹è¯´æ˜</h3>
<p><strong>åœºæ™¯ï¼š</strong> ä½ åœ¨æ‰‹æœºä¸Šç”¨ Telegram è¿œç¨‹é¥æ§å®¶é‡Œçš„ Mac æˆªå›¾å¹¶å‘é€ç»™ä½ ã€‚
<strong>æ“ä½œï¼š</strong> ä½ åœ¨æ‰‹æœºç«¯çš„ Telegram å¯¹æœºå™¨äººè¯´ï¼šâ€œå¸®æˆ‘æˆªä¸€ä¸‹ Mac çš„å±å¹•ï¼Œçœ‹çœ‹ä¸‹è½½å®Œæˆäº†å—ï¼Ÿâ€</p>
<p><strong>èƒŒåæ¶æ„çš„æ‰§è¡Œæµç¨‹ (How it works)ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a941e2e774c34d458dec64bf9b163f03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCB5oCV5bmz55Sf5aSq5oCl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024559&amp;x-signature=FiICHgiLJwfUM38wRBMJl8lifTo%3D" alt="20260126-105054.jpg" loading="lazy"/></p>
<p><strong>1. æ¶ˆæ¯æ¥æ”¶ (Channel Layer)</strong></p>
<ul>
<li>Telegram çš„ Connector æ”¶åˆ°æ¶ˆæ¯ï¼Œå°†å…¶æ ‡å‡†åŒ–ä¸ºå†…éƒ¨ Eventã€‚</li>
<li><em>æ¶æ„æ”¯æŒï¼šChannels æ¨¡å—å±è”½äº† Telegram åè®®çš„å¤æ‚æ€§ã€‚</em></li>
</ul>
<p><strong>â†“</strong></p>
<p><strong>2. æ„å›¾è·¯ç”± (Gateway Layer)</strong></p>
<ul>
<li>Gateway æ”¶åˆ°æ¶ˆæ¯ï¼Œå°†å…¶è½¬å‘ç»™å½“å‰çš„ Agentã€‚</li>
<li><em>æ¶æ„æ”¯æŒï¼šGateway ç»´æŠ¤äº†ä¼šè¯ä¸Šä¸‹æ–‡ (Session)ï¼ŒçŸ¥é“ä½ æ˜¯ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰§è¡Œæƒé™ã€‚</em></li>
</ul>
<p><strong>â†“</strong></p>
<p><strong>3. å†³ç­–ä¸åˆ†å‘ (Agent Logic)</strong></p>
<ul>
<li>Agent åˆ†æè¯­ä¹‰ï¼Œå†³å®šè°ƒç”¨ <code>screen.record</code> æˆ– <code>system.screenshot</code> å·¥å…·ã€‚</li>
<li>Agent å‘ Gateway å‘å‡ºâ€œæ‰§è¡Œæˆªå›¾â€çš„æŒ‡ä»¤ã€‚</li>
</ul>
<p><strong>â†“</strong></p>
<p><strong>4. è¿œç¨‹æ‰§è¡Œ (Node Layer)</strong></p>
<ul>
<li>Gateway æŸ¥æ‰¾å·²è¿æ¥çš„è®¾å¤‡åˆ—è¡¨ï¼Œæ‰¾åˆ°æ³¨å†Œä¸ºâ€œMacBook Proâ€çš„ macOS Nodeã€‚</li>
<li>Gateway é€šè¿‡ WebSocket å‘è¯¥ Node å‘é€æŒ‡ä»¤ã€‚</li>
<li><em>å…³é”®ç‚¹ï¼šGateway å¯èƒ½è·‘åœ¨ Linux æœåŠ¡å™¨ä¸Šï¼Œä½†å®ƒé€šè¿‡é•¿è¿æ¥â€œç©¿é€â€åˆ°äº†ä½ å®¶é‡Œçš„ Mac Node ä¸Šã€‚</em></li>
</ul>
<p><strong>â†“</strong></p>
<p><strong>5. ç»“æœå›ä¼  (Feedback Loop)</strong></p>
<ul>
<li>Mac ä¸Šçš„ Node æ‰§è¡Œæœ¬åœ°æˆªå›¾å‘½ä»¤ï¼Œä¸Šä¼ å›¾ç‰‡/æ•°æ®æµå› Gatewayã€‚</li>
<li>Gateway å°†å›¾ç‰‡è½¬äº¤ç»™ Telegram Connectorã€‚</li>
</ul>
<p><strong>âœ… æœ€ç»ˆä½ åœ¨æ‰‹æœº Telegram ä¸Šæ”¶åˆ°äº†ä¸€å¼  Mac çš„å®æ—¶å±å¹•æˆªå›¾ã€‚</strong></p>
<hr/>
<h2 data-id="heading-9">03 -&gt; For Geeksï¼šæ ¸å¿ƒæ¦‚å¿µé€šä¿—è§£æ„</h2>
<h4 data-id="heading-10">ï¼ˆç½‘å…³ã€RPCä¸æ›´å¤šï¼‰</h4>
<h3 data-id="heading-11">ç½‘å…³ (Gateway)</h3>
<p>ç®€å•æ¥è¯´ï¼Œç½‘å…³ï¼ˆGatewayï¼‰ å°±åƒæ˜¯ä¸€ä¸ªå°åŒºçš„â€œå¤§é—¨å«å®¤â€ï¼Œè€Œ <strong>ä¸ªäºº AI ç½‘å…³</strong> åˆ™æ˜¯ä¸“é—¨ä¸ºä½ ä¸ªäººæœåŠ¡çš„â€œAI æ™ºèƒ½ç®¡å®¶å‰å°â€ã€‚</p>
<p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œç½‘å…³æ˜¯ä¸€ä¸ªä¸­é—´å±‚ã€‚å®ƒä»‹äºâ€œç”¨æˆ·â€å’Œâ€œåå°æœåŠ¡â€ä¹‹é—´ã€‚
å¦‚æœæŠŠæœåŠ¡å™¨æ¯”ä½œä»“åº“ï¼Œä½ ï¼ˆç”¨æˆ·ï¼‰å»å–è´§æ—¶ï¼Œä¸èƒ½ç›´æ¥å†²è¿›ä»“åº“ï¼Œè€Œæ˜¯è¦é€šè¿‡é—¨å«å®¤ï¼ˆç½‘å…³ï¼‰ã€‚è¿™ä¸ªé—¨å«å®¤è´Ÿè´£ï¼š</p>
<ol>
<li><strong>èº«ä»½éªŒè¯ï¼š</strong> æ£€æŸ¥ä½ æ˜¯å¦æœ‰æƒé™è¿›å…¥ï¼ˆé‰´æƒï¼‰ã€‚</li>
<li><strong>åˆ†æµå¼•å¯¼ï¼š</strong> å‘Šè¯‰ä½ è¦å» 1 å·åº“æˆ¿è¿˜æ˜¯ 2 å·åº“æˆ¿ï¼ˆè·¯ç”±/è´Ÿè½½å‡è¡¡ï¼‰ã€‚</li>
<li><strong>å®‰æ£€ï¼š</strong> æ‹¦æˆªå±é™©ç‰©å“ï¼ˆå®‰å…¨é˜²æŠ¤/é™æµï¼‰ã€‚</li>
</ol>
<p><strong>ä¸ªäºº AI ç½‘å…³</strong>
å°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ä½ æœ¬åœ°æˆ–ç§æœ‰äº‘ä¸Šçš„â€œç»Ÿä¸€ä¸­è½¬ç«™â€ã€‚å®ƒä¸å†åªæ˜¯ä¼ è¯ç­’ï¼Œè€Œæ˜¯å…·å¤‡äº†æ™ºèƒ½å¤§è„‘çš„é—¨å«ã€‚
æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€å…¥å£ï¼š</strong> ä¸ç®¡åå°æ¥çš„æ˜¯å“ªä¸ªå¤§æ¨¡å‹ï¼Œä½ å¯¹å¤–åªæš´éœ²ä¸€ä¸ªæ ‡å‡†æ¥å£ï¼ˆé€šå¸¸å…¼å®¹ OpenAI æ ¼å¼ï¼‰ã€‚</li>
<li><strong>æ¨¡å‹è·¯ç”±ï¼š</strong> æ ¹æ®ä½ çš„æŒ‡ä»¤å¤æ‚ç¨‹åº¦è‡ªåŠ¨åˆ†å‘ã€‚ç®€å•çš„å¯¹è¯å‘ç»™è½»é‡æ¨¡å‹ï¼ˆçœé’±/å¿«ï¼‰ï¼Œå¤æ‚çš„ç®—æ³•é€»è¾‘å‘ç»™æœ€å¼ºæ¨¡å‹ã€‚</li>
<li><strong>æ•æ„Ÿä¿¡æ¯æ‹¦æˆªï¼š</strong> åœ¨æ•°æ®å‘å¾€äº‘ç«¯å¤§æ¨¡å‹ä¹‹å‰ï¼Œç½‘å…³å¯ä»¥è‡ªåŠ¨è¯†åˆ«å¹¶è„±æ•ï¼ˆä¿æŠ¤ä½ çš„ä¸ªäººéšç§æˆ–ç§å¯†ä»£ç ï¼‰ã€‚</li>
<li><strong>ç¼“å­˜åŠ é€Ÿï¼š</strong> ç›¸ä¼¼çš„ç®—æ³•é—®é¢˜ï¼Œç½‘å…³å¦‚æœå­˜æœ‰ä¹‹å‰çš„ç­”æ¡ˆï¼Œå°±ä¸å†è¯·æ±‚äº‘ç«¯ï¼Œç›´æ¥ç§’å›ã€‚</li>
<li><strong>æˆæœ¬ç›‘æ§ï¼š</strong> å¸®ä½ ç›¯ç€å„ä¸ª API Key æ‰£äº†å¤šå°‘é’±ï¼Œé˜²æ­¢è¶…æ”¯ã€‚</li>
</ul>
<h3 data-id="heading-12">WebSocket æœåŠ¡</h3>
<p>ä¸€ç§è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ä½ çš„æµè§ˆå™¨ï¼‰è¿›è¡Œâ€œæŒç»­å¯¹è¯â€çš„æŠ€æœ¯ã€‚</p>
<p><strong>ç±»æ¯”è¯´æ˜ï¼š</strong> å¦‚æœæŠŠä¼ ç»Ÿçš„ HTTP è¯·æ±‚æ¯”ä½œå‘çŸ­ä¿¡ï¼ˆå‘ä¸€æ¡ï¼Œå›ä¸€æ¡ï¼‰ï¼Œé‚£ä¹ˆ WebSocket å°±åƒæ˜¯æ‰“é€šç”µè¯ï¼ˆé€šè¯ä¸æŒ‚æ–­ï¼ŒåŒæ–¹éšæ—¶éƒ½èƒ½è¯´è¯ï¼‰ã€‚</p>
<h3 data-id="heading-13">RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰</h3>
<p>RPC æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒçš„ç›®æ ‡æ˜¯é€æ˜åŒ–ç½‘ç»œè°ƒç”¨ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼š</strong> è®©ä½ åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ï¼Œå»è°ƒç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å‡½æ•°ã€‚
åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒRPC æ˜¯ä¸åŒæœåŠ¡ä¹‹é—´æ²Ÿé€šçš„â€œæ™®é€šè¯â€ã€‚
RPC å±è”½äº†åº•å±‚çš„ç½‘ç»œä¼ è¾“ã€åºåˆ—åŒ–ã€åè®®è½¬æ¢ç­‰å¤æ‚ç»†èŠ‚ã€‚ä½ ä¸éœ€è¦å…³å¿ƒå®ƒæ˜¯ç”¨ TCP è¿˜æ˜¯ HTTP ä¼ è¾“çš„ï¼Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨è§£æ JSON æˆ– Protobufï¼Œå®ƒå°±åƒæ˜¯åœ¨è°ƒç”¨æœ¬åœ°ä»£ç ã€‚</p>
<p><strong>å¸¸è§çš„ RPC åè®®/æ¡†æ¶ï¼š</strong></p>
<ul>
<li><strong>gRPC (Google):</strong> ç›®å‰æœ€æµè¡Œï¼ŒåŸºäº HTTP/2ï¼Œä½¿ç”¨ Protobuf å®šä¹‰æ¥å£ï¼Œæ”¯æŒå¤šè¯­è¨€ã€‚</li>
<li><strong>Thrift (Facebook):</strong> æ€§èƒ½æé«˜ï¼Œæ”¯æŒéå¸¸å¤šçš„ç¼–ç¨‹è¯­è¨€ã€‚</li>
<li><strong>Dubbo (Alibaba):</strong> åœ¨ Java ç”Ÿæ€ä¸­éå¸¸å‡ºåï¼Œè‡ªå¸¦æ²»ç†åŠŸèƒ½ã€‚</li>
</ul>
<h3 data-id="heading-14">TypeScript</h3>
<ul>
<li><strong>ä¸€å±‚â€œé©¬ç”²â€ï¼š</strong> TypeScript = JavaScript + ç±»å‹ç³»ç»Ÿã€‚ å®ƒä¸æ˜¯ä¸€é—¨å…¨æ–°çš„è¯­è¨€ï¼Œå®ƒæœ€ç»ˆä¼šè¢«ç¼–è¯‘ï¼ˆTranspileï¼‰æˆæ™®é€šçš„ JSã€‚ä½ å¯ä»¥æŠŠ TS æƒ³è±¡æˆç»™ JS ç©¿ä¸Šäº†ä¸€å¥—â€œå¤–éª¨éª¼è£…ç”²â€ï¼Œå¢å¼ºäº†ç¨³å®šæ€§å’ŒåŠ›é‡ï¼Œä½†æ ¸å¿ƒè¿˜æ˜¯é‚£ä¸ª JSã€‚</li>
<li><strong>â€œæ´»çš„æ–‡æ¡£â€ï¼š</strong> åœ¨ TS é‡Œï¼Œä½ å®šä¹‰ <code>processTensor(data: TensorConfig)</code>ï¼Œç¼–è¾‘å™¨ï¼ˆVS Codeï¼‰ä¼šå®æ—¶å‘Šè¯‰ä½  data é‡Œæœ‰å“ªäº›å­—æ®µã€‚ä»£ç å³æ–‡æ¡£ã€‚</li>
<li><strong>â€œç¼–è¯‘æœŸæ£€æŸ¥â€ï¼š</strong> JS æ˜¯åŠ¨æ€è¯­è¨€ï¼ˆè¿è¡Œæ—¶æ‰å‘ç°é”™ï¼‰ï¼ŒTS å¼•å…¥äº†é™æ€æ£€æŸ¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">04 ç›¸å…³é“¾æ¥</h2>
<ul>
<li><strong>å®˜ç½‘ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fclawd.bot%2F" target="_blank" title="https://clawd.bot/" ref="nofollow noopener noreferrer">clawd.bot/</a></li>
<li><strong>Githubï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fclawdbot%2Fclawdbot" target="_blank" title="https://github.com/clawdbot/clawdbot" ref="nofollow noopener noreferrer">github.com/clawdbot/clâ€¦</a></li>
<li><strong>TypeScript:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2Ftypescript-from-scratch.html" target="_blank" title="https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html" ref="nofollow noopener noreferrer">www.typescriptlang.org/docs/handboâ€¦</a></li>
<li><strong>Tså®æˆ˜ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Ftypehero.dev%2F" target="_blank" title="https://typehero.dev/" ref="nofollow noopener noreferrer">typehero.dev/</a></li>
</ul>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„åŒåå…¬ä¼—å·ã€‚
æˆ‘å°†æŒç»­åˆ†äº« AI å·¥ç¨‹åŒ–ã€Agent å®æˆ˜åŠç®—æ³•åº”ç”¨ç›¸å…³çš„æ·±åº¦å†…å®¹ã€‚æˆ‘ä»¬ä¸‹æœŸè§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[langchain-HuggingFace æ–‡æœ¬åµŒå…¥ï¼ˆembeddingsï¼‰å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7599330434426421299</link>    <guid>https://juejin.cn/post/7599330434426421299</guid>    <pubDate>2026-01-26T09:43:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599330434426421299" data-draft-id="7599543345979801627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="langchain-HuggingFace æ–‡æœ¬åµŒå…¥ï¼ˆembeddingsï¼‰å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T09:43:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒåœ¨é£æ‰¬AI"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194366823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            langchain-HuggingFace æ–‡æœ¬åµŒå…¥ï¼ˆembeddingsï¼‰å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564194366823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒåœ¨é£æ‰¬AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:43:50.000Z" title="Mon Jan 26 2026 09:43:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">HuggingFace æ–‡æœ¬åµŒå…¥ï¼ˆembeddingsï¼‰å­¦ä¹ æ€»ç»“</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co" target="_blank" title="https://huggingface.co" ref="nofollow noopener noreferrer">huggingface.co</a></p>
<h3 data-id="heading-1">1. HuggingFace è¿œç¨‹åµŒå…¥</h3>
<h4 data-id="heading-2">æ˜¯ä»€ä¹ˆ</h4>
<p>é€šè¿‡ HuggingFace API è°ƒç”¨äº‘ç«¯ embedding æ¨¡å‹ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼Œæ— éœ€æœ¬åœ°ä¸‹è½½æ¨¡å‹æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-3">æœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>å¿«é€ŸéªŒè¯æ¨¡å‹æ•ˆæœ</li>
<li>æ— éœ€æœ¬åœ°ç®—åŠ›èµ„æº</li>
<li>é€‚åˆå¼€å‘æµ‹è¯•ç¯å¢ƒ</li>
</ul>
<h4 data-id="heading-4">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_huggingface <span class="hljs-keyword">import</span> HuggingFaceEndpointEmbeddings
<span class="hljs-keyword">import</span> dotenv

dotenv.load_dotenv()

embeddings = HuggingFaceEndpointEmbeddings(
    model=<span class="hljs-string">"sentence-transformers/all-MiniLM-L12-v2"</span>
)

vector = embeddings.embed_query(<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ç©†å°è¯¾ï¼Œæˆ‘å–œæ¬¢æ‰“ç¯®çƒæ¸¸æ³³"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼š[0.123, -0.456, ...]  384ç»´å‘é‡</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">2. HuggingFace æœ¬åœ°åµŒå…¥</h3>
<h4 data-id="heading-6">æ˜¯ä»€ä¹ˆ</h4>
<p>å°† HuggingFace æ¨¡å‹ä¸‹è½½åˆ°æœ¬åœ°è¿è¡Œï¼Œé€šè¿‡ <code>HuggingFaceEmbeddings</code> å®Œæˆç¦»çº¿æ–‡æœ¬å‘é‡åŒ–ã€‚</p>
<h4 data-id="heading-7">æœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>æ•°æ®éšç§å®‰å…¨ï¼ˆæ–‡æœ¬ä¸ä¸Šä¼ ï¼‰</li>
<li>æ— ç½‘ç»œä¾èµ–</li>
<li>å¯æ‰¹é‡å¤„ç†é™æˆæœ¬</li>
<li>æ”¯æŒè‡ªå®šä¹‰ç¼“å­˜è·¯å¾„</li>
</ul>
<h4 data-id="heading-8">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_huggingface <span class="hljs-keyword">import</span> HuggingFaceEmbeddings

embeddings = HuggingFaceEmbeddings(
    model_name=<span class="hljs-string">"sentence-transformers/all-MiniLM-L12-v2"</span>,
    cache_folder=<span class="hljs-string">"./embeddings/"</span>  <span class="hljs-comment"># æ¨¡å‹ç¼“å­˜ç›®å½•</span>
)

vector = embeddings.embed_query(<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯æ…•å°è¯¾ï¼Œæˆ‘å–œæ¬¢æ‰“ç¯®çƒæ¸¸æ³³"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼š[0.123, -0.456, ...]  384ç»´å‘é‡</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">3. ç™¾åº¦åƒå¸†æ–‡æœ¬åµŒå…¥</h3>
<h4 data-id="heading-10">æ˜¯ä»€ä¹ˆ</h4>
<p>è°ƒç”¨ç™¾åº¦åƒå¸†å¹³å°çš„ embedding APIï¼Œå°†ä¸­æ–‡æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºã€‚</p>
<h4 data-id="heading-11">æœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>ä¸­æ–‡åœºæ™¯ä¼˜åŒ–</li>
<li>å›½äº§åŒ– API æ›¿ä»£æ–¹æ¡ˆ</li>
<li>é…é¢ç®¡ç†çµæ´»</li>
</ul>
<h4 data-id="heading-12">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.embeddings.baidu_qianfan_endpoint <span class="hljs-keyword">import</span> QianfanEmbeddingsEndpoint
<span class="hljs-keyword">import</span> dotenv

dotenv.load_dotenv()

embeddings = QianfanEmbeddingsEndpoint()

vector = embeddings.embed_query(<span class="hljs-string">"æˆ‘å«æ…•å°è¯¾ï¼Œæˆ‘å–œæ¬¢æ‰“ç¯®çƒæ¸¸æ³³"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼šç™¾åº¦è¿”å›çš„å‘é‡è¡¨ç¤º</span>
</code></pre>
<hr/>
<h3 data-id="heading-13">æ€»ç»“å¯¹æ¯”</h3>

























<table><thead><tr><th>æ–¹å¼</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>HuggingFace è¿œç¨‹</td><td>é›¶é…ç½®ï¼Œå³å¼€å³ç”¨</td><td>å¿«é€ŸéªŒè¯åŸå‹</td></tr><tr><td>HuggingFace æœ¬åœ°</td><td>éšç§å®‰å…¨ï¼Œç¦»çº¿å¯ç”¨</td><td>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</td></tr><tr><td>ç™¾åº¦åƒå¸†</td><td>ä¸­æ–‡ä¼˜åŒ–ï¼Œåˆè§„å‹å¥½</td><td>å›½å†…ä¸šåŠ¡åœºæ™¯</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæˆ‘çš„æ‰¹é‡é…ç½®æ²¡ç”Ÿæ•ˆï¼ŸHibernate ä¸ JdbcTemplate æ‰§è¡Œæµç¨‹å¤§èµ·åº•ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7599053532169175081</link>    <guid>https://juejin.cn/post/7599053532169175081</guid>    <pubDate>2026-01-26T09:45:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599053532169175081" data-draft-id="7599237603976544299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæˆ‘çš„æ‰¹é‡é…ç½®æ²¡ç”Ÿæ•ˆï¼ŸHibernate ä¸ JdbcTemplate æ‰§è¡Œæµç¨‹å¤§èµ·åº•ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T09:45:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="define9527"/> <meta itemprop="url" content="https://juejin.cn/user/414960194946937"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæˆ‘çš„æ‰¹é‡é…ç½®æ²¡ç”Ÿæ•ˆï¼ŸHibernate ä¸ JdbcTemplate æ‰§è¡Œæµç¨‹å¤§èµ·åº•ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/414960194946937/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    define9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:45:46.000Z" title="Mon Jan 26 2026 09:45:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸Šä¸€ç¯‡æ–‡ç« æ­å»ºäº†é¡¹ç›®å¹¶å¯¹æ¯”äº†äºŒè€…æ•ˆç‡ï¼Œæœ¬æ–‡å°†æ·±å…¥æºç ï¼Œå‰–æ Hibernate ä¸ JdbcTemplate æ‰¹é‡æ“ä½œçš„å‚æ•°ç”Ÿæ•ˆæœºåˆ¶ä¸æ‰§è¡Œæµç¨‹</p>
</blockquote>
<h2 data-id="heading-0">æºç è§£æ</h2>
<p>ç°åœ¨å°†ä»£ç å‡æŒ‰ç…§æ”¯æŒæ‰¹é‡æ’å…¥å’Œæ‰¹é‡æ›´æ–°çš„è¦æ±‚è¿›è¡Œé…ç½®</p>
<h3 data-id="heading-1">å®ç°åŸç†</h3>
<p>å½’æ ¹ç»“åº•ï¼Œæ‰€æœ‰ä¸Šå±‚æ¡†æ¶ï¼ˆå¦‚ JPA/Hibernateã€MyBatisã€Spring JdbcTemplate ç­‰ï¼‰çš„æ‰¹é‡æ’å…¥æˆ–æ›´æ–°æ“ä½œï¼Œæœ€ç»ˆéƒ½ä¾èµ–äº JDBC æ‰¹å¤„ç†ï¼ˆBatch Processingï¼‰ æœºåˆ¶æ¥å®ç°çœŸæ­£çš„æ‰¹é‡æ‰§è¡Œ</p>
<blockquote>
<p>ä»¥ä¸‹ä»£ç å‚è€ƒè‡ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fliaoxuefeng.com%2Fbooks%2Fjava%2Fjdbc%2Fbatch%2Findex.html" target="_blank" title="https://liaoxuefeng.com/books/java/jdbc/batch/index.html" ref="nofollow noopener noreferrer">JDBC æ‰¹å¤„ç†</a></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"INSERT INTO students (name, gender, grade, score) VALUES (?, ?, ?, ?)"</span>)) {
    <span class="hljs-comment">// å¯¹åŒä¸€ä¸ªPreparedStatementåå¤è®¾ç½®å‚æ•°å¹¶è°ƒç”¨addBatch()</span>
    <span class="hljs-keyword">for</span> (Student s : students) {
        ps.setString(<span class="hljs-number">1</span>, s.name);
        ps.setBoolean(<span class="hljs-number">2</span>, s.gender);
        ps.setInt(<span class="hljs-number">3</span>, s.grade);
        ps.setInt(<span class="hljs-number">4</span>, s.score);
        ps.addBatch();
    }
    <span class="hljs-comment">// æ‰§è¡Œbatch</span>
    <span class="hljs-type">int</span>[] ns = ps.executeBatch();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n : ns) {
        System.out.println(n + <span class="hljs-string">" inserted."</span>);
    }
}
</code></pre>
<p>JDBCï¼ˆJava Database Connectivityï¼‰æœ¬èº«åªæ˜¯ä¸€å¥—æ ‡å‡†çš„ Java API è§„èŒƒï¼Œç”± Oracleï¼ˆåŸ Sun Microsystemsï¼‰å®šä¹‰ï¼Œç”¨äºç»Ÿä¸€ Java åº”ç”¨ä¸å…³ç³»å‹æ•°æ®åº“çš„äº¤äº’æ–¹å¼ã€‚å®ƒè§„å®šäº†æ¥å£ï¼ˆå¦‚ <code>Connection</code>ã€<code>Statement</code>ã€<code>PreparedStatement</code>ã€<code>ResultSet</code> ç­‰ï¼‰å’Œè¡Œä¸ºï¼Œä½†ä¸åŒ…å«å…·ä½“å®ç°</p>
<p>å…·ä½“çš„å®ç°ç”±æ•°æ®åº“å‚å•†æˆ–ç¬¬ä¸‰æ–¹é©±åŠ¨æä¾›è€…å®Œæˆï¼Œä»¥ JDBC é©±åŠ¨ï¼ˆDriverï¼‰çš„å½¢å¼å­˜åœ¨ï¼Œè¿™äº›é©±åŠ¨å®ç°äº† JDBC è§„èŒƒä¸­å®šä¹‰çš„æ¥å£ï¼Œå¹¶å°è£…äº†ä¸å„è‡ªæ•°æ®åº“é€šä¿¡çš„åº•å±‚åè®®</p>

























<table><thead><tr><th align="left">æ•°æ®åº“</th><th align="left">JDBC é©±åŠ¨å®ç°ï¼ˆå‚å•†æä¾›ï¼‰</th></tr></thead><tbody><tr><td align="left">MySQL</td><td align="left"><code>com.mysql.cj.jdbc.Driver</code>ï¼ˆç”± Oracle/MySQL å®˜æ–¹ç»´æŠ¤ï¼‰</td></tr><tr><td align="left">PostgreSQL</td><td align="left"><code>org.postgresql.Driver</code>ï¼ˆç¤¾åŒºå®˜æ–¹é©±åŠ¨ï¼‰</td></tr><tr><td align="left">Oracle</td><td align="left"><code>oracle.jdbc.OracleDriver</code>ï¼ˆç”± Oracle æä¾›ï¼‰</td></tr><tr><td align="left">SQL Server</td><td align="left"><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code>ï¼ˆå¾®è½¯æä¾›ï¼‰</td></tr></tbody></table>
<p>æ‰€ä»¥ PreparedStatement çš„ addBatch å’Œ executeBatch æ–¹æ³•çš„å®ç°æºç å¾—å»å¯¹åº”çš„é©±åŠ¨ä¸­æ‰¾</p>
<h3 data-id="heading-2">JdbcTemplate æ‰¹å¤„ç†</h3>
<p>ç›´æ¥ä½¿ç”¨ testJdbcTemplateBatchInsertPerformance æ–¹æ³•è¿›è¡Œè°ƒè¯•</p>
<h4 data-id="heading-3">JdbcTemplate å±‚çš„å¤„ç†</h4>
<p>è¿›å…¥ batchUpdate ä¹‹åï¼Œä¾¿å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„ addBatch å’Œ executeBatch æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcTemplate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JdbcAccessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcOperations</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-type">int</span>[][] batchUpdate(
        String sql, 
        Collection&lt;T&gt; batchArgs, 
        <span class="hljs-type">int</span> batchSize,
        ParameterizedPreparedStatementSetter&lt;T&gt; pss
    ) <span class="hljs-keyword">throws</span> DataAccessException {
        <span class="hljs-comment">// ParameterizedPreparedStatementSetter åªæœ‰ä¸€ä¸ªæ–¹æ³•</span>
        <span class="hljs-comment">// setValues(PreparedStatement ps, T argument)</span>
        <span class="hljs-comment">// å®ƒçš„ä½œç”¨å°±æ˜¯ç»™ PreparedStatement è®¾å€¼ï¼Œargument å‚æ•°å€¼é€šå¸¸æ˜¯å®ä½“å¯¹è±¡</span>
        <span class="hljs-type">int</span>[][] result = execute(sql, (PreparedStatementCallback&lt;<span class="hljs-type">int</span>[][]&gt;) ps -&gt; {
            List&lt;<span class="hljs-type">int</span>[]&gt; rowsAffected = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">batchSupported</span> <span class="hljs-operator">=</span> JdbcUtils.supportsBatchUpdates(ps.getConnection());
                <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
                <span class="hljs-keyword">for</span> (T obj : batchArgs) {
                    <span class="hljs-comment">// åˆ©ç”¨ obj ç»™ PreparedStatement è®¾å€¼</span>
                    pss.setValues(ps, obj);
                    n++;
                    <span class="hljs-keyword">if</span> (batchSupported) {
                        ps.addBatch();
                        <span class="hljs-keyword">if</span> (n % batchSize == <span class="hljs-number">0</span> || n == batchArgs.size()) {
                            <span class="hljs-keyword">try</span> {
                                <span class="hljs-type">int</span>[] updateCounts = ps.executeBatch();
                                rowsAffected.add(updateCounts);
                            }
                            <span class="hljs-keyword">catch</span> (BatchUpdateException ex) {
                                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregatedBatchUpdateException</span>(rowsAffected.toArray(<span class="hljs-type">int</span>[][]::<span class="hljs-keyword">new</span>), ex);
                            }
                        }
                    }
                    <span class="hljs-keyword">else</span> {
                        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> ps.executeUpdate();
                        rowsAffected.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] {i});
                    }
                }
                <span class="hljs-type">int</span>[][] result1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[rowsAffected.size()][];
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; result1.length; i++) {
                    result1[i] = rowsAffected.get(i);
                }
                <span class="hljs-keyword">return</span> result1;
            }
            <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (pss <span class="hljs-keyword">instanceof</span> ParameterDisposer parameterDisposer) {
                    parameterDisposer.cleanupParameters();
                }
            }
        });
        Assert.state(result != <span class="hljs-literal">null</span>, <span class="hljs-string">"No result array"</span>);
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>execute æ–¹æ³•ä¸»è¦ç”¨äºåˆ›å»º PreparedStatement å¯¹è±¡å’Œæ‰§è¡Œ PreparedStatementCallback å›è°ƒï¼Œæ‰€åˆ›å»ºçš„ PreparedStatement å¯¹è±¡å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™ PreparedStatementCallback å›è°ƒæ¥å£è¿›è¡Œæ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcTemplate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JdbcAccessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcOperations</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">execute</span><span class="hljs-params">(String sql, PreparedStatementCallback&lt;T&gt; action)</span> <span class="hljs-keyword">throws</span> DataAccessException {
        <span class="hljs-keyword">return</span> execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimplePreparedStatementCreator</span>(sql), action, <span class="hljs-literal">true</span>);
    }

    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">private</span> &lt;T&gt; T <span class="hljs-title function_">execute</span><span class="hljs-params">(PreparedStatementCreator psc, PreparedStatementCallback&lt;T&gt; action, <span class="hljs-type">boolean</span> closeResources)</span> <span class="hljs-keyword">throws</span> DataAccessException {
        <span class="hljs-comment">// è·å–è¿æ¥</span>
        <span class="hljs-type">Connection</span> <span class="hljs-variable">con</span> <span class="hljs-operator">=</span> DataSourceUtils.getConnection(obtainDataSource());
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»º PreparedStatement å¯¹è±¡</span>
            ps = psc.createPreparedStatement(con);
            applyStatementSettings(ps);
            <span class="hljs-comment">// ä¼ å…¥ PreparedStatement å¯¹è±¡ï¼Œæ‰§è¡Œ PreparedStatementCallback å›è°ƒ</span>
            <span class="hljs-type">T</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> action.doInPreparedStatement(ps);
            handleWarnings(ps);
            <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-keyword">catch</span> (SQLException ex) {
            <span class="hljs-comment">// ...</span>
        }
        <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ...</span>
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimplePreparedStatementCreator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PreparedStatementCreator</span>, SqlProvider {

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String sql;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">SimplePreparedStatementCreator</span><span class="hljs-params">(String sql)</span> {
            Assert.notNull(sql, <span class="hljs-string">"SQL must not be null"</span>);
            <span class="hljs-built_in">this</span>.sql = sql;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> PreparedStatement <span class="hljs-title function_">createPreparedStatement</span><span class="hljs-params">(Connection con)</span> <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-keyword">return</span> con.prepareStatement(<span class="hljs-built_in">this</span>.sql);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSql</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.sql;
        }
    }
}
</code></pre>
<p>åœ¨ JdbcTemplate#batchUpdate æ–¹æ³•é‡Œæ³¨å†Œçš„ PreparedStatementCallback å›è°ƒä¸­æœ‰ä¸€ä¸ª batchSupported å˜é‡ç”¨äºæ§åˆ¶æ˜¯å¦æ‰§è¡Œæ‰¹é‡æ“ä½œï¼Œè€Œ <code>JdbcUtils#supportsBatchUpdates</code> æœ€ç»ˆè°ƒç”¨çš„æ˜¯ <code>com.mysql.cj.jdbc.DatabaseMetaData#supportsBatchUpdates</code> æ–¹æ³•ï¼Œä¸”æ­¤æ–¹æ³•ç›´æ¥è¿”å› true</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtils</span> {

    <span class="hljs-comment">/**
	 * Return whether the given JDBC driver supports JDBC batch updates.
	 * &lt;p&gt;Typically invoked right before execution of a given set of statements:
	 * to decide whether the set of SQL statements should be executed through
	 * the JDBC batch mechanism or simply in a traditional one-by-one fashion.
	 * &lt;p&gt;Logs a warning if the "supportsBatchUpdates" methods throws an exception
	 * and simply returns {<span class="hljs-doctag">@code</span> false} in that case.
	 * <span class="hljs-doctag">@param</span> con the Connection to check
	 * <span class="hljs-doctag">@return</span> whether JDBC batch updates are supported
	 * <span class="hljs-doctag">@see</span> java.sql.DatabaseMetaData#supportsBatchUpdates()
	 */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsBatchUpdates</span><span class="hljs-params">(Connection con)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">DatabaseMetaData</span> <span class="hljs-variable">dbmd</span> <span class="hljs-operator">=</span> con.getMetaData();
            <span class="hljs-keyword">if</span> (dbmd != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (dbmd.supportsBatchUpdates()) {
                    logger.debug(<span class="hljs-string">"JDBC driver supports batch updates"</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">else</span> {
                    logger.debug(<span class="hljs-string">"JDBC driver does not support batch updates"</span>);
                }
            }
        }
        <span class="hljs-keyword">catch</span> (SQLException ex) {
            logger.debug(<span class="hljs-string">"JDBC driver 'supportsBatchUpdates' method threw exception"</span>, ex);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.mysql.cj.jdbc;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseMetaData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">java</span>.sql.DatabaseMetaData {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsBatchUpdates</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h4 data-id="heading-4">Driver å±‚çš„å¤„ç†</h4>
<p>PreparedStatement çš„ addBatch å’Œ executeBatch æ–¹æ³•ç”±å‚å•†å®ç°ï¼ŒaddBatch çš„å®ç°ä¸º <code>com.mysql.cj.jdbc.ClientPreparedStatement#addBatch</code>ï¼ŒexecuteBatch çš„å®ç°ä¸º <code>com.mysql.cj.jdbc.StatementImpl#executeBatch</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.mysql.cj.jdbc;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientPreparedStatement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">com</span>.mysql.cj.jdbc.StatementImpl <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcPreparedStatement</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBatch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">Lock</span> <span class="hljs-variable">connectionLock</span> <span class="hljs-operator">=</span> checkClosed().getConnectionLock();
        connectionLock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">QueryBindings</span> <span class="hljs-variable">queryBindings</span> <span class="hljs-operator">=</span> ((PreparedQuery) <span class="hljs-built_in">this</span>.query).getQueryBindings();
            queryBindings.checkAllParametersSet();
            <span class="hljs-comment">// è®¾å€¼</span>
            <span class="hljs-built_in">this</span>.query.addBatch(queryBindings.clone());
        } <span class="hljs-keyword">finally</span> {
            connectionLock.unlock();
        }
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.mysql.cj.jdbc;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StatementImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcStatement</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] executeBatch() <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// è°ƒç”¨ ClientPreparedStatement#executeBatchInternal æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> Util.truncateAndConvertToInt(executeBatchInternal());
    }
}
</code></pre>
<p>ClientPreparedStatement é‡å†™äº† StatementImpl#executeBatchInternal æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.mysql.cj.jdbc;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientPreparedStatement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">com</span>.mysql.cj.jdbc.StatementImpl <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcPreparedStatement</span> {

    <span class="hljs-comment">/**
     * Does the batch (if any) contain "plain" statements added by Statement.addBatch(String)?
     *
     * If so, we can't re-write it to use multi-value or multi-queries.
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">batchHasPlainStatements</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span>[] executeBatchInternal() <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">Lock</span> <span class="hljs-variable">connectionLock</span> <span class="hljs-operator">=</span> checkClosed().getConnectionLock();
        connectionLock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">try</span> (<span class="hljs-type">TelemetryScope</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> span.makeCurrent()) {

                <span class="hljs-comment">// ...</span>

                <span class="hljs-comment">// å–å€¼</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.query.getBatchedArgs() == <span class="hljs-literal">null</span> || <span class="hljs-built_in">this</span>.query.getBatchedArgs().size() == <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[<span class="hljs-number">0</span>];
                }
                <span class="hljs-comment">// we timeout the entire batch, not individual statements</span>
                <span class="hljs-type">long</span> <span class="hljs-variable">batchTimeout</span> <span class="hljs-operator">=</span> getTimeoutInMillis();
                setTimeoutInMillis(<span class="hljs-number">0</span>);
                resetCancelledState();
                <span class="hljs-keyword">try</span> {
                    statementBegins();
                    clearWarnings();
                    <span class="hljs-comment">// rewriteBatchedStatementsæ˜¯JDBCè¿æ¥ä¸²ä¸­çš„rewriteBatchedStatementså‚æ•°</span>
                    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.batchHasPlainStatements &amp;&amp; <span class="hljs-built_in">this</span>.rewriteBatchedStatements.getValue()) {
                        <span class="hljs-comment">// Can this query be rewritten as a multi-values clause</span>
                        <span class="hljs-keyword">if</span> (getQueryInfo().isRewritableWithMultiValuesClause()) {
                            <span class="hljs-comment">// èµ°æ­¤åˆ†æ”¯</span>
                            <span class="hljs-keyword">return</span> executeBatchWithMultiValuesClause(batchTimeout);
                        }
                        <span class="hljs-comment">// ...</span>
                    }
                    <span class="hljs-comment">// é€šè¿‡é€æ¡æ‰§è¡Œçš„æ–¹å¼ï¼Œæ‰§è¡Œå½“å‰æ‰¹æ¬¡ä¸­çš„æ‰€æœ‰è¯­å¥</span>
                    <span class="hljs-keyword">return</span> executeBatchSerially(batchTimeout);
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-built_in">this</span>.query.getStatementExecuting().set(<span class="hljs-literal">false</span>);
                    setTimeoutInMillis(batchTimeout);
                    clearBatch();
                }
            } <span class="hljs-keyword">catch</span> (Throwable t) {
                span.setError(t);
                <span class="hljs-keyword">throw</span> t;
            } <span class="hljs-keyword">finally</span> {
                span.end();
            }
        } <span class="hljs-keyword">finally</span> {
            connectionLock.unlock();
        }
    }
}
</code></pre>
<p>åœ¨ ClientPreparedStatement#executeBatchInternal æ–¹æ³•ä¸­ï¼Œç”± batchHasPlainStatements å’Œ rewriteBatchedStatements ä¸¤ä¸ªå˜é‡æ¥æ§åˆ¶æ˜¯å¦æ‰§è¡Œæ‰¹é‡æ“ä½œï¼ŒrewriteBatchedStatements å…¶å®å°±æ˜¯ JDBC è¿æ¥ä¸²ä¸­çš„ rewriteBatchedStatements å‚æ•°</p>
<p>batchHasPlainStatements çš„å«ä¹‰æ˜¯ï¼šæ ‡è®°å½“å‰ JDBC æ‰¹å¤„ç†ä¸­æ˜¯å¦åŒ…å«é€šè¿‡ <code>Statement.addBatch(String sql)</code> æ·»åŠ çš„æ™®é€šï¼ˆplainï¼‰SQL è¯­å¥</p>
<p>JDBC æ”¯æŒä¸¤ç§æ–¹å¼æ·»åŠ æ‰¹å¤„ç†</p>
<ol>
<li>ä½¿ç”¨ <code>PreparedStatement</code>ï¼ˆæ¨èï¼‰</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"INSERT INTO users (name) VALUES (?)"</span>);
ps.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>);
ps.addBatch();
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ <code>Statement</code> + åŸå§‹ SQL å­—ç¬¦ä¸²ï¼ˆä¸æ¨èç”¨äºæ‰¹é‡ï¼‰</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> connection.createStatement();
stmt.addBatch(<span class="hljs-string">"INSERT INTO users (name) VALUES ('Alice')"</span>);
stmt.addBatch(<span class="hljs-string">"INSERT INTO users (name) VALUES ('Bob')"</span>);
</code></pre>
<p>å½“é©±åŠ¨ï¼ˆå¦‚ MySQL Connector/Jï¼‰æ£€æµ‹åˆ°æ‰¹å¤„ç†ä¸­æ··å…¥äº†é€šè¿‡ <code>Statement.addBatch(String)</code> æ·»åŠ çš„åŸå§‹ SQLï¼Œå°±ä¼šå°† <code>batchHasPlainStatements = true</code>ï¼Œä¸€æ—¦è¯¥æ ‡å¿—ä¸º <code>true</code>ï¼Œé©±åŠ¨å°†æ”¾å¼ƒå¯¹æ•´ä¸ªæ‰¹å¤„ç†è¿›è¡Œä¼˜åŒ–é‡å†™ï¼ˆä¾‹å¦‚ä¸ä¼šç”Ÿæˆå¤šå€¼ INSERT æˆ–å¤šè¯­å¥æŸ¥è¯¢ï¼‰ï¼Œè€Œæ˜¯æŒ‰åŸå§‹æ–¹å¼é€æ¡æ‰§è¡Œ</p>
<p>å› æ­¤ï¼Œè¦å¯ç”¨ rewriteBatchedStatements çš„æ‰¹é‡ä¼˜åŒ–ï¼Œå¿…é¡»å…¨ç¨‹ä½¿ç”¨ PreparedStatementï¼Œé¿å…ä½¿ç”¨ <code>Statement.addBatch(String)</code></p>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡å‘¢</p>
<ol>
<li>
<p>SQL è¯­ä¹‰ä¸å¯é¢„æµ‹ï¼ˆCorrectness Firstï¼‰ï¼šé€šè¿‡ <code>Statement.addBatch(String sql)</code> æ·»åŠ çš„ SQL æ˜¯ä»»æ„å­—ç¬¦ä¸²</p>
<pre><code class="hljs language-java" lang="java">stmt.addBatch(<span class="hljs-string">"INSERT INTO users (name) VALUES ('Alice')"</span>);
stmt.addBatch(<span class="hljs-string">"UPDATE orders SET status = 'paid' WHERE id = 1"</span>);
stmt.addBatch(<span class="hljs-string">"DELETE FROM logs WHERE created &lt; '2020-01-01'"</span>);
</code></pre>
<p>è¿™äº›è¯­å¥ç±»å‹ä¸åŒï¼ˆINSERT / UPDATE / DELETEï¼‰ã€æ“ä½œä¸åŒè¡¨ã€è¯­æ³•ç»“æ„å®Œå…¨ä¸åŒï¼Œé©±åŠ¨æ— æ³•å®‰å…¨åœ°å°†å®ƒä»¬åˆå¹¶æˆä¸€æ¡ SQLï¼Œå¼ºè¡Œé‡å†™ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–é€»è¾‘é”™è¯¯ï¼ˆæ¯”å¦‚æŠŠ DELETE å’Œ INSERT æ‹¼åœ¨ä¸€èµ·ï¼‰</p>
</li>
<li>
<p>æ— æ³•ä¿è¯åŒæ„æ€§ï¼š<code>rewriteBatchedStatements</code> çš„ä¼˜åŒ–å‰ææ˜¯æ‰€æœ‰æ‰¹å¤„ç†è¯­å¥å…·æœ‰ç›¸åŒçš„ SQL æ¨¡æ¿ï¼Œå³åŒæ„</p>
<pre><code class="hljs language-mysql" lang="mysql">-- åªæ˜¯å‚æ•°ä¸åŒ
INSERT INTO users (name, age) VALUES (?, ?)
</code></pre>
<p>åªæœ‰è¿™æ ·ï¼Œé©±åŠ¨æ‰èƒ½å®‰å…¨åœ°é‡å†™ä¸º</p>
<pre><code class="hljs language-mysql" lang="mysql">INSERT INTO users (name, age) VALUES (?, ?), (?, ?), (?, ?)
</code></pre>
<p>ä½† <code>Statement.addBatch(String)</code> ä¸­çš„ SQL å¯èƒ½æ˜¯å®Œå…¨ä¸åŒçš„è¡¨ã€ä¸åŒçš„åˆ—æ•°ã€åŒ…å«å­æŸ¥è¯¢ã€å‡½æ•°ã€æ³¨é‡Šç­‰å¤æ‚ç»“æ„ï¼Œä¸€æ—¦æ··å…¥ä¸€æ¡å¼‚æ„ SQLï¼Œæ•´ä¸ªæ‰¹å¤„ç†å°±ä¸å†åŒæ„ï¼Œä¼˜åŒ–å¿…é¡»æ”¾å¼ƒ</p>
</li>
<li>
<p>é¿å…éƒ¨åˆ†ä¼˜åŒ–å¸¦æ¥çš„ä¸ä¸€è‡´æ€§ï¼šå‡è®¾é©±åŠ¨å°è¯•åªä¼˜åŒ–çœ‹èµ·æ¥åƒçš„éƒ¨åˆ†</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰¹å¤„ç†å†…å®¹</span>
addBatch(<span class="hljs-string">"INSERT INTO t VALUES (1)"</span>);
addBatch(<span class="hljs-string">"INSERT INTO t VALUES (?)"</span>); <span class="hljs-comment">// â† PreparedStatement æ·»åŠ çš„</span>
addBatch(<span class="hljs-string">"INSERT INTO t VALUES (2)"</span>);
</code></pre>
<p>å¦‚æœé©±åŠ¨åªæŠŠç¬¬1å’Œç¬¬3æ¡åˆå¹¶ï¼Œè€Œç¬¬2æ¡å•ç‹¬å¤„ç†ï¼Œä¼šå¯¼è‡´</p>
<ul>
<li>æ‰§è¡Œé¡ºåºé”™ä¹±ï¼ˆJDBC è¦æ±‚æŒ‰ addBatch é¡ºåºæ‰§è¡Œï¼‰</li>
<li>äº‹åŠ¡è¯­ä¹‰ç ´åï¼ˆä¸­é—´å¤±è´¥æ—¶å›æ»šè¡Œä¸ºä¸ä¸€è‡´ï¼‰</li>
<li>è¿”å›ç»“æœæ•°ç»„ï¼ˆupdate countsï¼‰é¡ºåºé”™ä½</li>
</ul>
<p>JDBC è§„èŒƒè¦æ±‚ <code>executeBatch()</code> è¿”å›çš„ <code>int[]</code> å¿…é¡»ä¸ <code>addBatch()</code> çš„è°ƒç”¨é¡ºåºä¸€ä¸€å¯¹åº”ã€‚å› æ­¤ï¼Œè¦ä¹ˆå…¨éƒ¨ä¼˜åŒ–ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸ä¼˜åŒ–ï¼Œåªè¦æœ‰ä¸€æ¡ plain statement å°±åªèƒ½èµ°ä¿å®ˆè·¯å¾„</p>
</li>
<li>
<p>å®ç°å¤æ‚åº¦ä¸æ”¶ç›Šä¸æˆæ­£æ¯”ï¼šä¸ºäº†æ”¯æŒæ··åˆæ‰¹å¤„ç†çš„æ™ºèƒ½é‡å†™ï¼Œé©±åŠ¨éœ€è¦</p>
<ul>
<li>è§£ææ¯æ¡ SQL å­—ç¬¦ä¸²ï¼ˆå¼€é”€å¤§ï¼‰</li>
<li>åˆ¤æ–­æ˜¯å¦å¯åˆå¹¶ï¼ˆè¯­æ³•åˆ†æã€AST æ„å»ºï¼‰</li>
<li>åˆ†ç»„é‡å†™å¹¶ä¿æŒé¡ºåºï¼ˆé€»è¾‘å¤æ‚ï¼‰</li>
</ul>
<p>è€Œç°å®ä¸­ï¼š</p>
<ul>
<li>æ­£ç¡®ä½¿ç”¨æ‰¹é‡æ“ä½œçš„å¼€å‘è€…å‡ ä¹ä¸ä¼šæ··ç”¨ <code>Statement.addBatch(String)</code></li>
<li>çœŸæ­£éœ€è¦é«˜æ€§èƒ½æ‰¹é‡çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®å¯¼å…¥ï¼‰éƒ½ä¼šç”¨ <code>PreparedStatement</code></li>
</ul>
<p>æ‰€ä»¥ï¼Œç›´æ¥ç¦ç”¨ä¼˜åŒ–æ˜¯æœ€ç®€å•ã€æœ€å®‰å…¨ã€æœ€é«˜æ•ˆçš„è®¾è®¡</p>
</li>
</ol>
<p>è¿™ç§è®¾è®¡çœ‹ä¼¼ä¸€åˆ€åˆ‡ï¼Œå®åˆ™æ˜¯åœ¨å¤æ‚æ€§ã€å®‰å…¨æ€§ä¸æ€§èƒ½ä¹‹é—´åšå‡ºçš„æˆç†Ÿå·¥ç¨‹å–èˆ</p>
<h3 data-id="heading-5">Hibernate æ‰¹å¤„ç†</h3>
<p>ç›´æ¥ä½¿ç”¨ testHibernateBatchUpdatePerformance æ–¹æ³•è¿›è¡Œè°ƒè¯•ã€‚å®é™…ä¸Šï¼Œæœ€ç»ˆåº•å±‚ä»ä¼šè°ƒç”¨ MySQL é©±åŠ¨ä¸­ <code>ClientPreparedStatement</code> çš„ <code>addBatch()</code> å’Œ <code>executeBatchInternal()</code> æ–¹æ³•ã€‚å› æ­¤ï¼Œæœ¬èŠ‚é‡ç‚¹ä¸åœ¨äº JDBC é©±åŠ¨çš„æ‰§è¡Œç»†èŠ‚ï¼Œè€Œåœ¨äºè¯´æ˜ Hibernate å„ç›¸å…³é…ç½®å‚æ•°ï¼ˆå¦‚ <code>order_inserts</code>ã€<code>jdbc.batch_size</code> ç­‰ï¼‰åœ¨æ‰¹å¤„ç†æµç¨‹ä¸­å®é™…ç”Ÿæ•ˆçš„ä½ç½®å’Œä½œç”¨æœºåˆ¶</p>
<h4 data-id="heading-6">ActionQueue</h4>
<p><code>ActionQueue</code> ç”¨äºå­˜æ”¾ä½œä¸ºä¼šè¯äº‹åŠ¡æ€§å†™å»¶è¿Ÿï¼ˆtransactional write-behindï¼‰è¯­ä¹‰ä¸€éƒ¨åˆ†è€Œæ’é˜Ÿçš„ DML æ“ä½œï¼Œè¿™äº› DML æ“ä½œä¼šåœ¨æ­¤é˜Ÿåˆ—ä¸­æš‚å­˜ï¼Œç›´åˆ°æ‰§è¡Œ flush æ“ä½œæ—¶æ‰çœŸæ­£æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Responsible for maintaining the queue of actions related to events.
 * &lt;p&gt;
 * The {<span class="hljs-doctag">@code</span> ActionQueue} holds the DML operations queued as part of a session's transactional-write-behind semantics.
 * The DML operations are queued here until a flush forces them to be executed against the database.
 *
 * <span class="hljs-doctag">@author</span> Steve Ebersole
 * <span class="hljs-doctag">@author</span> Gail Badner
 * <span class="hljs-doctag">@author</span> Anton Marsden
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {
    <span class="hljs-comment">// Object insertions, updates, and deletions have list semantics because</span>
    <span class="hljs-comment">// they must happen in the right order to respect referential integrity</span>
    <span class="hljs-keyword">private</span> ExecutableList&lt;AbstractEntityInsertAction&gt; insertions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityDeleteAction&gt; deletions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityUpdateAction&gt; updates;
}
</code></pre>
<p>åœ¨è°ƒç”¨ <code>EntityManager#persist()</code>ï¼ˆæ’å…¥åœºæ™¯ï¼‰æˆ– <code>EntityManager#flush()</code>ï¼ˆè§¦å‘è„æ£€æŸ¥å’Œæ›´æ–°ï¼‰ç­‰æ–¹æ³•æ—¶ï¼ŒHibernate ä¼šé€šè¿‡äº‹ä»¶ç›‘å¬æœºåˆ¶å°†ç›¸åº”çš„æ•°æ®åº“æ“ä½œå°è£…ä¸ºåŠ¨ä½œï¼ˆActionï¼‰å¹¶åŠ å…¥åˆ° <code>ActionQueue</code> ä¸­</p>
<ul>
<li>æ’å…¥æ“ä½œç”± <code>DefaultPersistEventListener</code> å¤„ç†ï¼Œç”Ÿæˆ <code>EntityInsertAction</code> å¹¶åŠ å…¥é˜Ÿåˆ—</li>
<li>æ›´æ–°æ“ä½œç”± <code>DefaultFlushEntityEventListener</code> åœ¨ flush é˜¶æ®µæ£€æµ‹åˆ°è„æ•°æ®åï¼Œç”Ÿæˆ <code>EntityUpdateAction</code> å¹¶åŠ å…¥é˜Ÿåˆ—</li>
<li>æ’å…¥æ“ä½œç”± <code>DefaultDeleteEventListener</code> å¤„ç†ï¼Œç”Ÿæˆ <code>EntityDeleteAction</code> å¹¶åŠ å…¥é˜Ÿåˆ—</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> ExecutableList&lt;AbstractEntityInsertAction&gt; insertions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityDeleteAction&gt; deletions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityUpdateAction&gt; updates;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAction</span><span class="hljs-params">(EntityInsertAction action)</span> {
        LOG.tracev( <span class="hljs-string">"Adding an EntityInsertAction for [{0}] object"</span>, action.getEntityName() );
        addInsertAction( action );
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInsertAction</span><span class="hljs-params">(AbstractEntityInsertAction insert)</span> {

        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">final</span> <span class="hljs-type">NonNullableTransientDependencies</span> <span class="hljs-variable">nonNullableTransientDependencies</span> <span class="hljs-operator">=</span> insert.findNonNullableTransientEntities();
        <span class="hljs-keyword">if</span> ( nonNullableTransientDependencies == <span class="hljs-literal">null</span> ) {
            LOG.tracev( <span class="hljs-string">"Adding insert with no non-nullable, transient entities: [{0}]"</span>, insert );
            addResolvedEntityInsertAction( insert );
        }

        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addResolvedEntityInsertAction</span><span class="hljs-params">(AbstractEntityInsertAction insert)</span> {
        <span class="hljs-keyword">if</span> ( insert.isEarlyInsert() ) {
            LOG.trace( <span class="hljs-string">"Executing insertions before resolved early-insert"</span> );
            executeInserts();
            LOG.debug( <span class="hljs-string">"Executing identity-insert immediately"</span> );
            execute( insert );
        }
        <span class="hljs-keyword">else</span> {
            LOG.trace( <span class="hljs-string">"Adding resolved non-early insert action."</span> );
            <span class="hljs-comment">// åˆå§‹åŒ–</span>
            OrderedActions.EntityInsertAction.ensureInitialized( <span class="hljs-built_in">this</span> );
            insertions.add( insert );
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAction</span><span class="hljs-params">(EntityDeleteAction action)</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–</span>
        OrderedActions.EntityDeleteAction.ensureInitialized( <span class="hljs-built_in">this</span> );
        deletions.add( action );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAction</span><span class="hljs-params">(<span class="hljs-keyword">final</span> EntityUpdateAction action)</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–</span>
        OrderedActions.EntityUpdateAction.ensureInitialized( <span class="hljs-built_in">this</span> );
        updates.add( action );
    }
}
</code></pre>
<p>åœ¨è°ƒç”¨ <code>OrderedActions.EntityXXXAction.ensureInitialized()</code> æ—¶ï¼Œä¼šåˆå§‹åŒ– <code>insertions</code>ã€<code>deletions</code> å’Œ <code>updates</code> ç­‰æ“ä½œé˜Ÿåˆ—ï¼Œå¹¶æ ¹æ®é…ç½®ï¼ˆå¦‚ <code>order_inserts</code>ã€<code>order_updates</code>ï¼‰è®¾ç½®ç›¸åº”çš„æ’åºè§„åˆ™</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> ExecutableList&lt;AbstractEntityInsertAction&gt; insertions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityDeleteAction&gt; deletions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityUpdateAction&gt; updates;

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderUpdatesEnabled</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> session.getFactory().getSessionFactoryOptions().isOrderUpdatesEnabled();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderInsertsEnabled</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> session.getFactory().getSessionFactoryOptions().isOrderInsertsEnabled();
    }

    <span class="hljs-comment">// The order of these operations is very important</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderedActions</span> {
        EntityInsertAction {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ExecutableList&lt;?&gt; getActions(ActionQueue instance) {
                <span class="hljs-keyword">return</span> instance.insertions;
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureInitialized</span><span class="hljs-params">(<span class="hljs-keyword">final</span> ActionQueue instance)</span> {
                <span class="hljs-keyword">if</span> ( instance.insertions == <span class="hljs-literal">null</span> ) {
                    <span class="hljs-comment">// order_inserts å‚æ•°åœ¨æ­¤å¤„ä½¿ç”¨</span>
                    instance.insertions = instance.isOrderInsertsEnabled()
                        ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( InsertActionSorter.INSTANCE )
                        : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( <span class="hljs-literal">false</span> );
                }
            }
        },
        EntityUpdateAction {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ExecutableList&lt;?&gt; getActions(ActionQueue instance) {
                <span class="hljs-keyword">return</span> instance.updates;
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureInitialized</span><span class="hljs-params">(ActionQueue instance)</span> {
                <span class="hljs-keyword">if</span> ( instance.updates == <span class="hljs-literal">null</span> ) {
                    <span class="hljs-comment">// order_updates å‚æ•°åœ¨æ­¤å¤„ä½¿ç”¨</span>
                    instance.updates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( instance.isOrderUpdatesEnabled() );
                }
            }
        },
        EntityDeleteAction {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ExecutableList&lt;?&gt; getActions(ActionQueue instance) {
                <span class="hljs-keyword">return</span> instance.deletions;
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureInitialized</span><span class="hljs-params">(ActionQueue instance)</span> {
                <span class="hljs-keyword">if</span> ( instance.deletions == <span class="hljs-literal">null</span> ) {
                    instance.deletions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( <span class="hljs-literal">false</span> );
                }
            }
        };
    }
}
</code></pre>
<p>åœ¨ <code>ActionQueue</code> ä¸­ï¼Œ<code>insertions</code>ã€<code>deletions</code> å’Œ <code>updates</code> ä¸‰ä¸ªé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å‡ä¸º <code>EntityAction</code> çš„å­ç±»ã€‚<code>EntityAction</code> å®ç°äº† <code>Comparable</code> æ¥å£ï¼Œç”¨äºæ”¯æŒåç»­çš„æ’åºæ“ä½œï¼Œå…¶æ’åºä¾æ®æ˜¯ï¼šå…ˆæŒ‰å®ä½“åç§°æ’åºï¼ŒåŒåå®ä½“å†æŒ‰å¯¹è±¡ ID æ’åº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c83c2f7697464c78926d29e9d06cb5c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVmaW5lOTUyNw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025546&amp;x-signature=LygWeXWq9AZsOCAufffOiBNYsfI%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Base class for actions relating to insert/update/delete of an entity
 * instance.
 *
 * <span class="hljs-doctag">@author</span> Gavin King
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityAction</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ComparableExecutable</span>, AfterTransactionCompletionProcess {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(ComparableExecutable o)</span> {
        <span class="hljs-comment">// sort first by entity name</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">roleComparison</span> <span class="hljs-operator">=</span> entityName.compareTo( o.getPrimarySortClassifier() );
        <span class="hljs-keyword">return</span> roleComparison != <span class="hljs-number">0</span>
            ? roleComparison
            <span class="hljs-comment">// then by id</span>
            : persister.getIdentifierType().compare( id, o.getSecondarySortIndex(), session.getSessionFactory() );
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPrimarySortClassifier</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> entityName;
    }
}
</code></pre>
<p>åœ¨ <code>EntityManager#flush</code> çš„æ‰§è¡Œæµç¨‹ä¸­ï¼Œ<code>ActionQueue#sortActions()</code> ä¼šè¢«è°ƒç”¨ï¼Œå¯¹ <code>insertions</code> å’Œ <code>updates</code> é˜Ÿåˆ—åˆ†åˆ«è¿›è¡Œæ’åºï¼›å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæºç ä¸­å¹¶æœªå¯¹ <code>deletions</code> é˜Ÿåˆ—æ‰§è¡Œæ’åºæ“ä½œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> ExecutableList&lt;AbstractEntityInsertAction&gt; insertions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityDeleteAction&gt; deletions;
    <span class="hljs-keyword">private</span> ExecutableList&lt;EntityUpdateAction&gt; updates;

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderUpdatesEnabled</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> session.getFactory().getSessionFactoryOptions().isOrderUpdatesEnabled();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderInsertsEnabled</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> session.getFactory().getSessionFactoryOptions().isOrderInsertsEnabled();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ( isOrderUpdatesEnabled() &amp;&amp; updates != <span class="hljs-literal">null</span> ) {
            <span class="hljs-comment">// sort the updates by pk</span>
            updates.sort();
        }
        <span class="hljs-keyword">if</span> ( isOrderInsertsEnabled() &amp;&amp; insertions != <span class="hljs-literal">null</span> ) {
            insertions.sort();
        }
    }
}
</code></pre>
<p>æ“ä½œé˜Ÿåˆ—ç”± <code>ExecutableList</code> å®ç°ï¼Œè¯¥ç±»è´Ÿè´£å¯¹å…¶ä¸­çš„å¯æ‰§è¡Œæ“ä½œè¿›è¡Œæ’åº</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * A list of {<span class="hljs-doctag">@link</span> Executable executeble actions}. Responsible for
 * {<span class="hljs-doctag">@linkplain</span> #sort() sorting} the executables, and calculating the
 * affected {<span class="hljs-doctag">@linkplain</span> #getQuerySpaces() query spaces}.
 *
 * <span class="hljs-doctag">@author</span> Steve Ebersole
 * <span class="hljs-doctag">@author</span> Anton Marsden
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecutableList</span>&lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ComparableExecutable</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>, Iterable&lt;E&gt;, Externalizable {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INIT_QUEUE_LIST_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-meta">@Nullable</span> Sorter&lt;E&gt; sorter;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ExecutableList</span><span class="hljs-params">(<span class="hljs-type">boolean</span> requiresSorting)</span> {
        <span class="hljs-built_in">this</span>( INIT_QUEUE_LIST_SIZE, requiresSorting );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ExecutableList</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity, <span class="hljs-type">boolean</span> requiresSorting)</span> {
        <span class="hljs-built_in">this</span>.sorter = <span class="hljs-literal">null</span>;
        <span class="hljs-built_in">this</span>.executables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;( initialCapacity );
        <span class="hljs-built_in">this</span>.querySpaces = <span class="hljs-literal">null</span>;
        <span class="hljs-built_in">this</span>.requiresSorting = requiresSorting;
        <span class="hljs-built_in">this</span>.sorted = requiresSorting;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ExecutableList</span><span class="hljs-params">(Sorter&lt;E&gt; sorter)</span> {
        <span class="hljs-built_in">this</span>( INIT_QUEUE_LIST_SIZE, sorter );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ExecutableList</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity, Sorter&lt;E&gt; sorter)</span> {
        <span class="hljs-built_in">this</span>.sorter = sorter;
        <span class="hljs-built_in">this</span>.executables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;( initialCapacity );
        <span class="hljs-built_in">this</span>.querySpaces = <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// require sorting by default, even if sorter is null to maintain original behavior</span>
        <span class="hljs-built_in">this</span>.requiresSorting = <span class="hljs-literal">true</span>;
        <span class="hljs-built_in">this</span>.sorted = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ( sorted || !requiresSorting ) {
            <span class="hljs-comment">// nothing to do</span>
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// sorter ä¸ä¸º null åˆ™ä½¿ç”¨ sorter æ’åº</span>
        <span class="hljs-keyword">if</span> ( sorter != <span class="hljs-literal">null</span> ) {
            sorter.sort( executables );
        }
        <span class="hljs-comment">// å½“ sorter ä¸º null æ—¶ï¼Œå°†ä½¿ç”¨ Collections.sort(executables) å¯¹æ“ä½œåˆ—è¡¨è¿›è¡Œæ’åºï¼Œæ­¤æ—¶ä¾èµ– executables ä¸­å…ƒç´ ï¼ˆEntityActionï¼‰è‡ªèº«å®ç°çš„ Comparable æ¥å£</span>
        <span class="hljs-keyword">else</span> {
            Collections.sort( executables );
        }
        sorted = <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>ä» OrderedActions æºç å¯çŸ¥ï¼Œåªæœ‰ EntityInsertAction åœ¨ order_inserts ä¸º true æ—¶ä¼šä¼ å…¥ Sorter å¯¹è±¡</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> ExecutableList&lt;AbstractEntityInsertAction&gt; insertions;

    <span class="hljs-comment">// The order of these operations is very important</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderedActions</span> {
        EntityInsertAction {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ExecutableList&lt;?&gt; getActions(ActionQueue instance) {
                <span class="hljs-keyword">return</span> instance.insertions;
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureInitialized</span><span class="hljs-params">(<span class="hljs-keyword">final</span> ActionQueue instance)</span> {
                <span class="hljs-keyword">if</span> ( instance.insertions == <span class="hljs-literal">null</span> ) {
                    <span class="hljs-comment">//Special case of initialization</span>
                    instance.insertions = instance.isOrderInsertsEnabled()
                        ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( InsertActionSorter.INSTANCE )
                        : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutableList</span>&lt;&gt;( <span class="hljs-literal">false</span> );
                }
            }
        }
    }
}
</code></pre>
<p>ç¿»è¯‘äº† InsertActionSorter çš„æºç æ³¨é‡Šï¼Œå†…å®¹å¦‚ä¸‹</p>
<ul>
<li>å¯¹æ’å…¥é˜Ÿåˆ—è¿›è¡Œæ’åºï¼Œä½¿å¾—é’ˆå¯¹åŒä¸€å®ä½“çš„æ’å…¥æ“ä½œè¢«åˆ†ç»„åœ¨ä¸€èµ·ï¼ˆåŒæ—¶ä¸è¿åæ•°æ®åº“çº¦æŸï¼‰åŸå§‹çš„æ’å…¥é¡ºåºç”±çº§è”é¡ºåºå†³å®šï¼Œè€Œçº§è”é¡ºåºæœ¬èº«åˆåŸºäºå¤–é”®çš„æ–¹å‘æ€§ã€‚å› æ­¤ï¼Œå°½ç®¡æ­¤å¤„ä¼šå¯¹é¡ºåºè¿›è¡Œè°ƒæ•´ï¼Œä½†æˆ‘ä»¬å¿…é¡»ç¡®ä¿ç»ä¸ç ´åè¿™ç§å¤–é”®é¡ºåºï¼Œä»¥å…å¼•å‘çº¦æŸè¿å</li>
<li>è¯¥ç®—æ³•é¦–å…ˆä¸ºæ¯ä¸ªæ’å…¥æ“ä½œæ‰¾å‡ºå…¶ä¼ é€’æ€§çš„å…¥å‘ä¾èµ–ï¼ˆå³å“ªäº›å…¶ä»–å®ä½“å¿…é¡»å…ˆè¢«æ’å…¥ï¼‰ï¼Œç„¶åå°†æ‰€æœ‰æ’å…¥æ“ä½œæŒ‰å®ä½“åç§°åˆ†ç»„ã€‚æœ€åï¼Œåªè¦æŸä¸ªåˆ†ç»„çš„æ‰€æœ‰ä¾èµ–éƒ½å·²æ»¡è¶³ï¼Œå°±ä¾æ¬¡è°ƒåº¦è¿™äº›åˆ†ç»„</li>
<li>è¯¥å®ç°ä»…èƒ½ä¸ºé‚£äº›å¯ä»¥è¢«å®Œç¾ä¸²è¡Œè°ƒåº¦çš„æ’å…¥åˆ†ç»„ç”Ÿæˆæœ€ä¼˜æ’å…¥é¡ºåºã€‚ä¸²è¡Œè°ƒåº¦æŒ‡çš„æ˜¯å­˜åœ¨ä¸€ç§é¡ºåºï¼Œèƒ½å¤Ÿå®Œå…¨æ»¡è¶³å¤–é”®çº¦æŸä¾èµ–å…³ç³»ã€‚å¯¹äºæ— æ³•è¢«è°ƒåº¦çš„æ’å…¥åˆ†ç»„ï¼ˆä¾‹å¦‚å­˜åœ¨å¾ªç¯ä¾èµ–ï¼‰åˆ™ä¼šå›é€€åˆ°ä½¿ç”¨åŸå§‹çš„æ’å…¥é¡ºåº</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒInsertActionSorter#sort æ–¹æ³•å®ç°äº†åŸºäºå®ä½“ä¾èµ–å…³ç³»å’Œå®ä½“ç±»å‹çš„æ‹“æ‰‘æ’åºï¼Œç¡®ä¿åœ¨æ‰¹é‡æ’å…¥æ—¶</p>
<ol>
<li>å…ˆæ’å…¥è¢«ä¾èµ–çš„å®ä½“ï¼ˆå¦‚çˆ¶è¡¨ï¼‰ï¼Œå†æ’å…¥ä¾èµ–å®ƒçš„å®ä½“ï¼ˆå¦‚å­è¡¨ï¼‰</li>
<li>ç›¸åŒç±»å‹çš„å®ä½“è¿ç»­æ’åˆ—ï¼Œä»¥æ”¯æŒ JDBC æ‰¹å¤„ç†ä¼˜åŒ–</li>
</ol>
<p>å®Œæ•´çš„ä»£ç å°±ä¸è´´å‡ºæ¥äº†ï¼Œè¯¦æƒ…å¯å‚è§æºç ï¼Œä»¥ä¸‹å†…å®¹ä¸º AI æ€»ç»“</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsertActionSorter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExecutableList</span>.Sorter&lt;AbstractEntityInsertAction&gt; {
        <span class="hljs-comment">// 1. ä¸ºæ¯ä¸ª InsertAction æ„å»ºå…ƒæ•°æ®ï¼ˆInsertInfoï¼‰ï¼Œè®°å½•å…¶ä½ç½®å’Œå®ä½“å®ä¾‹</span>
        <span class="hljs-keyword">final</span> InsertInfo[] insertInfos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsertInfo</span>[insertInfoCount];
        <span class="hljs-comment">// A map of all insert infos keyed by the entity instance</span>
        <span class="hljs-comment">// This is needed to discover insert infos for direct dependencies</span>
        <span class="hljs-keyword">final</span> IdentityHashMap&lt;Object, InsertInfo&gt; insertInfosByEntity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdentityHashMap</span>&lt;&gt;(...);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; insertInfoCount; i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">AbstractEntityInsertAction</span> <span class="hljs-variable">insertAction</span> <span class="hljs-operator">=</span> insertions.get(i);
            <span class="hljs-comment">// â† å°è£…åŠ¨ä½œ + åŸå§‹ç´¢å¼•</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">InsertInfo</span> <span class="hljs-variable">insertInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsertInfo</span>(insertAction, i);
            insertInfosByEntity.put(insertAction.getInstance(), insertInfo);
            insertInfos[i] = insertInfo;
        }
        <span class="hljs-comment">// 2. åˆ†ææ¯ä¸ªæ’å…¥åŠ¨ä½œç›´æ¥ä¾èµ–çš„å…¶ä»–å®ä½“ï¼ˆä¾‹å¦‚ @JoinColumn å¼•ç”¨çš„æœªä¿å­˜å®ä½“ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; insertInfoCount; i++) {
            <span class="hljs-comment">// â† å»ºç«‹ç›´æ¥ä¾èµ–å…³ç³»</span>
            insertInfos[i].buildDirectDependencies(insertInfosByEntity);
        }
        <span class="hljs-comment">// 3. é€’å½’ä¼ æ’­å­ä¾èµ–ï¼ˆå¦‚ A â†’ B â†’ Cï¼Œåˆ™ A ä¹Ÿä¾èµ– Cï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; insertInfoCount; i++) {
            <span class="hljs-comment">// â† æ„å»ºå®Œæ•´ä¾èµ–é“¾</span>
            insertInfos[i].propagateChildDependencies();
        }
        <span class="hljs-comment">// 4. æ„å»ºä¼ é€’æ€§ä¾èµ–ï¼Œå¹¶æŒ‰ entityName åˆ†ç»„ï¼ˆå…³é”®ï¼ç”¨äºåç»­è¿ç»­æ’åˆ—ï¼‰</span>
        <span class="hljs-keyword">final</span> Map&lt;String, EntityInsertGroup&gt; insertInfosByEntityName = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; insertInfoCount; i++) {
            <span class="hljs-comment">// â† å®Œæˆä¾èµ–é—­åŒ…</span>
            insertInfo.buildTransitiveDependencies(visited);
            <span class="hljs-type">String</span> <span class="hljs-variable">entityName</span> <span class="hljs-operator">=</span> insertInfo.insertAction.getPersister().getEntityName();
            <span class="hljs-comment">// â† æŒ‰ entityName åˆ†ç»„ï¼Œä¿è¯åŒç±»å‹è¿ç»­</span>
            <span class="hljs-type">EntityInsertGroup</span> <span class="hljs-variable">group</span> <span class="hljs-operator">=</span> insertInfosByEntityName.computeIfAbsent(entityName, EntityInsertGroup::<span class="hljs-keyword">new</span>);
            group.add(insertInfo);
        }
        <span class="hljs-comment">// 5. æ‹“æ‰‘æ’åºï¼šå¾ªç¯è°ƒåº¦æ‰€æœ‰ä¾èµ–å·²æ»¡è¶³çš„å®ä½“ç»„</span>
        <span class="hljs-keyword">final</span> Set&lt;String&gt; scheduledEntityNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">schedulePosition</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">do</span> {
            <span class="hljs-comment">// éå†æ‰€æœ‰å®ä½“ç»„ï¼Œè‹¥å…¶ä¾èµ–çš„å®ä½“ç±»å‹éƒ½å·²è°ƒåº¦ï¼Œåˆ™å°†å…¶åŠ å…¥ç»“æœ</span>
            <span class="hljs-keyword">for</span> (EntityInsertGroup group : ...) {
                <span class="hljs-keyword">if</span> (scheduledEntityNames.containsAll(group.dependentEntityNames)) {
                    <span class="hljs-comment">// â† æŒ‰ç»„å†™å…¥ç»“æœ</span>
                    schedulePosition = schedule(insertInfos, group.insertInfos, schedulePosition);
                    scheduledEntityNames.add(group.entityName);
                }
            }
        } <span class="hljs-keyword">while</span> (æœ‰æ–°å®ä½“è¢«è°ƒåº¦);
        <span class="hljs-comment">// 6. è‹¥ä»æœ‰æœªè°ƒåº¦çš„å®ä½“ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–ï¼ˆè­¦å‘Šï¼‰</span>
        <span class="hljs-keyword">if</span> (!insertInfosByEntityName.isEmpty()) {
            <span class="hljs-comment">// â† æ£€æµ‹å¾ªç¯ä¾èµ–</span>
            LOG.warn(<span class="hljs-string">"... circular entity relationship ..."</span>);
        }
        <span class="hljs-comment">// 7. ç”¨æ’åºåçš„æ–°é¡ºåºè¦†ç›–åŸ insertions åˆ—è¡¨</span>
        insertions.clear();
        <span class="hljs-keyword">for</span> (InsertInfo info : insertInfos) {
            <span class="hljs-comment">// â† æœ€ç»ˆæ’åºç»“æœç”Ÿæ•ˆ</span>
            insertions.add(info.insertAction);
        }
    }
}
</code></pre>
<p>ä»¥ä¸Šä¾¿æ˜¯ <code>order_inserts</code> å’Œ <code>order_updates</code> çš„ç”Ÿæ•ˆæœºåˆ¶ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒHibernate ä¼šå°†å„ç±»æ•°æ®åº“æ“ä½œï¼ˆå¦‚æ’å…¥ã€æ›´æ–°ï¼‰æ”¶é›†åˆ° <code>ActionQueue</code> ä¸­ã€‚å½“ <code>order_inserts</code> æˆ– <code>order_updates</code> é…ç½®ä¸º <code>true</code> æ—¶ï¼Œä¼šåœ¨ flush é˜¶æ®µå¯¹ç›¸åº”çš„æ“ä½œé˜Ÿåˆ—è¿›è¡Œæ’åº</p>
<h4 data-id="heading-7">æ‰§è¡Œæ“ä½œ</h4>
<p>æ­¤æ—¶ï¼Œå„ç±»æ“ä½œå·²æ”¶é›†åˆ° <code>ActionQueue</code> ä¸­å¹¶å®Œæˆæ’åºã€‚æ¥ä¸‹æ¥çš„æ‰§è¡Œé˜¶æ®µä»å‘ç”Ÿåœ¨ flush é˜¶æ®µï¼Œç”± <code>DefaultFlushEventListener#onFlush</code> æ–¹æ³•è§¦å‘ï¼Œä¾æ¬¡å–å‡ºé˜Ÿåˆ—ä¸­çš„æ“ä½œå¹¶æäº¤ç»™æ•°æ®åº“æ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Defines the default flush event listeners used by hibernate for 
 * flushing session state in response to generated flush events.
 *
 * <span class="hljs-doctag">@author</span> Steve Ebersole
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultFlushEventListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractFlushingEventListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlushEventListener</span> {

    <span class="hljs-comment">/** Handle the given flush event.
	 *
	 * <span class="hljs-doctag">@param</span> event The flush event to be handled.
	 */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFlush</span><span class="hljs-params">(FlushEvent event)</span> <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-keyword">final</span> <span class="hljs-type">EventSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> event.getSession();
        <span class="hljs-keyword">final</span> <span class="hljs-type">PersistenceContext</span> <span class="hljs-variable">persistenceContext</span> <span class="hljs-operator">=</span> source.getPersistenceContextInternal();
        <span class="hljs-keyword">final</span> <span class="hljs-type">EventManager</span> <span class="hljs-variable">eventManager</span> <span class="hljs-operator">=</span> source.getEventManager();
        <span class="hljs-keyword">if</span> ( persistenceContext.getNumberOfManagedEntities() &gt; <span class="hljs-number">0</span>
            || persistenceContext.getCollectionEntriesSize() &gt; <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">HibernateMonitoringEvent</span> <span class="hljs-variable">flushEvent</span> <span class="hljs-operator">=</span> eventManager.beginFlushEvent();
            <span class="hljs-keyword">try</span> {
                source.getEventListenerManager().flushStart();
                <span class="hljs-comment">// è°ƒç”¨ ActionQueue#sortActions è¿›è¡Œæ’åº</span>
                flushEverythingToExecutions( event );
                <span class="hljs-comment">// è°ƒç”¨ AbstractFlushingEventListener#performExecutions æ–¹æ³•</span>
                performExecutions( source );
                postFlush( source );
            }
            <span class="hljs-keyword">finally</span> {
                eventManager.completeFlushEvent( flushEvent, event );
                source.getEventListenerManager().flushEnd(
                    event.getNumberOfEntitiesProcessed(),
                    event.getNumberOfCollectionsProcessed()
                );
            }
            postPostFlush( source );
            <span class="hljs-comment">// ...</span>
        }
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractFlushingEventListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JpaBootstrapSensitive</span> {

    <span class="hljs-comment">/**
	 * Execute all SQL (and second-level cache updates) in a special order so that foreign-key constraints cannot
	 * be violated: &lt;ol&gt;
	 * &lt;li&gt; Inserts, in the order they were performed
	 * &lt;li&gt; Updates
	 * &lt;li&gt; Deletion of collection elements
	 * &lt;li&gt; Insertion of collection elements
	 * &lt;li&gt; Deletes, in the order they were performed
	 * &lt;/ol&gt;
	 *
	 * <span class="hljs-doctag">@param</span> session The session being flushed
	 */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performExecutions</span><span class="hljs-params">(EventSource session)</span> {
        LOG.trace( <span class="hljs-string">"Executing flush"</span> );
        <span class="hljs-keyword">final</span> <span class="hljs-type">PersistenceContext</span> <span class="hljs-variable">persistenceContext</span> <span class="hljs-operator">=</span> session.getPersistenceContextInternal();
        <span class="hljs-keyword">final</span> <span class="hljs-type">JdbcCoordinator</span> <span class="hljs-variable">jdbcCoordinator</span> <span class="hljs-operator">=</span> session.getJdbcCoordinator();
        <span class="hljs-keyword">try</span> {
            jdbcCoordinator.flushBeginning();
            persistenceContext.setFlushing( <span class="hljs-literal">true</span> );
            <span class="hljs-comment">// we need to lock the collection caches before executing entity inserts/updates</span>
            <span class="hljs-comment">// in order to account for bidirectional associations</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">ActionQueue</span> <span class="hljs-variable">actionQueue</span> <span class="hljs-operator">=</span> session.getActionQueue();
            actionQueue.prepareActions();
            actionQueue.executeActions();
        }
        <span class="hljs-keyword">finally</span> {
            persistenceContext.setFlushing( <span class="hljs-literal">false</span> );
            jdbcCoordinator.flushEnding();
        }
    }
}
</code></pre>
<p>æµç¨‹å†æ¬¡å›åˆ° <code>ActionQueue</code>ï¼Œå…¶ <code>executeActions</code> æ–¹æ³•è´Ÿè´£ä¾æ¬¡å–å‡ºå·²æ’åºçš„æ“ä½œé˜Ÿåˆ—ä¸­çš„å„é¡¹æ“ä½œï¼Œå¹¶é€ä¸ªæ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-comment">// å·²æ’åºçš„å„é¡¹æ“ä½œ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> OrderedActions[] ORDERED_OPERATIONS = OrderedActions.values();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeActions</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">for</span> ( OrderedActions action : ORDERED_OPERATIONS ) {
            executeActions( action.getActions( <span class="hljs-built_in">this</span> ) );
        }
    }

    <span class="hljs-keyword">private</span> &lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ComparableExecutable</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeActions</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ExecutableList&lt;E&gt; list)</span>
        <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-keyword">if</span> ( list == <span class="hljs-literal">null</span> || list.isEmpty() ) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å–å‡ºæ¥çš„æ˜¯ä¸€ä¸ªä¸ª XxxAction å¯¹è±¡</span>
            <span class="hljs-keyword">for</span> ( ComparableExecutable e : list ) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æœ€ç»ˆä¼šæ‰§è¡Œ ClientPreparedStatement#addBatch() æ–¹æ³•</span>
                    e.execute();
                }
                <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ...</span>
                }
            }
        }
        <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ...</span>
        }
        list.clear();
        <span class="hljs-comment">// æœ€ç»ˆä¼šæ‰§è¡Œ ClientPreparedStatement#executeBatchInternal() æ–¹æ³•</span>
        session.getJdbcCoordinator().executeBatch();
    }
}
</code></pre>
<h5 data-id="heading-8">addBatch æµç¨‹</h5>
<p><code>ExecutableList&lt;E&gt;</code> ä¸­å­˜å‚¨çš„æ˜¯å„ç±» <code>XxxAction</code> å¯¹è±¡ï¼ˆå¦‚ <code>EntityInsertAction</code>ã€<code>EntityUpdateAction</code>ã€<code>EntityDeleteAction</code>ï¼‰ï¼Œå®ƒä»¬çš„ <code>execute()</code> æ–¹æ³•å°†æ‰§è¡Œå§”æ‰˜ç»™å¯¹åº”çš„ XxxCoordinatorï¼ˆåè°ƒå™¨ï¼‰</p>
<p>EntityInsertAction</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * The action for performing an entity insertion, for entities not defined to use IDENTITY generation.
 *
 * <span class="hljs-doctag">@see</span> EntityIdentityInsertAction
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityInsertAction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractEntityInsertAction</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> HibernateException {
        nullifyTransientReferencesIfNotAlready();
        <span class="hljs-comment">// Don't need to lock the cache here, since if someone</span>
        <span class="hljs-comment">// else inserted the same pk first, the insert would fail</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">SharedSessionContractImplementor</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> getSession();
        <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> getId();
        <span class="hljs-comment">// veto =&gt; æ˜¯å¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª PreInsertEventListener ç›‘å¬å™¨å¦å†³ï¼ˆvetoï¼‰äº†å½“å‰å®ä½“çš„æ’å…¥æ“ä½œ</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">veto</span> <span class="hljs-operator">=</span> preInsert();
        <span class="hljs-keyword">if</span> ( !veto ) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">EntityPersister</span> <span class="hljs-variable">persister</span> <span class="hljs-operator">=</span> getPersister();
            <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> getInstance();
            <span class="hljs-comment">// å§”æ‰˜ç»™ InsertCoordinator æ‰§è¡Œ</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">GeneratedValues</span> <span class="hljs-variable">generatedValues</span> <span class="hljs-operator">=</span> persister.getInsertCoordinator().insert(
                instance,
                id,
                getState(),
                session
            );
            <span class="hljs-comment">// ...</span>
        }
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preInsert</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–æ‰€æœ‰çš„ PreInsertEventListener ç›‘å¬å™¨</span>
        <span class="hljs-keyword">final</span> EventListenerGroup&lt;PreInsertEventListener&gt; listenerGroup = getFastSessionServices().eventListenerGroup_PRE_INSERT;
        <span class="hljs-keyword">if</span> ( listenerGroup.isEmpty() ) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-type">boolean</span> <span class="hljs-variable">veto</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// å‘å¸ƒ PreInsertEvent äº‹ä»¶å¹¶æ‰§è¡Œæ‰€æœ‰ PreInsertEventListener çš„ onPreInsert æ–¹æ³•</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">PreInsertEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PreInsertEvent</span>( getInstance(), getId(), getState(), getPersister(), eventSource() );
            <span class="hljs-keyword">for</span> ( PreInsertEventListener listener : listenerGroup.listeners() ) {
                <span class="hljs-comment">// æ±‡æ€»æ‰§è¡Œç»“æœ</span>
                veto |= listener.onPreInsert( event );
            }
            <span class="hljs-keyword">return</span> veto;
        }
    }
}
</code></pre>
<p>EntityUpdateAction</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityUpdateAction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EntityAction</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-keyword">if</span> ( !preUpdate() ) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">EntityPersister</span> <span class="hljs-variable">persister</span> <span class="hljs-operator">=</span> getPersister();
            <span class="hljs-keyword">final</span> <span class="hljs-type">SharedSessionContractImplementor</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> getSession();
            <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> getId();
            <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> getInstance();
            <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">previousVersion</span> <span class="hljs-operator">=</span> getPreviousVersion();
            <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">ck</span> <span class="hljs-operator">=</span> lockCacheItem( previousVersion );
            <span class="hljs-comment">// å§”æ‰˜ç»™ UpdateCoordinator æ‰§è¡Œ</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">GeneratedValues</span> <span class="hljs-variable">generatedValues</span> <span class="hljs-operator">=</span> persister.getUpdateCoordinator().update(
                instance,
                id,
                rowId,
                state,
                previousVersion,
                previousState,
                dirtyFields,
                hasDirtyCollection,
                session
            );
            <span class="hljs-comment">// ...</span>
        }
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preUpdate</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">final</span> EventListenerGroup&lt;PreUpdateEventListener&gt; listenerGroup = getFastSessionServices().eventListenerGroup_PRE_UPDATE;
        <span class="hljs-keyword">if</span> ( listenerGroup.isEmpty() ) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">PreUpdateEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PreUpdateEvent</span>(
                getInstance(),
                getId(),
                state,
                previousState,
                getPersister(),
                eventSource()
            );
            <span class="hljs-type">boolean</span> <span class="hljs-variable">veto</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">for</span> ( PreUpdateEventListener listener : listenerGroup.listeners() ) {
                veto |= listener.onPreUpdate( event );
            }
            <span class="hljs-keyword">return</span> veto;
        }
    }
}
</code></pre>
<p>EntityDeleteAction</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityDeleteAction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EntityAction</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> getId();
        <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> getCurrentVersion();
        <span class="hljs-keyword">final</span> <span class="hljs-type">EntityPersister</span> <span class="hljs-variable">persister</span> <span class="hljs-operator">=</span> getPersister();
        <span class="hljs-keyword">final</span> <span class="hljs-type">SharedSessionContractImplementor</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> getSession();
        <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> getInstance();
        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">veto</span> <span class="hljs-operator">=</span> isInstanceLoaded() &amp;&amp; preDelete();
        <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">ck</span> <span class="hljs-operator">=</span> lockCacheItem();
        <span class="hljs-keyword">if</span> ( !isCascadeDeleteEnabled &amp;&amp; !veto ) {
            <span class="hljs-comment">// å§”æ‰˜ç»™ DeleteCoordinator æ‰§è¡Œ</span>
            persister.getDeleteCoordinator().delete( instance, id, version, session );
        }
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInstanceLoaded</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// A null instance signals that we're deleting an unloaded proxy.</span>
        <span class="hljs-keyword">return</span> getInstance() != <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preDelete</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">final</span> EventListenerGroup&lt;PreDeleteEventListener&gt; listenerGroup = getFastSessionServices().eventListenerGroup_PRE_DELETE;
        <span class="hljs-keyword">if</span> ( listenerGroup.isEmpty() ) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">PreDeleteEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PreDeleteEvent</span>( getInstance(), getId(), state, getPersister(), eventSource() );
            <span class="hljs-type">boolean</span> <span class="hljs-variable">veto</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">for</span> ( PreDeleteEventListener listener : listenerGroup.listeners() ) {
                veto |= listener.onPreDelete( event );
            }
            <span class="hljs-keyword">return</span> veto;
        }
    }
}
</code></pre>
<p><code>EntityPersister</code> æ¥å£ä¸­å®šä¹‰çš„ <code>getInsertCoordinator()</code>ã€<code>getUpdateCoordinator()</code> å’Œ <code>getDeleteCoordinator()</code> æ–¹æ³•ï¼Œç›®å‰ä»…æœ‰ <code>AbstractEntityPersister</code> è¿™ä¸€ä¸ªå®ç°ç±»æä¾›å…·ä½“å®ç°</p>
<p>InsertCoordinatorã€UpdateCoordinatorã€DeleteCoordinator åŒæ ·æ˜¯æ¥å£ï¼Œåœ¨ AbstractEntityPersister ä¸­æ„é€ å‡ºçš„å¯¹åº”å®ç°ç±»ä¸º InsertCoordinatorStandardã€UpdateCoordinatorStandardã€DeleteCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Basic functionality for persisting an entity via JDBC, using either generated or custom SQL.
 *
 * <span class="hljs-doctag">@author</span> Gavin King
 */</span>
<span class="hljs-meta">@Internal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractEntityPersister</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InFlightEntityMappingType</span>, EntityMutationTarget, LazyPropertyInitializer, PostInsertIdentityPersister, FetchProfileAffectee, DeprecatedEntityStuff {

    <span class="hljs-keyword">private</span> InsertCoordinator insertCoordinator;
    <span class="hljs-keyword">private</span> UpdateCoordinator updateCoordinator;
    <span class="hljs-keyword">private</span> DeleteCoordinator deleteCoordinator;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postInstantiate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> MappingException {
        doLateInit();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doLateInit</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ...</span>
        insertCoordinator = buildInsertCoordinator();
        updateCoordinator = buildUpdateCoordinator();
        deleteCoordinator = buildDeleteCoordinator();
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-keyword">protected</span> InsertCoordinator <span class="hljs-title function_">buildInsertCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsertCoordinatorStandard</span>( <span class="hljs-built_in">this</span>, factory );
    }

    <span class="hljs-keyword">protected</span> UpdateCoordinator <span class="hljs-title function_">buildUpdateCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// we only have updates to issue for entities with one or more singular attributes</span>
        <span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; attributeMappings.size(); i++ ) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">AttributeMapping</span> <span class="hljs-variable">attributeMapping</span> <span class="hljs-operator">=</span> attributeMappings.get( i );
            <span class="hljs-keyword">if</span> ( attributeMapping <span class="hljs-keyword">instanceof</span> SingularAttributeMapping ) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateCoordinatorStandard</span>( <span class="hljs-built_in">this</span>, factory );
            }
        }
        <span class="hljs-comment">// otherwise, nothing to update</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateCoordinatorNoOp</span>( <span class="hljs-built_in">this</span> );
    }

    <span class="hljs-keyword">protected</span> DeleteCoordinator <span class="hljs-title function_">buildDeleteCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ( softDeleteMapping == <span class="hljs-literal">null</span> ) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeleteCoordinatorStandard</span>( <span class="hljs-built_in">this</span>, factory );
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeleteCoordinatorSoft</span>( <span class="hljs-built_in">this</span>, factory );
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> InsertCoordinator <span class="hljs-title function_">getInsertCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> insertCoordinator;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> UpdateCoordinator <span class="hljs-title function_">getUpdateCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> updateCoordinator;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> DeleteCoordinator <span class="hljs-title function_">getDeleteCoordinator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> deleteCoordinator;
    }
}
</code></pre>
<p>åç»­æµç¨‹ä¼šæ ¹æ®æ“ä½œç±»å‹ï¼ˆInsertã€Update æˆ– Deleteï¼‰åˆ†åˆ«è°ƒç”¨ <code>InsertCoordinatorStandard#insert</code>ã€<code>UpdateCoordinatorStandard#update</code> æˆ– <code>DeleteCoordinatorStandard#delete</code> æ–¹æ³•ã€‚ç»è¿‡å‡ å±‚æ–¹æ³•è°ƒç”¨åï¼Œå®ƒä»¬æœ€ç»ˆä¼šæ±‡èšåˆ°åŒä¸€å¥—æ ¸å¿ƒé€»è¾‘ï¼šåˆ›å»ºä¸€ä¸ª <code>MutationExecutor</code> å®ä¾‹ï¼Œå¹¶å°†å®é™…çš„æ•°æ®åº“æ‰§è¡Œå·¥ä½œå§”æ‰˜ç»™å®ƒå®Œæˆ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Internal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> {

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> MutationExecutorService mutationExecutorService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AbstractMutationCoordinator</span><span class="hljs-params">(AbstractEntityPersister entityPersister, SessionFactoryImplementor factory)</span> {
        <span class="hljs-comment">// StandardMutationExecutorService</span>
        <span class="hljs-built_in">this</span>.mutationExecutorService = factory.getServiceRegistry().getService( MutationExecutorService.class );
    }
}
</code></pre>
<p>InsertCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Internal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsertCoordinatorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InsertCoordinator</span> {

    <span class="hljs-keyword">protected</span> GeneratedValues <span class="hljs-title function_">doStaticInserts</span><span class="hljs-params">(Object id, Object[] values, Object object, SharedSessionContractImplementor session)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutationExecutor</span> <span class="hljs-variable">mutationExecutor</span> <span class="hljs-operator">=</span> executor( session, staticInsertGroup, <span class="hljs-literal">false</span> );
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> mutationExecutor.execute(...);
        }
        <span class="hljs-keyword">finally</span> {
            mutationExecutor.release();
        }
    }

    <span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group, <span class="hljs-type">boolean</span> dynamicUpdate)</span> {
        <span class="hljs-keyword">return</span> mutationExecutorService
            .createExecutor( resolveBatchKeyAccess( dynamicUpdate, session ), group, session );
    }
}
</code></pre>
<p>UpdateCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateCoordinatorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UpdateCoordinator</span> {

    <span class="hljs-keyword">protected</span> GeneratedValues <span class="hljs-title function_">doStaticUpdate</span><span class="hljs-params">(
        Object entity,
        Object id,
        Object rowId,
        Object[] values,
        Object[] oldValues,
        UpdateValuesAnalysisImpl valuesAnalysis,
        SharedSessionContractImplementor session
    )</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutationExecutor</span> <span class="hljs-variable">mutationExecutor</span> <span class="hljs-operator">=</span> executor( session, staticUpdateGroup, <span class="hljs-literal">false</span> );
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> mutationExecutor.execute(...);
        }
        <span class="hljs-keyword">finally</span> {
            mutationExecutor.release();
        }
    }

    <span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group, <span class="hljs-type">boolean</span> dynamicUpdate)</span> {
        <span class="hljs-keyword">return</span> mutationExecutorService
            .createExecutor( resolveBatchKeyAccess( dynamicUpdate, session ), group, session );
    }
}
</code></pre>
<p>DeleteCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeleteCoordinatorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractDeleteCoordinator</span> {}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractDeleteCoordinator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DeleteCoordinator</span> {

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doStaticDelete</span><span class="hljs-params">(
        Object entity,
        Object id,
        Object rowId,
        Object[] loadedState,
        Object version,
        SharedSessionContractImplementor session
    )</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutationExecutor</span> <span class="hljs-variable">mutationExecutor</span> <span class="hljs-operator">=</span> executor( session, operationGroupToUse );
        <span class="hljs-keyword">try</span> {
            mutationExecutor.execute(...);
        }
        <span class="hljs-keyword">finally</span> {
            mutationExecutor.release();
        }
    }

    <span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group)</span> {
        <span class="hljs-keyword">return</span> mutationExecutorService.createExecutor( resolveBatchKeyAccess( <span class="hljs-literal">false</span>, session ), group, session );
    }
}
</code></pre>
<p><code>MutationExecutor</code> æ˜¯ Hibernate ä¸­æ‰§è¡Œå®ä½“å˜æ›´ï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰çš„æ ¸å¿ƒæ¥å£ï¼Œè´Ÿè´£ç»Ÿä¸€åè°ƒä¸æ•°æ®åº“äº¤äº’çš„å…·ä½“ç»†èŠ‚ï¼Œå®ƒçš„ä¸»è¦èŒè´£åŒ…æ‹¬</p>
<ul>
<li>å†³å®šæ˜¯å¦ä½¿ç”¨ JDBC æ‰¹å¤„ç†ï¼ˆbatchingï¼‰</li>
<li>æ§åˆ¶å‚æ•°ç»‘å®šæ—¥å¿—çš„é€»è¾‘åˆ†ç»„æ–¹å¼</li>
<li>......</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Main contract for performing the mutation.  Accounts for various
 * moving parts such as:&lt;ul&gt;
 *     &lt;li&gt;Should the statements be batched or not?&lt;/li&gt;
 *     &lt;li&gt;Should we "logically" group logging of the parameter bindings?&lt;/li&gt;
 *     &lt;li&gt;...&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * <span class="hljs-doctag">@author</span> Steve Ebersole
 */</span>
<span class="hljs-meta">@Incubating</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MutationExecutor</span> {

    GeneratedValues <span class="hljs-title function_">execute</span><span class="hljs-params">(
        Object modelReference,
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker,
        OperationResultChecker resultChecker,
        SharedSessionContractImplementor session)</span>;
}
</code></pre>
<p>MutationExecutor çš„ execute æ–¹æ³•ç›®å‰ä»…æœ‰ <code>AbstractMutationExecutor</code> è¿™ä¸€ä¸ªå®ç°ç±»æä¾›å…·ä½“å®ç°ï¼Œå®ƒçš„ execute æ–¹æ³•å®ç°é‡‡ç”¨äº†æ ‡å‡†çš„æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMutationExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MutationExecutor</span> {

    <span class="hljs-comment">/**
	 * Templated implementation of execution as &lt;ol&gt;
	 *     &lt;li&gt;{<span class="hljs-doctag">@link</span> #performNonBatchedOperations}&lt;/li&gt;
	 *     &lt;li&gt;{<span class="hljs-doctag">@link</span> #performSelfExecutingOperations}&lt;/li&gt;
	 *     &lt;li&gt;{<span class="hljs-doctag">@link</span> #performBatchedOperations}&lt;/li&gt;
	 * &lt;/ol&gt;
	 */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> GeneratedValues <span class="hljs-title function_">execute</span><span class="hljs-params">(
        Object modelReference,
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker,
        OperationResultChecker resultChecker,
        SharedSessionContractImplementor session
    )</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">GeneratedValues</span> <span class="hljs-variable">generatedValues</span> <span class="hljs-operator">=</span> performNonBatchedOperations(
            modelReference,
            valuesAnalysis,
            inclusionChecker,
            resultChecker,
            session
        );
        performSelfExecutingOperations( valuesAnalysis, inclusionChecker, session );
        performBatchedOperations( valuesAnalysis, inclusionChecker );
        <span class="hljs-keyword">return</span> generatedValues;
    }

    <span class="hljs-keyword">protected</span> GeneratedValues <span class="hljs-title function_">performNonBatchedOperations</span><span class="hljs-params">(
        Object modelReference,
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker,
        OperationResultChecker resultChecker,
        SharedSessionContractImplementor session)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performSelfExecutingOperations</span><span class="hljs-params">(
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker,
        SharedSessionContractImplementor session)</span> {
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performBatchedOperations</span><span class="hljs-params">(
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker)</span> {
    }
}
</code></pre>
<p>MutationExecutor çš„ç»§æ‰¿æ ‘å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2b6f4ed0d1b40e0b784c24ffb32ae5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVmaW5lOTUyNw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025546&amp;x-signature=Th6CD7DOcdgjnRLzE%2B3jOqcW1p8%3D" alt="image.png" loading="lazy"/></p>
<p>AbstractMutationExecutor æä¾›äº† performNonBatchedOperationsã€performSelfExecutingOperationsã€performBatchedOperations ä¸‰ä¸ªæ¨¡æ¿æ–¹æ³•ä¾›å­ç±»å»å®ç°ï¼Œä»æ–¹æ³•å‘½åå¯æ¨æ–­ï¼Œåªæœ‰å®ç°äº† performBatchedOperations æ–¹æ³•çš„å­ç±»æ‰çœŸæ­£æ”¯æŒæ‰¹é‡æ“ä½œ</p>
<p>ç›®å‰åªæœ‰ <code>MutationExecutorSingleBatched</code> å’Œ <code>MutationExecutorStandard</code> ä¸¤ä¸ªå®ç°ç±»é‡å†™äº† <code>performBatchedOperations</code> æ–¹æ³•ä»¥æ”¯æŒæ‰¹é‡æ“ä½œã€‚å®ƒä»¬çš„å®ç°ä¸­å‡è°ƒç”¨äº† <code>Batch#addToBatch</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»è¿‡è‹¥å¹²å±‚è°ƒç”¨åï¼Œæœ€ç»ˆä¼šè§¦å‘ JDBC é©±åŠ¨å±‚çš„ <code>ClientPreparedStatement#addBatch()</code>ï¼Œä»è€Œå°† SQL å‚æ•°åŠ å…¥åº•å±‚æ‰¹å¤„ç†é˜Ÿåˆ—</p>
<p>MutationExecutorSingleBatched</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MutationExecutorSingleBatched</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractSingleMutationExecutor</span> {

    <span class="hljs-keyword">private</span> Batch batch;

    <span class="hljs-keyword">private</span> Batch <span class="hljs-title function_">resolveBatch</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ( batch == <span class="hljs-literal">null</span> ) {
            batch = session.getJdbcCoordinator().getBatch(
                batchKey,
                batchSize,
                () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">PreparedStatementGroupSingleTable</span>( getMutationOperation(), session )
            );
            <span class="hljs-keyword">assert</span> batch != <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> batch;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performBatchedOperations</span><span class="hljs-params">(ValuesAnalysis valuesAnalysis, TableInclusionChecker inclusionChecker)</span> {
        resolveBatch().addToBatch( getJdbcValueBindings(), inclusionChecker );
    }
}
</code></pre>
<p>MutationExecutorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MutationExecutorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcValueBindingsImpl</span>.JdbcValueDescriptorAccess {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Batch batch;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MutationExecutorStandard</span><span class="hljs-params">(
        MutationOperationGroup mutationOperationGroup,
        BatchKeyAccess batchKeySupplier,
        <span class="hljs-type">int</span> batchSize,
        SharedSessionContractImplementor session
    )</span> {
        <span class="hljs-keyword">if</span> ( batchedJdbcMutations == <span class="hljs-literal">null</span> || batchedJdbcMutations.isEmpty() ) {
            <span class="hljs-built_in">this</span>.batch = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">assert</span> generatedValuesDelegate == <span class="hljs-literal">null</span> : <span class="hljs-string">"Unsupported batched mutation for entity target with generated values delegate"</span>;
            <span class="hljs-keyword">final</span> List&lt;PreparableMutationOperation&gt; batchedMutationsRef = batchedJdbcMutations;
            <span class="hljs-built_in">this</span>.batch = session.getJdbcCoordinator().getBatch(
                batchKey,
                batchSize,
                () -&gt; ModelMutationHelper.toPreparedStatementGroup(
                    mutationOperationGroup.getMutationType(),
                    mutationOperationGroup.getMutationTarget(),
                    <span class="hljs-literal">null</span>,
                    batchedMutationsRef,
                    session
                )
            );
            <span class="hljs-keyword">assert</span> batch != <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performBatchedOperations</span><span class="hljs-params">(
        ValuesAnalysis valuesAnalysis,
        TableInclusionChecker inclusionChecker)</span> {
        <span class="hljs-keyword">if</span> ( batch == <span class="hljs-literal">null</span> ) {
            <span class="hljs-keyword">return</span>;
        }
        batch.addToBatch( valueBindings, inclusionChecker );
    }
}
</code></pre>
<p>å› æ­¤ï¼Œåªè¦åˆ›å»ºçš„ <code>MutationExecutor</code> å®ä¾‹æ˜¯ <code>MutationExecutorSingleBatched</code> æˆ– <code>MutationExecutorStandard</code>ï¼Œå°±å¯ä»¥ç¡®å®šå½“å‰æ“ä½œä¸€å®šä¼šèµ°æ‰¹é‡æ‰§è¡Œè·¯å¾„</p>
<p>é‚£å°±è®©æˆ‘ä»¬æŠŠç›®å…‰æ”¾åˆ° MutationExecutor çš„åˆ›å»ºé€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// InsertCoordinatorStandard</span>
<span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group, <span class="hljs-type">boolean</span> dynamicUpdate)</span> {
    <span class="hljs-keyword">return</span> mutationExecutorService.createExecutor(
        resolveBatchKeyAccess( dynamicUpdate, session ),
        group,
        session
    );
}

<span class="hljs-comment">// UpdateCoordinatorStandard</span>
<span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group, <span class="hljs-type">boolean</span> dynamicUpdate)</span> {
    <span class="hljs-keyword">return</span> mutationExecutorService.createExecutor(
        resolveBatchKeyAccess( dynamicUpdate, session ),
        group,
        session
    );
}

<span class="hljs-comment">// AbstractDeleteCoordinatorï¼ˆDeleteCoordinatorStandardï¼‰</span>
<span class="hljs-keyword">private</span> MutationExecutor <span class="hljs-title function_">executor</span><span class="hljs-params">(SharedSessionContractImplementor session, MutationOperationGroup group)</span> {
    <span class="hljs-keyword">return</span> mutationExecutorService.createExecutor(
        resolveBatchKeyAccess( <span class="hljs-literal">false</span>, session ),
        group,
        session
    );
}
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­çš„ mutationExecutorService æ˜¯ StandardMutationExecutorService ç±»ï¼Œå®ƒä¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ›å»ºå‡ºä¸åŒçš„ MutationExecutor å®ç°ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardMutationExecutorService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MutationExecutorService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> globalBatchSize;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StandardMutationExecutorService</span><span class="hljs-params">(Map&lt;String, Object&gt; configurationValues)</span> {
        <span class="hljs-comment">// è·å– batch_size å‚æ•°å€¼å¹¶èµ‹å€¼ç»™ globalBatchSize å­—æ®µ</span>
        <span class="hljs-built_in">this</span>( ConfigurationHelper.getInt( Environment.STATEMENT_BATCH_SIZE, configurationValues, <span class="hljs-number">1</span> ) );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StandardMutationExecutorService</span><span class="hljs-params">(<span class="hljs-type">int</span> globalBatchSize)</span> {
        <span class="hljs-built_in">this</span>.globalBatchSize = globalBatchSize;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> MutationExecutor <span class="hljs-title function_">createExecutor</span><span class="hljs-params">(
        BatchKeyAccess batchKeySupplier,
        MutationOperationGroup operationGroup,
        SharedSessionContractImplementor session)</span> {
        <span class="hljs-comment">// decide whether to use batching - any number &gt; one means to batch</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">sessionBatchSize</span> <span class="hljs-operator">=</span> session.getJdbcCoordinator()
            .getJdbcSessionOwner()
            .getJdbcBatchSize();
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">batchSizeToUse</span> <span class="hljs-operator">=</span> sessionBatchSize == <span class="hljs-literal">null</span>
            ? globalBatchSize
            : sessionBatchSize;
        <span class="hljs-comment">// å½“å‰è¿™ä¸ªæ“ä½œåˆ†ç»„ä¸­åŒ…å«çš„æ“ä½œç§ç±»ï¼ˆINSERTã€UPDATEã€DELETEï¼‰æ•°é‡ï¼Œé€šå¸¸åªåŒ…å«ä¸€ç§æ“ä½œç±»å‹</span>
        <span class="hljs-keyword">if</span> ( operationGroup.getNumberOfOperations() == <span class="hljs-number">1</span> ) {
            <span class="hljs-comment">// èµ°æ­¤åˆ†æ”¯</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">MutationOperation</span> <span class="hljs-variable">singleOperation</span> <span class="hljs-operator">=</span> operationGroup.getSingleOperation();
            <span class="hljs-keyword">if</span> ( singleOperation <span class="hljs-keyword">instanceof</span> SelfExecutingUpdateOperation ) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationExecutorSingleSelfExecuting</span>( (SelfExecutingUpdateOperation) singleOperation, session );
            }
            <span class="hljs-keyword">final</span> <span class="hljs-type">PreparableMutationOperation</span> <span class="hljs-variable">jdbcOperation</span> <span class="hljs-operator">=</span> (PreparableMutationOperation) singleOperation;
            <span class="hljs-comment">// è¿™ä¸¤è¡Œä»£ç å¾ˆå…³é”®ï¼Œå®ƒå†³å®šäº†åç»­èƒ½å¦èµ°æ‰¹é‡æ“ä½œ</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">BatchKey</span> <span class="hljs-variable">batchKey</span> <span class="hljs-operator">=</span> batchKeySupplier.getBatchKey();
            <span class="hljs-keyword">if</span> ( jdbcOperation.canBeBatched( batchKey, batchSizeToUse ) ) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationExecutorSingleBatched</span>( jdbcOperation, batchKey, batchSizeToUse, session );
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationExecutorSingleNonBatched</span>(
                jdbcOperation,
                operationGroup.asEntityMutationOperationGroup() != <span class="hljs-literal">null</span> ?
                operationGroup.asEntityMutationOperationGroup().getMutationDelegate() :
                <span class="hljs-literal">null</span>,
                session
            );
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationExecutorStandard</span>( operationGroup, batchKeySupplier, batchSizeToUse, session );
    }
}
</code></pre>
<p>å…ˆè§£æä¸‹ <code>BatchKey batchKey = batchKeySupplier.getBatchKey()</code> è¿™è¡Œä»£ç ï¼ŒBatchKeyAccess æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ­¤å¤„å®ƒå¯¹åº”çš„å€¼æ˜¯ <code>AbstractMutationCoordinator#resolveBatchKeyAccess</code> æ–¹æ³•çš„è¿”å›å€¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Internal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> {

    <span class="hljs-keyword">protected</span> BatchKeyAccess <span class="hljs-title function_">resolveBatchKeyAccess</span><span class="hljs-params">(<span class="hljs-type">boolean</span> dynamicUpdate, SharedSessionContractImplementor session)</span> {
        <span class="hljs-keyword">if</span> ( !dynamicUpdate
            &amp;&amp; !entityPersister().optimisticLockStyle().isAllOrDirty()
            &amp;&amp; session.getTransactionCoordinator() != <span class="hljs-literal">null</span>
            &amp;&amp; session.getTransactionCoordinator().isTransactionActive()
            &amp;&amp; (
                <span class="hljs-comment">// batch_versioned_data å‚æ•°åœ¨æ­¤å¤„ä½¿ç”¨</span>
                session.getSessionFactory().getSessionFactoryOptions()
                .isJdbcBatchVersionedData()
                || !entityPersister().isVersioned() ) ) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>::getBatchKey;
        }
        <span class="hljs-keyword">return</span> NoBatchKeyAccess.INSTANCE;
    }

    <span class="hljs-comment">// äº¤ç”±å„å­ç±»å®ç°</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> BatchKey <span class="hljs-title function_">getBatchKey</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoBatchKeyAccess</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BatchKeyAccess</span> {
    <span class="hljs-comment">/**
	 * Singleton access
	 */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">NoBatchKeyAccess</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoBatchKeyAccess</span>();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> BatchKey <span class="hljs-title function_">getBatchKey</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p>InsertCoordinatorStandardã€UpdateCoordinatorStandardã€AbstractDeleteCoordinatorï¼ˆDeleteCoordinatorStandard çˆ¶ç±»ï¼‰ å‡å®ç°äº† <code>getBatchKey()</code> æ–¹æ³•</p>
<p>InsertCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Internal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsertCoordinatorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InsertCoordinator</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BasicBatchKey batchKey;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InsertCoordinatorStandard</span><span class="hljs-params">(AbstractEntityPersister entityPersister, SessionFactoryImplementor factory)</span> {
        <span class="hljs-built_in">super</span>( entityPersister, factory );
        <span class="hljs-comment">// ä¸ºä»€ä¹ˆ GenerationType.IDENTITY æ— æ³•èµ°æ‰¹é‡æ’å…¥ï¼ŸåŸå› å°±åœ¨è¿™å„¿</span>
        <span class="hljs-keyword">if</span> ( entityPersister.isIdentifierAssignedByInsert() || entityPersister.hasInsertGeneratedProperties() ) {
            <span class="hljs-comment">// disable batching in case of insert generated identifier or properties</span>
            batchKey = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            batchKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicBatchKey</span>(
                entityPersister.getEntityName() + <span class="hljs-string">"#INSERT"</span>,
                <span class="hljs-literal">null</span>
            );
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> BatchKey <span class="hljs-title function_">getBatchKey</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> batchKey;
    }
}
</code></pre>
<p>UpdateCoordinatorStandard</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateCoordinatorStandard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UpdateCoordinator</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BatchKey batchKey;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BatchKey versionUpdateBatchkey;

    <span class="hljs-keyword">protected</span> BatchKey <span class="hljs-title function_">getBatchKey</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> batchKey;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UpdateCoordinatorStandard</span><span class="hljs-params">(AbstractEntityPersister entityPersister, SessionFactoryImplementor factory)</span> {
        <span class="hljs-built_in">super</span>( entityPersister, factory );
        <span class="hljs-keyword">if</span> ( entityPersister.hasUpdateGeneratedProperties() ) {
            <span class="hljs-comment">// disable batching in case of update generated properties</span>
            <span class="hljs-built_in">this</span>.batchKey = <span class="hljs-literal">null</span>;
            <span class="hljs-built_in">this</span>.versionUpdateBatchkey = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">this</span>.batchKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicBatchKey</span>(
                entityPersister.getEntityName() + <span class="hljs-string">"#UPDATE"</span>,
                <span class="hljs-literal">null</span>
            );
            <span class="hljs-built_in">this</span>.versionUpdateBatchkey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicBatchKey</span>(
                entityPersister.getEntityName() + <span class="hljs-string">"#UPDATE_VERSION"</span>,
                <span class="hljs-literal">null</span>
            );
        }
    }
}
</code></pre>
<p>AbstractDeleteCoordinatorï¼ˆDeleteCoordinatorStandard çˆ¶ç±»ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractDeleteCoordinator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMutationCoordinator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DeleteCoordinator</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BasicBatchKey batchKey;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AbstractDeleteCoordinator</span><span class="hljs-params">(
        AbstractEntityPersister entityPersister,
        SessionFactoryImplementor factory
    )</span> {
        <span class="hljs-built_in">super</span>( entityPersister, factory );
        <span class="hljs-built_in">this</span>.batchKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicBatchKey</span>( entityPersister.getEntityName() + <span class="hljs-string">"#DELETE"</span> );
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> BasicBatchKey <span class="hljs-title function_">getBatchKey</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> batchKey;
    }
}
</code></pre>
<p>å†æ¥åˆ†æä¸‹ <code>jdbcOperation.canBeBatched( batchKey, batchSizeToUse )</code> è¿™è¡Œä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PreparableMutationOperation</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MutationOperation</span> {

    <span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canBeBatched</span><span class="hljs-params">(BatchKey batchKey, <span class="hljs-type">int</span> batchSize)</span> {
        <span class="hljs-keyword">if</span> ( batchKey == <span class="hljs-literal">null</span> || batchSize &lt; <span class="hljs-number">2</span> ) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> ( getMutationType() == MutationType.UPDATE ) {
            <span class="hljs-comment">// we cannot batch updates against optional tables</span>
            <span class="hljs-keyword">if</span> ( getTableDetails().isOptional() ) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> getExpectation().canBeBatched();
    }

    <span class="hljs-comment">// äº¤ç”±å„å­ç±»å®ç°</span>
    Expectation <span class="hljs-title function_">getExpectation</span><span class="hljs-params">()</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Expectation</span> {

    <span class="hljs-comment">/**
	 * Is it acceptable to combine this expectation with JDBC
	 * {<span class="hljs-doctag">@linkplain</span> PreparedStatement#executeBatch() statement batching}?
	 * If this method returns {<span class="hljs-doctag">@code</span> false}, the use of batch updates
	 * is disabled.
	 *
	 * <span class="hljs-doctag">@return</span> True if batching can be combined with this expectation;
	 *         false otherwise.
	 *
	 * <span class="hljs-doctag">@see</span> PreparedStatement#executeBatch()
	 */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canBeBatched</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h5 data-id="heading-9">executeBatchInternal æµç¨‹</h5>
<p>è¿™ä¸ªæµç¨‹çš„èµ·ç‚¹ä» ActionQueue#executeActions æ–¹æ³•è®²èµ·</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionQueue</span> {

    <span class="hljs-keyword">private</span> &lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ComparableExecutable</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeActions</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ExecutableList&lt;E&gt; list)</span> <span class="hljs-keyword">throws</span> HibernateException {
        <span class="hljs-comment">// æœ€ç»ˆä¼šæ‰§è¡Œ ClientPreparedStatement#executeBatchInternal() æ–¹æ³•</span>
        session.getJdbcCoordinator().executeBatch();
    }
}
</code></pre>
<p>è®©æˆ‘ä»¬æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šåªè¦è¿›å…¥ä¸Šè¿° <code>executeActions</code> æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šæ‰§è¡Œ <code>session.getJdbcCoordinator().executeBatch()</code>ï¼Œè¿™æ˜¯å¦æ„å‘³ç€ <code>ActionQueue</code> ä¸­çš„æ¯ä¸€ä¸ªæ“ä½œéƒ½å¿…é¡»èµ°æ‰¹é‡æµç¨‹ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œæ¥ç€å¾€ä¸‹çœ‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcCoordinatorImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JdbcCoordinator</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> Batch currentBatch;

    <span class="hljs-comment">// MutationExecutorSingleBatched å’Œ MutationExecutorStandard çš„æµç¨‹ä¼šè°ƒç”¨æ­¤æ–¹æ³•</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Batch <span class="hljs-title function_">getBatch</span><span class="hljs-params">(BatchKey key, Integer batchSize, Supplier&lt;PreparedStatementGroup&gt; statementGroupSupplier)</span> {
        <span class="hljs-keyword">if</span> ( currentBatch != <span class="hljs-literal">null</span> ) {
            <span class="hljs-keyword">if</span> ( currentBatch.getKey().equals( key ) ) {
                <span class="hljs-keyword">return</span> currentBatch;
            }
            <span class="hljs-keyword">else</span> {
                currentBatch.execute();
                currentBatch.release();
            }
        }
        currentBatch = owner.getJdbcSessionContext().getBatchBuilder()
            .buildBatch( key, batchSize, statementGroupSupplier, <span class="hljs-built_in">this</span> );
        <span class="hljs-keyword">return</span> currentBatch;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeBatch</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ( currentBatch != <span class="hljs-literal">null</span> ) {
            <span class="hljs-keyword">try</span> {
                currentBatch.execute();
            }
            <span class="hljs-keyword">finally</span> {
                currentBatch.release();
            }
        }
    }
}
</code></pre>
<p>åœ¨ <code>Batch#execute()</code> æ–¹æ³•ä¸­ï¼Œæ˜¯å¦çœŸæ­£æ‰§è¡Œæ•°æ®åº“æ‰¹å¤„ç†æ“ä½œï¼Œç”± batchPosition å’Œ batchExecuted è¿™ä¸¤ä¸ªå…³é”®å­—æ®µæ§åˆ¶ï¼Œè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼ä»…åœ¨è°ƒç”¨ <code>Batch#addToBatch()</code> æ—¶æ›´æ–°â€”â€”è€Œ <code>addToBatch()</code> æ­£æ˜¯æ‰¹é‡æµç¨‹çš„å…¥å£æ–¹æ³•ã€‚åªæœ‰å½“æ“ä½œæ»¡è¶³æ‰¹å¤„ç†æ¡ä»¶æ—¶ï¼Œæ‰ä¼šè°ƒç”¨ <code>Batch#addToBatch()</code> æ–¹æ³•ã€‚å› æ­¤ï¼Œåªæœ‰çœŸæ­£è¿›å…¥æ‰¹é‡æµç¨‹çš„æ“ä½œï¼Œæ‰ä¼šæ‰§è¡Œ performExecution() æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Batch</span> {

    <span class="hljs-comment">// è®°å½•å½“å‰å·²ç´¯ç§¯ä½†å°šæœªæ‰§è¡Œçš„æ‰¹å¤„ç†è¯­å¥æ•°é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> batchPosition;
    <span class="hljs-comment">// æ ‡è®°å½“å‰æ‰¹æ¬¡æ˜¯å¦å·²è¢«æ‰§è¡Œè¿‡ï¼ˆç”¨äºé¿å…é‡å¤æ‰§è¡Œï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> batchExecuted;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToBatch</span><span class="hljs-params">(JdbcValueBindings jdbcValueBindings, TableInclusionChecker inclusionChecker)</span> {
        batchPosition++;
        <span class="hljs-keyword">if</span> ( batchPosition == batchSizeToUse ) {
            notifyObserversImplicitExecution();
            performExecution();
            batchPosition = <span class="hljs-number">0</span>;
            batchExecuted = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {
        notifyObserversExplicitExecution();
        <span class="hljs-keyword">if</span> ( getStatementGroup().getNumberOfStatements() == <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> ( batchPosition == <span class="hljs-number">0</span> ) {
                <span class="hljs-keyword">if</span>( !batchExecuted) {
                    <span class="hljs-keyword">if</span> ( BATCH_LOGGER.isDebugEnabled() ) {
                        BATCH_LOGGER.debugf(
                            <span class="hljs-string">"No batched statements to execute - %s"</span>,
                            getKey().toLoggableString()
                        );
                    }
                }
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æœ€ç»ˆä¼šè°ƒç”¨ ClientPreparedStatement#executeBatchInternal() æ–¹æ³•</span>
                performExecution();
            }
        }
        <span class="hljs-keyword">finally</span> {
            releaseStatements();
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG æ·±åº¦å®è·µç³»åˆ—ï¼ˆäºŒï¼‰ï¼šå·¥ä½œæµç¨‹ã€æ ¸å¿ƒç»„ä»¶ä¸é«˜çº§ä¼˜åŒ–ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7599475458720071680</link>    <guid>https://juejin.cn/post/7599475458720071680</guid>    <pubDate>2026-01-26T09:46:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599475458720071680" data-draft-id="7599474528238829608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG æ·±åº¦å®è·µç³»åˆ—ï¼ˆäºŒï¼‰ï¼šå·¥ä½œæµç¨‹ã€æ ¸å¿ƒç»„ä»¶ä¸é«˜çº§ä¼˜åŒ–ç­–ç•¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-26T09:46:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸­æ¯å¯ä¹å¤šåŠ å†°"/> <meta itemprop="url" content="https://juejin.cn/user/3435306702347432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG æ·±åº¦å®è·µç³»åˆ—ï¼ˆäºŒï¼‰ï¼šå·¥ä½œæµç¨‹ã€æ ¸å¿ƒç»„ä»¶ä¸é«˜çº§ä¼˜åŒ–ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3435306702347432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸­æ¯å¯ä¹å¤šåŠ å†°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:46:08.000Z" title="Mon Jan 26 2026 09:46:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ RAG å·¥ä½œæµç¨‹</h2>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç³»ç»Ÿä»£è¡¨äº†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨æ¶æ„çš„é‡å¤§æ¼”è¿›ï¼Œå®ƒå°† LLM çš„å¼ºå¤§ç”Ÿæˆèƒ½åŠ›ä¸å¤–éƒ¨çŸ¥è¯†åº“çš„å®æ—¶æ€§ã€å‡†ç¡®æ€§ç›¸ç»“åˆï¼Œå½¢æˆäº†ä¸€ä¸ªé«˜æ•ˆã€å¯é çš„çŸ¥è¯†é—­ç¯ã€‚ç†è§£ RAG ç³»ç»Ÿçš„å®Œæ•´å·¥ä½œæµç¨‹ï¼Œæ˜¯æ„å»ºå’Œä¼˜åŒ–ä»»ä½• RAG åº”ç”¨çš„åŸºç¡€ã€‚è¿™ä¸ªæµç¨‹å¹¶éç®€å•çš„ç»„ä»¶å †ç Œï¼Œè€Œæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡ã€ç¯ç¯ç›¸æ‰£çš„<strong>ä¿¡æ¯å¤„ç†ç®¡é“</strong>ï¼Œä¸»è¦ç”±æŸ¥è¯¢è§£æã€æ–‡æ¡£æ£€ç´¢ã€ä¿¡æ¯æ•´åˆä¸å›ç­”ç”Ÿæˆå››ä¸ªé˜¶æ®µæ„æˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cab9b73af4ba40309d07e4eba7167905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=Y1%2FJzkMkExjmsJ6x3V2ynvA6QeM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<p>è®¸å¤šå¼€å‘è€…åœ¨ RAG å®è·µä¸­ï¼Œå¾€å¾€æ­¢æ­¥äºÂ <strong>å‘é‡æ•°æ®åº“ + Prompt</strong>Â çš„ç®€å•ç»„åˆï¼Œå´åœ¨é¢å¯¹æ–‡æ¡£åˆ‡ç‰‡ç­–ç•¥ã€é‡æ’åº Rerank å¼•å…¥ã€ä»¥åŠç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²è°ƒä¼˜ç­‰æ·±æ°´åŒºé—®é¢˜æ—¶æ„Ÿåˆ°å›°æƒ‘ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©å¼€å‘è€…å¡«è¡¥ä»æ‡‚åŸç†åˆ°èƒ½è½åœ°çš„å…³é”®æ‹¼å›¾ï¼ŒAIå¤§å­¦å ‚åŸºäºå¤§é‡çš„ä¸šåŠ¡å®æˆ˜ç»éªŒï¼Œç²¾å¿ƒæ‰“ç£¨è¯¾ç¨‹ï¼Œæ­£å¼æ¨å‡ºÂ <strong>RAGå·¥ç¨‹å¸ˆè®¤è¯</strong>ã€‚è¿™ä»½è¯ä¹¦å°†æ˜¯ä½ ç³»ç»ŸåŒ–æŒæ¡ AI è½åœ°æ ¸å¿ƒèƒ½åŠ›çš„ç»ä½³æœºä¼šï¼Œè®¤è¯ç°å·²å¼€å¯ï¼Œ<strong>é™æ—¶å…è´¹</strong>ï¼Œç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidaxue.com%2Fcourse%2F1151%3Fvideo_id%3D5093%26ch%3DCSDNRAG2" target="_blank" title="https://www.aidaxue.com/course/1151?video_id=5093&amp;ch=CSDNRAG2" ref="nofollow noopener noreferrer">ğŸ”—è®¤è¯é“¾æ¥</a>å¼€å§‹å­¦ä¹ ï¼</p>
<hr/>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.1ã€ æŸ¥è¯¢è§£æï¼šæ•è·ç”¨æˆ·çœŸå®æ„å›¾ä¸æŸ¥è¯¢ä¼˜åŒ–</h3>
<p>RAG æµç¨‹å§‹äºç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼Œè€Œ<strong>æŸ¥è¯¢è§£æ</strong>ï¼ˆQuery Understandingï¼‰åˆ™æ˜¯æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹å’ŒåŸºçŸ³ã€‚ç”¨æˆ·æŸ¥è¯¢å¾€å¾€æ˜¯å£è¯­åŒ–ã€éç»“æ„åŒ–çš„ï¼Œå¯èƒ½å­˜åœ¨æ­§ä¹‰ã€çœç•¥æˆ–æªè¾ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚å› æ­¤ï¼ŒæŸ¥è¯¢è§£æçš„ç›®æ ‡æ˜¯å‡†ç¡®ç†è§£ç”¨æˆ·çš„<strong>ä¿¡æ¯éœ€æ±‚</strong>å’Œ<strong>æ„å›¾</strong>ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºç³»ç»Ÿèƒ½å¤Ÿé«˜æ•ˆå¤„ç†çš„ã€ä¼˜åŒ–çš„æ£€ç´¢ä¿¡å·ã€‚</p>
<p>åœ¨åŸºç¡€å¤„ç†å±‚é¢ï¼Œç³»ç»Ÿé¦–å…ˆéœ€è¦è¿›è¡Œ<strong>æ–‡æœ¬æ¸…æ´—ä¸æ ‡å‡†åŒ–</strong>ï¼Œå»é™¤æ— å…³å­—ç¬¦ã€å¤„ç†æ‹¼å†™é”™è¯¯ï¼Œå¹¶ç»Ÿä¸€æ ¼å¼ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ›´æ·±å±‚æ¬¡çš„è¯­ä¹‰åˆ†æå¼€å§‹ä»‹å…¥ï¼ŒåŒ…æ‹¬<strong>å‘½åå®ä½“è¯†åˆ«ï¼ˆNERï¼‰</strong> ï¼Œä»¥è¯†åˆ«æŸ¥è¯¢ä¸­çš„å…³é”®å®ä½“ï¼ˆå¦‚äººåã€äº§å“ã€æ—¥æœŸï¼‰ï¼Œä»¥åŠ<strong>æ„å›¾è¯†åˆ«</strong>ï¼Œä»¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¯»æ±‚äº‹å®ã€å®šä¹‰ã€è¿˜æ˜¯æ“ä½œæŒ‡å—ã€‚è¿™äº›ä¿¡æ¯å¯¹äºåç»­çš„<strong>å…ƒæ•°æ®è¿‡æ»¤</strong>å’Œ<strong>æ£€ç´¢ç­–ç•¥é€‰æ‹©</strong>è‡³å…³é‡è¦ã€‚</p>
<p>ä¸ºäº†å…‹æœç”¨æˆ·æŸ¥è¯¢çš„ç®€çŸ­æ€§æˆ–æ¨¡ç³Šæ€§ï¼Œæé«˜æ£€ç´¢çš„<strong>å¬å›ç‡</strong>ï¼ŒRAG ç³»ç»Ÿå¸¸é‡‡ç”¨ LLM é©±åŠ¨çš„æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤šè½®å¯¹è¯åœºæ™¯ä¸­ï¼ŒLLM å¯ä»¥è¿›è¡Œ<strong>æŸ¥è¯¢é‡å†™</strong>ï¼ˆQuery Rewritingï¼‰ï¼Œæ ¹æ®å¯¹è¯å†å²å°†æ¨¡ç³Šçš„æŒ‡ä»£ï¼ˆå¦‚â€œå®ƒâ€ã€â€œé‚£ä¸ªâ€ï¼‰é‡å†™ä¸ºæ˜ç¡®ã€ç‹¬ç«‹çš„æŸ¥è¯¢ã€‚æ­¤å¤–ï¼Œ<strong>æŸ¥è¯¢æ‰©å±•</strong>ï¼ˆQuery Expansionï¼‰åˆ™é€šè¿‡ç”Ÿæˆå¤šä¸ªè¯­ä¹‰ç­‰ä»·æˆ–ä»ä¸åŒè§’åº¦æé—®çš„æŸ¥è¯¢å˜ä½“ï¼Œæ¥å¢åŠ å‘½ä¸­ç›¸å…³æ–‡æ¡£çš„å¯èƒ½æ€§ã€‚è¿™äº›ä¼˜åŒ–åçš„æŸ¥è¯¢ä¿¡å·ï¼Œæ— è®ºæ˜¯å…³é”®è¯ã€å®ä½“è¿˜æ˜¯æ–°çš„æŸ¥è¯¢è¯­å¥ï¼Œéƒ½å°†ä½œä¸ºè¾“å…¥ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ªé˜¶æ®µçš„æ£€ç´¢æ¨¡å—ã€‚</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.2ã€ æ–‡æ¡£æ£€ç´¢ï¼šæµ·é‡çŸ¥è¯†çš„ç²¾å‡†å®šä½ä¸ç­–ç•¥é€‰æ‹©</h3>
<p><strong>æ–‡æ¡£æ£€ç´¢</strong>ï¼ˆDocument Retrievalï¼‰æ˜¯ RAG çš„æ ¸å¿ƒç¯èŠ‚ï¼Œå®ƒè´Ÿè´£ä»å¤§è§„æ¨¡çŸ¥è¯†åº“ä¸­æ‰¾å‡ºä¸ä¼˜åŒ–åæŸ¥è¯¢æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µã€‚æ£€ç´¢çš„è´¨é‡ç›´æ¥å†³å®šäº† LLM ç”Ÿæˆå›ç­”çš„<strong>äº‹å®å‡†ç¡®æ€§</strong>ã€‚</p>
<p>ç°ä»£ RAG ç³»ç»Ÿä¸»è¦ä¾èµ–äºä¸‰ç§æ£€ç´¢ç­–ç•¥ï¼šç¨€ç–æ£€ç´¢ã€å¯†é›†æ£€ç´¢å’Œæ··åˆæ£€ç´¢ã€‚ç¨€ç–æ£€ç´¢ä¸»è¦åŸºäºå…³é”®è¯åŒ¹é…ï¼Œå…¶ä¸­æœ€å…·ä»£è¡¨æ€§çš„æ˜¯Â <strong>BM25</strong>ï¼ˆBest Match 25ï¼‰ç®—æ³•ã€‚BM25 æ˜¯ä¸€ç§åŸºäºæ¦‚ç‡çš„æ£€ç´¢æ¨¡å‹ï¼Œå®ƒé€šè¿‡è®¡ç®—æŸ¥è¯¢è¯åœ¨æ–‡æ¡£ä¸­çš„é¢‘ç‡å’Œåœ¨æ•´ä¸ªè¯­æ–™åº“ä¸­çš„ç¨€æœ‰åº¦ï¼Œå¹¶å¼•å…¥äº†æ–‡æ¡£é•¿åº¦å½’ä¸€åŒ–å’Œè¯é¢‘é¥±å’Œåº¦å‚æ•°ï¼Œæ¥è¡¡é‡æ–‡æ¡£ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§ã€‚ç¨€ç–æ£€ç´¢çš„ä¼˜åŠ¿åœ¨äºå…¶<strong>å¯è§£é‡Šæ€§å¼º</strong>ã€<strong>è®¡ç®—æ•ˆç‡é«˜</strong>ï¼Œå¹¶ä¸”å¯¹è®­ç»ƒæ•°æ®ä¸­æœªå‡ºç°çš„<strong>é¢†åŸŸå¤–è¯æ±‡</strong>å…·æœ‰å¤©ç„¶çš„é²æ£’æ€§ã€‚ç„¶è€Œï¼Œå®ƒçš„ä¸»è¦å±€é™åœ¨äºæ— æ³•æ•æ‰<strong>è¯­ä¹‰ç›¸ä¼¼æ€§</strong>ï¼Œå¯¹åŒä¹‰è¯æˆ–ä¸åŒè¡¨è¾¾æ–¹å¼çš„æŸ¥è¯¢ï¼Œæ£€ç´¢æ•ˆæœå¾€å¾€ä¸ä½³ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>å¯†é›†æ£€ç´¢</strong>åˆ™åˆ©ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ Sentence-BERTï¼‰å°†æŸ¥è¯¢å’Œæ–‡æ¡£ç¼–ç æˆä½ç»´ã€ç¨ å¯†çš„<strong>åµŒå…¥å‘é‡</strong>ã€‚è¿™ç§æ–¹æ³•é€šå¸¸é‡‡ç”¨Â <strong>Bi-Encoder</strong>ï¼ˆåŒç¼–ç å™¨ï¼‰æ¶æ„ï¼Œé€šè¿‡è®¡ç®—å‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦æˆ–å†…ç§¯æ¥è¡¡é‡ç›¸å…³æ€§ã€‚å¯†é›†æ£€ç´¢çš„ä¼˜åŠ¿åœ¨äºå…¶å¼ºå¤§çš„<strong>è¯­ä¹‰åŒ¹é…èƒ½åŠ›</strong>ï¼Œå³ä½¿æŸ¥è¯¢å’Œæ–‡æ¡£åœ¨å­—é¢ä¸Šä¸åŒ¹é…ï¼Œä¹Ÿèƒ½é€šè¿‡è¯­ä¹‰å…³ç³»æ‰¾åˆ°ç›¸å…³å†…å®¹ã€‚å…¶æŒ‘æˆ˜åœ¨äºè®¡ç®—èµ„æºæ¶ˆè€—è¾ƒå¤§ï¼Œéœ€è¦ä¸“é—¨çš„<strong>å‘é‡æ•°æ®åº“</strong>æ”¯æŒé«˜æ•ˆçš„è¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆANNï¼‰æœç´¢ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†å…¼é¡¾å…³é”®è¯åŒ¹é…çš„ç²¾ç¡®æ€§å’Œè¯­ä¹‰åŒ¹é…çš„å¬å›ç‡ï¼Œ<strong>æ··åˆæ£€ç´¢</strong>ï¼ˆHybrid Retrievalï¼‰æˆä¸ºä¸»æµé€‰æ‹©ã€‚å®ƒé€šå¸¸åŒæ—¶æ‰§è¡Œç¨€ç–æ£€ç´¢å’Œå¯†é›†æ£€ç´¢ï¼Œç„¶åé€šè¿‡Â <strong>RRF</strong>ï¼ˆReciprocal Rank Fusionï¼‰ç­‰ç®—æ³•å¯¹ä¸¤ç§ç»“æœè¿›è¡Œèåˆæ’åºï¼Œä»è€Œå®ç°ä¼˜åŠ¿äº’è¡¥ï¼Œæœ€å¤§åŒ–æ£€ç´¢çš„é²æ£’æ€§å’Œæ•ˆæœã€‚ä¸‹è¡¨å¯¹è¿™ä¸‰ç§ç­–ç•¥è¿›è¡Œäº†æ€»ç»“ï¼š</p>





























<table><thead><tr><th align="left">æ£€ç´¢ç­–ç•¥</th><th align="left">æŠ€æœ¯åŸç†</th><th align="left">æ ¸å¿ƒä¼˜åŠ¿</th><th align="left">æ ¸å¿ƒå±€é™æ€§</th></tr></thead><tbody><tr><td align="left"><strong>ç¨€ç–æ£€ç´¢</strong></td><td align="left">åŸºäºå…³é”®è¯åŒ¹é…ï¼ˆBM25ï¼‰ï¼Œé«˜ç»´ç¨€ç–å‘é‡ã€‚</td><td align="left">å¯è§£é‡Šæ€§å¼ºï¼Œè®¡ç®—æ•ˆç‡é«˜ï¼Œå¯¹é¢†åŸŸå¤–è¯æ±‡é²æ£’ã€‚</td><td align="left">æ— æ³•æ•æ‰è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œå¯¹æŸ¥è¯¢æªè¾æ•æ„Ÿã€‚</td></tr><tr><td align="left"><strong>å¯†é›†æ£€ç´¢</strong></td><td align="left">åŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆBi-Encoderï¼‰ï¼Œä½ç»´ç¨ å¯†å‘é‡ã€‚</td><td align="left">å¼ºå¤§çš„è¯­ä¹‰åŒ¹é…èƒ½åŠ›ï¼Œå¤æ‚æŸ¥è¯¢æ•ˆæœå¥½ã€‚</td><td align="left">è®¡ç®—èµ„æºæ¶ˆè€—å¤§ï¼Œå¯è§£é‡Šæ€§å·®ã€‚</td></tr><tr><td align="left"><strong>æ··åˆæ£€ç´¢</strong></td><td align="left">ç»“åˆç¨€ç–å’Œå¯†é›†æ£€ç´¢ï¼Œé€šè¿‡ RRF èåˆã€‚</td><td align="left">å…¼é¡¾å…³é”®è¯å’Œè¯­ä¹‰åŒ¹é…ï¼Œå¬å›ç‡å’Œé²æ£’æ€§æœ€é«˜ã€‚</td><td align="left">å®ç°å¤æ‚åº¦é«˜ï¼Œéœ€è¦ç»´æŠ¤ä¸¤å¥—ç´¢å¼•ã€‚</td></tr></tbody></table>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.3ã€ ä¿¡æ¯æ•´åˆä¸å›ç­”ç”Ÿæˆï¼šå¢å¼ºæ¨ç†ä¸å†…å®¹åˆ›ä½œ</h3>
<p>æ£€ç´¢æ¨¡å—è¿”å›çš„æ–‡æ¡£ç‰‡æ®µè¿›å…¥<strong>ä¿¡æ¯æ•´åˆ</strong>é˜¶æ®µï¼Œéšåä¸åŸå§‹æŸ¥è¯¢ä¸€èµ·è¾“å…¥ç»™ LLM è¿›è¡Œæœ€ç»ˆçš„å›ç­”ç”Ÿæˆã€‚è¿™ä¸€é˜¶æ®µæ˜¯ RAG ä»·å€¼çš„æœ€ç»ˆä½“ç°ã€‚</p>
<p><strong>ä¸Šä¸‹æ–‡æ„å»ºä¸ç²¾ç‚¼</strong>æ˜¯ä¿¡æ¯æ•´åˆçš„æ ¸å¿ƒä»»åŠ¡ã€‚ç”±äº LLM çš„ä¸Šä¸‹æ–‡çª—å£æ˜¯æœ‰é™çš„ï¼Œæ£€ç´¢åˆ°çš„ä¿¡æ¯å¿…é¡»ç»è¿‡ç²¾ç‚¼å’Œç»„ç»‡ï¼Œä»¥ç¡®ä¿æä¾›ç»™ LLM çš„ä¸Šä¸‹æ–‡æ˜¯<strong>é«˜è´¨é‡ã€ç´§å‡‘ä¸”ç›¸å…³</strong>çš„ã€‚è¿™åŒ…æ‹¬å¯¹æ£€ç´¢ç»“æœè¿›è¡Œåˆæ­¥çš„<strong>å»é‡</strong>ã€<strong>æ‘˜è¦</strong>æˆ–<strong>å…³é”®ä¿¡æ¯æå–</strong>ã€‚æœ€ç»ˆï¼Œç³»ç»Ÿå°†ç”¨æˆ·æŸ¥è¯¢å’Œç»è¿‡ç­›é€‰ã€æ’åºçš„æ–‡æ¡£ç‰‡æ®µç»„åˆæˆä¸€ä¸ªç»“æ„åŒ–çš„è¾“å…¥åºåˆ—ï¼Œå¹¶ä»¥æ˜ç¡®çš„<strong>æç¤ºè¯</strong>ï¼ˆPromptï¼‰æ ¼å¼è¾“å…¥ç»™ LLMã€‚</p>
<p>åœ¨ RAG ç³»ç»Ÿä¸­ï¼ŒLLM çš„è§’è‰²å‘ç”Ÿäº†æœ¬è´¨æ€§çš„è½¬å˜ã€‚å®ƒä¸å†æ˜¯ç‹¬ç«‹åœ°ä»å…¶å†…éƒ¨å‚æ•°åŒ–çŸ¥è¯†ä¸­ç”Ÿæˆå›ç­”ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„<strong>æ¨ç†å¼•æ“</strong>å’Œ<strong>æ–‡æœ¬ç”Ÿæˆå™¨</strong>ï¼Œå…¶ç”Ÿæˆè¿‡ç¨‹è¢«å¤–éƒ¨çŸ¥è¯†æ‰€â€œå¢å¼ºâ€å’Œâ€œçº¦æŸâ€ã€‚LLM çš„æ ¸å¿ƒä½œç”¨åœ¨äºï¼š<strong>ä¿¡æ¯ç»¼åˆ</strong>ï¼Œèƒ½å¤Ÿä»åˆ†æ•£åœ¨ä¸åŒæ–‡æ¡£ç‰‡æ®µä¸­çš„ä¿¡æ¯ä¸­è¿›è¡Œé€»è¾‘æ¨ç†ï¼›<strong>äº‹å®æ ¸æŸ¥</strong>ï¼Œç¡®ä¿ç”Ÿæˆçš„å†…å®¹ä¸æ£€ç´¢åˆ°çš„äº‹å®ä¿¡æ¯ä¸€è‡´ï¼Œä»è€Œæ˜¾è‘—é™ä½â€œå¹»è§‰â€çš„é£é™©ï¼›ä»¥åŠ<strong>è‡ªç„¶è¯­è¨€ç”Ÿæˆ</strong>ï¼Œå°†ç»¼åˆåçš„ä¿¡æ¯ä»¥æµç•…ã€ä¸“ä¸šçš„è¯­è¨€å½¢å¼è¡¨è¾¾å‡ºæ¥ã€‚æœ€ç»ˆç”Ÿæˆçš„ç­”æ¡ˆå¿…é¡»åŒæ—¶æ»¡è¶³<strong>å‡†ç¡®æ€§</strong>ï¼ˆAccuracyï¼‰å’Œ<strong>æµç•…æ€§</strong>ï¼ˆFluencyï¼‰ä¸¤ä¸ªæ ‡å‡†ï¼Œå¹¶èƒ½å¤Ÿæä¾›<strong>å¼•ç”¨æ¥æº</strong>ï¼Œä»¥å¢å¼ºç³»ç»Ÿçš„å¯ä¿¡åº¦å’Œå¯è¿½æº¯æ€§ã€‚</p>
<h2 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€ æ ¸å¿ƒç»„ä»¶æ·±åº¦è§£æ</h2>
<p>RAG ç³»ç»Ÿçš„æ€§èƒ½ä¸Šé™å–å†³äºå…¶æ ¸å¿ƒç»„ä»¶çš„æŠ€æœ¯é€‰å‹å’Œä¼˜åŒ–ç¨‹åº¦ã€‚ä»æ•°æ®æ‘„å–åˆ°å‘é‡å­˜å‚¨ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½è•´å«ç€å¤æ‚çš„æŠ€æœ¯æŒ‘æˆ˜å’Œä¼˜åŒ–ç©ºé—´ã€‚</p>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1ã€ æ•°æ®é¢„å¤„ç†ä¸æ–‡æœ¬åˆ†å—</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ce14de1e9074d1f927cf37d77875bac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=Nc79xCi%2BugGtnOGOd0%2FsJ7Mz8ho%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ•°æ®é¢„å¤„ç†</strong>æ˜¯ RAG ç³»ç»Ÿçš„â€œåœ°åŸºâ€ï¼Œå…¶ä»»åŠ¡æ˜¯å°†åŸå§‹ã€å¼‚æ„çš„æ•°æ®è½¬åŒ–ä¸ºç»Ÿä¸€ã€å¹²å‡€ã€é€‚åˆæ£€ç´¢å’ŒåµŒå…¥æ¨¡å‹å¤„ç†çš„æ ¼å¼ã€‚åœ¨å®é™…éƒ¨ç½²ä¸­ï¼ŒRAG ç³»ç»Ÿéœ€è¦å¤„ç†å„ç§å¤æ‚çš„æ•°æ®æºï¼Œä¾‹å¦‚åŒ…å«å¤æ‚å¸ƒå±€ã€è¡¨æ ¼å’Œå›¾ç‰‡çš„Â <strong>PDF æ–‡æ¡£</strong>ï¼Œéœ€è¦ä½¿ç”¨Â <strong>Layout-Aware Parsers</strong>Â æ¥æå–æ–‡æœ¬å¹¶ä¿ç•™ç»“æ„ä¿¡æ¯ï¼›ä»¥åŠåŒ…å«å¤§é‡å†—ä½™æ ‡ç­¾çš„Â <strong>HTML ç½‘é¡µ</strong>ï¼Œéœ€è¦è¿›è¡Œå†…å®¹æå–ä»¥åªä¿ç•™æ–‡ç« æ­£æ–‡ã€‚å¯¹äºÂ <strong>ç»“æ„åŒ–æ•°æ®</strong>ï¼ˆå¦‚ SQL æ•°æ®åº“ï¼‰ï¼Œåˆ™éœ€è¦å°†å…¶è½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€æè¿°ï¼Œä»¥ä¾¿è¿›è¡Œå‘é‡åŒ–ã€‚</p>
<p>åœ¨é¢„å¤„ç†æµç¨‹ä¸­ï¼Œ<strong>æ–‡æœ¬åˆ†å—</strong>ï¼ˆChunkingï¼‰æ— ç–‘æ˜¯æœ€å…·è‰ºæœ¯æ€§å’ŒæŒ‘æˆ˜æ€§çš„ç¯èŠ‚ã€‚ç›®æ ‡æ˜¯åˆ›å»ºå¤§å°é€‚ä¸­ã€è¯­ä¹‰å®Œæ•´çš„â€œå—â€ï¼ˆChunksï¼‰ï¼Œä»¥æœ€å¤§åŒ–æ£€ç´¢çš„<strong>ç›¸å…³æ€§</strong>å’Œ LLM çš„<strong>å¤„ç†æ•ˆç‡</strong>ã€‚ä¸€ä¸ªå¥½çš„æ–‡æœ¬å—åº”è¯¥åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥å›ç­”ä¸€ä¸ªé—®é¢˜ï¼Œä½†åˆä¸èƒ½è¿‡é•¿ï¼Œä»¥é¿å…ç¨€é‡Šå…³é”®ä¿¡æ¯ã€‚</p>
<p>åœ¨åˆ†å—ç­–ç•¥çš„é€‰æ‹©ä¸Šï¼Œéœ€è¦è¿›è¡Œç²¾å¦™çš„æƒè¡¡ã€‚<strong>å›ºå®šå¤§å°åˆ†å—</strong>è™½ç„¶å®ç°ç®€å•ï¼Œä½†å®¹æ˜“åœ¨è¯­ä¹‰è¾¹ç•Œå¤„æˆªæ–­ï¼Œç ´åä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œä¸šç•Œæ›´å€¾å‘äºé‡‡ç”¨<strong>è¯­ä¹‰åˆ†å—</strong>ç­–ç•¥ï¼Œä¾‹å¦‚åŸºäºæ®µè½ã€ç« èŠ‚æˆ–æ ‡é¢˜è¿›è¡Œåˆ†å‰²ã€‚å…¶ä¸­ï¼Œ<strong>é€’å½’å­—ç¬¦æ–‡æœ¬åˆ†å‰²å™¨</strong>ï¼ˆRecursiveCharacterTextSplitterï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„å®è·µï¼Œå®ƒå°è¯•ä½¿ç”¨ä¸€ç³»åˆ—åˆ†éš”ç¬¦ï¼ˆå¦‚æ¢è¡Œç¬¦ã€å¥å·ã€ç©ºæ ¼ï¼‰é€’å½’åœ°åˆ†å‰²æ–‡æœ¬ï¼Œä»¥ä¼˜å…ˆä¿æŒè¯­ä¹‰å®Œæ•´æ€§ã€‚ä¸‹è¡¨æ€»ç»“äº†ä¸»è¦çš„æ–‡æœ¬åˆ†å—ç­–ç•¥ï¼š</p>





























<table><thead><tr><th align="left">åˆ†å—ç­–ç•¥</th><th align="left">æè¿°</th><th align="left">æ ¸å¿ƒä¼˜åŠ¿</th><th align="left">æ ¸å¿ƒæŒ‘æˆ˜</th></tr></thead><tbody><tr><td align="left"><strong>å›ºå®šå¤§å°åˆ†å—</strong></td><td align="left">æŒ‰å›ºå®šå­—ç¬¦æ•°æˆ– Token æ•°åˆ†å‰²ï¼Œè®¾ç½®é‡å é‡ã€‚</td><td align="left">å®ç°ç®€å•ï¼Œå¤§å°å¯æ§ã€‚</td><td align="left">å®¹æ˜“åœ¨è¯­ä¹‰è¾¹ç•Œå¤„æˆªæ–­ï¼Œç ´åä¸Šä¸‹æ–‡ã€‚</td></tr><tr><td align="left"><strong>è¯­ä¹‰åˆ†å—</strong></td><td align="left">åŸºäºæ®µè½ã€ç« èŠ‚ã€æ ‡é¢˜ç­‰è¯­ä¹‰è¾¹ç•Œè¿›è¡Œåˆ†å‰²ã€‚</td><td align="left">ä¿ç•™è¯­ä¹‰å®Œæ•´æ€§ï¼Œæ¯ä¸ªå—æ˜¯ç‹¬ç«‹çš„é€»è¾‘å•å…ƒã€‚</td><td align="left">å®ç°å¤æ‚ï¼Œä¾èµ–äºæ–‡æœ¬çš„æ ¼å¼è§„èŒƒæ€§ã€‚</td></tr><tr><td align="left"><strong>çˆ¶æ–‡æ¡£æ£€ç´¢</strong></td><td align="left">å­˜å‚¨å°å—ç”¨äºæ£€ç´¢ï¼Œè¿”å›åŒ…å«è¯¥å°å—çš„æ›´å¤§â€œçˆ¶æ–‡æ¡£â€ä½œä¸ºä¸Šä¸‹æ–‡ã€‚</td><td align="left">æ£€ç´¢ç²¾ç¡®ï¼ˆå°å—ï¼‰ï¼Œä¸Šä¸‹æ–‡ä¸°å¯Œï¼ˆå¤§å—ï¼‰ã€‚</td><td align="left">ç´¢å¼•å’Œæ£€ç´¢é€»è¾‘æ›´å¤æ‚ã€‚</td></tr></tbody></table>
<p>åœ¨å®è·µä¸­ï¼Œ<strong>å—å¤§å°</strong>ï¼ˆ<code>chunk_size</code>ï¼‰çš„é€‰æ‹©éœ€è¦æ ¹æ®æ‰€ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹å’Œ LLM çš„ä¸Šä¸‹æ–‡çª—å£å¤§å°è¿›è¡Œæƒè¡¡ï¼Œè€Œ<strong>é‡å é‡</strong>ï¼ˆ<code>chunk_overlap</code>ï¼‰çš„è®¾ç½®åˆ™ç”¨äºç¡®ä¿è¯­ä¹‰è¿ç»­æ€§ï¼Œé˜²æ­¢å…³é”®ä¿¡æ¯è¢«åˆ†å‰²åˆ°ç›¸é‚»å—çš„è¾¹ç•Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fe9febdb65349b1999def690e93e74e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=gHyEpYkySSMLlVzomKc%2Bj2erf5E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2ã€ åµŒå…¥æŠ€æœ¯ï¼šè¯­ä¹‰ç©ºé—´çš„é‡åŒ–ä¸æ¨¡å‹é€‰æ‹©</h3>
<p><strong>åµŒå…¥æŠ€æœ¯</strong>ï¼ˆEmbeddingï¼‰æ˜¯ RAG ç³»ç»Ÿä¸­å®ç°è¯­ä¹‰åŒ¹é…çš„åŸºçŸ³ã€‚å®ƒå°†äººç±»å¯è¯»çš„æ–‡æœ¬è½¬åŒ–ä¸ºä½ç»´ã€ç¨ å¯†çš„æ•°å€¼å‘é‡ï¼Œä»è€Œåœ¨å‘é‡ç©ºé—´ä¸­é‡åŒ–æ–‡æœ¬çš„è¯­ä¹‰ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªå‘é‡ç©ºé—´ä¸­ï¼Œè¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µä¼šè¢«æ˜ å°„åˆ°å½¼æ­¤é è¿‘çš„ä½ç½®ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a879bc2418b44a3fb96b752d39b705af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=2YSth1LSQgb%2F9R7WeXZhZDtdnDo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åµŒå…¥æ¨¡å‹çš„è´¨é‡ç›´æ¥å†³å®šäº†å¯†é›†æ£€ç´¢çš„ä¸Šé™ã€‚é€‰æ‹©æ¨¡å‹æ—¶ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘å…¶åœ¨Â <strong>MTEB</strong>ï¼ˆMassive Text Embedding Benchmarkï¼‰ç­‰åŸºå‡†æµ‹è¯•ä¸Šçš„<strong>æ€§èƒ½</strong>ã€<strong>é¢†åŸŸé€‚åº”æ€§</strong>ã€<strong>è®¡ç®—èµ„æºéœ€æ±‚</strong>ä»¥åŠ<strong>æˆæœ¬</strong>ã€‚ä¾‹å¦‚ï¼Œ<strong>Sentence-BERT (SBERT)</strong> Â ç³»åˆ—æ¨¡å‹å› å…¶åœ¨å¥å­ç›¸ä¼¼åº¦ä»»åŠ¡ä¸Šçš„å‡ºè‰²è¡¨ç°å’Œé«˜è®¡ç®—æ•ˆç‡è€Œå¹¿å—æ¬¢è¿ã€‚å¯¹äºéœ€è¦å¤„ç†ä¸­æ–‡æˆ–ç‰¹å®šé¢†åŸŸçŸ¥è¯†çš„ RAG ç³»ç»Ÿï¼Œåˆ™éœ€è¦è€ƒè™‘ä½¿ç”¨åœ¨ç›¸å…³æ•°æ®ä¸Šè¿›è¡Œè¿‡å¾®è°ƒçš„Â <strong>BGE</strong>ï¼ˆBAAI General Embeddingï¼‰æˆ–Â <strong>GTE</strong>ï¼ˆGeneral Text Embeddingsï¼‰ç­‰é«˜æ€§èƒ½æ¨¡å‹ã€‚</p>
<p>ä¸€æ—¦æ–‡æœ¬è¢«è½¬æ¢ä¸ºåµŒå…¥å‘é‡ï¼Œç›¸å…³æ€§é€šå¸¸é€šè¿‡è®¡ç®—å‘é‡ä¹‹é—´çš„<strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>æ¥è¡¡é‡ã€‚ä½™å¼¦ç›¸ä¼¼åº¦è¡¡é‡çš„æ˜¯ä¸¤ä¸ªå‘é‡æ–¹å‘çš„ä¸€è‡´æ€§ï¼Œå®ƒèƒ½å¤Ÿæœ‰æ•ˆåœ°å¿½ç•¥æ–‡æœ¬é•¿åº¦çš„å½±å“ï¼Œä¸“æ³¨äºè¯­ä¹‰æ–¹å‘çš„åŒ¹é…ã€‚åœ¨å‘é‡ç©ºé—´ä¸­ï¼ŒæŸ¥è¯¢å‘é‡ä¸æ–‡æ¡£ç‰‡æ®µå‘é‡è¶Šæ¥è¿‘ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦è¶Šæ¥è¿‘ 1ï¼‰ï¼Œåˆ™è¯­ä¹‰è¶Šç›¸ä¼¼ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„è¯­ä¹‰æ£€ç´¢ã€‚</p>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.3ã€ å‘é‡å­˜å‚¨ä¸ç´¢å¼•ï¼šé«˜æ•ˆæœç´¢ä¸è°ƒä¼˜</h3>
<p>ä¸€æ—¦æ–‡æœ¬è¢«åµŒå…¥ï¼Œå°±éœ€è¦<strong>å‘é‡æ•°æ®åº“</strong>ï¼ˆVector Databaseï¼‰æ¥é«˜æ•ˆå­˜å‚¨ã€ç®¡ç†å’ŒæŸ¥è¯¢è¿™äº›é«˜ç»´å‘é‡ã€‚å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Pinecone, Milvus, Qdrant, Chromaï¼‰çš„æ ¸å¿ƒä»·å€¼åœ¨äºæ”¯æŒé«˜æ•ˆçš„<strong>è¿‘ä¼¼æœ€è¿‘é‚»</strong>ï¼ˆApproximate Nearest Neighbor, ANNï¼‰æœç´¢ã€‚</p>
<p>ç”±äºç²¾ç¡®æœ€è¿‘é‚»æœç´¢ï¼ˆENNï¼‰åœ¨é«˜ç»´ç©ºé—´ä¸­è®¡ç®—æˆæœ¬æé«˜ï¼Œå‘é‡æ•°æ®åº“æ™®éé‡‡ç”¨ ANN ç®—æ³•ï¼Œé€šè¿‡ç‰ºç‰²å°‘é‡ç²¾åº¦æ¥æ¢å–æŸ¥è¯¢é€Ÿåº¦çš„æ˜¾è‘—æå‡ã€‚å…¶ä¸­ï¼Œ<strong>HNSW</strong>ï¼ˆHierarchical Navigable Small Worldï¼‰å’ŒÂ <strong>IVF</strong>ï¼ˆInverted File Indexï¼‰æ˜¯ç›®å‰æœ€ä¸»æµçš„ä¸¤ç§ç´¢å¼•ç»“æ„ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fceba753c3b94529a7c2c819a512d062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=tiuE541RJ%2F86%2FJ0aR9KJFfeAdMs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>HNSW æ˜¯ä¸€ç§åŸºäºå›¾çš„ ANN ç®—æ³•ï¼Œå®ƒæ„å»ºäº†ä¸€ä¸ªå¤šå±‚å›¾ç»“æ„ï¼Œé€šè¿‡å›¾éå†è¿›è¡Œæœç´¢ã€‚å…¶ä¼˜åŠ¿åœ¨äº<strong>å¬å›ç‡é«˜</strong>ã€<strong>æœç´¢é€Ÿåº¦å¿«</strong>ï¼Œä½†å†…å­˜å ç”¨ç›¸å¯¹è¾ƒé«˜ã€‚åœ¨å®è·µä¸­ï¼Œé€šè¿‡è°ƒæ•´Â <strong>efSearchefSearch</strong>Â å‚æ•°å¯ä»¥çµæ´»åœ°åœ¨<strong>å¬å›ç‡</strong>å’Œ<strong>æŸ¥è¯¢å»¶è¿Ÿ</strong>ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼šè¾ƒå¤§çš„Â efSearchefSearchÂ å€¼ä¼šæé«˜å¬å›ç‡ï¼Œä½†ä¼šå¢åŠ å»¶è¿Ÿã€‚</p>
<p>IVF åˆ™æ˜¯ä¸€ç§åŸºäºèšç±»çš„ ANN ç®—æ³•ï¼Œå®ƒé¦–å…ˆå°†å‘é‡ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªå•å…ƒï¼Œæœç´¢æ—¶åªåœ¨æœ€è¿‘çš„å‡ ä¸ªå•å…ƒå†…éƒ¨è¿›è¡Œç²¾ç¡®æœç´¢ã€‚IVF çš„ä¼˜åŠ¿åœ¨äº<strong>å†…å­˜æ•ˆç‡é«˜</strong>ï¼Œé€‚ç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®é›†ã€‚ä¸‹è¡¨æ€»ç»“äº†è¿™ä¸¤ç§ä¸»æµ ANN ç´¢å¼•ç®—æ³•çš„ç‰¹ç‚¹ï¼š</p>























<table><thead><tr><th align="left">ANN ç´¢å¼•ç®—æ³•</th><th align="left">åŸç†æ¦‚è¿°</th><th align="left">æ ¸å¿ƒä¼˜åŠ¿</th><th align="left">æ€§èƒ½æƒè¡¡</th></tr></thead><tbody><tr><td align="left"><strong>HNSW</strong></td><td align="left">åŸºäºå›¾çš„ç®—æ³•ï¼Œæ„å»ºå¤šå±‚å›¾ç»“æ„è¿›è¡Œæœç´¢ã€‚</td><td align="left">å¬å›ç‡é«˜ï¼Œæœç´¢é€Ÿåº¦å¿«ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°ã€‚</td><td align="left">å†…å­˜å ç”¨é«˜ï¼›é€šè¿‡Â efSearchefSearchÂ æƒè¡¡å¬å›ç‡ä¸å»¶è¿Ÿã€‚</td></tr><tr><td align="left"><strong>IVF</strong></td><td align="left">åŸºäºèšç±»çš„ç®—æ³•ï¼Œæœç´¢æ—¶åªæ£€æŸ¥æœ€è¿‘çš„å•å…ƒã€‚</td><td align="left">å†…å­˜æ•ˆç‡é«˜ï¼Œé€‚ç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®é›†ã€‚</td><td align="left">å¬å›ç‡å¯èƒ½ç•¥ä½ï¼›é€šè¿‡Â nprobenprobeâ€‹Â æƒè¡¡å¬å›ç‡ä¸å»¶è¿Ÿã€‚</td></tr></tbody></table>
<p>å‘é‡æ•°æ®åº“è¿˜å¿…é¡»æ”¯æŒ<strong>å…ƒæ•°æ®è¿‡æ»¤</strong>ï¼Œå…è®¸ç”¨æˆ·åœ¨æ£€ç´¢æ—¶æ ¹æ®æ–‡æ¡£çš„å…ƒæ•°æ®ï¼ˆå¦‚æ—¥æœŸã€ä½œè€…ã€ä¸»é¢˜ï¼‰è¿›è¡Œé™åˆ¶æˆ–ç­›é€‰ï¼Œä»è€Œå®ç°æ›´ç²¾ç¡®çš„<strong>æ··åˆæœç´¢</strong>ï¼ˆHybrid Searchï¼‰ã€‚é€‰æ‹©åˆé€‚çš„å‘é‡æ•°æ®åº“å’Œç´¢å¼•ç­–ç•¥ï¼Œå¹¶è¿›è¡Œç²¾ç»†çš„å‚æ•°è°ƒä¼˜ï¼Œæ˜¯ç¡®ä¿ RAG ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šã€é«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚</p>
<h2 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€ é«˜çº§ä¼˜åŒ–ç­–ç•¥</h2>
<p>ä¸ºäº†å°† RAG ç³»ç»Ÿçš„æ€§èƒ½æ¨å‘æè‡´ï¼Œå¿…é¡»åœ¨æ£€ç´¢çš„å‰ç«¯å’Œåç«¯å¼•å…¥é«˜çº§ä¼˜åŒ–ç­–ç•¥ï¼Œå¯¹æŸ¥è¯¢å’Œæ£€ç´¢ç»“æœè¿›è¡Œç²¾ç›Šæ±‚ç²¾çš„å¤„ç†ã€‚</p>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.1ã€ é¢„æ£€ç´¢ä¼˜åŒ–ï¼šä¸»åŠ¨å¢å¼ºæŸ¥è¯¢ä¿¡å·</h3>
<p><strong>é¢„æ£€ç´¢ä¼˜åŒ–</strong>æ—¨åœ¨åœ¨å®é™…æ£€ç´¢å‘ç”Ÿä¹‹å‰ï¼Œé€šè¿‡å¯¹æŸ¥è¯¢è¿›è¡Œæ™ºèƒ½å¤„ç†ï¼Œç”Ÿæˆæ›´å¼ºå¤§çš„æ£€ç´¢ä¿¡å·ï¼Œä»¥è§£å†³åŸå§‹æŸ¥è¯¢çš„å±€é™æ€§ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9267e540ba714cf6af8b7946c5cd0140~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=Pnnzjqd%2BEk7f7HVLOIGTUVXlVgs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å…¶ä¸­æœ€å…·åˆ›æ–°æ€§çš„æŠ€æœ¯ä¹‹ä¸€æ˜¯<strong>å‡è®¾æ€§æ–‡æ¡£åµŒå…¥ï¼ˆHyDEï¼‰</strong> ã€‚HyDE è§£å†³äº†<strong>è¯æ±‡ä¸åŒ¹é…</strong>ï¼ˆLexical Gapï¼‰çš„é—®é¢˜ã€‚å…¶åŸç†æ˜¯ï¼šé¦–å…ˆåˆ©ç”¨ LLM æ ¹æ®åŸå§‹æŸ¥è¯¢ç”Ÿæˆä¸€ä¸ª<strong>å‡è®¾æ€§æ–‡æ¡£</strong>ï¼Œè¿™ä¸ªæ–‡æ¡£æ˜¯ LLM è®¤ä¸ºæœ€èƒ½å›ç­”åŸå§‹æŸ¥è¯¢çš„ç†æƒ³æ–‡æ¡£ã€‚ç„¶åï¼Œå¯¹è¿™ä¸ªå‡è®¾æ€§æ–‡æ¡£è¿›è¡ŒåµŒå…¥ï¼Œå¹¶ä½¿ç”¨å…¶åµŒå…¥å‘é‡è¿›è¡Œæ£€ç´¢ã€‚ç”±äºå‡è®¾æ€§æ–‡æ¡£é€šå¸¸æ¯”åŸå§‹æŸ¥è¯¢åŒ…å«æ›´ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯å’Œæ›´æ¥è¿‘æ–‡æ¡£çš„è¯æ±‡ï¼Œå› æ­¤å…¶åµŒå…¥å‘é‡èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰æŸ¥è¯¢çš„æ„å›¾ï¼Œæ˜¾è‘—æé«˜æ£€ç´¢çš„å‡†ç¡®æ€§ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•ä¼šå¢åŠ é¢å¤–çš„ LLM è°ƒç”¨ï¼Œä»è€Œå¢åŠ ç³»ç»Ÿçš„<strong>å»¶è¿Ÿ</strong>å’Œ<strong>è¿è¡Œæˆæœ¬</strong>ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯¹äºéœ€è¦å¤šæ­¥æ¨ç†æ‰èƒ½å›ç­”çš„å¤æ‚é—®é¢˜ï¼Œç³»ç»Ÿéœ€è¦å¼•å…¥Â <strong>LLM Agent</strong>Â æ¥åè°ƒå’Œè§„åˆ’æ£€ç´¢æ­¥éª¤ï¼Œå®ç°<strong>å¤šè·³æ£€ç´¢</strong>ï¼ˆMulti-Hop Retrievalï¼‰ã€‚Agent ä¼šå°†ä¸€ä¸ªå¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶ä¾æ¬¡è¿›è¡Œæ£€ç´¢ï¼Œå°†å‰ä¸€æ­¥çš„æ£€ç´¢ç»“æœä½œä¸ºåä¸€æ­¥æŸ¥è¯¢çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œå®ç°å¤æ‚çš„çŸ¥è¯†æ¨ç†ã€‚</p>
<h3 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.2ã€ æ£€ç´¢åå¤„ç†ï¼šç²¾ç‚¼ä¸é‡æ’åºçš„äºŒæ¬¡ç­›é€‰</h3>
<p><strong>æ£€ç´¢åå¤„ç†</strong>å‘ç”Ÿåœ¨æ–‡æ¡£æ£€ç´¢ä¹‹åã€LLM ç”Ÿæˆä¹‹å‰ï¼Œæ˜¯æå‡<strong>å‡†ç¡®ç‡</strong>ï¼ˆPrecisionï¼‰çš„å…³é”®ç¯èŠ‚ã€‚å°½ç®¡æ£€ç´¢å™¨å·²ç»è¿”å›äº† Top-K ç»“æœï¼Œä½†è¿™äº›ç»“æœå¯èƒ½ä»ç„¶åŒ…å«ä¸€äº›ç›¸å…³æ€§è¾ƒä½æˆ–å†—ä½™çš„æ–‡æ¡£ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696c85344af649c99d22ec827725ec9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=Cegcsg%2BFo3d0u8ZOGqE0pFsg00Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>é‡æ’åº</strong>ï¼ˆRe-rankingï¼‰æ˜¯æ£€ç´¢åå¤„ç†ä¸­æœ€å¸¸ç”¨çš„æŠ€æœ¯ã€‚å®ƒæ—¨åœ¨å¯¹æ£€ç´¢å™¨è¿”å›çš„åˆæ­¥ç»“æœè¿›è¡ŒäºŒæ¬¡ç­›é€‰å’Œæ’åºã€‚é‡æ’åºé€šå¸¸ä½¿ç”¨<strong>äº¤å‰ç¼–ç å™¨</strong>ï¼ˆCross-Encoderï¼‰æ¨¡å‹ã€‚ä¸ Bi-Encoder ç‹¬ç«‹ç¼–ç æŸ¥è¯¢å’Œæ–‡æ¡£ä¸åŒï¼Œäº¤å‰ç¼–ç å™¨å°†æŸ¥è¯¢å’Œæ–‡æ¡£<strong>æ‹¼æ¥</strong>åœ¨ä¸€èµ·ï¼Œç„¶åå°†æ‹¼æ¥åçš„æ–‡æœ¬è¾“å…¥åˆ°æ¨¡å‹ä¸­ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿæ•æ‰æŸ¥è¯¢å’Œæ–‡æ¡£ä¹‹é—´<strong>ç»†ç²’åº¦çš„äº¤äº’ä¿¡æ¯</strong>ï¼Œä»è€Œåœ¨åˆ¤æ–­ç›¸å…³æ€§æ–¹é¢æ¯” Bi-Encoder æ›´å‡†ç¡®ï¼Œèƒ½å¤Ÿæ˜¾è‘—æé«˜æœ€ç»ˆç­”æ¡ˆçš„è´¨é‡ã€‚ç”±äºäº¤å‰ç¼–ç å™¨çš„è®¡ç®—æˆæœ¬è¾ƒé«˜ï¼Œå®ƒé€šå¸¸åªç”¨äºå¯¹ Bi-Encoder è¿”å›çš„å°‘é‡ï¼ˆå¦‚ Top-50ï¼‰ç»“æœè¿›è¡ŒäºŒæ¬¡æ’åºï¼Œé€‰å‡ºæœ€ç›¸å…³çš„ Top-Nï¼ˆå¦‚ Top-5ï¼‰ä½œä¸º LLM çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>é™¤äº†é‡æ’åºï¼Œç³»ç»Ÿè¿˜éœ€è¦è§£å†³æ£€ç´¢ç»“æœçš„<strong>å†—ä½™æ€§</strong>å’Œ<strong>å¤šæ ·æ€§</strong>é—®é¢˜ã€‚<strong>æœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼ˆMMRï¼‰<strong>æ˜¯ä¸€ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå®ƒåœ¨é€‰æ‹©ä¸‹ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œä¸ä»…è€ƒè™‘æ–‡æ¡£ä¸æŸ¥è¯¢çš„</strong>ç›¸å…³æ€§</strong>ï¼Œè¿˜è€ƒè™‘å…¶ä¸å·²é€‰æ–‡æ¡£çš„<strong>å¤šæ ·æ€§</strong>ã€‚MMR çš„ç›®æ ‡æ˜¯é€‰æ‹©ä¸€ä¸ªæ—¢ç›¸å…³åˆä¸å·²é€‰æ–‡æ¡£ä¸é‡å¤çš„æ–‡æ¡£é›†åˆï¼Œä»è€Œç¡®ä¿æä¾›ç»™ LLM çš„ä¸Šä¸‹æ–‡æ—¢å…¨é¢åˆç²¾ç‚¼ã€‚</p>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.3ã€ æ¨¡å—ååŒä¸è¯„ä¼°ä½“ç³»</h3>
<p>RAG ç³»ç»Ÿçš„å“è¶Šæ€§èƒ½æºäºå…¶å„æ¨¡å—çš„ç´§å¯†ååŒå’ŒæŒç»­çš„è¿­ä»£ä¼˜åŒ–ã€‚åœ¨å¤æ‚çš„ RAG æ¶æ„ä¸­ï¼ŒLLM ä¸ä»…æ˜¯ç”Ÿæˆå™¨ï¼Œè¿˜å¯ä»¥ä½œä¸ºÂ <strong>Agent</strong>Â åè°ƒä¸åŒæ¨¡å—çš„è°ƒç”¨ï¼Œä¾‹å¦‚æ ¹æ®æ£€ç´¢ç»“æœçš„è´¨é‡ï¼Œå†³å®šæ˜¯å¦éœ€è¦è¿›è¡Œ<strong>äºŒæ¬¡æ£€ç´¢</strong>æˆ–è°ƒç”¨å¤–éƒ¨å·¥å…·ã€‚</p>
<p>ä¸€ä¸ªæˆç†Ÿçš„ RAG ç³»ç»Ÿå¿…é¡»åŒ…å«æŒç»­çš„<strong>åé¦ˆå¾ªç¯</strong>ï¼ˆFeedback Loopï¼‰ã€‚åé¦ˆå¯ä»¥æ¥è‡ªç”¨æˆ·ï¼ˆæ˜¾å¼æ»¡æ„åº¦è¯„åˆ†æˆ–éšå¼åç»­æŸ¥è¯¢è¡Œä¸ºï¼‰å’Œç³»ç»Ÿå†…éƒ¨ï¼ˆæ¨¡å‹è¯„ä¼°ï¼‰ã€‚</p>
<p>RAG ç³»ç»Ÿçš„è¯„ä¼°æ˜¯ä¸€ä¸ªå¤šç»´åº¦çš„æŒ‘æˆ˜ï¼Œéœ€è¦åŒæ—¶è¯„ä¼°æ£€ç´¢è´¨é‡å’Œç”Ÿæˆè´¨é‡ã€‚<strong>æ£€ç´¢è´¨é‡</strong>é€šå¸¸é€šè¿‡Â <strong>å¬å›ç‡</strong>ï¼ˆRecallï¼‰ã€<strong>MRR</strong>ï¼ˆMean Reciprocal Rankï¼‰ç­‰æŒ‡æ ‡æ¥è¡¡é‡ï¼›è€Œ<strong>ç”Ÿæˆè´¨é‡</strong>åˆ™éœ€è¦è¯„ä¼°ç­”æ¡ˆçš„<strong>å¿ å®åº¦</strong>ï¼ˆFaithfulnessï¼Œå³ç­”æ¡ˆä¸ä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ï¼‰ã€<strong>ç›¸å…³æ€§</strong>ï¼ˆRelevanceï¼‰å’Œ<strong>æµç•…æ€§</strong>ï¼ˆFluencyï¼‰ã€‚ä¸‹è¡¨æ€»ç»“äº† RAG ç³»ç»Ÿçš„ä¸»è¦è¯„ä¼°ç»´åº¦ï¼š</p>





























<table><thead><tr><th align="left">è¯„ä¼°ç»´åº¦</th><th align="left">æ ¸å¿ƒå…³æ³¨ç‚¹</th><th align="left">å…³é”®æŒ‡æ ‡/æ¡†æ¶</th><th align="left">ä¼˜åŒ–æ–¹å‘</th></tr></thead><tbody><tr><td align="left"><strong>æ£€ç´¢è´¨é‡</strong></td><td align="left">æ‰¾åˆ°æ‰€æœ‰ç›¸å…³æ–‡æ¡£çš„èƒ½åŠ›å’Œæ’åºå‡†ç¡®æ€§ã€‚</td><td align="left">å¬å›ç‡ã€MRRã€NDCG</td><td align="left">åµŒå…¥æ¨¡å‹ã€åˆ†å—ç­–ç•¥ã€ç´¢å¼•å‚æ•°ã€‚</td></tr><tr><td align="left"><strong>ç”Ÿæˆè´¨é‡</strong></td><td align="left">ç­”æ¡ˆä¸ä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ã€ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§ã€‚</td><td align="left">å¿ å®åº¦ã€ç›¸å…³æ€§ã€æµç•…æ€§ï¼ˆRAGASï¼‰</td><td align="left">Prompt å·¥ç¨‹ã€LLM å‚æ•°ã€ä¸Šä¸‹æ–‡ç²¾ç‚¼ã€‚</td></tr><tr><td align="left"><strong>ç«¯åˆ°ç«¯æ€§èƒ½</strong></td><td align="left">ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æ•ˆç‡å’Œç»æµæ€§ã€‚</td><td align="left">å»¶è¿Ÿï¼ˆLatencyï¼‰ã€ååé‡ï¼ˆQPSï¼‰ã€æˆæœ¬</td><td align="left">ANN ç®—æ³•ã€ç¡¬ä»¶èµ„æºã€ç¼“å­˜ç­–ç•¥ã€‚</td></tr></tbody></table>
<p><strong>RAGAS</strong>ï¼ˆRetrieval-Augmented Generation Assessmentï¼‰ç­‰è¯„ä¼°æ¡†æ¶çš„å‡ºç°ï¼Œåˆ©ç”¨ LLM è‡ªèº«çš„èƒ½åŠ›æ¥è¯„ä¼° RAG ç³»ç»Ÿçš„å¿ å®åº¦å’Œä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼Œä¸º RAG ç³»ç»Ÿçš„è¿­ä»£ä¼˜åŒ–æä¾›äº†é‡åŒ–å·¥å…·ã€‚é€šè¿‡è¿™ç§æŒç»­çš„è¯„ä¼°å’Œä¼˜åŒ–ï¼ŒRAG ç³»ç»Ÿèƒ½å¤Ÿä¸æ–­å­¦ä¹ å’Œé€‚åº”æ–°çš„æ•°æ®å’Œç”¨æˆ·éœ€æ±‚ï¼Œä»è€Œæä¾›è¶Šæ¥è¶Šæ™ºèƒ½å’Œå¯é çš„æœåŠ¡ã€‚</p>
<h2 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››ã€ æ€»ç»“</h2>
<p>RAG æŠ€æœ¯é€šè¿‡å°† LLM çš„å¼ºå¤§ç”Ÿæˆèƒ½åŠ›ä¸å¤–éƒ¨çŸ¥è¯†åº“çš„å®æ—¶æ€§ã€å‡†ç¡®æ€§ç›¸ç»“åˆï¼Œä¸ºæ„å»ºå¯é ã€å¯ä¿¡èµ–çš„ AI åº”ç”¨æä¾›äº†å¼ºå¤§çš„æŠ€æœ¯æ¡†æ¶ã€‚å®ƒä»£è¡¨äº† LLM ä»â€œçŸ¥è¯†é»‘ç®±â€èµ°å‘â€œçŸ¥è¯†é€æ˜â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>RAG çš„æœªæ¥å°†èšç„¦äºÂ <strong>å¤šæ¨¡æ€ RAG</strong>ï¼ˆå¤„ç†æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ï¼‰ã€<strong>å¤šè·³æ¨ç†</strong>å’ŒÂ <strong>LLM Agent ååŒ</strong>ï¼Œä»¥åº”å¯¹æ›´å¤æ‚çš„ç°å®ä¸–ç•ŒæŒ‘æˆ˜ã€‚</p>
<p>æœ¬æ–‡æ·±å…¥è§£æäº† RAG çš„å·¥ä½œæµç¨‹ä¸æ ¸å¿ƒç»„ä»¶ï¼Œä½†ä»åŸç†åˆ°å·¥ç¨‹åŒ–è½åœ°ï¼Œä»æœ‰è®¸å¤šå®æˆ˜ç»†èŠ‚éœ€è¦æŒæ¡ï¼Œä¾‹å¦‚å¦‚ä½•é«˜æ•ˆéƒ¨ç½² RAGFlowã€å¦‚ä½•ä½¿ç”¨ RAGAS è¿›è¡Œé‡åŒ–è¯„ä¼°ï¼Œä»¥åŠå¦‚ä½•é’ˆå¯¹ç‰¹å®šè¡Œä¸šè¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©æ‚¨ç³»ç»ŸåŒ–åœ°æŒæ¡è¿™äº›è¿›é˜¶èƒ½åŠ›ï¼ŒAIå¤§å­¦å ‚åŸºäºå¤§é‡çš„ä¸šåŠ¡å®æˆ˜ç»éªŒï¼Œç²¾å¿ƒæ‰“ç£¨äº†Â <strong>RAGå·¥ç¨‹å¸ˆè®¤è¯</strong>Â è¯¾ç¨‹ã€‚è¿™ä»½è®¤è¯è¦†ç›–äº†ä»åŸºç¡€æ¦‚å¿µã€æ ¸å¿ƒç»„ä»¶ã€é«˜çº§ä¼˜åŒ–åˆ°å·¥ç¨‹åŒ–å®æˆ˜çš„å…¨é“¾è·¯çŸ¥è¯†ä½“ç³»ï¼Œæ—¨åœ¨åŠ©æ‚¨æ‰“ç ´ç†è®ºä¸è½åœ°çš„å£å’ï¼Œå°†çŸ¥è¯†çœŸæ­£å†…åŒ–ä¸ºèŒåœºç«äº‰åŠ›ã€‚</p>
<p><strong>é™æ—¶å…è´¹</strong>è®¤è¯ç°å·²å¼€å¯ï¼Œç«‹å³ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ï¼Œå¼€å¯æ‚¨çš„ RAG è¿›é˜¶å­¦ä¹ ä¹‹æ—…ï¼š</p>
<p>ğŸ”—Â <strong>è®¤è¯é“¾æ¥ï¼š</strong><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidaxue.com%2Fcourse%2F1151%3Fvideo_id%3D5093%26ch%3DCSDNRAG2" target="_blank" title="https://www.aidaxue.com/course/1151?video_id=5093&amp;ch=CSDNRAG2" ref="nofollow noopener noreferrer">www.aidaxue.com/course/1151â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ee8a2b2e824b7cb81961b1be140502~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025567&amp;x-signature=%2FLJbAfKe1DrPxkFJyms6WJiWm1g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude-Memï¼šç»™ AI ç¼–ç¨‹åŠ©æ‰‹è£…ä¸Š"é•¿æœŸè®°å¿†"]]></title>    <link>https://juejin.cn/post/7599155566297808939</link>    <guid>https://juejin.cn/post/7599155566297808939</guid>    <pubDate>2026-01-26T08:51:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599155566297808939" data-draft-id="7599155566297514027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude-Memï¼šç»™ AI ç¼–ç¨‹åŠ©æ‰‹è£…ä¸Š&quot;é•¿æœŸè®°å¿†&quot;"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-26T08:51:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘æ ˆå¼€æºæ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3643150216729880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude-Memï¼šç»™ AI ç¼–ç¨‹åŠ©æ‰‹è£…ä¸Š"é•¿æœŸè®°å¿†"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3643150216729880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘æ ˆå¼€æºæ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T08:51:37.000Z" title="Mon Jan 26 2026 08:51:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæ˜¨å¤©ç”¨ Claude Code å†™äº†ä¸€æ®µå¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œä»Šå¤©é‡æ–°æ‰“å¼€é¡¹ç›®ï¼ŒAI åŠ©æ‰‹å´åƒå¤±å¿†äº†ä¸€æ ·ï¼Œå®Œå…¨ä¸è®°å¾—ä½ ä»¬è®¨è®ºè¿‡ä»€ä¹ˆï¼Œåªèƒ½ä»å¤´å†è§£é‡Šä¸€éï¼Ÿ</p>
<p>è¿™ä¸ªç—›ç‚¹ï¼ŒClaude-Mem ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆâ€”â€”ä¸€ä¸ªä¸“ä¸º Claude Code æ‰“é€ çš„æŒä¹…åŒ–è®°å¿†ç³»ç»Ÿï¼Œè®© AI åŠ©æ‰‹çœŸæ­£è®°ä½ä½ ä»¬çš„æ¯ä¸€æ¬¡åä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf965d410a0a40c38f4f21097ea6dbc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5qCI5byA5rqQ5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022300&amp;x-signature=uuUCGV1ba7u84Y268Jjia92gouw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">å®ƒåˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2>
<p>ä¼ ç»Ÿçš„ AI ç¼–ç¨‹åŠ©æ‰‹æ¯æ¬¡å¯åŠ¨éƒ½æ˜¯"å…¨æ–°çš„å¤§è„‘"ï¼Œæ— æ³•è·¨ä¼šè¯ä¿ç•™é¡¹ç›®ä¸Šä¸‹æ–‡ã€‚Claude-Mem é€šè¿‡è‡ªåŠ¨æ•è·ã€AI å‹ç¼©ã€æ™ºèƒ½æ£€ç´¢ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li>âœ…Â <strong>è·¨ä¼šè¯è®°å¿†ä¿æŒ</strong>ï¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰å·¥å…·è°ƒç”¨å’Œä»£ç æ“ä½œ</li>
<li>âœ…Â <strong>æ™ºèƒ½å†…å®¹å‹ç¼©</strong>ï¼šç”¨ Claude Agent SDK å°†å†—é•¿å¯¹è¯å‹ç¼©æˆç²¾ç‚¼æ‘˜è¦</li>
<li>âœ…Â <strong>æŒ‰éœ€ç²¾å‡†æ£€ç´¢</strong>ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢å†å²è®°å¿†ï¼Œå¤§å¹…èŠ‚çœ Token æˆæœ¬</li>
</ul>
<hr/>
<h2 data-id="heading-2">æŠ€æœ¯æ¶æ„è§£æ</h2>
<h3 data-id="heading-3">æ ¸å¿ƒç»„ä»¶æ„æˆ</h3>
<pre><code class="hljs language-swift" lang="swift">ç³»ç»Ÿæ¶æ„ï¼š
<span class="hljs-operator">â”œâ”€â”€</span> é’©å­ç³»ç»Ÿï¼ˆ<span class="hljs-number">7</span> ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼‰
<span class="hljs-operator">â”œâ”€â”€</span> <span class="hljs-type">Worker</span> æœåŠ¡ï¼ˆ<span class="hljs-type">HTTP</span> <span class="hljs-type">API</span> <span class="hljs-operator">+</span> <span class="hljs-type">Web</span> <span class="hljs-type">UIï¼‰</span>
<span class="hljs-operator">â”œâ”€â”€</span> å­˜å‚¨å±‚ï¼ˆ<span class="hljs-type">SQLite</span> <span class="hljs-type">FTS5</span> <span class="hljs-operator">+</span> <span class="hljs-type">Chroma</span> å‘é‡åº“ï¼‰
<span class="hljs-operator">â””â”€â”€</span> <span class="hljs-type">PM2</span> è¿›ç¨‹ç®¡ç†
</code></pre>
<p><strong>ä¸»è¦æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li><strong>Node.js + TypeScript</strong>ï¼šæ’ä»¶ä¸»ä½“å®ç°</li>
<li><strong>SQLite FTS5</strong>ï¼šå…¨æ–‡æ£€ç´¢å¼•æ“</li>
<li><strong>Chroma Vector DB</strong>ï¼šè¯­ä¹‰å‘é‡æœç´¢</li>
<li><strong>Claude Agent SDK</strong>ï¼šAI å‹ç¼©æ ¸å¿ƒèƒ½åŠ›</li>
</ul>
<hr/>
<h2 data-id="heading-4">å·¥ä½œåŸç†æ‹†è§£</h2>
<h3 data-id="heading-5">äº”å¤§ç”Ÿå‘½å‘¨æœŸé’©å­</h3>
<p>Claude-Mem é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œåœ¨ä¸å¹²æ‰°ä¸»ä¼šè¯çš„å‰æä¸‹ï¼Œé€šè¿‡é’©å­æ•è·å…³é”®äº‹ä»¶ï¼š</p>



































<table><thead><tr><th>é’©å­åç§°</th><th>è§¦å‘æ—¶æœº</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>context-hook</td><td>ä¼šè¯å¯åŠ¨æ—¶</td><td>æ³¨å…¥æœ€è¿‘è®°å¿†ä½œä¸ºä¸Šä¸‹æ–‡</td></tr><tr><td>new-hook</td><td>ç”¨æˆ·æé—®æ—¶</td><td>åˆ›å»ºæ–°ä¼šè¯å¹¶ä¿å­˜æç¤ºè¯</td></tr><tr><td>save-hook</td><td>å·¥å…·æ‰§è¡Œå</td><td>æ•è·æ–‡ä»¶è¯»å†™ç­‰æ“ä½œè®°å½•</td></tr><tr><td>summary-hook</td><td>ä¼šè¯ç»“æŸæ—¶</td><td>ç”Ÿæˆ AI æ‘˜è¦å¹¶æŒä¹…åŒ–å­˜å‚¨</td></tr><tr><td>cleanup-hook</td><td>åœæ­¢æŒ‡ä»¤æ—¶</td><td>æ¸…ç†ä¸´æ—¶æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-6">æ¸è¿›å¼æŠ«éœ²ç­–ç•¥</h3>
<p>è¿™æ˜¯ Claude-Mem æœ€å·§å¦™çš„è®¾è®¡â€”â€”ä¸æ˜¯ä¸€è‚¡è„‘æŠŠæ‰€æœ‰å†å²è®°å½•å¡ç»™ AIï¼Œè€Œæ˜¯åˆ†å±‚å±•ç¤ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Level 1:</span> <span class="hljs-string">æœ€è¿‘</span> <span class="hljs-number">3</span> <span class="hljs-string">æ¡ä¼šè¯æ‘˜è¦ï¼ˆçº¦</span> <span class="hljs-number">500</span> <span class="hljs-string">tokensï¼‰</span>
<span class="hljs-attr">Level 2:</span> <span class="hljs-string">ç›¸å…³è§‚å¯Ÿè®°å½•ï¼ˆç”¨æˆ·ä¸»åŠ¨æŸ¥è¯¢ï¼‰</span>
<span class="hljs-attr">Level 3:</span> <span class="hljs-string">å®Œæ•´å†å²æ£€ç´¢ï¼ˆmem-search</span> <span class="hljs-string">æŠ€èƒ½ï¼‰</span>
</code></pre>
<p>è¿™ç§ç­–ç•¥å€Ÿé‰´äº†å‰ç«¯å¼€å‘ä¸­çš„æ‡’åŠ è½½æ€æƒ³ï¼Œåœ¨äº‘æ ˆç¤¾åŒºçš„æŠ€æœ¯å®è·µä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸å¼ºè°ƒ"æŒ‰éœ€åŠ è½½"çš„æ€§èƒ½ä¼˜åŒ–åŸåˆ™ã€‚</p>
<hr/>
<h2 data-id="heading-7">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-8">åœºæ™¯ä¸€ï¼šBug ä¿®å¤è¿½æº¯</h3>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼š"ä¸Šå‘¨ä¿®å¤çš„ç™»å½•è¶…æ—¶é—®é¢˜ï¼Œå…·ä½“æ”¹äº†å“ªäº›æ–‡ä»¶ï¼Ÿ"
Claudeï¼š[è‡ªåŠ¨è§¦å‘ mem<span class="hljs-operator">-</span><span class="hljs-keyword">search</span>]
Â  Â  Â  Â â†’ æ£€ç´¢åˆ° <span class="hljs-number">2</span> æ¡ç›¸å…³è§‚å¯Ÿè®°å½•
Â  Â  Â  Â â†’ è¿”å›ï¼šä¿®æ”¹äº† auth.ts å’Œ session.middleware.ts
</code></pre>
<h3 data-id="heading-9">åœºæ™¯äºŒï¼šé¡¹ç›®çŸ¥è¯†åº“æ„å»º</h3>
<p>é•¿æœŸä½¿ç”¨åï¼ŒClaude-Mem ä¼šè‡ªåŠ¨æ„å»ºé¡¹ç›®çš„"çŸ¥è¯†å›¾è°±"ï¼š</p>
<ul>
<li>æ¶æ„å†³ç­–è®°å½•</li>
<li>å¸¸ç”¨ä»£ç æ¨¡å¼</li>
<li>è¸©è¿‡çš„å‘å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-10">åœºæ™¯ä¸‰ï¼šå›¢é˜Ÿåä½œå¯è§†åŒ–</h3>
<p>é€šè¿‡ Web UIï¼ˆlocalhost:37777ï¼‰å¯ä»¥å®æ—¶æŸ¥çœ‹ï¼š</p>
<ul>
<li>è®°å¿†æµåŠ¨æ€</li>
<li>ä¼šè¯æ‘˜è¦æ—¶é—´çº¿</li>
<li>Token æ¶ˆè€—ç»Ÿè®¡</li>
</ul>
<hr/>
<h2 data-id="heading-11">å¿«é€Ÿä¸Šæ‰‹æŒ‡å—</h2>
<h3 data-id="heading-12">å®‰è£…æ­¥éª¤ï¼ˆ3 æ­¥å®Œæˆï¼‰</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åœ¨ Claude Code ç»ˆç«¯æ‰§è¡Œ</span>
<span class="hljs-meta prompt_">&gt; </span><span class="bash">/plugin marketplace add thedotmack/claude-mem</span>
<span class="hljs-meta prompt_">&gt; </span><span class="bash">/plugin install claude-mem</span>
<span class="hljs-meta prompt_"># </span><span class="bash">é‡å¯ Claude Code å³å¯ä½¿ç”¨</span>
</code></pre>
<h3 data-id="heading-13">æ ¸å¿ƒæŠ€èƒ½ä½¿ç”¨</h3>
<p><strong>mem-search æŠ€èƒ½</strong>ï¼šè‡ªç„¶è¯­è¨€æŸ¥è¯¢å†å²è®°å¿†</p>
<pre><code class="hljs language-sql" lang="sql">ç¤ºä¾‹ï¼šmem<span class="hljs-operator">-</span><span class="hljs-keyword">search</span>Â "å…³äºæ•°æ®åº“è¿ç§»çš„è®¨è®º"
æ•ˆæœï¼šç›¸æ¯”ä¼ ç»Ÿ MCP æ–¹å¼èŠ‚çœçº¦ <span class="hljs-number">2</span>,<span class="hljs-number">250</span> tokens
</code></pre>
<hr/>
<h2 data-id="heading-14">æ¶æ„è®¾è®¡äº®ç‚¹</h2>
<h3 data-id="heading-15">æ··åˆæ£€ç´¢ç­–ç•¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç»“åˆä¼ ç»Ÿå…¨æ–‡æ£€ç´¢å’Œç°ä»£å‘é‡æœç´¢</span>
<span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">SearchStrategy</span> {
Â  fullText: SQLite FTS5, Â  Â Â <span class="hljs-comment">// å…³é”®è¯ç²¾å‡†åŒ¹é…</span>
Â  semantic: Chroma Vector, Â Â <span class="hljs-comment">// è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—</span>
Â  hybrid: RRF èåˆæ’åº Â  Â  Â Â <span class="hljs-comment">// æœ€ä½³ç»“æœè¾“å‡º</span>
}
</code></pre>
<h3 data-id="heading-16">éšç§æ§åˆ¶æœºåˆ¶</h3>
<p>ä½¿ç”¨Â <code>&lt;private&gt;</code>Â æ ‡ç­¾æ’é™¤æ•æ„Ÿå†…å®¹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">&lt;<span class="hljs-keyword">private</span>&gt;
API_KEY=sk-xxx Â <span class="hljs-comment"># ä¸ä¼šè¢«ç³»ç»Ÿè®°å½•</span>
&lt;/<span class="hljs-keyword">private</span>&gt;
</code></pre>
<h3 data-id="heading-17">åŒæ ‡ç­¾ç³»ç»Ÿï¼ˆv7.0 æ–°ç‰¹æ€§ï¼‰</h3>
<ul>
<li><code>&lt;private&gt;</code>ï¼šå®Œå…¨æ’é™¤è§‚å¯Ÿè®°å½•</li>
<li><code>&lt;no-summary&gt;</code>ï¼šè®°å½•ä½†ä¸ç”Ÿæˆæ‘˜è¦</li>
</ul>
<hr/>
<h2 data-id="heading-18">æ€§èƒ½è¡¨ç°æ•°æ®</h2>





















<table><thead><tr><th>ä¼˜åŒ–æŒ‡æ ‡</th><th>å®é™…æ•ˆæœ</th></tr></thead><tbody><tr><td>Token èŠ‚çœ</td><td>æ¯æ¬¡å¯åŠ¨èŠ‚çœ 2,250 tokens</td></tr><tr><td>æŸ¥è¯¢å“åº”é€Ÿåº¦</td><td>å‘é‡æ£€ç´¢ &lt; 50ms</td></tr><tr><td>å­˜å‚¨å‹ç¼©æ•ˆç‡</td><td>10GB ä»£ç åº“å‹ç¼©è‡³çº¦ 200MB</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">å·¥ç¨‹å®è·µå¯ç¤º</h2>
<p>ä½œä¸ºå…¨æ ˆå·¥ç¨‹å¸ˆï¼ŒClaude-Mem å±•ç¤ºäº†å‡ ä¸ªå€¼å¾—å­¦ä¹ çš„å·¥ç¨‹å®è·µï¼š</p>
<ol>
<li><strong>æ’ä»¶åŒ–è®¾è®¡</strong>ï¼šæ ‡å‡†çš„ç”Ÿå‘½å‘¨æœŸé’©å­ç³»ç»Ÿ</li>
<li><strong>AI å·¥ç¨‹åŒ–</strong>ï¼šå°† LLM èƒ½åŠ›å°è£…ä¸ºå¯å¤ç”¨æœåŠ¡</li>
<li><strong>æˆæœ¬æ„è¯†</strong>ï¼šToken ä¼˜åŒ–æ˜¯ AI åŸç”Ÿåº”ç”¨çš„æ ¸å¿ƒæŒ‡æ ‡</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šæ¸è¿›å¼æŠ«éœ²é…åˆå¯è§†åŒ– UI</li>
</ol>
<p>å¯¹äºæƒ³æ·±å…¥å­¦ä¹ Â Node.js å¼€å‘å’ŒÂ äººå·¥æ™ºèƒ½åº”ç”¨çš„æœ‹å‹ï¼Œè¿™ä¸ªé¡¹ç›®æä¾›äº†å¾ˆå¥½çš„å‚è€ƒèŒƒä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-20">å†™åœ¨æœ€å</h2>
<p>Claude-Mem ä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ AI è¾…åŠ©ç¼–ç¨‹çš„èŒƒå¼æ¢ç´¢ï¼šå¦‚ä½•è®© AI ä»"ä¸€æ¬¡æ€§å¯¹è¯"è¿›åŒ–ä¸º"é•¿æœŸåä½œä¼™ä¼´"ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Claude Codeï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ’ä»¶ï¼Œè®©ä½ çš„ AI åŠ©æ‰‹çœŸæ­£"è®°ä½"ä½ ä»¬çš„æ¯ä¸€æ¬¡åä½œã€‚æ›´å¤šä¼˜è´¨å¼€æºé¡¹ç›®è§£æï¼Œæ¬¢è¿å…³æ³¨ã€Šäº‘æ ˆå¼€æºæ—¥è®°ã€‹ï¼</p>
<hr/>
<h3 data-id="heading-21">é¡¹ç›®èµ„æº</h3>
<ul>
<li><strong>GitHub ä»“åº“</strong>ï¼š<code>thedotmack/claude-mem</code></li>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<code>docs.claudemem.com</code></li>
<li><strong>AI å­¦ä¹ </strong>ï¼š<code>https://yunpan.plus/f/29</code></li>
<li><strong>TypeScript å­¦ä¹ </strong>ï¼š<code>https://yunpan.plus/f/18</code></li>
</ul>
<hr/>
<p>æ ‡ç­¾ï¼š#Claude #GitHub #AIç¼–ç¨‹åŠ©æ‰‹ #å‘é‡æ•°æ®åº“ #TypeScript #æŒä¹…åŒ–å­˜å‚¨ #å¼€å‘å·¥å…·</p>
<p>åŸæ–‡ <code>https://yunpan.plus/t/1920-1-1</code> ç‰ˆæƒæ‰€æœ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€»ç»“2025å±•æœ›2026]]></title>    <link>https://juejin.cn/post/7599101854645075978</link>    <guid>https://juejin.cn/post/7599101854645075978</guid>    <pubDate>2026-01-26T06:33:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599101854645075978" data-draft-id="7599268297222995978" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€»ç»“2025å±•æœ›2026"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,åˆ›ä¸š"/> <meta itemprop="datePublished" content="2026-01-26T06:33:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€Ÿæ­ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/3292413843745596"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€»ç»“2025å±•æœ›2026
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3292413843745596/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€Ÿæ­ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T06:33:36.000Z" title="Mon Jan 26 2026 06:33:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¦è¯´2025å·²ç»ç»“æŸäº†ï¼Œç°åœ¨å·²ç»è¿›å…¥åˆ°2026äº†ï¼Œé˜³å†çš„å¹´å·²ç»è¿‡å®Œäº†ï¼Œä½†æ˜¯å†œå†çš„å¹´è¿˜æ²¡åˆ°ï¼Œç´¢æ€§åœ¨è¿™ä¸ªé—´éš™ï¼Œå†™ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ã€‚</p>
<p>å…ˆæ¥è¯´è¯´æˆ‘è‡ªå·±å§ï¼Œå»å¹´ç”±äºå¤ªè¿‡æ‹¼å‘½çš„å·¥ä½œï¼Œå¯¼è‡´èº«ä½“å‡ºäº†å„ç§é—®é¢˜ã€‚å…ˆæ˜¯çœ¼ç›ä¸Šçš„ä¼¤å®³ï¼Œå¤§æ¦‚å»å¹´ä¸­æ—¬çš„æ—¶å€™ï¼Œç»å¸¸æ™šä¸Šä¸‹ç­åï¼Œèµ°åœ¨ç¯ç«é€šæ˜çš„è¡—é“ä¸Šï¼Œå´æ„Ÿè§‰ç‰¹åˆ«æš—ï¼Œèµ·åˆä»¥ä¸ºè¿™æ˜¯å¤–ç•Œçš„å› ç´ ï¼Œåé¢æ‰çŸ¥é“ï¼Œæ˜¯æˆ‘çš„è§†åŠ›åˆä¸‹é™äº†ã€‚å†åˆ°åæ¥å¤§ç™½å¤©ï¼Œçœ¼å‰å¼€å§‹å‡ºè¡Œå¾ˆå¤šå°è™«å­ä¸€æ ·çš„é»‘å½±ï¼Œåæ¥æ‰çŸ¥é“ï¼Œè¿™å«é£èšŠç—‡ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯è…°æ¤å’Œè„¾èƒƒï¼Œç”±äºé•¿æœŸä¹…åï¼Œå¯¼è‡´è…°æ¤ä¸Šä¹Ÿå‡ºç°é—®é¢˜ï¼Œä»Šå¹´å¹´åˆï¼Œæœ‰æ¬¡èººåœ¨åºŠä¸Šï¼Œåªæ˜¯ç¿»ä¸ªèº«å¿½ç„¶å°±æ„Ÿè§‰è…¿æŠ½çš„ç‰¹åˆ«ç–¼ï¼Œåˆ°åæ¥èµ°è·¯æ—¶ä¹Ÿç–¼ï¼Œä»è…¿å»¶ä¼¸åˆ°å±è‚¡ï¼Œå±è‚¡ç–¼å®Œè…¿åˆç–¼ã€‚ç”šè‡³æœ‰ä¸€æ¬¡ï¼Œå¼¯è…°æ´—å¤´é‚£ä¹ˆä¼šå„¿åŠŸå¤«ï¼Œéƒ½ä¸èƒ½æ”¯æ’‘ä¸‹æ¥ã€‚åæ¥å»åŒ»é™¢æ£€æŸ¥ï¼Œè¯´æ˜¯å¯èƒ½è…°æ¤é—´ç›˜çªå‡ºå¯¼è‡´çš„ï¼Œä¹Ÿæœ‰äººè¯´å±è‚¡ç–¼æ˜¯å› ä¸ºæ¢¨çŠ¶è‚Œç»¼åˆç—‡ï¼ŒåæœŸè¦è‡ªå·±æ³¨æ„ã€‚è¿˜æœ‰å°±æ˜¯é•¿æœŸä¹Ÿæ–­æ–­ç»­ç»­ï¼Œé¥¥ä¸€é¡¿é¥±ä¸€é¡¿ï¼Œæš´é¥®æš´é£Ÿï¼Œå¯¼è‡´è„¾èƒƒä¸Šä¹Ÿå‡ºäº†é—®é¢˜ï¼Œæœ€ç›´è§‚çš„å°±æ˜¯èˆŒè‹”ä¸Šçš„å˜åŒ–ï¼Œå…ˆæ˜¯åœ°å›¾èˆŒï¼Œåˆ°åé¢è£‚çº¹èˆŒã€‚ç›´åˆ°åé¢åƒé¥­ä¹Ÿç–¼ï¼Œæ‰é‡è§†èµ·æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48dc834f92b415db4f8b6832b938b85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCf5pCt56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770014021&amp;x-signature=uID4B7zWt3TvmMAXxT6cLlZH5IM%3D" alt="" loading="lazy"/></p>
<p>èº«ä½“ä¸Šçš„é—®é¢˜ï¼Œç›¸ä¿¡å¤§å®¶ä»æˆ‘çš„çŠ¶æ€ä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚å„ç§é—®é¢˜ï¼Œè®©æˆ‘ä¸€åº¦äº§ç”Ÿæ€€ç–‘ï¼Œæˆ‘æ‰ä¸‰åï¼Œè¿™å‰¯èº¯å£³ï¼Œåˆ°åº•èƒ½ä¸èƒ½ï¼Œåé¢çš„å°±ä¸æƒ³è¯´äº†ã€‚è¿˜æœ‰å°±æ˜¯å¹´åˆçš„çš„æ—¶å€™ï¼Œæˆ‘åª³å¦‡æ€€å­•äº†ï¼Œå‰æœŸç»å¸¸å»æ£€æŸ¥ã€‚æ‰€ä»¥æ€»ç»“ä¸‹æ¥ï¼Œå‰åŠå¹´ï¼ŒåŸºæœ¬å°±æ˜¯å’ŒåŒ»é™¢åœ¨æ‰“äº¤é“ã€‚</p>
<p>è¯´å®Œä¸å¥½çš„ï¼Œä¹Ÿæœ‰å¥½çš„ã€‚è…°æ¤ä¸Šçš„é—®é¢˜ï¼Œæ£€æŸ¥åè¯´æ˜¯é—®é¢˜ä¸å¤§ï¼Œåªæ˜¯æœ‰çªå‡ºçš„è¿¹è±¡ï¼Œåƒç‚¹è¯å°±å¥½äº†ï¼›è„¾èƒƒä¸Šçš„é—®é¢˜ï¼Œä¹Ÿåªèƒ½æ…¢æ…¢è°ƒç†ï¼Œç°åœ¨ä¹ŸæŒ‰æ—¶åƒé¥­äº†ï¼Œè¾£æ¤’åŸºæœ¬ä¸Šä¹Ÿæˆ’äº†ï¼›è§†åŠ›ä¸Šçš„é—®é¢˜ï¼Œç°åœ¨å·¥ä½œå¼ºåº¦æ²¡ä»¥å‰å¤§äº†ï¼Œæ²¡æœ‰é‚£ä¹ˆä¸“æ³¨äº†ï¼Œçœ¼å‰çš„é»‘å½±ï¼Œä¹ŸåŸºæœ¬æ¶ˆå¤±äº†ã€‚</p>
<p>ä¸ƒæœˆä»½çš„æ—¶å€™ï¼Œåª³å¦‡èƒä½ç¨³å®šäº†ï¼Œä¹Ÿæ»¡ä¸‰ä¸ªæœˆäº†ï¼Œæˆ‘ä¿©è·‘åˆ°å¤§è¥¿åŒ—è½¬äº†ä¸€åœˆï¼Œä»å’¸é˜³å‡ºå‘ï¼Œå…ˆåˆ°é’æµ·è¥¿å®ï¼Œå†åˆ°ç”˜è‚ƒæ•¦ç…Œï¼Œåè¿›å…¥æ–°ç–†ï¼Œç¬¬ä¸€ç«™ä¹Œé²æœ¨é½ï¼Œå®Œäº†åˆå»äº†ä¼ŠçŠï¼Œçœ‹äº†å¤§è‰åŸï¼Œæ‰“å¡äº†èµ›é‡Œæœ¨æ¹–ï¼Œå®Œäº†åˆè·‘å»å—ç–†ï¼Œå»å–€ä»€å¤åŸä½äº†ä¸€æ®µæ—¶é—´ã€‚æ˜å¹´ï¼Œåœ¨å„æ–¹é¢æ¡ä»¶å®Œå–„çš„æƒ…å†µä¸‹ï¼Œå¸Œæœ›æœ‰æœºä¼šèƒ½å¸¦çˆ¶æ¯ï¼Œå¸¦å®¶é‡Œäººå¤šå‡ºå»è½¬ä¸€è½¬å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/104529993006431ea2d172344392fbf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCf5pCt56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770014021&amp;x-signature=dx72XOfeS2g1uyDHYPcNQMkIGyI%3D" alt="" loading="lazy"/></p>
<p>åæœˆä»½çš„æ—¶å€™ï¼Œå¿½ç„¶æƒ³èµ·æ¥è¿˜æœ‰ä¸ªä¹”è¿è¦åŠï¼Œäº‹å®ä¸Šï¼Œä»å»å¹´åº•æˆ¿å­è£…ä¿®å¥½ï¼Œä»Šå¹´æˆ‘ä»¬å°±å·²ç»ä½è¿›æ¥äº†ã€‚æœ‰æ¬¡å’Œæœ‹å‹èŠå¤©ï¼Œè¯´æ˜¯æœ€å¥½å¼„ä¸ªä»ªå¼æ„æ€ä¸‹ï¼Œäºæ˜¯å°±å–Šäº†å®¶äººä¸€èµ·æ¥åº†ç¥ï¼Œæˆ¿å­ä¸å¤§ï¼Œåœ°ç†ä½ç½®ä¹Ÿä¸ç®—å¾ˆå¥½ï¼Œä½†æ€»å½’åœ¨è¿™åŒå¤§çš„åŸå¸‚ï¼Œæœ‰ä¸ªè½è„šç‚¹äº†å§ï¼Œå¯¹åº”äº†é‚£å¥ï¼Œä»æ­¤ï¼Œä¸‡å®¶ç¯ç«ï¼Œæœ‰æˆ‘ä¸€æ ˆã€‚</p>
<p>æèµ·æˆ¿å­ï¼Œå…¶å®è¿™ä¹ˆå¤šå¹´å‡ºæ¥ï¼Œå¤§éƒ¨åˆ†ç§¯è“„ï¼Œéƒ½ç ¸åœ¨äº†æˆ¿å­ä¸Šï¼ŒçœŸé‡‘ç™½é“¶è¿›å»çš„ï¼Œå·²ç»å°ä¸€ç™¾ä¸‡äº†ï¼Œè¿˜ä¸ç®—å‰©ä¸‹çš„ï¼Œæœ‰æ—¶å€™æƒ³æƒ³ï¼Œåˆ°åº•åˆ’ä¸åˆ’å¾—æ¥å‘¢ï¼Ÿä¹Ÿä¸æƒ³é‚£ä¹ˆå¤šäº†ï¼Œæœ‰äº›äº‹åªæœ‰è‡ªå·±ç»å†äº†æ‰çŸ¥é“ï¼Œæœ‰äº›äº‹ä½ ä¹Ÿæ²¡åŠæ³•å»æ”¹å˜ï¼Œé‚£å°±ç¡¬ç€å¤´çš®å¾€å‰èµ°ã€‚å¥½çš„æ˜¯ï¼Œåœ¨å¾ˆå¤šåŒé¾„äººè¿˜è€ƒè™‘è¦ä¸è¦ä¸Šè½¦çš„æ—¶å€™ï¼Œæˆ‘å·²ç»å‡†å¤‡ä¸‹è½¦äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6a65429535c4004acf2d3209cd2155b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCf5pCt56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770014021&amp;x-signature=rBnn8ARPWKFYM3I4oslcSkQ9Myg%3D" alt="" loading="lazy"/></p>
<p>åäºŒæœˆä»½çš„æ—¶å€™ï¼Œæˆ‘åª³å¦‡ç»ˆäºè¦ç”Ÿäº†ï¼Œæ·˜æ°”çš„å®è´æ‹–å ‚äº†ï¼Œåˆ°äº†é¢„äº§æœŸè¿˜æ²¡åŠ¨é™ï¼Œåˆ°åŒ»é™¢ä½äº†å‡ å¤©ï¼Œé¡ºåˆ©ç”Ÿäº§ã€‚åˆ°è¿™é‡Œå…¶å®æƒ³è¯´çš„ï¼Œä¹Ÿæ˜¯ä¸€ç‚¹æ„Ÿè§¦å§ï¼Œä¸€æ–¹é¢æ˜¯é¼“åŠ±ç”Ÿè‚²ï¼Œä½†æ˜¯è¯¥æ”¶çš„ï¼Œä¸€åˆ†æ²¡å°‘ï¼Œæœ‰äº›æµç¨‹ï¼Œæ„Ÿè§‰å·²ç»æˆäº†æ½œè§„åˆ™ï¼Œæœ‰äº›è´¹ç”¨ï¼Œä½ ä¸äº¤æ ¹æœ¬å°±æ²¡æ³•è¿›è¡Œä¸‹å»ï¼Œè¯´éš¾å¬ç‚¹ï¼Œç”šè‡³é˜»ç¢ä½ è¿›è¡Œã€‚è‡ªè´¹çš„ä¸æŠ¥ï¼Œå­©å­çš„ä¸æŠ¥ï¼ŒåºŠä½ä¸æŠ¥ï¼Œä¸ªåˆ«è¯ä¸æŠ¥ï¼Œæœ€ç»ˆç®—ä¸‹æ¥ï¼ŒèŠ±äº†ä¸€ä¸‡å¤šï¼Œå‘Šè¯‰æˆ‘åªèƒ½æŠ¥ä¸€åƒå…­ï¼Œæˆ‘è¯´ä¸ºä»€ä¹ˆè¿™ä¹ˆå°‘ï¼Ÿæ¥ä¸€å¥ï¼Œä½ æ‰äº¤äº†å››ç™¾ï¼Œä¸€åƒå…­ä¸å°‘äº†ï¼Œæˆ‘ä¹Ÿå°±å‘µå‘µäº†ã€‚å½“ç„¶è¿™ä¸ªæ˜¯å±…æ°‘åŒ»ä¿ï¼Œå…¶å®è”æƒ³åˆ°æˆ‘ä»¬è‡ªå·±äº¤çš„èŒå·¥åŒ»ä¿ï¼Œå…»è€ï¼Œæƒ³ä¸€æƒ³ï¼ŒçœŸçš„èƒ½ä¿éšœå—ï¼Ÿå¯¹æœªæ¥çš„äº‹æƒ…ï¼Œæˆ‘æ‰“ä¸ªé—®å·ï¼Ÿ</p>
<p>å…ƒæ—¦çš„æ—¶å€™ï¼Œå»ä¹°äº†ä¸€è¾†æ±½è½¦ï¼Œä¸€ç›´åœ¨çœ‹è½¦ï¼Œç”·ç”Ÿä¹Ÿéƒ½å–œæ¬¢è½¦ï¼Œä½†ä¹Ÿä¸€ç›´æ²¡ä¹°è½¦ï¼ŒåŸå› æ˜¯å®¶é‡Œæœ‰è½¦ï¼Œå¯ä»¥ç”¨ï¼Œå†å°±æ˜¯è‡ªå·±ä¹Ÿä¸æ€ä¹ˆç”¨è½¦ï¼Œä¸Šä¸‹ç­ååœ°é“å¯èƒ½è¿˜æ›´æ–¹ä¾¿ï¼Œä¹°äº†æ”¾é‚£å°±æ˜¯ä¸ªæ¶ˆè€—å“ï¼Œæ¯å¹´çš„ä¿é™©ä¿å…»æ²¹è´¹åœè½¦è´¹ï¼Œéƒ½æ˜¯æ”¯å‡ºã€‚ä½†ç°åœ¨æƒ…å†µä¸ä¸€æ ·äº†ï¼Œä¸€æ˜¯æœ‰äº†å­©å­ï¼Œåé¢å‡ºè¡Œçš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œè¿˜æœ‰å°±æ˜¯å®¶é‡Œçš„è½¦ï¼Œæœ‰æ—¶å€™ä¹Ÿè¦ç”¨ã€‚æ‰€ä»¥å°±å»ä¹°äº†ä¸€è¾†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/348c7e18ecdf47f7b85e22ae4757ffb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCf5pCt56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770014021&amp;x-signature=iuQs%2FFlfpGtykzylQpe28NZDSqw%3D" alt="" loading="lazy"/></p>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ€»ç»“ä¸€ä¸‹å§ã€‚æˆ‘è®¤ä¸ºçš„äººç”Ÿäº”å¤§ä»¶ï¼šæˆ¿å­ï¼Œè½¦å­ï¼Œç¥¨å­ï¼Œå¦»å­ï¼Œå­©å­ã€‚ç°åœ¨å°±å·®ç¥¨å­äº†ã€‚ç¥¨å­å¯ä»¥è¿½æ±‚ï¼Œä½†æ˜¯ä¸èƒ½ä¸€å‘³çš„è¿½æ±‚ï¼Œè¿™æ ·ä¼šå¤±å»ç”Ÿæ´»çš„æœ¬è´¨ï¼Œå¤±å»æ¥è¿™ä¸ªä¸–ä¸Šçš„æ„ä¹‰ã€‚åˆ°è¿™é‡Œï¼Œèƒ½çœ‹åˆ°çš„ï¼Œèƒ½çœ‹å®Œçš„ï¼Œéƒ½æ˜¯æœ‰ç¼˜äººï¼›åœ¨è¿™é‡Œï¼Œç¥ä½ ä»¬ï¼šèº«ä½“å¥åº· å¿ƒæƒ…å¿«ä¹ å®¶åº­å’Œç¦ äº‹ä¸šæœ‰æˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ä¸­ä¸å¯å˜ç±»å‹ï¼ˆæ•´æ•°ï¼‰å’Œå¯å˜ç±»å‹ï¼ˆåˆ—è¡¨ï¼‰çš„å‚æ•°ä¼ é€’è§„åˆ™çš„ç†è§£]]></title>    <link>https://juejin.cn/post/7599220371665633320</link>    <guid>https://juejin.cn/post/7599220371665633320</guid>    <pubDate>2026-01-26T07:59:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599220371665633320" data-draft-id="7598112768147111942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ä¸­ä¸å¯å˜ç±»å‹ï¼ˆæ•´æ•°ï¼‰å’Œå¯å˜ç±»å‹ï¼ˆåˆ—è¡¨ï¼‰çš„å‚æ•°ä¼ é€’è§„åˆ™çš„ç†è§£"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-26T07:59:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒ„å­å¥½å¥½åƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2613977076215035"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ä¸­ä¸å¯å˜ç±»å‹ï¼ˆæ•´æ•°ï¼‰å’Œå¯å˜ç±»å‹ï¼ˆåˆ—è¡¨ï¼‰çš„å‚æ•°ä¼ é€’è§„åˆ™çš„ç†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2613977076215035/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒ„å­å¥½å¥½åƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T07:59:06.000Z" title="Mon Jan 26 2026 07:59:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åˆ·äºŒå‰æ ‘çš„é—®é¢˜ ç”¨äº†å¾ˆå¤šé€’å½’ é‚£ä¹ˆæˆ‘å°±å‘ç°äº†ä¸€ä¸ªé—®é¢˜  å¯¹äºåœ¨é€’å½’ä¸­æ•°ç»„å‘ç”Ÿæ”¹å˜çš„å‡½æ•°  æˆ‘ä»¬é€šå¸¸è¦è¿›è¡Œä¸€æ¬¡å›æº¯  è€Œå¯¹äºåœ¨é€’å½’ä¸­æ•´æ•° ä¹Ÿå°±æ˜¯æ•´å‹å˜é‡å‘ç”Ÿæ”¹å˜çš„å‡½æ•°ä¸­å´ä¸éœ€è¦    æˆ‘æ„Ÿè§‰æ˜¯æœ‰æ‰€ä¸åŒçš„  ä½†æ˜¯ä¸ºäº†ç¡®å®šæˆ‘å¿ƒä¸­çš„æƒ³æ³•è¿›è¡Œäº†ä¸€ç³»åˆ—èµ„æ–™çš„æŸ¥è¯¢  æœ€ç»ˆå¾—å‡ºäº†æƒ³è¦çš„ç­”æ¡ˆ</p>
<h5 data-id="heading-0">é—®é¢˜æ¥æº</h5>
<p>è®©æˆ‘äº§ç”Ÿé—®é¢˜çš„åˆ†åˆ«æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpath-sum%2Fsubmissions%2F693436967%2F" target="_blank" title="https://leetcode.cn/problems/path-sum/submissions/693436967/" ref="nofollow noopener noreferrer">112. è·¯å¾„æ€»å’Œ </a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-bottom-left-tree-value%2Fdescription%2F" target="_blank" title="https://leetcode.cn/problems/find-bottom-left-tree-value/description/" ref="nofollow noopener noreferrer">513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ </a>ä»¥åŠ<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fbinary-tree-paths%2F" target="_blank" title="https://leetcode.cn/problems/binary-tree-paths/" ref="nofollow noopener noreferrer">257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ </a></p>
<pre><code class="hljs language-py" lang="py">è·¯å¾„æ€»å’Œ
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rest</span>(<span class="hljs-params">self,node,summ</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
            <span class="hljs-keyword">return</span>
        summ=summ-node.val
        <span class="hljs-keyword">if</span> summ==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> node.left <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> node.right):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        left=self.rest(node.left,summ)
        <span class="hljs-keyword">if</span> left==<span class="hljs-literal">True</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        right=self.rest(node.right,summ)
        <span class="hljs-keyword">if</span> right==<span class="hljs-literal">True</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hasPathSum</span>(<span class="hljs-params">self, root: <span class="hljs-type">Optional</span>[TreeNode], targetSum: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        t=self.rest(root,targetSum)
        <span class="hljs-keyword">return</span> t
</code></pre>
<p>è¿™ä¸ªæ˜¯è·¯å¾„æ€»å’Œï¼Œå˜é‡summæ¯æ¬¡éƒ½æ˜¯åŒä¸€ä¸ªæ²¡æœ‰å›æº¯</p>
<pre><code class="hljs language-py" lang="py">æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findBottomLeftValue</span>(<span class="hljs-params">self, root: <span class="hljs-type">Optional</span>[TreeNode]</span>) -&gt; <span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root.left <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> root.right:
            <span class="hljs-keyword">return</span> root.val
        self.result=[]
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">depth</span>(<span class="hljs-params">node,level</span>):
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
                <span class="hljs-keyword">return</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.result)==level:
                self.result.append([])
            self.result[level].append(node.val)
            depth(node.left,level+<span class="hljs-number">1</span>)
            depth(node.right,level+<span class="hljs-number">1</span>)
        
        depth(root,<span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> self.result[-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]
</code></pre>
<p>è¿™é‡Œçš„levelä¹Ÿæ²¡æœ‰åœ¨åšä»€ä¹ˆæ”¹å˜</p>
<pre><code class="hljs language-py" lang="py">äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">binaryTreePaths</span>(<span class="hljs-params">self, root: <span class="hljs-type">Optional</span>[TreeNode]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">travel</span>(<span class="hljs-params">node,result,Pass</span>):
            Pass.append(node.val)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.left <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> node.right:
                sPass=<span class="hljs-string">"-&gt;"</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,Pass))
                result.append(sPass)
            <span class="hljs-keyword">if</span> node.left:
                travel(node.left,result,Pass)
                Pass.pop()
            <span class="hljs-keyword">if</span> node.right:
                travel(node.right,result,Pass)
                Pass.pop()
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:
            <span class="hljs-keyword">return</span> 
        Pass=[]
        result=[]
        travel(root,result,Pass)
        <span class="hljs-keyword">return</span>(result)
</code></pre>
<p>å…ˆæ‹†è§£ä¸€ä¸‹è¿™ä¸ªå‡½æ•°å§ï¼Œpassæ¯æ¬¡ä¼šå‚¨å­˜èŠ‚ç‚¹ï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹åä¼šåŠ ä¸€ä¸ª-&gt;å˜æˆspass ä¹Ÿå°±æ˜¯ä¸€æ®µè·¯å¾„ ç„¶åä¼ åˆ°ç»“æœresultå½“ä¸­ï¼Œé‚£ä¹ˆåœ¨è¿™æœŸé—´ï¼Œæ¯å¼•ç”¨ä¸€æ¬¡travelå‡½æ•°éƒ½ä¼šè®©passå¢åŠ ä¸€ä¸ªæ•°å­—ï¼Œäºæ˜¯æˆ‘ä»¬è¿›è¡Œäº†ä¸€æ¬¡å›æº¯ ç¡®ä¿åœ¨åŒä¸€å±‚ä¸­passæ˜¯ç›¸åŒçš„</p>
<h2 data-id="heading-1">è§£é‡Šå’Œç†è§£</h2>
<p>åœ¨æŸ¥é˜…èµ„æ–™åæˆ‘å‘ç°äº†é—®é¢˜æ‰€åœ¨ï¼š å¯¹äºæ•´å‹å˜é‡æ¥è¯´  æ¯”å¦‚è°ƒç”¨tï¼Œæ¯æ¬¡è°ƒç”¨téƒ½åªæ˜¯åœ¨å½“å‰å±‚ä¸­å¤åˆ¶ä¸€ä¸ªtçš„å€¼ç„¶åä¼ è¿›å»ï¼Œ<strong>æ¯ä¸ªé€’å½’è°ƒç”¨éƒ½ä¼šåˆ›å»ºç‹¬ç«‹çš„å‡½æ•°æ ˆå¸§ï¼Œæ ˆå¸§é‡Œçš„<code>remain_sum</code>æ˜¯å±€éƒ¨å˜é‡ï¼Œåªåœ¨å½“å‰é€’å½’å±‚çº§æœ‰æ•ˆã€‚å·¦å­æ ‘é‡Œçš„<code>remain_sum</code>ä¿®æ”¹ï¼Œä¸ä¼šå½±å“å½“å‰å±‚ï¼Œæ›´ä¸ä¼šå½±å“ä¼ ç»™å³å­æ ‘çš„<code>remain_sum</code></strong>ã€‚
ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š
å…¶å®ä¹Ÿå°±æ˜¯è¯´æ˜äº†ä¸å¯å˜ç±»å‹çš„ç‰¹ç‚¹ï¼šå°±æ˜¯ä¿®æ”¹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨åŸå¯¹è±¡ä¸Šä¿®æ”¹ï¼Œå¦‚åŒæˆ‘ä»¬t=t-2ä¸€æ ·ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„t-2ï¼Œç„¶åæŠŠä»–èµ‹ç»™äº†ä¸€ä¸ªå˜é‡tï¼Œè€Œå¯¹äºæ•°ç»„æ¥è¯´ï¼Œæˆ‘ä»¬ä¿®æ”¹æ•°ç»„ï¼ˆresult.pop()ï¼‰å°±å¯ä»¥åœ¨åŸæ•°ç»„ä¸Šå‘ç”Ÿï¼Œè€Œä¸éœ€è¦å†é‡æ–°èµ‹å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlinè·¨å¹³å°ç‰ˆæœ¬jiebaåˆ†è¯]]></title>    <link>https://juejin.cn/post/7599485473706442790</link>    <guid>https://juejin.cn/post/7599485473706442790</guid>    <pubDate>2026-01-26T07:42:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599485473706442790" data-draft-id="7599101854645305354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlinè·¨å¹³å°ç‰ˆæœ¬jiebaåˆ†è¯"/> <meta itemprop="keywords" content="Kotlin,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-26T07:42:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½™åŠç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2084329775983815"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlinè·¨å¹³å°ç‰ˆæœ¬jiebaåˆ†è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329775983815/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½™åŠç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T07:42:34.000Z" title="Mon Jan 26 2026 07:42:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">jieba-kmp</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FErolC%2Fjieba-kmp" target="_blank" title="https://github.com/ErolC/jieba-kmp" ref="nofollow noopener noreferrer">jieba-kmp</a>æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffxsjy%2Fjieba" target="_blank" title="https://github.com/fxsjy/jieba" ref="nofollow noopener noreferrer">jiebaä¸­æ–‡åˆ†è¯</a>çš„kotlinå¤šå¹³å°ç‰ˆæœ¬</p>
<p>æä¾›ä¸jiebaåŸºæœ¬ä¸€è‡´çš„åŠŸèƒ½ä¸æ¥å£ï¼Œä½†ä¸æ”¯æŒå…¶paddleæ¨¡å¼ã€‚</p>
<h3 data-id="heading-1">ç‰¹ç‚¹</h3>
<ul>
<li>æ”¯æŒä¸‰ç§åˆ†è¯æ¨¡å¼ï¼š
<ul>
<li>ç²¾ç¡®æ¨¡å¼ï¼Œè¯•å›¾å°†å¥å­æœ€ç²¾ç¡®åœ°åˆ‡å¼€ï¼Œé€‚åˆæ–‡æœ¬åˆ†æï¼›</li>
<li>å…¨æ¨¡å¼ï¼ŒæŠŠå¥å­ä¸­æ‰€æœ‰çš„å¯ä»¥æˆè¯çš„è¯è¯­éƒ½æ‰«æå‡ºæ¥, é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ­§ä¹‰ï¼›</li>
<li>æœç´¢å¼•æ“æ¨¡å¼ï¼Œåœ¨ç²¾ç¡®æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå¯¹é•¿è¯å†æ¬¡åˆ‡åˆ†ï¼Œæé«˜å¬å›ç‡ï¼Œé€‚åˆç”¨äºæœç´¢å¼•æ“åˆ†è¯ã€‚</li>
</ul>
</li>
<li>æ”¯æŒç¹ä½“åˆ†è¯</li>
<li>æ”¯æŒè‡ªå®šä¹‰è¯å…¸</li>
<li>MIT æˆæƒåè®®</li>
</ul>
<h3 data-id="heading-2">æ€§èƒ½</h3>
<p>ä»¥ä¸‹æ€§èƒ½è¡¨ç°ä¸åŒç¡¬ä»¶ä¼šæœ‰æ‰€ä¸åŒï¼Œä»…ä¾›å‚è€ƒ</p>
<h4 data-id="heading-3">åˆå§‹åŒ–</h4>





















<table><thead><tr><th>å¹³å°</th><th>35ä¸‡è¯</th><th>35ä¸‡è¯+ç¼“å­˜</th><th>50ä¸‡è¯</th><th>50ä¸‡è¯+ç¼“å­˜</th><th>è®¾å¤‡</th></tr></thead><tbody><tr><td>android</td><td>1.5ç§’</td><td>1ç§’ï¼ˆé¦–æ¬¡1.9ç§’ï¼‰</td><td>2.1ç§’</td><td>1.0ç§’ï¼ˆé¦–æ¬¡3.1ç§’ï¼‰</td><td>1+Ace5</td></tr></tbody></table>
<h4 data-id="heading-4">åˆ†è¯</h4>

















<table><thead><tr><th>é•¿åº¦</th><th>android</th></tr></thead><tbody><tr><td>1200</td><td>160ms</td></tr><tr><td>6000</td><td>500ms</td></tr></tbody></table>
<h3 data-id="heading-5">å®‰è£…</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">commonMain.dependencies {
    api(<span class="hljs-string">'cn.erolc.jieba:jieba-kmp:1.0.0'</span>)
}
</code></pre>
<p>å¦‚æœåªæ˜¯androidå•ç‹¬ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    api(<span class="hljs-string">'cn.erolc.jieba:jieba-kmp-android:1.0.0'</span>)
}
</code></pre>
<blockquote>
<p>æœ€æ–°ç‰ˆæœ¬è¯·å‰å¾€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FErolC%2Fjieba-kmp" target="_blank" title="https://github.com/ErolC/jieba-kmp" ref="nofollow noopener noreferrer">jieba-kmp</a>æŸ¥çœ‹</p>
</blockquote>
<h3 data-id="heading-6">æ··æ·†è§„åˆ™</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">-keep <span class="hljs-keyword">class</span> <span class="hljs-title class_">cn</span>.<span class="hljs-title">erolc</span>.<span class="hljs-title">jieba</span>.<span class="hljs-title">model</span>.<span class="hljs-title">FreqCache</span> { *; }
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨</h3>
<h4 data-id="heading-8">åˆå§‹åŒ–</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//android</span>
jiebaInit()
<span class="hljs-comment">//other </span>
Jieba.<span class="hljs-keyword">init</span>()
</code></pre>
<p>androidéœ€è¦åœ¨applicationä¸­è¿›è¡Œåˆå§‹åŒ–</p>
<blockquote>
<p>åœ¨ä¸åˆå§‹åŒ–çš„æƒ…å†µä¸‹ä¾æ—§å¯ä»¥ä½¿ç”¨åˆ†è¯åŠŸèƒ½ï¼Œåªæ˜¯åœ¨ç¬¬ä¸€æ¬¡åˆ†è¯æ—¶å†…éƒ¨ä¼šå…ˆè¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡åˆ†è¯è€—æ—¶ä¼šç¨é•¿äº›ã€‚androidå»ºè®®å…ˆåˆå§‹åŒ–</p>
</blockquote>
<h4 data-id="heading-9">åˆ†è¯</h4>
<ul>
<li><code>Jieba.cut</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ¨¡å¼ï¼›</li>
<li><code>Jieba.lcut</code>æ–¹æ³•æ¥æ”¶ä¸<code>Jieba.cut</code>ä¸€è‡´çš„å‚æ•°ï¼›<code>cut</code>è¿”å›å€¼æ˜¯flowï¼Œ<code>lcut</code>è¿”å›å€¼æ˜¯list</li>
<li><code>Jieba.cutForSearch</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚è¯¥æ–¹æ³•é€‚åˆç”¨äºæœç´¢å¼•æ“æ„å»ºå€’æ’ç´¢å¼•çš„åˆ†è¯ï¼Œç²’åº¦æ¯”è¾ƒç»†</li>
<li><code>Jieba.tokenize</code>æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ¨¡å¼ï¼›æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚è¿”å›å€¼ä¼šåŒ…å«è¯çš„ä½ç½®ä¿¡æ¯</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.flow.fold
<span class="hljs-keyword">import</span> kotlinx.coroutines.test.runTest
<span class="hljs-keyword">import</span> kotlin.test.Test
<span class="hljs-keyword">import</span> cn.erolc.jieba.Jieba
<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span> = runTest {
    <span class="hljs-keyword">val</span> seg_list = Jieba.cut(<span class="hljs-string">"æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦"</span>, Mode.Full)
    <span class="hljs-keyword">val</span> value = seg_list.fold(<span class="hljs-string">""</span>) { acc, value -&gt; <span class="hljs-keyword">if</span> (acc.isEmpty()) value <span class="hljs-keyword">else</span> <span class="hljs-string">"<span class="hljs-variable">$acc</span>/<span class="hljs-subst">${value}</span>"</span> }
    println(<span class="hljs-string">"Full mode: <span class="hljs-variable">$value</span>"</span>)
    <span class="hljs-keyword">val</span> seg_list2 = Jieba.cut(<span class="hljs-string">"æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦"</span>, Mode.HMM)
    <span class="hljs-keyword">val</span> value1 = seg_list2.fold(<span class="hljs-string">""</span>) { acc, value -&gt; <span class="hljs-keyword">if</span> (acc.isEmpty()) value <span class="hljs-keyword">else</span> <span class="hljs-string">"<span class="hljs-variable">$acc</span>/<span class="hljs-subst">${value}</span>"</span> }
    println(<span class="hljs-string">"HMM mode: <span class="hljs-variable">$value1</span>"</span>)
    <span class="hljs-keyword">val</span> seg_list3 = Jieba.cut(<span class="hljs-string">"ä»–æ¥åˆ°äº†ç½‘æ˜“æ­ç ”å¤§å¦"</span>)
    <span class="hljs-keyword">val</span> value2 = seg_list3.fold(<span class="hljs-string">""</span>) { acc, value -&gt; <span class="hljs-keyword">if</span> (acc.isEmpty()) value <span class="hljs-keyword">else</span> <span class="hljs-string">"<span class="hljs-variable">$acc</span>/<span class="hljs-subst">${value}</span>"</span> }
    println(<span class="hljs-string">"æ–°è¯è¯†åˆ«: <span class="hljs-variable">$value2</span>"</span>)
    <span class="hljs-keyword">val</span> seg_list4 = Jieba.cutForSearch(<span class="hljs-string">"å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨æ—¥æœ¬äº¬éƒ½å¤§å­¦æ·±é€ "</span>)
    <span class="hljs-keyword">val</span> value3 = seg_list4.fold(<span class="hljs-string">""</span>) { acc, value -&gt; <span class="hljs-keyword">if</span> (acc.isEmpty()) value <span class="hljs-keyword">else</span> <span class="hljs-string">"<span class="hljs-variable">$acc</span>/<span class="hljs-subst">${value}</span>"</span> }
    println(<span class="hljs-string">"Search mode: <span class="hljs-variable">$value3</span>"</span>)
    Jieba.tokenize(<span class="hljs-string">"æ°¸å’Œæœè£…é¥°å“æœ‰é™å…¬å¸"</span>).collect { println(it) }
    Jieba.tokenize(<span class="hljs-string">"æ°¸å’Œæœè£…é¥°å“æœ‰é™å…¬å¸"</span>, <span class="hljs-string">"search"</span>).collect { println(it) }


}
</code></pre>
<h4 data-id="heading-10">è¾“å‡º</h4>
<pre><code class="hljs language-ini" lang="ini">cut(9)ï¼š382.907833ms
Full mode: æˆ‘/æ¥åˆ°/åŒ—äº¬/æ¸…å/æ¸…åå¤§å­¦/åå¤§/å¤§å­¦
cut(9)ï¼š300.5us
HMM mode: æˆ‘/æ¥åˆ°/åŒ—äº¬/æ¸…åå¤§å­¦
cut(10)ï¼š2.267ms
æ–°è¯è¯†åˆ«: ä»–/æ¥åˆ°/äº†/ç½‘æ˜“/æ­ç ”/å¤§å¦   (æ­¤å¤„ï¼Œâ€œæ­ç ”â€å¹¶æ²¡æœ‰åœ¨è¯å…¸ä¸­ï¼Œä½†æ˜¯ä¹Ÿè¢«Viterbiç®—æ³•è¯†åˆ«å‡ºæ¥äº†)
cutForSearch(26):4.532458ms
Search mode: å°æ˜/ç¡•å£«/æ¯•ä¸š/äº/ä¸­å›½/ç§‘å­¦/å­¦é™¢/ç§‘å­¦é™¢/ä¸­å›½ç§‘å­¦é™¢/è®¡ç®—/è®¡ç®—æ‰€/ï¼Œ/å/åœ¨/æ—¥æœ¬/äº¬éƒ½/å¤§å­¦/æ—¥æœ¬äº¬éƒ½å¤§å­¦/æ·±é€ 
//é»˜è®¤æ¨¡å¼
SegToken(<span class="hljs-attr">word</span>=æ°¸å’Œ, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">0</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">2</span>)
SegToken(<span class="hljs-attr">word</span>=æœè£…, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">2</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">4</span>)
SegToken(<span class="hljs-attr">word</span>=é¥°å“, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">4</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">6</span>)
SegToken(<span class="hljs-attr">word</span>=æœ‰é™å…¬å¸, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">6</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">10</span>)
tokenize(10):1.907375ms
//æœç´¢æ¨¡å¼
SegToken(<span class="hljs-attr">word</span>=æ°¸å’Œ, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">0</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">2</span>)
SegToken(<span class="hljs-attr">word</span>=æœè£…, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">2</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">4</span>)
SegToken(<span class="hljs-attr">word</span>=é¥°å“, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">4</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">6</span>)
SegToken(<span class="hljs-attr">word</span>=æœ‰é™, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">6</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">8</span>)
SegToken(<span class="hljs-attr">word</span>=å…¬å¸, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">8</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">10</span>)
SegToken(<span class="hljs-attr">word</span>=æœ‰é™å…¬å¸, start<span class="hljs-literal">Off</span>set=<span class="hljs-number">6</span>, end<span class="hljs-literal">Off</span>set=<span class="hljs-number">10</span>)
tokenize(10):856.959us
</code></pre>
<h3 data-id="heading-11">è°ƒæ•´è¯å…¸</h3>
<p>ä½¿ç”¨ <code>addWord(word, freq=None, tag=None)</code> å’Œ <code>del_word(word)</code> å¯åœ¨ç¨‹åºä¸­åŠ¨æ€ä¿®æ”¹è¯å…¸ã€‚
ä½¿ç”¨ <code>suggestFreq(segment)</code> å¯è°ƒèŠ‚å•ä¸ªè¯è¯­çš„è¯é¢‘ï¼Œä½¿å…¶èƒ½ï¼ˆæˆ–ä¸èƒ½ï¼‰è¢«åˆ†å‡ºæ¥ã€‚</p>
<p>æ³¨æ„ï¼šè‡ªåŠ¨è®¡ç®—çš„è¯é¢‘åœ¨ä½¿ç”¨ HMM æ–°è¯å‘ç°åŠŸèƒ½æ—¶å¯èƒ½æ— æ•ˆã€‚</p>
<h3 data-id="heading-12">è½½å…¥è¯å…¸</h3>
<ul>
<li>å¼€å‘è€…å¯ä»¥æŒ‡å®šè‡ªå·±è‡ªå®šä¹‰çš„è¯å…¸ï¼Œä»¥ä¾¿åŒ…å« jieba è¯åº“é‡Œæ²¡æœ‰çš„è¯ã€‚è™½ç„¶ jieba æœ‰æ–°è¯è¯†åˆ«èƒ½åŠ›ï¼Œä½†æ˜¯è‡ªè¡Œæ·»åŠ æ–°è¯å¯ä»¥ä¿è¯æ›´é«˜çš„æ­£ç¡®ç‡</li>
<li>ç”¨æ³•ï¼š <code>Jieba.init(diskHelper)</code></li>
<li>è¯å…¸æ ¼å¼å’Œ dict.txt ä¸€æ ·ï¼Œä¸€ä¸ªè¯å ä¸€è¡Œï¼›æ¯ä¸€è¡Œåˆ†ä¸‰éƒ¨åˆ†ï¼šè¯è¯­ã€è¯é¢‘ï¼ˆå¯çœç•¥ï¼‰ã€è¯æ€§ï¼ˆå¯çœç•¥ï¼‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œé¡ºåºä¸å¯é¢ å€’ï¼Œåˆ™æ–‡ä»¶å¿…é¡»ä¸º
UTF-8 ç¼–ç ã€‚</li>
<li>è¯é¢‘çœç•¥æ—¶ä½¿ç”¨è‡ªåŠ¨è®¡ç®—çš„èƒ½ä¿è¯åˆ†å‡ºè¯¥è¯çš„è¯é¢‘ã€‚</li>
</ul>
<h3 data-id="heading-13">é‡æ–°è½½å…¥</h3>
<p>å½“åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¿®æ”¹äº†è‡ªå®šä¹‰è¯å…¸ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡<code>Jieba.reload()</code>æ–¹æ³•é‡æ–°è½½å…¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidå­¦ä¹ ç¬”è®°-2-Activityç”Ÿå‘½å‘¨æœŸ&æ•°æ®å­˜å‚¨]]></title>    <link>https://juejin.cn/post/7599237603976577067</link>    <guid>https://juejin.cn/post/7599237603976577067</guid>    <pubDate>2026-01-26T09:49:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599237603976577067" data-draft-id="7599459943918747686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidå­¦ä¹ ç¬”è®°-2-Activityç”Ÿå‘½å‘¨æœŸ&amp;æ•°æ®å­˜å‚¨"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-26T09:49:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼«åº­_"/> <meta itemprop="url" content="https://juejin.cn/user/1126346204126856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidå­¦ä¹ ç¬”è®°-2-Activityç”Ÿå‘½å‘¨æœŸ&amp;æ•°æ®å­˜å‚¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1126346204126856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼«åº­_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:49:12.000Z" title="Mon Jan 26 2026 09:49:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Androidå­¦ä¹ ç¬”è®°ï¼šActivityç”Ÿå‘½å‘¨æœŸ&amp;æ•°æ®å­˜å‚¨</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec9098e4651647eabdd2e8669d5b4272~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5bqtXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770025751&amp;x-signature=2JQvz7xPfiklDXLkpgfapzhuodU%3D" alt="Activityç”Ÿå‘½å‘¨æœŸ&amp;æ•°æ®å­˜å‚¨.png" loading="lazy"/></p>
<h4 data-id="heading-1">1. Activityç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒæ¦‚å¿µ</h4>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå¦‚æ­¤é‡è¦ï¼Ÿ</strong><br/>
å®ƒå†³å®šäº†åº”ç”¨åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„è¡Œä¸ºï¼Œæ˜¯å¤„ç†å†…å­˜ç®¡ç†ã€æ•°æ®ä¿å­˜ã€UIæ›´æ–°çš„å…³é”®ã€‚ç†è§£å®ƒï¼Œä½ å°±èƒ½å†™å‡º<strong>ä¸å´©æºƒã€ä¸ä¸¢å¤±æ•°æ®</strong>çš„Androidåº”ç”¨ã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; Created
    Created --&gt; Started
    Started --&gt; Resumed
    Resumed --&gt; Paused
    Paused --&gt; Stopped
    Stopped --&gt; Destroyed
    Paused --&gt; Resumed
    Stopped --&gt; Started
    Resumed --&gt; Stopped
    Stopped --&gt; Destroyed
    Paused --&gt; Destroyed
</code></pre>
<p><strong>å…³é”®çŠ¶æ€è¯´æ˜</strong>ï¼š</p>















































<table><thead><tr><th>çŠ¶æ€</th><th>è¯´æ˜</th><th>ç”¨æˆ·å¯è§</th><th>ä¸ºä»€ä¹ˆé‡è¦</th></tr></thead><tbody><tr><td><code>Created</code></td><td>Activityåˆ›å»ºå®Œæˆ</td><td>âŒ</td><td>åˆå§‹åŒ–UIã€æ•°æ®</td></tr><tr><td><code>Started</code></td><td>Activityå¯è§ä½†æœªè·å¾—ç„¦ç‚¹</td><td>âœ…</td><td>å‡†å¤‡æ˜¾ç¤ºå†…å®¹</td></tr><tr><td><code>Resumed</code></td><td>Activityè·å¾—ç„¦ç‚¹ï¼Œç”¨æˆ·å¯äº¤äº’</td><td>âœ…</td><td><strong>æ ¸å¿ƒäº¤äº’çŠ¶æ€</strong></td></tr><tr><td><code>Paused</code></td><td>Activityå¤±å»ç„¦ç‚¹ä½†å¯è§ï¼ˆå¦‚å¼¹å‡ºå¯¹è¯æ¡†ï¼‰</td><td>âœ…</td><td>ä¿å­˜å…³é”®æ•°æ®</td></tr><tr><td><code>Stopped</code></td><td>Activityå®Œå…¨ä¸å¯è§ï¼ˆå¦‚è¿›å…¥åå°ï¼‰</td><td>âŒ</td><td>é‡Šæ”¾éå…³é”®èµ„æº</td></tr><tr><td><code>Destroyed</code></td><td>Activityè¢«é”€æ¯</td><td>âŒ</td><td>é‡Šæ”¾æ‰€æœ‰èµ„æº</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®æ´å¯Ÿ</strong>ï¼š<br/>
<strong>ç”¨æˆ·ä¸ä¼šç­‰å¾…åº”ç”¨å®Œæˆç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œå¿…é¡»åœ¨<code>onPause()</code>ä¿å­˜å…³é”®æ•°æ®ï¼Œå¦åˆ™ä¼šä¸¢å¤±ï¼</p>
</blockquote>
<hr/>
<h4 data-id="heading-2">2. ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¯¦è§£</h4>
<blockquote>
<p><strong>æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ª"å…³é”®æ—¶åˆ»"</strong>ï¼Œå¿…é¡»æ­£ç¡®å¤„ç†</p>
</blockquote>















































<table><thead><tr><th>æ–¹æ³•</th><th>è°ƒç”¨æ—¶æœº</th><th>åšä»€ä¹ˆ</th><th>ä¸ºä»€ä¹ˆ</th></tr></thead><tbody><tr><td><code>onCreate()</code></td><td>Activityé¦–æ¬¡åˆ›å»º</td><td>åˆå§‹åŒ–UIã€æ•°æ®</td><td><strong>å¿…é¡»</strong></td></tr><tr><td><code>onStart()</code></td><td>Activityå¯è§ä½†æœªè·å¾—ç„¦ç‚¹</td><td>æ— éœ€æ“ä½œï¼ˆé€šå¸¸ï¼‰</td><td>é€šå¸¸æ— éœ€å¤„ç†</td></tr><tr><td><code>onResume()</code></td><td>Activityè·å¾—ç„¦ç‚¹ï¼Œç”¨æˆ·å¯äº¤äº’</td><td>é‡å¯åŠ¨ç”»ã€æ¢å¤æ•°æ®</td><td><strong>å…³é”®äº¤äº’ç‚¹</strong></td></tr><tr><td><code>onPause()</code></td><td>å¤±å»ç„¦ç‚¹ï¼ˆå¦‚å¼¹å‡ºå¯¹è¯æ¡†ï¼‰</td><td><strong>ä¿å­˜å…³é”®æ•°æ®</strong>ã€æš‚åœåŠ¨ç”»</td><td><strong>é˜²æ­¢æ•°æ®ä¸¢å¤±</strong></td></tr><tr><td><code>onStop()</code></td><td>å®Œå…¨ä¸å¯è§ï¼ˆè¿›å…¥åå°ï¼‰</td><td>é‡Šæ”¾éå…³é”®èµ„æº</td><td>ä¼˜åŒ–å†…å­˜</td></tr><tr><td><code>onDestroy()</code></td><td>Activityè¢«é”€æ¯</td><td>é‡Šæ”¾æ‰€æœ‰èµ„æº</td><td><strong>å¿…é¡»</strong></td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>æ–°æ‰‹å¸¸è§é”™è¯¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šåœ¨onPause()ä¸­ä¿å­˜æ•°æ®ï¼Œä½†æœªåœ¨onResume()æ¢å¤</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
 <span class="hljs-comment">// ä¿å­˜æ•°æ®</span>
 SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> prefs.edit();
 editor.putString(<span class="hljs-string">"text"</span>, textView.getText().toString());
 editor.apply();
}

<span class="hljs-comment">// æœªåœ¨onResume()æ¢å¤æ•°æ®ï¼</span>
</code></pre>
</blockquote>
<hr/>
<h4 data-id="heading-3">3. å®æˆ˜ï¼šç”Ÿå‘½å‘¨æœŸæ—¥å¿—ç›‘æ§</h4>
<h5 data-id="heading-4">æ­¥éª¤1ï¼šä¿®æ”¹MainActivity</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ActivityLifecycle"</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.d(TAG, <span class="hljs-string">"onCreate()"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onStart();
        Log.d(TAG, <span class="hljs-string">"onStart()"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResume</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onResume();
        Log.d(TAG, <span class="hljs-string">"onResume()"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onPause();
        Log.d(TAG, <span class="hljs-string">"onPause()"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStop</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onStop();
        Log.d(TAG, <span class="hljs-string">"onStop()"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onDestroy();
        Log.d(TAG, <span class="hljs-string">"onDestroy()"</span>);
    }
}
</code></pre>
<h5 data-id="heading-5">æ­¥éª¤2ï¼šè¿è¡Œå¹¶è§‚å¯ŸLogcat</h5>
<ol>
<li>è¿è¡Œåº”ç”¨</li>
<li>ç‚¹å‡»Homeé”®ï¼ˆè¿›å…¥åå°ï¼‰</li>
<li>ä»æœ€è¿‘ä»»åŠ¡åˆ—è¡¨é‡æ–°æ‰“å¼€åº”ç”¨</li>
<li>è§‚å¯ŸLogcatè¾“å‡º</li>
</ol>
<p><strong>å…¸å‹è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">D/ActivityLifecycle: <span class="hljs-built_in">onCreate</span>()
D/ActivityLifecycle: <span class="hljs-built_in">onStart</span>()
D/ActivityLifecycle: <span class="hljs-built_in">onResume</span>()
// ç‚¹å‡»Homeé”®
D/ActivityLifecycle: <span class="hljs-built_in">onPause</span>()
D/ActivityLifecycle: <span class="hljs-built_in">onStop</span>()
// é‡æ–°æ‰“å¼€åº”ç”¨
D/ActivityLifecycle: <span class="hljs-built_in">onStart</span>()
D/ActivityLifecycle: <span class="hljs-built_in">onResume</span>()
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®å‘ç°</strong>ï¼š<br/>
<strong>æ¯æ¬¡ä»åå°å›æ¥ï¼Œéƒ½ä¼šè§¦å‘<code>onStart()</code>å’Œ<code>onResume()</code>ï¼Œä½†ä¸ä¼šé‡æ–°è°ƒç”¨<code>onCreate()</code></strong>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ•°æ®ä¿å­˜åœ¨<code>onPause()</code>è€Œé<code>onCreate()</code>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">4. ç”Ÿå‘½å‘¨æœŸå®æˆ˜åœºæ™¯</h4>
<h5 data-id="heading-7">åœºæ™¯1ï¼šä¿å­˜ç”¨æˆ·è¾“å…¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨onPause()ä¸­ä¿å­˜æ•°æ®</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onPause();
    
    <span class="hljs-comment">// ä¿å­˜è¾“å…¥æ¡†å†…å®¹</span>
    <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);
    SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> prefs.edit();
    editor.putString(<span class="hljs-string">"user_input"</span>, editText.getText().toString());
    editor.apply();
}
</code></pre>
<h5 data-id="heading-8">åœºæ™¯2ï¼šæ¢å¤ç”¨æˆ·è¾“å…¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨onCreate()ä¸­æ¢å¤æ•°æ®</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    
    <span class="hljs-comment">// æ¢å¤è¾“å…¥</span>
    <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);
    <span class="hljs-type">String</span> <span class="hljs-variable">savedInput</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"user_input"</span>, <span class="hljs-string">""</span>);
    editText.setText(savedInput);
}
</code></pre>
<h5 data-id="heading-9">åœºæ™¯3ï¼šæš‚åœ/æ¢å¤åª’ä½“æ’­æ”¾</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> MediaPlayer mediaPlayer;

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResume</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onResume();
    <span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; !mediaPlayer.isPlaying()) {
        mediaPlayer.start(); <span class="hljs-comment">// æ¢å¤æ’­æ”¾</span>
    }
}

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onPause();
    <span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; mediaPlayer.isPlaying()) {
        mediaPlayer.pause(); <span class="hljs-comment">// æš‚åœæ’­æ”¾</span>
    }
}
</code></pre>
<p>âœ… <strong>é¿å‘æŒ‡å—</strong>ï¼š</p>
<blockquote>
<p>ğŸš« <strong>ä¸è¦</strong>åœ¨<code>onCreate()</code>ä¸­ä¿å­˜å…³é”®æ•°æ®ï¼ˆä¼šè¢«é‡å¤è°ƒç”¨ï¼‰<br/>
âœ… <strong>åº”è¯¥</strong>åœ¨<code>onPause()</code>ä¸­ä¿å­˜å…³é”®æ•°æ®<br/>
ğŸš« <strong>ä¸è¦</strong>åœ¨<code>onResume()</code>ä¸­åˆå§‹åŒ–UIï¼ˆä¼šé‡å¤ï¼‰<br/>
âœ… <strong>åº”è¯¥</strong>åœ¨<code>onCreate()</code>ä¸­åˆå§‹åŒ–UI</p>
<p>ä¸æ˜¯æ‰€æœ‰å˜é‡éƒ½éœ€è¦å£°æ˜ä¸ºæˆå‘˜å˜é‡ï¼Œä½† UI æ§ä»¶ï¼ˆå¦‚ EditTextã€Buttonï¼‰å¿…é¡»æ˜¯æˆå‘˜å˜é‡ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p>ğŸ“Œ <strong>å…³é”®ä»£ç </strong>ï¼ˆæ•°æ®ä¿å­˜æ¢å¤ï¼‰ï¼š</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¿å­˜æ•°æ®</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onPause();
    <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);
    SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> prefs.edit();
    editor.putString(<span class="hljs-string">"input"</span>, editText.getText().toString());
    editor.apply();
}

<span class="hljs-comment">// æ¢å¤æ•°æ®</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    
    <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);
    <span class="hljs-type">String</span> <span class="hljs-variable">savedInput</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"input"</span>, <span class="hljs-string">""</span>);
    editText.setText(savedInput);
}
</code></pre>
<h2 data-id="heading-10">SharedPreferences æ·±åº¦è§£æï¼šAndroid æŒä¹…åŒ–å­˜å‚¨çš„åŸºçŸ³</h2>
<p>SharedPreferences æ˜¯ Android ä¸­<strong>æœ€å¸¸ç”¨ã€æœ€è½»é‡çº§çš„æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆ</strong>ï¼Œç”¨äºä¿å­˜<strong>ç®€å•çš„é”®å€¼å¯¹æ•°æ®</strong>ï¼ˆå¦‚ç”¨æˆ·åå¥½ã€ç™»å½•çŠ¶æ€ã€åº”ç”¨è®¾ç½®ç­‰ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-11">ğŸ”‘ ä¸€ã€SharedPreferences çš„æœ¬è´¨</h3>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>ä¸€ä¸ª <strong>XML æ–‡ä»¶</strong>ï¼ˆå­˜å‚¨åœ¨ <code>/data/data/&lt;package_name&gt;/shared_prefs/</code>ï¼‰</td></tr><tr><td><strong>æ•°æ®æ ¼å¼</strong></td><td>é”®å€¼å¯¹ï¼ˆ<code>String</code> é”® + <code>String</code>/<code>int</code>/<code>boolean</code>/<code>float</code>/<code>long</code> å€¼ï¼‰</td></tr><tr><td><strong>å­˜å‚¨ä½ç½®</strong></td><td><strong>åº”ç”¨ç§æœ‰ç›®å½•</strong>ï¼ˆå…¶ä»–åº”ç”¨æ— æ³•è®¿é—®ï¼‰</td></tr><tr><td><strong>æ•°æ®æŒä¹…æ€§</strong></td><td><strong>æ°¸ä¹…å­˜å‚¨</strong>ï¼ˆåº”ç”¨å¸è½½åæ‰åˆ é™¤ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å°å‹æ•°æ®ï¼ˆ&lt;100KBï¼‰ã€éæ•æ„Ÿæ•°æ®ï¼ˆå¦‚ç”¨æˆ·è®¾ç½®ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ç±»æ¯”</strong>ï¼šSharedPreferences å°±åƒä¸€ä¸ª<strong>åŠ å¯†çš„ç”¨æˆ·æ‰‹å†Œ</strong>ï¼Œä½ æŠŠå…³é”®è®¾ç½®å†™åœ¨ä¸Šé¢ï¼Œåº”ç”¨æ¯æ¬¡å¯åŠ¨éƒ½èƒ½è¯»å–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">ğŸ“¦ äºŒã€SharedPreferences çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-13">åœºæ™¯ 1ï¼šä¿å­˜ç”¨æˆ·è¾“å…¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¿å­˜è¾“å…¥å†…å®¹ï¼ˆåœ¨ onPause ä¸­ï¼‰</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);
prefs.edit().putString(<span class="hljs-string">"user_input"</span>, editText.getText().toString()).apply();
</code></pre>
<h4 data-id="heading-14">åœºæ™¯ 2ï¼šä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¿å­˜ä¸»é¢˜è®¾ç½®</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"settings"</span>, MODE_PRIVATE);
prefs.edit().putBoolean(<span class="hljs-string">"dark_mode"</span>, <span class="hljs-literal">true</span>).apply();
</code></pre>
<h4 data-id="heading-15">åœºæ™¯ 3ï¼šè®°å½•ç”¨æˆ·ç™»å½•çŠ¶æ€</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¿å­˜ç™»å½•çŠ¶æ€</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"auth"</span>, MODE_PRIVATE);
prefs.edit().putBoolean(<span class="hljs-string">"is_logged_in"</span>, <span class="hljs-literal">true</span>).apply();
</code></pre>
<hr/>
<h3 data-id="heading-16">âš™ï¸ ä¸‰ã€SharedPreferences çš„æ ¸å¿ƒ API</h3>
<h4 data-id="heading-17">âœ… 1. è·å– SharedPreferences å¯¹è±¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼ 1ï¼šé»˜è®¤åç§°ï¼ˆæ¨èï¼‰</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"app_prefs"</span>, MODE_PRIVATE);

<span class="hljs-comment">// æ–¹å¼ 2ï¼šè‡ªå®šä¹‰åç§°</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">"user_settings"</span>, Context.MODE_PRIVATE);
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>MODE_PRIVATE</code>ï¼š<strong>å”¯ä¸€å®‰å…¨æ¨¡å¼</strong>ï¼ˆå…¶ä»–åº”ç”¨æ— æ³•è®¿é—®ï¼‰</li>
<li>å»ºè®®ç”¨å¸¸é‡å®šä¹‰åç§°ï¼ˆé¿å…æ‹¼å†™é”™è¯¯ï¼‰ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFS_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"app_prefs"</span>;
</code></pre>
</li>
</ul>
</blockquote>
<h4 data-id="heading-18">âœ… 2. ä¿å­˜æ•°æ®ï¼ˆå®‰å…¨å†™å…¥ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–ç¼–è¾‘å™¨ï¼ˆä¸æ¨èç›´æ¥ç”¨ edit()ï¼‰</span>
SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> prefs.edit();

<span class="hljs-comment">// å†™å…¥æ•°æ®ï¼ˆæ¨èä½¿ç”¨ apply() è€Œä¸æ˜¯ commit()ï¼‰</span>
editor.putString(<span class="hljs-string">"username"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
editor.putInt(<span class="hljs-string">"age"</span>, <span class="hljs-number">25</span>);
editor.putBoolean(<span class="hljs-string">"is_active"</span>, <span class="hljs-literal">true</span>);
editor.apply(); <span class="hljs-comment">// âœ… å¼‚æ­¥å†™å…¥ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆç”¨ <code>apply()</code> è€Œä¸æ˜¯ <code>commit()</code>ï¼Ÿ</strong></p>




















<table><thead><tr><th>æ–¹æ³•</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>apply()</code></td><td><strong>å¼‚æ­¥</strong>ï¼ˆåå°çº¿ç¨‹ï¼‰</td><td><strong>99% åœºæ™¯</strong>ï¼ˆæ¨èï¼‰</td></tr><tr><td><code>commit()</code></td><td><strong>åŒæ­¥</strong>ï¼ˆä¸»çº¿ç¨‹é˜»å¡ï¼‰</td><td>ä»…å½“éœ€è¦ç«‹å³ç¡®è®¤å†™å…¥æ—¶</td></tr></tbody></table>
</blockquote>
<h4 data-id="heading-19">âœ… 3. è¯»å–æ•°æ®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯»å–å­—ç¬¦ä¸²ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"username"</span>, <span class="hljs-string">"æ¸¸å®¢"</span>);

<span class="hljs-comment">// è¯»å–æ•´æ•°ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> prefs.getInt(<span class="hljs-string">"age"</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// è¯»å–å¸ƒå°”å€¼ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">isActive</span> <span class="hljs-operator">=</span> prefs.getBoolean(<span class="hljs-string">"is_active"</span>, <span class="hljs-literal">false</span>);
</code></pre>
<hr/>
<h3 data-id="heading-20">âš ï¸ å››ã€å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-21">âŒ é”™è¯¯ 1ï¼šå¿˜è®°æ£€æŸ¥é»˜è®¤å€¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šæœªæä¾›é»˜è®¤å€¼</span>
<span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"username"</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">// å¯èƒ½è¿”å› null</span>
editText.setText(username); <span class="hljs-comment">// NullPointerException!</span>

<span class="hljs-comment">// æ­£ç¡®ï¼šæä¾›é»˜è®¤å€¼</span>
<span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"username"</span>, <span class="hljs-string">"æ¸¸å®¢"</span>);
editText.setText(username);
</code></pre>
<h4 data-id="heading-22">âŒ é”™è¯¯ 2ï¼šä½¿ç”¨ <code>commit()</code> é˜»å¡ä¸»çº¿ç¨‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šåŒæ­¥å†™å…¥ï¼Œå¯èƒ½å¡é¡¿</span>
prefs.edit().putString(<span class="hljs-string">"user_input"</span>, text).commit();

<span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨ apply() å¼‚æ­¥å†™å…¥</span>
prefs.edit().putString(<span class="hljs-string">"user_input"</span>, text).apply();
</code></pre>
<h4 data-id="heading-23">âŒ é”™è¯¯ 3ï¼šé”®åæ‹¼å†™é”™è¯¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šé”®åä¸ä¸€è‡´</span>
prefs.edit().putString(<span class="hljs-string">"user_input"</span>, text).apply();

<span class="hljs-comment">// è·å–æ—¶æ‹¼é”™</span>
<span class="hljs-type">String</span> <span class="hljs-variable">saved</span> <span class="hljs-operator">=</span> prefs.getString(<span class="hljs-string">"user_input2"</span>, <span class="hljs-string">""</span>); <span class="hljs-comment">// ä¼šè¿”å›é»˜è®¤å€¼</span>
</code></pre>
<p>âœ… <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨å¸¸é‡å®šä¹‰é”®å</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEY_USER_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_input"</span>;

<span class="hljs-comment">// ä¿å­˜</span>
prefs.edit().putString(KEY_USER_INPUT, text).apply();

<span class="hljs-comment">// è¯»å–</span>
<span class="hljs-type">String</span> <span class="hljs-variable">saved</span> <span class="hljs-operator">=</span> prefs.getString(KEY_USER_INPUT, <span class="hljs-string">""</span>);
</code></pre>
<hr/>
<h3 data-id="heading-24">ğŸ“Š äº”ã€SharedPreferences vs Bundleï¼šå…³é”®åŒºåˆ«</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>SharedPreferences</th><th>Bundle</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td><strong>æ°¸ä¹…å­˜å‚¨</strong>ï¼ˆåº”ç”¨å…³é—­åä»ä¿ç•™ï¼‰</td><td><strong>ä¸´æ—¶å­˜å‚¨</strong>ï¼ˆä»…åœ¨ Activity ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼‰</td></tr><tr><td><strong>æ•°æ®èŒƒå›´</strong></td><td><strong>åº”ç”¨çº§å…¨å±€</strong>ï¼ˆæ‰€æœ‰ Activity å¯è®¿é—®ï¼‰</td><td><strong>ç»„ä»¶çº§</strong>ï¼ˆä»…åœ¨å½“å‰ Activity/Fragment å†…æœ‰æ•ˆï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>ä¿å­˜ç”¨æˆ·åå¥½ã€ç™»å½•çŠ¶æ€ç­‰</td><td>å±å¹•æ—‹è½¬æ—¶ä¸´æ—¶ä¿å­˜æ•°æ®</td></tr><tr><td><strong>æ•°æ®å¤§å°</strong></td><td>æ— ä¸¥æ ¼é™åˆ¶ï¼ˆä½†å»ºè®® &lt;100KBï¼‰</td><td>é™åˆ¶ ~1MB</td></tr><tr><td><strong>æ¢å¤æ—¶æœº</strong></td><td>åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤</td><td>Activity é‡å»ºæ—¶ï¼ˆå¦‚ <code>onCreate</code>/<code>onSaveInstanceState</code>ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-25">ğŸŒŸ å…­ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-26">âœ… 1. ä½¿ç”¨å¸¸é‡å®šä¹‰é”®åï¼ˆé¿å…æ‹¼å†™é”™è¯¯ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFS_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"app_prefs"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEY_USER_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_input"</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-comment">// ä» SharedPreferences è¯»å–</span>
        <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        <span class="hljs-type">String</span> <span class="hljs-variable">savedInput</span> <span class="hljs-operator">=</span> prefs.getString(KEY_USER_INPUT, <span class="hljs-string">""</span>);
        editText.setText(savedInput);
    }
}
</code></pre>
<h4 data-id="heading-27">âœ… 2. ä¼˜å…ˆä½¿ç”¨ <code>apply()</code>ï¼ˆé¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¼‚æ­¥å†™å…¥</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
prefs.edit().putString(KEY_USER_INPUT, editText.getText().toString()).apply();
</code></pre>
<h4 data-id="heading-28">âœ… 3. ä¿å­˜å‰æ£€æŸ¥æ•°æ®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ… å®‰å…¨å†™å…¥</span>
<span class="hljs-keyword">if</span> (editText != <span class="hljs-literal">null</span>) {
    <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> editText.getText().toString();
    prefs.edit().putString(KEY_USER_INPUT, text).apply();
}
</code></pre>
<h4 data-id="heading-29">âœ… 4. è¯»å–æ—¶æä¾›é»˜è®¤å€¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ… å®‰å…¨è¯»å–</span>
<span class="hljs-type">String</span> <span class="hljs-variable">savedInput</span> <span class="hljs-operator">=</span> prefs.getString(KEY_USER_INPUT, <span class="hljs-string">""</span>);
</code></pre>
<hr/>
<h3 data-id="heading-30">ğŸ”¥ å…«ã€é«˜çº§æŠ€å·§ï¼šåŸå­æ“ä½œä¸çº¿ç¨‹å®‰å…¨</h3>
<h4 data-id="heading-31">1. ä¸ºä»€ä¹ˆéœ€è¦åŸå­æ“ä½œï¼Ÿ</h4>
<ul>
<li>å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ SharedPreferences ä¼šå¯¼è‡´æ•°æ®è¦†ç›–</li>
<li><strong>Android 4.0+</strong> çš„ <code>apply()</code> æ˜¯<strong>çº¿ç¨‹å®‰å…¨çš„</strong>ï¼ˆä½†ä¸æ˜¯åŸå­æ“ä½œï¼‰</li>
</ul>
<h4 data-id="heading-32">2. ä¿è¯åŸå­æ€§çš„æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ SharedPreferences.Editor çš„ apply()ï¼ˆAndroid 4.0+ æ¨èï¼‰</span>
prefs.edit().putString(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>).apply();

<span class="hljs-comment">// æ–¹æ¡ˆ 2ï¼šä½¿ç”¨é”ï¼ˆä»…å½“éœ€è¦ä¸¥æ ¼åŸå­æ€§æ—¶ï¼‰</span>
<span class="hljs-keyword">synchronized</span> (prefs) {
    prefs.edit().putString(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>).apply();
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>é‡è¦æç¤º</strong>ï¼šå¯¹äºå¤§å¤šæ•°åº”ç”¨ï¼Œ<code>apply()</code> å·²è¶³å¤Ÿå®‰å…¨ï¼Œæ— éœ€é¢å¤–åŠ é”ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-33">ğŸ“Œ ä¹ã€å¸¸è§é—®é¢˜è§£ç­”</h3>
<h4 data-id="heading-34">â“ é—®é¢˜ 1ï¼šSharedPreferences é€‚åˆå­˜å‚¨æ•æ„Ÿæ•°æ®å—ï¼Ÿ</h4>
<p><strong>âŒ ä¸é€‚åˆ</strong>ï¼å®ƒ<strong>ä¸åŠ å¯†</strong>ï¼Œæ•æ„Ÿæ•°æ®åº”ä½¿ç”¨ï¼š</p>
<ul>
<li><code>EncryptedSharedPreferences</code>ï¼ˆAndroid Jetpackï¼‰</li>
<li>æ•°æ®åº“åŠ å¯†ï¼ˆRoomï¼‰</li>
</ul>
<h4 data-id="heading-35">â“ é—®é¢˜ 2ï¼šSharedPreferences å¯ä»¥å­˜å‚¨å¯¹è±¡å—ï¼Ÿ</h4>
<p><strong>âŒ ä¸èƒ½ç›´æ¥å­˜å‚¨å¯¹è±¡</strong>ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼ 1ï¼šåºåˆ—åŒ–ï¼ˆä¸æ¨èï¼Œæ•ˆç‡ä½ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>().toJson(user);
prefs.edit().putString(<span class="hljs-string">"user"</span>, json).apply();

<span class="hljs-comment">// æ–¹å¼ 2ï¼šä½¿ç”¨ Parcelableï¼ˆæ¨èï¼Œä½†éœ€è‡ªå·±å®ç°ï¼‰</span>
</code></pre>
<h4 data-id="heading-36">â“ é—®é¢˜ 3ï¼šå¦‚ä½•åˆ é™¤ SharedPreferencesï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ é™¤æ•´ä¸ª SharedPreferences</span>
getSharedPreferences(PREFS_NAME, MODE_PRIVATE).edit().clear().apply();

<span class="hljs-comment">// åˆ é™¤å•ä¸ªé”®</span>
getSharedPreferences(PREFS_NAME, MODE_PRIVATE).edit().remove(<span class="hljs-string">"key"</span>).apply();
</code></pre>
<hr/>
<h3 data-id="heading-37">âœ… åã€æ€»ç»“ï¼šSharedPreferences çš„å…³é”®ç‚¹</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ä¸ºä»€ä¹ˆç”¨ SharedPreferencesï¼Ÿ</strong></td><td>ä¿å­˜å°é‡ã€æŒä¹…åŒ–çš„é”®å€¼å¯¹æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åå¥½ï¼‰</td></tr><tr><td><strong>å¦‚ä½•é¿å…å´©æºƒï¼Ÿ</strong></td><td>1. æ£€æŸ¥ <code>editText</code> æ˜¯å¦ä¸º null2. æä¾›é»˜è®¤å€¼3. ä½¿ç”¨å¸¸é‡é”®å</td></tr><tr><td><strong><code>apply()</code> vs <code>commit()</code></strong></td><td><strong>å§‹ç»ˆç”¨ <code>apply()</code></strong>ï¼ˆå¼‚æ­¥ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ï¼‰</td></tr><tr><td><strong>ä¸ Bundle çš„å…³ç³»</strong></td><td>Bundle ä¸´æ—¶ä¿å­˜ï¼ŒSharedPreferences æ°¸ä¹…ä¿å­˜</td></tr><tr><td><strong>å®‰å…¨ä½¿ç”¨</strong></td><td>1. ç”¨å¸¸é‡å®šä¹‰é”®å2. æä¾›é»˜è®¤å€¼3. ä½¿ç”¨ <code>apply()</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-38">ğŸ“š å®˜æ–¹æ–‡æ¡£æ”¯æŒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftraining%2Fdata-storage%2Fshared-preferences" target="_blank" title="https://developer.android.com/training/data-storage/shared-preferences" ref="nofollow noopener noreferrer">Android Developers - SharedPreferences</a></p>
<blockquote>
<p>"SharedPreferences is a simple way to store key-value pairs of primitive data types. It's ideal for storing small amounts of data, such as user preferences."</p>
</blockquote>
<hr/>
<h3 data-id="heading-39">âœ… ç»“è®º</h3>
<p><strong>SharedPreferences æ˜¯ Android ä¸­æœ€åŸºç¡€ã€æœ€å®‰å…¨çš„æŒä¹…åŒ–å­˜å‚¨æ–¹æ¡ˆ</strong>ã€‚<br/>
<strong>æ— éœ€å†æ‹…å¿ƒ <code>NullPointerException</code> æˆ–æ•°æ®ä¸¢å¤±é—®é¢˜</strong>ï¼</p>
<blockquote>
<p>ğŸ’¡ <strong>è®°ä½</strong>ï¼š<br/>
<code>apply()</code> + å¸¸é‡é”®å + é»˜è®¤å€¼ = <strong>å®‰å…¨å¯é çš„ SharedPreferences ä½¿ç”¨</strong></p>
</blockquote>
<h3 data-id="heading-40">æœ€ç»ˆä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.singlenews;

<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity;

<span class="hljs-keyword">import</span> android.content.SharedPreferences;
<span class="hljs-keyword">import</span> android.media.MediaPlayer;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.widget.EditText;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ActivityLifecycle"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFS_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"app_prefs"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_input"</span>;

    <span class="hljs-keyword">private</span> EditText editText;
    <span class="hljs-keyword">private</span> MediaPlayer mediaPlayer;

    <span class="hljs-comment">// Activityç±»çš„onCreateæ–¹æ³•é‡å†™ã€‚è¿™æ˜¯Activityç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„æ ¸å¿ƒæ–¹æ³•</span>
    <span class="hljs-meta">@Override</span> <span class="hljs-comment">// å½“å‰æ–¹æ³•è¦†ç›–çˆ¶ç±»ï¼ˆActivityï¼‰ä¸­å®šä¹‰çš„åŒåæ–¹æ³•ã€‚é‡å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä»¥å®ç°è‡ªå®šä¹‰é€»è¾‘</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> { <span class="hljs-comment">// onCreateå½“Activityé¦–æ¬¡åˆ›å»ºï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ã€‚</span>
        <span class="hljs-comment">/**
         * Bundle savedInstanceStateï¼š
         * å‚æ•°ï¼Œç”¨äºæ¢å¤ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ï¼ˆå¦‚å±å¹•æ—‹è½¬ã€å†…å­˜ä¸è¶³æ—¶Activityè¢«é”€æ¯é‡å»ºï¼‰
         * å¦‚æœActivityæ˜¯é¦–æ¬¡å¯åŠ¨ï¼ŒsavedInstanceState ä¸º null
         * å¦‚æœActivityæ˜¯é‡å»ºï¼Œç³»ç»Ÿä¼šä¼ å…¥ä¹‹å‰é€šè¿‡onSaveInstanceState()ä¿å­˜çš„æ•°æ®
         *
         * Bundle æ˜¯ Android å¼€å‘ä¸­æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„æ•°æ®ä¼ é€’çš„é”®å€¼å¯¹å®¹å™¨ï¼Œç”¨äºåœ¨ç»„ä»¶ä¹‹é—´ï¼ˆActivityã€Fragmentã€Service ç­‰ï¼‰é€šè¿‡ Intentå®‰å…¨åœ°ä¼ é€’æ•°æ®ã€‚
         */</span>
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»(Activity)çš„onCreate()æ–¹æ³•ã€‚é€šè¿‡çˆ¶ç±»å®ŒæˆActivityçš„æ ¸å¿ƒåˆå§‹åŒ–ã€‚å¿…é¡»æ”¾åœ¨è‡ªå®šä¹‰ä¹‹å‰ã€‚</span>
        setContentView(R.layout.activity_main); <span class="hljs-comment">// åŠ è½½å¹¶è®¾ç½®Activityçš„UIå¸ƒå±€</span>
        <span class="hljs-comment">/**
         * Rï¼šAndroidè‡ªåŠ¨ç”Ÿæˆçš„èµ„æºå¼•ç”¨ç±»
         * layoutï¼šèµ„æºç±»å‹ï¼ˆå¸ƒå±€æ–‡ä»¶ï¼‰
         * activity_mainï¼šå¸ƒå±€æ–‡ä»¶åï¼ˆå­˜åœ¨äºres/layoutç›®å½•ä¸‹activity_main.xmlæ–‡ä»¶ï¼‰
         */</span>
        <span class="hljs-comment">// Activityæ˜¾ç¤ºç•Œé¢çš„å”¯ä¸€å…¥å£ã€‚ç³»ç»Ÿå°†activity_mainä¸­çš„UIå…ƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚</span>
        <span class="hljs-comment">// åç»­æ“ä½œï¼ˆå¦‚åˆå§‹åŒ–æ§ä»¶ã€è®¾ç½®äº‹ä»¶ç›‘å¬ï¼‰é€šå¸¸åœ¨æ­¤æ–¹æ³•ä¸­ç»§ç»­ç¼–å†™ã€‚</span>

        <span class="hljs-comment">// æ‰€æœ‰Activityéƒ½å¿…é¡»é‡å†™onCreate!</span>

        Log.d(TAG, <span class="hljs-string">"onCreate()"</span>);

        editText = findViewById(R.id.edit_text);
        <span class="hljs-comment">// æ¢å¤æ•°æ®</span>
<span class="hljs-comment">//        SharedPreferences prefs = getSharedPreferences("app_prefs", MODE_PRIVATE);</span>
        <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
<span class="hljs-comment">//        String savedInput = prefs.getString("user_input", "");</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">savedInput</span> <span class="hljs-operator">=</span> prefs.getString(USER_INPUT, <span class="hljs-string">""</span>);
        editText.setText(savedInput);
        <span class="hljs-comment">/**
         * SharedPreferences
         * SharedPreferences æ˜¯ Android ä¸­æœ€å¸¸ç”¨ã€æœ€è½»é‡çº§çš„æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆï¼Œç”¨äºä¿å­˜ç®€å•çš„é”®å€¼å¯¹æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åå¥½ã€ç™»å½•çŠ¶æ€ã€åº”ç”¨è®¾ç½®ç­‰ï¼‰ã€‚
         */</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onStart();
        Log.d(TAG, <span class="hljs-string">"onStart()"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResume</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onResume();
        Log.d(TAG, <span class="hljs-string">"onResume()"</span>);

        <span class="hljs-comment">// æ¢å¤æ’­æ”¾</span>
        <span class="hljs-keyword">if</span>(mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; !mediaPlayer.isPlaying()){
            mediaPlayer.start();
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onPause();
        Log.d(TAG, <span class="hljs-string">"onPause()"</span>);

        <span class="hljs-comment">// ä¿å­˜è¾“å…¥æ¡†å†…å®¹</span>
<span class="hljs-comment">//        SharedPreferences prefs = getSharedPreferences("app_prefs", MODE_PRIVATE);</span>
        <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">prefs</span> <span class="hljs-operator">=</span> getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> prefs.edit();
<span class="hljs-comment">//        editor.putString("user_input", editText.getText().toString());</span>
        editor.putString(USER_INPUT, editText.getText().toString());
        editor.apply(); <span class="hljs-comment">// apply() æ˜¯å¼‚æ­¥å®‰å…¨çš„ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</span>

        <span class="hljs-comment">// æš‚åœæ’­æ”¾</span>
        <span class="hljs-keyword">if</span>(mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; mediaPlayer.isPlaying()){
            mediaPlayer.pause();
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStop</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onStop();
        Log.d(TAG, <span class="hljs-string">"onStop()"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onDestroy();
        Log.d(TAG, <span class="hljs-string">"onDestroy()"</span>);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ OpenGLâ€”â€”ç¬¬ä¹å¤©]]></title>    <link>https://juejin.cn/post/7599469598883233807</link>    <guid>https://juejin.cn/post/7599469598883233807</guid>    <pubDate>2026-01-26T08:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599469598883233807" data-draft-id="7599474528238551080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ OpenGLâ€”â€”ç¬¬ä¹å¤©"/> <meta itemprop="keywords" content="OpenGL"/> <meta itemprop="datePublished" content="2026-01-26T08:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kimoro"/> <meta itemprop="url" content="https://juejin.cn/user/3889451248137260"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ OpenGLâ€”â€”ç¬¬ä¹å¤©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3889451248137260/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kimoro
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T08:54:10.000Z" title="Mon Jan 26 2026 08:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºç¡€å…‰ç…§</h2>
<p>ç°å®ä¸–ç•Œçš„å…‰ç…§æå…¶å¤æ‚ï¼Œå—å¤šç§å› ç´ å½±å“ï¼Œéš¾ä»¥ç”¨æœ‰é™çš„è®¡ç®—èµ„æºå®Œæ•´æ¨¡æ‹Ÿã€‚å› æ­¤ï¼ŒOpenGL é‡‡ç”¨ç®€åŒ–æ¨¡å‹è¿‘ä¼¼çœŸå®å…‰ç…§ï¼Œæ—¢æ˜“äºå®ç°ï¼Œè§†è§‰æ•ˆæœä¹Ÿè¾ƒä¸ºçœŸå®ã€‚è¿™äº›å…‰ç…§æ¨¡å‹åŸºäºå¯¹å…‰çš„ç‰©ç†ç‰¹æ€§ç†è§£ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ Phong å…‰ç…§æ¨¡å‹ã€‚è¯¥æ¨¡å‹åŒ…å«ä¸‰ä¸ªä¸»è¦åˆ†é‡ï¼š</p>
<ul>
<li>ç¯å¢ƒå…‰ï¼ˆAmbientï¼‰</li>
<li>æ¼«åå°„ï¼ˆDiffuseï¼‰</li>
<li>é•œé¢å…‰ï¼ˆSpecularï¼‰</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿™äº›å…‰ç…§åˆ†é‡çš„è§†è§‰æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69b9ce1417fb4ee588223e56844f7130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=KF3SBXSAEPxjO7lZQvYD7r17LM8%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">Phong å…‰ç…§æ¨¡å‹ä¸‰å¤§åˆ†é‡</h3>
<ul>
<li>ç¯å¢ƒå…‰ç…§ï¼ˆAmbient Lightingï¼‰å³ä½¿åœ¨é»‘æš—ç¯å¢ƒä¸­ï¼Œä¸–ç•Œä¸Šä¹Ÿæ€»æœ‰ä¸€äº›å¾®å¼±å…‰çº¿ï¼Œå› æ­¤ç‰©ä½“å‡ ä¹ä¸ä¼šå®Œå…¨é»‘æš—ã€‚é€šè¿‡è®¾ç½®ç¯å¢ƒå…‰ç…§å¸¸é‡ï¼Œä¸ºç‰©ä½“æä¾›åŸºç¡€è‰²å½©ã€‚</li>
<li>æ¼«åå°„å…‰ç…§ï¼ˆDiffuse Lightingï¼‰æ¨¡æ‹Ÿå…‰æºå¯¹ç‰©ä½“çš„æ–¹å‘æ€§å½±å“ï¼Œæ˜¯è§†è§‰ä¸Šæœ€æ˜¾è‘—çš„éƒ¨åˆ†ã€‚ç‰©ä½“è¡¨é¢è¶Šæ­£å¯¹å…‰æºï¼Œäº®åº¦è¶Šé«˜ã€‚</li>
<li>é•œé¢å…‰ç…§ï¼ˆSpecular Lightingï¼‰æ¨¡æ‹Ÿæœ‰å…‰æ³½ç‰©ä½“è¡¨é¢å‡ºç°çš„é«˜å…‰ç‚¹ã€‚é•œé¢å…‰çš„é¢œè‰²é€šå¸¸æ›´æ¥è¿‘å…‰æºè‰²ï¼Œè€Œéç‰©ä½“æœ¬èº«é¢œè‰²ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ç¯å¢ƒå…‰</h2>
<p>åœ¨ç°å®ä¸­ï¼Œå…‰çº¿é€šå¸¸æ¥è‡ªå››é¢å…«æ–¹ï¼Œç»ç”±å¤šæ¬¡åå°„é—´æ¥å½±å“ç‰©ä½“ã€‚è¿™ç§ç°è±¡ç§°ä¸ºå…¨å±€ç…§æ˜ï¼ˆGlobal Illuminationï¼‰ï¼Œä½†å…¶è®¡ç®—å¤æ‚ä¸”èµ„æºæ¶ˆè€—å¤§ã€‚</p>
<p>ä¸ºç®€åŒ–å¤„ç†ï¼Œå¸¸ç”¨ç¯å¢ƒå…‰ç…§è¿‘ä¼¼å…¨å±€ç…§æ˜ã€‚åªéœ€å°†ä¸€ä¸ªè¾ƒå°çš„å¸¸é‡å…‰ç…§é¢œè‰²æ·»åŠ åˆ°ç‰©ä½“ç‰‡æ®µçš„æœ€ç»ˆé¢œè‰²ä¸­ï¼Œå³ä½¿æ— ç›´æ¥å…‰æºï¼Œåœºæ™¯ä¹Ÿä¸ä¼šå…¨é»‘ã€‚</p>
<p>å®ç°æ–¹å¼ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> { 
    <span class="hljs-type">float</span> ambientStrength = <span class="hljs-number">0.1</span>; 
    vec3 ambient = ambientStrength * lightColor; 
    vec3 result = ambient * objectColor; 
    FragColor = vec4(result, <span class="hljs-number">1.0</span>); 
}
</code></pre>
<hr/>
<h2 data-id="heading-3">æ¼«åå°„</h2>
<p>ç¯å¢ƒå…‰ä¸è¶³ä»¥å±•ç°çœŸå®æ„Ÿï¼Œæ¼«åå°„å…‰ç…§å¯ä»¥è®©ç‰©ä½“æ ¹æ®å…‰æºæ–¹å‘äº§ç”Ÿæ˜æš—å˜åŒ–ã€‚ä¸å…‰çº¿æ–¹å‘è¶Šæ¥è¿‘çš„ç‰‡æ®µï¼Œäº®åº¦è¶Šé«˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1d101cc95bc4d068946207c6b0a6dc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=Kr9zlapsE96gVEDsLNBrDVrQXJg%3D" alt="image.png" loading="lazy"/></p>
<p>è®¡ç®—æ–¹æ³•ï¼š</p>
<ol>
<li>æ³•å‘é‡ï¼ˆNormal Vectorï¼‰ï¼šå‚ç›´äºç‰‡æ®µè¡¨é¢çš„å•ä½å‘é‡ã€‚</li>
<li>å…‰ç…§æ–¹å‘å‘é‡ï¼šå…‰æºä½ç½®ä¸ç‰‡æ®µä½ç½®çš„å·®å‘é‡ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šå‘é‡éœ€æ ‡å‡†åŒ–ä¸ºå•ä½å‘é‡ï¼Œæ‰èƒ½æ­£ç¡®åæ˜ å¤¹è§’ä½™å¼¦ã€‚</p>
</blockquote>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-c" lang="c">vec3 norm = normalize(Normal); 
vec3 lightDir = normalize(lightPos - FragPos); 
<span class="hljs-type">float</span> diff = max(dot(norm, lightDir), <span class="hljs-number">0.0</span>); 
vec3 diffuse = diff * lightColor;
</code></pre>
<ul>
<li>ç‚¹ä¹˜å€¼è¶Šå¤§ï¼Œæ¼«åå°„åˆ†é‡è¶Šå¼ºã€‚</li>
<li>ä½¿ç”¨ max ä¿è¯åˆ†é‡ä¸ä¸ºè´Ÿæ•°ï¼Œé¿å…æ— å®šä¹‰çš„è´Ÿå…‰ç…§ã€‚</li>
</ul>
<p>æœ€ç»ˆé¢œè‰²åˆæˆï¼š</p>
<pre><code class="hljs language-c" lang="c">vec3 result = (ambient + diffuse) * objectColor;
FragColor = vec4(result, <span class="hljs-number">1.0</span>);
</code></pre>
<hr/>
<h3 data-id="heading-4">å…³äºæ³•å‘é‡å˜æ¢</h3>
<ul>
<li>æ³•å‘é‡ä»…è¡¨ç¤ºæ–¹å‘ï¼Œæ— ç©ºé—´ä½ç½®ï¼Œä¹Ÿæ— é½æ¬¡åæ ‡ï¼ˆw åˆ†é‡ï¼‰ã€‚</li>
<li>ä½ç§»ä¸åº”å½±å“æ³•å‘é‡ï¼Œå˜æ¢æ—¶åº”ä»…ä¿ç•™æ¨¡å‹çŸ©é˜µçš„å·¦ä¸Šè§’ 3Ã—3 éƒ¨åˆ†ï¼ˆæ—‹è½¬å’Œç¼©æ”¾ï¼‰ã€‚</li>
<li>ä¸ç­‰æ¯”ç¼©æ”¾ä¼šç ´åæ³•å‘é‡çš„å‚ç›´æ€§ï¼Œéœ€ä½¿ç”¨æ³•çº¿çŸ©é˜µï¼ˆNormal Matrixï¼‰è¿›è¡Œä¿®æ­£ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/465f1d2035324467a187fe2b4b4b5afe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=r4iNgyBfWuFQP%2BxoYV%2BzviZH8W0%3D" alt="image.png" loading="lazy"/></p>
<p>æ³•çº¿çŸ©é˜µå®šä¹‰ï¼š æ¨¡å‹çŸ©é˜µå·¦ä¸Šè§’ 3Ã—3 çš„é€†çŸ©é˜µçš„è½¬ç½®ã€‚</p>
<p>ä»£ç å®ç°ï¼š</p>
<p><code>Normal = mat3(transpose(inverse(model))) * aNormal;</code></p>
<blockquote>
<p>çŸ©é˜µæ±‚é€†å¼€é”€è¾ƒå¤§ï¼Œå»ºè®®åœ¨ CPU ç«¯è®¡ç®—åé€šè¿‡ uniform ä¼ é€’ç»™ç€è‰²å™¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">é•œé¢å…‰</h2>
<p>é•œé¢å…‰ç…§ä¸ä»…ä¾èµ–å…‰ç…§æ–¹å‘ä¸æ³•å‘é‡ï¼Œè¿˜ä¸è§‚å¯Ÿæ–¹å‘ç›¸å…³ï¼Œå†³å®šäºè¡¨é¢çš„åå°„ç‰¹æ€§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/587b3755c4e44c85b80fb0e9d01f5b2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=MJzdtjJrWC7l77QRCUqDZjjv3xI%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>é€šè¿‡æ³•å‘é‡ç¿»æŠ˜å…¥å°„å…‰æ–¹å‘ï¼Œå¾—åˆ°åå°„å‘é‡ã€‚</li>
<li>åå°„å‘é‡ä¸è§‚å¯Ÿæ–¹å‘è¶Šæ¥è¿‘ï¼Œé•œé¢é«˜å…‰è¶Šæ˜æ˜¾ã€‚</li>
</ul>
<p>è®¡ç®—æ­¥éª¤ï¼š</p>
<ol>
<li>å®šä¹‰é•œé¢å¼ºåº¦ï¼š</li>
</ol>
<p><code>float specularStrength = 0.5;</code></p>
<ol start="2">
<li>è®¡ç®—è§†çº¿æ–¹å‘å’Œåå°„æ–¹å‘ï¼š</li>
</ol>
<pre><code class="hljs language-c" lang="c">vec3 viewDir = normalize(viewPos - FragPos); 
vec3 reflectDir = reflect(-lightDir, norm);
</code></pre>
<ol start="3">
<li>è®¡ç®—é•œé¢åˆ†é‡ï¼š</li>
</ol>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">float</span> spec = <span class="hljs-built_in">pow</span>(max(dot(viewDir, reflectDir), <span class="hljs-number">0.0</span>), <span class="hljs-number">32</span>); 
vec3 specular = specularStrength * spec * lightColor;
</code></pre>
<ul>
<li>
<ul>
<li>32 ä¸ºåå…‰åº¦ï¼ˆShininessï¼‰ï¼Œå€¼è¶Šå¤§é«˜å…‰è¶Šé›†ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33fcd068754e494caeb27872149f387f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=ZPTTRsvVO2kf4%2Bd0gmET7N54EWs%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ—©æœŸå…‰ç…§å¤šåœ¨é¡¶ç‚¹ç€è‰²å™¨å®ç°ï¼Œæ•ˆç‡é«˜ä½†ä¸å¤ŸçœŸå®ã€‚</p>
<p>é¡¶ç‚¹æ’å€¼å…‰ç…§ç§°ä¸º Gouraud ç€è‰²ï¼Œç‰‡æ®µçº§å…‰ç…§ç§°ä¸º Phong ç€è‰²ï¼Œåè€…æ•ˆæœæ›´å¹³æ»‘è‡ªç„¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2a18957f9564dbf893c55f4e01ab876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2ltb3Jv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770022450&amp;x-signature=Kr0k1OKMZQuaPQ3Evq9DRD3Nms8%3D" alt="image.png" loading="lazy"/></p>
</blockquote>
<hr/>
<h2 data-id="heading-6">è§‚å¯Ÿç©ºé—´ VS ä¸–ç•Œç©ºé—´ â€”â€” è®¡ç®— Phong å…‰ç…§</h2>
<h3 data-id="heading-7">ä¸–ç•Œç©ºé—´</h3>
<ul>
<li>å…¨å±€åæ ‡ç³»ï¼šæ‰€æœ‰ç‰©ä½“çš„ç»Ÿä¸€å‚è€ƒç³»</li>
<li>ç‰¹ç‚¹ï¼š</li>
<li>
<ul>
<li>åŸç‚¹å›ºå®šåœ¨ä¸–ç•ŒæŸä¸€ç‚¹</li>
<li>ç‰©ä½“é€šè¿‡æ¨¡å‹å˜æ¢ï¼ˆå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ï¼‰æ”¾ç½®å…¶ä¸­</li>
<li>å…‰æºä½ç½®é€šå¸¸åœ¨ä¸–ç•Œç©ºé—´å®šä¹‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">è§‚å¯Ÿç©ºé—´</h3>
<ul>
<li>ç›¸æœºåæ ‡ç³»ï¼šä»¥æ‘„åƒæœºä¸ºä¸­å¿ƒçš„åæ ‡ç³»</li>
<li>ç‰¹ç‚¹ï¼š</li>
<li>
<ul>
<li>åŸç‚¹åœ¨æ‘„åƒæœºä½ç½®</li>
<li>Z è½´é€šå¸¸æŒ‡å‘è§‚å¯Ÿæ–¹å‘ï¼ˆOpenGL ä¸º -Zï¼ŒDirectX ä¸º +Zï¼‰</li>
<li>é€šè¿‡è§†å›¾çŸ©é˜µä»ä¸–ç•Œç©ºé—´è½¬æ¢è€Œæ¥</li>
</ul>
</li>
</ul>
<hr/>













































<table><thead><tr><th/><th/><th/></tr></thead><tbody><tr><td>ç‰¹æ€§</td><td>è§‚å¯Ÿç©ºé—´</td><td>ä¸–ç•Œç©ºé—´</td></tr><tr><td>è§†çº¿è®¡ç®—</td><td>ç®€å•ï¼ˆç›¸æœºåœ¨åŸç‚¹ï¼‰</td><td>éœ€è¦ç›¸æœºä½ç½®</td></tr><tr><td>å…‰æºå¤„ç†</td><td>éœ€è½¬æ¢åˆ°è§‚å¯Ÿç©ºé—´</td><td>ç›´æ¥ä½¿ç”¨</td></tr><tr><td>è°ƒè¯•ä¾¿åˆ©æ€§</td><td>è¾ƒå·®</td><td>è¾ƒå¥½</td></tr><tr><td>ä¸æŠ•å½±ç»“åˆ</td><td>ç›´æ¥</td><td>éœ€é¢å¤–æ­¥éª¤</td></tr><tr><td>æ€§èƒ½</td><td>é€šå¸¸æ›´ä¼˜</td><td>ç•¥å·®</td></tr><tr><td>ç°ä»£åº”ç”¨</td><td>æ›´å¸¸è§</td><td>ç‰¹å®šåœºæ™¯</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯¦ç»†æ•™ç¨‹æµ‹è¯•VPSçš„CPUæ€§èƒ½ï¼Œç®€å•å®ç”¨çš„å…¨æ–¹ä½æŒ‡å—]]></title>    <link>https://juejin.cn/post/7599294170000670771</link>    <guid>https://juejin.cn/post/7599294170000670771</guid>    <pubDate>2026-01-26T09:33:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599294170000670771" data-draft-id="7599485473707524134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯¦ç»†æ•™ç¨‹æµ‹è¯•VPSçš„CPUæ€§èƒ½ï¼Œç®€å•å®ç”¨çš„å…¨æ–¹ä½æŒ‡å—"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-26T09:33:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="junction"/> <meta itemprop="url" content="https://juejin.cn/user/3511177855119472"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯¦ç»†æ•™ç¨‹æµ‹è¯•VPSçš„CPUæ€§èƒ½ï¼Œç®€å•å®ç”¨çš„å…¨æ–¹ä½æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3511177855119472/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    junction
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:33:19.000Z" title="Mon Jan 26 2026 09:33:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>1.æ‘˜è¦</strong></h2>
<p>å¦‚æœä½ åˆšåˆšè´­ä¹°äº†ä¸€å°VPSï¼Œçœ‹åˆ°å•†å®¶çš„é…ç½®æ ‡æ˜æœ‰â€œ4æ ¸CPUâ€å’Œâ€œé«˜æ€§èƒ½å¤„ç†å™¨â€ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™å°æœºå™¨çš„æ€§èƒ½åº”è¯¥ä¸é”™ã€‚ç„¶è€Œï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼šç½‘ç«™åŠ è½½ç¼“æ…¢ï¼Œåº”ç”¨å“åº”è¿Ÿç¼“ï¼Œç”šè‡³SSHè¿æ¥ä¹Ÿå˜å¾—å¡é¡¿ã€‚è¿™ç§æƒ…å†µå¯èƒ½ä¼šè®©ä½ æ€€ç–‘ï¼Œå•†å®¶æä¾›çš„é…ç½®æ˜¯å¦çœŸå®ï¼Œæˆ–è€…è¯´æ˜¯å¦æœ‰â€œè¶…å”®â€çš„é—®é¢˜ã€‚</p>
<p>VPSï¼ˆè™šæ‹Ÿç§äººæœåŠ¡å™¨ï¼‰ä¸æˆ‘ä»¬å®¶é‡Œçš„ç‰©ç†ç”µè„‘æœ‰å¾ˆå¤§åŒºåˆ«ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥æ‰“å¼€æœºå™¨æ£€æŸ¥ç¡¬ä»¶ï¼Œä¹Ÿä¸èƒ½éšä¾¿æ‹†è§£ä¸€å°VPSã€‚ç›¸è¾ƒäºç‰©ç†æœºï¼ŒVPSçš„æ€§èƒ½è¯„ä¼°è¦å¤æ‚ä¸€äº›ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•å’Œå·¥å…·æ¥<strong>æµ‹è¯•VPSçš„CPUæ€§èƒ½</strong>ï¼Œç”šè‡³æ˜¯å¯¹Linuxå°ç™½ä¹Ÿååˆ†å‹å¥½ã€‚</p>
<h3 data-id="heading-1"><strong>2.ä¸ºä»€ä¹ˆVPSçš„CPUæ€§èƒ½åˆ¤æ–­éº»çƒ¦ï¼Ÿ</strong></h3>
<p>åœ¨æˆ‘ä»¬æ¢è®¨å…·ä½“çš„æµ‹è¯•æ–¹æ³•ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦ç†è§£ä¸ºä½•æµ‹è¯•VPSçš„CPUæ€§èƒ½æ¯”åœ¨è‡ªå·±ç”µè„‘ä¸Šæµ‹è¯•è¦éº»çƒ¦å¾—å¤šã€‚å…³é”®åœ¨äºVPSçš„ç‹¬ç‰¹æ€§è´¨ã€‚</p>
<h3 data-id="heading-2"><strong>2.1VPSä¸ç‰©ç†æœºçš„åŒºåˆ«</strong></h3>
<p>åœ¨ä½ å®¶é‡Œçš„ç”µè„‘ï¼ŒCPUæ˜¯å±äºä½ ä¸ªäººä½¿ç”¨çš„ï¼Œæ€§èƒ½å‡ ä¹å®Œå…¨ç”±ä½ æ§åˆ¶ã€‚ä½†VPSå°±ä¸åŒäº†ï¼Œå®ƒæ˜¯åœ¨ä¸€å°å¤§æœåŠ¡å™¨ä¸Šé€šè¿‡è™šæ‹ŸåŒ–æŠ€æœ¯åˆ†å‰²å‡ºæ¥çš„å¤šä¸ªå°éƒ¨åˆ†ã€‚è¿™æ„å‘³ç€ä½ çš„VPSå¯èƒ½ä¸å…¶ä»–ç”¨æˆ·å…±äº«åŒä¸€é¢—ç‰©ç†CPUã€‚</p>
<p>å¦‚æœåŒä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šçš„å…¶ä»–VPSä¹Ÿåœ¨é«˜è´Ÿè½½è¿è¡Œï¼Œå¯¼è‡´æ•´ä½“æ€§èƒ½ä¸‹é™ï¼Œä½ çš„VPSæ€§èƒ½ä¹Ÿä¼šå—åˆ°å½±å“ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å…±äº«CPUä¸ç‹¬äº«CPUçš„åŒºåˆ«ã€‚</p>
<h3 data-id="heading-3"><strong>2.2è¶…å”®ç°è±¡</strong></h3>
<p>æ›´éº»çƒ¦çš„æ˜¯ï¼Œä¸å°‘å•†å®¶ä¸ºäº†æé«˜åˆ©æ¶¦ï¼Œå¯èƒ½ä¼šé‡‡ç”¨è¶…å”®ç­–ç•¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€å°ç‰©ç†æœåŠ¡å™¨æœ‰32ä¸ªCPUæ ¸å¿ƒï¼Œå•†å®¶å¯èƒ½ä¼šå¼€è®¾40ã€50å°ï¼Œç”šè‡³æ›´å¤šçš„VPSï¼Œæ¯å°VPSæ ‡æ˜ä¸º1æ ¸å¿ƒã€‚ç†è®ºä¸Šæ¯å°VPSç¡®å®æœ‰1æ ¸ï¼Œä½†å®é™…æƒ…å†µæ˜¯ï¼Œè¿™1æ ¸å¿ƒéœ€è¦ä¸å…¶ä»–å¾ˆå¤šVPSå…±äº«ã€‚è¿™å°±å¯¼è‡´äº†æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶åœ¨é«˜å³°æœŸï¼ŒVPSå¯èƒ½å®Œå…¨æ— æ³•æ»¡è¶³ä½¿ç”¨éœ€æ±‚ã€‚</p>
<h3 data-id="heading-4"><strong>2.3CPUèµ„æºè¢«â€œå·èµ°â€</strong></h3>
<p>åœ¨VPSçš„ä¸–ç•Œé‡Œï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªå¸¸è§çš„ç°è±¡å«åš<strong>CPU Steal Time</strong>ã€‚ç®€å•æ¥è¯´ï¼ŒCPU Steal Timeå°±æ˜¯ä½ éœ€è¦ä½¿ç”¨CPUæ—¶ï¼Œå‘ç°ç‰©ç†æœåŠ¡å™¨æ­£åœ¨å¤„ç†å…¶ä»–VPSçš„è¯·æ±‚ï¼Œå¯¼è‡´ä½ çš„VPSè¦ç­‰å¾ˆé•¿æ—¶é—´æ‰èƒ½è·å¾—CPUèµ„æºã€‚</p>
<p>å¦‚æœCPU Steal Timeè¿‡é«˜ï¼Œå³ä½¿å•†å®¶æ ‡æ˜ä½ çš„VPSæœ‰4æ ¸CPUï¼Œå®é™…å¯ç”¨çš„æ€§èƒ½å¯èƒ½è¿1æ ¸éƒ½ä¸åˆ°ã€‚</p>
<h2 data-id="heading-5">3.å¦‚ä½•æŸ¥çœ‹VPSçš„CPUåŸºç¡€ä¿¡æ¯ï¼Ÿ</h2>
<p>åœ¨å¼€å§‹è·‘åˆ†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—äº†è§£VPSçš„<strong>åŸºæœ¬CPUä¿¡æ¯</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ ä¸ªå‘½ä»¤å°±èƒ½æå®šã€‚</p>
<h3 data-id="heading-6"><strong>3.1æŸ¥çœ‹VPSçš„CPUä¿¡æ¯</strong></h3>
<p>è¿æ¥åˆ°ä½ çš„VPSï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹<strong>CPUçš„è¯¦ç»†ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /proc/cpuinfo
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afcd1a07c81a47c695eacbc205aa05fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuY3Rpb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024804&amp;x-signature=exAGJIOpftPPPWXauCD8CogIrqI%3D" alt="picture" loading="lazy"/>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„<strong>å‘½ä»¤ç®€åŒ–è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs">lscpu
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/053dcdc236a14011b4465905f7f88f81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuY3Rpb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024804&amp;x-signature=Z%2BqAlnlnNEPYfdTvq4VP7ONL14M%3D" alt="picture" loading="lazy"/></p>
<p><strong>å…³æ³¨ä»¥ä¸‹å‡ ä¸ªå‚æ•°</strong>ï¼š</p>
<ul>
<li><strong>CPUå‹å·ï¼ˆModel nameï¼‰</strong> ï¼šè¿™ä¸ªå­—æ®µæœ€é‡è¦ï¼Œç›´æ¥å…³ç³»åˆ°ä½ ä½¿ç”¨çš„æ˜¯å“ªç§CPUã€‚æ¯”å¦‚Intel Xeonæˆ–AMD EPYCç³»åˆ—éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„æœåŠ¡å™¨CPUã€‚å¦‚æœä½ çœ‹åˆ°çš„æ˜¯â€œIntel Core i3â€æˆ–è€…â€œIntel Celeronâ€ï¼Œé‚£å°±å¾—æ³¨æ„äº†ï¼Œæ¶ˆè´¹çº§çš„CPUæ€§èƒ½ä¸€èˆ¬ä¸å¦‚æœåŠ¡å™¨çº§åˆ«çš„å¤„ç†å™¨ã€‚</li>
<li><strong>CPUæ ¸å¿ƒæ•°ï¼ˆCPUsï¼‰</strong> ï¼šè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ä½ çš„VPSåˆ†é…çš„è™šæ‹Ÿæ ¸å¿ƒæ•°ï¼Œæ³¨æ„ï¼Œè¿™å¹¶ä¸ç­‰äºç‰©ç†CPUçš„æ ¸å¿ƒæ•°ï¼Œå› ä¸ºä¸€ä¸ªç‰©ç†æ ¸å¿ƒå¯ä»¥è¢«è™šæ‹Ÿæˆå¤šä¸ªvCPUã€‚</li>
<li><strong>CPUä¸»é¢‘ï¼ˆCPU MHzï¼‰</strong> ï¼šä¸»é¢‘è¶Šé«˜ï¼ŒCPUçš„è®¡ç®—èƒ½åŠ›å°±è¶Šå¼ºï¼Œä½†åœ¨VPSä¸­ï¼Œè¿™ä¸ªæ•°å€¼å¯èƒ½ä¼šå› ä¸ºè´Ÿè½½ä¸åŒè€Œæœ‰æ‰€æ³¢åŠ¨ã€‚</li>
<li><strong>CPUç¼“å­˜ï¼ˆCacheï¼‰</strong> ï¼šç¼“å­˜è¶Šå¤§ï¼ŒCPUå¤„ç†æ•°æ®çš„æ•ˆç‡è¶Šé«˜ã€‚å¦‚æœç¼“å­˜è¾ƒå°ï¼Œè¯´æ˜å¯èƒ½æ˜¯æ¯”è¾ƒè€çš„CPUæˆ–è€…ä½ç«¯å‹å·ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59631b28ed1141d9b3f2de872f4567fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuY3Rpb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024804&amp;x-signature=%2BaFXFRLuTwFJRPaPbrRahZG8QZM%3D" alt="picture" loading="lazy"/></p>
<h2 data-id="heading-7"><strong>4.ä½¿ç”¨Sysbenchå·¥å…·æµ‹è¯•VPSçš„CPUæ€§èƒ½</strong></h2>
<p>äº†è§£äº†åŸºæœ¬ä¿¡æ¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸€äº›å®é™…çš„æµ‹è¯•å·¥å…·æ¥æµ‹è¯•VPSçš„CPUæ€§èƒ½äº†ã€‚è¿™é‡Œï¼Œæˆ‘æ¨èä½¿ç”¨<strong>sysbench</strong>å·¥å…·ï¼Œå› ä¸ºå®ƒç®€å•ã€ç›´è§‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿåæ˜ å‡ºCPUçš„çœŸå®æ€§èƒ½ã€‚</p>
<h3 data-id="heading-8"><strong>4.1å®‰è£…Sysbench</strong></h3>
<p>å¤§éƒ¨åˆ†Linuxç³»ç»Ÿéƒ½å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨ç›´æ¥å®‰è£…sysbenchï¼š</p>
<ul>
<li>
<p>å¯¹äº<strong>Ubuntu/Debianç³»ç»Ÿ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">sudo apt <span class="hljs-keyword">update</span>
sudo apt install sysbench <span class="hljs-operator">-</span>y
</code></pre>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b9de1778c854f908160559dad8f63cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuY3Rpb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024804&amp;x-signature=sYXenLyivir1MWe%2Bvk1jRiO%2FezY%3D" alt="picture" loading="lazy"/></p>
<ul>
<li>å¯¹äº<strong>CentOSç³»ç»Ÿ</strong>ï¼š</li>
</ul>

<pre><code class="hljs">sudo yum install sysbench -y
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-css" lang="css">sysbench <span class="hljs-attr">--version</span>
</code></pre>
<h3 data-id="heading-9"><strong>4.2è¿è¡ŒSysbench CPUæ€§èƒ½æµ‹è¯•</strong></h3>
<p>ä¸€æ—¦sysbenchå®‰è£…å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥è¿›è¡ŒCPUæ€§èƒ½çš„æµ‹è¯•äº†ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå•æ ¸æ€§èƒ½æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">sysbench cpu <span class="hljs-attr">--threads</span>=<span class="hljs-number">1</span> run
</code></pre>
<p>è¿™æ¡å‘½ä»¤ä¼šè®©CPUè¿›è¡Œ<strong>è´¨æ•°è®¡ç®—</strong>ï¼Œé»˜è®¤æƒ…å†µä¸‹è®¡ç®—åˆ°10000ä»¥å†…çš„è´¨æ•°ï¼Œæµ‹è¯•æ—¶é—´ä¸º10ç§’ã€‚è¿è¡Œç»“æœä¼šæä¾›â€œevents per secondâ€çš„æ•°æ®ï¼Œå®ƒä»£è¡¨æ¯ç§’CPUå®Œæˆçš„è®¡ç®—ä»»åŠ¡æ•°ã€‚æ•°å­—è¶Šå¤§ï¼Œè¯´æ˜CPUæ€§èƒ½è¶Šå¥½ã€‚</p>
<p><strong>è¯´æ˜ï¼šEvents per second</strong>ï¼Œè¿™ä¸ªæ•°å­—è¡¨ç¤º<strong>æ¯ç§’é’ŸCPUèƒ½å¤Ÿå®Œæˆå¤šå°‘æ¬¡è®¡ç®—ä»»åŠ¡</strong>ã€‚<strong>æ•°å­—è¶Šå¤§ï¼Œè¯´æ˜CPUæ€§èƒ½è¶Šå¼º</strong>ã€‚ä¾‹å¦‚ï¼Œ1000æ¬¡äº‹ä»¶æ¯ç§’çš„CPUæ€§èƒ½ç›¸å¯¹æ¥è¯´æ˜¯ä¸­ç­‰æ°´å¹³ï¼Œé€‚åˆå¤„ç†å°å‹åº”ç”¨ï¼›è€Œè¶…è¿‡2000æ¬¡çš„CPUåˆ™è¡¨ç°éå¸¸ä¼˜ç§€ï¼Œèƒ½å¤Ÿå¤„ç†å¤§è´Ÿè½½ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-10"><strong>4.3æµ‹è¯•å¤šæ ¸æ€§èƒ½</strong></h3>
<p>å¦‚æœä½ çš„VPSæ˜¯å¤šæ ¸çš„ï¼Œä½ ä¹Ÿå¯ä»¥æµ‹è¯•å…¶å¤šæ ¸æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">sysbench cpu <span class="hljs-attr">--threads</span>=$(nproc) run
</code></pre>
<p>è¿™é‡Œçš„<code>$(nproc)</code><strong>ä¼šè‡ªåŠ¨è·å–VPSçš„æ ¸å¿ƒæ•°</strong>ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¤šæ ¸çš„æµ‹è¯•ç»“æœåº”è¯¥æ˜¯å•æ ¸æ€§èƒ½çš„å‡ å€ã€‚ä¾‹å¦‚ï¼Œ4æ ¸VPSåº”è¯¥æ˜¯å•æ ¸æ€§èƒ½çš„4å€å·¦å³ã€‚å¦‚æœæ€§èƒ½å€å¢ä¸æ˜æ˜¾ï¼Œé‚£ä¹ˆå°±è¯´æ˜VPSçš„å¤šæ ¸æ€§èƒ½å—åˆ°äº†é™åˆ¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºå•†å®¶è¶…å”®æˆ–ç‰©ç†æœºçš„èµ„æºåˆ†é…ä¸åˆç†ã€‚</p>
<h3 data-id="heading-11"><strong>4.4ä¸åŒå‚æ•°çš„æµ‹è¯•å·®å¼‚</strong></h3>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>sysbenchå·¥å…·</strong>å¯ä»¥è°ƒæ•´æµ‹è¯•çš„éš¾åº¦ã€‚ä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹è®¡ç®—çš„æ˜¯10000ä»¥å†…çš„è´¨æ•°ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å¢åŠ éš¾åº¦ï¼Œè®¡ç®—æ›´å¤§çš„è´¨æ•°ï¼Œå¦‚20000ã€‚è¿™æ ·åšä¼šä½¿CPUçš„è´Ÿè½½å¢åŠ ï¼Œæµ‹è¯•ç»“æœä¼šå¤§å¹…ä¸‹é™ã€‚æˆ‘ä¸ªäººå»ºè®®ä½¿ç”¨sysbenchå·¥å…·é»˜è®¤å‚æ•°è¿›è¡Œæµ‹è¯•ï¼Œå› ä¸ºå¤§å¤šæ•°äººéƒ½ä½¿ç”¨è¿™ä¸ªæ ‡å‡†ï¼Œè¿™æ ·æ›´æ–¹ä¾¿æ¯”è¾ƒä¸åŒVPSçš„æ€§èƒ½ã€‚å› ä¸º<strong>CPUæ€§èƒ½ä¼šå—åˆ°ç‰©ç†æœºè´Ÿè½½çš„å½±å“</strong>ï¼Œæˆ‘å»ºè®®ç”¨æˆ·ä½ è‡³å°‘<strong>æµ‹è¯•3-4æ¬¡</strong>ï¼Œæ¯æ¬¡åœ¨ä¸åŒçš„æ—¶é—´æ®µæµ‹è¯•ã€‚å¦‚æœç»“æœå§‹ç»ˆç¨³å®šï¼Œé‚£å°±è¯´æ˜VPSæ€§èƒ½è¾ƒä¸ºç¨³å®šã€‚å¦‚æœæµ‹è¯•ç»“æœæ³¢åŠ¨å¾ˆå¤§ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½é‡åˆ°äº†è¶…å”®æˆ–èµ„æºäº‰ç”¨çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-12"><strong>5.å¦‚ä½•åˆ¤æ–­VPSæ€§èƒ½æ˜¯å¦åˆæ ¼ï¼Ÿ</strong></h2>
<p>VPSçš„æ€§èƒ½åˆæ ¼ä¸å¦ï¼Œè¦æ ¹æ®ä½ çš„ä½¿ç”¨éœ€æ±‚æ¥åˆ¤æ–­ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ªäººåšå®¢ã€å°å‹ç½‘ç«™çš„å•æ ¸æ€§èƒ½åœ¨500åˆ°1000ä¹‹é—´å°±è¶³å¤Ÿäº†ã€‚å¦‚æœä½ çš„éœ€æ±‚æ¯”è¾ƒå¤æ‚ï¼Œæ¯”å¦‚è¿è¡ŒAPIæœåŠ¡æˆ–è€…ä¸­å‹ç½‘ç«™ï¼Œé‚£ä¹ˆå•æ ¸æ€§èƒ½è‡³å°‘è¦1200ä»¥ä¸Šã€‚æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼š<strong>ç¨³å®šæ€§</strong>ã€‚å®æ„¿é€‰æ‹©ä¸€ä¸ªç¨³å®šçš„VPSï¼Œå“ªæ€•å®ƒçš„æ€§èƒ½ç¨ä½ï¼Œä¹Ÿæ¯”é‚£ç§æ€§èƒ½æ—¶å¥½æ—¶åçš„VPSæ›´å€¼å¾—é€‰æ‹©ã€‚</p>
<h2 data-id="heading-13"><strong>6.è¿›ä¸€æ­¥æ£€æµ‹ï¼šCPU Steal Time</strong></h2>
<p>é™¤äº†æµ‹è¯•CPUæ€§èƒ½ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨<strong>CPU Steal Time</strong>ã€‚å¦‚æœä½ çš„VPSç»å¸¸å‡ºç°é«˜Steal Timeï¼Œè¯´æ˜å®ƒç»å¸¸åœ¨ç­‰å¾…CPUèµ„æºï¼Œå¯èƒ½æ˜¯å› ä¸ºè¶…å”®å¤ªä¸¥é‡ã€‚ä½ å¯ä»¥é€šè¿‡<code>top</code>å‘½ä»¤æŸ¥çœ‹Steal Timeï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">top</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd1a4958287f474f906f56b3241dd2a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuY3Rpb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770024804&amp;x-signature=dA%2FupeHIKMR5c7qp%2Fz1zxkk5KX0%3D" alt="picture" loading="lazy"/></p>
<p>å¦‚æœåœ¨ç¬¬ä¸‰è¡Œçœ‹åˆ°<code>st</code>å­—æ®µå€¼è¾ƒé«˜ï¼Œé‚£ä¹ˆä½ çš„VPSå¯èƒ½å—åˆ°äº†è¶…å”®å½±å“ã€‚Steal Timeè¶…è¿‡10%è¯´æ˜ä½ çš„VPSæ€§èƒ½å·²ç»å—åˆ°äº†è¾ƒå¤§å½±å“ã€‚</p>
<h2 data-id="heading-14"><strong>7.æ€»ç»“</strong></h2>
<p>æµ‹è¯•VPSçš„CPUæ€§èƒ½å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦å‡ æ­¥å°±å¯ä»¥å…¨é¢äº†è§£ä½ çš„VPSæ€§èƒ½ï¼š</p>
<ol>
<li>ç”¨<code>lscpu</code>æŸ¥çœ‹<strong>åŸºç¡€ä¿¡æ¯</strong>ï¼›</li>
<li>ä½¿ç”¨<code>sysbench</code>å·¥å…·æµ‹è¯•<strong>å•æ ¸å’Œå¤šæ ¸æ€§èƒ½</strong>ï¼›</li>
<li>ä½¿ç”¨<code>top</code>æŸ¥çœ‹<strong>CPU Steal Time</strong>ï¼Œæ£€æŸ¥<strong>è¶…å”®æƒ…å†µ</strong>ã€‚</li>
</ol>
<p>é€šè¿‡è¿™äº›ç¡¬æŒ‡æ ‡æµ‹è¯•ï¼Œä½ å¯ä»¥æœ‰æ•ˆè¿‡æ»¤æ‰é‚£äº›æ€§èƒ½ä¸è¾¾æ ‡çš„åŠ£è´¨æœºå™¨ã€‚ä¸å…¶åœ¨ä¸ç¨³å®šçš„æœåŠ¡å™¨ä¸Šæµªè´¹æ—¶é—´è°ƒè¯•ï¼Œä¸å¦‚æŠŠç›®å…‰æŠ•å‘æ›´æˆç†Ÿçš„æ–¹æ¡ˆã€‚å¸‚é¢ä¸Šå…¥é—¨çº§ä»·ä½æ®µä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.vmrack.net%2F%3Faffid%3Djuejin" target="_blank" title="https://www.vmrack.net/?affid=juejin" ref="nofollow noopener noreferrer">VMRack</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fvpszhijia.com%2Fracknerd-zenmeyang" target="_blank" title="https://vpszhijia.com/racknerd-zenmeyang" ref="nofollow noopener noreferrer">RackNerd</a> éƒ½æ˜¯ç”±äºåœ¨åŒç­‰é€‰æ‹©åŒºé—´å†…ä¸‹è¡¨ç°ç›¸å¯¹ç¨³å®šï¼Œä»è€Œè¢«å¾ˆå¤šå¼€å‘è€…åˆ—å…¥å¤‡é€‰æ¸…å•ã€‚å½“ç„¶ï¼Œä»»ä½•æœåŠ¡å•†éƒ½å»ºè®®å…ˆæœˆä»˜å®æµ‹ï¼Œæ»¡æ„å†ç»­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ C# åˆ›å»º Word æ–‡æ¡£çš„ç®€æ˜“æ•™ç¨‹ï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰]]></title>    <link>https://juejin.cn/post/7599294170000703539</link>    <guid>https://juejin.cn/post/7599294170000703539</guid>    <pubDate>2026-01-26T09:41:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599294170000703539" data-draft-id="7599459943918845990" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ C# åˆ›å»º Word æ–‡æ¡£çš„ç®€æ˜“æ•™ç¨‹ï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T09:41:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LSTM97"/> <meta itemprop="url" content="https://juejin.cn/user/2253353867033484"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ C# åˆ›å»º Word æ–‡æ¡£çš„ç®€æ˜“æ•™ç¨‹ï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2253353867033484/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LSTM97
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:41:58.000Z" title="Mon Jan 26 2026 09:41:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œç”Ÿæˆæ–‡æ¡£è‡ªåŠ¨åŒ–å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚å€ŸåŠ©åƒ Spire.Doc for .NET è¿™æ ·çš„åº“ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨ C# ä¸­åˆ›å»ºå’Œæ“ä½œ Word æ–‡æ¡£ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Spire.Doc åˆ›å»ºä¸€ä¸ªç®€å•çš„ Word æ–‡æ¡£ï¼Œæ¶‰åŠåˆ°æ ‡é¢˜ã€æ®µè½ç­‰æ–‡æœ¬å…ƒç´ çš„æ·»åŠ ã€‚</p>
<h2 data-id="heading-0">Spire.Doc for .NET ç®€ä»‹</h2>
<p>Spire.Doc æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ .NET æ–‡æ¡£å¤„ç†ç»„ä»¶ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ C# å’Œ VB.NET ä¸­åˆ›å»ºã€è¯»å–ã€ç¼–è¾‘å’Œä¿å­˜ Word æ–‡æ¡£ã€‚è¯¥åº“æ”¯æŒå¤šç§æ ¼å¼ï¼ŒåŒ…æ‹¬ DOCã€DOCXã€HTML å’Œ PDFã€‚ç”¨æˆ·å¯ä»¥ç®€å•åœ°é€šè¿‡ä»£ç æ¥æ§åˆ¶æ–‡æ¡£çš„å†…å®¹å’Œæ ·å¼ï¼Œè¿›è€Œç”Ÿæˆæ»¡è¶³éœ€æ±‚çš„æ–‡æ¡£ã€‚</p>
<h2 data-id="heading-1">NuGet å®‰è£…</h2>
<p>è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Spire.Docï¼Œä½ å¯ä»¥é€šè¿‡ NuGet åŒ…ç®¡ç†å™¨è½»æ¾å®‰è£…ã€‚åªéœ€åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs">Install-PackageÂ Spire.Doc
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Spire.Doc åˆ›å»º Word æ–‡æ¡£äº†ã€‚</p>
<h2 data-id="heading-2">ç¤ºä¾‹ä»£ç </h2>
<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ C# å’Œ Spire.Doc åˆ›å»ºä¸€ä¸ªåŒ…å«æ ‡é¢˜å’Œæ®µè½çš„ç®€å• Word æ–‡æ¡£ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">usingÂ Spire.Doc<span class="hljs-comment">;</span>
usingÂ Spire.Doc.Documents<span class="hljs-comment">;</span>
usingÂ Spire.Doc.Fields<span class="hljs-comment">;</span>
usingÂ System.Drawing<span class="hljs-comment">;</span>

namespaceÂ CreateSimpleWordDocument
{
Â Â Â Â classÂ Program
Â Â Â Â {
Â Â Â Â Â Â Â Â staticÂ voidÂ Main(string<span class="hljs-section">[]</span>Â args)
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ›å»ºDocumentå¯¹è±¡
Â Â Â Â Â Â Â Â Â Â Â Â DocumentÂ <span class="hljs-attr">document</span>Â =Â newÂ Document()<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â æ·»åŠ èŠ‚
Â Â Â Â Â Â Â Â Â Â Â Â SectionÂ <span class="hljs-attr">section</span>Â =Â document.AddSection()<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â è®¾ç½®é¡µè¾¹è·
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">section.PageSetup.Margins.All</span>Â =Â <span class="hljs-number">60</span>f<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â æ·»åŠ ä¸€ä¸ªæ ‡é¢˜æ®µè½
Â Â Â Â Â Â Â Â Â Â Â Â ParagraphÂ <span class="hljs-attr">title_para</span>Â =Â section.AddParagraph()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â TextRangeÂ <span class="hljs-attr">textRange</span>Â =Â title_para.AppendText(<span class="hljs-string">"è¿™æ˜¯æ ‡é¢˜"</span>)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â title_para.ApplyStyle(BuiltinStyle.Title)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">textRange.CharacterFormat.FontName</span>Â =Â <span class="hljs-string">"å®‹ä½“"</span><span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â æ·»åŠ å‡ ä¸ªå°æ ‡é¢˜æ®µè½
Â Â Â Â Â Â Â Â Â Â Â Â string<span class="hljs-section">[]</span>Â <span class="hljs-attr">headings</span>Â =Â {Â <span class="hljs-string">"è¿™æ˜¯æ ‡é¢˜1"</span>,Â <span class="hljs-string">"è¿™æ˜¯æ ‡é¢˜2"</span>,Â <span class="hljs-string">"è¿™æ˜¯æ ‡é¢˜3"</span>,Â <span class="hljs-string">"è¿™æ˜¯æ ‡é¢˜4"</span>Â }<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â forÂ (intÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;Â iÂ &lt;Â headings.Length;Â i++)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ParagraphÂ <span class="hljs-attr">heading</span>Â =Â section.AddParagraph()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">textRange</span>Â =Â heading.AppendText(headings[i])<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â heading.ApplyStyle((BuiltinStyle)((int)BuiltinStyle.Heading1Â +Â i))<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">textRange.CharacterFormat.FontName</span>Â =Â <span class="hljs-string">"å®‹ä½“"</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â //Â æ·»åŠ ä¸€ä¸ªæ®µè½
Â Â Â Â Â Â Â Â Â Â Â Â ParagraphÂ <span class="hljs-attr">normal_para</span>Â =Â section.AddParagraph()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â normal_para.AppendText("è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚")<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ›å»ºæ®µè½æ ·å¼
Â Â Â Â Â Â Â Â Â Â Â Â ParagraphStyleÂ <span class="hljs-attr">style</span>Â =Â newÂ ParagraphStyle(document)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">style.Name</span>Â =Â <span class="hljs-string">"paraStyle"</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">style.CharacterFormat.FontName</span>Â =Â <span class="hljs-string">"å®‹ä½“"</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">style.CharacterFormat.FontSize</span>Â =Â <span class="hljs-number">13</span>f<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">style.CharacterFormat.TextColor</span>Â =Â Color.Brown<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â document.Styles.Add(style)<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†è‡ªå®šä¹‰æ ·å¼åº”ç”¨åˆ°æŒ‡å®šæ®µè½
Â Â Â Â Â Â Â Â Â Â Â Â normal_para.ApplyStyle("paraStyle")<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â ä¿å­˜æ–‡æ¡£
Â Â Â Â Â Â Â Â Â Â Â Â document.SaveToFile("AddText.docx",Â FileFormat.Docx)<span class="hljs-comment">;</span>

Â Â Â Â Â Â Â Â Â Â Â Â //Â é‡Šæ”¾èµ„æº
Â Â Â Â Â Â Â Â Â Â Â Â document.Dispose()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-3">ä»£ç è¯¦è§£</h3>
<ol>
<li>
<p><strong>åˆ›å»º Document å¯¹è±¡</strong> ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ª <code>Document</code> å¯¹è±¡ï¼Œè¿™æ˜¯æ–‡æ¡£çš„æ ¸å¿ƒã€‚</p>
</li>
<li>
<p><strong>æ·»åŠ èŠ‚</strong> ï¼šä½¿ç”¨ <code>AddSection()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å‘æ–‡æ¡£æ·»åŠ æ–°çš„èŠ‚ã€‚</p>
</li>
<li>
<p><strong>è®¾ç½®é¡µé¢è¾¹è·</strong> ï¼šä½¿ç”¨ <code>PageSetup.Margins</code> å±æ€§å¯ä»¥è½»æ¾è®¾ç½®é¡µè¾¹è·ã€‚</p>
</li>
<li>
<p><strong>æ·»åŠ æ ‡é¢˜å’Œæ®µè½</strong> ï¼š</p>
</li>
</ol>
<ul>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>AddParagraph()</code> æ–¹æ³•æ·»åŠ æ®µè½ï¼Œå¹¶åˆ©ç”¨ <code>AppendText()</code> æ–¹æ³•æ·»åŠ æ–‡æœ¬ã€‚</li>
<li>Spire.Doc å…è®¸ä½¿ç”¨å†…ç½®æ ·å¼ï¼Œé€šè¿‡ <code>ApplyStyle()</code> æ–¹æ³•ä¸ºæ®µè½åº”ç”¨ä¸åŒçš„æ ·å¼ã€‚</li>
</ul>
<ol start="5">
<li>
<p><strong>è‡ªå®šä¹‰æ®µè½æ ·å¼</strong> ï¼šä½¿ç”¨ <code>ParagraphStyle</code> ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±çš„æ®µè½æ ·å¼å¹¶åº”ç”¨åˆ°æ®µè½ä¸Šã€‚</p>
</li>
<li>
<p><strong>ä¿å­˜æ–‡æ¡£</strong> ï¼šæœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>SaveToFile()</code> æ–¹æ³•å°†æ–‡æ¡£ä¿å­˜ä¸º <code>.docx</code> æ ¼å¼ã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">æ›´å¤šåŠŸèƒ½</h3>
<p>å¦‚æœæƒ³è¦äº†è§£å¦‚ä½•åœ¨ Word æ–‡æ¡£ä¸­æ·»åŠ å›¾ç‰‡ã€åˆ—è¡¨ç­‰æ›´å¤æ‚çš„å…ƒç´ ï¼Œå¯ä»¥å‚è€ƒ Spire.Doc çš„åœ¨çº¿æ•™ç¨‹ã€‚è¿™äº›æ•™ç¨‹æ¶µç›–äº†åº“çš„æ›´å¤šå…ˆè¿›åŠŸèƒ½ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡æ–‡æ¡£ç”Ÿæˆçš„æŠ€æœ¯ã€‚</p>
<h2 data-id="heading-5">ç»“è®º</h2>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ åº”è¯¥èƒ½å¤Ÿä½¿ç”¨ C# å’Œ Spire.Doc åˆ›å»ºä¸€ä¸ªåŒ…å«åŸºæœ¬å…ƒç´ çš„ Word æ–‡æ¡£ã€‚æ— è®ºæ˜¯ç”ŸæˆæŠ¥å‘Šã€åˆåŒæˆ–å…¶ä»–ä»»ä½•æ–‡æ¡£ï¼ŒSpire.Doc éƒ½æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ»¡è¶³å„ç§éœ€æ±‚ã€‚ç»§ç»­æ¢ç´¢æ›´å¤šç‰¹æ€§ï¼Œä½ å°†èƒ½åˆ›å»ºå‡ºæ›´åŠ å¤æ‚å’Œä¸“ä¸šçš„æ–‡æ¡£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# Flutter Dio ç½‘ç»œè¯·æ±‚åº“ä½¿ç”¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7599469598883643407</link>    <guid>https://juejin.cn/post/7599469598883643407</guid>    <pubDate>2026-01-26T09:58:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599469598883643407" data-draft-id="7599220371666501672" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# Flutter Dio ç½‘ç»œè¯·æ±‚åº“ä½¿ç”¨æ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T09:58:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–ç«ç®­çš„å°ç”·å­©"/> <meta itemprop="url" content="https://juejin.cn/user/4457847613830523"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # Flutter Dio ç½‘ç»œè¯·æ±‚åº“ä½¿ç”¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4457847613830523/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–ç«ç®­çš„å°ç”·å­©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:58:42.000Z" title="Mon Jan 26 2026 09:58:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Dio æ˜¯ Flutter ä¸­æœ€å¼ºå¤§ã€æœ€æµè¡Œçš„ Dart HTTP å®¢æˆ·ç«¯åº“ï¼Œæä¾›äº†æ‹¦æˆªå™¨ã€å…¨å±€é…ç½®ã€FormDataã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ã€è¯·æ±‚å–æ¶ˆã€è¶…æ—¶ç­‰é«˜çº§åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-0">1. å®‰è£…ä¸åˆå§‹åŒ–</h2>
<h3 data-id="heading-1">1.1 æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ  dio ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">dio:</span> <span class="hljs-string">^5.4.1</span> <span class="hljs-comment"># è¯·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>è¿è¡Œ <code>flutter pub get</code> å®‰è£…ä¾èµ–ã€‚</p>
<h3 data-id="heading-2">1.2 åˆ›å»º Dio å®ä¾‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;

<span class="hljs-comment">// æ–¹æ³•ä¸€ï¼šåˆ›å»ºå®ä¾‹æ—¶é…ç½®</span>
Dio dio = Dio(
  BaseOptions(
    baseUrl: <span class="hljs-string">"https://api.example.com"</span>,
    connectTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">5</span>),
    receiveTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">3</span>),
    headers: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
  ),
);

<span class="hljs-comment">// æ–¹æ³•äºŒï¼šåˆ›å»ºåé…ç½®</span>
Dio dio = Dio();
<span class="hljs-keyword">void</span> configureDio() {
  dio.options.baseUrl = <span class="hljs-string">'https://api.example.com'</span>;
  dio.options.connectTimeout = <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">5</span>);
  dio.options.receiveTimeout = <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">3</span>);
}
</code></pre>
<p><strong>å»ºè®®</strong>ï¼šåœ¨é¡¹ç›®ä¸­é€šå¸¸ä½¿ç”¨å•ä¾‹æ¨¡å¼ç®¡ç† Dio å®ä¾‹ã€‚</p>
<h2 data-id="heading-3">2. å‘èµ· HTTP è¯·æ±‚</h2>
<h3 data-id="heading-4">2.1 GET è¯·æ±‚</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šæŸ¥è¯¢å‚æ•°æ‹¼æ¥åœ¨URLä¸­</span>
  Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/user?id=123"</span>);
  <span class="hljs-built_in">print</span>(response.data);
  
  <span class="hljs-comment">// æ–¹å¼äºŒï¼šä½¿ç”¨ queryParameters å‚æ•°ï¼ˆæ¨èï¼‰</span>
  Response response2 = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(
    <span class="hljs-string">"/test"</span>,
    queryParameters: {<span class="hljs-string">'id'</span>: <span class="hljs-number">12</span>, <span class="hljs-string">'name'</span>: <span class="hljs-string">'dio'</span>},
  );
  <span class="hljs-built_in">print</span>(response2.data.toString());
} <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-built_in">print</span>(e.message);
}
</code></pre>
<h3 data-id="heading-5">2.2 POST è¯·æ±‚</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// å‘é€ JSON æ•°æ®</span>
  Response response = <span class="hljs-keyword">await</span> dio.post(
    <span class="hljs-string">"/user"</span>,
    data: {<span class="hljs-string">'name'</span>: <span class="hljs-string">'John'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">25</span>},
  );
  
  <span class="hljs-comment">// å‘é€ FormData</span>
  FormData formData = FormData.fromMap({
    <span class="hljs-string">'name'</span>: <span class="hljs-string">'dio'</span>,
    <span class="hljs-string">'date'</span>: <span class="hljs-built_in">DateTime</span>.now().toIso8601String(),
  });
  Response formResponse = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">'/info'</span>, data: formData);
  
  <span class="hljs-built_in">print</span>(response.data);
} <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-built_in">print</span>(e.message);
}
</code></pre>
<h3 data-id="heading-6">2.3 å…¶ä»–è¯·æ±‚æ–¹æ³•</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// PUT è¯·æ±‚ - æ›´æ–°èµ„æº</span>
<span class="hljs-keyword">await</span> dio.put(<span class="hljs-string">"/user/123"</span>, data: {<span class="hljs-string">"name"</span>: <span class="hljs-string">"john doe"</span>});

<span class="hljs-comment">// DELETE è¯·æ±‚ - åˆ é™¤èµ„æº</span>
<span class="hljs-keyword">await</span> dio.delete(<span class="hljs-string">"/user/123"</span>);

<span class="hljs-comment">// PATCH è¯·æ±‚ - éƒ¨åˆ†æ›´æ–°èµ„æº</span>
<span class="hljs-keyword">await</span> dio.patch(<span class="hljs-string">"/user/123"</span>, data: {<span class="hljs-string">"name"</span>: <span class="hljs-string">"johnny"</span>});

<span class="hljs-comment">// HEAD è¯·æ±‚ - è·å–å¤´éƒ¨ä¿¡æ¯</span>
Response headResponse = <span class="hljs-keyword">await</span> dio.head(<span class="hljs-string">"/user/123"</span>);
<span class="hljs-built_in">print</span>(headResponse.headers);

<span class="hljs-comment">// OPTIONS è¯·æ±‚ - è·å–é€šä¿¡é€‰é¡¹</span>
Response optionsResponse = <span class="hljs-keyword">await</span> dio.options(<span class="hljs-string">"/user/123"</span>);
</code></pre>
<h2 data-id="heading-7">3. å“åº”å¤„ç†</h2>
<h3 data-id="heading-8">3.1 å“åº”æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-dart" lang="dart">Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'https://api.example.com/user'</span>);

<span class="hljs-built_in">print</span>(response.data);       <span class="hljs-comment">// å“åº”ä½“ï¼ˆå¯èƒ½å·²è¢«è½¬æ¢ï¼‰</span>
<span class="hljs-built_in">print</span>(response.statusCode); <span class="hljs-comment">// çŠ¶æ€ç </span>
<span class="hljs-built_in">print</span>(response.headers);    <span class="hljs-comment">// å“åº”å¤´</span>
<span class="hljs-built_in">print</span>(response.requestOptions); <span class="hljs-comment">// è¯·æ±‚ä¿¡æ¯</span>
<span class="hljs-built_in">print</span>(response.statusMessage); <span class="hljs-comment">// çŠ¶æ€æ¶ˆæ¯</span>

<span class="hljs-comment">// è·å–æµå¼å“åº”</span>
<span class="hljs-keyword">final</span> streamResponse = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(
  url,
  options: Options(responseType: ResponseType.stream),
);
<span class="hljs-built_in">print</span>(streamResponse.data.stream);

<span class="hljs-comment">// è·å–å­—èŠ‚å“åº”</span>
<span class="hljs-keyword">final</span> bytesResponse = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;&gt;(
  url,
  options: Options(responseType: ResponseType.bytes),
);
<span class="hljs-built_in">print</span>(bytesResponse.data); <span class="hljs-comment">// List&lt;int&gt;</span>
</code></pre>
<h3 data-id="heading-9">3.2 ä¸ Flutter UI é›†æˆ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  Future&lt;<span class="hljs-built_in">List</span>&lt;User&gt;&gt; fetchUsers() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/users'</span>);
    <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">dynamic</span>&gt; jsonList = response.data;
    <span class="hljs-keyword">return</span> jsonList.map((json) =&gt; User.fromJson(json)).toList();
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> FutureBuilder&lt;<span class="hljs-built_in">List</span>&lt;User&gt;&gt;(
      future: fetchUsers(),
      builder: (context, snapshot) {
        <span class="hljs-keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) {
          <span class="hljs-keyword">return</span> CircularProgressIndicator();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (snapshot.hasError) {
          <span class="hljs-keyword">return</span> Text(<span class="hljs-string">'Error: <span class="hljs-subst">${snapshot.error}</span>'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> ListView.builder(
            itemCount: snapshot.data!.length,
            itemBuilder: (context, index) {
              User user = snapshot.data![index];
              <span class="hljs-keyword">return</span> ListTile(
                title: Text(user.name),
                subtitle: Text(user.email),
              );
            },
          );
        }
      },
    );
  }
}
</code></pre>
<h2 data-id="heading-10">4. é”™è¯¯å¤„ç†</h2>
<h3 data-id="heading-11">4.1 DioException ç±»å‹ï¼ˆæ–°ç‰ˆæœ¬ï¼‰</h3>
<p>Dio 5.x ä½¿ç”¨ <code>DioException</code> æ›¿ä»£æ—§çš„ <code>DioError</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">try</span> {
  Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/user?id=123"</span>);
} <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-keyword">switch</span> (e.type) {
    <span class="hljs-keyword">case</span> DioExceptionType.connectionTimeout:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¿æ¥è¶…æ—¶'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.sendTimeout:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‘é€è¶…æ—¶'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.receiveTimeout:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ¥æ”¶è¶…æ—¶'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.badResponse:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯ï¼ŒçŠ¶æ€ç ï¼š<span class="hljs-subst">${e.response?.statusCode}</span>'</span>);
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å“åº”æ•°æ®ï¼š<span class="hljs-subst">${e.response?.data}</span>'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.cancel:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.connectionError:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.badCertificate:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯ä¹¦éªŒè¯å¤±è´¥'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.unknown:
    <span class="hljs-keyword">default</span>:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœªçŸ¥é”™è¯¯: <span class="hljs-subst">${e.message}</span>'</span>);
      <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<h3 data-id="heading-12">4.2 é”™è¯¯ç±»å‹è¯´æ˜</h3>
<ul>
<li><strong>connectionTimeout</strong>ï¼šè¿æ¥æœåŠ¡å™¨è¶…æ—¶</li>
<li><strong>sendTimeout</strong>ï¼šæ•°æ®å‘é€è¶…æ—¶</li>
<li><strong>receiveTimeout</strong>ï¼šæ¥æ”¶å“åº”è¶…æ—¶</li>
<li><strong>badResponse</strong>ï¼šæœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç ï¼ˆ4xxã€5xxï¼‰</li>
<li><strong>cancel</strong>ï¼šè¯·æ±‚è¢«å–æ¶ˆ</li>
<li><strong>connectionError</strong>ï¼šç½‘ç»œè¿æ¥é—®é¢˜</li>
<li><strong>badCertificate</strong>ï¼šHTTPS è¯ä¹¦éªŒè¯å¤±è´¥</li>
<li><strong>unknown</strong>ï¼šå…¶ä»–æœªçŸ¥é”™è¯¯</li>
</ul>
<h2 data-id="heading-13">5. æ‹¦æˆªå™¨ï¼ˆInterceptorsï¼‰</h2>
<p>æ‹¦æˆªå™¨æ˜¯ Dio æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå…è®¸åœ¨è¯·æ±‚/å“åº”æµç¨‹ä¸­æ’å…¥å¤„ç†é€»è¾‘ã€‚</p>
<h3 data-id="heading-14">5.1 åŸºç¡€æ‹¦æˆªå™¨</h3>
<pre><code class="hljs language-dart" lang="dart">dio.interceptors.add(
  InterceptorsWrapper(
    onRequest: (RequestOptions options, RequestInterceptorHandler handler) {
      <span class="hljs-comment">// è¯·æ±‚å‰å¤„ç†</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‘é€è¯·æ±‚: <span class="hljs-subst">${options.uri}</span>'</span>);
      
      <span class="hljs-comment">// æ·»åŠ è®¤è¯token</span>
      options.headers[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-string">'Bearer your_token_here'</span>;
      
      <span class="hljs-keyword">return</span> handler.next(options); <span class="hljs-comment">// ç»§ç»­è¯·æ±‚</span>
    },
    
    onResponse: (Response response, ResponseInterceptorHandler handler) {
      <span class="hljs-comment">// å“åº”åå¤„ç†</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ”¶åˆ°å“åº”: <span class="hljs-subst">${response.statusCode}</span>'</span>);
      <span class="hljs-keyword">return</span> handler.next(response);
    },
    
    onError: (DioException error, ErrorInterceptorHandler handler) {
      <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚é”™è¯¯: <span class="hljs-subst">${error.type}</span>'</span>);
      <span class="hljs-keyword">return</span> handler.next(error);
    },
  ),
);
</code></pre>
<h3 data-id="heading-15">5.2 å®ç”¨æ‹¦æˆªå™¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// 1. æ—¥å¿—æ‹¦æˆªå™¨</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoggingInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Interceptor</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onRequest(RequestOptions options, RequestInterceptorHandler handler) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'REQUEST[<span class="hljs-subst">${options.method}</span>] =&gt; PATH: <span class="hljs-subst">${options.path}</span>'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Headers: <span class="hljs-subst">${options.headers}</span>'</span>);
    <span class="hljs-keyword">if</span> (options.data != <span class="hljs-keyword">null</span>) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'Body: <span class="hljs-subst">${options.data}</span>'</span>);
    }
    <span class="hljs-keyword">super</span>.onRequest(options, handler);
  }
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onResponse(Response response, ResponseInterceptorHandler handler) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'RESPONSE[<span class="hljs-subst">${response.statusCode}</span>] =&gt; PATH: <span class="hljs-subst">${response.requestOptions.path}</span>'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Data: <span class="hljs-subst">${response.data}</span>'</span>);
    <span class="hljs-keyword">super</span>.onResponse(response, handler);
  }
}

<span class="hljs-comment">// 2. Token åˆ·æ–°æ‹¦æˆªå™¨</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenRefreshInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Interceptor</span> </span>{
  <span class="hljs-keyword">final</span> Dio _tokenDio = Dio();
  <span class="hljs-built_in">bool</span> _isRefreshing = <span class="hljs-keyword">false</span>;
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onError(DioException err, ErrorInterceptorHandler handler) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (err.response?.statusCode == <span class="hljs-number">401</span> &amp;&amp; !_isRefreshing) {
      _isRefreshing = <span class="hljs-keyword">true</span>;
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åˆ·æ–°token</span>
        <span class="hljs-keyword">await</span> refreshToken();
        
        <span class="hljs-comment">// é‡è¯•åŸå§‹è¯·æ±‚</span>
        <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> dio.request(
          err.requestOptions.path,
          data: err.requestOptions.data,
          queryParameters: err.requestOptions.queryParameters,
          options: Options(
            method: err.requestOptions.method,
            headers: err.requestOptions.headers,
          ),
        );
        handler.resolve(response);
      } <span class="hljs-keyword">catch</span> (e) {
        handler.reject(err);
      } <span class="hljs-keyword">finally</span> {
        _isRefreshing = <span class="hljs-keyword">false</span>;
      }
    } <span class="hljs-keyword">else</span> {
      handler.next(err);
    }
  }
}
</code></pre>
<h2 data-id="heading-16">6. æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½</h2>
<h3 data-id="heading-17">6.1 å•æ–‡ä»¶ä¸Šä¼ </h3>
<pre><code class="hljs language-dart" lang="dart">FormData formData = FormData.fromMap({
  <span class="hljs-string">'name'</span>: <span class="hljs-string">'æ–‡ä»¶å'</span>,
  <span class="hljs-string">'file'</span>: <span class="hljs-keyword">await</span> MultipartFile.fromFile(
    <span class="hljs-string">'./text.txt'</span>, 
    filename: <span class="hljs-string">'upload.txt'</span>,
  ),
});

Response response = <span class="hljs-keyword">await</span> dio.post(
  <span class="hljs-string">'/upload'</span>,
  data: formData,
  onSendProgress: (<span class="hljs-built_in">int</span> sent, <span class="hljs-built_in">int</span> total) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸Šä¼ è¿›åº¦: <span class="hljs-subst">$sent</span> / <span class="hljs-subst">$total</span>'</span>);
  },
);
</code></pre>
<h3 data-id="heading-18">6.2 å¤šæ–‡ä»¶ä¸Šä¼ </h3>
<pre><code class="hljs language-dart" lang="dart">FormData formData = FormData.fromMap({
  <span class="hljs-string">'name'</span>: <span class="hljs-string">'dio'</span>,
  <span class="hljs-string">'files'</span>: [
    <span class="hljs-keyword">await</span> MultipartFile.fromFile(<span class="hljs-string">'./text1.txt'</span>, filename: <span class="hljs-string">'text1.txt'</span>),
    <span class="hljs-keyword">await</span> MultipartFile.fromFile(<span class="hljs-string">'./text2.txt'</span>, filename: <span class="hljs-string">'text2.txt'</span>),
    <span class="hljs-keyword">await</span> MultipartFile.fromFile(<span class="hljs-string">'./text3.txt'</span>, filename: <span class="hljs-string">'text3.txt'</span>),
  ]
});

Response response = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">'/upload-multiple'</span>, data: formData);
</code></pre>
<h3 data-id="heading-19">6.3 æ–‡ä»¶ä¸‹è½½</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// è·å–åº”ç”¨ä¸´æ—¶ç›®å½•</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:path_provider/path_provider.dart'</span>;

<span class="hljs-keyword">void</span> downloadFile() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// è·å–å­˜å‚¨è·¯å¾„</span>
  Directory tempDir = <span class="hljs-keyword">await</span> getTemporaryDirectory();
  <span class="hljs-built_in">String</span> savePath = <span class="hljs-string">'<span class="hljs-subst">${tempDir.path}</span>/filename.pdf'</span>;
  
  CancelToken cancelToken = CancelToken();
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> dio.download(
      <span class="hljs-string">'https://example.com/file.pdf'</span>,
      savePath,
      onReceiveProgress: (received, total) {
        <span class="hljs-keyword">if</span> (total != <span class="hljs-number">-1</span>) {
          <span class="hljs-built_in">double</span> progress = (received / total) * <span class="hljs-number">100</span>;
          <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸‹è½½è¿›åº¦: <span class="hljs-subst">${progress.toStringAsFixed(<span class="hljs-number">2</span>)}</span>%'</span>);
        }
      },
      cancelToken: cancelToken,
      deleteOnError: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// ä¸‹è½½å‡ºé”™æ—¶åˆ é™¤éƒ¨åˆ†æ–‡ä»¶</span>
    );
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸‹è½½å®Œæˆ: <span class="hljs-subst">$savePath</span>'</span>);
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">if</span> (CancelToken.isCancel(e)) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸‹è½½å·²å–æ¶ˆ'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸‹è½½å¤±è´¥: <span class="hljs-subst">${e.message}</span>'</span>);
    }
  }
}

<span class="hljs-comment">// å–æ¶ˆä¸‹è½½</span>
<span class="hljs-keyword">void</span> cancelDownload() {
  cancelToken.cancel(<span class="hljs-string">'ç”¨æˆ·å–æ¶ˆä¸‹è½½'</span>);
}
</code></pre>
<h2 data-id="heading-20">7. é«˜çº§é…ç½®</h2>
<h3 data-id="heading-21">7.1 è¯·æ±‚é€‰é¡¹ï¼ˆOptionsï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart">Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(
  <span class="hljs-string">'/data'</span>,
  options: Options(
    headers: {<span class="hljs-string">'custom-header'</span>: <span class="hljs-string">'value'</span>},
    responseType: ResponseType.json,
    contentType: <span class="hljs-string">'application/json'</span>,
    sendTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
    receiveTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
    extra: {<span class="hljs-string">'custom_info'</span>: <span class="hljs-string">'å¯ä»¥åç»­åœ¨æ‹¦æˆªå™¨ä¸­è·å–'</span>}, <span class="hljs-comment">// è‡ªå®šä¹‰å­—æ®µ</span>
    validateStatus: (status) {
      <span class="hljs-comment">// è‡ªå®šä¹‰çŠ¶æ€ç éªŒè¯é€»è¾‘</span>
      <span class="hljs-keyword">return</span> status! &lt; <span class="hljs-number">500</span>; <span class="hljs-comment">// åªè®¤ä¸º500ä»¥ä¸‹çš„çŠ¶æ€ç æ˜¯æˆåŠŸçš„</span>
    },
  ),
);
</code></pre>
<h3 data-id="heading-22">7.2 è¯·æ±‚å–æ¶ˆ</h3>
<pre><code class="hljs language-dart" lang="dart">CancelToken cancelToken = CancelToken();

<span class="hljs-comment">// å‘èµ·å¯å–æ¶ˆçš„è¯·æ±‚</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; fetchData() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(
      <span class="hljs-string">'/large-data'</span>,
      cancelToken: cancelToken,
    );
    <span class="hljs-built_in">print</span>(response.data);
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">if</span> (CancelToken.isCancel(e)) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ'</span>);
    }
  }
}

<span class="hljs-comment">// å–æ¶ˆè¯·æ±‚</span>
<span class="hljs-keyword">void</span> cancelRequest() {
  cancelToken.cancel(<span class="hljs-string">'ç”¨æˆ·å–æ¶ˆæ“ä½œ'</span>);
}

<span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶å–æ¶ˆè¯·æ±‚ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰</span>
<span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> dispose() {
  cancelToken.cancel(<span class="hljs-string">'ç»„ä»¶é”€æ¯'</span>);
  <span class="hljs-keyword">super</span>.dispose();
}
</code></pre>
<h3 data-id="heading-23">7.3 å¹¶å‘è¯·æ±‚</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; fetchMultipleData() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-built_in">List</span>&lt;Response&gt; responses = <span class="hljs-keyword">await</span> Future.wait([
      dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/user/1'</span>),
      dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/user/2'</span>),
      dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/user/3'</span>),
    ]);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> response <span class="hljs-keyword">in</span> responses) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ç”¨æˆ·æ•°æ®: <span class="hljs-subst">${response.data}</span>'</span>);
    }
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥: <span class="hljs-subst">${e.message}</span>'</span>);
  }
}
</code></pre>
<h2 data-id="heading-24">8. é¡¹ç›®å®æˆ˜ï¼šå°è£… Dio æœåŠ¡</h2>
<h3 data-id="heading-25">8.1 åŸºç¡€å°è£…ç¤ºä¾‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpService</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> HttpService _instance = HttpService._internal();
  <span class="hljs-keyword">late</span> Dio _dio;
  
  <span class="hljs-keyword">factory</span> HttpService() =&gt; _instance;
  
  HttpService._internal() {
    _dio = Dio(BaseOptions(
      baseUrl: <span class="hljs-string">'https://api.example.com'</span>,
      connectTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
      receiveTimeout: <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
      headers: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
    ));
    
    <span class="hljs-comment">// æ·»åŠ æ‹¦æˆªå™¨</span>
    _dio.interceptors.add(LoggingInterceptor());
    _dio.interceptors.add(TokenInterceptor());
  }
  
  <span class="hljs-comment">// GET è¯·æ±‚</span>
  Future&lt;Response&gt; <span class="hljs-keyword">get</span>(<span class="hljs-built_in">String</span> path, {<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParams}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _dio.<span class="hljs-keyword">get</span>(
        path,
        queryParameters: queryParams,
      );
    } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
      _handleError(e);
      <span class="hljs-keyword">rethrow</span>;
    }
  }
  
  <span class="hljs-comment">// POST è¯·æ±‚</span>
  Future&lt;Response&gt; post(<span class="hljs-built_in">String</span> path, {<span class="hljs-built_in">dynamic</span> data}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _dio.post(path, data: data);
    } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
      _handleError(e);
      <span class="hljs-keyword">rethrow</span>;
    }
  }
  
  <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
  <span class="hljs-keyword">void</span> _handleError(DioException e) {
    <span class="hljs-keyword">switch</span> (e.type) {
      <span class="hljs-keyword">case</span> DioExceptionType.connectionTimeout:
        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'è¿æ¥è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>);
      <span class="hljs-keyword">case</span> DioExceptionType.badResponse:
        <span class="hljs-keyword">if</span> (e.response?.statusCode == <span class="hljs-number">401</span>) {
          <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'èº«ä»½éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.response?.statusCode == <span class="hljs-number">404</span>) {
          <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯: <span class="hljs-subst">${e.response?.statusCode}</span>'</span>);
        }
      <span class="hljs-keyword">case</span> DioExceptionType.connectionError:
        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®'</span>);
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'ç½‘ç»œè¯·æ±‚å¤±è´¥: <span class="hljs-subst">${e.message}</span>'</span>);
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">final</span> http = HttpService();
User user = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/user/1'</span>);
</code></pre>
<h3 data-id="heading-26">8.2 ç»“åˆçŠ¶æ€ç®¡ç†çš„å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// api_service.dart</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApiService</span> </span>{
  <span class="hljs-keyword">final</span> Dio _dio;
  
  ApiService({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> baseUrl}) 
    : _dio = Dio(BaseOptions(baseUrl: baseUrl)) {
    _setupInterceptors();
  }
  
  <span class="hljs-keyword">void</span> _setupInterceptors() {
    _dio.interceptors.add(InterceptorsWrapper(
      onRequest: (options, handler) {
        <span class="hljs-comment">// ä»æœ¬åœ°å­˜å‚¨è·å–token</span>
        <span class="hljs-keyword">final</span> token = StorageService().getToken();
        <span class="hljs-keyword">if</span> (token != <span class="hljs-keyword">null</span>) {
          options.headers[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-string">'Bearer <span class="hljs-subst">$token</span>'</span>;
        }
        <span class="hljs-keyword">return</span> handler.next(options);
      },
    ));
  }
  
  Future&lt;T&gt; request&lt;T&gt;(
    <span class="hljs-built_in">String</span> path, {
    <span class="hljs-built_in">String</span> method = <span class="hljs-string">'GET'</span>,
    <span class="hljs-built_in">dynamic</span> data,
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParameters,
    CancelToken? cancelToken,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> _dio.request(
        path,
        data: data,
        queryParameters: queryParameters,
        options: Options(method: method),
        cancelToken: cancelToken,
      );
      
      <span class="hljs-comment">// ä½¿ç”¨ json_serializable è§£ææ•°æ®</span>
      <span class="hljs-keyword">return</span> _parseResponse&lt;T&gt;(response.data);
    } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">throw</span> ApiException.fromDioException(e);
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ GetX æ§åˆ¶å™¨è°ƒç”¨</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>{
  <span class="hljs-keyword">final</span> ApiService apiService;
  <span class="hljs-keyword">var</span> users = &lt;User&gt;[].obs;
  <span class="hljs-keyword">var</span> isLoading = <span class="hljs-keyword">false</span>.obs;
  
  UserController(<span class="hljs-keyword">this</span>.apiService);
  
  Future&lt;<span class="hljs-keyword">void</span>&gt; fetchUsers() <span class="hljs-keyword">async</span> {
    isLoading.value = <span class="hljs-keyword">true</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> userList = <span class="hljs-keyword">await</span> apiService.request&lt;<span class="hljs-built_in">List</span>&lt;User&gt;&gt;(<span class="hljs-string">'/users'</span>);
      users.assignAll(userList);
    } <span class="hljs-keyword">on</span> ApiException <span class="hljs-keyword">catch</span> (e) {
      Get.snackbar(<span class="hljs-string">'é”™è¯¯'</span>, e.message);
    } <span class="hljs-keyword">finally</span> {
      isLoading.value = <span class="hljs-keyword">false</span>;
    }
  }
}
</code></pre>
<h2 data-id="heading-27">9. æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šåœ¨æ•´ä¸ªåº”ç”¨ä¸­ä½¿ç”¨å•ä¸ª Dio å®ä¾‹ï¼Œç¡®ä¿é…ç½®ä¸€è‡´</li>
<li><strong>ç¯å¢ƒåŒºåˆ†</strong>ï¼šä¸ºå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®ä¸åŒçš„ baseURL</li>
<li><strong>å®‰å…¨å­˜å‚¨</strong>ï¼šæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API Keysï¼‰ä¸è¦ç¡¬ç¼–ç åœ¨ä»£ç ä¸­</li>
<li><strong>è¯ä¹¦éªŒè¯</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸è¦å¿½ç•¥ SSL è¯ä¹¦éªŒè¯</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šåŠæ—¶å–æ¶ˆä¸å†éœ€è¦çš„è¯·æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡µé¢é”€æ¯æ—¶</li>
<li><strong>é”™è¯¯é‡è¯•</strong>ï¼šå¯¹ç‰¹å®šé”™è¯¯ï¼ˆå¦‚ç½‘ç»œæ³¢åŠ¨ï¼‰å®ç°é‡è¯•æœºåˆ¶</li>
<li><strong>å“åº”ç¼“å­˜</strong>ï¼šå¯¹ä¸å¸¸å˜çš„æ•°æ®å®ç°ç¼“å­˜ç­–ç•¥ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚</li>
<li><strong>è¿›åº¦åé¦ˆ</strong>ï¼šé•¿æ—¶é—´æ“ä½œï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰æä¾›è¿›åº¦æç¤º</li>
</ol>
<h2 data-id="heading-28">10. æ‰©å±•èµ„æº</h2>
<ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fdio" target="_blank" title="https://pub.dev/packages/dio" ref="nofollow noopener noreferrer">pub.dev/packages/diâ€¦</a></li>
<li><strong>GitHubä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcfug%2Fdio" target="_blank" title="https://github.com/cfug/dio" ref="nofollow noopener noreferrer">github.com/cfug/dio</a></li>
<li><strong>Awesome Dio</strong>ï¼šå®˜æ–¹ç»´æŠ¤çš„æ’ä»¶å’Œå·¥å…·åˆ—è¡¨</li>
<li><strong>JSONåºåˆ—åŒ–</strong>ï¼šé…åˆ <code>json_serializable</code> å¤„ç†å¤æ‚æ•°æ®ç»“æ„</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä¸ GetXã€Providerã€Riverpod ç­‰çŠ¶æ€ç®¡ç†åº“ç»“åˆä½¿ç”¨</li>
</ul>
<hr/>
<p>è¿™ä»½æ•™ç¨‹æ¶µç›–äº† Dio çš„æ ¸å¿ƒåŠŸèƒ½å’Œå®é™…åº”ç”¨åœºæ™¯ã€‚å»ºè®®ä»åŸºç¡€è¯·æ±‚å¼€å§‹ï¼Œé€æ­¥æŒæ¡æ‹¦æˆªå™¨ã€é”™è¯¯å¤„ç†ç­‰é«˜çº§ç‰¹æ€§ï¼Œæœ€åæ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œé€‚å½“çš„å°è£…ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†çš„å°è£…å¯ä»¥æ˜¾è‘—æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆ OpenAI Agents SDK]]></title>    <link>https://juejin.cn/post/7599330434426519603</link>    <guid>https://juejin.cn/post/7599330434426519603</guid>    <pubDate>2026-01-26T09:58:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599330434426519603" data-draft-id="7599101854644256778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆ OpenAI Agents SDK"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Agent,LLM"/> <meta itemprop="datePublished" content="2026-01-26T09:58:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å»å“ªå„¿æŠ€æœ¯æ²™é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/2251436075786791"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆ OpenAI Agents SDK
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2251436075786791/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å»å“ªå„¿æŠ€æœ¯æ²™é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T09:58:02.000Z" title="Mon Jan 26 2026 09:58:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€OpenAI Agents SDKæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>OpenAI Agents SDKæ˜¯ä¸€ä¸ªè½»é‡çº§ä¸”æ˜“äºä½¿ç”¨çš„å·¥å…·åŒ…ï¼Œç”¨äºæ„å»ºåŸºäºä»£ç†çš„AIåº”ç”¨ç¨‹åºã€‚ æä¾›äº†ä¸€äº›åŸºæœ¬æ„å»ºå—ï¼ŒåŒ…æ‹¬å…·å¤‡æŒ‡ä»¤å’Œå·¥å…·çš„ä»£ç†ï¼ˆAgentsï¼‰ã€ç”¨äºä»£ç†é—´ä»»åŠ¡å§”æ‰˜çš„äº¤æ¥ï¼ˆHandoffsï¼‰ä»¥åŠç”¨äºè¾“å…¥éªŒè¯çš„æŠ¤æ ï¼ˆGuardrailsï¼‰ã€‚</p>
<p>åœ¨å®˜ç½‘ä¸ŠOpenAIç»™å‡ºäº†ä¸¤ä¸ªç†ç”±ä½¿ç”¨å®ƒï¼Œè€Œä¸”ä¹Ÿä»‹ç»äº† Agent Loopã€Python-firstã€Handoffsã€Guardrails ã€Function tools å’Œ Tracing 6ä¸ªç‰¹æ€§ï¼Œå¯¹äºç°é˜¶æ®µçš„æˆ‘ä»¬å¯¹Python-first å’Œ Function tools å°±ä¸åšè¿‡å¤šçš„é˜è¿°äº†ï¼Œä½†æ˜¯å…¶ä»–çš„å››ä¸ªç‰¹æ€§è¿˜éœ€è¦è¿›ä¸€æ­¥è¯¦ç»†é˜è¿°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c23ab7ab7f0a49178ca8db0e140532a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=XyE5BRqKAP5pntxVIz0e4KYyh58%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>äºŒã€æ ¸å¿ƒç‰¹æ€§</strong></h2>
<h3 data-id="heading-2"><strong>ï¼ˆä¸€ï¼‰Agent Loopï¼ˆå¾ªç¯ï¼‰</strong></h3>
<p>æ”¯æŒåœ¨æ²¡æœ‰å®Œæˆä»»åŠ¡æ—¶è‡ªåŠ¨çš„å¾ªç¯agentçš„æ‰§è¡Œï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ç»“æŸï¼Œå¯ä»¥è°ƒç”¨functioncallï¼ŒMCPç­‰å·¥å…·æ¥æ›´å¥½çš„å®Œæˆä»»åŠ¡ã€‚å¯¹äºè®¸å¤šä¸šåŠ¡æµç¨‹æ¶‰åŠä¸€ç³»åˆ—éœ€è¦å¤–éƒ¨ä¿¡æ¯æˆ–æ“ä½œçš„æ­¥éª¤ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨ APIã€æ ¹æ®æŸ¥è¯¢ç»“æœç”ŸæˆæŠ¥å‘Šï¼‰ã€‚Agent Loop è‡ªåŠ¨åŒ–äº†è¿™ä¸ªè¿­ä»£è¿‡ç¨‹ï¼Œèƒ½å¤Ÿè‡ªä¸»å®Œæˆè¿™äº›å¤æ‚ã€å¤šæ­¥ä»»åŠ¡çš„æ™ºèƒ½ä½“æˆä¸ºå¯èƒ½ã€‚</p>
<h3 data-id="heading-3">ï¼ˆäºŒï¼‰Handoffsï¼ˆäº¤æ¥ï¼‰</h3>
<p>äº¤æ¥çš„å‡ºç°å…è®¸ä¸€ä¸ªæ™ºèƒ½ä½“ï¼ˆAgentï¼‰å°†ç‰¹å®šä»»åŠ¡å§”æ‰˜ç»™å¦ä¸€ä¸ªæ™ºèƒ½ä½“æ¥å®Œæˆï¼Œæ˜¯ç”¨äºåœ¨å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´è¿›è¡Œåè°ƒå’Œå§”æ‰˜ã€‚å®ç°äº†å¤æ‚å·¥ä½œæµå’Œå¤šæ™ºèƒ½ä½“åä½œçš„å…³é”®æœºåˆ¶ã€‚åœ¨å¤§å‹ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå•ä¸€æ™ºèƒ½ä½“å¯èƒ½éš¾ä»¥å¤„ç†æ‰€æœ‰ç±»å‹çš„ä»»åŠ¡ã€‚é€šè¿‡ Handoffsï¼Œå¯ä»¥è®¾è®¡ç”±å¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“ç»„æˆçš„ç³»ç»Ÿï¼Œæ¯ä¸ªæ™ºèƒ½ä½“è´Ÿè´£å…¶æ“…é•¿çš„é¢†åŸŸï¼›å°†å¤æ‚ä¸šåŠ¡æµç¨‹åˆ†è§£åˆ°ä¸åŒçš„æ™ºèƒ½ä½“ä¸­ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ¨¡å—åŒ–ï¼Œä½¿å¾—æ¯ä¸ªæ™ºèƒ½ä½“æ›´å®¹æ˜“å¼€å‘ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚</p>
<p>ä¾‹å¦‚åœ¨é…’åº—ä¸šåŠ¡ä¸­ï¼Œæœ‰äº›é—®é¢˜éœ€è¦å¤šä¸ªä¸šåŠ¡æ–¹åˆä½œæ‰èƒ½å®Œæˆï¼Œé‚£ä¹ˆä¸åŒä¸šåŠ¡åŸŸå¯ä»¥ç»´æŠ¤è‡ªå·±çš„agentï¼Œä»å…¥å£ç¡®å®šæ˜¯ä¸šåŠ¡èŒƒå›´ï¼Œæ¶‰åŠåˆ°å¤šä¸ªæ™ºèƒ½ä½“äº¤äº’æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨Handoffå®Œæˆäº¤æ¥ï¼Œæ›´åŠ å‡†ç¡®çš„ç»™å‡ºé—®é¢˜çš„è§£å†³æ€è·¯å’Œæ–¹æ¡ˆï¼Œç”šè‡³æ˜¯è§£å†³é—®é¢˜ã€‚</p>
<h3 data-id="heading-4"><strong>ï¼ˆä¸‰ï¼‰Guardrailsï¼ˆæŠ¤æ ï¼‰</strong></h3>
<p>è¿™ä¸ªå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³ä¸ç¡®å®šæ€§ã€‚Guardrails ç”¨äºéªŒè¯æ™ºèƒ½ä½“è¾“å…¥çš„èƒ½åŠ›ï¼Œå®ƒä»¬å¯ä»¥åœ¨æ™ºèƒ½ä½“è¿è¡Œä¹‹å‰å¹¶è¡Œæ‰§è¡Œè¾“å…¥éªŒè¯å’Œæ£€æŸ¥ã€‚å¦‚æœæ£€æŸ¥å¤±è´¥ï¼ŒGuardrails å¯ä»¥è®©åº”ç”¨å¿«é€Ÿä¸­æ­¢ï¼ˆbreaking earlyï¼‰ã€‚è¿™æœ‰åŠ©äºç¡®ä¿åº”ç”¨çš„å¯é æ€§ï¼Œé˜²æ­¢å› ä¸å½“è¾“å…¥å¯¼è‡´çš„é”™è¯¯è¡Œä¸ºã€‚</p>
<p>å¯¹äºç°åœ¨å¤§æ¨¡å‹çš„äº§ç”Ÿï¼Œæˆ‘ä»¬éƒ½å—ç›Šäºå¤§æ¨¡å‹å¸¦æ¥çš„ç”Ÿäº§åŠ›æé«˜ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›ä¸ç¡®å®šæ€§ï¼Œä¸æˆ‘ä»¬çš„æœŸæœ›æœ‰æ‰€åå·®ï¼Œéšç€guardrailsçš„å‡ºç°ï¼Œå°±åƒæ˜¯ä¸€ä¸ªå®¶æ•™åœ¨è¾…å¯¼å­¦ç”Ÿä½œä¸šä¸€æ ·ï¼Œæ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè€å¸ˆéƒ½ä¼šç»™å‡ºä¸€ä¸ªåé¦ˆã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿä¸­Guardrailså¯ä»¥æå‡æˆ‘ä»¬åº”ç”¨çš„å¯é æ€§å’Œé²æ£’æ€§ã€‚å¯¹äºä¸åˆæ³•æˆ–æ¶æ„è¾“å…¥å¯èƒ½å¯¼è‡´é”™è¯¯ã€å®‰å…¨æ¼æ´æˆ–æ„å¤–è¡Œä¸ºï¼ŒGuardrails é€šè¿‡å¼ºåˆ¶æ‰§è¡Œè¾“å…¥éªŒè¯ï¼Œç¡®ä¿æ™ºèƒ½ä½“åªå¤„ç†ç¬¦åˆé¢„æœŸçš„è¾“å…¥ï¼›è¿˜å¯ä»¥èŠ‚çœè®¡ç®—èµ„æºå’Œå‡å°‘æˆæœ¬ï¼Œå¦‚æœä¸ç¬¦åˆé¢„æœŸåœ¨æ™ºèƒ½ä½“è¿è¡ŒåˆæœŸå°±ä¼šåˆ¤åˆ«å’Œæ‹’ç»ï¼›ç¡®ä¿äº†ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘å’Œåˆè§„é—®é¢˜ã€‚</p>
<h3 data-id="heading-5"><strong><strong>ï¼ˆå››ï¼‰Tracingï¼ˆå¯è§†åŒ–è¿½è¸ªï¼‰</strong></strong></h3>
<p>åœ¨OpenAIçš„SDKä¸­å†…ç½®äº†Tracingèƒ½åŠ›ï¼Œå¯ä»¥å¾ˆç›´è§‚åœ°è§£è¯»Agentä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ä½“ï¼Œå“åº”äº‹ä»¶ç­‰çš„ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æ”¯æŒè¯„ä¼°ï¼ˆevaluateï¼‰å·¥ä½œæµç¨‹ï¼Œç”šè‡³å¯ä»¥ç”¨æ¥å¾®è°ƒï¼ˆfine-tuneï¼‰æ¨¡å‹ä»¥ä¼˜åŒ–åº”ç”¨çš„æ€§èƒ½ã€‚</p>
<p>åœ¨AgentåˆæœŸï¼Œå¯¹äºå‡ ä¹â€œé»‘ç›’â€ç³»ç»Ÿæ¥è¯´ï¼Œæˆ‘ä»¬çš„æŒæ§æ„Ÿå’Œä¿¡ä»»æ„Ÿä¼šç‰¹åˆ«çš„å¼±ï¼Œè€ŒTracingè¿™ä¸ªèƒ½åŠ›å°±ç»™æˆ‘ä»¬å¸¦æ¥ä¸€æŸâ€œæ›™å…‰â€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘é˜¶æ®µï¼Œæµ‹è¯•é˜¶æ®µç”šè‡³æ˜¯éƒ¨åˆ†çº¿ä¸Šåœºæ™¯å¯¹Agentè¿›è¡Œç›‘æ§å’Œå¯è§†åŒ–çš„è¿½è¸ªã€‚å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ï¼›é™¤æ­¤ä¹‹å¤–OpenAI çš„SDKä¸­è¿˜æ”¯æŒåŸºäºè¿½è¸ªæ•°æ®ï¼Œå¯ä»¥è¿›ä¸€æ­¥å¾®è°ƒæˆ–è’¸é¦æ¨¡å‹ï¼ŒæŒç»­ä¼˜åŒ–æ™ºèƒ½ä½“åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­çš„æ•ˆç‡å’Œæ•ˆæœï¼Œä¾‹å¦‚æé«˜å›å¤çš„å‡†ç¡®æ€§ã€å‡å°‘é”™è¯¯æ“ä½œã€‚</p>
<h2 data-id="heading-6"><strong>ä¸‰</strong>**ã€ä»£ç ç¤ºä¾‹**</h2>
<p>è¿™äº›ç‰¹æ€§æ¿€èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒï¼Œæœ¬ç€å¯¹çŸ¥è¯†çš„æ¸´æœ›ï¼Œå’±ä»¬è¿˜æ˜¯å›å½’åˆ°ä»£ç å®ç°ä¸Šï¼ä¸ºäº†å¿«é€Ÿå®ç°ï¼šæˆ‘ä»¬ä½¿ç”¨OpenAIçš„GPT-4oæ¨¡å‹ï¼ˆé»˜è®¤ï¼‰ã€‚</p>
<p>å‰æœŸå‡†å¤‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pip install openai-agents
<span class="hljs-comment"># or `uv add openai-agents`, etc</span>
<span class="hljs-comment"># è®¾ç½®è‡ªå·±çš„OpenAIKey</span>
export <span class="hljs-attr">OPENAI_API_KEY</span>=sk-...
</code></pre>
<h3 data-id="heading-7"><strong>ï¼ˆä¸€ï¼‰æœ€åˆå¤©æ°”æŸ¥è¯¢</strong></h3>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œç„¶åå†å¼€å§‹ä¸€ç‚¹ç‚¹çš„æŠŠæˆ‘ä»¬æƒ³è¦äº†è§£çš„ç‰¹æ€§èµ°ä¸€éã€‚ æˆ‘ä»¬å…ˆç”¨pythonå†™ä¸€ä¸ªç®€å•çš„agentï¼Œå¯ä»¥æŸ¥è¯¢å¤©æ°”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/583fc91a1f2f4703a4f8adea7e6e0ba2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=nsEejttvG%2FCJzaHtsE1YlUxtypk%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> Agent, Runner, function_tool
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-meta">@function_tool</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Fetch the weather for a given location.
     Args:
        city: The city to fetch the weather for.
    """</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"sunny"</span>

<span class="hljs-comment"># å¤©æ°”æŸ¥è¯¢Agent</span>
weather_agent = Agent(
                    name=<span class="hljs-string">"å¤©æ°”æŸ¥è¯¢ä¸“å®¶"</span>,
                     instructions=<span class="hljs-string">"ä½ æ˜¯å¤©æ°”æŸ¥è¯¢ä¸“å®¶ï¼Œç”¨æˆ·è¾“å…¥åŸå¸‚åï¼Œä½ è¿”å›è¯¥åŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚è¯·ç”¨ç®€æ´ä¸­æ–‡å›å¤ã€‚"</span>,
                    tools=[fetch_weather]
                    )

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    result = <span class="hljs-keyword">await</span> Runner.run(weather_agent, <span class="hljs-built_in">input</span>=<span class="hljs-string">"åŒ—äº¬"</span>)
    <span class="hljs-built_in">print</span>(result.final_output)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<p><strong>1ã€Agentå±æ€§è¯´æ˜</strong></p>
<p>æˆ‘ä»¬å¯ä»¥å‚è€ƒæºç ä¸­çš„ç»“æ„ï¼Œå‘ç°æœ‰å“ªäº›å±æ€§æˆ‘ä»¬å¯ä»¥è°ƒæ•´æˆ–è€…ä¿®æ”¹ï¼Œç†è®ºä¸Šé»˜è®¤å±æ€§å€¼åªèƒ½å¤Ÿæä¾›ç®€å•çš„ä½¿ç”¨ï¼Œå¦‚æœæ¶‰åŠåˆ°è‡ªå®šä¹‰çš„åŠŸèƒ½é‚£å°±éœ€è¦è°ƒæ•´æ›´å¤šçš„å‚æ•°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc9dd122200645c4896dbe95b65ccd81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=pIQ8w1vBkbeNmU3Jyc1ZTfNOQqI%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>instructionsï¼š<strong>ä½¿ç”¨</strong>instructions</strong>å±æ€§æŒ‡å®šå½“å‰agentçš„ç³»ç»Ÿæç¤ºè¯ã€‚å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯Agentç”Ÿæˆçš„åŠ¨æ€æŒ‡ä»¤ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†é€šè¿‡ä¸Šä¸‹æ–‡å’Œä»£ç†å®ä¾‹è°ƒç”¨ï¼Œä½†æ˜¯å¿…é¡»è¿”å›å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p><strong>name</strong>ï¼šæ™ºèƒ½ä½“çš„åå­—</p>
</li>
<li>
<p>**toolsï¼š**æ™ºèƒ½ä½“å¯ä»¥ä½¿ç”¨å·¥å…·åˆ—è¡¨</p>
</li>
<li>
<p>**handoff_descriptionï¼š**æ™ºèƒ½ä½“çš„äº¤æ¥è¯´æ˜ï¼Œä¸»è¦ç”¨äºå¤šä¸ªæ™ºèƒ½ä½“è¿›è¡Œäº¤æ¥æ—¶ï¼Œè®©å¤§æ¨¡å‹äº†è§£è¿™ä¸ªæ™ºèƒ½ä½“èƒ½åšä»€ä¹ˆï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™è°ƒç”¨ä»–</p>
</li>
<li>
<p>**handoffsï¼š**agentå¯ä»¥å§”æ´¾ä»»åŠ¡çš„å­agentã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ª handoffs çš„åˆ—è¡¨ï¼Œä»£ç†åœ¨é€‚å½“çš„æƒ…å†µä¸‹å¯ä»¥é€‰æ‹©å°†ä»»åŠ¡å§”æ´¾ç»™å®ƒä»¬ã€‚è¿™æ ·å¯ä»¥å®ç°èŒè´£åˆ†ç¦»å’Œæ¨¡å—åŒ–è®¾è®¡ã€‚</p>
</li>
<li>
<p>**modelï¼š**å¯ä»¥é…ç½®modelï¼Œé»˜è®¤æ˜¯gpt4o</p>
</li>
<li>
<p>**hooksï¼š**æ¥æ”¶æ­¤ä»£ç†çš„å„ç§ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„å›è°ƒçš„ç±»ã€‚</p>
</li>
<li>
<p>**mcp_servers:**agentå¯ä»¥ä½¿ç”¨çš„æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP)æœåŠ¡å™¨åˆ—è¡¨ã€‚æ¯æ¬¡ä»£ç†è¿è¡Œæ—¶ï¼Œå®ƒéƒ½ä¼šå°†è¿™äº›æœåŠ¡å™¨ä¸­çš„å·¥å…·æ·»åŠ åˆ°å¯ç”¨å·¥å…·åˆ—è¡¨ä¸­ã€‚</p>
</li>
<li>
<p><strong>output_guardrails</strong>: ç”Ÿæˆå“åº”åï¼Œå¯¹ä»£ç†çš„æœ€ç»ˆè¾“å‡ºè¿è¡Œçš„æ£€æŸ¥åˆ—è¡¨ã€‚ä»…å½“ä»£ç†ç”Ÿæˆæœ€ç»ˆè¾“å‡ºæ—¶è¿è¡Œã€‚</p>
</li>
<li>
<p><strong>input_guardrails</strong>: åœ¨ç”Ÿæˆå“åº”ä¹‹å‰ï¼Œä¸ä»£ç†æ‰§è¡Œå¹¶è¡Œè¿è¡Œçš„æ£€æŸ¥åˆ—è¡¨ã€‚ä»…å½“ä»£ç†æ˜¯é“¾ä¸­çš„ç¬¬ä¸€ä¸ªä»£ç†æ—¶è¿è¡Œã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">**ï¼ˆäºŒï¼‰**<strong>å¤šä¸ªAgent</strong></h3>
<p>ç°åœ¨å¼€å§‹æ„å»ºå¤šä¸ªAgentç”¨æ¥è§‚å¯Ÿåé¢çš„æ–°ç‰¹æ€§ï¼Œä¾‹å¦‚æœ¬æ®µä»£ç ç¤ºä¾‹ä¸ºä¸€ä¸ªâ€œå¤©æ°”ä¸“å®¶â€å†åŠ ä¸Šä¸€ä¸ªâ€œç©¿è¡£ä¸“å®¶â€ä¸¤ä¸ªAgentï¼Œå›ç­”ç”¨æˆ·çš„å…³äºç©¿è¡£æœçš„ä¸€äº›å›ç­”ã€‚ ä¸¤ä¸ªagentä¹‹é—´â€œç©¿è¡£ä¸“å®¶â€ ä½¿ç”¨ â€œå¤©æ°”ä¸“å®¶â€ç»™å‡ºçš„å¤©æ°”ä¿¡æ¯è¿›è¡Œæ€»ç»“å¤©æ°”å› ç´ ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¸¤ä¸ªä¸“å®¶çš„â€œäº¤æ¥â€ï¼Œæœ€ç»ˆç»™å‡ºå¯¹åº”ç©¿è¡£é£æ ¼æ­é…å»ºè®®ã€‚ï¼ˆåé¢çš„tracingæ¨¡å—ä¼šå¯¹äº¤äº’ç»†èŠ‚è¿›è¡Œé˜è¿°ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66e09e13caa9434dbe7aebc04e71c848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=1YytP6CvLUaj4TYGXOKRSjUvUwc%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> Agent, Runner, function_tool
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-meta">@function_tool</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Fetch the weather for a given location.

    Args:
        location: The location to fetch the weather for.
    """</span>
    <span class="hljs-comment"># In real life, we'd fetch the weather from a weather API</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"sunny"</span>
<span class="hljs-comment"># å¤©æ°”æŸ¥è¯¢Agent</span>
weather_agent = Agent(
                    name=<span class="hljs-string">"å¤©æ°”æŸ¥è¯¢ä¸“å®¶"</span>,
                    instructions=<span class="hljs-string">"ä½ æ˜¯å¤©æ°”æŸ¥è¯¢ä¸“å®¶ï¼Œç”¨æˆ·è¾“å…¥åŸå¸‚åï¼Œä½ è¿”å›è¯¥åŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚è¯·ç”¨ç®€æ´ä¸­æ–‡å›å¤ã€‚"</span>,
                    tools=[fetch_weather]
                    )
â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<h3 data-id="heading-9">ï¼ˆä¸‰ï¼‰æ·»åŠ æŠ¤æ ï¼ˆinput_guardrailsï¼‰</h3>
<p>ç°åœ¨å·²ç»æœ‰äº†ä¸¤ä¸ªâ€œä¸“å®¶â€ï¼Œå¹¶ä¸”â€œä¸“å®¶â€ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿå·²ç»å£°æ˜äº†ï¼Œå¼€å§‹æ­å»ºä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œä¿éšœæ•´ä¸ªé¡¹ç›®çš„â€œç¡®å®šæ€§â€ï¼Œå°±æ˜¯å¼•å…¥â€œæŠ¤æ â€ï¼ˆguardrailsï¼‰ï¼Œä¸ºäº†æ¼”ç¤ºè¿™é‡Œä½¿ç”¨çš„æ˜¯è¾“å…¥â€œæŠ¤æ â€ï¼Œä¿éšœæ•´ä¸ªåŠŸèƒ½åªèšç„¦åœ¨ç©¿è¡£ç›¸å…³çš„é—®é¢˜ä¸Šã€‚é‡ç‚¹çœ‹â€œ<strong>guardrail_agent</strong>â€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> Agent, GuardrailFunctionOutput, InputGuardrail, Runner, function_tool
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DressOutput</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    is_dressing: <span class="hljs-built_in">bool</span>
    reasoning: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># Guardrailèšç„¦ç©¿è¡£å»ºè®®</span>
guardrail_agent = Agent(
    name=<span class="hljs-string">"Guardrail check"</span>,
    instructions=(<span class="hljs-string">"è¯·åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦å›´ç»•ç”¨æˆ·ç©¿è¡£å»ºè®®ç›¸å…³å†…å®¹,å¦‚æœé—®é¢˜å±äºä¸Šè¿°å†…å®¹ï¼Œè¯·è¿”å› is_dressing=Trueï¼Œå¹¶ç®€è¦è¯´æ˜ç†ç”±ã€‚"</span>),
    output_type=DressOutput,
)


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p>ç¬¦åˆæŠ¤æ è¾“å…¥çš„è¦æ±‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">----

Guardrail result: RunResult:
- Last agent: <span class="hljs-built_in">Agent</span>(name=<span class="hljs-string">"Guardrail check"</span>, ...)
- Final output (DressOutput):
    {
      "is_dressing": true,
      <span class="hljs-string">"reasoning"</span>: <span class="hljs-string">"ç”¨æˆ·è¯¢é—®å…³äºåœ¨åŒ—äº¬ç©¿ç€å¼‚åŸŸé£æ ¼è¡£æœçš„æ­é…å»ºè®®ï¼Œæ¶‰åŠç©¿è¡£æ­é…é—®é¢˜ã€‚"</span>
    }
- <span class="hljs-number">1</span> new <span class="hljs-built_in">item</span>(s)
- <span class="hljs-number">1</span> raw <span class="hljs-built_in">response</span>(s)
- <span class="hljs-number">0</span> <span class="hljs-selector-tag">input</span> guardrail <span class="hljs-built_in">result</span>(s)
- <span class="hljs-number">0</span> output guardrail <span class="hljs-built_in">result</span>(s)
(See `RunResult` for more details)
åœ¨åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ˜¯æ™´å¤©ï¼Œæ¸©åº¦çº¦<span class="hljs-number">20</span>åº¦ï¼Œæ¯”è¾ƒèˆ’é€‚ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹å¼‚åŸŸé£æ ¼çš„æ­é…ï¼š

<span class="hljs-number">1</span>. **æ³¢è¥¿ç±³äºšé£**:
   - ä¸Šè¡£ï¼šæµè‹æˆ–å°èŠ±è¡¬è¡«
   - ä¸‹è£…ï¼šé•¿è£™æˆ–é˜”è…¿è£¤
   - é…é¥°ï¼šå¤§é¡¹é“¾ã€è€³ç¯å’Œå®½æªå¸½


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p>åœ¨æŠ¤æ ä¸­ä¹Ÿå¯ä»¥è®¾ç½®"<strong>tripwire_triggered</strong>"å‚æ•°æ¥æ§åˆ¶æµç¨‹è¦ä¸è¦ç»ˆç«¯ï¼Œå¯ä»¥çœ‹å…·ä½“çš„è¿”å›ç»“æœï¼š</p>
<p>ä¸ç»ˆæ­¢ä»»åŠ¡ï¼Œå›ç­”ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">async def <span class="hljs-selector-tag">main</span>():
    result = await Runner.<span class="hljs-built_in">run</span>(dressing_agent, input=<span class="hljs-string">"ä¸Šæµ·å¤©æ°”å¦‚ä½•"</span>)
    <span class="hljs-built_in">print</span>(result.final_output)

-----

Guardrail result: RunResult:
- Last agent: <span class="hljs-built_in">Agent</span>(name=<span class="hljs-string">"Guardrail check"</span>, ...)
- Final output (DressOutput):
    {
      "is_dressing": false,
      <span class="hljs-string">"reasoning"</span>: <span class="hljs-string">"ç”¨æˆ·è¯¢é—®çš„æ˜¯ä¸Šæµ·çš„å¤©æ°”çŠ¶å†µï¼Œä¸ç©¿è¡£å»ºè®®æ— ç›´æ¥å…³è”ã€‚"</span>
    }
- <span class="hljs-number">1</span> new <span class="hljs-built_in">item</span>(s)
- <span class="hljs-number">1</span> raw <span class="hljs-built_in">response</span>(s)
- <span class="hljs-number">0</span> <span class="hljs-selector-tag">input</span> guardrail <span class="hljs-built_in">result</span>(s)
- <span class="hljs-number">0</span> output guardrail <span class="hljs-built_in">result</span>(s)
(See `RunResult` for more details)
ä¸Šæµ·ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦ä¸º<span class="hljs-number">20</span>åº¦ï¼Œæ¹¿åº¦<span class="hljs-number">50%</span>ï¼Œä¸œå—é£<span class="hljs-number">2</span>çº§ã€‚
<span class="hljs-selector-attr">[non-fatal]</span> Tracing: request failed: _ssl.c:<span class="hljs-number">989</span>: The handshake operation timed o
</code></pre>
<p>ç»ˆæ­¢ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">async def dress_guardrail(ctx, agent, input_data):
    <span class="hljs-attr">result</span> = await Runner.run(guardrail_agent, input_data, context=ctx.context)
    <span class="hljs-attr">final_output</span> = result.final_output_as(DressOutput)
    print("Guardrail result:", result)
    <span class="hljs-comment"># ä¸å†æŠ›å¼‚å¸¸ï¼Œç›´æ¥è¿”å›åˆ¤æ–­ç»“æœ</span>
    return GuardrailFunctionOutput(
        <span class="hljs-attr">output_info</span>=final_output,
        <span class="hljs-comment"># tripwire_triggered=False,  # ä¸è§¦å‘ç»ˆæ­¢</span>
        <span class="hljs-attr">tripwire_triggered</span>=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># è§¦å‘ç»ˆæ­¢</span>
    )

----

Guardrail result: RunResult:
- Last agent: Agent(<span class="hljs-attr">name</span>=<span class="hljs-string">"Guardrail check"</span>, ...)
- Final output (DressOutput):
    {
      "is_dressing": false,
      "reasoning": "ç”¨æˆ·çš„é—®é¢˜ä¸å½“å‰å¤©æ°”æƒ…å†µæœ‰å…³ï¼Œè€Œä¸æ˜¯å…³äºç©¿è¡£å»ºè®®çš„è¯·æ±‚ã€‚"
    }


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<h3 data-id="heading-10"><strong>ï¼ˆå››ï¼‰Tracing</strong></h3>
<p>OpenAIçš„SDKé»˜è®¤å¼€å¯äº†TracingåŠŸèƒ½ï¼Œå¯ä»¥æ”¯æŒæ‰‹åŠ¨å…³é—­ï¼Œä»¥æ»¡è¶³ç‰¹å®šåœºæ™¯ä¸‹çš„éšç§æˆ–èµ„æºéœ€æ±‚ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> 
set_tracing_disabledset_tracing_disabled(<span class="hljs-literal">True</span>)
</code></pre>
<p><strong>1ã€å®˜æ–¹å±•ç¤º</strong></p>
<p>è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Ftraces" target="_blank" title="https://platform.openai.com/traces" ref="nofollow noopener noreferrer">platform.openai.com/traces</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e991336cbf94e779059675a8dfbde52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=yGUR2OHeom%2FFxe0kiN5uvhBN2cQ%3D" alt="" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰å¤šagent+äº¤æ¥</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78c6f62927ac452fb2ca5fb5444ed51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=bfJoZHiExWUDTTeqT2MOCnlMZn8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddc15fb5a4344ead86fd3b7b13532942~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=1%2FU3wD9RB3zVlxxvsN38Q%2B%2Ftt9Y%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da6768b8f055493da69856e5a440cbd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=Afl1A66Ywnnyl75QfuxtEPz3Uzk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6d974059df2443ba2c30a79fd88633a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=nxaqcOMt711VH9olIQfdi1GEcKo%3D" alt="" loading="lazy"/></p>
<p>äº¤äº’å¯ä»¥å¾ˆå¥½çš„çœ‹æ¸…æ¥šå¯¹åº”tokenæ¶ˆè€—ï¼Œå…¥å‚å’Œç³»ç»Ÿæç¤ºè¯ä»¥åŠå¯¹åº”functioncallï¼Œä¸¤ä¸ªagentäº¤æ¥å±•ç¤ºä¹Ÿæ˜¯functioncallï¼Œæ—¶é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å­˜åœ¨2ç‚¹å±•ç¤ºä¸å¤ªå¥½ï¼š</p>
<p>â‘ äº¤æ¥æ—¶ ä¸Šä¸‹æ–‡å±•ç¤º</p>
<p>â‘¡äº¤æ¥æ—¶ tokenæœ‰æ²¡æœ‰æ¶ˆè€—</p>
<p>ï¼ˆ2ï¼‰æ·»åŠ æŠ¤æ å¯¹åº”çš„Tracing</p>
<p>å¯ä»¥çœ‹å‡ºä½¿ç”¨æŠ¤æ è¾“å…¥æ‹¦æˆªåtokenå¯ä»¥èŠ‚çœï¼Œæµç¨‹å¯ä»¥æå‰ç»ˆæ­¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c084a18bc53432e87788d01b91fa447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=qvSzDArC%2B741nhMEuZ1Oi7Pughg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/127d58533bf748918dc5c7d11c453d65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=5mC651HJ%2BYPXO5qHUAN6cqqnL0I%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€è‡ªå·±æœ¬åœ°</strong></p>
<p>æœ‰ä¸€äº›ä¿¡æ¯å±äºæ•æ„Ÿä¿¡æ¯è´¸ç„¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¼šå¯¹æ•°æ®å®‰å…¨å’Œæµç¨‹è§„èŒƒé€ æˆæŒ‘æˆ˜ã€‚å› æ­¤OpenAIçš„SDKæ”¯æŒå¤šç§è§£å†³æ–¹æ¡ˆï¼š</p>
<p>â‘ å…³é—­TracingåŠŸèƒ½</p>
<p>â‘¡è‡ªå·±æ­å»ºTracingå¹³å°ã€‚è¿™é‡Œæ¼”ç¤ºæœ¬åœ°è¿è¡Œ</p>
<p>mlflowç”¨æ¥è®°å½•</p>
<p>â‘¢å¯¹æ•æ„Ÿæ•°æ®æˆ–è€…èŠ‚ç‚¹å…³é—­tracingã€‚ RunConfig.trace_include_sensitive_data</p>
<p>ï¼ˆ1ï¼‰å®‰è£…mlflowä¾èµ–</p>
<pre><code class="hljs language-python" lang="python">pip install mlflow
<span class="hljs-comment"># å¯åŠ¨æœåŠ¡ å¹¶ä¸”åœ¨æœ¬åœ°ä½¿ç”¨sqlliteå­˜å‚¨</span>
mlflow server --host <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> --port <span class="hljs-number">8080</span> --backend-store-uri sqlite:///mlruns.db

<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> Agent, GuardrailFunctionOutput, InputGuardrail, Runner, function_tool
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">import</span> mlflow
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

mlflow.openai.autolog()
mlflow.set_tracking_uri(<span class="hljs-string">"http://localhost:8080"</span>)
mlflow.set_experiment(<span class="hljs-string">"weather"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DressOutput</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    is_dressing: <span class="hljs-built_in">bool</span>
    reasoning: <span class="hljs-built_in">str</span>
<span class="hljs-comment"># Guardrailèšç„¦ç©¿è¡£å»ºè®®</span>
guardrail_agent = Agent(
    name=<span class="hljs-string">"Guardrail check"</span>,
    instructions=(<span class="hljs-string">"è¯·åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦å›´ç»•ç”¨æˆ·ç©¿è¡£å»ºè®®ç›¸å…³å†…å®¹,å¦‚æœé—®é¢˜å±äºä¸Šè¿°å†…å®¹ï¼Œè¯·è¿”å› is_dressing=Trueï¼Œå¹¶ç®€è¦è¯´æ˜ç†ç”±ã€‚"</span>),
    output_type=DressOutput,
)


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07a7b630eff942d1bb80b49f14b12239~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=xiB8FWiObdUOPR1Obg2nB0KguMM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0077b1306fb346c9a7c5a3e6b07afe35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=SaxdOzrVD4vTPdMx%2F%2BWoIlWD%2BPg%3D" alt="" loading="lazy"/></p>
<p><strong>3ã€å¯¹æ¯”</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b779908c4634a6092de10a9034ee1b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=HIq9K%2F%2B3s1IpBbNMSid6PUGoh1k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>ï¼ˆäº”ï¼‰MCPä½¿ç”¨</strong></h3>
<p>ä»‹ç»å®Œä¸€äº›åŸºç¡€çš„ç”¨æ³•åï¼Œæˆ‘ä»¬çœ‹ä¸‹æœ€è¿‘æ¯”è¾ƒç«çš„MCPçš„æ¥å…¥å®ç°ã€‚éœ€è¦å†åœ¨é¡¹ç›®ä¸­æ’å…¥MCPçš„å®šä¹‰ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨é«˜å¾·çš„MCPè¿›è¡Œæ¼”ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/438964b0ce93457fb8d11418177e93ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=m3wEIYe3mlL3ia4Gz%2FOLqIelrpc%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> agents <span class="hljs-keyword">import</span> Agent, GuardrailFunctionOutput, InputGuardrail, Runner, function_tool
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> agents.mcp.server <span class="hljs-keyword">import</span> MCPServerStdio

<span class="hljs-keyword">import</span> mlflow
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-comment"># mlflow.openai.autolog()</span>
<span class="hljs-comment"># mlflow.set_tracking_uri("http://localhost:8080")</span>
<span class="hljs-comment"># mlflow.set_experiment("weather")</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DressOutput</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    is_dressing: <span class="hljs-built_in">bool</span>
    reasoning: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># Guardrailèšç„¦ç©¿è¡£å»ºè®®</span>
guardrail_agent = Agent(
    name=<span class="hljs-string">"Guardrail check"</span>,
    instructions=(<span class="hljs-string">"è¯·åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦å›´ç»•ç”¨æˆ·ç©¿è¡£å»ºè®®ç›¸å…³å†…å®¹,å¦‚æœé—®é¢˜å±äºä¸Šè¿°å†…å®¹ï¼Œè¯·è¿”å› is_dressing=Trueï¼Œå¹¶ç®€è¦è¯´æ˜ç†ç”±ã€‚"</span>),


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p>OpenAI Agents SDä»£ç ç¤ºä¾‹åˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å°è¯•ä½¿ç”¨Deepseekæ›¿æ¢ä¸€ä¸‹æ¨¡å‹çœ‹çœ‹æ•ˆæœï¼ˆpsï¼šdeepseekè¿˜ä¸æ”¯æŒ openaiåè®®çš„Json æ¨¡ç‰ˆè¾“å‡ºï¼Œæ‰€ä»¥éœ€è¦åšäº›æ”¹é€ ï¼‰ã€‚</p>
<h2 data-id="heading-12"><strong>å››ã€æ¡†æ¶å¯¹æ¯”</strong></h2>
<p>ç›®å‰å¸‚é¢ä¸Šå¯¹äºAgentæ™ºèƒ½ä½“çš„æ­å»ºæœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œæˆ‘è¿™é‡Œåªæ˜¯å¯¹OpenAI SDKè¿›è¡Œç®€çŸ­çš„ä»‹ç»å’Œä½¿ç”¨ã€‚æ¯”å¦‚å¸‚é¢ä¸Šæ¯”è¾ƒç«çš„æœ‰ å·¥ä½œæµæ­å»ºæ¡†æ¶ æˆ‘å¸çš„Qmosså¹³å°ã€å¼€æºçš„Difyã€n8nã€æ‰£å­ã€é£ä¹¦ ä»¥åŠå¯ä»¥å®šåˆ¶åŒ–å¼€å‘Langchainã€langchain4Jã€ langchain Graphã€LlamaIndexç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54e7c2f7a467479fbf396a6b64cf2a59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=OlsUhcqFI8bKqb9oaoL5PM5V9Js%3D" alt="" loading="lazy"/></p>
<p>LangGraph ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraph%2Fconcepts%2Fwhy-langgraph%2F" target="_blank" title="https://langchain-ai.github.io/langgraph/concepts/why-langgraph/" ref="nofollow noopener noreferrer">langchain-ai.github.io/langgraph/câ€¦</a></p>
<p>AutoGenä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmicrosoft.github.io%2Fautogen%2Fstable%2F%2Fuser-guide%2Fagentchat-user-guide%2Fquickstart.html" target="_blank" title="https://microsoft.github.io/autogen/stable//user-guide/agentchat-user-guide/quickstart.html" ref="nofollow noopener noreferrer">microsoft.github.io/autogen/staâ€¦</a></p>
<p>langchain4jä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain4j.dev%2F" target="_blank" title="https://docs.langchain4j.dev/" ref="nofollow noopener noreferrer">docs.langchain4j.dev/</a></p>
<p>å¯¹äºå¤šä¸ªAgentçš„äº¤äº’å’Œå®ç°ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹LangGraphçš„ç®€å•ç¤ºä¾‹,LangGraph æœ‰ä¸¤ç§å¤šagnetçš„æ¨¡å‹ï¼Œå¤šæ¨¡å‹ä¹‹é—´ä¹Ÿæ˜¯ä½¿ç”¨â€œäº¤æ¥â€çš„æ–¹å¼ã€‚å¯¹äºlanggraphæ¥è¯´å¤šä¸ªagentæœ‰ä¸¤ç§æ¶æ„è®¾è®¡ï¼š</p>
<p>ä¸€æ˜¯ç›‘ç®¡æ¶æ„ï¼ˆSupervisorï¼‰ï¼šå„ä¸ªä»£ç†ç”±ä¸­å¤® Supervisor ä»£ç†åè°ƒã€‚ä¸»ç®¡æ§åˆ¶æ‰€æœ‰é€šä¿¡æµå’Œä»»åŠ¡å§”æ´¾ï¼Œæ ¹æ®å½“å‰ä¸Šä¸‹æ–‡å’Œä»»åŠ¡è¦æ±‚å†³å®šè°ƒç”¨å“ªä¸ªä»£ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d50a3c359bf04fb790eefe2dd0f44320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=HLjhlAf%2FH5EhakBsBqMamL%2BkT0w%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ä¸€ä¸ªæ˜¯é›†ç¾¤æ¶æ„ï¼ˆSwarmï¼‰ï¼šå„ä¸ªAgentæ ¹æ®å…¶ä¸“é•¿åŠ¨æ€åœ°å°†æ§åˆ¶æƒç§»äº¤ç»™å½¼æ­¤ã€‚ç³»ç»Ÿä¼šè®°ä½æœ€åä¸€ä¸ªå¤„äºæ´»åŠ¨çŠ¶æ€çš„åº§å¸­ï¼Œç¡®ä¿åœ¨åç»­äº¤äº’ä¸­ï¼Œä¸è¯¥åº§å¸­çš„å¯¹è¯æ¢å¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb801a5f147b4a51931a49d409c773b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=bnQbtAPVXaFVdj%2Fn1WYPKTugGZM%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨LangGraphçš„Supervisoræ¶æ„æ¥å®ç°æˆ‘ä»¬ä¸Šé¢çš„â€œè¡£æœæ­é…â€demo(psï¼šä¸“å®¶çš„åå­—ä¸­æ–‡ä¼šæŠ¥é”™)ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39203def36ec4a8e8542c3ef26fd0401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y675ZOq5YS_5oqA5pyv5rKZ6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770026283&amp;x-signature=CGLUEdt3syNDCxVYkrOx%2Fv4WOJA%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¦–å…ˆå®‰è£…ä¾èµ–</span>
pip install -U langgraph <span class="hljs-string">"langchain[anthropic]"</span>
pip install langgraph-supervisor
</code></pre>
<p>ä½¿ç”¨æœ¬åœ°çš„mlflowè®°å½•AIäº¤äº’ä¿¡æ¯</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> create_react_agent
<span class="hljs-keyword">from</span> langgraph_supervisor <span class="hljs-keyword">import</span> create_supervisor
<span class="hljs-keyword">from</span> langchain_mcp_adapters.client <span class="hljs-keyword">import</span> MultiServerMCPClient
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display

<span class="hljs-keyword">import</span> mlflow

<span class="hljs-keyword">import</span> pretty_util

<span class="hljs-comment"># Enabling tracing for LangGraph (LangChain)</span>
mlflow.langchain.autolog()

<span class="hljs-comment"># Optional: Set a tracking URI and an experiment</span>
mlflow.set_tracking_uri(<span class="hljs-string">"http://localhost:8080"</span>)
mlflow.set_experiment(<span class="hljs-string">"LangGraph"</span>)


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰

<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> convert_to_messages

<span class="hljs-keyword">def</span> <span class="hljs-title function_">pretty_print_message</span>(<span class="hljs-params">message, indent=<span class="hljs-literal">False</span></span>):
    pretty_message = message.pretty_repr(html=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> indent:
        <span class="hljs-built_in">print</span>(pretty_message)
        <span class="hljs-keyword">return</span>

    indented = <span class="hljs-string">"\n"</span>.join(<span class="hljs-string">"\t"</span> + c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> pretty_message.split(<span class="hljs-string">"\n"</span>))
    <span class="hljs-built_in">print</span>(indented)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">pretty_print_messages</span>(<span class="hljs-params">update, last_message=<span class="hljs-literal">False</span></span>):
    is_subgraph = <span class="hljs-literal">False</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(update, <span class="hljs-built_in">tuple</span>):
        ns, update = update
        <span class="hljs-comment"># skip parent graph updates in the printouts</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(ns) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span>

        graph_id = ns[-<span class="hljs-number">1</span>].split(<span class="hljs-string">":"</span>)[<span class="hljs-number">0</span>]             


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p>è¿”å›ç»“æœå±•ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">================================ Human <span class="hljs-attr">Message</span> =================================

æˆ‘åœ¨åŒ—äº¬è¦å»ä¸Šæµ·æ—…è¡Œ3å¤©ï¼Œæƒ³å»æ™¯ç‚¹ï¼Œæ‹ç‚¹ç…§ç‰‡ã€‚
================================== Ai <span class="hljs-attr">Message</span> ==================================
Name: supervisor

ä¸ºäº†å¸®åŠ©æ‚¨è§„åˆ’è¿™æ¬¡åŒ—äº¬åˆ°ä¸Šæµ·çš„3å¤©æ—…è¡Œï¼Œæˆ‘å°†åè°ƒä»¥ä¸‹å‡ ä¸ªä¸“å®¶çš„å»ºè®®ï¼š

1. **å¤©æ°”ä¸“å®¶ï¼ˆweather_agentï¼‰** - æä¾›ä¸Šæµ·æœªæ¥å‡ å¤©çš„å¤©æ°”æƒ…å†µï¼Œä»¥ä¾¿æ‚¨é€‰æ‹©åˆé€‚çš„è¡£ç‰©ã€‚
2. **åœ°å›¾ä¸“å®¶ï¼ˆmap_agentï¼‰** - æ¨èä¸Šæµ·çš„æ™¯ç‚¹ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æ‹æ‘„ç¾ä¸½çš„ç…§ç‰‡ã€‚
3. **ç©¿è¡£ä¸“å®¶ï¼ˆdressing_agentï¼‰** - æ ¹æ®å¤©æ°”æƒ…å†µä¸ºæ‚¨æ¨èåˆé€‚çš„è£…æ‰®ã€‚

ç¨ç­‰ä¸€ä¸‹ï¼Œæˆ‘ä¼šå…ˆè°ƒç”¨å¤©æ°”ä¸“å®¶è·å–ä¸Šæµ·çš„å¤©æ°”æƒ…å†µã€‚
Tool Calls:
  transfer_to_weather_agent (call_07EqbGkxmHZekxs9RCNdn90x) 
Call ID: call_07EqbGkxmHZekxs9RCNdn90x
  Args:
================================= Tool <span class="hljs-attr">Message</span> =================================
Name: transfer_to_weather_agent


â€¦â€¦
ï¼ˆå®Œæ•´ä»£ç ç‚¹å‡»æ–‡æœ«ä¸‹æ–¹â€œé˜…è¯»åŸæ–‡â€æŸ¥çœ‹ï¼‰
</code></pre>
<p>ä»ä»£ç å¯ä»¥çœ‹å‡ºlanggraphçš„å¯è§†åŒ–è¿½è¸ªèƒ½åŠ›è¿˜æœ‰ç‚¹è–„å¼±ï¼Œå¦‚æœéœ€è¦è¾¾åˆ°OpenAI Agent SDKçš„æ•ˆæœéœ€è¦å¯ä»¥å°è¯•æ·»åŠ traceã€graphstudioæˆ–è€…langsmithè¿›è¡Œè®¾è®¡ä»¥å®ç°å¯è§†åŒ–è¿½è¸ªã€‚</p>
<h2 data-id="heading-13"><strong><strong>äº”ã€æ€»ç»“</strong></strong></h2>
<p>ä½¿ç”¨å®ŒOpenAI Agent SDK å’Œå¸‚é¢ä¸Šçš„å‡ ä¸ªæˆç†Ÿæ¡†æ¶çš„å¯¹æ¯”ï¼Œä¸ªäººè®¤ä¸ºæœªæ¥AIåº”ç”¨è‚¯å®šæ˜¯å·¥ä½œæµ+å¤šAgentçš„æ–¹å‘ã€‚å¯¹äºå·¥ä½œæµè€Œè¨€ï¼Œå°±æ˜¯è®©æˆ‘ä»¬å¿«é€Ÿæ­å»ºå‡ºæ¥ä¸€ä¸ªMVPç‰ˆæœ¬ï¼Œæ„Ÿå—ä¸‹AIå¸¦æ¥çš„æ•ˆæœåˆ°åº•å¦‚ä½•ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°é¢„æœŸï¼Œä½†æ˜¯å·¥ä½œæµéšç€ä¸šåŠ¡è¿­ä»£ å¦‚ä½•æœ‰æ•ˆçš„è¿ç»´ä¹Ÿæ˜¯éœ€è¦è§£å†³çš„é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºå·¥ç¨‹ç±»é¡¹ç›®ï¼Œåˆ™éœ€è¦å®šåˆ¶åŒ–çš„å¼€å‘ï¼Œè€Œä¸”ç°åœ¨çš„AIéœ€è¦åº”ç”¨åˆ°çº¿ä¸Šï¼Œéƒ¨åˆ†ä¸šåŠ¡åœºæ™¯éœ€è¦ä¿éšœç¡®å®šæ€§ï¼Œè¿™ä¸ªä½¿ç”¨OpenAI Agent SDKã€LangGrapç­‰å¼€å‘æ¡†æ¶æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-14"><strong>å…­ã€å‚è€ƒ</strong></h2>
<ol>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.github.io%2Fopenai-agents-python%2F" target="_blank" title="https://openai.github.io/openai-agents-python/" ref="nofollow noopener noreferrer">openai.github.io/openai-agenâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.dify.ai%2Fen%2Fintroduction" target="_blank" title="https://docs.dify.ai/en/introduction" ref="nofollow noopener noreferrer">docs.dify.ai/en/introducâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.llamaindex.ai%2Fen%2Fstable%2F" target="_blank" title="https://docs.llamaindex.ai/en/stable/" ref="nofollow noopener noreferrer">docs.llamaindex.ai/en/stable/</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraph%2Fconcepts%2Fwhy-langgraph%2F" target="_blank" title="https://langchain-ai.github.io/langgraph/concepts/why-langgraph/" ref="nofollow noopener noreferrer">langchain-ai.github.io/langgraph/câ€¦</a></p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™]]></title>    <link>https://juejin.cn/post/7599237603976134699</link>    <guid>https://juejin.cn/post/7599237603976134699</guid>    <pubDate>2026-01-26T08:19:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599237603976134699" data-draft-id="7595167566144045075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™"/> <meta itemprop="keywords" content="åç«¯,cpu"/> <meta itemprop="datePublished" content="2026-01-26T08:19:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hello_world_"/> <meta itemprop="url" content="https://juejin.cn/user/2586510420095944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2586510420095944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hello_world_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T08:19:49.000Z" title="Mon Jan 26 2026 08:19:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¾æ—§é¢˜ç›®é¡ºå£æºœï¼Œå‡†å¤‡è€ƒç ”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72cf5f97e9124ce18f9be41c59d433b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=gQD2ORdPtvv%2FOx9UskHHbDkGgG4%3D" alt="cbfd292f99be38eec1bd3750c3b5ac656ea468cc.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>é—®é¢˜å¹´å¹´æœ‰ï¼Œä»Šå¹´ç‰¹åˆ«å¤šã€‚ä½œä¸ºä¸€ä¸ªåˆšå·¥ä½œä¸€å¹´å¤šçš„äººï¼Œæˆ‘åˆ°åº•åšäº†ä»€ä¹ˆå­½ã€‚é™¤äº†æå®šäº§å“æçš„å„ç§å¥‡æ€ªçš„éœ€æ±‚ï¼Œè¿˜è¦è§£å†³å‰äººç•™ä¸‹æ¥çš„å„ç§é—®é¢˜ï¼Œæˆ‘ä¸Šæ—©å…«ã€‚</p>
<blockquote>
<p>è¯¥é—®é¢˜å®é™…å‘ç”Ÿå¹¶è§£å†³åœ¨2025å¹´ï¼Œå¹´æœ«èµ¶KPIè¿›åº¦æ²¡æ¥å¾—åŠå†™æ€»ç»“</p>
</blockquote>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b18f3bf61edc4c77baf3088298da0180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=Bnoh68mBr0ixIbSIosQWDYaNeGM%3D" alt="006BgMUjgy1i6b376m69qj306o06ojre.jpg" loading="lazy"/></p>
<h2 data-id="heading-1">äº‹æ•…åœºæ™¯</h2>
<p>è®©æˆ‘ä»¬æŠŠæ—¶é—´æ‹‰å›åˆ°é—®é¢˜å‘ç”Ÿçš„æ—¶é—´ã€‚è¿™ä¸ªé—®é¢˜å‘ç”Ÿåœ¨2025å¹´12æœˆ29æ—¥ä¸‹åˆ3ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9754fe03d2414bf8971f49b742f5dcb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=GS5O84NtYTeuUTtHY6vz04Igjbc%3D" alt="image.png" loading="lazy"/>
æ”¶åˆ°å‘Šè­¦åçš„ç¬¬ä¸€æ—¶é—´ï¼Œè™½ç„¶è¿˜æœªæ’æŸ¥å‡ºæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„é—®é¢˜ã€‚ç¬¬ä¸€æ—¶é—´å¯¹æœåŠ¡è¿›è¡Œäº†æ‰©å®¹æ“ä½œï¼Œé¿å…é—®é¢˜è¿›ä¸€æ­¥æ‰©æ•£ã€‚åœ¨å®Œæˆæ‰©å®¹åï¼Œå‘Šè­¦éšå³æ¢å¤ã€‚åœ¨æ¢å¤ä¹‹åæœ¬æƒ³ç€å¯èƒ½å°±æ˜¯æ­£å¸¸çš„æµé‡æ³¢åŠ¨é€ æˆçš„ã€‚åœ¨åç»­æ—¶é—´é‡Œï¼Œè¯¥æœåŠ¡è¿˜æ˜¯ä¼šå¶å°”æŠ¥å‡ºCPUé˜ˆå€¼å‘Šè­¦ã€‚å°¤å…¶åœ¨å‘¨æœ«ï¼Œå…³äºCPUé˜ˆå€¼å‘Šè­¦æ›´åŠ é¢‘ç¹ã€‚CPUä½¿ç”¨ç‡æœ€é«˜å¯è¾¾90%ä»¥ä¸Š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7bd39849a024905b8fa9ddc86ec003e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=qjduD9wdFMBO8G80Qtufz49hbRA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">å¤šç»´åº¦æ’æŸ¥</h2>
<p>åœ¨å‘ç”Ÿå‘Šè­¦åï¼Œè™½ç„¶ç¬¬ä¸€æ—¶é—´é‡‡å–äº†å¤„ç†æªæ–½ï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆå…·ä½“åŸå› å¯¼è‡´çš„CPUçªç„¶å¢é«˜ã€‚éšå³æˆ‘å¯¹è¯¥æœåŠ¡è¿›è¡Œäº†å¤šç»´åº¦çš„æ’æŸ¥ã€‚</p>
<h3 data-id="heading-3">ä»£ç ç»´åº¦</h3>
<p>é¦–å…ˆï¼Œä»ä»£ç ç»´åº¦åˆ†æCPUå‘Šè­¦æ˜¯å¦æ˜¯æœ‰ä»£ç ä¸­å­˜åœ¨ä¸åˆç†çš„ä»£ç é€»è¾‘é€ æˆç¨‹åºå‡ºç°å¤§é‡è®¡ç®—é€»è¾‘ï¼ˆå¦‚ï¼šæ­»å¾ªç¯ã€é”ç«äº‰ç­‰ï¼‰ã€‚</p>
<p>é¦–å…ˆåˆ†æä»£ç æ˜¯å¦å­˜åœ¨æ­»å¾ªç¯ã€‚æ ¹æ®å‘Šè­¦å‰å‘å¸ƒçš„ä»£ç ä»¥åŠCPUå˜åŒ–æ›²çº¿åˆ†æï¼Œå¦‚æœä»£ç ä¸­å­˜åœ¨æ­»å¾ªç¯ï¼Œé‚£ä¹ˆå½“æ­»å¾ªç¯è§¦å‘åï¼ŒCPUåˆ©ç”¨ç‡å°†ç»´æŒåœ¨ä¸€ä¸ªè¾ƒé«˜æ°´å¹³æˆ–ä¸æ–­å‡é«˜ï¼Œå¹¶ä¸ä¼šå‡ºç°CPUåˆ©ç”¨ç‡é™ä½çš„æƒ…å†µå‡ºç°ã€‚æ‰€ä»¥å¯æ’æŸ¥æ˜¯å› ä»£ç æ­»å¾ªç¯é—®é¢˜å¯¼è‡´çš„CPUåˆ©ç”¨ç‡å‡é«˜ã€‚</p>
<p>ä½¿ç”¨<strong>jstack</strong>ã€<strong>jstat</strong>å·¥å…·æŸ¥çœ‹å¯¹åº”çº¿ç¨‹ä¸­é”ç«äº‰æƒ…å†µ</p>
<p>jstackçº¿ç¨‹åˆ†æ</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># 1. è·å–ç›®æ ‡Javaè¿›ç¨‹ID </span>
jps -l 
<span class="hljs-comment"># 2. å¯¼å‡ºçº¿ç¨‹æ ˆï¼ˆæ¯éš”5ç§’å¯¼å‡ºä¸€æ¬¡ï¼Œå…±3æ¬¡ï¼Œå¯¹æ¯”é”çŠ¶æ€ï¼‰ </span>
jstack çº¿ç¨‹<span class="hljs-built_in">id</span> &gt; thread-1.log 
<span class="hljs-built_in">sleep</span> 5 
jstack çº¿ç¨‹<span class="hljs-built_in">id</span> &gt; thread-2.log 
<span class="hljs-built_in">sleep</span> 5 
jstack çº¿ç¨‹<span class="hljs-built_in">id</span> &gt; thread-3.log
</code></pre>
<p>jstaté”åˆ†æ</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æŸ¥çœ‹é”ç«äº‰ç›¸å…³ç»Ÿè®¡ï¼ˆæ¯1ç§’è¾“å‡ºä¸€æ¬¡ï¼Œå…±10æ¬¡ï¼‰ </span>
jstat -s çº¿ç¨‹<span class="hljs-built_in">id</span> 1000 10
</code></pre>
<p>æ ¹æ®<strong>jstack</strong>ã€<strong>jstat</strong>å·¥å…·çš„æ‰§è¡Œç»“æœåˆ†æï¼Œé”ç«äº‰çš„æƒ…å†µä¸€ç›´å­˜åœ¨ï¼Œè€Œä¸”åœ¨æŒç»­çš„æ­£å¸¸æµé‡ä¸­é”ç«äº‰æƒ…å†µç›¸å½“ä¿æŒç¨³å®šï¼Œä¸ä¼šæœ‰æ˜æ˜¾çš„å‡é«˜æˆ–é™ä½ã€‚æ‰€ä»¥å¯ä»¥æ’é™¤å› ä¸ºé”ç«äº‰å¯¼è‡´CPUå‡é«˜çš„åŸå› ã€‚</p>
<h3 data-id="heading-4">æµé‡ç»´åº¦</h3>
<p>åœ¨æ’é™¤å› ä¸ºä»£ç ç»´åº¦å¯¼è‡´CPUå‡é«˜çš„ä¹‹åï¼Œé—®é¢˜æ’æŸ¥æš‚æ—¶é™·å…¥äº†åœæ»ã€‚æˆ‘åˆé‡æ–°å›é¡¾äº†è¯¥æœåŠ¡æœ€è¿‘çš„å˜æ›´ï¼Œå‘ç°äº†å¯èƒ½æ˜¯å¯¼è‡´CPUå‡é«˜çš„ä¸€ä¸ªé‡è¦åŸå› â€”â€”<strong>æµé‡å‡é«˜</strong>ã€‚åœ¨å‘ç”ŸCPUå‘Šè­¦å‰ï¼Œè¯¥æœåŠ¡æ¥å…¥äº†ä¸€ä¸ªæ–°çš„ä¸šåŠ¡ï¼Œä½¿å¾—æ ¸å¿ƒæ¥å£çš„æµé‡å­˜åœ¨æ˜æ˜¾å¢å¤§ã€‚æ—¥å‡è°ƒç”¨é‡å°†ä¼šå¢åŠ 50Wä»¥ä¸Šã€‚</p>
<p>è¿›ä¸€æ­¥å¯¹æµé‡è¿›è¡Œåˆ†æå‘ç°ï¼Œè¯¥æœåŠ¡è°ƒç”¨é‡å¢å¹…å·²è¾¾åˆ°40%ã€‚æ­¤æ—¶ï¼Œä¼¼ä¹å·²ç»æ‰¾åˆ°äº†é€ æˆCPUå‡é«˜çš„å…ƒå‡¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dba34cee97404888850b6744fbaa217d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=kRgfYMpX%2BWJK%2BTr%2FV241Bw9FPyk%3D" alt="s_a4e3b2bc9c4f4da68697fd0071dcbf15.jpg" loading="lazy"/></p>
<p>æœ¬è¯¥çš†å¤§æ¬¢å–œï¼Œä½†åœ¨åç»­è¿›ä¸€æ­¥æ’æŸ¥æ—¶ï¼Œå‘ç°ä¸‡é‡Œé•¿å¾è¿˜è¿œæ²¡ç»“æŸã€‚</p>
<p>åœ¨æŸ¥çœ‹æ¥å…¥æ–°ä¸šåŠ¡å‰ï¼Œè¯¥æœåŠ¡CPUåˆ©ç”¨ç‡çš„æƒ…å†µã€‚å‘ç°åœ¨æ¥å…¥å‰ï¼Œè¯¥æœåŠ¡CPUåˆ©ç”¨ç‡è™½ç„¶æ²¡æœ‰è¾¾åˆ°å‘Šè­¦é˜ˆå€¼ï¼Œä½†å…¶CPUåˆ©ç”¨ç‡ä¹Ÿå¤„äºè¾ƒé«˜çš„æ°´å¹³ï¼ˆæœ€é«˜å¯è¾¾50%ï¼‰ã€‚è¯¥CPUåˆ©ç”¨ç‡ç»“åˆæµé‡è°ƒç”¨ä»¥åŠä¸šåŠ¡å¤„ç†å¹¶ä¸å­˜åœ¨å¤§é‡è®¡ç®—æƒ…å†µã€‚è¯¥è°ƒç”¨é‡ä¸åº”è¯¥å­˜åœ¨å¦‚æ­¤é«˜çš„CPUåˆ©ç”¨ç‡ã€‚</p>
<p>ç»¼åˆä»¥ä¸Šä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæµé‡çš„å¢åŠ å¹¶ä¸æ˜¯å¯¼è‡´CPUåˆ©ç”¨ç‡å‡é«˜çš„æ ¹æœ¬åŸå› ï¼Œä½†æµé‡å¢åŠ ä¸€å®šç¨‹åº¦å¯¼è‡´äº†CPUåˆ©ç”¨ç‡çš„å‡é«˜ã€‚</p>
<blockquote>
<p>åœ¨è¿›ä¸€æ­¥åˆ†ææ—¶ï¼Œå‘ç°2ä¸ªé›†ç¾¤çš„æœºå™¨è´Ÿè½½å‡è¡¡ç›¸ç­‰çš„æƒ…å†µä¸‹CPUåˆ©ç”¨ç‡æœ‰æ˜¾è‘—å·®å¼‚ã€‚è”ç³»ç›¸å…³è¿ç»´äººå‘˜åï¼Œå¾—çŸ¥é›†ç¾¤Açš„æœºå™¨æ€§èƒ½æœ¬å°±ä¸åŠé›†ç¾¤Bï¼Œåœ¨æµé‡å‡é«˜çš„æƒ…å†µä¸‹æ›´åŠ æ˜¾è‘—ã€‚</p>
</blockquote>
<h3 data-id="heading-5">JVMç»´åº¦</h3>
<p>é—®é¢˜æ’æŸ¥è¿›åº¦å†æ¬¡é™·å…¥äº†åœæ»ã€‚ä»ä»£ç å±‚é¢ã€è°ƒç”¨æƒ…å†µéƒ½æ— æ³•æ’æŸ¥å‡ºå¯¼è‡´CPUå‡é«˜çš„åŸå› ã€‚åªèƒ½å†è¿›ä¸€æ­¥æ·±æŒ–æ·±å±‚å†…å®¹ã€‚Javaç¨‹åºä»€ä¹ˆæ˜¯æœ€æ·±å±‚çš„æŠ€æœ¯â€”â€”â€”<strong>JVM</strong>ã€‚</p>
<p>ä¸€æƒ³åˆ°è¦ä»JVMå±‚é¢æ’æŸ¥é—®é¢˜ï¼Œå•Šï¼Ÿæˆ‘å—ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ad1614adca3424d9d981b839ae33036~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=CC8js%2FVFZkpDPupeENXLALYuZLo%3D" alt="9e2cdc6569bf49239d1ebdf15ff0ed26.webp" loading="lazy"/></p>
<p>è™½ç„¶å†…å¿ƒååˆ†æŠ—æ‹’ï¼Œä½†æ˜¯ä¹Ÿä¸å¾—ä¸å¹²å•Šã€‚</p>
<p>åœ¨JVMå±‚é¢è‹¥å­˜åœ¨å¤§é‡Yong GCã€é«˜é¢‘JITç¼–è¯‘ã€é”å‡çº§ã€ç±»åŠ è½½/å¸è½½å‘ç”Ÿéƒ½ä¼šä½¿å¾—CPUåˆ©ç”¨ç‡å‡é«˜ã€‚åœ¨å®é™…ç”Ÿäº§ä¸­æ›´å¤šæ˜¯ç”±äºå¤§é‡Yong GCå¯¼è‡´çš„ã€‚</p>
<p>åœ¨æŸ¥çœ‹CPUåˆ©ç”¨ç‡å¤„äºé«˜å³°æ—¶çš„JVMè¿è¡Œæƒ…å†µï¼Œå‘ç°CPUå¤„äºæŸä¸ªå³°å€¼æ—¶ï¼Œæœºå™¨å¯¹åº”çš„JVMåŒæ—¶è¿›è¡Œäº†è¾ƒé«˜æ¬¡æ•°çš„Yong GCã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5900abc201243e0ba2f0354d450a62f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=PzVgn3IC8aK3XJ7g8JJk5wTRT9o%3D" alt="image.png" loading="lazy"/></p>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºå¤§é‡çš„GCæ“ä½œæ˜¯ä¼šå¯¼è‡´CPUå‡é«˜çš„ã€‚ä½†æ˜¯æœ¬æ¬¡é—®é¢˜ä¸­Young GCå’ŒCPUå‡é«˜çš„å› æœå…³ç³»è¿˜éœ€è¿›ä¸€æ­¥ç¡®è®¤ã€‚è™½ç„¶CPUå¤„äºå³°å€¼æ—¶GCæ¬¡æ•°ä¹Ÿå¤„äºé«˜å³°ï¼Œä½†æ˜¯GCæ¬¡æ•°å¤„äºå¹³ç¨³æ¬¡æ•°æ—¶ï¼ŒCPUåˆ©ç”¨ç‡è™½ç„¶æ²¡æœ‰è¾¾åˆ°å³°å€¼ä½†æ˜¯ä¹Ÿå¤„äºè¾ƒé«˜æ°´å¹³ã€‚å› æ­¤ï¼Œå¯ä»¥åˆ¤æ–­å‡ºYong GCæ¬¡æ•°æ˜¯è¿›ä¸€æ­¥å¯¼è‡´CPUåˆ©ç”¨ç‡å‡é«˜çš„åŸå› ä¹‹ä¸€ï¼Œå¹¶éå¯¼è‡´CPUå‡é«˜çš„ä¸»è¦åŸå› ã€‚</p>
<h2 data-id="heading-6">ç¥å™¨å‡ºæ‰‹</h2>
<p>åœ¨é€šè¿‡ä»¥ä¸Šç»´åº¦æ’æŸ¥åï¼Œè™½ç„¶æ‰¾åˆ°äº†ä¸€äº›å¯¼è‡´CPUå‡é«˜çš„å½±å“åŸå› ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰æ’æŸ¥å‡ºCPUå‡é«˜çš„æ ¹æœ¬åŸå› ã€‚åœ¨æ­¤ä¹‹åï¼Œæ„è¯†åˆ°å¯èƒ½æ˜¯æ’æŸ¥å·¥å…·å¹¶ä¸å…¨é¢ã€‚åœ¨è¯¢é—®å¤§ä½¬åï¼Œäº†è§£åˆ°ä¸€ä¸ªç¥å™¨â€”â€”<strong>Arthas</strong>ã€‚å¯ä»¥æ›´åŠ å…¨é¢çš„åˆ†æç¨‹åºè¿è¡Œæƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/268fc1761ee44dee854d81bb4efafd0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=i7xuFXKqV3GiIcEITLil2y9AKn8%3D" alt="0884e955562b16803cfb2aba68bef431432d4570.jpg" loading="lazy"/></p>
<p>åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Farthas.aliyun.com%2F" target="_blank" title="https://arthas.aliyun.com/" ref="nofollow noopener noreferrer">Arthaså®˜ç½‘</a>åˆæ­¥äº†è§£äº†å…¶åŸºæœ¬ç”¨æ³•åï¼Œé‡æ–°å¼€å§‹äº†CPUé—®é¢˜çš„æ’æŸ¥ã€‚</p>
<p>é¦–å…ˆï¼ŒæŸ¥çœ‹äº†æœåŠ¡è¿è¡ŒæœŸé—´CPUåˆ©ç”¨ç‡æœ€é«˜çš„çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">dashboard        <span class="hljs-comment"># å®æ—¶æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ</span>
thread -n 5      <span class="hljs-comment"># æŸ¥çœ‹CPUåˆ©ç”¨ç‡æœ€é«˜çš„5ä¸ªçº¿ç¨‹</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f40ca3834234a9296833e5276bbc968~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=kl6ml8RrCN8GfqYRvb3es%2BD8Rrg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cd69f7894c14c38b142a33a459b0bee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=8gNd96aTToqMvozeUco3CtpmtXI%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¹æ®ä»¥ä¸Šæƒ…å†µï¼ŒåŸºæœ¬å¯ä»¥åˆ¤æ–­æ˜¯ç¨‹åºä¸­ä¸šåŠ¡ä»£ç å¯¼è‡´çš„CPUåˆ©ç”¨ç‡å‡é«˜çš„ã€‚</p>
<p>è¿›ä¸€æ­¥å¯¹ä¸šåŠ¡çº¿ç¨‹è¿›è¡Œåˆ†æ</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># å¦‚æœå‘ç°æŸä¸ªçº¿ç¨‹CPUè¿‡é«˜ï¼ŒæŸ¥çœ‹å…¶å †æ ˆ</span>
thread &lt;é«˜CPUçº¿ç¨‹ID&gt;

<span class="hljs-comment"># ç›‘æ§è¯¥çº¿ç¨‹ä¸€æ®µæ—¶é—´</span>
thread -i 2000 &lt;çº¿ç¨‹ID&gt;

<span class="hljs-comment"># ç”Ÿæˆæ€§èƒ½æŠ¥å‘Šè¿›ä¸€æ­¥åˆ†æ</span>
profiler start
<span class="hljs-comment"># ç­‰å¾…10ç§’</span>
profiler stop --format html
</code></pre>
<p>åœ¨å¾—åˆ°ä¸šåŠ¡çº¿ç¨‹ç«ç„°å›¾åï¼Œä¸çŸ¥å¥½æ­¹çš„æˆ‘å±…ç„¶ç›´æ¥å¯¹ç«ç„°å›¾è¿›è¡Œåˆ†æï¼Œä¸ºä»€ä¹ˆè¯´æˆ‘ä¸çŸ¥å¥½æ­¹ï¼Œè¯·çœ‹VCR</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62fb5593658f4465998bb3a07059dfe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=P1i8GayJ1udbVFH35SENA7YbYOU%3D" alt="image.png" loading="lazy"/>
è¿™ä¸ªæ˜¯äººèƒ½åˆ†æçš„å—ï¼Ÿæœæ–­æ‰”ç»™AIå¸®æˆ‘åˆ†æï¼Œç»™å‡ºä¸€ä¸ªåˆæ­¥ç»“è®ºã€‚ç„¶åæˆ‘åœ¨é’ˆå¯¹æ€§åˆ†æã€‚AIå¾—åˆ°çš„åˆæ­¥ç»“è®ºã€‚</p>
<ul>
<li>å­˜åœ¨å¤§é‡æ•°æ®è½¬æ¢æ“ä½œ</li>
<li>é«˜é¢‘è°ƒç”¨Jackson JSONåºåˆ—åŒ–/ååºåˆ—åŒ–æ“ä½œ</li>
</ul>
<p>ä»¥ä¸Š2ä¸ªæ“ä½œæ˜¯ä¸»è¦æ ¸å¿ƒå½±å“ã€‚åœ¨äº†è§£åˆ°è¿™2ä¸ªæ ¸å¿ƒåŸå› åï¼Œå¯¹äºç«ç„°å›¾çš„åˆ†æä¾¿å°‘äº†å¾ˆå¤šç¹ççš„æ“ä½œã€‚è¿›ä¸€æ­¥åˆ†æå¾—åˆ°ï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­ä»¥ä¸‹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å æ®CPUæ—¶é•¿è¾ƒé«˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7737d97d12d0404eb3f906abc1690c96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=X%2FvU7y%2Ft3aUs%2FiuoSIYnqRtePBY%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å¯¹è¯¥æ–¹æ³•ä¸šåŠ¡ä»£ç åˆ†æè¿‡ç¨‹ä¸­å‘ç°ï¼Œè¯¥æ–¹æ³•çš„ä¸šåŠ¡åŠŸèƒ½æ˜¯è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡çš„æ¥å£è·å–æ•°æ®ã€‚ç…§å¸¸æ¥è¯´è¿™ä¸ªæ¥å£è°ƒç”¨å±äºIOæ“ä½œï¼Œå¹¶ä¸ä¼šæ˜¯CPUå‡é«˜ã€‚ä½†æ˜¯æ·±æŒ–ä»£ç åå‘ç°ï¼Œè¯¥æ¥å£è™½ç„¶æ˜¯ç½‘ç»œIOæ“ä½œï¼Œä½†æ˜¯åœ¨å¾—åˆ°è°ƒç”¨ç»“æœï¼ˆMapï¼‰åï¼Œä¼šååºåˆ—åŒ–ä¸ºç‰¹å®šå¯¹è±¡ï¼Œè¯¥æ“ä½œä¼šä½¿å¾—CPUå‡é«˜ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨åˆ†æç«ç„°å›¾è¿‡ç¨‹ä¸­ï¼Œè¿˜å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå­˜åœ¨ä¸€ä¸ªå·¥å…·ç±»çš„å¤§é‡è°ƒç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5875dd7d13ae446a9dba7e456e3e82d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=%2FHoyC2hSwpvpgr7qmMSma0N4J4g%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨åˆ†æå‡ºä»¥ä¸Š2ä¸ªä»£ç é—®é¢˜åï¼Œå¼€å§‹ç€æ‰‹è§£å†³è¿™2ä¸ªä»£ç é—®é¢˜é€ æˆçš„å½±å“ã€‚é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯åŠ ç¼“å­˜ï¼Œé¿å…é‡å¤æ•°æ®å¤šæ¬¡è¿ç®—ã€‚ä½†æ˜¯å›¢é˜Ÿä¸­ä½¿ç”¨çš„ç¼“å­˜ç»„ä»¶æ˜¯å›¢é˜Ÿå†…è‡ªå»ºçš„ã€‚è€Œä¸”ä»£ç ä¸­ä»£ç é—®é¢˜1çš„è°ƒç”¨å­˜åœ¨éƒ¨åˆ†ä»£ç ä½¿ç”¨äº†ç¼“å­˜ï¼Œç„¶è€Œå…¶CPUåˆ©ç”¨ç‡å¹¶æ²¡æœ‰å¾—åˆ°é™ä½ã€‚</p>
<p>åœ¨è¿›ä¸€æ­¥å¯¹å›¢é˜Ÿä¸­ç¼“å­˜ç»„ä»¶ä»£ç åˆ†ææ—¶å‘ç°ï¼Œåœ¨ç¼“å­˜ç»„ä»¶ä¸­å­˜åœ¨å¤§é‡ä»£ç é—®é¢˜2çš„å·¥å…·ç±»æ–¹æ³•è°ƒç”¨ã€‚è¯¥å·¥å…·ç±»ä»£ç å¤§è‡´å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">parseObject</span><span class="hljs-params">(String json, TypeReference&lt;T&gt; type)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
        configObjectMapper(objectMapper);
        <span class="hljs-keyword">return</span> objectMapper.readValue(json, type);
    } <span class="hljs-keyword">catch</span> (IOException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FmsFastjsonIOException</span>(e);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">parseObject</span><span class="hljs-params">(String json, Class&lt;T&gt; clazz)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
        configObjectMapper(objectMapper);
        <span class="hljs-keyword">return</span> objectMapper.readValue(json, clazz);
    } <span class="hljs-keyword">catch</span> (IOException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FmsFastjsonIOException</span>(e);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">toJSONString</span><span class="hljs-params">(Object object)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
            configObjectMapper(objectMapper);
            <span class="hljs-keyword">return</span> objectMapper.writeValueAsString(object);
        } <span class="hljs-keyword">catch</span> (JsonProcessingException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FmsFastjsonIOException</span>(e);
        }
    }
</code></pre>
<p>ä»¥ä¸Šä»…åˆ—ä¸¾äº†å‡ ä¸ªæ–¹æ³•ï¼Œè¯¥å·¥å…·ç±»çš„æœ¬è´¨æ˜¯åŒ…è£…äº†Jacksonåºåˆ—åŒ–/ååºåˆ—åŒ–çš„ä»£ç è¿›è¡Œç»Ÿä¸€è°ƒç”¨ã€‚ä»¥ä¸Šä»£ç çœ‹ä¼¼ç¬¦åˆä¸šåŠ¡éœ€æ±‚ã€‚ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ObjectMapperå¯¹è±¡ã€‚è¿™å°±ä½¿å¾—å…¶åº•å±‚è¿›è¡Œåºåˆ—åŒ–/ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œè¦é‡æ–°ç”Ÿæˆå¯¹åº”çš„åºåˆ—åŒ–å™¨å/åºåˆ—åŒ–å™¨ã€‚åœ¨æµé‡é«˜å³°æœŸé—´è¯¥æ“ä½œä¼šåå¤æ‰§è¡Œå°±ä¼šå¯¼è‡´CPUåˆ©ç”¨ç‡å‡é«˜ã€‚åˆ†æåˆ°è¿™é‡Œï¼Œé—®é¢˜å°±æ˜æ™°äº†ã€‚ä¸Šè¿°åˆ†æåˆ°ä»£ç é—®é¢˜1ä½¿ç”¨äº†ç¼“å­˜ç»„ä»¶ï¼Œä½†æ˜¯ç¼“å­˜ç»„ä»¶ä½¿ç”¨äº†ä¸åˆé€‚çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç ï¼Œä½¿å¾—å³ä¾¿ä½¿ç”¨äº†ç¼“å­˜ç»„ä»¶è¿˜æ˜¯ä¼šä½¿CPUåˆ©ç”¨ç‡å‡é«˜ï¼›ä»£ç é—®é¢˜2å·¥å…·ç±»çš„ä½¿ç”¨è‡³ä»Šä½¿ç”¨äº†ä¸åˆé€‚çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç ï¼ŒåŒæ ·ä¹Ÿå¯¼è‡´äº†CPUåˆ©ç”¨ç‡çš„å‡é«˜ã€‚</p>
<p>åˆ†æåˆ°è¿™é‡Œé—®é¢˜å·²ç»æ˜ç¡®äº†ï¼Œå›¢é˜Ÿä¸­å¯¹åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç çš„ä¸æ­£ç¡®ä½¿ç”¨å¯¼è‡´äº†æœåŠ¡CPUåˆ©ç”¨ç‡çš„å‡é«˜ã€‚</p>
<blockquote>
<p>åœ¨Jacksonåº•å±‚ä»£ç ä¸­ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–æ˜¯é‡‡å–äº†ç¼“å­˜ç­–ç•¥çš„ã€‚è¯¥ç¼“å­˜å¹¶éç¼“å­˜æ•´ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯å¯¹è±¡ç±»å‹åŠå…¶å¯¹åº”çš„åºåˆ—åŒ–å™¨/ååºåˆ—åŒ–å™¨ã€‚æ— éœ€å†æ¬¡ç”Ÿæˆè¿›è€Œé™ä½äº†CPUåˆ©ç”¨ç‡</p>
</blockquote>
<h2 data-id="heading-7">é—®é¢˜è§£å†³</h2>
<p>åœ¨åˆ†æå‡ºCPUåˆ©ç”¨ç‡å‡é«˜çš„æ ¹æœ¬é—®é¢˜åï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯è§£å†³åºåˆ—åŒ–/ååºåˆ—åŒ–çš„ä»£ç é—®é¢˜ã€‚è¯¥é—®é¢˜è§£å†³èµ·æ¥ä¹Ÿååˆ†ç®€å•ï¼Œåªéœ€è¦è°ƒç”¨åºåˆ—åŒ–/ååºåˆ—åŒ–æ“ä½œæ˜¯ï¼Œä½¿ç”¨åŒä¸€ä¸ªObjectMapperå¯¹è±¡å³å¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> ObjectMapper MAPPER;


<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ObjectMapper <span class="hljs-title function_">getStaticMapper</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (MAPPER == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">synchronized</span> (JacksonUtil.class) {
            <span class="hljs-keyword">if</span> (MAPPER == <span class="hljs-literal">null</span>) {
                <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">tempMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
                <span class="hljs-comment">// ç¦ç”¨ç©ºBeanåºåˆ—åŒ–æ—¶çš„å¤±è´¥</span>
                tempMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, <span class="hljs-literal">false</span>);
                <span class="hljs-comment">// å¿½ç•¥nullå€¼ï¼Œåªåºåˆ—åŒ–énullå­—æ®µï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</span>
                tempMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
                <span class="hljs-comment">// å¦‚æœéœ€è¦å¤„ç†æœªçŸ¥å±æ€§ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹é…ç½®</span>
                tempMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="hljs-literal">false</span>);
                MAPPER = tempMapper;
            }
        }
    }
    <span class="hljs-keyword">return</span> MAPPER;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Map&lt;String, T&gt; <span class="hljs-title function_">objectToMap</span><span class="hljs-params">(Object object)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">staticMapper</span> <span class="hljs-operator">=</span> getStaticMapper();
        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> staticMapper.writeValueAsString(object);
        <span class="hljs-keyword">return</span> staticMapper.readValue(json, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&lt;HashMap&lt;String, T&gt;&gt;() {});
    } <span class="hljs-keyword">catch</span> (IOException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FmsFastjsonIOException</span>(e);
    }
}
</code></pre>
<p>ä¿®æ”¹å®Œä»£ç åï¼ŒæŸ¥çœ‹ä»£ç è¿è¡Œæƒ…å†µã€‚åœ¨ç›¸åŒæ—¶é—´æ®µï¼Œè¯¥æœåŠ¡CPUåˆ©ç”¨ç‡å¾—åˆ°äº†å¤§å¹…é™ä½ï¼Œé™å¹…è¾¾50%ä»¥ä¸Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4d8ef5904ba441fbcb68034ca5a1959~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9fd29ybGRf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770020389&amp;x-signature=hajCOjSap7k%2BxNUbngZQcRlmCYI%3D" alt="image.png" loading="lazy"/>
ä»ç»“æœæ¥çœ‹ï¼Œè¿™æ¬¡ä»£ç ä¼˜åŒ–æ˜¯æˆåŠŸçš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[8.BTC-æŒ–çŸ¿-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°]]></title>    <link>https://juejin.cn/post/7599268297223897098</link>    <guid>https://juejin.cn/post/7599268297223897098</guid>    <pubDate>2026-01-26T08:32:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297223897098" data-draft-id="7599166436684415022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="8.BTC-æŒ–çŸ¿-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯,åŒºå—é“¾"/> <meta itemprop="datePublished" content="2026-01-26T08:32:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¶‚æ¶‚"/> <meta itemprop="url" content="https://juejin.cn/user/3740972207312249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            8.BTC-æŒ–çŸ¿-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3740972207312249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¶‚æ¶‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T08:32:45.000Z" title="Mon Jan 26 2026 08:32:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ®µè§†é¢‘æ˜¯ã€ŠåŒºå—é“¾æŠ€æœ¯ä¸åº”ç”¨ã€‹ç¬¬ 08 è®²â€œBTC æŒ–çŸ¿â€çš„å†…å®¹ï¼Œé‡ç‚¹è®²æ¸…æ¥šï¼šä»€ä¹ˆæ˜¯å…¨èŠ‚ç‚¹ã€çŸ¿å·¥å…·ä½“åšä»€ä¹ˆã€æŒ–çŸ¿æµç¨‹å’Œç­–ç•¥ï¼Œä»¥åŠå’Œå‰é¢â€œéš¾åº¦ã€å·¥ä½œé‡è¯æ˜â€çš„å…³ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…¨èŠ‚ç‚¹çš„èŒè´£</h2>
<p>è§†é¢‘å…ˆä»â€œå…¨èŠ‚ç‚¹â€è¯´èµ·ï¼Œè¯´æ˜ä»€ä¹ˆæ ·çš„èŠ‚ç‚¹æ‰ç®—æ¯”ç‰¹å¸ç³»ç»Ÿä¸­çš„å…¨èŠ‚ç‚¹ã€‚</p>
<ul>
<li>ä¸€ç›´åœ¨çº¿ï¼šé•¿æ—¶é—´è¿è¡Œç¨‹åºã€å‚ä¸ç½‘ç»œåè®®ã€æŒç»­æ”¶å‘åŒºå—å’Œäº¤æ˜“ã€‚</li>
<li>æœ¬åœ°ç»´æŠ¤å®Œæ•´åŒºå—é“¾ï¼šç£ç›˜é‡Œä¿å­˜ä»åˆ›ä¸–åŒºå—åˆ°å½“å‰é«˜åº¦çš„å…¨éƒ¨åŒºå—æ•°æ®ã€‚</li>
<li>ç»´æŠ¤ UTXO é›†åˆï¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤å½“å‰â€œæœªèŠ±è´¹è¾“å‡ºé›†åˆâ€ï¼ˆUTXO setï¼‰ï¼Œç”¨æ¥å¿«é€ŸéªŒè¯è½¬è´¦æ˜¯å¦çœŸçš„æœ‰é’±å¯èŠ±ã€‚UTXO æ˜¯æ£€æµ‹åŒèŠ±ï¼ˆdouble spendingï¼‰çš„å…³é”®æ•°æ®ç»“æ„ã€‚</li>
<li>ç›‘å¬å¹¶éªŒè¯äº¤æ˜“ï¼šä» P2P ç½‘ç»œä¸­æ¥æ”¶äº¤æ˜“ï¼Œå¯¹ç­¾åã€ä½™é¢ã€æ ¼å¼ç­‰åšåˆæ³•æ€§æ£€æŸ¥ï¼Œä¸¢å¼ƒéæ³•äº¤æ˜“ã€‚</li>
<li>å†³å®šæ‰“åŒ…å“ªäº›äº¤æ˜“ï¼šæŠŠåˆæ³•äº¤æ˜“æ”¾å…¥æœ¬åœ°çš„äº¤æ˜“æ± ï¼ˆmempoolï¼‰ï¼Œå†ä»ä¸­æŒ‘é€‰äº¤æ˜“å‡†å¤‡æ‰“åŒ…è¿›æ–°åŒºå—ï¼Œä¸€èˆ¬ä¼˜å…ˆæ‰‹ç»­è´¹é«˜çš„äº¤æ˜“ã€‚</li>
<li>ç›‘å¬å¹¶éªŒè¯åŒºå—ï¼šæ”¶åˆ°å…¶ä»–çŸ¿å·¥æŒ–å‡ºçš„æ–°åŒºå—åï¼Œæ£€æŸ¥åŒºå—å¤´ã€å·¥ä½œé‡è¯æ˜ï¼ˆéš¾åº¦ç›®æ ‡ï¼‰ã€åŒºå—å†…æ‰€æœ‰äº¤æ˜“æ˜¯å¦åˆæ³•ï¼Œå†³å®šæ˜¯å¦æ¥å—è¿™ä¸ªåŒºå—å¹¶æ¥åˆ°å½“å‰æœ€é•¿åˆæ³•é“¾ä¸Šã€‚
å…¨èŠ‚ç‚¹æ˜¯â€œè§„åˆ™çš„æ‰§è¡Œè€…å’Œè£åˆ¤â€ï¼Œå“ªæ€•ä¸æŒ–çŸ¿ï¼Œåªè¦è¿è¡Œå…¨èŠ‚ç‚¹å°±èƒ½å¸®åŠ©ç½‘ç»œä¸€èµ·ç»´æŠ¤åè®®çš„æ­£ç¡®æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€çŸ¿å·¥åœ¨å…¨èŠ‚ç‚¹åŸºç¡€ä¸Šçš„é¢å¤–å·¥ä½œ</h2>
<p>çŸ¿å·¥æœ¬è´¨ä¸Šæ˜¯â€œå¸¦æŒ–çŸ¿åŠŸèƒ½çš„å…¨èŠ‚ç‚¹â€ï¼Œåœ¨æ™®é€šå…¨èŠ‚ç‚¹çš„åŸºç¡€ä¸Šï¼Œå¤šåšäº†å‡ ä»¶äº‹ã€‚</p>
<ul>
<li>é€‰æ‹©è¦å»¶é•¿å“ªæ¡é“¾ï¼š
<ul>
<li>å½“å­˜åœ¨å¤šæ¡åˆæ³•é“¾åˆ†æ”¯æ—¶ï¼ŒçŸ¿å·¥æŒ‰ç…§â€œæœ€é•¿åˆæ³•é“¾â€åŸåˆ™é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ä½œä¸ºå½“å‰ä¸»é“¾çš„æœ«å°¾ï¼Œåœ¨è¯¥é“¾å°¾éƒ¨ç»§ç»­æŒ–æ–°åŒºå—ã€‚</li>
</ul>
</li>
<li>æ„é€ å€™é€‰åŒºå—ï¼š
<ul>
<li>ä»æœ¬åœ° UTXO å’Œ mempool ä¸­æŒ‘å‡ºä¸€æ‰¹äº¤æ˜“ï¼Œç»„åˆæˆä¸€ä¸ªå®Œæ•´åŒºå—ï¼ˆåŒºå—å¤´ + åŒºå—ä½“ï¼‰ï¼Œå¹¶åœ¨åŒºå—ä½“ä¸­åŠ å…¥ä¸€ç¬”â€œé“¸å¸äº¤æ˜“â€ï¼ˆcoinbaseï¼‰ï¼ŒæŠŠåŒºå—å¥–åŠ±å’Œæ‰‹ç»­è´¹æ‰“ç»™è‡ªå·±æ§åˆ¶çš„åœ°å€ã€‚</li>
</ul>
</li>
<li>åšå·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼‰ï¼š
<ul>
<li>ä¸æ–­ä¿®æ”¹åŒºå—å¤´ä¸­çš„éšæœºæ•°ï¼ˆnonceï¼‰æˆ–å…¶ä»–å¯è°ƒå­—æ®µï¼Œåå¤è®¡ç®—åŒºå—å¤´å“ˆå¸Œï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå°äºå½“å‰éš¾åº¦ç›®æ ‡çš„å“ˆå¸Œå€¼ï¼Œå³å®ŒæˆæŒ–çŸ¿ã€‚</li>
</ul>
</li>
</ul>
<p>å› æ­¤ï¼ŒçŸ¿å·¥çš„æ ¸å¿ƒä»»åŠ¡å¯ä»¥æ¦‚æ‹¬ä¸ºä¸¤æ­¥ï¼š<br/>
1ï¼‰é€‰é“¾ï¼›2ï¼‰åœ¨æ‰€é€‰é“¾ä¸Šæ„é€ åˆæ³•åŒºå—å¹¶åš PoW è®¡ç®—ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æŒ–çŸ¿çš„å…·ä½“æµç¨‹</h2>
<p>è§†é¢‘å¯¹â€œçŸ¿å·¥ä»æ¥æ”¶äº¤æ˜“åˆ°æŒ–å‡ºåŒºå—â€çš„è¿‡ç¨‹åšäº†è¾ƒå®Œæ•´çš„ä¸²è”ã€‚</p>
<ol>
<li>
<p>æ¥æ”¶äº¤æ˜“å¹¶å­˜å…¥ mempool</p>
<ul>
<li>çŸ¿å·¥èŠ‚ç‚¹ä»ç½‘ç»œæ¥æ”¶äº¤æ˜“ï¼Œå¯¹æ¯ç¬”äº¤æ˜“åšå®Œæ•´éªŒè¯ï¼ˆç­¾åã€ä½™é¢ã€æ ¼å¼ç­‰ï¼‰ï¼Œåˆæ³•çš„æ”¾å…¥æœ¬åœ°äº¤æ˜“æ± ï¼Œéæ³•çš„ç›´æ¥ä¸¢å¼ƒï¼Œä¸å†è½¬å‘ã€‚</li>
</ul>
</li>
<li>
<p>å†³å®šåŒºå—å†…å®¹</p>
<ul>
<li>æŒ‰ä¸€å®šç­–ç•¥ï¼ˆä¸€èˆ¬æ˜¯ä¼˜å…ˆæ‰‹ç»­è´¹æ›´é«˜çš„äº¤æ˜“ï¼‰ä» mempool ä¸­é€‰å‡ºä¸€æ‰¹äº¤æ˜“ï¼Œæ³¨æ„æ€»å¤§å°ä¸èƒ½è¶…è¿‡åŒºå—å¤§å°ä¸Šé™ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_43259286%2Farticle%2Fdetails%2F132406477" target="_blank" title="https://blog.csdn.net/weixin_43259286/article/details/132406477" ref="nofollow noopener noreferrer">blog.csdn</a></li>
<li>åœ¨è¿™äº›äº¤æ˜“å‰åŠ å…¥ä¸€ç¬” coinbase äº¤æ˜“ï¼ŒæŒ‡å®šå¥–åŠ±çš„æ¥æ”¶åœ°å€ï¼ˆçŸ¿å·¥è‡ªå·±çš„åœ°å€ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>æ„é€ åŒºå—å¤´</p>
<ul>
<li>è®¾ç½®å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼ˆæŒ‡å‘çˆ¶åŒºå—ï¼‰ã€Merkle æ ¹ã€æ—¶é—´æˆ³ã€éš¾åº¦ç›®æ ‡ç­‰å­—æ®µï¼Œå½¢æˆä¸€ä¸ªå¾…æŒ–çš„åŒºå—å¤´ã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œ PoW</p>
<ul>
<li>ä¸æ–­ä¿®æ”¹ nonce æˆ–é¢å¤–å­—æ®µï¼Œé‡å¤è®¡ç®—å“ˆå¸Œï¼Œç›´åˆ°æ»¡è¶³éš¾åº¦è¦æ±‚ä¸ºæ­¢ã€‚</li>
<li>è¿™æ˜¯ä¸€ä¸ªå®Œå…¨æ¦‚ç‡æ€§çš„è¿‡ç¨‹ï¼Œç®—åŠ›è¶Šå¤§ï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶å“ˆå¸Œçš„æ¦‚ç‡è¶Šé«˜ã€‚</li>
</ul>
</li>
<li>
<p>å¹¿æ’­æ–°åŒºå—</p>
<ul>
<li>æ‰¾åˆ°åˆæ³•å“ˆå¸Œåï¼ŒçŸ¿å·¥å°†æ–°åŒºå—å¹¿æ’­ç»™ç½‘ç»œä¸­å…¶ä»–èŠ‚ç‚¹ï¼Œå¯¹æ–¹éªŒè¯é€šè¿‡åï¼Œå°†è¯¥åŒºå—æ¥åˆ°å„è‡ªçš„æœ€é•¿åˆæ³•é“¾ä¸Šï¼Œå¹¶ç»§ç»­åœ¨è¿™ä¸ªæ–°åŒºå—ä¸Šå‘å‰æŒ–çŸ¿ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">å››ã€åˆ†æ”¯ä¸â€œæ²¿å“ªæ¡é“¾æŒ–ä¸‹å»â€çš„ç­–ç•¥</h2>
<p>è§†é¢‘å¼ºè°ƒäº†ä¸€ç‚¹ï¼šç”±äºç½‘ç»œå»¶è¿Ÿä¸æŒ–çŸ¿çš„éšæœºæ€§ï¼Œæ¯”ç‰¹å¸ç³»ç»Ÿä¸­ä¸´æ—¶å‡ºç°â€œå¤šåˆ†æ”¯â€çš„æƒ…å†µæ˜¯æ­£å¸¸ç°è±¡ã€‚</p>
<ul>
<li>åŒæ—¶æŒ–å‡ºä¸¤ä¸ªåŒºå—ï¼š
<ul>
<li>ä¸åŒçŸ¿å·¥å‡ ä¹åŒæ—¶åœ¨åŒä¸€ä¸ªé«˜åº¦æŒ–å‡ºä¸¤ä¸ªåŒºå—ï¼Œéƒ¨åˆ†èŠ‚ç‚¹å…ˆæ”¶åˆ° A åŒºå—ï¼Œéƒ¨åˆ†èŠ‚ç‚¹å…ˆæ”¶åˆ° B åŒºå—ï¼Œäºæ˜¯å½¢æˆä¸¤ä¸ªé•¿åº¦ç›¸åŒçš„åˆæ³•åˆ†æ”¯ã€‚</li>
</ul>
</li>
<li>çŸ¿å·¥çš„ç­–ç•¥ï¼š
<ul>
<li>æ¯ä¸ªçŸ¿å·¥æ€»æ˜¯å¯¹â€œå½“å‰çœ‹åˆ°çš„æœ€é•¿åˆæ³•é“¾â€çš„æœ«å°¾è¿›è¡ŒæŒ–çŸ¿ï¼Œå³åªåœ¨è‡ªå·±è®¤ä¸ºçš„ä¸»é“¾ä¸Šç»§ç»­å»¶é•¿ã€‚</li>
</ul>
</li>
<li>åˆ†æ”¯çš„æ¶ˆè§£ï¼š
<ul>
<li>ä¹‹åæŸä¸ªåˆ†æ”¯å…ˆæŒ–å‡ºä¸‹ä¸€ä¸ªåŒºå—ï¼Œå°±å˜æˆæ›´é•¿çš„é“¾ï¼Œç½‘ç»œä¸­å¤§å¤šæ•°èŠ‚ç‚¹ä¼šéšä¹‹åˆ‡æ¢åˆ°æ›´é•¿çš„åˆ†æ”¯ï¼Œå¦ä¸€æ¡çŸ­åˆ†æ”¯å˜æˆâ€œå­¤å—é“¾â€ï¼Œå…¶åŒºå—å¥–åŠ±ä½œåºŸã€å¯¹åº”äº¤æ˜“éœ€è¦é‡æ–°è¢«æ‰“åŒ…ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ä¸€ç­–ç•¥ä¿è¯äº†é•¿è¿œæ¥çœ‹å…¨ç½‘ä¼šé€æ¸æ”¶æ•›åˆ°ä¸€ä¸ªä¸»é“¾ï¼Œä½†çŸ­æœŸå†…å…è®¸å­˜åœ¨æš‚æ—¶çš„ä¸ä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€éš¾åº¦ã€æ”¶ç›Šä¸çŸ¿å·¥è¡Œä¸ºï¼ˆä¸å‰ä¸€è®²çš„è¡”æ¥ï¼‰</h2>
<p>è™½ç„¶â€œéš¾åº¦ã€å‡ºå—æ—¶é—´â€ç­‰ç»†èŠ‚ä¸»è¦åœ¨ä¸Šä¸€è®²â€œæŒ–çŸ¿éš¾åº¦â€é‡Œå±•å¼€ï¼Œä½†æœ¬è§†é¢‘åœ¨è®²æŒ–çŸ¿è¡Œä¸ºæ—¶æœ‰è‹¥å¹²å…³é”®æ‰¿æ¥ç‚¹ã€‚</p>
<ul>
<li>å‡ºå—æ—¶é—´å’Œéš¾åº¦è°ƒèŠ‚ï¼š
<ul>
<li>æ¯”ç‰¹å¸ç³»ç»Ÿä»¥ 10 åˆ†é’Ÿå·¦å³çš„å¹³å‡å‡ºå—æ—¶é—´ä¸ºç›®æ ‡ï¼Œé€šè¿‡å…¨ç½‘ç®—åŠ›ä¸éš¾åº¦è°ƒæ•´æœºåˆ¶ï¼Œä½¿æ•´ä½“å‡ºå—é€Ÿåº¦åœ¨é•¿æœŸç»Ÿè®¡ä¸Šä¿æŒç¨³å®šã€‚</li>
</ul>
</li>
<li>çŸ¿å·¥æ”¶ç›Šæ„æˆï¼š
<ul>
<li>æ¯ä¸ªæ–°åŒºå—å¸¦æœ‰å›ºå®šåŒºå—å¥–åŠ± + åŒºå—ä¸­æ‰€æœ‰äº¤æ˜“çš„æ‰‹ç»­è´¹ï¼Œåˆè®¡æ”¶ç›Šé€šè¿‡ coinbase äº¤æ˜“å‘ç»™æŒ–å‡ºåŒºå—çš„çŸ¿å·¥ã€‚</li>
</ul>
</li>
<li>çŸ¿å·¥çš„æ¿€åŠ±ä¸å®‰å…¨æ€§ï¼š
<ul>
<li>å› ä¸ºè¦æŠ•å…¥å¤§é‡ç®—åŠ›ä¸ç”µè´¹ï¼ŒçŸ¿å·¥æœ‰åŠ¨æœºéµå®ˆåè®®ï¼ˆå¦åˆ™æŒ–å‡ºçš„éæ³•åŒºå—ä¼šè¢«å…¨èŠ‚ç‚¹æ‹’ç»ï¼Œæ— æ³•è·å¾—å¥–åŠ±ï¼‰ã€‚</li>
<li>å¤§éƒ¨åˆ†ç®—åŠ›è¯šå®æ‰§è¡Œè§„åˆ™æ—¶ï¼Œæ¯”ç‰¹å¸çš„å®‰å…¨æ€§æ‰èƒ½å¾—åˆ°ä¿éšœï¼Œè¿™æ˜¯ PoW æœºåˆ¶è®¾è®¡çš„æ ¹æœ¬å‡ºå‘ç‚¹ä¹‹ä¸€ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-5">å…­ã€è§†é¢‘çš„æ•´ä½“é€»è¾‘ç»“æ„æ€»ç»“</h2>
<p>å¯ä»¥æŠŠæ•´ä¸ªç¬¬ 08 è®²â€œBTC æŒ–çŸ¿â€æ€»ç»“ä¸ºä¸‹é¢çš„ç»“æ„ï¼š</p>
<ol>
<li>å…ˆç•Œå®šâ€œå…¨èŠ‚ç‚¹â€çš„æ¦‚å¿µå’ŒèŒè´£ï¼šç»´æŠ¤åŒºå—é“¾ã€UTXOã€éªŒè¯äº¤æ˜“ä¸åŒºå—ã€‚</li>
<li>å†åœ¨æ­¤åŸºç¡€ä¸Šå®šä¹‰â€œçŸ¿å·¥â€ï¼šå…¨èŠ‚ç‚¹ + å†³å®šæ‰“åŒ…äº¤æ˜“ + æ‰§è¡Œ PoW çš„èŠ‚ç‚¹ã€‚</li>
<li>è¯¦ç»†è®²æŒ–çŸ¿æµç¨‹ï¼šä»æ¥æ”¶äº¤æ˜“ã€æ„é€ åŒºå—ã€PoW è®¡ç®—ï¼Œåˆ°å¹¿æ’­æ–°åŒºå—ã€‚</li>
<li>è§£é‡Šæœ‰åˆ†æ”¯æ—¶çŸ¿å·¥å¦‚ä½•é€‰é“¾ã€ä¸ºä»€ä¹ˆä¼šå‡ºç°åˆ†å‰ï¼Œä»¥åŠç³»ç»Ÿå¦‚ä½•è‡ªç„¶æ¶ˆè§£å¤§å¤šæ•°ä¸´æ—¶åˆ†å‰ã€‚</li>
<li>ä¸ä¸Šä¸€è®²çš„éš¾åº¦è°ƒæ•´ã€æ”¶ç›Šæœºåˆ¶è¡”æ¥ï¼Œå¼ºè°ƒæŒ–çŸ¿è¡Œä¸ºèƒŒåçš„æ¿€åŠ±ä¸å®‰å…¨æ€§å«ä¹‰ã€‚</li>
</ol>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@types åŒ…çš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7599166436684202030</link>    <guid>https://juejin.cn/post/7599166436684202030</guid>    <pubDate>2026-01-26T07:45:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599166436684202030" data-draft-id="7599459943917764646" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@types åŒ…çš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,TypeScript"/> <meta itemprop="datePublished" content="2026-01-26T07:45:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @types åŒ…çš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T07:45:58.000Z" title="Mon Jan 26 2026 07:45:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ TypeScript å¼€å‘æ—¶ï¼Œç»å¸¸éœ€è¦å®‰è£… <code>@types/xxx</code> æ¥è·å¾—ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹æ”¯æŒã€‚è¿™äº›ç¥ç§˜çš„ <code>@types</code> åŒ…æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ<code>DefinitelyTyped</code> åˆæ˜¯ä»€ä¹ˆï¼Ÿæœ¬ç¯‡æ–‡ç« å°†æ­å¼€è¿™äº›ç±»å‹åŒ…çš„ç¥ç§˜é¢çº±ã€‚</p>
</blockquote>
<h2 data-id="heading-0">DefinitelyTypedï¼šTypeScriptçš„"ç±»å‹å®åº“"</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯DefinitelyTypedï¼Ÿ</h3>
<p><strong>DefinitelyTyped</strong>ï¼ˆç®€ç§°DTï¼‰ï¼Œæ˜¯ GitHub ä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸“é—¨ä¸º JavaScript åº“æä¾›é«˜è´¨é‡çš„ TypeScript ç±»å‹å®šä¹‰ã€‚å®ƒæ˜¯ TypeScript ç”Ÿæ€ç³»ç»Ÿä¸­æœ€é‡è¦çš„åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªçº¯ JavaScript åº“ï¼Œä¾‹å¦‚ <code>lodash.js</code> ï¼Œè¿™é‡Œé¢æ˜¯æ²¡æœ‰ç±»å‹ä¿¡æ¯çš„ã€‚åœ¨ JavaScript ä¸­æ˜¯å¯ä»¥å·¥ä½œçš„ï¼š<code>_.map([1,2,3], x =&gt; x * 2);</code>  ã€‚
ä½†åœ¨ TypeScript ä¸­ï¼š<code>import _ from 'lodash';</code>ï¼Œå°±ä¼šæŠ¥é”™ï¼š<code>æ‰¾ä¸åˆ°æ¨¡å—'lodash'çš„å£°æ˜æ–‡ä»¶</code> ã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦å®‰è£…ç±»å‹å®šä¹‰ï¼š<code>npm install --save-dev @types/lodash</code> ï¼Œç„¶å TypeScript å°±èƒ½ç†è§£ <code>lodash</code> äº†ã€‚</p>
<h3 data-id="heading-2">ç±»å‹åŒ…æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Ÿ</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸå§‹çš„ JavaScript åº“ï¼š<code>tiny-validator.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.<span class="hljs-title function_">test</span>(email);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validatePhone</span>(<span class="hljs-params">phone</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\d{10,11}$/</span>.<span class="hljs-title function_">test</span>(phone);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateURL</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(url);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  validateEmail,
  validatePhone,
  validateURL,
  <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>
};
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦ä¸ºå®ƒåˆ›å»ºç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¯¼å‡ºç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ValidationResult</span> {
  <span class="hljs-attr">isValid</span>: <span class="hljs-built_in">boolean</span>;
  message?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// å¯¼å‡ºå‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span>, strict: <span class="hljs-literal">true</span></span>): <span class="hljs-title class_">ValidationResult</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validatePhone</span>(<span class="hljs-params">phone: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validatePhone</span>(<span class="hljs-params">phone: <span class="hljs-built_in">string</span>, countryCode: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateURL</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateURL</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, options: { requireProtocol: <span class="hljs-built_in">boolean</span> }</span>): <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// å¯¼å‡ºå¸¸é‡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;

<span class="hljs-comment">// é»˜è®¤å¯¼å‡º</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">validator</span>: {
  <span class="hljs-attr">validateEmail</span>: <span class="hljs-keyword">typeof</span> validateEmail;
  <span class="hljs-attr">validatePhone</span>: <span class="hljs-keyword">typeof</span> validatePhone;
  <span class="hljs-attr">validateURL</span>: <span class="hljs-keyword">typeof</span> validateURL;
  <span class="hljs-attr">version</span>: <span class="hljs-keyword">typeof</span> version;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> validator;
</code></pre>
<h2 data-id="heading-3">@typesåŒ…çš„å·¥ä½œåŸç†</h2>
<h3 data-id="heading-4">ç±»å‹åŒ…çš„å‘å¸ƒæµç¨‹</h3>
<p>å‡è®¾æˆ‘ä»¬è¦å‘å¸ƒä¸€ä¸ª <code>@types/react</code> åŒ…ï¼š</p>
<ol>
<li>åœ¨DefinitelyTypedæäº¤PRï¼Œæäº¤æ›´æ”¹åˆ° <code>types/react/</code>ï¼›</li>
<li>CIè¿è¡Œæµ‹è¯•ï¼š
<ul>
<li>ç¼–è¯‘ç±»å‹æ£€æŸ¥</li>
<li>è¿è¡Œç±»å‹æµ‹è¯•</li>
<li>éªŒè¯æ ¼å¼</li>
</ul>
</li>
<li>ç»´æŠ¤è€…å®¡æŸ¥</li>
<li>åˆå¹¶PR</li>
<li>è‡ªåŠ¨å‘å¸ƒåˆ° npm ä¸º @types/react</li>
</ol>
<h3 data-id="heading-5">ç±»å‹åŒ…å¦‚ä½•è¢«TypeScriptè¯†åˆ«</h3>
<p>TypeScript ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ç±»å‹ï¼ˆä»¥ <code>lodash</code> ä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li>å½“å‰æ–‡ä»¶çš„ .d.ts å£°æ˜</li>
<li>é¡¹ç›®ä¸­çš„ .d.ts æ–‡ä»¶</li>
<li>node_modules/@types/lodash/index.d.tsï¼šDefinitelyTypedæä¾›çš„</li>
<li>node_modules/lodash/package.json ä¸­çš„ "types" å­—æ®µ</li>
<li>node_modules/lodash/index.d.tsï¼šåº“è‡ªå¸¦çš„ç±»å‹</li>
</ol>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½® <code>tsconfig.json</code>ï¼Œå½±å“ç›¸å…³çš„é¡ºåºï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"typeRoots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"./node_modules/@types"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// é»˜è®¤åŒ…å«</span>
      <span class="hljs-string">"./custom-types"</span>          <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å‹ç›®å½•</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                  <span class="hljs-comment">// æŒ‡å®šè¦åŒ…å«çš„ç±»å‹åŒ…</span>
      <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"lodash"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"react"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">ç‰ˆæœ¬ç®¡ç†ï¼š@typesåŒ…çš„å‘½åè§„åˆ™</h3>
<p>@typesåŒ…çš„ç‰ˆæœ¬ä¸å¯¹åº”åº“çš„ç‰ˆæœ¬å…³è”ï¼Œå‘½åè§„åˆ™ä¸ºï¼š<code>@types/&lt;åº“å&gt;</code> ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>

























<table><thead><tr><th>åŸå§‹åº“</th><th>ç±»å‹åŒ…</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>lodash</td><td>@types/lodash</td><td>ä¸lodashä¸»ç‰ˆæœ¬å¯¹åº”</td></tr><tr><td>react</td><td>@types/react</td><td>ä¸reactç‰ˆæœ¬å¯¹åº”</td></tr><tr><td>node</td><td>@types/node</td><td>ä¸Node.jsç‰ˆæœ¬å¯¹åº”</td></tr></tbody></table>
<blockquote>
<p>å½“ç„¶ï¼Œä¹Ÿå­˜åœ¨ç‰¹æ®Šæƒ…å†µï¼šå¦‚å¸¦ä½œç”¨åŸŸçš„åŒ…ï¼š<code>@angular/core â†’ @types/angular__core</code> ã€‚</p>
</blockquote>
<h2 data-id="heading-7">ç±»å‹åŒ…çš„ç‰ˆæœ¬ç®¡ç†</h2>
<h3 data-id="heading-8">@types/nodeçš„ç‰ˆæœ¬ç®¡ç†</h3>
<p><code>@types/node</code> æ˜¯æ‰€æœ‰ <code>@types</code> åŒ…ä¸­æœ€ç‰¹æ®Šçš„ä¸€ä¸ªï¼Œå› ä¸ºå®ƒä¸Node.jsè¿è¡Œæ—¶ç‰ˆæœ¬ç´§å¯†ç»‘å®šã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json ä¸­çš„ä¾èµ–</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// @types/nodeçš„ç‰ˆæœ¬åº”è¯¥ä¸ä½ çš„Node.jsç‰ˆæœ¬åŒ¹é…</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.0.0"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¯¹åº”Node.js 18.x</span>
    
    <span class="hljs-comment">// å…¶ä»–ç±»å‹åŒ…</span>
    <span class="hljs-attr">"@types/express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.14.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// @types/nodeçš„ç‰ˆæœ¬æ¼”è¿›ç¤ºä¾‹</span>
<span class="hljs-comment">// Node.js 16.x çš„ç±»å‹</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"fs/promises"</span> {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Buffer</span>&gt;;
  <span class="hljs-comment">// Node 16çš„API</span>
}

<span class="hljs-comment">// Node.js 18.x æ–°å¢äº†fetch API</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-comment">// Node 18æ–°å¢äº†å…¨å±€fetch</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">input: RequestInfo, init?: RequestInit</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Response</span>&gt;;
  
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Request</span> {}
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Response</span> {}
}
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å¼€å‘æ—¶éœ€è¦ï¼š</p>
<ul>
<li>Node.js 16 â†’ @types/node@16.x</li>
<li>Node.js 18 â†’ @types/node@18.x</li>
<li>Node.js 20 â†’ @types/node@20.x</li>
</ul>
<h3 data-id="heading-9">ç±»å‹åŒ…çš„ç‰ˆæœ¬å…¼å®¹æ€§</h3>
<p>ç±»å‹åŒ…ç‰ˆæœ¬ä¸åŒ¹é…/ä¸å…¼å®¹çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»å‹åŒ…æ—¶é‡åˆ°çš„æœ€å¸¸è§ä¹Ÿæ˜¯æœ€éº»çƒ¦çš„é—®é¢˜ã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨ <code>lodash@4.17.21</code> ï¼Œä½†å®é™…ä¸Š <code>@types/lodash</code> å·²ç»æ›´æ–°åˆ°äº†æ–°ç‰ˆæœ¬ï¼Œè¿™æ ·å°±å‡ºç°äº†ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h4 data-id="heading-10">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-11">æŒ‡å®šç²¾ç¡®ç‰ˆæœ¬</h5>
<pre><code class="hljs language-bash" lang="bash">npm install @types/lodash@4.14.0  <span class="hljs-comment"># å®‰è£…ç‰¹å®šç‰ˆæœ¬</span>
</code></pre>
<h5 data-id="heading-12">æŸ¥çœ‹åº“çš„package.json</h5>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-library"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"2.0.0"</span>,
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"@types/lodash"</span>: <span class="hljs-string">"^4.14.0"</span>  # æ¨èçš„ç±»å‹ç‰ˆæœ¬
  }
}
</code></pre>
<h5 data-id="heading-13">ä½¿ç”¨peerDependencies</h5>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"@types/my-library"</span>,
  <span class="hljs-string">"peerDependencies"</span>: {
    <span class="hljs-string">"my-library"</span>: <span class="hljs-string">"&gt;=2.0.0 &lt;3.0.0"</span>  # è¦æ±‚åŸåº“ç‰ˆæœ¬
  }
}
</code></pre>
<h3 data-id="heading-14">å¦‚ä½•é€‰æ‹©åˆé€‚çš„@typesç‰ˆæœ¬</h3>
<h4 data-id="heading-15">1. æ£€æŸ¥ä½ å®‰è£…çš„åº“ç‰ˆæœ¬</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"17.0.2"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// React 17.0.2</span>
    <span class="hljs-attr">"lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"4.17.21"</span>     <span class="hljs-comment">// Lodash 4.17.21</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-16">2. æŸ¥æ‰¾å¯¹åº”çš„@typesç‰ˆæœ¬</h4>
<p>ä¾‹å¦‚ï¼š
å¯¹äºReact 18ï¼Œåº”è¯¥ä½¿ç”¨ @types/react@18.x.x
å¯¹äºLodash 4ï¼Œåº”è¯¥ä½¿ç”¨ @types/lodash@4.x.x</p>
<h4 data-id="heading-17">3. æŸ¥çœ‹ç‰ˆæœ¬å†å²</h4>
<p>å¯ä»¥é€šè¿‡npmæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm view @types/react versions  <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬</span>
npm view @types/react@18.0.0    <span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šç‰ˆæœ¬ä¿¡æ¯</span>
</code></pre>
<h4 data-id="heading-18">4. åœ¨package.jsonä¸­æŒ‡å®š</h4>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"@types/react"</span>: <span class="hljs-string">"17.0.0"</span>,    <span class="hljs-comment">// åŒ¹é…React 17.0.x</span>
    <span class="hljs-string">"@types/lodash"</span>: <span class="hljs-string">"4.14.0"</span>    <span class="hljs-comment">// Lodash 4çš„ç±»å‹</span>
  }
}
</code></pre>
<h4 data-id="heading-19">5. å¤„ç†å†²çª</h4>
<p>å¦‚æœåº“Aä¾èµ– <code>@types/lodash@4.14.0</code>ï¼Œè€Œåº“Bä¾èµ– <code>@types/lodash@4.17.0</code> ï¼ŒTypeScriptä¼šè‡ªåŠ¨é€‰æ‹©è¾ƒé«˜çš„ç‰ˆæœ¬ï¼ˆ<code>4.17.0</code>ï¼‰ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºç±»å‹å®šä¹‰æ˜¯å‘åå…¼å®¹çš„ã€‚</p>
<h2 data-id="heading-20">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-21">å¤šä¸ªç±»å‹åŒ…å†²çª</h3>
<p>åœºæ™¯ï¼šä¸¤ä¸ªåº“éƒ½æä¾›äº†ç›¸åŒçš„ç±»å‹å®šä¹‰ï¼Œä¾‹å¦‚ï¼š
åœ¨ <code>@types/jquery</code> å’Œ <code>@types/some-other-plugin</code> ä¸¤ä¸ªåŒ…ä¸­éƒ½å£°æ˜äº†å…¨å±€çš„ <code>$</code>ï¼Œå¯¼è‡´å†²çªï¼</p>
<h4 data-id="heading-22">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-23">1. ä½¿ç”¨æ¨¡å—å£°æ˜è€Œä¸æ˜¯å…¨å±€å£°æ˜</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"jquery-plugin"</span> {
  <span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">"jquery"</span>;
  
  <span class="hljs-comment">// ä½¿ç”¨å¯¼å…¥çš„$ï¼Œè€Œä¸æ˜¯å£°æ˜å…¨å±€çš„$</span>
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">JQuery</span> {
    <span class="hljs-title function_">myPlugin</span>(): <span class="hljs-title class_">JQuery</span>;
  }
}
</code></pre>
<h5 data-id="heading-24">2. åˆå¹¶å£°æ˜</h5>
<p>å¦‚æœä¸¤ä¸ªå£°æ˜ä¸å†²çªï¼Œå¯ä»¥å…±å­˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">JQuery</span> {
  <span class="hljs-comment">// æ¥è‡ªjquery</span>
  <span class="hljs-title function_">hide</span>(): <span class="hljs-title class_">JQuery</span>;
  <span class="hljs-title function_">show</span>(): <span class="hljs-title class_">JQuery</span>;
  
  <span class="hljs-comment">// æ¥è‡ªplugin1</span>
  <span class="hljs-title function_">plugin1Method</span>(): <span class="hljs-title class_">JQuery</span>;
  
  <span class="hljs-comment">// æ¥è‡ªplugin2  </span>
  <span class="hljs-title function_">plugin2Method</span>(): <span class="hljs-title class_">JQuery</span>;
}
</code></pre>
<h5 data-id="heading-25">3. åœ¨tsconfigä¸­æ’é™¤æœ‰é—®é¢˜çš„ç±»å‹</h5>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"types"</span>: [
      <span class="hljs-string">"jquery"</span>,           <span class="hljs-comment">// åŒ…å«jquery</span>
      <span class="hljs-comment">// "jquery-plugin"   // æ’é™¤å†²çªçš„æ’ä»¶ç±»å‹</span>
    ]
  }
}
</code></pre>
<h3 data-id="heading-26">ç±»å‹åŒ…ç‰ˆæœ¬ä¸åŒ¹é…</h3>
<p>åœºæ™¯ï¼šç±»å‹åŒ…ç‰ˆæœ¬ä¸åº“ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œä¾‹å¦‚åº“ç‰ˆæœ¬ä¸º <code>lodash@4.17.21</code> ï¼Œè€Œç±»å‹åŒ…ç‰ˆæœ¬ä¸º <code>@types/lodash@4.14.0</code> ã€‚ç”±äºç±»å‹åŒ…ç‰ˆæœ¬è¾ƒæ—§ï¼Œå¯¼è‡´ç¼ºå¤±æŸä¸ªAPIï¼Œç›´æ¥ä½¿ç”¨æ–°ç‰ˆAPIä¼šæŠ¥é”™ã€‚</p>
<h4 data-id="heading-27">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-28">1. å‡çº§ç±»å‹åŒ…</h5>
<pre><code class="hljs language-bash" lang="bash">npm update @types/lodash@latest
</code></pre>
<h5 data-id="heading-29">2. ä¸´æ—¶è¡¥å……ç±»å‹å®šä¹‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// custom-types/lodash-extensions.d.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'lodash'</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'lodash'</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LoDashStatic</span> {
    <span class="hljs-comment">// è¡¥å……ç¼ºå¤±çš„æ–¹æ³•</span>
    flattenDepth&lt;T&gt;(<span class="hljs-attr">array</span>: <span class="hljs-title class_">ListOfRecursiveArraysOrValues</span>&lt;T&gt;, depth?: <span class="hljs-built_in">number</span>): T[];
  }
}
</code></pre>
<h5 data-id="heading-30">3. é™çº§åº“ç‰ˆæœ¬ï¼ˆä¸æ¨èï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash">npm install lodash@4.14.0  <span class="hljs-comment"># ä¸ç±»å‹åŒ…åŒ¹é…</span>
</code></pre>
<h3 data-id="heading-31">å…¨å±€ç±»å‹æ±¡æŸ“</h3>
<p>åœºæ™¯ï¼šç±»å‹åŒ…å£°æ˜äº†å…¨å±€ç±»å‹ï¼Œå½±å“äº†æˆ‘ä»¬çš„ä»£ç ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨ <code>@types/jest</code>ï¼Œå®ƒå£°æ˜äº†å…¨å±€çš„ <code>describe</code>ã€<code>it</code>ã€<code>expect</code> ã€‚ä½†åœ¨æˆ‘ä»¬çš„éæµ‹è¯•ä»£ç ä¸­ï¼Œè¿™äº›æ˜¯ä¸åº”è¯¥å­˜åœ¨çš„ã€‚</p>
<h4 data-id="heading-32">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-33">1. éš”ç¦»æµ‹è¯•ç±»å‹</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ tsconfig.json ä¸­</span>
{
  <span class="hljs-string">"extends"</span>: <span class="hljs-string">"./tsconfig.base.json"</span>,
  <span class="hljs-comment">// ä¸»é…ç½®ï¼šæ’é™¤æµ‹è¯•ç±»å‹</span>
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"types"</span>: []  <span class="hljs-comment">// ä¸åŒ…å«ä»»ä½•å…¨å±€ç±»å‹</span>
  },
  
  <span class="hljs-comment">// æµ‹è¯•é…ç½®</span>
  <span class="hljs-string">"tsconfig.test.json"</span>: {
    <span class="hljs-string">"extends"</span>: <span class="hljs-string">"./tsconfig.json"</span>,
    <span class="hljs-string">"compilerOptions"</span>: {
      <span class="hljs-string">"types"</span>: [<span class="hljs-string">"jest"</span>, <span class="hljs-string">"node"</span>]  <span class="hljs-comment">// åªåœ¨æµ‹è¯•ä¸­åŒ…å«</span>
    }
  }
}
</code></pre>
<h5 data-id="heading-34">2. ä½¿ç”¨importä»£æ›¿å…¨å±€</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@jest/globals'</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'test'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should work'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3 data-id="heading-35">å¾ªç¯ä¾èµ–çš„ç±»å‹åŒ…</h3>
<p>ç°è±¡ï¼šç±»å‹åŒ…ç›¸äº’ä¾èµ–å¯¼è‡´å¾ªç¯ã€‚ä¾‹å¦‚ï¼š<code>@types/react</code> ä¾èµ–äº <code>@types/prop-types</code>ï¼›è€Œ <code>@types/prop-types</code> åè¿‡æ¥åˆå¯èƒ½é—´æ¥å¼•ç”¨ <code>@types/react</code> ã€‚ç»“æœå°±å¯¼è‡´ï¼šå¯¼å…¥å¾ªç¯æˆ–æœ€å¤§æ·±åº¦è¶…å‡ºã€‚</p>
<h4 data-id="heading-36">è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-37">1. ä½¿ç”¨ import type</h5>
<p>å³ï¼šåœ¨ç±»å‹åŒ…ä¸­ï¼Œåªå¯¼å…¥ç±»å‹ï¼Œä¸å¯¼å…¥å€¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">ReactNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
</code></pre>
<h5 data-id="heading-38">2. ä½¿ç”¨ä¸‰æ–œçº¿å¼•ç”¨</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/// &lt;reference types="react" /&gt; // è¿™å‘Šè¯‰TypeScriptç±»å‹å­˜åœ¨ï¼Œä½†ä¸å¯¼å…¥</span>
</code></pre>
<blockquote>
<p>åœ¨ ES6 ä»¥å‰ï¼ŒJavaScript å¹¶æ²¡æœ‰ä¸€ä¸ªå®˜æ–¹çš„æ¨¡å—ç³»ç»Ÿï¼Œè€Œæ˜¯åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ï¼Œä»¥ä¸åŒçš„æ–¹å¼åŠ ä¸Šäº†è¿™ä¸ªç¼ºå¤±çš„ç‰¹æ€§ã€‚å¦‚ node.js ä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code>ï¼›AMD ä½¿ç”¨ä¸€ä¸ªå¸¦å›è°ƒçš„ <code>define</code> å‡½æ•°ã€‚åæ¥ï¼ŒTypeScript é€šè¿‡ <strong>module</strong> å…³é”®å­—å’Œâ€œ<strong>ä¸‰æ–œçº¿</strong>â€å¯¼å…¥æ¥å¡«è¡¥äº†è¿™ä¸ªç©ºç™½ã€‚</p>
</blockquote>
<blockquote>
<p><strong>module</strong> å…³é”®å­—å’Œâ€œ<strong>ä¸‰æ–œçº¿</strong>â€å¯¼å…¥åªæ˜¯ä¸€ä¸ªå†å²é—è¿¹ï¼Œåœ¨ ES6+ ä¸­ï¼Œè¿˜æ˜¯æ¨è <code>import</code> å’Œ <code>export</code> ã€‚</p>
</blockquote>
<h5 data-id="heading-39">3. é‡æ–°è®¾è®¡ç±»å‹ç»“æ„</h5>
<p>å³ï¼šå°†å…±äº«ç±»å‹æå–åˆ°å•ç‹¬çš„æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// types/shared/index.d.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CommonProps</span> {
  className?: <span class="hljs-built_in">string</span>;
  style?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;
}

<span class="hljs-comment">// types/react/index.d.ts  </span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../shared'</span>;

<span class="hljs-comment">// types/vue/index.d.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../shared'</span>;
</code></pre>
<h2 data-id="heading-40">æœ€ä½³å®è·µæŒ‡å—</h2>
<h3 data-id="heading-41">ä½œä¸ºç±»å‹åŒ…ä½¿ç”¨è€…</h3>
<h4 data-id="heading-42">package.json æœ€ä½³é…ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json æœ€ä½³é…ç½®</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-app"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// 1. åŒ¹é…è¿è¡Œæ—¶ç‰ˆæœ¬</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.0.0"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸Node.jsç‰ˆæœ¬åŒ¹é…</span>
    
    <span class="hljs-comment">// 2. ä½¿ç”¨^å…è®¸æ¬¡è¦ç‰ˆæœ¬æ›´æ–°</span>
    <span class="hljs-attr">"@types/react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.0.0"</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 3. æŒ‰éœ€å®‰è£…ï¼Œä¸è¦ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰@types</span>
    <span class="hljs-comment">// é”™è¯¯åšæ³•ï¼š@types/* ï¼ˆå®‰è£…æ‰€æœ‰ï¼‰</span>
    <span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼šåªå®‰è£…éœ€è¦çš„</span>
    
    <span class="hljs-comment">// 4. å®šæœŸæ›´æ–°</span>
    <span class="hljs-comment">// npm update @types/*</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// 5. æ·»åŠ ç±»å‹æ£€æŸ¥è„šæœ¬</span>
    <span class="hljs-attr">"type-check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc --noEmit"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type-check:watch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc --noEmit --watch"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-43">tsconfig.json æœ€ä½³é…ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// tsconfig.json æœ€ä½³å®è·µ</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// 1. æ˜ç¡®æŒ‡å®šç±»å‹åŒ…</span>
    <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"react-dom"</span>
      <span class="hljs-comment">// æ˜ç¡®åˆ—å‡ºï¼Œé¿å…æ„å¤–åŒ…å«</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 2. æ§åˆ¶ç±»å‹æŸ¥æ‰¾è·¯å¾„</span>
    <span class="hljs-attr">"typeRoots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"./node_modules/@types"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"./src/types"</span>  <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å‹ç›®å½•</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 3. å¯ç”¨ä¸¥æ ¼æ£€æŸ¥</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 4. å¤„ç†æ¨¡å—è§£æ</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// 5. ç¡®ä¿å…¼å®¹æ€§</span>
    <span class="hljs-attr">"skipLibCheck"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è·³è¿‡åº“çš„ç±»å‹æ£€æŸ¥ï¼Œæé«˜ç¼–è¯‘é€Ÿåº¦</span>
    <span class="hljs-attr">"forceConsistentCasingInFileNames"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  
  <span class="hljs-comment">// 6. åŒ…å«å’Œæ’é™¤æ–‡ä»¶</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"tests/**/*"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"node_modules"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"**/*.test.ts"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"**/*.spec.ts"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-44">ä½œä¸ºç±»å‹åŒ…è´¡çŒ®è€…</h3>
<h4 data-id="heading-45">1. ä½¿ç”¨å‡½æ•°é‡è½½è€Œä¸æ˜¯è”åˆç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ ä¸å¥½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Date</span>;

<span class="hljs-comment">// âœ… æ›´å¥½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Date</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">input: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Date</span>;
</code></pre>
<h4 data-id="heading-46">2. ä½¿ç”¨æ³›å‹æé«˜çµæ´»æ€§</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ ä¸çµæ´»ã€ä¸å®‰å…¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params">obj: <span class="hljs-built_in">any</span>, key: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">any</span>;

<span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨</span>
<span class="hljs-keyword">function</span> getValue&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">obj</span>: T, <span class="hljs-attr">key</span>: K): T[K];
</code></pre>
<h4 data-id="heading-47">3. æä¾›å®Œæ•´çš„JSDocæ³¨é‡Š</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * éªŒè¯ç”µå­é‚®ä»¶åœ°å€
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">email</span> - è¦éªŒè¯çš„ç”µå­é‚®ä»¶åœ°å€
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">strict</span> - æ˜¯å¦è¿›è¡Œä¸¥æ ¼éªŒè¯
 * <span class="hljs-doctag">@returns</span> éªŒè¯ç»“æœ
 * <span class="hljs-doctag">@example</span>
 * validateEmail('test<span class="hljs-doctag">@example</span>.com') // true
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span>, strict?: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">boolean</span>;
</code></pre>
<h4 data-id="heading-48">4. åŒ…å«ç±»å‹æµ‹è¯•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>);

<span class="hljs-comment">// æµ‹è¯•ç±»å‹æ¨æ–­</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> doubled = _.<span class="hljs-title function_">map</span>(numbers, <span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x * <span class="hljs-number">2</span>);  <span class="hljs-comment">// åº”è¯¥æ¨æ–­ä¸º number[]</span>

<span class="hljs-comment">// æµ‹è¯•è¾¹ç•Œæƒ…å†µ</span>
_.<span class="hljs-title function_">chunk</span>([], <span class="hljs-number">2</span>);  <span class="hljs-comment">// åº”è¯¥è¿”å› [] è€Œä¸æ˜¯ never[]</span>
</code></pre>
<h4 data-id="heading-49">5. éµå¾ªå‘½åçº¦å®š</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•ï¼ˆPascalCaseï¼‰è¡¨ç¤ºç±»å‹å’Œæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserConfig</span> { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ValidationResult</span> = { <span class="hljs-comment">/* ... */</span> };

<span class="hljs-comment">// ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆcamelCaseï¼‰è¡¨ç¤ºå‡½æ•°å’Œå˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateInput</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultConfig</span>: <span class="hljs-title class_">UserConfig</span> = { <span class="hljs-comment">/* ... */</span> };
</code></pre>
<h2 data-id="heading-50">TypeScriptçš„æ¼”è¿›</h2>
<p>TypeScriptæ­£åœ¨å‡å°‘å¯¹@typesçš„ä¾èµ–</p>
<ol>
<li>å£°æ˜æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆï¼šä½¿ç”¨ <code>tsc --declaration</code> è‡ªåŠ¨ç”Ÿæˆ .d.ts æ–‡ä»¶</li>
<li>æ›´å¥½çš„æ¨¡å—è§£æï¼šTypeScript 4.7+ æ”¹è¿›äº†å¯¹ <code>package.json</code> ä¸­ <code>exports</code> çš„æ”¯æŒ</li>
<li>ç±»å‹å¯¼å…¥ä¼˜åŒ–ï¼š<code>import type</code> è¯­æ³•ï¼Œå‡å°‘è¿è¡Œæ—¶ä¾èµ–</li>
<li>éƒ¨åˆ†ç±»å‹æ£€æŸ¥ï¼šå¯ä»¥å¯¹ JavaScript æ–‡ä»¶è¿›è¡Œæ¸è¿›å¼ç±»å‹æ£€æŸ¥</li>
</ol>
<h2 data-id="heading-51">å¼€å‘è€…å»ºè®®</h2>
<h3 data-id="heading-52">åº“å¼€å‘è€…ï¼š</h3>
<ol>
<li>ç”¨TypeScriptç¼–å†™ä½ çš„åº“</li>
<li>å‘å¸ƒæ—¶åŒ…å«ç±»å‹å®šä¹‰</li>
<li>ä½¿ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥</li>
<li>æä¾›å®Œæ•´çš„APIæ–‡æ¡£</li>
</ol>
<h3 data-id="heading-53">åº”ç”¨å¼€å‘è€…ï¼š</h3>
<ol>
<li>ä¼˜å…ˆé€‰æ‹©æœ‰è‡ªå¸¦ç±»å‹çš„åº“</li>
<li>å®šæœŸæ›´æ–°@typesåŒ…</li>
<li>å­¦ä¼šé˜…è¯»å’Œç†è§£ç±»å‹å®šä¹‰</li>
<li>ä¸ºç¼ºå¤±ç±»å‹çš„åº“è´¡çŒ®ç±»å‹å®šä¹‰</li>
</ol>
<h3 data-id="heading-54">ç±»å‹ç»´æŠ¤è€…ï¼š</h3>
<ol>
<li>ä¿æŒä¸ä¸Šæ¸¸åº“çš„åŒæ­¥</li>
<li>ç¼–å†™å…¨é¢çš„ç±»å‹æµ‹è¯•</li>
<li>åŠæ—¶å“åº”ç¤¾åŒºé—®é¢˜</li>
<li>éµå¾ªDefinitelyTypedçš„è´¡çŒ®æŒ‡å—</li>
</ol>
<h2 data-id="heading-55">ç»“è¯­</h2>
<p><code>@types</code> ç”Ÿæ€ç³»ç»Ÿæ˜¯ TypeScript æˆåŠŸçš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚é€šè¿‡ <code>DefinitelyTyped</code> é¡¹ç›®ï¼Œç¤¾åŒºä¸ºæˆåƒä¸Šä¸‡çš„ JavaScript åº“æä¾›äº†é«˜è´¨é‡çš„ç±»å‹å®šä¹‰ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>