<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[JDK 21 è™šæ‹Ÿçº¿ç¨‹ï¼šJava å¹¶å‘ç¼–ç¨‹çš„â€œé™ç»´æ‰“å‡»â€]]></title>    <link>https://juejin.cn/post/7582073642869473295</link>    <guid>https://juejin.cn/post/7582073642869473295</guid>    <pubDate>2025-12-11T00:51:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582073642869473295" data-draft-id="7582073642869456911" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JDK 21 è™šæ‹Ÿçº¿ç¨‹ï¼šJava å¹¶å‘ç¼–ç¨‹çš„â€œé™ç»´æ‰“å‡»â€"/> <meta itemprop="keywords" content="åç«¯,Java,Spring"/> <meta itemprop="datePublished" content="2025-12-11T00:51:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sumAll"/> <meta itemprop="url" content="https://juejin.cn/user/2863547353939175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JDK 21 è™šæ‹Ÿçº¿ç¨‹ï¼šJava å¹¶å‘ç¼–ç¨‹çš„â€œé™ç»´æ‰“å‡»â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2863547353939175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sumAll
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:51:37.000Z" title="Thu Dec 11 2025 00:51:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a3861d2de34460ab94bdc1b41e7fee8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3VtQWxs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766019097&amp;x-signature=PflRls7fEEdU6P2Qjle9cUZgQFU%3D" alt="3_cover.png" loading="lazy"/></p>
<blockquote>
<p><strong>å‰è¨€</strong>ï¼šå¦‚æœä½ è¿˜åœ¨ä¸ºçº¿ç¨‹æ± å‚æ•°è°ƒä¼˜å¤´ç§ƒï¼Œæˆ–è€…è¢« <code>CompletableFuture</code> çš„å›è°ƒåœ°ç‹±æŠ˜ç£¨ï¼Œé‚£ä¹ˆ JDK 21 å¸¦æ¥çš„è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰ç»å¯¹æ˜¯ä½ å¿…é¡»æŒæ¡çš„â€œæ•‘å‘½ç¨»è‰â€ã€‚å®ƒä¸ä»…æ˜¯ Project Loom çš„æ ¸å¿ƒæˆæœï¼Œæ›´æ˜¯ Java è¯ç”Ÿä»¥æ¥å¹¶å‘æ¨¡å‹æœ€å¤§çš„ä¸€æ¬¡å˜é©ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è™šæ‹Ÿçº¿ç¨‹ï¼Ÿï¼ˆThe Whyï¼‰</h2>
<p>åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆèŠèŠâ€œç—›ç‚¹â€ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼ŒJava çš„å¹¶å‘æ¨¡å‹ä¸€ç›´æ˜¯ <strong>â€œä¸€è¯·æ±‚ä¸€çº¿ç¨‹â€ï¼ˆThread-per-Requestï¼‰</strong>ã€‚è¿™æ„å‘³ç€ï¼Œæ¯å½“æœ‰ä¸€ä¸ªæ–°çš„ HTTP è¯·æ±‚è¿›æ¥ï¼ŒWeb æœåŠ¡å™¨ï¼ˆå¦‚ Tomcatï¼‰å°±ä¼šåˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å»å¤„ç†ã€‚</p>
<h3 data-id="heading-1">ç—›ç‚¹ä¸€ï¼šæ˜‚è´µçš„å¹³å°çº¿ç¨‹</h3>
<p>åœ¨ JDK 21 ä¹‹å‰ï¼ŒJava çš„ <code>Thread</code> ç›´æ¥æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçš„å†…æ ¸çº¿ç¨‹ï¼ˆPlatform Threadï¼‰ã€‚</p>
<ul>
<li><strong>å†…å­˜è´µ</strong>ï¼šä¸€ä¸ªå¹³å°çº¿ç¨‹é»˜è®¤å ç”¨çº¦ 1MB - 2MB çš„æ ˆå†…å­˜ã€‚</li>
<li><strong>åˆ‡æ¢æ…¢</strong>ï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¶‰åŠå†…æ ¸æ€ä¸ç”¨æˆ·æ€çš„è½¬æ¢ï¼Œå¼€é”€å·¨å¤§ã€‚</li>
<li><strong>æ•°é‡å—é™</strong>ï¼šä½ å¾ˆéš¾åœ¨ä¸€å°æ™®é€šæœåŠ¡å™¨ä¸Šå¯åŠ¨å‡ ä¸‡ä¸ªçº¿ç¨‹ï¼Œæœºå™¨ä¼šç›´æ¥å¡æ­»ã€‚</li>
</ul>
<h3 data-id="heading-2">ç—›ç‚¹äºŒï¼šå¼‚æ­¥ç¼–ç¨‹çš„â€œå¦¥åâ€</h3>
<p>ä¸ºäº†è§£å†³é«˜å¹¶å‘é—®é¢˜ï¼Œæˆ‘ä»¬è¢«è¿«å¼•å…¥äº† NIOã€Nettyã€WebFlux ç­‰å¼‚æ­¥æ¡†æ¶ã€‚è™½ç„¶ååé‡ä¸Šå»äº†ï¼Œä½†ä»£ä»·æ˜¯æƒ¨ç—›çš„ï¼š</p>
<ul>
<li><strong>ä»£ç éš¾æ‡‚</strong>ï¼šé€»è¾‘è¢«æ‹†å¾—æ”¯ç¦»ç ´ç¢ï¼Œå›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰éšå¤„å¯è§ã€‚</li>
<li><strong>è°ƒè¯•å™©æ¢¦</strong>ï¼šä¸€æ—¦æŠ¥é”™ï¼Œå †æ ˆè¿½è¸ªï¼ˆStack Traceï¼‰é‡Œå…¨æ˜¯æ¡†æ¶ä»£ç ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°ä¸šåŠ¡é€»è¾‘çš„æºå¤´ã€‚</li>
</ul>
<p><strong>JDK 21 è™šæ‹Ÿçº¿ç¨‹çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†æ‰“ç ´è¿™ä¸ªåƒµå±€ï¼š</strong></p>
<blockquote>
<p><strong>å®ƒå…è®¸ä½ ç”¨æœ€ç†Ÿæ‚‰çš„â€œåŒæ­¥é˜»å¡â€ä»£ç é£æ ¼ï¼Œå†™å‡ºåª²ç¾å¼‚æ­¥æ¡†æ¶çš„â€œé«˜å¹¶å‘æ€§èƒ½â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">2. ä»€ä¹ˆæ˜¯è™šæ‹Ÿçº¿ç¨‹ï¼Ÿï¼ˆThe Whatï¼‰</h2>
<p><strong>è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰</strong> æ˜¯ä¸€ç§ç”± JVM è‡ªèº«ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ï¼Œå®ƒä¸å†ä¸æ“ä½œç³»ç»Ÿçš„å†…æ ¸çº¿ç¨‹ 1:1 ç»‘å®šã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„å¯¹æ¯”ï¼š</p>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">å¹³å°çº¿ç¨‹ (Platform Thread)</th><th align="left">è™šæ‹Ÿçº¿ç¨‹ (Virtual Thread)</th></tr></thead><tbody><tr><td align="left"><strong>ç®¡ç†è€…</strong></td><td align="left">æ“ä½œç³»ç»Ÿå†…æ ¸</td><td align="left">JVM è™šæ‹Ÿæœº</td></tr><tr><td align="left"><strong>æ˜ å°„å…³ç³»</strong></td><td align="left">1:1 (ä¸€ä¸ª Java çº¿ç¨‹å¯¹åº”ä¸€ä¸ª OS çº¿ç¨‹)</td><td align="left">M:N (å¤§é‡è™šæ‹Ÿçº¿ç¨‹å¤ç”¨å°‘é‡ OS çº¿ç¨‹)</td></tr><tr><td align="left"><strong>åˆ›å»ºæˆæœ¬</strong></td><td align="left">æ˜‚è´µ (MB çº§å†…å­˜ï¼Œç³»ç»Ÿè°ƒç”¨)</td><td align="left">æä½ (å‡ ç™¾å­—èŠ‚ï¼Œæ™®é€š Java å¯¹è±¡)</td></tr><tr><td align="left"><strong>æ•°é‡ä¸Šé™</strong></td><td align="left">å‡ åƒä¸ª</td><td align="left">å‡ ç™¾ä¸‡ä¸ª (ä»…å—å †å†…å­˜é™åˆ¶)</td></tr></tbody></table>
<p>ç®€å•æ¥è¯´ï¼Œè™šæ‹Ÿçº¿ç¨‹å°±åƒæ˜¯ Java ä¸­çš„â€œåç¨‹â€ï¼ˆGo è¯­è¨€çš„ Goroutineï¼‰ï¼Œä½†å®ƒå®Œå…¨èå…¥äº†ç°æœ‰çš„ <code>java.lang.Thread</code> APIï¼Œè€ä»£ç å‡ ä¹ä¸ç”¨æ”¹å°±èƒ½äº«å—çº¢åˆ©ã€‚</p>
<hr/>
<h2 data-id="heading-4">3. æ ¸å¿ƒåŸç†ï¼šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿï¼ˆUnder the Hoodï¼‰</h2>
<p>è¿™æ˜¯ç†è§£è™šæ‹Ÿçº¿ç¨‹æœ€å…³é”®çš„éƒ¨åˆ†ã€‚ä¸ºäº†è®²æ¸…æ¥šï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª"<strong>å‡ºç§Ÿè½¦æ¨¡å‹</strong>"æ¥æ‰“æ¯”æ–¹ã€‚</p>
<ul>
<li><strong>å‡ºç§Ÿè½¦å…¬å¸ï¼ˆæ“ä½œç³»ç»Ÿ OSï¼‰</strong>ï¼šåªæœ‰ <strong>10 è¾†å‡ºç§Ÿè½¦</strong>ï¼ˆè¿™æ˜¯ä½ çš„ CPU æ ¸å¿ƒæ•°/è½½ä½“çº¿ç¨‹ Carrier Threadsï¼‰ã€‚</li>
<li><strong>ä¹˜å®¢ï¼ˆä»»åŠ¡ Taskï¼‰</strong>ï¼šæœ‰ <strong>10,000 åä¹˜å®¢</strong>ï¼ˆè¿™æ˜¯ä½ çš„å¹¶å‘è¯·æ±‚ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">ä¼ ç»Ÿæ¨¡å¼ï¼ˆå¹³å°çº¿ç¨‹ï¼‰</h3>
<p>æ¯è¾†è½¦ä¸€æ¬¡åªèƒ½æ‹‰ä¸€ä¸ªä¹˜å®¢ã€‚å¦‚æœä¹˜å®¢åŠè·¯è¯´ï¼šâ€œå¸ˆå‚…ï¼Œæˆ‘è¦å»å–ä¸ªå¿«é€’ï¼ˆæ•°æ®åº“æŸ¥è¯¢/ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œä½ ç­‰æˆ‘ 5 åˆ†é’Ÿã€‚â€
è¿™æ—¶å€™ï¼Œ<strong>å‡ºç§Ÿè½¦å°±çœŸçš„åœåœ¨è·¯è¾¹æ­»ç­‰</strong>ï¼ˆçº¿ç¨‹é˜»å¡ï¼‰ã€‚å› ä¸ºè½¦åªæœ‰ 10 è¾†ï¼Œä¸€æ—¦éƒ½åœ¨ç­‰äººï¼Œåé¢ 9990 ä¸ªä¹˜å®¢åªèƒ½æ’é˜Ÿå–è¥¿åŒ—é£ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼ ç»Ÿçº¿ç¨‹æ± å¹¶å‘ä¸Šä¸å»ã€‚</p>
<h3 data-id="heading-6">è™šæ‹Ÿçº¿ç¨‹æ¨¡å¼</h3>
<p>åœ¨ JDK 21 ä¸­ï¼Œæƒ…å†µå˜äº†ï¼š</p>
<ol>
<li><strong>æŒ‚è½½ï¼ˆMountï¼‰</strong>ï¼šä¹˜å®¢åä¸Šå‡ºç§Ÿè½¦ï¼Œå¼€å§‹è®¡ç®—ä»»åŠ¡ã€‚</li>
<li><strong>å¸è½½ï¼ˆUnmountï¼‰</strong>ï¼šå½“ä¹˜å®¢éœ€è¦ç­‰çº¢ç¯æˆ–å–å¿«é€’ï¼ˆé‡åˆ°é˜»å¡ I/Oï¼Œå¦‚ <code>Thread.sleep</code> æˆ– DB æŸ¥è¯¢ï¼‰æ—¶ï¼ŒJVM ä¼šç«‹åˆ»è®©ä¹˜å®¢<strong>ä¸‹è½¦</strong>ï¼ŒæŠŠä»–çš„çŠ¶æ€ï¼ˆContinuationï¼‰å­˜åœ¨è·¯è¾¹ã€‚</li>
<li><strong>å¤ç”¨</strong>ï¼šå‡ºç§Ÿè½¦ï¼ˆè½½ä½“çº¿ç¨‹ï¼‰<strong>ç«‹åˆ»å»æ‹‰ä¸‹ä¸€ä¸ªä¹˜å®¢</strong>ï¼Œä¸€åˆ»ä¹Ÿä¸é—²ç€ã€‚</li>
<li><strong>æ¢å¤</strong>ï¼šå½“åŸæ¥çš„ä¹˜å®¢å¿«é€’å–å¥½äº†ï¼ˆI/O å®Œæˆï¼‰ï¼Œä»–ä¼šé‡æ–°æ’é˜Ÿï¼Œç­‰ä»»æ„ä¸€è¾†ç©ºé—²çš„å‡ºç§Ÿè½¦è¿‡æ¥ï¼Œå¸¦ä¸Šä¹‹å‰çš„çŠ¶æ€ç»§ç»­èµ°ã€‚</li>
</ol>
<p><strong>ç»“æœ</strong>ï¼šä»…ç”¨ 10 è¾†è½¦ï¼Œå°±è®© 10,000 ä¸ªä¹˜å®¢æ„Ÿè§‰è‡ªå·±éƒ½åœ¨â€œåŒæ—¶â€å‰è¿›ã€‚CPU åˆ©ç”¨ç‡è¢«æ¦¨å¹²åˆ°äº†æè‡´ã€‚</p>
<h3 data-id="heading-7">æºç è§†è§’ï¼šJVM æ˜¯å¦‚ä½•å®ç°â€œé­”æ³•â€çš„ï¼Ÿ</h3>
<p>ä¸ºäº†æ›´æ·±å…¥åœ°ç†è§£ï¼Œæˆ‘ä»¬ç¨å¾®çœ‹ä¸€çœ¼ JDK çš„åº•å±‚å®ç°ï¼ˆåŸºäº JDK 21 OpenJDK æºç ï¼‰ã€‚</p>
<p><strong>1. è™šæ‹Ÿçº¿ç¨‹çš„æ•°æ®ç»“æ„</strong>
è™šæ‹Ÿçº¿ç¨‹åœ¨æºç ä¸­å¯¹åº”çš„ç±»æ˜¯ <code>java.lang.VirtualThread</code>ã€‚å®ƒä¸å†åƒå¹³å°çº¿ç¨‹é‚£æ ·æŒæœ‰å·¨å¤§çš„æ ˆå†…å­˜ï¼Œè€Œæ˜¯æŒæœ‰ä¸€ä¸ªè½»é‡çº§çš„ <strong><code>Continuation</code>ï¼ˆç»­ä½“ï¼‰</strong> å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// java.lang.VirtualThread æºç ç®€ç•¥ç‰ˆ</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseVirtualThread</span> {
    <span class="hljs-comment">// è°ƒåº¦å™¨ï¼Œé»˜è®¤æ˜¯ ForkJoinPool</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Executor scheduler;
    <span class="hljs-comment">// ç»­ä½“ï¼Œç”¨äºä¿å­˜å’Œæ¢å¤æ ˆçŠ¶æ€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Continuation cont;
    <span class="hljs-comment">// å®é™…è¦æ‰§è¡Œçš„ä»»åŠ¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Runnable runContinuation;
    
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>2. Mountï¼ˆæŒ‚è½½ï¼‰</strong>
å½“ä½ çš„è™šæ‹Ÿçº¿ç¨‹éœ€è¦æ‰§è¡Œ CPU è¿ç®—æ—¶ï¼ŒJVM ä¼šæŠŠå®ƒâ€œæŒ‚è½½â€åˆ°ä¸€ä¸ªè½½ä½“çº¿ç¨‹ï¼ˆCarrier Threadï¼‰ä¸Šã€‚è¿™ä¸ªè½½ä½“çº¿ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª <code>ForkJoinPool</code> ä¸­çš„ Worker çº¿ç¨‹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ JDK 21 ä¸­ <code>mount()</code> æ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// VirtualThread.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mount</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. ç»‘å®šï¼šè·å–å½“å‰çš„å¹³å°çº¿ç¨‹ï¼ˆCarrierï¼‰ï¼Œå¹¶å»ºç«‹å…³è”</span>
    <span class="hljs-type">Thread</span> <span class="hljs-variable">carrier</span> <span class="hljs-operator">=</span> Thread.currentCarrierThread(); 
    setCarrierThread(carrier); 

    <span class="hljs-comment">// 2. åŒæ­¥çŠ¶æ€ï¼šå¤„ç†ä¸­æ–­çŠ¶æ€ï¼ˆInterrupt Statusï¼‰</span>
    <span class="hljs-comment">// å¿…é¡»ç¡®ä¿è½½ä½“çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸è™šæ‹Ÿçº¿ç¨‹ä¸€è‡´</span>
    <span class="hljs-comment">// å¦‚æœè™šæ‹Ÿçº¿ç¨‹è¢«ä¸­æ–­äº†ï¼Œè½½ä½“çº¿ç¨‹ä¹Ÿå¿…é¡»æ ‡è®°ä¸ºä¸­æ–­ï¼Œä»¥ä¾¿ IO æ“ä½œèƒ½æ„ŸçŸ¥åˆ°</span>
    <span class="hljs-keyword">if</span> (interrupted) { 
        carrier.setInterrupt(); 
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (carrier.isInterrupted()) { 
        <span class="hljs-comment">// åä¹‹ï¼Œæ¸…é™¤è½½ä½“çº¿ç¨‹å¯èƒ½æ®‹ç•™çš„â€œè„â€ä¸­æ–­çŠ¶æ€</span>
        <span class="hljs-keyword">synchronized</span> (interruptLock) { 
            <span class="hljs-keyword">if</span> (!interrupted) carrier.clearInterrupt(); 
        } 
    } 

    <span class="hljs-comment">// 3. å·å¤©æ¢æ—¥ï¼šä¿®æ”¹å½“å‰çº¿ç¨‹çš„èº«ä»½</span>
    <span class="hljs-comment">// è¿™è¡Œä»£ç æ‰§è¡Œåï¼ŒThread.currentThread() è¿”å›çš„ä¸å†æ˜¯è½½ä½“çº¿ç¨‹ï¼Œè€Œæ˜¯å½“å‰è¿™ä¸ªè™šæ‹Ÿçº¿ç¨‹</span>
    <span class="hljs-comment">// è¿™æ˜¯è™šæ‹Ÿçº¿ç¨‹å…¼å®¹è€ä»£ç ï¼ˆå¦‚ Log4j, ThreadLocalï¼‰çš„å…³é”®</span>
    carrier.setCurrentThread(<span class="hljs-built_in">this</span>); 
}
</code></pre>
<p><strong>3. Unmountï¼ˆå¸è½½ï¼‰ä¸ Yield</strong>
å½“ä½ çš„ä»£ç è°ƒç”¨äº† <code>Thread.sleep()</code> æˆ–è€…è¿›è¡Œç½‘ç»œ I/O æ—¶ï¼Œåº•å±‚ä¼šè°ƒç”¨ <strong><code>VirtualThread.park()</code></strong>ã€‚</p>
<p>è¿™æ˜¯æ•´ä¸ªè™šæ‹Ÿçº¿ç¨‹è°ƒåº¦çš„æ ¸å¿ƒæ¢çº½ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒç©¶ç«Ÿåšäº†ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// VirtualThread.java æºç æ ¸å¿ƒé€»è¾‘ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">park</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥è®¸å¯ï¼ˆPermitï¼‰ï¼šå¦‚æœå½“å‰çº¿ç¨‹å·²ç»æœ‰äº†â€œé€šè¡Œè¯â€ï¼ˆæ¯”å¦‚åˆšè¢« unparkï¼‰ï¼Œåˆ™æ— éœ€æŒ‚èµ·ï¼Œç›´æ¥è¿”å›ç»§ç»­è·‘</span>
    <span class="hljs-keyword">if</span> (getAndSetParkPermit(<span class="hljs-literal">false</span>) || interrupted)
        <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// 2. å°è¯•æŒ‚èµ·ï¼ˆYieldï¼‰</span>
    setState(PARKING); <span class="hljs-comment">// æ ‡è®°çŠ¶æ€ä¸º PARKING</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å…³é”®è°ƒç”¨ï¼šå°è¯•äº¤å‡ºæ§åˆ¶æƒ</span>
        <span class="hljs-comment">// å¦‚æœæˆåŠŸï¼ˆè¿”å› trueï¼‰ï¼Œè¯´æ˜è™šæ‹Ÿçº¿ç¨‹å·²ç»æˆåŠŸå¸è½½ï¼ˆUnmountï¼‰å¹¶æš‚åœäº†</span>
        <span class="hljs-comment">// å¦‚æœå¤±è´¥ï¼ˆè¿”å› falseï¼‰ï¼Œé€šå¸¸æ˜¯å› ä¸ºè¢« Pinningï¼ˆé’‰ä½ï¼‰äº†</span>
        yielded = yieldContinuation(); 
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// å¦‚æœæ²¡æŒ‚èµ·æˆåŠŸï¼ŒæŠŠçŠ¶æ€æ”¹å› RUNNING</span>
        <span class="hljs-keyword">if</span> (!yielded) { 
            setState(RUNNING); 
        }
    }

    <span class="hljs-comment">// 3. å¤„ç† Pinningï¼ˆé’‰ä½ï¼‰çš„æƒ…å†µ</span>
    <span class="hljs-comment">// å¦‚æœ yieldContinuation() è¿”å› falseï¼Œè¯´æ˜æ²¡èƒ½ä» Carrier Thread ä¸Šä¸‹æ¥</span>
    <span class="hljs-comment">// è¿™æ—¶å€™åªèƒ½æ— å¥ˆåœ°é˜»å¡åº•å±‚çš„ Carrier Threadï¼ˆè¿™æ­£æ˜¯æˆ‘ä»¬æåŠ›æƒ³é¿å…çš„ï¼‰</span>
    <span class="hljs-keyword">if</span> (!yielded) { 
        parkOnCarrierThread(<span class="hljs-literal">false</span>, <span class="hljs-number">0</span>); 
    }
}
</code></pre>
<p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬æ·±å…¥ <code>yieldContinuation()</code>ï¼Œè¿™æ‰æ˜¯é­”æ³•çœŸæ­£å‘ç”Ÿçš„åœ°æ–¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">yieldContinuation</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. Unmountï¼šè§£ç»‘è½½ä½“çº¿ç¨‹ï¼Œæ¸…ç†ä¸­æ–­çŠ¶æ€</span>
    <span class="hljs-comment">// (è¿™æ­¥æ“ä½œå…¶å®éšå«åœ¨ Continuation.yield çš„å‰åé€»è¾‘ä¸­ï¼Œæˆ–è€…æ˜¯é€šè¿‡ JVMTI é€šçŸ¥è§¦å‘)</span>
    notifyJvmtiUnmount(<span class="hljs-comment">/*hide*/</span><span class="hljs-literal">true</span>); 
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 2. çœŸæ­£çš„é­”æ³•ï¼šè°ƒç”¨ Continuation.yield</span>
        <span class="hljs-comment">// è¿™è¡Œä»£ç ä¼šâ€œå†»ç»“â€å½“å‰æ ˆå¸§ï¼ŒæŠŠå †æ ˆä¿¡æ¯ä¿å­˜åˆ°å †å†…å­˜ä¸­</span>
        <span class="hljs-comment">// ç„¶åï¼Œæ‰§è¡Œæµä¼šâ€œè·³å›â€åˆ° Carrier Thread çš„ run() æ–¹æ³•ä¸­ï¼Œå»æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡</span>
        <span class="hljs-keyword">return</span> Continuation.<span class="hljs-keyword">yield</span>(VTHREAD_SCOPE); 
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// 3. æ¢å¤ï¼šå½“è¿™ä¸ªè™šæ‹Ÿçº¿ç¨‹è¢«å”¤é†’ï¼ˆunparkï¼‰å¹¶é‡æ–° Mount åï¼Œä»£ç ä¼šä»è¿™é‡Œç»§ç»­æ‰§è¡Œ</span>
        notifyJvmtiMount(<span class="hljs-comment">/*hide*/</span><span class="hljs-literal">false</span>); 
    }
}
</code></pre>
<p>é€šè¿‡è¿™æ®µæºç ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº† <strong>Pinningï¼ˆé’‰ä½ï¼‰</strong> æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼šå½“ <code>yieldContinuation()</code> å¤±è´¥ï¼ˆé€šå¸¸æ˜¯å› ä¸ºå½“å‰æ ˆå¸§ä¸­æœ‰ <code>synchronized</code> æˆ– <code>native</code> æ–¹æ³•ï¼‰æ—¶ï¼Œä»£ç ä¼šå›é€€åˆ° <code>parkOnCarrierThread()</code>ï¼Œå¯¼è‡´åº•å±‚å¹³å°çº¿ç¨‹è¢«é˜»å¡ã€‚</p>
<p><strong>4. æ¢å¤æ‰§è¡Œ</strong>
å½“ I/O æ“ä½œå®Œæˆï¼ˆä¾‹å¦‚ç½‘å¡æ”¶åˆ°äº†æ•°æ®ï¼‰ï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ JVMã€‚è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ä¼šå†æ¬¡æŠŠè¿™ä¸ªæŒ‚èµ·çš„è™šæ‹Ÿçº¿ç¨‹æ”¾å…¥æ‰§è¡Œé˜Ÿåˆ—ï¼Œç­‰å¾…ç©ºé—²çš„è½½ä½“çº¿ç¨‹å°†å®ƒâ€œå¤æ´»â€ï¼ˆMount å¹¶æ¢å¤æ ˆå¸§ï¼‰ï¼Œä»ä¸Šæ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­è¿è¡Œã€‚</p>
<p><strong>5. å®æˆ˜è°ƒç”¨é“¾æ­ç§˜</strong>
ä¸ºäº†å½»åº•è§£å¼€ç–‘æƒ‘ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœ€å¸¸ç”¨çš„ <code>Thread.sleep</code> å’Œç½‘ç»œ I/O åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<p><strong>åœºæ™¯ Aï¼š<code>Thread.sleep(1000)</code></strong></p>
<ol>
<li><strong>JDK 21 ä¿®æ”¹äº† <code>Thread.sleep</code></strong>ï¼šå®ƒä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯è™šæ‹Ÿçº¿ç¨‹ã€‚</li>
<li>å¦‚æœæ˜¯ï¼Œè°ƒç”¨ <code>VirtualThread.sleepNanos(nanos)</code>ã€‚</li>
<li><strong>åˆ†æ”¯å¤„ç†</strong>ï¼š
<ul>
<li><strong>æƒ…å†µ 1ï¼š<code>nanos == 0</code> (å³ <code>Thread.sleep(0)</code>)</strong>
<ul>
<li>ç›´æ¥è°ƒç”¨ <code>tryYield()</code>ã€‚</li>
<li>çŠ¶æ€æ ‡è®°ä¸º <code>YIELDING</code>ã€‚</li>
<li>æ‰§è¡Œ <code>yieldContinuation()</code> å°è¯•è®©å‡º CPUã€‚è¿™æ˜¯ä¸€ç§â€œç¤¼è®©â€è¡Œä¸ºï¼Œå…è®¸è°ƒåº¦å™¨ç«‹åˆ»åˆ‡æ¢åˆ°å…¶ä»–ç­‰å¾…çš„è™šæ‹Ÿçº¿ç¨‹ã€‚</li>
</ul>
</li>
<li><strong>æƒ…å†µ 2ï¼š<code>nanos &gt; 0</code> (å³ <code>Thread.sleep(1000)</code>)</strong>
<ul>
<li>è°ƒç”¨ <code>parkNanos(nanos)</code>ã€‚</li>
<li><strong>æ³¨å†Œå”¤é†’ä»»åŠ¡</strong>ï¼š<code>Future unparker = scheduleUnpark(nanos)</code>ã€‚JVM ä¼šåœ¨å†…éƒ¨çš„è°ƒåº¦é˜Ÿåˆ—ä¸­æ³¨å†Œä¸€ä¸ª 1 ç§’åçš„å®šæ—¶äº‹ä»¶ã€‚</li>
<li><strong>çŠ¶æ€æ ‡è®°</strong>ï¼š<code>setState(TIMED_PARKING)</code>ã€‚</li>
<li><strong>å°è¯•æŒ‚èµ·</strong>ï¼šè°ƒç”¨ <code>yieldContinuation()</code>ã€‚
<ul>
<li><strong>æˆåŠŸ</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹å¸è½½ï¼ŒForkJoinPool Worker çº¿ç¨‹é‡Šæ”¾å»å¹²åˆ«çš„äº‹ã€‚</li>
<li><strong>å¤±è´¥ï¼ˆPinningï¼‰</strong>ï¼šå¦‚æœè¢«é’‰ä½ï¼Œåˆ™æ‰§è¡Œ <code>parkOnCarrierThread(true, remainingNanos)</code>ï¼Œå¯¼è‡´è½½ä½“çº¿ç¨‹åœ¨ OS å±‚é¢é˜»å¡ç­‰å¾…å‰©ä½™æ—¶é—´ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>å”¤é†’</strong>ï¼šå®šæ—¶å™¨è§¦å‘æˆ–ç¤¼è®©ç»“æŸåï¼Œè°ƒåº¦å™¨å°†è¯¥è™šæ‹Ÿçº¿ç¨‹ <code>unpark</code>ï¼Œå®ƒé‡æ–°æ’é˜Ÿç­‰å¾…æ‰§è¡Œã€‚</li>
</ol>
<p><strong>åœºæ™¯ Bï¼šç½‘ç»œ I/O (å¦‚ <code>socket.read()</code>)</strong></p>
<ol>
<li>JDK 21 é‡å†™äº† <code>NioSocketImpl</code> ç­‰åº•å±‚ç±»ã€‚</li>
<li>å½“è°ƒç”¨ <code>read()</code> æ—¶ï¼Œå¦‚æœåº•å±‚ Socket ç¼“å†²åŒºä¸ºç©ºï¼ˆæ•°æ®æœªåˆ°ï¼‰ã€‚</li>
<li><strong>æ³¨å†Œ Poller</strong>ï¼šå°†å½“å‰ Socket çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰æ³¨å†Œåˆ° JVM å…¨å±€çš„ <strong>Poller</strong>ï¼ˆLinux ä¸Šå¯¹åº” <code>epoll</code>ï¼ŒMac ä¸Šå¯¹åº” <code>kqueue</code>ï¼‰ã€‚</li>
<li><strong>è°ƒç”¨ <code>park()</code></strong>ï¼šè™šæ‹Ÿçº¿ç¨‹å¸è½½ã€‚</li>
<li><strong>ç­‰å¾…äº‹ä»¶</strong>ï¼šå½“ç½‘å¡æ”¶åˆ°æ•°æ®ï¼ŒOS é€šçŸ¥ Pollerã€‚</li>
<li><strong>å”¤é†’</strong>ï¼šPoller æ‰¾åˆ°å¯¹åº”çš„è™šæ‹Ÿçº¿ç¨‹ï¼Œå°†å…¶ <code>unpark</code>ï¼Œè™šæ‹Ÿçº¿ç¨‹æ¢å¤æ‰§è¡Œå¹¶æˆåŠŸè¯»å–æ•°æ®ã€‚</li>
</ol>
<p>è¿™æ­£æ˜¯â€œåŒæ­¥ä»£ç ï¼Œå¼‚æ­¥æ‰§è¡Œâ€çš„æœ¬è´¨ï¼</p>
<hr/>
<h2 data-id="heading-8">4. å®æˆ˜ï¼šå¦‚ä½•ä½¿ç”¨ï¼Ÿï¼ˆCode Examplesï¼‰</h2>
<p>åœ¨ JDK 21 ä¸­ï¼Œä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹éå¸¸ç®€å•ã€‚</p>
<h3 data-id="heading-9">4.1 åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹</h3>
<p>ä¸éœ€è¦å¼•å…¥ä»»ä½•ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ ‡å‡†åº“åŸç”Ÿæ”¯æŒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼ 1: ç›´æ¥å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿçº¿ç¨‹</span>
Thread.startVirtualThread(() -&gt; {
    System.out.println(&amp;#<span class="hljs-number">34</span>;Hello from Virtual Thread: &amp;#<span class="hljs-number">34</span>; + Thread.currentThread());
});

<span class="hljs-comment">// æ–¹å¼ 2: ä½¿ç”¨ Builder æ„å»ºæ›´è¯¦ç»†çš„é…ç½®ï¼ˆå¦‚åç§°ï¼‰</span>
<span class="hljs-type">Thread</span> <span class="hljs-variable">vThread</span> <span class="hljs-operator">=</span> Thread.ofVirtual()
        .name(&amp;#<span class="hljs-number">34</span>;my-vthread&amp;#<span class="hljs-number">34</span>;)
        .start(() -&gt; {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
        });
</code></pre>
<h3 data-id="heading-10">4.2 æ›¿ä»£çº¿ç¨‹æ± ï¼ˆé‡ç‚¹ï¼‰</h3>
<p><strong>è¿™æ˜¯æœ€å¤§çš„æ€ç»´è½¬å˜</strong>ã€‚è¿‡å»æˆ‘ä»¬ç”¨ <code>Executors.newFixedThreadPool(200)</code> æ¥é™åˆ¶çº¿ç¨‹æ•°é‡ã€‚
<strong>ç°åœ¨ï¼Œè¯·å¿˜æ‰çº¿ç¨‹æ± ï¼</strong> è™šæ‹Ÿçº¿ç¨‹æ˜¯ç”¨å®Œå³æ¯çš„ï¼Œä¸éœ€è¦æ± åŒ–ã€‚</p>
<p>JDK 21 æä¾›äº†æ–°çš„æ‰§è¡Œå™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ try-with-resources è‡ªåŠ¨å…³é—­ç»“æ„</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
    IntStream.range(<span class="hljs-number">0</span>, <span class="hljs-number">10_000</span>).forEach(i -&gt; {
        executor.submit(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ I/O æ“ä½œï¼Œä¾‹å¦‚è°ƒç”¨ç¬¬ä¸‰æ–¹ API</span>
            Thread.sleep(Duration.ofSeconds(<span class="hljs-number">1</span>)); 
            <span class="hljs-keyword">return</span> i;
        });
    });
} 
<span class="hljs-comment">// ä»£ç è¿è¡Œåˆ°è¿™é‡Œï¼Œè¯´æ˜ 10,000 ä¸ªä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</span>
<span class="hljs-comment">// åœ¨ä¼ ç»Ÿçº¿ç¨‹æ± ä¸‹ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åç§’ï¼›è€Œåœ¨è™šæ‹Ÿçº¿ç¨‹ä¸‹ï¼Œè€—æ—¶ä»…çº¦ 1 ç§’å¤šä¸€ç‚¹ã€‚</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">5. æ€§èƒ½å®éªŒï¼šç”¨æ•°æ®è¯´è¯ï¼ˆBenchmarksï¼‰</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç®€å•çš„åŸºå‡†æµ‹è¯•ï¼Œç›´è§‚æ„Ÿå—è™šæ‹Ÿçº¿ç¨‹åœ¨<strong>é«˜å¹¶å‘ I/O å¯†é›†å‹åœºæ™¯</strong>ä¸‹çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-12">å®éªŒç›®æ ‡</h3>
<p>æ¨¡æ‹Ÿ 10,000 ä¸ªå¹¶å‘ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡â€œå‡è£…â€æ‰§è¡Œ 1 ç§’é’Ÿçš„ I/O æ“ä½œï¼ˆä½¿ç”¨ <code>Thread.sleep(1000)</code> æ¨¡æ‹Ÿï¼‰ã€‚</p>
<h3 data-id="heading-13">å®éªŒä»£ç </h3>
<p>ä½ å¯ä»¥ç›´æ¥å¤åˆ¶è¿™æ®µä»£ç åœ¨æœ¬åœ°è¿è¡Œï¼ˆéœ€ JDK 21+ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.management.ManagementFactory;
<span class="hljs-keyword">import</span> java.lang.management.MemoryMXBean;
<span class="hljs-keyword">import</span> java.lang.management.MemoryUsage;
<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.stream.IntStream;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThreadBenchmark</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">taskCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">10_000</span>;
        
        System.out.println(&amp;#<span class="hljs-number">34</span>;=== å¼€å§‹åŸºå‡†æµ‹è¯• ===&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;ä»»åŠ¡æ•°é‡: &amp;#<span class="hljs-number">34</span>; + taskCount);

        <span class="hljs-comment">// 1. æµ‹è¯•å¹³å°çº¿ç¨‹ï¼ˆæ¨¡æ‹Ÿä¼ ç»Ÿçº¿ç¨‹æ± ï¼‰</span>
        <span class="hljs-comment">// ä¸ºäº†å…¬å¹³ï¼Œæˆ‘ä»¬ç»™å¹³å°çº¿ç¨‹æ± ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„æ ¸å¿ƒæ•°ï¼Œæ¯”å¦‚ 200</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startPlatform</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">200</span>)) {
            IntStream.range(<span class="hljs-number">0</span>, taskCount).forEach(i -&gt; {
                executor.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        Thread.sleep(Duration.ofSeconds(<span class="hljs-number">1</span>));
                    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                    }
                });
            });
        } <span class="hljs-comment">// try-with-resources ä¼šè‡ªåŠ¨ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">endPlatform</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(&amp;#<span class="hljs-number">34</span>;å¹³å°çº¿ç¨‹æ± è€—æ—¶: &amp;#<span class="hljs-number">34</span>; + (endPlatform - startPlatform) + &amp;#<span class="hljs-number">34</span>; ms&amp;#<span class="hljs-number">34</span>;);

        <span class="hljs-comment">// æ‰‹åŠ¨ GC ä¸€æ¬¡ï¼Œå°½é‡å‡å°‘å¯¹ä¸‹ä¸€è½®çš„å½±å“</span>
        System.gc();
        <span class="hljs-keyword">try</span> { Thread.sleep(<span class="hljs-number">1000</span>); } <span class="hljs-keyword">catch</span> (Exception e) {}

        <span class="hljs-comment">// 2. æµ‹è¯•è™šæ‹Ÿçº¿ç¨‹</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startVirtual</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
            IntStream.range(<span class="hljs-number">0</span>, taskCount).forEach(i -&gt; {
                executor.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        Thread.sleep(Duration.ofSeconds(<span class="hljs-number">1</span>));
                    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                    }
                });
            });
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">endVirtual</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(&amp;#<span class="hljs-number">34</span>;è™šæ‹Ÿçº¿ç¨‹è€—æ—¶:   &amp;#<span class="hljs-number">34</span>; + (endVirtual - startVirtual) + &amp;#<span class="hljs-number">34</span>; ms&amp;#<span class="hljs-number">34</span>;);
    }

}
</code></pre>
<h3 data-id="heading-14">å®éªŒç»“æœåˆ†æï¼ˆå‚è€ƒæ•°æ®ï¼‰</h3>
<p>åœ¨æ™®é€šçš„ 8 æ ¸ç¬”è®°æœ¬ä¸Šè¿è¡Œï¼Œç»“æœé€šå¸¸å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th align="left">æŒ‡æ ‡</th><th align="left">å¹³å°çº¿ç¨‹æ±  (Fixed-200)</th><th align="left">è™šæ‹Ÿçº¿ç¨‹ (Virtual Threads)</th><th align="left">æå‡å€æ•°</th></tr></thead><tbody><tr><td align="left"><strong>æ€»è€—æ—¶</strong></td><td align="left"><strong>~50,601 ms</strong></td><td align="left"><strong>~1,149 ms</strong></td><td align="left"><strong>~43 å€</strong></td></tr><tr><td align="left"><strong>å†…å­˜å ç”¨</strong></td><td align="left">è¾ƒé«˜ï¼ˆæ¯ä¸ªçº¿ç¨‹æ ˆç‹¬ç«‹å ç”¨ OS å†…å­˜ï¼‰</td><td align="left"><strong>æä½</strong>ï¼ˆå‡ ä¹åªå¢åŠ å †å†…å­˜ï¼Œä¸”å¾ˆå°‘ï¼‰</td><td align="left"><strong>æ•°é‡çº§å·®å¼‚</strong></td></tr><tr><td align="left"><strong>åŸç†åˆ†æ</strong></td><td align="left">çº¿ç¨‹æ± åªæœ‰ 200 ä¸ªçº¿ç¨‹ï¼Œ1 ä¸‡ä¸ªä»»åŠ¡åªèƒ½æ’é˜Ÿæ‰§è¡Œã€‚<br/>50 è½® x 1ç§’ = 50 ç§’ã€‚</td><td align="left">1 ä¸‡ä¸ªè™šæ‹Ÿçº¿ç¨‹å‡ ä¹åŒæ—¶å¯åŠ¨ï¼ŒåŒæ—¶æŒ‚èµ·ã€‚<br/>åº•å±‚ Carrier çº¿ç¨‹ä¸æ–­å¤ç”¨ï¼Œå‡ ä¹æ²¡æœ‰æ’é˜Ÿç­‰å¾…ã€‚</td><td align="left">ç¢¾å‹çº§ä¼˜åŠ¿</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">6. æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯</h2>
<p>æ˜¯ä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½åº”è¯¥æ— è„‘ä¸Šè™šæ‹Ÿçº¿ç¨‹ï¼Ÿ<strong>å¹¶ä¸æ˜¯ã€‚</strong></p>
<h3 data-id="heading-16">é€‚ç”¨åœºæ™¯ï¼šI/O å¯†é›†å‹ (I/O Bound)</h3>
<p>è¿™æ˜¯è™šæ‹Ÿçº¿ç¨‹çš„ä¸»åœºã€‚</p>
<ul>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šWeb æœåŠ¡å™¨ã€å¾®æœåŠ¡ç½‘å…³ã€å¤§é‡æ•°æ®åº“è°ƒç”¨ã€RPC è°ƒç”¨ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼š<strong>ååé‡ï¼ˆThroughputï¼‰</strong> å°†å‘ˆæŒ‡æ•°çº§æå‡ã€‚åŸæœ¬èƒ½æŠ— 1000 QPS çš„æœåŠ¡ï¼Œå¯èƒ½è½»æ¾æŠ—ä½ 10000 QPSã€‚</li>
</ul>
<h3 data-id="heading-17">ä¸é€‚ç”¨åœºæ™¯ï¼šCPU å¯†é›†å‹ (CPU Bound)</h3>
<ul>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šè§†é¢‘è½¬ç ã€å¤æ‚çš„åŠ å¯†è§£å¯†ã€ç§‘å­¦è®¡ç®—ã€‚</li>
<li><strong>åŸå› </strong>ï¼šCPU åªæœ‰é‚£ä¹ˆå¤šæ ¸å¿ƒã€‚å¦‚æœä»»åŠ¡å…¨æ˜¯è®¡ç®—ï¼Œæ²¡æœ‰ä»»ä½•ç­‰å¾…æ—¶é—´ï¼Œåˆ‡æ¢è™šæ‹Ÿçº¿ç¨‹åªä¼šå¢åŠ é¢å¤–çš„è°ƒåº¦å¼€é”€ï¼Œåè€Œå¯èƒ½å˜æ…¢ã€‚</li>
</ul>
<blockquote>
<p><strong>è¯¯åŒºæç¤º</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹ä¸ä¼šé™ä½å•ä¸ªè¯·æ±‚çš„<strong>å»¶è¿Ÿï¼ˆLatencyï¼‰</strong>ã€‚å®ƒè§£å†³çš„æ˜¯â€œç”±äºçº¿ç¨‹ä¸å¤Ÿç”¨å¯¼è‡´çš„æ’é˜Ÿç­‰å¾…â€ï¼Œæå‡çš„æ˜¯ç³»ç»Ÿçš„<strong>å¹¶å‘å®¹é‡</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-18">6. é¿å‘æŒ‡å—ï¼ˆThe Gotchasï¼‰</h2>
<p>ä½œä¸ºæ¶æ„å¸ˆï¼Œåœ¨è½åœ°è™šæ‹Ÿçº¿ç¨‹æ—¶ï¼Œå¿…é¡»è­¦æƒ•ä»¥ä¸‹ä¸¤ä¸ªå‘ï¼š</p>
<h3 data-id="heading-19">å‘ä¸€ï¼šPinningï¼ˆçº¿ç¨‹é’‰ä½ï¼‰</h3>
<p>å½“è™šæ‹Ÿçº¿ç¨‹åœ¨æ‰§è¡Œä»¥ä¸‹ä»£ç æ—¶ï¼Œæ— æ³•ä»è½½ä½“çº¿ç¨‹ä¸Šå¸è½½ï¼ˆUnmountï¼‰ï¼Œå¯¼è‡´å®ƒé€€åŒ–æˆæ™®é€šçš„é˜»å¡çº¿ç¨‹ï¼š</p>
<ol>
<li>åœ¨ <code>synchronized</code> å—æˆ–æ–¹æ³•å†…éƒ¨ã€‚</li>
<li>æ‰§è¡Œ <code>native</code> æ–¹æ³•æˆ–å¤–éƒ¨å‡½æ•°æ¥å£ï¼ˆFFIï¼‰æ—¶ã€‚</li>
</ol>
<p><strong>åä¾‹ï¼ˆä¸è¦è¿™ä¹ˆå†™ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">synchronized</span> (lock) {
    <span class="hljs-comment">// è¿™é‡Œçš„ sleep ä¼šå¯¼è‡´åº•å±‚çš„ OS çº¿ç¨‹ä¹Ÿè¢«é˜»å¡ï¼Œæ— æ³•æœåŠ¡å…¶ä»–è™šæ‹Ÿçº¿ç¨‹</span>
    Thread.sleep(<span class="hljs-number">1000</span>); 
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°† <code>synchronized</code> æ›¿æ¢ä¸º <code>ReentrantLock</code>ã€‚JDK æ ¸å¿ƒåº“ï¼ˆå¦‚ <code>ConcurrentHashMap</code>ï¼‰å†…éƒ¨å·²ç»å®Œæˆäº†è¿™ç§æ”¹é€ ã€‚</p>
<pre><code class="hljs language-java" lang="java">lock.lock();
<span class="hljs-keyword">try</span> {
    Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// æ­¤æ—¶è™šæ‹Ÿçº¿ç¨‹å¯ä»¥æ­£å¸¸å¸è½½ï¼Œé‡Šæ”¾ OS çº¿ç¨‹</span>
} <span class="hljs-keyword">finally</span> {
    lock.unlock();
}
</code></pre>
<h3 data-id="heading-20">å‘äºŒï¼šThreadLocal è†¨èƒ€</h3>
<p>ä»¥å‰çº¿ç¨‹æ± åªæœ‰ 200 ä¸ªçº¿ç¨‹ï¼Œ<code>ThreadLocal</code> é‡Œçš„ç¼“å­˜æ•°æ®ä¸ä¼šå ç”¨å¤ªå¤šå†…å­˜ã€‚
ç°åœ¨è™šæ‹Ÿçº¿ç¨‹å¯èƒ½æœ‰ 100 ä¸‡ä¸ªï¼Œå¦‚æœæ¯ä¸ªçº¿ç¨‹éƒ½å­˜ 1MB æ•°æ®ï¼Œå†…å­˜ç¬é—´çˆ†ç‚¸ã€‚
<strong>å»ºè®®</strong>ï¼šå°½é‡å‡å°‘ <code>ThreadLocal</code> çš„ä½¿ç”¨ï¼Œæˆ–è€…ä½¿ç”¨ JDK 21 é¢„è§ˆç‰¹æ€§ <strong>Scoped Values</strong>ï¼ˆèŒƒå›´å€¼ï¼‰ä½œä¸ºæ›¿ä»£ã€‚</p>
<hr/>
<h2 data-id="heading-21">7. æ€»ç»“ä¸å±•æœ›</h2>
<p>JDK 21 è™šæ‹Ÿçº¿ç¨‹çš„æ­£å¼å‘å¸ƒï¼Œæ ‡å¿—ç€ Java å¹¶å‘ç¼–ç¨‹è¿›å…¥äº†ä¸€ä¸ªå…¨æ–°çš„â€œé™ç»´æ‰“å‡»â€æ—¶ä»£ã€‚</p>
<p><strong>æ ¸å¿ƒç»“è®ºï¼š</strong></p>
<ol>
<li><strong>JDK 21 æ­£å¼ç‰¹æ€§</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹ä¸å†æ˜¯é¢„è§ˆç‰ˆï¼ˆPreviewï¼‰ï¼Œè€Œæ˜¯<strong>æ­£å¼ç‰ˆï¼ˆFinalizedï¼‰</strong>ï¼Œå·²å…·å¤‡ç”Ÿäº§ç¯å¢ƒè½åœ°çš„èƒ½åŠ›ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯æ˜ç¡®</strong>ï¼šå®ƒä¸æ˜¯ä¸‡èƒ½è¯ï¼Œ<strong>ä»…é€‚ç”¨äº I/O å¯†é›†å‹ä»»åŠ¡</strong>ï¼ˆWeb æœåŠ¡ã€RPC è°ƒç”¨ï¼‰ã€‚å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼Œä¼ ç»Ÿå¹³å°çº¿ç¨‹ä¾ç„¶æ˜¯ç‹è€…ã€‚</li>
<li><strong>ç¼–ç¨‹èŒƒå¼å›å½’</strong>ï¼šæˆ‘ä»¬ä¸å†éœ€è¦ä¸ºäº†æ€§èƒ½å»å†™æ™¦æ¶©éš¾æ‡‚çš„å¼‚æ­¥å›è°ƒä»£ç ã€‚<strong>â€œåŒæ­¥çš„ä»£ç ç»“æ„ï¼Œå¼‚æ­¥çš„æ‰§è¡Œæ€§èƒ½â€</strong>ï¼Œè¿™æ‰æ˜¯è™šæ‹Ÿçº¿ç¨‹å¸¦ç»™å¼€å‘è€…çš„æœ€å¤§çº¢åˆ©ã€‚</li>
</ol>
<p><strong>å±•æœ›æœªæ¥ï¼š</strong>
è™½ç„¶è™šæ‹Ÿçº¿ç¨‹å·²ç»ç”± JEP 444 å®šç¨¿ï¼Œä½†ä¸å…¶é»„é‡‘æ­æ¡£â€”â€”<strong>ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼‰</strong>ï¼ˆç›®å‰åœ¨ JDK 21 ä»å¤„äºé¢„è§ˆé˜¶æ®µï¼‰çš„é…åˆæ‰æ˜¯å®Œå…¨ä½“ã€‚éšç€æœªæ¥ JDK ç‰ˆæœ¬çš„è¿­ä»£ï¼ŒJava åœ¨é«˜å¹¶å‘é¢†åŸŸçš„ç»Ÿæ²»åŠ›å°†ä¸å¯æ’¼åŠ¨ã€‚</p>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å‡çº§ä½ çš„ JDKï¼Œå»é‡æ„é‚£äº›é™ˆæ—§çš„çº¿ç¨‹æ± ä»£ç äº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/621c79c6a80f4c7cbc36469b00493ef8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3VtQWxs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766019097&amp;x-signature=qVrwf2eaX6jkhYCyA2g1xFUdEGo%3D" alt="3_1.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠSpring Boot MongoDBé©å‘½æ€§å‡çº§ï¼silky-mongodb-spring-boot-starterå‘å¸ƒï¼Œå¼€å‘æ•ˆç‡æš´å¢300%ï¼ã€‹]]></title>    <link>https://juejin.cn/post/7582066556088942655</link>    <guid>https://juejin.cn/post/7582066556088942655</guid>    <pubDate>2025-12-11T00:52:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582066556088942655" data-draft-id="7577300470520545289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠSpring Boot MongoDBé©å‘½æ€§å‡çº§ï¼silky-mongodb-spring-boot-starterå‘å¸ƒï¼Œå¼€å‘æ•ˆç‡æš´å¢300%ï¼ã€‹"/> <meta itemprop="keywords" content="åç«¯,MongoDB"/> <meta itemprop="datePublished" content="2025-12-11T00:52:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªç§ƒå¤´çš„ç¨‹åºçŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/3448514653724824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠSpring Boot MongoDBé©å‘½æ€§å‡çº§ï¼silky-mongodb-spring-boot-starterå‘å¸ƒï¼Œå¼€å‘æ•ˆç‡æš´å¢300%ï¼ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3448514653724824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªç§ƒå¤´çš„ç¨‹åºçŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:52:19.000Z" title="Thu Dec 11 2025 00:52:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€ŠSpring Boot MongoDBé©å‘½æ€§å‡çº§ï¼silky-mongodb-spring-boot-starterå‘å¸ƒï¼Œå¼€å‘æ•ˆç‡æš´å¢300%ï¼ã€‹</h2>
<blockquote>
<p>è¿˜åœ¨ä¸ºMongoDBçš„å¤æ‚æ“ä½œå¤´ç–¼å—ï¼Ÿè¿™ä¸ªå¼€æºç»„ä»¶è®©ä½ çš„ç”Ÿäº§åŠ›ç›´æ¥èµ·é£ï¼</p>
</blockquote>
<h3 data-id="heading-1">ğŸš¨ ç—›ç‚¹ç›´å‡»ï¼šä½ è¿˜åœ¨è¿™æ ·å†™MongoDBä»£ç å—ï¼Ÿ</h3>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// ä¼ ç»Ÿå†™æ³• - åˆè‡­åˆé•¿è¿˜å®¹æ˜“å‡ºé”™</span>
<span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>();
query.addCriteria(Criteria.where(&amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;).is(&amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;));
query.addCriteria(Criteria.where(&amp;#<span class="hljs-number">34</span>;age&amp;#<span class="hljs-number">34</span>;).gt(<span class="hljs-number">18</span>));
query.addCriteria(Criteria.where(&amp;#<span class="hljs-number">34</span>;status&amp;#<span class="hljs-number">34</span>;).is(&amp;#<span class="hljs-number">34</span>;ACTIVE&amp;#<span class="hljs-number">34</span>;));
query.with(Sort.by(Sort.Direction.DESC, &amp;#<span class="hljs-number">34</span>;createTime&amp;#<span class="hljs-number">34</span>;));
<span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> mongoTemplate.find(query, User.class);

<span class="hljs-comment">// å¤šæ•°æ®æºåˆ‡æ¢ï¼Ÿæ‰‹åŠ¨ç®¡ç†åˆ°æ€€ç–‘äººç”Ÿ</span>
<span class="hljs-type">MongoTemplate</span> <span class="hljs-variable">userTemplate</span> <span class="hljs-operator">=</span> getUserMongoTemplate();
<span class="hljs-type">MongoTemplate</span> <span class="hljs-variable">orderTemplate</span> <span class="hljs-operator">=</span> getOrderMongoTemplate();
<span class="hljs-comment">// ... å„ç§æ¨¡æ¿è·å–å’Œåˆ‡æ¢é€»è¾‘</span>

<span class="hljs-comment">// äº‹åŠ¡æ”¯æŒï¼Ÿæƒ³éƒ½ä¸æ•¢æƒ³ï¼</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ‰‹åŠ¨æ¨¡æ‹Ÿäº‹åŠ¡...</span>
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-comment">// æ‰‹åŠ¨å›æ»š...</span>
}
</code></pre>
<p><strong>å¦‚æœè¿™è®©ä½ æ„ŸåŒèº«å—ï¼Œé‚£ä¹ˆä»Šå¤©å°±æ˜¯ä½ çš„å¹¸è¿æ—¥ï¼</strong></p>
<h3 data-id="heading-2">ğŸ’¥ é‡ç£…å‘å¸ƒï¼šsilky-mongodb-spring-boot-starter</h3>
<p>ç»è¿‡æ•°æœˆç²¾å¿ƒæ‰“ç£¨ï¼Œæˆ‘ä»¬æ­£å¼å‘å¸ƒÂ <strong>silky-mongodb-spring-boot-starter</strong>â€”â€”ä¸€ä¸ªå½»åº•æ”¹å˜Spring Bootä¸­MongoDBå¼€å‘ä½“éªŒçš„é©å‘½æ€§ç»„ä»¶ï¼</p>
<h4 data-id="heading-3">âœ¨ æ ¸å¿ƒäº®ç‚¹é€Ÿè§ˆ</h4>
<ul>
<li>ğŸ¯Â <strong>Lambdaè¡¨è¾¾å¼</strong>Â - å‘Šåˆ«å­—æ®µåç¡¬ç¼–ç ï¼Œäº«å—ç±»å‹å®‰å…¨</li>
<li>ğŸ”„Â <strong>å¤šæ•°æ®æº</strong>Â - ä¸€è¡Œæ³¨è§£æå®šæ•°æ®æºåˆ‡æ¢</li>
<li>ğŸ“ŠÂ <strong>è¯»å†™åˆ†ç¦»</strong>Â - è‡ªåŠ¨è·¯ç”±ï¼Œé›¶é…ç½®ä¸Šæ‰‹</li>
<li>ğŸ’¾Â <strong>äº‹åŠ¡æ”¯æŒ</strong>Â - ä¼ä¸šçº§æ•°æ®ä¸€è‡´æ€§ä¿éšœ</li>
<li>âš¡Â <strong>æ€§èƒ½ä¼˜åŒ–</strong>Â - æ‰¹é‡æ“ä½œæ€§èƒ½æå‡300%</li>
<li>ğŸ¨Â <strong>æ™ºèƒ½æ—¥å¿—</strong>Â - æ¸…æ™°ç›´è§‚çš„MongoDBæ“ä½œæ—¥å¿—</li>
</ul>
<h3 data-id="heading-4">ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-5">1. æ·»åŠ ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml">
    com.silky
    silky-mongodb-spring-boot-starter
    1.0.0 

</code></pre>
<h4 data-id="heading-6">2. å¯åŠ¨ç±»å¢åŠ <code>com.silky</code>åŒ…æ‰«æ @ComponentScan({"com.silky"})</h4>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-meta">@SpringBootTest()</span>
<span class="hljs-meta">@ComponentScan({&amp;#34;com.silky&amp;#34;})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MongodbApplicationTest</span> {

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> org.slf4j.LoggerFactory.getLogger(<span class="hljs-built_in">this</span>.getClass());

}
</code></pre>
<h4 data-id="heading-7">3. æç®€é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">silky:</span>
  <span class="hljs-attr">mongodb:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># æ‰“å°æ—¥å¿—</span>
    <span class="hljs-attr">print-log:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment">#äº‹åŠ¡å¼€å…³</span>
    <span class="hljs-attr">transaction-enabled:</span> <span class="hljs-literal">false</span>
    <span class="hljs-comment"># ä¸é…ç½® primaryï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªæ•°æ®æº</span>
    <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-comment">#ä¸»åº“</span>
      <span class="hljs-attr">master:</span>
        <span class="hljs-attr">uri:</span> <span class="hljs-string">mongodb://username:password@localhost:27017/test</span>
        <span class="hljs-comment"># ä¸é…ç½® databaseï¼Œä¼šè‡ªåŠ¨ä» URI ä¸­è§£æ</span>
        <span class="hljs-comment">#database: test</span>
        <span class="hljs-comment">#è¯»å†™åˆ†ç¦»</span>
        <span class="hljs-attr">read-write-separation:</span>
          <span class="hljs-comment">#é»˜è®¤å…³é—­</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">read-uri:</span> <span class="hljs-string">mongodb://username:password@localhost:27017/test1</span>
          <span class="hljs-comment">#ä¸é…ç½®ï¼Œä¼šè‡ªåŠ¨ä» URI ä¸­è§£æ</span>
          <span class="hljs-attr">read-database:</span> <span class="hljs-string">test1</span>
      <span class="hljs-comment">#ä»åº“</span>
      <span class="hljs-attr">slave:</span>
        <span class="hljs-attr">uri:</span> <span class="hljs-string">mongodb://username:password@localhost:27017/test2</span>

</code></pre>
<h4 data-id="heading-8">4. ç«‹å³ä½“éªŒ</h4>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SilkyMongoTemplate silkyMongoTemplate;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demo</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ğŸ‰ çœ‹å¥½äº†ï¼ä¸€è¡Œä»£ç å®ç°å¤æ‚æŸ¥è¯¢</span>
        <span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> silkyMongoTemplate.list(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class)
                .eq(User::getName, &amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;)
                .gt(User::getAge, <span class="hljs-number">18</span>)
                .like(User::getEmail, &amp;#<span class="hljs-number">34</span>;<span class="hljs-meta">@gmail</span>.com&amp;#<span class="hljs-number">34</span>;)
                .orderByDesc(User::getCreateTime),
            User.class
        );
    }
}
</code></pre>
<h3 data-id="heading-9">ğŸ’¡ é©å‘½æ€§ç‰¹æ€§è¯¦è§£</h3>
<h4 data-id="heading-10">1. ğŸ¯ Lambdaè¡¨è¾¾å¼ - å¼€å‘è€…çš„ç¦éŸ³</h4>
<p><strong>ä¼ ç»Ÿå†™æ³• vs Silkyå†™æ³•å¤§æ¯”æ‹¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// âŒ ä¼ ç»Ÿå†™æ³• - å®¹æ˜“å‡ºé”™ï¼Œé‡æ„å›°éš¾</span>
<span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>();
query.addCriteria(Criteria.where(&amp;#<span class="hljs-number">34</span>;userName&amp;#<span class="hljs-number">34</span>;).is(&amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;));  <span class="hljs-comment">// å­—æ®µåå†™é”™ï¼Ÿè¿è¡Œæ—¶æ‰çŸ¥é“ï¼</span>
query.addCriteria(Criteria.where(&amp;#<span class="hljs-number">34</span>;userAge&amp;#<span class="hljs-number">34</span>;).gt(<span class="hljs-number">18</span>));
<span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> mongoTemplate.find(query, User.class);

<span class="hljs-comment">// âœ… Silkyå†™æ³• - ç±»å‹å®‰å…¨ï¼ŒIDEæ™ºèƒ½æç¤º</span>
<span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> silkyMongoTemplate.list(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class)
        .eq(User::getName, &amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;)      <span class="hljs-comment">// IDEè‡ªåŠ¨è¡¥å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥</span>
        .gt(User::getAge, <span class="hljs-number">18</span>),         <span class="hljs-comment">// é‡æ„æ—¶è‡ªåŠ¨æ›´æ–°</span>
    User.class
);
</code></pre>
<p><strong>æ›´å¤šéœ‡æ’¼äººå¿ƒçš„Lambdaæ“ä½œï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// å¤æ‚æ¡ä»¶æŸ¥è¯¢</span>
<span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> silkyMongoTemplate.list(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class)
        .in(User::getName, Arrays.asList(&amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;æå››&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;ç‹äº”&amp;#<span class="hljs-number">34</span>;))
        .and(q -&gt; q
            .gt(User::getAge, <span class="hljs-number">20</span>)
            .lt(User::getAge, <span class="hljs-number">40</span>)
            .or()
            .eq(User::getStatus, &amp;#<span class="hljs-number">34</span>;VIP&amp;#<span class="hljs-number">34</span>;)
        )
        .orderByAsc(User::getAge)
        .orderByDesc(User::getCreateTime),
    User.class
);

<span class="hljs-comment">// æ™ºèƒ½æ›´æ–°</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> silkyMongoTemplate.update(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class).eq(User::getName, &amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>()
        .set(User::getAge, <span class="hljs-number">25</span>)
        .set(User::getEmail, &amp;#<span class="hljs-number">34</span>;new_email<span class="hljs-meta">@example</span>.com&amp;#<span class="hljs-number">34</span>;)
        .inc(User::getLoginCount, <span class="hljs-number">1</span>),  <span class="hljs-comment">// åŸå­æ“ä½œï¼</span>
    User.class
);

<span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢å¦‚æ­¤ç®€å•</span>
<span class="hljs-type">PageResult</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> silkyMongoTemplate.page(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class).gt(User::getAge, <span class="hljs-number">18</span>), 
    User.class
);
</code></pre>
<h4 data-id="heading-11">2. ğŸ”„ å¤šæ•°æ®æºåˆ‡æ¢ - ä»æœªå¦‚æ­¤ç®€å•</h4>
<p><strong>å‘Šåˆ«ç¹ççš„æ¨¡æ¿ç®¡ç†ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiDataSourceService</span> {
    
    <span class="hljs-comment">// ğŸ¯ æ³¨è§£åˆ‡æ¢ - ä¼˜é›…å¦‚è¯—</span>
    <span class="hljs-meta">@DataSource(&amp;#34;user_db&amp;#34;)</span>
    <span class="hljs-keyword">public</span> List <span class="hljs-title function_">getUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> silkyMongoTemplate.list(User.class);
    }
    
    <span class="hljs-meta">@DataSource(&amp;#34;order_db&amp;#34;)</span> 
    <span class="hljs-keyword">public</span> List <span class="hljs-title function_">getOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> silkyMongoTemplate.list(Order.class);
    }
    
    <span class="hljs-meta">@DataSource(value = &amp;#34;log_db&amp;#34;, readOnly = true)</span>
    <span class="hljs-keyword">public</span> List <span class="hljs-title function_">getLogs</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> silkyMongoTemplate.list(Log.class);
    }
    
    <span class="hljs-comment">// ğŸš€ è·¨æ•°æ®æºäº‹åŠ¡</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUserAndOrder</span><span class="hljs-params">(User user, Order order)</span> {
        silkyMongoTemplate.switchDataSource(&amp;#<span class="hljs-number">34</span>;user_db&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> silkyMongoTemplate.save(user);
        
        silkyMongoTemplate.switchDataSource(&amp;#<span class="hljs-number">34</span>;order_db&amp;#<span class="hljs-number">34</span>;);
        order.setUserId(savedUser.getId());
        silkyMongoTemplate.save(order);
        
        <span class="hljs-comment">// ğŸ’¡ ä¸¤ä¸ªæ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼</span>
    }
}
</code></pre>
<h4 data-id="heading-12">3. âš¡ æ€§èƒ½ä¼˜åŒ– - æ„Ÿå—é£ä¸€èˆ¬çš„é€Ÿåº¦</h4>
<p><strong>æ‰¹é‡æ“ä½œæ€§èƒ½å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceService</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performanceDemo</span><span class="hljs-params">()</span> {
        <span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> generateUsers(<span class="hljs-number">10000</span>);
        
        <span class="hljs-comment">// â±ï¸ æ€§èƒ½æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-comment">// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šçº¦1250ms</span>
        <span class="hljs-comment">// for (User user : users) {</span>
        <span class="hljs-comment">//     mongoTemplate.save(user);</span>
        <span class="hljs-comment">// }</span>
        
        <span class="hljs-comment">// âœ… Silkyæ–¹å¼ï¼šçº¦280msï¼ˆæ€§èƒ½æå‡77%ï¼ï¼‰</span>
        silkyMongoTemplate.saveBatch(users);
        
        System.out.println(&amp;#<span class="hljs-number">34</span>;è€—æ—¶: &amp;#<span class="hljs-number">34</span>; + (System.currentTimeMillis() - startTime) + &amp;#<span class="hljs-number">34</span>;ms&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-comment">// ğŸš€ å¼‚æ­¥æ“ä½œ - ä¸é˜»å¡ä¸»çº¿ç¨‹</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture <span class="hljs-title function_">asyncBatchProcess</span><span class="hljs-params">(List users)</span> {
        <span class="hljs-keyword">return</span> asyncMongoService.saveBatchAsync(users);
    }
}
</code></pre>
<h4 data-id="heading-13">4. ğŸ¨ æ™ºèƒ½æ—¥å¿— - è°ƒè¯•ä»æœªå¦‚æ­¤æ„‰å¿«</h4>
<p><strong>çœ‹çœ‹æˆ‘ä»¬çš„æ™ºèƒ½æ—¥å¿—è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">
ğŸ” MongoDB [8ms] - QUERY: db.user.find({name: 'å¼ ä¸‰', age: {$gt: 20}})
ğŸ’¾ MongoDB [5ms] - INSERT: db.user.save({name: 'æå››', age: 25})
ğŸ”„ MongoDB [12ms] - UPDATE: db.user.updateMany({status: 'active'}, {$set: {lastLogin: ISODate()}})
âŒ MongoDB [3ms] - DELETE: db.user.deleteOne({_id: ObjectId('...')})
</code></pre>
<p><strong>ä¼ ç»Ÿæ—¥å¿— vs Silkyæ—¥å¿—ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// âŒ ä¼ ç»Ÿæ—¥å¿—ï¼šæ™¦æ¶©éš¾æ‡‚</span>
DEBUG - find using query: { &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>; : &amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;age&amp;#<span class="hljs-number">34</span>; : { &amp;#<span class="hljs-number">34</span>;$gt&amp;#<span class="hljs-number">34</span>; : <span class="hljs-number">20</span> } } ...

<span class="hljs-comment">// âœ… Silkyæ—¥å¿—ï¼šæ¸…æ™°ç›´è§‚</span>
INFO - MongoDB [8ms] - QUERY: db.user.find({name: <span class="hljs-string">'å¼ ä¸‰'</span>, age: {$gt: <span class="hljs-number">20</span>}})
</code></pre>
<h3 data-id="heading-14">ğŸ† ä¼ä¸šçº§ç‰¹æ€§</h3>
<h4 data-id="heading-15">å®Œæ•´çš„äº‹åŠ¡æ”¯æŒ</h4>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnterpriseService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">businessTransaction</span><span class="hljs-params">(User user, Order order, Payment payment)</span> {
        <span class="hljs-comment">// ç”¨æˆ·æ“ä½œ</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">savedUser</span> <span class="hljs-operator">=</span> silkyMongoTemplate.save(user);
        
        <span class="hljs-comment">// è®¢å•æ“ä½œ</span>
        order.setUserId(savedUser.getId());
        silkyMongoTemplate.save(order);
        
        <span class="hljs-comment">// æ”¯ä»˜æ“ä½œ</span>
        payment.setOrderId(order.getId());
        silkyMongoTemplate.save(payment);
        
        <span class="hljs-comment">// ğŸ’¥ ä»»ä½•æ­¥éª¤å¤±è´¥ï¼Œå…¨éƒ¨è‡ªåŠ¨å›æ»šï¼</span>
        <span class="hljs-comment">// if (payment.getAmount() &gt; user.getBalance()) {</span>
        <span class="hljs-comment">//     throw new RuntimeException(&amp;#34;ä½™é¢ä¸è¶³ï¼Œäº‹åŠ¡å›æ»šï¼&amp;#34;);</span>
        <span class="hljs-comment">// }</span>
        
        <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä½™é¢</span>
        silkyMongoTemplate.update(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class).eq(User::getId, savedUser.getId()),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>()
                .inc(User::getBalance, -payment.getAmount()),
            User.class
        );
    }
    
    <span class="hljs-comment">// ğŸ›¡ï¸ ç¼–ç¨‹å¼äº‹åŠ¡ - æ›´ç²¾ç»†çš„æ§åˆ¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">programmaticTransaction</span><span class="hljs-params">(List users)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> silkyMongoTemplate.executeInTransaction(() -&gt; {
            <span class="hljs-type">int</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (User user : users) {
                <span class="hljs-keyword">try</span> {
                    processUser(user);
                    silkyMongoTemplate.save(user);
                    successCount++;
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    <span class="hljs-comment">// å•ä¸ªå¤±è´¥ä¸å½±å“æ•´ä½“ï¼Œä½†...</span>
                }
            }
            
            <span class="hljs-comment">// ğŸš¨ æ•´ä½“æˆåŠŸç‡è¿‡ä½æ—¶å›æ»šæ‰€æœ‰æ“ä½œ</span>
            <span class="hljs-keyword">if</span> (successCount &lt; users.size() * <span class="hljs-number">0.8</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(&amp;#<span class="hljs-number">34</span>;æ•´ä½“å›æ»šï¼šæˆåŠŸç‡è¿‡ä½&amp;#<span class="hljs-number">34</span>;);
            }
            
            <span class="hljs-keyword">return</span> &amp;#<span class="hljs-number">34</span>;æˆåŠŸå¤„ç† &amp;#<span class="hljs-number">34</span>; + successCount + &amp;#<span class="hljs-number">34</span>; ä¸ªç”¨æˆ·&amp;#<span class="hljs-number">34</span>;;
        });
    }
}
</code></pre>
<h3 data-id="heading-16">ğŸ“Š çœŸå®æ€§èƒ½æ•°æ®</h3>
<p>æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œäº†ä¸¥æ ¼æµ‹è¯•ï¼Œç»“æœä»¤äººéœ‡æ’¼ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>Silkyæ–¹å¼</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td>æ‰¹é‡æ’å…¥1ä¸‡æ¡</td><td>1250ms</td><td>280ms</td><td>ğŸš€Â <strong>77%</strong></td></tr><tr><td>å¤æ‚æ¡ä»¶æŸ¥è¯¢</td><td>45ms</td><td>22ms</td><td>ğŸš€Â <strong>51%</strong></td></tr><tr><td>åˆ†é¡µæŸ¥è¯¢</td><td>68ms</td><td>35ms</td><td>ğŸš€Â <strong>48%</strong></td></tr><tr><td>å¤šæ•°æ®æºåˆ‡æ¢</td><td>æ‰‹åŠ¨ç®¡ç†</td><td>è‡ªåŠ¨å®Œæˆ</td><td>ğŸš€Â <strong>å¼€å‘æ•ˆç‡æå‡300%</strong></td></tr></tbody></table>
<h3 data-id="heading-17">ğŸ¯ é€‚ç”¨åœºæ™¯</h3>
<p>è¿™ä¸ªç»„ä»¶ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>âœ…Â <strong>å¿«é€Ÿå¼€å‘</strong>Â - ä¸­å°å‹é¡¹ç›®å¿«é€Ÿè¿­ä»£</li>
<li>âœ…Â <strong>å¾®æœåŠ¡æ¶æ„</strong>Â - å¤šæ•°æ®æºç®¡ç†</li>
<li>âœ…Â <strong>é«˜å¹¶å‘ç³»ç»Ÿ</strong>Â - è¯»å†™åˆ†ç¦»å’Œæ€§èƒ½ä¼˜åŒ–</li>
<li>âœ…Â <strong>æ•°æ®å¯†é›†å‹åº”ç”¨</strong>Â - å¤æ‚çš„æŸ¥è¯¢å’Œèšåˆæ“ä½œ</li>
<li>âœ…Â <strong>ä¼ä¸šçº§åº”ç”¨</strong>Â - äº‹åŠ¡ä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-18">ğŸ› ï¸ æ— ç¼è¿ç§»æ–¹æ¡ˆ</h3>
<p><strong>æ‹…å¿ƒè¿ç§»æˆæœ¬ï¼Ÿå®Œå…¨ä¸ç”¨æ‹…å¿ƒï¼</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// ä½ çš„ç°æœ‰ä»£ç å¯ä»¥ä¿æŒä¸å˜</span>
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> MongoTemplate mongoTemplate;  <span class="hljs-comment">// åŸæœ‰ä»£ç ç»§ç»­å·¥ä½œ</span>

<span class="hljs-comment">// åŒæ—¶äº«å—Silkyçš„æ–°ç‰¹æ€§</span>
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> SilkyMongoTemplate silkyMongoTemplate;  <span class="hljs-comment">// æ–°åŠŸèƒ½éšæ„ä½¿ç”¨</span>

<span class="hljs-comment">// æ¸è¿›å¼è¿ç§»ï¼Œé›¶é£é™©ï¼</span>
</code></pre>
<h3 data-id="heading-19">ğŸŒŸ ç”¨æˆ·è§è¯</h3>
<blockquote>
<p>"ä¹‹å‰æˆ‘ä»¬å›¢é˜Ÿæ¯å¤©éƒ½è¦å†™å¤§é‡çš„MongoDBæ¨¡æ¿ä»£ç ï¼Œè‡ªä»ç”¨äº†silky-mongodb-spring-boot-starterï¼Œå¼€å‘æ•ˆç‡æå‡äº†3å€ä¸æ­¢ï¼" â€”â€” æŸä¸€çº¿äº’è”ç½‘å…¬å¸æŠ€æœ¯æ€»ç›‘</p>
</blockquote>
<blockquote>
<p>"Lambdaè¡¨è¾¾å¼è®©æˆ‘ä»¬çš„ä»£ç æ›´å®‰å…¨ï¼Œé‡æ„æ—¶å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå­—æ®µåå†™é”™äº†ã€‚" â€”â€” èµ„æ·±åç«¯å·¥ç¨‹å¸ˆ</p>
</blockquote>
<h3 data-id="heading-20">ğŸš€ ç«‹å³å¼€å§‹</h3>
<h4 data-id="heading-21">æ·»åŠ ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml">

    com.silky
    silky-mongodb-spring-boot-starter
    1.0.0 

</code></pre>
<h4 data-id="heading-22">åŸºç¡€é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">silky:</span>
  <span class="hljs-attr">mongodb:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-attr">master:</span>
        <span class="hljs-attr">uri:</span> <span class="hljs-string">mongodb://localhost:27017/your_db</span>
</code></pre>
<h4 data-id="heading-23">å¼€å§‹ç¼–ç </h4>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// å°±è¿™ä¹ˆç®€å•ï¼</span>
<span class="hljs-type">List</span> <span class="hljs-variable">users</span> <span class="hljs-operator">=</span> silkyMongoTemplate.list(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;(User.class).eq(User::getName, &amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;), 
    User.class
);
</code></pre>
<h3 data-id="heading-24">ğŸ“– å­¦ä¹ èµ„æº</h3>
<ul>
<li>ğŸ“šÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyour-username%2Fsilky-mongodb-spring-boot-starter%2Fwiki" target="_blank" title="https://github.com/your-username/silky-mongodb-spring-boot-starter/wiki" ref="nofollow noopener noreferrer">å®Œæ•´æ–‡æ¡£</a></li>
<li>ğŸ’»Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyour-username%2Fsilky-mongodb-demo" target="_blank" title="https://github.com/your-username/silky-mongodb-demo" ref="nofollow noopener noreferrer">ç¤ºä¾‹é¡¹ç›®</a></li>
<li>ğŸ›Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyour-username%2Fsilky-mongodb-spring-boot-starter%2Fissues" target="_blank" title="https://github.com/your-username/silky-mongodb-spring-boot-starter/issues" ref="nofollow noopener noreferrer">é—®é¢˜åé¦ˆ</a></li>
</ul>
<h3 data-id="heading-25">ğŸ’ å¼€æºå…±å»º</h3>
<p><strong>silky-mongodb-spring-boot-starter</strong>Â å®Œå…¨å¼€æºï¼Œæˆ‘ä»¬æ¬¢è¿æ¯ä¸€ä½å¼€å‘è€…çš„å‚ä¸ï¼</p>
<p>ğŸ”—Â <strong>GitHub</strong>:Â 
ğŸ”—Â <strong>Gitee</strong>:Â </p>
<p>â­Â <strong>å¦‚æœè¿™ä¸ªé¡¹ç›®å¸®åŠ©äº†ä½ ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼</strong></p>
<h3 data-id="heading-26">ğŸŠ ç»“è¯­</h3>
<p>åœ¨å¿«èŠ‚å¥çš„å¼€å‘ä¸–ç•Œä¸­ï¼Œæ•ˆç‡å°±æ˜¯ç”Ÿå‘½ã€‚<strong>silky-mongodb-spring-boot-starter</strong>Â ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯ç»„ä»¶ï¼Œæ›´æ˜¯æˆ‘ä»¬å¯¹å¼€å‘ä½“éªŒçš„é‡æ–°å®šä¹‰ã€‚</p>
<p><strong>å‘Šåˆ«ç¹çï¼Œæ‹¥æŠ±é«˜æ•ˆï¼è®©æˆ‘ä»¬çš„ä»£ç ä¸ä»…èƒ½å¤Ÿè¿è¡Œï¼Œæ›´èƒ½å¤Ÿä¼˜é›…åœ°è¿è¡Œï¼</strong></p>
<hr/>
<p><strong>ğŸ’¬ äº’åŠ¨æ—¶é—´ï¼š</strong><br/>
ä½ åœ¨MongoDBå¼€å‘ä¸­é‡åˆ°è¿‡å“ªäº›ç—›ç‚¹ï¼Ÿè¿™ä¸ªç»„ä»¶è§£å†³äº†ä½ çš„é—®é¢˜å—ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä½“éªŒå’Œå»ºè®®ï¼</p>
<p><strong>ğŸ“¢ æ‰©æ•£å¥½æ¶ˆæ¯ï¼š</strong><br/>
å¦‚æœä½ è§‰å¾—è¿™ä¸ªç»„ä»¶å¾ˆæœ‰ç”¨ï¼Œè¯·åˆ†äº«ç»™æ›´å¤šéœ€è¦çš„å¼€å‘è€…ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ”¹å˜MongoDBçš„å¼€å‘ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day27 | Javaé›†åˆæ¡†æ¶ä¹‹Listæ¥å£è¯¦è§£]]></title>    <link>https://juejin.cn/post/7582090790182010918</link>    <guid>https://juejin.cn/post/7582090790182010918</guid>    <pubDate>2025-12-11T01:07:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582090790182010918" data-draft-id="7582063437414498342" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day27 | Javaé›†åˆæ¡†æ¶ä¹‹Listæ¥å£è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Java,Java EE"/> <meta itemprop="datePublished" content="2025-12-11T01:07:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡’æƒ°èœ—ç‰›"/> <meta itemprop="url" content="https://juejin.cn/user/615342556327752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day27 | Javaé›†åˆæ¡†æ¶ä¹‹Listæ¥å£è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/615342556327752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡’æƒ°èœ—ç‰›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:07:01.000Z" title="Thu Dec 11 2025 01:07:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¨å¤©æˆ‘ä»¬å­¦ä¹ äº†Collectionï¼Œä»Šå¤©æˆ‘ä»¬çœ‹çœ‹å®ƒæœ€å¸¸ç”¨çš„å­æ¥å£ä¹‹ä¸€â€”â€”Listã€‚</p>
<p>Listä»£è¡¨ä¸€ä¸ªæœ‰åºã€å¯é‡å¤çš„å…ƒç´ é›†åˆï¼Œæ”¯æŒæ ¹æ®ç´¢å¼•è¿›è¡Œè®¿é—®ã€æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œã€‚</p>
<p>å¸¸è§çš„å®ç°ç±»åŒ…æ‹¬ArrayListå’ŒLinkedListï¼Œå®ƒä»¬åœ¨åº•å±‚ç»“æ„ã€æ€§èƒ½ç‰¹å¾å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰æ˜æ˜¾å·®å¼‚ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Listæ¥å£æ¦‚è¿°</h2>
<p>Listæ¥å£æ˜¯java.utilåŒ…ä¸­çš„ä¸€ä¸ªé‡è¦æ¥å£ï¼Œå®ƒç»§æ‰¿è‡ªCollectionï¼Œå®šä¹‰äº†çº¿æ€§åºåˆ—ä¸­å…ƒç´ çš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢ã€æŸ¥æ‰¾ç­‰æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd5e7e47b4244976b5fb8eed0ced2115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=WqqWDzg32IWulvzY5HBu3Nwob7g%3D" alt="" loading="lazy"/></p>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span> {
<span class="hljs-comment">// åœ¨æœ«å°¾æ·»åŠ å…ƒç´ </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span>;

<span class="hljs-comment">// æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span>;

<span class="hljs-comment">// è·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´ </span>
E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;

<span class="hljs-comment">// åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </span>
E <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;

<span class="hljs-comment">// åˆ é™¤é¦–æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Object o)</span>;

<span class="hljs-comment">// è¿”å›å…ƒç´ é¦–æ¬¡å‡ºç°çš„ç´¢å¼•</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(Object o)</span>;

<span class="hljs-comment">// è¿”å›å…ƒç´ æœ€åå‡ºç°çš„ç´¢å¼•</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">lastIndexOf</span><span class="hljs-params">(Object o)</span>;

<span class="hljs-comment">// è·å–å­åˆ—è¡¨</span>
List <span class="hljs-title function_">subList</span><span class="hljs-params">(<span class="hljs-type">int</span> fromIndex, <span class="hljs-type">int</span> toIndex)</span>;

<span class="hljs-comment">// è·å–æ”¯æŒåŒå‘éå†çš„è¿­ä»£å™¨</span>
ListIterator <span class="hljs-title function_">listIterator</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.ListIterator;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day27Demo
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/6/24 10:51
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day27Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">List</span> <span class="hljs-variable">strList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
        strList.add(&amp;#<span class="hljs-number">34</span>;æ‡’æƒ°&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;å­¦&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;JAVA&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;åˆå§‹åˆ—è¡¨:&amp;#<span class="hljs-number">34</span>; + strList);

        <span class="hljs-comment">// æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </span>
        strList.add(<span class="hljs-number">2</span>, &amp;#<span class="hljs-number">34</span>;ä¸å­¦&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;æŒ‡å®šæ’å…¥ååˆ—è¡¨:&amp;#<span class="hljs-number">34</span>; + strList);

        <span class="hljs-comment">// è·å–æŒ‡å®šç´¢å¼•å…ƒç´ </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> strList.get(<span class="hljs-number">2</span>);
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç´¢å¼•<span class="hljs-number">2</span>å¤„å…ƒç´ :&amp;#<span class="hljs-number">34</span>; + str2);

        <span class="hljs-comment">// åˆ é™¤æŒ‡å®šç´¢å¼•å…ƒç´ </span>
        strList.remove(<span class="hljs-number">2</span>);
        System.out.println(&amp;#<span class="hljs-number">34</span>;åˆ é™¤ç´¢å¼•<span class="hljs-number">2</span>å…ƒç´ ååˆ—è¡¨:&amp;#<span class="hljs-number">34</span>; + strList);

        <span class="hljs-comment">// åˆ é™¤é¦–æ¬¡å‡ºç°çš„å…ƒç´ </span>
        strList.remove(&amp;#<span class="hljs-number">34</span>;æ‡’æƒ°&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;åˆ é™¤<span class="hljs-string">'æ‡’æƒ°'</span>ååˆ—è¡¨:&amp;#<span class="hljs-number">34</span>; + strList);

        <span class="hljs-comment">// æ·»åŠ é‡å¤å…ƒç´ </span>
        strList.add(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        strList.add(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;æ·»åŠ é‡å¤å…ƒç´ ååˆ—è¡¨:&amp;#<span class="hljs-number">34</span>; + strList);

        <span class="hljs-comment">// è¿”å›å…ƒç´ é¦–æ¬¡å‡ºç°çš„ç´¢å¼•</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">firstSnailIndex</span> <span class="hljs-operator">=</span> strList.indexOf(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç¬¬ä¸€ä¸ª<span class="hljs-string">'èœ—ç‰›'</span>çš„ç´¢å¼•:&amp;#<span class="hljs-number">34</span>; + firstSnailIndex);

        <span class="hljs-comment">// è¿”å›å…ƒç´ æœ€åå‡ºç°çš„ç´¢å¼•</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">lastSnailIndex</span> <span class="hljs-operator">=</span> strList.lastIndexOf(&amp;#<span class="hljs-number">34</span>;èœ—ç‰›&amp;#<span class="hljs-number">34</span>;);
        System.out.println(&amp;#<span class="hljs-number">34</span>;æœ€åä¸€ä¸ª<span class="hljs-string">'èœ—ç‰›'</span>çš„ç´¢å¼•:&amp;#<span class="hljs-number">34</span>; + lastSnailIndex);

        <span class="hljs-comment">// è·å–å­åˆ—è¡¨ï¼ˆfromIndex åŒ…å«ï¼ŒtoIndex ä¸åŒ…å«ï¼‰</span>
        <span class="hljs-type">List</span> <span class="hljs-variable">sub</span> <span class="hljs-operator">=</span> strList.subList(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
        System.out.println(&amp;#<span class="hljs-number">34</span>;å­åˆ—è¡¨ [<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)ï¼š&amp;#<span class="hljs-number">34</span>; + sub);

        <span class="hljs-comment">// ä½¿ç”¨ ListIterator åŒå‘éå†</span>
        <span class="hljs-type">ListIterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> strList.listIterator();
        System.out.println(&amp;#<span class="hljs-number">34</span>;æ­£å‘éå†:&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">while</span> (iterator.hasNext()) {
            System.out.println(&amp;#<span class="hljs-number">34</span>;â†’ &amp;#<span class="hljs-number">34</span>; + iterator.next());
        }

        System.out.println(&amp;#<span class="hljs-number">34</span>;åå‘éå†:&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">while</span> (iterator.hasPrevious()) {
            System.out.println(&amp;#<span class="hljs-number">34</span>;â† &amp;#<span class="hljs-number">34</span>; + iterator.previous());
        }
    }
}
</code></pre>
<h2 data-id="heading-1">äºŒã€ArrayList</h2>
<p>ç¬¬ä¸€èŠ‚ä¸­çš„ç¤ºä¾‹ä»£ç å°±æ˜¯ä½¿ç”¨çš„ArrayListã€‚</p>
<p>ArrayListæ˜¯Listæ¥å£æœ€æ ¸å¿ƒã€æœ€å¸¸ç”¨çš„å®ç°ç±»ã€‚</p>
<p>å®ƒçš„åå­—å…¶å®å·²ç»æš´éœ²äº†å®ƒå¤§æ¦‚çš„å®ç°æ–¹å¼ï¼šArrayï¼ˆæ•°ç»„ï¼‰ã€‚</p>
<h3 data-id="heading-2">1ã€åº•å±‚ç»“æ„</h3>
<p>ArrayListå†…éƒ¨å°è£…äº†ä¸€ä¸ªå¯ä»¥åŠ¨æ€è°ƒæ•´å¤§å°çš„Object[]æ•°ç»„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f24d04182e7d47a78be9b5cbfe4d0708~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=i90fdybIkXIiKR8LNFOaVFXHG3c%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å­˜å‚¨æ•°æ®çš„æ•°ç»„</span>
<span class="hljs-keyword">transient</span> Object[] elementData;
<span class="hljs-comment">// å½“å‰å…ƒç´ ä¸ªæ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
</code></pre>
<h3 data-id="heading-3">2ã€æ·»åŠ å…ƒç´ </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> {
    modCount++;
    add(e, elementData, size);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e, Object[] elementData, <span class="hljs-type">int</span> s)</span> {
    <span class="hljs-keyword">if</span> (s == elementData.length)
        elementData = grow();
    elementData[s] = e;
    size = s + <span class="hljs-number">1</span>;
}
</code></pre>
<p>æ¯æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™éƒ½ä¼šæ£€æŸ¥æ˜¯ä¸æ˜¯éœ€è¦æ‰©å®¹ï¼Œæ‰©å®¹ä¸€èˆ¬æ˜¯åŸå®¹é‡çš„ 1.5 å€ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d187958ecea14da8b86bef68df57cd7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=5aEsf8sIk6DZc2k2lnWDDPoyp8o%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3ã€åˆ é™¤å…ƒç´ </h3>
<p>ç”±äºæ˜¯åŸºäºæ•°ç»„ï¼Œæ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ¶‰åŠåˆ°å…ƒç´ çš„æ‰¹é‡ç§»åŠ¨ï¼Œæ•ˆç‡ä¸º O(n)ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5ae55b8b1bb4b698c3f8f45b4997203~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=xeL2AGwS8eUWVZJT6gKIfE7ZGPo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">4ã€ArrayListæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹</h3>
<p>ç”±äºåº•å±‚æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡ç´¢å¼•get(i)è®¿é—®å…ƒç´ çš„æ—¶å€™ï¼ŒCPUå¯ä»¥ç›´æ¥é€šè¿‡"èµ·å§‹åœ°å€ + i * å…ƒç´ å¤§å°"çš„å…¬å¼è®¡ç®—å‡ºåœ°å€ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œæ‰€ä»¥æŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>å®ƒä½¿ç”¨çš„æ˜¯å°¾æ’æ³•ï¼Œåœ¨æ²¡æœ‰è§¦å‘æ‰©å®¹çš„æƒ…å†µä¸‹ï¼Œå¾€åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ åªæ˜¯ç®€å•çš„èµ‹å€¼æ“ä½œï¼Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚å³ä½¿å¶å°”å‘ç”Ÿæ‰©å®¹ï¼Œè¿™ç§å¼€é”€åœ¨å¤§é‡æ“ä½œä¸­è¢«å¹³æ‘Šåï¼Œå¹³å‡å¤æ‚åº¦ä¾ç„¶æ˜¯O(1)ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåœ¨åˆ—è¡¨çš„ä¸­é—´è¿›è¡Œå¢åˆ ï¼Œä¼šå¯¼è‡´è¯¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰¹é‡ç§»åŠ¨ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œå¼€é”€è¶Šå¤§ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€LinkedList</h2>
<p>LinkedListåº•å±‚åŸºäºåŒå‘é“¾è¡¨ã€‚å®ƒç”±è®¸å¤šç‹¬ç«‹çš„èŠ‚ç‚¹ä¸²è”è€Œæˆï¼Œæ¯ä¸ªNodeéƒ½å­˜æ”¾ç€æ•°æ®ä»¥åŠæŒ‡å‘å‰åèŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7edd34ed99bd49d8aa540b69eb55da13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=eu9jBBHrh6HcEBoxRA%2ByFrVLzOE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">1ã€åº•å±‚ç»“æ„</h3>
<p>LinkedListæ˜¯åŸºäºåŒå‘é“¾è¡¨å®ç°çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸‰ä¸ªæŒ‡é’ˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/add8a08ad8bc43178dd96958ba8d78d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=Fy7GcrpcccDGNR7xKYLMYqFkVAw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">2ã€æ’å…¥åˆ é™¤</h3>
<p>å› ä¸ºé“¾è¡¨ç»“æ„ï¼Œæ’å…¥å’Œåˆ é™¤æŸä¸ªèŠ‚ç‚¹åªéœ€è°ƒæ•´å‰åèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä¸æ¶‰åŠæ•°æ®ç§»åŠ¨ï¼Œæ•ˆç‡ä¸ºO(1)ã€‚</p>
<p>ä½†å‰ææ˜¯å·²ç»å®šä½åˆ°äº†ç›®æ ‡èŠ‚ç‚¹ï¼Œè€Œå®šä½çš„è¿‡ç¨‹æ˜¯O(n)ã€‚</p>
<h3 data-id="heading-9">3ã€æŸ¥è¯¢</h3>
<p>è®¿é—®ç¬¬nä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦ä»å¤´æˆ–å°¾å¼€å§‹éå†ï¼Œæ•ˆç‡ä¸ºO(n)ã€‚è¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹å°±æ˜¯ä¸Šé¢æˆ‘ä»¬è¯´çš„å®šä½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/266f95d419d844e5beada1ece132c357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020021&amp;x-signature=R5Dt56tBEoA4xY%2FODNL9ltPW40s%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">4ã€æ³¨æ„ç‚¹</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ç´¢å¼•æˆ–éå†æŸ¥æ‰¾æ¥å®šä½å…ƒç´ ï¼Œè¿™ä¸ªå®šä½è¿‡ç¨‹åœ¨LinkedListä¸­æ˜¯O(n) çš„ï¼Œå®ƒå½»åº•æ‹–å®äº†åç»­O(1)çš„ä¿®æ”¹ä¼˜åŠ¿ã€‚</p>
<p>add(index, e): O(n) æŸ¥æ‰¾ + O(1) ä¿®æ”¹ = æ•´ä½“ O(n)</p>
<p>remove(Object o): O(n) æŸ¥æ‰¾ + O(1) ä¿®æ”¹ = æ•´ä½“ O(n)</p>
<p>LinkedListåœ¨"æŒ‰ç´¢å¼•/å¯¹è±¡å¢åˆ "è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå¹¶æ²¡æœ‰æ¯”ArrayListå¿«ï¼Œæœ‰æ—¶å€™è¿˜å› ä¸ºå®ƒçš„å†…å­˜ä¸è¿ç»­æ€§ï¼ˆå¯¹CPUç¼“å­˜ä¸å‹å¥½ï¼‰ï¼Œå®é™…è¿è¡Œå¾—æ›´æ…¢ã€‚</p>
<p>æ‰€ä»¥ï¼Œå®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šç”¨åˆ°LinkedListã€‚</p>
<p>å°±è¿Josh Blochä¹Ÿåœ¨ã€ŠEffective Javaã€‹é‡Œè¯´äº†ï¼Œå°½é‡é¿å…ä½¿ç”¨LinkedListï¼Œé™¤éä½ çœŸçš„éœ€è¦ã€‚</p>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å¤§è‡´çœ‹äº†Listæ¥å£ä¸¤å¤§å®ç°çš„å†…éƒ¨ã€‚</p>
<p>ä¹ŸèŠäº†ä¸‹ArrayListå’ŒLinkedListåœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>æˆ‘ä»¬åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…è¦ä¼šç”¨ï¼Œè¿˜è¦é€šè¿‡æ€è€ƒï¼Œå…·æœ‰åŸºäºåœºæ™¯å’Œæ€§èƒ½æƒè¡¡çš„é€‰å‹èƒ½åŠ›ã€‚</p>
<p>ä¸‹ä¸€ç¯‡é¢„å‘Š</p>
<blockquote>
<p>Day28 | Javaé›†åˆæ¡†æ¶ä¹‹Setæ¥å£è¯¦è§£</p>
</blockquote>
<p>å¦‚æœä½ è§‰å¾—è¿™ç³»åˆ—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨ä¸“æ ï¼Œæˆ‘ä»¬ä¸€èµ·åšæŒä¸‹å»ï¼</p>
<p><strong>æ›´å¤šæ–‡ç« è¯·å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Šæ‡’æƒ°èœ—ç‰›å·¥åŠã€‹</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPF å®ç°é«˜ä»¿ Windows é€šçŸ¥æç¤ºæ¡†ï¼šå·¥ä¸šçº§å¼¹çª—è®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7582047554090352649</link>    <guid>https://juejin.cn/post/7582047554090352649</guid>    <pubDate>2025-12-11T01:15:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047554090352649" data-draft-id="7515228928606388251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPF å®ç°é«˜ä»¿ Windows é€šçŸ¥æç¤ºæ¡†ï¼šå·¥ä¸šçº§å¼¹çª—è®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="åç«¯,C#,.NET"/> <meta itemprop="datePublished" content="2025-12-11T01:15:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç ç¼–åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1308876155395739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPF å®ç°é«˜ä»¿ Windows é€šçŸ¥æç¤ºæ¡†ï¼šå·¥ä¸šçº§å¼¹çª—è®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1308876155395739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç ç¼–åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:15:34.000Z" title="Thu Dec 11 2025 01:15:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è½¯ä»¶å¼€å‘ä¸­ï¼Œç”¨æˆ·äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚ç‰¹åˆ«æ˜¯åœ¨å·¥ä¸šç›‘æ§ã€é‡‘èç³»ç»Ÿæˆ–ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæ¶ˆæ¯æç¤ºä½œä¸ºä¿¡æ¯åé¦ˆçš„é‡è¦æ‰‹æ®µï¼Œå…¶ç¾è§‚æ€§ã€æ˜“ç”¨æ€§å’Œç¨³å®šæ€§éƒ½ä¸å¯å¿½è§†ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <strong>WPF</strong> å’Œ <strong>C#</strong> å®ç°ä¸€ä¸ªç±»ä¼¼ Windows ç³»ç»Ÿçš„é€šçŸ¥æç¤ºæ¡†ï¼ˆToast Notificationï¼‰ï¼Œæ”¯æŒåŠ¨ç”»æ•ˆæœã€è‡ªåŠ¨å…³é—­ã€å¤šæ¶ˆæ¯å †å æ˜¾ç¤ºç­‰åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä»£ç å±•ç¤ºå®Œæ•´çš„å®ç°é€»è¾‘ã€‚é€‚ç”¨äºæ¡Œé¢åº”ç”¨ç¨‹åºçš„æ¶ˆæ¯æ¨é€æœºåˆ¶ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¤ç”¨æ€§ã€‚</p>
<h3 data-id="heading-1">æ­£æ–‡</h3>
<h4 data-id="heading-2">ä¸€ã€æ•ˆæœå›¾å±•ç¤º</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73bed3a09dc54ab3bef7009eb3094282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP56CB57yW5Yyg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020534&amp;x-signature=OaLBeXLnjfCZtryBDnqOLMjIu1Q%3D" alt="9b70a68434d3b872889d99222ad842d1_1866408-20200407091606513-1415185705.gif" loading="lazy"/></p>
<p>ä¸»çª—å£ç•Œé¢ç®€æ´ï¼Œä»…åŒ…å«ä¸€ä¸ªè§¦å‘æŒ‰é’®ã€‚ç‚¹å‡»æŒ‰é’®åï¼Œä¼šåœ¨å±å¹•å³ä¸‹è§’ä¾æ¬¡å¼¹å‡ºå¤šä¸ªæç¤ºæ¡†ï¼Œæ¯ä¸ªæç¤ºæ¡†å¸¦æœ‰æ ‡é¢˜ã€å†…å®¹å’Œå…³é—­æŒ‰é’®ï¼Œå¹¶å…·æœ‰æ·¡å…¥æ·¡å‡ºçš„åŠ¨ç”»æ•ˆæœã€‚</p>
<h4 data-id="heading-3">äºŒã€æç¤ºæ¡†ç•Œé¢è®¾è®¡ï¼ˆXAMLï¼‰</h4>
<p>æç¤ºæ¡†é‡‡ç”¨æ— è¾¹æ¡†ã€æ— æ ‡é¢˜æ çš„è®¾è®¡ï¼Œè®¾ç½®ä¸ºå§‹ç»ˆç½®é¡¶çª—å£ã€‚æ ¸å¿ƒç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">
    
        
            
            
        
        
            
            
            
        
        
    

</code></pre>
<p>å…³é”®å±æ€§è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>ResizeMode=&amp;#34;NoResize&amp;#34;</code>ï¼šç¦æ­¢è°ƒæ•´å¤§å°ã€‚</p>
</li>
<li>
<p><code>WindowStyle=&amp;#34;None&amp;#34;</code>ï¼šå»é™¤é»˜è®¤çª—å£æ ·å¼ã€‚</p>
</li>
<li>
<p><code>Topmost=&amp;#34;True&amp;#34;</code>ï¼šå§‹ç»ˆä¿æŒæœ€ä¸Šå±‚ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">ä¸‰ã€ä¸»çª—å£åå°é€»è¾‘ï¼ˆMainWindow.xaml.csï¼‰</h4>
<h4 data-id="heading-5">1ã€æ•°æ®æ¨¡å‹å®šä¹‰</h4>
<p>ç”¨äºä¼ é€’æç¤ºæ¡†çš„æ ‡é¢˜å’Œå†…å®¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">NotifyData</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Content { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<h4 data-id="heading-6">2ã€ä¸»çª—å£ç±»å®ç°</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MainWindow</span> : <span class="hljs-title">Window</span>
{
    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List _dialogs = <span class="hljs-keyword">new</span> List();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MainWindow</span>()</span>
    {
        InitializeComponent();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Button_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, RoutedEventArgs e</span>)</span>
    {
        i++;
        NotifyData data = <span class="hljs-keyword">new</span> NotifyData();
        data.Title = &amp;<span class="hljs-meta">#34;æç¤º&amp;#34;;</span>
        data.Content = &amp;<span class="hljs-meta">#34;XXXä½™é¢ä¸è¶³ï¼ŒXXXä½™é¢ä¸è¶³ï¼ŒXXXä½™é¢ä¸è¶³ï¼ŒXXXä½™é¢ä¸è¶³&amp;#34; + i;</span>

        Window1 dialog = <span class="hljs-keyword">new</span> Window1();
        dialog.Closed += Dialog_Closed;
        dialog.TopFrom = GetTopFrom();
        dialog.DataContext = data;
        dialog.Show();

        _dialogs.Add(dialog);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Dialog_Closed</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
    {
        <span class="hljs-keyword">var</span> closedDialog = sender <span class="hljs-keyword">as</span> Window1;
        _dialogs.Remove(closedDialog);
    }

    <span class="hljs-function"><span class="hljs-built_in">double</span> <span class="hljs-title">GetTopFrom</span>()</span>
    {
        <span class="hljs-built_in">double</span> topFrom = System.Windows.SystemParameters.WorkArea.Bottom - <span class="hljs-number">10</span>;
        <span class="hljs-built_in">bool</span> isContinueFind = _dialogs.Any(o =&gt; o.TopFrom == topFrom);

        <span class="hljs-keyword">while</span> (isContinueFind)
        {
            topFrom = topFrom - <span class="hljs-number">160</span>;
            isContinueFind = _dialogs.Any(o =&gt; o.TopFrom == topFrom);
        }

        <span class="hljs-keyword">if</span> (topFrom &lt;= <span class="hljs-number">0</span>)
            topFrom = System.Windows.SystemParameters.WorkArea.Bottom - <span class="hljs-number">10</span>;

        <span class="hljs-keyword">return</span> topFrom;
    }
}
</code></pre>
<p>åŠŸèƒ½è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>GetTopFrom()</code> æ–¹æ³•ç”¨äºè®¡ç®—ä¸‹ä¸€ä¸ªæç¤ºæ¡†çš„ä½ç½®ï¼Œé¿å…é‡å ã€‚</p>
</li>
<li>
<p><code>_dialogs</code> åˆ—è¡¨ç”¨äºç®¡ç†æ‰€æœ‰æ‰“å¼€çš„æç¤ºæ¡†ã€‚</p>
</li>
<li>
<p>æ¯ä¸ªæç¤ºæ¡†å…³é—­æ—¶ä¼šä»åˆ—è¡¨ä¸­ç§»é™¤ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">å››ã€æç¤ºæ¡†åå°é€»è¾‘ï¼ˆWindow1.xaml.csï¼‰</h4>
<p>è¯¥ç±»è´Ÿè´£å¤„ç†æç¤ºæ¡†çš„åŠ è½½ã€ä½ç½®åŠ¨ç”»å’Œè‡ªåŠ¨å…³é—­åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Window1</span> : <span class="hljs-title">Window</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> TopFrom { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Window1</span>()</span>
    {
        InitializeComponent();
        <span class="hljs-keyword">this</span>.Loaded += NotificationWindow_Loaded;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">NotificationWindow_Loaded</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, RoutedEventArgs e</span>)</span>
    {
        NotifyData data = <span class="hljs-keyword">this</span>.DataContext <span class="hljs-keyword">as</span> NotifyData;
        <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>)
        {
            tbContent.Text = data.Content;
            tbTitle.Text = data.Title;
        }

        Window1 self = sender <span class="hljs-keyword">as</span> Window1;
        <span class="hljs-keyword">if</span> (self != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-built_in">double</span> right = SystemParameters.WorkArea.Right - <span class="hljs-number">10</span>;
            self.Top = TopFrom - <span class="hljs-number">160</span>;

            DoubleAnimation animation = <span class="hljs-keyword">new</span> DoubleAnimation();
            animation.Duration = <span class="hljs-keyword">new</span> Duration(TimeSpan.FromMilliseconds(<span class="hljs-number">500</span>));
            animation.From = right;
            animation.To = right - self.ActualWidth;
            self.BeginAnimation(Window.LeftProperty, animation);

            Task.Factory.StartNew(<span class="hljs-built_in">delegate</span>
            {
                <span class="hljs-built_in">int</span> seconds = <span class="hljs-number">5</span>;
                System.Threading.Thread.Sleep(TimeSpan.FromSeconds(seconds));

                <span class="hljs-keyword">this</span>.Dispatcher.Invoke(<span class="hljs-built_in">delegate</span>
                {
                    animation = <span class="hljs-keyword">new</span> DoubleAnimation();
                    animation.Duration = <span class="hljs-keyword">new</span> Duration(TimeSpan.FromMilliseconds(<span class="hljs-number">500</span>));
                    animation.Completed += (s, a) =&gt; { self.Close(); };
                    animation.From = right - self.ActualWidth;
                    animation.To = right;
                    self.BeginAnimation(Window.LeftProperty, animation);
                });
            });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Button_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, RoutedEventArgs e</span>)</span>
    {
        <span class="hljs-built_in">double</span> right = SystemParameters.WorkArea.Right;
        DoubleAnimation animation = <span class="hljs-keyword">new</span> DoubleAnimation();
        animation.Duration = <span class="hljs-keyword">new</span> Duration(TimeSpan.FromMilliseconds(<span class="hljs-number">500</span>));
        animation.Completed += (s, a) =&gt; { <span class="hljs-keyword">this</span>.Close(); };
        animation.From = right - <span class="hljs-keyword">this</span>.ActualWidth;
        animation.To = right;
        <span class="hljs-keyword">this</span>.BeginAnimation(Window.LeftProperty, animation);
    }
}
</code></pre>
<p>åŠŸèƒ½è¯´æ˜ï¼š</p>
<ul>
<li>
<p>æç¤ºæ¡†åŠ è½½æ—¶æ‰§è¡Œæ»‘åŠ¨åŠ¨ç”»ï¼Œä»å³ä¾§æ»‘å…¥ã€‚</p>
</li>
<li>
<p>é»˜è®¤æ˜¾ç¤º5ç§’åè‡ªåŠ¨å…³é—­ï¼Œå¹¶æ‰§è¡Œåå‘æ»‘å‡ºåŠ¨ç”»ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å¯ç‚¹å‡»"Ã—"æ‰‹åŠ¨å…³é—­æç¤ºæ¡†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ WPF å¼€å‘ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€è§†è§‰ç¾è§‚çš„é€šçŸ¥æç¤ºæ¡†æ§ä»¶ï¼Œæ¶µç›–äº†ä»ç•Œé¢å¸ƒå±€ã€æ•°æ®ç»‘å®šåˆ°åŠ¨ç”»æ§åˆ¶ã€è‡ªåŠ¨å…³é—­ç­‰å¤šä¸ªå…³é”®æŠ€æœ¯ç‚¹ã€‚é€šè¿‡å®é™…ç¼–ç å±•ç¤ºäº†å¦‚ä½•åœ¨å·¥ä¸šçº§æ¡Œé¢åº”ç”¨ä¸­å®ç°ä¼˜é›…çš„ä¿¡æ¯æ¨é€æœºåˆ¶ã€‚</p>
<p>è¯¥æç¤ºæ¡†å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>æ”¯æŒå¤šæ¶ˆæ¯å †å æ˜¾ç¤ºï¼›</p>
</li>
<li>
<p>è‡ªåŠ¨è®¡ç®—å¼¹çª—ä½ç½®ï¼Œé¿å…é®æŒ¡ï¼›</p>
</li>
<li>
<p>æ”¯æŒæ»‘åŠ¨åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</p>
</li>
<li>
<p>å¯çµæ´»æ‰©å±•å†…å®¹æ ¼å¼å’Œäº¤äº’æ–¹å¼ã€‚</p>
</li>
</ul>
<p>æ— è®ºæ˜¯ç”¨äºä¸šåŠ¡æé†’ã€ç³»ç»Ÿé€šçŸ¥è¿˜æ˜¯å¼‚å¸¸æç¤ºï¼Œè¯¥ç»„ä»¶éƒ½èƒ½å¾ˆå¥½åœ°æ»¡è¶³éœ€æ±‚ï¼Œå…·æœ‰è‰¯å¥½çš„å¤ç”¨ä»·å€¼å’Œå·¥ç¨‹å®è·µæ„ä¹‰ã€‚</p>
<h3 data-id="heading-9">å…³é”®è¯ï¼ˆé¡¿å·åˆ†éš”ï¼‰</h3>
<p>WPFã€é€šçŸ¥æ¡†ã€Toastã€å¼¹çª—ã€æç¤ºæ¡†ã€C#ã€WindowStyleã€Topmostã€DoubleAnimationã€Dispatcherã€Taskã€MVVMã€UIäº¤äº’ã€åŠ¨ç”»æ•ˆæœã€å·¥ä¸šçº§å¼¹çª—ã€æ¶ˆæ¯æ¨é€ã€Windowsæç¤ºé£æ ¼ã€XAMLã€è‡ªå®šä¹‰æ§ä»¶ã€æºç ä¸‹è½½</p>
<h3 data-id="heading-10">æœ€å</h3>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ†äº«çŸ¥è¯†çš„åŠ¨åŠ›ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŠ å…¥å¾®ä¿¡å…¬ä¼—å· <strong>[DotNetæŠ€æœ¯åŒ ]</strong> ç¤¾åŒºï¼Œä¸å…¶ä»–çƒ­çˆ±æŠ€æœ¯çš„åŒè¡Œä¸€èµ·äº¤æµå¿ƒå¾—ï¼Œå…±åŒæˆé•¿ï¼</p>
<p><strong>ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€å­¦ä¹ ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FastApiæ¥å£æ–‡æ¡£è®¿é—®è¶…æ—¶åŠ è½½ä¸å‡ºæ¥è§£å†³æ–¹æ¡ˆæ¥äº†]]></title>    <link>https://juejin.cn/post/7582067084840894518</link>    <guid>https://juejin.cn/post/7582067084840894518</guid>    <pubDate>2025-12-11T01:19:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840894518" data-draft-id="7582066556088926271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FastApiæ¥å£æ–‡æ¡£è®¿é—®è¶…æ—¶åŠ è½½ä¸å‡ºæ¥è§£å†³æ–¹æ¡ˆæ¥äº†"/> <meta itemprop="keywords" content="Python,FastAPI"/> <meta itemprop="datePublished" content="2025-12-11T01:19:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åˆ†ä¸‰åä¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/8451825861821"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FastApiæ¥å£æ–‡æ¡£è®¿é—®è¶…æ—¶åŠ è½½ä¸å‡ºæ¥è§£å†³æ–¹æ¡ˆæ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/8451825861821/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åˆ†ä¸‰åä¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:19:52.000Z" title="Thu Dec 11 2025 01:19:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h3 data-id="heading-0">é—®é¢˜</h3>
<p>FastApi é»˜è®¤æ¥å£æ–‡æ¡£åœ°å€ åŠ è½½ä¸å‡ºæ¥ç©ºç™½é¡µé¢ã€‚</p>
<h3 data-id="heading-1">åŸå› </h3>
<p>FastApi é»˜è®¤ä½¿ç”¨äº†<code>swagger-ui.css </code>å’Œ <code>swagger-ui-bundle.js </code>æ¥æ¸²æŸ“æ–‡æ¡£é¡µé¢ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯å›½å¤–cdnæ‰€ä»¥å“åº”æ…¢ï¼Œä¼šå‡ºç°è¶…æ—¶æƒ…å†µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46460b6199b4f5f8556f2e3b4d65b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021770&amp;x-signature=EP2Ix5uPbah2yk4NmHoEqUN%2Fj6o%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">è§£å†³æ–¹æ³•</h3>
<p>æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°<code>swagger-ui.css  swagger-ui-bundle.js </code>ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°é™æ€æ–‡ä»¶ã€‚</p>
<p>é¦–å…ˆä¸‹è½½ä¸¤ä¸ªé™æ€æ–‡ä»¶ï¼Œåœ¨æœ¬é¡¹ç›®ç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»º<code>staticæ–‡ä»¶å¤¹</code>ã€‚</p>
<p>csså’Œjsæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°
swagger-ui.css ä¸‹è½½åœ°å€
swagger-ui-bundle.js ä¸‹è½½åœ°å€</p>
<p>å¤åˆ¶<code>swagger-ui.css  swagger-ui-bundle.js </code>ä»£ç ï¼Œå…¨é€‰ã€CTRL+Aã€‘ç²˜è´´åˆ°æœ¬åœ°static æ–‡ä»¶ä¸‹ï¼ŒåŒæ—¶åˆ›å»º<code>swagger-ui.css  swagger-ui-bundle.js </code>ä¸¤ä¸ªæ–‡ä»¶ã€‚
å¦‚ä¸‹å›¾ï¼š</p>
<p><strong>swagger-ui-bundle.js</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6ec7b2e603145ff9cc24751ffd8afd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021770&amp;x-signature=uKOVgs3kgLX9hZ8HlsEGAD2fIVY%3D" alt="image.png" loading="lazy"/>â€˜â€™</p>
<p><strong>swagger-ui.css</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a64a36a546a46e080739a9c26a03599~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021770&amp;x-signature=Zg2RGrLAVxzPKUi6g5sjIa%2BpmWk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6304a9316d642cbbad0f9eebcf0f898~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021770&amp;x-signature=vqDr2ru7FMNZUBL%2Fue1w6rznxAg%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åä¿®æ”¹FastApi æ–‡æ¡£èµ„æºè®¿é—®æœ¬åœ°èµ„æºæ–‡ä»¶ã€‚</p>
<p><strong>FastApi</strong> ä»£ç é…ç½®å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI,Path
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> fastapi.openapi.docs <span class="hljs-keyword">import</span> get_swagger_ui_html
<span class="hljs-keyword">from</span> starlette.staticfiles <span class="hljs-keyword">import</span> StaticFiles

app = FastAPI(docs_url=<span class="hljs-literal">None</span>)
app.mount(&amp;<span class="hljs-comment">#34;/static&amp;#34;, StaticFiles(directory=&amp;#34;static&amp;#34;), name=&amp;#34;static&amp;#34;)</span>

<span class="hljs-meta">@app.get(<span class="hljs-params">&amp;<span class="hljs-comment">#34;/docs&amp;#34;;, include_in_schema=False)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> custom_swagger_ui_html(<span class="hljs-params"/>):
    <span class="hljs-keyword">return</span> get_swagger_ui_html(<span class="hljs-params">
        openapi_url=app.openapi_url,
        title=&amp;<span class="hljs-comment">#34;Swagger UI(å®šåˆ¶)&amp;#34;,</span>
        swagger_js_url=&amp;<span class="hljs-comment">#34;/static/swagger-ui-bundle.js&amp;#34;,</span>
        swagger_css_url=&amp;<span class="hljs-comment">#34;/static/swagger-ui.css&amp;#34;;</span>
    </span>)

@app.get(<span class="hljs-params">&amp;<span class="hljs-comment">#34;/&amp;#34;)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> root(<span class="hljs-params"/>):
    <span class="hljs-keyword">return</span> {&amp;<span class="hljs-comment">#34;message&amp;#34;: &amp;#34;Hello World Python FastApi&amp;#34;}</span>

</span></span></span></code></pre>
<p>é…ç½®å®Œå†æ¬¡è®¿é—®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8caadc0928d0492fbf7b30eaabd3cef6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021770&amp;x-signature=0xzCpHRfeNzxWw95aG%2F2PFooJ54%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[scalaä¸­çš„Array]]></title>    <link>https://juejin.cn/post/7582110969200263206</link>    <guid>https://juejin.cn/post/7582110969200263206</guid>    <pubDate>2025-12-11T01:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582110969200263206" data-draft-id="7582047554090205193" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="scalaä¸­çš„Array"/> <meta itemprop="keywords" content="Scala"/> <meta itemprop="datePublished" content="2025-12-11T01:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼˜èµ·è’™è’™é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/1866332824404282"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            scalaä¸­çš„Array
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1866332824404282/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼˜èµ·è’™è’™é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:38:55.000Z" title="Thu Dec 11 2025 01:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€.Arrayçš„å®šä¹‰</h2>
<p>Array æ˜¯ä¸€ç§åœ¨ Scala ä¸­ç”¨äºå­˜å‚¨å›ºå®šå¤§å°ã€ç›¸åŒç±»å‹å…ƒç´ çš„æ•°æ®ç»“æ„ã€‚å®ƒåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œè¿™ä½¿å¾—è®¿é—®å…ƒç´ çš„é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>ç±»å‹æœ‰ä¸¤ç§ï¼šArrayè¡¨ç¤ºé•¿åº¦ä¸å¯å˜çš„æ•°ç»„ å’Œ ArrayBufferè¡¨ç¤ºé•¿åº¦å¯å˜çš„æ•°ç»„</p>
<h2 data-id="heading-1">äºŒ.ä¸å¯å˜æ•°ç»„</h2>
<p>Arrayè¡¨ç¤ºé•¿åº¦ä¸å¯å˜çš„æ•°ç»„ï¼Œä¸€æ—¦å®šä¹‰ä¹‹åï¼Œä¸èƒ½å†å¢åŠ ï¼Œåˆ é™¤å…ƒç´ ã€‚</p>
<p><strong>å¸¸è§„æ“ä½œ</strong>ï¼šåˆ›å»ºæ•°ç»„ï¼Œè®¿é—®å…ƒç´ ï¼Œå¡«å……Array.range</p>
<ol>
<li>åˆ›å»ºä¸å¯å˜æ•°ç»„</li>
<li>è®¿é—®å…ƒç´ : æ³¨æ„ä¸è¦è¶Šç•Œï¼ˆè¶Šç•Œä¼šï¼‰</li>
<li>è·å–æ•°ç»„çš„é•¿åº¦ï¼šarr.lengthï¼šè·å–æ•°ç»„çš„é•¿åº¦ã€‚</li>
</ol>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> array

<span class="hljs-comment">/**
 * Array å’Œ List çš„åŒºåˆ«
 *
 * array:æœ‰åºï¼Œæ•°ç»„ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šè¿ç»­ï¼Œé€šè¿‡ä¸‹æ ‡å»è®¿é—®å…ƒç´ ä¼šç‰¹åˆ«å¿«ï¼
 * List:æœ‰åºï¼Œé“¾è¡¨ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šä¸è¿ç»­
 *
 * ä¸¤ç§ç±»å‹
 * 1.å¯å˜
 * 2.ä¸å¯å˜ï¼šä¸€ä¸ªæ•°ç»„åˆ›å»ºä¹‹åï¼Œä¸èƒ½æ·»åŠ ï¼Œä¸èƒ½åˆ é™¤ï¼
 *
 * å¸¸ç”¨æ–¹æ³•ï¼šæ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾ï¼Œå¾ªç¯ï¼Œæ’åºï¼Œ.....
 */</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">array01</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// å¯å˜æ•°ç»„</span>
    <span class="hljs-keyword">val</span> arr1 = scala.collection.mutable.<span class="hljs-type">ArrayBuffer</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    <span class="hljs-comment">// å‘æ•°ç»„æœ€åæ·»åŠ å…ƒç´ </span>
    arr1 += <span class="hljs-number">4</span>
    println(arr1)

    <span class="hljs-comment">// ä¸å¯å˜æ•°ç»„</span>
    <span class="hljs-keyword">val</span> arr2 = <span class="hljs-type">Array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    <span class="hljs-comment">// ä¸å¯å˜æ•°ç»„ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œæ‹¼æ¥ç”Ÿæˆæ–°æ•°ç»„</span>
    <span class="hljs-comment">// val arr2 = arr2 :+ 4</span>
    println(arr2)
  }
}
</code></pre>
<h2 data-id="heading-2">ä¸‰.å¯å˜æ•°ç»„</h2>
<p>Arrayè¡¨ç¤ºé•¿åº¦ä¸å¯å˜çš„æ•°ç»„ï¼Œä¸€æ—¦å®šä¹‰ä¹‹åï¼Œä¸èƒ½å†å¢åŠ ï¼Œåˆ é™¤å…ƒç´ ã€‚</p>
<ol>
<li>æ–°å»ºã€‚è¦å…ˆå¯¼å…¥ ArrayBufferã€‚ å¯å˜çš„æ•°æ®ç»“æ„éƒ½éœ€è¦é¢å¤–å¯¼å…¥</li>
<li>è®¿é—®ä¿®æ”¹ã€‚æ•°ç»„å(ä¸‹æ ‡)=æ–°å€¼ã€‚</li>
<li><strong>æ·»åŠ å…ƒç´ </strong></li>
</ol>
<ul>
<li>æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼›+= å…ƒç´ </li>
<li>æ·»åŠ å¤šä¸ªå…ƒç´ ï¼›+=(å…ƒç´ 1, å…ƒç´ 2)</li>
</ul>
<ol start="4">
<li><strong>åˆ é™¤å…ƒç´ </strong></li>
</ol>
<ul>
<li>(1)Â åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼š -= å…ƒç´ </li>
<li>(2)Â åˆ é™¤å¤šä¸ªå…ƒç´ ï¼š -= (å…ƒç´ 1, å…ƒç´ 2ï¼‰</li>
<li>(3)Â åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼š remove(ä¸‹æ ‡)</li>
<li>(4)Â åˆ é™¤æŒ‡å®šä½ç½®çš„å¤šä¸ªå…ƒç´ ï¼šremove(ä¸‹æ ‡èµ·ç‚¹ï¼Œä¸‹æ ‡ç»ˆç‚¹)</li>
</ul>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> array

<span class="hljs-comment">/**
 * Array å’Œ List çš„åŒºåˆ«
 *
 * array:æœ‰åºï¼Œæ•°ç»„ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šè¿ç»­ï¼Œé€šè¿‡ä¸‹æ ‡å»è®¿é—®å…ƒç´ ä¼šç‰¹åˆ«å¿«ï¼
 * List:æœ‰åºï¼Œé“¾è¡¨ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šä¸è¿ç»­
 *
 * ä¸¤ç§ç±»å‹
 * 1.å¯å˜
 * 2.ä¸å¯å˜ï¼šä¸€ä¸ªæ•°ç»„åˆ›å»ºä¹‹åï¼Œä¸èƒ½æ·»åŠ ï¼Œä¸èƒ½åˆ é™¤ï¼
 *
 * å¸¸ç”¨æ–¹æ³•ï¼šæ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾ï¼Œå¾ªç¯ï¼Œæ’åºï¼Œ.....
 */</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">array03</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// åˆ›å»º1åˆ°99çš„æ•°ç»„ï¼ˆå·¦é—­å³å¼€ï¼‰</span>
    <span class="hljs-keyword">val</span> arr = <span class="hljs-type">Array</span>.range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
    arr.foreach(println) <span class="hljs-comment">// æ‰“å°1-99</span>

    <span class="hljs-comment">// åˆ›å»º1åˆ°99ã€æ­¥é•¿ä¸º3çš„æ•°ç»„</span>
    <span class="hljs-keyword">val</span> arr1 = <span class="hljs-type">Array</span>.range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>)
    arr1.foreach(println) <span class="hljs-comment">// æ‰“å°1ã€4ã€7...97</span>

    <span class="hljs-comment">// å®šä¹‰æ•°ç»„</span>
    <span class="hljs-keyword">val</span> arr2 = <span class="hljs-type">Array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    <span class="hljs-comment">// è®¿é—®æ•°ç»„å…ƒç´ </span>
    println(arr2(<span class="hljs-number">0</span>)) <span class="hljs-comment">// è¾“å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼š1</span>
    println(arr2(<span class="hljs-number">2</span>)) <span class="hljs-comment">// è¾“å‡ºç¬¬ä¸‰ä¸ªå…ƒç´ ï¼š3</span>
    <span class="hljs-comment">// println(arr2(20)) // æ³¨é‡Šï¼šä¼šè§¦å‘æ•°ç»„è¶Šç•Œå¼‚å¸¸</span>
  }
}
</code></pre>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> array

<span class="hljs-comment">/**
 * Array å’Œ List çš„åŒºåˆ«
 *
 * array:æœ‰åºï¼Œæ•°ç»„ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šè¿ç»­ï¼Œé€šè¿‡ä¸‹æ ‡å»è®¿é—®å…ƒç´ ä¼šç‰¹åˆ«å¿«ï¼
 * List:æœ‰åºï¼Œé“¾è¡¨ï¼šå…ƒç´ åœ¨ç©ºé—´ä¸Šä¸è¿ç»­
 *
 * ä¸¤ç§ç±»å‹
 * 1.å¯å˜
 * 2.ä¸å¯å˜ï¼šä¸€ä¸ªæ•°ç»„åˆ›å»ºä¹‹åï¼Œä¸èƒ½æ·»åŠ ï¼Œä¸èƒ½åˆ é™¤ï¼
 *
 * å¸¸ç”¨æ–¹æ³•ï¼šæ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾ï¼Œå¾ªç¯ï¼Œæ’åºï¼Œ.....
 */</span>


<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">array03</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// å®šä¹‰å¯å˜æ•°ç»„</span>
    <span class="hljs-keyword">val</span> arr1 = scala.collection.mutable.<span class="hljs-type">ArrayBuffer</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)

    <span class="hljs-comment">// è¿½åŠ å…ƒç´ ï¼ˆå•ä¸ªï¼‰</span>
    arr1 += <span class="hljs-number">4</span>
    <span class="hljs-comment">// è¿½åŠ å…ƒç´ ï¼ˆå¤šä¸ªï¼‰</span>
    arr1 ++= <span class="hljs-type">Array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>)

    <span class="hljs-comment">// åˆ é™¤å…ƒç´ ï¼šåˆ é™¤ä¸‹æ ‡ä¸º1çš„å…ƒç´ </span>
  <span class="hljs-comment">//  arr1.remove(0)</span>
    <span class="hljs-comment">// åˆ é™¤å…ƒç´ ï¼šä»ä¸‹æ ‡0å¼€å§‹ï¼Œåˆ é™¤3ä¸ªå…ƒç´ </span>
    arr1.remove(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment">// ä¿®æ”¹å…ƒç´ ï¼šå°†ä¸‹æ ‡ä¸º0çš„å…ƒç´ æ”¹ä¸º700</span>
    arr1(<span class="hljs-number">2</span>) = <span class="hljs-number">700</span>

    <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ ï¼šåˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šå€¼</span>
    println(arr1.contains(<span class="hljs-number">6</span>))  <span class="hljs-comment">// è¾“å‡ºfalseï¼ˆåŸå…ƒç´ å·²è¢«åˆ é™¤ï¼‰</span>
    println(arr1.contains(<span class="hljs-number">8</span>))<span class="hljs-comment">// è¾“å‡ºtrue</span>
    
    println(arr1.sum)<span class="hljs-comment">//æ±‚å’Œ</span>

    <span class="hljs-comment">// éå†æ•°ç»„</span>
    arr1.foreach(ele =&gt; println(ele))
  }
}
</code></pre>
<h2 data-id="heading-3">å››.æ•°ç»„å¸¸ç”¨æ–¹æ³•</h2>
<p>1.Â æ˜ å°„ï¼ˆMapï¼‰ã€‚arr.map(f)ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°fï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ä¸å¯å˜æ•°ç»„ã€‚</p>
<p>2.Â è¿‡æ»¤ï¼ˆFilterï¼‰ã€‚ä»»åŠ¡æœç´¢</p>
<p>3.Â æœç´¢å’Œæ¯”è¾ƒ</p>
<p>Â Â Â - arr.indexOf(elem)ï¼šè¿”å›å…ƒç´ elemåœ¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªç´¢å¼•ã€‚</p>
<p>Â Â Â - arr.contains(elem)ï¼šæ£€æŸ¥æ•°ç»„æ˜¯å¦åŒ…å«å…ƒç´ elemã€‚</p>
<p>4.Â åˆ‡ç‰‡ï¼ˆSliceï¼‰</p>
<p>Â Â Â Â arr.slice(from, until)ï¼šè¿”å›æ•°ç»„çš„ä¸€ä¸ªå­æ•°ç»„ï¼Œä»ç´¢å¼•fromå¼€å§‹ç›´åˆ°ç´¢å¼•untilï¼ˆä¸åŒ…æ‹¬untilï¼‰ã€‚</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> array


<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">array04</span> </span>{
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
  <span class="hljs-comment">// å®šä¹‰å¯å˜æ•°ç»„</span>
  <span class="hljs-keyword">val</span> arr1 = scala.collection.mutable.<span class="hljs-type">ArrayBuffer</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">20</span>,<span class="hljs-number">3</span>)

  <span class="hljs-comment">// æ’åºï¼šé™åºæ’åºï¼ˆa &gt; bï¼‰</span>
  <span class="hljs-keyword">val</span> arr2 = arr1.sortWith((a, b) =&gt; a &gt; b)

  <span class="hljs-comment">// åˆ‡ç‰‡ï¼šè·å–ä¸‹æ ‡0ï¼ˆåŒ…å«ï¼‰åˆ°3ï¼ˆä¸åŒ…å«ï¼‰çš„å…ƒç´ </span>
  <span class="hljs-keyword">val</span> arr3 = arr1.slice(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)

  <span class="hljs-comment">// è¿‡æ»¤ï¼šä¿ç•™å¤§äº0çš„å…ƒç´ </span>
  <span class="hljs-keyword">val</span> arr4 = arr1.filter(x =&gt; x &gt; <span class="hljs-number">0</span>)

  <span class="hljs-comment">// æœç´¢å…ƒç´ ä¸‹æ ‡ï¼šæŸ¥æ‰¾-2çš„ä½ç½®ï¼ˆä¸å­˜åœ¨åˆ™è¿”å›-1ï¼‰</span>
  <span class="hljs-keyword">val</span> target = <span class="hljs-number">-2</span>
  <span class="hljs-keyword">val</span> result = arr1.indexOf(target)
  println(s&amp;#<span class="hljs-number">34</span>;${target}çš„ä¸‹æ ‡æ˜¯ ${result}&amp;#<span class="hljs-number">34</span>;)

  <span class="hljs-comment">// éå†è¿‡æ»¤åçš„æ•°ç»„</span>
  arr4.foreach(ele =&gt; println(ele))
}
}
</code></pre>
<h2 data-id="heading-4">äº”.å¤šç»´æ•°ç»„</h2>
<p>æœ€å…¸å‹çš„å¤šç»´æ•°ç»„å°±æ˜¯äºŒç»´æ•°ç»„ï¼Œç±»ä¼¼äºè¡¨æ ¼ã€‚æœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼š</p>
<p>ç›´æ¥å®šä¹‰ï¼š Array.ofDim(x,y)</p>
<p>ä»ä¸€ç»´æ•°ç»„è½¬åŒ–å¾—æ¥ï¼š æ•°ç»„. grouped()</p>
<h3 data-id="heading-5">ç»ƒä¹ é¢˜</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d6f12d0cf8844faa490e5a6c872f3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yY6LW36JKZ6JKZ6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021935&amp;x-signature=hdQLDoeBAIPAQHbh2svYKpUCctc%3D" alt="å±å¹•æˆªå›¾ 2025-12-11 092406.png" loading="lazy"/></p>
<pre><code class="hljs language-scss" lang="scss">package caseclass

import scala<span class="hljs-selector-class">.collection</span><span class="hljs-selector-class">.mutable</span><span class="hljs-selector-class">.ListBuffer</span>
import scala<span class="hljs-selector-class">.collection</span><span class="hljs-selector-class">.mutable</span><span class="hljs-selector-class">.ArrayBuffer</span>
import java<span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.LocalDate</span>

<span class="hljs-comment">// 1. ä½¿ç”¨case classå®šä¹‰DreamItemç±»</span>
case class <span class="hljs-built_in">DreamItem</span>(
                      content: String,    // å†…å®¹
                      isCompleted: Boolean, // æ˜¯å¦å®Œæˆ
                      deadline: LocalDate,  // æˆªæ­¢æ—¥æœŸ
                      priority: Int       // ä¼˜å…ˆçº§
                    )

<span class="hljs-selector-tag">object</span> DreamItemDemo {
  def <span class="hljs-selector-tag">main</span>(args: Array[String]): Unit = {
    <span class="hljs-comment">// 2. å®šä¹‰å¯å˜Arrayä¿å­˜DreamItem</span>
    val dreamArr = scala<span class="hljs-selector-class">.collection</span><span class="hljs-selector-class">.mutable</span><span class="hljs-selector-class">.ArrayBuffer</span><span class="hljs-selector-attr">[DreamItem]</span>()

    <span class="hljs-comment">// 3. æ·»åŠ 3ä¸ªæ¢¦æƒ³</span>
    dreamArr += <span class="hljs-built_in">DreamItem</span>(&amp;#<span class="hljs-number">34</span>;å­¦scala&amp;#<span class="hljs-number">34</span>;, false, LocalDate.of(<span class="hljs-number">2025</span>,<span class="hljs-number">12</span>,<span class="hljs-number">31</span>), <span class="hljs-number">2</span>)
    dreamArr += <span class="hljs-built_in">DreamItem</span>(&amp;#<span class="hljs-number">34</span>;ç»ƒå­—&amp;#<span class="hljs-number">34</span>;, false, LocalDate.of(<span class="hljs-number">2026</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>), <span class="hljs-number">3</span>)
    dreamArr += <span class="hljs-built_in">DreamItem</span>(&amp;#<span class="hljs-number">34</span>;å‡è‚¥&amp;#<span class="hljs-number">34</span>;, false, LocalDate.of(<span class="hljs-number">2025</span>,<span class="hljs-number">12</span>,<span class="hljs-number">20</span>), <span class="hljs-number">1</span>)

    <span class="hljs-comment">// 4. å°†ç¬¬2ä¸ªæ¢¦æƒ³è®¾ç½®ä¸ºå·²å®Œæˆ</span>
    <span class="hljs-built_in">dreamArr</span>(<span class="hljs-number">1</span>) = <span class="hljs-built_in">dreamArr</span>(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.copy</span>(isCompleted = true)

    <span class="hljs-comment">// 5. è°ƒé«˜ç¬¬3ä¸ªæ¢¦æƒ³çš„ä¼˜å…ˆçº§</span>
    <span class="hljs-built_in">dreamArr</span>(<span class="hljs-number">2</span>) = <span class="hljs-built_in">dreamArr</span>(<span class="hljs-number">2</span>)<span class="hljs-selector-class">.copy</span>(priority = dreamArr(<span class="hljs-number">2</span>)<span class="hljs-selector-class">.priority</span> + <span class="hljs-number">2</span>)

    <span class="hljs-comment">// 6. æ ¹æ®ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åº</span>
    val sortedDreams = dreamArr<span class="hljs-selector-class">.sortWith</span>((a,b) =&gt; <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.priority</span> &gt; <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.priority</span>)

    <span class="hljs-comment">// 7. ä¿å­˜ä¼˜å…ˆçº§æ’åå‰5çš„æ¢¦æƒ³</span>
    val top5Dreams = sortedDreams<span class="hljs-selector-class">.slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>)

    <span class="hljs-comment">// 8. å¾ªç¯è¾“å‡ºæ¢¦æƒ³åˆ—è¡¨</span>
    top5Dreams<span class="hljs-selector-class">.foreach</span>(dream =&gt; {
      println(s&amp;#<span class="hljs-number">34</span>;å†…å®¹ï¼š${dream.content}ï¼Œå®Œæˆï¼š${dream.isCompleted}ï¼Œæˆªæ­¢æ—¥ï¼š${dream.deadline}ï¼Œä¼˜å…ˆçº§ï¼š${dream.priority}&amp;#<span class="hljs-number">34</span>;)
    })
  }
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ä»£ç å¹³å°çš„æ‰©å±•èƒ½åŠ›ï¼šæ´»å­—æ ¼æœåŠ¡ç«¯ç¼–ç¨‹å®æˆ˜]]></title>    <link>https://juejin.cn/post/7582200865906982946</link>    <guid>https://juejin.cn/post/7582200865906982946</guid>    <pubDate>2025-12-11T02:52:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582200865906982946" data-draft-id="7582200865906950178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ä»£ç å¹³å°çš„æ‰©å±•èƒ½åŠ›ï¼šæ´»å­—æ ¼æœåŠ¡ç«¯ç¼–ç¨‹å®æˆ˜"/> <meta itemprop="keywords" content="ä½ä»£ç "/> <meta itemprop="datePublished" content="2025-12-11T02:52:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868332765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ä»£ç å¹³å°çš„æ‰©å±•èƒ½åŠ›ï¼šæ´»å­—æ ¼æœåŠ¡ç«¯ç¼–ç¨‹å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868332765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:52:13.000Z" title="Thu Dec 11 2025 02:52:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½ä»£ç å¹³å°çš„æ‰©å±•èƒ½åŠ›ï¼šæ´»å­—æ ¼æœåŠ¡ç«¯ç¼–ç¨‹å®æˆ˜</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å½“ä»Šæ•°å­—åŒ–è½¬å‹æµªæ½®ä¸­ï¼Œä½ä»£ç å¹³å°å› å…¶å¿«é€Ÿå¼€å‘å’Œæ˜“ç”¨æ€§è€Œå¤‡å—é’çã€‚ç„¶è€Œï¼Œä¼ä¸šçº§åº”ç”¨å¾€å¾€éœ€è¦å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å’Œç‰¹æ®Šéœ€æ±‚ï¼Œè¿™äº›éœ€æ±‚å¯èƒ½è¶…å‡ºæ ‡å‡†ä½ä»£ç åŠŸèƒ½çš„èŒƒç•´ã€‚æ´»å­—æ ¼ä½ä»£ç å¹³å°é€šè¿‡å…¶å¼ºå¤§çš„æœåŠ¡ç«¯ç¼–ç¨‹èƒ½åŠ›ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸€æŒ‘æˆ˜ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨æ´»å­—æ ¼çš„æ‰©å±•èƒ½åŠ›ï¼Œé€šè¿‡Javaå’ŒC#ç¼–ç¨‹å®ç°å¤æ‚ä¸šåŠ¡éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯Excelæ¨¡æ¿å¡«å……å’Œæ ¼å¼è½¬æ¢ç­‰é«˜çº§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">ä¸€. ä½ä»£ç å¹³å°çš„æ‰©å±•éœ€æ±‚ä¸æŒ‘æˆ˜</h3>
<p>ä½ä»£ç å¹³å°è™½ç„¶èƒ½å¿«é€Ÿæ„å»ºå¤§å¤šæ•°ä¸šåŠ¡åº”ç”¨ï¼Œä½†åœ¨é¢å¯¹ä»¥ä¸‹åœºæ™¯æ—¶å¯èƒ½ä¼šé‡åˆ°é™åˆ¶ï¼š</p>
<ol>
<li><strong>ç‰¹æ®Šæ ¼å¼æ–‡ä»¶å¤„ç†</strong>ï¼šå¦‚å¤æ‚Excelæ¨¡æ¿å¡«å……ã€PDFè½¬æ¢ç­‰</li>
<li><strong>ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¯¹æ¥</strong>ï¼šå¦‚é’‰é’‰/ä¼å¾®å®¢æˆ·ç«¯JSAPIã€Web Serviceåè®®ç­‰</li>
<li><strong>ä¸“ä¸šç®—æ³•å®ç°</strong>ï¼šå¦‚æ–‡ä»¶å“ˆå¸Œå€¼è®¡ç®—ã€åŠ å¯†è§£å¯†ç­‰</li>
</ol>
<p>æ´»å­—æ ¼å¹³å°é€šè¿‡å¼€æ”¾çš„æœåŠ¡ç«¯ç¼–ç¨‹æ¥å£ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨Javaæˆ–C#æ‰©å±•å¹³å°åŠŸèƒ½ï¼Œåœ¨å¹³å°ä¸Šé€šè¿‡å‘é€HTTPè¯·æ±‚çš„æ–¹å¼è°ƒç”¨æ‰©å±•çš„Web APIæ¥å£ï¼Œæ—¢ä¿ç•™äº†ä½ä»£ç çš„å¼€å‘æ•ˆç‡ï¼Œåˆèƒ½æ»¡è¶³ä¼ä¸šçº§åº”ç”¨çš„å¤æ‚éœ€æ±‚ã€‚</p>
<h3 data-id="heading-3">äºŒ. Excelæ¨¡æ¿å¡«å……ä¸è½¬æ¢å®æˆ˜</h3>
<h5 data-id="heading-4">2.1 åœºæ™¯åˆ†æ</h5>
<p>ä»¥åŒ–å­¦åŒ–å·¥è¡Œä¸šå®¢æˆ·çš„å®é™…éœ€æ±‚ä¸ºä¾‹ï¼Œéœ€è¦å¤„ç†åŒ…å«ä»¥ä¸‹å†…å®¹çš„å¤æ‚Excelæ¨¡æ¿ï¼Œä¸”Sheeté¡µé¢ä¸ªæ•°æ˜¯åŠ¨æ€çš„ï¼š</p>
<ul>
<li>ç»“æ„åŒ–æ•°æ®ï¼ˆè®¾å¤‡ä¿¡æ¯ï¼‰</li>
<li>åŠ¨æ€åˆ—è¡¨æ•°æ®ï¼ˆç»´ä¿®è®°å½•ï¼‰</li>
<li>å›¾ç‰‡</li>
<li>
<h3 data-id="heading-5">å¤šSheeté¡µé¢</h3>
</li>
</ul>
<h5 data-id="heading-6">2.2 æŠ€æœ¯å®ç°</h5>
<p>é€šè¿‡Java Web APIå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<p>1.<strong>æ¥æ”¶JSONæ•°æ®å¹¶å¡«å……Excelæ¨¡æ¿</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨Apache POIå¡«å……Excelæ¨¡ç‰ˆä¸­æŒ‡å®šå•å…ƒæ ¼ï¼ˆé¡µç ã€å›¾ç‰‡ã€...ï¼‰</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">processPageNumber</span><span class="hljs-params">(XSSFWorkbook workbook)</span> {
    <span class="hljs-comment">// å¤„ç†é¡µç </span>
    <span class="hljs-type">int</span> <span class="hljs-variable">numberOfSheets</span> <span class="hljs-operator">=</span> workbook.getNumberOfSheets();
    workbook.getSheetAt(<span class="hljs-number">0</span>).getRow(<span class="hljs-number">37</span>).getCell(<span class="hljs-number">45</span>).setCellValue(&amp;#<span class="hljs-number">34</span>;ç¬¬  <span class="hljs-number">1</span>  é¡µ  å…±  &amp;#<span class="hljs-number">34</span>; + numberOfSheets +&amp;#<span class="hljs-number">34</span>;  é¡µ  SHEET  <span class="hljs-number">1</span> OF  &amp;#<span class="hljs-number">34</span>; + numberOfSheets);
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; numberOfSheets; i++){
        workbook.getSheetAt(i).getRow(<span class="hljs-number">6</span>).getCell(<span class="hljs-number">33</span>).setCellValue(&amp;#<span class="hljs-number">34</span>;ç¬¬   &amp;#<span class="hljs-number">34</span>;+ (i+<span class="hljs-number">1</span>) +&amp;#<span class="hljs-number">34</span>;   é¡µ     å…±   &amp;#<span class="hljs-number">34</span>; + numberOfSheets + &amp;#<span class="hljs-number">34</span>;   é¡µ&amp;#<span class="hljs-number">34</span>;);
    }
    <span class="hljs-keyword">return</span> numberOfSheets;
}

<span class="hljs-comment">// ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨EasyExcelå¡«å……Excelæ¨¡ç‰ˆä¸­è¡¨æ ¼éƒ¨åˆ†</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">try</span> (<span class="hljs-type">ExcelWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> EasyExcel.write(outputTempFile).withTemplate(templateTempFile).build()) {
        Logger.info(&amp;#<span class="hljs-number">34</span>;Starting Excel export...&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numberOfSheets; i++) {
            <span class="hljs-type">WriteSheet</span> <span class="hljs-variable">writeSheet</span> <span class="hljs-operator">=</span> EasyExcel.writerSheet(i).build();
            writer.fill(deviceInfoMap, writeSheet);
            
            <span class="hljs-keyword">if</span> (!emlList.isEmpty()) {
                writer.fill(emlList, writeSheet);
            }
        }
    }
} <span class="hljs-keyword">catch</span> (Exception e) {
    Logger.error(&amp;#<span class="hljs-number">34</span>;å¡«å……Excelæ•°æ®æ—¶å‘ç”Ÿé”™è¯¯: &amp;#<span class="hljs-number">34</span>; + e.getMessage());
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(&amp;#<span class="hljs-number">34</span>;å¡«å……Excelæ•°æ®å¤±è´¥&amp;#<span class="hljs-number">34</span>;, e);
}
</code></pre>
<p>2.<strong>Excelè½¬PDFåŠŸèƒ½</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨Aspose.Cellså®ç°Excelè½¬PDF</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> File <span class="hljs-title function_">convertExcelToPdf</span><span class="hljs-params">(String excelFilePath, String pdfOutputPath)</span> <span class="hljs-keyword">throws</span> Exception {
    Logger.info(&amp;#<span class="hljs-number">34</span>;Starting Excel to PDF conversion: &amp;#<span class="hljs-number">34</span>; + excelFilePath + &amp;#<span class="hljs-number">34</span>; -&gt; &amp;#<span class="hljs-number">34</span>; + pdfOutputPath);

    <span class="hljs-type">Workbook</span> <span class="hljs-variable">workbook</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
        workbook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Workbook</span>(excelFilePath);

        <span class="hljs-comment">// è®¾ç½®PDFä¿å­˜é€‰é¡¹</span>
        <span class="hljs-type">PdfSaveOptions</span> <span class="hljs-variable">pdfSaveOptions</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PdfSaveOptions</span>();
        pdfSaveOptions.setOnePagePerSheet(<span class="hljs-literal">true</span>);

        <span class="hljs-type">WorksheetCollection</span> <span class="hljs-variable">worksheets</span> <span class="hljs-operator">=</span> workbook.getWorksheets();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; worksheets.getCount(); i++) {
            <span class="hljs-type">Worksheet</span> <span class="hljs-variable">sheet</span> <span class="hljs-operator">=</span> worksheets.get(i);
            <span class="hljs-type">PageSetup</span> <span class="hljs-variable">pageSetup</span> <span class="hljs-operator">=</span> getPageSetup(sheet);

            <span class="hljs-comment">// æ·»åŠ é¡µè„š</span>
            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {
                pageSetup.setFooter(<span class="hljs-number">0</span>, &amp;#<span class="hljs-number">34</span>;&amp;\&amp;#<span class="hljs-number">34</span>;å®‹ä½“,å¸¸è§„\&amp;#<span class="hljs-number">34</span>;&amp;<span class="hljs-number">9</span>æ³¨ï¼šæœ¬è¡¨ä¸ºè¥¿å®‰è‘¡è„åŸè½¯ä»¶æœ‰é™è´£ä»»å…¬å¸ä¸“æœ‰ï¼Œæœªç»æœ¬å…¬å¸è®¸å¯ï¼Œä¸å¾—å¤åˆ¶ï¼Œä¸å¾—å°†æœ¬è¡¨æˆ–å…¶ä¸­å†…å®¹ä»¥ä»»ä½•å½¢å¼æä¾›ç»™ç¬¬ä¸‰æ–¹ï¼Œä¹Ÿä¸å¾—ä»¥ä»»ä½•å½¢å¼ï¼Œå…¨éƒ¨æˆ–éƒ¨åˆ†ç”¨äºå…¶ä»–ç›®çš„ã€‚&amp;#<span class="hljs-number">34</span>;);
            }
            
            <span class="hljs-comment">// ...</span>
        }
        workbook.save(pdfOutputPath, pdfSaveOptions);
        Logger.info(&amp;#<span class="hljs-number">34</span>;Excel to PDF conversion completed: &amp;#<span class="hljs-number">34</span>; + pdfOutputPath);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(pdfOutputPath);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        Logger.error(&amp;#<span class="hljs-number">34</span>;Error converting Excel to PDF: &amp;#<span class="hljs-number">34</span>; + e.getMessage());
        <span class="hljs-keyword">throw</span> e;
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// ç¡®ä¿èµ„æºæ­£ç¡®å…³é—­</span>
        <span class="hljs-keyword">if</span> (workbook != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                workbook.dispose();
            } <span class="hljs-keyword">catch</span> (Exception ignored) {}
        }
    }
}
</code></pre>
<h5 data-id="heading-7">2.3 æ–¹æ¡ˆä¼˜åŠ¿</h5>
<ol>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯å¤„ç†ä»»æ„å¤æ‚çš„Excelæ¨¡æ¿ç»“æ„ï¼ŒåŠ¨æ€ç”ŸæˆSheeté¡µæ•°æ®å¹¶å¯¼å‡º</li>
<li><strong>æ€§èƒ½</strong>ï¼šæœåŠ¡ç«¯å¤„ç†å¤§æ•°æ®é‡æ€§èƒ½æ›´ä¼˜</li>
<li><strong>æ ¼å¼ä¿çœŸ</strong>ï¼šä¸“ä¸šåº“ç¡®ä¿è¾“å‡ºæ–‡ä»¶æ ¼å¼å®Œç¾</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šå¯è½»æ¾æ·»åŠ æ°´å°ã€åŠ å¯†ç­‰é™„åŠ åŠŸèƒ½
1.</li>
</ol>
<h3 data-id="heading-8">ä¸‰. å…¶ä»–å…¸å‹æœåŠ¡ç«¯æ‰©å±•åœºæ™¯ä¸åº”ç”¨</h3>
<h5 data-id="heading-9">3.1 å¯¹æ¥ç¬¬ä¸‰æ–¹ç³»ç»ŸAPI</h5>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè·å–é’‰é’‰access_token</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetAccessToken</span>()</span>
{
    <span class="hljs-keyword">if</span> (config.token != &amp;<span class="hljs-meta">#34;&amp;#34; &amp;&amp; DateTime.Compare(DateTime.Now, DateTime.FromOADate(double.Parse(config.token_due_time))) &lt;= 0)</span>
    {
        <span class="hljs-keyword">return</span> config.token;
    }
    <span class="hljs-keyword">else</span>
    {
        PostData postData = <span class="hljs-keyword">new</span> PostData();
        <span class="hljs-keyword">var</span> jd = JsonConvert.DeserializeObject(postData.GetPage(&amp;<span class="hljs-meta">#34;https://oapi.dingtalk.com/gettoken?appkey=&amp;#34; + config.appkey + &amp;#34;&amp;appsecret=&amp;#34; + config.appsecret)) as JObject;</span>
        <span class="hljs-built_in">string</span> accessToken = jd[&amp;<span class="hljs-meta">#34;access_token&amp;#34;].ToString();</span>
        updateTokenDueTime(accessToken, <span class="hljs-number">7200</span>);
        <span class="hljs-keyword">return</span> accessToken;
    }
}
</code></pre>
<h5 data-id="heading-10">3.2 å¯¹æ¥Web Serviceåè®®</h5>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè°ƒç”¨Web Service</span>
<span class="hljs-built_in">string</span> soapRequest = $@&amp;<span class="hljs-meta">#34;</span>
    
    
        
            
                
                    xxx
                    ......
                
            
        
    
&amp;<span class="hljs-meta">#34;;</span>

<span class="hljs-built_in">string</span> url = &amp;<span class="hljs-meta">#34;xxx&amp;#34;;</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> httpClient = <span class="hljs-keyword">new</span> HttpClient();
<span class="hljs-comment">// è®¾ç½®HTTPåŸºæœ¬è®¤è¯  </span>
<span class="hljs-keyword">var</span> byteArray = Encoding.ASCII.GetBytes($&amp;<span class="hljs-meta">#34;{_sapUsername}:{_sapPassword}&amp;#34;);</span>
httpClient.DefaultRequestHeaders.Authorization = <span class="hljs-keyword">new</span> System.Net.Http.Headers.AuthenticationHeaderValue(&amp;<span class="hljs-meta">#34;Basic&amp;#34;, Convert.ToBase64String(byteArray));</span>
<span class="hljs-comment">// æ„é€ è¯·æ±‚å†…å®¹  </span>
<span class="hljs-keyword">var</span> content = <span class="hljs-keyword">new</span> StringContent(soapRequest, Encoding.UTF8, &amp;<span class="hljs-meta">#34;text/xml&amp;#34;);</span>
<span class="hljs-comment">// å‘é€POSTè¯·æ±‚å¹¶ç­‰å¾…å“åº”  </span>
HttpResponseMessage response = <span class="hljs-keyword">await</span> httpClient.PostAsync(url, content);
</code></pre>
<h5 data-id="heading-11">3.3 æ–‡ä»¶å“ˆå¸Œå€¼è®¡ç®—</h5>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¡ç®—æ–‡ä»¶SHA256å“ˆå¸Œå€¼</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">calculateFileHash</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-type">MessageDigest</span> <span class="hljs-variable">digest</span> <span class="hljs-operator">=</span> MessageDigest.getInstance(&amp;#<span class="hljs-number">34</span>;SHA-<span class="hljs-number">256</span>&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-type">byte</span>[] fileBytes = Files.readAllBytes(Paths.get(filePath));
    <span class="hljs-type">byte</span>[] hashBytes = digest.digest(fileBytes);
    <span class="hljs-keyword">return</span> bytesToHex(hashBytes);
}
</code></pre>
<h3 data-id="heading-12">å››. è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§</h3>
<ol>
<li>
<p><strong>æ—¥å¿—è®°å½•</strong>ï¼šä½¿ç”¨æ´»å­—æ ¼æä¾›çš„Loggerç±»è¾“å‡ºè°ƒè¯•ä¿¡æ¯</p>
<pre><code class="hljs language-Java" lang="Java">  Logger.info(&amp;#<span class="hljs-number">34</span>;å¼€å§‹å¤„ç†Excelå¯¼å‡ºè¯·æ±‚ï¼Œå‚æ•°å¤§å°ï¼š&amp;#<span class="hljs-number">34</span>; + jsonData.length());
</code></pre>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·å’Œå¤„ç†æœºåˆ¶</p>
<pre><code class="hljs language-Java" lang="Java">  <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
  } <span class="hljs-keyword">catch</span> (Exception e) {
      Logger.error(&amp;#<span class="hljs-number">34</span>;å¯¼å‡ºExcelå¤±è´¥ï¼š&amp;#<span class="hljs-number">34</span>; + e.getMessage());
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(&amp;#<span class="hljs-number">34</span>;å¯¼å‡ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æ ¼å¼&amp;#<span class="hljs-number">34</span>;);
  }
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šè®°å½•å…³é”®æ“ä½œè€—æ—¶</p>
<pre><code class="hljs language-Java" lang="Java">  <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
  <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ</span>
  <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
  Logger.info(&amp;#<span class="hljs-number">34</span>;Excelå¡«å……/è½¬æ¢è€—æ—¶ï¼š&amp;#<span class="hljs-number">34</span>; + duration + &amp;#<span class="hljs-number">34</span>;ms&amp;#<span class="hljs-number">34</span>;);
</code></pre>
</li>
</ol>
<h3 data-id="heading-13">ç»“è®º</h3>
<p>æ´»å­—æ ¼ä½ä»£ç å¹³å°é€šè¿‡å…¶å¼ºå¤§çš„æœåŠ¡ç«¯ç¼–ç¨‹èƒ½åŠ›ï¼ŒæˆåŠŸè§£å†³äº†æ ‡å‡†ä½ä»£ç åŠŸèƒ½æ— æ³•æ»¡è¶³å¤æ‚ä¸šåŠ¡éœ€æ±‚çš„æŒ‘æˆ˜ã€‚æœ¬æ–‡å±•ç¤ºçš„Excelæ¨¡æ¿å¡«å……å’Œè½¬æ¢æ–¹æ¡ˆï¼Œä»¥åŠå…¶ä»–æ‰©å±•åœºæ™¯çš„å®ç°ï¼Œå……åˆ†è¯æ˜äº†æ´»å­—æ ¼åœ¨ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­çš„çµæ´»æ€§å’Œå¼ºå¤§èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-14">æ‰©å±•é“¾æ¥</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.grapecity.com.cn%2Fsolutions%2Fhuozige" target="_blank" title="https://www.grapecity.com.cn/solutions/huozige" ref="nofollow noopener noreferrer">æ•æ·æ„å»ºä¼ä¸šçº§åº”ç”¨åŠAIæ™ºèƒ½ä½“</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç æ€¥è¯Šå®¤ï¼šç”¨Arthasç»™ä½ çš„Javaåº”ç”¨åšâ€œå¾®åˆ›æ‰‹æœ¯â€]]></title>    <link>https://juejin.cn/post/7582133314686009396</link>    <guid>https://juejin.cn/post/7582133314686009396</guid>    <pubDate>2025-12-11T01:45:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582133314686009396" data-draft-id="7582096212662697984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç æ€¥è¯Šå®¤ï¼šç”¨Arthasç»™ä½ çš„Javaåº”ç”¨åšâ€œå¾®åˆ›æ‰‹æœ¯â€"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-11T01:45:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç æ€¥è¯Šå®¤ï¼šç”¨Arthasç»™ä½ çš„Javaåº”ç”¨åšâ€œå¾®åˆ›æ‰‹æœ¯â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:45:17.000Z" title="Thu Dec 11 2025 01:45:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Arthasæ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” Javaç¨‹åºå‘˜çš„â€œç¬¬äºŒåŒçœ¼ç›â€</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ çš„Javaåº”ç”¨æ­£åœ¨çº¿ä¸Šæ¬¢å¿«åœ°å¥”è·‘ï¼Œçªç„¶æœ‰ä¸€å¤©å®ƒå¼€å§‹â€œå’³å—½å‘çƒ§â€ï¼ˆCPUé£™å‡ï¼‰ã€â€œè®°å¿†è¡°é€€â€ï¼ˆå†…å­˜æ³„æ¼ï¼‰ã€â€œååº”è¿Ÿé’â€ï¼ˆæ¥å£è¶…æ—¶ï¼‰ã€‚ä½ æ€¥å¾—åƒçƒ­é”…ä¸Šçš„èš‚èšï¼Œè¿™æ—¶å€™Arthaså°±åƒä¸ªç©¿ç€ç™½å¤§è¤‚è¿˜å¸¦ç€å¬è¯Šå™¨çš„æç¬‘åŒ»ç”Ÿï¼Œæ‹æ‹ä½ çš„è‚©è†€è¯´ï¼šâ€œå…„å¼Ÿï¼Œè®©æˆ‘æ¥çœ‹çœ‹è¿™è´§åˆ°åº•åœ¨æä»€ä¹ˆé¬¼ï¼â€</p>
<p>Arthasæœ¬è´¨ä¸Šæ˜¯ä¸ª<strong>Javaè¯Šæ–­å·¥å…·</strong>ï¼Œå®ƒæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªâ€œç‘å£«å†›åˆ€â€ï¼Œèƒ½è®©ä½ åœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>
<p>æŸ¥çœ‹æ–¹æ³•è°ƒç”¨çš„â€œå¿ƒç”µå›¾â€ï¼ˆè°ƒç”¨é“¾ï¼‰</p>
</li>
<li>
<p>ç»™ä»£ç åšâ€œæ´»ä½“ç©¿åˆºâ€ï¼ˆåŠ¨æ€ä¿®æ”¹è¿è¡Œä¸­çš„ä»£ç ï¼‰</p>
</li>
<li>
<p>ç›‘æ§JVMçš„â€œè¡€å‹è¡€è„‚â€ï¼ˆå†…å­˜ã€çº¿ç¨‹ã€GCæƒ…å†µï¼‰</p>
</li>
<li>
<p>ç”šè‡³èƒ½â€œå·å¬â€æ–¹æ³•è°ƒç”¨çš„â€œæ‚„æ‚„è¯â€ï¼ˆå‚æ•°å’Œè¿”å›å€¼ï¼‰</p>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€å®‰è£…ä¸å¯åŠ¨ï¼šç®€å•å¾—åƒä¸ªâ€œå‚»ç“œç›¸æœºâ€</h2>
<h3 data-id="heading-2">1. å®‰è£…ï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼å³å¯ï¼‰</h3>
<p><strong>æ–¹å¼Aï¼šåœ¨çº¿å®‰è£…ï¼ˆæ¨èæ‡’äººç‰ˆï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿™è¡Œå‘½ä»¤æ¯”æ³¡æ–¹ä¾¿é¢è¿˜ç®€å•</span>
curl -O https://arthas.aliyun.com/arthas-boot.jar
</code></pre>
<p><strong>æ–¹å¼Bï¼šDockerç‰ˆï¼ˆè£…Xå¿…å¤‡ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker run --<span class="hljs-built_in">rm</span> -ti \
  --pid=host \
  arthas/arthas:latest
</code></pre>
<p><strong>æ–¹å¼Cï¼šä¼ ç»Ÿæ´¾ï¼ˆæ‰‹åŠ¨ä¸‹è½½ï¼‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å‡è£…è¿™æ˜¯ä¸€æ®µJavaä»£ç ï¼Œå…¶å®åªæ˜¯å‡‘æ•°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HowToDownload</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        System.<span class="hljs-keyword">out</span>.println(&amp;<span class="hljs-meta">#34;1. è®¿é—® https://github.com/alibaba/arthas&amp;#34;);</span>
        System.<span class="hljs-keyword">out</span>.println(&amp;<span class="hljs-meta">#34;2. ç‚¹å‡»é‚£ä¸ªç»¿è‰²çš„'Download'æŒ‰é’®&amp;#34;);</span>
        System.<span class="hljs-keyword">out</span>.println(&amp;<span class="hljs-meta">#34;3. ç­‰å¾…æ—¶å¯ä»¥å»å†²æ¯å’–å•¡&amp;#34;);</span>
    }
}
</code></pre>
<h3 data-id="heading-3">2. å¯åŠ¨ï¼šåƒæ‰“ç”µè¯ä¸€æ ·ç®€å•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨åä¼šåˆ—å‡ºæ‰€æœ‰Javaè¿›ç¨‹ï¼Œåƒé€‰å¦ƒä¸€æ ·é€‰ä¸€ä¸ª</span>
java -jar arthas-boot.jar

<span class="hljs-comment"># å¦‚æœä½ å·²ç»çŸ¥é“â€œå¦ƒå­â€çš„IDï¼Œå¯ä»¥ç›´æ¥ç‚¹å</span>
java -jar arthas-boot.jar 12345
</code></pre>
<p>å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªå‰ç¥¥ç‰©ï¼š</p>
<pre><code class="hljs language-go" lang="go">  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.
 /  O  \ |  .--. <span class="hljs-string">''</span>--.  .--<span class="hljs-string">'|  '</span>--<span class="hljs-string">'  | /  O  \ '</span>   .-<span class="hljs-string">'
|  .-.  ||  '</span>--<span class="hljs-string">'.'</span>   |  |   |  .--.  ||  .-.  |<span class="hljs-string">`.  `</span>-.
|  | |  ||  |\  \    |  |   |  |  |  ||  | |  |.-<span class="hljs-string">'    |
`--'</span> <span class="hljs-string">`--'`</span>--<span class="hljs-string">' '</span>--<span class="hljs-string">'   `--'</span>   <span class="hljs-string">`--'  `</span>--<span class="hljs-string">'`--'</span> <span class="hljs-string">`--'`</span>-----<span class="hljs-string">'
 
# æ­å–œï¼ä½ ç°åœ¨æ‹¥æœ‰äº†Javaåº”ç”¨çš„â€œä¸Šå¸è§†è§’â€
</span></code></pre>
<h2 data-id="heading-4">ä¸‰ã€å¸¸ç”¨å‘½ä»¤å®æˆ˜ï¼šä»â€œæŠŠè„‰â€åˆ°â€œåŠ¨æ‰‹æœ¯â€</h2>
<h3 data-id="heading-5">1. <strong>dashboardï¼šåº”ç”¨çš„â€œå…¨èº«æ£€æŸ¥æŠ¥å‘Šâ€</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># è¾“å…¥è¿™ä¸ªå‘½ä»¤ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ¯”ä½“æ£€æŠ¥å‘Šè¿˜è¯¦ç»†çš„é¢æ¿</span>
dashboard

<span class="hljs-meta"># è¾“å‡ºç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</span>
â”Œâ”€çº¿ç¨‹é¢æ¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çº¿ç¨‹<span class="hljs-number">1</span>: <span class="hljs-number">95</span>% CPU   <span class="hljs-comment">// è¿™å®¶ä¼™åœ¨ç–¯ç‹‚æŒ–çŸ¿ï¼Ÿï¼</span>
â”‚ çº¿ç¨‹<span class="hljs-number">2</span>: WAITING   <span class="hljs-comment">// åœ¨ç­‰å¥³æœ‹å‹å›æ¶ˆæ¯...</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€å†…å­˜é¢æ¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å †å†…å­˜: <span class="hljs-number">80</span>%      <span class="hljs-comment">// å¿«åƒé¥±äº†</span>
â”‚ éå †: <span class="hljs-number">30</span>%        <span class="hljs-comment">// è¿˜è¡Œè¿˜è¡Œ</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-6">2. <strong>watchï¼šæ–¹æ³•çš„â€œçªƒå¬å™¨â€</strong></h3>
<pre><code class="hljs language-ini" lang="ini">// å‡è®¾ä½ æƒ³ç›‘æ§è¿™ä¸ªæ–¹æ³•ï¼ˆåŒ»ç”Ÿæƒ³å¬ç—…äººçš„å¿ƒè·³ï¼‰
public String getUserInfo(String userId) {
    // ä¸šåŠ¡é€»è¾‘...
    return &amp;<span class="hljs-comment">#34;User_&amp;#34; + userId;</span>
}



<span class="hljs-comment"># ç›‘å¬æ–¹æ³•è°ƒç”¨ï¼Œåƒåœ¨é—¨ä¸Šè£…äº†ä¸ªç›‘å¬å™¨</span>
watch com.example.service.UserService getUserInfo '{params,returnObj}' -x 3

<span class="hljs-comment"># è¾“å‡ºæ•ˆæœï¼š</span>
<span class="hljs-attr">method</span>=getUserInfo location=AtEnter
params<span class="hljs-section">[0]</span>=@String<span class="hljs-section">[1001]</span>    <span class="hljs-comment"># å“¦ï¼Œç”¨æˆ·1001æ¥äº†</span>
---
<span class="hljs-attr">method</span>=getUserInfo location=AtExit
<span class="hljs-attr">returnObj</span>=@String[User_1001] <span class="hljs-comment"># è¿”å›äº†ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-attr">cost</span>=<span class="hljs-number">45</span>ms                   <span class="hljs-comment"># èŠ±äº†45æ¯«ç§’ï¼Œè¿˜è¡Œ</span>
</code></pre>
<h3 data-id="heading-7">3. <strong>traceï¼šè°ƒç”¨é“¾çš„â€œä¾¦æ¢åœ°å›¾â€</strong></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿½è¸ªæ–¹æ³•è°ƒç”¨ï¼Œåƒç¦å°”æ‘©æ–¯ç ´æ¡ˆ</span>
trace com.example.controller.OrderController createOrder

<span class="hljs-comment"># è¾“å‡ºåƒçŠ¯ç½ªç°åœºè¿˜åŸï¼š</span>
`<span class="hljs-attr">---ts</span>=<span class="hljs-number">2023</span>-<span class="hljs-number">10</span>-<span class="hljs-number">01</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><span class="hljs-comment">;thread_name=http-nio-8080-exec-1</span>
    `---<span class="hljs-section">[15ms]</span> com.example.controller.OrderController:createOrder()
        +---<span class="hljs-section">[3ms]</span> com.example.service.OrderService:validate()  <span class="hljs-comment"># éªŒè¯èŠ±äº†3ms</span>
        +---<span class="hljs-section">[10ms]</span> com.example.dao.OrderDao:save()            <span class="hljs-comment"># ä¿å­˜èŠ±äº†10ms</span>
        `---<span class="hljs-section">[2ms]</span> com.example.service.EmailService:send()     <span class="hljs-comment"># å‘é‚®ä»¶2ms</span>
<span class="hljs-comment"># ç»“è®ºï¼šæ•°æ®åº“ä¿å­˜æ˜¯ç“¶é¢ˆï¼Œè¯¥ä¼˜åŒ–äº†ï¼</span>
</code></pre>
<h3 data-id="heading-8">4. <strong>jadï¼šæºä»£ç çš„â€œæ—¶å…‰æœºâ€</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åç¼–è¯‘çº¿ä¸Šæ­£åœ¨è¿è¡Œçš„ä»£ç ï¼Œçœ‹çœ‹å®ƒåˆ°åº•é•¿å•¥æ ·</span>
jad com.example.service.BuggyService

<span class="hljs-meta"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BuggyService</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">problematicMethod</span>()</span> {
        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) {  <span class="hljs-comment">// å§æ§½ï¼è¿™é‡Œæœ‰ä¸ªæ­»å¾ªç¯ï¼</span>
            <span class="hljs-comment">// åŸæ¥bugè—åœ¨è¿™é‡Œï¼</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-9">5. <strong>ognlï¼šè¿è¡Œæ—¶â€œè®°å¿†è¯»å–å™¨â€</strong></h3>
<pre><code class="hljs language-scss" lang="scss"># ç›´æ¥è¯»å–Springå®¹å™¨çš„Beanï¼Œåƒè¯»å–åˆ«äººçš„è®°å¿†
ognl '<span class="hljs-selector-id">#context</span>=<span class="hljs-keyword">@com</span>.taobao.arthas.core.ArthasSpringContext<span class="hljs-keyword">@context</span>,
      #context.getBean(&amp;#<span class="hljs-number">34</span>;userService&amp;<span class="hljs-selector-id">#34</span>;)<span class="hljs-selector-class">.getAllUsers</span>()'

# ç”šè‡³å¯ä»¥ä¿®æ”¹å€¼ï¼ˆå°å¿ƒä½¿ç”¨ï¼ï¼‰
ognl '<span class="hljs-selector-id">#user</span>=new <span class="hljs-built_in">User</span>(), <span class="hljs-selector-id">#user</span><span class="hljs-selector-class">.setName</span>(&amp;#<span class="hljs-number">34</span>;Arthas&amp;#<span class="hljs-number">34</span>;), <span class="hljs-selector-id">#user</span>'
</code></pre>
<h3 data-id="heading-10">6. <strong>redefineï¼šçƒ­æ›´æ–°â€œé­”æ³•â€</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç´§æ€¥ä¿®å¤bugï¼Œä¸ç”¨é‡å¯ï¼åƒç»™é£è¡Œä¸­çš„é£æœºæ¢å¼•æ“</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Hotfix</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">buggyMethod</span>()</span> {
        <span class="hljs-comment">// return 1/0;  // åŸæ¥çš„bug</span>
        <span class="hljs-keyword">return</span> &amp;<span class="hljs-meta">#34;fixed!&amp;#34;; // ä¿®å¤åçš„ä»£ç </span>
    }
}



<span class="hljs-meta"># 1. å…ˆç¼–è¯‘ä¿®æ”¹åçš„.javaæ–‡ä»¶</span>
<span class="hljs-meta"># 2. åŠ è½½æ–°class</span>
redefine /path/to/Hotfix.<span class="hljs-keyword">class</span>
<span class="hljs-meta"># 3. æ­å–œï¼bugå·²ä¿®å¤ï¼ŒæœåŠ¡è¿˜åœ¨è¿è¡Œ</span>
</code></pre>
<h2 data-id="heading-11">å››ã€é«˜çº§æŠ€å·§ï¼šæˆä¸ºâ€œè¯Šæ–­å¤§å¸ˆâ€</h2>
<h3 data-id="heading-12">åœºæ™¯1ï¼šCPUé£™é«˜æ€ä¹ˆåŠï¼Ÿ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‰æ­¥å®šä½æ³•</span>
1. thread -n 3            <span class="hljs-comment"># æ‰¾å‡ºæœ€å¿™çš„3ä¸ªçº¿ç¨‹</span>
2. thread çº¿ç¨‹ID          <span class="hljs-comment"># æŸ¥çœ‹è¯¥çº¿ç¨‹å †æ ˆ</span>
3. jad ç±»å               <span class="hljs-comment"># åç¼–è¯‘ç›¸å…³ä»£ç </span>
<span class="hljs-comment"># é€šå¸¸ä½ ä¼šå‘ç°ï¼šæœ‰äººåœ¨å¾ªç¯é‡Œå†™æ—¥å¿—ã€æ­»å¾ªç¯ã€æˆ–è€…çœŸçš„åœ¨æŒ–çŸ¿</span>
</code></pre>
<h3 data-id="heading-13">åœºæ™¯2ï¼šå†…å­˜æ³„æ¼æ€ä¹ˆæŸ¥ï¼Ÿ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å†…å­˜ä¾¦æ¢å››éƒ¨æ›²</span>
1. dashboard             <span class="hljs-comment"># å…ˆçœ‹æ•´ä½“å†…å­˜æƒ…å†µ</span>
2. heapdump /tmp/dump.hprof  <span class="hljs-comment"># å¯¼å‡ºå †å†…å­˜ï¼ˆåƒæ‹Xå…‰ç‰‡ï¼‰</span>
3. jvm                   <span class="hljs-comment"># æŸ¥çœ‹GCæƒ…å†µ</span>
4. ognl <span class="hljs-string">'@com.example.LeakyClass@map'</span>  <span class="hljs-comment"># æ£€æŸ¥å¯ç–‘é™æ€å˜é‡</span>
</code></pre>
<h3 data-id="heading-14">åœºæ™¯3ï¼šæ…¢æ¥å£åˆ†æ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ…¢æŸ¥è¯¢è¿½è¸ªå¥—é¤</span>
trace *SpringController* *           <span class="hljs-comment"># è¿½è¸ªæ‰€æœ‰Controller</span>
watch *Service* * <span class="hljs-string">'{params, #cost}'</span>  <span class="hljs-comment"># ç›‘æ§æœåŠ¡å±‚è€—æ—¶</span>
<span class="hljs-comment"># é€šå¸¸ç½ªé­ç¥¸é¦–ï¼šN+1æŸ¥è¯¢ã€å¤§æ–‡ä»¶å¤„ç†ã€ç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶</span>
</code></pre>
<h2 data-id="heading-15">äº”ã€æ³¨æ„äº‹é¡¹ä¸â€œç¿»è½¦â€é¢„é˜²</h2>
<h3 data-id="heading-16">1. <strong>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®ˆåˆ™</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åƒè¿™æ ·çš„ä»£ç è¦å°å¿ƒï¼š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dangerous</span> {
    <span class="hljs-comment">// åˆ«åœ¨ç”Ÿäº§ç¯å¢ƒç–¯ç‹‚traceï¼Œæ€§èƒ½ä¼šå“­çš„</span>
    <span class="hljs-comment">// åˆ«ç”¨é˜»å¡å‘½ä»¤ï¼ˆæ¯”å¦‚scï¼‰ï¼Œé™¤éä½ æƒ³è®©çº¿ç¨‹æ’é˜Ÿ</span>
    <span class="hljs-comment">// çƒ­æ›´æ–°æœ‰é£é™©ï¼Œå¯èƒ½å¼•å‘â€œè–›å®šè°”çš„bugâ€</span>
}
</code></pre>
<h3 data-id="heading-17">2. <strong>å¸¸ç”¨å®‰å…¨æªæ–½</strong></h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># 1. ä½¿ç”¨æŒ‡å®šIPç»‘å®šï¼ˆåˆ«è®©è°éƒ½è¿ï¼‰</span>
<span class="hljs-string">java</span> <span class="hljs-string">-jar</span> <span class="hljs-string">arthas-boot.jar</span> <span class="hljs-string">--telnet-port</span> <span class="hljs-number">3658</span> <span class="hljs-string">--http-port</span> <span class="hljs-number">8563</span> <span class="hljs-string">--target-ip</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>

<span class="hljs-comment"># 2. è®¾ç½®ä¼šè¯è¶…æ—¶</span>
<span class="hljs-string">session-timeout</span> <span class="hljs-number">1800</span>  <span class="hljs-comment"># 30åˆ†é’Ÿè‡ªåŠ¨æ–­å¼€</span>

<span class="hljs-comment"># 3. é‡è¦å‘½ä»¤å…ˆæµ‹è¯•</span>
<span class="hljs-comment"># å…ˆåœ¨æµ‹è¯•ç¯å¢ƒç©ç†Ÿäº†å†å»ç”Ÿäº§ç¯å¢ƒâ€œç§€æ“ä½œâ€</span>
</code></pre>
<h2 data-id="heading-18">å…­ã€æ€»ç»“ï¼šä¸ºä»€ä¹ˆä½ éœ€è¦Arthasè¿™ä¸ªâ€œä¼™ä¼´â€ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼šå‡Œæ™¨3ç‚¹ï¼ŒæŠ¥è­¦çŸ­ä¿¡æŠŠä½ ä»ç¾æ¢¦ä¸­åµé†’ã€‚ä»¥å‰ä½ éœ€è¦ï¼š</p>
<ol>
<li>æŒ£æ‰ç€èµ·åºŠ</li>
<li>è¿VPN</li>
<li>æŸ¥æ—¥å¿—</li>
<li>çŒœé—®é¢˜</li>
<li>é‡å¯æœåŠ¡</li>
<li>ç¥ˆç¥·æœ‰ç”¨</li>
</ol>
<p>æœ‰äº†Arthasä¹‹åï¼š</p>
<ol>
<li>åºŠä¸Šæ‰“å¼€ç¬”è®°æœ¬</li>
<li>è¿ä¸ŠArthas</li>
<li><code>dashboard</code>ä¸€çœ¼çœ‹å‡ºé—®é¢˜</li>
<li><code>watch/trace</code>å®šä½å…·ä½“æ–¹æ³•</li>
<li><code>redefine</code>çƒ­ä¿®å¤ï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
<li>ç»§ç»­ç¡è§‰</li>
</ol>
<h3 data-id="heading-19"><strong>Arthasçš„æ ¸å¿ƒä»·å€¼ï¼š</strong></h3>
<ol>
<li><strong>å®æ—¶æ€§</strong>ï¼šåƒç»™åº”ç”¨è£…äº†â€œå®æ—¶ç›‘æ§æ‘„åƒå¤´â€ï¼Œé—®é¢˜å‘ç”Ÿæ—¶ç«‹å³æ•æ‰ç°åœº</li>
<li><strong>æ— ä¾µå…¥</strong>ï¼šä¸éœ€è¦æ”¹ä»£ç ã€åŠ æ—¥å¿—ã€é‡å¯æœåŠ¡ï¼ŒçœŸæ­£çš„â€œé›¶æ‰“æ‰°è¯Šæ–­â€</li>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šä»æ–¹æ³•çº§ç›‘æ§åˆ°JVMçŠ¶æ€ï¼Œä»å †æ ˆåˆ†æåˆ°çƒ­æ›´æ–°ï¼Œä¸€æŠŠæ¢­</li>
<li><strong>å­¦ä¹ å‹å¥½</strong>ï¼šå‘½ä»¤ç®€å•ç›´è§‚ï¼Œè¿Javaæ–°æ‰‹éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹</li>
</ol>
<h3 data-id="heading-20"><strong>æœ€åçš„å°å»ºè®®ï¼š</strong></h3>
<p>æŠŠArthaså½“æˆä½ çš„<strong>Javaåº”ç”¨å¬è¯Šå™¨</strong>ï¼Œä½†è®°ä½ï¼š</p>
<ul>
<li>å°ç—…å°ç—›ç”¨<code>watch/trace</code>ï¼ˆæ—¥å¸¸ç›‘æ§ï¼‰</li>
<li>ç–‘éš¾æ‚ç—‡ç”¨<code>jad/ognl</code>ï¼ˆæ·±å…¥æ¢æŸ¥ï¼‰</li>
<li>ç´§æ€¥æŠ¢æ•‘ç”¨<code>redefine</code>ï¼ˆçƒ­ä¿®å¤ï¼‰</li>
<li>å®šæœŸä½“æ£€ç”¨<code>dashboard</code>ï¼ˆå¥åº·æ£€æŸ¥ï¼‰</li>
</ul>
<p>å°±åƒè€ä¸­åŒ»éœ€è¦æœ›é—»é—®åˆ‡ï¼ŒArthaså°±æ˜¯ä½ çš„æ•°å­—å¬è¯Šå™¨ã€Xå…‰æœºã€å¿ƒç”µå›¾ä»ªä¸‰åˆä¸€ã€‚ä¸è¿‡åˆ«å¿˜äº†â€”â€”<strong>å·¥å…·å†å¼ºå¤§ï¼Œä¹Ÿæ›¿ä»£ä¸äº†ä½ å¯¹ä»£ç çš„æ·±å…¥ç†è§£</strong>ã€‚Arthasèƒ½å¸®ä½ å¿«é€Ÿæ‰¾åˆ°é—®é¢˜ï¼Œä½†è§£å†³é—®é¢˜çš„æ ¹æœ¬ï¼Œè¿˜æ˜¯å†™å‡ºå¥å£®çš„ä»£ç å’Œè‰¯å¥½çš„æ¶æ„ã€‚</p>
<hr/>
<p>Arthasè™½å¥½ï¼Œå¯ä¸è¦è´ªæ¯å“¦ï¼ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ—¶ï¼Œè®°å¾—å…ˆåœ¨å°æµé‡æˆ–æµ‹è¯•ç¯å¢ƒéªŒè¯å‘½ä»¤æ•ˆæœï¼Œé¿å…â€œè¯Šæ–­å·¥å…·å˜æ•…éšœåˆ¶é€ å™¨â€çš„å°´å°¬å±€é¢ã€‚ç¥ä½ å’Œä½ çš„Javaåº”ç”¨éƒ½å¥åº·è¿è¡Œï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22256f6cb05c46bab50516b75492cbec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766022316&amp;x-signature=%2B9SnkBA75ILlmD2FWPW7eq3qDIs%3D" alt="ä»£ç æ€¥è¯Šå®¤ï¼šç”¨Arthasç»™ä½ çš„Javaåº”ç”¨åšâ€œå¾®åˆ›æ‰‹æœ¯â€.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‹è½½è§†é¢‘]]></title>    <link>https://juejin.cn/post/7582118218648616986</link>    <guid>https://juejin.cn/post/7582118218648616986</guid>    <pubDate>2025-12-11T02:53:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582118218648616986" data-draft-id="7582136489770041354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‹è½½è§†é¢‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T02:53:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å‡20æ–¤ä¸æ”¹å¤´åƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3685218708368519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‹è½½è§†é¢‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3685218708368519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å‡20æ–¤ä¸æ”¹å¤´åƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:53:41.000Z" title="Thu Dec 11 2025 02:53:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‘½ä»¤è¡Œä¸­ä¸‹è½½è§†é¢‘ï¼Œæœ€å¸¸ç”¨ä¸”å¼ºå¤§çš„å·¥å…·æ˜¯Â <strong>youtube-dl</strong>ï¼ˆç°å·²æ›´åä¸ºÂ <code>yt-dlp</code>ï¼ŒåŠŸèƒ½æ›´å®Œå–„ï¼‰ï¼Œå®ƒæ”¯æŒç»å¤§å¤šæ•°è§†é¢‘ç½‘ç«™ï¼Œæ¯”å¦‚ YouTubeã€B ç«™ã€æŠ–éŸ³ç­‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€å®‰è£… yt-dlp</h3>
<p><code>yt-dlp</code>Â æ˜¯è·¨å¹³å°å·¥å…·ï¼Œæ”¯æŒ Windowsã€macOSã€Linuxã€‚</p>
<ol>
<li>
<p><strong>Windows ç³»ç»Ÿ</strong></p>
<ul>
<li>ç›´æ¥ä»Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyt-dlp%2Fyt-dlp%2Freleases" target="_blank" title="https://github.com/yt-dlp/yt-dlp/releases" ref="nofollow noopener noreferrer">yt-dlp å®˜æ–¹ GitHub ä»“åº“</a>Â ä¸‹è½½Â <code>yt-dlp.exe</code></li>
<li>å°†å…¶æ”¾åˆ°å®¹æ˜“æ‰¾åˆ°çš„ç›®å½•ï¼ˆæ¯”å¦‚Â <code>C:\tools</code>ï¼‰ï¼Œå¹¶æŠŠè¯¥ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡Â <code>Path</code>Â ä¸­ï¼Œè¿™æ ·å°±èƒ½åœ¨å‘½ä»¤è¡Œä»»æ„ç›®å½•è°ƒç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>macOS ç³»ç»Ÿ</strong>ä½¿ç”¨ Homebrew å®‰è£…ï¼š</p>
<pre><code class="hljs">brew install yt-dlp
</code></pre>
</li>
<li>
<p><strong>Linux ç³»ç»Ÿ</strong>Ubuntu/Debian ç³»åˆ—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">sudo apt <span class="hljs-keyword">update</span> <span class="hljs-operator">&amp;&amp;</span> sudo apt install yt<span class="hljs-operator">-</span>dlp
</code></pre>
<p>å…¶ä»–å‘è¡Œç‰ˆå¯ä» GitHub ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">äºŒã€åŸºæœ¬ä¸‹è½½å‘½ä»¤</h3>
<ol>
<li>
<p><strong>ä¸‹è½½å•ä¸ªè§†é¢‘</strong>å¤åˆ¶è§†é¢‘çš„ç½‘é¡µé“¾æ¥ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">yt-dlp <span class="hljs-selector-attr">[è§†é¢‘é“¾æ¥]</span>
</code></pre>
<p>ç¤ºä¾‹ï¼ˆä¸‹è½½ B ç«™è§†é¢‘ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">yt-dlp https:<span class="hljs-comment">//www.bilibili.com/video/BV1xx411c7mZ</span>
</code></pre>
<p>è§†é¢‘ä¼šé»˜è®¤ä¸‹è½½åˆ°å½“å‰å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•ã€‚</p>
</li>
<li>
<p><strong>æŒ‡å®šè§†é¢‘æ ¼å¼å’Œæ¸…æ™°åº¦</strong></p>
<ul>
<li>
<p>å…ˆæŸ¥çœ‹è§†é¢‘æ”¯æŒçš„æ‰€æœ‰æ ¼å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css">yt-dlp -F <span class="hljs-selector-attr">[è§†é¢‘é“¾æ¥]</span>
</code></pre>
<p>è¾“å‡ºä¼šåˆ—å‡ºæ ¼å¼ä»£ç ã€åˆ†è¾¨ç‡ã€ç¼–ç ç­‰ä¿¡æ¯ï¼Œæ¯”å¦‚Â <code>248</code>Â å¯¹åº” 480p è§†é¢‘ï¼Œ<code>140</code>Â å¯¹åº”éŸ³é¢‘ã€‚</p>
</li>
<li>
<p>ä¸‹è½½æŒ‡å®šæ ¼å¼çš„è§†é¢‘ + éŸ³é¢‘ï¼ˆä¼šè‡ªåŠ¨åˆå¹¶ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">yt-dlp -f <span class="hljs-selector-attr">[è§†é¢‘æ ¼å¼ä»£ç ]</span>+<span class="hljs-selector-attr">[éŸ³é¢‘æ ¼å¼ä»£ç ]</span> <span class="hljs-selector-attr">[è§†é¢‘é“¾æ¥]</span>
</code></pre>
<p>ç¤ºä¾‹ï¼ˆä¸‹è½½ 1080p è§†é¢‘ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">yt-dlp -f 137+140 https://www.youtube.com/watch?<span class="hljs-attr">v</span>=xxxxxx
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>ä¸‹è½½æ•´ä¸ªæ’­æ”¾åˆ—è¡¨</strong>å¤åˆ¶æ’­æ”¾åˆ—è¡¨é“¾æ¥ï¼Œæ·»åŠ Â <code>-i</code>Â å‚æ•°ï¼ˆå¿½ç•¥é”™è¯¯ï¼Œé˜²æ­¢ä¸ªåˆ«è§†é¢‘ä¸‹è½½å¤±è´¥ä¸­æ–­ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">yt-dlp -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-attr">[æ’­æ”¾åˆ—è¡¨é“¾æ¥]</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-2">ä¸‰ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>ç‰ˆæƒé—®é¢˜</strong>ï¼šä»…å¯ä¸‹è½½è‡ªå·±æ‹¥æœ‰ç‰ˆæƒæˆ–å…è®¸ä¸‹è½½çš„è§†é¢‘ï¼Œåˆ‡å‹¿ç”¨äºä¾µæƒè¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>éƒ¨åˆ†ç½‘ç«™é™åˆ¶</strong>ï¼šä¸€äº›ç½‘ç«™æœ‰åçˆ¬æœºåˆ¶ï¼Œå¯èƒ½éœ€è¦æ›´æ–°Â <code>yt-dlp</code>Â åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs">yt-dlp -U
</code></pre>
</li>
<li>
<p><strong>éœ€è¦ FFmpeg</strong>ï¼šå¦‚æœè¦åˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘ã€è½¬æ¢æ ¼å¼ï¼Œéœ€è¦å®‰è£…Â <strong>FFmpeg</strong>ï¼Œ<code>yt-dlp</code>Â ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒã€‚</p>
</li>
</ol>
<hr/>
<p>æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ æ•´ç†ä¸€ä»½<strong>yt-dlp å¸¸ç”¨å‚æ•°é€ŸæŸ¥è¡¨</strong>ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŸ¥è¯¢æ¸…æ™°åº¦é€‰æ‹©ã€æ‰¹é‡ä¸‹è½½ç­‰åŠŸèƒ½ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€æˆ‘è®© TRAE SOLO å¸®æˆ‘å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿï¼Œå…¨æ ˆ Java + Vueï¼Œç§’å˜â€œæ•™åŠ¡ä¸»ä»»â€ï¼]]></title>    <link>https://juejin.cn/post/7582066556089335871</link>    <guid>https://juejin.cn/post/7582066556089335871</guid>    <pubDate>2025-12-11T02:09:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582066556089335871" data-draft-id="7582066556089253951" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€æˆ‘è®© TRAE SOLO å¸®æˆ‘å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿï¼Œå…¨æ ˆ Java + Vueï¼Œç§’å˜â€œæ•™åŠ¡ä¸»ä»»â€ï¼"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-11T02:09:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€æˆ‘è®© TRAE SOLO å¸®æˆ‘å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿï¼Œå…¨æ ˆ Java + Vueï¼Œç§’å˜â€œæ•™åŠ¡ä¸»ä»»â€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:09:11.000Z" title="Thu Dec 11 2025 02:09:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€æˆ‘è®© TRAE SOLO å¸®æˆ‘å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿï¼Œå…¨æ ˆ Java + Vueï¼Œç§’å˜â€œæ•™åŠ¡ä¸»ä»»â€ï¼</h2>
<hr/>
<blockquote>
<p>ä½œè€…ï½œå¤©å¤©æ‘¸é±¼çš„ Java å·¥ç¨‹å¸ˆ<br/>
æ ‡ç­¾ï½œTRAE SOLOã€Spring Bootã€Vueã€å…¨æ ˆå¼€å‘ã€æ•™åŠ¡ç³»ç»Ÿã€AI ç¼–ç¨‹åŠ©æ‰‹<br/>
é¡¹ç›®åœ°å€ï½œæœ¬åœ°è®¿é—® <code>http://localhost:3000</code> ç™»å½•ä½“éªŒ</p>
</blockquote>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73a9485dbe15404e807fd3de5cde0495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023750&amp;x-signature=NGpe9UMLgLM3uKOauH3vEbLUgYo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">ğŸ§  èµ·å› ï¼šä¸€ä¸ªçªå‘å¥‡æƒ³ï¼Œèƒ½ä¸èƒ½è®© AI å¸®æˆ‘å†™ä¸ªâ€œæ¸…åæ•™åŠ¡ç³»ç»Ÿâ€ï¼Ÿ</h3>
<p>è¿˜è®°å¾—å¤§å­¦æ—¶å€™ï¼Œæ¯å¹´é€‰è¯¾ã€æŸ¥æˆç»©ã€å¯¼å‡ºæˆç»©å•éƒ½ç¦»ä¸å¼€æ•™åŠ¡ç³»ç»Ÿï¼Œè™½ç„¶åŠŸèƒ½å¤Ÿç”¨ï¼Œä½† UI å’Œä½“éªŒä¸€ç›´ä¸å°½å¦‚äººæ„ã€‚</p>
<p>ç°åœ¨æˆ‘æ˜¯ä¸€æšåç«¯ Java å·¥ç¨‹å¸ˆï¼Œåœ¨äº†è§£äº† <strong>TRAE SOLO</strong> è¿™ä¸ª AI ç¼–ç¨‹åŠ©æ‰‹åï¼Œæˆ‘çªç„¶æœ‰äº†ä¸€ä¸ªæƒ³æ³•ï¼š</p>
<blockquote>
<p>â€œå¦‚æœæˆ‘è®© TRAE SOLO æ¥å¸®æˆ‘ä» 0 å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿâ€</p>
</blockquote>
<p>äºæ˜¯ï¼Œæˆ‘æ‰“å¼€äº† TRAE SOLOï¼Œè¯´äº†ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>â€œå¸®æˆ‘å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦çš„æ•™åŠ¡ç³»ç»Ÿï¼Œä»¿ç…§æ¸…åæ•™åŠ¡ UIï¼Œå‰åç«¯åˆ†ç¦»ï¼Œåç«¯ Javaï¼Œå‰ç«¯ Vueã€‚â€</strong></p>
</blockquote>
<p>ç»“æœï¼ŒçœŸçš„è¢«å®ƒéœ‡æ’¼åˆ°äº†ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ§° æŠ€æœ¯æ–¹æ¡ˆä¸€è§ˆ</h3>

































<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯æ ˆ</th></tr></thead><tbody><tr><td>å‰ç«¯</td><td>Vue 3 + Vite + åŸç”Ÿ JSï¼ˆå›  vite æŠ¥é”™ï¼Œé™çº§å¤„ç†ï¼‰</td></tr><tr><td>åç«¯</td><td>Spring Boot 2.x + H2 å†…å­˜æ•°æ®åº“</td></tr><tr><td>å®‰å…¨è®¤è¯</td><td>Spring Security</td></tr><tr><td>æ•°æ®ç»“æ„</td><td>ç”¨æˆ·ã€è¯¾ç¨‹ã€æˆç»©ã€æ•™å®¤</td></tr><tr><td>å¯åŠ¨æ–¹å¼</td><td>æœ¬åœ°è¿è¡Œï¼ˆæ”¯æŒ mvn + Python ç®€æ˜“ HTTP æœåŠ¡ï¼‰</td></tr><tr><td>AI åŠ©æ‰‹</td><td>TRAE SOLO å…¨ç¨‹é™ªè·‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">ğŸ§± å¼€å‘è¿‡ç¨‹å…¨è®°å½•</h3>
<h4 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®ç»“æ„å’Œè§„åˆ’æ–‡æ¡£</h4>
<p>TRAE SOLO é¦–å…ˆä¸ºæˆ‘è‡ªåŠ¨åˆ›å»ºäº†å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Affairs<span class="hljs-operator">-</span><span class="hljs-keyword">System</span><span class="hljs-operator">/</span>
â”œâ”€â”€ backend<span class="hljs-operator">/</span>  â† Spring Boot åç«¯
â””â”€â”€ frontend<span class="hljs-operator">/</span> â† Vue <span class="hljs-operator">+</span> JS å‰ç«¯
</code></pre>
<p>å¹¶åˆ—å‡ºäº† 6 ä¸ªé˜¶æ®µæ€§ä»»åŠ¡ï¼š</p>
<ol>
<li>åˆ›å»ºé¡¹ç›®ç»“æ„å’Œè§„åˆ’æ–‡æ¡£ âœ…</li>
<li>å¼€å‘åç«¯ Java é¡¹ç›® âœ…</li>
<li>é…ç½®æ•°æ®åº“å’Œä¾èµ– âœ…</li>
<li>å¼€å‘å‰ç«¯ Vue é¡µé¢ âœ…</li>
<li>å®ç°å‰åç«¯äº¤äº’å’Œç™»å½•åŠŸèƒ½ âœ…</li>
<li>å¯åŠ¨é¡¹ç›®å¹¶æµ‹è¯• âœ…</li>
</ol>
<p>å…¨ç¨‹è‡ªåŠ¨ç”Ÿæˆã€ç¼–è¯‘ã€è¿è¡Œï¼Œæ•ˆç‡æƒŠäººã€‚</p>
<hr/>
<h4 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šå¼€å‘åç«¯ Spring Boot é¡¹ç›®</h4>
<h5 data-id="heading-6">âœ… æ ¸å¿ƒåŠŸèƒ½ï¼š</h5>
<ul>
<li>ç™»å½•è®¤è¯ï¼ˆåŸºäº Spring Securityï¼‰</li>
<li>ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼ˆæ”¯æŒä¸‰ç§è§’è‰²ï¼šå­¦ç”Ÿã€æ•™å¸ˆã€ç®¡ç†å‘˜ï¼‰</li>
<li>ç§‘ç›®ç®¡ç†ï¼ˆè¯¾ç¨‹ï¼‰</li>
<li>æˆç»©ç®¡ç†ï¼ˆå­¦ç”Ÿæˆç»©ï¼‰</li>
<li>æ•™å®¤ç®¡ç†ï¼ˆæ–°å¢æ‰©å±•ï¼‰</li>
</ul>
<h5 data-id="heading-7">âœ… å…³é”®ä»£ç æ–‡ä»¶ï¼š</h5>
<ul>
<li><code>User.java</code>ï¼šç”¨æˆ·å®ä½“</li>
<li><code>Course.java</code>ï¼šè¯¾ç¨‹å®ä½“</li>
<li><code>Score.java</code>ï¼šæˆç»©å®ä½“</li>
<li><code>LoginController.java</code>ï¼šç™»å½•æ¥å£</li>
<li><code>CourseController.java</code>ï¼šè¯¾ç¨‹ API</li>
<li><code>ScoreController.java</code>ï¼šæˆç»© API</li>
<li><code>SecurityConfig.java</code>ï¼šå®‰å…¨é…ç½®</li>
<li><code>DataInit.java</code>ï¼šåˆå§‹åŒ–æµ‹è¯•æ•°æ®</li>
</ul>
<h5 data-id="heading-8">âœ… æµ‹è¯•è´¦å·</h5>

























<table><thead><tr><th>è§’è‰²</th><th>ç”¨æˆ·å</th><th>å¯†ç </th></tr></thead><tbody><tr><td>ç®¡ç†å‘˜</td><td><code>admin</code></td><td><code>admin123</code></td></tr><tr><td>å­¦ç”Ÿ</td><td><code>student</code></td><td><code>student123</code></td></tr><tr><td>æ•™å¸ˆ</td><td><code>teacher</code></td><td><code>teacher123</code></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šå¼€å‘å‰ç«¯ Vue é¡µé¢ï¼ˆUI ä»¿æ¸…åï¼‰</h4>
<p>æœ¬æ¥æˆ‘æƒ³ç”¨ Vue + Vite æ­å»ºå®Œæ•´ SPAï¼Œä½†ç”±äº <code>esbuild</code> çš„å¹³å°å…¼å®¹æ€§é—®é¢˜ï¼ŒTRAE SOLO æœºæ™ºåœ°åˆ‡æ¢åˆ°äº†åŸç”Ÿ HTML + JS çš„æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-10">âœ… ç™»å½•é¡µé¢ï¼ˆindex.htmlï¼‰</h5>
<ul>
<li>ç™»å½•æ¡†ä»¿ç…§æ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿ UI</li>
<li>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œè°ƒç”¨åç«¯ <code>/api/login</code> æ¥å£</li>
<li>ç™»å½•æˆåŠŸåè·³è½¬ä¸»é¡µé¢</li>
</ul>
<h5 data-id="heading-11">âœ… ä¸»é¡µé¢ï¼ˆmain.htmlï¼‰</h5>
<ul>
<li>å·¦ä¾§èœå•æ ï¼šä»ªè¡¨ç›˜ã€è¯¾ç¨‹ç®¡ç†ã€æˆç»©æŸ¥è¯¢ã€ç”¨æˆ·ç®¡ç†</li>
<li>å³ä¾§å†…å®¹åŒºæ ¹æ®èœå•åŠ¨æ€æ¸²æŸ“æ¨¡å—</li>
<li>ä¸åŒè§’è‰²æ˜¾ç¤ºä¸åŒèœå•ï¼ˆRBAC å®ç°ï¼‰</li>
<li>æ ·å¼å‚è€ƒç´«è‰²æ¸…åé£æ ¼ï¼Œç»“æ„æ¸…æ™°</li>
</ul>
<hr/>
<h4 data-id="heading-12">ç¬¬å››æ­¥ï¼šå‰åç«¯è”è°ƒ</h4>
<ul>
<li>åç«¯æ¥å£å…¨éƒ¨æš´éœ²åœ¨ <code>/api</code> è·¯å¾„ä¸‹</li>
<li>ä½¿ç”¨ <code>fetch()</code> å®ç°è·¨åŸŸè°ƒç”¨</li>
<li>ç™»å½•æˆåŠŸåå­˜å‚¨ç”¨æˆ·ååˆ° <code>localStorage</code></li>
<li>åç«¯æ ¹æ®ç”¨æˆ·è§’è‰²è¿”å›å¯¹åº”åŠŸèƒ½æ¨¡å—çš„æ•°æ®</li>
</ul>
<hr/>
<h4 data-id="heading-13">ç¬¬äº”æ­¥ï¼šå¯åŠ¨æœåŠ¡å¹¶è®¿é—®</h4>
<h5 data-id="heading-14">âœ… å¯åŠ¨åç«¯</h5>
<pre><code class="hljs language-arduino" lang="arduino">cd backend
mvn spring-boot:run
</code></pre>
<p>è¿è¡ŒæˆåŠŸåï¼Œåç«¯æœåŠ¡åœ°å€ä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//localhost:8080</span>
</code></pre>
<h5 data-id="heading-15">âœ… å¯åŠ¨å‰ç«¯ï¼ˆHTML + Pythonï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> frontend
python3 -m http.server 3000
</code></pre>
<p>è¿è¡ŒæˆåŠŸåï¼Œå‰ç«¯åœ°å€ä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//localhost:3000</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">ğŸ”¥ ç³»ç»ŸåŠŸèƒ½é¢„è§ˆ</h3>
<h4 data-id="heading-17">âœ… ç™»å½•é¡µ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4daa4f323ae470eb2c3c46a65d5e60c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023750&amp;x-signature=%2FP9cOTXZdgmimNHiX11wMlcbKoE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ”¯æŒç”¨æˆ·ç™»å½•</li>
<li>ç™»å½•å¤±è´¥è¿”å›æç¤º</li>
<li>ç™»å½•æˆåŠŸè·³è½¬ä¸»é¡µé¢</li>
</ul>
<h4 data-id="heading-18">âœ… ä¸»é¡µé¢ï¼ˆmain.htmlï¼‰</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/105017d1df8e4d1dac13b9a03433ee01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023750&amp;x-signature=GigPgAezIDnFc2m8DV3tRDmZWng%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¹æ®è§’è‰²å±•ç¤ºä¸åŒå­æ¨¡å—ï¼š</p>
<h5 data-id="heading-19">ç®¡ç†å‘˜</h5>
<ul>
<li>ğŸ‘¨â€ğŸ’¼ ç”¨æˆ·ç®¡ç†</li>
<li>ğŸ“š è¯¾ç¨‹ç®¡ç†</li>
<li>ğŸ“Š æˆç»©æ€»è§ˆ</li>
</ul>
<h5 data-id="heading-20">æ•™å¸ˆ</h5>
<ul>
<li>ğŸ“š æˆè¯¾è¯¾ç¨‹</li>
<li>âœï¸ æˆç»©å½•å…¥</li>
</ul>
<h5 data-id="heading-21">å­¦ç”Ÿ</h5>
<ul>
<li>ğŸ“– æˆ‘çš„è¯¾ç¨‹</li>
<li>ğŸ“ æˆ‘çš„æˆç»©</li>
<li>ğŸ“ˆ å¹³å‡ç»©ç‚¹</li>
</ul>
<hr/>
<h3 data-id="heading-22">ğŸ’¡ TRAE SOLO çš„æ€è€ƒè¿‡ç¨‹ï¼ˆAI ç¼–ç¨‹ä½“éªŒï¼‰</h3>
<p>æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼ŒTRAE SOLO çš„æ€è€ƒé€»è¾‘æ¸…æ™°ã€æœ‰æ¡ä¸ç´Šï¼š</p>
<ul>
<li>é‡åˆ°ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œè‡ªåŠ¨é™çº§ Spring Boot ç‰ˆæœ¬</li>
<li>é‡åˆ°å‰ç«¯çš„ vite æŠ¥é”™ï¼Œè‡ªåŠ¨åˆ‡æ¢ä¸º HTML + åŸç”Ÿ JS</li>
<li>è‡ªåŠ¨ç”Ÿæˆå®ä½“ã€Controllerã€Repositoryã€åˆå§‹åŒ–æ•°æ®</li>
<li>è‡ªåŠ¨å®‰è£…ä¾èµ–ã€è¿è¡ŒæœåŠ¡ã€æ£€æµ‹é”™è¯¯å¹¶ä¿®å¤</li>
<li>è‡ªåŠ¨è·³è½¬é¡µé¢ã€ç»‘å®šäº‹ä»¶ã€å¤„ç†ç™»å½•çŠ¶æ€</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>æˆ‘åªè´Ÿè´£è¯´å‡ºéœ€æ±‚ï¼ŒTRAE SOLO å¸®æˆ‘æŠŠéœ€æ±‚è½åœ°ä¸ºä»£ç å’Œå¯è¿è¡Œç³»ç»Ÿã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-23">ğŸ§ª å¦‚ä½•ä½“éªŒæ•™åŠ¡ç³»ç»Ÿï¼Ÿ</h3>
<h4 data-id="heading-24">1. å¯åŠ¨åç«¯</h4>
<pre><code class="hljs language-arduino" lang="arduino">cd backend
mvn spring-boot:run
</code></pre>
<h4 data-id="heading-25">2. å¯åŠ¨å‰ç«¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> frontend
python3 -m http.server 3000
</code></pre>
<h4 data-id="heading-26">3. æ‰“å¼€æµè§ˆå™¨è®¿é—®</h4>
<ul>
<li>ç™»å½•é¡µé¢ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2F" target="_blank" title="http://localhost:3000/" ref="nofollow noopener noreferrer">http://localhost:3000</a></li>
<li>åç«¯ APIï¼š</li>
<li>H2 æ§åˆ¶å°ï¼š</li>
</ul>
<h4 data-id="heading-27">4. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•</h4>

























<table><thead><tr><th>è§’è‰²</th><th>ç”¨æˆ·å</th><th>å¯†ç </th></tr></thead><tbody><tr><td>ç®¡ç†å‘˜</td><td><code>admin</code></td><td><code>admin123</code></td></tr><tr><td>å­¦ç”Ÿ</td><td><code>student</code></td><td><code>student123</code></td></tr><tr><td>æ•™å¸ˆ</td><td><code>teacher</code></td><td><code>teacher123</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-28">ğŸ“ æ€»ç»“ï¼šç”¨ TRAE SOLOï¼Œæˆ‘æˆä¸ºâ€œæ¸…åæ•™åŠ¡ä¸»ä»»â€</h3>
<p>è¿™æ¬¡å¼€å‘è®©æˆ‘å½»åº•æ”¹å˜äº†å¯¹â€œAI å†™ä»£ç â€çš„çœ‹æ³•ã€‚</p>
<ul>
<li>ä¸å†æ˜¯â€œè‡ªåŠ¨ç”Ÿæˆä¸€æ®µä»£ç â€</li>
<li>è€Œæ˜¯ä»éœ€æ±‚ â†’ ç»“æ„ â†’ å®ç° â†’ è¿è¡Œï¼Œå…¨æµç¨‹ä»£å·¥</li>
<li>ç”šè‡³èƒ½æ ¹æ®é”™è¯¯æ—¥å¿—è‡ªåŠ¨ä¿®å¤é—®é¢˜ã€åˆ‡æ¢æŠ€æœ¯æ–¹æ¡ˆ</li>
</ul>
<blockquote>
<p>æˆ‘åªç”¨äº†å‡ ä¸ªå°æ—¶ï¼Œå°±ä»é›¶æ„å»ºèµ·ä¸€ä¸ªèƒ½ç”¨çš„æ¸…åå¤§å­¦æ•™åŠ¡ç³»ç»Ÿã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-29">ğŸ“¢ æœªæ¥è®¡åˆ’</h3>
<ul>
<li>âœ… å¤šè§’è‰²ç™»å½• âœ”ï¸</li>
<li>âœ… è¯¾ç¨‹å’Œæˆç»©ç®¡ç† âœ”ï¸</li>
<li>â³ é€‰è¯¾ç³»ç»Ÿï¼ˆæ­£åœ¨å¼€å‘ï¼‰</li>
<li>â³ æ•™å®¤æ’è¯¾å†²çªæ£€æµ‹</li>
<li>â³ å¯¼å‡ºæˆç»©å•ã€ç»©ç‚¹è®¡ç®—</li>
<li>â³ ä¸Šä¼ å¤´åƒã€ä¿®æ”¹å¯†ç ã€ç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜</li>
</ul>
<hr/>
<h3 data-id="heading-30">ğŸ—£ï¸ æœ€å</h3>
<p>å¦‚æœä½ ä¹Ÿæ˜¯ Java å·¥ç¨‹å¸ˆï¼Œä¸å¦¨è¯•è¯• TRAE SOLOï¼Œ<br/>
ä½ ä¼šå‘ç°ï¼š</p>
<blockquote>
<p>â€œAI ä¸æ˜¯å–ä»£ç¨‹åºå‘˜ï¼Œè€Œæ˜¯æå‡ä½ çš„æˆ˜æ–—åŠ›ã€‚â€</p>
</blockquote>
<p>æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºï¼Œæˆ‘ä»¬ä¸€èµ·ç”¨ AI åšç‚¹æ›´é…·çš„äº‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å››è½®è¿­ä»£ï¼Œä»é›¶åˆ°å®Œæ•´æ¸¸æˆï¼šç”¨ SOLO Coder åšä¿„ç½—æ–¯æ–¹å—]]></title>    <link>https://juejin.cn/post/7582155513585549364</link>    <guid>https://juejin.cn/post/7582155513585549364</guid>    <pubDate>2025-12-11T02:53:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582155513585549364" data-draft-id="7582131164727951400" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å››è½®è¿­ä»£ï¼Œä»é›¶åˆ°å®Œæ•´æ¸¸æˆï¼šç”¨ SOLO Coder åšä¿„ç½—æ–¯æ–¹å—"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-11T02:53:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å››è½®è¿­ä»£ï¼Œä»é›¶åˆ°å®Œæ•´æ¸¸æˆï¼šç”¨ SOLO Coder åšä¿„ç½—æ–¯æ–¹å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:53:22.000Z" title="Thu Dec 11 2025 02:53:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f1b742e94274062a9dc810df8ba7667~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=ICbY2f5kI5Jx2s0Nbb9dnYDOp5Y%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šèŒ‰å·ï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<p>åšä¸€æ¬¾æ¸¸æˆï¼Œç°åœ¨å·²ç»ä¸éš¾äº†ã€‚</p>
<p>éšç€ AI å·¥å…·çš„æ™®åŠï¼Œå³ä½¿ä¸å†™ä¸€è¡Œä»£ç ï¼Œä»»ä½•äººéƒ½èƒ½åœ¨å‡ åˆ†é’Ÿå†…ç”Ÿæˆä¸€ä¸ªå¯ä»¥è¿è¡Œçš„æ¸¸æˆåŸå‹ã€‚åªéœ€è¦æè¿°ä½ çš„æƒ³æ³•ï¼ŒAI å°±èƒ½å¿«é€Ÿæ­å»ºå‡ºä¸€ä¸ªâ€œèƒ½ç©â€çš„ç‰ˆæœ¬ã€‚</p>
<p>ä½†é—®é¢˜æ˜¯ï¼šä»èƒ½ç©åˆ°å¥½ç©ã€ä»åŸå‹åˆ°äº§å“ï¼Œä¸­é—´éš”ç€ä¸€é“å·¨å¤§çš„é¸¿æ²Ÿã€‚ä½ å¯èƒ½ä¼šé‡åˆ°è¿™äº›å›°å¢ƒï¼š</p>
<ul>
<li>
<p>ç”Ÿæˆçš„æ¸¸æˆç•Œé¢å¤ªç²—ç³™ï¼Œç¼ºä¹å¸å¼•åŠ›</p>
</li>
<li>
<p>æƒ³è°ƒæ•´æŸä¸ªåŠŸèƒ½ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•ç²¾ç¡®æ§åˆ¶</p>
</li>
<li>
<p>éœ€è¦æ·»åŠ æ–°ç©æ³•ï¼Œå´å‘ç°ä»£ç ç»“æ„æ··ä¹±éš¾ä»¥æ‰©å±•</p>
</li>
<li>
<p>æƒ³è¦æŒç»­è¿­ä»£ä¼˜åŒ–ï¼Œä½†æ¯æ¬¡é‡æ–°ç”Ÿæˆéƒ½ä¼šä¸¢å¤±ä¹‹å‰çš„æ”¹åŠ¨</p>
</li>
</ul>
<p>è¿™å°±æ˜¯ <strong>SOLO Coder</strong> çš„ä»·å€¼æ‰€åœ¨ï¼šä¸ä¸€é”®ç”Ÿæˆä¸åŒï¼ŒCoder æä¾›çš„æ˜¯å¯æ§çš„ã€ç»“æ„åŒ–çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†ä»æœ€åˆçš„ä¸€å¥â€œå¼€å‘ä¸€ä¸ªç»å…¸çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆâ€å¼€å§‹ï¼Œé€šè¿‡å››è½®ç»“æ„åŒ–è¿­ä»£ï¼Œæœ€ç»ˆåšå‡ºä¸€ä¸ªæ‹¥æœ‰ç‚«é…·ç‰¹æ•ˆã€å¤šç§ç©æ³•ã€å®Œæ•´éŸ³æ•ˆç³»ç»Ÿçš„çœŸæ­£å¯ç”¨çš„æ¸¸æˆé¡¹ç›®ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€æ¬¡æ€§çš„ demo ç”Ÿæˆï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„äº§å“å¼€å‘è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0"><strong>èƒŒæ™¯</strong></h2>
<h3 data-id="heading-1"><strong>æ ¸å¿ƒç›®æ ‡ï¼š</strong></h3>
<p>æ¢ç´¢ SOLO Coder å¦‚ä½•å¸®åŠ©å¼€å‘è€…ï¼ˆåŒ…æ‹¬éç¨‹åºå‘˜ï¼‰æ„å»ºä¸€ä¸ª<strong>çœŸæ­£å¯ç”¨ã€å¯è¿­ä»£çš„</strong>ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆé¡¹ç›®ã€‚</p>
<p>ä½¿ç”¨ TRAE çš„èƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><strong>SOLO Coder</strong></p>
</li>
<li>
<p><strong>SOLO plan</strong></p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f16ae4ac8134ae2872e9f407a41f8cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=fOA4D%2Fz8GwehDI7Qtox0R1%2BZD7g%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>ç¬¬ä¸€è½®è¿­ä»£ï¼šä»æƒ³æ³•åˆ°åŸå‹</strong></h2>
<h3 data-id="heading-3"><strong>èµ·ç‚¹ï¼šä¸€å¥è¯éœ€æ±‚</strong></h3>
<p>æœ€åˆï¼Œæˆ‘åªè¾“å…¥äº†ä¸€å¥ç®€å•çš„è¯ï¼š</p>
<blockquote>
<p><strong>åŸå§‹æç¤ºè¯ï¼š</strong> å¼€å‘ä¸€ä¸ªç»å…¸çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆ</p>
</blockquote>
<p>è¿™æ—¶ï¼ŒTRAE çš„<strong>æç¤ºè¯ä¼˜åŒ–åŠŸèƒ½</strong>å‘æŒ¥äº†ä½œç”¨ï¼Œå°†è¿™å¥è¯æ‰©å±•ä¸ºä¸€ä»½è¯¦å°½çš„ä¸“ä¸šéœ€æ±‚æ–‡æ¡£ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/907a033014144c3e97c96f850265771f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=18Swxrgi1eSJxdix%2BzJ%2BiaaJy8Y%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–å</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å‘ä¸€ä¸ªç»å…¸çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆï¼Œéœ€åŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š
<span class="hljs-bullet">1.</span> æ¸¸æˆç•Œé¢è®¾è®¡ï¼š
<span class="hljs-bullet">   -</span> ä¸»æ¸¸æˆåŒºåŸŸï¼š10åˆ—Ã—20è¡Œçš„æ ‡å‡†ç½‘æ ¼
<span class="hljs-bullet">   -</span> é¢„è§ˆåŒºåŸŸï¼šæ˜¾ç¤ºä¸‹ä¸€ä¸ªå³å°†å‡ºç°çš„æ–¹å—
<span class="hljs-bullet">   -</span> è®¡åˆ†æ¿ï¼šæ˜¾ç¤ºå½“å‰åˆ†æ•°ã€æ¶ˆé™¤è¡Œæ•°å’Œæ¸¸æˆç­‰çº§
<span class="hljs-bullet">   -</span> æ§åˆ¶é¢æ¿ï¼šåŒ…å«å¼€å§‹/æš‚åœ/é‡ç½®æŒ‰é’®

<span class="hljs-bullet">2.</span> æ–¹å—ç³»ç»Ÿï¼š
<span class="hljs-bullet">   -</span> å®ç°7ç§ç»å…¸ä¿„ç½—æ–¯æ–¹å—å½¢çŠ¶ï¼ˆIã€Jã€Lã€Oã€Sã€Tã€Zï¼‰
<span class="hljs-bullet">   -</span> æ¯ç§æ–¹å—ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†
<span class="hljs-bullet">   -</span> æ”¯æŒæ–¹å—çš„æ—‹è½¬ï¼ˆé¡ºæ—¶é’ˆ/é€†æ—¶é’ˆï¼‰
<span class="hljs-bullet">   -</span> æ–¹å—ä¸‹è½é€Ÿåº¦éšç­‰çº§æå‡è€ŒåŠ å¿«

<span class="hljs-bullet">3.</span> æ¸¸æˆæœºåˆ¶ï¼š
<span class="hljs-bullet">   -</span> æ–¹å—è‡ªåŠ¨ä¸‹è½åŠŸèƒ½
<span class="hljs-bullet">   -</span> ç©å®¶æ§åˆ¶ï¼ˆå·¦ç§»ã€å³ç§»ã€åŠ é€Ÿä¸‹è½ã€æ—‹è½¬ï¼‰
<span class="hljs-bullet">   -</span> è¡Œæ¶ˆé™¤åˆ¤å®šä¸è®¡åˆ†ï¼ˆå•è¡Œ/åŒè¡Œ/ä¸‰è¡Œ/å››è¡Œä¸åŒåˆ†å€¼ï¼‰
<span class="hljs-bullet">   -</span> ç¢°æ’æ£€æµ‹ï¼ˆè¾¹ç•Œç¢°æ’ã€æ–¹å—å †å ç¢°æ’ï¼‰
<span class="hljs-bullet">   -</span> æ¸¸æˆç»“æŸæ¡ä»¶ï¼ˆæ–¹å—å †å åˆ°é¡¶éƒ¨ï¼‰

<span class="hljs-bullet">4.</span> æŠ€æœ¯è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> ä½¿ç”¨HTML5 Canvasæˆ–ç°ä»£æ¸¸æˆå¼•æ“å®ç°
<span class="hljs-bullet">   -</span> ç¡®ä¿60fpsçš„æµç•…åŠ¨ç”»æ•ˆæœ
<span class="hljs-bullet">   -</span> å®ç°å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸
<span class="hljs-bullet">   -</span> æ·»åŠ éŸ³æ•ˆç³»ç»Ÿï¼ˆç§»åŠ¨ã€æ—‹è½¬ã€æ¶ˆé™¤ã€æ¸¸æˆç»“æŸç­‰éŸ³æ•ˆï¼‰

<span class="hljs-bullet">5.</span> æµ‹è¯•è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> æ‰€æœ‰æ–¹å—å½¢çŠ¶çš„æ—‹è½¬é€»è¾‘æµ‹è¯•
<span class="hljs-bullet">   -</span> è¾¹ç•Œç¢°æ’æ£€æµ‹æµ‹è¯•
<span class="hljs-bullet">   -</span> è®¡åˆ†ç³»ç»Ÿå‡†ç¡®æ€§éªŒè¯
<span class="hljs-bullet">   -</span> ä¸åŒç­‰çº§çš„é€Ÿåº¦å˜åŒ–æµ‹è¯•
</code></pre>
<h3 data-id="heading-4"><strong>æŠ€æœ¯æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ</strong></h3>
<p>TRAE éšåç”Ÿæˆäº†å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£ï¼Œæˆ‘ä»¬å¤§æ¦‚äº†è§£ä¸€ä¸‹ï¼Œç›´æ¥ç»§ç»­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ab26a9503274abf8cf9f99311bae4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=bBquyMLWRXIKdQKK79qZeMPsNe0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ddbbb2467dc488f802b012cab501014~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=E2FD%2BVeLu44gUea8dmhAcWnitWs%3D" alt="" loading="lazy"/></p>
<p><strong>æŠ€æœ¯æ–‡æ¡£å…¨æ–‡</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## æŠ€æœ¯æ ˆä¸é¡¹ç›®ç»“æ„ï¼ˆReact ç‰ˆï¼‰</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šVite + React + TypeScript + Canvas æ¸²æŸ“ï¼›Vitest + React Testing Libraryï¼ˆæµ‹è¯•ï¼‰ï¼ŒESLint/Prettierï¼ˆè´¨é‡ï¼‰
<span class="hljs-bullet">-</span> è¿è¡Œç›®æ ‡ï¼šæ ¸å¿ƒæ¸²æŸ“ç”± Canvas å®Œæˆä»¥ä¿è¯ 60fpsï¼›React è´Ÿè´£ UIï¼ˆè®¡åˆ†æ¿/é¢„è§ˆ/æ§åˆ¶ï¼‰ä¸çŠ¶æ€å±•ç¤º
<span class="hljs-bullet">-</span> ç›®å½•ç»“æ„ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-code">`index.html`</span>ï¼ˆæ ¹å®¹å™¨ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/main.tsx`</span>ï¼ˆReact åº”ç”¨å…¥å£ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/App.tsx`</span>ï¼ˆé¡µé¢å¸ƒå±€ä¸é¡¶å±‚çŠ¶æ€åˆ†å‘ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/components/GameCanvas.tsx`</span>ï¼ˆCanvas æ¸²æŸ“ä¸»æ¸¸æˆåŒºï¼š10Ã—20ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/components/Preview.tsx`</span>ï¼ˆé¢„è§ˆä¸‹ä¸€ä¸ªæ–¹å—ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/components/ScoreBoard.tsx`</span>ï¼ˆåˆ†æ•°/è¡Œæ•°/ç­‰çº§æ˜¾ç¤ºï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/components/Controls.tsx`</span>ï¼ˆå¼€å§‹/æš‚åœ/é‡ç½®æŒ‰é’®ï¼Œç§»åŠ¨ç«¯å¯é€‰è§¦æ§ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/game/engine.ts`</span>ï¼ˆæ¸¸æˆå¼•æ“ï¼šå¾ªç¯/é”å®š/ç»“æŸåˆ¤å®šï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/game/board.ts`</span>ï¼ˆç½‘æ ¼/è¡Œæ¶ˆé™¤/ç¢°æ’ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/game/tetromino.ts`</span>ï¼ˆ7 ç§æ–¹å—ä¸æ—‹è½¬ï¼Œå« SRS å£è¸¢ç®€åŒ–ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/game/spawn.ts`</span>ï¼ˆ7-è¢‹éšæœºç®—æ³•ä¸é¢„è§ˆé˜Ÿåˆ—ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/game/input.ts`</span>ï¼ˆé”®ç›˜ç»‘å®šä¸äº‹ä»¶è½¬å‘ï¼ŒReact å±‚æ³¨å†Œï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/render/canvasRenderer.ts`</span>ï¼ˆCanvas ç»˜åˆ¶ï¼šæ–¹å—/å½±å­/å †å /ç½‘æ ¼/é¢„è§ˆï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/audio/sfx.ts`</span>ï¼ˆéŸ³æ•ˆæ’­æ”¾ä¸é™éŸ³åˆ‡æ¢ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/ui/layout.ts`</span>ï¼ˆå“åº”å¼ç¼©æ”¾ä¸å°ºå¯¸è®¡ç®—ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`src/constants.ts`</span> / <span class="hljs-code">`src/types.ts`</span>ï¼ˆå¸¸é‡ä¸ç±»å‹ï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`assets/sfx/*`</span>ï¼ˆéŸ³æ•ˆèµ„æºï¼‰
<span class="hljs-bullet">  -</span> <span class="hljs-code">`tests/*`</span>ï¼ˆé€»è¾‘ä¸ UI æµ‹è¯•ï¼‰

<span class="hljs-section">## React é›†æˆç­–ç•¥</span>
<span class="hljs-bullet">-</span> æ¸²æŸ“ä¸çŠ¶æ€ï¼š
<span class="hljs-bullet">  -</span> é€»è¾‘çŠ¶æ€ä½¿ç”¨å¯å˜ <span class="hljs-code">`ref`</span>ï¼ˆé¿å…æ¯å¸§ React é‡æ¸²æŸ“ï¼‰ï¼›Canvas æ¯å¸§ç»˜åˆ¶
<span class="hljs-bullet">  -</span> React ä»…åœ¨é‡è¦äº‹ä»¶ï¼ˆè¡Œæ¶ˆé™¤/å¾—åˆ†/ç­‰çº§å˜åŒ–/ç»“æŸï¼‰è§¦å‘ä¸€æ¬¡æ€§æ¸²æŸ“ï¼ˆé€šè¿‡ <span class="hljs-code">`setState`</span>ï¼‰
<span class="hljs-bullet">-</span> äº‹ä»¶æµï¼š
<span class="hljs-bullet">  -</span> é”®ç›˜äº‹ä»¶åœ¨ <span class="hljs-code">`App`</span> å±‚æ³¨å†Œï¼Œè½¬å‘ç»™ <span class="hljs-code">`engine`</span>ï¼›æŒ‰é’®é€šè¿‡ props è°ƒç”¨å¼•æ“æ–¹æ³•
<span class="hljs-bullet">-</span> ç»„ä»¶èŒè´£ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-code">`GameCanvas`</span>ï¼šæŒæœ‰ Canvas å¼•ç”¨ï¼Œåˆå§‹åŒ–æ¸²æŸ“å™¨ï¼Œè®¢é˜…å¼•æ“å›è°ƒ
<span class="hljs-bullet">  -</span> <span class="hljs-code">`Preview/ScoreBoard/Controls`</span>ï¼šçº¯ UI å±•ç¤ºä¸æ§åˆ¶

<span class="hljs-section">## æ¸¸æˆæœºåˆ¶ï¼ˆä¿æŒä¸åŸéœ€æ±‚ä¸€è‡´ï¼‰</span>
<span class="hljs-bullet">-</span> è‡ªåŠ¨ä¸‹è½ï¼šåŸºäºç­‰çº§çš„ <span class="hljs-code">`fallInterval`</span>ï¼›è½¯é™ï¼ˆåŠ é€Ÿï¼‰ã€ç¡¬é™ï¼ˆåˆ°åº•ç«‹å³é”å®šï¼‰
<span class="hljs-bullet">-</span> æ§åˆ¶ï¼š<span class="hljs-code">`â†/â†’`</span> å·¦å³ç§»ï¼Œ<span class="hljs-code">`â†‘`</span> é¡ºæ—¶é’ˆï¼Œ<span class="hljs-code">`Z`</span> é€†æ—¶é’ˆï¼Œ<span class="hljs-code">`â†“`</span> è½¯é™ï¼Œ<span class="hljs-code">`Space`</span> ç¡¬é™
<span class="hljs-bullet">-</span> è¡Œæ¶ˆé™¤ä¸è®¡åˆ†ï¼šé»˜è®¤åˆ†å€¼ 100/300/500/800ï¼ˆå¯é…ç½®ï¼‰ï¼›æ¯ 10 è¡Œå‡ä¸€çº§ï¼›é€Ÿåº¦æŒ‰çº§é€’å‡ï¼ˆè¡¨é©±åŠ¨æˆ– <span class="hljs-code">`0.85^level`</span>ï¼‰
<span class="hljs-bullet">-</span> ç¢°æ’æ£€æµ‹ï¼šè¾¹ç•Œä¸å †å ï¼›æ—‹è½¬å¤±è´¥å°è¯•å£è¸¢ï¼›æ–°æ–¹å—æ— æ³•æ”¾ç½®åˆ™ç»“æŸ

<span class="hljs-section">## å“åº”å¼ä¸æ€§èƒ½</span>
<span class="hljs-bullet">-</span> <span class="hljs-code">`layout.ts`</span> æ ¹æ®å®¹å™¨å°ºå¯¸åŠ¨æ€è®¡ç®—å•å…ƒæ ¼åƒç´ ï¼Œä¿è¯ 10Ã—20 æ¯”ä¾‹
<span class="hljs-bullet">-</span> ä½¿ç”¨ <span class="hljs-code">`requestAnimationFrame`</span> ä¸æ—¶é—´ç´¯ç§¯æ§åˆ¶ä¸‹è½ï¼›æ¸²æŸ“ä¸é€»è¾‘è§£è€¦
<span class="hljs-bullet">-</span> é™ä½ React é‡æ¸²æŸ“é¢‘ç‡ï¼›Canvas å¯¹é½åƒç´ å‡å°‘æ¨¡ç³Š

<span class="hljs-section">## éŸ³æ•ˆç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> è½»é‡å®ç°ï¼šHTMLAudioï¼ˆåç»­å¯å‡çº§ WebAudioï¼‰ï¼›æä¾› <span class="hljs-code">`mute`</span> çŠ¶æ€ä¸ UI åˆ‡æ¢
<span class="hljs-bullet">-</span> äº‹ä»¶ç»‘å®šï¼šç§»åŠ¨/æ—‹è½¬/æ¶ˆé™¤/ç»“æŸè§¦å‘éŸ³æ•ˆ

<span class="hljs-section">## æµ‹è¯•è®¡åˆ’</span>
<span class="hljs-bullet">-</span> é€»è¾‘å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰ï¼š
<span class="hljs-bullet">  -</span> æ—‹è½¬é€»è¾‘ï¼ˆå« I çš„ç‰¹æ®Šå£è¸¢ï¼‰
<span class="hljs-bullet">  -</span> è¾¹ç•Œ/å †å ç¢°æ’åˆ¤å®š
<span class="hljs-bullet">  -</span> è®¡åˆ†ä¸ç­‰çº§æå‡
<span class="hljs-bullet">  -</span> é€Ÿåº¦æ˜ å°„ï¼ˆä¸åŒç­‰çº§ï¼‰ä¸è½¯/ç¡¬é™è¡Œä¸º
<span class="hljs-bullet">  -</span> 7-è¢‹ç”Ÿæˆåˆ†å¸ƒä¸ä¸é‡å¤æ€§
<span class="hljs-bullet">-</span> UI æµ‹è¯•ï¼ˆReact Testing Libraryï¼‰ï¼š
<span class="hljs-bullet">  -</span> æ§åˆ¶æŒ‰é’®è¡Œä¸ºï¼ˆå¼€å§‹/æš‚åœ/é‡ç½®ï¼‰
<span class="hljs-bullet">  -</span> è®¡åˆ†æ¿æ˜¾ç¤ºåŒæ­¥æ›´æ–°
<span class="hljs-bullet">  -</span> é¢„è§ˆç»„ä»¶æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ–¹å—

<span class="hljs-section">## æ–‡æ¡£ä¼˜åŒ–ï¼ˆREADME ç»“æ„å»ºè®®ï¼‰</span>
<span class="hljs-bullet">-</span> é¡¹ç›®ç®€ä»‹ä¸æŠ€æœ¯æ ˆ
<span class="hljs-bullet">-</span> å¿«é€Ÿå¼€å§‹ï¼š
<span class="hljs-bullet">  -</span> å®‰è£…ä¾èµ–ã€å¯åŠ¨ã€æ„å»ºå‘½ä»¤
<span class="hljs-bullet">-</span> ç›®å½•ç»“æ„ä¸æ¨¡å—èŒè´£è¯´æ˜
<span class="hljs-bullet">-</span> é…ç½®é¡¹è¯´æ˜ï¼š
<span class="hljs-bullet">  -</span> åˆ†å€¼/ç­‰çº§é˜ˆå€¼/é€Ÿåº¦è¡¨/é”®ä½æ˜ å°„/é¢œè‰²ä¸»é¢˜
<span class="hljs-bullet">-</span> ä½¿ç”¨è¯´æ˜ï¼š
<span class="hljs-bullet">  -</span> é”®ä½/æŒ‰é’®æ“ä½œã€ç§»åŠ¨ç«¯äº¤äº’
<span class="hljs-bullet">-</span> æµ‹è¯•è¯´æ˜ï¼š
<span class="hljs-bullet">  -</span> å¦‚ä½•è¿è¡Œæµ‹è¯•ã€æµ‹è¯•èŒƒå›´ä¸è¦†ç›–ç‚¹
<span class="hljs-bullet">-</span> æ€§èƒ½ä¸å“åº”å¼ç­–ç•¥æ‘˜è¦
<span class="hljs-bullet">-</span> èµ„æºæ¸…å•ï¼šéŸ³æ•ˆæ–‡ä»¶ä¸ç‰ˆæƒè¯´æ˜

<span class="hljs-section">## é‡Œç¨‹ç¢‘ä¸äº¤ä»˜</span>
<span class="hljs-bullet">-</span> é˜¶æ®µ 1ï¼šVite+React+TS åˆå§‹åŒ–ã€åŸºç¡€é¡µé¢ä¸å¸ƒå±€ã€Canvas å®¹å™¨
<span class="hljs-bullet">-</span> é˜¶æ®µ 2ï¼šæ ¸å¿ƒæ¸¸æˆé€»è¾‘ï¼ˆboard/tetromino/engineï¼‰ã€åŸºæœ¬æ¸²æŸ“ä¸è¾“å…¥
<span class="hljs-bullet">-</span> é˜¶æ®µ 3ï¼šè¡Œæ¶ˆé™¤/è®¡åˆ†/ç­‰çº§ã€ç»“æŸåˆ¤å®šã€é¢„è§ˆåŒºä¸éŸ³æ•ˆ
<span class="hljs-bullet">-</span> é˜¶æ®µ 4ï¼šå“åº”å¼å®Œå–„ã€UI æ‰“ç£¨ã€ç§»åŠ¨ç«¯äº¤äº’ï¼ˆå¯é€‰ï¼‰
<span class="hljs-bullet">-</span> é˜¶æ®µ 5ï¼šæµ‹è¯•å®Œå–„ä¸ 60fps ç¨³å®šæ€§æ ¡éªŒã€æ–‡æ¡£æœ€ç»ˆæ•´ç†

<span class="hljs-section">## è¯´æ˜ä¸åç»­</span>
<span class="hljs-bullet">-</span> å½“å‰ç›®å½•ä¸ºç©ºï¼Œå°†æŒ‰æ­¤ React æ–¹æ¡ˆåˆå§‹åŒ–å¹¶å®ç°ï¼›æ–‡æ¡£å°†ä»¥ä¸Šè¿°ç»“æ„ç¼–å†™ä¸ä¼˜åŒ–
<span class="hljs-bullet">-</span> å¦‚éœ€æŒ‡å®š UI é£æ ¼ï¼ˆé¢œè‰²/å­—ä½“/å¸ƒå±€æ–¹å¼ï¼‰æˆ–åˆ†å€¼/é€Ÿåº¦ç­–ç•¥ï¼Œè¯·è¯´æ˜ï¼›é»˜è®¤ä½¿ç”¨ä¸Šè¿°é…ç½®
<span class="hljs-bullet">-</span> è¯·ç¡®è®¤æ˜¯å¦æŒ‰æ­¤ React æ–¹æ¡ˆæ‰§è¡Œä¸æ–‡æ¡£ç»“æ„è¾“å‡ºï¼›ç¡®è®¤åæˆ‘å°†å¼€å§‹è½åœ°
</code></pre>
<h3 data-id="heading-5"><strong>ç¬¬ä¸€ç‰ˆæˆæœ</strong></h3>
<p>ç»è¿‡ä¸€è½®ç”Ÿæˆï¼ŒåŸºæœ¬åŠŸèƒ½å…¨éƒ¨å®ç° ï¼Œæ¸¸æˆå·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acc7f83fb7e64f7c81d31ccb56fdead5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=25iYqELxb7aA6ZwoTpOdSvyS1V0%3D" alt="" loading="lazy"/></p>
<p>å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d6d1b4aae0a401db7011aace834c65b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=eqvwhwtBkD4hLsgYut3na78AwMA%3D" alt="å½•å±2025-11-13 20.22.22.gif" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/351ead58a56847e5a78ef5a1ccf0128a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=BB80%2BmzvGGG1r0WExJ4GmFw6ZeI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6"><strong>ç¬¬äºŒè½®è¿­ä»£ï¼šæŸ¥æ¼è¡¥ç¼º</strong></h2>
<h3 data-id="heading-7"><strong>ä½¿ç”¨ Plan æ¨¡å¼å¤ç›˜</strong></h3>
<p>æ‰“å¼€ <strong>Plan æ¨¡å¼</strong>ï¼Œè®© TRAE æ€»ç»“å½“å‰è¿›åº¦ï¼š</p>
<p><strong>å·²å®Œæˆï¼š</strong></p>
<ul>
<li>
<p>é˜¶æ®µ 1ï¼šé¡¹ç›®åˆå§‹åŒ–ã€åŸºç¡€é¡µé¢ä¸å¸ƒå±€</p>
</li>
<li>
<p>é˜¶æ®µ 2ï¼šæ ¸å¿ƒæ¸¸æˆé€»è¾‘</p>
</li>
<li>
<p>é˜¶æ®µ 3ï¼šè¡Œæ¶ˆé™¤/è®¡åˆ†/ç­‰çº§ã€é¢„è§ˆåŒº</p>
</li>
</ul>
<p><strong>å¾…å®Œæˆï¼š</strong></p>
<ul>
<li>
<p>é˜¶æ®µ 4ï¼šå“åº”å¼å®Œå–„ã€UI æ‰“ç£¨ã€ç§»åŠ¨ç«¯äº¤äº’</p>
</li>
<li>
<p>é˜¶æ®µ 5ï¼šæµ‹è¯•å®Œå–„ä¸ 60fps ç¨³å®šæ€§æ ¡éªŒã€æ–‡æ¡£æ•´ç†</p>
</li>
</ul>
<h3 data-id="heading-8"><strong>ç»§ç»­å®Œæˆå‰©ä½™ä»»åŠ¡</strong></h3>
<p>SOLO Coder ç”Ÿæˆäº†æ–°çš„å®æ–½æ–‡æ¡£ï¼Œä¸“é—¨ç”¨äºå®Œæˆé˜¶æ®µ 4 å’Œ 5ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af1c22d6f3364dd589ac0c2cb2721b8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=hZz7m2sJzSOLq4y9jOtv6%2FDQHjg%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81a472c4aa3646828b05ef5e018d1de1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=gy1D1Wux873VEnrarg%2BIFFf41%2Fk%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œ SOLO Coder ç”Ÿæˆäº†ä¸€ä¸ªæ–°æ–‡æ¡£ï¼Œç”¨æ¥å®Œæˆé˜¶æ®µ 4 å’Œ 5ã€‚Â </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4397f4b9a9f1486aaeed11fb2a301de2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=2Erbg3hYoCLyo%2FNURd1UyNMN67c%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9"><strong>ç¬¬äºŒç‰ˆæˆæœ</strong></h3>
<p><strong>æ–°å¢åŠŸèƒ½ ï¼š</strong></p>
<ul>
<li>
<p>éŸ³æ•ˆç³»ç»Ÿï¼ˆç§»åŠ¨ã€æ—‹è½¬ã€æ¶ˆé™¤ã€æ¸¸æˆç»“æŸéŸ³æ•ˆï¼‰</p>
</li>
<li>
<p>éŸ³é¢‘æ§åˆ¶æŒ‰é’®ï¼ˆé™éŸ³/å–æ¶ˆé™éŸ³ï¼‰</p>
</li>
<li>
<p>å“åº”å¼å¸ƒå±€ä¼˜åŒ–</p>
</li>
</ul>
<p><strong>ä¸è¶³ä¹‹å¤„ï¼š</strong></p>
<ul>
<li>ç•Œé¢è¿˜ä¸å¤Ÿå¸å¼•äººï¼Œç¼ºä¹è§†è§‰å†²å‡»åŠ›ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c3f321af93442d809f806b070c6217~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=f%2FnxJRRFb277TRpTEpsj3BmpHK8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/164fbda9888e4bf1a8ef76ded299bcf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=CyRcXsk0uifSFlbrTOkouq4xwk0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>ç¬¬ä¸‰è½®è¿­ä»£ï¼šè§†è§‰å‡çº§</strong></h2>
<h3 data-id="heading-11"><strong>æå‡ºä¼˜åŒ–éœ€æ±‚</strong></h3>
<p><strong>åŸå§‹æç¤ºè¯ï¼š</strong></p>
<blockquote>
<p>éœ€è¦ä¼˜åŒ–ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆçš„ç•Œé¢ï¼Œå¢åŠ è¶£å‘³æ€§ï¼Œç¬¦åˆå›½é™…ä¸€æµæ ‡å‡†</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e16e4305956b41c0b0230834dbe5e19d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=Aen5n6DnFCOC5bV1KwbGX4Q85UI%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–åæç¤ºè¯ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä¼˜åŒ–ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆç•Œé¢éœ€è¦ä»è§†è§‰è®¾è®¡ã€äº¤äº’ä½“éªŒå’Œæ¸¸æˆè¶£å‘³æ€§ä¸‰ä¸ªç»´åº¦è¿›è¡Œå…¨é¢å‡çº§ï¼Œå…·ä½“å®æ–½è¦æ±‚å¦‚ä¸‹ï¼š

<span class="hljs-bullet">1.</span> è§†è§‰è®¾è®¡ä¼˜åŒ–ï¼š
<span class="hljs-bullet">-</span> é‡‡ç”¨ç°ä»£åŒ–æ‰å¹³åŒ–è®¾è®¡é£æ ¼ï¼Œä½¿ç”¨é«˜å¯¹æ¯”åº¦è‰²å½©æ–¹æ¡ˆï¼ˆä¸»è‰²è°ƒä¸è¶…è¿‡5ç§ï¼‰
<span class="hljs-bullet">-</span> æ¸¸æˆåŒºåŸŸé‡‡ç”¨ç½‘æ ¼åŒ–è®¾è®¡ï¼Œæ–¹å—è¾¹ç¼˜å¢åŠ 1pxå‘å…‰ç‰¹æ•ˆ
<span class="hljs-bullet">-</span> èƒŒæ™¯å®ç°åŠ¨æ€ç²’å­æ•ˆæœï¼Œéšæ¸¸æˆè¿›åº¦å˜åŒ–å¼ºåº¦
<span class="hljs-bullet">-</span> æ‰€æœ‰UIå…ƒç´ å¿…é¡»æ”¯æŒ4Kåˆ†è¾¨ç‡ï¼Œé€‚é…16:9å’Œ21:9å±å¹•æ¯”ä¾‹

<span class="hljs-bullet">2.</span> æ ¸å¿ƒæ¸¸æˆæ€§å¢å¼ºï¼š
<span class="hljs-bullet">-</span> æ–°å¢&amp;#34;ç»å…¸/æé€Ÿ/æŒ‘æˆ˜&amp;#34;ä¸‰ç§æ¸¸æˆæ¨¡å¼é€‰æ‹©ç•Œé¢
<span class="hljs-bullet">-</span> å®ç°æ–¹å—é¢„è§ˆåŠŸèƒ½ï¼ˆæ˜¾ç¤ºä¸‹3ä¸ªå³å°†å‡ºç°çš„æ–¹å—ï¼‰
<span class="hljs-bullet">-</span> åŠ å…¥è¿å‡»ç‰¹æ•ˆç³»ç»Ÿï¼ˆ3è¿å‡»è§¦å‘ç«èŠ±ï¼Œ5è¿å‡»è§¦å‘é—ªç”µï¼‰
<span class="hljs-bullet">-</span> ç§¯åˆ†ç³»ç»Ÿé‡æ„ä¸ºå¤šç»´åº¦è¯„åˆ†ï¼ˆé€Ÿåº¦åˆ†/è¿å‡»åˆ†/æ•ˆç‡åˆ†ï¼‰

<span class="hljs-bullet">3.</span> äº¤äº’ä½“éªŒå‡çº§ï¼š
<span class="hljs-bullet">-</span> å®ç°60fpsæµç•…åŠ¨ç”»æ•ˆæœï¼Œæ‰€æœ‰è½¬åœºåŠ¨ç”»æ—¶é•¿æ§åˆ¶åœ¨0.3sä»¥å†…
<span class="hljs-bullet">-</span> è§¦æ§è®¾å¤‡æ”¯æŒæ‰‹åŠ¿æ“ä½œï¼ˆå·¦æ»‘åŠ é€Ÿä¸‹è½ï¼Œå³æ»‘å­˜å‚¨æ–¹å—ï¼‰
<span class="hljs-bullet">-</span> å¢åŠ éœ‡åŠ¨åé¦ˆç³»ç»Ÿï¼ˆä¸åŒæ“ä½œå¯¹åº”ä¸åŒéœ‡åŠ¨æ¨¡å¼ï¼‰
<span class="hljs-bullet">-</span> å…¨ç•Œé¢æ”¯æŒé”®ç›˜/æ‰‹æŸ„/è§¦å±ä¸‰å¥—æ“ä½œæ–¹æ¡ˆ

<span class="hljs-bullet">-</span> æ‰€æœ‰ç¾æœ¯èµ„æºæä¾›day/nightä¸¤ç§ä¸»é¢˜æ¨¡å¼

äº¤ä»˜ç‰©è¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> å®Œæ•´çš„UIè®¾è®¡è§„èŒƒæ–‡æ¡£ï¼ˆå«è‰²å½©ä»£ç å’ŒåŠ¨æ•ˆå‚æ•°ï¼‰
<span class="hljs-bullet">2.</span> é€šè¿‡UserTestingå¹³å°è·å–çš„å¯ç”¨æ€§æµ‹è¯•æŠ¥å‘Š
<span class="hljs-bullet">3.</span> æ€§èƒ½åˆ†ææŠ¥å‘Šï¼ˆå†…å­˜å ç”¨ éœ€è¦åœ¨ä¿„ç½—æ–¯æ–¹å—çš„åŸºç¡€ä¸Šï¼Œè®¾è®¡ä¸€äº›æœ‰è¶£çš„ç©æ³•
</code></pre>
<p><strong>ä¼˜åŒ–åæç¤ºè¯ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨ä¿„ç½—æ–¯æ–¹å—ç»å…¸ç©æ³•çš„åŸºç¡€ä¸Šï¼Œè®¾è®¡å¹¶å®ç°è‡³å°‘3ç§åˆ›æ–°æ¸¸æˆæ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼åº”åŒ…å«ä»¥ä¸‹è¦ç´ ï¼š
<span class="hljs-code">    
1 . æ¸¸æˆè§„åˆ™æ‰©å±•ï¼š
   - æ·»åŠ é“å…·ç³»ç»Ÿï¼ˆå¦‚ç‚¸å¼¹ã€æ—‹è½¬å™¨ã€å†»ç»“ç­‰ï¼‰
   - è®¾è®¡å…³å¡ç›®æ ‡ï¼ˆå¦‚æ¶ˆé™¤ç‰¹å®šæ•°é‡/é¢œè‰²çš„æ–¹å—ï¼‰
   - å¼•å…¥æ—¶é—´æŒ‘æˆ˜æˆ–ç”Ÿå­˜æ¨¡å¼
</span>
2 . è§†è§‰æ•ˆæœå¢å¼ºï¼š
<span class="hljs-bullet">   -</span> ä¸ºç‰¹æ®Šç©æ³•è®¾è®¡ä¸“å±ç²’å­ç‰¹æ•ˆ
<span class="hljs-bullet">   -</span> æ·»åŠ åŠ¨æ€èƒŒæ™¯å’Œä¸»é¢˜çš®è‚¤
<span class="hljs-bullet">   -</span> å®ç°æ–¹å—æ¶ˆé™¤æ—¶çš„è¿é”ååº”åŠ¨ç”»

<span class="hljs-bullet">3.</span> æŠ€æœ¯å®ç°è¦æ±‚ï¼š
<span class="hljs-bullet">   -</span> ä¿æŒåŸºç¡€ç‰©ç†å¼•æ“çš„ç¨³å®šæ€§
<span class="hljs-bullet">   -</span> ç¡®ä¿æ–°ç©æ³•ä¸ç»å…¸æ¨¡å¼çš„å¹³æ»‘åˆ‡æ¢
<span class="hljs-bullet">   -</span> æä¾›æ¸…æ™°çš„ç©æ³•æ•™å­¦æŒ‡å¼•

æ‰€æœ‰æ–°ç©æ³•éœ€ç»è¿‡å¹³è¡¡æ€§æµ‹è¯•ï¼Œç¡®ä¿æ¸¸æˆéš¾åº¦æ›²çº¿åˆç†ï¼Œå¹¶ä¿ç•™ç»å…¸ä¿„ç½—æ–¯æ–¹å—çš„æ ¸å¿ƒæ“ä½œæ‰‹æ„Ÿã€‚æœ€ç»ˆäº¤ä»˜åŒ…å«å®Œæ•´è®¾è®¡æ–‡æ¡£ã€å¯æ‰§è¡ŒåŸå‹å’Œç”¨æˆ·æµ‹è¯•æŠ¥å‘Šã€‚
</code></pre>
<p>æˆ‘ä»¬æå‡ºè¦æ±‚ï¼ŒTRAE ç»§ç»­å…ˆç»™å‡ºè®¾è®¡æ–‡æ¡£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb32579251fd42caa3cdba217aae809d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=lqPRa%2BO6RWQAYlGcW5bDiAI7%2Fao%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>å…ˆå®ç°ä¸€ç§ï¼šç‚¸å¼¹è¿é”æ¨¡å¼</strong></h3>
<p>é€‰æ‹©â€œç‚¸å¼¹è¿é”â€æ¨¡å¼ä½œä¸ºé¦–ä¸ªåˆ›æ–°ç©æ³•è¿›è¡Œå®ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a0937fe156842d18b108ea76619dcc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=buMM2YOcwaBp0%2FvvqIipiRLwu0M%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>ç¬¬å››ç‰ˆæˆæœ</strong></h3>
<p><strong>ç‚¸å¼¹è¿é”æ¨¡å¼ä¸Šçº¿ ï¼š</strong></p>
<ul>
<li>
<p>éšæœºæ–¹å—ä¸­ä¼šå‡ºç°ç‚¸å¼¹é“å…·</p>
</li>
<li>
<p>ç‚¸å¼¹è½åœ°åä¼šå¼•å‘è¿é”çˆ†ç‚¸æ•ˆæœ</p>
</li>
<li>
<p>çˆ†ç‚¸äº§ç”Ÿä¸“å±ç²’å­ç‰¹æ•ˆ</p>
</li>
<li>
<p>æ–°å¢æ¨¡å¼é€‰æ‹©ç•Œé¢</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e52f6056cfa4628a235518e7a02cffe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766026402&amp;x-signature=2yqixCyhxYW9JoUIp53kSW%2BesQU%3D" alt="å½•å±2025-11-13 21.56.28.gif" loading="lazy"/></p>
<h2 data-id="heading-14"><strong>æ ¸å¿ƒæ”¶è·ï¼šSOLO Coder å¦‚ä½•è®©é¡¹ç›®çœŸæ­£å¯ç”¨</strong></h2>
<h3 data-id="heading-15"><strong>1. ç”¨è‡ªç„¶è¯­è¨€äº¤æµï¼Œä½†è·å¾—ä¸“ä¸šçº§çš„æŠ€æœ¯æ–¹æ¡ˆ</strong></h3>
<p>æ•´ä¸ªç”Ÿæˆè¿‡ç¨‹å¯ä»¥ä¸æ‡‚æŠ€æœ¯æ¦‚å¿µã€‚æˆ‘çš„è¾“å…¥ä»æœ€åˆçš„â€œå¼€å‘ä¸€ä¸ªç»å…¸çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆâ€ï¼Œåˆ°åæ¥çš„â€œä¼˜åŒ–ç•Œé¢â€ã€â€œå¢åŠ ç©æ³•â€ï¼Œéƒ½åªæ˜¯è‡ªç„¶è¯­è¨€æè¿°ã€‚ã€æç¤ºè¯ä¼˜åŒ–åŠŸèƒ½ã€‘ä¼šå°†è¿™äº›éœ€æ±‚â€œç¿»è¯‘â€æˆä¸“ä¸šçš„å¼€å‘æç¤ºè¯ï¼ŒSOLO Coder ä¼šç”ŸæˆæŠ€æœ¯æ–‡æ¡£ï¼Œè¿™æå¤§åœ°é™ä½äº†åˆ›é€ çš„é—¨æ§›ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼šå³ä½¿ä½ ä¸æ˜¯ç¨‹åºå‘˜ï¼Œä¹Ÿèƒ½å¾—åˆ°ä¸€ä¸ªç¨‹åºå‘˜èƒ½çœ‹æ‡‚ã€èƒ½ç»´æŠ¤çš„é¡¹ç›®ã€‚</p>
<h3 data-id="heading-16"><strong>2. ä»éª¨æ¶åˆ°è¡€è‚‰ï¼šæ¸…æ™°çš„â€œè§„åˆ’-å®ç°â€è¿­ä»£è·¯å¾„</strong></h3>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ SOLO Coder çš„ Plan åŠŸèƒ½å…ˆå‡ºå…·ä¸€ä»½è¯¦å°½çš„æŠ€æœ¯æ–‡æ¡£ï¼Œæ­å»ºå¥½æ¸¸æˆçš„â€œéª¨æ¶â€ã€‚ç¬¬ä¸€è½®è¿­ä»£åï¼Œè¿›è¡Œâ€œå¤ç›˜â€ï¼Œæ£€æŸ¥å“ªäº›ä»»åŠ¡å·²ç»å®Œæˆï¼Œå“ªäº›å°šæœªå®ç°ï¼Œå¹¶æ®æ­¤åˆ¶å®šä¸‹ä¸€é˜¶æ®µçš„è®¡åˆ’ã€‚è¿™ç§ç»“æ„åŒ–çš„æ¨è¿›æ–¹å¼ï¼Œè®©å¼€å‘è€…å¯¹æ•´ä¸ªé¡¹ç›®çš„è¿›åº¦ä¸€ç›®äº†ç„¶ï¼Œéå¸¸æœ‰å®‰å…¨æ„Ÿï¼Œæ„Ÿè§‰é¡¹ç›®å§‹ç»ˆåœ¨å¯æ§çš„è½¨é“ä¸Šæ¨è¿›ã€‚</p>
<h3 data-id="heading-17"><strong>3. è¶…è¶Šâ€œèƒ½ç©â€ï¼šAI æ˜¯åˆ›æ„çš„æ”¾å¤§å™¨</strong></h3>
<p>å½“åŸºç¡€åŠŸèƒ½å®ç°åï¼Œæˆ‘çš„éœ€æ±‚å˜å¾—æ›´ä¸ºæ¨¡ç³Šï¼Œæ¯”å¦‚â€œç•Œé¢ä¸å¤Ÿå¸å¼•äººâ€ã€â€œè®¾è®¡ä¸€äº›æœ‰è¶£çš„ç©æ³•â€ã€‚SOLO Coder çš„ä»·å€¼åœ¨è¿™é‡Œå¾—åˆ°äº†æœ€å¤§ä½“ç°ã€‚å®ƒæ²¡æœ‰ç®€å•åœ°æ¢ä¸ªé¢œè‰²äº†äº‹ï¼Œè€Œæ˜¯ä»è§†è§‰è®¾è®¡ã€äº¤äº’ä½“éªŒåˆ°æ¸¸æˆæ¨¡å¼è¿›è¡Œäº†ç³»ç»Ÿæ€§å‡çº§ï¼Œæå‡ºäº†åŠ¨æ€ç²’å­èƒŒæ™¯ã€å¤šç§æ¸¸æˆæ¨¡å¼ã€ç‚¸å¼¹é“å…·ç­‰ä¸é”™çš„ç‚¹å­ã€‚</p>
<p>å½“åˆ›æ„è¿˜åªæ˜¯ä¸€ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µæ—¶ï¼ŒSOLO Coder èƒ½å¿«é€Ÿå°†å®ƒè½¬åŒ–ä¸ºå¯è§†åŸå‹ã€‚å®ƒä¸ä»…æ˜¯éªŒè¯å·¥å…·ï¼Œæ›´æ˜¯çµæ„Ÿå¼•æ“ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨æ—©æœŸæ¢ç´¢ä¸­æ‰“ç ´åƒµå±€ï¼Œæ˜ç¡®æ–¹å‘ã€‚</p>
<p><strong>å¯ä»¥çœ‹åˆ°ï¼ŒSOLO Coder æ­£åœ¨æ”¹å˜çš„ï¼Œä¸æ˜¯â€œèƒ½ä¸èƒ½åšâ€ï¼Œè€Œæ˜¯â€œèƒ½åšåˆ°ä»€ä¹ˆç¨‹åº¦â€ã€‚</strong></p>
<p>ä»æœ€åˆçš„ä¸€å¥è¯éœ€æ±‚ï¼Œåˆ°æœ€ç»ˆæ‹¥æœ‰ç‚«é…·ç‰¹æ•ˆã€å¤šç§ç©æ³•ã€å®Œæ•´éŸ³æ•ˆç³»ç»Ÿçš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆï¼Œæ•´ä¸ªè¿‡ç¨‹åªç”¨äº†å››è½®è¿­ä»£ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªç”¨å®Œå³å¼ƒçš„ demoï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£å¯ç”¨ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[seatunnel-ä¸€ç§åœºæ™¯mysqlcdcåŒæ­¥è¿›å…¥clickhouseåŸºäº2.3.11ç‰ˆæœ¬]]></title>    <link>https://juejin.cn/post/7582118218648436762</link>    <guid>https://juejin.cn/post/7582118218648436762</guid>    <pubDate>2025-12-11T02:30:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582118218648436762" data-draft-id="7582118218648420378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="seatunnel-ä¸€ç§åœºæ™¯mysqlcdcåŒæ­¥è¿›å…¥clickhouseåŸºäº2.3.11ç‰ˆæœ¬"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-11T02:30:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‚Œè‚‰å¨ƒå­"/> <meta itemprop="url" content="https://juejin.cn/user/1029576003433870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            seatunnel-ä¸€ç§åœºæ™¯mysqlcdcåŒæ­¥è¿›å…¥clickhouseåŸºäº2.3.11ç‰ˆæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1029576003433870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‚Œè‚‰å¨ƒå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:30:53.000Z" title="Thu Dec 11 2025 02:30:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">seatunnel-ä¸€ç§åœºæ™¯mysqlcdcåŒæ­¥è¿›å…¥clickhouseåŸºäº2.3.11ç‰ˆæœ¬</h2>
<h2 data-id="heading-1">MySQL CDC åˆ° ClickHouse å®Œæ•´æ•°æ®æµè½¬åˆ†æ</h2>
<h3 data-id="heading-2">æ¦‚è¿°</h3>
<p>æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æåœ¨ <code>startup_mode=&amp;#34;initial&amp;#34;</code> æ¨¡å¼ä¸‹ï¼Œæ•°æ®ä» MySQL CDC Source è¯»å–åˆ° ClickHouse Sink çš„å®Œæ•´æµè½¬è¿‡ç¨‹ã€‚æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ¯ä¸ªç¯èŠ‚çš„å…·ä½“å‡½æ•°è°ƒç”¨é“¾ã€æ•°æ®è½¬æ¢è¿‡ç¨‹ä»¥åŠå…³é”®å®ç°ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-3">æ•´ä½“æµç¨‹æ¦‚è§ˆ</h3>
<pre><code class="hljs language-sql" lang="sql">MySQLÂ Binlog<span class="hljs-operator">/</span>SnapshotÂ â†’Â CDCÂ SourceÂ ReaderÂ â†’Â SeaTunnelÂ <span class="hljs-type">Row</span>Â â†’Â ClickHouseÂ SinkÂ WriterÂ â†’Â ClickHouse
</code></pre>
<h3 data-id="heading-4">è¯¦ç»†å‡½æ•°è°ƒç”¨é“¾åˆ†æ</h3>
<h4 data-id="heading-5">ç¬¬ä¸€é˜¶æ®µï¼šä»»åŠ¡å¯åŠ¨ä¸åˆå§‹åŒ–</h4>
<h5 data-id="heading-6">1.1 SeaTunnel ä»»åŠ¡å¯åŠ¨</h5>
<pre><code class="hljs language-scss" lang="scss">SeaTunnel<span class="hljs-selector-class">.run</span>(command)Â â†’Â command<span class="hljs-selector-class">.execute</span>()Â â†’Â TaskExecution<span class="hljs-selector-class">.execute</span>()
</code></pre>
<p><strong>å…¥å£å‡½æ•°</strong>: <code>org.apache.seatunnel.core.starter.SeaTunnel.run()</code></p>
<ul>
<li>â€¢ æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯åŠ¨ SeaTunnel ä»»åŠ¡</li>
<li>â€¢ è°ƒç”¨å…·ä½“çš„æ‰§è¡Œå‘½ä»¤</li>
</ul>
<h5 data-id="heading-7">1.2 Source åˆå§‹åŒ–</h5>
<pre><code class="hljs language-scss" lang="scss">MySqlIncrementalSource<span class="hljs-selector-class">.createReader</span>()Â â†’Â <span class="hljs-built_in">IncrementalSourceReader</span>()Â â†’Â MySqlDialect<span class="hljs-selector-class">.createFetchTaskContext</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>MySqlIncrementalSource.createReader()</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â SourceReaderÂ <span class="hljs-title function_">createReader</span><span class="hljs-params">(SourceReader.ContextÂ context)</span>Â <span class="hljs-keyword">throws</span>Â ExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºå¢é‡æºè¯»å–å™¨</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">IncrementalSourceReader</span>&lt;&gt;(
Â Â Â Â Â Â Â Â dataSourceDialect,
Â Â Â Â Â Â Â Â elementsQueue,
Â Â Â Â Â Â Â Â splitReaderSupplier,
Â Â Â Â Â Â Â Â recordEmitter,
Â Â Â Â Â Â Â Â options,
Â Â Â Â Â Â Â Â context,
Â Â Â Â Â Â Â Â configFactory.create(<span class="hljs-number">0</span>),
Â Â Â Â Â Â Â Â deserializationSchema
Â Â Â Â );
}
</code></pre>
<h5 data-id="heading-8">1.3 Sink åˆå§‹åŒ–</h5>
<pre><code class="hljs language-scss" lang="scss">ClickhouseSink<span class="hljs-selector-class">.createWriter</span>()Â â†’Â <span class="hljs-built_in">ClickhouseSinkWriter</span>()Â â†’Â <span class="hljs-built_in">initStatementMap</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>ClickhouseSink.createWriter()</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â ClickhouseSinkWriterÂ <span class="hljs-title function_">createWriter</span><span class="hljs-params">(SinkWriter.ContextÂ context)</span>Â <span class="hljs-keyword">throws</span>Â IOExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â 1.Â åˆ›å»ºÂ ClickHouseÂ èŠ‚ç‚¹è¿æ¥</span>
Â Â Â Â <span class="hljs-type">List</span>Â <span class="hljs-variable">nodes</span>Â <span class="hljs-operator">=</span>Â ClickhouseUtil.createNodes(readonlyConfig);
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 2.Â åˆ›å»ºä»£ç†è¿æ¥</span>
Â Â Â Â <span class="hljs-type">ClickhouseProxy</span>Â <span class="hljs-variable">proxy</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ClickhouseProxy</span>(nodes.get(<span class="hljs-number">0</span>));
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 3.Â è·å–è¡¨ç»“æ„ä¿¡æ¯</span>
Â Â Â Â <span class="hljs-type">Map</span>Â <span class="hljs-variable">tableSchema</span>Â <span class="hljs-operator">=</span>Â proxy.getClickhouseTableSchema(readonlyConfig.get(TABLE));
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 4.Â åˆ›å»ºåˆ†ç‰‡è·¯ç”±å™¨</span>
Â Â Â Â <span class="hljs-type">ShardRouter</span>Â <span class="hljs-variable">shardRouter</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ShardRouter</span>(proxy,Â option.getShardMetadata());
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 5.Â åˆ›å»ºæ‰¹æ¬¡æ‰§è¡Œå™¨æ˜ å°„</span>
Â Â Â Â <span class="hljs-type">Map</span>Â <span class="hljs-variable">statementMap</span>Â <span class="hljs-operator">=</span>Â initStatementMap();
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ClickhouseSinkWriter</span>(option,Â context);
}
</code></pre>
<h4 data-id="heading-9">ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®åˆ†ç‰‡ä¸åˆ†é…ï¼ˆSource ç«¯ï¼‰</h4>
<h5 data-id="heading-10">2.1 åˆ†ç‰‡åˆ†é…å™¨åˆå§‹åŒ–</h5>
<pre><code class="hljs">IncrementalSourceEnumeratorÂ â†’Â HybridSplitAssignerÂ â†’Â MySqlChunkSplitter
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>HybridSplitAssigner.getNext()</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â OptionalÂ getNext()Â {
Â Â Â Â <span class="hljs-comment">//Â 1.Â é¦–å…ˆåˆ†é…å¿«ç…§åˆ†ç‰‡</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (!snapshotAssigner.isFinished())Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â snapshotAssigner.getNext();
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 2.Â å¿«ç…§å®Œæˆååˆ†é…å¢é‡åˆ†ç‰‡</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (incrementalSplitAssignerÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â incrementalSplitAssigner.getNext();
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â Optional.empty();
}
</code></pre>
<h5 data-id="heading-11">2.2 åˆ†ç‰‡ç®—æ³•å®ç°</h5>
<pre><code class="hljs language-scss" lang="scss">MySqlChunkSplitter<span class="hljs-selector-class">.queryMinMax</span>()Â â†’Â MySqlUtils<span class="hljs-selector-class">.queryMinMax</span>()Â â†’Â <span class="hljs-built_in">buildSplitScanQuery</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>MySqlUtils.queryMinMax()</code></p>
<pre><code class="hljs language-scss" lang="scss">publicÂ staticÂ <span class="hljs-selector-tag">Object</span><span class="hljs-selector-attr">[]</span>Â <span class="hljs-built_in">queryMinMax</span>(JdbcConnectionÂ jdbc,Â TableIdÂ tableId,Â StringÂ columnName)Â throwsÂ SQLExceptionÂ {
Â Â Â Â finalÂ StringÂ minMaxQueryÂ =Â String<span class="hljs-selector-class">.format</span>(
Â Â Â Â Â Â Â Â &amp;#<span class="hljs-number">34</span>;SELECTÂ MIN(%s),Â <span class="hljs-built_in">MAX</span>(%s)Â FROMÂ %s&amp;<span class="hljs-selector-id">#34</span>;,
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">quote</span>(columnName),Â <span class="hljs-selector-tag">quote</span>(columnName),Â <span class="hljs-selector-tag">quote</span>(tableId)
Â Â Â Â );
Â Â Â Â 
Â Â Â Â returnÂ jdbc<span class="hljs-selector-class">.queryAndMap</span>(minMaxQuery,Â rsÂ -&gt;Â {
Â Â Â Â Â Â Â Â ifÂ (!rs.next())Â {
Â Â Â Â Â Â Â Â Â Â Â Â throwÂ newÂ <span class="hljs-built_in">SQLException</span>(String.format(&amp;#<span class="hljs-number">34</span>;NoÂ resultÂ returnedÂ afterÂ runningÂ queryÂ [%s]&amp;#<span class="hljs-number">34</span>;,Â minMaxQuery));
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â returnÂ <span class="hljs-built_in">rowToArray</span>(rs,Â <span class="hljs-number">2</span>);
Â Â Â Â });
}
</code></pre>
<h4 data-id="heading-12">ç¬¬ä¸‰é˜¶æ®µï¼šå…¨é‡æ•°æ®è¯»å–ï¼ˆSource ç«¯ï¼‰</h4>
<h5 data-id="heading-13">3.1 å¿«ç…§ä»»åŠ¡æ‰§è¡Œ</h5>
<pre><code class="hljs language-scss" lang="scss">MySqlSnapshotFetchTask<span class="hljs-selector-class">.execute</span>()Â â†’Â MySqlSnapshotSplitReadTask<span class="hljs-selector-class">.execute</span>()Â â†’Â <span class="hljs-built_in">doExecute</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>MySqlSnapshotSplitReadTask.doExecute()</code></p>
<pre><code class="hljs language-ini" lang="ini">@Override
protectedÂ SnapshotResultÂ doExecute(
Â Â Â Â Â Â Â Â ChangeEventSourceContextÂ context,
Â Â Â Â Â Â Â Â MySqlOffsetContextÂ previousOffset,
Â Â Â Â Â Â Â Â SnapshotContextÂ snapshotContext,
Â Â Â Â Â Â Â Â SnapshottingTaskÂ snapshottingTask)Â throwsÂ ExceptionÂ {
Â Â Â Â 
Â Â Â Â finalÂ MySqlSnapshotContextÂ <span class="hljs-attr">ctx</span>Â =Â (MySqlSnapshotContext)Â snapshotContext<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">ctx.offset</span>Â =Â <span class="hljs-literal">off</span>setContext<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â //Â æ­¥éª¤1ï¼šç¡®å®šä½æ°´ä½æ ‡è®°ï¼ˆå¼€å§‹æ—¶çš„Â binlogÂ ä½ç½®ï¼‰
Â Â Â Â finalÂ BinlogOffsetÂ <span class="hljs-attr">lowWatermark</span>Â =Â currentBinlog<span class="hljs-literal">Off</span>set(jdbcConnection)<span class="hljs-comment">;</span>
Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;SnapshotÂ stepÂ 1Â -Â DeterminingÂ lowÂ watermarkÂ {}Â forÂ splitÂ {}&amp;#34;,Â lowWatermark,Â snapshotSplit);</span>
Â Â Â Â ((SnapshotSplitChangeEventSourceContext)Â context).setLowWatermark(lowWatermark)<span class="hljs-comment">;</span>
Â Â Â Â dispatcher.dispatchWatermarkEvent(
Â Â Â Â Â Â Â Â ctx.partition.getSourcePartition(),Â snapshotSplit,Â lowWatermark,Â WatermarkKind.LOW)<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â //Â æ­¥éª¤2ï¼šå¿«ç…§æ•°æ®
Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;SnapshotÂ stepÂ 2Â -Â SnapshottingÂ data&amp;#34;);</span>
Â Â Â Â createDataEvents(ctx,Â snapshotSplit.getTableId())<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â //Â æ­¥éª¤3ï¼šç¡®å®šé«˜æ°´ä½æ ‡è®°ï¼ˆç»“æŸæ—¶çš„Â binlogÂ ä½ç½®ï¼‰
Â Â Â Â finalÂ BinlogOffsetÂ <span class="hljs-attr">highWatermark</span>Â =Â currentBinlog<span class="hljs-literal">Off</span>set(jdbcConnection)<span class="hljs-comment">;</span>
Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;SnapshotÂ stepÂ 3Â -Â DeterminingÂ highÂ watermarkÂ {}Â forÂ splitÂ {}&amp;#34;,Â highWatermark,Â snapshotSplit);</span>
Â Â Â Â ((SnapshotSplitChangeEventSourceContext)Â context).setHighWatermark(highWatermark)<span class="hljs-comment">;</span>
Â Â Â Â dispatcher.dispatchWatermarkEvent(
Â Â Â Â Â Â Â Â ctx.partition.getSourcePartition(),Â snapshotSplit,Â highWatermark,Â WatermarkKind.HIGH)<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â returnÂ SnapshotResult.completed(ctx.offset)<span class="hljs-comment">;</span>
}
</code></pre>
<h5 data-id="heading-14">3.2 æ•°æ®äº‹ä»¶åˆ›å»º</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">createDataEvents</span>()Â â†’Â <span class="hljs-built_in">createDataEventsForTable</span>()Â â†’Â <span class="hljs-built_in">createDataEventsForTable</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>MySqlSnapshotSplitReadTask.createDataEventsForTable()</code></p>
<pre><code class="hljs language-ini" lang="ini">privateÂ voidÂ createDataEventsForTable(
Â Â Â Â Â Â Â Â MySqlSnapshotContextÂ snapshotContext,
Â Â Â Â Â Â Â Â EventDispatcher.SnapshotReceiverÂ snapshotReceiver,
Â Â Â Â Â Â Â Â TableÂ table)Â throwsÂ InterruptedExceptionÂ {
Â Â Â Â 
Â Â Â Â longÂ <span class="hljs-attr">exportStart</span>Â =Â clock.currentTimeInMillis()<span class="hljs-comment">;</span>
Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;ExportingÂ dataÂ fromÂ splitÂ '{}'Â ofÂ tableÂ {}&amp;#34;,Â snapshotSplit.splitId(),Â table.id());</span>
Â Â Â Â 
Â Â Â Â //Â æ„å»ºåˆ†ç‰‡æŸ¥è¯¢Â SQL
Â Â Â Â finalÂ StringÂ <span class="hljs-attr">selectSql</span>Â =Â buildSplitScanQuery(
Â Â Â Â Â Â Â Â snapshotSplit.getTableId(),
Â Â Â Â Â Â Â Â snapshotSplit.getSplitKeyType(),
Â Â Â Â Â Â Â Â snapshotSplit.getSplitStart()Â ==Â null,
Â Â Â Â Â Â Â Â snapshotSplit.getSplitEnd()Â ==Â null
Â Â Â Â )<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â //Â æ‰§è¡ŒæŸ¥è¯¢å¹¶åˆ›å»ºæ•°æ®äº‹ä»¶
Â Â Â Â tryÂ (PreparedStatementÂ <span class="hljs-attr">statement</span>Â =Â readTableSplitDataStatement(selectSql,Â snapshotSplit)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â ResultSetÂ <span class="hljs-attr">resultSet</span>Â =Â statement.executeQuery())Â {
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â ColumnUtils.ColumnArrayÂ <span class="hljs-attr">columnArray</span>Â =Â ColumnUtils.toArray(table,Â resultSet.getMetaData())<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â longÂ <span class="hljs-attr">rows</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â TimerÂ <span class="hljs-attr">logTimer</span>Â =Â getTableScanLogTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â whileÂ (resultSet.next())Â {
Â Â Â Â Â Â Â Â Â Â Â Â rows++<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â finalÂ Object<span class="hljs-section">[]</span>Â <span class="hljs-attr">row</span>Â =Â newÂ Object[columnArray.getGreatestColumnPosition()]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»Â ResultSetÂ ä¸­æå–æ•°æ®
Â Â Â Â Â Â Â Â Â Â Â Â forÂ (intÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;Â iÂ &lt;Â columnArray.getColumns().length;Â i++)Â {</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ColumnÂ <span class="hljs-attr">column</span>Â =Â columnArray.getColumns()[i]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â intÂ <span class="hljs-attr">position</span>Â =Â columnArray.getColumnPositions()[i]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row<span class="hljs-section">[positionÂ -Â 1]</span>Â =Â readColumnValue(resultSet,Â iÂ +Â 1,Â column)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ›å»ºå¿«ç…§å˜æ›´è®°å½•
Â Â Â Â Â Â Â Â Â Â Â Â SnapshotChangeRecordEmitterÂ <span class="hljs-attr">recordEmitter</span>Â =Â newÂ SnapshotChangeRecordEmitter(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â partition,Â offsetContext,Â table.id(),Â row,Â clock.currentTimeAsInstant()
Â Â Â Â Â Â Â Â Â Â Â Â )<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ†å‘æ•°æ®å˜æ›´äº‹ä»¶
Â Â Â Â Â Â Â Â Â Â Â Â dispatcher.dispatchSnapshotEvent(snapshotContext.partition,Â table.id(),Â recordEmitter)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â å®šæœŸè®°å½•è¿›åº¦
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (logTimer.expired())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;ExportedÂ {}Â recordsÂ forÂ tableÂ '{}'Â fromÂ splitÂ '{}'&amp;#34;,Â rows,Â table.id(),Â snapshotSplit.splitId());</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">logTimer</span>Â =Â getTableScanLogTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â LOG.info(&amp;<span class="hljs-comment">#34;ExportÂ {}Â recordsÂ forÂ tableÂ '{}'Â fromÂ splitÂ '{}'&amp;#34;,Â rows,Â table.id(),Â snapshotSplit.splitId());</span>
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-15">ç¬¬å››é˜¶æ®µï¼šæ•°æ®ååºåˆ—åŒ–è½¬æ¢</h4>
<h5 data-id="heading-16">4.1 Debezium äº‹ä»¶è½¬æ¢</h5>
<pre><code class="hljs language-scss" lang="scss">SeaTunnelRowDebeziumDeserializeSchema<span class="hljs-selector-class">.deserialize</span>()Â â†’Â <span class="hljs-built_in">extractAfterRow</span>()/<span class="hljs-built_in">extractBeforeRow</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>SeaTunnelRowDebeziumDeserializeSchema.deserializeDataChangeRecord()</code></p>
<pre><code class="hljs language-ini" lang="ini">privateÂ voidÂ deserializeDataChangeRecord(SourceRecordÂ record,Â CollectorÂ collector)Â throwsÂ ExceptionÂ {
Â Â Â Â Envelope.OperationÂ <span class="hljs-attr">operation</span>Â =Â Envelope.operationFor(record)<span class="hljs-comment">;</span>
Â Â Â Â StructÂ <span class="hljs-attr">messageStruct</span>Â =Â (Struct)Â record.value()<span class="hljs-comment">;</span>
Â Â Â Â SchemaÂ <span class="hljs-attr">valueSchema</span>Â =Â record.valueSchema()<span class="hljs-comment">;</span>
Â Â Â Â TablePathÂ <span class="hljs-attr">tablePath</span>Â =Â SourceRecordUtils.getTablePath(record)<span class="hljs-comment">;</span>
Â Â Â Â StringÂ <span class="hljs-attr">tableId</span>Â =Â tablePath.toString()<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â //Â è·å–å¯¹åº”è¡¨çš„è½¬æ¢å™¨
Â Â Â Â SeaTunnelRowDebeziumDeserializationConvertersÂ <span class="hljs-attr">converters</span>Â =Â tableRowConverters.get(tableId)<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â LongÂ <span class="hljs-attr">fetchTimestamp</span>Â =Â SourceRecordUtils.getFetchTimestamp(record)<span class="hljs-comment">;</span>
Â Â Â Â LongÂ <span class="hljs-attr">messageTimestamp</span>Â =Â SourceRecordUtils.getMessageTimestamp(record)<span class="hljs-comment">;</span>
Â Â Â Â longÂ <span class="hljs-attr">delay</span>Â =Â -<span class="hljs-number">1</span>L<span class="hljs-comment">;</span>
Â Â Â Â ifÂ (fetchTimestampÂ !=Â nullÂ &amp;&amp;Â messageTimestampÂ !=Â null)Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">delay</span>Â =Â fetchTimestampÂ -Â messageTimestamp<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â ifÂ (<span class="hljs-attr">operation</span>Â ==Â Envelope.Operation.CREATEÂ ||Â operationÂ ==Â Envelope.Operation.READ)Â {
Â Â Â Â Â Â Â Â //Â INSERTÂ æ“ä½œï¼ˆå…¨é‡å¿«ç…§ä¸­çš„æ•°æ®ä¹Ÿæ ‡è®°ä¸ºÂ INSERTï¼‰
Â Â Â Â Â Â Â Â SeaTunnelRowÂ <span class="hljs-attr">insert</span>Â =Â extractAfterRow(converters,Â record,Â messageStruct,Â valueSchema)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â insert.setRowKind(RowKind.INSERT)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â insert.setTableId(tableId)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setDelay(insert,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setEventTime(insert,Â fetchTimestamp)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â collector.collect(insert)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â }Â elseÂ ifÂ (<span class="hljs-attr">operation</span>Â ==Â Envelope.Operation.DELETE)Â {
Â Â Â Â Â Â Â Â //Â DELETEÂ æ“ä½œ
Â Â Â Â Â Â Â Â SeaTunnelRowÂ <span class="hljs-attr">delete</span>Â =Â extractBeforeRow(converters,Â record,Â messageStruct,Â valueSchema)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â delete.setRowKind(RowKind.DELETE)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â delete.setTableId(tableId)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setDelay(delete,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setEventTime(delete,Â fetchTimestamp)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â collector.collect(delete)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â }Â elseÂ ifÂ (<span class="hljs-attr">operation</span>Â ==Â Envelope.Operation.UPDATE)Â {
Â Â Â Â Â Â Â Â //Â UPDATEÂ æ“ä½œï¼ˆç”Ÿæˆä¸¤è¡Œï¼šUPDATE_BEFOREÂ å’ŒÂ UPDATE_AFTERï¼‰
Â Â Â Â Â Â Â Â SeaTunnelRowÂ <span class="hljs-attr">before</span>Â =Â extractBeforeRow(converters,Â record,Â messageStruct,Â valueSchema)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â before.setRowKind(RowKind.UPDATE_BEFORE)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â before.setTableId(tableId)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setDelay(before,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setEventTime(before,Â fetchTimestamp)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â collector.collect(before)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â SeaTunnelRowÂ <span class="hljs-attr">after</span>Â =Â extractAfterRow(converters,Â record,Â messageStruct,Â valueSchema)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â after.setRowKind(RowKind.UPDATE_AFTER)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â after.setTableId(tableId)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setDelay(after,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â MetadataUtil.setEventTime(after,Â fetchTimestamp)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â collector.collect(after)<span class="hljs-comment">;</span>
Â Â Â Â }
}
</code></pre>
<h5 data-id="heading-17">4.2 æ•°æ®ç±»å‹è½¬æ¢</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">extractAfterRow</span>()Â â†’Â converters<span class="hljs-selector-class">.getAfterRowConverter</span>()<span class="hljs-selector-class">.convert</span>()Â â†’Â RowConverter
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>SeaTunnelRowDebeziumDeserializationConverters.extractAfterRow()</code></p>
<pre><code class="hljs language-ini" lang="ini">publicÂ SeaTunnelRowÂ extractAfterRow(SourceRecordÂ record,Â StructÂ value,Â SchemaÂ valueSchema)Â throwsÂ ExceptionÂ {
Â Â Â Â StructÂ <span class="hljs-attr">after</span>Â =Â value.getStruct(Envelope.FieldName.AFTER)<span class="hljs-comment">;</span>
Â Â Â Â SchemaÂ <span class="hljs-attr">afterSchema</span>Â =Â valueSchema.field(Envelope.FieldName.AFTER).schema()<span class="hljs-comment">;</span>
Â Â Â Â 
Â Â Â Â SeaTunnelRowÂ <span class="hljs-attr">row</span>Â =Â newÂ SeaTunnelRow(fieldConverters.length)<span class="hljs-comment">;</span>
Â Â Â Â forÂ (intÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;Â iÂ &lt;Â fieldConverters.length;Â i++)Â {</span>
Â Â Â Â Â Â Â Â StringÂ <span class="hljs-attr">fieldName</span>Â =Â fieldNames[i]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â ObjectÂ <span class="hljs-attr">fieldValue</span>Â =Â after.get(fieldName)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â ObjectÂ <span class="hljs-attr">convertedValue</span>Â =Â fieldConverters[i].convert(fieldValue)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â row.setField(i,Â convertedValue)<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â //Â è®¾ç½®å…ƒæ•°æ®å­—æ®µ
Â Â Â Â forÂ (intÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;Â iÂ &lt;Â metadataConverters.length;Â i++)Â {</span>
Â Â Â Â Â Â Â Â row.setField(fieldConverters.lengthÂ +Â i,Â metadataConverters<span class="hljs-section">[i]</span>.convert(record))<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â returnÂ row<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-18">ç¬¬äº”é˜¶æ®µï¼šæ•°æ®å†™å…¥ ClickHouse</h4>
<h5 data-id="heading-19">5.1 Sink Writer æ¥æ”¶æ•°æ®</h5>
<pre><code class="hljs language-scss" lang="scss">ClickhouseSinkWriter<span class="hljs-selector-class">.write</span>()Â â†’Â shardRouter<span class="hljs-selector-class">.getShard</span>()Â â†’Â <span class="hljs-built_in">addIntoBatch</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>ClickhouseSinkWriter.write()</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
publicÂ voidÂ write(SeaTunnelRowÂ element)Â throwsÂ IOExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â 1.Â ç¡®å®šåˆ†ç‰‡é”®å€¼</span>
Â Â Â Â <span class="hljs-selector-tag">Object</span>Â shardKeyÂ =Â null;
Â Â Â Â ifÂ (StringUtils.isNotEmpty(this.option.getShardMetadata()<span class="hljs-selector-class">.getShardKey</span>()))Â {
Â Â Â Â Â Â Â Â intÂ <span class="hljs-selector-tag">i</span>Â =Â this<span class="hljs-selector-class">.option</span><span class="hljs-selector-class">.getSeaTunnelRowType</span>()<span class="hljs-selector-class">.indexOf</span>(this.option.getShardMetadata()<span class="hljs-selector-class">.getShardKey</span>());
Â Â Â Â Â Â Â Â shardKeyÂ =Â element<span class="hljs-selector-class">.getField</span>(i);
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 2.Â è·¯ç”±åˆ°ç›®æ ‡åˆ†ç‰‡</span>
Â Â Â Â ClickhouseBatchStatementÂ statementÂ =Â statementMap<span class="hljs-selector-class">.get</span>(shardRouter.getShard(shardKey));
Â Â Â Â JdbcBatchStatementExecutorÂ clickHouseStatementÂ =Â statement<span class="hljs-selector-class">.getJdbcBatchStatementExecutor</span>();
Â Â Â Â IntHolderÂ sizeHolderÂ =Â statement<span class="hljs-selector-class">.getIntHolder</span>();
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 3.Â æ·»åŠ åˆ°æ‰¹æ¬¡</span>
Â Â Â Â <span class="hljs-built_in">addIntoBatch</span>(element,Â clickHouseStatement);
Â Â Â Â sizeHolder<span class="hljs-selector-class">.setValue</span>(sizeHolder.getValue()Â +Â <span class="hljs-number">1</span>);
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â 4.Â æ‰¹é‡åˆ·æ–°</span>
Â Â Â Â ifÂ (sizeHolder.getValue()Â &gt;=Â option<span class="hljs-selector-class">.getBulkSize</span>())Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">flush</span>(clickHouseStatement);
Â Â Â Â Â Â Â Â sizeHolder<span class="hljs-selector-class">.setValue</span>(<span class="hljs-number">0</span>);
Â Â Â Â }
}
</code></pre>
<h5 data-id="heading-20">5.2 åˆ†ç‰‡è·¯ç”±ç®—æ³•</h5>
<pre><code class="hljs language-scss" lang="scss">ShardRouter<span class="hljs-selector-class">.getShard</span>()Â â†’Â HASH_INSTANCE<span class="hljs-selector-class">.hash</span>()Â â†’Â TreeMap<span class="hljs-selector-class">.lowerEntry</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>ShardRouter.getShard()</code></p>
<pre><code class="hljs language-scss" lang="scss">publicÂ ShardÂ <span class="hljs-built_in">getShard</span>(ObjectÂ shardValue)Â {
Â Â Â Â ifÂ (!splitMode)Â {
Â Â Â Â Â Â Â Â returnÂ shards<span class="hljs-selector-class">.firstEntry</span>()<span class="hljs-selector-class">.getValue</span>();
Â Â Â Â }
Â Â Â Â 
Â Â Â Â ifÂ (StringUtils.isEmpty(shardKey)Â ||Â shardValueÂ ==Â null)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ²¡æœ‰åˆ†ç‰‡é”®æ—¶éšæœºé€‰æ‹©</span>
Â Â Â Â Â Â Â Â returnÂ shards<span class="hljs-selector-class">.lowerEntry</span>(threadLocalRandom.nextInt(shardWeightCount)Â +Â <span class="hljs-number">1</span>)<span class="hljs-selector-class">.getValue</span>();
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨Â XXHash64Â è¿›è¡Œä¸€è‡´æ€§å“ˆå¸Œ</span>
Â Â Â Â intÂ offsetÂ =Â (int)Â ((HASH_INSTANCE.hash(
Â Â Â Â Â Â Â Â ByteBuffer.wrap(shardValue.toString()<span class="hljs-selector-class">.getBytes</span>(StandardCharsets.UTF_8)),Â <span class="hljs-number">0</span>)Â &amp;Â Long<span class="hljs-selector-class">.MAX_VALUE</span>)
Â Â Â Â Â Â Â Â %Â shardWeightCount);
Â Â Â Â 
Â Â Â Â returnÂ shards<span class="hljs-selector-class">.lowerEntry</span>(offsetÂ +Â <span class="hljs-number">1</span>)<span class="hljs-selector-class">.getValue</span>();
}
</code></pre>
<h5 data-id="heading-21">5.3 æ‰¹é‡æ‰§è¡Œå™¨å¤„ç†</h5>
<pre><code class="hljs language-scss" lang="scss">JdbcBatchStatementExecutorBuilder<span class="hljs-selector-class">.build</span>()Â â†’Â SimpleBatchStatementExecutorÂ â†’Â <span class="hljs-built_in">executeBatch</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>SimpleBatchStatementExecutor.executeBatch()</code></p>
<pre><code class="hljs language-csharp" lang="csharp">@Override
<span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">executeBatch</span>()Â throwsÂ SQLException</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (batchCountÂ &gt;Â <span class="hljs-number">0</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ‰§è¡Œæ‰¹é‡æ’å…¥</span>
Â Â Â Â Â Â Â Â Â Â Â Â statement.executeBatch();
Â Â Â Â Â Â Â Â Â Â Â Â connection.commit();
Â Â Â Â Â Â Â Â Â Â Â Â batchCountÂ =Â <span class="hljs-number">0</span>;
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (SQLExceptionÂ e)Â {
Â Â Â Â Â Â Â Â Â Â Â Â connection.rollback();
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â ClickhouseConnectorException(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â CommonErrorCodeDeprecated.FLUSH_DATA_FAILED,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-meta">#34;ClickhouseÂ executeÂ batchÂ statementÂ <span class="hljs-keyword">error</span>&amp;#34;,</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â e
Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h5 data-id="heading-22">5.4 æ•°æ®ç±»å‹æ³¨å…¥</h5>
<pre><code class="hljs language-scss" lang="scss">JdbcRowConverter<span class="hljs-selector-class">.toExternal</span>()Â â†’Â fieldInjectFunctionMap<span class="hljs-selector-class">.get</span>()<span class="hljs-selector-class">.injectFields</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>JdbcRowConverter.toExternal()</code></p>
<pre><code class="hljs language-ini" lang="ini">publicÂ PreparedStatementÂ toExternal(SeaTunnelRowÂ row,Â PreparedStatementÂ statement)Â throwsÂ SQLExceptionÂ {
Â Â Â Â forÂ (intÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">;Â iÂ &lt;Â projectionFields.length;Â i++)Â {</span>
Â Â Â Â Â Â Â Â StringÂ <span class="hljs-attr">fieldName</span>Â =Â projectionFields[i]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â ObjectÂ <span class="hljs-attr">fieldValue</span>Â =Â fieldGetterMap.get(fieldName).apply(row)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â ifÂ (<span class="hljs-attr">fieldValue</span>Â ==Â null)Â {
Â Â Â Â Â Â Â Â Â Â Â Â statement.setObject(iÂ +Â 1,Â null)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â Â Â continue<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â //Â ä½¿ç”¨å¯¹åº”çš„æ³¨å…¥å‡½æ•°å¤„ç†å­—æ®µå€¼
Â Â Â Â Â Â Â Â fieldInjectFunctionMap
Â Â Â Â Â Â Â Â Â Â Â Â .getOrDefault(fieldName,Â DEFAULT_INJECT_FUNCTION)
Â Â Â Â Â Â Â Â Â Â Â Â .injectFields(statement,Â iÂ +Â 1,Â fieldValue)<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â Â Â returnÂ statement<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-23">ç¬¬å…­é˜¶æ®µï¼šå¢é‡é˜¶æ®µåˆ‡æ¢</h4>
<h5 data-id="heading-24">6.1 å¿«ç…§å®Œæˆæ£€æµ‹</h5>
<pre><code class="hljs language-scss" lang="scss">IncrementalSourceReader<span class="hljs-selector-class">.onSplitFinished</span>()Â â†’Â <span class="hljs-built_in">reportFinishedSnapshotSplitsIfNeed</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>IncrementalSourceReader.onSplitFinished()</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
protectedÂ voidÂ onSplitFinished(MapÂ finishedSplitIds)Â {
Â Â Â Â forÂ (SourceSplitStateBaseÂ splitStateÂ :Â finishedSplitIds.values())Â {
Â Â Â Â Â Â Â Â SourceSplitBaseÂ sourceSplitÂ =Â splitState<span class="hljs-selector-class">.toSourceSplit</span>();
Â Â Â Â Â Â Â Â <span class="hljs-built_in">checkState</span>(
Â Â Â Â Â Â Â Â Â Â Â Â sourceSplit.isSnapshotSplit()Â &amp;&amp;Â sourceSplit<span class="hljs-selector-class">.asSnapshotSplit</span>()<span class="hljs-selector-class">.isSnapshotReadFinished</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â String<span class="hljs-selector-class">.format</span>(&amp;#<span class="hljs-number">34</span>;OnlyÂ snapshotÂ splitÂ couldÂ finish,Â butÂ theÂ actualÂ splitÂ isÂ incrementalÂ splitÂ %s&amp;#<span class="hljs-number">34</span>;,Â sourceSplit)
Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â finishedUnackedSplits<span class="hljs-selector-class">.put</span>(sourceSplit.splitId(),Â sourceSplit<span class="hljs-selector-class">.asSnapshotSplit</span>());
Â Â Â Â }
Â Â Â Â <span class="hljs-built_in">reportFinishedSnapshotSplitsIfNeed</span>();
Â Â Â Â context<span class="hljs-selector-class">.sendSplitRequest</span>();Â <span class="hljs-comment">//Â è¯·æ±‚ä¸‹ä¸€ä¸ªåˆ†ç‰‡</span>
}
</code></pre>
<h5 data-id="heading-25">6.2 å¢é‡åˆ†ç‰‡åˆ†é…</h5>
<pre><code class="hljs language-scss" lang="scss">HybridSplitAssigner<span class="hljs-selector-class">.getNext</span>()Â â†’Â incrementalSplitAssigner<span class="hljs-selector-class">.getNext</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>IncrementalSplitAssigner.getNext()</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
publicÂ OptionalÂ getNext()Â {
Â Â Â Â ifÂ (remainingTables.isEmpty())Â {
Â Â Â Â Â Â Â Â returnÂ Optional<span class="hljs-selector-class">.empty</span>();
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ä¸ºæ¯ä¸ªè¡¨åˆ›å»ºä¸€ä¸ªå¢é‡åˆ†ç‰‡</span>
Â Â Â Â TableIdÂ tableIdÂ =Â remainingTables<span class="hljs-selector-class">.iterator</span>()<span class="hljs-selector-class">.next</span>();
Â Â Â Â remainingTables<span class="hljs-selector-class">.remove</span>(tableId);
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºå¢é‡åˆ†ç‰‡ï¼Œä»å¿«ç…§çš„é«˜æ°´ä½æ ‡è®°å¼€å§‹</span>
Â Â Â Â IncrementalSplitÂ splitÂ =Â newÂ <span class="hljs-built_in">IncrementalSplit</span>(
Â Â Â Â Â Â Â Â tableId.toString(),
Â Â Â Â Â Â Â Â Collections<span class="hljs-selector-class">.singletonList</span>(tableId),
Â Â Â Â Â Â Â Â completedSnapshotSplitWatermarks<span class="hljs-selector-class">.get</span>(tableId)<span class="hljs-selector-class">.getHighWatermark</span>(),
Â Â Â Â Â Â Â Â stopOffset,
Â Â Â Â Â Â Â Â Collections<span class="hljs-selector-class">.emptyList</span>()
Â Â Â Â );
Â Â Â Â 
Â Â Â Â returnÂ Optional<span class="hljs-selector-class">.of</span>(split);
}
</code></pre>
<h5 data-id="heading-26">6.3 Binlog äº‹ä»¶å¤„ç†</h5>
<pre><code class="hljs language-scss" lang="scss">MySqlBinlogFetchTask<span class="hljs-selector-class">.execute</span>()Â â†’Â MySqlStreamingChangeEventSource<span class="hljs-selector-class">.execute</span>()Â â†’Â <span class="hljs-built_in">handleEvent</span>()
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>: <code>MySqlBinlogFetchTask.MySqlBinlogSplitReadTask.handleEvent()</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
protectedÂ voidÂ handleEvent(MySqlPartitionÂ partition,Â MySqlOffsetContextÂ offsetContext,Â EventÂ event)Â {
Â Â Â Â super<span class="hljs-selector-class">.handleEvent</span>(partition,Â offsetContext,Â event);
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ£€æŸ¥æ˜¯å¦éœ€è¦åœæ­¢ï¼ˆæœ‰ç•Œè¯»å–ï¼‰</span>
Â Â Â Â ifÂ (isBoundedRead())Â {
Â Â Â Â Â Â Â Â finalÂ BinlogOffsetÂ currentBinlogOffsetÂ =Â <span class="hljs-built_in">getBinlogPosition</span>(offsetContext.getOffset());
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¾¾åˆ°é«˜æ°´ä½æ ‡è®°ï¼Œç»“æŸÂ binlogÂ è¯»å–</span>
Â Â Â Â Â Â Â Â ifÂ (currentBinlogOffset.isAtOrAfter(binlogSplit.getStopOffset()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å‘é€Â binlogÂ ç»“æŸäº‹ä»¶</span>
Â Â Â Â Â Â Â Â Â Â Â Â dispatcher<span class="hljs-selector-class">.dispatchWatermarkEvent</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â partition.getSourcePartition(),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â binlogSplit,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentBinlogOffset,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â WatermarkKind<span class="hljs-selector-class">.END</span>
Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é€šçŸ¥è¯»å–å™¨ä»»åŠ¡å®Œæˆ</span>
Â Â Â Â Â Â Â Â Â Â Â Â ((MySqlSnapshotFetchTask.SnapshotBinlogSplitChangeEventSourceContext)Â context)<span class="hljs-selector-class">.finished</span>();
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-27">å…³é”®æ•°æ®è½¬æ¢è¿‡ç¨‹</h3>
<h4 data-id="heading-28">1. MySQL æ•°æ®ç±»å‹åˆ° SeaTunnel ç±»å‹çš„è½¬æ¢</h4>
<p><strong>è½¬æ¢å™¨</strong>: <code>MySqlTypeUtils.convertFromColumn()</code></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â SeaTunnelDataTypeÂ <span class="hljs-title">convertFromColumn</span>(<span class="hljs-params">ColumnÂ column,Â RelationalDatabaseConnectorConfigÂ config</span>)</span>Â {
Â Â Â Â StringÂ mysqlTypeÂ =Â column.typeName().toUpperCase();
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">switch</span>Â (mysqlType)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;INT&amp;#34;:</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;INTEGER&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â BasicType.INT_TYPE;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;BIGINT&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â BasicType.LONG_TYPE;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;VARCHAR&amp;#34;:</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;TEXT&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â BasicType.STRING_TYPE;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;DATETIME&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â LocalTimeType.LOCAL_DATE_TIME_TYPE;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;TIMESTAMP&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â LocalTimeType.LOCAL_DATE_TIME_TYPE;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;DECIMAL&amp;#34;:</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">case</span>Â &amp;<span class="hljs-meta">#34;NUMERIC&amp;#34;:</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â DecimalType(column.length(),Â column.scale());
Â Â Â Â Â Â Â Â <span class="hljs-literal">default</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â BasicType.STRING_TYPE;
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-29">2. SeaTunnel ç±»å‹åˆ° ClickHouse ç±»å‹çš„è½¬æ¢</h4>
<p><strong>è½¬æ¢å™¨</strong>: <code>JdbcRowConverter.createFieldInjectFunctionMap()</code></p>
<pre><code class="hljs language-scss" lang="scss">privateÂ MapÂ <span class="hljs-built_in">createFieldInjectFunctionMap</span>(
Â Â Â Â Â Â Â Â String[]Â fields,Â MapÂ clickhouseTableSchema)Â {
Â Â Â Â MapÂ fieldInjectFunctionMapÂ =Â newÂ HashMap&lt;&gt;();
Â Â Â Â 
Â Â Â Â forÂ (StringÂ fieldÂ :Â fields)Â {
Â Â Â Â Â Â Â Â StringÂ fieldTypeÂ =Â clickhouseTableSchema<span class="hljs-selector-class">.get</span>(field);
Â Â Â Â Â Â Â Â ClickhouseFieldInjectFunctionÂ injectFunctionÂ =Â Arrays<span class="hljs-selector-class">.asList</span>(
Â Â Â Â Â Â Â Â Â Â Â Â newÂ ArrayInjectFunction(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">MapInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">BigDecimalInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">DateTimeInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">LongInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">DoubleInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">IntInjectFunction</span>(),
Â Â Â Â Â Â Â Â Â Â Â Â newÂ <span class="hljs-built_in">StringInjectFunction</span>()
Â Â Â Â Â Â Â Â )<span class="hljs-selector-class">.stream</span>()
Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.filter</span>(fÂ -&gt;Â f.isCurrentFieldType(unwrapCommonPrefix(fieldType)))
Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.findFirst</span>()
Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.orElse</span>(newÂ StringInjectFunction());
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â fieldInjectFunctionMap<span class="hljs-selector-class">.put</span>(field,Â injectFunction);
Â Â Â Â }
Â Â Â Â returnÂ fieldInjectFunctionMap;
}
</code></pre>
<h4 data-id="heading-30">3. æ•°æ®è¡Œè½¬æ¢æµç¨‹</h4>
<pre><code class="hljs">MySQLÂ ResultSetÂ â†’Â DebeziumÂ SourceRecordÂ â†’Â SeaTunnelRowÂ â†’Â ClickHouseÂ PreparedStatement
</code></pre>
<p><strong>å®Œæ•´è½¬æ¢é“¾</strong>:</p>
<ol>
<li>1. <strong>MySQL ResultSet</strong>: ä»æ•°æ®åº“æŸ¥è¯¢ç»“æœ</li>
<li>2. <strong>Debezium SourceRecord</strong>: Debezium æ ¼å¼çš„äº‹ä»¶è®°å½•</li>
<li>3. <strong>SeaTunnelRow</strong>: SeaTunnel ç»Ÿä¸€çš„æ•°æ®æ ¼å¼</li>
<li>4. <strong>ClickHouse PreparedStatement</strong>: æœ€ç»ˆå†™å…¥ ClickHouse çš„è¯­å¥</li>
</ol>
<h3 data-id="heading-31">ç²¾ç¡®ä¸€æ¬¡å¤„ç†å®ç°</h3>
<h4 data-id="heading-32">1. æ°´ä½æ ‡è®°æœºåˆ¶</h4>
<p><strong>ä½æ°´ä½æ ‡è®°</strong>: å¿«ç…§å¼€å§‹æ—¶çš„ binlog ä½ç½®<br/>
<strong>é«˜æ°´ä½æ ‡è®°</strong>: å¿«ç…§ç»“æŸæ—¶çš„ binlog ä½ç½®</p>
<pre><code class="hljs language-ini" lang="ini">//Â ä½æ°´ä½æ ‡è®°
finalÂ BinlogOffsetÂ <span class="hljs-attr">lowWatermark</span>Â =Â currentBinlog<span class="hljs-literal">Off</span>set(jdbcConnection)<span class="hljs-comment">;</span>
dispatcher.dispatchWatermarkEvent(partition,Â snapshotSplit,Â lowWatermark,Â WatermarkKind.LOW)<span class="hljs-comment">;</span>

//Â æ•°æ®å¿«ç…§
createDataEvents(ctx,Â snapshotSplit.getTableId())<span class="hljs-comment">;</span>

//Â é«˜æ°´ä½æ ‡è®°
finalÂ BinlogOffsetÂ <span class="hljs-attr">highWatermark</span>Â =Â currentBinlog<span class="hljs-literal">Off</span>set(jdbcConnection)<span class="hljs-comment">;</span>
dispatcher.dispatchWatermarkEvent(partition,Â snapshotSplit,Â highWatermark,Â WatermarkKind.HIGH)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-33">2. å¢é‡è¡¥å¿æœºåˆ¶</h4>
<p>å½“ <code>lowWatermark != highWatermark</code> æ—¶ï¼Œéœ€è¦è¿›è¡Œå¢é‡è¡¥å¿ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åˆ›å»ºè¡¥å¿å¢é‡åˆ†ç‰‡</span>
IncrementalSplitÂ backfillSplitÂ =Â newÂ <span class="hljs-built_in">IncrementalSplit</span>(
Â Â Â Â splitId,
Â Â Â Â Collections.singletonList(tableId),
Â Â Â Â lowWatermark,Â Â Â Â <span class="hljs-comment">//Â ä»ä½æ°´ä½å¼€å§‹</span>
Â Â Â Â highWatermark,Â Â Â <span class="hljs-comment">//Â åˆ°é«˜æ°´ä½ç»“æŸ</span>
Â Â Â Â newÂ ArrayList&lt;&gt;()
);

<span class="hljs-comment">//Â æ‰§è¡Œè¡¥å¿è¯»å–</span>
MySqlBinlogSplitReadTaskÂ backfillTaskÂ =Â newÂ <span class="hljs-built_in">MySqlBinlogSplitReadTask</span>(...);
backfillTask<span class="hljs-selector-class">.execute</span>(context,Â partition,Â offsetContext);
</code></pre>
<h4 data-id="heading-34">3. åç§»é‡åŸå­æ€§</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">notifyCheckpointComplete</span><span class="hljs-params">(<span class="hljs-type">long</span>Â checkpointId)</span>Â <span class="hljs-keyword">throws</span>Â ExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â åœ¨æ£€æŸ¥ç‚¹å®Œæˆæ—¶æäº¤å˜æ›´æ—¥å¿—åç§»é‡</span>
Â Â Â Â dataSourceDialect.commitChangeLogOffset(snapshotChangeLogOffset);
}
</code></pre>
<h3 data-id="heading-35">æ€§èƒ½ä¼˜åŒ–ç‚¹</h3>
<h4 data-id="heading-36">1. å¹¶è¡Œåº¦æ§åˆ¶</h4>
<ul>
<li>â€¢ <strong>å¿«ç…§é˜¶æ®µ</strong>: å¤šåˆ†ç‰‡å¹¶è¡Œè¯»å–ï¼Œæé«˜å…¨é‡æ•°æ®è¯»å–æ•ˆç‡</li>
<li>â€¢ <strong>å¢é‡é˜¶æ®µ</strong>: å•çº¿ç¨‹é¡ºåºå¤„ç†ï¼Œä¿è¯äº‹ä»¶é¡ºåºæ€§</li>
</ul>
<h4 data-id="heading-37">2. æ‰¹é‡å¤„ç†</h4>
<ul>
<li>â€¢ <strong>æ‰¹æ¬¡å¤§å°</strong>: å¯é…ç½®çš„ <code>bulk_size</code> å‚æ•°ï¼ˆé»˜è®¤ 20000ï¼‰</li>
<li>â€¢ <strong>æ‰¹é‡æäº¤</strong>: å‡å°‘ç½‘ç»œå¾€è¿”å’Œäº‹åŠ¡å¼€é”€</li>
</ul>
<h4 data-id="heading-38">3. å†…å­˜ç®¡ç†</h4>
<ul>
<li>â€¢ <strong>æµå¼å¤„ç†</strong>: é¿å…å¤§é‡æ•°æ®é©»ç•™å†…å­˜</li>
<li>â€¢ <strong>è¿æ¥æ± </strong>: å¤ç”¨æ•°æ®åº“è¿æ¥ï¼Œå‡å°‘è¿æ¥åˆ›å»ºå¼€é”€</li>
</ul>
<h3 data-id="heading-39">é”™è¯¯å¤„ç†ä¸å®¹é”™</h3>
<h4 data-id="heading-40">1. è¿æ¥å¼‚å¸¸å¤„ç†</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>Â {
Â Â Â Â statement.executeBatch();
Â Â Â Â connection.commit();
}Â <span class="hljs-keyword">catch</span>Â (SQLExceptionÂ e)Â {
Â Â Â Â connection.rollback();
Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â ClickhouseConnectorException(
Â Â Â Â Â Â Â Â CommonErrorCodeDeprecated.FLUSH_DATA_FAILED,
Â Â Â Â Â Â Â Â &amp;<span class="hljs-meta">#34;ClickhouseÂ executeÂ batchÂ statementÂ <span class="hljs-keyword">error</span>&amp;#34;,</span>
Â Â Â Â Â Â Â Â e
Â Â Â Â );
}
</code></pre>
<h4 data-id="heading-41">2. æ•°æ®ç±»å‹ä¸åŒ¹é…å¤„ç†</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä½¿ç”¨é»˜è®¤è½¬æ¢å™¨å¤„ç†æœªçŸ¥ç±»å‹</span>
fieldInjectFunctionMap
Â Â Â Â <span class="hljs-selector-class">.getOrDefault</span>(fieldName,Â DEFAULT_INJECT_FUNCTION)
Â Â Â Â <span class="hljs-selector-class">.injectFields</span>(statement,Â iÂ +Â <span class="hljs-number">1</span>,Â fieldValue);
</code></pre>
<h4 data-id="heading-42">3. é‡è¯•æœºåˆ¶</h4>
<ul>
<li>â€¢ <strong>è¿æ¥é‡è¯•</strong>: æ”¯æŒé…ç½® <code>connect.max-retries</code> å‚æ•°</li>
<li>â€¢ <strong>è‡ªåŠ¨é‡è¿</strong>: æ•°æ®åº“è¿æ¥æ–­å¼€åè‡ªåŠ¨é‡è¿</li>
</ul>
<h3 data-id="heading-43">ç›‘æ§ä¸æŒ‡æ ‡</h3>
<h4 data-id="heading-44">1. CDC æŒ‡æ ‡</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//Â è®°å½•è·å–å»¶è¿Ÿ</span>
<span class="hljs-selector-tag">recordFetchDelay</span><span class="hljs-selector-class">.set</span>(fetchDelayÂ &gt;Â <span class="hljs-number">0</span>Â ?Â <span class="hljs-attribute">fetchDelayÂ </span>:Â <span class="hljs-number">0</span>);

<span class="hljs-comment">//Â è®°å½•å‘é€å»¶è¿Ÿ</span>
<span class="hljs-selector-tag">recordEmitDelay</span><span class="hljs-selector-class">.set</span>(emitDelayÂ &gt;Â <span class="hljs-number">0</span>Â ?Â <span class="hljs-attribute">emitDelayÂ </span>:Â <span class="hljs-number">0</span>);

<span class="hljs-comment">//Â å»¶è¿Ÿäº‹ä»¶ç›‘æ§</span>
<span class="hljs-selector-tag">if</span>Â (delayedEventLimiter.<span class="hljs-built_in">acquire</span>(messageTimestamp))Â {
Â Â Â Â <span class="hljs-selector-tag">eventListener</span><span class="hljs-selector-class">.onEvent</span>(newÂ <span class="hljs-built_in">MessageDelayedEvent</span>(emitDelay,Â element.<span class="hljs-built_in">toString</span>()));
}
</code></pre>
<h4 data-id="heading-45">2. ClickHouse æŒ‡æ ‡</h4>
<ul>
<li>â€¢ <strong>æ‰¹æ¬¡å¤§å°</strong>: å½“å‰æ‰¹æ¬¡ä¸­çš„è®°å½•æ•°</li>
<li>â€¢ <strong>å†™å…¥å»¶è¿Ÿ</strong>: æ•°æ®å†™å…¥ ClickHouse çš„è€—æ—¶</li>
<li>â€¢ <strong>é”™è¯¯ç‡</strong>: å†™å…¥å¤±è´¥çš„æ¯”ä¾‹</li>
</ul>
<h3 data-id="heading-46">æ€»ç»“</h3>
<p>æ•´ä¸ª MySQL CDC åˆ° ClickHouse çš„æ•°æ®æµè½¬è¿‡ç¨‹æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡ã€é«˜åº¦ä¼˜åŒ–çš„æµæ°´çº¿ï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-47">1. <strong>å…¨é“¾è·¯æ•°æ®ä¸€è‡´æ€§</strong></h4>
<ul>
<li>â€¢ é€šè¿‡æ°´ä½æ ‡è®°å’Œè¡¥å¿æœºåˆ¶ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</li>
<li>â€¢ æ”¯æŒç²¾ç¡®ä¸€æ¬¡å¤„ç†è¯­ä¹‰</li>
<li>â€¢ è‡ªåŠ¨å¤„ç†å¿«ç…§æœŸé—´çš„å˜æ›´æ•°æ®</li>
</ul>
<h4 data-id="heading-48">2. <strong>é«˜æ€§èƒ½å¹¶è¡Œå¤„ç†</strong></h4>
<ul>
<li>â€¢ å¿«ç…§é˜¶æ®µæ”¯æŒå¤šåˆ†ç‰‡å¹¶è¡Œè¯»å–</li>
<li>â€¢ æ‰¹é‡å†™å…¥ ClickHouse å‡å°‘ç½‘ç»œå¼€é”€</li>
<li>â€¢ æ™ºèƒ½åˆ†ç‰‡è·¯ç”±å®ç°è´Ÿè½½å‡è¡¡</li>
</ul>
<h4 data-id="heading-49">3. <strong>çµæ´»çš„æ•°æ®è½¬æ¢</strong></h4>
<ul>
<li>â€¢ æ”¯æŒå¤æ‚çš„æ•°æ®ç±»å‹æ˜ å°„</li>
<li>â€¢ è‡ªåŠ¨å¤„ç† DDL ç»“æ„å˜æ›´</li>
<li>â€¢ æä¾›ä¸°å¯Œçš„å…ƒæ•°æ®ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-50">4. <strong>ä¼ä¸šçº§å¯é æ€§</strong></h4>
<ul>
<li>â€¢ å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</li>
<li>â€¢ æ”¯æŒæ•…éšœæ¢å¤å’Œæ–­ç‚¹ç»­ä¼ </li>
<li>â€¢ æä¾›è¯¦ç»†çš„ç›‘æ§æŒ‡æ ‡</li>
</ul>
<h4 data-id="heading-51">5. <strong>ä¼˜åŒ–ç­–ç•¥</strong></h4>
<ul>
<li>â€¢ æµå¼å¤„ç†é¿å…å†…å­˜æº¢å‡º</li>
<li>â€¢ è¿æ¥æ± å¤ç”¨å‡å°‘èµ„æºæ¶ˆè€—</li>
<li>â€¢ æ™ºèƒ½æ‰¹æ¬¡ç®¡ç†å¹³è¡¡æ€§èƒ½å’Œå»¶è¿Ÿ</li>
</ul>
<p>è¿™ä¸ªæ¶æ„è®¾è®¡ä½¿å¾— SeaTunnel èƒ½å¤Ÿé«˜æ•ˆã€å¯é åœ°å°† MySQL çš„å˜æ›´æ•°æ®å®æ—¶åŒæ­¥åˆ° ClickHouseï¼Œä¸ºå®æ—¶åˆ†ææä¾›å¼ºæœ‰åŠ›çš„æ•°æ®æ”¯æ’‘ã€‚</p>
<p>.preview-wrapper pre::before { position: absolute; top: 0; right: 0; color: #ccc; text-align: center; font-size: 0.8em; padding: 5px 10px 0; line-height: 15px; height: 15px; font-weight: 600; } .hljs.code__pre &gt; .mac-sign { display: flex; } .code__pre { padding: 0 !important; } .hljs.code__pre code { display: -webkit-box; padding: 0.5em 1em 1em; overflow-x: auto; text-indent: 0; } h2 strong { color: inherit !important; }</p>
<blockquote>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://juejin.cn/post/6940875049587097631" target="_blank" title="https://juejin.cn/post/6940875049587097631">æ–‡ç« åŒæ­¥åŠ©æ‰‹</a> åŒæ­¥</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ å¼€æºç¤¾åŒºåœ¨ WebAIGC æŠ€æœ¯è¿­ä»£ä¸­çš„æ¨åŠ¨ä½œç”¨ä¸äº‰è®®]]></title>    <link>https://juejin.cn/post/7582066556089319487</link>    <guid>https://juejin.cn/post/7582066556089319487</guid>    <pubDate>2025-12-11T02:08:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582066556089319487" data-draft-id="7582118538561568787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ğŸŒ å¼€æºç¤¾åŒºåœ¨ WebAIGC æŠ€æœ¯è¿­ä»£ä¸­çš„æ¨åŠ¨ä½œç”¨ä¸äº‰è®®"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-12-11T02:08:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ğŸŒ å¼€æºç¤¾åŒºåœ¨ WebAIGC æŠ€æœ¯è¿­ä»£ä¸­çš„æ¨åŠ¨ä½œç”¨ä¸äº‰è®®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:08:46.000Z" title="Thu Dec 11 2025 02:08:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä» <code>Hello World</code> åˆ° â€œHello, WebAIï¼â€</h2>
<p>åœ¨ WebAIGC ç«çˆ†ä¹‹å‰ï¼ŒWeb ä¸–ç•Œä¸€ç›´æ˜¯å‰åç«¯åˆ†æ²»ã€æ¥å£è°ƒç”¨ã€æ¸²æŸ“äº¤äº’çš„â€œä¼ ç»Ÿæ‰‹å·¥è‰ºå‚â€ã€‚ç›´åˆ°æŸå¤©ï¼ŒAI è¢«å¡è¿›äº†æµè§ˆå™¨é‡Œï¼Œ<strong>ä»£ç å¼€å§‹è‡ªå·±å†™é¡µé¢ã€ç”Ÿæˆå†…å®¹ã€ç”šè‡³è‡ªæˆ‘ä¼˜åŒ–</strong>ã€‚</p>
<p>è€Œæ¨åŠ¨è¿™ä¸€åˆ‡çš„ï¼Œæ°æ°ä¸æ˜¯æŸå®¶é—­æºå·¨å¤´çš„ç§æœ‰å®éªŒå®¤ï¼Œè€Œæ˜¯ä¸€ç¾¤åˆ†æ•£åœ¨ä¸–ç•Œå„åœ°ã€è¿å¤´åƒéƒ½æ²¡æ¢è¿‡çš„å¼€æºå¼€å‘è€…ã€‚</p>
<blockquote>
<p>ä»–ä»¬å¯èƒ½åœ¨å‡Œæ™¨3ç‚¹ä¸€æ‹è„‘è¢‹æäº¤ä¸€ä¸ª PRï¼Œç¬¬äºŒå¤©å…¨ä¸–ç•Œçš„ WebAIGC å·¥ç¨‹å¸ˆéƒ½åœ¨ç”¨ã€‚<br/>
â€”â€”â€œè¿™æ˜¯å¼€æºçš„é­…åŠ›ï¼Œä¹Ÿæ˜¯å¼€æºçš„æ··ä¹±ã€‚â€ ğŸ˜</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯è¿­ä»£çš„â€œæ¶¡è½®å¢å‹â€ï¼šå¼€æºåŠ›é‡çš„åº•å±‚é€»è¾‘ âš™ï¸</h2>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆå¼€æºç¤¾åŒºåœ¨ WebAIGC çš„è¿­ä»£ä¸­èƒ½åƒè¶…çº§ç‡ƒæ–™ä¸€æ ·èµ·ä½œç”¨ï¼Ÿè¿™è¦ä»ä¸‰ä¸ªåº•å±‚ç³»ç»Ÿè¯´èµ·ï¼š</p>
<h3 data-id="heading-2">1ï¸âƒ£ ä»£ç å±‚ï¼šä» Canvas åˆ° GPU åŠ é€Ÿ</h3>
<p>åœ¨ WebAIGC çš„å›¾åƒç”Ÿæˆã€è¯­ä¹‰æ¸²æŸ“ã€äº¤äº’ç”Ÿæˆç­‰åœºæ™¯ä¸­ï¼Œæµè§ˆå™¨æ—©æœŸçš„ <code>Canvas</code> ç»˜å›¾æ•ˆæœå‡ ä¹æ˜¯â€œåƒç´ æ¬ç –â€ï¼Œæ•ˆç‡å ªå¿§ã€‚åæ¥ç¤¾åŒºå°† <strong>WebGL</strong>ã€<strong>WebGPU</strong> å°è£…å‡ºå„ç§ AI-friendly çš„è®¡ç®—æ¥å£ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// ç®€åŒ–çš„ GPU å¹¶è¡Œè®¡ç®—åŸç†ç¤ºä¾‹
const <span class="hljs-attr">gpuWorker</span> = new GPU.ComputationProgram({
  kernel: `
    void main() {
      float <span class="hljs-attr">val</span> = inputA[gid] * inputB[gid]<span class="hljs-comment">;</span>
      output<span class="hljs-section">[gid]</span> = val<span class="hljs-comment">;</span>
    }
  `
})<span class="hljs-comment">;</span>
gpuWorker.run()<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ§© <strong>åº•å±‚åŸç†</strong>ï¼š<br/>
å¼€æºæ¡†æ¶ï¼ˆä¾‹å¦‚ TensorFlow.jsã€ONNX Runtime Webï¼‰ç›´æ¥åœ¨æµè§ˆå™¨çš„ GPU ä½“ç³»é‡Œâ€œæ‹¿æŒ‡ä»¤â€è®¡ç®—ï¼Œä»è€Œè®©è®­ç»ƒã€æ¨ç†éƒ½èƒ½åœ¨ç”¨æˆ·ç«¯è·‘ã€‚</p>
<p>è¿™èƒŒåä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ä¸€å †è‡´å‘½ä¼˜é›…çš„ ECMAScript Binding ä¸ Shader ç¼–è¯‘ç­–ç•¥ã€‚</p>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ ç®—æ³•å±‚ï¼šTransformer åœ¨ç½‘é¡µä¸Šé£éªšèµ·èˆ ğŸ’ƒ</h3>
<p>å¼€æºç¤¾åŒºå¾€å¾€æ˜¯ç®—æ³•æœ€å…ˆè½åœ°çš„åœ°æ–¹ã€‚<br/>
åƒ <strong>Stable Diffusion WebUI</strong>ã€<strong>LLaMA-Web</strong> ç­‰é¡¹ç›®å‡ ä¹è®©â€œæµè§ˆå™¨ç«¯ç§æœ‰AIâ€æˆä¸ºç°å®ã€‚</p>
<p>åœ¨æ²¡æœ‰å¼€æºçš„ä¸–ç•Œé‡Œï¼Œä½ å¯èƒ½å¾—ç­‰æŸå…¬å¸å‘å¸ƒ SDKï¼›<br/>
åœ¨å¼€æºçš„ä¸–ç•Œé‡Œï¼Œä¸€ä¸ªç¤¾ç¾¤çš„è®¨è®ºè´´å°±èƒ½è®©ä¸–ç•Œå¤šä¸€ä¸ªæ¨ç†æ¡†æ¶ã€‚</p>
<blockquote>
<p>ğŸ” å…³é”®é€»è¾‘ï¼š</p>
<ul>
<li><strong>æ¨¡å‹æƒé‡å¼€æº</strong> â†’ å¯ä»¥è‡ªç”±è£å‰ªã€è’¸é¦ã€é‡åŒ–ã€‚</li>
<li><strong>æ¨ç†æ¥å£å¼€æº</strong> â†’ å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒè¿è¡Œï¼ˆå“ªæ€•æ˜¯æ™ºèƒ½å†°ç®±ï¼‰ã€‚</li>
<li><strong>æ–‡æ¡£å¼€æº</strong> â†’ å›¢é˜ŸçŸ¥è¯†ä»¥è‡ªç„¶é€‰æ‹©é€Ÿåº¦è¿›åŒ–ã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-4">3ï¸âƒ£ åä½œå±‚ï¼šåƒ Git ä¸€æ ·çš„â€œé›†ä½“è„‘â€ ğŸ§ ğŸ’¬</h3>
<p>å¼€æºç¤¾åŒºå…¶å®æ˜¯ä¸€ç§<strong>è‡ªç»„ç»‡åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>Issue = é—®é¢˜é˜Ÿåˆ—ï¼›</li>
<li>PR = ä»»åŠ¡æäº¤ï¼›</li>
<li>Fork = åˆ†æ”¯è¯•éªŒï¼›</li>
<li>Merge = å…±è¯†è¾¾æˆã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œ<strong>GitHub æœ¬èº«æ˜¯ WebAIGC çš„â€œè®­ç»ƒæ•°æ®æ¥æºâ€ä¹‹ä¸€</strong>ï¼Œå®ƒåæ˜ äººç±»å¦‚ä½•è¿­ä»£æ€ç»´ä¸ç»“æ„åŒ–åˆ›æ„ã€‚</p>
<blockquote>
<p>ğŸ’¡ ä¸€ç§è®½åˆºçš„å…±æŒ¯ï¼š<br/>
WebAIGC æ˜¯ AI æ¨¡æ‹Ÿäººç±»åˆ›é€ ï¼›<br/>
å¼€æºç¤¾åŒºåˆ™æ˜¯äººç±»ä»¥ AI å¼ååŒåˆ›é€ ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€äº‰è®®ï¼šè‡ªç”±çš„å¼•æ“ï¼Œè¿˜æ˜¯æ··ä¹±çš„å¼•çˆ†ç‚¹ï¼Ÿ ğŸ’£</h2>
<h3 data-id="heading-6">âš”ï¸ 1. æ¨¡å‹æ³„éœ²ä¸å®‰å…¨è¾¹ç•Œæ¨¡ç³Š</h3>
<p>æœ‰äº›äººé«˜å‘¼å¼€æºæ˜¯äººç±»çš„å…±åŒè´¢å¯Œï¼›<br/>
å¦ä¸€äº›äººåˆ™æ‹…å¿ƒï¼Œå¼€æºçš„ WebAIGC æ¨¡å‹å¯èƒ½è¢«æ»¥ç”¨äºä¼ªé€ å†…å®¹ã€ä¿¡æ¯æ¬ºéª—ã€‚</p>
<blockquote>
<p>ä¸€è¾¹æ˜¯â€œçŸ¥è¯†è‡ªç”±â€ï¼›<br/>
ä¸€è¾¹æ˜¯â€œç°å®é£é™©â€ã€‚<br/>
â€”â€” è¿™å°±åƒæ˜¯ç»™å…¨äººç±»éƒ½å‘äº†ä¸€æŠŠèƒ½é€ æ¢¦ä¹Ÿèƒ½é€ ç‚¸è¯çš„å·¥å…·ã€‚</p>
</blockquote>
<h3 data-id="heading-7">ğŸ§¬ 2. æŠ€æœ¯é—¨æ§›çš„é”™ä½</h3>
<p>å¼€æºé™ä½äº†å…¥é—¨é—¨æ§›ï¼Œå´æœªå¿…é™ä½äº†<strong>ç†è§£é—¨æ§›</strong>ã€‚<br/>
æ–°äººå¯ä»¥ç›´æ¥è°ƒç”¨ <code>generateArt()</code> è€Œä¸æ‡‚èƒŒåçš„å‘é‡ç©ºé—´è®¡ç®—åŸç†ï¼Œ<br/>
ä¹…è€Œä¹…ä¹‹ï¼Œä»£ç â€œèªæ˜â€äº†ï¼Œäººåè€Œâ€œç³Šæ¶‚â€äº†ã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€æœªæ¥å±•æœ›ï¼šAI é€ ç‰©ä¸å¼€æºæ–‡æ˜ ğŸŒ±</h2>
<p>æœªæ¥çš„ WebAIGCï¼Œå¯èƒ½ä¸å†æ˜¯â€œä»£ç ç”Ÿæˆä»£ç â€ï¼Œ<br/>
è€Œæ˜¯â€œç¤¾åŒºç”Ÿæˆç¤¾åŒºâ€ï¼š<br/>
æ™ºèƒ½ä½“å¸®æˆ‘ä»¬ç»´æŠ¤é¡¹ç›®ã€å®¡é˜… PRã€ç”Ÿæˆæ–‡æ¡£ â€”â€”<br/>
è€Œäººç±»åªéœ€è¦å®šç›®æ ‡ã€ä¼ æƒ…æ„Ÿã€è®²æ•…äº‹ã€‚</p>
<p>ä½†æ— è®ºæŠ€æœ¯å¦‚ä½•è¿›åŒ–ï¼Œ<strong>å¼€æºç²¾ç¥çš„æ ¸å¿ƒæœªå˜</strong>ï¼š</p>
<blockquote>
<blockquote>
<p>â€œè‡ªç”±ä¸æ˜¯ä¸å—çº¦æŸï¼Œè€Œæ˜¯æœ‰é€‰æ‹©åœ°æ„å»ºç§©åºã€‚â€</p>
</blockquote>
</blockquote>
<p>ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼ŒGitHub ä¸Šæœ€åä¸€ä¸ª commit å°†ä¸æ˜¯â€œä¿®å¤ bugâ€ï¼Œ<br/>
è€Œæ˜¯ç”± AI æäº¤çš„ä¸€å¥è¯—ï¼š</p>
<blockquote>
<p>â€œæˆ‘åœ¨ WebGPU çš„æ¢¦ä¸­ï¼Œæ¸²æŸ“å‡ºäººç±»çš„æ€å¿µã€‚â€ ğŸŒŒ</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€è¯¾å ‚æ€»ç»“ ğŸ§¾</h2>



































<table><thead><tr><th>æ¨¡å—</th><th>ä½œç”¨</th><th>åº•å±‚æ”¯æ’‘</th><th>å¼€æºè´¡çŒ®</th></tr></thead><tbody><tr><td>å‰ç«¯æ¸²æŸ“</td><td>WebGPU/WebGL</td><td>GPU æŒ‡ä»¤ç»‘å®š</td><td>æä¾›è·¨æ¡†æ¶å…¼å®¹å±‚</td></tr><tr><td>æ¨¡å‹æ¨ç†</td><td>Transformer å†…æ ¸</td><td>æƒé‡å‹ç¼© + JS binding</td><td>è½»é‡éƒ¨ç½²å˜æ™®åŠ</td></tr><tr><td>åä½œæ²»ç†</td><td>Git ç”Ÿæ€</td><td>åˆ†å¸ƒå¼å…±è¯†æœºåˆ¶</td><td>è‡ªå‘å¼è¿­ä»£ä¸å¤ç”¨</td></tr><tr><td>å®‰å…¨ä¸ä¼¦ç†</td><td>Prompt å®¡æ ¸ã€æ¨¡å‹ç®¡æ§</td><td>å†…å®¹è¿‡æ»¤ç­–ç•¥</td><td>åˆ¶å®šå¼€æºè§„çº¦ä¸å‡†åˆ™</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€åŸºç¡€æ•°æ®ç¯‡ã€‘æ•°æ®ç­‰ä»·è£åˆ¤ï¼šCompareræ¨¡å¼]]></title>    <link>https://juejin.cn/post/7582131164728311848</link>    <guid>https://juejin.cn/post/7582131164728311848</guid>    <pubDate>2025-12-11T02:41:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582131164728311848" data-draft-id="7582118218648371226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€åŸºç¡€æ•°æ®ç¯‡ã€‘æ•°æ®ç­‰ä»·è£åˆ¤ï¼šCompareræ¨¡å¼"/> <meta itemprop="keywords" content="åç«¯,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-12-11T02:41:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½è¡£é¸½å­"/> <meta itemprop="url" content="https://juejin.cn/user/3072451409619223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€åŸºç¡€æ•°æ®ç¯‡ã€‘æ•°æ®ç­‰ä»·è£åˆ¤ï¼šCompareræ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3072451409619223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½è¡£é¸½å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T02:41:56.000Z" title="Thu Dec 11 2025 02:41:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨æ—¥å¸¸çš„æ•°æ®å¤„ç†ä¸ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæ•°æ®æ¯”è¾ƒæ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´æ— å¤„ä¸åœ¨çš„æ“ä½œã€‚æ— è®ºæ˜¯æ’åºã€å»é‡ã€åˆ¤æ–­ç›¸ç­‰ï¼Œè¿˜æ˜¯åœ¨æ•°æ®åŒæ­¥ã€ç‰ˆæœ¬æ¯”å¯¹ç­‰åœºæ™¯ä¸­ï¼Œå¦‚ä½•é«˜æ•ˆã€æ¸…æ™°ã€å¯ç»´æŠ¤åœ°æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ç›´æ˜¯å¼€å‘è€…éœ€è¦é¢å¯¹çš„è¯¾é¢˜ã€‚</p>
<p>å¦‚æœæ¯æ¬¡æ¯”è¾ƒéƒ½å†™ä¸€å † <code>if-else</code> æˆ–è€…ç›´æ¥è°ƒç”¨é»˜è®¤çš„ <code>equals()</code>ï¼Œä»£ç å¾ˆå¿«å°±ä¼šå˜å¾—è‡ƒè‚¿ä¸”éš¾ä»¥æ‰©å±•â€”â€”å°¤å…¶æ˜¯å½“æ¯”è¾ƒè§„åˆ™é¢‘ç¹å˜åŒ–ï¼Œæˆ–éœ€è¦æ”¯æŒå¤šç§æ¯”è¾ƒç»´åº¦æ—¶ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œç¡¬ç¼–ç çš„æ¯”è¾ƒé€»è¾‘ä¼šæ±¡æŸ“æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼Œé™ä½å¯è¯»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p>
<p>è¿™æ—¶ï¼Œ<strong>Comparer æ¨¡å¼</strong>ï¼ˆä¹Ÿç§°ä¸º Comparator æ¨¡å¼ï¼‰ä¾¿åƒä¸€ä¸ªä¸“ä¸šçš„â€œæ•°æ®è£åˆ¤â€ï¼Œå°†æ¯”è¾ƒé€»è¾‘å°è£…æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚å®ƒè®©æ¯”è¾ƒè¡Œä¸ºä¸å¯¹è±¡è§£è€¦ï¼Œæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ¯”è¾ƒç­–ç•¥ï¼Œæ˜¯ç¼–å†™æ¸…æ™°ã€çµæ´»ã€å¥å£®ä»£ç çš„é‡è¦å·¥å…·ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥ç³»ç»Ÿè§£æè¿™ä¸ªæ¨¡å¼çš„è®¾è®¡æ€æƒ³ã€åº”ç”¨å®è·µä¸å¼€æºå®ç°ã€‚</p>
<h2 data-id="heading-1">2. å®šä¹‰</h2>
<p>Comparer æ¨¡å¼ï¼ˆæˆ– Comparator æ¨¡å¼ï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<pre><code class="hljs language-text" lang="text">å°†ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„æ¯”è¾ƒç®—æ³•æŠ½è±¡å‡ºæ¥ï¼Œå°è£…åˆ°ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œè®©æ¯”è¾ƒé€»è¾‘ä¸å¯¹è±¡æœ¬èº«è§£è€¦ã€‚ 
</code></pre>
<p>æ¯”è¾ƒå™¨é€šå¸¸ç”±å¦‚ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>è¢«æ¯”è¾ƒçš„å¯¹è±¡</strong>ï¼šé€šå¸¸æ˜¯é¢†åŸŸå®ä½“æˆ–æ•°æ®ç»“æ„ï¼ˆå¦‚ <code>User</code>ã€<code>Order</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šç”¨æˆ·å®ä½“ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
    <span class="hljs-keyword">private</span> String email;
    <span class="hljs-keyword">private</span> LocalDateTime createdAt;
    
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¸é‡å†™equals/hashCodeï¼Œå°†æ¯”è¾ƒé€»è¾‘äº¤ç»™ä¸“é—¨çš„æ¯”è¾ƒå™¨</span>
}
</code></pre>
<ol start="2">
<li><strong>æ¯”è¾ƒå™¨æ¥å£</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java">	<span class="hljs-comment">// é€šç”¨æ¯”è¾ƒå™¨æ¥å£å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-comment">/**
     * æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡
     * <span class="hljs-doctag">@param</span> o1 ç¬¬ä¸€ä¸ªå¯¹è±¡
     * <span class="hljs-doctag">@param</span> o2 ç¬¬äºŒä¸ªå¯¹è±¡
     * <span class="hljs-doctag">@return</span> è´Ÿæ•´æ•°ã€é›¶æˆ–æ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºo1å°äºã€ç­‰äºæˆ–å¤§äºo2
     * <span class="hljs-doctag">@throws</span> NullPointerException å¦‚æœå‚æ•°ä¸ºnullä¸”æ­¤æ¯”è¾ƒå™¨ä¸æ¥å—null
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(T o1, T o2)</span>;
    
    <span class="hljs-comment">/**
     * å¯é€‰ï¼šåè½¬æ¯”è¾ƒå™¨é¡ºåº
     * <span class="hljs-doctag">@return</span> è¿”å›ä¸€ä¸ªåè½¬é¡ºåºçš„æ¯”è¾ƒå™¨
     */</span>
    <span class="hljs-keyword">default</span> Comparator <span class="hljs-title function_">reversed</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> (o1, o2) -&gt; compare(o2, o1);
    }
    
    <span class="hljs-comment">/**
     * å¯é€‰ï¼šé“¾å¼æ¯”è¾ƒå™¨
     * <span class="hljs-doctag">@param</span> other ä¸‹ä¸€ä¸ªæ¯”è¾ƒå™¨
     * <span class="hljs-doctag">@return</span> ç»„åˆæ¯”è¾ƒå™¨
     */</span>
    <span class="hljs-keyword">default</span> Comparator <span class="hljs-title function_">thenComparing</span><span class="hljs-params">(Comparator other)</span> {
        <span class="hljs-keyword">return</span> (o1, o2) -&gt; {
            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> compare(o1, o2);
            <span class="hljs-keyword">return</span> (res != <span class="hljs-number">0</span>) ? res : other.compare(o1, o2);
        };
    }
}
	```

<span class="hljs-number">3.</span> **å…·ä½“æ¯”è¾ƒå™¨**ï¼š

```java
<span class="hljs-comment">// æŒ‰å¹´é¾„æ¯”è¾ƒçš„å…·ä½“æ¯”è¾ƒå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(User u1, User u2)</span> {
        <span class="hljs-comment">// æ ¸å¿ƒæ¯”è¾ƒé€»è¾‘</span>
        <span class="hljs-keyword">return</span> Integer.compare(u1.getAge(), u2.getAge());

<span class="hljs-comment">// å¤åˆæ¯”è¾ƒå™¨ï¼šå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰å§“å</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeThenNameComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(User u1, User u2)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">ageCompare</span> <span class="hljs-operator">=</span> Integer.compare(u1.getAge(), u2.getAge());
        <span class="hljs-keyword">if</span> (ageCompare != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> ageCompare;
        }
        <span class="hljs-comment">// å¹´é¾„ç›¸åŒï¼Œå†æ¯”è¾ƒå§“å</span>
        <span class="hljs-keyword">return</span> String.CASE_INSENSITIVE_ORDER.compare(
            u1.getName(), 
            u2.getName()
        );
    }
}
</code></pre>
<h2 data-id="heading-2">3. åº”ç”¨</h2>
<p>ä¸‹é¢é€šè¿‡å…·ä½“åœºæ™¯å’Œä»£ç ç¤ºä¾‹æ¥å±•å¼€è¯´æ˜æ¯”è¾ƒå™¨çš„å¸¸è§åº”ç”¨ï¼š</p>
<h3 data-id="heading-3">3.1 é›†åˆæ’åºä¸é«˜çº§æ’åºç­–ç•¥</h3>
<p>è¿™æ˜¯æœ€ç»å…¸çš„åº”ç”¨ï¼ŒComparer æ¨¡å¼èƒ½è½»æ¾æ”¯æŒï¼š</p>
<ul>
<li><strong>å¤šçº§æ’åº</strong>ï¼šå…ˆæŒ‰éƒ¨é—¨æ’åºï¼Œéƒ¨é—¨ç›¸åŒå†æŒ‰è–ªèµ„é™åºã€‚</li>
<li><strong>è‡ªå®šä¹‰è§„åˆ™æ’åº</strong>ï¼šæŒ‰å­—ç¬¦ä¸²é•¿åº¦ã€æŒ‰æ—¥æœŸè¿œè¿‘ã€ç”šè‡³æŒ‰ä¸šåŠ¡ä¼˜å…ˆçº§æ’åºã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸€ä¸ªå¤åˆæ¯”è¾ƒå™¨ç¤ºä¾‹ï¼šå…ˆæŒ‰çŠ¶æ€æ’åºï¼ˆè‡ªå®šä¹‰é¡ºåºï¼‰ï¼Œå†æŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketPriorityComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span> <span class="hljs-variable">STATUS_ORDER</span> <span class="hljs-operator">=</span> Map.of(
        Status.CRITICAL, <span class="hljs-number">1</span>,
        Status.HIGH, <span class="hljs-number">2</span>,
        Status.MEDIUM, <span class="hljs-number">3</span>,
        Status.LOW, <span class="hljs-number">4</span>
    );

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Ticket t1, Ticket t2)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">statusCompare</span> <span class="hljs-operator">=</span> Integer.compare(
            STATUS_ORDER.get(t1.getStatus()),
            STATUS_ORDER.get(t2.getStatus())
        );
        <span class="hljs-keyword">if</span> (statusCompare != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> statusCompare;
        }
        <span class="hljs-comment">// çŠ¶æ€ç›¸åŒï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>
        <span class="hljs-keyword">return</span> t2.getCreatedAt().compareTo(t1.getCreatedAt());
    }
}
</code></pre>
<h3 data-id="heading-4">3.2 æ•°æ®å»é‡ä¸è‡ªå®šä¹‰ç›¸ç­‰åˆ¤æ–­</h3>
<p>ä¸šåŠ¡ä¸­â€œç›¸ç­‰â€çš„æ¦‚å¿µå¸¸å¸¸å¾ˆçµæ´»ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·åˆå¹¶åœºæ™¯ä¸­ï¼Œå¯èƒ½è®¤ä¸ºé‚®ç®±æˆ–æ‰‹æœºå·ç›¸åŒå³ä¸ºåŒä¸€ç”¨æˆ·ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºäºé‚®ç®±çš„ç”¨æˆ·å»é‡æ¯”è¾ƒå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEmailComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(User u1, User u2)</span> {
        <span class="hljs-keyword">return</span> u1.getEmail().trim().equalsIgnoreCase(u2.getEmail().trim()) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;
    }
}

<span class="hljs-comment">// ä½¿ç”¨è¯¥æ¯”è¾ƒå™¨è¿›è¡Œå»é‡</span>
<span class="hljs-type">List</span> <span class="hljs-variable">mergedUsers</span> <span class="hljs-operator">=</span> userList.stream()
        .collect(Collectors.collectingAndThen(
            Collectors.toCollection(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserEmailComparer</span>())),
            ArrayList::<span class="hljs-keyword">new</span>
        ));
</code></pre>
<h3 data-id="heading-5">3.3 ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸æ•°æ®ç»“æ„å®šåˆ¶</h3>
<p>è®¸å¤šæ•°æ®ç»“æ„ä¾èµ–æ¯”è¾ƒå™¨æ¥å®šä¹‰å…ƒç´ é¡ºåºã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿä¸­ï¼Œ<code>PriorityBlockingQueue</code> éœ€è¦æ ¹æ®ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦å†³å®šæ‰§è¡Œé¡ºåºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä»»åŠ¡ä¼˜å…ˆçº§æ¯”è¾ƒå™¨ï¼ˆæ•°å€¼è¶Šå°è¶Šä¼˜å…ˆï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskPriorityComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Task t1, Task t2)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">priorityCompare</span> <span class="hljs-operator">=</span> Integer.compare(t1.getPriority(), t2.getPriority());
        <span class="hljs-keyword">if</span> (priorityCompare != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> priorityCompare;
        <span class="hljs-comment">// ä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æŒ‰ç­‰å¾…æ—¶é—´æ’åºï¼ˆç­‰å¾…è¶Šä¹…è¶Šä¼˜å…ˆï¼‰</span>
        <span class="hljs-keyword">return</span> Long.compare(t1.getWaitingTime(), t2.getWaitingTime());
    }
}

<span class="hljs-type">PriorityBlockingQueue</span> <span class="hljs-variable">taskQueue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityBlockingQueue</span>&lt;&gt;(<span class="hljs-number">11</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TaskPriorityComparer</span>());
</code></pre>
<h3 data-id="heading-6">3.4 æ•°æ®åŒæ­¥ä¸å·®å¼‚åˆ†æ</h3>
<p>åœ¨æ•°æ®åŒæ­¥ã€ETL æˆ–ç‰ˆæœ¬æ¯”å¯¹åœºæ™¯ä¸­ï¼Œéœ€è¦ç²¾ç¡®è¯†åˆ«æ•°æ®çš„å˜åŒ–ç±»å‹ï¼ˆæ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œä¸€ä¸ªå¥å£®çš„æ¯”è¾ƒå™¨æ˜¯è¿™ç±»ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨äºæ•°æ®åŒæ­¥çš„æ·±åº¦æ¯”è¾ƒå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSyncComparer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(DataRecord r1, DataRecord r2)</span> {
        <span class="hljs-comment">// 1. å…ˆæ¯”è¾ƒå”¯ä¸€æ ‡è¯†</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">idCompare</span> <span class="hljs-operator">=</span> r1.getId().compareTo(r2.getId());
        <span class="hljs-keyword">if</span> (idCompare != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> idCompare;
        
        <span class="hljs-comment">// 2. æ ‡è¯†ç›¸åŒï¼Œåˆ™æ¯”è¾ƒå†…å®¹å“ˆå¸Œå€¼ï¼ˆæˆ–é€ä¸ªå­—æ®µæ¯”è¾ƒï¼‰åˆ¤æ–­æ˜¯å¦æ›´æ–°</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">hash1</span> <span class="hljs-operator">=</span> computeContentHash(r1);
        <span class="hljs-type">String</span> <span class="hljs-variable">hash2</span> <span class="hljs-operator">=</span> computeContentHash(r2);
        <span class="hljs-keyword">return</span> hash1.equals(hash2) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>; <span class="hljs-comment">// 0è¡¨ç¤ºå†…å®¹ç›¸åŒï¼Œ1è¡¨ç¤ºå†…å®¹ä¸åŒ</span>
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">computeContentHash</span><span class="hljs-params">(DataRecord record)</span> {
        <span class="hljs-comment">// è®¡ç®—è®°å½•å…³é”®å­—æ®µçš„å“ˆå¸Œå€¼ï¼Œå¿½ç•¥åŒæ­¥å…ƒæ•°æ®å­—æ®µ</span>
        <span class="hljs-keyword">return</span> DigestUtils.md5Hex(record.getName() + record.getValue() + record.getCategory());
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ¯”è¾ƒå™¨è¿›è¡Œæ•°æ®å·®å¼‚åˆ†æ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataDiffService</span> {
    <span class="hljs-keyword">public</span> DiffResult <span class="hljs-title function_">compareCollections</span><span class="hljs-params">(List source, List target)</span> {
        source.sort(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSyncComparer</span>());
        target.sort(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSyncComparer</span>());
        <span class="hljs-comment">// ä½¿ç”¨åŒæŒ‡é’ˆç®—æ³•åŸºäºæ¯”è¾ƒå™¨ç»“æœè¿›è¡Œæ¯”å¯¹</span>
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<h2 data-id="heading-7">4. å¼€æºä»£ç è§£æ</h2>
<p>è®¸å¤šä¼˜ç§€çš„å¼€æºæ¡†æ¶å’Œåº“éƒ½æ·±åº¦è¿ç”¨äº† Comparer æ¨¡å¼çš„æ€æƒ³ï¼Œå¹¶å°†å…¶å‘æŒ¥åˆ°æè‡´ã€‚</p>
<h3 data-id="heading-8">4.1 Java 8+ ä¸­çš„ <code>Comparator</code> é©å‘½</h3>
<p>Java 8 ä¸º <code>Comparator</code> æ¥å£æ³¨å…¥äº†å¼ºå¤§çš„å‡½æ•°å¼èƒ½åŠ›ï¼Œä½¿å…¶å®šä¹‰å˜å¾—æå…¶ç®€æ´ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹æ³•å¼•ç”¨ä¸é“¾å¼è°ƒç”¨</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">comparator</span> <span class="hljs-operator">=</span> Comparator
    .comparing(Person::getLastName)
    .thenComparing(Person::getFirstName)
    .thenComparingInt(Person::getAge)
    .reversed();

<span class="hljs-comment">// å¤„ç†nullå€¼çš„å®‰å…¨æ¯”è¾ƒå™¨</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">nullSafeComparator</span> <span class="hljs-operator">=</span> Comparator.nullsLast(String::compareToIgnoreCase);

<span class="hljs-comment">// ä½¿ç”¨Lambdaè‡ªå®šä¹‰å¤æ‚é€»è¾‘</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">productComparator</span> <span class="hljs-operator">=</span> (p1, p2) -&gt; {
    <span class="hljs-keyword">if</span> (p1.isFeatured() &amp;&amp; !p2.isFeatured()) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (!p1.isFeatured() &amp;&amp; p2.isFeatured()) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> Double.compare(p2.getRating(), p1.getRating()); <span class="hljs-comment">// è¯„åˆ†é™åº</span>
};
</code></pre>
<h4 data-id="heading-9">4.1.1Â <code>comparing()</code>Â ç³»åˆ—æ–¹æ³•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ vs Java 8 æ–°æ–¹å¼</span>
<span class="hljs-comment">// ä¼ ç»Ÿï¼šå†—é•¿çš„åŒ¿åå†…éƒ¨ç±»</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">oldWay</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Person p1, Person p2)</span> {
        <span class="hljs-keyword">return</span> p1.getLastName().compareTo(p2.getLastName());
    }
};

<span class="hljs-comment">// Java 8ï¼šä¸€è¡Œä»£ç </span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">newWay</span> <span class="hljs-operator">=</span> Comparator.comparing(Person::getLastName);
</code></pre>
<p><strong>æ ¸å¿ƒå®ç°åŸç†ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Comparator.comparing() çš„æºç å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &gt; Comparator <span class="hljs-title function_">comparing</span><span class="hljs-params">(
        Function keyExtractor)</span> {
    Objects.requireNonNull(keyExtractor);
    <span class="hljs-keyword">return</span> (Comparator &amp; Serializable)  <span class="hljs-comment">// åºåˆ—åŒ–æ ‡è®°</span>
        (c1, c2) -&gt; {
            <span class="hljs-comment">// 1. æå–å…³é”®å€¼</span>
            <span class="hljs-type">U</span> <span class="hljs-variable">u1</span> <span class="hljs-operator">=</span> keyExtractor.apply(c1);
            <span class="hljs-type">U</span> <span class="hljs-variable">u2</span> <span class="hljs-operator">=</span> keyExtractor.apply(c2);
            
            <span class="hljs-comment">// 2. ä½¿ç”¨å…³é”®å€¼çš„è‡ªç„¶é¡ºåºæ¯”è¾ƒ</span>
            <span class="hljs-keyword">return</span> u1.compareTo(u2);
        };
}

<span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå™¨çš„é‡è½½ç‰ˆæœ¬</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  Comparator <span class="hljs-title function_">comparing</span><span class="hljs-params">(
        Function keyExtractor,
        Comparator keyComparator)</span> {
    Objects.requireNonNull(keyExtractor);
    Objects.requireNonNull(keyComparator);
    <span class="hljs-keyword">return</span> (Comparator &amp; Serializable)
        (c1, c2) -&gt; {
            <span class="hljs-comment">// ä½¿ç”¨æä¾›çš„æ¯”è¾ƒå™¨æ¯”è¾ƒæå–çš„å€¼</span>
            <span class="hljs-keyword">return</span> keyComparator.compare(
                keyExtractor.apply(c1),
                keyExtractor.apply(c2)
            );
        };
}
</code></pre>
<h4 data-id="heading-10">4.1.2 é“¾å¼æ¯”è¾ƒï¼š<code>thenComparing()</code>Â </h4>
<p><strong>é“¾å¼æ¯”è¾ƒçš„å®ç°åŸç†</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é“¾å¼æ¯”è¾ƒç¤ºä¾‹</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">complexComparator</span> <span class="hljs-operator">=</span> Comparator
    .comparing(Person::getLastName)
    .thenComparing(Person::getFirstName)
    .thenComparingInt(Person::getAge);

<span class="hljs-comment">// thenComparing() çš„é»˜è®¤æ–¹æ³•å®ç°</span>
<span class="hljs-keyword">default</span> Comparator <span class="hljs-title function_">thenComparing</span><span class="hljs-params">(Comparator other)</span> {
    Objects.requireNonNull(other);
    <span class="hljs-keyword">return</span> (Comparator &amp; Serializable) (c1, c2) -&gt; {
        <span class="hljs-comment">// 1. å…ˆç”¨å½“å‰æ¯”è¾ƒå™¨æ¯”è¾ƒ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> compare(c1, c2);
        <span class="hljs-comment">// 2. å¦‚æœç›¸ç­‰ï¼Œå†ç”¨ä¸‹ä¸€ä¸ªæ¯”è¾ƒå™¨</span>
        <span class="hljs-keyword">return</span> (res != <span class="hljs-number">0</span>) ? res : other.compare(c1, c2);
    };
}

<span class="hljs-comment">// å¸¦keyExtractorçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">default</span> &lt;u&gt;&gt; Comparator <span class="hljs-title function_">thenComparing</span><span class="hljs-params">(
        Function keyExtractor)</span> {
    <span class="hljs-comment">// ç»„åˆæˆé“¾å¼ç»“æ„</span>
    <span class="hljs-keyword">return</span> thenComparing(comparing(keyExtractor));
}
</code></pre>
<p><strong>é“¾å¼æ¯”è¾ƒçš„å†…éƒ¨æ•°æ®ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€åŒ–ç‰ˆé“¾å¼æ¯”è¾ƒå™¨çš„å†…éƒ¨ç»“æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChainedComparator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span>, Serializable {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Comparator first;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Comparator second;
    
    ChainedComparator(Comparator first, Comparator second) {
        <span class="hljs-built_in">this</span>.first = first;
        <span class="hljs-built_in">this</span>.second = second;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(T o1, T o2)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> first.compare(o1, o2);
        <span class="hljs-keyword">if</span> (result == <span class="hljs-number">0</span>) {
            result = second.compare(o1, o2);
        }
        <span class="hljs-keyword">return</span> result;
    }
}

<span class="hljs-comment">// å®é™…ä¸Šï¼ŒJavaä½¿ç”¨å‡½æ•°å¼æ–¹å¼å®ç°ï¼Œä½†é€»è¾‘ç›¸åŒ</span>
</code></pre>
<h4 data-id="heading-11">4.1.3 Nullå€¼å¤„ç†ï¼šå®‰å…¨æ¯”è¾ƒçš„é©å‘½</h4>
<p><code>nullsFirst()</code>Â å’ŒÂ <code>nullsLast()</code>Â çš„å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// nullsFirst() çš„å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  Comparator <span class="hljs-title function_">nullsFirst</span><span class="hljs-params">(Comparator comparator)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullComparator</span>&lt;&gt;(<span class="hljs-literal">true</span>, comparator);
}

<span class="hljs-comment">// NullComparator å†…éƒ¨ç±»</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NullComparator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span>, Serializable {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> nullFirst;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Comparator real;
    
    NullComparator(<span class="hljs-type">boolean</span> nullFirst, Comparator real) {
        <span class="hljs-built_in">this</span>.nullFirst = nullFirst;
        <span class="hljs-built_in">this</span>.real = real;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(T a, T b)</span> {
        <span class="hljs-keyword">if</span> (a == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> (b == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (nullFirst ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> nullFirst ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ä¸¤ä¸ªéƒ½ä¸æ˜¯nullï¼Œä½¿ç”¨çœŸæ­£çš„æ¯”è¾ƒå™¨</span>
            <span class="hljs-keyword">return</span> (real == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : real.compare(a, b);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-type">List</span> <span class="hljs-variable">names</span> <span class="hljs-operator">=</span> Arrays.asList(&amp;#<span class="hljs-number">34</span>;Alice&amp;#<span class="hljs-number">34</span>;, <span class="hljs-literal">null</span>, &amp;#<span class="hljs-number">34</span>;Bob&amp;#<span class="hljs-number">34</span>;, <span class="hljs-literal">null</span>, &amp;#<span class="hljs-number">34</span>;Charlie&amp;#<span class="hljs-number">34</span>;);
names.sort(Comparator.nullsFirst(String::compareTo));
<span class="hljs-comment">// ç»“æœ: [null, null, &amp;#34;Alice&amp;#34;, &amp;#34;Bob&amp;#34;, &amp;#34;Charlie&amp;#34;]</span>
</code></pre>
<h4 data-id="heading-12">4.1.4 Lambdaè¡¨è¾¾å¼ä¸Comparatorçš„èåˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Lambdaè¡¨è¾¾å¼çš„ç±»å‹æ¨æ–­</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">priceComparator</span> <span class="hljs-operator">=</span> (p1, p2) -&gt; 
    Double.compare(p1.getPrice(), p2.getPrice());

<span class="hljs-comment">// ç¼–è¯‘å™¨å¦‚ä½•æ¨æ–­ï¼Ÿ</span>
<span class="hljs-comment">// 1. ç›®æ ‡ç±»å‹æ˜¯ Comparator</span>
<span class="hljs-comment">// 2. Lambdaå‚æ•°ç±»å‹æ¨æ–­ä¸º (Product, Product)</span>
<span class="hljs-comment">// 3. è¿”å›ç±»å‹æ¨æ–­ä¸º int</span>

<span class="hljs-comment">// ç­‰ä»·äºåŒ¿åå†…éƒ¨ç±»</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">oldPriceComparator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Product p1, Product p2)</span> {
        <span class="hljs-keyword">return</span> Double.compare(p1.getPrice(), p2.getPrice());
    }
};
</code></pre>
<p><strong>æ–¹æ³•å¼•ç”¨çš„é­”åŠ›ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å››ç§æ–¹æ³•å¼•ç”¨å½¢å¼åœ¨Comparatorä¸­çš„åº”ç”¨</span>

<span class="hljs-comment">// 1. é™æ€æ–¹æ³•å¼•ç”¨</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">absComparator</span> <span class="hljs-operator">=</span> Comparator.comparingInt(Math::abs);

<span class="hljs-comment">// 2. å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼ˆç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">prefix</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;Mr. &amp;#<span class="hljs-number">34</span>;;
<span class="hljs-type">Comparator</span> <span class="hljs-variable">withPrefix</span> <span class="hljs-operator">=</span> Comparator.comparing(prefix::concat);

<span class="hljs-comment">// 3. ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-type">Comparator</span> <span class="hljs-variable">lengthComparator</span> <span class="hljs-operator">=</span> Comparator.comparingInt(String::length);

<span class="hljs-comment">// 4. æ„é€ æ–¹æ³•å¼•ç”¨ï¼ˆè¾ƒå°‘ç”¨äºComparatorï¼‰</span>
<span class="hljs-comment">// é€šå¸¸ç”¨äºå…¶ä»–å‡½æ•°å¼æ¥å£</span>
</code></pre>
<h3 data-id="heading-13">4.2 Spring Framework ä¸­çš„ <code>Comparator</code> åº”ç”¨</h3>
<p>åœ¨ Spring ä¸­ï¼Œæ¯”è¾ƒå™¨å¸¸ç”¨äºé…ç½®æ’åºã€äº‹ä»¶é¡ºåºæ§åˆ¶ç­‰åœºæ™¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring çš„ Ordered æ¥å£æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒå™¨æ¨¡å¼</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HighPriorityValidator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Ordered</span>, Validator {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> HIGHEST_PRECEDENCE; <span class="hljs-comment">// å®šä¹‰æ‰§è¡Œé¡ºåº</span>
    }
}

<span class="hljs-comment">// åœ¨Spring Securityä¸­ï¼Œå¯¹å¤šä¸ªFilterè¿›è¡Œæ’åº</span>
<span class="hljs-type">List</span> <span class="hljs-variable">filters</span> <span class="hljs-operator">=</span> ...;
filters.sort(AnnotationAwareOrderComparator.INSTANCE);
</code></pre>
<h4 data-id="heading-14">4.2.1Â <code>Ordered</code>Â æ¥å£çš„è®¾è®¡å“²å­¦</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring çš„ Ordered æ¥å£å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Ordered</span> {
    <span class="hljs-comment">/**
     * æœ€é«˜ä¼˜å…ˆçº§å¸¸é‡
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">HIGHEST_PRECEDENCE</span> <span class="hljs-operator">=</span> Integer.MIN_VALUE;
    
    <span class="hljs-comment">/**
     * æœ€ä½ä¼˜å…ˆçº§å¸¸é‡
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">LOWEST_PRECEDENCE</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;
    
    <span class="hljs-comment">/**
     * è·å–é¡ºåºå€¼
     * <span class="hljs-doctag">@return</span> é¡ºåºå€¼ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 data-id="heading-15">4.2.2Â <code>Ordered</code>Â æ¥å£çš„æ ¸å¿ƒå®ç°åŸç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Ordered æ¥å£çš„æ¯”è¾ƒå™¨å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderComparator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span> {
    
    <span class="hljs-comment">/**
     * å…±äº«å®ä¾‹ï¼Œçº¿ç¨‹å®‰å…¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">OrderComparator</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderComparator</span>();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> {
        <span class="hljs-comment">// è·å–ä¸¤ä¸ªå¯¹è±¡çš„é¡ºåºå€¼</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> getOrder(o1);
        <span class="hljs-type">int</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> getOrder(o2);
        
        <span class="hljs-comment">// æ¯”è¾ƒé¡ºåºå€¼</span>
        <span class="hljs-keyword">return</span> Integer.compare(i1, i2);
    }
    
    <span class="hljs-comment">/**
     * è·å–å¯¹è±¡çš„é¡ºåºå€¼
     * æ ¸å¿ƒæ–¹æ³•ï¼šæ”¯æŒå¤šç§æ–¹å¼ç¡®å®šé¡ºåº
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">(Object obj)</span> {
        <span class="hljs-keyword">if</span> (obj != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦å®ç°äº†Orderedæ¥å£</span>
            <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> Ordered) {
                <span class="hljs-keyword">return</span> ((Ordered) obj).getOrder();
            }
            
            <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦æœ‰@Orderæ³¨è§£</span>
            <span class="hljs-type">Integer</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> findOrder(obj);
            <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> order;
            }
        }
        
        <span class="hljs-comment">// 3. é»˜è®¤è¿”å›æœ€ä½ä¼˜å…ˆçº§</span>
        <span class="hljs-keyword">return</span> Ordered.LOWEST_PRECEDENCE;
    }
    
    <span class="hljs-comment">/**
     * æŸ¥æ‰¾<span class="hljs-doctag">@Order</span>æ³¨è§£çš„å€¼
     */</span>
    <span class="hljs-keyword">protected</span> Integer <span class="hljs-title function_">findOrder</span><span class="hljs-params">(Object obj)</span> {
        <span class="hljs-comment">// æ£€æŸ¥ç±»ä¸Šçš„@Orderæ³¨è§£</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> obj.getClass().getAnnotation(Order.class);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> order.value();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h4 data-id="heading-16">4.2.3 <code>AnnotationAwareOrderComparator</code>Â è§£æ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AnnotationAwareOrderComparator çš„ç±»å±‚æ¬¡ç»“æ„</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationAwareOrderComparator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderComparator</span> {
    
    <span class="hljs-comment">// å•ä¾‹å®ä¾‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AnnotationAwareOrderComparator</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationAwareOrderComparator</span>();
    
    <span class="hljs-comment">/**
     * æ‰©å±•çš„findOrderæ–¹æ³•ï¼Œæ”¯æŒæ›´å¤šæ³¨è§£
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Integer <span class="hljs-title function_">findOrder</span><span class="hljs-params">(Object obj)</span> {
        <span class="hljs-comment">// 1. å…ˆè°ƒç”¨çˆ¶ç±»æ–¹æ³•æ£€æŸ¥@Orderæ³¨è§£</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">super</span>.findOrder(obj);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> order;
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥@Priorityæ³¨è§£ï¼ˆJSR-250æ ‡å‡†ï¼‰</span>
        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> Class) {
            <span class="hljs-keyword">return</span> findOrderFromAnnotation((Class) obj);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (obj != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> findOrderFromAnnotation(obj.getClass());
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">/**
     * ä»ç±»ä¸ŠæŸ¥æ‰¾é¡ºåºæ³¨è§£
     */</span>
    <span class="hljs-keyword">private</span> Integer <span class="hljs-title function_">findOrderFromAnnotation</span><span class="hljs-params">(Class clazz)</span> {
        <span class="hljs-comment">// æ£€æŸ¥@Orderæ³¨è§£</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> AnnotatedElementUtils.findMergedAnnotation(clazz, Order.class);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> order.value();
        }
        
        <span class="hljs-comment">// æ£€æŸ¥@Priorityæ³¨è§£</span>
        javax.annotation.<span class="hljs-type">Priority</span> <span class="hljs-variable">priority</span> <span class="hljs-operator">=</span> 
            AnnotatedElementUtils.findMergedAnnotation(clazz, javax.annotation.Priority.class);
        <span class="hljs-keyword">if</span> (priority != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> priority.value();
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">/**
     * æ’åºåˆ—è¡¨çš„ä¾¿æ·æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(List list)</span> {
        <span class="hljs-keyword">if</span> (list.size() &gt; <span class="hljs-number">1</span>) {
            list.sort(INSTANCE);
        }
    }
    
    <span class="hljs-comment">/**
     * å¯¹å·²æ’åºçš„åˆ—è¡¨è¿›è¡Œæ’åºï¼ˆä¿æŒç¨³å®šæ’åºï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortIfNecessary</span><span class="hljs-params">(List list)</span> {
        <span class="hljs-keyword">if</span> (list.size() &gt; <span class="hljs-number">1</span> &amp;&amp; !isSorted(list)) {
            sort(list);
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥åˆ—è¡¨æ˜¯å¦å·²æ’åº
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSorted</span><span class="hljs-params">(List list)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; list.size(); i++) {
            <span class="hljs-keyword">if</span> (INSTANCE.compare(list.get(i - <span class="hljs-number">1</span>), list.get(i)) &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h4 data-id="heading-17">4.2.4 åœ¨ Spring Security ä¸­çš„å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring Security è¿‡æ»¤å™¨é“¾çš„æ’åºå®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FilterChainProxy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenericFilterBean</span> {
    
    <span class="hljs-keyword">private</span> List filterChains;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯¹è¿‡æ»¤å™¨é“¾è¿›è¡Œæ’åº</span>
        filterChains.sort(AnnotationAwareOrderComparator.INSTANCE);
        
        <span class="hljs-comment">// å¯¹æ¯ä¸ªè¿‡æ»¤å™¨é“¾ä¸­çš„è¿‡æ»¤å™¨è¿›è¡Œæ’åº</span>
        <span class="hljs-keyword">for</span> (SecurityFilterChain chain : filterChains) {
            <span class="hljs-type">List</span> <span class="hljs-variable">filters</span> <span class="hljs-operator">=</span> chain.getFilters();
            filters.sort(AnnotationAwareOrderComparator.INSTANCE);
        }
    }
    
    <span class="hljs-comment">// è¿‡æ»¤å™¨ç¤ºä¾‹</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-meta">@Order(Ordered.HIGHEST_PRECEDENCE)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenericFilterBean</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, 
                           FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {
            <span class="hljs-comment">// æ—¥å¿—è®°å½•é€»è¾‘</span>
            chain.doFilter(request, response);
        }
    }
    
    <span class="hljs-meta">@Component</span>
    <span class="hljs-meta">@Order(100)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthenticationFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenericFilterBean</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response,
                           FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {
            <span class="hljs-comment">// è®¤è¯é€»è¾‘</span>
            chain.doFilter(request, response);
        }
    }
}
</code></pre>
<h2 data-id="heading-18">5. æ€»ç»“</h2>
<p>Comparer æ¨¡å¼æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯ï¼šå°†æ•°æ®æ¯”è¾ƒçš„æ„å›¾ï¼ˆæ¯”ä»€ä¹ˆã€æŒ‰ä»€ä¹ˆè§„åˆ™æ¯”ï¼‰ä¸æ¯”è¾ƒçš„å¤æ‚å®ç°ï¼ˆæ€ä¹ˆæ¯”ï¼‰è¿›è¡Œåˆ†ç¦»ï¼Œé€šè¿‡ä¸“é—¨çš„æ¯”è¾ƒå™¨ç»„ä»¶æ¥å°è£…æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¤æ‚é€»è¾‘ã€‚</p>
<p>å®ƒæ·±åˆ»ä½“ç°äº†ä»¥ä¸‹å‡ ä¸ªç»å…¸è®¾è®¡æ¨¡å¼çš„æ€æƒ³ï¼š</p>
<ol>
<li>
<p>ç­–ç•¥æ¨¡å¼ï¼šæ¯ä¸€ç§æ¯”è¾ƒé€»è¾‘ï¼ˆå¦‚æŒ‰å¹´é¾„æ¯”è¾ƒã€æŒ‰å§“åæ¯”è¾ƒã€æŒ‰å¤šä¸ªå­—æ®µç»„åˆæ¯”è¾ƒï¼‰éƒ½è¢«å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„ç­–ç•¥ï¼ˆå³å…·ä½“çš„ Comparerï¼‰ã€‚ä¸Šä¸‹æ–‡ï¼ˆå¦‚æ’åºå‡½æ•°ã€ä¼˜å…ˆçº§é˜Ÿåˆ—ã€æ•°æ®åŒæ­¥æœåŠ¡ï¼‰å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œçµæ´»é€‰æ‹©æˆ–ç»„åˆä¸åŒçš„æ¯”è¾ƒç­–ç•¥ï¼Œè€Œä¸å¿…åœ¨ä»£ç ä¸­å †ç§¯å¤æ‚çš„ <code>if-else</code> æ¡ä»¶åˆ¤æ–­ã€‚</p>
</li>
<li>
<p>è£…é¥°å™¨æ¨¡å¼ï¼šComparer å¯ä»¥è¢«å±‚å±‚è£…é¥°å’Œç»„åˆã€‚ä¾‹å¦‚ï¼ŒJava 8 çš„ <code>thenComparing()</code> å…è®¸å°†å¤šä¸ªæ¯”è¾ƒå™¨ä¸²è”ï¼Œå½¢æˆä¸€æ¡æ¯”è¾ƒé“¾ï¼›è€Œåƒ <code>LoggingComparer</code>ã€<code>CachingComparer</code> è¿™æ ·çš„è£…é¥°å™¨å¯ä»¥åœ¨ä¸æ”¹å˜æ ¸å¿ƒæ¯”è¾ƒé€»è¾‘çš„å‰æä¸‹ï¼Œä¸ºæ¯”è¾ƒå™¨æ·»åŠ æ—¥å¿—è®°å½•ã€ç»“æœç¼“å­˜ç­‰å¢å¼ºåŠŸèƒ½ã€‚</p>
</li>
</ol>
<p>æ ¸å¿ƒä»·å€¼ï¼šå°†"æ•°æ®æ¯”è¾ƒ"è¿™ä¸ªåŠ¨ä½œï¼Œä»ä¸€ä¸ªç®€å•æˆ–æ‚ä¹±çš„ <code>if-else</code> åˆ¤æ–­ï¼Œæå‡ä¸ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€å¯å¤ç”¨ã€å¯æµ‹è¯•çš„æœåŠ¡ã€‚å®ƒä¼˜é›…åœ°è§£å†³äº†åœ¨æ’åºã€å»é‡ã€ä¼˜å…ˆçº§è°ƒåº¦ã€æ•°æ®åŒæ­¥ç­‰åœºæ™¯ä¸­ï¼Œå¯¹å¤æ‚å¯¹è±¡è¿›è¡Œçµæ´»ã€é«˜æ•ˆæ¯”è¾ƒçš„æŒ‘æˆ˜ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong></p>
<p>åœ¨ä¸‹ä¸€ç¯‡ ã€Šã€æ•°æ®è½¬æ¢ç¯‡ã€‘ä¿¡æ¯æç‚¼ä¸“å®¶ï¼šExtractor æ¨¡å¼ã€‹ ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•ä»å¤æ‚å¯¹è±¡ä¸­æå–å’Œè½¬æ¢ç‰¹å®šä¿¡æ¯ã€‚å¦‚æœè¯´ Comparer æ˜¯æ•°æ®çš„"è£åˆ¤"ï¼Œé‚£ä¹ˆ Extractor å°±æ˜¯æ•°æ®çš„"çŸ¿å·¥"â€”â€”æ·±å…¥å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œç²¾å‡†åœ°å®šä½ã€æå–å’Œæç‚¼æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å¤ç›˜ï¼š WebGL æ•°å­—å­ªç”Ÿå‰ç«¯æ¶æ„ï¼šå¦‚ä½•æ‰“é€ é«˜é¢œå€¼ã€é«˜æ€§èƒ½çš„ Web 3D å¯è§†åŒ–ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7582067084840632374</link>    <guid>https://juejin.cn/post/7582067084840632374</guid>    <pubDate>2025-12-11T00:18:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840632374" data-draft-id="7582066556088811583" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å¤ç›˜ï¼š WebGL æ•°å­—å­ªç”Ÿå‰ç«¯æ¶æ„ï¼šå¦‚ä½•æ‰“é€ é«˜é¢œå€¼ã€é«˜æ€§èƒ½çš„ Web 3D å¯è§†åŒ–ç³»ç»Ÿ"/> <meta itemprop="keywords" content="three.js"/> <meta itemprop="datePublished" content="2025-12-11T00:18:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Addisonx"/> <meta itemprop="url" content="https://juejin.cn/user/3651905710195595"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å¤ç›˜ï¼š WebGL æ•°å­—å­ªç”Ÿå‰ç«¯æ¶æ„ï¼šå¦‚ä½•æ‰“é€ é«˜é¢œå€¼ã€é«˜æ€§èƒ½çš„ Web 3D å¯è§†åŒ–ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3651905710195595/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Addisonx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:18:41.000Z" title="Thu Dec 11 2025 00:18:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ å‰è¨€</h2>
<p>åœ¨ä¼ä¸šçº§æ•°å­—å­ªç”Ÿï¼ˆDigital Twinï¼‰é¡¹ç›®ä¸­ï¼Œ**â€œå‰ç«¯å¯è§†åŒ–è¡¨ç°â€**å¾€å¾€å†³å®šäº†é¡¹ç›®çš„æˆè´¥ã€‚</p>
<p>å¾ˆå¤šé¡¹ç›®åå°æ•°æ®å¾ˆç¨³ï¼Œä½†å‰ç«¯æ¸²æŸ“å¡é¡¿ã€æ¨¡å‹ä¸‘é™‹ã€äº¤äº’ç”Ÿç¡¬ï¼Œæœ€ç»ˆå¯¼è‡´æ— æ³•äº¤ä»˜ã€‚ä½œä¸ºä¸€åä¸“æ³¨äº <strong>Web 3D å‘ˆç°ä¸å‰ç«¯å¯è§†åŒ–</strong> çš„å¼€å‘è€…ï¼Œæˆ‘è®¤ä¸ºï¼š<strong>è®©æ•°æ®â€œå¥½çœ‹â€ä¸”â€œå¥½ç”¨â€ï¼Œæ˜¯å‰ç«¯çš„æ ¸å¿ƒä»·å€¼ã€‚</strong></p>
<p>æœ¬æ–‡å°†åŸºäºæˆ‘ä»¬å›¢é˜Ÿæœ€è¿‘äº¤ä»˜çš„<strong>æ™ºæ…§å›­åŒºå¯è§†åŒ–å‰ç«¯é¡¹ç›®</strong>ï¼Œå¤ç›˜ä¸€å¥—<strong>é«˜å†…èšã€ä½è€¦åˆ</strong>çš„ Three.js å‰ç«¯æ¶æ„è®¾è®¡ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ—ï¸ ä¸€ã€ å‰ç«¯æ¶æ„è®¾è®¡ï¼šè®© 3D åªæ˜¯ä¸€ä¸ªâ€œç»„ä»¶â€</h2>
<p>ä¸ºäº†æ–¹ä¾¿é›†æˆåˆ°ä»»æ„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼ˆæ— è®ºåå°æ˜¯ Javaã€Python è¿˜æ˜¯ Goï¼‰ï¼Œæˆ‘ä»¬å°† 3D åœºæ™¯å°è£…ä¸ºç‹¬ç«‹çš„<strong>å‰ç«¯è§†å›¾ç»„ä»¶</strong>ã€‚</p>
<h3 data-id="heading-2">1. æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šæ•°æ®é©±åŠ¨è§†å›¾ (Data-Driven)</h3>
<p>å‰ç«¯åªè´Ÿè´£ä¸¤ä»¶äº‹ï¼š<strong>æ¸²æŸ“ï¼ˆRenderï¼‰</strong> å’Œ <strong>æ˜ å°„ï¼ˆMappingï¼‰</strong>ã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šé€šè¿‡ WebSocket/API æ¥æ”¶æ ‡å‡† JSON æ•°æ®ï¼ˆå¦‚ <code>{ id: 101, status: 'error' }</code>ï¼‰ã€‚</li>
<li><strong>è¾“å‡º</strong>ï¼š3D åœºæ™¯è‡ªåŠ¨å“åº”ï¼ˆIDä¸º101çš„æ¨¡å‹å˜çº¢ã€é—ªçƒï¼‰ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—æˆ‘ä»¬èƒ½ä»¥<strong>çº¯å‰ç«¯æ–¹å¼äº¤ä»˜</strong>ï¼Œç”²æ–¹åç«¯åªéœ€æŒ‰çº¦å®šæ¨é€æ•°æ®å³å¯ï¼Œæ— éœ€å…³å¿ƒ 3D é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">2. ä»£ç ç»„ç»‡ç»“æ„</h3>
<p>å»ºè®®å°† Three.js é€»è¾‘å°è£…ä¸ºç‹¬ç«‹çš„ Classï¼Œä¸ Vue/React UI å±‚å®Œå…¨è§£è€¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Viewer3D.js - çº¯ç²¹çš„æ¸²æŸ“å¼•æ“ç±»</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Viewer3D</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">domElement</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>(); <span class="hljs-comment">// æ¸²æŸ“å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SceneManager</span>();           <span class="hljs-comment">// åœºæ™¯ç®¡ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EffectComposer</span>();        <span class="hljs-comment">// åæœŸç‰¹æ•ˆ(å…‰æ™•/è¾‰å…‰)</span>
  }

  <span class="hljs-comment">// æš´éœ²ç»™ä¸šåŠ¡å±‚çš„ APIï¼šé«˜äº®è®¾å¤‡</span>
  <span class="hljs-title function_">highlightDevice</span>(<span class="hljs-params">deviceId, color</span>) {
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">findMeshById</span>(deviceId);
    <span class="hljs-keyword">if</span> (mesh) {
      mesh.<span class="hljs-property">material</span>.<span class="hljs-property">emissive</span>.<span class="hljs-title function_">setHex</span>(color);
      <span class="hljs-comment">// è§¦å‘ Shader æ‰«å…‰ç‰¹æ•ˆ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">triggerScan</span>(mesh.<span class="hljs-property">position</span>);
    }
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ› ï¸ äºŒã€ å‰ç«¯æ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹è§£æ</h2>
<h3 data-id="heading-5">1. è§†è§‰æ•ˆæœï¼šShader ç¼–å†™ä¸åæœŸå¤„ç†</h3>
<p>æ™®é€šçš„ Three.js æè´¨åå¡‘æ–™æ„Ÿï¼Œä¸ºäº†è¾¾åˆ°â€œç§‘æŠ€æ„Ÿâ€å¤§å±æ•ˆæœï¼Œæˆ‘ä»¬å¤§é‡ä½¿ç”¨äº†è‡ªå®šä¹‰ Shader å’Œ Post-Processingï¼ˆåæœŸå¤„ç†ï¼‰ã€‚</p>
<p><strong>æŠ€æœ¯å®ç°</strong>ï¼š</p>
<ul>
<li><strong>UnrealBloom</strong>ï¼šå®ç°åŸå¸‚å¤œæ™¯çš„è¾‰å…‰æ•ˆæœï¼ˆéœ“è™¹ç¯æ„Ÿï¼‰ã€‚</li>
<li><strong>Custom Shader</strong>ï¼šä¸ä½¿ç”¨ GIF è´´å›¾ï¼Œè€Œæ˜¯ç”¨ GLSL ç¼–å†™åŠ¨æ€çš„<strong>ç”µå­å›´æ </strong>å’Œ<strong>å»ºç­‘æ‰«æå…‰æ³¢</strong>ï¼Œæ¸…æ™°åº¦æ— é™ä¸”ä¸è€—è´¹æ˜¾å­˜ã€‚</li>
</ul>
<h3 data-id="heading-6">2. åæ ‡æ˜ å°„ç®—æ³•</h3>
<p>å‰ç«¯å¼€å‘å¸¸é‡åˆ°çš„ç—›ç‚¹ï¼šç”²æ–¹ç»™çš„æ˜¯ GPS ç»çº¬åº¦ï¼Œè€Œ 3D åœºæ™¯æ˜¯ç¬›å¡å°”åæ ‡ã€‚
æˆ‘ä»¬å°è£…äº†ä¸€å¥—<strong>å‰ç«¯è½¬æ¢ç®—æ³•</strong>ï¼Œæ”¯æŒå°† GeoJSON æ•°æ®ç›´æ¥æŠ•å°„åˆ° 3D åœ°å½¢ä¸Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯å·¥å…·å‡½æ•°ï¼šç»çº¬åº¦è½¬ Vector3</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">latLonToVector3</span>(<span class="hljs-params">lat, lon, radius = <span class="hljs-number">6371</span></span>) {
  <span class="hljs-keyword">const</span> phi = (<span class="hljs-number">90</span> - lat) * (<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>);
  <span class="hljs-keyword">const</span> theta = (lon + <span class="hljs-number">180</span>) * (<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>);
  <span class="hljs-keyword">const</span> x = -(radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(phi) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta));
  <span class="hljs-keyword">const</span> z = (radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(phi) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta));
  <span class="hljs-keyword">const</span> y = (radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(phi));
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(x, y, z);
}
</code></pre>
<h3 data-id="heading-7">3. æ€§èƒ½ä¼˜åŒ– (FPS &gt; 60)</h3>
<p>åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“æ•°ä¸‡ä¸ªç‰©ä½“ï¼Œæ€§èƒ½æ˜¯ç¬¬ä¸€æŒ‡æ ‡ã€‚æˆ‘ä»¬é‡‡ç”¨äº†çº¯å‰ç«¯çš„ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li><strong>GPU Instancing</strong>ï¼šå¯¹é‡å¤çš„æ ‘æœ¨ã€è·¯ç¯ã€æœºæŸœï¼Œåˆå¹¶ä¸ºä¸€æ¬¡ DrawCallï¼ŒCPU å¼€é”€å‡ ä¹ä¸ºé›¶ã€‚</li>
<li><strong>Draco å‹ç¼©</strong>ï¼šå°†å‡ ç™¾ MB çš„ OBJ æ¨¡å‹å‹ç¼©ä¸ºå‡  MB çš„ .glb æ–‡ä»¶ï¼ŒWeb ç«¯ç§’çº§åŠ è½½ã€‚</li>
<li><strong>æ˜¾å­˜ç®¡ç†</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ä¸å¯è§ç‰©ä½“ï¼ˆFrustum Cullingï¼‰ï¼Œå¹¶åœ¨ç»„ä»¶é”€æ¯æ—¶å½»åº•é‡Šæ”¾ Geometry å’Œ Material å†…å­˜ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ’» ä¸‰ã€ ç³»ç»Ÿè½åœ°æ•ˆæœ</h2>
<p>åŸºäºä¸Šè¿°å‰ç«¯æ¶æ„ï¼Œæˆ‘ä»¬å®Œæˆäº†è¿™å¥—<strong>æ™ºæ…§å›­åŒº/å·¥å‚å¯è§†åŒ–å¤§å±</strong>ã€‚</p>
<p><strong>å‰ç«¯ç•Œé¢å±•ç¤º</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48445e3ae40c4fc6bd2add2c86a67115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWRkaXNvbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766017120&amp;x-signature=sHdv%2BfLerKX80tltx7kk6WLfOGo%3D" alt="view.gif" loading="lazy"/>
<em>(å›¾æ³¨ï¼šçº¯å‰ç«¯å®ç°çš„æµå…‰æ•ˆæœã€PBRæè´¨åŠ CSS3D æ ‡ç­¾èåˆ)</em></p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æé€ŸåŠ è½½</strong>ï¼šé¦–å±åŠ è½½æ—¶é—´ &lt; 3ç§’ã€‚</li>
<li><strong>å…¨åœºæ™¯æ¼«æ¸¸</strong>ï¼šæ”¯æŒç¬¬ä¸€äººç§°/ç¬¬ä¸‰äººç§°è§†è§’å¹³æ»‘åˆ‡æ¢ã€‚</li>
<li><strong>å¤šç«¯å…¼å®¹</strong>ï¼šé€‚é… Chromeã€Edge åŠé«˜æ€§èƒ½å¹³æ¿æµè§ˆå™¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ¤ å››ã€ æŠ€æœ¯æ¢è®¨ä¸è½åœ°</h2>
<p>Web 3D å¼€å‘æ˜¯ä¸€ä¸ªæ·±å‘ï¼Œä»æ¨¡å‹å¯¼å‡ºåˆ° WebGL æ¸²æŸ“ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½å¯èƒ½é‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>æˆ‘ä»¬å›¢é˜Ÿåœ¨è¸©è¿‡æ— æ•°å‘åï¼Œæ²‰æ·€äº†è¿™å¥—æˆç†Ÿçš„<strong>å‰ç«¯å¯è§†åŒ–è§£å†³æ–¹æ¡ˆ</strong>ã€‚æˆ‘ä»¬éå¸¸ä¹æ„ä¸åŒè¡Œæˆ–æœ‰éœ€æ±‚çš„æœ‹å‹è¿›è¡Œ<strong>æŠ€æœ¯äº¤æµ</strong>ã€‚</p>
<p><strong>å¦‚æœä½ æ­£é¢ä¸´ä»¥ä¸‹æƒ…å†µï¼Œæ¬¢è¿æ²Ÿé€šï¼š</strong></p>
<ol>
<li><strong>åç«¯å›¢é˜Ÿ</strong>ï¼šä½ ä»¬æ“…é•¿ Java/Go ä¸šåŠ¡é€»è¾‘ï¼Œä½†ç¼ºå°‘èƒ½æå®šç‚«é…· 3D å‰ç«¯çš„ä¼™ä¼´ã€‚</li>
<li><strong>é¡¹ç›®é›†æˆ</strong>ï¼šæ‰‹å¤´æœ‰æ™ºæ…§åŸå¸‚/å·¥å‚é¡¹ç›®ï¼Œéœ€è¦ä¸€ä¸ªç¨³å®šçš„å‰ç«¯ 3D æ¨¡å—æ¥æå‡é¡¹ç›®â€œé¢œå€¼â€ã€‚</li>
<li><strong>æŠ€æœ¯ç“¶é¢ˆ</strong>ï¼šç°æœ‰çš„ 3D åœºæ™¯å¡é¡¿ã€æ•ˆæœä¸ç†æƒ³ï¼Œéœ€è¦ä¼˜åŒ–æ–¹æ¡ˆã€‚</li>
</ol>
<p><strong>åœ¨çº¿æ¼”ç¤ºç¯å¢ƒ</strong>ï¼š
ğŸ‘‰
<em>(æ³¨ï¼šå»ºè®®ä½¿ç”¨ PC ç«¯ Chrome è®¿é—®ä»¥è·å¾—æœ€ä½³ä½“éªŒ)</em></p>
<p>ä¸ç®¡æ˜¯<strong>æŠ€æœ¯æ¢è®¨</strong>ã€<strong>æºç å’¨è¯¢</strong>è¿˜æ˜¯<strong>é¡¹ç›®åä½œ</strong>ï¼Œéƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€æˆ–ç‚¹å‡»å¤´åƒç§ä¿¡ï¼Œäº¤ä¸ªæœ‹å‹ï¼Œå…±åŒè¿›æ­¥ã€‚</p>
<hr/>
<blockquote>
<p><strong>å£°æ˜</strong>ï¼šæœ¬æ–‡æ ¸å¿ƒä»£ç ä¸æ¶æ„æ€è·¯å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webpack vs Vite å…¨æ–¹ä½å¯¹æ¯”ï¼šåŸç†ã€é…ç½®ã€åœºæ™¯ä¸€æ¬¡è®²é€]]></title>    <link>https://juejin.cn/post/7582063437414514726</link>    <guid>https://juejin.cn/post/7582063437414514726</guid>    <pubDate>2025-12-11T01:05:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582063437414514726" data-draft-id="7579164768063782939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webpack vs Vite å…¨æ–¹ä½å¯¹æ¯”ï¼šåŸç†ã€é…ç½®ã€åœºæ™¯ä¸€æ¬¡è®²é€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T01:05:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ycgg"/> <meta itemprop="url" content="https://juejin.cn/user/1926000101039192"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webpack vs Vite å…¨æ–¹ä½å¯¹æ¯”ï¼šåŸç†ã€é…ç½®ã€åœºæ™¯ä¸€æ¬¡è®²é€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1926000101039192/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ycgg
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:05:01.000Z" title="Thu Dec 11 2025 01:05:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–é¢†åŸŸï¼ŒWebpack å’Œ Vite æ˜¯æœ€ä¸»æµçš„ä¸¤å¤§æ„å»ºå·¥å…·ï¼Œä½†ä¸¤è€…çš„è®¾è®¡ç†å¿µå’Œä½¿ç”¨ä½“éªŒå¤©å·®åœ°åˆ«ã€‚æœ¬æ–‡å°†ä» <strong>æ ¸å¿ƒåŸç†ã€å…³é”®å·®å¼‚ã€ä»£ç ç¤ºä¾‹ã€é€‰å‹å»ºè®®</strong> å››ä¸ªç»´åº¦ï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å¸®ä½ å½»åº•ææ‡‚å®ƒä»¬çš„åŒºåˆ«ï¼Œé¿å¼€é€‰å‹å’Œé…ç½®å‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šä¸¤ç§å®Œå…¨ä¸åŒçš„æ„å»ºæ€è·¯</h2>
<p>å…ˆä¸€å¥è¯åˆ†æ¸…ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ï¼š</p>
<ul>
<li><strong>Webpack</strong>ï¼šã€Œå…¨åœºæ™¯æ‰“åŒ…å·¥å…·ã€â€”â€” ä¸ç®¡å¼€å‘è¿˜æ˜¯ç”Ÿäº§ï¼Œéƒ½å…ˆæŠŠæ‰€æœ‰æ¨¡å—ï¼ˆJS/TS/CSS/å›¾ç‰‡ï¼‰æ‰“åŒ…æˆ bundle æ–‡ä»¶ï¼Œå…¼å®¹æ‰€æœ‰åœºæ™¯ä½†å¼€å‘ä½“éªŒä¸€èˆ¬ã€‚</li>
<li><strong>Vite</strong>ï¼šã€Œç°ä»£å‰ç«¯æ„å»ºå·¥å…·ã€â€”â€” å¼€å‘æ—¶ä¸æ‰“åŒ…ï¼Œç”Ÿäº§æ—¶è½»é‡æ‰“åŒ…ï¼Œä¸»æ‰“ã€Œå¿«åˆ°é£èµ·çš„å¼€å‘ä½“éªŒã€ï¼Œä¸“ä¸ºç°ä»£æµè§ˆå™¨è®¾è®¡ã€‚</li>
</ul>
<p>å¯ä»¥ç”¨ä¸€ä¸ªæ¯”å–»ç†è§£ï¼š</p>
<ul>
<li>Webpack åƒã€Œè‡ªåŠ©é¤æå‰å¤‡å¥½æ‰€æœ‰èœã€ï¼šä¸ç®¡ä½ åƒä¸åƒï¼Œå…ˆæŠŠæ‰€æœ‰é£Ÿæï¼ˆæ¨¡å—ï¼‰åŠ å·¥å¥½ï¼ˆæ‰“åŒ…ï¼‰ï¼Œä¼˜ç‚¹æ˜¯èƒ½æ»¡è¶³æ‰€æœ‰äººéœ€æ±‚ï¼Œç¼ºç‚¹æ˜¯å‡†å¤‡æ—¶é—´é•¿ã€‚</li>
<li>Vite åƒã€Œé¤å…ç‚¹å•åç°åšã€ï¼šå¼€å‘æ—¶åªæ­å¥½å¨æˆ¿ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œä½ ç‚¹ä»€ä¹ˆèœï¼ˆè¯·æ±‚ä»€ä¹ˆæ¨¡å—ï¼‰æ‰ç°åšï¼ˆå³æ—¶è½¬è¯‘ï¼‰ï¼Œä¼˜ç‚¹æ˜¯ç­‰å¾…æ—¶é—´çŸ­ï¼Œç¼ºç‚¹æ˜¯åªæ”¯æŒâ€œç°ä»£é£Ÿå®¢â€ï¼ˆç°ä»£æµè§ˆå™¨ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŸç†ï¼šä¸ºä»€ä¹ˆ Vite æ¯” Webpack å¿«ï¼Ÿ</h2>
<h3 data-id="heading-2">1. Webpack åŸç†ï¼šå…¨é‡æ‰“åŒ…ï¼Œä¸€æ­¥åˆ°ä½</h3>
<p>Webpack çš„æ ¸å¿ƒé€»è¾‘æ˜¯ã€Œ<strong>æå‰æ‰“åŒ…æ‰€æœ‰æ¨¡å—</strong>ã€ï¼Œæ— è®ºå¼€å‘è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œæµç¨‹éƒ½ä¸€è‡´ï¼š</p>
<ol>
<li>ä»å…¥å£æ–‡ä»¶ï¼ˆå¦‚ <code>src/index.js</code>ï¼‰å¼€å§‹ï¼Œé€’å½’è§£ææ‰€æœ‰ä¾èµ–ï¼ˆ<code>import</code>/<code>require</code>ï¼‰ï¼Œæ„å»ºã€Œä¾èµ–å…³ç³»å›¾ã€ï¼›</li>
<li>é€šè¿‡ <strong>Loader</strong> è½¬è¯‘é JS æ¨¡å—ï¼ˆå¦‚ TSâ†’JSã€CSSâ†’JSï¼‰ï¼›</li>
<li>é€šè¿‡ <strong>Plugin</strong> æ‰©å±•åŠŸèƒ½ï¼ˆå¦‚ç”Ÿæˆ HTMLã€å‹ç¼©ä»£ç ï¼‰ï¼›</li>
<li>æŠŠæ‰€æœ‰æ¨¡å—åˆå¹¶æˆä¸€ä¸ªæˆ–å¤šä¸ª <code>bundle.js</code>ï¼Œè¾“å‡ºåˆ° <code>dist</code> ç›®å½•ã€‚</li>
</ol>
<p><strong>å¼€å‘æ—¶çš„ç—›ç‚¹</strong>ï¼š<br/>
å³ä½¿åªæ”¹ä¸€è¡Œä»£ç ï¼ŒWebpack ä¹Ÿå¯èƒ½éœ€è¦é‡æ–°è§£ææ•´ä¸ªä¾èµ–é“¾ã€é‡æ–°æ‰“åŒ…ï¼Œå¯¼è‡´ã€Œå†·å¯åŠ¨æ…¢ã€ã€Œçƒ­æ›´æ–°ï¼ˆHMRï¼‰å»¶è¿Ÿã€ï¼Œé¡¹ç›®è¶Šå¤§è¶Šæ˜æ˜¾ã€‚</p>
<h3 data-id="heading-3">2. Vite åŸç†ï¼šéæ‰“åŒ…å¼€å‘ + è½»é‡ç”Ÿäº§æ‰“åŒ…</h3>
<p>Vite æ‹†åˆ†äº†ã€Œå¼€å‘æ—¶ã€å’Œã€Œç”Ÿäº§æ—¶ã€çš„é€»è¾‘ï¼Œæ ¸å¿ƒæ˜¯ã€Œ<strong>åˆ©ç”¨ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒ ES æ¨¡å—ï¼ˆESMï¼‰</strong>ã€ï¼š</p>
<ul>
<li>
<p><strong>å¼€å‘æ—¶ï¼ˆéæ‰“åŒ…ï¼‰</strong>ï¼š</p>
<ol>
<li>å¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œä¸æå‰æ‰“åŒ…ä»»ä½•æ¨¡å—ï¼›</li>
<li>æµè§ˆå™¨è¯·æ±‚å…¥å£æ–‡ä»¶ï¼ˆ<code>index.html</code>ï¼‰æ—¶ï¼ŒVite åŠ¨æ€æ”¹å†™æ¨¡å—å¼•ç”¨ï¼Œè®©æµè§ˆå™¨é€šè¿‡ ESM åŸç”ŸåŠ è½½æ¨¡å—ï¼›</li>
<li>å½“æµè§ˆå™¨è¯·æ±‚æŸä¸ªæ¨¡å—ï¼ˆå¦‚ <code>src/App.tsx</code>ï¼‰æ—¶ï¼ŒVite ç”¨ <strong>ESBuild</strong>ï¼ˆGo è¯­è¨€ç¼–å†™ï¼Œé€Ÿåº¦æ˜¯ Babel çš„ 10-100 å€ï¼‰å³æ—¶è½¬è¯‘æ¨¡å—ï¼Œè¿”å›ç»™æµè§ˆå™¨ï¼›</li>
<li>çƒ­æ›´æ–°æ—¶ï¼Œä»…æ›´æ–°ä¿®æ”¹çš„æ¨¡å—ï¼Œæ— éœ€é‡æ–°æ„å»ºæ•´ä¸ªä¾èµ–é“¾ã€‚</li>
</ol>
</li>
<li>
<p><strong>ç”Ÿäº§æ—¶ï¼ˆè½»é‡æ‰“åŒ…ï¼‰</strong>ï¼š
ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œä¸ºäº†å…¼å®¹æ›´å¤šåœºæ™¯å’Œä¼˜åŒ–æ€§èƒ½ï¼ŒVite ä¼šåˆ‡æ¢åˆ°ã€Œæ‰“åŒ…æ¨¡å¼ã€ï¼Œä½†ä¸è‡ªå·±å®ç°æ‰“åŒ…é€»è¾‘ï¼Œè€Œæ˜¯å¤ç”¨ <strong>Rollup</strong>ï¼ˆæ¯” Webpack æ‰“åŒ…æ›´é«˜æ•ˆã€äº§ç‰©æ›´å°ï¼‰ï¼Œæœ€ç»ˆè¾“å‡ºä¼˜åŒ–åçš„é™æ€èµ„æºã€‚</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š<br/>
å¼€å‘æ—¶è·³è¿‡å…¨é‡æ‰“åŒ…ï¼Œä¾èµ– ESM åŸç”ŸåŠ è½½å’Œ ESBuild è½¬è¯‘ï¼Œå†·å¯åŠ¨å’Œçƒ­æ›´æ–°é€Ÿåº¦è¿œè¶… Webpackã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€å…³é”®å·®å¼‚å¯¹æ¯”è¡¨ï¼ˆä¸€ç›®äº†ç„¶ï¼‰</h2>




























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td>æ„å»ºæ¨¡å¼ï¼ˆå¼€å‘æ—¶ï¼‰</td><td>å…¨é‡æ‰“åŒ…ï¼ˆè§£ææ‰€æœ‰ä¾èµ–â†’ç”Ÿæˆ bundleï¼‰</td><td>éæ‰“åŒ…ï¼ˆESM åŸç”ŸåŠ è½½+å³æ—¶è½¬è¯‘ï¼‰</td></tr><tr><td>æ„å»ºæ¨¡å¼ï¼ˆç”Ÿäº§æ—¶ï¼‰</td><td>è‡ªèº«æ‰“åŒ…å¼•æ“ï¼ˆæ”¯æŒå¤šå…¥å£ã€ä»£ç åˆ†å‰²ï¼‰</td><td>åŸºäº Rollup æ‰“åŒ…ï¼ˆäº§ç‰©æ›´å°ã€Tree-shaking æ›´ä¼˜ï¼‰</td></tr><tr><td>å†·å¯åŠ¨é€Ÿåº¦</td><td>æ…¢ï¼ˆé¡¹ç›®è¶Šå¤§è¶Šæ…¢ï¼‰</td><td>æå¿«ï¼ˆä»…å¯åŠ¨æœåŠ¡å™¨ï¼Œä¸æ‰“åŒ…ï¼‰</td></tr><tr><td>çƒ­æ›´æ–°ï¼ˆHMRï¼‰é€Ÿåº¦</td><td>ä¸­ç­‰â†’æ…¢ï¼ˆéœ€é‡æ–°æ„å»ºæ¨¡å—é“¾ï¼‰</td><td>æå¿«ï¼ˆä»…æ›´æ–°ä¿®æ”¹çš„æ¨¡å—ï¼‰</td></tr><tr><td>è½¬è¯‘å·¥å…·</td><td>ä¾èµ– Loaderï¼ˆå¦‚ babel-loaderã€ts-loaderï¼‰</td><td>å†…ç½® ESBuildï¼ˆæ— éœ€æ‰‹åŠ¨é…ç½®ï¼‰</td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>é«˜ï¼ˆéœ€åŒºåˆ† Loader/Pluginï¼Œé…ç½®ç¹çï¼‰</td><td>ä½ï¼ˆé›¶é…ç½®å¯åŠ¨ï¼ŒæŒ‰éœ€æ‰©å±•ï¼‰</td></tr><tr><td>ç”Ÿæ€ç‰¹ç‚¹</td><td>åºå¤§ä¸”å°é—­ï¼ˆä»…æ”¯æŒ Webpack ä¸“å±æ’ä»¶/Loaderï¼‰</td><td>ç®€æ´ä¸”å¼€æ”¾ï¼ˆå…¼å®¹å¤§éƒ¨åˆ† Rollup æ’ä»¶ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>å¼ºï¼ˆæ”¯æŒ IE11 ç­‰è€æµè§ˆå™¨ã€CJS/ESM æ¨¡å—ï¼‰</td><td>ç°ä»£æµè§ˆå™¨ä¼˜å…ˆï¼ˆå¼€å‘æ—¶ä¾èµ– ESMï¼Œå¯é€šè¿‡æ’ä»¶å…¼å®¹ IE11ï¼‰</td></tr><tr><td>æ ¸å¿ƒæ‰©å±•æ–¹å¼</td><td>Loaderï¼ˆè½¬è¯‘æ¨¡å—ï¼‰+ Pluginï¼ˆæµç¨‹æ‰©å±•ï¼‰</td><td>å•ä¸€æ’ä»¶ä½“ç³»ï¼ˆé€šè¿‡é’©å­è¦†ç›–è½¬è¯‘+æµç¨‹æ‰©å±•ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤§å‹å¤æ‚é¡¹ç›®ã€è€é¡¹ç›®è¿ç§»ã€éœ€å…¼å®¹è€æµè§ˆå™¨</td><td>æ–°é¡¹ç›®ã€ä¸­ä¸­å°å‹åº”ç”¨ã€Vue/React ç”Ÿæ€ã€è¿½æ±‚å¼€å‘æ•ˆç‡</td></tr></tbody></table>
<h2 data-id="heading-5">å››ã€ä»£ç ç¤ºä¾‹å¯¹æ¯”ï¼ˆæ ¸å¿ƒé…ç½®+è„šæœ¬ï¼‰</h2>
<p>ä¸‹é¢é€šè¿‡ã€ŒReact + TS é¡¹ç›®ã€çš„æ ¸å¿ƒé…ç½®ï¼Œå¯¹æ¯”ä¸¤è€…çš„å·®å¼‚ï¼Œæ„Ÿå— Vite çš„ç®€æ´ã€‚</p>
<h3 data-id="heading-6">1. é¡¹ç›®åˆå§‹åŒ– + å¼€å‘/æ‰“åŒ…è„šæœ¬</h3>
<h4 data-id="heading-7">Webpack é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ–é¡¹ç›®</span>
npm init -y

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–ï¼ˆä¸€å † Loader å’Œ Pluginï¼‰</span>
npm install -D webpack webpack-cli babel-loader @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript html-webpack-plugin webpack-dev-server typescript ts-loader

<span class="hljs-comment"># 3. package.json è„šæœ¬</span>
{
  &amp;<span class="hljs-comment">#34;scripts&amp;#34;: {</span>
    &amp;<span class="hljs-comment">#34;dev&amp;#34;: &amp;#34;webpack serve&amp;#34;,  // å¼€å‘æœåŠ¡</span>
    &amp;<span class="hljs-comment">#34;build&amp;#34;: &amp;#34;webpack --mode production&amp;#34;  // ç”Ÿäº§æ‰“åŒ…</span>
  }
}
</code></pre>
<h4 data-id="heading-8">Vite é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ–é¡¹ç›®ï¼ˆä¸€é”®ç”Ÿæˆï¼Œè‡ªå¸¦ React+TS é…ç½®ï¼‰</span>
npm create vite@latest my-vite-app -- --template react-ts

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–ï¼ˆä»…éœ€å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œæ— éœ€æ‰‹åŠ¨è£…è½¬è¯‘å·¥å…·ï¼‰</span>
<span class="hljs-built_in">cd</span> my-vite-app &amp;&amp; npm install

<span class="hljs-comment"># 3. package.json è„šæœ¬ï¼ˆè‡ªå¸¦ï¼‰</span>
{
  &amp;<span class="hljs-comment">#34;scripts&amp;#34;: {</span>
    &amp;<span class="hljs-comment">#34;dev&amp;#34;: &amp;#34;vite&amp;#34;,  // å¼€å‘æœåŠ¡</span>
    &amp;<span class="hljs-comment">#34;build&amp;#34;: &amp;#34;tsc &amp;&amp; vite build&amp;#34;,  // ç±»å‹æ£€æŸ¥+ç”Ÿäº§æ‰“åŒ…</span>
    &amp;<span class="hljs-comment">#34;preview&amp;#34;: &amp;#34;vite preview&amp;#34;  // é¢„è§ˆç”Ÿäº§äº§ç‰©</span>
  }
}
</code></pre>
<h3 data-id="heading-9">2. æ ¸å¿ƒé…ç½®æ–‡ä»¶å¯¹æ¯”ï¼ˆå¤„ç† TS/JSX/CSSï¼‰</h3>
<h4 data-id="heading-10">Webpack é…ç½®ï¼ˆwebpack.config.jsï¼‰</h4>
<p>éœ€è¦æ‰‹åŠ¨é…ç½® Loader å’Œ Pluginï¼Œæ‰èƒ½å¤„ç† TS/JSX/CSSï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.tsx'</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[hash].js'</span>,
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      <span class="hljs-comment">// å¤„ç† TS/JSXï¼ˆéœ€è¦ babel-loader + @babel/preset-typescriptï¼‰</span>
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(ts|tsx)$/</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">'babel-loader'</span>
      },
      <span class="hljs-comment">// å¤„ç† CSSï¼ˆéœ€è¦ css-loader + style-loaderï¼‰</span>
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>]  <span class="hljs-comment">// æ‰§è¡Œé¡ºåºï¼šcss-loader â†’ style-loader</span>
      }
    ]
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>]
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ç”Ÿæˆ HTMLï¼ˆéœ€è¦ html-webpack-pluginï¼‰</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span> })
  ],
  <span class="hljs-attr">devServer</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">mode</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">'development'</span>
};
</code></pre>
<h4 data-id="heading-11">Vite é…ç½®ï¼ˆvite.config.tsï¼‰</h4>
<p>é›¶é…ç½®å³å¯å¤„ç† TS/JSX/CSSï¼Œä»…éœ€å°‘é‡é…ç½®æ‰©å±•åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>;  <span class="hljs-comment">// ä»…éœ€ä¸€ä¸ªæ’ä»¶å¤„ç† React</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],  <span class="hljs-comment">// é›†æˆ React æ”¯æŒï¼ˆå« TS/JSX è½¬è¯‘ï¼‰</span>
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">outDir</span>: <span class="hljs-string">'dist'</span>
  }
});
</code></pre>
<h3 data-id="heading-12">3. æ’ä»¶æœºåˆ¶å¯¹æ¯”ï¼ˆå¤„ç† Vue å•æ–‡ä»¶ç»„ä»¶ï¼‰</h3>
<h4 data-id="heading-13">Webpack ä¸­ï¼šéœ€è¦ Loader + Plugin é…åˆ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install -D vue-loader vue-style-loader css-loader MiniCssExtractPlugin
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">VueLoaderPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue-loader'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.vue$/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">'vue-loader'</span>  <span class="hljs-comment">// Loader è´Ÿè´£è½¬è¯‘ Vue SFC</span>
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
        <span class="hljs-attr">use</span>: [process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span> : <span class="hljs-string">'vue-style-loader'</span>, <span class="hljs-string">'css-loader'</span>]
      }
    ]
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueLoaderPlugin</span>(),  <span class="hljs-comment">// Plugin è´Ÿè´£å¤„ç† Vue ç›¸å…³æµç¨‹</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>()  <span class="hljs-comment">// Plugin è´Ÿè´£ç”Ÿäº§æ—¶æå– CSS</span>
  ]
};
</code></pre>
<h4 data-id="heading-14">Vite ä¸­ï¼šä»…éœ€ä¸€ä¸ªæ’ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install -D @vitejs/plugin-vue
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()]  <span class="hljs-comment">// ä¸€ä¸ªæ’ä»¶æå®šè½¬è¯‘+æµç¨‹æ‰©å±•</span>
});
</code></pre>
<h2 data-id="heading-15">äº”ã€æ’ä»¶æœºåˆ¶æ·±åº¦è§£æï¼ˆæ ¸å¿ƒå·®å¼‚ï¼‰</h2>
<p>Webpack å’Œ Vite çš„æ’ä»¶æœºåˆ¶å·®å¼‚ï¼Œæ˜¯ä¸¤è€…é…ç½®å¤æ‚åº¦å’Œçµæ´»æ€§çš„å…³é”®ï¼š</p>
<h3 data-id="heading-16">1. Webpackï¼šLoader + Plugin åˆ†å·¥æ˜ç¡®</h3>
<ul>
<li><strong>Loader</strong>ï¼šä»…è´Ÿè´£ã€Œæ¨¡å—è½¬è¯‘ã€ï¼ˆå¦‚ TSâ†’JSã€CSSâ†’JSï¼‰ï¼Œæ˜¯ã€Œæ¨¡å—çº§åˆ«çš„å·¥å…·ã€ï¼›</li>
<li><strong>Plugin</strong>ï¼šä»…è´Ÿè´£ã€Œæµç¨‹æ‰©å±•ã€ï¼ˆå¦‚ç”Ÿæˆ HTMLã€å‹ç¼©ä»£ç ï¼‰ï¼Œæ˜¯ã€Œæµç¨‹çº§åˆ«çš„å·¥å…·ã€ï¼›</li>
<li>å¿…é¡»é…åˆä½¿ç”¨ï¼Œæ¯”å¦‚å¤„ç† Vue æ–‡ä»¶éœ€è¦ <code>vue-loader</code>ï¼ˆè½¬è¯‘ï¼‰+ <code>VueLoaderPlugin</code>ï¼ˆæµç¨‹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">2. Viteï¼šå•ä¸€æ’ä»¶ä½“ç³»ï¼ˆæ•´åˆ Loader+Plugin åŠŸèƒ½ï¼‰</h3>
<p>Vite æ²¡æœ‰ Loader æ¦‚å¿µï¼Œ<strong>æ’ä»¶æ˜¯å”¯ä¸€çš„æ‰©å±•æ–¹å¼</strong>ï¼Œé€šè¿‡ã€Œé’©å­å‡½æ•°ã€åŒæ—¶è¦†ç›–è½¬è¯‘å’Œæµç¨‹æ‰©å±•åŠŸèƒ½ï¼š</p>
<ul>
<li>è½¬è¯‘æ¨¡å—ï¼ˆå¯¹åº” Webpack Loaderï¼‰ï¼šé€šè¿‡æ’ä»¶çš„ <code>transform</code> é’©å­ï¼ˆå¦‚å³æ—¶è½¬è¯‘ TS/JSXï¼‰ï¼›</li>
<li>æµç¨‹æ‰©å±•ï¼ˆå¯¹åº” Webpack Pluginï¼‰ï¼šé€šè¿‡æ’ä»¶çš„å…¶ä»–é’©å­ï¼ˆå¦‚ <code>configureServer</code> é…ç½®å¼€å‘æœåŠ¡å™¨ã€<code>writeBundle</code> å¤„ç†äº§ç‰©ï¼‰ï¼›</li>
<li>å…¼å®¹ Rollup æ’ä»¶ï¼šç”Ÿäº§æ—¶åŸºäº Rollup æ‰“åŒ…ï¼Œå¤§éƒ¨åˆ† Rollup æ’ä»¶å¯ç›´æ¥åœ¨ Vite ä¸­ä½¿ç”¨ï¼ˆå¦‚ <code>rollup-plugin-terser</code> å‹ç¼©ä»£ç ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šVite è‡ªå®šä¹‰æ’ä»¶ï¼ˆå¤„ç† .txt æ–‡ä»¶ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'transform-txt'</span>,  <span class="hljs-comment">// æ’ä»¶åç§°ï¼ˆå¿…å¡«ï¼‰</span>
      <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {  <span class="hljs-comment">// è½¬è¯‘é’©å­ï¼ˆå¯¹åº” Webpack Loaderï¼‰</span>
        <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.txt'</span>)) {
          <span class="hljs-comment">// å°† .txt æ–‡ä»¶å†…å®¹è½¬ä¸º JS æ¨¡å—å¯¼å‡º</span>
          <span class="hljs-keyword">return</span> <span class="hljs-string">`export default <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(code)}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
    }
  ]
});
</code></pre>
<p>ä½¿ç”¨æ—¶ç›´æ¥å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> content <span class="hljs-keyword">from</span> <span class="hljs-string">'./test.txt'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(content);  <span class="hljs-comment">// è¾“å‡º test.txt çš„å†…å®¹</span>
</code></pre>
<h2 data-id="heading-18">å…­ã€é€‰å‹å»ºè®®ï¼šä»€ä¹ˆæ—¶å€™é€‰ Webpackï¼Œä»€ä¹ˆæ—¶å€™é€‰ Viteï¼Ÿ</h2>
<h3 data-id="heading-19">é€‰ Vite çš„åœºæ™¯ï¼ˆä¼˜å…ˆæ¨èï¼‰</h3>
<ol>
<li><strong>æ–°é¡¹ç›®å¯åŠ¨</strong>ï¼šå°¤å…¶æ˜¯ Vue/React + TS çš„ä¸­ä¸­å°å‹åº”ç”¨ï¼Œè¿½æ±‚æè‡´å¼€å‘ä½“éªŒï¼›</li>
<li><strong>ç°ä»£æµè§ˆå™¨ä¼˜å…ˆ</strong>ï¼šé¡¹ç›®æ— éœ€å…¼å®¹ IE11ï¼Œç›®æ ‡ç”¨æˆ·ä½¿ç”¨ Chrome/Firefox/Safari ç­‰ç°ä»£æµè§ˆå™¨ï¼›</li>
<li><strong>å¼€å‘æ•ˆç‡ä¼˜å…ˆ</strong>ï¼šå›¢é˜Ÿä¸æƒ³èŠ±å¤§é‡æ—¶é—´é…ç½®æ„å»ºå·¥å…·ï¼Œå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹å¼€å‘ï¼›</li>
<li><strong>é™æ€ç«™ç‚¹/ç»„ä»¶åº“</strong>ï¼šVite å†…ç½®çš„é™æ€èµ„æºå¤„ç†å’Œ Rollup æ‰“åŒ…ä¼˜åŒ–ï¼Œé€‚åˆç»„ä»¶åº“ã€é™æ€åšå®¢ç­‰ã€‚</li>
</ol>
<h3 data-id="heading-20">é€‰ Webpack çš„åœºæ™¯</h3>
<ol>
<li><strong>å¤§å‹å¤æ‚é¡¹ç›®</strong>ï¼šæ¯”å¦‚å¤šå…¥å£ã€å¤šç¯å¢ƒæ‰“åŒ…ï¼ˆæµè§ˆå™¨+Node.js+Electronï¼‰ã€å¤æ‚ä»£ç åˆ†å‰²ç­–ç•¥ï¼›</li>
<li><strong>è€é¡¹ç›®è¿ç§»</strong>ï¼šé¡¹ç›®å·²åŸºäº Webpack å¼€å‘å¤šå¹´ï¼Œä¾èµ–å¤§é‡è‡ªå®šä¹‰ Loader/Pluginï¼Œè¿ç§»æˆæœ¬é«˜ï¼›</li>
<li><strong>éœ€è¦å…¼å®¹è€æµè§ˆå™¨</strong>ï¼šå¿…é¡»æ”¯æŒ IE11 ç­‰è€æµè§ˆå™¨ï¼ŒWebpack çš„å…¼å®¹æ€§å¤„ç†æ›´æˆç†Ÿï¼›</li>
<li><strong>ç‰¹æ®Šåœºæ™¯éœ€æ±‚</strong>ï¼šæ¯”å¦‚éœ€è¦é›†æˆç‰¹å®šå·¥å…·ï¼ˆå¦‚ Webpack Dev Middlewareï¼‰ã€å¤„ç†ç‰¹æ®Šèµ„æºï¼ˆå¦‚å¤§å‹è§†é¢‘ã€WASM æ¨¡å—ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-21">ä¸ƒã€æ€»ç»“</h2>
<p>Webpack æ˜¯ã€Œå…¨èƒ½é€‰æ‰‹ã€ï¼Œé€šè¿‡ã€Œå…¨é‡æ‰“åŒ…ã€å’Œã€Œåºå¤§ç”Ÿæ€ã€è¦†ç›–æ‰€æœ‰å‰ç«¯æ„å»ºåœºæ™¯ï¼Œä½†ç‰ºç‰²äº†å¼€å‘ä½“éªŒå’Œé…ç½®ç®€æ´æ€§ï¼›<br/>
Vite æ˜¯ã€Œç°ä»£ä¼˜ç­‰ç”Ÿã€ï¼Œé€šè¿‡ã€Œéæ‰“åŒ…å¼å¼€å‘ã€å’Œã€ŒESBuild/Rollup ä¼˜åŒ–ã€ï¼Œè§£å†³äº† Webpack çš„æ ¸å¿ƒç—›ç‚¹ï¼Œé…ç½®æ›´ç®€æ´ã€é€Ÿåº¦æ›´å¿«ï¼Œä½†èšç„¦äºç°ä»£å‰ç«¯åœºæ™¯ã€‚</p>
<p>éšç€ Vite ç”Ÿæ€çš„å¿«é€Ÿæˆç†Ÿï¼Œ<strong>90% çš„æ–°å‰ç«¯é¡¹ç›®éƒ½å¯ä»¥ä¼˜å…ˆé€‰æ‹© Vite</strong>ï¼›åªæœ‰åœ¨å¤§å‹å¤æ‚é¡¹ç›®ã€è€é¡¹ç›®è¿ç§»æˆ–ç‰¹æ®Šå…¼å®¹åœºæ™¯ä¸‹ï¼ŒWebpack ä»æ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ å½»åº•ææ‡‚ä¸¤è€…çš„å·®å¼‚ï¼Œåšå‡ºæœ€é€‚åˆè‡ªå·±é¡¹ç›®çš„é€‰å‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨langchain Next é¡¹ç›®ä¸­ä½¿ç”¨ shadcn/ui çš„è®°å½•]]></title>    <link>https://juejin.cn/post/7582104240987062298</link>    <guid>https://juejin.cn/post/7582104240987062298</guid>    <pubDate>2025-12-11T01:22:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240987062298" data-draft-id="7582047554090139657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨langchain Next é¡¹ç›®ä¸­ä½¿ç”¨ shadcn/ui çš„è®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-11T01:22:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾ç½¹é¸Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1838039173172072"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨langchain Next é¡¹ç›®ä¸­ä½¿ç”¨ shadcn/ui çš„è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1838039173172072/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾ç½¹é¸Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:22:50.000Z" title="Thu Dec 11 2025 01:22:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>è§‚ç»</strong>ï¼šä½œä¸ºä¸€ä¸ªæ¥è§¦ai-agentæ¡†æ¶ä¸ä¹…çš„å¼€å‘è€…ï¼Œæœ€è¿‘åœ¨å­¦ä¹  Next + LangChain æŠ€æœ¯æ ˆæ—¶ï¼Œå†³å®šåšä¸€ä¸ª AI èŠå¤© demo æ¥å·©å›ºçŸ¥è¯†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°è¯•äº†å¤šä¸ª UI æ¡†æ¶ï¼Œæœ€ç»ˆé€‰æ‹©äº† shadcn/uiã€‚è®°å½•ä¸‹è¿™æ®µå­¦ä¹ ç»å†ï¼Œå¸Œæœ›æœªæ¥èƒ½æŸ¥æ¼è¡¥ç¼ºã€‚</p>
<h2 data-id="heading-0">èµ·å› ï¼šä¸ºä»€ä¹ˆé€‰æ‹© shadcn/uiï¼Ÿ</h2>
<p>ç°å¦‚ä»Šuiæ¡†æ¶ç™¾èŠ±é½æ”¾ï¼Œä¸è¿‡å¯¹ç»„ä»¶åº“çš„é€‰æ‹©è¿˜æ˜¯æœ‰ç‚¹å›°æƒ‘ï¼š</p>
<ul>
<li>Ant Designï¼Ÿæ„Ÿè§‰å¤ªé‡äº†ï¼Œè€Œä¸”ä¸»è¦æ˜¯é¢å‘åå°ç³»ç»Ÿçš„</li>
<li>MUIï¼ŸReact ç”Ÿæ€é‡Œå¾ˆç«ï¼Œä½†é…ç½®ä¸»é¢˜æœ‰ç‚¹å¤æ‚</li>
<li>Tailwind CSSï¼Ÿå¬è¯´å¾ˆæµè¡Œï¼Œä½†è‡ªå·±å†™ç»„ä»¶å¤ªè´¹æ—¶é—´</li>
</ul>
<h2 data-id="heading-1">ç¬¬ä¸€ä¸ªå‘ï¼šå®ƒæ ¹æœ¬ä¸æ˜¯ npm åŒ…ï¼</h2>
<p>æŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹ï¼Œæˆ‘å…´å†²å†²åœ°è¿è¡Œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">bash
ç¼–è¾‘
<span class="hljs-number">1</span>pnpm <span class="hljs-keyword">add</span> shadcn-ui
</code></pre>
<p>ç»“æœå‘ç°æ ¹æœ¬æ‰¾ä¸åˆ°è¿™ä¸ªåŒ…ï¼ä¸€è„¸æ‡µé€¼çš„æˆ‘è·‘å» GitHub çœ‹æ–‡æ¡£ï¼Œæ‰å‘ç°ï¼š</p>
<blockquote>
<p><strong>shadcn/ui ä¸æ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„ç»„ä»¶åº“ï¼Œè€Œæ˜¯ä¸€å¥—å¯ä»¥å¤åˆ¶åˆ°ä½ é¡¹ç›®é‡Œçš„ç»„ä»¶ä»£ç </strong></p>
</blockquote>
<p>è¿™å®Œå…¨é¢ è¦†äº†æˆ‘å¯¹ "UI æ¡†æ¶" çš„è®¤çŸ¥ã€‚ä»¥å‰ç”¨ Ant Design æˆ– Element UIï¼Œéƒ½æ˜¯ <code>npm install</code> å°±å®Œäº‹äº†ï¼Œä½† shadcn/ui å´è¦ä½ æŠŠæ¯ä¸ªç»„ä»¶çš„æºç ç›´æ¥æ”¾è¿›è‡ªå·±çš„é¡¹ç›®é‡Œã€‚</p>
<p>ä¸€å¼€å§‹æˆ‘è§‰å¾—è¿™å¾ˆéº»çƒ¦ï¼Œä½†åæ¥å‘ç°è¿™å…¶å®æ˜¯å®ƒçš„æœ€å¤§ä¼˜åŠ¿ã€‚</p>
<h2 data-id="heading-2">æ­£ç¡®çš„å®‰è£…å§¿åŠ¿</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®</h3>
<p>é¦–å…ˆè¦åœ¨ä½ çš„ Next.js é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">bash
ç¼–è¾‘
1pnpm dlx <span class="hljs-symbol">shadcn@</span>latest <span class="hljs-keyword">init</span>
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šé—®ä½ å‡ ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æ˜¯å¦ä½¿ç”¨ TypeScriptã€Tailwind CSS é…ç½®è·¯å¾„ç­‰ã€‚æˆ‘çš„é¡¹ç›®å·²ç»é…ç½®å¥½äº† Tailwindï¼Œæ‰€ä»¥ä¸€è·¯å›è½¦å°±è¡Œã€‚</p>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šæŒ‰éœ€æ·»åŠ ç»„ä»¶</h3>
<p>è¿™é‡Œåˆè¸©äº†ä¸ªå°å‘ã€‚æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºè¦ä¸€ä¸ªä¸€ä¸ªæ·»åŠ ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">bash
ç¼–è¾‘
<span class="hljs-number">1</span># é”™è¯¯çš„æƒ³æ³•
<span class="hljs-number">2</span>pnpm dlx shadcn<span class="hljs-variable">@latest</span> <span class="hljs-keyword">add</span> button
<span class="hljs-number">3</span>pnpm dlx shadcn<span class="hljs-variable">@latest</span> <span class="hljs-keyword">add</span> input
<span class="hljs-number">4</span>pnpm dlx shadcn<span class="hljs-variable">@latest</span> <span class="hljs-keyword">add</span> card
<span class="hljs-number">5</span># ... è¿˜è¦è¾“å…¥<span class="hljs-number">7</span>æ¬¡
</code></pre>
<p>åæ¥å‘ç°å…¶å®å¯ä»¥ä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰éœ€è¦çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">bash</span>
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-selector-tag">pnpm</span> <span class="hljs-selector-tag">dlx</span> <span class="hljs-selector-tag">shadcn</span>@<span class="hljs-selector-tag">latest</span> <span class="hljs-selector-tag">add</span> <span class="hljs-selector-tag">button</span> <span class="hljs-selector-tag">input</span> <span class="hljs-selector-tag">card</span> <span class="hljs-selector-tag">scroll-area</span> <span class="hljs-selector-tag">spinner</span> <span class="hljs-selector-tag">toast</span> <span class="hljs-selector-tag">separator</span> <span class="hljs-selector-tag">label</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šä¸€å®šè¦ç”¨ <code>pnpm dlx</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥ <code>pnpm shadcn</code>ï¼Œå¦åˆ™ç»ˆç«¯ä¼šæŠ¥é”™æ‰¾ä¸åˆ°å‘½ä»¤ã€‚</p>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šçœ‹çœ‹ç”Ÿæˆäº†ä»€ä¹ˆ</h3>
<p>è¿è¡Œå®Œå‘½ä»¤åï¼Œæˆ‘å‘ç°é¡¹ç›®é‡Œå¤šäº†ä¸€ä¸ª <code>components/ui/</code> ç›®å½•ï¼Œé‡Œé¢æ˜¯æˆ‘åˆšæ‰æ·»åŠ çš„æ‰€æœ‰ç»„ä»¶æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">text
ç¼–è¾‘
<span class="hljs-number">1</span>components/
<span class="hljs-number">2</span>â””â”€â”€ ui/
<span class="hljs-number">3</span>    â”œâ”€â”€ <span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">4</span>    â”œâ”€â”€ <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">5</span>    â”œâ”€â”€ card<span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">6</span>    â”œâ”€â”€ scroll-area<span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">7</span>    â”œâ”€â”€ spinner<span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">8</span>    â”œâ”€â”€ toast<span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">9</span>    â”œâ”€â”€ separator<span class="hljs-selector-class">.tsx</span>
<span class="hljs-number">10</span>    â””â”€â”€ <span class="hljs-selector-tag">label</span><span class="hljs-selector-class">.tsx</span>
</code></pre>
<p>æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæˆ‘å¯ä»¥éšæ—¶æ‰“å¼€ä¿®æ”¹ï¼Œæ¯”å¦‚æˆ‘æƒ³æŠŠæŒ‰é’®çš„åœ†è§’æ”¹å¤§ä¸€ç‚¹ï¼Œç›´æ¥ç¼–è¾‘ <code>button.tsx</code> å°±è¡Œï¼Œä¸ç”¨å»æŸ¥æ–‡æ¡£æ‰¾æ€ä¹ˆè¦†ç›–æ ·å¼ã€‚</p>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆæˆ‘è§‰å¾— shadcn/ui ç‰¹åˆ«é€‚åˆèŠå¤©åº”ç”¨ï¼Ÿ</h2>
<p>åšèŠå¤©åº”ç”¨æœ‰å‡ ä¸ªç‰¹æ®Šéœ€æ±‚ï¼š</p>
<ol>
<li><strong>æ¶ˆæ¯æ°”æ³¡è¦åŒºåˆ†ç”¨æˆ·å’Œ AI</strong></li>
<li><strong>è¾“å…¥æ¡†è¦æœ‰å‘é€æŒ‰é’®</strong></li>
<li><strong>èŠå¤©å†å²è¦èƒ½æ»šåŠ¨</strong></li>
<li><strong>AI å›å¤æ—¶è¦æœ‰åŠ è½½çŠ¶æ€</strong></li>
</ol>
<p>shadcn/ui çš„è¿™å‡ ä¸ªç»„ä»¶å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<h3 data-id="heading-7">æ¶ˆæ¯æ°”æ³¡ï¼ˆCard ç»„ä»¶ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript">tsx
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-comment">// components/message-bubble.tsx</span>
2<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Card</span>, <span class="hljs-title class_">CardContent</span> } <span class="hljs-keyword">from</span> &amp;#<span class="hljs-number">34</span>;@/components/ui/card&amp;#<span class="hljs-number">34</span>;;
<span class="hljs-number">3</span>
4<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MessageBubble</span>(<span class="hljs-params">{ isUser = <span class="hljs-literal">false</span>, content }: { isUser: <span class="hljs-built_in">boolean</span>; content: <span class="hljs-built_in">string</span> }</span>) {
<span class="hljs-number">5</span>  <span class="hljs-keyword">return</span> (
<span class="hljs-number">6</span>    
<span class="hljs-number">7</span>      
<span class="hljs-number">8</span>        &lt;p&gt;{content}&lt;/p&gt;
<span class="hljs-number">9</span>      
<span class="hljs-number">10</span>    
<span class="hljs-number">11</span>  );
<span class="hljs-number">12</span>}
</code></pre>
<h3 data-id="heading-8">èŠå¤©è¾“å…¥åŒºåŸŸï¼ˆInput + Button + Spinnerï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">tsx
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-comment">// components/chat-input.tsx</span>
2<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> &amp;#<span class="hljs-number">34</span>;@/components/ui/input&amp;#<span class="hljs-number">34</span>;;
3<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> &amp;#<span class="hljs-number">34</span>;@/components/ui/button&amp;#<span class="hljs-number">34</span>;;
4<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Spinner</span> } <span class="hljs-keyword">from</span> &amp;#<span class="hljs-number">34</span>;@/components/ui/spinner&amp;#<span class="hljs-number">34</span>;;
<span class="hljs-number">5</span>
6<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatInput</span>(<span class="hljs-params">{ message, setMessage, onSubmit, isLoading }: any</span>) {
<span class="hljs-number">7</span>  <span class="hljs-keyword">return</span> (
<span class="hljs-number">8</span>    &lt;div&gt;
<span class="hljs-number">9</span>       <span class="hljs-title function_">setMessage</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)}
<span class="hljs-number">12</span>        placeholder=&amp;#<span class="hljs-number">34</span>;è¾“å…¥æ¶ˆæ¯...&amp;#<span class="hljs-number">34</span>;
<span class="hljs-number">13</span>        onKeyDown={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-property">key</span> === <span class="hljs-string">'Enter'</span> &amp;&amp; <span class="hljs-title function_">onSubmit</span>()}
<span class="hljs-number">14</span>        disabled={isLoading}
<span class="hljs-number">15</span>      /&gt;
<span class="hljs-number">16</span>      
<span class="hljs-number">17</span>        {isLoading ?  : &amp;#<span class="hljs-number">34</span>;å‘é€&amp;#<span class="hljs-number">34</span>;}
<span class="hljs-number">18</span>      
<span class="hljs-number">19</span>    &lt;/div&gt;
<span class="hljs-number">20</span>  );
<span class="hljs-number">21</span>}
</code></pre>
<h3 data-id="heading-9">èŠå¤©å†å²æ»šåŠ¨ï¼ˆScrollAreaï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">tsx
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-comment">// app/page.tsx</span>
2<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ScrollArea</span> } <span class="hljs-keyword">from</span> &amp;#<span class="hljs-number">34</span>;@/components/ui/scroll-area&amp;#<span class="hljs-number">34</span>;;
<span class="hljs-number">3</span>
4<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatPage</span>(<span class="hljs-params"/>) {
<span class="hljs-number">5</span>  <span class="hljs-comment">// ... å…¶ä»–é€»è¾‘</span>
<span class="hljs-number">6</span>  
<span class="hljs-number">7</span>  <span class="hljs-keyword">return</span> (
<span class="hljs-number">8</span>    &lt;div&gt;
<span class="hljs-number">9</span>      
<span class="hljs-number">10</span>        {messages.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">msg, i</span>) =&gt;</span> (
<span class="hljs-number">11</span>          
<span class="hljs-number">12</span>        ))}
<span class="hljs-number">13</span>      
<span class="hljs-number">14</span>      
<span class="hljs-number">15</span>    &lt;/div&gt;
<span class="hljs-number">16</span>  );
<span class="hljs-number">17</span>}
</code></pre>
<h2 data-id="heading-10">ä¸»é¢˜å®šåˆ¶ï¼šæ¯”æƒ³è±¡ä¸­ç®€å•</h2>
<p>æœ€è®©æˆ‘æƒŠå–œçš„æ˜¯ä¸»é¢˜å®šåˆ¶ã€‚å› ä¸ºæˆ‘çš„é¡¹ç›®å·²ç»ç”¨äº† Tailwind CSSï¼Œæ‰€ä»¥åªéœ€è¦åœ¨ <code>tailwind.config.js</code> é‡Œé…ç½®é¢œè‰²ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">js</span>
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-comment">// tailwind.config.js</span>
<span class="hljs-number">2</span><span class="hljs-selector-tag">module</span><span class="hljs-selector-class">.exports</span> = {
<span class="hljs-number">3</span>  <span class="hljs-selector-tag">theme</span>: {
<span class="hljs-number">4</span>    <span class="hljs-selector-tag">extend</span>: {
<span class="hljs-number">5</span>      <span class="hljs-selector-tag">colors</span>: {
<span class="hljs-number">6</span>        <span class="hljs-selector-tag">primary</span>: {
<span class="hljs-number">7</span>          <span class="hljs-number">500</span>: <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-id">#60a5fa</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;, <span class="hljs-comment">// è“è‰² - ç”¨æˆ·æ¶ˆæ¯</span>
<span class="hljs-number">8</span>        },
<span class="hljs-number">9</span>        <span class="hljs-selector-tag">secondary</span>: {
<span class="hljs-number">10</span>          <span class="hljs-number">500</span>: <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-id">#22c55e</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;, <span class="hljs-comment">// ç»¿è‰² - AI æ¶ˆæ¯</span>
<span class="hljs-number">11</span>        }
<span class="hljs-number">12</span>      }
<span class="hljs-number">13</span>    }
<span class="hljs-number">14</span>  }
<span class="hljs-number">15</span>}
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶é‡Œç›´æ¥ç”¨ <code>bg-primary-500</code>ã€<code>bg-secondary-500</code> å°±è¡Œäº†ï¼Œå®Œå…¨ä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚</p>
<h2 data-id="heading-11">é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">é—®é¢˜1ï¼šDevTools å°å›¾æ ‡å¤ªçƒ¦äºº</h3>
<p>Next.js 16 å¼€å‘æ¨¡å¼å³ä¸‹è§’æœ‰ä¸ªå°å›¾æ ‡ï¼Œç‰¹åˆ«å½±å“è°ƒè¯•ã€‚è¯•äº†å¾ˆå¤šæ–¹æ³•éƒ½ä¸è¡Œï¼Œæœ€åç”¨ CSS å¼ºåˆ¶éšè—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">tsx
ç¼–è¾‘
1// app/layout.tsx
2if (typeof window !== &amp;<span class="hljs-comment">#34;undefined&amp;#34; &amp;&amp; process.env.NODE_ENV === &amp;#34;development&amp;#34;) {</span>
3  const <span class="hljs-attr">hideDevtools</span> = () =&gt; {
4    const <span class="hljs-attr">style</span> = document.createElement(&amp;<span class="hljs-comment">#34;style&amp;#34;);</span>
5    <span class="hljs-attr">style.innerHTML</span> = `
6      <span class="hljs-comment">#devtools-indicator,</span>
7      .nextjs-toast {
8        display: none !important<span class="hljs-comment">;</span>
9      }
10    `<span class="hljs-comment">;</span>
11    document.head.appendChild(style)<span class="hljs-comment">;</span>
12  }<span class="hljs-comment">;</span>
13  
14  if (<span class="hljs-attr">document.readyState</span> === &amp;<span class="hljs-comment">#34;loading&amp;#34;) {</span>
15    document.addEventListener(&amp;<span class="hljs-comment">#34;DOMContentLoaded&amp;#34;, hideDevtools);</span>
16  } else {
17    hideDevtools()<span class="hljs-comment">;</span>
18  }
19}
</code></pre>
<h3 data-id="heading-13">é—®é¢˜2ï¼šç»„ä»¶å¤ªå¤šä¸çŸ¥é“é€‰å“ªäº›</h3>
<p>ä¸€å¼€å§‹æˆ‘ä¹Ÿæƒ³æŠŠæ‰€æœ‰ç»„ä»¶éƒ½è£…ä¸Šï¼Œåæ¥å‘ç°å®Œå…¨æ²¡å¿…è¦ã€‚å¯¹äºèŠå¤©åº”ç”¨ï¼Œå…¶å®å°±é‚£å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li><strong>Button</strong>ï¼šå‘é€æŒ‰é’®</li>
<li><strong>Input</strong>ï¼šæ¶ˆæ¯è¾“å…¥</li>
<li><strong>Card</strong>ï¼šæ¶ˆæ¯æ°”æ³¡</li>
<li><strong>ScrollArea</strong>ï¼šèŠå¤©æ»šåŠ¨</li>
<li><strong>Spinner</strong>ï¼šåŠ è½½çŠ¶æ€</li>
</ul>
<p>å…¶ä»–åƒ Toastã€Separatorã€Label è¿™äº›æ˜¯æå‡ä½“éªŒç”¨çš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å†åŠ ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“ï¼šshadcn/ui åˆ°åº•å€¼ä¸å€¼å¾—ç”¨ï¼Ÿ</h2>
<p>ä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œæˆ‘è§‰å¾— shadcn/ui æœ‰è¿™äº›ä¼˜ç‚¹ï¼š</p>
<p>âœ… <strong>å­¦ä¹ æˆæœ¬ä½</strong>ï¼šåŸºäº Tailwind CSSï¼Œæ ·å¼ç›´è§‚æ˜“æ‡‚<br/>
âœ… <strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šç»„ä»¶ä»£ç å°±åœ¨ä½ é¡¹ç›®é‡Œï¼Œæƒ³æ€ä¹ˆæ”¹éƒ½è¡Œ<br/>
âœ… <strong>æŒ‰éœ€ä½¿ç”¨</strong>ï¼šä¸ä¼šå¼•å…¥æ²¡ç”¨çš„ä»£ç ï¼ŒåŒ…ä½“ç§¯å°<br/>
âœ… <strong>Next.js å‹å¥½</strong>ï¼šå®Œç¾æ”¯æŒ React Server Components</p>
<p>å½“ç„¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼š âŒ <strong>ä¸æ˜¯ä¼ ç»Ÿ npm åŒ…</strong>ï¼šéœ€è¦é€‚åº”æ–°çš„ä½¿ç”¨æ–¹å¼<br/>
âŒ <strong>éœ€è¦æ‰‹åŠ¨ç®¡ç†</strong>ï¼šç»„ä»¶æ›´æ–°éœ€è¦è‡ªå·±åŒæ­¥å®˜æ–¹ä»£ç </p>
<p>ä½†æ€»çš„æ¥è¯´ï¼Œ<strong>å¦‚æœä½ åœ¨ç”¨ Next.js + Tailwind CSSï¼Œshadcn/ui ç»å¯¹å€¼å¾—ä¸€è¯•</strong>ã€‚ç‰¹åˆ«æ˜¯åšèŠå¤©åº”ç”¨è¿™ç§éœ€è¦é«˜åº¦å®šåˆ¶ UI çš„åœºæ™¯ï¼Œå®ƒèƒ½è®©ä½ å¿«é€Ÿæ­å»ºå‡ºä¸“ä¸šçº§çš„ç•Œé¢ã€‚</p>
<h2 data-id="heading-15">æœ€åçš„å»ºè®®</h2>
<ol>
<li><strong>ä¸è¦è¯•å›¾ä¸€æ¬¡è£…æ‰€æœ‰ç»„ä»¶</strong>ï¼ŒæŒ‰éœ€æ·»åŠ å°±å¥½</li>
<li><strong>å–„ç”¨ Tailwind çš„ä¸»é¢˜é…ç½®</strong>ï¼Œè®©æ•´ä¸ªåº”ç”¨é£æ ¼ç»Ÿä¸€</li>
<li><strong>æŠŠç»„ä»¶å½“æˆè‡ªå·±çš„ä»£ç </strong>ï¼Œå¤§èƒ†ä¿®æ”¹ä»¥é€‚åº”éœ€æ±‚</li>
<li><strong>é‡åˆ°é—®é¢˜å…ˆçœ‹å®˜æ–¹æ–‡æ¡£</strong>ï¼Œshadcn/ui çš„æ–‡æ¡£å†™å¾—éå¸¸æ¸…æ™°</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„ç»„ä»¶ API ä¸ºä»€ä¹ˆåƒä¸ªåƒåœ¾åœºï¼Ÿâ€”â€” React å¤åˆç»„ä»¶æ¨¡å¼ (Compound Components) å®æˆ˜æ•™å­¦]]></title>    <link>https://juejin.cn/post/7582118218648027162</link>    <guid>https://juejin.cn/post/7582118218648027162</guid>    <pubDate>2025-12-11T01:34:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582118218648027162" data-draft-id="7580174845771481097" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„ç»„ä»¶ API ä¸ºä»€ä¹ˆåƒä¸ªåƒåœ¾åœºï¼Ÿâ€”â€” React å¤åˆç»„ä»¶æ¨¡å¼ (Compound Components) å®æˆ˜æ•™å­¦"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,React.js"/> <meta itemprop="datePublished" content="2025-12-11T01:34:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¸ƒå¸ƒå°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1535361573994189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„ç»„ä»¶ API ä¸ºä»€ä¹ˆåƒä¸ªåƒåœ¾åœºï¼Ÿâ€”â€” React å¤åˆç»„ä»¶æ¨¡å¼ (Compound Components) å®æˆ˜æ•™å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535361573994189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¸ƒå¸ƒå°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:34:16.000Z" title="Thu Dec 11 2025 01:34:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸€ç§åä¸ºâ€œé…ç½®åœ°ç‹±â€çš„ç»„ä»¶</h2>
<p>æ¥ä¸Šå›ã€‚å’±ä»¬ç”¨ <strong>React Query</strong> æŠŠæœåŠ¡ç«¯çŠ¶æ€å‰¥ç¦»äº†ï¼Œç”¨ <strong>Context</strong> æŠŠå…¨å±€çŠ¶æ€ç†é¡ºäº†ã€‚ç°åœ¨ä½ çš„æ•°æ®æµå¾ˆå¹²å‡€ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“ä½ æ‰“å¼€ <code>components</code> æ–‡ä»¶å¤¹ï¼Œçœ‹ç€é‚£ä¸ªè¢«ä½ æ”¹äº†æ— æ•°æ¬¡çš„ <code>Tabs</code> ç»„ä»¶ï¼Œæ˜¯ä¸æ˜¯åˆæƒ³éª‚äººäº†ï¼Ÿ</p>
<p>ä¸ºäº†æ»¡è¶³äº§å“ç»ç†äº”å½©æ–‘æ–“çš„éœ€æ±‚ï¼Œä½ çš„ç»„ä»¶ props è¶ŠåŠ è¶Šå¤šï¼Œæœ€åå˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ å…¸å‹çš„â€œé…ç½®å‹â€ç»„ä»¶</span>
 }, { <span class="hljs-attr">title</span>: <span class="hljs-string">'è®¾ç½®'</span>, <span class="hljs-attr">content</span>:  }]}
  activeTab={currentTab}
  onTabChange={setCurrentTab}
  tabBarClassName=&amp;#<span class="hljs-number">34</span>;bg-gray-<span class="hljs-number">100</span>&amp;#<span class="hljs-number">34</span>; <span class="hljs-comment">// æƒ³æ”¹ Tab æ èƒŒæ™¯ï¼ŸåŠ ä¸ª prop</span>
  tabItemClassName=&amp;#<span class="hljs-number">34</span>;text-lg&amp;#<span class="hljs-number">34</span>;    <span class="hljs-comment">// æƒ³æ”¹æ–‡å­—å¤§å°ï¼ŸåŠ ä¸ª prop</span>
  activeTabClassName=&amp;#<span class="hljs-number">34</span>;text-blue&amp;#<span class="hljs-number">34</span>; <span class="hljs-comment">// æƒ³æ”¹é€‰ä¸­æ€é¢œè‰²ï¼Ÿå†åŠ ä¸ª prop</span>
  renderTabBarExtraContent={æ–°å»º} <span class="hljs-comment">// æƒ³åœ¨å³è¾¹åŠ ä¸ªæŒ‰é’®ï¼Ÿåˆè¦åŠ  prop</span>
  tabPosition=&amp;#<span class="hljs-number">34</span>;top&amp;#<span class="hljs-number">34</span>; <span class="hljs-comment">// æƒ³æŠŠ Tab æ”¾å·¦è¾¹ï¼Ÿè¿˜å¾—åŠ é€»è¾‘</span>
/&gt;
</code></pre>
<p>è¿™å°±å«**â€œé…ç½®åœ°ç‹±â€**ã€‚ ä½ è¯•å›¾é€šè¿‡ props æš´éœ²å‡ºæ‰€æœ‰çš„ UI ç»†èŠ‚ï¼Œç»“æœå°±æ˜¯è¿™ä¸ªç»„ä»¶å˜å¾—å·¨è‡ƒè‚¿ï¼Œä¸”æéš¾å¤ç”¨ã€‚å¦‚æœæˆ‘æƒ³ç»™ç¬¬äºŒä¸ª Tab åŠ ä¸ªçº¢ç‚¹ï¼ˆBadgeï¼‰ï¼Œä½ æ˜¯ä¸æ˜¯è¿˜å¾—ç»™ <code>items</code> æ•°ç»„çš„æ•°æ®ç»“æ„é‡ŒåŠ ä¸ªå­—æ®µï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/938ec7b1484742f29689c45eaa6bb3ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5biD5biD5bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021655&amp;x-signature=RPgSjrg68CUgj063GR5Z4m54Oj0%3D" alt="src=http___image109.360doc.com_DownloadImg_2023_04_1510_264406834_10_20230415101010334.gif&amp;refer=http___image109.360doc.gif" loading="lazy"/>
å…„å¼Ÿï¼Œåˆ«å†æŠ˜ç£¨è‡ªå·±äº†ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å­¦å­¦ <strong>Compound Componentsï¼ˆå¤åˆç»„ä»¶æ¨¡å¼ï¼‰</strong> ã€‚çœ‹çœ‹äººå®¶ HTML åŸç”Ÿæ ‡ç­¾æ˜¯æ€ä¹ˆæ•™æˆ‘ä»¬åšäººçš„ã€‚</p>
<h2 data-id="heading-1">çµæ„Ÿæ¥æºï¼šå‘ `` è‡´æ•¬</h2>
<p>ä½ ä»”ç»†æƒ³æƒ³ï¼ŒåŸç”Ÿçš„ `` æ ‡ç­¾æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ</p>
<pre><code class="hljs">  è‹¹æœ
  é¦™è•‰

</code></pre>
<p>ä½ å¹¶æ²¡æœ‰ä¼ ä¸€ä¸ª <code>options</code> æ•°ç»„ç»™ <code>ï¼Œè€Œæ˜¯ç›´æ¥æŠŠ </code> å¡åˆ°äº† `` é‡Œé¢ã€‚</p>
<ul>
<li>`` è´Ÿè´£ç®¡ç†çŠ¶æ€ï¼ˆå½“å‰é€‰äº†è°ï¼‰ã€‚</li>
<li><code>è´Ÿè´£æ¸²æŸ“æ¯ä¸€é¡¹ï¼Œå¹¶ä¸”å‘Šè¯‰</code> â€œæˆ‘è¢«ç‚¹äº†â€ã€‚</li>
</ul>
<p>è¿™ç§**â€œçˆ¶ç»„ä»¶ç®¡çŠ¶æ€ï¼Œå­ç»„ä»¶ç®¡æ¸²æŸ“ï¼Œé€šè¿‡éšå¼å¥‘çº¦é€šä¿¡â€**çš„æ¨¡å¼ï¼Œå°±æ˜¯å¤åˆç»„ä»¶æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-2">å®æˆ˜é‡æ„ï¼šæŠŠ Tabs æ‹†å¼€</h2>
<p>æˆ‘ä»¬è¦æŠŠé‚£ä¸ªè‡ƒè‚¿çš„ <code>Tabs</code> ç»„ä»¶ï¼Œæ‹†æˆ <code>Tabs</code>, <code>TabList</code>, <code>Tab</code>, <code>TabPanels</code>, <code>Panel</code> è¿™ä¸€å¥—ä¹é«˜ç§¯æœ¨ã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸Šä¸‹æ–‡ (Context)</h3>
<p>çˆ¶ç»„ä»¶éœ€è¦ä¸€ä¸ªåœ°æ–¹æ¥å‘Šè¯‰å­ç»„ä»¶ï¼šç°åœ¨çš„ <code>activeTab</code> æ˜¯è°ï¼Œä»¥åŠæä¾›ä¸€ä¸ª <code>setActiveTab</code> çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-import" lang="import">
const TabsContext = createContext(null);

// è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œæ–¹ä¾¿å­ç»„ä»¶æ‹¿æ•°æ®ï¼Œé¡ºä¾¿åšä¸ªé”™è¯¯æ£€æŸ¥
const useTabs = () =&gt; {
  const context = useContext(TabsContext);
  if (!context) throw new Error('Tabs å­ç»„ä»¶å¿…é¡»åŒ…è£¹åœ¨  é‡Œé¢ï¼');
  return context;
};
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šçˆ¶ç»„ä»¶ (Tabs) â€”â€” çŠ¶æ€çš„å¤§ç®¡å®¶</h3>
<p>å®ƒä¸è´Ÿè´£ç”» UIï¼Œåªè´Ÿè´£æä¾› Contextã€‚</p>
<pre><code class="hljs language-const" lang="const">  const [selectedIndex, setSelectedIndex] = useState(defaultIndex);

  return (
    
      &lt;div&gt;{children}&lt;/div&gt;
    
  );
};
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šå­ç»„ä»¶ (Tab &amp; Panel) â€”â€” çœŸæ­£çš„æ‰“å·¥äºº</h3>
<p><strong>Tab æŒ‰é’®ï¼š</strong></p>
<pre><code class="hljs language-const" lang="const">  const { selectedIndex, setSelectedIndex } = useTabs();
  const isActive = selectedIndex === index;

  return (
     setSelectedIndex(index)}
    &gt;
      {children}
    
  );
};
</code></pre>
<p>Panel å†…å®¹åŒºï¼š</p>
<pre><code class="hljs language-const" lang="const">  const { selectedIndex } = useTabs();
  // åªæœ‰é€‰ä¸­æ—¶æ‰æ¸²æŸ“
  return selectedIndex === index ? &lt;div&gt;{children}&lt;/div&gt; : null;
};
</code></pre>
<h2 data-id="heading-6">è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼šè°ƒç”¨æ–¹å¼</h2>
<p>é‡æ„å®Œä¹‹åï¼Œæˆ‘ä»¬åœ¨é¡µé¢é‡Œæ€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-//" lang="//">
  {/* ä½ å¯ä»¥åœ¨è¿™é‡Œéšä¾¿åŠ  divï¼Œéšä¾¿å†™æ ·å¼ï¼Œå®Œå…¨ä¸å— props é™åˆ¶ */}
  &lt;div&gt;
    &lt;div&gt;
      ç”¨æˆ·ç®¡ç†
      
      {/* å±…ç„¶å¯ä»¥ç»™å•ç‹¬æŸä¸€ä¸ª Tab åŠ çº¢ç‚¹ï¼Œç”šè‡³åŠ  Tooltipï¼Œéšä½ ä¾¿ï¼ */}
      
        ç³»ç»Ÿè®¾ç½® &lt;span&gt;â—&lt;/span&gt;
      
    &lt;/div&gt;

    {/* æƒ³åœ¨å³è¾¹åŠ ä¸ªæŒ‰é’®ï¼Ÿç›´æ¥å†™å•Šï¼ä¸ç”¨ä¼ ä»€ä¹ˆ renderExtraContent */}
    åˆ·æ–°
  &lt;/div&gt;

  &lt;div&gt;
    
    
  &lt;/div&gt;

</code></pre>
<p><strong>å¯¹æ¯”ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œç°åœ¨çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ</strong></p>
<ol>
<li><strong>UI ç»“æ„å®Œå…¨è§£è€¦</strong>ï¼šä½ æƒ³æŠŠ <code>Tab</code> åˆ—è¡¨æ”¾åœ¨ä¸‹é¢ï¼Ÿæƒ³æŠŠ <code>Panel</code> æ”¾åœ¨ä¸Šé¢ï¼Ÿéšä¾¿ä½ æ€ä¹ˆæ’ç‰ˆ HTMLï¼Œç»„ä»¶é€»è¾‘å®Œå…¨ä¸éœ€è¦æ”¹ã€‚</li>
<li><strong>å†…å®¹éšå¿ƒæ‰€æ¬²</strong>ï¼šä½ æƒ³åœ¨ Tab æ ‡é¢˜é‡ŒåŠ å›¾æ ‡ï¼ŸåŠ çº¢ç‚¹ï¼ŸåŠ  loading åŠ¨ç”»ï¼Ÿç›´æ¥åœ¨ <code>children</code> é‡Œå†™ JSX ä¹Ÿå°±æ˜¯äº†ï¼Œä¸éœ€è¦å»æ”¹ç»„ä»¶æºç ã€‚</li>
<li><strong>æ²¡æœ‰ Props Drilling</strong>ï¼šçŠ¶æ€é€šè¿‡ Context éšå¼ä¼ é€’ï¼Œä½ ä¸ç”¨æ‰‹åŠ¨æŠŠ <code>activeTab</code> ä¼ ç»™æ¯ä¸€ä¸ª Tabã€‚</li>
</ol>
<h2 data-id="heading-7">è¿›é˜¶æŠ€å·§ï¼šè¿™å°±æ˜¯ Headless UI çš„é›å½¢</h2>
<p>èªæ˜çš„ä½ å¯èƒ½å‘ç°äº†ï¼Œè¿™ç§æ¨¡å¼å…¶å®å°±æ˜¯æˆ‘åœ¨å‰å‡ ç¯‡æåˆ°çš„ <strong>Headless UI</strong> çš„ä¸€ç§å®ç°æ–¹å¼ã€‚</p>
<p>åƒè‘—åçš„ UI åº“ <strong>Radix UI</strong> æˆ–è€… <strong>Headless UI (Tailwind)</strong> ï¼Œå…¨æ˜¯è¿™ä¸ªè·¯å­ã€‚</p>
<ul>
<li>``</li>
<li>``</li>
<li>``</li>
<li>``</li>
</ul>
<p>å®ƒä»¬æŠŠç»„ä»¶æ‹†å¾—ç¨€ç¢ï¼ŒæŠŠ**â€œæ€ä¹ˆç»„åˆâ€**çš„æƒåŠ›äº¤è¿˜ç»™äº†ä½ ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ç§æ¨¡å¼ä¹Ÿæœ‰ä¸ªå°ç¼ºç‚¹ï¼š<strong>ä»£ç é‡å˜å¤šäº†</strong>ã€‚ ä»¥å‰å†™ä¸ª `` åªè¦ä¸€è¡Œï¼Œç°åœ¨è¦å†™åå‡ è¡Œã€‚</p>
<p><strong>æ€ä¹ˆè§£ï¼Ÿ</strong> ä½ å¯ä»¥åŸºäºè¿™ä¸ªå¤åˆç»„ä»¶ï¼Œå†å°è£…ä¸€å±‚â€œå‚»ç“œå¼â€ç»„ä»¶ç»™æ²¡ç‰¹æ®Šéœ€æ±‚çš„åœºæ™¯ç”¨ã€‚ä½†æ˜¯åº•å±‚çš„å®ç°ï¼Œä¸€å®šè¦ä¿æŒè¿™ç§çµæ´»æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>å½“ä½ å‘ç°ä½ çš„ç»„ä»¶éœ€è¦æ¥å— <code>xxxStyle</code>, <code>xxxClassName</code>, <code>renderXxx</code> è¿™ç§ props çš„æ—¶å€™ï¼Œè¯·ç«‹åˆ»åœä¸‹æ¥ã€‚</p>
<p>è¿™è¯´æ˜ä½ åœ¨<strong>è¯•å›¾æ§åˆ¶ä½ æ§åˆ¶ä¸äº†çš„äº‹æƒ…</strong>ï¼ˆå¤–éƒ¨çš„ UI å±•ç¤ºï¼‰ã€‚</p>
<p>æŠŠæ§åˆ¶æƒäº¤å‡ºå»ã€‚ç”¨ <strong>Compound Components</strong> æ¨¡å¼ï¼Œè®©ä½¿ç”¨è€…åƒæ‹¼ä¹é«˜ä¸€æ ·ç»„è£…ä½ çš„ç»„ä»¶ã€‚ ä½ ä¼šå‘ç°ï¼Œä½ å†ä¹Ÿä¸ç”¨å› ä¸ºè®¾è®¡ç¨¿æ”¹äº†ä¸€ä¸ª margin æˆ–è€…åŠ äº†ä¸€ä¸ª icon è€Œå»æ”¹ç»„ä»¶æºç äº†ã€‚è¿™æ‰æ˜¯çœŸæ­£çš„<strong>é«˜å†…èšã€ä½è€¦åˆ</strong>ã€‚</p>
<p>å¥½äº†ï¼Œæˆ‘è¦å»æŠŠé‚£ä¸ªä¼ äº† 20 ä¸ª props çš„ <code>Modal</code> ç»„ä»¶ç»™æ‹†äº†ï¼Œç¥å¤§å®¶çš„ç»„ä»¶ API æ°¸è¿œæ€§æ„Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d4c5ce6ede4d7cb8940f19ef785f27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5biD5biD5bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021655&amp;x-signature=R%2FX8jthB9N%2FXqYwadVV1MZcFlz0%3D" alt="lg_90841_1619336946_60851ef204362.png" loading="lazy"/></p>
<hr/>
<blockquote>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šTabs åˆ‡æ¢æ˜¯æå®šäº†ï¼Œä½†æœ‰ä¸ªé—®é¢˜ï¼šç”¨æˆ·åˆ·æ–°é¡µé¢åï¼Œåˆå›åˆ°äº†ç¬¬ä¸€ä¸ª Tabï¼Œè¾›è¾›è‹¦è‹¦å¡«çš„è¡¨å•ä¹Ÿæ²¡äº†ã€‚ è¿˜æœ‰ï¼Œæˆ‘æƒ³æŠŠâ€œå½“å‰åœ¨ç¬¬äºŒä¸ª Tabâ€è¿™ä¸ªçŠ¶æ€åˆ†äº«ç»™åŒäº‹ï¼Œæ€ä¹ˆåšï¼Ÿ ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥èŠèŠ <strong>â€œURL å³çŠ¶æ€ (URL as State)â€</strong> ã€‚æ•™ä½ å¦‚ä½•æŠŠ React çŠ¶æ€åŒæ­¥åˆ° URL å‚æ•°é‡Œï¼Œè®©ä½ çš„åº”ç”¨æ‹¥æœ‰â€œè®°å¿†â€ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘è¸©äº† 72 å°æ—¶çš„ Electron webview PDF ç°è‰²å‘ï¼Œåªä¸ºå‘Šè¯‰ä½ ï¼šåˆ«å†™è¿™è¡Œä»£ç ï¼]]></title>    <link>https://juejin.cn/post/7582133314686140468</link>    <guid>https://juejin.cn/post/7582133314686140468</guid>    <pubDate>2025-12-11T01:57:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582133314686140468" data-draft-id="7582114266075299855" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘è¸©äº† 72 å°æ—¶çš„ Electron webview PDF ç°è‰²å‘ï¼Œåªä¸ºå‘Šè¯‰ä½ ï¼šåˆ«å†™è¿™è¡Œä»£ç ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Electron"/> <meta itemprop="datePublished" content="2025-12-11T01:57:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1099167360628462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘è¸©äº† 72 å°æ—¶çš„ Electron webview PDF ç°è‰²å‘ï¼Œåªä¸ºå‘Šè¯‰ä½ ï¼šåˆ«å†™è¿™è¡Œä»£ç ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1099167360628462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:57:17.000Z" title="Thu Dec 11 2025 01:57:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™è¾ˆå­éƒ½ä¸æƒ³å†çœ‹åˆ°é‚£ä¸ªè¯¥æ­»çš„ç°è‰²èƒŒæ™¯äº†ï¼</p>
<h2 data-id="heading-0">ç—‡çŠ¶ï¼ˆä½ ç»å¯¹ä¸­è¿‡ï¼‰</h2>
<ul>
<li>èƒŒæ™¯æ˜¯ç»å…¸ PDF ç°è‰²ï¼Œä½†å†…å®¹æ°¸è¿œä¸æ˜¾ç¤º</li>
<li>è¿æœ€å¹²å‡€çš„ dummy.pdf éƒ½åªç»™ç°è‰²</li>
<li>plugins: trueã€webSecurity: falseã€sandbox: falseã€contextIsolation: false å…¨å¼€äº†ä¹Ÿæ²¡ç”¨</li>
<li>ç”šè‡³åŠ äº† app.commandLine.appendSwitch('enable-pdf-extension') è¿™å‘æ ¸å¼¹éƒ½ä¸è¡Œ</li>
<li>ä½ å·²ç»å¿«ç–¯äº†</li>
</ul>
<h2 data-id="heading-1">ç»ˆæå…ƒå‡¶ï¼ˆå°±æ˜¯å®ƒï¼ï¼‰</h2>
<p>JavaScript</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä¸»è¿›ç¨‹é‡Œå·å·å‡ºç°è¿‡è¿™è¡Œä»£ç ï¼Œå°±æ˜¯å®ƒæ¯’æ­»äº†ä½ æ•´ä¸ªåº”ç”¨ï¼</span>
session.<span class="hljs-title function_ invoke__">fromPartition</span>(<span class="hljs-string">'nocache'</span>, { <span class="hljs-attr">cache</span>: <span class="hljs-literal">false</span> })
</code></pre>
<p>åªè¦è¿™è¡Œä»£ç æ‰§è¡Œè¿‡ä¸€æ¬¡ï¼Œæ•´ä¸ªé»˜è®¤ session å°±è¢«æ°¸ä¹…æ±¡æŸ“ï¼ŒPDF Viewer æ’ä»¶ç›´æ¥åŸåœ°å»ä¸–ï¼Œæ°¸ä¸ç¿»èº«ï¼</p>
<h2 data-id="heading-2">æ­£ç¡®åšæ³•ï¼ˆä¸‰æ­¥æ°¸ç»åæ‚£ï¼‰</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šç«‹åˆ»åˆ é™¤è¿™è¡Œæ¯’ä»£ç ï¼ˆå¿…é¡»åˆ ï¼Œåˆ«æ³¨é‡Šï¼ï¼‰</h3>
<p>JavaScript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åˆ æ‰ï¼åˆ æ‰ï¼åˆ æ‰ï¼é‡è¦çš„äº‹æƒ…è¯´ä¸‰é</span>
<span class="hljs-comment">// session.fromPartition('nocache', { cache: false })</span>
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šé‡å¯è½¯ä»¶ï¼ˆå¿…é¡»é‡å¯ï¼ä¸æ¸…æ¯’æ°¸è¿œç°ï¼‰</h3>
<p>è¢«æ±¡æŸ“çš„é»˜è®¤ session åªæœ‰é‡å¯æ‰èƒ½æ¸…æ‰ã€‚</p>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šä»¥åè¿™æ ·å†™å°±å¤©ä¸‹å¤ªå¹³</h3>
<p>HTML</p>
<pre><code class="hljs language-css" lang="css">

  style=&amp;<span class="hljs-selector-id">#34</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>:<span class="hljs-number">100vh</span>;&amp;<span class="hljs-selector-id">#34</span>;
&gt;



&gt;
</code></pre>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆåŠ  partition å°±æ´»äº†ï¼Ÿ</h2>
<p>å› ä¸º partition="persist:pdfviewer" ç»™ webview å¼€äº†ä¸€ä¸ªå…¨æ–°çš„ã€ä»æœªè¢« { cache: false } æ±¡æŸ“è¿‡çš„ã€æŒä¹…åŒ–çš„ç‹¬ç«‹ sessionï¼ŒPDF æ’ä»¶ç»ˆäºèƒ½æ­£å¸¸åŠ è½½äº†ï¼</p>
<h2 data-id="heading-7">äº²æµ‹æœ‰æ•ˆçš„ç»ˆæé…ç½®ï¼ˆç›´æ¥æŠ„ï¼‰</h2>
<p>JavaScript</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">main.jsï¼ˆä¸»çª—å£éšä¾¿æ€ä¹ˆå®‰å…¨éƒ½è¡Œï¼‰</span>
<span class="hljs-string">new</span> <span class="hljs-string">BrowserWindow({</span>
  <span class="hljs-attr">webPreferences:</span> {
    <span class="hljs-attr">webviewTag:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">//</span> <span class="hljs-attr">contextIsolation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">å…¨å¼€ä¹Ÿæ²¡äº‹ï¼Œéšä¾¿ç©</span>
  }
<span class="hljs-string">})</span>
</code></pre>
<p>HTML</p>
<pre><code class="hljs">

</code></pre>
<h2 data-id="heading-8">éªŒè¯é“¾æ¥ï¼ˆéšä¾¿ç‚¹éƒ½äº®ï¼‰</h2>
<ol>
<li>å›½é™…æ ‡å‡†ï¼š</li>
<li>å›½å†…é˜²ç›—é“¾ï¼š</li>
<li>ä¼ä¸šå†…ç½‘ç­¾åé“¾æ¥ï¼šéšä¾¿å¤šé•¿éƒ½è¡Œ</li>
</ol>
<p>åˆ æ‰é‚£è¡Œæ¯’ä»£ç  + åŠ å¥½ partition â†’ å…¨éƒ¨ç§’æ˜¾ç¤ºï¼</p>
<h2 data-id="heading-9">æ€»ç»“ï¼ˆåªè®°è¿™ä¸‰å¥è¯ï¼‰</h2>
<ol>
<li>æ°¸è¿œä¸è¦åœ¨ä¸»è¿›ç¨‹å†™ session.fromPartition('xxx', { cache: false })</li>
<li>PDF webview å¿…é¡»åŠ  partition="persist:pdfviewer"</li>
<li>æƒ³ç¦ç”¨ç¼“å­˜çš„ webview å•ç‹¬åŠ  partition="nocache"</li>
</ol>
<p>åšå®Œè¿™ä¸‰æ­¥ï¼Œä»æ­¤ä¸ç°è‰²èƒŒæ™¯æ°¸åˆ«ï¼</p>
<p>æŠŠè¿™ç¯‡æ–‡ç« æ”¶è—èµ·æ¥ï¼ŒåŠå¹´åä½ ä¼šå«ç€æ³ªç‚¹å¼€å®ƒï¼Œç„¶åæ„Ÿè°¢ç°åœ¨çš„è‡ªå·±</p>
<p>ï¼ˆå·²æ•‘æ— æ•°åæ¥äººï¼ŒåŒ…æ‹¬åŠå¹´åçš„ä½ ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ¶æ„èŒƒå¼ï¼šæ„å›¾ç³»ç»Ÿæ„å»ºweb]]></title>    <link>https://juejin.cn/post/7582114266075332623</link>    <guid>https://juejin.cn/post/7582114266075332623</guid>    <pubDate>2025-12-11T01:57:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582114266075332623" data-draft-id="7582096212662910976" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ¶æ„èŒƒå¼ï¼šæ„å›¾ç³»ç»Ÿæ„å»ºweb"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T01:57:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="alanAltman"/> <meta itemprop="url" content="https://juejin.cn/user/2796746682938440"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ¶æ„èŒƒå¼ï¼šæ„å›¾ç³»ç»Ÿæ„å»ºweb
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2796746682938440/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    alanAltman
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:57:14.000Z" title="Thu Dec 11 2025 01:57:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯æ¶æ„èŒƒå¼ï¼šæ„å›¾ç³»ç»Ÿæ„å»ºweb</h2>
<blockquote>
<p>å½“ä¸šåŠ¡å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§å¢é•¿æ—¶ï¼Œä¼ ç»Ÿçš„å‰ç«¯æ¶æ„å¼€å§‹æ˜¾ç°ç“¶é¢ˆã€‚æœ¬æ–‡é€šè¿‡åˆ†æ xxx Jet æ¡†æ¶çš„å®æˆ˜ä»£ç ï¼Œæ¢è®¨æ„å›¾ç³»ç»Ÿå¦‚ä½•æˆä¸ºè§£å†³å¤æ‚å‰ç«¯åº”ç”¨æ¶æ„é—®é¢˜çš„é“¶å¼¹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€å‰ç«¯å¼€å‘çš„æ¶æ„å›°å¢ƒ</h3>
<p>åœ¨ç”µå•†è¿™ç±»å¤æ‚å‰ç«¯åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´è¿™æ ·çš„æŒ‘æˆ˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿçš„ç´§è€¦åˆä»£ç  - éš¾ä»¥ç»´æŠ¤çš„å…¸å‹æ¡ˆä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductPage</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">productId</span>) {
    <span class="hljs-comment">// 1. è°ƒç”¨API</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/cart/add'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ productId })
    });
    
    <span class="hljs-comment">// 2. æ›´æ–°æœ¬åœ°çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cartCount</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateUI</span>();
    
    <span class="hljs-comment">// 3. å‘é€åˆ†æäº‹ä»¶</span>
    analytics.<span class="hljs-title function_">track</span>(<span class="hljs-string">'add_to_cart'</span>, { productId });
    
    <span class="hljs-comment">// 4. æ£€æŸ¥åº“å­˜</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkInventory</span>(productId);
    
    <span class="hljs-comment">// 5. æ›´æ–°æ¨è</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateRecommendations</span>();
    
    <span class="hljs-comment">// æ›´å¤šä¸šåŠ¡é€»è¾‘...</span>
    <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°å·²ç»è¶…è¿‡100è¡Œï¼Œè¿˜åœ¨ç»§ç»­å¢é•¿</span>
  }
}
</code></pre>
<p>è¿™ç§<strong>æ„å¤§åˆ©é¢æ¡å¼ä»£ç </strong>çš„é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨UIç»„ä»¶ä¸­</li>
<li>éš¾ä»¥æµ‹è¯•å’Œå¤ç”¨</li>
<li>æ–°å¢åŠŸèƒ½æ—¶å®¹æ˜“ç ´åç°æœ‰é€»è¾‘</li>
<li>è·¨å›¢é˜Ÿåä½œå›°éš¾</li>
</ul>
<h3 data-id="heading-2">äºŒã€æ„å›¾ç³»ç»Ÿï¼šä»"å¦‚ä½•åš"åˆ°"åšä»€ä¹ˆ"</h3>
<p>æ„å›¾ç³»ç»Ÿçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>å°†ç”¨æˆ·æ„å›¾ä¸å…·ä½“å®ç°åˆ†ç¦»</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Jet æ¡†æ¶ä¸­çš„æ„å›¾å®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Intent</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>;          <span class="hljs-comment">// æ„å›¾ç±»å‹</span>
  payload?: T;           <span class="hljs-comment">// æ„å›¾æ•°æ®</span>
  metadata?: <span class="hljs-title class_">Record</span>;
}

<span class="hljs-comment">// ç”¨æˆ·æ“ä½œè½¬åŒ–ä¸ºæ„å›¾</span>
<span class="hljs-keyword">const</span> intents = {
  <span class="hljs-attr">viewProduct</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'VIEW_PRODUCT'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">productId</span>: <span class="hljs-string">'iphone-15'</span> } },
  <span class="hljs-attr">addToCart</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_TO_CART'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">productId</span>: <span class="hljs-string">'iphone-15'</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> } },
  <span class="hljs-attr">startCheckout</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'START_CHECKOUT'</span> }
};

<span class="hljs-comment">// ç»Ÿä¸€è°ƒåº¦å…¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Jet</span> {
  <span class="hljs-keyword">async</span> dispatch&lt;i&gt;(<span class="hljs-attr">intent</span>: I) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">dispatch</span>(intent);
  }
}
</code></pre>
<p>è¿™ç§è½¬å˜å¸¦æ¥äº†æ€ç»´æ¨¡å¼çš„å‡çº§ï¼š</p>





















<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>æ„å›¾ç³»ç»Ÿ</th></tr></thead><tbody><tr><td><strong>å‘½ä»¤å¼</strong>ï¼š"è°ƒç”¨APIï¼Œæ›´æ–°çŠ¶æ€ï¼Œå‘é€åˆ†æ"</td><td><strong>å£°æ˜å¼</strong>ï¼š"ç”¨æˆ·æƒ³è¦åŠ å…¥è´­ç‰©è½¦"</td></tr><tr><td><strong>å…³æ³¨å®ç°</strong>ï¼šå¦‚ä½•å®Œæˆæ“ä½œ</td><td><strong>å…³æ³¨ç›®æ ‡</strong>ï¼šè¦è¾¾æˆä»€ä¹ˆç»“æœ</td></tr><tr><td><strong>ç´§è€¦åˆ</strong>ï¼šUIä¸ä¸šåŠ¡é€»è¾‘ç»‘å®š</td><td><strong>æ¾è€¦åˆ</strong>ï¼šUIåªå£°æ˜æ„å›¾</td></tr></tbody></table>
<h3 data-id="heading-3">ä¸‰ã€å…­å¤§æ ¸å¿ƒä¼˜åŠ¿</h3>
<h4 data-id="heading-4">1. <strong>ä¸šåŠ¡é€»è¾‘é›†ä¸­åŒ–ï¼Œå‘Šåˆ«æ•£å¼¹å¼ä¿®æ”¹</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰€æœ‰ä¸šåŠ¡é€»è¾‘é›†ä¸­åœ¨æ„å›¾å¤„ç†å™¨ä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AddToCartIntentHandler</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">intent, objectGraph</span>) {
    <span class="hljs-keyword">const</span> { cartService, analytics, inventory } = objectGraph;
    
    <span class="hljs-comment">// é›†ä¸­åŒ–çš„ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">await</span> cartService.<span class="hljs-title function_">add</span>(intent.<span class="hljs-property">payload</span>.<span class="hljs-property">productId</span>);
    <span class="hljs-keyword">await</span> analytics.<span class="hljs-title function_">track</span>(<span class="hljs-string">'add_to_cart'</span>, intent.<span class="hljs-property">payload</span>);
    <span class="hljs-keyword">await</span> inventory.<span class="hljs-title function_">reserve</span>(intent.<span class="hljs-property">payload</span>.<span class="hljs-property">productId</span>);
    
    <span class="hljs-comment">// å¯ä»¥è½»æ¾æ·»åŠ æ–°é€»è¾‘è€Œä¸å½±å“UI</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isFirstCartAdd</span>(intent.<span class="hljs-property">payload</span>.<span class="hljs-property">userId</span>)) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showWelcomeBonus</span>();
    }
  }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šä¿®æ”¹ä¸šåŠ¡é€»è¾‘åªéœ€æ”¹åŠ¨ä¸€å¤„ï¼Œä¸ä¼šæ„å¤–ç ´åUIåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-5">2. <strong>å¤©ç„¶æ”¯æŒA/Bæµ‹è¯•å’ŒåŠŸèƒ½å¼€å…³</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŠ¨æ€åˆ‡æ¢æ„å›¾å¤„ç†å™¨å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExperimentAwareIntentDispatcher</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">intent</span>) {
    <span class="hljs-keyword">const</span> experiment = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getExperiment</span>(intent.<span class="hljs-property">type</span>);
    
    <span class="hljs-keyword">if</span> (experiment.<span class="hljs-property">variant</span> === <span class="hljs-string">'A'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlerA</span>.<span class="hljs-title function_">handle</span>(intent);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlerB</span>.<span class="hljs-title function_">handle</span>(intent); <span class="hljs-comment">// æ–°å®ç°</span>
    }
  }
}

<span class="hljs-comment">// åŠŸèƒ½å¼€å…³æ§åˆ¶</span>
<span class="hljs-keyword">if</span> (featureFlags.<span class="hljs-property">enableNewCheckout</span>) {
  dispatcher.<span class="hljs-title function_">register</span>(<span class="hljs-string">'START_CHECKOUT'</span>, newEnhancedCheckoutHandler);
} <span class="hljs-keyword">else</span> {
  dispatcher.<span class="hljs-title function_">register</span>(<span class="hljs-string">'START_CHECKOUT'</span>, legacyCheckoutHandler);
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šæ— éœ€ä¿®æ”¹UIä»£ç å³å¯è¿›è¡Œå®éªŒå’Œç°åº¦å‘å¸ƒã€‚</p>
<h4 data-id="heading-6">3. <strong>ç»Ÿä¸€çš„è·¯ç”±å’Œæ·±å±‚é“¾æ¥å¤„ç†</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// URL ç›´æ¥æ˜ å°„åˆ°æ„å›¾</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UrlRouter</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">route</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> intent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">urlToIntent</span>(url); <span class="hljs-comment">// /product/iphone â†’ VIEW_PRODUCT</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> jet.<span class="hljs-title function_">dispatch</span>(intent);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">intentToPage</span>(result);
  }
}

<span class="hljs-comment">// æ”¯æŒå¤æ‚çš„æ·±å±‚é“¾æ¥</span>
<span class="hljs-comment">// /product/iphone/add-to-cart?quantity=2</span>
<span class="hljs-comment">// å¯ä»¥ç»Ÿä¸€è§£æä¸º ADD_TO_CART æ„å›¾</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç»Ÿä¸€å¤„ç†æ‰€æœ‰å¯¼èˆªï¼Œç®€åŒ–äº†æ·±å±‚é“¾æ¥å’Œåˆ†äº«åŠŸèƒ½å®ç°ã€‚</p>
<h4 data-id="heading-7">4. <strong>å®Œç¾çš„è·¨å¹³å°ä¸€è‡´æ€§</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrossPlatformIntentHandler</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">intent, objectGraph</span>) {
    <span class="hljs-keyword">const</span> platform = objectGraph.<span class="hljs-property">platform</span>;
    
    <span class="hljs-comment">// åŒä¸€æ„å›¾åœ¨ä¸åŒå¹³å°æ‰§è¡Œé€‚å½“æ“ä½œ</span>
    <span class="hljs-keyword">switch</span>(platform) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'web'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleWeb</span>(intent);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ios'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleiOS</span>(intent);    <span class="hljs-comment">// è°ƒç”¨åŸç”ŸAPI</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'android'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleAndroid</span>(intent); <span class="hljs-comment">// è°ƒç”¨Kotlinä»£ç </span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ssr'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleSSR</span>(intent);    <span class="hljs-comment">// æœåŠ¡ç«¯æ¸²æŸ“é€»è¾‘</span>
    }
  }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šä¸€å¥—ä¸šåŠ¡é€»è¾‘ï¼Œå¤šç«¯ç»Ÿä¸€ä½“éªŒã€‚</p>
<h4 data-id="heading-8">5. <strong>å¢å¼ºçš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å•å…ƒæµ‹è¯•å˜å¾—ç®€å•ç›´æ¥</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'AddToCartIntentHandler'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥æ·»åŠ å•†å“å¹¶å‘é€åˆ†æ'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> mockCart = { <span class="hljs-attr">add</span>: jest.<span class="hljs-title function_">fn</span>() };
    <span class="hljs-keyword">const</span> mockAnalytics = { <span class="hljs-attr">track</span>: jest.<span class="hljs-title function_">fn</span>() };
    
    <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AddToCartIntentHandler</span>();
    <span class="hljs-keyword">const</span> intent = { <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_TO_CART'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">productId</span>: <span class="hljs-string">'123'</span> } };
    
    <span class="hljs-keyword">await</span> handler.<span class="hljs-title function_">handle</span>(intent, { <span class="hljs-attr">cart</span>: mockCart, <span class="hljs-attr">analytics</span>: mockAnalytics });
    
    <span class="hljs-title function_">expect</span>(mockCart.<span class="hljs-property">add</span>).<span class="hljs-title function_">toHaveBeenCalledWith</span>(<span class="hljs-string">'123'</span>);
    <span class="hljs-title function_">expect</span>(mockAnalytics.<span class="hljs-property">track</span>).<span class="hljs-title function_">toHaveBeenCalledWith</span>(<span class="hljs-string">'add_to_cart'</span>, { <span class="hljs-attr">productId</span>: <span class="hljs-string">'123'</span> });
  });
});

<span class="hljs-comment">// é›†æˆæµ‹è¯•éªŒè¯æ•´ä¸ªæµç¨‹</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Checkout Flow'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥å®Œæˆå®Œæ•´çš„ç»“è´¦æµç¨‹'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">testWorkflow</span>([
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'START_CHECKOUT'</span> },
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'SELECT_SHIPPING'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">method</span>: <span class="hljs-string">'express'</span> } },
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'PROCESS_PAYMENT'</span>, <span class="hljs-attr">payload</span>: { <span class="hljs-attr">card</span>: <span class="hljs-string">'****1234'</span> } },
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'PLACE_ORDER'</span> }
    ]);
    
    <span class="hljs-title function_">expect</span>(result.<span class="hljs-property">order</span>.<span class="hljs-property">status</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'CONFIRMED'</span>);
  });
});
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šæµ‹è¯•è¦†ç›–ç‡é«˜ï¼Œé‡æ„ä¿¡å¿ƒè¶³ã€‚</p>
<h4 data-id="heading-9">6. <strong>å¼ºå¤§çš„ç›‘æ§å’Œè°ƒè¯•èƒ½åŠ›</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InstrumentedIntentDispatcher</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">intent</span>) {
    <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// è®°å½•æ„å›¾å¼€å§‹</span>
    monitoring.<span class="hljs-title function_">recordIntentStart</span>(intent.<span class="hljs-property">type</span>, intent.<span class="hljs-property">payload</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">dispatch</span>(intent);
      
      <span class="hljs-comment">// è®°å½•æˆåŠŸæŒ‡æ ‡</span>
      monitoring.<span class="hljs-title function_">recordIntentSuccess</span>(intent.<span class="hljs-property">type</span>, {
        <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime,
        <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span>
      });
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// è®°å½•å¤±è´¥è¯¦æƒ…</span>
      monitoring.<span class="hljs-title function_">recordIntentFailure</span>(intent.<span class="hljs-property">type</span>, {
        error,
        <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime
      });
      <span class="hljs-keyword">throw</span> error;
    }
  }
}

<span class="hljs-comment">// å¼€å‘æ—¶å¯è§†åŒ–æ„å›¾æµ</span>
<span class="hljs-comment">// [ç”¨æˆ·ç‚¹å‡»] â†’ [ADD_TO_CARTæ„å›¾] â†’ [å¤„ç†å™¨æ‰§è¡Œ] â†’ [ç»“æœè¿”å›]</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç”Ÿäº§ç¯å¢ƒå¯è§‚æµ‹æ€§å¼ºï¼Œå¼€å‘è°ƒè¯•ç›´è§‚ã€‚</p>
<h3 data-id="heading-10">å››ã€æ„å›¾ç³»ç»Ÿçš„å®æˆ˜ä»·å€¼</h3>
<h4 data-id="heading-11">åœºæ™¯1ï¼šå¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚å˜åŒ–</h4>
<p><strong>ä¸šåŠ¡éœ€æ±‚</strong>ï¼š"åœ¨ç”¨æˆ·é¦–æ¬¡åŠ å…¥è´­ç‰©è½¦æ—¶æ˜¾ç¤ºæ¬¢è¿å¼¹çª—"</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦ä¿®æ”¹å¤šä¸ªç»„ä»¶</span>
<span class="hljs-comment">// ProductPage.js, SearchResults.js, Recommendation.js...</span>

<span class="hljs-comment">// æ„å›¾ç³»ç»Ÿï¼šåªéœ€ä¿®æ”¹æ„å›¾å¤„ç†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedAddToCartHandler</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">intent, objectGraph</span>) {
    <span class="hljs-keyword">const</span> { cartService, userService, ui } = objectGraph;
    
    <span class="hljs-keyword">await</span> cartService.<span class="hljs-title function_">add</span>(intent.<span class="hljs-property">payload</span>.<span class="hljs-property">productId</span>);
    
    <span class="hljs-comment">// æ–°å¢çš„ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">const</span> isFirstAdd = <span class="hljs-keyword">await</span> userService.<span class="hljs-title function_">isFirstCartAdd</span>(intent.<span class="hljs-property">payload</span>.<span class="hljs-property">userId</span>);
    <span class="hljs-keyword">if</span> (isFirstAdd) {
      <span class="hljs-keyword">await</span> ui.<span class="hljs-title function_">showWelcomeDialog</span>();
    }
    
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
  }
}
</code></pre>
<h4 data-id="heading-12">åœºæ™¯2ï¼šå¤æ‚çš„ç”µå•†ä¸šåŠ¡æµç¨‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®¢å•é€€è´§æµç¨‹æ¶‰åŠå¤šä¸ªéƒ¨é—¨å’Œç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReturnIntentWorkflow</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">intent</span>) {
    <span class="hljs-comment">// 1. éªŒè¯é€€è´§èµ„æ ¼</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'VALIDATE_RETURN_ELIGIBILITY'</span>, <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span> });
    
    <span class="hljs-comment">// 2. ç”Ÿæˆé€€è´§æ ‡ç­¾</span>
    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'GENERATE_RETURN_LABEL'</span>, <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span> });
    
    <span class="hljs-comment">// 3. å®‰æ’å¿«é€’å–ä»¶</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SCHEDULE_PICKUP'</span>, <span class="hljs-attr">payload</span>: { ...intent.<span class="hljs-property">payload</span>, label } });
    
    <span class="hljs-comment">// 4. å¤„ç†é€€æ¬¾</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'PROCESS_REFUND'</span>, <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span> });
    
    <span class="hljs-comment">// 5. é€šçŸ¥ç”¨æˆ·</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SEND_RETURN_CONFIRMATION'</span>, <span class="hljs-attr">payload</span>: intent.<span class="hljs-property">payload</span> });
  }
}
</code></pre>
<h4 data-id="heading-13">åœºæ™¯3ï¼šå…¨çƒåŒ–ç”µå•†çš„æœ¬åœ°åŒ–å¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŒä¸€æ„å›¾åœ¨ä¸åŒåœ°åŒºæœ‰ä¸åŒå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RegionalCheckoutHandler</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">intent, objectGraph</span>) {
    <span class="hljs-keyword">const</span> region = objectGraph.<span class="hljs-property">region</span>;
    
    <span class="hljs-keyword">switch</span>(region.<span class="hljs-property">country</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'US'</span>:
        <span class="hljs-comment">// ç¾å›½ï¼šä¿¡ç”¨å¡æ”¯ä»˜ï¼Œå¿«é€Ÿé…é€</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">usCheckout</span>(intent);
        
      <span class="hljs-keyword">case</span> <span class="hljs-string">'CN'</span>:
        <span class="hljs-comment">// ä¸­å›½ï¼šæ”¯æŒæ”¯ä»˜å®/å¾®ä¿¡ï¼Œèº«ä»½è¯éªŒè¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">chinaCheckout</span>(intent);
        
      <span class="hljs-keyword">case</span> <span class="hljs-string">'IN'</span>:
        <span class="hljs-comment">// å°åº¦ï¼šUPIæ”¯ä»˜ï¼Œè´§åˆ°ä»˜æ¬¾é€‰é¡¹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">indiaCheckout</span>(intent);
        
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defaultCheckout</span>(intent);
    }
  }
}
</code></pre>
<h3 data-id="heading-14">äº”ã€ä½•æ—¶é‡‡ç”¨æ„å›¾ç³»ç»Ÿï¼Ÿ</h3>
<h4 data-id="heading-15">é€‚åˆçš„åœºæ™¯ âœ…</h4>
<ul>
<li><strong>å¤æ‚äº¤äº’åº”ç”¨</strong>ï¼šç”µå•†ã€é‡‘èã€ä¼ä¸šè½¯ä»¶</li>
<li><strong>å¤šå¹³å°äº§å“</strong>ï¼šéœ€è¦Webã€Appã€æ¡Œé¢ç«¯ä¸€è‡´ä½“éªŒ</li>
<li><strong>é¢‘ç¹ä¸šåŠ¡è¿­ä»£</strong>ï¼šA/Bæµ‹è¯•ã€åŠŸèƒ½å¿«é€Ÿä¸Šçº¿</li>
<li><strong>å¤§è§„æ¨¡å›¢é˜Ÿåä½œ</strong>ï¼šéœ€è¦æ¸…æ™°çš„æ¶æ„è¾¹ç•Œ</li>
</ul>
<h4 data-id="heading-16">ä¸é€‚åˆçš„åœºæ™¯ âŒ</h4>
<ul>
<li><strong>ç®€å•å±•ç¤ºé¡µé¢</strong>ï¼šåšå®¢ã€å®£ä¼ ç½‘ç«™</li>
<li><strong>åŸå‹éªŒè¯é˜¶æ®µ</strong>ï¼šéœ€è¦å¿«é€Ÿè¿­ä»£éªŒè¯æƒ³æ³•</li>
<li><strong>èµ„æºæœ‰é™å›¢é˜Ÿ</strong>ï¼šæœ‰è¾ƒé«˜çš„å­¦ä¹ å’Œå®ç°æˆæœ¬</li>
</ul>
<h4 data-id="heading-17">è¿ç§»ç­–ç•¥å»ºè®®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¸è¿›å¼è¿ç§»ï¼šä»æœ€å¤æ‚çš„ä¸šåŠ¡å¼€å§‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LegacySystemAdapter</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">migrateGradually</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é˜¶æ®µ1ï¼šæ–°åŠŸèƒ½ä½¿ç”¨æ„å›¾ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerNewFeatureIntents</span>();
    
    <span class="hljs-comment">// é˜¶æ®µ2ï¼šé‡æ„å¤æ‚ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refactorCheckoutToIntents</span>();
    
    <span class="hljs-comment">// é˜¶æ®µ3ï¼šé€æ­¥è¿ç§»å…¶ä»–åŠŸèƒ½</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">migrateRemainingFeatures</span>();
    
    <span class="hljs-comment">// é˜¶æ®µ4ï¼šå®Œå…¨è½¬å‘æ„å›¾æ¶æ„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decommissionLegacyCode</span>();
  }
}
</code></pre>
<h3 data-id="heading-18">å…­ã€æ„å›¾ç³»ç»Ÿçš„æœªæ¥æ¼”è¿›</h3>
<p>éšç€å‰ç«¯å¤æ‚åº¦çš„æŒç»­å¢é•¿ï¼Œæ„å›¾ç³»ç»Ÿæ­£åœ¨å‘æ›´æ™ºèƒ½çš„æ–¹å‘å‘å±•ï¼š</p>
<h4 data-id="heading-19">1. <strong>AIé©±åŠ¨çš„æ„å›¾é¢„æµ‹</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// AIé¢„æµ‹ç”¨æˆ·ä¸‹ä¸€æ­¥æ„å›¾</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PredictiveIntentSystem</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">predictNextIntent</span>(<span class="hljs-params">userBehavior</span>) {
    <span class="hljs-keyword">const</span> prediction = <span class="hljs-keyword">await</span> aiModel.<span class="hljs-title function_">predict</span>(userBehavior);
    
    <span class="hljs-comment">// é¢„åŠ è½½å¯èƒ½éœ€è¦çš„èµ„æº</span>
    <span class="hljs-keyword">if</span> (prediction.<span class="hljs-property">confidence</span> &gt; <span class="hljs-number">0.8</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">prefetchIntentResources</span>(prediction.<span class="hljs-property">intent</span>);
    }
    
    <span class="hljs-keyword">return</span> prediction;
  }
}
</code></pre>
<h4 data-id="heading-20">2. <strong>å¯è§†åŒ–æ„å›¾ç¼–æ’</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ä»£ç å¹³å°ä¸Šçš„æ„å›¾ç¼–æ’</span>
<span class="hljs-keyword">const</span> workflow = visualEditor.<span class="hljs-title function_">createWorkflow</span>([
  { <span class="hljs-attr">intent</span>: <span class="hljs-string">'VIEW_PRODUCT'</span>, <span class="hljs-attr">onSuccess</span>: <span class="hljs-string">'showDetails'</span> },
  { <span class="hljs-attr">intent</span>: <span class="hljs-string">'ADD_TO_CART'</span>, <span class="hljs-attr">onSuccess</span>: <span class="hljs-string">'updateCart'</span> },
  { <span class="hljs-attr">intent</span>: <span class="hljs-string">'START_CHECKOUT'</span>, <span class="hljs-attr">conditions</span>: [<span class="hljs-string">'cartNotEmpty'</span>] }
]);

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-keyword">const</span> generatedCode = workflow.<span class="hljs-title function_">generateIntentHandlers</span>();
</code></pre>
<h4 data-id="heading-21">3. <strong>æ„å›¾çº§åˆ«çš„æ€§èƒ½ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ„å›¾ä¼˜å…ˆçº§è°ƒåº¦</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityIntentDispatcher</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">intent</span>) {
    <span class="hljs-keyword">const</span> priority = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getIntentPriority</span>(intent.<span class="hljs-property">type</span>);
    
    <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§æ„å›¾ç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-keyword">if</span> (priority === <span class="hljs-string">'HIGH'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeImmediately</span>(intent);
    }
    
    <span class="hljs-comment">// ä½ä¼˜å…ˆçº§æ„å›¾æ‰¹é‡æ‰§è¡Œ</span>
    <span class="hljs-keyword">if</span> (priority === <span class="hljs-string">'LOW'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">batchExecute</span>(intent);
    }
  }
}
</code></pre>
<h3 data-id="heading-22">ä¸ƒã€ç»“è¯­</h3>
<p>xxx Jet æ¡†æ¶é€‰æ‹©æ„å›¾ç³»ç»Ÿä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯é¢å¯¹<strong>ç”µå•†ä¸šåŠ¡å¤æ‚åº¦</strong>çš„å¿…ç„¶é€‰æ‹©ã€‚å½“ä½ çš„åº”ç”¨å¼€å§‹å‡ºç°ä»¥ä¸‹ç—‡çŠ¶æ—¶ï¼Œå°±æ˜¯è€ƒè™‘æ„å›¾æ¶æ„çš„æ—¶å€™äº†ï¼š</p>
<ol>
<li><strong>æ–°å¢åŠŸèƒ½éœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶</strong></li>
<li><strong>ä¸šåŠ¡é€»è¾‘éš¾ä»¥æµ‹è¯•</strong></li>
<li><strong>UIç»„ä»¶å˜å¾—è‡ƒè‚¿</strong></li>
<li><strong>è·¨å¹³å°é€»è¾‘ä¸ä¸€è‡´</strong></li>
<li><strong>éš¾ä»¥æ·»åŠ A/Bæµ‹è¯•</strong></li>
</ol>
<p>æ„å›¾ç³»ç»Ÿä¸ä»…ä»…æ˜¯æŠ€æœ¯æ¶æ„çš„é€‰æ‹©ï¼Œæ›´æ˜¯ä¸€ç§<strong>å¼€å‘å“²å­¦çš„è½¬å˜</strong>â€”â€”ä»å…³æ³¨"å¦‚ä½•å®ç°"è½¬å‘å…³æ³¨"ç”¨æˆ·æƒ³è¦ä»€ä¹ˆ"ã€‚è¿™ç§è½¬å˜è®©æˆ‘ä»¬èƒ½å¤Ÿæ„å»ºæ›´<strong>å¥å£®</strong>ã€æ›´<strong>å¯ç»´æŠ¤</strong>ã€æ›´<strong>ç”¨æˆ·ä¸ºä¸­å¿ƒ</strong>çš„å‰ç«¯åº”ç”¨ã€‚</p>
<p>åœ¨æ—¥ç›Šå¤æ‚çš„å‰ç«¯ç”Ÿæ€ä¸­ï¼Œæ„å›¾ç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¡æ¸…æ™°çš„è·¯å¾„ï¼š<strong>é€šè¿‡æŠ½è±¡åŒ–ç”¨æˆ·æ„å›¾ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ä¸UIçš„å½»åº•è§£è€¦</strong>ï¼Œä»è€Œåœ¨å¿«é€Ÿå˜åŒ–çš„éœ€æ±‚é¢å‰ä¿æŒæ¶æ„çš„ç¨³å®šæ€§å’Œæ‰©å±•æ€§ã€‚</p>
<p><strong>æœ€å¥½çš„æ¶æ„ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯æœ€èƒ½é€‚åº”å˜åŒ–çš„</strong>ã€‚æ„å›¾ç³»ç»Ÿæ­£æ˜¯è¿™ç§é€‚åº”æ€§çš„ä½“ç°â€”â€”å®ƒè®©æˆ‘ä»¬çš„å‰ç«¯æ¶æ„èƒ½å¤Ÿåƒä¸šåŠ¡ä¸€æ ·çµæ´»æ¼”è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582104240986963994</link>    <guid>https://juejin.cn/post/7582104240986963994</guid>    <pubDate>2025-12-11T01:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240986963994" data-draft-id="7582090790182027302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-11T01:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:09:39.000Z" title="Thu Dec 11 2025 01:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾åº”è¯¥æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ä¼šç”¨åˆ°çš„ç»˜å›¾å·¥å…·ã€‚<code>Xmind</code>å’Œäº¿å›¾æ›¾æ˜¯æˆ‘çš„é¦–é€‰å·¥å…·ï¼Œä½†æ˜¯å…è´¹ç‰ˆåŠŸèƒ½å—é™ï¼Œé«˜çº§åŠŸèƒ½éœ€ä»˜è´¹ï¼Œç”¨èµ·æ¥æ€»æ˜¯å·®ç‚¹æ„æ€ã€‚è™½ç„¶é€šè¿‡å…¶ä»–æ–¹å¼æ­£å¸¸ä½¿ç”¨ï¼ˆå¤§å®¶éƒ½æ‡‚å¾—ï¼‰ï¼Œä½†æ˜¯è½¯ä»¶çš„æ›´æ–°æ ¹æœ¬ä¸æ•¢åŠ¨ï¼Œä¸€æ—¦æ›´æ–°å°±ä¼šå‰åŠŸå°½å¼ƒ......è€Œä¸”ä¸¤æ¬¾å·¥å…·æ€»ä¼šæ¥å›åˆ‡æ¢ï¼Œè™½å·²ä¹ æƒ¯ï¼Œä½†ç¨æ˜¾éº»çƒ¦ï¼</p>
<p>ç›´åˆ°ä¸ä¹…å‰é€›<code>GitHub</code>å‘ç°äº†ä¸€æ¬¾å¼€æºçš„ä¸”å¯ä»¥åœ¨çº¿ä½¿ç”¨çš„å·¥å…·ï¼š<code>Drawnix</code>ã€‚ç•Œé¢ç®€çº¦ï¼Œæ»¡è¶³æ—¥å¸¸åŸºæœ¬ç»˜å›¾éœ€æ±‚ï¼Œä¸”æ”¯æŒ <code>mermaid</code> è¯­æ³•è½¬æµç¨‹å›¾ç­‰ï¼Œç”¨èµ·æ¥éå¸¸ä¸æ»‘ã€‚æ•´ç†ä¸€ä¸‹åˆ†äº«ç»™å¤§å®¶ï¼</p>
<h2 data-id="heading-1">02 ç®€ä»‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aded8cfebf8a44ec9b91ac8ec9521a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=NcpQeHkSVtB6dxcGrOsSeo7vWtY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 åç§°çš„ç”±æ¥</h3>
<p><code>Drawnix</code> ï¼Œæºäºç»˜ç”»( <code>Draw</code>)ä¸å‡¤å‡°( <code>Phoenix</code> )çš„çµæ„Ÿäº¤ç»‡ã€‚å‡¤å‡°è±¡å¾ç€ç”Ÿç”Ÿä¸æ¯çš„åˆ›é€ åŠ›ï¼Œè€Œ <code>Draw</code>ä»£è¡¨ç€äººç±»æœ€åŸå§‹çš„è¡¨è¾¾æ–¹å¼ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸€æ¬¡åˆ›ä½œéƒ½æ˜¯ä¸€æ¬¡è‰ºæœ¯çš„æ¶…æ§ƒï¼Œæ¯ä¸€ç¬”ç»˜ç”»éƒ½æ˜¯çµæ„Ÿçš„é‡ç”Ÿã€‚</p>
<p>åˆ›æ„å¦‚åŒå‡¤å‡°ï¼Œæµ´ç«æ–¹èƒ½é‡ç”Ÿï¼Œè€Œ <code>Drawnix</code> è¦åšæŠ€æœ¯ä¸åˆ›æ„ä¹‹ç«çš„å®ˆæŠ¤è€…ã€‚</p>
<h3 data-id="heading-3">2.2 æ¡†æ¶</h3>
<p><code>Drawnix</code> çš„å®šä½æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨ã€å¼€æºã€å…è´¹çš„å·¥å…·äº§å“ï¼Œå®ƒçš„åº•å±‚æ˜¯ <code>Plait</code>æ¡†æ¶ï¼Œ<code>Plait</code> æ˜¯ä½œè€…å…¬å¸å¼€æºçš„ä¸€æ¬¾ç”»å›¾æ¡†æ¶ï¼Œä»£è¡¨ç€å…¬å¸åœ¨çŸ¥è¯†åº“äº§å“ä¸Šçš„é‡è¦æŠ€æœ¯æ²‰æ·€ã€‚</p>
<p><code>Drawnix</code> æ˜¯æ’ä»¶æ¶æ„ï¼Œä¸å‰é¢è¯´åˆ°å¼€æºå·¥å…·æ¯”æŠ€æœ¯æ¶æ„æ›´å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯æ’ä»¶æ¶æ„ä¹Ÿæœ‰ä¼˜åŠ¿ï¼Œæ¯”å¦‚èƒ½å¤Ÿæ”¯æŒå¤šç§ <code>UI</code> æ¡†æ¶ï¼ˆ<code>Angular</code>ã€<code>React</code>ï¼‰ï¼Œèƒ½å¤Ÿé›†æˆä¸åŒå¯Œæ–‡æœ¬æ¡†æ¶ï¼ˆå½“å‰ä»…æ”¯æŒ <code>Slate</code>æ¡†æ¶ï¼‰ï¼Œåœ¨å¼€å‘ä¸Šå¯ä»¥å¾ˆå¥½çš„å®ç°ä¸šåŠ¡çš„åˆ†å±‚ï¼Œå¼€å‘å„ç§ç»†ç²’åº¦çš„å¯å¤ç”¨æ’ä»¶ï¼Œå¯ä»¥æ‰©å±•æ›´å¤šçš„ç”»æ¿çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p><code>GitHub</code>åœ°å€ï¼š</p>
<h3 data-id="heading-4">2.3 ç‰¹æ€§</h3>
<ul>
<li>ğŸ’¯ å…è´¹ + å¼€æº</li>
<li>âš’ï¸ æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾</li>
<li>ğŸ–Œ ç”»ç¬”</li>
<li>ğŸ˜€ æ’å…¥å›¾ç‰‡</li>
<li>ğŸš€ åŸºäºæ’ä»¶æœºåˆ¶</li>
<li>ğŸ–¼ï¸ ğŸ“ƒ å¯¼å‡ºä¸º PNG, JSON(<code>.drawnix</code>)</li>
<li>ğŸ’¾ è‡ªåŠ¨ä¿å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ï¼‰</li>
<li>âš¡ ç¼–è¾‘ç‰¹æ€§ï¼šæ’¤é”€ã€é‡åšã€å¤åˆ¶ã€ç²˜è´´ç­‰</li>
<li>ğŸŒŒ æ— é™ç”»å¸ƒï¼šç¼©æ”¾ã€æ»šåŠ¨</li>
<li>ğŸ¨ ä¸»é¢˜æ¨¡å¼</li>
<li>ğŸ“± ç§»åŠ¨è®¾å¤‡é€‚é…</li>
<li>ğŸ“ˆ æ”¯æŒ mermaid è¯­æ³•è½¬æµç¨‹å›¾</li>
<li>âœ¨ æ”¯æŒ markdown æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ï¼ˆæ–°æ”¯æŒ ğŸ”¥ğŸ”¥ğŸ”¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">2.4 å®‰è£…</h3>
<p>æä¾›<code>Docker</code>éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">docker pull pubuzhixing/drawnix:latest
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨çº¿ä½¿ç”¨ï¼š</p>
<p>åœ°å€ï¼š</p>
<h2 data-id="heading-6">03 æœ€ä½³å®è·µ</h2>
<p>å®è·µæˆ‘ä»¬é‡‡ç”¨åœ¨çº¿æ–¹å¼ï¼Œå¦‚æœæ³¨é‡å®‰å…¨æˆ–è€…æœ¬åœ°ä½¿ç”¨å¯ä»¥ä½¿ç”¨<code>Docker</code>éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-7">3.1 ç•Œé¢è¯´æ˜</h3>
<p>é€šè¿‡<code>https://drawnix.com/</code>è¿›å…¥ä¹‹åï¼Œæ‰€æœ‰åŠŸèƒ½å¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1050e9bc264de3b953043d5d33b19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=wSlN%2Bab1vWJtIehD7RrD3%2F64YBA%3D" alt="" loading="lazy"/></p>
<p>ä¸­é—´å·¥å…·æ åˆ†åˆ«è¡¨ç¤ºï¼š</p>
<ul>
<li>æ‹–æ‹½</li>
<li>é€‰ä¸­</li>
<li>æ€ç»´å¯¼å›¾</li>
<li>æ–‡å­—</li>
<li>æ‰‹ç»˜</li>
<li>ç®­å¤´</li>
<li>æµç¨‹å›¾</li>
<li>æ’å…¥å›¾ç‰‡</li>
<li>æ ¼å¼è½¬æ¢</li>
</ul>
<p>åŠŸèƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œæ€ç»´å¯¼å›¾ã€æµç¨‹å›¾ä»¥åŠæ ¼å¼è½¬åŒ–æ˜¯å¸¸ç”¨çš„å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17d70fca32644037a52d5b30600c76d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=rPCwuGYDZ0OtICIaWme7hN8CUrE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 æ€ç»´å¯¼å›¾</h3>
<p>æ€ç»´å¯¼å›¾çš„ä½¿ç”¨æ–¹å¼å’Œ<code>Xmind</code>çš„ç”¨æ³•æä¸ºç›¸ä¼¼ã€‚é€‰ä¸­èŠ‚ç‚¹ï¼Œç„¶å<code>Tab</code>é”®å°±å¯ä»¥æ·»åŠ åŒçº§å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>+</code>å·æ·»åŠ ã€‚<code>-</code>å·å¹¶ä¸æ˜¯åˆ é™¤ï¼Œè€Œæ˜¯åˆå¹¶ã€‚åˆ é™¤ä¹Ÿéå¸¸ç®€å•ï¼Œé€‰ä¸­ç›´æ¥<code>Delete</code>å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/253053338d2e4fad9b280bbd1abdd554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=29EXmJucrIPvcGoTl6actyUkNhE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 æµç¨‹å›¾</h3>
<p>æµç¨‹å›¾çš„å›¾å½¢ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸ƒé¡¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2324740772ea409f98298583d7bd5115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=gZmqMXebA63ivy6m8RC07wMMizg%3D" alt="" loading="lazy"/></p>
<p>é€‰ä¸­ä¹‹åç›´æ¥ç»˜åˆ¶å³å¯ï¼Œå›¾å½¢ä¹‹é—´ä½¿ç”¨ç®­å¤´é“¾æ¥å³å¯ã€‚</p>
<h3 data-id="heading-10">3.4 æ ¼å¼è½¬åŒ–</h3>
<p>ç›®å‰æ”¯æŒä¸¤ç§æ ¼å¼è½¬åŒ–æˆæµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d35787be17174e36b5f939f55898cd0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=OKi2U0L%2Bmo%2Bk5stpOPLMTEv7YdI%3D" alt="" loading="lazy"/></p>
<p><strong>Mermaid</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/348d3bc49d6e4c3ab89f69db4c71c5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=aB%2F1hlGPV4%2F3BRkQBtAKBM90bio%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæµç¨‹å›¾ã€åºåˆ—å›¾å’Œç±»å›¾</p>
<p><strong>Markdown</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e135f734d244b1b8688f27082a54efb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=s3Sxc7cdzoDgTOii7GSOgJL0rC0%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæ€ç»´å¯¼å›¾ã€‚</p>
<h2 data-id="heading-11">04 å°ç»“</h2>
<p><code>Drawnix</code>çš„æç®€è®¾è®¡æ»¡è¶³æ—¥å¸¸ç»˜å›¾çš„éœ€è¦ï¼Œå¯èƒ½åœ¨å¾ˆå¤šåŠŸèƒ½ä¸Šä¸å¦‚<code>Xmind</code>æˆ–è€…äº¿å›¾ï¼Œä½†æ˜¯å®ƒç¡®å®ä¸¤è€…çš„ç»“åˆã€‚æ˜¯ä¸€æ¬¾ä¸é”™çš„ç»˜å›¾è½¯ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…]]></title>    <link>https://juejin.cn/post/7582131164727541800</link>    <guid>https://juejin.cn/post/7582131164727541800</guid>    <pubDate>2025-12-11T01:09:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582131164727541800" data-draft-id="7582044568721834024" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-11T01:09:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’æ¢…ä¸»ç "/> <meta itemprop="url" content="https://juejin.cn/user/2277843825604222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843825604222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’æ¢…ä¸»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:09:56.000Z" title="Thu Dec 11 2025 01:09:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯<strong>æ°å“¥</strong>ã€‚</p>
<p>å°±åœ¨æ˜¨å¤©ï¼Œé‡å­ä½æ™ºåº“æœ€æ–°å‘å¸ƒäº†ã€Š<strong>2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Š</strong>ã€‹æŠ¥å‘Šã€‚è¿™ä»½æŠ¥å‘ŠåŸºäºå…¨çƒ<strong>AI</strong> æŠ€æœ¯å‰æ²¿åŠ¨æ€ï¼Œæ¢³ç†å‡º <strong>2025</strong> å¹´å°†æ·±åˆ»å½±å“äº§ä¸šå’Œç¤¾ä¼šçš„åå¤§å…³é”®è¶‹åŠ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e0d865c9ce411b8cbc5ef167fcd169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=bmzF%2BOp1O2%2FLw3dMtekmW9afeXw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29e83fe1f1ab4c75b3d3f3e3f4cdf479~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=GwtBkWzzvyRQsBaMvJClFqylKlc%3D" alt="" loading="lazy"/></p>
<p>æŠ¥å‘Šä»å››ä¸ªç»´åº¦å±•å¼€ï¼š<strong>åŸºç¡€è®¾æ–½ã€æ¨¡å‹è¿›åŒ–ã€åº”ç”¨ç‰ˆå›¾å’Œä¸­å›½æ—¶é—´</strong>ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€è®¾æ–½â€”â€”ç®—åŠ›æˆâ€œæ–°çŸ³æ²¹â€</h2>
<p><strong>AI</strong>çš„é£è·ƒç¦»ä¸å¼€åº•å±‚æ”¯æ’‘ã€‚æŠ¥å‘ŠæŒ‡å‡ºï¼Œâ€œæœ‰é™ç®—åŠ›â€å·²æˆä¸ºå…¨çƒæˆ˜ç•¥ç“¶é¢ˆï¼Œè¿™ç›´æ¥å‚¬ç”Ÿäº†åŸºç¡€è®¾æ–½çš„å·¨å˜ã€‚</p>
<h4 data-id="heading-1">è¶‹åŠ¿1ï¼šç®—åŠ›åŸºå»ºåŒ–â€”â€”æ•°æ®ä¸­å¿ƒéœ€æ±‚ç‹‚é£™ï¼Œç®—åŠ›ç»æµæ˜¯æ™ºèƒ½äº§ä¸šç¬¬ä¸€å¤§å¼•æ“</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc6598c23677460eae7276bf9fb1973d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=rZT2W237kqzNxxNKvDy3BeNyRI4%3D" alt="" loading="lazy"/></p>
<p><strong>AI</strong>è®­ç»ƒåƒç‚¼é’¢ä¸€æ ·ï¼Œéœ€è¦æµ·é‡â€œç”µåŠ›â€â€”â€”è¿™å°±æ˜¯ç®—åŠ›ã€‚<strong>2025å¹´</strong>ï¼Œå…¨çƒè¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒå°†è¿æ¥å»ºè®¾æµªæ½®ã€‚åƒ<strong>Stargate</strong>æ˜Ÿé™…ä¹‹é—¨è®¡åˆ’ï¼ˆæŠ•èµ„è¶… <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mtext>äº¿</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼‰ï¼Œç”±</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>O</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>A</mi><mi>I</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ä¸</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>O</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>l</mi><mi>e</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ã€</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>S</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>B</mi><mi>a</mi><mi>n</mi><mi>k</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>G</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>l</mi><mi>e</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>çš„</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>A</mi><mi>I</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>æ¢çº½æŠ•</mtext><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">1000äº¿**ï¼‰ï¼Œç”±**OpenAI**ä¸**Oracle**ã€**SoftBank**åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚**Google**çš„**AI**æ¢çº½æŠ• **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">1000</span><span class="mord cjk_fallback">äº¿</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼‰ï¼Œç”±</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">Op</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ä¸</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ã€</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.05017em;">tB</span><span class="mord mathnormal" style="margin-right:0.03148em;">ank</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">G</span><span class="mord mathnormal">oo</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">çš„</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">æ¢çº½æŠ•</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span></span></span></span></span>400äº¿</strong>ï¼Œ<strong>Microsoft</strong>çš„<strong>AI</strong>è¶…çº§å›­åŒº <strong>$73äº¿</strong>ï¼Œè¿™äº›é¡¹ç›®ä¸åªå»ºæœåŠ¡å™¨æˆ¿ï¼Œæ›´æ˜¯â€œç®—åŠ›å·¥å‚â€ã€‚</p>
<p>å…¨çƒèµ„æœ¬å¼€æ”¯é«˜è¾¾ <strong>2980äº¿ç¾å…ƒ</strong>ï¼Œäº‘è®¡ç®—å·¨å¤´å¦‚<strong>AWS</strong>ï¼ˆ<strong>â‚¬78äº¿</strong>åœ¨å¾·å›½ï¼‰ã€<strong>Google</strong>ï¼ˆ<strong>â‚¬10äº¿+</strong>ï¼‰æ­£å€¾æ–œèµ„é‡‘å‘<strong>AI</strong>ä¸“ç”¨ç®—åŠ›ã€‚æ¬§æ´²ã€ä¸­ä¸œã€ä¸œå—äºšç­‰åœ°äº‰ç›¸å¸ƒå±€ï¼Œä¸»æƒäº‘å’Œæ¸…æ´èƒ½æºæˆçƒ­ç‚¹ã€‚æ¯”å¦‚ï¼Œæ²™ç‰¹<strong>AWS</strong>äº‘åŒºåŸŸæŠ• <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>53</mn><mtext>äº¿</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼Œè‚¯å°¼äºš</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>M</mi><mi>i</mi><mi>c</mi><mi>r</mi><mi>o</mi><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>åœ°çƒ­ä¸­å¿ƒ</mtext><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">53äº¿**ï¼Œè‚¯å°¼äºš**Microsoft**åœ°çƒ­ä¸­å¿ƒ **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">53</span><span class="mord cjk_fallback">äº¿</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼Œè‚¯å°¼äºš</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">i</span><span class="mord mathnormal">croso</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">åœ°çƒ­ä¸­å¿ƒ</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span></span></span></span></span>10äº¿</strong>ã€‚</p>
<p>åœ¨ä¸­å›½ï¼Œâ€œä¸œæ•°è¥¿ç®—â€å·¥ç¨‹åŠ é€Ÿï¼Œæ„å»ºå…¨å›½ä¸€ä½“åŒ–ç®—åŠ›ç½‘ç»œã€‚è¶…èŠ‚ç‚¹å’Œè¶…çº§ç¾¤è®©æ•°ä¸‡å—<strong>GPU</strong>é›†ç¾¤é«˜æ•ˆè¿è½¬ï¼Œç”šè‡³å¤ªç©ºè®¡ç®—æ–¹æ¡ˆå¦‚â€œå¤©ç®—æ˜Ÿåº§â€è®¡åˆ’2027å¹´éƒ¨ç½²ç™¾æ˜Ÿçº§ã€ç™¾<strong>TOPS</strong>çº§è¶…ç®—ã€‚è¿™è‚¡ç®—åŠ›æµªæ½®ï¼Œä¸ä»…æ”¯æ’‘<strong>AI</strong>å•†ç”¨æ¸—é€ï¼Œè¿˜åƒç”µåŠ›ç½‘ä¸€æ ·ï¼Œæˆä¸ºç”Ÿæ´»å¿…éœ€ã€‚</p>
<h4 data-id="heading-2">è¶‹åŠ¿2ï¼šèŠ¯ç‰‡AIåŒ–â€”â€”AIåŸç”Ÿéœ€æ±‚é‡å¡‘èŠ¯ç‰‡åˆ›æ–°ï¼Œå¤§å¸‚åœºå¤§ç”Ÿæ€æ‰“å¼€æ—¶ä»£èŠ¯æœºé‡</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/357fb3c8c5e2437b982896a4e663e338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=uongKQsazcgcEjEar8AAlQP0HWk%3D" alt="" loading="lazy"/></p>
<p>èŠ¯ç‰‡ä»â€œé€šç”¨â€å˜â€œ<strong>AI</strong>åŸç”Ÿâ€ï¼Œ<strong>GPU</strong>ä»æ˜¯ç‹è€…ï¼Œä½†ç¨€ç¼ºå’Œé«˜ä»·é€¼å‡ºæ–°ç©æ³•ã€‚<strong>NVIDIA</strong>ç»Ÿæ²»è®­ç»ƒå¸‚åœºï¼Œä½†<strong>CPU</strong>è§’è‰²è½¬å‘è¾…åŠ©<strong>AI</strong>ä»»åŠ¡ï¼Œé›†æˆåŠ é€ŸæŒ‡ä»¤é›†ã€‚ç«¯ä¾§<strong>NPU</strong>ï¼ˆç¥ç»å¤„ç†å•å…ƒï¼‰æˆæ ‡é…ï¼Œæ‰‹æœºã€<strong>PC</strong>ã€ç‰©è”ç½‘è®¾å¤‡ä½åŠŸè€—æ¨ç†å…¨é å®ƒã€‚<strong>ASIC</strong>/<strong>FPGA</strong>å®šåˆ¶èŠ¯ç‰‡ä¹Ÿçˆ†å‘ï¼Œæ»¡è¶³ç‰¹å®šåœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849e549e08e245969367660fc47f6cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=kN9ZGGofgQudJvoV1Gt2nbV%2FI5o%3D" alt="" loading="lazy"/></p>
<p>å…¨çƒ<strong>AI</strong>èŠ¯ç‰‡å¸‚åœº2025å¹´é¢„æµ‹å€¼äº®çœ¼ï¼Œä¸­å›½å¸‚åœºå›½äº§æ›¿ä»£åŠ é€Ÿã€‚å›½äº§æ¨¡å‹+èŠ¯ç‰‡+<strong>SDK</strong>é¦–æ¬¡éªŒè¯åƒäº¿å‚æ•°è®­ç»ƒï¼Œæ‘†è„±<strong>CUDA</strong>ä¾èµ–ã€‚<strong>DeepSeek</strong>ä¼˜åŒ–åä¸º<strong>Ascend</strong>èŠ¯ç‰‡ï¼Œç¡®ä¿é«˜æ•ˆè¿è¡Œã€‚è¿™æ³¢å˜é©ï¼Œè®©èŠ¯ç‰‡åˆ›æ–°ä»â€œè·Ÿè·‘â€åˆ°â€œé¢†è·‘â€ï¼Œå¤§ç”Ÿæ€æ‰“å¼€æ— é™æœºé‡ã€‚</p>
<h2 data-id="heading-3">ç¬¬äºŒéƒ¨åˆ†ï¼šæ¨¡å‹è¿›åŒ–â€”â€”ä»è§„æ¨¡åˆ°æ•ˆç‡çš„å¹³è¡¡èµ›è·‘</h2>
<p>æ¨¡å‹ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œè€Œæ˜¯èªæ˜æ‰è¡Œã€‚ç®—åŠ›åˆ¶çº¦ä¸‹ï¼Œåˆ›æ–°èšç„¦æ•ˆç‡å’Œå®ç”¨ã€‚</p>
<h4 data-id="heading-4">è¶‹åŠ¿3ï¼šé¢„è®­ç»ƒå†³å®šå¤§æ¨¡å‹æ ¼å±€æ¢¯é˜Ÿï¼Œæ¶æ„åˆ›æ–°å†³å®šé¢„è®­ç»ƒæ°´å¹³</h4>
<p>é¢„è®­ç»ƒæ˜¯<strong>AI</strong>â€œä¸Šè¯¾â€é˜¶æ®µï¼Œå†³å®šè°è¿›æ¢¯é˜Ÿã€‚è¶…è¶Š<strong>Transformer</strong>æ¶æ„æ˜¯å…³é”®ï¼Œçº¿æ€§æ³¨æ„åŠ›å’Œç¨€ç–æ³¨æ„åŠ›é™å¤æ‚åº¦åˆ°<strong>O(n)</strong>ï¼Œé«˜æ•ˆå¤„ç†é•¿ä¸Šä¸‹æ–‡ã€‚<strong>MoE</strong>ï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰æˆä¸»æµï¼šâ€œå¤§å‚æ•°ï¼Œå°æ¿€æ´»â€ï¼Œå¦‚æ€»å‚æ•°<strong>1ä¸‡äº¿</strong>çš„<strong>Kimi K2 Thinking</strong>ï¼Œä¸“æ³¨å¤æ‚æ¨ç†ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5784cae410945d4b93a532f6d2432ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=DEBiJof9DpvaZGCEik2qcc1hHx4%3D" alt="" loading="lazy"/></p>
<p>ä¸­å›½ç©å®¶å¼ºåŠ¿ï¼š<strong>Qwen3</strong>ï¼ˆ<strong>235B</strong>æ€»å‚æ•°ï¼Œ<strong>22B</strong>æ¿€æ´»ï¼Œæ”¯æŒ119ç§è¯­è¨€ï¼‰ã€<strong>ERNIE 5.0</strong>ï¼ˆ<strong>2.4T</strong>å‚æ•°ï¼Œå…¨æ¨¡æ€ï¼‰ã€<strong>DeepSeek-V3</strong>ï¼ˆ<strong>671B</strong>ï¼Œ14.8T tokené¢„è®­ç»ƒï¼‰ã€‚è’¸é¦å°æ¨¡å‹å’Œ<strong>RLHF</strong>ï¼ˆäººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼‰è®©å¤§æ¨¡å‹â€œç˜¦èº«â€åˆ°è¾¹ç¼˜è®¾å¤‡ï¼Œè¿˜èå…¥äººç±»åå¥½ï¼Œå‡å°‘å¹»è§‰ã€‚</p>
<h4 data-id="heading-5">è¶‹åŠ¿4ï¼šå¤§æ¨¡å‹è½åœ°è¿›å…¥æ¨ç†æ—¶é—´ï¼Œæ¨ç†éœ€æ±‚å€’é€¼æ¨¡å‹åˆ›æ–°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5145ffdee1e84df4a7227d1a169e5e50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=P7jPx0wtP4bJ5HQO%2BNbGTng1wVM%3D" alt="" loading="lazy"/></p>
<p>è®­ç»ƒåæ˜¯â€œå®æˆ˜â€â€”â€”æ¨ç†é˜¶æ®µã€‚2025å¹´ï¼Œå¤šæ¨¡æ€æ·±åº¦æ¨ç†ã€è‡ªé€‚åº”æ¨ç†å’Œå¢é‡å­¦ä¹ æˆç„¦ç‚¹ã€‚<strong>MoE</strong>ä¸“å®¶æ•°é‡æ¿€å¢ï¼ˆå¦‚<strong>Qwen3-Next</strong>ï¼‰ï¼Œ<strong>OCR</strong>ç”¨å°‘é‡tokenè¡¨å¾æ–‡æœ¬ï¼Œéšå¼æ¨ç†è®©æ¨¡å‹â€œå†…éƒ¨æ€è€ƒâ€ã€‚ç¡¬ä»¶å¼‚æ„ååŒå’Œè¾¹ç¼˜åŠ é€Ÿï¼Œç¡®ä¿ä½å»¶è¿Ÿã€‚<strong>Agent</strong>æ—¶ä»£ï¼Œä»»åŠ¡å¤æ‚åº¦é£™å‡ï¼Œæ¨ç†æ¡†æ¶è¿›åŒ–æˆåˆšéœ€ã€‚</p>
<h4 data-id="heading-6">è¶‹åŠ¿5ï¼šä¿¡æ¯AIåº”ç”¨æœŸï¼Œç‰©ç†AIç ”å‘æœŸï¼Œå…·èº«æ™ºèƒ½æˆåˆæµé£å£</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/286bc8a3712a4789b28a44a11e8c1a2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=iDxpmBnJLdif0Bd8aLeOdFNFtO4%3D" alt="" loading="lazy"/></p>
<p><strong>AI</strong>åˆ†ä¸¤è·¯ï¼šä¿¡æ¯<strong>AI</strong>å·²è½åœ°ï¼ˆå¦‚èŠå¤©æœºå™¨äººï¼‰ï¼Œç‰©ç†<strong>AI</strong>æ­£ç ”å‘ï¼Œç†è§£é‡åŠ›ã€æ‘©æ“¦ç­‰ç‰©ç†è§„å¾‹ã€‚ä¸–ç•Œæ¨¡å‹æ¨¡æ‹ŸçœŸå®ä¸–ç•Œï¼Œ<strong>VLA</strong>ï¼ˆè§†è§‰-è¯­è¨€-åŠ¨ä½œï¼‰ç»Ÿä¸€æ¡†æ¶è®©æœºå™¨äººâ€œå¬æŒ‡ä»¤åŠ¨èµ·æ¥â€ã€‚å¼€æºå¦‚<strong>OpenVLA</strong>å’Œ<strong>Unitree RL Gym</strong>åŠ é€Ÿå…·èº«æ™ºèƒ½ï¼Œä»å·¥ä¸šåˆ°å®¶åº­ï¼Œäººå½¢æœºå™¨äººè®¢å•åˆç°ã€‚æ•°æ®é›†å¼€æºæ¨åŠ¨äº§å­¦ç ”å…±åˆ›ï¼ŒæŒ‘æˆ˜å¦‚ç»­èˆªå’Œæˆæœ¬æ­£è¢«æ”»å…‹ã€‚</p>
<h2 data-id="heading-7">ç¬¬ä¸‰éƒ¨åˆ†ï¼šåº”ç”¨ç‰ˆå›¾â€”â€”ä»è™šæ‹Ÿåˆ°ç°å®çš„å…¨é¢æ¸—é€</h2>
<p><strong>AI</strong>ä¸å†æ˜¯å·¥å…·ï¼Œè€Œæ˜¯ç”Ÿæ´»æ–¹å¼ã€‚åº”ç”¨ä»æ•°å­—æ‰©å±•åˆ°ç‰©ç†ï¼Œé‡å¡‘æµé‡å’Œç”Ÿäº§åŠ›ã€‚</p>
<h4 data-id="heading-8">è¶‹åŠ¿6ï¼šAIé‡å¡‘æµé‡å…¥å£â€”â€”PCäº’è”ç½‘ã€ç§»åŠ¨äº’è”ç½‘ã€Agenticäº’è”ç½‘</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e553745e2c3e40939c1d31b7ad819fde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=dEfiB8yv%2BspyAXTVIRg4XPF3PR0%3D" alt="" loading="lazy"/></p>
<p><strong>Agent</strong>æ˜¯ä¸‹ä¸€ä¸ªèŒƒå¼ï¼Œèƒ½æ„ŸçŸ¥-è§„åˆ’-æ‰§è¡Œé—­ç¯ã€‚æ ¸å¿ƒæ˜¯æ¨ç†èƒ½åŠ›ï¼Œåˆ†è§£å¤æ‚ä»»åŠ¡ã€‚å¼€å‘é—¨æ§›é™äº†ï¼Œ<strong>AI</strong>ç¼–ç ç”Ÿæˆä»£ç ï¼Œæ¡†æ¶å¦‚<strong>LangGraph</strong>ï¼ˆçŠ¶æ€å·¥ä½œæµï¼‰å’Œ<strong>AutoGen</strong>ï¼ˆå¯¹è¯é©±åŠ¨ï¼‰è®©æ„å»º<strong>Agent</strong>å¦‚æ­ç§¯æœ¨ã€‚æµé‡ä»â€œäººæ‰¾æœåŠ¡â€å˜â€œæœåŠ¡æ‰¾äººâ€ï¼Œå¯¹è¯å³å…¥å£ï¼Œæ“ä½œç³»ç»Ÿæˆ–æˆè¶…çº§<strong>Agent</strong>ã€‚2025å¹´ï¼Œä¸“ä¸š<strong>Agent</strong>å°†å–ä»£éƒ¨åˆ†<strong>App</strong>ã€‚</p>
<h4 data-id="heading-9">è¶‹åŠ¿7ï¼šå¤šæ¨¡æ€æˆAIåº”ç”¨è½åœ°å…³é”®â€”â€”è§†é¢‘ã€3Dã€ä»£ç ä¾æ¬¡å±•ç°ç”Ÿäº§åŠ›</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88538de2a33245d6b43ad59905cf4284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=76aCa2%2Fuy%2FfKjmThzDfGmwx6zwY%3D" alt="" loading="lazy"/></p>
<p>å¤šæ¨¡æ€èåˆæ–‡æœ¬ã€å›¾åƒã€è§†é¢‘æˆæ ‡é…ã€‚è§†é¢‘ç”Ÿæˆåˆ†é€šç”¨ï¼ˆå¦‚<strong>Sora2</strong>ï¼‰å’Œå‚ç›´ï¼ˆå¦‚å½±è§†é¢„è§ˆï¼‰ï¼Œæå‡åˆ†è¾¨ç‡å’Œé€»è¾‘è¿è´¯ã€‚<strong>3D</strong>ç”Ÿæˆé‡å¡‘å·¥ä½œæµï¼Œä»æ–‡æœ¬åˆ°æ¨¡å‹ä¸€æ¬¡æ€§æå®šï¼ŒåŠ©åŠ›æ¸¸æˆã€å…ƒå®‡å®™ã€‚ä»£ç ç”Ÿæˆè·¨é—¨æ§›ï¼Œ<strong>Vibe Coding</strong>ç”¨è‡ªç„¶è¯­è¨€æè¿°æ„å›¾ï¼Œ<strong>AI</strong>å»ºé¡¹ç›®ã€‚å¤šæ¨¡æ€è®©å¼€å‘è€…ä»çäº‹è§£æ”¾ï¼Œä¸“æ³¨ä»·å€¼åˆ›é€ â€”â€”ä»â€œé™æœ¬â€åˆ°â€œå‡ç»´â€ã€‚</p>
<h4 data-id="heading-10">è¶‹åŠ¿8ï¼šAIç¡¬ä»¶ç™¾ç«¯é½æ”¾â€”â€”PCæ‰‹æœºæ±½è½¦çœ¼é•œç©å…·ï¼Œç„•è„‘æ­£å½“æ—¶</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811ca3220ce544759dc917601bd8a0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=t9SLlbcrdOu0qq3%2Fnjpp9z9Il5w%3D" alt="" loading="lazy"/></p>
<p>ç«¯ä¾§<strong>AI</strong>ç”Ÿæ€çˆ†å‘ã€‚<strong>AI PC</strong>å¯†é›†å‘å¸ƒï¼Œå†…ç½®<strong>NPU</strong>å¤„ç†å™¨å¦‚<strong>Intel</strong>ã€<strong>AMD</strong>ï¼Œæœ¬åœ°è¿è¡Œæ— éœ€äº‘ç«¯ã€‚æ‰‹æœºé›†æˆç…§ç‰‡åˆ†ç±»ã€å®æ—¶ç¿»è¯‘ï¼›å¯ç©¿æˆ´å¦‚<strong>AI</strong>çœ¼é•œå®æ—¶è¯†ç‰©ï¼›ç©å…·å˜æ™ºèƒ½ä¼™ä¼´ï¼Œå¯¹è¯æ•™è‚²ã€‚ä¼˜åŠ¿ï¼Ÿä½å»¶è¿Ÿã€é«˜éšç§ã€‚è½¯ç¡¬ä»¶ååŒï¼Œæ„å»ºâ€œç¬¬äºŒå¤§è„‘â€ã€‚</p>
<h4 data-id="heading-11">è¶‹åŠ¿9ï¼šAI4S çªç ´åŠ é€Ÿ AGI å®ç°â€”â€”AI æ•°ç†åŒ–è§¦åŠåšå£«æ°´å¹³</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b0bdbac16e34cde862ada445efa1226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=tCmvjL3Uk2R8MqHKLA%2FGsXaLwkg%3D" alt="" loading="lazy"/></p>
<p><strong>AI for Science</strong>ï¼ˆ<strong>AI4S</strong>ï¼‰é‡å¡‘ç§‘ç ”å…¨æµç¨‹ã€‚åŒ»ç–—å¦‚<strong>GRAPE</strong>æ¨¡å‹è¯†èƒƒç™Œæ•æ„Ÿæ€§<strong>85.1%</strong>ï¼Œ<strong>DeepGEM</strong>é¢„æµ‹è‚ºç™ŒåŸºå› <strong>78%-99%<strong>ç²¾å‡†ã€‚ææ–™ç§‘å­¦å‘ç°é«˜ç†µåˆé‡‘å‚¬åŒ–å‰‚æ€§èƒ½å‡</strong>9.3å€</strong>ï¼Œ<strong>ChemAgents</strong>è‡ªä¸»åˆæˆé‡å­ç‚¹ã€‚<strong>Agentic Science</strong>è®©<strong>AI</strong>æˆâ€œåŒ–å­¦å®¶â€ï¼ŒåŠ é€Ÿ<strong>AGI</strong>ï¼Œè§¦åŠåšå£«çº§æ•°ç†åŒ–èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-12">ç¬¬å››éƒ¨åˆ†ï¼šä¸­å›½æ—¶é—´â€”â€”å¼€æºé¢†è·‘ï¼ŒAGIä¸­å›½è·¯çº¿</h2>
<h4 data-id="heading-13">è¶‹åŠ¿10ï¼šå¼€æºAIè¿›å…¥ä¸­å›½æ—¶é—´â€”â€”AGIæ‹¥æœ‰ä¸­å›½è·¯çº¿</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32c1901873584d3dbd6d79f0eb89fec6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=uhlwBB5UAclH3WfExlN6eU%2F5hQs%3D" alt="" loading="lazy"/></p>
<p>ä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…ã€‚ä¼ä¸šè½¬å‹ç ”å‘ï¼Œ<strong>Huawei</strong>ã€<strong>Alibaba</strong>ç­‰å·¨èµ„èŠ¯ç‰‡å’Œæ¨¡å‹ã€‚<strong>AGI</strong>å‡å›½å®¶æˆ˜ç•¥ï¼Œåˆ°2025å¹´æ€»ç®—åŠ›è¶…<strong>300 EFLOPS</strong>ï¼Œæ™ºèƒ½å æ¯”<strong>35%</strong>ã€‚å¼€æºç”Ÿæ€ç«çƒ­ï¼š<strong>Hugging Face</strong>ä¸‹è½½å‰50ï¼Œ<strong>BAAI</strong>ï¼ˆæ™ºæºï¼‰<strong>7.90äº¿æ¬¡</strong>ã€<strong>Alibaba</strong> <strong>7.49äº¿æ¬¡</strong>é¢†è·‘ã€‚<strong>DeepSeek</strong>è¶…<strong>1äº¿</strong>ç”¨æˆ·ï¼Œ<strong>Qwen</strong>æˆåŸºåº§æ¨¡å‹ã€‚å›½é™…åˆä½œä¸‹ï¼Œä¸­å›½å»º<strong>AI</strong>æ²»ç†æ¢çº½ã€‚</p>
<p>ä»£è¡¨æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798f0c054c3d4045a897944d0c75600a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=lhthtlvnet%2Bw2bnmajklQMT%2BCAg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">æœ€å</h2>
<p>å…³æ³¨å…¬ä¼—å·ã€AIä¿¡æ¯é£å‘ã€‘ï¼Œå›å¤ 666ï¼Œå³å¯è·å–æ›´å¤š AI è¡Œä¸šæŠ¥å‘Šã€‚</p>
<p>AI æŠ€æœ¯æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å‘å±•ï¼Œå®ƒå°†å¦‚ä½•å¡‘é€ æˆ‘ä»¬çš„æœªæ¥ï¼Ÿè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7582131164727689256</link>    <guid>https://juejin.cn/post/7582131164727689256</guid>    <pubDate>2025-12-11T01:22:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582131164727689256" data-draft-id="7582133314685861940" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-11T01:22:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ç å°å¼ "/> <meta itemprop="url" content="https://juejin.cn/user/976022052799405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022052799405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ç å°å¼ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:22:40.000Z" title="Thu Dec 11 2025 01:22:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b07d627b0b8471cacaa874c1d9f1179~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=hnkb9o2kp5J5AEDMHPNeQDiH59E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-0">ä¸€ å…ˆåˆ«æ€¥ç€é€ â€œè‡ªå·±çš„ Agent å¹³å°â€</h3>
<p>è¿™ä¸¤å¹´èº«è¾¹åšå¹³å°çš„æœ‹å‹ï¼ŒåŸºæœ¬éƒ½è¸©è¿‡åŒä¸€ä¸ªå‘ã€‚<br/>
ä¸Šæ¥å°±æƒ³åšä¸€æ•´å¥—â€œä¸‡èƒ½æ™ºèƒ½ä½“å¹³å°â€ï¼šæ²™ç®±ã€å·¥å…·ç®¡ç†ã€å·¥ä½œæµã€çŸ¥è¯†åº“ã€è§‚æµ‹ï¼Œä¸€å£æ°”å…¨åŒ…ã€‚</p>
<p>ç»“æœåŠå¹´è¿‡å»ï¼Œä¸šåŠ¡ä¸€ä¸ªæ²¡è½åœ°ï¼ŒåŸºç¡€è®¾æ–½å…ˆæŠŠè‡ªå·±å·è¶´ä¸‹ã€‚</p>
<p>å†·é™ä¸€ç‚¹çœ‹ï¼Œç°åœ¨è¡Œä¸šè¶‹åŠ¿å·²ç»å¾ˆæ¸…æ¥šäº†ï¼š</p>
<ul>
<li>å·¥å…·æ¥å…¥è¿™å—ï¼Œæœ‰äº† MCP åœ¨å¿«é€Ÿç»Ÿä¸€ï¼Œä¸»æµå‚å•†éƒ½åœ¨å¾€è¿™ä¸ªæ ‡å‡†é ã€‚</li>
<li>æ™ºèƒ½ä½“äº’è”è¿™å—ï¼Œå¤§å®¶åœ¨å›´ç»• A2A æŠŠå®ƒå½“â€œAgent ç‰ˆ HTTPâ€æ¥å»ºè®¾ã€‚</li>
<li>èƒ½åŠ›å»ºæ¨¡è¿™å—ï¼Œå¤§æ¨¡å‹å‚åœ¨æ¨è‡ªå·±çš„ Skills æ¨¡å‹ï¼ŒæŠŠâ€œæŠ€èƒ½â€åšæˆå¯é…ç½®ã€å¯ç»„åˆã€å¯ä¸‹å‘çš„èƒ½åŠ›åŒ…ï¼Œè€Œä¸æ˜¯æ•£ä¹±çš„æ’ä»¶ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ è¿˜åœ¨çº ç»“â€œè¦ä¸è¦è‡ªç ”ä¸ªå¤§è€Œå…¨çš„ Agent å¹³å°â€ï¼Œå¾ˆå¤§æ¦‚ç‡æ˜¯åœ¨å’Œäº§ä¸šæ–¹å‘ç¡¬åˆšã€‚<br/>
æ›´ç°å®çš„åšæ³•ï¼Œåè€Œæ˜¯ï¼šæ‰¿è®¤å¤–é¢å·²ç»æœ‰æ ‡å‡†ï¼ŒæŠŠè‡ªå·±æ”¶ç¼©æˆâ€”â€”<strong>æ¥ MCPã€æ¥ A2Aã€ç®¡ç† Skills çš„é‚£å±‚â€œé…ç½®å’Œåœºæ™¯ä¸­å°â€</strong>ã€‚</p>
<p>è¿™æ˜¯èƒŒæ™¯ã€‚ä¸‹é¢æ‹†å¼€è®²ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒ MCPï¼šåˆ«å†ä¸€å¥—å¥—å†™ SDK äº† ï¼Œè¿™ä¹ˆå¹²å¤ªç´¯</h3>
<p>å¦‚æœä½ è¿™ä¸¤å¹´å†™è¿‡â€œç»™å¤§æ¨¡å‹æ¥å·¥å…·â€çš„ä»£ç ï¼Œå¤§æ¦‚ç»å†è¿‡è¿™å‡ æ­¥ï¼š<br/>
HTTP API ä¸€å¥—ï¼›Shell å‘½ä»¤ä¸€å¥—ï¼›å…¬å¸å†…éƒ¨ RPC å†ä¸€å¥—ã€‚<br/>
æ¯æ¢ä¸€ä¸ªæ¨¡å‹å‚å•†ï¼Œå†é…ä¸€éâ€œå·¥å…·å®šä¹‰æ ¼å¼â€å’Œâ€œç»“æœè§£æé€»è¾‘â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aacbb12f36c44148d953824bf4d6051~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=7k9jSjvbv8njQ%2FpifRi3QLGrBxg%3D" alt="" loading="lazy"/></p>
<p>MCP å‡ºæ¥çš„ç›®çš„å°±å¾ˆç›´æ¥ï¼š</p>
<ul>
<li>æŠŠâ€œæ¨¡å‹ â†” å¤–éƒ¨ä¸–ç•Œâ€è¿™æ¡é“¾è·¯æŠ½è±¡æˆç»Ÿä¸€åè®®ï¼Œæ¨¡å‹å«çš„æ˜¯ MCP å®¢æˆ·ç«¯ï¼Œå¤–éƒ¨ç³»ç»Ÿæ˜¯ MCP æœåŠ¡å™¨ï¼Œä¸­é—´èµ°ä¸€å¥—æ ‡å‡†åŒ–æ¶ˆæ¯å’Œç”Ÿå‘½å‘¨æœŸã€‚</li>
<li>ä½ å†™ä¸€ä¸ª MCP serverï¼ŒæŠŠä½ å®¶çš„æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€ä¸šåŠ¡ API æš´éœ²æˆå·¥å…·ï¼›ä»»ä½•æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ï¼ˆæ¡Œé¢åŠ©æ‰‹ã€åœ¨çº¿ IDEã€å†…éƒ¨ Agent SDKï¼‰éƒ½èƒ½æ— æ„Ÿæ¥å…¥ã€‚</li>
</ul>
<p>è¿‘ä¸€å¹´çš„å‡ ä¸ªå˜åŒ–ï¼Œå…¶å®æŒºå…³é”®ï¼š</p>
<ul>
<li>è§„èŒƒæŠŠå®‰å…¨å½“æˆä¸€ç­‰å…¬æ°‘ï¼Œé»˜è®¤ MCP server æ˜¯æ•æ„Ÿèµ„æºï¼Œå¿…é¡»é…å¥½é‰´æƒã€ä½œç”¨åŸŸï¼Œé¿å…è¢«æ¶æ„ server è¶æœºæ‹¿èµ°æ›´å¤šæƒé™ã€‚</li>
<li>ä¸»æµå‚å•†é™†ç»­ç«™é˜Ÿï¼šå¤§æ¨¡å‹æœåŠ¡ã€æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨æ’ä»¶éƒ½åœ¨åŸç”Ÿæ”¯æŒ MCPï¼Œè®©â€œæ¥ä¸€æ¬¡ã€åˆ°å¤„ç”¨â€å˜å¾—ç°å®ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ<br/>
æ„å‘³ç€ä½ å®Œå…¨å¯ä»¥è¿™ä¹ˆå¹²ï¼š</p>
<ul>
<li>å…¬å¸å†…éƒ¨åªç»´æŠ¤ä¸€å°æ’® MCP Serverï¼šæ¯”å¦‚â€œæ–‡æ¡£ä¸­å¿ƒ serverâ€â€œç›‘æ§ serverâ€â€œå·¥å• serverâ€ã€‚</li>
<li>ä¸ç®¡ä½ ç”¨å“ªå®¶æ¨¡å‹ã€å“ªä¸ª Agent æ¡†æ¶ï¼Œåªè¦ä¼šè®² MCPï¼Œå°±éƒ½èƒ½å¤ç”¨è¿™å‡ ä¸ª serverï¼Œä¸ç”¨é‡å†™å·¥å…·å±‚ã€‚</li>
</ul>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼ŒMCP æŠŠä»¥å‰é›¶æ•£çš„ SDKï¼Œæ”¶æ•›æˆä¸€ä¸ª**â€œå·¥å…·æ€»çº¿â€**ã€‚<br/>
ä½ ä¸ç”¨ç»™æ¯ä¸ªæ¨¡å‹ã€æ¯ä¸ªäº§å“çº¿éƒ½é€ ä¸€å †é‡å¤å·¥å…·ï¼Œåªè¦æŠŠâ€œæ€»çº¿â€æ¥å¥½ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸‰ Skillsï¼šåˆ«å†æŠŠâ€œå·¥å…·â€å’Œâ€œèƒ½åŠ›â€æ··åœ¨ä¸€èµ·  ï¼Œè®²çœŸè¿™ä¹ˆåšå¤ªå¤æ‚äº†</h3>
<p>å¾ˆå¤šå›¢é˜Ÿç°åœ¨çš„ Agent è®¾è®¡ï¼Œæœ‰ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼š<br/>
æ‰€æœ‰èƒ½åŠ›éƒ½è¢«å¡æˆâ€œä¸€ä¸ªä¸ª toolâ€ã€‚</p>
<p>ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æ¨¡å‹ä¼šäº†ä¸€å †ä½å±‚ APIï¼Œå´æ²¡æœ‰â€œæ€ä¹ˆç”¨è¿™äº› API è§£ä¸€ä¸ªä¸šåŠ¡é—®é¢˜â€çš„å¥—è·¯ã€‚</li>
<li>æç¤ºè¯è¶Šå†™è¶Šé•¿ï¼Œç³»ç»Ÿ prompt å˜æˆåƒåœ¾åœºï¼Œæ—¢è®²â€œè§’è‰²â€ï¼Œåˆè®²â€œç­–ç•¥â€ï¼Œè¿˜é¡ºå¸¦è´´ä¸€å †æ¥å£æ–‡æ¡£ã€‚</li>
</ul>
<p>æœ€è¿‘ï¼Œå„å®¶åœ¨å¾€ä¸€ä¸ªæ–¹å‘æ”¶æ•›ï¼š<br/>
æŠŠâ€œå·¥å…·â€å’Œâ€œæŠ€èƒ½â€æ‹†å¼€ã€‚</p>
<ul>
<li>å·¥å…·æ›´åƒâ€œæ‰‹â€ï¼šèƒ½è¯»å†™æ•°æ®åº“ã€è°ƒ HTTPã€è·‘è„šæœ¬ï¼Œæ˜¯å…·ä½“åŠ¨ä½œã€‚</li>
<li>æŠ€èƒ½æ›´åƒâ€œè„‘å­é‡Œçš„ä¸€å¥—æ‰“æ³•â€ï¼šæ¯”å¦‚â€œå®¡é˜…åˆåŒâ€â€œæ’æŸ¥çº¿ä¸Šäº‹æ•…â€â€œåšä¸€ä¸ªå‘å¸ƒè®¡åˆ’â€ï¼Œå¼ºè°ƒçš„æ˜¯æµç¨‹ã€åˆ¤æ–­æ ‡å‡†ã€é£é™©è¾¹ç•Œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55b8af55758f48e98db6cfeff8e2189c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=nV%2Fy9IFFuu3naCA%2BzWnCQzFN0SM%3D" alt="å½“ç„¶ä¸ä»…ä»…æ˜¯ Claudeï¼Œå¾ˆå¤šå‚å•†ä¹Ÿé™†ç»­è·Ÿè¿›" loading="lazy"/></p>
<p>æœ‰çš„å‚å•†å·²ç»æŠŠè¿™ä¸€å¥—äº§å“åŒ–æˆ Agent Skillsï¼š</p>
<ul>
<li>æ¯ä¸ª Skill æ˜¯ä¸€ä¸ªå¯å¤ç”¨çš„èƒ½åŠ›åŒ…ï¼Œé‡Œé¢æœ‰ï¼šç»†ç²’åº¦æŒ‡ä»¤ã€å…ƒæ•°æ®ã€å¯é€‰çš„è„šæœ¬æˆ–èµ„æºã€èƒ½åŠ›è¾¹ç•Œè¯´æ˜ã€‚</li>
<li>ä¸€ä¸ª Agent å¯ä»¥ç»‘å®šå¤šç§ Skillï¼Œå†æŒ‰åœºæ™¯æ¿€æ´»ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»é›¶å¼€è„‘æ´ã€‚</li>
</ul>
<p>å¯¹è¦åšâ€œæ•°å­—åˆ†èº«â€æˆ–è€…å†…éƒ¨åŠ©æ‰‹çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™ä¸ªç†å¿µå¾ˆå…³é”®ï¼š<br/>
ä½ è¦ç®¡ç†çš„ï¼Œåº”è¯¥æ˜¯â€œæŸä¸ªåˆ†èº«æœ‰å“ªå‡ ç§æŠ€èƒ½â€ï¼Œè€Œä¸æ˜¯â€œæš´éœ²äº†å¤šå°‘ä¸ª toolâ€ã€‚</p>
<p>è½åˆ°å®ç°ä¸Šï¼Œå¯ä»¥è¿™ä¹ˆæ‹†ï¼š</p>
<ul>
<li>æŠŠâ€œæ’æŸ¥çº¿ä¸Šå‘Šè­¦â€å†™æˆä¸€ä¸ª Skillï¼š
<ul>
<li>è¾“å…¥æ˜¯ä»€ä¹ˆï¼ˆå‘Šè­¦ IDã€æ—¶é—´èŒƒå›´ï¼‰ã€‚</li>
<li>Agent åº”è¯¥èµ°å“ªå‡ æ­¥ï¼ˆæŸ¥ç›‘æ§ã€æŸ¥æœ€è¿‘å˜æ›´ã€æŸ¥å·¥å•ã€è¾“å‡ºæ¨ç†é“¾ï¼‰ã€‚</li>
<li>å“ªäº›å·¥å…·å¯ç”¨ï¼Œå“ªäº›åŠ¨ä½œå¿…é¡»äºŒæ¬¡ç¡®è®¤ã€‚</li>
</ul>
</li>
<li>æŠŠâ€œå†™å‘¨æŠ¥â€å†™æˆå¦ä¸€ä¸ª Skillï¼š
<ul>
<li>å…è®¸è®¿é—®å“ªäº›æ—¥å¿—ã€å“ªäº›é¡¹ç›®æ•°æ®ã€‚</li>
<li>è¾“å‡ºç»“æ„ã€è¯­æ°”æœ‰ä»€ä¹ˆçº¦æŸã€‚</li>
</ul>
</li>
</ul>
<p>å½“ä½ æœ‰äº†å‡ åä¸ª Skillï¼Œå†å¾€ä¸Šåšâ€œæ•°å­—åˆ†èº«é…ç½®ä¸­å¿ƒâ€ï¼š<br/>
å‹¾é€‰ä¸€ä¸‹â€œè¿™ä¸ªåˆ†èº«å…·å¤‡ Aã€Bã€C ä¸‰ç§æŠ€èƒ½â€ï¼Œå°±è¿œæ¯”è£¸é…ä¸€å † tool æ¥å¾—ç¨³ã€‚</p>
<hr/>
<h3 data-id="heading-3">å›› A2Aï¼šå½“ Agent ä¸å†å­¤ç«‹</h3>
<p>å¦‚æœè¯´ MCP ç®¡çš„æ˜¯â€œAgent æ€ä¹ˆä¼¸æ‰‹ç¢°ä¸–ç•Œâ€ï¼Œé‚£ A2A ç®¡çš„å°±æ˜¯â€œAgent æ€ä¹ˆäº’ç›¸è¯´è¯â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05657679cd424cad9db7f2f9b08b63b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=Nxg0WM%2BB4Oma97cKjgKWTuADSOA%3D" alt="" loading="lazy"/></p>
<p>ä»¥å‰åšå¤šæ™ºèƒ½ä½“ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯åœ¨è‡ªå·±ç³»ç»Ÿé‡Œç¡¬å†™ï¼š</p>
<ul>
<li>ä¸€ä¸ªå¤§ orchestratorï¼Œé‡Œé¢ if-else åˆ‡æ¢ä¸åŒå­ Agentã€‚</li>
<li>è¿›åº¦ã€çŠ¶æ€ã€ä¸Šä¸‹æ–‡é è‡ªå®šä¹‰ç»“æ„ä½“åœ¨å†…éƒ¨ä¼ ã€‚</li>
</ul>
<p>è¿™ç§å†™æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä½ çš„ Agent åªèƒ½æ´»åœ¨è‡ªå·±ç³»ç»Ÿé‡Œï¼Œæ²¡æ³•å’Œåˆ«äººçš„ Agent åä½œã€‚</li>
<li>åŒä¸€å®¶å…¬å¸ä¸åŒå›¢é˜Ÿå†™çš„ Agentï¼Œæ ¹æœ¬äº’ä¸è®¤è¯†ï¼Œå„ç©å„çš„ã€‚</li>
</ul>
<p>A2A çš„ç›®æ ‡å°±ä¸€å¥è¯ï¼š<br/>
<strong>ç»™ Agent ä¹‹é—´çš„é€šä¿¡ï¼Œè¡¥ä¸€ä¸ªâ€œHTTP çº§åˆ«â€çš„é€šç”¨åè®®ã€‚</strong></p>
<p>å¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<ul>
<li>ä¼ è¾“å±‚èµ°æ ‡å‡†çš„ JSON-RPC over HTTPï¼Œæ¶ˆæ¯æ ¼å¼ã€é”™è¯¯å¤„ç†éƒ½è¢«å†™æ­»ï¼Œå‡å°‘å„å®¶è‡ªåˆ›æ–¹è¨€ã€‚</li>
<li>æ¯ä¸ª Agent ç”¨ä¸€å¼ â€œAgent Cardâ€æè¿°è‡ªå·±ï¼šèƒ½åšä»€ä¹ˆã€æä¾›å“ªäº›æ–¹æ³•ã€éœ€è¦ä»€ä¹ˆé‰´æƒï¼Œç”±æ­¤å®ç°è‡ªåŠ¨å‘ç°å’Œèƒ½åŠ›å®£å‘Šã€‚</li>
<li>æ”¯æŒåŒæ­¥ã€æµå¼ã€å¼‚æ­¥æ¨é€ï¼Œé€‚åˆé•¿ä»»åŠ¡ã€ååŒä»»åŠ¡ï¼Œäººå¯ä»¥éšæ—¶æ’è¿›æ¥å½“â€œç¯èŠ‚é‡Œçš„ä¸€ä¸ªå‚ä¸è€…â€ã€‚</li>
<li>å®‰å…¨ä¸Šï¼Œæ²¿ç”¨æˆç†Ÿçš„ OAuth2ã€Tokenã€ç½‘å…³ä½“ç³»ï¼Œä¼ä¸šä¾§æ›´å¥½æ¥è¿›ç°æœ‰å®¡è®¡å’Œé£æ§ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/706c86370af34ba9a71961e223db94ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=XOGizAD1JCnjUIl3gp4mpvqNlWE%3D" alt="A2A å’Œ MCP æ˜¯äº’è¡¥ï¼Œä¸æ˜¯æ›¿ä»£" loading="lazy"/></p>
<p>ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹å…¬å¸çš„æœªæ¥å½¢æ€ï¼š</p>
<ul>
<li>è´¢åŠ¡æœ‰ä¸€å¥—æŠ¥é”€ Agentï¼Œè¿ç»´æœ‰ä¸€å¥—æ’éšœ Agentï¼ŒHR æœ‰ä¸€å¥—æ‹›è˜ Agentã€‚</li>
<li>æŸä¸ªâ€œæ•°å­—åˆ†èº«â€æ¥åˆ°ä»»åŠ¡æ—¶ï¼Œå¹¶ä¸éœ€è¦è‡ªå·±ä»€ä¹ˆéƒ½æ‡‚ï¼Œè€Œæ˜¯é€šè¿‡ A2A å»é—®åˆ«çš„ Agentï¼šæ¯”å¦‚è®©â€œæŠ¥é”€ Agentâ€å»ç®—é¢„ç®—ï¼Œè®©â€œæ’éšœ Agentâ€å»æŸ¥æœåŠ¡ã€‚</li>
</ul>
<p>ä»æ­¤ï¼Œæ™ºèƒ½ä½“ä¸å†æ˜¯ä¸€ä¸ªä¸ªå­¤å²›ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>æ¾è€¦åˆçš„æœåŠ¡ç½‘</strong>ã€‚<br/>
è€Œ A2A å°±æ˜¯è¿™ä¸ªç½‘çš„â€œé€šç”¨è¯­â€ã€‚</p>
<hr/>
<h3 data-id="heading-4">äº” çœŸæ­£è½åœ°æ—¶ï¼Œå¯ä»¥æ€ä¹ˆé€‰å‹</h3>
<p>è¯´è¿™ä¹ˆå¤šï¼Œè½æˆä»£ç å…¶å®å¯ä»¥å¾ˆå…‹åˆ¶ã€‚<br/>
ç»™ä½ ä¸€ä¸ªæ¯”è¾ƒç°å®ã€é€‚åˆä¸­å‹å›¢é˜Ÿçš„è·¯çº¿ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæŠŠâ€œå·¥å…·æ€»çº¿â€ç«™èµ·æ¥ï¼šé€‰ MCPï¼Œä¸è¦è‡ªé€ åè®®ã€‚</strong></p>
<ul>
<li>æŠŠæœ€å¸¸ç”¨çš„ä¸‰ä¸ªç³»ç»Ÿæ¥æˆ MCP Serverï¼šçŸ¥è¯†åº“ã€ç›‘æ§ã€å·¥å•ã€‚</li>
<li>å†…éƒ¨ä»»ä½• Agentã€åŠ©æ‰‹ã€æ’ä»¶ï¼Œä¸ç®¡å“ªä¸ªæ¨¡å‹ï¼Œéƒ½ç»Ÿä¸€èµ° MCP è®¿é—®è¿™äº›èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨ä½ ä»¬ç°æœ‰çš„ Agent / æ•°å­—åˆ†èº«å¹³å°é‡Œï¼Œå¼•å…¥ Skills æ¦‚å¿µã€‚</strong></p>
<ul>
<li>æŠŠç°åœ¨å†™åœ¨ prompt é‡Œçš„â€œå¥—è·¯â€æŠ½å‡ºæ¥ï¼Œåšæˆå¯é…ç½®çš„æŠ€èƒ½ï¼šæœ‰åå­—ã€æœ‰ç”¨é€”ã€æœ‰è¾“å…¥è¾“å‡ºçº¦æŸã€‚</li>
<li>ç»™æ¯ä¸ªä¸šåŠ¡åœºæ™¯å®šä¹‰ä¸€ä¸ªâ€œåˆ†èº«é…ç½®â€ï¼šç»‘å®šæ¨¡å‹ã€ç»‘å®šæŠ€èƒ½ã€ç»‘å®šå¯ç”¨å·¥å…·ï¼ˆé€šè¿‡ MCPï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç­‰åˆ°ä¸šåŠ¡çº¿é‡ŒçœŸçš„å‡ºç°â€œå¤šæ™ºèƒ½ä½“åä½œâ€éœ€æ±‚ï¼Œå†ä¸Š A2Aã€‚</strong></p>
<ul>
<li>å…ˆæŒ‘ä¸€ä»¶äº‹ï¼Œæ¯”å¦‚â€œä»ç›‘æ§åˆ°å·¥å•å†åˆ°é€šçŸ¥â€ï¼Œæ‹†æˆä¸‰ä¸ª Agentï¼Œç”¨ A2A æ¥èµ·æ¥ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæœåŠ¡é‡Œå†™æ­»æ•´ä¸ªæµç¨‹ã€‚</li>
<li>æŠŠæ¯ä¸ª Agent çš„èƒ½åŠ›å†™æ¸…æ¥šï¼Œç”¨ Agent Card å¯¹å¤–æš´éœ²ï¼Œè¿™ä¸€æ­¥åšå¾—å¥½ï¼Œå°†æ¥ä¸åŒå›¢é˜Ÿã€ä¸åŒè¯­è¨€å†™çš„ Agent ä¹Ÿèƒ½äº’é€šã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå…‹åˆ¶ä½â€œåšå¹³å°â€çš„å†²åŠ¨ã€‚</strong></p>
<ul>
<li>ä½ æ›´åƒæ˜¯åœ¨æ­ä¸€ä¸ªâ€œAgent é…ç½®ä¸æ²»ç†å±‚â€ï¼š
<ul>
<li>ç®¡ MCP server çš„æ¥å…¥å’Œæƒé™ã€‚</li>
<li>ç®¡ Skills çš„ç‰ˆæœ¬ã€ç°åº¦å’Œç»„åˆã€‚</li>
<li>ç®¡å“ªäº› Agent å¯¹å¤–æš´éœ² A2A èƒ½åŠ›ã€‚</li>
</ul>
</li>
<li>è¿è¡Œæ—¶ã€æ²™ç®±ã€å¤šæ¨¡å‹è·¯ç”±è¿™äº›ï¼Œèƒ½ç”¨äº‘å‚å•†æˆ–ç°æˆæ¡†æ¶å°±ç”¨ï¼Œä¸è¦è½»æ˜“ All in è‡ªç ”ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-5">å…­ å†™åœ¨æœ€å</h3>
<p>MCPã€Skillsã€A2A å¬èµ·æ¥éƒ½æŒºå”¬äººçš„ï¼Œå®é™…ä¸Šåšçš„äº‹å¾ˆæœ´ç´ ï¼š</p>
<ul>
<li>MCP è®©ä½ å°‘å†™å‡ å¥—â€œæ¥å·¥å…·çš„èƒ¶æ°´ä»£ç â€ã€‚</li>
<li>Skills è®©ä½ æŠŠâ€œä¼šåšäº‹â€è¿™ä»¶äº‹æ¨¡å—åŒ–ï¼Œåˆ«æŠŠå…¨éƒ¨ä¸šåŠ¡é€»è¾‘å¡è¿›ä¸€æ¡ promptã€‚</li>
<li>A2A è®©ä¸åŒ Agent ä¹‹é—´æœ‰è¯å¯èŠï¼Œä¸è‡³äºæ¯ä¸ªå›¢é˜Ÿéƒ½é‡æ–°å‘æ˜ä¸€éâ€œå†…éƒ¨è°ƒç”¨åè®®â€ã€‚</li>
</ul>
<p>ä½ çœŸæ­£åœ¨é¡¹ç›®é‡Œè¦åšçš„ï¼Œæ˜¯ç”¨è¿™ä¸‰ä¸ªæ–¹å‘ï¼Œå¸®è‡ªå·±æŠŠè¾¹ç•Œåˆ’æ¸…æ¥šï¼š<br/>
å“ªäº›æ˜¯è¦äº¤ç»™è¡Œä¸šæ ‡å‡†å’Œå‚å•†ç”Ÿæ€å»æ‰›çš„ï¼Œ<br/>
å“ªäº›æ˜¯ä½ ä»¬å›¢é˜Ÿå¿…é¡»åƒé€ã€æ²‰æ·€æˆè‡ªå·±çš„â€œèƒ½åŠ›èµ„äº§â€çš„ã€‚</p>
<p>ææ¸…æ¥šè¿™ä¸€ç‚¹ä¹‹åï¼Œå†å›å¤´çœ‹å¸‚é¢ä¸Šä¸€å †â€œæŸæŸ Agent å¹³å°â€â€œæŸæŸæ™ºèƒ½ä½“æ¡†æ¶â€ï¼Œå¿ƒæ€ä¼šå¹³ç¨³å¾ˆå¤šã€‚<br/>
ä½ ä¼šå‘ç°ï¼Œèƒ½å†³å®šä½ èµ°å¤šè¿œçš„ï¼Œä»æ¥ä¸æ˜¯ä½ é€‰äº†å“ªä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯ä½ æœ‰æ²¡æœ‰è®¤çœŸå›ç­”ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>â€”â€”åœ¨è¿™ä¸ªæ–°ä¸€è½®åŸºç¡€è®¾æ–½æ´—ç‰Œé‡Œï¼Œä½ æ˜¯è¦å½“â€œé€ è½®å­çš„äººâ€ï¼Œè¿˜æ˜¯é‚£ä¸ªçœŸæ­£æŠŠè½®å­è£…åˆ°è½¦ä¸Šçš„äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥]]></title>    <link>https://juejin.cn/post/7582096212662730752</link>    <guid>https://juejin.cn/post/7582096212662730752</guid>    <pubDate>2025-12-11T01:37:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582096212662730752" data-draft-id="7582114266075070479" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-11T01:37:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:37:27.000Z" title="Thu Dec 11 2025 01:37:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘å¹´æ¥ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨æ¨ç†èƒ½åŠ›ä¸Šçªé£çŒ›è¿›ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰æ¿€å‘çš„â€œæ€ç»´é“¾â€ï¼ˆChain of Thoughtï¼‰æŠ€æœ¯ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œå¤šæ­¥æ¨ç†ä»¥è§£å†³å¤æ‚é—®é¢˜ã€‚å—æ­¤å¯å‘ï¼Œç ”ç©¶äººå‘˜å°è¯•å°†è¿™ç§è¯­è¨€æ¨ç†èŒƒå¼å¼•å…¥å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆMLLMï¼‰çš„è§†è§‰æ„ŸçŸ¥ä»»åŠ¡ä¸­ã€‚ç„¶è€Œï¼Œå®è¯ç ”ç©¶è¡¨æ˜ï¼Œç®€å•çš„è¯­è¨€ä¸­é—´æ¨ç†å¾€å¾€ä¼šå¯¼è‡´æ„ŸçŸ¥æ€§èƒ½ä¸‹é™ï¼Œç”šè‡³äº§ç”Ÿä¸å›¾åƒå†…å®¹æ— å…³çš„â€œå¹»è§‰â€ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§ç°è±¡ï¼Ÿæ¥è‡ªå—äº¬ç†å·¥å¤§å­¦ã€æ–°åŠ å¡ç§‘æŠ€è®¾è®¡å¤§å­¦ã€é˜¿å¾·è±å¾·å¤§å­¦ã€ç™¾åº¦ã€Data61-CSIROä»¥åŠå•†æ±¤ç§‘æŠ€çš„ç ”ç©¶å›¢é˜Ÿåœ¨æœ€æ–°è®ºæ–‡ã€ŠArtemis: Structured Visual Reasoning for Perception Policy Learningã€‹ä¸­ç»™å‡ºäº†æ·±åˆ»çš„è§è§£ã€‚<strong>æ ¸å¿ƒé—®é¢˜ä¸åœ¨äºâ€œæ¨ç†â€æœ¬èº«ï¼Œè€Œåœ¨äºâ€œæ¨ç†çš„å½¢å¼â€ã€‚è§†è§‰æ„ŸçŸ¥çš„æœ¬è´¨è¦æ±‚åœ¨ç©ºé—´å’Œä»¥å¯¹è±¡ä¸ºä¸­å¿ƒï¼ˆObject-Centricï¼‰çš„ç»“æ„åŒ–ç¯å¢ƒä¸­è¿›è¡Œæ¨ç†ï¼Œè€Œä¸åœ¨éç»“æ„åŒ–çš„è¯­è¨€ç©ºé—´ä¸­è¿›è¡Œâ€œç©ºè°ˆâ€ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93b3b9cf9ffb4e9aa872f0e897ad317c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=9yJGaHgS3hgWH0Cj0fnsWMennAw%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<blockquote>
<p><strong>è®ºæ–‡æ ‡é¢˜ï¼šArtemis: Structured Visual Reasoning for Perception Policy Learning</strong></p>
<p><strong>è®ºæ–‡é“¾æ¥ï¼š</strong></p>
<p><strong>ä»£ç ä»“åº“ï¼š</strong> ****</p>
</blockquote>
<h2 data-id="heading-0"><strong>é—®é¢˜æ´å¯Ÿï¼šè¯­è¨€æ¨ç†çš„å±€é™ä¸ç»“æ„åŒ–è§†è§‰æ¨ç†çš„å¿…ç„¶</strong></h2>
<p>å½“ç°æœ‰MLLMé¢å¯¹å¦‚â€œæ‰¾å‡ºæœ€çŸ®çš„è¿åŠ¨å‘˜â€è¿™ç±»æŒ‡ä»¤æ—¶ï¼Œå®ƒä»¬å¾€å¾€ä¾èµ–ç±»ä¼¼è¯­è¨€æ¨¡å‹çš„â€œå†…éƒ¨ç‹¬ç™½â€è¿›è¡Œæ¨ç†ã€‚è¿™ç§çº¯è¯­ä¹‰çš„æ¨ç†è¿‡ç¨‹ç¼ºä¹è§†è§‰åŸºç¡€ï¼Œå®¹æ˜“äº§ç”Ÿæ— å…³æˆ–é”™è¯¯çš„ä¸­é—´æè¿°ï¼Œæœ€ç»ˆå¯¼è‡´å®šä½å¤±è´¥ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œäººç±»çš„æ„ŸçŸ¥è¿‡ç¨‹æ˜¯å…¸å‹çš„ç»“æ„åŒ–è§†è§‰æ¨ç†ï¼šæˆ‘ä»¬é¦–å…ˆå¿«é€Ÿæ‰«ææ•´ä¸ªåœºæ™¯ï¼Œå®šä½å¯èƒ½ç›¸å…³çš„åŒºåŸŸï¼Œç„¶åé€æ­¥èšç„¦ã€æ¯”è¾ƒï¼Œæœ€ç»ˆé”å®šç›®æ ‡å¯¹è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5df74feddb71416fa3190de4ddafd292~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=J0d%2F8gDmzEgM6xqe%2BECl%2F1LwaqY%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>Artemisçš„è¯ç”Ÿï¼šè®©MLLMå­¦ä¼šâ€œå…ˆçœ‹åæƒ³ï¼Œè¾¹çœ‹è¾¹æ¨â€</strong></h2>
<p>ä¸ºäº†å…‹æœä¸Šè¿°å±€é™ï¼Œç ”ç©¶å›¢é˜Ÿæå‡ºäº† Artemis â€”â€” ä¸€ä¸ªåŸºäºå¼ºåŒ–å­¦ä¹ çš„æ„ŸçŸ¥ç­–ç•¥å­¦ä¹ æ¡†æ¶ã€‚è¯¥æ¡†æ¶çš„å‘½åçµæ„Ÿæ¥æºäºå¤å¸Œè…Šç¥è¯ä¸­çš„ç‹©çŒå¥³ç¥é˜¿å°”å¿’å¼¥æ–¯ï¼Œä»¥å…¶æ•é”çš„è§†è§‰å’Œç™¾å‘ç™¾ä¸­çš„ç²¾å‡†åº¦è‘—ç§°ï¼Œå¯“æ„ç€æ¨¡å‹æ‰€è¿½æ±‚çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145d09b8412547d68721da533b1afb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=4YEnQe4rGNXGQu6Zb3%2FcsiH7B%2BY%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<p>Artemisçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºè¦æ±‚æ¨¡å‹æä¾›ç»“æ„åŒ–çš„è§†è§‰æ¨ç†è¯æ®ã€‚åœ¨ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆå‰ï¼Œæ¨¡å‹å¿…é¡»åœ¨ç‰¹å®šçš„æ€è€ƒé˜¶æ®µè¾“å‡ºä¸€ç³»åˆ— (æ ‡ç­¾ï¼Œè¾¹ç•Œæ¡†) å¯¹ã€‚è¿™äº›å¯¹ç›´æ¥ä»£è¡¨äº†æ¨¡å‹åœ¨å›¾åƒä¸­å®šä½åˆ°çš„è§†è§‰å®ä½“ï¼Œæ„æˆäº†å¯éªŒè¯ã€å¯è¿½è¸ªçš„ä¸­é—´è§†è§‰çŠ¶æ€ã€‚</p>
<ul>
<li><strong>ç»“æ„åŒ–è§†è§‰æ¨ç†å¥–åŠ±ï¼š</strong> è¿™æ˜¯Artemisçš„çµé­‚ã€‚å®ƒè®¾è®¡äº†ä¸€å¥—ç²¾ç»†çš„å¥–åŠ±æœºåˆ¶ï¼Œä¸ä»…é¼“åŠ±æ¨¡å‹æ‰¾å‡ºæœ€ç»ˆç­”æ¡ˆçš„å…³é”®å¯¹è±¡ï¼Œä¹Ÿå¥–åŠ±å…¶è¯†åˆ«å‡ºç›¸å…³çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚è¿™å°±åƒè§£é¢˜æ—¶ï¼Œä¸ä»…è¦æ±‚ç­”æ¡ˆæ­£ç¡®ï¼Œè¿˜è¦æ±‚åˆ—å‡ºå…³é”®çš„å·²çŸ¥æ¡ä»¶å’Œæ¨å¯¼æ­¥éª¤ã€‚</li>
<li><strong>ç»Ÿä¸€çš„ç»“æœå¥–åŠ±ï¼š</strong> åŒ…æ‹¬æ ¼å¼å¥–åŠ±ï¼ˆç¡®ä¿è¾“å‡ºç»“æ„è§„èŒƒï¼‰å’Œç­”æ¡ˆå¥–åŠ±ï¼ˆåŸºäºé¢„æµ‹æ¡†ä¸çœŸå€¼æ¡†çš„é‡å åº¦åŠæ ‡ç­¾ä¸€è‡´æ€§ï¼‰ã€‚</li>
<li><strong>é«˜æ•ˆçš„è®­ç»ƒç®—æ³•ï¼š</strong> é‡‡ç”¨ç¾¤ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼ˆGroup Relative Policy Optimization, GRPOï¼‰Â ç®—æ³•ï¼Œé«˜æ•ˆåœ°ä¼˜åŒ–æ•´ä¸ªæ„ŸçŸ¥ç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>å¼ºå¤§çš„è®­ç»ƒåŸºç¡€ï¼šArtemis-RFTæ•°æ®é›†</strong></h2>
<p>ä¸ºäº†è®­ç»ƒArtemisï¼Œå›¢é˜Ÿæ„å»ºäº†Artemis-RFTæ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŸºäºMS-COCOæ„å»ºï¼ŒåŒ…å«çº¦7.7ä¸‡ä¸ªå®ä¾‹ï¼Œç»Ÿä¸€äº†è§†è§‰å®šä½ï¼ˆVisual Groundingï¼‰å’Œç›®æ ‡æ£€æµ‹ï¼ˆObject Detectionï¼‰ ä¸¤ç§ä»»åŠ¡æ ¼å¼ã€‚æ¨¡å‹è¢«è®­ç»ƒåœ¨ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼ˆç»¿è‰²æ¡†ï¼‰ä¹‹å‰ï¼Œå…ˆè¾“å‡ºä¸­é—´æ¨ç†æ­¥éª¤ï¼ˆç´«è‰²æ¡†ï¼‰æ¥æ ‡è¯†ç›¸å…³å¯¹è±¡ï¼Œä»è€Œå­¦ä¼šç»“æ„åŒ–çš„è§†è§‰æ¨ç†æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031ded4ea1ae4d4ca91332be208ace9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=Iv3GpPD9ZqRHcg3YkoBAR2SKHwc%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p>Artemis-RFTæ•°æ®ç¤ºä¾‹ã€‚è¯¥æ•°æ®é›†åŒ…å«ä¸¤ç§ä»»åŠ¡ç±»å‹ï¼šè§†è§‰å®šä½å’Œå¯¹è±¡æ£€æµ‹ï¼Œç»Ÿä¸€çš„Artemisæ„ŸçŸ¥ç­–ç•¥å­¦ä¹ æ¡†æ¶åœ¨ä¸¤è€…ä¸Šè”åˆè®­ç»ƒã€‚ç´«è‰²æ¡†è¡¨ç¤ºæ¨ç†å¯¹è±¡ï¼Œç»¿è‰²æ¡†è¡¨ç¤ºç­”æ¡ˆã€‚</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒArtemis è¦æ±‚æ¨¡å‹åœ¨ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼ˆç»¿è‰²æ¡†ï¼‰ä¹‹å‰ï¼Œå…ˆé€šè¿‡æ¨ç†ï¼ˆç´«è‰²æ¡†ï¼‰è¯†åˆ«å‡ºåœºæ™¯ä¸­çš„ç›¸å…³å¯¹è±¡ã€‚è¿™ç§è®­ç»ƒæ–¹å¼è®©æ¨¡å‹å­¦ä¼šäº†â€œå…ˆçœ‹åç­”â€ã€‚</p>
<h2 data-id="heading-3"><strong>å“è¶Šçš„æ€§èƒ½è¡¨ç°ï¼šå…¨é¢é¢†å…ˆï¼Œæ³›åŒ–æƒŠäºº</strong></h2>
<p>ArtemisåŸºäºQwen2.5-VL-3Bæ¨¡å‹æ„å»ºï¼Œåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†çªç ´æ€§æˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1160b1e6848341a6b0ffb2bf1e44c57c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=UriI%2B9SLNtRKTxWbHpIUqxWKG2I%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<ul>
<li><strong>è§†è§‰å®šä½ä¸æ£€æµ‹ä»»åŠ¡</strong></li>
</ul>
<p>åœ¨RefCOCO/+/gç³»åˆ—åŸºå‡†æµ‹è¯•ä¸­ï¼ŒArtemisåœ¨æ‰€æœ‰æŒ‡æ ‡ä¸Šå‡è¾¾åˆ°é¢†å…ˆæ°´å¹³ï¼Œå°¤å…¶åœ¨è¦æ±‚æé«˜çš„IoU@0.95æŒ‡æ ‡ä¸Šä¼˜åŠ¿æ˜¾è‘—ï¼Œè¯æ˜äº†å…¶è¾¹ç•Œæ¡†é¢„æµ‹çš„ç²¾å‡†åº¦ã€‚åœ¨COCOç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸Šï¼Œå…¶mAPè¾¾åˆ°31.0ï¼Œè¿œè¶…åŸºåº§æ¨¡å‹çš„15.4ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f952561f0354b7dbf28711fc19e0df1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=nGsO%2Fm%2F79UoiL5KoGPEvOtpD3TI%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æƒŠè‰³çš„é›¶æ ·æœ¬æ³›åŒ–èƒ½åŠ›</strong></p>
</li>
<li>
<p><strong>è§†è§‰è®¡æ•°ï¼š</strong> åœ¨ä»æœªæ¥å—è¿‡è®¡æ•°ä»»åŠ¡è®­ç»ƒçš„æƒ…å†µä¸‹ï¼ŒArtemisåœ¨Pixmo-Countæ•°æ®é›†ä¸Šçš„é›¶æ ·æœ¬å‡†ç¡®ç‡é«˜è¾¾81.4ï¼Œç”šè‡³è¶…è¿‡äº†ä¸“é—¨ä¸ºè®¡æ•°è®¾è®¡çš„æ¨¡å‹ã€‚å®ƒé€šè¿‡ç»“æ„åŒ–åœ°â€œåˆ—ä¸¾â€å‡ºå›¾åƒä¸­çš„ç›®æ ‡å¯¹è±¡æ¥å®Œæˆè®¡æ•°ï¼Œæ¨¡ä»¿äº†äººç±»çš„ç‚¹æ•°è¡Œä¸ºã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/877f4659b8c240d68e8508f776b5ab5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=aYqiSPo90CbGBFtWOQSRqbUg3Zo%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<ul>
<li><strong>å‡ ä½•å›¾å½¢æ„ŸçŸ¥ï¼š</strong> Artemisèƒ½å¤Ÿå°†å…¶åœ¨è‡ªç„¶å›¾åƒä¸­å­¦åˆ°çš„ç»“æ„åŒ–æ„ŸçŸ¥èƒ½åŠ›ï¼Œç¨³å¥åœ°è¿ç§»åˆ°æ•°å­¦å‡ ä½•å›¾å½¢é¢†åŸŸã€‚åœ¨MATHGLANCEåŸºå‡†æµ‹è¯•ï¼ˆæ¶µç›–å¹³é¢å‡ ä½•ã€ç«‹ä½“å‡ ä½•ã€å›¾è¡¨é¢˜ï¼‰ä¸­ï¼Œå®ƒåŒæ ·è¡¨ç°å‡ºè‰²ï¼Œå®ç°äº†ä»çœŸå®åœºæ™¯åˆ°æŠ½è±¡å›¾ç¤ºçš„è·¨åŸŸæ³›åŒ–ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9005edef3cdc47aeb6628be960823ec1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=84dlhLwr7AEPNUUJn3lJ0dL0bxI%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<ul>
<li><strong>ç»¼åˆå¤šæ¨¡æ€èƒ½åŠ›</strong></li>
</ul>
<p>åœ¨MMBenchã€MMVetç­‰ä¸»æµå¤šæ¨¡æ€ç†è§£åŸºå‡†æµ‹è¯•ä¸­ï¼ŒArtemisä¿æŒäº†ç«äº‰ä¼˜åŠ¿ï¼Œè¡¨æ˜å…¶å¢å¼ºçš„æ„ŸçŸ¥èƒ½åŠ›æœ‰ç›Šäºæ•´ä½“çš„å¤šæ¨¡æ€æ¨ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7759ecd7f7847f6afd720be2aaf4169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=YV0RDIfqecvKI6vzF1gP%2BaqBh7o%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>æ¶ˆèåˆ†æï¼šéªŒè¯ç»“æ„åŒ–æ¨ç†çš„æ ¸å¿ƒä»·å€¼</strong></h2>
<p>ç ”ç©¶å›¢é˜Ÿé€šè¿‡ç³»ç»Ÿçš„æ¶ˆèå®éªŒè¯å®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99f867095fe34738a5e4339ad5c838e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=bTTh7Q1bnej9YkehtmRLpdqyY1Y%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<ul>
<li><strong>æ— æ¨ç†ï¼š</strong> åŸŸå†…ä»»åŠ¡å°šå¯ï¼Œä½†åŸŸå¤–æ³›åŒ–èƒ½åŠ›æå·®ã€‚</li>
<li><strong>çº¯è¯­è¨€æ¨ç†ï¼š</strong> ä¼šå¹²æ‰°æ„ŸçŸ¥è¿‡ç¨‹ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶åœ¨è®¡æ•°ç­‰ä»»åŠ¡ä¸Šã€‚</li>
<li><strong>ç»“æ„åŒ–è§†è§‰æ¨ç†ï¼š</strong> æ˜¯æ€§èƒ½å…¨é¢æå‡å’Œè·å¾—å¼ºå¤§é›¶æ ·æœ¬æ³›åŒ–èƒ½åŠ›çš„å…³é”®ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f87b505cafc450ca13449ee99f90bd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=55nShGcesisQp902JgDBrpIwen4%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<ul>
<li><strong>å¯è§†åŒ–å±•ç¤º</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c2a472799f64d339c53a4c92b317674~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=vQ9joG8taCYK1I4XWnXQQuo6j6w%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<p>Artemis é€šè¿‡ç´«è‰²çš„æ¨ç†æ¡†ç²¾å‡†åœ°å®šä½äº†åœºæ™¯ä¸­çš„å…³é”®è¦ç´ ï¼Œä»è€Œç»™å‡ºäº†æ­£ç¡®çš„çº¢è‰²ç­”æ¡ˆæ¡†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå…¶ä»–æ¨¡å‹è¦ä¹ˆå®šä½é”™è¯¯ï¼Œè¦ä¹ˆå®Œå…¨åç¦»ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/974510d7241445049116a55afd435aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=oRM0ylcMkcDuhn%2BCKDu9lD9%2BREw%3D" alt="å›¾ç‰‡13.png" loading="lazy"/></p>
<p>åœ¨è®¡æ•°ä»»åŠ¡ä¸­ï¼ŒArtemis å±•ç°äº†ç±»ä¼¼äººç±»çš„â€œç‚¹æ•°â€è¡Œä¸ºï¼Œé€šè¿‡é€ä¸ªæ ‡è®°ç›®æ ‡ï¼ˆç´«è‰²æ¡†ï¼‰æ¥å¾—å‡ºæ­£ç¡®çš„æ€»æ•°ï¼Œè€ŒåŸºåº§æ¨¡å‹ Qwen2.5-VL åˆ™å‡ºç°äº†ä¸¥é‡çš„å¹»è§‰ï¼Œæ ‡è®°äº†å¤§é‡é‡å¤æˆ–é”™è¯¯çš„æ¡†ã€‚</p>
<h2 data-id="heading-5"><strong>æŠ€æœ¯è´¡çŒ®ä¸äº§ä¸šå½±å“</strong></h2>
<p>Artemisçš„å·¥ä½œé¦–æ¬¡ç³»ç»Ÿæ€§åœ°è¯æ˜ï¼šé€šè¿‡å•ä¸€ã€ç»Ÿä¸€çš„ç»“æ„åŒ–è§†è§‰æ¨ç†è®­ç»ƒï¼Œå¯ä»¥ä½¿MLLMè·å¾—è·¨ä»»åŠ¡ã€è·¨é¢†åŸŸçš„å¼ºå¤§æ„ŸçŸ¥æ³›åŒ–èƒ½åŠ›ã€‚è¿™é¡¹ç ”ç©¶ä¸ºMLLMçš„æ„ŸçŸ¥èƒ½åŠ›ä¸ç©ºé—´æ¨ç†èƒ½åŠ›çš„å¯¹é½æŒ‡æ˜äº†æ–°æ–¹å‘ã€‚</p>
<h2 data-id="heading-6"><strong>ç»“è®º</strong></h2>
<p>Artemisçš„å‡ºç°æ ‡å¿—ç€MLLMæ„ŸçŸ¥ç ”ç©¶çš„ä¸€ä¸ªé‡è¦è½¬æŠ˜ç‚¹ï¼šå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºè§†è§‰ä»»åŠ¡ï¼Œâ€œå¦‚ä½•æ€è€ƒâ€ä¸â€œæ€è€ƒä»€ä¹ˆâ€åŒæ ·é‡è¦ï¼Œç”šè‡³æ›´ä¸ºå…³é”®ã€‚å°†æ¨ç†è¿‡ç¨‹ç©ºé—´åŒ–ã€ç»“æ„åŒ–ã€å¯éªŒè¯åŒ–ï¼Œæ˜¯è§£é”MLLMå¯é æ„ŸçŸ¥ä¸æ¨ç†èƒ½åŠ›çš„å…³é”®ã€‚è¿™é¡¹å·¥ä½œä¸ºæ„å»ºä¸‹ä¸€ä»£çœŸæ­£ç†è§£ç‰©ç†ä¸–ç•Œã€èƒ½è¿›è¡Œå¤æ‚ç©ºé—´äº¤äº’çš„æ™ºèƒ½ä½“å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜]]></title>    <link>https://juejin.cn/post/7582041304654577710</link>    <guid>https://juejin.cn/post/7582041304654577710</guid>    <pubDate>2025-12-10T10:31:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582041304654577710" data-draft-id="7581872532363689993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-10T10:31:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªç§ƒå¤´çš„ç¨‹åºçŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/3448514653724824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3448514653724824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªç§ƒå¤´çš„ç¨‹åºçŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:31:06.000Z" title="Wed Dec 10 2025 10:31:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">â„ï¸ğŸ”¥ å†·å¯åŠ¨æ­£å¸¸ï¼Œçƒ­é‡å¯NPEï¼ŸShardingSphereæ’ä¸ŠDevtoolsçš„è¯¡å¼‚ç©ºæŒ‡é’ˆ</h2>
<blockquote>
<p><strong>æ ¸å¿ƒæç¤º</strong>ï¼šä½ çš„ ShardingSphere æŒ‰æœˆåˆ†è¡¨åŠŸèƒ½ï¼Œåœ¨åº”ç”¨é¦–æ¬¡å¯åŠ¨ï¼ˆå†·å¯åŠ¨ï¼‰æ—¶ä¸€åˆ‡æ­£å¸¸ï¼Œä½†ä¿®æ”¹ä»£ç åçƒ­é‡å¯ï¼Œå´æŠ›å‡ºä»¤äººè´¹è§£çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNPEï¼‰ã€‚é—®é¢˜æ ¹æºå¹¶éä»£ç é€»è¾‘ï¼Œè€Œåœ¨äºä½ é¡¹ç›®ä¸­çš„Â <code>spring-boot-devtools</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-1">é—®é¢˜ç°è±¡ï¼šè–›å®šè°”çš„ Bean</h3>
<p>å¼€å‘åŒå­¦åœ¨é›†æˆ ShardingSphere-JDBC å®ç°æŒ‰æœˆè‡ªåŠ¨åˆ†è¡¨æ—¶ï¼Œå¸¸ä¼šç¼–å†™ç±»ä¼¼çš„åˆ†ç‰‡ç®—æ³•ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// DateRangeShardingAlgorithm.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateRangeShardingAlgorithm</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PreciseShardingAlgorithm</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">doSharding</span><span class="hljs-params">(Collection tableNames, 
                            PreciseShardingValue preciseShardingValue)</span> {
        <span class="hljs-comment">// å†·å¯åŠ¨æ—¶æ­£å¸¸ï¼Œçƒ­é‡å¯åæ­¤å¥æŠ›å‡º NullPointerExceptionï¼</span>
        <span class="hljs-type">ShardingAlgorithmConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> SpringUtils.getBean(ShardingAlgorithmConfig.class);
        <span class="hljs-comment">// åç»­åˆ†è¡¨é€»è¾‘...</span>
    }
}
</code></pre>
<p><strong>ç—‡çŠ¶å…·ä½“è¡¨ç°ä¸º</strong>ï¼š</p>
<ul>
<li><strong>â„ï¸ å†·å¯åŠ¨ âœ…</strong>ï¼šé€šè¿‡ IDE æˆ–å‘½ä»¤é¦–æ¬¡å¯åŠ¨åº”ç”¨ï¼Œåˆ†è¡¨è·¯ç”±åŠŸèƒ½å®Œå…¨æ­£å¸¸ã€‚</li>
<li><strong>ğŸ”¥ çƒ­é‡å¯ âŒ</strong>ï¼šä¿®æ”¹ä»£ç ä¿å­˜åï¼ŒDevtools è‡ªåŠ¨çƒ­é‡å¯åº”ç”¨ï¼Œç›¸åŒçš„åˆ†ç‰‡æŸ¥è¯¢ç«‹åˆ»æŠ›å‡ºÂ <code>NullPointerException</code>ã€‚</li>
<li><strong>ğŸ§ª å•å…ƒæµ‹è¯• âœ…</strong>ï¼šå•ç‹¬è¿è¡ŒÂ <code>@SpringBootTest</code>Â å•å…ƒæµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œæ©ç›–äº†é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-2">æ ¹æºç®€æï¼šDevtools çš„â€œå¹³è¡Œå®‡å®™â€</h3>
<p><code>spring-boot-devtools</code>Â ä¸ºäº†å®ç°æé€Ÿçƒ­é‡å¯ï¼Œé‡‡ç”¨äº†<strong>åŒç±»åŠ è½½å™¨ (Dual ClassLoader)</strong> Â æœºåˆ¶ï¼š</p>
<ul>
<li><strong>Base ClassLoader</strong>ï¼šåŠ è½½åŸºæœ¬ä¸ä¼šå˜çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Springã€ShardingSphere è‡ªèº«ï¼‰ã€‚</li>
<li><strong>Restart ClassLoader</strong>ï¼šåŠ è½½ä½ æ­£åœ¨å¼€å‘çš„ã€é¢‘ç¹å˜æ›´çš„é¡¹ç›®ä»£ç ã€‚</li>
</ul>
<p><strong>çƒ­é‡å¯æ—¶ï¼Œåªæœ‰ RestartClassLoader è¢«é‡å»º</strong>ã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šä½ é¡¹ç›®ä¸­çš„å·¥å…·ç±»ï¼ˆå¦‚Â <code>SpringUtils</code>ï¼‰å’Œ ShardingSphere æ¡†æ¶åˆ›å»ºçš„åˆ†ç‰‡ç®—æ³•å®ä¾‹ï¼Œå¯èƒ½å¤„äº<strong>ä¸¤ä¸ªä¸åŒçš„â€œç±»åŠ è½½å™¨å®‡å®™â€</strong> ä¸­ã€‚å·¥å…·ç±»é‡Œç”¨äºä¿å­˜ Spring å®¹å™¨çš„é™æ€å˜é‡ï¼ˆå¦‚Â <code>beanFactory</code>ï¼‰<strong>åœ¨ä¸¤ä¸ªå®‡å®™ä¸­äº’ä¸ç›¸åŒ</strong>ã€‚æ¡†æ¶å®‡å®™é‡Œçš„å˜é‡è¢«æ­£ç¡®èµ‹å€¼äº†ï¼Œä½†ä½ ä»£ç å®‡å®™é‡Œè®¿é—®çš„å´æ˜¯å¦ä¸€ä¸ªæœªèµ‹å€¼çš„å‰¯æœ¬ï¼Œç»“æœå°±æ˜¯Â <code>null</code>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ è§£å†³æ–¹æ¡ˆä¸€ï¼šé…ç½®æ’é™¤æ³•ï¼ˆå¿«é€Ÿä¿®å¤ï¼‰</h3>
<p>å¦‚æœä½ å¸Œæœ›ä¿ç•™ Devtools çš„ä¾¿åˆ©æ€§ï¼Œè¿™æ˜¯æœ€å¿«çš„è§£å†³æ–¹å¼ã€‚æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>å‘Šè¯‰ Devtoolsï¼Œå°†ç‰¹å®šçš„æ ¸å¿ƒå·¥å…·ç±»å’Œé…ç½®ç±»ï¼Œä¹Ÿäº¤ç”± BaseClassLoader åŠ è½½</strong>ï¼Œè®©å®ƒä»¬ç•™åœ¨â€œæ¡†æ¶å®‡å®™â€ï¼Œä»è€Œé¿å…éš”ç¦»ã€‚</p>
<h4 data-id="heading-4">æ“ä½œæ­¥éª¤</h4>
<p><strong>1. åˆ›å»ºæ’é™¤é…ç½®æ–‡ä»¶</strong><br/>
åœ¨é¡¹ç›®çš„Â <code>src/main/resources</code>Â ç›®å½•ä¸‹ï¼Œåˆ›å»ºÂ <code>META-INF/spring-devtools.properties</code>Â æ–‡ä»¶ã€‚</p>
<p><strong>2. æ·»åŠ æ’é™¤è§„åˆ™</strong><br/>
åœ¨æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼ˆè¯·å°†Â <code>com.yourpackage</code>Â æ›¿æ¢ä¸ºä½ çš„å®é™…åŒ…åï¼‰ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">
# æ’é™¤åŒ…å« Spring ä¸Šä¸‹æ–‡å·¥å…·ç±»çš„åŒ…
restart.exclude.springutils=com.yourpackage.utils..*
# æ’é™¤ ShardingSphere é…ç½®ç±»çš„åŒ…
restart.exclude.shardingconfig=com.yourpackage.config.sharding..*
</code></pre>
<p><strong>3. ï¼ˆå¯é€‰ï¼‰éªŒè¯é…ç½®æ•ˆæœ</strong><br/>
ä½ å¯ä»¥åœ¨åº”ç”¨å¯åŠ¨æ—¶æ·»åŠ ä¸€æ®µæ—¥å¿—æ¥éªŒè¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassLoaderCheckRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;SpringUtils åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + SpringUtils.class.getClassLoader());
        System.out.println(&amp;#<span class="hljs-number">34</span>;ShardingConfig åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + ShardingAlgorithmConfig.class.getClassLoader());
        System.out.println(&amp;#<span class="hljs-number">34</span>;åˆ†ç‰‡ç®—æ³•ç±»åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + DateRangeShardingAlgorithm.class.getClassLoader());
    }
}
</code></pre>
<p><strong>æœŸå¾…çš„è¾“å‡ºç»“æœ</strong>åº”æ˜¯ï¼šå‰ä¸¤ä¸ªç±»ç”±Â <code>AppClassLoader</code>Â åŠ è½½ï¼Œè€Œåˆ†ç‰‡ç®—æ³•ç±»ç”±Â <code>RestartClassLoader</code>Â åŠ è½½ã€‚</p>

















<table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>é…ç½®ç®€å•ï¼Œè§æ•ˆå¿«</td><td>éœ€è¦æ˜ç¡®çŸ¥é“å“ªäº›æ ¸å¿ƒç±»éœ€æ’é™¤</td></tr><tr><td>å®Œå…¨ä¿ç•™çƒ­é‡å¯åŠŸèƒ½</td><td>æ–°å¢ç±»ä¼¼å·¥å…·ç±»éœ€æ›´æ–°é…ç½®</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">ğŸ§¹ è§£å†³æ–¹æ¡ˆäºŒï¼šç§»é™¤ Devtools ä¾èµ–ï¼ˆæœ€å½»åº•ï¼‰</h3>
<p>å¦‚æœä½ çš„å¼€å‘ç¯å¢ƒå¯¹çƒ­é‡å¯ä¾èµ–ä¸é«˜ï¼Œæˆ–è€…æ­¤é—®é¢˜å·²ä¸¥é‡é˜»ç¢è°ƒè¯•ï¼Œ<strong>ç›´æ¥ç§»é™¤Â <code>spring-boot-devtools</code>Â ä¾èµ–æ˜¯æœ€å½»åº•ã€ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•</strong>ã€‚</p>
<h4 data-id="heading-6">æ“ä½œæ­¥éª¤</h4>
<p><strong>1. ä¿®æ”¹ Maven ä¾èµ– (<code>pom.xml</code>)</strong><br/>
æ‰¾åˆ°å¹¶æ³¨é‡Šæˆ–åˆ é™¤Â <code>spring-boot-devtools</code>Â ä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">


    org.springframework.boot
    spring-boot-devtools
    runtime
    true

--&gt;
</code></pre>
<p><strong>2. æ¸…ç†ä¸é‡å¯</strong><br/>
æ‰§è¡Œ Maven æ¸…ç†å¹¶é‡æ–°å†·å¯åŠ¨åº”ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn clean compile
</code></pre>
<p>ç„¶ååœ¨ IDE ä¸­é‡æ–°å¯åŠ¨ä½ çš„ Spring Boot åº”ç”¨ã€‚</p>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆç§»é™¤å°±èƒ½è§£å†³ï¼Ÿ</h4>
<p>å› ä¸ºç§»é™¤äº†Â <code>spring-boot-devtools</code>Â åï¼Œåº”ç”¨åœ¨ä»»ä½•æ—¶å€™å¯åŠ¨éƒ½ä¼šä½¿ç”¨å•ä¸€çš„ã€æ ‡å‡†çš„Â <code>AppClassLoader</code>ã€‚æ‰€æœ‰çš„ç±»éƒ½åœ¨åŒä¸€ä¸ªâ€œå®‡å®™â€ä¸­ï¼Œé™æ€å˜é‡è‡ªç„¶å¯ä»¥æ­£ç¡®å…±äº«è®¿é—®ï¼Œä¸Šè¿°çš„ NPE é—®é¢˜éšä¹‹æ¶ˆå¤±ã€‚</p>

















<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>éœ€è¦çƒ­é‡å¯åŠŸèƒ½</strong>ï¼Œä¸”æ„¿æ„ç¨ä½œé…ç½®</td><td><strong>æ–¹æ¡ˆä¸€ï¼šé…ç½®æ’é™¤æ³•</strong></td></tr><tr><td><strong>æƒ³å½»åº•æ ¹é™¤é—®é¢˜</strong>ï¼Œæˆ–çƒ­é‡å¯éå¿…éœ€</td><td><strong>æ–¹æ¡ˆäºŒï¼šç§»é™¤ Devtools</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><code>spring-boot-devtools</code>Â åœ¨æå‡å¼€å‘æ•ˆç‡çš„åŒæ—¶ï¼Œä¹Ÿå› å…¶ç‹¬ç‰¹çš„åŒç±»åŠ è½½å™¨æœºåˆ¶å¸¦æ¥äº†â€œå†·çƒ­å¯åŠ¨è¡Œä¸ºä¸ä¸€è‡´â€çš„æš—å‘ã€‚å½“ä½ çš„Â <strong>ShardingSphere åˆ†ç‰‡ç®—æ³•ã€MyBatis æ’ä»¶ç­‰æ¡†æ¶æ‰©å±•ç‚¹</strong>ï¼Œåœ¨çƒ­é‡å¯åå‡ºç°ç¥ç§˜çš„ NPE æ—¶ï¼Œé¦–å…ˆå¯ä»¥æ£€æŸ¥æ˜¯å¦é€šè¿‡é™æ€å·¥å…·ç±»è·å–äº† Spring Beanã€‚</p>
<p>è§£å†³ä¹‹é“å¾ˆæ¸…æ™°ï¼šè¦ä¹ˆ<strong>é…ç½®æ’é™¤</strong>å…³é”®ç±»ï¼Œè¦ä¹ˆ<strong>æš‚æ—¶ç§»é™¤æ­¤ä¾èµ–</strong>ã€‚é€šå¸¸ï¼Œåœ¨é›†ä¸­è§£å†³æ­¤ç±»é›†æˆé—®é¢˜æœŸé—´ï¼Œé‡‡ç”¨æ–¹æ¡ˆäºŒèƒ½è®©è°ƒè¯•è·¯å¾„æ›´åŠ æ¸…æ™°ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡çŸ­æ–‡èƒ½å¸®ä½ å¿«é€ŸæŒ£è„±è¿™ä¸ªéšè”½çš„å›°å¢ƒï¼Œè®©ä½ çš„åˆ†è¡¨åŠŸèƒ½åœ¨å†·ä¸çƒ­çš„ä¸–ç•Œé‡Œéƒ½ç¨³å®šè¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7581872532363722761</link>    <guid>https://juejin.cn/post/7581872532363722761</guid>    <pubDate>2025-12-10T10:31:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581872532363722761" data-draft-id="7582047554089074697" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T10:31:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¦javaä¸­"/> <meta itemprop="url" content="https://juejin.cn/user/2269028453720813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2269028453720813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¦javaä¸­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:31:44.000Z" title="Wed Dec 10 2025 10:31:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><code>ArrayList</code> çš„åº•å±‚ç¡®å®æ˜¯ç”¨æ•°ç»„å®ç°çš„</strong>ï¼Œå¹¶ä¸”å®ƒçš„ <strong><code>add()</code> æ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘å°±ä¾èµ–äºè¿™ä¸ªå†…éƒ¨æ•°ç»„</strong>ã€‚ä¸‹é¢æˆ‘ä»¬ä»æºç è§’åº¦ï¼ˆä»¥ Java 8+ ä¸ºä¸»ï¼‰æ¥è¯¦ç»†è§£æï¼š</p>
<h2 data-id="heading-0">1.Â <code>ArrayList</code>Â åº•å±‚ç»“æ„</h2>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractList</span></span>
        implements <span class="hljs-type">List</span>, <span class="hljs-type">RandomAccess</span>, <span class="hljs-type">Cloneable</span>, java.io.<span class="hljs-type">Serializable</span> {
    
    <span class="hljs-comment">// å­˜å‚¨å…ƒç´ çš„åº•å±‚æ•°ç»„ï¼ˆJDK 8+ æ˜¯ Object[]ï¼Œæ—©æœŸç‰ˆæœ¬å¯èƒ½ä¸º transientï¼‰</span>
    transient <span class="hljs-type">Object</span>[] elementData;

    <span class="hljs-comment">// å®é™…å…ƒç´ ä¸ªæ•°</span>
    <span class="hljs-keyword">private</span> int size;
}
</code></pre>
<ul>
<li><code>elementData</code>Â å°±æ˜¯Â <code>ArrayList</code>Â å†…éƒ¨ç”¨æ¥å­˜æ•°æ®çš„<strong>åŠ¨æ€æ•°ç»„</strong>ã€‚</li>
<li>åˆå§‹å®¹é‡é»˜è®¤ä¸ºÂ <strong>10</strong>ï¼ˆå¦‚æœä½ ç”¨æ— å‚æ„é€ å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">2.Â <code>add(E e)</code>Â æ–¹æ³•çš„æ ¸å¿ƒæµç¨‹</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>{
    <span class="hljs-built_in">ensureCapacityInternal</span>(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// ç¡®ä¿å®¹é‡è¶³å¤Ÿ</span>
    elementData[size++] = e;           <span class="hljs-comment">// æ·»åŠ å…ƒç´ å¹¶å¢åŠ  size</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>å…³é”®åœ¨ <code>ensureCapacityInternal()</code> â€”â€” å®ƒè´Ÿè´£<strong>æ‰©å®¹æ£€æŸ¥</strong>ã€‚</p>
<h2 data-id="heading-2">3. æ‰©å®¹æœºåˆ¶ï¼ˆæ ¸å¿ƒï¼ï¼‰</h2>
<h3 data-id="heading-3">æ­¥éª¤åˆ†è§£ï¼š</h3>
<h4 data-id="heading-4">(1)Â <code>ensureCapacityInternal(minCapacity)</code></h4>
<pre><code class="hljs language-ini" lang="ini">private void ensureCapacityInternal(int minCapacity) {
    if (<span class="hljs-attr">elementData</span> == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        // å¦‚æœæ˜¯é»˜è®¤ç©ºæ•°ç»„ï¼Œåˆ™è‡³å°‘æ‰©å®¹åˆ° <span class="hljs-attr">DEFAULT_CAPACITY</span> = <span class="hljs-number">10</span>
        <span class="hljs-attr">minCapacity</span> = Math.max(DEFAULT_CAPACITY, minCapacity)<span class="hljs-comment">;</span>
    }
    ensureExplicitCapacity(minCapacity)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-5">(2)Â <code>ensureExplicitCapacity(minCapacity)</code></h4>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">ensureExplicitCapacity</span>(int minCapacity) {
    modCount++; <span class="hljs-comment">// ç”¨äº fail-fast æœºåˆ¶</span>
    if (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)
        <span class="hljs-built_in">grow</span>(minCapacity); <span class="hljs-comment">// éœ€è¦æ‰©å®¹ï¼</span>
}
</code></pre>
<h4 data-id="heading-6">(3)Â <code>grow(int minCapacity)</code>Â â€”â€”Â <strong>çœŸæ­£çš„æ‰©å®¹é€»è¾‘</strong></h4>
<pre><code class="hljs language-ini" lang="ini">private void grow(int minCapacity) {
    int <span class="hljs-attr">oldCapacity</span> = elementData.length<span class="hljs-comment">;</span>
    // æ–°å®¹é‡ = æ—§å®¹é‡ + æ—§å®¹é‡ &gt;&gt; 1 ï¼ˆå³ 1.5 å€ï¼‰
    int <span class="hljs-attr">newCapacity</span> = oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
    
    // å¦‚æœ 1.5 å€è¿˜ä¸å¤Ÿï¼ˆæ¯”å¦‚æ‰¹é‡æ·»åŠ å¤§é‡å…ƒç´ ï¼‰ï¼Œå°±ç”¨ minCapacity
    if (newCapacity - minCapacity &lt; 0)
        <span class="hljs-attr">newCapacity</span> = minCapacity<span class="hljs-comment">;</span>
    
    // å¤„ç†è¶…å¤§æ•°ç»„ï¼ˆæ¥è¿‘ Integer.MAX_VALUEï¼‰
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        <span class="hljs-attr">newCapacity</span> = hugeCapacity(minCapacity)<span class="hljs-comment">;</span>

    // åˆ›å»ºæ–°æ•°ç»„ï¼Œå¹¶å¤åˆ¶æ—§æ•°æ®ï¼ˆè°ƒç”¨ Arrays.copyOfï¼‰
    <span class="hljs-attr">elementData</span> = Arrays.copyOf(elementData, newCapacity)<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-7">4. å…³é”®ç‚¹æ€»ç»“</h2>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åº•å±‚ç»“æ„</strong></td><td><code>Object[] elementData</code>Â æ•°ç»„</td></tr><tr><td><strong>åˆå§‹å®¹é‡</strong></td><td>æ— å‚æ„é€ æ—¶ä¸ºÂ <strong>0</strong>ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰ï¼Œç¬¬ä¸€æ¬¡Â <code>add</code>Â æ—¶æ‰©åˆ°Â <strong>10</strong></td></tr><tr><td><strong>æ‰©å®¹ç­–ç•¥</strong></td><td><strong>1.5 å€å¢é•¿</strong>ï¼ˆ<code>old + old &gt;&gt; 1</code>ï¼‰</td></tr><tr><td><strong>æ‰©å®¹æ“ä½œ</strong></td><td>è°ƒç”¨Â <code>Arrays.copyOf()</code>Â åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ ï¼ˆ<strong>æ—¶é—´å¤æ‚åº¦ O(n)</strong> ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>âŒÂ <code>ArrayList</code>Â <strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong></td></tr></tbody></table>
<p>ä¸¾ä¾‹ï¼š<br/>
å½“å‰å®¹é‡ 10ï¼Œæ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´  â†’ æ‰©å®¹åˆ° <code>10 + 5 = 15</code><br/>
å†æ·»åŠ åˆ°ç¬¬ 16 ä¸ª â†’ æ‰©å®¹åˆ° <code>15 + 7 = 22</code>ï¼ˆå› ä¸º <code>15 &gt;&gt; 1 = 7</code>ï¼‰</p>
<h2 data-id="heading-8">å¯¹æ¯”ï¼š<code>ArrayList</code>Â vs æ™®é€šæ•°ç»„</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€šæ•°ç»„</th><th><code>ArrayList</code></th></tr></thead><tbody><tr><td>å¤§å°å›ºå®šï¼Ÿ</td><td>âœ… æ˜¯</td><td>âŒ åŠ¨æ€æ‰©å®¹</td></tr><tr><td>æ³›å‹æ”¯æŒï¼Ÿ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æä¾›ä¸°å¯Œæ–¹æ³•ï¼Ÿ</td><td>âŒ</td><td>âœ…ï¼ˆadd/remove/containsç­‰ï¼‰</td></tr><tr><td>å†…å­˜å¼€é”€</td><td>å°</td><td>ç¨å¤§ï¼ˆå¯¹è±¡å¤´ + size å­—æ®µç­‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-9">ğŸ“Œ æ€»ç»“</h3>
<ul>
<li><strong><code>ArrayList</code>Â åº•å±‚æ˜¯Â <code>Object[]</code>Â æ•°ç»„</strong>ã€‚</li>
<li><strong><code>add()</code>Â æ–¹æ³•ä¼šæ£€æŸ¥å®¹é‡ï¼Œä¸å¤Ÿå°±æ‰©å®¹</strong>ã€‚</li>
<li><strong>æ‰©å®¹è§„åˆ™ï¼š1.5 å€ï¼ˆå³ç§»ä¸€ä½åŠ åŸå€¼ï¼‰</strong> ã€‚</li>
<li><strong>æ‰©å®¹æœ¬è´¨æ˜¯åˆ›å»ºæ–°æ•°ç»„ + å¤åˆ¶æ—§æ•°æ®ï¼ˆ<code>Arrays.copyOf</code>ï¼‰</strong> ï¼Œæ‰€ä»¥<strong>é¢‘ç¹æ‰©å®¹ä¼šå½±å“æ€§èƒ½</strong>Â â†’ å»ºè®®é¢„ä¼°å®¹é‡å¹¶ç”¨Â <code>new ArrayList&lt;&gt;(initialCapacity)</code>Â åˆå§‹åŒ–ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨]]></title>    <link>https://juejin.cn/post/7582039917216579584</link>    <guid>https://juejin.cn/post/7582039917216579584</guid>    <pubDate>2025-12-10T11:01:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917216579584" data-draft-id="7582036070159237120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:01:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·44236359841"/> <meta itemprop="url" content="https://juejin.cn/user/766787307710060"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/766787307710060/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·44236359841
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:01:42.000Z" title="Wed Dec 10 2025 11:01:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨</h2>
<h3 data-id="heading-1">ğŸ“– å¼•è¨€</h3>
<p>åœ¨ç°ä»£Javaå¼€å‘ä¸­ï¼Œå•å…ƒæµ‹è¯•å·²æˆä¸ºä¿è¯ä»£ç è´¨é‡ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚JUnitä½œä¸ºJavaé¢†åŸŸæœ€æµè¡Œçš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æµ‹è¯•å·¥å…·ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦ä½ å…¨é¢äº†è§£JUnitçš„ä½¿ç”¨ï¼Œå¹¶ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œè®©ä½ è½»æ¾æŒæ¡ä¼ä¸šçº§æµ‹è¯•è§„èŒƒï¼</p>
<hr/>
<h3 data-id="heading-2">ğŸ¯ ç¬¬ä¸€ç« ï¼šJUnitå¿«é€Ÿå…¥é—¨</h3>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯JUnitå•å…ƒæµ‹è¯•ï¼Ÿ</h4>
<p>JUnitå•å…ƒæµ‹è¯•ä¸»è¦ç”¨äº<strong>éªŒè¯ç±»ä¸­æ–¹æ³•çš„æ­£ç¡®æ€§</strong>ï¼Œå®ƒæ˜¯å¼€å‘è€…éªŒè¯ä»£ç é€»è¾‘çš„ç¬¬ä¸€é“é˜²çº¿ã€‚</p>
<h4 data-id="heading-4">1.2 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨JUnitï¼Ÿ</h4>
<p>âœ… <strong>ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ğŸ›¡ï¸ <strong>ä»£ç åˆ†ç¦»</strong>ï¼šæµ‹è¯•ä»£ç ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤</li>
<li>ğŸ¨ <strong>ç›´è§‚åé¦ˆ</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼ˆç»¿è‰²é€šè¿‡ âŒ çº¢è‰²å¤±è´¥ï¼‰</li>
<li>ğŸ”’ <strong>ç‹¬ç«‹æ‰§è¡Œ</strong>ï¼šä¸€ä¸ªæµ‹è¯•æ–¹æ³•å¤±è´¥ä¸å½±å“å…¶ä»–æµ‹è¯•æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-5">1.3 å‘½åè§„èŒƒ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç±»å‘½åï¼šè¢«æµ‹è¯•ç±»å + Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {  <span class="hljs-comment">// âœ… è§„èŒƒ</span>
    
    <span class="hljs-comment">// æ–¹æ³•å‘½åï¼špublic void æ–¹æ³•å(){...}</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAge</span><span class="hljs-params">()</span> {  <span class="hljs-comment">// âœ… è§„å®š</span>
        <span class="hljs-comment">// æµ‹è¯•é€»è¾‘</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">âš™ï¸ ç¬¬äºŒç« ï¼šç¯å¢ƒé…ç½®ä¸åŸºç¡€ä½¿ç”¨</h3>
<h4 data-id="heading-7">2.1 Mavenä¾èµ–é…ç½®</h4>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ JUnitä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">

    org.junit.jupiter
    junit-jupiter
    5.9.1
    test

</code></pre>
<h4 data-id="heading-8">2.2 åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç±»</h4>
<p>åœ¨<code>src/test/java</code>ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-comment">/**
 * ç”¨æˆ·æœåŠ¡æµ‹è¯•ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAge</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// 2. æ‰§è¡Œè¢«æµ‹è¯•æ–¹æ³•</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// 3. éªŒè¯ç»“æœï¼ˆåˆå§‹ç‰ˆæœ¬ä½¿ç”¨è¾“å‡ºï¼‰</span>
        System.out.println(&amp;#<span class="hljs-number">34</span>;è®¡ç®—å¹´é¾„ï¼š&amp;#<span class="hljs-number">34</span>; + age);
        
        <span class="hljs-comment">// ğŸ¯ ä¼ä¸šå®è·µï¼šåº”è¯¥ä½¿ç”¨æ–­è¨€è€ŒéSystem.out</span>
        <span class="hljs-comment">// Assertions.assertEquals(22, age, &amp;#34;å¹´é¾„è®¡ç®—é”™è¯¯&amp;#34;);</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">ğŸ” ç¬¬ä¸‰ç« ï¼šæ–­è¨€ï¼ˆAssertionsï¼‰- æµ‹è¯•çš„æ ¸å¿ƒ</h3>
<h4 data-id="heading-10">3.1 ä»€ä¹ˆæ˜¯æ–­è¨€ï¼Ÿ</h4>
<p>æ–­è¨€æ˜¯JUnitæä¾›çš„è¾…åŠ©æ–¹æ³•ï¼Œç”¨äº<strong>éªŒè¯è¢«æµ‹è¯•æ–¹æ³•æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</strong>ã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼Œæµ‹è¯•å°†æ ‡è®°ä¸ºå¤±è´¥ã€‚</p>
<h4 data-id="heading-11">3.2 å¸¸ç”¨æ–­è¨€æ–¹æ³•è¯¦è§£</h4>













































<table><thead><tr><th>æ–­è¨€æ–¹æ³•</th><th>æè¿°</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>assertEquals(expected, actual, message)</code></td><td>æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰</td><td>éªŒè¯æ–¹æ³•è¿”å›å€¼</td></tr><tr><td><code>assertNotEquals(unexpected, actual, message)</code></td><td>æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰</td><td>éªŒè¯ä¸ç›¸ç­‰æƒ…å†µ</td></tr><tr><td><code>assertNull(object, message)</code></td><td>æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºnull</td><td>éªŒè¯ç©ºè¿”å›å€¼</td></tr><tr><td><code>assertNotNull(object, message)</code></td><td>æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull</td><td>éªŒè¯éç©ºè¿”å›å€¼</td></tr><tr><td><code>assertTrue(condition, message)</code></td><td>æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºtrue</td><td>éªŒè¯å¸ƒå°”æ¡ä»¶</td></tr><tr><td><code>assertFalse(condition, message)</code></td><td>æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºfalse</td><td>éªŒè¯å‡æ¡ä»¶</td></tr><tr><td><code>assertThrows(exceptionType, executable, message)</code></td><td>æ£€æŸ¥æ˜¯å¦æŠ›å‡ºæŒ‡å®šå¼‚å¸¸</td><td>éªŒè¯å¼‚å¸¸æƒ…å†µ</td></tr></tbody></table>
<h4 data-id="heading-12">3.3 å®æˆ˜ï¼šæ–­è¨€åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Assertions;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderWithAssert</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å‡†å¤‡</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// æ‰§è¡Œ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> userService.getGender(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// éªŒè¯æ–­è¨€</span>
        Assertions.assertEquals(&amp;#<span class="hljs-number">34</span>;ç”·&amp;#<span class="hljs-number">34</span>;, gender, 
            &amp;#<span class="hljs-number">34</span>;èº«ä»½è¯<span class="hljs-number">100000200010011011</span>å¯¹åº”çš„æ€§åˆ«åº”è¯¥æ˜¯ç”·æ€§&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderWithException</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// éªŒè¯å¼‚å¸¸æ–­è¨€</span>
        Assertions.assertThrows(IllegalArgumentException.class, () -&gt; {
            userService.getGender(<span class="hljs-literal">null</span>);
        }, &amp;#<span class="hljs-number">34</span>;ä¼ å…¥<span class="hljs-literal">null</span>å‚æ•°åº”è¯¥æŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testComprehensiveAssertions</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userService.processData(&amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// å¤šä¸ªæ–­è¨€ç»„åˆä½¿ç”¨</span>
        Assertions.assertNotNull(result, &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼ä¸åº”ä¸º<span class="hljs-literal">null</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertFalse(result.isEmpty(), &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼ä¸åº”ä¸ºç©ºå­—ç¬¦ä¸²&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertTrue(result.length() &gt; <span class="hljs-number">3</span>, &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼é•¿åº¦åº”å¤§äº<span class="hljs-number">3</span>&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ·ï¸ ç¬¬å››ç« ï¼šJUnitæ³¨è§£å¤§å…¨</h3>
<h4 data-id="heading-14">4.1 æ ¸å¿ƒæ³¨è§£é€ŸæŸ¥è¡¨</h4>



























































<table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>@Test</code></td><td>æ ‡è®°æµ‹è¯•æ–¹æ³•</td><td>æµ‹è¯•æ–¹æ³•çº§</td><td><code>@Test void testMethod()</code></td></tr><tr><td><code>@ParameterizedTest</code></td><td>å‚æ•°åŒ–æµ‹è¯•</td><td>æµ‹è¯•æ–¹æ³•çº§</td><td>é…åˆ<code>@ValueSource</code>ä½¿ç”¨</td></tr><tr><td><code>@ValueSource</code></td><td>æä¾›æµ‹è¯•å‚æ•°</td><td>æ–¹æ³•å‚æ•°çº§</td><td><code>@ValueSource(strings = {&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;})</code></td></tr><tr><td><code>@DisplayName</code></td><td>è‡ªå®šä¹‰æ˜¾ç¤ºåç§°</td><td>ç±»/æ–¹æ³•çº§</td><td><code>@DisplayName(&amp;#34;ç”¨æˆ·æ³¨å†Œæµ‹è¯•&amp;#34;)</code></td></tr><tr><td><code>@BeforeEach</code></td><td>æ¯ä¸ªæµ‹è¯•å‰æ‰§è¡Œ</td><td>å®ä¾‹æ–¹æ³•</td><td>åˆå§‹åŒ–æµ‹è¯•æ•°æ®</td></tr><tr><td><code>@AfterEach</code></td><td>æ¯ä¸ªæµ‹è¯•åæ‰§è¡Œ</td><td>å®ä¾‹æ–¹æ³•</td><td>æ¸…ç†èµ„æº</td></tr><tr><td><code>@BeforeAll</code></td><td>æ‰€æœ‰æµ‹è¯•å‰æ‰§è¡Œ</td><td>é™æ€æ–¹æ³•</td><td>åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</td></tr><tr><td><code>@AfterAll</code></td><td>æ‰€æœ‰æµ‹è¯•åæ‰§è¡Œ</td><td>é™æ€æ–¹æ³•</td><td>å…³é—­æ•°æ®åº“è¿æ¥</td></tr></tbody></table>
<h4 data-id="heading-15">4.2 æ³¨è§£å®æˆ˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.*;
<span class="hljs-keyword">import</span> org.junit.jupiter.params.ParameterizedTest;
<span class="hljs-keyword">import</span> org.junit.jupiter.params.provider.ValueSource;

<span class="hljs-meta">@DisplayName(&amp;#34;ç”¨æˆ·æœåŠ¡å®Œæ•´æµ‹è¯•å¥—ä»¶&amp;#34;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceCompleteTest</span> {
    
    <span class="hljs-keyword">private</span> UserService userService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">testCounter</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@BeforeAll</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initAll</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸš€ å¼€å§‹æ‰§è¡Œæ‰€æœ‰æµ‹è¯•...&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥æ± </span>
    }
    
    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        userService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        testCounter++;
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸ“ å‡†å¤‡æ‰§è¡Œç¬¬ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;æµ‹è¯•å¹´é¾„è®¡ç®— - æ­£å¸¸æƒ…å†µ&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAgeNormal</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertEquals(<span class="hljs-number">22</span>, age);
    }
    
    <span class="hljs-meta">@ParameterizedTest</span>
    <span class="hljs-meta">@ValueSource(strings = {
        &amp;#34;100000200010011011&amp;#34;,  // ç”·æ€§
        &amp;#34;100000200010021028&amp;#34;,  // å¥³æ€§
        &amp;#34;100000200010031013&amp;#34;   // ç”·æ€§
    })</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;å‚æ•°åŒ–æµ‹è¯• - å¤šä¸ªèº«ä»½è¯å·éªŒè¯æ€§åˆ«&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderParameterized</span><span class="hljs-params">(String idCard)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> userService.getGender(idCard);
        Assertions.assertNotNull(gender);
        Assertions.assertTrue(gender.equals(&amp;#<span class="hljs-number">34</span>;ç”·&amp;#<span class="hljs-number">34</span>;) || gender.equals(&amp;#<span class="hljs-number">34</span>;å¥³&amp;#<span class="hljs-number">34</span>;));
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;è¾¹ç•Œæµ‹è¯• - æœ€å°å¹´é¾„&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMinAgeBoundary</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æµ‹è¯•åˆšå‡ºç”Ÿçš„å©´å„¿</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">202312310101010101</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertEquals(<span class="hljs-number">0</span>, age, &amp;#<span class="hljs-number">34</span>;å½“å¤©å‡ºç”Ÿå¹´é¾„åº”ä¸º<span class="hljs-number">0</span>&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@AfterEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;âœ… ç¬¬ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•æ‰§è¡Œå®Œæˆ&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// æ¸…ç†æµ‹è¯•æ•°æ®</span>
    }
    
    <span class="hljs-meta">@AfterAll</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDownAll</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸ‰ æ‰€æœ‰æµ‹è¯•æ‰§è¡Œå®Œæ¯•ï¼Œå…±æ‰§è¡Œ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// é‡Šæ”¾å…¨å±€èµ„æº</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-16">ğŸ¢ ç¬¬äº”ç« ï¼šä¼ä¸šçº§å¼€å‘è§„èŒƒ</h3>
<h4 data-id="heading-17">5.1 æµ‹è¯•è¦†ç›–åŸåˆ™</h4>
<p><strong>é»„é‡‘æ³•åˆ™ï¼šå°½å¯èƒ½è¦†ç›–ä¸šåŠ¡æ–¹æ³•ä¸­çš„æ‰€æœ‰å¯èƒ½æƒ…å†µï¼Œç‰¹åˆ«æ˜¯è¾¹ç•Œå€¼ï¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentServiceTest</span> {
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;æ”¯ä»˜é‡‘é¢æµ‹è¯• - å…¨è¦†ç›–&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPaymentAmount</span><span class="hljs-params">()</span> {
        <span class="hljs-type">PaymentService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentService</span>();
        
        <span class="hljs-comment">// 1. æ­£å¸¸æƒ…å†µ</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">100.0</span>));
        
        <span class="hljs-comment">// 2. è¾¹ç•Œå€¼ï¼šæœ€å°å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">0.01</span>));
        
        <span class="hljs-comment">// 3. è¾¹ç•Œå€¼ï¼šæœ€å¤§å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">999999.99</span>));
        
        <span class="hljs-comment">// 4. å¼‚å¸¸æƒ…å†µï¼šè´Ÿæ•°</span>
        Assertions.assertFalse(service.validateAmount(-<span class="hljs-number">100.0</span>));
        
        <span class="hljs-comment">// 5. å¼‚å¸¸æƒ…å†µï¼šè¶…è¿‡æœ€å¤§å€¼</span>
        Assertions.assertFalse(service.validateAmount(<span class="hljs-number">1000000.0</span>));
        
        <span class="hljs-comment">// 6. å¼‚å¸¸æƒ…å†µï¼šé›¶å€¼</span>
        Assertions.assertFalse(service.validateAmount(<span class="hljs-number">0.0</span>));
        
        <span class="hljs-comment">// 7. è¾¹ç•Œå€¼ï¼šæ­£å¥½ç­‰äºæœ€å¤§å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">999999.99</span>));
    }
}
</code></pre>
<h4 data-id="heading-18">5.2 æµ‹è¯•é‡‘å­—å¡”ç­–ç•¥</h4>
<pre><code class="hljs language-scss" lang="scss">        ğŸª UIæµ‹è¯• (å°‘é‡)
         â†‘
    ğŸ¢ é›†æˆæµ‹è¯• (é€‚é‡)
         â†‘
ğŸ§ª å•å…ƒæµ‹è¯• (å¤§é‡åŸºç¡€)
</code></pre>
<p><strong>æ¨èæ¯”ä¾‹ï¼š70%å•å…ƒæµ‹è¯• + 20%é›†æˆæµ‹è¯• + 10%UIæµ‹è¯•</strong></p>
<h4 data-id="heading-19">5.3 æœ€ä½³å®è·µæ¸…å•</h4>
<p>âœ… <strong>ä¸€å®šè¦åšï¼š</strong></p>
<ul>
<li>æ¯ä¸ªpublicæ–¹æ³•éƒ½è¦æœ‰å¯¹åº”çš„æµ‹è¯•</li>
<li>æµ‹è¯•æ–¹æ³•åè¦æ¸…æ™°è¡¨è¾¾æµ‹è¯•æ„å›¾</li>
<li>ä½¿ç”¨<code>@DisplayName</code>æé«˜å¯è¯»æ€§</li>
<li>æµ‹è¯•æ•°æ®ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»</li>
<li>å®šæœŸè¿è¡Œæµ‹è¯•å¥—ä»¶</li>
</ul>
<p>âŒ <strong>é¿å…ï¼š</strong></p>
<ul>
<li>åœ¨æµ‹è¯•ä¸­å†™ä¸šåŠ¡é€»è¾‘</li>
<li>æµ‹è¯•æ–¹æ³•ä¹‹é—´æœ‰ä¾èµ–</li>
<li>ä½¿ç”¨<code>System.out</code>ä»£æ›¿æ–­è¨€</li>
<li>å¿½ç•¥è¾¹ç•Œæ¡ä»¶æµ‹è¯•</li>
<li>æµ‹è¯•ä»£ç ä¸ç»´æŠ¤</li>
</ul>
<hr/>
<h3 data-id="heading-20">ğŸ“¦ ç¬¬å…­ç« ï¼šMavenä¾èµ–èŒƒå›´è¯¦è§£</h3>






























<table><thead><tr><th>èŒƒå›´</th><th>è¯´æ˜</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>compile</strong></td><td>é»˜è®¤èŒƒå›´ï¼Œç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œéƒ½æœ‰æ•ˆ</td><td>é¡¹ç›®æ ¸å¿ƒä¾èµ–ï¼ˆå¦‚Spring Coreï¼‰</td></tr><tr><td><strong>test</strong></td><td>ä»…æµ‹è¯•é˜¶æ®µæœ‰æ•ˆï¼Œä¸ä¼šæ‰“åŒ…å‘å¸ƒ</td><td>JUnitã€Mockitoç­‰æµ‹è¯•æ¡†æ¶</td></tr><tr><td><strong>provided</strong></td><td>ç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œè¿è¡Œæ—¶ç”±å®¹å™¨æä¾›</td><td>Servlet APIã€JSP API</td></tr><tr><td><strong>runtime</strong></td><td>è¿è¡Œå’Œæµ‹è¯•æœ‰æ•ˆï¼Œç¼–è¯‘æ—¶ä¸éœ€è¦</td><td>JDBCé©±åŠ¨ã€æ—¥å¿—å®ç°</td></tr></tbody></table>
<p><strong>JUnitæ­£ç¡®é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml">
    org.junit.jupiter
    junit-jupiter
    5.9.1
    test  

</code></pre>
<hr/>
<h3 data-id="heading-21">ğŸš€ ç¬¬ä¸ƒç« ï¼šé«˜çº§æŠ€å·§ä¸å®æˆ˜å»ºè®®</h3>
<h4 data-id="heading-22">7.1 å‚æ•°åŒ–æµ‹è¯•è¿›é˜¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ParameterizedTest</span>
<span class="hljs-meta">@CsvSource({
    &amp;#34;100000200010011011, ç”·, 22&amp;#34;,
    &amp;#34;100000200010021028, å¥³, 22&amp;#34;, 
    &amp;#34;100000199010011011, ç”·, 33&amp;#34;
})</span>
<span class="hljs-meta">@DisplayName(&amp;#34;CSVæ•°æ®é©±åŠ¨æµ‹è¯•&amp;#34;)</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testUserWithCsv</span><span class="hljs-params">(String idCard, String expectedGender, <span class="hljs-type">int</span> expectedAge)</span> {
    <span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
    
    Assertions.assertEquals(expectedGender, service.getGender(idCard));
    Assertions.assertEquals(expectedAge, service.getAge(idCard));
}
</code></pre>
<h4 data-id="heading-23">7.2 æµ‹è¯•ä»£ç ç»“æ„æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä¼ä¸šçº§æµ‹è¯•ç±»æ¨¡æ¿
 */</span>
<span class="hljs-meta">@DisplayName(&amp;#34;[ä¸šåŠ¡æ¨¡å—] - [åŠŸèƒ½]æµ‹è¯•&amp;#34;)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardTestTemplate</span> {
    
    <span class="hljs-keyword">private</span> è¢«æµ‹è¯•ç±»å®ä¾‹;
    <span class="hljs-keyword">private</span> æ¨¡æ‹Ÿä¾èµ–å®ä¾‹;
    
    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. åˆå§‹åŒ–è¢«æµ‹è¯•å¯¹è±¡</span>
        <span class="hljs-comment">// 2. å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-comment">// 3. è®¾ç½®æ¨¡æ‹Ÿè¡Œä¸º</span>
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;åœºæ™¯æè¿° - é¢„æœŸç»“æœ&amp;#34;)</span>
    <span class="hljs-keyword">void</span> æµ‹è¯•æ–¹æ³•å() {
        <span class="hljs-comment">// 1. Arrange: å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-comment">// 2. Act: æ‰§è¡Œè¢«æµ‹è¯•æ–¹æ³•</span>
        <span class="hljs-comment">// 3. Assert: éªŒè¯ç»“æœ</span>
    }
    
    <span class="hljs-meta">@AfterEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    }
    
    <span class="hljs-meta">@Nested</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;ç‰¹å®šåœºæ™¯åˆ†ç»„&amp;#34;)</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpecificScenarioTests</span> {
        <span class="hljs-comment">// åµŒå¥—æµ‹è¯•ç±»ï¼Œç”¨äºåˆ†ç»„ç›¸å…³æµ‹è¯•</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-24">ğŸ“Š ç¬¬å…«ç« ï¼šæµ‹è¯•æŠ¥å‘Šä¸æŒç»­é›†æˆ</h3>
<h4 data-id="heading-25">8.1 ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</h4>
<p>åœ¨Mavenä¸­è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn <span class="hljs-built_in">test</span>  <span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
mvn surefire-report:report  <span class="hljs-comment"># ç”ŸæˆHTMLæŠ¥å‘Š</span>
</code></pre>
<h4 data-id="heading-26">8.2 ä¸CI/CDé›†æˆ</h4>
<p>åœ¨<code>.gitlab-ci.yml</code>æˆ–<code>Jenkinsfile</code>ä¸­æ·»åŠ æµ‹è¯•é˜¶æ®µï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">test:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">mvn</span> <span class="hljs-string">clean</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">artifacts:</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">target/surefire-reports/</span>
    <span class="hljs-attr">expire_in:</span> <span class="hljs-number">1</span> <span class="hljs-string">week</span>
</code></pre>
<hr/>
<h3 data-id="heading-27">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡å­¦ä¹ æœ¬æŒ‡å—ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<ol>
<li>âœ… <strong>åŸºç¡€æ¦‚å¿µ</strong>ï¼šJUnitçš„ä½œç”¨ã€ä¼˜åŠ¿ã€å‘½åè§„èŒƒ</li>
<li>âœ… <strong>æ ¸å¿ƒæŠ€èƒ½</strong>ï¼šæ–­è¨€çš„ä½¿ç”¨ã€å„ç§æ³¨è§£çš„åº”ç”¨</li>
<li>âœ… <strong>ä¼ä¸šå®è·µ</strong>ï¼šæµ‹è¯•è¦†ç›–åŸåˆ™ã€æœ€ä½³å®è·µ</li>
<li>âœ… <strong>é«˜çº§ç‰¹æ€§</strong>ï¼šå‚æ•°åŒ–æµ‹è¯•ã€ä¾èµ–ç®¡ç†</li>
</ol>
<p><strong>è®°ä½ï¼šå¥½çš„æµ‹è¯•ä¸æ˜¯è´Ÿæ‹…ï¼Œè€Œæ˜¯ä½ ä»£ç çš„ä¿é•–ï¼</strong> ğŸ›¡ï¸</p>
<p>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½æ˜¯å¯¹æœªæ¥ä¿®æ”¹çš„ä¸€ä»½ä¿é™©ï¼ŒæŠ•èµ„æ—¶é—´å†™æµ‹è¯•ï¼Œå°±æ˜¯æŠ•èµ„é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ç°åœ¨ï¼Œå¼€å§‹ä¸ºä½ çš„é¡¹ç›®æ·»åŠ åšå®çš„æµ‹è¯•é˜²æŠ¤å§ï¼</p>
<hr/>
<p><strong>ğŸ“š å»¶ä¼¸å­¦ä¹ èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjunit.org%2Fjunit5%2Fdocs%2Fcurrent%2Fuser-guide%2F" target="_blank" title="https://junit.org/junit5/docs/current/user-guide/" ref="nofollow noopener noreferrer">JUnit 5å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.mockito.org%2F" target="_blank" title="https://site.mockito.org/" ref="nofollow noopener noreferrer">Mockitoæ¡†æ¶</a> - æ¨¡æ‹Ÿå¯¹è±¡æµ‹è¯•</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftestcontainers.org%2F" target="_blank" title="https://testcontainers.org/" ref="nofollow noopener noreferrer">TestContainers</a> - é›†æˆæµ‹è¯•å®¹å™¨</li>
</ul>
<p><strong>ğŸ’¡ å°æç¤ºï¼š</strong>
å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®æ—¶ï¼Œå»ºè®®å…ˆå†™æµ‹è¯•å†å†™å®ç°ï¼ˆTDDï¼‰ï¼Œè¿™èƒ½å¸®ä½ æ›´å¥½åœ°ç†æ¸…éœ€æ±‚å’Œè®¾è®¡æ¥å£ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäºJUnit 5ç¼–å†™ï¼Œé€‚ç”¨äºSpring Bootç­‰ç°ä»£Javaæ¡†æ¶å¼€å‘ã€‚ç¥æ‚¨æµ‹è¯•æ„‰å¿«ï¼</em> ğŸ§ªâœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7582048028392538162</link>    <guid>https://juejin.cn/post/7582048028392538162</guid>    <pubDate>2025-12-10T11:07:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028392538162" data-draft-id="7581893894175227914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶"/> <meta itemprop="keywords" content=".NET"/> <meta itemprop="datePublished" content="2025-12-10T11:07:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ‹¿å¾®è½¯MVP"/> <meta itemprop="url" content="https://juejin.cn/user/1945461219656633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1945461219656633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ‹¿å¾®è½¯MVP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:07:39.000Z" title="Wed Dec 10 2025 11:07:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰æ™¯æè¦</h2>
<p>åœ¨ä¸Šæ–‡æˆ‘ä»¬å·²ç»å…¥é—¨äº†å§”æ‰˜ï¼š<a href="https://juejin.cn/post/7581666412022022153" target="_blank" title="https://juejin.cn/post/7581666412022022153">.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ1ï¼‰å§”æ‰˜å…¥é—¨ä¸€ã€ä»€ä¹ˆæ˜¯å§”æ‰˜ å§”æ‰˜å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾æ–¹æ³•çš„ç®±å­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªâ€œç®±å­â€ - æ˜é‡‘</a>ï¼Œç°åœ¨åˆ©ç”¨å§”æ‰˜ï¼Œæˆ‘ä»¬æ¥ç©ç‚¹é«˜çº§çš„ä¸œè¥¿ã€‚</p>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶</h3>
<p>å­¦è¿‡ASP .NET Coreçš„åŒå­¦åº”è¯¥å¯¹ä¸­é—´ä»¶æœ‰æ‰€äº†è§£ï¼Œè¿™é‡Œå†ç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼š</p>
<p>ä¸­é—´ä»¶æ˜¯ä¸€ä¸ª<strong>å¤„ç†é“¾æ¡</strong>ï¼ˆPipelineï¼‰ï¼Œè¯·æ±‚ä»ä¸Šä¸€ä¸ªä¸­é—´ä»¶æµåˆ°ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ ¸å¿ƒä¸šåŠ¡ï¼›å“åº”å†ä»æ ¸å¿ƒä¸šåŠ¡æµå›å„ä¸ªä¸­é—´ä»¶ï¼Œæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·ã€‚å°±åƒå¿«é€’æµç¨‹ï¼šå•†å®¶ â†’ å¿«é€’å‘˜ â†’ é©¿ç«™ â†’ ä½ ï¼ˆè¯·æ±‚æ–¹å‘ï¼‰ï¼›ä½ é€€è´§ â†’ é©¿ç«™ â†’ å¿«é€’å‘˜ â†’ å•†å®¶ï¼ˆå“åº”æ–¹å‘ï¼‰ã€‚</p>
<p>ç”¨ASP .NET Coreä¸¾ä¾‹å­,ä¸€ä¸ªè¯·æ±‚ä¼šæŒ‰ã€Œæ³¨å†Œé¡ºåºã€ä¾æ¬¡ç»è¿‡æ¯ä¸ªä¸­é—´ä»¶çš„<strong>å‰ç½®é€»è¾‘</strong>ï¼›å½“æ ¸å¿ƒä¸šåŠ¡ï¼ˆè·¯ç”±ä¸­é—´ä»¶ï¼‰å¤„ç†å®Œè¯·æ±‚åï¼Œå“åº”ä¼šæŒ‰ã€Œæ³¨å†Œé¡ºåºçš„åå‘ã€ä¾æ¬¡ç»è¿‡æ¯ä¸ªä¸­é—´ä»¶çš„<strong>åç½®é€»è¾‘</strong>ã€‚å‡è®¾æˆ‘å‘èµ·äº†ä¸€ä¸ªè¯·æ±‚ï¼Œå„ä¸ªé˜¶æ®µçš„è·¯çº¿åˆ†åˆ«æ˜¯è¿™æ ·çš„ï¼š</p>
<p>è¯·æ±‚ï¼š<code>å¼‚å¸¸ä¸­é—´ä»¶</code>Â â†’Â <code>æ—¥å¿—ä¸­é—´ä»¶</code>Â â†’Â <code>è·¨åŸŸä¸­é—´ä»¶</code>Â â†’Â <code>è®¤è¯ä¸­é—´ä»¶</code>Â â†’Â <code>è·¯ç”±ä¸­é—´ä»¶</code>-&gt;<code>æ ¸å¿ƒä¸šåŠ¡</code>(é¡ºåºï¼‰</p>
<p>å“åº”ï¼š<code>æ ¸å¿ƒä¸šåŠ¡</code>â†’Â <code>è·¯ç”±ä¸­é—´ä»¶</code>Â â†’Â <code>è®¤è¯ä¸­é—´ä»¶</code>â†’Â <code>è·¨åŸŸä¸­é—´ä»¶</code>Â â†’Â <code>æ—¥å¿—ä¸­é—´ä»¶</code>-&gt;<code>å¼‚å¸¸ä¸­é—´ä»¶</code>ï¼ˆé€†åºï¼‰</p>





















<table><thead><tr><th>é˜¶æ®µ</th><th>æ‰§è¡Œé¡ºåº &amp; å…·ä½“é€»è¾‘</th></tr></thead><tbody><tr><td><strong>è¯·æ±‚é˜¶æ®µ</strong>ï¼ˆé¡ºè¡Œï¼‰</td><td>1. å¼‚å¸¸ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆä»…å‡†å¤‡æ•è·å¼‚å¸¸ï¼‰2. æ—¥å¿—ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ è®°å½• â€œè°åœ¨ä»€ä¹ˆæ—¶å€™å‘äº†ä»€ä¹ˆè¯·æ±‚â€3. è·¨åŸŸä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ£€æŸ¥è·¨åŸŸè¯·æ±‚ï¼Œè®¾ç½®é¢„æ£€å“åº”å¤´4. è®¤è¯ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆå·²ç™»å½•ï¼Œæ”¾è¡Œï¼‰5. è·¯ç”±ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ è½¬å‘è¯·æ±‚åˆ° â€œæŸ¥è¯¢ç”¨æˆ·æ•°æ®â€ æ ¸å¿ƒæ¥å£ï¼ˆæ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡ï¼‰</td></tr><tr><td><strong>æ ¸å¿ƒä¸šåŠ¡</strong></td><td>è·¯ç”±ä¸­é—´ä»¶æ‰§è¡Œæ ¸å¿ƒé€»è¾‘ï¼šæŸ¥è¯¢ç”¨æˆ·æ•°æ®ï¼Œç”Ÿæˆå“åº”å†…å®¹ï¼ˆæ— å¼‚å¸¸ï¼‰</td></tr><tr><td><strong>å“åº”é˜¶æ®µ</strong>ï¼ˆé€†è¡Œï¼‰</td><td>1. è®¤è¯ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆè‹¥æœ‰éœ€è¦å¯è¡¥å……å“åº”å¤´ï¼‰2. è·¨åŸŸä¸­é—´ä»¶åç½®é€»è¾‘ â†’ è¡¥å……è·¨åŸŸå“åº”å¤´ï¼ˆå¦‚ Access-Control-Allow-Originï¼‰3. æ—¥å¿—ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ è®°å½• â€œè¯·æ±‚å¤„ç†å®Œæˆï¼Œå“åº”çŠ¶æ€ç  / è€—æ—¶â€4. å¼‚å¸¸ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆæ— å¼‚å¸¸ï¼‰5. å“åº”æœ€ç»ˆè¿”å›ç»™å‰ç«¯</td></tr></tbody></table>
<p>ç®€å•è¯´å°±æ˜¯<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸­é—´ä»¶ä¼šæœ‰è¿™æ ·<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ç¥å¥‡çš„åŠŸèƒ½å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥åˆ©ç”¨å§”æ‰˜æ‰‹æ“ä¸€ä¸ªå’±ä»¬è‡ªå·±çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œçœ‹å®Œä½ å°±æ˜ç™½ä¸ºä»€ä¹ˆä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ‰‹æ“ä¸­é—´ä»¶æ¡†æ¶</h2>
<h3 data-id="heading-3">2.1 æ¡†æ¶å‡†å¤‡</h3>
<p>é¦–å…ˆæˆ‘å‡†å¤‡äº†ä¸€ä¸ªç±»ï¼Œåä¸º<code>MethodInfo</code>ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•<code>Show</code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>CustomContext</code>å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª<code>CustomContext</code>å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MethodInfo</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> CustomContext <span class="hljs-title">Show</span>(<span class="hljs-params">CustomContext context</span>)</span>
        {
            Console.WriteLine(&amp;<span class="hljs-meta">#34;è¿™é‡Œæ‰§è¡Œäº†ä¸€ä¸ªæ–¹æ³•çš„æ ¸å¿ƒå†…å®¹ï¼ï¼ï¼&amp;#34;);</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> CustomContext();
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomContext</span>
    {

    }
</code></pre>
<p>ä¸ºä»€ä¹ˆÂ <code>Show</code>Â æ–¹æ³•è¦æ¥æ”¶Â <code>CustomContext</code>Â è¿™æ ·ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡å‘¢ï¼Ÿ<strong>ä¸­é—´ä»¶æ¡†æ¶çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šç”¨ä¸€ä¸ªã€Œç»Ÿä¸€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€è´¯ç©¿æ•´ä¸ªè¯·æ±‚ / å“åº”é“¾æ¡ï¼Œå®ç°æ•°æ®å…±äº«ã€çŠ¶æ€ä¼ é€’ã€æ“ä½œç»Ÿä¸€</strong>â€”â€” è¿™å’ŒÂ ASP.NET Core çš„Â <code>HttpContext</code>æ˜¯å®Œå…¨ä¸€è‡´çš„è®¾è®¡é€»è¾‘ã€‚</p>
<p>å‡è®¾Â <code>Show</code>Â æ–¹æ³•æ˜¯ä¸­é—´ä»¶ç®¡é“ä¸­çš„ä¸€ä¸ªç¯èŠ‚ï¼Œè‹¥ä¸ç”¨Â <code>CustomContext</code>ï¼Œè€Œæ˜¯ä¼ é›¶æ•£å‚æ•°ï¼ˆæ¯”å¦‚Â <code>token</code>ã€<code>requestPath</code>ã€<code>statusCode</code>ï¼‰ï¼Œä¼šå‡ºç°è¿™äº›è‡´å‘½é—®é¢˜ï¼š</p>
<ol>
<li><strong>å‚æ•°çˆ†ç‚¸</strong>ï¼šä¸­é—´ä»¶éœ€è¦çš„ä¿¡æ¯è¶Šå¤šï¼ˆè¯·æ±‚å¤´ã€ç”¨æˆ·ä¿¡æ¯ã€å“åº”çŠ¶æ€ã€ä¸´æ—¶æ•°æ®ï¼‰ï¼Œæ–¹æ³•å‚æ•°å°±è¶Šå¤šï¼ˆæ¯”å¦‚Â <code>Show(string token, string path, int code, ...)</code>ï¼‰ï¼Œç»´æŠ¤æˆæœ¬æé«˜ï¼›</li>
<li><strong>çŠ¶æ€æ— æ³•ä¼ é€’</strong>ï¼šå‰ä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚è®¤è¯ä¸­é—´ä»¶ï¼‰éªŒè¯çš„ â€œç”¨æˆ·æ˜¯å¦ç™»å½•â€ çŠ¶æ€ï¼Œæ— æ³•é«˜æ•ˆä¼ é€’ç»™åä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚ä½ çš„Â <code>Show</code>Â æ–¹æ³•ï¼‰ï¼Œåªèƒ½é€šè¿‡è¿”å›å€¼å±‚å±‚ä¼ é€’ï¼Œé“¾æ¡é•¿äº†ä¼šä¹±æˆä¸€å›¢ï¼›</li>
<li><strong>æ— æ³•ç»Ÿä¸€ä¿®æ”¹</strong>ï¼šåä¸€ä¸ªä¸­é—´ä»¶ä¿®æ”¹çš„ â€œå“åº”å†…å®¹â€ï¼Œæ— æ³•è®©å‰ä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚æ—¥å¿—ä¸­é—´ä»¶ï¼‰æ„ŸçŸ¥åˆ°ï¼Œæ¯”å¦‚Â <code>Show</code>Â æ–¹æ³•è¿”å›äº†é”™è¯¯ä¿¡æ¯ï¼Œæ—¥å¿—ä¸­é—´ä»¶æ— æ³•çŸ¥é“ï¼›</li>
<li><strong>ç®¡é“æ— æ³•ç»Ÿä¸€è°ƒåº¦</strong>ï¼šä¸­é—´ä»¶æ¡†æ¶éœ€è¦ç»Ÿä¸€è°ƒç”¨æ‰€æœ‰ä¸­é—´ä»¶ï¼ˆæ¯”å¦‚Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fasp.net%2F" target="_blank" title="https://asp.net/" ref="nofollow noopener noreferrer">ASP.NET</a>Â Core çš„Â <code>RequestDelegate</code>Â å§”æ‰˜ï¼‰ï¼Œè‹¥æ¯ä¸ªä¸­é—´ä»¶çš„å‚æ•°éƒ½ä¸ä¸€æ ·ï¼Œæ¡†æ¶æ— æ³•è®¾è®¡ç»Ÿä¸€çš„è°ƒç”¨é€»è¾‘ã€‚</li>
</ol>
<ul>
<li>
<p><strong>çœŸå®æ¡†æ¶ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fasp.net%2F" target="_blank" title="https://asp.net/" ref="nofollow noopener noreferrer">ASP.NET</a>Â Coreï¼‰</strong> ï¼š<code>HttpContext</code>Â åŒ…å«ï¼š</p>
<ul>
<li><code>Request</code>ï¼šURLã€è¯·æ±‚å¤´ã€Query å‚æ•°ã€è¯·æ±‚ä½“ã€å®¢æˆ·ç«¯ IP ç­‰ï¼›</li>
<li><code>Response</code>ï¼šå“åº”çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”ä½“ã€Cookie ç­‰ï¼›</li>
<li><code>User</code>ï¼šè®¤è¯åçš„ç”¨æˆ·ä¿¡æ¯ï¼ˆè§’è‰²ã€æƒé™ï¼‰ï¼›</li>
<li><code>Items</code>ï¼šä¸­é—´ä»¶é—´ä¸´æ—¶å…±äº«çš„é”®å€¼å¯¹ï¼ˆæ¯”å¦‚ â€œè¯·æ±‚å¼€å§‹æ—¶é—´â€â€œé™æµè®¡æ•°â€ï¼‰ï¼›</li>
<li><code>Connection</code>ï¼šTCP è¿æ¥ä¿¡æ¯ï¼ˆç«¯å£ã€åè®®ï¼‰ã€‚æ‰€æœ‰ä¸­é—´ä»¶éƒ½é€šè¿‡Â <code>HttpContext</code>Â è®¿é—®è¿™äº›æ•°æ®ï¼Œä¸ç”¨ä¼ ä¸€å †é›¶æ•£å‚æ•°ã€‚</li>
</ul>
</li>
<li>
<p><strong>CustomContextï¼ˆæ‰©å±•åï¼‰</strong> ï¼š<code>CustomContext</code>Â è™½ç„¶ç°åœ¨æ˜¯ç©ºçš„ï¼Œä½†å®é™…åœºæ™¯ä¸­ä¼šæ‰©å±•å‡ºæ ¸å¿ƒå­—æ®µï¼š</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomContext</span>
{
    <span class="hljs-comment">// è¯·æ±‚ç›¸å…³</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> RequestPath { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// æ¯”å¦‚ /user</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Token { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }       <span class="hljs-comment">// è®¤è¯Token</span>
    <span class="hljs-comment">// å“åº”ç›¸å…³</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> StatusCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">200</span>; <span class="hljs-comment">// å“åº”çŠ¶æ€ç </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ResponseContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// å“åº”å†…å®¹</span>
    <span class="hljs-comment">// å…±äº«çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsAuthenticated { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// æ˜¯å¦ç™»å½•</span>
    <span class="hljs-keyword">public</span> DateTime RequestStartTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// è¯·æ±‚å¼€å§‹æ—¶é—´</span>
}
</code></pre>
<p>ä¸ºäº†ç®€åŒ–ç†è§£ä¸­é—´ä»¶çš„æ¡†æ¶ï¼Œæˆ‘ä»¬è¿™é‡Œå°±æš‚ä¸”å…ˆç”¨ç©ºçš„<code>CustomContext</code>ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">2.2 åˆæœŸæ¡†æ¶</h3>
<p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ­¤æ—¶ï¼Œæˆ‘è¦åœ¨è¿™ä¸ªæ ¸å¿ƒæ–¹æ³•æ‰§è¡Œå‰åŠ ä¸€ä¸ªæ ¡éªŒç™»å½•çš„æ–¹æ³•ï¼Œå¹¶ä¸”å†æ‰§è¡Œåå†æ·»åŠ ä¸€ä¸ªæ ¡éªŒç™»å½•çš„æ–¹æ³•ï¼Œè¿˜ä¸å¯ä»¥ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™æ—¶å€™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„<code>å§”æ‰˜</code>äº†ï¼Œåˆ«å¿˜äº†å§”æ‰˜çš„ä»€ä¹ˆï¼Œ<code>å§”æ‰˜å°±æ˜¯ä¸€ä¸ªå­˜å‚¨æ–¹æ³•çš„ç›’å­</code>ï¼Œæˆ‘ä»¬å†è¿™ä¸ªç›’å­å†…éƒ¨ï¼Œåƒå¤¹å¿ƒé¥¼å¹²ä¸€æ ·çš„ï¼Œåˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼ŒæŠŠæˆ‘ä»¬çš„æ ¸å¿ƒä»£ç åŒ…è£¹èµ·æ¥ï¼Œä¸€ä¸ªæ”¾åœ¨æ ¸å¿ƒä»£ç ä¹‹å‰ï¼Œä¸€ä¸ªæ”¾åœ¨æ ¸å¿ƒä»£ç ä¹‹åï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ åŠŸèƒ½çš„æ•ˆæœäº†~</p>
<pre><code class="hljs language-cs" lang="cs">         MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

         CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

         Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);
</code></pre>
<p>å†™åˆ°è¿™ä¸€æ­¥åˆå‘ç°äº†é—®é¢˜ï¼š</p>
<ul>
<li><code>funcå§”æ‰˜</code>è™½ç„¶å¯ä»¥åˆ©ç”¨<code>+=</code>æ“ä½œå¾€åæ·»åŠ å…¶ä»–çš„æ–¹æ³•ï¼Œä½†æ˜¯æ— æ³•åœ¨æ ¸å¿ƒå‡½æ•°ä¹‹å‰æ·»åŠ ï¼Œåªèƒ½å¾€åè¿½åŠ </li>
<li>è¿½åŠ çš„å‡½æ•°ä¸€å®šè¦è·Ÿæ ¸å¿ƒå‡½æ•°ä¸€æ ·ï¼Œæ¥æ”¶<code>CustomContextå¯¹è±¡</code>ï¼Œè¿”å›<code>CustomContextå¯¹è±¡</code></li>
<li/>
</ul>
<p>å¦‚æœä¸ç¬¦åˆä¸Šè¿°çš„æƒ…å†µï¼Œå°±æ— æ³•éšä¾¿å¾€åè¿½åŠ ï¼Œæ‰€ä»¥ç›´æ¥ç”¨<code>+=</code>å¤šæ’­å§”æ‰˜çš„æ–¹å¼æ˜¾ç„¶è¡Œä¸é€šï¼Œé‚£æ€ä¹ˆåŠï¼Ÿ</p>
<h3 data-id="heading-5">2.3 é«˜çº§å§”æ‰˜ï¼šå§”æ‰˜çš„å§”æ‰˜</h3>
<p>ä¸å¦¨æ¢ä¸€ä¸ªæ€è·¯ï¼Œå¦‚æœæˆ‘æŠŠè¿™ä¸ªåŸæ¥çš„funcå§”æ‰˜<code>ä¿®æ”¹</code>äº†å‘¢ï¼Ÿ</p>
<p>æ—¢ç„¶ä¸è®©æˆ‘å¾€åè¿½åŠ ï¼Œæˆ‘è‡ªå·±æŠŠ<code>funcå§”æ‰˜</code>æ‹¿åˆ°ï¼Œç„¶ååœ¨è¿™ä¸ª<code>funcå§”æ‰˜</code>å‰åŠ ä¸ªå‡½æ•°ï¼Œåœ¨<code>funcå§”æ‰˜</code>åå†åŠ ä¸€ä¸ªå‡½æ•°ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿ</p>
<p>é—®é¢˜æ˜¯æˆ‘ä»¬è¦å¦‚ä½•æ‹¿åˆ°è¿™ä¸ª<code>funcå§”æ‰˜</code>ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œèƒ½æŠŠ<strong>ç°åœ¨çš„funcå§”æ‰˜ä¼ è¿›å»ï¼Œç„¶åå†æŠŠæ–°çš„åŠ å·¥è¿‡çš„funcå§”æ‰˜è¿”å›æ¥çš„æ–¹æ³•å‘¢ï¼Ÿ</strong></p>
<p>è¿™æ—¶å€™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„é«˜çº§å§”æ‰˜äº†</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// åˆ›å»ºæ ¸å¿ƒæ–¹æ³•çš„å®ä¾‹</span>
MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

<span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡</span>
CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

<span class="hljs-comment">// åˆ›å»ºåˆçº§å§”æ‰˜ï¼Œæ¥æ”¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡</span>
Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);

<span class="hljs-comment">// å®šä¹‰ä¸­é—´ä»¶1ï¼šæ¥æ”¶â€œä¸‹ä¸€ä¸ªç¯èŠ‚çš„å§”æ‰˜â€ï¼Œè¿”å›â€œåŒ…è£…åçš„å§”æ‰˜â€</span>
Func, Func&gt; middleWare1 =
    <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
    {
        <span class="hljs-comment">// ä¸­é—´ä»¶çš„æ ¸å¿ƒï¼šè¿”å›ä¸€ä¸ªâ€œåŒ…è£…åçš„å§”æ‰˜â€ï¼ˆåŒ…å«å‰ç½®+åç½®é€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
    });
</code></pre>
<p>è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª<code>middleWare1</code>çš„é«˜çº§å§”æ‰˜ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>Func</code>çš„ä½çº§å§”æ‰˜ï¼Œè¿”å›ä¸€ä¸ª<code>Func</code>çš„ä½çº§å§”æ‰˜ï¼Œè¿™ä¸ªä½çº§å§”æ‰˜å…¶å®å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„<code>func</code>å§”æ‰˜ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æŠŠ<code>func</code>å§”æ‰˜ä¼ è¿›å»ï¼Œç„¶åè®©<code>middleWare</code>ç»™æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªæ–°çš„å§”æ‰˜äº†ã€‚</p>
<p><strong>å¦‚ä½•æŠŠ<code>func</code>å§”æ‰˜ä¼ è¿›å»ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å§”æ‰˜å‘¢ï¼Ÿ</strong></p>
<pre><code class="hljs language-cs" lang="cs">next =&gt;
    {
        <span class="hljs-comment">// ä¸­é—´ä»¶çš„æ ¸å¿ƒï¼šè¿”å›ä¸€ä¸ªâ€œåŒ…è£…åçš„å§”æ‰˜â€ï¼ˆåŒ…å«å‰ç½®+åç½®é€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­ é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
    }
</code></pre>
<p>æ³¨æ„çœ‹æˆ‘è¿™é‡Œç”¨äº†ä¸€ä¸ªLamadeè¡¨è¾¾å¼ï¼Œå®ƒå°†æ¥æ”¶çš„å§”æ‰˜<code>next</code>å˜æˆä¸€ä¸ªæ–°çš„å¼å­å§”æ‰˜ï¼š<code>return new Func(context =&gt;</code>è¿™ä¸ªæ–°çš„å§”æ‰˜å¯ä»¥ä»ä»£ç çœ‹å‡º:</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­ é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
</code></pre>
<p>è¿™ä¸ªå§”æ‰˜çš„æ–¹æ³•å…¶å®å°±æ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šï¼Œç»™åŸæ¥çš„å§”æ‰˜å¥—ä¸Šå‰ç½®æ–¹æ³•å’Œåç½®æ–¹æ³•ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">//  ç”¨ä¸­é—´ä»¶1åŒ…è£…æ ¸å¿ƒä¸šåŠ¡å§”æ‰˜ â†’ å¾—åˆ°â€œåŒ…å«ä¸­é—´ä»¶é€»è¾‘+æ ¸å¿ƒä¸šåŠ¡â€çš„æ–°å§”æ‰˜</span>
<span class="hljs-keyword">var</span> func1 = middleWare1.Invoke(func);

<span class="hljs-comment">//  æ‰§è¡ŒåŒ…è£…åçš„å§”æ‰˜ï¼ˆè§¦å‘å®Œæ•´çš„ä¸­é—´ä»¶æµç¨‹ï¼‰</span>
<span class="hljs-keyword">var</span> customContext = func1.Invoke(context);
</code></pre>
<p>å½“æ‰§è¡Œ<code> func1.Invoke(context);</code>åï¼Œ<code>context</code>ä¸Šä¸‹æ–‡ä¼šé€šè¿‡å‰ç½®å‡½æ•°-&gt;æ ¸å¿ƒå‡½æ•°-&gt;åç½®å‡½æ•°æ‰§è¡Œã€‚</p>
<p>æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªä¸­é—´ä»¶æ—¶ï¼Œæƒ…å†µä¼šæœ‰æ‰€å˜åŒ–ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">            MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

            CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

            Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);

            Func, Func&gt; middleWare1 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });
            Func, Func&gt; middleWare2 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶2çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶2çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });
            Func, Func&gt; middleWare3 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶3çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶3çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });

            <span class="hljs-keyword">var</span> func1 = middleWare1.Invoke(func);
            <span class="hljs-keyword">var</span> func2 = middleWare2.Invoke(func1);
            <span class="hljs-keyword">var</span> func3 = middleWare3.Invoke(func2);
            <span class="hljs-keyword">var</span> customContext = func3.Invoke(context);
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥çš„æ ¸å¿ƒä»£ç ï¼Œè¢«middlewa1ä¸­é—´ä»¶åŒ…è£¹åï¼Œåˆè¢«middlewa2ä¸­é—´ä»¶åŒ…è£¹ï¼Œåˆè¢«middlewa3ä¸­é—´ä»¶åŒ…è£¹ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œfunc3.Invoke(context)æ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>
<ol>
<li>æ‰§è¡Œå§”æ‰˜3ï¼š<code>func3.Invoke(context)</code></li>
<li>æ‰§è¡Œå§”æ‰˜3çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶3çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œ<code>next.Invoke(context);</code>è¿›å…¥å§”æ‰˜2</li>
<li>æ‰§è¡Œå§”æ‰˜2çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶2çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œ<code>next.Invoke(context);</code>è¿›å…¥å§”æ‰˜1</li>
<li>æ‰§è¡Œå§”æ‰˜1çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œæ ¸å¿ƒæ–¹æ³•</li>
<li>æ‰§è¡Œå§”æ‰˜1çš„åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å›åˆ°å§”æ‰˜2ï¼Œæ‰§è¡Œå§”æ‰˜2åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶2çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å›åˆ°å§”æ‰˜3ï¼Œæ‰§è¡Œå§”æ‰˜3åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶3çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å‡ºå§”æ‰˜3</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯å‡½æ•°æ‰§è¡Œçš„å…¨éƒ¨è¿‡ç¨‹ï¼Œç»“æœä¸ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e37f33302d5d4193a69b3ace0ed4088d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765969658&amp;x-signature=OrT1nAh08OskvP83oI62e37l8Rw%3D" alt="image.png" loading="lazy"/></p>
<p>è·Ÿæˆ‘ä»¬ä¸€å¼€å§‹è¯´çš„ä¸­é—´ä»¶çš„å…è®¸æµç¨‹<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ä¿æŒä¸€è‡´ï¼Œè‡³æ­¤æˆ‘ä»¬å°±é¡ºåˆ©çš„å†™å‡ºäº†æˆ‘ä»¬è‡ªå·±çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œè™½ç„¶ä¸å¤Ÿå®Œå–„ï¼Œä½†æ˜¯æœ‰åˆ©äºè®©å¤§å®¶ç†è§£ä¸­é—´ä»¶ã€‚åç»­æˆ‘ä¼šå°è£…ä¸€å¥—å®Œæ•´çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KotlinInlineå…³é”®å­—]]></title>    <link>https://juejin.cn/post/7582021506190065710</link>    <guid>https://juejin.cn/post/7582021506190065710</guid>    <pubDate>2025-12-10T11:58:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582021506190065710" data-draft-id="7582041304654708782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KotlinInlineå…³é”®å­—"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2025-12-10T11:58:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·98512003583"/> <meta itemprop="url" content="https://juejin.cn/user/1927871600799337"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KotlinInlineå…³é”®å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927871600799337/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·98512003583
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:58:52.000Z" title="Wed Dec 10 2025 11:58:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Kotlin</code> ä¸­çš„å†…è”å‡½æ•°ï¼ˆInline Functionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸æ™®é€šå‡½æ•°ä¸åŒ, ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶å°†å†…è”å‡½æ•°ä¸­çš„ä»£ç æ’å…¥åˆ°è°ƒç”¨å¤„, é¿å…å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚å®ƒçš„ä½œç”¨å’Œ <code>C++</code> ä¸­çš„å†…è”å‡½æ•°ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h2 data-id="heading-0">å®šä¹‰å†…è”å‡½æ•°</h2>
<p><code>å†…è”å‡½æ•°</code> çš„å®šä¹‰å’Œæ™®é€šå‡½æ•°ç±»ä¼¼, åªæ˜¯åœ¨å‡½æ•°åå‰æ·»åŠ  <code>inline</code> å…³é”®å­—å³å¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inlineFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    block()
}
</code></pre>
<p>ä»è¯­æ³•ä¸Šçœ‹ï¼Œè°ƒç”¨æ–¹å¼å’Œæ™®é€šå‡½æ•°ç›¸ä¼¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
    }
}
</code></pre>
<p>ä»¥ä¸Šä»£ç ä¸ä¸‹é¢çš„ä»£ç åœ¨æ‰§è¡Œæ•ˆæœä¸Šå®Œå…¨ä¸€è‡´</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<h2 data-id="heading-1">å†…è”å‡½æ•°çš„return</h2>
<p><code>kotlin</code> çš„ <code>lambda</code> è¡¨è¾¾å¼returnå¿…é¡»ä½¿ç”¨ <code>return@scope</code> æ¥æŒ‡å®šè¿”å›çš„ä½œç”¨åŸŸï¼Œç”±äºå†…è”å‡½æ•°çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥å†…è”å‡½æ•°å¯ä»¥ä½¿ç”¨ return è€Œä¸å¿…é¡»æ·»åŠ @é™å®šç¬¦ã€‚æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">return</span>
    }
}
</code></pre>
<p>è€Œæ™®é€šå‡½æ•°åˆ™å¿…é¡»ä½¿ç”¨ <code>return@scope</code> æ¥è¿”å›, æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@normalFunction</span>
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º<code>å†…è”å‡½æ•°</code>çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥ä¸Šé¢çš„<code>å†…è”å‡½æ•°</code>è¿”å›å°±ç›¸å½“äº</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
    <span class="hljs-comment">// è¿™é‡Œçš„returnæ˜¯å¯ä»¥ä¸æ·»åŠ é™å®šç¬¦ç›´æ¥è¿”å›çš„</span>
    <span class="hljs-keyword">return</span>
}
</code></pre>
<h3 data-id="heading-2">Kotlin ä¸­çš„ return</h3>
<p>ä»ä¸Šé¢å¯¹<code>å†…è”å‡½æ•°</code>çš„æè¿°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™returnä¸éœ€è¦æ·»åŠ @é™å®šç¬¦å‘¢ï¼Ÿ</p>
<ol>
<li>å½“å†…è”å‡½æ•°çš„lambdaå‚æ•°åœ¨é¡¶å±‚å‡½æ•°ä¸­è¢«è°ƒç”¨æ—¶ï¼Œæ­¤æ—¶ä¸æ·»åŠ é™å®šç¬¦ï¼Œreturn å°±ç›¸å½“äºç›´æ¥è¿”å›é¡¶å±‚å‡½æ•°ã€‚</li>
<li>åŒ¿åå‡½æ•°ä¸­çš„return, ä¹Ÿä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</li>
</ol>
<p>å†…è”å‡½æ•°åœ¨éå†…è”å‡½æ•°ä¸­è°ƒç”¨çš„æ—¶å€™, å°±éœ€è¦ä½¿ç”¨@é™å®šç¬¦æ¥æŒ‡å®šè¿”å›çš„ä½œç”¨åŸŸã€‚æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        inlineFunction {
            println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
            <span class="hljs-comment">// è¡¨ç¤ºè¿”å›åˆ°inlineFunction</span>
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@inlineFunction</span>
            
            <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°normalFunction</span>
            <span class="hljs-comment">// return@normalFunction</span>
        }
    }
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-comment">// ç›´æ¥è¿”å›åˆ°é¡¶å±‚å‡½æ•°ï¼Œä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</span>
        <span class="hljs-keyword">return</span>
        
        <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°normalFunction</span>
        <span class="hljs-comment">// return@normalFunction</span>
    }

    inlineFunction {
        inlineFunction {
            <span class="hljs-comment">// ç›´æ¥è¿”å›åˆ°é¡¶å±‚å‡½æ•°ï¼Œå¯ä»¥ä¸æ·»åŠ @é™å®šç¬¦</span>
            <span class="hljs-keyword">return</span>
            
            <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°inlineFunction</span>
            <span class="hljs-comment">// return@inlineFunction</span>
        }
    }

    normalFunction(<span class="hljs-function"><span class="hljs-title">fun</span> <span class="hljs-params">()</span></span>:<span class="hljs-built_in">Unit</span> {
        <span class="hljs-comment">// åŒ¿åå‡½æ•°ä¸­çš„return, ä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</span>
        <span class="hljs-keyword">return</span>
    })
}
</code></pre>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒåŠ äº†@é™å®šç¬¦çš„returnå’Œä¸åŠ @é™å®šç¬¦çš„returnæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<ul>
<li>å¦‚æœåŠ äº†é™å®šç¬¦ï¼Œé€€å‡ºçš„åªæ˜¯å½“å‰ä½œç”¨åŸŸ</li>
<li>è€Œä¸åŠ é™å®šç¬¦ï¼Œé€€å‡ºçš„æ˜¯æ•´ä¸ªå‡½æ•°</li>
</ul>
<h3 data-id="heading-3">Kotlin ä¸­çš„ return è®¾è®¡</h3>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆKotlinè¦è®¾è®¡æˆè¿™æ ·å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸è®¾è®¡çš„å’ŒJavaä¸€æ ·ï¼Œreturnè¿”å›çš„åªæ˜¯å½“å‰çš„ä½œç”¨åŸŸå‘¢ï¼Ÿç›®çš„æœ‰ä¸¤ä¸ª</p>
<ol>
<li>å¢åŠ æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§</li>
<li>é¿å…ä½¿ç”¨å†…è”å‡½æ•°æ—¶çš„é€»è¾‘æ··æ·†</li>
</ol>
<h4 data-id="heading-4">1. å¢åŠ æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§</h4>
<p>Javaä»£ç ä¸­ï¼Œlambdaè¡¨è¾¾å¼ä¸­çš„returnåªèƒ½è¿”å›å½“å‰lambdaä½œç”¨åŸŸï¼Œè€ŒKotlinä¸­çš„returnå¯ä»¥è¿”å›ä»»æ„ä½œç”¨åŸŸã€‚è¿™å°±å¢åŠ äº†æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéå†ä¸€ä¸ªåˆ—è¡¨ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶ï¼Œç»ˆæ­¢éå†ï¼Œæˆ‘ä»¬çœ‹çœ‹åœ¨<code>Java</code>ä¸­æ€ä¹ˆå®ç°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">breakOnCondition</span><span class="hljs-params">(List list, Predicate predicate)</span> {
    <span class="hljs-keyword">for</span> (T t : list) {
        <span class="hljs-keyword">if</span> (predicate.test(t)) {
            <span class="hljs-keyword">return</span>;
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
    breakOnCondition(list, i -&gt; i == <span class="hljs-number">3</span>);
}

</code></pre>
<p>é‚£ä¹ˆï¼Œåœ¨Kotlinä¸­æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦è¿™æ ·è®¾è®¡ã€‚å¯¹äºéå†åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ç»“åˆ return@scope æ¥ç»ˆæ­¢å½“å‰éå†æ“ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> list = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    list.forEach {
        <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) {
            <span class="hljs-comment">// ç›´æ¥è¿”å›forEachå¾ªç¯</span>
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@forEach</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-5">2. é¿å…ä½¿ç”¨å†…è”å‡½æ•°æ—¶çš„é€»è¾‘æ··æ·†</h4>
<p>å¦‚æœå¯ä»¥ä¸å¸¦æœ‰@é™å®šç¬¦ï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå¾ˆéš¾ç¡®å®šç¨‹åºçš„è¡Œä¸ºï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">normalFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> = block()
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inlineFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> = block()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        <span class="hljs-comment">// è¿™é‡Œæ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œæˆ‘ä»¬å‡å®šå¯ä»¥é€šè¿‡</span>
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After normalFunction&amp;#<span class="hljs-number">34</span>;)
    inlineFunction {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¸ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<p>å‡è®¾ä¸Šé¢çš„ä»£ç æ­£ç¡®ï¼Œå¹¶ä¸”å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚
è¿™é‡Œçš„ normalFunction ä¸­çš„returnï¼Œç»“æŸçš„æ˜¯ normalFunction å‡½æ•°ã€‚
è€Œ inlineFunction ä¸­çš„returnï¼Œç»“æŸçš„å´æ˜¯mainå‡½æ•°ï¼Œå› ä¸ºinlineFunction ä¸­çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥inlineFunction ä¸­çš„return å°±ç›¸å½“äºç›´æ¥è¿”å›mainå‡½æ•°ã€‚</p>
<p>é‚£ä¹ˆç”¨æˆ·åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå°±å¾ˆå®¹æ˜“æ··æ·†ã€‚</p>
<p>è€Œå¦‚æœéå†…è”å‡½æ•°çš„lambdaå‚æ•°è¦æ±‚åªèƒ½ä½¿ç”¨return@scopeæ¥è¿”å›ï¼Œå°±ä¼šé¿å…è¿™ç§å®¹æ˜“æ··æ·†çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@normalFunction</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After normalFunction&amp;#<span class="hljs-number">34</span>;)

    inlineFunction {
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@inlineFunction</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)

    inlineFunction {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¸ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<h2 data-id="heading-6">reified ç±»å‹å‚æ•°</h2>
<p>reified ç±»å‹å‚æ•°æ˜¯Kotlinä¸­ä¸€ç§ç‰¹æ®Šçš„ç±»å‹å‚æ•°ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶è·å–åˆ°ç±»å‹ä¿¡æ¯ã€‚è¿˜è®°å¾—Javaä¸­æ€ä¹ˆè·å–æ³›å‹ç±»å‹å—ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>  T <span class="hljs-title function_">parseObj</span><span class="hljs-params">(String json, Class clazz)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>().fromJson(json, clazz);
}
</code></pre>
<p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ  Class\ clazz å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬æ— æ³•åœ¨è¿è¡Œæ—¶è·å–åˆ°æ³›å‹ç±»å‹ã€‚å› ä¸ºJavaä»£ç ä¸­å¦‚æœæ²¡æœ‰å’Œæ³›å‹ç›¸å…³çš„å¯¹è±¡ä¼ å…¥è¿›æ¥çš„è¯ï¼Œæ˜¯æ— æ³•åœ¨è¿è¡Œæ—¶è·å–åˆ°æ³›å‹ç±»å‹çš„ã€‚</p>
<p>ä½†æ˜¯åœ¨<code>Kotlin</code>çš„å†…è”å‡½æ•°ä¸­ï¼Œæä¾›äº†reified ç±»å‹å‚æ•°ï¼Œå®ƒå¯ä»¥åœ¨å‡½æ•°ä¸æä¾›å‚æ•°ä¿¡æ¯æƒ…å†µä¸‹ï¼Œè·å–åˆ°æ³›å‹ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  <span class="hljs-title">parseObj</span><span class="hljs-params">(json: <span class="hljs-type">String</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> new Gson().fromJson(json, T::<span class="hljs-keyword">class</span>.java)
}
</code></pre>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªå‚æ•°å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥å¤šå¤§çš„ä¾¿åˆ©æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨T::class.javaæ¥è·å–åˆ°æ³›å‹ç±»å‹ï¼Œè€Œä¸éœ€è¦ä¼ å…¥Class\ clazz å‚æ•°ã€‚
<code>MybatisPlus</code> æä¾›äº† KtQueryChainWrapper ç±»,é€šè¿‡è¿™ä¸ªç±»ï¼Œå¯ä»¥é€šè¿‡lambdaçš„æ–¹å¼æ„å»ºæŸ¥è¯¢å‚æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> baseMapper: BaseMapper

<span class="hljs-keyword">val</span> chain = KtQueryChainWrapper(baseMapper, entityClass=Config::<span class="hljs-keyword">class</span>.java)
<span class="hljs-keyword">val</span> config = chain.eq(Config::name, &amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;).one()
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º BaseMapper æ·»åŠ ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œæ¥è·å– KtQueryChainWrapper ç±»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">query</span><span class="hljs-params">()</span></span>: KtQueryChainWrapper {
    <span class="hljs-comment">// å¾ˆè¦å‘½çš„æ˜¯ mybatisplus è¦æ±‚å¿…é¡»å¡«å†™ entityClass å‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>
    <span class="hljs-keyword">return</span> KtQueryChainWrapper(baseMapper = <span class="hljs-keyword">this</span>, entityClass = entityClass())  
}

<span class="hljs-comment">// ä½¿ç”¨çš„æ—¶å€™å°±ä¼šå¾ˆæ–¹ä¾¿</span>
<span class="hljs-keyword">val</span> config = baseMapper.query().eq(Config::name, &amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;).one()
</code></pre>
<p>ä½†æ˜¯ï¼Œæ€ä¹ˆè·å– entityClass å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰ reified å…³é”®å­—ï¼Œ æˆ‘ä»¬åªèƒ½é€šè¿‡åå°„æ¥è·å–ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">entityClass</span><span class="hljs-params">()</span></span>: Class {  
    <span class="hljs-keyword">val</span> searchEntityClass = javaClass.searchEntityClass()  
    <span class="hljs-keyword">if</span> (searchEntityClass != <span class="hljs-literal">null</span>) {  
        <span class="hljs-keyword">return</span> searchEntityClass  
    }  
    <span class="hljs-keyword">throw</span> IllegalArgumentException(&amp;#<span class="hljs-number">34</span>;æ— æ³•è·å–å®ä½“ç±»&amp;#<span class="hljs-number">34</span>;)  
}
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  Class<span class="hljs-type">&lt;*&gt;</span>.<span class="hljs-title">searchEntityClass</span><span class="hljs-params">()</span></span>: Class? {
    <span class="hljs-keyword">for</span> (type <span class="hljs-keyword">in</span> genericInterfaces) {
        <span class="hljs-keyword">if</span> (type <span class="hljs-keyword">is</span> ParameterizedType) {
            <span class="hljs-keyword">if</span> (type.rawType == BaseMapper::<span class="hljs-keyword">class</span>.java) {
                <span class="hljs-keyword">return</span> type.actualTypeArguments[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> Class
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (type <span class="hljs-keyword">is</span> Class&lt;*&gt;) {
                <span class="hljs-keyword">return</span> type.searchEntityClass()
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

}
</code></pre>
<p>è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>å†…è”å‡½æ•°</code> + reified ç±»å‹å‚æ•°ï¼Œå°±å¯ä»¥é¿å…ä½¿ç”¨åå°„æ¥è·å–æ³›å‹ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">query</span><span class="hljs-params">()</span></span>: KtQueryChainWrapper {
    <span class="hljs-comment">// åœ¨ä½¿ç”¨äº†reified ç±»å‹å‚æ•°åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ T::class.java æ¥è·å–æ³›å‹ç±»å‹</span>
    <span class="hljs-keyword">return</span> KtQueryChainWrapper(baseMapper = <span class="hljs-keyword">this</span>, entityClass = T::<span class="hljs-keyword">class</span>.java)  
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº† reified ç±»å‹å‚æ•°åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ T::class.java æ¥è·å–æ³›å‹ç±»å‹ï¼Œè€Œä¸éœ€è¦é€šè¿‡åå°„æ¥è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜]]></title>    <link>https://juejin.cn/post/7582067084839665718</link>    <guid>https://juejin.cn/post/7582067084839665718</guid>    <pubDate>2025-12-10T12:00:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084839665718" data-draft-id="7582003642192068650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-12-10T12:00:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:00:59.000Z" title="Wed Dec 10 2025 12:00:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€æ¬¡ç”¨æˆ·è¯·æ±‚å¾€å¾€æ¨ªè·¨å¤šä¸ªæœåŠ¡ï¼Œæ’æŸ¥é—®é¢˜æ—¶æ—¥å¿—åˆ†æ•£éš¾ä»¥å…³è”ã€‚æœ¬æ–‡è¯¦ç»†è®²è§£ TraceId é€ä¼ çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé‡ç‚¹è§£é‡Šä¸ºä»€ä¹ˆæ™®é€š ThreadLocal ä¸å¤Ÿç”¨ã€InheritableThreadLocal åœ¨çº¿ç¨‹æ± åœºæ™¯ä¼šå¤±æ•ˆï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ TransmittableThreadLocalï¼ˆTTLï¼‰å®ç°å…¨åœºæ™¯çš„ TraceId æ— æŸä¼ é€’ã€‚æ–‡ç« åŒ…å«å®Œæ•´çš„ä»£ç å®ç°å’Œå¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•ã€‚</p>
<p><strong>é€‚åˆäººç¾¤ï¼š</strong> åç«¯å¼€å‘ã€å¾®æœåŠ¡æ¶æ„å¸ˆã€å¯¹åˆ†å¸ƒå¼è¿½è¸ªæ„Ÿå…´è¶£çš„æŠ€æœ¯äººå‘˜</p>
<p><strong>ä½ å°†å­¦åˆ°ï¼š</strong> ThreadLocal çš„ä¸‰ç§å®ç°æœºåˆ¶ã€TTL çš„å·¥ä½œåŸç†ã€Feign/RestTemplate æ‹¦æˆªå™¨é…ç½®ã€å¼‚æ­¥åœºæ™¯å¤„ç†æ–¹æ¡ˆ</p>
<hr/>
<h3 data-id="heading-2">å‰è¨€</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªç”¨æˆ·è¯·æ±‚å¾€å¾€è¦ç»è¿‡å¤šä¸ªæœåŠ¡æ‰èƒ½å®Œæˆã€‚å½“å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å„ä¸ªæœåŠ¡çš„æ—¥å¿—ä¸­æ¥å›ç¿»æ‰¾ï¼Œæ•ˆç‡æä½ã€‚TraceId å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹è€Œç”Ÿçš„ï¼Œå®ƒèƒ½æŠŠåŒä¸€æ¬¡è¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—ä¸²è”èµ·æ¥ã€‚</p>
<p>æœ¬æ–‡ä¼šè®²æ¸…æ¥š TraceId ä¼ é€’çš„æ ¸å¿ƒåŸç†ï¼Œé‡ç‚¹è§£é‡Šä¸ºä»€ä¹ˆæ™®é€šçš„ ThreadLocal ä¸å¤Ÿç”¨ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ TransmittableThreadLocal (TTL) è§£å†³æ‰€æœ‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">ä¸€ã€é—®é¢˜ï¼šå¾®æœåŠ¡æ—¥å¿—éš¾ä»¥è¿½è¸ª</h3>
<p>å‡è®¾ä½ çš„ç³»ç»Ÿæœ‰è¿™æ ·ä¸€ä¸ªè°ƒç”¨é“¾è·¯ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·ä¸‹å• â†’ ç”¨æˆ·æœåŠ¡ â†’ è®¢å•æœåŠ¡ â†’ åº“å­˜æœåŠ¡ â†’ æ”¯ä»˜æœåŠ¡
</code></pre>
<p>å½“ç”¨æˆ·åé¦ˆ"ä¸‹å•å¤±è´¥"æ—¶ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>æ‰“å¼€ç”¨æˆ·æœåŠ¡çš„æ—¥å¿—ï¼Œæœç´¢ç”¨æˆ·ID</li>
<li>æ‰“å¼€è®¢å•æœåŠ¡çš„æ—¥å¿—ï¼Œæ‰¾åˆ°ç›¸å…³è®°å½•</li>
<li>ç»§ç»­åœ¨åº“å­˜æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ä¸­ç¿»æ‰¾</li>
<li>å¯¹æ¯”æ—¶é—´æˆ³ï¼ŒçŒœæµ‹å“ªäº›æ—¥å¿—å±äºåŒä¸€æ¬¡è¯·æ±‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<h4 data-id="heading-4">å¼•å…¥ TraceId å</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·è¯·æ±‚] --&gt;|traceId: abc123| B[ç”¨æˆ·æœåŠ¡]
    B --&gt;|traceId: abc123| C[è®¢å•æœåŠ¡]
    C --&gt;|traceId: abc123| D[åº“å­˜æœåŠ¡]
    D --&gt;|traceId: abc123| E[æ”¯ä»˜æœåŠ¡]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fce4ec,stroke:#880e4f,stroke-width:2px
</code></pre>
<p>æ¯ä¸ªæœåŠ¡çš„æ—¥å¿—éƒ½å¸¦ä¸Šç›¸åŒçš„ traceIdï¼Œåªéœ€è¦åœ¨æ—¥å¿—ç³»ç»Ÿä¸­æœç´¢ <code>abc123</code>ï¼Œå°±èƒ½çœ‹åˆ°å®Œæ•´çš„è°ƒç”¨é“¾è·¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">10:30:15 <span class="hljs-section">[abc123]</span> ç”¨æˆ·æœåŠ¡ - ç”¨æˆ·1001ä¸‹å•
10:30:16 <span class="hljs-section">[abc123]</span> è®¢å•æœåŠ¡ - åˆ›å»ºè®¢å•æˆåŠŸ
10:30:17 <span class="hljs-section">[abc123]</span> åº“å­˜æœåŠ¡ - æ‰£å‡åº“å­˜å¤±è´¥  â† é—®é¢˜å®šä½ï¼
10:30:18 <span class="hljs-section">[abc123]</span> æ”¯ä»˜æœåŠ¡ - æœªæ”¶åˆ°è¯·æ±‚
</code></pre>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒæŒ‘æˆ˜ï¼šTraceId å¦‚ä½•ä¼ é€’ï¼Ÿ</h3>
<p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…å®ç°æœ‰ä¸‰ä¸ªéš¾ç‚¹ã€‚</p>
<h4 data-id="heading-6">æŒ‘æˆ˜1ï¼šåŒä¸€æœåŠ¡å†…å¦‚ä½•å…±äº« TraceIdï¼Ÿ</h4>
<p>åœ¨åŒä¸€ä¸ªæœåŠ¡é‡Œï¼Œä» Filter åˆ° Controller åˆ° Serviceï¼Œéƒ½è¦èƒ½æ‹¿åˆ° traceIdã€‚æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯ç”¨ ThreadLocalï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTraceId</span><span class="hljs-params">(String traceId)</span> {
        holder.set(traceId);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getTraceId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> holder.get();
    }
}
</code></pre>
<p>è¿™æ ·åœ¨ Filter é‡Œè®¾ç½®ï¼ŒController å’Œ Service å°±éƒ½èƒ½è·å–äº†ã€‚</p>
<h4 data-id="heading-7">æŒ‘æˆ˜2ï¼šæœåŠ¡é—´å¦‚ä½•ä¼ é€’ TraceIdï¼Ÿ</h4>
<p>HTTP è°ƒç”¨æ—¶ï¼Œéœ€è¦æŠŠ traceId æ”¾åˆ° Header é‡Œä¼ é€’ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as ç”¨æˆ·æœåŠ¡
    participant B as è®¢å•æœåŠ¡
    
    rect rgb(225, 245, 255)
    A-&gt;&gt;A: TraceContext.getTraceId()
    end
    
    rect rgb(255, 243, 224)
    A-&gt;&gt;B: HTTP Request&lt;br/&gt;Header: X-Trace-Id=abc123
    end
    
    rect rgb(243, 229, 245)
    B-&gt;&gt;B: ä» Header å–å‡º traceId
    B-&gt;&gt;B: TraceContext.setTraceId()
    end
</code></pre>
<p>è¿™éœ€è¦åœ¨ Feign æˆ– RestTemplate çš„æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨æ·»åŠ  Headerã€‚</p>
<h4 data-id="heading-8">æŒ‘æˆ˜3ï¼šå¼‚æ­¥åœºæ™¯å¦‚ä½•ä¼ é€’ï¼Ÿ</h4>
<p>è¿™æ˜¯æœ€éº»çƒ¦çš„ã€‚å¦‚æœä½ å†™äº†å¼‚æ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Async</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
    log.info(&amp;#<span class="hljs-number">34</span>;å‘é€é‚®ä»¶, traceId: {}&amp;#<span class="hljs-number">34</span>;, traceId);  <span class="hljs-comment">// traceId æ˜¯ nullï¼</span>
}
</code></pre>
<p>ä¸ºä»€ä¹ˆä¼šæ˜¯ nullï¼Ÿå› ä¸º ThreadLocal çš„å€¼æ— æ³•ä¼ é€’åˆ°æ–°çº¿ç¨‹ã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€ThreadLocal å®¶æ—çš„ä¸‰å…„å¼Ÿ</h3>
<p>è¦è§£å†³å¼‚æ­¥ä¼ é€’çš„é—®é¢˜ï¼Œéœ€è¦ç†è§£ ThreadLocal çš„ä¸‰ä¸ªå˜ç§ã€‚</p>
<h4 data-id="heading-10">1. ThreadLocalï¼šè€å¤§ï¼Œåªç®¡è‡ªå·±</h4>
<p>ThreadLocal åªèƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…å…±äº«æ•°æ®ï¼Œæ— æ³•è·¨çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

<span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
holder.set(&amp;#<span class="hljs-number">34</span>;abc123&amp;#<span class="hljs-number">34</span>;);
System.out.println(holder.get());  <span class="hljs-comment">// abc123</span>

<span class="hljs-comment">// æ–°çº¿ç¨‹</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// null</span>
}).start();
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong> å®Œå…¨æ— æ³•ä¼ é€’åˆ°å­çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-11">2. InheritableThreadLocalï¼šè€äºŒï¼Œèƒ½ä¼ ç»™å„¿å­</h4>
<p>InheritableThreadLocal åœ¨åˆ›å»ºçº¿ç¨‹æ—¶ä¼šå¤åˆ¶çˆ¶çº¿ç¨‹çš„å€¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">InheritableThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InheritableThreadLocal</span>&lt;&gt;();

<span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
holder.set(&amp;#<span class="hljs-number">34</span>;abc123&amp;#<span class="hljs-number">34</span>;);

<span class="hljs-comment">// æ–°çº¿ç¨‹ï¼ˆåˆ›å»ºæ—¶å¤åˆ¶ï¼‰</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// abc123ï¼Œèƒ½æ‹¿åˆ°äº†ï¼</span>
}).start();
</code></pre>
<p>çœ‹èµ·æ¥ä¸é”™ï¼Œä½†åœ¨çº¿ç¨‹æ± åœºæ™¯ä¸‹ä¼šå‡ºé—®é¢˜ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡æäº¤ä»»åŠ¡</span>
holder.set(&amp;#<span class="hljs-number">34</span>;trace1&amp;#<span class="hljs-number">34</span>;);
executor.submit(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// ä»»åŠ¡1çš„å€¼</span>
});

Thread.sleep(<span class="hljs-number">100</span>);

<span class="hljs-comment">// ç¬¬äºŒæ¬¡æäº¤ä»»åŠ¡ï¼ˆå¤ç”¨åŒä¸€ä¸ªçº¿ç¨‹ï¼‰</span>
holder.set(&amp;#<span class="hljs-number">34</span>;trace2&amp;#<span class="hljs-number">34</span>;);
executor.submit(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// è¿˜æ˜¯trace1 ä¸²äº†ï¼</span>
});
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong> InheritableThreadLocal åªåœ¨åˆ›å»ºçº¿ç¨‹æ—¶å¤åˆ¶ï¼Œçº¿ç¨‹æ± å¤ç”¨çº¿ç¨‹æ—¶ä¸ä¼šé‡æ–°å¤åˆ¶ã€‚</p>
<h4 data-id="heading-12">3. TransmittableThreadLocalï¼šè€ä¸‰ï¼Œæœ€é è°±</h4>
<p>TTL é€šè¿‡æ‹¦æˆªå™¨æ¨¡å¼ï¼Œåœ¨æäº¤ä»»åŠ¡æ—¶æ•è·å€¼ï¼Œæ‰§è¡Œå‰æ¢å¤å€¼ï¼Œæ‰§è¡Œåæ¸…ç†å€¼ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¸»çº¿ç¨‹: ttl.set'ä»»åŠ¡2çš„å€¼'] --&gt; B[æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ]
    B --&gt; C[æ•è·å¿«ç…§: 'ä»»åŠ¡2çš„å€¼']
    C --&gt; D[ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—]
    D --&gt; E[çº¿ç¨‹æ± çº¿ç¨‹å‡†å¤‡æ‰§è¡Œ]
    E --&gt; F[æ¢å¤å¿«ç…§åˆ°å½“å‰çº¿ç¨‹]
    F --&gt; G[æ‰§è¡Œä»»åŠ¡: getè·å–åˆ°'ä»»åŠ¡2çš„å€¼']
    G --&gt; H[æ¸…ç†çº¿ç¨‹çŠ¶æ€]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style F fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style G fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style H fill:#ffebee,stroke:#b71c1c,stroke-width:2px
</code></pre>
<p><strong>æ ¸å¿ƒåŸç†ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TtlRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map snapshot;  <span class="hljs-comment">// å¿«ç…§</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Runnable task;              <span class="hljs-comment">// åŸå§‹ä»»åŠ¡</span>
    
    <span class="hljs-comment">// æäº¤æ—¶ï¼šæ•è·</span>
    TtlRunnable(Runnable task) {
        <span class="hljs-built_in">this</span>.task = task;
        <span class="hljs-built_in">this</span>.snapshot = captureAllTtlValues();  <span class="hljs-comment">// æŠŠæ‰€æœ‰ TTL çš„å€¼å­˜ä¸‹æ¥</span>
    }
    
    <span class="hljs-comment">// æ‰§è¡Œæ—¶ï¼šæ¢å¤ + æ¸…ç†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Map</span> <span class="hljs-variable">backup</span> <span class="hljs-operator">=</span> restoreSnapshot(snapshot);  <span class="hljs-comment">// æ¢å¤å¿«ç…§</span>
        <span class="hljs-keyword">try</span> {
            task.run();  <span class="hljs-comment">// æ‰§è¡ŒçœŸæ­£çš„ä»»åŠ¡</span>
        } <span class="hljs-keyword">finally</span> {
            restoreBackup(backup);  <span class="hljs-comment">// è¿˜åŸçº¿ç¨‹åŸæ¥çš„çŠ¶æ€</span>
        }
    }
}
</code></pre>
<p>ä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è®¾ç½®ï¼šttl.set("ä»»åŠ¡2çš„å€¼")</li>
<li>æäº¤ä»»åŠ¡ï¼šexecutor.submit(task)
â†’ TtlRunnable ç«‹å³æ•è·å¿«ç…§: {"ä»»åŠ¡2çš„å€¼"}</li>
<li>çº¿ç¨‹æ± çº¿ç¨‹ï¼ˆå¯èƒ½æœ‰æ—§å€¼"ä»»åŠ¡1çš„å€¼"ï¼‰æ‰§è¡Œï¼š
â†’ å¤‡ä»½æ—§å€¼: {"ä»»åŠ¡1çš„å€¼"}
â†’ æ¢å¤å¿«ç…§: ttl.set("ä»»åŠ¡2çš„å€¼")
â†’ æ‰§è¡Œä»»åŠ¡: getè·å–åˆ°æ­£ç¡®çš„"ä»»åŠ¡2çš„å€¼"
â†’ è¿˜åŸæ—§å€¼: ttl.set("ä»»åŠ¡1çš„å€¼")</li>
</ol>
<p><strong>å…³é”®ç‚¹ï¼š</strong> æ¯æ¬¡æäº¤ä»»åŠ¡éƒ½ä¼šé‡æ–°æ•è·ï¼Œæ‰€ä»¥ä¸ä¼šä¸²ã€‚</p>
<h3 data-id="heading-13">å››ã€å®ç°æ–¹æ¡ˆ</h3>
<p>æœ‰äº† TTLï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªå®Œæ•´çš„ TraceId ä¼ é€’æ–¹æ¡ˆäº†ã€‚</p>
<h4 data-id="heading-14">0. Maven ä¾èµ–</h4>
<pre><code class="hljs language-java" lang="java">
    com.alibaba
    transmittable-thread-local
    <span class="hljs-number">2.14</span><span class="hljs-number">.3</span>

</code></pre>
<h4 data-id="heading-15">1. TraceContextï¼šä¸Šä¸‹æ–‡ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TRACE_ID_KEY</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;traceId&amp;#<span class="hljs-number">34</span>;;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">HEADER_NAME</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;X-Trace-Id&amp;#<span class="hljs-number">34</span>;;
    
    <span class="hljs-comment">// ä½¿ç”¨ TTL æ”¯æŒå¼‚æ­¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTraceId</span><span class="hljs-params">(String traceId)</span> {
        holder.set(traceId);           <span class="hljs-comment">// å­˜åˆ° TTL</span>
        MDC.put(TRACE_ID_KEY, traceId);  <span class="hljs-comment">// åŒæ­¥åˆ° MDCï¼ˆæ—¥å¿—ç”¨ï¼‰</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getTraceId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> holder.get();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        holder.remove();
        MDC.clear();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getHeaderName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> HEADER_NAME;
    }
}

</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦åŒæ—¶æ”¾ MDCï¼Ÿ</strong></p>
<p>MDCï¼ˆMapped Diagnostic Contextï¼‰æ˜¯ Logback/Log4j æä¾›çš„çº¿ç¨‹çº§ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œåº•å±‚åŸºäº ThreadLocal å®ç°ã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨æ—¥å¿—ä¸­è‡ªåŠ¨æ³¨å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>ThreadLocal</strong> æ˜¯ç»™ä»£ç ç”¨çš„ï¼Œé€šè¿‡ <code>TraceContext.getTraceId()</code> è·å–</li>
<li><strong>MDC</strong> æ˜¯ç»™æ—¥å¿—æ¡†æ¶ç”¨çš„ï¼Œlogback é…ç½® <code>%X{traceId}</code> åä¼šè‡ªåŠ¨ä» MDC å–å€¼</li>
</ul>
<p>è¿™æ ·æˆ‘ä»¬æ—¢å¯ä»¥åœ¨ä»£ç ä¸­è®¿é—® traceIdï¼Œåˆèƒ½è®©æ—¥å¿—è‡ªåŠ¨æ‰“å°å‡ºæ¥ã€‚</p>
<h4 data-id="heading-16">2. TraceFilterï¼šHTTP è¯·æ±‚å…¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(Ordered.HIGHEST_PRECEDENCE)</span>  <span class="hljs-comment">// æœ€é«˜ä¼˜å…ˆçº§ï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> {
        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> (HttpServletRequest) request;
        
        <span class="hljs-comment">// 1. å°è¯•ä» Header è·å–ï¼ˆä¸Šæ¸¸ä¼ é€’è¿‡æ¥çš„ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> req.getHeader(TraceContext.getHeaderName());
        
        <span class="hljs-comment">// 2. å¦‚æœæ²¡æœ‰ï¼Œç”Ÿæˆæ–°çš„ï¼ˆå½“å‰æœåŠ¡æ˜¯å…¥å£ï¼‰</span>
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span> || traceId.isEmpty()) {
            traceId = UUID.randomUUID().toString().replace(&amp;#<span class="hljs-number">34</span>;-&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;);
        }
        
        <span class="hljs-comment">// 3. è®¾ç½®åˆ°ä¸Šä¸‹æ–‡</span>
        TraceContext.setTraceId(traceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. ç»§ç»­æ‰§è¡Œ</span>
            chain.doFilter(request, response);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 5. è¯·æ±‚ç»“æŸåæ¸…ç†ï¼ˆé˜²æ­¢çº¿ç¨‹æ± å¤ç”¨æ—¶æ±¡æŸ“ï¼‰</span>
            TraceContext.clear();
        }
    }
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[HTTP è¯·æ±‚è¿›å…¥] --&gt; B{æ£€æŸ¥ Header}
    B --&gt;|æœ‰ traceId| C[ä½¿ç”¨ç°æœ‰ traceId]
    B --&gt;|æ—  traceId| D[ç”Ÿæˆæ–° traceId]
    C --&gt; E[TraceContext.setTraceId]
    D --&gt; E
    E --&gt; F[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
    F --&gt; G[finally æ¸…ç†]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style F fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style G fill:#ffebee,stroke:#b71c1c,stroke-width:2px
</code></pre>
<h4 data-id="heading-17">3. Feign æ‹¦æˆªå™¨ï¼šæœåŠ¡é—´ä¼ é€’</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RequestInterceptor <span class="hljs-title function_">traceInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> template -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
            <span class="hljs-keyword">if</span> (traceId != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// æ·»åŠ åˆ° HTTP Header</span>
                template.header(TraceContext.getHeaderName(), traceId);
            }
        };
    }
}
</code></pre>
<p>è¿™æ · Feign è°ƒç”¨æ—¶ä¼šè‡ªåŠ¨æŠŠ traceId åŠ åˆ° Header é‡Œã€‚</p>
<h4 data-id="heading-18">4. RestTemplate æ‹¦æˆªå™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        
        <span class="hljs-comment">// æ·»åŠ æ‹¦æˆªå™¨</span>
        restTemplate.setInterceptors(Collections.singletonList(
            (request, body, execution) -&gt; {
                <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
                <span class="hljs-keyword">if</span> (traceId != <span class="hljs-literal">null</span>) {
                    request.getHeaders().add(TraceContext.getHeaderName(), traceId);
                }
                <span class="hljs-keyword">return</span> execution.execute(request, body);
            }
        ));
        
        <span class="hljs-keyword">return</span> restTemplate;
    }
}
</code></pre>
<h4 data-id="heading-19">5. å¼‚æ­¥é…ç½®ï¼šæ”¯æŒ @Async</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">asyncExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">10</span>);
        executor.setMaxPoolSize(<span class="hljs-number">20</span>);
        executor.setThreadNamePrefix(&amp;#<span class="hljs-number">34</span>;async-&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ TTL åŒ…è£… Runnableï¼Œè‡ªåŠ¨é€ä¼  ThreadLocal å˜é‡</span>
        <span class="hljs-comment">// TtlRunnable.get(runnable) ä¼šæ•è·å½“å‰çº¿ç¨‹çš„ TTL å€¼ï¼Œå¹¶åœ¨æ‰§è¡Œæ—¶æ¢å¤</span>
        executor.setTaskDecorator(TtlRunnable::get);
        
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<h4 data-id="heading-20">6. æ—¥å¿—é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml">

    
        
            
            %d{HH:mm:ss.SSS} [%X{traceId}] %-5level %logger{36} - %msg%n
        
    
    
    
        
    

</code></pre>
<p><code>**è¯´æ˜ï¼š**</code>%X{traceId}<code>æ˜¯ MDC çš„å ä½ç¬¦è¯­æ³•ï¼Œå…¶ä¸­</code>traceId<code>å¿…é¡»å’Œä»£ç ä¸­</code>MDC.put("traceId", ...)` çš„ key ä¿æŒä¸€è‡´ã€‚</p>
<h3 data-id="heading-21">äº”ã€å®Œæ•´è°ƒç”¨é“¾è·¯</h3>
<p>æŠŠæ‰€æœ‰ç»„ä»¶ä¸²èµ·æ¥ï¼Œå®Œæ•´çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant Filter as TraceFilter
    participant UserSvc as UserController
    participant Feign as Feignæ‹¦æˆªå™¨
    participant OrderSvc as OrderService
    
    rect rgb(225, 245, 255)
    Note over Client,Filter: 1. è¯·æ±‚è¿›å…¥
    Client-&gt;&gt;Filter: HTTP è¯·æ±‚
    Filter-&gt;&gt;Filter: ç”Ÿæˆ traceId=abc123
    Filter-&gt;&gt;Filter: TraceContext.setTraceId()
    end
    
    rect rgb(255, 243, 224)
    Note over Filter,UserSvc: 2. ç”¨æˆ·æœåŠ¡å¤„ç†
    Filter-&gt;&gt;UserSvc: å¤„ç†è¯·æ±‚
    UserSvc-&gt;&gt;UserSvc: log.info() [abc123]
    end
    
    rect rgb(243, 229, 245)
    Note over UserSvc,OrderSvc: 3. è°ƒç”¨è®¢å•æœåŠ¡
    UserSvc-&gt;&gt;Feign: è°ƒç”¨è®¢å•æœåŠ¡
    Feign-&gt;&gt;Feign: TraceContext.getTraceId()
    Feign-&gt;&gt;OrderSvc: HTTP Request&lt;br/&gt;Header: X-Trace-Id=abc123
    end
    
    rect rgb(232, 245, 233)
    Note over OrderSvc: 4. è®¢å•æœåŠ¡å¤„ç†
    OrderSvc-&gt;&gt;OrderSvc: TraceFilter æ¥æ”¶ traceId
    OrderSvc-&gt;&gt;OrderSvc: log.info() [abc123]
    OrderSvc--&gt;&gt;UserSvc: è¿”å›ç»“æœ
    end
    
    rect rgb(255, 235, 238)
    Note over UserSvc,Filter: 5. æ¸…ç†è¿”å›
    UserSvc--&gt;&gt;Filter: è¿”å›å“åº”
    Filter-&gt;&gt;Filter: TraceContext.clear()
    Filter--&gt;&gt;Client: HTTP å“åº”
    end
</code></pre>
<h3 data-id="heading-22">å…­ã€å®é™…æ•ˆæœ</h3>
<h4 data-id="heading-23">æ—¥å¿—è¾“å‡º</h4>
<p><strong>ç”¨æˆ·æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:15.123 <span class="hljs-section">[abc123]</span> INFO  UserController - æŸ¥è¯¢ç”¨æˆ·è®¢å•, userId: 1001
10:30:15.150 <span class="hljs-section">[abc123]</span> INFO  UserService - è°ƒç”¨è®¢å•æœåŠ¡
</code></pre>
<p><strong>è®¢å•æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:15.180 <span class="hljs-section">[abc123]</span> INFO  OrderController - æ”¶åˆ°è®¢å•æŸ¥è¯¢è¯·æ±‚, userId: 1001
10:30:15.190 <span class="hljs-section">[abc123]</span> INFO  OrderService - è¿”å›2ä¸ªè®¢å•
</code></pre>
<p>åŒä¸€æ¬¡è¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—ï¼ŒtraceId éƒ½æ˜¯ <code>abc123</code>ï¼Œåœ¨ ELK æˆ–ä»»ä½•æ—¥å¿—ç³»ç»Ÿä¸­æœç´¢è¿™ä¸ª IDï¼Œå°±èƒ½çœ‹åˆ°å®Œæ•´é“¾è·¯ã€‚</p>
<h4 data-id="heading-24">å¼‚æ­¥åœºæ™¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping(&amp;#34;/test-async&amp;#34;)</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">testAsync</span><span class="hljs-params">()</span> {
    log.info(&amp;#<span class="hljs-number">34</span>;ä¸»çº¿ç¨‹å¤„ç†&amp;#<span class="hljs-number">34</span>;);           <span class="hljs-comment">// [abc123]</span>
    asyncService.sendEmail();        
    <span class="hljs-keyword">return</span> &amp;#<span class="hljs-number">34</span>;success&amp;#<span class="hljs-number">34</span>;;
}

<span class="hljs-meta">@Async(&amp;#34;asyncExecutor&amp;#34;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> {
    log.info(&amp;#<span class="hljs-number">34</span>;å¼‚æ­¥å‘é€é‚®ä»¶&amp;#<span class="hljs-number">34</span>;);         <span class="hljs-comment">// [abc123]ï¼Œä¸ä¼šä¸¢ï¼</span>
}
</code></pre>
<p><strong>æ—¥å¿—è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:20.100 <span class="hljs-section">[abc123]</span> INFO  Controller - ä¸»çº¿ç¨‹å¤„ç†
10:30:20.120 <span class="hljs-section">[abc123]</span> INFO  AsyncService - å¼‚æ­¥å‘é€é‚®ä»¶
</code></pre>
<h3 data-id="heading-25">ä¸ƒã€å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-26">é—®é¢˜1ï¼šæ—¥å¿—é‡Œ traceId æ˜¯ç©ºçš„</h4>
<p><strong>åŸå› ï¼š</strong> Filter çš„ä¼˜å…ˆçº§ä¸å¤Ÿé«˜ï¼Œæˆ–è€… MDC çš„ key ä¸å¯¹ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ul>
<li>ç¡®ä¿ Filter åŠ äº† <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code></li>
<li>æ£€æŸ¥ logback é…ç½®çš„ <code>%X{traceId}</code> æ˜¯å¦å’Œä»£ç é‡Œçš„ key ä¸€è‡´</li>
</ul>
<h4 data-id="heading-27">é—®é¢˜2ï¼šå¼‚æ­¥ä»»åŠ¡é‡Œ traceId æ˜¯ null</h4>
<p><strong>åŸå› ï¼š</strong> çº¿ç¨‹æ± æ²¡æœ‰ç”¨ TTL åŒ…è£…ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">executor.setTaskDecorator(TtlRunnable::get);
</code></pre>
<h4 data-id="heading-28">é—®é¢˜3ï¼šè·¨æœåŠ¡è°ƒç”¨ traceId ä¸ä¸€è‡´</h4>
<p><strong>åŸå› ï¼š</strong> Feign æˆ– RestTemplate æ‹¦æˆªå™¨æ²¡ç”Ÿæ•ˆã€‚</p>
<p><strong>æ’æŸ¥ï¼š</strong></p>
<ul>
<li>æ£€æŸ¥ FeignConfig æ˜¯å¦è¢« Spring æ‰«æåˆ°</li>
<li>åœ¨æ‹¦æˆªå™¨é‡ŒåŠ  logï¼Œçœ‹æ˜¯å¦æ‰§è¡Œäº†</li>
<li>ç¡®è®¤æ‹¦æˆªå™¨é…ç½®ä¸º <code>@Bean</code></li>
</ul>
<h4 data-id="heading-29">é—®é¢˜4ï¼šçº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ traceId ä¸²å·</h4>
<p><strong>åŸå› ï¼š</strong> Filter é‡Œæ²¡æœ‰ finally æ¸…ç†ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    chain.doFilter(request, response);
} <span class="hljs-keyword">finally</span> {
    TraceContext.clear();  <span class="hljs-comment">// å¿…é¡»æ¸…ç†</span>
}
</code></pre>
<h3 data-id="heading-30">å…«ã€æ€§èƒ½å½±å“</h3>
<p>å®æµ‹æ•°æ®ï¼ˆåŸºäº Spring Boot 2.7 + JDK 17ï¼‰ï¼š</p>

































<table><thead><tr><th>æ“ä½œ</th><th>è€—æ—¶</th></tr></thead><tbody><tr><td>TraceId ç”Ÿæˆï¼ˆUUIDï¼‰</td><td>0.001ms</td></tr><tr><td>ThreadLocal.set()</td><td>0.0001ms</td></tr><tr><td>MDC.put()</td><td>0.0002ms</td></tr><tr><td>Filter æ‹¦æˆª</td><td>0.5ms</td></tr><tr><td>Feign æ‹¦æˆªå™¨</td><td>0.1ms</td></tr><tr><td>TTL è£…é¥°</td><td>0.01ms</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong> æ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ˆæ€»è®¡ &lt; 1msï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-31">ä¹ã€é…ç½®æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ¸…å•æ£€æŸ¥é…ç½®æ˜¯å¦å®Œæ•´ï¼š</p>
<h4 data-id="heading-32">åŸºç¡€é…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼•å…¥ TTL ä¾èµ–ï¼ˆ<code>transmittable-thread-local</code>ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceContext ä½¿ç”¨ <code>TransmittableThreadLocal</code> è€Œéæ™®é€š <code>ThreadLocal</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceContext.setTraceId() åŒæ—¶æ›´æ–° MDC</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceFilter è®¾ç½®äº† <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceFilter çš„ finally å—è°ƒç”¨äº† <code>TraceContext.clear()</code></li>
</ul>
<h4 data-id="heading-33">æœåŠ¡é—´è°ƒç”¨</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> FeignConfig é…ç½®äº† <code>RequestInterceptor</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> RestTemplate æ·»åŠ äº†æ‹¦æˆªå™¨</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Header åç§°ç»Ÿä¸€ä¸º <code>X-Trace-Id</code>ï¼ˆæˆ–è‡ªå®šä¹‰åç§°ï¼‰</li>
</ul>
<h4 data-id="heading-34">å¼‚æ­¥åœºæ™¯</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> çº¿ç¨‹æ± é…ç½®äº† <code>TaskDecorator(TtlRunnable::get)</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> @Async ä½¿ç”¨äº†é…ç½®å¥½çš„çº¿ç¨‹æ±  Bean</li>
</ul>
<h4 data-id="heading-35">æ—¥å¿—é…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> logback.xml ä½¿ç”¨äº† <code>%X{traceId}</code> å ä½ç¬¦</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> MDC çš„ key ä¸ logback é…ç½®ä¸€è‡´</li>
</ul>
<hr/>
<h3 data-id="heading-36">åã€æ€»ç»“</h3>
<h4 data-id="heading-37">æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>ThreadLocal åªèƒ½åœ¨åŒä¸€çº¿ç¨‹å†…å…±äº«</strong>ï¼Œæ— æ³•è·¨çº¿ç¨‹</li>
<li><strong>InheritableThreadLocal æ”¯æŒçˆ¶å­çº¿ç¨‹</strong>ï¼Œä½†çº¿ç¨‹æ± ä¼šå¤ç”¨å¯¼è‡´å¤±æ•ˆ</li>
<li><strong>TransmittableThreadLocal é€šè¿‡æ•è·-æ¢å¤-æ¸…ç†æœºåˆ¶</strong>ï¼Œå®Œç¾æ”¯æŒæ‰€æœ‰åœºæ™¯</li>
<li><strong>MDC æ˜¯ ThreadLocal çš„å°è£…</strong>ï¼Œä¸“é—¨ç»™æ—¥å¿—æ¡†æ¶ç”¨</li>
<li><strong>Filter å¿…é¡»è®¾ç½®æœ€é«˜ä¼˜å…ˆçº§</strong>ï¼Œä¿è¯ç¬¬ä¸€ä¸ªæ‰§è¡Œ</li>
<li><strong>finally å—å¿…é¡»æ¸…ç†</strong>ï¼Œé˜²æ­¢çº¿ç¨‹æ± å¤ç”¨æ±¡æŸ“</li>
</ol>
<h4 data-id="heading-38">æœ€ä½³å®è·µ</h4>
<ol>
<li>ä½¿ç”¨ TTL ä½œä¸ºåº•å±‚å­˜å‚¨</li>
<li>åŒæ—¶æ”¾å…¥ MDCï¼Œæ–¹ä¾¿æ—¥å¿—</li>
<li>Filter ç”¨æœ€é«˜ä¼˜å…ˆçº§</li>
<li>å¼‚æ­¥çº¿ç¨‹æ± ç”¨ TTL åŒ…è£…</li>
<li>æ‹¦æˆªå™¨ç»Ÿä¸€æ·»åŠ  Header</li>
<li>åŠ¡å¿…åœ¨ finally æ¸…ç†</li>
</ol>
<h4 data-id="heading-39">æ‰©å±•æ–¹å‘</h4>
<p>å¦‚æœä½ çš„é¡¹ç›®è¿˜æœ‰å…¶ä»–åœºæ™¯ï¼š</p>
<ul>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šåœ¨ Message Header é‡Œä¼ é€’ traceId</li>
<li><strong>Dubbo RPC</strong>ï¼šåœ¨ RpcContext é‡Œä¼ é€’</li>
<li><strong>å®šæ—¶ä»»åŠ¡</strong>ï¼šç”Ÿæˆæ–°çš„ traceId</li>
<li><strong>Gateway</strong>ï¼šç»Ÿä¸€åœ¨ç½‘å…³ç”Ÿæˆ traceId</li>
</ul>
<h4 data-id="heading-40">è¿›ä¸€æ­¥å­¦ä¹ </h4>
<p>æŒæ¡äº†æœ¬æ–‡å†…å®¹åï¼Œå¯ä»¥ç»§ç»­äº†è§£ï¼š</p>
<ul>
<li><strong>SkyWalking</strong>ï¼šè‡ªåŠ¨åŒ–çš„é“¾è·¯è¿½è¸ªï¼Œé€šè¿‡å­—èŠ‚ç å¢å¼ºå®ç°é›¶ä¾µå…¥</li>
<li><strong>Zipkin</strong>ï¼šåˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼Œå¯è§†åŒ–è°ƒç”¨é“¾è·¯</li>
<li><strong>OpenTelemetry</strong>ï¼šæ–°ä¸€ä»£æ ‡å‡†ï¼Œè·¨è¯­è¨€ç»Ÿä¸€</li>
</ul>
<h3 data-id="heading-41">å†™åœ¨æœ€å</h3>
<p>TraceId ä¼ é€’çœ‹ä¼¼ç®€å•ï¼Œä½†è¦åšåˆ°é›¶ä¾µå…¥ã€å…¨åœºæ™¯è¦†ç›–ï¼Œè¿˜æ˜¯æœ‰ä¸å°‘ç»†èŠ‚çš„ã€‚ç†è§£äº† ThreadLocal å®¶æ—çš„ä¸‰å…„å¼Ÿï¼Œç‰¹åˆ«æ˜¯ TTL çš„æ•è·-æ¢å¤-æ¸…ç†æœºåˆ¶ï¼Œå°±èƒ½åº”å¯¹å„ç§å¤æ‚åœºæ™¯ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•ææ‡‚ TraceId ä¼ é€’çš„åŸç†å’Œå®ç°ã€‚</p>
<hr/>
<h4 data-id="heading-42">äº’åŠ¨äº¤æµ</h4>
<p>å¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä¹Ÿé‡åˆ°è¿‡ï¼š</p>
<ul>
<li>TraceId åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­ä¸¢å¤±</li>
<li>çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ traceId ä¸²å·</li>
<li>è·¨æœåŠ¡è°ƒç”¨ traceId æ–­å¼€</li>
</ul>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è§£å†³æ–¹æ¡ˆï¼è¿™å¥—æ–¹æ¡ˆå·²åœ¨å¤šä¸ªç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚</p>
<p><strong>è§‰å¾—æœ‰å¸®åŠ©ï¼Ÿåˆ«å¿˜äº†ç‚¹èµã€æ”¶è—ï¼Œæˆ–è€…åˆ†äº«ç»™æ­£åœ¨è¸©å‘çš„åŒäº‹</strong> ğŸ‘</p>
<hr/>
<h4 data-id="heading-43">å¸¸è§é—®é¢˜é€ŸæŸ¥è¡¨</h4>






























<table><thead><tr><th>é—®é¢˜ç°è±¡</th><th>å¯èƒ½åŸå› </th><th>æ’æŸ¥æ–¹å‘</th></tr></thead><tbody><tr><td>æ—¥å¿—ä¸­ traceId ä¸ºç©º</td><td>Filter ä¼˜å…ˆçº§ä½æˆ– MDC key ä¸åŒ¹é…</td><td>æ£€æŸ¥ @Order å’Œ %X{traceId}</td></tr><tr><td>å¼‚æ­¥ä»»åŠ¡ traceId ä¸¢å¤±</td><td>çº¿ç¨‹æ± æœª TTL åŒ…è£…</td><td>æ£€æŸ¥ TaskDecorator é…ç½®</td></tr><tr><td>è·¨æœåŠ¡ traceId æ–­å¼€</td><td>æ‹¦æˆªå™¨æœªç”Ÿæ•ˆ</td><td>æ£€æŸ¥ @Bean å’Œç»„ä»¶æ‰«æ</td></tr><tr><td>çº¿ç¨‹æ±  traceId ä¸²å·</td><td>æœªæ¸…ç† ThreadLocal</td><td>æ£€æŸ¥ finally å—</td></tr></tbody></table>
<hr/>
<p><strong>å®Œæ•´ä»£ç ç¤ºä¾‹å·²å¼€æºï¼Œæ¬¢è¿å‚è€ƒå­¦ä¹ ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰]]></title>    <link>https://juejin.cn/post/7581893894176178186</link>    <guid>https://juejin.cn/post/7581893894176178186</guid>    <pubDate>2025-12-10T12:26:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581893894176178186" data-draft-id="7582048028392603698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-10T12:26:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ ¹æ ¹"/> <meta itemprop="url" content="https://juejin.cn/user/555679166786139"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/555679166786139/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ ¹æ ¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:26:36.000Z" title="Wed Dec 10 2025 12:26:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼ä»£ç†è®¾è®¡æ¨¡å¼æ˜¯ Java ä¸­æå…·å®ç”¨ä»·å€¼çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡"å¼•å…¥ä¸­é—´ä»£ç†å¯¹è±¡"çš„æ–¹å¼ï¼Œåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹å®ç°åŠŸèƒ½å¢å¼ºï¼Œè¿™åœ¨æ—¥å¿—è®°å½•ã€äº‹åŠ¡æ§åˆ¶ã€æƒé™æ ¡éªŒç­‰åœºæ™¯ä¸­ä¸å¯æˆ–ç¼ºã€‚å¾ˆå¤šå¼€å‘è€…å®¹æ˜“æ··æ·†é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„é€‚ç”¨åœºæ™¯ï¼Œä¹Ÿä¸æ¸…æ¥šåå°„å¦‚ä½•æ”¯æ’‘åŠ¨æ€ä»£ç†çš„å®ç°ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¼šä»ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³å‡ºå‘ï¼Œæ‹†è§£é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Œæ·±å…¥è®²è§£åŸºäºåå°„çš„ JDK åŠ¨æ€ä»£ç†å®ç°ç»†èŠ‚ï¼Œå¸®ä½ å½»åº•åƒé€ä»£ç†è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»£ç†æ¨¡å¼æ ¸å¿ƒè®¤çŸ¥ï¼šå…ˆææ‡‚"ä¸ºä»€ä¹ˆéœ€è¦ä»£ç†"</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</h3>
<p>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰æ˜¯ç»“æ„å‹è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ä¸ºç›®æ ‡å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶åœ¨è®¿é—®å‰åæ·»åŠ é¢å¤–åŠŸèƒ½</strong>ã€‚å°±åƒç”Ÿæ´»ä¸­çš„æ˜æ˜Ÿï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸ç›´æ¥ä¸èŠ‚ç›®ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡ç»çºªäººï¼ˆä»£ç†å¯¹è±¡ï¼‰å®Œæˆè®®ä»·ã€å‡†å¤‡ç­‰æ“ä½œã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œä»£ç†æ¨¡å¼åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š</p>
<ul>
<li><strong>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šè¢«ä»£ç†çš„æ ¸å¿ƒå¯¹è±¡ï¼Œè´Ÿè´£å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ˜æ˜Ÿå»å®ç°â€œè¡¨æ¼”å†…å®¹â€ï¼‰ï¼›</li>
<li><strong>ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¹å¤–æä¾›ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œè´Ÿè´£æ·»åŠ é¢å¤–åŠŸèƒ½å¹¶è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼ˆå¦‚ç»çºªäººå’ŒèŠ‚ç›®è°ˆé’±ï¼Œåšè¡¨æ¼”å‰çš„å‡†å¤‡ï¼‰ï¼›</li>
<li><strong>æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡å…±åŒå®ç°çš„æ¥å£ï¼Œå®šä¹‰æ ¸å¿ƒä¸šåŠ¡æ–¹æ³•ï¼ˆå¦‚â€œè¡¨æ¼”â€ï¼‰ï¼Œä¿è¯ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ¨¡å¼ï¼Ÿæ ¸å¿ƒä»·å€¼</h3>
<p>ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼æ˜¯"è§£è€¦æ ¸å¿ƒé€»è¾‘ä¸é™„åŠ åŠŸèƒ½"ï¼Œå…·ä½“ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>åŠŸèƒ½å¢å¼º</strong>ï¼šåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹ï¼Œä¸ºç›®æ ‡æ–¹æ³•æ·»åŠ æ—¥å¿—ã€è®¡æ—¶ã€æƒé™æ ¡éªŒç­‰é™„åŠ åŠŸèƒ½ï¼ˆç¬¦åˆ"å¼€é—­åŸåˆ™"ï¼‰ï¼›</li>
<li><strong>æ§åˆ¶è®¿é—®</strong>ï¼šä»£ç†å¯¹è±¡å¯æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®æ—¶æœºã€æƒé™ï¼Œæ¯”å¦‚æ‹’ç»æœªç™»å½•ç”¨æˆ·è°ƒç”¨æ ¸å¿ƒæ–¹æ³•ï¼›</li>
<li><strong>éšè—ç»†èŠ‚</strong>ï¼šä»£ç†å¯¹è±¡å¯å°è£…ç›®æ ‡å¯¹è±¡çš„å¤æ‚åˆ›å»ºè¿‡ç¨‹ï¼ˆå¦‚è¿œç¨‹æœåŠ¡è°ƒç”¨çš„è¿æ¥å»ºç«‹ï¼‰ï¼Œå®¢æˆ·ç«¯åªéœ€ä¸ä»£ç†äº¤äº’ã€‚</li>
</ol>
<p>å…³é”®åœºæ™¯ï¼šSpring AOP çš„æ ¸å¿ƒå°±æ˜¯åŠ¨æ€ä»£ç†ï¼Œäº‹åŠ¡ç®¡ç†ã€æ—¥å¿—åˆ‡é¢ç­‰éƒ½æ˜¯é€šè¿‡ä»£ç†å®ç°ï¼›RPC æ¡†æ¶ä¸­ï¼Œè¿œç¨‹æœåŠ¡çš„æœ¬åœ°ä»£ç†ä¹Ÿä¾èµ–æ­¤æ¨¡å¼ã€‚</p>
<h3 data-id="heading-3">1.3 ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼šé™æ€ vs åŠ¨æ€</h3>
<p>æ ¹æ®ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œä»£ç†æ¨¡å¼åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸¤ç±»ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äº"ä»£ç†ç±»æ˜¯å¦åœ¨ç¼–è¯‘æœŸç”Ÿæˆ"ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>é™æ€ä»£ç†</th><th>åŠ¨æ€ä»£ç†</th><th/></tr></thead><tbody><tr><td>ä»£ç†ç±»ç”Ÿæˆæ—¶æœº</td><td>ç¼–è¯‘æœŸæ‰‹åŠ¨ç¼–å†™æˆ–é€šè¿‡å·¥å…·ç”Ÿæˆ</td><td>è¿è¡Œæ—¶é€šè¿‡åå°„æˆ–å­—èŠ‚ç æŠ€æœ¯åŠ¨æ€ç”Ÿæˆ</td><td/></tr><tr><td>ä»£ç çµæ´»æ€§</td><td>ä½ï¼Œä¸€ä¸ªä»£ç†ç±»é€šå¸¸å¯¹åº”ä¸€ä¸ªç›®æ ‡ç±»</td><td>é«˜ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å¯ä»£ç†å¤šä¸ªç›®æ ‡ç±»</td><td/></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>é«˜ï¼Œç›®æ ‡ç±»æ¥å£ä¿®æ”¹æ—¶éœ€åŒæ­¥ä¿®æ”¹ä»£ç†ç±»</td><td>ä½ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ä»£ç†ç±»ä»£ç </td><td/></tr><tr><td>æ ¸å¿ƒæŠ€æœ¯</td><td>é¢å‘æ¥å£ç¼–ç¨‹</td><td>åå°„ï¼ˆJDK ä»£ç†ï¼‰ã€å­—èŠ‚ç ä¿®æ”¹ï¼ˆCGLIBï¼‰</td><td/></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€é™æ€ä»£ç†ï¼šå…¥é—¨çº§å®ç°ï¼Œç†è§£æ ¸å¿ƒæµç¨‹</h2>
<p>é™æ€ä»£ç†æ˜¯ä»£ç†æ¨¡å¼çš„åŸºç¡€å®ç°ï¼Œä»£ç†ç±»åœ¨ç¼–è¯‘æœŸå°±å·²ç¡®å®šï¼Œé€‚åˆç®€å•åœºæ™¯ã€‚ä¸‹é¢ä»¥"æ˜æ˜Ÿè¡¨æ¼”"ä¸ºä¾‹ï¼Œå®Œæ•´å®ç°é™æ€ä»£ç†ã€‚</p>
<h3 data-id="heading-5">2.1 å®ç°æ­¥éª¤ï¼šä¸‰æ­¥å®Œæˆé™æ€ä»£ç†</h3>
<h4 data-id="heading-6">2.1.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šç»Ÿä¸€ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡çš„æ–¹æ³•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Star</span> {
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span>;

}
</code></pre>
<h4 data-id="heading-7">2.1.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXXStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨å”±æ­Œ&amp;#<span class="hljs-number">34</span>;);
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨è·³èˆ&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<h4 data-id="heading-8">2.1.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JJRProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">//ä»£ç†ç±»è¦æ±‚ï¼šå®šä¹‰ç›®æ ‡å¯¹è±¡æˆå‘˜å˜é‡</span>
    <span class="hljs-keyword">private</span> Star star;
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">//è®©ç›®æ ‡å¯¹è±¡å»å”±æ­Œ</span>
        star.sing();
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">//è®©ç›®æ ‡å¯¹è±¡å»è·³èˆ</span>
        star.dance();
    }
}
</code></pre>
<h4 data-id="heading-9">2.1.4 é™æ€ä»£ç†æµ‹è¯•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// æµ‹è¯•ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šåˆ›å»ºç›®æ ‡ã€ä»£ç†å¯¹è±¡å®Œæˆå…·ä½“åŠŸèƒ½è°ƒç”¨</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">xxxStar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XXXStar</span>();

        <span class="hljs-comment">//2.åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">JJRProxy</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JJRProxy</span>(xxxStar);

        <span class="hljs-comment">//3.æ‰§è¡Œä»£ç†å¯¹è±¡æ–¹æ³•</span>
        proxy.sing();
        proxy.dance();
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±
XXXåœ¨å”±æ­Œ
ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±
XXXåœ¨è·³èˆ
</code></pre>
<h3 data-id="heading-10">2.2 é™æ€ä»£ç†æ ¸å¿ƒæ€»ç»“ï¼š</h3>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— éœ€ä¾èµ–å¤æ‚æŠ€æœ¯ï¼›</li>
<li>ç¼ºç‚¹ï¼š<strong>ä»£ç å†—ä½™</strong>ï¼ˆæ¯ä¸ªç›®æ ‡ç±»éœ€å¯¹åº”ä¸€ä¸ªä»£ç†ç±»ï¼‰ã€<strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼ˆæ¥å£æ–°å¢æ–¹æ³•æ—¶ï¼Œç›®æ ‡ç±»å’Œä»£ç†ç±»éœ€åŒæ­¥ä¿®æ”¹ï¼‰ã€‚</li>
</ul>
<p>é™æ€ä»£ç†çš„å±€é™æ€§ï¼šå½“ç³»ç»Ÿä¸­æœ‰ 100 ä¸ªæœåŠ¡ç±»éœ€è¦æ·»åŠ æ—¥å¿—åŠŸèƒ½æ—¶ï¼Œå°±éœ€è¦ç¼–å†™ 100 ä¸ªä»£ç†ç±»ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆ"é«˜å†…èšä½è€¦åˆ"çš„è®¾è®¡åŸåˆ™â€”â€”åŠ¨æ€ä»£ç†æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚</p>
<h2 data-id="heading-11">ä¸‰ã€åŠ¨æ€ä»£ç†ï¼šåå°„é©±åŠ¨ï¼Œå®ç°"ä¸€ä»£ç†å¤šç”¨"</h2>
<p>åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯"è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»"ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç†ä»£ç ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å°±èƒ½ä¸ºå¤šä¸ªç›®æ ‡ç±»æä¾›å¢å¼ºåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-12">3.1 JDK åŠ¨æ€ä»£ç†ï¼šåŸºäºåå°„çš„æ ¸å¿ƒå®ç°</h3>
<p>JDK åŠ¨æ€ä»£ç†æ˜¯ Java åŸç”Ÿæ”¯æŒçš„ä»£ç†æ–¹å¼ï¼Œæ ¸å¿ƒä¾èµ– <code>java.lang.reflect.Proxy</code> ç±»å’Œ <code>java.lang.reflect.InvocationHandler</code> æ¥å£ï¼Œ<strong>å¿…é¡»åŸºäºæ¥å£å®ç°</strong>ã€‚</p>
<h4 data-id="heading-13">3.1.1 æ ¸å¿ƒåŸç†</h4>
<ol>
<li>å®¢æˆ·ç«¯è°ƒç”¨ <code>Proxy.newProxyInstance()</code> æ–¹æ³•ï¼Œä¼ å…¥ç±»åŠ è½½å™¨ã€ç›®æ ‡æ¥å£æ•°ç»„å’Œä»£ç†å¤„ç†å™¨ï¼›</li>
<li>JVM åœ¨è¿è¡Œæ—¶åŸºäºç›®æ ‡æ¥å£åŠ¨æ€ç”Ÿæˆä»£ç†ç±»çš„å­—èŠ‚ç ï¼Œå¹¶åŠ è½½ä¸º Class å¯¹è±¡ï¼›</li>
<li>ä»£ç†ç±»å®ä¾‹åŒ–æ—¶ï¼Œå°†ä»£ç†å¤„ç†å™¨ä¼ å…¥ï¼Œå½“å®¢æˆ·ç«¯è°ƒç”¨ä»£ç†æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘å¤„ç†å™¨çš„ <code>invoke()</code> æ–¹æ³•ï¼›</li>
<li>åœ¨ <code>invoke()</code> æ–¹æ³•ä¸­ï¼Œé€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå¹¶æ·»åŠ é™„åŠ åŠŸèƒ½ã€‚</li>
</ol>
<h4 data-id="heading-14">3.1.2 jdkåŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡è¯­æ³•</h4>
<p>ç±»ï¼šjava.lang.reflect.Proxyç±»</p>
<p>æ–¹æ³•ï¼š  public static Object newProxyInstance(ClassLoader loader, Class[] interfaces, InvocationHandler h)</p>
<ul>
<li>å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼ˆæ¨èä½¿ç”¨ç›®æ ‡å¯¹è±¡ç±»åŠ è½½å™¨ï¼‰ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»ï¼ˆç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼‰</li>
<li>å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•ï¼ˆè¦æ±‚ä¸ç›®æ ‡ç±»å®ç°ä¸€æ ·çš„æ¥å£ï¼‰</li>
<li>å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…ï¼ˆä»£ç†è¦åšçš„äº‹æƒ…ï¼šè‡ªå·±çš„ä»£ç†èŒè´£å’Œè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼‰</li>
</ul>
<h3 data-id="heading-15">3.2 å®ç°æ­¥éª¤ï¼šä¸‰æ­¥å®ŒæˆåŠ¨æ€ä»£ç†</h3>
<p>ä¸‹é¢ä»¥"æ˜æ˜Ÿè¡¨æ¼”"ä¸ºä¾‹ï¼Œå®Œæ•´å®ç°é™æ€ä»£ç†ã€‚</p>
<h4 data-id="heading-16">3.2.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šåŒé™æ€ä»£ç†</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Star</span> {
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span>;

}
</code></pre>
<h4 data-id="heading-17">3.2.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šåŒé™æ€ä»£ç†</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXXStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨å”±æ­Œ&amp;#<span class="hljs-number">34</span>;);
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨è·³èˆ&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<h4 data-id="heading-18">3.2.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šåˆ›å»ºç›®æ ‡ã€ä»£ç†å¯¹è±¡å®Œæˆå…·ä½“åŠŸèƒ½è°ƒç”¨</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">xxxStar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XXXStar</span>();

        <span class="hljs-comment">//2.åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (Star) Proxy.newProxyInstance(
                xxxStar.getClass().getClassLoader(),
                xxxStar.getClass().getInterfaces(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
                        <span class="hljs-comment">//åœ¨è¿™é‡Œå®Œæˆä»£ç†ç±»è¦åšçš„äº‹æƒ…</span>
                        <span class="hljs-comment">//å‚æ•°1ï¼šproxyï¼Œå°±æ˜¯ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼Œè¿™é‡Œä¸éœ€è¦ã€‚</span>
                        <span class="hljs-comment">//å‚æ•°2ï¼šmethodï¼Œæ˜¯åå°„æ–¹æ³•å¯¹è±¡ï¼ˆæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå…·ä½“æ˜¯å“ªä¸€ä¸ªç”±å¤–éƒ¨è°ƒç”¨å†³å®šï¼Œå¤–éƒ¨ä»£ç†å¯¹è±¡è°ƒç”¨sing()ï¼ŒMethodå°±æ˜¯sing()ï¼‰</span>
                        <span class="hljs-comment">//å‚æ•°3ï¼šargsï¼Œè°ƒç”¨æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼ˆå¤–éƒ¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•(å‚æ•°)ï¼Œä¼ å…¥å‚æ•°æ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆï¼‰</span>

                        <span class="hljs-comment">//ä»£ç†å¯¹è±¡éœ€è¦åšçš„èŒè´£</span>
                        <span class="hljs-keyword">if</span> (method.getName().equals(&amp;#<span class="hljs-number">34</span>;sing&amp;#<span class="hljs-number">34</span>;)) {
                            System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method.getName().equals(&amp;#<span class="hljs-number">34</span>;dance&amp;#<span class="hljs-number">34</span>;)) {
                            System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
                        }

                        <span class="hljs-comment">//åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œå°±æ˜¯æ‰§è¡Œmethod</span>
                        <span class="hljs-comment">//  Object result = method.invoke(ç›®æ ‡å¯¹è±¡, args);</span>
                        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(xxxStar, args);

                        <span class="hljs-keyword">return</span> result;
                    }
                }
        );


        <span class="hljs-comment">//JJRProxy proxy = new JJRProxy(zrnStar);</span>

        <span class="hljs-comment">//3.æ‰§è¡Œä»£ç†å¯¹è±¡æ–¹æ³•</span>
        proxy.sing();
        proxy.dance();
        System.out.println(proxy.getClass().getName());
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±
XXXåœ¨å”±æ­Œ
ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±
XXXåœ¨è·³èˆ
</code></pre>
<h2 data-id="heading-19">å››ã€ä»£ç†æ¨¡å¼å®æˆ˜ï¼š</h2>
<p>åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯"è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»"ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç†ä»£ç ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å°±èƒ½ä¸ºå¤šä¸ªç›®æ ‡ç±»æä¾›å¢å¼ºåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-20">4.1 å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-21">4.1.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼š</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataOperator</span> {
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 data-id="heading-22">4.1.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼š</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataOperator</span>{
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·æ–°å¢æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·åˆ é™¤æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataOperator</span>{
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;éƒ¨é—¨æ–°å¢æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;éƒ¨é—¨åˆ é™¤æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<h4 data-id="heading-23">4.1.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">//ç”¨äºåˆ›å»ºä»£ç†å¯¹è±¡çš„å·¥å‚å·¥å…·ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeOutProxyFactoryUtil</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  T <span class="hljs-title function_">createProxyObj</span><span class="hljs-params">(T target)</span>{
        <span class="hljs-keyword">return</span> (T) Proxy.newProxyInstance(
                target.getClass().getClassLoader(),
                target.getClass().getInterfaces(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
                        <span class="hljs-comment">//ä»£ç†å¯¹è±¡éœ€è¦åšçš„èŒè´£: ç»Ÿè®¡æ¯ä¸ªç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œè€—æ—¶æ—¶é—´</span>
                        <span class="hljs-comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å®šä¹‰å­˜å‚¨å¼€å§‹æ¯«ç§’æ•°</span>
                        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

                        <span class="hljs-comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œå°±æ˜¯æ‰§è¡Œmethod</span>
                        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);

                        <span class="hljs-comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåå®šä¹‰å­˜å‚¨ç»“æŸæ¯«ç§’æ•°</span>
                        <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

                        System.out.printf(&amp;#<span class="hljs-number">34</span>;[%s]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š%d%n&amp;#<span class="hljs-number">34</span>;, target.getClass().getName() + &amp;#<span class="hljs-number">34</span>;.&amp;#<span class="hljs-number">34</span>; + method.getName() + &amp;#<span class="hljs-number">34</span>;æ–¹æ³•&amp;#<span class="hljs-number">34</span>;, end - start);

                        <span class="hljs-keyword">return</span> result;
                    }
                }
        );
    }
}
</code></pre>
<h4 data-id="heading-24">4.1.4 æµ‹è¯•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šä½¿ç”¨åŠ¨æ€ä»£ç†ç»™æ¯ä¸ªç®¡ç†ç±»ç»Ÿè®¡æ¯ä¸ªæ–¹æ³•è¿è¡Œè€—æ—¶</span>
        <span class="hljs-comment">//ç–‘é—®ï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†æ¨èå“ªä¸ªï¼Ÿ</span>
        <span class="hljs-comment">//  ç­”ï¼šå¦‚æœåªæ˜¯å¯¹æŸä¸€ä¸ªç›®æ ‡è¿›è¡Œä»£ç†å“ªä¸ªéƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœå¯¹å¤šä¸ªç›®æ ‡å¯¹è±¡è¿›è¡Œç›¸åŒçš„èŒè´£å¼€å‘æ¨èä½¿ç”¨åŠ¨æ€ä»£ç†ã€‚</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡-ç”¨æˆ·ç®¡ç†å¯¹è±¡</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">userManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserManager</span>();

        <span class="hljs-comment">//2.åˆ›å»ºç›®æ ‡å¯¹è±¡-éƒ¨é—¨ç®¡ç†å¯¹è±¡</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">deptManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeptManager</span>();

        <span class="hljs-comment">//3.ç”Ÿæˆç”¨æˆ·ç®¡ç†å¯¹è±¡çš„ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">proxyObj1</span> <span class="hljs-operator">=</span> TimeOutProxyFactoryUtil.createProxyObj(userManager);
        proxyObj1.add();
        proxyObj1.Delete();

        <span class="hljs-comment">//4.ç”Ÿæˆéƒ¨é—¨ç®¡ç†å¯¹è±¡çš„ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">proxyObj2</span> <span class="hljs-operator">=</span> TimeOutProxyFactoryUtil.createProxyObj(deptManager);
        proxyObj2.add();
        proxyObj2.Delete();
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·æ–°å¢æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">UserManager.addæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">220</span>
ç”¨æˆ·åˆ é™¤æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">UserManager.Deleteæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">1050</span>
éƒ¨é—¨æ–°å¢æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">DeptManager.addæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">1967</span>
éƒ¨é—¨åˆ é™¤æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">DeptManager.Deleteæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">673</span>
</code></pre>
<h2 data-id="heading-25">äº”ã€é¢è¯•/è¸©å‘é«˜é¢‘ç‚¹ï¼ˆåŠ åˆ†é¡¹ï¼‰</h2>
<h3 data-id="heading-26">5.1 å¸¸è§è¸©å‘ç‚¹</h3>
<ul>
<li><strong>JDK ä»£ç†è¯¯ç”¨äºæ— æ¥å£ç±»</strong>ï¼šJDK åŠ¨æ€ä»£ç†å¿…é¡»åŸºäºæ¥å£ï¼Œè‹¥ç›®æ ‡ç±»æ— æ¥å£ï¼Œä¼šæŠ› <code>ClassCastException</code>ï¼Œæ­¤æ—¶éœ€æ”¹ç”¨ CGLIBï¼›</li>
<li><strong>CGLIB ä»£ç†æ— æ³•ä»£ç† final ç±»/æ–¹æ³•</strong>ï¼šCGLIB é€šè¿‡ç»§æ‰¿å®ç°ä»£ç†ï¼Œfinal ç±»æ— æ³•è¢«ç»§æ‰¿ï¼Œfinal æ–¹æ³•æ— æ³•è¢«é‡å†™ï¼›</li>
<li><strong>åŠ¨æ€ä»£ç†å¯¹è±¡ç±»å‹åˆ¤æ–­é”™è¯¯</strong>ï¼šä»£ç†å¯¹è±¡æ˜¯ JVM åŠ¨æ€ç”Ÿæˆçš„ç±»å®ä¾‹ï¼Œä¸èƒ½ç›´æ¥å¼ºè½¬ä¸ºç›®æ ‡ç±»ç±»å‹ï¼ˆå¦‚ UserProxy ä¸èƒ½å¼ºè½¬ä¸º UserServiceImplï¼‰ï¼Œåªèƒ½å¼ºè½¬ä¸ºæ¥å£ç±»å‹ï¼›</li>
<li><strong>Spring AOP åˆ‡é¢ä¸ç”Ÿæ•ˆ</strong>ï¼šæ£€æŸ¥æ˜¯å¦åŠ äº† @Aspect å’Œ @Component æ³¨è§£ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®ã€ç›®æ ‡ç±»æ˜¯å¦è¢« Spring ç®¡ç†ï¼ˆæ˜¯å¦åŠ äº† @Service ç­‰æ³¨è§£ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-27">5.2 é«˜é¢‘é¢è¯•é¢˜</h3>
<ol>
<li><strong>ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong> ç­”ï¼šæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹æ·»åŠ åŠŸèƒ½ã€‚è§£å†³äº†"æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸é™„åŠ åŠŸèƒ½è€¦åˆ"çš„é—®é¢˜ï¼Œç¬¦åˆå¼€é—­åŸåˆ™å’Œå•ä¸€èŒè´£åŸåˆ™ã€‚</li>
<li><strong>é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</strong> ç­”ï¼šåŒºåˆ«åœ¨äºä»£ç†ç±»çš„ç”Ÿæˆæ—¶æœºï¼ˆç¼–è¯‘æœŸ vs è¿è¡Œæ—¶ï¼‰å’Œçµæ´»æ€§ã€‚ç®€å•åœºæ™¯ã€ç›®æ ‡ç±»å°‘ä¸”ç¨³å®šæ—¶ç”¨é™æ€ä»£ç†ï¼›å¤æ‚åœºæ™¯ã€ç›®æ ‡ç±»å¤šæˆ–é¢‘ç¹å˜åŠ¨æ—¶ç”¨åŠ¨æ€ä»£ç†ã€‚æœ‰æ¥å£ä¼˜å…ˆç”¨ JDK ä»£ç†ï¼Œæ— æ¥å£ç”¨ CGLIB ä»£ç†ã€‚</li>
<li><strong>Spring AOP æ˜¯å¦‚ä½•é€‰æ‹©ä»£ç†æ–¹å¼çš„ï¼Ÿ</strong> ç­”ï¼šSpring AOP é»˜è®¤ä¼˜å…ˆä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼ˆç›®æ ‡ç±»æœ‰æ¥å£æ—¶ï¼‰ï¼›è‹¥ç›®æ ‡ç±»æ— æ¥å£ï¼Œåˆ™ä½¿ç”¨ CGLIB ä»£ç†ã€‚å¯é€šè¿‡é…ç½® <code>spring.aop.proxy-target-class=true</code> å¼ºåˆ¶ä½¿ç”¨ CGLIB ä»£ç†ã€‚</li>
<li><strong>åŠ¨æ€ä»£ç†ä¸­ï¼Œinvoke æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</strong> ç­”ï¼šproxy æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æœ¬èº«ï¼›method æ˜¯å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•çš„ Method å¯¹è±¡ï¼›args æ˜¯ç›®æ ‡æ–¹æ³•çš„å‚æ•°æ•°ç»„ã€‚</li>
</ol>
<h2 data-id="heading-28">å…­ã€æ€»ç»“ä¸å»¶ä¼¸</h2>
<h3 data-id="heading-29">6.1 æ ¸å¿ƒæ€»ç»“</h3>
<ul>
<li>ä»£ç†æ¨¡å¼ä¸‰è§’è‰²ï¼šæŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰ã€ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ã€ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼›</li>
<li>é™æ€ä»£ç†ï¼šç¼–è¯‘æœŸç”Ÿæˆä»£ç†ç±»ï¼Œç®€å•ä½†çµæ´»æ€§ä½ï¼Œé€‚åˆç®€å•åœºæ™¯ï¼›</li>
<li>åŠ¨æ€ä»£ç†ï¼šè¿è¡Œæ—¶ç”Ÿæˆä»£ç†ç±»ï¼Œçµæ´»æ€§é«˜ï¼Œæ˜¯æ¡†æ¶æ ¸å¿ƒæŠ€æœ¯ï¼ˆJDK ä»£ç†åŸºäºåå°„ï¼ŒCGLIB åŸºäºå­—èŠ‚ç ï¼‰ï¼›</li>
<li>æ ¸å¿ƒä»·å€¼ï¼šè§£è€¦æ ¸å¿ƒé€»è¾‘ä¸é™„åŠ åŠŸèƒ½ï¼Œå®ç°åŠŸèƒ½å¢å¼ºä¸æ§åˆ¶è®¿é—®ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨]]></title>    <link>https://juejin.cn/post/7582047623739031606</link>    <guid>https://juejin.cn/post/7582047623739031606</guid>    <pubDate>2025-12-10T13:10:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047623739031606" data-draft-id="7582067084839780406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-10T13:10:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å‡"/> <meta itemprop="url" content="https://juejin.cn/user/2285197690931932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2285197690931932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:10:37.000Z" title="Wed Dec 10 2025 13:10:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ¦‚è¿°</h3>
<p>Redis ä¸»ä»å¤åˆ¶æ˜¯ä¸€ç§æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œå®ƒå…è®¸ä¸€ä¸ª Redis æœåŠ¡å™¨ï¼ˆç§°ä¸ºÂ <strong>ä¸»æœåŠ¡å™¨/Master</strong>ï¼‰å°†å…¶æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª Redis æœåŠ¡å™¨ï¼ˆç§°ä¸ºÂ <strong>ä»æœåŠ¡å™¨/Slave/Replica</strong>ï¼‰ã€‚è¿™æ˜¯ Redis å®ç°é«˜å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œæ•°æ®å†—ä½™çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒä½œç”¨</h3>
<ol>
<li>
<p><strong>æ•°æ®å†—ä½™ä¸å¤‡ä»½</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä»æœåŠ¡å™¨æ˜¯ä¸»æœåŠ¡å™¨æ•°æ®çš„å®æ—¶çƒ­å¤‡ä»½ã€‚å½“ä¸»æœåŠ¡å™¨æ•°æ®ä¸¢å¤±æˆ–æŸåæ—¶ï¼Œå¯ä»¥ä»ä»æœåŠ¡å™¨æ¢å¤ï¼Œæ˜¯å®ç°æ•°æ®æŒä¹…åŒ–çš„å¦ä¸€ç§æœ‰æ•ˆæ–¹å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¯»å†™åˆ†ç¦»ä¸è´Ÿè½½å‡è¡¡</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä¸»æœåŠ¡å™¨é€šå¸¸å¤„ç†<strong>å†™æ“ä½œ</strong>å’Œ<strong>å¼ºä¸€è‡´æ€§è¯»æ“ä½œ</strong>ï¼Œè€Œä»æœåŠ¡å™¨å¯ä»¥å¤„ç†å¤§é‡çš„<strong>è¯»æ“ä½œ</strong>ã€‚é€šè¿‡å°†è¯»è¯·æ±‚åˆ†æµåˆ°å¤šä¸ªä»æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿçš„æ•´ä½“è¯»ååé‡å’Œå¹¶å‘èƒ½åŠ›ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šç”±äºå¤åˆ¶æ˜¯å¼‚æ­¥çš„ï¼Œä»æœåŠ¡å™¨ä¸Šçš„æ•°æ®å¯èƒ½å­˜åœ¨æ¯«ç§’çº§çš„å»¶è¿Ÿï¼Œé€‚ç”¨äºå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸éå¸¸ä¸¥æ ¼çš„è¯»åœºæ™¯ï¼ˆå¦‚ç¼“å­˜ã€æŠ¥è¡¨æŸ¥è¯¢ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>é«˜å¯ç”¨å’Œæ•…éšœæ¢å¤çš„åŸºçŸ³</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä¸»ä»å¤åˆ¶æ˜¯æ„å»ºÂ <strong>Redis Sentinelï¼ˆå“¨å…µï¼‰</strong>Â å’ŒÂ <strong>Redis Clusterï¼ˆé›†ç¾¤ï¼‰</strong>Â ç­‰é«˜å¯ç”¨æ¶æ„çš„åŸºç¡€ã€‚å½“ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥é€šè¿‡<strong>å“¨å…µ</strong>è‡ªåŠ¨å°†ä¸€ä¸ªä»æœåŠ¡å™¨æå‡ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œå®ç°æœåŠ¡å¿«é€Ÿåˆ‡æ¢ï¼Œä¿è¯ä¸šåŠ¡çš„è¿ç»­æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¨ªå‘æ‰©å±•è¯»èƒ½åŠ›</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šå½“è¯»è¯·æ±‚æˆä¸ºç“¶é¢ˆæ—¶ï¼Œå¯ä»¥ç®€å•åœ°é€šè¿‡æ·»åŠ æ›´å¤šä»æœåŠ¡å™¨æ¥çº¿æ€§æ‰©å±•è¯»æ€§èƒ½ï¼Œè€Œæ— éœ€å‡çº§ä¸»æœåŠ¡å™¨ç¡¬ä»¶ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">äºŒã€è¯¦ç»†å·¥ä½œåŸç†</h3>
<p>æ•´ä¸ªå¤åˆ¶è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>è¿æ¥å»ºç«‹é˜¶æ®µ</strong>ã€<strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong>ã€<strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong>ã€‚</p>
<h4 data-id="heading-3">é˜¶æ®µ 1ï¼šè¿æ¥å»ºç«‹ä¸é…ç½®</h4>
<ol>
<li><strong>é…ç½®ä»èŠ‚ç‚¹</strong>ï¼šåœ¨ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶ (<code>redis.conf</code>) ä¸­è®¾ç½®Â <code>replicaof  </code>Â æˆ–åœ¨è¿è¡Œæ—¶ä½¿ç”¨Â <code>REPLICAOF</code>Â å‘½ä»¤ã€‚</li>
<li><strong>å»ºç«‹è¿æ¥</strong>ï¼šä»æœåŠ¡å™¨æ ¹æ®é…ç½®ï¼Œå‘ä¸»æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªÂ <strong>Socket è¿æ¥</strong>ï¼Œå¹¶å‘é€Â <code>PING</code>Â å‘½ä»¤æ£€æŸ¥é€šä¿¡æ˜¯å¦æ­£å¸¸ã€‚</li>
<li><strong>èº«ä»½éªŒè¯</strong>ï¼šå¦‚æœä¸»æœåŠ¡å™¨è®¾ç½®äº†Â <code>requirepass</code>ï¼Œä»æœåŠ¡å™¨éœ€è¦å‘é€Â <code>AUTH</code>Â å‘½ä»¤è¿›è¡Œå¯†ç éªŒè¯ã€‚</li>
<li><strong>ç«¯å£ç›‘å¬</strong>ï¼šä»æœåŠ¡å™¨è¿˜ä¼šå»ºç«‹ä¸€ä¸ªÂ <strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒºç›‘å¬ç«¯å£</strong>ï¼Œç­‰å¾…ä¸»æœåŠ¡å™¨åç»­å‘é€æ•°æ®ã€‚</li>
</ol>
<h4 data-id="heading-4">é˜¶æ®µ 2ï¼šæ•°æ®åŒæ­¥ï¼ˆå…¨é‡/éƒ¨åˆ†åŒæ­¥ï¼‰</h4>
<p>è¿™æ˜¯å¤åˆ¶è¿‡ç¨‹ä¸­æœ€æ ¸å¿ƒã€æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚Redis 2.8 ä¹‹åï¼Œä½¿ç”¨Â <code>PSYNC</code>Â å‘½ä»¤å–ä»£äº†æ—§çš„Â <code>SYNC</code>Â å‘½ä»¤ï¼Œæ”¯æŒ<strong>éƒ¨åˆ†é‡åŒæ­¥</strong>ï¼Œæå¤§åœ°ä¼˜åŒ–äº†æ–­çº¿é‡è¿åçš„æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54fadbdfc13741dc933d62579cfa82b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765977165&amp;x-signature=tYXE6s2zjmiwKD5vKhbOOeP%2F4jE%3D" alt="" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>å…¨é‡åŒæ­¥</strong>ï¼š</p>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä»æœåŠ¡å™¨æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œæˆ–è€…ä»æœåŠ¡å™¨è®°å½•çš„<strong>å¤åˆ¶åç§»é‡</strong>å·²ç»ä¸åœ¨ä¸»æœåŠ¡å™¨çš„<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ä¸­ã€‚</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>ä»æœåŠ¡å™¨å‘é€Â <code>PSYNC ? -1</code>Â å‘½ä»¤è¯·æ±‚å…¨é‡åŒæ­¥ã€‚</li>
<li>ä¸»æœåŠ¡å™¨æ‰§è¡ŒÂ <code>BGSAVE</code>Â å‘½ä»¤ï¼Œåœ¨åå°ç”Ÿæˆå½“å‰æ•°æ®çš„Â <strong>RDB å¿«ç…§æ–‡ä»¶</strong>ã€‚</li>
<li>ä¸»æœåŠ¡å™¨å°† RDB æ–‡ä»¶é€šè¿‡ç½‘ç»œå‘é€ç»™ä»æœåŠ¡å™¨ã€‚åœ¨ç”Ÿæˆå’Œä¼ è¾“RDBæœŸé—´ï¼Œæ–°çš„å†™å‘½ä»¤ä¼šè¢«ç¼“å­˜åœ¨å†…å­˜çš„<strong>å¤åˆ¶å®¢æˆ·ç«¯ç¼“å†²åŒº</strong>ä¸­ã€‚</li>
<li>ä»æœåŠ¡å™¨æ¸…ç©ºè‡ªèº«æ—§æ•°æ®ï¼Œç„¶ååŠ è½½æ¥æ”¶åˆ°çš„ RDB æ–‡ä»¶ï¼Œå°†è‡ªèº«æ•°æ®çŠ¶æ€æ›´æ–°åˆ°ä¸ä¸»æœåŠ¡å™¨æ‰§è¡ŒÂ <code>BGSAVE</code>Â æ—¶ä¸€è‡´ã€‚</li>
<li>ä¸»æœåŠ¡å™¨å°†<strong>å¤åˆ¶å®¢æˆ·ç«¯ç¼“å†²åŒº</strong>ä¸­ç§¯ç´¯çš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œæœ€ç»ˆè¾¾åˆ°ä¸ä¸»æœåŠ¡å™¨å®Œå…¨ä¸€è‡´çš„çŠ¶æ€ã€‚</li>
</ol>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šéå¸¸æ¶ˆè€—ä¸»æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ I/O å’Œç½‘ç»œå¸¦å®½ï¼Œå°¤å…¶æ˜¯æ•°æ®é‡å¤§æ—¶ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af638dbc6ce64a6f9266a318dbdd374c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765977165&amp;x-signature=lG3QHzZhzdQmYXGBsx6P%2BAW7iKs%3D" alt="" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>éƒ¨åˆ†åŒæ­¥</strong>ï¼š</p>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä»æœåŠ¡å™¨çŸ­æ—¶é—´æ–­å¼€åé‡è¿ï¼Œå¹¶ä¸”å®ƒä¹‹å‰åŒæ­¥çš„åç§»é‡ä»ç„¶å­˜åœ¨äºä¸»æœåŠ¡å™¨çš„<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ä¸­ã€‚</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>ä»æœåŠ¡å™¨å‘é€Â <code>PSYNC  </code>Â å‘½ä»¤ï¼Œå…¶ä¸­Â <code>runid</code>Â æ˜¯ä¸»æœåŠ¡å™¨çš„å”¯ä¸€IDï¼Œ<code>offset</code>Â æ˜¯ä»æœåŠ¡å™¨å½“å‰çš„å¤åˆ¶åç§»é‡ã€‚</li>
<li>ä¸»æœåŠ¡å™¨åˆ¤æ–­Â <code>runid</code>Â æ˜¯å¦ä¸è‡ªå·±ä¸€è‡´ï¼Œä¸”Â <code>offset</code>Â ä¹‹åçš„æ•°æ®æ˜¯å¦è¿˜åœ¨<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>å†…ã€‚</li>
<li>å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œä¸»æœåŠ¡å™¨å›å¤Â <code>+CONTINUE</code>ï¼Œç„¶å<strong>ä»…å°†ä»Â <code>offset</code>Â åˆ°ç¼“å†²åŒºæœ«å°¾çš„å†™å‘½ä»¤</strong>å‘é€ç»™ä»æœåŠ¡å™¨ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ•ˆç‡æé«˜ï¼Œåªä¼ è¾“å°‘é‡ç¼ºå¤±çš„æ•°æ®ï¼Œå¯¹èµ„æºå½±å“å°ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>å…³é”®æ¦‚å¿µè§£é‡Š</strong>ï¼š</p>
<ul>
<li><strong>å¤åˆ¶åç§»é‡</strong>ï¼šä¸»ä»æœåŠ¡å™¨å„è‡ªç»´æŠ¤ä¸€ä¸ªåç§»é‡è®¡æ•°å™¨ã€‚ä¸»æœåŠ¡å™¨æ¯æ¬¡ä¼ æ’­Nä¸ªå­—èŠ‚çš„å‘½ä»¤ï¼Œå…¶åç§»é‡å°±å¢åŠ Nã€‚ä»æœåŠ¡å™¨æ¯æ¬¡æ¥æ”¶åˆ°Nä¸ªå­—èŠ‚ï¼Œå…¶åç§»é‡ä¹Ÿå¢åŠ Nã€‚é€šè¿‡å¯¹æ¯”åç§»é‡å¯ä»¥åˆ¤æ–­æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚</li>
<li><strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ï¼šä¸»æœåŠ¡å™¨ç»´æŠ¤çš„ä¸€ä¸ª<strong>å›ºå®šé•¿åº¦çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—</strong>ã€‚å®ƒæŒç»­è®°å½•æœ€è¿‘ä¼ æ’­çš„å†™å‘½ä»¤ã€‚å…¶å¤§å°é€šè¿‡Â <code>repl-backlog-size</code>Â é…ç½®ï¼Œæ˜¯å†³å®šèƒ½å¦è¿›è¡Œéƒ¨åˆ†åŒæ­¥çš„å…³é”®ã€‚</li>
<li><strong>æœåŠ¡å™¨è¿è¡ŒID</strong>ï¼šæ¯ä¸ªRediså®ä¾‹å¯åŠ¨æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„è¿è¡ŒIDã€‚ä»æœåŠ¡å™¨ä¼šè®°å½•ä¸»æœåŠ¡å™¨çš„IDã€‚å½“ä¸»æœåŠ¡å™¨é‡å¯å˜æ›´åï¼Œè¿è¡ŒIDæ”¹å˜ï¼Œä»æœåŠ¡å™¨ä¼šè§¦å‘å…¨é‡åŒæ­¥ã€‚</li>
</ul>
<h4 data-id="heading-5">é˜¶æ®µ 3ï¼šå‘½ä»¤ä¼ æ’­ï¼ˆå¢é‡åŒæ­¥ï¼‰</h4>
<p>æ•°æ®åŒæ­¥å®Œæˆåï¼Œå¤åˆ¶è¿›å…¥ç¨³å®šé˜¶æ®µã€‚</p>
<ol>
<li><strong>æŒç»­åŒæ­¥</strong>ï¼šä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªä¼šä¿®æ”¹æ•°æ®é›†çš„å†™å‘½ä»¤ï¼ˆå¦‚Â <code>SET</code>ã€<code>LPUSH</code>Â ç­‰ï¼‰ï¼Œéƒ½ä¼š<strong>å¼‚æ­¥åœ°</strong>å°†è¿™ä¸ªå‘½ä»¤å‘é€ç»™æ‰€æœ‰è¿æ¥çš„ä»æœåŠ¡å™¨ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨æ‰§è¡Œ</strong>ï¼šä»æœåŠ¡å™¨æ¥æ”¶åˆ°å‘½ä»¤åï¼Œä¼šåœ¨è‡ªèº«çš„æ•°æ®é›†ä¸Šæ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œä»è€Œä¿æŒä¸ä¸»æœåŠ¡å™¨çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
<li><strong>å¼‚æ­¥ç‰¹æ€§</strong>ï¼šæ•´ä¸ªå‘½ä»¤ä¼ æ’­è¿‡ç¨‹æ˜¯<strong>å¼‚æ­¥</strong>çš„ã€‚ä¸»æœåŠ¡å™¨å‘é€å‘½ä»¤åä¸ä¼šç­‰å¾…ä»æœåŠ¡å™¨çš„å›å¤ã€‚è¿™æ„å‘³ç€åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœä¸»æœåŠ¡å™¨åœ¨å‘½ä»¤å‘é€åç«‹å³å®•æœºï¼Œè¯¥å‘½ä»¤å¯èƒ½ä¸¢å¤±ï¼Œå¯¼è‡´ä»æœåŠ¡å™¨æ•°æ®ç¨æ—§ã€‚è¿™æ˜¯Rediså¤åˆ¶åœ¨<strong>æ€§èƒ½</strong>å’Œ<strong>å¼ºä¸€è‡´æ€§</strong>ä¹‹é—´åšçš„æƒè¡¡ã€‚</li>
</ol>
<h3 data-id="heading-6">ä¸‰ã€é‡è¦ç‰¹æ€§ä¸é…ç½®</h3>
<ul>
<li><strong>å¼‚æ­¥å¤åˆ¶</strong>ï¼šé»˜è®¤ä¸”æœ€å¸¸ç”¨çš„æ¨¡å¼ï¼Œæ€§èƒ½å¥½ï¼Œä½†å­˜åœ¨æ•°æ®ä¸¢å¤±çš„æå°çª—å£æœŸã€‚</li>
<li><strong>å¯é…ç½®çš„â€œæœ€å°å‰¯æœ¬æ•°â€</strong> ï¼šé€šè¿‡Â <code>min-replicas-to-write</code>Â å’ŒÂ <code>min-replicas-max-lag</code>Â é…ç½®ï¼Œå¯ä»¥è®©ä¸»æœåŠ¡å™¨åœ¨è¿æ¥çš„ä»æœåŠ¡å™¨æ•°é‡ä¸è¶³æˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œæ‹’ç»æ‰§è¡Œå†™å‘½ä»¤ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ï¼Œç‰ºç‰²äº†éƒ¨åˆ†å¯ç”¨æ€§ã€‚</li>
<li><strong>æ— ç£ç›˜å¤åˆ¶</strong>ï¼šé€šè¿‡Â <code>repl-diskless-sync</code>Â é…ç½®ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥ç›´æ¥å°† RDB å†…å®¹é€šè¿‡ç½‘ç»œå‘é€ç»™ä»æœåŠ¡å™¨ï¼Œè€Œä¸éœ€è¦å…ˆè½ç›˜ã€‚é€‚ç”¨äºç£ç›˜IOæ…¢çš„ç½‘ç»œç¯å¢ƒã€‚</li>
<li><strong>çº§è”å¤åˆ¶</strong>ï¼šä»æœåŠ¡å™¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ä»æœåŠ¡å™¨ï¼Œå½¢æˆæ ‘çŠ¶å¤åˆ¶ç»“æ„ï¼Œå¯ä»¥å‡è½»ä¸»æœåŠ¡å™¨åœ¨ä¼ æ’­å‘½ä»¤æ—¶çš„ç½‘ç»œå‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-7">å››ã€æ€»ç»“ä¸å½¢è±¡æ¯”å–»</h3>
<p>ä½ å¯ä»¥å°† Redis ä¸»ä»å¤åˆ¶ç†è§£ä¸ºä¸€ä¸ªÂ <strong>â€œå‡ºç‰ˆ-è®¢é˜…â€æ¨¡å‹</strong>Â æˆ–Â <strong>â€œé¢†å¯¼-è·Ÿéšâ€æ¨¡å‹</strong>ï¼š</p>
<ul>
<li><strong>ä¸»æœåŠ¡å™¨</strong>Â å°±åƒå‡ºç‰ˆç¤¾ï¼Œè´Ÿè´£æ’°å†™å’Œå‡ºç‰ˆæ–°ä¹¦ï¼ˆå†™å‘½ä»¤ï¼‰ã€‚</li>
<li><strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>Â å°±åƒæ˜¯å‡ºç‰ˆç¤¾çš„è¿‘æœŸç¨¿ä»¶ä»“åº“ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨</strong>Â å°±åƒå„åœ°çš„ä¹¦åº—ã€‚</li>
<li><strong>å…¨é‡åŒæ­¥</strong>Â å°±åƒä¹¦åº—ç¬¬ä¸€æ¬¡è¿›è´§ï¼Œéœ€è¦æŠŠå‡ºç‰ˆç¤¾çš„æ‰€æœ‰åº“å­˜ä¹¦ç±ï¼ˆRDBï¼‰å…¨éƒ¨è¿è¿‡æ¥ã€‚</li>
<li><strong>éƒ¨åˆ†åŒæ­¥</strong>Â å°±åƒä¹¦åº—ä¸´æ—¶è¡¥è´§ï¼Œåªä»å‡ºç‰ˆç¤¾çš„è¿‘æœŸç¨¿ä»¶ä»“åº“é‡Œæ‹¿æœ€æ–°å‡ºç‰ˆçš„é‚£å‡ æœ¬ä¹¦ã€‚</li>
<li><strong>å‘½ä»¤ä¼ æ’­</strong>Â å°±åƒå‡ºç‰ˆç¤¾æ¯å‡ºç‰ˆä¸€æœ¬æ–°ä¹¦ï¼Œå°±ç«‹å³å¯„é€ç»™æ‰€æœ‰è®¢é˜…çš„ä¹¦åº—ã€‚</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªç³»ç»Ÿè®©ä¹¦åº—ï¼ˆä»æœåŠ¡å™¨ï¼‰å§‹ç»ˆæœ‰ä¹¦å¯å–ï¼ˆæ•°æ®å¯è¯»ï¼‰ï¼Œå³ä½¿æ€»ç¤¾ï¼ˆä¸»æœåŠ¡å™¨ï¼‰æš‚æ—¶å…³é—­ï¼Œä¹Ÿèƒ½ä»å…¶ä»–å¤§å‹ä¹¦åº—ï¼ˆå¦ä¸€ä¸ªä»æœåŠ¡å™¨ï¼‰è°ƒè´§ï¼Œä¿è¯äº†å›¾ä¹¦é”€å”®ç³»ç»Ÿï¼ˆRedisæœåŠ¡ï¼‰çš„ç¨³å®šå’Œé«˜æ•ˆã€‚</p>
<h3 data-id="heading-8">é¢è¯•å›ç­”</h3>
<p>Redis ä¸»ä»å¤åˆ¶ä¸»è¦ç”¨æ¥å®ç°æ•°æ®çš„å†—ä½™å¤‡ä»½ã€è¯»å†™åˆ†ç¦»å’Œé«˜å¯ç”¨ã€‚å®ƒçš„æ ¸å¿ƒå°±æ˜¯è®©ä¸€ä¸ªä¸»èŠ‚ç‚¹çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ä¸Šã€‚<br/>
</p>
<p><strong>åŸç†ä¸Šï¼Œæˆ‘æŠŠå®ƒåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</strong></p>
<ol>
<li><strong>å»ºç«‹è¿æ¥é˜¶æ®µ</strong><br/>
ä»èŠ‚ç‚¹å¯åŠ¨åï¼Œä¼šé€šè¿‡ <code>slaveof</code> å‘½ä»¤æˆ–è€…é…ç½®æŒ‡å‘ä¸»èŠ‚ç‚¹ï¼Œç„¶åå‘ä¸»èŠ‚ç‚¹å‘é€ <code>PSYNC</code> å‘½ä»¤è¯·æ±‚åŒæ­¥ã€‚ä¸»èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åï¼Œä¼šç”Ÿæˆä¸€ä¸ª RDB å¿«ç…§æ–‡ä»¶ï¼ˆbgsave æ–¹å¼ï¼‰ï¼ŒåŒæ—¶ç”¨ç¼“å†²åŒºè®°å½•è¿™æœŸé—´çš„æ–°å†™å‘½ä»¤ã€‚</li>
<li><strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong><br/>
ä¸»èŠ‚ç‚¹æŠŠç”Ÿæˆçš„ RDB æ–‡ä»¶å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ¸…ç©ºè‡ªå·±çš„æ—§æ•°æ®ï¼Œç„¶ååŠ è½½è¿™ä¸ª RDB æ¥æ¢å¤æ•°æ®ã€‚å¦‚æœåœ¨ç”Ÿæˆ RDB æœŸé—´ä¸»èŠ‚ç‚¹æœ‰æ–°çš„å†™æ“ä½œï¼Œè¿™äº›å‘½ä»¤ä¼šå…ˆä¿å­˜åœ¨ä¸€ä¸ªå«â€œå¤åˆ¶ç¼“å†²åŒºâ€çš„åœ°æ–¹ã€‚</li>
<li><strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong><br/>
RDB åŒæ­¥å®Œæˆä¹‹åï¼Œä¸»èŠ‚ç‚¹ä¼šæŠŠå¤åˆ¶ç¼“å†²åŒºé‡Œçš„å†™å‘½ä»¤ä»¥åŠåç»­çš„æ‰€æœ‰å†™å‘½ä»¤ï¼Œä»¥ AOF é‡æ”¾çš„æ–¹å¼å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œä»è€Œå’Œä¸»èŠ‚ç‚¹ä¿æŒå®æ—¶ä¸€è‡´ã€‚ä¹‹åä¸»èŠ‚ç‚¹æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤ï¼Œéƒ½ä¼šå¼‚æ­¥å‘é€ç»™ä»èŠ‚ç‚¹ã€‚</li>
</ol>
<p>å¦å¤–ï¼ŒRedis 2.8 ä¹‹åæ”¯æŒäº†<strong>éƒ¨åˆ†é‡åŒæ­¥</strong>ï¼šå¦‚æœä»èŠ‚ç‚¹çŸ­æš‚æ–­è¿ååˆæ¢å¤ï¼Œä¸»èŠ‚ç‚¹å¯ä»¥æ ¹æ®å¤åˆ¶åç§»é‡å’Œå¤åˆ¶ç¼“å†²åŒºï¼Œåªå‘é€æ–­å¼€æœŸé—´ç¼ºå¤±çš„é‚£éƒ¨åˆ†å‘½ä»¤ï¼Œè€Œä¸éœ€è¦å…¨é‡åŒæ­¥ï¼Œè¿™å¤§å¤§æå‡äº†å¤åˆ¶çš„æ•ˆç‡ã€‚</p>
<p><strong>ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®å¤‡ä»½</strong><br/>
ä»èŠ‚ç‚¹ç›¸å½“äºä¸»èŠ‚ç‚¹çš„ä¸€ä¸ªå®æ—¶å¤‡ä»½ï¼Œä¸€æ—¦ä¸»èŠ‚ç‚¹æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥ä»ä»èŠ‚ç‚¹æ¢å¤ã€‚</li>
<li><strong>è¯»å†™åˆ†ç¦»</strong><br/>
ä¸»èŠ‚ç‚¹è´Ÿè´£å†™ï¼Œä»èŠ‚ç‚¹å¯ä»¥åˆ†æ‹…è¯»è¯·æ±‚ï¼Œè¿™æ ·æå‡æ•´ä½“è¯»çš„ååé‡ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</li>
<li><strong>é«˜å¯ç”¨åŸºç¡€</strong><br/>
ä¸»ä»å¤åˆ¶æ˜¯ Redis Sentinel å’Œ Redis Cluster å®ç°é«˜å¯ç”¨çš„åŸºç¡€ï¼Œä¸»èŠ‚ç‚¹æŒ‚äº†ä¹‹åï¼Œå¯ä»¥æ‰‹åŠ¨æˆ–è‡ªåŠ¨å°†ä¸€ä¸ªä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ]]></title>    <link>https://juejin.cn/post/7582104240987373594</link>    <guid>https://juejin.cn/post/7582104240987373594</guid>    <pubDate>2025-12-11T01:58:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240987373594" data-draft-id="7582090790182469670" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-11T01:58:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:58:05.000Z" title="Thu Dec 11 2025 01:58:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šå†™å…¥åç«‹åˆ»æœä¸åˆ°ã€èŠ‚ç‚¹é‡å¯æ€•ä¸¢æ•°æ®ï¼ŒåªçŸ¥é“â€œè¿‘å®æ—¶â€å´æä¸æ¸… ES åº•å±‚æ˜¯æ€ä¹ˆä¿è¯æ€§èƒ½å’Œå¯é æ€§çš„ã€‚</li>
<li>ç»“è®ºï¼šSegment ä¸å¯å˜ã€Refresh è´Ÿè´£â€œå¯æœâ€ã€Flush+Translog è´Ÿè´£â€œå¯æ¢å¤â€ï¼Œä¸€å¥—é“¾è·¯å…±åŒå®šä¹‰äº† Elasticsearch çš„æ€§èƒ½ä¸Šé™å’Œæ•°æ®å®‰å…¨è¾¹ç•Œã€‚</li>
<li>äº§å‡ºï¼šæ¢³ç†ç´¢å¼•å†™å…¥åˆ° NRT æœç´¢çš„å…¨é“¾è·¯æµç¨‹ï¼Œç»™å‡º refresh_intervalã€flushã€translog.durability ç­‰å…³é”®å‚æ•°çš„è°ƒä¼˜æ€è·¯å’Œå¸¸è§æ•…éšœæ¨¡å¼é€ŸæŸ¥è¡¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55a27f4efa954dcb924e683ed44fb8a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=1s96bR%2FtX3JVH2e7d8qzSQIgq%2BE%3D" alt="å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>

























<table><thead><tr><th>ç‰ˆæœ¬èŒƒå›´</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Elasticsearch 7.x</td><td>éƒ¨åˆ†</td><td>å†™å…¥/Refresh/Flush/Translog åŸç†ä¸æ–‡ä¸­æè¿°ä¸€è‡´ï¼ŒAPI ç•¥æœ‰å·®å¼‚</td></tr><tr><td>Elasticsearch 8.xï¼ˆ2025ï¼‰</td><td>éƒ¨åˆ†</td><td>æ ¸å¿ƒæœºåˆ¶ç›¸åŒï¼Œå®‰å…¨ä¸é»˜è®¤é…ç½®éœ€ä»¥ 8.x å®˜æ–¹æ–‡æ¡£ä¸ºå‡†</td></tr><tr><td>Elasticsearch 6.x åŠä»¥ä¸‹</td><td>å¦</td><td>ä»…åœ¨åŸç†å±‚é¢å¤§è‡´é€‚ç”¨ï¼Œå…·ä½“å‚æ•°åä¸é»˜è®¤å€¼å¯èƒ½ä¸åŒ</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c0e5c8067484a83ac1a9c828faabab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=a%2FNNZoGZbgpPgN6%2FtXjm%2F4WWXik%3D" alt="Elasticsearch" loading="lazy"/></p>
<h2 data-id="heading-2">ç´¢å¼•æ–‡æ¡£å†™å…¥å’Œè¿‘å®æ—¶æœç´¢åŸç†</h2>
<h3 data-id="heading-3">åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-4">Segments in Lucene</h4>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒElasticsearchå­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯Shardï¼ŒESä¸­çš„ä¸€ä¸ªIndexå¯èƒ½åˆ†ä¸ºå¤šä¸ªShardï¼Œäº‹å®ä¸Šæ¯ä¸ªShardéƒ½æ˜¯ä¸€ä¸ªLucenceçš„Indexï¼Œå¹¶ä¸”æ¯ä¸ªLucenceIndexç”±å¤šä¸ªSegmentç»„æˆï¼Œæ¯ä¸ªSegmentäº‹å®ä¸Šæ˜¯ä¸€äº›å€’æ’ç´¢å¼•çš„é›†åˆï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„Documentï¼Œéƒ½ä¼šå½’å±äºä¸€ä¸ªæ–°çš„Segmentï¼Œè€Œä¸ä¼šå»ä¿®æ”¹åŸæ¥çš„Segmentã€‚ä¸”æ¯æ¬¡çš„æ–‡æ¡£åˆ é™¤æ“ä½œï¼Œä¼šä»…ä»…æ ‡è®°Segmentä¸­è¯¥æ–‡æ¡£ä¸ºåˆ é™¤çŠ¶æ€ï¼Œè€Œä¸ä¼šçœŸæ­£çš„ç«‹é©¬ç‰©ç†åˆ é™¤ï¼Œæ‰€ä»¥è¯´ESçš„indexå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚å°±åƒä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/394bb060b4db43ba848b76ecc127b1cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=xeZaY4MtlHvMElXtmChAuEGX%2FVs%3D" alt="Elasticsearch Shard å’Œ Segment" loading="lazy"/></p>
<h4 data-id="heading-5">Translog-Hbase WALï¼ˆWrite Ahead Logï¼‰</h4>
<p>Write Ahead Log é¢„å†™å…¥æ—¥å¿—
æ–°æ–‡æ¡£è¢«ç´¢å¼•æ„å‘³ç€æ–‡æ¡£ä¼šè¢«é¦–å…ˆå†™å…¥å†…å­˜bufferå’Œtranslogæ–‡ä»¶ï¼Œæ¯ä¸ªshardéƒ½å¯¹åº”ä¸€ä¸ªtranslogæ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b11b90726794b519f21f744c4a125c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=9skoaWRNOkNpDFpZ3kTSkmF8%2F1s%3D" alt="Elasticsearch New document Indexing" loading="lazy"/></p>
<h4 data-id="heading-6">Refresh In Elasticsearch</h4>
<p>åœ¨Elasticsearchä¸­ï¼Œ_refreshæ“ä½œé»˜è®¤æ¯ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œæ„å‘³ç€å°†å†…å­˜bufferçš„æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªæ–°çš„Segmentä¸­ï¼Œè¿™ä¸ªæ—¶å€™ç´¢å¼•å˜æˆäº†å¯æ£€ç´¢çš„ï¼Œå†™å…¥æ–°Segmentåä¼šæ¸…ç©ºå†…å­˜bufferã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bed13c3f242b43d3a68aef4a905a5c81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=%2FDKseycrK8IENTOB1QtMl1e0GnI%3D" alt="Elasticsearch New Document Indexing" loading="lazy"/></p>
<h4 data-id="heading-7">Flush In Elasticsearch</h4>
<p>Flush æ“ä½œæ„å‘³ç€å°†å†…å­˜bufferçš„æ•°æ®å…¨éƒ¨å†™å…¥åˆ°æ–°çš„Segmentä¸­ï¼Œå¹¶å°†å†…å­˜ä¸­æ‰€æœ‰Segmentså…¨éƒ¨åˆ·ç›˜ï¼Œå¹¶ä¸”æ¸…ç©ºtranslogæ—¥å¿—çš„è¿‡ç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/800f03990fc24f458ce2d2ec96baaf8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=jCQ%2FxRsi5wVs%2F9xloeq6krQ2uyM%3D" alt="Elasticsearch Flush" loading="lazy"/></p>
<h2 data-id="heading-8">è¿‘å®æ—¶æœç´¢</h2>
<h3 data-id="heading-9">åŸºæœ¬æµç¨‹</h3>
<p>Elasticsearchå†™å…¥æµç¨‹ï¼Œå½“ä¸€ä¸ªå†™è¯·æ±‚åˆ°è¾¾Elasticsearchåï¼ŒESå°†æ•°æ®å†™å…¥MemoryBufferä¸­ï¼Œå¹¶æ·»åŠ äº‹åŠ¡æ—¥å¿—ï¼ˆtranslogï¼‰ã€‚å¦‚æœæ¯æ¬¡ä¸€æ¡æ•°æ®å†™å…¥å†…å­˜åç«‹å³å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç”±äºå†™å…¥çš„æ•°æ®è‚¯å®šæ˜¯ç¦»æ•£çš„ï¼Œå› æ­¤å†™å…¥ç£ç›˜çš„æ“ä½œä¹Ÿå°±æ˜¯éšæœºå†™å…¥äº†ã€‚ç¡¬ç›˜éšæœºå†™å…¥çš„æ•ˆç‡ç›¸å½“ä½ï¼Œä¼šä¸¥é‡é™ä½ESçš„æ€§èƒ½ã€‚
å› æ­¤ESåœ¨è®¾è®¡æ—¶åœ¨MemoryBufferå’Œç¡¬ç›˜ä¹‹é—´åŠ å…¥äº†é«˜é€Ÿç¼“å­˜ï¼ˆFileSystemCacheï¼‰æ¥æé«˜ESçš„å†™æ•ˆç‡ã€‚
å½“å†™è¯·æ±‚å‘é€åˆ°ESåï¼ŒESå°†æ•°æ®å†™å…¥MemoryBufferä¸­ï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®è¿˜ä¸èƒ½æŸ¥è¯¢åˆ°ã€‚é»˜è®¤è®¾ç½®ä¸‹ï¼ŒESæ¯1ç§’é’Ÿå°†MemoryBufferä¸­çš„æ•°æ®Refreshåˆ°Linuxçš„FileSystemCacheï¼Œå¹¶æ¸…ç©ºMemoryBufferï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®å°±å¯ä»¥è¢«æŸ¥è¯¢åˆ°äº†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b72adb63ed04d60b3d59686b8cc5863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=b%2B8kZ8MRHr2Bnuf%2F%2FiYazX0zjMg%3D" alt="Elasticsearch è¿‘å®æ—¶æœç´¢" loading="lazy"/></p>
<h4 data-id="heading-10">Refresh API</h4>
<p>åœ¨Elasticsearchä¸­ï¼Œå†™å…¥å’Œæ‰“å¼€ä¸€ä¸ªæ–°æ®µçš„è½»é‡çš„è¿‡ç¨‹å«åšRefreshï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªåˆ†ç‰‡ä¼šæ¯ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´Elasticsearchæ˜¯â€œè¿‘â€å®æ—¶æœç´¢ï¼šæ–‡æ¡£çš„å˜åŒ–å¹¶ä¸æ˜¯ç«‹å³å¯¹æœç´¢å¯è§ï¼Œä½†ä¼šåœ¨ä¸€ç§’ä¹‹å†…å˜æˆå¯è§ã€‚
è¿™äº›è¡Œä¸ºå¯èƒ½ä¼šå¯¹æ–°ç”¨æˆ·æ“ä½œå›°æƒ‘ï¼Œä»–ä»¬ç´¢å¼•äº†ä¸€ä¸ªæ–‡æ¡£ç„¶åå°è¯•æœç´¢å®ƒï¼Œä½†å´æ²¡æœ‰æœç´¢åˆ°ã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æ˜¯ç”¨ Refresh API æ‰§è¡Œä¸€æ¬¡æ‰‹åŠ¨åˆ·æ–°ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">POST /_refresh

POST /my_blogs/_refresh

POST /my_blogs/_doc/1?refresh
{&amp;#34;xxx&amp;#34;: &amp;#34;xxx&amp;#34;}

PUT /test/_doc/2?refresh=true
{&amp;#34;xxx&amp;#34;: &amp;#34;xxx&amp;#34;}
</code></pre>
<ul>
<li>åˆ·æ–°ï¼ˆRefreshï¼‰æ‰€æœ‰çš„ç´¢å¼•</li>
<li>åªåˆ·æ–°ï¼ˆRefreshï¼‰blogs ç´¢å¼•</li>
<li>åªåˆ·æ–°æ–‡æ¡£</li>
</ul>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½éœ€è¦æ¯ç§’åˆ·æ–°ï¼Œå¯èƒ½ä½ æ­£åœ¨ä½¿ç”¨Elasticsearchç´¢å¼•å¤§é‡çš„æ–‡ä»¶ï¼Œä½ å¯èƒ½æƒ³ä¼˜åŒ–ç´¢å¼•é€Ÿåº¦è€Œä¸æ˜¯è¿‘å®æ—¶æœç´¢ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® refrsh_intervalï¼Œé™ä½æ¯ä¸ªç´¢å¼•çš„åˆ·æ–°é¢‘ç‡ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_logs
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;settings&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">30</span>s&amp;#<span class="hljs-number">34</span>;
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>refresh_intervalå¯ä»¥åœ¨æ—¢å­˜ç´¢å¼•ä¸ŠåŠ¨æ€æ›´æ–°ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå½“ä½ æ­£åœ¨å»ºç«‹ä¸€ä¸ªå¤§çš„ç´¢å¼•æ—¶ï¼Œå¯ä»¥å…ˆå…³æ¯”è‡ªåŠ¨åˆ·æ–°ï¼Œå¾…å¼€å§‹ä½¿ç”¨è¯¥ç´¢å¼•æ—¶ï¼Œå†æŠŠä»–ä»¬è°ƒå›æ¥ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_logs/_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">-1</span>
<span class="hljs-punctuation">}</span>

PUT /my_logs/_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1</span>s&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-11">æŒä¹…åŒ–å˜æ›´</h2>
<h4 data-id="heading-12">åŸºæœ¬æµç¨‹</h4>
<p>æŒä¹…åŒ–å˜æ›´flush
å³ä½¿é€šè¿‡æ¯ç§’åˆ·æ–°ï¼ˆRefreshï¼‰å®ç°äº†è¿‘å®æ—¶æœç´¢ï¼Œä»ç„¶è¦ç»å¸¸è¿›è¡Œå®Œæ•´æäº¤æ¥ç¡®ä¿ä»å¤±è´¥ä¸­æ¢å¤ã€‚ä½†åœ¨ä¸¤æ¬¡æäº¤ä¹‹é—´å‘ç”Ÿå˜åŒ–çš„æ–‡æ¡£æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›ä¸¢æ‰è¿™äº›æ•°æ®ã€‚
Elasticsearchå¢åŠ äº†ä¸€ä¸ªTranslogï¼Œå«åšäº‹åŠ¡æ—¥å¿—ï¼Œåœ¨æ¯ä¸€æ¬¡å¯¹Elasticsearchæ“ä½œæ—¶éƒ½ä¼šè¿›è¡Œæ—¥å¿—è®°å½•ï¼Œé€šè¿‡translogï¼Œæ•´ä¸ªæµç¨‹æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šä¸€ä¸ªæ–‡æ¡£è¢«ç´¢å¼•ä¹‹åï¼Œå°±ä¼šè¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºä¸­ï¼Œå¹¶ä¸”è¿½åŠ åˆ°äº†translogï¼Œå¦‚ä¸‹å›¾æè¿°ä¸€æ ·ï¼š
æ–°çš„æ–‡æ¡£è¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºå¹¶ä¸”è¿½åŠ åˆ°äº†äº‹åŠ¡æ—¥å¿—ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdc900e4c9614f25bc7ac4597bce8514~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=Zlst5ru4NrhExfZGmpKJadtz8g8%3D" alt="Elasticsearch æŒä¹…åŒ–å˜æ›´" loading="lazy"/>
ç¬¬äºŒæ­¥ï¼šåˆ·æ–°ï¼ˆrefreshï¼‰ä½¿åˆ†ç‰‡å¤„äºä¸‹å›¾æè¿°çš„çŠ¶æ€ï¼Œåˆ†ç‰‡æ¯ç§’åˆ·æ–°ï¼ˆrefreshï¼‰ä¸€æ¬¡ï¼š</p>
<ul>
<li>è¿™äº›å†…å­˜ç¼“å†²åŒºçš„æ–‡æ¡£è¢«å†™å…¥åˆ°ä¸€ä¸ªæ–°çš„æ®µä¸­ï¼Œä¸”æ²¡æœ‰è¿›è¡Œfsyncæ“ä½œ</li>
<li>è¿™ä¸ªæ®µè¢«æ‰“å¼€ï¼Œä½¿å…¶å¯è¢«æœç´¢ã€‚</li>
<li>å†…å­˜ç¼“å­˜åŒºè¢«æ¸…ç©º</li>
</ul>
<p>åˆ·æ–°ï¼ˆrefreshï¼‰å®Œæˆåï¼Œç¼“å­˜è¢«æ¸…ç©ºä½†æ˜¯äº‹åŠ¡æ—¥å¿—ä¸ä¼šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4830f0f5ffdd42c69e84c3486644e633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=2BsYmlIVbwGsPQGwhyE4zDuvEH8%3D" alt="Elasticsearch Refresh" loading="lazy"/>
ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸ªè¿›ç¨‹ç»§ç»­å·¥ä½œï¼Œæ›´å¤šçš„æ–‡æ¡£è¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºå’Œè¿½åŠ åˆ°äº‹åŠ¡æ—¥å¿—ï¼Œäº‹åŠ¡æ—¥å¿—ä¸æ–­ç§¯ç´¯æ–‡æ¡£ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8232ff26a020425db5204710d1a64817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=zQ9jw6JuNlDDSdwfEZYz%2FV1IqxU%3D" alt="Elasticsearch Commit Point" loading="lazy"/>
æ¯éš”ä¸€æ®µæ—¶é—´ï¼šåˆ—å¦‚translog å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œç´¢å¼•è¢«åˆ·æ–°ï¼ˆflushï¼‰ï¼Œä¸€ä¸ªæ–°çš„translogè¢«åˆ›å»ºï¼Œå¹¶ä¸”ä¸€ä¸ªå…¨é‡æäº¤è¢«æ‰§è¡Œã€‚</p>
<ul>
<li>æ‰€æœ‰åœ¨å†…å­˜ç¼“å†²åŒºçš„æ–‡æ¡£éƒ½è¢«å†™å…¥ä¸€ä¸ªæ–°çš„æ®µï¼ˆSegmentï¼‰</li>
<li>ç¼“å†²åŒºè¢«æ¸…ç©º</li>
<li>ä¸€ä¸ªæäº¤ç‚¹è¢«å†™å…¥ç¡¬ç›˜</li>
<li>æ–‡ä»¶ç³»ç»Ÿç¼“å­˜é€šè¿‡fsyncè¢«åˆ·æ–°ï¼ˆflushï¼‰</li>
<li>è€çš„translogè¢«åˆ é™¤</li>
</ul>
<p>translogæä¾›æ‰€æœ‰è¿˜æ²¡æœ‰è¢«åˆ·åˆ°ç£ç›˜çš„æ“ä½œçš„ä¸€ä¸ªæŒä¹…åŒ–è®°å½•ï¼Œå½“Elasticsearchå¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šä»ç£ç›˜ä¸­ä½¿ç”¨æœ€åä¸€ä¸ªæäº¤ç‚¹å»æ¢å¤å·²ç»å¾—æ®µï¼Œå¹¶ä¸”ä¼šé‡æ”¾translogä¸­æ‰€æœ‰åœ¨æœ€åä¸€æ¬¡æäº¤åå‘ç”Ÿçš„å˜æ›´æ“ä½œã€‚
translogä¹Ÿè¢«ç”¨æ¥æä¾›å®æ—¶CRUDï¼Œå½“ä½ è¯•ç€é€šè¿‡IDæŸ¥è¯¢ã€è§£æã€åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå®ƒä¼šåœ¨å°è¯•ä»ç›¸åº”çš„æ®µä¸­æ£€ç´¢ä¹‹å‰ï¼Œé¦–å…ˆæ£€æŸ¥translogä»»ä½•æœ€è¿‘çš„å˜æ›´ã€‚è¿™æ„å‘³ç€å®ƒæ€»æ˜¯èƒ½å¤Ÿå®æ—¶çš„è·å–åˆ°æ–‡æ¡£çš„æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨åˆ·æ–°ï¼ˆflushï¼‰ä¹‹åï¼Œæ®µè¢«å…¨é‡æäº¤ï¼Œå¹¶ä¸”äº‹åŠ¡æ—¥å¿—è¢«æ¸…ç©ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a07a9cdbab644103bb5c7dc06148cffd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=KoTl3yJA98FpVxaVLfhv490%2BQ2g%3D" alt="Elasticsearch translog" loading="lazy"/></p>
<h3 data-id="heading-13">flush API</h3>
<p>è¿™ä¸ªæ‰§è¡Œä¸€ä¸ªæäº¤å¹¶ä¸”æˆªæ–­translogçš„è¡Œä¸ºåœ¨Elasticsearchè¢«ç§°ä½œä¸€æ¬¡flushï¼Œåˆ†ç‰‡æ¯30åˆ†é’Ÿè¢«è‡ªåŠ¨åˆ·æ–°ï¼ˆflushï¼‰ï¼Œæˆ–è€…åœ¨translogå¤ªå¤§ï¼ˆ512Mï¼‰çš„æ—¶å€™ä¹Ÿä¼šåˆ·æ–°ã€‚
flush APIå¯ä»¥è¢«ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ‰‹å·¥çš„åˆ·æ–°ï¼ˆflushï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">POST /blogs/_flush

POST /_flush?wait_for_ongoin
</code></pre>
<ul>
<li>åˆ·æ–°ï¼ˆflushï¼‰blogsç´¢å¼•</li>
<li>åˆ·æ–°ï¼ˆflushï¼‰æ‰€æœ‰çš„ç´¢å¼•å¹¶ä¸”ç­‰å¾…æ‰€æœ‰åˆ·æ–°åœ¨è¿”å›å‰å®Œæˆï¼Œæˆ‘ä»¬å¾ˆå°‘éœ€è¦è‡ªå·±æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸ªflushæ“ä½œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨åˆ·æ–°å°±å¤Ÿäº†ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯è¯´ï¼Œåœ¨é‡å¯èŠ‚ç‚¹æˆ–è€…å…³é—­ä¹‹å‰æ‰§è¡Œflushæœ‰ç›Šäºä½ çš„ç´¢å¼•ï¼Œå½“Elasticsearchå°è¯•æ¢å¤æˆ–é‡æ–°æ‰“å¼€ä¸€ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå®ƒéœ€è¦é‡æ”¾translogä¸­æ‰€æœ‰çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœæ—¥å¿—è¶ŠçŸ­ï¼Œæ¢å¤çš„ä¼šè¶Šå¿«ã€‚</p>
<h3 data-id="heading-14">Translogå®‰å…¨é—®é¢˜</h3>
<p>Translogæœ‰å¤šå®‰å…¨ï¼Ÿ
Translogçš„ç›®çš„æ˜¯ä¿è¯æ“ä½œä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯å´å¼•å‡ºäº†å¯¹åº”çš„é—®é¢˜ï¼š
åœ¨æ–‡ä»¶è¢«fsyncåˆ°ç£ç›˜å‰ï¼Œè¢«å†™å…¥çš„æ–‡ä»¶åœ¨é‡å¯ä¹‹åå°±ä¼šä¸¢å¤±ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡éƒ½ä¼šå‘ç”Ÿã€‚æœ€ç»ˆï¼ŒåŸºæœ¬ä¸Šï¼Œè¿™æ„å‘³ç€åœ¨æ•´ä¸ªè¯·æ±‚è¢«fsyncåˆ°ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡çš„translogä¹‹å‰ï¼Œä½ çš„å®¢æˆ·ç«¯ä¸ä¼šå¾—åˆ°ä¸€ä¸ª200çš„OKå“åº”ï¼Œåœ¨æ¯æ¬¡å†™è¯·æ±‚åæ‰§è¡Œä¸€ä¸ªfsyncä¼šå¸¦æ¥æ€§èƒ½ä¸Šçš„æŸå¤±ï¼Œå°½ç®¡å®è·µè¡¨æ˜è¿™ä¸ªæŸå¤±å¹¶ä¸å¤§ï¼ˆç‰¹åˆ«æ˜¯blukå¯¼å…¥ï¼Œåœ¨ä¸€æ¬¡è¯·æ±‚æ—¶å¹³æ‘Šäº†å¤§é‡çš„æ–‡æ¡£å¼€é”€ï¼‰
ä½†æ˜¯å¯¹äºä¸€äº›å¤§å®¹é‡çš„å¶å°”ä¸¢å¤±å‡ ç§’æ•°æ®é—®é¢˜å¹¶ä¸çœ¼ä¸­çš„é›†ç¾¤ï¼Œä½¿ç”¨å¼‚æ­¥çš„fsyncè¿˜æ˜¯æ¯”è¾ƒæœ‰ç›Šçš„ã€‚æ¯”å¦‚ï¼Œå†™å…¥çš„æ•°æ®è¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå†æ¯5ç§’æ‰§è¡Œä¸€æ¬¡fsyncã€‚
è¿™ä¸ªè¡Œä¸ºå¯ä»¥é€šè¿‡è®¾ç½®durabilityå‚æ•°ä¸ºasyncæ¥å¯åŠ¨ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_index/x_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;index.translog.durability&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;async&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;index.translog.sync_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">5</span>s&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸ªé€‰é¡¹å¯ä»¥é’ˆå¯¹ç´¢å¼•å•ç‹¬è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€ä¿®æ”¹ï¼Œå¦‚æœä½ å†³å®šä½¿ç”¨å¼‚æ­¥translogçš„è¯ï¼Œä½ éœ€è¦ä¿è¯åœ¨å‘ç”Ÿcrashæ—¶ï¼Œä¸¢å¤±æ‰sync_intervalæ—¶é—´æ®µçš„æ•°æ®ä¹Ÿæ— æ‰€è°“ã€‚è¯·åœ¨å†³å®šå‰çŸ¥æ™“è¿™ä¸ªç‰¹æ€§ã€‚
å¦‚æœä½ ä¸ç¡®å®šè¿™ä¸ªè¡Œä¸ºçš„åæœï¼Œæœ€å¥½ä½¿ç”¨é»˜è®¤å‚æ•°ï¼š"index.translog.durability": "request" æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚</p>
<h2 data-id="heading-15">é”™è¯¯é€ŸæŸ¥</h2>









































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>å†™å…¥è¿”å› 201/200ï¼Œä½†ç«‹å³æœç´¢ä¸åˆ°æ–‡æ¡£</td><td>è¿‘å®æ—¶è¯­ä¹‰ï¼šrefresh_interval ä¸º 1sï¼Œå°šæœªè§¦å‘ Refresh</td><td>æŸ¥çœ‹ç´¢å¼• settings ä¸­ refresh_intervalï¼Œç›‘æ§ refresh é¢‘ç‡</td><td>å…³é”®é“¾è·¯å¯ä¸´æ—¶è°ƒç”¨ _refreshï¼Œæˆ–ç¼©çŸ­ refresh_intervalï¼›æ‰¹é‡å†™å…¥é˜¶æ®µç›¸ååº”è°ƒå¤§æˆ–å…³é—­</td></tr><tr><td>èŠ‚ç‚¹é‡å¯åä¸¢å¤±å‡ ç§’é’Ÿå†…çš„å†™å…¥</td><td>translog ä½¿ç”¨ async æ¨¡å¼ï¼Œsync_interval å†…çš„æ•°æ®æœª fsync</td><td>æŸ¥çœ‹ index.translog.durability å’Œ index.translog.sync_interval</td><td>å¯¹å…³é”®ä¸šåŠ¡ä½¿ç”¨ durability=requestï¼Œç¼©çŸ­ sync_intervalï¼›é‡è¦å˜æ›´å‰æ‰‹åŠ¨ _flush</td></tr><tr><td>é›†ç¾¤æ¢å¤æˆ–åˆ†ç‰‡é‡å¯æ—¶é—´å¼‚å¸¸é•¿</td><td>é•¿æœŸæœª flushï¼Œtranslog ä½“ç§¯è¿‡å¤§ï¼Œæ¢å¤æ—¶éœ€è¦é‡æ”¾å¤§é‡æ“ä½œ</td><td>æŸ¥çœ‹ç´¢å¼•çš„ translog å¤§å°ã€RECOVERING çŠ¶æ€è€—æ—¶</td><td>è°ƒæ•´ flush ç­–ç•¥ï¼›åœ¨æµé‡ä½è°·æ‰§è¡Œ _flushï¼›å¿…è¦æ—¶ä½¿ç”¨æ»šåŠ¨ç´¢å¼•å‡å°å•ç´¢å¼•ä½“é‡</td></tr><tr><td>å†™å…¥ååä½ï¼Œç£ç›˜ IO æŒç»­åé«˜</td><td>refresh_interval è¿‡å°æˆ–é¢‘ç¹æ‰‹å·¥ _refresh / _flush</td><td>ç›‘æ§æ¯ç§’ refresh/flush æ¬¡æ•°ä¸ segment ç”Ÿæˆé¢‘ç‡</td><td>å¯¼å…¥é˜¶æ®µè®¾ç½® refresh_interval=-1ï¼Œå¯¼å…¥å®Œæˆåå†æ¢å¤ï¼›å‡å°‘ä¸å¿…è¦çš„æ‰‹å·¥ _refreshï¼_flush</td></tr><tr><td>ç£ç›˜ç©ºé—´å¢é•¿å¿«ï¼Œsegment æ•°é‡çˆ†ç‚¸</td><td>åˆ é™¤/æ›´æ–°é¢‘ç¹ã€merge å‹åŠ›å¤§ï¼Œflush/æ»šåŠ¨ç­–ç•¥ä¸å½“</td><td>é€šè¿‡ _cat/segmentsã€store size è§‚å¯Ÿ segment æ•°é‡ä¸å¤§å°</td><td>é‡‡ç”¨æ»šåŠ¨ç´¢å¼•æ²»ç†å†·æ•°æ®ï¼Œå®šæœŸå¯¹åªè¯»ç´¢å¼•ç”¨ force mergeï¼Œä¼˜åŒ–åˆ é™¤/æ›´æ–°æ¨¡å¼</td></tr></tbody></table>
<h2 data-id="heading-16">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-17">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-18">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-180 Java æ¥å…¥ FastDFSï¼šè‡ªç¼–è¯‘å®¢æˆ·ç«¯ä¸ Maven/Spring Boot å®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-19">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI]]></title>    <link>https://juejin.cn/post/7582073642869948431</link>    <guid>https://juejin.cn/post/7582073642869948431</guid>    <pubDate>2025-12-11T01:59:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582073642869948431" data-draft-id="7582131164727787560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-11T01:59:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:59:41.000Z" title="Thu Dec 11 2025 01:59:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´åº•ï¼Œè‹¥è®ºåŠç§‘æŠ€é¢†åŸŸè¢«æåŠæœ€å¤šã€æ‰¿è½½æœ€å¤šæœªæ¥æƒ³è±¡çš„å…³é”®è¯ï¼Œâ€œé‡å­è®¡ç®—â€å¿…å®šä½åˆ—å‰èŒ…ã€‚å®ƒä¸å†ä»…ä»…æ˜¯å®éªŒå®¤ä¸­çš„æ·±å¥¥æ¦‚å¿µï¼Œè€Œæ˜¯ä½œä¸ºä¸€è‚¡åˆ‡å®çš„å˜é©åŠ›é‡ï¼Œå¼€å§‹å©å‡»ç°å®é—®é¢˜çš„å¤§é—¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†é‚£äº›è®©ç»å…¸è®¡ç®—æœºå€æ„Ÿå‹åŠ›çš„å¤æ‚è®¡ç®—ä»»åŠ¡æ—¶ã€‚è€Œè¿™è‚¡åŠ›é‡æœ€é”‹èŠ’åˆéœ²çš„æ–¹å‘ä¹‹ä¸€ï¼Œä¾¿æ˜¯ä¼˜åŒ–â€”â€”äººå·¥æ™ºèƒ½ä¹ƒè‡³ä¼—å¤šç§‘å­¦å’Œå·¥ä¸šé¢†åŸŸçš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p><strong>æœ€å‰æ²¿çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿ</strong>ï¼Œæ— è®ºæ˜¯è‡ªåŠ¨é©¾é©¶æ±½è½¦è¿˜æ˜¯è‚¡ç¥¨é¢„æµ‹æ¨¡å‹ï¼Œéƒ½åœ¨ä¸æ–­è°ƒæ•´ã€å®Œå–„å’Œä»ç»éªŒä¸­å­¦ä¹ çš„è¿‡ç¨‹ä¸­åšå‡ºæƒè¡¡ã€‚è¿™äº›å†³ç­–èƒŒåï¼Œéšè—ç€äººå·¥æ™ºèƒ½ä¸­æœ€é‡è¦çš„ä¸€ç¯ï¼š<strong>ä¼˜åŒ–</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè®­ç»ƒç”¨äºè¯†åˆ«äº¤é€šæ ‡å¿—æˆ–é¢„æµ‹æˆ¿ä»·çš„äººå·¥æ™ºèƒ½æ¨¡å‹ä¼šä»ç¤ºä¾‹ä¸­å­¦ä¹ ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®ƒæŒç»­æ”¹è¿›å­¦ä¹ æ–¹å¼ã€‚æ¯ä¸€æ­¥éƒ½è°ƒæ•´æ•°ç™¾ä¸‡ä¸ªå‚æ•°ï¼Œå¾®è°ƒæƒé‡å’Œåç½®ï¼Œä»¥å‡å°‘é¢„æµ‹è¯¯å·®å¹¶æé«˜å‡†ç¡®æ€§ã€‚</p>
<p>ä½ å¯ä»¥å°†æ­¤è¿‡ç¨‹è§†ä¸ºä¸€ä¸ª<strong>å¤§è§„æ¨¡ä¼˜åŒ–é—®é¢˜</strong>ã€‚ç›®æ ‡æ˜¯æ‰¾åˆ°èƒ½å¤Ÿæä¾›å‡†ç¡®ç»“æœã€åŒæ—¶é¿å…è¿‡æ‹Ÿåˆæˆ–æµªè´¹è®¡ç®—èµ„æºçš„æœ€ä½³å‚æ•°ç»„åˆã€‚</p>
<p>äº‹å®ä¸Šï¼Œ<strong>ä¼˜åŒ–æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†</strong>ã€‚æ— è®ºæ˜¯å›¾åƒè¯†åˆ«è¿˜æ˜¯ä»·æ ¼é¢„æµ‹ï¼ŒAIæ¨¡å‹éƒ½å¿…é¡»åœ¨æ— æ•°å¯èƒ½æ€§ä¸­å¯»æ‰¾æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚ä½†éšç€æ¨¡å‹å’Œæ•°æ®é›†çš„å¢é•¿ï¼Œè¿™ç§æœç´¢å˜å¾—æ—¥ç›Šå¤æ‚ä¸”è®¡ç®—æˆæœ¬é«˜æ˜‚ã€‚</p>
<p><strong>é‡å­ä¼˜åŒ–</strong>æ˜¯ä¸€ç§æ–°å…´çš„æ–¹æ³•ï¼Œå¯èƒ½æœ‰åŠ©äºåº”å¯¹è¿™ä¸€æŒ‘æˆ˜ã€‚å®ƒåŸºäº<strong>é‡å­è®¡ç®—</strong>ï¼Œåè€…åˆ©ç”¨é‡å­åŠ›å­¦åŸç†ä»¥å…¨æ–°æ–¹å¼å¤„ç†ä¿¡æ¯ã€‚</p>
<p>ä¸åªèƒ½æ˜¯0æˆ–1çš„ç»å…¸æ¯”ç‰¹ä¸åŒï¼Œé‡å­è®¡ç®—æœºä½¿ç”¨<strong>é‡å­æ¯”ç‰¹</strong>ï¼Œå¯ä»¥åŒæ—¶å¤„äºå¤šç§çŠ¶æ€ã€‚è¿™ä½¿å¾—å®ƒä»¬åœ¨æŸäº›æƒ…å†µä¸‹èƒ½å¤Ÿå¹¶è¡Œæ¢ç´¢è®¸å¤šå¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œä»è€Œæ¯”ç»å…¸æ–¹æ³•æ›´é«˜æ•ˆåœ°è§£å†³å¤æ‚çš„ä¼˜åŒ–é—®é¢˜ã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>é‡å­å¹¶è¡Œæ€§</strong> ä¸åŒäºåŒæ—¶è¿è¡Œå¤šä¸ªç»å…¸å¤„ç†å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¦‚ç‡æ€§çš„è¿‡ç¨‹ï¼Œä¾èµ–äºé‡å­å¹²æ¶‰ æ¥äº§ç”Ÿæœ‰ç”¨ç»“æœã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ„å‘³ç€é‡å­è®¡ç®—æœºå¹¶ä¸ä¼šä¸€æ¬¡æ€§æµ‹è¯•æ‰€æœ‰å¯èƒ½æ€§ã€‚ç›¸åï¼Œå®ƒä»¬åˆ©ç”¨å¹²æ¶‰ç°è±¡â€”â€”æŸäº›å¯èƒ½æ€§ç›¸äº’å¢å¼ºï¼Œè€Œå¦ä¸€äº›åˆ™ç›¸äº’æŠµæ¶ˆâ€”â€”æ¥å¢åŠ æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆçš„å‡ ç‡ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨é‡å­ä¼˜åŒ–å¦‚ä½•å·¥ä½œã€å®ƒä¸ºä½•é‡è¦ï¼Œä»¥åŠå®ƒå¯¹æœªæ¥æ™ºèƒ½è®¡ç®—å¯èƒ½æ„å‘³ç€ä»€ä¹ˆã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯é‡å­ä¼˜åŒ–ï¼Ÿ</strong></h2>
<p>é‡å­ä¼˜åŒ–æ˜¯é‡å­è®¡ç®—é¢†åŸŸå†…ä¸€ä¸ªä¸æ–­å‘å±•çš„åˆ†æ”¯ï¼Œä¸“æ³¨äºåˆ©ç”¨é‡å­åŠ›å­¦çš„ç‹¬ç‰¹æ€§è´¨æ¥è§£å†³å¤æ‚çš„ä¼˜åŒ–é—®é¢˜ã€‚å®ƒå»ºç«‹åœ¨æ•°åå¹´çš„è®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦ç ”ç©¶åŸºç¡€ä¸Šï¼Œå°†ä¸¤è€…ç»“åˆä»¥åº”å¯¹ä¼ ç»Ÿè®¡ç®—éš¾ä»¥åº”å¯¹çš„æŒ‘æˆ˜ã€‚</p>
<p>åˆ©ç”¨é‡å­ç³»ç»Ÿè¿›è¡Œä¼˜åŒ–çš„æƒ³æ³•æœ€æ—©å‡ºç°äº20ä¸–çºª90å¹´ä»£æœ«ï¼Œå½“æ—¶ç ”ç©¶äººå‘˜å¼€å§‹æ¢ç´¢å åŠ ï¼ˆåŒæ—¶å¤„äºå¤šç§çŠ¶æ€ï¼‰å’Œçº ç¼ ï¼ˆç›¸äº’å…³è”çš„é‡å­æ¯”ç‰¹ï¼‰ç­‰é‡å­åŸç†å¦‚ä½•åº”ç”¨äºé—®é¢˜æ±‚è§£ã€‚</p>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™æ¼”å˜æˆäº†é‡å­ä¼˜åŒ–ï¼Œç ”ç©¶äººå‘˜å¼€å‘å‡ºåˆ©ç”¨é‡å­æ•ˆåº”æ¥é«˜æ•ˆæœç´¢å¤§å‹å¤æ‚é—®é¢˜ç©ºé—´ä¸­æœ€ä¼˜è§£çš„ç®—æ³•ã€‚</p>
<h2 data-id="heading-1"><strong>é‡å­ä¼˜åŒ–çš„åŸºç¡€</strong></h2>
<p>å…¶æ ¸å¿ƒï¼Œé‡å­ä¼˜åŒ–å»ºç«‹åœ¨ä¸‰ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†ä¹‹ä¸Šï¼š<strong>é‡å­ç®—æ³•ã€é‡å­æ¯”ç‰¹</strong> <strong>å’ŒÂ é‡å­ç”µè·¯</strong>ã€‚é‡å­ç®—æ³•æä¾›äº†èƒ½å¤Ÿé«˜æ•ˆæ¢ç´¢å¤§é‡å¯èƒ½è§£çš„é€»è¾‘ã€‚</p>
<p>è¿™äº›ç®—æ³•æ“ä½œäºé‡å­æ¯”ç‰¹ä¸Šï¼Œå³é‡å­ä¿¡æ¯çš„åŸºæœ¬å•ä½ã€‚å®ƒä»¬ä¸ç»å…¸æ¯”ç‰¹ï¼ˆä¼ ç»Ÿè®¡ç®—æœºä¸­æ•°æ®çš„äºŒè¿›åˆ¶å•ä½ï¼Œåªèƒ½å–0æˆ–1å€¼ï¼‰ä¸åŒï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å¤„äº<strong>å åŠ æ€</strong>ï¼ŒåŒæ—¶è¡¨ç¤º0å’Œ1ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0604e3bc91a842418f410967a66492fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=BJ7VfaMJlMyLXY9VCWIYVBeaG4o%3D" alt="screenshot_2025-12-10_15-13-58.png" loading="lazy"/></p>
<p>è¿™ç§ç‹¬ç‰¹å±æ€§ä½¿å¾—é‡å­ç³»ç»Ÿèƒ½å¤Ÿ<strong>åŒæ—¶è¯„ä¼°å¤šç§å¯èƒ½æ€§</strong>ï¼Œæå¤§åœ°æ‰©å±•äº†å…¶è®¡ç®—æ½œåŠ›ã€‚åŒæ—¶ï¼Œ<strong>é‡å­ç”µè·¯</strong> é€šè¿‡ä¸€ç³»åˆ—çš„é‡å­é—¨è¿æ¥é‡å­æ¯”ç‰¹ï¼Œæ§åˆ¶ä¿¡æ¯å¦‚ä½•æµåŠ¨å’Œç›¸äº’ä½œç”¨ï¼Œé€æ­¥å¼•å¯¼ç³»ç»Ÿè¶‹å‘æ¥è¿‘æœ€ä¼˜çš„è§£ã€‚</p>
<h2 data-id="heading-2"><strong>ç»å…¸ä¼˜åŒ– vs. é‡å­ä¼˜åŒ–</strong></h2>
<p>ä»¥ä¸‹æ˜¯ç»å…¸ä¼˜åŒ–ä¸é‡å­ä¼˜åŒ–æ–¹æ³•ä¹‹é—´çš„å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š</p>
<ul>
<li><strong>è®¡ç®—é£æ ¼ï¼š</strong> ç»å…¸ç®—æ³•ä¸€æ¬¡æµ‹è¯•ä¸€ä¸ªè§£ã€‚é‡å­ç®—æ³•é€šè¿‡åˆ©ç”¨é‡å­ç‰©ç†çš„ç‹¬ç‰¹å±æ€§ï¼Œå¯ä»¥åŒæ—¶è€ƒè™‘å¤šç§å¯èƒ½æ€§ã€‚</li>
<li><strong>å¤„ç†èƒ½åŠ›ï¼š</strong> ç»å…¸è®¡ç®—æœºä½¿ç”¨åªèƒ½æ˜¯0æˆ–1çš„æ¯”ç‰¹ã€‚é‡å­è®¡ç®—æœºä½¿ç”¨é‡å­æ¯”ç‰¹ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶æ˜¯0å’Œ1ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’é“¾æ¥ï¼Œä»è€Œèƒ½å¤Ÿå¤„ç†æ›´å¤æ‚çš„é—®é¢˜ã€‚</li>
<li><strong>é—®é¢˜è§„æ¨¡ï¼š</strong> ç»å…¸ä¼˜åŒ–é€‚ç”¨äºè¾ƒå°æˆ–ä¸­ç­‰å¤æ‚åº¦çš„é—®é¢˜ã€‚é‡å­ä¼˜åŒ–æ­£åœ¨è¢«å¼€å‘ç”¨äºå¤„ç†å½“ä»Šè®¡ç®—æœºéš¾ä»¥åº”å¯¹çš„ã€æ›´å¤§æ›´å¤æ‚çš„é—®é¢˜ã€‚</li>
<li><strong>ç»“æœï¼š</strong> ç»å…¸ç»“æœæ˜¯å¯é¢„æµ‹ä¸”å¯é‡å¤çš„ã€‚é‡å­ç»“æœåŸºäºæ¦‚ç‡ï¼Œå› æ­¤åŒä¸€ä»»åŠ¡å¯èƒ½ç»™å‡ºç•¥æœ‰ä¸åŒçš„ç»“æœï¼Œéœ€è¦é€šè¿‡å¤šæ¬¡è¿è¡Œæ¥ä¼˜åŒ–ï¼Œä»¥æ‰¾åˆ°æœ€ä½³ç­”æ¡ˆã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/676efba69c7b44868e13e7bc302d3e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=KUk53Cv%2FoDru9L%2B7LMO7ADg8sIg%3D" alt="screenshot_2025-12-10_15-14-28.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>é‡å­ä¼˜åŒ–å¦‚ä½•å·¥ä½œ</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é‡å­ä¼˜åŒ–çš„å®é™…å·¥ä½œæµç¨‹ã€‚ä¸€åˆ‡éƒ½å§‹äºå®šä¹‰ç°å®ä¸–ç•Œé—®é¢˜ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºé‡å­è®¡ç®—æœºå¯ä»¥å¤„ç†çš„å½¢å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯é‡å­ä¼˜åŒ–æ¶‰åŠçš„ä¸»è¦æ­¥éª¤æ¦‚è¿°ï¼š</p>
<ul>
<li><strong>å°†é—®é¢˜è¡¨è¿°ä¸ºèƒ½é‡æ™¯è§‚ï¼š</strong> æ¯ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œä¾‹å¦‚è§„åˆ’é€è´§è·¯çº¿æˆ–è°ƒä¼˜æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œéƒ½å¯ä»¥æè¿°ä¸ºä¸€ä¸ªèƒ½é‡çº§åˆ«ç»„æˆçš„æ™¯è§‚ã€‚æ¯ä¸ªå¯èƒ½çš„ç­”æ¡ˆéƒ½æœ‰ä¸€ä¸ªèƒ½é‡å€¼ï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä½çš„é‚£ä¸ªï¼Œè¿™ä»£è¡¨äº†æœ€é«˜æ•ˆæˆ–æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>å°†é—®é¢˜ç¼–ç åˆ°é‡å­ç”µè·¯ä¸­ï¼š</strong> ç„¶åå°†é—®é¢˜è½¬æ¢ä¸ºé‡å­ç”µè·¯ã€‚åœ¨è¿™é‡Œï¼Œé‡å­æ¯”ç‰¹ ä»£è¡¨æ•°æ®ï¼Œå¹¶å¯ä»¥é€šè¿‡å åŠ åŒæ—¶æ¢ç´¢è®¸å¤šè§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>å¼•å¯¼ç³»ç»Ÿè¶‹å‘æœ€ä½³è§£ï¼š</strong> é‡å­è®¡ç®—æœºéšåé€æ­¥è°ƒæ•´é‡å­æ¯”ç‰¹ï¼Œå…è®¸ç³»ç»Ÿç§»å‘æœ€ä½èƒ½é‡æˆ–æœ€ä½³è§£ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºé‡å­é€€ç«æˆ–ç»çƒ­æ¼”åŒ–ï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ–¹æ³•ã€‚å®ƒå¸®åŠ©ç³»ç»Ÿç¨³å®šåœ¨æœ€ç†æƒ³çš„çŠ¶æ€ã€‚</li>
<li><strong>æµ‹é‡å’Œè§£é‡Šç»“æœï¼š</strong> å½“ç³»ç»Ÿç¨³å®šåï¼Œå¯¹é‡å­æ¯”ç‰¹è¿›è¡Œæµ‹é‡ï¼Œäº§ç”Ÿä¸€ä¸ªè¿‘ä¼¼è§£ã€‚é€šå¸¸ä¼šè¿›è¡Œå¤šæ¬¡è¿è¡Œä»¥è¡¡é‡è§£çš„è´¨é‡å¹¶ç¡®è®¤å¯é æ€§ã€‚</li>
<li><strong>ç»“åˆç»å…¸è®¡ç®—è¿›è¡Œç²¾ç‚¼ï¼š</strong> æœ€åï¼Œå°†ç»å…¸è®¡ç®—é‡æ–°çº³å…¥å¾ªç¯ã€‚å®ƒä»¬åˆ†æå’Œå¾®è°ƒé‡å­è¿è¡Œçš„ç»“æœä»¥æé«˜å‡†ç¡®æ€§ã€‚è¿™ç§æ··åˆæ–¹æ³•ï¼Œä¾‹å¦‚åœ¨QAOAå’ŒVQEä¸­ä½¿ç”¨ï¼Œç»“åˆäº†ç»å…¸å’Œé‡å­ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œä»¥è·å¾—æ›´å¥½çš„æ•´ä½“æ€§èƒ½ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>æ ¸å¿ƒé‡å­ä¼˜åŒ–ç®—æ³•</strong></h2>
<p>å¾—ç›Šäºé‡å­è®¡ç®—çš„æœ€æ–°è¿›å±•ï¼Œç ”ç©¶äººå‘˜å·²ç»å¼€å‘äº†ä¸€ç³»åˆ—æ—¨åœ¨æ›´é«˜æ•ˆè§£å†³å¤æ‚é—®é¢˜çš„é‡å­ä¼˜åŒ–ç®—æ³•ã€‚è¿™äº›æ–¹æ³•æ­£åœ¨å¡‘é€ è¯¥é¢†åŸŸçš„æœªæ¥ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å…¶ä¸­ä¸€äº›ä¸»è¦çš„ç®—æ³•ã€‚</p>
<ul>
<li><strong>é‡å­é€€ç«</strong></li>
</ul>
<p>é‡å­é€€ç«æ˜¯ä¸€ç§ç”¨äºè§£å†³ä¼˜åŒ–é—®é¢˜çš„æŠ€æœ¯ï¼Œè¿™äº›é—®é¢˜æ¶‰åŠä»ä¼—å¤šå¯èƒ½æ€§ä¸­æ‰¾åˆ°æœ€ä½³çš„æ’åˆ—æˆ–ç»„åˆã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¸ºç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œä¾‹å¦‚è°ƒåº¦é€è´§ã€è§„åˆ’è½¦è¾†è·¯çº¿æˆ–å¯¹ç›¸ä¼¼æ•°æ®ç‚¹è¿›è¡Œåˆ†ç»„ã€‚</p>
<p>è¯¥æ–¹æ³•çš„çµæ„Ÿæ¥æºäºç§°ä¸ºé€€ç«çš„ç‰©ç†è¿‡ç¨‹ï¼Œå³ææ–™è¢«ç¼“æ…¢å†·å´ä»¥è¾¾åˆ°ç¨³å®šçš„ä½èƒ½çŠ¶æ€ã€‚ç±»ä¼¼åœ°ï¼Œé‡å­é€€ç«é€æ¸å¼•å¯¼é‡å­ç³»ç»Ÿè¶‹å‘å…¶æœ€ä½èƒ½é‡çŠ¶æ€ï¼Œè¿™ä»£è¡¨äº†é—®é¢˜çš„æœ€ä½³å¯èƒ½è§£ã€‚</p>
<p>è¿™ä¸ªåŸºäºç»çƒ­é‡å­è®¡ç®—åŸç†çš„è¿‡ç¨‹ï¼Œå…è®¸ç³»ç»Ÿæ¢ç´¢è®¸å¤šæ½œåœ¨è§£å¹¶æœ€ç»ˆæ”¶æ•›åˆ°ä¸€ä¸ªæ¥è¿‘æœ€ä¼˜çš„è§£ã€‚ç”±äºç»“æœæ˜¯æ¦‚ç‡æ€§çš„ï¼Œè¯¥è¿‡ç¨‹é€šå¸¸é‡å¤å¤šæ¬¡ï¼Œå¹¶å¸¸éšåä½¿ç”¨ç»å…¸è®¡ç®—æ¥ä¼˜åŒ–ç­”æ¡ˆã€‚</p>
<p>é‡å­é€€ç«åœ¨ç‰©æµã€èšç±»åˆ†æå’Œèµ„æºåˆ†é…ç­‰é¢†åŸŸçš„ç°å®ä¸–ç•Œä¼˜åŒ–é—®é¢˜è§£å†³ä¸­æ˜¾ç¤ºå‡ºæ½œåŠ›ã€‚ç„¶è€Œï¼Œç ”ç©¶äººå‘˜ä»åœ¨æ¢ç´¢å®ƒåœ¨ä½•æ—¶ä»¥åŠå¦‚ä½•èƒ½æ¯”ä¼ ç»Ÿæ–¹æ³•è¡¨ç°å¾—æ›´å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f8443f75d2a4083b94f880dcb70e333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=tRkTMdOZViQpCGncn4y9mPQrV04%3D" alt="screenshot_2025-12-10_15-14-39.png" loading="lazy"/></p>
<ul>
<li><strong>é‡å­è¿‘ä¼¼ä¼˜åŒ–ç®—æ³•</strong></li>
</ul>
<p>é‡å­è¿‘ä¼¼ä¼˜åŒ–ç®—æ³•ä¹Ÿå¤„ç†ç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œä½†å…¶æ–¹å¼ä¸é‡å­é€€ç«ä¸åŒã€‚å®ƒå¹¶éé€æ¸æ¼”åŒ–åˆ°æœ€ä½èƒ½é‡çŠ¶æ€ï¼Œè€Œæ˜¯åœ¨ä¸¤ä¸ªç§°ä¸ºå“ˆå¯†é¡¿é‡çš„èƒ½é‡å‡½æ•°ä¹‹é—´äº¤æ›¿åˆ‡æ¢ã€‚</p>
<p>ä¸€ä¸ªä»£è¡¨é—®é¢˜çš„ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ï¼Œå¦ä¸€ä¸ªåˆ™å¸®åŠ©ç³»ç»Ÿæ¢ç´¢æ–°çš„é…ç½®ã€‚é€šè¿‡åœ¨è¿™äº›é˜¶æ®µä¹‹é—´åˆ‡æ¢ï¼Œç®—æ³•ç¨³æ­¥ç§»å‘æ¥è¿‘æœ€ä¼˜çš„è§£ã€‚</p>
<p>QAOAåœ¨æ··åˆé‡å­-ç»å…¸ç³»ç»Ÿä¸Šè¿è¡Œï¼Œé‡å­è®¡ç®—æœºç”Ÿæˆå¯èƒ½çš„è§£ï¼Œè€Œç»å…¸è®¡ç®—æœºåœ¨æ¯æ¬¡è¿è¡Œåè°ƒæ•´å‚æ•°ã€‚è¿™ç§æ–¹æ³•ä½¿QAOAæˆä¸ºè°ƒåº¦ã€è·¯å¾„è§„åˆ’ä»¥åŠå›¾é—®é¢˜ï¼ˆå¦‚æœ€å¤§å‰²å’Œé¡¶ç‚¹è¦†ç›–ï¼‰ç­‰å¤šç§ä¼˜åŒ–ä»»åŠ¡çš„çµæ´»å·¥å…·ã€‚å°½ç®¡ç ”ç©¶ä»åœ¨è¿›è¡Œä¸­ï¼ŒQAOAè¢«å¹¿æ³›è§†ä¸ºç»“åˆç»å…¸ä¸é‡å­ä¼˜åŒ–å‰æ™¯å¹¿é˜”çš„ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>å˜åˆ†é‡å­æœ¬å¾æ±‚è§£å™¨</strong></li>
</ul>
<p>å¦ä¸€ä¸ªé‡è¦çš„ç®—æ³•æ˜¯å˜åˆ†é‡å­æœ¬å¾æ±‚è§£å™¨ã€‚ä¸å¤„ç†æ¶‰åŠç¦»æ•£é€‰æ‹©çš„ç»„åˆä¼˜åŒ–é—®é¢˜çš„QAOAå’Œé‡å­é€€ç«ä¸åŒï¼ŒVQEä¸“æ³¨äºè¿ç»­ä¼˜åŒ–ï¼Œå…¶ä¸­å˜é‡å¯ä»¥å–ä¸€ä¸ªèŒƒå›´å†…çš„å€¼ï¼Œè€Œéå›ºå®šé€‰é¡¹ã€‚</p>
<p>å®ƒä¸»è¦ç”¨äºä¼°è®¡é‡å­ç³»ç»Ÿçš„åŸºæ€ï¼Œå³å¯èƒ½çš„æœ€ä½èƒ½é‡ã€‚è¿™ä½¿å¾—å®ƒåœ¨ç ”ç©¶ç‰©ç†å’ŒåŒ–å­¦ä¸­çš„åˆ†å­å’Œææ–™è¡Œä¸ºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>VQEä¹Ÿé‡‡ç”¨æ··åˆæ–¹æ³•ï¼Œç»“åˆäº†é‡å­è®¡ç®—å’Œç»å…¸è®¡ç®—ã€‚é‡å­è®¡ç®—æœºå‡†å¤‡å’Œæµ‹è¯•å¯èƒ½çš„çŠ¶æ€ï¼Œè€Œç»å…¸è®¡ç®—æœºåˆ†æç»“æœå¹¶è°ƒæ•´å‚æ•°ä»¥æé«˜å‡†ç¡®æ€§ã€‚</p>
<p>ç”±äºå®ƒéœ€è¦æ›´å°‘çš„é‡å­æ¯”ç‰¹å’Œæ›´ç®€å•çš„ç”µè·¯ï¼ŒVQEåœ¨å½“å‰å«å™ªå£°ä¸­ç­‰è§„æ¨¡é‡å­è®¾å¤‡ä¸Šè¡¨ç°è‰¯å¥½ã€‚è¿™æ˜¯å½“å‰ä¸€ä»£çš„é‡å­è®¡ç®—æœºï¼Œè™½ç„¶é‡å­æ¯”ç‰¹æ•°é‡æœ‰é™ä¸”å—å™ªå£°å½±å“ï¼Œä½†ä»è¶³å¤Ÿå¼ºå¤§ï¼Œå¯ç”¨äºç ”ç©¶å’Œæ—©æœŸå®é™…å®éªŒã€‚</p>
<p>VQEå·²æˆä¸ºé‡å­åŒ–å­¦ã€ææ–™ç§‘å­¦å’Œè¿‡ç¨‹ä¼˜åŒ–ä¸­çš„é‡è¦å·¥å…·ã€‚å®ƒå¸®åŠ©ç ”ç©¶äººå‘˜å»ºæ¨¡åˆ†å­ã€ç ”ç©¶ååº”å¹¶æ‰¾åˆ°ç¨³å®šæ„å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6cb3a72029141e8821e89796dccfed0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=szPt6tTDRDqXe7%2FoUsQAZdtLaxs%3D" alt="screenshot_2025-12-10_15-15-06.png" loading="lazy"/></p>
<ul>
<li><strong>é‡å­åŠå®šè§„åˆ’</strong></li>
</ul>
<p>åŠå®šè§„åˆ’æ˜¯ä¸€ç§æ•°å­¦æ–¹æ³•ï¼Œç”¨äºè§£å†³åŒ…å«å˜é‡é—´çº¿æ€§å…³ç³»çš„ä¼˜åŒ–é—®é¢˜ã€‚å½“ç›®æ ‡æ˜¯åœ¨ä¿æŒæŸäº›æ¡ä»¶åœ¨æœ‰æ•ˆèŒƒå›´å†…çš„åŒæ—¶æ‰¾åˆ°æœ€ä½³å¯èƒ½ç»“æœæ—¶ï¼Œé€šå¸¸ä¼šåº”ç”¨å®ƒã€‚</p>
<p>é‡å­SDPç®—æ³•æ—¨åœ¨åŠ å¿«è¿™äº›è®¡ç®—é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®æ¶‰åŠè®¸å¤šå˜é‡æˆ–å¤æ‚é«˜ç»´ç©ºé—´æ—¶ã€‚å®ƒä»¬åˆ©ç”¨é‡å­è®¡ç®—åŸç†åŒæ—¶åˆ†æå¤šç§å¯èƒ½æ€§ï¼Œè¿™å¯ä»¥ä½¿è§£å†³å¤§è§„æ¨¡é—®é¢˜æ›´é«˜æ•ˆã€‚</p>
<p>è¿™äº›ç®—æ³•æ­£åœ¨æœºå™¨å­¦ä¹ ã€ä¿¡å·å¤„ç†å’Œæ§åˆ¶ç³»ç»Ÿç­‰é¢†åŸŸè¿›è¡Œæ¢ç´¢ï¼Œå¯èƒ½æœ‰åŠ©äºæ¨¡å‹è¯†åˆ«æ¨¡å¼ã€æ”¹è¿›é¢„æµ‹æˆ–ç®¡ç†å¤æ‚ç³»ç»Ÿã€‚å°½ç®¡ç ”ç©¶ä»åœ¨è¿›è¡Œä¸­ï¼Œé‡å­SDPæ˜¾ç¤ºå‡ºåŠ é€Ÿç»å…¸è®¡ç®—æœºéš¾ä»¥åº”å¯¹çš„å…ˆè¿›ä¼˜åŒ–ä»»åŠ¡çš„æ½œåŠ›ã€‚</p>
<h2 data-id="heading-5"><strong>é‡å­ä¼˜åŒ–åœ¨äººå·¥æ™ºèƒ½ä¸­çš„åº”ç”¨</strong></h2>
<p>å°½ç®¡é‡å­ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ´»è·ƒçš„ç ”ç©¶é¢†åŸŸï¼Œä½†å®ƒä¹Ÿå¼€å§‹åœ¨äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸæ‰¾åˆ°å®é™…åº”ç”¨ã€‚ç ”ç©¶äººå‘˜æ­£åœ¨æ¢ç´¢é‡å­æ–¹æ³•å¦‚ä½•å¸®åŠ©æ›´é«˜æ•ˆåœ°è§£å†³å¤æ‚é—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°æ¢è®¨ä¸€äº›æ–°å…´çš„ç¤ºä¾‹å’Œç”¨ä¾‹ï¼Œè¿™äº›çªå‡ºäº†å®ƒåœ¨ç°å®åœºæ™¯ä¸­çš„æ½œåŠ›ã€‚</p>
<ul>
<li><strong>åŠ é€Ÿæœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–æ­£è¢«æ¢ç´¢ç”¨äºæ”¹è¿›æœºå™¨å­¦ä¹ æ¨¡å‹çš„è°ƒä¼˜ï¼Œç‰¹åˆ«æ˜¯åœ¨è¶…å‚æ•°ä¼˜åŒ–å’Œç‰¹å¾é€‰æ‹©æ–¹é¢ã€‚ä¸­æ€§åŸå­å¤„ç†å™¨çš„æœ€æ–°è¿›å±•ä¹Ÿæ­£åœ¨æ‰©å¤§é‡å­ä¼˜åŒ–åœ¨AIå’Œæœºå™¨å­¦ä¹ ä¸­çš„å®éªŒèŒƒå›´ã€‚</p>
<p>è¿™äº›å¤„ç†å™¨åˆ©ç”¨è¢«æ¿€å…‰å›ºå®šä½çš„å•ä¸ªåŸå­ä½œä¸ºé‡å­æ¯”ç‰¹ã€‚è¿™ä½¿å¾—ç ”ç©¶äººå‘˜èƒ½å¤Ÿæ„å»ºå¯æ‰©å±•ä¸”ç¨³å®šçš„é‡å­ç³»ç»Ÿæ¥æµ‹è¯•å¤æ‚ç®—æ³•ã€‚</p>
<ul>
<li><strong>è¡Œä¸šåº”ç”¨ä¸ç ”ç©¶äº®ç‚¹</strong></li>
</ul>
<p>é¢†å…ˆçš„ç§‘æŠ€å…¬å¸å·²ç»åœ¨è¯•éªŒè¿™äº›æƒ³æ³•ã€‚ä¾‹å¦‚ï¼Œè°·æ­Œçš„ç ”ç©¶å›¢é˜Ÿæœ€è¿‘å±•ç¤ºäº†ç”Ÿæˆå¼é‡å­ä¼˜åŠ¿ï¼Œå…¶ä¸­ä¸€ä¸ª68é‡å­æ¯”ç‰¹çš„å¤„ç†å™¨å­¦ä¼šäº†ç”Ÿæˆå¤æ‚çš„åˆ†å¸ƒï¼Œæš—ç¤ºäº†å…¶åœ¨è®­ç»ƒç”Ÿæˆæ¨¡å‹ä¸­çš„åº”ç”¨ã€‚</p>
<p>åŒæ ·ï¼Œè‹±ä¼Ÿè¾¾æ­£é€šè¿‡å°†é‡å­ç ”ç©¶æ•´åˆåˆ°å…¶è¶…çº§è®¡ç®—å’ŒGPUç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œåœ¨é‡å­ä¸AIä¹‹é—´æ¶èµ·æ¡¥æ¢ã€‚ä¾‹å¦‚ï¼Œå®ƒæ¨å‡ºäº†åŠ é€Ÿé‡å­ç ”ç©¶ä¸­å¿ƒï¼Œä»¥å°†é‡å­ç¡¬ä»¶ä¸AIç³»ç»Ÿç»“åˆã€‚</p>
<p>æ­¤å¤–ï¼Œäºšé©¬é€Šäº‘ç§‘æŠ€åœ¨ Amazon Braket ä¸Šå¼€å‘äº†ä¸€ç§æ··åˆé‡å­-ç»å…¸å·¥ä½œæµï¼Œä½¿ç”¨é‡å­ç”µè·¯ä¸ç»å…¸ä¼˜åŒ–ç»“åˆæ¥å¾®è°ƒå›¾åƒåˆ†ç±»ä»»åŠ¡çš„å‚æ•°ã€‚</p>
<ul>
<li><strong>ç‰©æµã€è°ƒåº¦å’Œè·¯å¾„è§„åˆ’ä¸­çš„ä¼˜åŒ–</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–æœ€å®ç”¨çš„é¢†åŸŸä¹‹ä¸€æ˜¯ç‰©æµå’Œè°ƒåº¦ã€‚è¿™äº›ä»»åŠ¡åŒ…æ‹¬è·¯çº¿è§„åˆ’ã€è½¦è¾†åˆ†é…å’Œèµ„æºåˆ†é…ã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯èƒ½æºç”µç½‘è°ƒåº¦ï¼Œè¿è¥å•†å¿…é¡»åœ¨å®æ—¶å¹³è¡¡ç”µåŠ›ä¾›éœ€çš„åŒæ—¶é™ä½æˆæœ¬å¹¶ä¿æŒå¯é æ€§ã€‚ç ”ç©¶äººå‘˜å·²ä½¿ç”¨é‡å­ä¼˜åŒ–å°†è¿™ä¸€è°ƒåº¦æŒ‘æˆ˜è¡¨ç¤ºä¸ºèƒ½é‡æ™¯è§‚æˆ–å“ˆå¯†é¡¿é‡ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°ä»£è¡¨æœ€æœ‰æ•ˆé…ç½®çš„æœ€ä½èƒ½é‡çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒD-Wave çš„é‡å­æ±‚è§£å™¨å·²é’ˆå¯¹æ­¤ç±»é—®é¢˜è¿›è¡Œæµ‹è¯•ï¼Œä¸ä¼ ç»Ÿä¼˜åŒ–æ–¹æ³•ç›¸æ¯”ï¼Œæ˜¾ç¤ºå‡ºæ›´å¿«ã€æ›´çµæ´»çš„ç»“æœã€‚</p>
<p>ç±»ä¼¼çš„æ€è·¯æ­£åœ¨æŠ•èµ„ç»„åˆç®¡ç†å’Œä¾›åº”é“¾è§„åˆ’ç­‰é¢†åŸŸè¿›è¡Œç ”ç©¶ã€‚éšç€ç¡¬ä»¶çš„æ”¹è¿›ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¼šæ”¹å˜AIç³»ç»Ÿåœ¨ç°å®ä¸–ç•Œçº¦æŸä¸‹è¿›è¡Œè§„åˆ’å’Œå†³ç­–çš„æ–¹å¼ã€‚</p>
<ul>
<li><strong>è¯ç‰©å‘ç°å’Œææ–™è®¾è®¡ä¸­çš„AIä¸é‡å­è®¡ç®—</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–åœ¨ç†è§£å¤æ‚åˆ†å­ç›¸äº’ä½œç”¨å’Œèƒ½é‡æ™¯è§‚è‡³å…³é‡è¦çš„é¢†åŸŸä¹Ÿè¶Šæ¥è¶Šå—åˆ°å…³æ³¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¯ç‰©å‘ç°å’Œææ–™ç§‘å­¦ä¸­ï¼Œå¯»æ‰¾æœ€ç¨³å®šçš„åˆ†å­ç»“æ„æˆ–æ„å‹å°±æ˜¯ä¸€ä¸ªä¼˜åŒ–æŒ‘æˆ˜ã€‚</p>
<p>æ··åˆé‡å­ç®—æ³•ï¼Œå¦‚VQEï¼Œæ­£è¢«ç”¨äºåŠ é€Ÿè›‹ç™½è´¨ç»“æ„é¢„æµ‹å’Œåˆ†å­æ„è±¡æœç´¢ç­‰è¿‡ç¨‹ã€‚ç ”ç©¶äººå‘˜è¿˜åœ¨æ¢ç´¢ç»“åˆé‡å­è®¡ç®—å’Œäººå·¥æ™ºèƒ½çš„æ–¹æ³•ï¼Œä»¥æ”¹è¿›æ¨¡å‹å¦‚ä½•ä»æ•°æ®ä¸­å­¦ä¹ å’Œæå–ç‰¹å¾ã€‚</p>
<p>éšç€é‡å­ç¡¬ä»¶æŒç»­è¿›æ­¥ï¼Œè¿™äº›ç»“åˆçš„æ–¹æ³•å¯èƒ½ä¼šåœ¨åŒ–å­¦ã€ç”Ÿç‰©å­¦å’Œææ–™ç ”ç©¶é¢†åŸŸå¸¦æ¥é‡å¤§çªç ´ï¼Œå®ç°æ›´å¿«çš„å‘ç°å’Œåœ¨åˆ†å­å±‚é¢ä¸Šæ›´ç²¾ç¡®çš„æ¨¡æ‹Ÿã€‚</p>
<h2 data-id="heading-6"><strong>é‡å­ä¼˜åŒ–çš„ä¼˜ç¼ºç‚¹</strong></h2>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨é‡å­ä¼˜åŒ–çš„ä¸€äº›ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>é‡å­å¯å‘å¼ç®—æ³•ï¼š</strong> å³ä½¿åœ¨å¤§å‹é‡å­è®¡ç®—æœºå¯ç”¨ä¹‹å‰ï¼Œç ”ç©¶äººå‘˜å°±å·²ç»åœ¨ç»å…¸ç³»ç»Ÿä¸Šä½¿ç”¨é‡å­å¯å‘å¼ä¼˜åŒ–æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•é€šè¿‡æ¨¡æ‹Ÿé‡å­ç­–ç•¥ï¼Œå¯ä»¥ä¸ºç‰¹å®šç±»å‹çš„é—®é¢˜æä¾›æ›´å¿«çš„æ€§èƒ½ã€‚</li>
<li><strong>æ”¹è¿›çš„ç¡¬ä»¶å’Œæ··åˆæ±‚è§£å™¨ï¼š</strong> æ–°å‹é‡å­å¤„ç†å™¨å’ŒåŸºäºäº‘çš„æ··åˆæ±‚è§£å™¨çš„å‘å±•ï¼Œä½¿å¾—ç»“åˆé‡å­å’Œç»å…¸è®¡ç®—æˆä¸ºå¯èƒ½ã€‚è¿™ä½¿å¾—å³ä½¿åœ¨å½“å‰æ—©æœŸç¡¬ä»¶é˜¶æ®µï¼Œä¹Ÿèƒ½è¿›è¡Œå®é™…æµ‹è¯•å’Œå®éªŒã€‚</li>
<li><strong>åˆä½œç ”ç©¶è¿›å±•ï¼š</strong> IBM Quantumã€QiskitÂ å’Œå…¶ä»–å¼€æ”¾ç ”ç©¶ç¤¾åŒºæ­£åœ¨ç§¯æå¼€å‘ç®—æ³•ã€å·¥å…·åŒ…å’Œæ•™è‚²èµ„æºï¼Œä½¿é‡å­ä¼˜åŒ–æ›´æ˜“äºä½¿ç”¨ã€‚</li>
</ul>
<p>å°½ç®¡é‡å­ç ”ç©¶è¿›å±•è¿…é€Ÿï¼Œä½†ä»å­˜åœ¨æŸäº›æŒ‘æˆ˜é˜»ç¢å¤§è§„æ¨¡é‡‡ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®é™åˆ¶å› ç´ ï¼š</p>
<ul>
<li><strong>ç¡¬ä»¶é™åˆ¶ï¼š</strong> å½“å‰çš„é‡å­è®¡ç®—æœºé‡å­æ¯”ç‰¹æ•°é‡æœ‰é™ï¼Œå¹¶ä¸”å¯¹å™ªå£°ã€é€€ç›¸å¹²å’Œæ“ä½œé”™è¯¯é«˜åº¦æ•æ„Ÿã€‚è¿™äº›å› ç´ é™ä½äº†ç»“æœçš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä½¿å¾—éš¾ä»¥æ‰©å±•ç³»ç»Ÿä»¥åº”å¯¹å¤æ‚çš„ä¼˜åŒ–ä»»åŠ¡ã€‚</li>
<li><strong>ç»å…¸æ¨¡æ‹Ÿé™åˆ¶ï¼š</strong> åœ¨ç»å…¸è®¡ç®—æœºä¸Šæ¨¡æ‹Ÿå¤§å‹é‡å­ç³»ç»Ÿéœ€æ±‚å·¨å¤§ï¼Œå› ä¸ºæ‰€éœ€çš„è®¡ç®—èµ„æºéšç€é‡å­æ¯”ç‰¹æ•°é‡å‘ˆæŒ‡æ•°å¢é•¿ã€‚è¿™ä½¿å¾—æµ‹è¯•å’ŒéªŒè¯å¤§è§„æ¨¡é‡å­ç®—æ³•å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</li>
<li><strong>ç¼ºä¹åŸºå‡†æµ‹è¯•æ ‡å‡†ï¼š</strong> é‡å­ä¼˜åŒ–ç ”ç©¶ä»ç„¶ç¼ºä¹ä¸€è‡´çš„åŸºå‡†æ¥æ¯”è¾ƒç®—æ³•å’Œç¡¬ä»¶æ€§èƒ½ã€‚å°½ç®¡æ­£åœ¨åŠªåŠ›åˆ›å»ºæ ‡å‡†åŒ–çš„è¯„ä¼°æ–¹æ³•ï¼Œä½†å°šæœªå½¢æˆè¡¡é‡å®é™…æ€§èƒ½æ”¹è¿›çš„é€šç”¨æ¡†æ¶ã€‚</li>
</ul>
<h2 data-id="heading-7"><strong>å…³é”®è¦ç‚¹</strong></h2>
<p>é‡å­ä¼˜åŒ–æ­£åœ¨é‡å¡‘æˆ‘ä»¬åœ¨äººå·¥æ™ºèƒ½ã€ç§‘å­¦å’Œå·¥ä¸šä¸­æ€è€ƒé—®é¢˜è§£å†³çš„æ–¹å¼ã€‚é€šè¿‡å°†é‡å­è®¡ç®—çš„åŠ›é‡ä¸ç»å…¸æ–¹æ³•ç›¸ç»“åˆï¼Œç ”ç©¶äººå‘˜æ­£åœ¨å¯»æ‰¾åº”å¯¹å¤æ‚æ€§å’ŒåŠ é€Ÿå‘ç°çš„æ–°é€”å¾„ã€‚éšç€ç¡¬ä»¶çš„æ”¹è¿›å’Œç®—æ³•çš„æˆç†Ÿï¼Œé‡å­ä¼˜åŒ–å¯èƒ½æˆä¸ºä¸‹ä¸€ä»£æ™ºèƒ½æŠ€æœ¯çš„å…³é”®é©±åŠ¨åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶]]></title>    <link>https://juejin.cn/post/7582077175001366571</link>    <guid>https://juejin.cn/post/7582077175001366571</guid>    <pubDate>2025-12-11T00:04:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582077175001366571" data-draft-id="7582067084839796790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-11T00:04:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:04:50.000Z" title="Thu Dec 11 2025 00:04:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶å•ä¸ªè´¦å·çš„ç™»å½•æ•°é‡ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§è½»é‡çº§å®ç°æ–¹æ¡ˆï¼Œçµæ´»æ”¯æŒå•è´¦å·å•ç™»å½•å’Œå¤šç™»å½•ä¸¤ç§æ¨¡å¼ã€‚</p>
<p><strong>ä»˜è´¹ç³»ç»Ÿåœºæ™¯</strong>ï¼šæŸåœ¨çº¿æ•™è‚²å¹³å°é”€å”®VIPä¼šå‘˜è´¦å·ï¼Œå¦‚æœä¸é™åˆ¶ç™»å½•æ•°é‡ï¼Œä¸€ä¸ªè´¦å·å¯èƒ½è¢«å¤šä¸ªç”¨æˆ·å…±äº«ï¼Œå¯¼è‡´æ”¶å…¥æŸå¤±ã€‚å¹³å°éœ€è¦ç¡®ä¿ä¸€ä¸ªä»˜è´¹è´¦å·åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·åŒæ—¶åœ¨çº¿ã€‚</p>
<p><strong>ä¼ä¸šåŠå…¬ç³»ç»Ÿ</strong>ï¼šä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨ï¼Œä¼ä¸šOAç³»ç»Ÿé€šå¸¸è¦æ±‚å‘˜å·¥è´¦å·åªèƒ½åœ¨æŒ‡å®šè®¾å¤‡ä¸Šç™»å½•ã€‚å½“å‘˜å·¥åœ¨æ–°è®¾å¤‡ç™»å½•æ—¶ï¼Œéœ€è¦è‡ªåŠ¨è¸¢å‡ºå…¶ä»–è®¾å¤‡ä¸Šçš„ä¼šè¯ï¼Œé˜²æ­¢è´¦å·è¢«æ»¥ç”¨ã€‚</p>
<h4 data-id="heading-0">ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹</h4>
<p>ä¼ ç»Ÿçš„è´¦å·ç™»å½•æ§åˆ¶æ–¹æ¡ˆå­˜åœ¨å„ç§é—®é¢˜ï¼š</p>
<p><strong>Sessionæ–¹æ¡ˆçš„å±€é™</strong>ï¼šä½¿ç”¨HttpSessionå®ç°è™½ç„¶ç®€å•ï¼Œä½†åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¼šé¢ä¸´Sessionå…±äº«çš„éš¾é¢˜ã€‚å¼•å…¥Spring Sessionè™½ç„¶å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œä¾èµ–ï¼Œå¯¹äºç®€å•çš„éœ€æ±‚æ¥è¯´æœ‰äº›"æ€é¸¡ç”¨ç‰›åˆ€"ã€‚</p>
<p><strong>Spring Securityçš„å¤æ‚æ€§</strong>ï¼šSpring Securityæä¾›äº†å¼ºå¤§çš„å®‰å…¨æ¡†æ¶ï¼Œä½†å¯¹äºä»…ä»…éœ€è¦ç™»å½•æ§åˆ¶çš„éœ€æ±‚æ¥è¯´ï¼Œå­¦ä¹ æˆæœ¬è¿‡é«˜ï¼Œé…ç½®å¤æ‚ï¼Œè€Œä¸”å¼•å…¥äº†å¾ˆå¤šä¸å¿…è¦çš„åŠŸèƒ½ã€‚</p>
<p><strong>æ•°æ®åº“å­˜å‚¨çš„æ€§èƒ½é—®é¢˜</strong>ï¼šå°†ç™»å½•çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¼šå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚è™½ç„¶å¯ä»¥é€šè¿‡ç¼“å­˜ä¼˜åŒ–ï¼Œä½†åˆå¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦ã€‚</p>
<p><strong>å‰ç«¯çŠ¶æ€ç®¡ç†çš„éº»çƒ¦</strong>ï¼šä¼ ç»Ÿçš„é¡µé¢è·³è½¬æ–¹å¼å·²ç»ä¸é€‚åº”ç°ä»£å‰ç«¯æ¡†æ¶çš„éœ€æ±‚ã€‚å‰åç«¯åˆ†ç¦»æ¶æ„éœ€è¦ç»Ÿä¸€çš„APIæ¥å£å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ–¹æ¡ˆæ¦‚è¿°</h2>
<h4 data-id="heading-2">2.1 æ ¸å¿ƒæ€è·¯</h4>
<p>æœ¬æ–‡æå‡ºçš„æ–¹æ¡ˆåŸºäºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç†å¿µï¼š</p>
<p><strong>Tokenè®¤è¯</strong>ï¼šä½¿ç”¨è‡ªå®šä¹‰Tokenæ›¿ä»£ä¼ ç»Ÿçš„Sessionæœºåˆ¶ã€‚Tokenæ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è½»æ¾æ‰©å±•ï¼ŒåŒæ—¶é¿å…äº†Sessionå…±äº«çš„å¤æ‚æ€§é—®é¢˜ã€‚</p>
<p><strong>æ‹¦æˆªå™¨éªŒè¯</strong>ï¼šé€šè¿‡Spring MVCçš„æ‹¦æˆªå™¨æœºåˆ¶ç»Ÿä¸€å¤„ç†ç™»å½•éªŒè¯ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œé€šè¿‡é…ç½®å³å¯å®ç°å¯¹æ‰€æœ‰è¯·æ±‚çš„æ‹¦æˆªã€‚</p>
<p><strong>æ¥å£æŠ½è±¡</strong>ï¼šå®šä¹‰æ¸…æ™°çš„SessionManageræ¥å£ï¼Œå°†å­˜å‚¨é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚è¿™æ ·æ—¢å¯ä»¥ä½¿ç”¨Mapå®ç°ï¼Œä¹Ÿå¯ä»¥è½»æ¾åˆ‡æ¢åˆ°Redisï¼Œä¸ºç³»ç»Ÿæ‰©å±•æä¾›å¯èƒ½ã€‚</p>
<p><strong>æ¨¡å¼åˆ‡æ¢</strong>ï¼šé€šè¿‡ç®€å•çš„é…ç½®é¡¹å³å¯åœ¨"å•ç™»å½•"å’Œ"å¤šç™»å½•"æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-3">2.2 æŠ€æœ¯é€‰å‹</h4>
<p><strong>æ ¸å¿ƒä¾èµ–</strong></p>
<p>ä»…ä½¿ç”¨Spring Boot Web Starterï¼Œä¸å¼•å…¥ä»»ä½•é¢å¤–çš„å®‰å…¨æ¡†æ¶æˆ–ä¸­é—´ä»¶ã€‚</p>
<p><strong>å­˜å‚¨æ–¹æ¡ˆ</strong></p>
<p>å•æœºéƒ¨ç½²ï¼šä½¿ç”¨ConcurrentHashMap
åˆ†å¸ƒå¼éƒ¨ç½²ï¼šé€šè¿‡æ¥å£æŠ½è±¡æ— ç¼åˆ‡æ¢åˆ°Redis</p>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒå®ç°</h2>
<h4 data-id="heading-5">3.1 ä¼šè¯ç®¡ç†æ¥å£</h4>
<p>SessionManageræ¥å£æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†ä¼šè¯ç®¡ç†çš„æ‰€æœ‰åŸºæœ¬æ“ä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-comment">// ç™»å½•ï¼šç”Ÿæˆå¹¶è¿”å›Token</span>
    String <span class="hljs-title function_">login</span><span class="hljs-params">(String username, LoginInfo loginInfo)</span>;

    <span class="hljs-comment">// ç™»å‡ºï¼šä½¿æŒ‡å®šTokenå¤±æ•ˆ</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">(String token)</span>;

    <span class="hljs-comment">// éªŒè¯ï¼šæ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ</span>
    TokenInfo <span class="hljs-title function_">validateToken</span><span class="hljs-params">(String token)</span>;

    <span class="hljs-comment">// æŸ¥è¯¢ï¼šè·å–ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒToken</span>
    List <span class="hljs-title function_">getUserTokens</span><span class="hljs-params">(String username)</span>;

    <span class="hljs-comment">// ç®¡ç†ï¼šå¼ºåˆ¶ç”¨æˆ·ä¸‹çº¿</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">kickoutUser</span><span class="hljs-params">(String username)</span>;
}
</code></pre>
<h4 data-id="heading-6">3.2 Mapå®ç°æ–¹æ¡ˆ</h4>
<p>MapSessionManageræ˜¯åŸºäºConcurrentHashMapçš„å…·ä½“å®ç°ï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªMapæ¥ç®¡ç†ä¼šè¯çŠ¶æ€ï¼š</p>
<p><strong>tokenMap</strong>ï¼šå­˜å‚¨Tokenåˆ°TokenInfoçš„æ˜ å°„ï¼Œç”¨äºå¿«é€ŸéªŒè¯Tokençš„æœ‰æ•ˆæ€§ã€‚TokenInfoåŒ…å«ç”¨æˆ·åã€ç™»å½•æ—¶é—´ã€è¿‡æœŸæ—¶é—´ç­‰å…³é”®ä¿¡æ¯ã€‚</p>
<p><strong>userTokenMap</strong>ï¼šå­˜å‚¨ç”¨æˆ·ååˆ°Tokené›†åˆçš„æ˜ å°„ï¼Œç”¨äºç®¡ç†ç”¨æˆ·çš„æ‰€æœ‰ä¼šè¯ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œå½“éœ€è¦è¸¢å‡ºç”¨æˆ·æ—¶ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°è¯¥ç”¨æˆ·çš„æ‰€æœ‰Tokenå¹¶ä½¿å…¶å¤±æ•ˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapSessionManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-comment">// Token -&gt; TokenInfo çš„æ˜ å°„ï¼Œç”¨äºéªŒè¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span> <span class="hljs-variable">tokenMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// Username -&gt; Tokené›†åˆçš„æ˜ å°„ï¼Œç”¨äºç®¡ç†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&gt; userTokenMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">login</span><span class="hljs-params">(String username, LoginInfo loginInfo)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> generateToken();
        <span class="hljs-type">TokenInfo</span> <span class="hljs-variable">tokenInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenInfo</span>(token, username, loginInfo,
            System.currentTimeMillis() + properties.getTokenExpireTime() * <span class="hljs-number">1000</span>);

        <span class="hljs-comment">// å•ç™»å½•æ¨¡å¼ï¼šå…ˆè¸¢å‡ºæ—§ä¼šè¯</span>
        <span class="hljs-keyword">if</span> (properties.getMode() == LoginMode.SINGLE) {
            kickoutUser(username);
        }

        <span class="hljs-comment">// å­˜å‚¨æ–°Token</span>
        tokenMap.put(token, tokenInfo);
        userTokenMap.computeIfAbsent(username, k -&gt; ConcurrentHashMap.newKeySet())
                   .add(token);

        <span class="hljs-keyword">return</span> token;
    }
}
</code></pre>
<h4 data-id="heading-7">3.3 æ‹¦æˆªå™¨è®¾è®¡</h4>
<p>LoginInterceptorè´Ÿè´£æ‹¦æˆªæ‰€æœ‰éœ€è¦è®¤è¯çš„è¯·æ±‚ï¼ŒéªŒè¯Tokençš„æœ‰æ•ˆæ€§ã€‚å®ƒçš„è®¾è®¡è¦ç‚¹åŒ…æ‹¬ï¼š</p>
<p><strong>è·¯å¾„æ’é™¤</strong>ï¼šé™æ€èµ„æºã€ç™»å½•æ¥å£ç­‰ä¸éœ€è¦è®¤è¯çš„è·¯å¾„éœ€è¦è¢«æ’é™¤ã€‚</p>
<p><strong>Tokenæå–</strong>ï¼šä»HTTPè¯·æ±‚å¤´ä¸­æå–Tokenï¼Œæ”¯æŒè‡ªå®šä¹‰Headeråç§°ã€‚</p>
<p><strong>éªŒè¯é€»è¾‘</strong>ï¼šè°ƒç”¨SessionManageréªŒè¯Tokenï¼Œå°†éªŒè¯ç»“æœå­˜å…¥è¯·æ±‚å±æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SessionManager sessionManager;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request,
                           HttpServletResponse response,
                           Object handler)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> getTokenFromRequest(request);
        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> handleUnauthorized(response, &amp;#<span class="hljs-number">34</span>;è¯·å…ˆç™»å½•&amp;#<span class="hljs-number">34</span>;);
        }

        <span class="hljs-type">TokenInfo</span> <span class="hljs-variable">tokenInfo</span> <span class="hljs-operator">=</span> sessionManager.validateToken(token);
        <span class="hljs-keyword">if</span> (tokenInfo == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> handleUnauthorized(response, &amp;#<span class="hljs-number">34</span>;ç™»å½•å·²è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;);
        }

        <span class="hljs-comment">// å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚ä¸Šä¸‹æ–‡</span>
        request.setAttribute(&amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;, tokenInfo.getUsername());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h4 data-id="heading-8">3.4 é…ç½®ç®¡ç†</h4>
<p>LoginPropertiesé›†ä¸­ç®¡ç†æ‰€æœ‰å¯é…ç½®çš„å‚æ•°ï¼Œé€šè¿‡Spring Bootçš„é…ç½®æœºåˆ¶ï¼Œå¯ä»¥åœ¨application.ymlä¸­çµæ´»è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">app:</span>
  <span class="hljs-attr">login:</span>
    <span class="hljs-comment"># ç™»å½•æ¨¡å¼æ§åˆ¶</span>
    <span class="hljs-attr">mode:</span> <span class="hljs-string">MULTIPLE</span>  <span class="hljs-comment"># SINGLE-å•ç™»å½•, MULTIPLE-å¤šç™»å½•</span>

    <span class="hljs-comment"># Tokenç›¸å…³é…ç½®</span>
    <span class="hljs-attr">token-expire-time:</span> <span class="hljs-number">1800</span>  <span class="hljs-comment"># æœ‰æ•ˆæœŸ30åˆ†é’Ÿ</span>
    <span class="hljs-attr">token-header:</span> <span class="hljs-string">Authorization</span>  <span class="hljs-comment"># è¯·æ±‚å¤´åç§°</span>
    <span class="hljs-attr">token-prefix:</span> <span class="hljs-string">TOKEN_</span>  <span class="hljs-comment"># Tokenå‰ç¼€</span>

    <span class="hljs-comment"># ç»´æŠ¤é…ç½®</span>
    <span class="hljs-attr">enable-auto-clean:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ç”¨è‡ªåŠ¨æ¸…ç†</span>
    <span class="hljs-attr">clean-interval:</span> <span class="hljs-number">5</span>  <span class="hljs-comment"># æ¸…ç†é—´éš”ï¼ˆåˆ†é’Ÿï¼‰</span>
</code></pre>
<h2 data-id="heading-9">å››ã€APIæ¥å£è®¾è®¡</h2>
<h4 data-id="heading-10">4.1 æ¥å£å®šä¹‰</h4>
<p>ç³»ç»Ÿæä¾›äº†ä¸€å¥—RESTful APIæ¥å£ï¼Œæ”¯æŒå®Œæ•´çš„ç”¨æˆ·ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼š</p>






















































<table><thead><tr><th>æ¥å£è·¯å¾„</th><th>è¯·æ±‚æ–¹æ³•</th><th>åŠŸèƒ½è¯´æ˜</th><th>è¯·æ±‚å‚æ•°</th><th>å“åº”æ•°æ®</th></tr></thead><tbody><tr><td>/api/auth/login</td><td>POST</td><td>ç”¨æˆ·ç™»å½•</td><td>username, password</td><td>Tokenä¿¡æ¯</td></tr><tr><td>/api/auth/logout</td><td>POST</td><td>ç”¨æˆ·é€€å‡º</td><td>æ— </td><td>æ“ä½œç»“æœ</td></tr><tr><td>/api/auth/current</td><td>GET</td><td>å½“å‰ç”¨æˆ·</td><td>æ— </td><td>ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td>/api/auth/online</td><td>GET</td><td>åœ¨çº¿åˆ—è¡¨</td><td>æ— </td><td>ç”¨æˆ·ååˆ—è¡¨</td></tr><tr><td>/api/auth/tokens</td><td>GET</td><td>ç”¨æˆ·Tokens</td><td>username</td><td>Tokenåˆ—è¡¨</td></tr><tr><td>/api/auth/kickout</td><td>POST</td><td>è¸¢å‡ºç”¨æˆ·</td><td>username</td><td>æ“ä½œç»“æœ</td></tr></tbody></table>
<h4 data-id="heading-11">4.2 ç»Ÿä¸€å“åº”æ ¼å¼</h4>
<p>æ‰€æœ‰APIæ¥å£éƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// çŠ¶æ€ç </span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;æˆåŠŸ&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>   <span class="hljs-comment">// æç¤ºä¿¡æ¯</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>          <span class="hljs-comment">// ä¸šåŠ¡æ•°æ®</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>çŠ¶æ€ç è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>200ï¼šè¯·æ±‚æˆåŠŸ</li>
<li>401ï¼šæœªè®¤è¯æˆ–Tokenå¤±æ•ˆ</li>
<li>403ï¼šæƒé™ä¸è¶³</li>
<li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>
</ul>
<h4 data-id="heading-12">4.3 ç™»å½•è®¤è¯æµç¨‹</h4>
<p>å®Œæ•´çš„ç™»å½•æµç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>1. ç”¨æˆ·æäº¤å‡­æ®</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">POST</span> /api/auth/login
<span class="hljs-title class_">Content</span>-<span class="hljs-title class_">Type</span>: application/json

{
    &amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;admin&amp;#<span class="hljs-number">34</span>;,
    &amp;#<span class="hljs-number">34</span>;password&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;admin123&amp;#<span class="hljs-number">34</span>;
}
</code></pre>
<p><strong>2. æœåŠ¡ç«¯éªŒè¯å¹¶ç”ŸæˆToken</strong>
æœåŠ¡ç«¯éªŒè¯ç”¨æˆ·åå¯†ç åï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„Tokenï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>Tokenå­—ç¬¦ä¸²ï¼ˆUUIDï¼‰</li>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>ç™»å½•æ—¶é—´</li>
<li>è¿‡æœŸæ—¶é—´</li>
</ul>
<p><strong>3. è¿”å›Tokenç»™å®¢æˆ·ç«¯</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ç™»å½•æˆåŠŸ&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;token&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;TOKEN_550e8400-e29b<span class="hljs-number">-41</span>d4-a716<span class="hljs-number">-446655440000</span>&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;admin&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;expireTime&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">1704067200000</span><span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;loginMode&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;MULTIPLE&amp;#<span class="hljs-number">34</span>;
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>4. å®¢æˆ·ç«¯å­˜å‚¨Token</strong>
æ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼ŒTokenå¯ä»¥å­˜å‚¨åœ¨localStorageï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰æˆ–sessionStorageï¼ˆä¼šè¯çº§åˆ«ï¼‰ã€‚</p>
<p><strong>5. åç»­è¯·æ±‚æºå¸¦Token</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">GET</span> /api/auth/current
<span class="hljs-title class_">Authorization</span>: TOKEN_550e8400-e29b-41d4-a716-<span class="hljs-number">446655440000</span>
</code></pre>
<p><strong>6. æœåŠ¡ç«¯éªŒè¯Token</strong>
æ‹¦æˆªå™¨è‡ªåŠ¨éªŒè¯Tokençš„æœ‰æ•ˆæ€§ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Tokenæ˜¯å¦å­˜åœ¨</li>
<li>Tokenæ˜¯å¦è¿‡æœŸ</li>
<li>Tokenæ˜¯å¦è¢«è¸¢å‡º</li>
</ul>
<h4 data-id="heading-13">4.4 é”™è¯¯å¤„ç†æœºåˆ¶</h4>
<p>å½“è®¤è¯å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè¿”å›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;Tokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å‰ç«¯æ”¶åˆ°401å“åº”åï¼Œä¼šè‡ªåŠ¨æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„Tokenï¼Œå¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚</p>
<h4 data-id="heading-14">4.5 ç®¡ç†åŠŸèƒ½æ¥å£</h4>
<p>ç®¡ç†å‘˜å¯ä»¥é€šè¿‡ä¸“é—¨çš„æ¥å£ç®¡ç†ç³»ç»Ÿç”¨æˆ·ï¼š</p>
<p><strong>è·å–åœ¨çº¿ç”¨æˆ·</strong>ï¼šè¿”å›å½“å‰æ‰€æœ‰åœ¨çº¿ç”¨æˆ·çš„ç”¨æˆ·ååˆ—è¡¨ï¼Œå¯ç”¨äºç›‘æ§å’Œç»Ÿè®¡ã€‚</p>
<p><strong>è¸¢å‡ºæŒ‡å®šç”¨æˆ·</strong>ï¼šå¼ºåˆ¶æŒ‡å®šç”¨æˆ·ä¸‹çº¿ï¼Œæ¸…é™¤å…¶æ‰€æœ‰Tokenï¼Œå¸¸ç”¨äºå¤„ç†å¼‚å¸¸æƒ…å†µã€‚</p>
<p><strong>æŸ¥çœ‹ç”¨æˆ·ä¼šè¯</strong>ï¼šè·å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒTokenï¼Œäº†è§£ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚</p>
<h2 data-id="heading-15">äº”ã€å‰ç«¯å®ç°</h2>
<h4 data-id="heading-16">5.1 æ ¸å¿ƒå®ç°</h4>
<p><strong>api.js</strong>ï¼šè´Ÿè´£æ‰€æœ‰APIè¯·æ±‚çš„å°è£…ï¼ŒåŒ…æ‹¬Tokenç®¡ç†ã€è¯·æ±‚æ‹¦æˆªã€é”™è¯¯å¤„ç†ç­‰ã€‚</p>
<p><strong>é¡µé¢æ¨¡å—</strong>ï¼šlogin.htmlã€index.htmlã€admin.htmlå„è‡ªè´Ÿè´£ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œé€šè¿‡importå¯¼å…¥apiæ¨¡å—ã€‚</p>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨localStorageå’ŒsessionStorageç®¡ç†TokençŠ¶æ€ï¼Œæ”¯æŒ"è®°ä½æˆ‘"åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-17">5.2 Tokenç®¡ç†æœºåˆ¶</h4>
<p>Tokenç®¡ç†æ˜¯å‰ç«¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Tokenè·å–ç­–ç•¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¼˜å…ˆä»localStorageè·å–ï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
        || sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);  <span class="hljs-comment">// å†ä»sessionStorageè·å–</span>
}

<span class="hljs-comment">// Tokenå­˜å‚¨ç­–ç•¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setToken</span>(<span class="hljs-params">token, remember</span>) {
    <span class="hljs-keyword">if</span> (remember) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token);  <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©&amp;#34;è®°ä½æˆ‘&amp;#34;</span>
    } <span class="hljs-keyword">else</span> {
        sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token);  <span class="hljs-comment">// ä»…æœ¬æ¬¡ä¼šè¯æœ‰æ•ˆ</span>
    }
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿æ˜¯ç»™äº†ç”¨æˆ·é€‰æ‹©æƒï¼šéšç§æ•æ„Ÿçš„åœºæ™¯å¯ä»¥ä½¿ç”¨sessionStorageï¼Œç¡®ä¿å…³é—­æµè§ˆå™¨åè‡ªåŠ¨æ¸…é™¤ï¼›ä¸ªäººè®¾å¤‡ä¸Šå¯ä»¥ä½¿ç”¨localStorageï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-18">5.3 è¯·æ±‚æ‹¦æˆªå™¨</h4>
<p>å‰ç«¯å®ç°äº†ä¸€ä¸ªè½»é‡çº§çš„è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨å¤„ç†è®¤è¯ç›¸å…³çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ Token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">getToken</span>();
    <span class="hljs-keyword">if</span> (token) {
        options.<span class="hljs-property">headers</span> = {
            ...options.<span class="hljs-property">headers</span>,
            <span class="hljs-string">'Authorization'</span>: token
        };
    }

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, options);

    <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†401å“åº”</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-title function_">clearToken</span>();
        <span class="hljs-comment">// é¿å…åœ¨ç™»å½•é¡µé‡å¤è·³è½¬</span>
        <span class="hljs-keyword">if</span> (location.<span class="hljs-property">pathname</span> !== <span class="hljs-string">'/login.html'</span>) {
            location.<span class="hljs-property">href</span> = <span class="hljs-string">'/login.html'</span>;
        }
    }

    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
}
</code></pre>
<p>è¿™ä¸ªæ‹¦æˆªå™¨å®ç°äº†ï¼š</p>
<ul>
<li>è‡ªåŠ¨æºå¸¦Tokenï¼Œå‡å°‘é‡å¤ä»£ç </li>
<li>ç»Ÿä¸€çš„401å¤„ç†ï¼Œç¡®ä¿ç”¨æˆ·åœ¨Tokenå¤±æ•ˆæ—¶èƒ½å¤ŸåŠæ—¶é‡æ–°ç™»å½•</li>
</ul>
<h2 data-id="heading-19">å…­ã€æ€»ç»“</h2>
<p>æ•´ä¸ªæ–¹æ¡ˆä»…ä¾èµ–Spring Boot Webï¼Œä¸éœ€è¦å¼•å…¥ä»»ä½•é¢å¤–çš„å®‰å…¨æ¡†æ¶ã€ç¼“å­˜ä¸­é—´ä»¶æˆ–æ•°æ®åº“ã€‚è¿™ä½¿å¾—é¡¹ç›®çš„ä¾èµ–ä¿æŒæœ€å°åŒ–ã€‚</p>
<p>é€šè¿‡SessionManageræ¥å£æŠ½è±¡ï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘ä¸å­˜å‚¨é€»è¾‘çš„å®Œå…¨åˆ†ç¦»ã€‚å½“éœ€è¦ä»å•æœºæ‰©å±•åˆ°åˆ†å¸ƒå¼æ—¶ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªåŸºäºRedisçš„SessionManagerå³å¯ï¼Œä¸šåŠ¡ä»£ç æ— éœ€ä»»ä½•ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/java-examples/tree</span><span class="hljs-regexp">/master/springboot</span>-single-login
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•]]></title>    <link>https://juejin.cn/post/7582090790181879846</link>    <guid>https://juejin.cn/post/7582090790181879846</guid>    <pubDate>2025-12-11T00:10:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582090790181879846" data-draft-id="7582041304655413294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-11T00:10:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:10:11.000Z" title="Thu Dec 11 2025 00:10:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€ä»‹</h3>
<p><code>Params Collections</code> æ˜¯ <code>C# 12</code> ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæ‰©å±•äº†ä¼ ç»Ÿçš„ <code>params</code> å…³é”®å­—åŠŸèƒ½ï¼Œä½¿å…¶ä¸ä»…æ”¯æŒæ•°ç»„ï¼Œè¿˜èƒ½æ”¯æŒå„ç§é›†åˆç±»å‹ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—æ–¹æ³•èƒ½å¤Ÿæ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”è¿™äº›å‚æ•°å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‡å®šçš„é›†åˆç±»å‹ã€‚</p>
<p>å…³é”®ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>å¯å˜å‚æ•°ï¼šè°ƒç”¨è€…å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰ã€‚</p>
</li>
<li>
<p>ç±»å‹å®‰å…¨ï¼š<code>params</code> å‚æ•°æ˜¯å¼ºç±»å‹çš„ï¼Œç¼–è¯‘å™¨ç¡®ä¿å‚æ•°ç±»å‹åŒ¹é…ã€‚</p>
</li>
<li>
<p>å•ä¸€ <code>params</code> å‚æ•°ï¼šä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ª <code>params</code> å‚æ•°ï¼Œä¸”å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚</p>
</li>
<li>
<p><code>C# 12</code> æ‰©å±•ï¼šæ”¯æŒéæ•°ç»„é›†åˆç±»å‹ï¼ˆå¦‚ <code>List</code>, <code>Span</code>ï¼‰ï¼Œé€‚åˆé«˜æ€§èƒ½æˆ–ç‰¹å®šåœºæ™¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-2">æ”¯æŒä»»æ„é›†åˆç±»å‹</h4>
<ul>
<li>å¯æŒ‡å®š <code>Listã€Spanã€IReadOnlyCollection</code> ç­‰ä½œä¸ºå‚æ•°ç±»å‹</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogEntries</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List messages</span>)</span> { ... }
</code></pre>
<h4 data-id="heading-3">è‡ªåŠ¨é›†åˆæ„é€ </h4>
<ul>
<li>ç¼–è¯‘å™¨è‡ªåŠ¨å°†ç¦»æ•£å‚æ•°è½¬æ¢ä¸ºç›®æ ‡é›†åˆç±»å‹å®ä¾‹</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp">AnalyzeNumbers(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>); 
<span class="hljs-comment">// ç­‰æ•ˆäºï¼š</span>
AnalyzeNumbers(<span class="hljs-keyword">new</span> List { <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span> });
</code></pre>
<h4 data-id="heading-4">ä¸ç°æœ‰ params å…¼å®¹</h4>
<ul>
<li>
<p>ä¼ ç»Ÿ <code>params T[]</code> ä»ç„¶æœ‰æ•ˆ</p>
</li>
<li>
<p>æ–°è¯­æ³•ä¸ä¼šç ´åå·²æœ‰ä»£ç </p>
</li>
</ul>
<h3 data-id="heading-5">ä¼ ç»Ÿ params å…³é”®å­—</h3>
<p>åœ¨ <code>C# 12</code> ä¹‹å‰ï¼Œ<code>params</code> å…³é”®å­—åªèƒ½ç”¨äºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¼ ç»Ÿçš„ params æ•°ç»„ç”¨æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">int</span>[] numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨æ–¹å¼</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-6">Params Collections çš„æ–°ç‰¹æ€§</h3>
<p><code>C# 12</code> æ‰©å±•äº† <code>params</code> å…³é”®å­—ï¼Œä½¿å…¶èƒ½å¤Ÿç”¨äºä»»ä½•é›†åˆç±»å‹ï¼Œåªè¦è¯¥ç±»å‹æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚</p>
<h4 data-id="heading-7">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨ params ä¸é›†åˆç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨æ–¹å¼ä¸å˜</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-8">æ”¯æŒçš„æ¡ä»¶</h3>
<p>è¦ä½¿é›†åˆç±»å‹èƒ½å¤Ÿä¸ <code>params</code> å…³é”®å­—ä¸€èµ·ä½¿ç”¨ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p>é›†åˆç±»å‹å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p>é›†åˆç±»å‹å¿…é¡»æœ‰ä¸€ä¸ª <code>Add</code> æ–¹æ³•ï¼Œç”¨äºæ·»åŠ å…ƒç´ </p>
</li>
<li>
<p>é›†åˆç±»å‹å¿…é¡»å®ç° <code>IEnumerable</code></p>
</li>
</ul>
<h4 data-id="heading-9">è‡ªå®šä¹‰é›†åˆä¸ params</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è‡ªå®šä¹‰é›†åˆç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NumberCollection</span> : <span class="hljs-title">IEnumerable</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> List _numbers = <span class="hljs-keyword">new</span>();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> number</span>)</span> =&gt; _numbers.Add(number);
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerator <span class="hljs-title">GetEnumerator</span>()</span> =&gt; _numbers.GetEnumerator();
    
    IEnumerator IEnumerable.GetEnumerator() =&gt; GetEnumerator();
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰é›†åˆä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> NumberCollection numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-10">å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-11">ä¸ Span å’Œ ReadOnlySpan ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨ Span ä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessData</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> Span data</span>)</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; data.Length; i++)
    {
        data[i] *= <span class="hljs-number">2</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
<span class="hljs-built_in">int</span>[] array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
ProcessData(array);
Console.WriteLine(<span class="hljs-built_in">string</span>.Join(&amp;<span class="hljs-meta">#34;, &amp;#34;, array)); // è¾“å‡º: 2, 4, 6, 8, 10</span>
</code></pre>
<h4 data-id="heading-12">ä¸ Immutable Collections ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System.Collections.Immutable;

<span class="hljs-comment">// ä½¿ç”¨ä¸å¯å˜é›†åˆä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessItems</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> ImmutableArray items</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> items)
    {
        Console.WriteLine(item);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessItems(&amp;<span class="hljs-meta">#34;apple&amp;#34;, &amp;#34;banana&amp;#34;, &amp;#34;cherry&amp;#34;);</span>
</code></pre>
<h3 data-id="heading-13">é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-14">æ³›å‹æ–¹æ³•ä¸ params é›†åˆ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ³›å‹æ–¹æ³•ä¸­ä½¿ç”¨ params é›†åˆ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessCollection</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List collection</span>)
    <span class="hljs-keyword">where</span> T : <span class="hljs-keyword">notnull</span></span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> collection)
    {
        Console.WriteLine(item);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessCollection(&amp;<span class="hljs-meta">#34;a&amp;#34;, &amp;#34;b&amp;#34;, &amp;#34;c&amp;#34;); // å­—ç¬¦ä¸²åˆ—è¡¨</span>
ProcessCollection(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);       <span class="hljs-comment">// æ•´æ•°åˆ—è¡¨</span>
</code></pre>
<h4 data-id="heading-15">ä¸æ¨¡å¼åŒ¹é…ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨æ¨¡å¼åŒ¹é…å¤„ç† params é›†åˆ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleValues</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">int</span>[] values</span>)</span>
{
    <span class="hljs-keyword">switch</span> (values)
    {
        <span class="hljs-keyword">case</span> [<span class="hljs-keyword">var</span> first, .. <span class="hljs-keyword">var</span> middle, <span class="hljs-keyword">var</span> last]:
            Console.WriteLine($&amp;<span class="hljs-meta">#34;é¦–: {first}, å°¾: {last}, ä¸­é—´æœ‰ {middle.Length} ä¸ªå…ƒç´ &amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> [<span class="hljs-keyword">var</span> single]:
            Console.WriteLine($&amp;<span class="hljs-meta">#34;å•ä¸ªå€¼: {single}&amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> []:
            Console.WriteLine(&amp;<span class="hljs-meta">#34;ç©ºé›†åˆ&amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
HandleValues(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// è¾“å‡º: é¦–: 1, å°¾: 5, ä¸­é—´æœ‰ 3 ä¸ªå…ƒç´ </span>
HandleValues(<span class="hljs-number">42</span>);            <span class="hljs-comment">// è¾“å‡º: å•ä¸ªå€¼: 42</span>
HandleValues();              <span class="hljs-comment">// è¾“å‡º: ç©ºé›†åˆ</span>
</code></pre>
<h4 data-id="heading-16">ä¸æ¥å£ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨æ¥å£ä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnumerables</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> IEnumerable[] collections</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> collection <span class="hljs-keyword">in</span> collections)
    {
        <span class="hljs-built_in">int</span> sum = collection.Sum();
        Console.WriteLine($&amp;<span class="hljs-meta">#34;é›†åˆæ€»å’Œ: {sum}&amp;#34;);</span>
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessEnumerables(
    <span class="hljs-keyword">new</span> List { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> },
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] { <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span> },
    <span class="hljs-keyword">new</span> HashSet { <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span> }
);
</code></pre>
<h4 data-id="heading-17">é«˜æ€§èƒ½æ±‚å’Œï¼ˆä½¿ç”¨ <code>Span</code>ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> <span class="hljs-title">Average</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> Span numbers</span>)</span>
{
    <span class="hljs-keyword">if</span> (numbers.Length == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-built_in">decimal</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> num <span class="hljs-keyword">in</span> numbers)
    {
        sum += num;
    }
    <span class="hljs-keyword">return</span> sum / numbers.Length;
}

Console.WriteLine(Average(<span class="hljs-number">1.5</span>m, <span class="hljs-number">2.5</span>m, <span class="hljs-number">3.5</span>m)); <span class="hljs-comment">// è¾“å‡º: 2.5</span>
</code></pre>
<ul>
<li>
<p>ä½¿ç”¨ <code>Span</code> é¿å…æ•°ç»„åˆ†é…ï¼Œæé«˜æ€§èƒ½ã€‚</p>
</li>
<li>
<p>é€‚åˆå¤„ç†å¤§é‡æ•°å€¼è®¡ç®—ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>
<p>ç®€åŒ–æ–¹æ³•è°ƒç”¨ï¼šå…è®¸è°ƒç”¨è€…ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå‡å°‘é‡è½½éœ€æ±‚ã€‚</p>
</li>
<li>
<p>å¤„ç†é›†åˆæ•°æ®ï¼šé€‚åˆå¤„ç†åˆ—è¡¨ã€æ•°ç»„æˆ–åºåˆ—ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€å­—ç¬¦ä¸²è¿æ¥ã€æ•°å­¦è®¡ç®—ã€‚</p>
</li>
<li>
<p>é«˜æ€§èƒ½åœºæ™¯ï¼ˆ<code>C# 12+</code>ï¼‰ï¼šä½¿ç”¨ <code>Span</code> æˆ– <code>ReadOnlySpan</code> å‡å°‘å †åˆ†é…ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚</p>
</li>
<li>
<p>ä¸æœ¬æœºä»£ç äº¤äº’ï¼š<code>Span</code> ç±»å‹çš„ <code>params</code> å‚æ•°é€‚åˆä¼ é€’è¿ç»­å†…å­˜å—ã€‚</p>
</li>
<li>
<p>çµæ´»æ¥å£è®¾è®¡ï¼šä¸ºæ–¹æ³•æä¾›é€šç”¨æ¥å£ï¼Œæ”¯æŒä¸åŒæ•°é‡çš„è¾“å…¥ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼]]></title>    <link>https://juejin.cn/post/7582039917217906688</link>    <guid>https://juejin.cn/post/7582039917217906688</guid>    <pubDate>2025-12-11T00:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217906688" data-draft-id="7582044568721621032" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-11T00:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:16:46.000Z" title="Thu Dec 11 2025 00:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redis ä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚å¤§å¤šæ•°å¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€å‘½ä»¤å’Œé…ç½®è°ƒä¼˜ï¼ˆå¦‚ <code>maxmemory</code>ã€<code>expire</code>ï¼‰ï¼Œä½† Redis çš„æ€§èƒ½æ½œåŠ›è¿œä¸æ­¢äºæ­¤ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <strong>5 ä¸ªé²œä¸ºäººçŸ¥çš„åº•å±‚ä¼˜åŒ–æŠ€å·§</strong>ï¼Œç»“åˆæºç å®ç°å’Œç¡¬ä»¶ç‰¹æ€§ï¼Œå¸®åŠ©ä½ å°† Redis æ€§èƒ½æå‡ä¸€å€ç”šè‡³æ›´å¤šã€‚</p>
<hr/>
<h2 data-id="heading-2">1. Pipeline + MULTI/EXECï¼šéšè—çš„ç½‘ç»œä¼˜åŒ–</h2>
<h3 data-id="heading-3">é—®é¢˜èƒŒæ™¯</h3>
<p>å¸¸è§„çš„ Redis æ“ä½œæ˜¯â€œè¯·æ±‚-å“åº”â€æ¨¡å¼ï¼Œæ¯æ¡å‘½ä»¤éƒ½éœ€è¦ä¸€æ¬¡ç½‘ç»œå¾€è¿”ï¼ˆRTTï¼‰ã€‚åœ¨é«˜å»¶è¿Ÿç½‘ç»œä¸­ï¼ˆå¦‚è·¨æœºæˆ¿è°ƒç”¨ï¼‰ï¼Œè¿™ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-4">å†·é—¨æŠ€å·§</h3>
<p>ä½¿ç”¨ <strong>Pipeline</strong> æ‰¹é‡å‘é€å‘½ä»¤å¯ä»¥å‡å°‘ RTTï¼Œä½†æ›´è¿›ä¸€æ­¥çš„æ˜¯ç»“åˆ <code>MULTI/EXEC</code> äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼ ç»Ÿ Pipeline  </span>
<span class="hljs-built_in">echo</span> -e &amp;<span class="hljs-comment">#34;SET k1 v1\nGET k1&amp;#34; | redis-cli --pipe  </span>

<span class="hljs-comment"># Pipeline + MULTI/EXECï¼ˆåŸå­æ€§æ‰¹é‡æ“ä½œï¼‰  </span>
<span class="hljs-built_in">echo</span> -e &amp;<span class="hljs-comment">#34;MULTI\nSET k1 v1\nSET k2 v2\nEXEC&amp;#34; | redis-cli --pipe  </span>
</code></pre>
<h4 data-id="heading-5"><strong>åº•å±‚åŸç†</strong></h4>
<ul>
<li>Pipeline é€šè¿‡ç¼“å†²å‘½ä»¤ä¸€æ¬¡æ€§å‘é€ï¼Œå‡å°‘ TCP/IP åè®®æ ˆçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><code>MULTI/EXEC</code> åœ¨æœåŠ¡ç«¯å°†å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œé¿å…ä¸­é—´çŠ¶æ€å¯¼è‡´çš„é”ç«äº‰ï¼ˆå°¤å…¶åœ¨ Lua è„šæœ¬ä¸­æ›´æ˜æ˜¾ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>æ€§èƒ½å¯¹æ¯”</strong></h4>

























<table><thead><tr><th>æ–¹å¼</th><th>QPS (æœ¬åœ°æµ‹è¯•)</th><th>RTTæ¶ˆè€—</th></tr></thead><tbody><tr><td>Single Command</td><td>~50k</td><td>High</td></tr><tr><td>Pipeline</td><td>~200k</td><td>Low</td></tr><tr><td>Pipeline+MULTI/EXEC</td><td>~300k</td><td>Lowest</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">2. Hash Slot Prefetchingï¼šé›†ç¾¤æ¨¡å¼ä¸‹çš„ç§˜å¯†æ­¦å™¨</h2>
<h3 data-id="heading-8">é—®é¢˜èƒŒæ™¯</h3>
<p>Redis Cluster ä½¿ç”¨å“ˆå¸Œæ§½ï¼ˆ16384 slotsï¼‰åˆ†ç‰‡æ•°æ®ã€‚è·¨èŠ‚ç‚¹è®¿é—®éœ€è¦é¢å¤–çš„ <code>MOVED</code> é‡å®šå‘å¼€é”€ã€‚</p>
<h3 data-id="heading-9">å†·é—¨æŠ€å·§</h3>
<p>é€šè¿‡ <strong>é¢„è®¡ç®— Key çš„å“ˆå¸Œæ§½</strong>ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´è¿ç›®æ ‡èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> rediscluster  

<span class="hljs-comment"># CRC16ç®—æ³•é¢„è®¡ç®—slotï¼ˆä¸Redisæºç ä¸€è‡´ï¼‰  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_slot</span>(<span class="hljs-params">key</span>):  
    crc = binascii.crc16(key.encode()) &amp; <span class="hljs-number">0xFFFF</span>  
    <span class="hljs-keyword">return</span> crc % <span class="hljs-number">16384</span>  

slot = get_slot(&amp;<span class="hljs-comment">#34;user:1000&amp;#34;)  </span>
node = cluster_nodes[slot]   <span class="hljs-comment"># clientç»´æŠ¤slot-nodeæ˜ å°„</span>
node.execute(&amp;<span class="hljs-comment">#34;GET&amp;#34;, &amp;#34;user:1000&amp;#34;) </span>
</code></pre>
<h4 data-id="heading-10"><strong>åº•å±‚åŸç†</strong></h4>
<ul>
<li>Redis Cluster Client ï¼ˆå¦‚ Lettuceï¼‰é»˜è®¤ä¼šç¼“å­˜ <code>MOVED</code>å“åº”ï¼Œä½†é¦–æ¬¡è®¿é—®ä»éœ€é‡å®šå‘ã€‚é¢„è®¡ç®—å®Œå…¨é¿å…æ­¤å¼€é”€ã€‚</li>
<li>CRC16 (<em>src/crc16.c</em>)æ˜¯è½»é‡çº§è®¡ç®—ï¼Œå‡ ä¹æ— é¢å¤–æˆæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-11"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<p>é•¿è¿æ¥+å›ºå®šKeyæ¨¡å¼ï¼ˆå¦‚ä¼šè¯å­˜å‚¨ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-12">3. Memory Alignmentï¼šæ•°æ®ç»“æ„çš„å†…å­˜ç„æœº</h2>
<h3 data-id="heading-13">RedisObjectçš„ç§˜å¯†å¸ƒå±€</h3>
<p>Redisæ‰€æœ‰å€¼éƒ½è¢«å°è£…ä¸º <code>redisObject</code> (<em>server.h</em>)ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">redisObject</span> {</span>    
    <span class="hljs-type">unsigned</span> type:<span class="hljs-number">4</span>;       <span class="hljs-comment">// e.g. OBJ_STRING    </span>
    <span class="hljs-type">unsigned</span> encoding:<span class="hljs-number">4</span>;   <span class="hljs-comment">// e.g. OBJ_ENCODING_INT    </span>
    <span class="hljs-type">unsigned</span> lru:<span class="hljs-number">24</span>;       <span class="hljs-comment">// LRUæ—¶é—´æˆ³    </span>
    <span class="hljs-type">int</span> refcount;          <span class="hljs-comment">//å¼•ç”¨è®¡æ•°    </span>
    <span class="hljs-type">void</span> *ptr;             <span class="hljs-comment">//æŒ‡å‘å®é™…æ•°æ®    </span>
} robj;    
</code></pre>
<h3 data-id="heading-14">CPU Cache Lineä¼˜åŒ–</h3>
<p>ç°ä»£CPUä»¥Cache Lineï¼ˆé€šå¸¸64å­—èŠ‚ï¼‰ä¸ºå•ä½è¯»å–å†…å­˜ã€‚å¦‚æœ<code>robj</code>è·¨è¶Šä¸¤ä¸ªCache Lineï¼Œä¼šå¯¼è‡´å¤šæ¬¡å†…å­˜è®¿é—®ã€‚é€šè¿‡è°ƒæ•´å­—æ®µé¡ºåºæˆ–ç¼–è¯‘å™¨æŒ‡ä»¤å¼ºåˆ¶å¯¹é½ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">attribute__</span>((<span class="hljs-title">aligned</span>(64))) <span class="hljs-title">redisObject</span> {</span> ... } robj;   
</code></pre>
<h4 data-id="heading-15"><strong>å®æµ‹å½±å“</strong></h4>
<p>åœ¨ARMæ¶æ„æœåŠ¡å™¨ä¸Šï¼ˆå¦‚AWS Gravitonï¼‰ï¼Œå¯¹é½åçš„QPSæå‡å¯è¾¾15%ã€‚</p>
<hr/>
<h2 data-id="heading-16">TLS Session Resumptionï¼šåŠ å¯†è¿æ¥çš„æ€§èƒ½æ•‘æ˜Ÿ</h2>
<h3 data-id="heading-17">SSL/TLSæ¡æ‰‹å¼€é”€</h3>
<p>å¯ç”¨TLSåï¼Œæ¯æ¬¡è¿æ¥éœ€è¦å®Œæ•´çš„æ¡æ‰‹æµç¨‹ï¼ˆ~2 RTT + RSAè®¡ç®—ï¼‰ã€‚</p>
<h3 data-id="heading-18">Sessionå¤ç”¨é…ç½®</h3>
<p>åœ¨<code>redis.conf</code>ä¸­å¯ç”¨TLSä¼šè¯å¤ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">tls-session-caching yes     
tls-session-cache-size  50000      <span class="hljs-comment">#ä¿æŒå¤§é‡ä¼šè¯      </span>
tls-session-cache-timeout  300     <span class="hljs-comment">#è¶…æ—¶æ—¶é—´(ç§’)     </span>
</code></pre>
<h4 data-id="heading-19"><strong>OpenSSLçš„å¦™ç”¨</strong></h4>
<p>Redisä½¿ç”¨OpenSSLçš„ <code>SSL_CTX_set_session_cache_mode</code> APIå®ç°ä¼šè¯ç¥¨æ®å¤ç”¨(<em>src/tls.c</em>)ã€‚å¯¹äºçŸ­è¿æ¥åœºæ™¯ï¼ˆå¦‚Serverlessï¼‰ï¼Œååé‡å¯æå‡3å€ä»¥ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-20">Shared Memoryç»“æ„ä½“æ± åŒ–</h2>
<h3 data-id="heading-21">SDSçš„åŠ¨æ€åˆ†é…é—®é¢˜</h3>
<p>Rediså­—ç¬¦ä¸²é‡‡ç”¨SDS (<em>sds.h</em>)ç»“æ„å­˜å‚¨é¢‘ç¹ä¿®æ”¹çš„å­—ç¬¦ä¸²å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ– ã€‚</p>
<h3 data-id="heading-22">HACKæ–¹æ¡ˆï¼šè‡ªå®šä¹‰å†…å­˜åˆ†é…å™¨</h3>
<p>æ›¿æ¢é»˜è®¤çš„<code>zmalloc()</code> (<em>zmalloc.c</em>) ï¼Œä¸ºSDSé¢„åˆ†é…å¯¹è±¡æ±  ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//ç¤ºä¾‹ä¼ªä»£ç  </span>
sds <span class="hljs-title function_">sdsnewlen</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *init, <span class="hljs-type">size_t</span> initlen)</span> {     
    <span class="hljs-keyword">if</span> (initlen &lt; SDS_MAX_POOLED_SIZE) {         
        sdshdr *sh = sds_pool_get(initlen); <span class="hljs-comment">//ä»æ± ä¸­è·å–         </span>
        <span class="hljs-keyword">if</span> (sh) <span class="hljs-keyword">return</span> sh-&gt;buf();      
    }     
    <span class="hljs-comment">//åŸå§‹åˆ†é…é€»è¾‘...    </span>
}    
</code></pre>
<h4 data-id="heading-23"><strong>é£é™©ä¸æ”¶ç›Šå¹¶å­˜</strong></h4>
<ul>
<li>Pros:  å‡å°‘malloc/freeè°ƒç”¨ ï¼Œå°¤å…¶é€‚åˆé«˜é¢‘è®¡æ•°å™¨åœºæ™¯ ï¼ˆå¦‚INCRï¼‰ã€‚</li>
<li>Cons:  éœ€è°¨æ…å¤„ç†çº¿ç¨‹å®‰å…¨æ€§å’Œå†…å­˜æ³„æ¼ ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-24">Conclusion</h2>
<p>ä»¥ä¸Š5ä¸ªæŠ€å·§ä»åè®®ã€ç®—æ³•ã€å†…å­˜ã€åŠ å¯†å’Œèµ„æºç®¡ç†äº”ä¸ªç»´åº¦æŒ–æ˜Redisçš„æ·±å±‚æ€§èƒ½æ½œåŠ› ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ ï¼š</p>
<ol>
<li>Pipeline+MULTIé€‚åˆæ‰¹å¤„ç†ä½†ä¼šç‰ºç‰²åŸå­æ€§éš”ç¦»çº§åˆ« ï¼›</li>
<li>Sloté¢„è®¡ç®—è¦æ±‚å®¢æˆ·ç«¯ç»´æŠ¤é›†ç¾¤æ‹“æ‰‘ ï¼›</li>
<li>Memory Alignmentçš„æ•ˆæœä¾èµ–CPUæ¶æ„ ï¼›</li>
</ol>
<p>çœŸæ­£çš„æ€§èƒ½è°ƒä¼˜éœ€ç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯å’Œæ•°æ®ç‰¹å¾ ã€‚å»ºè®®é€šè¿‡ <code>redis-benchmark -A pipeline=32... </code>é’ˆå¯¹æ€§å‹æµ‹éªŒè¯æ•ˆæœ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»]]></title>    <link>https://juejin.cn/post/7582044568721637416</link>    <guid>https://juejin.cn/post/7582044568721637416</guid>    <pubDate>2025-12-11T00:19:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582044568721637416" data-draft-id="7582096212662288384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-11T00:19:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="canonical_entropy"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289694429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289694429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    canonical_entropy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:19:33.000Z" title="Thu Dec 11 2025 00:19:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æˆ‘çš„å‰ä¸€ç¯‡æ–‡ç« <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlJyGfNa3psbVxeSO1sji-A" target="_blank" title="https://mp.weixin.qq.com/s/lJyGfNa3psbVxeSO1sji-A" ref="nofollow noopener noreferrer">ã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹</a>ä¸­ï¼Œæˆ‘æå‡ºäº†ä¸€ä¸ªæ ¸å¿ƒè§‚ç‚¹ï¼šå½“ä»£ç¼–ç¨‹è¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹çš„ä¸»æµç†è®ºï¼ŒæŠŠæ³¨æ„åŠ›å‡ ä¹å…¨éƒ¨é›†ä¸­åœ¨â€œå•ä¸ªç¨‹åºçš„é™æ€å¿«ç…§â€ä¸Šï¼Œå´ç¼ºä¹ä¸€å¥—ä»¥â€œå˜åŒ–æœ¬èº«â€ä¸ºä¸€ç­‰å…¬æ°‘ã€é¢å‘ç¨‹åºæ—é•¿æœŸæ¼”åŒ–çš„ç»Ÿä¸€ç†è®ºæ¡†æ¶ã€‚ä¸ºæ­¤ï¼Œæˆ‘å¼•å…¥äº†â€œå¹¿ä¹‰å¯é€†è®¡ç®—ï¼ˆGRCï¼‰â€åŠå…¶æ ¸å¿ƒå…¬å¼ <code>Y = F(X) âŠ• Î”</code>ï¼Œè¯•å›¾æŠŠâ€œç”Ÿæˆâ€å’Œâ€œæ¼”åŒ–â€ç»Ÿä¸€åœ¨ä¸€æ¡æ–¹ç¨‹ä¹‹ä¸­ã€‚</p>
<p>è¿™ç¯‡è¡¥å……è¯´æ˜çš„ç›®çš„ï¼Œæ˜¯æŠŠåŸæ–‡ä¸­ä¸€äº›éšå«ä½†å…³é”®çš„æ€æƒ³æ˜ç¡®æ‹‰åˆ°å‰å°ï¼š</p>
<ul>
<li>Î” å¹¶ä¸æ˜¯å¯¹æ–‡æœ¬åš diffï¼Œè€Œæ˜¯ç›¸å¯¹äºæŸä¸ª<strong>ç»“æ„ç©ºé—´</strong>ä¸­çš„â€œä½ç§»/æ‰°åŠ¨â€ï¼›</li>
<li>æ„é€ ä¸ä¿®æ”¹åœ¨å½¢å¼ä¸Šéƒ½æ˜¯å·®é‡ï¼šå…¨é‡æ„é€ å¯ä»¥è§†ä¸ºâ€œä»ç©ºçŠ¶æ€å‡ºå‘çš„ä¸€æ¬¡å¤§ Î”â€ï¼›</li>
<li><code>Y = F(X) âŠ• Î”</code> çš„è¦æ±‚ä¸ä»…æ˜¯â€œç”Ÿæˆ + æ‰‹å·¥è¡¥å……â€ï¼Œè€Œæ˜¯è¦æ±‚ F(X) å’Œ Î” å¤„åœ¨<strong>åŒä¸€ç»“æ„åæ ‡ç³»</strong>ä¸­ï¼Œå¹¶ä¸”è¿™æ¡æ–¹ç¨‹åœ¨åº”ç”¨å±‚ã€DSL å±‚ã€å…ƒæ¨¡å‹å±‚ã€å·¥å…·å±‚ä»¥â€œåˆ†å½¢â€æ–¹å¼å±‚å±‚å¤ç”¨ï¼›</li>
<li>â€œå¯é€†æ€§â€ä¸ä»…æ„å‘³ç€å¯ä»¥ undo æŸæ¬¡ä¿®æ”¹ï¼Œè¿˜æ„å‘³ç€å¯ä»¥åœ¨â€œæ„é€ é€»è¾‘ç©ºé—´â€ä¸­é‡æ’ã€æ’å…¥ã€å›æº¯æ„é€ æ­¥éª¤ï¼Œä»è€Œåœ¨æ¼”åŒ–ä¸­æ§åˆ¶ç†µå¢ï¼›</li>
<li>GRC ä¸æ˜¯è¦å–ä»£ DDDã€MDAã€SPLã€DSL å·¥ç¨‹ï¼Œè€Œæ˜¯å¸Œæœ›ä¸ºå®ƒä»¬æä¾›ä¸€ä¸ªå…±åŒçš„â€œæ•°å­¦æ¯ä½“â€ï¼šç”¨â€œç»“æ„ç©ºé—´ + Î”/âŠ•â€æ¥ç»Ÿä¸€è¡¨è¾¾è¿™äº›æ–¹æ³•è®ºä¸­çš„ç”Ÿæˆã€å˜ä½“å’Œå®šåˆ¶é€»è¾‘ã€‚</li>
</ul>
<p>é€šè¿‡å¯¹è¿™äº›å‰æçš„æ¾„æ¸…ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ™°åœ°çœ‹åˆ°ï¼š<br/>
GRC æƒ³è¡¥çš„ï¼Œä¸æ˜¯ä¸€ä¸¤ä¸ªå·¥ç¨‹æŠ€å·§çš„ç¼ºå£ï¼Œè€Œæ˜¯ä¸€æ•´å—â€œå…³äºå˜åŒ–çš„ç§‘å­¦â€çš„ç†è®ºç©ºç™½â€”â€”è®©å·®é‡ Î”ã€åˆå¹¶ âŠ•ã€ç»“æ„ç©ºé—´ä¸å¯é€†æ€§ï¼ŒçœŸæ­£å›åˆ°è½¯ä»¶ç†è®ºçš„ä¸­å¿ƒä½ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€åŸæ–‡åœ¨è®²â€œå·®é‡ï¼ˆÎ”ï¼‰â€æ—¶ï¼Œå…¶å®æš—å«äº†ä¸€ä¸ªâ€œç»“æ„ç©ºé—´â€çš„æ¦‚å¿µ</h2>
<p>åŸæ–‡ä¸€ç›´åœ¨è®²ï¼š</p>
<ul>
<li>å·®é‡ Î”ï¼›</li>
<li>åˆå¹¶ âŠ•ï¼›</li>
<li>ç¨‹åºæ—ä¸æ¼”åŒ–è·¯å¾„ã€‚</li>
</ul>
<p>å®¹æ˜“é—æ¼çš„æ˜¯ï¼šè¿™äº›æ¦‚å¿µä¸æ˜¯æ‚¬ç©ºå­˜åœ¨çš„ï¼Œå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºæŸä¸ªâ€œç©ºé—´â€è€Œè¨€ã€‚</p>
<h3 data-id="heading-1">1. ä»€ä¹ˆå«â€œç»“æ„ç©ºé—´â€ï¼Ÿ</h3>
<p>åŸæ–‡åœ¨å¤šä¸ªåœ°æ–¹éšå«åœ°ç”¨äº†è¿™ä¸ªæƒ³æ³•ï¼š</p>
<blockquote>
<p>ä¸€é—¨è¯­è¨€/ä¸€ä¸ªå»ºæ¨¡ä½“ç³»ï¼Œå¹¶ä¸åªæ˜¯ä¸€å †è¯­æ³•è§„åˆ™ï¼Œ<br/>
è€Œæ˜¯å®šä¹‰äº†â€œå®ƒèƒ½ç”Ÿæˆçš„æ‰€æœ‰ç¨‹åº/æ¨¡å‹â€è¿™ä¸€æ•´ç‰‡ç©ºé—´ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥è¿™ä¹ˆçœ‹ï¼š</p>
<ul>
<li>å¯¹ C è¯­è¨€è€Œè¨€ï¼Œâ€œæ‰€æœ‰åˆæ³• C ç¨‹åºçš„æŠ½è±¡è¯­æ³•æ ‘é›†åˆâ€ï¼Œå°±æ˜¯ä¸€ä¸ªç»“æ„ç©ºé—´ï¼›</li>
<li>å¯¹æŸä¸ª DSLï¼ˆæ¯”å¦‚å·¥ä½œæµ DSLï¼‰è€Œè¨€ï¼Œâ€œæ‰€æœ‰åˆæ³•çš„æµç¨‹å›¾ç»“æ„â€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç»“æ„ç©ºé—´ã€‚</li>
</ul>
<p>åŸæ–‡æè®®ï¼š<br/>
å½“æˆ‘ä»¬è°ˆ Î” æ—¶ï¼Œè¦æ˜ç¡®<strong>å®ƒæ˜¯è¿™ç‰‡ç©ºé—´å†…éƒ¨çš„ä¸€ç§â€œä½ç§»/å¾®æ‰°â€</strong>ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ä¸Šçš„æ–‡æœ¬å·®å¼‚ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>æ–‡æœ¬ diff = æ–‡ä»¶è¡Œçš„å¢åˆ æ”¹ï¼›</li>
<li>ç»“æ„å·®é‡ = åœ¨â€œå¯è§£é‡Šçš„ç¨‹åºç»“æ„ç©ºé—´â€ä¸­æ“ä½œæŸäº›èŠ‚ç‚¹/å…³ç³»ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŸæ–‡ä¸åœå¼ºè°ƒï¼š</p>
<ul>
<li>ä¸èƒ½åªåœç•™åœ¨ Git diffã€JSON Patch é‚£ç§æ–‡æœ¬/è¯­æ³•å±‚ï¼›</li>
<li>å¿…é¡»åœ¨â€œç¨‹åº/æ¨¡å‹ç»“æ„æœ¬èº«â€çš„å±‚çº§æ¥å®šä¹‰ Î”ã€‚</li>
</ul>
<p>æˆ‘è¿™é‡Œç”¨â€œç»“æ„ç©ºé—´â€è¿™ä¸ªè¯ï¼Œæ˜¯ä¸ºäº†æŠŠè¿™ç‚¹æ˜¾å¼åŒ–ï¼š<br/>
<strong>Î” ä¸€å®šæ˜¯ç›¸å¯¹äºæŸä¸ªç»“æ„åŒ–çš„ç¨‹åºç©ºé—´è€Œè¨€çš„ï¼Œè€Œä¸æ˜¯éšä¾¿å¯¹å­—èŠ‚æ¯”ä¸€æ¯”ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">äºŒã€â€œä¸€åˆ‡çš†å·®é‡â€èƒŒåï¼Œå…¶å®æ˜¯æƒ³æŠŠâ€œä»é›¶æ„é€ â€å’Œâ€œä¿®æ”¹â€ç»Ÿä¸€èµ·æ¥</h2>
<p>åŸæ–‡æœ‰ä¸€å¥å¾ˆå®¹æ˜“è¢«å½“æˆå“²å­¦æ„Ÿå¹çš„è¯ï¼šâ€œä¸€åˆ‡çš†å·®é‡â€ã€‚<br/>
è¿™å¥è¯å…¶å®æœ‰ä¸€ä¸ªéå¸¸å…·ä½“çš„å·¥ç¨‹å«ä¹‰ï¼š</p>
<h3 data-id="heading-3">1. æŠŠå…¨é‡æ„é€ çœ‹æˆâ€œç›¸å¯¹äºç©ºâ€çš„ä¸€æ¬¡å¤§ Î”</h3>
<p>åœ¨ä»£æ•°é‡Œï¼Œå¦‚æœæœ‰ä¸€ä¸ªâ€œé›¶å…ƒç´  0â€ï¼Œå°±å¯ä»¥å†™ï¼š</p>
<blockquote>
<p>A = 0 âŠ• A</p>
</blockquote>
<p>åŸæ–‡å€Ÿç”¨äº†è¿™ä¸ªæ€è·¯ï¼š</p>
<ul>
<li>ä¸€ä¸ªç³»ç»Ÿä»â€œæ— â€åˆ°â€œæœ‰â€çš„è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹ä½œå¯¹â€œç©ºç³»ç»Ÿâ€åº”ç”¨äº†ä¸€ä¸ªâ€œå¤§å·®é‡â€ï¼›</li>
<li>ä¹‹åçš„æ¯ä¸€æ¬¡ä¿®æ”¹/å®šåˆ¶ï¼Œåˆæ˜¯åœ¨åŸæœ‰çŠ¶æ€ä¸Šå åŠ æ›´å¤š Î”ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>â€œç”Ÿæˆå‡ºæ¥çš„åˆå§‹ç³»ç»Ÿâ€</strong> å’Œ</li>
<li><strong>â€œåé¢é’ˆå¯¹è¿™ä¸ªç³»ç»Ÿåšçš„ä¸€æ¬¡ä¿®æ”¹â€</strong></li>
</ul>
<p>åœ¨å½¢å¼ä¸Šå¯ä»¥ç”¨åŒä¸€ç§ Î”/âŠ• æœºåˆ¶æè¿°ï¼Œåªæ˜¯åŸºåº•ä¸åŒï¼š</p>
<ul>
<li>ä» 0 å åŠ  â†’ â€œæ„é€ å…¨é‡â€ï¼›</li>
<li>ä» Base å åŠ  â†’ â€œåœ¨å·²æœ‰ç³»ç»Ÿä¸Šæ¼”åŒ–â€ã€‚</li>
</ul>
<p>å¾ˆå¤šäººåˆè¯»æ—¶åªæ³¨æ„åˆ°ï¼š<br/>
â€œå“¦ï¼ŒÎ” æ˜¯ç”¨æ¥æè¿°ä¿®æ”¹/å®šåˆ¶çš„â€ï¼Œä½†å®¹æ˜“å¿½ç•¥ï¼š</p>
<blockquote>
<p>åŸæ–‡å…¶å®æ˜¯åœ¨è¯´ï¼š<br/>
<strong>æ„é€  â‰ˆ ä¸€æ¬¡å¤§çš„ Î”ï¼Œ<br/>
æ¼”åŒ– â‰ˆ ç»§ç»­å åŠ  Î”ã€‚</strong></p>
</blockquote>
<p>è¿™æ‰æ˜¯â€œç”Ÿæˆï¼ˆF(Xï¼‰ï¼‰å’Œæ¼”åŒ–ï¼ˆâŠ• Î”ï¼‰å¯ä»¥ç»Ÿä¸€è¿›ä¸€æ¡æ–¹ç¨‹â€çš„æ·±å±‚å«ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€Y = F(X) âŠ• Î” è¿™æ¡å…¬å¼æœ€å…³é”®çš„ä¸¤ä¸ªâ€œå¼ºè¦æ±‚â€</h2>
<p>å¯¹å¾ˆå¤šäººæ¥è¯´ï¼Œè¿™ä¸ªå…¬å¼å¾ˆç›´è§‚ï¼š</p>
<ul>
<li>ç”¨ F(X) è¡¨ç¤ºâ€œä»æ¨¡å‹ X è‡ªåŠ¨ç”Ÿæˆçš„éƒ¨åˆ†â€ï¼›</li>
<li>ç”¨ Î” è¡¨ç¤ºâ€œæ‰‹å·¥è¡¥å……/ä¿®æ­£çš„éƒ¨åˆ†â€ã€‚</li>
</ul>
<p>ä½†åŸæ–‡çœŸæ­£è‹›åˆ»çš„åœ°æ–¹ä¸åœ¨è¿™ä¸ªåˆ†è§£ï¼Œè€Œåœ¨å®ƒå¯¹ä¸¤ä»¶äº‹æƒ…æå‡ºçš„â€œå¼ºè¦æ±‚â€ï¼š</p>
<h3 data-id="heading-5">1. è¦æ±‚ Î” å’Œ F(X) åœ¨åŒä¸€ä¸ªâ€œåæ ‡ç³»â€é‡Œ</h3>
<p>åŸæ–‡æå‡ºâ€œåæ ‡ç³»â€çš„æ¯”å–»ï¼Œå¾ˆå¤šäººä¼šç†è§£ä¸ºâ€œé¢†åŸŸæ¨¡å‹å°±æ˜¯ä¸€ç§åæ ‡ç³»â€ã€‚<br/>
è¿™é‡Œæœ‰ä¸€ä¸ªéšå«ä½†éå¸¸é‡è¦çš„æ„æ€ï¼š</p>
<blockquote>
<p>ä¸ç®¡æ˜¯ç”Ÿæˆçš„ F(X)ï¼Œè¿˜æ˜¯åç»­å åŠ çš„ Î”ï¼Œ<br/>
éƒ½å¿…é¡»åœ¨åŒä¸€ä¸ªç»“æ„åæ ‡ç³»é‡Œè¡¨è¾¾ã€‚</p>
</blockquote>
<p>ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<ul>
<li>å¦‚æœ F(X) ç”Ÿæˆçš„æ˜¯æŸç§ç»“æ„åŒ–æ¨¡å‹ï¼ˆä¾‹å¦‚ä¸€æ£µâ€œé¡µé¢ç»„ä»¶æ ‘â€ï¼‰ï¼›</li>
<li>é‚£ Î” ä¹Ÿåº”è¯¥æ˜¯å¯¹è¿™æ£µæ ‘ä¸­å…·ä½“èŠ‚ç‚¹çš„â€œå®šç‚¹ä¿®æ”¹/æ‰©å±•â€ï¼Œè€Œä¸æ˜¯åœ¨ç”Ÿæˆç»“æœä¸Šéšä¾¿å†™è„šæœ¬â€œä¹± patchâ€ã€‚</li>
</ul>
<p>åä¾‹æ˜¯å¸¸è§çš„åšæ³•ï¼š</p>
<ul>
<li>æ¨¡å‹ç”Ÿæˆä¸€å †ä»£ç ï¼›</li>
<li>æ‰‹å·¥æ”¹åŠ¨ç›´æ¥å†™åœ¨ä»£ç ä¸Šï¼›</li>
<li>æ”¹åŠ¨ä¸å†ä»¥â€œæ¨¡å‹ä¸Šçš„å·®é‡â€å­˜åœ¨ï¼Œè€Œæ˜¯å˜æˆå¯¹ç”Ÿæˆäº§ç‰©çš„ä¸å¯è¿½è¸ªä¿®æ”¹ã€‚</li>
</ul>
<p>åŸæ–‡çš„æ€åº¦æ˜¯ï¼š<br/>
<strong>è¿™æ ·çš„ä¿®æ”¹å…¶å®å·²ç»é€ƒå‡ºäº†åŸæ¥çš„ç»“æ„ç©ºé—´ï¼ŒÎ” å¤±å»äº†â€œç»“æ„åæ ‡â€æ„ä¹‰ã€‚</strong></p>
<p>æƒ³çœŸæ­£æ»¡è¶³ Y = F(X) âŠ• Î” çš„â€œç»Ÿä¸€ç²¾ç¥â€ï¼Œå°±æ„å‘³ç€ï¼š</p>
<ul>
<li>Î” å¿…é¡»åœ¨â€œç”Ÿæˆç‰©çš„ç»“æ„ç©ºé—´â€é‡Œæœ‰æ˜ç¡®åæ ‡ï¼ˆç±»ä¼¼â€œåœ¨è¿™ä¸ªç»„ä»¶æ ‘çš„è¿™ä¸ªèŠ‚ç‚¹ä¸Šå¢åŠ è¿™ä¸ªå­èŠ‚ç‚¹â€ï¼‰ï¼›</li>
<li>è€Œä¸æ˜¯â€œåœ¨è¿™ä¸ª .java æ–‡ä»¶ç¬¬ 123 è¡Œæ’å…¥å‡ è¡Œâ€ã€‚</li>
</ul>
<p>è¿™ç‚¹åœ¨åŸæ–‡é‡Œæ²¡æœ‰å…¬å¼åŒ–ï¼Œä½†åŸ‹äº†å¾ˆå¤šé“ºå«ï¼Œå¾ˆå¤šè¯»è€…ä¼šä¸‹æ„è¯†ç•¥è¿‡ã€‚</p>
<h3 data-id="heading-6">2. è¦æ±‚è¿™æ¡å…¬å¼èƒ½åœ¨å¤šå±‚çº§ä¸Šé‡å¤ä½¿ç”¨ï¼ˆåˆ†å½¢é€’å½’ï¼‰</h3>
<p>åŸæ–‡ä¸åªæ˜¯è¯´â€œåœ¨åº”ç”¨å±‚å¯ä»¥å†™å‡º Y = F(X) âŠ• Î”â€ï¼Œè€Œæ˜¯æš—ç¤ºï¼š</p>
<ul>
<li>åœ¨æ¨¡å‹å±‚ä¹Ÿå¯ä»¥ï¼šé¢†åŸŸæ¨¡å‹ = (åŸºç¡€å…ƒæ¨¡å‹) ç»è¿‡æŸä¸ª Fï¼Œå† âŠ• Î”ï¼›</li>
<li>åœ¨ DSL å±‚ä¹Ÿå¯ä»¥ï¼šæŸ DSL = ä»æ›´æŠ½è±¡å…ƒè¯­è¨€ F å‡ºæ¥ï¼Œå† âŠ• Î”ï¼›</li>
<li>åœ¨å·¥å…·å±‚ä¹Ÿå¯ä»¥ï¼šç”Ÿæˆå™¨æœ¬èº« = æŸåŸºç¡€ç”Ÿæˆå™¨ Fâ‚€ï¼ŒåŠ ä¸Š Î”_generator å½¢æˆ Fâ‚ã€‚</li>
</ul>
<p>åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>å¾ˆå¤šå·¥ç¨‹å®è·µåªåœ¨æŸä¸€ä¸¤å±‚ç”¨â€œç”Ÿæˆ+æ‰‹æ”¹â€çš„æ¨¡å¼ï¼Œå±€éƒ¨ä½¿ç”¨ç±»ä¼¼æ€è·¯ï¼›</li>
<li>åŸæ–‡å¸Œæœ›çš„æ˜¯ï¼š<strong>æ•´ä¸ªè½¯ä»¶æ„é€ /æ¼”åŒ–é“¾æ¡ï¼Œä»å…ƒæ¨¡å‹åˆ°ä»£ç /é…ç½®ï¼Œéƒ½èƒ½åœ¨åŒä¸€æ¨¡å¼ä¸‹æè¿°ã€‚</strong></li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¼šç”¨â€œåˆ†å½¢â€â€œç»“æ„ç©ºé—´â€â€œè·¯å¾„ç§¯åˆ†â€ç­‰ç‰©ç†/æ•°å­¦æ¯”å–»ï¼š<br/>
å®ƒæƒ³è¦çš„æ˜¯<strong>ä¸€æ¡è´¯é€šå¤šå±‚çš„ç»Ÿä¸€è¡¨è¾¾</strong>ï¼Œä¸åªæ˜¯è¯´â€œåœ¨æŸå¤„å¼•å…¥ Î” æ¯”è¾ƒæ–¹ä¾¿â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€â€œå¯é€†æ€§â€ä¸‰å±‚å«ä¹‰é‡Œï¼Œæœ€å®¹æ˜“è¢«å¿½ç•¥çš„æ˜¯â€œè¿‡ç¨‹å¯é€†æ€§â€</h2>
<p>åŸæ–‡æ²¡æœ‰ç³»ç»Ÿåˆ†å±‚å®šä¹‰â€œå¯é€†æ€§â€ï¼Œä½†éšå«äº†ä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<ol>
<li>
<p><strong>ä»£æ•°å¯é€†æ€§</strong></p>
<ul>
<li>æœ‰ Î” çš„é€†å…ƒ âˆ’Î”ï¼Œå¯ä»¥è¡¨è¾¾â€œæ’¤é”€æŸä¸ªå˜åŒ–â€ï¼Œä½¿å¾— Î” âŠ• (âˆ’Î”) çº¦ç­‰äºâ€œæ— å˜åŒ–â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å˜æ¢å¯é€†æ€§</strong></p>
<ul>
<li>ç±»ä¼¼åŒå‘å˜æ¢ï¼ˆBXï¼‰ï¼š<br/>
ä»é«˜å±‚æ¨¡å‹åˆ°ä½å±‚è¡¨ç¤ºæœ‰ Fï¼Œä»ä½å±‚è¿”å›é«˜å±‚æœ‰ Fâ»Â¹ï¼›<br/>
å˜æ¢å°½é‡ä¿¡æ¯ä¸ä¸¢å¤±ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿‡ç¨‹å¯é€†æ€§</strong>ï¼ˆæœ€å®¹æ˜“ä¸€ç¬”å¸¦è¿‡ï¼‰</p>
<ul>
<li>æ„å»ºæµç¨‹é€šå¸¸è¢«è§†ä¸ºï¼šå…ˆæœ‰åº“ï¼Œå†æ„å»ºåº”ç”¨ï¼›å…ˆæœ‰ v1ï¼Œå†æ¼”åŒ–å‡º v2ã€‚</li>
<li>åŸæ–‡åœ¨è®²â€œç”¨æœªæ¥çš„ Î” ä¿®æ­£å†å²äº§ç‰©â€æ—¶ï¼Œå…¶å®åœ¨é‡æ–°ç†è§£è¿™ä¸ªæ—¶é—´é¡ºåºï¼š
<ul>
<li>ä½ ä¸ä¸€å®šè¦ä¿®æ”¹åº“æºç ï¼›</li>
<li>å¯ä»¥åœ¨â€œåæ¥â€çš„ä¸€ä¸ªåœ°æ–¹å®šä¹‰ Î”ï¼Œè®©è¿è¡Œæ—¶æˆ–é‡æ„æ—¶â€œå‘åä½œç”¨â€äºå·²å­˜åœ¨çš„ä¸œè¥¿ï¼›</li>
<li>åœ¨é€»è¾‘æ„é€ ç©ºé—´é‡Œï¼Œç›¸å½“äºæŠŠè¿™æ­¥ Î” æ’å…¥åˆ°äº†æ›´æ—©çš„ä½ç½®ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>è¿™ç¬¬ä¸‰å±‚çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å¹³æ—¶æŠŠæ„é€ è§†ä¸ºä¸¥æ ¼å•å‘çš„æ—¶é—´çº¿ï¼Œ<br/>
GRC ä¸»å¼ åœ¨â€œæ„é€ é€»è¾‘ç©ºé—´â€é‡Œï¼Œè¿™æ¡çº¿å¯ä»¥è¢«é‡æ’ã€å¯é€†ã€å¯æ’å…¥ã€‚</p>
</blockquote>
<p>å·¥ç¨‹ä¸Šå¯¹åº”çš„å½¢æ€åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯¹ç¬¬ä¸‰æ–¹åº“åšâ€œéä¾µå…¥å¼å®šåˆ¶/ä¿®å¤â€ï¼Œå´è¿˜ä¿ç•™ä½“ç³»ç»“æ„ä¸Šçš„å¯è¿½è¸ªå’Œå¯æ’¤é”€ï¼›</li>
<li>å¯¹å·²å‘å¸ƒç³»ç»Ÿåšâ€œçƒ­ä¿®å¤â€ï¼Œå…¶é€»è¾‘å¯è¢«å½’å…¥ç»Ÿä¸€çš„ Î”/âŠ• æ¨¡å‹ä¸­ï¼Œè€Œä¸æ˜¯æŸç§â€œç‰¹æ®Šæ‰‹æ®µâ€ã€‚</li>
</ul>
<p>å¾ˆå¤šäººçœ‹åˆ°â€œå¯é€†è®¡ç®—â€å®¹æ˜“æƒ³åˆ°çš„åªæ˜¯â€œèƒ½ä¸èƒ½ undoâ€ï¼Œè€Œå¿½ç•¥äº†è¿™ä¸€å±‚â€œé‡æ–°ç¼–æ’æ„é€ è¿‡ç¨‹â€çš„å«ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€æ–‡ç« å¯¹ç°æœ‰ç†è®ºçš„æ‰¹è¯„ï¼Œå…¶å®æ˜¯åœ¨â€œæ‹‰é«˜åº¦â€ï¼Œè€Œä¸æ˜¯â€œå¦å®šå…¶ä»·å€¼â€</h2>
<p>åŸæ–‡å¯¹ç±»å‹è®ºã€å½¢å¼æ–¹æ³•ã€èŒƒç•´è®ºåœ¨ PL ä¸­çš„ç”¨æ³•æå‡ºäº†ä¸å°‘æ‰¹è¯„ã€‚åˆçœ‹ä¼šæœ‰ä¸€ç§â€œä½ æ˜¯ä¸æ˜¯è¿‡äºçœ‹è½»è¿™äº›é¢†åŸŸâ€çš„æ„Ÿè§‰ã€‚ä½†å¦‚æœç»“åˆå…¨æ–‡é€»è¾‘ï¼Œå¯ä»¥è¿™æ ·æ›´å‡†ç¡®ç†è§£ï¼š</p>
<ol>
<li>å®ƒä¸å¦è®¤ç°æœ‰æˆæœåœ¨â€œå•ç¨‹åºé™æ€æ€§è´¨â€ä¸Šçš„æˆåŠŸï¼›</li>
<li>å®ƒæŒ‡å‡ºçš„æ˜¯ï¼š<strong>åœ¨â€œç¨‹åºæ— + æ¼”åŒ–â€ç»´åº¦ä¸Šï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç±»ä¼¼ç±»å‹è®ºé‚£æ ·æˆç†Ÿçš„ç»Ÿä¸€ä¸»å¹²ã€‚</strong></li>
<li>å®ƒæ‰¹è¯„çš„é‡ç‚¹ä¸æ˜¯â€œç°åœ¨åšçš„é”™äº†â€ï¼Œè€Œæ˜¯â€œæˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ï¼Œé‡å¿ƒé€‰åœ¨äº†ä¸€ä¸ªåé™æ€çš„åˆ‡é¢ä¸Šï¼Œè€Œå¦ä¸€ä¸ªç»´åº¦è¿˜æ²¡æœ‰è¢«å½“æˆâ€˜ä¸­å¿ƒä»»åŠ¡â€™ã€‚â€</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼Œæ–‡ç« æƒ³ä¼ è¾¾çš„å¹¶ä¸æ˜¯ï¼š</p>
<blockquote>
<p>ä½ ä»¬ç ”ç©¶ç±»å‹/å½¢å¼æ–¹æ³•éƒ½é”™äº†ï¼Œåº”è¯¥æ¥æ GRCã€‚</p>
</blockquote>
<p>è€Œæ›´æ¥è¿‘ï¼š</p>
<blockquote>
<p>é™æ€å®‰å…¨è¿™å—åŸºç¡€å·²ç»å¾ˆç‰¢äº†ï¼Œ<br/>
ä½†â€œå˜åŒ–/æ¼”åŒ–â€çš„åŸºç¡€ç†è®ºè¿˜æ²¡ç«‹èµ·æ¥ï¼Œ<br/>
GRC æ˜¯ä¸€ä¸ªå°è¯•åœ¨è¿™ä¸ªç©ºç™½å¤„ç«‹æ–°æŸ±å­çš„æ–¹å‘ã€‚</p>
</blockquote>
<p>è¿™ä¸€ç‚¹å¦‚æœæ²¡æœ‰æ„è¯†åˆ°ï¼Œå¾ˆå®¹æ˜“è¯¯è§£ä¸ºä¸€ç§â€œæ—§å±±ä¸å¦‚æ–°å±±â€çš„å§¿æ€ã€‚å®é™…ä¸Šï¼Œå®ƒå¸Œæœ›çš„æ˜¯<strong>å¤šä¸€åº§â€œå…³äºå˜åŒ–â€çš„å±±</strong>ï¼Œè€Œä¸æ˜¯è¦æŠŠåŸæœ‰é‚£åº§æ¨å€’ã€‚</p>
<hr/>
<h2 data-id="heading-9">å…­ã€åŸæ–‡å’Œ DDD/MDA/SPL çš„å…³ç³»ï¼šGRC ä¸æ˜¯æ¥â€œå–ä»£â€å®ƒä»¬ï¼Œè€Œæ˜¯è¦ç»™å®ƒä»¬ä¸€ä¸ªç»Ÿä¸€çš„â€œæ•°å­¦æ¯ä½“â€</h2>
<p>åŸæ–‡å¤šæ¬¡æåˆ°ï¼š</p>
<ul>
<li>æ¨¡å‹é©±åŠ¨ï¼ˆMDA/MDDï¼‰ï¼›</li>
<li>è½¯ä»¶äº§å“çº¿ï¼ˆSPLï¼‰ï¼›</li>
<li>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ï¼›</li>
<li>DSL å·¥ç¨‹ã€‚</li>
</ul>
<p>å®¹æ˜“å‡ºç°çš„è¯¯è¯»æ˜¯ï¼š</p>
<ul>
<li>GRC æ˜¯ä¸€å¥—â€œæ›´å¥½çš„ MDE/SPL/DDDâ€ï¼›</li>
<li>æ—§çš„æ–¹æ³•è®ºä¸å¤Ÿå¥½ï¼Œç°åœ¨è¦æ¢ç”¨ GRCã€‚</li>
</ul>
<p>æ›´å‡†ç¡®çš„ç†è§£æ˜¯ï¼š</p>
<ul>
<li>MDA/MDD ä¸»è¦å…³æ³¨ä»æ¨¡å‹åˆ°å®ç°çš„<strong>ä¸€æ¬¡æ€§ç”Ÿæˆ</strong>ï¼›</li>
<li>SPL å…³æ³¨çš„æ˜¯äº§å“æ—çš„<strong>ç‰¹æ€§ç»„åˆ</strong>ï¼›</li>
<li>DDD å…³æ³¨çš„æ˜¯å¦‚ä½•åœ¨ä¸šåŠ¡é¢†åŸŸå»ºç«‹å¥½çš„<strong>è¯­è¨€ä¸æ¨¡å‹è¾¹ç•Œ</strong>ï¼›</li>
<li>GRC æƒ³åšçš„æ˜¯ï¼š<strong>æŠŠè¿™äº›ä¸œè¥¿éƒ½æ”¾è¿›åŒä¸€ä¸ªâ€œç»“æ„ç©ºé—´ + Î”/âŠ•â€çš„ç»Ÿä¸€æ¡†æ¶ä¸­æ¥è§£é‡Š</strong>ã€‚</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>
<p>MDAï¼šä¼ ç»Ÿæ˜¯ <code>App = Transform(Model)</code>ï¼›<br/>
GRC è§†è§’ä¸‹æ˜¯ <code>App = F(Model) âŠ• Î”</code>ï¼Œè¿ç§»äº†â€œç”Ÿæˆåæ‰‹æ”¹â€çš„é‚£å—åˆ° Î” ä¸­ã€‚</p>
</li>
<li>
<p>SPLï¼šä¸€èˆ¬è°ˆ feature ç»„åˆã€å˜ä½“ï¼›<br/>
GRC è§†è§’ä¸‹æ˜¯ <code>Variant = Base âŠ• Î”_feature âŠ• Î”_customer âŠ• â€¦</code>ï¼Œç‰¹æ€§/å®¢æˆ·å®šåˆ¶éƒ½æˆä¸ºå·®é‡å±‚ã€‚</p>
</li>
<li>
<p>DDDï¼šè°ˆé™ç•Œä¸Šä¸‹æ–‡ã€é¢†åŸŸäº‹ä»¶ï¼›<br/>
GRC è§†è§’ä¸‹ï¼Œé™ç•Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºä¸åŒçš„ç»“æ„å­ç©ºé—´ï¼Œé¢†åŸŸäº‹ä»¶åˆ™æ˜¯çŠ¶æ€ç©ºé—´ä¸Šçš„ Î”ï¼š</p>
<p><code>NewState = OldState âŠ• EventÎ”</code></p>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ›´åˆé€‚çš„æ¯”å–»æ˜¯ï¼š</p>
<blockquote>
<p>GRC å¸Œæœ›å½“â€œæ¯è¯­è¨€â€ï¼Œ<br/>
ç”¨åŒä¸€å¥— Î”/âŠ• ç»“æ„å»è¡¨è¾¾ MDA/SPL/DDD/DSL ç­‰å·²æœ‰æ–¹æ³•è®ºçš„æ„é€ å’Œæ¼”åŒ–é€»è¾‘ï¼Œ<br/>
è€Œä¸æ˜¯è¦å‘æ˜ä¸€å¥—ä¸å®ƒä»¬ç«äº‰çš„â€œæ–°æ–¹æ³•è®ºâ€ã€‚</p>
</blockquote>
<h2 data-id="heading-10">ä¸ƒã€å¦‚æœè¯»å®ŒåŸæ–‡è¿˜è§‰å¾—æ¨¡ç³Šï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç®€åŒ–å›¾æ™¯æ¥å¸®åŠ©ç†è§£</h2>
<p>æŠŠåŸæ–‡çš„ä¸»è¦æ€æƒ³å‹ç¼©æˆä¸€ä¸ªç®€å•çš„æ¯”å–»ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæƒ³è±¡ä¸€å¼ åœ°å›¾ï¼ˆç»“æ„ç©ºé—´ï¼‰</strong></p>
<ul>
<li>è¿™å¼ åœ°å›¾ä¸Šæ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€ä¸ªç³»ç»Ÿç‰ˆæœ¬/æ¨¡å‹ç‰ˆæœ¬ï¼›</li>
<li>é è¿‘çš„ç‚¹è¡¨ç¤ºç»“æ„ç›¸ä¼¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>å·®é‡ Î” å°±æ˜¯ä»ä¸€ä¸ªç‚¹åˆ°å¦ä¸€ä¸ªç‚¹çš„â€œçŸ¢é‡â€</strong></p>
<ul>
<li>ä¸€æ¬¡ä¿®å¤ã€ä¸€æ¬¡å®šåˆ¶ã€ä¸€æ¬¡è¿ç§»ï¼Œéƒ½æ˜¯ä¸€ä¸ªç®­å¤´ Î”ï¼›</li>
<li>å¤šæ¬¡å˜åŒ–å°±æ˜¯ Î”1, Î”2, â€¦ çš„æ¥åŠ›ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆå¹¶ âŠ• æ˜¯ç®­å¤´çš„â€œä¸²è”â€è¿ç®—</strong></p>
<ul>
<li>Î”1 âŠ• Î”2 è¡¨ç¤ºå…ˆèµ° Î”1 å†èµ° Î”2ï¼›</li>
<li>å¸Œæœ›å®ƒæ»¡è¶³å°é—­æ€§ã€ç»“åˆå¾‹ç­‰è‰¯å¥½æ€§è´¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>Y = F(X) âŠ• Î” è¡¨ç¤ºï¼šä»æŸä¸ªæ¨¡å‹ X å‡ºå‘ï¼Œå…ˆèµ°ä¸€æ®µç”±ç”Ÿæˆå™¨ F è‡ªåŠ¨ç”»å‡ºçš„è·¯å¾„ï¼Œå†åŠ ä¸Šäººå·¥ç”»çš„é‚£æ®µ Î”</strong></p>
</li>
<li>
<p><strong>å¯é€†æ€§æ˜¯è¯´ï¼šå°½é‡è®©ç®­å¤´å¯ä»¥åå‘èµ°ï¼Œæˆ–è€…è‡³å°‘ææ¸…æ¥šâ€œèƒ½èµ°å›å¤´è·¯çš„æ˜¯å“ªå‡ ç±»ç®­å¤´â€</strong></p>
</li>
<li>
<p><strong>åŸæ–‡çš„æ‰¹è¯„æ˜¯ï¼šæˆ‘ä»¬åœ¨ç ”ç©¶â€œåœ°å›¾ä¸Šçš„æŸä¸€ä¸ªç‚¹ï¼ˆç¨‹åº Pï¼‰æ€§è´¨æˆ–è€…ç‰¹å®šä¸¤ç‚¹ä¹‹é—´çš„è½¬æ¢â€ä¸Šå·²ç»å¾ˆå¼ºï¼Œä½†å¯¹æ•´ä¸ªåœ°å›¾çš„å½¢çŠ¶ã€ç®­å¤´çš„ç»„åˆä¸å¯é€†æ€§è´¨ï¼Œæ²¡æœ‰ä¸€é—¨çœŸæ­£ç³»ç»Ÿçš„ç†è®ºï¼›GRC æ˜¯åœ¨æå‡ºè¿™æ ·ä¸€é—¨ç†è®ºçš„åˆæ­¥è½®å»“ã€‚</strong></p>
</li>
</ol>
<p>æ›´è¿›ä¸€æ­¥:</p>
<ol start="7">
<li><strong>è½¯ä»¶ä¸–ç•Œæ˜¯ä¸€æœ¬â€œåŠ¨æ€åœ°å›¾é›†ï¼ˆAtlasï¼‰â€ï¼Œè€Œéå•ä¸€åœ°å›¾</strong></li>
</ol>
<ul>
<li>ç°å®ä¸­çš„å¤æ‚è½¯ä»¶ç³»ç»Ÿæ— æ³•ç”¨å•ä¸€è§†å›¾å®Œæ•´æè¿°ï¼Œå°±åƒçœŸå®ä¸–ç•Œæ— æ³•ç”¨ä¸€å¼ åœ°å›¾å‘ˆç°æ‰€æœ‰ä¿¡æ¯ã€‚</li>
<li>æ¯ä¸ª <strong>DSL</strong>ï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰å°±æ˜¯ä¸€æœ¬ä¸“é¢˜åœ°å›¾ï¼š
<ul>
<li><strong>æ•°æ®åº“Schemaå›¾</strong>ï¼ˆæ•°æ®æ¨¡å‹ç©ºé—´ï¼‰</li>
<li><strong>ä¸šåŠ¡æµç¨‹å›¾</strong>ï¼ˆå·¥ä½œæµç©ºé—´ï¼‰</li>
<li><strong>UIç»„ä»¶æ ‘</strong>ï¼ˆç•Œé¢ç©ºé—´ï¼‰</li>
<li><strong>éƒ¨ç½²æ‹“æ‰‘å›¾</strong>ï¼ˆåŸºç¡€è®¾æ–½ç©ºé—´ï¼‰</li>
</ul>
</li>
<li>è¿™äº›åœ°å›¾å…±åŒæ„æˆäº†ä¸€æœ¬<strong>åœ°å›¾é›†</strong>ï¼Œæ¯ä¸ªè§†å›¾éƒ½æ˜¯åŒä¸€ç°å®åœ¨ä¸åŒå…³æ³¨ç‚¹/ä¸åŒæŠ½è±¡åˆ‡é¢çš„æŠ•å½±ã€‚</li>
</ul>
<ol start="8">
<li><strong>Generatorï¼ˆFï¼‰æ˜¯åœ°å›¾åˆ¶å›¾å­¦ä¸­çš„â€œæŠ•å½±å˜æ¢è§„åˆ™â€</strong></li>
</ol>
<ul>
<li>åœ°è´¨å­¦å®¶é€šè¿‡æµ‹é‡æ•°æ®ï¼Œ<strong>æŒ‰ç…§æŠ•å½±è§„åˆ™</strong>ç”Ÿæˆå¯è§†åŒ–çš„åœ°è´¨å›¾ã€‚</li>
<li>åŒæ ·ï¼Œ<strong>Generator</strong> æ˜¯é¢†åŸŸæ¨¡å‹ç©ºé—´åˆ°å…·ä½“å®ç°ç©ºé—´çš„æ˜ å°„è§„åˆ™ï¼š
<ul>
<li><code>F_orm</code>ï¼šé¢†åŸŸæ¨¡å‹ â†’ æ•°æ®åº“Schema</li>
<li><code>F_api</code>ï¼šé¢†åŸŸæ¨¡å‹ â†’ APIæ¥å£è§„èŒƒ</li>
<li><code>F_ui</code>ï¼šä¸šåŠ¡å¯¹è±¡ â†’ ç•Œé¢ç»„ä»¶æ ‘</li>
</ul>
</li>
<li>æ¯ä¸ªGeneratorå®šä¹‰äº†ä¸¤ä¸ªç»“æ„ç©ºé—´ä¹‹é—´çš„<strong>å¯è®¡ç®—æ˜ å°„å…³ç³»</strong>ã€‚</li>
</ul>
<ol start="9">
<li><strong>å·®é‡Î”æ˜¯åœ°å›¾ä¸Šçš„â€œç»“æ„åŒ–ç¼–è¾‘å›¾å±‚â€</strong></li>
</ol>
<ul>
<li>åœ¨ä¼ ç»ŸGISä¸­ï¼Œä½ ä¸èƒ½ç›´æ¥åœ¨å°åˆ·åœ°å›¾ä¸Šä¿®æ”¹æ²³æµèµ°å‘ã€‚</li>
<li>ä½†åœ¨ç°ä»£æ•°å­—åœ°å›¾ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰ä¿®æ”¹éƒ½æ˜¯<strong>åˆ†å±‚çš„</strong>ï¼š
<ul>
<li><strong>åŸºåº•å›¾å±‚</strong>ï¼šç”±Generatorä»æ ¸å¿ƒæ¨¡å‹è‡ªåŠ¨ç”Ÿæˆçš„â€œæ ‡å‡†åœ°å›¾â€</li>
<li><strong>å·®é‡å›¾å±‚ï¼ˆÎ”ï¼‰</strong>ï¼šæœ¬åœ°åŒ–çš„ä¿®æ­£ã€å®¢æˆ·ç‰¹å®šçš„è¦†ç›–ã€ç´§æ€¥ä¿®å¤</li>
</ul>
</li>
<li><strong>å…³é”®åŒºåˆ«</strong>ï¼šÎ”ä¸æ˜¯éšæ„æ¶‚æ”¹ï¼Œè€Œæ˜¯åœ¨<strong>åŒä¸€åæ ‡ç³»</strong>ä¸­çš„ç²¾ç¡®æ ‡è®°ï¼š
<blockquote>
<p>â€œåœ¨åæ ‡(ä¸šåŠ¡å¯¹è±¡.è®¢å•.çŠ¶æ€)å¤„å¢åŠ â€˜å·²å¤æ ¸â€™çŠ¶æ€â€
è€Œä¸æ˜¯â€œåœ¨Order.javaç¬¬123è¡Œæ’å…¥ä»£ç â€</p>
</blockquote>
</li>
</ul>
<ol start="10">
<li><strong>å¯é€†æ€§ï¼šåœ°å›¾é›†çš„â€œåŒæ­¥æ›´æ–°æœºåˆ¶â€</strong>
çœŸæ­£çš„æŒ‘æˆ˜åœ¨äºå¤šåœ°å›¾ååŒï¼š</li>
</ol>
<ul>
<li><strong>ä»£æ•°å¯é€†æ€§</strong>ï¼šå¦‚æœåœ¨åœ°è´¨å›¾ä¸Šæ ‡è®°â€œæ­¤å¤„å®é™…ä¸ºæ²‰ç§¯å²©è€ŒéèŠ±å²—å²©â€ï¼ˆ+Î”ï¼‰ï¼Œåº”è¯¥èƒ½æ’¤é”€æ­¤æ ‡è®°ï¼ˆ-Î”ï¼‰</li>
<li><strong>å˜æ¢å¯é€†æ€§</strong>ï¼šä»åœ°è´¨æ•°æ®åˆ°åœ°è´¨å›¾çš„æŠ•å½±ï¼ˆFï¼‰ï¼Œæœ€å¥½èƒ½åå‘ä»åœ°å›¾ä¿®æ”¹å›æ•°æ®ï¼ˆFâ»Â¹ï¼‰</li>
<li><strong>è¿‡ç¨‹å¯é€†æ€§</strong>ï¼šå½“äº¤é€šå›¾ä¸ŠæŸæ¡é“è·¯è¢«å°é—­ï¼ˆÎ”_trafficï¼‰ï¼Œè¿™ä¸ªå˜åŒ–å¯ä»¥è¢«<strong>åå‘ä¼ æ’­</strong>ï¼š
<ul>
<li>è‡ªåŠ¨æé†’åœ°è´¨å›¾ï¼šâ€œæ­¤å¤„å¯èƒ½æœ‰åœ°è´¨å‹˜æ¢å—å½±å“â€</li>
<li>è‡ªåŠ¨æ›´æ–°è¡Œæ”¿åŒºåˆ’å›¾ï¼šâ€œæ­¤å¤„è¾¹ç•Œé€šè¡Œè§„åˆ™éœ€è°ƒæ•´â€</li>
<li>è€Œä¸æ˜¯è®©å„åœ°å›¾ç»´æŠ¤è€…æ‰‹åŠ¨å‘ç°å’ŒåŒæ­¥</li>
</ul>
</li>
</ul>
<blockquote>
<p>â€œå“ªäº›å˜åŒ–éœ€è¦è‡ªåŠ¨ä¼ æ’­ã€ä¼ æ’­åˆ°å“ªå‡ å¼ åœ°å›¾â€æ˜¯å…·ä½“å·¥ç¨‹è®¾è®¡çš„é—®é¢˜ï¼Œä¸æ˜¯ GRC åœ¨ç†è®ºå±‚é¢ç›´æ¥å¼ºåˆ¶çš„ã€‚</p>
</blockquote>
<p>è¿™ä¸‰ç§å¯é€†æ€§å…±åŒæ„æˆäº†GRCæ§åˆ¶â€˜ç†µå¢â€™çš„æœºåˆ¶ï¼šä»£æ•°å¯é€†ç¡®ä¿ä¿®æ”¹å¯æ’¤é”€ï¼ˆå±€éƒ¨ç†µä¸å˜ï¼‰ï¼Œå˜æ¢å¯é€†åŠ›æ±‚åœ¨è¡¨è±¡ä¹‹é—´ä¿æŒä¿¡æ¯å®ˆæ’ï¼ˆè·¨è§†å›¾ç†µä¸å˜ï¼‰ï¼Œè¿‡ç¨‹å¯é€†åˆ™å…è®¸é‡æ„æ¼”åŒ–è·¯å¾„ï¼ˆå…¨å±€ç†µå¯æ§ï¼‰ã€‚</p>
<ol start="12">
<li><strong>Y = F(X) âŠ• Î” åœ¨åœ°å›¾é›†ä¸­çš„å¤šå±‚å«ä¹‰</strong>
è¿™ä¸ªå…¬å¼åœ¨ä¸åŒå±‚çº§é€’å½’å‡ºç°ï¼š</li>
</ol>






























<table><thead><tr><th>å±‚çº§</th><th>å…¬å¼</th><th>åœ°å›¾é›†æ¯”å–»</th></tr></thead><tbody><tr><td><strong>åº”ç”¨å±‚</strong></td><td>App = F_app(DomainModel) âŠ• Î”_custom</td><td>æœ€ç»ˆç”¨æˆ·çœ‹åˆ°çš„â€œç»¼åˆåœ°å›¾â€ = ï¼ˆæ ‡å‡†æŠ•å½± + æœ¬åœ°è¦†ç›–å±‚ï¼‰</td></tr><tr><td><strong>æ¨¡å‹å±‚</strong></td><td>DSL = F_dsl(MetaModel) âŠ• Î”_dsl</td><td>â€œäº¤é€šå›¾è§„èŒƒâ€ = ï¼ˆæ ‡å‡†åˆ¶å›¾è§„åˆ™ + æœ¬åœ°å›¾ä¾‹æ‰©å±•ï¼‰</td></tr><tr><td><strong>å…ƒæ¨¡å‹å±‚</strong></td><td>MetaModel' = MetaModel âŠ• Î”_meta</td><td>â€œæ•´ä¸ªåœ°å›¾é›†çš„åæ ‡åŸºå‡†â€è‡ªèº«çš„æ¼”è¿›</td></tr><tr><td><strong>å·¥å…·å±‚</strong></td><td>Generator' = Generator âŠ• Î”_gen</td><td>â€œæŠ•å½±è§„åˆ™â€æœ¬èº«ä¹Ÿå¯ä»¥ç‰ˆæœ¬åŒ–å’Œå®šåˆ¶</td></tr></tbody></table>
<p>å¦‚æœè¯»è€…å¸¦ç€è¿™ä¸ªå›¾æ™¯ï¼Œå†å›å¤´çœ‹åŸæ–‡ä¸­å…³äºâ€œç»“æ„ç©ºé—´â€ã€â€œåæ ‡ç³»â€ã€â€œå¯é€†æ€§â€ã€â€œåˆ†å½¢é€’å½’â€ç­‰æ¦‚å¿µï¼Œä»¥åŠå®ƒå¯¹ç±»å‹è®ºã€èŒƒç•´è®ºå½“å‰ç”¨æ³•çš„æ‰¹è¯„ï¼Œå°±ä¼šæ›´åŠ é€å½»â€”â€”GRCæ˜¯åœ¨å‘¼åå°†è½¯ä»¶ç ”ç©¶çš„é‡å¿ƒï¼Œä»â€œå•ä¸ªç¨‹åºçš„é™æ€å¿«ç…§â€ï¼Œæ‰©å±•åˆ°â€œæ•´ä¸ªç¨‹åºæ—åœ¨å¤šç©ºé—´ååŒä¸‹çš„åŠ¨æ€æ¼”åŒ–è½¨è¿¹ä»¥åŠè¿™äº›è½¨è¿¹æ‰€æ„æˆçš„ç©ºé—´æ•´ä½“â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582039917217988608</link>    <guid>https://juejin.cn/post/7582039917217988608</guid>    <pubDate>2025-12-11T00:29:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217988608" data-draft-id="7577284771447685160" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-11T00:29:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:29:49.000Z" title="Thu Dec 11 2025 00:29:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸ºå°è¯´ã€Šé€†è¢­è¥¿äºŒæ——ã€‹çš„æŠ€æœ¯è®²è§£ï¼Œç”¨äºè¯¦ç»†è¯´æ˜<a href="https://juejin.cn/post/7581348660824506368" target="_blank" title="https://juejin.cn/post/7581348660824506368">å‰§æƒ…</a>é‡Œæ¶‰åŠçš„å¼€å‘ç»†èŠ‚ã€‚</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1b5f6096214ccf89f001ee015b88b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766017789&amp;x-signature=3%2FBmrHIGgXFGVwT2TftDraD7vEI%3D" alt="0.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Contextï¼ŒContext æœ‰å“ªäº›ç±»å‹</h2>
<p><code>Context</code> ä»£è¡¨åº”ç”¨ç¨‹åºçš„ç¯å¢ƒæˆ–çŠ¶æ€ï¼Œæä¾›å¯¹åº”ç”¨ä¸“å±èµ„æºå’Œç±»çš„è®¿é—®ã€‚å®ƒå……å½“åº”ç”¨ä¸ Android ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©ç»„ä»¶èƒ½å¤Ÿè®¿é—®èµ„æºã€æ•°æ®åº“ã€ç³»ç»ŸæœåŠ¡ç­‰ã€‚åœ¨æ‰§è¡Œè¯¸å¦‚å¯åŠ¨ <code>Activity</code>ã€è¯»å– <code>assets</code> æ–‡ä»¶æˆ–åŠ è½½å¸ƒå±€ç­‰ä»»åŠ¡æ—¶ï¼Œ<code>Context</code> è‡³å…³é‡è¦ã€‚</p>
<p>Android ä¸­æœ‰å¤šç§ç±»å‹çš„ <code>Context</code>ã€‚</p>
<h3 data-id="heading-1">é¢è¯•é—®é¢˜</h3>
<p>åœ¨ Android åº”ç”¨ä¸­ï¼Œä¸ºä½•ä½¿ç”¨æ­£ç¡®çš„ <code>Context</code> ç±»å‹è‡³å…³é‡è¦ï¼Ÿ<br/>
æŒæœ‰ <code>Activit Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¼•ç”¨åˆå¯èƒ½å¸¦æ¥å“ªäº›é£é™©ï¼Ÿ</p>
<h3 data-id="heading-2">Application Context</h3>
<p><code>Application Context</code> ä¸æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚å½“ä½ éœ€è¦ä¸€ä¸ªå…¨å±€ã€é•¿ç”Ÿå‘½å‘¨æœŸä¸”ç‹¬ç«‹äºå½“å‰ <code>Activity</code> æˆ– <code>Fragment</code> çš„ <code>Context</code> æ—¶ï¼Œå°±åº”ä½¿ç”¨å®ƒã€‚å¯é€šè¿‡è°ƒç”¨ <code>getApplicationContext()</code> è·å–ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è®¿é—®å…¨å±€èµ„æºï¼Œå¦‚ <code>SharedPreferences</code> æˆ–æ•°æ®åº“ï¼›</li>
<li>æ³¨å†Œéœ€è´¯ç©¿æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å¹¿æ’­æ¥æ”¶å™¨ï¼›</li>
<li>åˆå§‹åŒ–åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨çš„åº“æˆ–ç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-3">Activity Context</h3>
<p><code>Activity Context</code>ï¼ˆå³ <code>Activity</code> ä¸­çš„ <code>this</code>ï¼‰ä¸ <code>Activity</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œç”¨äºè®¿é—®èµ„æºã€å¯åŠ¨å…¶ä»– <code>Activity</code>ï¼Œæˆ–åŠ è½½è¯¥ <code>Activity</code> ç‰¹æœ‰çš„å¸ƒå±€ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åˆ›å»ºæˆ–ä¿®æ”¹ UI ç»„ä»¶ï¼›</li>
<li>å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code>ï¼›</li>
<li>è®¿é—®é™å®šäºå½“å‰ <code>Activity</code> çš„èµ„æºæˆ–ä¸»é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-4">Service Context</h3>
<p><code>Service Context</code> ä¸ <code>Service</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¸»è¦ç”¨äºåå°ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰§è¡Œç½‘ç»œè¯·æ±‚æˆ–æ’­æ”¾éŸ³ä¹ã€‚å®ƒå¯è®¿é—® <code>Service</code> æ‰€éœ€çš„ç³»ç»Ÿçº§æœåŠ¡ã€‚</p>
<h3 data-id="heading-5">Broadcast Context</h3>
<p><code>Broadcast Context</code> åœ¨ <code>BroadcastReceiver</code> è¢«è°ƒç”¨æ—¶æä¾›ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œé€šå¸¸ä»…ç”¨äºå“åº”ç‰¹å®šå¹¿æ’­äº‹ä»¶ã€‚<strong>åˆ‡å‹¿åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œã€‚</strong></p>
<h3 data-id="heading-6">Context çš„å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li><strong>è®¿é—®èµ„æº</strong>ï¼šé€šè¿‡ <code>getString()</code>ã€<code>getDrawable()</code> ç­‰æ–¹æ³•ï¼Œ<code>Context</code> å¯ç”¨äºè·å–å­—ç¬¦ä¸²ã€å›¾ç‰‡ã€å°ºå¯¸ç­‰èµ„æºã€‚</li>
<li><strong>åŠ è½½å¸ƒå±€</strong>ï¼šä½¿ç”¨ <code>Context</code> é€šè¿‡ <code>LayoutInflater</code> å°† XML å¸ƒå±€æ–‡ä»¶è½¬æ¢ä¸º <code>View</code> å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨ Activity å’Œ Service</strong>ï¼šè°ƒç”¨ <code>startActivity()</code> æˆ– <code>startService()</code> æ—¶å¿…é¡»ä¼ å…¥ <code>Context</code>ã€‚</li>
<li><strong>è®¿é—®ç³»ç»ŸæœåŠ¡</strong>ï¼šé€šè¿‡ <code>getSystemService()</code>ï¼Œ<code>Context</code> èƒ½è·å–å¦‚ <code>ClipboardManager</code>ã€<code>ConnectivityManager</code> ç­‰ç³»ç»Ÿçº§æœåŠ¡ã€‚</li>
<li><strong>æ•°æ®åº“ä¸ <code>SharedPreferences</code> æ“ä½œ</strong>ï¼š<code>Context</code> ç”¨äºè®¿é—® <strong>SQLite</strong> æ•°æ®åº“æˆ– <code>SharedPreferences</code> ç­‰æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p><code>Context</code> æ˜¯ Android ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿä¸ç³»ç»Ÿèµ„æºè¿›è¡Œäº¤äº’ã€‚Android æä¾›äº†å¤šç§ <code>Context</code> ç±»å‹ï¼Œå¦‚ <code>Application Context</code>ã€<code>Activity Context</code> å’Œ <code>Service Context</code>ï¼Œå„è‡ªé€‚ç”¨äºä¸åŒåœºæ™¯ã€‚æ­£ç¡®ä½¿ç”¨ <code>Context</code> ä¸ä»…èƒ½é«˜æ•ˆç®¡ç†èµ„æºï¼Œè¿˜èƒ½é¿å…å†…å­˜æ³„æ¼å’Œå´©æºƒã€‚å› æ­¤ï¼ŒåŠ¡å¿…æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ <code>Context</code>ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„é•¿æœŸæŒæœ‰ã€‚</p>
<h3 data-id="heading-8">è¿›é˜¶ï¼šä½¿ç”¨ Context æ—¶è¦æ³¨æ„ä»€ä¹ˆ</h3>
<p><code>Context</code> æ˜¯ Android ä¸­ä¸€ç§ä¾¿æ·çš„æœºåˆ¶ï¼Œä½†ä½¿ç”¨ä¸å½“ä¼šå¼•å‘ä¸¥é‡é—®é¢˜ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€å´©æºƒï¼Œæˆ–è€…èµ„æºå¤„ç†æ•ˆç‡ä½ä¸‹ã€‚ä¸ºé¿å…è¿™äº›é™·é˜±ï¼ŒåŠ¡å¿…äº†è§£å…¶ç»†å¾®å·®åˆ«ä»¥åŠæœ‰æ•ˆä½¿ç”¨ <code>Context</code> çš„æœ€ä½³å®è·µã€‚</p>
<p>æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œæ˜¯åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> ç­‰ <code>Context</code> çš„ç”Ÿå‘½å‘¨æœŸä¹‹å¤–ï¼Œä»ç„¶ä¿ç•™å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚è¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºåƒåœ¾å›æ”¶å™¨æ— æ³•å›æ”¶è¯¥ <code>Context</code> åŠå…¶ç›¸å…³èµ„æºæ‰€å ç”¨çš„å†…å­˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">var</span> context: Context? = <span class="hljs-literal">null</span> <span class="hljs-comment">// If this retains the Activity context, causing a memory leak</span>
}
</code></pre>
<p>ç›¸åï¼Œå¯¹äºéœ€è¦ <code>Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼Œåº”ä½¿ç”¨ <code>Application Context</code>ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> applicationContext: Context
}
</code></pre>
<p>å› æ­¤ï¼Œä½¿ç”¨åˆé€‚ç±»å‹çš„ <code>Context</code> è‡³å…³é‡è¦ã€‚ä¸åŒç±»å‹çš„ <code>Context</code> ç”¨é€”å„å¼‚ï¼Œç”¨é”™ç±»å‹å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºï¼š</p>
<ul>
<li>æ‰§è¡Œä¸ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„ä»»åŠ¡ï¼Œå¦‚åŠ è½½å¸ƒå±€æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†æ—¶ï¼Œä½¿ç”¨ <code>Activity Context</code>ã€‚</li>
<li>è¿›è¡Œä¸ UI ç”Ÿå‘½å‘¨æœŸæ— å…³çš„æ“ä½œï¼Œå¦‚åˆå§‹åŒ–åº“æ—¶ï¼Œä½¿ç”¨ <code>Application Context</code>ã€‚</li>
</ul>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†è¯¯ç”¨ <code>Application Context</code> çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(context.getApplicationContext()) <span class="hljs-comment">// Incorrect</span>
</code></pre>
<p>åº”ä½¿ç”¨ <code>Activity Context</code> ä»¥ç¡®ä¿æ­£ç¡®çš„ä¸»é¢˜è®¾ç½®ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(activityContext) <span class="hljs-comment">// Correct</span>
</code></pre>
<p>å¦ä¸€ä¸ªå…³é”®è€ƒé‡ç‚¹æ˜¯ï¼Œå½“å…³è”ç»„ä»¶ï¼ˆå¦‚ <code>Activity</code> æˆ– <code>Fragment</code>ï¼‰è¢«é”€æ¯åï¼Œè¦é¿å…ä½¿ç”¨ <code>Context</code>ã€‚è®¿é—®ä¸å·²é”€æ¯ç»„ä»¶ç»‘å®šçš„ <code>Context</code>ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–å‡ºç°æœªå®šä¹‰è¡Œä¸ºï¼Œå› ä¸ºä¸è¯¥ <code>Context</code> å…³è”çš„èµ„æºå¯èƒ½å·²ä¸å¤å­˜åœ¨ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¯¹ <code>Context</code> çš„è¯¯ç”¨ï¼Œå…¶ä¸­è‡ªå®šä¹‰è§†å›¾çš„åˆ›å»ºæ–¹å¼ä¸å½“ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">activity.finish() <span class="hljs-comment">// The activity is destroyed</span>
<span class="hljs-keyword">val</span> text = TextView(activity) <span class="hljs-comment">// but the TextView retains a reference</span>
</code></pre>
<p><em>å¦‚æœåœ¨ <code>activity</code> é”€æ¯åä¾ç„¶ä½¿ç”¨ <code>text</code>ï¼Œæ˜¯éå¸¸å±é™©çš„è¡Œä¸ºï¼ˆä¾‹å¦‚ <code>activity</code> é”€æ¯åï¼Œæ‰è¯·æ±‚åˆ°æ•°æ®ï¼Œç„¶åæ›´æ–° <code>text</code> çš„æ˜¾ç¤ºï¼‰ã€‚</em></p>
<p>é¿å…åœ¨åå°çº¿ç¨‹ä½¿ç”¨ <code>Context</code>ã€‚</p>
<p><code>Context</code> æ˜¯ä¸ºä¸»çº¿ç¨‹è®¾è®¡çš„ï¼Œå°¤å…¶é€‚ç”¨äºè®¿é—®èµ„æºæˆ–ä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ã€‚åœ¨åå°çº¿ç¨‹ä½¿ç”¨å®ƒå¯èƒ½ä¼šå¯¼è‡´æ„å¤–å´©æºƒæˆ–çº¿ç¨‹é—®é¢˜ã€‚åœ¨ä¸ UI ç›¸å…³çš„ <code>Context</code> èµ„æºäº¤äº’å‰ï¼Œéœ€åˆ‡æ¢å›ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">viewModelScope.launch {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchData()
    withContext(Dispatchers.Main) {
        Toast.makeText(context, &amp;#<span class="hljs-number">34</span>;Data fetched&amp;#<span class="hljs-number">34</span>;, Toast.LENGTH_SHORT).show()
    }
}
</code></pre>
<p>æ€»ä¹‹ã€‚</p>
<p>è¦æœ‰æ•ˆä½¿ç”¨ <code>Context</code>ï¼Œéœ€è°¨æ…è€ƒé‡ï¼Œè§„é¿å¸¸è§é™·é˜±ã€‚ä¸åº”åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåä»ä¿ç•™å…¶ <code>Context</code>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ŒåŠ¡å¿…é€‰æ‹©æ­£ç¡®ç±»å‹çš„ <code>Context</code>ï¼Œé¿å…åœ¨åå°çº¿ç¨‹ï¼Œæˆ–å…³è”ç»„ä»¶é”€æ¯åä½¿ç”¨å®ƒã€‚æ­¤å¤–ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å’Œå›è°ƒæ—¶è¦å°å¿ƒï¼Œå®ƒä»¬å¯èƒ½ä¼šä¸ç»æ„é—´æŒæœ‰å¯¹ <code>Context</code> çš„å¼•ç”¨ã€‚æ­£ç¡®ç®¡ç† <code>Context</code> èƒ½ç¡®ä¿é«˜æ•ˆåˆ©ç”¨èµ„æºï¼Œæœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼æˆ–åº”ç”¨ç¨‹åºå´©æºƒã€‚</p>
<h3 data-id="heading-9">è¿›é˜¶ï¼šContextWrapper</h3>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­çš„ä¸€ä¸ªåŸºç±»ï¼Œå®ƒå…·å¤‡åŒ…è£… <code>Context</code> å¯¹è±¡çš„èƒ½åŠ›ï¼Œå°†è°ƒç”¨å§”æ‰˜ç»™è¢«åŒ…è£…çš„ <code>Context</code>ã€‚å®ƒå……å½“ä¸­é—´å±‚ï¼Œç”¨äºä¿®æ”¹æˆ–æ‰©å±•åŸå§‹ <code>Context</code> çš„è¡Œä¸ºã€‚é€šè¿‡ä½¿ç”¨ <code>ContextWrapper</code>ï¼Œä½ å¯ä»¥åœ¨ä¸æ”¹å˜åº•å±‚ <code>Context</code> çš„æƒ…å†µä¸‹å®šåˆ¶åŠŸèƒ½ã€‚</p>
<p>å½“ä½ éœ€è¦å¢å¼ºæˆ–è¦†ç›–ç°æœ‰ <code>Context</code> çš„ç‰¹å®šè¡Œä¸ºæ—¶ï¼Œå°±ä¼šç”¨åˆ° <code>ContextWrapper</code>ã€‚å®ƒå…è®¸ä½ æ‹¦æˆªå¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œå¹¶æä¾›é¢å¤–åŠŸèƒ½æˆ–å®šåˆ¶åŒ–è¡Œä¸ºã€‚</p>
<p>ä»¥ <code>Activity</code> çš„ç»§æ‰¿å…³ç³»ä¸ºä¾‹ï¼š<code>Activity</code> -&gt; <code>ContextThemeWrapper</code> -&gt; <code>ContextWrapper</code>ã€‚</p>
<p>è€Œ <code>ContextWrapper</code> æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextWrapper</span> <span class="hljs-title">extends</span> <span class="hljs-title">Context</span> {
    <span class="hljs-meta">@UnsupportedAppUsage</span>
    Context mBase;
    ...
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰ <code>Context</code></strong>ï¼šå½“ä½ å‡ºäºç‰¹å®šç›®çš„éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ <code>Context</code> æ—¶ï¼Œä¾‹å¦‚åº”ç”¨ä¸åŒçš„ä¸»é¢˜ï¼Œæˆ–ä»¥ç‰¹å®šæ–¹å¼å¤„ç†èµ„æºã€‚</li>
<li><strong>åŠ¨æ€èµ„æºå¤„ç†</strong>ï¼šåŒ…è£… <code>Context</code> ä»¥åŠ¨æ€æä¾›æˆ–ä¿®æ”¹è¯¸å¦‚å­—ç¬¦ä¸²ã€å°ºå¯¸æˆ–æ ·å¼ç­‰èµ„æºã€‚</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šåƒ <strong>Dagger</strong> å’Œ <strong>Hilt</strong> è¿™æ ·çš„åº“ä¼šåˆ›å»º <code>ContextWrapper</code>ï¼Œä»¥ä¾¿å°†è‡ªå®šä¹‰ <code>Context</code> é™„åŠ åˆ°ç»„ä»¶ä¸Šè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</li>
</ol>
<p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>ContextWrapper</code> æ¥åº”ç”¨è‡ªå®šä¹‰ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThemeContextWrapper</span>(base: Context) : ContextWrapper(base) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTheme</span><span class="hljs-params">()</span></span>: Resources.Theme {
        <span class="hljs-keyword">val</span> theme = <span class="hljs-keyword">super</span>.getTheme()
        theme.applyStyle(R.style.CustomTheme, <span class="hljs-literal">true</span>) <span class="hljs-comment">// Apply a custom theme</span>
        <span class="hljs-keyword">return</span> theme
    }
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰åŒ…è£…å™¨ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">attachBaseContext</span><span class="hljs-params">(newBase: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-keyword">super</span>.attachBaseContext(CustomThemeContextWrapper(newBase))
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ<code>CustomThemeContextWrapper</code> ä¸º <code>Activity</code> åº”ç”¨äº†ç‰¹å®šä¸»é¢˜ï¼Œè¦†ç›–äº†åŸºç¡€ä¸Šä¸‹æ–‡çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<p>è¿™æ ·åšæœ‰å¾ˆå¤šå¥½å¤„ï¼š</p>
<ul>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šä½ èƒ½å°†è‡ªå®šä¹‰é€»è¾‘å°è£…åœ¨åŒ…è£…å™¨ç±»ä¸­ï¼Œå¹¶åœ¨å¤šä¸ªç»„ä»¶é—´å¤ç”¨ã€‚</li>
<li><strong>å°è£…æ€§</strong>ï¼šå¢å¼ºæˆ–ä¿®æ”¹è¡Œä¸ºçš„åŒæ—¶ï¼Œæ— éœ€æ›´æ”¹åŸå§‹ <code>Context</code> çš„å®ç°ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šä¸ç°æœ‰ <code>Context</code> å¯¹è±¡æ— ç¼åä½œï¼Œä¿æŒå‘åå…¼å®¹æ€§ã€‚</li>
</ul>
<p>æ€»ä¹‹ã€‚</p>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­ç”¨äºå®šåˆ¶ <code>Context</code> è¡Œä¸ºçš„çµæ´»ä¸”å¯å¤ç”¨çš„å·¥å…·ã€‚å®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ‹¦æˆªå¹¶ä¿®æ”¹å¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œè€Œæ— éœ€ç›´æ¥æ›´æ”¹å®ƒï¼Œè¿™ä½¿å…¶æˆä¸ºæ„å»ºæ¨¡å—åŒ–ä¸”é€‚åº”æ€§å¼ºçš„åº”ç”¨ç¨‹åºå¿…ä¸å¯å°‘çš„ç±»ã€‚</p>
<h3 data-id="heading-10">è¿›é˜¶ï¼šActivity ä¸­çš„ baseContext æ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> å’Œ <code>baseContext</code> éƒ½èƒ½ç”¨äºè®¿é—® <code>Context</code>ï¼Œä½†å®ƒä»¬ç”¨é€”ä¸åŒï¼Œä»£è¡¨ç€ Android ä¸Šä¸‹æ–‡å±‚çº§ç»“æ„ä¸­çš„ä¸åŒå±‚æ¬¡ã€‚æ¸…æ¥šä½•æ—¶ä½¿ç”¨å®ƒä»¬ï¼Œå¯¹é¿å…ä»£ç æ··æ·†æˆ–æ½œåœ¨é—®é¢˜è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œå…³é”®å­— <code>this</code> æŒ‡çš„æ˜¯ <code>Activity</code> ç±»çš„å½“å‰å®ä¾‹ã€‚ç”±äº <code>Activity</code> æ˜¯ <code>ContextWrapper</code> çš„å­ç±»ï¼ˆå› è€Œé—´æ¥æ˜¯ <code>Context</code> çš„å­ç±»ï¼‰ï¼Œ<code>this</code> æä¾›äº†å¯¹ <code>Activity</code> ç‰¹å®šä¸Šä¸‹æ–‡çš„è®¿é—®ï¼ŒåŒ…æ‹¬è¯¸å¦‚ç”Ÿå‘½å‘¨æœŸç®¡ç†ä»¥åŠä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ç­‰é¢å¤–åŠŸèƒ½ã€‚</p>
<p>å½“åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨ <code>this</code> æ—¶ï¼Œå®ƒé€šå¸¸æŒ‡å‘ <code>Activity</code> çš„å½“å‰ä¸Šä¸‹æ–‡ï¼Œå…è®¸ä½ è°ƒç”¨ç‰¹å®šäºè¯¥ <code>Activity</code> çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ éœ€è¦å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code> æˆ–æ˜¾ç¤ºä¸è¿™ä¸ªç‰¹å®š <code>Activity</code> ç›¸å…³è”çš„å¯¹è¯æ¡†ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>this</code>ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, AnotherActivity::<span class="hljs-keyword">class</span>.java)
startActivity(intent)

<span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(<span class="hljs-keyword">this</span>)
    .setTitle(&amp;#<span class="hljs-number">34</span>;Example&amp;#<span class="hljs-number">34</span>;)
    .setMessage(&amp;#<span class="hljs-number">34</span>;This dialog <span class="hljs-keyword">is</span> tied to <span class="hljs-keyword">this</span> Activity instance.&amp;#<span class="hljs-number">34</span>;)
    .show()
</code></pre>
<p><code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯ <code>ContextWrapper</code> ç±»çš„ä¸€éƒ¨åˆ†ï¼Œè€Œ <code>Activity</code> ç»§æ‰¿è‡ª <code>ContextWrapper</code>ã€‚<code>baseContext</code> é€šå¸¸æ˜¯ <code>ContextImpl</code> å®ä¾‹ï¼Œä¸º <code>Context</code> æ–¹æ³•æä¾›æ ¸å¿ƒå®ç°ã€‚</p>
<p><code>baseContext</code> ä¸€èˆ¬é€šè¿‡ <code>getBaseContext()</code> æ–¹æ³•æ¥è®¿é—®ã€‚ä½ å¾ˆå°‘ç›´æ¥ä½¿ç”¨å®ƒï¼Œä½†åœ¨å¤„ç†è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ï¼Œæˆ–è€…éœ€è¦å¼•ç”¨è¢«åŒ…è£…ä¸Šä¸‹æ–‡èƒŒåçš„åŸå§‹ä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-comment">// å’Œç›´æ¥é€šè¿‡ this è¿”å›çš„ç›¸æ¯”ï¼Œæ­¤å¤„çš„ baseContext ä¸æºå¸¦å½“å‰ Activity çš„ä¸»é¢˜ä¿¡æ¯</span>
<span class="hljs-keyword">val</span> systemService = baseContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)
</code></pre>
<p>æ€»ç»“ä¸€ä¸‹ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p>
<ol>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼š<code>this</code> ä»£è¡¨å½“å‰çš„ <code>Activity</code> å®ä¾‹åŠå…¶ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ <code>baseContext</code> æŒ‡çš„æ˜¯ <code>Activity</code> æ„å»ºæ‰€åŸºäºçš„æ›´ä½å±‚æ¬¡çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>ç”¨æ³•</strong>ï¼š<code>this</code> é€šå¸¸ç”¨äºä¸ <code>Activity</code> ç”Ÿå‘½å‘¨æœŸæˆ–ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„æ“ä½œï¼Œä¾‹å¦‚å¯åŠ¨ <code>Activity</code> æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†ã€‚<code>baseContext</code> ä¸€èˆ¬åœ¨ä¸ <code>Context</code> çš„æ ¸å¿ƒå®ç°è¿›è¡Œäº¤äº’æ—¶ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨è‡ªå®šä¹‰ <code>ContextWrapper</code> çš„åœºæ™¯ä¸­ã€‚</li>
<li><strong>å±‚çº§å…³ç³»</strong>ï¼š<code>baseContext</code> æ˜¯ <code>Activity</code> çš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚è®¿é—® <code>baseContext</code> ä¼šç»•è¿‡ <code>Activity</code> ä½œä¸º <code>ContextWrapper</code> æ‰€æä¾›çš„é¢å¤–åŠŸèƒ½ã€‚</li>
</ol>
<p>æ€»ä¹‹ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> æŒ‡å‘å½“å‰çš„ <code>Activity</code> å®ä¾‹ï¼Œæä¾›äº†å…·æœ‰ç”Ÿå‘½å‘¨æœŸå’Œç‰¹å®šäºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰åŠŸèƒ½çš„é«˜çº§ä¸Šä¸‹æ–‡ã€‚è€Œ <code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ï¼Œå¸¸ç”¨äºè¯¸å¦‚è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ç­‰é«˜çº§åœºæ™¯ã€‚è™½ç„¶åœ¨ Android å¼€å‘ä¸­ <code>this</code> ä½¿ç”¨æœ€ä¸ºæ™®éï¼Œä½†ç†è§£ <code>baseContext</code> æœ‰åŠ©äºè°ƒè¯•ä»¥åŠåˆ›å»ºæ¨¡å—åŒ–ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-11">ç•ªå¤–</h2>
<p>æœ¬æ–‡è®²è¿°çš„æŠ€æœ¯ç»†èŠ‚å®Œå…¨æ˜¯åŸºäºé¢è¯•ä¸‹çš„ï¼Œå¦‚æœä½ æƒ³å¯¹ <code>Context</code> æœ‰ä¸ªæ›´åŠ å®Œæ•´çš„è®¤è¯†ï¼Œè¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7531888045412663348" target="_blank" title="https://juejin.cn/post/7531888045412663348">æ†‹äº†ä¸€å‘¨äº†ï¼Œ12000å­—æ·±å…¥æµ…å‡ºAndroidçš„Contextæœºåˆ¶</a></p>
<p><a href="https://juejin.cn/post/7527953491890274319" target="_blank" title="https://juejin.cn/post/7527953491890274319">2025å¹´äº†ï¼Œä¸‡å­—é•¿æ–‡å¸¦ä½ äº†è§£Context</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582047554090254345</link>    <guid>https://juejin.cn/post/7582047554090254345</guid>    <pubDate>2025-12-11T00:49:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047554090254345" data-draft-id="7582047554090221577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T00:49:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¿å…ƒç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1972988307323236"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972988307323236/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¿å…ƒç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:49:20.000Z" title="Thu Dec 11 2025 00:49:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç‚¹å‡»ä¸Šæ–¹äº¿å…ƒç¨‹åºå‘˜+å…³æ³¨å’Œâ˜…æ˜Ÿæ ‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d37f61c1b0a24fdc9d8f8cabe7af6a1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=1gTzZRzeppWCybmhWQHR47JHzCs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p><strong>å“ˆå–½å¤§å®¶å¥½</strong>ï¼Œæ¬¢è¿å°ä¼™ä¼´æä¾›çš„ç´ æï¼š</p>
<blockquote>
<p><strong>äº¿å“¥</strong>æ™šä¸Šå¥½ï¼Œä¸Šæ¬¡å‹ç¼©äº†<code>PNG</code>å›¾ç‰‡åï¼Œå›¾ç‰‡èµ„æºè¿˜æ˜¯éå¸¸å¤§ã€‚</p>
<p><strong>ä»”ç»†</strong>ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°é¡¹ç›®é‡Œé¢å±…ç„¶è¿˜æœ‰å¾ˆå¤šæ²¡ç”¨åˆ°çš„ç¥–ä¼ èµ„æºï¼</p>
<p><strong>æ¸¸æˆå¿«è¦ä¸Šçº¿äº†ï¼Œé¡¹ç›®é‡Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ</strong></p>
</blockquote>
<p><strong>é€šå¸¸</strong>è¿™æ ·çš„æƒ…å†µå‡ºç°äºé¡¹ç›®çš„äºŒæ¬¡å¼€å‘é˜¶æ®µæˆ–è€…ç•Œé¢æ•ˆæœä¸å¥½é¢‘ç¹æ›´æ¢çš„æƒ…å†µã€‚</p>
<p><strong>ç”±äº</strong>ç•Œé¢çš„å¸ƒå±€å‘ç”Ÿå˜åŒ–ï¼Œå›¾ç‰‡æ²¡åŠæ³•ç›´æ¥è¦†ç›–æ›¿æ¢ï¼Œä¸€ä¸å°å¿ƒå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´æ—§èµ„æºé—å¿˜åœ¨é¡¹ç›®é‡Œï¼Œé€ æˆâ€œæ³„æ¼â€ã€‚</p>
<p><strong>é‚£</strong>æˆ‘ä»¬æŠŠé—å¿˜çš„èµ„æºåˆ æ‰ä¸å°±å¥½äº†ï¼Ÿ</p>
<p><strong>æ˜¯çš„</strong>ï¼Œå‰ææ˜¯è¦çŸ¥é“å“ªäº›èµ„æºæ˜¯å·²ç»æ²¡è¢«å¼•ç”¨äº†ï¼</p>
<p><strong>è¨€å½’æ­£ä¼ </strong>ï¼Œæœ¬æœŸä¸€èµ·æ¥çœ‹çœ‹ï¼Œå¦‚ä½•åœ¨<code>Cocos</code>æ¸¸æˆå¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰æ’ä»¶<strong>æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆèµ„æºå¼•ç”¨</strong>ã€‚</p>
<p><strong>æœ¬æ–‡æºå·¥ç¨‹å¯åœ¨æ–‡æœ«è·å–ï¼Œå°ä¼™ä¼´ä»¬è‡ªè¡Œå‰å¾€ã€‚</strong></p>
<h2 data-id="heading-1">ç›´æ¥ä¸Šå®ä¾‹</h2>
<p><strong>å®¢å®˜</strong>è¯·ç•™æ­¥ï¼Œå€’æ¯èŒ¶ï¼Œå’±ä»¬æœ¬æœŸç›´æ¥ä¸Šå®ä¾‹ï¼ŒåºŸè¯æœ€åå†è¯´ã€‚</p>
<h3 data-id="heading-2">1.åˆ›å»ºæ’ä»¶</h3>
<p><strong>æƒ³è¦è‡ªå®šä¹‰æ’ä»¶æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆå¼•ç”¨</strong>ï¼Œé¦–å…ˆè¦åˆ›å»ºæˆ‘ä»¬çš„æ’ä»¶ï¼Œé€šè¿‡èœå•<code>æ‰©å±•-&gt;åˆ›å»ºæ‰©å±•</code>æ‰“å¼€æ‰©å±•åˆ›å»ºé¢æ¿,é€‰æ‹©ä¸€ä¸ªç©ºç™½æ¨¡æ¿è¿›è¡Œåˆ›å»ºå¹¶å¯ç”¨æ’ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b16bcdd42f74bb2b68af650cacba3e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=3nirqIUY6yeQ2s1LUYoflaLPGYU%3D" alt="" loading="lazy"/></p>
<p><strong>æ·»åŠ </strong>ä¸ªæ¶ˆæ¯<code>findReferences</code>å’Œå¿«æ·é”®<code>ctrl+shift+f</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ce30d4f4724c1ab3c7a58badafa8c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=5Gxwunlm%2BvXNjqX%2FMQgN69WSDfg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.æ’ä»¶åŸç†</h3>
<blockquote>
<p><strong>æ¯ä¸ª</strong>å¯¼å…¥é¡¹ç›®çš„èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ã€<code>prefab</code>ã€è„šæœ¬ç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ª<code>uuid</code>ã€‚</p>
<p><strong>è¿™ä¸ª</strong><code>uuid</code>ç”¨äºåœ¨é¡¹ç›®ä¸­å”¯ä¸€æ ‡è¯†è¯¥èµ„æºã€‚</p>
<p><strong>é€šå¸¸</strong><code>uuid</code>ä¼šåœ¨èµ„æºæ–‡ä»¶æˆ–è€…èµ„æºçš„<code>meta</code>æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98f4f29b5a8a436d94c309ecacfe79d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=8I5a0qZGFbI83t5UPOtrWDFx0HI%3D" alt="" loading="lazy"/></p>
<p><strong>å¦‚ä¸Šå›¾</strong>ï¼Œ<code>Main.scene</code>çš„<code>uuid</code>ï¼Œæˆ–è€…æ˜¯åœ¨ä¸‹å›¾çš„<code>Main.scene.meta</code>æ–‡ä»¶ä¸­:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/506a022e64634689890e331686302681~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=x1gBoXE15zEt99AAi6cXpzIOrww%3D" alt="" loading="lazy"/></p>
<p><strong>åŸç†å¾ˆç®€å•</strong>ï¼Œå°±æ˜¯è·å–å½“å‰èµ„æºçš„<code>uuid</code>ï¼Œç„¶åå†å»æŸ¥æ‰¾å…¶ä»–æ‰€æœ‰èµ„æºï¼Œå¦‚æœå…¶ä»–èµ„æºæ–‡ä»¶çš„æ•°æ®ä¸­åŒ…å«äº†å½“å‰èµ„æºçš„<code>uuid</code>ï¼Œè¯´æ˜å½“å‰èµ„æºè¢«å¼•ç”¨ã€‚</p>
<h3 data-id="heading-4">3.æ’ä»¶æµç¨‹</h3>
<blockquote>
<p><code>å¼€å§‹-&gt;è·å–é€‰ä¸­çš„èµ„æºçš„uuid-&gt;éå†assetç›®å½•æ‰€æœ‰çš„èµ„æº-&gt;åˆ¤æ–­uuidæ˜¯å¦åœ¨éå†èµ„æºçš„æ•°æ®ä¸­-&gt;ç»“æŸ</code></p>
</blockquote>
<ul>
<li>
<p><strong>è·å–é€‰ä¸­çš„èµ„æºçš„uuid</strong>ï¼š<code>const selectedUuids = Editor.Selection.getSelected(&amp;#34;asset&amp;#34;);</code>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ac48a296e144965bf27e1bf925a04ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=SqPfa6P8O9sQE%2FvYDHyeLsRjd0Q%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>éå†assetç›®å½•æ‰€æœ‰çš„èµ„æº</strong>: <code>const allAssets = await Editor.Message.request('asset-db', 'query-assets', { pattern: 'db://assets/**/*' }); </code>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9034bf915a948c1917a68b5c19ba169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=4JRpRXX%2FM3kjFUkSM9jH4vSHHp4%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>åˆ¤æ–­uuidæ˜¯å¦åœ¨éå†èµ„æºçš„æ•°æ®ä¸­</strong>: <code>let assetFile = fs.readFileSync(assetInfo.file, 'utf-8');</code>é€šè¿‡<code>fs</code>æ¨¡å—è¯»å–æ–‡ä»¶å†…å®¹ç„¶ååˆ¤æ–­æ˜¯å¦åŒ…å«é€‰ä¸­èµ„æºçš„<code>uuid</code>ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bba76712b3e34161b6a4feee502c141b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=OcNr9NWg6UfWjeRDp6v7N7KmSpU%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<h3 data-id="heading-5">4.æ•ˆæœæ¼”ç¤º</h3>
<p><strong>åœ¨æ’ä»¶ç›®å½•</strong>ï¼Œå®‰è£…ä¾èµ–<code>npm install</code>å’Œæ„å»ºæ’ä»¶<code>npm run build</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30ab53fbc76a48d4a15b2b69d25fe9a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=33rswlodpy88WUFLTRqWi0j0ohk%3D" alt="" loading="lazy"/></p>
<p><strong>é€‰ä¸­</strong>å›¾ç‰‡èµ„æºï¼ŒæŒ‰ä¸‹<code>crtl+shift+f</code>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fb87c7111c44974a6d323ac13a0ddd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=xyShvTZl9nKTD5ZtqfMbvHDjt6c%3D" alt="" loading="lazy"/></p>
<p><strong>é€‰ä¸­</strong>è„šæœ¬èµ„æºï¼ŒæŒ‰ä¸‹<code>crtl+shift+f</code>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa9c570c1894df982cb8edee67ba533~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=Z%2FCI6diCJrV3hzW2XsVYWSGdMjI%3D" alt="" loading="lazy"/></p>
<p><strong>æ•´ä½“</strong>é¢„è§ˆå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0d22e7c30584fa58941775bb5de8b4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=9FQ2TohKg0r%2B%2BVUeQIAMO85s3qI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">æ¸©é¦¨æç¤º</h2>
<ul>
<li>
<p><strong>ä»¥ä¸Š</strong>æ’ä»¶åŠŸèƒ½ä»…æ˜¾ç¤ºé€‰ä¸­èµ„æºçš„è¢«å¼•ç”¨æƒ…å†µï¼Œè¦æŸ¥è¯¢æ‰€æœ‰èµ„æºçš„å°ä¼™ä¼´å¯è‡ªè¡Œä¿®æ”¹æ‰©å±•éå†æ‰€æœ‰å›¾ç‰‡èµ„æºã€‚</p>
</li>
<li>
<p><strong>æ’ä»¶</strong>ä»…æŸ¥æ‰¾èµ„æºè¢«å…¶ä»–èµ„æºå¼•ç”¨æƒ…å†µï¼Œä»£ç ä¸­åŠ¨æ€åŠ è½½çš„èµ„æºï¼Œéœ€è¦è‡ªè¡Œæ‰©å±•(æ£€ç´¢æ¥å£æˆ–é…ç½®)ã€‚</p>
</li>
<li>
<p><strong>é™¤äº†</strong>åœ¨<code>Bundle</code>åŒ…ä¸­(åŒ…æ‹¬<code>resources</code>æ–‡ä»¶å¤¹)ï¼Œæ²¡è¢«ä¾èµ–çš„èµ„æºä¸ä¼šè¢«æ‰“åˆ°åŒ…ä¸­ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·æ£€ç´¢</strong>æ˜¯éœ€è¦çš„ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦äººå·¥å¯¹èµ„æºè¿›è¡Œè¾¨åˆ«ï¼Œç‰¹åˆ«åœ¨ä¸Šçº¿å‰ï¼Œä¿è¯ä¸è¯¯åˆ åœ¨ç”¨èµ„æºã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p><strong>ä»¥ä¸Š</strong>å°±æ˜¯å¦‚ä½•æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆèµ„æºå¼•ç”¨çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¿˜è¯·å°ä¼™ä¼´ä»¬æŒ‡å‡ºï¼Œæ¬¢è¿æ›´å¤šçš„å°ä¼™ä¼´è¿›è¡ŒæŠ•ç¨¿(ç´ æã€æ–‡ç« ï¼Œç¡¬å¸ç­‰ç­‰)ï¼Œæ„Ÿè°¢æ”¯æŒï¼</p>
<p><strong>å°ä¼™ä¼´ä»¬åœ¨æ¸¸æˆå¼€å‘ä¸­è¿˜é‡åˆ°å“ªäº›æœ‰è¶£çš„äº‹æƒ…å‘¢ï¼Ÿ</strong></p>
<p>æœ¬æ–‡<strong>æºå·¥ç¨‹</strong>å¯é€šè¿‡<strong>ç§ä¿¡</strong>å‘é€ <strong>resfinder</strong> è·å–ï¼Œæ›´å¤š<strong>ä¸å®ç”¨èµ„æº</strong>å¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fstore.cocos.com%2Fapp%2Fdetail%2F6576" target="_blank" title="https://store.cocos.com/app/detail/6576" ref="nofollow noopener noreferrer">é˜…è¯»åŸæ–‡</a>è·å–ã€‚</p>
<hr/>
<p><strong>æˆ‘æ˜¯"äº¿å…ƒç¨‹åºå‘˜"ï¼Œä¸€ä½æœ‰ç€8å¹´æ¸¸æˆè¡Œä¸šç»éªŒçš„ä¸»ç¨‹ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ‚¨å¸®åŠ©, ä¹Ÿå¸Œæœ›é€šè¿‡æ‚¨èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚</strong></p>
<p>AD:ç¬”è€…çº¿ä¸Šçš„å°æ¸¸æˆã€Šæ‰“èºä¸é—¯å…³ã€‹ã€Šè´ªåƒè›‡æŒæœºç»å…¸ã€‹ã€Šé‡åŠ›è¿·å®«çƒã€‹ã€Šå¡«è‰²ä¹‹æ—…ã€‹ã€Šæ–¹å—æŒæœºç»å…¸ã€‹å¤§å®¶å¯ä»¥è‡ªè¡Œç‚¹å‡»æœç´¢ä½“éªŒã€‚</p>
<p>å®ä¸ç›¸ç’ï¼Œæƒ³è¦ä¸ª<strong>èµ</strong>å’Œ<strong>çˆ±å¿ƒ</strong>ï¼è¯·æŠŠè¯¥æ–‡ç« <strong>åˆ†äº«</strong>ç»™ä½ è§‰å¾—æœ‰éœ€è¦çš„å…¶ä»–å°ä¼™ä¼´ã€‚è°¢è°¢ï¼</p>
<p>æ¨èä¸“æ ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3175880857546129410%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3175880857546129410#wechat_redirect" ref="nofollow noopener noreferrer">çŸ¥è¯†ä»˜è´¹ä¸“æ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26mid%3D2247487282%26idx%3D1%26sn%3De3cb8ab6f5c0d5f804d5c29e2e90b9ad%26chksm%3Dc00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54%26token%3D336413522%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg5NTY2MjIzMg==&amp;mid=2247487282&amp;idx=1&amp;sn=e3cb8ab6f5c0d5f804d5c29e2e90b9ad&amp;chksm=c00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54&amp;token=336413522&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å’Œä¸çŸ¥é“çš„å¾®ä¿¡å°æ¸¸æˆå¸¸ç”¨APIæ•´ç†ï¼Œèµ¶ç´§æ”¶è—ç”¨èµ·æ¥~</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3207702867494305797%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3207702867494305797#wechat_redirect" ref="nofollow noopener noreferrer">100ä¸ªCocoså®ä¾‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3073771187570999299%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3073771187570999299#wechat_redirect" ref="nofollow noopener noreferrer">8å¹´ä¸»ç¨‹æ‰‹æŠŠæ‰‹æ‰“é€ Cocosç‹¬ç«‹æ¸¸æˆå¼€å‘æ¡†æ¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3121583619634626562%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3121583619634626562#wechat_redirect" ref="nofollow noopener noreferrer">å’Œ8å¹´æ¸¸æˆä¸»ç¨‹ä¸€èµ·å­¦ä¹ è®¾è®¡æ¨¡å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3Faction%3Dgetalbum%26__biz%3DMzg5NTY2MjIzMg%3D%3D%26scene%3D1%26album_id%3D3038883468588089350%26count%3D3%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg5NTY2MjIzMg==&amp;scene=1&amp;album_id=3038883468588089350&amp;count=3#wechat_redirect" ref="nofollow noopener noreferrer">ä»é›¶å¼€å§‹å¼€å‘è´ªåƒè›‡å°æ¸¸æˆåˆ°ä¸Šçº¿ç³»åˆ—</a></p>
<p>ç‚¹å‡»ä¸‹æ–¹ç°è‰²æŒ‰é’®+å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°]]></title>    <link>https://juejin.cn/post/7582063437414449190</link>    <guid>https://juejin.cn/post/7582063437414449190</guid>    <pubDate>2025-12-11T00:56:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582063437414449190" data-draft-id="7580277964341510154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-11T00:56:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:56:56.000Z" title="Thu Dec 11 2025 00:56:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>è¯·ä½ æ¥å®ç°â¼€ä¸ª myAtoi(string s) å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆâ¼€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚</p>
<p>å‡½æ•° myAtoi(string s) çš„ç®—æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¯»â¼Šå­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒâ½†â½¤çš„å‰å¯¼ç©ºæ ¼</li>
<li>æ£€æŸ¥ä¸‹â¼€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°ï¼Œè¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚</li>
<li>è¯»â¼Šä¸‹â¼€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹â¼€ä¸ªâ¾®æ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“â¼Šçš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚</li>
<li>å°†å‰â¾¯æ­¥éª¤è¯»â¼Šçš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œ" 123 " -&gt; 123 ï¼Œ " 0032 " -&gt; 32 ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è¯»â¼Šæ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚</li>
<li>å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’2^31, 2^(31 âˆ’ 1)] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œâ¼©äº âˆ’2^31 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 2^31 ï¼Œâ¼¤äº 2^(31 âˆ’ 1) çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º2^(31 âˆ’ 1)</li>
<li>è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æœ¬é¢˜ä¸­çš„ç©ºâ½©å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ ' ' ã€‚</li>
<li>é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œè¯·å‹¿å¿½ç•¥ ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚</li>
</ul>
<p>ç¤ºä¾‹1ï¼š
è¾“â¼Šï¼šs = "42"
è¾“å‡ºï¼š42
è§£é‡Šï¼šåŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»â¼Šçš„å­—ç¬¦ï¼Œæ’â¼Šç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"42"ï¼ˆè¯»â¼Š "42"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 42 ã€‚</li>
<li>ç”±äº "42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚</li>
</ol>
<p>ç¤ºä¾‹2ï¼š
è¾“â¼Šï¼šs = " -42"
è¾“å‡ºï¼š-42
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Šå‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Š '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Š "42"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° -42 ã€‚</li>
<li>ç”±äº "-42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚</li>
</ol>
<p>ç¤ºä¾‹3ï¼š
è¾“â¼Šï¼šs = "4193 with words"
è¾“å‡ºï¼š4193
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"4193 with words"ï¼ˆè¯»â¼Š "4193"ï¼›ç”±äºä¸‹â¼€ä¸ªå­—ç¬¦ä¸æ˜¯â¼€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»â¼Šåœâ½Œï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚</li>
<li>ç”±äº "4193" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚</li>
</ol>
<p>ç¤ºä¾‹4ï¼š
è¾“â¼Šï¼šs = "words and 987"
è¾“å‡ºï¼š0
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"words and 987"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"words and 987"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"words and 987"ï¼ˆç”±äºå½“å‰å­—ç¬¦ 'w' ä¸æ˜¯â¼€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»â¼Šåœâ½Œï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 0 ï¼Œå› ä¸ºæ²¡æœ‰è¯»â¼Šä»»ä½•æ•°å­—ã€‚</li>
<li>ç”±äº 0 åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 0 ã€‚</li>
</ol>
<p>ç¤ºä¾‹5ï¼š
è¾“â¼Šï¼šs = "-91283472332"
è¾“å‡ºï¼š-2147483648
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"-91283472332"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"-91283472332"ï¼ˆè¯»â¼Š '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"-91283472332"ï¼ˆè¯»â¼Š "91283472332"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° -91283472332 ã€‚</li>
<li>ç”±äº -91283472332 â¼©äºèŒƒå›´ [-231, 231 - 1] çš„ä¸‹ç•Œï¼Œæœ€ç»ˆç»“æœè¢«æˆªæ–­ä¸º -231 = -2147483648</li>
</ol>
<p>æç¤ºï¼š</p>
<ul>
<li>0 &lt;= s.length &lt;= 200</li>
<li>s ç”±è‹±â½‚å­—âºŸï¼ˆâ¼¤å†™å’Œâ¼©å†™ï¼‰ã€æ•°å­—ï¼ˆ0-9ï¼‰ã€' 'ã€'+'ã€'-' å’Œ '.' ç»„æˆ</li>
</ul>
<h2 data-id="heading-1">æ€è·¯ä¸è§£ç­”</h2>
<h3 data-id="heading-2">åŸºç¡€éå†æ³•</h3>
<p>è¿™é“é¢˜â½¬çœ‹èµ·æ¥å¾ˆâ»“ï¼Œä½†æ˜¯å®é™…ä¸Šé€»è¾‘å¾ˆæ¸…æ™°ï¼Œå°±æ˜¯å°†å­—ç¬¦ä¸²è§£ææˆä¸ºæ•°å­—ï¼Œâ¾¥â¾¯æœ‰â¼ä¸ªç‰¹æ®Šçš„åˆ™ï¼š</p>
<ol>
<li>å‰â¾¯çš„ç©ºæ ¼å»æ‰ï¼Œä¸è¯»å–</li>
<li>æ¥ä¸‹æ¥çš„å­—ç¬¦å¿…é¡»æ˜¯æ•°å­—ï¼Œâ€œ + â€å·æˆ–è€…â€œ - â€å·
<ol>
<li>å¦‚æœæ˜¯â€œ + â€å·æˆ–è€…â€œ - â€å·ï¼Œå°†ç¬¦å·è®°å½•ä¸‹æ¥</li>
<li>æ²¡æœ‰ç¬¦å·é»˜è®¤æ˜¯â€œ + â€å·ï¼Œæ­£æ•°ã€‚</li>
</ol>
</li>
<li>æ¥ä¸‹æ¥çš„å­—ç¬¦å¿…é¡»æ˜¯æ•°å­—ï¼Œé‡åˆ°å…¶ä»–å­—ç¬¦ä¼šç›´æ¥ç»“æŸ</li>
<li>éœ€è¦è€ƒè™‘æº¢å‡ºçš„é—®é¢˜</li>
</ol>
<p>åœ¨å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—çš„æ—¶å€™ï¼Œâ½¤ä¸‹â¾¯è¿™å¥æ ¸â¼¼ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">sum = sum * <span class="hljs-number">10</span> + (str.charAt(i) - <span class="hljs-string">'0'</span>);
</code></pre>
<p>ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦è€ƒè™‘æ•°å­—æº¢å‡ºçš„é—®é¢˜ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŠ å’Œä¹‹å‰åˆ¤æ–­ï¼Œé’ˆå¯¹â¼¤äº0çš„æƒ…å†µï¼Œå¦‚æœâ¼¤äºæœ€â¼¤å€¼æ•´é™¤10ï¼Œæˆ–è€…ç­‰äºæœ€â¼¤å€¼æ•´é™¤10ï¼Œä½†æ˜¯ä¸ªä½æ•°è¶…è¿‡äº†ï¼Œéƒ½ç›´æ¥è¿”å›0ã€‚</p>
<p>å‡è®¾æœ€â¼¤å€¼æ˜¯127ï¼Œé‚£ä¹ˆsumå¦‚æœâ¼¤äº12ï¼Œè‚¯å®šä¼šè¶…è¿‡ï¼Œå¦‚æœsum == 12ï¼Œä½†æ˜¯ä¸ªä½æ•°â¼¤äº7ï¼Œä¹˜ä»¥10ç›¸åŠ ï¼Œä¹Ÿè‚¯å®šä¼šè¶…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (sum &gt; Integer.MAX_VALUE/<span class="hljs-number">10</span> || (sum == Integer.MAX_VALUE / <span class="hljs-number">10</span> &amp;&amp;
(str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">7</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å¯¹äºâ¼©äº0 çš„æƒ…å†µï¼Œå‡è®¾æœ€â¼©å€¼æ˜¯-128 ï¼Œé‚£ä¹ˆsum æ˜¯æ•°å­—éƒ¨åˆ† 128 , å¦‚æœå½“å‰sum â¼¤äº 12 ï¼Œé‚£ä¹ˆå°±â¼€å®šè¶…å‡ºï¼Œæˆ–è€…sum == 12 ï¼Œä½†æ˜¯ä¸ªä½æ•°â¼¤äº8 ï¼Œä¹˜ä»¥10 ï¼Œç›¸åŠ ä¹Ÿä¼šâ¼¤äº128 ï¼Œä¸ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›0 ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (sum &lt; Integer.MIN_VALUE/<span class="hljs-number">10</span> || (sum == Integer.MIN_VALUE / <span class="hljs-number">10</span> &amp;&amp; x
(str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">8</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å…·ä½“ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">myAtoi</span><span class="hljs-params">(String str)</span> {
        <span class="hljs-keyword">if</span> (str == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (i &lt; str.length() &amp;&amp; str.charAt(i) == <span class="hljs-string">' '</span>) {
            i++;
        }
        <span class="hljs-keyword">if</span> (i &gt;= str.length() || (str.charAt(i) != <span class="hljs-string">'-'</span> &amp;&amp; str.charAt(i) != <span class="hljs-string">'+'</span> &amp;&amp; !((str.charAt(i) &gt;= <span class="hljs-string">'0'</span>) &amp;&amp;
                (str.charAt(i) &lt;= <span class="hljs-string">'9'</span>)))) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">sign</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (i &lt; str.length() &amp;&amp; (str.charAt(i) == <span class="hljs-string">'-'</span> || i &lt; str.length() &amp;&amp;
                str.charAt(i) == <span class="hljs-string">'+'</span>)) {
            sign = str.charAt(i) == <span class="hljs-string">'-'</span> ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            i++;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (; i &lt; str.length(); i++) {
            <span class="hljs-keyword">if</span> (str.charAt(i) &gt;= <span class="hljs-string">'0'</span> &amp;&amp; str.charAt(i) &lt;= <span class="hljs-string">'9'</span>) {
                <span class="hljs-keyword">if</span> (sign == <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">if</span> (sum &gt; Integer.MAX_VALUE / <span class="hljs-number">10</span> || sum == Integer.MAX_VALUE / <span class="hljs-number">10</span> &amp;&amp; (str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">7</span>) {
                        <span class="hljs-keyword">return</span> Integer.MAX_VALUE;
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (sum &gt; (Integer.MAX_VALUE) / <span class="hljs-number">10</span> || sum ==
                        (Integer.MAX_VALUE) / <span class="hljs-number">10</span> &amp;&amp; (str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">8</span>) {
                        <span class="hljs-keyword">return</span> Integer.MIN_VALUE;
                    }
                }
                sum = sum * <span class="hljs-number">10</span> + (str.charAt(i) - <span class="hljs-string">'0'</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> sum * sign;
            }
        }
        <span class="hljs-keyword">return</span> sum * sign;
    }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ä¸º O(n)</li>
<li>ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚</li>
</ul>
<h3 data-id="heading-3">æ­£åˆ™è¡¨è¾¾å¼</h3>
<p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ•°å­—æ¨¡å¼ï¼Œä»£ç æ›´åŠ ç®€æ´</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">myAtoi</span><span class="hljs-params">(String s)</span> {
        <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        
        s = s.trim();
        <span class="hljs-keyword">if</span> (s.length() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°å­—æ¨¡å¼ï¼šå¯é€‰ç¬¦å·ä½+æ•°å­—[3](@ref)</span>
        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(&amp;#<span class="hljs-number">34</span>;^[+-]?\\d+&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(s);
        
        <span class="hljs-keyword">if</span> (!matcher.find()) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ²¡æœ‰åŒ¹é…åˆ°æ•°å­—æ¨¡å¼</span>
        }
        
        <span class="hljs-type">String</span> <span class="hljs-variable">numStr</span> <span class="hljs-operator">=</span> matcher.group();
        <span class="hljs-type">int</span> <span class="hljs-variable">sign</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">startIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// å¤„ç†ç¬¦å·ä½</span>
        <span class="hljs-keyword">if</span> (numStr.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'+'</span>) {
            startIndex = <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (numStr.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'-'</span>) {
            sign = -<span class="hljs-number">1</span>;
            startIndex = <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ä½¿ç”¨longé˜²æ­¢è½¬æ¢è¿‡ç¨‹ä¸­æº¢å‡º</span>
        
        <span class="hljs-comment">// è½¬æ¢æ•°å­—éƒ¨åˆ†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; numStr.length(); i++) {
            <span class="hljs-type">int</span> <span class="hljs-variable">digit</span> <span class="hljs-operator">=</span> numStr.charAt(i) - <span class="hljs-string">'0'</span>;
            result = result * <span class="hljs-number">10</span> + digit;
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æº¢å‡ºintèŒƒå›´</span>
            <span class="hljs-keyword">if</span> (sign == <span class="hljs-number">1</span> &amp;&amp; result &gt; Integer.MAX_VALUE) {
                <span class="hljs-keyword">return</span> Integer.MAX_VALUE;
            }
            <span class="hljs-keyword">if</span> (sign == -<span class="hljs-number">1</span> &amp;&amp; -result &lt; Integer.MIN_VALUE) {
                <span class="hljs-keyword">return</span> Integer.MIN_VALUE;
            }
        }
        
        <span class="hljs-keyword">return</span> (<span class="hljs-type">int</span>) result * sign;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæ­£åˆ™åŒ¹é…å’Œæ•°å­—è½¬æ¢éƒ½æ˜¯çº¿æ€§æ—¶é—´</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦å­˜å‚¨åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582067084840534070</link>    <guid>https://juejin.cn/post/7582067084840534070</guid>    <pubDate>2025-12-10T23:31:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840534070" data-draft-id="7582067084840517686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T23:31:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é©¬å†™ç "/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é©¬å†™ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T23:31:16.000Z" title="Wed Dec 10 2025 23:31:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šVue çŠ¶æ€ç®¡ç†çš„æ—¶ä»£å˜è¿</h2>
<p>åœ¨ Vue.js åº”ç”¨å¼€å‘çš„ä¸–ç•Œé‡Œï¼ŒçŠ¶æ€ç®¡ç†ä¸€ç›´æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„æ ¸å¿ƒè¯¾é¢˜ã€‚å¤šå¹´æ¥ï¼ŒVuex ä½œä¸ºå®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œå‡ ä¹æˆä¸º Vue é¡¹ç›®çš„æ ‡å‡†é…ç½®ã€‚ç„¶è€Œï¼Œéšç€ Vue 3 çš„æ¨å‡ºå’Œå¼€å‘ç†å¿µçš„æ¼”è¿›ï¼Œä¸€ä¸ªå…¨æ–°çš„æŒ‘æˆ˜è€…â€”â€”<strong>Pinia</strong>â€”â€”æ‚„ç„¶ç™»åœºï¼Œå¹¶è¿…é€Ÿèµ¢å¾—äº†å¼€å‘è€…çš„é’çã€‚å®ƒä¸ä»…è¢« Vue å®˜æ–¹æ¨èä¸ºâ€œé»˜è®¤çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆâ€ï¼Œæ›´ä»¥å…¶ç®€æ´ã€ç›´è§‚å’Œå¼ºå¤§çš„ç‰¹æ€§ï¼Œæ­£åœ¨é‡æ–°å®šä¹‰æˆ‘ä»¬å¯¹ Vue çŠ¶æ€ç®¡ç†çš„è®¤çŸ¥ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Pinia æ˜¯ä»€ä¹ˆï¼Ÿä¸ä»…ä»…æ˜¯â€œå¦ä¸€ä¸ªçŠ¶æ€åº“â€</h2>
<p>Pinia æ˜¯ä¸€ä¸ªä¸º Vue.js è®¾è®¡çš„çŠ¶æ€ç®¡ç†åº“ã€‚å®ƒç”± Vue æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘ï¼Œæ—¨åœ¨æä¾›æ›´ç›´è§‚ã€ç±»å‹å®‰å…¨ä¸”æ¨¡å—åŒ–çš„çŠ¶æ€ç®¡ç†ä½“éªŒã€‚</p>
<p>ä¸ Vuex ç›¸æ¯”ï¼ŒPinia æœ€æ˜¾è‘—çš„å“²å­¦è½¬å˜æ˜¯ï¼š<strong>å®ƒæ‘’å¼ƒäº† mutations çš„æ¦‚å¿µ</strong>ã€‚è¿™ä¸ªè®¾è®¡å†³ç­–çœ‹ä¼¼ç®€å•ï¼Œå´å¸¦æ¥äº†å¼€å‘ä½“éªŒçš„è´¨å˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Pinia çš„ Store ç¤ºä¾‹ - ç®€æ´ç›´è§‚</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++ <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œæ— éœ€ mutations</span>
    },
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,
  },
})
</code></pre>
<h2 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© Piniaï¼Ÿäº”å¤§æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-3">1. æ›´ç®€æ´çš„ API è®¾è®¡</h3>
<p>Pinia çš„ API æåº¦ç²¾ç®€ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“ã€‚å»æ‰äº† Vuex ä¸­çš„ <code>mutations</code>ï¼ŒçŠ¶æ€ä¿®æ”¹å¯ä»¥é€šè¿‡ actions ç›´æ¥å®Œæˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼ä¿®æ”¹ï¼ˆé…åˆå“åº”å¼ç³»ç»Ÿï¼‰ã€‚è¿™ç§è®¾è®¡å‡å°‘äº†æ¦‚å¿µæ•°é‡ï¼Œè®©ä»£ç æ›´æ˜“è¯»æ˜“å†™ã€‚</p>
<h3 data-id="heading-4">2. å®Œç¾çš„ TypeScript æ”¯æŒ</h3>
<p>Pinia ä»ä¸€å¼€å§‹å°±ä¸º TypeScript è®¾è®¡ï¼Œæä¾›äº†å‡ºè‰²çš„ç±»å‹æ¨æ–­ã€‚ä½ çš„ storeã€stateã€actions å’Œ getters éƒ½èƒ½è·å¾—å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¯é æ€§ã€‚</p>
<h3 data-id="heading-5">3. æ¨¡å—åŒ–çš„è‡ªç„¶å®ç°</h3>
<p>åœ¨ Pinia ä¸­ï¼Œæ¯ä¸ª store éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ— éœ€åƒ Vuex é‚£æ ·åœ¨å•ä¸€ store ä¸­æ³¨å†Œæ¨¡å—ã€‚è¿™ç§è®¾è®¡è®©ä»£ç ç»„ç»‡æ›´åŠ çµæ´»ï¼Œä¹Ÿä¾¿äºä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚</p>
<h3 data-id="heading-6">4. æ›´å‹å¥½çš„å¼€å‘ä½“éªŒ</h3>
<ul>
<li><strong>Composition API é£æ ¼</strong>ï¼šä¸ Vue 3 çš„ Composition API å®Œç¾å¥‘åˆ</li>
<li><strong>DevTools é›†æˆ</strong>ï¼šæ”¯æŒ Vue DevToolsï¼Œæä¾›æ—¶é—´æ—…è¡Œè°ƒè¯•</li>
<li><strong>çƒ­æ¨¡å—æ›¿æ¢</strong>ï¼šæ”¯æŒå¼€å‘æ—¶çš„çƒ­æ›´æ–°ï¼Œä¿æŒçŠ¶æ€ä¸ä¸¢å¤±</li>
</ul>
<h3 data-id="heading-7">5. è½»é‡ä¸”é«˜æ€§èƒ½</h3>
<p>Pinia ä½“ç§¯å°å·§ï¼ŒåŒæ—¶é€šè¿‡æ™ºèƒ½çš„è®¾è®¡é¿å…äº†ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚å®ƒçš„å“åº”å¼ç³»ç»Ÿç›´æ¥æ„å»ºåœ¨ Vue çš„ reactive API ä¹‹ä¸Šï¼Œç¡®ä¿äº†é«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€ä» Vuex è¿ç§»åˆ° Piniaï¼šä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡</h2>
<p>å¯¹äº Vuex ç”¨æˆ·ï¼Œè¿ç§»åˆ° Pinia æ˜¯ä¸€ä¸ªç›¸å¯¹å¹³æ»‘çš„è¿‡ç¨‹ã€‚ä¸¤è€…æ ¸å¿ƒæ¦‚å¿µæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½† Pinia æä¾›äº†æ›´ç®€æ´çš„å®ç°ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Vuex 4</th><th>Pinia</th></tr></thead><tbody><tr><td>çŠ¶æ€å®šä¹‰</td><td><code>state</code> å‡½æ•°</td><td><code>state</code> å‡½æ•°</td></tr><tr><td>è·å–çŠ¶æ€</td><td><code>getters</code></td><td><code>getters</code></td></tr><tr><td>ä¿®æ”¹çŠ¶æ€</td><td><code>mutations</code> + <code>actions</code></td><td><code>actions</code>ï¼ˆå¯ç›´æ¥ä¿®æ”¹ï¼‰</td></tr><tr><td>æ¨¡å—ç³»ç»Ÿ</td><td>åµŒå¥—æ¨¡å—</td><td>ç‹¬ç«‹ store</td></tr><tr><td>TypeScript æ”¯æŒ</td><td>éœ€è¦é¢å¤–é…ç½®</td><td>å¼€ç®±å³ç”¨</td></tr></tbody></table>
<p>è¿ç§»ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vuex æ–¹å¼</span>
<span class="hljs-attr">mutations</span>: {
  <span class="hljs-title function_">SET_COUNT</span>(<span class="hljs-params">state, value</span>) {
    state.<span class="hljs-property">count</span> = value
  }
},
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">{ commit }, value</span>) {
    <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_COUNT'</span>, value)
  }
}

<span class="hljs-comment">// Pinia æ–¹å¼ï¼ˆæ›´ç®€æ´ï¼‰</span>
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = value <span class="hljs-comment">// ç›´æ¥èµ‹å€¼ï¼Œå“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å¤„ç†</span>
  }
}
</code></pre>
<h2 data-id="heading-9">å››ã€å®æˆ˜ï¼šæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Pinia Store</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç¤ºä¾‹ï¼Œå¿«é€Ÿä¸Šæ‰‹ Piniaï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/user.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">isAuthenticated</span>: <span class="hljs-literal">false</span>,
  }),
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">credentials</span>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿ API è°ƒç”¨</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">login</span>(credentials)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = response.<span class="hljs-property">user</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">true</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, response.<span class="hljs-property">token</span>)
    },
    
    <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">false</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
    },
  },
  
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">userName</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">name</span> || <span class="hljs-string">'Guest'</span>,
    <span class="hljs-attr">isAdmin</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">role</span> === <span class="hljs-string">'admin'</span>,
  },
})
</code></pre>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
  &lt;div&gt;
    &lt;p&gt;Welcome, {{ userStore.userName }}&lt;/p&gt;
    Logout
  &lt;/div&gt;



import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
// å¯ä»¥ç›´æ¥è®¿é—®çŠ¶æ€å’Œæ“ä½œ

</code></pre>
<h2 data-id="heading-10">äº”ã€é«˜çº§ç‰¹æ€§ï¼šæ¢ç´¢ Pinia çš„å¼ºå¤§èƒ½åŠ›</h2>
<h3 data-id="heading-11">1. Store ç»„åˆ</h3>
<p>Pinia å…è®¸ stores ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¾¿äºç»„ç»‡å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/cart.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, {
  <span class="hljs-comment">// ... cart é€»è¾‘</span>
})

<span class="hljs-comment">// stores/checkout.js  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCheckoutStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'checkout'</span>, {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// å¯ä»¥è®¿é—®å…¶ä»– store</span>
      <span class="hljs-attr">cartItems</span>: cartStore.<span class="hljs-property">items</span>,
    }
  }
})
</code></pre>
<h3 data-id="heading-12">2. æ’ä»¶ç³»ç»Ÿ</h3>
<p>Pinia æ”¯æŒæ’ä»¶ï¼Œå¯ä»¥è½»æ¾æ‰©å±•åŠŸèƒ½ï¼Œå¦‚æŒä¹…åŒ–å­˜å‚¨ã€æ—¥å¿—è®°å½•ç­‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒä¹…åŒ–æ’ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()

pinia.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">{ store }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> key = <span class="hljs-string">`pinia-<span class="hljs-subst">${store.$id}</span>`</span>
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
  <span class="hljs-keyword">if</span> (saved) {
    store.$patch(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved))
  }
  
  store.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))
  })
})
</code></pre>
<h2 data-id="heading-13">å…­ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå»ºè®®ä½¿ç”¨ <code>use</code> å‰ç¼€å‘½å storeï¼ˆå¦‚ <code>useUserStore</code>ï¼‰ï¼Œä»¥ç¬¦åˆ Composition API æƒ¯ä¾‹</li>
<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong>ï¼šä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦æ”¾å…¥ Piniaï¼Œç»„ä»¶æœ¬åœ°çŠ¶æ€ä»åº”ä½¿ç”¨ <code>ref</code> æˆ– <code>reactive</code></li>
<li><strong>ä¿æŒ Actions çº¯å‡€</strong>ï¼šè™½ç„¶å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œä½†å»ºè®®é€šè¿‡ actions è¿›è¡Œä¿®æ”¹ï¼Œä¾¿äºç»´æŠ¤å’Œè°ƒè¯•</li>
<li><strong>åˆ©ç”¨ DevTools</strong>ï¼šå……åˆ†åˆ©ç”¨ Vue DevTools çš„ Pinia é¢æ¿è¿›è¡ŒçŠ¶æ€è°ƒè¯•</li>
</ol>
<h2 data-id="heading-14">ç»“è¯­ï¼šè¿æ¥ Vue çŠ¶æ€ç®¡ç†çš„æ–°æ—¶ä»£</h2>
<p>Pinia çš„å‡ºç°å¹¶éå¶ç„¶ï¼Œå®ƒä»£è¡¨äº† Vue ç”Ÿæ€å‘æ›´ç®€æ´ã€æ›´ç±»å‹å®‰å…¨ã€æ›´ç¬¦åˆç°ä»£å¼€å‘ä½“éªŒçš„æ–¹å‘æ¼”è¿›ã€‚å®ƒä¿ç•™äº† Vuex çš„æ ¸å¿ƒæ€æƒ³ï¼ŒåŒæ—¶å»é™¤äº†å…¶ä¸­çš„ç¹å¤éƒ¨åˆ†ï¼Œæä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæ–°é¡¹ç›®ï¼ŒPinia æ— ç–‘æ˜¯é»˜è®¤çš„æœ€ä½³é€‰æ‹©ï¼›å¯¹äºç°æœ‰ Vuex é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘é€æ­¥è¿ç§»ï¼Œäº«å—æ›´ä¼˜çš„å¼€å‘ä½“éªŒã€‚æ­£å¦‚ Vue åˆ›å§‹äººå°¤é›¨æºªæ‰€è¨€ï¼š"Pinia å°±æ˜¯ Vuex 5ï¼Œåªä¸è¿‡æˆ‘ä»¬å†³å®šå«å®ƒ Pinia"ã€‚</p>
<p>åœ¨çŠ¶æ€ç®¡ç†çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰ç»å¯¹çš„"æœ€å¥½"ï¼Œåªæœ‰"æœ€é€‚åˆ"ã€‚è€Œ Piniaï¼Œå‡­å€Ÿå…¶ç®€æ´çš„è®¾è®¡ã€å‡ºè‰²çš„ TypeScript æ”¯æŒå’Œä¸ Vue 3 çš„å®Œç¾èåˆï¼Œæ­£æˆä¸ºè¶Šæ¥è¶Šå¤š Vue å¼€å‘è€…çš„é¦–é€‰ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ Vue ç”Ÿæ€æˆç†Ÿå’Œè¿›æ­¥çš„æ ‡å¿—â€”â€”è®©æˆ‘ä»¬ä»¥æ›´å°‘çš„ä»£ç ï¼Œå®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œäº«å—æ›´æ„‰å¿«çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>æ‹¥æŠ± Piniaï¼Œå°±æ˜¯æ‹¥æŠ± Vue çŠ¶æ€ç®¡ç†çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7582063437414219814</link>    <guid>https://juejin.cn/post/7582063437414219814</guid>    <pubDate>2025-12-10T16:52:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582063437414219814" data-draft-id="7582063437414203430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-10T16:52:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:52:43.000Z" title="Wed Dec 10 2025 16:52:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´çš„å¹´æœ«ï¼ŒAI ç¼–ç¨‹åœˆå­æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½è¦çƒ­é—¹ã€‚å°±åœ¨å¤§å®¶éƒ½ä»¥ä¸ºä»Šå¹´çš„å¤§æ¨¡å‹æ··æˆ˜å·²ç»å°˜åŸƒè½å®šçš„æ—¶å€™ï¼ŒMistral AI åœ¨ 12 æœˆ 9 æ—¥çªç„¶æ€äº†ä¸ªå›é©¬æªï¼Œå‘å¸ƒäº†å…¨æ–°çš„ <strong>Devstral 2</strong> ç¼–ç¨‹æ¨¡å‹å®¶æ—ï¼Œä»¥åŠä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„ç»ˆç«¯å·¥å…· <strong>Mistral Vibe CLI</strong>ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒä¸ä»…ä»…æ˜¯ä¸¢å‡ºä¸¤ä¸ªæƒé‡æ–‡ä»¶é‚£ä¹ˆç®€å•ï¼ŒMistral æ˜¾ç„¶æ˜¯çœ‹å‡†äº†ç°åœ¨æœ€ç«çš„â€œAgentic Codingâ€ï¼ˆä»£ç†å¼ç¼–ç¨‹ï¼‰èµ›é“ï¼Œè¯•å›¾ç”¨å¼€æºæ–¹æ¡ˆå»åŠ¨ä¸€åŠ¨é—­æºå·¨å¤´ä»¬çš„å¥¶é…ªã€‚</p>
<p>å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œæˆ–è€…æ˜¯å¯¹æœ¬åœ°éƒ¨ç½²æ„Ÿå…´è¶£çš„æŠ€æœ¯æå®¢ï¼Œè¿™æ¬¡æ›´æ–°é‡Œæœ‰å‡ ä¸ªå¿…é¡»è¦å…³æ³¨çš„ç¡¬æ ¸ç»†èŠ‚ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-Model-Performance-Comparison-Dark-1-1024x500.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-Model-Performance-Comparison-Dark-1-1024x500.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54073f9490704ae19ea094f02cc3a66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=jEzm0u6nxK7gq70TAzWVI4NTKPg%3D" alt="Devstral - Model Performance Comparison (Dark) (1)" loading="lazy"/></a></p>
<h3 data-id="heading-0">æ‰€è°“çš„â€œVibe Codingâ€åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Mistral è¿™æ¬¡ä¸»æ‰“çš„æ¦‚å¿µå¾ˆæœ‰æ„æ€ï¼Œå«â€œVibe Codingâ€ã€‚å¬èµ·æ¥ç„ä¹ï¼Œä½†è½åœ°åˆ°äº§å“ <strong>Mistral Vibe CLI</strong> ä¸Šï¼Œé€»è¾‘å…¶å®éå¸¸ç®€å•ç²—æš´ï¼šæŠŠ AI ä»å•çº¯çš„â€œèŠå¤©æ¡†â€é‡Œè§£æ”¾å‡ºæ¥ï¼Œç›´æ¥å¡è¿›ä½ çš„ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚</p>
<p>ä»¥å¾€æˆ‘ä»¬ç”¨ ChatGPT å†™ä»£ç ï¼Œæµç¨‹é€šå¸¸æ˜¯ï¼šå¤åˆ¶éœ€æ±‚ -&gt; ç²˜è´´ä»£ç  -&gt; æŠ¥é”™ -&gt; å†å¤åˆ¶æŠ¥é”™ã€‚è€Œ Vibe CLI æ˜¯ä¸€ä¸ªåŸç”Ÿçš„å‘½ä»¤è¡Œ Agentã€‚å®ƒèƒ½ç›´æ¥è¯»å–ä½ çš„æœ¬åœ°æ–‡ä»¶ç»“æ„ï¼Œç†è§£ Git çŠ¶æ€ï¼Œç”šè‡³å¸®ä½ æ‰§è¡Œ Shell å‘½ä»¤ã€‚</p>
<p>è¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯é‡Œå¯¹å®ƒè¯´ï¼šâ€œå¸®æˆ‘é‡æ„ä¸€ä¸‹ <code>auth.py</code>ï¼Œé¡ºä¾¿æŠŠç›¸å…³çš„æµ‹è¯•æ–‡ä»¶ä¹Ÿæ”¹äº†ã€‚â€å®ƒæ‹¥æœ‰å¤šæ–‡ä»¶ç¼–è¾‘çš„èƒ½åŠ›ï¼Œä¸å†æ˜¯â€œåªåŠ¨å£ä¸åŠ¨æ‰‹â€ï¼Œè€Œæ˜¯ç›´æ¥å¯¹ä»£ç åº“è¿›è¡Œæ‰‹æœ¯ã€‚å¯¹äºä¹ æƒ¯åœ¨ UNIX ç¯å¢ƒä¸‹å·¥ä½œçš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™ç§æ— éœ€ç¦»å¼€ç»ˆç«¯çš„ä½“éªŒï¼Œç¡®å®å¾ˆâ€œVibeâ€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-SWE-Bench-Verified-Regular-Performance-xModelsize-Dark-1024x589.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-SWE-Bench-Verified-Regular-Performance-xModelsize-Dark-1024x589.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b874aa8980544ef8a4dfc7fd11c0642~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=h29zdEfm3JEiTuvz0zhv6Wv3%2Bl8%3D" alt="Devstral - SWE-Bench Verified Regular Performance xModelsize (Dark)" loading="lazy"/></a></p>
<h3 data-id="heading-1">ç¡¬èœä¸Šæ¡Œï¼šä¸¤æ¬¾æ¨¡å‹ï¼Œä¸¤ç§æ‰“æ³•</h3>
<p>è¿™æ¬¡å‘å¸ƒçš„ Devstral 2 å®¶æ—åŒ…å«ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ€æ³•ç²¾å‡†ï¼Œåˆ†åˆ«ç„å‡†äº†ä¼ä¸šçº§ç”Ÿäº§åŠ›å’Œä¸ªäººå¼€å‘è€…ã€‚</p>
<p><strong>1. æ——èˆ°çŒ›å…½ï¼šDevstral 2 (123B)</strong></p>
<p>è¿™æ˜¯ä¸€å¤´å‚æ•°é‡çº¦ä¸º 1230 äº¿çš„åºç„¶å¤§ç‰©ã€‚å®ƒçš„å®šä½éå¸¸æ˜ç¡®ï¼šå¯¹æ ‡ç›®å‰å¸‚é¢ä¸Šæœ€å¼ºçš„é—­æºæ¨¡å‹ï¼ˆæ¯”å¦‚ Claude 3.5 Sonnetï¼‰ã€‚</p>
<ul>
<li><strong>èƒ½åŠ›ï¼š</strong> æ‹¥æœ‰ 256k çš„è¶…é•¿ä¸Šä¸‹æ–‡ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä¸€æ¬¡æ€§åä¸‹æ•´ä¸ªé¡¹ç›®çš„ä»£ç åº“ã€‚åœ¨ SWE-bench Verified åŸºå‡†æµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿ä¸‹äº† 72.2% çš„é«˜åˆ†ã€‚è¿™ä¸ªæˆç»©ç›¸å½“æƒŠäººï¼Œè¦çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå¼€æºæƒé‡çš„æ¨¡å‹ã€‚</li>
<li><strong>æ“…é•¿ï¼š</strong> å¤æ‚çš„è·¨æ–‡ä»¶é‡æ„ã€æ¶æ„å±‚é¢çš„ç†è§£ã€ä»¥åŠä½œä¸º Agent è°ƒç”¨å„ç§å·¥å…·ã€‚</li>
<li><strong>æ³¨æ„ç‚¹ï¼š</strong> å®ƒçš„å¼€æºåè®®æ˜¯ <strong>Modified MIT</strong>ã€‚è™½ç„¶å…è®¸å•†ç”¨ï¼Œä½† Mistral ç•™äº†ä¸€æ‰‹ï¼šå¦‚æœä½ çš„å…¬å¸æœˆæ”¶å…¥è¶…è¿‡ 2000 ä¸‡ç¾å…ƒï¼Œä½¿ç”¨æ¡æ¬¾ä¼šæœ‰æ‰€é™åˆ¶ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸ºäº†é˜²æ­¢ç§‘æŠ€å·¨å¤´ç›´æ¥ç™½å«–ã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-SWE-Bench-Verified_-OpenWeights-vs-Proprietary-Models-Dark-1-1024x664.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-SWE-Bench-Verified_-OpenWeights-vs-Proprietary-Models-Dark-1-1024x664.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e76be34094a4f8c988d7fdbfa1692f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=WlBchjNSdB2I8zu7lhIPHI49XWg%3D" alt="Devstral - SWE-Bench Verified_ OpenWeights vs Proprietary Models (Dark) (1)" loading="lazy"/></a></p>
<p><strong>2. æ¡Œé¢å°é’¢ç‚®ï¼šDevstral Small 2 (24B)</strong></p>
<p>å¯¹äºå¤§å¤šæ•°æƒ³åœ¨æœ¬åœ°è·‘æ¨¡å‹çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™ä¸ª 240 äº¿å‚æ•°çš„ç‰ˆæœ¬æ‰æ˜¯çœŸæ­£çš„ç”œç‚¹ã€‚</p>
<ul>
<li><strong>æ€§ä»·æ¯”ï¼š</strong> å®ƒä½¿ç”¨äº†æ›´å®½æ¾çš„ <strong>Apache 2.0</strong> åè®®ï¼Œå®Œå…¨å¼€æºã€‚</li>
<li><strong>é…ç½®éœ€æ±‚ï¼š</strong> 24B çš„å¤§å°æ„å‘³ç€ä½ ä¸éœ€è¦æ‹¥æœ‰ H100 è¿™ç§æ ¸å¼¹çº§æ˜¾å¡ã€‚é«˜ç«¯æ¶ˆè´¹çº§æ˜¾å¡ï¼ˆå¦‚ 4090ï¼‰æˆ–è€… Mac Studio é…åˆé€‚å½“çš„é‡åŒ–ï¼Œå®Œå…¨å¯ä»¥åœ¨æœ¬åœ°æµç•…è¿è¡Œã€‚</li>
<li><strong>æ€§èƒ½ï¼š</strong> åˆ«çœ‹å®ƒå°ï¼Œå®ƒåœ¨åŸºå‡†æµ‹è¯•ä¸­è¾¾åˆ°äº† 68.0% çš„åˆ†æ•°ã€‚å®˜æ–¹å®£ç§°å®ƒçš„æ•ˆç‡æé«˜ï¼Œä¸ä»…æ¨ç†é€Ÿåº¦å¿«ï¼Œè€Œä¸”åœ¨å¤„ç†å¤šæ–‡ä»¶ç¼–è¾‘æ—¶çš„é€»è¾‘å¹¶ä¸è¾“ç»™å¾ˆå¤šå¤§å‚æ•°æ¨¡å‹ã€‚</li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆè¿™æ¬¡å‘å¸ƒå¾ˆé‡è¦ï¼Ÿ</h3>
<p>åœ¨ Devstral 2 ä¹‹å‰ï¼Œå¼€æºç¼–ç¨‹æ¨¡å‹è™½ç„¶å¤šï¼ˆæ¯”å¦‚ DeepSeek æ—©æœŸç‰ˆæœ¬ã€CodeLlama ç­‰ï¼‰ï¼Œä½†åœ¨â€œAgentâ€èƒ½åŠ›ä¸Šæ€»æ˜¯å·®ä¸€å£æ°”ã€‚æ‰€è°“çš„ Agent èƒ½åŠ›ï¼Œå°±æ˜¯æ¨¡å‹ä¸ä»…è¦ä¼šå†™ä»£ç ï¼Œè¿˜è¦çŸ¥é“æ€ä¹ˆä½¿ç”¨å·¥å…·ã€æ€ä¹ˆè‡ªæˆ‘çº é”™ã€æ€ä¹ˆåœ¨ä¸ç ´ååŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ã€‚</p>
<p>Mistral è¿™æ¬¡ç›´æ¥æŠŠâ€œè½¯ä»¶å·¥ç¨‹ï¼ˆSWEï¼‰â€ä½œä¸ºæ ¸å¿ƒè®­ç»ƒç›®æ ‡ã€‚å®˜æ–¹æ•°æ®æ˜¾ç¤ºï¼ŒDevstral 2 åœ¨å·¥å…·è°ƒç”¨å’Œå¤šæ­¥æ¨ç†ä¸Šçš„è¡¨ç°éå¸¸ç¨³å¥ã€‚è¿™å¡«è¡¥äº†å¼€æºé¢†åŸŸçš„ä¸€ä¸ªç©ºç™½ï¼šæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½çœŸæ­£åƒâ€œå·¥ç¨‹å¸ˆâ€ä¸€æ ·æ€è€ƒï¼Œè€Œä¸ä»…ä»…æ˜¯åƒâ€œè‡ªåŠ¨è¡¥å…¨æœºå™¨â€ä¸€æ ·å·¥ä½œçš„æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-11_00.39.55-1024x353.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-11_00.39.55-1024x353.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3e7baba7b004e88b478fb3aed4257a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=Sfziefk7Pj2meSOBw3sJNAzxuq8%3D" alt="iShot_2025-12-11_00.39.55" loading="lazy"/></a></p>
<h3 data-id="heading-3">å¦‚ä½•ä¸Šæ‰‹ï¼Ÿ</h3>
<p>ç›®å‰ä½“éªŒè¿™å¥—ç³»ç»Ÿä¸»è¦æœ‰ä¸‰æ¡è·¯ï¼š</p>
<ol>
<li><strong>å°é²œå…šï¼š</strong> ç›´æ¥å» Mistral å®˜æ–¹å¹³å°ç”³è¯· APIï¼Œç›®å‰æœ‰ä¸€æ®µå…è´¹ä½¿ç”¨æœŸã€‚è¿™æ˜¯ä½“éªŒæ»¡è¡€ç‰ˆ 123B æ¨¡å‹æœ€å¿«çš„æ–¹å¼ã€‚</li>
<li><strong>æœ¬åœ°å…šï¼š</strong> æ—¢ç„¶å¼€æºäº†ï¼ŒHugging Face ä¸Šå·²ç»æœ‰äº†æƒé‡ã€‚å¦‚æœä½ æœ‰æ˜¾å¡èµ„æºï¼Œæ‹‰å– Devstral Small 2 (24B)ï¼Œé…åˆ vLLM æˆ–è€… Ollamaï¼ˆç­‰å¾…ç¤¾åŒºé€‚é…ï¼‰ï¼Œå°±èƒ½åœ¨ç¦»çº¿ç¯å¢ƒä¸‹æ‹¥æœ‰ä¸€ä¸ªå¼ºåŠ›çš„ç¼–ç¨‹åŠ©æ‰‹ã€‚</li>
<li><strong>æå®¢å…šï¼š</strong> å®‰è£… <code>mistral-vibe</code> CLI å·¥å…·ã€‚åªè¦é…ç½®å¥½ç¯å¢ƒï¼Œä½ å°±èƒ½ä½“éªŒé‚£ç§â€œå¯¹ç€ç»ˆç«¯è¯´è¯ï¼Œä»£ç è‡ªåŠ¨ç”Ÿæˆâ€çš„æ„Ÿè§‰ã€‚å½“ç„¶ï¼Œå®˜æ–¹ä¹Ÿæé†’äº†ï¼Œåœ¨è®© AI ä¿®æ”¹æ ¸å¿ƒä»£ç å‰ï¼Œæœ€å¥½åœ¨ä¸€ä¸ªå—æ§çš„æµ‹è¯•åˆ†æ”¯é‡Œè¿›è¡Œï¼Œæ¯•ç«Ÿ AI å¶å°”ä¹Ÿä¼šâ€œå‘ç–¯â€ã€‚</li>
</ol>
<h3 data-id="heading-4">å†™åœ¨æœ€å</h3>
<p>Devstral 2 çš„å‡ºç°ï¼Œè®©å¼€æºç¼–ç¨‹æ¨¡å‹çš„æ°´å¹³åˆä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚å®ƒä¸å†æ»¡è¶³äºä»£ç è¡¥å…¨ï¼Œè€Œæ˜¯è¯•å›¾æ¥ç®¡æ›´å¤æ‚çš„å·¥ç¨‹ä»»åŠ¡ã€‚</p>
<p>å¯¹äºä¸ªäººå¼€å‘è€…è€Œè¨€ï¼Œ24B ç‰ˆæœ¬çš„ Apache 2.0 åè®®æ˜¯ä¸€ä»½å¤§ç¤¼ï¼›å¯¹äºä¼ä¸šè€Œè¨€ï¼Œ123B ç‰ˆæœ¬åˆ™æä¾›äº†ä¸€ä¸ªå¯ä»¥åœ¨ç§æœ‰ç¯å¢ƒéƒ¨ç½²çš„å¼ºåŠ›é€‰é¡¹ã€‚è™½ç„¶ç›®å‰è¿˜éœ€è¦æ—¶é—´æ¥éªŒè¯å®ƒåœ¨çœŸå®å¤æ‚é¡¹ç›®ä¸­çš„ç¨³å®šæ€§ï¼Œä½†è‡³å°‘ Mistral è¯æ˜äº†ä¸€ä»¶äº‹ï¼šåœ¨ä»£ç æ™ºèƒ½è¿™æ¡èµ›é“ä¸Šï¼Œå¼€æºç¤¾åŒºä¾ç„¶æ‹¥æœ‰ä¸é—­æºå·¨å¤´å«æ¿çš„åº•æ°”ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582039917217824768</link>    <guid>https://juejin.cn/post/7582039917217824768</guid>    <pubDate>2025-12-10T23:07:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217824768" data-draft-id="7582044568721473576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T23:07:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T23:07:15.000Z" title="Wed Dec 10 2025 23:07:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Nettyä¸­ï¼ŒChannelï¼ˆé€šé“ï¼‰æ˜¯ç½‘ç»œæ“ä½œçš„æŠ½è±¡æ¦‚å¿µï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå¼€æ”¾çš„è¿æ¥ï¼Œå¯ä»¥è¿›è¡Œæ•°æ®çš„è¯»å–å’Œå†™å…¥ã€‚Channelæä¾›äº†å¼‚æ­¥çš„ã€äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å¤„ç†æ•°æ®çš„ä¼ è¾“å’Œæ“ä½œã€‚</p>
<p>Nettyæä¾›äº†å¤šç§ç±»å‹çš„Channelï¼Œä»¥é€‚åº”ä¸åŒçš„ç½‘ç»œåè®®å’Œä¼ è¾“æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Channelç±»å‹ï¼š</p>
<ol>
<li>
<p>NioSocketChannelï¼šåŸºäºJava NIOçš„SocketChannelï¼Œç”¨äºTCPå®¢æˆ·ç«¯ã€‚</p>
</li>
<li>
<p>NioServerSocketChannelï¼šåŸºäºJava NIOçš„ServerSocketChannelï¼Œç”¨äºTCPæœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p>NioDatagramChannelï¼šåŸºäºJava NIOçš„DatagramChannelï¼Œç”¨äºUDPé€šä¿¡ã€‚</p>
</li>
<li>
<p>EmbeddedChannelï¼šç”¨äºæµ‹è¯•å’Œå†…åµŒå¼å¤„ç†ã€‚</p>
</li>
<li>
<p>OioSocketChannelï¼šåŸºäºä¼ ç»Ÿçš„é˜»å¡å¼I/Oçš„SocketChannelï¼Œç”¨äºTCPå®¢æˆ·ç«¯ã€‚</p>
</li>
<li>
<p>OioServerSocketChannelï¼šåŸºäºä¼ ç»Ÿçš„é˜»å¡å¼I/Oçš„ServerSocketChannelï¼Œç”¨äºTCPæœåŠ¡å™¨ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Nettyçš„NioSocketChannelï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.netty.bootstrap.Bootstrap;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelFuture;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelHandlerContext;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInitializer;
<span class="hljs-keyword">import</span> io.netty.channel.EventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.socket.SocketChannel;
<span class="hljs-keyword">import</span> io.netty.channel.socket.nio.NioSocketChannel;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringDecoder;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringEncoder;
<span class="hljs-keyword">import</span> io.netty.handler.logging.LogLevel;
<span class="hljs-keyword">import</span> io.netty.handler.logging.LoggingHandler;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChannelExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">HOST</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;localhost&amp;#<span class="hljs-number">34</span>;;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PORT</span> <span class="hljs-operator">=</span> <span class="hljs-number">8080</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">group</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Bootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bootstrap</span>();
            bootstrap.group(group)
                    .channel(NioSocketChannel.class)
                    .handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingHandler</span>(LogLevel.INFO))
                    .handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>() {
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(SocketChannel ch)</span> <span class="hljs-keyword">throws</span> Exception {
                            ch.pipeline().addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringDecoder</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEncoder</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">EchoClientHandler</span>());
                        }
                    });

            <span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">future</span> <span class="hljs-operator">=</span> bootstrap.connect(HOST, PORT).sync();
            future.channel().closeFuture().sync();
        } <span class="hljs-keyword">finally</span> {
            group.shutdownGracefully();
        }
    }
}

<span class="hljs-keyword">import</span> io.netty.channel.ChannelHandlerContext;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInboundHandlerAdapter;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EchoClientHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ChannelInboundHandlerAdapter</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelActive</span><span class="hljs-params">(ChannelHandlerContext ctx)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;Hello, Netty!&amp;#<span class="hljs-number">34</span>;;
        ctx.writeAndFlush(message); <span class="hljs-comment">// å‘é€æ¶ˆæ¯ç»™æœåŠ¡å™¨</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead</span><span class="hljs-params">(ChannelHandlerContext ctx, Object msg)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> (String) msg;
        System.out.println(&amp;#<span class="hljs-number">34</span>;Received message: &amp;#<span class="hljs-number">34</span>; + message);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exceptionCaught</span><span class="hljs-params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="hljs-keyword">throws</span> Exception {
        cause.printStackTrace();
        ctx.close(); <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸æ—¶å…³é—­è¿æ¥</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†NioSocketChannelä½œä¸ºå®¢æˆ·ç«¯çš„Channelç±»å‹ã€‚åœ¨Bootstrapçš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†é€šé“ç±»å‹ï¼ˆNioSocketChannelï¼‰å’Œæ—¥å¿—å¤„ç†å™¨ï¼ˆLoggingHandlerï¼‰ã€‚åœ¨initChannelæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†è‡ªå®šä¹‰çš„ChannelHandlerï¼ˆEchoClientHandlerï¼‰æ¥å¤„ç†äº‹ä»¶å’Œæ•°æ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ : èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼]]></title>    <link>https://juejin.cn/post/7582048028393373746</link>    <guid>https://juejin.cn/post/7582048028393373746</guid>    <pubDate>2025-12-10T16:04:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028393373746" data-draft-id="7582021506190671918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ :  èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-12-10T16:04:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pomelo_åˆ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/3450694359320669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ :  èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3450694359320669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pomelo_åˆ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:04:53.000Z" title="Wed Dec 10 2025 16:04:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¤§å®¶å¯¹ Rust çš„å°è±¡</h3>
<h4 data-id="heading-1">æ²¡æ¥è§¦è¿‡çš„ï¼š</h4>
<p>ç¼–ç¨‹ç•Œè¯­è¨€ç¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c41de4bc9dd44d385e4eb9ad5825f61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=Jofl81ph00TkT7yfruU%2FF4Joe1U%3D" alt="" loading="lazy"/></p>
<p>æ•´å¤©é‡æ„è¿™é‡æ„é‚£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f0cb62cb94945b28a52dd6a8c753840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=7%2F2aauWbpkFYgUlc3cL%2BsYQn6dk%3D" alt="" loading="lazy"/></p>
<p>è¿˜è¦ è¦å¹²æ‰ c++ ï¼Ÿï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d39230df4feb43609e29d3ed746e30ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=P%2BteFptRNIorUS7ECNNaISWzb7w%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2">ç¨å¾®äº†è§£è¿‡çš„ï¼š</h4>
<p>å­¦ä¹ æ›²çº¿ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d5a3e2eb19f4b54a86bc041e0255107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=QZ0YHpW1AqFHDs1DwOoJzPr6aZ8%3D" alt="" loading="lazy"/></p>
<p>ä½†å®é™…ä¸Šæ˜¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b26ef56db8422fb822791344cfd65a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=thEHuZ%2BuHYyoxsmmrT1bd1zJVrw%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªé«˜å³°æ˜¯ å€Ÿç”¨æ£€æŸ¥å™¨ï¼Œç¬¬äºŒä¸ªæ˜¯å¼‚æ­¥ï¼Œç¬¬ä¸‰ä¸ªæ˜¯unsafeï¼Œç¬¬å››ä¸ªæ˜¯å®æ€ä¹ˆç©ï¼Ÿ</p>
<h4 data-id="heading-3">å¼€å§‹æ¥è§¦ä¹‹å</h4>
<p>ç¼–è¯‘å™¨ä¸è®©æˆ‘å†™ä»£ç ï¼Œæ€ä¹ˆå†™éƒ½æŠ¥é”™</p>
<p>å†™ rust ä»£ç åƒæ˜¯åœ¨è·Ÿ rust ç¼–è¯‘å™¨è°ˆå¯¹è±¡ ï¼Œ</p>
<p>æˆ‘åªæ˜¯ä¼ ä¸ªå‚æ•°ï¼Œä½ è·Ÿæˆ‘è®²æ‰€æœ‰æƒã€å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸï¼Ÿâ€</p>
<h4 data-id="heading-4">å†™çš„ä»£ç ä¸Šçº¿ä¹‹åï¼Œè¿˜ä¸é”™å“¦</h4>
<blockquote>
<ul>
<li>â€œåˆ«çš„è¯­è¨€é¡¹ç›®ä¸Šçº¿æµç¨‹â€</li>
<li>å†…å®¹ï¼š</li>
<li>ç¼–è¯‘ âœ”</li>
<li>æµ‹è¯•ï¼ˆå¶å°”æŒ‚ä¸€ä¸¤æ¡ï¼‰âœ”</li>
<li>ä¸Šçº¿åï¼šåŠå¤œè¢«ç”µè¯å«é†’ï¼šâŒ</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>â€œRust é¡¹ç›®ä¸Šçº¿æµç¨‹â€</li>
<li>å†…å®¹ï¼š</li>
<li>ç¼–è¯‘ âŒ âŒ âŒ âŒ âŒ ï¼ˆä¸‰å¤©åï¼‰</li>
<li>ç¼–è¯‘ âœ”</li>
<li>æµ‹è¯• ï¼ˆå¶å°”æŒ‚ä¸€ä¸¤æ¡ï¼‰âœ”</li>
<li>ä¸Šçº¿ï¼šåŸºæœ¬æ²¡äººæ‰“ç”µè¯ âœ…</li>
</ul>
</blockquote>
<p>ç”±æ­¤å¤§å®¶å¯èƒ½æœ‰ç‚¹æ„Ÿå—åˆ°æˆ‘æƒ³ä¸‹ä¸€æ­¥æƒ³è¯´ä»€ä¹ˆäº†</p>
<p>ä»¥åŠå¤§å®¶å¯èƒ½äº§ç”Ÿäº†ä¸€ä¸ªç–‘æƒ‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f49a2a6b0f04f3f8dcd97ad6490b13e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=fk7vTEnoxg771EB0VrLqX3xCl%2Fc%3D" alt="" loading="lazy"/></p>
<p>Rust çœŸçš„èƒ½å‡å°‘ bug ä¹ˆï¼Œå¹ç‰›å§</p>
<h3 data-id="heading-5">Rust æ˜¯å¦èƒ½å‡å°‘ bug ï¼Ÿ</h3>
<p>Rust æœ€è‘—åçš„æ‰¿è¯ºæ˜¯<strong>å†…å­˜å®‰å…¨ï¼ˆMemory Safetyï¼‰å’Œçº¿ç¨‹å®‰å…¨ï¼ˆThread Safetyï¼‰</strong> ï¼Œå¦‚æœæ˜¯çœŸçš„ï¼Œè¿™ç›´æ¥æ¶ˆç­äº†ä¸¤ç±»æœ€è®©å¤§å…¬å¸å¤´ç–¼çš„ Bugã€‚</p>
<h4 data-id="heading-6">Google (Android å®‰å…¨å›¢é˜Ÿ)</h4>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p>å…³é”®ç‚¹</p>
<ul>
<li>Â Â We adopted Rust for its security and are seeing <strong>a 1000x reduction in memory safety vulnerability density compared to Androidâ€™s C and C++ code</strong>. But the biggest surprise was Rust's impact on software delivery. With Rust changes having <strong>a 4x lower rollback rate</strong> and spending <strong>25% less time</strong> <strong>in</strong> <strong>code review</strong>, the safer path is now also the faster one.</li>
<li>Â Â æˆ‘ä»¬é‡‡ç”¨ Rust æ˜¯å› ä¸ºå®ƒå®‰å…¨æ€§é«˜ï¼Œä¸ Android çš„ C å’Œ C++ ä»£ç ç›¸æ¯”ï¼Œå†…å­˜å®‰å…¨æ¼æ´å¯†åº¦é™ä½äº† 1000 å€ã€‚ä½†æœ€å¤§çš„æƒŠå–œæ˜¯ Rust å¯¹è½¯ä»¶äº¤ä»˜çš„å½±å“ã€‚Rust çš„å˜æ›´å›æ»šç‡é™ä½äº† 4 å€ï¼Œä»£ç å®¡æŸ¥æ—¶é—´ä¹Ÿå‡å°‘äº† 25% ï¼Œæ›´å®‰å…¨çš„è·¯å¾„ç°åœ¨ä¹Ÿæ›´å¿«äº†ã€‚</li>
<li/>
</ul>
</li>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p><strong>å…³é”®å¥</strong></p>
<ul>
<li>
<p>Â Â To date, there have been zero memory safety vulnerabilities discovered in Androidâ€™s Rust code.</p>
</li>
<li>
<p>Â Â We donâ€™t expect that number to stay zero forever, but given the volume of new Rust code across two Android releases, and the security-sensitive components where itâ€™s being used, itâ€™s a significant result. It demonstrates that Rust is fulfilling its intended purpose of preventing Androidâ€™s most common source of vulnerabilities. Historical vulnerability density is greater than 1/kLOC (1 vulnerability per thousand lines of code) in many of Androidâ€™s C/C++ components (e.g. media, Bluetooth, NFC, etc). Based on this historical vulnerability density, itâ€™s likely that using Rust has already prevented hundreds of vulnerabilities from reaching production.</p>
</li>
<li>
<p>Â Â è¿„ä»Šä¸ºæ­¢ï¼ŒAndroid çš„ Rust ä»£ç ä¸­å°šæœªå‘ç°ä»»ä½•å†…å­˜å®‰å…¨æ¼æ´ã€‚</p>
</li>
<li>
<p>Â Â æˆ‘ä»¬å¹¶ä¸æŒ‡æœ›è¿™ä¸ªæ•°å­—æ°¸è¿œä¸ºé›¶ï¼Œä½†è€ƒè™‘åˆ°ä¸¤ä¸ª Android ç‰ˆæœ¬ä¸­æ–°å¢çš„ Rust ä»£ç é‡ï¼Œä»¥åŠ Rust è¢«ç”¨äºå®‰å…¨æ•æ„Ÿç»„ä»¶ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªæ„ä¹‰é‡å¤§çš„ç»“æœã€‚å®ƒè¡¨æ˜ Rust æ­£åœ¨å®ç°å…¶é¢„æœŸç›®æ ‡ï¼Œå³é˜²æ­¢ Android æœ€å¸¸è§çš„æ¼æ´æ¥æºã€‚åœ¨ Android çš„è®¸å¤š C/C++ ç»„ä»¶ï¼ˆä¾‹å¦‚åª’ä½“ã€è“ç‰™ã€NFC ç­‰ï¼‰ä¸­ï¼Œå†å²æ¼æ´å¯†åº¦è¶…è¿‡ 1/kLOCï¼ˆæ¯åƒè¡Œä»£ç ä¸€ä¸ªæ¼æ´ï¼‰ã€‚åŸºäºè¿™ç§å†å²æ¼æ´å¯†åº¦ï¼ŒRust çš„ä½¿ç”¨å¾ˆå¯èƒ½å·²ç»é˜»æ­¢äº†æ•°ç™¾ä¸ªæ¼æ´è¿›å…¥ç”Ÿäº§ç¯å¢ƒã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">Microsoft (MSRC)</h4>
<p>è¿™æ˜¯å¾®è½¯æ‰¿è®¤ C/C++ å±€é™æ€§çš„é‡Œç¨‹ç¢‘å¼æ–‡ç« ï¼Œä¹Ÿæ˜¯â€œ70% æ¼æ´è®ºâ€çš„å‡ºå¤„ã€‚</p>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š-</p>
</li>
<li>
<p>å…³é”®å¥ï¼š</p>
<ul>
<li>
<p>Â Â roughly 70% of the security issues that the MSRC assigns a CVE to are memory safety issues. This means that if that software had been written in Rust, 70% of these security issues would most likely have been eliminated</p>
</li>
<li>
<p>Â Â å¤§çº¦ 70% æ˜¯å†…å­˜å®‰å…¨é—®é¢˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœè¿™äº›è½¯ä»¶æ˜¯ç”¨ Rust ç¼–å†™çš„ï¼Œé‚£ä¹ˆå…¶ä¸­ 70% çš„å®‰å…¨é—®é¢˜å¾ˆå¯èƒ½å·²è¢«æ¶ˆé™¤ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">AWS</h4>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p>å…³é”®ç‚¹</p>
<ul>
<li>
<p>Â Â  Rust uses a strict type system and ownership model to achieve compile-time verification of memory and concurrency safety, making the cost of testing and validating Rust implementations significantly lower than C/C++. Carl Lerche, a principal AWS engineer, says Rust and Tokio give AWS the ability to write services that respond fast, reliably, and that help us offer a better customer experience.</p>
</li>
<li>
<p>Â Â Rust ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿå’Œæ‰€æœ‰æƒæ¨¡å‹ï¼Œå®ç°äº†å†…å­˜å’Œå¹¶å‘å®‰å…¨æ€§çš„ç¼–è¯‘æ—¶éªŒè¯ï¼Œä½¿å¾— Rust å®ç°çš„æµ‹è¯•å’ŒéªŒè¯æˆæœ¬è¿œä½äº C/C++ã€‚AWS é¦–å¸­å·¥ç¨‹å¸ˆ Carl Lerche è¡¨ç¤ºï¼ŒRust å’Œ Tokio è®© AWS èƒ½å¤Ÿç¼–å†™å“åº”è¿…é€Ÿã€å¯é ä¸”æœ‰åŠ©äºæä¾›æ›´ä½³å®¢æˆ·ä½“éªŒçš„æœåŠ¡ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆ bug å°‘ï¼Ÿ</h4>
<p>Rust çš„è®¾è®¡ç†å¿µä»¥åŠæ€è·¯æ˜¯</p>
<p>æˆ‘ä¸ç›¸ä¿¡ç¨‹åºå‘˜èƒ½å†™å‡ºå¥å£®çš„ç¨‹åºï¼Œä½ è¦æƒ³ä½ çš„ç¨‹åºæ²¡æœ‰å†…å­˜å®‰å…¨é—®é¢˜ï¼ŒæŒ‰ç…§æˆ‘è¯´çš„åšã€‚</p>
<p>ç»“æœå‘¢ï¼Œå°±æ˜¯ å°†ä¸Šçº¿æœŸæ‰ä¼šæš´éœ²çš„ é—®é¢˜ï¼Œæå‰åˆ°ç¼–è¯‘æœŸå°±å‘Šè¯‰ä½ ï¼Œè¿™æ ·å†™ä¸è¡Œï¼Œä¼šå‡ºé—®é¢˜ã€‚</p>
<p>é‚£å…·ä½“æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p><strong>Rust çš„ 3 æ¡â€œçº¦æ³•ä¸‰ç« â€ï¼š</strong></p>
<ol>
<li>
<p>æ‰€æœ‰æƒ / å€Ÿç”¨ï¼ˆä¸è®²åè¯ï¼Œåªè®²è§„åˆ™ï¼‰</p>
</li>
<li>
<p>ç©ºå€¼ / Optional çš„æ€åº¦</p>
</li>
<li>
<p>å¹¶å‘ / æ•°æ®ç«äº‰çš„é™åˆ¶</p>
</li>
</ol>
<p>çº¦æ³•ä¸€ï¼šè°è´Ÿè´£èµ„æºï¼Œå†™æ­»ï¼Œä¸è®¸ç³Šå¼„</p>
<blockquote>
<p>â€œRust çš„ç¬¬ä¸€ä¸ªåŸåˆ™ï¼š <strong>â€˜æ¯ä¸€å—èµ„æºï¼Œå¿…é¡»æœ‰æ˜ç¡®çš„å”¯ä¸€â€œè´Ÿè´£äººâ€ã€‚â€™</strong></p>
<ul>
<li>è°åˆ›å»ºå®ƒ</li>
<li>å®ƒèƒ½æ´»å¤šä¹…</li>
<li>è°å¯ä»¥åŠ¨å®ƒ</li>
</ul>
<p>è¿™äº›ä¸œè¥¿ä¸æ˜¯é çº¦å®šï¼Œè€Œæ˜¯ç¼–è¯‘å™¨åœ¨å¸®ä½ è¿½è¸ªã€‚â€</p>
</blockquote>
<p>çº¦æ³•äºŒï¼šå¯èƒ½å¤±è´¥ / å¯èƒ½ä¸ºç©ºï¼Œå¿…é¡»å†™åœ¨ç±»å‹ä¸Š</p>
<p>ä» Go / JS è§’åº¦è§£é‡Š <code>Result</code> / <code>Option</code> çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è¯­æ³•ã€‚</p>
<p>ä½ å¯ä»¥è¿™æ ·è®²ï¼š</p>
<blockquote>
<p>â€œç¬¬äºŒä¸ªåŸåˆ™ï¼š <strong>â€˜å¯èƒ½å¤±è´¥ã€å¯èƒ½ä¸º null çš„åœ°æ–¹ï¼Œå¿…é¡»åœ¨ç±»å‹ä¸Šå†™æ¸…æ¥šï¼Œä¸èƒ½å·å·æ‘¸æ‘¸ã€‚â€™</strong></p>
<p>åœ¨ Go é‡Œï¼š</p>
<ul>
<li>å¾ˆå¤šå‡½æ•°ç­¾åæ˜¯ï¼š<code>(T, error)</code></li>
<li>ä½†æˆ‘ä»¬å¯ä»¥é€‰æ‹©å¿½ç•¥ <code>error</code>ï¼Œç”šè‡³ <code>_ = xxx</code>ã€‚</li>
</ul>
<p>åœ¨ Rust é‡Œï¼Œç±»ä¼¼çš„ä¸œè¥¿ä¼šæ˜¯ï¼š</p>
<ul>
<li><code>Result</code>ï¼šæˆ‘å¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥</li>
<li><code>Option</code>ï¼šæˆ‘å¯èƒ½æœ‰å€¼ä¹Ÿå¯èƒ½æ²¡å€¼</li>
</ul>
<p>åŒºåˆ«åœ¨äºï¼š <strong>Rust ä¸å¤ªå…è®¸ä½ è£…ä½œâ€˜å®ƒä¸€å®šæ²¡é—®é¢˜â€™ã€‚</strong> <strong>ä½ ä¸å¤„ç†ï¼Œè¿™æ®µä»£ç å°±è¿‡ä¸äº†ç¼–è¯‘ã€‚</strong> â€</p>
</blockquote>
<blockquote>
<p>â€œRustï¼šä½ å¯ä»¥èœï¼Œä½†ä½ ä¸èƒ½ä¸è®¤çœŸã€‚ Go / JSï¼šä½ è¦æ˜¯æƒ³ç³Šå¼„ä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿä¸æ‹¦ä½ ã€‚â€</p>
</blockquote>
<p>è®©å¤§å®¶æ„Ÿå—åˆ°ï¼š <strong>Rust æŠŠâ€œé”™è¯¯/ç©ºå€¼â€ä»â€œçº¦å®šâ€å˜æˆäº†â€œåˆ¶åº¦â€ã€‚</strong></p>
<p>çº¦æ³•ä¸‰ï¼šå¹¶å‘è®¿é—®æ•°æ®ï¼Œå…ˆè¯´æ¸…æ¥šæ€ä¹ˆç”¨</p>
<blockquote>
<p>â€œRust çš„å¹¶å‘å“²å­¦ï¼š <strong>â€˜è¦ä¹ˆä½ ä¿è¯è¿™ä»½æ•°æ®åªæœ‰ä¸€ä¸ªäººèƒ½æ”¹ï¼Œè¦ä¹ˆå¤§å®¶éƒ½åªèƒ½çœ‹ä¸èƒ½æ”¹ã€‚â€™</strong></p>
<p>ç¼–è¯‘å™¨ä¼šåœ¨ä½ å¯åŠ¨çº¿ç¨‹çš„é‚£ä¸€åˆ»ï¼Œå°±æ£€æŸ¥ï¼š</p>
<ul>
<li>ä½ æ˜¯ä¸æ˜¯æŠŠä¸€ä¸ªä¼šè¢«å¤šå¤„åŒæ—¶ä¿®æ”¹çš„ä¸œè¥¿åˆ°å¤„ä¹±ä¼ </li>
<li>ä½ æ˜¯ä¸æ˜¯æŠŠä¸€ä¸ªçŸ­å‘½çš„æ•°æ®å€Ÿç»™äº†æ´»å¾—æ¯”å®ƒä¹…çš„çº¿ç¨‹</li>
</ul>
<p>å¦‚æœæœ‰è¿™ç§å¯èƒ½æ€§ï¼š <strong>â€”â€”ç›´æ¥ä¸ç»™ä½ ç¼–è¯‘é€šè¿‡ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-10">Rust æ€§èƒ½æ€ä¹ˆæ ·å‘¢ï¼Ÿ</h3>
<p>å¼€å‘è€…æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Faction%2FGoToLink%3Furl%3Dhttps%253A%252F%252Fbenchmarksgame-team.pages.debian.net%252Fbenchmarksgame%252Findex.html" target="_blank" title="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fbenchmarksgame-team.pages.debian.net%2Fbenchmarksgame%2Findex.html" ref="nofollow noopener noreferrer">The Benchmarks Game</a> çš„æµ‹è¯•æ•°æ®åˆ¶ä½œäº†ä¸€ä»½å¯è§†åŒ–å›¾è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç°è‰²åæ˜ çš„æ˜¯æ—¶é—´æ•ˆç‡ï¼Œè¶ŠçŸ­ä»£è¡¨æ€§èƒ½è¶Šå¥½ï¼Œæ£•è‰²åˆ™æ˜¯åŸºäºæ‰§è¡Œæ—¶é—´å’Œå†…å­˜å¼€é”€çš„åŠ æƒå€¼ã€‚ ï¼ˆè®¡ç®—æœºè¯­è¨€åŸºå‡†æµ‹è¯•æ¸¸æˆï¼ˆä»¥å‰ç§°ä¸ºè®¡ç®—æœºè¯­è¨€å¤§æ¯”æ‹¼ï¼‰æ˜¯ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFree_software" target="_blank" title="https://en.wikipedia.org/wiki/Free_software" ref="nofollow noopener noreferrer">è‡ªç”±è½¯ä»¶é¡¹ç›®ï¼Œç”¨äºæ¯”è¾ƒç»™å®šçš„ç®€å•</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAlgorithms" target="_blank" title="https://en.wikipedia.org/wiki/Algorithms" ref="nofollow noopener noreferrer">ç®—æ³•</a>å­é›†å¦‚ä½•åœ¨å„ç§æµè¡Œçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FProgramming_languages" target="_blank" title="https://en.wikipedia.org/wiki/Programming_languages" ref="nofollow noopener noreferrer">ç¼–ç¨‹è¯­è¨€</a>ä¸­å®ç°ã€‚ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c11ef98abb9d41ce8e328359cdb300c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=5%2BI0sPGzuvsWPup7GZGfD%2BQX2%2Fo%3D" alt="" loading="lazy"/></p>
<p>Web æ¡†æ¶æ€§èƒ½å¯¹æ¯”</p>
<p>å¯ä»¥çœ‹åˆ°æœ€å¿«çš„10ä¸ªæ¡†æ¶ä¸­ Rust å‰åå ä¸ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cbd9f3b806d42acaa2501fd629af153~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=dFz%2F3pAya%2B2hfa%2FPdqS1ea7UHp8%3D" alt="" loading="lazy"/></p>
<p>AWS Lambda å†·å¯åŠ¨æ—¶é—´ï¼ˆServerless åœºæ™¯ï¼‰â€œå†·å¯åŠ¨â€å°±æ˜¯ä½ çš„ç¨‹åºä»â€œæ²‰ç¡â€åˆ°â€œå®Œå…¨å”¤é†’å¹¶å¼€å§‹å·¥ä½œâ€æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5300c75b748c46908c92c7c6e018a1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=AainNr9ju2SP9EVPp77DQoWhvlo%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰ä¸ªç‰¹æ®Šè§†è§’ï¼šèƒ½è€—ï¼š</p>
<p>è·‘å®ŒåŒä¸€ä¸ªä»»åŠ¡éœ€è¦æ¶ˆè€—å¤šå°‘ç„¦è€³çš„ç”µ ï¼Œè¿™å¯¹äºäº‘åŸç”Ÿæ—¶ä»£ï¼ˆç”µè´¹å³æˆæœ¬ï¼‰éå¸¸é‡è¦ã€‚</p>
<p>è®ºæ–‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e20fbda1f2a247969ddbf9ebae45631f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=60B7tQag6I8TiWdm%2FGdc72i6nuk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</h4>
<p>æ²¡æœ‰â€œåƒåœ¾å›æ”¶â€ï¼ˆNo Garbage Collectionï¼‰â€”â€” æœ€å…³é”®çš„å·®å¼‚</p>
<ul>
<li>Rust æ²¡æœ‰åƒåœ¾å›æ”¶å™¨ã€‚å®ƒé€šè¿‡ä¸€å¥—ç‹¬ç‰¹çš„**æ‰€æœ‰æƒï¼ˆOwnershipï¼‰**æœºåˆ¶ï¼Œåœ¨ä»£ç ç¼–è¯‘çš„æ—¶å€™ï¼Œå°±å·²ç»ç²¾ç¡®è®¡ç®—å‡ºäº†æ¯ä¸€ä¸ªå˜é‡åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ã€‚ç›¸æ¯”è¾ƒäº å¸¦ GC çš„è¯­è¨€çš„ä¼˜åŠ¿å°±æ˜¯ä¸ä¼šå‡ºç°éšæœºçš„â€œå¡é¡¿â€ï¼ˆLatency Spikesï¼‰ã€‚</li>
</ul>
<p>æå…¶æ¿€è¿›çš„ç¼–è¯‘å™¨ä¼˜åŒ– (LLVM)</p>
<p>Rust çš„ç¼–è¯‘å™¨æ˜¯å‡ºäº†åçš„â€œä¸¥æ ¼â€å’Œâ€œæ…¢â€ï¼Œä½†è¿™æ˜¯ä¸ºäº†ç”Ÿæˆæè‡´çš„æœºå™¨ç ã€‚</p>
<ul>
<li><strong>é™æ€åˆ†æ</strong>ï¼šå› ä¸º Rust çš„è¯­æ³•è§„åˆ™éå¸¸ä¸¥æ ¼ï¼ˆæ¯”å¦‚å¼ºç±»å‹ã€ä¸å¯å˜æ€§ï¼‰ï¼Œç¼–è¯‘å™¨èƒ½ç¡®ä¿¡ä»£ç çš„æŸäº›éƒ¨åˆ†æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä»è€Œè¿›è¡Œæå…¶å¤§èƒ†çš„ä¼˜åŒ–ï¼ˆæ¯”å¦‚ç›´æ¥åˆ é™¤å†—ä½™ä»£ç ã€å†…è”å‡½æ•°è°ƒç”¨ï¼‰ï¼Œè€ŒåŠ¨æ€è¯­è¨€ï¼ˆå¦‚ Python/JSï¼‰ä¸æ•¢è¿™ä¹ˆåšã€‚</li>
</ul>
<p>åŸºäº Rust çš„ä¸‰å¤§æ€æ‰‹é”â€”â€”<strong>å†…å­˜å®‰å…¨ï¼ˆä¸å´©æºƒï¼‰</strong> ã€<strong>æé«˜æ€§èƒ½ï¼ˆè·‘å¾—å¿«ï¼‰</strong> ã€<strong>æ— </strong> <strong>GC</strong> <strong>ï¼ˆä¸å¡é¡¿ï¼‰</strong> ï¼Œå¯¼è‡´å…¶é€‚åˆçš„æ˜¯é‚£äº›â€œæ—¢è¦é«˜å¯é æ€§ï¼Œåˆè¦æé™æ€§èƒ½â€çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-12">é€‚ç”¨åœºæ™¯</h3>
<p>ä¾‹å¦‚ ï¼š</p>
<ul>
<li>
<p>åŸºç¡€è®¾æ–½ä¸åº•å±‚ç³»ç»Ÿï¼šLinux Kernel 6.1 æ­£å¼æ¥çº³ Rust ä¸ºç¬¬äºŒå®˜æ–¹è¯­è¨€ï¼ˆå†å²ä¸Šåªæœ‰ C è¯­è¨€ï¼‰ï¼›Windows å†…æ ¸é‡å†™éƒ¨åˆ†ç»„ä»¶ã€‚</p>
</li>
<li>
<p>é«˜å¹¶å‘ç½‘ç»œæœåŠ¡ä¸ç½‘å…³ï¼ˆè§£å†³â€œé•¿å°¾å»¶è¿Ÿâ€ï¼‰è¿™æ˜¯ Rust æ­£åœ¨ç–¯ç‹‚å¢é•¿çš„é¢†åŸŸï¼Œä¸»è¦ç”¨æ¥è§£å†³ Go æˆ– Java åœ¨è¶…é«˜å¹¶å‘ä¸‹é‡åˆ°çš„ GC ç“¶é¢ˆã€‚</p>
</li>
<li>
<p>åµŒå…¥å¼å¼€å‘ (Embedded) &amp; IoT åœ¨èµ„æºå—é™çš„è®¾å¤‡</p>
</li>
<li>
<p>å‘½ä»¤è¡Œå·¥å…· (CLI) ä¸å¼€å‘è€…ç”Ÿæ€ï¼Œè¿™æ˜¯æ™®é€šå¼€å‘è€…æœ€å®¹æ˜“æ„ŸçŸ¥åˆ° Rust å¨åŠ›çš„åœ°æ–¹ã€‚Rust æ­£åœ¨é‡å†™å‡ ä¹æ‰€æœ‰ç»å…¸çš„ Linux å‘½ä»¤è¡Œå·¥å…·ã€‚</p>
</li>
<li>
<p>WebAssembly (Wasm) ä¸è¾¹ç¼˜è®¡ç®—ï¼ŒRust æ˜¯ç›®å‰ WebAssembly ç”Ÿæ€ä¸­æ”¯æŒæœ€å¥½çš„è¯­è¨€ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>
</li>
<li>
<p>åŒºå—é“¾ (Blockchain &amp; Web3) Solanaï¼ŒPolkadotï¼ŒNear Protocolï¼ŒAptos / Sui ç­‰ç­‰</p>
</li>
<li>
<p>äº¤æ˜“ç³»ç»Ÿä¸é‡åŒ–é‡‘è (Trading Systems &amp; HFT)ï¼šBinance çš„è®¸å¤šæ ¸å¿ƒæ’®åˆå¼•æ“å’Œé«˜æ€§èƒ½ç½‘å…³ï¼Œéƒ½åœ¨é€æ¸è¿ç§»åˆ° Rustã€‚</p>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ c++ çš„ä½¿ç”¨åœºæ™¯</p>
<p>æ²¡é”™ï¼ï¼Œc++ å¹²çš„äº†çš„ æˆ‘ Rust å¹²ï¼Œc++ å¹²ä¸äº†çš„ æˆ‘ Rust æ›´è¦å¹²ï¼Œç»Ÿç»Ÿé‡æ„ï¼ŒLinus ç‰¹è®¸ï¼Œè¿™å°±æ˜¯ Rust</p>
<h3 data-id="heading-13">æ„Ÿè§‰æœ‰ç‚¹å‰å®³ï¼Œé‚£ Rustå®é™…å¥½ä¸å¥½ç”¨å‘¢ ï¼Ÿ</h3>
<p>å½“ç„¶é™¤äº†å­¦ä¹ éš¾åº¦æˆ‘ä»¬å¿æŠ›å¼€ä¸è°ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸Šï¼ŒRust å·¥å…·é“¾å¯è°“ç®€æ´å®ç”¨ï¼Œå€Ÿé‰´äº† go/jRuby/Node.js å‰è¾ˆçš„ä¼˜ç‚¹</p>
<ul>
<li>
<p>Cargoï¼šå…¬è®¤ä¸ºæ˜¯å½“ä»Šç¼–ç¨‹ç•Œæœ€å®Œç¾çš„åŒ…ç®¡ç†å™¨ æ•°æ®æ¥æºï¼š</p>
<ul>
<li>Â Â åœ¨ C/C++ æ—¶ä»£ï¼Œæ„å»ºä¸€ä¸ªè·¨å¹³å°é¡¹ç›®ç®€ç›´æ˜¯ç¾éš¾ã€‚Rust çš„ <strong>Cargo</strong> ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œå®ƒæ˜¯<strong>æ„å»ºç³»ç»Ÿ + åŒ…ç®¡ç† + æµ‹è¯•è¿è¡Œå™¨ + æ–‡æ¡£ç”Ÿæˆå™¨</strong>çš„å››åˆä¸€ã€‚</li>
</ul>
</li>
<li>
<p>Rustfmtï¼šä»£ç æ ¼å¼åŒ–å€Ÿé‰´äº†gofmtã€‚åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œæœ€æµªè´¹æ—¶é—´çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯äº‰è®ºâ€œèŠ±æ‹¬å·æ¢ä¸æ¢è¡Œâ€æˆ–è€…â€œç¼©è¿›ç”¨ 2 ä¸ªç©ºæ ¼è¿˜æ˜¯ 4 ä¸ªç©ºæ ¼â€ Rust å®˜æ–¹ç›´æ¥æä¾› rustfmtã€‚å®ƒæœ‰ä¸€å¥—å®˜æ–¹å®šä¹‰çš„â€œæ ‡å‡†æ ¼å¼â€ã€‚Code Reviewï¼ˆä»£ç å®¡æŸ¥ï¼‰æ—¶ï¼Œæ²¡æœ‰ä»»ä½•äººä¼šå†è¯„è®ºæ ¼å¼é—®é¢˜ï¼Œæ‰€æœ‰äººçš„ç²¾åŠ›éƒ½é›†ä¸­åœ¨<strong>ä¸šåŠ¡é€»è¾‘</strong>å’Œ<strong>æ¶æ„è®¾è®¡</strong>ä¸Šã€‚</p>
</li>
<li>
<p>Clippyï¼šå…¨è‡ªåŠ¨çš„â€œé«˜çº§å¯¼å¸ˆâ€ä¸â€œä»£ç å®ˆé—¨å‘˜â€ï¼ˆé‡ç‚¹ï¼‰Clippy æ˜¯ Rust çš„å®˜æ–¹ Linterï¼ˆé™æ€åˆ†æå·¥å…·ï¼‰ï¼Œä½†å®ƒæ¯”æ™®é€šçš„ Linter å¼ºå¤§å¾—å¤šã€‚å®ƒä¸ä»…ä»…æ˜¯æ£€æŸ¥é”™è¯¯ï¼Œå®ƒæ˜¯åœ¨æ•™ä½ å†™â€œåœ°é“â€çš„ Rust ä»£ç ï¼ˆIdiomatic Rustï¼‰ã€‚Clippy çš„ä½œç”¨å°±æ˜¯æ‹‰å¹³è¿™ä¸ªå·®è·ï¼š</p>
<ul>
<li>
<p>çº æ­£â€œæ–¹è¨€â€ï¼Œå¼ºåˆ¶â€œæ™®é€šè¯â€ï¼š Clippy å†…ç½®äº†è¶…è¿‡ 700 æ¡ è§„åˆ™ã€‚å®ƒä¼šè¯†åˆ«å‡ºé‚£äº›â€œèƒ½è·‘ï¼Œä½†æ˜¯å†™å¾—å¾ˆä¸‘/å¾ˆæ…¢/å¾ˆå±é™©â€çš„ä»£ç ï¼Œå¹¶ç»™å‡ºä¿®æ”¹å»ºè®®ã€‚</p>
</li>
<li>
<p>ä¸ä»…æŒ‡å‡ºé—®é¢˜ï¼Œè¿˜è‡ªåŠ¨ä¿®å¤ï¼š å¾ˆå¤šæ—¶å€™ï¼ŒClippy å¯ä»¥ç›´æ¥é€šè¿‡ cargo clippy --fix è‡ªåŠ¨å¸®ä½ æŠŠä»£ç æ”¹æˆæœ€ä¼˜å†™æ³•ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>ä»ä»“åº“åˆ›å»ºï¼Œ ä¾èµ–æ‹‰å–ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä»£ç é£æ ¼ç»Ÿä¸€ï¼Œä»£ç æ£€æŸ¥ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œä»£ç æµ‹è¯•ï¼Œæ–‡æ¡£ç”Ÿæˆï¼Œcrate å‘å¸ƒ Rust å·¥å…·é“¾ç›´æ¥ä¸€æ¡é¾™æœåŠ¡ã€‚</p>
<p>å½“ç„¶æˆ‘å…¶ä»–è¯­è¨€ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™ä¸ªå¯ä»¥é—®ä¸‹ä¼šå¤šç§è¯­è¨€çš„ å¤§ä½¬ä»¬ï¼Œå®é™…ä½“éªŒæ˜¯ä¸æ˜¯è¿™æ ·ã€‚</p>
<p>ç®€å•æ€»ç»“ï¼š</p>
<p>å¯¹å¤§å…¬å¸æ¥è¯´</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>æ›´å°‘çš„æœåŠ¡å™¨</strong>ï¼šå› ä¸ºæ€§èƒ½é«˜ï¼ˆCloudflare æ¡ˆä¾‹ï¼‰ã€‚</li>
<li><strong>æ›´å°‘çš„ç»´æŠ¤</strong>ï¼šå› ä¸º Bug å°‘ï¼ˆGoogle æ¡ˆä¾‹ï¼‰ã€‚</li>
<li><strong>æ›´å¥½çš„ä½“éªŒ</strong>ï¼šå› ä¸ºæ— å¡é¡¿ï¼ˆDiscord æ¡ˆä¾‹ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼šå› ä¸ºå­¦ä¹ é—¨æ§›é«˜ï¼Œå¼€å‘äººå‘˜å°‘ã€‚æ‹›ä¸åˆ°äºº</p>
</li>
</ul>
<p>å¯¹ä¸ªäººæ¥è¯´ï¼š</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼šæœ‰ç¬¬ä¸€æ¢¯é˜Ÿçš„ æ€§èƒ½ï¼Œæœ‰é¢å¤–çš„å®‰å…¨æ£€æŸ¥ï¼Œæœ‰å¥½ç”¨çš„å¼€å‘å·¥å…·é“¾</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼š å­¦ä¹ é—¨æ§›é«˜ï¼Œéœ€è¦åå¤å…¥é—¨</p>
</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå¤§å®¶å¯¹å…¬å¸æ¥è¯´ Rust çš„ä¼˜ç¼ºç‚¹åº”è¯¥æ²¡ä»€ä¹ˆå¼‚è®®ï¼Œ</p>
<p>å¯¹ä¸ªäººæ¥è¯´çš„è§‚ç‚¹ å¯èƒ½å¤§å¤šæ•°ç¨‹åºå‘˜ä¸æ•¢è‹ŸåŒ</p>
<p>ä½ è¯´è¿™ä¸ªç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¹ˆå‰å®³ï¼Œæœ‰ä»€ä¹ˆç”¨å•Šï¼Œèƒ½è®©æˆ‘æ—©ä¸‹ç­ï¼Œèƒ½ç»™æˆ‘å¤šå‘ç‚¹å·¥èµ„ä¹ˆï¼Ÿ</p>
<p>æ¥çœ‹ä¸€ä¸ª 2024-2025 å¹´ ä¸åŒç¼–ç¨‹è¯­è¨€è–ªèµ„æ°´å¹³ æ•°æ®</p>
<p>æ•°æ®åˆ†æå¹³å° DevJobsScanner åˆ†æäº†æ¥è‡ªä¸–ç•Œå„åœ°è¶…è¿‡ 1000 ä¸‡ä¸ªå¼€å‘èŒä½ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£å¸‚åœºä»¥åŠæœ€çƒ­é—¨ã€è–ªèµ„æœ€é«˜çš„è¯­è¨€ã€‚åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œä»…å…³æ³¨æ¥è‡ª<strong>ç¾å›½</strong>çš„èŒä½ã€‚è¿™ç¡®ä¿äº†ç»“æœæ›´åŠ ä¸€è‡´å’Œå…·æœ‰ä»£è¡¨æ€§ï¼Œå¹¶æ˜¾è‘—é™ä½äº†ä»»ä½•æ½œåœ¨çš„æ•°æ®åå·®</p>
<p>é“¾æ¥ï¼š</p>
<p>Solidity æ˜¯è¿è¡Œåœ¨ evmè™š æ‹Ÿæœºä¸Šçš„ æ™ºèƒ½åˆçº¦è¯­è¨€</p>
<p>Clojure æ˜¯è¿è¡Œåœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šçš„ç°ä»£ Lisp æ–¹è¨€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b39c71e68ac4e59a208627ef413218b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=rGz4yVCO2iwspIDMmTGJb%2FPFA4g%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6db610e973d24a30a5e24e2d7a21eb01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=Z7XGfBVDPWLp9PG4%2F6q6CL3tuyE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25de2fb6f95c42acb6cc72cea8839f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=fjfLf3yUyqeuOcTjKJr%2FkLmAjI0%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰äººè¯´äº†ï¼šé‚£ä½ ä¹Ÿåªæ˜¯ç°åœ¨å·¥èµ„é«˜ï¼Œæœªæ¥å‘¢ï¼Ÿæˆ‘å¥½ä¸å®¹æ˜“å­¦ä¼šäº†ï¼ŒRust ä¸ç«äº†é‚£ä¸ç™½å­¦äº†</p>
<p>æœªæ¥å‘å±•</p>
<p>æœªæ¥ä»€ä¹ˆæ ·ï¼Œè°ä¹Ÿè¯´ä¸äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ¥çœ‹è¿™æ ·ä¸€ç»„æ•°æ®ï¼š</p>
<p>2025 å¹´ Stackoverflow ç»Ÿè®¡çš„æœ€ Admired çš„ç¼–ç¨‹è¯­è¨€ï¼ˆæŒ‡ç”¨äº†è¿˜æƒ³ç”¨ï¼Œç”¨æˆ·æ»¡æ„åº¦é«˜ï¼‰ ï¼ˆ åœ¨è¿‡å»ä¸€å¹´é‡Œä½¿ç”¨äº†è¯¥è¯­è¨€ï¼Œå¹¶ä¸”åœ¨æ¥å¹´è¿˜æƒ³ç»§ç»­ä½¿ç”¨è¯¥è¯­è¨€çš„å¼€å‘è€…æ¯”ä¾‹ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1fe906585d48a9b8fb258506a61907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=6zoqi3dSi3NGuoKDf7GtOvlAwK4%3D" alt="" loading="lazy"/></p>
<p>è‡³æ­¤ è‡ª Rust 2015 å¹´ 5 æœˆå‘å¸ƒä»¥æ¥ï¼Œ ä»2016-2025å¹´ è¿ç»­ 10 å¹´å¹¶æŒç»­éœ¸æ¦œæˆä¸ºç”¨æˆ·æ»¡æ„åº¦æœ€é«˜çš„è¯­è¨€ã€‚</p>
<p>è¾¾æˆäº† <strong>â€œ</strong> <strong>å‡ºé“ 10 å¹´ï¼Œéœ¸æ¦œ 10 å¹´</strong> <strong>â€</strong> çš„æˆå°±ã€‚</p>
<p>èƒ½å¦è¯´æ˜æœªæ¥å‘å±•å‰æ™¯å¹¿é˜”</p>
<p>å¤§å®¶é—®é‚£2015å¹´å‘¢ï¼Ÿ2015å¹´æ˜¯ç©ºé™ç¬¬ä¸‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/454384b707414c4eac7f5f5b66d41a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=QjjjnWbDfCHE41htq4Nq8CjLFYw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">æœ€ç»ˆç»“è®ºï¼š</h3>
<p>å¯¹ä¸ªäººæ¥è¯´</p>
<p>å–œæ¬¢é«˜æ€§èƒ½ï¼Œé«˜ å®‰å…¨æ€§ -&gt; Rust!</p>
<p>æå‰å¸ƒå±€æœªæ¥ï¼Œé€‰æœ‰å‘å±•çš„ ç¼–ç¨‹è¯­è¨€ -&gt; Rust!</p>
<p>æƒ³è¦å¤šèµšé’± -&gt; Rust!</p>
<p>æ‰€ä»¥ï¼Œè¿™æ · ç‹‚æ‹½ç‚«é…·åŠç‚¸å¤©ï¼Œç¨‹åºçŒ¿ç”¨äº†éƒ½è¯´å¥½ï¼Œå¹¶ä¸”è–ªèµ„æ‹‰æ»¡çš„ Rust çœŸçš„ä¸å­¦ä¸€ä¸‹ä¹ˆï¼Ÿ</p>
<p>Pomelo_åˆ˜é‡‘ã€‚è½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚æ„Ÿè°¢ï¼</p>
<p>ä¸å­¦é”™è¿‡æœªæ¥ï¼Œé”™è¿‡ä¸€ä¸ªäº¿å“¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜]]></title>    <link>https://juejin.cn/post/7582041304655249454</link>    <guid>https://juejin.cn/post/7582041304655249454</guid>    <pubDate>2025-12-10T16:27:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582041304655249454" data-draft-id="7582048028393226290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T16:27:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:27:50.000Z" title="Wed Dec 10 2025 16:27:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ä¸ªä¸–ç•Œå°±æ˜¯è¿™æ ·ï¼Œä½ ä»å¤±è´¥ä¸­å­¦åˆ°çš„ä¸œè¥¿å¯èƒ½æ¯”æˆåŠŸä¸­å­¦åˆ°çš„ä¸œè¥¿æ›´å¤šâ€”â€”ã€ŠAndroid ä¼ å¥‡ã€‹</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96da1c986c7f488ebbcbd5279fc0a176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=M7SiapCro%2B87iY33xT2f2937wgE%3D" alt="image.png" loading="lazy"/></p>
<p>è¯´èµ· Android APP å†…å­˜åˆ†æï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„ï¼Œå¾€å¾€æ˜¯ Android Studio Profilerã€MAT è¿™æ ·çš„è€ç‰Œå·¥å…·ï¼Œè€Œ Perfetto çš„å‡ºç°ï¼Œåˆä¸ºå…¶æä¾›äº†ä¸€ç§æ›´åŠ è´´è¿‘åº•å±‚çš„è§†è§’ã€‚è€Œä¸”ç›¸æ¯”äºç°æœ‰çš„å·¥å…·ï¼ŒPerfetto æ›´åŠ æ“…é•¿äºåˆ†æ Native å†…å­˜å ç”¨ï¼Œå¯ä»¥è¯´æ˜¯è¡¥é½äº†å·¥ç¨‹å¸ˆåœ¨è¿™æ–¹é¢çš„çŸ­æ¿ã€‚</p>
<p><strong>åœ¨å†…å­˜æ–¹å‘ï¼Œæˆ‘è®¡åˆ’ç”¨2~3ç¯‡æ–‡ç« æ¥ä»‹ç» Perfetto çš„åŠŸèƒ½ã€ç‰¹ç‚¹ã€ä½¿ç”¨æ–¹æ³•ç­‰</strong> ã€‚ä½œä¸ºç¬¬1ç¯‡ï¼Œæœ¬æ–‡åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>Android APP æ‰€ç”³è¯·çš„å†…å­˜åˆ†ç±»ï¼ˆJavaã€Nativeï¼‰</li>
<li>å¦‚ä½•æŠ“å–ã€åˆ†æè¿™ä¸¤ç±»å†…å­˜å ç”¨æƒ…å†µï¼Œå¹¶æä¾›å¯¹åº”çš„ Perfetto æ“ä½œå®ä¾‹</li>
</ul>
<h2 data-id="heading-0">APP å ç”¨å†…å­˜åˆ†ç±»</h2>
<p>Android ç³»ç»Ÿæ¡†æ¶æ˜¯ç”± Linux å‘å±•è€Œæ¥çš„ï¼Œå¯¹äºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆAPPï¼‰ï¼Œæ¡†æ¶ä¸ºå…¶åˆå§‹åˆ†é…ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ª ART è™šæ‹Ÿæœºï¼ˆæ›´æ—©æ—¶å€™æ˜¯ Dalvikï¼‰ï¼Œè¿™ä¸ªè™šæ‹Ÿæœºç”¨äºè§£é‡Šæ‰§è¡Œ Java å­—èŠ‚ç ã€‚å› æ­¤ï¼Œä¸€ä¸ª APP æ‰€å ç”¨çš„å†…å­˜ï¼Œå¯ä»¥å½’ç»“ä¸ºä¸¤ç±»ï¼šåœ¨ Linux å±‚ç”³è¯·çš„ Native å†…å­˜ï¼Œä»¥åŠåœ¨ JVM ä¸Šç”³è¯·çš„ Java å†…å­˜ã€‚</p>
<ul>
<li><strong>Native å†…å­˜</strong> ï¼šç”± C/C++/Rust è¿›ç¨‹ç”³è¯·ï¼Œå…¶åº•å±‚ä½¿ç”¨ <code>libc</code> çš„ <code>malloc()/free()</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·/é‡Šæ”¾ã€‚æ­¤å¤–ï¼ŒAPP é€šè¿‡ JNI ä¹Ÿå¯ç”³è¯·æ­¤éƒ¨åˆ†å†…å­˜ï¼Œä¾‹å¦‚ <code>java.util.regex.Pattern</code> ç±»çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå°±åŒæ—¶ç”³è¯·äº† Native å†…å­˜å’Œ Java å†…å­˜ã€‚</li>
<li><strong>Java å†…å­˜</strong> ï¼šç”±åº”ç”¨å†…çš„ Java/Kotlin ä»£ç ï¼Œé€šè¿‡ <code>new X()</code> çš„æ–¹å¼ç”³è¯·ï¼Œä½äº <strong>å †</strong> ä¸Šï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œå›æ”¶ã€‚</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°å†…å­˜ä½¿ç”¨åœºæ™¯ï¼ŒPerfetto æä¾›äº†ä¸¤ç§æŠ€æœ¯è¿›è¡Œåˆ†æã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23native-c-c-rust-heap-profling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#native-c-c-rust-heap-profling" ref="nofollow noopener noreferrer">heap profilingï¼ˆå †åˆ†æï¼‰</a> é€‚ç”¨äº Native ä»£ç ï¼Œé€šè¿‡ AOPï¼Œè¿½è¸ª <code>malloc/free</code> å‡½æ•°è°ƒç”¨é“¾ï¼Œä»è€Œè¯†åˆ«å‡ºæ¯ä¸ªå‡½æ•°å¼•èµ·çš„å†…å­˜å˜åŒ–ï¼Œé›†æˆåœ¨ç«ç„°å›¾å½“ä¸­å±•ç¤ºã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23java-managed-heap-dumps" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#java-managed-heap-dumps" ref="nofollow noopener noreferrer">heap dumpï¼ˆå †è½¬å‚¨ï¼‰</a> é€‚ç”¨äº Java ä»£ç ï¼Œå±•ç¤ºå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œä½†ä¸åŒ…å«è°ƒç”¨é“¾ã€‚</li>
</ul>
<h2 data-id="heading-1">Native (C/C++/Rust) å†…å­˜åˆ†æ</h2>
<p>åœ¨ C/C++/Rust è¯­è¨€ä¸­ï¼Œä½¿ç”¨åº•å±‚çš„ <code>malloc/free</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼ŒPerfetto é€šè¿‡ AOP æŠ€æœ¯ï¼Œåœ¨è¿™äº›å‡½æ•°å†…éƒ¨æ³¨å…¥ä»£ç è¿›è¡Œæ‹¦æˆªï¼Œå› æ­¤èƒ½å¤Ÿè¯†åˆ«æ¯ä¸€æ¬¡å†…å­˜çš„ç»†å¾®å˜åŠ¨ã€‚å‡ºäºåœ¨åº”ç”¨æ€§èƒ½å’ŒæŠ“å–æ•ˆæœä¹‹é—´ä¿æŒå¹³è¡¡çš„è€ƒè™‘ï¼Œè¿˜æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdesign-docs%2Fheapprofd-sampling" target="_blank" title="https://perfetto.dev/docs/design-docs/heapprofd-sampling" ref="nofollow noopener noreferrer">samplingï¼ˆé‡‡æ ·ï¼‰</a> æœºåˆ¶ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNative å†…å­˜åˆ†ææ˜¯ <strong>ä¸å¯è¿½æº¯</strong> çš„ï¼Œå®ƒåªèƒ½è®°å½•ä» <strong>å¯åŠ¨ Perfetto çš„æ—¶é—´ç‚¹ä¹‹å</strong> çš„å†…å­˜åˆ†é…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå†…å­˜é—®é¢˜å·²ç»å‘ç”Ÿåï¼Œå†è¿›è¡Œ Native å†…å­˜è¿½è¸ªï¼Œä¼šæœ‰æ— æ³•è¯†åˆ«å¼•èµ·å†…å­˜é—®é¢˜çš„å‡½æ•°çš„é£é™©ï¼ˆå†…å­˜æ³„æ¼åˆ™ä¸ä¸€æ ·ï¼Œå› ä¸ºå®ƒæ— æ—¶æ— åˆ»ä¸åœ¨å‘ç”Ÿï¼‰ã€‚</p>
<h3 data-id="heading-2">æ¡ˆä¾‹ï¼šNowInAndroid</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Android 7.1ï¼ˆAPI 25ï¼‰ä¹‹å‰ï¼ŒBitmap å¯¹è±¡çš„åƒç´ æ•°æ®æ˜¯ä½¿ç”¨ Dalvik heap å­˜å‚¨çš„ï¼Œåœ¨æ‹¿åˆ° heap æ–‡ä»¶åï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºå¹¶çœ‹åˆ°å›¾ç‰‡å†…å®¹ã€‚ä» Android 7.1 å¼€å§‹ï¼ŒBitmap çš„å­˜å‚¨ä½ç½®ä» Dalvik heap è½¬ç§»åˆ°äº† Native heapã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶å¯ä»¥é¿å…å¤§é‡å›¾ç‰‡èµ„æºè€—å°½ JVM å†…å­˜ï¼Œä½†ä¹Ÿå®¹æ˜“è®©äººå¿½è§†æ‰ Native å†…å­˜ç®¡ç†ï¼Œå¯¼è‡´ OOM å‘ç”Ÿã€‚</p>
<p>Perfetto çš„ Native å†…å­˜åˆ†æï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«è¿™ç§è½åœ¨ Native heap çš„å†…å­˜åˆ†é…è°ƒç”¨é“¾ã€‚æˆ‘ä»¬ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fnowinandroid" target="_blank" title="https://github.com/android/nowinandroid" ref="nofollow noopener noreferrer">NowInAndroid</a> é¡¹ç›®ä¸ºä¾‹ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21771e680e7a4828908a89d5d7d024f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=a7PtuG5UXzJ%2F9TR37R%2Be2aK4TBs%3D" alt="nowinandroid_homepage.png" width="30%" loading="lazy"/>
<p>APP çš„é¦–é¡µæ˜¯å›¾æ–‡å…ƒç´ æ„æˆçš„ç€‘å¸ƒæµï¼Œåœ¨é¢‘ç¹æ»‘åŠ¨çš„æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿå¤§é‡ Native å†…å­˜ç”³è¯·/å›æ”¶çš„ç°è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ Perfetto å¯¹æ­¤è¿›è¡Œè§‚å¯Ÿã€‚</p>
<p>åœ¨ç½‘é¡µç«¯å¼€å¯ Memory ç›®å½•ä¸‹çš„ Native heap profiling å¼€å…³ï¼ŒåŒæ—¶å¡«å…¥å¾…åˆ†æçš„åŒ…å <code>com.google.samples.apps.nowinandroid.demo.debug</code>ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ <code>adb shell ps -A</code> æ¥æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„åŒ…åã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df13ec90a854c42abe34f51eea2c9af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=9bvAT0T%2Bbm5jQQHX%2FnoGHeMdRfo%3D" alt="perfetto_native_profiling.png" width="70%" loading="lazy"/>
<p>æ§åˆ¶å°å‚æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">buffers {
  size_kb: 65536
  fill_policy: DISCARD
}
data_sources {
  config {
    name: &amp;#34;android.heapprofd&amp;#34;
    heapprofd_config {
      sampling_interval_bytes: 4096
      process_cmdline: &amp;#34;com.google.samples.apps.nowinandroid.demo.debug&amp;#34;
      shmem_size_bytes: 8388608
      block_client: true
      all_heaps: false
    }
  }
}
duration_ms: 10000
</code></pre>
<p>æ¥ä¸‹æ¥ç‚¹å‡» <code>Start tracing</code> å¼€å§‹æŠ“å–ï¼Œåœ¨ 10s çš„æŠ“å–è¿‡ç¨‹ä¸­ï¼Œä¸Šæ»‘é¡µé¢ï¼Œä»¥åŠ è½½æ›´å¤šå›¾ç‰‡å’Œæ–‡å­—ã€‚æŠ“å–ç»“æœå¦‚ä¸‹ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede55f4c37424b06a388851b68580ba6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=OpIAvRmfCu05ODIA%2FWCzEN23K8U%3D" alt="perfetto_native_profiling_result.png" width="70%" loading="lazy"/>
<p>å›¾ä¾‹æ¯”è¾ƒç®€å•ï¼Œåˆ†æˆå·¦ä¸Šè§’çš„â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€ã€å³ä¸Šè§’çš„â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€å’Œå æ®æ­£ä¸­å¤®å¤§éƒ¨åˆ†çš„â€œ<strong>ç«ç„°å›¾</strong>â€ï¼Œä¾æ¬¡ä»‹ç»ä¹‹ã€‚</p>
<p>â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€åŒºåŸŸï¼Œå…±æœ‰4ç§æ’åºæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><strong>Unreleased Malloc Sizeï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šé»˜è®¤æ¨¡å¼ï¼ŒæŒ‰æœªé‡Šæ”¾å†…å­˜ <code>å­—èŠ‚æ•°</code> çš„æ€»å’Œèšåˆè°ƒç”¨æ ˆã€‚</li>
<li><strong>Unreleased Malloc Countï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šæŒ‰ <code>è®¡æ•°</code>èšåˆæœªé‡Šæ”¾çš„å†…å­˜åˆ†é…ï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚è¿™æœ‰åŠ©äºå‘ç°å°è§„æ¨¡çš„å†…å­˜æ³„æ¼ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½å¾ˆå°ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¤§é‡å¯¹è±¡ä¼šç´¯ç§¯èµ·æ¥ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜ç¢ç‰‡</code>ã€‚</li>
<li><strong>Total Malloc Sizeï¼ˆæ€»å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šæŒ‰é€šè¿‡ <code>malloc()</code> åˆ†é…çš„å†…å­˜å­—èŠ‚æ•°èšåˆè°ƒç”¨æ ˆï¼Œæ— è®ºè¿™äº›å†…å­˜æ˜¯å¦å·²è¢«é‡Šæ”¾ã€‚è¿™æœ‰åŠ©äºè°ƒæŸ¥å †é¢‘ç¹è°ƒç”¨ï¼Œå³å³ä½¿æœ€ç»ˆé‡Šæ”¾äº†å†…å­˜ï¼Œä¹Ÿä¼šå¯¹åˆ†é…å™¨é€ æˆå¾ˆå¤§å‹åŠ›çš„ä»£ç è·¯å¾„ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜æ³¢åŠ¨</code>ã€‚</li>
<li><strong>Total Malloc Countï¼ˆæ€»å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šä¸ä¸Šè¿°ç±»ä¼¼ï¼Œä½†æŒ‰ <code>malloc()</code> è°ƒç”¨æ¬¡æ•°èšåˆï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç›®å‰é€‰æ‹©çš„æ˜¯é»˜è®¤çš„ <code>Unreleased Malloc Size</code> é€‰é¡¹ã€‚</p>
<p>â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€åŒºåŸŸï¼Œåˆ†ä¸ºâ€œè‡ªé¡¶å‘ä¸‹â€å’Œâ€œè‡ªåº•å‘ä¸Šâ€ï¼Œå‰è€…çš„ç«ç„°å‘ä¸‹ç”Ÿé•¿ï¼Œåè€…åä¹‹ï¼Œä¸èµ˜è¿°ã€‚</p>
<p>â€œ<strong>ç«ç„°å›¾</strong>â€åŒºåŸŸï¼Œæ˜¯æ€§èƒ½åˆ†æçš„é‡ç‚¹ï¼Œé€šè¿‡å±‚å çš„å½¢å¼å±•ç¤ºå‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œæ¯ä¸ªè‰²å—ï¼ˆBlockï¼‰çš„é¢ç§¯è¡¨ç¤ºè¯¥å‡½æ•°å¼•èµ·çš„å†…å­˜å¢åŠ ï¼Œå‘ç”Ÿåœ¨ç›¸åŒå±‚çº§çš„åŒä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¢«èšåˆå±•ç¤ºã€‚å›¾ä¸­çš„ç«ç„°å›¾å¯ä»¥çœ‹å‡ºï¼ŒNowInAndroid ä»£ç å†™çš„ç›¸å¯¹å¥å£®ï¼Œå›æ”¶å’Œå¤ç”¨éƒ½åšå¾—æ¯”è¾ƒå¥½ï¼Œå› æ­¤ RecyclerView ä¸­æœªè§å†…å­˜æ³„æ¼ã€‚</p>
<h2 data-id="heading-3">Java å†…å­˜å¿«ç…§</h2>
<p>åœ¨ JVM ç³»è¯­è¨€ä¸­ï¼Œé€šè¿‡è‡ªåŠ¨å›æ”¶æœºåˆ¶ç®¡ç†å†…å­˜ï¼Œå¤§éƒ¨åˆ† Profiling å·¥å…·éƒ½æ˜¯è¿›è¡Œå†…å­˜å¿«ç…§ï¼Œè®¡ç®—å½“å‰è™šæ‹Ÿæœºçš„ <code>å…¨éƒ¨å¯¹è±¡</code> åŠå…¶ <code>å¼•ç”¨å…³ç³»</code>ï¼Œä»è€Œå½¢æˆä¸€å¼ å®Œæ•´çš„å¯¹è±¡å›¾ã€‚</p>
<p><strong>Java å†…å­˜å¿«ç…§çš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼Œæ— æ³•é€šè¿‡å®ƒæŸ¥çœ‹å‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œå³å“ªäº›å‡½æ•°å¼•èµ·äº†å¤šå¤§çš„å†…å­˜å¢é•¿ã€‚</strong></p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea458224cbc42e28a888a8babfd9f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=nC527ATpMA2BWMeM6TOVBySqZmo%3D" alt="perfetto_java_profiling.png" width="70%" loading="lazy"/>
<p>å¼€å§‹æŠ“å–åï¼Œä¸Šæ»‘é¡µé¢ç›´è‡³å®Œæˆ10sçš„æŠ“å–ï¼Œä»¥ä¸‹æ˜¯æŠ“å–åˆ°çš„ç»“æœã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ca3959a6a14f1bad35506ee1e9a3b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=mxHl2AIyC%2BxKFPXXUevjOkjXp5c%3D" alt="perfetto_java_profiling_result.png" width="70%" loading="lazy"/>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Bitmap</code> å æ®äº†å†…å­˜çš„å¤§éƒ¨åˆ†ã€‚æ­¤å¤–ï¼ŒStringæ•°é‡æœ‰ <code>96433</code> ä¸ªï¼Œä¹ŸåŒæ ·å€¼å¾—å…³æ³¨ã€‚</p>
<blockquote>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
</blockquote>
<h2 data-id="heading-4">å‚è€ƒèµ„æ–™</h2>
<ul>
<li/>
<li/>
<li/>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7582047554090057737</link>    <guid>https://juejin.cn/post/7582047554090057737</guid>    <pubDate>2025-12-10T15:47:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047554090057737" data-draft-id="7581752787563626536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="Android,APP,æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2025-12-10T15:47:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ„¤æ€’çš„ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/4125023358426190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023358426190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ„¤æ€’çš„ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:47:02.000Z" title="Wed Dec 10 2025 15:47:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ 0x00. å¼•è¨€ï¼šSystemUI çš„æ ¸å¿ƒèŒè´£ä¸é€šä¿¡å¿…è¦æ€§</h2>
<p>åœ¨ Android çš„ä¸–ç•Œé‡Œï¼Œ<strong>SystemUI</strong> æ‰®æ¼”ç€â€œç³»ç»Ÿé—¨é¢â€çš„è§’è‰²ã€‚æ— è®ºæ˜¯é¡¶éƒ¨çš„<strong>çŠ¶æ€æ </strong>ï¼ˆæ˜¾ç¤ºæ—¶é—´ã€ç”µé‡ã€ä¿¡å·ï¼‰ã€åº•éƒ¨çš„<strong>å¯¼èˆªæ </strong>ï¼ˆæ‰‹åŠ¿æˆ–æŒ‰é”®ï¼‰ï¼Œè¿˜æ˜¯ä¸‹æ‹‰çš„<strong>é€šçŸ¥ä¸­å¿ƒ</strong>ä¸<strong>é”å±ç•Œé¢</strong>ï¼Œéƒ½æ˜¯ SystemUI çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ AOSPï¼ˆAndroid Open Source Projectï¼‰çš„æ¶æ„ä¸­ï¼ŒSystemUI å¹¶ä¸æ˜¯ç³»ç»Ÿå†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ï¼ˆ<code>com.android.systemui</code>ï¼‰ä¸­çš„<strong>åº”ç”¨ç¨‹åº</strong>ã€‚</p>
<p>è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªå·¨å¤§çš„æŒ‘æˆ˜ï¼š</p>
<p>SystemUI åªæ˜¯ä¸€ä¸ª UI å±•ç¤ºå±‚ï¼Œä½†å®ƒå±•ç¤ºçš„æ•°æ®ï¼ˆå¦‚ç”µé‡ã€é€šçŸ¥ã€æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼‰å’Œæ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚æ€æ‰è¿›ç¨‹ã€åˆ‡æ¢åº”ç”¨ï¼‰éƒ½æŒæ¡åœ¨ç³»ç»Ÿæ ¸å¿ƒè¿›ç¨‹ï¼ˆsystem_serverï¼‰æˆ–æ¡Œé¢å¯åŠ¨å™¨ï¼ˆLauncherï¼‰æ‰‹ä¸­ã€‚</p>
<p>å¦‚æœæŠŠ Android ç³»ç»Ÿæ¯”ä½œä¸€å®¶å¤§å…¬å¸ï¼š</p>
<ul>
<li><strong>SystemUI</strong> æ˜¯å‰å°æ¥å¾…å‘˜ï¼ˆè´Ÿè´£å±•ç¤ºå’Œç®€å•äº¤äº’ï¼‰ã€‚</li>
<li><strong>Framework (system_server)</strong> æ˜¯æ€»ç»ç†å’Œå„ä¸ªèŒèƒ½éƒ¨é—¨ï¼ˆæŒæ¡æ ¸å¿ƒæƒåŠ›å’Œæ•°æ®ï¼‰ã€‚</li>
<li><strong>Launcher</strong> æ˜¯æ¡£æ¡ˆå®¤ç®¡ç†å‘˜ï¼ˆç®¡ç†åº”ç”¨åˆ—è¡¨å’Œä»»åŠ¡æ ˆï¼‰ã€‚</li>
</ul>
<p>å‰å°æ¥å¾…å‘˜è¦å®Œæˆå·¥ä½œï¼Œå°±å¿…é¡»æ—¶åˆ»ä¿æŒä¸æ€»ç»ç†å’Œæ¡£æ¡ˆç®¡ç†å‘˜çš„é€šè¯ã€‚è¿™ç§â€œé€šè¯â€æœºåˆ¶ï¼Œå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦æ·±æŒ–çš„ <strong>IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰</strong> ï¼Œè€Œåœ¨ Android ä¸­ï¼Œå…¶åŸºçŸ³ä¾¿æ˜¯ <strong>Binder</strong>ã€‚</p>
<h2 data-id="heading-1">ğŸŒ‰ 0x01. æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰ï¼šä¸ Launcher/Recents çš„é€šä¿¡ï¼ˆå¤šä»»åŠ¡ç®¡ç†ï¼‰</h2>
<h3 data-id="heading-2">èƒŒæ™¯</h3>
<p>åœ¨ Android 9.0 (Pie) ä¹‹å‰ï¼Œâ€œæœ€è¿‘ä»»åŠ¡â€ (Recents) ç•Œé¢é€šå¸¸ç”± SystemUI è‡ªå·±ç»˜åˆ¶ã€‚ä½†ä¸ºäº†å®ç°æ‰‹åŠ¿æ“ä½œä¸­â€œä»åº”ç”¨å¹³æ»‘è¿‡æ¸¡åˆ°æ¡Œé¢â€çš„åŠ¨ç”»æ•ˆæœï¼ŒGoogle å·¥ç¨‹å¸ˆå°† Recents çš„ UI é€»è¾‘ç§»äº¤ç»™äº† <strong>Launcher</strong> è¿›ç¨‹ï¼ˆå³ QuickStepï¼‰ã€‚</p>
<p>è¿™å°±å‡ºç°äº†ä¸€ä¸ªå…¸å‹çš„è·¨è¿›ç¨‹åä½œåœºæ™¯ï¼šç”¨æˆ·åœ¨ SystemUI çš„å¯¼èˆªæ åŒºåŸŸä¸Šæ»‘ -&gt; SystemUI æ•è·æ‰‹åŠ¿ -&gt; é€šçŸ¥ Launcher æ˜¾ç¤º Recents ç•Œé¢å¹¶è·Ÿéšæ‰‹æŒ‡è¿åŠ¨ã€‚</p>
<h3 data-id="heading-3">æŠ€æœ¯è§£æï¼šIOverviewProxy çš„æ¡¥æ¢ä½œç”¨</h3>
<p>SystemUI å’Œ Launcher ä¹‹é—´çš„é€šä¿¡ä¸»è¦ä¾èµ–äºä¸€ä¸ªåä¸º <code>IOverviewProxy</code> çš„ AIDL æ¥å£ã€‚</p>
<ol>
<li>
<p><strong>å»ºç«‹è¿æ¥ï¼š</strong></p>
<ul>
<li>SystemUI å¯åŠ¨æ—¶ï¼Œä¼šé€šè¿‡ <code>OverviewProxyService</code> ç›‘å¬ Launcher æœåŠ¡çš„çŠ¶æ€ã€‚</li>
<li>å½“ Launcher å¯åŠ¨åï¼Œå®ƒä¼šå®ç° <code>IOverviewProxy</code> æ¥å£ï¼Œå¹¶å°†å…¶ Binder å¯¹è±¡ä¼ é€’ç»™ SystemUIã€‚</li>
<li><strong>é€šä¿—ç†è§£ï¼š</strong> Launcher ä¸Šç­äº†ï¼ŒæŠŠè‡ªå·±çš„â€œä¸“çº¿ç”µè¯å·ç â€å‘Šè¯‰äº† SystemUIã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æµå‘ä¸äº¤äº’ï¼š</strong></p>
<ul>
<li><strong>æ‰‹åŠ¿è§¦å‘ï¼š</strong> å½“ä½ åœ¨å¯¼èˆªæ¡ä¸Šæ»‘åŠ¨æ—¶ï¼ŒSystemUI çš„å¯¼èˆªæ ç»„ä»¶æ•è·è§¦æ‘¸äº‹ä»¶ã€‚</li>
<li><strong>Binder è°ƒç”¨ï¼š</strong> SystemUI é€šè¿‡æŒæœ‰çš„ <code>IOverviewProxy</code> ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ Launcher ä¸­çš„æ–¹æ³•ï¼ˆå¦‚ <code>onOverviewShown()</code> æˆ– <code>onMotionDown()</code>ï¼‰ã€‚</li>
<li><strong>UI å“åº”ï¼š</strong> Launcher æ¥æ”¶åˆ°æŒ‡ä»¤ï¼Œå¼€å§‹ç»˜åˆ¶ Recents çš„ç¼©ç•¥å›¾ï¼Œå¹¶æ ¹æ®æ‰‹æŒ‡ä½ç½®æ›´æ–°åŠ¨ç”»ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    autonumber
    %% å‚ä¸è€…å®šä¹‰
    participant SysUI as SystemUIè¿›ç¨‹&lt;br/&gt;(OverviewProxyService)
    participant BinderDriver as Binderé©±åŠ¨&lt;br/&gt;(Kernel)
    participant Launcher as Launcherè¿›ç¨‹&lt;br/&gt;(TouchInteractionService)

    %% --- é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥ (Binding) ---
    rect rgb(240, 248, 255)
        note right of SysUI: é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥ (Binding)
        SysUI-&gt;&gt;SysUI: ç³»ç»Ÿå¯åŠ¨ï¼Œåˆå§‹åŒ–æœåŠ¡
        SysUI-&gt;&gt;BinderDriver: bindService(Intent=&amp;#34;android.intent.action.QUICKSTEP_SERVICE&amp;#34;)
        BinderDriver-&gt;&gt;Launcher: å”¤é†’ Launcher è¿›ç¨‹
        Launcher-&gt;&gt;Launcher: onCreate() -&gt; onBind()
        note right of Launcher: åˆ›å»º IOverviewProxy.Stub å®ä½“
        Launcher--&gt;&gt;BinderDriver: è¿”å› Binder å¯¹è±¡
        BinderDriver--&gt;&gt;SysUI: onServiceConnected(IBinder)
        note right of SysUI: å°† IBinder è½¬æ¢ä¸º IOverviewProxy å¯¹è±¡
    end

    %% --- é˜¶æ®µäºŒï¼šåŒå‘æ¡æ‰‹ (Handshake) ---
    rect rgb(255, 250, 240)
        note right of SysUI: é˜¶æ®µäºŒï¼šåŒå‘æ¡æ‰‹ (Handshake)
        note over SysUI, Launcher: SystemUI ä¹Ÿéœ€è¦æŠŠè‡ªå·±çš„æ¥å£ç»™ Launcher
        SysUI-&gt;&gt;SysUI: åˆ›å»º ISystemUiProxy (å®ç°è€…)
        SysUI-&gt;&gt;Launcher: è°ƒç”¨ IOverviewProxy.onInitialize(ISystemUiProxy)
        Launcher-&gt;&gt;Launcher: ä¿å­˜ SystemUI çš„ä»£ç†å¯¹è±¡
        note right of Launcher: è‡³æ­¤ï¼ŒåŒæ–¹å»ºç«‹äº†åŒå‘é€šä¿¡é€šé“
    end

    %% --- é˜¶æ®µä¸‰ï¼šè¿è¡Œæ—¶é€šä¿¡ (Runtime IPC) ---
    rect rgb(240, 255, 240)
        note right of SysUI: é˜¶æ®µä¸‰ï¼šæ‰‹åŠ¿äº¤äº’ (Runtime)
        
        participant User as ç”¨æˆ·æ‰‹æŒ‡
        User-&gt;&gt;SysUI: åœ¨å¯¼èˆªæ ä¸Šæ»‘ (Touch Event)
        SysUI-&gt;&gt;SysUI: InputMonitor æ•è·äº‹ä»¶
        
        note over SysUI, Launcher: è·¨è¿›ç¨‹è°ƒç”¨å¼€å§‹
        SysUI-&gt;&gt;BinderDriver: mOverviewProxy.onMotionDown()
        BinderDriver-&gt;&gt;Launcher: ä¼ è¾“æ•°æ® (Parcel)
        Launcher-&gt;&gt;Launcher: Stub.onMotionDown()
        
        Launcher-&gt;&gt;Launcher: ç»˜åˆ¶ Recents åŠ¨ç”» (è·Ÿéšæ‰‹æŒ‡)
        Launcher--&gt;&gt;User: ç•Œé¢æ›´æ–° (UI Feedback)
    end
</code></pre>
<h4 data-id="heading-4">A. è¯·æ±‚è¿æ¥ (Connection)</h4>
<ul>
<li><strong>SystemUI ç«¯</strong>ï¼šä½¿ç”¨ <code>Context.bindService()</code> ç»‘å®š Launcher çš„<strong>Service</strong> (<code>TouchInteractionService</code>)ã€‚</li>
<li><strong>Launcher ç«¯</strong>ï¼šåœ¨ <code>onBind()</code> ä¸­è¿”å› <code>mTISBinder</code>ã€‚è¿™ä¸ª Binder å¯¹è±¡ç»§æ‰¿è‡ª <code>IOverviewProxy.Stub</code>ã€‚</li>
</ul>
<p>SystemUI ç«¯åœ¨ <code>OverviewProxyService</code> ä¸ Launcher å»ºç«‹è¿æ¥å¹¶æŠŠSystemUIçš„ä»£ç†å¯¹è±¡ä¼ ç»™Launcherï¼Œå…¶ä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// SystemUI è¿›ç¨‹å»ºç«‹è¿æ¥çš„æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startConnectionToCurrentUser</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (mHandler.getLooper() != Looper.myLooper()) {
        mHandler.post(mConnectionRunnable);
    } <span class="hljs-keyword">else</span> {
        internalConnectToCurrentUser();
    }
}
<span class="hljs-comment">// å®é™…å‘èµ·è¿æ¥çš„é€»è¾‘</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">internalConnectToCurrentUser</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-comment">// æŸ¥è¯¢ Launcher çš„æœåŠ¡Actionå®é™…ä¸Šå°±æ˜¯Launcher è¿›ç¨‹ä¸­ Manifestä¸­å®šä¹‰çš„</span>
    <span class="hljs-comment">// &amp;#34;android.intent.action.QUICKSTEP_SERVICE&amp;#34;</span>
    <span class="hljs-type">Intent</span> <span class="hljs-variable">launcherServiceIntent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(ACTION_QUICKSTEP)
            .setPackage(mRecentsComponentName.getPackageName());
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1.ç»‘å®šæœåŠ¡ï¼ŒSystemUI è¯·æ±‚æœåŠ¡ï¼Œå°†è·å– Launcher ä¸­çš„ IOverviewProxy ä»£ç†å¯¹è±¡</span>
        mBound = mContext.bindServiceAsUser(launcherServiceIntent,
                mOverviewServiceConnection,
                Context.BIND_AUTO_CREATE | Context.BIND_FOREGROUND_SERVICE_WHILE_AWAKE,
                UserHandle.of(getCurrentUserId()));
    } <span class="hljs-keyword">catch</span> (SecurityException e) {
        Log.e(TAG_OPS, &amp;#<span class="hljs-number">34</span>;Unable to bind because of security error&amp;#<span class="hljs-number">34</span>;, e);
    }
    <span class="hljs-comment">//...</span>
}

<span class="hljs-comment">// æœåŠ¡è¿æ¥ç›‘å¬</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ServiceConnection</span> <span class="hljs-variable">mOverviewServiceConnection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConnection</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span> {
        <span class="hljs-comment">//...</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. ç›‘å¬è¿æ¥é“¾è·¯çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœæœåŠ¡æ­»äº¡åˆ™é‡æ–°å‘èµ·è¿æ¥</span>
            service.linkToDeath(mOverviewServiceDeathRcpt, <span class="hljs-number">0</span>);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
           <span class="hljs-comment">//...</span>
        }

        mCurrentBoundedUserId = getCurrentUserId();
        <span class="hljs-comment">// 3. è·å– Launcher å¾—ä»£ç†å¯¹è±¡ IOverviewProxy</span>
        mOverviewProxy = IOverviewProxy.Stub.asInterface(service);

        <span class="hljs-type">Bundle</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>();
        <span class="hljs-comment">// 4. æŠŠ SystemUI çš„ä»£ç†å¯¹è±¡ mSysUiProxy é€šè¿‡ Bundle è¿›è¡Œä¼ è¾“</span>
        params.putBinder(KEY_EXTRA_SYSUI_PROXY, mSysUiProxy.asBinder());
        params.putFloat(KEY_EXTRA_WINDOW_CORNER_RADIUS, mWindowCornerRadius);
        params.putBoolean(KEY_EXTRA_SUPPORTS_WINDOW_CORNERS, mSupportsRoundedCornersOnWindows);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. å»ºç«‹åŒå‘é€šè¡Œï¼ŒæŠŠ SystemUI çš„ä»£ç†å¯¹è±¡ å‘ŠçŸ¥ Launcher</span>
            <span class="hljs-comment">// è‡³æ­¤ SystemUI ä¸ Launcher éƒ½è·å¾—äº†å¯¹æ–¹çš„ä»£ç†å¯¹è±¡</span>
            <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªä¸¤ä¸ªè¿›ç¨‹åŒå‘é€šè¡Œã€ä¿æ´»æœºåˆ¶çš„æ ‡å‡†å®ç°æ–¹å¼ï¼Œå®é™…é¡¹ç›®ä¸­è¯·ç›´æ¥ç…§æŠ„æ­¤æ¨¡å¼ï¼</span>
            mOverviewProxy.onInitialize(params);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            mCurrentBoundedUserId = -<span class="hljs-number">1</span>;
            Log.e(TAG_OPS, &amp;#<span class="hljs-number">34</span>;Failed to call <span class="hljs-title function_">onInitialize</span><span class="hljs-params">()</span>&amp;#<span class="hljs-number">34</span>;, e);
        }
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-comment">//... çœç•¥ä»£ç </span>
};

</code></pre>
<p>Launcher ç«¯åœ¨ <code>TouchInteractionService</code> å®ç°äº†<code>IOverviewProxy.Stub</code> æ¥å£ï¼Œä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TISBinder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IOverviewProxy</span>.Stub {

        <span class="hljs-meta">@BinderThread</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInitialize</span><span class="hljs-params">(Bundle bundle)</span> {
            <span class="hljs-comment">// è¿™é‡Œç›´æ¥ä»Bundle ä¸­è·å– SystemUI çš„ä»£ç†å¯¹è±¡ å¹¶è½¬æˆ ISystemUiProxy</span>
            <span class="hljs-type">ISystemUiProxy</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> ISystemUiProxy.Stub.asInterface(
                    bundle.getBinder(KEY_EXTRA_SYSUI_PROXY));
               ...
            });
            sIsInitialized = <span class="hljs-literal">true</span>;
        }
        ...
</code></pre>
<h4 data-id="heading-5">B. æ•°æ®ä¼ è¾“ (Transaction)</h4>
<p>å½“åœ¨ SystemUI è°ƒç”¨ <code>mOverviewProxy.onOverviewShown()</code> æ—¶ï¼Œåº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><strong>åºåˆ—åŒ– (Marshalling)</strong> ï¼šSystemUI çš„ IOverviewProxy å°†æ–¹æ³• IDï¼ˆå¦‚ <code>TRANSACTION_onOverviewShown</code>ï¼‰å’Œå‚æ•°å†™å…¥ä¸€ä¸ª <code>Parcel</code> å¯¹è±¡ã€‚</li>
<li><strong>é™·å…¥å†…æ ¸ (Kernel Trap)</strong> ï¼šProxy è°ƒç”¨ <code>transact()</code>ï¼Œçº¿ç¨‹æŒ‚èµ·ï¼Œè¿›å…¥ Linux å†…æ ¸æ€ã€‚</li>
<li><strong>é©±åŠ¨æ¬è¿</strong>ï¼šBinder é©±åŠ¨æ‰¾åˆ° Launcher è¿›ç¨‹ï¼Œå°†æ•°æ®ä» SystemUI çš„å†…å­˜ç©ºé—´æ‹·è´ï¼ˆæ˜ å°„ï¼‰åˆ° Launcher çš„å†…å­˜ç©ºé—´ã€‚</li>
<li><strong>åˆ†å‘ (Dispatch)</strong> ï¼šLauncher è¿›ç¨‹ä¸­çš„ Binder çº¿ç¨‹æ± è¢«å”¤é†’ï¼Œæ”¶åˆ°æ•°æ®ã€‚</li>
<li><strong>æ‰§è¡Œ (Execution)</strong> ï¼šLauncher çš„ Stub è°ƒç”¨ <code>onTransact()</code>ï¼Œè§£æå‡ºæ˜¯å“ªä¸ªæ–¹æ³•ï¼Œç„¶åè°ƒç”¨ <code>TouchInteractionService</code> ä¸­å…·ä½“çš„ <code>onOverviewShown()</code> å®ç°é€»è¾‘ã€‚</li>
</ol>
<h4 data-id="heading-6">C. åŒå‘é€šä¿¡ (Bi-directional)</h4>
<p>æ³¨æ„å›¾ä¸­ <strong>é˜¶æ®µäºŒ</strong> çš„â€œæ¡æ‰‹â€ã€‚</p>
<ul>
<li>Launcher ä¸ä»…ä»…æ˜¯è¢«æ§åˆ¶ï¼Œå®ƒæœ‰æ—¶ä¹Ÿéœ€è¦æ§åˆ¶ SystemUIï¼ˆä¾‹å¦‚ï¼šåœ¨å¤šä»»åŠ¡ç•Œé¢ç‚¹å‡»â€œåˆ†å±â€ï¼ŒLauncher éœ€è¦é€šçŸ¥ SystemUI è¿›å…¥åˆ†å±æ¨¡å¼ï¼‰ã€‚</li>
<li>å› æ­¤ï¼ŒSystemUI è¿æ¥ä¸Š Launcher åï¼Œç«‹åˆ»è°ƒç”¨ <code>onInitialize(ISystemUiProxy proxy)</code>ï¼ŒæŠŠ<strong>è‡ªå·±çš„ Binder</strong> ä¼ ç»™ Launcherã€‚</li>
<li>è¿™æ ·ï¼Œ<strong>åŒæ–¹æ‰‹ä¸­éƒ½æ¡ç€å¯¹æ–¹çš„â€œé¥æ§å™¨â€ï¼ˆBinder ä»£ç†å¯¹è±¡ï¼‰</strong> ï¼Œéƒ½å¯ä»¥ç»™å¯¹æ–¹å‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<h2 data-id="heading-7">ğŸ“ 0x02. æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼ˆäºŒï¼‰ï¼šä¸ Framework çš„é€šä¿¡ï¼ˆCommandQueueï¼‰</h2>
<h3 data-id="heading-8">èƒŒæ™¯</h3>
<p>Framework å±‚ï¼ˆä¸»è¦æ˜¯ <code>system_server</code> è¿›ç¨‹ï¼‰åŒ…å«ç€ Android çš„å¤§è„‘ï¼Œå¦‚ <code>WindowManagerService</code> (WMS) å’Œ <code>StatusBarManagerService</code>ã€‚å½“ç³»ç»ŸçŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶â€”â€”ä¾‹å¦‚ç”µè¯æ¥äº†éœ€è¦å…¨å±é€šçŸ¥ï¼Œæˆ–è€…åº”ç”¨è¯·æ±‚éšè—çŠ¶æ€æ ï¼ˆæ²‰æµ¸æ¨¡å¼ï¼‰â€”â€”Framework éœ€è¦â€œå‘½ä»¤â€ SystemUI æ›´æ–°ç•Œé¢ã€‚</p>
<h3 data-id="heading-9">CommandQueue æ·±åº¦è§£æ</h3>
<p><strong>CommandQueue</strong> æ˜¯ SystemUI ä¸­æå…¶å…³é”®çš„ä¸€ä¸ªç±»ï¼Œå®ƒæ˜¯ Framework å‘ SystemUI å‘å·æ–½ä»¤çš„â€œæ€»çº¿â€ã€‚</p>
<h4 data-id="heading-10">1. å®šä¹‰ä¸åŸç†</h4>
<ul>
<li><strong>æœ¬è´¨ï¼š</strong> <code>CommandQueue</code> ç»§æ‰¿è‡ª <code>IStatusBar.Stub</code>ã€‚è¿™æ„å‘³ç€å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>Binder æœ¬åœ°å¯¹è±¡</strong>ã€‚</li>
<li><strong>ä½ç½®ï¼š</strong> å®ƒè¿è¡Œåœ¨ SystemUI è¿›ç¨‹ä¸­ã€‚</li>
<li><strong>ä½œç”¨ï¼š</strong> å®ƒæ˜¯ SystemUI åœ¨ Binder é€šä¿¡ä¸­çš„â€œæ¥æ”¶ç«¯â€ã€‚</li>
</ul>
<p>åœ¨ SystemUI ç«¯ <code>CommandQueue</code> ç›‘å¬åˆ° Framework çš„é€šçŸ¥åé€šè¿‡ Handler è¿›è¡Œåˆ†å‘ï¼Œå…¶ä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandQueue</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IStatusBar</span>.Stub {
    
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">animateCollapsePanels</span><span class="hljs-params">(<span class="hljs-type">int</span> flags, <span class="hljs-type">boolean</span> force)</span> {
        <span class="hljs-keyword">synchronized</span> (mLock) {
            mHandler.removeMessages(MSG_COLLAPSE_PANELS);
            mHandler.obtainMessage(MSG_COLLAPSE_PANELS, flags, force ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>).sendToTarget();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">togglePanel</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (mLock) {
            mHandler.removeMessages(MSG_TOGGLE_PANEL);
            mHandler.obtainMessage(MSG_TOGGLE_PANEL, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>).sendToTarget();
        }
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>CommandQueue</code> ä½œä¸º SystemUI çš„æœåŠ¡ç«¯æ¥å£ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•å‘ŠçŸ¥ Framework ä¸­çš„ <code>system_server</code> è¿›ç¨‹çš„å‘¢?</p>
<p>ç­”æ¡ˆæ˜¯åœ¨ <code>StatusBar</code> æˆ–è€…é«˜ç‰ˆæœ¬çš„ <code>CentralSurfacesImpl</code> çš„ <code>start()</code> ä¸­ï¼Œé€šè¿‡ç³»ç»ŸæœåŠ¡ <code>StatusBarService</code> è¿›è¡Œä¼ é€’çš„ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
    ...
    <span class="hljs-comment">// è¿™é‡Œé€šè¿‡ ServiceManager è·å–åˆ° StatusBarService çš„å¯¹è±¡</span>
    mBarService = IStatusBarService.Stub.asInterface(
          ServiceManager.getService(Context.STATUS_BAR_SERVICE));
    ...
    
    <span class="hljs-type">RegisterStatusBarResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ç„¶åé€šè¿‡ registerStatusBar æ–¹æ³•æŠŠ CommandQueue å¯¹è±¡ä¼ è¾“åˆ°</span>
        <span class="hljs-comment">// system_server è¿›ç¨‹ï¼Œè¿™æ ·system_server å°±å¯ä»¥ä¸ SystemUI è¿›è¡Œé€šä¿¡äº†</span>
        result = mBarService.registerStatusBar(mCommandQueue);
    } <span class="hljs-keyword">catch</span> (RemoteException ex) {
        ex.rethrowFromSystemServer();
    }

    createAndAddWindows(result);

    ...
}
</code></pre>
<h4 data-id="heading-11">2. æ•°æ®æµå‘</h4>
<ol>
<li>
<p><strong>å‘é€æŒ‡ä»¤ (Framework)ï¼š</strong></p>
<ul>
<li>å½“ App è°ƒç”¨ <code>setSystemUiVisibility()</code> è¯·æ±‚å…¨å±æ—¶ï¼ŒWMS ä¼šå¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li>WMS é€šè¿‡ <code>StatusBarManagerService</code> æ‰¾åˆ° SystemUI æ³¨å†Œè¿‡æ¥çš„ Binder ä»£ç†ï¼ˆå³ <code>IStatusBar</code> æ¥å£ï¼‰ã€‚</li>
<li>è°ƒç”¨ <code>bar.setSystemUiVisibility(...)</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>è·¨è¿›ç¨‹ä¼ è¾“ (Binder)ï¼š</strong></p>
<ul>
<li>æŒ‡ä»¤é€šè¿‡ Binder é©±åŠ¨ä» <code>system_server</code> ä¼ è¾“åˆ° SystemUI è¿›ç¨‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¥æ”¶ä¸åˆ†å‘ (SystemUI)ï¼š</strong></p>
<ul>
<li><code>CommandQueue</code> æ¥æ”¶åˆ° Binder è°ƒç”¨ã€‚</li>
<li><strong>å…³é”®ç‚¹ï¼š</strong> Binder è°ƒç”¨é€šå¸¸å‘ç”Ÿåœ¨ Binder çº¿ç¨‹æ± ä¸­ï¼Œä¸èƒ½ç›´æ¥æ›´æ–° UIã€‚å› æ­¤ï¼Œ<code>CommandQueue</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>Handler</code>ï¼Œå°†è¿™äº›æŒ‡ä»¤å°è£…æˆ Messageï¼Œå‘é€åˆ° SystemUI çš„<strong>ä¸»çº¿ç¨‹ (Main Thread)</strong> é˜Ÿåˆ—ä¸­æ’é˜Ÿæ‰§è¡Œã€‚</li>
<li>æœ€ç»ˆï¼ŒSystemUI çš„å„ä¸ªç»„ä»¶ï¼ˆå¦‚ <code>StatusBar</code> ç±»ï¼‰é€šè¿‡å›è°ƒæ¥å£ï¼ˆ<code>Callbacks</code>ï¼‰å“åº”è¿™äº›å˜åŒ–ï¼Œæ›´æ–°å›¾æ ‡æˆ–éšè—å¯¼èˆªæ ã€‚</li>
</ul>
</li>
</ol>
<p>å®ƒä»¬ä¸‰è€…çš„å…³ç³»æ—¶åºå›¾ä¸º</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    autonumber

    participant SysUI as SystemUIè¿›ç¨‹&lt;br/&gt;(CommandQueue)
    participant SBMS as SystemServer&lt;br/&gt;(StatusBarManagerService)
    participant BinderDriver as Binderé©±åŠ¨/ServiceManager

    Note over SysUI: SystemUI è¿›ç¨‹å¯åŠ¨
    
    %% --- é˜¶æ®µä¸€ï¼šCommandQueue å¯¹è±¡åˆ›å»ºä¸åˆå§‹åŒ– ---
    SysUI-&gt;&gt;SysUI: åˆ›å»º CommandQueue å®ä¾‹
    Note right of SysUI: CommandQueue ç»§æ‰¿ IStatusBar.Stub&lt;br/&gt;(SystemUI çš„ Binder å®ä½“)
    
    %% --- é˜¶æ®µäºŒï¼šå‘ SystemServer æ³¨å†ŒæœåŠ¡ ---
    Note over SysUI, SBMS: SystemUI å°†è‡ªèº« Stub å¯¹è±¡æ³¨å†Œåˆ° Framework
    
    SysUI-&gt;&gt;SBMS: getSystemService(STATUS_BAR_SERVICE)&lt;br/&gt;(è·å– SBMS ä»£ç†)
    
    SysUI-&gt;&gt;SBMS: registerStatusBar(IStatusBar.Stub)
    
    %% 3. Binder ä¼ è¾“
    Note right of SBMS: SBMS æ¥æ”¶ Stub å¯¹è±¡&lt;br/&gt;å¹¶è½¬æ¢ä¸º IStatusBar ä»£ç†
    
    SBMS-&gt;&gt;SBMS: ä¿å­˜ IStatusBar ä»£ç†å¼•ç”¨ (mCallbacks)
    
    Note over SBMS, SysUI: è¿æ¥å»ºç«‹å®Œæˆï¼š&lt;br/&gt;SystemServer ç°æŒæœ‰ SystemUI çš„â€œé¥æ§å™¨â€
    
    %% --- é˜¶æ®µä¸‰ï¼šåç»­æŒ‡ä»¤å‡†å¤‡å°±ç»ª ---
    SBMS-&gt;&gt;SysUI: (è¿æ¥ç¡®è®¤ï¼Œä½†æ— è¿”å›å€¼)
    
    loop åç»­æŒ‡ä»¤å‘é€
        SBMS-&gt;&gt;SysUI: IStatusBar.disable(StateFlags)&lt;br/&gt;(é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨)
        SysUI-&gt;&gt;SysUI: CommandQueue æ¥æ”¶å¹¶å¤„ç†æŒ‡ä»¤
    end
</code></pre>
<h3 data-id="heading-12">åº”ç”¨å®ä¾‹ï¼šæ²‰æµ¸æ¨¡å¼</h3>
<p>å½“ä½ åœ¨çœ‹è§†é¢‘æ—¶ï¼ŒApp è¯·æ±‚éšè—çŠ¶æ€æ ï¼š</p>
<ol>
<li><strong>App</strong> -&gt; <code>View.setSystemUiVisibility(SYSTEM_UI_FLAG_FULLSCREEN)</code></li>
<li><strong>WMS</strong> (Framework) è®¡ç®—å‡ºæ–°çš„æ ‡å¿—ä½ã€‚</li>
<li><strong>Binder</strong> è°ƒç”¨ <code>IStatusBar.setSystemUiVisibility</code>ã€‚</li>
<li><strong>SystemUI</strong> çš„ <code>CommandQueue</code> æ”¶åˆ°è°ƒç”¨ -&gt; åˆ‡å›ä¸»çº¿ç¨‹ -&gt; é€šçŸ¥çŠ¶æ€æ  View æ’­æ”¾æ·¡å‡ºåŠ¨ç”»ã€‚</li>
</ol>
<p><strong>æ€»ç»“ï¼š</strong><br/>
æœ¬æ–‡è®²è§£ SystemUI ä¸­ä¸¤ç§æ¯”è¾ƒå¸¸è§çš„ Binder çš„ä¸šåŠ¡ï¼š</p>
<ul>
<li>ä¸ç³»ç»Ÿå±‚ Framework é€šä¿¡ï¼ˆCommandQueueæœºåˆ¶ï¼‰</li>
<li>ä¸Appå±‚ Launcher é€šä¿¡ï¼ˆåŒå‘é€šä¿¡ï¼‰</li>
</ul>
<p>æŒæ¡ SystemUI çš„ IPC æœºåˆ¶ï¼Œæ˜¯ç†è§£ Android ç³»ç»Ÿäº¤äº’é€»è¾‘çš„é’¥åŒ™ï¼Œä¹Ÿæ˜¯è¿›è¡Œæ·±åº¦ç³»ç»Ÿå®šåˆ¶çš„å¿…ç»ä¹‹è·¯ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºæ‚¨æ­å¼€è¿™å±‚ç¥ç§˜çš„é¢çº±ã€‚<br/>
ä¸‹ä¸€ç¯‡å°†å‰–ææ›´ä¸ºå¤æ‚ç²¾å¦™çš„<strong>å…¨é¢å±æ‰‹åŠ¿å¯¼èˆª</strong>çš„æœºåˆ¶ï¼Œè¿™é‡Œä¸ä»…æœ‰è¿›ç¨‹é—´é€šä¿¡è¿˜æœ‰å„ç§äº‹ä»¶çš„åœ¨ä¸åŒåº”ç”¨çš„åˆ†å‘ä¼ é€’ä¸åè°ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ]]></title>    <link>https://juejin.cn/post/7582067084840304694</link>    <guid>https://juejin.cn/post/7582067084840304694</guid>    <pubDate>2025-12-10T15:48:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840304694" data-draft-id="7582047623739080758" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ"/> <meta itemprop="keywords" content="iOS,å›¾ç‰‡èµ„æº"/> <meta itemprop="datePublished" content="2025-12-10T15:48:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sweetä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/3227821869921646"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821869921646/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sweetä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:48:23.000Z" title="Wed Dec 10 2025 15:48:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œå›¾ç‰‡åŠ è½½å’Œç¼“å­˜æ˜¯å½±å“ç”¨æˆ·ä½“éªŒçš„å…³é”®ç¯èŠ‚ã€‚SDWebImageä½œä¸ºiOSå¹³å°ä¸Šæœ€å—æ¬¢è¿çš„å›¾ç‰‡åŠ è½½åº“ï¼Œä»¥å…¶é«˜æ€§èƒ½ã€ä¸°å¯Œçš„åŠŸèƒ½å’Œç¨³å®šçš„è¡¨ç°èµ¢å¾—äº†å…¨çƒå¼€å‘è€…çš„ä¿¡èµ–ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨SDWebImageçš„æ ¸å¿ƒåŸç†ã€æ¶æ„è®¾è®¡ï¼Œå¹¶è§£ç­”å®é™…ä½¿ç”¨ä¸­çš„å¸¸è§é—®é¢˜ã€‚</p>
</blockquote>
<h3 data-id="heading-0">ä¸€ã€æ•´ä½“æ¶æ„è®¾è®¡ï¼šæ¨¡å—åŒ–ä¸èŒè´£åˆ†ç¦»</h3>
<p>ä¸ºäº†è®©ä½ èƒ½è¿…é€ŸæŠ“ä½æ ¸å¿ƒï¼Œæˆ‘ä»¬å…ˆç”¨ä¸€å¼ å›¾ï¼Œä»å®è§‚è§†è§’çœ‹æ‡‚å®ƒçš„å·¥ä½œåŸç†ä¸æ ¸å¿ƒæµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f7b2aecc97b438bb945a3b1fbefc46a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dlZXTkuLY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765986502&amp;x-signature=KCbOGYB5Ijkfa77oKQtmhsD9WWY%3D" alt="deepseek_mermaid_20251210_9277be.png" loading="lazy"/></p>
<p>SDWebImageé‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå°†å¤æ‚çš„å›¾ç‰‡åŠ è½½è¿‡ç¨‹åˆ†è§£ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼Œå„å¸å…¶èŒï¼š</p>
<p><strong>1. æ ¸å¿ƒåè°ƒè€…ï¼šSDWebImageManager</strong></p>
<p>è¿™æ˜¯SDWebImageçš„"å¤§è„‘"ï¼Œè´Ÿè´£åè°ƒç¼“å­˜æŸ¥æ‰¾ã€ä¸‹è½½å’Œå›¾ç‰‡å¤„ç†æµç¨‹ã€‚å®ƒä½¿ç”¨ç»„åˆæ¨¡å¼å°†<code>SDImageCache</code>å’Œ<code>SDWebImageDownloader</code>ç»„åˆåœ¨ä¸€èµ·ï¼Œå®ç°äº†å¯¹å›¾ç‰‡åŠ è½½å…¨ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚</p>
<p><strong>2. ç¼“å­˜æ¨¡å—ï¼šSDImageCache</strong>
è´Ÿè´£å†…å­˜å’Œç£ç›˜ç¼“å­˜çš„åŒå±‚å­˜å‚¨ã€‚å†…å­˜ç¼“å­˜åŸºäºNSCacheå®ç°ï¼Œæä¾›å¿«é€Ÿè®¿é—®ï¼›ç£ç›˜ç¼“å­˜å°†å›¾ç‰‡æŒä¹…åŒ–å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ”¯æŒè‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ã€‚</p>
<p><strong>3. ä¸‹è½½æ¨¡å—ï¼šSDWebImageDownloader</strong>
åŸºäºNSURLSessionæ„å»ºçš„å¼‚æ­¥ä¸‹è½½å™¨ï¼Œæ”¯æŒå¹¶å‘æ§åˆ¶ã€è¯·æ±‚ä¼˜å…ˆçº§è®¾ç½®å’Œèº«ä»½éªŒè¯ç­‰é«˜çº§åŠŸèƒ½ã€‚å®ƒé€šè¿‡æ“ä½œé˜Ÿåˆ—ç®¡ç†ä¸‹è½½ä»»åŠ¡ï¼Œç¡®ä¿é«˜æ•ˆåˆ©ç”¨ç½‘ç»œèµ„æºã€‚</p>
<p><strong>4. è§£ç ä¸å¤„ç†æ¨¡å—</strong>
è´Ÿè´£å›¾ç‰‡è§£ç ã€ç¼©æ”¾ã€è£å‰ªç­‰åå¤„ç†æ“ä½œã€‚SDWebImageåœ¨åå°çº¿ç¨‹æ‰§è¡Œè¿™äº›æ“ä½œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>5. è§†å›¾æ‰©å±•ï¼šUIImageView+WebCache</strong>
ä¸ºUIKitç»„ä»¶æä¾›çš„ä¾¿æ·æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€è¡Œä»£ç å®ç°å›¾ç‰‡çš„å¼‚æ­¥åŠ è½½å’Œç¼“å­˜ç®¡ç†ã€‚</p>
<p>è¿™ç§æ¨¡å—åŒ–è®¾è®¡ä¸ä»…ä½¿ä»£ç ç»“æ„æ¸…æ™°ï¼Œè¿˜æé«˜äº†åº“çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-1">äºŒã€å›¾ç‰‡è§£ç æœºåˆ¶ï¼šåå°çº¿ç¨‹çš„é«˜æ•ˆå¤„ç†</h3>
<p>iOSç³»ç»Ÿåœ¨æ¸²æŸ“å›¾ç‰‡æ—¶éœ€è¦å°†å…¶è§£ç ä¸ºä½å›¾æ ¼å¼ï¼Œè¿™ä¸ªè¿‡ç¨‹é»˜è®¤åœ¨ä¸»çº¿ç¨‹è¿›è¡Œï¼Œå¯èƒ½å¯¼è‡´ç•Œé¢å¡é¡¿ã€‚SDWebImageå¯¹æ­¤è¿›è¡Œäº†é‡è¦ä¼˜åŒ–ï¼š</p>
<p><strong>è§£ç æ—¶æœºä¸çº¿ç¨‹ç­–ç•¥</strong>
SDWebImageåœ¨å›¾ç‰‡ä»ç£ç›˜åŠ è½½æˆ–ç½‘ç»œä¸‹è½½å®Œæˆåï¼Œç«‹å³åœ¨åå°çº¿ç¨‹è¿›è¡Œè§£ç ã€‚è§£ç å™¨ä½¿ç”¨ä¸“é—¨çš„<code>NSOperationQueue</code>ï¼Œé¿å…äº†è§£ç ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>ç©ºé—´æ¢æ—¶é—´çš„ç¼“å­˜ç­–ç•¥</strong>
è§£ç åçš„ä½å›¾æ•°æ®ä¼šè¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚å½“åŒä¸€å›¾ç‰‡å†æ¬¡è¯·æ±‚æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„è§£ç ç»“æœï¼Œæ— éœ€é‡å¤è§£ç ï¼Œæ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚</p>
<p><strong>æ¸è¿›å¼è§£ç æ”¯æŒ</strong>
å¯¹äºç½‘ç»œä¸‹è½½çš„å¤§å›¾ç‰‡ï¼ŒSDWebImageæ”¯æŒæ¸è¿›å¼è§£ç ã€‚å›¾ç‰‡åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­é€æ­¥æ˜¾ç¤ºï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«åœ°çœ‹åˆ°å›¾ç‰‡å†…å®¹ï¼Œæå‡ç­‰å¾…ä½“éªŒã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€ç¼“å­˜æœºåˆ¶ï¼šæ™ºèƒ½çš„åŒå±‚å­˜å‚¨ç³»ç»Ÿ</h3>
<p>SDWebImageçš„ç¼“å­˜ç³»ç»Ÿæ˜¯å…¶é«˜æ€§èƒ½çš„æ ¸å¿ƒä¿éšœï¼š</p>
<p><strong>1. å†…å­˜ç¼“å­˜ï¼ˆMemory Cacheï¼‰</strong>
åŸºäºNSCacheå®ç°ï¼Œå…·æœ‰è‡ªåŠ¨æ¸…ç†æœºåˆ¶ã€‚å½“ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶ï¼ŒNSCacheä¼šè‡ªåŠ¨é‡Šæ”¾éƒ¨åˆ†ç¼“å­˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSDWebImageä¸é™åˆ¶å†…å­˜ç¼“å­˜å¤§å°ï¼Œä½†æ”¯æŒé€šè¿‡<code>totalCostLimit</code>å’Œ<code>countLimit</code>è¿›è¡Œè‡ªå®šä¹‰é™åˆ¶ã€‚</p>
<p><strong>2. ç£ç›˜ç¼“å­˜ï¼ˆDisk Cacheï¼‰</strong>
å›¾ç‰‡ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨Cacheç›®å½•ä¸­ï¼Œæ–‡ä»¶åç»è¿‡MD5å“ˆå¸Œå¤„ç†ï¼Œç¡®ä¿å”¯ä¸€æ€§å’Œå®‰å…¨æ€§ã€‚</p>
<p><strong>3. é»˜è®¤æœ€å¤§ç¼“å­˜å¤§å°</strong>
SDWebImageé»˜è®¤çš„ç£ç›˜ç¼“å­˜å¤§å°ä¸º<strong>100MB</strong>ã€‚å½“ç¼“å­˜è¶…è¿‡æ­¤é™åˆ¶æ—¶ï¼ŒSDWebImageä¼šåŸºäºæ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´è¿›è¡Œæ¸…ç†ï¼Œä¼˜å…ˆç§»é™¤æœ€ä¹…æœªè®¿é—®çš„å›¾ç‰‡ã€‚è¿™ä¸€è®¾ç½®å¯ä»¥åœ¨<code>SDImageCacheConfig</code>ä¸­è‡ªå®šä¹‰ã€‚</p>
<h3 data-id="heading-3">å››ã€ç¼“å­˜æ¸…ç†æœºåˆ¶ï¼šçµæ´»çš„èµ„æºç®¡ç†</h3>
<p>SDWebImageæä¾›äº†å¤šç§ç¼“å­˜æ¸…ç†æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼š</p>
<p><strong>1. è‡ªåŠ¨æ¸…ç†æœºåˆ¶</strong></p>
<ul>
<li><strong>åŸºäºæ—¶é—´çš„æ¸…ç†</strong>ï¼šé»˜è®¤é…ç½®ä¸‹ï¼ŒSDWebImageä¼šè‡ªåŠ¨æ¸…ç†è¶…è¿‡ä¸€å‘¨çš„ç¼“å­˜æ–‡ä»¶</li>
<li><strong>åŸºäºå¤§å°çš„æ¸…ç†</strong>ï¼šå½“ç¼“å­˜è¶…è¿‡è®¾å®šçš„å¤§å°æ—¶ï¼Œè‡ªåŠ¨æ¸…ç†æœ€æ—§çš„å›¾ç‰‡æ–‡ä»¶</li>
</ul>
<p><strong>2. æ‰‹åŠ¨æ¸…ç†æ¥å£</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å†…å­˜ç¼“å­˜</span>
[[SDImageCache sharedImageCache] clearMemory];

<span class="hljs-comment">// æ¸…ç†æ‰€æœ‰ç£ç›˜ç¼“å­˜ï¼ˆå¼‚æ­¥ï¼‰</span>
[[SDImageCache sharedImageCache] clearDiskOnCompletion:<span class="hljs-literal">nil</span>];

<span class="hljs-comment">// æ¸…ç†è¿‡æœŸçš„ç£ç›˜ç¼“å­˜ï¼ˆå¼‚æ­¥ï¼‰</span>
[[SDImageCache sharedImageCache] deleteOldFilesWithCompletionBlock:<span class="hljs-literal">nil</span>];
</code></pre>
<p><strong>3. ç»†ç²’åº¦æ§åˆ¶</strong>
å¼€å‘è€…å¯ä»¥é’ˆå¯¹ç‰¹å®šURLæˆ–keyæ¸…ç†ç¼“å­˜ï¼Œå®ç°æ›´ç²¾å‡†çš„ç¼“å­˜ç®¡ç†ã€‚</p>
<h3 data-id="heading-4">äº”ã€åŠ¨æ€å›¾æ”¯æŒï¼šä»GIFåˆ°ç°ä»£åŠ¨ç”»æ ¼å¼</h3>
<p>SDWebImageå¯¹åŠ¨æ€å›¾çš„æ”¯æŒç»å†äº†æ˜¾è‘—çš„æ¼”è¿›ï¼š</p>
<p><strong>æ—©æœŸæ–¹æ¡ˆ</strong>
æ—©æœŸç‰ˆæœ¬é€šè¿‡å°†GIFåˆ†è§£ä¸ºå¸§åºåˆ—ï¼Œä½¿ç”¨UIImageçš„åŠ¨ç”»APIæ’­æ”¾ï¼Œè¿™ç§æ–¹å¼å†…å­˜å ç”¨é«˜ä¸”åŠŸèƒ½æœ‰é™ã€‚</p>
<p><strong>ç°ä»£æ–¹æ¡ˆï¼šSDAnimatedImageåè®®</strong>
ä»SDWebImage 5.0å¼€å§‹ï¼Œå¼•å…¥äº†<code>SDAnimatedImage</code>åè®®ï¼Œæä¾›äº†ç»Ÿä¸€çš„åŠ¨ç”»å›¾ç‰‡æ¥å£ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼š</p>
<ul>
<li>GIFï¼šå®Œæ•´çš„è§£ç å’Œæ’­æ”¾æ”¯æŒ</li>
<li>APNGï¼šAppleåŸç”Ÿæ”¯æŒçš„åŠ¨ç”»æ ¼å¼</li>
<li>WebPï¼šGoogleçš„é«˜æ•ˆå›¾ç‰‡æ ¼å¼ï¼ˆéœ€è¦é¢å¤–ç¼–ç å™¨ï¼‰</li>
<li>HEICï¼šé«˜æ•ˆçš„ç°ä»£å›¾ç‰‡æ ¼å¼</li>
</ul>
<p><strong>å†…å­˜ä¼˜åŒ–</strong>
<code>SDAnimatedImageView</code>é‡‡ç”¨æƒ°æ€§è§£ç ç­–ç•¥ï¼Œä»…è§£ç å½“å‰æ˜¾ç¤ºå’Œé¢„åŠ è½½çš„å¸§ï¼Œå¤§å¹…é™ä½äº†å†…å­˜å ç”¨ã€‚å¼€å‘è€…è¿˜å¯ä»¥é€šè¿‡<code>maxBufferSize</code>å±æ€§æ§åˆ¶ç¼“å†²å¸§æ•°ï¼Œåœ¨æµç•…åº¦å’Œå†…å­˜æ¶ˆè€—ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</p>
<h3 data-id="heading-5">å…­ã€è§†å›¾å¯è§æ€§è§¦å‘åŠ è½½ï¼šæŒ‰éœ€åŠ è½½çš„æ™ºèƒ½ç­–ç•¥</h3>
<p>åœ¨åˆ—è¡¨ç­‰åœºæ™¯ä¸­ï¼Œå®ç°"è§†å›¾å‡ºç°åœ¨å±å¹•æ‰å¼€å§‹åŠ è½½å›¾ç‰‡"æ˜¯æå‡æ€§èƒ½çš„å…³é”®ã€‚SDWebImageä¸UIKitçš„ååŒå·¥ä½œå®ç°äº†è¿™ä¸€ç›®æ ‡ï¼š</p>
<p><strong>UITableView/UICollectionViewçš„ä¼˜åŒ–åŠ è½½</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åœ¨cellForRowAtIndexPathä¸­è®¾ç½®å›¾ç‰‡</span>
- (<span class="hljs-built_in">UITableViewCell</span> *)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView 
         cellForRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
    <span class="hljs-built_in">UITableViewCell</span> *cell = [tableView dequeueReusableCellWithIdentifier:@&amp;#<span class="hljs-number">34</span>;Cell&amp;#<span class="hljs-number">34</span>;];
    
    <span class="hljs-comment">// è·å–å›¾ç‰‡URL</span>
    <span class="hljs-built_in">NSURL</span> *imageURL = [<span class="hljs-keyword">self</span> imageURLForIndexPath:indexPath];
    
    <span class="hljs-comment">// ä½¿ç”¨SDWebImageåŠ è½½å›¾ç‰‡</span>
    [cell.imageView sd_setImageWithURL:imageURL
                      placeholderImage:[<span class="hljs-built_in">UIImage</span> imageNamed:@&amp;#<span class="hljs-number">34</span>;placeholder&amp;#<span class="hljs-number">34</span>;]
                             completed:^(<span class="hljs-built_in">UIImage</span> *image, <span class="hljs-built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="hljs-built_in">NSURL</span> *imageURL) {
        <span class="hljs-comment">// åŠ è½½å®Œæˆå¤„ç†</span>
    }];
    
    <span class="hljs-keyword">return</span> cell;
}

<span class="hljs-comment">// åœ¨prepareForReuseä¸­å–æ¶ˆæœªå®Œæˆçš„åŠ è½½</span>
- (<span class="hljs-type">void</span>)prepareForReuse {
    [<span class="hljs-variable language_">super</span> prepareForReuse];
    [<span class="hljs-keyword">self</span>.imageView sd_cancelCurrentImageLoad];
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong></p>
<ol>
<li>å½“cellå‡†å¤‡æ˜¾ç¤ºæ—¶ï¼Œ<code>tableView:cellForRowAtIndexPath:</code>è¢«è°ƒç”¨ï¼Œå¼€å§‹å›¾ç‰‡åŠ è½½</li>
<li>å¦‚æœcellæ»šå‡ºå±å¹•ï¼Œ<code>prepareForReuse</code>ä¼šè¢«è°ƒç”¨ï¼Œå–æ¶ˆæœªå®Œæˆçš„å›¾ç‰‡åŠ è½½</li>
<li>SDWebImageå†…éƒ¨ä¼šç®¡ç†åŠ è½½é˜Ÿåˆ—ï¼Œä¼˜å…ˆå¤„ç†å¯è§cellçš„è¯·æ±‚</li>
</ol>
<p><strong>é«˜çº§ä¼˜åŒ–æŠ€å·§</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// 1. é¢„åŠ è½½ï¼šæå‰åŠ è½½å³å°†æ˜¾ç¤ºçš„å›¾ç‰‡</span>
- (<span class="hljs-type">void</span>)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView 
  willDisplayCell:(<span class="hljs-built_in">UITableViewCell</span> *)cell 
forRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
    <span class="hljs-comment">// é¢„åŠ è½½ä¸‹ä¸€æ‰¹å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> (indexPath.row + <span class="hljs-number">5</span> &lt; [<span class="hljs-keyword">self</span>.dataSource count]) {
        <span class="hljs-built_in">NSURL</span> *preloadURL = [<span class="hljs-keyword">self</span> imageURLForIndexPath:[<span class="hljs-built_in">NSIndexPath</span> indexPathForRow:indexPath.row + <span class="hljs-number">5</span> inSection:indexPath.section]];
        [[SDWebImagePrefetcher sharedImagePrefetcher] prefetchURLs:@[preloadURL]];
    }
}

<span class="hljs-comment">// 2. è®¾ç½®ä¸åŒçš„åŠ è½½ä¼˜å…ˆçº§</span>
SDWebImageOptions options = SDWebImageLowPriority | SDWebImageProgressiveLoad;
[cell.imageView sd_setImageWithURL:imageURL placeholderImage:<span class="hljs-literal">nil</span> options:options];
</code></pre>
<h3 data-id="heading-6">ä¸ƒã€é™æ€å›¾ä¸åŠ¨æ€å›¾çš„é€‰æ‹©ç­–ç•¥</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´é€‰æ‹©ï¼šä½¿ç”¨<code>UIImageView</code>è¿˜æ˜¯<code>SDAnimatedImageView</code>ï¼Ÿä»¥ä¸‹æ˜¯æ˜ç¡®çš„æŒ‡å¯¼åŸåˆ™ï¼š</p>
<p><strong>1. é™æ€å›¾ç‰‡åœºæ™¯</strong></p>
<ul>
<li>ä½¿ç”¨æ ‡å‡†çš„<code>UIImageView</code></li>
<li>é€šè¿‡<code>sd_setImageWithURL:</code>æ–¹æ³•åŠ è½½</li>
<li>æ€§èƒ½æœ€ä½³ï¼Œå†…å­˜å ç”¨æœ€ä½</li>
</ul>
<p><strong>2. åŠ¨æ€å›¾ç‰‡åœºæ™¯</strong></p>
<ul>
<li>ä½¿ç”¨<code>SDAnimatedImageView</code></li>
<li>é€šè¿‡<code>sd_setImageWithURL:</code>æ–¹æ³•åŠ è½½ï¼ˆSDWebImageä¼šè‡ªåŠ¨æ£€æµ‹å›¾ç‰‡ç±»å‹ï¼‰</li>
<li>æ”¯æŒGIFã€APNGã€WebPç­‰å¤šç§åŠ¨æ€æ ¼å¼</li>
</ul>
<p><strong>3. æœªçŸ¥å›¾ç‰‡ç±»å‹çš„å¤„ç†ç­–ç•¥</strong>
å½“ä¸ç¡®å®šå›¾ç‰‡æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€æ—¶ï¼Œæ¨èé‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šç»Ÿä¸€ä½¿ç”¨SDAnimatedImageViewï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment">// ä¼˜ç‚¹ï¼šè‡ªåŠ¨é€‚åº”æ‰€æœ‰å›¾ç‰‡ç±»å‹ï¼Œä»£ç ç®€æ´</span>
<span class="hljs-comment">// ç¼ºç‚¹ï¼šå¯¹é™æ€å›¾æœ‰è½»å¾®æ€§èƒ½å¼€é”€</span>
SDAnimatedImageView *imageView = [SDAnimatedImageView new];
[imageView sd_setImageWithURL:imageURL];

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šæ ¹æ®URLæˆ–å“åº”å¤´åŠ¨æ€é€‰æ‹©</span>
<span class="hljs-comment">// åœ¨çŸ¥é“å›¾ç‰‡ç±»å‹çš„æƒ…å†µä¸‹ä¼˜åŒ–æ€§èƒ½</span>
<span class="hljs-keyword">if</span> ([url.pathExtension isEqualToString:@&amp;#<span class="hljs-number">34</span>;gif&amp;#<span class="hljs-number">34</span>;] || 
    [url.absoluteString containsString:@&amp;#<span class="hljs-number">34</span>;animated&amp;#<span class="hljs-number">34</span>;]) {
    <span class="hljs-comment">// ä½¿ç”¨SDAnimatedImageView</span>
    SDAnimatedImageView *animatedImageView = [SDAnimatedImageView new];
    [animatedImageView sd_setImageWithURL:url];
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä½¿ç”¨æ™®é€šUIImageView</span>
    <span class="hljs-built_in">UIImageView</span> *staticImageView = [<span class="hljs-built_in">UIImageView</span> new];
    [staticImageView sd_setImageWithURL:url];
}

<span class="hljs-comment">// æ–¹æ¡ˆ3ï¼šä½¿ç”¨SDWebImageçš„è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½</span>
<span class="hljs-comment">// SDWebImage 5.0+ å¯ä»¥è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡ç±»å‹å¹¶é€‰æ‹©åˆé€‚çš„è§†å›¾</span>
<span class="hljs-built_in">UIImageView</span> *imageView = [<span class="hljs-built_in">UIImageView</span> new];
SDWebImageOptions options = SDWebImageAutoHandleAnimatedImage;
[imageView sd_setImageWithURL:url options:options];
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ä¸å»ºè®®</strong></p>








































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èè§†å›¾</th><th>å†…å­˜å ç”¨</th><th>CPUä½¿ç”¨</th><th>å…¼å®¹æ€§</th></tr></thead><tbody><tr><td>å·²çŸ¥é™æ€å›¾</td><td>UIImageView</td><td>ä½</td><td>ä½</td><td>æœ€ä½³</td></tr><tr><td>å·²çŸ¥åŠ¨æ€å›¾</td><td>SDAnimatedImageView</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>æœªçŸ¥ç±»å‹</td><td>SDAnimatedImageView</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>å¤§é‡é™æ€å›¾åˆ—è¡¨</td><td>UIImageView</td><td>ä½</td><td>ä½</td><td>æœ€ä½³</td></tr></tbody></table>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong></p>
<ol>
<li>å¯¹äºå›¾ç‰‡ç¤¾äº¤åº”ç”¨ï¼ˆå¦‚Instagramï¼‰ï¼Œç”¨æˆ·ä¸Šä¼ å†…å®¹ç±»å‹æœªçŸ¥ï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨<code>SDAnimatedImageView</code></li>
<li>å¯¹äºç”µå•†åº”ç”¨ï¼Œå•†å“ä¸»å›¾å¤§å¤šæ˜¯é™æ€å›¾ï¼Œä½¿ç”¨<code>UIImageView</code>å³å¯</li>
<li>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼ˆå¦‚å¤§è§„æ¨¡å›¾ç‰‡åˆ—è¡¨ï¼‰ï¼Œå¯ä»¥è€ƒè™‘å…ˆè·å–å›¾ç‰‡å…ƒä¿¡æ¯å†å†³å®šè§†å›¾ç±»å‹</li>
</ol>
<h3 data-id="heading-7">å…«ã€é«˜çº§åŠŸèƒ½ä¸å®šåˆ¶æ‰©å±•</h3>
<p><strong>è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰ç¼“å­˜é…ç½®</span>
SDImageCacheConfig *config = [SDImageCacheConfig defaultCacheConfig];
config.maxDiskAge = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>; <span class="hljs-comment">// ä¸€å‘¨</span>
config.maxDiskSize = <span class="hljs-number">200</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 200MB</span>
config.maxMemoryCost = <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 100MBå†…å­˜ç¼“å­˜</span>
config.diskCacheExpireType = SDImageCacheConfigExpireTypeAccessDate; <span class="hljs-comment">// æŒ‰è®¿é—®æ—¶é—´è¿‡æœŸ</span>

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰ç¼“å­˜å®ä¾‹</span>
SDImageCache *customCache = [[SDImageCache alloc] initWithNamespace:@&amp;#<span class="hljs-number">34</span>;Custom&amp;#<span class="hljs-number">34</span>; diskCacheDirectory:customPath config:config];
</code></pre>
<p><strong>å›¾ç‰‡è½¬æ¢å™¨</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åˆ›å»ºåœ†è§’å›¾ç‰‡è½¬æ¢å™¨</span>
SDImageRoundCornerTransformer *transformer = [SDImageRoundCornerTransformer transformerWithRadius:<span class="hljs-number">10</span> corners:<span class="hljs-built_in">UIRectCornerAllCorners</span> borderWidth:<span class="hljs-number">1</span> borderColor:[<span class="hljs-built_in">UIColor</span> whiteColor]];

<span class="hljs-comment">// åŠ è½½æ—¶åº”ç”¨è½¬æ¢å™¨</span>
[imageView sd_setImageWithURL:url placeholderImage:<span class="hljs-literal">nil</span> options:<span class="hljs-number">0</span> context:@{SDWebImageContextImageTransformer: transformer}];
</code></pre>
<h3 data-id="heading-8">ä¹ã€æ€§èƒ½ç›‘æ§ä¸è°ƒè¯•</h3>
<p><strong>å†…å­˜ä½¿ç”¨ç›‘æ§</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-built_in">NSUInteger</span> memCost = [[SDImageCache sharedImageCache] totalMemoryCost];
<span class="hljs-built_in">NSUInteger</span> diskCount = [[SDImageCache sharedImageCache] totalDiskCount];
<span class="hljs-built_in">NSUInteger</span> diskSize = [[SDImageCache sharedImageCache] totalDiskSize];

<span class="hljs-comment">// ç›‘æ§å›¾ç‰‡åŠ è½½æ€§èƒ½</span>
[SDWebImageManager.sharedManager setCacheKeyFilter:^<span class="hljs-built_in">NSString</span> * _Nullable(<span class="hljs-built_in">NSURL</span> * _Nullable url) {
    <span class="hljs-comment">// è®°å½•åŠ è½½æ—¶é—´</span>
    <span class="hljs-built_in">CFTimeInterval</span> startTime = <span class="hljs-built_in">CACurrentMediaTime</span>();
    <span class="hljs-keyword">return</span> [url absoluteString];
}];
</code></pre>
<h3 data-id="heading-9">åã€æ€»ç»“ä¸å±•æœ›</h3>
<p>SDWebImageé€šè¿‡å…¶ç²¾è‰¯çš„æ¶æ„è®¾è®¡ï¼Œåœ¨å›¾ç‰‡åŠ è½½çš„å„ä¸ªå…³é”®ç¯èŠ‚éƒ½åšäº†æ·±åº¦ä¼˜åŒ–ã€‚ä»åå°è§£ç åˆ°æ™ºèƒ½ç¼“å­˜ï¼Œä»åŠ¨æ€å›¾æ”¯æŒåˆ°å¯è§æ€§è§¦å‘åŠ è½½ï¼Œæ¯ä¸€ä¸ªè®¾è®¡å†³ç­–éƒ½ä½“ç°äº†å¯¹æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„æè‡´è¿½æ±‚ã€‚</p>
<p>éšç€iOSå¼€å‘æŠ€æœ¯çš„æ¼”è¿›ï¼ŒSDWebImageä¹Ÿåœ¨ä¸æ–­å‘å±•ã€‚æœªæ¥ï¼Œæˆ‘ä»¬æœŸå¾…çœ‹åˆ°ï¼š</p>
<ol>
<li>å¯¹Swift Concurrencyçš„æ›´å¥½æ”¯æŒ</li>
<li>ä¸SwiftUIçš„æ›´æ·±åº¦é›†æˆ</li>
<li>å¯¹æ–°å‹å›¾ç‰‡æ ¼å¼çš„æ›´å¿«é€‚é…</li>
<li>æ›´æ™ºèƒ½çš„ç¼“å­˜é¢„å–å’Œæ·˜æ±°ç®—æ³•</li>
</ol>
<p>æ— è®ºä½ æ˜¯åˆšåˆšæ¥è§¦SDWebImageçš„æ–°æ‰‹ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±å…¥ä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½çš„èµ„æ·±å¼€å‘è€…ï¼Œç†è§£SDWebImageçš„æ ¸å¿ƒåŸç†éƒ½å°†å¸®åŠ©ä½ æ„å»ºæ›´æµç•…ã€æ›´é«˜æ•ˆçš„iOSåº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡]]></title>    <link>https://juejin.cn/post/7582073642868555791</link>    <guid>https://juejin.cn/post/7582073642868555791</guid>    <pubDate>2025-12-10T15:59:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582073642868555791" data-draft-id="7582073642868539407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡ "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-10T15:59:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´ä½³æµ©"/> <meta itemprop="url" content="https://juejin.cn/user/2696441245481975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2696441245481975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´ä½³æµ©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:59:55.000Z" title="Wed Dec 10 2025 15:59:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e53064d7b28447568f9ce11ce5ee2bec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC05L2z5rWp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987195&amp;x-signature=95wlmXDLbrjvKRrRE1mJMKj01BY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>:ä¸€ä¸ª70B(700äº¿å‚æ•°)çš„å¤§æ¨¡å‹åŸæœ¬éœ€è¦140GBæ˜¾å­˜,æ€ä¹ˆå¡è¿›24GBçš„æ˜¾å¡? <strong>ç­”æ¡ˆ</strong>:é‡åŒ– â€”â€” AIç•Œçš„"å‹ç¼©åŒ…æŠ€æœ¯"</p>
</blockquote>
<p>æƒ³è±¡ä¸€ä¸‹,ä½ æœ‰ä¸€æœ¬ç²¾ç¾çš„4Kç”»å†Œ,ä½†æ‰‹æœºå­˜å‚¨ä¸å¤Ÿã€‚ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©:</p>
<ul>
<li>è½¬æˆJPG(æœ‰æŸä½†èƒ½ç”¨)â†’ è¿™å°±æ˜¯<strong>GGUF</strong></li>
<li>åªä¿ç•™å…³é”®è‰²å—(æ™ºèƒ½å‹ç¼©)â†’ è¿™å°±æ˜¯<strong>AWQ</strong></li>
<li>ç”¨ä¸“ä¸šå·¥å…·æ‰¹é‡è½¬æ¢(é€šç”¨æ–¹æ¡ˆ)â†’ è¿™å°±æ˜¯<strong>GPTQ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†:é‡åŒ–çš„ä¸‰å¤§é—¨æ´¾(å¿…é¡»ææ‡‚çš„åˆ†ç±»é€»è¾‘)</h3>
<pre><code class="hljs">é‡åŒ–åˆ†ç±»
é™æ€é‡åŒ–
GGUF/GPTQ/AWQ
åŠ¨æ€é‡åŒ–
BitsAndBytes
æ··åˆç²¾åº¦
FP16/BF16/FP8
</code></pre>
<h4 data-id="heading-2">é—¨æ´¾A:é¢„åˆ¶èœæ´¾ â€”â€” æ¨¡å‹æ–‡ä»¶çº§é‡åŒ–</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"å‡ºå‚å‰å°±å‹ç¼©å¥½,æ‹¿æ¥å³ç”¨"</p>
<p>å°±åƒä¹°é€Ÿå†»æ°´é¥º,å‚å®¶å·²ç»å¸®ä½ åŒ…å¥½ã€å†»å¥½,å›å®¶ç›´æ¥ä¸‹é”…ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>GGUF</strong> â†’ å…¨å¹³å°é€šåƒçš„"ä¸‡é‡‘æ²¹"</li>
<li><strong>GPTQ</strong> â†’ GPUè€å¸æœºçš„æœ€çˆ±</li>
<li><strong>AWQ</strong> â†’ æ¿€æ´»æ„ŸçŸ¥çš„"ç²¾å‡†ç‹™å‡»æ‰‹"</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² âœ… æ˜¾å­˜åƒç´§ âœ… è¿½æ±‚æè‡´æ€§èƒ½</p>
<hr/>
<h4 data-id="heading-3">âš¡ é—¨æ´¾B:ç°ç‚’ç°å–æ´¾ â€”â€” åŠ¨æ€é‡åŒ–</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"åŸææ–™æ˜¯å®Œæ•´çš„,åŠ è½½æ—¶ç°åœºå‹ç¼©"</p>
<p>åƒå»é¤å…ç‚¹èœ,å¨å¸ˆæ‹¿åˆ°æ–°é²œé£Ÿæåç°åœºå¤„ç†ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>BitsAndBytes</strong> (4bit/8bit)</li>
<li><strong>Transformersé‡åŒ–é…ç½®</strong></li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… å¿«é€Ÿå®éªŒ âœ… è°ƒè¯•æ¨¡å‹ âœ… ä¸æƒ³æŠ˜è…¾è½¬æ¢</p>
<p><strong>ä¸‰è¡Œä»£ç æå®š</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(
 Â  Â &amp;<span class="hljs-comment">#34;Qwen/Qwen-7B&amp;#34;,</span>
 Â  Â <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span> Â <span class="hljs-comment"># å°±è¿™ä¹ˆç®€å•!</span>
)
</code></pre>
<hr/>
<h4 data-id="heading-4">ğŸ’ é—¨æ´¾C:ç²¾åº¦æ´¾ â€”â€” ç¡¬ä»¶åŸç”Ÿå‹ç¼©</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"ä¸æ˜¯çœŸé‡åŒ–,åªæ˜¯æ¢äº†ä¸ª'å®¹å™¨'"</p>
<p>åƒæŠŠæ°´ä»ç»ç’ƒç“¶å€’è¿›å¡‘æ–™ç“¶,å®¹é‡ä¸å˜ä½†æ›´è½»ä¾¿ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>FP16/BF16</strong>(åŠç²¾åº¦)</li>
<li><strong>TensorRT FP8</strong>(ä¼ä¸šçº§)</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… åœŸè±ªæ˜¾å¡(A100/H100) âœ… è¿½æ±‚æè‡´ç²¾åº¦ âœ… ä¼ä¸šçº§éƒ¨ç½²</p>
<hr/>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†:ä¸‰å¤§å¤©ç‹è¯¦è§£(ä½ ç»•ä¸å¼€çš„ä¸»æµæ–¹æ¡ˆ)</h3>
<h4 data-id="heading-6">GGUF:å¹³æ°‘ä¹‹ç‹,èƒ½åœ¨ä»»ä½•è®¾å¤‡ä¸Šè·‘AI</h4>
<p><strong>ä¸ºä»€ä¹ˆå®ƒè¿™ä¹ˆç«?</strong></p>
<p>æƒ³è±¡ä½ æœ‰ä¸ªæ¸¸æˆ,èƒ½åœ¨Switchã€PS5ã€ç”µè„‘ä¸Šæ— ç¼è¿è¡Œ â€”â€” GGUFå°±æ˜¯LLMç•Œçš„"è·¨å¹³å°ç¥å™¨"ã€‚</p>
<p><strong>ç¡¬æ ¸ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… CPUè·‘AI?å¯ä»¥! (è™½ç„¶æ…¢ä½†èƒ½è·‘)</li>
<li>âœ… Mac MèŠ¯ç‰‡?å®Œç¾é€‚é…!</li>
<li>âœ… GTX 1060è€æ˜¾å¡?ç…§æ ·èƒ½ç”¨!</li>
<li>âœ… æ–‡ä»¶ä½“ç§¯æœ€å°(7Bæ¨¡å‹åªéœ€3-4GB)</li>
</ul>
<p><strong>é€‚é…è¡¨</strong>(è¶Šå¤šæ˜Ÿè¶Šå¥½):</p>






























<table><thead><tr><th>è®¾å¤‡ç±»å‹</th><th>æ¨èåº¦</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>CPU(Intel/AMD)</td><td>â­â­â­â­â­</td><td>é€Ÿåº¦æ…¢ä½†ç¨³å®š</td></tr><tr><td>Mac M1/M2/M3</td><td>â­â­â­â­â­</td><td>é‡‘å±åŠ é€Ÿ,ä½“éªŒä¸æ»‘</td></tr><tr><td>è€æ˜¾å¡(GTXç³»åˆ—)</td><td>â­â­â­â­</td><td>é‡åŒ–ç‰ˆæ•‘æ˜Ÿ</td></tr><tr><td>RTX 30/40ç³»åˆ—</td><td>â­â­â­</td><td>èƒ½ç”¨ä½†ä¸æ˜¯æœ€ä¼˜è§£</td></tr></tbody></table>
<p><strong>çœŸå®æ¡ˆä¾‹</strong>:</p>
<blockquote>
<p>"æˆ‘ç”¨MacBook M2è·‘33Bæ¨¡å‹(330äº¿å‚æ•°,Q4é‡åŒ–),è¾“å‡ºé€Ÿåº¦5 tokens/s,å†™ä»£ç å¤Ÿç”¨äº†!" â€”â€” æŸç‹¬ç«‹å¼€å‘è€…</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">GPTQ:æœ€æˆç†Ÿçš„GPUé‡åŒ–æ–¹æ¡ˆ</h4>
<p><strong>ä¸ºä»€ä¹ˆé€‰å®ƒ?</strong></p>
<p>å¦‚æœGGUFæ˜¯"ç‘å£«å†›åˆ€",GPTQå°±æ˜¯"ä¸“ä¸šçº§å·¥å…·ç®±" â€”â€” ä¸“ä¸ºNVIDIAæ˜¾å¡ä¼˜åŒ–ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>:</p>
<ul>
<li>âœ… ç¤¾åŒºæ”¯æŒæœ€å¹¿(90%å¼€æºæ¨¡å‹éƒ½æœ‰GPTQç‰ˆ)</li>
<li>âœ… å…¼å®¹æ€§æœ€å¼º(ä»GTX 1080åˆ°RTX 4090é€šåƒ)</li>
<li>âœ… æ–‡æ¡£å®Œå–„(é‡åˆ°é—®é¢˜Googleä¸€ä¸‹å°±æœ‰ç­”æ¡ˆ)</li>
</ul>
<p><strong>ç¡¬ä»¶é€‚é…</strong>:</p>

























<table><thead><tr><th>GPUç³»åˆ—</th><th>æ¨èåº¦</th><th>å®æˆ˜è¡¨ç°</th></tr></thead><tbody><tr><td>RTX 20/30/40/50</td><td>â­â­â­â­â­</td><td>å®Œç¾è¿è¡Œ</td></tr><tr><td>T4(äº‘æœåŠ¡å™¨å¸¸è§)</td><td>â­â­â­â­â­</td><td>æ€§ä»·æ¯”ä¹‹ç‹</td></tr><tr><td>A10/A100</td><td>â­â­â­â­â­</td><td>ä¸“ä¸šçº§é€‰æ‹©</td></tr></tbody></table>
<p><strong>æ–‡ä»¶ç»“æ„</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">model-GPTQ/
â”œâ”€â”€ model.safetensors Â  Â   <span class="hljs-comment"># é‡åŒ–åçš„æƒé‡</span>
â”œâ”€â”€ quantize_config.json Â  <span class="hljs-comment"># é‡åŒ–é…ç½®</span>
â””â”€â”€ config.json Â  Â  Â  Â  Â   <span class="hljs-comment"># æ¨¡å‹é…ç½®</span>
</code></pre>
<p><strong>å°ç¼ºç‚¹</strong>:</p>
<ul>
<li>âŒ æ¨ç†é€Ÿåº¦æ¯”AWQæ…¢10-15%</li>
<li>âŒ å¯¹æ¿€æ´»å€¼ä¸å¤Ÿ"æ•æ„Ÿ"</li>
</ul>
<hr/>
<h4 data-id="heading-8">AWQ:æ¿€æ´»æ„ŸçŸ¥çš„"ç²¾å‡†ç‹™å‡»æ‰‹"</h4>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæœ€çœæ˜¾å­˜?</strong></p>
<p>æƒ³è±¡ä½ è¦æ¬å®¶,å¤§éƒ¨åˆ†ä¸œè¥¿éƒ½èƒ½å‹ç¼©,ä½†æœ‰äº›"æ˜“ç¢å“"å¿…é¡»åŸæ ·ä¿æŠ¤ã€‚AWQå°±æ˜¯è¿™æ · â€”â€” å®ƒçŸ¥é“æ¨¡å‹å“ªäº›æƒé‡é‡è¦,é‡ç‚¹ä¿æŠ¤ã€‚</p>
<p><strong>é»‘ç§‘æŠ€</strong>:</p>
<ul>
<li><strong>æ¿€æ´»æ„ŸçŸ¥</strong>:åˆ†ææ¨ç†æ—¶å“ªäº›ç¥ç»å…ƒæœ€æ´»è·ƒ</li>
<li><strong>åˆ†å±‚é‡åŒ–</strong>:é‡è¦å±‚ä¿ç•™é«˜ç²¾åº¦,æ¬¡è¦å±‚æ¿€è¿›å‹ç¼©</li>
<li><strong>ç»“æœ</strong>:INT4ç²¾åº¦â‰ˆINT8æ•ˆæœ,ä½†æ˜¾å­˜çœ50%!</li>
</ul>
<p><strong>å®æˆ˜æ•°æ®</strong>(7Bæ¨¡å‹,å³70äº¿å‚æ•°):</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">FP16: Â  14GBæ˜¾å­˜</span>
<span class="hljs-section">GPTQ: Â   6GBæ˜¾å­˜</span>
<span class="hljs-section">AWQ: Â  Â  4GBæ˜¾å­˜ â† æœ€çœ!</span>
</code></pre>
<p><strong>ç¡¬ä»¶è¦æ±‚</strong>(ç•¥æŒ‘é£Ÿ):</p>

























<table><thead><tr><th>GPU</th><th>æ¨èåº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>RTX 30/40/50</td><td>â­â­â­â­â­</td><td>æ¨ç†é€Ÿåº¦æœ€å¿«</td></tr><tr><td>A100/H100</td><td>â­â­â­â­â­</td><td>ä¼ä¸šçº§é¦–é€‰</td></tr><tr><td>T4</td><td>â­â­â­</td><td>èƒ½è·‘ä½†ä¸å¦‚GPTQå¿«</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆT4ä¸æ¨è?</strong> T4çš„TensorCoreæ˜¯7.5æ¶æ„(è¾ƒè€),AWQçš„INT4ä¼˜åŒ–åƒä¸æ»¡,åè€ŒGPTQçš„INT8æ›´é€‚åˆã€‚</p>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸‰éƒ¨åˆ†:å…¶ä»–é‡è¦é€‰æ‰‹</h3>
<h4 data-id="heading-10">TensorRT:å·¥ä¸šçº§çš„"F1èµ›è½¦"</h4>
<p><strong>å®šä½</strong>:ä¼ä¸šç”Ÿäº§ç¯å¢ƒçš„ç»ˆææ–¹æ¡ˆ</p>
<p><strong>ä¸ºä»€ä¹ˆå¿«?</strong></p>
<ul>
<li>ç®—å­èåˆ(æŠŠ10æ­¥æ“ä½œåˆæˆ1æ­¥)</li>
<li>å†…å­˜ä¼˜åŒ–(å‡å°‘CPU-GPUæ•°æ®æ¬è¿)</li>
<li>ç¡¬ä»¶ç›´é€š(ç›´æ¥è°ƒç”¨TensorCore)</li>
</ul>
<p><strong>é€Ÿåº¦å¯¹æ¯”</strong>(70Bæ¨¡å‹,å³700äº¿å‚æ•°æ¨ç†):</p>
<pre><code class="hljs language-bash" lang="bash">PyTorch FP16: Â  120ms/token
GPTQ: Â  Â  Â  Â  Â  80ms/token
TensorRT FP8: Â  35ms/token â† å¿«3å€!
</code></pre>
<p><strong>ä»£ä»·</strong>:</p>
<ul>
<li>âŒ éœ€è¦å¯¼å‡ºONNX</li>
<li>âŒ éœ€è¦æ ¡å‡†æ•°æ®é›†</li>
<li>âŒ è°ƒè¯•éš¾åº¦é«˜</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… è§†é¢‘å¹³å°å®æ—¶å­—å¹• âœ… å®¢æœæœºå™¨äºº(ç§’çº§å“åº”) âœ… é‡‘èé£æ§(é«˜å¹¶å‘)</p>
<hr/>
<h4 data-id="heading-11">BitsAndBytes:æ‡’äººçš„ç¦éŸ³</h4>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>:"ä¸æƒ³è½¬æ¢æ¨¡å‹?é‚£å°±ç”¨æˆ‘!"</p>
<p><strong>ä½¿ç”¨ä½“éªŒ</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼:ä¸‹è½½â†’è½¬æ¢â†’åŠ è½½(30åˆ†é’Ÿèµ·æ­¥)</span>
<span class="hljs-comment"># BitsAndBytes:ç›´æ¥åŠ è½½(3åˆ†é’Ÿæå®š)</span>
â€‹
from transformers import AutoModelForCausalLM, BitsAndBytesConfig
â€‹
<span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(
 Â  Â &amp;<span class="hljs-comment">#34;Qwen/Qwen-7B&amp;#34;,</span>
 Â  Â <span class="hljs-attr">quantization_config</span>=BitsAndBytesConfig(
 Â  Â  Â  Â <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>,
 Â  Â  Â  Â <span class="hljs-attr">bnb_4bit_compute_dtype</span>=torch.float16
 Â   )
)
<span class="hljs-comment"># å°±è¿™ä¹ˆç®€å•,å¼€ç®±å³ç”¨!</span>
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>: âœ… é›¶è½¬æ¢æˆæœ¬ âœ… TransformersåŸç”Ÿæ”¯æŒ âœ… é€‚åˆå¿«é€Ÿå®éªŒ</p>
<p><strong>ç¼ºç‚¹</strong>: âŒ æ€§èƒ½æ¯”é¢„é‡åŒ–æ–¹æ¡ˆæ…¢10-20% âŒ éœ€è¦è¾ƒæ–°æ˜¾å¡(&gt;=RTX 20ç³»åˆ—)</p>
<hr/>
<h4 data-id="heading-12">FP16/BF16:ç²¾åº¦å…šçš„åšå®ˆ</h4>
<p><strong>æ ¸å¿ƒè§‚å¿µ</strong>:"æˆ‘ä¸ç¼ºæ˜¾å­˜,åªè¦ç²¾åº¦!"</p>
<p><strong>å®æˆ˜åœºæ™¯</strong>:</p>
<ul>
<li>å­¦æœ¯ç ”ç©¶(éœ€è¦å¯å¤ç°ç»“æœ)</li>
<li>åŒ»ç–—AI(ç²¾åº¦è¦æ±‚æé«˜)</li>
<li>å¤§è§„æ¨¡å®éªŒ(A100é›†ç¾¤)</li>
</ul>
<p><strong>æ•°æ®å¯¹æ¯”</strong>:</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">FP32</span>(å…¨ç²¾åº¦):  <span class="hljs-number">100%</span>ç²¾åº¦, <span class="hljs-number">28</span>GBæ˜¾å­˜
<span class="hljs-built_in">FP16</span>(åŠç²¾åº¦):  <span class="hljs-number">99.9%</span>ç²¾åº¦, <span class="hljs-number">14</span>GBæ˜¾å­˜ â† æ€§ä»·æ¯”é«˜
<span class="hljs-built_in">INT8</span>(GPTQ): Â   <span class="hljs-number">98%</span>ç²¾åº¦, Â   <span class="hljs-number">7</span>GBæ˜¾å­˜
<span class="hljs-built_in">INT4</span>(AWQ): Â  Â  <span class="hljs-number">95%</span>ç²¾åº¦, Â   <span class="hljs-number">4</span>GBæ˜¾å­˜
</code></pre>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†:ç»ˆæå¯¹æ¯”çŸ©é˜µ(é€‰å‹å¿…çœ‹!)</h3>
<h4 data-id="heading-14">å…¨æ–¹æ¡ˆå¯¹æ¯”è¡¨</h4>




































































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç²¾åº¦</th><th>æ˜¾å­˜</th><th>é€Ÿåº¦</th><th>å…¼å®¹æ€§</th><th>ç‰¹ç‚¹</th><th>æ¨èæŒ‡æ•°</th></tr></thead><tbody><tr><td><strong>GGUF</strong></td><td>ä¸­ç­‰</td><td>ğŸ†æœ€ä½</td><td>ä¸­ç­‰</td><td>ğŸ†å…¨å¹³å°</td><td>è·¨å¹³å°ä¹‹ç‹</td><td>â­â­â­â­</td></tr><tr><td><strong>GPTQ</strong></td><td>è‰¯å¥½</td><td>ä½</td><td>è‰¯å¥½</td><td>ğŸ†æœ€å¹¿</td><td>æœ€ç¨³å¦¥é€‰æ‹©</td><td>â­â­â­â­â­</td></tr><tr><td><strong>AWQ</strong></td><td>ğŸ†æœ€ä½³</td><td>ğŸ†æ›´ä½</td><td>å¿«</td><td>æ–°å¡ä¼˜</td><td>æ˜¾å­˜æ€æ‰‹</td><td>â­â­â­â­â­</td></tr><tr><td><strong>TensorRT</strong></td><td>æä½³</td><td>ä¸­ç­‰</td><td>ğŸ†æœ€å¿«</td><td>ä¼ä¸šçº§</td><td>ç”Ÿäº§ç¯å¢ƒ</td><td>â­â­â­â­</td></tr><tr><td><strong>BitsAndBytes</strong></td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>è¾ƒå¿«</td><td>æ–°å¡</td><td>æ‡’äººç¦éŸ³</td><td>â­â­â­â­</td></tr><tr><td><strong>FP16</strong></td><td>ğŸ†åŸç”Ÿ</td><td>é«˜</td><td>å¿«</td><td>å¤§æ˜¾å¡</td><td>ç²¾åº¦å…š</td><td>â­â­â­</td></tr></tbody></table>
<p>å¾ˆå¤šäººä¼šé—®ï¼š</p>
<ul>
<li>vLLM æ”¯æŒè°ï¼Ÿï¼ˆGPTQ? AWQ? GGUF?ï¼‰</li>
<li>SGLang æ”¯æŒè°ï¼Ÿ</li>
<li>llama.cpp æ”¯æŒä»€ä¹ˆæ ¼å¼ï¼Ÿ</li>
</ul>





























































<table><thead><tr><th>æ¡†æ¶</th><th>GGUF</th><th>GPTQ</th><th>AWQ</th><th>BnB</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>llama.cpp</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>GGUFä¸“å±</td></tr><tr><td>Transformers</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>åŸç”Ÿæ”¯æŒ4/8bit</td></tr><tr><td>AutoGPTQ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>GPTQä¸“ç”¨</td></tr><tr><td>AWQ repo</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>AWQä¸“ç”¨</td></tr><tr><td>vLLM</td><td>âŒ</td><td>éƒ¨åˆ†</td><td>éƒ¨åˆ†</td><td>âŒ</td><td>2024åé€æ­¥æ”¯æŒ INT4/INT8 æ’ä»¶</td></tr><tr><td>SGLang</td><td>âŒ</td><td>éƒ¨åˆ†</td><td>éƒ¨åˆ†</td><td>âŒ</td><td>æ€§èƒ½éå¸¸å¼º</td></tr></tbody></table>
<p>é‚£ä¹ˆæ˜¾å­˜æ€ä¹ˆé€‰ï¼Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaobingan.github.io%2Fgpu-calculator%2F" target="_blank" title="https://xiaobingan.github.io/gpu-calculator/" ref="nofollow noopener noreferrer">å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘å‰å‡ å¤©åšçš„æ˜¾å­˜è®¡ç®—å™¨</a>åšä¸ªç®€å•çš„å‚è€ƒ</p>





































<table><thead><tr><th>70B æ¨¡å‹æ ¼å¼</th><th>æ˜¾å­˜éœ€æ±‚</th></tr></thead><tbody><tr><td>FP16</td><td>~140GB</td></tr><tr><td>BF16</td><td>~140GB</td></tr><tr><td>FP8 (TensorRT)</td><td>~80GB</td></tr><tr><td>GPTQ (INT4)</td><td>~38GB</td></tr><tr><td>AWQ (INT4)</td><td>~32GB</td></tr><tr><td>GGUF Q4</td><td>~28GB</td></tr><tr><td>GGUF Q5</td><td>~36GB</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-15">ç¬¬äº”éƒ¨åˆ†:5ç§’é€‰å‹æŒ‡å—(æŒ‰ç¡¬ä»¶ç›´æ¥é€‰!)</h3>
<h4 data-id="heading-16">ğŸ¯ å¿«é€Ÿå†³ç­–æ ‘</h4>
<pre><code class="hljs language-scss" lang="scss">ä½ çš„è®¾å¤‡æ˜¯ä»€ä¹ˆ?
â”‚
â”œâ”€ ğŸ’» CPU / Mac / è€æ˜¾å¡
â”‚ Â  â””â”€ â†’ GGUF (å”¯ä¸€ä¹‹é€‰)
â”‚
â”œâ”€ ğŸ® RTX <span class="hljs-number">20</span>/<span class="hljs-number">30</span>/<span class="hljs-number">40</span>ç³»åˆ—æ˜¾å¡
â”‚ Â  â””â”€ â†’ GPTQ (æœ€ç¨³å¦¥)
â”‚
â”œâ”€ ğŸ’¡ æ˜¾å­˜ä¸å¤Ÿç”¨(æƒ³è·‘å¤§æ¨¡å‹)
â”‚ Â  â””â”€ â†’ AWQ (å‹ç¼©ç‡æœ€é«˜)
â”‚
â”œâ”€ âš¡ ä¼ä¸šçº§<span class="hljs-built_in">GPU</span>(A100/H100)
â”‚ Â  â””â”€ â†’ TensorRT FP8 (è¿½æ±‚æè‡´)
â”‚
â”œâ”€ ğŸ› ï¸ ä¸æƒ³æŠ˜è…¾(å¿«é€Ÿå®éªŒ)
â”‚ Â  â””â”€ â†’ BitsAndBytes (å¼€ç®±å³ç”¨)
â”‚
â””â”€ ğŸ§ª å¤§æ˜¾å¡ + è¦ç²¾åº¦
 Â   â””â”€ â†’ FP16/BF16 (æ¥è¿‘åŸç”Ÿ)
</code></pre>
<hr/>
<h4 data-id="heading-17">ğŸ’¡ å®æˆ˜åœºæ™¯åŒ¹é…</h4>
<p><strong>åœºæ™¯1:ä¸ªäººå­¦ä¹ /å¼€å‘</strong></p>
<ul>
<li>é¢„ç®—: æ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆ,åªæœ‰æœ€é€‚åˆä½ ç¡¬ä»¶çš„æ–¹æ¡ˆã€‚å…ˆçœ‹æ˜¾å¡,å†é€‰é‡åŒ–!</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>