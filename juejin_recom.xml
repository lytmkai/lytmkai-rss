<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Flutter 3.38 + Firebaseï¼š2025 å¹´å¼€å‘è€…å¿…çœ‹çš„æ–°å˜åŒ–]]></title>    <link>https://juejin.cn/post/7576605171771605042</link>    <guid>https://juejin.cn/post/7576605171771605042</guid>    <pubDate>2025-11-26T04:07:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576605171771605042" data-draft-id="7575367791273852966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter 3.38 + Firebaseï¼š2025 å¹´å¼€å‘è€…å¿…çœ‹çš„æ–°å˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T04:07:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter 3.38 + Firebaseï¼š2025 å¹´å¼€å‘è€…å¿…çœ‹çš„æ–°å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:07:35.000Z" title="Wed Nov 26 2025 04:07:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flutter 3.38 å’Œ FlutterFire çš„ 2025 å¹´æ›´æ–°æ”¹è¿›äº† Firebase çš„é›†æˆï¼Œæå‡äº†ç±»å‹å®‰å…¨ï¼Œå¹¶ç®€åŒ–äº†èº«ä»½éªŒè¯è¿‡ç¨‹ï¼ŒåŠ©æ‚¨æ„å»ºå¯æ‰©å±•çš„ç§»åŠ¨åç«¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c27f731be734cc7aff344a0ebf18be1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764734855&amp;x-signature=ffxplk6eyHKwpbY7zPdiJY95JV8%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Firebase å¼€å‘ Flutter åº”ç”¨ï¼Œ2025 å¹´å°†è¿æ¥ä¸€äº›é‡å¤§çš„åˆ©å¥½å˜åŒ–ã€‚é€šè¿‡ <strong>Flutter 3.38</strong> ä»¥åŠæœ€æ–°ã€æœ€å¼ºå¤§çš„ <strong>FlutterFire</strong> åº“ï¼Œæ‚¨å¯ä»¥é‡‡ç”¨æ›´å…·<strong>å£°æ˜å¼</strong>ã€æ›´å®‰å…¨ä¸”æ€§èƒ½æ›´é«˜çš„<strong>æ–¹å¼</strong>æ¥é›†æˆ Firebaseã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹å¯¹æ‚¨çš„ç”Ÿäº§åº”ç”¨è‡³å…³é‡è¦çš„æ›´æ–°ã€‚</p>
<h3 data-id="heading-0">æ”¹è¿›çš„ Firebase åˆå§‹åŒ–</h3>
<p>æœ€å¤§çš„å˜åŒ–æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ä¸€ç§æ›´æ–¹ä¾¿ã€æ›´<strong>å¥å£®</strong>çš„åˆå§‹åŒ–æ–¹æ³•ã€‚è¿™ç§æ–°æ–¹æ³•åˆ©ç”¨äº†<strong>ç¼–è¯‘æ—¶é…ç½®</strong>ï¼Œä»è€Œæ¶ˆé™¤äº†è¿è¡Œæ—¶é”™è¯¯ï¼Œå¹¶æ˜¾è‘—æ”¹å–„äº†åº”ç”¨çš„<strong>å†·å¯åŠ¨æ—¶é—´</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized();
  
  <span class="hljs-comment">// New: Single line initialization with better error handling</span>
  <span class="hljs-keyword">await</span> Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  
  runApp(MyApp());
}
</code></pre>
<p><strong>å‘Šåˆ«æ•£è½åœ¨ iOS å’Œ Android æ–‡ä»¶å¤¹ä¸­çš„å¤šå¹³å°é…ç½®æ–‡ä»¶ï¼</strong> FlutterFire CLI ç°åœ¨å°†æ‰€æœ‰é…ç½®åˆå¹¶åˆ°ä¸€ä¸ª <strong><code>firebase_options.dart</code></strong> æ–‡ä»¶ä¸­ï¼Œä¸ºæ¯ä¸ªå¹³å°æä¾›ç±»å‹åŒ–é…ç½®ã€‚ä»…å‡­è¿™ä¸€ç‚¹ï¼Œå°±èƒ½ä¸ºæ‚¨èŠ‚çœå¤§é‡è°ƒè¯•æ–° Firebase æœåŠ¡çš„æ—¶é—´ã€‚</p>
<h3 data-id="heading-1">Firestore å˜å¾—æ›´æ™ºèƒ½äº†</h3>
<p><strong>Firestore æŸ¥è¯¢çš„ç±»å‹å®‰å…¨å¾—åˆ°æ”¹è¿›</strong> Firestore æŸ¥è¯¢ç°åœ¨å°†æ›´å…·å¯è¯»æ€§ï¼Œå¹¶æä¾›æ›´å‡ºè‰²çš„ç±»å‹å®‰å…¨ã€‚å¦‚æœè¯´ç°åœ¨ä»£ç çš„çµæ´»æ€§é™ä½äº†ï¼Œé‚£ç»å¯¹æ˜¯ä»¶å¥½äº‹â€”â€”å› ä¸ºæ–°çš„<strong>å¼ºç±»å‹æŸ¥è¯¢æ„å»ºå™¨</strong>å¯ä»¥åœ¨<strong>ç¼–è¯‘æ—¶</strong>è€Œéè¿è¡Œæ—¶å‘ç°é”™è¯¯ï¼</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ—§çš„æ–¹å¼ (prone to typos and runtime errors)</span>
FirebaseFirestore.instance
  .collection(<span class="hljs-string">'users'</span>)
  .where(<span class="hljs-string">'age'</span>, isGreaterThan: <span class="hljs-number">18</span>);

<span class="hljs-comment">// æ–°çš„: Type-safe with better autocomplete</span>
<span class="hljs-keyword">final</span> usersRef = FirebaseFirestore.instance
  .collection(<span class="hljs-string">'users'</span>)
  .withConverter&lt;User&gt;(
    fromFirestore: (snapshot, _) =&gt; User.fromJson(snapshot.data()!),
    toFirestore: (user, _) =&gt; user.toJson(),
  );

<span class="hljs-keyword">final</span> adults = <span class="hljs-keyword">await</span> usersRef
  .where((user) =&gt; user.age, isGreaterThan: <span class="hljs-number">18</span>)
  .<span class="hljs-keyword">get</span>()
</code></pre>
<p><strong>è½¬æ¢å™¨æ¨¡å¼ï¼ˆConverter Patternï¼‰</strong> å¹¶éæ–°æ¦‚å¿µï¼Œä½†åœ¨ Flutter 3.38 ä¸­ï¼Œå®ƒæˆä¸ºäº†<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚è¿™æœ‰åŠ©äºç¡®ä¿æ‚¨çš„æ•°æ®æ¨¡å‹åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä¿æŒæ— ç¼ä¸€è‡´ï¼Œä¸ºæ‚¨æä¾›å®Œæ•´çš„<strong>ç±»å‹å®‰å…¨</strong>ï¼Œä»¥åŠå¢å¼ºçš„ IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰æ”¯æŒã€‚</p>
<h3 data-id="heading-2">èº«ä»½éªŒè¯æµç¨‹ç®€åŒ–</h3>
<p><strong>æ–°çš„è¾…åŠ©æ–¹æ³•ç®€åŒ–äº†å¸¸è§çš„ Firebase Auth æµç¨‹ã€‚</strong> å½“ä½¿ç”¨ Googleã€Apple æˆ–ç”µå­é‚®ä»¶ç™»å½•æ—¶ï¼Œä¸å†éœ€è¦ç¼–å†™é‚£ä¹ˆå¤š<strong>æ ·æ¿ä»£ç </strong>ï¼ˆboilerplate codeï¼‰ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç²¾ç®€çš„èº«ä»½éªŒè¯</span>
<span class="hljs-keyword">final</span> userCredential = <span class="hljs-keyword">await</span> FirebaseAuth.instance
  .signInWithProvider(GoogleAuthProvider());

<span class="hljs-comment">// ä¼˜åŒ–çš„çŠ¶æ€ç®¡ç†é›†æˆ</span>
StreamBuilder&lt;User?&gt;(
  stream: FirebaseAuth.instance.authStateChanges(),
  builder: (context, snapshot) {
    <span class="hljs-keyword">if</span> (snapshot.hasData) <span class="hljs-keyword">return</span> HomeScreen();
    <span class="hljs-keyword">return</span> LoginScreen();
  },
);
</code></pre>
<p>è¿™äº›æ–°çš„èº«ä»½éªŒè¯çŠ¶æ€æµæ˜¯ä¸º <strong>Riverpod</strong>ã€<strong>Bloc</strong> æˆ–æ‚¨æ­£åœ¨ä½¿ç”¨çš„ä»»ä½•çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ<strong>å†…ç½®</strong>çš„ã€‚</p>
<h3 data-id="heading-3">çœŸæ­£èµ·ä½œç”¨çš„å®æ—¶æ›´æ–°</h3>
<p><strong>Firebase å®æ—¶æ•°æ®åº“ï¼ˆRealtime Databaseï¼‰å’Œ Firestore ä¸­çš„æµå¤„ç†å¾—åˆ°äº†æ”¹è¿›ã€‚</strong> å³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µä¸‹ï¼Œ<strong>è¿æ¥çŠ¶æ€æ§åˆ¶</strong>ä¹Ÿæ›´åŠ å¥å£®ï¼Œ<strong>ç¦»çº¿æŒä¹…åŒ–</strong>åŠŸèƒ½ä¹Ÿèƒ½å¹³ç¨³è¿è¡Œã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Automatic offline support with better sync  </span>
<span class="hljs-keyword">final</span> stream = FirebaseFirestore.instance  
.collection(<span class="hljs-string">'messages'</span>)  
.orderBy(<span class="hljs-string">'timestamp'</span>, descending: <span class="hljs-keyword">true</span>)  
.limit(<span class="hljs-number">50</span>)  
.snapshots();
</code></pre>
<h3 data-id="heading-4">ğŸ’¾ ç¦»çº¿æŒä¹…åŒ–åŠŸèƒ½å‡çº§</h3>
<blockquote>
<p>ç¦»çº¿æŒä¹…åŒ–åŠŸèƒ½çš„æ›´æ–°æ„å‘³ç€ï¼Œå³ä½¿åœ¨ç½‘ç»œè¿æ¥ä¸­æ–­æ—¶ï¼Œæ‚¨çš„ç”¨æˆ·ä¹Ÿèƒ½äº«å—åˆ°<strong>æ— ç¼</strong>çš„ä½¿ç”¨ä½“éªŒã€‚ä¸€æ—¦æ¢å¤åœ¨çº¿ï¼Œå®ƒä¼šè‡ªåŠ¨åŒæ­¥æ•°æ®ï¼Œ<strong>æ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œ</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ğŸ¯ æ ¸å¿ƒè¦ç‚¹ (Key Takeaways)</h3>
<ul>
<li><strong>å•ä¸€æ–‡ä»¶é…ç½®ï¼š</strong> ä¸å†éœ€è¦åœ¨ä¸åŒå¹³å°çš„ Firebase é…ç½®æ–‡ä»¶ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚</li>
<li><strong>Firestore ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ï¼ˆä½¿ç”¨è½¬æ¢å™¨ï¼‰ï¼š</strong> å®ç°<strong>ç±»å‹å®‰å…¨çš„æŸ¥è¯¢</strong>ã€‚</li>
<li><strong>ç®€åŒ–çš„èº«ä»½éªŒè¯ï¼š</strong> å‡å°‘äº†æœ€å¸¸ç”¨èº«ä»½éªŒè¯æ¨¡å¼çš„<strong>æ ·æ¿ä»£ç </strong>ã€‚</li>
<li><strong>æ›´å¥½çš„ç¦»çº¿æ”¯æŒï¼š</strong> é¡µé¢åŒæ­¥ï¼ˆPage Syncing Upï¼‰ä»¥åŠ<strong>è¿æ¥çŠ¶æ€ç®¡ç†</strong>å¾—åˆ°å¢å¼ºã€‚</li>
<li><strong>æ€§èƒ½æ”¹è¿›ï¼š</strong> åŠ å¿«äº†åº”ç”¨<strong>å¯åŠ¨é€Ÿåº¦</strong>ï¼Œå¹¶<strong>å‡å°äº†å®‰è£…åŒ…ä½“ç§¯</strong>ï¼ˆbundle sizeï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ğŸ†™ å‡†å¤‡å‡çº§äº†å—ï¼Ÿ</h3>
<blockquote>
<p>å¦‚æœæ‚¨å·²ç»åœ¨ Flutter åº”ç”¨ä¸­ä½¿ç”¨ Firebaseï¼Œé‚£ä¹ˆè¿ç§»åˆ°è¿™äº›æ–°æ¨¡å¼å°†ä¼š<strong>éå¸¸ç®€å•</strong>ã€‚FlutterFire å›¢é˜Ÿå·²ç»å‡†å¤‡äº†è¿ç§»æŒ‡å—ï¼Œè€Œä¸”å¤§å¤šæ•°æ›´æ”¹éƒ½æ˜¯<strong>å¢é‡å¼</strong>çš„ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥é€æ­¥é‡‡ç”¨å®ƒä»¬ï¼Œè€Œä¸ä¼šç ´åç°æœ‰ä»£ç ã€‚</p>
<p>Firebase ä»ç„¶æ˜¯æ‚¨å¯ä»¥ç”¨äº Flutter åº”ç”¨çš„æœ€ä½³åç«¯æœåŠ¡ä¹‹ä¸€ï¼Œè€Œ 2025 å¹´çš„è¿™äº›å˜åŒ–è¡¨æ˜æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿæ­£åœ¨èµ°å‘<strong>æˆç†Ÿ</strong>ã€‚è¯·åŠ¡å¿…å°è¯•è¿™äº›æ–°æ¨¡å¼å§ï¼ä¸ºæ›´ç®€æ´çš„ä»£ç å’Œæ›´å°‘çš„è¿è¡Œæ—¶æ„å¤–ï¼Œæ„Ÿè°¢æ‚¨æœªæ¥çš„è‡ªå·±ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 3.0 é‡ç£…å‡çº§ï¼š5ä¸ªä½ å¿…é¡»æŒæ¡çš„ä¼˜åŒ–æŠ€å·§å’Œå®æˆ˜åº”ç”¨]]></title>    <link>https://juejin.cn/post/7576556950332293120</link>    <guid>https://juejin.cn/post/7576556950332293120</guid>    <pubDate>2025-11-26T04:16:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950332293120" data-draft-id="7576569518262747136" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 3.0 é‡ç£…å‡çº§ï¼š5ä¸ªä½ å¿…é¡»æŒæ¡çš„ä¼˜åŒ–æŠ€å·§å’Œå®æˆ˜åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T04:16:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 3.0 é‡ç£…å‡çº§ï¼š5ä¸ªä½ å¿…é¡»æŒæ¡çš„ä¼˜åŒ–æŠ€å·§å’Œå®æˆ˜åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:16:56.000Z" title="Wed Nov 26 2025 04:16:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 3.0 é‡ç£…å‡çº§ï¼š5ä¸ªä½ å¿…é¡»æŒæ¡çš„ä¼˜åŒ–æŠ€å·§å’Œå®æˆ˜åº”ç”¨</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>å‰ç«¯æ„å»ºå·¥å…·çš„å‘å±•æ—¥æ–°æœˆå¼‚ï¼Œè€Œ Vite ä½œä¸ºæ–°ä¸€ä»£çš„å‰ç«¯å·¥å…·é“¾ï¼Œå‡­å€Ÿå…¶åŸç”Ÿ ESM æ”¯æŒå’Œæé€Ÿçš„å¼€å‘ä½“éªŒï¼Œå·²ç»æˆä¸ºç°ä»£ Web å¼€å‘çš„é‡è¦é€‰æ‹©ã€‚2022å¹´7æœˆï¼ŒVite 3.0 æ­£å¼å‘å¸ƒï¼Œå¸¦æ¥äº†å¤šé¡¹é‡å¤§æ”¹è¿›å’Œæ€§èƒ½ä¼˜åŒ–ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æ Vite 3.0 çš„æ ¸å¿ƒå‡çº§ç‚¹ï¼Œå¹¶åˆ†äº«5ä¸ªå¿…é¡»æŒæ¡çš„ä¼˜åŒ–æŠ€å·§åŠå…¶åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>å¯¹äºå·²ç»ä½¿ç”¨æˆ–è€ƒè™‘è¿ç§»åˆ° Vite çš„å¼€å‘è€…è€Œè¨€ï¼Œç†è§£è¿™äº›ä¼˜åŒ–æŠ€å·§ä¸ä»…èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½æ˜¾è‘—æ”¹å–„ç”Ÿäº§ç¯å¢ƒçš„æ„å»ºæ€§èƒ½ã€‚æˆ‘ä»¬å°†ä»åº•å±‚åŸç†å‡ºå‘ï¼Œç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©æ‚¨å…¨é¢æŒæ¡ Vite 3.0 çš„å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-2">Vite 3.0 æ ¸å¿ƒå‡çº§æ¦‚è§ˆ</h2>
<p>åœ¨æ·±å…¥ä¼˜åŒ–æŠ€å·§ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå¿«é€Ÿäº†è§£ Vite 3.0 çš„ä¸»è¦å˜åŒ–ï¼š</p>
<ol>
<li><strong>é»˜è®¤æ”¯æŒç°ä»£æµè§ˆå™¨</strong>ï¼šä¸å†è‡ªåŠ¨ä¸ºä¼ ç»Ÿæµè§ˆå™¨ç”Ÿæˆ polyfill</li>
<li><strong>æ”¹è¿›çš„ SSR API</strong>ï¼šæä¾›æ›´ç¨³å®šçš„æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ</li>
<li><strong>å…¨æ–°çš„çƒ­æ¨¡å—æ›¿æ¢(HMR)æ¶æ„</strong>ï¼šæ€§èƒ½æå‡æ˜¾è‘—</li>
<li><strong>å®éªŒæ€§ Lightning CSS æ”¯æŒ</strong>ï¼šæ›¿ä»£ PostCSS çš„æ€§èƒ½æ€ªå…½</li>
<li><strong>æ„å»ºè¾“å‡ºä¼˜åŒ–</strong>ï¼šå‡å°‘çº¦30%çš„æ‰“åŒ…ä½“ç§¯</li>
</ol>
<p>è¿™äº›åº•å±‚æ”¹è¿›ä¸ºæˆ‘ä»¬åç»­è¦ä»‹ç»çš„ä¼˜åŒ–æŠ€å·§å¥ å®šäº†åŸºç¡€ã€‚ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ã€‚</p>
<h2 data-id="heading-3">æŠ€å·§ä¸€ï¼šåˆ©ç”¨æ–°å‹ä¾èµ–é¢„æ„å»ºç­–ç•¥</h2>
<h3 data-id="heading-4">åŸç†åˆ†æ</h3>
<p>Vite çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯å…¶åˆ›æ–°çš„ä¾èµ–é¢„æ„å»ºæœºåˆ¶ã€‚åœ¨ Vite 3.0 ä¸­ï¼Œè¿™ä¸€æœºåˆ¶å¾—åˆ°äº†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">optimizeDeps</span>: {
   <span class="hljs-comment">// v3æ–°å¢é€‰é¡¹ï¼šæ§åˆ¶æ˜¯å¦å°†CommonJSè½¬æ¢ä¸ºESM</span>
   <span class="hljs-attr">transformMixedEsModules</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-comment">// v3æ€§èƒ½ä¼˜åŒ–ï¼šæ›´æ™ºèƒ½çš„ä¾èµ–å‘ç°</span>
   <span class="hljs-attr">auto</span>: <span class="hljs-literal">true</span> 
 }
}
</code></pre>
<h3 data-id="heading-5">å®æˆ˜åº”ç”¨</h3>
<ol>
<li>
<p><strong>å¤§å‹monorepoé¡¹ç›®çš„ä¼˜åŒ–é…ç½®</strong>ï¼š
å¯¹äºåŒ…å«å¤šä¸ªå­åŒ…çš„monorepoé¡¹ç›®ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶å“ªäº›åŒ…éœ€è¦é¢„æ„å»ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">optimizeDeps</span>: {
  <span class="hljs-attr">include</span>: [
    <span class="hljs-string">'@project/components'</span>,
    <span class="hljs-string">'@project/utils'</span>,
    <span class="hljs-string">'lodash-es/debounce'</span>
  ],
  <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'@project/internal'</span>] <span class="hljs-comment">// internalåŒ…ç»å¸¸å˜æ›´ï¼Œæ’é™¤é¿å…é‡å¤æ„å»º</span>
}
</code></pre>
</li>
<li>
<p><strong>åŠ¨æ€å¯¼å…¥çš„ä¾èµ–å¤„ç†</strong>ï¼š
å¯¹äºæŒ‰éœ€åŠ è½½çš„ç»„ä»¶åº“ï¼ˆå¦‚Ant Design Vueï¼‰ï¼Œéœ€è¦ç¡®ä¿æ­£ç¡®é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">optimizeDeps</span>: {
  <span class="hljs-attr">include</span>: [
    <span class="hljs-string">'ant-design-vue/es/button/style/css'</span>, <span class="hljs-comment">// CSSæ–‡ä»¶ä¹Ÿéœ€è¦é¢„æ„å»ºï¼</span>
    <span class="hljs-string">'ant-design-vue/es/modal/style/css'</span>
  ]
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-6">Benchmarkå¯¹æ¯”</h3>
<p>åœ¨æˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®ä¸­ï¼ˆåŒ…å«200+ä¾èµ–é¡¹ï¼‰ï¼š</p>
<ul>
<li>Vite 2.xå¹³å‡å†·å¯åŠ¨æ—¶é—´ï¼š4.2s</li>
<li>Vite 3.0ä¼˜åŒ–é…ç½®åï¼š1.8s (æå‡57%)</li>
</ul>
<p>##æŠ€å·§äºŒï¼šCSSå¤„ç†çš„æœ€ä½³å®è·µ</p>
<h3 data-id="heading-7">Lightning CSSæ·±åº¦é›†æˆ</h3>
<p>Vite3æä¾›äº†å¯¹Lightning CSSçš„å®éªŒæ€§æ”¯æŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">css</span>: {
   <span class="hljs-attr">transformer</span>: <span class="hljs-string">'lightningcss'</span>, <span class="hljs-comment">// v3æ–°å¢é€‰é¡¹</span>
 <span class="hljs-attr">lightningcss</span>: { 
     <span class="hljs-attr">drafts</span>: { <span class="hljs-attr">nesting</span>: <span class="hljs-literal">true</span> }, <span class="hljs-comment">//å¯ç”¨CSSåµŒå¥—è‰æ¡ˆè¯­æ³• </span>
     <span class="hljs-attr">minify</span>: <span class="hljs-literal">true</span>               <span class="hljs-comment">//ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å‹ç¼© </span>
 }
 }
}
</code></pre>
<h3 data-id="heading-8">PostCSSä¸Lightning CSSæ··åˆæ–¹æ¡ˆ</h3>
<p>å¯¹äºç°æœ‰PostCSSæ’ä»¶ç”Ÿæ€çš„é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">css</span>: {
 <span class="hljs-attr">transformer</span>: <span class="hljs-string">'mixed'</span>, <span class="hljs-comment">// v3ç‹¬ç‰¹åŠŸèƒ½ </span>
 <span class="hljs-attr">postcss</span>: { plugins [<span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)] },
 lightningcss { <span class="hljs-comment">/* lightingç‰¹æœ‰é…ç½® */</span> } 
}
</code></pre>
<p>###å®é™…æ•ˆæœå¯¹æ¯”</p>
<p>å¤„ç†ä¸€ä¸ªåŒ…å«10,000è¡ŒCSSçš„é¡¹ç›®ï¼š</p>




















<table><thead><tr><th>Processor</th><th>Build Time</th><th>Output Size</th></tr></thead><tbody><tr><td>PostCSS</td><td>~1200ms</td><td>~450KB</td></tr><tr><td>Lightning</td><td>~280ms (-76%)</td><td>~390KB (-13%)</td></tr></tbody></table>
<p>##æŠ€å·§ä¸‰ï¼šé«˜çº§HMRè°ƒä¼˜ç­–ç•¥</p>
<p>###æ–°ç‰ˆHMRæ¶æ„è§£æ</p>
<p>Vite3é‡æ–°è®¾è®¡äº†HMRåè®®ï¼š</p>
<ol>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šä»…å‘é€å˜æ›´æ¨¡å—çš„diff
2.<strong>æ™ºèƒ½å¤±æ•ˆ</strong>ï¼šåŸºäºESMä¾èµ–å›¾çš„ç²¾ç¡®æ›´æ–°èŒƒå›´åˆ¤æ–­</li>
</ol>
<p>###è‡ªå®šä¹‰HMRè¾¹ç•Œè®¾ç½®</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// component.jsx </span>
<span class="hljs-keyword">import</span> { hot } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite/hmr'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// v3æ–°å¢APIå®šä¹‰HMRè¾¹ç•Œ </span>
hot.<span class="hljs-title function_">acceptExports</span>([<span class="hljs-string">'render'</span>], <span class="hljs-function">(<span class="hljs-params">{ render }</span>) =&gt;</span> {
 <span class="hljs-keyword">if</span> (render) <span class="hljs-title class_">Component</span>.<span class="hljs-property">render</span> = render 
})
</code></pre>
<p>###å¤§å‹é¡¹ç›®ä¸­çš„å®æµ‹æ•°æ®</p>
<p>åœ¨500+ç»„ä»¶çš„åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼š</p>
<ul>
<li>HMRå¹³å‡å“åº”æ—¶é—´ä»120msé™è‡³40ms(66%â†‘)</li>
<li>CPUä½¿ç”¨ç‡é™ä½çº¦40%</li>
</ul>
<p>##æŠ€å·§å››ï¼šç”Ÿäº§ç¯å¢ƒæ„å»ºæè‡´ä¼˜åŒ–</p>
<p>###å¤šçº¿ç¨‹å‹ç¼©æ–°æ–¹æ¡ˆ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { splitVendorChunkPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">build</span>:{
 <span class="hljs-attr">terserOptions</span>:{
 numWorkers :<span class="hljs-number">4</span>, <span class="hljs-comment">//v3æ–°å¢å¤šçº¿ç¨‹æ”¯æŒ  </span>
 <span class="hljs-attr">compress</span>:{
 passes :<span class="hljs-number">3</span>      <span class="hljs-comment">//æ‰§è¡Œå¤šæ¬¡å‹ç¼©è·å¾—æ›´å¥½æ•ˆæœ   </span>
 }
 },
 <span class="hljs-attr">plugins</span>:[<span class="hljs-title function_">splitVendorChunkPlugin</span>()] 
 }}
</code></pre>
<p>###åˆ†åŒ…ç­–ç•¥è¿›é˜¶æŒ‡å—</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">build</span>:{ <span class="hljs-attr">rollupOptions</span>:{ <span class="hljs-attr">output</span>:{ <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>){ <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'echarts'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'echarts'</span> <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'monaco-editor'</span>))<span class="hljs-keyword">return</span><span class="hljs-string">'monaco'</span> }}}}
</code></pre>
<p>##æŠ€å·§äº”ï¼šSSRæ€§èƒ½é£è·ƒå®è·µ</p>
<p>###åŒæ„æ¸²æŸ“æ–°èŒƒå¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// server-entry.js (v3æ–°API)</span>
<span class="hljs-keyword">import</span> { renderToString } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/server-renderer'</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">url</span>) <span class="hljs-keyword">return</span>{
 html <span class="hljs-keyword">await</span> <span class="hljs-title function_">renderToString</span>(app),
 <span class="hljs-attr">preloadLinks</span>:vite.<span class="hljs-title function_">getPreloadLinks</span>()<span class="hljs-comment">//vç‰¹æœ‰åŠŸèƒ½  </span>
}  
</code></pre>
<p>###æµå¼æ¸²æŸ“åŸºå‡†æµ‹è¯•</p>
<p>æ¨¡æ‹Ÿ100å¹¶å‘è¯·æ±‚:</p>
<pre><code class="hljs language-scss" lang="scss">SSR Mode      TTFB    Memory Usage   
----------    ------ --------------
Traditional   <span class="hljs-number">68ms</span>       <span class="hljs-number">1.2</span>GB     
Vite <span class="hljs-built_in">Streaming32ms</span>(-<span class="hljs-number">53%</span>)<span class="hljs-number">780</span><span class="hljs-built_in">MB</span>(-<span class="hljs-number">35%</span>)
</code></pre>
<p>##æ€»ç»“ä¸å±•æœ›</p>
<p>é€šè¿‡å¯¹è¿™äº”ä¸ªæ ¸å¿ƒé¢†åŸŸçš„æ·±åº¦æŒ–æ˜æˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°Viteå¦‚ä½•åœ¨å‰ç«¯å·¥å…·é“¾ç«äº‰ä¸­æŒç»­ä¿æŒé¢†å…ˆåœ°ä½ç‰¹åˆ«æ˜¯å…¶å¯¹ç°ä»£Webæ ‡å‡†çš„åŸç”Ÿæ”¯æŒå’Œå¯¹å¤§è§„æ¨¡åº”ç”¨çš„ä¸“æ³¨ä½¿å¾—å®ƒæˆä¸ºä¼ä¸šçº§åº”ç”¨çš„ç†æƒ³é€‰æ‹©æœªæ¥éšç€Bundlelessç†å¿µçš„æ™®åŠç›¸ä¿¡ä¼šæœ‰æ›´å¤šçªç ´æ€§çš„åˆ›æ–°å‡ºç°</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªå¯ä»¥è¡¥å…… Mermaid çš„å¯è§†åŒ–ç»„ä»¶åº“ Infographic]]></title>    <link>https://juejin.cn/post/7576592590947926050</link>    <guid>https://juejin.cn/post/7576592590947926050</guid>    <pubDate>2025-11-26T04:26:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576592590947926050" data-draft-id="7576592590947909666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªå¯ä»¥è¡¥å…… Mermaid çš„å¯è§†åŒ–ç»„ä»¶åº“ Infographic"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,LLM"/> <meta itemprop="datePublished" content="2025-11-26T04:26:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èš‚èšé›†å›¢æ•°æ®ä½“éªŒæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1486195450988471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªå¯ä»¥è¡¥å…… Mermaid çš„å¯è§†åŒ–ç»„ä»¶åº“ Infographic
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6944740539795259422/posts" data-v-d326b38e=""><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9909c804423411fa9fa1df65b5069d8~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6944740539795259422/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="èš‚èšé›†å›¢æ•°æ®ä½“éªŒæŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">èš‚èšé›†å›¢æ•°æ®ä½“éªŒæŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-11-26T04:26:01.000Z" title="Wed Nov 26 2025 04:26:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-11-26
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»2åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              æ•°æ®å¯è§†åŒ– @èš‚èšé›†å›¢
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æœ«åœ¨ SEE Conf å¤§ä¼šä¸Šï¼Œç”±èš‚èšçš„ AntV æ•°æ®å¯è§†åŒ–å›¢é˜Ÿå¼€æº Infographic ä¿¡æ¯å›¾å¯è§†åŒ–ï¼Œå¼€æºåœ°å€è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantvis%2Finfographic" title="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantvis%2Finfographic" target="_blank">antvis/Infographic</a>ï¼Œå®˜ç½‘åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2F" title="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2F" target="_blank">è¿™é‡Œ</a>ã€‚</p>
<p>å¤§æ¦‚çœ‹äº†ä¸‹ï¼ŒåŠŸèƒ½è¿˜æ˜¯æŒºå¼ºçš„ï¼Œå’Œ Mermaid æœ‰ç‚¹åƒï¼Œå¯ä»¥äº’è¡¥ã€‚Mermaid æ›´å¤šæ˜¯ä¸€äº›æ¶æ„å›¾ï¼Œæµç¨‹å›¾ä¹‹ç±»çš„æŠ€æœ¯å›¾è¡¨ï¼ŒInfographic æ›´å¤šçš„æ˜¯ä¸€äº›æ–‡å­—å›¾è¡¨ï¼Œç”¨äºå±•ç¤ºæ–‡å­—ä¿¡æ¯çš„é€»è¾‘ï¼Œé€‚ç”¨äº PPT å’Œå†™æ–‡ç« çš„åœºæ™¯ã€‚</p>
<p>ä¸¤è€…ç»“åˆä¸€ä¸‹ï¼Œåº”è¯¥èƒ½æœ‰ä¸é”™çš„æ•ˆæœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25e94de4c55d4b77837e689abf6196bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=NNuHwbnRxT6vGCf13a3Eyn2v44I%3D" alt="1.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä»‹ç»</h2>
<p>ä»å®˜ç½‘ä¸Šæ¥çœ‹ï¼ŒAntV Infographic æ–°ä¸€ä»£ä¿¡æ¯å›¾å¯è§†åŒ–å¼•æ“ï¼Œä¸»è¦çš„ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>100+ å†…ç½®æ¨¡æ¿ä¸ç»„ä»¶ï¼Œå¼€ç®±å¯ç”¨ï¼›ä» 0 åˆ° 1 æ„å»ºä¿¡æ¯å›¾ï¼Œä»æœªå¦‚æ­¤è½»æ¾ã€‚</li>
<li>è®© AI ç†è§£æ–‡æœ¬ï¼ŒæŠ½å–å…³é”®ä¿¡æ¯å¹¶ç”Ÿæˆé…ç½®ï¼Œä¸€é”®æ¸²æŸ“ä¸“ä¸šä¿¡æ¯å›¾ã€‚</li>
<li>ä¸€é”®åˆ‡æ¢é£æ ¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</li>
<li>æ— éœ€å®‰è£…ï¼Œåœ¨æµè§ˆå™¨å³å¯åˆ›ä½œã€‚ä¸°å¯Œç¤ºä¾‹åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼Œè½»æ¾æ‰“é€ ä¸“ä¸šä¿¡æ¯å›¾ã€‚</li>
</ul>
<p>ç›®æ ‡ï¼šè®©ä¿¡æ¯å›¾æˆä¸º AI æ—¶ä»£çš„è§†è§‰è¯­è¨€åŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨æ¡ˆä¾‹</h2>
<p>å¯¹å†™ä»£ç çš„æŠ€æœ¯äººæ¥è¯´ï¼Œç”¨æ³•è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œç›´æ¥ç”¨ä¸€ä¸ªé…ç½®å°±å¯ä»¥æ¸²æŸ“å‡ºä¸€ä¸ªæµç¨‹å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11c65b1a084d428898fd0e8faabce67f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=%2BhbcQmAimdL5UW0Z27ukyBKtPkU%3D" alt="2.png" loading="lazy"/></p>
<p>ç›®å‰ä»å®˜ç½‘çœ‹å†…ç½®äº† 100 ä¸ªä¿¡æ¯å›¾æ¨¡ç‰ˆï¼Œçœ‹èµ·æ¥éƒ½è¿˜æŒºå¥½çœ‹çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fd86d274b504565a56ef65c248505bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=829lDaWVgOqTvvz41mU35yJN278%3D" alt="preview.jpg" loading="lazy"/></p>
<p>æ›´å¤šçš„æ¨¡ç‰ˆæˆªå›¾ï¼Œå¯ä»¥å»è¿™é‡Œçœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Fexamples" title="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Fexamples" target="_blank">Gallery</a>ã€‚å¦å¤–ï¼Œçœ‹æ–‡æ¡£è¿˜å¯ä»¥åšä¸€äº›è‡ªå®šä¹‰å¼€å‘ä¿¡æ¯å›¾ï¼ŒåŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Freference%2Fjsx" title="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Freference%2Fjsx" target="_blank">JSX</a> çš„è¯­æ³•ï¼Œçœ‹ä¸æ‡‚ï¼Œè¿™é‡Œå°±è®©æŠ€æœ¯å¤§ä½¬å»çœ‹å§ã€‚</p>
<h2 data-id="heading-2">AI åº”ç”¨</h2>
<p>å®˜ç½‘è¿˜æä¾›äº†ä¸€ä¸ª AI åº”ç”¨ï¼Œå¯ä»¥è¾“å…¥æ–‡å­—ï¼Œç”Ÿæˆ Infographic ä¿¡æ¯å¯è§†åŒ–å›¾è¡¨ï¼Œç‚¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Fai" title="https://link.juejin.cn?target=https%3A%2F%2Finfographic.antv.vision%2Fai" target="_blank">Chat With AI</a> ä½“éªŒï¼Œåªéœ€è¦å¡«å…¥ LLM Keyï¼Œå°±å¯ä»¥é“¾æ¥ç”Ÿæˆä¿¡æ¯å›¾äº†ã€‚åŠŸèƒ½å¾ˆç®€å•ï¼Œä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œæ²¡æœ‰å¹¿å‘Šï¼Œä½†æ˜¯éœ€è¦è‡ªå·±å¡«å…¥å¤§æ¨¡å‹ Keyã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42c3d712ba0c4d86945723367dc04df8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=cP8lUsgWTzcweADlvksHtTZIPE4%3D" alt="4.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/955f92d57c0f4a0b9884e7bfcc25674a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=mwOryTGS5r6UIvh0cjRkO%2BFL77s%3D" alt="5.png" loading="lazy"/></p>
<p>æˆ‘è‡ªå·±ä½¿ç”¨ DeepSeek è¯•äº†ä¸€ä¸‹ï¼Œç”Ÿæˆäº†ä¸€ä¸ª 3D çš„å›¾ï¼ŒæŒºå¥½çœ‹çš„ï¼Œç”Ÿæˆäº† 10 å¤šæ¬¡ï¼Œæ¶ˆè€—å¤§æ¦‚è£ 1 åˆ†é’±ï¼Œè¿˜æ˜¯æŒºèŠ‚çœ Token çš„ï¼›å¦å¤–ä¹Ÿæ”¯æŒä¸€é”®å¤åˆ¶ä»£ç ï¼Œç„¶åç”¨è¿™ä¸ªå¼€æºåº“è¿›è¡Œæ¸²æŸ“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b50aa92e85ce48d6bdf531a8cfa82476~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JqC6JqB6ZuG5Zui5pWw5o2u5L2T6aqM5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764735961&amp;x-signature=WWMb0w4gJAdGU3%2F3Pckd4nXMsGM%3D" alt="6.png" loading="lazy"/></p>
<p>ä¸è¿‡ä¹Ÿæœ‰ç‚¹é—®é¢˜ï¼Œç”Ÿæˆå›¾è€æ˜¯è¿™å‡ ç§ï¼Œæ²¡æœ‰å‡åŒ€åˆ†å¸ƒåˆ° 100 ä¸ªä¿¡æ¯å›¾å›¾è¡¨ä¸­ï¼Œä¹Ÿä¸èƒ½æ¨èå¤šä¸ªï¼Œå¯ä»¥é€‰æ‹©ï¼Œæ„Ÿè§‰å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œä¸€å®šä¼šæ›´å¥½ç”¨ã€‚</p>
<h2 data-id="heading-3">æœ€å</h2>
<p>åˆšåˆšå¼€æºä¸ä¹…ï¼Œå¥½åƒéƒ½è¿˜æœç´¢ä¸åˆ°ï¼Œç›¸æ¯”äº picdocã€visdocã€napkin ç­‰ï¼Œæ›´å…³æ³¨äºå¼€æºæŠ€æœ¯è¿­ä»£ï¼Œè€Œä¸”å®˜ç½‘ä¹Ÿå¾ˆçº¯ç²¹ï¼Œæ²¡æœ‰ä»€ä¹ˆå•†ä¸šæ„Ÿã€‚</p>
<p>å¦‚æœå®˜ç½‘è¿™ä¸ª AI Agent åº”ç”¨æ¨èæ›´å¤šå›¾è¡¨ï¼Œä¹Ÿèƒ½å¤Ÿç”¨æˆ·è‡ªå·±é€‰æ‹©ï¼Œä¸ªäººæ„Ÿè§‰ä¸ä¼šæ¯”å•†ä¸šäº§å“å·®ï¼Œæ±‚æŠ€æœ¯å¤§ä½¬ä¸è¦æ–­æ›´ã€‚</p>
<p>ä½œè€…ï¼šæ•°æ®å¯è§†åŒ–<br/>
é“¾æ¥ï¼š<a href="https://juejin.cn/post/7576571960287510563" target="_blank" title="https://juejin.cn/post/7576571960287510563">juejin.cn/post/757657â€¦</a><br/>
æ¥æºï¼šç¨€åœŸæ˜é‡‘<br/>
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çˆ†è‚2å¤©ä¸‡å­—æ€»ç»“ï¼Œé£ä¹¦å¤šç»´è¡¨æ ¼ä¿å§†çº§æ•™ç¨‹æ¥äº†ã€å»ºè®®æ”¶è—ã€‘]]></title>    <link>https://juejin.cn/post/7576646533614583862</link>    <guid>https://juejin.cn/post/7576646533614583862</guid>    <pubDate>2025-11-26T04:29:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576646533614583862" data-draft-id="7576825095134658586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çˆ†è‚2å¤©ä¸‡å­—æ€»ç»“ï¼Œé£ä¹¦å¤šç»´è¡¨æ ¼ä¿å§†çº§æ•™ç¨‹æ¥äº†ã€å»ºè®®æ”¶è—ã€‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T04:29:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çˆ†è‚2å¤©ä¸‡å­—æ€»ç»“ï¼Œé£ä¹¦å¤šç»´è¡¨æ ¼ä¿å§†çº§æ•™ç¨‹æ¥äº†ã€å»ºè®®æ”¶è—ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:29:39.000Z" title="Wed Nov 26 2025 04:29:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 453 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯çˆ±åƒå¤§é¥¼çš„è‹ä½•ã€‚</p>
<p>åœ¨å¹´åˆé‚£ä¼šï¼Œåšäº†ä¸ª DeepSeek+é£ä¹¦å¤šç»´è¡¨æ ¼åˆ¶ä½œäººç”Ÿç®¡ç†ç³»ç»Ÿçš„è§†é¢‘æ•™ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dc56847aaa44d1d8880bb2c29ae8ef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=tbFjzulbJy4v3OnB9%2Bz7XozeAO0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åé¢åˆé™†é™†ç»­ç»­å†™äº†å¾ˆå¤šç¯‡é£ä¹¦å¤šç»´è¡¨æ ¼çš„æ–‡ç« ï¼Œåšäº†ä¸å°‘æœ‰æ„æ€çš„ä¸œè¥¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41d6ce75355247488e5efad628ed144f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=NBRGMO8bW7Y1TE6pBoBabov1PSI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¿™ä¸¤å¤©åšäº†åŸºäºé£ä¹¦å¤šç»´è¡¨æ ¼æ­å»ºçš„ Nano Banana Pro æ¡ˆä¾‹åº“å’Œæç¤ºè¯ï¼Œå…¨ç½‘ç°åœ¨ä¹Ÿæœ‰ 30000+äººæ›å…‰å’Œä½¿ç”¨äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe4bc246ce334c88afa670950765ea95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=fwv8eExmwD8c%2FnVm7kq0VvEwZ6k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æœ‰ç¤¾ç¾¤æˆ‘æ¯å¤©éƒ½åœ¨ç”¨çš„æ—©æŠ¥ç³»ç»Ÿä¹Ÿæ˜¯åŸºäºé£ä¹¦å¤šç»´è¡¨æ ¼è‡ªåŠ¨åŒ–æ­å»ºçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40a1379c87cd4d709a739bea6f902365~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=RfVU51y6INsZyaERHwpXEWgTkJU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æœ‰è‡ªå·±å…¬ä¼—å·çš„æ•°æ®åˆ†æç³»ç»Ÿï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04e63ada35f54cbbb56e37d6e90c4f72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=fPC5S9ScBhlwZYKEY0g8Id5vBOk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤ªå¤šäº†ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—å‡ºäº†ã€‚</p>
<p>ä½†æˆ‘å‘ç°ï¼Œå¥½åƒä¸€ç›´æ²¡æœ‰ç³»ç»Ÿæ€§çš„æ¥è®²è®²ç©¶ç«Ÿå¤šç»´è¡¨æ ¼è¯¥æ€ä¹ˆä½¿ç”¨ï¼Œè¿™ä¸ªäº‹æƒ…ï¼Œæˆ‘å¾ˆæ—©å°±æƒ³å†™äº†ï¼Œä½†ä¸€ç›´è¢«äº‹æƒ…æ‹–ç€ã€‚</p>
<p>è¿˜æœ‰æˆ‘å‘ç°ï¼ŒçœŸçš„è›®å¤šäººæŒºéœ€è¦è¿™æ ·ä¸€ä»½æ•™ç¨‹æ¥ç€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42e1503f3edc4e3cae9e2e19b00a7d61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=ftE21Sj%2FK20BIK%2Blf3WusZBd2U0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘å†³å®šèŠ±æ—¶é—´ï¼Œæ¥å‡ºä¸€ç¯‡ä¿å§†çº§çš„æ•™ç¨‹ï¼Œæ¥å¥½å¥½ç³»ç»Ÿæ€§çš„è®²ä¸‹é£ä¹¦å¤šç»´è¡¨æ ¼ã€‚</p>
<blockquote>
<p>å†™äº†å¾ˆä¹…ï¼Œä¸å‡ºæ„å¤–ï¼Œè¿™ä¸€ç¯‡åˆä¼šéå¸¸é•¿ï¼Œå¯ä»¥å…ˆç‚¹èµæ”¶è—èµ·ï¼Œå“ˆå“ˆå“ˆã€‚ä¸è¿‡æˆ‘æ¨èä½ ä¸€å®šè¦åˆ’åˆ°æ–‡æœ«ï¼Œæµ‹æµ‹è‡ªå·±çš„æ‰‹é€Ÿ!</p>
</blockquote>
<p>ç”¨ Nano Banana Pro ç”»äº†ä¸€ç¯‡æœ¬æ–‡çš„ä¿¡æ¯å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5759c34abaa94184bbcbfd54b693503b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=dpioKv%2Bzaf0sJawI3fNagNSjMnM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åç”¨æœ€æ–°çš„ NotebookLM åšäº†ä¸ª LOL é£æ ¼çš„ PPTï¼Œæ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘æ¥å‘ä½ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce194a315cbd43b6a3085ffd7bc57984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=FrM84Ul7gO%2FSScxq%2BEOKmhwHi88%3D" alt="wxv_4266989325486653441" loading="lazy"/></p>
<h2 data-id="heading-0">ä½•ä¸ºé£ä¹¦å¤šç»´è¡¨æ ¼</h2>
<p>æèµ·è¡¨æ ¼ï¼Œå¤§å®¶è„‘å­é‡Œè¹¦å‡ºæ¥çš„ç¬¬ä¸€ä¸ªç”»é¢ï¼Œè‚¯å®šè¿˜æ˜¯ Excelã€‚</p>
<p>é‚£é—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶éƒ½æœ‰ Excel äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Ÿå®ƒä¿©åˆ°åº•æœ‰å•¥æœ¬è´¨åŒºåˆ«ï¼Ÿ</p>
<p>å¦‚æœä¸ææ‡‚è¿™ä¸ªåº•å±‚é€»è¾‘ï¼Œä½ ç”¨å¤šç»´è¡¨æ ¼æ°¸è¿œåªä¼šè§‰å¾—å®ƒæ˜¯å¦ä¸€ä¸ª Excelã€‚</p>
<p>ä½†å®é™…ä¸Šï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œ<strong>Excel æ˜¯ä¸€å—è‡ªç”±çš„ç”»å¸ƒï¼Œè€Œé£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5080a3b7d18d433ea65774697d8cd6bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=kaX0iIOqy8%2F2XbTDoPAW1Pj4%2BEs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¯å¤©çš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åœ¨å¤„ç†æ•°æ®ï¼šå°åˆ°ä»Šå¤©è·Ÿè¿›äº†å‡ ä¸ªå®¢æˆ·ã€æµ‹è¯„äº†å“ªæ¬¾ AI å·¥å…·ï¼Œå¤§åˆ°æ•´ä¸ªå›¢é˜Ÿçš„ OKR è¿›åº¦ã€ä¸Šåƒä¸ªé¡¹ç›®çš„æ’æœŸã€‚</p>
<p>åœ¨ Excel é‡Œï¼Œä½ å¯ä»¥åœ¨å•å…ƒæ ¼ A1 å†™æ—¥æœŸï¼Œåœ¨ A2 å†™æ–‡å­—ï¼Œç”šè‡³åœ¨ A3 ç”»ä¸ªç”»ï¼Œå®ƒå¾ˆè‡ªç”±ï¼Œä½†ä¹Ÿå› ä¸ºå¤ªè‡ªç”±ï¼Œæ•°æ®æ˜¯ã€Œæ•£ã€çš„ï¼Œå¾ˆéš¾è¢«æœºå™¨ç†è§£å’Œå¤ç”¨ã€‚</p>
<p>è€Œé£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œå®ƒæ˜¯<strong>ç»“æ„åŒ–</strong>çš„ã€‚</p>
<ul>
<li>å­—æ®µï¼ˆFieldsï¼‰ï¼š è¿™é‡Œçš„åˆ—ä¸å«åˆ—ï¼Œå«å­—æ®µã€‚ä½ å¿…é¡»ç»™æ¯ä¸€åˆ—å®šå¥½ã€Œè§„çŸ©ã€ã€‚è¿™ä¸€åˆ—æ˜¯ã€Œæ—¥æœŸã€ï¼Œä½ å°±åªèƒ½é€‰æ—¶é—´ï¼›é‚£ä¸€åˆ—æ˜¯ã€Œå•é€‰ã€ï¼Œä½ å°±ä¸èƒ½çå¡«æ–‡å­—ã€‚</li>
<li>è®°å½•ï¼ˆRecordsï¼‰ï¼š æ¯ä¸€è¡Œä¸ä»…ä»…æ˜¯ä¸€è¡Œå­—ï¼Œè€Œæ˜¯ä¸€æ¡å®Œæ•´çš„æ•°æ®èµ„äº§ã€‚</li>
</ul>
<p>æ­£æ˜¯å› ä¸ºè¿™ç§ã€Œä¸è‡ªç”±ã€çš„ä¸¥æ ¼é™åˆ¶ï¼Œæ‰æ¢æ¥äº†åç»­å¤„ç†æ•°æ®çš„æå¤§è‡ªç”±ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/363d695232fd45129c10943d830e383e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=O9c58gRBPOUaowJstMcslGwtf98%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦å¤–ï¼ŒExcel æ˜¯æœ¬åœ°çš„ï¼Œä½†é£ä¹¦å¤šç»´è¡¨æ ¼æ˜¯äº‘åŸç”Ÿçš„ï¼Œå®ƒæ”¯æŒå•ä¸ªè¡¨æ ¼ä¸€åƒä¸‡è¡Œæ•°æ®ï¼Œèƒ½å®¹çº³ 1000 ä¸ªäººåŒæ—¶åœ¨çº¿ç¼–è¾‘ã€‚</p>
<p>æœ€ç‰›çš„æ˜¯å®ƒçš„æƒé™ç®¡ç†ï¼Œä¸ä»…ä»…æ˜¯é”ä½æ•´ä¸ªè¡¨ï¼Œå®ƒèƒ½ç²¾ç¡®åˆ°ï¼šè¿™ä¸€åˆ—æ•°æ®ï¼Œåªæœ‰è€æ¿èƒ½çœ‹ï¼›é‚£ä¸€åˆ—æ•°æ®ï¼Œåªæœ‰è´¢åŠ¡èƒ½æ”¹ã€‚è¿™ç§é¢—ç²’åº¦çš„æ§åˆ¶ï¼Œä¼ ç»Ÿè¡¨æ ¼å¾ˆéš¾åšåˆ°ã€‚</p>
<p>å½“ç„¶äº†ï¼Œæˆ‘è§‰å¾—éå¸¸ nice çš„åŠŸèƒ½æœ‰ AI å­—æ®µæ·å¾„ã€ä»ªè¡¨ç›˜å’Œè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œç”šè‡³å¯ä»¥ç›´æ¥èƒ½å¯¹æ¥æ‰£å­å·¥ä½œæµå’Œæ™ºèƒ½ä½“ï¼Œå¯ç©æ€§éå¸¸å¤šã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨æˆ‘çš„ç†è§£é‡Œï¼Œé£ä¹¦å¤šç»´è¡¨æ ¼æ˜¯ä¸¤æ ·ä¸œè¥¿ï¼š</p>
<ul>
<li><strong>ç»™æ™®é€šäººçš„ã€Œé›¶ä»£ç æ•°æ®åº“ã€</strong>ï¼š ä½ ä¸éœ€è¦æ‡‚ SQLï¼Œä¸éœ€è¦æ‡‚ç¼–ç¨‹ï¼Œå°±èƒ½æ­å»ºå‡ºä¸€å¥—åƒ CRMã€ERP é‚£æ ·ä¸“ä¸šçš„ä¸šåŠ¡ç®¡ç†ç³»ç»Ÿã€‚</li>
<li><strong>ç»™æå®¢çš„ã€ŒAI ç”Ÿäº§åŠ›å¼•æ“ã€</strong>ï¼š å®ƒæ˜¯ä¸€ä¸ªä»¥ã€Œå­—æ®µã€ä¸ºé¢—ç²’åº¦çš„è‡ªåŠ¨åŒ–å·¥å‚ï¼Œå¸®æˆ‘ä»¬æŠŠé‡å¤ã€ç¹ççš„ä¿¡æ¯å¤„ç†å·¥ä½œï¼Œå…¨éƒ¨æ‰˜ç®¡ç»™ AI å’Œç³»ç»Ÿã€‚</li>
</ul>
<h2 data-id="heading-1">åˆçº§ç©æ³•</h2>
<p>å…ˆè¯´ä¸‹åœ¨å“ªé‡Œä½¿ç”¨ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æ¥åœ¨é£ä¹¦å°±å¯ä»¥æ‰“å¼€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf79a27f0984cd2a1e73a1a1536911f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=SINVyoZ2GiGvuwWEneW7lhnudtk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç°åœ¨é£ä¹¦å¤šç»´è¡¨æ ¼ä¹Ÿå·²ç»ç‹¬ç«‹äº†ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯ç›´æ¥æ‰“å¼€ä»¥ä¸‹åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbase.feishu.cn%2F" target="_blank" title="https://base.feishu.cn/" ref="nofollow noopener noreferrer">base.feishu.cn/</a></p>
<p>æ³¨å†Œå¥½åç‚¹å‡»æ–°å»ºå¤šç»´è¡¨æ ¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c09b6702af04f63b25e015c42719df7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=g%2FkDFwXKpJCZDSIS9qaWmtBRRn4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥åŸºäºæ¨¡æ¿åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ–°å»ºä¸€ä¸ªç©ºç™½çš„è¡¨æ ¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4263c3c8d964f7ea401b94af287b05c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=WrheL8YQtqP2Bbd1NsCFC9Odzys%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œä»¥æ–°å»ºç©ºç™½è¡¨æ ¼ä¸ºä¾‹ï¼Œç‚¹è¿›æ¥åæ˜¯è¿™æ ·å­çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ffaf25288fc4d05aea3560a03fd44e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=ZAQ8jVkZM%2FPXpP%2B6QGrD3KypBRc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¦æƒ³ç©å¥½å¤šç»´è¡¨æ ¼ï¼Œéœ€è¦æŒæ¡å¥½<strong>å­—æ®µã€è§†å›¾ã€ä»ªè¡¨ç›˜ã€å­—æ®µæ·å¾„ã€å·¥ä½œæµã€è‡ªåŠ¨åŒ–</strong>è¿™å‡ ä¸ªçŸ¥è¯†ç‚¹ã€‚</p>
<p><strong>1ã€å­—æ®µ</strong></p>
<p>å½“é¼ æ ‡ç‚¹é¦–åˆ—çš„å‰ªå¤´ä¸‹æ‹‰ï¼Œé€‰æ‹©ä¿®æ”¹å­—æ®µ/åˆ—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f3c747d80114a4187cea9fdc4a19a50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=g4O48M%2Bc7kYuh9nbP1S8sD3sY%2Bs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°±å¯ä»¥çœ‹åˆ°å¾ˆå¤šçš„å­—æ®µç±»å‹ï¼Œæœ‰æ–‡æœ¬ã€æ—¥æœŸã€æ•°å­—ã€è¶…é“¾æ¥ç­‰ã€‚é€‰æ‹©äº†å¯¹åº”çš„ç±»å‹åï¼Œè¯¥åˆ—å°±ä¼šæŒ‰ç…§å½“å‰ç±»å‹çº¦æŸæ¥ï¼Œæ¯”å¦‚é€‰æ‹©äº†æ•°å­—ï¼Œé‚£è¿™ä¸€åˆ—å°±åªèƒ½å¡«æ•°å­—äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f95722d09f045ef8d4d9ac0bb4123f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=L4VeNBkppnutHtvVmI6XD2vDhAk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæœ‰ä¸ªç±»å‹å…¬å¼è¿™ä¸ªç±»å‹ï¼Œå¾ˆæœ‰æ„æ€ï¼Œå°±æ˜¯æˆ‘é€‰äº†å…¬å¼åï¼Œå°±å¯ä»¥åƒ Excel é‡Œå‡½æ•°ä¸€æ ·è¿›è¡Œå®šä¹‰å…¬å¼ï¼Œæœ€ç‰›é€¼çš„æ˜¯ï¼Œå¯ä»¥å€ŸåŠ© AI æ¥ç”Ÿæˆå…¬å¼ã€‚</p>
<p>æ¯”å¦‚æˆ‘çš„å…¬ä¼—å·æ•°æ®åˆ†æå¤šç»´è¡¨ä¸­ï¼Œèµé˜…æ¯”çš„è®¡ç®—å°±å¯ä»¥ç›´æ¥è®© AI ç”Ÿæˆå…¬å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02238157ba8f4323b7b76c73d22902c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=UyaqjWbpTehOEheQ4JuEZ9Mhhog%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”¨æ¥åšæ•°æ®åˆ†æä¸è¦å¤ªèˆ’æœï¼Œå…³é”®æˆ‘å†ä¹Ÿä¸ç”¨å»æƒ³å¤æ‚çš„å…¬å¼æˆ–è€…æ‰‹åŠ¨å»ç‚¹ç‚¹ç‚¹äº†ï¼ŒAI è‡ªåŠ¨å¸®æˆ‘å°±å®Œæˆäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1821a36596dd47459aca73a95a7138f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=tPaQdv%2Bn%2FaPJgqxNSwV7ohAOmZc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“ç„¶åœ¨å…¬å¼ä¸­ä¹Ÿå†…ç½®äº†å¾ˆå¤šçš„é€»è¾‘å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0280deafb808493a89a5a0d48adca555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=v%2Buj%2FMcbVL4mf7ipnRSmiGfGbMc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p>å° tipsï¼šå¦‚æœéœ€è¦ä¸Šä¼ å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼Œå­—æ®µç±»å‹ç›´æ¥é€‰æ‹©é™„ä»¶å°±å¥½äº†ã€‚</p>
</blockquote>
<p><strong>2ã€è§†å›¾</strong></p>
<p>è§†å›¾å°±æ˜¯è¡¨æ ¼æ•°æ®çš„ä¸€ç§å‘ˆç°æ–¹å¼æ¥ç€ï¼Œæ¯”å¦‚é»˜è®¤çš„æ˜¯è¡¨æ ¼è§†å›¾ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å¾ˆå¤šè§†å›¾ï¼Œå¸¸ç”¨çš„æœ‰æ—¥å†è§†å›¾å’Œç”»å†Œè§†å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af14bc313e5d41b78a3b81674fb98469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=ymTvR8wzHlrcBl5%2BGitAtIJmcR8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åƒè¿™ç§ç”»å†Œè§†å›¾ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¥½ï¼ˆzhuangï¼‰çœ‹ï¼ˆbiï¼‰ç”¨çš„ï¼Œçœ‹ç€å¿ƒæƒ…ä¹Ÿå¾ˆèˆ’æœæ¥ç€ï¼Œæ‰€ä»¥è¡¨æ ¼å»ºè®®å¯ä»¥åŠ ä¸Šä¸ªé™„ä»¶å­—æ®µæäº›å›¾ä¸Šå»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af21717380874108832d1f7643cb6f63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=xkZgdzTEgs7qTIh1zvgPsDxoGmU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶ä¸­æ—¥å†è§†å›¾åœ¨æ¶‰åŠä¸€äº›éœ€è¦æ ¹æ®æ—¥æœŸæ¥çœ‹æ•°æ®çš„åœºæ™¯å°±å¾ˆé€‚åˆï¼Œæ¯”å¦‚é¡¹ç›®å¾…åŠç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c19b61df8d3848ca854023abd6762b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=EXZSRAdkqAfkW1NM3gTed5%2FYPL8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¡¨å•è§†å›¾ä¸»è¦ç”¨æ¥åšé—®å·æ”¶é›†æ•°æ®ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ç»„ç»‡æ´»åŠ¨é—®å·ï¼Œå°±å¯ä»¥æŠŠå¤šç»´è¡¨æ ¼æ•°æ®è½¬ä¸ºè¡¨å•è§†å›¾ï¼Œç„¶åç›´æ¥åˆ†äº«å‡ºå»ï¼Œåˆ«äººå¡«äº†é—®å·çš„æ•°æ®å°±ä¼šè‡ªåŠ¨è½åˆ°å¤šç»´è¡¨æ ¼ä¸­æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8773efe78b240aaaec44c06ab53be3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=Buuq2BOYJr44yQrjC3q8TB4XrWA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“ç„¶å¦‚æœæ¶‰åŠåˆ°é¡¹ç›®ç®¡ç†ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ç”˜ç‰¹è§†å›¾ï¼Œæ¥æŸ¥çœ‹é¡¹ç›®æ•´ä½“çš„ç”˜ç‰¹å›¾ã€‚</p>
<p><strong>3ã€ä»ªè¡¨ç›˜</strong></p>
<p>ä»ªè¡¨ç›˜æˆ‘çš„ç†è§£å…¶å®æ˜¯å€ŸåŠ©äº†å¾ˆå¤šçš„å‰ç«¯ç»„ä»¶æ¥è‡ªå®šä¹‰æ­å»ºçš„ä¸€ä¸ªæ•°æ®çœ‹æ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa32ab95af3e4982b6b6584e89b11b31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=QEFoGRZrkKvWEuLLZUkaGJ%2FFdN0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æŒ‰é’®ï¼ŒæŒ‡æ ‡ç­‰ï¼Œè¿˜æ˜¯æ¯”è¾ƒå…¨çš„ï¼Œæ¯”å¦‚æˆ‘çš„å…¬ä¼—å·æ•°æ®åˆ†æä»ªè¡¨ç›˜çœ‹ç€å°±å¾ˆæœ‰ç‚¹å‡»æ¬²æœ›ï¼Œå‡ ä¹æ¯å¤©éƒ½ä¼šåœ¨ä¸Šé¢çœ‹æ•°æ®ï¼Œé¢‡æœ‰ä¸€è‚¡å½“å¹´é¢†å¯¼çœ‹å¤§å±æ•°æ®çš„æ ·å­äº†ï¼Œåªä¸è¿‡ï¼Œé¢†å¯¼æ˜¯åˆ«äººï¼Œæˆ‘åªæœ‰è‡ªå·±ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc5bb3edfa4d447cb841ad22144dad38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=S6QwaR7UbrT4EgdmtB9nfgf5FVE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»ªè¡¨ç›˜çš„å»ºç«‹å…¶å®æ¯”è¾ƒç®€å•ï¼Œä¸å¤–ä¹æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li><strong>æ·»åŠ ç»„ä»¶</strong>ï¼šé€‰æ‹©ç»„ä»¶ç±»å‹ï¼Œå°±æ˜¯è¦å‘ˆç°å•¥æ ·å­çš„å±•ç¤ºæ•ˆæœï¼Œæ¯”å¦‚æŠ˜çº¿å›¾</li>
<li><strong>åŸºç¡€é…ç½®</strong>ï¼šé€šå¸¸éœ€è¦é€‰æ‹©æ•°æ®æºï¼Œæ•°æ®èŒƒå›´ã€ç»Ÿè®¡æ–¹å¼ã€é€‰æ‹©å­—æ®µï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å„è‡ªç»„å»ºéœ€è¦è‡ªå®šä¹‰çš„é…ç½®ã€‚</li>
<li><strong>è‡ªå®šä¹‰é…ç½®</strong>ï¼šé…ç½®ç»„ä»¶çš„èƒŒæ™¯é¢œè‰²ã€æ ‡é¢˜æ ·å¼ã€å­—ä½“æ ·å¼ç­‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2e1f4d90954477fbeea3d759bf1efc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=ExFCdfzsfzeRDRpa2haaHMHBHk0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€ä¹ˆå¸ƒå±€å’Œå±•ç¤ºå®Œå…¨éƒ½æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œæ‹–æ‹‰æ‹½å°±è¡Œï¼Œç„¶åè¿˜å¯ä»¥é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f437a3d201424a66853323f6ba0619b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=nWuPQ19efhQMn6Jvb%2Fe8FkPKRPY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœªæ¥ä¸»é¢˜æˆ‘ç”¨çš„æ¯”è¾ƒå¤šï¼Œçœ‹ç€ä¼šæ›´æ˜¾å¾—é«˜çº§ç§‘æŠ€ä¸€äº›ã€‚</p>
<p><strong>4ã€å­—æ®µæ·å¾„</strong></p>
<p>å­—æ®µæ·å¾„æ˜¯é›†æˆäº†éå¸¸å¼ºå¤§çš„ AI èƒ½åŠ›ï¼Œå¯ä»¥å¯¹è¯¥åˆ—åšå¾ˆå¤šèƒ½åŠ›æ‹“å±•ï¼Œ<strong>æ¯”å¦‚å¯ä»¥è‡ªåŠ¨åˆ†ç±»ï¼Œä¿¡æ¯æå–ã€æ€»ç»“ã€ç¿»è¯‘ï¼Œè‡ªåŠ¨å¡«å……ï¼Œå³æ¢¦ç”Ÿå›¾ç­‰</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee8cb96466a04a3da96eaaa2d5ffd247~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=tISSLdtWAXulrZ38bQjkCXNdcCA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”¨æ³•ä¸éš¾ï¼Œå°±æ‹¿åˆ†ç±»è¿™ä¸ªå­—æ®µæ·å¾„æ¥ä¸¾ä¾‹ï¼Œé€‰æ‹©ã€Œåˆ†ç±»ã€åï¼Œæ·»åŠ å¥½æƒ³è¦è¿›è¡Œåˆ†ç±»çš„ç±»åˆ«ï¼Œé€‰æ‹©ä¸€ä¸ªå­—æ®µç”¨æ¥åšåˆ†ç±»ä¾æ®ï¼Œè¾“å…¥å‚è€ƒç¤ºä¾‹ï¼Œè‡ªå®šä¹‰åˆ†ç±»éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeea215bb8944569997c4a8cd5babf85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=n63MnQ32ZaSuhzX24cDIjWoI78g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯ä¸ª AI çš„ promptï¼Œå†™çš„ç²¾å‡†ï¼Œè‡ªåŠ¨åˆ†ç±»å°±åŸºæœ¬ä¸ä¼šå‡ºé”™ï¼Œç„¶åæ‰“å¼€ã€Œè‡ªåŠ¨æ›´æ–°ã€æŒ‰é’®ï¼Œå°±èƒ½æ–°å¢ä¸€æ¡æ•°æ®å°±ä¼šè‡ªåŠ¨æ ¹æ®è¦æ±‚åšå¥½åˆ†ç±»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eefe978c2cc468e9131bbea34723e78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=TWqKqB8wyoBIeS1%2BVmyiuPLW7Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æ¯”å¦‚æˆ‘çš„ AI æ—©æŠ¥ç³»ç»Ÿè¿™é‡Œçš„å­—æ®µæ·å¾„é€‰æ‹©äº† DeepSeek-R1ï¼Œä¸“é—¨åšæ ¼å¼è½¬æ¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1590571e9aa4f56a75242603f85730e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=UrwczdpMO%2FfcVBNgHFrvp%2FUQi%2F0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®åœ¨å­—æ®µæ·å¾„ä¸­å¿ƒä¸­è—äº†éå¸¸å¤šæœ‰ç”¨çš„å­—æ®µæ·å¾„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7441bb400a9d4bb9bc2a789ca13920ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=dtNP9TkGzeJIcHoUm8NRaCDr%2BUc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‚£å¦‚æœéƒ½ä¸å¤Ÿç”¨ï¼Œç”šè‡³å¯ä»¥è‡ªå·±å¼€å‘å­—æ®µæ·å¾„ï¼Œç„¶åå‘å¸ƒï¼Œæ¥æ»¡è¶³è‡ªå®šä¹‰éœ€æ±‚ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä¹‹å‰åœ¨è¿™ç¯‡æ–‡ç« ä¸­å°±æœ‰è¯¦ç»†ä»‹ç»å¦‚ä½•å°†æ‰£å­æ™ºèƒ½ä½“å‘å¸ƒåˆ°é£ä¹¦å¤šç»´è¡¨æ ¼å­—æ®µæ·å¾„çš„æ•™ç¨‹ã€‚</p>
<blockquote>
<p>ç”¨AIä¸€é”®æ‰¹é‡åˆ¶ä½œLabubuæ‰‹æœºå£çº¸ï¼Œè¿™ä¸ªAgentå¤ªé…·å•¦ï¼</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9026ba22525d414aacfa0665e461085a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=9q53P7P9o%2B1aH7cBAKSogeLL2G0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯åœ¨æ‰£å­å‘å¸ƒæ¸ é“é‚£é‡Œé€‰æ‹©ä¸€ä¸‹å‘å¸ƒåˆ°å¤šç»´è¡¨æ ¼ï¼Œç„¶ååœ¨å¤šç»´è¡¨æ ¼ä¸­é€‰æ‹©è¯¥å­—æ®µæ·å¾„å°±å¥½äº†ã€‚</p>
<h2 data-id="heading-2">è¿›é˜¶ç©æ³•</h2>
<p>è¯´äº†åŸºç¡€çš„ç©æ³•ï¼Œä¸‹é¢æ˜¯è¿›é˜¶ç©æ³•ï¼Œä¸»è¦æ˜¯å¦‚ä½•åšå·¥ä½œæµã€è‡ªåŠ¨åŒ–ä»¥åŠåº”ç”¨æ¨¡å¼ã€‚</p>
<p>å…ˆè¯´ä¸‹å·¥ä½œæµï¼Œå¯ä»¥ç”¨èŠ‚ç‚¹çš„æ–¹å¼æ¥æŒ‰é¡ºåºæ‰§è¡ŒæŒ‡å®šçš„ä»»åŠ¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2558fc9d96584cf584a1a8980a51c87f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=zzFHEwRjECosf49fHiAWrvATSLU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘çš„ AI æ—©æŠ¥å¯ä»¥è®¾å®šä¸€ä¸ªå·¥ä½œæµï¼Œå½“æœ‰è®°å½•å˜æ›´æ—¶ï¼Œè‡ªåŠ¨å‘é€åˆ°å¾®ä¿¡ã€‚</p>
<p>åœ¨å·¥ä½œæµè¿™é‡Œå¯ä»¥é€‰æ‹© AI å’ŒèŠ‚ç‚¹æ·å¾„ï¼Œæ¯”å¦‚ AI è¯»å–ç½‘é¡µé“¾æ¥ï¼Œè¿™ä¸ªè¿˜æ˜¯å¾ˆå®ç”¨çš„åŠŸèƒ½äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e3d162aceab452094cb485f15be2737~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=WAnZN9rmRnVUx8agyj4NN9ltXZA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åè‡ªåŠ¨åŒ–å°±æ˜¯èƒ½å¤Ÿè‡ªåŠ¨æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚å®šæ—¶å‘é€æ¶ˆæ¯å•Šï¼Œç‚¹å‡»æŒ‰é’®è§¦å‘æ¶ˆæ¯ã€æ–°å¢æˆ–ä¿®æ”¹è®°å½•æ—¶è§¦å‘æ¶ˆæ¯ç­‰åœºæ™¯ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼ï¼Œåœ¨ã€Œåˆ†äº«ã€æŒ‰é’®æ—è¾¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfa70a742b5a41e3a5cb87daa24b8992~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=baRwxpjfCcJqMErls9nm24KxHfU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»è‡ªåŠ¨åŒ–åï¼Œå¯ä»¥é€‰æ‹©æ¨èçš„æµç¨‹ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c51673ed6fa44ff974df3fc93ea368b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=5qRI2BUa8cTWrFRg%2BRCBnNre8cY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä¸ªè‡ªåŠ¨åŒ–å…¶å®å°±åŒ…å« 2 å¤§éƒ¨åˆ†ï¼šã€Œå½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ã€ï¼Œã€Œå°±æ‰§è¡Œä»¥ä¸‹æ“ä½œã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a446aac780894725ba400378430eefc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=gqJplSlD4buUDyivMxOjurbRcbk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘åœ¨ AI æ—©æŠ¥ç³»ç»Ÿå°±è®¾å®šäº†éå¸¸å¤šçš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae20d7c006b14cd4a253b9d458a23305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=HuiuBtv%2FL4mmBduXp0zdOIbOT28%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ‰æ¯æ—¥å®šæ—¶ä»»åŠ¡ï¼Œä¹Ÿæœ‰æŒ‰é’®è§¦å‘ä»»åŠ¡ï¼Œè¿˜æœ‰æ–°å¢ä¿®æ”¹å­—æ®µä»»åŠ¡è§¦å‘çš„ä»»åŠ¡ã€‚</p>
<p>æ¯”å¦‚æ‹¿æ¯å¤© 10 ç‚¹è§¦å‘çš„è‡ªåŠ¨åŒ–ä»»åŠ¡æ¥æ‹†è§£ä¸‹ã€‚å…ˆé€‰æ‹©è§¦å‘æ¡ä»¶ä¸ºï¼šæ¯å¤©æ—©ä¸Š 10 ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740e6f45d845429ea94b83ea11ef7a47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=bA9b2m3oNcM5dF4OxfG15DUyx7w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶ååœ¨æ‰§è¡Œä¾§é€šè¿‡ HTTP è¯·æ±‚è°ƒç”¨æ—©æŠ¥çˆ¬è™«æœåŠ¡å»æŠ“å–æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/176e1664fb0f41379eafcd3c82984c75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=6btHsfIGp96hAzdyy2Esta22mxY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ­¥ï¼Œå°±æ˜¯æŠŠæŠ“åˆ°çš„æ•°æ®å†™å…¥å¤šç»´è¡¨æ ¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/560ce3a9670346aa816fcb0a0a6d344e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=k42JMpV1UfC6D2c6WsgGoDx5AFQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ ·ï¼Œæ¯å¤© 10 ç‚¹åœ¨ AI æ—©æŠ¥ç³»ç»Ÿä¸­å°±ä¼šè‡ªåŠ¨æœ‰ä¸€æ¡ AI æ—©æŠ¥æ•°æ®äº†ã€‚</p>
<p>è¿™ä¸ªæ˜¯æ ¸å¿ƒï¼Œå…¶ä»–çš„å¤æ‚çš„è‡ªåŠ¨åŒ–æµç¨‹éƒ½é€ƒä¸å¼€è¿™ä¸ªåŸç†ã€‚</p>
<p>åœ¨å³ä¾§è¿˜å¯ä»¥æŸ¥çœ‹å·¥ä½œæµçš„è¿è¡Œæ—¥å¿—ï¼Œå¯ä»¥çœ‹ä¸‹çœ‹ä¸‹æ˜¯å¦æ¯å¤©éƒ½æŒ‰æ—¶èƒ½å¤Ÿæ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40843ef70e794b058d18e0f1e14fcfee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=MEMa6N4dqrFMWTzDkuhKjz2bMIA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å·¥ä½œæµå’Œè‡ªåŠ¨åŒ–çš„é…åˆå‡ ä¹èƒ½è§£å†³ä»¥å‰æˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºä¸­å»åšçš„ task å’Œ workflowã€‚</p>
<p>ç„¶åæœ€åä¸€ä¸ªå°±æ˜¯æœ€è¿‘æ–°ä¸Šçš„å¤šç»´è¡¨æ ¼åº”ç”¨æ¨¡å¼äº†ã€‚è¿™ä¸ªæ„Ÿè§‰å¯ä»¥å•ç‹¬å†å‡ºä¸€ç¯‡æ–‡ç« äº†ï¼Œæ˜¯çœŸçš„å¼ï¼Œå°†å¤šç»´è¡¨æ ¼æ‹–æ‹‰æ‹½å°±å˜ä¸ºä¸€ä¸ªåº”ç”¨äº†ã€‚</p>
<p>å†…ç½®äº†ä¸å°‘æ¨¡æ¿ï¼Œåƒä»€ä¹ˆCRMã€ç”µå•†ç®¡ç†ç³»ç»Ÿã€é‡‡è´­ç®¡ç†ç³»ç»Ÿï¼Œç”Ÿäº§ç®¡ç†ç³»ç»Ÿç­‰éƒ½æœ‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/652db2d7b0c24ad089eb31836b82306b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=Zon7T8G6fqa9nz2bhMIidnazTMQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¿™ä¸ªç”µå•†ç›´æ’­ç®¡ç†ç³»ç»Ÿï¼Œå°±æ˜¯ç”¨åº”ç”¨æ¨¡å¼æ­å»ºçš„ï¼Œæ— æ•Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23185f18f7cb443c9a0633e7d82af9ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=1%2BTqd5HKv8vq%2FWpkl76LvaC1eIg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ›å»ºæ–¹å¼ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±åœ¨å¤šç»´è¡¨æ ¼å·¦ä¸‹æ–¹æœ‰ä¸ªã€Œåº”ç”¨ã€ï¼Œä¸€ç‚¹å‡»å°±è‡ªåŠ¨åŸºäºè¯¥è¡¨æ ¼åˆ›å»ºäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed4db8d0a2c043d1820f669981316091~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=0AWdT%2F7IslL3Y7z7mmOnlSrqNPo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¡µé¢å’Œç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5b70d47170845299979a95dd4f4f6e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=sKHipkOCzJToTPPKrQjiTShPyz8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä½“å¯¼èˆªå¸ƒå±€å¯ä»¥é€‰æ‹©ä¾§è¾¹å¯¼èˆªæˆ–è€…é¡¶éƒ¨å¯¼èˆªï¼Œå¯è‡ªå®šä¹‰ä¸»é¢˜å’ŒèƒŒæ™¯è‰²ã€‚éƒ½åœ¨ã€Œå¤–è§‚ã€è¿™é‡Œè®¾ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/310449e83a5d4e27b8e976d413e1e518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=a%2FLIswk5OFL3ncFpedNlaSvR3B8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»ä»»æ„ç»„ä»¶å³ä¸Šè§’çš„ä¸‰ä¸ªå°ç‚¹å°±å¯ä»¥å¯¹ç»„ä»¶è¿›è¡ŒåŸºç¡€é…ç½®å’Œè‡ªå®šä¹‰é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c06f48f4ac3c47bea0212853d08a12b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=vhTVk4A2ogaRR65c5M6ndvzuIzk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚åˆ—è¡¨ç»„ä»¶å°±å¯ä»¥è‡ªå®šä¹‰å­—æ®µå±•ç¤ºã€åˆ†ç»„ã€æ’åºç­‰åŸºç¡€ä¿¡æ¯ï¼Œä»¥åŠé…ç½®æ˜¯å¦æ˜¾ç¤ºç­›é€‰ã€æ’åºç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8583d43489fe4fc48f56459aa19ea24c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=wz8hr5Vp%2BHXwpxGawgjvFFKuhjE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥é€šè¿‡æ·»åŠ ã€Œåˆ‡ç‰‡å™¨ã€ç»„ä»¶æ¥åšç­›é€‰é¡¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fb4c34903834614aa9c65b6188aa4c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=BzKwdfbZ5UPRfLAldo8IbTHFlZ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€ç‰›çš„æ˜¯ï¼Œå½“æŠŠå¤šä¸ªå¤šç»´è¡¨æ ¼æ”¾åœ¨åŒä¸€ä¸ªç©ºé—´ï¼Œå°±å¯ä»¥åœ¨åº”ç”¨ä¸­ç›´æ¥å¼•ç”¨å¤šä¸ªå¤šç»´è¡¨æ ¼çš„ä¿¡æ¯äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1981dc67d734407dbf1056ad1a27c2ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=tofhkSS1BCYYsMnEIegjCD0xf9o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼šå¾ˆæ–¹ä¾¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f64c592a5714691a973f5682dc01212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=usT3c95d1n5xJOg7jWWvOa3CRlg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®åº”ç”¨æ¨¡å¼ä¸å¤æ‚ï¼Œä½†ç»†èŠ‚æ¯”è¾ƒå¤šï¼Œè¦æƒ³ç©å¥½ï¼Œè¿˜æ˜¯è¦å¤šå»è¯•è¯•ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯åˆ©ç”¨åº”ç”¨æ¨¡å¼å¤åˆ»ä¸€ä¸ªä½ è‡ªå·±æƒ³åšçš„ç³»ç»Ÿï¼Œæ¥æ„Ÿå—ä¸‹æ¯”è¾ƒå¥½ã€‚</p>
<h2 data-id="heading-3">èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<p>å…¶å®å¤šç»´è¡¨æ ¼èƒ½åšçš„å¾ˆå¤šï¼Œä½†ç”¨æ³•ä¸åŒã€‚</p>
<p>æˆ‘è§‰å¾—è¿˜æ˜¯éœ€è¦æŠŠè‡ªå·±ç°é˜¶æ®µä¸€äº›éœ€è¦ç³»ç»ŸåŒ–çš„æ•°æ®ç”¨å¤šç»´è¡¨æ ¼æ¥è§£å†³ã€‚</p>
<p>æ¯”å¦‚æˆ‘åšå…¬ä¼—å·ï¼Œå°±è¦ç”¨æ•°æ®åˆ†æï¼Œæ‰€ä»¥æˆ‘æ­å»ºäº†ä¸€ä¸ªåŸºäºå¤šç»´è¡¨æ ¼çš„æ•°æ®åˆ†æç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b299fd5943a44f368ba383fb28b6ae66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=VjwiORfcI8z4B4kiaUDK1fJC9mU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åé…åˆä»ªè¡¨ç›˜åˆ†æï¼Œæ¯å¤©çœ‹è‡ªå·±è¿›æ­¥ä¸€ç‚¹ç‚¹çš„æ„Ÿè§‰ï¼Œå°±å¾ˆé…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/617786fa20c9429cb502f4659a477d93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=HKb5x0M0mziPlW9SU%2BmOTqZ7e8Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼Œæˆ‘æƒ³è®°å½•äººç”Ÿæ›´å¤šçš„ç‰‡æ®µï¼Œæˆ‘å°±ä¼šå­¦ç€æ­å»ºä¸€ä¸ªäººç”Ÿç®¡ç†ç³»ç»Ÿï¼Œçœ‹çœ‹è‡ªå·±æ¯å¤©çš„æ—¶é—´è¢«å“ªäº›å ç”¨çš„æ›´å¤šï¼Œæ‰èƒ½æ›´å¥½çš„åšå¤ç›˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c632e1356cd4b2a9c0ac4e9dacb1433~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=yL1LrcWIm4SchfC4gAZCt4nXkVQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æƒ³è¦ç»™ç¤¾ç¾¤æ¯å¤©å®šæ—¶æ¨é€æ—©æŠ¥æ¶ˆæ¯ï¼Œæˆ‘å°±è‡ªå·±æ­å»ºäº†ä¸€ä¸ªæ—©æŠ¥ç³»ç»Ÿï¼Œä¹Ÿæ–¹ä¾¿æ¯æ—¥çœ‹æœ€æ–°çš„ AI èµ„è®¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f725a0ed979046928c72a24c3302a1b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=VpAu1LOGpGcBQC%2BQrPaz%2Bk7Xt6U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æƒ³è¦ç»™è‡ªå·±çš„æµ‹è¯• case åšä¸€ä¸ªæ±‡æ€»ç„¶ååˆ†äº«ï¼Œå°±æ­å»ºäº†ä¸€ä¸ª AI case è¯„æµ‹ç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6d0d406a294b6799b11e56b04f334c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=2b8JYOI34kd0x5%2B6iZ8F%2FoeAPL0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ç”šè‡³æŠŠå…¬å¸çš„ä¸šåŠ¡ä¹Ÿèå…¥åˆ°äº†å¤šç»´è¡¨æ ¼ï¼Œæ¯”å¦‚è´¢åŠ¡æ”¶å…¥ã€è®°è´¦ç­‰ã€‚</p>
<p>æœ‰äº†å¤šç»´è¡¨æ ¼çš„å„ç§ç³»ç»Ÿï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±æ•ˆç‡èƒ½æå‡ä¸å°‘ï¼Œæœ€å…³é”®çš„ï¼Œæˆ‘ä¸ç”¨å†å»å†™ä»£ç æ­å»ºä¸ªç³»ç»Ÿäº†ï¼Œå°±éå¸¸æ–¹ä¾¿ã€‚</p>
<p>åˆšå¥½æˆ‘çœ‹ä»–ä»¬ç°åœ¨æœ‰æ³¨å†Œæ´»åŠ¨ï¼Œç”¨æˆ‘è¿™ä¸ªé‚€è¯·ç ï¼šNewCangheï¼Œ</p>
<p>æ³¨å†Œåç«‹å¾— 1 ä¸ªæœˆä¸“ä¸šç‰ˆå…è´¹ä½¿ç”¨ï¼Œæäº¤åç­‰å®˜æ–¹å®¡æ ¸åä¸“ä¸šç‰ˆç¦åˆ©å°†åœ¨5ä¸ªå·¥ä½œæ—¥å†…åˆ†æ‰¹å‘æ”¾ï¼ŒåŠ èµ  2ä¸ªæœˆä¸“ä¸šç‰ˆå…è´¹ä½¿ç”¨åé¢ï¼Œæ¯å‘¨è‡³å°‘ä½¿ç”¨ä¸€æ¬¡å³å¯ä½“éªŒã€‚</p>
<p>å·å·çœ‹äº†ä¸‹ä¸“ä¸šä¼šå‘˜æƒç›Šè¿˜ä¸å°‘ï¼Œ5TB æ€»å­˜å‚¨ç©ºé—´ä»¥åŠå¤šç»´è¡¨æ ¼é«˜çº§èƒ½åŠ›éƒ½å¯ä»¥ç”¨ï¼Œå§æ§½ï¼Œå…è´¹é¢†å–3ä¸ªæœˆè¿˜æ˜¯å¾ˆé¦™çš„ï¼Œèµ¶ç´§å»ç™½å«–å…ˆğŸ˜„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a2be9a37e6b462394b9063fef59faee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736179&amp;x-signature=y4EBRkJ4DzlN56JBs3DMx69pN9s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…‘æ¢åœ°å€åœ¨è¿™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffcna6swh3rtl.feishu.cn%2Fshare%2Fbase%2Fform%2Fshrcn8BkxqoKYeA6XyZZAB7zK73" target="_blank" title="https://fcna6swh3rtl.feishu.cn/share/base/form/shrcn8BkxqoKYeA6XyZZAB7zK73" ref="nofollow noopener noreferrer">fcna6swh3rtl.feishu.cn/share/base/â€¦</a></p>
<h2 data-id="heading-4">å†™åœ¨æœ€å</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œå…¶å®æŒºæ„Ÿæ…¨çš„ã€‚ä»å¹´åˆé‚£ä¸ªç®€å•çš„è§†é¢‘æ•™ç¨‹ï¼Œåˆ°ä»Šå¤©è¿™ç¯‡å‡ åƒå­—çš„é•¿æ–‡ï¼Œæˆ‘æŠŠè‡ªå·±è¿™ä¹ˆä¹…å‹ç®±åº•çš„ç©æ³•éƒ½æå‡ºæ¥äº†ã€‚</p>
<p>è¯´å®è¯ï¼Œå·¥å…·å†å¼ºï¼Œç»ˆç©¶åªæ˜¯å·¥å…·ã€‚é£ä¹¦å¤šç»´è¡¨æ ¼ä¸æ˜¯ä¸‡èƒ½è¯ï¼Œå®ƒä¸èƒ½æ›¿ä½ å®Œæˆå·¥ä½œï¼Œä½†å®ƒèƒ½å¸®ä½ <strong>ç†æ¸…</strong>å·¥ä½œã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªæ›¾ç»ä¹ æƒ¯æ•²ä»£ç è§£å†³ä¸€åˆ‡çš„äººï¼Œæˆ‘ç°åœ¨æ›´äº«å—è¿™ç§ã€Œæ­ç§¯æœ¨ã€çš„å¿«æ„Ÿã€‚</p>
<p>æˆ‘ä»¬æŠ˜è…¾è¿™äº›ç³»ç»Ÿçš„åˆè¡·ï¼Œä»æ¥ä¸æ˜¯ä¸ºäº†ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸ºäº†æŠŠé‡å¤ã€æœºæ¢°çš„åŠ¨ä½œäº¤ç»™æœºå™¨ï¼ŒæŠŠæœ€å®è´µçš„æ—¶é—´ç•™ç»™æ€è€ƒï¼ˆæˆ–è€…å»åƒé¡¿å¤§é¥¼ï¼‰ã€‚</p>
<p>åˆ«å…‰é¡¾ç€æ”¶è—è¿›ã€Œåƒç°å¤¹ã€ã€‚</p>
<p>å“ªæ€•åªä»ä¸€ä¸ªç®€å•çš„è®°è´¦è¡¨æˆ–è€…å¾…åŠæ¸…å•å¼€å§‹ï¼Œå»åŠ¨æ‰‹è¯•ä¸€è¯•ã€‚</p>
<p>å½“ä½ çœ‹ç€æ‚ä¹±æ— ç« çš„æ•°æ®ï¼Œè¢«ä½ äº²æ‰‹é©¯æœæˆäº•äº•æœ‰æ¡çš„ä»ªè¡¨ç›˜æ—¶ï¼Œé‚£ç§å¯¹ç”Ÿæ´»çš„æŒæ§æ„Ÿï¼ŒçœŸçš„ä¼šä¸Šç˜¾ã€‚</p>
<p>å¦‚æœä½ åœ¨æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆå‘ï¼Œæˆ–è€…æœ‰å•¥è„‘æ´å¤§å¼€çš„åˆ›æ„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºéšæ—¶æ’©æˆ‘ã€‚</p>
<p>è¿™ç¯‡å†™å¾—å¤ªä¹…ï¼Œæˆ‘è¦æ»šå»ç¡è§‰äº†ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼]]></title>    <link>https://juejin.cn/post/7576580177662132234</link>    <guid>https://juejin.cn/post/7576580177662132234</guid>    <pubDate>2025-11-26T04:34:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576580177662132234" data-draft-id="7576646142315937833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T04:34:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:34:27.000Z" title="Wed Nov 26 2025 04:34:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 454 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è¿˜æ²¡ç§ƒé¡¶çš„è‹ä½•ã€‚</p>
<p>æ˜¨æ™šå¬äº† TRAE SOLO å›½å†…ç‰ˆä¸Šçº¿çš„å‘å¸ƒä¼šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a52e09b1f24a669b6039c91d2450ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=0XY9x7d8iNF1Vlt%2BhvEfs9PoZBs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ—¶éš” 4 ä¸ªæœˆï¼Œå®ƒç»ˆäºæ¥äº†ã€‚</p>
<p>æˆ‘ä¹Ÿç¬¬ä¸€æ—¶é—´åšäº†ä¸‹ä½“éªŒï¼Œåšäº†å‡ ä¸ª caseï¼Œå½•äº†ä¸ªè§†é¢‘ç»™å¤§å®¶çœ‹çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46ea2fc4cbe04f63a92a4f3b65840006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=tFRfXJgCl1EV6%2BCd0RqY8Btf6c0%3D" alt="wxv_4269304641676214281" loading="lazy"/></p>
<p>è¿½æº¯åˆ° 7 æœˆä»½ï¼Œé‚£æ—¶å€™å›½é™…ç‰ˆåˆšå¼€ Beta æµ‹è¯•ï¼Œå…¨ç½‘çˆ†ç«ï¼Œæ¿€æ´»ç çœŸæ˜¯ä¸€ç éš¾æ±‚ã€‚æˆ‘å½“æ—¶åºŸäº†å¾ˆå¤§åŠ²ï¼Œç¬¬ä¸€æ—¶é—´æŠ¢é²œä½“éªŒäº†ä¸€æŠŠï¼Œæ‰‹æ„Ÿç¡®å®æƒŠè‰³ï¼Œä¸ºæ­¤è¿˜ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« åˆ†äº«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e3bfebe492740cab632a4b7a26e89d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=wh5d7TvihbfhjeQt6wosEvfCtrk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ˜¯ä»é‚£æ—¶èµ·ï¼Œæˆ‘å’Œ Trae ç®—æ˜¯ã€Œæ ã€ä¸Šäº†ï¼Œå…³ç³»å˜å¾—ç›¸å½“å¾®å¦™ã€‚</p>
<p>åæ¥æˆ‘è¿˜æˆäº†æ­¦æ±‰çš„ Trae Fellowï¼Œåœ¨æ­¦æ±‰æäº†ä¸€åœºé»‘å®¢æ¾ã€‚çœ‹ç€å¤§å®¶åœ¨ç°åœºç”¨å®ƒä» 0 åˆ° 1 æ„å»ºé¡¹ç›®ï¼Œæˆ‘æ˜¯çœŸåˆ‡æ„Ÿå—åˆ°äº†å·¥å…·å¸¦æ¥çš„å˜åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/250626d7ed844bb0a57773ac8935e4ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=ZOAYXNR8s4WiRFhT3SGgg93OuTc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‡³äºä¸ºå•¥æˆ‘ä¸€ç›´ç›¯ç€ Trae ä¸æ”¾ï¼Œåˆä¸ºå•¥è§‰å¾—è¿™æ¬¡å›½å†…ç‰ˆ SOLO æ¨¡å¼çš„å‘å¸ƒæ„ä¹‰éå‡¡ï¼Ÿ</p>
<p>ç†ç”±å…¶å®å¾ˆç®€å•ã€‚</p>
<p>è™½ç„¶ Cursor å¾ˆå¼ºï¼Œä½†ç½‘ç»œé—®é¢˜æŠŠå¤ªå¤šäººæŒ¡åœ¨é—¨å¤–äº†ã€‚æˆ‘ä»¬å¤ªç¼ºä¸€æ¬¾èƒ½çœŸæ­£å¯¹æ ‡ç”šè‡³è¶…è¶Š Cursorï¼ŒåŒæ—¶åˆæ²¡æœ‰ä»»ä½•ç½‘ç»œé—¨æ§›çš„ AI IDE äº†ã€‚</p>
<p>AI ç¼–ç¨‹ä¸è¯¥æ˜¯å°‘æ•°äººçš„ç‰¹æƒã€‚</p>
<p>è¦æƒ³è®©è¿™ç§å¼ºå¤§çš„ç”Ÿäº§åŠ›çœŸæ­£é“ºå¼€ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½ä½“ä¼šåˆ°å®ƒçš„å¼ºå¤§ï¼Œå°±å¾—æŠŠé—¨æ§›è¸©ç¢ã€‚</p>
<p>è¿™æ­£æ˜¯ Trae è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨é»˜é»˜åšçš„äº‹ã€‚</p>
<p>11 æœˆ 25 æ—¥å‘å¸ƒçš„è¿™ä¸ªç‰ˆæœ¬ï¼Œç›´æ¥åŒæ­¥äº†å›½é™…ç‰ˆæœ€æ ¸å¿ƒçš„ SOLO Coder åŠŸèƒ½ï¼Œç”šè‡³åŒ…æ‹¬ Plan æ¨¡å¼ã€å¤šä»»åŠ¡å¹¶è¡Œè¿™äº›ç¡¬æ ¸èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87dc3653e8434bfe8a2e91642294e9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=qjd62r%2FZsZ1sX9yhB4UzN8vVVxk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æœ€æœ€å…³é”®çš„æ˜¯ï¼Œå®ƒç›®å‰<strong>å®Œå…¨å…è´¹</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6be1518803bd41b898e9a6726b5372a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1HT2kZ9K6%2F3WlOMEsRiK2pbvqUY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¯ä»¥å®æ—¶è·Ÿéšï¼Œè¿˜ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¡µé¢é¢„è§ˆï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>è¿™å°±å¾ˆæœ‰æ„æ€äº†ã€‚ä»¥å‰æˆ‘ä»¬ç”¨ AI å†™ä»£ç ï¼Œæ€»æ„Ÿè§‰åƒæ˜¯åœ¨ã€Œå¼€ç›²ç›’ã€ã€‚ä½ ç»™ä¸ªæŒ‡ä»¤ï¼ŒAI é—·å¤´å†™ï¼Œå†™å‡ºæ¥èƒ½è·‘ç®—è¿æ°”å¥½ï¼Œä¸èƒ½è·‘ä½ å°±å¾—åœ¨é‚£å¯¹ç€ä¸€å †ä»£ç å¹²çªçœ¼ï¼Œå®Œå…¨ä¸çŸ¥é“å®ƒä¸­é—´ç»å†äº†ä»€ä¹ˆå¿ƒè·¯å†ç¨‹ã€‚</p>
<p>ä½† TRAE SOLO ä¸»æ‰“çš„æ¦‚å¿µå«ã€ŒResponsive Coding Agentã€ã€‚</p>
<p>åˆ«è¢«è¿™ä¸ªè‹±æ–‡å“åˆ°ï¼Œæˆ‘è‡ªå·±ä¸Šæ‰‹ç›˜äº†ä¸€ä¸‹ï¼Œè§‰å¾—ç”¨å¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼š<strong>å®ƒä¸å†æ˜¯ä¸ªåªä¼šæ‰§è¡Œå‘½ä»¤çš„æ­»æ¿å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å’Œä½ ã€Œæœ‰å•†æœ‰é‡ã€çš„æ™ºèƒ½é˜Ÿå‹ã€‚</strong></p>
<p>å…·ä½“å¼ºåœ¨å“ªï¼Ÿæˆ‘æŒ‘å‡ ä¸ªå’±ä»¬å†™ä»£ç æ—¶æœ€æ„ŸåŒèº«å—çš„ç‚¹èŠèŠã€‚</p>
<p><strong>ç¬¬ä¸€ï¼Œå®ƒæ‡‚å¾—ã€Œå…ˆæ€è€ƒï¼Œå†åŠ¨æ‰‹ã€ã€‚</strong></p>
<p>ä»¥å‰çš„ AI æ˜¯æ€¥æ€§å­ï¼Œä½ éœ€æ±‚è¿˜æ²¡è¯´å®Œï¼Œå®ƒä»£ç å¯èƒ½å°±ç”Ÿæˆäº†ä¸€åŠã€‚ç»“æœå¾€å¾€æ˜¯æ–¹å‘é”™äº†ï¼Œè¿˜å¾—æ¨å€’é‡æ¥ã€‚</p>
<p>TRAE SOLO æœ‰ä¸ªÂ <strong>Plan æ¨¡å¼</strong>ã€‚å½“ä½ æŠ›å‡ºä¸€ä¸ªå¤æ‚éœ€æ±‚æ—¶ï¼Œå®ƒä¸ä¼šæ€¥ç€å†™ä»£ç ï¼Œè€Œæ˜¯å…ˆç»™ä½ åˆ—ä¸€ä¸ª To-Do Listï¼Œå‘Šè¯‰ä½ å®ƒå‡†å¤‡åˆ†å‡ æ­¥èµ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28279fd152f94235a5b404a7fd0ebd35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=CaOfEkZ3AKrNDfoJpmgRhfBExc4%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™å°±å¾ˆåƒå¸¦å¾’å¼Ÿäº†ã€‚</p>
<p>ä½ çœ‹äº†è®¡åˆ’ï¼Œè§‰å¾—æ²¡é—®é¢˜ï¼Œå®ƒå†å¼€å·¥ï¼›è§‰å¾—é€»è¾‘ä¸å¯¹ï¼Œç›´æ¥åœ¨è®¡åˆ’é˜¶æ®µå°±æŒ‡å‡ºæ¥ã€‚æŠŠé”™è¯¯æ‰¼æ€åœ¨å†™ä»£ç ä¹‹å‰ï¼Œè¿™æ‰æ˜¯æ­£ç»çš„å·¥ç¨‹æ€ç»´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/015f8615e6134b819e7066e3ad68231f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=6u1MWBujjCMpZQGfr90%2FAPtwnow%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬äºŒï¼Œå‘Šåˆ«é»‘ç›’ï¼Œä»£ç æ”¹äº†å“ªä¸€ç›®äº†ç„¶ã€‚</strong></p>
<p>è¿™æ¬¡æ–°å¢çš„ä»£ç å˜æ›´ï¼ˆÂ <strong>DiffView</strong>Â ï¼‰åŠŸèƒ½æˆ‘ä¸ªäººéå¸¸å–œæ¬¢ã€‚</p>
<p>ä»¥å‰ AI æ”¹ä»£ç ï¼Œç»å¸¸æŠŠå¥½çš„é€»è¾‘ä¹Ÿç»™æ”¹åäº†ã€‚ç°åœ¨ï¼Œå®ƒåšäº†å“ªäº›æ–°å¢ã€æ”¹äº†å“ªäº›é€»è¾‘ï¼Œéƒ½åœ¨ç•Œé¢ä¸Šæ¸…æ¸…æ¥šæ¥šåœ°å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>ä½ å¯ä»¥å®æ—¶å®¡æŸ¥ï¼ˆCode Reviewï¼‰ï¼Œå°±åƒçœ‹åŒäº‹æäº¤çš„ä»£ç ä¸€æ ·ã€‚ä½ æ²¡ç‚¹å¤´ï¼Œå®ƒå°±ä¸æ•¢ä¹±åˆå¹¶ã€‚è¿™ç§ã€Œéšæ—¶å¯æŒæ§ã€çš„æ„Ÿè§‰ï¼Œæ‰æ˜¯æˆ‘ä»¬æ•¢åœ¨å®é™…é¡¹ç›®é‡Œç”¨ AI çš„åº•æ°”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e79022ae1ff423f9ac7e9215d1d81a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=LLKNsMavSOSm37mOd5xYhWNQB8A%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬ä¸‰ï¼Œè„‘å­å¥½ä½¿ï¼Œè¿˜æ‡‚å¾—ã€Œæ–­èˆç¦»ã€ã€‚</strong></p>
<p>åšå¤§é¡¹ç›®æœ€æ€• AI èŠç€èŠç€å°±ã€Œå¤±å¿†ã€ï¼Œæˆ–è€…å› ä¸ºä¸Šä¸‹æ–‡å¤ªé•¿å¼€å§‹èƒ¡è¨€ä¹±è¯­ã€‚</p>
<p>TRAE SOLO åœ¨è¿™å—åšå¾—æ¯”è¾ƒèªæ˜ã€‚å®ƒèƒ½æ”¯æŒæ£€ç´¢æµ·é‡çš„ä»£ç æ–‡ä»¶ï¼ˆæ®è¯´èƒ½æ‰›ä½ 10 ä¸‡ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæœ‰ä¸€å¥—è‡ªåŠ¨çš„ä¸Šä¸‹æ–‡å‹ç¼©æœºåˆ¶ã€‚</p>
<p>å½“å¯¹è¯å¤ªé•¿æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è§¦å‘å‹ç¼©ï¼Œä¿ç•™æ ¸å¿ƒä¿¡æ¯ï¼›ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç‚¹ä¸€ä¸‹å‹ç¼©ï¼Œè®©å®ƒæŠŠæ²¡ç”¨çš„åºŸè¯æ¸…æ‰ã€‚è¿™æ ·æ—¢ä¿ç•™äº†å…³é”®è®°å¿†ï¼Œåˆä¸ä¼šè®©æ¨¡å‹è·‘åã€‚</p>
<p><strong>é™¤æ­¤ï¼Œå®ƒè¿˜èƒ½ã€Œåˆ†èº«ã€ã€‚</strong></p>
<p>è¿™ç©æ„å„¿æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œ sub agentã€‚ä½ å¯ä»¥å¼€ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»ä¿® Bugï¼ŒåŒæ—¶å¼€å¦ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»å†™æ–°åŠŸèƒ½çš„æ¥å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca08f3fe2b84b6583cd6c0291dd9d3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=VW8Mrm4rK8LpYaLQ%2FgBVwi46z8g%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼Œè¿™å›çœŸä¸æ˜¯è¯´è¯´è€Œå·²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6242fa3c9ee3409abcd55bc373db269f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=2GrcV1KDXI%2FxENe6DFU1J6SVv98%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™äº›æ™ºèƒ½ä½“ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±åˆ›å»ºçš„ï¼Œç‚¹ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€å°±èƒ½åˆ›å»ºäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b883d8c325084545954e87bf2212da84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=vQEIIt65AKol489Y236CkCZhRPg%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>åˆ›å»ºå¥½åå°±èƒ½çœ‹åˆ°è‡ªå·±æ‹¥æœ‰çš„æ™ºèƒ½ä½“äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8254192470f4ba191e26e935671b09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1hw0UzJ%2Fcv6k%2BVmpNYAOapnHF%2F8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ç›®å‰å›½å†…ç‰ˆæ”¯æŒäº†å›½å†…é¡¶å°–çš„ä»£ç æ¨¡å‹ï¼Œæ¯”å¦‚ Doubao-Seed-Codeã€Kimi K2ã€GLM 4.6 ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f521848b7e4e1eb4a80885117a8918~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=o51GEbXYwKRgRlBQiDJ2lGQZuyk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹ã€‚</p>
<p>åŒæ ·å†…ç½®ä¸å°‘ MCPã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbbf2dcefc24e199bce02b606cf6c67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=lWbEPTx5ANz1qP1IDo6th5kPxLY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¹¿åœºèƒ½æœç´ åˆ°éå¸¸å¤šå¥½ç”¨çš„ MCPï¼Œé…ç½®ä¹Ÿå¾ˆç®€å•ç›¸å¯¹ Cursor æ¥è¯´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c251ca0914e406b9c9844c0e9a4419e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=yQ5TLllMOnxrVNqPixWLzzLjVD0%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸‹æ¥ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ã€Œé¡ºæ»‘ã€ã€‚æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿçš„ç„¦è™‘ï¼ŒåŠ ä¸Šè¿™ç§é€æ˜çš„åä½œæ¨¡å¼ï¼Œç¡®å®èƒ½è®©äººä¸“æ³¨äºåˆ›é€ æœ¬èº«ã€‚</p>
<p>è¯´å®è¯ï¼ŒTrae SOLO ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ã€Œç‘•ä¸æ©ç‘œã€ã€‚</p>
<p>å¦‚æœè¦å¹æ¯›æ±‚ç–µï¼Œå›½å†…åº•å±‚çš„ä»£ç æ¨¡å‹åœ¨å¤„ç†æåº¦å¤æ‚çš„æ·±å±‚é€»è¾‘æ—¶ï¼Œè·ç¦»å›½å¤–æœ€é¡¶å°–çš„æ¨¡å‹ç¡®å®è¿˜æœ‰ä¸€äº›æå‡ç©ºé—´ã€‚è¿™ç‚¹å’±ä»¬å¾—è®¤ï¼Œæ¨¡å‹èƒ½åŠ›çš„æ‰“ç£¨è¿˜éœ€è¦æ—¶é—´ã€‚</p>
<p>ä½† Trae å›¢é˜Ÿèªæ˜çš„åœ°æ–¹åœ¨äºï¼Œä»–ä»¬ç”¨æè‡´çš„äº§å“ç»†èŠ‚å¼¥è¡¥äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>é‚£ç§è¡Œäº‘æµæ°´çš„äº¤äº’æ„Ÿï¼ŒDiffView å¸¦æ¥çš„æŒæ§æ„Ÿï¼Œä»¥åŠ Plan æ¨¡å¼ä¸‹çš„ã€Œå•†é‡ç€æ¥ã€ï¼Œè®©ä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¾€å¾€ä¼šå¿½ç•¥æ‰æ¨¡å‹æœ¬èº«çš„ä¸€ç‚¹å°ç‘•ç–µã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ‰“ç ´äº†é‚£å µæŠŠæ— æ•°äººæŒ¡åœ¨ AI ç¼–ç¨‹é—¨å¤–çš„ã€Œå¢™ã€ã€‚</p>
<p>ä¸ç”¨æŠ˜è…¾ç½‘ç»œï¼Œä¸ç”¨æ‹…å¿ƒè´¦å•ï¼Œæ‰“å¼€å°±èƒ½ç”¨ã€‚å¯¹äºå¤§å¤šæ•°æƒ³å°è¯• AI ç¼–ç¨‹çš„æœ‹å‹æ¥è¯´ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<p>å›½äº§ IDE èƒ½åšåˆ°è¿™ä¸ªç»†è…»ç¨‹åº¦ï¼Œå€¼å¾—ç»™ç‚¹æŒå£°ã€‚</p>
<p>å»è¯•è¯•å§ï¼Œä¹Ÿè®¸å®ƒå°±æ˜¯ä½ æœŸå¾…å·²ä¹…çš„é‚£ä¸ªã€Œç¼–ç¨‹æ­å­ã€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ASIO å®šæ—¶å™¨å®Œå…¨æŒ‡å—ï¼šç±»å‹è§£æã€API ç”¨æ³•ä¸å®æˆ˜ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7576609946190528548</link>    <guid>https://juejin.cn/post/7576609946190528548</guid>    <pubDate>2025-11-26T04:40:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190528548" data-draft-id="7576646533614633014" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ASIO å®šæ—¶å™¨å®Œå…¨æŒ‡å—ï¼šç±»å‹è§£æã€API ç”¨æ³•ä¸å®æˆ˜ç¤ºä¾‹"/> <meta itemprop="keywords" content="åç«¯,C++"/> <meta itemprop="datePublished" content="2025-11-26T04:40:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ASIO å®šæ—¶å™¨å®Œå…¨æŒ‡å—ï¼šç±»å‹è§£æã€API ç”¨æ³•ä¸å®æˆ˜ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:40:17.000Z" title="Wed Nov 26 2025 04:40:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ASIO å®šæ—¶å™¨å®Œå…¨æŒ‡å—ï¼šç±»å‹è§£æã€API ç”¨æ³•ä¸å®æˆ˜ç¤ºä¾‹</h2>
<p>ASIOï¼ˆBoost.Asio æˆ–ç‹¬ç«‹çš„ Asioï¼‰ä½œä¸ºé«˜æ€§èƒ½å¼‚æ­¥ IO åº“ï¼Œæä¾›äº†çµæ´»ä¸”é«˜æ•ˆçš„å®šæ—¶å™¨ç»„ä»¶ï¼Œé€‚ç”¨äºç½‘ç»œç¼–ç¨‹ã€å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ã€å®šæ—¶è§¦å‘ç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç† ASIO å®šæ—¶å™¨çš„æ ¸å¿ƒç±»å‹ã€åº•å±‚å®ç°ã€æ ¸å¿ƒ APIã€å®æˆ˜ç¤ºä¾‹åŠå¸¸è§é—®é¢˜ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€ŸæŒæ¡å…¶ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ASIO å®šæ—¶å™¨æ ¸å¿ƒç±»å‹è§£æ</h3>
<p>ASIO æä¾› 4 ç§å¸¸ç”¨å®šæ—¶å™¨ï¼Œå‡åŸºäºåº•å±‚æ¨¡æ¿ç±»å®ç°ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äº <strong>æ—¶é’Ÿç±»å‹</strong>ï¼ˆå†³å®šç²¾åº¦ã€æ˜¯å¦å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼‰å’Œ <strong>é€‚ç”¨åœºæ™¯</strong>ã€‚å…ˆçº æ­£ä¸€ä¸ªå¸¸è§è¯¯åŒºï¼š<code>high_resolution_timer</code> å¹¶é <code>system_timer</code>ï¼ŒäºŒè€…æ˜¯ <code>basic_waitable_timer</code> çš„ä¸åŒæ—¶é’Ÿç‰¹ä¾‹åŒ–ï¼Œå±äºå¹¶åˆ—å…³ç³»ã€‚</p>
<h4 data-id="heading-2">1. åº•å±‚åŸºç±»</h4>
<p>ASIO å®šæ—¶å™¨çš„åº•å±‚ä¾èµ–ä¸¤ä¸ªæ ¸å¿ƒæ¨¡æ¿ç±»ï¼š</p>
<ul>
<li><code>basic_waitable_timer&lt;Clock&gt;</code>ï¼šC++11 chrono æ—¶é’Ÿé€‚é…çš„æ¨¡æ¿ç±»ï¼Œæ”¯æŒç°ä»£ C++ æ—¶é—´æ ‡å‡†ï¼Œæ˜¯ <code>steady_timer</code>ã€<code>system_timer</code>ã€<code>high_resolution_timer</code> çš„åŸºç±»ï¼›</li>
<li><code>basic_deadline_timer&lt;Time&gt;</code>ï¼šå…¼å®¹æ—§ç‰ˆ Boost æ—¶é—´ç±»å‹ï¼ˆå¦‚ <code>boost::posix_time::ptime</code>ï¼‰çš„æ¨¡æ¿ç±»ï¼Œä»… <code>deadline_timer</code> åŸºäºæ­¤ç±»å®ç°ã€‚</li>
</ul>
<h4 data-id="heading-3">2. å››ç§å®šæ—¶å™¨è¯¦ç»†è¯´æ˜</h4>













































<table><thead><tr><th>å®šæ—¶å™¨ç±»å‹</th><th>åº•å±‚æ¨¡æ¿ä¸æ—¶é’Ÿç±»å‹</th><th>æ ¸å¿ƒç‰¹æ€§</th><th>ç²¾åº¦</th><th>å—ç³»ç»Ÿæ—¶é—´å½±å“</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>deadline_timer</code></td><td><code>basic_deadline_timer&lt;boost::posix_time::ptime&gt;</code></td><td>åŸºäº Boost æ—§ç‰ˆæ—¶é—´ç±»å‹ï¼Œä¾èµ–ç³»ç»Ÿå¢™é’Ÿæ—¶é—´</td><td>æ¯«ç§’çº§</td><td>æ˜¯ï¼ˆä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¼šæ”¹å˜åˆ°æœŸæ—¶é—´ï¼‰</td><td>éœ€ä¸å®é™…æ—¥å†æ—¶é—´ç»‘å®šçš„åœºæ™¯ï¼ˆå¦‚æ¯å¤© 0 ç‚¹æ‰§è¡Œä»»åŠ¡ï¼‰</td></tr><tr><td><code>steady_timer</code></td><td><code>basic_waitable_timer&lt;std::chrono::steady_clock&gt;</code></td><td>åŸºäº â€œç¨³å®šæ—¶é’Ÿâ€ï¼Œæ—¶é—´å•è°ƒé€’å¢ï¼Œä¸å—ç³»ç»Ÿæ—¶é—´è°ƒæ•´å½±å“</td><td>å¾®ç§’çº§</td><td>å¦</td><td>å›ºå®šé—´éš”æ‰§è¡Œçš„åœºæ™¯ï¼ˆå¦‚æ¯ç§’é‡‡æ ·ã€å¿ƒè·³æ£€æµ‹ï¼‰</td></tr><tr><td><code>system_timer</code></td><td><code>basic_waitable_timer&lt;std::chrono::system_clock&gt;</code></td><td>åŸºäºç³»ç»Ÿå¢™é’Ÿæ—¶é—´ï¼Œä¸ç³»ç»Ÿæ—¶é—´åŒæ­¥</td><td>å¾®ç§’çº§</td><td>æ˜¯</td><td>éœ€å…³è”ç³»ç»Ÿæ—¶é—´çš„å®šæ—¶ï¼ˆå¦‚ 2025-12-31 23:59 æ‰§è¡Œï¼‰</td></tr><tr><td><code>high_resolution_timer</code></td><td><code>basic_waitable_timer&lt;std::chrono::high_resolution_clock&gt;</code></td><td>åŸºäºç³»ç»Ÿæœ€é«˜ç²¾åº¦æ—¶é’Ÿï¼ˆå¯èƒ½æ˜¯ steady_clock æˆ– system_clock çš„é«˜ç²¾åº¦å®ç°ï¼‰</td><td>çº³ç§’çº§ï¼ˆç†è®ºï¼‰</td><td>è§†å¹³å°è€Œå®š</td><td>å¯¹ç²¾åº¦è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆå¦‚å¾®ç§’çº§å»¶è¿Ÿè§¦å‘ï¼‰</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>std::chrono::high_resolution_clock</code> çš„å®ç°å› å¹³å°è€Œå¼‚ï¼šLinux ä¸‹é€šå¸¸æ˜¯ steady_clockï¼ˆä¸å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼‰ï¼ŒWindows ä¸‹å¯èƒ½æ˜¯ system_clockï¼ˆå—å½±å“ï¼‰ï¼Œä½¿ç”¨æ—¶éœ€ç»“åˆå¹³å°ç‰¹æ€§ï¼›</li>
<li><code>deadline_timer</code> ä¾èµ– Boost æ—§ç‰ˆæ—¶é—´åº“ï¼Œè‹¥é¡¹ç›®å·²è¿ç§»åˆ° C++11+ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ <code>steady_timer</code> / <code>system_timer</code>ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€æ ¸å¿ƒ API å®Œå…¨æŒ‡å—</h3>
<p>æ‰€æœ‰ ASIO å®šæ—¶å™¨çš„æ ¸å¿ƒæ“ä½œå›´ç»• â€œè®¾ç½®åˆ°æœŸæ—¶é—´ã€ç­‰å¾…è§¦å‘ã€å–æ¶ˆå®šæ—¶â€ å±•å¼€ï¼Œä»¥ä¸‹æ˜¯é€šç”¨ API åŠå…³é”®ç”¨æ³•ï¼ˆä»¥ <code>high_resolution_timer</code> ä¸ºä¾‹ï¼Œå…¶ä»–å®šæ—¶å™¨ç”¨æ³•ä¸€è‡´ï¼‰ã€‚</p>
<h4 data-id="heading-5">1. æ„é€ å‡½æ•°</h4>
<p>å®šæ—¶å™¨å¿…é¡»å…³è” <code>io_context</code>ï¼ˆASIO å¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒè°ƒåº¦å™¨ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¯­æ³•ï¼štemplate &lt;typename Clock&gt;</span>
<span class="hljs-comment">//       basic_waitable_timer&lt;Clock&gt;::basic_waitable_timer(boost::asio::io_context&amp; ctx);</span>

asio::io_context ctx;
<span class="hljs-function">asio::steady_timer <span class="hljs-title">timer1</span><span class="hljs-params">(ctx)</span></span>;          <span class="hljs-comment">// åŸºäºç¨³å®šæ—¶é’Ÿçš„å®šæ—¶å™¨</span>
<span class="hljs-function">asio::high_resolution_timer <span class="hljs-title">timer2</span><span class="hljs-params">(ctx)</span></span>; <span class="hljs-comment">// é«˜ç²¾åº¦å®šæ—¶å™¨</span>
<span class="hljs-function">asio::deadline_timer <span class="hljs-title">timer3</span><span class="hljs-params">(ctx)</span></span>;        <span class="hljs-comment">// æ—§ç‰ˆæˆªæ­¢æ—¶é—´å®šæ—¶å™¨</span>
</code></pre>
<h4 data-id="heading-6">2. è®¾ç½®åˆ°æœŸæ—¶é—´</h4>
<p>ASIO å®šæ—¶å™¨æ”¯æŒä¸¤ç§åˆ°æœŸæ—¶é—´è®¾ç½®æ–¹å¼ï¼šç›¸å¯¹æ—¶é—´ï¼ˆä»å½“å‰å¼€å§‹å»¶è¿Ÿå¤šä¹…ï¼‰å’Œç»å¯¹æ—¶é—´ï¼ˆæŒ‡å®šå…·ä½“æ—¶é—´ç‚¹ï¼‰ã€‚</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰ç›¸å¯¹æ—¶é—´ï¼š<code>expires_after()</code></h5>
<p>æœ€å¸¸ç”¨åœºæ™¯ï¼Œç›´æ¥æŒ‡å®šå»¶è¿Ÿæ—¶é•¿ï¼ˆä¾èµ– C++11 std::chrono æ—¶é—´å•ä½ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å»¶è¿Ÿ 1 ç§’åˆ°æœŸ</span>
timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));

<span class="hljs-comment">// æ”¯æŒæ›´ç²¾ç»†çš„æ—¶é—´å•ä½</span>
timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">500</span>));  <span class="hljs-comment">// 500 æ¯«ç§’</span>
timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">microseconds</span>(<span class="hljs-number">100</span>));  <span class="hljs-comment">// 100 å¾®ç§’</span>
timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">nanoseconds</span>(<span class="hljs-number">50</span>));    <span class="hljs-comment">// 50 çº³ç§’ï¼ˆé«˜ç²¾åº¦å®šæ—¶å™¨æ”¯æŒï¼‰</span>
</code></pre>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰ç»å¯¹æ—¶é—´ï¼š<code>expires_at()</code></h5>
<p>æŒ‡å®šå…·ä½“æ—¶é—´ç‚¹ï¼Œéœ€ç»“åˆå¯¹åº”å®šæ—¶å™¨çš„æ—¶é’Ÿç±»å‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// high_resolution_timer ç»“åˆ high_resolution_clock</span>
<span class="hljs-keyword">auto</span> target_time = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>() + std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">3</span>);
timer.<span class="hljs-built_in">expires_at</span>(target_time);

<span class="hljs-comment">// steady_timer ç»“åˆ steady_clockï¼ˆä¸å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼‰</span>
<span class="hljs-keyword">auto</span> steady_target = std::chrono::steady_clock::<span class="hljs-built_in">now</span>() + std::chrono::<span class="hljs-built_in">minutes</span>(<span class="hljs-number">1</span>);
<span class="hljs-function">steady_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>;
timer.<span class="hljs-built_in">expires_at</span>(steady_target);

<span class="hljs-comment">// deadline_timer ç»“åˆ boost::posix_time</span>
<span class="hljs-keyword">auto</span> posix_target = boost::posix_time::second_clock::<span class="hljs-built_in">local_time</span>() + boost::posix_time::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">5</span>);
<span class="hljs-function">deadline_timer <span class="hljs-title">dt</span><span class="hljs-params">(ctx)</span></span>;
dt.<span class="hljs-built_in">expires_at</span>(posix_target);
</code></pre>
<h5 data-id="heading-9">3. è·å–åˆ°æœŸæ—¶é—´ï¼š<code>expiry()</code></h5>
<p>è¿”å›å®šæ—¶å™¨çš„ç»å¯¹åˆ°æœŸæ—¶é—´ï¼ˆè¿”å›ç±»å‹ä¸æ—¶é’Ÿç±»å‹åŒ¹é…ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// high_resolution_timer çš„åˆ°æœŸæ—¶é—´ç±»å‹ï¼šstd::chrono::high_resolution_clock::time_point</span>
<span class="hljs-keyword">auto</span> expiry_time = timer.<span class="hljs-built_in">expiry</span>();

<span class="hljs-comment">// è½¬æ¢ä¸ºäººç±»å¯è¯»æ—¶é—´ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-keyword">auto</span> duration = expiry_time.<span class="hljs-built_in">time_since_epoch</span>();
<span class="hljs-keyword">auto</span> seconds = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::seconds&gt;(duration).<span class="hljs-built_in">count</span>();
std::cout &lt;&lt; <span class="hljs-string">"åˆ°æœŸæ—¶é—´ï¼š"</span> &lt;&lt; seconds &lt;&lt; <span class="hljs-string">" ç§’ï¼ˆè‡ªæ—¶é’Ÿçºªå…ƒèµ·ï¼‰\n"</span>;
</code></pre>
<h5 data-id="heading-10">4. ç­‰å¾…æ–¹å¼ï¼šåŒæ­¥ vs å¼‚æ­¥</h5>
<p>ASIO å®šæ—¶å™¨æ”¯æŒ <strong>åŒæ­¥ç­‰å¾…</strong>ï¼ˆé˜»å¡å½“å‰çº¿ç¨‹ï¼‰å’Œ <strong>å¼‚æ­¥ç­‰å¾…</strong>ï¼ˆéé˜»å¡ï¼Œé€šè¿‡å›è°ƒè§¦å‘ï¼‰ï¼Œåè€…æ˜¯ ASIO çš„æ ¸å¿ƒè®¾è®¡ç†å¿µã€‚</p>
<h6 data-id="heading-11">ï¼ˆ1ï¼‰åŒæ­¥ç­‰å¾…ï¼š<code>wait()</code></h6>
<p>é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°å®šæ—¶å™¨åˆ°æœŸæˆ–è¢«å–æ¶ˆï¼Œè¿”å› error_code è¡¨ç¤ºç»“æœï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">asio::io_context ctx;
<span class="hljs-function">asio::steady_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx, std::chrono::seconds(<span class="hljs-number">2</span>))</span></span>; <span class="hljs-comment">// ç›´æ¥æ„é€ æ—¶æŒ‡å®šå»¶è¿Ÿ</span>

<span class="hljs-comment">// åŒæ­¥ç­‰å¾…ï¼ˆé˜»å¡ 2 ç§’ï¼‰</span>
boost::system::error_code ec;
timer.<span class="hljs-built_in">wait</span>(ec);

<span class="hljs-keyword">if</span> (!ec) {
    std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨åˆ°æœŸï¼ˆåŒæ­¥ç­‰å¾…ï¼‰\n"</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
    std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨è¢«å–æ¶ˆï¼ˆåŒæ­¥ç­‰å¾…ï¼‰\n"</span>;
}
</code></pre>
<h6 data-id="heading-12">ï¼ˆ2ï¼‰å¼‚æ­¥ç­‰å¾…ï¼š<code>async_wait()</code></h6>
<p>éé˜»å¡è°ƒç”¨ï¼Œå®šæ—¶å™¨åˆ°æœŸåè§¦å‘å›è°ƒå‡½æ•°ï¼ˆå›è°ƒåœ¨ <code>io_context::run()</code> æ‰€åœ¨çº¿ç¨‹æ‰§è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">timer.<span class="hljs-built_in">async_wait</span>([](boost::system::error_code ec) {
    <span class="hljs-keyword">if</span> (!ec) {
        std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨åˆ°æœŸï¼ˆå¼‚æ­¥å›è°ƒï¼‰\n"</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
        std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨è¢«å–æ¶ˆï¼ˆå¼‚æ­¥å›è°ƒï¼‰\n"</span>;
    }
});

<span class="hljs-comment">// å¿…é¡»è°ƒç”¨ io_context::run()ï¼Œå¦åˆ™å›è°ƒæ— æ³•æ‰§è¡Œï¼ˆASIO äº‹ä»¶å¾ªç¯ï¼‰</span>
ctx.<span class="hljs-built_in">run</span>();
</code></pre>
<h6 data-id="heading-13">5. å–æ¶ˆå®šæ—¶å™¨ï¼š<code>cancel()</code>/<code>cancel_one()</code>/<code>cancel_all()</code></h6>
<ul>
<li><code>cancel()</code>ï¼šå–æ¶ˆæ‰€æœ‰æœªå®Œæˆçš„ç­‰å¾…æ“ä½œï¼Œæ‰€æœ‰å…³è”çš„å›è°ƒä¼šæ”¶åˆ° <code>asio::error::operation_aborted</code> é”™è¯¯ç ï¼›</li>
<li><code>cancel_one()</code>ï¼šä»…å–æ¶ˆä¸€ä¸ªæœªå®Œæˆçš„ç­‰å¾…æ“ä½œï¼›</li>
<li><code>cancel_all()</code>ï¼šä¸ <code>cancel()</code> åŠŸèƒ½ä¸€è‡´ï¼ˆASIO 3.0+ æ¨èä½¿ç”¨ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šå–æ¶ˆå¼‚æ­¥å®šæ—¶å™¨</p>
<pre><code class="hljs language-cpp" lang="cpp">asio::io_context ctx;
<span class="hljs-function">asio::high_resolution_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>;
timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">5</span>));

<span class="hljs-comment">// å¼‚æ­¥ç­‰å¾…</span>
timer.<span class="hljs-built_in">async_wait</span>([](boost::system::error_code ec) {
    <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
        std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨è¢«æˆåŠŸå–æ¶ˆ\n"</span>;
    }
});

<span class="hljs-comment">// 1 ç§’åå–æ¶ˆå®šæ—¶å™¨</span>
std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));
timer.<span class="hljs-built_in">cancel</span>(); <span class="hljs-comment">// è§¦å‘å›è°ƒçš„å–æ¶ˆé”™è¯¯ç </span>

ctx.<span class="hljs-built_in">run</span>(); <span class="hljs-comment">// å¿…é¡»è¿è¡Œäº‹ä»¶å¾ªç¯ï¼Œå¦åˆ™å›è°ƒæ— æ³•æ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-14">ä¸‰ã€å®æˆ˜ç¤ºä¾‹ï¼ˆåˆ†åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-15">ç¤ºä¾‹ 1ï¼šå¼‚æ­¥é‡å¤å®šæ—¶ï¼ˆå›ºå®šé—´éš”ï¼Œä¸å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼‰</h4>
<p>ä½¿ç”¨ <code>steady_timer</code> å®ç°æ¯ç§’æ‰§è¡Œä¸€æ¬¡çš„é‡å¤å®šæ—¶ï¼ˆæ¨èç”¨äºå¿ƒè·³æ£€æµ‹ã€æ•°æ®é‡‡æ ·ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/asio.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-keyword">namespace</span> asio = boost::asio;
<span class="hljs-keyword">using</span> error_code = boost::system::error_code;

<span class="hljs-comment">// é‡å¤å®šæ—¶å›è°ƒå‡½æ•°ï¼ˆé€’å½’è°ƒç”¨å®ç°å¾ªç¯ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">repeat_timer</span><span class="hljs-params">(asio::steady_timer&amp; timer, <span class="hljs-type">int</span>&amp; count)</span> </span>{
    <span class="hljs-comment">// æ¯æ¬¡ç­‰å¾… 1 ç§’</span>
    timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));

    timer.<span class="hljs-built_in">async_wait</span>([&amp;](error_code ec) {
        <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
            std::cout &lt;&lt; <span class="hljs-string">"é‡å¤å®šæ—¶å™¨è¢«å–æ¶ˆï¼Œç´¯è®¡æ‰§è¡Œ "</span> &lt;&lt; count &lt;&lt; <span class="hljs-string">" æ¬¡\n"</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// å®šæ—¶ä»»åŠ¡ï¼šæ‰“å°è®¡æ•°</span>
        count++;
        std::cout &lt;&lt; <span class="hljs-string">"é‡å¤å®šæ—¶æ‰§è¡Œç¬¬ "</span> &lt;&lt; count &lt;&lt; <span class="hljs-string">" æ¬¡\n"</span>;

        <span class="hljs-comment">// é€’å½’è°ƒç”¨ï¼Œå®ç°é‡å¤å®šæ—¶ï¼ˆASIO å›è°ƒé˜Ÿåˆ—æ‰§è¡Œï¼Œæ— æ ˆæº¢å‡ºé£é™©ï¼‰</span>
        <span class="hljs-built_in">repeat_timer</span>(timer, count);
    });
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    asio::io_context ctx;
    <span class="hljs-function">asio::steady_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>;
    <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// å¯åŠ¨é‡å¤å®šæ—¶</span>
    <span class="hljs-built_in">repeat_timer</span>(timer, count);

    <span class="hljs-comment">// è¿è¡Œäº‹ä»¶å¾ªç¯ï¼ˆé˜»å¡ï¼Œç›´åˆ°å®šæ—¶å™¨è¢«å–æ¶ˆï¼‰</span>
    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">([&amp;]() { ctx.run(); })</span></span>;

    <span class="hljs-comment">// ä¸»çº¿ç¨‹ç­‰å¾… 5 ç§’åå–æ¶ˆå®šæ—¶å™¨</span>
    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">5</span>));
    timer.<span class="hljs-built_in">cancel</span>();

    t.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-16">ç¤ºä¾‹ 2ï¼šç»å¯¹æ—¶é—´å®šæ—¶ï¼ˆå…³è”ç³»ç»Ÿæ—¶é—´ï¼‰</h4>
<p>ä½¿ç”¨ <code>system_timer</code> å®ç° â€œæŒ‡å®šç³»ç»Ÿæ—¶é—´ç‚¹æ‰§è¡Œä»»åŠ¡â€ï¼ˆå¦‚ 3 ç§’åæ‰§è¡Œï¼Œå—ç³»ç»Ÿæ—¶é—´ä¿®æ”¹å½±å“ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/asio.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-keyword">namespace</span> asio = boost::asio;
<span class="hljs-keyword">using</span> error_code = boost::system::error_code;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    asio::io_context ctx;
    <span class="hljs-function">asio::system_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>;

    <span class="hljs-comment">// è®¾ç½®ç»å¯¹åˆ°æœŸæ—¶é—´ï¼šå½“å‰ç³»ç»Ÿæ—¶é—´ + 3 ç§’</span>
    <span class="hljs-keyword">auto</span> target_time = std::chrono::system_clock::<span class="hljs-built_in">now</span>() + std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">3</span>);
    timer.<span class="hljs-built_in">expires_at</span>(target_time);

    <span class="hljs-comment">// å¼‚æ­¥ç­‰å¾…</span>
    timer.<span class="hljs-built_in">async_wait</span>([](error_code ec) {
        <span class="hljs-keyword">if</span> (!ec) {
            <span class="hljs-comment">// è½¬æ¢ç³»ç»Ÿæ—¶é—´ä¸ºå¯è¯»æ ¼å¼</span>
            <span class="hljs-keyword">auto</span> now = std::chrono::system_clock::<span class="hljs-built_in">to_time_t</span>(std::chrono::system_clock::<span class="hljs-built_in">now</span>());
            std::cout &lt;&lt; <span class="hljs-string">"ç»å¯¹æ—¶é—´å®šæ—¶è§¦å‘ï¼Œå½“å‰ç³»ç»Ÿæ—¶é—´ï¼š"</span> &lt;&lt; <span class="hljs-built_in">ctime</span>(&amp;now);
        }
    });

    ctx.<span class="hljs-built_in">run</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-17">ç¤ºä¾‹ 3ï¼šå¤šå®šæ—¶å™¨ç®¡ç†ä¸æ‰¹é‡å–æ¶ˆ</h4>
<p>åŒæ—¶ç®¡ç†å¤šä¸ªå®šæ—¶å™¨ï¼Œæ”¯æŒæ‰¹é‡å–æ¶ˆæ“ä½œï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/asio.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-keyword">namespace</span> asio = boost::asio;
<span class="hljs-keyword">using</span> error_code = boost::system::error_code;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    asio::io_context ctx;
    std::vector&lt;asio::steady_timer&gt; timers; <span class="hljs-comment">// å­˜å‚¨å¤šä¸ªå®šæ—¶å™¨</span>

    <span class="hljs-comment">// åˆ›å»º 3 ä¸ªå®šæ—¶å™¨ï¼Œåˆ†åˆ«å»¶è¿Ÿ 1ã€2ã€3 ç§’</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">3</span>; ++i) {
        timers.<span class="hljs-built_in">emplace_back</span>(ctx);
        <span class="hljs-keyword">auto</span>&amp; timer = timers.<span class="hljs-built_in">back</span>();
        timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(i));

        <span class="hljs-comment">// æ¯ä¸ªå®šæ—¶å™¨çš„å›è°ƒï¼ˆæ‰“å°è‡ªèº«å»¶è¿Ÿæ—¶é—´ï¼‰</span>
        timer.<span class="hljs-built_in">async_wait</span>([i](error_code ec) {
            <span class="hljs-keyword">if</span> (!ec) {
                std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨ "</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">" ç§’åˆ°æœŸ\n"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
                std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨ "</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">" ç§’è¢«å–æ¶ˆ\n"</span>;
            }
        });
    }

    <span class="hljs-comment">// 2.5 ç§’åæ‰¹é‡å–æ¶ˆæ‰€æœ‰å®šæ—¶å™¨</span>
    <span class="hljs-function">std::thread <span class="hljs-title">cancel_thread</span><span class="hljs-params">([&amp;]() {
        std::this_thread::sleep_for(std::chrono::milliseconds(<span class="hljs-number">2500</span>));
        std::cout &lt;&lt; <span class="hljs-string">"\nå¼€å§‹æ‰¹é‡å–æ¶ˆå®šæ—¶å™¨...\n"</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; timer : timers) {
            timer.cancel();
        }
    })</span></span>;

    ctx.<span class="hljs-built_in">run</span>();
    cancel_thread.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-18">ç¤ºä¾‹ 4ï¼šç»“åˆ Strand ä¿è¯å›è°ƒçº¿ç¨‹å®‰å…¨</h4>
<p>å¤šçº¿ç¨‹è¿è¡Œ <code>io_context::run()</code> æ—¶ï¼Œå›è°ƒå¯èƒ½åœ¨ä¸åŒçº¿ç¨‹æ‰§è¡Œï¼Œä½¿ç”¨ <code>asio::strand</code> ç¡®ä¿å›è°ƒä¸²è¡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/asio.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>

<span class="hljs-keyword">namespace</span> asio = boost::asio;
<span class="hljs-keyword">using</span> error_code = boost::system::error_code;

std::mutex cout_mtx; <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºäº’æ–¥é”</span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    asio::io_context ctx;
    <span class="hljs-function">asio::strand&lt;asio::io_context::executor_type&gt; <span class="hljs-title">strand</span><span class="hljs-params">(ctx.get_executor())</span></span>; <span class="hljs-comment">// ä¸²è¡Œæ‰§è¡Œstrand</span>
    <span class="hljs-function">asio::steady_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>;

    <span class="hljs-comment">// ç»‘å®š strand åˆ°å›è°ƒï¼Œç¡®ä¿å›è°ƒä¸²è¡Œæ‰§è¡Œ</span>
    timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));
    timer.<span class="hljs-built_in">async_wait</span>(asio::<span class="hljs-built_in">bind_executor</span>(strand, [&amp;](error_code ec) {
        <span class="hljs-keyword">if</span> (!ec) {
            std::lock_guard&lt;std::mutex&gt; <span class="hljs-built_in">lock</span>(cout_mtx);
            std::cout &lt;&lt; <span class="hljs-string">"å›è°ƒçº¿ç¨‹ ID: "</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() &lt;&lt; <span class="hljs-string">"ï¼ˆç¬¬ä¸€æ¬¡ï¼‰\n"</span>;
        }

        <span class="hljs-comment">// é‡å¤å®šæ—¶</span>
        timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));
        timer.<span class="hljs-built_in">async_wait</span>(asio::<span class="hljs-built_in">bind_executor</span>(strand, [&amp;](error_code ec) {
            <span class="hljs-keyword">if</span> (!ec) {
                std::lock_guard&lt;std::mutex&gt; <span class="hljs-built_in">lock</span>(cout_mtx);
                std::cout &lt;&lt; <span class="hljs-string">"å›è°ƒçº¿ç¨‹ ID: "</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() &lt;&lt; <span class="hljs-string">"ï¼ˆç¬¬äºŒæ¬¡ï¼‰\n"</span>;
            }
        }));
    }));

    <span class="hljs-comment">// å¤šçº¿ç¨‹è¿è¡Œ io_context</span>
    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">([&amp;]() { ctx.run(); })</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">([&amp;]() { ctx.run(); })</span></span>;

    t1.<span class="hljs-built_in">join</span>();
    t2.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-19">å››ã€ç¼–è¯‘ä¸è¿è¡Œè¯´æ˜</h3>
<h4 data-id="heading-20">1. ä¾èµ–åº“</h4>
<ul>
<li>Boost.Asioï¼šéœ€é“¾æ¥ <code>boost_system</code> åº“ï¼ˆè‹¥ä½¿ç”¨ Boost ç‰ˆæœ¬ï¼‰ï¼›</li>
<li>çº¿ç¨‹åº“ï¼šASIO å¼‚æ­¥æ“ä½œä¾èµ–çº¿ç¨‹æ”¯æŒï¼Œéœ€é“¾æ¥ <code>pthread</code>ï¼ˆLinux/macOSï¼‰æˆ– <code>ws2_32</code>ï¼ˆWindowsï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-21">2. ç¼–è¯‘å‘½ä»¤ï¼ˆLinux/macOSï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># C++11+ æ ‡å‡†ï¼ˆæ¨è C++17ï¼‰</span>
g++ -std=c++17 timer_demo.cpp -o timer_demo -lboost_system -lpthread
</code></pre>
<h4 data-id="heading-22">3. è¿è¡Œæ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash">./timer_demo
</code></pre>
<h3 data-id="heading-23">äº”ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-24">1. ç³»ç»Ÿæ—¶é—´ä¿®æ”¹å¯¹å®šæ—¶å™¨çš„å½±å“</h4>
<ul>
<li><code>steady_timer</code>ï¼šä¸å—å½±å“ï¼ˆåŸºäºå•è°ƒé€’å¢æ—¶é’Ÿï¼‰ï¼Œé€‚åˆå›ºå®šé—´éš”ä»»åŠ¡ï¼›</li>
<li><code>system_timer</code>/<code>deadline_timer</code>ï¼šå—å½±å“ï¼ˆåŸºäºç³»ç»Ÿå¢™é’Ÿæ—¶é—´ï¼‰ï¼Œä¿®æ”¹ç³»ç»Ÿæ—¶é—´å¯èƒ½å¯¼è‡´å®šæ—¶å™¨æå‰ / å»¶è¿Ÿåˆ°æœŸï¼›</li>
<li><code>high_resolution_timer</code>ï¼šè§†å¹³å°è€Œå®šï¼ˆLinux ä¸‹é€šå¸¸æ˜¯ <code>steady_clock</code>ï¼ŒWindows ä¸‹å¯èƒ½æ˜¯ <code>system_clock</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-25">2. é‡å¤å®šæ—¶çš„æ­£ç¡®å®ç°</h4>
<p>é¿å…åœ¨å›è°ƒå¤–é‡å¤è°ƒç”¨ <code>async_wait()</code>ï¼Œåº”åœ¨å›è°ƒå†…éƒ¨é‡æ–°è®¾ç½®åˆ°æœŸæ—¶é—´å¹¶è°ƒç”¨ <code>async_wait()</code>ï¼ˆå¦‚ç¤ºä¾‹ 1ï¼‰ï¼Œç¡®ä¿å®šæ—¶é—´éš”å‡†ç¡®ã€‚</p>
<h4 data-id="heading-26">3. å›è°ƒå‡½æ•°çš„çº¿ç¨‹å®‰å…¨</h4>
<ul>
<li><code>io_context::run()</code> åœ¨å“ªæ¡çº¿ç¨‹æ‰§è¡Œï¼Œå›è°ƒå°±åœ¨å“ªæ¡çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li>å¤šçº¿ç¨‹è¿è¡Œ <code>io_context::run()</code> æ—¶ï¼Œå›è°ƒå¯èƒ½åœ¨ä¸åŒçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œéœ€é€šè¿‡ <code>strand</code> æˆ–äº’æ–¥é”ä¿è¯å…±äº«æ•°æ®å®‰å…¨ã€‚</li>
</ul>
<h4 data-id="heading-27">4. å®šæ—¶å™¨å–æ¶ˆåçš„å¤ç”¨</h4>
<p>å–æ¶ˆå®šæ—¶å™¨åï¼Œéœ€é‡æ–°è°ƒç”¨ <code>expires_after()</code>/<code>expires_at()</code> è®¾ç½®åˆ°æœŸæ—¶é—´ï¼Œæ‰èƒ½å†æ¬¡è°ƒç”¨ <code>wait()</code>/<code>async_wait()</code>ã€‚</p>
<h4 data-id="heading-28">5. é«˜ç²¾åº¦å®šæ—¶çš„é™åˆ¶</h4>
<ul>
<li><code>high_resolution_timer</code> çš„çº³ç§’çº§ç²¾åº¦æ˜¯ â€œç†è®ºå€¼â€ï¼Œå®é™…ç²¾åº¦å—æ“ä½œç³»ç»Ÿè°ƒåº¦ã€ç¡¬ä»¶æ—¶é’Ÿå½±å“ï¼ˆé€šå¸¸èƒ½è¾¾åˆ°å¾®ç§’çº§ï¼‰ï¼›</li>
<li>é¿å…è¿‡åº¦è¿½æ±‚é«˜ç²¾åº¦ï¼Œè‹¥æ— éœ€çº³ç§’çº§éœ€æ±‚ï¼Œä¼˜å…ˆä½¿ç”¨ <code>steady_timer</code>ï¼ˆå…¼å®¹æ€§æ›´å¥½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-29">å…­ã€è¿›é˜¶ç”¨æ³•</h3>
<h4 data-id="heading-30">1. å»¶è¿Ÿåˆå§‹åŒ–å®šæ—¶å™¨</h4>
<p>å…ˆåˆ›å»ºå®šæ—¶å™¨ï¼Œåç»­æ ¹æ®ä¸šåŠ¡é€»è¾‘åŠ¨æ€è®¾ç½®åˆ°æœŸæ—¶é—´ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">asio::io_context ctx;
<span class="hljs-function">asio::steady_timer <span class="hljs-title">timer</span><span class="hljs-params">(ctx)</span></span>; <span class="hljs-comment">// ä»…åˆå§‹åŒ–ï¼Œä¸è®¾ç½®åˆ°æœŸæ—¶é—´</span>

<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘è§¦å‘åï¼Œè®¾ç½®å¹¶å¯åŠ¨å®šæ—¶å™¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">start_timer</span><span class="hljs-params">()</span> </span>{
    timer.<span class="hljs-built_in">expires_after</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">2</span>));
    timer.<span class="hljs-built_in">async_wait</span>([](error_code ec) {
        <span class="hljs-keyword">if</span> (!ec) {
            std::cout &lt;&lt; <span class="hljs-string">"å»¶è¿Ÿåˆå§‹åŒ–çš„å®šæ—¶å™¨åˆ°æœŸ\n"</span>;
        }
    });
}

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡è§¦å‘</span>
<span class="hljs-built_in">start_timer</span>();
ctx.<span class="hljs-built_in">run</span>();
</code></pre>
<h4 data-id="heading-31">2. å®šæ—¶å™¨è¶…æ—¶å¼‚å¸¸å¤„ç†</h4>
<p>é€šè¿‡ <code>expiry()</code> æ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦è¶…æ—¶ï¼Œæˆ–åœ¨å›è°ƒä¸­å¤„ç†å¼‚å¸¸åœºæ™¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">timer.<span class="hljs-built_in">async_wait</span>([&amp;](error_code ec) {
    <span class="hljs-keyword">if</span> (ec == asio::error::operation_aborted) {
        <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ec) {
        std::cerr &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨å¼‚å¸¸ï¼š"</span> &lt;&lt; ec.<span class="hljs-built_in">message</span>() &lt;&lt; <span class="hljs-string">"\n"</span>;
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// æ£€æŸ¥å®é™…åˆ°æœŸæ—¶é—´ä¸é¢„æœŸæ˜¯å¦ä¸€è‡´ï¼ˆå¤„ç†è¶…æ—¶åå·®ï¼‰</span>
    <span class="hljs-keyword">auto</span> actual_expiry = timer.<span class="hljs-built_in">expiry</span>();
    <span class="hljs-keyword">auto</span> expected_expiry = std::chrono::steady_clock::<span class="hljs-built_in">now</span>() - std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>);
    <span class="hljs-keyword">auto</span>åå·® = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::milliseconds&gt;(actual_expiry - expected_expiry).<span class="hljs-built_in">count</span>();
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">abs</span>(åå·®) &gt; <span class="hljs-number">10</span>) { <span class="hljs-comment">// åå·®è¶…è¿‡ 10 æ¯«ç§’</span>
        std::cout &lt;&lt; <span class="hljs-string">"å®šæ—¶å™¨åå·®è¿‡å¤§ï¼š"</span> &lt;&lt; åå·® &lt;&lt; <span class="hljs-string">" æ¯«ç§’\n"</span>;
    }
});
</code></pre>
<h3 data-id="heading-32">ä¸ƒã€æ€»ç»“</h3>
<p>ASIO å®šæ—¶å™¨é€šè¿‡çµæ´»çš„æ—¶é’Ÿé€‚é…å’Œå¼‚æ­¥è®¾è®¡ï¼Œæ»¡è¶³äº†ä¸åŒåœºæ™¯ä¸‹çš„å®šæ—¶éœ€æ±‚ï¼š</p>
<ul>
<li>å›ºå®šé—´éš”ä»»åŠ¡ï¼šä¼˜å…ˆä½¿ç”¨ <code>steady_timer</code>ï¼ˆä¸å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼‰ï¼›</li>
<li>å…³è”ç³»ç»Ÿæ—¶é—´çš„ä»»åŠ¡ï¼šä½¿ç”¨ <code>system_timer</code> æˆ– <code>deadline_timer</code>ï¼›</li>
<li>é«˜ç²¾åº¦éœ€æ±‚ï¼šä½¿ç”¨ <code>high_resolution_timer</code>ï¼ˆæ³¨æ„å¹³å°å·®å¼‚ï¼‰ã€‚</li>
</ul>
<p>æŒæ¡ <code>expires_after()</code>/<code>expires_at()``ã€async_wait()</code>ã€<code>cancel()</code> ç­‰æ ¸å¿ƒ APIï¼Œç»“åˆ <code>io_context</code> å’Œ <code>strand</code> è¿›è¡Œè°ƒåº¦ï¼Œå¯å®ç°é«˜æ•ˆã€çº¿ç¨‹å®‰å…¨çš„å®šæ—¶é€»è¾‘ã€‚å®é™…å¼€å‘ä¸­éœ€æ³¨æ„ç³»ç»Ÿæ—¶é—´å½±å“ã€å›è°ƒçº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å®šæ—¶å™¨ç±»å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç ç‰¹æ®Šæ³¨é‡Šå®Œæ•´è§„èŒƒï¼šIDE æ”¯æŒã€ä½¿ç”¨ç¤ºä¾‹ä¸å›¢é˜Ÿåä½œæŒ‡å—]]></title>    <link>https://juejin.cn/post/7576609946190561316</link>    <guid>https://juejin.cn/post/7576609946190561316</guid>    <pubDate>2025-11-26T04:41:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190561316" data-draft-id="7576609946190544932" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç ç‰¹æ®Šæ³¨é‡Šå®Œæ•´è§„èŒƒï¼šIDE æ”¯æŒã€ä½¿ç”¨ç¤ºä¾‹ä¸å›¢é˜Ÿåä½œæŒ‡å—"/> <meta itemprop="keywords" content="IntelliJ IDEA,Visual Studio Code"/> <meta itemprop="datePublished" content="2025-11-26T04:41:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç ç‰¹æ®Šæ³¨é‡Šå®Œæ•´è§„èŒƒï¼šIDE æ”¯æŒã€ä½¿ç”¨ç¤ºä¾‹ä¸å›¢é˜Ÿåä½œæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:41:11.000Z" title="Wed Nov 26 2025 04:41:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»£ç ç‰¹æ®Šæ³¨é‡Šå®Œæ•´è§„èŒƒï¼šIDE æ”¯æŒã€ä½¿ç”¨ç¤ºä¾‹ä¸å›¢é˜Ÿåä½œæŒ‡å—</h2>
<h3 data-id="heading-1">ä¸€ã€å®Œæ•´æ³¨é‡Šè¡¨æ ¼</h3>



































































































































<table><thead><tr><th>æ³¨é‡Šå</th><th>æ ¸å¿ƒä½œç”¨è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯ç»†åˆ†</th><th>VSC</th><th>VS</th><th>JetBrains</th><th>ä¼˜å…ˆçº§å»ºè®®</th></tr></thead><tbody><tr><td>TODO</td><td>åŠŸèƒ½æœªå®ç°ï¼ˆå°šæœªå¯åŠ¨å¼€å‘ï¼‰</td><td>æ–°éœ€æ±‚ã€æœªåŠ¨å·¥çš„æ¨¡å— / æ¥å£</td><td>[x]</td><td>[x]</td><td>[x]</td><td>ä¸­ - é«˜</td></tr><tr><td>TODO:HIGH/MID/LOW</td><td>å¸¦ä¼˜å…ˆçº§çš„æœªå®ç°åŠŸèƒ½</td><td>éœ€åŒºåˆ†ç´§æ€¥ç¨‹åº¦ï¼ˆå¦‚ HIGH = è¿­ä»£å¿…åšï¼ŒLOW = åç»­ä¼˜åŒ–ï¼‰</td><td>[]</td><td>[]</td><td>[x]</td><td>è‡ªå®šä¹‰</td></tr><tr><td>UNDONE</td><td>åŠŸèƒ½æœªå®Œæˆï¼ˆå·²å¼€å‘éƒ¨åˆ†ï¼Œå¾…æ”¶å°¾ï¼‰</td><td>å¼€å‘ä¸­è¢«æ‰“æ–­ã€éœ€è¡¥å……ç»†èŠ‚ / è¾¹ç•Œå¤„ç†çš„åŠŸèƒ½</td><td>[]</td><td>[x]</td><td>[]</td><td>ä¸­</td></tr><tr><td>FIXME</td><td>å·²å‘ç°æ˜ç¡® Bugï¼Œéœ€ä¿®å¤</td><td>å¯å¤ç°ã€å®šä½æ¸…æ™°çš„ç¼ºé™·ï¼ˆå«æ½œåœ¨é£é™©æœªå¤ç°çš„é—®é¢˜ï¼‰</td><td>[]</td><td>[]</td><td>[x]</td><td>é«˜</td></tr><tr><td>FIXME:URGENT</td><td>ç´§æ€¥ Bug ä¿®å¤</td><td>çº¿ä¸Šæ•…éšœã€é˜»å¡æµ‹è¯•çš„æ ¸å¿ƒæµç¨‹ç¼ºé™·</td><td>[]</td><td>[]</td><td>[x]</td><td>æœ€é«˜</td></tr><tr><td>BUG</td><td>å·²ç¡®è®¤çš„å…·ä½“ç¼ºé™·</td><td>åŒºåˆ«äº FIXMEï¼šæ›´ä¾§é‡ â€œå·²å¤ç° + å½±å“èŒƒå›´æ˜ç¡®â€ çš„ Bugï¼ˆå¦‚ â€œç”¨æˆ· ID&gt;1000 æ—¶æŸ¥è¯¢å¤±è´¥â€ï¼‰</td><td>[]</td><td>[]</td><td>[]</td><td>é«˜</td></tr><tr><td>HACK</td><td>ä¸´æ—¶è§£å†³æ–¹æ¡ˆ / å–å·§å®ç°</td><td>åŠŸèƒ½å¯ç”¨ï¼Œä½†ä»£ç ä¸ä¼˜é›…ï¼ˆå¦‚ç¡¬ç¼–ç ã€è§„é¿æ¡†æ¶é™åˆ¶ï¼‰ï¼Œå¾…é‡æ„</td><td>[]</td><td>[x]</td><td>[]</td><td>ä¸­</td></tr><tr><td>XXX</td><td>å¾…ä¼˜åŒ–é—®é¢˜ï¼ˆè®¾è®¡ / å®ç°ä¸è§„èŒƒï¼‰</td><td>éç´§æ€¥ç¼ºé™·ï¼Œå¦‚å‘½åä¸è§„èŒƒã€å†—ä½™ä»£ç ã€é€»è¾‘å¯ç®€åŒ–ï¼ˆä¼˜å…ˆçº§ä½äº HACK/FIXMEï¼‰</td><td>[]</td><td>[]</td><td>[]</td><td>ä½ - ä¸­</td></tr><tr><td>UnresolvedMergeConflict</td><td>æœªè§£å†³çš„ä»£ç åˆå¹¶å†²çª</td><td>Git åˆå¹¶åˆ†æ”¯æ—¶äº§ç”Ÿçš„å†²çªï¼Œéœ€æ‰‹åŠ¨å¯¹æ¯”å¤„ç†</td><td>[]</td><td>[x]</td><td>[]</td><td>æœ€é«˜</td></tr><tr><td>NOTE</td><td>é‡è¦è¯´æ˜ / å¤‡æ³¨</td><td>è®°å½•è®¾è®¡æ€è·¯ã€ä¾èµ–æ¡ä»¶ã€ä½¿ç”¨é™åˆ¶ï¼ˆå¦‚ â€œä¾èµ–ç¬¬ä¸‰æ–¹ SDK v2.3.0ï¼Œå‡çº§éœ€æ”¹ç­¾åâ€ï¼‰</td><td>[]</td><td>[]</td><td>[x]</td><td>-</td></tr><tr><td>DEPRECATED</td><td>å·²åºŸå¼ƒçš„ä»£ç  / æ¥å£</td><td>ä¸å»ºè®®ç»§ç»­ä½¿ç”¨ï¼Œåç»­ç‰ˆæœ¬ä¼šåˆ é™¤ï¼ˆéœ€æ ‡æ³¨æ›¿ä»£æ–¹æ¡ˆï¼‰</td><td>[]</td><td>[]</td><td>[x]</td><td>-</td></tr><tr><td>REVIEW</td><td>éœ€ä»£ç å®¡æŸ¥ / å¤æ ¸</td><td>å¤æ‚é€»è¾‘ã€é«˜é£é™©æ¨¡å—ï¼ˆå¦‚æƒé™æ§åˆ¶ã€æ”¯ä»˜æµç¨‹ï¼‰ï¼Œéœ€å›¢é˜Ÿå¤æ ¸</td><td>[]</td><td>[]</td><td>[]</td><td>ä¸­</td></tr><tr><td>OPTIMIZE</td><td>æ€§èƒ½ / ç»“æ„ä¼˜åŒ–</td><td>ä»£ç å¯è¿è¡Œï¼Œä½†æ•ˆç‡ä½ï¼ˆå¦‚ O (nÂ²) å¾ªç¯ï¼‰æˆ–ç»“æ„æ··ä¹±ï¼Œéœ€é‡æ„</td><td>[]</td><td>[]</td><td>[]</td><td>ä½ - ä¸­</td></tr></tbody></table>
<blockquote>
<p>æ³¨ï¼šIDE æ”¯æŒæ ‡è®°è¯´æ˜</p>
<ul>
<li>
<p>[x]ï¼šåŸç”Ÿè‡ªå¸¦è¯†åˆ«ï¼ˆæ— éœ€é¢å¤–é…ç½®ï¼‰</p>
</li>
<li>
<p>[]ï¼šéœ€é€šè¿‡æ’ä»¶ / è‡ªå®šä¹‰é…ç½®å®ç°è¯†åˆ«ï¼ˆä¸‹æ–‡é™„é…ç½®æ–¹æ³•ï¼‰</p>
</li>
</ul>
</blockquote>
<h3 data-id="heading-2">äºŒã€è§„èŒƒä½¿ç”¨ç¤ºä¾‹ï¼ˆC++/ é€šç”¨è¯­æ³•ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span>HIGH å®ç°ç”¨æˆ·ç™»å½•çš„çŸ­ä¿¡éªŒè¯ç æ ¡éªŒï¼ˆæˆªæ­¢2025-12-15ï¼Œä¾èµ–çŸ­ä¿¡SDKé›†æˆï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">userLogin</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; phone, <span class="hljs-type">const</span> std::string&amp; code)</span> </span>{
    <span class="hljs-comment">// UNDONE è¡¥å……éªŒè¯ç è¿‡æœŸæ—¶é—´æ ¡éªŒï¼ˆå·²å®ç°å‘é€é€»è¾‘ï¼Œå¾…åŠ æ—¶æ•ˆåˆ¤æ–­ï¼‰</span>
    <span class="hljs-keyword">if</span> (code.<span class="hljs-built_in">empty</span>()) {
        <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span>URGENT ç©ºå­—ç¬¦ä¸²å¯¼è‡´å´©æºƒï¼Œéœ€æ·»åŠ å‚æ•°éç©ºæ ¡éªŒï¼ˆçº¿ä¸Šå·²åé¦ˆ3ä¾‹ï¼‰</span>
        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"code is empty"</span>);
    }

    <span class="hljs-comment">// BUG å½“phoneé•¿åº¦&gt;11ä½æ—¶ï¼Œæ•°æ®åº“æŸ¥è¯¢è¿”å›ç©ºæŒ‡é’ˆï¼ˆå¤ç°æ­¥éª¤ï¼šè¾“å…¥12ä½æ‰‹æœºå·ï¼‰</span>
    <span class="hljs-keyword">auto</span> user = db.<span class="hljs-built_in">queryUser</span>(phone);

    <span class="hljs-comment">// HACK ä¸´æ—¶ç”¨sleepè§„é¿å¹¶å‘é—®é¢˜ï¼Œåç»­éœ€æ”¹ç”¨äº’æ–¥é”ï¼ˆ<span class="hljs-doctag">TODO:</span>MID ä¼˜åŒ–å¹¶å‘æ§åˆ¶ï¼‰</span>
    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">500</span>));

    <span class="hljs-comment">// XXX ç¡¬ç¼–ç "admin"ï¼Œéœ€æ”¹ä¸ºé…ç½®é¡¹ï¼ˆconfig.hä¸­æ·»åŠ ADMIN_ROLEå¸¸é‡ï¼‰</span>
    <span class="hljs-keyword">if</span> (user-&gt;role == <span class="hljs-string">"admin"</span>) {
        <span class="hljs-comment">// NOTE ç®¡ç†å‘˜ç™»å½•æ— éœ€äºŒæ¬¡éªŒè¯ï¼ˆäº§å“éœ€æ±‚ï¼šè§æ–‡æ¡£P12ï¼‰</span>
        <span class="hljs-built_in">skipSecondAuth</span>();
    }

    <span class="hljs-comment">// DEPRECATED è¯¥æ¥å£å°†åœ¨v2.0åˆ é™¤ï¼Œæ›¿ä»£æ–¹æ¡ˆï¼šUserService::newGetUserInfo(phone)</span>
    <span class="hljs-keyword">auto</span> oldInfo = <span class="hljs-built_in">getUserInfo</span>(phone);

    <span class="hljs-comment">// REVIEW æƒé™åˆ¤æ–­é€»è¾‘è¾ƒå¤æ‚ï¼Œéœ€å¤æ ¸æ˜¯å¦å­˜åœ¨è¶Šæƒé£é™©ï¼ˆæ¶‰åŠç”¨æˆ·è§’è‰²ã€èµ„æºæ‰€æœ‰æƒï¼‰</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">checkPermission</span>(user, resourceId)) {
        <span class="hljs-keyword">return</span> FORBIDDEN;
    }

    <span class="hljs-comment">// OPTIMIZE å¾ªç¯éå†å…¨é‡ç”¨æˆ·æ•ˆç‡ä½ï¼Œéœ€æ·»åŠ ç´¢å¼•+åˆ†é¡µæŸ¥è¯¢ï¼ˆæ•°æ®é‡&gt;1ä¸‡æ—¶å¡é¡¿ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; u : allUsers) {
        <span class="hljs-keyword">if</span> (u.id == targetId) { <span class="hljs-comment">/* ... */</span> }
    }
}

<span class="hljs-comment">// UnresolvedMergeConflict åˆå¹¶feature/payåˆ†æ”¯æ—¶å†²çªï¼šæ”¯ä»˜å›è°ƒåœ°å€é…ç½®ï¼ˆéœ€ç¡®è®¤ç”¨æµ‹è¯•/æ­£å¼åœ°å€ï¼‰</span>
<span class="hljs-comment">// const std::string callbackUrl = "https://test-pay.example.com/callback";</span>
<span class="hljs-comment">// const std::string callbackUrl = "https://pay.example.com/callback";</span>
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€å„ IDE é«˜æ•ˆä½¿ç”¨æŒ‡å—ï¼ˆæŸ¥çœ‹ + è‡ªå®šä¹‰é…ç½®ï¼‰</h3>
<h4 data-id="heading-4">1. åŸç”ŸæŸ¥çœ‹æ–¹å¼ï¼ˆæ— éœ€é…ç½®ï¼‰</h4>

























<table><thead><tr><th>IDE</th><th>æŸ¥çœ‹å…¥å£</th><th>æ”¯æŒçš„é»˜è®¤æ³¨é‡Š</th></tr></thead><tbody><tr><td>VS Code</td><td>ç»ˆç«¯ â†’ è¿è¡Œä»»åŠ¡ â†’ ä»»åŠ¡ï¼šæ˜¾ç¤ºä»»åŠ¡</td><td>TODO</td></tr><tr><td>Visual Studio</td><td>è§†å›¾ â†’ ä»»åŠ¡åˆ—è¡¨ï¼ˆé»˜è®¤ â€œæ³¨é‡Šâ€ åˆ†ç±»ï¼‰</td><td>TODOã€UNDONEã€HACKã€UnresolvedMergeConflict</td></tr><tr><td>JetBrains</td><td>è§†å›¾ â†’ å·¥å…·çª—å£ â†’ TODOï¼ˆå¯ç­›é€‰ä¼˜å…ˆçº§ï¼‰</td><td>TODOã€FIXMEã€NOTEã€DEPRECATEDã€å¸¦åç¼€çš„ TODO/FIXME</td></tr></tbody></table>
<h4 data-id="heading-5">2. è‡ªå®šä¹‰é…ç½®ï¼ˆæ‰©å±•æ”¯æŒæ›´å¤šæ³¨é‡Šï¼‰</h4>
<h5 data-id="heading-6">ï¼ˆ1ï¼‰VS Codeï¼ˆæ¨èæ’ä»¶ï¼šTodo Treeï¼‰</h5>
<ul>
<li>å®‰è£…æ’ä»¶ï¼šæœç´¢ <code>Todo Tree</code>ï¼ˆæ”¯æŒé«˜äº®ã€ä¾§è¾¹æ ç­›é€‰ã€è‡ªå®šä¹‰è§„åˆ™ï¼‰</li>
<li>é…ç½®è‡ªå®šä¹‰æ³¨é‡Šï¼ˆæ–‡ä»¶ â†’ é¦–é€‰é¡¹ â†’ è®¾ç½® â†’ æœç´¢ <code>Todo Tree: Pattern</code>ï¼‰ï¼š
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"todo-tree.highlights.customHighlight"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
<span class="hljs-attr">"BUG"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bug"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ff0000"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffebee"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"REVIEW"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"check-circle"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ff9900"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#fff3e0"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"OPTIMIZE"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rocket"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#0099ff"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#e3f2fd"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>æ•ˆæœï¼šä¾§è¾¹æ ç”Ÿæˆ Todo Tree é¢æ¿ï¼Œå¯æŒ‰æ³¨é‡Šç±»å‹ / é¢œè‰²ç­›é€‰ã€‚</li>
</ul>
<h5 data-id="heading-7">ï¼ˆ2ï¼‰Visual Studioï¼ˆæ·»åŠ è‡ªå®šä¹‰ä»»åŠ¡ä»¤ç‰Œï¼‰</h5>
<ul>
<li>
<p>æ­¥éª¤ï¼šå·¥å…· â†’ é€‰é¡¹ â†’ ç¯å¢ƒ â†’ ä»»åŠ¡åˆ—è¡¨ â†’ ç‚¹å‡» â€œæ·»åŠ â€</p>
</li>
<li>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>





















<table><thead><tr><th>ä»¤ç‰Œ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>BUG</td><td>å·²ç¡®è®¤çš„å…·ä½“ç¼ºé™·</td></tr><tr><td>REVIEW</td><td>éœ€ä»£ç å®¡æŸ¥</td></tr><tr><td>OPTIMIZE</td><td>æ€§èƒ½ / ç»“æ„ä¼˜åŒ–</td></tr></tbody></table>
</li>
<li>
<p>æ•ˆæœï¼š<code>// BUG xxx</code> ä¼šæ˜¾ç¤ºåœ¨ â€œä»»åŠ¡åˆ—è¡¨â€ çš„ â€œæ³¨é‡Šâ€ åˆ†ç±»ä¸­ã€‚</p>
</li>
</ul>
<h5 data-id="heading-8">ï¼ˆ3ï¼‰JetBrainsï¼ˆæ·»åŠ  TODO æ¨¡å¼ï¼‰</h5>
<ul>
<li>æ­¥éª¤ï¼šFile â†’ Settings â†’ Tools â†’ TODO â†’ ç‚¹å‡» â€œ+â€</li>
<li>é…ç½®ç¤ºä¾‹ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼š

























<table><thead><tr><th>æ¨¡å¼</th><th>æè¿°</th><th>é¢œè‰²</th></tr></thead><tbody><tr><td><code>BUG\s*:</code></td><td>å·²ç¡®è®¤çš„ Bug</td><td>çº¢è‰²</td></tr><tr><td><code>REVIEW\s*:</code></td><td>éœ€ä»£ç å®¡æŸ¥</td><td>æ©™è‰²</td></tr><tr><td><code>OPTIMIZE\s*:</code></td><td>æ€§èƒ½ä¼˜åŒ–</td><td>è“è‰²</td></tr></tbody></table>
</li>
<li>æ•ˆæœï¼š<code>// BUG: xxx</code> ä¼šåœ¨ TODO é¢æ¿ä¸­å•ç‹¬åˆ†ç±»ï¼Œæ”¯æŒç­›é€‰ã€‚</li>
</ul>
<h3 data-id="heading-9">å››ã€å›¢é˜Ÿåä½œæ ¸å¿ƒè§„åˆ™ï¼ˆé¿å…æ··ä¹±ï¼‰</h3>
<h4 data-id="heading-10">1. æ˜ç¡®ä½¿ç”¨è¾¹ç•Œï¼š</h4>
<ul>
<li>ä¸æ··ç”¨ <code>TODO</code> å’Œ <code>UNDONE</code>ï¼šæœªåŠ¨å·¥ç”¨ TODOï¼Œå¼€å‘ä¸­æœªå®Œæˆç”¨ UNDONEï¼›</li>
<li>ä¸æ»¥ç”¨ <code>FIXME</code> å’Œ <code>BUG</code>ï¼šå¯å¤ç° + å½±å“æ˜ç¡®ç”¨ BUGï¼Œæ½œåœ¨é£é™© / æœªå¤ç°ç”¨ FIXMEã€‚</li>
<li>æ³¨é‡Šå¿…é¡»åŒ…å« 3 è¦ç´ ï¼š</li>
</ul>
<h4 data-id="heading-11">2. åšä»€ä¹ˆï¼ˆæ˜ç¡®ç›®æ ‡ï¼‰ï¼›</h4>
<ul>
<li>ä¼˜å…ˆçº§ / æˆªæ­¢æ—¶é—´ï¼ˆå¦‚ <code>TODO:HIGH æˆªæ­¢2025-12-20</code>ï¼‰ï¼›</li>
<li>ä¾èµ–æ¡ä»¶ï¼ˆå¦‚ <code>ä¾èµ–è®¢å•æ¨¡å—æ¥å£</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">3. å®šæœŸæ¸…ç†æ³¨é‡Šï¼š</h4>
<ul>
<li>è¿­ä»£å‘å¸ƒå‰ï¼šåˆ é™¤å·²å®Œæˆçš„ TODO/UNDONEï¼Œä¿®å¤æ‰€æœ‰ FIXME/BUGï¼›</li>
<li>åºŸå¼ƒä»£ç ï¼šç”¨ <code>DEPRECATED</code> æ ‡è®°ï¼Œè€Œéç›´æ¥åˆ é™¤ï¼ˆä¾¿äºå›æ»šï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">4. è·¨ IDE å…¼å®¹ï¼š</h4>
<ul>
<li>å›¢é˜Ÿç»Ÿä¸€ä½¿ç”¨åŸç”Ÿæ”¯æŒçš„æ³¨é‡Šï¼ˆTODOã€FIXMEã€NOTEï¼‰ï¼Œæˆ–åŒæ­¥è‡ªå®šä¹‰é…ç½®ï¼ˆå¦‚å…±äº« VS Code çš„ settings.jsonã€JetBrains çš„ TODO æ¨¡å¼å¯¼å‡ºæ–‡ä»¶ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-14">äº”ã€è¡¥å……è¯´æ˜</h3>
<ul>
<li><strong>è¯­è¨€å…¼å®¹æ€§</strong>ï¼šä¸Šè¿°æ³¨é‡Šè¯­æ³•é€‚ç”¨äº C++ã€Javaã€Pythonã€JavaScript ç­‰å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ï¼ˆä»…æ³¨é‡Šç¬¦å·å·®å¼‚ï¼Œå¦‚ Python ç”¨ <code># TODO</code>ï¼‰ï¼›</li>
<li><strong>å·¥å…·é›†æˆ</strong>ï¼šå¯ç»“åˆé¡¹ç›®ç®¡ç†å·¥å…·ï¼ˆå¦‚ Jiraï¼‰ï¼Œé€šè¿‡æ’ä»¶å°† TODO æ³¨é‡ŠåŒæ­¥ä¸ºä»»åŠ¡ï¼ˆå¦‚ VS Code çš„Jira Todoæ’ä»¶ï¼‰ï¼›</li>
<li><strong>é¿å…è¿‡åº¦æ³¨é‡Š</strong>ï¼šä»…æ ‡è®°å…³é”®å¾…åŠ / é—®é¢˜ï¼Œä»£ç æœ¬èº«å¯è‡ªè§£é‡Šçš„é€»è¾‘æ— éœ€é¢å¤–æ³¨é‡Šã€‚</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šè§„èŒƒï¼Œå¯å®ç° â€œä»£ç æ³¨é‡Šâ†’ä»»åŠ¡è·Ÿè¸ªâ†’å›¢é˜Ÿåä½œâ€ çš„é—­ç¯ï¼Œæå‡é¡¹ç›®ç®¡ç†æ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆäºŒï¼‰æ•´ä½“æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7576575703167221766</link>    <guid>https://juejin.cn/post/7576575703167221766</guid>    <pubDate>2025-11-26T04:41:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576575703167221766" data-draft-id="7576575703167205382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆäºŒï¼‰æ•´ä½“æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-26T04:41:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆäºŒï¼‰æ•´ä½“æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:41:27.000Z" title="Wed Nov 26 2025 04:41:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬2ç« ï¼šæ•´ä½“æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-1">ç« èŠ‚å¯¼è¯»</h3>
<p>æœ¬ç« å°†ä»é¡¶å±‚è®¾è®¡çš„è§’åº¦ï¼Œè¯¦ç»†é˜è¿° geaflow-infer çš„<strong>ä¸‰å±‚æ¶æ„</strong>ã€<strong>æ ¸å¿ƒç»„ä»¶å…³ç³»</strong>å’Œ<strong>Java-Python è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶</strong>ã€‚</p>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å°†æ·±åˆ»ç†è§£ï¼š</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆ</strong> è¦è¿™æ ·åˆ†å±‚è®¾è®¡</li>
<li><strong>å¦‚ä½•</strong> åœ¨å„å±‚ä¹‹é—´åè°ƒå’Œé€šä¿¡</li>
<li><strong>æ ¸å¿ƒçš„æƒè¡¡</strong> æ˜¯ä»€ä¹ˆï¼ˆæ€§èƒ½ vs å¯ç»´æŠ¤æ€§ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-2">2.1 ä¸‰å±‚æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-3">æ€»ä½“æ¶æ„è®¾è®¡ç†å¿µ</h4>
<p>geaflow-infer é‡‡ç”¨äº†<strong>ä¸‰å±‚åˆ†å±‚æ¶æ„</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åº”ç”¨å±‚ (Application Layer)                     â”‚
â”‚                  InferContext                              â”‚
â”‚  ç”¨æˆ·é€šè¿‡ InferContext è°ƒç”¨ <span class="hljs-built_in">infer</span>() è¿›è¡Œæ¨ç†                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ ç»Ÿä¸€æ¥å£ï¼ˆWhatï¼‰
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           é€»è¾‘å±‚ (Logic Layer)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç¯å¢ƒç®¡ç†     ä»»åŠ¡è¿è¡Œ      æ•°æ®äº¤æ¢      åºåˆ—åŒ–       â”‚  â”‚
â”‚  â”‚ InferEnv*   InferTask*  DataExchange* Pickle*       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  - åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒã€å¯åŠ¨Pythonè¿›ç¨‹ã€åè°ƒæ•°æ®æµ             â”‚
â”‚  - å¤„ç†é”™è¯¯ã€ç®¡ç†çŠ¶æ€ã€è®°å½•æ—¥å¿—                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ ç³»ç»Ÿè°ƒç”¨ã€è¿›ç¨‹ç®¡ç†ã€å†…å­˜æ“ä½œï¼ˆHowï¼‰
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          åŸºç¡€å±‚ (Infrastructure Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ProcessBuilderâ”‚  â”‚ File <span class="hljs-selector-tag">I</span>/O      â”‚  â”‚ Unsafe + mmapâ”‚   â”‚
â”‚  â”‚   (è¿›ç¨‹)      â”‚  â”‚  (æ–‡ä»¶)        â”‚  â”‚  (å†…å­˜)      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œæä¾›åº•å±‚èƒ½åŠ›                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4">æ¶æ„çš„è®¾è®¡å“²å­¦</h4>
<h5 data-id="heading-5">1. åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆSeparation of Concernsï¼‰</h5>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¯å¢ƒç®¡ç†å±‚                                         â”‚
â”‚  - åªå…³å¿ƒè™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–çš„å‡†å¤‡                      â”‚
â”‚  - ä¸å…³å¿ƒå…·ä½“çš„æ¨ç†é€»è¾‘                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡è¿è¡Œå±‚                                         â”‚
â”‚  - åªå…³å¿ƒè¿›ç¨‹çš„å¯åŠ¨å’Œç”Ÿå‘½å‘¨æœŸ                      â”‚
â”‚  - ä¸å…³å¿ƒæ•°æ®å¦‚ä½•åºåˆ—åŒ–                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®äº¤æ¢å±‚                                         â”‚
â”‚  - åªå…³å¿ƒé«˜æ•ˆä¼ è¾“æ•°æ®                              â”‚
â”‚  - ä¸å…³å¿ƒæ•°æ®çš„ä¸šåŠ¡å«ä¹‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åºåˆ—åŒ–å±‚                                           â”‚
â”‚  - åªå…³å¿ƒå¯¹è±¡&lt;-&gt;å­—èŠ‚æµçš„è½¬æ¢                       â”‚
â”‚  - ä¸å…³å¿ƒæ•°æ®æ¥è‡ªå“ªé‡Œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>æ¯ä¸€å±‚å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•</li>
<li>ä¿®æ”¹æŸä¸€å±‚çš„å®ç°ä¸ä¼šå½±å“å…¶ä»–å±‚</li>
<li>ä»£ç æ˜“äºç†è§£å’Œç»´æŠ¤</li>
</ul>
<h5 data-id="heading-6">2. æ¥å£å¯¼å‘è®¾è®¡ï¼ˆInterface-Oriented Designï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä»»åŠ¡è¿è¡Œæ¥å£ï¼ˆéšè—å®ç°ç»†èŠ‚ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InferTaskRun</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(List&lt;String&gt; script)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// æ•°æ®æ¡¥æ¥æ¥å£ï¼ˆæ”¯æŒå¤šç§å®ç°ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IDataBridge</span>&lt;OUT&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Closeable</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">write</span><span class="hljs-params">(Object... obj)</span> <span class="hljs-keyword">throws</span> IOException;
    OUT <span class="hljs-title function_">read</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException;
}

<span class="hljs-comment">// ç¼–è§£ç æ¥å£ï¼ˆæ”¯æŒæ‰©å±•ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IEncoder</span> {
    <span class="hljs-type">byte</span>[] encode(Object obj);
}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå¤šç§å®ç°ï¼ˆå¦‚ HTTP æ¡¥æ¥ã€WebSocket æ¡¥æ¥ï¼‰</li>
<li>ä¾¿äºå•å…ƒæµ‹è¯•ï¼ˆMock å®ç°ï¼‰</li>
<li>é™ä½ç»„ä»¶é—´çš„è€¦åˆåº¦</li>
</ul>
<h5 data-id="heading-7">3. å•ä¾‹ + æ‡’åŠ è½½ï¼ˆSingleton + Lazy Initializationï¼‰</h5>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¦–æ¬¡è°ƒç”¨ InferContext æ—¶:                 â”‚
â”‚  <span class="hljs-number">1</span>. åˆ›å»º InferEnvironmentManager å•ä¾‹    â”‚
â”‚  <span class="hljs-number">2</span>. åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒï¼ˆå¼‚æ­¥ï¼Œåå°è¿›è¡Œï¼‰     â”‚
â”‚  <span class="hljs-number">3</span>. ç«‹å³è¿”å›ï¼Œä¸é˜»å¡ç”¨æˆ·                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è°ƒç”¨ <span class="hljs-built_in">infer</span>() æ—¶:                         â”‚
â”‚  <span class="hljs-number">1</span>. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ˜¯å¦å°±ç»ª                â”‚
â”‚  <span class="hljs-number">2</span>. å¦‚æœå°±ç»ªï¼Œç«‹å³å¯åŠ¨æ¨ç†               â”‚
â”‚  <span class="hljs-number">3</span>. å¦‚æœæœªå°±ç»ªï¼Œç­‰å¾…è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>å‡å°‘å†…å­˜å ç”¨ï¼ˆä»…åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼‰</li>
<li>åŠ å¿«åº”ç”¨å¯åŠ¨é€Ÿåº¦ï¼ˆè™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–å¼‚æ­¥è¿›è¡Œï¼‰</li>
<li>é¿å…é‡å¤åˆå§‹åŒ–çš„å¼€é”€</li>
</ul>
<hr/>
<h3 data-id="heading-8">2.2 æ ¸å¿ƒç»„ä»¶å…³ç³»</h3>
<h4 data-id="heading-9">å®Œæ•´æµç¨‹æ—¶åºå›¾</h4>
<pre><code class="hljs language-css" lang="css">æ—¶é—´è½´
â”‚
â”œâ”€ T0: åº”ç”¨å¯åŠ¨
â”‚   â”‚
â”‚   â””â”€â†’ InferContext.<span class="hljs-built_in">build</span>(config)
â”‚       â”‚
â”‚       â”œâ”€â†’ InferEnvironmentManager.<span class="hljs-built_in">buildInferEnvironmentManager</span>(config)
â”‚       â”‚   â”‚ (å•ä¾‹)
â”‚       â”‚   â””â”€â†’ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆåå°å¼‚æ­¥ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â†’ DataExchangeContext.<span class="hljs-built_in">init</span>()
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ <span class="hljs-built_in">DataExchangeQueue</span>(<span class="hljs-string">"input"</span>, ...)
â”‚       â”‚   â””â”€â†’ <span class="hljs-built_in">DataExchangeQueue</span>(<span class="hljs-string">"output"</span>, ...)
â”‚       â”‚
â”‚       â””â”€â†’ <span class="hljs-built_in">InferTaskRunImpl</span>(environmentContext)
â”‚
â”œâ”€ T1-T100ms: è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–ä¸­...
â”‚   â”‚
â”‚   â”œâ”€â†’ InferDependencyManager.<span class="hljs-built_in">buildInferRuntimeFiles</span>()
â”‚   â”œâ”€â†’ æ‰§è¡Œ install-infer-env.sh (Conda)
â”‚   â””â”€â†’ å†™å…¥ _finish æ ‡è®°æ–‡ä»¶
â”‚
â”œâ”€ T100ms: é¦–æ¬¡æ¨ç†è°ƒç”¨
â”‚   â”‚
â”‚   â””â”€â†’ InferContext.<span class="hljs-built_in">infer</span>(features...)
â”‚       â”‚
â”‚       â”œâ”€â†’ [æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒçŠ¶æ€]
â”‚       â”‚   å¦‚æœæœªå°±ç»ªï¼Œç­‰å¾…...
â”‚       â”‚
â”‚       â”œâ”€â†’ InferTaskRunImpl.<span class="hljs-built_in">run</span>([python, infer_server.py, ...])
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â†’ ProcessBuilder.<span class="hljs-built_in">start</span>()
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â†’ ProcessLoggerManager.<span class="hljs-built_in">startLogging</span>()
â”‚       â”‚       â”‚   â”‚ (åå°çº¿ç¨‹æ•è·è¾“å‡º)
â”‚       â”‚       â”‚   â””â”€â†’ Slf4j æ—¥å¿—
â”‚       â”‚       â”‚
â”‚       â”‚       â””â”€â†’ Python è¿›ç¨‹å¯åŠ¨
â”‚       â”‚           â”‚
â”‚       â”‚           â””â”€â†’ infer_server.py
â”‚       â”‚               â”‚
â”‚       â”‚               â”œâ”€â†’ è¿æ¥å…±äº«å†…å­˜é˜Ÿåˆ—
â”‚       â”‚               â”œâ”€â†’ åŠ è½½ç”¨æˆ· Transform ç±»
â”‚       â”‚               â””â”€â†’ ç­‰å¾…æ¨ç†è¯·æ±‚...
â”‚       â”‚
â”‚       â”œâ”€â†’ InferDataBridgeImpl.<span class="hljs-built_in">write</span>(features)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ Pickler.<span class="hljs-built_in">encode</span>(features)
â”‚       â”‚   â”‚   â”‚ Javaå¯¹è±¡ â†’ Pickleå­—èŠ‚æµ
â”‚       â”‚   â”‚   â””â”€â†’ OpCodeç”Ÿæˆ
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ InferDataWriter.<span class="hljs-built_in">write</span>(bytes)
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â†’ <span class="hljs-built_in">DataExchangeQueue</span>(<span class="hljs-string">"input"</span>).<span class="hljs-built_in">put</span>(bytes)
â”‚       â”‚   â”‚       â”‚ (æ— é”ï¼ŒUnsafeæ“ä½œ)
â”‚       â”‚   â”‚       â””â”€â†’ å†…å­˜æ˜ å°„æ–‡ä»¶
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â†’ è§¦å‘ Python è¿›ç¨‹è¯»å–
â”‚       â”‚
â”‚       â”œâ”€ [Pythonè¿›ç¨‹æ‰§è¡Œ]
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ ä» <span class="hljs-built_in">Queue</span>(<span class="hljs-string">"input"</span>) è¯»å–å­—èŠ‚æµ
â”‚       â”‚   â”œâ”€â†’ Unpickle è§£åºåˆ—åŒ–
â”‚       â”‚   â”œâ”€â†’ æ‰§è¡Œç”¨æˆ· Transform ç±»
â”‚       â”‚   â””â”€â†’ å†™å…¥ç»“æœåˆ° <span class="hljs-built_in">Queue</span>(<span class="hljs-string">"output"</span>)
â”‚       â”‚
â”‚       â”œâ”€â†’ InferDataBridgeImpl.<span class="hljs-built_in">read</span>()
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ InferDataReader.<span class="hljs-built_in">read</span>()
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â†’ <span class="hljs-built_in">DataExchangeQueue</span>(<span class="hljs-string">"output"</span>).<span class="hljs-built_in">get</span>(bytes)
â”‚       â”‚   â”‚       â”‚ (æ— é”ï¼Œè½®è¯¢)
â”‚       â”‚   â”‚       â””â”€â†’ å†…å­˜æ˜ å°„æ–‡ä»¶
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â†’ Unpickler.<span class="hljs-built_in">decode</span>(bytes)
â”‚       â”‚   â”‚   â”‚ Pickleå­—èŠ‚æµ â†’ Javaå¯¹è±¡
â”‚       â”‚   â”‚   â””â”€â†’ å¯¹è±¡æ„é€ 
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â†’ è¿”å›ç»“æœå¯¹è±¡
â”‚       â”‚
â”‚       â””â”€â†’ è¿”å›ç»™ç”¨æˆ·
â”‚
â”œâ”€ T200ms-N: åç»­æ¨ç†è°ƒç”¨
â”‚   â”‚
â”‚   â””â”€â†’ [å¤ç”¨ Python è¿›ç¨‹ï¼Œä¸éœ€è¦é‡æ–°åˆå§‹åŒ–]
â”‚       Python è¿›ç¨‹æŒç»­ç›‘å¬é˜Ÿåˆ—...
â”‚
â””â”€ åº”ç”¨å…³é—­
    â”‚
    â””â”€â†’ InferContext.<span class="hljs-built_in">close</span>()
        â”‚
        â”œâ”€â†’ InferTaskRunImpl.<span class="hljs-built_in">stop</span>()
        â”‚   â”‚
        â”‚   â””â”€â†’ process.<span class="hljs-built_in">destroyForcibly</span>()
        â”‚       â”‚ æ€æ­» Python è¿›ç¨‹
        â”‚       â””â”€â†’ ProcessLoggerManager åœæ­¢æ—¥å¿—æ•è·
        â”‚
        â””â”€â†’ DataExchangeQueue.<span class="hljs-built_in">close</span>()
            â”‚
            â””â”€â†’ é‡Šæ”¾å†…å­˜æ˜ å°„
</code></pre>
<h4 data-id="heading-10">ç»„ä»¶ä¾èµ–å…³ç³»å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        InferContext (ç”¨æˆ·å…¥å£)        â”‚
â”‚  + <span class="hljs-built_in">infer</span>(features...)               â”‚
â”‚  + <span class="hljs-built_in">close</span>()                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         â”‚         â”‚          â”‚
         â–¼         â–¼         â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚InferEnvâ”‚ â”‚InferTaskâ”‚ â”‚IDataB â”‚ â”‚InferEnv â”‚
    â”‚Manager â”‚ â”‚RunImpl   â”‚ â”‚ridge  â”‚ â”‚Context  â”‚
    â”‚ (å•ä¾‹)  â”‚ â”‚         â”‚ â”‚       â”‚ â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚         â”‚
         â”‚         â”‚         â”‚ æŒæœ‰
         â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚    â”‚
         â”‚    â–¼
         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ â”‚ProcessLoggerManager  â”‚
         â”‚ â”‚  (åå°æ—¥å¿—çº¿ç¨‹)       â”‚
         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚InferDependencyManager   â”‚
    â”‚ (æ–‡ä»¶å’Œè„šæœ¬ç®¡ç†)         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚DataExchangeContext   â”‚
    â”‚ (ä¸¤ä¸ªå…±äº«å†…å­˜é˜Ÿåˆ—)     â”‚
    â”‚  - <span class="hljs-selector-tag">Input</span> Queue       â”‚
    â”‚  - Output Queue      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â–¼         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Pickler  â”‚ â”‚Unpickler â”‚
   â”‚(åºåˆ—åŒ–) â”‚ â”‚(ååºåˆ—åŒ–) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-11">å…³é”®æ•°æ®ç»“æ„å…³ç³»</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>     <span class="hljs-string">InferContext</span> <span class="hljs-string">(é—¨é¢)</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">environmentManager:</span> <span class="hljs-string">InferEnviron</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">dataContext:</span> <span class="hljs-string">DataExchangeContext</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">taskRun:</span> <span class="hljs-string">InferTaskRunImpl</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">dataBridge:</span> <span class="hljs-string">IDataBridge&lt;OUT&gt;</span>       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">encoder/decoder:</span> <span class="hljs-string">I**</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">DataExchangeContext</span> <span class="hljs-string">(æ•°æ®ä¸Šä¸‹æ–‡)</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">receiveQueue:</span> <span class="hljs-string">DataExchangeQueue</span>    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">sendQueue:</span> <span class="hljs-string">DataExchangeQueue</span>       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">(åŒå‘é€šä¿¡ï¼ŒA-&gt;B</span> <span class="hljs-string">å’Œ</span> <span class="hljs-string">B-&gt;A)</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">DataExchangeQueue</span> <span class="hljs-string">(å…±äº«å†…å­˜)</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">mapAddress:</span> <span class="hljs-string">long</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">outputAddress:</span> <span class="hljs-string">long</span>                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">inputNextAddress:</span> <span class="hljs-string">long</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> [<span class="hljs-string">å†…å­˜å¸ƒå±€è¯¦è§ç¬¬6ç« </span>]                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">InferTaskRunImpl</span> <span class="hljs-string">(è¿›ç¨‹ç®¡ç†)</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">inferTask:</span> <span class="hljs-string">Process</span>                 <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">inferTaskStatus:</span> <span class="hljs-string">InferTaskStatus</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">environmentContext:</span> <span class="hljs-string">InferEnv...</span>    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-attr">virtualEnvPath:</span> <span class="hljs-string">String</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">2.3 Java-Python è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶</h3>
<h4 data-id="heading-13">é€šä¿¡æ¨¡å¼é€‰æ‹©</h4>
<p>geaflow-infer é‡‡ç”¨äº†<strong>å…±äº«å†…å­˜ + æ— é”é˜Ÿåˆ—</strong>çš„é€šä¿¡æ¨¡å¼ï¼Œè€Œä¸æ˜¯å…¶ä»–å¯é€‰æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å¯é€‰çš„ IPC (Inter-Process Communication) æ–¹æ¡ˆ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹æ¡ˆ          â”‚ å»¶è¿Ÿ      â”‚ åå   â”‚ å¤æ‚åº¦ â”‚ è·¨ç½‘ç»œ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HTTP/REST     â”‚ æ¯«ç§’çº§   â”‚ ä¸­ç­‰   â”‚ ä½     â”‚ æ”¯æŒ         â”‚
â”‚ Socket/RPC    â”‚ æ¯«ç§’çº§   â”‚ ä¸­ç­‰   â”‚ ä¸­ç­‰   â”‚ æ”¯æŒ         â”‚
â”‚ Named Pipe    â”‚ å¾®ç§’çº§   â”‚ ä¸­ç­‰   â”‚ ä¸­ç­‰   â”‚ ä¸æ”¯æŒ       â”‚
â”‚ Shared Memory â”‚ å¾®ç§’çº§   â”‚ é«˜     â”‚ é«˜     â”‚ ä¸æ”¯æŒ       â”‚
â”‚ (geaflow-infer)          â”‚         â”‚        â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GeaFlow-Infer çš„é€‰æ‹©: å…±äº«å†…å­˜ï¼ˆåŒæœºå®ç°ï¼‰
åŸå› :
<span class="hljs-bullet">  1.</span> å»¶è¿Ÿæ•æ„Ÿ: æ¨ç†ä»»åŠ¡é€šå¸¸è¦æ±‚ä½å»¶è¿Ÿ
<span class="hljs-bullet">  2.</span> ååé‡å¤§: å›¾è®¡ç®—å¯èƒ½äº§ç”Ÿå¤§é‡æ¨ç†è¯·æ±‚
<span class="hljs-bullet">  3.</span> æœ¬åœ°é€šä¿¡: Java å’Œ Python é€šå¸¸åœ¨åŒä¸€å°æœºå™¨
<span class="hljs-bullet">  4.</span> é›¶æ‹·è´: å…±äº«å†…å­˜é¿å…æ•°æ®å¤åˆ¶
</code></pre>
<h4 data-id="heading-14">é€šä¿¡æµç¨‹è¯¦è§£</h4>
<h5 data-id="heading-15">Phase 1: åˆå§‹åŒ–ï¼ˆInit Phaseï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">Javaè¿›ç¨‹                          Pythonè¿›ç¨‹
    â”‚                               â”‚
    â”‚ <span class="hljs-number">1</span>. åˆ›å»º <span class="hljs-number">2</span> ä¸ªå…±äº«å†…å­˜é˜Ÿåˆ—        â”‚
    â”œâ”€â†’ <span class="hljs-built_in">Queue</span>("input_${id}")        â”‚
    â”œâ”€â†’ <span class="hljs-built_in">Queue</span>("output_${id}")       â”‚
    â”‚                               â”‚
    â”‚ <span class="hljs-number">2</span>. è®°å½• Queue ID               â”‚
    â”‚    ä½œä¸ºç¯å¢ƒå˜é‡                 â”‚
    â”‚                               â”‚
    â”‚ <span class="hljs-number">3</span>. å¯åŠ¨ Python è¿›ç¨‹             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å¯åŠ¨
    â”‚                               â”‚
    â”‚                               â”‚ <span class="hljs-number">4</span>. è¯»å–ç¯å¢ƒå˜é‡
    â”‚                               â”œâ”€â†’ input_queue_shm_id
    â”‚                               â”œâ”€â†’ output_queue_shm_id
    â”‚                               â”‚
    â”‚                               â”‚ <span class="hljs-number">5</span>. è¿æ¥å…±äº«å†…å­˜
    â”‚                               â”œâ”€â†’ mmap<span class="hljs-selector-class">.mmap</span>(input_queue_shm_id)
    â”‚                               â”œâ”€â†’ mmap<span class="hljs-selector-class">.mmap</span>(output_queue_shm_id)
    â”‚                               â”‚
    â”‚                               â”‚ <span class="hljs-number">6</span>. åŠ è½½æ¨¡å‹ï¼Œå°±ç»ª
    â”‚ <span class="hljs-number">7</span>. æ£€æµ‹ Python è¿›ç¨‹å°±ç»ª â†â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                               â”‚
</code></pre>
<p><strong>æ ¸å¿ƒæ•°æ®ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java ä¾§ï¼šç¯å¢ƒå˜é‡é…ç½®</span>
Map&lt;String, String&gt; env = processBuilder.environment();
env.put(<span class="hljs-string">"input_queue_shm_id"</span>, <span class="hljs-string">"input_12345"</span>);  <span class="hljs-comment">// é˜Ÿåˆ— ID</span>
env.put(<span class="hljs-string">"output_queue_shm_id"</span>, <span class="hljs-string">"output_12345"</span>);
env.put(<span class="hljs-string">"PYTHONPATH"</span>, <span class="hljs-string">"/path/to/infer"</span>);
env.put(<span class="hljs-string">"LD_LIBRARY_PATH"</span>, <span class="hljs-string">"/path/to/lib"</span>);
env.put(<span class="hljs-string">"--tfClassName"</span>, <span class="hljs-string">"my.custom.Transform"</span>);

<span class="hljs-comment">// Python ä¾§ï¼šè¯»å–ç¯å¢ƒå˜é‡</span>
input_queue_id = os.environ[<span class="hljs-string">'input_queue_shm_id'</span>]
output_queue_id = os.environ[<span class="hljs-string">'output_queue_shm_id'</span>]
input_queue = DataExchangeQueue(input_queue_id)
output_queue = DataExchangeQueue(output_queue_id)
</code></pre>
<h5 data-id="heading-16">Phase 2: æ•°æ®ä¼ è¾“ï¼ˆData Transfer Phaseï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">Javaè¿›ç¨‹                    å…±äº«å†…å­˜é˜Ÿåˆ—                Pythonè¿›ç¨‹
    â”‚                          â”‚                           â”‚
    â”‚ <span class="hljs-number">1</span>. åºåˆ—åŒ–è¾“å…¥æ•°æ®         â”‚                           â”‚
    â”œâ”€â”€&gt; Pickler<span class="hljs-selector-class">.encode</span>()      â”‚                           â”‚
    â”‚    features â†’ bytes       â”‚                           â”‚
    â”‚                          â”‚                           â”‚
    â”‚ <span class="hljs-number">2</span>. å†™å…¥ <span class="hljs-selector-tag">input</span> é˜Ÿåˆ—        â”‚                           â”‚
    â”œâ”€â”€&gt; DataExchangeQueue     â”‚                           â”‚
    â”‚    <span class="hljs-selector-class">.put</span>(bytes)           â”‚                           â”‚
    â”‚    <span class="hljs-selector-attr">[å†…å­˜æ˜ å°„]</span>            â”‚                           â”‚
    â”‚                          â”‚ notify                     â”‚
    â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ è¯»å– <span class="hljs-selector-tag">input</span> é˜Ÿåˆ—
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚                           â”‚ <span class="hljs-number">3</span>. ååºåˆ—åŒ–
    â”‚                          â”‚                           â”œâ”€â”€&gt; Unpickle
    â”‚                          â”‚                           â”‚    bytes â†’ objects
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚                           â”‚ <span class="hljs-number">4</span>. æ‰§è¡Œæ¨ç†
    â”‚                          â”‚                           â”œâ”€â”€&gt; <span class="hljs-built_in">user_transform</span>(obj)
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚                           â”‚ <span class="hljs-number">5</span>. åºåˆ—åŒ–ç»“æœ
    â”‚                          â”‚                           â”œâ”€â”€&gt; Pickler<span class="hljs-selector-class">.encode</span>()
    â”‚                          â”‚                           â”‚    result â†’ bytes
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚                           â”‚ <span class="hljs-number">6</span>. å†™å…¥ output é˜Ÿåˆ—
    â”‚                          â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                          â”‚ <span class="hljs-selector-attr">[å†…å­˜æ˜ å°„]</span>                 â”‚
    â”‚                          â”‚ notify                    â”‚
    â”‚ <span class="hljs-number">7</span>. è½®è¯¢ output é˜Ÿåˆ—      â”‚                           â”‚
    â”œâ”€â”€&gt; DataExchangeQueue     â”‚                           â”‚
    â”‚    <span class="hljs-selector-class">.get</span>(bytes)           â”‚                           â”‚
    â”‚                          â”‚                           â”‚
    â”‚ <span class="hljs-number">8</span>. ååºåˆ—åŒ–ç»“æœ           â”‚                           â”‚
    â”œâ”€â”€&gt; Unpickler<span class="hljs-selector-class">.decode</span>()    â”‚                           â”‚
    â”‚    bytes â†’ objects       â”‚                           â”‚
    â”‚                          â”‚                           â”‚
    â”‚ <span class="hljs-number">9</span>. è¿”å›ç»“æœç»™ç”¨æˆ·        â”‚                           â”‚
    â†“                          â”‚                           â”‚
</code></pre>
<h4 data-id="heading-17">å†…å­˜æ˜ å°„ä¸æ— é”è®¾è®¡</h4>
<h5 data-id="heading-18">å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰çš„å·¥ä½œåŸç†</h5>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Linux æ–‡ä»¶ç³»ç»Ÿ                      â”‚
â”‚  /dev/shm/geaflow_infer_queue_${id} â”‚
â”‚  (å…±äº«å†…å­˜æ–‡ä»¶ï¼Œå¤§å°ï¼šé€šå¸¸ <span class="hljs-number">1</span>MB-<span class="hljs-number">100</span>MB)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”
    â”‚                             â”‚
    â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Javaè¿›ç¨‹é¡µè¡¨   â”‚         â”‚ Pythonè¿›ç¨‹é¡µè¡¨â”‚
â”‚  è™šæ‹Ÿåœ°å€ç©ºé—´  â”‚         â”‚  è™šæ‹Ÿåœ°å€ç©ºé—´ â”‚
â”‚  <span class="hljs-number">0</span>x1000-<span class="hljs-number">0</span>x2000 â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ <span class="hljs-number">0</span>x5000-<span class="hljs-number">0</span>x6000â”‚
â”‚  (ä¸åŒåœ°å€)              â”‚  (ä¸åŒåœ°å€)   â”‚
â”‚  â†“                       â”‚  â†“           â”‚
â”‚  åŒä¸€ä»½ç‰©ç†å†…å­˜            â”‚  åŒä¸€ä»½ç‰©ç†å†…å­˜ â”‚
â”‚  (Page Frame <span class="hljs-number">123</span>-<span class="hljs-number">456</span>)    â”‚(Page Frame   â”‚
â”‚                          â”‚ <span class="hljs-number">123</span>-<span class="hljs-number">456</span>)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³é”®ç‰¹æ€§ï¼š
  <span class="hljs-number">1</span>. è™šæ‹Ÿåœ°å€ä¸åŒï¼Œä½†æŒ‡å‘åŒä¸€ç‰©ç†å†…å­˜
  <span class="hljs-number">2</span>. ä¿®æ”¹å†…å­˜çš„ä¸€æ–¹ï¼Œå¦ä¸€æ–¹ç«‹å³å¯è§
  <span class="hljs-number">3</span>. ä¸éœ€è¦æ˜¾å¼çš„æ•°æ®å¤åˆ¶ï¼ˆé›¶æ‹·è´ï¼‰
</code></pre>
<h5 data-id="heading-19">æ— é”é˜Ÿåˆ—çš„å¹¶å‘æœºåˆ¶</h5>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…±äº«å†…å­˜å¸ƒå±€                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-section">[å…ƒæ•°æ®åŒº]</span>                                     â”‚
â”‚  - outputAddress (8 bytes) â”€&gt; å†™æŒ‡é’ˆ           â”‚
â”‚  - inputNextAddress (8 bytes) â”€&gt; è¯»æŒ‡é’ˆ        â”‚
â”‚  - <span class="hljs-section">[ç¼“å­˜è¡Œå¯¹é½ï¼Œé¿å… False Sharing]</span>            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-section">[æ•°æ®åŒº]</span>                                       â”‚
â”‚  <span class="hljs-section">[ç¼“å†²åŒº 0]</span> <span class="hljs-section">[ç¼“å†²åŒº 1]</span> <span class="hljs-section">[ç¼“å†²åŒº 2]</span> ...         â”‚
â”‚   Ring Buffer ç»“æ„ï¼Œå¤§å°ä¸º 2^n å¯¹é½            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ—¶é—´è½´ï¼š
  Java:         Python:
   â”‚             â”‚
   â”œâ”€ T0:        â”‚
   â”‚ <span class="hljs-attr">write_ptr</span> = <span class="hljs-number">0</span>
   â”‚ å†™å…¥æ•°æ®     â”‚
   â”‚             â”œâ”€ T0.5:
   â”‚             â”‚ read_ptr è¿˜æ˜¯ 0
   â”‚             â”‚ (çœ‹ä¸åˆ°æ–°æ•°æ®)
   â”‚             â”‚
   â”œâ”€ T1:        â”‚
   â”‚ <span class="hljs-attr">write_ptr</span> = <span class="hljs-number">256</span>
   â”‚ å‘å‡ºå†…å­˜å±éšœ â”‚
   â”‚             â”œâ”€ T2:
   â”‚             â”‚ å†…å­˜å±éšœä¿è¯é¡ºåº
   â”‚             â”‚ <span class="hljs-attr">read_ptr</span> = <span class="hljs-number">256</span>
   â”‚             â”‚ è¯»å–æ–°æ•°æ®
</code></pre>
<p><strong>æ— é”ç®—æ³•çš„æ ¸å¿ƒ</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>Unsafe.putOrderedLong()</code> å†™æŒ‡é’ˆï¼ˆå¸¦å†…å­˜å±éšœï¼‰</li>
<li>ä½¿ç”¨ <code>Unsafe.getVolatile()</code> è¯»æŒ‡é’ˆï¼ˆå¸¦å†…å­˜å±éšœï¼‰</li>
<li>é¿å…ä½¿ç”¨ <code>synchronized</code> å’Œ <code>Lock</code></li>
<li>æ”¯æŒå¤šä¸ª reader å’Œå¤šä¸ª writer çš„å¹¶å‘</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç ï¼šå†™æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> {
    <span class="hljs-comment">// æ£€æŸ¥å¯ç”¨ç©ºé—´</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">writeIndex</span> <span class="hljs-operator">=</span> getWriteIndex();
    <span class="hljs-type">long</span> <span class="hljs-variable">nextIndex</span> <span class="hljs-operator">=</span> (writeIndex + data.length) &amp; mask;
    <span class="hljs-keyword">if</span> (!canWrite(nextIndex)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferFullException</span>();
    }
    
    <span class="hljs-comment">// å†™æ•°æ®ï¼ˆæ™®é€šå†™ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; data.length; i++) {
        UNSAFE.putByte(data[i]);
    }
    
    <span class="hljs-comment">// æ›´æ–°æŒ‡é’ˆï¼ˆå¸¦å†…å­˜å±éšœï¼‰</span>
    UNSAFE.putOrderedLong(<span class="hljs-built_in">this</span>, WRITE_PTR_OFFSET, nextIndex);
}

<span class="hljs-comment">// ä¼ªä»£ç ï¼šè¯»æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] read() {
    <span class="hljs-comment">// è¯»å†™æŒ‡é’ˆï¼ˆå¸¦å†…å­˜å±éšœï¼‰</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">writeIndex</span> <span class="hljs-operator">=</span> UNSAFE.getVolatileLong(<span class="hljs-built_in">this</span>, WRITE_PTR_OFFSET);
    <span class="hljs-type">long</span> <span class="hljs-variable">readIndex</span> <span class="hljs-operator">=</span> getReadIndex();
    
    <span class="hljs-keyword">if</span> (writeIndex == readIndex) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æ— æ•°æ®å¯è¯»</span>
    }
    
    <span class="hljs-comment">// è¯»æ•°æ®ï¼ˆæ™®é€šè¯»ï¼‰</span>
    <span class="hljs-type">byte</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[getDataLength()];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; result.length; i++) {
        result[i] = UNSAFE.getByte(address + readIndex + i);
    }
    
    <span class="hljs-comment">// æ›´æ–°æŒ‡é’ˆï¼ˆå¸¦å†…å­˜å±éšœï¼‰</span>
    UNSAFE.putOrderedLong(<span class="hljs-built_in">this</span>, READ_PTR_OFFSET, 
        (readIndex + result.length) &amp; mask);
    
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h4 data-id="heading-20">é€šä¿¡æ€§èƒ½åˆ†æ</h4>
<pre><code class="hljs language-markdown" lang="markdown">å»¶è¿Ÿåˆ†è§£ï¼ˆEnd-to-End Latencyï¼‰ï¼š
  æ€»å»¶è¿Ÿ = Javaåºåˆ—åŒ– + å†…å­˜å†™å…¥ + ä¸Šä¸‹æ–‡åˆ‡æ¢ + Pythonååºåˆ—åŒ– 
<span class="hljs-bullet">          +</span> æ¨ç†æ‰§è¡Œ + ç»“æœåºåˆ—åŒ– + å†…å­˜è¯»å– + Javaååºåˆ—åŒ–

  â‰ˆ 1Î¼s (åºåˆ—åŒ–) + 0.1Î¼s (mmap å†™) + ~100Î¼s (ä¸Šä¸‹æ–‡åˆ‡æ¢)
<span class="hljs-bullet">    +</span> 1Î¼s (ååºåˆ—åŒ–) + æ¨ç†æ—¶é—´ + ...

ååé‡åˆ†æï¼š
<span class="hljs-bullet">  -</span> ç¯å½¢ç¼“å†²åŒºå¤§å°: é€šå¸¸ 1MB - 100MB
<span class="hljs-bullet">  -</span> å•æ¬¡æ¨ç†æ•°æ®: é€šå¸¸ KB çº§åˆ«
<span class="hljs-bullet">  -</span> ååé‡: å¯ä»¥è¾¾åˆ° Gbps çº§åˆ«ï¼ˆç†è®ºä¸Šï¼‰

å¯¹æ¯” HTTP/RPCï¼š
  HTTP: æ¯«ç§’çº§ (ms) = 1000Î¼s
  å…±äº«å†…å­˜: å¾®ç§’çº§ (Î¼s) 
  æ€§èƒ½æå‡: 1000 å€
</code></pre>
<hr/>
<h3 data-id="heading-21">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fman7.org%2Flinux%2Fman-pages%2Fman2%2Fmmap.2.html" target="_blank" title="https://man7.org/linux/man-pages/man2/mmap.2.html" ref="nofollow noopener noreferrer">Linux mmap() æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fparkour%2Fp%2F8333803.html" target="_blank" title="https://www.cnblogs.com/parkour/p/8333803.html" ref="nofollow noopener noreferrer">Java Unsafe è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpreshing.com%2F20130922%2Facquire-and-release-semantics%2F" target="_blank" title="https://preshing.com/20130922/acquire-and-release-semantics/" ref="nofollow noopener noreferrer">æ— é”ç¼–ç¨‹æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FInter-process_communication" target="_blank" title="https://en.wikipedia.org/wiki/Inter-process_communication" ref="nofollow noopener noreferrer">IPC æœºåˆ¶æ¯”è¾ƒ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äººé—´è§‚å¯Ÿï¼šå…³äºå¥åº·ã€å–„è‰¯ä¸é€‰æ‹©çš„æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7576608733611687962</link>    <guid>https://juejin.cn/post/7576608733611687962</guid>    <pubDate>2025-11-26T04:44:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576608733611687962" data-draft-id="7576537005133398043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äººé—´è§‚å¯Ÿï¼šå…³äºå¥åº·ã€å–„è‰¯ä¸é€‰æ‹©çš„æ€è€ƒ"/> <meta itemprop="keywords" content="ç¬”è®°"/> <meta itemprop="datePublished" content="2025-11-26T04:44:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨è¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/2436173496845549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äººé—´è§‚å¯Ÿï¼šå…³äºå¥åº·ã€å–„è‰¯ä¸é€‰æ‹©çš„æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173496845549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨è¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:44:23.000Z" title="Wed Nov 26 2025 04:44:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å†™äº†è¿™ä¹ˆå¤šæŠ€æœ¯æ–‡ç« ï¼Œä»Šå¤©ä¸èŠæŠ€æœ¯ï¼Œæƒ³åˆ†äº«å‡ ä»¶è¿‘å¹´ç”Ÿæ´»ä¸­çš„å°äº‹ï¼Œä»¥åŠå®ƒä»¬å¸¦ç»™æˆ‘çš„æ€è€ƒã€‚</p>
<h2 data-id="heading-1">æ•…äº‹ä¸€ï¼šå–„æ„</h2>
<p>2019å¹´åˆï¼ŒåŒ—äº¬æŸçœ¼ç§‘åŒ»é™¢ã€‚é‚£å¤©æˆ‘å–å®Œå·ååœ¨å€™è¯ŠåŒºç­‰å¾…ï¼Œçœ‹è§èŠ±å›æ—æœ‰ä¸ªç©ºä½ï¼Œä¾¿æƒ³è¿‡å»ä¼‘æ¯ã€‚æ—è¾¹åç€ä¸€ä½ä¸‰åå¤šå²çš„å¥³å£«ï¼Œæˆ‘åˆšè¦åä¸‹ï¼Œå¥¹çªç„¶å‰å£°è¯´ï¼š"åˆ«åæˆ‘æ—è¾¹ã€‚"æˆ‘ä¸€æ„£ï¼Œå¿ƒæƒ³è¿™äººå¥½å¥‡æ€ªï¼Œå…¬å…±åœºåˆä¸ºä½•ä¸èƒ½åï¼Ÿç´§æ¥ç€å¥¹åˆå¼€å£ï¼š"ç¦»æˆ‘è¿œç‚¹ï¼Œæˆ‘èº«ä¸Šæœ‰æ¯’ã€‚"</p>
<p>çŸ­çŸ­ä¸‰å¥è¯ï¼Œå´è®©æˆ‘çœ‹åˆ°äº†äººæ€§æœ€çº¯ç²¹çš„å–„è‰¯ã€‚æˆ‘å¹¶ä¸äº†è§£é‚£ä½å§å§èº«æ‚£ä½•ç–¾ã€ç»å†è¿‡æ€æ ·çš„æ²»ç–—ï¼Œä½†åœ¨å¥¹å¦‚æ­¤è‰°éš¾çš„æ—¶åˆ»ï¼Œä»ä¸å¿˜ä¿æŠ¤ä»–äººï¼Œè¿™ä»½å–„æ„ä½•å…¶çè´µã€‚è™½ç„¶è¿™ä»¶äº‹å·²è¿‡å»å¤šå¹´ï¼Œä½†æ¯æ¯æƒ³èµ·ï¼Œä¾ç„¶æ„ŸåŠ¨ã€‚</p>
<h2 data-id="heading-2">æ•…äº‹äºŒï¼šé€‰æ‹©</h2>
<p>åŒæ ·å‘ç”Ÿåœ¨åŒ»é™¢ã€‚ä¸€å¯¹ä¸­å¹´å¤«å¦‡ï¼ŒèŒä¸šéƒ½æ˜¯æ•™å¸ˆã€‚ä¸ˆå¤«ç—…æƒ…ä¸¥é‡ï¼Œéœ€è¦åšå¤§æ‰‹æœ¯ï¼Œæœ¯åç¬¬ä¸€æ™šå°¤ä¸ºå…³é”®ï¼Œç‰¹åˆ«æ˜¯å‰å…­ä¸ªå°æ—¶ã€‚ç„¶è€Œä¸ˆå¤«åˆšå›åˆ°ç—…åºŠï¼Œå¦»å­ä¾¿è¯´ï¼š"æˆ‘ä¸å¤ªæ–¹ä¾¿ç…§é¡¾ä½ ã€‚"æˆ‘å½“æ—¶éš¾ä»¥ç†è§£ï¼šå­©å­éƒ½ç”Ÿäº†ï¼Œæœ‰ä»€ä¹ˆä¸æ–¹ä¾¿ï¼Ÿæœ€ç»ˆï¼Œå¥¹å›é…’åº—ä¼‘æ¯ï¼Œè®©éšè¡Œäººå‘˜ç…§çœ‹ï¼Œä¸´èµ°è¿˜è¯´äº†å¥"å…»å…µåƒæ—¥ï¼Œç”¨å…µä¸€æ—¶"ã€‚</p>
<p>æ­¤äº‹è®©æˆ‘æ·±æ€ï¼Œä¹Ÿå½±å“äº†æˆ‘çš„æ‹©å¶è§‚ã€‚æˆ‘æ— æ„è¯„åˆ¤è¿™ä¸ªèŒä¸šç¾¤ä½“ï¼Œåªæ˜¯ä½œä¸ºæ—è§‚è€…çš„çœŸå®è®°å½•ã€‚ç–¾ç—…è€ƒéªŒçš„ä¸ä»…æ˜¯èº«ä½“ï¼Œæ›´æ˜¯äººå¿ƒã€‚</p>
<h2 data-id="heading-3">æ•…äº‹ä¸‰ï¼šå†²åŠ¨</h2>
<p>è¿™æ˜¯ä¸€èµ·å› å†²åŠ¨å¼•å‘çš„æ‚²å‰§ã€‚ä¸€æˆ·äººå®¶æ”’äº†äº›é’±ï¼Œæ‰“ç®—åœ¨è€å®¶å»ºåˆ«å¢…ï¼Œé‡‡ç”¨å…¨åŒ…æ¨¡å¼ã€‚æ–½å·¥æ–¹å› æ¥å•å¤ªå¤šï¼Œå·¥ç¨‹æ‹–åˆ°ä¸€åŠä¾¿è¿Ÿè¿ŸæœªåŠ¨å·¥ã€‚æˆ¿ä¸»å¤šæ¬¡ç†è®ºæ— æœï¼Œæƒ…æ€¥ä¹‹ä¸‹æ‰¬è¨€å†ä¸å¼€å·¥å°±æ‹’ä»˜å°¾æ¬¾ã€‚æœ€åæˆ¿ä¸»æ‰˜äº†ä¸€ä½æœ‰åŠ¿åŠ›çš„äº²æˆšå‡ºé¢åå•†â€”â€”æŒ‰ä¸œåŒ—è¯è¯´ï¼Œç®—æ˜¯ä¸ª"æœ‰å¤´æœ‰è„¸"çš„äººç‰©ã€‚</p>
<p>ä¸‰æ–¹è§é¢åï¼Œè¿™ä½äº²æˆšç«Ÿå½“åœºæ‰“äº†ä¸­ä»‹å‡ ä¸ªè€³å…‰ï¼Œéšåå›å»å¬é›†äººé©¬ã€‚å·§çš„æ˜¯ä¸­ä»‹ä¹Ÿéå–„èŒ¬ï¼Œæ—©æœ‰å‡†å¤‡ã€‚å½“å¯¹æ–¹å†æ¬¡è¿”å›æ—¶ï¼Œåˆšä¸‹è½¦ä¾¿è¢«ä¸€é“é”¹ç ¸ä¸­å¤´éƒ¨ï¼Œæ¥ç€åˆä¸­ä¸¤åˆ€ï¼Œæ•‘æŠ¤è½¦æœªåˆ°äººä¾¿æ²¡äº†ã€‚è­¦å¯Ÿéšåæ§åˆ¶äº†åŒæ–¹ï¼Œä¸­ä»‹è¿™è¾¹ä¸€åå‚ä¸è€…å³å°†å‡ä»»æ ¡é•¿ï¼Œå‰é€”å°½æ¯ã€‚</p>
<h2 data-id="heading-4">æ•…äº‹å››ï¼šå› æœ</h2>
<p>å¤§çº¦äºŒåå¹´å‰çš„äº‹ã€‚å¦»å­åœ¨æ‰“éº»å°†æ—¶ä¸ä¸€åç”·å­å‘ç”Ÿå£è§’ï¼Œå›å®¶åå‘Šè¯‰äº†ä¸ˆå¤«ã€‚ä¸ˆå¤«ä¸ä¾ä¸é¥¶ï¼Œæ­¤åæ¯æ¬¡è§åˆ°é‚£ç”·å­éƒ½è¦æ®´æ‰“ï¼ŒæŒç»­äº†å¾ˆä¹…ã€‚ç»ˆæœ‰ä¸€æ—¥ï¼Œè¢«æ‰“ç”·å­å¿æ— å¯å¿ï¼Œæå‰è—äº†åˆ€åœ¨èº«ï¼Œå†æ¬¡é­æ®´æ‰“æ—¶å½“è¡—å°†å…¶æ…æ­»ï¼Œéšåé€ƒäº¡ã€‚</p>
<p>é€ƒäº¡æœŸé—´ï¼Œä»–è”ç³»äº†ä¾„å­ï¼Œå€Ÿäº†æ•°åƒå…ƒé’±ã€‚ä¾„å­ä¸ºäº†ä¸è¿˜é’±ï¼Œç«Ÿå‘è­¦æ–¹ä¸¾æŠ¥äº†å”å”ã€‚æœ€ç»ˆç½ªçŠ¯ä¼æ³•ï¼Œè€Œä¾„å­çš„åšæ³•ä¹Ÿä»¤äººå”å˜˜ã€‚</p>
<h2 data-id="heading-5">ç»“è¯­</h2>
<p>å…„å¼Ÿå§å¦¹ä»¬ï¼Œè¯·çˆ±æƒœè‡ªå·±çš„èº«ä½“â€”â€”å¥åº·çœŸçš„ä¸æ˜¯ä¸€å¥ç©ºè¯ï¼Œå¤±å»å®ƒï¼Œä½ è¿å‚ä¸äººç”Ÿç«äº‰çš„èµ„æ ¼éƒ½æ²¡æœ‰ã€‚</p>
<p>ä¸è¦ä»‹å…¥ä»–äººçš„å› æœï¼Œäººæ€§å¤æ‚éš¾æµ‹ã€‚é€‰æ‹©å¦ä¸€åŠï¼Œå°±æ˜¯é€‰æ‹©ä¸€ç§äººç”Ÿã€‚æœ‹å‹ä»¬ï¼Œè‹¥è§‰å‰è·¯åå·ï¼Œä¸å¦¨å»åŒ»é™¢èµ°èµ°çœ‹çœ‹ï¼Œé‚£é‡Œæœ‰æœ€çœŸå®çš„äººé—´ç™¾æ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¯å¢ƒåˆå§‹åŒ–æµç¨‹]]></title>    <link>https://juejin.cn/post/7576575703167238150</link>    <guid>https://juejin.cn/post/7576575703167238150</guid>    <pubDate>2025-11-26T04:44:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576575703167238150" data-draft-id="7576689869808762916" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¯å¢ƒåˆå§‹åŒ–æµç¨‹"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-26T04:44:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¯å¢ƒåˆå§‹åŒ–æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:44:34.000Z" title="Wed Nov 26 2025 04:44:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬3ç« ï¼šç¯å¢ƒåˆå§‹åŒ–æµç¨‹</h2>
<h3 data-id="heading-1">ç« èŠ‚å¯¼è¯»</h3>
<p>"å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨"ã€‚åœ¨ Java è¿›ç¨‹å¯ä»¥è°ƒç”¨ Python æ¨ç†ä¹‹å‰ï¼Œå¿…é¡»å…ˆå‡†å¤‡å¥½ Python çš„è¿è¡Œç¯å¢ƒã€‚æœ¬ç« å°†æ·±å…¥è®²è§£ <strong>geaflow-infer å¦‚ä½•åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ</strong>ã€<strong>å¦‚ä½•é€šè¿‡æ–‡ä»¶é”ç¡®ä¿å¹¶å‘å®‰å…¨</strong>ã€ä»¥åŠ<strong>å¦‚ä½•ç®¡ç†ç¯å¢ƒçš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</p>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å°†ç†è§£ï¼š</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆ</strong> éœ€è¦è™šæ‹Ÿç¯å¢ƒï¼ˆä¾èµ–éš”ç¦»ã€ç‰ˆæœ¬æ§åˆ¶ï¼‰</li>
<li><strong>å¦‚ä½•</strong> å®ç°å•ä¾‹æ¨¡å¼å’Œæ–‡ä»¶é”æœºåˆ¶</li>
<li><strong>å¦‚ä½•</strong> å¤„ç†åˆå§‹åŒ–å¤±è´¥å’ŒçŠ¶æ€æ¢å¤</li>
</ul>
<hr/>
<h3 data-id="heading-2">3.1 InferEnvironmentManager å•ä¾‹æ¨¡å¼è®¾è®¡</h3>
<h4 data-id="heading-3">è®¾è®¡ç›®æ ‡</h4>
<p>InferEnvironmentManager é‡‡ç”¨<strong>å•ä¾‹æ¨¡å¼</strong>çš„åŸå› ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">é—®é¢˜åœºæ™¯:
  åº”ç”¨å¯åŠ¨ 10 ä¸ªçº¿ç¨‹ï¼Œéƒ½è¦åˆå§‹åŒ–æ¨ç†ç¯å¢ƒ
  
æ²¡æœ‰å•ä¾‹çš„åæœ:
  â”œâ”€ çº¿ç¨‹1: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ /env1 (è€—æ—¶ 5 ç§’)
  â”œâ”€ çº¿ç¨‹2: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ /env2 (é‡å¤åˆ›å»º! æµªè´¹æ—¶é—´)
  â”œâ”€ çº¿ç¨‹3: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ /env3 (é‡å¤åˆ›å»º! æµªè´¹æ—¶é—´)
  â””â”€ ...
  æ€»è€—æ—¶: 50 ç§’ï¼Œæµªè´¹äº† 45 ç§’

ä½¿ç”¨å•ä¾‹çš„æ•ˆæœ:
  â”œâ”€ çº¿ç¨‹1: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ /env (è€—æ—¶ 5 ç§’)
  â”œâ”€ çº¿ç¨‹2: ç­‰å¾…çº¿ç¨‹1å®Œæˆï¼Œå¤ç”¨ /env (0 ç§’)
  â”œâ”€ çº¿ç¨‹3: ç­‰å¾…çº¿ç¨‹1å®Œæˆï¼Œå¤ç”¨ /env (0 ç§’)
  â””â”€ ...
  æ€»è€—æ—¶: 5 ç§’ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ä¸€ä¸ªç¯å¢ƒ
</code></pre>
<h4 data-id="heading-4">å®ç°ç»†èŠ‚</h4>
<h5 data-id="heading-5">åŒé‡æ£€æŸ¥é”å®šï¼ˆDouble-Checked Lockingï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferEnvironmentManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">InferEnvironmentManager</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">LOCK</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-comment">// é™æ€æ ‡å¿—ï¼šåˆå§‹åŒ–æ˜¯å¦å®Œæˆ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicBoolean</span> <span class="hljs-variable">INITIALIZED</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicBoolean</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicBoolean</span> <span class="hljs-variable">SUCCESS_FLAG</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicBoolean</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> AtomicReference&lt;Throwable&gt; ERROR_CASE = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicReference</span>&lt;&gt;();
    
    <span class="hljs-comment">// åˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„è™šæ‹Ÿç¯å¢ƒä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">InferEnvironmentContext</span> <span class="hljs-variable">environmentContext</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">/**
     * æ„å»ºå¹¶è¿”å›å•ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> InferEnvironmentManager 
        <span class="hljs-title function_">buildInferEnvironmentManager</span><span class="hljs-params">(Configuration config)</span> {
        <span class="hljs-keyword">if</span> (INSTANCE == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å…³é”®: åªæœ‰é¦–æ¬¡è°ƒç”¨æ—¶æ‰åˆ›å»ºå®ä¾‹</span>
            <span class="hljs-comment">// synchronized å…³é”®å­—ä¿è¯çº¿ç¨‹å®‰å…¨</span>
            INSTANCE = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferEnvironmentManager</span>(config);
        }
        <span class="hljs-keyword">return</span> INSTANCE;
    }
    
    <span class="hljs-comment">/**
     * ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥ new
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">InferEnvironmentManager</span><span class="hljs-params">(Configuration config)</span> {
        <span class="hljs-built_in">this</span>.configuration = config;
        <span class="hljs-built_in">this</span>.executorService = Executors.newSingleThreadExecutor();
        <span class="hljs-comment">// è§¦å‘å¼‚æ­¥åˆå§‹åŒ–</span>
        createEnvironment();
    }
    
    <span class="hljs-comment">/**
     * åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createEnvironment</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä½¿ç”¨ compareAndSet ç¡®ä¿åªåˆå§‹åŒ–ä¸€æ¬¡</span>
        <span class="hljs-keyword">if</span> (INITIALIZED.compareAndSet(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)) {
            <span class="hljs-comment">// åå°çº¿ç¨‹æ‰§è¡Œåˆå§‹åŒ–</span>
            executorService.execute(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    environmentContext = constructInferEnvironment(configuration);
                    <span class="hljs-keyword">if</span> (environmentContext.enableFinished()) {
                        SUCCESS_FLAG.set(<span class="hljs-literal">true</span>);
                        LOGGER.info(<span class="hljs-string">"âœ“ è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–æˆåŠŸ"</span>);
                    }
                } <span class="hljs-keyword">catch</span> (Throwable e) {
                    SUCCESS_FLAG.set(<span class="hljs-literal">false</span>);
                    ERROR_CASE.set(e);
                    LOGGER.error(<span class="hljs-string">"âœ— è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–å¤±è´¥"</span>, e);
                }
            });
        }
    }
}
</code></pre>
<h4 data-id="heading-6">å…³é”®ç‰¹æ€§åˆ†æ</h4>
<h5 data-id="heading-7">1. åŸå­æ€§ï¼ˆAtomicityï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//  é”™è¯¯åšæ³•ï¼š</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">INITIALIZED</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
<span class="hljs-keyword">if</span> (!INITIALIZED) {  <span class="hljs-comment">// Check</span>
    INITIALIZED = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// Set</span>
    initialize();  <span class="hljs-comment">// ä¸¤ä¸ªæ“ä½œä¹‹é—´å¯èƒ½è¢«ä¸­æ–­</span>
}

<span class="hljs-comment">// âœ“ æ­£ç¡®åšæ³•ï¼š</span>
<span class="hljs-keyword">if</span> (INITIALIZED.compareAndSet(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)) {  <span class="hljs-comment">// åŸå­æ“ä½œ</span>
    initialize();
}

ä¼˜åŠ¿:
  compareAndSet æ˜¯å•æ¡ CPU æŒ‡ä»¤ï¼Œä¸å¯ä¸­æ–­
  ä¿è¯å³ä½¿ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼Œä¹Ÿåªæœ‰ä¸€ä¸ªä¼šæˆåŠŸ
</code></pre>
<h5 data-id="heading-8">2. å¯è§æ€§ï¼ˆVisibilityï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AtomicBoolean çš„å†™æ“ä½œåŒ…å«å†…å­˜å±éšœ</span>
SUCCESS_FLAG.set(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// å†™æ“ä½œï¼Œå¸¦å±éšœ</span>
<span class="hljs-comment">// â†“ (å†…å­˜å±éšœ)</span>
<span class="hljs-comment">// æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½ç«‹å³çœ‹åˆ° true</span>

<span class="hljs-comment">// âœ“ ä»»ä½•çº¿ç¨‹çš„è¯»æ“ä½œéƒ½èƒ½çœ‹åˆ°æœ€æ–°å€¼</span>
<span class="hljs-keyword">if</span> (SUCCESS_FLAG.get()) {  <span class="hljs-comment">// è¯»æ“ä½œï¼Œå¸¦å±éšœ</span>
    ...
}
</code></pre>
<hr/>
<h3 data-id="heading-9">3.2 è™šæ‹Ÿç¯å¢ƒåˆ›å»ºæµç¨‹</h3>
<h4 data-id="heading-10">æ€»æµç¨‹æ¦‚è§ˆ</h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·ä»£ç è°ƒç”¨
    â†“
InferContext<span class="hljs-selector-class">.build</span>(config)
    â†“
InferEnvironmentManager<span class="hljs-selector-class">.buildInferEnvironmentManager</span>(config)
    â”œâ”€â†’ <span class="hljs-selector-attr">[åŒæ­¥è¿”å›å•ä¾‹]</span> (ä¸é˜»å¡ç”¨æˆ·)
    â”‚
    â””â”€â†’ <span class="hljs-selector-attr">[åå°çº¿ç¨‹]</span> (å¼‚æ­¥åˆå§‹åŒ–)
        â†“
        <span class="hljs-built_in">constructInferEnvironment</span>(config)
        â”œâ”€â†’ Step1: åˆå§‹åŒ– InferEnvironmentContext
        â”‚   - è·å–è™šæ‹Ÿç¯å¢ƒç›®å½•
        â”‚   - è·å– Python æ–‡ä»¶ç›®å½•
        â”‚   - ç”Ÿæˆè§’è‰²æ ‡è¯† (hostname:pid)
        â”‚   - åˆå§‹åŒ–å„ç§è·¯å¾„
        â”‚   â†“
        â”œâ”€â†’ Step2: åˆ›å»º InferDependencyManager
        â”‚   - ä» JAR æå–ä¾èµ–æ–‡ä»¶
        â”‚   - ç”Ÿæˆ requirements.txt
        â”‚   - å‡†å¤‡åˆå§‹åŒ–è„šæœ¬è·¯å¾„
        â”‚   â†“
        â”œâ”€â†’ Step3: ä½¿ç”¨æ–‡ä»¶é”ï¼Œé¿å…é‡å¤åˆå§‹åŒ–
        â”‚   - åˆ›å»ºé”æ–‡ä»¶
        â”‚   - è·å–æ–‡ä»¶é”ï¼ˆé˜»å¡ç›´åˆ°è·å¾—ï¼‰
        â”‚   - æ£€æŸ¥ _finish æˆ– _failed æ ‡è®°æ–‡ä»¶
        â”‚   â†“
        â”œâ”€â†’ Step4: æ‰§è¡Œ Shell è„šæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
        â”‚   - è°ƒç”¨ install-infer-env.sh
        â”‚   - åˆ›å»º Conda è™šæ‹Ÿç¯å¢ƒ
        â”‚   - å®‰è£… Python ä¾èµ–åŒ…
        â”‚   â†“
        â”œâ”€â†’ Step5: æ ‡è®°åˆå§‹åŒ–å®Œæˆ
        â”‚   - åˆ›å»º _finish æˆ– _failed æ ‡è®°æ–‡ä»¶
        â”‚   - é‡Šæ”¾æ–‡ä»¶é”
        â”‚   â†“
        â””â”€â†’ è®¾ç½® SUCCESS_FLAG æˆ– ERROR_CASE
</code></pre>
<h4 data-id="heading-11">åˆ†æ­¥è¯¦è§£</h4>
<h5 data-id="heading-12">Step1: InferEnvironmentContext åˆå§‹åŒ–</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> InferEnvironmentContext <span class="hljs-title function_">constructInferEnvironment</span><span class="hljs-params">(
    Configuration configuration)</span> <span class="hljs-keyword">throws</span> Exception {
    
    <span class="hljs-comment">// è·å–é…ç½®</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">inferEnvDirectory</span> <span class="hljs-operator">=</span> configuration
        .getString(GeaFlowConfigKey.GEAFLOW_INFER_ENV_DIR);
    <span class="hljs-type">String</span> <span class="hljs-variable">inferFilesDirectory</span> <span class="hljs-operator">=</span> configuration
        .getString(GeaFlowConfigKey.GEAFLOW_INFER_FILES_DIR);
    
    <span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡</span>
    <span class="hljs-type">InferEnvironmentContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferEnvironmentContext</span>(
            inferEnvDirectory,
            inferFilesDirectory,
            configuration
        );
    
    <span class="hljs-comment">// InferEnvironmentContext ä¸­çš„å…³é”®åˆå§‹åŒ–</span>
    <span class="hljs-comment">// - virtualEnvDirectory: è™šæ‹Ÿç¯å¢ƒç›®å½•</span>
    <span class="hljs-comment">// - inferFilesDirectory: Python è„šæœ¬ç›®å½•</span>
    <span class="hljs-comment">// - pythonExec: Python å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-comment">// - inferScript: infer_server.py è·¯å¾„</span>
    <span class="hljs-comment">// - roleNameIndex: "hostname:pid" å½¢å¼çš„å”¯ä¸€æ ‡è¯†</span>
    
    <span class="hljs-keyword">return</span> context;
}
</code></pre>
<p><strong>å…³é”®æ•°æ®</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">é…ç½®ç¤ºä¾‹:
  <span class="hljs-attr">GEAFLOW_INFER_ENV_DIR</span> = <span class="hljs-string">"/tmp/geaflow_infer_env"</span>
  <span class="hljs-attr">GEAFLOW_INFER_FILES_DIR</span> = <span class="hljs-string">"/tmp/geaflow_infer_files"</span>

åˆå§‹åŒ–å:
  <span class="hljs-attr">virtualEnvDirectory</span> = <span class="hljs-string">"/tmp/geaflow_infer_env"</span>
  <span class="hljs-attr">pythonExec</span> = <span class="hljs-string">"/tmp/geaflow_infer_env/conda/bin/python3"</span>
  <span class="hljs-attr">inferScript</span> = <span class="hljs-string">"/tmp/geaflow_infer_files/infer_server.py"</span>
  <span class="hljs-attr">roleNameIndex</span> = <span class="hljs-string">"hostname:12345"</span> (ä¸»æœºå:è¿›ç¨‹ID)
</code></pre>
<h5 data-id="heading-13">Step2: InferDependencyManager åˆå§‹åŒ–</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ Step1 ä¹‹å</span>
<span class="hljs-type">InferDependencyManager</span> <span class="hljs-variable">dependencyManager</span> <span class="hljs-operator">=</span> 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferDependencyManager</span>(environmentContext);

<span class="hljs-comment">// å†…éƒ¨åšäº†ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferDependencyManager</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InferDependencyManager</span><span class="hljs-params">(InferEnvironmentContext context)</span> {
        <span class="hljs-built_in">this</span>.environmentContext = context;
        
        <span class="hljs-comment">// 1. ä» JAR ä¸­æå–è¿è¡Œæ—¶æ–‡ä»¶</span>
        List&lt;String&gt; runtimeFiles = buildInferRuntimeFiles();
        <span class="hljs-comment">// è¿”å›: ["infer/infer_server.py", "infer/requirements.txt", ...]</span>
        
        <span class="hljs-comment">// 2. å°†æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•</span>
        <span class="hljs-keyword">for</span> (String file : runtimeFiles) {
            copyFileFromJar(file, 
                environmentContext.getInferFilesDirectory());
        }
        
        <span class="hljs-comment">// 3. å‡†å¤‡åˆå§‹åŒ–è„šæœ¬è·¯å¾„</span>
        <span class="hljs-built_in">this</span>.buildInferEnvShellPath = 
            environmentContext.getInferFilesDirectory() 
            + <span class="hljs-string">"/install-infer-env.sh"</span>;
        
        <span class="hljs-comment">// 4. å‡†å¤‡ requirements.txt è·¯å¾„</span>
        <span class="hljs-built_in">this</span>.inferEnvRequirementsPath = 
            environmentContext.getInferFilesDirectory() 
            + <span class="hljs-string">"/requirements.txt"</span>;
    }
}
</code></pre>
<p><strong>ä» JAR æå–æ–‡ä»¶çš„åŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">JAR ç»“æ„:
  geaflow-infer.jar
  â”œâ”€ META-INF/
  â”œâ”€ org/apache/geaflow/...  (ç¼–è¯‘çš„ class æ–‡ä»¶)
  â””â”€ infer/  (èµ„æºæ–‡ä»¶)
<span class="hljs-code">     â”œâ”€ infer_server.py       (Python æœåŠ¡è„šæœ¬)
     â”œâ”€ requirements.txt       (Python ä¾èµ–)
     â”œâ”€ install-infer-env.sh   (åˆå§‹åŒ–è„šæœ¬)
     â”œâ”€ env/
     â”‚  â””â”€ install-infer-env.sh
     â””â”€ inferRuntime/
        â”œâ”€ some_lib.so
        â””â”€ config.json
</span>
æå–æµç¨‹:
<span class="hljs-bullet">  1.</span> ä½¿ç”¨ ClassLoader.getResource("infer/inferRuntime")
<span class="hljs-bullet">  2.</span> åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶
<span class="hljs-bullet">  3.</span> ä½¿ç”¨ InputStream é€ä¸ªè¯»å–
<span class="hljs-bullet">  4.</span> å†™å…¥åˆ°ç›®æ ‡ç›®å½•
</code></pre>
<h5 data-id="heading-14">Step3: æ–‡ä»¶é”æœºåˆ¶ï¼ˆè¯¦ç»†è§åç»­å°èŠ‚ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å…³é”®ä»£ç </span>
<span class="hljs-type">File</span> <span class="hljs-variable">lockFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/"</span> + LOCK_FILE);
<span class="hljs-type">FileLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> InferFileUtils.addLock(lockFile);  <span class="hljs-comment">// è·å–é”</span>

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–</span>
    <span class="hljs-type">File</span> <span class="hljs-variable">finishFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/._finish"</span>);
    <span class="hljs-type">File</span> <span class="hljs-variable">failedFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/._failed"</span>);
    
    <span class="hljs-keyword">if</span> (failedFile.exists()) {
        <span class="hljs-comment">// ä¹‹å‰åˆå§‹åŒ–å¤±è´¥ï¼Œè¿™æ¬¡ä¹Ÿä¼šå¤±è´¥</span>
        environmentContext.setFinished(<span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span> environmentContext;
    }
    
    <span class="hljs-keyword">if</span> (finishFile.exists()) {
        <span class="hljs-comment">// å·²åˆå§‹åŒ–æˆåŠŸï¼Œç›´æ¥è¿”å›</span>
        environmentContext.setFinished(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span> environmentContext;
    }
    
    <span class="hljs-comment">// Step4: æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬</span>
    executeInstallScript(...);
    
    <span class="hljs-comment">// Step5: åˆ›å»º _finish æ ‡è®°</span>
    finishFile.createNewFile();
    
} <span class="hljs-keyword">finally</span> {
    lock.release();  <span class="hljs-comment">// é‡Šæ”¾é”</span>
}
</code></pre>
<h5 data-id="heading-15">Step4 &amp; Step5: æ‰§è¡Œ Shell è„šæœ¬</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># install-infer-env.sh</span>

ENV_DIR=<span class="hljs-variable">$1</span>
REQUIREMENTS_FILE=<span class="hljs-variable">$2</span>

<span class="hljs-comment"># Step 1: åˆ›å»º Conda è™šæ‹Ÿç¯å¢ƒ</span>
conda create -p <span class="hljs-variable">${ENV_DIR}</span>/conda python=3.8 -y

<span class="hljs-comment"># Step 2: æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-built_in">source</span> <span class="hljs-variable">${ENV_DIR}</span>/conda/bin/activate

<span class="hljs-comment"># Step 3: å®‰è£… Python ä¾èµ–</span>
pip install -r <span class="hljs-variable">${REQUIREMENTS_FILE}</span>

<span class="hljs-comment"># Step 4: éªŒè¯å®‰è£…</span>
python -c <span class="hljs-string">"import sys; print('OK')"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–æˆåŠŸ"</span>
</code></pre>
<p><strong>requirements.txt ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åŸºç¡€ä¾èµ–</span>
<span class="hljs-attr">numpy</span>==<span class="hljs-number">1.21</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">scipy</span>==<span class="hljs-number">1.7</span>.<span class="hljs-number">0</span>

<span class="hljs-comment"># ML åº“</span>
<span class="hljs-attr">tensorflow</span>==<span class="hljs-number">2.6</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">torch</span>==<span class="hljs-number">1.9</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">scikit-learn</span>==<span class="hljs-number">0.24</span>.<span class="hljs-number">2</span>

<span class="hljs-comment"># å·¥å…·</span>
<span class="hljs-attr">pydantic</span>==<span class="hljs-number">1.8</span>.<span class="hljs-number">2</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">3.3 æ–‡ä»¶é”æœºåˆ¶å®ç°</h3>
<h4 data-id="heading-17">è®¾è®¡é—®é¢˜</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åœºæ™¯: å¤šä¸ª GeaFlow åº”ç”¨å®ä¾‹è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ï¼Œ</span>
     å…±äº«åŒä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒç›®å½•

<span class="hljs-section">é—®é¢˜:</span>
  å®ä¾‹A                    å®ä¾‹B
    â”‚                        â”‚
    â””â”€â†’ è¿›ç¨‹å¯åŠ¨             â””â”€â†’ è¿›ç¨‹å¯åŠ¨
        â”œâ”€â†’ æ£€æŸ¥ _finish  âœ—    â”œâ”€â†’ æ£€æŸ¥ _finish  âœ—
        â”œâ”€â†’ å¼€å§‹åˆå§‹åŒ–         â”œâ”€â†’ å¼€å§‹åˆå§‹åŒ–
        â”‚   conda create...    â”‚   conda create...
        â”‚   å®‰è£…ä¾èµ–(è€—æ—¶5s)    â”‚   (é‡å¤å®‰è£…! å¯èƒ½å†²çª)
        â”‚   ...                â”‚   ...
        â”œâ”€â†’ åˆ›å»º _finish âœ“     â””â”€â†’ åˆ›å»º _finish âœ“
        â”‚                       
        â””â”€â†’ åˆå§‹åŒ–å®Œæˆ          â””â”€â†’ åˆå§‹åŒ–å®Œæˆ

<span class="hljs-section">é—®é¢˜: ä¸¤ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè™šæ‹Ÿç¯å¢ƒè¿˜æœªåˆå§‹åŒ–ï¼Œ</span>
     éƒ½å¼€å§‹åˆå§‹åŒ–ï¼Œå¯¼è‡´é‡å¤å’Œå†²çªï¼
</code></pre>
<h4 data-id="heading-18">æ–‡ä»¶é”è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-19">Java ä¸­çš„ FileLock</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> FileLock <span class="hljs-title function_">addLock</span><span class="hljs-params">(File lockFile)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// Step 1: åˆ›å»ºé”æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> (!lockFile.exists()) {
        lockFile.createNewFile();
    }
    
    <span class="hljs-comment">// Step 2: æ‰“å¼€æ–‡ä»¶é€šé“</span>
    <span class="hljs-type">RandomAccessFile</span> <span class="hljs-variable">raf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomAccessFile</span>(lockFile, <span class="hljs-string">"rw"</span>);
    <span class="hljs-type">FileChannel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> raf.getChannel();
    
    <span class="hljs-comment">// Step 3: è¯·æ±‚æ–‡ä»¶é”</span>
    <span class="hljs-comment">// å¦‚æœé”å·²è¢«å…¶ä»–è¿›ç¨‹æŒæœ‰ï¼Œè¿™é‡Œä¼šé˜»å¡</span>
    <span class="hljs-type">FileLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> channel.lock();  <span class="hljs-comment">// é˜»å¡ç›´åˆ°è·å¾—é”</span>
    
    <span class="hljs-comment">// è¿”å›åï¼Œè¯´æ˜å·²è·å¾—ç‹¬å é”</span>
    <span class="hljs-keyword">return</span> lock;
}
</code></pre>
<h5 data-id="heading-20">æµç¨‹å›¾</h5>
<pre><code class="hljs language-scss" lang="scss">å®ä¾‹<span class="hljs-selector-tag">A</span>                        æ–‡ä»¶ç³»ç»Ÿ             å®ä¾‹<span class="hljs-selector-tag">B</span>
  â”‚                             â”‚                  â”‚
  â”œâ”€â†’ æ‰“å¼€ lock æ–‡ä»¶             â”‚                  â”‚
  â”œâ”€â†’ è¯·æ±‚é” lock<span class="hljs-selector-class">.lock</span>()        â”‚                  â”‚
  â”‚   <span class="hljs-selector-attr">[è·å¾—é” âœ“]</span> â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
  â”‚                             â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                             â”‚                  â”œâ”€â†’ æ‰“å¼€ lock æ–‡ä»¶
  â”‚                             â”‚                  â”œâ”€â†’ è¯·æ±‚é” lock<span class="hljs-selector-class">.lock</span>()
  â”‚   <span class="hljs-selector-attr">[æŒæœ‰é”ä¸­...]</span>              â”‚                  â”‚   <span class="hljs-selector-attr">[é˜»å¡ï¼Œç­‰å¾…é”]</span> 
  â”‚   â”œâ”€â†’ æ£€æŸ¥ _finish  âœ—        â”‚                  â”‚
  â”‚   â”œâ”€â†’ åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ         â”‚                  â”‚   <span class="hljs-selector-attr">[ç­‰å¾…...]</span>
  â”‚   â”‚   conda create...        â”‚                  â”‚   <span class="hljs-selector-attr">[ç­‰å¾…...]</span>
  â”‚   â”‚   pip install...         â”‚                  â”‚
  â”‚   â”‚   <span class="hljs-selector-attr">[è€—æ—¶ 5 ç§’]</span>             â”‚                  â”‚
  â”‚   â”œâ”€â†’ åˆ›å»º _finish âœ“         â”‚                  â”‚
  â”‚   â””â”€â†’ é‡Šæ”¾é”                 â”‚                  â”‚
  â”‚       lock<span class="hljs-selector-class">.release</span>()         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                             â”‚                  â”œâ”€â†’ <span class="hljs-selector-attr">[è·å¾—é” âœ“]</span>
  â”‚                             â”‚                  â”œâ”€â†’ æ£€æŸ¥ _finish âœ“
  â”‚                             â”‚                  â”œâ”€â†’ <span class="hljs-selector-attr">[å·²åˆå§‹åŒ–ï¼Œè·³è¿‡]</span>
  â”‚                             â”‚                  â””â”€â†’ é‡Šæ”¾é”
</code></pre>
<h4 data-id="heading-21">å®Œæ•´çš„åˆå§‹åŒ–æµç¨‹ï¼ˆå¸¦æ–‡ä»¶é”ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> InferEnvironmentContext <span class="hljs-title function_">constructInferEnvironment</span><span class="hljs-params">(
    Configuration configuration)</span> <span class="hljs-keyword">throws</span> Exception {
    
    <span class="hljs-comment">// Step 1: åˆ›å»ºç¯å¢ƒä¸Šä¸‹æ–‡</span>
    <span class="hljs-type">InferEnvironmentContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferEnvironmentContext</span>(inferEnvDirectory, ...);
    
    <span class="hljs-comment">// Step 2: åˆ›å»ºä¾èµ–ç®¡ç†å™¨</span>
    <span class="hljs-type">InferDependencyManager</span> <span class="hljs-variable">depManager</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">InferDependencyManager</span>(context);
    
    <span class="hljs-comment">// Step 3: è·å–æ–‡ä»¶é”ï¼ˆå…³é”®ï¼ï¼‰</span>
    <span class="hljs-type">File</span> <span class="hljs-variable">lockFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/.lock"</span>);
    <span class="hljs-type">FileLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> InferFileUtils.addLock(lockFile);
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// Step 4: æ£€æŸ¥åˆå§‹åŒ–çŠ¶æ€</span>
        <span class="hljs-type">File</span> <span class="hljs-variable">finishFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/._finish"</span>);
        <span class="hljs-type">File</span> <span class="hljs-variable">failedFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(inferEnvDirectory + <span class="hljs-string">"/._failed"</span>);
        
        <span class="hljs-keyword">if</span> (failedFile.exists()) {
            LOGGER.warn(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒä¹‹å‰åˆå§‹åŒ–å¤±è´¥ï¼Œæœ¬æ¬¡ä¹Ÿå¯èƒ½å¤±è´¥"</span>);
            context.setFinished(<span class="hljs-literal">false</span>);
            <span class="hljs-keyword">return</span> context;
        }
        
        <span class="hljs-keyword">if</span> (finishFile.exists()) {
            LOGGER.info(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒå·²åˆå§‹åŒ–ï¼Œç›´æ¥ä½¿ç”¨"</span>);
            context.setFinished(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">return</span> context;
        }
        
        <span class="hljs-comment">// Step 5: æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬</span>
        LOGGER.info(<span class="hljs-string">"å¼€å§‹åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ..."</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">shellPath</span> <span class="hljs-operator">=</span> depManager.getInferEnvShellPath();
        <span class="hljs-type">String</span> <span class="hljs-variable">requirementsPath</span> <span class="hljs-operator">=</span> depManager.getInferEnvRequirementsPath();
        
        <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">pb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>(
            <span class="hljs-string">"bash"</span>, shellPath, inferEnvDirectory, requirementsPath
        );
        pb.redirectErrorStream(<span class="hljs-literal">true</span>);
        <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> pb.start();
        
        <span class="hljs-type">int</span> <span class="hljs-variable">exitCode</span> <span class="hljs-operator">=</span> process.waitFor();
        <span class="hljs-keyword">if</span> (exitCode != <span class="hljs-number">0</span>) {
            failedFile.createNewFile();  <span class="hljs-comment">// æ ‡è®°å¤±è´¥</span>
            context.setFinished(<span class="hljs-literal">false</span>);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–å¤±è´¥"</span>);
        }
        
        <span class="hljs-comment">// Step 6: æ ‡è®°æˆåŠŸ</span>
        finishFile.createNewFile();
        context.setFinished(<span class="hljs-literal">true</span>);
        LOGGER.info(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–æˆåŠŸ"</span>);
        
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// ä¸€å®šè¦é‡Šæ”¾é”ï¼</span>
        lock.release();
    }
    
    <span class="hljs-keyword">return</span> context;
}
</code></pre>
<h4 data-id="heading-22">æ–‡ä»¶é”çš„ç»†èŠ‚</h4>
<h5 data-id="heading-23">é”çš„ä½œç”¨èŒƒå›´</h5>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŒä¸€ JVM å†…çš„ä¸åŒçº¿ç¨‹:</span>
  çº¿ç¨‹A: fileLock1 = channel.<span class="hljs-keyword">lock</span>()
  çº¿ç¨‹B: fileLock2 = channel.<span class="hljs-keyword">lock</span>()  <span class="hljs-comment">// ä¼šé˜»å¡ï¼</span>

<span class="hljs-comment">// ä¸åŒ JVM è¿›ç¨‹:</span>
  Javaè¿›ç¨‹A: fileLock1 = channel.<span class="hljs-keyword">lock</span>()
  Javaè¿›ç¨‹B: fileLock2 = channel.<span class="hljs-keyword">lock</span>()  <span class="hljs-comment">// ä¼šé˜»å¡ï¼</span>
  
  Cè¿›ç¨‹: flock() æˆ– fcntl()  <span class="hljs-comment">// ä¹Ÿä¼šè¢«é˜»å¡</span>

ç»“è®º: FileLock æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œä¸ä»…ä»…æ˜¯çº¿ç¨‹çº§åˆ«
</code></pre>
<h5 data-id="heading-24">é”çš„è‡ªåŠ¨é‡Šæ”¾</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾æƒ…å†µ:</span>
<span class="hljs-number">1.</span> æ˜¾å¼è°ƒç”¨ lock.release()
<span class="hljs-number">2.</span> æŒæœ‰ Lock çš„ FileChannel å…³é—­
<span class="hljs-number">3.</span> æŒæœ‰ Lock çš„ JVM è¿›ç¨‹ç»ˆæ­¢

<span class="hljs-comment">// âŒ å±é™©åšæ³•:</span>
<span class="hljs-type">RandomAccessFile</span> <span class="hljs-variable">raf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomAccessFile</span>(file, <span class="hljs-string">"rw"</span>);
<span class="hljs-type">FileChannel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> raf.getChannel();
<span class="hljs-type">FileLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> channel.lock();
<span class="hljs-comment">// ... å¿˜è®°é‡Šæ”¾ ...</span>
<span class="hljs-comment">// é”ä¼šåœ¨è¿›ç¨‹ç»ˆæ­¢æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œä½†æœŸé—´ä¼šé˜»å¡å…¶ä»–è¿›ç¨‹</span>

<span class="hljs-comment">// âœ“ æ­£ç¡®åšæ³•:</span>
<span class="hljs-keyword">try</span> {
    lock = channel.lock();
    <span class="hljs-comment">// ... å…³é”®æ“ä½œ ...</span>
} <span class="hljs-keyword">finally</span> {
    <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span>) lock.release();
    <span class="hljs-keyword">if</span> (channel != <span class="hljs-literal">null</span>) channel.close();
    <span class="hljs-keyword">if</span> (raf != <span class="hljs-literal">null</span>) raf.close();
}
</code></pre>
<hr/>
<h3 data-id="heading-25">3.4 ç¯å¢ƒçŠ¶æ€ç®¡ç†ä¸é”™è¯¯å¤„ç†</h3>
<h4 data-id="heading-26">çŠ¶æ€æœºè®¾è®¡</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INITIAL   â”‚  åº”ç”¨åˆšå¯åŠ¨
â”‚  (åˆå§‹çŠ¶æ€)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ <span class="hljs-built_in">buildInferEnvironmentManager</span>()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INITIALIZINGâ”‚  è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–ä¸­
â”‚  (åˆå§‹åŒ–ä¸­)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
   â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚SUCCESS â”‚FAILEDâ”‚  åˆå§‹åŒ–ç»“æœ
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
 â”‚        â”‚
 â”‚        â”‚ åç»­ <span class="hljs-built_in">infer</span>() è°ƒç”¨
 â”‚        â–¼
 â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚     â”‚ æŠ›å‡ºå¼‚å¸¸        â”‚
 â”‚     â”‚(åˆå§‹åŒ–å¤±è´¥)      â”‚
 â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â”‚
 â”‚ åç»­ <span class="hljs-built_in">infer</span>() è°ƒç”¨
 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RUNNING        â”‚
â”‚ (æ¨ç†ä¸­)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-27">å…³é”®çŠ¶æ€æ£€æŸ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferEnvironmentManager</span> {
    
    <span class="hljs-comment">// 1. æ£€æŸ¥åˆå§‹åŒ–æ˜¯å¦å®Œæˆ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Boolean <span class="hljs-title function_">checkInferEnvironmentStatus</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> SUCCESS_FLAG.get();
    }
    
    <span class="hljs-comment">// 2. è·å–ç¯å¢ƒä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> InferEnvironmentContext <span class="hljs-title function_">getEnvironmentContext</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> environmentContext;
    }
    
    <span class="hljs-comment">// 3. æ£€æŸ¥å¹¶æŠ›å‡ºé”™è¯¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkError</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">Throwable</span> <span class="hljs-variable">exception</span> <span class="hljs-operator">=</span> ERROR_CASE.get();
        <span class="hljs-keyword">if</span> (exception != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–å¤±è´¥: "</span> 
                + exception.getMessage();
            LOGGER.error(message);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeaflowRuntimeException</span>(message, exception);
        }
    }
}
</code></pre>
<h4 data-id="heading-28">åœ¨ InferContext ä¸­çš„ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferContext</span> {
    
    <span class="hljs-keyword">public</span> &lt;OUT&gt; OUT <span class="hljs-title function_">infer</span><span class="hljs-params">(Object... inputs)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ˜¯å¦åˆå§‹åŒ–æˆåŠŸ</span>
        InferEnvironmentManager.checkError();
        
        <span class="hljs-comment">// 2. ç­‰å¾…è™šæ‹Ÿç¯å¢ƒå°±ç»ªï¼ˆå¦‚æœè¿˜åœ¨åˆå§‹åŒ–ï¼‰</span>
        <span class="hljs-keyword">while</span> (!InferEnvironmentManager.checkInferEnvironmentStatus()) {
            Thread.sleep(<span class="hljs-number">100</span>);  <span class="hljs-comment">// ç­‰å¾… 100ms</span>
            InferEnvironmentManager.checkError();  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å¤±è´¥</span>
            
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() - startTime &gt; TIMEOUT) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimeoutException</span>(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–è¶…æ—¶"</span>);
            }
        }
        
        <span class="hljs-comment">// 3. è™šæ‹Ÿç¯å¢ƒå°±ç»ªï¼Œå¼€å§‹æ¨ç†</span>
        <span class="hljs-keyword">return</span> dataBridge.read();  <span class="hljs-comment">// è¿™é‡Œå·²å®‰å…¨</span>
    }
}
</code></pre>
<h4 data-id="heading-29">é”™è¯¯æ¢å¤æœºåˆ¶</h4>
<h5 data-id="heading-30">åœºæ™¯ 1: åˆå§‹åŒ–è„šæœ¬å¤±è´¥</h5>
<pre><code class="hljs language-ini" lang="ini">infer() è°ƒç”¨
  â†“
æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒçŠ¶æ€
  â”œâ”€â†’ <span class="hljs-attr">SUCCESS_FLAG</span> = <span class="hljs-literal">false</span> âœ—
  â”œâ”€â†’ <span class="hljs-attr">ERROR_CASE</span> = RuntimeException(<span class="hljs-string">"conda create failed"</span>)
  â”‚
  â””â”€â†’ æŠ›å‡ºå¼‚å¸¸ç»™ç”¨æˆ·
      ç”¨æˆ·åº”å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼š
      - æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆpip ä¸‹è½½ï¼‰
      - æ£€æŸ¥ç£ç›˜ç©ºé—´
      - æ£€æŸ¥ requirements.txt æ˜¯å¦æœ‰å†²çª
      - æ‰‹åŠ¨åˆ é™¤è™šæ‹Ÿç¯å¢ƒç›®å½•ï¼Œé‡æ–°åˆå§‹åŒ–
</code></pre>
<h5 data-id="heading-31">åœºæ™¯ 2: è¿›ç¨‹ä¸­é€”å´©æºƒ</h5>
<pre><code class="hljs language-arduino" lang="arduino">è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–ä¸­...
  â†’ conda create... âœ“
  â†’ pip install... âœ“
  â†’ å†™å…¥ _finish âœ“
  â†’ é‡Šæ”¾é”
  
æ­¤æ—¶ process å¼‚å¸¸é€€å‡º

ä¸‹æ¬¡å¯åŠ¨:
  æ£€æŸ¥ _finish âœ“ å­˜åœ¨
  â†’ ç›´æ¥ä½¿ç”¨å·²åˆå§‹åŒ–çš„ç¯å¢ƒ
  â†’ ä¸é‡å¤åˆå§‹åŒ–
</code></pre>
<hr/>
<h4 data-id="heading-32">æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ“ æ­£ç¡®ç”¨æ³•</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">InferContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> InferContext.build(config);
    
    <span class="hljs-comment">// è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–åœ¨åå°è¿›è¡Œ</span>
    <span class="hljs-comment">// è¿™é‡Œç«‹å³è¿”å›ï¼Œä¸ä¼šé˜»å¡</span>
    
    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> context.infer(features);
    <span class="hljs-comment">// é¦–æ¬¡ infer() ä¼šç­‰å¾…è™šæ‹Ÿç¯å¢ƒå°±ç»ª</span>
    
} <span class="hljs-keyword">catch</span> (GeaflowRuntimeException e) {
    <span class="hljs-comment">// è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ–å¤±è´¥</span>
    <span class="hljs-comment">// æ£€æŸ¥æ—¥å¿—ï¼Œä¿®æ­£é—®é¢˜åé‡æ–°å¯åŠ¨åº”ç”¨</span>
    e.printStackTrace();
}
</code></pre>
<hr/>
<h3 data-id="heading-33">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Fapi%2Fjava%2Fnio%2Fchannels%2FFileLock.html" target="_blank" title="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/FileLock.html" ref="nofollow noopener noreferrer">Java FileLock æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F21922125%2F" target="_blank" title="https://stackoverflow.com/questions/21922125/" ref="nofollow noopener noreferrer">AtomicBoolean vs synchronized</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.conda.io%2Fprojects%2Fconda%2Fen%2Flatest%2Fuser-guide%2F" target="_blank" title="https://docs.conda.io/projects/conda/en/latest/user-guide/" ref="nofollow noopener noreferrer">Conda è™šæ‹Ÿç¯å¢ƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frefactoring.guru%2Fdesign-patterns%2Fsingleton" target="_blank" title="https://refactoring.guru/design-patterns/singleton" ref="nofollow noopener noreferrer">å•ä¾‹æ¨¡å¼æœ€ä½³å®è·µ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦]]></title>    <link>https://juejin.cn/post/7576609946190577700</link>    <guid>https://juejin.cn/post/7576609946190577700</guid>    <pubDate>2025-11-26T04:45:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190577700" data-draft-id="7576575703167254534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-11-26T04:45:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:45:44.000Z" title="Wed Nov 26 2025 04:45:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>Go æ˜¯ Google è®¾è®¡çš„ç±» C é™æ€ç±»å‹è¯­è¨€ï¼Œå…¼é¡¾åº•å±‚æ€§èƒ½ä¸å¼€å‘æ•ˆç‡ã€‚å®ƒå¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰è¯­è¨€ â€”â€” æ²¡æœ‰ class å…³é”®å­—ï¼Œä¹Ÿä¸æ”¯æŒä¼ ç»Ÿçš„ â€œç»§æ‰¿â€ è¯­æ³•ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å®ç°</strong> å’Œ <strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼ŒGo èƒ½çµæ´»å®ç° OOP çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆå¤šæ€ã€ä»£ç å¤ç”¨ï¼‰ï¼Œä¸”è®¾è®¡æ›´ç®€æ´ã€æ— ç»§æ‰¿å¸¦æ¥çš„è€¦åˆé—®é¢˜ã€‚
ä¸ C++ ç›¸æ¯”ï¼ŒGo çš„è®¾è®¡å“²å­¦æ˜¯ â€œ<strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>â€ï¼šç”¨æ¥å£å®ç°å¤šæ€ï¼Œç”¨ç»“æ„ä½“åµŒå…¥å®ç°ä»£ç å¤ç”¨ï¼Œæ—¢é¿å…äº†ç»§æ‰¿çš„å¤æ‚è¯­æ³•ï¼Œåˆè§£å†³äº†å¤šé‡ç»§æ‰¿çš„æ­§ä¹‰é—®é¢˜ã€‚æœ¬æ–‡å°†é€šè¿‡ç±»æ¯” C++ çš„æ¥å£ / ç»§æ‰¿é€»è¾‘ï¼Œè¯¦è§£ Go å¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœã€‚</p>
<h3 data-id="heading-2">äºŒã€Go ä¸­çš„ â€œå•ä¸€å¤ç”¨â€ï¼ˆç±»ä¼¼å•ä¸€ç»§æ‰¿ï¼‰</h3>
<p>C++ çš„å•ä¸€ç»§æ‰¿æ ¸å¿ƒæ˜¯ â€œä¸€ä¸ªå­ç±»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±» / æ¥å£â€ï¼ŒGo ä¸­é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ç±»ä¼¼æ•ˆæœï¼š<strong>ä»…ç”¨æ¥å£å®ç°å¤šæ€</strong>ï¼ˆæ— ä»£ç å¤ç”¨ï¼Œä»…çº¦æŸè¡Œä¸ºï¼‰ã€<strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰+ æ¥å£</strong>ï¼ˆæ—¢æœ‰ä»£ç å¤ç”¨ï¼Œåˆæœ‰å¤šæ€ï¼‰ã€‚</p>
<h4 data-id="heading-3">2.1 ä»…é€šè¿‡æ¥å£å®ç°ï¼ˆéšå¼å¤šæ€ï¼‰</h4>
<p>C++ çš„æ¥å£æ˜¯ â€œçº¯è™šå‡½æ•°é›†åˆâ€ï¼Œå­ç±»éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿å¹¶å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•ï¼›è€Œ Go çš„æ¥å£æ˜¯ â€œæ–¹æ³•ç­¾åé›†åˆâ€ï¼Œ<strong>æ— éœ€æ˜¾å¼å£°æ˜å®ç°</strong>â€”â€” åªè¦ç»“æ„ä½“å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå°±è‡ªåŠ¨æ»¡è¶³è¯¥æ¥å£ï¼Œè¿™å°±æ˜¯ â€œéšå¼å®ç°â€ï¼Œä¹Ÿæ˜¯ Go æ¥å£çš„æ ¸å¿ƒç‰¹æ€§ã€‚</p>
<h5 data-id="heading-4">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IFruit</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span> : <span class="hljs-keyword">public</span> IFruit { <span class="hljs-comment">// æ˜¾å¼ç»§æ‰¿</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function">std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"apple"</span>; }
};
</code></pre>
<h5 data-id="heading-5">Go å®ç°ä»£ç </h5>
<p>é¦–å…ˆå®šä¹‰æ¥å£ï¼ˆä»…çº¦æŸè¡Œä¸ºï¼Œæ— å®ç°ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰ Fruit æ¥å£ï¼šä»…å£°æ˜æ–¹æ³•ç­¾åï¼Œæ— å®ç°</span>
<span class="hljs-keyword">type</span> FruitType <span class="hljs-type">string</span> <span class="hljs-comment">// è¡¥å……ç±»å‹å®šä¹‰ï¼Œä½¿ä»£ç å¯è¿è¡Œ</span>
<span class="hljs-keyword">const</span> (
    BananaType FruitType = <span class="hljs-string">"banana"</span>
    AppleType  FruitType = <span class="hljs-string">"apple"</span>
)

<span class="hljs-keyword">type</span> Fruit <span class="hljs-keyword">interface</span> {
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    GetType() FruitType <span class="hljs-comment">// æ˜ç¡®ç±»å‹ï¼Œé¿å…æ­§ä¹‰</span>
}
</code></pre>
<p>å®šä¹‰ Banana ç»“æ„ä½“ï¼Œéšå¼å®ç° Fruit æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Banana <span class="hljs-keyword">struct</span> {
    name   <span class="hljs-type">string</span>
    energy <span class="hljs-type">float32</span> <span class="hljs-comment">// è‡ªå®šä¹‰å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Banana å®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBanana</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Banana {
    <span class="hljs-keyword">return</span> &amp;Banana{
        name:   name,
        energy: <span class="hljs-number">0</span>,
    }
}

<span class="hljs-comment">// å®ç° Fruit æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼ˆéšå¼æ»¡è¶³ Fruit æ¥å£ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetType() FruitType {
    <span class="hljs-keyword">return</span> BananaType
}

<span class="hljs-comment">// Banana è‡ªå®šä¹‰æ–¹æ³•ï¼ˆæ¥å£æœªçº¦æŸï¼Œä»…è‡ªèº«å¯ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetEnergy(energy <span class="hljs-type">float32</span>) {
    b.energy = energy
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetEnergy() <span class="hljs-type">float32</span> {
    <span class="hljs-keyword">return</span> b.energy
}
</code></pre>
<h5 data-id="heading-6">æ¥å£çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼ˆä½“ç°å¤šæ€ï¼‰</h5>
<h6 data-id="heading-7">1. èµ‹å€¼ç»™æ¥å£å˜é‡ï¼šé€šè¿‡æ¥å£ç»Ÿä¸€è°ƒç”¨ï¼Œå±è”½å…·ä½“å®ç°</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> fruit Fruit <span class="hljs-comment">// æ¥å£å˜é‡</span>
fruit = NewBanana(<span class="hljs-string">"big banana"</span>) <span class="hljs-comment">// éšå¼è½¬æ¢ï¼Œæ— éœ€æ˜¾å¼å£°æ˜</span>
fmt.Println(fruit.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šbig bananaï¼ˆè°ƒç”¨ Banana çš„å®ç°ï¼‰</span>
fmt.Println(fruit.GetType()) <span class="hljs-comment">// è¾“å‡ºï¼šbanana</span>
</code></pre>
<h6 data-id="heading-8">2. ç›´æ¥ä½¿ç”¨ç»“æ„ä½“å®ä¾‹ï¼šå¯è°ƒç”¨æ¥å£æ–¹æ³• + è‡ªå®šä¹‰æ–¹æ³•</h6>
<pre><code class="hljs language-go" lang="go">banana := NewBanana(<span class="hljs-string">"little banana"</span>)
banana.SetEnergy(<span class="hljs-number">100</span>) <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•</span>
fmt.Println(banana.GetEnergy()) <span class="hljs-comment">// è¾“å‡ºï¼š100</span>
fmt.Println(banana.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šlittle bananaï¼ˆè°ƒç”¨æ¥å£æ–¹æ³•ï¼‰</span>
</code></pre>
<h6 data-id="heading-9">3. å·¥å‚æ–¹æ³•ç»Ÿä¸€åˆ›å»ºå®ä¾‹ï¼ˆå¢å¼ºå¤šæ€çµæ´»æ€§ï¼‰</h6>
<p>è¡¥å…… NewFruit å®ç°ï¼Œæ ¹æ®ç±»å‹åˆ›å»ºä¸åŒ Fruit å®ä¾‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFruit</span><span class="hljs-params">(fruitType FruitType, name <span class="hljs-type">string</span>)</span></span> Fruit {
    <span class="hljs-keyword">switch</span> fruitType {
    <span class="hljs-keyword">case</span> BananaType:
        <span class="hljs-keyword">return</span> NewBanana(name)
    <span class="hljs-keyword">case</span> AppleType:
        <span class="hljs-keyword">return</span> NewApple(name) <span class="hljs-comment">// éœ€å®ç° Apple ç»“æ„ä½“ï¼ˆç±»ä¼¼ Bananaï¼‰</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•</span>
apple := NewFruit(AppleType, <span class="hljs-string">"red apple"</span>)
banana := NewFruit(BananaType, <span class="hljs-string">"yellow banana"</span>)
fmt.Println(apple.GetName(), banana.GetName()) <span class="hljs-comment">// ç»Ÿä¸€è°ƒç”¨æ¥å£æ–¹æ³•`</span>
</code></pre>
<h4 data-id="heading-10">2.2 ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰å®ç°ä»£ç å¤ç”¨ï¼ˆç±»ä¼¼åŸºç±»ç»§æ‰¿ï¼‰</h4>
<p>C++ ä¸­é€šè¿‡ â€œå­ç±»ç»§æ‰¿åŸºç±»â€ å¤ç”¨åŸºç±»ä»£ç ï¼ŒGo ä¸­é€šè¿‡ â€œç»“æ„ä½“åµŒå…¥â€ï¼ˆå°†ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºå¦ä¸€ä¸ªç»“æ„ä½“çš„åŒ¿åå­—æ®µï¼‰å®ç°ä»£ç å¤ç”¨ â€”â€” åµŒå…¥çš„ç»“æ„ä½“ï¼ˆç§°ä¸º â€œåµŒå…¥ç±»å‹â€ï¼‰çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¼šè¢«å¤–å±‚ç»“æ„ä½“ â€œç»§æ‰¿â€ï¼ˆå®é™…æ˜¯éšå¼ä»£ç†ï¼‰ï¼Œå¤–å±‚ç»“æ„ä½“å¯ç›´æ¥è°ƒç”¨ï¼Œä¹Ÿå¯è¦†ç›–è¿™äº›æ–¹æ³•ã€‚</p>
<h5 data-id="heading-11">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºç±»ï¼ˆå«éƒ¨åˆ†å®ç°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehicleBase</span> : <span class="hljs-keyword">public</span> IVehicle {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetWheelCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> <span class="hljs-keyword">override</span> </span>{ wheelCount = count; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetWheelCount</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> wheelCount; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>; }
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> wheelCount;
};

<span class="hljs-comment">// å­ç±»ç»§æ‰¿åŸºç±»ï¼Œå¤ç”¨æ–¹æ³•å¹¶å¯è¦†ç›–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bus</span> : <span class="hljs-keyword">public</span> VehicleBase {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> name; }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string n)</span> <span class="hljs-keyword">override</span> </span>{ name = n; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> VehicleBase::<span class="hljs-built_in">ToString</span>() + <span class="hljs-string">"Bus -&gt; "</span> + name; <span class="hljs-comment">// è°ƒç”¨åŸºç±»æ–¹æ³•</span>
    }
<span class="hljs-keyword">private</span>:
    std::string name;
};
</code></pre>
<h5 data-id="heading-12">Go å®ç°ä»£ç </h5>
<h6 data-id="heading-13">1. å®šä¹‰æ¥å£ï¼ˆçº¦æŸæ ¸å¿ƒè¡Œä¸ºï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> VehicleType <span class="hljs-type">string</span>
<span class="hljs-keyword">const</span> (
    BusType VehicleType = <span class="hljs-string">"bus"</span>
)

<span class="hljs-keyword">type</span> Vehicle <span class="hljs-keyword">interface</span> {
    GetType() VehicleType
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    SetWheelCount(count <span class="hljs-type">int</span>)
    GetWheelCount() <span class="hljs-type">int</span>
    ToString() <span class="hljs-type">string</span>
}
</code></pre>
<h6 data-id="heading-14">2. å®šä¹‰ â€œåµŒå…¥ç»“æ„ä½“â€ï¼ˆç±»ä¼¼åŸºç±»ï¼Œæä¾›é€šç”¨å®ç°ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// vehicleImpl æ˜¯é€šç”¨å®ç°ï¼Œä½œä¸ºåµŒå…¥ç±»å‹ä¾›å…¶ä»–ç»“æ„ä½“å¤ç”¨</span>
<span class="hljs-keyword">type</span> vehicleImpl <span class="hljs-keyword">struct</span> {
    wheelCount <span class="hljs-type">int</span> <span class="hljs-comment">// é€šç”¨å­—æ®µ</span>
}

<span class="hljs-comment">// é€šç”¨æ–¹æ³•å®ç°ï¼ˆä¾›åµŒå…¥è€…å¤ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> SetWheelCount(count <span class="hljs-type">int</span>) {
    v.wheelCount = count
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> GetWheelCount() <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> v.wheelCount
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>
}
</code></pre>
<h6 data-id="heading-15">3. å®šä¹‰å¤–å±‚ç»“æ„ä½“ï¼ˆåµŒå…¥ vehicleImplï¼Œå¤ç”¨ä»£ç ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Bus ç»“æ„ä½“é€šè¿‡åµŒå…¥ vehicleImplï¼Œå¤ç”¨å…¶æ–¹æ³•å’Œå­—æ®µ</span>
<span class="hljs-keyword">type</span> Bus <span class="hljs-keyword">struct</span> {
    vehicleImpl <span class="hljs-comment">// åŒ¿ååµŒå…¥ï¼ˆç»„åˆï¼‰ï¼Œæ— éœ€æ˜¾å¼è°ƒç”¨</span>
    name        <span class="hljs-type">string</span> <span class="hljs-comment">// è‡ªèº«å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Bus å®ä¾‹ï¼ˆéœ€åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBus</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Bus {
    <span class="hljs-keyword">return</span> &amp;Bus{
        name: name,
        vehicleImpl: vehicleImpl{ <span class="hljs-comment">// åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“</span>
            wheelCount: <span class="hljs-number">4</span>, <span class="hljs-comment">// å…¬äº¤è½¦é»˜è®¤4ä¸ªè½®å­</span>
        },
    }
}

<span class="hljs-comment">// å®ç° Vehicle æ¥å£çš„å‰©ä½™æ–¹æ³•ï¼ˆæœªè¢« vehicleImpl å®ç°çš„éƒ¨åˆ†ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetType() VehicleType {
    <span class="hljs-keyword">return</span> BusType
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„ ToString æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„è¢«è¦†ç›–æ–¹æ³•ï¼šb.vehicleImpl.ToString()</span>
    <span class="hljs-keyword">return</span> b.vehicleImpl.ToString() + fmt.Sprintf(<span class="hljs-string">"Bus -&gt; %s (wheels: %d)"</span>, b.GetName(), b.GetWheelCount())
}
</code></pre>
<h6 data-id="heading-16">æ ¸å¿ƒç‰¹æ€§è¯´æ˜</h6>
<ul>
<li>ä»£ç å¤ç”¨ï¼š<code>Bus</code> æ— éœ€é‡æ–°å®ç° <code>SetWheelCount</code>ã€<code>GetWheelCount</code>ï¼Œç›´æ¥å¤ç”¨ <code>vehicleImpl</code> çš„æ–¹æ³•ï¼›</li>
<li>æ–¹æ³•è¦†ç›–ï¼š<code>Bus</code> å®šä¹‰äº†ä¸ <code>vehicleImpl</code> åŒåçš„ <code>ToString</code> æ–¹æ³•ï¼Œä¼šè¦†ç›–åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å¤–å±‚æ–¹æ³•ï¼›</li>
<li>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•ï¼šé€šè¿‡ <code>b.vehicleImpl.ToString()</code> å¯è°ƒç”¨è¢«è¦†ç›–çš„åµŒå…¥ç»“æ„ä½“æ–¹æ³•ï¼›</li>
<li>å­—æ®µè®¿é—®ï¼šåµŒå…¥ç»“æ„ä½“çš„å­—æ®µå¯ç›´æ¥è®¿é—®ï¼ˆ<code>b.wheelCount</code>ï¼‰ï¼Œä¹Ÿå¯æ˜¾å¼è®¿é—®ï¼ˆ<code>b.vehicleImpl.wheelCount</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">ä¸‰ã€Go ä¸­çš„ â€œå¤šç»„åˆâ€ï¼ˆç±»ä¼¼å¤šé‡ç»§æ‰¿ï¼‰</h3>
<p>C++ æ”¯æŒå¤šé‡ç»§æ‰¿ï¼ˆä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼‰ï¼Œä½†å®¹æ˜“å¼•å‘ â€œè±å½¢ç»§æ‰¿â€ï¼ˆå¤šä¸ªçˆ¶ç±»ç»§æ‰¿è‡ªåŒä¸€åŸºç±»ï¼‰çš„æ­§ä¹‰é—®é¢˜ã€‚Go æœ¬èº«<strong>ä¸æ”¯æŒä¼ ç»Ÿå¤šé‡ç»§æ‰¿</strong>ï¼Œä½†é€šè¿‡ â€œå¤šåµŒå…¥â€ï¼ˆä¸€ä¸ªç»“æ„ä½“åµŒå…¥å¤šä¸ªç»“æ„ä½“ï¼‰ï¼Œå¯å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœ â€”â€” å¤ç”¨å¤šä¸ªåµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¸”æ— æ­§ä¹‰ã€‚</p>
<h4 data-id="heading-18">ç±»æ¯” C++ ä¼ªä»£ç </h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Mother</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-comment">// å¤šé‡ç»§æ‰¿ï¼šåŒæ—¶ç»§æ‰¿ Father å’Œ Mother</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> : <span class="hljs-keyword">public</span> Father, <span class="hljs-keyword">public</span> Mother {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œé¿å…æ­§ä¹‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>() + <span class="hljs-string">", Father: "</span> + Father::<span class="hljs-built_in">Say</span>() + <span class="hljs-string">", Mother: "</span> + Mother::<span class="hljs-built_in">Say</span>();
    }
};
</code></pre>
<h4 data-id="heading-19">Go å®ç°ä»£ç ï¼ˆå¤šåµŒå…¥ç»“æ„ä½“ï¼‰</h4>
<h5 data-id="heading-20">1. å®šä¹‰ä¸¤ä¸ª â€œè¢«ç»„åˆâ€ çš„ç»“æ„ä½“ï¼ˆç±»ä¼¼çˆ¶ç±»ï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Father ç»“æ„ä½“ï¼ˆæä¾›ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Father <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFather</span><span class="hljs-params">()</span></span> *Father {
    <span class="hljs-keyword">return</span> &amp;Father{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + f.GetName()
}

<span class="hljs-comment">// Mother ç»“æ„ä½“ï¼ˆæä¾›å¦ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Mother <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMother</span><span class="hljs-params">()</span></span> *Mother {
    <span class="hljs-keyword">return</span> &amp;Mother{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + m.GetName()
}
</code></pre>
<h5 data-id="heading-21">2. å®šä¹‰ Child ç»“æ„ä½“ï¼ˆåµŒå…¥ Father å’Œ Motherï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Child åµŒå…¥ä¸¤ä¸ªç»“æ„ä½“ï¼Œå¤ç”¨å…¶æ–¹æ³•</span>
<span class="hljs-keyword">type</span> Child <span class="hljs-keyword">struct</span> {
    *Mother <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥ï¼ˆéœ€åˆå§‹åŒ–æŒ‡é’ˆï¼‰</span>
    *Father <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Child åŠåµŒå…¥çš„ç»“æ„ä½“æŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewChild</span><span class="hljs-params">()</span></span> *Child {
    <span class="hljs-keyword">return</span> &amp;Child{
        Mother: NewMother(), <span class="hljs-comment">// åˆå§‹åŒ– Mother æŒ‡é’ˆ</span>
        Father: NewFather(), <span class="hljs-comment">// åˆå§‹åŒ– Father æŒ‡é’ˆ</span>
    }
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„åŒåæ–¹æ³•ï¼ˆé¿å…è°ƒç”¨æ­§ä¹‰ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>
}

<span class="hljs-comment">// è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ˜¾å¼è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œè°ƒç”¨å…¶æ–¹æ³•ï¼ˆæ— æ­§ä¹‰ï¼‰</span>
    fatherSay := c.Father.Say()
    motherSay := c.Mother.Say()
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"I am %s. Father: %s, Mother: %s"</span>, c.GetName(), fatherSay, motherSay)
}
</code></pre>
<h5 data-id="heading-22">3. ä½¿ç”¨ç¤ºä¾‹ï¼š</h5>
<pre><code class="hljs language-go" lang="go">child := NewChild()
fmt.Println(child.Say())
<span class="hljs-comment">// è¾“å‡ºï¼šI am Jerry. Father: I am Tony, Mother: I am Aurora</span>
</code></pre>
<h5 data-id="heading-23">æ ¸å¿ƒè§„åˆ™ï¼ˆé¿å…æ­§ä¹‰ï¼‰</h5>
<ul>
<li><strong>åµŒå…¥æ–¹å¼</strong>ï¼šæ”¯æŒå€¼åµŒå…¥ï¼ˆ<code>Father</code>ï¼‰å’ŒæŒ‡é’ˆåµŒå…¥ï¼ˆ<code>*Mother</code>ï¼‰ï¼ŒæŒ‡é’ˆåµŒå…¥éœ€åœ¨æ„é€ æ—¶åˆå§‹åŒ–æŒ‡é’ˆï¼›</li>
<li><strong>åŒåæ–¹æ³•å¤„ç†</strong>ï¼šè‹¥å¤šä¸ªåµŒå…¥ç»“æ„ä½“æœ‰åŒåæ–¹æ³•ï¼Œå¤–å±‚ç»“æ„ä½“å¿…é¡»å®šä¹‰åŒåæ–¹æ³•è¦†ç›–ï¼ˆå¦åˆ™è°ƒç”¨æ—¶ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæç¤ºæ­§ä¹‰ï¼‰ï¼›</li>
<li><strong>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•</strong>ï¼šé€šè¿‡ <code>c.Father.Say()</code> æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œé¿å…æ­§ä¹‰ï¼Œè¿™æ˜¯ Go å¤„ç† â€œå¤šç»„åˆâ€ å†²çªçš„æ ¸å¿ƒæ–¹å¼ã€‚</li>
</ul>
<h3 data-id="heading-24">å››ã€Go ä¸ C++ æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>C++</th><th>Go</th></tr></thead><tbody><tr><td>æ¥å£å®ç°</td><td>æ˜¾å¼ç»§æ‰¿ï¼ˆ<code>public</code> æ¥å£ï¼‰</td><td>éšå¼å®ç°ï¼ˆæ— éœ€å£°æ˜ï¼Œå®ç°æ–¹æ³•å³æ»¡è¶³ï¼‰</td></tr><tr><td>ä»£ç å¤ç”¨</td><td>ç»§æ‰¿åŸºç±»</td><td>ç»“æ„ä½“åµŒå…¥ï¼ˆç»„åˆï¼‰</td></tr><tr><td>å¤šé‡ç»§æ‰¿</td><td>æ”¯æŒï¼ˆæ˜“å¼•å‘è±å½¢ç»§æ‰¿æ­§ä¹‰ï¼‰</td><td>ä¸æ”¯æŒï¼Œé€šè¿‡å¤šåµŒå…¥å®ç°å¤šç»„åˆï¼ˆæ— æ­§ä¹‰ï¼‰</td></tr><tr><td>æ–¹æ³•è¦†ç›–</td><td>éœ€ <code>override</code> å…³é”®å­—</td><td>åŒåæ–¹æ³•è‡ªåŠ¨è¦†ç›–ï¼ˆå¤–å±‚ä¼˜å…ˆï¼‰</td></tr><tr><td>æ ¸å¿ƒè®¾è®¡å“²å­¦</td><td>ç»§æ‰¿ä¼˜å…ˆ</td><td>ç»„åˆä¼˜äºç»§æ‰¿</td></tr></tbody></table>
<h3 data-id="heading-25">äº”ã€å®Œæ•´ä»£ç ä»“åº“</h3>
<p>æœ¬æ–‡æ‰€æœ‰å¯è¿è¡Œä»£ç å·²æ•´ç†è‡³ GitHubï¼ŒåŒ…å«æ¥å£ã€ç»„åˆã€å¤šç»„åˆçš„å®Œæ•´ç¤ºä¾‹ï¼Œå¯ç›´æ¥å…‹éš†è¿è¡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-inheritance-example" target="_blank" title="https://github.com/tx7do/go-inheritance-example" ref="nofollow noopener noreferrer">github.com/tx7do/go-inâ€¦</a></p>
<h3 data-id="heading-26">å…­ã€æ€»ç»“</h3>
<p>Go æ²¡æœ‰ä¼ ç»Ÿ OOP çš„ â€œç±»â€ å’Œ â€œç»§æ‰¿â€ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å¤šæ€</strong> å’Œ <strong>ç»“æ„ä½“çš„ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼Œå®ç°äº†æ›´çµæ´»ã€ä½è€¦åˆçš„ä»£ç å¤ç”¨å’Œå¤šæ€ç‰¹æ€§ï¼š</p>
<ol>
<li>æ¥å£è´Ÿè´£ â€œçº¦æŸè¡Œä¸ºâ€ï¼Œéšå¼å®ç°è®©ä»£ç æ›´ç®€æ´ï¼Œæ”¯æŒå¤šæ€ï¼›</li>
<li>ç»“æ„ä½“åµŒå…¥è´Ÿè´£ â€œå¤ç”¨ä»£ç â€ï¼Œæ›¿ä»£ä¼ ç»Ÿç»§æ‰¿ï¼Œæ— è€¦åˆé—®é¢˜ï¼›</li>
<li>å¤šåµŒå…¥å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœï¼Œä½†é€šè¿‡æ˜¾å¼è°ƒç”¨é¿å…æ­§ä¹‰ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡æ—¢ä¿ç•™äº† OOP çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œåˆè§„é¿äº†ç»§æ‰¿å¸¦æ¥çš„å¤æ‚é—®é¢˜ï¼Œæ˜¯ Go ç®€æ´ã€é«˜æ•ˆçš„å…³é”®åŸå› ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸€ï¼‰Geaflow-Infer æ¨¡å—ç®€ä»‹]]></title>    <link>https://juejin.cn/post/7576646142315970601</link>    <guid>https://juejin.cn/post/7576646142315970601</guid>    <pubDate>2025-11-26T04:37:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576646142315970601" data-draft-id="7576575703167156230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸€ï¼‰Geaflow-Infer æ¨¡å—ç®€ä»‹"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-26T04:37:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸€ï¼‰Geaflow-Infer æ¨¡å—ç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:37:31.000Z" title="Wed Nov 26 2025 04:37:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬1ç« ï¼šGeaflow-Infer æ¨¡å—ç®€ä»‹</h2>
<h3 data-id="heading-1">ç« èŠ‚å¯¼è¯»</h3>
<p>æœ¬æ–‡å°†ä»å®è§‚çš„è§’åº¦å‡ºå‘ï¼Œç³»ç»Ÿåœ°ä»‹ç»è¿™ä¸ªæ¨¡å—çš„<strong>å®šä½</strong>ã€<strong>åº”ç”¨åœºæ™¯</strong>ã€<strong>æ ¸å¿ƒåŠŸèƒ½</strong>å’Œ<strong>ç»„ç»‡ç»“æ„</strong>ã€‚é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ å°†å¯¹ geaflow-infer æ¨¡å—æœ‰ä¸€ä¸ªå…¨é¢çš„è®¤è¯†ï¼Œä¸ºåç»­æ·±å…¥å­¦ä¹ å„ä¸ªç»†èŠ‚æ¨¡å—æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-2">æ¶æ„è®¾è®¡å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "ç”¨æˆ·å±‚"
        A["InferContext&lt;br/&gt;ç»Ÿä¸€è°ƒç”¨å…¥å£"]
    end
    
    subgraph "ç¯å¢ƒç®¡ç†å±‚"
        B["InferEnvironmentManager&lt;br/&gt;ç¯å¢ƒåˆå§‹åŒ–ç®¡ç†"]
        C["InferDependencyManager&lt;br/&gt;ä¾èµ–æ–‡ä»¶ç®¡ç†"]
        D["InferEnvironmentContext&lt;br/&gt;ç¯å¢ƒä¸Šä¸‹æ–‡"]
    end
    
    subgraph "ä»»åŠ¡è¿è¡Œå±‚"
        E["InferTaskRunImpl&lt;br/&gt;Pythonè¿›ç¨‹ç®¡ç†"]
        F["ProcessLoggerManager&lt;br/&gt;æ—¥å¿—ç®¡ç†"]
        G["InferTaskStatus&lt;br/&gt;çŠ¶æ€ç®¡ç†"]
    end
    
    subgraph "æ•°æ®äº¤æ¢å±‚"
        H["InferDataBridgeImpl&lt;br/&gt;æ•°æ®æ¡¥æ¥"]
        I["InferDataWriter&lt;br/&gt;æ•°æ®å†™å…¥"]
        J["InferDataReader&lt;br/&gt;æ•°æ®è¯»å–"]
        K["DataExchangeQueue&lt;br/&gt;å…±äº«å†…å­˜é˜Ÿåˆ—"]
    end
    
    subgraph "åºåˆ—åŒ–å±‚"
        L["Pickler&lt;br/&gt;åºåˆ—åŒ–å™¨"]
        M["Unpickler&lt;br/&gt;ååºåˆ—åŒ–å™¨"]
        N["IEncoder/IDecoder&lt;br/&gt;ç¼–è§£ç æ¥å£"]
    end
    
    subgraph "Pythonè¿›ç¨‹"
        O["infer_server.py&lt;br/&gt;æ¨ç†æœåŠ¡"]
        P["ç”¨æˆ·è‡ªå®šä¹‰&lt;br/&gt;Transformç±»"]
    end
    
    A --&gt; B
    A --&gt; H
    A --&gt; E
    B --&gt; C
    B --&gt; D
    E --&gt; F
    E --&gt; G
    E --&gt; O
    H --&gt; I
    H --&gt; J
    H --&gt; N
    I --&gt; K
    J --&gt; K
    N --&gt; L
    N --&gt; M
    K --&gt; O
    O --&gt; P
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style E fill:#ffe1e1
    style H fill:#e1ffe1
    style L fill:#f0e1ff
    style O fill:#ffe1f0
</code></pre>
<h3 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½æ—¶åºå›¾</h3>
<h4 data-id="heading-4">1. ç¯å¢ƒåˆå§‹åŒ–æ—¶åºå›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant IC as InferContext
    participant IEM as InferEnvironmentManager
    participant IDM as InferDependencyManager
    participant Shell as Shellè„šæœ¬
    
    User-&gt;&gt;IC: new InferContext(config)
    IC-&gt;&gt;IEM: buildInferEnvironmentManager()
    IEM-&gt;&gt;IEM: createEnvironment()
    
    Note over IEM: ä½¿ç”¨æ–‡ä»¶é”ç¡®ä¿å•æ¬¡åˆå§‹åŒ–
    
    IEM-&gt;&gt;IEM: æ£€æŸ¥ _finish æˆ– _failed æ–‡ä»¶
    
    alt å·²åˆå§‹åŒ–
        IEM--&gt;&gt;IC: è¿”å›ç¯å¢ƒä¸Šä¸‹æ–‡
    else éœ€è¦åˆå§‹åŒ–
        IEM-&gt;&gt;IDM: new InferDependencyManager()
        IDM-&gt;&gt;IDM: å¤åˆ¶è¿è¡Œæ—¶æ–‡ä»¶
        IDM-&gt;&gt;IDM: å‡†å¤‡ requirements.txt
        IDM--&gt;&gt;IEM: è¿”å›è„šæœ¬è·¯å¾„
        
        IEM-&gt;&gt;Shell: æ‰§è¡Œ install-infer-env.sh
        Shell-&gt;&gt;Shell: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
        Shell-&gt;&gt;Shell: å®‰è£…ä¾èµ–åŒ…
        Shell--&gt;&gt;IEM: å®‰è£…å®Œæˆ
        
        IEM-&gt;&gt;IEM: åˆ›å»º _finish æ–‡ä»¶
        IEM--&gt;&gt;IC: è¿”å›ç¯å¢ƒä¸Šä¸‹æ–‡
    end
    
    IC-&gt;&gt;IC: åˆå§‹åŒ–å®Œæˆ
</code></pre>
<h4 data-id="heading-5">2. æ¨ç†è°ƒç”¨æ—¶åºå›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant IC as InferContext
    participant ITR as InferTaskRunImpl
    participant IDB as InferDataBridgeImpl
    participant IDW as InferDataWriter
    participant SMQ as å…±äº«å†…å­˜é˜Ÿåˆ—
    participant IDR as InferDataReader
    participant Python as Pythonè¿›ç¨‹
    
    User-&gt;&gt;IC: infer(features...)
    
    IC-&gt;&gt;ITR: å¯åŠ¨Pythonè¿›ç¨‹
    ITR-&gt;&gt;Python: å¯åŠ¨ infer_server.py
    Python-&gt;&gt;Python: åŠ è½½ç”¨æˆ·Transformç±»
    Python-&gt;&gt;SMQ: è¿æ¥å…±äº«å†…å­˜
    Python--&gt;&gt;ITR: è¿›ç¨‹å°±ç»ª
    
    IC-&gt;&gt;IDB: write(features)
    IDB-&gt;&gt;IDW: åºåˆ—åŒ–æ•°æ®
    IDW-&gt;&gt;SMQ: å†™å…¥æ•°æ®åˆ°å‘é€é˜Ÿåˆ—
    
    Note over Python: Pythonè¿›ç¨‹è¯»å–æ•°æ®
    Python-&gt;&gt;SMQ: ä»æ¥æ”¶é˜Ÿåˆ—è¯»å–
    Python-&gt;&gt;Python: ååºåˆ—åŒ–æ•°æ®
    Python-&gt;&gt;Python: æ‰§è¡Œæ¨ç†
    Python-&gt;&gt;SMQ: å†™å…¥ç»“æœåˆ°å‘é€é˜Ÿåˆ—
    
    IC-&gt;&gt;IDB: read()
    IDB-&gt;&gt;IDR: ä»æ¥æ”¶é˜Ÿåˆ—è¯»å–
    IDR-&gt;&gt;SMQ: è¯»å–æ•°æ®
    IDR--&gt;&gt;IDB: è¿”å›å­—èŠ‚æ•°ç»„
    IDB-&gt;&gt;IDB: ååºåˆ—åŒ–ç»“æœ
    IDB--&gt;&gt;IC: è¿”å›ç»“æœå¯¹è±¡
    IC--&gt;&gt;User: è¿”å›æ¨ç†ç»“æœ
</code></pre>
<h4 data-id="heading-6">3. å…±äº«å†…å­˜æ•°æ®äº¤æ¢æ—¶åºå›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Java as Javaè¿›ç¨‹
    participant Encoder as Picklerç¼–ç å™¨
    participant Writer as InferDataWriter
    participant Queue as DataExchangeQueue
    participant Reader as InferDataReader
    participant Decoder as Unpicklerè§£ç å™¨
    participant Python as Pythonè¿›ç¨‹
    
    Note over Java,Python: æ•°æ®å†™å…¥æµç¨‹
    
    Java-&gt;&gt;Encoder: encode(object)
    Encoder-&gt;&gt;Encoder: åºåˆ—åŒ–ä¸ºPickleæ ¼å¼
    Encoder--&gt;&gt;Java: byte[]
    
    Java-&gt;&gt;Writer: write(bytes)
    Writer-&gt;&gt;Writer: æ·»åŠ 4å­—èŠ‚é•¿åº¦å¤´
    Writer-&gt;&gt;Queue: å†™å…¥å…±äº«å†…å­˜
    Queue-&gt;&gt;Queue: æ›´æ–°å†™æŒ‡é’ˆ
    
    Note over Java,Python: æ•°æ®è¯»å–æµç¨‹
    
    Python-&gt;&gt;Queue: æ£€æŸ¥å¯è¯»æ•°æ®
    Queue--&gt;&gt;Python: æ•°æ®å¯ç”¨
    Python-&gt;&gt;Reader: read()
    Reader-&gt;&gt;Queue: ä»å…±äº«å†…å­˜è¯»å–
    Reader-&gt;&gt;Reader: è¯»å–4å­—èŠ‚é•¿åº¦å¤´
    Reader-&gt;&gt;Queue: è¯»å–æ•°æ®ä½“
    Queue-&gt;&gt;Queue: æ›´æ–°è¯»æŒ‡é’ˆ
    Reader--&gt;&gt;Python: byte[]
    
    Python-&gt;&gt;Decoder: decode(bytes)
    Decoder-&gt;&gt;Decoder: ååºåˆ—åŒ–Pickleæ•°æ®
    Decoder--&gt;&gt;Python: Pythonå¯¹è±¡
</code></pre>
<h4 data-id="heading-7">4. è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†æ—¶åºå›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant IC as InferContext
    participant ITR as InferTaskRunImpl
    participant PB as ProcessBuilder
    participant Python as Pythonè¿›ç¨‹
    participant PLM as ProcessLoggerManager
    
    IC-&gt;&gt;ITR: run(commands)
    ITR-&gt;&gt;PB: æ„å»ºè¿›ç¨‹
    
    Note over PB: é…ç½®ç¯å¢ƒå˜é‡&lt;br/&gt;PATH, LD_LIBRARY_PATH, PYTHONPATH
    
    PB-&gt;&gt;Python: å¯åŠ¨è¿›ç¨‹
    Python--&gt;&gt;ITR: è¿›ç¨‹å¯¹è±¡
    
    ITR-&gt;&gt;PLM: startLogging()
    PLM-&gt;&gt;PLM: å¯åŠ¨è¾“å‡ºç›‘å¬çº¿ç¨‹
    PLM-&gt;&gt;PLM: å¯åŠ¨é”™è¯¯ç›‘å¬çº¿ç¨‹
    
    ITR-&gt;&gt;ITR: waitFor(timeout)
    
    alt è¶…æ—¶é€€å‡º
        ITR-&gt;&gt;ITR: æ ‡è®°çŠ¶æ€ä¸ºFAILED
        ITR-&gt;&gt;Python: destroyForcibly()
    else æ­£å¸¸è¿è¡Œ
        ITR-&gt;&gt;ITR: æ ‡è®°çŠ¶æ€ä¸ºRUNNING
    end
    
    Note over IC,Python: æ¨ç†æ‰§è¡Œä¸­...
    
    IC-&gt;&gt;ITR: stop()
    ITR-&gt;&gt;Python: destroyForcibly()
    Python--&gt;&gt;ITR: è¿›ç¨‹ç»ˆæ­¢
    ITR-&gt;&gt;PLM: åœæ­¢æ—¥å¿—æ”¶é›†
</code></pre>
<hr/>
<h3 data-id="heading-8">1.1 æ¨¡å—å®šä½ä¸åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-9">æ€»ä½“å®šä½</h4>
<p><strong>GeaFlow-Infer</strong> æ˜¯ Apache GeaFlow åˆ†å¸ƒå¼å›¾è®¡ç®—å¼•æ“ä¸­ä¸“é—¨ç”¨äº <strong>ML æ¨ç†åŠ é€Ÿ</strong> çš„æ¨¡å—ã€‚å®ƒè§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•åœ¨é«˜æ€§èƒ½åˆ†å¸ƒå¼å›¾è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œé«˜æ•ˆåœ°é›†æˆæœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œå®æ—¶æ¨ç†</strong>ã€‚</p>
<p>ä»æ¶æ„çš„è§’åº¦çœ‹ï¼Œgeaflow-infer å……å½“äº† <strong>Java å›¾è®¡ç®—å¼•æ“</strong> ä¸ <strong>Python ML ç”Ÿæ€</strong> ä¹‹é—´çš„"æ¡¥æ¢"ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ï¼š</p>
<ol>
<li>åœ¨ GeaFlow çš„åˆ†å¸ƒå¼å›¾è®¡ç®—æ¡†æ¶ä¸­ï¼Œä½¿ç”¨ Python çš„å¼ºå¤§ ML åº“ï¼ˆTensorFlowã€PyTorchã€Sklearn ç­‰ï¼‰</li>
<li>ä»¥æœ€å°çš„æ€§èƒ½å¼€é”€è¿›è¡Œæ¨¡å‹æ¨ç†</li>
<li>å®ç°å›¾è®¡ç®—ä¸ ML æ¨ç†çš„æ— ç¼èåˆ</li>
</ol>
<h4 data-id="heading-10">åº”ç”¨åœºæ™¯</h4>
<h5 data-id="heading-11">åœºæ™¯ 1ï¼šçŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“é“¾æ¥ï¼ˆEntity Linkingï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·æŸ¥è¯¢: <span class="hljs-string">"è‹¹æœå…¬å¸çš„CEOæ˜¯è°ï¼Ÿ"</span>
             â†“
[å›¾è®¡ç®—] åœ¨çŸ¥è¯†å›¾è°±ä¸­æŸ¥æ‰¾<span class="hljs-string">"è‹¹æœ"</span>ç›¸å…³å®ä½“
             â†“
[æ¨ç†å±‚] ä½¿ç”¨ NLP æ¨¡å‹åŒºåˆ†<span class="hljs-string">"è‹¹æœ"</span>ï¼ˆå…¬å¸ï¼‰vs <span class="hljs-string">"è‹¹æœ"</span>ï¼ˆæ°´æœï¼‰
             â†“
[è¿”å›ç»“æœ] å‡†ç¡®çš„å®ä½“é“¾æ¥ç»“æœ
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ geaflow-inferï¼Ÿ</strong></p>
<ul>
<li>çŸ¥è¯†å›¾è°±æœ¬èº«æ•°æ®åºå¤§ï¼ˆå¯èƒ½åŒ…å«æ•°åäº¿ä¸ªå®ä½“ï¼‰ï¼Œå•çº¯çš„å›¾éå†å¯èƒ½è¿”å›å¤šä¸ªå€™é€‰å®ä½“</li>
<li>éœ€è¦ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹æ¥è®¡ç®—ç›¸ä¼¼åº¦ï¼Œåˆ¤æ–­æœ€ä½³åŒ¹é…</li>
<li>geaflow-infer å¯ä»¥åœ¨å›¾è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¹é‡å¯¹å€™é€‰å®ä½“è¿›è¡Œ embedding è®¡ç®—å’Œç›¸ä¼¼åº¦æ¯”å¯¹</li>
</ul>
<h5 data-id="heading-12">åœºæ™¯ 2ï¼šç¤¾äº¤ç½‘ç»œä¸­çš„æ¨èç³»ç»Ÿ</h5>
<pre><code class="hljs language-less" lang="less">ç”¨æˆ·<span class="hljs-selector-tag">A</span>çš„å›¾é‚»åŸŸ:
    <span class="hljs-selector-tag">-</span> ç²‰ä¸åˆ—è¡¨ï¼ˆä¸‡çº§åˆ«ï¼‰
    <span class="hljs-selector-tag">-</span> å…´è¶£æ ‡ç­¾å…³ç³»ï¼ˆç™¾ä¸‡çº§åˆ«ï¼‰
             â†“
<span class="hljs-selector-attr">[å›¾è®¡ç®—]</span> åŸºäº <span class="hljs-selector-tag">PageRank</span> ç®—æ³•è®¡ç®—å½±å“åŠ› 
             â†“
<span class="hljs-selector-attr">[æ¨ç†å±‚]</span> ä½¿ç”¨ååŒè¿‡æ»¤ + æ·±åº¦å­¦ä¹ æ¨¡å‹è¯„åˆ†
             â†“
<span class="hljs-selector-attr">[è¿”å›ç»“æœ]</span> <span class="hljs-selector-tag">Top-K</span> ä¸ªæ€§åŒ–æ¨èåˆ—è¡¨
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ geaflow-inferï¼Ÿ</strong></p>
<ul>
<li>æ¨èéœ€è¦é€šè¿‡å¤æ‚çš„å›¾éå†ï¼ˆå¤šè·³å…³ç³»ï¼‰è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li>ä¹‹ååŸºäºä¸Šä¸‹æ–‡ç”¨ ML æ¨¡å‹è¿›è¡Œè¯„åˆ†</li>
<li>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œé¢‘ç¹è°ƒç”¨ Python æ¨ç†æœåŠ¡æˆä¸ºæ€§èƒ½ç“¶é¢ˆ</li>
<li>geaflow-infer æä¾›è¿›ç¨‹çº§åˆ«çš„éš”ç¦»å’Œå…±äº«å†…å­˜åŠ é€Ÿï¼Œé¿å…é¢‘ç¹çš„ç½‘ç»œè°ƒç”¨</li>
</ul>
<h5 data-id="heading-13">åœºæ™¯ 3ï¼šé‡‘èé£é™©æ§åˆ¶ä¸­çš„åæ¬ºè¯ˆ</h5>
<pre><code class="hljs language-css" lang="css">äº¤æ˜“äº‹ä»¶ï¼šç”¨æˆ·<span class="hljs-selector-tag">A</span>å‘ç”¨æˆ·<span class="hljs-selector-tag">B</span>è½¬è´¦ Â¥<span class="hljs-number">100</span>,<span class="hljs-number">000</span>
             â†“
<span class="hljs-selector-attr">[å›¾è®¡ç®—]</span> è¿½è¸ªå…³è”çš„è½¬è´¦é“¾è·¯ã€è¯†åˆ«å¼‚å¸¸å­å›¾
             â†“
<span class="hljs-selector-attr">[æ¨ç†å±‚]</span> ä½¿ç”¨ GNN æ¨¡å‹è®¡ç®—é£é™©åˆ†æ•°
             â†“
<span class="hljs-selector-attr">[å†³ç­–å±‚]</span> é£é™©åˆ¤å®šï¼šæ˜¯å¦å†»ç»“è´¦æˆ·
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ geaflow-inferï¼Ÿ</strong></p>
<ul>
<li>åæ¬ºè¯ˆéœ€è¦å®æ—¶å¤„ç†ï¼ˆæ¯«ç§’çº§å»¶è¿Ÿè¦æ±‚ï¼‰</li>
<li>éœ€è¦è·å–å®Œæ•´çš„å…³è”å…³ç³»å›¾ï¼ˆå¤šå±‚æ¬¡çš„äº¤æ˜“ç½‘ç»œï¼‰</li>
<li>Python GNN æ¨¡å‹æä¾›æ›´å¼ºçš„ç‰¹å¾å­¦ä¹ èƒ½åŠ›</li>
<li>geaflow-infer é€šè¿‡å…±äº«å†…å­˜å’Œæ— é”é˜Ÿåˆ—ï¼Œå®ç°é›¶æ‹·è´æ•°æ®äº¤æ¢ï¼Œæ˜¾è‘—é™ä½å»¶è¿Ÿ</li>
</ul>
<h4 data-id="heading-14">æ ¸å¿ƒä»·å€¼ä¸»å¼ </h4>






























<table><thead><tr><th>ç»´åº¦</th><th>ä¼ ç»Ÿæ–¹æ¡ˆ</th><th>GeaFlow-Infer</th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>Python RPC è°ƒç”¨ï¼šæ¯«ç§’çº§å»¶è¿Ÿ</td><td>å…±äº«å†…å­˜ + æ— é”é˜Ÿåˆ—ï¼šå¾®ç§’çº§å»¶è¿Ÿ</td></tr><tr><td><strong>åå</strong></td><td>å•æœºå•è¿›ç¨‹ï¼šæœ‰é™</td><td>å¤šè¿›ç¨‹éš”ç¦»ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸</td></tr><tr><td><strong>æ˜“ç”¨</strong></td><td>éœ€è¦ç»´æŠ¤ Web Service</td><td>å†…åµŒåœ¨ GeaFlow ä¸­ï¼Œæ— éœ€é¢å¤–åŸºç¡€è®¾æ–½</td></tr><tr><td><strong>å¯é </strong></td><td>ç½‘ç»œè¶…æ—¶ã€è¿›ç¨‹å´©æºƒé£é™©</td><td>æœ¬åœ°è¿›ç¨‹ç®¡ç†ã€è‡ªåŠ¨æ¢å¤æœºåˆ¶</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-15">1.2 æ ¸å¿ƒåŠŸèƒ½æ¦‚è¿°</h3>
<p>ä»åŠŸèƒ½çš„è§’åº¦ï¼Œgeaflow-infer ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<h4 data-id="heading-16">æ€»ä½“åŠŸèƒ½æ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·åº”ç”¨å±‚ (User App)                     â”‚
â”‚                     InferContext API                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç¯å¢ƒç®¡ç†å±‚ (Environment Management)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚InferEnvironment  â”‚  â”‚InferDependencyManager        â”‚     â”‚
â”‚  â”‚Manager           â”‚  â”‚  â€¢ ä¾èµ–æ–‡ä»¶ç®¡ç†              â”‚     â”‚
â”‚  â”‚  â€¢ Singleton     â”‚  â”‚  â€¢ Shellè„šæœ¬æ‰§è¡Œ             â”‚     â”‚
â”‚  â”‚  â€¢ è™šæ‹Ÿç¯å¢ƒåˆå§‹åŒ– â”‚  â”‚  â€¢ Condaç¯å¢ƒé…ç½®             â”‚     â”‚
â”‚  â”‚  â€¢ æ–‡ä»¶é”æœºåˆ¶    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä»»åŠ¡è¿è¡Œå±‚ (Task Execution)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚InferTaskRunImpl   â”‚  â”‚ProcessLoggerManager          â”‚     â”‚
â”‚  â”‚  â€¢ è¿›ç¨‹å¯åŠ¨      â”‚  â”‚  â€¢ Stdout/Stderr æ•è·        â”‚     â”‚
â”‚  â”‚  â€¢ ç¯å¢ƒå˜é‡é…ç½®  â”‚  â”‚  â€¢ Slf4j é›†æˆ                â”‚     â”‚
â”‚  â”‚  â€¢ è¶…æ—¶æ§åˆ¶      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ•°æ®äº¤æ¢å±‚ (Data Exchange)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         InferDataBridgeImpl                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ DataWriter     â”‚  â”‚ DataReader     â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ ç¼–ç         â”‚  â”‚  â€¢ è§£ç         â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ å†™å…¥å†…å­˜    â”‚  â”‚  â€¢ è¯»å–å†…å­˜    â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚          â†“                    â†‘                      â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”‚
â”‚  â”‚     â”‚  DataExchangeQueue      â”‚                     â”‚   â”‚
â”‚  â”‚     â”‚   (å…±äº«å†…å­˜é˜Ÿåˆ—)         â”‚                     â”‚   â”‚
â”‚  â”‚     â”‚  â€¢ æ— é”ç®—æ³•              â”‚                     â”‚   â”‚
â”‚  â”‚     â”‚  â€¢ å†…å­˜æ˜ å°„              â”‚                     â”‚   â”‚
â”‚  â”‚     â”‚  â€¢ æŒ‡é’ˆç®¡ç†              â”‚                     â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åºåˆ—åŒ–å±‚ (Serialization)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚Pickler           â”‚  â”‚Unpickler                     â”‚     â”‚
â”‚  â”‚  â€¢ Javaâ†’Pickle   â”‚  â”‚  â€¢ Pickleâ†’Python             â”‚     â”‚
â”‚  â”‚  â€¢ OpCodeç”Ÿæˆ    â”‚  â”‚  â€¢ å¯¹è±¡æ„é€                   â”‚     â”‚
â”‚  â”‚  â€¢ é€’å½’æ·±åº¦æ§åˆ¶  â”‚  â”‚  â€¢ ç±»å‹æ˜ å°„                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Pythonè¿›ç¨‹ (Python Process)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  infer_server<span class="hljs-selector-class">.py</span>                                     â”‚   â”‚
â”‚  â”‚    â€¢ ç›‘å¬å…±äº«å†…å­˜é˜Ÿåˆ—                                â”‚   â”‚
â”‚  â”‚    â€¢ ååºåˆ—åŒ–è¾“å…¥æ•°æ®                                â”‚   â”‚
â”‚  â”‚    â€¢ æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„ <span class="hljs-attribute">Transform</span> ç±»                    â”‚   â”‚
â”‚  â”‚    â€¢ åºåˆ—åŒ–è¾“å‡ºç»“æœ                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-17">åŠŸèƒ½æ¦‚è§ˆ</h4>
<h5 data-id="heading-18">1. ç¯å¢ƒç®¡ç†å±‚ï¼ˆEnvironment Managementï¼‰</h5>
<p><strong>ç›®çš„</strong>ï¼šä¸º Python æ¨ç†è¿›ç¨‹åˆ›å»ºç‹¬ç«‹ã€éš”ç¦»çš„è¿è¡Œç¯å¢ƒ</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li><code>InferEnvironmentManager</code>ï¼šå•ä¾‹æ¨¡å¼ï¼Œè´Ÿè´£è™šæ‹Ÿç¯å¢ƒçš„åˆå§‹åŒ–ã€‚ä½¿ç”¨æ–‡ä»¶é”æœºåˆ¶ç¡®ä¿å¤šè¿›ç¨‹åœºæ™¯ä¸‹çš„åˆå§‹åŒ–åªæ‰§è¡Œä¸€æ¬¡</li>
<li><code>InferDependencyManager</code>ï¼šè´Ÿè´£ä» JAR åŒ…ä¸­æå–è¿è¡Œæ—¶æ–‡ä»¶ï¼Œæ‰§è¡Œ Shell è„šæœ¬åˆ›å»º Conda è™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>ğŸ”’ <strong>æ–‡ä»¶é”æœºåˆ¶</strong>ï¼šé˜²æ­¢å¤šä¸ª Java è¿›ç¨‹åŒæ—¶åˆå§‹åŒ–åŒä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ</li>
<li>ğŸ”„ <strong>çŠ¶æ€æ ‡è®°æ–‡ä»¶</strong>ï¼šé€šè¿‡ <code>_finish</code> å’Œ <code>_failed</code> æ–‡ä»¶è®°å½•åˆå§‹åŒ–çŠ¶æ€</li>
<li>ğŸ“¦ <strong>ä¾èµ–éš”ç¦»</strong>ï¼šæ¯ä¸ª GeaFlow å®ä¾‹æ‹¥æœ‰ç‹¬ç«‹çš„ Conda è™šæ‹Ÿç¯å¢ƒï¼Œé¿å…ä¾èµ–å†²çª</li>
</ul>
<h5 data-id="heading-19">2. ä»»åŠ¡è¿è¡Œå±‚ï¼ˆTask Executionï¼‰</h5>
<p><strong>ç›®çš„</strong>ï¼šå¯åŠ¨ã€ç®¡ç†å’Œç›‘æ§ Python æ¨ç†è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li><code>InferTaskRunImpl</code>ï¼šé€šè¿‡ <code>ProcessBuilder</code> å¯åŠ¨ Python å­è¿›ç¨‹ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼ˆPATHã€LD_LIBRARY_PATHã€PYTHONPATHï¼‰</li>
<li><code>ProcessLoggerManager</code>ï¼šç›‘å¬è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºï¼Œå¹¶é€šè¿‡ Slf4j æ¡†æ¶é›†æˆåˆ° GeaFlow çš„æ—¥å¿—ç³»ç»Ÿ</li>
</ul>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>â±ï¸ <strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šæ”¯æŒé…ç½®è¿›ç¨‹è¿è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œè¶…æ—¶è‡ªåŠ¨æ€æ­»è¿›ç¨‹</li>
<li>ğŸ“ <strong>æ—¥å¿—æ•è·</strong>ï¼šå®Œæ•´æ•è· Python è¿›ç¨‹çš„è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•</li>
<li>ğŸ›¡ï¸ <strong>é”™è¯¯æ¢å¤</strong>ï¼šè¿›ç¨‹å¼‚å¸¸é€€å‡ºæ—¶ï¼Œè‡ªåŠ¨æ ‡è®°çŠ¶æ€å¹¶æç¤ºç”¨æˆ·</li>
</ul>
<h5 data-id="heading-20">3. æ•°æ®äº¤æ¢å±‚ï¼ˆData Exchangeï¼‰</h5>
<p><strong>ç›®çš„</strong>ï¼šåœ¨ Java å’Œ Python è¿›ç¨‹ä¹‹é—´é«˜æ•ˆåœ°ä¼ è¾“æ•°æ®</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li><code>DataExchangeQueue</code>ï¼šåŸºäº mmapï¼ˆå†…å­˜æ˜ å°„ï¼‰çš„å…±äº«å†…å­˜é˜Ÿåˆ—ï¼Œå®ç°äº†æ— é”ç®—æ³•</li>
<li><code>InferDataWriter</code>ï¼šå°† Java å¯¹è±¡åºåˆ—åŒ–åå†™å…¥å…±äº«å†…å­˜</li>
<li><code>InferDataReader</code>ï¼šä»å…±äº«å†…å­˜è¯»å–å­—èŠ‚æµï¼Œäº¤ç»™è§£åºåˆ—åŒ–å™¨å¤„ç†</li>
</ul>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>é›¶æ‹·è´</strong>ï¼šåˆ©ç”¨å†…å­˜æ˜ å°„ï¼Œé¿å…æ•°æ®åœ¨è¿›ç¨‹é—´çš„å¤åˆ¶</li>
<li><strong>æ— é”è®¾è®¡</strong>ï¼šä½¿ç”¨ <code>sun.misc.Unsafe</code> å’Œå†…å­˜å±éšœï¼Œå®ç°é«˜æ€§èƒ½å¹¶å‘è®¿é—®</li>
<li><strong>å­—èŠ‚åºå¤„ç†</strong>ï¼šç»Ÿä¸€ä½¿ç”¨ Little Endianï¼Œé¿å…å­—èŠ‚åºè½¬æ¢çš„å¼€é”€</li>
</ul>
<h5 data-id="heading-21">4. åºåˆ—åŒ–å±‚ï¼ˆSerializationï¼‰</h5>
<p><strong>ç›®çš„</strong>ï¼šå®ç° Java å¯¹è±¡ä¸ Python å¯¹è±¡ä¹‹é—´çš„åŒå‘è½¬æ¢</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li><code>Pickler</code>ï¼šJava å®ç°çš„ Pickle åºåˆ—åŒ–å™¨ï¼Œç”Ÿæˆ Python Pickle æ ¼å¼çš„å­—èŠ‚æµ</li>
<li><code>Unpickler</code>ï¼šè§£æ Pickle æ ¼å¼çš„å­—èŠ‚æµï¼Œæ„å»º Java å¯¹è±¡</li>
</ul>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>Pickle åè®®</strong>ï¼šå®Œæ•´å®ç° Python Pickle Protocol v2ï¼Œå…¼å®¹ Python 3</li>
<li><strong>è·¨è¯­è¨€æ˜ å°„</strong>ï¼šå¤„ç† Java çš„åŸºæœ¬ç±»å‹ã€é›†åˆç±»å‹ã€è‡ªå®šä¹‰ç±»å‹åˆ° Python çš„æ˜ å°„</li>
<li><strong>è‡ªå®šä¹‰æ‰©å±•</strong>ï¼šæ”¯æŒç”¨æˆ·æ³¨å†Œè‡ªå®šä¹‰çš„åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨</li>
</ul>
<hr/>
<h3 data-id="heading-22">1.3 æ¨¡å—ä¾èµ–å…³ç³»åˆ†æ</h3>
<h4 data-id="heading-23">ç›´æ¥ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- geaflow-common æä¾›åŸºç¡€å·¥å…·ç±» --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.geaflow<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>geaflow-common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- guava æä¾› Joinerã€Preconditions ç­‰å·¥å…· --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é˜¿é‡Œäº‘ OSS ä¾èµ–ï¼ˆç”¨äºæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun.oss<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- JCTools æä¾›é«˜æ€§èƒ½çš„å¹¶å‘æ•°æ®ç»“æ„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jctools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jctools-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- geaflow-file-common æä¾›æ–‡ä»¶æ“ä½œå·¥å…· --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.geaflow<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>geaflow-file-common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-24">ä¾èµ–å…³ç³»å›¾</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      geaflow-infer æ¨¡å—                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â†“       â†“       â†“           â†“          â†“
    â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚com.â”‚ â”‚googleâ”‚ â”‚alibabaâ”‚ â”‚jctoolsâ”‚ â”‚geaflowâ”‚
    â”‚aliyunâ”‚ â”‚guavaâ”‚ â”‚oss    â”‚ â”‚       â”‚ â”‚file   â”‚
    â”‚oss  â”‚ â”‚     â”‚ â”‚       â”‚ â”‚       â”‚ â”‚common â”‚
    â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
       â”‚       â”‚       â”‚           â”‚          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  geaflow-common         â”‚
       â”‚  (åŸºç¡€å·¥å…·ç±»åº“)          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-25">æ ¸å¿ƒä¾èµ–è¯´æ˜</h4>



































<table><thead><tr><th>ä¾èµ–åº“</th><th>ç”¨é€”</th><th>å…³é”®ç±»</th></tr></thead><tbody><tr><td><strong>geaflow-common</strong></td><td>å¼‚å¸¸ã€æ—¥å¿—ã€é…ç½®ç®¡ç†</td><td><code>GeaflowRuntimeException</code>, <code>Configuration</code></td></tr><tr><td><strong>guava</strong></td><td>é›†åˆæ“ä½œã€å­—ç¬¦ä¸²å¤„ç†</td><td><code>Joiner</code>, <code>Lists</code>, <code>Preconditions</code></td></tr><tr><td><strong>jctools-core</strong></td><td>é«˜æ€§èƒ½æ— é”é˜Ÿåˆ—åŸºç¡€</td><td>ä½œä¸ºå‚è€ƒå®ç°</td></tr><tr><td><strong>geaflow-file-common</strong></td><td>æ–‡ä»¶æ“ä½œå·¥å…·</td><td>æ–‡ä»¶é”ã€æ–‡ä»¶å¤åˆ¶ã€JAR èµ„æºæå–</td></tr><tr><td><strong>aliyun-sdk-oss</strong></td><td>äº‘å­˜å‚¨é›†æˆ</td><td>æ”¯æŒå¤§è§„æ¨¡ä¾èµ–æ–‡ä»¶çš„äº‘å­˜å‚¨</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-26">1.4 ç›®å½•ç»“æ„è§£æ</h3>
<h4 data-id="heading-27">æºç ç›®å½•æ ‘</h4>
<pre><code class="hljs language-bash" lang="bash">geaflow/geaflow-infer/
â”œâ”€â”€ src/main/java/org/apache/geaflow/infer/
â”‚   â”œâ”€â”€ InferContext.java                    <span class="hljs-comment"># é—¨é¢ç±»ï¼Œç”¨æˆ·ä¸»å…¥å£</span>
â”‚   â”œâ”€â”€ InferEnvironmentManager.java         <span class="hljs-comment"># ç¯å¢ƒç®¡ç†å™¨ï¼ˆå•ä¾‹ï¼‰</span>
â”‚   â”œâ”€â”€ InferDependencyManager.java          <span class="hljs-comment"># ä¾èµ–ç®¡ç†å™¨</span>
â”‚   â”œâ”€â”€ InferEnvironmentContext.java         <span class="hljs-comment"># ç¯å¢ƒä¸Šä¸‹æ–‡</span>
â”‚   â”œâ”€â”€ InferTaskRun.java                    <span class="hljs-comment"># ä»»åŠ¡è¿è¡Œæ¥å£</span>
â”‚   â”œâ”€â”€ InferTaskRunImpl.java                 <span class="hljs-comment"># ä»»åŠ¡è¿è¡Œå®ç°</span>
â”‚   â”œâ”€â”€ InferTaskStatus.java                 <span class="hljs-comment"># ä»»åŠ¡çŠ¶æ€æšä¸¾</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ exchange/                            <span class="hljs-comment"># æ•°æ®äº¤æ¢æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ DataExchangeQueue.java           <span class="hljs-comment"># å…±äº«å†…å­˜é˜Ÿåˆ—</span>
â”‚   â”‚   â”œâ”€â”€ DataExchangeContext.java         <span class="hljs-comment"># æ•°æ®äº¤æ¢ä¸Šä¸‹æ–‡</span>
â”‚   â”‚   â”œâ”€â”€ InferDataWriter.java             <span class="hljs-comment"># æ•°æ®å†™å…¥å™¨</span>
â”‚   â”‚   â”œâ”€â”€ InferDataReader.java             <span class="hljs-comment"># æ•°æ®è¯»å–å™¨</span>
â”‚   â”‚   â”œâ”€â”€ DataQueueInputStream.java        <span class="hljs-comment"># é˜Ÿåˆ—è¾“å…¥æµ</span>
â”‚   â”‚   â”œâ”€â”€ DataQueueOutputStream.java       <span class="hljs-comment"># é˜Ÿåˆ—è¾“å‡ºæµ</span>
â”‚   â”‚   â”œâ”€â”€ IDataBridge.java                 <span class="hljs-comment"># æ•°æ®æ¡¥æ¥æ¥å£</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ impl/
â”‚   â”‚   â”‚   â””â”€â”€ InferDataBridgeImpl.java      <span class="hljs-comment"># æ•°æ®æ¡¥æ¥å®ç°</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ serialize/                       <span class="hljs-comment"># åºåˆ—åŒ–æ¨¡å—</span>
â”‚   â”‚       â”œâ”€â”€ Pickler.java                 <span class="hljs-comment"># Pickle åºåˆ—åŒ–å™¨</span>
â”‚   â”‚       â”œâ”€â”€ Unpickler.java               <span class="hljs-comment"># Pickle ååºåˆ—åŒ–å™¨</span>
â”‚   â”‚       â”œâ”€â”€ UnpickleStack.java           <span class="hljs-comment"># ååºåˆ—åŒ–æ ˆ</span>
â”‚   â”‚       â”œâ”€â”€ Opcodes.java                 <span class="hljs-comment"># Pickle OpCode å®šä¹‰</span>
â”‚   â”‚       â”œâ”€â”€ IObjectPickler.java          <span class="hljs-comment"># å¯¹è±¡åºåˆ—åŒ–æ¥å£</span>
â”‚   â”‚       â”œâ”€â”€ IObjectConstructor.java      <span class="hljs-comment"># å¯¹è±¡æ„é€ æ¥å£</span>
â”‚   â”‚       â”œâ”€â”€ IEncoder.java                <span class="hljs-comment"># ç¼–ç å™¨æ¥å£</span>
â”‚   â”‚       â”œâ”€â”€ IDecoder.java                <span class="hljs-comment"># è§£ç å™¨æ¥å£</span>
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ impl/
â”‚   â”‚       â”‚   â”œâ”€â”€ DataExchangeEnCoderImpl.java      <span class="hljs-comment"># ç¼–ç å®ç°</span>
â”‚   â”‚       â”‚   â”œâ”€â”€ DataExchangeDeCoderImpl.java      <span class="hljs-comment"># è§£ç å®ç°</span>
â”‚   â”‚       â”‚   â”œâ”€â”€ ComplexNumberConstructor.java    <span class="hljs-comment"># å¤æ•°æ„é€ å™¨</span>
â”‚   â”‚       â”‚   â”œâ”€â”€ ArrayConstructor.java            <span class="hljs-comment"># æ•°ç»„æ„é€ å™¨</span>
â”‚   â”‚       â”‚   â””â”€â”€ ByteArrayConstructor.java        <span class="hljs-comment"># å­—èŠ‚æ•°ç»„æ„é€ å™¨</span>
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ util/
â”‚   â”‚           â”œâ”€â”€ BinaryUtils.java         <span class="hljs-comment"># äºŒè¿›åˆ¶å¤„ç†å·¥å…·</span>
â”‚   â”‚           â”œâ”€â”€ PickleUtils.java         <span class="hljs-comment"># Pickle å·¥å…·ç±»</span>
â”‚   â”‚           â””â”€â”€ UnpickleUtils.java       <span class="hljs-comment"># åPickle å·¥å…·ç±»</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ <span class="hljs-built_in">log</span>/                                 <span class="hljs-comment"># æ—¥å¿—æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ ProcessLoggerManager.java        <span class="hljs-comment"># è¿›ç¨‹æ—¥å¿—ç®¡ç†å™¨</span>
â”‚   â”‚   â””â”€â”€ Slf4JProcessOutputConsumer.java  <span class="hljs-comment"># Slf4j æ—¥å¿—æ¶ˆè´¹è€…</span>
â”‚   â”‚
â”‚   â””â”€â”€ util/                                <span class="hljs-comment"># å·¥å…·æ¨¡å—</span>
â”‚       â”œâ”€â”€ InferFileUtils.java              <span class="hljs-comment"># æ–‡ä»¶æ“ä½œå·¥å…·</span>
â”‚       â””â”€â”€ PortableJvmInfo.java             <span class="hljs-comment"># JVM ä¿¡æ¯å·¥å…·</span>
â”‚
â””â”€â”€ src/test/java/org/apache/geaflow/infer/ <span class="hljs-comment"># æµ‹è¯•ä»£ç </span>
    â”œâ”€â”€ InferContextTest.java                <span class="hljs-comment"># å®Œæ•´æµç¨‹æµ‹è¯•</span>
    â”œâ”€â”€ DataExchangeTest.java                <span class="hljs-comment"># æ•°æ®äº¤æ¢æµ‹è¯•</span>
    â””â”€â”€ SerializationTest.java               <span class="hljs-comment"># åºåˆ—åŒ–æµ‹è¯•</span>
</code></pre>
<h4 data-id="heading-28">æ¨¡å—åˆ†å±‚è¯´æ˜</h4>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç”¨æˆ· <span class="hljs-variable constant_">API</span> å±‚                              â”‚
â”‚      <span class="hljs-title class_">InferContext</span>                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                    â–²
         â”‚                    â”‚
         â”‚ æ§åˆ¶æµ              â”‚ æ•°æ®æµ
         â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç¯ å¢ƒ / ä»» åŠ¡ ç®¡ ç† å±‚                    â”‚
â”‚  <span class="hljs-title class_">InferEnv</span>* <span class="hljs-regexp">/ InferTask* /</span> <span class="hljs-title class_">Log</span>  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ•° æ® äº¤ æ¢ &amp; åº åˆ— åŒ– å±‚                 â”‚
â”‚  <span class="hljs-title class_">DataExchange</span>* / <span class="hljs-title class_">Pickle</span>*         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
         <span class="hljs-title class_">Python</span> è¿›ç¨‹
        (infer_server.<span class="hljs-property">py</span>)
</code></pre>
<hr/>
<h3 data-id="heading-29">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgeaflow.apache.org%2F" target="_blank" title="https://geaflow.apache.org/" ref="nofollow noopener noreferrer">GeaFlow å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.python.org%2F3%2Flibrary%2Fpickle.html" target="_blank" title="https://docs.python.org/3/library/pickle.html" ref="nofollow noopener noreferrer">Python Pickle åè®®</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fparkour%2Fp%2F8333803.html" target="_blank" title="https://www.cnblogs.com/parkour/p/8333803.html" ref="nofollow noopener noreferrer">Java Unsafe ç”¨æ³•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fman7.org%2Flinux%2Fman-pages%2Fman2%2Fmmap.2.html" target="_blank" title="https://man7.org/linux/man-pages/man2/mmap.2.html" ref="nofollow noopener noreferrer">Linux å…±äº«å†…å­˜ä¸ mmap</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒCADåˆ¶å›¾ä¸€æ ·ï¼Œä½¿ç”¨Javaç»˜å›¾æ ‡æ³¨å›¾ç‰‡çš„ç‘•ç–µ]]></title>    <link>https://juejin.cn/post/7576165316250681353</link>    <guid>https://juejin.cn/post/7576165316250681353</guid>    <pubDate>2025-11-25T01:20:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576165316250681353" data-draft-id="7576158801972592686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒCADåˆ¶å›¾ä¸€æ ·ï¼Œä½¿ç”¨Javaç»˜å›¾æ ‡æ³¨å›¾ç‰‡çš„ç‘•ç–µ"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T01:20:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒCADåˆ¶å›¾ä¸€æ ·ï¼Œä½¿ç”¨Javaç»˜å›¾æ ‡æ³¨å›¾ç‰‡çš„ç‘•ç–µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:20:33.000Z" title="Tue Nov 25 2025 01:20:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a2fe0fdf5e148b1a6b967756ac52350~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764638432&amp;x-signature=1PnMmfXpJkxeyErFB9EszDfBe%2F8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>è€ç¨‹åºå‘˜å·²ç»åšè¿‡ä½¿ç”¨<code>Java</code>è‡ªå·±ç¼–å†™å›¾ç‰‡éªŒè¯ç çš„é¡¹ç›®ï¼Œç„¶è€Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œä¸‰æ–¹åº“çš„å¢å¼ºã€‚æ»‘åŠ¨éªŒè¯ç ã€æ—‹è½¬éªŒè¯ç ç­‰æ›´åŠ æ–¹ä¾¿çš„éªŒè¯ç å‡ºç°ï¼Œé€æ¸å–ä»£äº†ä¼ ç»Ÿçš„éªŒè¯ç ã€‚å°¤å…¶å½“å‰12306å›¾ç‰‡éªŒè¯ç ä¸ºäº†é˜²æ­¢é»„ç‰›åˆ·ç¥¨ï¼Œçƒ­æœä¸€ä¸ªæ¥ä¸€ä¸ª......</p>
<p>å½“ç„¶ä¹Ÿä¸ä¹æœ‰å¾ˆå¤šæˆç†Ÿçš„ä¼ ç»ŸéªŒè¯ç å·¥å…·ï¼Œå·²ç»å¾ˆå°‘è‡ªå·±å»å†™éªŒè¯ç äº†ï¼Œé‡å¤é€ è½®å­å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚éªŒè¯ç å¯èƒ½ä¸éœ€è¦äº†å†™äº†ï¼Œä½†æ˜¯è¿™é¡¹ç”»å›¾çš„æŠ€æœ¯ä¾ç„¶æœ‰ä»–çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ä»Šå¤©çš„éœ€æ±‚ï¼</p>
<h2 data-id="heading-1">02 å¥‘æœº</h2>
<p>è¿™å‡ å¤©ä¸€ç›´å¿™ç€ç´§æ€¥é¡¹ç›®ï¼Œéƒ½æ²¡æœ‰æ—¶é—´æ›´æ–‡ã€‚è¿™æ®µæ—¶é—´å°±æ˜¯ç ”ç©¶äº†ç”»å›¾è¿™ä¸ªç©æ„ï¼Œä¸»è¦ç”¨æ¥æ ‡è®°å›¾ç‰‡ä¸Šçš„ç‘•ç–µç‚¹ã€‚ç‘•ç–µç‚¹è¿‡å¤šï¼Œæ ‡æ³¨çš„å†…å®¹è¿˜ä¸èƒ½é‡å ï¼ŒçœŸå®è®©äººæƒ³ç ´äº†å¤´ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹æ ‡æ³¨çš„ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65ad7a5da7524fd2aab8ca59b5e90c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764638432&amp;x-signature=eS2uUWf3H4beXX8xgPhMiDePWkk%3D" alt="" loading="lazy"/></p>
<p>æ€ä¹ˆæ¥ç”»å‡ºè¿™æ ·çš„æ ‡æ³¨å›¾å‘¢ï¼Ÿæˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£ã€‚</p>
<h2 data-id="heading-2">03 æ­¥éª¤æ‹†è§£</h2>
<p>æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„<code>API</code>ç±»ï¼š</p>
<ul>
<li><code>BufferedImage</code></li>
<li><code>Graphics2D</code></li>
<li><code>Font</code></li>
<li><code>FontMetrics</code></li>
</ul>
<p>å…¶å®è¯´ç™½äº†å°±æ˜¯æ•°å­¦é—®é¢˜ï¼Œä¸‰è§’å‡½æ•°é—®é¢˜ã€‚</p>
<h3 data-id="heading-3">3.1 ç‘•ç–µç‚¹èŠ±åœ†</h3>
<p>ä¸»è¦ç”¨æ¥æ ‡æ³¨ç›®æ ‡ç‚¹çš„ä½ç½®ï¼Œä»¥åæ ‡ç‚¹ä¸ºåœ†å¿ƒï¼Œç”»ä¸€ä¸ªé€‚åˆåŠå¾„çš„åœ†ã€‚æˆ‘çš„å›¾ç‰‡å°ºå¯¸æ˜¯1600*1200ï¼Œæˆ‘å–çš„åŠå¾„æ˜¯15ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BufferedImage</span> <span class="hljs-variable">image</span> <span class="hljs-operator">=</span> ImageIO.read();
<span class="hljs-type">Graphics2D</span> <span class="hljs-variable">g2d</span> <span class="hljs-operator">=</span> image.createGraphics();

<span class="hljs-comment">// è®¾ç½®ç”»ç¬”é¢œè‰²</span>
g2d.setColor(Color.ORANGE);
<span class="hljs-comment">// ä»¥ç›®æ ‡ç‚¹ï¼ˆx,yï¼‰ä¸ºåœ†å¿ƒç”»ä¸€ä¸ªæŒ‡å®šåŠå¾„çš„åœ†é¥¼å¡«å……</span>
g2d.fillOval(x - radius, y - radius, radius * <span class="hljs-number">2</span>, radius * <span class="hljs-number">2</span>);
</code></pre>
<p><code>fillOval()</code>ç”¨æ¥å¡«å……å›¾å½¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4ceb28e34f485a8de0bd0b24e6ca42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764638432&amp;x-signature=UkAsQsrIxtx%2B3wQYr5YCikLxHi8%3D" alt="" loading="lazy"/></p>
<p>å‚æ•°ä¸ºå·¦ä¸Šè§’çš„åæ ‡ï¼Œæ‰€ä»¥è¿™é‡Œéƒ½è¦å‡å»åŠå¾„æ‰æ˜¯ç”»ç¬”è½ç¬”çš„åœ°æ–¹ã€‚å®½åº¦å’Œé«˜åº¦åˆ†åˆ«æŒ‡ç›´å¾„ã€‚</p>
<h3 data-id="heading-4">3.2 ç®­å¤´è¾…çº¿</h3>
<p>å‰‘æ–—åˆ†ä¸ºä¸¤ç§ï¼šå¸¦è¾…åŠ©çº¿å’Œä¸å¸¦è¾…åŠ©çº¿ã€‚æˆ‘ä»¬ä»¥å¸¦è¾…åŠ©çº¿çš„ä¸ºä¾‹ã€‚</p>
<p>å¸¦è¾…åŠ©çº¿çš„ç®­å¤´å¦‚å›¾ä¸Šçš„ç‘•ç–µç‚¹02ã€‚ç®­å¤´å…¶å®ä¹Ÿæ˜¯çº¿ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šç®­å¤´çš„è§’åº¦å¤§å°ï¼Œè€Œç®­å¤´çš„æ–¹å‘å–å†³äºè¾…åŠ©çº¿çš„æ–¹å‘ã€‚ä¸ºäº†è®¡ç®—çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬è®¾å®šä¸ºçš„è¾…åŠ©çº¿çš„è§’åº¦ä¸º45Â°ï¼Œè¿™æ ·å¯¹åº”çš„Xè½´å’ŒYè½´çš„å€¼éƒ½ç›¸ç­‰ã€‚</p>
<p>ç”»è¾…åŠ©çº¿ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸¤ä¸ªåæ ‡å³å¯ã€‚æ ‡è®°ç‚¹åæ ‡ï¼ˆx,yï¼‰,å‘å³ä¸Šæ–¹45Â°å»¶ä¼¸ï¼Œä½äºç¬¬ä¸€è±¡é™ã€‚å‡å¦‚å»¶ä¼¸çš„è·ç¦»ä¸º<code>x0</code>,é‚£ä¹ˆè¾…åŠ©çº¿ç»ˆç‚¹çš„ä½ç½®ï¼ˆx+x0, y-x0ï¼‰ã€‚Yè½´ä¸ºä»€ä¹ˆè¦å‡ï¼Œæ˜¯å› ä¸ºç”»å¸ƒçš„åæ ‡ï¼ˆ0,0ï¼‰ä½äºå·¦ä¸Šè§’ï¼ŒYè½´æœä¸‹ä¸ºæ­£ã€‚</p>
<p><strong>ç»˜åˆ¶è¾…åŠ©çº¿</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.awt.geom.Line2D.Double(x, y, x+x0, y-x0));
</code></pre>
<p><strong>è®¡ç®—ç®­å¤´çš„åæ ‡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">double</span> <span class="hljs-variable">angle</span> <span class="hljs-operator">=</span> Math.atan2(y1 - y2, x1 - x2);
<span class="hljs-type">double</span> <span class="hljs-variable">x3</span> <span class="hljs-operator">=</span> x1 - arrowSize * Math.cos(angle - Math.PI / <span class="hljs-number">12</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">y3</span> <span class="hljs-operator">=</span> y1 - arrowSize * Math.sin(angle - Math.PI / <span class="hljs-number">12</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">x4</span> <span class="hljs-operator">=</span> x1 - arrowSize * Math.cos(angle + Math.PI / <span class="hljs-number">12</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">y4</span> <span class="hljs-operator">=</span> y1 - arrowSize * Math.sin(angle + Math.PI / <span class="hljs-number">12</span>);
</code></pre>
<p>è¿™é‡Œæ˜¯åˆ©ç”¨ä¸‰è§’å‡½æ•°è®¡ç®—ç®­å¤´çš„ç›¸å¯¹åæ ‡ã€‚<code>arrowSize</code>ç®­å¤´å¤§å°ï¼Œè€Œ<code>Math.PI / 12</code>è¡¨ç¤º15Â°ï¼Œå› ä¸º<code>Math.PI</code>ç­‰äº180Â°ï¼Œè¡¨ç¤ºç®­å¤´ä¸è¾…åŠ©çº¿çš„å¤¹è§’ã€‚</p>
<p><strong>ç»˜åˆ¶ç®­å¤´</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´</span>
g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.awt.geom.Line2D.Double(x1, y1, x3, y3));
g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.awt.geom.Line2D.Double(x1, y1, x4, y4));
</code></pre>
<p><strong>å¡«å……ç®­å¤´</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®­å¤´ä¸‰ä¸ªç‚¹çš„åæ ‡</span>
<span class="hljs-type">Polygon</span> <span class="hljs-variable">arrowHead</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Polygon</span>();
arrowHead.addPoint((<span class="hljs-type">int</span>) x1, (<span class="hljs-type">int</span>) y1);
arrowHead.addPoint((<span class="hljs-type">int</span>) x3, (<span class="hljs-type">int</span>) y3);
arrowHead.addPoint((<span class="hljs-type">int</span>) x4, (<span class="hljs-type">int</span>) y4);
<span class="hljs-comment">// åˆ’çº¿å¡«å……</span>
g2d.fill(arrowHead);
</code></pre>
<h3 data-id="heading-5">3.3 åº•è‰²</h3>
<p>ç»˜åˆ¶å†…å®¹çš„åº•è‰²ï¼Œé˜²æ­¢å›¾ç‰‡é¢œè‰²é€ æˆå¹²æ‰°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ‡æ³¨çš„å†…å®¹å¢åŠ åº•è‰²</span>
g2d.setColor(Color.GRAY);
g2d.fillRect((<span class="hljs-type">int</span>)dx, (<span class="hljs-type">int</span>)dy, Math.abs(contentWidth), fontHeight);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/865ffd61e9ef403784593aae36d805a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764638432&amp;x-signature=Wm6Wp5V6KOnnYVQYwvRgfBNqfcY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¡«å……çŸ©å½¢ï¼Œï¼ˆdx, dyï¼‰ä¾ç„¶æ˜¯å·¦ä¸Šè§’çš„ä½ç½®ã€‚</p>
<h3 data-id="heading-6">3.4 æ ‡æ³¨å†…å®¹</h3>
<p>æ ‡æ³¨å†…å®¹æˆ‘ä»¬ä¹Ÿéœ€è¦ç”»ä¸Šåº•çº¿ï¼Œæˆ‘ä»¬ä»¥è¾…åŠ©çº¿çš„æœ«ç«¯ä½œä¸ºèµ·ç‚¹ï¼ˆx2,y2ï¼‰,<code>contentWidth</code>ä¸ºå†…å®¹çš„å®½åº¦ã€‚</p>
<pre><code class="hljs language-java" lang="java">g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.awt.geom.Line2D.Double(x2, y2, x2 + contentWidth, y2));

g2d.setColor(Color.WHITE);
g2d.setFont(font);
g2d.drawString(content, ltx, lty);
</code></pre>
<p>ï¼ˆltxï¼Œltyï¼‰åŒæ ·ä¸ºå·¦ä¸Šè§’çš„ä½ç½®ã€‚</p>
<h2 data-id="heading-7">04 å®Œæ•´ä»£ç </h2>
<p>è¿™é‡Œçš„ä»£ç æ˜¯æˆ‘å°è£…çš„ä¸€ä¸ªå°å·¥å…·ã€‚é‡Œé¢ç®€å•çš„ç”»å›¾å¯ä»¥å®ç°äº†ï¼Œä½†æ˜¯è¿˜ç¼ºå°‘ç¢°æ’æ£€æµ‹ä»¥åŠä¼˜åŒ–é¿è®©ã€‚å…ˆåˆ†äº«ç»™å¤§å®¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FastDraw</span> {

    <span class="hljs-comment">/** å›¾ç‰‡æº */</span>
    <span class="hljs-keyword">private</span> BufferedImage image;
    <span class="hljs-keyword">private</span> Font font;

    <span class="hljs-comment">/** ç”»å¸ƒ */</span>
    <span class="hljs-keyword">private</span> Graphics2D g2d;
    <span class="hljs-comment">/** ç”»å¸ƒ/è¾¹ç•Œå®½é«˜ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> imageWidth;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> imageHeight;

    <span class="hljs-comment">/** å­—ä½“ä¿¡æ¯å’Œé«˜åº¦ */</span>
    <span class="hljs-keyword">private</span> FontMetrics fontMetrics;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> fontHeight;

    <span class="hljs-comment">/** æ ‡è®°ç‚¹åŠå¾„ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">radius</span> <span class="hljs-operator">=</span> <span class="hljs-number">15</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">FastDraw</span><span class="hljs-params">(BufferedImage image, Font font)</span> {
        Assert.notNull(image, <span class="hljs-string">"image is null"</span>);
        Assert.notNull(font, <span class="hljs-string">"font is null"</span>);

        <span class="hljs-built_in">this</span>.image = image;
        <span class="hljs-built_in">this</span>.font = font;

        <span class="hljs-built_in">this</span>.imageWidth = image.getWidth();
        <span class="hljs-built_in">this</span>.imageHeight = image.getHeight();

        <span class="hljs-built_in">this</span>.g2d = image.createGraphics();
        <span class="hljs-built_in">this</span>.fontMetrics = g2d.getFontMetrics(font);
        <span class="hljs-built_in">this</span>.fontHeight = fontMetrics.getHeight();
    }

    <span class="hljs-comment">/**
     * ç»˜åˆ¶æ ‡æ³¨å†…å®¹ï¼šCallout Content
     *
     * x1, y1 ï¼š èµ·ç‚¹åæ ‡
     * x0 ï¼š è¾…åŠ©æ–œçº¿Xè½´é•¿åº¦
     * content ï¼š æ ‡æ³¨å†…å®¹
     * arrowSize ï¼š ç®­å¤´å¤§å°
     * quadrant ï¼š è±¡é™ï¼ˆé»˜è®¤ç¬¬ä¸€è±¡é™ï¼šé€†æ—¶é’ˆï¼‰
     *
     * è¿”å›å€¼ï¼š è¾…åŠ©çº¿æœ«ç«¯åæ ‡
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawArrow</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y, <span class="hljs-type">double</span> x0, <span class="hljs-type">double</span> arrowSize, String content, <span class="hljs-type">int</span> quadrant)</span> {
        <span class="hljs-type">double</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> initBoundaryX(x);
        <span class="hljs-type">double</span> <span class="hljs-variable">y1</span> <span class="hljs-operator">=</span> initBoundaryY(y);

        <span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´çš„åœ†ç‚¹</span>
        g2d.setColor(Color.ORANGE);
        <span class="hljs-comment">// ä»¥æŸä¼¤ç‚¹ä¸ºä¸­å¿ƒç”»ä¸€ä¸ªradiusä¸ºåŠå¾„çš„åœ†</span>
        g2d.fillOval((<span class="hljs-type">int</span>) x1 - radius, (<span class="hljs-type">int</span>) y1 - radius, radius * <span class="hljs-number">2</span>, radius * <span class="hljs-number">2</span>);

        <span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´ä½¿ç”¨ç™½è‰²</span>
        g2d.setColor(Color.WHITE);
        <span class="hljs-type">int</span> <span class="hljs-variable">contentWidth</span> <span class="hljs-operator">=</span> getWordWidth(content);
        <span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´ç›´çº¿</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">x2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, y2 = <span class="hljs-number">0.0</span>;
        <span class="hljs-comment">// ç»˜åˆ¶æ ‡æ³¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">ltx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">switch</span> (quadrant) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                x2 = x1 + x0;
                y2 = y1 - x0;
                ltx = (<span class="hljs-type">int</span>)x2;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                x2 = x1 - x0;
                y2 = y1 - x0;
                contentWidth = -contentWidth;
                ltx = (<span class="hljs-type">int</span>)x2 + contentWidth;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                x2 = x1 - x0;
                y2 = y1 + x0;
                contentWidth = -contentWidth;
                ltx = (<span class="hljs-type">int</span>)x2 + contentWidth;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                x2 = x1 + x0;
                y2 = y1 + x0;
                ltx = (<span class="hljs-type">int</span>)x2;
        }
        <span class="hljs-comment">// å·¦ä¸Šy:å†…å®¹å‘ä¸Šå­—ä½“é«˜åº¦çš„1/4</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">lty</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) y2 - fontHeight/<span class="hljs-number">4</span>;
        <span class="hljs-comment">// åº•è‰²èµ·ç‚¹åæ ‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> ltx;
        <span class="hljs-type">double</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) y2 - fontHeight;

        <span class="hljs-comment">// ç»˜åˆ¶ç›´çº¿</span>
        g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>(x1, y1, x2, y2));
        <span class="hljs-comment">// è®¡ç®—ç®­å¤´è§’åº¦</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">angle</span> <span class="hljs-operator">=</span> Math.atan2(y1 - y2, x1 - x2);
        <span class="hljs-type">double</span> <span class="hljs-variable">x3</span> <span class="hljs-operator">=</span> x1 - arrowSize * Math.cos(angle - Math.PI / <span class="hljs-number">12</span>);
        <span class="hljs-type">double</span> <span class="hljs-variable">y3</span> <span class="hljs-operator">=</span> y1 - arrowSize * Math.sin(angle - Math.PI / <span class="hljs-number">12</span>);
        <span class="hljs-type">double</span> <span class="hljs-variable">x4</span> <span class="hljs-operator">=</span> x1 - arrowSize * Math.cos(angle + Math.PI / <span class="hljs-number">12</span>);
        <span class="hljs-type">double</span> <span class="hljs-variable">y4</span> <span class="hljs-operator">=</span> y1 - arrowSize * Math.sin(angle + Math.PI / <span class="hljs-number">12</span>);

        <span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´</span>
        g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>(x1, y1, x3, y3));
        g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>(x1, y1, x4, y4));

        <span class="hljs-comment">// åˆ›å»ºç®­å¤´å¤šè¾¹å½¢å¹¶å¡«å……</span>
        <span class="hljs-type">Polygon</span> <span class="hljs-variable">arrowHead</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Polygon</span>();
        arrowHead.addPoint((<span class="hljs-type">int</span>) x1, (<span class="hljs-type">int</span>) y1);
        arrowHead.addPoint((<span class="hljs-type">int</span>) x3, (<span class="hljs-type">int</span>) y3);
        arrowHead.addPoint((<span class="hljs-type">int</span>) x4, (<span class="hljs-type">int</span>) y4);
        g2d.fill(arrowHead);
        g2d.draw(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>(x2, y2, x2 + contentWidth, y2));

        <span class="hljs-comment">// æ ‡æ³¨çš„å†…å®¹å¢åŠ åº•è‰²</span>
        g2d.setColor(Color.GRAY);
        g2d.fillRect((<span class="hljs-type">int</span>)dx, (<span class="hljs-type">int</span>)dy, Math.abs(contentWidth), fontHeight);

        <span class="hljs-comment">// ç»˜åˆ¶æ ‡æ³¨</span>
        g2d.setColor(Color.WHITE);
        g2d.setFont(font);
        g2d.drawString(content, ltx, lty);
    }

    <span class="hljs-comment">/***
     * ç»˜åˆ¶å¹³é“ºå†…å®¹
     *
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawTile</span><span class="hljs-params">(<span class="hljs-type">double</span> x1, <span class="hljs-type">double</span> y1, String content)</span> {
        x1 = initBoundaryX(x1);
        y1 = initBoundaryY(y1);

        <span class="hljs-comment">// ç»˜åˆ¶ç®­å¤´çš„åœ†ç‚¹</span>
        g2d.setColor(Color.ORANGE);
        <span class="hljs-comment">// ä»¥æŸä¼¤ç‚¹ä¸ºä¸­å¿ƒç”»ä¸€ä¸ªradiusä¸ºåŠå¾„çš„åœ†</span>
        g2d.fillOval((<span class="hljs-type">int</span>) x1 - radius, (<span class="hljs-type">int</span>) y1 - radius, radius * <span class="hljs-number">2</span>, radius * <span class="hljs-number">2</span>);

        <span class="hljs-comment">// åº•è‰²åæ ‡</span>
        <span class="hljs-type">int</span>[] x, y;
        <span class="hljs-type">int</span> <span class="hljs-variable">contentWidth</span> <span class="hljs-operator">=</span> getWordWidth(content);
        <span class="hljs-keyword">if</span> (x1 + contentWidth &lt;= imageWidth) {
            <span class="hljs-comment">// æœªè¶…å‡ºè¾¹ç•Œï¼Œç®­å¤´æ–¹å‘æœå·¦â†</span>
            <span class="hljs-comment">// å·¦ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">lux</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 + fontHeight;
            <span class="hljs-type">int</span> <span class="hljs-variable">luy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 - fontHeight / <span class="hljs-number">2</span>;
            <span class="hljs-comment">// å·¦ä¸‹</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">ldx</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 + fontHeight;
            <span class="hljs-type">int</span> <span class="hljs-variable">ldy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 + fontHeight / <span class="hljs-number">2</span>;
            <span class="hljs-comment">// å³ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rux</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 + fontHeight + contentWidth;
            <span class="hljs-type">int</span> <span class="hljs-variable">ruy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 - fontHeight / <span class="hljs-number">2</span>;
            <span class="hljs-comment">// å³ä¸‹</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rdx</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 + fontHeight + contentWidth;
            <span class="hljs-type">int</span> <span class="hljs-variable">rdy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 + fontHeight / <span class="hljs-number">2</span>;

            x = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{(<span class="hljs-type">int</span>) x1, lux, rux, rdx, ldx};
            y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{(<span class="hljs-type">int</span>) y1, luy, ruy, rdy, ldy};
        }<span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è¶…å‡ºè¾¹ç•Œç®­å¤´æœå³â†’</span>
            <span class="hljs-comment">// å·¦ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">lux</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 - fontHeight- contentWidth;
            <span class="hljs-type">int</span> <span class="hljs-variable">luy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 - fontHeight / <span class="hljs-number">2</span>;

            <span class="hljs-comment">// å·¦ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">ldx</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 - fontHeight - contentWidth;
            <span class="hljs-type">int</span> <span class="hljs-variable">ldy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 + fontHeight / <span class="hljs-number">2</span>;

            <span class="hljs-comment">// å·¦ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rux</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 - fontHeight;
            <span class="hljs-type">int</span> <span class="hljs-variable">ruy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 - fontHeight / <span class="hljs-number">2</span>;

            <span class="hljs-comment">// å·¦ä¸Š</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rdx</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)x1 - fontHeight;
            <span class="hljs-type">int</span> <span class="hljs-variable">rdy</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)y1 + fontHeight / <span class="hljs-number">2</span>;
            x = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{lux, rux, (<span class="hljs-type">int</span>) x1, rdx, ldx};
            y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{luy, ruy, (<span class="hljs-type">int</span>) y1, rdy, ldy};
        }
        g2d.setColor(Color.GRAY);
        g2d.fillPolygon(x, y, <span class="hljs-number">5</span>);

        <span class="hljs-comment">// ç»˜åˆ¶å†…å®¹</span>
        g2d.setColor(Color.WHITE);
        g2d.setFont(font);
        g2d.drawString(content, x[<span class="hljs-number">4</span>], y[<span class="hljs-number">4</span>] - fontHeight/<span class="hljs-number">4</span>);
    }

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Description</span>: è¾¹ç•Œæ£€æŸ¥X
     *
     * <span class="hljs-doctag">@Author</span>: ws
     * <span class="hljs-doctag">@Date</span>: 2025/11/19 11:20
     **/</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">initBoundaryX</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> {
        <span class="hljs-keyword">if</span> (x &lt;= <span class="hljs-number">0</span>) {
            x = radius;
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &gt;= imageWidth) {
            x = imageWidth -  radius;
        }
        <span class="hljs-keyword">return</span> x;
    }

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Description</span>: è¾¹ç•Œæ£€æŸ¥Y
     *
     * <span class="hljs-doctag">@Author</span>: ws
     * <span class="hljs-doctag">@Date</span>: 2025/11/19 11:20
     **/</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">initBoundaryY</span><span class="hljs-params">(<span class="hljs-type">double</span> y)</span> {
        <span class="hljs-keyword">if</span> (y &lt;= <span class="hljs-number">0</span>) {
            y = radius;
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y &gt;= imageHeight) {
            y = imageHeight - radius;
        }
        <span class="hljs-keyword">return</span> y;
    }


    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Description</span>: è·å–æ–‡å­—é«˜åº¦
     *
     * <span class="hljs-doctag">@Author</span>: ws
     * <span class="hljs-doctag">@Date</span>: 2025/11/19 11:20
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getWordWidth</span><span class="hljs-params">(String content)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">width</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; content.length(); i++) {
            width += fontMetrics.charWidth(content.charAt(i));
        }
        <span class="hljs-keyword">return</span> width;
    }
}
</code></pre>
<p>å¤§å®¶æœ‰å…´è¶£å¯ä»¥å®Œå–„ä¸€ä¸‹ç¢°æ’æ£€æŸ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP]]></title>    <link>https://juejin.cn/post/7576555431943503882</link>    <guid>https://juejin.cn/post/7576555431943503882</guid>    <pubDate>2025-11-26T03:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576555431943503882" data-draft-id="7496341294567800883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,NestJS"/> <meta itemprop="datePublished" content="2025-11-26T03:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:04:24.000Z" title="Wed Nov 26 2025 03:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡ä¿è¯ç»å¯¹å¤§ç™½è¯ï¼ç®€å•æ˜“æ‡‚!</p>
<p>æœ€è¿‘è·Ÿä¸€ä¸ªå¥½å‹è®¨è®ºï¼Œä»–è¯´æƒ³å­¦ä¹  <code>node.js</code> åç«¯æ¡†æ¶ <code>nest.js</code>ï¼Œä½†å¯¹äº <code>nest.js</code> çš„ä¸‹é¢ç”¨æ³•ä¸€å¤´é›¾æ°´ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆç”¨å‘¢ï¼Ÿä»€ä¹ˆ <code>Contoller</code>, <code>Provider</code>ï¼Œæ€ä¹ˆè·Ÿä¸€èˆ¬çš„ <code>javascript</code> ä»£ç çš„ç”¨æ³•å®Œå…¨ä¸ä¸€æ ·å‘¢ï¼Ÿå¦‚ä¸‹çš„ <code>@Controller</code>,<code>@Injectable</code> ä½ ç†è§£æ˜¯ä»€ä¹ˆæ„æ€å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨è¿™æ ·çš„æ–¹å¼ç»„ç»‡ä»£ç å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-Javascript" lang="Javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Cat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./interfaces/cat.interface'</span>;


@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  private readonly <span class="hljs-attr">cats</span>: <span class="hljs-title class_">Cat</span>[] = [];

  <span class="hljs-title function_">create</span>(<span class="hljs-params">cat: Cat</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>.<span class="hljs-title function_">push</span>(cat);
  }

  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Cat</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>;
  }
}

</code></pre>
<p>åŸºäºæ­¤ï¼Œæˆ‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸®åŠ©å¤§å®¶ä» 0 å¼€å§‹ï¼Œå±‚å±‚é€’è¿›åˆ°æ‰€æœ‰è¿™äº›è®©ä½ é™Œç”Ÿçš„ <code>nest.js</code> çš„æ¦‚å¿µï¼</p>
<h2 data-id="heading-1">ä»ç¼–ç¨‹èŒƒå¼è¯´èµ·</h2>
<p>ç¼–ç¨‹èŒƒå¼åœ¨ä¹‹å‰é¢è¯•ç»å¸¸è¢«é—®åˆ°äº†ï¼Œä»€ä¹ˆ <code>FP</code>(å‡½æ•°å¼ç¼–ç¨‹)ï¼Œ<code>RP</code>(å“åº”å¼ç¼–ç¨‹)ï¼Œ<code>FRP</code>ï¼ˆå‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œè¿˜æœ‰æˆ‘ä»¬ç†ŸçŸ¥çš„å¤§å…„å¼Ÿ <code>é¢ç›¸å¯¹è±¡ç¼–ç¨‹</code>ï¼Œç°åœ¨ <code>nest.js</code> åˆæ¥ä¸ª <code>AOP</code>ï¼ˆé¢ç›¸åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œå±å®è®©äººè’™åœˆäº†ã€‚ã€‚ã€‚ã€‚å¤ªå¤šæ¦‚å¿µäº†ã€‚</p>
<p>åˆ«æ€¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥ï¼</p>
<h3 data-id="heading-2">å‡½æ•°å¼ç¼–ç¨‹ - FP</h3>
<p>ç®€å•æ¥è¯´å°±æ˜¯è¦æ±‚ä½ ä½¿ç”¨çº¯å‡½æ•°ï¼Œä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œå°±æ˜¯è¾“å…¥ä¸€å®šçš„æ—¶å€™è¾“å‡ºä¸€å®šï¼Œå°±æ˜¯ä¼ å…¥ç›¸åŒçš„å‚æ•°å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å°±è¿™ä¹ˆç®€å•ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<p>å¸¸è§æœ‰å‡ ç§æƒ…å†µä¼šå½±å“çº¯å‡½æ•°çš„çº¯å‡€ï¼Œæœ€å¸¸è§å°±æ˜¯ï¼š</p>
<ul>
<li>ä¿®æ”¹ä¼ å‚çš„å€¼ï¼Œæˆ–è€…å¼•ç”¨ï¼Œæˆ–è€…å…¨å±€çŠ¶æ€ï¼Œæ”¹ DOMï¼Œä¾‹å¦‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c</span>) { 
     <span class="hljs-comment">// å‡è®¾ c ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œc çš„ xx å±æ€§è¢«ä¿®æ”¹</span>
     c.<span class="hljs-property">xx</span> = a + b; <span class="hljs-comment">// ä¿®æ”¹ä¼ å‚çš„å€¼</span>
     <span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span> = a; <span class="hljs-comment">// ä¿®æ”¹å…¨å±€å˜é‡</span>
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<ul>
<li>åšä¸€äº› i/o æ“ä½œï¼Œä¾‹å¦‚ console.log, å†™æ–‡ä»¶ã€‚å¥½äº†æ¥ä¸‹é‡Œè¯´è¯´ <code>RP</code>(å“åº”å¼ç¼–ç¨‹)</li>
</ul>
<h3 data-id="heading-3">å“åº”å¼ç¼–ç¨‹ - RP</h3>
<p>ä¹Ÿèƒ½å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å°±åƒâ€œExcel è¡¨æ ¼â€ï¼š<br/>
ä½ æ”¹äº† A1ï¼ŒB1 = A1 + 10 ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè¿™å°±æ˜¯å…¸å‹çš„ RPã€‚</p>
<p>åœ¨ vue å’Œ react éƒ½éå¸¸å¸¸è§ï¼Œè·Ÿè¸ªä¸€ä¸ªå€¼å˜åŒ–ï¼Œç„¶åå¼•å‘å¦ä¸€äº›å€¼å˜åŒ–ã€‚</p>
<p>å®ƒå¼ºè°ƒï¼š</p>
<ul>
<li>æ•°æ®æ˜¯â€œæµâ€ï¼ˆstreamï¼‰</li>
<li>æ•°æ®å˜åŒ–ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°ä¾èµ–å®ƒçš„é€»è¾‘ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰</li>
<li>ä½ ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
</ul>
<h3 data-id="heading-4">å‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ - FRP</h3>
<p>FRP æ˜¯â€œå‡½æ•°å¼ç¼–ç¨‹ + å“åº”å¼ç¼–ç¨‹â€çš„ç»“åˆã€‚æ¯”è¾ƒå…¸å‹çš„å°±æ˜¯ Rxjs çš„é£æ ¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬ DOM çš„ input äº‹ä»¶</span>
<span class="hljs-keyword">const</span> input$ = <span class="hljs-title function_">fromEvent</span>(searchInput, <span class="hljs-string">'input'</span>); <span class="hljs-comment">// è¾“å…¥æ˜¯ä¸€ä¸ªâ€œæµâ€</span>

<span class="hljs-keyword">const</span> results$ = input$.<span class="hljs-title function_">pipe</span>(
  <span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>),  <span class="hljs-comment">// å‡½æ•°å¼è½¬æ¢</span>
);

results$.<span class="hljs-title function_">subscribe</span>(renderResults);
</code></pre>
<p>ç®€å•ç†è§£å°±æ˜¯å½“è§¦å‘ <code>DOM</code> çš„ <code>input</code> äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå€¼æ”¹å˜çš„æ—¶å€™ï¼Œè§¦å‘ results$ å€¼çš„æ”¹å˜ï¼Œè¿™å°±æ˜¯ <code>RP</code>ï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œç„¶ååœ¨ <code>input</code> äº‹ä»¶è§¦å‘å€¼æ”¹å˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ‰§è¡Œäº† <code>map</code> æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿç®— <code>FP</code> å‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<h3 data-id="heading-5">OOP - é¢å‘å¯¹è±¡ç¼–ç¨‹</h3>
<p>é¡¾åæ€ä¹‰ï¼Œé¢ç›¸å¯¹è±¡å°±æ˜¯ä»¥å¯¹è±¡ä¸ºå¯¹è±¡ä¸ºå•ä½ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> {
  <span class="hljs-attr">name</span>: string;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: string</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is barking!`</span>);
  }
}
</code></pre>
<p>ä½¿ç”¨åˆ°çš„æ•°æ®ï¼Œæœ€å¥½éƒ½å°è£…ä¸ºå¯¹è±¡ï¼Œå¦‚ä¸Šé¢ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ <code>new Dog()</code> è¿”å›æˆ‘ä»¬æ–°åˆ›é€ å‡ºæ¥çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ class ä»…ä»…æ˜¯ä¸ªæ¨¡æ¿ã€‚å¯¹è±¡æ˜¯ç”±æ¨¡æ¿åˆ›é€ å‡ºæ¥çš„ã€‚</p>
<p>ç„¶åå°±æ˜¯é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€ç†Ÿæ‚‰çš„ä¸‰ä»¶å¥—ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ã€‚é è¿™ä¸‰ä¸ªï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€ç»´æ¨¡å¼è®¤ä¸ºå¯ä»¥æ¨¡æ‹Ÿç°å®ä¸–ç•Œã€‚</p>
<p>å°è£…ï¼šå¾ˆç®€å•ï¼Œä¾‹å¦‚ <code>Dog</code> è¿™ä¸ªç±»ï¼ŒæŠŠè·Ÿ <code>Dog</code> ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•éƒ½æ”¾åœ¨ä¸€ä¸ªç±»é‡Œå°±æ˜¯å°è£…ï¼Œä¾‹å¦‚æœ‰ name å±æ€§ï¼Œç‹—çš„åå­—ï¼Œä½ å¦‚æœæƒ³åŠ å…¶å®ƒå‚æ•°ï¼Œç»§ç»­æ‹“å±•å°±è¡Œäº†ï¼Œä¾‹å¦‚æ€§åˆ«ï¼Œå“ç§ã€‚å½“ç„¶å°è£…è¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼Œä¾‹å¦‚å°è£…ç§æœ‰å±æ€§ä»€ä¹ˆçš„ï¼Œè¿™äº›ç»†ææœ«èŠ‚ä¸ç”¨å¤ªåœ¨æ„ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯ç®€å•ä»‹ç» OOP çš„æ€æƒ³ã€‚</p>
<p>ç»§æ‰¿ï¼šå¯ä»¥å°†åˆ«çš„ç±»çš„ä¸œè¥¿ç»§æ‰¿è¿‡æ¥ï¼Œä¾‹å¦‚, å¾ˆå¤šåŠ¨ç‰©éƒ½å¯ä»¥ç»§æ‰¿<code>Animal</code> è¿™ä¸ªç±»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">public name: string</span>) {}

  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Some sound..."</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says meow~`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says woof!`</span>);
  }
}

<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">"Mimi"</span>);
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"Coco"</span>);

cat.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Mimi says meow~</span>
dog.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Coco says woof!</span>

</code></pre>
<p>ä¸»è¦æ˜¯ä¸ºæˆ‘ä»¬æŠ½è±¡ä»£ç ç”¨çš„ï¼Œä¾‹å¦‚å…¬å…±éƒ¨åˆ†æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå­ç±»å•ç‹¬å®ç°ã€‚æ€æƒ³æ˜¯æŒºå¥½çš„ï¼Œå°±æ˜¯å®ç°èµ·æ¥æœ‰æ—¶å€™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºåˆšå¼€å§‹è®¾è®¡çš„æ—¶å€™ï¼Œä¸å¤ªå®¹æ˜“ä¸€å¼€å§‹å°±èƒ½é¢„çŸ¥æœªæ¥éœ€è¦æŠ½è±¡å“ªäº›ã€‚</p>
<p>å¤šæ€ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸åŒå®ç°ï¼ŒJavascript ä¸­æ²¡æœ‰å¤šæ€ï¼Œæ›´å¤šåœ¨ typescript ä¸­å‡ºç°ï¼Œä¾‹å¦‚ç”¨é‡è½½å®ç°å¤šæ€ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: number, <span class="hljs-attr">b</span>: number): number;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: string, <span class="hljs-attr">b</span>: string): string;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: any, <span class="hljs-attr">b</span>: any): any {
    <span class="hljs-keyword">return</span> a + b;
  }
}

<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>));       <span class="hljs-comment">// 15</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>)) <span class="hljs-comment">// foobar</span>
</code></pre>
<h2 data-id="heading-6">é¢ç›¸åˆ‡é¢ç¼–ç¨‹ - AOP</h2>
<p>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å°†ä»£ç æ³¨å…¥ç°æœ‰å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹ç›®æ ‡é€»è¾‘ã€‚è¿™å¥è¯å¤§å®¶çœ‹çœ‹å°±è¡Œäº†ï¼Œå¾ˆå®˜æ–¹ï¼Œæˆ‘ä»¬ç®€å•ç†è§£å°±æ˜¯ï¼š</p>
<p>æŠŠæ¨ªè·¨å¤šä¸ªåŠŸèƒ½çš„â€œé€šç”¨é€»è¾‘â€æŠ½å‡ºæ¥ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå‡½æ•°é‡Œé‡å¤å†™ã€‚</p>
<p>å¸¸è§å®ç°çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨å‡½æ•°å‰åï¼Œæ³¨å†Œä¸€ä¸ªé’©å­ï¼Œè¿™æ ·è¾¾åˆ°ä¸ä¿®æ”¹å½“å‰å‡½æ•°é€»è¾‘çš„ç›®çš„ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logBefore</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Calling:"</span>, fn.<span class="hljs-property">name</span>, <span class="hljs-string">"args:"</span>, args);
    <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
  }
}
</code></pre>
<p>ä»¥ä¸Šæ–¹æ³•æ˜¯ä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">getUser</span> = logBefore(function getUser(id) {
  // åœ¨æ•°æ®åº“æœç´¢æ•°æ®è¿”å›
  return db.query(`SELECT * FROM users WHERE <span class="hljs-attr">id</span> = <span class="hljs-variable">${id}</span>`)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ ·å…¶å®ƒå‡½æ•°éƒ½å¯ä»¥å…±äº«è¿™ä¸ª <code>logBefore</code> çš„é€»è¾‘ã€‚</p>
<p>å½“ç„¶å®é™…åœºæ™¯ï¼Œä¾‹å¦‚é‰´æƒï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å‰ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æƒé™ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½¿ç”¨ <code>AOP</code> çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-7">AOP è·Ÿ nest.js å…³ç³»</h2>
<p>nest.js åé¢æˆ‘ä»¬ä¼šè®²ä¸€ä¸ªå¾ˆå…³é”®çš„æ¦‚å¿µï¼Œpipelineï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåé¢è¯¦ç»†è¯´ã€‚pipeline å°±æ˜¯å½“å®¢æˆ·ç«¯æ”¶åˆ°è¯·æ±‚åˆ°è¿”å›çš„è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆ nest.js éœ€è¦æ³¨å†Œä¸€ä¸ª Controller æ¥å¤„ç†è¯·æ±‚,å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}
</code></pre>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œget æ–¹æ³•è®¿é—®è·¯å¾„ <code>/cats</code> çš„æ—¶å€™ï¼Œè¿”å› 'This action returns all cats'ã€‚</p>
<p>ä½†å®é™…ä¸Šåˆ° <code>Controller</code> å¤„ç†æ•°æ®ä¹‹å‰ï¼Œè¿˜æœ‰è®¸å¤šæ­¥éª¤ã€‚</p>
<p>ä¾‹å¦‚åœ¨ nest.js ä¸­æœ‰ <code>Middleware</code>ï¼ˆä¸­é—´ä»¶ï¼‰ çš„æ¦‚å¿µï¼Œä¹Ÿæœ‰ <code>Guard</code>(å®ˆå«çš„æ¦‚å¿µ) ç­‰ç­‰æ¦‚å¿µï¼Œæˆ‘ä»¬è¿™é‡Œä¸ç»†è¯´ï¼Œåé¢æ–‡ç« ä¼šæœ‰ï¼Œè¿™é‡Œåªéœ€è¦è®°ä½ï¼šè¯·æ±‚æ¥äº†ä¹‹åï¼Œå…ˆåˆ° <code>Middleware</code> ç„¶ååˆ° <code>Guard</code>ã€‚ã€‚ã€‚å…œå…œè½¬è½¬å¥½å‡ å›æ‰èƒ½åˆ° <code>Controller</code>ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬æåˆ°ï¼ŒAOP ä¸­çš„é¢å‘åˆ‡é¢ï¼Œä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚</p>
<p>nest.js ä¸­çš„ <code>Middleware</code> å¯ä»¥æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸æ˜¯åœ¨ä¸ç›´æ¥å½±å“  <code>Controller</code> é€»è¾‘çš„å‰æä¸‹ï¼Œå®ç°äº†ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå› ä¸ºæ‰€æœ‰è·¯ç”±æ¥æ”¶çš„è¯·æ±‚éƒ½ä¼šç»è¿‡  <code>Middleware</code>ã€‚</p>
<p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ <code>Middleware</code>ï¼Œ<code>Guard</code> è¿™äº›æ¦‚å¿µæœ¬è´¨å°±æ˜¯ â€œåˆ‡é¢â€ã€‚</p>
<p>å¦‚æœä½ å¯¹node.js ï¼Œç»„ä»¶åº“ï¼Œå‰ç«¯åŠ¨ç”»æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è¿›ç¾¤äº¤æµã€‚è¿™æ˜¯æˆ‘ç»„ä»¶åº“æ•™ç¨‹å®˜ç½‘ã€‚æ„Ÿè°¢starï¼Œå†æ¬¡æ„Ÿè°¢ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">t-ui</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul>
<h2 data-id="heading-8">ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬</h2>
<p>è¿™ä¸¤ä¸ªæ¦‚å¿µçœ‹èµ·æ¥æŒºå”¬äººçš„ï¼Œæ¯”è¾ƒé«˜å¤§ä¸Šã€‚æˆ‘ä»¬ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•ä¾‹å­è¯´èµ·ï¼š</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªç±»å«è€ç‹ï¼Œä¸“æŒ‡é‚£äº›ä½åœ¨ç¾å¥³éš”å£çš„é“ä»”ä»¬ã€‚ä»–ä»¬å–œæ¬¢åŠ©äººä¸ºä¹ï¼Œé€å¤§å¸½å­ã€‚èƒ½åŠ›ä¸Šæ“…é•¿é€ƒè·‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'å¥³'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>();
    }
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()); <span class="hljs-comment">// { hobby: ['å¥³', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
</code></pre>
<p>å¥½äº†ï¼Œè¿™ä¸ªPersonç±»ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰å•¥ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡åˆ›å»ºPersonç±»çš„å®ä¾‹ï¼Œéƒ½è¦ä¼ å…¥Hobbyç±»å’ŒSkillç±»ï¼Œä¹Ÿå°±æ˜¯å¯¹è¿™ä¸¤ä¸ªç±»éƒ½äº§ç”Ÿäº†ä¾èµ–ï¼Œå‡å¦‚æœ‰ä¸€å¤©æˆ‘ä»¬æƒ³åˆ›å»ºä¸åŒçš„è€ç‹ï¼Œæ¯”å¦‚æœ‰çš„è€ç‹å–œæ¬¢å°é²œè‚‰ï¼Œæœ‰çš„è€ç‹å–œæ¬¢è€è…Šè‚‰ï¼Œè¿™ä¸ªPersonç±»å†™æ­»äº†ï¼Œæ²¡æ³•å®šåˆ¶</li>
</ul>
<p>æœ‰åŒå­¦é©¬ä¸Šå°±ä¼šè¯´ï¼Œè¿™ä¸ªç®€å•å•Šï¼ŒHobbyå’ŒSkillå½“åšå‚æ•°ä¼ å…¥ä¸å°±è¡Œäº†ï¼Œæ˜¯çš„ï¼Œè¿™ä¸ªæ–¹æ³•ç¡®å®èƒ½è§£å†³é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby, skill</span>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = hobby;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = skill;
    }
}

<span class="hljs-comment">// { hobby: [â€™ç”·', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'ç”·'</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>()); 
</code></pre>
<ul>
<li>ä½†æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç±»æˆ‘ä»¬ä¸ç”¨è‡ªå·±å»newï¼Œåƒä¸‹é¢è¿™æ ·ï¼Œç³»ç»Ÿå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼å…¥å‘¢ï¼Ÿ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby: Hobby, skill: Skill</span>){
  
    }
    <span class="hljs-title function_">hello</span>(<span class="hljs-params"/>){
        è¿™é‡Œç›´æ¥å°±å¯ä»¥ç”¨<span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span>äº†
    }
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ new Personçš„æ—¶å€™ï¼Œhobbyå’Œskillå‚æ•°ï¼Œè‡ªåŠ¨å¸®ä½ å®ä¾‹åŒ–å¯¼å…¥ï¼Œè€Œä¸”ä½ è¿˜éœ€è¦new Personï¼Œèƒ½ä¸èƒ½ä¸new Person éƒ½æ˜¯è‡ªåŠ¨è°ƒç”¨å¹¶æŠŠå‚æ•°å¯¼å…¥ï¼Ÿ</p>
<ul>
<li>è¿™å°±å¼•ç”³å‡ºç¬¬ä¸€ä¸ªæ¦‚å¿µå°±æ§åˆ¶åè½¬ï¼Œä»¥å‰æˆ‘ä»¬éƒ½è¦è‡ªå·±ä¸»åŠ¨å»newï¼Œä»è€Œåˆ›å»ºå®ä¾‹ï¼Œç°åœ¨æ˜¯æŠŠåˆ›å»ºå®ä¾‹çš„ä»»åŠ¡äº¤ç»™äº†ä¸€ä¸ªå®¹å™¨ï¼ˆåé¢ä¼šå®ç°ï¼Œä½ å°±æ˜ç™½äº†ï¼Œç›¸å½“äºä¸€ä¸ªæŒæ§è€…ï¼Œæˆ–è€…è¯´é€ ç‰©ä¸»ï¼Œä¸“é—¨æ¥åˆ›å»ºå®ä¾‹çš„ï¼Œå¹¶ç®¡ç†ä¾èµ–å…³ç³»ï¼‰ï¼Œæ‰€ä»¥æ§åˆ¶æƒæ˜¯ä¸æ˜¯å°±åè½¬äº†ï¼Œä½ ä¸»åŠ¨çš„åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ï¼Œåè½¬ä¸ºå®¹å™¨åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ã€‚</li>
<li>å¯¹äºæ§åˆ¶åè½¬ï¼Œæœ€å¸¸ç”¨ä»¶çš„æ–¹å¼å«ä¾èµ–æ³¨å…¥ï¼Œæ„æ€æ˜¯å®¹å™¨åŠ¨æ€çš„å°†ä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚</li>
<li>æ§åˆ¶åè½¬å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥å®ç°ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå…¶å®å¤§å®¶ä¹Ÿæ²¡è§‰å¾—ä¾èµ–æ³¨å…¥æœ‰å•¥æ¯›ç”¨å§ï¼ä¸‹é¢çš„è®²è§£ä¸€è¨€ä»¥è”½ä¹‹å°±æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬jså¯ä»¥æŠŠå‡½æ•°æˆ–è€…ç±»å½“å‚æ•°ä¼ å…¥å¦ä¸€ä¸ªç±»é‡Œï¼Œè¿™ç¡®å®è§£å†³äº†ä¹‹å‰è®²çš„å†™æ­»ä»£ç çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ç”¨ä¾èµ–æ³¨å…¥ä¹Ÿèƒ½è§£å†³ä»£ç è€¦åˆçš„é—®é¢˜ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æˆ‘ä»¬å¹¶ä¸æ˜¯é‚£ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥ã€‚</p>
<h2 data-id="heading-9">å°ç»“</h2>
<p>è¿™é‡Œç¬¬ä¸€ç¯‡ nest.js å†…å®¹å®Œæ¯•ï¼Œæ¥ä¸‹æ¥ä¼šè¯¦ç»†è§£é‡Šä¸Šæ–‡æåˆ°çš„ piplineï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯·æ±‚ç»è¿‡ <code>nest.js</code> çš„å…¨è¿‡ç¨‹ï¼Œä»¥åŠè¿™äº›ç»è¿‡çš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°çš„æ ¸å¿ƒæ¦‚å¿µï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡]]></title>    <link>https://juejin.cn/post/7576646142315495465</link>    <guid>https://juejin.cn/post/7576646142315495465</guid>    <pubDate>2025-11-26T03:11:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576646142315495465" data-draft-id="7573486671296790570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T03:11:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="let_code"/> <meta itemprop="url" content="https://juejin.cn/user/4265760847307678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4265760847307678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    let_code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:11:52.000Z" title="Wed Nov 26 2025 03:11:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CopilotKitæ˜¯ä»€ä¹ˆ</h2>
<p><code>CopilotKit</code> å°†åº”ç”¨çš„é€»è¾‘ã€çŠ¶æ€å’Œç”¨æˆ·ä¸Šä¸‹æ–‡è¿æ¥åˆ° <code>AI</code> ä»£ç†ã€‚æä¾›äº†æ„å»ºã€éƒ¨ç½²å’Œç›‘æ§ <code>AI</code> è¾…åŠ©åŠŸèƒ½çš„å·¥å…·ï¼Œè¿™äº›åŠŸèƒ½æ„Ÿè§‰ç›´è§‚ã€æœ‰ç”¨ä¸”æ·±åº¦é›†æˆã€‚</p>
<h2 data-id="heading-1">CopilotKitç‰¹ç‚¹</h2>
<ul>
<li><code>Generative UI</code>(ç”Ÿæˆå¼ UI)ï¼šä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç°<code>agent</code>çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</li>
<li><code>Human in the Loop</code>(äººæœºååŒ)ï¼šç”¨æˆ·å¯ä»¥åœ¨å…³é”®ç‚¹æŒ‡å¯¼<code>agent</code>ã€‚å®ç°æ›´å¯é çš„è¾“å‡ºã€‚</li>
<li><code>Shared State</code>(å…±äº«çŠ¶æ€)ï¼šagentå’Œåº”ç”¨çŠ¶æ€ä¿æŒåŒæ­¥ã€‚<code>agent</code>å¯ä»¥æŸ¥çœ‹åº”ç”¨ä¸­çš„æ‰€æœ‰çŠ¶æ€ï¼Œåº”ç”¨å¯ä»¥å®æ—¶å“åº”<code>agent</code>ã€‚</li>
</ul>
<h2 data-id="heading-2">CopilotKitå’ŒLangGraphçš„å…³ç³»</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adb67101b1754134b048eda4e40a8540~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=NOWH6B6nYzD30Eb%2BjSq1maA7XRM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">èŠå¤©ç»„ä»¶</h2>
<p>å‰ä¸‰ä¸ªç»„ä»¶ç”±<code>@copilotkit/react-ui</code>æä¾›ã€‚</p>
<ol>
<li><code>CopilotChat</code> ï¼šçµæ´»çš„èŠå¤©ç•Œé¢ç»„ä»¶ã€‚</li>
<li><code>CopilotSidebar</code> ï¼šå¯æŠ˜å å’Œæ‰©å±•çš„ä¾§è¾¹æ èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>CopilotPopup</code> ï¼š å¯ä»¥æ‰“å¼€å’Œå…³é—­çš„æµ®åŠ¨èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>HeadLess UI</code> : æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ã€‚
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useCopilotChat } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Role</span>, <span class="hljs-title class_">TextMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomChatInterface</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> {
    visibleMessages,
    appendMessage,
    setMessages,
    deleteMessage,
    reloadMessages,
    stopGeneration,
    isLoading,
} = <span class="hljs-title function_">useCopilotChat</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = (<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title function_">appendMessage</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({ content, <span class="hljs-attr">role</span>: <span class="hljs-title class_">Role</span>.<span class="hljs-property">User</span> }));
};

<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    {/* Implement your custom chat UI here */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-4">è®¾ç½®èŠå¤©ç»„ä»¶çš„æ ·å¼</h3>
<ul>
<li>æ ·å¼ï¼šä¸»è¦æ€è·¯æ˜¯é€šè¿‡<strong>æ ·å¼è¦†ç›–</strong>çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼çš„è®¾å®šã€‚æ”¯æŒé€šè¿‡csså˜é‡ã€cssç±»çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼å’Œå­—ä½“çš„å®šä¹‰ã€‚</li>
<li>å›¾æ ‡ï¼šé€šè¿‡ç»„ä»¶çš„<code>icons</code>å±æ€§è¿›è¡Œå®šä¹‰ã€‚</li>
<li>æ ‡ç­¾ï¼šé€šè¿‡ç»„ä»¶çš„<code>labels</code>å±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚</li>
</ul>
<p>å…·ä½“ç±»åã€å˜é‡åã€iconså±æ€§ã€labelså±æ€§<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fcustom-look-and-feel%2Fcustomize-built-in-ui-components%23css-variables-easiest" target="_blank" title="https://docs.copilotkit.ai/langgraph/custom-look-and-feel/customize-built-in-ui-components#css-variables-easiest" ref="nofollow noopener noreferrer">å‚è€ƒè¿™é‡Œ</a></p>
<h3 data-id="heading-5">è‡ªå®šä¹‰å­ç»„ä»¶</h3>
<p>æ”¯æŒé€šè¿‡ç»„ä»¶çš„<code>props</code>å°†è‡ªå®šä¹‰çš„å­ç»„ä»¶ä¼ é€’è¿›å»ï¼Œä»è€Œå®ç°å­ç»„ä»¶çš„è‡ªå®šä¹‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { type <span class="hljs-title class_">AssistantMessageProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { useChatContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Markdown</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SparklesIcon</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@heroicons/react/24/outline"</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotSidebar</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@copilotkit/react-ui/styles.css"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomAssistantMessage</span> = (<span class="hljs-params">props: AssistantMessageProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> { icons } = <span class="hljs-title function_">useChatContext</span>();
  <span class="hljs-keyword">const</span> { message, isLoading, subComponent } = props;

  <span class="hljs-keyword">const</span> avatarStyles = <span class="hljs-string">"bg-zinc-400 border-zinc-500 shadow-lg min-h-10 min-w-10 rounded-full text-white flex items-center justify-center"</span>;
  <span class="hljs-keyword">const</span> messageStyles = <span class="hljs-string">"px-4 rounded-xl pt-2"</span>;

  <span class="hljs-keyword">const</span> avatar = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{avatarStyles}</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">SparklesIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-6 w-6"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"py-2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-start"</span>&gt;</span>
        {!subComponent &amp;&amp; avatar}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{messageStyles}</span>&gt;</span>
          {message &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Markdown</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{message.content</span> || ""} /&gt;</span> }
          {isLoading &amp;&amp; icons.spinnerIcon}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-2"</span>&gt;</span>{subComponent}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};


<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CopilotKit</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CopilotSidebar</span> <span class="hljs-attr">AssistantMessage</span>=<span class="hljs-string">{CustomAssistantMessage}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CopilotKit</span>&gt;</span></span>
</code></pre>
<p>å­ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6f9933b815f4cb9b26dccbc18c95b94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=zXAVBmOlJGjLy%2FfXYE3t%2FDo9a7A%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œmarkdownçš„æ¸²æŸ“é»˜è®¤ä½¿ç”¨<code>react-markdown</code>ã€‚æ”¯æŒé€šè¿‡<code>markdownTagRenderers</code>å±æ€§æ¥è‡ªå®šä¹‰markdownæ¸²æŸ“ç»„ä»¶ã€‚</p>
<h4 data-id="heading-6">Actions</h4>
<p>å…è®¸ LLM ä¸åº”ç”¨ç¨‹åºçš„åŠŸèƒ½äº¤äº’ã€‚å½“ LLM è°ƒç”¨ Action æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å¯è§†åŒ–å…¶æ‰§è¡Œå’Œç»“æœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span> <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
<span class="hljs-keyword">import</span> { useCopilotAction } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Your custom components (examples - implement these in your app)</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LoadingView</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./loading-view"</span>; <span class="hljs-comment">// Your loading component</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CalendarMeetingCardComponent</span>, type <span class="hljs-title class_">CalendarMeetingCardProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./calendar-meeting-card"</span>; <span class="hljs-comment">// Your meeting card component</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">YourComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useCopilotAction</span>({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"showCalendarMeeting"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Displays calendar meeting information"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"date"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting date (YYYY-MM-DD)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"time"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting time (HH:mm)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"meetingName"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Name of the meeting"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>
      }
    ],
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ status, args }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { date, time, meetingName } = args;
 
      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'inProgress'</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadingView</span> /&gt;</span></span>; <span class="hljs-comment">// Your own component for loading state</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">meetingProps</span>: <span class="hljs-title class_">CalendarMeetingCardProps</span> = {
          <span class="hljs-attr">date</span>: date,
          time,
          meetingName
        };
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CalendarMeetingCardComponent</span> {<span class="hljs-attr">...meetingProps</span>} /&gt;</span></span>;
      }
    },
  });
 
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>...<span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">Agent State</h4>
<p><code>Agent State</code>ç»„ä»¶å…è®¸å¯è§†åŒ– <code>CoAgents</code> çš„å†…éƒ¨çŠ¶æ€å’Œè¿›åº¦ã€‚ä½¿ç”¨ <code>CoAgents</code> æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å‘ˆç°ä»£ç†çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span>; <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
 
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Progress</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./progress"</span>;

type <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">logs</span>: string[];
}

useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"basic_agent"</span>,
  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state, nodeName, status }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">logs</span> || state.<span class="hljs-property">logs</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// Progress is a component we are omitting from this example for brevity.</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Progress</span> <span class="hljs-attr">logs</span>=<span class="hljs-string">{state.logs}</span> /&gt;</span></span>; 
  },
});
</code></pre>
<h2 data-id="heading-8">å‰ç«¯å·¥å…·</h2>
<p>å‰ç«¯å·¥å…·æŒ‡çš„æ˜¯å‰ç«¯å®šä¹‰çš„å‡½æ•°å¯ä»¥è¢« agent è°ƒç”¨ã€‚å½“å‡½æ•°è¢« agent è°ƒç”¨æ—¶ï¼Œå‡½æ•°åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒï¼Œä»è€Œå®ç°agentå¯¹UIçš„æ§åˆ¶å’Œäººæœºäº¤äº’ã€‚</p>
<p>å‰ç«¯å·¥å…·å¯ä»¥è½»æ¾å®ç°ï¼š</p>
<ol>
<li>è¯»å–æˆ–ä¿®æ”¹ React ç»„ä»¶çŠ¶æ€</li>
<li>è®¿é—®æµè§ˆå™¨ APIï¼Œå¦‚ localStorageã€sessionStorage æˆ– cookie</li>
<li>è§¦å‘ UI æ›´æ–°æˆ–åŠ¨ç”»</li>
<li>ä¸ç¬¬ä¸‰æ–¹å‰ç«¯åº“äº¤äº’</li>
<li>æ‰§è¡Œéœ€è¦ç”¨æˆ·å³æ—¶æµè§ˆä¸Šä¸‹æ–‡çš„æ“ä½œ</li>
</ol>
<h3 data-id="heading-9">å®ç°</h3>
<h4 data-id="heading-10">1.åˆ›å»ºå‰ç«¯å·¥å…·</h4>
<p>éœ€è¦ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//page.tsx </span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ name }) =&gt; {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>);
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-11">2.ä¿®æ”¹ä»£ç†</h4>
<p>å®‰è£… CopilotKit SDK <code>npm install @copilotkit/sdk-js</code>ã€‚</p>
<p>è¦è®¿é—® CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œå¯ä»¥åœ¨ä»£ç†çš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿ CopilotKitState ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ä¹‹åï¼Œä»£ç†çš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</p>
<p>agentè°ƒç”¨å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h2 data-id="heading-12">Generative UI</h2>
<p>ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç° agent çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ä½¿ç”¨ç”Ÿæˆå¼UIï¼š</p>
<ol>
<li>åç«¯å·¥å…·ï¼šé€šè¿‡ç”Ÿæˆå¼UIç»„ä»¶æ¸²æŸ“å·¥å…·çš„è°ƒç”¨</li>
<li>å‰ç«¯å·¥å…·ï¼šä¸ºagentæä¾›å‰ç«¯å·¥å…·æ¥æ˜¾ç¤ºè‡ªå®šä¹‰ç»„ä»¶å¹¶ä¸”é©±åŠ¨UI</li>
<li>agent çŠ¶æ€ï¼šç”¨è‡ªå®šä¹‰ç»„ä»¶æ¥æ˜¾ç¤ºagentçš„çŠ¶æ€ã€è¿›åº¦å’Œè¾“å‡º</li>
</ol>
<h3 data-id="heading-13">åç«¯å·¥å…·</h3>
<p>å·¥å…·æ˜¯ LLM è°ƒç”¨é¢„å®šä¹‰çš„ï¼ˆé€šå¸¸æ˜¯ç¡®å®šæ€§å‡½æ•°ï¼‰çš„ä¸€ç§æ–¹å¼ã€‚CopilotKit å…è®¸åœ¨ UI ä¸­å°†è¿™äº›å·¥å…·å‘ˆç°ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç”Ÿæˆå¼ UIã€‚</p>
<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯å…è®¸æˆ‘ä»¬å‘ç”¨æˆ·å±•ç¤ºagentæ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬è°ƒç”¨å·¥å…·æ—¶ï¼Œå…è®¸å®Œå…¨è‡ªå®šä¹‰å·¥å…·åœ¨èŠå¤©ä¸­çš„å‘ˆç°æ–¹å¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">const</span> get_weather = <span class="hljs-title function_">tool</span>(
  <span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`The weather for <span class="hljs-subst">${args.location}</span> is 70 degrees.`</span>;
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Get the weather for a given location."</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">location</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"The location to get weather for"</span>),
    }),
  }
);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> });
  <span class="hljs-keyword">const</span> modelWithTools = model.<span class="hljs-title function_">bindTools</span>([get_weather]); 

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a helpful assistant."</span>),
    ...state.<span class="hljs-property">messages</span>,
  ], config);

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å‰ç«¯é€šè¿‡<code>useCopilotAction</code>é’©å­åœ¨UIä¸­å‘ˆç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx  </span>
<span class="hljs-keyword">import</span> { useRenderToolCall } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useRenderToolCall</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,<span class="hljs-comment">// æ³¨æ„nameä¿æŒä¸€è‡´</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{status, args}</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
          {status !== "complete" &amp;&amp; "Calling weather API..."}
          {status === "complete" &amp;&amp; `Called the weather API for ${args.location}.`}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>useDefaultTool</code> æ•è·æ‰€æœ‰æ²¡æœ‰ä¸“ç”¨æ¸²æŸ“å™¨çš„å·¥å…·ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useDefaultTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useDefaultTool</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ name, args, status, result }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> "<span class="hljs-attr">black</span>" }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
            {status === "complete" ? "âœ“" : "â³"}
            {name}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {status === "complete" &amp;&amp; result &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{JSON.stringify(result, null, 2)}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-14">å‰ç«¯å·¥å…·</h3>
<p>å®šä¹‰ LangGraph agent å¯ä»¥è°ƒç”¨çš„å®¢æˆ·ç«¯å‡½æ•°ï¼Œæ‰§è¡Œå®Œå…¨åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è¿›è¡Œã€‚å½“agentè°ƒç”¨å‰ç«¯å·¥å…·æ—¶ï¼Œé€»è¾‘ä¼šåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒã€‚ä¸€èˆ¬åœ¨agentéœ€è¦å’Œå®¢æˆ·ç«¯äº¤äº’æ—¶ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// page.tsx</span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">{ name }</span>) {
      <span class="hljs-comment">// Handler returns the result of the tool call</span>
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">currentURLPath</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>, <span class="hljs-attr">userName</span>: name };
    },
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ args }</span>) =&gt;</span> {
      <span class="hljs-comment">// Renders UI based on the data of the tool call</span>
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {args.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>You're currently on {window.location.href}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>agent è®¿é—®å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-comment">//ç°åœ¨ï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-15">agent çŠ¶æ€</h3>
<p>æ‰€æœ‰ LangGraph agent éƒ½æ˜¯çŠ¶æ€åŒ–çš„ã€‚è¿™æ„å‘³ç€å½“ agent é€šè¿‡èŠ‚ç‚¹æ—¶ï¼Œä¸€ä¸ªçŠ¶æ€å¯¹è±¡ä¼šåœ¨å®ƒä»¬ä¹‹é—´ä¼ é€’ï¼Œä»¥ä¿æŒä¼šè¯çš„æ•´ä½“çŠ¶æ€ã€‚CopilotKit å…è®¸ä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶(ç”Ÿæˆå¼ UI)åœ¨åº”ç”¨ç¨‹åºä¸­å‘ˆç°æ­¤çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { copilotkitEmitState, <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Search</span> = {
  <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">searches</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-title class_">Search</span>[]&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">searches</span> = [
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Initial research"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Retrieving sources"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Forming an answer"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
  ];

  <span class="hljs-comment">// We can call copilotkit_emit_state to emit updated state</span>
  <span class="hljs-comment">// before a node finishes</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);

  <span class="hljs-comment">// Simulate state updates</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> search <span class="hljs-keyword">of</span> state.<span class="hljs-property">searches</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    search.<span class="hljs-property">done</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// We can also emit updates in a loop to simulate progress</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"You are a helpful assistant."</span>}),
    ...state.<span class="hljs-property">messages</span>,
  ], config);
</code></pre>
<p>å‰ç«¯é€šè¿‡ <code>useCoAgentStateRender</code> åœ¨èŠå¤©ä¸­å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-comment">// For type safety, redefine the state of the agent. If you're using</span>
<span class="hljs-comment">// using LangGraph JS you can import the type here and share it.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-comment">// styles omitted for brevity</span>
  useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}{search.done ? "" : "..."}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–è¿˜å…è®¸åœ¨èŠå¤©ä¹‹å¤–å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Define the state of the agent, should match the state of the agent in your LangGraph.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
  })

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* ... */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 mt-4"</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-row"</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-16">Human in the Loop (HITL)</h2>
<p>ç”¨æˆ·ä¸ agent åä½œå¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°äººæœºäº¤äº’ï¼š</p>
<ol>
<li>åŸºäºä¸­æ–­</li>
<li>åŸºäºå‰ç«¯å·¥å…·</li>
<li>åŸºäºèŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-17">åŸºäºä¸­æ–­</h3>
<h4 data-id="heading-18">åŸºç¡€</h4>
<p>éœ€è¦ä¸€ä¸ªçŠ¶æ€å±æ€§æ¥å­˜å‚¨åç§°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// This is the state of the agent.</span>
<span class="hljs-comment">// It inherits from the CopilotKitState properties from CopilotKit.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>åœ¨LangGraph ä»£ç†ä¸­è°ƒç”¨ interruptï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// add the agent state definition from the previous step</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> agentName = state.<span class="hljs-property">agentName</span>
    ?? <span class="hljs-title function_">interrupt</span>(<span class="hljs-string">"Before we start, what would you like to call me?"</span>); 

    <span class="hljs-comment">// Tell the agent its name</span>
    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
        <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant named <span class="hljs-subst">${agentName}</span>...`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
        [systemMessage, ...state.<span class="hljs-property">messages</span>],
        config
    );

    <span class="hljs-keyword">return</span> {
        ...state,
        agentName,
        <span class="hljs-attr">messages</span>: response,
    };
}
</code></pre>
<p>å‰ç«¯ä½¿ç”¨ <code>useLangGraphInterrupt</code> é’©å­ï¼Œä¸ºç»ˆä¸­æ–­æä¾›ä¸€ä¸ªè¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œç„¶åä½¿ç”¨ç”¨æˆ·çš„å“åº”è°ƒç”¨ resolveã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// styles omitted for brevity</span>
<span class="hljs-title function_">useLangGraphInterrupt</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{event.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
                e.preventDefault();
                resolve((e.target as HTMLFormElement).response.value);
            }}&gt;
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
});
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-19">é«˜çº§</h4>
<p>åœ¨ä»£ç†ä¸­å‘ˆç°å¤šä¸ªä¸­æ–­äº‹ä»¶æ—¶ï¼ŒUI ä¸­çš„å¤šä¸ª <code>useLangGraphInterrupt</code> é’©å­è°ƒç”¨ä¹‹é—´å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œé’©å­å¯ä»¥æ¥å—ä¸€ä¸ª <code>enabled</code> å‚æ•°ï¼Œè¯¥å‚æ•°å°†æœ‰æ¡ä»¶åœ°åº”ç”¨å®ƒï¼š</p>
<p>å®šä¹‰ä¸¤ä¸ªä¸åŒçš„ä¸­æ–­ï¼Œé€šè¿‡<code>type</code>è¿›è¡ŒåŒºåˆ†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// ... your full state definition</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">approval</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"approval"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"please approve"</span> }); 

  <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">agentName</span>) {
    state.<span class="hljs-property">agentName</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"ask"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"Before we start, what would you like to call me?"</span> }); 
  }

  <span class="hljs-comment">// Tell the agent its name</span>
  <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
    <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant...`</span>,
  });

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
    [systemMessage, ...state.<span class="hljs-property">messages</span>],
    config
  );

  <span class="hljs-keyword">return</span> {
    ...state,
    <span class="hljs-attr">messages</span>: response,
  };
}
</code></pre>
<p>å‰ç«¯å®šä¹‰å¤šä¸ªå¤„ç†ç¨‹åºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ApproveComponent</span> = (<span class="hljs-params">{ content, onAnswer }: { content: <span class="hljs-built_in">string</span>; onAnswer: (approved: <span class="hljs-built_in">boolean</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Do you approve?<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(true)}&gt;Approve<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(false)}&gt;Reject<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">AskComponent</span> = (<span class="hljs-params">{ question, onAnswer }: { question: <span class="hljs-built_in">string</span>; onAnswer: (answer: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
<span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{question}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            e.preventDefault();
            onAnswer((e.target as HTMLFormElement).response.value);
        }}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'ask'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AskComponent</span> <span class="hljs-attr">question</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'approval'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ApproveComponent</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>é€‰æ‹©è‡ªå®šä¹‰èŠå¤© UI æ—¶ï¼ŒæŸäº›æƒ…å†µå¯èƒ½éœ€è¦é¢„å¤„ç†ä¸­æ–­äº‹ä»¶çš„ä¼ å…¥å€¼ï¼Œç”šè‡³éœ€è¦å®Œå…¨è§£æå®ƒè€Œä¸æ˜¾ç¤ºå…¶ UIã€‚è¿™å¯ä»¥ä½¿ç”¨ <code>handeer</code> å±æ€§æ¥å®ç°ï¼Œè¯¥å±æ€§ä¸éœ€è¦è¿”å›ä¸€ä¸ª React ç»„ä»¶ã€‚ å¤„ç†ç¨‹åºçš„è¿”å›å€¼å°†ä½œä¸ºç»“æœå‚æ•°ä¼ é€’ç»™ render æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-comment">// We will assume an interrupt event in the following shape</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Department</span> = <span class="hljs-string">'finance'</span> | <span class="hljs-string">'engineering'</span> | <span class="hljs-string">'admin'</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AuthorizationInterruptEvent</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'auth'</span>,
    <span class="hljs-attr">accessDepartment</span>: <span class="hljs-title class_">Department</span>,
}

<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [userEmail, setUserEmail] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">'example@user.com'</span> })
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserByEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">department</span>: <span class="hljs-title class_">Department</span> } {
        <span class="hljs-comment">// ... an implementation of user fetching</span>
    }

    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ result, event, resolve }) =&gt; {
            <span class="hljs-keyword">const</span> { department } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserByEmail</span>(userEmail)
            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">value</span>.<span class="hljs-property">accessDepartment</span> === department || department === <span class="hljs-string">'admin'</span>) {
                <span class="hljs-comment">// Following the resolution of the event, we will not proceed to the render method</span>
                <span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">code</span>: <span class="hljs-string">'AUTH_BY_DEPARTMENT'</span> })
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">return</span> { department, userId }
        },
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ result, event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Request for {event.value.type}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Members from {result.department} department cannot access this information<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You can request access from an administrator to continue.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'REQUEST_AUTH', data: { department: result.department, userId: result.userId } })}
                &gt;
                    Request Access
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'CANCEL' })}
                &gt;
                    Cancel
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    });
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-20">åŸºäºå‰ç«¯å·¥å…·</h3>
<p>å‰ç«¯å·¥å…·å¯ä»¥ç”¨åœ¨å¤šç§æ–¹å¼ä¸Šã€‚å…¶ä¸­ä¸€ç§æ–¹å¼æ˜¯æœ‰äººå·¥ä»‹å…¥çš„æµç¨‹ï¼Œå·¥å…·çš„å“åº”ç”±ç”¨æˆ·çš„å†³å®šæ¥æ§åˆ¶ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿä¸€ä¸ªç”¨äºæ‰§è¡Œå‘½ä»¤çš„â€œæ‰¹å‡†â€æµç¨‹ã€‚é¦–å…ˆï¼Œä½¿ç”¨<code>useHumanInTheLoop</code>é’©å­æ¥åˆ›å»ºä¸€ä¸ªæç¤ºç”¨æˆ·æ‰¹å‡†çš„å·¥å…·ã€‚</p>
<p>è¦è®¿é—®ç”± CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œæ‚¨å¯ä»¥åœ¨agentçš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿è‡ª CopilotKitState:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ç»ä¸Šè¿°æ“ä½œï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥è°ƒç”¨å‰ç«¯å·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.tsx</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-21">åŸºäºèŠ‚ç‚¹</h3>
<p>LangGraph å’Œ CopilotKit ç°åœ¨éƒ½ä¸é¼“åŠ±ä½¿ç”¨åŸºäºèŠ‚ç‚¹çš„ä¸­æ–­ã€‚ä» LangGraph 0.2.57 å¼€å§‹ï¼Œæ¨èçš„è®¾ç½®æ–­ç‚¹çš„æ–¹æ³•æ˜¯ä½¿ç”¨ interrupt å‡½æ•° ï¼Œå› ä¸ºå®ƒç®€åŒ–äº†äººæœºäº¤äº’æ¨¡å¼ã€‚</p>
<p>æƒ³è¦äº†è§£å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fhuman-in-the-loop%2Fnode-flow" target="_blank" title="https://docs.copilotkit.ai/langgraph/human-in-the-loop/node-flow" ref="nofollow noopener noreferrer">è¿™é‡Œ</a></p>
<h2 data-id="heading-22">çŠ¶æ€å…±äº«</h2>
<p>åœ¨ UI å’Œ LangGraph agent çŠ¶æ€ä¹‹é—´åˆ›å»ºåŒå‘è¿æ¥ã€‚</p>
<h3 data-id="heading-23">è¯»å–agentçŠ¶æ€</h3>
<p>ä¸ä»…å¯ä»¥åœ¨èŠå¤©ç•Œé¢ä¸­ä½¿ç”¨å®æ—¶ä»£ç†çŠ¶æ€ï¼Œè¿˜å¯ä»¥åœ¨åŸç”Ÿåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p>
<p>LangGraph æ˜¯æœ‰çŠ¶æ€çš„ã€‚åœ¨èŠ‚ç‚¹ä¹‹é—´è½¬æ¢æ—¶ï¼Œè¯¥çŠ¶æ€å°†æ›´æ–°å¹¶ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾agentçŠ¶æ€å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-comment">// If language is not defined, use a default value.</span>
  <span class="hljs-keyword">const</span> language = state.<span class="hljs-property">language</span> ?? <span class="hljs-string">'spanish'</span>

  <span class="hljs-comment">// ... add the rest of the node implementation and use the language variable</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// ... add the rest of state to return</span>
    <span class="hljs-comment">// return the language to make it available for the next nodes &amp; frontend to read</span>
    language
  }
}
</code></pre>
<p>å‰ç«¯è°ƒç”¨ <code>useCoAgent</code> é’©å­ï¼Œä¼ é€’agentçš„åç§°ï¼Œå¹¶é€‰æ‹©æ€§åœ°æä¾›åˆå§‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//pages.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> // [!code highlight]
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong><code>useCoAgent</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°</strong></p>
<h4 data-id="heading-24">åœ¨èŠå¤©ä¸­æ¸²æŸ“ agent çŠ¶æ€</h4>
<p>å¯ä»¥ä½¿ç”¨ <code>useCoAgentStateRender</code> é’©å­ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useCoAgentStateRender</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">language</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong><code>useCoAgentStateRender</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</strong></p>
<h3 data-id="heading-25">å†™å…¥agentçŠ¶æ€</h3>
<p>å‡è®¾ agent çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agebt.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p><code>useCoAgent</code> è¿”å›ä¸€ä¸ª <code>setState</code> å‡½æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°æ¥æ›´æ–°ä»£ç†çŠ¶æ€ã€‚è°ƒç”¨è¿™ä¸ªå°†æ›´æ–°ä»£ç†çŠ¶æ€å¹¶è§¦å‘ä¾èµ–äºä»£ç†çŠ¶æ€çš„ä»»ä½•å†…å®¹çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-comment">// Example usage in a pseudo React component</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span> }); 
  };

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleLanguage}</span>&gt;</span>Toggle Language<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-26">é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-27">é‡æ–°è¿è¡Œagentï¼Œå¹¶æç¤ºæ›´æ”¹å†…å®¹</h5>
<p>æ–°çš„ agent çŠ¶æ€å°†åœ¨ä¸‹æ¬¡ agent è¿è¡Œæ—¶ä½¿ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨é‡æ–°è¿è¡Œå®ƒï¼Œè¯·åœ¨<code>useCoAgent</code>é’©å­ä¸Šä½¿ç”¨<code>run</code>å‚æ•°ã€‚
agentå°†é‡æ–°è¿è¡Œï¼Œå®ƒä¸ä»…ä¼šè·å¾—æœ€æ–°çš„æ›´æ–°çŠ¶æ€ï¼Œè¿˜ä¼šè·å¾—å¯èƒ½å–å†³äºä»¥å‰çŠ¶æ€å’Œå½“å‰çŠ¶æ€ä¹‹é—´çš„æ•°æ®å¢é‡çš„æç¤º ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextMessage</span>, <span class="hljs-title class_">MessageRole</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;  

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState, run } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// setup to be called when some event in the app occurs</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> newLanguage = state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span>;
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: newLanguage });

    <span class="hljs-comment">// re-run the agent and provide a hint about what's changed</span>
    <span class="hljs-title function_">run</span>(<span class="hljs-function">(<span class="hljs-params">{ previousState, currentState }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({
        <span class="hljs-attr">role</span>: <span class="hljs-title class_">MessageRole</span>.<span class="hljs-property">User</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`the language has been updated to <span class="hljs-subst">${currentState.language}</span>`</span>,
      });
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// ...</span>
  );
}
</code></pre>
<h3 data-id="heading-28">agentçŠ¶æ€è¾“å…¥å’Œè¾“å‡º</h3>
<p>æœ‰äº›å±æ€§æ˜¯å†…éƒ¨å¤„ç†çš„ï¼Œè€Œå¦ä¸€äº›åˆ™æ˜¯ UI ä¼ é€’ç”¨æˆ·è¾“å…¥çš„æ–¹å¼ã€‚æ­¤å¤–ï¼Œæœ‰äº›çŠ¶æ€å±æ€§åŒ…å«å¤§é‡ä¿¡æ¯ã€‚åœ¨agentå’Œ UI ä¹‹é—´æ¥å›åŒæ­¥å®ƒä»¬å¯èƒ½æˆæœ¬é«˜æ˜‚ï¼Œè€Œä¸”å¯èƒ½æ²¡æœ‰å®é™…å¥½å¤„ã€‚</p>
<p>å‡è®¾çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
  <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;, <span class="hljs-comment">//æœŸæœ›LLMå›ç­”çš„é—®é¢˜</span>
  <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,<span class="hljs-comment">//LLMå›åº”çš„ç­”æ¡ˆ</span>
  <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,<span class="hljs-comment">//ç”¨äºLLMå›ç­”é—®é¢˜ï¼Œä¸åº”å‘ç”¨æˆ·åŒæ­¥</span>
})
</code></pre>
<p>agentå®šä¹‰è¾“å…¥è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

  <span class="hljs-comment">// Divide the state to 3 parts</span>

  <span class="hljs-comment">// An input schema for inputs you are willing to accept from the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">InputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// Output schema for output you are willing to pass to the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">OutputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// The full schema, including the inputs, outputs and internal state ("resources" in our case)</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">OutputAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">InputAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,
  });

  <span class="hljs-comment">// Define a typed state that supports the entire</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">answerNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>()

    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
      <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant. Answer the question: <span class="hljs-subst">${state.question}</span>.`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>(
      [systemMessage, ...state.<span class="hljs-property">messages</span>],
      config
    );

    <span class="hljs-comment">// ...add the rest of the agent implementation</span>
    <span class="hljs-comment">// extract the answer, which will be assigned to the state soon</span>
    <span class="hljs-keyword">const</span> answer = response.<span class="hljs-property">content</span>

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">messages</span>: response,
      <span class="hljs-comment">// include the answer in the returned state</span>
      answer,
    }
  }

  <span class="hljs-comment">// finally, before compiling the graph, we define the 3 state components</span>
  <span class="hljs-keyword">const</span> workflow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>({
    <span class="hljs-attr">input</span>: <span class="hljs-title class_">InputAnnotation</span>,
    <span class="hljs-attr">output</span>: <span class="hljs-title class_">OutputAnnotation</span>,
    <span class="hljs-comment">// @ts-expect-error -- LangGraph does not expect a "full schema with internal properties".</span>
    <span class="hljs-attr">stateSchema</span>: <span class="hljs-title class_">AgentStateAnnotation</span>,
  })
    .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"answer_node"</span>, answerNode) <span class="hljs-comment">// add all the different nodes and edges and compile the graph</span>
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"answer_node"</span>)
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"answer_node"</span>, <span class="hljs-variable constant_">END</span>)
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> graph = workflow.<span class="hljs-title function_">compile</span>()
</code></pre>
<h3 data-id="heading-29">é¢„æµ‹çŠ¶æ€æ›´æ–°</h3>
<p>ä¸€ä¸ªLangGraph agentçš„çŠ¶æ€æ›´æ–°æ˜¯ä¸è¿ç»­çš„ï¼›ä»…åœ¨å›¾ä¸­çš„èŠ‚ç‚¹è½¬æ¢ä¹‹é—´è¿›è¡Œã€‚ä½†æ˜¯ï¼Œå›¾ä¸­å•ä¸ªèŠ‚ç‚¹è¿è¡Œå¾€å¾€éœ€è¦è®¸å¤šç§’ï¼Œå¹¶ä¸”åŒ…å«ç”¨æˆ·æ„Ÿå…´è¶£çš„å­æ­¥éª¤ã€‚</p>
<p>é¢„æµ‹çŠ¶æ€æ›´æ–°å¸®åŠ©æˆ‘ä»¬å‘ç”¨æˆ·å°½å¯èƒ½è¿ç»­çš„ååº” agent æ­£åœ¨æ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>å½“ä½ çš„LangGraphä¸­çš„èŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå…¶è¿”å›çš„çŠ¶æ€æˆä¸ºå”¯ä¸€çš„çœŸå®æ¥æºã€‚è™½ç„¶ä¸­é—´çŠ¶æ€æ›´æ–°å¯¹äºå®æ—¶åé¦ˆå¾ˆæœ‰å¸®åŠ©ï¼Œä½†ä»»ä½•ä½ æƒ³æŒä¹…åŒ–çš„æ›´æ”¹éƒ½å¿…é¡»æ˜ç¡®åœ°åŒ…å«åœ¨èŠ‚ç‚¹çš„æœ€ç»ˆè¿”å›çŠ¶æ€ä¸­ã€‚å¦åˆ™ï¼Œå®ƒä»¬å°†åœ¨èŠ‚ç‚¹å®Œæˆæ—¶è¢«è¦†ç›–ã€‚</p>
<p>åœ¨çŠ¶æ€ä¸­å®šä¹‰ä¸€ä¸ª <code>observed_steps</code> å­—æ®µï¼Œè¯¥å­—æ®µå°†åœ¨agentç¼–å†™æŠ¥å‘Šçš„ä¸åŒéƒ¨åˆ†æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,  <span class="hljs-comment">// Array of completed steps</span>
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>æœ‰ä¸¤ç§å‘å‡ºçŠ¶æ€æ›´æ–°çš„æ–¹å¼ï¼šæ‰‹åŠ¨é¢„æµ‹å’ŒåŸºäºå·¥å…·çš„é¢„æµ‹ã€‚</p>
<h4 data-id="heading-30">æ‰‹åŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¯ä»¥é€æ­¥å‘å‡ºçŠ¶æ€æ›´æ–°ï¼Œä½œä¸ºæœ€ç»ˆçŠ¶æ€çš„é¢„æµ‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—å¸¦æœ‰æ¯æ¬¡æ›´æ–°ä¹‹é—´ä¸€ç§’å»¶è¿Ÿçš„æ­¥éª¤æ¥æ¨¡æ‹Ÿä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitEmitState } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// Simulate executing steps one by one</span>
    <span class="hljs-keyword">const</span> steps = [
        <span class="hljs-string">"Analyzing input data..."</span>,
        <span class="hljs-string">"Identifying key patterns..."</span>,
        <span class="hljs-string">"Generating recommendations..."</span>,
        <span class="hljs-string">"Formatting final output..."</span>
    ];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> steps) {
        state.<span class="hljs-property">observed_steps</span> = [...(state.<span class="hljs-property">observed_steps</span> ?? []), step];
        <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    }
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-31">åŸºäºå·¥å…·é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæ‚¨å¯ä»¥é…ç½® CopilotKit åœ¨æ‰§è¡Œç‰¹å®šå·¥å…·è°ƒç”¨æ—¶è‡ªåŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†é…ç½® CopilotKit åœ¨ LLM è°ƒç”¨æ­¥éª¤è¿›åº¦å·¥å…·æ—¶é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitCustomizeConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/sdk-js/langgraph'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">frontendActionsNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AgentState</span>&gt; {
    <span class="hljs-keyword">const</span> modifiedConfig = <span class="hljs-title function_">copilotkitCustomizeConfig</span>(config, {
        <span class="hljs-attr">emitIntermediateState</span>: [
        {
            <span class="hljs-attr">stateKey</span>: <span class="hljs-string">"observed_steps"</span>,
            <span class="hljs-attr">tool</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">toolArgument</span>: <span class="hljs-string">"steps"</span>,
        },
        ],
    });

    <span class="hljs-keyword">const</span> stepProgress = <span class="hljs-title function_">tool</span>(
        <span class="hljs-keyword">async</span> (args) =&gt; args,
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">"Records progress by updating the steps array"</span>,
            <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
                <span class="hljs-attr">steps</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()),
            }),
        }
    );

    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span>,
    }).<span class="hljs-title function_">bindTools</span>([stepProgress]);

    <span class="hljs-keyword">const</span> system_message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a task performer. Pretend doing tasks you are given, report the steps using StepProgressTool."</span>)
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>([system_message, ...state.<span class="hljs-property">messages</span>], modifiedConfig);


    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">messages</span>: response;
            <span class="hljs-attr">observed_steps</span>: response.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">args</span>.<span class="hljs-property">steps</span>,
        }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">messages</span>: response };
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h2 data-id="heading-32">å­å›¾</h2>
<p>ä¸€ä¸ªå­å›¾ç®€å•åœ°æ˜¯ä½œä¸ºå¦ä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹ä½¿ç”¨çš„å›¾ã€‚æŠŠå®ƒçœ‹ä½œæ˜¯LangGraphçš„å°è£…ï¼šæ¯ä¸ªå­å›¾æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å•å…ƒï¼Œå¯ä»¥ç»„åˆèµ·æ¥æ„å»ºæ›´å¤§ã€æ›´å¤æ‚çš„ç³»ç»Ÿã€‚</p>
<p>ä½¿ç”¨æ­¤åŠŸèƒ½ä¸éœ€è¦åœ¨agentç«¯æ‰§è¡Œé¢å¤–æ­¥éª¤ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯åœ¨ useCoAgent é’©å­ä¸­å¯ç”¨å­å›¾æµï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">  <span class="hljs-keyword">const</span> { state, nodeName } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: <span class="hljs-variable constant_">INITIAL_STATE</span>,
    <span class="hljs-attr">config</span>: {
      <span class="hljs-attr">streamSubgraphs</span>: <span class="hljs-literal">true</span>, 
    }
  });
</code></pre>
<p>å­å›¾èŠ‚ç‚¹å°†ç…§å¸¸æµå¼ä¼ è¾“ï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ <code>nodeName</code> å˜é‡æŸ¥çœ‹å“ªä¸ªå­å›¾æ­£åœ¨æµå¼ä¼ è¾“ã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»å­å›¾ä½¿ç”¨ <code>interruptï¼ˆï¼‰</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576556950331867136</link>    <guid>https://juejin.cn/post/7576556950331867136</guid>    <pubDate>2025-11-26T03:16:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950331867136" data-draft-id="7576559408659103796" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-26T03:16:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢å"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403434270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403434270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:16:30.000Z" title="Wed Nov 26 2025 03:16:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜æè¿°</h2>
<p>é¡¹ç›®ä¸­è¦åšè§†é¢‘æ’­æ”¾ï¼Œæ¥å…¥é˜¿é‡Œäº‘çš„ <code>flutter_aliplayer</code>åæ¨¡æ‹Ÿå™¨è·‘ä¸èµ·æ¥</p>
<pre><code class="hljs language-bash" lang="bash">Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilter</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterConfig</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterOptions</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPPreloadTask</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AliMediaLoaderV2</span>

</code></pre>
<h3 data-id="heading-1">é—®é¢˜åŸå› </h3>
<p>AliPlayer SDK çš„ <code>AliyunPlayer.framework</code> åœ¨ iOS æ¨¡æ‹Ÿå™¨æ¶æ„ï¼ˆx86_64/arm64-simulatorï¼‰ä¸­ç¼ºå°‘ä»¥ä¸‹ç¬¦å·çš„å®ç°ï¼š</p>
<ul>
<li>
<p><code>AVPFilter</code>ã€<code>AVPFilterConfig</code>ã€<code>AVPFilterOptions</code> - è§†é¢‘æ»¤é•œç›¸å…³ç±»</p>
</li>
<li>
<p><code>AVPPreloadTask</code>ã€<code>AliMediaLoaderV2</code> - é¢„åŠ è½½åŠŸèƒ½ç›¸å…³ç±»</p>
</li>
</ul>
<p>è¿™äº›ç¬¦å·åœ¨çœŸæœºæ¶æ„ï¼ˆarm64ï¼‰ä¸­å­˜åœ¨ï¼Œä½†åœ¨æ¨¡æ‹Ÿå™¨æ¶æ„ä¸­ç¼ºå¤±ï¼Œå¯¼è‡´é“¾æ¥å¤±è´¥ã€‚</p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h2>
<p>é€šè¿‡åœ¨ <code>flutter_aliplayer</code> æ’ä»¶ä¸­æ·»åŠ æ¡ä»¶ç¼–è¯‘ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šä½¿ç”¨å­˜æ ¹å®ç°ï¼Œåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´å®ç°ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li>
<p><strong><strong>æ¡ä»¶ç¼–è¯‘</strong></strong>ï¼šä½¿ç”¨ <code>#if TARGET_OS_SIMULATOR</code> åŒºåˆ†æ¨¡æ‹Ÿå™¨å’ŒçœŸæœº</p>
</li>
<li>
<p><strong><strong>å­˜æ ¹å®ç°</strong></strong>ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸Šæä¾›æœ€å°åŒ–å®ç°ï¼Œè¿”å›æ˜ç¡®çš„é”™è¯¯æç¤º</p>
</li>
<li>
<p><strong><strong>å®Œæ•´å®ç°</strong></strong>ï¼šåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´çš„ AliPlayer SDK åŠŸèƒ½</p>
</li>
<li>
<p><strong><strong>ä¾èµ–ç®¡ç†</strong></strong>ï¼šé€šè¿‡ <code>dependency_overrides</code> ä½¿ç”¨ä¿®æ”¹åçš„æœ¬åœ°ç‰ˆæœ¬</p>
</li>
</ol>
<h2 data-id="heading-4">å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-5">1. ä¿®æ”¹ <code>FlutterAliMediaLoaderV2.m</code></h3>
<p>ä¸ºé¢„åŠ è½½ v2 åŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨å­˜æ ¹ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
#import "FlutterAliMediaLoaderV2.h"

#import &lt;TargetConditionals.h&gt;

#if TARGET_OS_SIMULATOR
// æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ï¼šè¿”å›é”™è¯¯ï¼Œä¸è°ƒç”¨ä»»ä½• AliPlayer API

- (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {

Â  Â  result([FlutterError errorWithCode:@"AliPlayerPreloadV2Unavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"AliPlayer preload v2 is not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

}

  


#else

// çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

// ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

</code></pre>
<h3 data-id="heading-6">2. ä¿®æ”¹ AliPlayerFactory.m</h3>
<p>ä¸ºæ»¤é•œåŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
- (void)setFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°æ»¤é•œåŠŸèƒ½

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

  


- (void)updateFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

</code></pre>
<p>ä¿®æ”¹å®Œæ¯•åï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘å•¦ã€‚ä¸ªäººå¼€å‘ç›´æ¥æ”¾åœ¨æœ¬åœ°ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘çš„æ—¶å€™å¼•ç”¨æœ¬åœ°<code>flutter_aliplayer</code>åŒ…ï¼ŒçœŸæœºä¸Šçº¿æ—¶ä½¿ç”¨é˜¿é‡Œäº‘çš„æ­£å¼åŒ…ã€‚å›¢é˜Ÿå¼€å‘æ—¶æœ€å¥½æŠŠä¿®æ”¹åçš„ä»£ç ä¸Šä¼ åˆ°è‡ªå·±å…¬å¸çš„git,ç„¶åé…ç½®æ‰“åŒ…è„šæœ¬ã€‚</p>
<h2 data-id="heading-7">é¡¹ç›®é…ç½®</h2>
<h3 data-id="heading-8">1. ä½¿ç”¨ Git ä»“åº“ç‰ˆæœ¬</h3>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­é…ç½® <code>dependency_overrides</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">dependency_overrides:</span>

Â  <span class="hljs-attr">flutter_aliplayer:</span>

Â  Â  <span class="hljs-attr">git:</span>

Â  Â  Â  <span class="hljs-attr">url:</span> <span class="hljs-string">è‡ªå·±çš„.git</span>

</code></pre>
<h3 data-id="heading-9">2. æ„å»ºè„šæœ¬è‡ªåŠ¨åˆ‡æ¢</h3>
<p><code>build.sh</code> è„šæœ¬ä¼šåœ¨ä¸åŒåœºæ™¯è‡ªåŠ¨åˆ‡æ¢ä¾èµ–æºï¼š</p>
<ul>
<li>
<p>æ³¨é‡Šæ‰ git é…ç½®ï¼Œä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬</p>
</li>
<li>
<p>å–æ¶ˆæ³¨é‡Š git é…ç½®ï¼Œä½¿ç”¨åŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤çš„ç‰ˆæœ¬</p>
</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ³¨é‡Šæ‰ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ pub.dev ç‰ˆæœ¬</span>

comment_flutter_aliplayer_override

  


<span class="hljs-comment"># æ¢å¤ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ git ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</span>

uncomment_flutter_aliplayer_override

</code></pre>
<h3 data-id="heading-10">æ¨¡æ‹Ÿå™¨ä¸Šçš„é™åˆ¶</h3>
<p>åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸Šï¼Œè§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ä¸å¯ç”¨ï¼Œä¿®æ”¹åªæ˜¯ä¸ºäº†å¼€å‘ä¸­æ–¹ä¾¿ä½¿ç”¨iOSæ¨¡æ‹Ÿå™¨ã€‚</p>
<h3 data-id="heading-11">ç¬¦å·æ£€æŸ¥</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ¡†æ¶ä¸­çš„ç¬¦å·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ£€æŸ¥æ‰€æœ‰æ¶æ„</span>

lipo -info ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer

<span class="hljs-comment"># æ£€æŸ¥ x86_64 æ¶æ„ä¸­çš„ç¬¦å·</span>

lipo ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer -thin x86_64 -output /tmp/AliyunPlayer_x86_64

nm -gU /tmp/AliyunPlayer_x86_64 | grep AVPFilter

</code></pre>
<h3 data-id="heading-12">ä¾èµ–ç®¡ç†</h3>
<ul>
<li>
<p><strong><strong>å¼€å‘ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ git ä»“åº“ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</p>
</li>
<li>
<p><strong><strong>ç”Ÿäº§ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬ï¼ˆé¿å…æœ¬åœ°ä¿®æ”¹å½±å“ç”Ÿäº§æ„å»ºï¼‰</p>
</li>
</ul>
<h2 data-id="heading-13">æœªæ¥æ”¹è¿›</h2>
<p>å¦‚æœå“ªå¤©<code>AliPlayer SDK</code>å®˜æ–¹æä¾›äº†åŒ…å«å®Œæ•´æ¨¡æ‹Ÿå™¨æ”¯æŒçš„ç‰ˆæœ¬ï¼Œé‚£æœ€å¥½ä¸è¿‡ã€‚</p>
<h2 data-id="heading-14">ç›¸å…³æ–‡ä»¶</h2>
<ul>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/FlutterAliMediaLoaderV2.m</code> - é¢„åŠ è½½ v2 å®ç°</p>
</li>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/AliPlayerFactory.m</code> - æ’­æ”¾å™¨å·¥å‚å®ç°</p>
</li>
<li>
<p><code>pubspec.yaml</code> - ä¾èµ–é…ç½®</p>
</li>
<li>
<p><code>build.sh</code> - æ„å»ºè„šæœ¬</p>
</li>
</ul>
<h2 data-id="heading-15">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fvod%2Fdeveloper-reference" target="_blank" title="https://help.aliyun.com/zh/vod/developer-reference" ref="nofollow noopener noreferrer">AliPlayer SDK å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fdevelopment%2Fplatform-integration%2Fplatform-channels" target="_blank" title="https://docs.flutter.dev/development/platform-integration/platform-channels" ref="nofollow noopener noreferrer">Flutter iOS å¹³å°ç‰¹å®šä»£ç </a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Farchive%2Fdocumentation%2FDeveloperTools%2FConceptual%2Fcross_development%2FUsing%2Fusing.html" target="_blank" title="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html" ref="nofollow noopener noreferrer">Objective-C æ¡ä»¶ç¼–è¯‘</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼˜å…ˆçº§é˜Ÿåˆ—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7576532425763012623</link>    <guid>https://juejin.cn/post/7576532425763012623</guid>    <pubDate>2025-11-26T03:04:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576532425763012623" data-draft-id="7576571960287068195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼˜å…ˆçº§é˜Ÿåˆ—è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T03:04:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰é£63"/> <meta itemprop="url" content="https://juejin.cn/user/1892682130797704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼˜å…ˆçº§é˜Ÿåˆ—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1892682130797704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰é£63
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:04:04.000Z" title="Wed Nov 26 2025 03:04:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¼˜å…ˆçº§é˜Ÿåˆ—æ¦‚è¿°</h2>
<h3 data-id="heading-1">1.1 åŸºæœ¬æ¦‚å¿µ</h3>
<p>ä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½å…³è”ä¸€ä¸ª"ä¼˜å…ˆçº§"ã€‚ä¸æ™®é€šé˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡º(FIFO)ä¸åŒï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—æŒ‰ç…§å…ƒç´ çš„ä¼˜å…ˆçº§è¿›è¡Œå‡ºé˜Ÿæ“ä½œï¼Œä¼˜å…ˆçº§é«˜çš„å…ƒç´ å…ˆå‡ºé˜Ÿã€‚</p>
<h3 data-id="heading-2">1.2 Javaä¸­çš„PriorityQueue</h3>
<p>Javaæä¾›äº†<code>PriorityQueue</code>ç±»ï¼Œå®ƒå®ç°äº†<code>Queue</code>æ¥å£ï¼Œåº•å±‚åŸºäºå †æ•°æ®ç»“æ„å®ç°ã€‚</p>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.PriorityQueue;
<span class="hljs-keyword">import</span> java.util.Queue;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityQueueDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// é»˜è®¤åˆ›å»ºå°æ ¹å †ï¼ˆæœ€å°å †ï¼‰</span>
        Queue&lt;Integer&gt; minHeap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;();
        
        minHeap.offer(<span class="hljs-number">28</span>);
        minHeap.offer(<span class="hljs-number">23</span>);
        minHeap.offer(<span class="hljs-number">19</span>);
        minHeap.offer(<span class="hljs-number">21</span>);
        minHeap.offer(<span class="hljs-number">8</span>);
        minHeap.offer(<span class="hljs-number">18</span>);
        minHeap.offer(<span class="hljs-number">5</span>);
        
        System.out.println(<span class="hljs-string">"å°æ ¹å †å†…å®¹:"</span>);
        <span class="hljs-keyword">while</span> (!minHeap.isEmpty()) {
            System.out.print(minHeap.poll() + <span class="hljs-string">" "</span>);
        }
        <span class="hljs-comment">// è¾“å‡º: 5 8 18 19 21 23 28</span>
    }
}
</code></pre>
<h2 data-id="heading-3">äºŒã€å †æ•°æ®ç»“æ„è¯¦è§£</h2>
<h3 data-id="heading-4">2.1 å †çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š</p>
<ul>
<li><strong>å¤§æ ¹å †</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼</li>
<li><strong>å°æ ¹å †</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼</li>
</ul>
<h3 data-id="heading-5">2.2 å †çš„æ•°ç»„è¡¨ç¤º</h3>
<p>ç”±äºå †æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå¯ä»¥ç”¨æ•°ç»„é«˜æ•ˆå­˜å‚¨ï¼š</p>
<ul>
<li>çˆ¶èŠ‚ç‚¹ä¸‹æ ‡ï¼š<code>(i-1)/2</code></li>
<li>å·¦å­èŠ‚ç‚¹ï¼š<code>2*i + 1</code></li>
<li>å³å­èŠ‚ç‚¹ï¼š<code>2*i + 2</code></li>
</ul>
<h3 data-id="heading-6">2.3 åˆ›å»ºè‡ªå®šä¹‰å †ç±»å‹</h3>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.Comparator;

<span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå™¨åˆ›å»ºå¤§æ ¹å †</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MaxHeapComparator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparator</span>&lt;Integer&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer a, Integer b)</span> {
        <span class="hljs-keyword">return</span> b - a; <span class="hljs-comment">// é™åºæ’åˆ—ï¼Œåˆ›å»ºå¤§æ ¹å †</span>
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomHeapDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨åˆ›å»ºå¤§æ ¹å †</span>
        Queue&lt;Integer&gt; maxHeap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxHeapComparator</span>());
        
        maxHeap.offer(<span class="hljs-number">28</span>);
        maxHeap.offer(<span class="hljs-number">23</span>);
        maxHeap.offer(<span class="hljs-number">19</span>);
        maxHeap.offer(<span class="hljs-number">21</span>);
        maxHeap.offer(<span class="hljs-number">8</span>);
        maxHeap.offer(<span class="hljs-number">18</span>);
        maxHeap.offer(<span class="hljs-number">5</span>);
        
        System.out.println(<span class="hljs-string">"å¤§æ ¹å †å†…å®¹:"</span>);
        <span class="hljs-keyword">while</span> (!maxHeap.isEmpty()) {
            System.out.print(maxHeap.poll() + <span class="hljs-string">" "</span>);
        }
        <span class="hljs-comment">// è¾“å‡º: 28 23 21 19 18 8 5</span>
    }
}
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å †çš„æ ¸å¿ƒæ“ä½œå®ç°</h2>
<h3 data-id="heading-8">3.1 å‘ä¸‹è°ƒæ•´ç®—æ³•</h3>
<h4 data-id="heading-9">å¤§æ ¹å †å‘ä¸‹è°ƒæ•´</h4>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">/**
 * å¤§æ ¹å †å‘ä¸‹è°ƒæ•´
 * @param root éœ€è¦è°ƒæ•´çš„æ ¹èŠ‚ç‚¹ä¸‹æ ‡
 * @param len å †çš„æœ‰æ•ˆé•¿åº¦
 */
private void shiftDownBig(int root, int len) {
    int <span class="hljs-attr">parent</span> = root<span class="hljs-comment">;</span>
    int <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">; // å·¦å­©å­</span>
    
    while (child &lt; len) {
        // é€‰æ‹©å·¦å³å­©å­ä¸­è¾ƒå¤§çš„é‚£ä¸ª
        if (child + 1 &lt; len &amp;&amp; elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[child + 1]</span>) {
            child++<span class="hljs-comment">; // å³å­©å­æ›´å¤§</span>
        }
        
        // å¦‚æœå­©å­å¤§äºçˆ¶äº²ï¼Œéœ€è¦äº¤æ¢
        if (elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[parent]</span>) {
            swap(parent, child)<span class="hljs-comment">;</span>
            <span class="hljs-attr">parent</span> = child<span class="hljs-comment">;</span>
            <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        } else {
            break<span class="hljs-comment">; // è°ƒæ•´å®Œæˆ</span>
        }
    }
}

/**
 * å°æ ¹å †å‘ä¸‹è°ƒæ•´
 */
private void shiftDownSmall(int root, int len) {
    int <span class="hljs-attr">parent</span> = root<span class="hljs-comment">;</span>
    int <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    
    while (child &lt; len) {
        // é€‰æ‹©å·¦å³å­©å­ä¸­è¾ƒå°çš„é‚£ä¸ª
        if (child + 1 &lt; len &amp;&amp; elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[child + 1]</span>) {
            child++<span class="hljs-comment">;</span>
        }
        
        // å¦‚æœå­©å­å°äºçˆ¶äº²ï¼Œéœ€è¦äº¤æ¢
        if (elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[parent]</span>) {
            swap(parent, child)<span class="hljs-comment">;</span>
            <span class="hljs-attr">parent</span> = child<span class="hljs-comment">;</span>
            <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        } else {
            break<span class="hljs-comment">;</span>
        }
    }
}

private void swap(int i, int j) {
    int <span class="hljs-attr">temp</span> = elem[i]<span class="hljs-comment">;</span>
    elem<span class="hljs-section">[i]</span> = elem<span class="hljs-section">[j]</span><span class="hljs-comment">;</span>
    elem<span class="hljs-section">[j]</span> = temp<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-10">å‘ä¸‹è°ƒæ•´è¿‡ç¨‹å›¾è§£</h4>
<p>text</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆå§‹å¤§æ ¹å †ï¼ˆéœ€è¦è°ƒæ•´èŠ‚ç‚¹24ï¼‰:</span>
       67
      /  \
     45   12
    /  \  / \
   24  29 8  10
  / \
 19  21

<span class="hljs-section">æ­¥éª¤1: 24ä¸è¾ƒå¤§çš„å­©å­45æ¯”è¾ƒï¼Œ24 &lt; 45ï¼Œäº¤æ¢</span>
       67
      /  \
     45   12
    /  \  / \
   45  29 8  10  â† 24ç§»åŠ¨åˆ°45çš„ä½ç½®
  / \
 19  21

<span class="hljs-section">æ­¥éª¤2: 24ä¸è¾ƒå¤§çš„å­©å­29æ¯”è¾ƒï¼Œ24 &lt; 29ï¼Œäº¤æ¢</span>
       67
      /  \
     45   12
    /  \  / \
   29  29 8  10  â† 24ç§»åŠ¨åˆ°29çš„ä½ç½®
  / \
 19  21

<span class="hljs-section">æœ€ç»ˆ: 24æ‰¾åˆ°åˆé€‚ä½ç½®</span>
       67
      /  \
     45   12
    /  \  / \
   29  24 8  10
  / \
 19  21
</code></pre>
<h3 data-id="heading-11">3.2 å‘ä¸Šè°ƒæ•´ç®—æ³•</h3>
<h4 data-id="heading-12">å¤§æ ¹å †å‘ä¸Šè°ƒæ•´</h4>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">/**
 * å¤§æ ¹å †å‘ä¸Šè°ƒæ•´
 * @param child éœ€è¦è°ƒæ•´çš„å­©å­èŠ‚ç‚¹ä¸‹æ ‡
 */
private void shiftUpBig(int child) {
    int <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    
    while (child &gt; 0) {
        // å¦‚æœå­©å­å¤§äºçˆ¶äº²ï¼Œéœ€è¦äº¤æ¢
        if (elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[parent]</span>) {
            swap(child, parent)<span class="hljs-comment">;</span>
            <span class="hljs-attr">child</span> = parent<span class="hljs-comment">;</span>
            <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
        } else {
            break<span class="hljs-comment">; // è°ƒæ•´å®Œæˆ</span>
        }
    }
}

/**
 * å°æ ¹å †å‘ä¸Šè°ƒæ•´
 */
private void shiftUpSmall(int child) {
    int <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    
    while (child &gt; 0) {
        // å¦‚æœå­©å­å°äºçˆ¶äº²ï¼Œéœ€è¦äº¤æ¢
        if (elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[parent]</span>) {
            swap(child, parent)<span class="hljs-comment">;</span>
            <span class="hljs-attr">child</span> = parent<span class="hljs-comment">;</span>
            <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
        } else {
            break<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-13">å‘ä¸Šè°ƒæ•´è¿‡ç¨‹å›¾è§£</h4>
<p>text</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆå§‹ï¼ˆéœ€è¦è°ƒæ•´èŠ‚ç‚¹24ï¼‰:</span>
       67
      /  \
     45   12
    /  \  / \
   29  19 8  10
  / \
 21  24

<span class="hljs-section">æ­¥éª¤1: 24ä¸ç›´æ¥çˆ¶äº²21æ¯”è¾ƒï¼Œ24 &gt; 21ï¼Œäº¤æ¢</span>
       67
      /  \
     45   12
    /  \  / \
   29  19 8  10
  / \
 24  21

<span class="hljs-section">æ­¥éª¤2: 24ä¸çˆ¶äº²29æ¯”è¾ƒï¼Œ24 &lt; 29ï¼Œåœæ­¢</span>
       67
      /  \
     45   12
    /  \  / \
   29  19 8  10
  / \
 24  21
</code></pre>
<h2 data-id="heading-14">å››ã€å †çš„æ„å»ºæ–¹æ³•</h2>
<h3 data-id="heading-15">4.1 å‘ä¸‹è°ƒæ•´å»ºå †</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class HeapBuilder {
    private int<span class="hljs-section">[]</span> elem<span class="hljs-comment">;</span>
    
    /**
     * å‘ä¸‹è°ƒæ•´æ„å»ºå¤§æ ¹å †
     * æ—¶é—´å¤æ‚åº¦: O(n)
     */
    public void buildMaxHeapDown(int<span class="hljs-section">[]</span> array) {
        <span class="hljs-attr">this.elem</span> = array.clone()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = elem.length<span class="hljs-comment">;</span>
        
        // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å‘ä¸‹è°ƒæ•´
        for (int <span class="hljs-attr">i</span> = (n - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
            shiftDownBig(i, n)<span class="hljs-comment">;</span>
        }
    }
    
    /**
     * å‘ä¸‹è°ƒæ•´æ„å»ºå°æ ¹å †
     */
    public void buildMinHeapDown(int<span class="hljs-section">[]</span> array) {
        <span class="hljs-attr">this.elem</span> = array.clone()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = elem.length<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = (n - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
            shiftDownSmall(i, n)<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-16">4.2 å‘ä¸Šè°ƒæ•´å»ºå †</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class HeapBuilder {
    /**
     * å‘ä¸Šè°ƒæ•´æ„å»ºå¤§æ ¹å †
     * æ—¶é—´å¤æ‚åº¦: O(n log n)
     */
    public void buildMaxHeapUp(int<span class="hljs-section">[]</span> array) {
        <span class="hljs-attr">this.elem</span> = array.clone()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = elem.length<span class="hljs-comment">;</span>
        
        // ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹å‘ä¸Šè°ƒæ•´
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt; n; i++) {</span>
            shiftUpBig(i)<span class="hljs-comment">;</span>
        }
    }
    
    /**
     * å‘ä¸Šè°ƒæ•´æ„å»ºå°æ ¹å †
     */
    public void buildMinHeapUp(int<span class="hljs-section">[]</span> array) {
        <span class="hljs-attr">this.elem</span> = array.clone()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = elem.length<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt; n; i++) {</span>
            shiftUpSmall(i)<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h2 data-id="heading-17">äº”ã€å®Œæ•´å †å®ç°</h2>
<h3 data-id="heading-18">5.1 è‡ªå®šä¹‰å †ç±»</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">import java.util.Arrays<span class="hljs-comment">;</span>
import java.util.NoSuchElementException<span class="hljs-comment">;</span>

public class MyPriorityQueue {
    private int<span class="hljs-section">[]</span> elem<span class="hljs-comment">;      // å­˜å‚¨å †å…ƒç´ çš„æ•°ç»„</span>
    private int size<span class="hljs-comment">;        // å †ä¸­å…ƒç´ ä¸ªæ•°</span>
    private boolean isMaxHeap<span class="hljs-comment">; // æ ‡è®°æ˜¯å¦ä¸ºå¤§æ ¹å †</span>
    
    private static final int <span class="hljs-attr">DEFAULT_CAPACITY</span> = <span class="hljs-number">10</span><span class="hljs-comment">;</span>
    
    // æ„é€ æ–¹æ³•
    public MyPriorityQueue() {
        this(false)<span class="hljs-comment">; // é»˜è®¤å°æ ¹å †</span>
    }
    
    public MyPriorityQueue(boolean isMaxHeap) {
        <span class="hljs-attr">this.elem</span> = new int[DEFAULT_CAPACITY]<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.size</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.isMaxHeap</span> = isMaxHeap<span class="hljs-comment">;</span>
    }
    
    public MyPriorityQueue(int<span class="hljs-section">[]</span> array, boolean isMaxHeap) {
        <span class="hljs-attr">this.isMaxHeap</span> = isMaxHeap<span class="hljs-comment">;</span>
        buildHeap(array)<span class="hljs-comment">;</span>
    }
    
    // æ„å»ºå †
    private void buildHeap(int<span class="hljs-section">[]</span> array) {
        <span class="hljs-attr">this.elem</span> = array.clone()<span class="hljs-comment">;</span>
        <span class="hljs-attr">this.size</span> = array.length<span class="hljs-comment">;</span>
        
        // ä½¿ç”¨å‘ä¸‹è°ƒæ•´å»ºå †ï¼ˆæ•ˆç‡æ›´é«˜ï¼‰
        for (int <span class="hljs-attr">i</span> = (size - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
            shiftDown(i)<span class="hljs-comment">;</span>
        }
    }
    
    // ç»Ÿä¸€çš„å‘ä¸‹è°ƒæ•´æ–¹æ³•
    private void shiftDown(int root) {
        if (isMaxHeap) {
            shiftDownBig(root, size)<span class="hljs-comment">;</span>
        } else {
            shiftDownSmall(root, size)<span class="hljs-comment">;</span>
        }
    }
    
    // ç»Ÿä¸€çš„å‘ä¸Šè°ƒæ•´æ–¹æ³•
    private void shiftUp(int child) {
        if (isMaxHeap) {
            shiftUpBig(child)<span class="hljs-comment">;</span>
        } else {
            shiftUpSmall(child)<span class="hljs-comment">;</span>
        }
    }
    
    // æ’å…¥å…ƒç´ 
    public void offer(int val) {
        // æ‰©å®¹æ£€æŸ¥
        if (size &gt;= elem.length) {
            <span class="hljs-attr">elem</span> = Arrays.copyOf(elem, elem.length * <span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
        }
        
        elem<span class="hljs-section">[size]</span> = val<span class="hljs-comment">;</span>
        shiftUp(size)<span class="hljs-comment">;</span>
        size++<span class="hljs-comment">;</span>
    }
    
    // åˆ é™¤å †é¡¶å…ƒç´ 
    public int poll() {
        if (isEmpty()) {
            throw new NoSuchElementException("Heap is empty")<span class="hljs-comment">;</span>
        }
        
        int <span class="hljs-attr">result</span> = elem[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
        // å°†æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°å †é¡¶
        elem<span class="hljs-section">[0]</span> = elem<span class="hljs-section">[size - 1]</span><span class="hljs-comment">;</span>
        size--<span class="hljs-comment">;</span>
        
        // ä»å †é¡¶å¼€å§‹å‘ä¸‹è°ƒæ•´
        if (size &gt; 0) {
            shiftDown(0)<span class="hljs-comment">;</span>
        }
        
        return result<span class="hljs-comment">;</span>
    }
    
    // è·å–å †é¡¶å…ƒç´ ï¼ˆä¸åˆ é™¤ï¼‰
    public int peek() {
        if (isEmpty()) {
            throw new NoSuchElementException("Heap is empty")<span class="hljs-comment">;</span>
        }
        return elem<span class="hljs-section">[0]</span><span class="hljs-comment">;</span>
    }
    
    // å †å¤§å°
    public int size() {
        return size<span class="hljs-comment">;</span>
    }
    
    // åˆ¤æ–­å †æ˜¯å¦ä¸ºç©º
    public boolean isEmpty() {
        return <span class="hljs-attr">size</span> == <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    }
    
    // æ¸…ç©ºå †
    public void clear() {
        <span class="hljs-attr">size</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        // å¯é€‰ï¼šé‡Šæ”¾æ•°ç»„å¼•ç”¨
        // <span class="hljs-attr">elem</span> = new int[DEFAULT_CAPACITY]<span class="hljs-comment">;</span>
    }
    
    // æ‰“å°å †å†…å®¹ï¼ˆè°ƒè¯•ç”¨ï¼‰
    public void printHeap() {
        System.out.print("Heap: ")<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; size; i++) {</span>
            System.out.print(elem<span class="hljs-section">[i]</span> + " ")<span class="hljs-comment">;</span>
        }
        System.out.println()<span class="hljs-comment">;</span>
    }
    
    // åŸæœ‰çš„è°ƒæ•´æ–¹æ³•ï¼ˆç¨ä½œä¿®æ”¹ï¼‰
    private void shiftDownBig(int root, int len) {
        int <span class="hljs-attr">parent</span> = root<span class="hljs-comment">;</span>
        int <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        
        while (child &lt; len) {
            if (child + 1 &lt; len &amp;&amp; elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[child + 1]</span>) {
                child++<span class="hljs-comment">;</span>
            }
            if (elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[parent]</span>) {
                swap(parent, child)<span class="hljs-comment">;</span>
                <span class="hljs-attr">parent</span> = child<span class="hljs-comment">;</span>
                <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
            } else {
                break<span class="hljs-comment">;</span>
            }
        }
    }
    
    private void shiftDownSmall(int root, int len) {
        int <span class="hljs-attr">parent</span> = root<span class="hljs-comment">;</span>
        int <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        
        while (child &lt; len) {
            if (child + 1 &lt; len &amp;&amp; elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[child + 1]</span>) {
                child++<span class="hljs-comment">;</span>
            }
            if (elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[parent]</span>) {
                swap(parent, child)<span class="hljs-comment">;</span>
                <span class="hljs-attr">parent</span> = child<span class="hljs-comment">;</span>
                <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
            } else {
                break<span class="hljs-comment">;</span>
            }
        }
    }
    
    private void shiftUpBig(int child) {
        int <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
        
        while (child &gt; 0) {
            if (elem<span class="hljs-section">[child]</span> &gt; elem<span class="hljs-section">[parent]</span>) {
                swap(child, parent)<span class="hljs-comment">;</span>
                <span class="hljs-attr">child</span> = parent<span class="hljs-comment">;</span>
                <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
            } else {
                break<span class="hljs-comment">;</span>
            }
        }
    }
    
    private void shiftUpSmall(int child) {
        int <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
        
        while (child &gt; 0) {
            if (elem<span class="hljs-section">[child]</span> &lt; elem<span class="hljs-section">[parent]</span>) {
                swap(child, parent)<span class="hljs-comment">;</span>
                <span class="hljs-attr">child</span> = parent<span class="hljs-comment">;</span>
                <span class="hljs-attr">parent</span> = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
            } else {
                break<span class="hljs-comment">;</span>
            }
        }
    }
    
    private void swap(int i, int j) {
        int <span class="hljs-attr">temp</span> = elem[i]<span class="hljs-comment">;</span>
        elem<span class="hljs-section">[i]</span> = elem<span class="hljs-section">[j]</span><span class="hljs-comment">;</span>
        elem<span class="hljs-section">[j]</span> = temp<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-19">5.2 æµ‹è¯•ç¤ºä¾‹</h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HeapTest</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-comment">// æµ‹è¯•å°æ ¹å †</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"=== å°æ ¹å †æµ‹è¯• ==="</span>);
        MyPriorityQueue minHeap = <span class="hljs-keyword">new</span> MyPriorityQueue(<span class="hljs-literal">false</span>);
        
        <span class="hljs-built_in">int</span>[] testData = {<span class="hljs-number">28</span>, <span class="hljs-number">23</span>, <span class="hljs-number">19</span>, <span class="hljs-number">21</span>, <span class="hljs-number">8</span>, <span class="hljs-number">18</span>, <span class="hljs-number">5</span>};
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> num : testData) {
            minHeap.offer(num);
        }
        
        minHeap.printHeap(); <span class="hljs-comment">// å †ç»“æ„</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æŒ‰ä¼˜å…ˆçº§å‡ºé˜Ÿ:"</span>);
        <span class="hljs-keyword">while</span> (!minHeap.isEmpty()) {
            System.<span class="hljs-keyword">out</span>.print(minHeap.poll() + <span class="hljs-string">" "</span>);
        }
        System.<span class="hljs-keyword">out</span>.println();
        
        <span class="hljs-comment">// æµ‹è¯•å¤§æ ¹å †</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"\n=== å¤§æ ¹å †æµ‹è¯• ==="</span>);
        MyPriorityQueue maxHeap = <span class="hljs-keyword">new</span> MyPriorityQueue(<span class="hljs-literal">true</span>);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> num : testData) {
            maxHeap.offer(num);
        }
        
        maxHeap.printHeap(); <span class="hljs-comment">// å †ç»“æ„</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æŒ‰ä¼˜å…ˆçº§å‡ºé˜Ÿ:"</span>);
        <span class="hljs-keyword">while</span> (!maxHeap.isEmpty()) {
            System.<span class="hljs-keyword">out</span>.print(maxHeap.poll() + <span class="hljs-string">" "</span>);
        }
        System.<span class="hljs-keyword">out</span>.println();
        
        <span class="hljs-comment">// æµ‹è¯•ä»æ•°ç»„æ„å»ºå †</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"\n=== æ•°ç»„æ„å»ºå †æµ‹è¯• ==="</span>);
        <span class="hljs-built_in">int</span>[] array = {<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>};
        MyPriorityQueue heapFromArray = <span class="hljs-keyword">new</span> MyPriorityQueue(array, <span class="hljs-literal">true</span>);
        
        heapFromArray.printHeap();
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å †é¡¶å…ƒç´ : "</span> + heapFromArray.peek());
    }
}
</code></pre>
<h2 data-id="heading-20">å…­ã€å †çš„åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-21">6.1 å®é™…åº”ç”¨</h3>
<ol>
<li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼šæ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦</li>
<li><strong>æ•°æ®æµçš„ä¸­ä½æ•°</strong>ï¼šç»´æŠ¤ä¸¤ä¸ªå †ï¼ˆå¤§æ ¹å †+å°æ ¹å †ï¼‰</li>
<li><strong>Dijkstraç®—æ³•</strong>ï¼šå›¾çš„æœ€çŸ­è·¯å¾„</li>
<li><strong>Huffmanç¼–ç </strong>ï¼šæ•°æ®å‹ç¼©</li>
<li><strong>å †æ’åº</strong>ï¼šé«˜æ•ˆçš„æ’åºç®—æ³•</li>
</ol>
<h3 data-id="heading-22">6.2 å †æ’åºå®ç°</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class HeapSort {
    /**
     * å †æ’åºï¼ˆå‡åº - ä½¿ç”¨å¤§æ ¹å †ï¼‰
     */
    public static void heapSort(int<span class="hljs-section">[]</span> arr) {
        int <span class="hljs-attr">n</span> = arr.length<span class="hljs-comment">;</span>
        
        // æ„å»ºå¤§æ ¹å †
        for (int <span class="hljs-attr">i</span> = (n - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
            shiftDownBig(arr, i, n)<span class="hljs-comment">;</span>
        }
        
        // é€ä¸ªæå–æœ€å¤§å…ƒç´ 
        for (int <span class="hljs-attr">i</span> = n - <span class="hljs-number">1</span><span class="hljs-comment">; i &gt; 0; i--) {</span>
            // å°†å †é¡¶å…ƒç´ ï¼ˆæœ€å¤§ï¼‰ä¸å½“å‰æœ«å°¾å…ƒç´ äº¤æ¢
            swap(arr, 0, i)<span class="hljs-comment">;</span>
            // è°ƒæ•´å‰©ä½™å…ƒç´ ä¸ºå †
            shiftDownBig(arr, 0, i)<span class="hljs-comment">;</span>
        }
    }
    
    private static void shiftDownBig(int<span class="hljs-section">[]</span> arr, int root, int len) {
        int <span class="hljs-attr">parent</span> = root<span class="hljs-comment">;</span>
        int <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        
        while (child &lt; len) {
            if (child + 1 &lt; len &amp;&amp; arr<span class="hljs-section">[child]</span> &lt; arr<span class="hljs-section">[child + 1]</span>) {
                child++<span class="hljs-comment">;</span>
            }
            if (arr<span class="hljs-section">[child]</span> &gt; arr<span class="hljs-section">[parent]</span>) {
                swap(arr, parent, child)<span class="hljs-comment">;</span>
                <span class="hljs-attr">parent</span> = child<span class="hljs-comment">;</span>
                <span class="hljs-attr">child</span> = <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
            } else {
                break<span class="hljs-comment">;</span>
            }
        }
    }
    
    private static void swap(int<span class="hljs-section">[]</span> arr, int i, int j) {
        int <span class="hljs-attr">temp</span> = arr[i]<span class="hljs-comment">;</span>
        arr<span class="hljs-section">[i]</span> = arr<span class="hljs-section">[j]</span><span class="hljs-comment">;</span>
        arr<span class="hljs-section">[j]</span> = temp<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h2 data-id="heading-23">ä¸ƒã€æ€§èƒ½åˆ†æä¸æ€»ç»“</h2>
<h3 data-id="heading-24">7.1 æ—¶é—´å¤æ‚åº¦</h3>






























<table><thead><tr><th>æ“ä½œ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ’å…¥å…ƒç´ </td><td>O(log n)</td><td>å‘ä¸Šè°ƒæ•´</td></tr><tr><td>åˆ é™¤å †é¡¶</td><td>O(log n)</td><td>å‘ä¸‹è°ƒæ•´</td></tr><tr><td>è·å–å †é¡¶</td><td>O(1)</td><td>ç›´æ¥è®¿é—®</td></tr><tr><td>å»ºå †</td><td>O(n)</td><td>å‘ä¸‹è°ƒæ•´å»ºå †</td></tr></tbody></table>
<h3 data-id="heading-25">7.2 æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h3>
<ol>
<li><strong>å †çš„æ€§è´¨</strong>ï¼šå®Œå…¨äºŒå‰æ ‘ + å †åºæ€§è´¨</li>
<li><strong>æ•°ç»„å­˜å‚¨</strong>ï¼šåˆ©ç”¨å®Œå…¨äºŒå‰æ ‘çš„ç‰¹æ€§é«˜æ•ˆå­˜å‚¨</li>
<li><strong>è°ƒæ•´æ“ä½œ</strong>ï¼šå‘ä¸Šè°ƒæ•´ç”¨äºæ’å…¥ï¼Œå‘ä¸‹è°ƒæ•´ç”¨äºåˆ é™¤</li>
<li><strong>å»ºå †é€‰æ‹©</strong>ï¼šå‘ä¸‹è°ƒæ•´å»ºå †æ•ˆç‡æ›´é«˜(O(n) vs O(n log n))</li>
<li><strong>åº”ç”¨å¹¿æ³›</strong>ï¼šä»æ“ä½œç³»ç»Ÿåˆ°ç®—æ³•ç«èµ›éƒ½æœ‰é‡è¦åº”ç”¨</li>
</ol>
<p>é€šè¿‡æ·±å…¥ç†è§£å †çš„åŸç†å’Œå®ç°ï¼Œå¯ä»¥æ›´å¥½åœ°åº”ç”¨è¿™ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„è§£å†³å®é™…é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡ç£…æ›´æ–°ï¼è°·æ­Œæ——èˆ°æ¨¡å‹Gemini 3 Proä¸Šçº¿]]></title>    <link>https://juejin.cn/post/7576585511878148122</link>    <guid>https://juejin.cn/post/7576585511878148122</guid>    <pubDate>2025-11-26T03:16:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576585511878148122" data-draft-id="7576518316136939571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡ç£…æ›´æ–°ï¼è°·æ­Œæ——èˆ°æ¨¡å‹Gemini 3 Proä¸Šçº¿"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2025-11-26T03:16:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªå’ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/581021766790141"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡ç£…æ›´æ–°ï¼è°·æ­Œæ——èˆ°æ¨¡å‹Gemini 3 Proä¸Šçº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/581021766790141/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªå’ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:16:20.000Z" title="Wed Nov 26 2025 03:16:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´11æœˆ18æ—¥ï¼Œè°·æ­Œå‘å¸ƒæœ€æ–°æ——èˆ°æ¨¡å‹Gemini 3 Proã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6119ccc48eea46dab9061e17ecb5811d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=rxPvilH9Xokseu1FtrbAkXxqCJ0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€ä¸–ç•Œä¸Šæœ€å¥½çš„å¤šæ¨¡æ€æ¨¡å‹</h2>
<p>è°·æ­Œ CEO Sundar Pichaiè¡¨ç¤ºï¼ŒGemini 3æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„å¤šæ¨¡æ€ç†è§£æ¨¡å‹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢æœ€å¼ºå¤§çš„ä»£ç†+æ„Ÿåº”ç¼–ç æ¨¡å‹ã€‚Gemini 3èƒ½æŠŠä»»ä½•æƒ³æ³•å˜æˆç°å®ï¼Œè¿…é€ŸæŒæ¡ä¸Šä¸‹æ–‡å’Œæ„å›¾ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨æ›´å°‘çš„æç¤ºä¸‹å¾—åˆ°ä½ æƒ³è¦çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d3ffa1210eb4a62980b5b62a105279f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=zENBzNqnxxnszuE0eZTWLinzSxI%3D" alt="" loading="lazy"/></p>
<p>è°·æ­Œå®˜æ–¹ç§°ï¼ŒGemini 3 Proæ˜¯è°·æ­Œè¿ˆå‘AGIçš„ä¸‹ä¸€æ­¥ï¼Œå®ƒæœ‰ï¼š</p>
<ul>
<li>ğŸ§ å…ˆè¿›çš„æ¨ç†</li>
<li>æ·±å…¥çš„å¤šæ¨¡å¼ç†è§£</li>
<li>ğŸ’»å¼ºå¤§çš„æ°›å›´ç¼–ç ï¼Œè®©ä½ å¯ä»¥ä»æç¤ºåˆ°åº”ç”¨ç¨‹åºåœ¨ä¸€ä¸ªé•œå¤´</li>
<li>ğŸ¤æ”¹è¿›çš„ä»£ç†èƒ½åŠ›ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä»£è¡¨ä½ åšçš„äº‹æƒ…ï¼Œåœ¨ä½ çš„æŒ‡ç¤º</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ’è¡Œæ¦œå± æ¦œ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7d36650ea054e7697d150aafeb3a696~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=4%2BLfERbvjf1QdWDDOi9omrSEt4g%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¸€ä»½å…¨çƒé¡¶çº§AIå¤§æ¨¡å‹çš„èƒ½åŠ›æ’è¡Œæ¦œä¸­ï¼Œæ¯”è¾ƒäº†Gemini 3 Proä¸å…¶ä»–é¡¶çº§æ¨¡å‹ï¼ˆå¦‚Gemini 2.5 Proã€Claude Sonnet 4.5å’ŒGPT-5.1ï¼‰åœ¨å„ç§AIèƒ½åŠ›ä¸Šçš„è¡¨ç°ï¼ŒåŒ…æ‹¬å­¦æœ¯æ¨ç†ã€è§†è§‰ã€ç§‘å­¦çŸ¥è¯†ã€æ•°å­¦ç«èµ›ã€å¤šæ¨¡æ€ç†è§£ã€å±å¹•äº¤äº’ã€çŸ¥è¯†è·å–ã€è§†é¢‘åˆ†æã€ä»£ç ç¼–å†™ã€ä»£ç†å·¥å…·ä½¿ç”¨ç­‰ã€‚</p>
<p>è¿™ä¸ªæ’è¡Œæ¦œçªæ˜¾äº†Gemini 3 Proçš„å¼ºå¤§ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°å­¦ã€æ¨ç†å’Œå¤šæ¨¡æ€ä»»åŠ¡ä¸Šé¢†å…ˆç«äº‰å¯¹æ‰‹ï¼Œæ ‡å¿—ç€AIæŠ€æœ¯çš„é‡å¤§è¿›æ­¥ã€‚</p>
<p>ä¸»è¦äº®ç‚¹ï¼š</p>
<p>é¢†å…ˆæ€§èƒ½ï¼šåœ¨Humanity's Last Examä¸­å¾—åˆ†37.5%ï¼Œè¿œè¶…GPT-5.1çš„26.5%ï¼›ARC-AGI-2å¾—åˆ†31.1%ï¼Œæ˜¯ç«äº‰å¯¹æ‰‹çš„è¿‘ä¸¤å€ã€‚</p>
<p>å¤šé¢†åŸŸä¼˜åŠ¿ï¼šæ•°å­¦åŸºå‡†å¦‚AIME 2025è¾¾95%-100%ï¼Œå¤šæ¨¡æ€å¦‚MMMU-Pro 81%ã€‚</p>
<p>å®é™…åº”ç”¨ï¼šåœ¨ä»£ç†ä»»åŠ¡å’Œé•¿ä¸Šä¸‹æ–‡å¤„ç†ä¸Šè¡¨ç°å‡ºè‰²ï¼Œé€‚åˆå¤æ‚é—®é¢˜è§£å†³ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä»½<strong>åŠå…¨åœºçš„æˆç»©å•</strong>ï¼Œç›´è§‚åœ°å±•ç¤ºäº† Gemini 3 Pro ä¸ä»…è¶…è¶Šäº† GPT-5.1ï¼Œæ›´æ˜¯ç›®å‰å½“ä¹‹æ— æ„§çš„â€œåœ°è¡¨æœ€å¼ºâ€AIã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e280fa0213a54209a270f4f89630d892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=croLeWejVD17f2RbFfG2xbCNBqg%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¸“é—¨è€ƒå¯ŸAIåœ¨å¤æ‚æƒ…å¢ƒä¸‹çš„é€»è¾‘æ¨ç†å’Œè”æƒ³èƒ½åŠ›çš„â€œæ‰©å±•è¯è¯­å…³è”ï¼ˆExtended Word Connectionsï¼‰â€æ’è¡Œæ¦œä¸­ï¼ŒGemini 3 Pro çš„è¡¨ç°å ªç§°â€œç‹¬å­¤æ±‚è´¥â€ï¼š</p>
<p>æ–­å±‚ç¬¬ä¸€ï¼šçœ‹å›¾è¡¨æœ€å³ä¾§ï¼ŒGemini 3 Pro Preview ä»¥ 96.8% çš„æƒŠäººé«˜åˆ†å æ®æ¦œé¦–ï¼Œå‡ ä¹æ¥è¿‘æ»¡åˆ†ã€‚</p>
<p>è¶…è¶Šæœ€å¼ºå¯¹æ‰‹ï¼šå®ƒä¸ä»…å‡»è´¥äº†é©¬æ–¯å…‹çš„ Grok 4 (92.1%)ï¼Œæ›´å…³é”®çš„æ˜¯ï¼Œå®ƒåœ¨æµ‹è¯•ä¸­è¶…è¿‡äº† GPT-5 Pro (91.7%) ä»¥åŠ GPT-5 (high reasoning) (83.9%) ç­‰å¼ºåŠ²å¯¹æ‰‹ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œè¿™å¼ å›¾è¯æ˜äº†åœ¨å¤„ç†ç”±äºéœ€è¦æ·±åº¦æ€è€ƒå’Œæ¨ç†çš„â€œçƒ§è„‘â€ä»»åŠ¡æ—¶ï¼ŒGemini 3 Pro æ˜¯ç›®å‰å…¨çƒæœ€èªæ˜ã€æ¨ç†èƒ½åŠ›æœ€å¼ºçš„æ¨¡å‹ï¼Œç”šè‡³å‹è¿‡äº†ä¼ è¯´ä¸­çš„GPT-5.1ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€åœ¨å›½å†…å¦‚ä½•ä½¿ç”¨Gemini 3 Pro</h2>
<ul>
<li>âŒ ç›´æ¥è®¿é—®Geminiå®˜ç½‘ï¼Œä¼šé‡åˆ°ç½‘ç»œé—®é¢˜</li>
<li>âŒ å®˜æ–¹åº”ç”¨åœ¨ä¸­å›½åº”ç”¨å•†åº—ä¸å¯ç”¨</li>
<li>âœ… ç§‘å­¦ä¸Šç½‘ + 20ç¾é‡‘/æœˆå¼€é€šå®˜ç½‘ä¼šå‘˜</li>
<li>âœ… å¯ä»¥ä½¿ç”¨å›½å†…ç¬¬ä¸‰æ–¹é•œåƒç«™ç‚¹</li>
</ul>
<h2 data-id="heading-3">å›½å†…ç›´æ¥ä½¿ç”¨Gemini 3 Pro</h2>
<p>è°·æ­Œæµè§ˆå™¨è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nezhasoft.cloud" target="_blank" title="https://www.nezhasoft.cloud" ref="nofollow noopener noreferrer">www.nezhasoft.cloud</a></p>
<p><strong>ç§ä¿¡å“ªå’ï¼Œå¤‡æ³¨ä½“éªŒaiï¼Œé¢†å–ä½“éªŒç ã€‚</strong></p>
<p>åŒ…å«GPT-5.1ã€GPT-5.1 Thinkingã€Gemini 3 Proã€Claude Sonnet 4.5ã€Nano Banana 2ã€Codexã€Grok4ã€DeepSeek R1 0528ç­‰æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac0652d3a93d4c9ba0a25d5ccaaa3609~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=8dN5w%2FGXzGzOO%2BARHSuMof%2FDClM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">å››ã€é€šè¿‡Geminiè¾…åŠ©å­¦ä¹ ã€å·¥ä½œ</h2>
<p>å°½ç®¡å­˜åœ¨è®¿é—®é™åˆ¶ï¼Œä½† Gemini åœ¨ä¸­å›½çš„ç”¨æˆ·æ•°é‡æŒç»­å¢é•¿ï¼Œæ˜¯GPTã€Claudeä¹‹åçš„ç¬¬ä¸‰å¤§AIå·¨å¤´ã€‚</p>
<h3 data-id="heading-5">åœ¨å­¦ä¹ ä¸­ï¼ŒGemini 3 Pro ä¼šæä¾›å¾ˆå¤šæ ¸å¿ƒå¸®åŠ©ï¼š</h3>
<ol>
<li>ä¸ªäººæˆé•¿ä¸­çš„â€œçŸ¥è¯†æ•™ç»ƒâ€</li>
<li>è¯»æ‡‚éš¾å†…å®¹ï¼šæŠŠå¤æ‚çŸ¥è¯†è®²æ¸…æ¥š</li>
<li>å¸®åŠ©å†™ä½œã€æ€»ç»“ã€ç†è§£ææ–™</li>
<li>å¸®åŠ©å†™ä»£ç ã€ç†è§£ä»£ç ã€å­¦ä¹ è®¡ç®—æœºçŸ¥è¯†</li>
</ol>
<p>âœ… å­¦ä¹ åœºæ™¯ï¼šGemini 3 Pro ç»å…¸æç¤ºè¯</p>
<p>æç¤ºè¯æ¨¡æ¿ï¼ˆé€‚åˆè‡ªå­¦ã€è®ºæ–‡ç†è§£ã€æ•™æå­¦ä¹ ã€è¯­è¨€/æ•°å­¦/ç¼–ç¨‹å­¦ä¹ ï¼‰ ã€Œè¯·ä½œä¸ºä¸€åè€å¿ƒçš„å¯¼å¸ˆï¼Œæ ¹æ®æˆ‘çš„æ°´å¹³ï¼Œç”¨æœ€æ˜“æ‡‚çš„æ–¹å¼ä¸ºæˆ‘è®²è§£è¿™ä¸ªçŸ¥è¯†ç‚¹/è®ºæ–‡/ç« èŠ‚ã€‚ è¯·åšåˆ°ï¼š 1ï¼‰ç”¨é€šä¿—è§£é‡Šå…³é”®æ¦‚å¿µ 2ï¼‰ä¸¾ç”Ÿæ´»ç±»æ¯”å¸®åŠ©æˆ‘ç†è§£ 3ï¼‰æ‹†è§£æ­¥éª¤ä¸é€»è¾‘ 4ï¼‰ç”¨ä¾‹é¢˜æˆ–å®ä¾‹åŠ æ·±è®°å¿† 5ï¼‰æŒ‡å‡ºå¸¸è§è¯¯åŒº 6ï¼‰ä¸ºæˆ‘åˆ¶å®šå­¦ä¹ è·¯å¾„å’Œç»ƒä¹ é¢˜ å¦‚æœæˆ‘å“ªé‡Œç†è§£é”™äº†ï¼Œä¹Ÿè¯·åŠæ—¶çº æ­£ã€‚ ä½ çš„ç›®æ ‡æ˜¯å¸®åŠ©æˆ‘çœŸæ­£å­¦æ‡‚ï¼Œè€Œä¸æ˜¯åªç»™å‡ºç­”æ¡ˆã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99feb84ea3514efd82ad9c57f6397da3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=dmIa%2FSj6o84VC8YviEj%2Bng4p5%2FI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87cae9702284ec9ac27c16fe921c4ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=7bHdiGDdJp1HH0YTuzpOStsUASc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a5e229151e24dee9a4051d5e053d7d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=h3B2bHysY%2BzKOhx9ta6xnYvK%2Fsk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">åœ¨å·¥ä½œä¸­ï¼ŒGemini 3 Pro èƒ½å¸¦æ¥å“ªäº›æå‡ï¼Ÿ</h3>
<ol>
<li>è‡ªåŠ¨å¤„ç†é‡å¤å·¥ä½œï¼šçœæ—¶çœåŠ›</li>
<li>åˆ†ææ–‡æ¡£ã€æŠ¥å‘Šã€æ•°æ®ï¼šæå‡æ·±åº¦å·¥ä½œæ•ˆç‡</li>
<li>ä¼ä¸šçº§è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼šä»â€œå›ç­”é—®é¢˜â€åˆ°â€œå®Œæˆä»»åŠ¡â€</li>
<li>å¤šæ¨¡æ€èƒ½åŠ›å¸¦æ¥çœŸå®ä¸–ç•Œçš„å·¥ä½œä»·å€¼</li>
</ol>
<p>âœ… å·¥ä½œåœºæ™¯ï¼šGemini 3 Pro ç»å…¸æç¤ºè¯</p>
<p>æç¤ºè¯æ¨¡æ¿ï¼ˆé€‚åˆåŠå…¬ã€å†™æŠ¥å‘Šã€åˆ†æèµ„æ–™ã€è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼‰ ã€Œè¯·ä»¥ä¸“ä¸šåˆ†æå¸ˆ/é¡¹ç›®ç»ç†çš„è§’åº¦ï¼ŒåŸºäºæˆ‘æä¾›çš„æ‰€æœ‰èµ„æ–™ï¼ˆæ–‡æ¡£ã€å›¾ç‰‡ã€æˆªå›¾ã€PPTã€è¡¨æ ¼ç­‰ï¼‰ï¼Œä¸ºæˆ‘ï¼š 1ï¼‰æ€»ç»“æ ¸å¿ƒè¦ç‚¹ 2ï¼‰æç‚¼é£é™©ä¸æœºä¼š 3ï¼‰ç”Ÿæˆå¯æ‰§è¡Œçš„å†³ç­–å»ºè®® 4ï¼‰å¿…è¦æ—¶è¾“å‡ºç»“æ„åŒ–æ–‡ä»¶ï¼ˆå¦‚è¡¨æ ¼ã€æ¸…å•ã€PPT å¤§çº²ï¼‰ 5ï¼‰å¦‚æœä¿¡æ¯ä¸å¤Ÿï¼Œè¯·ä¸»åŠ¨æå‡ºä½ éœ€è¦çš„è¡¥å……ææ–™ã€‚ ä½ çš„ç›®æ ‡æ˜¯å¸®åŠ©æˆ‘æå‡å·¥ä½œæ•ˆç‡ï¼Œè®©å¤æ‚ä»»åŠ¡å˜å¾—æ¸…æ™°æ˜“æ‰§è¡Œã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aac60aad5b2348aab566c8a46d0bbbbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=K0ZweK5ga0wbR4Tmmle0n4FAVcM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3494547ae3a242a4a8ed787aec980ee9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq5ZCS57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731780&amp;x-signature=%2FgpdQ203Z7ToxNEu6Mf9uawjkQg%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ª CSS å±æ€§aspect-ratio]]></title>    <link>https://juejin.cn/post/7576575703166746630</link>    <guid>https://juejin.cn/post/7576575703166746630</guid>    <pubDate>2025-11-26T03:22:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576575703166746630" data-draft-id="7576646142315315241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ª CSS å±æ€§aspect-ratio"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-11-26T03:22:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WebGirl"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868584478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ª CSS å±æ€§aspect-ratio
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868584478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WebGirl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:22:42.000Z" title="Wed Nov 26 2025 03:22:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è®¾è®¡ç¨¿ä¸­çš„ç»„ä»¶å¸¸å¸¸ç²¾è‡´ã€è§„æ•´ï¼Œä½†ä¸€æ—¦è¿›å…¥å¼€å‘é˜¶æ®µï¼Œå°¤å…¶æ˜¯å“åº”å¼åœºæ™¯ä¸­ï¼Œéƒ¨åˆ† UI å°±å®¹æ˜“å¤±æ§ã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªåŒ…å«å›¾ç‰‡ã€è§†é¢‘æˆ–éœ€ä¿æŒå›ºå®šæ¯”ä¾‹çš„å¡ç‰‡ç½‘æ ¼ç»„ä»¶ã€‚è¡¨é¢çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—å¤§é‡å¸ƒå±€é™·é˜±ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œè®¸å¤šé¡¹ç›®ä¸­é‡‡ç”¨äº†ç›‘å¬Â <code>resize</code>Â äº‹ä»¶ã€æ‰‹åŠ¨è®¡ç®—å®½é«˜æ¯”ã€åŠ¨æ€æ³¨å…¥Â <code>style</code>Â å±æ€§ç­‰æ–¹å¼ã€‚è™½ç„¶åŠŸèƒ½å®ç°äº†ï¼Œä½†ä»£ç è‡ƒè‚¿ã€å¯ç»´æŠ¤æ€§å·®ã€å…¼å®¹æ€§é—®é¢˜é¢‘å‡ºã€‚</p>
<p>ç›´åˆ°ä¸€ä¸ª CSS å±æ€§å‡ºç°ï¼š<code>aspect-ratio</code>ã€‚</p>
<p>ç»“æœä»¤äººæƒŠè®¶ï¼šå‡ åè¡Œ JavaScript ç¬é—´å¯ä»¥è¢«ä¸€è¡Œæ ·å¼å–ä»£ã€‚</p>
<h2 data-id="heading-0">ä¼ ç»Ÿæ–¹æ¡ˆï¼šJavaScript + æ ·å¼æ‹¼æ¥</h2>
<p>ä»¥ä¸‹æ˜¯è®¸å¤šé¡¹ç›®ä¸­ä¸ºå®ç°ç­‰æ¯”ä¾‹å®¹å™¨æ‰€é‡‡ç”¨çš„å…¸å‹åšæ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> containers = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.aspect-box'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">resizeBoxes</span>(<span class="hljs-params"/>) {
  containers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">container</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> width = container.<span class="hljs-property">offsetWidth</span>;
    container.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${width * <span class="hljs-number">0.5625</span>}</span>px`</span>; <span class="hljs-comment">// 16:9</span>
  });
}

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, resizeBoxes);
<span class="hljs-title function_">resizeBoxes</span>();
</code></pre>
<p>è¿™ç§æ–¹å¼è™½ç„¶â€œå¯ç”¨â€ï¼Œä½†å­˜åœ¨å¤šä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ç»´æŠ¤æˆæœ¬é«˜</li>
<li>éœ€è¦é¢å¤–çš„ç›‘å¬å’Œé€»è¾‘å¤„ç†</li>
<li>é«˜æ€§èƒ½è®¾å¤‡ä¸Šä½“éªŒå°šå¯ï¼Œä½æ€§èƒ½è®¾å¤‡ä¸‹æ˜“å¡é¡¿</li>
<li>æµè§ˆå™¨çª—å£ç¼©æ”¾æ—¶å®¹æ˜“å‡ºç°æŠ–åŠ¨ï¼ˆlayout jankï¼‰</li>
</ul>
<h2 data-id="heading-1">ä¸€è¡Œä»£ç çš„è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œ<code>aspect-ratio</code>Â æä¾›äº†åŸç”Ÿæ”¯æŒï¼Œåªéœ€ä¸€è¡Œ CSSï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span>Â {  
Â Â aspect-ratio:Â <span class="hljs-number">16</span>Â /Â <span class="hljs-number">9</span>;  
}
</code></pre>
<p>æµè§ˆå™¨å°†è‡ªåŠ¨æ ¹æ®çˆ¶å…ƒç´ å®½åº¦è®¡ç®—å‡ºå¯¹åº”é«˜åº¦ï¼Œä»è€Œä¿æŒè®¾å®šæ¯”ä¾‹ï¼Œæ— éœ€å¼€å‘è€…å¹²é¢„ã€‚</p>
<h2 data-id="heading-2">ä¸¾ä¾‹</h2>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰å¡ç‰‡å¸ƒå±€</h4>
<p>ä»¥å¸¸è§çš„å¡ç‰‡ç»„ä»¶ä¸ºä¾‹ï¼Œä¼ ç»Ÿå†™æ³•é€šå¸¸å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span>Â {  
<span class="hljs-attribute">position</span>: relative;  
<span class="hljs-attribute">padding-top</span>:Â <span class="hljs-number">56.25%</span>;Â <span class="hljs-comment">/* for 16:9 */</span>  
}  
<span class="hljs-selector-class">.card</span>Â &gt;Â <span class="hljs-selector-class">.content</span>Â {  
<span class="hljs-attribute">position</span>: absolute;  
<span class="hljs-attribute">top</span>:Â <span class="hljs-number">0</span>;  
<span class="hljs-attribute">left</span>:Â <span class="hljs-number">0</span>;  
<span class="hljs-attribute">height</span>:Â <span class="hljs-number">100%</span>;  
<span class="hljs-attribute">width</span>:Â <span class="hljs-number">100%</span>;  
}
</code></pre>
<p>è¿™å¥—æ–¹æ¡ˆä¾èµ–äºâ€œå¡«å……ç™¾åˆ†æ¯”â€æŠ€å·§å®ç°é«˜å®½æ¯”ã€‚è™½ç„¶é€šç”¨ï¼Œä½†å†—é•¿ã€è¯­ä¹‰ä¸æ¸…ã€‚</p>
<p>ä½¿ç”¨Â <code>aspect-ratio</code>Â åï¼Œæ•ˆæœç›¸åŒï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿæ›´ä½ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span>Â {  
Â Â aspect-ratio:Â <span class="hljs-number">16</span>Â /Â <span class="hljs-number">9</span>;  
}
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰åµŒå…¥è§†é¢‘æˆ–æ„å»ºæ–¹å½¢ç½‘æ ¼</h4>
<p>åœ¨è§†é¢‘åµŒå…¥ä¸­ï¼Œ<code>aspect-ratio</code>Â åŒæ ·èƒ½ç®€åŒ–å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span>Â <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span>Â <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; aspect-ratio: 16 / 9;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
</code></pre>
<p>æ— éœ€åµŒå¥—å®¹å™¨ï¼Œä¹Ÿæ— éœ€é¢å¤– JS æ§åˆ¶ã€‚æ¯”ä¾‹å§‹ç»ˆç²¾å‡†ï¼Œå…¼å®¹æ€§è‰¯å¥½ã€‚</p>
<p>åŒç†ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ªç­‰å®½ç­‰é«˜çš„ç½‘æ ¼å®¹å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid-item</span>Â {  
Â Â aspect-ratio:Â <span class="hljs-number">1</span>;  
}
</code></pre>
<p>å¿«é€Ÿç”Ÿæˆè‡ªåŠ¨é€‚é…çš„æ­£æ–¹å½¢å¡ç‰‡ï¼Œè§†è§‰ä¸€è‡´æ€§æ›´å¼ºã€‚</p>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰è¶…ç®€å•4:3ç›’å­</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span>Â {  
Â Â <span class="hljs-attribute">width</span>:Â <span class="hljs-number">100%</span>;  
Â Â aspect-ratio:Â <span class="hljs-number">4</span>Â /Â <span class="hljs-number">3</span>;  
Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-number">#eee</span>;  
}
</code></pre>
<p>é¡µé¢ä¼šè‡ªåŠ¨å¸®ä½ æ’‘å‡º 4:3 çš„ç›’å­ï¼Œå®Œç¾å“åº”å¼ï¼Œæ— éœ€åŠ¨è„‘ã€‚</p>
<h2 data-id="heading-6">æµè§ˆå™¨å…¼å®¹æ€§</h2>
<p>æµè§ˆå™¨å…¼å®¹æ€§ï¼šåŸºæœ¬æ— å¿§</p>





























<table><thead><tr><th>æµè§ˆå™¨</th><th>æ˜¯å¦æ”¯æŒ</th></tr></thead><tbody><tr><td>Chrome</td><td>âœ… v88+</td></tr><tr><td>Firefox</td><td>âœ… v89+</td></tr><tr><td>Safari</td><td>âœ… å·²æ”¯æŒ</td></tr><tr><td>Edge</td><td>âœ… æ”¯æŒ</td></tr><tr><td>IE</td><td>âŒï¼ˆå·²é€€å‡ºå†å²èˆå°ï¼‰</td></tr></tbody></table>
<p>å¯¹äºç°ä»£é¡¹ç›®ï¼Œ<code>aspect-ratio</code>Â å·²å¯æ”¾å¿ƒä½¿ç”¨ã€‚é™¤éä»éœ€å…¼å®¹ IEï¼Œå¦åˆ™æ— éœ€å›é€€æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-7">é—®é¢˜</h2>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰åŠ¨æ€å†…å®¹å¦‚ä½•å¤„ç†ï¼Ÿ</h4>
<p>ä¸€ä¸ªå¸¸è§ç–‘é—®æ˜¯ï¼šå½“å®¹å™¨å†…éƒ¨çš„å†…å®¹å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ˜¯å¦ä¼šå½±å“å¸ƒå±€ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šä¸ä¼šã€‚</p>
<p><code>aspect-ratio</code>Â æ§åˆ¶çš„æ˜¯<strong>å®¹å™¨æœ¬èº«çš„æ¯”ä¾‹</strong>ï¼Œä¸å†…éƒ¨å†…å®¹åŠ è½½çŠ¶æ€ã€å¼‚æ­¥å›¾ç‰‡æˆ– iframe æ— å…³ã€‚æ— è®ºå†…å®¹ä½•æ—¶åŠ è½½ï¼Œå®¹å™¨å°ºå¯¸å§‹ç»ˆç¨³å®šï¼Œæ— å¸ƒå±€æŠ–åŠ¨ï¼ˆCLSï¼‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰åˆ é™¤ JSï¼Œä¿¡ä»» CSS</h4>
<p>å¦‚æœåœ¨å¤„ç†ç­‰æ¯”ä¾‹å¸ƒå±€æ—¶ä»ä¾èµ– JS è®¡ç®—ï¼Œé‚£ä¹ˆå¯èƒ½é”™è¿‡äº† CSS çš„ç°ä»£èƒ½åŠ›ã€‚</p>
<p>ä½¿ç”¨Â <code>aspect-ratio</code>ï¼š</p>
<ul>
<li>âœ… å®ç°æ¸…æ™°ã€ç®€æ´çš„å¸ƒå±€é€»è¾‘</li>
<li>âœ… åˆ é™¤å†—ä½™ç›‘å¬å™¨å’Œè®¡ç®—ä»£ç </li>
<li>âœ… ä¿è¯å“åº”å¼ä½“éªŒä¸€è‡´</li>
<li>âœ… æé«˜å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§</li>
</ul>
<p>è¿™ä¸€å±æ€§ä¸ä»…é€‚ç”¨äºå¡ç‰‡ã€è§†é¢‘ã€å›¾ç‰‡ã€ç½‘æ ¼ï¼Œç”šè‡³å¯ä»¥æ‰©å±•åˆ°å¼¹çª—ã€åª’ä½“å†…å®¹ã€å ä½å›¾ç­‰å¤šç§ç»„ä»¶ã€‚</p>
<p>åœ¨æ„å»ºç°ä»£å¸ƒå±€ç³»ç»Ÿæ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Â <code>aspect-ratio</code>ï¼Œè®©æµè§ˆå™¨åšå›çœŸæ­£çš„â€œå¸ƒå±€å¼•æ“â€ã€‚</p>
<h2 data-id="heading-10">æ³¨æ„</h2>
<ul>
<li>å®ƒé»˜è®¤æ˜¯æ ¹æ®å®½åº¦ç®—é«˜åº¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®é«˜åº¦è‡ªåŠ¨ç®—å®½åº¦ï¼›</li>
<li><code>aspect-ratio</code> åªåœ¨ å…ƒç´ å®½åº¦æˆ–é«˜åº¦æœ‰ä¸€ä¸ªæœªæŒ‡å®šæ—¶ç”Ÿæ•ˆï¼›</li>
<li>é€šå¸¸é¡µé¢æ˜¯å®½åº¦å…ˆå¸ƒå±€ï¼ˆæ›´å“åº”å¼ï¼‰ï¼Œæ‰€ä»¥ <code>aspect-ratio + width </code>ç”¨å¾—æ›´å¤šï¼›</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Vue 3 çš„å±å¹•éŸ³é¢‘æ•è·å®ç°ï¼šä»åŸç†åˆ°å®è·µ]]></title>    <link>https://juejin.cn/post/7576532425762996239</link>    <guid>https://juejin.cn/post/7576532425762996239</guid>    <pubDate>2025-11-26T03:03:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576532425762996239" data-draft-id="7576532425762848783" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Vue 3 çš„å±å¹•éŸ³é¢‘æ•è·å®ç°ï¼šä»åŸç†åˆ°å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,éŸ³è§†é¢‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-11-26T03:03:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_AaronWong"/> <meta itemprop="url" content="https://juejin.cn/user/3813536821426744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Vue 3 çš„å±å¹•éŸ³é¢‘æ•è·å®ç°ï¼šä»åŸç†åˆ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3813536821426744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _AaronWong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:03:32.000Z" title="Wed Nov 26 2025 03:03:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦å½•åˆ¶éŸ³é¢‘çš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨çº¿ä¼šè®®ã€è¯­éŸ³ç¬”è®°ã€æ•™å­¦å½•åˆ¶ç­‰ã€‚ä¼ ç»Ÿçš„éŸ³é¢‘å½•åˆ¶é€šå¸¸åªèƒ½æ•è·éº¦å…‹é£è¾“å…¥ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å½•åˆ¶ç³»ç»ŸéŸ³é¢‘ï¼Œä¹Ÿå°±æ˜¯ç”µè„‘æ­£åœ¨æ’­æ”¾çš„å£°éŸ³ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸ªåŸºäº Vue 3 Composition API çš„å±å¹•éŸ³é¢‘æ•è· Hookï¼Œå®ƒèƒ½å¤Ÿå½•åˆ¶ç³»ç»ŸéŸ³é¢‘å¹¶ç”ŸæˆéŸ³é¢‘æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-1">æŠ€æœ¯åŸç†</h2>
<p>åœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£å‡ ä¸ªå…³é”®çš„æŠ€æœ¯æ¦‚å¿µï¼š</p>
<h3 data-id="heading-2">1. MediaDevices.getDisplayMedia()</h3>
<p>è¿™æ˜¯å®ç°å±å¹•å…±äº«å’Œç³»ç»ŸéŸ³é¢‘æ•è·çš„æ ¸å¿ƒ APIã€‚å®ƒå…è®¸ç”¨æˆ·é€‰æ‹©å¹¶æˆæƒæ•è·å±å¹•å†…å®¹ï¼ŒåŒæ—¶å¯ä»¥é€‰æ‹©æ•è·ç³»ç»ŸéŸ³é¢‘ã€‚</p>
<h3 data-id="heading-3">2. MediaRecorder</h3>
<p>Web API æä¾›çš„åª’ä½“å½•åˆ¶æ¥å£ï¼Œå¯ä»¥å°† MediaStream å½•åˆ¶ä¸ºæŒ‡å®šæ ¼å¼çš„æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-4">æ ¸å¿ƒå®ç°</h2>
<p>è®©æˆ‘ä»¬é€æ­¥åˆ†æè¿™ä¸ªéŸ³é¢‘æ•è· Hook çš„å®ç°ï¼š</p>
<h3 data-id="heading-5">1. çŠ¶æ€ç®¡ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> inCapture = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> screenStream = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> recorder = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨ Vue çš„ ref æ¥ç®¡ç†æ•è·çŠ¶æ€ã€å±å¹•æµå’Œå½•åˆ¶å™¨å®ä¾‹ï¼Œç¡®ä¿çŠ¶æ€çš„å“åº”å¼æ›´æ–°ã€‚</p>
<h3 data-id="heading-6">2. åª’ä½“æµè·å–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">invokeGetDisplayMedia</span>(<span class="hljs-params">{success, fail}</span>) {
    <span class="hljs-keyword">var</span> constraints = {
        <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>
    };
    
    <span class="hljs-comment">// å…¼å®¹ä¸åŒæµè§ˆå™¨çš„ API</span>
    <span class="hljs-keyword">if</span>(navigator?.<span class="hljs-property">mediaDevices</span>?.<span class="hljs-property">getDisplayMedia</span>) {
        navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getDisplayMedia</span>(constraints).<span class="hljs-title function_">then</span>(success).<span class="hljs-title function_">catch</span>(fail);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(navigator.<span class="hljs-property">getDisplayMedia</span>) {
        navigator.<span class="hljs-title function_">getDisplayMedia</span>(constraints).<span class="hljs-title function_">then</span>(success).<span class="hljs-title function_">catch</span>(fail);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">fail</span>(<span class="hljs-string">"å½“å‰ç¯å¢ƒä¸æ”¯æŒè¯¥æ“ä½œ"</span>);
    }
}
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åšäº†æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†ï¼Œç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸è°ƒç”¨ APIã€‚</p>
<h3 data-id="heading-7">3. éŸ³é¢‘æ•è·æ ¸å¿ƒé€»è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">captureScreen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-title function_">invokeGetDisplayMedia</span>({
            <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">screen</span>) =&gt;</span> {
                inCapture.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
                screenStream.<span class="hljs-property">value</span> = screen;
                
                <span class="hljs-comment">// ç›‘å¬æµç»“æŸäº‹ä»¶</span>
                screenStream.<span class="hljs-property">value</span>.<span class="hljs-property">onended</span> = <span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-title function_">reset</span>();
                }
                screenStream.<span class="hljs-property">value</span>.<span class="hljs-property">oninactive</span> = <span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-title function_">stopCapture</span>();
                }
                
                <span class="hljs-comment">// æ£€æŸ¥éŸ³é¢‘è½¨é“</span>
                <span class="hljs-keyword">const</span> audioTracks = screenStream.<span class="hljs-property">value</span>.<span class="hljs-title function_">getAudioTracks</span>();
                <span class="hljs-keyword">if</span> (audioTracks.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
                    <span class="hljs-title function_">reset</span>();
                    <span class="hljs-title function_">reject</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
                    <span class="hljs-keyword">return</span>;
                }
                
                <span class="hljs-comment">// åˆ›å»ºçº¯éŸ³é¢‘æµ</span>
                <span class="hljs-keyword">const</span> audioStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaStream</span>(audioTracks);

                <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-comment">// é…ç½®å½•åˆ¶å‚æ•°</span>
                    <span class="hljs-keyword">const</span> options = {
                        <span class="hljs-attr">mimeType</span>: <span class="hljs-string">'audio/webm;codecs=opus'</span>,
                        <span class="hljs-attr">audioBitsPerSecond</span>: <span class="hljs-number">128000</span>
                    };
                    
                    <span class="hljs-comment">// æ ¼å¼å…¼å®¹æ€§å›é€€</span>
                    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">MediaRecorder</span>.<span class="hljs-title function_">isTypeSupported</span>(options.<span class="hljs-property">mimeType</span>)) {
                        options.<span class="hljs-property">mimeType</span> = <span class="hljs-string">'audio/webm'</span>;
                    }
                    
                    <span class="hljs-comment">// åˆ›å»ºå½•åˆ¶å™¨</span>
                    recorder.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaRecorder</span>(audioStream, options);
                    recorder.<span class="hljs-property">value</span>.<span class="hljs-title function_">start</span>();
                    
                    <span class="hljs-comment">// å¤„ç†å½•åˆ¶æ•°æ®</span>
                    recorder.<span class="hljs-property">value</span>.<span class="hljs-property">ondataavailable</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
                        <span class="hljs-keyword">if</span> (event?.<span class="hljs-property">data</span>?.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
                            <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([event.<span class="hljs-property">data</span>], 
                                <span class="hljs-string">`audio_capture_<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()}</span>.opus`</span>, 
                                { <span class="hljs-attr">type</span>: <span class="hljs-string">'audio/opus'</span> });
                            <span class="hljs-title function_">reset</span>();
                            <span class="hljs-title function_">resolve</span>(file);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å½•åˆ¶å¤±è´¥"</span>);
                            <span class="hljs-title function_">reset</span>();
                            <span class="hljs-title function_">reject</span>(<span class="hljs-string">"å½•åˆ¶å¤±è´¥"</span>);
                        }
                    }
                    
                    <span class="hljs-comment">// è®¾ç½®æœ€å¤§å½•åˆ¶æ—¶é—´</span>
                    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                        <span class="hljs-title function_">stopCapture</span>();
                    }, maxTime);
                })
            },
            <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
                <span class="hljs-title function_">reject</span>(err);
            }
        })
    })
}
</code></pre>
<h3 data-id="heading-8">4. èµ„æºæ¸…ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
    screenStream.<span class="hljs-property">value</span>?.<span class="hljs-title function_">getTracks</span>()?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">track</span> =&gt;</span> track.<span class="hljs-title function_">stop</span>());
    screenStream.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
    inCapture.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    recorder.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-built_in">clearTimeout</span>(timer);
    timer = <span class="hljs-literal">null</span>;
}

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">reset</span>();
})
</code></pre>
<p>ç¡®ä¿åœ¨ç»„ä»¶å¸è½½æ—¶æ­£ç¡®æ¸…ç†æ‰€æœ‰èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-9">5. å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { nextTick, onUnmounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAudioCapture</span>(<span class="hljs-params">{maxTime = <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>}</span>) {
Â  Â  <span class="hljs-keyword">const</span> inCapture = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
Â  Â  <span class="hljs-keyword">const</span> screenStream = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
Â  Â  <span class="hljs-keyword">const</span> recorder = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
Â  Â  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>
  
Â  Â  <span class="hljs-keyword">function</span> <span class="hljs-title function_">stopCapture</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â  recorder.<span class="hljs-property">value</span>?.<span class="hljs-title function_">stop</span>();
Â  Â  }
  
Â  Â  <span class="hljs-keyword">function</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â  screenStream.<span class="hljs-property">value</span>?.<span class="hljs-title function_">getTracks</span>()?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">track</span> =&gt;</span> track.<span class="hljs-title function_">stop</span>());
Â  Â  Â  Â  screenStream.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
Â  Â  Â  Â  inCapture.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
Â  Â  Â  Â  recorder.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
Â  Â  Â  Â  <span class="hljs-built_in">clearTimeout</span>(timer);
Â  Â  Â  Â  timer = <span class="hljs-literal">null</span>;
Â  Â  }

Â  Â  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  <span class="hljs-title function_">reset</span>();
Â  Â  })

  
Â  Â  <span class="hljs-keyword">function</span> <span class="hljs-title function_">captureScreen</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">invokeGetDisplayMedia</span>({
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">screen</span>) =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inCapture.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  screenStream.<span class="hljs-property">value</span> = screen;
                    
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  screenStream.<span class="hljs-property">value</span>.<span class="hljs-property">onended</span> = <span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reset</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  screenStream.<span class="hljs-property">value</span>.<span class="hljs-property">oninactive</span> = <span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">stopCapture</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">const</span> audioTracks = screenStream.<span class="hljs-property">value</span>.<span class="hljs-title function_">getAudioTracks</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> (audioTracks.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reset</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reject</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">const</span> audioStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaStream</span>(audioTracks);
Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">const</span> options = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">mimeType</span>: <span class="hljs-string">'audio/webm;codecs=opus'</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">audioBitsPerSecond</span>: <span class="hljs-number">128000</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">MediaRecorder</span>.<span class="hljs-title function_">isTypeSupported</span>(options.<span class="hljs-property">mimeType</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  options.<span class="hljs-property">mimeType</span> = <span class="hljs-string">'audio/webm'</span>;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recorder.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaRecorder</span>(audioStream, options);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recorder.<span class="hljs-property">value</span>.<span class="hljs-title function_">start</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recorder.<span class="hljs-property">value</span>.<span class="hljs-property">ondataavailable</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> (event?.<span class="hljs-property">data</span>?.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([event.<span class="hljs-property">data</span>], <span class="hljs-string">`audio_capture_<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()}</span>.opus`</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'audio/opus'</span> });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reset</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">resolve</span>(file);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å½•åˆ¶å¤±è´¥"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reset</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reject</span>(<span class="hljs-string">"å½•åˆ¶å¤±è´¥"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">stopCapture</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, maxTime);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">reject</span>(err);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  })
Â  Â  }
Â  Â 
Â  Â  <span class="hljs-keyword">function</span> <span class="hljs-title function_">invokeGetDisplayMedia</span>(<span class="hljs-params">{success, fail}</span>) {
Â  Â  Â  Â  <span class="hljs-keyword">var</span> constraints = {
Â  Â  Â  Â  Â  Â  video : <span class="hljs-literal">true</span>,
Â  Â  Â  Â  Â  Â  audio : <span class="hljs-literal">true</span>
Â  Â  Â  Â  };
Â  Â  Â  Â  <span class="hljs-keyword">if</span>(navigator?.<span class="hljs-property">mediaDevices</span>?.<span class="hljs-property">getDisplayMedia</span>) {
Â  Â  Â  Â  Â  Â  navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getDisplayMedia</span>(constraints).<span class="hljs-title function_">then</span>(success).<span class="hljs-title function_">catch</span>(fail);
Â  Â  Â  Â  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(navigator.<span class="hljs-property">getDisplayMedia</span>) {
Â  Â  Â  Â  Â  Â  navigator.<span class="hljs-title function_">getDisplayMedia</span>(constraints).<span class="hljs-title function_">then</span>(success).<span class="hljs-title function_">catch</span>(fail);
Â  Â  Â  Â  } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">fail</span>(<span class="hljs-string">"å½“å‰ç¯å¢ƒä¸æ”¯æŒè¯¥æ“ä½œ"</span>);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  <span class="hljs-keyword">return</span> {
Â  Â  Â  Â  reset,
Â  Â  Â  Â  captureScreen,
Â  Â  Â  Â  stopCapture,
Â  Â  Â  Â  <span class="hljs-keyword">get</span> <span class="hljs-title function_">InCapture</span>(){ <span class="hljs-keyword">return</span> inCapture.<span class="hljs-property">value</span>},
Â  Â  }
}
</code></pre>
<h2 data-id="heading-10">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ Vue ç»„ä»¶ä¸­é›†æˆè¿™ä¸ª Hookï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="audio-recorder"&gt;
    &lt;button 
      @click="startRecording" 
      :disabled="inCapture"
      class="record-button"
    &gt;
      {{ inCapture ? 'å½•åˆ¶ä¸­...' : 'å¼€å§‹å½•åˆ¶' }}
    &lt;/button&gt;
    
    &lt;button 
      @click="stopRecording" 
      :disabled="!inCapture"
      class="stop-button"
    &gt;
      åœæ­¢å½•åˆ¶
    &lt;/button&gt;
    
    &lt;div v-if="lastRecordedFile" class="recording-info"&gt;
      &lt;p&gt;å½•åˆ¶å®Œæˆï¼æ–‡ä»¶: {{ lastRecordedFile.name }}&lt;/p&gt;
      &lt;audio :src="audioUrl" controls class="audio-player" /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
import { useAudioCapture } from './useAudioCapture';

const { captureScreen, stopCapture, get InCapture() { return inCapture.value } } = 
  useAudioCapture({ maxTime: 5 * 60 * 1000 }); // 5åˆ†é’Ÿé™åˆ¶

const inCapture = ref(false);
const lastRecordedFile = ref(null);
const audioUrl = ref('');

const startRecording = async () =&gt; {
  try {
    const file = await captureScreen();
    lastRecordedFile.value = file;
    audioUrl.value = URL.createObjectURL(file);
  } catch (error) {
    console.error('å½•åˆ¶å¤±è´¥:', error);
    alert(`å½•åˆ¶å¤±è´¥: ${error}`);
  }
};

const stopRecording = () =&gt; {
  stopCapture();
};
&lt;/script&gt;

&lt;style scoped&gt;
.audio-recorder {
  padding: 20px;
  text-align: center;
}

.record-button, .stop-button {
  margin: 0 10px;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.record-button {
  background-color: #4CAF50;
  color: white;
}

.record-button:disabled {
  background-color: #cccccc;
}

.stop-button {
  background-color: #f44336;
  color: white;
}

.audio-player {
  margin-top: 20px;
  width: 100%;
  max-width: 400px;
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-11">å…³é”®ç‰¹æ€§ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-12">1. éŸ³é¢‘æ ¼å¼é€‰æ‹©</h3>
<p>æˆ‘ä»¬ä¼˜å…ˆé€‰æ‹© <code>audio/webm;codecs=opus</code> æ ¼å¼ï¼Œå› ä¸ºï¼š</p>
<ul>
<li><strong>Opus ç¼–ç </strong>ï¼šæä¾›æ›´å¥½çš„éŸ³è´¨å’Œå‹ç¼©æ¯”</li>
<li><strong>WebM å®¹å™¨</strong>ï¼šç°ä»£æµè§ˆå™¨æ”¯æŒè‰¯å¥½</li>
<li><strong>å…¼å®¹æ€§å›é€€</strong>ï¼šåœ¨ä¸æ”¯æŒæ—¶å›é€€åˆ°åŸºç¡€æ ¼å¼</li>
</ul>
<h3 data-id="heading-13">2. é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥éŸ³é¢‘è½¨é“æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">const</span> audioTracks = screenStream.<span class="hljs-property">value</span>.<span class="hljs-title function_">getAudioTracks</span>();
<span class="hljs-keyword">if</span> (audioTracks.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
    <span class="hljs-title function_">reset</span>();
    <span class="hljs-title function_">reject</span>(<span class="hljs-string">"æ²¡æœ‰æ£€æµ‹åˆ°éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥åˆ†äº«éŸ³é¢‘é€‰é¡¹æ˜¯å¦å¼€å¯"</span>);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<h3 data-id="heading-14">3. è‡ªåŠ¨è¶…æ—¶ä¿æŠ¤</h3>
<p>é€šè¿‡ <code>maxTime</code> å‚æ•°é˜²æ­¢æ— é™æœŸå½•åˆ¶ï¼Œä¿æŠ¤ç³»ç»Ÿèµ„æºã€‚</p>
<h2 data-id="heading-15">æµè§ˆå™¨å…¼å®¹æ€§è¯´æ˜</h2>






























<table><thead><tr><th>æµè§ˆå™¨</th><th>æ”¯æŒæƒ…å†µ</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>Chrome 74+</td><td>âœ… å®Œå…¨æ”¯æŒ</td><td>æ¨èä½¿ç”¨</td></tr><tr><td>Edge 79+</td><td>âœ… å®Œå…¨æ”¯æŒ</td><td>åŸºäº Chromium</td></tr><tr><td>Firefox 66+</td><td>âœ… åŸºæœ¬æ”¯æŒ</td><td>å¯èƒ½éœ€è¦é…ç½®</td></tr><tr><td>Safari</td><td>âš ï¸ éƒ¨åˆ†æ”¯æŒ</td><td>æœ‰é™çš„åŠŸèƒ½</td></tr></tbody></table>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ª Vue 3 Hookï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ˜“äºä½¿ç”¨çš„å±å¹•éŸ³é¢‘æ•è·è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸ä»…æä¾›äº†åŸºç¡€çš„å½•åˆ¶åŠŸèƒ½ï¼Œè¿˜è€ƒè™‘äº†é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†å’Œç”¨æˆ·ä½“éªŒç­‰å¤šä¸ªæ–¹é¢ã€‚</p>
<p>è¿™ç§åŸºäº Composition API çš„å®ç°æ–¹å¼ï¼Œä½“ç°äº† Vue 3 åœ¨é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡æ–¹é¢çš„ä¼˜åŠ¿ï¼Œå¯ä»¥ä½œä¸ºå…¶ä»–åª’ä½“å¤„ç†åŠŸèƒ½çš„å‚è€ƒå®ç°ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°å¤„ç†éŸ³é¢‘å½•åˆ¶éœ€æ±‚ï¼Œå¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥ï¼šä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576609946190053412</link>    <guid>https://juejin.cn/post/7576609946190053412</guid>    <pubDate>2025-11-26T03:11:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190053412" data-draft-id="7576646533614141494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥ï¼šä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-26T03:11:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹åŒ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥ï¼šä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹åŒ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:11:57.000Z" title="Wed Nov 26 2025 03:11:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥ï¼šä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œç”¨æˆ·ç»å¸¸ä¼šæ‰“å¼€å¤šä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µã€‚å½“ç”¨æˆ·åœ¨å…¶ä¸­ä¸€ä¸ªæ ‡ç­¾é¡µå®Œæˆç™»å½•åï¼Œå…¶ä»–æ ‡ç­¾é¡µå¦‚ä½•è‡ªåŠ¨åŒæ­¥ç™»å½•çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªå¸¸è§ä½†å®¹æ˜“è¢«å¿½è§†çš„é—®é¢˜ã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘ä»¬åœ¨å¾®æœåŠ¡æ¶æ„çš„æˆæƒä¸­å¿ƒä¸­ï¼Œå¦‚ä½•é€šè¿‡ä¸€ä¸ªç®€å•è€Œä¼˜é›…çš„æ–¹æ¡ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åœºæ™¯</h3>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<p>ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªéœ€è¦ç™»å½•çš„ Web åº”ç”¨ï¼ŒåŒæ—¶æ‰“å¼€äº†ä¸¤ä¸ªæ ‡ç­¾é¡µã€‚åœ¨ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µï¼ˆæ ‡ç­¾é¡µ Aï¼‰è¾“å…¥è´¦å·å¯†ç ï¼Œç‚¹å‡»ç™»å½•ï¼Œç³»ç»Ÿæç¤º"ç™»å½•æˆåŠŸ"ã€‚æ­¤æ—¶ä½ åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªæ ‡ç­¾é¡µï¼ˆæ ‡ç­¾é¡µ Bï¼‰ï¼Œå‘ç°é¡µé¢ä»ç„¶æ˜¾ç¤ºç™»å½•è¡¨å•ã€‚</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼š"æˆ‘å·²ç»åœ¨æ ‡ç­¾é¡µ A ç™»å½•äº†ï¼Œä¸ºä»€ä¹ˆæ ‡ç­¾é¡µ B è¿˜æ˜¯æ˜¾ç¤ºæœªç™»å½•ï¼Ÿ"äºæ˜¯ä½ åœ¨æ ‡ç­¾é¡µ B å†æ¬¡ç‚¹å‡»ç™»å½•æŒ‰é’®ã€‚</p>
<p><strong>é—®é¢˜æ¥äº†</strong>ï¼š</p>
<ol>
<li>æ ‡ç­¾é¡µ B çš„ç™»å½•è¯·æ±‚å¯èƒ½ä½¿ç”¨çš„æ˜¯æ—§çš„ tokenï¼Œå¯¼è‡´ç™»å½•çŠ¶æ€å¼‚å¸¸</li>
<li>æ–°ç™»å½•å¯èƒ½ä¼šæŒ¤æ‰æ ‡ç­¾é¡µ A çš„ç™»å½•çŠ¶æ€</li>
<li>å³ä½¿ç™»å½•æˆåŠŸï¼Œç”±äºä½¿ç”¨äº†æ—§çš„ tokenï¼Œæœ€ç»ˆè¿˜æ˜¯è¢«é‡å®šå‘å›ç™»å½•é¡µ</li>
<li>ä¸¤ä¸ªæ ‡ç­¾é¡µçš„ç™»å½•çŠ¶æ€æ— æ³•åŒæ­¥ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå·®</li>
</ol>
<p>è¿™å°±æ˜¯æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ï¼š<strong>å¤šæ ‡ç­¾é¡µä¹‹é—´çš„ç™»å½•çŠ¶æ€æ— æ³•å®æ—¶åŒæ­¥</strong>ã€‚</p>
<h3 data-id="heading-3">é—®é¢˜æ ¹æº</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæˆ‘ä»¬çš„æˆæƒä¸­å¿ƒè´Ÿè´£ç”¨æˆ·ç™»å½•è®¤è¯ã€‚ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šåœ¨ Cookie ä¸­å­˜å‚¨ tokenã€‚ä½†æ˜¯ï¼Œå½“ç”¨æˆ·åœ¨æ ‡ç­¾é¡µ A ç™»å½•åï¼Œæ ‡ç­¾é¡µ B å¹¶ä¸çŸ¥é“ Cookie ä¸­å·²ç»æœ‰äº† tokenï¼Œå› ä¸ºï¼š</p>
<ol>
<li><strong>ç¼ºä¹å®æ—¶ç›‘æµ‹æœºåˆ¶</strong>ï¼šç™»å½•é¡µé¢æ²¡æœ‰å®æ—¶ç›‘æµ‹ Cookie ä¸­ token çš„å˜åŒ–</li>
<li><strong>çŠ¶æ€ä¸åŒæ­¥</strong>ï¼šå¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„ token çŠ¶æ€æ— æ³•å®æ—¶åŒæ­¥</li>
<li><strong>é‡å¤ç™»å½•å†²çª</strong>ï¼šåœ¨å·²æœ‰ token çš„æƒ…å†µä¸‹ä»å¯é‡å¤ç™»å½•ï¼Œå¯¼è‡´ç™»å½•çŠ¶æ€å†²çª</li>
</ol>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">æ ¸å¿ƒæ€è·¯</h4>
<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆéå¸¸ç®€å•ï¼š<strong>åœ¨ç™»å½•é¡µé¢å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æ£€æŸ¥ä¸€æ¬¡ Cookie ä¸­æ˜¯å¦å­˜åœ¨ tokenã€‚å¦‚æœæ£€æµ‹åˆ° tokenï¼Œå°±è‡ªåŠ¨åˆ·æ–°é¡µé¢</strong>ã€‚</p>
<p>è¿™æ ·ï¼Œå½“ç”¨æˆ·åœ¨æ ‡ç­¾é¡µ A ç™»å½•åï¼Œæ ‡ç­¾é¡µ B ä¼šåœ¨ 1 ç§’å†…æ£€æµ‹åˆ° Cookie ä¸­çš„ tokenï¼Œç„¶åè‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼ŒåŠ è½½æœ€æ–°çš„ç™»å½•çŠ¶æ€ã€‚</p>
<h4 data-id="heading-6">å®ç°æ–¹æ¡ˆ</h4>
<h5 data-id="heading-7">1. è½®è¯¢ç›‘æµ‹æœºåˆ¶</h5>
<p>åœ¨ç™»å½•é¡µé¢æŒ‚è½½æ—¶ï¼Œå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æ£€æŸ¥ä¸€æ¬¡ Cookie ä¸­çš„ tokenï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¯åŠ¨ token è½®è¯¢å®šæ—¶å™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startTokenPolling</span> = (<span class="hljs-params"/>) =&gt; {
  tokenPollingTimer.<span class="hljs-property">value</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> token = <span class="hljs-title class_">Store</span>.<span class="hljs-title function_">get_cookie</span>(<span class="hljs-string">'token'</span>)

    <span class="hljs-keyword">if</span> (token) {
      <span class="hljs-comment">// æ£€æµ‹åˆ° tokenï¼Œåˆ·æ–°é¡µé¢</span>
      <span class="hljs-title function_">clearTokenPolling</span>()
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// è¶…è¿‡ 5 åˆ†é’Ÿæœªæ£€æµ‹åˆ° tokenï¼Œåœæ­¢è½®è¯¢</span>
    <span class="hljs-keyword">if</span> (tokenPollingElapsed.<span class="hljs-property">value</span> &gt;= <span class="hljs-number">300</span>) {
      <span class="hljs-title function_">clearTokenPolling</span>()
    }
  }, <span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¯ 1 ç§’æ‰§è¡Œä¸€æ¬¡</span>
}
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>è½®è¯¢é¢‘ç‡</strong>ï¼š1 ç§’ä¸€æ¬¡ï¼Œæ—¢èƒ½åŠæ—¶æ£€æµ‹åˆ°å˜åŒ–ï¼Œåˆä¸ä¼šé€ æˆæ€§èƒ½é—®é¢˜</li>
<li><strong>è¶…æ—¶ä¿æŠ¤</strong>ï¼š5 åˆ†é’Ÿåè‡ªåŠ¨åœæ­¢ï¼Œé¿å…æ— é™è½®è¯¢</li>
<li><strong>è‡ªåŠ¨åˆ·æ–°</strong>ï¼šæ£€æµ‹åˆ° token åç«‹å³åˆ·æ–°é¡µé¢ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥</li>
</ul>
<h5 data-id="heading-8">2. æ™ºèƒ½çš„å®šæ—¶å™¨ç®¡ç†</h5>
<p>æˆ‘ä»¬ä¸æ˜¯ç®€å•åœ°"ç‚¹å‡»ç™»å½•å°±æ¸…é™¤å®šæ—¶å™¨"ï¼Œè€Œæ˜¯é‡‡ç”¨äº†æ›´æ™ºèƒ½çš„ç­–ç•¥ï¼š</p>
<p><strong>åªåœ¨çœŸæ­£å‘é€ç™»å½•è¯·æ±‚æ—¶æ¸…é™¤å®šæ—¶å™¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é€šè¿‡æ‰€æœ‰éªŒè¯åï¼Œå‡†å¤‡å‘é€ç™»å½•è¯·æ±‚æ—¶æ‰æ¸…é™¤å®šæ—¶å™¨</span>
<span class="hljs-keyword">if</span> (<span class="hljs-comment">/* æ‰€æœ‰éªŒè¯é€šè¿‡ */</span>) {
  <span class="hljs-title function_">clearTokenPolling</span>() <span class="hljs-comment">// æ¸…é™¤å®šæ—¶å™¨</span>
  <span class="hljs-comment">// å‘é€ç™»å½•è¯·æ±‚</span>
}
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼šå¦‚æœç”¨æˆ·ç‚¹å‡»ç™»å½•ä½†éªŒè¯å¤±è´¥ï¼ˆæ¯”å¦‚åè®®æœªå‹¾é€‰ï¼‰ï¼Œé¡µé¢ä»åœç•™åœ¨ç™»å½•é¡µï¼Œå®šæ—¶å™¨ä¼šç»§ç»­å·¥ä½œï¼Œç»§ç»­ç›‘æµ‹å…¶ä»–æ ‡ç­¾é¡µçš„ç™»å½•çŠ¶æ€ã€‚</p>
<p><strong>ç™»å½•å¤±è´¥åé‡æ–°å¯åŠ¨è½®è¯¢</strong></p>
<p>å¦‚æœç™»å½•å¤±è´¥ï¼Œç”¨æˆ·ä»åœç•™åœ¨ç™»å½•é¡µé¢ï¼Œæ­¤æ—¶ä¼šé‡æ–°å¯åŠ¨è½®è¯¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç™»å½•å¤±è´¥å</span>
<span class="hljs-keyword">if</span> (loginFailed) {
  <span class="hljs-title function_">startTokenPolling</span>() <span class="hljs-comment">// é‡æ–°å¯åŠ¨è½®è¯¢</span>
}
</code></pre>
<p>è¿™æ ·ç¡®ä¿ç”¨æˆ·åœ¨ç™»å½•å¤±è´¥åï¼Œä»èƒ½è‡ªåŠ¨åŒæ­¥å…¶ä»–æ ‡ç­¾é¡µçš„ç™»å½•çŠ¶æ€ã€‚</p>
<h5 data-id="heading-9">3. 401 å¼‚å¸¸æ—¶çš„çŠ¶æ€åŒæ­¥</h5>
<p>å½“åç«¯è¿”å› 401 æœªæˆæƒé”™è¯¯æ—¶ï¼ˆé€šå¸¸è¡¨ç¤º token å·²è¿‡æœŸï¼‰ï¼Œé™¤äº†æ¸…é™¤ localStorage ä¸­çš„ tokenï¼Œæˆ‘ä»¬ä¹Ÿä¼šåŒæ­¥æ¸…é™¤ Cookie ä¸­çš„ tokenï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
    store.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'token'</span>)
    store.<span class="hljs-title function_">clear_cookie</span>(<span class="hljs-string">'token'</span>) <span class="hljs-comment">// åŒæ­¥æ¸…é™¤ Cookie</span>
    <span class="hljs-keyword">break</span>
</code></pre>
<p>è¿™ç¡®ä¿äº†å½“ token å¤±æ•ˆæ—¶ï¼Œè½®è¯¢æœºåˆ¶ä¸ä¼šè¯¯åˆ¤å·²ç™»å½•çŠ¶æ€ã€‚</p>
<h3 data-id="heading-10">å·¥ä½œæµç¨‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡æµç¨‹å›¾æ¥ç†è§£æ•´ä¸ªæ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-11">å¤šæ ‡ç­¾é¡µåŒæ­¥æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·æ‰“å¼€ä¸¤ä¸ªæ ‡ç­¾é¡µ] --&gt; B[æ ‡ç­¾é¡µ A: ç™»å½•é¡µé¢]
    A --&gt; C[æ ‡ç­¾é¡µ B: ç™»å½•é¡µé¢]

    C --&gt; D[å¯åŠ¨è½®è¯¢ç›‘æµ‹]
    D --&gt; E[æ¯1ç§’æ£€æŸ¥ Cookie ä¸­çš„ token]

    B --&gt; F[ç”¨æˆ·åœ¨æ ‡ç­¾é¡µ A å®Œæˆç™»å½•]
    F --&gt; G[ç³»ç»Ÿåœ¨ Cookie ä¸­å­˜å‚¨ token]

    G --&gt; H[æ ‡ç­¾é¡µ B æ£€æµ‹åˆ° token]
    H --&gt; I[è‡ªåŠ¨åˆ·æ–°é¡µé¢]
    I --&gt; J[ä¸¤ä¸ªæ ‡ç­¾é¡µçŠ¶æ€åŒæ­¥å®Œæˆ]

    style A fill:#e1f5ff
    style F fill:#fff4e1
    style G fill:#e8f5e9
    style J fill:#f3e5f5
</code></pre>
<h4 data-id="heading-12">è½®è¯¢æ£€æµ‹é€»è¾‘</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¯åŠ¨å®šæ—¶å™¨] --&gt; B[æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡]
    B --&gt; C{Cookie ä¸­æ˜¯å¦æœ‰ token?}

    C --&gt;|æœ‰| D[æ¸…é™¤å®šæ—¶å™¨å¹¶åˆ·æ–°é¡µé¢]
    C --&gt;|æ— | E{æ˜¯å¦è¶…è¿‡5åˆ†é’Ÿ?}

    E --&gt;|å¦| B
    E --&gt;|æ˜¯| F[åœæ­¢è½®è¯¢]

    G[ç”¨æˆ·ç‚¹å‡»ç™»å½•] --&gt; H{éªŒè¯æ˜¯å¦é€šè¿‡?}
    H --&gt;|æ˜¯| I[æ¸…é™¤å®šæ—¶å™¨å¹¶å‘é€è¯·æ±‚]
    H --&gt;|å¦| J[ç»§ç»­è½®è¯¢ç›‘æµ‹]

    I --&gt; K{ç™»å½•ç»“æœ}
    K --&gt;|æˆåŠŸ| L[ç™»å½•æˆåŠŸ]
    K --&gt;|å¤±è´¥| M[é‡æ–°å¯åŠ¨è½®è¯¢]

    J --&gt; B
    M --&gt; B

    style A fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#e8f5e9
    style F fill:#ffebee
</code></pre>
<h3 data-id="heading-13">æ–¹æ¡ˆä¼˜åŠ¿</h3>
<ol>
<li><strong>ç®€å•æœ‰æ•ˆ</strong>ï¼šå®ç°ç®€å•ï¼Œä»£ç é‡å°‘ï¼Œä½†èƒ½æœ‰æ•ˆè§£å†³é—®é¢˜</li>
<li><strong>ç”¨æˆ·ä½“éªŒå¥½</strong>ï¼šè‡ªåŠ¨åŒæ­¥ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°</li>
<li><strong>èµ„æºå¯æ§</strong>ï¼š5 åˆ†é’Ÿè¶…æ—¶ä¿æŠ¤ï¼Œé¿å…æ— é™è½®è¯¢</li>
<li><strong>æ™ºèƒ½ç®¡ç†</strong>ï¼šåªåœ¨å¿…è¦æ—¶æ¸…é™¤å®šæ—¶å™¨ï¼ŒéªŒè¯å¤±è´¥æ—¶ç»§ç»­å·¥ä½œ</li>
<li><strong>å¤±è´¥æ¢å¤</strong>ï¼šç™»å½•å¤±è´¥åè‡ªåŠ¨æ¢å¤è½®è¯¢ï¼Œç¡®ä¿çŠ¶æ€åŒæ­¥</li>
</ol>
<h3 data-id="heading-14">å®é™…æ•ˆæœ</h3>
<p>å®æ–½è¿™ä¸ªæ–¹æ¡ˆåï¼Œæˆ‘ä»¬è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>âœ… ç”¨æˆ·åœ¨æ ‡ç­¾é¡µ A ç™»å½•åï¼Œæ ‡ç­¾é¡µ B ä¼šåœ¨ 1 ç§’å†…è‡ªåŠ¨åˆ·æ–°å¹¶åŒæ­¥ç™»å½•çŠ¶æ€</li>
<li>âœ… é¿å…äº†é‡å¤ç™»å½•å¯¼è‡´çš„ token å†²çªé—®é¢˜</li>
<li>âœ… æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢</li>
<li>âœ… ç™»å½•å¤±è´¥åä»èƒ½ç»§ç»­ç›‘æµ‹å…¶ä»–æ ‡ç­¾é¡µçš„ç™»å½•çŠ¶æ€</li>
</ul>
<h3 data-id="heading-15">æŠ€æœ¯ç»†èŠ‚</h3>
<h4 data-id="heading-16">å®šæ—¶å™¨ç®¡ç†</h4>
<ul>
<li>ä½¿ç”¨ <code>setInterval</code> åˆ›å»ºå®šæ—¶å™¨ï¼Œå­˜å‚¨å®šæ—¶å™¨ ID</li>
<li>ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
<li>é¿å…é‡å¤åˆ›å»ºå®šæ—¶å™¨ï¼ˆæ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦å·²å­˜åœ¨ï¼‰</li>
</ul>
<h4 data-id="heading-17">Cookie æ“ä½œ</h4>
<ul>
<li>ç™»å½•æˆåŠŸåé€šè¿‡ <code>set_cookie</code> å°† token å­˜å…¥ Cookie</li>
<li>è½®è¯¢æ—¶é€šè¿‡ <code>get_cookie</code> è¯»å– Cookie ä¸­çš„ token</li>
<li>401 å¼‚å¸¸æ—¶é€šè¿‡ <code>clear_cookie</code> æ¸…é™¤ Cookie ä¸­çš„ token</li>
</ul>
<h4 data-id="heading-18">ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">startTokenPolling</span>() <span class="hljs-comment">// é¡µé¢æŒ‚è½½æ—¶å¯åŠ¨è½®è¯¢</span>
})

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">clearTokenPolling</span>() <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨</span>
})
</code></pre>
<h3 data-id="heading-19">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>Cookie ä½œç”¨åŸŸ</strong>ï¼šç¡®ä¿ Cookie çš„ <code>domain</code> è®¾ç½®æ­£ç¡®ï¼Œå¤šä¸ªæ ‡ç­¾é¡µèƒ½å¤Ÿå…±äº«åŒä¸€ Cookie</li>
<li><strong>è½®è¯¢é¢‘ç‡</strong>ï¼š1 ç§’ä¸€æ¬¡æ˜¯å¹³è¡¡åŠæ—¶æ€§å’Œæ€§èƒ½çš„æŠ˜ä¸­é€‰æ‹©ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´</li>
<li><strong>è¶…æ—¶æ—¶é—´</strong>ï¼š5 åˆ†é’Ÿçš„è¶…æ—¶ä¿æŠ¤å¯æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´</li>
<li><strong>æ€§èƒ½å½±å“</strong>ï¼šå®šæ—¶å™¨ä¼šå¢åŠ ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œä½†å½±å“å¾ˆå°ï¼ˆæ¯ 1 ç§’æ‰§è¡Œä¸€æ¬¡ç®€å•åˆ¤æ–­ï¼‰</li>
</ol>
<h3 data-id="heading-20">æ€»ç»“</h3>
<p>è¿™ä¸ªæ–¹æ¡ˆé€šè¿‡ç®€å•çš„è½®è¯¢æœºåˆ¶ï¼Œä¼˜é›…åœ°è§£å†³äº†å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥çš„é—®é¢˜ã€‚è™½ç„¶è½®è¯¢ä¸æ˜¯æœ€é«˜æ•ˆçš„æ–¹å¼ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå®ƒç®€å•ã€å¯é ã€æ˜“äºç»´æŠ¤ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ˜ä¸­é€‰æ‹©ã€‚</p>
<h4 data-id="heading-21">ä¸ºä»€ä¹ˆé€‰æ‹©è½®è¯¢æ–¹æ¡ˆï¼Ÿ</h4>
<p>æˆ‘ä»¬é€‰æ‹©è½®è¯¢æ–¹æ¡ˆä¸»è¦åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š</p>
<ol>
<li><strong>å…¼å®¹æ€§ä¼˜å…ˆ</strong>ï¼šè½®è¯¢æ–¹æ¡ˆåœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬ IEï¼Œæ— éœ€æ‹…å¿ƒå…¼å®¹æ€§é—®é¢˜</li>
<li><strong>å®ç°ç®€å•</strong>ï¼šä»£ç é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ï¼Œå›¢é˜Ÿåä½œæˆæœ¬ä½</li>
<li><strong>ç¨³å®šå¯é </strong>ï¼šä¸ä¾èµ–ç‰¹å®šçš„æµè§ˆå™¨ APIï¼Œå‡å°‘äº†æ½œåœ¨çš„å¤±è´¥ç‚¹</li>
<li><strong>æ€§èƒ½å¯æ¥å—</strong>ï¼šè™½ç„¶æ¯ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œä½†åªæ˜¯ç®€å•çš„ Cookie æ£€æŸ¥ï¼Œæ€§èƒ½å½±å“å¾ˆå°</li>
</ol>
<h4 data-id="heading-22">æ›´ä¼˜æ–¹æ¡ˆï¼šBroadcastChannel API</h4>
<p>å¦‚æœä½ è¿½æ±‚æ›´å¥½çš„æ€§èƒ½å’Œå®æ—¶æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>BroadcastChannel API</code>ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-23">BroadcastChannel çš„ä¼˜åŠ¿</h5>
<p><code>BroadcastChannel</code> å…è®¸åŒæºçš„ä¸åŒæ ‡ç­¾é¡µä¹‹é—´è¿›è¡Œæ¶ˆæ¯é€šä¿¡ï¼Œç›¸æ¯”è½®è¯¢æ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>å®æ—¶æ€§æ›´å¥½</strong>ï¼šäº‹ä»¶é©±åŠ¨ï¼Œæ— éœ€ç­‰å¾…è½®è¯¢é—´éš”ï¼Œæ£€æµ‹åˆ° token åç«‹å³å“åº”</li>
<li><strong>æ€§èƒ½æ›´ä¼˜</strong>ï¼šæ— æŒç»­ CPU å¼€é”€ï¼Œåªåœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œï¼Œèµ„æºæ¶ˆè€—æ›´ä½</li>
<li><strong>ä»£ç æ›´ç®€æ´</strong>ï¼šæ— éœ€å®šæ—¶å™¨å’Œè¶…æ—¶å¤„ç†é€»è¾‘ï¼Œä»£ç é‡æ›´å°‘</li>
</ol>
<h5 data-id="heading-24">å®ç°ç¤ºä¾‹</h5>
<p>ä½¿ç”¨ BroadcastChannel çš„å®ç°éå¸¸ç®€å•ï¼š</p>
<p><strong>ç™»å½•æˆåŠŸåå‘é€æ¶ˆæ¯</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç™»å½•æˆåŠŸå</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">BroadcastChannel</span> !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">'token-sync'</span>)
    channel.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'TOKEN_AVAILABLE'</span> })
    channel.<span class="hljs-title function_">close</span>()
}
</code></pre>
<p><strong>ç™»å½•é¡µé¢ç›‘å¬æ¶ˆæ¯</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">'token-sync'</span>)

channel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'TOKEN_AVAILABLE'</span>) {
        <span class="hljs-comment">// æ”¶åˆ°å…¶ä»–æ ‡ç­¾é¡µç™»å½•æ¶ˆæ¯ï¼Œåˆ·æ–°é¡µé¢</span>
        channel.<span class="hljs-title function_">close</span>()
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
    }
}
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼æ— éœ€å®šæ—¶å™¨ï¼Œæ— éœ€è½®è¯¢ï¼Œä»£ç æ›´æ¸…æ™°ã€‚</p>
<h5 data-id="heading-25">æ–¹æ¡ˆå¯¹æ¯”</h5>






























<table><thead><tr><th>ç‰¹æ€§</th><th>è½®è¯¢æ–¹æ¡ˆï¼ˆå½“å‰ï¼‰</th><th>BroadcastChannel</th></tr></thead><tbody><tr><td><strong>å®æ—¶æ€§</strong></td><td>æœ€å¤š 1 ç§’å»¶è¿Ÿ</td><td>å³æ—¶å“åº”</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æ¯ç§’æ‰§è¡Œä¸€æ¬¡</td><td>äº‹ä»¶è§¦å‘ï¼Œæ— æŒç»­å¼€é”€</td></tr><tr><td><strong>æµè§ˆå™¨æ”¯æŒ</strong></td><td>æ‰€æœ‰æµè§ˆå™¨</td><td>ç°ä»£æµè§ˆå™¨ï¼ˆIE ä¸æ”¯æŒï¼‰</td></tr><tr><td><strong>ä»£ç å¤æ‚åº¦</strong></td><td>ç®€å•</td><td>æ›´ç®€å•</td></tr></tbody></table>
<h5 data-id="heading-26">æ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰</h5>
<p>å¦‚æœä½ æ—¢æƒ³è¦ BroadcastChannel çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œåˆéœ€è¦å…¼å®¹æ—§æµè§ˆå™¨ï¼Œå¯ä»¥é‡‡ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">setupTokenSync</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">BroadcastChannel</span> !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ BroadcastChannel</span>
    <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">'token-sync'</span>)
    channel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'TOKEN_AVAILABLE'</span>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
      }
    }

    <span class="hljs-comment">// ä½œä¸ºé™çº§ï¼Œæ¯ 5 ç§’æ£€æŸ¥ä¸€æ¬¡ Cookieï¼ˆé˜²æ­¢æ¶ˆæ¯ä¸¢å¤±ï¼‰</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Store</span>.<span class="hljs-title function_">get_cookie</span>(<span class="hljs-string">'token'</span>)) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
      }
    }, <span class="hljs-number">5000</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// é™çº§åˆ°è½®è¯¢æ–¹æ¡ˆ</span>
    <span class="hljs-title function_">startTokenPolling</span>()
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œç°ä»£æµè§ˆå™¨äº«å— BroadcastChannel çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œæ—§æµè§ˆå™¨è‡ªåŠ¨é™çº§åˆ°è½®è¯¢æ–¹æ¡ˆï¼Œæ—¢ä¿è¯äº†æ€§èƒ½ï¼Œåˆä¿è¯äº†å…¼å®¹æ€§ã€‚</p>
<h4 data-id="heading-27">å…¶ä»–ä¼˜åŒ–æ–¹å‘</h4>
<ol>
<li><strong>æœåŠ¡ç«¯æ¨é€</strong>ï¼šå¦‚æœåç«¯æ”¯æŒ WebSocketï¼Œå¯ä»¥é€šè¿‡æœåŠ¡ç«¯æ¨é€æ¥å®ç°æ›´å®æ—¶çš„çŠ¶æ€åŒæ­¥</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong>ï¼šå¯ä»¥åœ¨æ£€æµ‹åˆ° token åï¼Œå…ˆæ˜¾ç¤ºä¸€ä¸ª"æ­£åœ¨åŒæ­¥ç™»å½•çŠ¶æ€..."çš„æç¤ºï¼Œå†åˆ·æ–°é¡µé¢</li>
<li><strong>åŠ¨æ€è½®è¯¢é¢‘ç‡</strong>ï¼šå¯ä»¥æ ¹æ®æ—¶é—´åŠ¨æ€è°ƒæ•´è½®è¯¢é¢‘ç‡ï¼Œæ¯”å¦‚å‰ 1 åˆ†é’Ÿæ¯ç§’æ£€æŸ¥ï¼Œä¹‹åé™ä½é¢‘ç‡</li>
</ol>
<h4 data-id="heading-28">é€‚ç”¨åœºæ™¯</h4>
<p>è¿™ä¸ªæ–¹æ¡ˆç‰¹åˆ«é€‚åˆï¼š</p>
<ul>
<li>å¾®æœåŠ¡æ¶æ„ä¸­çš„æˆæƒä¸­å¿ƒ</li>
<li>éœ€è¦å¤šæ ‡ç­¾é¡µçŠ¶æ€åŒæ­¥çš„ Web åº”ç”¨</li>
<li>å¯¹å®æ—¶æ€§è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜çš„åœºæ™¯ï¼ˆ1 ç§’å»¶è¿Ÿå¯æ¥å—ï¼‰</li>
</ul>
<p>å¦‚æœä½ çš„åº”ç”¨ä¸»è¦é¢å‘ç°ä»£æµè§ˆå™¨ç”¨æˆ·ï¼Œå»ºè®®è€ƒè™‘ BroadcastChannel æ–¹æ¡ˆï¼›å¦‚æœéœ€è¦å…¼å®¹æ—§æµè§ˆå™¨ï¼Œè½®è¯¢æ–¹æ¡ˆæˆ–æ··åˆæ–¹æ¡ˆéƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªæ–¹æ¡ˆèƒ½å¯¹é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–å»ºè®®ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</p>
<hr/>
<p><strong>ç›¸å…³æŠ€æœ¯æ ˆ</strong>ï¼šVue 3ã€TypeScriptã€Axiosã€å¾®å‰ç«¯</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¸ƒå±€æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šViewStub æç®€æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576821574429638665</link>    <guid>https://juejin.cn/post/7576821574429638665</guid>    <pubDate>2025-11-26T03:33:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821574429638665" data-draft-id="7576555431943733258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¸ƒå±€æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šViewStub æç®€æŒ‡å—"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-26T03:33:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ææ–¯ç»´"/> <meta itemprop="url" content="https://juejin.cn/user/3386151544043960"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¸ƒå±€æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šViewStub æç®€æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3386151544043960/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ææ–¯ç»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:33:49.000Z" title="Wed Nov 26 2025 03:33:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#5f6368;background-image:linear-gradient(90deg,rgba(240,191,213,.1) 3%,transparent 0),linear-gradient(1turn,rgba(240,191,213,.1) 3%,transparent 0);background-size:20px 20px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-left:50px;padding-bottom:5px;color:#5f6368}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:0;display:block;content:""}.markdown-body h1{font-size:32px;margin-bottom:5px}.markdown-body h1:before{top:0;content:"ğŸ¦„";font-size:32px}.markdown-body h2{padding-bottom:24px;border-bottom:1px solid #ececec}.markdown-body h2:before{top:0;left:8px;content:"ğŸ³";font-size:24px}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{top:-2px;left:8px;content:"ğŸ„";font-size:20px}.markdown-body h4{font-size:16px}.markdown-body h4:before{top:-2px;left:8px;content:"ğŸ¦¥";font-size:18px}.markdown-body h5{font-size:14px}.markdown-body h5:before{top:-2px;left:9px;content:"ğŸ¦©";font-size:16px}.markdown-body h6{font-size:12px;margin-top:5px}.markdown-body h6:before{top:-1px;left:10px;content:"ğŸ§";font-size:14px}.markdown-body p{line-height:1.9;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid rgba(253,121,168,.5);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#a6accd;background:#292d3e;border-radius:8px}.markdown-body a{text-decoration:none;color:#fd79a8;border-bottom:1px solid #fd79a8;padding:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(253,121,168,.1);color:#ee69a9}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body th{color:#fd79a8}.markdown-body th,.markdown-body tr:hover{background:rgba(253,121,168,.1)}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;color:#666;padding:23px;margin:22px 0;border-left:4px solid #ee69a9;background-color:rgba(253,121,168,.1)}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;display:block;font-size:27px;color:#fd79a8;opacity:.8}.markdown-body blockquote:before{left:10px;top:0;content:"â"}.markdown-body blockquote:after{right:10px;bottom:0;content:"â"}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body strong{position:relative;color:#fd79a8}.markdown-body strong:before{content:"Â· "}.markdown-body strong:after{content:" Â·"}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#fd79a8}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ee69a9}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ViewStub æ˜¯ Android å¼€å‘ä¸­ä¼˜åŒ–å¸ƒå±€æ€§èƒ½çš„é«˜é¢‘å®ç”¨å·¥å…·ï¼Œå®ƒé€šè¿‡è®©å¸ƒå±€æŒ‰éœ€åŠ è½½ï¼Œæ¥è§£å†³ä¸€ç³»åˆ—é—®é¢˜ã€‚æœ¬æ–‡å°†å…¨é¢è®²è§£ ViewStub åœ¨ä½¿ç”¨ä¸­å¿…çŸ¥å¿…ä¼šçš„é‚£äº›ç‚¹ï¼Œè¿˜æœ‰æ³¨æ„äº‹é¡¹ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€ç”¨æ³•</h2>
<p>ä¸ºäº†æ¼”ç¤º ViewStub çš„ä½¿ç”¨ï¼Œæˆ‘ç®€å•åšäº†ä¸ªä¸¤ä¸ªå¸ƒå±€ã€‚</p>
<p>activity_mainï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/inflate_button"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"INFLATE"</span>/&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ViewStub</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/view_stub"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"500dip"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"500dip"</span>
        <span class="hljs-attr">android:layout</span>=<span class="hljs-string">"@layout/target_layout"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>target_layoutï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@android:color/holo_green_light"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"10dip"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"ViewStub Target Layout"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/ic_launcher_background"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå°±ä¼šè°ƒç”¨ ViewStub çš„ inflate() æ–¹æ³•å°† target_layout åŠ è½½åˆ° Activity ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">( Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        <span class="hljs-keyword">final</span> <span class="hljs-type">Button</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> findViewById(R.id.inflate_button);
        button.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View v)</span> {
                <span class="hljs-keyword">final</span> <span class="hljs-type">ViewStub</span> <span class="hljs-variable">viewStub</span> <span class="hljs-operator">=</span> findViewById(R.id.view_stub);
                <span class="hljs-keyword">if</span>(viewStub != <span class="hljs-literal">null</span>)
                    viewStub.inflate();
            }
        });

    }
}
</code></pre>
<p>åœ¨åŠ è½½å¸ƒå±€æ—¶ï¼Œè™½ç„¶å¸ƒå±€æ–‡ä»¶ä¸­æœ‰ ViewStubï¼Œä½†æ˜¯å®ƒæ˜¯ç¬¬ä¸€ä¸ªé›¶å®½ã€é›¶é«˜ã€ä¸å¯è§çš„ Viewï¼Œè€Œä¸”åœ¨å†…å­˜ä¸­å‡ ä¹ä¸å æ®ä»»ä½•ç©ºé—´ã€‚ä»»ä½•æ¶ˆè€—éƒ½åœ¨å…¶è¢«è°ƒç”¨ inflate ä¹‹åã€‚</p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåªè¦æ‰¾åˆ° ViewStub ç„¶åè°ƒç”¨ inflate() æ–¹æ³•ï¼Œå°±å¯ä»¥åŠ è½½æŒ‡å®šå¸ƒå±€ã€‚è¿™ä¸ªå¸ƒå±€å¯ä»¥é€šè¿‡ ViewStub çš„ android:layout å±æ€§æ¥æŒ‡å®šã€‚</p>
<p>è¿™æ˜¯ ViewStub æœ€åŸºç¡€çš„ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒè¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚</p>
<h2 data-id="heading-1">æ³¨æ„äº‹é¡¹</h2>
<p>è¿™å‡ ä¸ªæ³¨æ„äº‹é¡¹æˆ‘å…ˆåˆ—å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li>ViewStub åœ¨ inflate ä¹‹åå°±ä»å¸ƒå±€ä¸­æ¶ˆå¤±äº†ï¼Œæ— æ³•å†è¢« findViewById</li>
<li>ViewStub çš„ width å’Œ height å±æ€§æ— æ•ˆï¼Œæ˜¯ç”¨äºä¼ é€’ç»™ç›®æ ‡ layout çš„</li>
<li>å¯ä»¥é€šè¿‡è®¾ç½® inflatedId æ¥è®¾ç½®ç›®æ ‡ layout æ ¹å¸ƒå±€çš„ id å±æ€§</li>
<li>å¯ä»¥åœ¨ä»£ç ä¸­è®¾ç½® setLayoutResource æ¥è¦†ç›– XML ä¸­çš„ android:layout å±æ€§ï¼ŒæŒ‡å®šè¦åŠ è½½çš„å¸ƒå±€</li>
<li>å¯¹ ViewStub è°ƒç”¨ setVisibility(VISIBLE) ä¸è°ƒç”¨ inflate() çš„æ•ˆæœæ˜¯å®Œå…¨ä¸€æ ·çš„</li>
<li>è¦åŠ è½½çš„å¸ƒå±€ä¸èƒ½æ˜¯ merge æˆ– include</li>
<li>å¯ä»¥é€šè¿‡ setOnInflateListener æ¥ç›‘å¬åŠ è½½å®Œæˆäº‹ä»¶</li>
</ul>
<p>æ¥ä¸‹å¯¹è¿™äº›æ³¨æ„äº‹é¡¹æˆ‘ä»¬å°±ä¸€ä¸€è¯´é“è¯´é“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f3a08266dd54c94b5905dc066fa2ba1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5pav57u0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764732829&amp;x-signature=hpNLc2lOwMNwMgJqNYbx7OItp2U%3D" alt="" loading="lazy"/></p>
<p>å‰é¢è¯´è¿‡ï¼ŒViewStub çš„æ ¸å¿ƒä»»åŠ¡å°±æ˜¯ â€œä¸€æ¬¡æ€§æ›¿æ¢â€ã€‚å½“è°ƒç”¨ inflate() æ–¹æ³•æˆ–å°†å…¶è®¾ç½®ä¸º VISIBLE æ—¶ï¼Œå®ƒä¼šæ‰¾åˆ°è‡ªèº«æ‰€åœ¨çš„çˆ¶å¸ƒå±€ï¼Œå°†è‡ªå·±ä»çˆ¶å¸ƒå±€çš„ View æ ‘ä¸­ç§»é™¤ï¼Œç„¶åå°†å®ƒæŒ‡å‘çš„ target_layout åŠ è½½è¿›æ¥å¹¶æ›¿æ¢è‡ªå·±çš„ä½ç½®ã€‚ä¸€æ—¦è¢«ç§»é™¤ï¼ŒViewStub è¿™ä¸ªå¯¹è±¡å°±ä¸å†å­˜åœ¨äºå½“å‰çš„ View å±‚æ¬¡ç»“æ„ä¸­ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸èƒ½å†é€šè¿‡ä»»ä½•æ–¹å¼ï¼ˆåŒ…æ‹¬ findViewByIdï¼‰æŸ¥æ‰¾å’Œæ“ä½œå®ƒã€‚æ‰€ä»¥å½“ç¬¬äºŒæ¬¡è°ƒç”¨ findViewById æŸ¥æ‰¾æ—¶ï¼Œåªèƒ½è¿”å› nullã€‚</p>
<p>ViewStub è‡ªèº«åœ¨ View æ ‘ä¸­æ˜¯ä¸€ä¸ª é›¶å°ºå¯¸ çš„ Viewã€‚å®ƒçš„èŒè´£æ˜¯å ä½ï¼Œè€Œä¸æ˜¯å ç©ºé—´ã€‚å› æ­¤ï¼Œå®ƒè‡ªèº«çš„å®½é«˜è®¾ç½®å¯¹å®ƒè‡ªå·±ä¸èµ·ä½œç”¨ã€‚å½“ ViewStub æ‰§è¡Œæ›¿æ¢æ“ä½œæ—¶ï¼Œå®ƒä¼šæŠŠè‡ªå·±å®šä¹‰çš„ android:layout_width å’Œ android:layout_height å±æ€§ï¼Œä½œä¸º LayuoutParams ä¼ é€’ç»™è¢«åŠ è½½çš„ target_layout çš„æ ¹ Viewã€‚è¿™å†³å®šäº†è¢«åŠ è½½ View åœ¨çˆ¶å®¹å™¨ä¸­çš„å¤§å°å’Œå®šä½ã€‚</p>
<p>åŒç†ï¼ŒViewStub ä¸­çš„ android:inflatedId å±æ€§ï¼Œä¹Ÿä¼šè¦†ç›– target_layout çš„æ ¹ View çš„ id å±æ€§ã€‚è€Œä¸”è¿™ä¸ª target_layout çš„æ ¹ View ä¼šåœ¨ inflate æ—¶è¿”å›ã€‚</p>
<p>ä¸Šé¢è¯´åˆ°è¯´å¯ä»¥è¿‡ setOnInflateListener æ¥ç›‘å¬åŠ è½½å®Œæˆäº‹ä»¶ï¼Œè¿™é‡Œæœ‰ç‚¹è¦æ³¨æ„ï¼Œé‚£å°±æ˜¯åœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„æ¸…ç©ºè¿™ä¸ª Listenerï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">viewStub.setOnInflateListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewStub</span>.OnInflateListener() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInflate</span><span class="hljs-params">(ViewStub stub, View inflated)</span> {
        <span class="hljs-comment">// inflated å°±æ˜¯è¢«åŠ è½½è¿›æ¥çš„ target_layout çš„æ ¹ View</span>
        viewStub.setOnInflateListener(<span class="hljs-literal">null</span>);
        <span class="hljs-comment">// TODO...</span>
    }
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift UIæ•°æ®å­˜å‚¨]]></title>    <link>https://juejin.cn/post/7576605171771359282</link>    <guid>https://juejin.cn/post/7576605171771359282</guid>    <pubDate>2025-11-26T03:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576605171771359282" data-draft-id="7576555431943585802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift UIæ•°æ®å­˜å‚¨"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-11-26T03:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift UIæ•°æ®å­˜å‚¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:34:15.000Z" title="Wed Nov 26 2025 03:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€. @StateObject æ•°æ®å­˜å‚¨æœºåˆ¶</h3>
<p><code>@StateObject</code> ä¿å­˜çš„æ•°æ®å­˜å‚¨åœ¨è®¾å¤‡å†…å­˜ï¼ˆRAMï¼‰ä¸­ï¼Œæ˜¯ä¸´æ—¶å­˜å‚¨</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">import</span> Combine
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BloodGlucoseStore</span>: <span class="hljs-title class_">ObservableObject</span>{
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> count <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">// å­˜å‚¨åœ¨å†…å­˜ä¸­</span>
    
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">JLHomeView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@StateObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> store <span class="hljs-operator">=</span> <span class="hljs-type">BloodGlucoseStore</span>()<span class="hljs-comment">// å¯¹è±¡å­˜åœ¨äºå†…å­˜ä¸­</span>
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"è®°å½•æ•°é‡:<span class="hljs-subst">\(store.count)</span>"</span>)
        <span class="hljs-type">Button</span>(<span class="hljs-string">"ç‚¹å‡»"</span>) {
            store.count <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
        }
        
    }
}
</code></pre>
<h4 data-id="heading-1">æ•°æ®ç”Ÿå‘½å‘¨æœŸ</h4>
<ul>
<li><strong>åˆ›å»ºæ—¶æœº</strong>ï¼šè§†å›¾ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶</li>
<li><strong>ä¿æŒæ—¶æœº</strong>ï¼šè§†å›¾é‡æ–°æ¸²æŸ“æ—¶æ•°æ®ä¿æŒä¸å˜</li>
<li><strong>é”€æ¯æ—¶æœº</strong>ï¼šè§†å›¾è¢«é”€æ¯æ—¶æ•°æ®ä¸¢å¤±</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> showHomeView <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Button</span>(<span class="hljs-string">"æ˜¾ç¤º/éšè— HomeView"</span>) {
                showHomeView.toggle()
            }
            
            <span class="hljs-keyword">if</span> showHomeView {
                <span class="hljs-type">JLHomeView</span>()  <span class="hljs-comment">// åˆ›å»ºæ—¶ï¼šæ•°æ®åœ¨å†…å­˜ä¸­åˆ›å»º</span>
            }              <span class="hljs-comment">// é”€æ¯æ—¶ï¼šæ•°æ®ä»å†…å­˜ä¸­æ¸…é™¤</span>
        }
    }
}

</code></pre>
<h3 data-id="heading-2">äºŒ. UserDefaults å­˜å‚¨æœºåˆ¶</h3>
<p><strong>å­˜å‚¨ä½ç½®</strong></p>
<ul>
<li>ğŸ“ åº”ç”¨æ²™ç›’ä¸­çš„ <code>.plist</code> æ–‡ä»¶</li>
<li>è·¯å¾„ï¼š<code>/Library/Preferences/[Bundle-ID].plist</code></li>
</ul>
<h4 data-id="heading-3">UserDefaults æ•°æ®å®‰å…¨æ€§</h4>
<h5 data-id="heading-4">âœ… ä¸ä¼šä¸¢å¤±çš„æƒ…å†µ</h5>
<ul>
<li><strong>åº”ç”¨æ›´æ–°</strong>ï¼šæ•°æ®ä¿æŒä¸å˜</li>
<li><strong>åº”ç”¨é‡å¯</strong>ï¼šæ•°æ®ä¾ç„¶å­˜åœ¨</li>
<li><strong>è®¾å¤‡é‡å¯</strong>ï¼šæ•°æ®ä¿æŒä¸å˜</li>
<li><strong>iOS ç³»ç»Ÿæ›´æ–°</strong>ï¼šæ•°æ®é€šå¸¸ä¿æŒ</li>
</ul>
<h5 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>âŒ ä¼šä¸¢å¤±çš„æƒ…å†µ</h5>
<ul>
<li><strong>å¸è½½åº”ç”¨</strong>ï¼šæ•´ä¸ªåº”ç”¨æ²™ç›’è¢«åˆ é™¤</li>
<li><strong>æ¢å¤è®¾å¤‡ä½†ä¸æ¢å¤å¤‡ä»½</strong>ï¼šæ•°æ®ä¸¢å¤±</li>
<li><strong>æ‰‹åŠ¨æ¸…é™¤åº”ç”¨æ•°æ®</strong>ï¼šé€šè¿‡ç³»ç»Ÿè®¾ç½®æ¸…é™¤</li>
</ul>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SettingStore</span>: <span class="hljs-title class_">ObservableObject</span>{
    
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isDarmMode: <span class="hljs-type">Bool</span>{
        <span class="hljs-keyword">didSet</span>{
            <span class="hljs-comment">/// ä¿å­˜æ•°æ®</span>
            <span class="hljs-type">UserDefaults</span>.standard.set(isDarmMode, forKey: <span class="hljs-string">"isDarmMode"</span>)
            <span class="hljs-type">UserDefaults</span>.standard.synchronize()
        }
    }
    
    <span class="hljs-keyword">init</span>(){
        <span class="hljs-comment">/// è¯»æ•°æ•°æ®</span>
        isDarmMode <span class="hljs-operator">=</span> <span class="hljs-type">UserDefaults</span>.standard.bool(forKey: <span class="hljs-string">"isDarmMode"</span>)
    }
    <span class="hljs-keyword">deinit</span>{
        <span class="hljs-comment">/// åˆ é™¤æ•°æ®</span>
        <span class="hljs-type">UserDefaults</span>.standard.removeObject(forKey: <span class="hljs-string">"isDarmMode"</span>)
        <span class="hljs-type">UserDefaults</span>.standard.synchronize()
    }
}

</code></pre>
<h3 data-id="heading-6">ä¸‰. @Published å±æ€§åŒ…è£…å™¨</h3>
<h4 data-id="heading-7">æ ¸å¿ƒä½œç”¨</h4>
<p><code>@Published</code> çš„ä¸»è¦ä½œç”¨æ˜¯è‡ªåŠ¨è§¦å‘ UI æ›´æ–°</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterStore</span>: <span class="hljs-title">ObservableObject</span> {
    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>  <span class="hljs-comment">// æ™®é€šå±æ€§</span>
    
    <span class="hljs-function">func <span class="hljs-title">increment</span>()</span> {
        count += <span class="hljs-number">1</span>  <span class="hljs-comment">// UI ä¸ä¼šæ›´æ–°ï¼</span>
    }
}

</code></pre>
<h4 data-id="heading-8">å®é™…åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">BloodGlucoseStore</span>: <span class="hljs-selector-tag">ObservableObject</span> {
    <span class="hljs-variable">@Published</span> var <span class="hljs-attribute">records</span>: [BloodGlucoseRecord] = []
    <span class="hljs-variable">@Published</span> var isLoading = false
    <span class="hljs-variable">@Published</span> var <span class="hljs-attribute">errorMessage</span>: String?
    <span class="hljs-variable">@Published</span> var selectedDate = <span class="hljs-built_in">Date</span>()
    <span class="hljs-variable">@Published</span> var <span class="hljs-attribute">filterType</span>: FilterType = .all
    
    <span class="hljs-comment">// è®¡ç®—å±æ€§ä¹Ÿä¼šå“åº” @Published å±æ€§çš„å˜åŒ–</span>
    var <span class="hljs-attribute">filteredRecords</span>: [BloodGlucoseRecord] {
        <span class="hljs-selector-tag">switch</span> <span class="hljs-selector-tag">filterType</span> {
        <span class="hljs-selector-tag">case</span> <span class="hljs-selector-class">.all</span>:
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">records</span>
        <span class="hljs-selector-tag">case</span> <span class="hljs-selector-class">.today</span>:
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">records</span><span class="hljs-selector-class">.filter</span> { <span class="hljs-selector-tag">Calendar</span><span class="hljs-selector-class">.current</span><span class="hljs-selector-class">.isDateInToday</span>($<span class="hljs-number">0</span>.date) }
        <span class="hljs-selector-tag">case</span> <span class="hljs-selector-class">.thisWeek</span>:
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">records</span><span class="hljs-selector-class">.filter</span> { $<span class="hljs-number">0</span><span class="hljs-selector-class">.date</span><span class="hljs-selector-class">.isInCurrentWeek</span> }
        }
    }
    
    <span class="hljs-selector-tag">func</span> <span class="hljs-selector-tag">addRecord</span>(_ <span class="hljs-attribute">record</span>: BloodGlucoseRecord) {
        <span class="hljs-selector-tag">records</span><span class="hljs-selector-class">.append</span>(record)  <span class="hljs-comment">// è§¦å‘ UI æ›´æ–°</span>
    }
    
    <span class="hljs-selector-tag">func</span> <span class="hljs-selector-tag">setFilter</span>(_ <span class="hljs-attribute">filter</span>: FilterType) {
        <span class="hljs-selector-tag">filterType</span> = <span class="hljs-selector-tag">filter</span>  <span class="hljs-comment">// è§¦å‘ç­›é€‰æ›´æ–°</span>
    }
}

</code></pre>
<h4 data-id="heading-9">é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-10">è‡ªå®šä¹‰ setter</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserStore</span>: <span class="hljs-title class_">ObservableObject</span> {
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> username: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span> {
        <span class="hljs-keyword">didSet</span> {
            validateUsername()
            saveToUserDefaults()
        }
    }
    
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isUsernameValid <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">validateUsername</span>() {
        isUsernameValid <span class="hljs-operator">=</span> username.count <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span>
    }
}

</code></pre>
<h5 data-id="heading-11">çº§è”æ›´æ–°</h5>
<pre><code class="hljs language-scss" lang="scss">class ShoppingCartStore: ObservableObject {
    <span class="hljs-keyword">@Published</span> var <span class="hljs-attribute">items</span>: [CartItem] = [] {
        didSet {
            <span class="hljs-built_in">updateTotalPrice</span>()  <span class="hljs-comment">// items å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°æ€»ä»·</span>
        }
    }
    
    <span class="hljs-keyword">@Published</span> var <span class="hljs-attribute">totalPrice</span>: Double = <span class="hljs-number">0</span>
    <span class="hljs-keyword">@Published</span> var <span class="hljs-attribute">discountCode</span>: String = <span class="hljs-string">""</span> {
        didSet {
            <span class="hljs-built_in">updateTotalPrice</span>()  <span class="hljs-comment">// æŠ˜æ‰£ç å˜åŒ–æ—¶ä¹Ÿæ›´æ–°æ€»ä»·</span>
        }
    }
    
    private func <span class="hljs-built_in">updateTotalPrice</span>() {
        let subtotal = items<span class="hljs-selector-class">.reduce</span>(<span class="hljs-number">0</span>) { $<span class="hljs-number">0</span> + $<span class="hljs-number">1</span><span class="hljs-selector-class">.price</span> * Double($<span class="hljs-number">1</span>.quantity) }
        let discount = <span class="hljs-built_in">calculateDiscount</span>(for: discountCode)
        totalPrice = subtotal - discount
    }
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin ä¸­ç±»æˆå‘˜è®¿é—®æƒé™çš„å®è·µä¸è¾¨æ]]></title>    <link>https://juejin.cn/post/7576592590947663906</link>    <guid>https://juejin.cn/post/7576592590947663906</guid>    <pubDate>2025-11-26T03:33:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576592590947663906" data-draft-id="7576556950331932672" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin ä¸­ç±»æˆå‘˜è®¿é—®æƒé™çš„å®è·µä¸è¾¨æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T03:33:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜•æ˜•æ‹æ‹"/> <meta itemprop="url" content="https://juejin.cn/user/775617289391353"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin ä¸­ç±»æˆå‘˜è®¿é—®æƒé™çš„å®è·µä¸è¾¨æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/775617289391353/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜•æ˜•æ‹æ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:33:04.000Z" title="Wed Nov 26 2025 03:33:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç ”è®¨ä¸»é¢˜å¼•å…¥ï¼šä¸ºä»€ä¹ˆè¦å…³æ³¨ Kotlin çš„è®¿é—®æƒé™ï¼Ÿ</h2>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè®¿é—®æƒé™æ˜¯ â€œå°è£…æ€§â€ çš„æ ¸å¿ƒä½“ç° â€”â€” å®ƒå†³å®šäº†<strong>å“ªäº›ä»£ç èƒ½è®¿é—®ç±»çš„æˆå‘˜</strong>ï¼Œç›´æ¥å½±å“ä»£ç çš„å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§ã€‚Kotlin çš„è®¿é—®æƒé™è§„åˆ™ï¼ˆä¸ Java æœ‰å·®å¼‚ï¼‰æ˜¯åˆå­¦è€…çš„æ˜“æ··æ·†ç‚¹ï¼Œæœ¬æ¬¡ä»¥ç¤ºä¾‹ä»£ç ä¸ºè½½ä½“ï¼Œæ‹†è§£ä¸åŒæƒé™çš„è¡¨ç°ä¸åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¤ºä¾‹ä»£ç çš„æƒé™ç±»å‹æ¢³ç†</h2>
<p>åŸºäºç ”è®¨ä»£ç ï¼Œå…ˆæ˜ç¡® Kotlin ä¸­ 4 ç§æ ¸å¿ƒè®¿é—®æƒé™çš„å®šä¹‰ï¼š</p>






























<table><thead><tr><th>æƒé™ä¿®é¥°ç¬¦</th><th>å¯è®¿é—®èŒƒå›´</th><th>ä»£ç å¯¹åº”æˆå‘˜</th></tr></thead><tbody><tr><td><code>public</code>ï¼ˆé»˜è®¤ï¼‰</td><td>ä»»æ„ä½ç½®</td><td><code>Person.name</code></td></tr><tr><td><code>protected</code></td><td>æœ¬ç±»ã€å­ç±»ï¼ˆä½†ç±»å¤–éƒ¨ä¸å¯è®¿é—®ï¼‰</td><td><code>Person.birthday</code></td></tr><tr><td><code>private</code></td><td>æœ¬ç±» + ä¼´ç”Ÿå¯¹è±¡</td><td><code>Person.password</code></td></tr><tr><td><code>private[this]</code></td><td>ä»…å½“å‰ç±»çš„<strong>å½“å‰å®ä¾‹</strong>ï¼ˆä¼´ç”Ÿå¯¹è±¡ä¹Ÿä¸å¯è®¿é—®ï¼‰</td><td><code>Person.money</code></td></tr></tbody></table>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Test</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> p: <span class="hljs-type">Person</span>? = <span class="hljs-type">Unit</span>
  <span class="hljs-comment">// print(p?.password) åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸­å¯ä»¥è®¿é—®</span>
  <span class="hljs-comment">// private[this] åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸­ä¸å¯ä»¥è®¿é—®</span>
  <span class="hljs-comment">// print(p?.money)</span>

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> = <span class="hljs-string">"xx"</span> <span class="hljs-comment">// å…¬å¼€çš„</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">var</span> birthday: <span class="hljs-type">String</span> = <span class="hljs-string">"2000-10-10"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> password: <span class="hljs-type">String</span> = <span class="hljs-string">"123456"</span>
    <span class="hljs-keyword">private</span>[<span class="hljs-keyword">this</span>] <span class="hljs-keyword">var</span> money: <span class="hljs-type">Int</span> = <span class="hljs-number">100</span>
    fun (): <span class="hljs-type">Unit</span> {
      print(money)
    }
  }

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span> </span>{
    <span class="hljs-comment">// 1. protectedåœ¨å­ç±»ä¸­å¯ä»¥è®¿é—®</span>
    <span class="hljs-comment">// 2. protectedåœ¨å­ç±»ä¸­</span>
    <span class="hljs-comment">// 3. privateåœ¨å­ç±»ä¸­ä¸å¯ä»¥è®¿é—®</span>
  }

  fun main(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;): <span class="hljs-type">Unit</span> {
    <span class="hljs-keyword">val</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-type">Person</span>()
    <span class="hljs-comment">// 1. print(p1.name)</span>
    <span class="hljs-comment">// 2. protectedåœ¨ç±»çš„å¤–éƒ¨æ— æ³•è®¿é—®</span>
    <span class="hljs-comment">// print(p1.birthday)</span>
    <span class="hljs-keyword">new</span> <span class="hljs-type">Son</span>()
    <span class="hljs-comment">// 3. åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸­é—´ï¼Œå¯ä»¥çš„ç§æœ‰æˆå‘˜</span>
    <span class="hljs-type">Person</span>.test(p1)
  }
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€ä»£ç ä¸­æƒé™è§„åˆ™çš„å®è·µéªŒè¯</h2>
<h3 data-id="heading-3">1.Â <code>public</code>ï¼ˆé»˜è®¤ï¼‰çš„è¡¨ç°</h3>
<ul>
<li>ä»£ç ä¸­<code>Person.name</code>æœªå†™ä¿®é¥°ç¬¦ï¼Œé»˜è®¤æ˜¯<code>public</code></li>
<li>éªŒè¯ï¼š<code>main</code>å‡½æ•°ä¸­<code>print(p1.name)</code>å¯æ­£å¸¸æ‰§è¡Œï¼ˆç±»å¤–éƒ¨å¯è®¿é—®ï¼‰</li>
</ul>
<h3 data-id="heading-4">2.Â <code>protected</code>çš„ â€œå­ç±»å¯ç”¨ã€å¤–éƒ¨ä¸å¯ç”¨â€</h3>
<ul>
<li>
<p>ä»£ç ä¸­<code>Person.birthday</code>ç”¨<code>protected</code>ä¿®é¥°ï¼š</p>
<ul>
<li>åˆæ³•åœºæ™¯ï¼š<code>Son</code>ç±»ï¼ˆå­ç±»ï¼‰ä¸­å¯ä»¥è®¿é—®<code>birthday</code>ï¼›</li>
<li>éæ³•åœºæ™¯ï¼š<code>main</code>å‡½æ•°ä¸­<code>print(p1.birthday)</code>ä¼šæŠ¥é”™ï¼ˆç±»å¤–éƒ¨æ— è®¿é—®æƒï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">3.Â <code>private</code>ä¸<code>private[this]</code>çš„å…³é”®å·®å¼‚</h3>
<p>è¿™æ˜¯ Kotlin ç‹¬æœ‰çš„ç»†èŠ‚ï¼Œéœ€é‡ç‚¹è¾¨æï¼š</p>
<ul>
<li><strong><code>private</code>ï¼ˆæ™®é€šï¼‰</strong> ï¼šä»£ç ä¸­<code>Person.password</code>æ˜¯<code>private</code>ï¼Œä¼´ç”Ÿå¯¹è±¡<code>Test</code>ä¸­<code>print(p?.password)</code>æ˜¯åˆæ³•çš„ï¼ˆä¼´ç”Ÿå¯¹è±¡ä¸ç±»æœ¬èº« â€œåŒå±ä¸€ä¸ªå•å…ƒâ€ï¼‰ï¼›</li>
<li><strong><code>private[this]</code></strong> ï¼šä»£ç ä¸­<code>Person.money</code>ç”¨<code>private[this]</code>ä¿®é¥°ï¼Œä»…èƒ½åœ¨<code>Person</code>ç±»çš„<strong>è‡ªèº«å®ä¾‹æ–¹æ³•</strong>ä¸­è®¿é—®ï¼ˆå¦‚<code>Person</code>å†…çš„<code>fun()</code>å¯ä»¥<code>print(money)</code>ï¼‰ï¼Œä½†ä¼´ç”Ÿå¯¹è±¡ä¸­<code>print(p?.money)</code>ä¼šæŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-6">4. ä¼´ç”Ÿå¯¹è±¡çš„ â€œç‰¹æ®Šè®¿é—®æƒâ€</h3>
<p>Kotlin ä¸­ï¼Œ<code>object Test</code>æ˜¯<code>Person</code>çš„<strong>ä¼´ç”Ÿå¯¹è±¡</strong>ï¼ˆéœ€æ³¨æ„ï¼šä»£ç ä¸­å†™æ³•ä¸è§„èŒƒï¼Œæ­£ç¡®ä¼´ç”Ÿå¯¹è±¡åº”æ˜¯<code>class Person { companion object Test { ... } }</code>ï¼‰ï¼Œå…¶ç‰¹æ®Šæƒé™æ˜¯ï¼šèƒ½è®¿é—®ç±»çš„<code>private</code>æˆå‘˜ï¼ˆå¦‚<code>password</code>ï¼‰ï¼Œä½†ä¸èƒ½è®¿é—®<code>private[this]</code>æˆå‘˜ï¼ˆå¦‚<code>money</code>ï¼‰ã€‚</p>
<h2 data-id="heading-7">å››ã€ç ”è®¨æ€»ç»“ï¼šè®¿é—®æƒé™çš„ä½¿ç”¨å»ºè®®</h2>
<ol>
<li>ä¼˜å…ˆç”¨<code>private</code>/<code>private[this]</code>ï¼šå‡å°‘ä¸å¿…è¦çš„æš´éœ²ï¼Œæå‡å°è£…æ€§ï¼›</li>
<li><code>protected</code>ç”¨äº â€œå­ç±»éœ€è¦æ‰©å±•ã€ä½†å¤–éƒ¨æ— éœ€è®¿é—®â€ çš„æˆå‘˜ï¼›</li>
<li>é¿å…æ»¥ç”¨<code>public</code>ï¼šä»…å¯¹å¤–æš´éœ²å¿…è¦çš„æ¥å£ï¼Œéšè—å†…éƒ¨å®ç°ç»†èŠ‚ã€‚</li>
</ol>
<h2 data-id="heading-8">äº”ã€æ‹“å±•æ€è€ƒ</h2>
<p>è¯·ä¿®æ”¹ä»£ç ï¼Œåœ¨<code>Son</code>ç±»ä¸­å°è¯•è®¿é—®<code>birthday</code>ï¼Œå¹¶éªŒè¯<code>private[this]</code>åœ¨ â€œä¸åŒå®ä¾‹â€ ä¸­çš„è®¿é—®é™åˆ¶ â€”â€” è¦ä¸è¦æˆ‘å¸®ä½ è¡¥å……ä¸€ä»½<strong>æƒé™éªŒè¯çš„å®æ“ä»£ç ç¤ºä¾‹</strong>ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºé¸¿è’™ç”Ÿæ€æ³¨å…¥å¯è§‚æµ‹åŠ¨åŠ›ï¼šè§‚æµ‹äº‘ HarmonyOS SDK é‡ç£…ä¸Šçº¿]]></title>    <link>https://juejin.cn/post/7576592590947778594</link>    <guid>https://juejin.cn/post/7576592590947778594</guid>    <pubDate>2025-11-26T03:43:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576592590947778594" data-draft-id="7576556950331654144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºé¸¿è’™ç”Ÿæ€æ³¨å…¥å¯è§‚æµ‹åŠ¨åŠ›ï¼šè§‚æµ‹äº‘ HarmonyOS SDK é‡ç£…ä¸Šçº¿"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-26T03:43:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºé¸¿è’™ç”Ÿæ€æ³¨å…¥å¯è§‚æµ‹åŠ¨åŠ›ï¼šè§‚æµ‹äº‘ HarmonyOS SDK é‡ç£…ä¸Šçº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:43:58.000Z" title="Wed Nov 26 2025 03:43:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€é¸¿è’™ï¼ˆHarmonyOSï¼‰ç”Ÿæ€çš„å¿«é€Ÿæ‰©å¼ ï¼Œåº”ç”¨å¼€å‘è€…å¯¹æ€§èƒ½ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒçš„å…³æ³¨ä¹Ÿæ—¥ç›Šæé«˜ã€‚æˆªè‡³ 2024 å¹´åä¸ºå®˜æ–¹æ•°æ®æ˜¾ç¤ºï¼Œå…¨çƒå·²æœ‰è¶…è¿‡ 9 äº¿è®¾å¤‡è¿è¡Œé¸¿è’™ç³»ç»Ÿã€‚è¿™ä¸€åºå¤§çš„ç”¨æˆ·è§„æ¨¡å’Œç”Ÿæ€æ‰©å¼ å‚¬ç”Ÿäº†å¯¹ä¸“ä¸šå¯è§‚æµ‹æ€§å¹³å°çš„éœ€æ±‚ã€‚</p>
<p>åŸºäºè¿™ä¸€è¶‹åŠ¿ï¼Œè§‚æµ‹äº‘æ­£å¼å‘å¸ƒå…¨åŠŸèƒ½ HarmonyOS åº”ç”¨æ•°æ®é‡‡é›†ä¸ç›‘æ§ SDKï¼Œä¸ºé¸¿è’™åº”ç”¨æä¾›ç«¯åˆ°ç«¯çš„å¯è§‚æµ‹èƒ½åŠ›ã€‚ä»é¡µé¢åŠ è½½æ€§èƒ½ï¼Œåˆ°æ¥å£é“¾è·¯ï¼Œå†åˆ°ç”¨æˆ·è¡Œä¸ºä¸å¼‚å¸¸åˆ†æï¼Œè§‚æµ‹äº‘éƒ½èƒ½å¤Ÿåœ¨ä¸€ä¸ªå¹³å°å†…ä¸ºå¼€å‘è€…æä¾›åŸç”Ÿã€é«˜æ•ˆã€å…¨æ–¹ä½çš„åº”ç”¨ç›‘æ§èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-0">æ›´æ‡‚é¸¿è’™ç”Ÿæ€çš„è§‚æµ‹èƒ½åŠ›ï¼Œä¸ºå¼€å‘è€…å‡å°‘ä¸ç¡®å®šæ€§</h2>
<p><strong>é¸¿è’™åŸç”ŸåŒ–å¸¦æ¥æ–°ä½“éªŒï¼Œä¹Ÿå¸¦æ¥æ–°æŒ‘æˆ˜</strong></p>
<p>HarmonyOS åœ¨ç³»ç»Ÿå±‚è¿›è¡Œäº†å¤§è§„æ¨¡é‡æ„ï¼Œåº”ç”¨è¿è¡Œç¯å¢ƒä¸ä¼ ç»Ÿç³»ç»Ÿå­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼š</p>
<ul>
<li>ArkUI é©±åŠ¨çš„å…¨æ–°æ¸²æŸ“ç»“æ„</li>
<li>æ›´ç»†ç²’åº¦çš„é¡µé¢ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</li>
<li>åˆ†å¸ƒå¼åœºæ™¯ä¸‹å¤æ‚çš„äº¤äº’è·¯å¾„</li>
<li>ç½‘ç»œã€èµ„æºä¸å¼‚å¸¸æ¨¡å‹çš„é‡æ–°å®šä¹‰</li>
</ul>
<p>è¿™äº›å˜åŒ–æ„å‘³ç€ï¼š</p>
<p>è¿‡å¾€çš„ç›‘æ§æ–¹æ¡ˆæ— æ³•å®Œæ•´åæ˜ é¸¿è’™åº”ç”¨çš„çœŸå®è¡¨ç°ã€‚</p>
<p>åœ¨ä½“éªŒç«äº‰å˜å¾—æ›´æ¿€çƒˆçš„ä»Šå¤©ï¼Œå¼€å‘è€…ä¸ä»…éœ€è¦â€œèƒ½çœ‹åˆ°é—®é¢˜â€ï¼Œæ›´éœ€è¦â€œå°½æ—©å‘ç°é—®é¢˜â€ã€â€œå¿«é€Ÿåˆ¤æ–­å½±å“â€ã€â€œæ¸…æ™°ç†è§£ä½“éªŒå˜åŒ–â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a779b773836a4d07b6a2ab66bad90acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764733438&amp;x-signature=xMhd6BCqGuWDdJMU9Lb9ynPpjoY%3D" alt="1.png" loading="lazy"/></p>
<p>è§‚æµ‹äº‘ HarmonyOS SDK æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿâ€”â€”å¸®åŠ©å›¢é˜Ÿåœ¨å…¨æ–°ç”Ÿæ€ä¸‹ä¾ç„¶ä¿æŒå¯¹æ€§èƒ½ã€ç¨³å®šæ€§ä¸ä½“éªŒçš„æ·±åº¦æŒæ§ï¼š</p>
<ul>
<li>ä¸“ä¸º HarmonyOS è®¾è®¡ï¼šåŸºäº ArkTS è¯­è¨€å¼€å‘ï¼Œå®Œå…¨ç¬¦åˆ HarmonyOS å¼€å‘æœ€ä½³å®è·µ</li>
<li>å…¨é“¾è·¯ç›‘æ§ï¼šä»ç”¨æˆ·è¡Œä¸ºåˆ°ç½‘ç»œè¯·æ±‚ï¼Œä»é¡µé¢åŠ è½½åˆ°é”™è¯¯è¿½è¸ªï¼Œå…¨æ–¹ä½è¦†ç›–</li>
<li>è½»é‡é«˜æ•ˆï¼šé‡‡ç”¨å¼‚æ­¥å¤„ç†ã€æ‰¹é‡ä¸Šä¼ ã€é‡‡æ ·æ§åˆ¶ç­‰ä¼˜åŒ–ç­–ç•¥ï¼Œå¯¹åº”ç”¨æ€§èƒ½å½±å“æå°</li>
<li>æ˜“äºé›†æˆï¼šæä¾› HAR åŒ…æ ¼å¼ï¼Œåªéœ€å‡ è¡Œä»£ç å³å¯å®Œæˆé›†æˆ</li>
<li>å¤šåè®®æ”¯æŒï¼šæ”¯æŒ DDTRACEã€ZIPKINã€JAEGERã€TRACEPARENTã€SKYWALKING ç­‰å¤šç§é“¾è·¯è¿½è¸ªåè®®</li>
<li>åŸç”Ÿä½“éªŒï¼šå……åˆ†åˆ©ç”¨ HarmonyOS åŸç”Ÿèƒ½åŠ›ï¼Œå¦‚ RCP æ‹¦æˆªå™¨ã€UIObserver ç­‰</li>
</ul>
<h2 data-id="heading-1">ç”¨æ›´æ¸…æ™°çš„æ•°æ®è§‚æµ‹ï¼Œæ”¯æ’‘æ›´è‡ªä¿¡çš„åº”ç”¨è¿­ä»£</h2>
<h3 data-id="heading-2">01 æ ¸å¿ƒèƒ½åŠ›æ¨¡å—ï¼šæ›´å…¨é¢ã€æ›´è´´è¿‘å¼€å‘æµç¨‹çš„ç›‘æ§ä½“ç³»</h3>
<p>è§‚æµ‹äº‘ HarmonyOS SDK å›´ç»•â€œçœŸå®ä½“éªŒâ€æ„å»ºæ•°æ®é‡‡é›†ä½“ç³»ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–ã€è½»é‡åŒ–çš„æ–¹å¼æ•è·åº”ç”¨è¿è¡Œä¸­çš„å…³é”®æŒ‡æ ‡ã€‚å…¨åŠŸèƒ½é€‚ç”¨äºå…¸å‹çš„å¼€å‘ã€è°ƒè¯•ã€å‘å¸ƒä¸æŒç»­ä¼˜åŒ–æµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01d12fe86a98427a8a05664deaeb724e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764733438&amp;x-signature=Fo%2FJMzGDbtv7l2ZWvFNqoOzjAeA%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-3">02 å…¨é“¾è·¯æ´å¯Ÿï¼šä»æ€§èƒ½åˆ°ä½“éªŒçš„åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-4">ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h4>
<p>ç”¨æˆ·è®¿é—®ç›‘æµ‹æ˜¯è§‚æµ‹äº‘ HarmonyOS SDK çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›äº†å…¨æ–¹ä½çš„ç”¨æˆ·è¡Œä¸ºå’Œåº”ç”¨æ€§èƒ½ç›‘æ§ã€‚é€šè¿‡å¯¹é¡µé¢è®¿é—®è·¯å¾„ã€åœç•™æ—¶é•¿ã€å¸¸ç”¨åŠŸèƒ½ä¸å…³é”®æ“ä½œçš„è¿½è¸ªï¼Œå›¢é˜Ÿèƒ½å¤Ÿæ›´ç›´è§‚åœ°ç†è§£ç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯ï¼Œä¸ºä¿¡æ¯æ¶æ„ä¸äº¤äº’æµç¨‹ä¼˜åŒ–æä¾›åšå®çš„é‡åŒ–ä¾æ®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eda84991322644c4b74896a85df4f17f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764733438&amp;x-signature=dFwvnHlIY8Sxq1NbOmpGa2xuAvw%3D" alt="3.png" loading="lazy"/></p>
<h4 data-id="heading-5">é—®é¢˜å®šä½ä¸æ’æŸ¥</h4>
<p>å´©æºƒã€ANRã€é”™è¯¯å †æ ˆã€è®¾å¤‡çŠ¶æ€å’Œæ—¥å¿—ä¿¡æ¯éƒ½ä¼šè¢«å®Œæ•´è®°å½•ï¼Œè®©é—®é¢˜ä»â€œæŸ¥ä¸åˆ°â€â€œéš¾å¤ç°â€å˜ä¸ºâ€œç»“æ„åŒ–ã€å¯è¿½æº¯â€ï¼Œå¤§å¹…æå‡ç ”å‘æ’é”™æ•ˆç‡ã€‚</p>
<h4 data-id="heading-6">åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</h4>
<p>é¢å¯¹å¤šæœåŠ¡äº¤äº’æˆ–åˆ†å¸ƒå¼æ¶æ„ï¼ŒSDK é€šè¿‡å¤šåè®®é“¾è·¯è¿½è¸ªæä¾›ç«¯åˆ°ç«¯é€æ˜åº¦ï¼Œå¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè¯†åˆ«è€—æ—¶é•¿ã€è°ƒç”¨å¤æ‚æˆ–ä¾èµ–å¼‚å¸¸çš„é“¾è·¯èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-7">æ··åˆåº”ç”¨ä¸ç”¨æˆ·åˆ†æ</h4>
<p>åŸç”Ÿ+WebView æ•°æ®ç»Ÿä¸€ç®¡ç†ï¼ˆWebView é›†æˆï¼‰ï¼Œè‡ªåŠ¨æ¡¥æ¥Sessionï¼Œæ”¯æŒJavaScript Bridgeï¼Œä¿è¯æ··åˆåº”ç”¨çš„å®Œæ•´ç›‘æ§ã€‚ç»“åˆç”¨æˆ·æ•°æ®ç»‘å®šï¼Œåˆ†æä¸šåŠ¡æ•°æ®çš„ç”¨æˆ·ç»´åº¦ï¼Œå®ç°ç²¾ç»†åŒ–åˆ†æä¸ä¸ªæ€§åŒ–ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-8">æ•°æ®åˆ†æä¸æŠ¥è¡¨èƒ½åŠ›</h4>
<p>æ‰€æœ‰æ•°æ®æœ€ç»ˆæ²‰æ·€ä¸ºå¯è§†åŒ–è¶‹åŠ¿ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ´»è·ƒåº¦ã€åŠŸèƒ½ä½¿ç”¨æ¯”ä¾‹ã€æ€§èƒ½æ³¢åŠ¨ä¸é”™è¯¯è¶‹åŠ¿ï¼Œå¸®åŠ©å›¢é˜Ÿåœ¨è¿­ä»£å‰åšå†³ç­–ã€åœ¨è¿­ä»£ååšéªŒè¯ï¼Œå®ç°é—­ç¯ç®¡ç†ã€‚</p>
<h2 data-id="heading-9">æŒç»­æ‰©å±•çš„ç”Ÿæ€æ”¯æŒï¼šä¸æ­¢ HarmonyOS</h2>
<p>åœ¨æ¨å‡º HarmonyOS SDK çš„åŒæ—¶ï¼Œè§‚æµ‹äº‘å·²ç»æ„å»ºäº†æ›´å¹¿èŒƒå›´çš„è·¨å¹³å°å¯è§‚æµ‹èƒ½åŠ›ï¼Œæ”¯æŒä¼ä¸šæ„å»ºçœŸæ­£ç»Ÿä¸€çš„æ•°æ®ä½“ç³»ã€‚</p>
<p>ç›®å‰ï¼Œè§‚æµ‹äº‘å·²æ”¯æŒï¼š</p>
<ul>
<li>HarmonyOS åº”ç”¨</li>
<li>iOS / Android ç§»åŠ¨åº”ç”¨</li>
<li>Web å…¨ç«¯æ•°æ®é‡‡é›†</li>
<li>å¾®ä¿¡ã€æ”¯ä»˜å®ç­‰å„ç±»å°ç¨‹åº</li>
<li>Javaã€Goã€Pythonã€Node.js ç­‰æœåŠ¡ç«¯ç¨‹åº</li>
<li>Kubernetesã€Docker ç­‰äº‘åŸç”Ÿç¯å¢ƒ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d6f40ea338f4188b4da2c2677b86e16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764733438&amp;x-signature=OqIKa2KI1gkl%2FpOzzSxrqd5wue4%3D" alt="4.png" loading="lazy"/></p>
<p>ä¾æ‰˜ç»Ÿä¸€çš„æ•°æ®é‡‡é›†ã€å­˜å‚¨å’Œåˆ†ææ¨¡å‹ï¼Œä¼ä¸šå¯ä»¥åœ¨ä¸€ä¸ªå¹³å°ä¸­è§‚å¯Ÿæ‰€æœ‰ç«¯çš„è¡¨ç°ï¼Œå®ç°ä»åŸºç¡€è®¾æ–½åˆ°åº”ç”¨ä½“éªŒçš„ å…¨æ ˆå¯è§‚æµ‹èƒ½åŠ›ï¼Œå¿«é€Ÿå®šä½å’Œè§£å†³ç”Ÿäº§ç¯å¢ƒä¸­çš„é—®é¢˜ã€‚</p>
<p>ğŸ‘‰å®Œæ•´é›†æˆæŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Freal-user-monitoring%2Fharmonyos%2Fapp-access%2F" target="_blank" title="https://docs.guance.com/real-user-monitoring/harmonyos/app-access/" ref="nofollow noopener noreferrer">docs.guance.com/real-user-mâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTTPæŠ“åŒ…å·¥å…·Fiddlerä½¿ç”¨æ•™ç¨‹ï¼Œä»£ç†è®¾ç½®ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576585511878492186</link>    <guid>https://juejin.cn/post/7576585511878492186</guid>    <pubDate>2025-11-26T03:45:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576585511878492186" data-draft-id="7576605171771506738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTTPæŠ“åŒ…å·¥å…·Fiddlerä½¿ç”¨æ•™ç¨‹ï¼Œä»£ç†è®¾ç½®ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T03:45:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTTPæŠ“åŒ…å·¥å…·Fiddlerä½¿ç”¨æ•™ç¨‹ï¼Œä»£ç†è®¾ç½®ã€HTTPSé…ç½®ä¸æ¥å£è°ƒè¯•å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:45:51.000Z" title="Wed Nov 26 2025 03:45:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œå‰åç«¯åˆ†ç¦»ã€APIé€šä¿¡å·²æˆä¸ºä¸»æµæ¶æ„æ¨¡å¼ã€‚
ä½†å½“æ¥å£å¼‚å¸¸ã€å“åº”å»¶è¿Ÿæˆ–æ•°æ®é”™ä¹±æ—¶ï¼Œå¼€å‘è€…å¾€å¾€éœ€è¦ç¬¬ä¸€æ—¶é—´â€œçœ‹æ¸…æ¥šè¯·æ±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆâ€ã€‚
è¿™æ—¶ï¼Œä¸€æ¬¾åŠŸèƒ½å…¨é¢çš„ <strong>HTTPæŠ“åŒ…å·¥å…·</strong> å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p>ä¼—å¤šå·¥å…·ä¸­ï¼Œ<strong>FiddleræŠ“åŒ…å·¥å…·</strong> ä»¥å…è´¹ã€å¼ºå¤§ã€çµæ´»è‘—ç§°ã€‚
æ— è®ºæ˜¯Webè°ƒè¯•ã€Appæ¥å£åˆ†æè¿˜æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼Œå®ƒå‡ ä¹æ˜¯æ¯ä½å¼€å‘è€…çš„å¿…ä¿®æŠ€èƒ½ã€‚</p>
<p>æœ¬æ–‡å°†ä»å®æˆ˜è§’åº¦ï¼Œç³»ç»Ÿä»‹ç» <strong>Fiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ã€HTTPSæŠ“åŒ…é…ç½®ä¸æ¥å£è°ƒè¯•æŠ€å·§</strong>ï¼Œå¸®åŠ©ä½ é«˜æ•ˆæŒæ¡è¿™æ¬¾å¼ºå¤§çš„è°ƒè¯•å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾ HTTP/HTTPS æŠ“åŒ…ä¸ç½‘ç»œè°ƒè¯•å·¥å…·ã€‚
å®ƒçš„å·¥ä½œåŸç†æ˜¯å……å½“æœ¬åœ°ä»£ç†æœåŠ¡å™¨ï¼Œæ•è·è®¡ç®—æœºæˆ–ç§»åŠ¨è®¾å¤‡å‘å‡ºçš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œ
ä»è€Œè®©å¼€å‘è€…åˆ†æã€ä¿®æ”¹ã€é‡æ”¾è¯·æ±‚æˆ–å“åº”å†…å®¹ã€‚</p>
<p>ç›¸æ¯” Charlesã€Postman æˆ– Wireshark ç­‰å·¥å…·ï¼ŒFiddler æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šæ”¯æŒ HTTP/HTTPS æŠ“åŒ…ã€Mockæ¥å£ã€æ€§èƒ½åˆ†æã€é‡æ”¾è¯·æ±‚ï¼›</li>
<li><strong>ä½¿ç”¨ç®€å•</strong>ï¼šå›¾å½¢ç•Œé¢ç›´è§‚ï¼Œæ— éœ€å¤æ‚é…ç½®ï¼›</li>
<li><strong>æ€§èƒ½ç¨³å®š</strong>ï¼šé€‚åˆé«˜å¹¶å‘åœºæ™¯ä¸‹çš„è¯·æ±‚è°ƒè¯•ï¼›</li>
<li><strong>å…è´¹å¯æ‰©å±•</strong>ï¼šæ”¯æŒè„šæœ¬ä¸æ’ä»¶è‡ªå®šä¹‰åŠŸèƒ½ã€‚</li>
</ul>
<p>æ— è®ºä½ æ˜¯å‰ç«¯ã€åç«¯ã€æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯ç½‘ç»œåˆ†æäººå‘˜ï¼ŒFiddler éƒ½æ˜¯ç½‘ç»œè°ƒè¯•çš„åˆ©å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸ä»£ç†é…ç½®</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>åœ¨ Windows ç³»ç»Ÿä¸­å®‰è£…å®Œæˆåï¼ŒFiddler é»˜è®¤æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
å¯åŠ¨è½¯ä»¶åï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œä½ ä¼šçœ‹åˆ°è¯·æ±‚å®æ—¶å‡ºç°åœ¨å·¦ä¾§é¢æ¿ä¸­ã€‚</p>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>çŠ¶æ€æ æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥ä¸º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤æŠ“åŒ…çŠ¶æ€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. ç”µè„‘ä¸ç§»åŠ¨ç«¯ä»£ç†è®¾ç½®</strong></h3>
<p>Fiddler é»˜è®¤åªèƒ½æŠ“å–æœ¬æœºæµé‡ã€‚
è‹¥è¦è°ƒè¯•æ‰‹æœºã€å°ç¨‹åºæˆ–Appæ¥å£ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•æ  <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•ç”µè„‘ IP åœ°å€ä¸ç«¯å£å·ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘å¤„äºåŒä¸€ Wi-Fiï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£å·ï¼š8888</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼ŒFiddler å³å¯æŠ“å–æ¥è‡ªæ‰‹æœºç«¯çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>éšç€ HTTPS æˆä¸ºé»˜è®¤é€šä¿¡åè®®ï¼Œè§£å¯†åŠ å¯†æµé‡æˆä¸ºå¿…è¦ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»» Fiddler æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥è¦æŠ“å–ç§»åŠ¨ç«¯æµé‡ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶å®‰è£…åœ¨æ‰‹æœºä¸Šã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼ŒFiddler å¯æ˜¾ç¤º HTTPS è¯·æ±‚çš„å®Œæ•´å†…å®¹ï¼ˆåŒ…æ‹¬ Headerã€Body å’Œå“åº”ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸æŠ€å·§</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>åœ¨ä¸»ç•Œé¢ä¸­ï¼Œæ¯ä¸€æ¡è¯·æ±‚éƒ½å¯å±•å¼€æŸ¥çœ‹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGET/POST/PUT/DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚ URL ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ä¸ Cookieï¼›</li>
<li>å“åº”çŠ¶æ€ç ä¸å†…å®¹ï¼›</li>
<li>è¯·æ±‚æ—¶é—´ä¸æ€§èƒ½æŒ‡æ ‡ã€‚</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong>
æŸé¡¹ç›®æ¥å£è¿”å› 200 ä½†æ— æ•°æ®ï¼Œé€šè¿‡ Fiddler æŠ“åŒ…å‘ç°åç«¯è¿”å›çš„å­—æ®µåé”™è¯¯ï¼ˆ<code>data</code> æ‹¼å†™ä¸º <code>dat</code>ï¼‰ï¼Œ
è¿…é€Ÿå®šä½é—®é¢˜ï¼ŒèŠ‚çœå¤§é‡æ’æŸ¥æ—¶é—´ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. è¯·æ±‚æ‹¦æˆªä¸æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒè®¾ç½®è¯·æ±‚æˆ–å“åº”æ–­ç‚¹ï¼Œå¼€å‘è€…å¯åœ¨è¯·æ±‚å‘å‡ºå‰æˆ–è¿”å›å‰ä¿®æ”¹å†…å®¹ã€‚</p>
<p><strong>å…¸å‹ç”¨é€”ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹ŸæœåŠ¡å™¨é”™è¯¯ï¼ˆ404ã€500ï¼‰ï¼›</li>
<li>è°ƒæ•´å‚æ•°æµ‹è¯•å®¹é”™ï¼›</li>
<li>å»¶è¿Ÿå“åº”æ¨¡æ‹Ÿå¼±ç½‘åœºæ™¯ã€‚</li>
</ul>
<p><strong>å‘½ä»¤æŠ€å·§ï¼š</strong>
è¾“å…¥ <code>bpu /api/login</code> å³å¯å¯¹ç™»å½•æ¥å£å¯ç”¨æ–­ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æ¨¡æ‹Ÿæ¥å£ï¼ˆAutoResponderï¼‰</strong></h3>
<p>AutoResponder æ¨¡å—å¯ç”¨æ¥ Mock æ•°æ®ï¼Œå‰ç«¯å¼€å‘å¸¸ç”¨ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ åŒ¹é…è§„åˆ™ï¼›</li>
<li>é€‰æ‹©æœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰å“åº”ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼Œè¯·æ±‚å°†è‡ªåŠ¨è¿”å›æ¨¡æ‹Ÿæ•°æ®ã€‚</li>
</ol>
<p><strong>åœºæ™¯ç¤ºä¾‹ï¼š</strong>
å‰ç«¯å¯æ¨¡æ‹Ÿ <code>{ "code":200, "msg":"success" }</code> å“åº”ï¼Œæ— éœ€ä¾èµ–åç«¯æ¥å£ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—ç±»ä¼¼ Postmanï¼Œæ”¯æŒå¿«é€Ÿæ„é€ è¯·æ±‚ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éªŒè¯æ¥å£ç­¾åä¸å‚æ•°æ ¼å¼ï¼›</li>
<li>å¤ç°çº¿ä¸Šé”™è¯¯è¯·æ±‚ï¼›</li>
<li>æµ‹è¯•ä¸åŒHeaderæˆ–Bodyç»„åˆã€‚</li>
</ul>
<p><strong>æŠ€å·§ï¼š</strong>
å³é”®ç‚¹å‡»å†å²è¯·æ±‚ â†’ â€œReplay â†’ Reissue Requestâ€ï¼Œå³å¯å¿«é€Ÿé‡æ”¾è¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—å±•ç¤ºæ¯ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼š
DNS â†’ TCP â†’ TLS â†’ Server Response â†’ Content Downloadã€‚</p>
<p>è¿™æœ‰åŠ©äºåˆ¤æ–­æ€§èƒ½ç“¶é¢ˆåœ¨ç½‘ç»œå±‚ã€æœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šä¸€æ¬¡ç§»åŠ¨ç«¯æ¥å£å»¶è¿Ÿé—®é¢˜åˆ†æ</strong></h2>
<p>æŸç§»åŠ¨ç«¯åº”ç”¨åœ¨ Wi-Fi ä¸‹åŠ è½½æ­£å¸¸ï¼Œä½†åœ¨ 4G ç¯å¢ƒä¸‹æ˜æ˜¾å¡é¡¿ã€‚
é€šè¿‡ Fiddler æŠ“åŒ…åˆ†æï¼š</p>
<ul>
<li>å‘ç°å›¾ç‰‡èµ„æºä½“ç§¯è¿‡å¤§ï¼Œå ç”¨ä¸»çº¿ç¨‹ï¼›</li>
<li>éƒ¨åˆ†æ¥å£å¯ç”¨äº†è¿‡å¤šé‡å®šå‘ï¼›</li>
<li>æœåŠ¡å™¨å“åº”å»¶è¿Ÿé«˜äºé¢„æœŸã€‚</li>
</ul>
<p>ä¼˜åŒ–æªæ–½ï¼š</p>
<ul>
<li>å¯ç”¨ CDN åˆ†å‘é™æ€èµ„æºï¼›</li>
<li>è°ƒæ•´æ¥å£ç»“æ„å‡å°‘é‡å®šå‘ï¼›</li>
<li>å¼€å¯ Gzip å‹ç¼©ã€‚</li>
</ul>
<p>ç»“æœå¹³å‡è¯·æ±‚è€—æ—¶å‡å°‘ 60%ï¼Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ã€‚</p>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong></p>
<blockquote>
<p>Fiddler ä¸ä»…èƒ½çœ‹è¯·æ±‚ï¼Œè¿˜èƒ½å¸®ä½ ä¼˜åŒ–æ€§èƒ½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—å¯¹ç…§è¡¨</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦è°ƒè¯•ç‰¹å®šæ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯ç‹¬ç«‹å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªä¸ä¿®æ”¹è¯·æ±‚</td><td>æ¨¡æ‹Ÿå¼‚å¸¸æˆ–æµ‹è¯•å®¹é”™</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£éªŒè¯ä¸é‡ç°Bug</td></tr><tr><td><strong>Timeline</strong></td><td>è¯·æ±‚æ€§èƒ½åˆ†æ</td><td>ç½‘ç»œä¼˜åŒ–ä¸è¯Šæ–­</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–æŠ“åŒ…å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€åŠŸèƒ½å¼ºã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•äººå‘˜</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç®€æ´ã€æ“ä½œç›´è§‚</td><td>åˆå­¦è€…</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ æ–¹ä¾¿</td><td>æ¥å£æµ‹è¯•</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚åè®®åˆ†æ</td><td>ç½‘ç»œå®‰å…¨ç ”ç©¶</td></tr></tbody></table>
<p>Fiddler ç»¼åˆèƒ½åŠ›æœ€å¼ºï¼Œå°¤å…¶åœ¨åº”ç”¨å±‚è°ƒè¯•ä¸HTTP/HTTPSåˆ†æä¸­è¡¨ç°å‡ºè‰²ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ·±å…¥æŒæ¡ Fiddlerï¼Ÿæ¨èè®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**çš„å­¦ä¹ èµ„æ–™,ç»“åˆæœ¬æ–‡è®²è§£çš„ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†é…ç½®</strong> ä¸ <strong>HTTPS è°ƒè¯•æŠ€å·§</strong></p>
<p>ä½ å°†åœ¨è¯¥ç½‘ç«™ä¸­å­¦åˆ°ï¼š</p>
<ul>
<li>å®‰è£…ä¸é…ç½®æŒ‡å—ï¼›</li>
<li>wHTTPS æŠ“åŒ…ä¸è¯ä¹¦è®¾ç½®ï¼›</li>
<li>ç§»åŠ¨ç«¯æŠ“åŒ…ä¸ä»£ç†æŠ€å·§ï¼›</li>
<li>å¸¸è§é”™è¯¯ä¸å®æˆ˜æ¡ˆä¾‹ï¼›</li>
<li>Mockã€æ–­ç‚¹ä¸æ€§èƒ½ä¼˜åŒ–å®æ“æ•™ç¨‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•]]></title>    <link>https://juejin.cn/post/7576559408659611700</link>    <guid>https://juejin.cn/post/7576559408659611700</guid>    <pubDate>2025-11-26T03:55:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576559408659611700" data-draft-id="7569377216913997862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T03:55:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:55:09.000Z" title="Wed Nov 26 2025 03:55:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åï¼åœ¨ç°ä»£çš„Webå¼€å‘ä¸­ï¼Œå®æ—¶é€šä¿¡éœ€æ±‚è¶Šæ¥è¶Šæ™®éã€‚æ¯”å¦‚åœ¨çº¿èŠå¤©ã€å®æ—¶æ•°æ®ç›‘æ§ã€æ¶ˆæ¯æ¨é€ç­‰åœºæ™¯ã€‚</p>
<p>é¢å¯¹è¿™äº›éœ€æ±‚ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰ä¸¤ç§é€‰æ‹©ï¼š<code>SSE</code>å’Œ<code>WebSocket</code>ã€‚å®ƒä»¬éƒ½èƒ½å®ç°å®æ—¶é€šä¿¡ï¼Œä½†è®¾è®¡ç†å¿µå’Œé€‚ç”¨åœºæ™¯å´æœ‰å¾ˆå¤§ä¸åŒã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ SSEï¼Ÿ</h2>
<p>SSEï¼ˆServer-Sent Eventsï¼‰æ˜¯ä¸€ç§åŸºäº HTTP çš„æœåŠ¡å™¨æ¨é€æŠ€æœ¯ã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š<strong>å•å‘é€šä¿¡</strong>ï¼Œåªèƒ½ç”±æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚</p>
<h3 data-id="heading-1">SSE çš„æ ¸å¿ƒç‰¹ç‚¹</h3>
<ul>
<li><strong>åŸºäº HTTP åè®®</strong>ï¼šä½¿ç”¨æ ‡å‡†çš„ HTTP/1.1 åè®®</li>
<li><strong>å•å‘é€šä¿¡</strong>ï¼šæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯</li>
<li><strong>è‡ªåŠ¨é‡è¿</strong>ï¼šæµè§ˆå™¨å†…ç½®é‡è¿æœºåˆ¶</li>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šAPI è®¾è®¡ç®€æ´ç›´è§‚</li>
<li><strong>æ–‡æœ¬ä¼ è¾“</strong>ï¼šä¸»è¦æ”¯æŒ UTF-8 æ–‡æœ¬æ•°æ®</li>
</ul>
<h3 data-id="heading-2">SSE ä½¿ç”¨ç¤ºä¾‹</h3>
<p><strong>å®¢æˆ·ç«¯JSä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»º SSE è¿æ¥</span>
<span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/real-time-data'</span>);

<span class="hljs-comment">// ç›‘å¬æœåŠ¡å™¨æ¨é€çš„æ¶ˆæ¯</span>
eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å®æ—¶æ•°æ®:'</span>, data);
  <span class="hljs-title function_">updateUI</span>(data); <span class="hljs-comment">// æ›´æ–°ç•Œé¢</span>
};

<span class="hljs-comment">// ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ç±»å‹</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'systemAlert'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> alertData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
  <span class="hljs-title function_">showAlert</span>(alertData.<span class="hljs-property">message</span>);
});

<span class="hljs-comment">// é”™è¯¯å¤„ç† - è‡ªåŠ¨é‡è¿æ˜¯å†…ç½®çš„</span>
eventSource.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥å¼‚å¸¸ï¼Œæ­£åœ¨è‡ªåŠ¨é‡è¿...'</span>);
};
</code></pre>
<p><strong>æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆNode.js + Expressï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/real-time-data'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è®¾ç½® SSE å¿…éœ€çš„å“åº”å¤´</span>
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span>,
    <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
    <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
    <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>
  });
  
  <span class="hljs-comment">// å‘é€åˆå§‹è¿æ¥ç¡®è®¤</span>
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data: {"status": "connected"}\n\n'</span>);
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ¨é€</span>
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> data = {
      <span class="hljs-attr">id</span>: count++,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>
    };
    
    <span class="hljs-comment">// SSE æ ‡å‡†æ ¼å¼ï¼šdata: å¼€å¤´ï¼Œä¸¤ä¸ªæ¢è¡Œç¬¦ç»“å°¾</span>
    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>\n\n`</span>);
    
    <span class="hljs-comment">// æ¯10ç§’å‘é€ä¸€æ¬¡ç³»ç»ŸçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (count % <span class="hljs-number">10</span> === <span class="hljs-number">0</span>) {
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'event: systemAlert\n'</span>);
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: {"message": "ç³»ç»Ÿè¿è¡Œæ­£å¸¸"}\n\n`</span>);
    }
  }, <span class="hljs-number">1000</span>);
  
  <span class="hljs-comment">// å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶æ¸…ç†èµ„æº</span>
  req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(interval);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯æ–­å¼€è¿æ¥'</span>);
  });
});
</code></pre>
<h2 data-id="heading-3">ä»€ä¹ˆæ˜¯ WebSocketï¼Ÿ</h2>
<p>WebSocket æ˜¯ä¸€ç§çœŸæ­£çš„å…¨åŒå·¥é€šä¿¡åè®®ï¼Œå…è®¸æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹æŒä¹…è¿æ¥ï¼Œè¿›è¡ŒåŒå‘å®æ—¶é€šä¿¡ã€‚</p>
<h3 data-id="heading-4">WebSocket çš„æ ¸å¿ƒç‰¹ç‚¹</h3>
<ul>
<li><strong>ç‹¬ç«‹åè®®</strong>ï¼šåŸºäº TCP çš„ç‹¬ç«‹åè®®ï¼ˆws:// æˆ– wss://ï¼‰</li>
<li><strong>åŒå‘é€šä¿¡</strong>ï¼šæœåŠ¡å™¨ â†” å®¢æˆ·ç«¯</li>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šå»ºç«‹è¿æ¥åå¼€é”€æå°</li>
<li><strong>æ•°æ®å¤šæ ·</strong>ï¼šæ”¯æŒæ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ•°æ®</li>
<li><strong>æ‰‹åŠ¨ç®¡ç†</strong>ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†è¿æ¥çŠ¶æ€</li>
</ul>
<h3 data-id="heading-5">WebSocket ä½¿ç”¨ç¤ºä¾‹</h3>
<p><strong>å®¢æˆ·ç«¯JSä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'wss://api.example.com/chat'</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket è¿æ¥å·²å»ºç«‹'</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'join'</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">'å°æ˜'</span> });
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleMessage</span>(data);
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥å·²æ–­å¼€'</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>();
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket é”™è¯¯:'</span>, error);
    };
  }
  
  <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">content</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'message'</span>,
        <span class="hljs-attr">content</span>: content,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      });
    }
  }
  
  <span class="hljs-title function_">send</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
  }
  
  <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">switch</span> (data.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'chat'</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayMessage</span>(data);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'userJoin'</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showUserJoin</span>(data.<span class="hljs-property">username</span>);
        <span class="hljs-keyword">break</span>;
    }
  }
  
  <span class="hljs-title function_">attemptReconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å°è¯•é‡æ–°è¿æ¥...'</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }, <span class="hljs-number">3000</span>);
  }
}
</code></pre>
<p><strong>æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆNode.js + ws åº“ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocket</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);
<span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-title class_">Server</span>({ 
  <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>,
  <span class="hljs-attr">perMessageDeflate</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// å­˜å‚¨è¿æ¥çš„ç”¨æˆ·</span>
<span class="hljs-keyword">const</span> connectedUsers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-function">(<span class="hljs-params">ws, request</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°çš„å®¢æˆ·ç«¯è¿æ¥'</span>);
  
  <span class="hljs-keyword">let</span> currentUser = <span class="hljs-literal">null</span>;
  
  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">rawData</span>) =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(rawData);
      
      <span class="hljs-keyword">switch</span> (data.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'join'</span>:
          currentUser = data.<span class="hljs-property">username</span>;
          connectedUsers.<span class="hljs-title function_">set</span>(ws, currentUser);
          
          <span class="hljs-comment">// å¹¿æ’­ç”¨æˆ·åŠ å…¥æ¶ˆæ¯</span>
          <span class="hljs-title function_">broadcast</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'userJoin'</span>,
            <span class="hljs-attr">username</span>: currentUser,
            <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
          }, ws);
          
          <span class="hljs-comment">// å‘é€æ¬¢è¿æ¶ˆæ¯</span>
          ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'system'</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">`æ¬¢è¿ <span class="hljs-subst">${currentUser}</span> åŠ å…¥èŠå¤©å®¤ï¼`</span>
          }));
          <span class="hljs-keyword">break</span>;
          
        <span class="hljs-keyword">case</span> <span class="hljs-string">'message'</span>:
          <span class="hljs-comment">// å¹¿æ’­èŠå¤©æ¶ˆæ¯</span>
          <span class="hljs-title function_">broadcast</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'chat'</span>,
            <span class="hljs-attr">username</span>: currentUser,
            <span class="hljs-attr">message</span>: data.<span class="hljs-property">content</span>,
            <span class="hljs-attr">timestamp</span>: data.<span class="hljs-property">timestamp</span>
          });
          <span class="hljs-keyword">break</span>;
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ¶ˆæ¯è§£æé”™è¯¯:'</span>, error);
      ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'æ¶ˆæ¯æ ¼å¼é”™è¯¯'</span>
      }));
    }
  });
  
  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentUser) {
      connectedUsers.<span class="hljs-title function_">delete</span>(ws);
      <span class="hljs-comment">// å¹¿æ’­ç”¨æˆ·ç¦»å¼€</span>
      <span class="hljs-title function_">broadcast</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'userLeave'</span>,
        <span class="hljs-attr">username</span>: currentUser,
        <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      });
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯æ–­å¼€è¿æ¥'</span>);
  });
  
  <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹</span>
  <span class="hljs-keyword">const</span> heartbeat = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (ws.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
      ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span> }));
    }
  }, <span class="hljs-number">30000</span>);
  
  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(heartbeat);
  });
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">broadcast</span>(<span class="hljs-params">data, excludeWs = <span class="hljs-literal">null</span></span>) {
  wss.<span class="hljs-property">clients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (client !== excludeWs &amp;&amp; client.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
      client.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    }
  });
}
</code></pre>
<h2 data-id="heading-6">åŒºåˆ«å¯¹æ¯”</h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>SSE</th><th>WebSocket</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td>å•å‘ï¼ˆæœåŠ¡å™¨æ¨å®¢æˆ·ç«¯ï¼‰</td><td>åŒå‘ï¼ˆå…¨åŒå·¥é€šä¿¡ï¼‰</td></tr><tr><td><strong>åè®®åŸºç¡€</strong></td><td>HTTP/1.1</td><td>ç‹¬ç«‹çš„ WebSocket åè®®</td></tr><tr><td><strong>è¿æ¥å»ºç«‹</strong></td><td>æ™®é€š HTTP è¯·æ±‚</td><td>HTTP å‡çº§æ¡æ‰‹</td></tr><tr><td><strong>æ•°æ®æ ¼å¼</strong></td><td>æ–‡æœ¬ï¼ˆäº‹ä»¶æµæ ¼å¼ï¼‰</td><td>æ–‡æœ¬å’ŒäºŒè¿›åˆ¶å¸§</td></tr><tr><td><strong>é‡è¿æœºåˆ¶</strong></td><td>æµè§ˆå™¨è‡ªåŠ¨å¤„ç†</td><td>éœ€è¦æ‰‹åŠ¨å®ç°</td></tr><tr><td><strong>å¤´éƒ¨å¼€é”€</strong></td><td>æ¯æ¬¡æ¶ˆæ¯å¸¦ HTTP å¤´</td><td>å»ºç«‹åæå°å¸§å¤´</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>è‰¯å¥½ï¼ˆé™¤ IEï¼‰</td><td>ä¼˜ç§€ï¼ˆIE10+ï¼‰</td></tr><tr><td><strong>å¼€å‘å¤æ‚åº¦</strong></td><td>ç®€å•ç›´è§‚</td><td>ç›¸å¯¹å¤æ‚</td></tr></tbody></table>
<h2 data-id="heading-7">é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-8">æ¨èä½¿ç”¨ SSE çš„åœºæ™¯</h3>
<p><strong>1. å®æ—¶æ•°æ®ç›‘æ§é¢æ¿</strong>
<strong>2. å®æ—¶æ¶ˆæ¯é€šçŸ¥</strong>
<strong>3. å®æ—¶æ•°æ®æµå±•ç¤º</strong></p>
<p>æ¯”å¦‚ï¼šè‚¡ç¥¨ä»·æ ¼å®æ—¶æ›´æ–°ã€ä½“è‚²æ¯”èµ›æ¯”åˆ†ç›´æ’­ã€ç‰©æµè®¢å•çŠ¶æ€è·Ÿè¸ªå’ŒæœåŠ¡å™¨æ—¥å¿—å®æ—¶æ˜¾ç¤ºç­‰ã€‚</p>
<h3 data-id="heading-9">æ¨èä½¿ç”¨ WebSocket çš„åœºæ™¯</h3>
<p><strong>1. å®æ—¶äº¤äº’åº”ç”¨</strong>
<strong>2. å®æ—¶æ¸¸æˆåº”ç”¨</strong>
<strong>3. å®æ—¶éŸ³è§†é¢‘é€šä¿¡</strong></p>
<p>æ¯”å¦‚ï¼šè§†é¢‘ä¼šè®®ç³»ç»Ÿã€åœ¨çº¿å®¢æœèŠå¤©å’Œå®æ—¶åä½œç¼–è¾‘æ–‡æ¡£ç­‰</p>
<h2 data-id="heading-10">å¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>
<h3 data-id="heading-11">é€‰æ‹© SSEï¼š</h3>
<ul>
<li>åªéœ€è¦æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®</li>
<li>å¸Œæœ›å¿«é€Ÿå®ç°ã€ç®€å•ç»´æŠ¤</li>
<li>é¡¹ç›®å¯¹ç§»åŠ¨ç«¯å…¼å®¹æ€§è¦æ±‚é«˜</li>
<li>æ•°æ®æ›´æ–°é¢‘ç‡é€‚ä¸­ï¼ˆç§’çº§ï¼‰</li>
<li>ä¸éœ€è¦ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®</li>
</ul>
<h3 data-id="heading-12">é€‰æ‹© WebSocketï¼š</h3>
<ul>
<li>éœ€è¦çœŸæ­£çš„åŒå‘å®æ—¶é€šä¿¡</li>
<li>æ•°æ®ä¼ è¾“é¢‘ç‡å¾ˆé«˜ï¼ˆæ¯«ç§’çº§ï¼‰</li>
<li>éœ€è¦ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ï¼‰</li>
<li>æ„å»ºå®æ—¶äº¤äº’åº”ç”¨ï¼ˆæ¸¸æˆã€åä½œå·¥å…·ï¼‰</li>
<li>å¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿçš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-13">æ··åˆä½¿ç”¨ç­–ç•¥</h3>
<p>åœ¨ä¸€äº›å¤æ‚åº”ç”¨ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridApp</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨ SSE æ¥æ”¶é€šçŸ¥å’Œå¹¿æ’­æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">notificationSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/notifications'</span>);
    
    <span class="hljs-comment">// ä½¿ç”¨ WebSocket è¿›è¡Œå®æ—¶äº¤äº’</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interactionSocket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'wss://api.example.com/interact'</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupEventHandlers</span>();
  }
  
  <span class="hljs-title function_">setupEventHandlers</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// SSE å¤„ç†å¹¿æ’­ç±»æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">notificationSource</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleBroadcastMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>));
    };
    
    <span class="hljs-comment">// WebSocket å¤„ç†äº¤äº’ç±»æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interactionSocket</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleInteractionMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>));
    };
  }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p><strong>SSE çš„ä¼˜åŠ¿</strong>åœ¨äºç®€å•æ˜“ç”¨ã€è‡ªåŠ¨é‡è¿ã€ä¸ HTTP åŸºç¡€è®¾æ–½å®Œç¾é›†æˆï¼Œé€‚åˆæœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å•å‘æ•°æ®æ¨é€åœºæ™¯ã€‚</p>
<p><strong>WebSocket çš„ä¼˜åŠ¿</strong>åœ¨äºçœŸæ­£çš„åŒå‘é€šä¿¡ã€ä½å»¶è¿Ÿã€æ”¯æŒäºŒè¿›åˆ¶æ•°æ®ï¼Œé€‚åˆéœ€è¦é«˜é¢‘åŒå‘äº¤äº’çš„å¤æ‚åº”ç”¨ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ã€æ€§èƒ½è¦æ±‚æ¥åšå‡ºåˆç†çš„æŠ€æœ¯é€‰å‹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-15">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F72THiVPtsrA2xvtHmdDLmA" target="_blank" title="https://mp.weixin.qq.com/s/72THiVPtsrA2xvtHmdDLmA" ref="nofollow noopener noreferrer">ã€ŠSpringBoot+Vue3 æ•´åˆ SSE å®ç°å®æ—¶æ¶ˆæ¯æ¨é€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP7SMincYFKERZbNKAFtzGQ" target="_blank" title="https://mp.weixin.qq.com/s/P7SMincYFKERZbNKAFtzGQ" ref="nofollow noopener noreferrer">ã€Šè¿™20æ¡SQLä¼˜åŒ–æ–¹æ¡ˆï¼Œè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10å€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FgQK9L1TxKL50FUVMcgh6JQ" target="_blank" title="https://mp.weixin.qq.com/s/gQK9L1TxKL50FUVMcgh6JQ" ref="nofollow noopener noreferrer">ã€ŠSpringBoot åŠ¨æ€èœå•æƒé™ç³»ç»Ÿè®¾è®¡çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fn1DqvgnDTFzpv9hJaudQeA" target="_blank" title="https://mp.weixin.qq.com/s/n1DqvgnDTFzpv9hJaudQeA" ref="nofollow noopener noreferrer">ã€ŠVue3 + ElementPlus åŠ¨æ€èœå•å®ç°ï¼šä¸€å¥—ä»£ç å®Œç¾é€‚é…å¤šè§’è‰²æƒé™ç³»ç»Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native è¿›é˜¶å®æˆ˜ï¼šåŸºäº Server-Driven UI çš„åŠ¨æ€è¡¨å•æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7576484465759682595</link>    <guid>https://juejin.cn/post/7576484465759682595</guid>    <pubDate>2025-11-26T02:09:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576484465759682595" data-draft-id="7576536602110558218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native è¿›é˜¶å®æˆ˜ï¼šåŸºäº Server-Driven UI çš„åŠ¨æ€è¡¨å•æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,React Native"/> <meta itemprop="datePublished" content="2025-11-26T02:09:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native è¿›é˜¶å®æˆ˜ï¼šåŸºäº Server-Driven UI çš„åŠ¨æ€è¡¨å•æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:09:18.000Z" title="Wed Nov 26 2025 02:09:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€è¡¨å•ï¼Ÿ</h2>
<p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡éœ€æ±‚å˜æ›´é¢‘ç¹ï¼š</strong> æ¯”å¦‚ç”µå•†å¤§ä¿ƒçš„æ´»åŠ¨é¡µã€é—®å·è°ƒæŸ¥ã€æˆ–æ˜¯ SaaS äº§å“çš„è‡ªå®šä¹‰é…ç½®é¡¹ï¼Œè¿™äº›é¡µé¢ç»“æ„ç»å¸¸å˜åŠ¨ã€‚</li>
<li><strong>å‘ç‰ˆå‘¨æœŸé•¿ï¼š</strong> åŸç”Ÿ App çš„å‘ç‰ˆå—åˆ°åº”ç”¨å•†åº—å®¡æ ¸çš„é™åˆ¶ã€‚ä»…ä»…ä¸ºäº†ä¿®æ”¹ä¸€ä¸ªè¾“å…¥æ¡†çš„æ ¡éªŒè§„åˆ™æˆ–è€…å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œå°±éœ€è¦èµ°å®Œâ€œæ‰“åŒ…-å®¡æ ¸-ç”¨æˆ·æ›´æ–°â€çš„å…¨æµç¨‹ï¼Œæ•ˆç‡æä½ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é‡‡ç”¨ <strong>æœåŠ¡ç«¯é©±åŠ¨ UI (Server-Driven UI)</strong> çš„è®¾è®¡ç†å¿µã€‚App ç«¯ä¸å†ç¡¬ç¼–ç å…·ä½“çš„è¡¨å•ç»“æ„ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªâ€œæ¸²æŸ“å™¨â€ï¼Œæ ¹æ®æœåŠ¡ç«¯ä¸‹å‘çš„ JSON é…ç½®åŠ¨æ€ç”Ÿæˆç•Œé¢ã€‚</p>
<h2 data-id="heading-1">2. æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šä¹é«˜ç§¯æœ¨æ¨¡å¼</h2>
<p>å®ç°åŠ¨æ€è¡¨å•çš„æ ¸å¿ƒåœ¨äºå°†â€œæ•°æ®â€ä¸â€œç»“æ„â€åˆ†ç¦»ï¼š</p>
<ol>
<li><strong>ç»„ä»¶åº“ (The Bricks)ï¼š</strong> é¢„å…ˆåœ¨ App å†…å°è£…å¥½æ ‡å‡†åŒ–çš„åŸºç¡€ç»„ä»¶ï¼ˆå¦‚ï¼šå•è¡Œæ–‡æœ¬ã€å¼€å…³ã€æ—¥æœŸé€‰æ‹©å™¨ã€å›¾ç‰‡ä¸Šä¼ ç­‰ï¼‰ã€‚</li>
<li><strong>é…ç½®åè®® (The Blueprint)ï¼š</strong> æœåŠ¡ç«¯ä¸‹å‘çš„ JSON æ•°æ®ï¼Œå®šä¹‰äº†é¡µé¢åŒ…å«å“ªäº›ç»„ä»¶ã€ç»„ä»¶çš„å±æ€§ä»¥åŠæ ¡éªŒè§„åˆ™ã€‚</li>
<li><strong>æ¸²æŸ“å¼•æ“ (The Engine)ï¼š</strong> ä¸€ä¸ªé€šç”¨çš„ React ç»„ä»¶ï¼Œè´Ÿè´£è§£æ JSON åè®®ï¼Œæ˜ å°„å¹¶å®ä¾‹åŒ–å¯¹åº”çš„ç»„ä»¶ã€‚</li>
</ol>
<h2 data-id="heading-2">3. æŠ€æœ¯é€‰å‹</h2>
<ul>
<li>
<p><strong>UI æ¡†æ¶ï¼š</strong> React Native</p>
</li>
<li>
<p><strong>è¡¨å•çŠ¶æ€ç®¡ç†ï¼š</strong> <code>react-hook-form</code></p>
<ul>
<li><em>æ¨èç†ç”±ï¼š</em> åœ¨å¤„ç†åŠ¨æ€ Keyï¼ˆå­—æ®µåä¸å›ºå®šï¼‰çš„åœºæ™¯ä¸‹ï¼Œå®ƒçš„æ€§èƒ½æä½³ï¼Œä¸”èƒ½è½»æ¾å¤„ç†å¤æ‚çš„æ ¡éªŒé€»è¾‘ï¼Œé¿å…äº†æ‰‹åŠ¨ç®¡ç†å¤§é‡ State çš„ç¹çã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3">4. å®Œæ•´å®ç°æŒ‡å—</h2>
<h3 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šæ„å»ºåŸºç¡€ç»„ä»¶åº“ (UI Layer)</h3>
<p>è¿™äº›æ˜¯åº”ç”¨å†…çš„â€œåŸå­ç»„ä»¶â€ã€‚æˆ‘ä»¬éœ€è¦ç»Ÿä¸€å®ƒä»¬çš„æ¥å£è§„èŒƒï¼ˆä¾‹å¦‚éƒ½æ¥æ”¶ <code>value</code> å’Œ <code>onChange</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// components/FormFields.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">TextInput</span>, <span class="hljs-title class_">Switch</span>, <span class="hljs-title class_">StyleSheet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-comment">// 1. é€šç”¨æ–‡æœ¬è¾“å…¥æ¡†</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">GenericInput</span> = (<span class="hljs-params">{ label, value, onChange, placeholder }: <span class="hljs-built_in">any</span></span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.fieldContainer}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.label}</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> 
      <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.input}</span> 
      <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> 
      <span class="hljs-attr">onChangeText</span>=<span class="hljs-string">{onChange}</span> 
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{placeholder}</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
);

<span class="hljs-comment">// 2. é€šç”¨å¼€å…³ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">GenericSwitch</span> = (<span class="hljs-params">{ label, value, onChange }: <span class="hljs-built_in">any</span></span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.fieldContainerRow}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.label}</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onValueChange</span>=<span class="hljs-string">{onChange}</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
);

<span class="hljs-keyword">const</span> styles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">fieldContainer</span>: { <span class="hljs-attr">marginBottom</span>: <span class="hljs-number">16</span> },
  <span class="hljs-attr">fieldContainerRow</span>: { <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">'row'</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">'space-between'</span>, <span class="hljs-attr">marginBottom</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-string">'center'</span> },
  <span class="hljs-attr">label</span>: { <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">marginBottom</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#333'</span> },
  <span class="hljs-attr">input</span>: { <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#e0e0e0'</span>, <span class="hljs-attr">padding</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#f9f9f9'</span> },
});
</code></pre>
<h3 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šå¼€å‘åŠ¨æ€æ¸²æŸ“å¼•æ“ (Logic Layer)</h3>
<p>è¿™æ˜¯æ¶æ„çš„æ ¸å¿ƒã€‚å®ƒå»ºç«‹äº†ä¸€ä¸ª <strong>String -&gt; Component</strong> çš„æ˜ å°„è¡¨ï¼Œå¹¶ç»“åˆ <code>react-hook-form</code> è¿›è¡ŒçŠ¶æ€æ‰˜ç®¡ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// components/DynamicFormRenderer.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Text</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { useForm, <span class="hljs-title class_">Controller</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-hook-form'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">GenericInput</span>, <span class="hljs-title class_">GenericSwitch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./FormFields'</span>;

<span class="hljs-comment">// 1. ç»„ä»¶æ³¨å†Œè¡¨ï¼šå°†åè®®ä¸­çš„ type æ˜ å°„åˆ°å…·ä½“çš„ React ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ComponentMap</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {
  <span class="hljs-attr">text_input</span>: <span class="hljs-title class_">GenericInput</span>,
  <span class="hljs-attr">toggle_switch</span>: <span class="hljs-title class_">GenericSwitch</span>,
  <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤æ‰©å±•æ›´å¤šç»„ä»¶ï¼Œå¦‚ date_picker, image_upload ç­‰</span>
};

<span class="hljs-comment">// 2. å®šä¹‰åè®®æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">FormFieldSchema</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>;        <span class="hljs-comment">// ç»„ä»¶ç±»å‹ï¼Œå¯¹åº” ComponentMap çš„ key</span>
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>;         <span class="hljs-comment">// æäº¤æ•°æ®çš„å­—æ®µå</span>
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>;       <span class="hljs-comment">// UI æ˜¾ç¤ºçš„æ ‡é¢˜</span>
  defaultValue?: <span class="hljs-built_in">any</span>;  <span class="hljs-comment">// é»˜è®¤å€¼</span>
  required?: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// æ ¡éªŒè§„åˆ™ï¼šæ˜¯å¦å¿…å¡«</span>
  placeholder?: <span class="hljs-built_in">string</span>;<span class="hljs-comment">// å ä½ç¬¦</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DynamicFormProps</span> {
  <span class="hljs-attr">schema</span>: <span class="hljs-title class_">FormFieldSchema</span>[]; 
  <span class="hljs-attr">onSubmit</span>: <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">DynamicFormRenderer</span> = (<span class="hljs-params">{ schema, onSubmit }: DynamicFormProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> { control, handleSubmit, <span class="hljs-attr">formState</span>: { errors } } = <span class="hljs-title function_">useForm</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
      {schema.map((field, index) =&gt; {
        const Component = ComponentMap[field.type];

        // å®¹é”™å¤„ç†ï¼šé‡åˆ°æœªçŸ¥çš„ç»„ä»¶ç±»å‹
        if (!Component) {
          return <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{color:</span> '<span class="hljs-attr">gray</span>'}}&gt;</span>ä¸æ”¯æŒçš„ç»„ä»¶ç±»å‹: {field.type}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>;
        }

        return (
          <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{field.key}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Controller</span>
              <span class="hljs-attr">control</span>=<span class="hljs-string">{control}</span>
              <span class="hljs-attr">name</span>=<span class="hljs-string">{field.key}</span>
              <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{field.defaultValue}</span>
              <span class="hljs-attr">rules</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">required:</span> <span class="hljs-attr">field.required</span> ? '<span class="hljs-attr">æ­¤é¡¹ä¸èƒ½ä¸ºç©º</span>' <span class="hljs-attr">:</span> <span class="hljs-attr">false</span> }}
              <span class="hljs-attr">render</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">field:</span> { <span class="hljs-attr">onChange</span>, <span class="hljs-attr">value</span> } }) =&gt;</span> (
                <span class="hljs-tag">&lt;<span class="hljs-name">Component</span>
                  <span class="hljs-attr">label</span>=<span class="hljs-string">{field.label}</span>
                  <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
                  <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
                  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{field.placeholder}</span>
                  {<span class="hljs-attr">...field</span>} // <span class="hljs-attr">å°†åè®®ä¸­çš„å…¶ä»–è‡ªå®šä¹‰å±æ€§é€ä¼ ç»™ç»„ä»¶</span>
                /&gt;</span>
              )}
            /&gt;
            {/* ç»Ÿä¸€çš„é”™è¯¯æç¤º UI */}
            {errors[field.key] &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{color:</span> '<span class="hljs-attr">red</span>', <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">12</span>, <span class="hljs-attr">marginTop:</span> <span class="hljs-attr">-10</span>, <span class="hljs-attr">marginBottom:</span> <span class="hljs-attr">10</span>}}&gt;</span>
                {errors[field.key]?.message as string}
              <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
            )}
          <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        );
      })}

      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span> <span class="hljs-attr">24</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æäº¤è¡¨å•"</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{handleSubmit(onSubmit)}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-6">ç¬¬ä¸‰æ­¥ï¼šä¸šåŠ¡åœºæ™¯åº”ç”¨ (Integration)</h3>
<p>åœ¨å®é™…é¡µé¢ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è¯·æ±‚æ¥å£è·å– JSONï¼Œç„¶åä¼ ç»™æ¸²æŸ“å¼•æ“å³å¯ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// screens/SurveyScreen.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ScrollView</span>, <span class="hljs-title class_">Alert</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicFormRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/DynamicFormRenderer'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SurveyScreen</span>(<span class="hljs-params"/>) {
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿï¼šä»æœåŠ¡ç«¯ API è·å–çš„åŠ¨æ€é…ç½®</span>
  <span class="hljs-keyword">const</span> serverConfig = [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'text_input'</span>, 
      <span class="hljs-attr">key</span>: <span class="hljs-string">'username'</span>, 
      <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·æ˜µç§°'</span>, 
      <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¯·è¾“å…¥æ‚¨çš„æ˜µç§°'</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> 
    },
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'text_input'</span>, 
      <span class="hljs-attr">key</span>: <span class="hljs-string">'email'</span>, 
      <span class="hljs-attr">label</span>: <span class="hljs-string">'è”ç³»é‚®ç®±'</span>, 
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> 
    },
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'toggle_switch'</span>, 
      <span class="hljs-attr">key</span>: <span class="hljs-string">'subscribe'</span>, 
      <span class="hljs-attr">label</span>: <span class="hljs-string">'è®¢é˜…æˆ‘ä»¬çš„å‘¨åˆŠ'</span>, 
      <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">true</span> 
    }
  ];

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFormSubmit</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
    <span class="hljs-comment">// æœ€ç»ˆæ”¶é›†åˆ°çš„æ•°æ®å¯¹è±¡ï¼Œç»“æ„å®Œå…¨ç”±æœåŠ¡ç«¯ Key å†³å®š</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Form Data:"</span>, data);
    <span class="hljs-title class_">Alert</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">"æäº¤æˆåŠŸ"</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ScrollView</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">24</span>, <span class="hljs-attr">marginTop:</span> <span class="hljs-attr">40</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DynamicFormRenderer</span> 
        <span class="hljs-attr">schema</span>=<span class="hljs-string">{serverConfig}</span> 
        <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleFormSubmit}</span> 
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ScrollView</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-7">5. æ–¹æ¡ˆä¼˜åŠ¿æ€»ç»“</h2>
<ol>
<li><strong>åŠ¨æ€æ€§ (Dynamic):</strong> ç•Œé¢å®Œå…¨ç”±æ•°æ®å®šä¹‰ï¼ŒæœåŠ¡ç«¯å¯éšæ—¶ä¸‹å‘æ–°çš„ JSON é…ç½®æ¥æ”¹å˜ App ç•Œé¢ï¼Œæ— éœ€ä¾èµ– App Store å‘ç‰ˆã€‚</li>
<li><strong>è§£è€¦ (Decoupling):</strong> å‰ç«¯ä¸“æ³¨äº UI ç»„ä»¶çš„äº¤äº’ç»†èŠ‚ä¸æ ·å¼å®ç°ï¼Œåç«¯ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ä¸å­—æ®µå®šä¹‰ï¼ŒèŒè´£åˆ†æ˜ã€‚</li>
<li><strong>ä¸€è‡´æ€§ (Consistency):</strong> è¿™ä¸€å¥— JSON åè®®å¯ä»¥åŒæ—¶ä¾› Androidã€iOS ç”šè‡³ Web ç«¯ä½¿ç”¨ï¼Œç¡®ä¿å¤šç«¯ä¸šåŠ¡é€»è¾‘å®Œå…¨ä¸€è‡´ã€‚</li>
</ol>
<h2 data-id="heading-8">6. æ‰©å±•æ€è€ƒ</h2>
<p>å¯¹äºæ›´å¤æ‚çš„ç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ï¼š</p>
<ul>
<li><strong>è¡¨å•è”åŠ¨:</strong> åœ¨ JSON åè®®ä¸­å¢åŠ  <code>dependencies</code> å­—æ®µï¼Œå®ç°â€œå½“å­—æ®µ A é€‰äº† X æ—¶ï¼Œå­—æ®µ B æ‰æ˜¾ç¤ºâ€çš„é€»è¾‘ã€‚</li>
<li><strong>å¤æ‚æ ¡éªŒ:</strong> æ”¯æŒæ­£åˆ™æ ¡éªŒï¼ˆRegexï¼‰ï¼ŒæœåŠ¡ç«¯ä¸‹å‘æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œå‰ç«¯è§£æåç”¨äºéªŒè¯ã€‚</li>
<li><strong>å¸ƒå±€åµŒå¥—:</strong> å¼•å…¥ <code>Layout</code> ç±»å‹çš„ç»„ä»¶ï¼ˆå¦‚ Row, Column, Cardï¼‰ï¼Œæ”¯æŒæ›´ä¸°å¯Œçš„é¡µé¢æ’ç‰ˆèƒ½åŠ›ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS é‡Œçš„ â€œå˜é‡ç§Ÿæˆ¿è®°â€ï¼šé—­åŒ…æ˜¯å’‹æŠŠå˜é‡ â€œæ‰£â€ ä¸‹æ¥çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576556950331293696</link>    <guid>https://juejin.cn/post/7576556950331293696</guid>    <pubDate>2025-11-26T02:14:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950331293696" data-draft-id="7576512460262735908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS é‡Œçš„ â€œå˜é‡ç§Ÿæˆ¿è®°â€ï¼šé—­åŒ…æ˜¯å’‹æŠŠå˜é‡ â€œæ‰£â€ ä¸‹æ¥çš„ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-11-26T02:14:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS é‡Œçš„ â€œå˜é‡ç§Ÿæˆ¿è®°â€ï¼šé—­åŒ…æ˜¯å’‹æŠŠå˜é‡ â€œæ‰£â€ ä¸‹æ¥çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:14:15.000Z" title="Wed Nov 26 2025 02:14:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰è¿‡è¿™ç§ç–‘æƒ‘ï¼š</p>
<p>æ˜æ˜åœ¨ â€œå‡ºç§Ÿå±‹â€ï¼ˆå‡½æ•°ï¼‰é‡Œæ”¾çš„ â€œè¡Œæâ€ï¼ˆå˜é‡ï¼‰ï¼Œæˆ¿ä¸œéƒ½é€€æˆ¿äº†ï¼Œè¿™è¡Œæå’‹è¿˜èƒ½æ‹¿å‡ºæ¥ç”¨ï¼Ÿæˆ–è€…å¾ªç¯é‡Œçš„å˜é‡æ€» â€œä¸²æˆ¿é—´â€ï¼Œæ˜æ˜ä½ 1 å·æˆ¿ï¼Œç»“æœè·‘åˆ° 6 å·æˆ¿å»äº†ï¼Ÿåœ¨å‡½æ•°é‡Œå®šä¹‰çš„å˜é‡ï¼Œå‡ºäº†å‡½æ•°å±…ç„¶è¿˜èƒ½ç”¨ï¼Ÿ</p>
<p>è¿™èƒŒåå…¶å®è—ç€<strong>ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾</strong>çš„ â€œå°ä¹ä¹â€ï¼Œè€Œæœ€ç»ˆçš„ <strong>â€œå¹•åBOSSâ€</strong> å°±æ˜¯ â€”â€”<strong>é—­åŒ…</strong>ã€‚ä»Šå¤©å’±ä»¬å°±ç”¨ â€œç§Ÿæˆ¿â€ ï¼ŒæŠŠ<strong>ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾ã€é—­åŒ…</strong>è¿™ä»¨ JS é‡Œçš„ â€œç§Ÿæˆ¿è§„åˆ™â€ è®²æ˜ç™½ï¼Œè®©ä½ è¿…é€Ÿæˆä¸º<strong>é—­åŒ…å¤§å¸ˆ</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šå˜é‡çš„ â€œç§Ÿæˆ¿åœ°ç›˜â€ å«ä½œç”¨åŸŸ</h3>
<p>å˜é‡ä¸æ˜¯éšä¾¿ â€œä½â€ çš„ï¼Œå®ƒå¾—æœ‰è‡ªå·±çš„ â€œæˆ¿å­â€â€”â€” è¿™å°±æ˜¯<strong>ä½œç”¨åŸŸ</strong>ã€‚ç®€å•è¯´ï¼š<strong>å˜é‡èƒ½å¾…çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒçš„ä½œç”¨åŸŸ</strong>ã€‚</p>
<p>JS é‡Œçš„ â€œæˆ¿å­â€ åˆ† 3 ç§ï¼š</p>
<h4 data-id="heading-2">1. å…¨å±€ä½œç”¨åŸŸï¼šâ€œå¤§è¡—ä¸Šçš„å…±äº«è¡Œæï¼Œè°éƒ½èƒ½ç¢°â€</h4>
<p>ä½ æŠŠè¡Œææ”¾ â€œå¤§è¡—ä¸Šâ€ï¼ˆå‡½æ•° / å¤§æ‹¬å·å¤–é¢ï¼‰ï¼Œé‚£æ•´ä¸ªå°åŒºï¼ˆæ•´ä¸ªæ–‡ä»¶ï¼‰çš„äººéƒ½èƒ½æ‹¿ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> good = <span class="hljs-string">"å¼ ä¸‰çš„å¿«é€’"</span>; <span class="hljs-comment">// æ”¾å¤§è¡—ä¸Šï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getGood</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(good);   <span class="hljs-comment">// è°éƒ½èƒ½æ‹¿ï¼Œè¾“å‡ºâ€œå¼ ä¸‰çš„å¿«é€’â€</span>
}
<span class="hljs-title function_">getGood</span>();
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f185b4e2945045269a0ab3e1cf8550c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=1cd0jPBZ%2B%2FXVp9mFaomopv8E%2Bh4%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">2. å‡½æ•°ä½œç”¨åŸŸï¼šâ€œè‡ªå®¶å§å®¤çš„è¡Œæï¼Œå¤–äººåˆ«è¿›â€</h4>
<p>ä½ æŠŠè¡Œæé”åœ¨ â€œå§å®¤â€ï¼ˆå‡½æ•°å†…éƒ¨ï¼‰é‡Œï¼Œé‚£åªæœ‰å§å®¤é‡Œçš„äººèƒ½æ‹¿ï¼Œå‡ºäº†é—¨å°±ç¢°ä¸åˆ°äº†ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">wallet</span> = <span class="hljs-string">"å…¨å±€é’±åŒ…(100å—)"</span><span class="hljs-comment">; </span>
function myHome() {
    var <span class="hljs-attr">wallet</span> = <span class="hljs-string">"å§å®¤é’±åŒ…(2000å—)"</span><span class="hljs-comment">; // å§å®¤é‡Œçš„é’±åŒ…ï¼Œåªåœ¨å§å®¤æœ‰æ•ˆ</span>
    console.log(wallet)<span class="hljs-comment">; // ç”¨çš„æ˜¯å§å®¤é‡Œçš„ï¼Œè¾“å‡º2000</span>
}
myHome()<span class="hljs-comment">;</span>
console.log(wallet)<span class="hljs-comment">; // åªèƒ½æ‹¿åˆ°å¤§è¡—ä¸Šçš„ï¼Œè¾“å‡º100</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cadd6bc5783426ea8750430c5cd40d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=fYN7YMl4efZfkIe2hXv%2FIR3h7vk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ’é‡ç‚¹</strong>ï¼šè¿™æˆ¿å­æ˜¯ â€œå•å‘é—¨â€â€”â€” åªèƒ½ä»å§å®¤ï¼ˆå†…éƒ¨ï¼‰å¾€å¤–æ‹¿å¤§è¡—ä¸Šçš„ä¸œè¥¿ï¼Œå¤§è¡—ä¸Šçš„äººæ‹¿ä¸åˆ°å§å®¤é‡Œçš„ã€‚</p>
<h4 data-id="heading-4">3. å—çº§ä½œç”¨åŸŸï¼šâ€œç”¨<code>let</code>ç»™è¡Œæåˆ’ä¸ªå°æ ¼å­â€</h4>
<p><code>var</code>æ˜¯ â€œç²—å¿ƒç§Ÿå®¢â€ï¼šå“ªæ€•æŠŠè¡Œææ”¾ â€œè¡£æŸœâ€ï¼ˆ<code>if/for</code>çš„<code>{}</code>é‡Œï¼‰ï¼Œä¹Ÿä¼šä¸å°å¿ƒ â€œæ‰â€ åˆ°å§å®¤é‡Œï¼›ä½†<code>let/const</code>æ˜¯ â€œç»†å¿ƒç§Ÿå®¢â€ï¼ŒæŠŠè¡Œæé”åœ¨è¡£æŸœæ ¼å­é‡Œï¼Œåªæœ‰æ ¼å­é‡Œèƒ½æ‹¿ã€‚</p>
<p>ä¸Šä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">let</span> money = <span class="hljs-number">500</span>; <span class="hljs-comment">// é”åœ¨è¡£æŸœæ ¼å­ï¼ˆå—çº§ä½œç”¨åŸŸï¼‰é‡Œ</span>
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(money); <span class="hljs-comment">// æŠ¥é”™ï¼å¤–é¢æ‰“ä¸å¼€è¿™æ ¼å­</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/766c2644e93f4f93a3ab9e6ed1b07880~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=VGoGdxssAz3CX%2BmVbv%2FHLxk0xhA%3D" alt="image.png" loading="lazy"/></p>
<p>ç»“æœä¹Ÿæ˜¯æ˜¾ç¤ºäº†<strong>money is not defined</strong>ã€‚æ‰€ä»¥å½“å½¢æˆå—çº§ä½œç”¨åŸŸæ—¶ï¼Œå¤–å±‚æ˜¯è®¿é—®ä¸äº†å†…å±‚çš„ã€‚è¦æ˜¯æ¢æˆ<code>var money = 500;</code>ï¼Œè¿™é’±å°±ä¼š â€œæ‰â€ åˆ°å¤–é¢ï¼Œèƒ½è¢«æ‹¿åˆ° â€”â€” è¿™å°±æ˜¯<code>let</code>çš„ â€œæ ¼å­é”â€ åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-5">äºŒã€å˜é‡ â€œæ‰¾ä¸åˆ°ï¼Ÿå–Šæˆ¿ä¸œï¼â€â€”â€” ä½œç”¨åŸŸé“¾</h3>
<p>ä½ åœ¨å§å®¤é‡Œæ‰¾è¡Œæï¼Œæ‰¾ä¸åˆ°å’‹åŠï¼Ÿå–Š â€œæˆ¿ä¸œâ€ï¼ˆå¤–å±‚ä½œç”¨åŸŸï¼‰å•Šï¼æˆ¿ä¸œæ‰¾ä¸åˆ°ï¼Œå°±å–Š â€œå¤§æˆ¿ä¸œâ€ï¼ˆå¤–å¤–å±‚ä½œç”¨åŸŸï¼‰ï¼Œä¸€å±‚ä¸€å±‚å¾€ä¸Šå–Šï¼Œè¿™ä¸² â€œå–Šäººçš„é“¾æ¡â€ å°±æ˜¯<strong>ä½œç”¨åŸŸé“¾</strong>ã€‚</p>
<p>çœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function myHome() {
  var <span class="hljs-attr">TV</span> = <span class="hljs-string">"å®¢å…çš„å¤§ç”µè§†"</span><span class="hljs-comment">; </span>
  let <span class="hljs-attr">sofa</span> = <span class="hljs-string">"å®¢å…æ²™å‘"</span><span class="hljs-comment">;</span>
  {
    let <span class="hljs-attr">sofa</span> = <span class="hljs-string">"å§å®¤å°æ²™å‘"</span><span class="hljs-comment">; </span>
    var <span class="hljs-attr">eat</span> = <span class="hljs-string">"å®¢å…é›¶é£Ÿ"</span><span class="hljs-comment">; // varæ²¡æ ¼å­é”ï¼Œæ‰å®¢å…é‡Œäº†</span>
    let <span class="hljs-attr">clothes</span> = <span class="hljs-string">"å§å®¤ç¡è¡£"</span><span class="hljs-comment">;</span>
    console.log(TV)<span class="hljs-comment">; // å§å®¤é‡Œæ‰¾ä¸åˆ°ï¼Œå–Šæˆ¿ä¸œï¼ˆå®¢å…ï¼‰â†’ æ‰¾åˆ°ç”µè§†ï¼Œè¾“å‡ºâ€œå¤§ç”µè§†â€</span>
    console.log(sofa)<span class="hljs-comment">; // å§å®¤é‡Œæœ‰å°æ²™å‘ï¼Œç›´æ¥æ‹¿â†’ è¾“å‡ºâ€œå°æ²™å‘â€</span>
  }
  console.log(sofa)<span class="hljs-comment">; // å®¢å…é‡Œçš„å¤§æ²™å‘â†’ è¾“å‡ºâ€œå®¢å…æ²™å‘â€</span>
  console.log(eat)<span class="hljs-comment">; // é›¶é£Ÿæ‰å®¢å…äº†â†’ è¾“å‡ºâ€œå®¢å…é›¶é£Ÿâ€</span>
  console.log(clothes)<span class="hljs-comment">; // ç¡è¡£é”åœ¨å§å®¤æ ¼å­é‡Œâ†’ æŠ¥é”™ï¼æ‹¿ä¸åˆ°</span>
}
myHome()<span class="hljs-comment">;</span>
</code></pre>
<p>ç»“æœè·Ÿæˆ‘ä»¬æƒ³çš„ä¸€æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f0c2f0632f24cb8b4a74e243f6b63e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=GRjsn5U0Xl6L9sm1eZuHsderqq4%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§è‡´åˆ†æå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c35264d7df441c6bd99385ed0387248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=E6eiBVRJ1zwnU4BAkuDiTtt9dzE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å…³é”®è§„å¾‹</strong>ï¼šä½ ç§Ÿæˆ¿å­çš„æ—¶å€™ï¼ˆå‡½æ•°å®šä¹‰æ—¶ï¼‰ï¼Œå°±ä¼šè®°ä¸‹æ¥ â€œæˆ¿ä¸œæ˜¯è°â€ï¼ˆç”¨<code>outer</code>æŒ‡é’ˆï¼‰â€”â€” ä¸ç®¡ä½ åæ¥æ¬åˆ°å“ªï¼ˆå‡½æ•°åœ¨å“ªè°ƒç”¨ï¼‰ï¼Œæ‰¾ä¸œè¥¿éƒ½å¾—æŒ‰ â€œæœ€åˆçš„æˆ¿ä¸œâ€ æ¥ï¼</p>
<h3 data-id="heading-6">ä¸‰ã€é—­åŒ…ï¼šâ€œç§Ÿå®¢é€€ç§Ÿäº†ï¼Œè¡Œæå´è¢«ä¿æ´æ‰£ä¸‹äº†â€</h3>
<p>å…ˆè®°ä¸¤ä¸ªç§Ÿæˆ¿è§„çŸ©ï¼š</p>
<ol>
<li>ç§Ÿå®¢é€€ç§Ÿï¼ˆå‡½æ•°æ‰§è¡Œå®Œï¼‰ï¼Œå§å®¤é‡Œçš„ä¸œè¥¿ï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ä¼šè¢«ç‰©ä¸šæ¸…èµ°ï¼ˆå†…å­˜é”€æ¯ï¼‰ï¼›</li>
<li>ä¿æ´ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰èƒ½è¿›ç§Ÿå®¢çš„å§å®¤æ‹¿ä¸œè¥¿ï¼ˆä½œç”¨åŸŸè§„åˆ™ï¼‰ã€‚</li>
</ol>
<p>é‚£é—­åŒ…æ˜¯å’‹å›äº‹ï¼Ÿ</p>
<p>åˆ«æ€¥ï¼Œå…ˆçœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">leave</span>() {
  <span class="hljs-selector-tag">var</span> <span class="hljs-attribute">left</span> = "ç§Ÿå®¢çš„ç¬”è®°æœ¬ç”µè„‘"; <span class="hljs-comment">// å§å®¤é‡Œçš„è¡Œæ</span>
  function <span class="hljs-built_in">cleaner</span>() { <span class="hljs-comment">// ä¿æ´æ˜¯å§å®¤é‡Œçš„â€œå†…éƒ¨å‘˜å·¥â€</span>
    console<span class="hljs-selector-class">.log</span>(left); <span class="hljs-comment">// ä¿æ´èƒ½æ‹¿è¿™è¡Œæ</span>
  }
  return cleaner; <span class="hljs-comment">// ç§Ÿå®¢æŠŠä¿æ´â€œå¸¦èµ°äº†â€</span>
}
<span class="hljs-selector-tag">var</span> cleaner1 = <span class="hljs-built_in">leave</span>(); <span class="hljs-comment">// ç§Ÿå®¢é€€ç§Ÿäº†ï¼Œå§å®¤è¯¥è¢«æ¸…äº†</span>
<span class="hljs-built_in">cleaner1</span>(); <span class="hljs-comment">// ä½†ä¿æ´å±…ç„¶æ‹¿å‡ºäº†â€œç¬”è®°æœ¬ç”µè„‘â€ï¼</span>
</code></pre>
<p>æœ€å–œæ¬¢çš„è¾“å‡ºç»“æœç¯èŠ‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825e4a363a3143c99f0e57bb16dfbcd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=bBEK1%2BV4dKqrE63QA2QjNkrz19U%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å°±ç¦»è°±äº†ï¼šç§Ÿå®¢éƒ½èµ°äº†ï¼Œè¡Œæå’‹è¿˜åœ¨ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆ</strong>ï¼šå› ä¸ºä¿æ´ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰è¿˜ â€œæƒ¦è®°ç€â€ è¿™è¡Œæï¼Œç‰©ä¸šï¼ˆJS å¼•æ“ï¼‰å°±ä¸ä¼šæŠŠå§å®¤å…¨æ¸…æ‰ â€”â€” è€Œæ˜¯ç•™ä¸ª â€œå°å‚¨ç‰©ç®±â€ï¼ˆè¿™å°±æ˜¯é—­åŒ…ï¼‰ï¼Œä¸“é—¨è£…ä¿æ´éœ€è¦çš„è¡Œæï¼ˆè¿™é‡Œå°±æ˜¯<code>é—ç•™è¡Œæ</code>ï¼‰ã€‚</p>
<p>å¤§ç™½è¯ç¿»è¯‘é—­åŒ…ï¼š</p>
<blockquote>
<p>ç§Ÿå®¢é€€ç§Ÿäº†ï¼Œä½†ä¿æ´æŠŠä»–çš„è¡Œææ‰£åœ¨å‚¨ç‰©ç®±é‡Œï¼Œèµ°åˆ°å“ªå¸¦åˆ°å“ª â€”â€” è¿™å‚¨ç‰©ç®±å°±æ˜¯é—­åŒ…ã€‚</p>
</blockquote>
<p>è¿˜æ²¡æ‡‚çš„è¯æˆ‘å†ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªä¸å¬è¯çš„å„¿å­ï¼Œä»–è·Ÿä½ æ–­ç»å…³ç³»å‡ºå»é—¯è¡ï¼Œå¹¸è¿çš„æ˜¯ä»–å‡ºå»ä¹‹åä½ ä»¬çš„è€æˆ¿å­å°±æ‹†è¿äº†ï¼Œäºæ˜¯ä½ æ‹¿ç€æ‹†è¿è¡¥è´´ä¹°äº†ä¸€å¥—æ–°æˆ¿å­ï¼Œä½†ä½ äºå¿ƒä¸å¿ï¼Œä½ æ€•å„¿å­èµ°æŠ•æ— è·¯å›æ¥æ‰¾ä½ ï¼Œä½†æ˜¯æˆ¿å­åˆæ‹†è¿äº†ï¼Œè¿™æ—¶å€™ä½ å°±ä¼šåœ¨è¿™ä¸ªæ‹†è¿é—å€<strong>ç«‹ä¸€ä¸ªç‰Œå­</strong>æˆ–è€…ä»€ä¹ˆåš<strong>æ ‡è®°</strong>ï¼Œè®©ä½ å„¿å­çŸ¥é“ä½ æ¬åˆ°å“ªé‡Œäº†ï¼Œè€Œè¿™ä¸ª<strong>ç‰Œå­</strong>å°±æ˜¯<strong>é—­åŒ…</strong>ã€‚è™½ç„¶è€æˆ¿å­æ²¡äº†ï¼Œä½†æ˜¯è¿™ä¸ª<strong>ç‰Œå­</strong>æœ‰å®ƒçš„ä½œç”¨----æé†’ä½ å„¿å­æ–°å®¶çš„åœ°å€ï¼Œä½ å„¿å­å¦‚æœå›æ¥ä¼šç”¨å¾—åˆ°è¿™ä¸ªä½œç”¨ã€‚</p>
<p>è™½ç„¶å·²ç»å‡ºæ ˆï¼Œä½†ä¾æ—§ä¿ç•™å‡½æ•°è¦ç”¨åˆ°çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯<strong>é—­åŒ…</strong>çš„æ ¸å¿ƒã€‚</p>
<p>å†çœ‹ä¸€ä¸ªä¾‹å­ï¼šä¸ºå•¥èƒ½è¾“å‡º 1-5ï¼Ÿå°±æ˜¯å› ä¸ºé—­åŒ…æŠŠ â€œæ¯ä¸ªæˆ¿é—´çš„è¡Œæâ€ éƒ½æ‰£ä¸‹æ¥äº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">arr</span> = []<span class="hljs-comment">;</span>
for (var <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt;= 5; i++) {</span>
    function foo(j) {
        arr.push(function(){
            console.log(j)<span class="hljs-comment">;</span>
        })
    }
    foo(i)<span class="hljs-comment">;</span>
}
for (let <span class="hljs-attr">n</span> = <span class="hljs-number">0</span><span class="hljs-comment">; n &lt; arr.length; n++) {</span>
    arr<span class="hljs-section">[n]</span>()<span class="hljs-comment">;</span>
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cf2b4ed66a04f94a3d56610ad5ad363~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764728055&amp;x-signature=XPjBbb%2FnJU8tYYDczoutr5ZHtMA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">å››ã€é—­åŒ…ï¼šæ˜¯ â€œå‚¨ç‰©ç¥å™¨â€ ä¹Ÿæ˜¯ â€œå æˆ¿å‘â€</h3>
<h4 data-id="heading-8">ä¼˜ç‚¹ï¼š</h4>
<ul>
<li><strong>è—ç§æˆ¿é’±</strong>ï¼šæƒ³æŠŠè¡Œæé”èµ·æ¥ï¼Œåªæœ‰è‡ªå·±èƒ½æ‹¿ï¼Ÿç”¨é—­åŒ…ï¼</li>
<li><strong>å°è£… â€œä¸“å±æˆ¿é—´â€</strong> ï¼šæ—©æœŸ JS æ²¡ â€œç‹¬ç«‹å…¬å¯“â€ï¼ˆæ¨¡å—ï¼‰ï¼Œå…¨é é—­åŒ…å°å‡ºä¸“å±ç©ºé—´ã€‚</li>
</ul>
<h4 data-id="heading-9">ç¼ºç‚¹ï¼š</h4>
<ul>
<li><strong>å ç€æˆ¿é—´ä¸æ’’æ‰‹ï¼ˆå†…å­˜æ³„éœ²ï¼‰</strong> ï¼šé—­åŒ…æ‰£ç€è¡Œæï¼Œç‰©ä¸šå°±æ²¡æ³•æ¸…æˆ¿é—´ â€”â€” è¦æ˜¯ä¸ç”¨çš„é—­åŒ…ä¸æ‰”ï¼Œæˆ¿é—´ä¼šè¶Šå è¶Šå¤šã€‚è§£å†³åŠæ³•ï¼šä¸ç”¨ä¿æ´çš„æ—¶å€™ï¼ŒæŠŠä¿æ´è¾äº†ï¼ˆæ¯”å¦‚<code>ç¦»èŒä¿æ´ = null</code>ï¼‰ï¼Œç‰©ä¸šå°±ä¼šæŠŠå‚¨ç‰©ç®±æ¸…æ‰ã€‚</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“ï¼šä¸€å¥è¯ä¸²èµ·æ‰€æœ‰ â€œç§Ÿæˆ¿è§„åˆ™â€</h2>
<p><strong>ä½œç”¨åŸŸ</strong>æ˜¯å˜é‡çš„ â€œæˆ¿é—´â€ï¼Œ<strong>ä½œç”¨åŸŸé“¾</strong>æ˜¯ â€œæ‰¾ä¸åˆ°ä¸œè¥¿å–Šæˆ¿ä¸œçš„é¡ºåºâ€ï¼Œ<strong>é—­åŒ…</strong>æ˜¯ â€œç§Ÿå®¢é€€ç§Ÿåï¼Œä¿æ´æ‰£ä¸‹è¡Œæçš„å‚¨ç‰©ç®±â€â€”â€” è¿™ä»¨å°±æ˜¯ JS é‡Œ â€œå˜é‡ä½å“ªã€å’‹æ‰¾ã€å’‹ç•™â€ çš„å…¨éƒ¨é€»è¾‘ï¼</p>
<blockquote>
<p>æ­å–œä½ æˆä¸º<strong>é—­åŒ…å¤§å¸ˆ</strong>ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™next sqliteè¿›é˜¶ç‰ˆæœ¬æ¥äº†]]></title>    <link>https://juejin.cn/post/7576486942834966574</link>    <guid>https://juejin.cn/post/7576486942834966574</guid>    <pubDate>2025-11-25T16:43:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576486942834966574" data-draft-id="7576518316135890995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™next sqliteè¿›é˜¶ç‰ˆæœ¬æ¥äº† "/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-25T16:43:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xq9527"/> <meta itemprop="url" content="https://juejin.cn/user/1239904848712184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™next sqliteè¿›é˜¶ç‰ˆæœ¬æ¥äº† 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904848712184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xq9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T16:43:44.000Z" title="Tue Nov 25 2025 16:43:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å‰è¨€å¯¼è¯»</h4>
<p>å„ä½ç½‘å‹å¤§å®¶å¥½ï¼Œæœ‰æ®µæ—¶é—´æ²¡æœ‰æ›´å¤§å®¶è§é¢äº†ï¼Œä¹‹å‰æˆ‘å†™è¿‡ä¸€ä¸ªå…³äºé¸¿è’™next é‡Œé¢è½»é‡åŒ–æ•°æ®åº“çš„ä½¿ç”¨ï¼Œé‚£ä¸ªè¿‡ç¨‹å¤æ‚è€Œä¸”ä¸å¥½ä½¿ç”¨</p>
<p>ä»Šå¤©æˆ‘å°±å¸¦ç€å¤§å®¶ä¸€èµ·å°è£…ä¸€ä¸ªå¼€ç®±å³ç”¨çš„sqlite çš„å·¥å…·ç±»åº“ å¸Œæœ›åé¢åŒå­¦å†å­˜å‚¨æ•°æ®çš„æ—¶å€™ä¸å†ç¹çã€‚é‚£ä¹ˆåºŸè¯ä¸å¤šè¯´æˆ‘ä»¬æ­£å¼å¼€å§‹</p>
<h4 data-id="heading-1">æ•ˆæœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab90899831e141b9a541b488b2667454~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764693823&amp;x-signature=9TPr6g8HJcHkK%2BIDfP0%2FakRFi2c%3D" alt="image-20251126002008763" loading="lazy"/></p>
<h4 data-id="heading-2">å…·ä½“å®ç°</h4>
<ul>
<li>
<h6 data-id="heading-3">1å°è£…æˆ‘ä»¬çš„  ç­–ç•¥æ¥å£  åŸºç±»  BaseStrategy</h6>
<p>æˆ‘ä»¬ä¸€å…±å®šä¹‰äº† å»ºè¡¨  ï¼Œåˆå§‹åŒ–æ•°æ®åº“   æ’å…¥æ•°æ®  æŸ¥è¯¢æ‰€æœ‰æ•°æ®  åˆ é™¤æ•°æ®ç­‰æ–¹æ³•</p>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts">  <span class="hljs-comment">/**
   * ç­–ç•¥æ¥å£
   */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseStrategy</span> {
    <span class="hljs-comment">/**
     * è®¾ç½®æ•°æ®åº“SQLå‚æ•°
     * <span class="hljs-doctag">@param</span> dbName æ•°æ®åº“åç§°
     * <span class="hljs-doctag">@param</span> tableName è¡¨å
     * <span class="hljs-doctag">@param</span> sqlArgsMap SQLå‚æ•°æ˜ å°„
     */</span>
    <span class="hljs-title function_">setDbSqlArgs</span>(<span class="hljs-attr">dbName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">tableName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">sqlArgsMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-built_in">void</span>;
  
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–æ•°æ®åº“
     */</span>
    <span class="hljs-title function_">initSssDb</span>(<span class="hljs-attr">context</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  
    <span class="hljs-comment">/**
     * è·å–æœ¬åœ°æ•°æ®åº“è®¢å•ä¿¡æ¯
     * <span class="hljs-doctag">@returns</span> è®¢å•ä¿¡æ¯åˆ—è¡¨
     */</span>
    <span class="hljs-title function_">getLocalDbOrderInfo</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;&gt;;
  
    <span class="hljs-comment">/**
     * æ’å…¥æˆ–æ›´æ–°å­è®¢å•
     * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
     * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
     * <span class="hljs-doctag">@param</span> contentMap å†…å®¹æ˜ å°„
     */</span>
    <span class="hljs-title function_">insertOrUpdateSub</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">contentMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  
    <span class="hljs-comment">/**
     * åˆ é™¤æ•°æ®åº“æ•°æ®
     * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
     * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
     */</span>
    <span class="hljs-title function_">deleteDbData</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  
  
  
  
  }
</code></pre>
<ul>
<li>
<h5 data-id="heading-4">2 ç­–ç•¥å®ç°ç±»</h5>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts">  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">LocalSaveHelper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./helper/LocalSaveHelper'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">BaseStrategy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./inf/BaseStrategy'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">DbLog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./util/DbLog'</span>;
  <span class="hljs-keyword">import</span> {<span class="hljs-title class_">SdkRdbHelper</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./db/SdkRdbHelper'</span>
  
  
  <span class="hljs-comment">/**
   * ç­–ç•¥å®ç°ç±»
   */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BaseStrategy</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">MyPayStrategy</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  
  
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
  
    }
  
  
  
    <span class="hljs-comment">/**
     * è·å–å•ä¾‹å®ä¾‹
     * <span class="hljs-doctag">@returns</span> MkPaySsStrategyå®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">MyPayStrategy</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-property">instance</span>) {
        <span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPayStrategy</span>();
      }
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-property">instance</span>;
    }
  
    <span class="hljs-comment">/**
     * è®¾ç½®æ•°æ®åº“SQLå‚æ•°
     * <span class="hljs-doctag">@param</span> dbName æ•°æ®åº“åç§°
     * <span class="hljs-doctag">@param</span> tableName è¡¨å
     * <span class="hljs-doctag">@param</span> args SQLå‚æ•°æ˜ å°„
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">setDbSqlArgs</span>(<span class="hljs-attr">dbName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">tableName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">args</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-built_in">void</span> {
      <span class="hljs-keyword">if</span> (!args) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'table args is null!!!'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (args.<span class="hljs-property">size</span> &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'table args size is empty!!!'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!dbName) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'database name is empty!!!'</span>);
        }
        <span class="hljs-keyword">if</span> (!tableName) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'table name is empty!!!'</span>);
        }
        <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">setDbName</span>(dbName);
        <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">setDbTableName</span>(tableName);
        <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">setDbSqlArgsMap</span>(args);
      }
    }
  
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–æ•°æ®åº“
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">initSssDb</span>(<span class="hljs-attr">context</span>:<span class="hljs-title class_">Context</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'initSssDb'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getSqlArgsMap</span>()) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printErrLog</span>(<span class="hljs-string">'Please assign an instance first about SqlArgsMap'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">await</span> <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">initRdbStore</span>(context);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">eWithStack</span>(error.<span class="hljs-property">message</span>, error);
      }
    }
  
    <span class="hljs-comment">/**
     * è·å–æœ¬åœ°æ•°æ®åº“è®¢å•ä¿¡æ¯
     * <span class="hljs-doctag">@returns</span> è®¢å•ä¿¡æ¯åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getLocalDbOrderInfo</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'getLocalDbOrderInfo'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getSdkOrderInfo</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">eWithStack</span>(error.<span class="hljs-property">message</span>, error);
        <span class="hljs-keyword">return</span> [];
      }
    }
  
    <span class="hljs-comment">/**
     * æ’å…¥æˆ–æ›´æ–°å­è®¢å•
     * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
     * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
     * <span class="hljs-doctag">@param</span> args å‚æ•°æ˜ å°„
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">insertOrUpdateSub</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">args</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'insertOrUpdateSub'</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">insertOrUpdateSub</span>(uniqueKey, uniqueValue, args);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">eWithStack</span>(error.<span class="hljs-property">message</span>, error);
      }
    }
  
    <span class="hljs-comment">/**
     * åˆ é™¤æ•°æ®åº“æ•°æ®
     * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
     * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteDbData</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printLog</span>(<span class="hljs-string">'deleteDbData'</span>);
         <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">deleteDbOrderData</span>(uniqueKey, uniqueValue);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">eWithStack</span>(error.<span class="hljs-property">message</span>, error);
      }
    }
  
    <span class="hljs-comment">/**
     * æ‰“å°æ—¥å¿—
     * <span class="hljs-doctag">@param</span> msg æ—¥å¿—æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">printLog</span>(<span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">d</span>(msg);
    }
  
    <span class="hljs-comment">/**
     * æ‰“å°é”™è¯¯æ—¥å¿—
     * <span class="hljs-doctag">@param</span> msg é”™è¯¯æ—¥å¿—æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">printErrLog</span>(<span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(msg);
    }
  }
</code></pre>
<ul>
<li>
<h5 data-id="heading-5">3 è·å–æ•°æ®åº“å»ºè¡¨SQLè¯­å¥</h5>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * è·å–æ•°æ®åº“å»ºè¡¨SQLè¯­å¥
 * <span class="hljs-doctag">@param</span> tableName è¡¨å
 * <span class="hljs-doctag">@returns</span> å»ºè¡¨SQLè¯­å¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getSssDbSql</span>(<span class="hljs-attr">tableName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> argsMap = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getSqlArgsMap</span>();
  <span class="hljs-keyword">let</span> sql = <span class="hljs-string">`CREATE TABLE IF NOT EXISTS <span class="hljs-subst">${tableName}</span> (ID INTEGER PRIMARY KEY AUTOINCREMENT`</span>;
  
  <span class="hljs-keyword">if</span> (argsMap) {
    <span class="hljs-keyword">const</span> entries = argsMap.<span class="hljs-title function_">entries</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
      <span class="hljs-keyword">const</span> key = entry[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">const</span> value = entry[<span class="hljs-number">1</span>];
      sql += <span class="hljs-string">`, <span class="hljs-subst">${key}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.getArgsVariable(value)}</span>`</span>;
    }
  }
  
  sql += <span class="hljs-string">');'</span>;
  <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">d</span>(<span class="hljs-string">`sql: <span class="hljs-subst">${sql}</span>`</span>);
  <span class="hljs-keyword">return</span> sql;
}
</code></pre>
<ul>
<li>
<h5 data-id="heading-6">4 SDKå…³ç³»æ•°æ®åº“å¸®åŠ©ç±»</h5>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LocalSaveHelper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../helper/LocalSaveHelper'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DbLog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../util/DbLog'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MYPayType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../constant/MYPayType'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PaySsUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../util/PaySsUtils'</span>;
<span class="hljs-keyword">import</span> { relationalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;


<span class="hljs-comment">/**
 * SDKå…³ç³»æ•°æ®åº“å¸®åŠ©ç±»
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SdkRdbHelper</span> {
  <span class="hljs-keyword">public</span>  <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">SdkRdbHelper</span>|<span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">store</span>: relationalStore.<span class="hljs-property">RdbStore</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;

  <span class="hljs-comment">/**
   * è·å–å•ä¾‹å®ä¾‹
   * <span class="hljs-doctag">@returns</span> SdkRdbHelperå®ä¾‹
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">SdkRdbHelper</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SdkRdbHelper</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">SdkRdbHelper</span>.<span class="hljs-property">instance</span>;
  }

  <span class="hljs-comment">/**
   * åˆå§‹åŒ–æ•°æ®åº“
   * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">initRdbStore</span>(<span class="hljs-params">context: Context</span>){
    <span class="hljs-keyword">const</span> <span class="hljs-attr">STORE_CONFIG</span>: relationalStore.<span class="hljs-property">StoreConfig</span> = {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'RdbTest.db'</span>, <span class="hljs-comment">// æ•°æ®åº“æ–‡ä»¶å</span>
      <span class="hljs-attr">securityLevel</span>: relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S1</span>, <span class="hljs-comment">// æ•°æ®åº“å®‰å…¨çº§åˆ«</span>
      <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šæ•°æ®åº“æ˜¯å¦åŠ å¯†ï¼Œé»˜è®¤ä¸åŠ å¯†</span>
      <span class="hljs-attr">customDir</span>: <span class="hljs-string">'customDir/subCustomDir'</span>, <span class="hljs-comment">// å¯é€‰å‚æ•°ï¼Œæ•°æ®åº“è‡ªå®šä¹‰è·¯å¾„ã€‚æ•°æ®åº“å°†åœ¨å¦‚ä¸‹çš„ç›®å½•ç»“æ„ä¸­è¢«åˆ›å»ºï¼šcontext.databaseDir + '/rdb/' + customDirï¼Œå…¶ä¸­context.databaseDiræ˜¯åº”ç”¨æ²™ç®±å¯¹åº”çš„è·¯å¾„ï¼Œ'/rdb/'è¡¨ç¤ºåˆ›å»ºçš„æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼ŒcustomDirè¡¨ç¤ºè‡ªå®šä¹‰çš„è·¯å¾„ã€‚å½“æ­¤å‚æ•°ä¸å¡«æ—¶ï¼Œé»˜è®¤åœ¨æœ¬åº”ç”¨æ²™ç®±ç›®å½•ä¸‹åˆ›å»ºRdbStoreå®ä¾‹ã€‚</span>
      <span class="hljs-attr">isReadOnly</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šæ•°æ®åº“æ˜¯å¦ä»¥åªè¯»æ–¹å¼æ‰“å¼€ã€‚è¯¥å‚æ•°é»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºæ•°æ®åº“å¯è¯»å¯å†™ã€‚è¯¥å‚æ•°ä¸ºtrueæ—¶ï¼Œåªå…è®¸ä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œä¸å…è®¸å¯¹æ•°æ®åº“è¿›è¡Œå†™æ“ä½œï¼Œå¦åˆ™ä¼šè¿”å›é”™è¯¯ç 801ã€‚</span>
    };
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// if(this.store){</span>
      <span class="hljs-comment">// //  this.store = await rdb.getRdbStore(context, this.STORE_CONFIG);</span>
      <span class="hljs-comment">//   await rdb.getRdbStore(context,this.STORE_CONFIG).then((data)=&gt;{</span>
      <span class="hljs-comment">//</span>
      <span class="hljs-comment">//   })</span>
      <span class="hljs-comment">// }</span>

      <span class="hljs-comment">// è·å¾—ä¸€ä¸ªç›¸å…³çš„RdbStoreï¼Œæ“ä½œå…³ç³»å‹æ•°æ®åº“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…ç½®RdbStoreçš„å‚æ•°ï¼Œ</span>
      <span class="hljs-comment">// ç„¶åé€šè¿‡RdbStoreè°ƒç”¨ç›¸å…³æ¥å£å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ•°æ®æ“ä½œï¼Œä½¿ç”¨callbackå¼‚æ­¥å›è°ƒã€‚</span>
      relationalStore.<span class="hljs-title function_">getRdbStore</span>(context, <span class="hljs-variable constant_">STORE_CONFIG</span>, <span class="hljs-function">(<span class="hljs-params">err, store</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`At LoginPage Failed to get RdbStore. Code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);
          <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'At LoginPage Succeeded in getting RdbStore.'</span>);
        <span class="hljs-comment">// å½“æ•°æ®åº“åˆ›å»ºæ—¶ï¼Œæ•°æ®åº“é»˜è®¤ç‰ˆæœ¬ä¸º0</span>
        <span class="hljs-keyword">if</span> (store.<span class="hljs-property">version</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">const</span> tableName = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getDbTableName</span>();
          <span class="hljs-keyword">const</span> sql = <span class="hljs-title class_">PaySsUtils</span>.<span class="hljs-title function_">getSssDbSql</span>(tableName);
          store.<span class="hljs-title function_">executeSql</span>(sql); <span class="hljs-comment">// åˆ›å»ºæ•°æ®è¡¨</span>
          <span class="hljs-comment">// è®¾ç½®æ•°æ®åº“çš„ç‰ˆæœ¬ï¼Œå…¥å‚ä¸ºå¤§äº0çš„æ•´æ•°</span>
          store.<span class="hljs-property">version</span> = <span class="hljs-number">1</span>;
        }
        <span class="hljs-comment">// èµ‹å€¼ç»™å½“å‰çš„rdbStoreå¯¹è±¡ï¼Œç¡®ä¿è·å–åˆ°RdbStoreå®ä¾‹åï¼Œå†è¿›è¡Œæ•°æ®åº“çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span> = store
      });

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">`åˆå§‹åŒ–æ•°æ®åº“å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);

    }
  }

  <span class="hljs-comment">/**
   * è·å–SDKè®¢å•ä¿¡æ¯
   * <span class="hljs-doctag">@returns</span> è®¢å•ä¿¡æ¯åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getSdkOrderInfo</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">resultList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt; = [];
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">'æ•°æ®åº“æœªåˆå§‹åŒ–'</span>);
        <span class="hljs-keyword">return</span> resultList;
      }

      <span class="hljs-keyword">const</span> tableName = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getDbTableName</span>();
      <span class="hljs-keyword">const</span> resultSet = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">querySql</span>(<span class="hljs-string">`SELECT * FROM <span class="hljs-subst">${tableName}</span> ORDER BY ID DESC`</span>, []);

      <span class="hljs-keyword">while</span> (resultSet.<span class="hljs-title function_">goToNextRow</span>()) {
        <span class="hljs-keyword">const</span> resultMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
        <span class="hljs-keyword">const</span> argsMap = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getSqlArgsMap</span>();

        <span class="hljs-keyword">if</span> (argsMap) {
          <span class="hljs-keyword">const</span> entries = argsMap.<span class="hljs-title function_">entries</span>();
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
            <span class="hljs-keyword">const</span> key = entry[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">const</span> value = entry[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">const</span> columnIndex = resultSet.<span class="hljs-title function_">getColumnIndex</span>(key);
            <span class="hljs-keyword">if</span> (columnIndex !== -<span class="hljs-number">1</span>) {
              <span class="hljs-keyword">if</span> (value === <span class="hljs-title class_">MYPayType</span>.<span class="hljs-property">TEXT</span>) {
                resultMap.<span class="hljs-title function_">set</span>(key, resultSet.<span class="hljs-title function_">getString</span>(columnIndex));
              } <span class="hljs-keyword">else</span> {
                resultMap.<span class="hljs-title function_">set</span>(key, resultSet.<span class="hljs-title function_">getString</span>(columnIndex));
              }
            }
          }
        }
        resultList.<span class="hljs-title function_">push</span>(resultMap);
      }

      resultSet.<span class="hljs-title function_">close</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">`æŸ¥è¯¢è®¢å•ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> resultList;
  }

  <span class="hljs-comment">/**
   * æ’å…¥æˆ–æ›´æ–°å­è®¢å•
   * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
   * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
   * <span class="hljs-doctag">@param</span> contentMap å†…å®¹æ˜ å°„
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">insertOrUpdateSub</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">contentMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">'æ•°æ®åº“æœªåˆå§‹åŒ–'</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">const</span> tableName = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getDbTableName</span>();
      
      <span class="hljs-comment">// æ£€æŸ¥è®°å½•æ˜¯å¦å­˜åœ¨</span>
      <span class="hljs-keyword">const</span> queryResultSet = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">querySql</span>(
        <span class="hljs-string">`SELECT COUNT(*) AS count FROM <span class="hljs-subst">${tableName}</span> WHERE <span class="hljs-subst">${uniqueKey}</span> = ?`</span>,
        [uniqueValue]
      );

      <span class="hljs-keyword">let</span> exists = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (queryResultSet.<span class="hljs-title function_">goToNextRow</span>()) {
        <span class="hljs-keyword">const</span> count = queryResultSet.<span class="hljs-title function_">getLong</span>(queryResultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'count'</span>));
        exists = count &gt; <span class="hljs-number">0</span>;
      }
      queryResultSet.<span class="hljs-title function_">close</span>();

      <span class="hljs-keyword">if</span> (exists) {
        <span class="hljs-comment">// æ›´æ–°æ“ä½œ</span>
        <span class="hljs-keyword">let</span> updateSql = <span class="hljs-string">`UPDATE <span class="hljs-subst">${tableName}</span> SET `</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-attr">values</span>: <span class="hljs-built_in">string</span>[] = [];
        <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-built_in">string</span>[] = [];

        <span class="hljs-keyword">const</span> entries = contentMap.<span class="hljs-title function_">entries</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
          <span class="hljs-keyword">const</span> key = entry[<span class="hljs-number">0</span>];
          <span class="hljs-keyword">const</span> value = entry[<span class="hljs-number">1</span>];
          values.<span class="hljs-title function_">push</span>(<span class="hljs-string">`<span class="hljs-subst">${key}</span> = ?`</span>);
          params.<span class="hljs-title function_">push</span>(value);
        }
        updateSql += values.<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>);
        updateSql += <span class="hljs-string">` WHERE <span class="hljs-subst">${uniqueKey}</span> = ?`</span>;
        params.<span class="hljs-title function_">push</span>(uniqueValue);

        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">executeSql</span>(updateSql, params);
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">d</span>(<span class="hljs-string">'è®°å½•å·²å­˜åœ¨ï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œ'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ’å…¥æ“ä½œ</span>
        <span class="hljs-keyword">let</span> insertSql = <span class="hljs-string">`INSERT INTO <span class="hljs-subst">${tableName}</span> (`</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-built_in">string</span>[] = [];
        <span class="hljs-keyword">const</span> <span class="hljs-attr">placeholders</span>: <span class="hljs-built_in">string</span>[] = [];
        <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-built_in">string</span>[] = [];

        <span class="hljs-comment">// æ·»åŠ å”¯ä¸€é”®</span>
        columns.<span class="hljs-title function_">push</span>(uniqueKey);
        placeholders.<span class="hljs-title function_">push</span>(<span class="hljs-string">'?'</span>);
        params.<span class="hljs-title function_">push</span>(uniqueValue);

        <span class="hljs-keyword">const</span> entries = contentMap.<span class="hljs-title function_">entries</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
          <span class="hljs-keyword">const</span> key = entry[<span class="hljs-number">0</span>];
          <span class="hljs-keyword">const</span> value = entry[<span class="hljs-number">1</span>];
          columns.<span class="hljs-title function_">push</span>(key);
          placeholders.<span class="hljs-title function_">push</span>(<span class="hljs-string">'?'</span>);
          params.<span class="hljs-title function_">push</span>(value);
        }

        insertSql += columns.<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>) + <span class="hljs-string">') VALUES ('</span> + placeholders.<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>) + <span class="hljs-string">')'</span>;
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">executeSql</span>(insertSql, params);
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">d</span>(<span class="hljs-string">'æ‰§è¡Œæ’å…¥æ“ä½œ'</span>);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">`æ’å…¥æˆ–æ›´æ–°å­è®¢å•å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  }

  <span class="hljs-comment">/**
   * åˆ é™¤æ•°æ®åº“è®¢å•æ•°æ®
   * <span class="hljs-doctag">@param</span> uniqueKey å”¯ä¸€æ ‡è¯†é”®
   * <span class="hljs-doctag">@param</span> uniqueValue å”¯ä¸€æ ‡è¯†å€¼
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteDbOrderData</span>(<span class="hljs-attr">uniqueKey</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">uniqueValue</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>) {
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">'æ•°æ®åº“æœªåˆå§‹åŒ–'</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">const</span> tableName = <span class="hljs-title class_">LocalSaveHelper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getDbTableName</span>();
      
      <span class="hljs-comment">// æ£€æŸ¥è®°å½•æ˜¯å¦å­˜åœ¨</span>
      <span class="hljs-keyword">const</span> queryResultSet = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">querySql</span>(
        <span class="hljs-string">`SELECT COUNT(*) AS count FROM <span class="hljs-subst">${tableName}</span> WHERE <span class="hljs-subst">${uniqueKey}</span> = ?`</span>,
        [uniqueValue]
      );

      <span class="hljs-keyword">let</span> exists = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (queryResultSet.<span class="hljs-title function_">goToNextRow</span>()) {
        <span class="hljs-keyword">const</span> count = queryResultSet.<span class="hljs-title function_">getLong</span>(queryResultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'count'</span>));
        exists = count &gt; <span class="hljs-number">0</span>;
      }
      queryResultSet.<span class="hljs-title function_">close</span>();

      <span class="hljs-keyword">if</span> (exists) {
        <span class="hljs-keyword">const</span> deleteSql = <span class="hljs-string">`DELETE FROM <span class="hljs-subst">${tableName}</span> WHERE <span class="hljs-subst">${uniqueKey}</span> = ?`</span>;
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">executeSql</span>(deleteSql, [uniqueValue]);
        <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">d</span>(<span class="hljs-string">'åˆ é™¤æ•°æ®åº“è®¢å•æ•°æ®æˆåŠŸ'</span>);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title class_">DbLog</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">`åˆ é™¤æ•°æ®åº“è®¢å•æ•°æ®å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  }

  <span class="hljs-comment">/**
   * å…³é—­æ•°æ®åº“è¿æ¥
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">close</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>) {
       <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">close</span>();
    }
  }
}
</code></pre>
<ul>
<li>
<h4 data-id="heading-7">ä½¿ç”¨ç¤ºä¾‹</h4>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MYPayType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./constant/MYPayType"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MyPayStrategy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./MyPayStrategy"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Context</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">UserInfo</span>}  <span class="hljs-keyword">from</span> <span class="hljs-string">'./model/UserInfo'</span>


<span class="hljs-comment">/**
 * ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaySssSdkExample</span> {

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">PaySssSdkExample</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;


  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {}



  <span class="hljs-comment">/**
   * è·å–å•ä¾‹å®ä¾‹
   * <span class="hljs-doctag">@returns</span> MyPayStrategyå®ä¾‹
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">PaySssSdkExample</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">PaySssSdkExample</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">PaySssSdkExample</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaySssSdkExample</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">PaySssSdkExample</span>.<span class="hljs-property">instance</span>;
  }
  <span class="hljs-comment">/**
   * åˆå§‹åŒ–SDKç¤ºä¾‹
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">initSdkExample</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è·å–SDKå®ä¾‹</span>
      <span class="hljs-keyword">const</span> sdk = <span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-title function_">getInstance</span>();
      <span class="hljs-comment">// è®¾ç½®æ•°æ®åº“å‚æ•°</span>
      <span class="hljs-keyword">const</span> sqlArgs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
      sqlArgs.<span class="hljs-title function_">set</span>(<span class="hljs-string">'username'</span>, <span class="hljs-title class_">MYPayType</span>.<span class="hljs-property">TEXT</span>);
      sqlArgs.<span class="hljs-title function_">set</span>(<span class="hljs-string">'password'</span>, <span class="hljs-title class_">MYPayType</span>.<span class="hljs-property">TEXT</span>);
      sdk.<span class="hljs-title function_">setDbSqlArgs</span>(<span class="hljs-string">'user_database'</span>, <span class="hljs-string">'username'</span>, sqlArgs);
      
      <span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®åº“</span>
      <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">initSssDb</span>(context);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SDKåˆå§‹åŒ–å®Œæˆ'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SDKåˆå§‹åŒ–å¤±è´¥:'</span>, error);
    }
  }
  
  <span class="hljs-comment">/**
   * æ’å…¥è®¢å•ç¤ºä¾‹
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">insertOrderExample</span>(<span class="hljs-attr">userInfo</span>:<span class="hljs-title class_">UserInfo</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> sdk = <span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-title function_">getInstance</span>();
      <span class="hljs-comment">// åˆ›å»ºè®¢å•æ•°æ®</span>
      <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
      userData.<span class="hljs-title function_">set</span>(<span class="hljs-string">'username'</span>, userInfo.<span class="hljs-property">username</span>);
      userData.<span class="hljs-title function_">set</span>(<span class="hljs-string">'password'</span>, userInfo.<span class="hljs-property">password</span>);
      <span class="hljs-comment">// æ’å…¥æˆ–æ›´æ–°è®¢å•</span>
      <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">insertOrUpdateSub</span>(<span class="hljs-string">'username'</span>, userInfo.<span class="hljs-property">username</span>, userData);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ’å…¥æˆåŠŸ'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è®¢å•æ’å…¥å¤±è´¥:'</span>, error);
    }
  }
  
  <span class="hljs-comment">/**
   * æŸ¥è¯¢è®¢å•ç¤ºä¾‹
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">queryOrdersExample</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;&gt;  {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> sdk = <span class="hljs-title class_">MyPayStrategy</span>.<span class="hljs-title function_">getInstance</span>();
      
      <span class="hljs-comment">// // è·å–æ‰€æœ‰è®¢å•ä¿¡æ¯</span>
      <span class="hljs-comment">// const orders = await sdk.getLocalDbOrderInfo();</span>
      <span class="hljs-comment">//</span>
      <span class="hljs-comment">// console.log('æŸ¥è¯¢åˆ°çš„è®¢å•æ•°é‡:', orders.length);</span>
      <span class="hljs-comment">// orders.forEach((order, index) =&gt; {</span>
      <span class="hljs-comment">//   console.log(`è®¢å• ${index + 1}:`, order);</span>
      <span class="hljs-comment">// });</span>

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">getLocalDbOrderInfo</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æŸ¥è¯¢è®¢å•å¤±è´¥:'</span>, error);
      <span class="hljs-keyword">return</span> [];
    }
  }
}
</code></pre>
<ul>
<li>
<h4 data-id="heading-8">æˆ‘ä»¬å°è£…ä¸€ä¸‹ ç„¶åå†æˆ‘ä»¬çš„UIç»„ä»¶é‡Œé¢å»ä½¿ç”¨</h4>
</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">import {PaySssSdkExample} from  '../PaySssSdkExample'
import  {UserInfo}  from '../model/UserInfo'

<span class="hljs-keyword">@Extend</span>(TextInput)function inputStyle(){
  <span class="hljs-selector-class">.placeholderColor</span>($r('app.color.placeholder_color'))
  <span class="hljs-selector-class">.height</span>(<span class="hljs-number">45</span>)
  <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">18</span>)
  <span class="hljs-selector-class">.backgroundColor</span>($r('app.color.background'))
  <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
  <span class="hljs-selector-class">.padding</span>({left:<span class="hljs-number">0</span>})
  <span class="hljs-selector-class">.margin</span>({top:<span class="hljs-number">12</span>})
}
<span class="hljs-keyword">@Extend</span>(Line)function lineStyle(){
  <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
  <span class="hljs-selector-class">.height</span>(<span class="hljs-number">1</span>)
  <span class="hljs-selector-class">.backgroundColor</span>($r('app.color.linecolor'))
  <span class="hljs-selector-class">.margin</span>({left:<span class="hljs-number">5</span>,right:<span class="hljs-number">5</span>})
}

<span class="hljs-keyword">@Extend</span>(Text)function textStyle(){
  <span class="hljs-selector-class">.fontColor</span>($r('app.color.black_text_color'))
  <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">18</span>)
  <span class="hljs-selector-class">.fontWeight</span>(FontWeight.Medium)
}

<span class="hljs-keyword">@Entry</span>
<span class="hljs-keyword">@Component</span>
struct Index {
  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">message</span>: string = <span class="hljs-string">'Hello World'</span>;
  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">getid</span>:string=<span class="hljs-string">''</span>;
  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">username</span>:string=<span class="hljs-string">''</span>;
  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">password</span>:string=<span class="hljs-string">''</span>;

  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">datamap</span>:Array&lt;Map&lt;string, string&gt;&gt;=[];

  <span class="hljs-built_in">aboutToAppear</span>(): void {
    PaySssSdkExample<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.initSdkExample</span>(getContext());
  }

  <span class="hljs-built_in">build</span>() {
    <span class="hljs-built_in">RelativeContainer</span>() {
       <span class="hljs-built_in">Column</span>({space:<span class="hljs-number">10</span>}){


         <span class="hljs-built_in">Row</span>(){
           <span class="hljs-built_in">Row</span>(){
             Text("username")<span class="hljs-selector-class">.textStyle</span>()
           }<span class="hljs-selector-class">.width</span>(<span class="hljs-number">100</span>)
           <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')
           <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Center)

           <span class="hljs-built_in">TextInput</span>({placeholder:"è¯·è¾“å…¥username"})
             <span class="hljs-selector-class">.maxLength</span>(<span class="hljs-number">20</span>)
             <span class="hljs-selector-class">.type</span>(InputType.Normal)
             <span class="hljs-selector-class">.inputStyle</span>()
             <span class="hljs-selector-class">.onChange</span>((value:string)=&gt;{
               this<span class="hljs-selector-class">.username</span>=value;
             })<span class="hljs-selector-class">.margin</span>({left:<span class="hljs-number">20</span>})
         }<span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
         <span class="hljs-selector-class">.height</span>(<span class="hljs-number">50</span>)
         <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Start)

         Line()<span class="hljs-selector-class">.lineStyle</span>()

         <span class="hljs-built_in">Row</span>(){

           <span class="hljs-built_in">Row</span>(){
             Text("password")<span class="hljs-selector-class">.textStyle</span>()
           }<span class="hljs-selector-class">.width</span>(<span class="hljs-number">100</span>)
           <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')
           <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Center)

           <span class="hljs-built_in">TextInput</span>({placeholder:"è¯·è¾“å…¥password"})
             <span class="hljs-selector-class">.maxLength</span>(<span class="hljs-number">20</span>)
             <span class="hljs-selector-class">.type</span>(InputType.Normal)
             <span class="hljs-selector-class">.inputStyle</span>()
             <span class="hljs-selector-class">.onChange</span>((value:string)=&gt;{
               this<span class="hljs-selector-class">.password</span>=value;
             })<span class="hljs-selector-class">.margin</span>({left:<span class="hljs-number">20</span>})
         }<span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
         <span class="hljs-selector-class">.height</span>(<span class="hljs-number">50</span>)
         <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Start)

         Line()<span class="hljs-selector-class">.lineStyle</span>()


         <span class="hljs-built_in">Row</span>({space:<span class="hljs-number">10</span>}){
           <span class="hljs-selector-tag">Button</span>("æ’å…¥æ•°æ®")<span class="hljs-selector-class">.onClick</span>(()=&gt;{
            let  userInfo: UserInfo=new <span class="hljs-built_in">UserInfo</span>();
            userInfo<span class="hljs-selector-class">.id</span>=this<span class="hljs-selector-class">.getid</span>;
            userInfo<span class="hljs-selector-class">.username</span>=this<span class="hljs-selector-class">.username</span>;
            userInfo<span class="hljs-selector-class">.password</span>=this<span class="hljs-selector-class">.password</span>;
             PaySssSdkExample<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.insertOrderExample</span>(userInfo);

           })<span class="hljs-selector-class">.layoutWeight</span>(<span class="hljs-number">1</span>)

           <span class="hljs-selector-tag">Button</span>("æŸ¥è¯¢æ•°æ®")<span class="hljs-selector-class">.onClick</span>(()=&gt;{
             PaySssSdkExample<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.queryOrdersExample</span>()<span class="hljs-selector-class">.then</span>((data)=&gt;{
               this<span class="hljs-selector-class">.datamap</span>=data;
             })
           })<span class="hljs-selector-class">.layoutWeight</span>(<span class="hljs-number">1</span>)


         }<span class="hljs-selector-class">.width</span>("<span class="hljs-number">100%</span>")<span class="hljs-selector-class">.margin</span>({left:<span class="hljs-number">20</span>,right:<span class="hljs-number">20</span>})

         <span class="hljs-built_in">List</span>({space:<span class="hljs-number">10</span>}){
           <span class="hljs-built_in">ForEach</span>(this.datamap,(item:Map&lt;string, string&gt;)=&gt;{
             <span class="hljs-built_in">ListItem</span>(){
               <span class="hljs-built_in">Column</span>(){
                 Text(item?.get("id"))<span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">18</span>)<span class="hljs-selector-class">.fontColor</span>(Color.Black)
                   <span class="hljs-selector-class">.margin</span>({top:<span class="hljs-number">5</span>})
                 Text(item?.get("username"))<span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">15</span>)<span class="hljs-selector-class">.fontColor</span>(Color.Gray)
                   <span class="hljs-selector-class">.margin</span>({top:<span class="hljs-number">5</span>})
                 Text(item?.get("password"))<span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">15</span>)<span class="hljs-selector-class">.fontColor</span>(Color.Black)
                   <span class="hljs-selector-class">.margin</span>({top:<span class="hljs-number">5</span>})
               }<span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Start)<span class="hljs-selector-class">.margin</span>({left:<span class="hljs-number">20</span>})<span class="hljs-selector-class">.alignItems</span>(HorizontalAlign.Start)

             }<span class="hljs-selector-class">.height</span>(<span class="hljs-number">100</span>)
             <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
           })
         }



       }<span class="hljs-selector-class">.width</span>("<span class="hljs-number">100%</span>")
      <span class="hljs-selector-class">.height</span>("<span class="hljs-number">100%</span>")
    }
    <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')
    <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
  }
}
</code></pre>
<h4 data-id="heading-9">æœ€åæ€»ç»“</h4>
<p>æˆ‘ä»¬å°è£…äº†æ•°æ®åº“å·¥å…·ç±»å æˆ‘ä»¬å¯¹æ¯”æˆ‘ä»¬å¹³å¸¸è¦å†™ä¸€å †çš„å»ºè¡¨è¯­å¥ è¿˜æœ‰éœ€è¦ç¼–å†™æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥ å’Œæˆ‘ä»¬çš„åˆ é™¤è¯­å¥ ï¼Œæˆ‘ä»¬å¾ˆå¥½å°è£…å’Œ</p>
<p>æ•°æ®åº“è¾…åŠ©å·¥å…·ç±»å°±å¯ä»¥è¿›å‡å°‘æˆ‘ä»¬è°ƒç”¨è€…æ¥ç¼–å†™è¿™éƒ¨åˆ†ç‚¹ï¼Œå½“ç„¶æ•´ä¸ªå·¥å…·ç±»ä¸å®Œå–„ æˆ‘ä»¬å…¶å®å¯ä»¥ç»§ç»­å®Œå–„ è¿›ä¸€æ­¥æŠ½è±¡ ï¼Œå¯ä»¥Â·æŠŠæˆ‘ä»¬çš„</p>
<p>model è½¬æˆmap è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åªéœ€è¦æ“ä½œå¯¹è±¡å­˜å‚¨å’ŒæŸ¥è¯¢è·å– è¿˜æœ‰åˆ é™¤çš„åŠ¨ä½œå³å¯ï¼Œå¦‚æœè§‰å¾—æ–‡ç« è¿˜ä¸é”™éº»çƒ¦ç»™æˆ‘ä¸€é”®ä¸‰è¿è°¢è°¢</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºé¡ºåºè¡¨å®Œæˆé€šè®¯å½•é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7576477793779105832</link>    <guid>https://juejin.cn/post/7576477793779105832</guid>    <pubDate>2025-11-26T02:22:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576477793779105832" data-draft-id="7576556950331359232" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºé¡ºåºè¡¨å®Œæˆé€šè®¯å½•é¡¹ç›®"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T02:22:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰é£63"/> <meta itemprop="url" content="https://juejin.cn/user/1892682130797704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºé¡ºåºè¡¨å®Œæˆé€šè®¯å½•é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1892682130797704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰é£63
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:22:10.000Z" title="Wed Nov 26 2025 02:22:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†é¡ºåºè¡¨çš„åŸºæœ¬åŸç†ä¸å®ç°æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åŸºäºé¡ºåºè¡¨è¿™ä¸€æ•°æ®ç»“æ„ï¼Œå®Œæˆä¸€ä¸ªå®é™…çš„é€šè®¯å½•ç®¡ç†ç³»ç»Ÿé¡¹ç›®ã€‚</p>
<p>ä¸€ã€é€šè®¯å½•é¡¹ç›®çš„è®¾è®¡ä¸å®ç°</p>
<p>ä¸ºæ–¹ä¾¿ç†è§£ä¸å‚è€ƒï¼Œåç»­å°†æä¾›å®Œæ•´çš„ä»£ç ä»“åº“é“¾æ¥ï¼ˆå¦‚ Giteeï¼‰ã€‚</p>
<p>åœ¨é¡ºåºè¡¨åŸºç¡€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>typedef</code>Â å°†Â <code>int</code>Â ç±»å‹é‡å‘½åä¸ºÂ <code>SLDataType</code>ã€‚è€Œåœ¨é€šè®¯å½•é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠÂ <code>SLDataType</code>Â é‡æ–°å®šä¹‰ä¸ºè¡¨ç¤ºè”ç³»äººçš„ç»“æ„ä½“ç±»å‹ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºå¤´æ–‡ä»¶Â <code>contact.h</code>ï¼Œå®šä¹‰é€šè®¯å½•ä¸­éœ€è¦å­˜å‚¨çš„æ•°æ®ç»“æ„ï¼š</p>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// contact.h</span>
typedef struct PersonInfo {
    char name<span class="hljs-selector-attr">[50]</span>;
    char phone<span class="hljs-selector-attr">[20]</span>;
    char <span class="hljs-selector-tag">address</span><span class="hljs-selector-attr">[100]</span>;
    <span class="hljs-comment">// å¯æ ¹æ®éœ€è¦ç»§ç»­æ·»åŠ å…¶ä»–å­—æ®µ</span>
} ContactInfo;
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨é¡ºåºè¡¨çš„å¤´æ–‡ä»¶Â <code>Seqlist.h</code>Â ä¸­ï¼Œå°†åŸæ¥çš„Â <code>int</code>Â ç±»å‹æ›¿æ¢ä¸ºä¸Šé¢å®šä¹‰çš„Â <code>ContactInfo</code>Â ç»“æ„ä½“ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Seqlist.h</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"contact.h"</span></span>
<span class="hljs-keyword">typedef</span> ContactInfo SLDataType;  <span class="hljs-comment">// å°†é¡ºåºè¡¨å…ƒç´ ç±»å‹æ”¹ä¸ºè”ç³»äººä¿¡æ¯</span>
</code></pre>
<p>åŒæ—¶ï¼Œä¸ºäº†æ›´å¥½åœ°ä½“ç°æ¨¡å—åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†é¡ºåºè¡¨ç»“æ„ä½“é‡å‘½åä¸ºÂ <code>Contact</code>ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">SeqList</span> {
    SLDataType* arr;
    <span class="hljs-type">int</span> size;
    <span class="hljs-type">int</span> capacity;
} Contact;
</code></pre>
<p>ä¸‹é¢å¼€å§‹å®ç°é€šè®¯å½•çš„å„é¡¹åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é€šè®¯å½•åˆå§‹åŒ–</strong></li>
</ol>
<p>åœ¨Â <code>contact.h</code>Â ä¸­å£°æ˜åˆå§‹åŒ–å‡½æ•°ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactInit</span><span class="hljs-params">(Contact* pcon)</span></span>;
</code></pre>
<p>åœ¨æµ‹è¯•æ–‡ä»¶Â <code>test.c</code>Â ä¸­è¿›è¡ŒåŠŸèƒ½éªŒè¯ã€‚å®é™…å®ç°æ—¶ï¼Œç›´æ¥è°ƒç”¨é¡ºåºè¡¨ä¸­å·²å°è£…çš„åˆå§‹åŒ–å‡½æ•°å³å¯ï¼š</p>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">ContactInit</span>(Contact* pcon) {
    <span class="hljs-built_in">SLInit</span>(pcon);  <span class="hljs-comment">// å¤ç”¨é¡ºåºè¡¨çš„åˆå§‹åŒ–</span>
}
</code></pre>
<ol start="2">
<li><strong>é€šè®¯å½•é”€æ¯</strong></li>
</ol>
<p>åŒæ ·åœ°ï¼Œé”€æ¯å‡½æ•°ä¹Ÿç›´æ¥å¤ç”¨é¡ºåºè¡¨çš„å®ç°ï¼š</p>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">ContactDestroy</span>(Contact* pcon) {
    <span class="hljs-built_in">SLDestroy</span>(pcon);
}
</code></pre>
<ol start="3">
<li><strong>æ·»åŠ è”ç³»äºº</strong></li>
</ol>
<p>å£°æ˜æ·»åŠ å‡½æ•°ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactAdd</span><span class="hljs-params">(Contact* pcon)</span></span>;
</code></pre>
<p>å®ç°æ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªÂ <code>ContactInfo</code>Â ç»“æ„ä½“å˜é‡ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å„ä¸ªå­—æ®µä¿¡æ¯ï¼Œç„¶åé€šè¿‡é¡ºåºè¡¨çš„å°¾æ’å‡½æ•°å°†å…¶æ·»åŠ åˆ°é€šè®¯å½•ä¸­ï¼š</p>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">ContactAdd</span>(Contact* pcon) {
    ContactInfo info;
    <span class="hljs-built_in">printf</span>("è¯·è¾“å…¥å§“åï¼š");
    <span class="hljs-built_in">scanf</span>("%s", info.name);
    <span class="hljs-built_in">printf</span>("è¯·è¾“å…¥ç”µè¯ï¼š");
    <span class="hljs-built_in">scanf</span>("%s", info.phone);
    <span class="hljs-comment">// å…¶ä»–å­—æ®µçš„è¾“å…¥...</span>
    
    <span class="hljs-built_in">SLPushBack</span>(pcon, info);  <span class="hljs-comment">// å°†è”ç³»äººä¿¡æ¯æ·»åŠ åˆ°é¡ºåºè¡¨æœ«å°¾</span>
}
</code></pre>
<ol start="4">
<li><strong>æ˜¾ç¤ºé€šè®¯å½•</strong></li>
</ol>
<p>å£°æ˜æ˜¾ç¤ºå‡½æ•°ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactShow</span><span class="hljs-params">(<span class="hljs-type">const</span> Contact* pcon)</span></span>;
</code></pre>
<p>å®ç°æ—¶éå†é¡ºåºè¡¨ï¼Œæ‰“å°æ¯ä¸ªè”ç³»äººçš„è¯¦ç»†ä¿¡æ¯ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactShow</span><span class="hljs-params">(<span class="hljs-type">const</span> Contact* pcon)</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%-10s %-15s %-20s\n"</span>, <span class="hljs-string">"å§“å"</span>, <span class="hljs-string">"ç”µè¯"</span>, <span class="hljs-string">"åœ°å€"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; pcon-&gt;size; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%-10s %-15s %-20s\n"</span>, 
               pcon-&gt;arr[i].name, 
               pcon-&gt;arr[i].phone, 
               pcon-&gt;arr[i].address);
    }
}
</code></pre>
<ol start="5">
<li><strong>åˆ é™¤è”ç³»äºº</strong></li>
</ol>
<p>å£°æ˜åˆ é™¤å‡½æ•°ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactDelete</span><span class="hljs-params">(Contact* pcon, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span></span>;
</code></pre>
<p>åˆ é™¤å‰éœ€è¦å…ˆæŸ¥æ‰¾æŒ‡å®šè”ç³»äººæ˜¯å¦å­˜åœ¨ã€‚æˆ‘ä»¬å®ç°ä¸€ä¸ªæŸ¥æ‰¾å‡½æ•°ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ¯”è¾ƒæ¥å®šä½ï¼š</p>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">FindByName</span><span class="hljs-params">(<span class="hljs-type">const</span> Contact* pcon, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; pcon-&gt;size; i++) {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(pcon-&gt;arr[i].name, name) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> i;  <span class="hljs-comment">// æ‰¾åˆ°è¿”å›ä¸‹æ ‡</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;  <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactDelete</span><span class="hljs-params">(Contact* pcon, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span> </span>{
    <span class="hljs-type">int</span> pos = <span class="hljs-built_in">FindByName</span>(pcon, name);
    <span class="hljs-keyword">if</span> (pos != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">SLErase</span>(pcon, pos);  <span class="hljs-comment">// è°ƒç”¨é¡ºåºè¡¨çš„æŒ‡å®šä½ç½®åˆ é™¤</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"åˆ é™¤æˆåŠŸï¼\n"</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°è¯¥è”ç³»äººï¼\n"</span>);
    }
}
</code></pre>
<ol start="6">
<li><strong>æŸ¥æ‰¾ä¸ä¿®æ”¹åŠŸèƒ½</strong></li>
</ol>
<ul>
<li><strong>æŸ¥æ‰¾è”ç³»äºº</strong>ï¼š</li>
</ul>
<p>c</p>
<pre><code class="hljs language-perl" lang="perl">void ContactFind(const Contact* pcon, const char* name) {
    <span class="hljs-keyword">int</span> <span class="hljs-keyword">pos</span> = FindByName(pcon, name);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">pos</span> != -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æ‰¾åˆ°è”ç³»äººï¼š\n"</span>);
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"å§“åï¼š%s\nç”µè¯ï¼š%s\nåœ°å€ï¼š%s\n"</span>, 
               pcon-&gt;arr[<span class="hljs-keyword">pos</span>].name, 
               pcon-&gt;arr[<span class="hljs-keyword">pos</span>].phone, 
               pcon-&gt;arr[<span class="hljs-keyword">pos</span>].address);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°è¯¥è”ç³»äººï¼\n"</span>);
    }
}
</code></pre>
<ul>
<li><strong>ä¿®æ”¹è”ç³»äºº</strong>ï¼š</li>
</ul>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ContactModify</span><span class="hljs-params">(Contact* pcon, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span> </span>{
    <span class="hljs-type">int</span> pos = <span class="hljs-built_in">FindByName</span>(pcon, name);
    <span class="hljs-keyword">if</span> (pos != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯·è¾“å…¥æ–°çš„å§“åï¼š"</span>);
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, pcon-&gt;arr[pos].name);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯·è¾“å…¥æ–°çš„ç”µè¯ï¼š"</span>);
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, pcon-&gt;arr[pos].phone);
        <span class="hljs-comment">// å…¶ä»–å­—æ®µçš„ä¿®æ”¹...</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä¿®æ”¹æˆåŠŸï¼\n"</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°è¯¥è”ç³»äººï¼\n"</span>);
    }
}
</code></pre>
<p>è‡³æ­¤ï¼Œé€šè®¯å½•çš„åŸºæœ¬åŠŸèƒ½å·²å…¨éƒ¨å®ç°ã€‚æœ€åï¼Œå¯ä»¥åœ¨Â <code>test.c</code>Â ä¸­è¿›ä¸€æ­¥å®Œå–„ç”¨æˆ·ç•Œé¢ï¼Œæ·»åŠ èœå•é€‰æ‹©ç­‰åŠŸèƒ½ï¼Œä½¿ç¨‹åºæ›´åŠ å‹å¥½æ˜“ç”¨ã€‚</p>
<p>é™„ï¼šé¡ºåºè¡¨åŸºç¡€ä¸é€šè®¯å½•é¡¹ç›®çš„ä»£ç ä»“åº“é“¾æ¥<br/>
Gitee: [é“¾æ¥åœ°å€]</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æ¢ç©¶è·¨åŸŸè¯·æ±‚åŠå…¶è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576821574428246025</link>    <guid>https://juejin.cn/post/7576821574428246025</guid>    <pubDate>2025-11-26T01:19:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821574428246025" data-draft-id="7576486942835277870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æ¢ç©¶è·¨åŸŸè¯·æ±‚åŠå…¶è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T01:19:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Front_Yue"/> <meta itemprop="url" content="https://juejin.cn/user/424874479992943"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æ¢ç©¶è·¨åŸŸè¯·æ±‚åŠå…¶è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/424874479992943/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Front_Yue
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T01:19:53.000Z" title="Wed Nov 26 2025 01:19:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™å’Œåº”ç”¨ç¨‹åºæ¶Œç°å‡ºæ¥ï¼Œä½†æ˜¯åœ¨è¿™äº›ç½‘ç«™å’Œåº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œæ•°æ®äº¤äº’æ—¶ï¼Œä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå…¶ä¸­æœ€å¸¸è§çš„é—®é¢˜å°±æ˜¯è·¨åŸŸè¯·æ±‚ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢ç©¶è·¨åŸŸè¯·æ±‚çš„å®šä¹‰ã€åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">æ­£æ–‡å†…å®¹</h2>
<h3 data-id="heading-2">ä¸€ã€ä»€ä¹ˆæ˜¯è·¨åŸŸè¯·æ±‚</h3>
<p>è·¨åŸŸè¯·æ±‚æ˜¯æŒ‡åœ¨ä¸€ä¸ªåŸŸåä¸‹çš„ç½‘é¡µè¯·æ±‚å¦ä¸€ä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œè¿™æ ·çš„è¯·æ±‚è¢«ç§°ä¸ºè·¨åŸŸè¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç½‘ç«™ä¸Šç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¦‚æœè¿™ä¸ªè¯·æ±‚çš„ç›®æ ‡åœ°å€å’Œå½“å‰é¡µé¢çš„åœ°å€ä¸åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ï¼Œé‚£ä¹ˆå°±å±äºè·¨åŸŸè¯·æ±‚ã€‚</p>
<h3 data-id="heading-3">äºŒã€ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸè¯·æ±‚</h3>
<p>è·¨åŸŸè¯·æ±‚å‡ºç°çš„åŸå› æ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œå®ƒè¦æ±‚åœ¨åŒä¸€åŸŸåä¸‹çš„ç½‘é¡µæ‰èƒ½ç›¸äº’è®¿é—®å’Œäº¤äº’ï¼Œè€Œä¸åŒåŸŸåä¸‹çš„ç½‘é¡µä¹‹é—´åˆ™ä¸èƒ½ç›´æ¥ç›¸äº’è®¿é—®å’Œäº¤äº’ã€‚åŒæºç­–ç•¥çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢æ¶æ„æ”»å‡»è€…åˆ©ç”¨ä¸€äº›æ¼æ´æ¥è·å–ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">ä¸‰ã€è§£å†³è·¨åŸŸé—®é¢˜çš„æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">1. JSONP</h4>
<p>JSONP æ˜¯ä¸€ç§ç®€å•çš„è·¨åŸŸè¯·æ±‚è§£å†³æ–¹æ¡ˆã€‚å®ƒåˆ©ç”¨
</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªJSONPçš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">jsonp</span>(<span class="hljs-params">url, callback</span>) {

  <span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);

  script.<span class="hljs-property">src</span> = url + <span class="hljs-string">'?callback='</span> + callback;

  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);

}


<span class="hljs-title function_">jsonp</span>(<span class="hljs-string">'http://example.com/api/data'</span>, <span class="hljs-string">'handleData'</span>);


<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params">data</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

}
</code></pre>
<h4 data-id="heading-6">2. CORS</h4>
<p>CORSæ˜¯ä¸€ç§æ›´åŠ å®‰å…¨çš„è·¨åŸŸè¯·æ±‚è§£å†³æ–¹æ¡ˆã€‚å®ƒé€šè¿‡åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®å“åº”å¤´æ¥å®ç°è·¨åŸŸè¯·æ±‚ã€‚å½“æµè§ˆå™¨å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸€äº›ç‰¹æ®Šçš„å­—æ®µï¼Œå‘Šè¯‰æµè§ˆå™¨è¯¥è¯·æ±‚æ˜¯è¢«å…è®¸çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªCORSçš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();

xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://example.com/api/data'</span>);

xhr.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">true</span>;

xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'X-Requested-With'</span>, <span class="hljs-string">'XMLHttpRequest'</span>);

xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

  <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span> &amp;&amp; xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">responseText</span>);

  }

};

xhr.<span class="hljs-title function_">send</span>();
</code></pre>
<h4 data-id="heading-7">3. ä»£ç†æœåŠ¡å™¨</h4>
<p>ä»£ç†æœåŠ¡å™¨æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„è·¨åŸŸè¯·æ±‚è§£å†³æ–¹æ¡ˆã€‚å®ƒçš„åŸç†æ˜¯åœ¨åŒä¸€åŸŸåä¸‹è®¾ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œç„¶åå°†è·¨åŸŸè¯·æ±‚å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ï¼Œç”±ä»£ç†æœåŠ¡å™¨è½¬å‘è¯·æ±‚å¹¶è¿”å›ç»“æœã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);

<span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);

<span class="hljs-keyword">var</span> app = <span class="hljs-title function_">express</span>();


app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) {

  <span class="hljs-keyword">var</span> url = <span class="hljs-string">'http://example.com/api/data'</span>;

  req.<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">request</span>(url)).<span class="hljs-title function_">pipe</span>(res);

});


app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Server is running on port 3000'</span>);

});
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>è·¨åŸŸè¯·æ±‚æ˜¯åœ¨ä¸åŒåŸŸåä¸‹è¿›è¡Œæ•°æ®äº¤äº’æ—¶æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œå®ƒçš„å‡ºç°æ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚è§£å†³è·¨åŸŸé—®é¢˜çš„æ–¹æ¡ˆæœ‰JSONPã€CORSå’Œä»£ç†æœåŠ¡å™¨ç­‰ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“çš„æƒ…å†µé€‰æ‹©é€‚åˆè‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ktor Pipeline æœºåˆ¶æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7576538234273529866</link>    <guid>https://juejin.cn/post/7576538234273529866</guid>    <pubDate>2025-11-26T01:26:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576538234273529866" data-draft-id="7576486942835392558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ktor Pipeline æœºåˆ¶æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-26T01:26:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾ªç¯ä¸æ¯ä¼˜åŒ–ä¸æ­¢"/> <meta itemprop="url" content="https://juejin.cn/user/3499064877398681"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ktor Pipeline æœºåˆ¶æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3499064877398681/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾ªç¯ä¸æ¯ä¼˜åŒ–ä¸æ­¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T01:26:04.000Z" title="Wed Nov 26 2025 01:26:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"># Ktor Pipeline æœºåˆ¶æ·±åº¦è§£æ</h2>
<blockquote>
<p>ğŸ“ æ–‡ä»¶ä½ç½®: <code>ktor-utils/common/src/io/ktor/util/pipeline/Pipeline.kt</code><br/>
ğŸ¯ æ ¸å¿ƒåœ°ä½: Pipeline æ˜¯ Ktor æ¡†æ¶çš„<strong>çµé­‚</strong>ï¼Œç†è§£å®ƒæ˜¯æŒæ¡ Ktor çš„å…³é”®</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ“– ç›®å½•</h3>
<ol>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-pipeline" title="#%E4%BB%80%E4%B9%88%E6%98%AF-pipeline">ä»€ä¹ˆæ˜¯ Pipeline</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5" title="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">æ ¸å¿ƒæ¦‚å¿µ</a></li>
<li><a href="#%E7%B1%BB%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90" title="#%E7%B1%BB%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90">ç±»ç»“æ„åˆ†æ</a></li>
<li><a href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B" title="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B">æ‰§è¡Œæµç¨‹</a></li>
<li><a href="#%E5%85%B3%E9%94%AE%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3" title="#%E5%85%B3%E9%94%AE%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3">å…³é”®æ–¹æ³•è¯¦è§£</a></li>
<li><a href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B" title="#%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B">å®æˆ˜ç¤ºä¾‹</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" title="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">å¸¸è§é—®é¢˜</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Pipeline</h3>
<h4 data-id="heading-3">å®šä¹‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pipeline</span>&lt;<span class="hljs-type">TSubject : Any, TContext : Any</span>&gt;(
    <span class="hljs-keyword">vararg</span> phases: PipelinePhase
)
</code></pre>
<p><strong>Pipelineï¼ˆç®¡é“ï¼‰</strong> æ˜¯ Ktor ä¸­ç”¨äºå¤„ç†å¼‚æ­¥ã€å¯æ‰©å±•è®¡ç®—çš„æ‰§è¡Œæµæ°´çº¿ã€‚å®ƒç±»ä¼¼äº<strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼Œä½†æ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚</p>
<h4 data-id="heading-4">æ ¸å¿ƒç‰¹ç‚¹</h4>
<ul>
<li>âœ… <strong>å¼‚æ­¥æ‰§è¡Œ</strong>: åŸºäº Kotlin åç¨‹ï¼Œæ”¯æŒ suspend å‡½æ•°</li>
<li>âœ… <strong>åˆ†é˜¶æ®µå¤„ç†</strong>: é€šè¿‡ Phase ç»„ç»‡æ‰§è¡Œé¡ºåº</li>
<li>âœ… <strong>å¯æ‰©å±•</strong>: é€šè¿‡ Interceptor åŠ¨æ€æ·»åŠ å¤„ç†é€»è¾‘</li>
<li>âœ… <strong>ç±»å‹å®‰å…¨</strong>: æ³›å‹çº¦æŸç¡®ä¿ç±»å‹å®‰å…¨</li>
<li>âœ… <strong>é«˜æ€§èƒ½</strong>: å†…éƒ¨ä¼˜åŒ–ï¼Œæ”¯æŒå¿«é€Ÿè·¯å¾„ï¼ˆFast Pathï¼‰</li>
</ul>
<h4 data-id="heading-5">åº”ç”¨åœºæ™¯</h4>
<p>åœ¨ Ktor ä¸­ï¼ŒPipeline æ— å¤„ä¸åœ¨ï¼š</p>















































<table><thead><tr><th>Pipeline ç±»å‹</th><th>ç”¨é€”</th><th>Subject</th><th>Context</th></tr></thead><tbody><tr><td><code>ApplicationCallPipeline</code></td><td>æœåŠ¡ç«¯è¯·æ±‚å¤„ç†</td><td><code>Unit</code></td><td><code>PipelineCall</code></td></tr><tr><td><code>HttpRequestPipeline</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚æ„å»º</td><td><code>Any</code></td><td><code>HttpRequestBuilder</code></td></tr><tr><td><code>HttpSendPipeline</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚å‘é€</td><td><code>Any</code></td><td><code>HttpRequestBuilder</code></td></tr><tr><td><code>HttpResponsePipeline</code></td><td>å®¢æˆ·ç«¯å“åº”å¤„ç†</td><td><code>HttpResponseContainer</code></td><td><code>HttpClientCall</code></td></tr><tr><td><code>ApplicationReceivePipeline</code></td><td>æœåŠ¡ç«¯æ¥æ”¶æ•°æ®</td><td><code>Any</code></td><td><code>PipelineCall</code></td></tr><tr><td><code>ApplicationSendPipeline</code></td><td>æœåŠ¡ç«¯å‘é€å“åº”</td><td><code>Any</code></td><td><code>PipelineCall</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-7">1. æ³›å‹å‚æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">Pipeline&lt;TSubject : Any, TContext : Any&gt;
</code></pre>
<ul>
<li><strong>TSubject</strong>: åœ¨ç®¡é“ä¸­æµåŠ¨çš„<strong>ä¸»ä½“å¯¹è±¡</strong>
<ul>
<li>ä¾‹å¦‚ï¼šHTTP è¯·æ±‚ä½“ã€å“åº”æ•°æ®ç­‰</li>
<li>å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­è¢«ä¿®æ”¹æˆ–æ›¿æ¢</li>
</ul>
</li>
<li><strong>TContext</strong>: ç®¡é“æ‰§è¡Œçš„<strong>ä¸Šä¸‹æ–‡</strong>
<ul>
<li>ä¾‹å¦‚ï¼šApplicationCallã€HttpRequestBuilder</li>
<li>æä¾›æ‰§è¡Œç¯å¢ƒå’Œè¾…åŠ©ä¿¡æ¯</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">2. Phaseï¼ˆé˜¶æ®µï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PipelinePhase</span>(<span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> name: String)
</code></pre>
<p><strong>Phase</strong> å®šä¹‰äº†ç®¡é“çš„æ‰§è¡Œé˜¶æ®µï¼Œç”¨äºç»„ç»‡æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºã€‚</p>
<h5 data-id="heading-9">ç¤ºä¾‹ï¼šApplicationCallPipeline çš„ 5 ä¸ªé˜¶æ®µ</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> ApplicationPhase {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> Setup: PipelinePhase = PipelinePhase(<span class="hljs-string">"Setup"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> Monitoring: PipelinePhase = PipelinePhase(<span class="hljs-string">"Monitoring"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> Plugins: PipelinePhase = PipelinePhase(<span class="hljs-string">"Plugins"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> Call: PipelinePhase = PipelinePhase(<span class="hljs-string">"Call"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> Fallback: PipelinePhase = PipelinePhase(<span class="hljs-string">"Fallback"</span>)
}
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong>: Setup â†’ Monitoring â†’ Plugins â†’ Call â†’ Fallback</p>
<h4 data-id="heading-10">3. Interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">typealias</span> PipelineInterceptor&lt;TSubject, TContext&gt; =
    <span class="hljs-keyword">suspend</span> PipelineContext&lt;TSubject, TContext&gt;.(TSubject) -&gt; <span class="hljs-built_in">Unit</span>
</code></pre>
<p><strong>Interceptor</strong> æ˜¯åœ¨ç‰¹å®š Phase æ‰§è¡Œçš„å¤„ç†é€»è¾‘ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>suspend æ‰©å±•å‡½æ•°</strong>ã€‚</p>
<h5 data-id="heading-11">ç‰¹ç‚¹ï¼š</h5>
<ul>
<li>æ¥æ”¶ <code>TSubject</code> ä½œä¸ºå‚æ•°</li>
<li>åœ¨ <code>PipelineContext</code> ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</li>
<li>å¯ä»¥è°ƒç”¨ <code>proceed()</code> ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</li>
<li>å¯ä»¥è°ƒç”¨ <code>finish()</code> ç»ˆæ­¢ç®¡é“æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-12">4. PipelineContextï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PipelineContext</span>&lt;<span class="hljs-type">TSubject : Any, TContext : Any</span>&gt;(
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> context: TContext
) : CoroutineScope {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">var</span> subject: TSubject
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">proceed</span><span class="hljs-params">()</span></span>: TSubject
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">proceedWith</span><span class="hljs-params">(subject: <span class="hljs-type">TSubject</span>)</span></span>: TSubject
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span></span>
}
</code></pre>
<p><strong>PipelineContext</strong> æ˜¯æ‹¦æˆªå™¨æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œæä¾›ï¼š</p>
<ul>
<li><code>context</code>: ç®¡é“ä¸Šä¸‹æ–‡ï¼ˆTContextï¼‰</li>
<li><code>subject</code>: å½“å‰å¤„ç†çš„ä¸»ä½“å¯¹è±¡ï¼ˆå¯ä¿®æ”¹ï¼‰</li>
<li><code>proceed()</code>: ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</li>
<li><code>proceedWith(subject)</code>: ç”¨æ–°çš„ subject ç»§ç»­æ‰§è¡Œ</li>
<li><code>finish()</code>: ç»ˆæ­¢ç®¡é“æ‰§è¡Œ</li>
</ul>
<hr/>
<h3 data-id="heading-13">ç±»ç»“æ„åˆ†æ</h3>
<h4 data-id="heading-14">æ ¸å¿ƒå±æ€§</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pipeline</span>&lt;<span class="hljs-type">TSubject : Any, TContext : Any</span>&gt; {
    <span class="hljs-comment">// 1. å±æ€§å­˜å‚¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> attributes: Attributes = Attributes(concurrent = <span class="hljs-literal">true</span>)
    
    <span class="hljs-comment">// 2. å¼€å‘æ¨¡å¼æ ‡å¿—</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">val</span> developmentMode: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
    
    <span class="hljs-comment">// 3. Phase åˆ—è¡¨ï¼ˆå¯èƒ½æ˜¯ PipelinePhase æˆ– PhaseContentï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> phasesRaw: MutableList&lt;Any&gt; = mutableListOf(*phases)
    
    <span class="hljs-comment">// 4. æ‹¦æˆªå™¨æ•°é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptorsQuantity = <span class="hljs-number">0</span>
    
    <span class="hljs-comment">// 5. ç¼“å­˜çš„æ‹¦æˆªå™¨åˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptors: List&lt;PipelineInterceptor&lt;TSubject, TContext&gt;&gt;? <span class="hljs-keyword">by</span> atomic(<span class="hljs-literal">null</span>)
    
    <span class="hljs-comment">// 6. å…±äº«æ ‡å¿—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptorsListShared: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptorsListSharedPhase: PipelinePhase? = <span class="hljs-literal">null</span>
}
</code></pre>
<h4 data-id="heading-15">å…³é”®è®¾è®¡</h4>
<h5 data-id="heading-16">1. phasesRaw çš„æ··åˆå­˜å‚¨</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> phasesRaw: MutableList&lt;Any&gt;
</code></pre>
<p><code>phasesRaw</code> å¯ä»¥å­˜å‚¨ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>PipelinePhase</strong>: ç©ºé˜¶æ®µï¼ˆæ²¡æœ‰æ‹¦æˆªå™¨ï¼‰</li>
<li><strong>PhaseContent</strong>: åŒ…å«æ‹¦æˆªå™¨çš„é˜¶æ®µ</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>: å»¶è¿Ÿåˆ›å»º PhaseContentï¼ŒèŠ‚çœå†…å­˜</p>
<h5 data-id="heading-17">2. æ‹¦æˆªå™¨ç¼“å­˜æœºåˆ¶</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptors: List&lt;PipelineInterceptor&lt;TSubject, TContext&gt;&gt;? <span class="hljs-keyword">by</span> atomic(<span class="hljs-literal">null</span>)
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>atomic</code> ä¿è¯çº¿ç¨‹å®‰å…¨</li>
<li>ç¼“å­˜æ‰€æœ‰é˜¶æ®µçš„æ‹¦æˆªå™¨åˆ—è¡¨ï¼Œé¿å…é‡å¤æ„å»º</li>
<li>å½“æ·»åŠ æ–°æ‹¦æˆªå™¨æ—¶ï¼Œç¼“å­˜å¤±æ•ˆï¼ˆ<code>resetInterceptorsList()</code>ï¼‰</li>
</ul>
<h5 data-id="heading-18">3. å…±äº«æœºåˆ¶</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptorsListShared: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
</code></pre>
<ul>
<li>å¤šä¸ª Pipeline å¯ä»¥å…±äº«æ‹¦æˆªå™¨åˆ—è¡¨</li>
<li>å†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰ç­–ç•¥</li>
<li>å‡å°‘å†…å­˜å ç”¨å’Œå¤åˆ¶å¼€é”€</li>
</ul>
<hr/>
<h3 data-id="heading-19">æ‰§è¡Œæµç¨‹</h3>
<h4 data-id="heading-20">1. æ‰§è¡Œå…¥å£</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">(context: <span class="hljs-type">TContext</span>, subject: <span class="hljs-type">TSubject</span>)</span></span>: TSubject =
    createContext(context, subject, coroutineContext).execute(subject)
</code></pre>
<p><strong>æµç¨‹</strong>:</p>
<ol>
<li>åˆ›å»º <code>PipelineContext</code></li>
<li>è°ƒç”¨ <code>PipelineContext.execute(subject)</code></li>
<li>è¿”å›æœ€ç»ˆçš„ subject</li>
</ol>
<h4 data-id="heading-21">2. åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createContext</span><span class="hljs-params">(
    context: <span class="hljs-type">TContext</span>,
    subject: <span class="hljs-type">TSubject</span>,
    coroutineContext: <span class="hljs-type">CoroutineContext</span>
)</span></span>: PipelineContext&lt;TSubject, TContext&gt; =
    pipelineContextFor(context, sharedInterceptorsList(), subject, coroutineContext, developmentMode)
</code></pre>
<p>æ ¹æ® <code>developmentMode</code> é€‰æ‹©ä¸åŒçš„å®ç°ï¼š</p>
<ul>
<li><strong>ç”Ÿäº§æ¨¡å¼</strong>: <code>SuspendFunctionGun</code> (é«˜æ€§èƒ½)</li>
<li><strong>å¼€å‘æ¨¡å¼</strong>: <code>DebugPipelineContext</code> (è¯¦ç»†å †æ ˆ)</li>
</ul>
<h4 data-id="heading-22">3. æ‹¦æˆªå™¨æ‰§è¡Œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœ¨ PipelineContext ä¸­</span>
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">(initial: <span class="hljs-type">TSubject</span>)</span></span>: TSubject
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong>:</p>
<pre><code class="hljs language-scss" lang="scss">Phase1<span class="hljs-selector-class">.Interceptor1</span> â†’ <span class="hljs-built_in">proceed</span>() â†’
Phase1<span class="hljs-selector-class">.Interceptor2</span> â†’ <span class="hljs-built_in">proceed</span>() â†’
Phase2<span class="hljs-selector-class">.Interceptor1</span> â†’ <span class="hljs-built_in">proceed</span>() â†’
Phase2<span class="hljs-selector-class">.Interceptor2</span> â†’ <span class="hljs-built_in">proceed</span>() â†’
...
</code></pre>
<h4 data-id="heading-23">4. æµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Pipeline<span class="hljs-selector-class">.execute</span>()                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              <span class="hljs-built_in">createContext</span>() åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡                   â”‚
â”‚  - è·å–æ‰€æœ‰æ‹¦æˆªå™¨åˆ—è¡¨ (sharedInterceptorsList)               â”‚
â”‚  - åˆ›å»º PipelineContext (SuspendFunctionGun/DebugContext)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PipelineContext<span class="hljs-selector-class">.execute</span>(subject)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Phase <span class="hljs-number">1</span>: Setup             â”‚
        â”‚  â”œâ”€ Interceptor <span class="hljs-number">1</span>           â”‚
        â”‚  â”‚   â””â”€ <span class="hljs-built_in">proceed</span>()            â”‚
        â”‚  â””â”€ Interceptor <span class="hljs-number">2</span>           â”‚
        â”‚      â””â”€ <span class="hljs-built_in">proceed</span>()            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Phase <span class="hljs-number">2</span>: Monitoring        â”‚
        â”‚  â”œâ”€ Interceptor <span class="hljs-number">1</span>           â”‚
        â”‚  â”‚   â””â”€ <span class="hljs-built_in">proceed</span>()            â”‚
        â”‚  â””â”€ Interceptor <span class="hljs-number">2</span>           â”‚
        â”‚      â””â”€ <span class="hljs-built_in">proceed</span>()            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                    ...
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Phase N: Fallback          â”‚
        â”‚  â””â”€ Interceptor <span class="hljs-number">1</span>           â”‚
        â”‚      â””â”€ <span class="hljs-built_in">finish</span>()             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              è¿”å›æœ€ç»ˆ subject
</code></pre>
<hr/>
<h3 data-id="heading-24">å…³é”®æ–¹æ³•è¯¦è§£</h3>
<h4 data-id="heading-25">1. intercept() - æ³¨å†Œæ‹¦æˆªå™¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(phase: <span class="hljs-type">PipelinePhase</span>, block: <span class="hljs-type">PipelineInterceptor</span>&lt;<span class="hljs-type">TSubject</span>, TContext&gt;)</span></span> {
    <span class="hljs-keyword">val</span> phaseContent = findPhase(phase)
        ?: <span class="hljs-keyword">throw</span> InvalidPhaseException(<span class="hljs-string">"Phase <span class="hljs-variable">$phase</span> was not registered for this pipeline"</span>)

    <span class="hljs-keyword">if</span> (tryAddToPhaseFastPath(phase, block)) {
        interceptorsQuantity++
        <span class="hljs-keyword">return</span>
    }

    phaseContent.addInterceptor(block)
    interceptorsQuantity++
    resetInterceptorsList()

    afterIntercepted()
}
</code></pre>
<p><strong>æµç¨‹</strong>:</p>
<ol>
<li>æŸ¥æ‰¾ Phase å¯¹åº”çš„ PhaseContent</li>
<li>å°è¯•å¿«é€Ÿè·¯å¾„æ·»åŠ ï¼ˆFast Pathï¼‰</li>
<li>å¦‚æœå¤±è´¥ï¼Œæ·»åŠ åˆ° PhaseContent</li>
<li>å¢åŠ æ‹¦æˆªå™¨è®¡æ•°</li>
<li>é‡ç½®ç¼“å­˜</li>
<li>è°ƒç”¨ <code>afterIntercepted()</code> é’©å­</li>
</ol>
<p><strong>å¿«é€Ÿè·¯å¾„æ¡ä»¶</strong>:</p>
<ul>
<li>æ‹¦æˆªå™¨åˆ—è¡¨æœªå…±äº«</li>
<li>æ·»åŠ åˆ°æœ€åä¸€ä¸ª Phase</li>
<li>æˆ–æ·»åŠ åˆ°å½“å‰å…±äº«çš„ Phase</li>
</ul>
<h4 data-id="heading-26">2. addPhase() - æ·»åŠ é˜¶æ®µ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addPhase</span><span class="hljs-params">(phase: <span class="hljs-type">PipelinePhase</span>)</span></span> {
    <span class="hljs-keyword">if</span> (hasPhase(phase)) {
        <span class="hljs-keyword">return</span>
    }
    phasesRaw.add(phase)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>:</p>
<ul>
<li>æ·»åŠ åˆ°æœ«å°¾</li>
<li>è‡ªåŠ¨å»é‡ï¼ˆå¦‚æœå·²å­˜åœ¨åˆ™å¿½ç•¥ï¼‰</li>
</ul>
<h4 data-id="heading-27">3. insertPhaseAfter() - åœ¨æŒ‡å®šé˜¶æ®µåæ’å…¥</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertPhaseAfter</span><span class="hljs-params">(reference: <span class="hljs-type">PipelinePhase</span>, phase: <span class="hljs-type">PipelinePhase</span>)</span></span> {
    <span class="hljs-keyword">if</span> (hasPhase(phase)) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">val</span> index = findPhaseIndex(reference)
    <span class="hljs-keyword">if</span> (index == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">throw</span> InvalidPhaseException(<span class="hljs-string">"Phase <span class="hljs-variable">$reference</span> was not registered for this pipeline"</span>)
    }

    <span class="hljs-comment">// æ’å…¥åˆ°æœ€åä¸€ä¸ª Relation.After(reference) çš„é˜¶æ®µä¹‹å</span>
    <span class="hljs-keyword">var</span> lastRelatedPhaseIndex = index
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> index + <span class="hljs-number">1.</span>.phasesRaw.lastIndex) {
        <span class="hljs-keyword">val</span> relation = (phasesRaw[i] <span class="hljs-keyword">as</span>? PhaseContent&lt;*, *&gt;)?.relation ?: <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">val</span> relatedTo = (relation <span class="hljs-keyword">as</span>? PipelinePhaseRelation.After)?.relativeTo ?: <span class="hljs-keyword">continue</span>
        lastRelatedPhaseIndex = <span class="hljs-keyword">if</span> (relatedTo == reference) i <span class="hljs-keyword">else</span> lastRelatedPhaseIndex
    }

    phasesRaw.add(
        lastRelatedPhaseIndex + <span class="hljs-number">1</span>,
        PhaseContent&lt;TSubject, TContext&gt;(phase, PipelinePhaseRelation.After(reference))
    )
}
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> pipeline = Pipeline&lt;String, <span class="hljs-built_in">Unit</span>&gt;(PhaseA)
pipeline.insertPhaseAfter(PhaseA, PhaseB)
pipeline.insertPhaseAfter(PhaseA, PhaseC)
<span class="hljs-comment">// ç»“æœ: [PhaseA, PhaseB, PhaseC]</span>
</code></pre>
<h4 data-id="heading-28">4. insertPhaseBefore() - åœ¨æŒ‡å®šé˜¶æ®µå‰æ’å…¥</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertPhaseBefore</span><span class="hljs-params">(reference: <span class="hljs-type">PipelinePhase</span>, phase: <span class="hljs-type">PipelinePhase</span>)</span></span> {
    <span class="hljs-keyword">if</span> (hasPhase(phase)) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">val</span> index = findPhaseIndex(reference)
    <span class="hljs-keyword">if</span> (index == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">throw</span> InvalidPhaseException(<span class="hljs-string">"Phase <span class="hljs-variable">$reference</span> was not registered for this pipeline"</span>)
    }

    phasesRaw.add(index, PhaseContent&lt;TSubject, TContext&gt;(phase, PipelinePhaseRelation.Before(reference)))
}
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> pipeline = Pipeline&lt;String, <span class="hljs-built_in">Unit</span>&gt;(PhaseC)
pipeline.insertPhaseBefore(PhaseC, PhaseA)
pipeline.insertPhaseBefore(PhaseC, PhaseB)
<span class="hljs-comment">// ç»“æœ: [PhaseA, PhaseB, PhaseC]</span>
</code></pre>
<h4 data-id="heading-29">5. merge() - åˆå¹¶ç®¡é“</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">merge</span><span class="hljs-params">(from: <span class="hljs-type">Pipeline</span>&lt;<span class="hljs-type">TSubject</span>, TContext&gt;)</span></span> {
    <span class="hljs-keyword">if</span> (fastPathMerge(from)) {
        <span class="hljs-keyword">return</span>
    }

    mergePhases(from)
    mergeInterceptors(from)
}
</code></pre>
<p><strong>ç”¨é€”</strong>: å°†å¦ä¸€ä¸ª Pipeline çš„ Phase å’Œ Interceptor åˆå¹¶åˆ°å½“å‰ Pipeline</p>
<p><strong>åº”ç”¨åœºæ™¯</strong>:</p>
<ul>
<li>è·¯ç”±ç»§æ‰¿çˆ¶è·¯ç”±çš„æ‹¦æˆªå™¨</li>
<li>æ’ä»¶å®‰è£…æ—¶åˆå¹¶ç®¡é“</li>
</ul>
<p><strong>å¿«é€Ÿè·¯å¾„</strong>: å¦‚æœå½“å‰ Pipeline ä¸ºç©ºï¼Œç›´æ¥å¤åˆ¶</p>
<h4 data-id="heading-30">6. execute() - æ‰§è¡Œç®¡é“</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">(context: <span class="hljs-type">TContext</span>, subject: <span class="hljs-type">TSubject</span>)</span></span>: TSubject =
    createContext(context, subject, coroutineContext).execute(subject)
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>:</p>
<ol>
<li>åˆ›å»º <code>PipelineContext</code></li>
<li>è·å–æ‰€æœ‰æ‹¦æˆªå™¨ï¼ˆç¼“å­˜æˆ–æ„å»ºï¼‰</li>
<li>æŒ‰é¡ºåºæ‰§è¡Œæ‹¦æˆªå™¨</li>
<li>è¿”å›æœ€ç»ˆçš„ subject</li>
</ol>
<hr/>
<h3 data-id="heading-31">è®¾è®¡æ¨¡å¼</h3>
<h4 data-id="heading-32">1. è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility)</h4>
<p>Pipeline æ˜¯è´£ä»»é“¾æ¨¡å¼çš„å˜ä½“ï¼š</p>
<ul>
<li><strong>Phase</strong>: è´£ä»»é“¾çš„åˆ†ç»„</li>
<li><strong>Interceptor</strong>: è´£ä»»é“¾çš„èŠ‚ç‚¹</li>
<li><strong>proceed()</strong>: ä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li>
</ul>
<p><strong>ä¸ä¼ ç»Ÿè´£ä»»é“¾çš„åŒºåˆ«</strong>:</p>
<ul>
<li>æ”¯æŒå¼‚æ­¥ï¼ˆåç¨‹ï¼‰</li>
<li>æ”¯æŒä¿®æ”¹ä¼ é€’çš„å¯¹è±¡ï¼ˆsubjectï¼‰</li>
<li>æ”¯æŒåˆ†é˜¶æ®µç»„ç»‡</li>
</ul>
<h4 data-id="heading-33">2. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pipeline</span>&lt;<span class="hljs-type">TSubject : Any, TContext : Any</span>&gt; {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">afterIntercepted</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å­ç±»å¯ä»¥é‡å†™</span>
    }
}
</code></pre>
<p>å­ç±»å¯ä»¥é‡å†™ <code>afterIntercepted()</code> æ¥è‡ªå®šä¹‰è¡Œä¸ºã€‚</p>
<h4 data-id="heading-34">3. ç­–ç•¥æ¨¡å¼ (Strategy)</h4>
<p>ä¸åŒçš„ <code>PipelineContext</code> å®ç°ï¼š</p>
<ul>
<li><code>SuspendFunctionGun</code>: é«˜æ€§èƒ½ç­–ç•¥</li>
<li><code>DebugPipelineContext</code>: è°ƒè¯•ç­–ç•¥</li>
</ul>
<h4 data-id="heading-35">4. äº«å…ƒæ¨¡å¼ (Flyweight)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interceptorsListShared: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
</code></pre>
<p>å¤šä¸ª Pipeline å…±äº«æ‹¦æˆªå™¨åˆ—è¡¨ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚</p>
<h4 data-id="heading-36">5. å†™æ—¶å¤åˆ¶ (Copy-on-Write)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyInterceptors</span><span class="hljs-params">()</span></span> {
    interceptors = copiedInterceptors()
    shared = <span class="hljs-literal">false</span>
}
</code></pre>
<p>åªæœ‰åœ¨ä¿®æ”¹æ—¶æ‰å¤åˆ¶ï¼Œè¯»å–æ—¶å…±äº«ã€‚</p>
<hr/>
<h3 data-id="heading-37">å®æˆ˜ç¤ºä¾‹</h3>
<h4 data-id="heading-38">ç¤ºä¾‹ 1: åˆ›å»ºç®€å•çš„ Pipeline</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰ Phase</span>
<span class="hljs-keyword">val</span> Phase1 = PipelinePhase(<span class="hljs-string">"Phase1"</span>)
<span class="hljs-keyword">val</span> Phase2 = PipelinePhase(<span class="hljs-string">"Phase2"</span>)

<span class="hljs-comment">// åˆ›å»º Pipeline</span>
<span class="hljs-keyword">val</span> pipeline = Pipeline&lt;String, <span class="hljs-built_in">Unit</span>&gt;(Phase1, Phase2)

<span class="hljs-comment">// æ·»åŠ æ‹¦æˆªå™¨</span>
pipeline.intercept(Phase1) { subject -&gt;
    println(<span class="hljs-string">"Phase1: å¤„ç† <span class="hljs-variable">$subject</span>"</span>)
    proceed() <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span>
}

pipeline.intercept(Phase2) { subject -&gt;
    println(<span class="hljs-string">"Phase2: å¤„ç† <span class="hljs-variable">$subject</span>"</span>)
    <span class="hljs-keyword">val</span> newSubject = subject.uppercase()
    proceedWith(newSubject) <span class="hljs-comment">// ç”¨æ–°çš„ subject ç»§ç»­</span>
}

<span class="hljs-comment">// æ‰§è¡Œ</span>
runBlocking {
    <span class="hljs-keyword">val</span> result = pipeline.execute(<span class="hljs-built_in">Unit</span>, <span class="hljs-string">"hello"</span>)
    println(<span class="hljs-string">"ç»“æœ: <span class="hljs-variable">$result</span>"</span>) <span class="hljs-comment">// è¾“å‡º: HELLO</span>
}
</code></pre>
<p><strong>è¾“å‡º</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Phase1: å¤„ç† hello</span>
<span class="hljs-section">Phase2: å¤„ç† hello</span>
<span class="hljs-section">ç»“æœ: HELLO</span>
</code></pre>
<h4 data-id="heading-39">ç¤ºä¾‹ 2: ä¿®æ”¹ Subject</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span>(<span class="hljs-keyword">var</span> url: String, <span class="hljs-keyword">var</span> headers: MutableMap&lt;String, String&gt; = mutableMapOf())

<span class="hljs-keyword">val</span> pipeline = Pipeline&lt;Request, <span class="hljs-built_in">Unit</span>&gt;(Phase1, Phase2)

pipeline.intercept(Phase1) { request -&gt;
    println(<span class="hljs-string">"æ·»åŠ è®¤è¯å¤´"</span>)
    request.headers[<span class="hljs-string">"Authorization"</span>] = <span class="hljs-string">"Bearer token123"</span>
    proceed()
}

pipeline.intercept(Phase2) { request -&gt;
    println(<span class="hljs-string">"æ·»åŠ  User-Agent"</span>)
    request.headers[<span class="hljs-string">"User-Agent"</span>] = <span class="hljs-string">"Ktor Client"</span>
    proceed()
}

runBlocking {
    <span class="hljs-keyword">val</span> request = Request(<span class="hljs-string">"https://api.example.com"</span>)
    <span class="hljs-keyword">val</span> result = pipeline.execute(<span class="hljs-built_in">Unit</span>, request)
    println(<span class="hljs-string">"æœ€ç»ˆè¯·æ±‚: <span class="hljs-variable">$result</span>"</span>)
}
</code></pre>
<p><strong>è¾“å‡º</strong>:</p>
<pre><code class="hljs language-sql" lang="sql">æ·»åŠ è®¤è¯å¤´
æ·»åŠ  <span class="hljs-keyword">User</span><span class="hljs-operator">-</span>Agent
æœ€ç»ˆè¯·æ±‚: Request(url<span class="hljs-operator">=</span>https:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>api.example.com, headers<span class="hljs-operator">=</span>{<span class="hljs-keyword">Authorization</span><span class="hljs-operator">=</span>Bearer token123, <span class="hljs-keyword">User</span><span class="hljs-operator">-</span>Agent<span class="hljs-operator">=</span>Ktor Client})
</code></pre>
<h4 data-id="heading-40">ç¤ºä¾‹ 3: æå‰ç»ˆæ­¢</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">pipeline.intercept(Phase1) { subject -&gt;
    <span class="hljs-keyword">if</span> (subject == <span class="hljs-string">"skip"</span>) {
        println(<span class="hljs-string">"è·³è¿‡åç»­å¤„ç†"</span>)
        finish() <span class="hljs-comment">// ç»ˆæ­¢ç®¡é“</span>
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@intercept</span>
    }
    proceed()
}

pipeline.intercept(Phase2) { subject -&gt;
    println(<span class="hljs-string">"Phase2: è¿™ä¸ä¼šè¢«æ‰§è¡Œ"</span>)
    proceed()
}

runBlocking {
    pipeline.execute(<span class="hljs-built_in">Unit</span>, <span class="hljs-string">"skip"</span>)
}
</code></pre>
<p><strong>è¾“å‡º</strong>:</p>
<pre><code class="hljs">è·³è¿‡åç»­å¤„ç†
</code></pre>
<h4 data-id="heading-41">ç¤ºä¾‹ 4: å¼‚å¸¸å¤„ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">pipeline.intercept(Phase1) { subject -&gt;
    <span class="hljs-keyword">try</span> {
        proceed()
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        println(<span class="hljs-string">"æ•è·å¼‚å¸¸: <span class="hljs-subst">${e.message}</span>"</span>)
        <span class="hljs-comment">// å¯ä»¥é€‰æ‹©ç»§ç»­æˆ–ç»ˆæ­¢</span>
        finish()
    }
}

pipeline.intercept(Phase2) { subject -&gt;
    <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"å‡ºé”™äº†ï¼"</span>)
}

runBlocking {
    pipeline.execute(<span class="hljs-built_in">Unit</span>, <span class="hljs-string">"test"</span>)
}
</code></pre>
<h4 data-id="heading-42">ç¤ºä¾‹ 5: å®ç°æ—¥å¿—æ’ä»¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingPlugin</span> {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> : ApplicationPlugin&lt;ApplicationCallPipeline, Configuration, LoggingPlugin&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> key = AttributeKey&lt;LoggingPlugin&gt;(<span class="hljs-string">"LoggingPlugin"</span>)

        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">install</span><span class="hljs-params">(
            pipeline: <span class="hljs-type">ApplicationCallPipeline</span>,
            configure: <span class="hljs-type">Configuration</span>.() -&gt; <span class="hljs-type">Unit</span>
        )</span></span>: LoggingPlugin {
            <span class="hljs-keyword">val</span> plugin = LoggingPlugin()

            pipeline.intercept(ApplicationCallPipeline.Monitoring) {
                <span class="hljs-keyword">val</span> start = System.currentTimeMillis()
                println(<span class="hljs-string">"è¯·æ±‚å¼€å§‹: <span class="hljs-subst">${call.request.uri}</span>"</span>)

                <span class="hljs-keyword">try</span> {
                    proceed()
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-keyword">val</span> duration = System.currentTimeMillis() - start
                    println(<span class="hljs-string">"è¯·æ±‚å®Œæˆ: <span class="hljs-subst">${call.request.uri}</span>, è€—æ—¶: <span class="hljs-subst">${duration}</span>ms"</span>)
                }
            }

            <span class="hljs-keyword">return</span> plugin
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Configuration</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-43">æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-44">1. å¿«é€Ÿè·¯å¾„ (Fast Path)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">tryAddToPhaseFastPath</span><span class="hljs-params">(
    phase: <span class="hljs-type">PipelinePhase</span>,
    block: <span class="hljs-type">PipelineInterceptor</span>&lt;<span class="hljs-type">TSubject</span>, TContext&gt;
)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> currentInterceptors = interceptors
    <span class="hljs-keyword">if</span> (phasesRaw.isEmpty() || currentInterceptors == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">if</span> (interceptorsListShared || currentInterceptors !<span class="hljs-keyword">is</span> MutableList) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">if</span> (interceptorsListSharedPhase == phase) {
        currentInterceptors.add(block)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">if</span> (phase == phasesRaw.last() || findPhaseIndex(phase) == phasesRaw.lastIndex) {
        findPhase(phase)!!.addInterceptor(block)
        currentInterceptors.add(block)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–ç‚¹</strong>:</p>
<ul>
<li>é¿å…é‡å»ºæ‹¦æˆªå™¨åˆ—è¡¨</li>
<li>ç›´æ¥æ·»åŠ åˆ°ç°æœ‰åˆ—è¡¨</li>
<li>é€‚ç”¨äºæœ€å¸¸è§çš„åœºæ™¯ï¼ˆæ·»åŠ åˆ°æœ€åï¼‰</li>
</ul>
<h4 data-id="heading-45">2. æ‹¦æˆªå™¨ç¼“å­˜</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cacheInterceptors</span><span class="hljs-params">()</span></span>: List&lt;PipelineInterceptor&lt;TSubject, TContext&gt;&gt; {
    <span class="hljs-keyword">val</span> interceptorsQuantity = interceptorsQuantity
    <span class="hljs-keyword">if</span> (interceptorsQuantity == <span class="hljs-number">0</span>) {
        notSharedInterceptorsList(emptyList())
        <span class="hljs-keyword">return</span> emptyList()
    }

    <span class="hljs-comment">// ç‰¹æ®Šå¤„ç†åªæœ‰ä¸€ä¸ªæ‹¦æˆªå™¨çš„æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (interceptorsQuantity == <span class="hljs-number">1</span>) {
        <span class="hljs-comment">// ... ç›´æ¥è¿”å›ï¼Œé¿å…åˆ›å»ºæ–°åˆ—è¡¨</span>
    }

    <span class="hljs-comment">// æ„å»ºå®Œæ•´åˆ—è¡¨</span>
    <span class="hljs-keyword">val</span> destination: MutableList&lt;PipelineInterceptor&lt;TSubject, TContext&gt;&gt; = mutableListOf()
    <span class="hljs-keyword">for</span> (phaseIndex <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.phases.lastIndex) {
        <span class="hljs-keyword">val</span> phase = phases[phaseIndex] <span class="hljs-keyword">as</span>? PhaseContent&lt;TSubject, TContext&gt; ?: <span class="hljs-keyword">continue</span>
        phase.addTo(destination)
    }

    notSharedInterceptorsList(destination)
    <span class="hljs-keyword">return</span> destination
}
</code></pre>
<p><strong>ä¼˜åŒ–ç‚¹</strong>:</p>
<ul>
<li>ç¼“å­˜æ‹¦æˆªå™¨åˆ—è¡¨ï¼Œé¿å…é‡å¤æ„å»º</li>
<li>ç‰¹æ®Šå¤„ç†ç©ºåˆ—è¡¨å’Œå•ä¸ªæ‹¦æˆªå™¨</li>
<li>ä½¿ç”¨ <code>ArrayList.ensureCapacity</code> é¢„åˆ†é…å®¹é‡</li>
</ul>
<h4 data-id="heading-46">3. å…±äº«æœºåˆ¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setInterceptorsListFromAnotherPipeline</span><span class="hljs-params">(pipeline: <span class="hljs-type">Pipeline</span>&lt;<span class="hljs-type">TSubject</span>, TContext&gt;)</span></span> {
    interceptors = pipeline.sharedInterceptorsList()
    interceptorsListShared = <span class="hljs-literal">true</span>
    interceptorsListSharedPhase = <span class="hljs-literal">null</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–ç‚¹</strong>:</p>
<ul>
<li>å¤šä¸ª Pipeline å…±äº«æ‹¦æˆªå™¨åˆ—è¡¨</li>
<li>å‡å°‘å†…å­˜å ç”¨</li>
<li>å†™æ—¶å¤åˆ¶ç­–ç•¥</li>
</ul>
<h4 data-id="heading-47">4. SuspendFunctionGun</h4>
<p>ç”Ÿäº§æ¨¡å¼ä¸‹ä½¿ç”¨ <code>SuspendFunctionGun</code> è€Œä¸æ˜¯ <code>DebugPipelineContext</code>ï¼š</p>
<ul>
<li>æ›´å°‘çš„å¯¹è±¡åˆ†é…</li>
<li>æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦</li>
<li>ç‰ºç‰²äº†å †æ ˆä¿¡æ¯çš„å¯è¯»æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-48">å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-49">Q1: ä¸ºä»€ä¹ˆéœ€è¦ Phaseï¼Ÿ</h4>
<p><strong>A</strong>: Phase æä¾›äº†<strong>é€»è¾‘åˆ†ç»„</strong>å’Œ<strong>æ‰§è¡Œé¡ºåºä¿è¯</strong>ã€‚</p>
<p>æ²¡æœ‰ Phase çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ— æ³•ä¿è¯æ‰§è¡Œé¡ºåº</span>
pipeline.intercept { <span class="hljs-comment">/* è®¤è¯ */</span> }
pipeline.intercept { <span class="hljs-comment">/* æ—¥å¿— */</span> }
pipeline.intercept { <span class="hljs-comment">/* ä¸šåŠ¡é€»è¾‘ */</span> }
</code></pre>
<p>æœ‰ Phase çš„å¥½å¤„ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ˜ç¡®çš„æ‰§è¡Œé¡ºåº</span>
pipeline.intercept(Monitoring) { <span class="hljs-comment">/* æ—¥å¿— */</span> }
pipeline.intercept(Plugins) { <span class="hljs-comment">/* è®¤è¯ */</span> }
pipeline.intercept(Call) { <span class="hljs-comment">/* ä¸šåŠ¡é€»è¾‘ */</span> }
</code></pre>
<h4 data-id="heading-50">Q2: proceed() å’Œ proceedWith() çš„åŒºåˆ«ï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li><code>proceed()</code>: ä½¿ç”¨å½“å‰ subject ç»§ç»­</li>
<li><code>proceedWith(newSubject)</code>: ä½¿ç”¨æ–°çš„ subject ç»§ç»­</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">pipeline.intercept(Phase1) { subject -&gt;
    <span class="hljs-comment">// ä¿®æ”¹ subject çš„å±æ€§</span>
    subject.modified = <span class="hljs-literal">true</span>
    proceed() <span class="hljs-comment">// ä¼ é€’ä¿®æ”¹åçš„ subject</span>
}

pipeline.intercept(Phase2) { subject -&gt;
    <span class="hljs-comment">// æ›¿æ¢æ•´ä¸ª subject</span>
    <span class="hljs-keyword">val</span> newSubject = transform(subject)
    proceedWith(newSubject) <span class="hljs-comment">// ä¼ é€’æ–°çš„ subject</span>
}
</code></pre>
<h4 data-id="heading-51">Q3: ä»€ä¹ˆæ—¶å€™è°ƒç”¨ finish()ï¼Ÿ</h4>
<p><strong>A</strong>: å½“ä½ æƒ³<strong>æå‰ç»ˆæ­¢ç®¡é“æ‰§è¡Œ</strong>æ—¶è°ƒç”¨ <code>finish()</code>ã€‚</p>
<p>å¸¸è§åœºæ™¯ï¼š</p>
<ul>
<li>è®¤è¯å¤±è´¥ï¼Œç›´æ¥è¿”å› 401</li>
<li>ç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®</li>
<li>è¯·æ±‚éªŒè¯å¤±è´¥</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">pipeline.intercept(Plugins) {
    <span class="hljs-keyword">if</span> (!isAuthenticated()) {
        call.respond(HttpStatusCode.Unauthorized)
        finish() <span class="hljs-comment">// ç»ˆæ­¢åç»­å¤„ç†</span>
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@intercept</span>
    }
    proceed()
}
</code></pre>
<h4 data-id="heading-52">Q4: å¦‚ä½•è°ƒè¯• Pipelineï¼Ÿ</h4>
<p><strong>A</strong>: å¯ç”¨å¼€å‘æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> pipeline = <span class="hljs-keyword">object</span> : Pipeline&lt;String, <span class="hljs-built_in">Unit</span>&gt;(Phase1, Phase2) {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> developmentMode: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">true</span>
}
</code></pre>
<p>æˆ–è€…ä½¿ç”¨æ—¥å¿—æ‹¦æˆªå™¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">pipeline.intercept(Phase1) { subject -&gt;
    println(<span class="hljs-string">"è¿›å…¥ Phase1, subject=<span class="hljs-variable">$subject</span>"</span>)
    proceed()
    println(<span class="hljs-string">"ç¦»å¼€ Phase1"</span>)
}
</code></pre>
<h4 data-id="heading-53">Q5: Pipeline æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li><strong>æ„å»ºé˜¶æ®µ</strong>ï¼ˆæ·»åŠ  Phase å’Œ Interceptorï¼‰ï¼š<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong></li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼ˆexecuteï¼‰ï¼š<strong>æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong></li>
</ul>
<p>å»ºè®®ï¼š</p>
<ul>
<li>åœ¨åº”ç”¨å¯åŠ¨æ—¶æ„å»º Pipeline</li>
<li>è¿è¡Œæ—¶åªæ‰§è¡Œï¼Œä¸ä¿®æ”¹</li>
</ul>
<h4 data-id="heading-54">Q6: å¦‚ä½•å®ç°æ¡ä»¶æ‹¦æˆªï¼Ÿ</h4>
<p><strong>A</strong>: ä½¿ç”¨ç±»å‹æ£€æŸ¥æˆ–æ¡ä»¶åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ–¹å¼ 1: ç±»å‹æ£€æŸ¥</span>
pipeline.intercept&lt;SpecificType, Context&gt;(Phase1) { subject -&gt;
    <span class="hljs-comment">// åªå¤„ç† SpecificType</span>
    proceed()
}

<span class="hljs-comment">// æ–¹å¼ 2: æ¡ä»¶åˆ¤æ–­</span>
pipeline.intercept(Phase1) { subject -&gt;
    <span class="hljs-keyword">if</span> (shouldProcess(subject)) {
        <span class="hljs-comment">// å¤„ç†</span>
    }
    proceed()
}
</code></pre>
<hr/>
<h3 data-id="heading-55">æ€»ç»“</h3>
<h4 data-id="heading-56">æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>Pipeline æ˜¯ Ktor çš„æ ¸å¿ƒæœºåˆ¶</strong>ï¼Œç†è§£å®ƒæ˜¯æŒæ¡ Ktor çš„å…³é”®</li>
<li><strong>Phase æä¾›æ‰§è¡Œé¡ºåº</strong>ï¼ŒInterceptor æä¾›å¤„ç†é€»è¾‘</li>
<li><strong>proceed() æ˜¯å…³é”®</strong>ï¼Œå®ƒè¿æ¥äº†æ•´ä¸ªè´£ä»»é“¾</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¿«é€Ÿè·¯å¾„ã€ç¼“å­˜ã€å…±äº«æœºåˆ¶</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥ä¿®æ”¹ subjectã€æå‰ç»ˆæ­¢ã€å¼‚å¸¸å¤„ç†</li>
</ol>
<h3 data-id="heading-57">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fktor.io%2Fdocs%2Fpipelines.html" target="_blank" title="https://ktor.io/docs/pipelines.html" ref="nofollow noopener noreferrer">Ktor å®˜æ–¹æ–‡æ¡£ - Pipeline</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fktorio%2Fktor%2Fblob%2Fmain%2Fktor-utils%2Fcommon%2Fsrc%2Fio%2Fktor%2Futil%2Fpipeline%2FPipeline.kt" target="_blank" title="https://github.com/ktorio/ktor/blob/main/ktor-utils/common/src/io/ktor/util/pipeline/Pipeline.kt" ref="nofollow noopener noreferrer">æºç ä½ç½®</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-overview.html" target="_blank" title="https://kotlinlang.org/docs/coroutines-overview.html" ref="nofollow noopener noreferrer">Kotlin åç¨‹æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨DevToolsé€‰ä¸­è°ƒè¯•ä¸€ä¸ªå®æ—¶äº¤äº’æ‰èƒ½æ˜¾ç¤ºçš„å…ƒç´ æ ·å¼]]></title>    <link>https://juejin.cn/post/7576484465759649827</link>    <guid>https://juejin.cn/post/7576484465759649827</guid>    <pubDate>2025-11-26T02:05:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576484465759649827" data-draft-id="7576477793778974760" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨DevToolsé€‰ä¸­è°ƒè¯•ä¸€ä¸ªå®æ—¶äº¤äº’æ‰èƒ½æ˜¾ç¤ºçš„å…ƒç´ æ ·å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2025-11-26T02:05:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xump"/> <meta itemprop="url" content="https://juejin.cn/user/3824530640871996"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨DevToolsé€‰ä¸­è°ƒè¯•ä¸€ä¸ªå®æ—¶äº¤äº’æ‰èƒ½æ˜¾ç¤ºçš„å…ƒç´ æ ·å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3824530640871996/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:05:08.000Z" title="Wed Nov 26 2025 02:05:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¸¸è§çš„ä¼šæ¶ˆå¤±å…ƒç´ </h2>
<p>å¦‚æœä½ å¯¹ä¸‹åˆ—çš„å…ƒç´ è¯¥å¦‚ä½•åœ¨æµè§ˆå™¨è°ƒè¯•è¿‡ç¨‹ä¸­é€‰ä¸­æœ‰é—®é¢˜ï¼Œé‚£å°±ç»§ç»­çœ‹ä¸‹å»å§ã€‚</p>
<ol>
<li>
<p>é€šè¿‡è®¾ç½® ä¼ªç±»(<code>:hover</code>ã€<code>:focus</code> ç­‰) æ¥æ§åˆ¶æ˜¾éšçš„å…ƒç´ </p>
</li>
<li>
<p>è®¾ç½®äº†åŠ¨ç”»çš„å…ƒç´ </p>
</li>
<li>
<p>é€šè¿‡ä¸€äº›äº‹ä»¶(é¼ æ ‡ç§»å…¥ç§»å‡ºã€ç‚¹å‡»ã€èšç„¦ã€è§¦å‘é”®ç›˜æŒ‰é”®ç­‰)æ§åˆ¶çš„å…ƒç´ </p>
<ul>
<li>åœ¨ css å±‚é¢æ§åˆ¶ï¼Œé€šè¿‡åœ¨ä¸€äº›äº‹ä»¶è§¦å‘æ—¶ç»™ç‰¹å®šå…ƒç´ è®¾ç½®ç±»æ ·å¼</li>
<li>åœ¨æ¸²æŸ“å±‚é¢æ§åˆ¶ï¼Œé€šè¿‡ä¸€äº›äº‹ä»¶è§¦å‘æ§åˆ¶è¯¥å…ƒç´ æ˜¯å¦æ¸²æŸ“ï¼ˆæ˜¯å¦åœ¨ DOM æ ‘ä¸­ï¼‰</li>
</ul>
</li>
</ol>
<p>é€šå¸¸è¿™äº›å…ƒç´ æ˜¯åŠ¨æ€æ˜¾éšçš„ï¼Œä¸”è¾ƒæœ‰å®æ—¶æ€§ï¼ŒåŒæ—¶è¿˜å‚æ‚ç€ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œæ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦åœ¨æµè§ˆå™¨å¯¹è¯¥å…ƒç´ çš„æ ·å¼ä¹‹ç±»çš„è¿›è¡Œè°ƒè¯•æ—¶ï¼Œå¦‚ä½•é€‰ä¸­è¯¥å…ƒç´ å°±æˆé—®é¢˜äº†ã€‚</p>
<h2 data-id="heading-1">åœºæ™¯åŠè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">ä»¥Element-plus çš„ tooltip ç»„ä»¶ä¸ºä¾‹</h3>
<p>åœ¨ Element-plus çš„ <code>tooltip</code> ç»„ä»¶ä¸­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f2094ea5734cd8b5cd9018f74889e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=P6KwzX5%2BnWilF%2FpFhTnqmH1V%2BNw%3D" alt="{B7A2153F-1D26-4191-BE64-37063E31A83E}.png" loading="lazy"/>
ä»æ§åˆ¶å°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>tooltip</code> æç¤ºæ¡†çš„æ˜¾éšæ˜¯é€šè¿‡ <code>v-if</code> æ¥æ§åˆ¶ï¼Œå½“æˆ‘ä»¬é¼ æ ‡ç§»å…¥æ—¶ï¼Œå…ƒç´ è¢«æ¸²æŸ“ï¼Œç§»å‡ºæ—¶å…ƒç´ è¢«ç§»é™¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æƒ³è¦é€‰ä¸­ tip å¼¹å‡ºæ¡†å°±å˜å¾—ä¸é‚£ä¹ˆå®¹æ˜“äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de77bbce12b44fa7a66612bd95da2346~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=szF3SyMQWBOuwRYCuJ76VX85USk%3D" alt="GIF 2025-7-4 14-51-27.gif" loading="lazy"/></p>
<h4 data-id="heading-3">é€šè¿‡ç§»é™¤äº‹ä»¶</h4>
<p>é‡åˆ°è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°çš„æ˜¯ä»å®ƒçš„å†…éƒ¨å®ç°å»å…¥æ‰‹äº†ï¼Œå¯ä»¥å¾—çŸ¥çš„æ˜¯ï¼Œ<code>tooltip</code> ç»„ä»¶çš„ tip æ˜¯é€šè¿‡ç›‘å¬é¼ æ ‡äº‹ä»¶æ¥å®Œæˆäº†ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å¯ä»¥æƒ³åˆ°çš„åŠæ³•æ˜¯é€šè¿‡ç§»å‡ºå…¶é¼ æ ‡äº‹ä»¶çš„æ–¹å¼æ¥å®Œæˆã€‚ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be8ff14fcc874ed0b5ac85c2468835b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=0GAkamSwebH4ba0UiGp0zl39XLI%3D" alt="{38632477-0D39-402B-AB60-08E827F8191C}.png" loading="lazy"/>
é€šè¿‡æŸ¥çœ‹è¯¥æŒ‰é’®çš„äº‹ä»¶åˆ—è¡¨ï¼Œæ‰¾åˆ°å…¶ <code>mouseleave</code> äº‹ä»¶ï¼Œå¹¶å°†å…¶åˆ é™¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57071569ab834cf5a121236034439e07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=S9u6p%2B8uF3LaGleEqfcVWKyPLXY%3D" alt="{26AD81D9-578D-447C-BB43-59C537BE5BCC}.png" loading="lazy"/></p>
<p>æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥é€‰ä¸­è¯¥å…ƒç´ äº†</p>
<h4 data-id="heading-4">é€šè¿‡è®¾ç½® DOM å˜åŠ¨æ–­ç‚¹</h4>
<p>åœ¨ chrome ä¸­å¯ä»¥å¯¹ DOM å…ƒç´ çš„ä¸€äº›å˜åŒ–è¿›è¡Œæ–­ç‚¹è°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <strong>Elements</strong> é€‰é¡¹å¡ä¸­å³é”®å…ƒç´ ï¼Œæœ‰ä¸€ä¸ª <code>Break on</code> é€‰é¡¹ï¼Œ<code>Break on</code> å¯ä»¥è®©ä½ åœ¨ JS ä¿®æ”¹æŸä¸ª DOM å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨æš‚åœä»£ç æ‰§è¡Œï¼ˆè¿›å…¥è°ƒè¯•ï¼‰ï¼Œå¹¶ä¸”å‘Šè¯‰ä½  æ˜¯å“ªä¸ª JS æ“ä½œæ”¹åŠ¨äº† DOMã€‚å…¶æœ‰ä¸‰ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li><code>Subtree modifications</code>ï¼šå­å…ƒç´ æœ‰æ–°å¢ã€åˆ é™¤ã€é¡ºåºæ”¹å˜ç­‰</li>
<li><code>Attributes modifications</code>ï¼šå…ƒç´ å±æ€§å˜åŒ–ï¼ˆåŒ…æ‹¬ <code>class</code>ã€<code>id</code>ã€<code>style</code> ç­‰ï¼‰</li>
<li><code>Node removal</code>ï¼šå…ƒç´ æœ¬èº«è¢«åˆ é™¤</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a58012bffe3d4f67ab18849c1717d254~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=0Je9LcezsYRnQA%2BGVPgt8bJZ0ws%3D" alt="{7D86B7CE-94BD-4A1A-9082-4E321AE9BCF8}.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çŸ¥é“è§¦å‘ <code>debugger</code> ä¼šæš‚åœ JS æ‰§è¡Œï¼ŒåŠ¨ç”»ã€äº¤äº’ã€JS é©±åŠ¨çš„æ¸²æŸ“åˆ™ä¼šæš‚åœï¼Œç›´åˆ°ä½ æ‰‹åŠ¨ç»§ç»­è°ƒè¯•ã€‚</p>
<p>åˆ©ç”¨ <code>Break on</code> çš„åŠŸèƒ½æˆ‘ä»¬å°±å¯ä»¥åœ¨æ–­ç‚¹æœŸé—´å¯¹æˆ‘ä»¬æƒ³è¦çš„å…ƒç´ è¿›è¡Œé€‰ä¸­è°ƒè¯•äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25c8f6779bfa4f2c8762180ee6c90db7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=Yr4%2F%2B7lUwCkWvxDkfQkFHyDUYgI%3D" alt="{DF8C0B06-6116-4386-9605-9069F55873BF}.png" loading="lazy"/></p>
<h4 data-id="heading-5">é€šè¿‡æ§åˆ¶å° debugger;</h4>
<p>é™¤äº†é€šè¿‡è®¾ç½® DOM å˜åŠ¨æ–­ç‚¹çš„æ¥æš‚åœé¡µé¢è·å–å…ƒç´ å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ‰‹åŠ¨ <code>debugger</code> çš„æ–¹å¼è¿›è¡Œæš‚åœé¡µé¢æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a58b47cef2741d392e79d351511e897~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVtcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764727508&amp;x-signature=zFbKBUNwSpSdKrwAy455fuK5CYU%3D" alt="GIF 2025-7-4 16-05-10.gif" loading="lazy"/></p>
<p>ä¸Šä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† <code>setTimeout(()=&gt;{debugger;},3000)</code> è®¾ç½®äº†ä¸€ä¸ª <code>3s</code> çš„ <code>debugger</code> å®šæ—¶å™¨ï¼Œåœ¨è¿™ <code>3s</code> ä¸­æˆ‘ä»¬åªéœ€è¦åšåˆ°å…ƒç´ å‡ºç°çš„äº¤äº’å°±å¯ä»¥äº†ï¼Œç­‰è§¦å‘äº† debugger é¡µé¢åœä½åå°±å¯ä»¥å¯¹æˆ‘ä»¬éœ€è¦çš„å…ƒç´ è¿›è¡Œé€‰ä¸­è°ƒè¯•äº†ã€‚</p>
<p>åˆ©ç”¨è¿™ç§ <code>debugger</code> çš„æ–¹å¼å¯ä»¥é€‰ä¸­å¤§éƒ¨åˆ†ä¼šæ¶ˆå¤±çš„å…ƒç´ åŒ…æ‹¬ä¼ªç±»ã€åŠ¨ç”»ã€js æ§åˆ¶çš„å…ƒç´ ã€‚</p>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>åœ¨æˆ‘ä»¬å‰ç«¯å¼€å‘ä¸­ï¼Œè°ƒè¯•é‚£äº›ç”± <code>:hover</code>ã€åŠ¨ç”»æˆ– JS äº‹ä»¶æ§åˆ¶çš„åŠ¨æ€æ˜¾ç¤ºå…ƒç´ æ˜¯ä¸€ä¸ªå¸¸è§åœºæ™¯ã€‚<strong>Chrome DevTools</strong> æä¾›äº†å¤šç§æŠ€å·§æ¥â€œå†»ç»“â€é¡µé¢çŠ¶æ€ï¼Œä»è€Œå…è®¸æˆ‘ä»¬æ£€æŸ¥è¿™äº›ç¨çºµå³é€çš„å…ƒç´ ã€‚</p>
<h4 data-id="heading-7">1. åˆ©ç”¨ DevTools å¼ºåˆ¶çŠ¶æ€ / ä¼ªç±»</h4>
<p>å¯¹äºç”± CSS ä¼ªç±»æ§åˆ¶çš„å…ƒç´ ï¼ˆå¦‚ <code>:hover</code>, <code>:focus</code>, <code>:active</code>, <code>:visited</code> ç­‰ï¼‰ï¼Œè¿™æ˜¯æœ€ç›´æ¥ã€æœ€ç®€å•çš„æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>åœ¨ <strong>Elements (å…ƒç´ )</strong> é€‰é¡¹å¡ä¸­ï¼Œé€‰ä¸­è§¦å‘åŠ¨æ€æ˜¾ç¤ºçš„<strong>çˆ¶å…ƒç´ æˆ–ç›®æ ‡å…ƒç´ </strong>ã€‚</li>
<li>ç‚¹å‡» Styles é¢æ¿å³ä¸Šè§’çš„ <strong><code>:hov</code></strong>ï¼ˆToggle Element Stateï¼‰æŒ‰é’®ã€‚</li>
<li>å‹¾é€‰ç›¸åº”çš„ä¼ªç±»ï¼ˆä¾‹å¦‚ <code>:hover</code>ï¼‰ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> æµè§ˆå™¨å°†å¼ºåˆ¶è¯¥å…ƒç´ ä¿æŒåœ¨æŒ‡å®šçš„ä¼ªç±»çŠ¶æ€ï¼Œä½¿å…¶ä¿æŒå¯è§å’Œå¯æ£€æŸ¥ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">2. é€šè¿‡è®¾ç½® DOM å˜åŠ¨æ–­ç‚¹ï¼ˆé’ˆå¯¹ JS ç§»é™¤ DOMï¼‰</h4>
<p>å½“å…ƒç´ æ˜¯é€šè¿‡ JavaScript äº‹ä»¶ï¼ˆå¦‚ <code>mouseleave</code> æˆ–è®¡æ—¶å™¨ï¼‰ä» DOM æ ‘ä¸­ç§»é™¤æ—¶ï¼Œæ­¤æ–¹æ³•ç‰¹åˆ«æœ‰æ•ˆã€‚</p>
<ul>
<li>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>æ‰¾åˆ°å³å°†è¢«åˆ é™¤æˆ–ä¿®æ”¹çš„<strong>çˆ¶å…ƒç´ </strong>ï¼ˆä¾‹å¦‚ <code>tooltip</code> çš„å¤–éƒ¨å®¹å™¨ï¼‰ã€‚</li>
<li>åœ¨ <strong>Elements (å…ƒç´ )</strong> é¢æ¿ä¸­ï¼Œå³é”®ç‚¹å‡»è¯¥å…ƒç´ ï¼Œé€‰æ‹© <strong>Break on (æ–­ç‚¹)</strong> ã€‚</li>
<li>é€‰æ‹© <strong>Node removal (èŠ‚ç‚¹ç§»é™¤)</strong> æˆ– <strong>Subtree modifications (å­æ ‘ä¿®æ”¹)</strong> ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> å½“ JS ä»£ç å°è¯•åˆ é™¤æˆ–ä¿®æ”¹è¯¥ DOM å…ƒç´ æ—¶ï¼Œæ‰§è¡Œä¼šæš‚åœï¼Œé¡µé¢çŠ¶æ€è¢«å†»ç»“ï¼Œæ‚¨å¯ä»¥åœ¨ Sources é¢æ¿ä¸­æŸ¥çœ‹è°ƒç”¨æ ˆå¹¶æ£€æŸ¥ Elements çŠ¶æ€ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">3. ä½¿ç”¨ <code>debugger;</code> å‘½ä»¤å†»ç»“é¡µé¢ï¼ˆè¾ƒä¸ºé€šç”¨çš„æ–¹æ³•ï¼‰</h4>
<p>è¿™æ˜¯æœ€é€šç”¨çš„æ–¹æ³•ï¼Œé€‚ç”¨äºä»»ä½•ç”± JS æ§åˆ¶æ˜¾éšçš„å…ƒç´ ï¼ŒåŒ…æ‹¬é‚£äº›ä½¿ç”¨ <code>v-if</code> æ§åˆ¶æ¸²æŸ“çš„åœºæ™¯ã€‚</p>
<ul>
<li>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>
<p>åœ¨ <strong>Console (æ§åˆ¶å°)</strong> ä¸­ï¼Œè¾“å…¥ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„ <code>debugger;</code> å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">debugger</span>; }, <span class="hljs-number">3000</span>); <span class="hljs-comment">// 3ç§’åæš‚åœ</span>
</code></pre>
</li>
<li>
<p>åœ¨å®šæ—¶å™¨ç”Ÿæ•ˆçš„è¿™æ®µæ—¶é—´ï¼ˆ3ç§’å†…ï¼‰ï¼Œæ‰§è¡Œè§¦å‘å…ƒç´ å‡ºç°çš„äº¤äº’åŠ¨ä½œï¼ˆä¾‹å¦‚é¼ æ ‡ç§»å…¥ï¼‰ã€‚</p>
</li>
<li>
<p>å½“è®¡æ—¶å™¨ç»“æŸï¼Œ<code>debugger;</code> è¢«æ‰§è¡Œï¼Œé¡µé¢å°†ç«‹å³æš‚åœå¹¶è¿›å…¥è°ƒè¯•çŠ¶æ€ã€‚</p>
</li>
</ol>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> æ•´ä¸ªé¡µé¢çš„ JS æ‰§è¡Œï¼ˆåŒ…æ‹¬åŠ¨ç”»ã€è®¡æ—¶å™¨å’Œäº‹ä»¶ç›‘å¬ï¼‰éƒ½ä¼šåœæ­¢ï¼Œå…ƒç´ è¢«â€œå®šæ ¼â€åœ¨å½“å‰çŠ¶æ€ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åœ¨ Elements é¢æ¿ä¸­é€‰ä¸­å®ƒå¹¶è¿›è¡Œæ ·å¼è°ƒè¯•ã€‚</p>
</li>
</ul>
<p>å‚è€ƒæ¥æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fblog%2Fdevtools-tips-35" target="_blank" title="https://developer.chrome.com/blog/devtools-tips-35" ref="nofollow noopener noreferrer">Freeze screen &amp; inspect disappearing elements</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[1688å›¾ç‰‡æœç´¢API | ä¸Šä¼ å›¾ç‰‡ç§’æ‰¾åŒæ¬¾ | ç›¸ä¼¼å•†å“ç²¾å‡†æ¨è]]></title>    <link>https://juejin.cn/post/7576556950331457536</link>    <guid>https://juejin.cn/post/7576556950331457536</guid>    <pubDate>2025-11-26T02:27:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950331457536" data-draft-id="7576569518261436416" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="1688å›¾ç‰‡æœç´¢API | ä¸Šä¼ å›¾ç‰‡ç§’æ‰¾åŒæ¬¾ | ç›¸ä¼¼å•†å“ç²¾å‡†æ¨è"/> <meta itemprop="keywords" content="æ•°æ®æŒ–æ˜,å¤§æ•°æ®,å›¾ç‰‡èµ„æº"/> <meta itemprop="datePublished" content="2025-11-26T02:27:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·19970108018"/> <meta itemprop="url" content="https://juejin.cn/user/1986149710839467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            1688å›¾ç‰‡æœç´¢API | ä¸Šä¼ å›¾ç‰‡ç§’æ‰¾åŒæ¬¾ | ç›¸ä¼¼å•†å“ç²¾å‡†æ¨è
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1986149710839467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·19970108018
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:27:08.000Z" title="Wed Nov 26 2025 02:27:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ã€æ‘˜è¦<br/>
1688å›¾ç‰‡æœç´¢APIæ˜¯é˜¿é‡Œå·´å·´æ——ä¸‹B2Bå¹³å°æä¾›çš„åŸºäºå›¾åƒè¯†åˆ«çš„å•†å“æœç´¢æœåŠ¡ã€‚é€šè¿‡ä¸Šä¼ å•†å“å›¾ç‰‡ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ¨1688æµ·é‡å•†å“åº“ä¸­æ‰¾åˆ°ç›¸ä¼¼æˆ–åŒæ¬¾å•†å“ï¼Œæå¤§æå‡é‡‡è´­æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚<br/>
äºŒã€æ¥å£æ¦‚è¿°<br/>
1.åŸºæœ¬å‚æ•°<br/>
â€Œè¯·æ±‚æ–¹å¼â€Œ: POST  GET HTTP<br/>
â€Œæ•°æ®æ ¼å¼â€Œ: multipart/form-data<br/>
2.è¯·æ±‚å‚æ•°</p>
<pre><code class="hljs language-ruby" lang="ruby">è¯·æ±‚å‚æ•°ï¼šimgid=<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/g-search3.alicdn.com/img</span><span class="hljs-regexp">/bao/uploaded</span><span class="hljs-regexp">/i4/</span><span class="hljs-title class_">O1CN01IDpcD81zHbpHs1Yg</span>T_!!<span class="hljs-number">2200811456689</span>.jpg

å‚æ•°è¯´æ˜ï¼š<span class="hljs-symbol">imgid:</span>å›¾ç‰‡åœ°å€ï¼ˆä»…æ”¯æŒurlï¼‰  
å¦‚<span class="hljs-symbol">:https</span><span class="hljs-symbol">://img</span>.alicdn.com/imgextra/i3/<span class="hljs-number">15353738</span>/<span class="hljs-title class_">TB2HDHAqN9YBuNjy0FfXXXIsVXa</span>_!!<span class="hljs-number">15353738</span>-<span class="hljs-number">0</span>-beehive-scenes.jpg  
<span class="hljs-symbol">sort:</span>æ’åº[bid2,_bid2,_sale,sale]  
Â Â (<span class="hljs-symbol">bid2:</span>æ€»ä»·,<span class="hljs-symbol">sale:</span>é”€é‡,,åŠ _å‰ç¼€ä¸ºä»å¤§åˆ°å°æ’åº)
</code></pre>
<p>3.å…¬å…±è¯·æ±‚åœ°å€ï¼šc0b.cc/R4rbK2ã€‚</p>
<p>ä¸‰ã€Pythonè¯·æ±‚ç¤ºä¾‹<br/>
ä»¥ä¸‹ä¸ºè°ƒç”¨è¯¥APIçš„Pythonå®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># coding:utf-8</span>
<span class="hljs-string">"""
Compatible for python2.x and python3.x
requirement: pip install requests
"""</span>
<span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> print_function
<span class="hljs-keyword">import</span> requests
<span class="hljs-comment"># é…ç½®å‚æ•° API_URL = "c0b.cc/R4rbK2 wechatid:Taobaoapi2014 " </span>
app_key = <span class="hljs-string">"YOUR_APP_KEY"</span> img <span class="hljs-built_in">id</span> = <span class="hljs-string">"å›¾ç‰‡åœ°å€"</span> <span class="hljs-comment"># ç›®æ ‡å›¾ç‰‡åœ°å€</span>
<span class="hljs-comment"># è¯·æ±‚ç¤ºä¾‹ url é»˜è®¤è¯·æ±‚å‚æ•°å·²ç»åšURLç¼–ç </span>
url = <span class="hljs-string">"1688/item_search_img/?key=&lt;æ‚¨è‡ªå·±çš„apiKey&gt;&amp;imgid=å›¾ç‰‡åœ°å€="</span>
headers = {
    <span class="hljs-string">"Accept-Encoding"</span>: <span class="hljs-string">"gzip"</span>,
    <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"close"</span>
}
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    r = requests.get(url, headers=headers)
    json_obj = r.json()
    <span class="hljs-built_in">print</span>(json_obj)


</code></pre>
<h2 data-id="heading-0">å››ã€ç»“è¯­</h2>
<p>1688å›¾ç‰‡æœç´¢APIä¸ºç”µå•†å¼€å‘è€…å’Œé‡‡è´­äººå‘˜æä¾›äº†å¼ºå¤§çš„å›¾åƒè¯†åˆ«æœç´¢èƒ½åŠ›ï¼Œé€šè¿‡ç®€å•çš„APIè°ƒç”¨å³å¯å®ç°ï¼š</p>
<ul>
<li>å¿«é€Ÿæ‰¾åˆ°åŒæ¬¾å•†å“è¿›è¡Œæ¯”ä»·</li>
<li>æ‰¹é‡å¤„ç†å•†å“å›¾ç‰‡æœç´¢éœ€æ±‚</li>
<li>é›†æˆåˆ°é‡‡è´­ç³»ç»Ÿå’Œç”µå•†å¹³å°ä¸­</li>
</ul>
<p>ä½¿ç”¨å»ºè®®ï¼š</p>
<ul>
<li>ç¡®ä¿å›¾ç‰‡æ¸…æ™°ã€èƒŒæ™¯ç®€æ´</li>
<li>é€‰æ‹©åˆé€‚çš„å•†å“åˆ†ç±»æé«˜å‡†ç¡®ç‡</li>
<li>åˆç†è®¾ç½®åˆ†é¡µå‚æ•°ä¼˜åŒ–æ€§èƒ½</li>
<li>å¤„ç†APIè¿”å›çš„é”™è¯¯ç å’Œå¼‚å¸¸æƒ…å†µ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JVM å†…å­˜ç»“æ„æ·±åº¦è§£æï¼ˆä¸Šç¯‡ï¼‰ï¼šæ ¸å¿ƒåŸç†ä¸è¿è¡Œæ—¶æ•°æ®åŒº]]></title>    <link>https://juejin.cn/post/7576476897950760987</link>    <guid>https://juejin.cn/post/7576476897950760987</guid>    <pubDate>2025-11-25T16:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576476897950760987" data-draft-id="7576537005133021211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JVM å†…å­˜ç»“æ„æ·±åº¦è§£æï¼ˆä¸Šç¯‡ï¼‰ï¼šæ ¸å¿ƒåŸç†ä¸è¿è¡Œæ—¶æ•°æ®åŒº"/> <meta itemprop="keywords" content="JVM"/> <meta itemprop="datePublished" content="2025-11-25T16:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¤´an"/> <meta itemprop="url" content="https://juejin.cn/user/618374030438861"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JVM å†…å­˜ç»“æ„æ·±åº¦è§£æï¼ˆä¸Šç¯‡ï¼‰ï¼šæ ¸å¿ƒåŸç†ä¸è¿è¡Œæ—¶æ•°æ®åŒº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/618374030438861/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¤´an
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T16:59:10.000Z" title="Tue Nov 25 2025 16:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä»ä¸€æ¬¡å†…å­˜æ³„æ¼æ’æŸ¥è¯´èµ·</h2>
<blockquote>
<p>æœ€è¿‘æ’æŸ¥ä¸€ä¸ªçº¿ä¸ŠæœåŠ¡çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼šæœåŠ¡è¿è¡Œä¸€æ®µæ—¶é—´åå°±ä¼šå‡ºç° <code>OutOfMemoryError: Java heap space</code> é”™è¯¯ã€‚é€šè¿‡å†…å­˜dumpåˆ†æï¼Œå‘ç°æ˜¯æŸä¸ªé™æ€é›†åˆä¸­æŒç»­æ·»åŠ æ•°æ®å´ä»æœªæ¸…ç†ã€‚è¿™ä¸ªç»å†è®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°ï¼Œç†è§£ JVM å†…å­˜ç»“æ„å¯¹äºè§£å†³å®é™…é—®é¢˜æœ‰å¤šä¹ˆé‡è¦ã€‚</p>
</blockquote>
<h2 data-id="heading-1">1. JVM å†…å­˜ç»“æ„å…¨æ™¯å›¾</h2>
<p>Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å†…å­˜ç©ºé—´åˆ†ä¸º 5 ä¸ªä¸»è¦éƒ¨åˆ†ï¼Œç†è§£è¿™ä¸ªç»“æ„æ˜¯æŒæ¡ Java æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼š</p>
<ul>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong> - çº¿ç¨‹æ‰§è¡Œçš„æŒ‡ä»¤æŒ‡é’ˆ</li>
<li><strong>Java è™šæ‹Ÿæœºæ ˆ</strong> - æ–¹æ³•è°ƒç”¨çš„æ ˆå¸§å­˜å‚¨</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong> - Native æ–¹æ³•è°ƒç”¨æ ˆ</li>
<li><strong>å †</strong> - å¯¹è±¡å®ä¾‹å­˜å‚¨åŒº</li>
<li><strong>æ–¹æ³•åŒº</strong> - ç±»ä¿¡æ¯ã€å¸¸é‡ç­‰å…ƒæ•°æ®å­˜å‚¨</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[JVM å†…å­˜ç»“æ„] --&gt; B[JVM è™šæ‹Ÿæœºæ•°æ®åŒº]
    A --&gt; C[æœ¬åœ°å†…å­˜]
    
    B --&gt; D[çº¿ç¨‹éš”ç¦»åŒºåŸŸ]
    B --&gt; E[çº¿ç¨‹å…±äº«åŒºåŸŸ]
    
    D --&gt; F[ç¨‹åºè®¡æ•°å™¨]
    D --&gt; G[Java è™šæ‹Ÿæœºæ ˆ]
    D --&gt; H[æœ¬åœ°æ–¹æ³•æ ˆ]
    
    E --&gt; I[å †]
    E --&gt; J[æ–¹æ³•åŒº]
    
    C --&gt; K[å…ƒæ•°æ®åŒº]
    C --&gt; L[ç›´æ¥å†…å­˜]
    
    style F fill:#e1f5fe
    style G fill:#e1f5fe
    style H fill:#e1f5fe
    style I fill:#f3e5f5
    style J fill:#f3e5f5
    style K fill:#e8f5e8
    style L fill:#e8f5e8
</code></pre>
<blockquote>
<p><strong>ğŸš€ JDK 1.8 çš„é‡è¦å˜åŒ–</strong>ï¼šå…ƒæ•°æ®åŒºå–ä»£äº†æ°¸ä¹…ä»£ã€‚å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹ JVM è§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒæ•°æ®ç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚</p>
</blockquote>
<p><strong>ğŸ” å®è·µæç¤º</strong>ï¼šè¿™ä¸ªå˜åŒ–æ„å‘³ç€åœ¨ JDK 1.8+ ä¸­ï¼Œ<code>PermGen space</code> é”™è¯¯å˜æˆäº† <code>Metaspace</code> é”™è¯¯ï¼Œä¸” Metaspace é»˜è®¤æ²¡æœ‰å¤§å°é™åˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® <code>-XX:MaxMetaspaceSize</code>ã€‚</p>
<h2 data-id="heading-2">2. ç¨‹åºè®¡æ•°å™¨ï¼ˆPC å¯„å­˜å™¨ï¼‰</h2>
<h3 data-id="heading-3">2.1 å®šä¹‰ä¸ä½œç”¨</h3>
<p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„é‚£æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚è‹¥å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºè®¡æ•°å™¨ä¸º <code>Undefined</code>ã€‚</p>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼š</p>
<ul>
<li>å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨æ¥ä¾æ¬¡è¯»å–æŒ‡ä»¤ï¼Œå®ç°ä»£ç æµç¨‹æ§åˆ¶</li>
<li>åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œä½ç½®ï¼Œå®ç°çº¿ç¨‹åˆ‡æ¢åçš„æ¢å¤</li>
</ul>
<h3 data-id="heading-4">2.2 ç‰¹ç‚¹</h3>
<ul>
<li>çº¿ç¨‹ç§æœ‰ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨</li>
<li>ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒ</li>
<li>å”¯ä¸€ä¸€ä¸ªä¸ä¼šå‡ºç° <code>OutOfMemoryError</code> çš„å†…å­˜åŒºåŸŸ</li>
</ul>
<p><strong>ğŸ’¡ æ€è€ƒé¢˜</strong>ï¼šä¸ºä»€ä¹ˆç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Ÿ<br/>
å› ä¸ºå¤šçº¿ç¨‹æ˜¯é€šè¿‡è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼å®ç°çš„ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ã€‚</p>
<h2 data-id="heading-5">3. Java è™šæ‹Ÿæœºæ ˆï¼ˆJava æ ˆï¼‰</h2>
<h3 data-id="heading-6">3.1 æ ˆå¸§ç»“æ„è¯¦è§£</h3>
<p>Java è™šæ‹Ÿæœºæ ˆä¼šä¸ºæ¯ä¸€ä¸ªå³å°†è¿è¡Œçš„ Java æ–¹æ³•åˆ›å»º"æ ˆå¸§"åŒºåŸŸï¼Œè¿™æ˜¯ç†è§£æ–¹æ³•æ‰§è¡Œæœºåˆ¶çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[Java è™šæ‹Ÿæœºæ ˆ] --&gt; B[æ ˆå¸§N]
    A --&gt; C[...]
    A --&gt; D[æ ˆå¸§1]
    A --&gt; E[å½“å‰æ ˆå¸§]
    
    E --&gt; F[å±€éƒ¨å˜é‡è¡¨]
    E --&gt; G[æ“ä½œæ•°æ ˆ]
    E --&gt; H[åŠ¨æ€é“¾æ¥]
    E --&gt; I[æ–¹æ³•å‡ºå£ä¿¡æ¯]
    
    F --&gt; J[å…«å¤§åŸå§‹ç±»å‹]
    F --&gt; K[å¯¹è±¡å¼•ç”¨]
    F --&gt; L[returnAddress]
    
    style E fill:#fff3e0
</code></pre>
<p><strong>ğŸ“ ä»£ç ç¤ºä¾‹ï¼šè§‚å¯Ÿæ ˆå¸§å˜åŒ–</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StackFrameDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> add(a, b);
        System.out.println(<span class="hljs-string">"Result: "</span> + result);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> x + y;
        <span class="hljs-keyword">return</span> sum;
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li><code>main</code> æ–¹æ³•åˆ›å»ºç¬¬ä¸€ä¸ªæ ˆå¸§</li>
<li>è°ƒç”¨ <code>add</code> æ–¹æ³•æ—¶åˆ›å»ºæ–°çš„æ ˆå¸§</li>
<li><code>add</code> æ–¹æ³•è¿”å›åï¼Œå…¶æ ˆå¸§è¢«é”€æ¯</li>
</ul>
<h3 data-id="heading-7">3.2 å±€éƒ¨å˜é‡è¡¨æ·±åº¦è§£æ</h3>
<p>å±€éƒ¨å˜é‡è¡¨æ˜¯æ ˆå¸§ä¸­æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼š</p>
<ul>
<li><strong>å­˜å‚¨å†…å®¹</strong>ï¼šæ–¹æ³•å‚æ•°å’Œæ–¹æ³•å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡</li>
<li><strong>å­˜å‚¨å•å…ƒ</strong>ï¼šåŸºæœ¬å•å…ƒæ˜¯ Slotï¼ˆ32ä½å 1ä¸ªï¼Œ64ä½å 2ä¸ªï¼‰</li>
<li><strong>ç‰¹æ®Šå˜é‡</strong>ï¼š<code>this</code> å¼•ç”¨å­˜æ”¾åœ¨ index ä¸º 0 çš„ slot</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalVariableTableDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">(String param, <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-comment">// å±€éƒ¨å˜é‡è¡¨ç»“æ„ï¼š</span>
        <span class="hljs-comment">// slot 0: thiså¼•ç”¨</span>
        <span class="hljs-comment">// slot 1: param (Stringå¼•ç”¨)</span>
        <span class="hljs-comment">// slot 2: count (int)</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">localStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">"hello"</span>;  <span class="hljs-comment">// slot 3</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">localLong</span> <span class="hljs-operator">=</span> <span class="hljs-number">100L</span>;      <span class="hljs-comment">// slot 4-5 (64ä½å 2ä¸ªslot)</span>
        
        System.out.println(localStr);
    }
}
</code></pre>
<h3 data-id="heading-8">3.3 æ“ä½œæ•°æ ˆçš„å·¥ä½œåŸç†</h3>
<p>æ“ä½œæ•°æ ˆæ˜¯æ–¹æ³•æ‰§è¡Œçš„å·¥ä½œåŒºï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>LIFOç»“æ„</strong>ï¼šåè¿›å…ˆå‡ºçš„æ ˆç»“æ„</li>
<li><strong>ç±»å‹æ•æ„Ÿ</strong>ï¼š32bitç±»å‹å ç”¨1ä¸ªæ·±åº¦ï¼Œ64bitç±»å‹å ç”¨2ä¸ªæ·±åº¦</li>
<li><strong>æ ˆé¡¶ç¼“å­˜</strong>ï¼šé€šè¿‡ç‰©ç†CPUå¯„å­˜å™¨ç¼“å­˜æ ˆé¡¶å…ƒç´ æå‡æ€§èƒ½</li>
</ul>
<h3 data-id="heading-9">3.4 æ–¹æ³•è°ƒç”¨ä¸ç»‘å®šæœºåˆ¶</h3>
<p><strong>æ–¹æ³•é“¾æ¥ç±»å‹</strong>ï¼š</p>
<ul>
<li><strong>é™æ€é“¾æ¥</strong>ï¼šç¼–è¯‘æœŸå¯çŸ¥ï¼Œè¿è¡ŒæœŸä¸å˜</li>
<li><strong>åŠ¨æ€é“¾æ¥</strong>ï¼šè¿è¡ŒæœŸç¡®å®šå…·ä½“æ–¹æ³•</li>
</ul>
<p><strong>æ–¹æ³•ç»‘å®š</strong>ï¼š</p>
<ul>
<li><strong>æ—©æœŸç»‘å®š</strong>ï¼šç¼–è¯‘æœŸç¡®å®šæ–¹æ³•ç‰ˆæœ¬</li>
<li><strong>æ™šæœŸç»‘å®š</strong>ï¼šè¿è¡ŒæœŸæ ¹æ®å®é™…ç±»å‹ç»‘å®š</li>
</ul>
<p><strong>è™šæ–¹æ³•è¡¨</strong>ï¼šä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVM ä¸ºæ¯ä¸ªç±»åœ¨æ–¹æ³•åŒºç»´æŠ¤ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼Œä½¿ç”¨ç´¢å¼•è¡¨æ¥ä»£æ›¿æŸ¥æ‰¾ã€‚</p>
<h3 data-id="heading-10">3.5 è™šæ‹Ÿæœºæ ˆçš„å¼‚å¸¸å¤„ç†</h3>
<p><strong>ğŸ› ï¸ å®æˆ˜ï¼šè¯Šæ–­æ ˆæº¢å‡º</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€’å½’è°ƒç”¨å¯¼è‡´ StackOverflowError</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StackOverflowExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">depth</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recursiveMethod</span><span class="hljs-params">()</span> {
        depth++;
        System.out.println(<span class="hljs-string">"Current depth: "</span> + depth);
        recursiveMethod();  <span class="hljs-comment">// æ— é™é€’å½’</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            recursiveMethod();
        } <span class="hljs-keyword">catch</span> (StackOverflowError e) {
            System.out.println(<span class="hljs-string">"Stack overflow at depth: "</span> + depth);
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</li>
<li>ä½¿ç”¨ <code>-Xss</code> å‚æ•°å¢åŠ æ ˆå¤§å°</li>
<li>è€ƒè™‘ä½¿ç”¨è¿­ä»£æ›¿ä»£é€’å½’</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è°ƒæ•´æ ˆå¤§å°å‚æ•°ç¤ºä¾‹</span>
java -Xss2m StackOverflowExample  <span class="hljs-comment"># è®¾ç½®æ ˆå¤§å°ä¸º2MB</span>
</code></pre>
<h2 data-id="heading-11">4. æœ¬åœ°æ–¹æ³•æ ˆï¼ˆC æ ˆï¼‰</h2>
<p>æœ¬åœ°æ–¹æ³•æ ˆä¸ Java è™šæ‹Ÿæœºæ ˆåŠŸèƒ½ç›¸ä¼¼ï¼Œä½†æœåŠ¡äº Native æ–¹æ³•ï¼š</p>
<ul>
<li><strong>æœåŠ¡å¯¹è±¡</strong>ï¼šNative æ–¹æ³•ï¼ˆé€šå¸¸ç”¨ C/C++ å®ç°ï¼‰</li>
<li><strong>æ ˆå¸§ç»“æ„</strong>ï¼šåŒ…å«å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆç­‰ç±»ä¼¼ç»“æ„</li>
<li><strong>å¼‚å¸¸ç±»å‹</strong>ï¼šåŒæ ·ä¼šå‡ºç° <code>StackOverflowError</code> å’Œ <code>OutOfMemoryError</code></li>
</ul>
<h2 data-id="heading-12">5. æ–¹æ³•åŒºä¸è¿è¡Œæ—¶å¸¸é‡æ± </h2>
<h3 data-id="heading-13">5.1 æ–¹æ³•åŒºçš„æ¼”è¿›å†ç¨‹</h3>
<p>æ–¹æ³•åŒºçš„å®ç°ç»å†äº†é‡è¦æ¼”å˜ï¼š</p>
<ul>
<li><strong>JDK 1.6åŠä¹‹å‰</strong>ï¼šæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰å®ç°</li>
<li><strong>JDK 1.7</strong>ï¼šéƒ¨åˆ†æ•°æ®ç§»åˆ°å †ä¸­</li>
<li><strong>JDK 1.8+</strong>ï¼šå…ƒç©ºé—´ï¼ˆMetaspaceï¼‰å®ç°ï¼Œä½¿ç”¨æœ¬åœ°å†…å­˜</li>
</ul>
<h3 data-id="heading-14">5.2 æ–¹æ³•åŒºå­˜å‚¨å†…å®¹è¯¦è§£</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[æ–¹æ³•åŒº] --&gt; B[ç±»å‹ä¿¡æ¯]
    A --&gt; C[è¿è¡Œæ—¶å¸¸é‡æ± ]
    A --&gt; D[é™æ€å˜é‡]
    A --&gt; E[å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åä»£ç ]
    
    B --&gt; F[ç±»ç‰ˆæœ¬]
    B --&gt; G[å­—æ®µ]
    B --&gt; H[æ–¹æ³•]
    B --&gt; I[æ¥å£ç­‰æè¿°ä¿¡æ¯]
    
    C --&gt; J[å­—é¢é‡]
    C --&gt; K[ç¬¦å·å¼•ç”¨]
    C --&gt; L[æ–¹æ³•å’Œå­—æ®µå¼•ç”¨]
    
    style A fill:#f3e5f5
</code></pre>
<h3 data-id="heading-15">5.3 è¿è¡Œæ—¶å¸¸é‡æ± æ·±åº¦è§£æ</h3>
<p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯ Class æ–‡ä»¶ä¸­å¸¸é‡æ± è¡¨çš„è¿è¡Œæ—¶è¡¨ç°ï¼š</p>
<p><strong>å­˜å‚¨å†…å®¹</strong>ï¼š</p>
<ul>
<li>å­—é¢é‡ï¼šå­—ç¬¦ä¸²ã€finalå¸¸é‡ç­‰</li>
<li>ç¬¦å·å¼•ç”¨ï¼šç±»å’Œæ¥å£çš„å…¨é™å®šåã€å­—æ®µåç§°å’Œæè¿°ç¬¦ã€æ–¹æ³•åç§°å’Œæè¿°ç¬¦</li>
</ul>
<p><strong>åŠ¨æ€æ€§</strong>ï¼šè¿è¡ŒæœŸé—´å¯ä»¥å‘å¸¸é‡æ± ä¸­æ·»åŠ æ–°çš„å¸¸é‡</p>
<p><strong>ğŸ” String Table ä¼˜åŒ–å®æˆ˜</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringTableDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è¿™äº›å­—ç¬¦ä¸²éƒ½ä¼šè¿›å…¥å­—ç¬¦ä¸²å¸¸é‡æ± </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"java"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"java"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"java"</span>).intern();
        
        System.out.println(<span class="hljs-string">"s1 == s2: "</span> + (s1 == s2)); <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"s1 == s3: "</span> + (s1 == s3)); <span class="hljs-comment">// true</span>
        
        <span class="hljs-comment">// å¤§å­—ç¬¦ä¸²å¤„ç†çš„æ³¨æ„äº‹é¡¹</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">largeString</span> <span class="hljs-operator">=</span> createLargeString();
        <span class="hljs-comment">// è°¨æ…ä½¿ç”¨ intern()ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡º</span>
        <span class="hljs-comment">// String interned = largeString.intern(); </span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createLargeString</span><span class="hljs-params">()</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
            sb.append(<span class="hljs-string">"large string data "</span>);
        }
        <span class="hljs-keyword">return</span> sb.toString();
    }
}
</code></pre>
<h3 data-id="heading-16">5.4 æ–¹æ³•åŒºå‚æ•°é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># JDK 1.7åŠä¹‹å‰ï¼ˆæ°¸ä¹…ä»£ï¼‰</span>
-XX:PermSize=128m
-XX:MaxPermSize=512m

<span class="hljs-comment"># JDK 1.8+ï¼ˆå…ƒç©ºé—´ï¼‰</span>
-XX:MetaspaceSize=128m
-XX:MaxMetaspaceSize=512m
</code></pre>
<h2 data-id="heading-17">6. ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰</h2>
<h3 data-id="heading-18">6.1 ç›´æ¥å†…å­˜çš„ä¼˜åŠ¿</h3>
<p>ç›´æ¥å†…å­˜å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨ NIO æ“ä½œä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼š</p>
<p><strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>é¿å… Java å †å’Œ Native å †ä¹‹é—´æ¥å›å¤åˆ¶æ•°æ®</li>
<li>ç›´æ¥åœ¨æœ¬åœ°å†…å­˜è¿›è¡Œæ“ä½œï¼Œæå‡ IO æ•ˆç‡</li>
</ul>
<h3 data-id="heading-19">6.2 ç›´æ¥å†…å­˜çš„ä½¿ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DirectMemoryDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">100</span>; <span class="hljs-comment">// 100MB</span>
        
        <span class="hljs-comment">// åˆ†é…ç›´æ¥å†…å­˜</span>
        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">directBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocateDirect(size);
        
        <span class="hljs-comment">// åˆ†é…å †å†…å­˜</span>
        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">heapBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(size);
        
        <span class="hljs-comment">// æ€§èƒ½å¯¹æ¯”æµ‹è¯•</span>
        testPerformance(directBuffer, <span class="hljs-string">"DirectBuffer"</span>);
        testPerformance(heapBuffer, <span class="hljs-string">"HeapBuffer"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPerformance</span><span class="hljs-params">(ByteBuffer buffer, String type)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">1000</span>; j++) {
                buffer.putInt(j);
            }
            buffer.clear();
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
        System.out.println(type + <span class="hljs-string">" Time: "</span> + time + <span class="hljs-string">"ms"</span>);
    }
}
</code></pre>
<h2 data-id="heading-20">æœ¬ç« æ€»ç»“</h2>
<h3 data-id="heading-21">âœ… æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h3>
<ol>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šçº¿ç¨‹æ‰§è¡Œçš„æŒ‡ä»¤æŒ‡é’ˆï¼Œçº¿ç¨‹ç§æœ‰</li>
<li><strong>Java è™šæ‹Ÿæœºæ ˆ</strong>ï¼šæ–¹æ³•è°ƒç”¨çš„æ ˆå¸§å­˜å‚¨ï¼ŒåŒ…å«å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆç­‰</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ï¼šNative æ–¹æ³•çš„è°ƒç”¨æ ˆ</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šç±»ä¿¡æ¯ã€è¿è¡Œæ—¶å¸¸é‡æ± ç­‰å…ƒæ•°æ®å­˜å‚¨</li>
<li><strong>ç›´æ¥å†…å­˜</strong>ï¼šå †å¤–å†…å­˜ï¼Œæå‡ NIO æ€§èƒ½</li>
</ol>
<h3 data-id="heading-22">ğŸ¯ é‡ç‚¹ç†è§£</h3>
<ul>
<li>çº¿ç¨‹ç§æœ‰åŒºåŸŸï¼šç¨‹åºè®¡æ•°å™¨ã€Java è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li>çº¿ç¨‹å…±äº«åŒºåŸŸï¼šå †ã€æ–¹æ³•åŒº</li>
<li>JDK ç‰ˆæœ¬æ¼”è¿›å¯¹å†…å­˜ç»“æ„çš„å½±å“</li>
<li>å„åŒºåŸŸå¯èƒ½å‡ºç°çš„å¼‚å¸¸åŠå¤„ç†æ–¹æ³•</li>
</ul>
<h3 data-id="heading-23">ğŸ“š ä¸‹ç¯‡é¢„å‘Š</h3>
<p>åœ¨ä¸‹ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>å †å†…å­˜çš„è¯¦ç»†ç»“æ„å’Œå¯¹è±¡åˆ†é…è¿‡ç¨‹</li>
<li>åƒåœ¾å›æ”¶æœºåˆ¶å’Œç®—æ³•</li>
<li>å†…å­˜ç›‘æ§å·¥å…·å’Œæ€§èƒ½è°ƒä¼˜å®æˆ˜</li>
<li>å¸¸è§å†…å­˜é—®é¢˜çš„æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
<hr/>
<p><strong>åŠ¨æ‰‹å®éªŒ</strong>ï¼š</p>
<ol>
<li>ç¼–å†™ä¸€ä¸ªä¼šäº§ç”Ÿæ ˆæº¢å‡ºçš„ç¨‹åºï¼Œè§‚å¯Ÿé”™è¯¯ä¿¡æ¯</li>
<li>æµ‹è¯•ä¸åŒå­—ç¬¦ä¸²åˆ›å»ºæ–¹å¼å¯¹å¸¸é‡æ± çš„å½±å“</li>
<li>å¯¹æ¯”ç›´æ¥å†…å­˜å’Œå †å†…å­˜çš„IOæ€§èƒ½å·®å¼‚</li>
</ol>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„å®éªŒç»“æœå’Œé‡åˆ°çš„é—®é¢˜ï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒå‘å¾ªç¯å¸¦å¤´é“¾è¡¨è¯¦è§£]]></title>    <link>https://juejin.cn/post/7576532425762570255</link>    <guid>https://juejin.cn/post/7576532425762570255</guid>    <pubDate>2025-11-26T02:29:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576532425762570255" data-draft-id="7576532425762553871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒå‘å¾ªç¯å¸¦å¤´é“¾è¡¨è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T02:29:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰é£63"/> <meta itemprop="url" content="https://juejin.cn/user/1892682130797704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒå‘å¾ªç¯å¸¦å¤´é“¾è¡¨è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1892682130797704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰é£63
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:29:52.000Z" title="Wed Nov 26 2025 02:29:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é“¾è¡¨ç±»å‹æ¦‚è¿°</h2>
<p>é“¾è¡¨ä½œä¸ºåŸºç¡€æ•°æ®ç»“æ„ï¼Œæ ¹æ®ä¸åŒçš„ç‰¹æ€§ç»„åˆå¯ä»¥åˆ†ä¸ºå¤šç§ç±»å‹ã€‚ä¸»è¦åˆ†ç±»ç»´åº¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å•å‘ vs åŒå‘</strong>ï¼šèŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘å•ä¸€æ–¹å‘è¿˜æ˜¯å¯ä»¥åŒå‘è®¿é—®</li>
<li><strong>å¾ªç¯ vs éå¾ªç¯</strong>ï¼šå°¾èŠ‚ç‚¹æ˜¯å¦æŒ‡å‘å¤´èŠ‚ç‚¹å½¢æˆé—­ç¯</li>
<li><strong>å¸¦å¤´èŠ‚ç‚¹ vs ä¸å¸¦å¤´èŠ‚ç‚¹</strong>ï¼šæ˜¯å¦å­˜åœ¨ä¸å­˜å‚¨æ•°æ®çš„å“¨å…µèŠ‚ç‚¹</li>
</ul>
<p>æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å•é“¾è¡¨å±äº<strong>å•å‘ä¸å¾ªç¯æ— å¤´èŠ‚ç‚¹</strong>é“¾è¡¨ï¼Œè€Œæœ¬æ–‡å°†å®ç°åŠŸèƒ½æ›´å®Œå–„çš„<strong>åŒå‘å¾ªç¯å¸¦å¤´èŠ‚ç‚¹</strong>é“¾è¡¨ã€‚</p>
<h2 data-id="heading-1">1. é“¾è¡¨ç»“æ„ä¸åˆå§‹åŒ–</h2>
<h3 data-id="heading-2">èŠ‚ç‚¹ç»“æ„å®šä¹‰</h3>
<p>c</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> LTDataType;

<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span> {
    LTDataType data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span>* next;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span>* prev;
} ListNode;
</code></pre>
<p>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®åŸŸå’Œä¸¤ä¸ªæŒ‡é’ˆåŸŸï¼Œåˆ†åˆ«æŒ‡å‘å‰é©±å’Œåç»§èŠ‚ç‚¹ã€‚</p>
<h3 data-id="heading-3">é“¾è¡¨åˆå§‹åŒ–</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºæ–°èŠ‚ç‚¹
ListNode* CreateNode(LTDataType x) {
    ListNode* <span class="hljs-attr">newNode</span> = (ListNode*)malloc(sizeof(ListNode))<span class="hljs-comment">;</span>
    assert(newNode)<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">data</span> = x<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">next</span> = newNode<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">prev</span> = newNode<span class="hljs-comment">;</span>
    return newNode<span class="hljs-comment">;</span>
}

// åˆå§‹åŒ–åŒå‘å¾ªç¯é“¾è¡¨
ListNode* LTInit() {
    ListNode* <span class="hljs-attr">pHead</span> = CreateNode(-<span class="hljs-number">1</span>)<span class="hljs-comment">;  // åˆ›å»ºå“¨å…µèŠ‚ç‚¹</span>
    return pHead<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å“¨å…µèŠ‚ç‚¹ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ•°æ®åŸŸé€šå¸¸å­˜å‚¨æ— æ•ˆå€¼ï¼ˆå¦‚-1ï¼‰</li>
<li>ä¸å‚ä¸å®é™…æ•°æ®å­˜å‚¨</li>
<li>æ°¸è¿œå­˜åœ¨äºé“¾è¡¨ä¸­ï¼Œé¿å…ç©ºé“¾è¡¨ç‰¹æ®Šæƒ…å†µ</li>
</ul>
<h2 data-id="heading-4">2. é“¾è¡¨åŸºæœ¬æ“ä½œ</h2>
<h3 data-id="heading-5">æ‰“å°é“¾è¡¨</h3>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">LTPrint</span>(ListNode* pHead) {
    <span class="hljs-built_in">assert</span>(pHead);
    ListNode* pCur = pHead-&gt;next;
    
    <span class="hljs-built_in">printf</span>("é“¾è¡¨å†…å®¹: ");
    while (pCur != pHead) {
        <span class="hljs-built_in">printf</span>("%d -&gt; ", pCur-&gt;data);
        pCur = pCur-&gt;next;
    }
    <span class="hljs-built_in">printf</span>("HEAD\n");
}
</code></pre>
<p><strong>å®ç°è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä»å“¨å…µèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†</li>
<li>é‡åˆ°å“¨å…µèŠ‚ç‚¹æ—¶åœæ­¢ï¼Œé¿å…æ— é™å¾ªç¯</li>
</ul>
<h3 data-id="heading-6">å°¾æ’æ“ä½œ</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">void LTPushBack(ListNode* pHead, LTDataType x) {
    assert(pHead)<span class="hljs-comment">;</span>
    ListNode* <span class="hljs-attr">newNode</span> = CreateNode(x)<span class="hljs-comment">;</span>
    
    // æ–°èŠ‚ç‚¹ä¸é“¾è¡¨å»ºç«‹è¿æ¥
    newNode-&gt;<span class="hljs-attr">prev</span> = pHead-&gt;prev<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">next</span> = pHead<span class="hljs-comment">;</span>
    
    // é“¾è¡¨ä¸æ–°èŠ‚ç‚¹å»ºç«‹è¿æ¥
    pHead-&gt;prev-&gt;<span class="hljs-attr">next</span> = newNode<span class="hljs-comment">;</span>
    pHead-&gt;<span class="hljs-attr">prev</span> = newNode<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>æ“ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li>åˆ›å»ºæ–°èŠ‚ç‚¹</li>
<li>æ–°èŠ‚ç‚¹å‰é©±æŒ‡å‘åŸå°¾èŠ‚ç‚¹ï¼Œåç»§æŒ‡å‘å¤´èŠ‚ç‚¹</li>
<li>åŸå°¾èŠ‚ç‚¹åç»§æŒ‡å‘æ–°èŠ‚ç‚¹</li>
<li>å¤´èŠ‚ç‚¹å‰é©±æŒ‡å‘æ–°èŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-7">å¤´æ’æ“ä½œ</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">void LTPushFront(ListNode* pHead, LTDataType x) {
    assert(pHead)<span class="hljs-comment">;</span>
    ListNode* <span class="hljs-attr">newNode</span> = CreateNode(x)<span class="hljs-comment">;</span>
    
    // æ–°èŠ‚ç‚¹ä¸é“¾è¡¨å»ºç«‹è¿æ¥
    newNode-&gt;<span class="hljs-attr">next</span> = pHead-&gt;next<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">prev</span> = pHead<span class="hljs-comment">;</span>
    
    // é“¾è¡¨ä¸æ–°èŠ‚ç‚¹å»ºç«‹è¿æ¥
    pHead-&gt;next-&gt;<span class="hljs-attr">prev</span> = newNode<span class="hljs-comment">;</span>
    pHead-&gt;<span class="hljs-attr">next</span> = newNode<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-8">3. é“¾è¡¨åˆ é™¤æ“ä½œ</h2>
<h3 data-id="heading-9">å°¾åˆ æ“ä½œ</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">void LTPopBack(ListNode* pHead) {
    assert(pHead &amp;&amp; pHead-&gt;next != pHead)<span class="hljs-comment">;  // ç¡®ä¿é“¾è¡¨ä¸ä¸ºç©º</span>
    
    ListNode* <span class="hljs-attr">delNode</span> = pHead-&gt;prev<span class="hljs-comment">;</span>
    
    // é‡æ–°é“¾æ¥èŠ‚ç‚¹
    delNode-&gt;prev-&gt;<span class="hljs-attr">next</span> = pHead<span class="hljs-comment">;</span>
    pHead-&gt;<span class="hljs-attr">prev</span> = delNode-&gt;prev<span class="hljs-comment">;</span>
    
    // é‡Šæ”¾å†…å­˜
    free(delNode)<span class="hljs-comment">;</span>
    <span class="hljs-attr">delNode</span> = NULL<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-10">å¤´åˆ æ“ä½œ</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">void LTPopFront(ListNode* pHead) {
    assert(pHead &amp;&amp; pHead-&gt;next != pHead)<span class="hljs-comment">;  // ç¡®ä¿é“¾è¡¨ä¸ä¸ºç©º</span>
    
    ListNode* <span class="hljs-attr">delNode</span> = pHead-&gt;next<span class="hljs-comment">;</span>
    
    // é‡æ–°é“¾æ¥èŠ‚ç‚¹
    pHead-&gt;<span class="hljs-attr">next</span> = delNode-&gt;next<span class="hljs-comment">;</span>
    delNode-&gt;next-&gt;<span class="hljs-attr">prev</span> = pHead<span class="hljs-comment">;</span>
    
    // é‡Šæ”¾å†…å­˜
    free(delNode)<span class="hljs-comment">;</span>
    <span class="hljs-attr">delNode</span> = NULL<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-11">4. æŒ‡å®šä½ç½®æ“ä½œ</h2>
<h3 data-id="heading-12">æŸ¥æ‰¾èŠ‚ç‚¹</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">ListNode* LTFind(ListNode* pHead, LTDataType x) {
    assert(pHead)<span class="hljs-comment">;</span>
    ListNode* <span class="hljs-attr">pCur</span> = pHead-&gt;next<span class="hljs-comment">;</span>
    
    while (pCur != pHead) {
        if (pCur-&gt;<span class="hljs-attr">data</span> == x) {
            return pCur<span class="hljs-comment">;  // è¿”å›æ‰¾åˆ°çš„èŠ‚ç‚¹æŒ‡é’ˆ</span>
        }
        <span class="hljs-attr">pCur</span> = pCur-&gt;next<span class="hljs-comment">;</span>
    }
    return NULL<span class="hljs-comment">;  // æœªæ‰¾åˆ°è¿”å›ç©ºæŒ‡é’ˆ</span>
}
</code></pre>
<h3 data-id="heading-13">åœ¨æŒ‡å®šä½ç½®åæ’å…¥</h3>
<p>c</p>
<pre><code class="hljs language-ini" lang="ini">void LTInsert(ListNode* pos, LTDataType x) {
    assert(pos)<span class="hljs-comment">;</span>
    ListNode* <span class="hljs-attr">newNode</span> = CreateNode(x)<span class="hljs-comment">;</span>
    
    // æ–°èŠ‚ç‚¹ä¸å‰åèŠ‚ç‚¹å»ºç«‹è¿æ¥
    newNode-&gt;<span class="hljs-attr">next</span> = pos-&gt;next<span class="hljs-comment">;</span>
    newNode-&gt;<span class="hljs-attr">prev</span> = pos<span class="hljs-comment">;</span>
    
    // å‰åèŠ‚ç‚¹ä¸æ–°èŠ‚ç‚¹å»ºç«‹è¿æ¥
    pos-&gt;next-&gt;<span class="hljs-attr">prev</span> = newNode<span class="hljs-comment">;</span>
    pos-&gt;<span class="hljs-attr">next</span> = newNode<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-14">åˆ é™¤æŒ‡å®šä½ç½®èŠ‚ç‚¹</h3>
<p>c</p>
<pre><code class="hljs language-perl" lang="perl">void LTErase(ListNode* <span class="hljs-keyword">pos</span>) {
    assert(<span class="hljs-keyword">pos</span>);
    
    <span class="hljs-regexp">//</span> å‰åèŠ‚ç‚¹ç›´æ¥å»ºç«‹è¿æ¥ï¼Œè·³è¿‡å½“å‰èŠ‚ç‚¹
    <span class="hljs-keyword">pos</span>-&gt;prev-&gt;<span class="hljs-keyword">next</span> = <span class="hljs-keyword">pos</span>-&gt;<span class="hljs-keyword">next</span>;
    <span class="hljs-keyword">pos</span>-&gt;<span class="hljs-keyword">next</span>-&gt;prev = <span class="hljs-keyword">pos</span>-&gt;prev;
    
    <span class="hljs-regexp">//</span> é‡Šæ”¾å†…å­˜
    free(<span class="hljs-keyword">pos</span>);
    <span class="hljs-keyword">pos</span> = NULL;
}
</code></pre>
<h2 data-id="heading-15">5. å®Œæ•´æµ‹è¯•ç¤ºä¾‹</h2>
<p>c</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-id">#include</span> "List<span class="hljs-selector-class">.h</span>"

void <span class="hljs-built_in">TestList</span>() {
    <span class="hljs-comment">// åˆå§‹åŒ–é“¾è¡¨</span>
    ListNode* plist = <span class="hljs-built_in">LTInit</span>();
    
    <span class="hljs-comment">// æµ‹è¯•å°¾æ’</span>
    <span class="hljs-built_in">printf</span>("=== å°¾æ’æµ‹è¯• ===\n");
    <span class="hljs-built_in">LTPushBack</span>(plist, <span class="hljs-number">1</span>);
    <span class="hljs-built_in">LTPushBack</span>(plist, <span class="hljs-number">2</span>);
    <span class="hljs-built_in">LTPushBack</span>(plist, <span class="hljs-number">3</span>);
    <span class="hljs-built_in">LTPrint</span>(plist);  <span class="hljs-comment">// è¾“å‡º: 1 -&gt; 2 -&gt; 3 -&gt; HEAD</span>
    
    <span class="hljs-comment">// æµ‹è¯•å¤´æ’</span>
    <span class="hljs-built_in">printf</span>("\n=== å¤´æ’æµ‹è¯• ===\n");
    <span class="hljs-built_in">LTPushFront</span>(plist, <span class="hljs-number">0</span>);
    <span class="hljs-built_in">LTPushFront</span>(plist, -<span class="hljs-number">1</span>);
    <span class="hljs-built_in">LTPrint</span>(plist);  <span class="hljs-comment">// è¾“å‡º: -1 -&gt; 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; HEAD</span>
    
    <span class="hljs-comment">// æµ‹è¯•æŸ¥æ‰¾å’Œæ’å…¥</span>
    <span class="hljs-built_in">printf</span>("\n=== æŸ¥æ‰¾æ’å…¥æµ‹è¯• ===\n");
    ListNode* pos = <span class="hljs-built_in">LTFind</span>(plist, <span class="hljs-number">1</span>);
    if (pos != NULL) {
        <span class="hljs-built_in">LTInsert</span>(pos, <span class="hljs-number">99</span>);
        <span class="hljs-built_in">LTPrint</span>(plist);  <span class="hljs-comment">// åœ¨1åé¢æ’å…¥99</span>
    }
    
    <span class="hljs-comment">// æµ‹è¯•åˆ é™¤</span>
    <span class="hljs-built_in">printf</span>("\n=== åˆ é™¤æµ‹è¯• ===\n");
    <span class="hljs-built_in">LTErase</span>(pos);  <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹1</span>
    <span class="hljs-built_in">LTPrint</span>(plist);
    
    <span class="hljs-comment">// æµ‹è¯•å¤´åˆ å°¾åˆ </span>
    <span class="hljs-built_in">printf</span>("\n=== å¤´å°¾åˆ é™¤æµ‹è¯• ===\n");
    <span class="hljs-built_in">LTPopFront</span>(plist);
    <span class="hljs-built_in">LTPopBack</span>(plist);
    <span class="hljs-built_in">LTPrint</span>(plist);
}

int <span class="hljs-selector-tag">main</span>() {
    <span class="hljs-built_in">TestList</span>();
    return <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-16">åŒå‘å¾ªç¯å¸¦å¤´é“¾è¡¨çš„ä¼˜åŠ¿</h2>
<ol>
<li><strong>ç»Ÿä¸€çš„ç©ºé“¾è¡¨å¤„ç†</strong>ï¼šå“¨å…µèŠ‚ç‚¹ç¡®ä¿é“¾è¡¨æ°¸ä¸ä¸ºç©ºï¼Œç®€åŒ–ä»£ç é€»è¾‘</li>
<li><strong>é«˜æ•ˆçš„åŒå‘éå†</strong>ï¼šæ”¯æŒä»å‰å‘åå’Œä»åå‘å‰éå†</li>
<li><strong>å¾ªç¯ç‰¹æ€§</strong>ï¼šå°¾èŠ‚ç‚¹ç›´æ¥è¿æ¥å¤´èŠ‚ç‚¹ï¼Œå½¢æˆé—­ç¯</li>
<li><strong>æ“ä½œä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰æ’å…¥åˆ é™¤æ“ä½œéµå¾ªç›¸åŒæ¨¡å¼ï¼Œä¸éœ€è¦ç‰¹æ®Šå¤„ç†è¾¹ç•Œæƒ…å†µ</li>
</ol>
<h2 data-id="heading-17">å¤æ‚åº¦åˆ†æ</h2>



































<table><thead><tr><th>æ“ä½œ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–</td><td>O(1)</td><td>O(1)</td></tr><tr><td>æ’å…¥(å¤´/å°¾/æŒ‡å®šä½ç½®)</td><td>O(1)</td><td>O(1)</td></tr><tr><td>åˆ é™¤(å¤´/å°¾/æŒ‡å®šä½ç½®)</td><td>O(1)</td><td>O(1)</td></tr><tr><td>æŸ¥æ‰¾</td><td>O(n)</td><td>O(1)</td></tr><tr><td>éå†</td><td>O(n)</td><td>O(1)</td></tr></tbody></table>
<p>è¿™ç§é“¾è¡¨ç»“æ„åœ¨å®é™…åº”ç”¨ä¸­éå¸¸å¸¸è§ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦é¢‘ç¹åœ¨ä¸¤ç«¯è¿›è¡Œæ’</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nginxå¸¸ç”¨å‘½ä»¤]]></title>    <link>https://juejin.cn/post/7576489970762137606</link>    <guid>https://juejin.cn/post/7576489970762137606</guid>    <pubDate>2025-11-26T00:31:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576489970762137606" data-draft-id="7576512460263440420" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nginxå¸¸ç”¨å‘½ä»¤"/> <meta itemprop="keywords" content="Nginx"/> <meta itemprop="datePublished" content="2025-11-26T00:31:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯ä¸·ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/1645337168592269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nginxå¸¸ç”¨å‘½ä»¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1645337168592269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯ä¸·ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T00:31:38.000Z" title="Wed Nov 26 2025 00:31:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»æºç ç¼–è¯‘å®‰è£…</h2>
<p>ä¸‹è½½nginx-1.26.3.tar.gzå¹¶è§£å‹</p>
<pre><code class="hljs language-shell" lang="shell">tar zxvf nginx-1.26.3.tar.gz
</code></pre>
<p>è¿›å…¥è§£å‹åçš„ç›®å½•nginx-1.26.3ï¼Œ<code>configure</code>ä¸ºå®‰è£…è„šæœ¬ï¼Œè¾“å…¥*./configure*å‘½ä»¤ä¼šæç¤ºç¼ºå°‘ä¾èµ–ï¼Œå®‰è£…å¯¹åº”ä¾èµ–</p>
<pre><code class="hljs language-shell" lang="shell">yum install -y gcc
yum install -y pcre pcre-devel
yum install -y zlib zlib-devel
</code></pre>
<p>é€šè¿‡<code>configure</code>å®‰è£…</p>
<pre><code class="hljs language-shell" lang="shell">./configure --prefix=/home/nginx
</code></pre>
<p><code>prefix</code>æŒ‡å®šnginxå®‰è£…ç›®å½•ï¼Œé»˜è®¤ä¸º<code>/usr/local/nginx</code>ï¼Œæ›´å¤šå‚æ•°æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fconfigure.html" target="_blank" title="https://nginx.org/en/docs/configure.html" ref="nofollow noopener noreferrer">nginx.org/en/docs/conâ€¦</a></p>
<p>æ‰§è¡Œ<code>make</code>å’Œ<code>make install</code>å®‰è£…å®Œæˆ</p>
<h2 data-id="heading-1">å¯åŠ¨nginx</h2>
<p>è¿›å…¥åˆ°nginxå®‰è£…ç›®å½•çš„<code>sbin</code>ç›®å½•ä¸‹</p>
<ul>
<li><code>./nginx</code> å¯åŠ¨</li>
<li><code>./nginx -s stop</code> å¿«é€Ÿå…³é—­</li>
<li><code>./nginx -s quit</code> å¹³ç¨³å…³é—­ï¼Œåœ¨é€€å‡ºå‰å®Œæˆå·²æ¥å—çš„è¯·æ±‚</li>
<li><code>./nginx -s reload</code> é‡æ–°åŠ è½½nginxé…ç½®æ–‡ä»¶ï¼Œä¸é‡å¯æœåŠ¡</li>
</ul>
<p>å°†nginxåˆ›å»ºä¸ºæœåŠ¡æ–‡ä»¶å¹¶è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡ï¼Œ<code>/etc/systemd/system</code>æˆ–<code>/usr/lib/systemd/system</code>ç›®å½•ä¸‹</p>
<pre><code class="hljs language-shell" lang="shell">vi /usr/lib/systemd/system/nginx.service
</code></pre>
<pre><code class="hljs language-shell" lang="shell">[Unit]
Description=Nginx HTTP Server
After=network.target  # ç½‘ç»œå¯åŠ¨åå†å¯åŠ¨ Nginx

[Service]
Type=forking  # Nginx ä»¥ fork æ–¹å¼è¿è¡Œï¼ˆåå°è¿›ç¨‹ï¼‰
PIDFile=/home/nginx/logs/nginx.pid  # PID æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»ä¸ Nginx é…ç½®ä¸€è‡´ï¼‰
ExecStartPre=/home/nginx/sbin/nginx -t #æ£€æŸ¥é…ç½®æ–‡ä»¶
ExecStart=/home/nginx/sbin/nginx  # å¯åŠ¨å‘½ä»¤
ExecReload=/home/nginx/sbin/nginx -s reload  # é‡è½½é…ç½®å‘½ä»¤
ExecStop=/home/nginx/sbin/nginx -s stop  # åœæ­¢å‘½ä»¤ï¼ˆä¼˜é›…åœæ­¢è®¾ç½®ä¸ºquitï¼‰
PrivateTmp=true  # ä¸ºæœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç›®å½•ï¼Œå¢å¼ºå®‰å…¨æ€§

[Install]
WantedBy=multi-user.target  # å£°æ˜å¤šç”¨æˆ·æ¨¡å¼ä¸‹å¼€æœºè‡ªå¯
</code></pre>
<p>é‡è½½systemdé…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-shell" lang="shell">systemctl daemon-reload
</code></pre>
<p>å¯åŠ¨å¼€æœºè‡ªå¯</p>
<pre><code class="hljs language-shell" lang="shell">systemctl enable nginx.service
</code></pre>
<pre><code class="hljs language-shell" lang="shell">systemctl start nginx   #å¯åŠ¨
systemctl stop nginx  	#åœæ­¢
systemctl status nginx  #è¿è¡ŒçŠ¶æ€
systemctl reload nginx  #é‡æ–°åŠ è½½é…ç½®
systemctl retart nginx  #é‡å¯
</code></pre>
<h2 data-id="heading-2">å¸¸ç”¨é…ç½®è¯´æ˜</h2>
<p>nginxæœ‰ä¸€ä¸ªmasterè¿›ç¨‹ä»¥åŠå¤šä¸ªworkerè¿›ç¨‹ï¼ŒmasteråŠ è½½é…ç½®æ–‡ä»¶å’Œç»´æŠ¤workerè¿›ç¨‹ï¼Œworkerå¤„ç†è¯·æ±‚ã€‚</p>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fngx_core_module.html" target="_blank" title="https://nginx.org/en/docs/ngx_core_module.html" ref="nofollow noopener noreferrer">ngx_core_module</a></h3>
<p>workerè¿›ç¨‹ä½¿ç”¨çš„ç”¨æˆ·ï¼Œgroupçœç•¥æ—¶ä¸userç›¸åŒ</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
user user [group];
#é»˜è®¤å€¼
user nobody nobody;
#ä½ç½®ï¼šmain
</code></pre>
<p>ä¸»è¿›ç¨‹idå­˜å‚¨ä½ç½®</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
pid file;
#é»˜è®¤å€¼
pid logs/nginx.pid;
#ä½ç½®ï¼šmain
</code></pre>
<p>é”™è¯¯æ—¥å¿—é…ç½®ï¼Œ<code>file</code>è¡¨ç¤ºè·¯å¾„ï¼Œ<code>level</code>å¯é€‰<code>debug</code> ã€ <code>info</code> ã€ <code>notice</code> ã€ <code>warn</code> ã€ <code>error</code> ã€ <code>crit</code> ã€ <code>alert</code> æˆ– <code>emerg</code></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
error_log file [level];
#é»˜è®¤å€¼
error_log logs/error.log error;
#ä½ç½®ï¼šmain, http, mail, stream, server, location
</code></pre>
<p>å·¥ä½œè¿›ç¨‹å¯åŒæ—¶æ‰“å¼€çš„æœ€å¤§è¿æ¥æ•°ï¼ŒåŒ…å«ä¸ä»£ç†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¿æ¥</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
worker_connections number;
#é»˜è®¤å€¼
worker_connections 512;
#ä½ç½®ï¼ševents
</code></pre>
<p>å·¥ä½œè¿›ç¨‹çš„æ•°é‡ï¼Œ<code>auto</code>ä¼šè‡ªåŠ¨æ£€æµ‹CPUæ ¸æ•°</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
worker_processes number | auto;
#é»˜è®¤å€¼
worker_processes 1;
#ä½ç½®ï¼šmain
</code></pre>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html" ref="nofollow noopener noreferrer">ngx_http_core_module</a></h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23server" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#server" ref="nofollow noopener noreferrer">server</a></h4>
<p>ä¸€ä¸ª<em>nginx</em>å¯ä»¥æœ‰å¤šä¸ª<em>server</em>å—ï¼Œæ¯ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23server_name" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_name" ref="nofollow noopener noreferrer">server_name</a>å¯ä»¥æœ‰å¤šä¸ªåŸŸåï¼Œç©ºæ ¼åˆ†éš”ï¼Œæ¥æ”¶è¯·æ±‚æ—¶ï¼Œå…ˆé€šè¿‡<em>ipå’Œç«¯å£</em>åŒ¹é…<a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23listen" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#listen" ref="nofollow noopener noreferrer">listen</a>ï¼Œå†é€šè¿‡è¯·æ±‚å¤´ä¸­çš„<em>HOST</em>ç¡®å®šåˆ°å“ªä¸ª<em>server</em>ï¼ŒæœªåŒ¹é…åˆ°æ—¶ç¬¬ä¸€ä¸ª<em>server</em>ä¸ºé»˜è®¤æœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡åœ¨<em>listen</em>ä¸­æ·»åŠ  <em><strong>default_server</strong></em>æŒ‡å®šé»˜è®¤æœåŠ¡å™¨ã€‚è¯·æ±‚å¤´ä¸­æ²¡æœ‰<em>HOST</em>ï¼Œå°†åŒ¹é…<code>server_name ""</code>ã€‚<code>server_name _</code>è¡¨ç¤ºä¸åŒ¹é…</p>
<h4 data-id="heading-6">server_nameã€listen</h4>
<p><strong>listen</strong>ç›‘å¬æœåŠ¡å™¨**[ip:]ç«¯å£**çš„è¯·æ±‚ï¼Œå¿½ç•¥æ—¶ç›‘å¬æ‰€æœ‰ip</p>
<p><strong>server_name</strong>é…ç½®é€šè¿‡æœ¬æœºhostæ–‡ä»¶è§£ææˆ–è¿œç«¯DNSè§£æçš„<strong>åŸŸå</strong>ï¼Œ<code>*</code>ä¸ºé€šé…ç¬¦</p>
<p><strong>åŸºäºåç§°çš„è™šæ‹ŸæœåŠ¡å™¨</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen      80 default_server;
    server_name example.net www.example.net;
    ...
}
server {
    listen      80;
    server_name "";
    return      444;
}
</code></pre>
<p><strong>åŸºäºåç§°å’ŒIPçš„è™šæ‹ŸæœåŠ¡å™¨</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen      192.168.1.1:80;
    server_name example.org www.example.org;
    ...
}
server {
    listen      192.168.1.1:80;
    server_name example.net www.example.net;
    ...
}
</code></pre>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size" ref="nofollow noopener noreferrer">client_body_buffer_size</a></h4>
<p><code>http</code>ã€<code>server</code>ã€<code>location</code></p>
<p>è¯»å–å®¢æˆ·ç«¯è¯·æ±‚ä½“çš„å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œè¶…å‡ºéƒ¨åˆ†å†™å…¥ä¸´æ—¶æ–‡ä»¶</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_body_buffer_size size;
#é»˜è®¤å€¼
client_body_buffer_size 8k|16k;
#ä½ç½®ï¼šhttpã€serverã€location
</code></pre>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size" ref="nofollow noopener noreferrer">client_body_in_file_only</a></h4>
<p>å°†å®¢æˆ·ç«¯è¯·æ±‚ä½“æ•´ä¸ªä¿å­˜åˆ°æ–‡ä»¶ä¸­</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_body_in_file_only on | clean | off;
#é»˜è®¤å€¼
client_body_in_single_buffer off;
#ä½ç½®ï¼šhttpã€serverã€location
</code></pre>
<ul>
<li><code>on</code> å°†è¯·æ±‚ä½“ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œè¯·æ±‚å¤„ç†å®Œæˆåä¸åˆ é™¤</li>
<li><code>clean</code> å°†è¯·æ±‚ä½“ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œè¯·æ±‚å¤„ç†å®Œæˆååˆ é™¤</li>
<li><code>off</code> å°è¯·æ±‚ä½“å­˜ç¼“å­˜åŒºï¼Œå¤§è¯·æ±‚ä½“å­˜ä¸´æ—¶æ–‡ä»¶ï¼Œå¤„ç†åè‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶</li>
</ul>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_in_single_buffer" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_in_single_buffer" ref="nofollow noopener noreferrer">client_body_in_single_buffer</a></h4>
<p>æ˜¯å¦å°†å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä½“å®Œæ•´å­˜å‚¨åœ¨å•ä¸ªå†…å­˜ç¼“å†²åŒºä¸­ï¼Œå½“ <code>client_body_in_single_buffer on</code> ä¸”è¯·æ±‚ä½“æœªè¶…è¿‡ç¼“å†²åŒºå¤§å°æ—¶ï¼Œ<code>$request_body</code> å¯ç›´æ¥è·å–å®Œæ•´å†…å®¹ï¼›å¦åˆ™å¯èƒ½ä¸ºç©ºæˆ–ä¸å®Œæ•´ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_body_in_single_buffer on | off;
#é»˜è®¤å€¼
client_body_in_single_buffer off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_temp_path" ref="nofollow noopener noreferrer">client_body_temp_path</a></h4>
<p>è¯·æ±‚ä½“å‚¨å­˜æ—¶çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_body_temp_path path [level1 [level2 [level3]]];
#é»˜è®¤å€¼
client_body_temp_path client_body_temp;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>level</code>å¯¹åº”å­ç›®å½•ï¼Œæœ€å¤šå¯æœ‰ä¸‰çº§ï¼Œæ¯ä¸ª<code>level</code>å‡å–å€¼ä¸º<code>1-3</code>ï¼Œè¡¨ç¤ºè¯¥å±‚çº§ç›®å½•æ•°ï¼Œå¦‚<code>client_body_temp_path client_body_temp 1 2</code> ï¼Œè¡¨ç¤ºä¸€çº§ç›®å½•æœ‰16ä¸ªï¼ŒäºŒçº§ç›®å½•æœ‰16Â²ä¸ªç›®å½•</p>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout" ref="nofollow noopener noreferrer">client_body_timeout</a></h4>
<p>è¯»å–å®¢æˆ·ç«¯è¯·æ±‚ä½“çš„è¶…æ—¶æ—¶é—´ã€‚ä»…è®¾ç½®åœ¨ä¸¤æ¬¡è¿ç»­è¯»å–æ“ä½œä¹‹é—´çš„æ—¶é—´æ®µå†…ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¯·æ±‚ä½“çš„ä¼ è¾“æ—¶é—´ï¼Œè¶…æ—¶æ˜¾ç¤º<code>408</code></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_body_timeout time;
#é»˜è®¤å€¼
client_body_timeout 60s;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_buffer_size" ref="nofollow noopener noreferrer">client_header_buffer_size</a></h4>
<p>è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å¤´çš„å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œè¶…è¿‡ç¼“å†²åŒºå¤§å°åˆ™æ ¹æ®<code>large_client_header_buffers</code>è®¾ç½®å¤„ç†</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_header_buffer_size size;
#é»˜è®¤å€¼
client_header_buffer_size 1k;
#ä½ç½®ï¼šhttp, server
</code></pre>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout" ref="nofollow noopener noreferrer">client_header_timeout</a></h4>
<p>è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å¤´çš„è¶…æ—¶æ—¶é—´ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨æ­¤æ—¶é—´å†…æœªä¼ è¾“å®Œæ•´è¯·æ±‚å¤´ï¼Œè¯·æ±‚å°†ç»ˆæ­¢å¹¶è¿”å› <code>408</code>ï¼ˆè¯·æ±‚è¶…æ—¶ï¼‰é”™è¯¯</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_header_timeout time;
#é»˜è®¤å€¼
client_header_timeout 60s;
#ä½ç½®ï¼šhttp, server
</code></pre>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size" ref="nofollow noopener noreferrer">client_max_body_size</a></h4>
<p>å®¢æˆ·ç«¯æ°¢æ°”ä½“çš„æœ€å¤§å¤§å°ï¼Œè¶…è¿‡è¿”å›<code>413</code>é”™è¯¯ï¼Œ<code>0</code>è¡¨ç¤ºç¦ç”¨å¯¹è¯·æ±‚ä½“å¤§å°çš„æ£€æŸ¥</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
client_max_body_size size;
#é»˜è®¤å€¼
client_max_body_size 1m;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23location" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#location" ref="nofollow noopener noreferrer">location</a></h4>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
location [ = | ~ | ~* | ^~ ] uri { ... }
location @name { ... }
#ä½ç½®ï¼šserver, location
</code></pre>
<p>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š</p>
<ol>
<li><code>=</code> ç²¾ç¡®åŒ¹é…</li>
<li><code>^~ </code>ç‰¹æ®Šå‰ç¼€åŒ¹é…ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œä¼š<strong>ç»ˆæ­¢åç»­æ­£åˆ™åŒ¹é…æ£€æŸ¥</strong></li>
<li><code>~</code> æ­£åˆ™åŒ¹é…åŒºåˆ†å¤§å°å†™</li>
<li><code>~*</code> æ­£åˆ™åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç¬¬ä¸€ä¸ªåŒ¹é…æ—¶ä¼šç›´æ¥ä½¿ç”¨å…¶é…ç½®å¹¶ç»ˆæ­¢åç»­æœç´¢</li>
<li>æ™®é€šå‰ç¼€åŒ¹é…ï¼Œéµå¾ªæœ€é•¿åŒ¹é…åŸåˆ™</li>
<li><code>@name</code>ä¸èƒ½åµŒå¥—ï¼Œè‡ªå®šä¹‰åç§°ä¸€èˆ¬ç”¨äºé‡å®šå‘</li>
</ol>
<p><code>location</code>è¯·æ±‚è‹¥ç”±<code>proxy_pass</code>å¤„ç†ä¸”æŒ‡å®šäº†URIï¼ŒåŒ¹é…éƒ¨åˆ†å°†ä¼šè¢«æ›¿æ¢å¹¶æ‹¼æ¥åˆ°<code>proxy_pass</code>åé¢ï¼Œ<code>location</code>è¯·æ±‚å¯¹åº”çš„é™æ€èµ„æºç›¸å¯¹äºå½“å‰<code>location</code>çš„<code>root</code>ç›®å½•ä¸‹</p>
<h4 data-id="heading-16"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23keepalive_disable" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_disable" ref="nofollow noopener noreferrer">keepalive</a></h4>
<p><strong>å¤ç”¨å·²å»ºç«‹çš„ TCP è¿æ¥å¤„ç†å¤šä¸ª HTTP è¯·æ±‚ / å“åº”</strong>ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°å»ºç«‹å’Œå…³é—­ TCP è¿æ¥ï¼Œä»è€Œå‡å°‘ç½‘ç»œå¼€é”€ã€æå‡é€šä¿¡æ•ˆç‡ã€‚</p>
<h5 data-id="heading-17"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23keepalive_disable" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_disable" ref="nofollow noopener noreferrer">å®¢æˆ·ç«¯</a></h5>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
keepalive_disable none | browser ...;
#é»˜è®¤å€¼
keepalive_disable msie6;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<ul>
<li><code>none</code> å¯ç”¨æ‰€æœ‰æµè§ˆå™¨é•¿è¿æ¥</li>
<li><code>msie6</code> ç¦ç”¨IE6çš„é•¿è¿æ¥ï¼ˆ<strong>é»˜è®¤</strong>ï¼‰</li>
<li><code>safari</code> ç¦ç”¨safarié•¿è¿æ¥</li>
</ul>
<p>ä¸€ä¸ªé•¿è¿æ¥çš„æ€»æ—¶é•¿ï¼Œè¾¾åˆ°æ—¶é—´æ—¶å…³é—­è¿æ¥</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
keepalive_time time;
#é»˜è®¤å€¼
keepalive_time 1h;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p>ä¸€ä¸ªé•¿è¿æ¥åœ¨è¯¥æ—¶é—´å†…æ²¡æ¥æ”¶åˆ°è¯·æ±‚ï¼Œåˆ™ä¼šå…³é—­è¯¥è¯·æ±‚ï¼Œ<strong>0è¡¨ç¤ºç¦ç”¨</strong>keepalive</p>
<pre><code class="hljs language-nginx" lang="nginx">#é»˜è®¤å€¼
keepalive_timeout timeout [header_timeout];
#é»˜è®¤å€¼
keepalive_timeout 75s;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p>ä¸€ä¸ªé•¿è¿æ¥å¯å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°é‡</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
keepalive_requests number;
#é»˜è®¤å€¼
keepalive_requests 1000;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h5 data-id="heading-18"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23keepalive" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive" ref="nofollow noopener noreferrer">upstream</a></h5>
<p>è®¾ç½®ä¸åç«¯ä¸Šæ¸¸æœåŠ¡å™¨çš„ç©ºé—²é•¿è¿æ¥æ± </p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
keepalive connections;
#ä½ç½®ï¼šupstream
</code></pre>
<p>ç©ºé—²é•¿è¿æ¥æ± çš„æœ€å¤§æ•°é‡ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡æ–¹æ³•æ—¶è¯¥æŒ‡ä»¤éœ€åœ¨å…¶ä¹‹åï¼Œå¯¹äºhttpéœ€åœ¨<code>location</code>ä¸­è®¾ç½®</p>
<pre><code class="hljs language-nginx" lang="nginx">location /http/{
    proxy_http_version 1.1;#HTTP/1.0 é»˜è®¤ä¸æ”¯æŒé•¿è¿æ¥ï¼Œéœ€å®¢æˆ·ç«¯æ˜¾å¼å‘é€Connection:keep-alive å¤´
    proxy_set_header Connection "";#æ¸…é™¤å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„ Connection å¤´ï¼Œé¿å…åç«¯æœåŠ¡å™¨å…³é—­é•¿è¿æ¥
}
</code></pre>
<p><code>keepalive_requests</code> ä¸€ä¸ªé•¿è¿æ¥å¯å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°é‡</p>
<p><code>keepalive_time</code> ä¸€ä¸ªé•¿è¿æ¥çš„æ€»æ—¶é•¿ï¼Œè¾¾åˆ°æ—¶é—´æ—¶å…³é—­è¿æ¥</p>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23send_timeout" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#send_timeout" ref="nofollow noopener noreferrer">send_timeout</a></h4>
<p>nginxå‘å®¢æˆ·ç«¯ä¼ è¾“å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œ<strong>ä»…åœ¨ä¸¤æ¬¡è¿ç»­çš„å†™æ“ä½œä¹‹é—´ï¼Œä¸æ˜¯æ•´ä¸ªå“åº”</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
send_timeout time;
#é»˜è®¤å€¼
send_timeout 60s;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-20"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23etag" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#etag" ref="nofollow noopener noreferrer">ETag</a></h4>
<p>å¯ç”¨æˆ–ç¦ç”¨å“åº”å¤´ä¸­çš„<code>ETag</code>ï¼ŒåŸºäºèµ„æºçš„å¤§å°æ—¶é—´ç­‰ç”Ÿæˆï¼Œç”¨äºå®¢æˆ·ç«¯ç¼“å­˜åˆ¤æ–­è¯·æ±‚çš„èµ„æºæ˜¯å¦å‘ç”Ÿæ›´æ”¹ï¼Œè¯·æ±‚æ—¶å“åº”å¤´ä¼šè¿”å›<code>ETage</code>ï¼Œå†æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨å¯¹æ¯”è¯·æ±‚å¤´ä¸­çš„<code>If-None-Modified</code>ä¸æœåŠ¡ç«¯çš„<code>ETag</code>ï¼Œè‹¥æœªä¿®æ”¹è¿”å›çŠ¶æ€ç 304ï¼Œå¸¸ä¸<code>Last-Modified</code>é…åˆä½¿ç”¨</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
etag on | off;
#é»˜è®¤å€¼
etag on;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-21"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23if_modified_since" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#if_modified_since" ref="nofollow noopener noreferrer">if_modified_since</a></h4>
<p>æœåŠ¡å™¨å¦‚ä½•æ¯”è¾ƒè¯·æ±‚å¤´ä¸­çš„<code>If-Modified-Since</code>å’ŒæœåŠ¡å™¨èµ„æºçš„<code>Last-Modified</code></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
if_modified_since off | exact | before;
#é»˜è®¤å€¼
if_modified_since exact
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>off</code> ä¸æ¯”è¾ƒï¼Œå§‹ç»ˆè§†ä¸ºå·²ä¿®æ”¹</p>
<p><code>exact</code> ç²¾ç¡®åŒ¹é…</p>
<p><code>before</code> å“åº”çš„æ—¶é—´å°äºç­‰äºè¯·æ±‚å¤´ä¸­çš„<code>If-Modified-Since</code>çš„æ—¶é—´</p>
<h4 data-id="heading-22"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile" ref="nofollow noopener noreferrer">sendfile</a></h4>
<p>ç”¨äºä¼˜åŒ–é™æ€æ–‡ä»¶ä¼ è¾“æ€§èƒ½çš„æ ¸å¿ƒé…ç½®ï¼Œå…¶åº•å±‚ä¾èµ–æ“ä½œç³»ç»Ÿçš„<code>sendfile</code>ç³»ç»Ÿè°ƒç”¨ï¼Œä¸»è¦ä½œç”¨æ˜¯<strong>å‡å°‘æ•°æ®åœ¨ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ä¹‹é—´çš„æ‹·è´æ¬¡æ•°</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
sendfile on | off;
#é»˜è®¤å€¼
sendfile off;
#ä½ç½®ï¼šhttp, server, location, if in location
</code></pre>
<p>ä¼ ç»Ÿä¼ è¾“æ–‡ä»¶æµç¨‹ï¼š</p>
<ol>
<li>æ“ä½œç³»ç»Ÿä»ç£ç›˜è¯»å–æ–‡ä»¶æ•°æ®ï¼Œå­˜å…¥<strong>å†…æ ¸ç¼“å†²åŒº</strong>ï¼ˆå†…æ ¸ç©ºé—´ï¼‰ï¼›</li>
<li>æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºæ‹·è´åˆ°<strong>åº”ç”¨ç¨‹åºç¼“å†²åŒº</strong>ï¼ˆç”¨æˆ·ç©ºé—´ï¼Œå¦‚ Nginx è¿›ç¨‹çš„å†…å­˜ï¼‰ï¼›</li>
<li>æ•°æ®å†ä»åº”ç”¨ç¨‹åºç¼“å†²åŒºæ‹·è´åˆ°<strong>Socket ç¼“å†²åŒº</strong>ï¼ˆå†…æ ¸ç©ºé—´ï¼Œç”¨äºç½‘ç»œå‘é€ï¼‰ï¼›</li>
<li>æœ€ç»ˆä» Socket ç¼“å†²åŒºé€šè¿‡ç½‘ç»œå‘é€ç»™å®¢æˆ·ç«¯</li>
</ol>
<p>ä½¿ç”¨sendfileçš„æµç¨‹ï¼š</p>
<ol>
<li>ç£ç›˜æ•°æ®è¯»å…¥å†…æ ¸ç¼“å†²åŒºï¼›</li>
<li>å†…æ ¸ç›´æ¥å°†ç¼“å†²åŒºæ•°æ® â€œç§»äº¤â€ ç»™ Socket ç¼“å†²åŒºï¼ˆé€šè¿‡æŒ‡é’ˆæ˜ å°„ï¼Œè€Œéå®é™…æ‹·è´ï¼‰ï¼›</li>
<li>æ•°æ®ä» Socket ç¼“å†²åŒºå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</li>
</ol>
<h4 data-id="heading-23"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23open_file_cache" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache" ref="nofollow noopener noreferrer">open_file_cache</a></h4>
<p>ç¼“å­˜æ–‡ä»¶çš„å…ƒæ•°æ®</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
open_file_cache off;
open_file_cache max=N [inactive=time];
#é»˜è®¤å€¼
open_file_cache off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>off</code>å…³é—­</p>
<p><code>max</code>è®¾ç½®ç¼“å­˜çš„æœ€å¤§å…ƒç´ æ•°é‡</p>
<p><code>inactive</code>ç§»é™¤æŒ‡å®šæ—¶é—´å†…æœªè¢«è®¿é—®çš„ç¼“å­˜</p>
<h4 data-id="heading-24"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23open_file_cache_errors" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_errors" ref="nofollow noopener noreferrer">open_file_cache_errors</a></h4>
<p>æ§åˆ¶æ˜¯å¦ç¼“å­˜ æ–‡ä»¶é”™è¯¯ä¿¡æ¯</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
open_file_cache_errors on | off;
#é»˜è®¤å€¼
open_file_cache_errors off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23open_file_cache_min_uses" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_min_uses" ref="nofollow noopener noreferrer">open_file_cache_min_uses</a></h4>
<p>åœ¨ <code>open_file_cache</code> çš„ <code>inactive</code> æ—¶é—´çª—å£å†…ï¼Œä¸€ä¸ªæ–‡ä»¶è‡³å°‘è¢«è®¿é—®å¤šå°‘æ¬¡ï¼Œå…¶å…ƒæ•°æ®æ‰ä¼šè¢«ä¿ç•™åœ¨ç¼“å­˜ä¸­</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
open_file_cache_min_uses number;
#é»˜è®¤å€¼
open_file_cache_min_uses 1;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-26"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23open_file_cache_valid" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_valid" ref="nofollow noopener noreferrer">open_file_cache_valid</a></h4>
<p>è®¾ç½®ç¼“å­˜ä¸­å…ƒæ•°æ®çš„å®šæœŸéªŒè¯é—´éš”ï¼Œå®šæœŸï¼ˆæ¯é—´éš”è¯¥æ—¶é—´ï¼‰éªŒè¯ç¼“å­˜ä¸­çš„å…ƒæ•°æ®æ˜¯å¦ä¸ç£ç›˜å®é™…æ–‡ä»¶ä¸€è‡´å¹¶ä¿®æ”¹</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
open_file_cache_valid time;
#é»˜è®¤å€¼	
open_file_cache_valid 60s;
#é»˜è®¤å€¼
</code></pre>
<h4 data-id="heading-27"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23error_page" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#error_page" ref="nofollow noopener noreferrer">error_page</a></h4>
<p>æ ¹æ®å“åº”ç è·³è½¬åˆ°ç›¸åº”é”™è¯¯é¡µ</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
error_page code ... [=[response]] uri;
#ä½ç½®ï¼šhttp, server, location, if in location
</code></pre>
<p><code>code</code>å“åº”ç ï¼Œå¤šä¸ªç”¨ç©ºæ ¼åˆ†éš”</p>
<p><code>=response</code>æ›´æ”¹å“åº”ç ä¸ºresponseå“åº”ç </p>
<p><code>uri</code>æŒ‡æœ¬åœ°é™æ€æ–‡ä»¶è·¯å¾„ã€å¤–éƒ¨åœ°å€ã€å†…éƒ¨å‘½å <code>location</code>å¦‚è‡ªå®šä¹‰<code>@name</code></p>
<pre><code class="hljs language-nginx" lang="nginx">error_page 500 502 503 504 /50x.html;

# ç²¾ç¡®åŒ¹é…50x.html é™åˆ¶ /50x.html ä»…å†…éƒ¨è®¿é—®
location = /50x.html {
    internal;  # å®¢æˆ·ç«¯ç›´æ¥è¯·æ±‚ example.com/50x.html ä¼šè¿”å› 404
    root /usr/share/nginx/html;  # æ˜ç¡®æŒ‡å®šæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼ˆå¯é€‰ï¼Œè‹¥ç»§æ‰¿serverçš„rootåˆ™å¯çœç•¥ï¼‰
}
</code></pre>
<h4 data-id="heading-28"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23limit_rate" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate" ref="nofollow noopener noreferrer">limit_rate</a></h4>
<p>é™åˆ¶å¯¹å®¢æˆ·ç«¯çš„å“åº”é€Ÿç‡ï¼Œæ¯ç§’çš„å­—èŠ‚æ•°ï¼Œå¦‚1kè¡¨ç¤º1k/sï¼Œé’ˆå¯¹çš„æ˜¯å®¢æˆ·ç«¯çš„ä¸€ä¸ªè¯·æ±‚ï¼Œå®¢æˆ·ç«¯åŒæ—¶æ‰“å¼€ä¸¤ä¸ªè¿æ¥ï¼Œæ€»é€Ÿç‡å°†æ˜¯é™åˆ¶çš„ä¸¤å€ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_rate rate;
#é»˜è®¤å€¼
limit_rate 0;
#ä½ç½®ï¼šhttp, server, location, if in location
</code></pre>
<p>å¯ç»“åˆ<code>limit_rate_after</code>(ä¼ è¾“ä¸€å®šå­—èŠ‚åé™é€Ÿ)</p>
<h3 data-id="heading-29"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html" ref="nofollow noopener noreferrer">ngx_http_proxy_module</a></h3>
<h4 data-id="heading-30"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_bind" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_bind" ref="nofollow noopener noreferrer">proxy_bind</a></h4>
<p>æŒ‡ä¸åå‘ä»£ç†æœåŠ¡å™¨è¿æ¥æ—¶æœ¬åœ°çš„ipå’Œç«¯å£ï¼Œ<code>off</code>å–æ¶ˆä»ä¸Šä¸€çº§ç»§æ‰¿çš„<code>proxy_bind</code>çš„é…ç½®ï¼Œ<code>transparent</code>æŒ‡å®šä¸ºéæœ¬æœºipï¼Œå¦‚<code>$remote_addr</code>æŒ‡å®šä¸ºå®¢æˆ·ç«¯çš„çœŸå®ipåœ°å€ï¼ˆéœ€è¦ç³»ç»Ÿå±‚é¢é…ç½®æ”¯æŒï¼‰</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_bind address [transparent] | off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-31"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_pass" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass" ref="nofollow noopener noreferrer">proxy_pass</a></h4>
<p><code>proxy_pass</code>è®¾ç½®åå‘ä»£ç†åœ°å€ï¼Œåå¯é…ç½®å¤šä¸ªåœ°å€ï¼Œç©ºæ ¼éš”å¼€ï¼Œä¹Ÿå¯é…ç½®ä¸º<a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_upstream_module.html" ref="nofollow noopener noreferrer">server_group</a></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_pass URL;
#ä½ç½®ï¼šlocation, if in location, limit_except
</code></pre>
<p>è‹¥<strong>proxy_pass</strong>ä¸­æŒ‡å®šäº†URIï¼Œåˆ™<strong>location</strong>ä¸­åŒ¹é…çš„URIéƒ¨åˆ†å°†è¢«æ›¿æ¢ä¸º<strong>proxy_pass</strong>çš„éƒ¨åˆ†å†æ‹¼æ¥åˆ°åé¢è¿›è¡Œåå‘ä»£ç†ã€‚</p>
<p>è‹¥<strong>proxy_pass</strong>ä¸­æœªæŒ‡å®šURIï¼Œåˆ™<strong>location</strong>ä¸­çš„URIå°†è¢«æ‹¼æ¥åˆ°<strong>proxy_pass</strong>ä¸­è¿›è¡Œåå‘ä»£ç†ã€‚</p>
<h4 data-id="heading-32"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_buffering" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering" ref="nofollow noopener noreferrer">proxy_buffering</a></h4>
<p>å¯ç”¨æˆ–ç¦ç”¨ä»£ç†æœåŠ¡å™¨å“åº”çš„ç¼“å­˜åŒº</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_buffering on | off;
#é»˜è®¤å€¼
proxy_buffering on;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p>å¯ç”¨æ—¶å°†å“åº”ä¿å­˜åˆ°<code>proxy_buffer_size</code>å’Œ <code>proxy_buffers</code>è®¾ç½®çš„ç¼“å†²åŒºä¸­ï¼Œè¶…è¿‡å†…å­˜ç¼“å†²åŒºå¤§å°çš„éƒ¨åˆ†å°†å­˜åœ¨<code>proxy_max_temp_file_size</code>å’Œ<code>proxy_temp_file_write_size</code>çš„ä¸´æ—¶æ–‡ä»¶ä¸­</p>
<p>ç¦ç”¨æ—¶Nginx å°±ç«‹å³å‘ç»™å®¢æˆ·ç«¯ï¼Œä¸è¯»å–å“åº”</p>
<h4 data-id="heading-33"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_buffer_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size" ref="nofollow noopener noreferrer">proxy_buffer_size</a></h4>
<p>è¯»å–åå‘ä»£ç†æœåŠ¡å™¨å“åº”çš„ç¬¬ä¸€éƒ¨åˆ†çš„å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œé€šå¸¸ä¸º<strong>å“åº”å¤´</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_buffer_size size;
#é»˜è®¤å€¼ï¼Œå–å†³äºç³»ç»Ÿ
proxy_buffer_size 4k|8k;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-34"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_buffers" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffers" ref="nofollow noopener noreferrer">proxy_buffers</a></h4>
<p>è¯»å–ä»£ç†æœåŠ¡å™¨<strong>å“åº”ä½“</strong>çš„å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œæ¥æ”¶å“åº”æ—¶å…ˆå°†å“åº”ä½“å­˜å…¥å†…å­˜ç¼“å†²åŒºï¼Œè¶…å‡ºçš„éƒ¨åˆ†å­˜å…¥ä¸´æ—¶æ–‡ä»¶<code>proxy_max_temp_file_size</code></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_buffers number size;
#é»˜è®¤å€¼
proxy_buffers 8 4k|8k;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>number</code> ç¼“å†²åŒºæ•°é‡</p>
<p><code>size</code> ç¼“å†²åŒºå¤§å°</p>
<h4 data-id="heading-35"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_busy_buffers_size" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_busy_buffers_size" ref="nofollow noopener noreferrer">proxy_busy_buffers_size</a></h4>
<p>è¯»å–å“åº”çš„ç¼“å†²åŒºèƒ½ç”¨äºå‘å®¢æˆ·ç«¯å‘é€å“åº”çš„ç¼“å†²åŒºæ€»å¤§å°ï¼ˆè¿™äº›ç¼“å†²åŒºæ— æ³•è¢«ç”¨äºè¯»å–ä»£ç†æœåŠ¡å™¨å“åº”ï¼‰</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_busy_buffers_size size;
#é»˜è®¤å€¼
proxy_busy_buffers_size 8k|16k;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-36"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_set_header" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" ref="nofollow noopener noreferrer">proxy_set_header</a></h4>
<p>å‘åå‘ä»£ç†æœåŠ¡å™¨ä¸­é‡æ–°å®šä¹‰æˆ–è¿½åŠ è¯·æ±‚å¤´</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_set_header field value;
#é»˜è®¤å€¼
proxy_set_header Host $proxy_host;
proxy_set_header Connection close;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>value</code>å¯ä»¥æ˜¯æ–‡æœ¬ã€å˜é‡ã€åŠå…¶ç»„åˆ</p>
<h4 data-id="heading-37"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache" ref="nofollow noopener noreferrer">proxy_cache</a></h4>
<p>æ˜¯å¦å¼€å¯å¯¹ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache zone | off;
#é»˜è®¤å€¼
proxy_cache off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>zone</code>æŒ‡å®šçš„ç¼“å­˜åŒºåŸŸçš„åç§°ï¼Œç›¸åŒçš„åŒºåŸŸå¯é‡å¤ä½¿ç”¨ï¼ŒåŒºåŸŸåç§°è§<code>proxy_cache_path</code>çš„<code>keys_zone</code></p>
<p><code>off</code>å…³é—­</p>
<h4 data-id="heading-38"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_background_update" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_background_update" ref="nofollow noopener noreferrer">proxy_cache_background_update</a></h4>
<p>æ˜¯å¦å¼€å¯ï¼šç¼“å­˜å†…å®¹è¿‡æœŸæ—¶ï¼Œå…ˆå‘å®¢æˆ·ç«¯è¿”å›æ—§ç¼“å­˜ï¼ŒåŒæ—¶åœ¨åå°å¼‚æ­¥æ›´æ–°ç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_background_update on | off;
#é»˜è®¤å€¼
proxy_cache_background_update off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-39"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_bypass" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_bypass" ref="nofollow noopener noreferrer">proxy_cache_bypass</a></h4>
<p>å¦‚æœæŒ‡å®šçš„å˜é‡ä¸­è‡³å°‘ä¸€ä¸ªä¸ä¸ºéç©ºä¸”ä¸ç­‰äº0åˆ™ç»•è¿‡ç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_bypass string ...;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-40"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_methods" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_methods" ref="nofollow noopener noreferrer">proxy_cache_methods</a></h4>
<p>ç¼“å­˜å¯¹åº”è¯·æ±‚æ–¹æ³•çš„å“åº”</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_methods GET | HEAD | POST ...;
#é»˜è®¤å€¼
proxy_cache_methods GET HEAD;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-41"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_purge" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_purge" ref="nofollow noopener noreferrer">proxy_cache_purge</a></h4>
<p>å¦‚æœæŒ‡å®šçš„å˜é‡ä¸­è‡³å°‘ä¸€ä¸ªä¸ä¸ºéç©ºä¸”ä¸ç­‰äº0åˆ™æ¸…é™¤ç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_purge string ...;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-42"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_key" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_key" ref="nofollow noopener noreferrer">proxy_cache_key</a></h4>
<p>ç¼“å­˜çš„é”®åï¼Œè¯†åˆ«ä¸åŒè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_key string;
#é»˜è®¤å€¼
proxy_cache_key $scheme$proxy_host$request_uri;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-43"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_lock" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock" ref="nofollow noopener noreferrer">proxy_cache_lock</a></h4>
<p>å¼€å¯æ—¶ï¼Œè‹¥èµ„æºæœªç¼“å­˜ï¼Œåªæœ‰ä¸€ä¸ªä¼šè¯·æ±‚åç«¯å¹¶ç¼“å­˜ï¼Œå…¶ä½™æœ‰ç›¸åŒç¼“å­˜é”®çš„è¯·æ±‚è¿›å…¥ç­‰å¾…é˜Ÿåˆ—é˜»å¡ç›´è‡³ä»ç¼“å­˜ä¸­è·å–</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_lock on | off;
#é»˜è®¤å€¼
proxy_cache_lock off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-44"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_lock_age" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock_age" ref="nofollow noopener noreferrer">proxy_cache_lock_age</a></h4>
<p>åœ¨<code>æŒ‡å®šæ—¶é—´</code>å†…å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶ç¼“å­˜æœªå®Œæˆæ—¶ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—æœ‰ç›¸åŒç¼“å­˜é”®çš„è¯·æ±‚ä¼šå†å‘ä¸€ä¸ªè¯·æ±‚</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_lock_age time;
#é»˜è®¤å€¼
proxy_cache_lock_age 5s;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-45"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_lock_timeout" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock_timeout" ref="nofollow noopener noreferrer">proxy_cache_lock_timeout</a></h4>
<p>è¯·æ±‚ä¸Šé”çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä¸ªè¯·æ±‚è¶…è¿‡è¯¥æ—¶é—´æ—¶ï¼Œä¼šå‘é€ç»™ä»£ç†æœåŠ¡å™¨ï¼Œä½†ä¸ç¼“å­˜å“åº”</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_lock_timeout time;
#é»˜è®¤å€¼
proxy_cache_lock_timeout 5s;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-46"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_min_uses" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_min_uses" ref="nofollow noopener noreferrer">proxy_cache_min_uses</a></h4>
<p>è¾¾åˆ°æŒ‡å®šçš„è¯·æ±‚æ¬¡æ•°åç¼“å­˜å“åº”</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_min_uses number;
#é»˜è®¤å€¼
proxy_cache_min_uses 1;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-47"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_path" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path" ref="nofollow noopener noreferrer">proxy_cache_path</a></h4>
<p>è®¾ç½®ç¼“å­˜ä½ç½®åŠå…¶ä»–å‚æ•°ï¼Œ<code>proxy_cache_path</code>å¯å¤šæ¬¡å®šä¹‰</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_path path [levels=levels] [use_temp_path=on|off] keys_zone=name:size [inactive=time] [max_size=size] [min_free=size] [manager_files=number] [manager_sleep=time] [manager_threshold=time] [loader_files=number] [loader_sleep=time] [loader_threshold=time] [purger=on|off] [purger_files=number] [purger_sleep=time] [purger_threshold=time];
#ä½ç½®ï¼šhttp
</code></pre>
<p>ç¼“å­˜æ–‡ä»¶åæ˜¯ç¼“å­˜é”®åç»è¿‡MD5åçš„ç»“æœ</p>
<p><code>path</code>ç¼“å­˜æ–‡ä»¶çš„ç›®å½•</p>
<p><code>level</code>ç¼“å­˜çš„æ²¡ç›®å½•å±‚çº§ï¼Œå±‚çº§èŒƒå›´æ˜¯<code>1:3</code>æœ€å¤šä¸‰å±‚ï¼Œæ¯å±‚ç”¨åªèƒ½æ˜¯1æˆ–2ï¼Œä»£è¡¨å‡ ä¸ª16è¿›åˆ¶ï¼Œå¦‚<code>1:2:2</code>è¡¨ç¤ºä¸‰å±‚ï¼Œåˆ†åˆ«ä¸º<code>16</code>ã€<code>16*16</code>ã€<code>16*16</code>ä¸ªç›®å½•</p>
<p><code>use_temp_path</code>æ˜¯å¦å…ˆå°†ç¼“å­˜å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œå†é‡å‘½åä¸ºç¼“å­˜æ–‡ä»¶ï¼Œè‹¥ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶ä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå°±ä¸æ˜¯é‡å‘½åæ“ä½œï¼Œè®¾ç½®ä¸º<code>on</code>æ—¶ï¼Œä¸´æ—¶æ–‡ä»¶ä½ç½®ç”±<code>proxy_temp_path</code>æŒ‡å®šï¼Œ<code>off</code>ä¸´æ—¶æ–‡ä»¶ç›´æ¥æ”¾åœ¨ç¼“å­˜ç›®å½•ä¸­</p>
<p><code>keys_zone</code>å®šä¹‰ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜åŒºåŸŸï¼Œå³<code>proxy_cache</code>æŒ‡å®šçš„<code>zone</code>ï¼Œå­˜åœ¨å†…å­˜ä¸­</p>
<p><code>inactive</code>æŒ‡å®šæ—¶é—´å†…<strong>æœªè¢«è®¿é—®</strong>çš„ç¼“å­˜æ•°æ®ï¼Œæ— è®ºæ˜¯å¦è¿‡æœŸï¼Œéƒ½ä¼šç§»é™¤ï¼Œé»˜è®¤<code>10åˆ†é’Ÿ</code></p>
<h4 data-id="heading-48"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_revalidate" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_revalidate" ref="nofollow noopener noreferrer">proxy_cache_revalidate</a></h4>
<p>ç¼“å­˜è¿‡æœŸæ—¶å…è®¸å‘é€<code>If-Modified-Since</code>å’Œ<code>If-None-Match</code>è¯·æ±‚å¤´é‡æ–°éªŒè¯ç¼“å­˜æ˜¯å¦æ›´æ”¹ï¼Œä»…æ›´æ”¹æ‰ä¼šæ‹‰å–ï¼Œå¦åˆ™å¤ç”¨</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_revalidate on | off;
#é»˜è®¤å€¼
proxy_cache_revalidate off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-49"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_use_stale" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_use_stale" ref="nofollow noopener noreferrer">proxy_cache_use_stale</a></h4>
<p>åç«¯æœåŠ¡å¼‚å¸¸æ—¶æ˜¯å¦ä½¿ç”¨è¿‡æœŸç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_use_stale error | timeout | invalid_header | updating | http_500 | http_502 | http_503 | http_504 | http_403 | http_404 | http_429 | off ...;
#é»˜è®¤å€¼
proxy_cache_use_stale off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>error</code>åç«¯è¿”å›ä»»ä½•é”™è¯¯ï¼ˆå¦‚è¿æ¥æ‹’ç»ã€é‡ç½®ç­‰ï¼‰æ—¶ä½¿ç”¨è¿‡æœŸç¼“å­˜</p>
<h4 data-id="heading-50"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_cache_valid" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid" ref="nofollow noopener noreferrer">proxy_cache_valid</a></h4>
<p>è®¾ç½®ä¸åŒå“åº”ä»£ç çš„ç¼“å­˜æœ‰æ•ˆæœŸæ—¶é—´</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
proxy_cache_valid [code ...] time;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p>è‹¥ä»…æŒ‡å®šäº†æ—¶é—´ï¼Œç¼“å­˜çš„å“åº”ç ä¸º200ã€301ã€302ï¼Œ<code>any</code>è¡¨ç¤ºä»»ä½•ç›¸åº”</p>
<h3 data-id="heading-51"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_upstream_module.html" ref="nofollow noopener noreferrer">ngx_http_upstream_module</a></h3>
<h4 data-id="heading-52"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#upstream" ref="nofollow noopener noreferrer">upstream</a></h4>
<p>å®šä¹‰ä¸€ç»„æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å¯ä»¥ç›‘å¬ä¸åŒçš„ç«¯å£</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
upstream name { ... }
#ä½ç½®ï¼šhttp
</code></pre>
<pre><code class="hljs language-nginx" lang="nginx">upstream dynamic {
    server backend1.example.com      weight=5;
    server backend2.example.com:8080;
}
server {
    location / {
        proxy_pass http://dynamic;
        health_check;
    }
}
</code></pre>
<p>æ ¼å¼ä¸ºï¼šåŸŸå/ip[+ç«¯å£]</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
server address [parameters];
#ä½ç½®ï¼šupstream
</code></pre>
<p><code>weight=number</code> è®¾ç½®æœåŠ¡å™¨æƒé‡ï¼Œé»˜è®¤ä¸º1</p>
<p><code>max_fails=number</code> åœ¨<code>fail_timeout</code>æ—¶é—´å†…æœ€å¤§çš„å¤±è´¥æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1ï¼Œè¶…è¿‡åæœåŠ¡è§†ä¸ºä¸å¯ç”¨ã€‚</p>
<p><code>fail_timeout=time</code> 1.å¤±è´¥æ¬¡æ•°çš„æ¬¡åºæ—¶é—´ï¼›2.æœåŠ¡å™¨è¢«è§†ä¸ºä¸å¯ç”¨çš„æ—¶é—´æ®µã€‚</p>
<p><strong>è´Ÿè½½å‡è¡¡æ–¹å¼</strong></p>
<ul>
<li>
<p>è½®è¯¢ï¼ˆé»˜è®¤ï¼‰</p>
</li>
<li>
<p><code>hash key</code> åŸºäºkeyçš„hashæ˜ å°„ï¼Œå¯è®¾ç½®ä¸º<code>$request_uri</code>ç­‰å˜é‡</p>
</li>
<li>
<p><code>ip_hash</code> å¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„ipè¿›è¡Œhashå–ä½™ï¼Œç¡®ä¿åŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚å§‹ç»ˆè½¬å‘åˆ°åŒä¸€æœåŠ¡å™¨</p>
</li>
</ul>
<h3 data-id="heading-53"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html" ref="nofollow noopener noreferrer">ngx_http_rewrite_module</a></h3>
<h4 data-id="heading-54"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite" ref="nofollow noopener noreferrer">rewrite</a></h4>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
rewrite regex replacement [flag];
#ä½ç½®ï¼šserver, location, if
</code></pre>
<p>ä½¿ç”¨ PCRE æ­£åˆ™è¡¨è¾¾å¼æ›´æ”¹è¯·æ±‚ URIï¼Œä¸èƒ½è¶…è¿‡10æ¬¡ï¼Œé€šè¿‡å¼•ç”¨<code>$1</code>ã€<code>$2</code>â€¦å¼•ç”¨URIä¸­çš„æ•è·ç»„</p>
<p><code>flag</code> å‚æ•°å¦‚ä¸‹ï¼š</p>
<p><code>last</code> ç»ˆæ­¢å½“å‰<code>location</code>æˆ–<code>server</code>å—ä¸­çš„æ‰€æœ‰é…ç½®ï¼Œ<strong>æ ¹æ®æ–° URI é‡æ–°åŒ¹é…<code>location</code></strong>ï¼ˆå†…éƒ¨è·³è½¬ï¼‰</p>
<p><code>break</code> ç»ˆæ­¢å½“å‰å—çš„åç»­<code>rewrite</code>è§„åˆ™ï¼Œ<strong>ä¸é‡æ–°åŒ¹é…<code>location</code></strong>ï¼Œåœ¨å½“å‰å—ä¸­ç»§ç»­å¤„ç†è¯·æ±‚</p>
<p><code>redirect</code> è¿”å› 302 ä¸´æ—¶é‡å®šå‘ï¼ˆæµè§ˆå™¨ä¸ä¼šç¼“å­˜è·³è½¬å…³ç³»ï¼‰ï¼Œé€‚ç”¨äºä¸´æ—¶è°ƒæ•´ URL</p>
<p><code>permanent</code> è¿”å› 301 æ°¸ä¹…é‡å®šå‘ï¼ˆæµè§ˆå™¨ä¼šç¼“å­˜è·³è½¬å…³ç³»ï¼‰ï¼Œé€‚ç”¨äº URL æ°¸ä¹…å˜æ›´</p>
<h3 data-id="heading-55"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_referer_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_referer_module.html" ref="nofollow noopener noreferrer">ngx_http_referer_module</a></h3>
<h4 data-id="heading-56"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_referer_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_referer_module.html" ref="nofollow noopener noreferrer">referer</a></h4>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
valid_referers none | blocked | server_names | string ...;
#ä½ç½®ï¼šserver, location
</code></pre>
<p>æŒ‡å®šè¯·æ±‚å¤´ä¸­çš„<code>Referer</code>æ¥æºï¼ŒåµŒå…¥åˆ° <code>$invalid_referer</code> å˜é‡ï¼Œå…è®¸çš„æ¥æºå˜é‡è¢«è®¾ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦åˆ™ä¸º<code>1</code>ï¼Œç»“åˆ<code>if($invalid_referer)</code>åˆ¤æ–­æ˜¯å¦å…è®¸ä»¥å®ç°é˜²ç›—é“¾å’Œè¯·æ±‚æ¥æºéªŒè¯</p>
<p><code>none</code> å…è®¸è¯·æ±‚å¤´ç¼ºå°‘<code>Referer</code></p>
<p><code>blocked</code> å…è®¸è¯·æ±‚å¤´çš„<code>Referer</code>çš„å€¼è¢«é˜²ç«å¢™æˆ–ä»£ç†æœåŠ¡å™¨åˆ é™¤</p>
<p><code>server_names</code> å…è®¸åŒ¹é…<code>server</code>å—ä¸­çš„<code>server_name</code>åŸŸå</p>
<p><code>è‡ªå®šä¹‰å­—ç¬¦ä¸²</code> å¯ä»¥åœ¨å¼€å¤´æˆ–ç»“å°¾æœ‰ <code>*</code></p>
<p><code>æ­£åˆ™è¡¨è¾¾å¼</code> ä»¥<code>~</code>å¼€å§‹</p>
<h3 data-id="heading-57"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html" ref="nofollow noopener noreferrer">ngx_http_gzip_module</a></h3>
<p>ä½¿ç”¨<code>gzip</code>åŠ¨æ€å‹ç¼©å“åº”ï¼Œå‡å°‘ä¼ è¾“æ•°æ®</p>
<h4 data-id="heading-58"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip" ref="nofollow noopener noreferrer">gzip</a></h4>
<p>å¼€å¯æˆ–ç¦ç”¨<code>gzip</code>åŠ¨æ€å‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip on | off
#é»˜è®¤å€¼
gzip off
#ä½ç½®ï¼šhttp, server, location, if in location
</code></pre>
<h4 data-id="heading-59"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_static_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_static_module.html" ref="nofollow noopener noreferrer">gzip_static</a></h4>
<p>æ˜¯å¦å¯ç”¨é¢„å‹ç¼©ç›´æ¥å‘é€é¢„å…ˆå‹ç¼©å¥½çš„é™æ€èµ„æºçš„<code>.gz</code>æ–‡ä»¶</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_static on | off | always;
#é»˜è®¤å€¼
gzip_static off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>on</code>æœ‰é¢„å‹ç¼©æ–‡ä»¶ä¸”å®¢æˆ·ç«¯æ”¯æŒgzipï¼Œå¦åˆ™è¿”å›åŸæ–‡ä»¶</p>
<p><code>off</code>å…³é—­é¢„å‹ç¼©</p>
<p><code>always</code>æœ‰<code>.gz</code>æ–‡ä»¶æ—¶ï¼Œä¸è®ºå®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒç›´æ¥å‘é€é¢„å‹ç¼©æ–‡ä»¶</p>
<h4 data-id="heading-60"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_buffers" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_buffers" ref="nofollow noopener noreferrer">gzip_buffers</a></h4>
<p>è®¾ç½®å‹ç¼©å“åº”çš„ç¼“å†²åŒºæ•°é‡å’Œå¤§å°,é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å†²åŒºå¤§å°ç­‰äºä¸€ä¸ªå†…å­˜é¡µï¼Œå–å†³äºç³»ç»Ÿ</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_buffers number size;
#é»˜è®¤å€¼
gzip_buffers 32 4k|16 8k;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-61"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_comp_level" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_comp_level" ref="nofollow noopener noreferrer">gzip_comp_level</a></h4>
<p>è®¾ç½®å“åº”çš„å‹ç¼©ç­‰çº§ï¼ŒèŒƒå›´ä¸º<code>1~9</code>ï¼Œå€¼è¶Šå¤§å‹ç¼©ç‡è¶Šé«˜ä½†è¶Šè€—è´¹æœåŠ¡å™¨CPU</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_comp_level level;
#é»˜è®¤å€¼
gzip_comp_level 1;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-62"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_disable" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_disable" ref="nofollow noopener noreferrer">gzip_disable</a></h4>
<p>å½“è¯·æ±‚å¤´<code>User-Agent</code>ä¸­çš„å€¼ä¸è¡¨è¾¾å¼åŒ¹é…æ—¶ç¦ç”¨<code>gzip</code>å“åº”å‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_disable regex ...;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-63"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_http_version" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_http_version" ref="nofollow noopener noreferrer">gzip_http_version</a></h4>
<p>è®¾ç½®<code>gzip</code>å‹ç¼©å“åº”æ‰€éœ€çš„æœ€ä½httpç‰ˆæœ¬ï¼Œå¯¹ç¬¦åˆæ¡ä»¶çš„å‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_http_version 1.0 | 1.1;
#é»˜è®¤å€¼
gzip_http_version 1.1;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-64"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_min_length" ref="nofollow noopener noreferrer">gzip_min_length</a></h4>
<p>è®¾ç½®å¯ç”¨å‹ç¼©çš„å“åº”çš„æœ€å°é•¿åº¦ï¼Œç”±<code>Content-Length</code>å“åº”å¤´ç¡®å®šï¼Œé¿å…å¯¹è¿‡å°å“åº”å‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_min_length length;
#é»˜è®¤å€¼
gzip_min_length 20;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-65"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_proxied" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_proxied" ref="nofollow noopener noreferrer">gzip_proxied</a></h4>
<p>æ˜¯å¦å¯¹ä»£ç†æœåŠ¡å™¨çš„å“åº”è¿›è¡Œå‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
c off | expired | no-cache | no-store | private | no_last_modified | no_etag | auth | any ...;
#é»˜è®¤å€¼
gzip_proxied off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<ul>
<li><code>off</code>å¯¹æ‰€æœ‰ä»£ç†è¯·æ±‚ç¦ç”¨å‹ç¼©</li>
<li><code>expired</code>å“åº”å¤´åŒ…å«<code>Expires</code>å­—æ®µä¸”å€¼ä¸ºè¿‡æœŸæ—¶é—´åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>no-cache</code>å“åº”å¤´åŒ…å«æœ‰<code>Cache-Control:no-cache</code>åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>no-store</code>å“åº”å¤´åŒ…å«æœ‰<code>Cache-Control:no-store</code>åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>private</code>å“åº”å¤´åŒ…å«æœ‰<code>Cache-Control:private</code>åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>no_last_modified</code>å“åº”å¤´ä¸åŒ…å«<code>Last-Modified</code>å­—æ®µåˆ™å¯ç”¨å‹ç¼©</li>
<li><code>no_etag</code>å“åº”å¤´ä¸åŒ…å«<code>ETag</code>åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>auth</code>è¯·æ±‚å¤´åŒ…å«<code>Authorization</code>åˆ™å¯ç”¨å‹ç¼©</li>
<li><code>any</code>å¯¹æ‰€æœ‰ä»£ç†è¯·æ±‚å¯ç”¨å‹ç¼©</li>
</ul>
<h4 data-id="heading-66"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_types" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_types" ref="nofollow noopener noreferrer">gzip_types</a></h4>
<p>æŒ‡å®šå¯¹MIMEç±»å‹çš„å“åº”è¿›è¡Œå‹ç¼©</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_types mime-type ...;
#é»˜è®¤å€¼
gzip_types text/html;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-67"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_vary" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_vary" ref="nofollow noopener noreferrer">gzip_vary</a></h4>
<p>ä¸ºå¼€å¯äº†<code>gzip</code>çš„å“åº”æ·»åŠ <code>Vary: Accept-Encoding</code>å“åº”å¤´ï¼Œè¯¥å“åº”å¤´ç”¨äºå‘Šè¯‰ç¼“å­˜æœåŠ¡å™¨ï¼Œå½“å‰èµ„æºæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­çš„<code>Accept-Encoding</code>å˜åŒ–ï¼Œä»…<code>gzip on</code>/<code>gzip_static on</code>å¼€å¯æ—¶å¯ç”¨</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
gzip_vary on | off;
#é»˜è®¤å€¼
gzip_vary off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-68"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle%2Fngx_brotli" target="_blank" title="https://github.com/google/ngx_brotli" ref="nofollow noopener noreferrer">brotli</a></h4>
<p>æ¯”gzipå‹ç¼©æ•ˆç‡æ›´é«˜çš„å‹ç¼©ç®—æ³•ï¼Œä»…åœ¨httpsä¸­èƒ½ç”¨</p>
<h3 data-id="heading-69"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_ssl_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" ref="nofollow noopener noreferrer">ngx_http_ssl_module</a></h3>
<h4 data-id="heading-70"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_ssl_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" ref="nofollow noopener noreferrer">ssl</a></h4>
<p><code>http</code>ã€<code>server</code>ã€<code>location</code></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen              443 ssl;
    keepalive_timeout   70;

    ssl_protocols       TLSv1.2 TLSv1.3;
    ssl_ciphers         AES128-SHA:AES256-SHA:RC4-SHA:DES-CBC3-SHA:RC4-MD5;
    ssl_certificate     /usr/local/nginx/conf/cert.pem;
    ssl_certificate_key /usr/local/nginx/conf/cert.key;
    ssl_session_cache   shared:SSL:10m;
    ssl_session_timeout 10m;
}
</code></pre>
<p><code>listen 443 ssl</code> å¼€å¯httpsï¼Œé»˜è®¤çš„ç«¯å£ä¸º443</p>
<p><code>ssl_certificate</code> sslè¯ä¹¦</p>
<p><code>ssl_certificate_key</code> sslç§é’¥</p>
<h3 data-id="heading-71"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_ssi_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_ssi_module.html" ref="nofollow noopener noreferrer">ngx_http_ssi_module</a></h3>
<p>æœåŠ¡ç«¯åŒ…å«ï¼Œé€šè¿‡ç‰¹å®šæŒ‡ä»¤åœ¨æœåŠ¡å™¨ç«¯åˆå¹¶é™æ€æ–‡ä»¶ã€åŠ¨æ€å†…å®¹ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯</p>
<h4 data-id="heading-72"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_ssi_module.html%23ssi" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_ssi_module.html#ssi" ref="nofollow noopener noreferrer">ssi</a></h4>
<p>å¼€å¯æˆ–ç¦ç”¨</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
ssi on | off;
#é»˜è®¤å€¼
ssi off;
#ä½ç½®ï¼šhttp, server, location, if in location
</code></pre>
<p>å¼€å¯æˆ–ç¦ç”¨ï¼Œæ ¹æ®è¯·æ±‚å¤´ä¸­çš„<code>If-Modified-Since</code>ä¸ä¸»æ–‡ä»¶çš„<code>Last-Modified</code>å¯¹æ¯”æ˜¯å¦æ›´æ–°ï¼Œå¹¶è®¾ç½®å“åº”å¤´<code>Last-Modified</code></p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
ssi_last_modified on | off;
#é»˜è®¤å€¼
ssi_last_modified off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><strong>ssiå‘½ä»¤</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">&lt;!--# include file="footer.html" --&gt;
</code></pre>
<p>æŒ‡å®šä¸€ä¸ªæ–‡ä»¶åŒ…å«å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚åœ¨htmlä¸­ä½¿ç”¨</p>
<h3 data-id="heading-73"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html" ref="nofollow noopener noreferrer">ngx_http_limit_req_module</a></h3>
<p>è¯·æ±‚é™æµæ¨¡å—ï¼ŒåŸºäº<strong>æ¼æ¡¶ç®—æ³•</strong>ï¼ˆæ¼æ¡¶å®¹é‡å’Œæµå‡ºè¯·æ±‚é€Ÿç‡å›ºå®šï¼Œè¯·æ±‚è¿‡å¿«ä¼šæº¢å‡ºæ‹’ç»è¯·æ±‚ï¼‰ï¼Œé™åˆ¶å•ä½æ—¶é—´å†…æ¥è‡ªkeyæ ‡è¯†çš„è¯·æ±‚æ¬¡æ•°</p>
<h4 data-id="heading-74"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html%23limit_req_zone" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_zone" ref="nofollow noopener noreferrer">limit_req_zone</a></h4>
<p>å®šä¹‰ä¸€ä¸ªå…±äº«å†…å­˜åŒºï¼Œå¯é…ç½®å¤šä¸ª</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_req_zone key zone=name:size rate=rate [sync];
#ä½ç½®ï¼šhttp
</code></pre>
<p><code>key</code>é’ˆå¯¹é™æµçš„keyï¼ˆæŒ‰ä»€ä¹ˆæ ‡è¯†é™æµï¼‰ï¼Œå¯ä»¥åŒ…å«æ–‡æœ¬ã€å˜é‡åŠå…¶ç»„åˆï¼Œå¦‚ä½¿ç”¨å˜é‡<code>$binary_remote_addr</code>è¡¨ç¤ºçš„æ˜¯å®¢æˆ·ç«¯çš„ipåœ°å€çš„äºŒè¿›åˆ¶å½¢å¼ï¼Œå ç”¨å†…å­˜å°ï¼Œ<code>$remote_addr</code>å®¢æˆ·ç«¯ipåœ°å€å­—ç¬¦ä¸²å½¢å¼ï¼Œ<code>$server_name</code>é’ˆå¯¹<code>server</code>ä¸­çš„<code>server_name</code>é™æµ</p>
<p><code>zone</code>å®šä¹‰çš„å…±äº«å†…å­˜åŒºåŸŸï¼Œå…¶ä¸­<code>name</code>è¡¨ç¤ºåŒºåŸŸåç§°ï¼Œ<code>size</code>è¡¨ç¤ºåŒºåŸŸå¤§å°å¦‚<code>10m</code>ï¼Œå­˜å‚¨ç»Ÿè®¡æ•°æ®ï¼Œè‹¥å­˜å‚¨å·²æ»¡ï¼Œåˆ™ä¼šç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„ï¼Œè‹¥è¿˜æ˜¯ä¸è¡Œåˆ™ä»¥é”™è¯¯å½¢å¼ç»ˆæ­¢è¯·æ±‚</p>
<p><code>rate</code>é™æµé€Ÿç‡ï¼ˆæ¼æ¡¶è¯·æ±‚æµå‡ºé€Ÿç‡ï¼‰ï¼Œå¦‚<code>10r/s</code>ï¼ˆæ¯ç§’æœ€å¤š 10 æ¬¡è¯·æ±‚ï¼‰ã€<code>60r/m</code>ï¼ˆæ¯åˆ†é’Ÿæœ€å¤š 60 æ¬¡ï¼Œå³æ¯ç§’ 1 æ¬¡ï¼‰</p>
<h4 data-id="heading-75"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html%23limit_req" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req" ref="nofollow noopener noreferrer">limit_req</a></h4>
<p>å¼•ç”¨<code>limit_req_zone</code>ä¸­çš„å…±äº«å†…å­˜åŒºåŸŸå¯¹è¯¥åŒºå—è¯·æ±‚ç”Ÿæ•ˆï¼Œå¯é…ç½®å¤šä¸ª</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_req zone=name [burst=number] [nodelay | delay=number];
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>zone</code>å¼•ç”¨<code>limit_req_zone</code>å¯¹åº”çš„åŒºåŸŸåç§°</p>
<p><code>burst</code>çªå‘è¯·æ±‚ï¼ˆå³è¶…å‡ºè¯·æ±‚é™åˆ¶çš„è¯·æ±‚ï¼‰çš„ç¼“å†²é˜Ÿåˆ—å¤§å°ï¼Œè¶…è¿‡è¯¥é˜Ÿåˆ—çš„è¯·æ±‚å°†ä»¥é”™è¯¯å½¢å¼ç»ˆæ­¢è¯·æ±‚ï¼Œé»˜è®¤ä¸º0ï¼Œ<strong>é’ˆå¯¹æ¯ä¸ªkey</strong></p>
<p><code>nodelay</code>è®©<code>burst</code>é˜Ÿåˆ—ä¸­è¯·æ±‚è·³è¿‡ç­‰å¾…ï¼Œç›´æ¥å¤„ç†ï¼Œä¸<code>burst</code>ç»‘å®šï¼Œä½†ä¸è¶…è¿‡<code>rate</code>é€Ÿç‡ï¼Œæ— <code>nodellay</code>æ—¶ï¼Œæ’é˜Ÿåœ¨ä¸€å®šå»¶è¿Ÿåè¿›è¡Œå¤„ç†ï¼Œæœ‰<code>nodelay</code>æ—¶æ»¡è¶³<code>rate</code>çš„æƒ…å†µä¸‹ç«‹å³å¤„ç†ä¸å»¶è¿Ÿ</p>
<p><code>delay</code>ä¸<code>nodelay</code>ç›¸åï¼Œåœ¨ç¼“å†²é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼Œæ»¡è¶³<code>rate</code>æƒ…å†µä¸‹ï¼Œä¸€å®š<code>number</code>å»¶è¿Ÿåå¤„ç†</p>
<h4 data-id="heading-76"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html%23limit_req_dry_run" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_dry_run" ref="nofollow noopener noreferrer">limit_req_dry_run</a></h4>
<p>æ¨¡æ‹Ÿé™æµè§„åˆ™çš„æ‰§è¡Œé€»è¾‘ï¼Œä½†ä¸çœŸæ­£æ‹’ç»ä»»ä½•è¯·æ±‚ï¼Œä»…é€šè¿‡æ—¥å¿—è®°å½• â€œæœ¬åº”è¢«é™æµâ€ çš„è¯·æ±‚</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_req_dry_run on | off;
#é»˜è®¤å€¼
limit_req_dry_run off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-77"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html%23limit_req_log_level" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_log_level" ref="nofollow noopener noreferrer">limit_req_log_level</a></h4>
<p>æ§åˆ¶é™æµç›¸å…³æ—¥å¿—è®°å½•çº§åˆ«</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_req_log_level info | notice | warn | error;
#é»˜è®¤å€¼
limit_req_log_level error;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h4 data-id="heading-78"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_req_module.html%23limit_req_status" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_status" ref="nofollow noopener noreferrer">limit_req_status</a></h4>
<p>é™æµæ‹’ç»æ—¶çš„å“åº”ç è®¾ç½®</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_req_status code;
#é»˜è®¤å€¼
limit_req_status 503;
c, server, location
</code></pre>
<h3 data-id="heading-79"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_conn_module.html" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html" ref="nofollow noopener noreferrer">ngx_http_limit_conn_module</a></h3>
<p>é™åˆ¶åŸºäºkeyæ ‡è¯†çš„è¿æ¥æ•°é‡ï¼Œå¤„äº<strong>æ´»è·ƒçš„TCPè¿æ¥æ•°</strong>ï¼ˆæœåŠ¡å™¨æ­£åœ¨å¤„ç†è¯·æ±‚å¹¶ä¸”è¯·æ±‚å¤´å·²è¯»å–å®Œæ¯•çš„æ‰ä¼šè®¡ç®—ï¼‰</p>
<h4 data-id="heading-80"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_conn_module.html%23limit_conn_zone" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_zone" ref="nofollow noopener noreferrer">limit_conn_zone</a></h4>
<p>å®šä¹‰ä¸€ä¸ªå…±äº«å†…å­˜åŒºï¼Œä¿å­˜å„keyçš„çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«æ–‡æœ¬ã€å˜é‡åŠå…¶ç»„åˆï¼Œå¯é…ç½®å¤šä¸ª</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_conn_zone key zone=name:size;
#ä½ç½®ï¼šhttp
</code></pre>
<p><code>key</code>é’ˆå¯¹é™åˆ¶è¿æ¥çš„key</p>
<p><code>zone</code>å®šä¹‰çš„å…±äº«å†…å­˜åŒºåŸŸ</p>
<h4 data-id="heading-81"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_limit_conn_module.html%23limit_conn" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn" ref="nofollow noopener noreferrer">limit_conn</a></h4>
<p>è®¾ç½®keyçš„æœ€å¤§è¿æ¥æ•°</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
limit_conn zone number;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<p><code>zone</code>æŒ‡<code>limit_conn_zone</code>ä¸­çš„<code>zone</code></p>
<p><code>number</code>æœ€å¤§è¿æ¥æ•°</p>
<h3 data-id="heading-82"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_log_module.html%23log_format" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format" ref="nofollow noopener noreferrer">ngx_http_log_module</a></h3>
<p>è¯·æ±‚æ—¥å¿—ï¼Œè¯·æ±‚ç»“æŸæ—¶è®°å½•</p>
<h4 data-id="heading-83"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_log_module.html%23access_log" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_log_module.html#access_log" ref="nofollow noopener noreferrer">access_log</a></h4>
<p>è®¿é—®æ—¥å¿—ï¼Œæ¯æ¬¡å†™å…¥æ—¥å¿—éƒ½ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™ä¸å†™å…¥</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];
access_log off;
#é»˜è®¤å€¼
access_log logs/access.log combined;
#ä½ç½®ï¼šhttp, server, location, if in location, limit_except
</code></pre>
<p><code>path</code>æ—¥å¿—è·¯å¾„</p>
<p><code>format</code>æ—¥å¿—æ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–é…ç½®åœ¨<code>log_format</code>ä¸­ï¼Œé»˜è®¤ä½¿ç”¨<code>combined</code></p>
<p><code>buffer</code>å¯ç”¨ç¼“å­˜åŒºï¼Œæ—¥å¿—æš‚æ”¾åœ¨å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œè¶…è¿‡ç¼“å†²åŒºå¤§å°åå†™å…¥ç£ç›˜ï¼Œæˆ–é…ç½®<code>flush</code>ä½¿ç”¨</p>
<p><code>gzip</code>å¼€å¯æ—¥å¿—gzipå‹ç¼©çš„ç­‰çº§ï¼Œåœ¨å†™å…¥ç£ç›˜ä¹‹å‰å‹ç¼©ï¼Œ<code>1-9</code></p>
<p><code>flush</code>æ—¥å¿—ä»ç¼“å†²åŒºåˆ·æ–°åˆ°ç£ç›˜çš„æ—¶é—´</p>
<p><code>if</code>å¦‚æœconditionä¸º0æˆ–ç©ºå­—ç¬¦ä¸²åˆ™ä¸è®°å½•æ—¥å¿—</p>
<h4 data-id="heading-84"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_log_module.html%23log_format" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format" ref="nofollow noopener noreferrer">log_format</a></h4>
<p>æ ¼å¼åŒ–æ—¥å¿—</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
log_format name [escape=default|json|none] string ...;
#é»˜è®¤å€¼
log_format combined "..."
#ä½ç½®ï¼šhttp
</code></pre>
<h4 data-id="heading-85"><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_log_module.html%23open_log_file_cache" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_log_module.html#open_log_file_cache" ref="nofollow noopener noreferrer">open_log_file_cache</a></h4>
<p>æ—¥å¿—æ–‡ä»¶æè¿°ç¬¦ç¼“å­˜</p>
<pre><code class="hljs language-nginx" lang="nginx">#è¯­æ³•
open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time];
open_log_file_cache off;
#é»˜è®¤å€¼
open_log_file_cache off;
#ä½ç½®ï¼šhttp, server, location
</code></pre>
<h2 data-id="heading-86">å…¶ä»–è¯´æ˜</h2>
<h3 data-id="heading-87">è·å–å®¢æˆ·ç«¯ip</h3>
<p>nginxä½œä¸ºä»£ç†æœåŠ¡å™¨åå‘ä»£ç†åç«¯æ—¶ï¼Œåç«¯æ— æ³•è·å–ç”¨æˆ·ipåœ°å€æ—¶ï¼Œå¢åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">proxy_set_header X-Forwarded-For $remote_addr;
</code></pre>
<p><code>$remote_addr</code>å®¢æˆ·ç«¯ä¸nginxè¿æ¥æ—¶çš„ipåœ°å€ï¼Œè‹¥ç»è¿‡å¤šçº§åå‘ä»£ç†ï¼Œå¯ä½¿ç”¨å˜é‡<code>$proxy_add_x_forwarded_for</code>ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­çš„ <code>X-Forwarded-For</code> å­—æ®µï¼Œå†åŠ ä¸Š <code>$remote_addr</code> å˜é‡çš„å€¼ï¼Œä¸¤è€…ç”¨é€—å·åˆ†éš”ã€‚å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­æ²¡æœ‰ â€œX-Forwarded-Forâ€ å­—æ®µï¼Œé‚£ä¹ˆ <code>$proxy_add_x_forwarded_for</code> å˜é‡å°±ç­‰äº <code>$remote_addr</code> å˜é‡ã€‚</p>
<h3 data-id="heading-88">worker_processes</h3>
<p>å·¥ä½œè¿›ç¨‹æ•°ï¼Œä¸€èˆ¬é…ç½®ä¸ºç‰©ç†æœºCUPæ ¸æ•°</p>
<h3 data-id="heading-89">worker_connections</h3>
<p>ä¸€ä¸ªè¿›ç¨‹çš„è¿æ¥æ•°ï¼ŒåŒ…å«ä¸åå‘ä»£ç†æœåŠ¡å™¨çš„è¿æ¥</p>
<h3 data-id="heading-90">å‹ç¼©</h3>
<p>gzipåŠ¨æ€å‹ç¼©å¼€å¯åæ— æ³•ä½¿ç”¨sendfile</p>
<h3 data-id="heading-91">concatæ¨¡å—</h3>
<p>å‹ç¼©è¯·æ±‚æ•°ï¼Œå¦‚å°†å¤šä¸ªcssã€jsã€å›¾ç‰‡ç­‰è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªï¼Œgitåœ°å€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fnginx-http-concat%25EF%25BC%258C%25E5%259C%25B0%25E5%259D%2580https%3A%2F%2Ftengine.taobao.org%2Fdocument_cn%2Fhttp_concat_cn.html" target="_blank" title="https://github.com/alibaba/nginx-http-concat%EF%BC%8C%E5%9C%B0%E5%9D%80https://tengine.taobao.org/document_cn/http_concat_cn.html" ref="nofollow noopener noreferrer">github.com/alibaba/ngiâ€¦</a></p>
<h3 data-id="heading-92">è‡ªåŠ¨åŒ–åŒæ­¥rsyncã€inotify</h3>
<p>inotifyç›‘æ§ç›®å½•æ˜¯å¦æœ‰å˜åŒ–ï¼Œåœ¨é€šè¿‡äº‹ä»¶æ‰§è¡Œè‡ªåŠ¨åŒ–è„šæœ¬rsyncåŒæ­¥æºæ–‡ä»¶ä»¥è‡ªåŠ¨åŒæ­¥æºæ–‡ä»¶</p>
<h3 data-id="heading-93">å¤šçº§ç¼“å­˜</h3>
<h4 data-id="heading-94">åå•†ç¼“å­˜</h4>
<p><code>Last-Modified</code>:å®¢æˆ·ç«¯è¯·æ±‚æ—¶å¸¦ä¸Š<code>If-Modified-Since</code>è¯·æ±‚å¤´ï¼ŒæœåŠ¡å™¨æ£€æŸ¥æ–‡ä»¶çš„<code>last_modify</code>æ˜¯å¦èƒ½å¯¹ä¸Šï¼Œè¿”å›å“åº”å¤´<code>Last-Modified</code>å“åº”çŠ¶æ€ç ä¸º304ï¼Œå®¢æˆ·ç«¯ç›´æ¥ä»æœ¬åœ°è¯»å–</p>
<p><code>ETag</code>:ç²¾åº¦æ¯”<strong>last-modified</strong>é«˜ï¼Œè¯·æ±‚æ—¶æºå¸¦<code>If-None-Match</code>è¯·æ±‚å¤´ï¼Œè¿”å›å“åº”å¤´ä¸­å«æœ‰<code>ETag</code>ï¼ŒçŠ¶æ€ç ä¹Ÿæ˜¯304</p>
<h4 data-id="heading-95">å¼ºåˆ¶ç¼“å­˜</h4>
<p>å“åº”å¤´ä¸­è®¾ç½®<code>Cache-Control</code></p>
<p><code>public</code>å“åº”çš„æ•°æ®å¯ä»¥è¢«ç¼“å­˜ï¼Œå®¢æˆ·ç«¯å’Œä»£ç†ç«¯éƒ½å¯ä»¥ç¼“å­˜</p>
<p><code>private</code>å¯ç§æœ‰ç¼“å­˜ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼Œä»£ç†ä¸èƒ½ç¼“å­˜</p>
<p><code>no-cache</code>å¯ä»¥ä½¿ç”¨ç¼“å­˜ï¼Œä½†å¿…é¡»å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨å›æºéªŒè¯</p>
<p><code>no-store</code>ç¦ç”¨ç¼“å­˜</p>
<p><code>max-age</code>åœ¨æµè§ˆå™¨ç¼“å­˜çš„æ—¶é—´ä»¥ç§’ä¸ºå•ä½</p>
<h3 data-id="heading-96">è¿›ç¨‹è¿½è¸ª</h3>
<p>linuxä¸­ä½¿ç”¨strace</p>
<h3 data-id="heading-97">é’ˆå¯¹å®¢æˆ·ç«¯ipé™æµ</h3>
<p>åœ¨httpå—ä¸­ï¼Œé’ˆå¯¹å®¢æˆ·ç«¯ipé™æµï¼Œæ¯åˆ†é’Ÿ30ä¸ªè¯·æ±‚</p>
<pre><code class="hljs language-nginx" lang="nginx">limit_req_zone $binary_remote_addr zone=limitClient:10m rate=30r/m;
</code></pre>
<p>åœ¨locationä¸­</p>
<pre><code class="hljs language-nginx" lang="nginx">limit_req zone=limitClient burst=5
</code></pre>
<h3 data-id="heading-98">ä¼ è¾“é™é€Ÿ</h3>
<p>ä¼ è¾“åˆ°è¾¾10måé™é€Ÿä¸º1m/s</p>
<pre><code class="hljs language-nginxlimit_rate" lang="nginxlimit_rate">limit_rate 1m
limit_rate_after 10m
</code></pre>
<h3 data-id="heading-99">é’ˆå¯¹å®¢æˆ·ç«¯ipé™åˆ¶è¿æ¥æ•°</h3>
<p>åœ¨httpå—ä¸­ï¼Œé’ˆå¯¹å®¢æˆ·ç«¯ipé™åˆ¶è¿æ¥æ•°ï¼Œæœ€å¤§è¿æ¥æ•°ä¸º5</p>
<pre><code class="hljs language-nginx" lang="nginx">limit_conn_zone $binary_remote_addr zone=limitClient:10m;
</code></pre>
<p>åœ¨locationä¸­</p>
<pre><code class="hljs language-nginx" lang="nginx">limit_conn limitClient 5
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[26 trait-å¤šç»§æ‰¿è¯¦è§£]]></title>    <link>https://juejin.cn/post/7576543407014068243</link>    <guid>https://juejin.cn/post/7576543407014068243</guid>    <pubDate>2025-11-26T02:32:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576543407014068243" data-draft-id="7576543407012970515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="26 trait-å¤šç»§æ‰¿è¯¦è§£"/> <meta itemprop="keywords" content="Scala"/> <meta itemprop="datePublished" content="2025-11-26T02:32:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9274"/> <meta itemprop="url" content="https://juejin.cn/user/2270955579638731"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            26 trait-å¤šç»§æ‰¿è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2270955579638731/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9274
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:32:02.000Z" title="Wed Nov 26 2025 02:32:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€. å¤šä¸ªtraitçš„åŠ è½½é¡ºåº</h2>
<p>å®ç°å¤šç»§æ‰¿ï¼Œæ³¨æ„è§‚å¯Ÿçˆ¶å­ç±»çš„æ„é€ å™¨çš„æ‰§è¡Œé¡ºåº</p>
<ol>
<li>å…ˆçˆ¶åå­</li>
<li>æœ‰å¤šä¸ªçˆ¶ç±»ï¼ŒæŒ‰ä¹¦å†™é¡ºåºä»å·¦åˆ°å³æ‰§è¡Œ</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8ad7d86e74a412ebe15748e7a96c02f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOTI3NA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729122&amp;x-signature=%2BmvIoLr8pAjFd4n5wLHbhEDSenU%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">A</span> </span>{
  println(<span class="hljs-string">"a"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">B</span> </span>{
  println(<span class="hljs-string">"b"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> <span class="hljs-keyword">with</span> <span class="hljs-title">B</span> </span>{
  println(<span class="hljs-string">"class1"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">new</span> <span class="hljs-type">Class1</span>()
}
</code></pre>
<p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b0a14c4fd7d41a7b3525497153af0a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOTI3NA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729122&amp;x-signature=1yLMpI7OoU5LBcfTvUp6c9sDTPE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒ. å¤šå±‚traitçš„åŠ è½½é¡ºåº</h2>
<p>å…ˆæ‰§è¡Œçˆ¶ç±»ä¸­çš„æ„é€ å™¨ï¼Œå†æ‰§è¡Œå­ç±»çš„æ„é€ å™¨ï¼šå¦‚æœtrait1ä¹Ÿæœ‰è‡ªå·±çš„çˆ¶ç±»ï¼Œè¦å…ˆæ‰§è¡Œçˆ¶ç±»æ„é€ å™¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b09c5051ffa43c0a4192b99b1e299c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOTI3NA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729122&amp;x-signature=%2BsJ3%2FB2z0IJgEheV9%2Bnb1jOkRpE%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-Scala" lang="Scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">A</span> </span>{
  println(<span class="hljs-string">"A"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">BB</span> </span>{
  println(<span class="hljs-string">"BB"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BB</span> </span>{
  println(<span class="hljs-string">"B"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">CC</span> </span>{
  println(<span class="hljs-string">"CC"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CC</span> </span>{
  println(<span class="hljs-string">"C"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">C</span> <span class="hljs-keyword">with</span> <span class="hljs-title">A</span> <span class="hljs-keyword">with</span> <span class="hljs-title">B</span> </span>{
  println(<span class="hljs-string">"Class1"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">new</span> <span class="hljs-type">Class1</span>()
}
</code></pre>
<p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feccbcfd151c49c48da899e03998bac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOTI3NA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729122&amp;x-signature=osCAINEXeHuPwqFUXzpePd1w9dM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰. ç©ºæŒ‡é’ˆå¼‚å¸¸</h2>
<p>é”™è¯¯ä»£ç æ¼”ç¤º</p>
<pre><code class="hljs language-Scala" lang="Scala"><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">FileWriter</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Class24</span> </span>{

  <span class="hljs-comment">// åœ¨æ–‡ä»¶ä¸­å†™å…¥æ—¥å¿—</span>
  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">FileLogger</span> </span>{
    <span class="hljs-comment">// æŠ½è±¡å­—æ®µ</span>
    <span class="hljs-keyword">val</span> filename: <span class="hljs-type">String</span>
    <span class="hljs-keyword">val</span> fileWriter = <span class="hljs-keyword">new</span> <span class="hljs-type">FileWriter</span>(filename, <span class="hljs-literal">true</span>)
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">writeLog</span></span>(msg: <span class="hljs-type">String</span>): <span class="hljs-type">Unit</span> = {
      fileWriter.write(msg)
      fileWriter.close()
    }
  }

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFileLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FileLogger</span> </span>{
    <span class="hljs-keyword">val</span> filename = <span class="hljs-string">"11-26.log"</span>
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">val</span> fileLogger = <span class="hljs-keyword">new</span> <span class="hljs-type">MyFileLogger</span>()
    fileLogger.writeLog(<span class="hljs-string">"ä»Šå¤©ä¸Šåˆä¸Šscalaè¯¾ç¨‹"</span>)
  }

}
</code></pre>
<p>ä¿®æ”¹ä»£ç </p>
<pre><code class="hljs language-Scala" lang="Scala"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> fileWriter = <span class="hljs-keyword">new</span> <span class="hljs-type">FileWriter</span>(filename, <span class="hljs-literal">true</span>)
</code></pre>
<p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b2d8aff15434f719daf0cb6faddcfba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOTI3NA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729122&amp;x-signature=PUs2PzIP2P28kKqYO4OvatZ0KPs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">å››. traitä¸æŠ½è±¡ç±»çš„åŒºåˆ«</h2>
<p><strong>ç›¸åŒç‚¹ï¼š</strong> ç±»å’Œtraitéƒ½å¯ä»¥å®šä¹‰æˆå‘˜å˜é‡ï¼ˆæŠ½è±¡ï¼Œå…·ä½“ï¼‰ï¼›ç»§æ‰¿æ—¶éƒ½ä½¿ç”¨extendså…³é”®å­—ï¼›</p>
<p><strong>ä¸åŒç‚¹ï¼š</strong> traitçš„æ„é€ å™¨ä¸èƒ½å¸¦å‚æ•°ï¼›traitæ”¯æŒå¤šç»§æ‰¿ï¼›</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨wechatapiè¿›è¡Œå¾®ä¿¡äºŒæ¬¡å¼€å‘ï¼Œå¾®ä¿¡api]]></title>    <link>https://juejin.cn/post/7576550156365250566</link>    <guid>https://juejin.cn/post/7576550156365250566</guid>    <pubDate>2025-11-26T02:23:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576550156365250566" data-draft-id="7576273949187522602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨wechatapiè¿›è¡Œå¾®ä¿¡äºŒæ¬¡å¼€å‘ï¼Œå¾®ä¿¡api"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T02:23:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰¾ä¸åˆ°å¯¹è±¡å°±NEWä¸€ä¸ª"/> <meta itemprop="url" content="https://juejin.cn/user/1672835912700475"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨wechatapiè¿›è¡Œå¾®ä¿¡äºŒæ¬¡å¼€å‘ï¼Œå¾®ä¿¡api
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1672835912700475/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰¾ä¸åˆ°å¯¹è±¡å°±NEWä¸€ä¸ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:23:15.000Z" title="Wed Nov 26 2025 02:23:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é»˜è®¤æ¨¡å— wechatapi.net</h2>
<p>Base URLs:  wechatapi.net</p>
<h2 data-id="heading-1">Authentication</h2>
<h2 data-id="heading-2">å¼€å‘API/ç™»å½•æ¨¡å—</h2>
<h3 data-id="heading-3">POST (æ­¥éª¤1)è·å–ç™»å½•äºŒç»´ç </h3>
<p>POST /login/getLoginQrCode</p>
<ul>
<li>appIdå‚æ•°ä¸ºè®¾å¤‡IDï¼Œé¦–æ¬¡ç™»å½•ä¼ ç©ºï¼Œä¼šè‡ªåŠ¨è§¦å‘åˆ›å»ºè®¾å¤‡ï¼Œæ‰çº¿åé‡æ–°ç™»å½•åˆ™å¿…é¡»ä¼ æ¥å£è¿”å›çš„appIdï¼Œæ³¨æ„<strong>åŒä¸€ä¸ªå·é¿å…é‡å¤åˆ›å»ºè®¾å¤‡</strong>ï¼Œä»¥å…è§¦å‘å®˜æ–¹é£æ§
<strong>- ç™»å½•æ—¶å¿…é¡»é€‰æ‹©æœ¬çœåœ°åŒºIDï¼Œå¦‚æ— æœ¬çœåœ°åŒºIDè¯·è‡ªè¡Œè´­ä¹°æœ¬çœæˆ–æœ¬å¸‚ä»£ç†IP</strong></li>
<li>å¦‚æœ<strong>IPADç±»å‹æ‰«ç ç™»å½•æç¤º</strong> â€œåœ¨<strong>æ–°è®¾å¤‡å®ŒæˆéªŒè¯ä»¥ç»§ç»­ç™»å½•</strong>â€ éœ€è¦æ›´æ¢typeä¸ºmacè¿›è¡Œç™»å½•ï¼Œåˆ‡æ¢é¡ºåºä¸ºipad--&gt;macã€‚macç±»å‹å¯ä»¥è¿›è¡ŒéªŒè¯ï¼Œ<strong>å½“macå‡ºç°æ–°è®¾å¤‡éªŒè¯æ—¶ï¼Œå‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fpost.wechatapi.net%2Flogin%2Fchecklogin" target="_blank" title="https://post.wechatapi.net/login/checklogin" ref="nofollow noopener noreferrer">æ‰§è¡Œç™»å½•æ¥å£</a>ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨macç™»å½•</strong></li>
<li><strong>å–ç æ—¶ä¼ çš„appIdéœ€è¦ä¸ä¸Šæ¬¡ç™»å½•æ‰«ç çš„å¾®ä¿¡ä¸€è‡´ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç™»å½•å¤±è´¥</strong></li>
</ul>
<blockquote>
<p>å¦‚æœéœ€è¦å…¨å±€ä»£ç†ï¼ˆå³æ‰€æœ‰æ¥å£éƒ½èµ°ä»£ç†ï¼Œå¯ç›´æ¥åœ¨è°ƒç”¨çš„æ¥å£å†…å¢åŠ " useProxy:true "å­—æ®µã€‚useproxyå­—æ®µé»˜è®¤ä¸ºfalseä¸å•ç‹¬å±•ç¤ºåœ¨å„ä¸ªæ¥å£å†…ï¼‰ä½†æ˜¯æœ‰å¯èƒ½ä¼šå½±å“æ¥å£çš„å®æ—¶å“åº”é€Ÿåº¦</p>
</blockquote>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F1_lCoPDKSLUW90Ew4yKMyoQ%3Fpwd%3D1xdt" target="_blank" title="https://pan.baidu.com/s/1_lCoPDKSLUW90Ew4yKMyoQ?pwd=1xdt" ref="nofollow noopener noreferrer">ä»£ç†TTUIDç‚¹å‡»ä¸‹è½½</a></li>
</ul>

<p><strong>åœ°åŒºIDåœ¨å‰ï¼Œåœ°åŒºåœ¨å</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">110000</span>*åŒ—äº¬å¸‚|<span class="hljs-number">120000</span>*å¤©æ´¥å¸‚|<span class="hljs-number">130000</span>*æ²³åŒ—çœ|<span class="hljs-number">140000</span>*å±±è¥¿çœ|<span class="hljs-number">150000</span>*å†…è’™å¤
<span class="hljs-number">210000</span>*è¾½å®çœ|<span class="hljs-number">220000</span>*å‰æ—çœ|<span class="hljs-number">230000</span>*é»‘é¾™æ±Ÿ
<span class="hljs-number">310000</span>*ä¸Šæµ·å¸‚|<span class="hljs-number">320000</span>*æ±Ÿè‹çœ|<span class="hljs-number">330000</span>*æµ™æ±Ÿçœ|<span class="hljs-number">340000</span>*å®‰å¾½çœ|<span class="hljs-number">350000</span>*ç¦å»ºçœ|<span class="hljs-number">360000</span>*æ±Ÿè¥¿çœ|<span class="hljs-number">370000</span>*å±±ä¸œçœ
<span class="hljs-number">410000</span>*æ²³å—çœ|<span class="hljs-number">420000</span>*æ¹–åŒ—çœ|<span class="hljs-number">430000</span>*æ¹–å—çœ|<span class="hljs-number">440000</span>*å¹¿ä¸œçœ|<span class="hljs-number">450000</span>*å¹¿è¥¿çœ|<span class="hljs-number">460000</span>*æµ·å—çœ
<span class="hljs-number">500000</span>*é‡åº†å¸‚|<span class="hljs-number">510000</span>*å››å·çœ|<span class="hljs-number">520000</span>*è´µå·çœ|<span class="hljs-number">530000</span>*äº‘å—çœ|<span class="hljs-number">540000</span>*è¥¿è—è‡ªæ²»åŒº
<span class="hljs-number">610000</span>*é™•è¥¿çœ|<span class="hljs-number">620000</span>*ç”˜è‚ƒçœ|<span class="hljs-number">630000</span>*é’æµ·çœ|<span class="hljs-number">640000</span>*å®å¤è‡ªæ²»åŒº|<span class="hljs-number">650000</span>*æ–°ç–†è‡ªæ²»åŒº
</code></pre>

<ul>
<li>è‹¥ç›®å‰æ”¯æŒçš„regionIdä¸­æ²¡æœ‰æ‚¨æ‰€åœ¨çš„åœ°åŒºï¼Œå¯ä»¥è‡ªè¡Œé‡‡è´­socks5åè®®ä»£ç†IPï¼Œå¡«å†™åˆ°proxyIpå‚æ•°ä¸­</li>
<li>å“åº”ç»“æœä¸­çš„qrImgBase64ä¸ºäºŒç»´ç å›¾ç‰‡çš„base64ï¼Œå‰ç«¯å¯ä½¿ç”¨æ­¤å€¼å±•ç¤ºç»™ç”¨æˆ·æ‰«ç ã€‚ï¼ˆæˆ–ä½¿ç”¨å“åº”ç»“æœä¸­çš„qrDataç”ŸæˆäºŒç»´ç ï¼‰</li>
<li>åœ°åŒºIDä»…ä¾›æµ‹è¯•ï¼Œå¦‚éœ€æ­£å¸¸ä½¿ç”¨ä¸šåŠ¡å»ºè®®è‡ªè¡Œè´­ä¹°å¹²å‡€ä»£ç†ipã€‚</li>
</ul>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"proxyIp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"regionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"320000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ipad"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ttuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é…åˆregionId/proxyIpä½¿ç”¨,ä¼ ttuidç¨‹åºç”Ÿæˆçš„id"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-4">è¯·æ±‚å‚æ•°</h4>





























































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>PSï¼šAPIåå°-ç‚¹å‡»è®¿é—®æ§åˆ¶-ç”ŸæˆToken</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>å¦</td><td>è®¾å¤‡IDï¼Œé¦–æ¬¡ç™»å½•ä¼ ç©ºï¼Œä¹‹åä¼ æ¥å£è¿”å›çš„appId</td></tr><tr><td>Â» proxyIp</td><td>body</td><td>string</td><td>å¦</td><td>ä»£ç†IP æ ¼å¼ï¼šsocks5://username:password@123.2.2.2</td></tr><tr><td>Â» regionId</td><td>body</td><td>string</td><td>æ˜¯</td><td>åœ°åŒº</td></tr><tr><td>Â» type</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ç±»å‹ï¼šipadã€macï¼ˆé»˜è®¤ä¸ºipadã€‚</td></tr><tr><td>Â» ttuid</td><td>body</td><td>string</td><td>å¦</td><td>ä»£ç†æœ¬æœºIDï¼Œéœ€é…åˆ regionId/proxyIp ä½¿ç”¨ï¼Œä¸å•ç‹¬ä½¿ç”¨ã€‚å¯ä¸´æ—¶å€Ÿç”¨ç”¨æˆ·çš„æœ¬åœ°ç½‘ç»œå–ç æœ‰50%æ¦‚ç‡è·³è¿‡ipadéªŒè¯ã€‚</td></tr></tbody></table>
<h5 data-id="heading-5">è¯¦ç»†è¯´æ˜</h5>
<p><strong>Â» type</strong>: è®¾å¤‡ç±»å‹ï¼šipadã€macï¼ˆé»˜è®¤ä¸ºipadã€‚
ç‹¬ç«‹appidï¼‰</p>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"qrData"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"qrUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"qrImgBase64"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"uuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-6">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-7">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>













































































<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» data</td><td>object</td><td>true</td><td>none</td><td/><td>å“åº”æ•°æ®</td></tr><tr><td>Â»Â» qrData</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç å†…åŒ…å«çš„ä¿¡æ¯</td></tr><tr><td>Â»Â» qrUrl</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç ç›´æ¥æ‰“å¼€åœ°å€</td></tr><tr><td>Â»Â» appId</td><td>string</td><td>true</td><td>none</td><td/><td>è®¾å¤‡ID</td></tr><tr><td>Â»Â» qrImgBase64</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç å›¾ç‰‡base64</td></tr><tr><td>Â»Â» uuid</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç çš„uuid</td></tr></tbody></table>
<h3 data-id="heading-8">POST (æ­¥éª¤2)æ‰§è¡Œç™»å½•</h3>
<p>POST /login/checkLogin</p>
<ul>
<li>å¢åŠ <strong>ipadäººè„¸è¯†åˆ«éªŒè¯</strong>å’Œmacæ»‘å—éªŒè¯ï¼Œipad<strong>ä»…æ”¯æŒIOSå¹³å°appæ‰«ç </strong>éªŒè¯ï¼Œmacæ»‘å—éªŒè¯æ”¯æŒappæ‰«ç éªŒè¯å’Œç³»ç»Ÿè‡ªåŠ¨éªŒè¯ï¼Œå¼€å‘è€…é›†æˆå¹³å°ä¹Ÿå¯è‡ªè¡Œé›†æˆAPPæ»‘å—éªŒè¯ï¼Œå…·ä½“è¯·ç‚¹å‡»ipadç™»å½•æˆ–è€…macç™»å½•æŸ¥çœ‹è¯¦æƒ…</li>
<li>è·å–ç™»å½•äºŒç»´ç <strong>æ‰«ç ä¹‹å</strong>éœ€<strong>æ¯é—´éš”5sè°ƒç”¨æœ¬æ¥å£</strong>æ¥åˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸï¼Œ<strong>äºŒç»´ç è¶…æ—¶æ—¶é—´ä¸º120ç§’</strong>
<strong>- ç™»å½•æˆåŠŸålogininfoæœ‰æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®åˆ™éœ€è¦ä¸€ç›´æ‰§è¡Œï¼Œç›´è‡³å‡ºç°ç™»å½•æ•°æ®æˆ–è€…å¤±è´¥ä¸ºæ­¢ã€‚</strong></li>
<li>æ–°è®¾å¤‡ç™»å½•å¹³å°ï¼Œæ¬¡æ—¥å‡Œæ™¨ä¼šæ‰çº¿ä¸€æ¬¡ï¼Œé‡æ–°ç™»å½•æ—¶éœ€è°ƒç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fpost.wechatapi.net%2Flogin%2Fgetloginqrcode" target="_blank" title="https://post.wechatapi.net/login/getloginqrcode" ref="nofollow noopener noreferrer">è·å–äºŒç»´ç ä¸”ä¼ appIdå–ç </a>ï¼Œç™»å½•æˆåŠŸååˆ™å¯ä»¥é•¿æœŸåœ¨çº¿</li>
<li>ç™»å½•æˆåŠŸåè¯·ä¿å­˜appIdä¸wxidçš„å¯¹åº”å…³ç³»ï¼Œåç»­æ¥å£ä¸­ä¼šç”¨åˆ°</li>
</ul>

  
    â˜ï¸ é¦–æ¬¡ç™»å½•iPadå‡ºç°**æ–°è®¾å¤‡éªŒè¯**å¹¶ä¸”**æ— æ•°å­—éªŒè¯ç **æ­¤æ—¶æœ¬æ¥å£ä¼šè¿”å›ä¸€ä¸ªäºŒç»´ç ç½‘å€ï¼Œå¼€å‘è€…éœ€ä½¿ç”¨IOSè®¾å¤‡ä¸‹è½½[å®‰ç›¾APP](https://www.pgyer.com/renzhengapp)æ‰«æäºŒç»´ç ç½‘å€ï¼Œæ‰«æäººè„¸é€šè¿‡åï¼Œå†æ¬¡è°ƒç”¨æœ¬æ¥å£ï¼Œæ‰‹æœºç‚¹å‡»ç¡®è®¤ï¼Œåˆ™æœ¬æ¥å£è¿”å›ç™»å½•ç»“æœã€‚å¦‚æœä¸è¿›è¡Œäººè„¸è®¤è¯åˆ™éœ€è¦åˆ‡æ¢Macç™»å½•ï¼Œè¯·æŸ¥çœ‹Macç™»å½•æµç¨‹
    â˜ï¸ é¦–æ¬¡ç™»å½•iPadå‡ºç°**æ–°è®¾å¤‡éªŒè¯**å¹¶ä¸”**æœ‰æ•°å­—éªŒè¯ç **ç›´æ¥åœ¨captchCodeå­—æ®µè¾“å…¥æ•°å­—éªŒè¯ç ï¼Œç»§ç»­æ‰§è¡Œç™»å½•å³å¯ç™»å½•ã€‚


<p><img alt="image.pngè½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>


  
  
    â˜ï¸  é¦–æ¬¡ç™»å½•Macå¦‚æœå‡ºç°æ–°è®¾å¤‡éªŒè¯ï¼Œå¯ä»¥**é€‰æ‹©è‡ªåŠ¨éªŒè¯**ï¼Œä¸éœ€è¦ä¸‹è½½APPã€‚
    â˜ï¸    å¦‚æœ**ä¸é€‰æ‹©è‡ªåŠ¨éªŒè¯**ä¼šè¿”å›URLã€‚ç”ŸæˆäºŒç»´ç ä¹‹åï¼Œéœ€è¦ä½¿ç”¨[å®‰å“è®¾å¤‡ä¸‹è½½APP](https://pan.baidu.com/s/19EEi3Au-IzGT7pN7dQQfFQ?pwd=81rg)ï¼Œæ‰«ç è¿›è¡Œå›¾å½¢éªŒè¯ã€‚æ“ä½œå®Œæˆåç»§ç»­è°ƒç”¨æ­¤æ¥å£å³å¯é€šè¿‡æ–°è®¾å¤‡éªŒè¯ã€‚
    â˜ï¸ç”¨æˆ·è‹¥æœ‰è‡ªå·±å¹³å°Appï¼Œåˆ™å¯ä»£ç æ¥å…¥ï¼Œæ— éœ€ä¸‹è½½App

<pre><code class="hljs language-ini" lang="ini">&lt;Frame <span class="hljs-attr">caption</span>=<span class="hljs-string">"Macç™»å½•æµç¨‹å›¾ï¼Œä¸æ¸…æ¥šæµç¨‹å¿…çœ‹"</span>&gt;
</code></pre>
<p><img alt="Macç™»å½•.pngè½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>


  

<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"proxyIp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"uuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoSliding"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">è¯·æ±‚å‚æ•°</h4>





























































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr><tr><td>Â» proxyIp</td><td>body</td><td>string</td><td>å¦</td><td>ä»£ç†IP æ ¼å¼ï¼šsocks5://username:password@123.2.2.2</td></tr><tr><td>Â» uuid</td><td>body</td><td>string</td><td>æ˜¯</td><td>è·å–äºŒç»´ç è¿”å›çš„uuid</td></tr><tr><td>Â» captchCode</td><td>body</td><td>string</td><td>å¦</td><td>æ‰«ç åæ‰‹æœºæç¤ºè¾“å…¥çš„éªŒè¯ç ï¼Œå¦‚æœªæç¤ºæ•°å­—éªŒè¯ç å¯ä¸ä¼ æ­¤å­—æ®µã€‚</td></tr><tr><td>Â» autoSliding</td><td>body</td><td>boolean</td><td>æ˜¯</td><td>æ˜¯å¦è‡ªåŠ¨éªŒè¯true/falseï¼Œä»…é™macä½¿ç”¨ã€‚trueä¸ºè‡ªåŠ¨éªŒè¯ï¼Œfalseéœ€è¦ç”¨appæ‰«ç éªŒè¯ã€‚å¦‚æœç±»å‹ä¸ºipadç™»å½•æ—¶å¿…é¡»ä¼ falseã€‚</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"headImgUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"nickName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"expiredTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"loginInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"uin"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"wxid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nickName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"mobile"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"alias"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-10">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-11">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





























































































































<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» data</td><td>object</td><td>true</td><td>none</td><td/><td>å“åº”æ•°æ®</td></tr><tr><td>Â»Â» uuid</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç çš„uuid</td></tr><tr><td>Â»Â» headImgUrl</td><td>string</td><td>true</td><td>none</td><td/><td>å¤´åƒåœ°å€</td></tr><tr><td>Â»Â» nickName</td><td>string</td><td>true</td><td>none</td><td/><td>æ˜µç§°</td></tr><tr><td>Â»Â» expiredTime</td><td>integer</td><td>true</td><td>none</td><td/><td>äºŒç»´ç è¶…æ—¶æ—¶é—´</td></tr><tr><td>Â»Â» status</td><td>integer</td><td>true</td><td>none</td><td/><td>ç™»å½•çŠ¶æ€ 0ï¼šæœªæ‰«ç  1ï¼šå·²æ‰«ç æœªç™»å½• 2ï¼šç™»å½•æˆåŠŸ 4ï¼šå·²æ‰«ç å–æ¶ˆç™»å½•</td></tr><tr><td>Â»Â» loginInfo</td><td>object</td><td>true</td><td>none</td><td/><td>ç™»å½•æˆåŠŸä¿¡æ¯</td></tr><tr><td>Â»Â»Â» uin</td><td>integer</td><td>true</td><td>none</td><td/><td>uin</td></tr><tr><td>Â»Â»Â» wxid</td><td>string</td><td>true</td><td>none</td><td/><td>å¾®ä¿¡IDï¼Œè¿”å›æ­¤å€¼åˆ™æ˜¯ç™»å½•æˆåŠŸ</td></tr><tr><td>Â»Â»Â» nickName</td><td>string</td><td>true</td><td>none</td><td/><td>æ˜µç§°</td></tr><tr><td>Â»Â»Â» mobile</td><td>string</td><td>true</td><td>none</td><td/><td>ç»‘å®šçš„æ‰‹æœºå·</td></tr><tr><td>Â»Â»Â» alias</td><td>string</td><td>true</td><td>none</td><td/><td>å¾®ä¿¡å·</td></tr></tbody></table>
<h3 data-id="heading-12">POST å¼¹æ¡†ç™»å½•</h3>
<p>POST /login/dialogLogin</p>
<ul>
<li>è°ƒç”¨æœ¬æ¥å£åæ‰‹æœºä¼šå¼¹æ¡†ç¡®è®¤ç™»å½•é¡µé¢ï¼Œç‚¹ç¡®è®¤åè°ƒç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fpost.wechatapi.net%2Flogin%2Fchecklogin" target="_blank" title="https://post.wechatapi.net/login/checklogin" ref="nofollow noopener noreferrer">æ‰§è¡Œç™»å½•æ¥å£</a>æ£€æµ‹æ˜¯å¦ç™»å½•æˆåŠŸ</li>
</ul>

<p><strong>åœ°åŒºIDåœ¨å‰ï¼Œåœ°åŒºåœ¨å</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">110000</span>*åŒ—äº¬å¸‚|<span class="hljs-number">120000</span>*å¤©æ´¥å¸‚|<span class="hljs-number">130000</span>*æ²³åŒ—çœ|<span class="hljs-number">140000</span>*å±±è¥¿çœ|<span class="hljs-number">150000</span>*å†…è’™å¤
<span class="hljs-number">210000</span>*è¾½å®çœ|<span class="hljs-number">220000</span>*å‰æ—çœ|<span class="hljs-number">230000</span>*é»‘é¾™æ±Ÿ
<span class="hljs-number">310000</span>*ä¸Šæµ·å¸‚|<span class="hljs-number">320000</span>*æ±Ÿè‹çœ|<span class="hljs-number">330000</span>*æµ™æ±Ÿçœ|<span class="hljs-number">340000</span>*å®‰å¾½çœ|<span class="hljs-number">350000</span>*ç¦å»ºçœ|<span class="hljs-number">360000</span>*æ±Ÿè¥¿çœ|<span class="hljs-number">370000</span>*å±±ä¸œçœ
<span class="hljs-number">410000</span>*æ²³å—çœ|<span class="hljs-number">420000</span>*æ¹–åŒ—çœ|<span class="hljs-number">430000</span>*æ¹–å—çœ|<span class="hljs-number">440000</span>*å¹¿ä¸œçœ|<span class="hljs-number">450000</span>*å¹¿è¥¿çœ|<span class="hljs-number">460000</span>*æµ·å—çœ
<span class="hljs-number">500000</span>*é‡åº†å¸‚|<span class="hljs-number">510000</span>*å››å·çœ|<span class="hljs-number">520000</span>*è´µå·çœ|<span class="hljs-number">530000</span>*äº‘å—çœ|<span class="hljs-number">540000</span>*è¥¿è—è‡ªæ²»åŒº
<span class="hljs-number">610000</span>*é™•è¥¿çœ|<span class="hljs-number">620000</span>*ç”˜è‚ƒçœ|<span class="hljs-number">630000</span>*é’æµ·çœ|<span class="hljs-number">640000</span>*å®å¤è‡ªæ²»åŒº|<span class="hljs-number">650000</span>*æ–°ç–†è‡ªæ²»åŒº
</code></pre>

<ul>
<li>è‹¥ç›®å‰æ”¯æŒçš„regionIdä¸­æ²¡æœ‰æ‚¨æ‰€åœ¨çš„åœ°åŒºï¼Œå¯ä»¥è‡ªè¡Œé‡‡è´­socks5åè®®ä»£ç†IPï¼Œå¡«å†™åˆ°proxyIpå‚æ•°ä¸­</li>
<li>ä½¿ç”¨æœ¬æ¥å£ç™»å½•å¹¶é100%æˆåŠŸï¼Œæœ¬æ¥å£è¿”å›å¤±è´¥åï¼Œå¯é€šè¿‡æ‰«ç ç™»å½•çš„æ–¹å¼ç™»å½•
<ul>
<li>ä»¥ä¸‹å‡ ç§æƒ…å†µæ— æ³•ä½¿ç”¨æœ¬æ¥å£ç™»å½•ï¼š
<ul>
<li>æ‰‹æœºç‚¹å‡»é€€å‡ºç™»å½•</li>
<li>æ–°è®¾å¤‡ç™»å½•æ¬¡æ—¥</li>
<li>å®˜æ–¹é£æ§ä¸‹çº¿</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"wx_wR_U4zPj2M_OTS3BCyoE4"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"proxyIp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"regionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"320000"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-13">è¯·æ±‚å‚æ•°</h4>















































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr><tr><td>Â» proxyIp</td><td>body</td><td>string</td><td>æ˜¯</td><td>ä»£ç†IP æ ¼å¼ï¼šsocks5://username:password@123.2.2.2</td></tr><tr><td>Â» regionId</td><td>body</td><td>string</td><td>æ˜¯</td><td>åœ°åŒº</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"uuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-14">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-15">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





















































<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» data</td><td>object</td><td>true</td><td>none</td><td/><td>å“åº”æ•°æ®</td></tr><tr><td>Â»Â» appId</td><td>string</td><td>true</td><td>none</td><td/><td>è®¾å¤‡ID</td></tr><tr><td>Â»Â» uuid</td><td>string</td><td>true</td><td>none</td><td/><td>äºŒç»´ç uuidï¼Œæ‰§è¡Œç™»å½•æ—¶ä¼šç”¨åˆ°</td></tr></tbody></table>
<h3 data-id="heading-16">POST é€€å‡º</h3>
<p>POST /login/logout</p>
<p>å¯ä»¥åªå¡«å†™appidæˆ–è€…æŒ‰ç…§ç¤ºä¾‹ç›´æ¥ä¼ å³å¯</p>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"proxyIp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"regionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"88"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-17">è¯·æ±‚å‚æ•°</h4>

































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-18">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-19">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





























<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr></tbody></table>
<h3 data-id="heading-20">POST æ£€æŸ¥æ˜¯å¦åœ¨çº¿</h3>
<p>POST /login/checkOnline</p>
<p>å“åº”ç»“æœçš„data=trueåˆ™æ˜¯åœ¨çº¿ï¼Œåä¹‹ä¸ºç¦»çº¿</p>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{appid}}"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-21">è¯·æ±‚å‚æ•°</h4>

































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-22">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-23">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





































<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» data</td><td>boolean</td><td>true</td><td>none</td><td/><td>none</td></tr></tbody></table>
<h3 data-id="heading-24">POST å¼‚å¸¸æ–­çº¿é‡è¿</h3>
<p>POST /login/reconnection</p>
<p>è´¦å·åœ¨çº¿ï¼Œä½†æ˜¯æ”¶ä¸åˆ°å›è°ƒ  è°ƒç”¨æ­¤æ¥å£</p>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-25">è¯·æ±‚å‚æ•°</h4>

































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-26">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-27">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





































<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» data</td><td>boolean</td><td>true</td><td>none</td><td/><td>none</td></tr></tbody></table>
<h3 data-id="heading-28">POST æ— æ„Ÿåˆ‡æ¢ä»£ç†ip</h3>
<p>POST /login/setProxy</p>
<p>è´¦å·æ›´æ¢ä»£ç†ipï¼Œå¯å®ç°åœ¨çº¿åˆ‡æ¢ã€‚
ä¹Ÿå¯é€€å‡ºåé‡æ–°ç™»å½•ä¼ æ–°çš„ä»£ç†ipã€‚</p>
<blockquote>
<p>Body è¯·æ±‚å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{appid}}"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"proxyIp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"socks5://x:x@111.153.185.21:11332"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-29">è¯·æ±‚å‚æ•°</h4>








































<table><thead><tr><th>åç§°</th><th>ä½ç½®</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>VideosApi-token</td><td>header</td><td>string</td><td>æ˜¯</td><td>none</td></tr><tr><td>body</td><td>body</td><td>object</td><td>å¦</td><td>none</td></tr><tr><td>Â» appId</td><td>body</td><td>string</td><td>æ˜¯</td><td>è®¾å¤‡ID</td></tr><tr><td>Â» proxyIp</td><td>body</td><td>string</td><td>æ˜¯</td><td>ä»£ç†ip</td></tr></tbody></table>
<blockquote>
<p>è¿”å›ç¤ºä¾‹</p>
</blockquote>
<blockquote>
<p>200 Response</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ret"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-30">è¿”å›ç»“æœ</h4>

















<table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ç å«ä¹‰</th><th>è¯´æ˜</th><th>æ•°æ®æ¨¡å‹</th></tr></thead><tbody><tr><td>200</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-6.3.1" target="_blank" title="https://tools.ietf.org/html/rfc7231#section-6.3.1" ref="nofollow noopener noreferrer">OK</a></td><td>none</td><td>Inline</td></tr></tbody></table>
<h4 data-id="heading-31">è¿”å›æ•°æ®ç»“æ„</h4>
<p>çŠ¶æ€ç  <strong>200</strong></p>





























<table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>çº¦æŸ</th><th>ä¸­æ–‡å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Â» ret</td><td>integer</td><td>true</td><td>none</td><td/><td>none</td></tr><tr><td>Â» msg</td><td>string</td><td>true</td><td>none</td><td/><td>none</td></tr></tbody></table>
<h2 data-id="heading-32">æ•°æ®æ¨¡å‹</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ® ç”¨ TRAE AI æ‰“é€ ä¸€ä¸ªä¼šä¸‹æ£‹çš„ Java äº”å­æ£‹ï¼šä»é›¶æ„å»º + è‡ªåŠ¨è§„åˆ’ + GUI å®ç°]]></title>    <link>https://juejin.cn/post/7576569518261698560</link>    <guid>https://juejin.cn/post/7576569518261698560</guid>    <pubDate>2025-11-26T02:36:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576569518261698560" data-draft-id="7576559408658907188" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ® ç”¨ TRAE AI æ‰“é€ ä¸€ä¸ªä¼šä¸‹æ£‹çš„ Java äº”å­æ£‹ï¼šä»é›¶æ„å»º + è‡ªåŠ¨è§„åˆ’ + GUI å®ç°"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-26T02:36:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ® ç”¨ TRAE AI æ‰“é€ ä¸€ä¸ªä¼šä¸‹æ£‹çš„ Java äº”å­æ£‹ï¼šä»é›¶æ„å»º + è‡ªåŠ¨è§„åˆ’ + GUI å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:36:26.000Z" title="Wed Nov 26 2025 02:36:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ® ç”¨ TRAE AI æ‰“é€ ä¸€ä¸ªä¼šä¸‹æ£‹çš„ Java äº”å­æ£‹ï¼šä»é›¶æ„å»º + è‡ªåŠ¨è§„åˆ’ + GUI å®ç°</h2>
<blockquote>
<p>ğŸ§‘â€ğŸ’» ä½œè€…ï¼šå¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ<br/>
ğŸ§  é¡¹ç›®ï¼šåŸºäº TRAE AI çš„ Java äº”å­æ£‹é¡¹ç›®æ„å»ºå®è·µ<br/>
ğŸ›  æŠ€æœ¯å…³é”®è¯ï¼šTRAEã€Java Swingã€AI å¯¹æˆ˜ã€é¡¹ç›®è‡ªåŠ¨è§„åˆ’ã€GUI æ¸¸æˆ</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ§­ å‰è¨€ï¼šé™¤äº†å†™æ–‡æ¡£ï¼ŒAI è¿˜èƒ½å¸®æˆ‘å†™æ¸¸æˆï¼Ÿ</h3>
<p>åœ¨æˆ‘å®Œæˆäº† RuoYi-Cloud é¡¹ç›®çš„æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆä¹‹åï¼ˆç›¸å…³æ–‡ç« ä¼ é€é—¨ğŸ”—ï¼‰ï¼Œæˆ‘å¼€å§‹æ€è€ƒï¼š</p>
<blockquote>
<p>TRAE é™¤äº†èƒ½åˆ†æé¡¹ç›®ã€ç”»æ¶æ„å›¾ï¼Œå®ƒèƒ½ä¸èƒ½çœŸçš„â€œ<strong>å†™ä¸€ä¸ªå®Œæ•´çš„ Java é¡¹ç›®</strong>â€ï¼Ÿ</p>
</blockquote>
<p>äºæ˜¯æˆ‘å†³å®šæŒ‘æˆ˜ä¸€ä¸ªæœ€ç»å…¸çš„ Java æ¡Œé¢é¡¹ç›® â€”â€” <strong>â€œäº”å­æ£‹â€ AI å¯¹æˆ˜ç‰ˆ</strong>ã€‚</p>
<p>ä¸ä»…è¦èƒ½ç©ï¼Œè¿˜è¦èƒ½è‡ªåŠ¨ä¸‹æ£‹ã€åˆ¤æ–­èƒœè´Ÿã€å¸¦ GUIã€èƒ½æ‰“è´¥äººç±»ã€‚</p>
<p>æœ€ç»ˆï¼Œæˆ‘ç”¨ TRAE æˆåŠŸå®Œæˆäº†ä¸€ä¸ªå¯è¿è¡Œçš„ Java äº”å­æ£‹é¡¹ç›®ï¼Œå¹¶å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>âœ… AI ç©å®¶ vs äººç±»ç©å®¶</li>
<li>âœ… åŸºäº Swing çš„å›¾å½¢åŒ–ç•Œé¢</li>
<li>âœ… è‡ªåŠ¨èƒœè´Ÿåˆ¤æ–­ä¸æç¤º</li>
<li>âœ… é¡¹ç›®ç»“æ„è‡ªåŠ¨è§„åˆ’ + ä»»åŠ¡æ‹†è§£</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ§  ç”¨ TRAE è§„åˆ’äº”å­æ£‹ AI é¡¹ç›®å¼€å‘ä»»åŠ¡</h3>
<p>å’Œä¼ ç»Ÿå†™ä»£ç ä¸åŒï¼Œè¿™æ¬¡æˆ‘å…ˆè®© TRAE å¸®æˆ‘æ¢³ç†æ•´ä¸ªå¼€å‘æµç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd65400cc49c44fb8a60370f96f27997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729386&amp;x-signature=nyqop26W5jhHQ6%2FCmao%2F%2FdzcidE%3D" alt="image.png" loading="lazy"/></p>
<p>TRAE è‡ªåŠ¨ä¸ºæˆ‘ç”Ÿæˆäº†ä¸€ä¸ªäº”æ­¥ä»»åŠ¡æ¸…å•ï¼š</p>
<ol>
<li>åˆ›å»ºåŸºæœ¬ç±»å’Œç»“æ„ï¼ˆå¦‚ <code>Board</code>ã€<code>AIPlayer</code>ã€<code>Gui</code>ï¼‰</li>
<li>å®ç°æ£‹ç›˜é€»è¾‘ï¼ˆè½å­ã€èƒœè´Ÿåˆ¤æ–­ï¼‰</li>
<li>æ„å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰</li>
<li>å®ç° AI å¯¹æ‰‹é€»è¾‘ï¼ˆè‡ªåŠ¨è½å­ï¼‰</li>
<li>æ•´åˆè¿è¡Œé€»è¾‘ï¼Œå®ç°å®Œæ•´å¯¹å±€æµç¨‹</li>
</ol>
<p>è¿™ä¸ªä»»åŠ¡æ‹†è§£éå¸¸è´´è¿‘çœŸå®å¼€å‘æµç¨‹ï¼Œ<strong>æ¯”æˆ‘è‡ªå·±åˆ—çš„è¿˜æ¸…æ™°</strong>ï¼Œè€Œä¸”æ¯ä¸€æ­¥éƒ½ä¼šè‡ªåŠ¨æç¤ºä¸‹ä¸€æ­¥ä»£ç å¦‚ä½•å®ç°ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ§± é¡¹ç›®ç»“æ„ä¸€è§ˆï¼šç»å…¸ Java é£æ ¼ + AI æ¨¡å—</h3>
<p>é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less">â””â”€â”€ <span class="hljs-selector-tag">study</span>/
    â”œâ”€â”€ <span class="hljs-selector-tag">Board</span><span class="hljs-selector-class">.java</span>         <span class="hljs-comment">// æ£‹ç›˜ç®¡ç†ä¸èƒœè´Ÿåˆ¤æ–­</span>
    â”œâ”€â”€ <span class="hljs-selector-tag">AIPlayer</span><span class="hljs-selector-class">.java</span>      <span class="hljs-comment">// ç®€æ˜“ AI ç­–ç•¥å®ç°</span>
    â”œâ”€â”€ <span class="hljs-selector-tag">Gui</span><span class="hljs-selector-class">.java</span>           <span class="hljs-comment">// æ¸¸æˆä¸»ç•Œé¢ï¼ˆåŸºäº Swingï¼‰</span>
    â”œâ”€â”€ <span class="hljs-selector-tag">Main</span><span class="hljs-selector-class">.java</span>          <span class="hljs-comment">// å¯åŠ¨å…¥å£</span>
</code></pre>
<h4 data-id="heading-4">ğŸ¯ æ ¸å¿ƒç±»è¯´æ˜ï¼š</h4>
<ul>
<li><code>Board</code>ï¼šäºŒç»´æ•°ç»„è¡¨ç¤ºæ£‹ç›˜ï¼Œè´Ÿè´£è½å­ã€åˆ¤æ–­èƒœè´Ÿ</li>
<li><code>AIPlayer</code>ï¼šç®€å• AI å®ç°ï¼ˆéšæœºæˆ–ä¼˜å…ˆä¸­å¿ƒç­–ç•¥ï¼‰</li>
<li><code>Gui</code>ï¼šç»˜åˆ¶æ£‹ç›˜ã€å¤„ç†ç‚¹å‡»äº‹ä»¶ã€æ˜¾ç¤ºèƒœè´Ÿæç¤º</li>
<li><code>Main</code>ï¼šåˆå§‹åŒ–çª—å£å¹¶å¯åŠ¨æ¸¸æˆ</li>
</ul>
<hr/>
<h3 data-id="heading-5">ğŸ–¼ ç•Œé¢å±•ç¤ºï¼šSwing + çŠ¶æ€æç¤º + AI å¯¹æˆ˜</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79589eb5e39e4061aff7d61c2990337b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729386&amp;x-signature=dweTyFgEWG1dHdirD7c5iNKEcgQ%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒTRAE ä¸ºæˆ‘ç”Ÿæˆçš„ GUI ç»“æ„åŒ…å«ï¼š</p>
<ul>
<li>âœ… Swing çª—å£ä¸æ£‹ç›˜ç»˜åˆ¶</li>
<li>âœ… èƒœè´Ÿæç¤ºï¼ˆä½¿ç”¨ <code>JLabel</code> + <code>JOptionPane</code>ï¼‰</li>
<li>âœ… AI è‡ªåŠ¨è½å­é€»è¾‘ï¼ˆåœ¨ <code>SwingWorker</code> ä¸­å¼‚æ­¥æ‰§è¡Œï¼‰</li>
</ul>
<p>ä»£ç ç‰‡æ®µç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if (board.isGameOver()) {
    boolean <span class="hljs-attr">lastMoveIsBlack</span> = board.isBlackTurn()<span class="hljs-comment">;</span>
    String <span class="hljs-attr">winner</span> = lastMoveIsBlack ? <span class="hljs-string">"é»‘æ£‹"</span> : <span class="hljs-string">"ç™½æ£‹"</span><span class="hljs-comment">;</span>
    String <span class="hljs-attr">winnerText</span> = <span class="hljs-string">"AI"</span><span class="hljs-comment">;</span>
    statusLabel.setText("æ¸¸æˆç»“æŸï¼" + winnerText + " è·èƒœï¼")<span class="hljs-comment">;</span>
    JOptionPane.showMessageDialog(gui.this, winnerText + " è·èƒœï¼", "æ¸¸æˆç»“æŸ", JOptionPane.INFORMATION_MESSAGE)<span class="hljs-comment">;</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-6">ğŸ§  AI å®ç°é€»è¾‘ï¼šåŸºç¡€ä½†å¯æ‰©å±•</h3>
<p>ç›®å‰ AI ç­–ç•¥æ¯”è¾ƒåŸºç¡€ï¼Œé‡‡ç”¨â€œéšæœºå¯è½å­ç‚¹ + å±€éƒ¨æœ€ä¼˜â€ç­–ç•¥ã€‚ä½† TRAE ä¸ºæˆ‘ç”Ÿæˆçš„ <code>AIPlayer.java</code> éå¸¸æ¸…æ™°ï¼Œåç»­å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ä¸ºï¼š</p>
<ul>
<li>âœ… å±€éƒ¨æœç´¢ + ç®€å•è¯„ä¼°å‡½æ•°</li>
<li>âœ… æ¨¡æ‹Ÿå¯¹æ‰‹è½å­åè¯„åˆ†ï¼ˆMiniMax é›å½¢ï¼‰</li>
<li>âœ… æ·»åŠ éš¾åº¦ç­‰çº§é€‰æ‹©</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸš€ ä» 0 åˆ° 1ï¼šTRAE å¦‚ä½•è¾…åŠ©æˆ‘å®Œæˆäº”å­æ£‹é¡¹ç›®</h3>
<p>è¿™æ¬¡é¡¹ç›®ä¸­ï¼ŒTRAE ä¸åªæ˜¯â€œç”Ÿæˆä»£ç è¿™ä¹ˆç®€å•â€ï¼Œå®ƒåšäº†è¿™äº›å…³é”®äº‹ï¼š</p>





























<table><thead><tr><th>é˜¶æ®µ</th><th>TRAE å¸®æˆ‘åšäº†ä»€ä¹ˆ</th></tr></thead><tbody><tr><td>ğŸ§± é¡¹ç›®åˆå§‹åŒ–</td><td>è‡ªåŠ¨æ‹†è§£ä»»åŠ¡ï¼Œè§„åˆ’ç±»ç»“æ„</td></tr><tr><td>ğŸ§‘â€ğŸ’» ç¼–ç å®ç°</td><td>æä¾›æ¯ä¸€ç±»çš„åˆå§‹ä»£ç æ¨¡æ¿</td></tr><tr><td>ğŸ§  é€»è¾‘æ¨ç†</td><td>è‡ªåŠ¨è¡¥å…¨èƒœè´Ÿåˆ¤æ–­é€»è¾‘</td></tr><tr><td>ğŸ–¼ GUI æ„å»º</td><td>è‡ªåŠ¨ç”Ÿæˆ Swing ç»„ä»¶ç»“æ„</td></tr><tr><td>ğŸ§ª é›†æˆæµ‹è¯•</td><td>æç¤ºå¦‚ä½• main å‡½æ•°é©±åŠ¨æ•´ä½“è¿è¡Œ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">ğŸ§© æˆ‘å­¦åˆ°çš„ï¼šAI æ­£åœ¨æˆä¸ºå¼€å‘è€…çš„â€œå‰¯é©¾é©¶â€</h3>
<p>è¿™æ¬¡ç”¨ TRAE å†™äº”å­æ£‹çš„ä½“éªŒè®©æˆ‘æ„è¯†åˆ°ï¼š</p>
<blockquote>
<p>æœªæ¥çš„å¼€å‘ï¼Œä¸å†åªæ˜¯ä¸€ä¸ªäººå¯¹ç€ IDE å†™ä»£ç ï¼Œ<strong>è€Œæ˜¯ä½  + AI åˆä½œå®Œæˆä¸€æ•´ä¸ªé¡¹ç›®</strong>ã€‚</p>
</blockquote>
<p>AI å¯ä»¥å¸®ä½ ï¼š</p>
<ul>
<li>æ›´å¿«æ­å»ºé¡¹ç›®ç»“æ„</li>
<li>æ›´æ¸…æ™°æ‹†è§£å¼€å‘ä»»åŠ¡</li>
<li>æ›´è½»æ¾æ„å»ºå®Œæ•´åŠŸèƒ½</li>
<li>æ›´ä¸“æ³¨åœ¨æ ¸å¿ƒé€»è¾‘ä¸Šå‘æŒ¥åˆ›é€ åŠ›</li>
</ul>
<hr/>
<h3 data-id="heading-9">ğŸ“Œ é¡¹ç›®æ€»ç»“</h3>





























<table><thead><tr><th>é¡¹ç›®å</th><th>Java äº”å­æ£‹ AI å¯¹æˆ˜ç‰ˆ</th></tr></thead><tbody><tr><td>å®ç°åŠŸèƒ½</td><td>äººæœºå¯¹æˆ˜ã€è‡ªåŠ¨èƒœè´Ÿåˆ¤æ–­ã€å›¾å½¢ç•Œé¢</td></tr><tr><td>æŠ€æœ¯æ ˆ</td><td>Java 8 + Swing</td></tr><tr><td>AI ç­–ç•¥</td><td>ç®€å•å¯å‘å¼ + éšæœºè½å­</td></tr><tr><td>å¼€å‘æ–¹å¼</td><td>å…¨è¿‡ç¨‹ç”± TRAE AI è¾…åŠ©è§„åˆ’ä¸ç”Ÿæˆ</td></tr><tr><td>æ‰€å±æ´»åŠ¨</td><td>TRAE SOLO æŠ€æœ¯æŒ‘æˆ˜èµ›</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">ğŸ§  åç»­è®¡åˆ’</h3>
<p>æˆ‘è®¡åˆ’åŸºäºæ­¤é¡¹ç›®ç»§ç»­æ‰©å±•ï¼š</p>
<ul>
<li>æ·»åŠ ç½‘ç»œå¯¹æˆ˜åŠŸèƒ½ï¼ˆSocketï¼‰</li>
<li>å¼•å…¥ MiniMax + AlphaBeta å‰ªæç­–ç•¥</li>
<li>ä½¿ç”¨ JavaFX é‡æ„ç•Œé¢ä½“éªŒ</li>
<li>æ‰“åŒ…ä¸ºå¯è¿è¡Œ <code>.jar</code> æ–‡ä»¶ä¾›ä¸‹è½½</li>
</ul>
<hr/>
<h3 data-id="heading-11">ğŸ“£ æœ€å</h3>
<p>TRAE ä¸åªæ˜¯ä¸€ä¸ªâ€œå†™æ–‡æ¡£â€çš„ AIï¼Œå®ƒçœŸæ­£èƒ½æˆä¸ºä½ å¼€å‘è¿‡ç¨‹ä¸­çš„å¾—åŠ›åŠ©æ‰‹ï¼Œ<strong>è®©ä½ æ›´å¿«ã€æ›´ç¨³ã€æ›´ç³»ç»Ÿåœ°äº¤ä»˜å®Œæ•´é¡¹ç›®ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš Javaã€æˆ–è€…æƒ³æŒ‘æˆ˜ AI è¾…åŠ©å¼€å‘ï¼Œä¸å¦¨æ¥ TRAE SOLO ç©ä¸€æŠŠï¼Œåšç‚¹çœŸæ­£æœ‰è¶£çš„äº‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ä½›é™€æ¼«ç”»æ€ä¹ˆåšï¼Ÿæ·±æ‰’ä¸­è€å¹´é«˜äº’åŠ¨èµ›é“ï¼Œç”¨n8næµæ°´çº¿æ‰¹é‡æ‰“é€ ]]></title>    <link>https://juejin.cn/post/7576550156365381638</link>    <guid>https://juejin.cn/post/7576550156365381638</guid>    <pubDate>2025-11-26T02:33:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576550156365381638" data-draft-id="7576550156365103110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ä½›é™€æ¼«ç”»æ€ä¹ˆåšï¼Ÿæ·±æ‰’ä¸­è€å¹´é«˜äº’åŠ¨èµ›é“ï¼Œç”¨n8næµæ°´çº¿æ‰¹é‡æ‰“é€ "/> <meta itemprop="keywords" content="AIGC,Agent,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T02:33:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ä½›é™€æ¼«ç”»æ€ä¹ˆåšï¼Ÿæ·±æ‰’ä¸­è€å¹´é«˜äº’åŠ¨èµ›é“ï¼Œç”¨n8næµæ°´çº¿æ‰¹é‡æ‰“é€ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:33:42.000Z" title="Wed Nov 26 2025 02:33:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°è‚¥è‚ ï¼ä»Šå¤©å¸¦æ¥ n8nç¡¬æ ¸æ–°å®æˆ˜ï¼š åªéœ€æäº¤æ ‡é¢˜ï¼ŒAI åŒ…åŠæ–‡æ¡ˆç”Ÿå›¾ï¼Œå‡ åˆ†é’Ÿåï¼Œç¥éŸµåè¶³çš„å°ä½›é™€æ¼«ç”»ä¸€é”®å†™å…¥ä½ çš„æœ¬åœ°ç£ç›˜ï¼</strong></p>
<h2 data-id="heading-0">1. å·¥ä½œæµæ•ˆæœæ¼”ç¤º</h2>
<p>æœ€è¿‘æœ‰å¾ˆå¤šæœ‹å‹æ¥é—®æˆ‘æœ‰æ²¡æœ‰å°ä½›é™€æ¼«ç”»ç”Ÿæˆçš„å·¥ä½œæµï¼Œè¿™ä¸ªèµ›é“åä¸­è€å¹´ï¼Œä¸»è¦æ˜¯äº’åŠ¨ç‡å¾ˆé«˜ï¼Œä»¥æˆ‘æ‰¾çš„ä¸€ä¸ªå°ä½›é™€ç±»å‹çš„è´¦å·ä¸ºä¾‹ï¼Œè¿™ä¸ªè´¦å·é˜…è¯»817ï¼Œç‚¹èµ218ï¼Œåœ¨çœ‹188ï¼Œç•™è¨€324ï¼Œå–œæ¬¢çš„äººæ•°å±…ç„¶é«˜è¾¾11ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ebb4b03724d40f4b83b8a02eef69e66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=VZpyruNDPXH8qB5DmGOZw6iHtzo%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»èµ›é“ä¸»è¦æ˜¯é«˜èƒ½é‡ç¥ç¦ç±»æ–‡æ¡ˆé…ä¸Šå¯çˆ±çš„å°ä½›é™€å›¾ç‰‡ã€‚<strong>è¿™ç±»å›¾æ–‡æ·±å—å–œçˆ±çš„ä¸»è¦åŸå› æ˜¯å¯ä»¥æŠŠæ–‡æ¡ˆå†™åˆ°äººçš„å¿ƒåä¸Šã€‚</strong></p>
<p>å°ä½›é™€è¿™ä¸ªçƒ­åº¦æˆ‘è®°å¾—å·²ç»å¾ˆä¹…äº†åº”è¯¥æœ‰å¾ˆå¤šCozeçš„å·¥ä½œæµæ¥å®ç°äº†ã€‚ç»†é—®ä¸‹æ¥æ‰çŸ¥é“Cozeæ€»ä¼šè§¦å‘é˜²å¾¡æœºåˆ¶ä¸ç»™ç”Ÿæˆï¼Œæˆ‘è‡ªå·±è·‘å»æ­äº†ä¸€ä¸‹è¿˜çœŸæ˜¯ã€‚</p>
<p>ç”±äºæ¥é—®æˆ‘çš„å‹å‹è¿˜æ˜¯æŒºå¤šï¼Œäºæ˜¯å°±åŠ¨æ‰‹æ­äº†ä¸€ä¸ª<strong>n8n</strong> <strong>å·¥ä½œæµ</strong> <strong>æ¥ç”Ÿæˆå°ä½›é™€æ¼«ç”»</strong>ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å·¥ä½œæµçš„å®ç°æ•ˆæœã€‚å®Œæ•´å·¥ä½œæµå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/178fcea715ca4776a5717120f723dc88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=jlwqwKU71U0kHQAAlsv3AccIEfs%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨å¾ˆç®€å•ï¼Œç‚¹å‡»åº•éƒ¨çš„ã€Excute workflowã€‘æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™å°ä½›é™€æ¼«ç”»çš„æ ‡é¢˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb88747394734dd3ae5e90eadcb13509~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=2oxCEl7tZv2C4HsP5%2FUbOys2ArQ%3D" alt="" loading="lazy"/></p>
<p>ç­‰å¾…å‡ åˆ†é’Ÿåå°ä½›é™€æ¼«ç”»å°±å‡ºç°åœ¨äº†æˆ‘ä»¬çš„æœ¬åœ°ç£ç›˜å½“ä¸­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cbbe6929f1643029013c6247503f147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=h77lOSSAqDNiLuUSndBj0M4CuC8%3D" alt="" loading="lazy"/></p>
<p>æˆå“å›¾å¦‚ä¸‹ï¼Œæˆ‘è´´äº†ä¸‰å¼ ï¼ˆå­—ä½“æ²¡æœ‰ç²¾è°ƒï¼Œå¤§å®¶å¯ä»¥åœ¨æç¤ºè¯ä¸­ç²¾è°ƒä¸€ä¸‹å­—ä½“å½¢å¼ï¼‰ï¼š</p>
<p>å°é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a86d9c2fbc7f48c69d09fe2c01925edb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=XMQRlrBCG15fxPdiY10GT90xdXI%3D" alt="" loading="lazy"/></p>
<p>æ­£æ–‡å›¾1ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4695693531e416c8c0f722dbb3c6393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=2SyIm4kl3qrzOxreX1VI7vwBcnk%3D" alt="" loading="lazy"/></p>
<p>æ­£æ–‡å›¾2ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b962172cdbd4f1886bbb2e03d10da3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=vCLj5n4VDFG%2ByeA2YVFB%2Fme8rZs%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™ä¸ª</strong> <strong>å·¥ä½œæµ</strong> <strong>å¯ä»¥æ”¹æˆå…¨è‡ªåŠ¨æ‰§è¡Œï¼Œåªè¦å°†å¼€å§‹èŠ‚ç‚¹æ”¹ä¸ºå®šæ—¶èŠ‚ç‚¹ï¼Œå†æ¿€æ´»å·¥ä½œæµï¼Œå°ä½›é™€æ¼«ç”»å°±èƒ½è¢«æ¯å¤©å®šæ—¶å†™å…¥ä½ çš„ç£ç›˜ï¼Œå®ç°æ— äººå€¼å®ˆæµæ°´çº¿ç”Ÿäº§ï¼Œæ„Ÿå…´è¶£å°±ç ä½è·Ÿç»ƒå§~</strong></p>
<h2 data-id="heading-1">2.å·¥ä½œæµæ­å»ºå‰ç½®å‡†å¤‡</h2>
<p><strong>æœ¬</strong> <strong>å·¥ä½œæµ</strong> <strong>ç”Ÿå›¾ä¾æ‰˜é€šä¹‰ä¸‡ç›¸2.5</strong> <strong>MCP</strong> <strong>Serverï¼Œéœ€è¦å…ˆå»å¯¹åº”ç½‘ç«™å¼€é€šæœåŠ¡ã€‚</strong></p>
<p>é€šä¹‰ä¸‡ç›¸2.5-å›¾åƒè§†é¢‘ç”Ÿæˆå¼€é€šåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Fspm%3Da2c4g.11186623.0.0.7f477980N1ex6P%26tab%3Dmcp%23%2Fmcp-market%2Fdetail%2FWan25Media" target="_blank" title="https://bailian.console.aliyun.com/?spm=a2c4g.11186623.0.0.7f477980N1ex6P&amp;tab=mcp#/mcp-market/detail/Wan25Media" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?spm=a2c4g.â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fd7b5c8e6ca44a29e2864a4333cee27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=SJcdGwu2xI2KXSgOOJ%2F2Y0MPc24%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3. å·¥ä½œæµæ­å»º</h2>
<p>ç”Ÿæˆå°ä½›é™€æ¼«ç”»çš„å®Œæ•´å·¥ä½œæµä¸ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bba4abe869d44523979c6f3f0ddabeaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=SqQ9XCbfx54eico8XwGSefh4SdQ%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong> å¼€å§‹èŠ‚ç‚¹é€‰æ‹©ä¸º<strong>On form submission</strong>ï¼Œæ„ä¸ºæäº¤è¡¨å•åå¯åŠ¨å·¥ä½œæµã€‚</p>
<p><strong>ç”Ÿæˆæ–‡æ¡ˆï¼ˆAI Agentï¼‰</strong> ï¼šå¼€å§‹èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>AI Agentï¼Œ</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯åŸºäº<strong>Gemini 2.5 Pro</strong>ï¼Œæ ¹æ®å¼€å§‹èŠ‚ç‚¹ä¸­è¾“å…¥çš„æ ‡é¢˜ç”Ÿæˆå°ä½›é™€æ¼«ç”»æ–‡æ¡ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b1ca93039e54ec88331994420016265~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=VToXMAJr9QydNNF%2Fw%2B%2BZw3May3s%3D" alt="" loading="lazy"/></p>
<p><strong>Code in</strong> <strong>JavaScript</strong>ï¼šç”Ÿæˆæ–‡æ¡ˆï¼ˆAI Agentï¼‰èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in JavaScript</strong>èŠ‚ç‚¹ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å‰ç½®èŠ‚ç‚¹è¾“å‡ºçš„æ–‡æ¡ˆåŸºäº\nåˆ†å‰²ä¸ºæ–‡æ¡ˆåˆ—è¡¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bdd618f3a0044e8b0e3d1f41ece62a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=fEGY46Q7FOm0jMCyEVphb1xsPFE%3D" alt="" loading="lazy"/></p>
<p><strong>æºä»£ç </strong> <strong>ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">content</span> = <span class="hljs-variable">$input</span>.first().json.output<span class="hljs-comment">;</span>
if (!content) {
  return { json: { list: <span class="hljs-section">[]</span> } }<span class="hljs-comment">;</span>
}
const <span class="hljs-attr">stringArray</span> = content.split(<span class="hljs-string">'\n'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">cleanList</span> = stringArray.filter(item =&gt; item.trim() !== <span class="hljs-string">""</span>)<span class="hljs-comment">;</span>
return {
  json: {
    list: cleanList
  }
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-3">3.1. ç”Ÿæˆå°é¢</h3>
<p><strong>ç”Ÿæˆå°é¢ï¼ˆAI Agentï¼‰</strong> ï¼š<strong>Code in</strong> <strong>JavaScript</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢AI AgentèŠ‚ç‚¹ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯åŸºäºæ–‡æ¡ˆç”Ÿæˆå°ä½›é™€æ¼«ç”»çš„å…¬ä¼—å·å°é¢å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b44099b71f1c456cbac8a3152a00fd41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=nyg%2BT%2BgAJIUOBqNtkJ2U1ksZzxY%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯ç¼–å†™æ€è·¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç»“åˆå‰ç½®æ–‡æ¡ˆç”Ÿæˆç¬¦åˆæ„å¢ƒçš„èƒŒæ™¯å›¾
<span class="hljs-bullet">2.</span> å°†å›ºå®šIPå½¢è±¡çš„å°ä½›é™€æ”¾ç½®åœ¨ç”»é¢å¯¹åº”ä½ç½®
<span class="hljs-bullet">3.</span> è¿”å›å›¾ç‰‡é“¾æ¥
</code></pre>
<ul>
<li>Chat Modelå¤„ç‚¹å‡»ã€+ã€‘æ–°å¢OpenAI Chat Modeï¼ˆæˆ–DeepSeek Chat Modelï¼‰ã€‚</li>
<li>Toolå¤„ç‚¹å‡»ã€+ã€‘æ–°å¢MCP Client Toolç”¨äºå›¾ç‰‡ç”Ÿæˆã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/213831053c084fb88849aa4e773b6f43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=YHUiLldWcEgviaDuYFNOAeiIBcU%3D" alt="" loading="lazy"/></p>
<p>Endpointå¡«å†™<a href="https://link.juejin.cn?target=https%3A%2F%2Fdashscope.aliyuncs.com%2Fapi%2Fv1%2Fmcps%2FWan25Media%2Fsse%25E3%2580%2582" target="_blank" title="https://dashscope.aliyuncs.com/api/v1/mcps/Wan25Media/sse%E3%80%82" ref="nofollow noopener noreferrer">dashscope.aliyuncs.com/api/v1/mcpsâ€¦</a></p>
<p>Server Transporté€‰æ‹©Server Sent Events (Deprecated)ã€‚</p>
<p>Authenticationé€‰æ‹©Header Authã€‚</p>
<p>Credential for Header Authç‚¹å‡»Create new credentialï¼ŒNameå¡«å†™Authorizationï¼ŒValueå¡«å†™é˜¿é‡Œäº‘ç™¾ç‚¼çš„keyï¼Œæ³¨æ„keyå‰é¢éœ€è¦åŠ Bearerå’Œä¸€ä¸ªè‹±æ–‡ç©ºæ ¼ã€‚<strong>æœ€åæŠŠè¿™ä¸ªAuthå‘½åä¸ºbailianï¼Œä»¥ä¾¿åç»­èŠ‚ç‚¹ä½¿ç”¨ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9282040efca542aaa8e0784daa9d42af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=Myh3QLrHMYoiPK4t2LMjSCkvuKE%3D" alt="" loading="lazy"/></p>
<p><strong>Edit Fieldsï¼š</strong> ç”Ÿæˆå°é¢ï¼ˆAI Agentï¼‰èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Edit Fields</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å¯¹å°é¢å›¾çš„å±æ€§åè¿›è¡Œé‡å‘½åä¸ºfmã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1adfcd454e29431cb5f5471c75141826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=UMaWQrJj%2FDC7L8BzuFAOErmO08g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 ç”Ÿæˆæ­£æ–‡</h3>
<p><strong>Split Out</strong>:<strong>Code in</strong> <strong>JavaScript</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Split Out</strong>èŠ‚ç‚¹ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ‹†åˆ†éå†å‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„æ–‡æ¡ˆåˆ—è¡¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73618de246714670b459a89b76de0149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=cYlDf5uqJp5JeEk%2Fj%2FKd3YRspi0%3D" alt="" loading="lazy"/></p>
<p><strong>Edit Fields</strong>:<strong>Split Out</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Edit Fields</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯è®°å½•å¾ªç¯è½®æ•°ä»¥åŠå–å‡ºå‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„æ–‡æ¡ˆå†…å®¹ã€‚</p>
<ul>
<li>ç‚¹å‡»ã€Add Fieldã€‘å­—æ®µåç§°å‘½åä¸ºround_numberï¼Œvalueå¡«å†™{{ $itemIndex}}</li>
<li>å°†å‰ç½®èŠ‚ç‚¹çš„æ–‡æ¡ˆå­—æ®µï¼ˆlistï¼‰æ‹–å…¥Fields to Seté¢æ¿</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c838d613abab484cb44a9438d020a16c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=uG8Hf9rc%2FWY7%2BA62bVtrGcYT9WY%3D" alt="" loading="lazy"/></p>
<p><strong>ç”Ÿæˆæ­£æ–‡ï¼ˆAI Agentï¼‰</strong> ï¼š<strong>Edit Fields</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>AI Agent</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯åŸºäºæ–‡æ¡ˆå’Œå¾ªç¯è½®æ•°çš„å¥‡å¶æ€§ç”Ÿæˆå›¾ç‰‡ã€‚å¶æ•°è½®æ•°å°ä½›é™€åœ¨å³è¾¹ï¼Œå¥‡æ•°è½®æ•°åä¹‹ã€‚<code>èŠ‚ç‚¹çš„é…ç½®åœ¨å°é¢ç« èŠ‚å·²ç»æ¼”ç¤ºè¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/814de539717a40f0a0a24e3e7861b7e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=ePBR2aQUKxOwjJdGXSnF0MP0wP4%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯ç¼–å†™æ€è·¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åŸºäºå¾ªç¯è½®æ•°åˆ¤æ–­å°ä½›é™€åœ¨ç”»é¢çš„ä½ç½®ï¼Œå¶æ•°åœ¨å³å¥‡æ•°åä¹‹
<span class="hljs-bullet">2.</span> ç»“åˆå‰ç½®æ–‡æ¡ˆç”Ÿæˆç¬¦åˆæ„å¢ƒçš„èƒŒæ™¯å›¾
<span class="hljs-bullet">3.</span> å°†å›ºå®šIPå½¢è±¡çš„å°ä½›é™€æ”¾ç½®åœ¨ç”»é¢å¯¹åº”ä½ç½®
<span class="hljs-bullet">4.</span> å°†æ–‡æ¡ˆå†™å…¥å›¾ç‰‡
<span class="hljs-bullet">5.</span> è¿”å›å›¾ç‰‡é“¾æ¥
</code></pre>
<p><strong>Code in</strong> <strong>JavaScript</strong> <strong>ï¼š</strong> ç”Ÿæˆæ­£æ–‡ï¼ˆAI Agentï¼‰èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in JavaScript</strong>ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„å›¾ç‰‡é“¾æ¥é›†æˆä¸ºæ•°ç»„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a2683ec84b44ef2a2cb3ae4fb50ca41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=Qwtv1Etzn9O6y%2Fxz7noOMoVZ2u4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">3.3. å†™å…¥æœ¬åœ°ç£ç›˜</h3>
<p><strong>Merge</strong>ï¼š<strong>Code in</strong> <strong>JavaScript</strong>å’Œ<strong>Edit Fields</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»æ–°å¢<strong>Merge</strong>èŠ‚ç‚¹ï¼Œé›†æˆå‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„å°é¢å›¾å’Œæ­£æ–‡æ¼«ç”»ç­‰å…ƒç´ ã€‚</p>
<ul>
<li>Modeé€‰æ‹©Combine</li>
<li>Combine Byé€‰æ‹©Position</li>
<li>Number of Inputsé€‰æ‹©2</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ece3c03c1645cb9748e91418f37762~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=NDXbn1NVZvui7BpgNCkW5wS9rag%3D" alt="" loading="lazy"/></p>
<p><strong>HTTP Request</strong>ï¼ˆå†™å°é¢ï¼‰ï¼š<strong>Merge</strong>å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ·»åŠ <strong>HTTP Request</strong>èŠ‚ç‚¹ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å›¾ç‰‡é“¾æ¥è½¬æ¢ä¸ºæ–‡ä»¶ã€‚</p>
<ul>
<li>Methodé€‰æ‹©GET</li>
<li>URLå¡«å†™{{ $json.fm }}</li>
<li>ç‚¹å‡»ã€Add optionã€‘é€‰æ‹©Responseï¼ŒResponse Formaté€‰æ‹©Fileã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d6f811bbd604f0fbde57819f22e99aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=o7SLkCikfhG4AG58WEEmJrxH4VY%3D" alt="" loading="lazy"/></p>
<p><strong>Read/Write Files from Diskï¼ˆå†™å°é¢ï¼‰</strong> ï¼š<strong>HTTP Request</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Read/Write Files from Disk</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å‰ç½®èŠ‚ç‚¹çš„æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ç£ç›˜ã€‚</p>
<ul>
<li>Operationé€‰æ‹©Write File to Disk</li>
<li>File Path and Nameå¡«å†™/tmp/xft_fm.jpg</li>
<li>Input Binary Fieldå¡«å†™data</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5876e50eefcb4ccda21bb797978f66ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=dVB3sQxX%2F7%2FbLEKvUf%2FWefHwo9w%3D" alt="" loading="lazy"/></p>
<p>å†™å…¥æ­£æ–‡åŒç†ï¼Œè¿™ä¸å†èµ˜è¿°ã€‚ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªå·¥ä½œæµçš„å®Œæ•´æµç¨‹æ‹†è§£ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯»è€…å¯ä»¥è·Ÿç€æ•™ç¨‹å®è·µä¸€éã€‚<strong>ä¸Šè¿°å·¥ä½œæµå·²ç»è¢«æ”¶å½•åˆ°äº†å°è‚¥è‚ å…±å­¦ç¤¾ç¾¤ä¸­ï¼Œå¦‚æœæƒ³ç›´æ¥è·å–å·¥ä½œæµåŸä»¶ï¼Œå¯ä»¥åŠ å…¥ç¤¾ç¾¤åæˆ‘æ‹‰ä½ è¿›ç©ºé—´ç›´æ¥å­¦ä¹ ä½¿ç”¨ã€‚</strong></p>
<h2 data-id="heading-6">4. å†™åœ¨æœ€å</h2>
<p>è¿™å¥—å°ä½›é™€æ¼«ç”»å·¥ä½œæµåªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œå®ƒçš„æ ¸å¿ƒé€»è¾‘å¯ä»¥å¤ç”¨åˆ°ä»»ä½•IPå½¢è±¡çš„ç”Ÿæˆä¸Šï¼Œç”šè‡³å¯ä»¥è¿›ä¸€æ­¥ç»“åˆè§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œå®ç°çŸ­è§†é¢‘çš„è‡ªåŠ¨åŒ–ç”Ÿäº§ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/503ca220a2194b7b82c11b9945feee16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764729222&amp;x-signature=NyiksGQyr4adQdWj2%2B4vY6U1X5Y%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3ä¸­ä½¿ç”¨medium-zoom]]></title>    <link>https://juejin.cn/post/7576536602111148042</link>    <guid>https://juejin.cn/post/7576536602111148042</guid>    <pubDate>2025-11-26T02:40:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576536602111148042" data-draft-id="7576821574429065225" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3ä¸­ä½¿ç”¨medium-zoom"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T02:40:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨æ˜é‡‘80110"/> <meta itemprop="url" content="https://juejin.cn/user/4195392103913143"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3ä¸­ä½¿ç”¨medium-zoom
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392103913143/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨æ˜é‡‘80110
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:40:30.000Z" title="Wed Nov 26 2025 02:40:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Medium Zoom - Vue3 ä½¿ç”¨æ–‡æ¡£</h2>
<h3 data-id="heading-1">ğŸ“¦ ç®€ä»‹</h3>
<p>Medium Zoom æ˜¯ä¸€ä¸ªè½»é‡çº§ JavaScript åº“ï¼Œç”¨äºå®ç°ç±»ä¼¼ Medium ç½‘ç«™çš„å›¾ç‰‡ç‚¹å‡»æ”¾å¤§ç¼©æ”¾æ•ˆæœã€‚æœ¬æ–‡æ¡£ä¸“æ³¨äºåœ¨ Vue3 é¡¹ç›®ä¸­çš„é›†æˆå’Œä½¿ç”¨ã€‚</p>
<h3 data-id="heading-2">âœ¨ æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>ğŸ“± <strong>å“åº”å¼è®¾è®¡</strong> - å®Œç¾é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯</li>
<li>ğŸš€ <strong>é«˜æ€§èƒ½</strong> - ä¼˜åŒ–è‡³ 60fps æµç•…åŠ¨ç”»</li>
<li>âš¡ï¸ <strong>é«˜æ¸…å›¾æ”¯æŒ</strong> - é€šè¿‡ <code>data-zoom-src</code> å±æ€§åŠ è½½é«˜æ¸…å¤§å›¾</li>
<li>ğŸ¨ <strong>å¯å®šåˆ¶åŒ–</strong> - æ”¯æŒè‡ªå®šä¹‰è¾¹è·ã€èƒŒæ™¯ã€æ»šåŠ¨åç§»ç­‰</li>
<li>ğŸ‚ <strong>äº‹ä»¶ç³»ç»Ÿ</strong> - å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç›‘å¬</li>
<li>ğŸ”Œ <strong>é›¶ä¾èµ–</strong> - æ— ä»»ä½•è¿è¡Œæ—¶ä¾èµ–</li>
<li>ğŸ’ <strong>æ¡†æ¶å‹å¥½</strong> - å®Œç¾æ”¯æŒ Vue3 ç»„åˆå¼ API</li>
</ul>
<h3 data-id="heading-3">ğŸ“¥ å®‰è£…</h3>
<h4 data-id="heading-4">ä½¿ç”¨ npm</h4>
<pre><code class="hljs language-bash" lang="bash">npm install medium-zoom
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨ yarn</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add medium-zoom
</code></pre>
<h4 data-id="heading-6">ä½¿ç”¨ pnpm</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add medium-zoom
</code></pre>
<h3 data-id="heading-7">ğŸš€ Vue3 å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-8">æ–¹æ³•ä¸€ï¼šå°è£…ç»„ä»¶ï¼ˆæ¨èï¼‰</h4>
<p>åˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„ <code>ImageZoom.vue</code> ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { watch, type ImgHTMLAttributes, type ComponentPublicInstance } from 'vue'
import mediumZoom, { type Zoom, type ZoomOptions } from 'medium-zoom'

interface Props extends ImgHTMLAttributes {
  options?: ZoomOptions
}

const props = defineProps&lt;Props&gt;()

let zoom: Zoom | null = null

function getZoom() {
  if (zoom === null) {
    zoom = mediumZoom(props.options)
  }
  return zoom
}

function attachZoom(ref: Element | ComponentPublicInstance | null) {
  const image = ref as HTMLImageElement | null
  const zoom = getZoom()

  if (image) {
    zoom.attach(image)
  } else {
    zoom.detach()
  }
}

watch(() =&gt; props.options, (options) =&gt; {
  const zoom = getZoom()
  zoom.update(options || {})
})
&lt;/script&gt;

&lt;template&gt;
  &lt;img :ref="attachZoom" v-bind="$attrs" /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-9">ä½¿ç”¨å°è£…çš„ç»„ä»¶</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import ImageZoom from './components/ImageZoom.vue'
&lt;/script&gt;

&lt;template&gt;
  &lt;article&gt;
    &lt;h1&gt;æˆ‘çš„å›¾ç‰‡ç”»å»Š&lt;/h1&gt;

    &lt;!-- åŸºç¡€ä½¿ç”¨ --&gt;
    &lt;ImageZoom src="/images/photo-1.jpg" alt="ç…§ç‰‡1" /&gt;

    &lt;!-- è‡ªå®šä¹‰èƒŒæ™¯è‰² --&gt;
    &lt;ImageZoom 
      src="/images/photo-2.jpg" 
      alt="ç…§ç‰‡2"
      :options="{ background: '#000000' }" 
    /&gt;

    &lt;!-- è‡ªå®šä¹‰è¾¹è· --&gt;
    &lt;ImageZoom 
      src="/images/photo-3.jpg" 
      alt="ç…§ç‰‡3"
      :options="{ margin: 48, background: 'rgba(0,0,0,0.9)' }" 
    /&gt;

    &lt;!-- é«˜æ¸…å›¾æ”¯æŒ --&gt;
    &lt;ImageZoom 
      src="/images/thumbnail.jpg" 
      data-zoom-src="/images/hd-image.jpg"
      alt="é«˜æ¸…å›¾ç‰‡"
    /&gt;
  &lt;/article&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-10">æ–¹æ³•äºŒï¼šåœ¨ Composable ä¸­ä½¿ç”¨</h4>
<p>åˆ›å»º <code>useImageZoom.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { onMounted, onUnmounted, ref, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Ref</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> mediumZoom, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">Zoom</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">ZoomOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'medium-zoom'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useImageZoom</span>(<span class="hljs-params">
  selector?: <span class="hljs-built_in">string</span> | HTMLElement,
  options?: ZoomOptions
</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">zoom</span>: <span class="hljs-title class_">Ref</span>&lt;<span class="hljs-title class_">Zoom</span> | <span class="hljs-literal">null</span>&gt; = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    zoom.<span class="hljs-property">value</span> = <span class="hljs-title function_">mediumZoom</span>(selector, options)
  })

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">detach</span>()
  })

  <span class="hljs-keyword">return</span> {
    zoom,
    <span class="hljs-attr">open</span>: <span class="hljs-function">() =&gt;</span> zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>(),
    <span class="hljs-attr">close</span>: <span class="hljs-function">() =&gt;</span> zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">close</span>(),
    <span class="hljs-attr">toggle</span>: <span class="hljs-function">() =&gt;</span> zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">toggle</span>(),
  }
}
</code></pre>
<p>ä½¿ç”¨ Composableï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { onMounted } from 'vue'
import { useImageZoom } from './composables/useImageZoom'

// åˆå§‹åŒ– zoom
const { zoom, open, close } = useImageZoom('[data-zoomable]', {
  margin: 24,
  background: '#BADA55',
})

// ä¹Ÿå¯ä»¥åœ¨æŒ‚è½½ååŠ¨æ€é™„åŠ å›¾ç‰‡
onMounted(() =&gt; {
  zoom.value?.attach('.gallery-image')
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;img src="/image-1.jpg" data-zoomable alt="å›¾ç‰‡1" /&gt;
    &lt;img src="/image-2.jpg" data-zoomable alt="å›¾ç‰‡2" /&gt;
    &lt;img src="/image-3.jpg" class="gallery-image" alt="å›¾ç‰‡3" /&gt;
    
    &lt;!-- æ‰‹åŠ¨æ§åˆ¶æŒ‰é’® --&gt;
    &lt;button @click="open"&gt;æ”¾å¤§ç¬¬ä¸€å¼ å›¾ç‰‡&lt;/button&gt;
    &lt;button @click="close"&gt;å…³é—­ç¼©æ”¾&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-11">æ–¹æ³•ä¸‰ï¼šç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { onMounted, onUnmounted, ref } from 'vue'
import mediumZoom from 'medium-zoom'

const zoomRef = ref(null)

onMounted(() =&gt; {
  zoomRef.value = mediumZoom('.zoomable', {
    margin: 24,
    background: '#fff',
    scrollOffset: 40,
  })
})

onUnmounted(() =&gt; {
  zoomRef.value?.detach()
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;img src="/image.jpg" class="zoomable" alt="å¯ç¼©æ”¾å›¾ç‰‡" /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-12">âš™ï¸ é…ç½®é€‰é¡¹ (ZoomOptions)</h3>









































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>margin</code></td><td><code>number</code></td><td><code>0</code></td><td>ç¼©æ”¾å›¾ç‰‡å¤–çš„ç©ºç™½è¾¹è·ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>background</code></td><td><code>string</code></td><td><code>"#fff"</code></td><td>é®ç½©å±‚èƒŒæ™¯è‰²ï¼Œæ”¯æŒä»»ä½• CSS é¢œè‰²å€¼</td></tr><tr><td><code>scrollOffset</code></td><td><code>number</code></td><td><code>40</code></td><td>æ»šåŠ¨å¤šå°‘åƒç´ åè‡ªåŠ¨å…³é—­ç¼©æ”¾</td></tr><tr><td><code>container</code></td><td><code>string | HTMLElement | object</code></td><td><code>null</code></td><td>æŒ‡å®šç¼©æ”¾æ¸²æŸ“çš„å®¹å™¨è§†å£</td></tr><tr><td><code>template</code></td><td><code>string | HTMLTemplateElement</code></td><td><code>null</code></td><td>è‡ªå®šä¹‰æ¨¡æ¿å…ƒç´ </td></tr></tbody></table>
<h4 data-id="heading-13">é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">ZoomOptions</span> = {
  <span class="hljs-attr">margin</span>: <span class="hljs-number">48</span>,                    <span class="hljs-comment">// 48px è¾¹è·</span>
  <span class="hljs-attr">background</span>: <span class="hljs-string">'rgba(0,0,0,0.9)'</span>, <span class="hljs-comment">// åŠé€æ˜é»‘è‰²èƒŒæ™¯</span>
  <span class="hljs-attr">scrollOffset</span>: <span class="hljs-number">100</span>,             <span class="hljs-comment">// æ»šåŠ¨ 100px åå…³é—­</span>
  <span class="hljs-attr">container</span>: <span class="hljs-string">'#zoom-container'</span>,  <span class="hljs-comment">// åœ¨æŒ‡å®šå®¹å™¨å†…ç¼©æ”¾</span>
}
</code></pre>
<h3 data-id="heading-14">ğŸ¯ API æ–¹æ³•</h3>
<h4 data-id="heading-15"><code>open(options?: { target?: HTMLElement }): Promise&lt;Zoom&gt;</code></h4>
<p>æ‰“å¼€ç¼©æ”¾ï¼Œè¿”å› Promiseã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>()
<span class="hljs-comment">// æˆ–æŒ‡å®šç›®æ ‡å›¾ç‰‡</span>
zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>({ <span class="hljs-attr">target</span>: imgElement })
</code></pre>
<h4 data-id="heading-16"><code>close(): Promise&lt;Zoom&gt;</code></h4>
<p>å…³é—­ç¼©æ”¾ï¼Œè¿”å› Promiseã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">close</span>()
</code></pre>
<h4 data-id="heading-17"><code>toggle(options?: { target?: HTMLElement }): Promise&lt;Zoom&gt;</code></h4>
<p>åˆ‡æ¢ç¼©æ”¾çŠ¶æ€ï¼ˆæ‰“å¼€/å…³é—­ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">toggle</span>()
</code></pre>
<h4 data-id="heading-18"><code>attach(...selectors): Zoom</code></h4>
<p>é™„åŠ å›¾ç‰‡åˆ°ç¼©æ”¾å®ä¾‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">attach</span>(<span class="hljs-string">'#image-1'</span>, <span class="hljs-string">'#image-2'</span>)
zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">attach</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#image-3'</span>))
</code></pre>
<h4 data-id="heading-19"><code>detach(...selectors): Zoom</code></h4>
<p>ä»ç¼©æ”¾å®ä¾‹ä¸­ç§»é™¤å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">detach</span>(<span class="hljs-string">'#image-1'</span>)
zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">detach</span>() <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰å›¾ç‰‡</span>
</code></pre>
<h4 data-id="heading-20"><code>update(options: ZoomOptions): Zoom</code></h4>
<p>æ›´æ–°é…ç½®é€‰é¡¹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">update</span>({ 
  <span class="hljs-attr">background</span>: <span class="hljs-string">'#000'</span>,
  <span class="hljs-attr">margin</span>: <span class="hljs-number">50</span> 
})
</code></pre>
<h4 data-id="heading-21"><code>clone(options?: ZoomOptions): Zoom</code></h4>
<p>å…‹éš†ä¸€ä¸ªæ–°çš„ç¼©æ”¾å®ä¾‹ï¼Œåˆå¹¶æ–°é…ç½®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> newZoom = zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">clone</span>({ <span class="hljs-attr">margin</span>: <span class="hljs-number">100</span> })
</code></pre>
<h4 data-id="heading-22"><code>on(type: string, listener: Function, options?): Zoom</code></h4>
<p>æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡å·²æ‰“å¼€'</span>, event.<span class="hljs-property">detail</span>.<span class="hljs-property">zoom</span>)
})
</code></pre>
<h4 data-id="heading-23"><code>off(type: string, listener: Function, options?): Zoom</code></h4>
<p>ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event</span>) =&gt; { <span class="hljs-comment">/* ... */</span> }
zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, handler)
zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'open'</span>, handler)
</code></pre>
<h4 data-id="heading-24"><code>getOptions(): ZoomOptions</code></h4>
<p>è·å–å½“å‰é…ç½®é€‰é¡¹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> currentOptions = zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">getOptions</span>()
</code></pre>
<h4 data-id="heading-25"><code>getImages(): HTMLElement[]</code></h4>
<p>è·å–æ‰€æœ‰å·²é™„åŠ çš„å›¾ç‰‡å…ƒç´ ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> images = zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">getImages</span>()
</code></pre>
<h4 data-id="heading-26"><code>getZoomedImage(): HTMLElement | null</code></h4>
<p>è·å–å½“å‰æ­£åœ¨ç¼©æ”¾çš„å›¾ç‰‡å…ƒç´ ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> currentImage = zoom.<span class="hljs-property">value</span>?.<span class="hljs-title function_">getZoomedImage</span>()
</code></pre>
<h3 data-id="heading-27">ğŸ­ äº‹ä»¶ç³»ç»Ÿ</h3>
<h4 data-id="heading-28">å¯ç”¨äº‹ä»¶</h4>








































<table><thead><tr><th>äº‹ä»¶å</th><th>è§¦å‘æ—¶æœº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>open</code></td><td>è°ƒç”¨ <code>open()</code> æ–¹æ³•æ—¶ç«‹å³è§¦å‘</td><td>ç¼©æ”¾åŠ¨ç”»å¼€å§‹å‰</td></tr><tr><td><code>opened</code></td><td>ç¼©æ”¾åŠ¨ç”»å®Œæˆå</td><td>å›¾ç‰‡å·²å®Œå…¨æ”¾å¤§</td></tr><tr><td><code>close</code></td><td>è°ƒç”¨ <code>close()</code> æ–¹æ³•æ—¶ç«‹å³è§¦å‘</td><td>å…³é—­åŠ¨ç”»å¼€å§‹å‰</td></tr><tr><td><code>closed</code></td><td>å…³é—­åŠ¨ç”»å®Œæˆå</td><td>å›¾ç‰‡å·²å®Œå…¨ç¼©å°</td></tr><tr><td><code>detach</code></td><td>è°ƒç”¨ <code>detach()</code> æ–¹æ³•æ—¶</td><td>å›¾ç‰‡ä»å®ä¾‹ä¸­ç§»é™¤</td></tr><tr><td><code>update</code></td><td>è°ƒç”¨ <code>update()</code> æ–¹æ³•æ—¶</td><td>é…ç½®é€‰é¡¹å·²æ›´æ–°</td></tr></tbody></table>
<h4 data-id="heading-29">Vue3 ä¸­ä½¿ç”¨äº‹ä»¶</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { onMounted, ref } from 'vue'
import mediumZoom from 'medium-zoom'

const zoom = ref(null)
const zoomCount = ref(0)

onMounted(() =&gt; {
  zoom.value = mediumZoom('[data-zoomable]')
  
  // ç›‘å¬æ‰“å¼€äº‹ä»¶
  zoom.value.on('open', (event) =&gt; {
    console.log('å¼€å§‹ç¼©æ”¾:', event.target.alt)
  })
  
  // ç›‘å¬æ‰“å¼€å®Œæˆäº‹ä»¶
  zoom.value.on('opened', (event) =&gt; {
    zoomCount.value++
    console.log(`å·²ç¼©æ”¾ ${zoomCount.value} æ¬¡`)
  })
  
  // ç›‘å¬å…³é—­äº‹ä»¶
  zoom.value.on('close', () =&gt; {
    console.log('å¼€å§‹å…³é—­ç¼©æ”¾')
  })
  
  // ç›‘å¬å…³é—­å®Œæˆäº‹ä»¶
  zoom.value.on('closed', () =&gt; {
    console.log('ç¼©æ”¾å·²å…³é—­')
  })
  
  // å•æ¬¡äº‹ä»¶ç›‘å¬
  zoom.value.on('open', (event) =&gt; {
    console.log('è¿™ä¸ªåªè§¦å‘ä¸€æ¬¡')
  }, { once: true })
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;img src="/image.jpg" data-zoomable alt="å›¾ç‰‡" /&gt;
    &lt;p&gt;å·²ç¼©æ”¾æ¬¡æ•°: {{ zoomCount }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-30">ğŸ¨ é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-31">1. é«˜æ¸…å›¾åŠ è½½</h4>
<p>ä½¿ç”¨ <code>data-zoom-src</code> å±æ€§æŒ‡å®šé«˜æ¸…å¤§å›¾ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;ImageZoom 
    src="/thumbnails/small.jpg" 
    data-zoom-src="/images/large-hd.jpg"
    alt="é«˜æ¸…å›¾ç‰‡"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-32">2. åœ¨ Markdown æ¸²æŸ“ä¸­ä½¿ç”¨</h4>
<p>é€‚ç”¨äºåšå®¢ã€æ–‡æ¡£ç­‰åœºæ™¯ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { onMounted, ref, nextTick } from 'vue'
import mediumZoom from 'medium-zoom'
import MarkdownIt from 'markdown-it'

const md = new MarkdownIt()
const content = ref('')
const zoom = ref(null)

const markdown = `
# æˆ‘çš„æ–‡ç« 
![å›¾ç‰‡1](/image-1.jpg)
![å›¾ç‰‡2](/image-2.jpg)
`

onMounted(async () =&gt; {
  content.value = md.render(markdown)
  
  await nextTick()
  
  // ä¸ºæ‰€æœ‰ markdown æ¸²æŸ“çš„å›¾ç‰‡æ·»åŠ ç¼©æ”¾
  zoom.value = mediumZoom('.markdown-body img', {
    background: 'rgba(255,255,255,0.95)',
    margin: 24
  })
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="markdown-body" v-html="content"&gt;&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-33">3. è‡ªå®šä¹‰å®¹å™¨</h4>
<p>åœ¨æŒ‡å®šå®¹å™¨å†…ç¼©æ”¾ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { onMounted } from 'vue'
import mediumZoom from 'medium-zoom'

onMounted(() =&gt; {
  mediumZoom('[data-zoomable]', {
    container: '#custom-container',
    background: 'transparent'
  })
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div id="custom-container" style="position: relative; height: 500px;"&gt;
    &lt;img src="/image.jpg" data-zoomable alt="å›¾ç‰‡" /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-34">4. åŠ¨æ€æ·»åŠ /ç§»é™¤å›¾ç‰‡</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { ref, onMounted } from 'vue'
import mediumZoom from 'medium-zoom'

const images = ref(['/img1.jpg', '/img2.jpg'])
const zoom = ref(null)

onMounted(() =&gt; {
  zoom.value = mediumZoom('.gallery img')
})

function addImage() {
  const newImg = `/img${images.value.length + 1}.jpg`
  images.value.push(newImg)
  
  // ä¸‹ä¸€å¸§åé™„åŠ æ–°å›¾ç‰‡
  nextTick(() =&gt; {
    const newElement = document.querySelector(`.img-${images.value.length - 1}`)
    zoom.value?.attach(newElement)
  })
}

function removeImage(index: number) {
  const imgElement = document.querySelector(`.img-${index}`)
  zoom.value?.detach(imgElement)
  images.value.splice(index, 1)
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="gallery"&gt;
    &lt;img 
      v-for="(src, index) in images" 
      :key="index"
      :src="src" 
      :class="`img-${index}`"
      alt="å›¾ç‰‡" 
    /&gt;
    &lt;button @click="addImage"&gt;æ·»åŠ å›¾ç‰‡&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-35">5. ä»å¤–éƒ¨æŒ‰é’®è§¦å‘ç¼©æ”¾</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { ref, onMounted } from 'vue'
import mediumZoom from 'medium-zoom'

const zoom = ref(null)
const imageRef = ref(null)

onMounted(() =&gt; {
  zoom.value = mediumZoom(imageRef.value)
})

function handleZoom() {
  zoom.value?.toggle({ target: imageRef.value })
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;img ref="imageRef" src="/image.jpg" alt="å›¾ç‰‡" /&gt;
    &lt;button @click="handleZoom"&gt;ç‚¹å‡»ç¼©æ”¾å›¾ç‰‡&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-36">6. å›¾ç‰‡ç”»å»Šç¤ºä¾‹</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { ref, onMounted } from 'vue'
import mediumZoom from 'medium-zoom'

const zoom = ref(null)

const gallery = [
  { id: 1, src: '/gallery/img1.jpg', thumb: '/gallery/thumb1.jpg', alt: 'é£æ™¯1' },
  { id: 2, src: '/gallery/img2.jpg', thumb: '/gallery/thumb2.jpg', alt: 'é£æ™¯2' },
  { id: 3, src: '/gallery/img3.jpg', thumb: '/gallery/thumb3.jpg', alt: 'é£æ™¯3' },
]

onMounted(() =&gt; {
  zoom.value = mediumZoom('.gallery-image', {
    margin: 48,
    background: '#000',
  })
  
  zoom.value.on('opened', (event) =&gt; {
    console.log(`æ­£åœ¨æŸ¥çœ‹: ${event.target.alt}`)
  })
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="gallery-grid"&gt;
    &lt;div v-for="item in gallery" :key="item.id" class="gallery-item"&gt;
      &lt;img 
        :src="item.thumb" 
        :data-zoom-src="item.src"
        :alt="item.alt"
        class="gallery-image"
      /&gt;
      &lt;p&gt;{{ item.alt }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.gallery-image {
  width: 100%;
  cursor: zoom-in;
  transition: opacity 0.3s;
}

.gallery-image:hover {
  opacity: 0.8;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-37">ğŸ¨ æ ·å¼å®šåˆ¶</h3>
<p>å¦‚æœéœ€è¦è‡ªå®šä¹‰ z-indexï¼ˆé¿å…ä¸å…¶ä»– UI æ¡†æ¶å†²çªï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åœ¨å…¨å±€æ ·å¼ä¸­æ·»åŠ  */</span>
<span class="hljs-selector-class">.medium-zoom-overlay</span>,
<span class="hljs-selector-class">.medium-zoom-image--opened</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
}
</code></pre>
<p>è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.medium-zoom-image--opened</span> {
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">300ms</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>);
}
</code></pre>
<h3 data-id="heading-38">ğŸ“± TypeScript æ”¯æŒ</h3>
<p>å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> mediumZoom, { 
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">Zoom</span>, 
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ZoomOptions</span>, 
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ZoomSelector</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ZoomOpenOptions</span> 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'medium-zoom'</span>

<span class="hljs-comment">// Zoom å®ä¾‹ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">zoom</span>: <span class="hljs-title class_">Zoom</span> = <span class="hljs-title function_">mediumZoom</span>()

<span class="hljs-comment">// é…ç½®é€‰é¡¹ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">ZoomOptions</span> = {
  <span class="hljs-attr">margin</span>: <span class="hljs-number">24</span>,
  <span class="hljs-attr">background</span>: <span class="hljs-string">'#fff'</span>,
  <span class="hljs-attr">scrollOffset</span>: <span class="hljs-number">40</span>,
}

<span class="hljs-comment">// é€‰æ‹©å™¨ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">selector</span>: <span class="hljs-title class_">ZoomSelector</span> = <span class="hljs-string">'.image'</span> <span class="hljs-comment">// string | HTMLElement | HTMLElement[] | NodeList</span>
</code></pre>
<h3 data-id="heading-39">ğŸ”§ å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-40">Q: ç¼©æ”¾çš„å›¾ç‰‡çœ‹ä¸è§ï¼Ÿ</h4>
<p>A: æŸäº› UI æ¡†æ¶å¯èƒ½è®¾ç½®äº†è¾ƒé«˜çš„ z-indexï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.medium-zoom-overlay</span>,
<span class="hljs-selector-class">.medium-zoom-image--opened</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
}
</code></pre>
<h4 data-id="heading-41">Q: åœ¨ v-for ä¸­ä½¿ç”¨æ— æ•ˆï¼Ÿ</h4>
<p>A: ç¡®ä¿åœ¨ DOM æ›´æ–°åå†é™„åŠ å›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { nextTick } from 'vue'

async function addImages() {
  images.value.push(newImage)
  await nextTick()
  zoom.value?.attach('.new-image')
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-42">Q: å¦‚ä½•åœ¨è·¯ç”±åˆ‡æ¢æ—¶æ¸…ç†ï¼Ÿ</h4>
<p>A: ä½¿ç”¨ <code>onUnmounted</code> é’©å­ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { onUnmounted } from 'vue'

onUnmounted(() =&gt; {
  zoom.value?.detach()
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-43">ğŸŒ æµè§ˆå™¨æ”¯æŒ</h3>
<ul>
<li>Chrome 36+</li>
<li>Firefox 34+</li>
<li>Safari 9+</li>
<li>Edge 12+</li>
<li>IE 10+ (éœ€è¦ template polyfill)</li>
</ul>
<h3 data-id="heading-44">ğŸ“š å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffrancoischalifour%2Fmedium-zoom" target="_blank" title="https://github.com/francoischalifour/medium-zoom" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium-zoom.francoischalifour.com" target="_blank" title="https://medium-zoom.francoischalifour.com" ref="nofollow noopener noreferrer">åœ¨çº¿æ¼”ç¤º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium-zoom.francoischalifour.com%2Fstorybook" target="_blank" title="https://medium-zoom.francoischalifour.com/storybook" ref="nofollow noopener noreferrer">Storybook ç¤ºä¾‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffrancoischalifour%2Fmedium-zoom%2Ftree%2Fmaster%2Fexamples%2Fvue" target="_blank" title="https://github.com/francoischalifour/medium-zoom/tree/master/examples/vue" ref="nofollow noopener noreferrer">æ›´å¤š Vue ç¤ºä¾‹</a></li>
</ul>
<p><strong>æç¤º</strong>: æœ¬æ–‡æ¡£åŸºäº medium-zoom åº“åˆ†æç”Ÿæˆï¼Œé€‚ç”¨äº Vue 3.x ç‰ˆæœ¬é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ByteBuddy å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576821574429229065</link>    <guid>https://juejin.cn/post/7576821574429229065</guid>    <pubDate>2025-11-26T02:54:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821574429229065" data-draft-id="7576537005134037019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ByteBuddy å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T02:54:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ByteBuddy å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:54:00.000Z" title="Wed Nov 26 2025 02:54:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ByteBuddy å®æˆ˜æŒ‡å—ï¼šJavaå­—èŠ‚ç å¢å¼ºåˆ©å™¨</h2>
<h3 data-id="heading-1">ä¸€ã€ByteBuddyç®€ä»‹</h3>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯ByteBuddy</h4>
<p>ByteBuddyæ˜¯ä¸€ä¸ªå¼ºå¤§çš„Javaå­—èŠ‚ç æ“ä½œåº“ï¼Œå®ƒèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆå’Œä¿®æ”¹Javaç±»ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„ASMã€Javassistç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒByteBuddyæä¾›äº†æ›´åŠ ç®€æ´ã€ç±»å‹å®‰å…¨çš„APIï¼Œä½¿å¾—å­—èŠ‚ç æ“ä½œå˜å¾—ä¼˜é›…è€Œé«˜æ•ˆã€‚</p>
<p><strong>ByteBuddyçš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ğŸ¯ <strong>ç±»å‹å®‰å…¨</strong>ï¼šåŸºäºæµå¼APIï¼Œç¼–è¯‘æœŸæ£€æŸ¥</li>
<li>ğŸš€ <strong>æ€§èƒ½ä¼˜è¶Š</strong>ï¼šç”Ÿæˆçš„ä»£ç æ€§èƒ½æ¥è¿‘æ‰‹å†™</li>
<li>ğŸ’¡ <strong>ç®€å•æ˜“ç”¨</strong>ï¼šæ— éœ€æ·±å…¥ç†è§£å­—èŠ‚ç æŒ‡ä»¤</li>
<li>ğŸ”§ <strong>åŠŸèƒ½å¼ºå¤§</strong>ï¼šæ”¯æŒç±»ç”Ÿæˆã€æ–¹æ³•æ‹¦æˆªã€ä»£ç†ç­‰</li>
<li>ğŸŒŸ <strong>å¹¿æ³›åº”ç”¨</strong>ï¼šHibernateã€Mockitoã€Springç­‰æ¡†æ¶éƒ½åœ¨ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-3">1.2 åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs">ByteBuddyå…¸å‹åº”ç”¨åœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åº”ç”¨åœºæ™¯                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ AOPåˆ‡é¢ç¼–ç¨‹     - æ–¹æ³•æ‹¦æˆªã€æ—¥å¿—ã€æƒé™æ§åˆ¶        â”‚
â”‚  â€¢ æ€§èƒ½ç›‘æ§        - æ–¹æ³•è€—æ—¶ç»Ÿè®¡ã€è°ƒç”¨é“¾è¿½è¸ª        â”‚
â”‚  â€¢ Mockæµ‹è¯•        - åŠ¨æ€ç”Ÿæˆæµ‹è¯•æ¡©                  â”‚
â”‚  â€¢ ORMæ¡†æ¶         - å®ä½“ä»£ç†ã€æ‡’åŠ è½½                â”‚
â”‚  â€¢ åŠ¨æ€ä»£ç†        - æ¥å£å®ç°ã€å§”æ‰˜æ¨¡å¼              â”‚
â”‚  â€¢ Agentå¼€å‘       - Java Agentã€APMç›‘æ§             â”‚
â”‚  â€¢ çƒ­éƒ¨ç½²          - è¿è¡Œæ—¶ç±»æ›¿æ¢                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4">1.3 Mavenä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ByteBuddyæ ¸å¿ƒåº“ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.bytebuddy<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>byte-buddy<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.14.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ByteBuddy Agentæ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.bytebuddy<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>byte-buddy-agent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.14.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç”¨äºæµ‹è¯• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.13.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">äºŒã€ElementMatcheræ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-6">2.1 ä»€ä¹ˆæ˜¯ElementMatcher</h4>
<p>ElementMatcheræ˜¯ByteBuddyä¸­ç”¨äº<strong>åŒ¹é…å’Œè¿‡æ»¤ç±»ã€æ–¹æ³•ã€å­—æ®µã€æ³¨è§£ç­‰å…ƒç´ </strong>çš„æ ¸å¿ƒæ¥å£ã€‚å®ƒç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†ä¸“é—¨ç”¨äºJavaç¨‹åºå…ƒç´ çš„åŒ¹é…ã€‚</p>
<p><strong>ElementMatcherçš„ä½œç”¨ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      ElementMatcher      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¾…å¤„ç†çš„ç±»   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  åŒ¹é…çš„å…ƒç´   â”‚
â”‚              â”‚                          â”‚              â”‚
â”‚  Class A     â”‚                          â”‚  <span class="hljs-keyword">Method</span> X âœ“  â”‚
â”‚  Class B     â”‚   åŒ¹é…è§„åˆ™ï¼š             â”‚  <span class="hljs-keyword">Method</span> Y âœ—  â”‚
â”‚  Class C     â”‚   <span class="hljs-operator">-</span> æ–¹æ³•å               â”‚  <span class="hljs-keyword">Method</span> Z âœ“  â”‚
â”‚  ...         â”‚   <span class="hljs-operator">-</span> æ³¨è§£                 â”‚  ...         â”‚
â”‚              â”‚   <span class="hljs-operator">-</span> å‚æ•°ç±»å‹             â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   <span class="hljs-operator">-</span> è¿”å›å€¼ç±»å‹           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   <span class="hljs-operator">-</span> ä¿®é¥°ç¬¦
</code></pre>
<h4 data-id="heading-7">2.2 ElementMatcherså·¥å…·ç±»</h4>
<p>ByteBuddyæä¾›äº†<code>ElementMatchers</code>å·¥å…·ç±»ï¼ŒåŒ…å«å¤§é‡é¢„å®šä¹‰çš„åŒ¹é…å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy;

<span class="hljs-keyword">import</span> net.bytebuddy.matcher.ElementMatchers;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * ElementMatcherså¸¸ç”¨æ–¹æ³•ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ElementMatcherBasics</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. ç±»åŒ¹é…å™¨</span>
        named(<span class="hljs-string">"com.example.UserService"</span>);           <span class="hljs-comment">// åŒ¹é…æŒ‡å®šç±»å</span>
        nameStartsWith(<span class="hljs-string">"com.example"</span>);              <span class="hljs-comment">// åŒ¹é…åŒ…åå‰ç¼€</span>
        nameEndsWith(<span class="hljs-string">"Service"</span>);                    <span class="hljs-comment">// åŒ¹é…ç±»ååç¼€</span>
        nameContains(<span class="hljs-string">"Controller"</span>);                 <span class="hljs-comment">// åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²</span>

        <span class="hljs-comment">// 2. æ–¹æ³•åŒ¹é…å™¨</span>
        named(<span class="hljs-string">"save"</span>);                              <span class="hljs-comment">// åŒ¹é…æ–¹æ³•å</span>
        isPublic();                                 <span class="hljs-comment">// å…¬å…±æ–¹æ³•</span>
        isStatic();                                 <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
        returns(String.class);                      <span class="hljs-comment">// è¿”å›å€¼ç±»å‹</span>
        takesArguments(<span class="hljs-number">2</span>);                          <span class="hljs-comment">// å‚æ•°æ•°é‡</span>
        takesArgument(<span class="hljs-number">0</span>, String.class);            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹</span>

        <span class="hljs-comment">// 3. æ³¨è§£åŒ¹é…å™¨</span>
        isAnnotatedWith(Override.class);           <span class="hljs-comment">// æœ‰@Overrideæ³¨è§£</span>
        isAnnotatedWith(named(<span class="hljs-string">"MyAnnotation"</span>));    <span class="hljs-comment">// æœ‰æŒ‡å®šæ³¨è§£</span>

        <span class="hljs-comment">// 4. ç»§æ‰¿å…³ç³»åŒ¹é…å™¨</span>
        isSubTypeOf(List.class);                   <span class="hljs-comment">// æ˜¯Listçš„å­ç±»</span>
        hasSuperType(named(<span class="hljs-string">"BaseService"</span>));        <span class="hljs-comment">// æœ‰æŒ‡å®šçˆ¶ç±»</span>

        <span class="hljs-comment">// 5. é€»è¾‘ç»„åˆ</span>
        named(<span class="hljs-string">"save"</span>).and(isPublic());             <span class="hljs-comment">// ä¸è¿ç®—</span>
        named(<span class="hljs-string">"get"</span>).or(named(<span class="hljs-string">"set"</span>));             <span class="hljs-comment">// æˆ–è¿ç®—</span>
        not(isStatic());                           <span class="hljs-comment">// éè¿ç®—</span>
        any();                                     <span class="hljs-comment">// åŒ¹é…ä»»ä½•å…ƒç´ </span>
        none();                                    <span class="hljs-comment">// ä¸åŒ¹é…ä»»ä½•å…ƒç´ </span>
    }
}
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€åŸºç¡€å®æˆ˜ï¼šåŠ¨æ€åˆ›å»ºç±»</h3>
<h4 data-id="heading-9">3.1 åˆ›å»ºç®€å•ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.basic;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.description.modifier.Visibility;
<span class="hljs-keyword">import</span> net.bytebuddy.dynamic.DynamicType;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.FixedValue;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * åŠ¨æ€åˆ›å»ºç±»ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateClassDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªObjectçš„å­ç±»</span>
        Class&lt;?&gt; dynamicType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(Object.class)
                .name(<span class="hljs-string">"com.example.DynamicClass"</span>)
                .make()
                .load(CreateClassDemo.class.getClassLoader())
                .getLoaded();

        System.out.println(<span class="hljs-string">"åˆ›å»ºçš„ç±»: "</span> + dynamicType.getName());
        System.out.println(<span class="hljs-string">"å®ä¾‹: "</span> + dynamicType.newInstance());

        System.out.println(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>) + <span class="hljs-string">"\n"</span>);

        <span class="hljs-comment">// 2. åˆ›å»ºå¸¦æ–¹æ³•çš„ç±»</span>
        Class&lt;?&gt; helloWorld = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(Object.class)
                .name(<span class="hljs-string">"com.example.HelloWorld"</span>)
                .method(named(<span class="hljs-string">"toString"</span>))  <span class="hljs-comment">// åŒ¹é…toStringæ–¹æ³•</span>
                .intercept(FixedValue.value(<span class="hljs-string">"Hello ByteBuddy!"</span>))  <span class="hljs-comment">// è¿”å›å›ºå®šå€¼</span>
                .make()
                .load(CreateClassDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> helloWorld.newInstance();
        System.out.println(<span class="hljs-string">"toStringç»“æœ: "</span> + instance.toString());

        System.out.println(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>) + <span class="hljs-string">"\n"</span>);

        <span class="hljs-comment">// 3. å®šä¹‰è‡ªå®šä¹‰æ–¹æ³•</span>
        Class&lt;?&gt; calculator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(Object.class)
                .name(<span class="hljs-string">"com.example.Calculator"</span>)
                .defineMethod(<span class="hljs-string">"add"</span>, <span class="hljs-type">int</span>.class, Visibility.PUBLIC)
                .withParameters(<span class="hljs-type">int</span>.class, <span class="hljs-type">int</span>.class)
                .intercept(FixedValue.value(<span class="hljs-number">42</span>))  <span class="hljs-comment">// æš‚æ—¶è¿”å›å›ºå®šå€¼</span>
                .make()
                .load(CreateClassDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">Object</span> <span class="hljs-variable">calc</span> <span class="hljs-operator">=</span> calculator.newInstance();
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) calculator.getMethod(<span class="hljs-string">"add"</span>, <span class="hljs-type">int</span>.class, <span class="hljs-type">int</span>.class)
                .invoke(calc, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>);
        System.out.println(<span class="hljs-string">"add(10, 20) = "</span> + result);
    }
}
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆ›å»ºçš„ç±»: com.example.DynamicClass</span>
<span class="hljs-section">å®ä¾‹: com.example.DynamicClass@7f31245a</span>

============================================================

<span class="hljs-section">toStringç»“æœ: Hello ByteBuddy!</span>

============================================================

add(10, 20) = 42
</code></pre>
<h4 data-id="heading-10">3.2 æ–¹æ³•å§”æ‰˜ï¼ˆDelegationï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.basic;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * æ–¹æ³•å§”æ‰˜ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDelegationDemo</span> {

    <span class="hljs-comment">/**
     * æ‹¦æˆªå™¨ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogInterceptor</span> {

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@Origin</span> String methodName,
                                       <span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@AllArguments</span> Object[] args)</span> <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"[Before] è°ƒç”¨æ–¹æ³•: "</span> + methodName);
            System.out.println(<span class="hljs-string">"[Before] å‚æ•°: "</span> + java.util.Arrays.toString(args));

            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> zuper.call();  <span class="hljs-comment">// è°ƒç”¨åŸæ–¹æ³•</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

            System.out.println(<span class="hljs-string">"[After] è¿”å›å€¼: "</span> + result);
            System.out.println(<span class="hljs-string">"[After] è€—æ—¶: "</span> + (end - start) + <span class="hljs-string">"ms"</span>);

            <span class="hljs-keyword">return</span> result;
        }
    }

    <span class="hljs-comment">/**
     * å¾…å¢å¼ºçš„åŸå§‹ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">findUser</span><span class="hljs-params">(Long id)</span> {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">100</span>);  <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                e.printStackTrace();
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"User-"</span> + id;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
            System.out.println(<span class="hljs-string">"    [åŸæ–¹æ³•] ä¿å­˜ç”¨æˆ·: "</span> + name + <span class="hljs-string">", å¹´é¾„: "</span> + age);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨ByteBuddyå¢å¼ºUserService</span>
        Class&lt;?&gt; dynamicType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(UserService.class)
                .method(any())  <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰æ–¹æ³•</span>
                .intercept(MethodDelegation.to(LogInterceptor.class))
                .make()
                .load(MethodDelegationDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> (UserService) dynamicType.newInstance();

        <span class="hljs-comment">// è°ƒç”¨æ–¹æ³•</span>
        System.out.println(<span class="hljs-string">"====== æµ‹è¯• findUser ======"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findUser(<span class="hljs-number">123L</span>);
        System.out.println(<span class="hljs-string">"æœ€ç»ˆç»“æœ: "</span> + user);

        System.out.println(<span class="hljs-string">"\n====== æµ‹è¯• saveUser ======"</span>);
        userService.saveUser(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>);
    }
}
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">====== æµ‹è¯• <span class="hljs-attr">findUser</span> ======
<span class="hljs-section">[Before]</span> è°ƒç”¨æ–¹æ³•: findUser
<span class="hljs-section">[Before]</span> å‚æ•°: <span class="hljs-section">[123]</span>
<span class="hljs-section">[After]</span> è¿”å›å€¼: User-123
<span class="hljs-section">[After]</span> è€—æ—¶: 102ms
æœ€ç»ˆç»“æœ: <span class="hljs-attr">User-123</span>

====== æµ‹è¯• <span class="hljs-attr">saveUser</span> ======
<span class="hljs-section">[Before]</span> è°ƒç”¨æ–¹æ³•: saveUser
<span class="hljs-section">[Before]</span> å‚æ•°: <span class="hljs-section">[å¼ ä¸‰, 25]</span>
    <span class="hljs-section">[åŸæ–¹æ³•]</span> ä¿å­˜ç”¨æˆ·: å¼ ä¸‰, å¹´é¾„: 25
<span class="hljs-section">[After]</span> è¿”å›å€¼: null
<span class="hljs-section">[After]</span> è€—æ—¶: 1ms
</code></pre>
<h3 data-id="heading-11">å››ã€ElementMatcheré«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-12">4.1 æ–¹æ³•åŒ¹é…å™¨ç»„åˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.matcher;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.matcher.ElementMatcher;

<span class="hljs-keyword">import</span> java.lang.reflect.Method;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * å¤æ‚çš„ElementMatcherç»„åˆç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedMatcherDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogInterceptor</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">intercept</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Intercepted!"</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoService</span> {
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">publicMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"public"</span>; }
        <span class="hljs-keyword">private</span> String <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"private"</span>; }
        <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">protectedMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"protected"</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"static"</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String <span class="hljs-title function_">finalMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"final"</span>; }

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"name"</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { }

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"User-"</span> + id; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">findByName</span><span class="hljs-params">(String name)</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"User-"</span> + name; }

        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> { <span class="hljs-keyword">return</span> a + b; }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {

        <span class="hljs-comment">// 1. åŒ¹é…publicéstaticæ–¹æ³•</span>
        ElementMatcher.Junction&lt;Method&gt; matcher1 =
                isPublic().and(not(isStatic()));

        System.out.println(<span class="hljs-string">"====== åŒ¹é…: publicéstaticæ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher1);

        <span class="hljs-comment">// 2. åŒ¹é…getteræ–¹æ³•ï¼ˆåå­—ä»¥getå¼€å¤´ä¸”æ— å‚æ•°ï¼‰</span>
        ElementMatcher.Junction&lt;Method&gt; matcher2 =
                nameStartsWith(<span class="hljs-string">"get"</span>).and(takesArguments(<span class="hljs-number">0</span>));

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: getteræ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher2);

        <span class="hljs-comment">// 3. åŒ¹é…setteræ–¹æ³•ï¼ˆåå­—ä»¥setå¼€å¤´ä¸”æœ‰1ä¸ªå‚æ•°ï¼‰</span>
        ElementMatcher.Junction&lt;Method&gt; matcher3 =
                nameStartsWith(<span class="hljs-string">"set"</span>).and(takesArguments(<span class="hljs-number">1</span>));

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: setteræ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher3);

        <span class="hljs-comment">// 4. åŒ¹é…æ‰€æœ‰findå¼€å¤´çš„æ–¹æ³•</span>
        ElementMatcher.Junction&lt;Method&gt; matcher4 =
                nameStartsWith(<span class="hljs-string">"find"</span>);

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: find*æ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher4);

        <span class="hljs-comment">// 5. åŒ¹é…è¿”å›Stringç±»å‹çš„æ–¹æ³•</span>
        ElementMatcher.Junction&lt;Method&gt; matcher5 =
                returns(String.class);

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: è¿”å›Stringçš„æ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher5);

        <span class="hljs-comment">// 6. åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºLongçš„æ–¹æ³•</span>
        ElementMatcher.Junction&lt;Method&gt; matcher6 =
                takesArgument(<span class="hljs-number">0</span>, Long.class);

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºLongçš„æ–¹æ³• ======"</span>);
        printMatches(DemoService.class, matcher6);

        <span class="hljs-comment">// 7. å¤æ‚ç»„åˆï¼špublic + éstatic + è¿”å›String + å‚æ•°ä¸º1ä¸ª</span>
        ElementMatcher.Junction&lt;Method&gt; matcher7 =
                isPublic()
                        .and(not(isStatic()))
                        .and(returns(String.class))
                        .and(takesArguments(<span class="hljs-number">1</span>));

        System.out.println(<span class="hljs-string">"\n====== åŒ¹é…: å¤æ‚ç»„åˆæ¡ä»¶ ======"</span>);
        printMatches(DemoService.class, matcher7);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printMatches</span><span class="hljs-params">(Class&lt;?&gt; clazz, ElementMatcher&lt;? <span class="hljs-built_in">super</span> Method&gt; matcher)</span> {
        <span class="hljs-keyword">for</span> (Method method : clazz.getDeclaredMethods()) {
            <span class="hljs-keyword">if</span> (matcher.matches(method)) {
                System.out.println(<span class="hljs-string">"  âœ“ "</span> + method.getName() + <span class="hljs-string">" - "</span> + method);
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-13">4.2 æ³¨è§£åŒ¹é…å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.matcher;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.RuntimeType;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.SuperCall;

<span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * åŸºäºæ³¨è§£çš„æ–¹æ³•åŒ¹é…
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationMatcherDemo</span> {

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æ—¥å¿—æ³¨è§£
     */</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Logged {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    }

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£
     */</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Cacheable {
        <span class="hljs-type">int</span> <span class="hljs-title function_">ttl</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">60</span>;  <span class="hljs-comment">// ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰</span>
    }

    <span class="hljs-comment">/**
     * æ—¥å¿—æ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingInterceptor</span> {
        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper)</span> <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"[LOG] æ–¹æ³•æ‰§è¡Œå¼€å§‹"</span>);
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> zuper.call();
            System.out.println(<span class="hljs-string">"[LOG] æ–¹æ³•æ‰§è¡Œç»“æŸ"</span>);
            <span class="hljs-keyword">return</span> result;
        }
    }

    <span class="hljs-comment">/**
     * ç¼“å­˜æ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheInterceptor</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> java.util.Map&lt;String, Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.HashMap&lt;&gt;();

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@net</span>.bytebuddy.implementation.bind.annotation.Origin
                                       String methodName)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-keyword">if</span> (cache.containsKey(methodName)) {
                System.out.println(<span class="hljs-string">"[CACHE] å‘½ä¸­ç¼“å­˜: "</span> + methodName);
                <span class="hljs-keyword">return</span> cache.get(methodName);
            }

            System.out.println(<span class="hljs-string">"[CACHE] æœªå‘½ä¸­ï¼Œæ‰§è¡Œæ–¹æ³•: "</span> + methodName);
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> zuper.call();
            cache.put(methodName, result);
            <span class="hljs-keyword">return</span> result;
        }
    }

    <span class="hljs-comment">/**
     * ä¸šåŠ¡æœåŠ¡ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

        <span class="hljs-meta">@Logged</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProductName</span><span class="hljs-params">(Long id)</span> {
            System.out.println(<span class="hljs-string">"  [æ‰§è¡Œ] æŸ¥è¯¢äº§å“åç§°: "</span> + id);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Product-"</span> + id;
        }

        <span class="hljs-meta">@Cacheable(ttl = 300)</span>
        <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">getProductPrice</span><span class="hljs-params">(Long id)</span> {
            System.out.println(<span class="hljs-string">"  [æ‰§è¡Œ] æŸ¥è¯¢äº§å“ä»·æ ¼: "</span> + id);
            <span class="hljs-keyword">return</span> <span class="hljs-number">99.99</span>;
        }

        <span class="hljs-meta">@Logged</span>
        <span class="hljs-meta">@Cacheable</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProductDetail</span><span class="hljs-params">(Long id)</span> {
            System.out.println(<span class="hljs-string">"  [æ‰§è¡Œ] æŸ¥è¯¢äº§å“è¯¦æƒ…: "</span> + id);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Detail-"</span> + id;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Long id, String name)</span> {
            System.out.println(<span class="hljs-string">"  [æ‰§è¡Œ] æ›´æ–°äº§å“: "</span> + id + <span class="hljs-string">" -&gt; "</span> + name);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {

        <span class="hljs-comment">// 1. æ‹¦æˆªæ‰€æœ‰å¸¦@Loggedæ³¨è§£çš„æ–¹æ³•</span>
        Class&lt;?&gt; loggedType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(ProductService.class)
                .method(isAnnotatedWith(Logged.class))
                .intercept(MethodDelegation.to(LoggingInterceptor.class))
                .make()
                .load(AnnotationMatcherDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">ProductService</span> <span class="hljs-variable">loggedService</span> <span class="hljs-operator">=</span> (ProductService) loggedType.newInstance();

        System.out.println(<span class="hljs-string">"====== æµ‹è¯•@Loggedæ³¨è§£æ‹¦æˆª ======"</span>);
        loggedService.getProductName(<span class="hljs-number">100L</span>);
        System.out.println();
        loggedService.updateProduct(<span class="hljs-number">100L</span>, <span class="hljs-string">"New Name"</span>);  <span class="hljs-comment">// æ²¡æœ‰@Loggedï¼Œä¸æ‹¦æˆª</span>

        System.out.println(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>) + <span class="hljs-string">"\n"</span>);

        <span class="hljs-comment">// 2. æ‹¦æˆªæ‰€æœ‰å¸¦@Cacheableæ³¨è§£çš„æ–¹æ³•</span>
        Class&lt;?&gt; cachedType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(ProductService.class)
                .method(isAnnotatedWith(Cacheable.class))
                .intercept(MethodDelegation.to(CacheInterceptor.class))
                .make()
                .load(AnnotationMatcherDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">ProductService</span> <span class="hljs-variable">cachedService</span> <span class="hljs-operator">=</span> (ProductService) cachedType.newInstance();

        System.out.println(<span class="hljs-string">"====== æµ‹è¯•@Cacheableæ³¨è§£æ‹¦æˆª ======"</span>);
        cachedService.getProductPrice(<span class="hljs-number">200L</span>);  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
        System.out.println();
        cachedService.getProductPrice(<span class="hljs-number">200L</span>);  <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œå‘½ä¸­ç¼“å­˜</span>

        System.out.println(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>) + <span class="hljs-string">"\n"</span>);

        <span class="hljs-comment">// 3. åŒæ—¶æ‹¦æˆªå¤šä¸ªæ³¨è§£ï¼ˆé“¾å¼æ‹¦æˆªï¼‰</span>
        Class&lt;?&gt; multiType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(ProductService.class)
                .method(isAnnotatedWith(Logged.class))
                .intercept(MethodDelegation.to(LoggingInterceptor.class))
                .method(isAnnotatedWith(Cacheable.class))
                .intercept(MethodDelegation.to(CacheInterceptor.class))
                .make()
                .load(AnnotationMatcherDemo.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">ProductService</span> <span class="hljs-variable">multiService</span> <span class="hljs-operator">=</span> (ProductService) multiType.newInstance();

        System.out.println(<span class="hljs-string">"====== æµ‹è¯•å¤šæ³¨è§£æ‹¦æˆª ======"</span>);
        multiService.getProductDetail(<span class="hljs-number">300L</span>);  <span class="hljs-comment">// æœ‰@Loggedå’Œ@Cacheable</span>
        System.out.println();
        multiService.getProductDetail(<span class="hljs-number">300L</span>);  <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨</span>
    }
}
</code></pre>
<h3 data-id="heading-14">äº”ã€ç”Ÿäº§çº§å®æˆ˜ï¼šæ€§èƒ½ç›‘æ§ç³»ç»Ÿ</h3>
<h4 data-id="heading-15">5.1 æ–¹æ³•æ‰§è¡Œæ—¶é—´ç›‘æ§</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.production;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.agent.ByteBuddyAgent;
<span class="hljs-keyword">import</span> net.bytebuddy.dynamic.loading.ClassReloadingStrategy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.util.concurrent.Callable;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicLong;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * ç”Ÿäº§çº§æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitor</span> {

    <span class="hljs-comment">/**
     * ç›‘æ§æ³¨è§£
     */</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target({ElementType.METHOD, ElementType.TYPE})</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Monitor {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">long</span> <span class="hljs-title function_">threshold</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1000</span>;  <span class="hljs-comment">// æ…¢æ–¹æ³•é˜ˆå€¼ï¼ˆæ¯«ç§’ï¼‰</span>
    }

    <span class="hljs-comment">/**
     * æ€§èƒ½æŒ‡æ ‡æ”¶é›†å™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsCollector</span> {

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodMetrics</span> {
            <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">totalCalls</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
            <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">totalTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
            <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">maxTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
            <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">minTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(Long.MAX_VALUE);
            <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">errorCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, MethodMetrics&gt; metricsMap =
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordMetric</span><span class="hljs-params">(String methodName, <span class="hljs-type">long</span> duration, <span class="hljs-type">boolean</span> hasError)</span> {
            <span class="hljs-type">MethodMetrics</span> <span class="hljs-variable">metrics</span> <span class="hljs-operator">=</span> metricsMap.computeIfAbsent(methodName, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodMetrics</span>());

            metrics.totalCalls.incrementAndGet();
            metrics.totalTime.addAndGet(duration);

            <span class="hljs-comment">// æ›´æ–°æœ€å¤§å€¼</span>
            metrics.maxTime.updateAndGet(current -&gt; Math.max(current, duration));

            <span class="hljs-comment">// æ›´æ–°æœ€å°å€¼</span>
            metrics.minTime.updateAndGet(current -&gt; Math.min(current, duration));

            <span class="hljs-keyword">if</span> (hasError) {
                metrics.errorCount.incrementAndGet();
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printReport</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
            System.out.println(<span class="hljs-string">"æ€§èƒ½ç›‘æ§æŠ¥å‘Š"</span>);
            System.out.println(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
            System.out.printf(<span class="hljs-string">"%-40s %10s %10s %10s %10s %10s%n"</span>,
                    <span class="hljs-string">"æ–¹æ³•å"</span>, <span class="hljs-string">"è°ƒç”¨æ¬¡æ•°"</span>, <span class="hljs-string">"å¹³å‡è€—æ—¶"</span>, <span class="hljs-string">"æœ€å¤§è€—æ—¶"</span>, <span class="hljs-string">"æœ€å°è€—æ—¶"</span>, <span class="hljs-string">"é”™è¯¯æ¬¡æ•°"</span>);
            System.out.println(<span class="hljs-string">"-"</span>.repeat(<span class="hljs-number">80</span>));

            metricsMap.forEach((methodName, metrics) -&gt; {
                <span class="hljs-type">long</span> <span class="hljs-variable">avgTime</span> <span class="hljs-operator">=</span> metrics.totalCalls.get() &gt; <span class="hljs-number">0</span> ?
                        metrics.totalTime.get() / metrics.totalCalls.get() : <span class="hljs-number">0</span>;

                System.out.printf(<span class="hljs-string">"%-40s %10d %9dms %9dms %9dms %10d%n"</span>,
                        methodName,
                        metrics.totalCalls.get(),
                        avgTime,
                        metrics.maxTime.get(),
                        metrics.minTime.get() == Long.MAX_VALUE ? <span class="hljs-number">0</span> : metrics.minTime.get(),
                        metrics.errorCount.get());
            });

            System.out.println(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
        }
    }

    <span class="hljs-comment">/**
     * æ€§èƒ½ç›‘æ§æ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MonitorInterceptor</span> {

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@Origin</span> String methodName,
                                       <span class="hljs-meta">@Origin</span> Class&lt;?&gt; clazz,
                                       <span class="hljs-meta">@AllArguments</span> Object[] args)</span> <span class="hljs-keyword">throws</span> Exception {

            <span class="hljs-type">String</span> <span class="hljs-variable">fullMethodName</span> <span class="hljs-operator">=</span> clazz.getSimpleName() + <span class="hljs-string">"."</span> + methodName;
            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasError</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">try</span> {
                result = zuper.call();
                <span class="hljs-keyword">return</span> result;
            } <span class="hljs-keyword">catch</span> (Exception e) {
                hasError = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">throw</span> e;
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;

                <span class="hljs-comment">// è®°å½•æŒ‡æ ‡</span>
                MetricsCollector.recordMetric(fullMethodName, duration, hasError);

                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¶…è¿‡é˜ˆå€¼</span>
                <span class="hljs-type">Monitor</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> clazz.getAnnotation(Monitor.class);
                <span class="hljs-keyword">if</span> (annotation != <span class="hljs-literal">null</span> &amp;&amp; duration &gt; annotation.threshold()) {
                    System.err.printf(<span class="hljs-string">"[SLOW] %s è€—æ—¶ %dms (é˜ˆå€¼: %dms)%n"</span>,
                            fullMethodName, duration, annotation.threshold());
                }
            }
        }
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿä¸šåŠ¡æœåŠ¡
     */</span>
    <span class="hljs-meta">@Monitor(threshold = 100)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Long userId, Long productId)</span> {
            sleep(<span class="hljs-number">50</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ORDER-"</span> + System.currentTimeMillis();
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processPayment</span><span class="hljs-params">(String orderId, <span class="hljs-type">double</span> amount)</span> {
            sleep(<span class="hljs-number">80</span>);
            System.out.println(<span class="hljs-string">"  [ä¸šåŠ¡] å¤„ç†æ”¯ä»˜: "</span> + orderId + <span class="hljs-string">" - "</span> + amount);
        }

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">queryOrder</span><span class="hljs-params">(String orderId)</span> {
            sleep(<span class="hljs-number">150</span>);  <span class="hljs-comment">// è¶…è¿‡é˜ˆå€¼</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Order Detail: "</span> + orderId;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(String orderId)</span> {
            sleep(<span class="hljs-number">30</span>);
            <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.7</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å–æ¶ˆè®¢å•å¤±è´¥"</span>);
            }
            System.out.println(<span class="hljs-string">"  [ä¸šåŠ¡] è®¢å•å·²å–æ¶ˆ: "</span> + orderId);
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sleep</span><span class="hljs-params">(<span class="hljs-type">long</span> millis)</span> {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(millis);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {

        <span class="hljs-comment">// å®‰è£…ByteBuddy Agent</span>
        ByteBuddyAgent.install();

        <span class="hljs-comment">// åˆ›å»ºå¢å¼ºç±»</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .redefine(OrderService.class)
                .method(isAnnotatedWith(Monitor.class)
                        .or(declaringType(isAnnotatedWith(Monitor.class))))
                .intercept(MethodDelegation.to(MonitorInterceptor.class))
                .make()
                .load(OrderService.class.getClassLoader(),
                        ClassReloadingStrategy.fromInstalledAgent());

        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡è°ƒç”¨</span>
        <span class="hljs-type">OrderService</span> <span class="hljs-variable">orderService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderService</span>();

        System.out.println(<span class="hljs-string">"====== å¼€å§‹æ€§èƒ½æµ‹è¯• ======\n"</span>);

        <span class="hljs-comment">// æµ‹è¯•1: åˆ›å»ºè®¢å•ï¼ˆ10æ¬¡ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            orderService.createOrder(<span class="hljs-number">100L</span> + i, <span class="hljs-number">200L</span> + i);
        }

        <span class="hljs-comment">// æµ‹è¯•2: å¤„ç†æ”¯ä»˜ï¼ˆ5æ¬¡ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
            orderService.processPayment(<span class="hljs-string">"ORDER-"</span> + i, <span class="hljs-number">99.99</span>);
        }

        <span class="hljs-comment">// æµ‹è¯•3: æŸ¥è¯¢è®¢å•ï¼ˆ8æ¬¡ï¼Œè¶…è¿‡é˜ˆå€¼ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++) {
            orderService.queryOrder(<span class="hljs-string">"ORDER-"</span> + i);
        }

        <span class="hljs-comment">// æµ‹è¯•4: å–æ¶ˆè®¢å•ï¼ˆ10æ¬¡ï¼Œå¯èƒ½æœ‰é”™è¯¯ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-keyword">try</span> {
                orderService.cancelOrder(<span class="hljs-string">"ORDER-"</span> + i);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-comment">// å¿½ç•¥å¼‚å¸¸</span>
            }
        }

        <span class="hljs-comment">// æ‰“å°ç›‘æ§æŠ¥å‘Š</span>
        MetricsCollector.printReport();
    }
}
</code></pre>
<h4 data-id="heading-16">5.2 æ•°æ®åº“è®¿é—®ç›‘æ§ï¼ˆæ¨¡æ‹ŸMyBatisï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.production;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * æ•°æ®åº“è®¿é—®ç›‘æ§ï¼ˆæ¨¡æ‹ŸMyBatis Mapperï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseMonitor</span> {

    <span class="hljs-comment">/**
     * SQLæŸ¥è¯¢æ³¨è§£ï¼ˆæ¨¡æ‹ŸMyBatisçš„<span class="hljs-doctag">@Select</span>ï¼‰
     */</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Select {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
    }

    <span class="hljs-comment">/**
     * SQLæ›´æ–°æ³¨è§£ï¼ˆæ¨¡æ‹ŸMyBatisçš„<span class="hljs-doctag">@Update</span>ï¼‰
     */</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Update {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
    }

    <span class="hljs-comment">/**
     * SQLæ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlInterceptor</span> {

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Integer&gt; queryDepth = ThreadLocal.withInitial(() -&gt; <span class="hljs-number">0</span>);

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@Origin</span> String methodName,
                                       <span class="hljs-meta">@AllArguments</span> Object[] args,
                                       <span class="hljs-meta">@Origin</span> java.lang.reflect.Method method)</span> <span class="hljs-keyword">throws</span> Exception {

            <span class="hljs-comment">// è·å–SQLè¯­å¥</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-type">Select</span> <span class="hljs-variable">select</span> <span class="hljs-operator">=</span> method.getAnnotation(Select.class);
            <span class="hljs-type">Update</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> method.getAnnotation(Update.class);

            <span class="hljs-keyword">if</span> (select != <span class="hljs-literal">null</span>) {
                sql = select.value();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (update != <span class="hljs-literal">null</span>) {
                sql = update.value();
            }

            <span class="hljs-keyword">if</span> (sql == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> zuper.call();
            }

            <span class="hljs-comment">// å¢åŠ è°ƒç”¨æ·±åº¦</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">depth</span> <span class="hljs-operator">=</span> queryDepth.get();
            queryDepth.set(depth + <span class="hljs-number">1</span>);

            <span class="hljs-type">String</span> <span class="hljs-variable">indent</span> <span class="hljs-operator">=</span> <span class="hljs-string">"  "</span>.repeat(depth);
            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

            System.out.println(indent + <span class="hljs-string">"[SQL] æ‰§è¡ŒSQL: "</span> + sql);
            System.out.println(indent + <span class="hljs-string">"[SQL] å‚æ•°: "</span> + java.util.Arrays.toString(args));

            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> zuper.call();
                <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;

                System.out.println(indent + <span class="hljs-string">"[SQL] è€—æ—¶: "</span> + duration + <span class="hljs-string">"ms"</span>);

                <span class="hljs-comment">// æ£€æµ‹æ…¢SQL</span>
                <span class="hljs-keyword">if</span> (duration &gt; <span class="hljs-number">100</span>) {
                    System.err.println(indent + <span class="hljs-string">"[WARN] æ…¢SQLæ£€æµ‹: "</span> + sql +
                            <span class="hljs-string">" (è€—æ—¶: "</span> + duration + <span class="hljs-string">"ms)"</span>);
                }

                <span class="hljs-keyword">return</span> result;

            } <span class="hljs-keyword">finally</span> {
                queryDepth.set(depth);
            }
        }
    }

    <span class="hljs-comment">/**
     * Mapperæ¥å£
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {
        <span class="hljs-meta">@Select("SELECT * FROM users WHERE id = ?")</span>
        User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span>;

        <span class="hljs-meta">@Select("SELECT * FROM users WHERE name = ?")</span>
        User <span class="hljs-title function_">findByName</span><span class="hljs-params">(String name)</span>;

        <span class="hljs-meta">@Update("UPDATE users SET name = ? WHERE id = ?")</span>
        <span class="hljs-type">int</span> <span class="hljs-title function_">updateName</span><span class="hljs-params">(String name, Long id)</span>;

        <span class="hljs-meta">@Update("DELETE FROM users WHERE id = ?")</span>
        <span class="hljs-type">int</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(Long id)</span>;
    }

    <span class="hljs-comment">/**
     * å®ä½“ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Long id, String name, <span class="hljs-type">int</span> age)</span> {
            <span class="hljs-built_in">this</span>.id = id;
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.age = age;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"User{id="</span> + id + <span class="hljs-string">", name='"</span> + name + <span class="hljs-string">"', age="</span> + age + <span class="hljs-string">"}"</span>;
        }
    }

    <span class="hljs-comment">/**
     * Mapperå®ç°ç±»ï¼ˆæ¨¡æ‹Ÿï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserMapper</span> {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
            simulateDbQuery(<span class="hljs-number">80</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(id, <span class="hljs-string">"User-"</span> + id, <span class="hljs-number">25</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findByName</span><span class="hljs-params">(String name)</span> {
            simulateDbQuery(<span class="hljs-number">120</span>);  <span class="hljs-comment">// æ…¢æŸ¥è¯¢</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1L</span>, name, <span class="hljs-number">30</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateName</span><span class="hljs-params">(String name, Long id)</span> {
            simulateDbQuery(<span class="hljs-number">50</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(Long id)</span> {
            simulateDbQuery(<span class="hljs-number">60</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simulateDbQuery</span><span class="hljs-params">(<span class="hljs-type">long</span> millis)</span> {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(millis);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {

        <span class="hljs-comment">// åˆ›å»ºå¢å¼ºçš„Mapper</span>
        Class&lt;?&gt; enhancedMapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(UserMapperImpl.class)
                .method(isAnnotatedWith(Select.class)
                        .or(isAnnotatedWith(Update.class)))
                .intercept(MethodDelegation.to(SqlInterceptor.class))
                .make()
                .load(DatabaseMonitor.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> (UserMapper) enhancedMapper.newInstance();

        System.out.println(<span class="hljs-string">"====== æ•°æ®åº“è®¿é—®ç›‘æ§æµ‹è¯• ======\n"</span>);

        <span class="hljs-comment">// æµ‹è¯•æŸ¥è¯¢</span>
        System.out.println(<span class="hljs-string">"1. æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·:"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> mapper.findById(<span class="hljs-number">100L</span>);
        System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + user1);

        System.out.println(<span class="hljs-string">"\n2. æ ¹æ®åç§°æŸ¥è¯¢ç”¨æˆ·ï¼ˆæ…¢æŸ¥è¯¢ï¼‰:"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> mapper.findByName(<span class="hljs-string">"å¼ ä¸‰"</span>);
        System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + user2);

        System.out.println(<span class="hljs-string">"\n3. æ›´æ–°ç”¨æˆ·å:"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">affected</span> <span class="hljs-operator">=</span> mapper.updateName(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">100L</span>);
        System.out.println(<span class="hljs-string">"å½±å“è¡Œæ•°: "</span> + affected);

        System.out.println(<span class="hljs-string">"\n4. åˆ é™¤ç”¨æˆ·:"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> mapper.deleteById(<span class="hljs-number">100L</span>);
        System.out.println(<span class="hljs-string">"åˆ é™¤è¡Œæ•°: "</span> + deleted);
    }
}
</code></pre>
<h3 data-id="heading-17">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šSpring AOPå¢å¼º</h3>
<h4 data-id="heading-18">6.1 è‡ªå®šä¹‰äº‹åŠ¡ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.spring;

<span class="hljs-keyword">import</span> net.bytebuddy.ByteBuddy;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰äº‹åŠ¡ç®¡ç†ï¼ˆæ¨¡æ‹ŸSpring <span class="hljs-doctag">@Transactional</span>ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionManager</span> {

    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Transactional {
        Propagation <span class="hljs-title function_">propagation</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Propagation.REQUIRED;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">readOnly</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Propagation</span> {
        REQUIRED, REQUIRES_NEW, SUPPORTS, MANDATORY
    }

    <span class="hljs-comment">/**
     * äº‹åŠ¡ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionContext</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Boolean&gt; inTransaction = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Boolean&gt; readOnly = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">begin</span><span class="hljs-params">(<span class="hljs-type">boolean</span> readOnly)</span> {
            inTransaction.set(<span class="hljs-literal">true</span>);
            TransactionContext.readOnly.set(readOnly);
            System.out.println(<span class="hljs-string">"  [TX] å¼€å¯äº‹åŠ¡ (readOnly="</span> + readOnly + <span class="hljs-string">")"</span>);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">commit</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(inTransaction.get())) {
                System.out.println(<span class="hljs-string">"  [TX] æäº¤äº‹åŠ¡"</span>);
                clear();
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rollback</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(inTransaction.get())) {
                System.err.println(<span class="hljs-string">"  [TX] å›æ»šäº‹åŠ¡"</span>);
                clear();
            }
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
            inTransaction.remove();
            readOnly.remove();
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInTransaction</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> Boolean.TRUE.equals(inTransaction.get());
        }
    }

    <span class="hljs-comment">/**
     * äº‹åŠ¡æ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionInterceptor</span> {

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@Origin</span> String methodName,
                                       <span class="hljs-meta">@Origin</span> java.lang.reflect.Method method)</span> <span class="hljs-keyword">throws</span> Exception {

            <span class="hljs-type">Transactional</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> method.getAnnotation(Transactional.class);
            <span class="hljs-keyword">if</span> (tx == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> zuper.call();
            }

            <span class="hljs-type">boolean</span> <span class="hljs-variable">shouldManageTx</span> <span class="hljs-operator">=</span> !TransactionContext.isInTransaction();

            <span class="hljs-keyword">if</span> (shouldManageTx) {
                TransactionContext.begin(tx.readOnly());
            }

            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> zuper.call();

                <span class="hljs-keyword">if</span> (shouldManageTx) {
                    TransactionContext.commit();
                }

                <span class="hljs-keyword">return</span> result;

            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (shouldManageTx) {
                    TransactionContext.rollback();
                }
                <span class="hljs-keyword">throw</span> e;
            }
        }
    }

    <span class="hljs-comment">/**
     * æœåŠ¡ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccountService</span> {

        <span class="hljs-meta">@Transactional</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Long fromId, Long toId, <span class="hljs-type">double</span> amount)</span> {
            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] æ‰§è¡Œè½¬è´¦: "</span> + fromId + <span class="hljs-string">" -&gt; "</span> + toId + <span class="hljs-string">" é‡‘é¢: "</span> + amount);

            deduct(fromId, amount);
            add(toId, amount);

            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] è½¬è´¦æˆåŠŸ"</span>);
        }

        <span class="hljs-meta">@Transactional</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferWithError</span><span class="hljs-params">(Long fromId, Long toId, <span class="hljs-type">double</span> amount)</span> {
            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] æ‰§è¡Œè½¬è´¦ï¼ˆä¼šå¤±è´¥ï¼‰: "</span> + fromId + <span class="hljs-string">" -&gt; "</span> + toId);

            deduct(fromId, amount);

            <span class="hljs-comment">// æ¨¡æ‹Ÿé”™è¯¯</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>);
        }

        <span class="hljs-meta">@Transactional(readOnly = true)</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getBalance</span><span class="hljs-params">(Long accountId)</span> {
            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] æŸ¥è¯¢ä½™é¢: "</span> + accountId);
            <span class="hljs-keyword">return</span> <span class="hljs-number">1000.0</span>;
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">(Long accountId, <span class="hljs-type">double</span> amount)</span> {
            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] æ‰£æ¬¾: "</span> + accountId + <span class="hljs-string">" - "</span> + amount);
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Long accountId, <span class="hljs-type">double</span> amount)</span> {
            System.out.println(<span class="hljs-string">"    [ä¸šåŠ¡] å…¥è´¦: "</span> + accountId + <span class="hljs-string">" + "</span> + amount);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {

        Class&lt;?&gt; enhancedClass = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
                .subclass(AccountService.class)
                .method(isAnnotatedWith(Transactional.class))
                .intercept(MethodDelegation.to(TransactionInterceptor.class))
                .make()
                .load(TransactionManager.class.getClassLoader())
                .getLoaded();

        <span class="hljs-type">AccountService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> (AccountService) enhancedClass.newInstance();

        System.out.println(<span class="hljs-string">"====== æµ‹è¯•1: æ­£å¸¸è½¬è´¦ ======"</span>);
        service.transfer(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">100.0</span>);

        System.out.println(<span class="hljs-string">"\n====== æµ‹è¯•2: æŸ¥è¯¢ä½™é¢ï¼ˆåªè¯»äº‹åŠ¡ï¼‰ ======"</span>);
        <span class="hljs-type">double</span> <span class="hljs-variable">balance</span> <span class="hljs-operator">=</span> service.getBalance(<span class="hljs-number">1L</span>);
        System.out.println(<span class="hljs-string">"ä½™é¢: "</span> + balance);

        System.out.println(<span class="hljs-string">"\n====== æµ‹è¯•3: è½¬è´¦å¤±è´¥ï¼ˆäº‹åŠ¡å›æ»šï¼‰ ======"</span>);
        <span class="hljs-keyword">try</span> {
            service.transferWithError(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">200.0</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"æ•è·å¼‚å¸¸: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-19">ä¸ƒã€ByteBuddy Agentå¼€å‘</h3>
<h4 data-id="heading-20">7.1 Java AgentåŸºç¡€</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.agent;

<span class="hljs-keyword">import</span> net.bytebuddy.agent.builder.AgentBuilder;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> java.lang.instrument.Instrumentation;
<span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * ByteBuddy Java Agentç¤ºä¾‹
 *
 * ç¼–è¯‘åä½¿ç”¨æ–¹å¼ï¼š
 * java -javaagent:agent.jar -jar app.jar
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceAgent</span> {

    <span class="hljs-comment">/**
     * Agentå…¥å£æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">premain</span><span class="hljs-params">(String arguments, Instrumentation instrumentation)</span> {
        System.out.println(<span class="hljs-string">"====== Performance Agent å¯åŠ¨ ======"</span>);

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentBuilder</span>.Default()
                <span class="hljs-comment">// æŒ‡å®šè¦å¢å¼ºçš„ç±»</span>
                .type(nameStartsWith(<span class="hljs-string">"com.example.app"</span>))
                <span class="hljs-comment">// é…ç½®å¢å¼ºé€»è¾‘</span>
                .transform((builder, typeDescription, classLoader, <span class="hljs-keyword">module</span>, protectionDomain) -&gt;
                        builder.method(isPublic().and(not(isStatic())))
                                .intercept(MethodDelegation.to(PerformanceInterceptor.class))
                )
                <span class="hljs-comment">// å®‰è£…åˆ°Instrumentation</span>
                .installOn(instrumentation);

        System.out.println(<span class="hljs-string">"====== Agent å®‰è£…å®Œæˆ ======"</span>);
    }

    <span class="hljs-comment">/**
     * æ€§èƒ½ç›‘æ§æ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceInterceptor</span> {

        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@Origin</span> String methodName,
                                       <span class="hljs-meta">@Origin</span> Class&lt;?&gt; clazz)</span> <span class="hljs-keyword">throws</span> Exception {

            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.nanoTime();

            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> zuper.call();
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> (System.nanoTime() - start) / <span class="hljs-number">1_000_000</span>;
                System.out.printf(<span class="hljs-string">"[Agent] %s.%s è€—æ—¶: %dms%n"</span>,
                        clazz.getSimpleName(), methodName, duration);
            }
        }
    }
}
</code></pre>
<p><strong>MANIFEST.MFé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Manifest-Version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">Premain-Class:</span> <span class="hljs-string">com.example.bytebuddy.agent.PerformanceAgent</span>
<span class="hljs-attr">Can-Redefine-Classes:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">Can-Retransform-Classes:</span> <span class="hljs-literal">true</span>
</code></pre>
<h4 data-id="heading-21">7.2 åŠ¨æ€Attach Agent</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.bytebuddy.agent;

<span class="hljs-keyword">import</span> net.bytebuddy.agent.ByteBuddyAgent;
<span class="hljs-keyword">import</span> net.bytebuddy.agent.builder.AgentBuilder;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.MethodDelegation;
<span class="hljs-keyword">import</span> net.bytebuddy.implementation.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> net.bytebuddy.matcher.ElementMatchers.*;

<span class="hljs-comment">/**
 * åŠ¨æ€Attach Agentï¼ˆæ— éœ€é‡å¯JVMï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicAttachAgent</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuntimeInterceptor</span> {
        <span class="hljs-meta">@RuntimeType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper,
                                       <span class="hljs-meta">@Origin</span> String methodName)</span> <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"[åŠ¨æ€Agent] æ‹¦æˆªæ–¹æ³•: "</span> + methodName);
            <span class="hljs-keyword">return</span> zuper.call();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attachAgent</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åŠ¨æ€å®‰è£…Agent</span>
        ByteBuddyAgent.install();

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentBuilder</span>.Default()
                .with(AgentBuilder.RedefinitionStrategy.RETRANSFORMATION)
                .type(named(<span class="hljs-string">"com.example.TargetClass"</span>))
                .transform((builder, typeDescription, classLoader, <span class="hljs-keyword">module</span>, protectionDomain) -&gt;
                        builder.method(any())
                                .intercept(MethodDelegation.to(RuntimeInterceptor.class))
                )
                .installOnByteBuddyAgent();

        System.out.println(<span class="hljs-string">"åŠ¨æ€Agentå·²å®‰è£…"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"åº”ç”¨å¯åŠ¨ä¸­..."</span>);

        <span class="hljs-comment">// åº”ç”¨è¿è¡Œä¸­åŠ¨æ€å®‰è£…Agent</span>
        attachAgent();

        <span class="hljs-comment">// åç»­çš„ç±»åŠ è½½ä¼šè¢«å¢å¼º</span>
    }
}
</code></pre>
<h3 data-id="heading-22">å…«ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-23">8.1 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç¼“å­˜åŠ¨æ€ç”Ÿæˆçš„ç±»</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;Class&lt;?&gt;, Class&lt;?&gt;&gt; classCache =
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">T</span>&gt; getEnhancedClass(Class&lt;T&gt; clazz) {
    <span class="hljs-keyword">return</span> (Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">T</span>&gt;) classCache.computeIfAbsent(clazz, key -&gt;
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
            .subclass(key)
            .method(any())
            .intercept(MethodDelegation.to(Interceptor.class))
            .make()
            .load(key.getClassLoader())
            .getLoaded()
    );
}

<span class="hljs-comment">// 2. ä½¿ç”¨@RuntimeTypeå‡å°‘ç±»å‹è½¬æ¢</span>
<span class="hljs-meta">@RuntimeType</span>  <span class="hljs-comment">// è‡ªåŠ¨å¤„ç†ç±»å‹è½¬æ¢</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper)</span> {
    <span class="hljs-keyword">return</span> zuper.call();
}

<span class="hljs-comment">// 3. ç²¾ç¡®åŒ¹é…ï¼Œé¿å…è¿‡åº¦æ‹¦æˆª</span>
.method(named(<span class="hljs-string">"specificMethod"</span>).and(takesArguments(<span class="hljs-number">2</span>)))  <span class="hljs-comment">// âœ“ ç²¾ç¡®</span>
.method(any())  <span class="hljs-comment">// âœ— æ‹¦æˆªæ‰€æœ‰æ–¹æ³•ï¼Œæ€§èƒ½å·®</span>
</code></pre>
<h4 data-id="heading-24">8.2 å¸¸è§é™·é˜±</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é™·é˜±1: å¾ªç¯ä¾èµ–</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadInterceptor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¦‚æœæ‹¦æˆªçš„ç±»ä¸­è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œä¼šå¯¼è‡´æ— é™é€’å½’</span>
        someMethod();  <span class="hljs-comment">// âœ— å±é™©</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// é™·é˜±2: å¿˜è®°è°ƒç”¨åŸæ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(<span class="hljs-meta">@SuperCall</span> Callable&lt;?&gt; zuper)</span> {
    <span class="hljs-comment">// å¿˜è®°è°ƒç”¨ zuper.call()</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// âœ— åŸæ–¹æ³•ä¸ä¼šæ‰§è¡Œ</span>
}

<span class="hljs-comment">// é™·é˜±3: ç±»åŠ è½½å™¨é—®é¢˜</span>
Class&lt;?&gt; clazz = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuddy</span>()
    .subclass(Original.class)
    .make()
    .load(WrongClassLoader.class.getClassLoader())  <span class="hljs-comment">// âœ— é”™è¯¯çš„ç±»åŠ è½½å™¨</span>
    .getLoaded();
</code></pre>
<h3 data-id="heading-25">ä¹ã€æ€»ç»“</h3>
<h4 data-id="heading-26">9.1 ElementMatcherä½¿ç”¨æŒ‡å—</h4>
<pre><code class="hljs language-scss" lang="scss">ElementMatcheré€‰æ‹©æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éœ€è¦åŒ¹é…ä»€ä¹ˆï¼Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç±»å         â†’ <span class="hljs-built_in">named</span>(), <span class="hljs-built_in">nameStartsWith</span>()  â”‚
â”‚ æ–¹æ³•å       â†’ <span class="hljs-built_in">named</span>(), <span class="hljs-built_in">nameMatches</span>()     â”‚
â”‚ æ³¨è§£         â†’ <span class="hljs-built_in">isAnnotatedWith</span>()          â”‚
â”‚ ä¿®é¥°ç¬¦       â†’ <span class="hljs-built_in">isPublic</span>(), <span class="hljs-built_in">isStatic</span>()     â”‚
â”‚ è¿”å›å€¼       â†’ <span class="hljs-built_in">returns</span>()                  â”‚
â”‚ å‚æ•°         â†’ <span class="hljs-built_in">takesArguments</span>()           â”‚
â”‚ ç»§æ‰¿å…³ç³»     â†’ <span class="hljs-built_in">isSubTypeOf</span>()              â”‚
â”‚ ç»„åˆæ¡ä»¶     â†’ <span class="hljs-built_in">and</span>(), <span class="hljs-built_in">or</span>(), <span class="hljs-built_in">not</span>()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-27">9.2 é€‚ç”¨åœºæ™¯æ€»ç»“</h4>








































<table><thead><tr><th>åœºæ™¯</th><th>å®ç°æ–¹å¼</th><th>éš¾åº¦</th></tr></thead><tbody><tr><td>æ—¥å¿—è®°å½•</td><td>MethodDelegation</td><td>â˜…â˜†â˜†â˜†â˜†</td></tr><tr><td>æ€§èƒ½ç›‘æ§</td><td>MethodDelegation + æ³¨è§£</td><td>â˜…â˜…â˜†â˜†â˜†</td></tr><tr><td>äº‹åŠ¡ç®¡ç†</td><td>MethodDelegation + ThreadLocal</td><td>â˜…â˜…â˜…â˜†â˜†</td></tr><tr><td>æ•°æ®åº“ç›‘æ§</td><td>MethodDelegation + SQLè§£æ</td><td>â˜…â˜…â˜…â˜†â˜†</td></tr><tr><td>Java Agent</td><td>AgentBuilder</td><td>â˜…â˜…â˜…â˜…â˜†</td></tr><tr><td>ç±»å¢å¼º</td><td>Subclass/Redefine</td><td>â˜…â˜…â˜…â˜…â˜†</td></tr></tbody></table>
<h4 data-id="heading-28">9.3 å­¦ä¹ èµ„æº</h4>
<ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fbytebuddy.net%2F" target="_blank" title="https://bytebuddy.net/" ref="nofollow noopener noreferrer">bytebuddy.net/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fraphw%2Fbyte-buddy" target="_blank" title="https://github.com/raphw/byte-buddy" ref="nofollow noopener noreferrer">github.com/raphw/byte-â€¦</a></li>
<li><strong>æ•™ç¨‹</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.baeldung.com%2Fbyte-buddy" target="_blank" title="https://www.baeldung.com/byte-buddy" ref="nofollow noopener noreferrer">www.baeldung.com/byte-buddy</a></li>
<li><strong>å®æˆ˜é¡¹ç›®</strong>: SkyWalkingã€Arthasç­‰APMå·¥å…·</li>
</ul>
<p>ByteBuddyä½œä¸ºç°ä»£åŒ–çš„å­—èŠ‚ç æ“ä½œæ¡†æ¶ï¼Œé€šè¿‡ElementMatcherç­‰é«˜çº§APIï¼Œè®©å­—èŠ‚ç å¢å¼ºå˜å¾—ç®€å•è€Œå¼ºå¤§ã€‚æŒæ¡ElementMatcherçš„ä½¿ç”¨ï¼Œæ˜¯å‘æŒ¥ByteBuddyå…¨éƒ¨æ½œåŠ›çš„å…³é”®ï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥å‰–æï¼šæŒ‰ä¸‹ F5 åï¼Œæµè§ˆå™¨å‰ç«¯ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576532425762865167</link>    <guid>https://juejin.cn/post/7576532425762865167</guid>    <pubDate>2025-11-26T02:53:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576532425762865167" data-draft-id="7576571960286969891" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥å‰–æï¼šæŒ‰ä¸‹ F5 åï¼Œæµè§ˆå™¨å‰ç«¯ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T02:53:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨æ˜“å£«å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥å‰–æï¼šæŒ‰ä¸‹ F5 åï¼Œæµè§ˆå™¨å‰ç«¯ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨æ˜“å£«å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:53:21.000Z" title="Wed Nov 26 2025 02:53:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>@<a href="https://link.juejin.cn?target=%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œâ€œåˆ·æ–°é¡µé¢â€çœ‹ä¼¼æ˜¯ä¸€ä¸ªç®€å•æ“ä½œï¼Œå®åˆ™èƒŒåéšè—ç€å¤æ‚çš„ç½‘ç»œé€šä¿¡ã€ç¼“å­˜ç­–ç•¥ä¸æ¸²æŸ“å¼•æ“åä½œæµç¨‹ã€‚å°¤å…¶æ˜¯ <strong>F5 åˆ·æ–°</strong>ï¼Œå®ƒæ—¢ä¸æ˜¯â€œå®Œå…¨é‡æ–°åŠ è½½â€ï¼Œä¹Ÿä¸æ˜¯â€œç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜â€ï¼Œè€Œæ˜¯ä¸€ç§<strong>ä»‹äºä¸¤è€…ä¹‹é—´çš„æ™ºèƒ½éªŒè¯æœºåˆ¶</strong>ã€‚è¦çœŸæ­£æŒæ¡å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•æŠ€å·§ï¼Œå¿…é¡»æ·±å…¥ç†è§£è¿™ä¸€è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿæ‹†è§£ <strong>F5ï¼ˆæ™®é€šåˆ·æ–°ï¼‰</strong> çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸ <code>Ctrl+F5</code>ï¼ˆç¡¬åˆ·æ–°ï¼‰ã€åœ°å€æ å›è½¦ç­‰è¡Œä¸ºè¿›è¡Œå¯¹æ¯”ï¼Œæ­ç¤ºæµè§ˆå™¨åœ¨ç¼“å­˜ã€ç½‘ç»œã€è§£æä¸æ¸²æŸ“å„é˜¶æ®µçš„çœŸå®è¡Œä¸ºã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…³é”®å‰æï¼šä¸‰ç§å¯¼èˆªæ–¹å¼çš„æœ¬è´¨åŒºåˆ«</h3>
<p>é¦–å…ˆå¿…é¡»æ˜ç¡®ï¼š<strong>â€œåˆ·æ–°â€ â‰  â€œé‡æ–°åŠ è½½â€</strong>ã€‚æµè§ˆå™¨å¯¹ä¸åŒç”¨æˆ·æ“ä½œé‡‡å–æˆªç„¶ä¸åŒçš„ç¼“å­˜ç­–ç•¥ã€‚</p>

































<table><thead><tr><th>ç”¨æˆ·æ“ä½œ</th><th>è¡Œä¸ºç±»å‹</th><th>ç¼“å­˜ç­–ç•¥</th><th>ç½‘ç»œè¯·æ±‚ç‰¹å¾</th><th>ç±»æ¯”è¯´æ˜</th></tr></thead><tbody><tr><td><strong>F5 / åˆ·æ–°æŒ‰é’®</strong></td><td><strong>æ™®é€šåˆ·æ–°ï¼ˆReloadï¼‰</strong></td><td><strong>è·³è¿‡å¼ºç¼“å­˜ï¼Œå¯ç”¨åå•†ç¼“å­˜</strong></td><td>è¯·æ±‚æºå¸¦ <code>If-Modified-Since</code> æˆ– <code>If-None-Match</code> å¤´</td><td>â€œæˆ‘æœ‰æ—§ç¨¿ï¼Œè¯·ç¡®è®¤æ˜¯å¦ä»æœ‰æ•ˆã€‚â€</td></tr><tr><td><strong>Ctrl+F5 / Shift+F5</strong></td><td><strong>å¼ºåˆ¶åˆ·æ–°ï¼ˆHard Reloadï¼‰</strong></td><td><strong>å®Œå…¨ç»•è¿‡æ‰€æœ‰ç¼“å­˜</strong></td><td>è¯·æ±‚å¤´å« <code>Cache-Control: no-cache</code>, <code>Pragma: no-cache</code>ï¼Œä¸”ä¸å‘é€åå•†å¤´</td><td>â€œæ— è§†æˆ‘æ‰‹ä¸Šçš„ä»»ä½•ä¸œè¥¿ï¼Œè¯·ç»™æˆ‘æœ€æ–°ç‰ˆï¼â€</td></tr><tr><td><strong>åœ°å€æ å›è½¦ / æ–°æ ‡ç­¾æ‰“å¼€</strong></td><td><strong>æ­£å¸¸å¯¼èˆªï¼ˆNavigationï¼‰</strong></td><td><strong>ä¼˜å…ˆä½¿ç”¨å¼ºç¼“å­˜</strong></td><td>è‹¥å¼ºç¼“å­˜æœªè¿‡æœŸï¼Œ<strong>æ— ç½‘ç»œè¯·æ±‚</strong></td><td>â€œæˆ‘æœ‰æ­£ç‰ˆä¹¦ï¼Œç›´æ¥çœ‹å°±è¡Œã€‚â€</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæŸäº›æµè§ˆå™¨ï¼ˆå¦‚ Chromeï¼‰åœ¨å¼€å‘è€…å·¥å…·å¼€å¯æ—¶ï¼Œä¼šé»˜è®¤å°† F5 è¡Œä¸ºå˜ä¸ºâ€œç¦ç”¨ç¼“å­˜â€ï¼Œè¿™æ˜¯è°ƒè¯•æ¨¡å¼ä¸‹çš„ç‰¹æ®Šè¡Œä¸ºï¼Œä¸å±äºæ ‡å‡†è§„èŒƒã€‚</p>
</blockquote>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¦‚å¿µï¼šå¼ºç¼“å­˜ vs åå•†ç¼“å­˜</h3>
<h4 data-id="heading-3">1. å¼ºç¼“å­˜ï¼ˆStrong Cachingï¼‰</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šæµè§ˆå™¨æ— éœ€ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œç›´æ¥ä»æœ¬åœ°ç¼“å­˜ï¼ˆå†…å­˜æˆ–ç£ç›˜ï¼‰è¿”å›èµ„æºã€‚</li>
<li><strong>æ§åˆ¶å¤´</strong>ï¼š
<ul>
<li><code>Cache-Control: max-age=3600</code>ï¼ˆHTTP/1.1ï¼Œä¼˜å…ˆçº§é«˜ï¼‰</li>
<li><code>Expires: Wed, 26 Nov 2025 12:00:00 GMT</code>ï¼ˆHTTP/1.0ï¼Œæ˜“å—å®¢æˆ·ç«¯æ—¶é—´å½±å“ï¼‰</li>
</ul>
</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>é›¶ç½‘ç»œè¯·æ±‚</strong>ï¼Œå“åº”æå¿«ï¼Œä½†å¯èƒ½å¯¼è‡´ç”¨æˆ·çœ‹åˆ°è¿‡æœŸå†…å®¹ã€‚</li>
</ul>
<h4 data-id="heading-4">2. åå•†ç¼“å­˜ï¼ˆRevalidation Cachingï¼‰</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šæµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·â€œéªŒè¯è¯·æ±‚â€ï¼Œç¡®è®¤ç¼“å­˜æ˜¯å¦ä»æœ‰æ•ˆã€‚</li>
<li><strong>ä¸¤ç»„ç»å…¸é…å¯¹</strong>ï¼š
<ul>
<li><strong>Last-Modified / If-Modified-Since</strong><br/>
åŸºäºæ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ï¼ˆç§’çº§ç²¾åº¦ï¼Œå¯èƒ½è¯¯åˆ¤ï¼‰ã€‚</li>
<li><strong>ETag / If-None-Match</strong><br/>
åŸºäºèµ„æºå†…å®¹çš„å”¯ä¸€æŒ‡çº¹ï¼ˆå¦‚å“ˆå¸Œå€¼ï¼‰ï¼Œ<strong>ç²¾åº¦æ›´é«˜ï¼Œä¼˜å…ˆçº§æ›´é«˜</strong>ã€‚</li>
</ul>
</li>
<li><strong>æœåŠ¡å™¨å“åº”</strong>ï¼š
<ul>
<li>èµ„æºæœªå˜ â†’ è¿”å› <code>304 Not Modified</code>ï¼ˆç©ºå“åº”ä½“ï¼ŒèŠ‚çœå¸¦å®½ï¼‰</li>
<li>èµ„æºå·²å˜ â†’ è¿”å› <code>200 OK</code> + æ–°å†…å®¹ + æ›´æ–°ç¼“å­˜å¤´</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>ETag ç”Ÿæˆç­–ç•¥</strong>ï¼šå¸¸è§å®ç°åŒ…æ‹¬æ–‡ä»¶å†…å®¹ MD5ã€inode+mtimeï¼ˆNginx é»˜è®¤ï¼‰ã€æˆ–è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ã€‚å¼ºä¸€è‡´æ€§ ETag å¯é¿å…â€œæ—¶é—´æˆ³ç²¾åº¦ä¸è¶³â€å¯¼è‡´çš„ç¼“å­˜å¤±æ•ˆé—®é¢˜ã€‚</p>
</blockquote>
<h4 data-id="heading-5">ä¸‰ã€F5 åˆ·æ–°å…¨æ™¯æµç¨‹å›¾</h4>
<ol>
<li><strong>å¼€å§‹é˜¶æ®µ</strong>ï¼ˆç»¿è‰²ï¼‰ï¼šç”¨æˆ·æŒ‰ä¸‹ F5 çš„æŒ‡ä»¤ä¸‹è¾¾</li>
<li><strong>ç¼“å­˜å¤„ç†é˜¶æ®µ</strong>ï¼ˆè“è‰²ï¼‰ï¼šç»•è¿‡å¼ºç¼“å­˜ï¼Œå¯ç”¨åå•†ç¼“å­˜çš„ç½‘ç»œéªŒè¯è¿‡ç¨‹</li>
<li><strong>æœåŠ¡å™¨å†³ç­–</strong>ï¼ˆæ©™è‰²è±å½¢ï¼‰ï¼šåˆ¤æ–­èµ„æºæ˜¯å¦å˜åŒ–çš„åˆ†æ”¯é€»è¾‘</li>
<li><strong>èµ„æºè·å–</strong>ï¼ˆé’è‰²ï¼‰ï¼šæ ¹æ® 304/200 å“åº”å†³å®šä½¿ç”¨ç¼“å­˜è¿˜æ˜¯æ–°å†…å®¹</li>
<li><strong>é¡µé¢æ¸²æŸ“æµç¨‹</strong>ï¼ˆè“è‰²ï¼‰ï¼šä» HTML è§£æåˆ°æœ€ç»ˆåˆæˆçš„å®Œæ•´æ¸²æŸ“ç®¡çº¿</li>
<li><strong>å¾ªç¯å¤„ç†</strong>ï¼ˆç´«è‰²ï¼‰ï¼šå¯¹æ¯ä¸ªå­èµ„æºé‡å¤ç¼“å­˜éªŒè¯çš„è¿‡ç¨‹
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e0f43d12f6c4edbbce05bf65378006a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyo5piT5aOr5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730401&amp;x-signature=9XZ9N7WKI6OQkRfHluXuTJYTF5I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ol>
<h3 data-id="heading-6">å››ã€F5 åˆ·æ–°çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸè¯¦è§£</h3>
<p>å‡è®¾å½“å‰é¡µé¢ä¸º <code>https://example.com/index.html</code>ï¼Œç”¨æˆ·æŒ‰ä¸‹ <strong>F5</strong>ã€‚</p>
<h4 data-id="heading-7">é˜¶æ®µä¸€ï¼šä¸»æ–‡æ¡£ï¼ˆHTMLï¼‰çš„ç¼“å­˜éªŒè¯ä¸è·å–</h4>
<ol>
<li>
<p><strong>è§¦å‘åˆ·æ–°æŒ‡ä»¤</strong><br/>
æµè§ˆå™¨è¯†åˆ«åˆ°è¿™æ˜¯â€œReloadâ€æ“ä½œï¼Œ<strong>å¼ºåˆ¶è·³è¿‡å¼ºç¼“å­˜</strong>ï¼Œå³ä½¿ <code>Cache-Control: max-age=86400</code> ä¹Ÿæ— æ•ˆã€‚</p>
</li>
<li>
<p><strong>æ„é€ éªŒè¯è¯·æ±‚</strong><br/>
å¯¹ä¸» HTML æ–‡æ¡£å‘èµ· GET è¯·æ±‚ï¼Œè‡ªåŠ¨é™„åŠ åå•†å¤´ï¼ˆè‹¥ä¹‹å‰å­˜åœ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-http" lang="http">GET /index.html HTTP/1.1
If-None-Match: "abc123"
If-Modified-Since: Wed, 25 Nov 2025 10:00:00 GMT
</code></pre>
</li>
<li>
<p><strong>æœåŠ¡å™¨å†³ç­–</strong></p>
<ul>
<li>è‹¥èµ„æºæœªå˜ â†’ è¿”å› <code>304 Not Modified</code>ï¼Œ<strong>ä¸ä¼ è¾“ body</strong>ï¼Œæµè§ˆå™¨å¤ç”¨æœ¬åœ°ç¼“å­˜ã€‚</li>
<li>è‹¥èµ„æºå·²å˜ â†’ è¿”å› <code>200 OK</code> + æ–° HTML + æ›´æ–° <code>ETag</code>/<code>Last-Modified</code>ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>âš ï¸ <strong>é‡è¦ç»†èŠ‚</strong>ï¼šå³ä½¿è¿”å› <code>304</code>ï¼Œæµè§ˆå™¨ä»ä¼š<strong>é‡æ–°è§£æ HTML</strong>ï¼å› ä¸ºç¼“å­˜çš„æ˜¯å­—èŠ‚æµï¼Œè€Œé DOM æ ‘ã€‚</p>
</blockquote>
<h4 data-id="heading-8">é˜¶æ®µäºŒï¼šHTML è§£æä¸æ¸²æŸ“æµæ°´çº¿ï¼ˆCritical Rendering Pathï¼‰</h4>
<p>æ— è®º HTML æ¥è‡ªç¼“å­˜è¿˜æ˜¯æ–°ä¸‹è½½ï¼Œæµè§ˆå™¨éƒ½ä¼š<strong>å®Œæ•´æ‰§è¡Œæ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<ol start="4">
<li>
<p><strong>æ„å»º DOM æ ‘</strong></p>
<ul>
<li>é€è¡Œè§£æ HTML å­—èŠ‚æµï¼Œç”ŸæˆèŠ‚ç‚¹å¯¹è±¡ã€‚</li>
<li>é‡åˆ° <code>&lt;script&gt;</code> æ—¶ï¼Œé»˜è®¤<strong>é˜»å¡ HTML è§£æ</strong>ï¼ˆé™¤éæ ‡è®° <code>async</code> æˆ– <code>defer</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ„å»º CSSOM æ ‘</strong></p>
<ul>
<li>è§£æå†…è”æ ·å¼æˆ–å¤–éƒ¨ CSS æ–‡ä»¶ï¼ˆé€šè¿‡ <code>&lt;link&gt;</code>ï¼‰ã€‚</li>
<li>CSS æ˜¯<strong>é˜»å¡æ¸²æŸ“</strong>çš„ï¼šæ²¡æœ‰ CSSOMï¼Œæ— æ³•æ„å»ºæ¸²æŸ“æ ‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆæˆæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰</strong></p>
<ul>
<li>åˆå¹¶ DOM ä¸ CSSOMï¼Œå‰”é™¤ä¸å¯è§èŠ‚ç‚¹ï¼ˆå¦‚ <code>display: none</code>ï¼‰ã€‚</li>
<li>åŒ…å«æ¯ä¸ªå¯è§èŠ‚ç‚¹çš„è®¡ç®—æ ·å¼ï¼ˆcomputed styleï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¸ƒå±€ï¼ˆLayout / Reflowï¼‰</strong></p>
<ul>
<li>è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ï¼ˆä½ç½®ã€å°ºå¯¸ï¼‰ã€‚</li>
<li>è§¦å‘æ¡ä»¶ï¼šDOM ç»“æ„å˜åŒ–ã€çª—å£ resizeã€JS è¯»å– offset ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»˜åˆ¶ï¼ˆPaint / Repaintï¼‰</strong></p>
<ul>
<li>å°†æ¸²æŸ“æ ‘è½¬æ¢ä¸ºå±å¹•åƒç´ ï¼ˆé¢œè‰²ã€è¾¹æ¡†ã€æ–‡æœ¬ç­‰ï¼‰ã€‚</li>
<li>åˆ†å±‚ç»˜åˆ¶ï¼ˆLayerizationï¼‰ï¼šç°ä»£æµè§ˆå™¨ä¼šå°†å¤æ‚å…ƒç´ ï¼ˆå¦‚ <code>transform</code>ã€<code>opacity</code>ï¼‰æå‡ä¸ºç‹¬ç«‹å›¾å±‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆæˆï¼ˆCompositingï¼‰</strong></p>
<ul>
<li>åˆæˆçº¿ç¨‹å°†å„å›¾å±‚æŒ‰ Z è½´é¡ºåºåˆå¹¶ï¼Œæœ€ç»ˆè¾“å‡ºåˆ° GPU æ˜¾ç¤ºã€‚</li>
<li>æ­¤é˜¶æ®µå¯å®ç°é«˜æ€§èƒ½åŠ¨ç”»ï¼ˆå¦‚ <code>transform</code> ä¸è§¦å‘ layout/paintï¼‰ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>æ€§èƒ½æç¤º</strong>ï¼šF5 åˆ·æ–°è™½å¤ç”¨éƒ¨åˆ†ç¼“å­˜ï¼Œä½†ä»éœ€å®Œæ•´æ¸²æŸ“æµç¨‹ã€‚å› æ­¤ï¼Œ<strong>å‡å°‘ DOM å¤æ‚åº¦ã€ä¼˜åŒ– CSS é€‰æ‹©å™¨ã€åˆç†ä½¿ç”¨ <code>will-change</code></strong> å¯¹åˆ·æ–°ä½“éªŒè‡³å…³é‡è¦ã€‚</p>
</blockquote>
<h4 data-id="heading-9">é˜¶æ®µä¸‰ï¼šå­èµ„æºï¼ˆCSS/JS/IMGï¼‰çš„ç¼“å­˜å¤„ç†</h4>
<ol start="10">
<li>
<p><strong>é€’å½’å¤„ç†ä¾èµ–èµ„æº</strong><br/>
åœ¨è§£æ HTML è¿‡ç¨‹ä¸­å‘ç°çš„ <code>&lt;link&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;img&gt;</code> ç­‰ï¼Œ<strong>æ¯ä¸€ä¸ªéƒ½ä¼šè§¦å‘ä¸€æ¬¡ F5 å¼çš„åå•†ç¼“å­˜è¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯·æ±‚å¤´åŒæ ·æºå¸¦ <code>If-None-Match</code>ï¼ˆè‹¥ä¹‹å‰å­˜åœ¨ ETagï¼‰</li>
<li>æœåŠ¡å™¨åŒæ ·è¿”å› <code>304</code> æˆ– <code>200</code></li>
</ul>
</li>
<li>
<p><strong>JavaScript çš„ç‰¹æ®Šè¡Œä¸º</strong></p>
<ul>
<li><strong>ä¼ ç»Ÿ <code>&lt;script&gt;</code></strong>ï¼šé˜»å¡ HTML è§£æï¼Œç›´åˆ° JS ä¸‹è½½ã€è§£æã€æ‰§è¡Œå®Œæ¯•ã€‚</li>
<li><strong><code>&lt;script async&gt;</code></strong>ï¼šå¼‚æ­¥ä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåç«‹å³æ‰§è¡Œï¼ˆå¯èƒ½æ‰“ä¹±é¡ºåºï¼‰ã€‚</li>
<li><strong><code>&lt;script defer&gt;</code></strong>ï¼šå¼‚æ­¥ä¸‹è½½ï¼Œå»¶è¿Ÿåˆ° DOMContentLoaded å‰æ‰§è¡Œï¼ˆæ¨èç”¨äºéå…³é”® JSï¼‰ã€‚</li>
<li><strong>æ¨¡å—è„šæœ¬ï¼ˆ<code>type="module"</code>ï¼‰</strong>ï¼šé»˜è®¤å…·æœ‰ <code>defer</code> è¡Œä¸ºã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>ç°ä»£ä¼˜åŒ–è¶‹åŠ¿</strong>ï¼šé€šè¿‡ <code>rel="preload"</code>ã€<code>&lt;link rel="prefetch"&gt;</code>ã€èµ„æºå†…è”ï¼ˆCritical CSS/JSï¼‰ç­‰æ–¹å¼ï¼Œå¯æ˜¾è‘—æå‡ F5 åˆ·æ–°åçš„æ„ŸçŸ¥é€Ÿåº¦ã€‚</p>
</blockquote>
<h3 data-id="heading-10">äº”ã€å¯¹æ¯”æ€»ç»“ï¼šF5 ä¸å…¶ä»–æ“ä½œçš„æœ¬è´¨å·®å¼‚</h3>









































<table><thead><tr><th>ç»´åº¦</th><th>F5 åˆ·æ–°</th><th>Ctrl+F5 ç¡¬åˆ·æ–°</th><th>åœ°å€æ å›è½¦</th></tr></thead><tbody><tr><td><strong>å¼ºç¼“å­˜</strong></td><td>è·³è¿‡</td><td>è·³è¿‡</td><td>ä½¿ç”¨ï¼ˆè‹¥æœ‰æ•ˆï¼‰</td></tr><tr><td><strong>åå•†ç¼“å­˜</strong></td><td>å¯ç”¨</td><td>è·³è¿‡</td><td>è‹¥å¼ºç¼“å­˜å¤±æ•ˆåˆ™å¯ç”¨</td></tr><tr><td><strong>ç½‘ç»œè¯·æ±‚é‡</strong></td><td>ä¸­ï¼ˆä»…éªŒè¯ï¼‰</td><td>é«˜ï¼ˆå…¨é‡æ‹‰å–ï¼‰</td><td>ä½ï¼ˆå¯èƒ½æ— è¯·æ±‚ï¼‰</td></tr><tr><td><strong>HTML æ˜¯å¦é‡è§£æ</strong></td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯ï¼ˆè‹¥ç¼“å­˜å‘½ä¸­åˆ™å¤ç”¨å­—èŠ‚æµï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¼€å‘è°ƒè¯•ã€å†…å®¹å¯èƒ½æ›´æ–°</td><td>å¼ºåˆ¶è·å–æœ€æ–°èµ„æº</td><td>æ—¥å¸¸æµè§ˆ</td></tr></tbody></table>
<h3 data-id="heading-11">å…­ã€ç»™å‰ç«¯å¼€å‘è€…çš„å®è·µå»ºè®®</h3>
<ol>
<li>
<p><strong>åˆç†é…ç½®ç¼“å­˜ç­–ç•¥</strong></p>
<ul>
<li>HTMLï¼š<code>Cache-Control: no-cache</code>ï¼ˆå¼ºåˆ¶åå•†ï¼Œç¡®ä¿å†…å®¹æœ€æ–°ï¼‰</li>
<li>é™æ€èµ„æºï¼ˆJS/CSS/IMGï¼‰ï¼š<code>Cache-Control: public, max-age=31536000</code> + <strong>å†…å®¹å“ˆå¸Œå‘½å</strong>ï¼ˆå¦‚ <code>app.a1b2c3.js</code>ï¼‰ï¼Œå®ç°â€œæ°¸ä¹…ç¼“å­˜ + ä¸€é”®æ›´æ–°â€</li>
</ul>
</li>
<li>
<p><strong>åˆ©ç”¨ ETag æå‡ç¼“å­˜ç²¾åº¦</strong><br/>
é¿å…ä»…ä¾èµ– <code>Last-Modified</code>ï¼Œå°¤å…¶åœ¨ CI/CD é¢‘ç¹æ„å»ºçš„åœºæ™¯ä¸‹ã€‚</p>
</li>
<li>
<p><strong>ç›‘æ§ 304 å“åº”æ¯”ä¾‹</strong><br/>
é«˜æ¯”ä¾‹çš„ <code>304</code> è¡¨ç¤ºç¼“å­˜ç­–ç•¥æœ‰æ•ˆï¼›è‹¥å¤§é‡ <code>200</code>ï¼Œéœ€æ£€æŸ¥èµ„æºæ˜¯å¦è¢«ä¸å¿…è¦åœ°æ›´æ–°ã€‚</p>
</li>
<li>
<p><strong>é¿å… F5 æ— æ³•æ›´æ–°çš„é—®é¢˜</strong><br/>
è‹¥ç”¨æˆ·åé¦ˆâ€œæ”¹äº†ä»£ç ä½†é¡µé¢æ²¡å˜â€ï¼Œå¾ˆå¯èƒ½æ˜¯ HTML è¢«å¼ºç¼“å­˜ã€‚åŠ¡å¿…ç¡®ä¿ HTML ä¸è®¾é•¿ç¼“å­˜ã€‚</p>
</li>
</ol>
<h3 data-id="heading-12">ä¸ƒã€ç»“è¯­</h3>
<p>F5 åˆ·æ–°è¿œéâ€œé‡æ–°åŠ è½½â€é‚£ä¹ˆç®€å•â€”â€”å®ƒæ˜¯æµè§ˆå™¨åœ¨<strong>ç”¨æˆ·ä½“éªŒã€ç½‘ç»œæ•ˆç‡ä¸æ•°æ®ä¸€è‡´æ€§</strong>ä¹‹é—´åšå‡ºçš„ç²¾å¦™æƒè¡¡ã€‚ç†è§£å…¶èƒŒåçš„ç¼“å­˜æœºåˆ¶ä¸æ¸²æŸ“æµç¨‹ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆçš„å‰ç«¯ä»£ç ï¼Œæ›´èƒ½ç²¾å‡†å®šä½â€œä¸ºä»€ä¹ˆæˆ‘çš„æ›´æ–°æ²¡ç”Ÿæ•ˆâ€è¿™ç±»ç»å…¸éš¾é¢˜ã€‚</p>
<p>æŒæ¡è¿™äº›åº•å±‚åŸç†ï¼Œä½ ä¾¿èƒ½åœ¨æ€§èƒ½ä¼˜åŒ–ã€ç¼“å­˜è®¾è®¡ä¸æ•…éšœæ’æŸ¥ä¸­æ¸¸åˆƒæœ‰ä½™ï¼ŒçœŸæ­£æˆä¸ºä¸€åâ€œçŸ¥å…¶ç„¶ï¼Œæ›´çŸ¥å…¶æ‰€ä»¥ç„¶â€çš„å‰ç«¯å·¥ç¨‹å¸ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apifox 11 æœˆæ›´æ–°ï½œAI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹èƒ½åŠ›æŒç»­å‡çº§ã€JSON Body è‡ªåŠ¨è¡¥å…¨ã€æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header]]></title>    <link>https://juejin.cn/post/7576573061580603433</link>    <guid>https://juejin.cn/post/7576573061580603433</guid>    <pubDate>2025-11-26T02:56:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576573061580603433" data-draft-id="7576573061580128297" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apifox 11 æœˆæ›´æ–°ï½œAI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹èƒ½åŠ›æŒç»­å‡çº§ã€JSON Body è‡ªåŠ¨è¡¥å…¨ã€æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-11-26T02:56:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Apifox"/> <meta itemprop="url" content="https://juejin.cn/user/2766843870448222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apifox 11 æœˆæ›´æ–°ï½œAI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹èƒ½åŠ›æŒç»­å‡çº§ã€JSON Body è‡ªåŠ¨è¡¥å…¨ã€æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2766843870448222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Apifox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T02:56:55.000Z" title="Wed Nov 26 2025 02:56:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Apifox æ–°ç‰ˆæœ¬ä¸Šçº¿å•¦ï¼çœ‹çœ‹æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸»è¦æ¶µç›–çš„é‡ç‚¹å†…å®¹ï¼Œæœ‰æ²¡æœ‰ä½ æ‰€å…³æ³¨çš„åŠŸèƒ½ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>ã€ŒAI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€æŒç»­å‡çº§</strong>
<ul>
<li>æ”¯æŒå…ˆç¼–è¾‘ç¡®è®¤ç”¨ä¾‹åˆ—è¡¨å’Œæè¿°ï¼Œå†ç”Ÿæˆç”¨ä¾‹è¯¦æƒ…</li>
<li>æ”¯æŒç”Ÿæˆæ–­è¨€ã€è‡ªå®šä¹‰è„šæœ¬ç­‰å‰åç½®æ“ä½œ</li>
<li>æ”¯æŒåŸºäºå½“å‰çš„æ¥å£æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡ AI è¡¥å……ç”Ÿæˆæ›´å¤šæµ‹è¯•ç”¨ä¾‹</li>
</ul>
</li>
<li><strong>æ¥å£è°ƒè¯•ä½“éªŒä¼˜åŒ–</strong>
<ul>
<li>æ ¹æ®æ¥å£æ–‡æ¡£è‡ªåŠ¨è¡¥å…¨ JSON Body</li>
<li>è·å– OAuth 2.0 Token åå¯è®¾ä¸ºå˜é‡çš„æœ¬åœ°å€¼</li>
<li>gRPC é”™è¯¯å“åº”ä¹Ÿæ”¯æŒæŸ¥çœ‹ Metadata &amp; Trailer</li>
</ul>
</li>
<li><strong>æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header</strong></li>
<li><strong>ç”¨æˆ·åé¦ˆä¼˜åŒ–</strong>
<ul>
<li>å…¨å±€å˜é‡æ”¯æŒå¤šäººåœ¨çº¿åä½œã€å®æ—¶è‡ªåŠ¨æ›´æ–°</li>
<li>ç”¨ Apifox CLI æŒ‡å®šç¯å¢ƒè¿è¡Œæµ‹è¯•åœºæ™¯åï¼Œæ”¶åˆ°çš„ Webhook é€šçŸ¥ä¼šåŒ…å«ç¯å¢ƒåç§°</li>
</ul>
</li>
</ul>
<p><strong>å°† Apifox æ›´æ–°è‡³æœ€æ–°ç‰ˆï¼Œä¸€èµ·å¼€å¯å…¨æ–°ä½“éªŒå§ï¼</strong></p>
<h2 data-id="heading-0">ã€ŒAI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€æŒç»­å‡çº§</h2>
<p>åªéœ€åœ¨ç»„ç»‡å±‚çº§å®Œæˆ AI åŠŸèƒ½é…ç½®ï¼Œç»„ç»‡å†…æ‰€æœ‰å›¢é˜Ÿå³å¯ç›´æ¥ä½¿ç”¨ AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚Apifox å°†æŒç»­è¿­ä»£ä¼˜åŒ–æ­¤åŠŸèƒ½ï¼Œä»¥æ»¡è¶³æ›´å¤šç”¨æˆ·éœ€æ±‚ä¸å¤šæ ·åŒ–ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-1">æ”¯æŒå…ˆç¼–è¾‘ç¡®è®¤ç”¨ä¾‹åˆ—è¡¨å’Œæè¿°ï¼Œå†ç”Ÿæˆç”¨ä¾‹è¯¦æƒ…</h3>
<p>Apifox æœ¬æ¬¡æ›´æ–°ä¼˜åŒ–äº† AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æµç¨‹ï¼Œå¼•å…¥ä¸¤æ­¥ç”Ÿæˆæœºåˆ¶ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡ AI ç”Ÿæˆç”¨ä¾‹åˆ—è¡¨åŠæè¿°ï¼Œç”¨æˆ·å¯é¢„è§ˆå¹¶è¿›è¡Œç¼–è¾‘è°ƒæ•´</li>
<li>ç¡®è®¤æ— è¯¯åï¼Œå†ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•ç”¨ä¾‹å†…å®¹</li>
</ol>
<p>é€šè¿‡æ–°å¢çš„ä¸­é—´ç¼–è¾‘ç¡®è®¤ç¯èŠ‚ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨ç”Ÿæˆç”¨ä¾‹çš„è¿‡ç¨‹ä¸­è¿›è¡Œå¹²é¢„å’Œè°ƒæ•´ï¼Œç¡®ä¿ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ›´è´´åˆå®é™…éœ€æ±‚ï¼Œæé«˜æµ‹è¯•ç”¨ä¾‹çš„è´¨é‡ï¼Œä¹Ÿè®© AI è¾…åŠ©æµ‹è¯•æ›´åŠ çµæ´»å¯æ§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8929aa0ca10b4a0fa80998e74ce21451~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=yD%2BSs%2B4%2FuT%2FDUI9zJW51%2BWNajdk%3D" alt="æ”¯æŒå…ˆç¼–è¾‘ç¡®è®¤ç”¨ä¾‹åˆ—è¡¨å’Œæè¿°ï¼Œå†ç”Ÿæˆç”¨ä¾‹è¯¦æƒ…" loading="lazy"/></p>
<h3 data-id="heading-2">æ”¯æŒç”Ÿæˆæ–­è¨€ã€è‡ªå®šä¹‰è„šæœ¬ç­‰å‰åç½®æ“ä½œ</h3>
<p>æ›´æ–°è‡³æœ€æ–°ç‰ˆ Apifox åï¼Œä½¿ç”¨ AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå¯åŒæ—¶ç”Ÿæˆæ–­è¨€ã€è‡ªå®šä¹‰è„šæœ¬ç­‰å‰åç½®æ“ä½œï¼Œå¤§å¹…æå‡æµ‹è¯•ç”¨ä¾‹çš„å®Œæ•´æ€§ä¸å¯æ‰§è¡Œæ€§ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bda4a15b4344435a434d43ed6319bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=MSoR2TLfItdkRDOQpt2g1AMAzEI%3D" alt="æ”¯æŒç”Ÿæˆæ–­è¨€ã€è‡ªå®šä¹‰è„šæœ¬ç­‰å‰åç½®æ“ä½œ" loading="lazy"/></p>
<h3 data-id="heading-3">æ”¯æŒåŸºäºå½“å‰çš„æ¥å£æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡ AI è¡¥å……ç”Ÿæˆæ›´å¤šæµ‹è¯•ç”¨ä¾‹</h3>
<p>æ”¯æŒåŸºäºæ¥å£ç°æœ‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè®© AI è¡¥å……ç”Ÿæˆæ›´å…¨é¢çš„æµ‹è¯•åœºæ™¯ã€‚æ‰©å±•æµ‹è¯•è¦†ç›–èŒƒå›´çš„åŒæ—¶ï¼Œç¡®ä¿æ–°ç”Ÿæˆçš„ç”¨ä¾‹ä¸ç°æœ‰æµ‹è¯•ç­–ç•¥ä¿æŒä¸€è‡´ï¼Œä»è€Œå¸®åŠ©å›¢é˜Ÿæ›´é«˜æ•ˆåœ°ä¼˜åŒ–æµ‹è¯•æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28c8c65b633a414192812b9a26ef1431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=aTD8bM%2FmaILiSV22Yti8yJPoJus%3D" alt="æ”¯æŒåŸºäºå½“å‰çš„æ¥å£æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡ AI è¡¥å……ç”Ÿæˆæ›´å¤šæµ‹è¯•ç”¨ä¾‹" loading="lazy"/></p>
<h2 data-id="heading-4">æ¥å£è°ƒè¯•ä½“éªŒä¼˜åŒ–</h2>
<h3 data-id="heading-5">æ ¹æ®æ¥å£æ–‡æ¡£è‡ªåŠ¨è¡¥å…¨ JSON Body</h3>
<p>è‹¥æ¥å£æ–‡æ¡£ä¸­å·²å®šä¹‰ Body æ•°æ®ç»“æ„ï¼Œè°ƒè¯•æ—¶å°†è‡ªåŠ¨æä¾› JSON å­—æ®µè¡¥å…¨æç¤ºï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå‡†ç¡®åœ°å¡«å……æ•°æ®ï¼Œé™ä½æ‰‹åŠ¨è¾“å…¥é”™è¯¯ç‡ï¼Œæå‡è°ƒè¯•æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3711f58ae5e64ec1af17fc31f23092fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=15hVg688tTvbiwouYkhWGOlt%2FMI%3D" alt="æ ¹æ®æ¥å£æ–‡æ¡£è‡ªåŠ¨è¡¥å…¨ JSON Body" loading="lazy"/></p>
<h3 data-id="heading-6">è·å– OAuth 2.0 Token åå¯è®¾ä¸ºå˜é‡çš„æœ¬åœ°å€¼</h3>
<p>Apifox æ”¯æŒå°†è·å–çš„ OAuth 2.0 Token è®¾ç½®ä¸ºå˜é‡æœ¬åœ°å€¼ï¼Œåœ¨ä¿æŠ¤ Token ç§å¯†æ€§çš„åŒæ—¶åˆèƒ½æ­£å¸¸ç”¨äºæ¥å£é‰´æƒï¼Œé¿å…ä¸å›¢é˜Ÿå…¶ä»–æˆå‘˜å…±äº«æ•æ„Ÿä¿¡æ¯ï¼Œå®ç°å®‰å…¨é«˜æ•ˆçš„åä½œå¼€å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/512f763e57c3418b82d14a4a13d1a5b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=7ZrFHITr4pm7xvOi5K3KmOZCx2s%3D" alt="è·å– OAuth 2.0 Token åå¯è®¾ä¸ºå˜é‡çš„æœ¬åœ°å€¼" loading="lazy"/></p>
<h3 data-id="heading-7">gRPC é”™è¯¯å“åº”ä¹Ÿæ”¯æŒæŸ¥çœ‹ Metadata &amp; Trailer</h3>
<p>æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬åï¼Œå³ä½¿ gRPC æ¥å£è¿”å›é”™è¯¯ï¼ŒApifox ä»ä¼šæ­£å¸¸æ˜¾ç¤º Metadata å’Œ Trailer ä¿¡æ¯ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å¼‚å¸¸æƒ…å†µä¸‹æ›´å¿«é€Ÿã€ç²¾å‡†åœ°å®šä½é—®é¢˜æ ¹æºï¼Œæå‡ gRPC è°ƒè¯•çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af8471d95ff545a18da3be52c5e4c31e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=v3CRiy7oH3kRHHM3VDbOp9zE4R8%3D" alt="gRPC é”™è¯¯å“åº”ä¹Ÿæ”¯æŒæŸ¥çœ‹ Metadata &amp; Trailer" loading="lazy"/></p>
<h2 data-id="heading-8">æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header</h2>
<p>ç”¨æˆ·ç°å¯åœ¨ Apifox ä¸­ä¸ºå“åº”ç»„ä»¶æ·»åŠ è¯¦ç»†æè¿°ï¼Œå¹¶é…ç½®å¿…è¦çš„ Header å‚æ•°ï¼Œæå‡å“åº”ç»„ä»¶çš„å®Œæ•´æ€§å’Œä¸“ä¸šæ€§ï¼Œä¸ºå›¢é˜Ÿåä½œä¸å¼€å‘æä¾›æ›´é«˜æ•ˆã€æ›´ä¼˜è´¨çš„ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b5aaaa247e3406a9c41a70e5aef7213~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=hCbsP35xhOEN4RMHsw%2BrryU2r5o%3D" alt="æ”¯æŒä¸ºå“åº”ç»„ä»¶æ·»åŠ æè¿°å’Œ Header" loading="lazy"/></p>
<h2 data-id="heading-9">ç”¨æˆ·åé¦ˆä¼˜åŒ–</h2>
<h3 data-id="heading-10">å…¨å±€å˜é‡æ”¯æŒå¤šäººåœ¨çº¿åä½œã€å®æ—¶è‡ªåŠ¨æ›´æ–°</h3>
<p>ç»§ã€Œç¯å¢ƒå˜é‡ã€ä¹‹åï¼Œã€Œå…¨å±€å˜é‡ã€ä¹Ÿå·²æ”¯æŒå¤šäººåœ¨çº¿åä½œä¸å®æ—¶åŒæ­¥ã€‚å›¢é˜Ÿæˆå‘˜å¯åŒæ—¶åœ¨çº¿ç¼–è¾‘å…¨å±€å˜é‡ï¼Œæ‰€æœ‰æ›´æ”¹éƒ½å°†å®æ—¶è‡ªåŠ¨åŒæ­¥ï¼Œç¡®ä¿å›¢é˜Ÿé…ç½®å§‹ç»ˆä¿æŒä¸€è‡´ï¼Œæå‡åä½œæµç•…åº¦ä¸å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b18a2d4f3c354fb58896058f6aa14673~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764730614&amp;x-signature=sCPtZajAaCunI%2FzqvajDFtRf9kU%3D" alt="å…¨å±€å˜é‡æ”¯æŒå¤šäººåœ¨çº¿åä½œã€å®æ—¶è‡ªåŠ¨æ›´æ–°" loading="lazy"/></p>
<h3 data-id="heading-11">ç”¨ Apifox CLI æŒ‡å®šç¯å¢ƒè¿è¡Œæµ‹è¯•åœºæ™¯åï¼Œæ”¶åˆ°çš„ Webhook é€šçŸ¥ä¼šåŒ…å«ç¯å¢ƒåç§°</h3>
<p>å½“ä½¿ç”¨ Apifox CLI æŒ‡å®šç¯å¢ƒè¿è¡Œæµ‹è¯•åœºæ™¯æ—¶ï¼ŒWebhook é€šçŸ¥å°†è‡ªåŠ¨åŒ…å«ç¯å¢ƒåç§°ï¼Œä½¿æµ‹è¯•ç»“æœæ›´æ˜“è¿½æº¯ä¸åŒºåˆ†ï¼Œæå‡å¤šç¯å¢ƒæµ‹è¯•æµç¨‹çš„é€æ˜åº¦ä¸å¯ç®¡ç†æ€§ã€‚</p>
<h2 data-id="heading-12"><strong>äº†è§£æ›´å¤š</strong></h2>
<p>å½“ç„¶ï¼ŒApifox äº§å“å›¢é˜Ÿä¸ºå¤§å®¶å¸¦æ¥çš„æ–°åŠŸèƒ½è¿œä¸æ­¢ä¸Šæ–¹è¿™äº›ï¼š</p>
<ul>
<li>ç»„ç»‡é…ç½®å¥½äº† AI åŠŸèƒ½åï¼Œç»„ç»‡å†…çš„å›¢é˜Ÿå°±èƒ½ç›´æ¥ä½¿ç”¨</li>
<li>é’ˆå¯¹ HTTP Code è¿›è¡Œæ–­è¨€æ—¶ï¼Œæ”¯æŒæ›´å¤šæ¡ä»¶</li>
<li>æ”¯æŒæ¨¡ç³Šæœç´¢æ¨¡å—åç§°</li>
<li>ä¼˜åŒ–äº†é€‰æ‹©ã€æœç´¢æµ‹è¯•æŠ¥å‘Šä¸­æ­¥éª¤çš„äº¤äº’</li>
<li>AI æ¨¡å‹æŠ¥é”™æ—¶ï¼Œæä¾›æ›´æ¸…æ™°çš„æç¤ºå’ŒæŒ‡å¼•</li>
<li>AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå¦‚æœæ²¡æœ‰é€‰æ‹©ä»»ä½•ç”¨ä¾‹ç±»å‹ï¼Œä¼šä¼˜å…ˆåŸºäºç”¨æˆ·è¾“å…¥æŒ‡ä»¤ç”Ÿæˆæ‰€éœ€ç”¨ä¾‹åˆ†ç±»</li>
<li>ä¼˜åŒ–äº†æ–°å»ºæ¥å£æ—¶ï¼Œåˆ‡æ¢å½“å‰æ¥å£ä½¿ç”¨è®¾è®¡ç•Œé¢è¿˜æ˜¯è°ƒè¯•ç•Œé¢çš„äº¤äº’</li>
<li>è¿è¡Œæµ‹è¯•åœºæ™¯æ—¶å¦‚æœé€‰æ‹©äº†ç§äººç¯å¢ƒï¼Œå›¢é˜Ÿå†…çš„å…¶ä»–äººä¼šçœ‹åˆ°â€œè¯·é€‰æ‹©ç¯å¢ƒâ€çš„æç¤ºï¼Œè€Œä¸æ˜¯â€œç¯å¢ƒå·²è¢«åˆ é™¤â€</li>
<li>è§£å†³è°ƒè¯• WebSocket æˆ– Socket.IO æ¥å£æ—¶ï¼Œå¦‚æœ URL ä¸º Â <code>ws://</code> Â ä¸”ä¸æŒ‡å®šç«¯å£ï¼Œé»˜è®¤è¿æ¥äº† 443 ç«¯å£è€Œä¸æ˜¯ 80 ç«¯å£çš„é—®é¢˜</li>
<li>è§£å†³å¼€å¯äº†â€œå…¼å®¹ HTTP/2â€åï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚è¿˜æ²¡æœ‰å¾—åˆ°å“åº”æ—¶å°±å‘èµ·å¦ä¸€ä¸ªè¯·æ±‚ï¼Œå‰ä¸€ä¸ªè¯·æ±‚ä¼šå‡ºç°â€œsocket hang upâ€é”™è¯¯çš„é—®é¢˜</li>
<li>è§£å†³ä»ä¸»åˆ†æ”¯å¯¼å‡º OpenAPI/Swagger æ•°æ®ï¼Œå†å¯¼å…¥åˆ°å­åˆ†æ”¯ï¼Œå­åˆ†æ”¯çš„é‰´æƒç»„ä»¶æ²¡æœ‰å’Œä¸»åˆ†æ”¯å…³è”çš„é—®é¢˜</li>
<li>è§£å†³é…ç½® Git ä»“åº“è¿æ¥æ—¶ï¼Œæœ€å¤šåªèƒ½æ˜¾ç¤º 30 ä¸ª Git åˆ†æ”¯çš„é—®é¢˜</li>
</ul>
<p>é™¤äº†æ–°å¢åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿå¯¹äº§å“ç»†èŠ‚å’Œä½¿ç”¨ä½“éªŒè¿›è¡Œäº†ä¼˜åŒ–ï¼Œ<strong>å…·ä½“ä¿®æ”¹å†…å®¹å¯å‰å¾€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.apifox.com%2Fchangelog" target="_blank" title="https://docs.apifox.com/changelog" ref="nofollow noopener noreferrer">Apifox æ›´æ–°æ—¥å¿—</a>æŸ¥çœ‹</strong>ã€‚</p>
<p>æ¬¢è¿å„ä½ç”¨æˆ·å¯¹ Apifox ç»§ç»­æå‡ºä½¿ç”¨åé¦ˆå’Œä¼˜åŒ–æ„è§ï¼Œæˆ‘ä»¬ä¼šæŒç»­ä¼˜åŒ–æ›´æ–°ï¼Œè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›æ›´ä¼˜ç§€çš„äº§å“åŠŸèƒ½ä¸æ›´æè‡´çš„ä½¿ç”¨ä½“éªŒï¼</p>
<p>å¯ä»¥å‰å¾€å¸®åŠ©æ–‡æ¡£æŸ¥çœ‹æ›´å¤šä½¿ç”¨è¯´æ˜å’Œæ“ä½œï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ Apifox <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.apifox.com%2Fdoc-5751209%23%25E7%2594%25A8%25E6%2588%25B7%25E7%25BE%25A4%2F" target="_blank" title="https://docs.apifox.com/doc-5751209#%E7%94%A8%E6%88%B7%E7%BE%A4/" ref="nofollow noopener noreferrer">ç”¨æˆ·ç¾¤</a>ä¸æˆ‘ä»¬äº¤æµæ²Ÿé€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go è¯­è¨€çˆ¬è™«å®æˆ˜ï¼šåŸºäº Colly çš„é«˜æ€§èƒ½é‡‡é›†æ¡†æ¶æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576105442214314034</link>    <guid>https://juejin.cn/post/7576105442214314034</guid>    <pubDate>2025-11-25T00:15:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576105442214314034" data-draft-id="7576124206398406666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go è¯­è¨€çˆ¬è™«å®æˆ˜ï¼šåŸºäº Colly çš„é«˜æ€§èƒ½é‡‡é›†æ¡†æ¶æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Go,Trae"/> <meta itemprop="datePublished" content="2025-11-25T00:15:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go è¯­è¨€çˆ¬è™«å®æˆ˜ï¼šåŸºäº Colly çš„é«˜æ€§èƒ½é‡‡é›†æ¡†æ¶æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:15:24.000Z" title="Tue Nov 25 2025 00:15:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Python ç”Ÿæ€ä¸­ï¼ŒScrapy æ˜¯å¤§å®¶ç†ŸçŸ¥çš„çˆ¬è™«æ¡†æ¶ï¼›è€Œåœ¨ Go è¯­è¨€ä¸–ç•Œé‡Œï¼Œ<strong>Colly</strong> åˆ™æ˜¯åŒçº§åˆ«çš„è½»é‡çº§ã€é«˜æ€§èƒ½ã€æ˜“æ‰©å±•çš„é‡‡é›†åˆ©å™¨ã€‚
å‡­å€Ÿ Go çš„å¹¶å‘ä¼˜åŠ¿ï¼ŒColly èƒ½å¤Ÿåœ¨æä½èµ„æºå ç”¨ä¸‹å®ç°é«˜å¹¶å‘æŠ“å–ï¼Œæ˜¯æ„å»ºæ•°æ®é‡‡é›†ã€ç›‘æ§ã€èˆ†æƒ…ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ å¿«é€ŸæŒæ¡ Colly çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä»å®‰è£…ã€åŸºç¡€ç”¨æ³•åˆ°åçˆ¬çªç ´ä¸æ¡ˆä¾‹å®æˆ˜ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ Go çˆ¬è™«ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ Colly æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Colly æ˜¯ Go ä¸­æœ€æµè¡Œçš„çˆ¬è™«æ¡†æ¶ä¹‹ä¸€ï¼Œç›®æ ‡æ˜¯æä¾›
<strong>å¿«é€Ÿ å¯é  å¯æ‰©å±• çš„ç½‘ç»œçˆ¬è™«è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>API ç®€æ´æ¸…æ™°ï¼Œä¸Šæ‰‹éš¾åº¦ä½</li>
<li>å†…ç½®å¹¶å‘é˜Ÿåˆ—ï¼Œæ”¯æŒé«˜å¹¶å‘çˆ¬å–</li>
<li>è‡ªåŠ¨ç®¡ç† Cookieã€Refererã€User-Agent</li>
<li>æ”¯æŒ DOM é€‰æ‹©å™¨ CSS Selector</li>
<li>æ”¯æŒæ·±åº¦æ§åˆ¶ã€åŸŸåç™½åå•ã€è¯·æ±‚é™åˆ¶</li>
<li>æ”¯æŒå›è°ƒå‡½æ•°å¼ç¼–ç¨‹ï¼Œéå¸¸çµæ´»</li>
<li>å¯æ‰©å±•ä¸­é—´ä»¶ã€ä»£ç†ã€å»é‡è§„åˆ™</li>
</ul>
<p>è¿™ä½¿å¾— Colly æˆä¸ºæ„å»ºç”Ÿäº§çº§çˆ¬è™«çš„å¼ºå¤§å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒ å®‰è£… Colly</h2>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go get -u github.com/gocolly/colly/v2
</code></pre>
<p>å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/gocolly/colly/v2"</span>
</code></pre>
<p>ä½ å°±å¯ä»¥å¼€å§‹å†™çˆ¬è™«äº†ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Colly çˆ¬è™«</h2>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ï¼ŒæŠ“å–æ–°é—»ç½‘ç«™çš„æ ‡é¢˜ã€‚</p>
<h3 data-id="heading-3">1 åˆ›å»ºé‡‡é›†å™¨</h3>
<pre><code class="hljs language-go" lang="go">c := colly.NewCollector()
</code></pre>
<h3 data-id="heading-4">2 æ³¨å†Œå›è°ƒè§£æé¡µé¢å†…å®¹</h3>
<pre><code class="hljs language-go" lang="go">c.OnHTML(<span class="hljs-string">"h1.title"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(e *colly.HTMLElement)</span></span> {
    fmt.Println(<span class="hljs-string">"æ ‡é¢˜:"</span>, e.Text)
})
</code></pre>
<h3 data-id="heading-5">3 å¤„ç†è¯·æ±‚äº‹ä»¶</h3>
<pre><code class="hljs language-go" lang="go">c.OnRequest(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(r *colly.Request)</span></span> {
    fmt.Println(<span class="hljs-string">"æ­£åœ¨è®¿é—®:"</span>, r.URL.String())
})
</code></pre>
<h3 data-id="heading-6">4 å¼€å§‹è®¿é—®ç½‘é¡µ</h3>
<pre><code class="hljs language-go" lang="go">c.Visit(<span class="hljs-string">"https://news.ycombinator.com/"</span>)
</code></pre>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"github.com/gocolly/colly/v2"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	c := colly.NewCollector()

	c.OnRequest(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(r *colly.Request)</span></span> {
		fmt.Println(<span class="hljs-string">"è®¿é—®:"</span>, r.URL.String())
	})

	c.OnHTML(<span class="hljs-string">"a.storylink"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(e *colly.HTMLElement)</span></span> {
		fmt.Println(<span class="hljs-string">"æ ‡é¢˜:"</span>, e.Text)
		fmt.Println(<span class="hljs-string">"é“¾æ¥:"</span>, e.Attr(<span class="hljs-string">"href"</span>))
	})

	c.Visit(<span class="hljs-string">"https://news.ycombinator.com/"</span>)
}
</code></pre>
<p>è¿è¡Œåå³å¯å¾—åˆ°åˆ—è¡¨é¡µé¢çš„æ ‡é¢˜ä¸é“¾æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-7">å›› å¤„ç†å¤šé¡µé¢é‡‡é›†ï¼ˆè‡ªåŠ¨è·Ÿéšé“¾æ¥ï¼‰</h2>
<p>Colly æ”¯æŒåœ¨é¡µé¢ä¸­å‘ç°æ–°çš„ URL å¹¶è‡ªåŠ¨ç»§ç»­çˆ¬å–ï¼š</p>
<pre><code class="hljs language-go" lang="go">c.OnHTML(<span class="hljs-string">"a[href]"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(e *colly.HTMLElement)</span></span> {
    link := e.Request.AbsoluteURL(e.Attr(<span class="hljs-string">"href"</span>))
    c.Visit(link)
})
</code></pre>
<p>é…åˆè®¿é—®å»é‡æœºåˆ¶ï¼ŒColly ä¼šè‡ªåŠ¨å¿½ç•¥å·²è®¿é—® URLã€‚</p>
<hr/>
<h2 data-id="heading-8">äº” è®¾ç½®è¯·æ±‚é™åˆ¶ï¼šé˜²æ­¢è¢«å° IP</h2>
<p>ä¸ºäº†é¿å…é¢‘ç¹è®¿é—®è§¦å‘åçˆ¬ï¼Œå¯ä»¥è®¾ç½®é€Ÿç‡é™åˆ¶ã€‚</p>
<pre><code class="hljs language-go" lang="go">c.Limit(&amp;colly.LimitRule{
	DomainGlob:  <span class="hljs-string">"*"</span>,
	Delay:       <span class="hljs-number">1</span> * time.Second,
	RandomDelay: <span class="hljs-number">500</span> * time.Millisecond,
})
</code></pre>
<p>ä¹Ÿå¯ä»¥é™åˆ¶å¹¶å‘ï¼š</p>
<pre><code class="hljs language-go" lang="go">c.Limit(&amp;colly.LimitRule{
	DomainGlob:  <span class="hljs-string">"*"</span>,
	Parallelism: <span class="hljs-number">2</span>,
})
</code></pre>
<hr/>
<h2 data-id="heading-9">å…­ è®¾ç½® User-Agentã€Cookie ä¸ Header</h2>
<p>åçˆ¬ç½‘ç«™é€šå¸¸ä¼šæ£€æŸ¥ UA æˆ– Cookieã€‚</p>
<pre><code class="hljs language-go" lang="go">c.OnRequest(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(r *colly.Request)</span></span> {
	r.Headers.Set(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0)"</span>)
	r.Headers.Set(<span class="hljs-string">"Referer"</span>, <span class="hljs-string">"https://www.google.com"</span>)
})
</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸ƒ ä½¿ç”¨ä»£ç†æ± çªç ´å°ç¦</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/gocolly/colly/v2/proxy"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	c := colly.NewCollector()
	
	rp, _ := proxy.RoundRobinProxySwitcher(
		<span class="hljs-string">"http://127.0.0.1:8080"</span>,
		<span class="hljs-string">"http://127.0.0.1:8081"</span>,
	)
	c.SetProxyFunc(rp)

	c.Visit(<span class="hljs-string">"https://example.com"</span>)
}
</code></pre>
<p>å¤šä»£ç†è½®æ¢èƒ½æ˜¾è‘—é™ä½å° IP é£é™©ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…« æ·±åº¦æ§åˆ¶ä¸åŸŸåé™åˆ¶</h2>
<p>é˜²æ­¢çˆ¬è™«è·‘é£ï¼š</p>
<pre><code class="hljs language-go" lang="go">c.AllowedDomains = []<span class="hljs-type">string</span>{<span class="hljs-string">"example.com"</span>}
</code></pre>
<p>é™åˆ¶æ·±åº¦ï¼š</p>
<pre><code class="hljs language-go" lang="go">c.MaxDepth = <span class="hljs-number">2</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¹ æ•°æ®å­˜å‚¨ï¼šCSVã€JSONã€æ•°æ®åº“</h2>
<p>ä¿å­˜åˆ° CSVï¼š</p>
<pre><code class="hljs language-go" lang="go">f, _ := os.Create(<span class="hljs-string">"result.csv"</span>)
w := csv.NewWriter(f)

c.OnHTML(<span class="hljs-string">"h2"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(e *colly.HTMLElement)</span></span> {
    w.Write([]<span class="hljs-type">string</span>{e.Text})
})
</code></pre>
<p>ä¿å­˜åˆ° MySQL / MongoDB ä¹Ÿåªéœ€åœ¨å›è°ƒä¸­æ’å…¥æ•°æ®åº“å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-13">å å®æˆ˜æ¡ˆä¾‹ï¼šæŠ“å–äº¬ä¸œå•†å“ä¿¡æ¯</h2>
<p>ç¤ºä¾‹ï¼šæŠ“å–å•†å“åç§°ä¸ä»·æ ¼</p>
<pre><code class="hljs language-go" lang="go">c := colly.NewCollector()

c.OnHTML(<span class="hljs-string">".gl-item"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(e *colly.HTMLElement)</span></span> {
	title := e.ChildText(<span class="hljs-string">".p-name em"</span>)
	price := e.ChildText(<span class="hljs-string">".p-price i"</span>)
	fmt.Println(title, price)
})

c.Visit(<span class="hljs-string">"https://search.jd.com/Search?keyword=æ‰‹æœº"</span>)
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å°ç±³</span> <span class="hljs-number">14</span> <span class="hljs-number">4599</span>
<span class="hljs-string">iPhone</span> <span class="hljs-number">15</span> <span class="hljs-number">5999</span>
<span class="hljs-string">â€¦â€¦</span>
</code></pre>
<p>çŸ­çŸ­åè¡Œä»£ç å³å¯å®Œæˆä¸€ä¸ªå®ç”¨çš„é‡‡é›†å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-14">åä¸€ Colly é€‚åˆå“ªäº›åœºæ™¯ï¼Ÿ</h2>
<ul>
<li>å•†å“ä»·æ ¼ç›‘æ§</li>
<li>å¹³å°èˆ†æƒ…ä¸æ•°æ®é‡‡é›†</li>
<li>æ–‡ç« /æ–°é—»æŠ“å–</li>
<li>å®æ—¶ç›‘æ§ç³»ç»Ÿ</li>
<li>å¤šç«™ç‚¹èšåˆçˆ¬è™«</li>
<li>æ•°æ®åˆ†æä¸å¯è§†åŒ–åå°çš„æ•°æ®æ¥æº</li>
</ul>
<p>Go çš„é«˜å¹¶å‘ + Colly çš„ç®€æ´ API = é«˜æ€§èƒ½ã€é«˜å¯é çš„æ•°æ®é‡‡é›†å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-15">åäºŒ æ€»ç»“</h2>
<p>Colly æ˜¯ Go ä¸­æœ€æ˜“ç”¨ã€æœ€å¼ºå¤§çš„çˆ¬è™«æ¡†æ¶ä¹‹ä¸€ï¼Œå…·å¤‡ï¼š</p>
<ul>
<li>API ç®€æ´</li>
<li>å¹¶å‘å¼º</li>
<li>æ‰©å±•æ€§é«˜</li>
<li>ç¨³å®šå¯é </li>
</ul>
<p>æœ¬æ–‡ä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨è¿›è¡Œäº†å…¨é¢è®²è§£ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>åˆ›å»ºé‡‡é›†å™¨ä¸å›è°ƒ</li>
<li>è§£æé¡µé¢å†…å®¹</li>
<li>æ§åˆ¶å¹¶å‘ä¸åçˆ¬</li>
<li>ä»£ç†æ± ä¸ UA ä¼ªè£…</li>
<li>è‡ªåŠ¨è·Ÿéšé“¾æ¥</li>
<li>ä¿å­˜æ•°æ®</li>
<li>å®æˆ˜æ¡ˆä¾‹</li>
</ol>
<p>æŒæ¡ Collyï¼Œå¯ä»¥è®©ä½ åœ¨ Go é¡¹ç›®ä¸­å¿«é€Ÿæ„å»ºé«˜æ€§èƒ½çˆ¬è™«æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å››ã€è™šæ‹Ÿ DOM ä¸ Diff ç®—æ³•ï¼šæ¶æ„è®¾è®¡çš„æ™ºæ…§]]></title>    <link>https://juejin.cn/post/7576479344039067700</link>    <guid>https://juejin.cn/post/7576479344039067700</guid>    <pubDate>2025-11-25T13:05:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576479344039067700" data-draft-id="7576487832089985039" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å››ã€è™šæ‹Ÿ DOM ä¸ Diff ç®—æ³•ï¼šæ¶æ„è®¾è®¡çš„æ™ºæ…§"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-25T13:05:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç’"/> <meta itemprop="url" content="https://juejin.cn/user/1609340755378829"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å››ã€è™šæ‹Ÿ DOM ä¸ Diff ç®—æ³•ï¼šæ¶æ„è®¾è®¡çš„æ™ºæ…§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1609340755378829/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T13:05:53.000Z" title="Tue Nov 25 2025 13:05:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•åœ¨æ€§èƒ½ä¸å¼€å‘ä½“éªŒä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Ÿ</h2>
<h3 data-id="heading-1">é—®é¢˜çš„èµ·æº</h3>
<p>æƒ³è±¡ä½ æ˜¯ React çš„æ¶æ„å¸ˆï¼Œé¢ä¸´ä¸€ä¸ªä¸¤éš¾é€‰æ‹©ï¼š</p>
<p><strong>é€‰æ‹© Aï¼šç›´æ¥æ“ä½œ DOM</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯æ¬¡æ•°æ®å˜åŒ–ï¼Œæ‰‹åŠ¨æ›´æ–° DOM</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUI</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'username'</span>).<span class="hljs-property">textContent</span> = data.<span class="hljs-property">username</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'age'</span>).<span class="hljs-property">textContent</span> = data.<span class="hljs-property">age</span>;
  <span class="hljs-comment">// ... éœ€è¦ç²¾ç¡®çŸ¥é“æ›´æ–°å“ªäº›èŠ‚ç‚¹</span>
}
</code></pre>
<ul>
<li>âœ… æ€§èƒ½å¥½ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</li>
<li>âŒ å¼€å‘ä½“éªŒå·®ï¼šè¦æ‰‹åŠ¨è¿½è¸ªæ‰€æœ‰å˜åŒ–</li>
</ul>
<p><strong>é€‰æ‹© Bï¼šæš´åŠ›é‡å»ºæ•´ä¸ª DOM</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯æ¬¡æ•°æ®å˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUI</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
    &lt;div&gt;
      &lt;p&gt;<span class="hljs-subst">${data.username}</span>&lt;/p&gt;
      &lt;p&gt;<span class="hljs-subst">${data.age}</span>&lt;/p&gt;
    &lt;/div&gt;
  `</span>;
}
</code></pre>
<ul>
<li>âœ… å¼€å‘ä½“éªŒå¥½ï¼šä¸ç”¨å…³å¿ƒå˜åŒ–ç»†èŠ‚</li>
<li>âŒ æ€§èƒ½å·®ï¼šDOM æ“ä½œå¤ªæ˜‚è´µï¼Œä¼šé—ªçƒã€ä¸¢å¤±çŠ¶æ€</li>
</ul>
<p><strong>React çš„ç­”æ¡ˆï¼šè™šæ‹Ÿ DOMï¼ˆä¸­é—´å±‚æŠ½è±¡ï¼‰</strong></p>
<hr/>
<h2 data-id="heading-2">æ¶æ„è®¾è®¡æ€è·¯ï¼šå¼•å…¥ä¸­é—´å±‚</h2>
<h3 data-id="heading-3">æ ¸å¿ƒæ€æƒ³ï¼šç”¨"ä¾¿å®œçš„è®¡ç®—"æ›¿ä»£"æ˜‚è´µçš„æ“ä½œ"</h3>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¶æ„åˆ†å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¼€å‘è€…                                                  â”‚
â”‚    â†“  å†™å£°æ˜å¼ä»£ç ï¼š<span class="hljs-title function_">render</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> }  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è™šæ‹Ÿ <span class="hljs-variable constant_">DOM</span> (ä¸­é—´å±‚)                                       â”‚
â”‚    â†“  ä¾¿å®œçš„ <span class="hljs-variable constant_">JS</span> å¯¹è±¡æ“ä½œ                                â”‚
â”‚    â†“  <span class="hljs-title class_">Diff</span> ç®—æ³•è®¡ç®—æœ€å°å˜æ›´                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çœŸå® <span class="hljs-variable constant_">DOM</span>                                                â”‚
â”‚    â†“  åªæ‰§è¡Œå¿…è¦çš„æ˜‚è´µæ“ä½œ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ¶æ„æ™ºæ…§ï¼š</strong></p>
<ul>
<li>å¼€å‘è€…è·å¾—"æš´åŠ›é‡å»º"çš„å¼€å‘ä½“éªŒï¼ˆå£°æ˜å¼ï¼‰</li>
<li>ç”¨æˆ·è·å¾—"ç²¾ç¡®æ›´æ–°"çš„æ€§èƒ½ï¼ˆè‡ªåŠ¨ä¼˜åŒ–ï¼‰</li>
<li>é€šè¿‡ä¸­é—´å±‚å®Œæˆé­”æ³•è½¬æ¢</li>
</ul>
<hr/>
<h2 data-id="heading-4">è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-5">æœ¬è´¨ï¼šç”¨ JavaScript å¯¹è±¡æè¿° UI</h3>
<p><strong>çœŸå® DOMï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text"</span>&gt;</span>World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>è™šæ‹Ÿ DOMï¼ˆå°±æ˜¯ JS å¯¹è±¡ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">type</span>: <span class="hljs-string">'div'</span>,
  <span class="hljs-attr">props</span>: { <span class="hljs-attr">id</span>: <span class="hljs-string">'app'</span> },
  <span class="hljs-attr">children</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'h1'</span>,
      <span class="hljs-attr">props</span>: {},
      <span class="hljs-attr">children</span>: [<span class="hljs-string">'Hello'</span>]
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'p'</span>,
      <span class="hljs-attr">props</span>: { <span class="hljs-attr">className</span>: <span class="hljs-string">'text'</span> },
      <span class="hljs-attr">children</span>: [<span class="hljs-string">'World'</span>]
    }
  ]
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨ JS å¯¹è±¡ï¼Ÿ</strong></p>
<ol>
<li>åˆ›å»ºå¯¹è±¡ï¼šæå¿«ï¼ˆå†…å­˜æ“ä½œï¼‰</li>
<li>å¯¹æ¯”å¯¹è±¡ï¼šæå¿«ï¼ˆçº¯ JS è®¡ç®—ï¼‰</li>
<li>æ“ä½œ DOMï¼šææ…¢ï¼ˆæ¶‰åŠæ¸²æŸ“å¼•æ“ã€é‡æ’é‡ç»˜ï¼‰</li>
</ol>
<p><strong>æˆæœ¬å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">åˆ›å»º</span> <span class="hljs-number">1000</span> <span class="hljs-string">ä¸ª</span> <span class="hljs-string">JS</span> <span class="hljs-string">å¯¹è±¡ï¼š</span>    <span class="hljs-string">~1ms</span>
<span class="hljs-string">å¯¹æ¯”</span> <span class="hljs-number">1000</span> <span class="hljs-string">ä¸ª</span> <span class="hljs-string">JS</span> <span class="hljs-string">å¯¹è±¡ï¼š</span>    <span class="hljs-string">~10ms</span>
<span class="hljs-string">æ“ä½œ</span> <span class="hljs-number">1000</span> <span class="hljs-string">ä¸ª</span> <span class="hljs-string">DOM</span> <span class="hljs-string">èŠ‚ç‚¹ï¼š</span>   <span class="hljs-string">~100ms+</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">Diff ç®—æ³•ï¼šå¦‚ä½•é«˜æ•ˆè®¡ç®—å˜åŒ–ï¼Ÿ</h2>
<h3 data-id="heading-7">ä¼ ç»Ÿ Diff ç®—æ³•çš„é—®é¢˜</h3>
<p><strong>æ ‘çš„ç¼–è¾‘è·ç¦»ç®—æ³•ï¼ˆå­¦æœ¯ç•Œçš„æ ‡å‡†ç­”æ¡ˆï¼‰ï¼š</strong></p>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼š<strong>O(nÂ³)</strong></li>
<li>1000 ä¸ªèŠ‚ç‚¹ = 10 äº¿æ¬¡è®¡ç®—</li>
<li>æ ¹æœ¬æ— æ³•ç”¨äºå®æ—¶ UI æ›´æ–°</li>
</ul>
<p><strong>React çš„æ¶æ„æŠ‰æ‹©ï¼šç”¨å¯å‘å¼å‡è®¾æ¢å–æ€§èƒ½</strong></p>
<hr/>
<h2 data-id="heading-8">ä¸‰å¤§å¯å‘å¼å‡è®¾ï¼šä» O(nÂ³) åˆ° O(n)</h2>
<h3 data-id="heading-9">å‡è®¾ 1ï¼šåŒå±‚æ¯”è¾ƒï¼ˆLevel-by-Levelï¼‰</h3>
<p><strong>ä¼ ç»Ÿç®—æ³•ï¼šè·¨å±‚çº§æ¯”è¾ƒ</strong></p>
<pre><code class="hljs language-css" lang="css">æ—§æ ‘               æ–°æ ‘
  <span class="hljs-selector-tag">A</span>                 D
 / \               / \
<span class="hljs-selector-tag">B</span>   C             <span class="hljs-selector-tag">B</span>   C
    |                 |
    D                 <span class="hljs-selector-tag">A</span>

ä¼ ç»Ÿç®—æ³•ä¼šå°è¯•ï¼šD ä» C ä¸‹ç§»åŠ¨åˆ°æ ¹ï¼Ÿ<span class="hljs-selector-tag">A</span> ä»æ ¹ç§»åŠ¨åˆ° C ä¸‹ï¼Ÿ
éœ€è¦è®¡ç®—æ‰€æœ‰å¯èƒ½æ€§ â†’ O(nÂ³)
</code></pre>
<p><strong>React çš„å‡è®¾ï¼šè·¨å±‚çº§ç§»åŠ¨æå°‘å‘ç”Ÿ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React çš„åšæ³•ï¼šåªæ¯”è¾ƒåŒä¸€å±‚çº§</span>
æ—§æ ‘ç¬¬<span class="hljs-number">1</span>å±‚: [A]          æ–°æ ‘ç¬¬<span class="hljs-number">1</span>å±‚: [D]  â†’ A è¢«åˆ é™¤ï¼ŒD è¢«åˆ›å»º
æ—§æ ‘ç¬¬<span class="hljs-number">2</span>å±‚: [B, C]       æ–°æ ‘ç¬¬<span class="hljs-number">2</span>å±‚: [B, C]  â†’ ä¸å˜
æ—§æ ‘ç¬¬<span class="hljs-number">3</span>å±‚: [D]          æ–°æ ‘ç¬¬<span class="hljs-number">3</span>å±‚: [A]  â†’ D è¢«åˆ é™¤ï¼ŒA è¢«åˆ›å»º
</code></pre>
<p><strong>ç»“æœï¼š</strong></p>
<ul>
<li>ç®—æ³•å˜ç®€å•ï¼šåªéå†ä¸€æ¬¡æ ‘ â†’ O(n)</li>
<li>ä»£ä»·ï¼šè·¨å±‚çº§ç§»åŠ¨ä¼šé‡å»ºï¼ˆä½†æå°‘å‘ç”Ÿï¼‰</li>
</ul>
<p><strong>æ¶æ„å¯ç¤ºï¼š</strong></p>
<blockquote>
<p>é€šè¿‡<strong>åˆç†çš„å‡è®¾</strong>ç®€åŒ–é—®é¢˜ï¼Œç”¨"è¦†ç›– 99% åœºæ™¯çš„ç®€å•æ–¹æ¡ˆ"æ›¿ä»£"è¦†ç›– 100% åœºæ™¯çš„å¤æ‚æ–¹æ¡ˆ"</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">å‡è®¾ 2ï¼šç±»å‹ä¸åŒå³é‡å»ºï¼ˆType-basedï¼‰</h3>
<p><strong>React çš„å‡è®¾ï¼šç±»å‹å˜äº†ï¼Œå†…å®¹è‚¯å®šä¹Ÿå˜äº†</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åœºæ™¯ï¼šä» div å˜æˆ span</span>
æ—§: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
æ–°: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>

<span class="hljs-comment">// React çš„åšæ³•ï¼š</span>
<span class="hljs-comment">// 1. åˆ é™¤æ•´ä¸ª div å­æ ‘</span>
<span class="hljs-comment">// 2. åˆ›å»ºæ•´ä¸ª span å­æ ‘</span>
<span class="hljs-comment">// âŒ ä¸ä¼šå¤ç”¨å†…éƒ¨çš„ &lt;p&gt;Hello&lt;/p&gt;</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœè¦å¤ç”¨å­èŠ‚ç‚¹ï¼Œéœ€è¦ï¼š</span>
<span class="hljs-number">1.</span> å¯¹æ¯” div å’Œ span çš„æ‰€æœ‰å±æ€§
<span class="hljs-number">2.</span> é€’å½’å¯¹æ¯”æ‰€æœ‰å­èŠ‚ç‚¹
<span class="hljs-number">3.</span> è®¡ç®—å¦‚ä½•è¿ç§»å­èŠ‚ç‚¹
<span class="hljs-comment">// â†’ å¤æ‚åº¦çˆ†ç‚¸</span>

<span class="hljs-comment">// React çš„å–èˆï¼š</span>
<span class="hljs-comment">// ç›´æ¥é‡å»º â†’ ç®€å•ã€å¿«é€Ÿã€å¯é¢„æµ‹</span>
</code></pre>
<p><strong>çœŸå®åœºæ™¯åˆ†æï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ç±»å‹æ”¹å˜çš„åœºæ™¯æå°‘ï¼š</span>
&lt;div&gt; â†’ &lt;span&gt;     <span class="hljs-comment">// å¾ˆå°‘å‘ç”Ÿ</span>
&lt;button&gt; â†’ &lt;input&gt; <span class="hljs-comment">// å‡ ä¹ä¸ä¼š</span>

<span class="hljs-comment">// å¸¸è§çš„æ˜¯åŒç±»å‹æ›´æ–°ï¼š</span>
&lt;div className="old"&gt; â†’ &lt;div className="new"&gt;  // ç»å¸¸å‘ç”Ÿ
</code></pre>
<p><strong>æ¶æ„å¯ç¤ºï¼š</strong></p>
<blockquote>
<p>ä¼˜åŒ–å¸¸è§è·¯å¾„ï¼ˆåŒç±»å‹æ›´æ–°ï¼‰ï¼Œç®€åŒ–ç½•è§è·¯å¾„ï¼ˆç±»å‹æ”¹å˜ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å‡è®¾ 3ï¼šKey æ ‡è¯†ç§»åŠ¨ï¼ˆKey-basedï¼‰</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼šåˆ—è¡¨é‡æ’</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ²¡æœ‰ keyï¼šReact æ— æ³•è¯†åˆ«</span>
æ—§: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>]
æ–°: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>]

<span class="hljs-comment">// React çš„è¯¯åˆ¤ï¼š</span>
<span class="hljs-comment">// ä½ç½®0: A â†’ C  (æ›´æ–°æ–‡æœ¬)</span>
<span class="hljs-comment">// ä½ç½®1: B â†’ A  (æ›´æ–°æ–‡æœ¬)</span>
<span class="hljs-comment">// ä½ç½®2: C â†’ B  (æ›´æ–°æ–‡æœ¬)</span>
<span class="hljs-comment">// ç»“æœï¼š3 æ¬¡ DOM æ›´æ–°</span>
</code></pre>
<p><strong>ç”¨ Key æ ‡è¯†ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx">æ—§: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"a"</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"b"</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"c"</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>]
æ–°: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"c"</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"a"</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"b"</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>]

<span class="hljs-comment">// React çš„æ­£ç¡®åˆ¤æ–­ï¼š</span>
<span class="hljs-comment">// key="c" çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°ä½ç½® 0</span>
<span class="hljs-comment">// key="a" å’Œ key="b" ä¿æŒä¸å˜</span>
<span class="hljs-comment">// ç»“æœï¼š1 æ¬¡ DOM ç§»åŠ¨æ“ä½œ</span>
</code></pre>
<p><strong>Key çš„ä½œç”¨ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å»ºç«‹èº«ä»½æ˜ å°„</span>
æ—§èŠ‚ç‚¹é›†åˆ = { <span class="hljs-attr">a</span>: <span class="hljs-title class_">NodeA</span>, <span class="hljs-attr">b</span>: <span class="hljs-title class_">NodeB</span>, <span class="hljs-attr">c</span>: <span class="hljs-title class_">NodeC</span> }
æ–°èŠ‚ç‚¹é›†åˆ = { <span class="hljs-attr">c</span>: <span class="hljs-title class_">NodeC</span>, <span class="hljs-attr">a</span>: <span class="hljs-title class_">NodeA</span>, <span class="hljs-attr">b</span>: <span class="hljs-title class_">NodeB</span> }

<span class="hljs-comment">// 2. å¿«é€ŸæŸ¥æ‰¾å¯¹åº”èŠ‚ç‚¹</span>
<span class="hljs-keyword">if</span> (æ—§èŠ‚ç‚¹é›†åˆ[key] === æ–°èŠ‚ç‚¹é›†åˆ[key]) {
  <span class="hljs-comment">// å¤ç”¨ï¼åªéœ€ç§»åŠ¨ä½ç½®</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// æ–°èŠ‚ç‚¹ï¼Œéœ€è¦åˆ›å»º</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨ index ä½œä¸º key æ˜¯é”™è¯¯çš„ï¼Ÿ</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼š</span>
{list.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{item}</span> /&gt;</span></span>)}

<span class="hljs-comment">// é—®é¢˜ï¼šåˆ é™¤ç¬¬ä¸€é¡¹æ—¶</span>
æ—§: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{0}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">"A"</span> /&gt;</span></span>, <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{1}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">"B"</span> /&gt;</span></span>]
æ–°: [<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{0}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">"B"</span> /&gt;</span></span>]

<span class="hljs-comment">// React çš„è¯¯åˆ¤ï¼š</span>
<span class="hljs-comment">// key={0} çš„èŠ‚ç‚¹è¿˜åœ¨ â†’ å¤ç”¨ï¼Œä½†æ•°æ®ä» A å˜æˆ B</span>
<span class="hljs-comment">// key={1} çš„èŠ‚ç‚¹æ¶ˆå¤± â†’ åˆ é™¤</span>
<span class="hljs-comment">// ç»“æœï¼šæ›´æ–°äº†ä¸è¯¥æ›´æ–°çš„èŠ‚ç‚¹</span>
</code></pre>
<p><strong>æ¶æ„å¯ç¤ºï¼š</strong></p>
<blockquote>
<p>å¼•å…¥<strong>ç¨³å®šçš„æ ‡è¯†ç¬¦</strong>å¸®åŠ©ç®—æ³•è¯†åˆ«"åŒä¸€æ€§"ï¼Œé¿å…è¯¯åˆ¤</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">å®Œæ•´æµç¨‹ç¤ºä¾‹ï¼šä»ä»£ç åˆ° DOM æ›´æ–°</h2>
<h3 data-id="heading-13">æ­¥éª¤ 1ï¼šå¼€å‘è€…å†™å£°æ˜å¼ä»£ç </h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-14">æ­¥éª¤ 2ï¼šReact åˆ›å»ºè™šæ‹Ÿ DOM</h3>
<p><strong>é¦–æ¬¡æ¸²æŸ“ï¼ˆcount = 0ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">type</span>: <span class="hljs-string">'div'</span>,
  <span class="hljs-attr">children</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'h1'</span>, <span class="hljs-attr">children</span>: [<span class="hljs-string">'Count: 0'</span>] },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'button'</span>, <span class="hljs-attr">props</span>: { <span class="hljs-attr">onClick</span>: ... }, <span class="hljs-attr">children</span>: [<span class="hljs-string">'+1'</span>] }
  ]
}
</code></pre>
<p><strong>ç‚¹å‡»æŒ‰é’®åï¼ˆcount = 1ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">type</span>: <span class="hljs-string">'div'</span>,
  <span class="hljs-attr">children</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'h1'</span>, <span class="hljs-attr">children</span>: [<span class="hljs-string">'Count: 1'</span>] },  <span class="hljs-comment">// å˜åŒ–ï¼</span>
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'button'</span>, <span class="hljs-attr">props</span>: { <span class="hljs-attr">onClick</span>: ... }, <span class="hljs-attr">children</span>: [<span class="hljs-string">'+1'</span>] }
  ]
}
</code></pre>
<h3 data-id="heading-15">æ­¥éª¤ 3ï¼šDiff ç®—æ³•è®¡ç®—å˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç å±•ç¤º Diff è¿‡ç¨‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">diff</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
  <span class="hljs-comment">// å±‚çº§ 1ï¼šdiv</span>
  <span class="hljs-keyword">if</span> (oldVNode.<span class="hljs-property">type</span> === newVNode.<span class="hljs-property">type</span>) {  <span class="hljs-comment">// 'div' === 'div' âœ…</span>
    <span class="hljs-comment">// ç±»å‹ç›¸åŒï¼Œç»§ç»­æ¯”è¾ƒå­èŠ‚ç‚¹</span>

    <span class="hljs-comment">// å±‚çº§ 2ï¼šå­èŠ‚ç‚¹æ•°ç»„</span>
    <span class="hljs-title function_">diffChildren</span>(oldVNode.<span class="hljs-property">children</span>, newVNode.<span class="hljs-property">children</span>);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">diffChildren</span>(<span class="hljs-params">oldChildren, newChildren</span>) {
  <span class="hljs-comment">// å­èŠ‚ç‚¹ 0ï¼šh1</span>
  <span class="hljs-keyword">if</span> (oldChildren[<span class="hljs-number">0</span>].<span class="hljs-property">type</span> === newChildren[<span class="hljs-number">0</span>].<span class="hljs-property">type</span>) {  <span class="hljs-comment">// 'h1' === 'h1' âœ…</span>
    <span class="hljs-comment">// æ¯”è¾ƒæ–‡æœ¬å†…å®¹</span>
    <span class="hljs-keyword">if</span> (oldChildren[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>[<span class="hljs-number">0</span>] !== newChildren[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>[<span class="hljs-number">0</span>]) {
      <span class="hljs-comment">// 'Count: 0' !== 'Count: 1' â†’ è®°å½•æ›´æ–°</span>
      patches.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'TEXT'</span>,
        <span class="hljs-attr">node</span>: h1Node,
        <span class="hljs-attr">text</span>: <span class="hljs-string">'Count: 1'</span>
      });
    }
  }

  <span class="hljs-comment">// å­èŠ‚ç‚¹ 1ï¼šbutton ï¼ˆæ²¡æœ‰å˜åŒ–ï¼Œè·³è¿‡ï¼‰</span>
}
</code></pre>
<p><strong>Diff ç»“æœï¼ˆè¡¥ä¸åŒ…ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">patches = [
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'UPDATE_TEXT'</span>,
    <span class="hljs-attr">domNode</span>: &lt;h1&gt;èŠ‚ç‚¹,
    <span class="hljs-attr">newText</span>: <span class="hljs-string">'Count: 1'</span>
  }
]
</code></pre>
<h3 data-id="heading-16">æ­¥éª¤ 4ï¼šåº”ç”¨è¡¥ä¸åˆ°çœŸå® DOM</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React åªæ‰§è¡Œå¿…è¦çš„ DOM æ“ä½œ</span>
patches.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">patch</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">type</span> === <span class="hljs-string">'UPDATE_TEXT'</span>) {
    patch.<span class="hljs-property">domNode</span>.<span class="hljs-property">textContent</span> = patch.<span class="hljs-property">newText</span>;  <span class="hljs-comment">// åªæ›´æ–°æ–‡æœ¬</span>
  }
});
</code></pre>
<p><strong>å…³é”®è§‚å¯Ÿï¼š</strong></p>
<ul>
<li>è™šæ‹Ÿ DOM è®¡ç®—ï¼šåˆ›å»ºäº†æ•´ä¸ªæ–°æ ‘ï¼ˆä½†å¾ˆå¿«ï¼Œåªæ˜¯ JS å¯¹è±¡ï¼‰</li>
<li>çœŸå® DOM æ“ä½œï¼šåªæ›´æ–°äº† 1 ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼ˆæœ€å°åŒ–æ“ä½œï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-17">æ‰¹å¤„ç†ï¼ˆBatchingï¼‰ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–</h2>
<h3 data-id="heading-18">é—®é¢˜ï¼šå¤šæ¬¡çŠ¶æ€æ›´æ–°å¯¼è‡´å¤šæ¬¡æ¸²æŸ“</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);   <span class="hljs-comment">// è§¦å‘é‡æ¸²æŸ“ï¼Ÿ</span>
  <span class="hljs-title function_">setName</span>(<span class="hljs-string">'Alice'</span>);      <span class="hljs-comment">// åˆè§¦å‘é‡æ¸²æŸ“ï¼Ÿ</span>
  <span class="hljs-title function_">setAge</span>(<span class="hljs-number">25</span>);            <span class="hljs-comment">// å†è§¦å‘é‡æ¸²æŸ“ï¼Ÿ</span>
}
</code></pre>
<h3 data-id="heading-19">React çš„è§£å†³æ–¹æ¡ˆï¼šæ‰¹é‡åˆå¹¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React å†…éƒ¨æœºåˆ¶ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">let</span> isBatchingUpdates = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> updateQueue = [];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">setState</span>(<span class="hljs-params">newState</span>) {
  updateQueue.<span class="hljs-title function_">push</span>(newState);

  <span class="hljs-keyword">if</span> (!isBatchingUpdates) {
    <span class="hljs-comment">// å¼€å¯æ‰¹å¤„ç†</span>
    isBatchingUpdates = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œ</span>
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰æ›´æ–°</span>
      <span class="hljs-keyword">const</span> finalState = <span class="hljs-title function_">mergeUpdates</span>(updateQueue);
      <span class="hljs-title function_">render</span>(finalState);  <span class="hljs-comment">// åªæ¸²æŸ“ä¸€æ¬¡ï¼</span>

      updateQueue = [];
      isBatchingUpdates = <span class="hljs-literal">false</span>;
    });
  }
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong></p>
<pre><code class="hljs">æ²¡æœ‰æ‰¹å¤„ç†ï¼š3 æ¬¡çŠ¶æ€æ›´æ–° â†’ 3 æ¬¡ Diff â†’ 3 æ¬¡ DOM æ›´æ–°
æœ‰æ‰¹å¤„ç†ï¼š  3 æ¬¡çŠ¶æ€æ›´æ–° â†’ 1 æ¬¡ Diff â†’ 1 æ¬¡ DOM æ›´æ–°
</code></pre>
<p><strong>æ¶æ„å¯ç¤ºï¼š</strong></p>
<blockquote>
<p>é€šè¿‡<strong>å»¶è¿Ÿå’Œåˆå¹¶</strong>å‡å°‘æ˜‚è´µæ“ä½œçš„é¢‘ç‡</p>
</blockquote>
<hr/>
<h2 data-id="heading-20">æ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³æ€»ç»“</h2>
<h3 data-id="heading-21">1. ä¸­é—´å±‚æŠ½è±¡ï¼ˆIndirectionï¼‰</h3>
<pre><code class="hljs">é—®é¢˜ï¼šæ€§èƒ½ vs å¼€å‘ä½“éªŒçš„çŸ›ç›¾
è§£å†³ï¼šå¼•å…¥è™šæ‹Ÿ DOM ä½œä¸ºä¸­é—´å±‚
æ”¶ç›Šï¼šä¸¤å¤´éƒ½å…¼é¡¾
</code></pre>
<p><strong>å…¶ä»–é¢†åŸŸçš„ç±»ä¼¼è®¾è®¡ï¼š</strong></p>
<ul>
<li>ç¼–è¯‘å™¨ï¼šé«˜çº§è¯­è¨€ â†’ ä¸­é—´è¡¨ç¤º(IR) â†’ æœºå™¨ç </li>
<li>æ•°æ®åº“ï¼šSQL â†’ æŸ¥è¯¢è®¡åˆ’ â†’ ç‰©ç†æ“ä½œ</li>
<li>ç½‘ç»œï¼šåº”ç”¨å±‚ â†’ TCP/IP æŠ½è±¡ â†’ ç‰©ç†å±‚</li>
</ul>
<p><strong>æ ¸å¿ƒç†å¿µï¼š</strong></p>
<blockquote>
<p>"All problems in computer science can be solved by another level of indirection."
è®¡ç®—æœºç§‘å­¦çš„æ‰€æœ‰é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€å±‚æŠ½è±¡æ¥è§£å†³ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-22">2. åˆç†çš„å‡è®¾ï¼ˆHeuristic Assumptionsï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss">å‡è®¾ <span class="hljs-number">1</span>ï¼šåŒå±‚æ¯”è¾ƒ    â†’ è¦†ç›– <span class="hljs-number">95%</span> åœºæ™¯ï¼Œå¤æ‚åº¦ä» <span class="hljs-built_in">O</span>(nÂ³) é™åˆ° <span class="hljs-built_in">O</span>(n)
å‡è®¾ <span class="hljs-number">2</span>ï¼šç±»å‹å³å†…å®¹  â†’ ç®€åŒ–åˆ¤æ–­é€»è¾‘ï¼Œä¼˜åŒ–å¸¸è§è·¯å¾„
å‡è®¾ <span class="hljs-number">3</span>ï¼šKey æ ‡è¯†    â†’ æä¾›"é€ƒç”Ÿèˆ±"ï¼Œå¤„ç†ç‰¹æ®Šåœºæ™¯
</code></pre>
<p><strong>æ¶æ„æƒè¡¡ï¼š</strong></p>
<ul>
<li>âœ… å¸¸è§åœºæ™¯æå¿«ï¼ˆ99% çš„ä½¿ç”¨ï¼‰</li>
<li>âš ï¸ ç½•è§åœºæ™¯å¯èƒ½æ¬¡ä¼˜ï¼ˆ1% çš„ä½¿ç”¨ï¼Œä½†å¯æ¥å—ï¼‰</li>
</ul>
<p><strong>å­¦ä¹ è¦ç‚¹ï¼š</strong></p>
<blockquote>
<p>ä¸è¦è¿½æ±‚å®Œç¾çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œé’ˆå¯¹å®é™…ä½¿ç”¨åœºæ™¯ä¼˜åŒ–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-23">3. æ€§èƒ½ä¼˜åŒ–çš„å±‚æ¬¡</h3>
<pre><code class="hljs language-scss" lang="scss">ç¬¬ <span class="hljs-number">1</span> å±‚ï¼šç®—æ³•ä¼˜åŒ–
  â””â”€ <span class="hljs-built_in">O</span>(nÂ³) â†’ <span class="hljs-built_in">O</span>(n) é€šè¿‡å¯å‘å¼å‡è®¾

ç¬¬ <span class="hljs-number">2</span> å±‚ï¼šå‡å°‘æ“ä½œæ¬¡æ•°
  â””â”€ æ‰¹å¤„ç†ï¼šn æ¬¡æ›´æ–° â†’ <span class="hljs-number">1</span> æ¬¡æ¸²æŸ“

ç¬¬ <span class="hljs-number">3</span> å±‚ï¼šæ“ä½œæˆæœ¬è½¬ç§»
  â””â”€ æ˜‚è´µçš„ DOM æ“ä½œ â†’ ä¾¿å®œçš„ JS è®¡ç®—
</code></pre>
<p><strong>é€šç”¨åŸåˆ™ï¼š</strong></p>
<ol>
<li>ç”¨ä¾¿å®œçš„æ“ä½œæ›¿ä»£æ˜‚è´µçš„æ“ä½œ</li>
<li>å‡å°‘æ“ä½œçš„æ¬¡æ•°</li>
<li>å»¶è¿Ÿå’Œåˆå¹¶æ“ä½œ</li>
</ol>
<hr/>
<h2 data-id="heading-24">å®æˆ˜ç†è§£ï¼šè°ƒè¯• Diff è¿‡ç¨‹</h2>
<h3 data-id="heading-25">ç”¨ä»£ç è§‚å¯Ÿ Diff</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DiffDemo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>([<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {items.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item}</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setItems(['C', 'A', 'B'])}&gt;é‡æ’<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// æ‰“å¼€ React DevTools â†’ Components â†’ è®¾ç½® â†’ Highlight updates</span>
<span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®åï¼Œè§‚å¯Ÿå“ªäº› DOM èŠ‚ç‚¹é—ªçƒï¼ˆè¢«æ›´æ–°ï¼‰</span>
</code></pre>
<p><strong>æœ‰ Key çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>âœ… åªæœ‰èŠ‚ç‚¹ä½ç½®å˜åŒ–ï¼ˆDOM ç§»åŠ¨ï¼‰</li>
<li>âœ… ä¸ä¼šé‡å»ºå†…éƒ¨å†…å®¹</li>
</ul>
<p><strong>æ²¡æœ‰ Key çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>âŒ æ‰€æœ‰èŠ‚ç‚¹å†…å®¹éƒ½æ›´æ–°ï¼ˆæ–‡æœ¬æ›¿æ¢ï¼‰</li>
<li>âŒ å¯èƒ½ä¸¢å¤±çŠ¶æ€ï¼ˆå¦‚è¾“å…¥æ¡†çš„å†…å®¹ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-26">ä»è™šæ‹Ÿ DOM å­¦åˆ°çš„æ¶æ„æ™ºæ…§</h2>
<h3 data-id="heading-27">1. æƒè¡¡ä¹‹é“ï¼ˆTrade-offsï¼‰</h3>
<p><strong>æ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆï¼Œåªæœ‰åˆé€‚çš„é€‰æ‹©ï¼š</strong></p>
<pre><code class="hljs">è™šæ‹Ÿ DOMï¼šå¢åŠ äº†å†…å­˜å¼€é”€ï¼Œæ¢å–äº†å¼€å‘ä½“éªŒ
å¯å‘å¼å‡è®¾ï¼šæ”¾å¼ƒäº†ç½•è§åœºæ™¯çš„æœ€ä¼˜ï¼Œæ¢å–äº†å¸¸è§åœºæ™¯çš„æé€Ÿ
æ‰¹å¤„ç†ï¼šå¢åŠ äº†ä¸€ç‚¹å»¶è¿Ÿï¼Œæ¢å–äº†æ•´ä½“æ€§èƒ½
</code></pre>
<p><strong>æ¶æ„å¸ˆçš„å·¥ä½œï¼š</strong></p>
<ul>
<li>ä¸æ˜¯æ‰¾"æœ€å¥½"çš„æ–¹æ¡ˆ</li>
<li>è€Œæ˜¯æ‰¾"æœ€åˆé€‚"çš„å¹³è¡¡ç‚¹</li>
</ul>
<hr/>
<h3 data-id="heading-28">2. çº¦æŸé©±åŠ¨è®¾è®¡ï¼ˆConstraint-drivenï¼‰</h3>
<p><strong>React é¢ä¸´çš„çº¦æŸï¼š</strong></p>
<ol>
<li>DOM æ“ä½œå¾ˆæ…¢ï¼ˆç‰©ç†çº¦æŸï¼‰</li>
<li>ç”¨æˆ·è¦å£°æ˜å¼ APIï¼ˆéœ€æ±‚çº¦æŸï¼‰</li>
<li>éœ€è¦å®æ—¶å“åº”ï¼ˆæ€§èƒ½çº¦æŸï¼‰</li>
</ol>
<p><strong>è®¾è®¡å†³ç­–é“¾ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">çº¦æŸ â†’ è™šæ‹Ÿ DOMï¼ˆä¸­é—´å±‚ï¼‰
<span class="hljs-code">      â†’ å¯å‘å¼ Diffï¼ˆç®—æ³•ç®€åŒ–ï¼‰
      â†’ æ‰¹å¤„ç†ï¼ˆæ“ä½œåˆå¹¶ï¼‰
      â†’ Key æœºåˆ¶ï¼ˆè¾…åŠ©è¯†åˆ«ï¼‰
</span></code></pre>
<p><strong>å­¦ä¹ è¦ç‚¹ï¼š</strong></p>
<blockquote>
<p>ä¼˜ç§€çš„æ¶æ„æºäºå¯¹çº¦æŸçš„æ·±åˆ»ç†è§£ï¼Œè€Œéå¤©é©¬è¡Œç©ºçš„æƒ³è±¡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-29">3. åˆ†å±‚æ€æƒ³ï¼ˆLayered Architectureï¼‰</h3>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ä»£ç å±‚      â”‚ â† å£°æ˜å¼ã€ç®€å•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è™šæ‹Ÿ DOM å±‚     â”‚ â† æŠ½è±¡ã€çµæ´»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Diff ç®—æ³•å±‚     â”‚ â† ä¼˜åŒ–ã€æ™ºèƒ½
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   DOM æ“ä½œå±‚      â”‚ â† ç²¾ç¡®ã€é«˜æ•ˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ¯å±‚çš„èŒè´£ï¼š</strong></p>
<ul>
<li>ä¸Šå±‚ï¼šæä¾›æ˜“ç”¨çš„æ¥å£</li>
<li>ä¸­å±‚ï¼šéš”ç¦»å¤æ‚åº¦</li>
<li>ä¸‹å±‚ï¼šæ‰§è¡Œé«˜æ•ˆæ“ä½œ</li>
</ul>
<p><strong>å­¦ä¹ è¦ç‚¹ï¼š</strong></p>
<blockquote>
<p>å¥½çš„æ¶æ„è®©æ¯ä¸€å±‚éƒ½å¯ä»¥ç‹¬ç«‹ä¼˜åŒ–ï¼Œè€Œä¸å½±å“å…¶ä»–å±‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-30">å¯¹æ¯”ï¼šè™šæ‹Ÿ DOM vs å…¶ä»–æ–¹æ¡ˆ</h2>
<h3 data-id="heading-31">æ–¹æ¡ˆ 1ï¼šç›´æ¥ DOM æ“ä½œï¼ˆjQuery æ—¶ä»£ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰‹åŠ¨è¿½è¸ªæ¯ä¸ªå˜åŒ–</span>
$(<span class="hljs-string">'#username'</span>).<span class="hljs-title function_">text</span>(newName);
$(<span class="hljs-string">'#age'</span>).<span class="hljs-title function_">text</span>(newAge);
</code></pre>
<ul>
<li>âœ… æ€§èƒ½æœ€ä¼˜ï¼ˆæœ€å°åŒ–æ“ä½œï¼‰</li>
<li>âŒ å¼€å‘ä½“éªŒå·®ï¼ˆæ‰‹åŠ¨ç®¡ç†ï¼‰</li>
<li>âŒ å®¹æ˜“å‡ºé”™ï¼ˆé—æ¼æ›´æ–°ï¼‰</li>
</ul>
<h3 data-id="heading-32">æ–¹æ¡ˆ 2ï¼šæ¨¡æ¿å¼•æ“ï¼ˆAngular 1.xï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è„æ£€æŸ¥ï¼šéå†æ‰€æœ‰ç»‘å®š</span>
$scope.$watch(<span class="hljs-string">'username'</span>, callback);
$scope.$digest(); <span class="hljs-comment">// æ£€æŸ¥æ‰€æœ‰ watcher</span>
</code></pre>
<ul>
<li>âœ… å¼€å‘ä½“éªŒå¥½ï¼ˆåŒå‘ç»‘å®šï¼‰</li>
<li>âŒ æ€§èƒ½éšç»‘å®šæ•°é‡ä¸‹é™ï¼ˆO(n) æ£€æŸ¥ï¼‰</li>
<li>âŒ éš¾ä»¥ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-33">æ–¹æ¡ˆ 3ï¼šè™šæ‹Ÿ DOMï¼ˆReactï¼‰</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å£°æ˜å¼æè¿° UI</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{username}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<ul>
<li>âœ… å¼€å‘ä½“éªŒå¥½ï¼ˆå£°æ˜å¼ï¼‰</li>
<li>âœ… æ€§èƒ½å¯æ§ï¼ˆO(n) Diff + æ‰¹å¤„ç†ï¼‰</li>
<li>âœ… å¯ä¼˜åŒ–ç©ºé—´å¤§ï¼ˆshouldComponentUpdateã€memoï¼‰</li>
</ul>
<h3 data-id="heading-34">æ–¹æ¡ˆ 4ï¼šç¼–è¯‘ä¼˜åŒ–ï¼ˆSvelteï¼‰</h3>
<pre><code class="hljs language-svelte" lang="svelte">&lt;!-- ç¼–è¯‘æ—¶ç”Ÿæˆç²¾ç¡®æ›´æ–°ä»£ç  --&gt;
&lt;script&gt;
  let count = 0;
&lt;/script&gt;
&lt;div&gt;{count}&lt;/div&gt;

&lt;!-- ç¼–è¯‘æˆç±»ä¼¼ï¼š --&gt;
&lt;script&gt;
  function update_count(value) {
    count = value;
    div.textContent = count; // ç›´æ¥æ›´æ–°
  }
&lt;/script&gt;
</code></pre>
<ul>
<li>âœ… è¿è¡Œæ—¶æ€§èƒ½æœ€ä¼˜ï¼ˆæ— è™šæ‹Ÿ DOM å¼€é”€ï¼‰</li>
<li>âœ… æ‰“åŒ…ä½“ç§¯å°</li>
<li>âš ï¸ éœ€è¦ç¼–è¯‘æ­¥éª¤</li>
<li>âš ï¸ åŠ¨æ€æ€§è¾ƒå¼±</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong></p>
<blockquote>
<p>æ²¡æœ‰é“¶å¼¹ï¼Œæ¯ç§æ–¹æ¡ˆéƒ½åœ¨ä¸åŒç»´åº¦ä¸Šåšæƒè¡¡ã€‚è™šæ‹Ÿ DOM åœ¨"æ˜“ç”¨æ€§ + æ€§èƒ½ + çµæ´»æ€§"ä¸Šæ‰¾åˆ°äº†è¾ƒå¥½çš„å¹³è¡¡ç‚¹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-35">å®è·µå»ºè®®ï¼šå¦‚ä½•ç”¨å¥½è™šæ‹Ÿ DOM</h2>
<h3 data-id="heading-36">1. æ­£ç¡®ä½¿ç”¨ Key</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âœ… å¥½ï¼šç¨³å®šå”¯ä¸€çš„ ID</span>
{users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>)}

<span class="hljs-comment">// âŒ åï¼šæ•°ç»„ç´¢å¼•</span>
{users.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">user, index</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>)}

<span class="hljs-comment">// âŒ åï¼šéšæœºå€¼</span>
{users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{Math.random()}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>)}
</code></pre>
<h3 data-id="heading-37">2. é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é—®é¢˜ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }} /&gt;</span></span>; <span class="hljs-comment">// æ–°å¯¹è±¡ï¼</span>
}

<span class="hljs-comment">// âœ… è§£å†³ï¼šæå–åˆ°å¤–éƒ¨</span>
<span class="hljs-keyword">const</span> fixedStyle = { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> };
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{fixedStyle}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// âœ… æˆ–ä½¿ç”¨ useMemo</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> style = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> }), []);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> /&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-38">3. åˆ©ç”¨ React DevTools è§‚å¯Ÿ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… React DevTools</span>
<span class="hljs-comment"># æ‰“å¼€ Profiler æ ‡ç­¾</span>
<span class="hljs-comment"># å½•åˆ¶æ“ä½œï¼ŒæŸ¥çœ‹å“ªäº›ç»„ä»¶é‡æ¸²æŸ“äº†</span>
<span class="hljs-comment"># ä¼˜åŒ–ä¸å¿…è¦çš„æ¸²æŸ“</span>
</code></pre>
<hr/>
<h2 data-id="heading-39">æ€»ç»“ï¼šæ¶æ„è®¾è®¡çš„æœ¬è´¨</h2>
<p>è™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•æ•™ä¼šæˆ‘ä»¬ï¼š</p>
<ol>
<li>
<p><strong>å¥½çš„æ¶æ„æºäºå¯¹é—®é¢˜æœ¬è´¨çš„ç†è§£</strong></p>
<ul>
<li>ç†è§£çº¦æŸï¼šDOM æ“ä½œæ…¢</li>
<li>ç†è§£éœ€æ±‚ï¼šå£°æ˜å¼ API</li>
<li>ç†è§£åœºæ™¯ï¼šUI æ›´æ–°æ¨¡å¼</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦è¿½æ±‚å®Œç¾ï¼Œè¦è¿½æ±‚åˆé€‚</strong></p>
<ul>
<li>O(nÂ³) â†’ O(n)ï¼šé€šè¿‡å‡è®¾ç®€åŒ–</li>
<li>100% è¦†ç›– â†’ 99% ä¼˜åŒ–ï¼šèšç„¦å¸¸è§åœºæ™¯</li>
<li>ç»å¯¹ç²¾ç¡® â†’ é«˜æ•ˆè¿‘ä¼¼ï¼šå¯å‘å¼ç­–ç•¥</li>
</ul>
</li>
<li>
<p><strong>ç”¨æŠ½è±¡éš”ç¦»å¤æ‚åº¦</strong></p>
<ul>
<li>ç”¨æˆ·å†™ç®€å•ä»£ç </li>
<li>æ¡†æ¶å¤„ç†å¤æ‚é€»è¾‘</li>
<li>ä¸­é—´å±‚å®Œæˆè½¬æ¢</li>
</ul>
</li>
<li>
<p><strong>åˆ†å±‚ã€å»¶è¿Ÿã€æ‰¹é‡æ˜¯ä¼˜åŒ–çš„ä¸‰æ¿æ–§</strong></p>
<ul>
<li>åˆ†å±‚ï¼šè™šæ‹Ÿ DOM éš”ç¦»çœŸå® DOM</li>
<li>å»¶è¿Ÿï¼šä¸ç«‹å³æ“ä½œï¼Œå…ˆè®¡ç®—</li>
<li>æ‰¹é‡ï¼šå¤šæ¬¡æ›´æ–°åˆå¹¶æˆä¸€æ¬¡</li>
</ul>
</li>
</ol>
<p><strong>æœ€ç»ˆå¯ç¤ºï¼š</strong></p>
<blockquote>
<p>æ¶æ„è®¾è®¡ä¸æ˜¯å †ç ŒæŠ€æœ¯ï¼Œè€Œæ˜¯åœ¨çº¦æŸæ¡ä»¶ä¸‹ï¼Œé€šè¿‡åˆç†çš„æŠ½è±¡å’Œæƒè¡¡ï¼Œæ‰¾åˆ°é—®é¢˜çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œå½“ä½ é‡åˆ°æ¶æ„é—®é¢˜æ—¶ï¼Œé—®è‡ªå·±ï¼š</p>
<ol>
<li>æ ¸å¿ƒçº¦æŸæ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>èƒ½å¦å¼•å…¥ä¸­é—´å±‚æŠ½è±¡ï¼Ÿ</li>
<li>èƒ½å¦é€šè¿‡åˆç†å‡è®¾ç®€åŒ–é—®é¢˜ï¼Ÿ</li>
<li>å¦‚ä½•åœ¨æ€§èƒ½å’Œæ˜“ç”¨æ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Ÿ</li>
</ol>
<p>è¿™å°±æ˜¯è™šæ‹Ÿ DOM ç»™æˆ‘ä»¬çš„æ¶æ„æ™ºæ…§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¤§å¦å»ºç«‹åœ¨å¹¶ä¸ç‰¢å›ºçš„åœ°åŸºï¼Œæµ…è°ˆJavaScriptæœªæ¥]]></title>    <link>https://juejin.cn/post/7576479344039166004</link>    <guid>https://juejin.cn/post/7576479344039166004</guid>    <pubDate>2025-11-25T13:25:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576479344039166004" data-draft-id="7576338796847300648" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¤§å¦å»ºç«‹åœ¨å¹¶ä¸ç‰¢å›ºçš„åœ°åŸºï¼Œæµ…è°ˆJavaScriptæœªæ¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T13:25:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³åƒç”µé¥­é”…"/> <meta itemprop="url" content="https://juejin.cn/user/1913569040664749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¤§å¦å»ºç«‹åœ¨å¹¶ä¸ç‰¢å›ºçš„åœ°åŸºï¼Œæµ…è°ˆJavaScriptæœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1913569040664749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³åƒç”µé¥­é”…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T13:25:51.000Z" title="Tue Nov 25 2025 13:25:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯å¤§å¦å»ºç«‹åœ¨å¹¶ä¸ç‰¢å›ºçš„åœ°åŸºä¸Šï¼šJavaScript çš„æœªæ¥åˆ°åº•å¾€å“ªèµ°ï¼Ÿ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/459df7b349364e15a3b4ce3fb7069e26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz5ZCD55S16aWt6ZSF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764681951&amp;x-signature=CCdNwAWac1sJ75nZAxEmQOMBmOE%3D" alt="d388eb40-a711-43db-879e-f2eab94b6eba.png" loading="lazy"/></p>
<blockquote>
<p>ä¸€ä¸ªå°å°çš„ <code>__dirname is not defined</code>ï¼Œè®©æˆ‘é‡æ–°æ€è€ƒäº†å‰ç«¯çš„æœªæ¥ã€‚</p>
</blockquote>
<p>ä¸Šå‘¨æˆ‘æ–°å»ºäº†ä¸ª Vite é¡¹ç›®ï¼Œé¡ºæ‰‹å†™ä¸‹é‚£æ®µé™ªä¼´æˆ‘åå¹´çš„é…ç½®ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: { <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>) }
  }
};
</code></pre>
<p>ç»“æœ TypeScript ç»™äº†æˆ‘å½“å¤´ä¸€æ£’ï¼š<br/>
<strong><code>__dirname is not defined</code>ã€‚</strong></p>
<p>è¿™æ®µä» Node.js æ—¶ä»£ä¸€è·¯èµ°æ¥çš„â€œè€ä¼™è®¡â€ï¼Œä¸ºä»€ä¹ˆçªç„¶å°±ä¸è¡Œäº†ï¼Ÿ</p>
<hr/>
<h3 data-id="heading-1">ä¸æ˜¯ API ä¸è§äº†ï¼Œæ˜¯æˆ‘ä»¬æ¢äº†è¿è¡Œæ—¶ä»£</h3>
<p><code>path</code> æ²¡é—®é¢˜ï¼ŒNode.js ä¹Ÿæ²¡é—®é¢˜ã€‚<br/>
çœŸæ­£çš„é—®é¢˜å«ï¼š<strong>ä½ å·²ç»è¿›å…¥ ESM æ—¶ä»£äº†ã€‚</strong></p>
<p>åœ¨ ES Modules é‡Œï¼Œç¡®å®æ²¡æœ‰ <code>__dirname</code> è¿™ä¸ªä¸œè¥¿ã€‚<br/>
è¦å†™çš„è¯ï¼Œåªèƒ½è¿™æ ·ç»•ä¸€åœˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:url'</span>;
<span class="hljs-keyword">import</span> { dirname } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = <span class="hljs-title function_">dirname</span>(__filename);
</code></pre>
<p>æˆ–è€…æ¢ä¸ªæ›´ç°ä»£çš„å†™æ³•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">alias: {
  <span class="hljs-string">'@'</span>: <span class="hljs-built_in">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">URL</span>(<span class="hljs-string">'./src'</span>, <span class="hljs-keyword">import</span>.meta.url))
}
</code></pre>
<p>çœ‹ç€æœ‰ç‚¹ç¹çï¼Œä½†å®ƒèƒŒåçš„æ„ä¹‰éå¸¸å¤§ï¼š</p>
<p><strong>æˆ‘ä»¬æ­£åœ¨ç»Ÿä¸€è¿è¡Œæ—¶ï¼Œè®©é…ç½®æ–‡ä»¶èƒ½åœ¨ Nodeã€Bunã€Deno ç”šè‡³æµè§ˆå™¨é‡Œè·‘èµ·æ¥ã€‚</strong></p>
<p>ä»¥å‰æ‰€æœ‰å·¥å…·éƒ½é»˜è®¤ä½ ç”¨ Nodeã€‚<br/>
ç°åœ¨å·¥å…·é“¾åœ¨åŠªåŠ›â€œè„± Node è€Œä¸å Nodeâ€ã€‚</p>
<p>è¿™æ˜¯ä¸€æ¬¡å‡çº§ï¼Œè€Œä¸æ˜¯ç ´åã€‚</p>
<hr/>
<h3 data-id="heading-2">å·¥å…·é“¾ä¸æ˜¯æŠ›å¼ƒ Node.jsï¼Œè€Œæ˜¯è®©æˆ‘ä»¬ä¸å†ä¾èµ–å®ƒçš„â€œç§è´§â€</h3>
<p>è¿™å‡ å¹´ï¼Œæ„å»ºå·¥å…·å‡ ä¹åœ¨â€œé›†ä½“é€ƒç¦» JavaScriptâ€ï¼š</p>
<ul>
<li>ESBuild ç”¨ Go å†™</li>
<li>Rspack å’Œ Turbopack ç”¨ Rust å†™</li>
<li>SWC ä¹Ÿç”¨ Rust å†™</li>
</ul>
<p>äºæ˜¯å¾ˆå¤šäººå¼€å§‹é—®ï¼š<br/>
<strong>â€œé‚£æˆ‘è¿˜å­¦ Node.js å¹²å˜›ï¼Ÿâ€</strong></p>
<p>å…¶å®ç­”æ¡ˆå¾ˆç®€å•ï¼š<strong>è¦å­¦ï¼Œä½†é‡ç‚¹ä¸ä¸€æ ·äº†ã€‚</strong></p>
<h4 data-id="heading-3">ä½ ä¸å¿…å†ç ”ç©¶ï¼š</h4>
<ul>
<li>libuv æ€ä¹ˆè°ƒåº¦äº‹ä»¶</li>
<li>C++ æ’ä»¶æ€ä¹ˆå†™</li>
<li>äº‹ä»¶å¾ªç¯æœ‰å‡ å±‚ phase</li>
</ul>
<h4 data-id="heading-4">ä½†ä½ ä»ç„¶éœ€è¦æ‡‚ï¼š</h4>
<ul>
<li>ESM ä¸‹è·¯å¾„ã€æ–‡ä»¶ç³»ç»Ÿçš„æ­£ç¡®å†™æ³•</li>
<li>æ„å»ºå·¥å…·é…ç½®æ€ä¹ˆå†™</li>
<li>æ’ä»¶æ€ä¹ˆå¼€å‘</li>
</ul>
<p>åŸå› å¾ˆç°å®ï¼š<br/>
å·¥å…·é“¾åº•å±‚å¯ä»¥ç”¨ Rust æˆ– Go å†™ï¼Œä½†ä½ å†™çš„é…ç½®ã€æ’ä»¶ã€è„šæœ¬è¿˜æ˜¯è¦èµ° JavaScriptã€‚</p>
<blockquote>
<p>â€œå·¥å…·åœ¨åŠ é€Ÿï¼Œä½ åœ¨æŠ½è±¡ã€‚â€<br/>
æˆ‘ä»¬å†™çš„ä¸æ˜¯åº•å±‚å¼•æ“ï¼Œè€Œæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯æœªæ¥ã€‚</p>
<hr/>
<h3 data-id="heading-5">Node æ¨¡å—ä¸ä¼šæ¶ˆå¤±ï¼Œä½†ä¼šå˜æˆâ€œå…¼å®¹å±‚â€</h3>
<p>æˆ‘ç›¸ä¿¡æœªæ¥å·¥å…·é“¾ä¼šå‡ºç°ç±»ä¼¼è¿™æ ·çš„ APIï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">import { resolveAlias } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite/utils'</span>;
<span class="hljs-keyword">alias</span>: { <span class="hljs-string">'@'</span>: resolveAlias(<span class="hljs-string">'./src'</span>) }
</code></pre>
<p>ä¸ç”¨å†ç®¡ï¼š</p>
<ul>
<li>æ˜¯ Node åœ¨è¿è¡Œ</li>
<li>è¿˜æ˜¯ Bun</li>
<li>è¿˜æ˜¯ Deno</li>
<li>ç”šè‡³æœªæ¥æ˜¯ä¸æ˜¯æµè§ˆå™¨ç›´æ¥è·‘æ„å»ºå·¥å…·</li>
</ul>
<p>åˆ°é‚£æ—¶ï¼ŒNode.js çš„æ¨¡å—ä¾ç„¶åœ¨ï¼Œä½†å®ƒä¼šæ…¢æ…¢å˜æˆâ€œå¤§å®¶éƒ½æ‡‚çš„åŸºæœ¬ APIâ€ï¼Œå°±åƒäº’è”ç½‘çš„é€šç”¨åè®®ä¸€æ ·ã€‚</p>
<p>ä½ è¦å­¦ Nodeï¼Ÿ<br/>
è¦ï¼Œä½†ä¸éœ€è¦é’»é‚£ä¹ˆæ·±ã€‚</p>
<p>ä½ éœ€è¦çš„æ˜¯å†™å‡º<strong>æ›´é€šç”¨ã€æ›´æ ‡å‡†ã€æ›´ä¸ç»‘å®šè¿è¡Œæ—¶</strong>çš„ä»£ç ã€‚</p>
<hr/>
<h3 data-id="heading-6">Rust é‡å†™çš„æ˜¯å·¥å…·ï¼Œä¸æ˜¯ JavaScript æœ¬èº«</h3>
<p>è¿™å¥çœŸçš„å¾ˆé‡è¦ã€‚<br/>
å·¥å…·é“¾è¢« Rust é‡å†™ï¼Œæ˜¯å› ä¸º JavaScript ä¸é€‚åˆåšâ€œå·¥ç¨‹çº§å¤§å·¥å…·â€ã€‚<br/>
ä½†è¿™ä¸ä»£è¡¨ JS è¦é€€å‡ºèˆå°ã€‚</p>
<p>Rust æ›¿ä»£çš„æ˜¯ï¼š</p>
<ul>
<li>Babel â†’ SWC</li>
<li>Webpack â†’ Rspack / Turbopack</li>
<li>éƒ¨åˆ† CLI å·¥å…· â†’ Rust ç‰ˆæœ¬çš„é«˜é€Ÿå®ç°</li>
</ul>
<p>ä½†çœŸæ­£è·‘ä½ ä¸šåŠ¡ä»£ç çš„ä»ç„¶æ˜¯ï¼š</p>
<ul>
<li>æµè§ˆå™¨é‡Œçš„ V8 / JavaScriptCore</li>
<li>Node.js / Deno / Bun</li>
</ul>
<p><strong>Rust æ˜¯å‘åŠ¨æœºï¼ŒJavaScript æ˜¯ç‡ƒæ–™ã€‚ä¸¤è€…ä¸æ˜¯ç«äº‰å…³ç³»ã€‚</strong></p>
<hr/>
<h3 data-id="heading-7">V8 ä¼šè¢«æŠ›å¼ƒå—ï¼ŸJavaScript å‡­ä»€ä¹ˆè¿˜æ´»å¾—è¿™ä¹ˆæ»‹æ¶¦ï¼Ÿ</h3>
<p>JavaScript çš„ç¡®æœ‰å¾ˆå¤šæ§½ç‚¹ï¼š</p>
<ul>
<li><code>0.1 + 0.2 !== 0.3</code></li>
<li><code>typeof null === 'object'</code></li>
<li>éšå¼è½¬æ¢èƒ½æŠŠäººå¿ƒæ€æå´©</li>
</ul>
<p>ä½†å®ƒæœ‰ä¸€é¡¹åˆ«äººæ‰“ä¸è´¥çš„æŠ€èƒ½ï¼š</p>
<p><strong>æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ JavaScriptã€‚</strong></p>
<p>è¿™å°±æ˜¯â€œç°å®ä¸–ç•Œçš„å‹åˆ¶åŠ›â€ã€‚</p>
<p>è€Œ V8 æ›´ä¸æ˜¯ç®€å•çš„ JS å¼•æ“ï¼Œå®ƒè¿˜æ˜¯ï¼š</p>
<ul>
<li>DOM / Web API çš„å®ç°è€…</li>
<li>WebAssembly çš„å®¿ä¸»</li>
<li>Node.js å’Œ Deno çš„åŸºçŸ³</li>
<li>å‰åç«¯é€šç”¨è¿è¡Œæ—¶çš„åº•å±‚</li>
</ul>
<p>æ‰€ä»¥è¯´ï¼š<br/>
<strong>ä½ å¯ä»¥éª‚ JavaScriptï¼Œä½†ä½ æ²¡æ³•ç»•è¿‡å®ƒã€‚</strong></p>
<p>ç”Ÿæ€çš„åŠ›é‡ä¸æ˜¯æŸç§è¯­è¨€å¯ä»¥è½»æ˜“æ’¼åŠ¨çš„ã€‚</p>
<hr/>
<h3 data-id="heading-8">JavaScript çš„æœªæ¥ï¼šæ­£åœ¨æ‚„æ‚„å˜æˆâ€œå‰ç«¯çš„æ±‡ç¼–è¯­è¨€â€</h3>
<p>ä½ å¯èƒ½å·²ç»æ„Ÿè§‰åˆ°äº†ï¼š</p>
<ul>
<li>ä½ å†™çš„ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šä¾èµ– <strong>TypeScript</strong></li>
<li>UI è¶Šæ¥è¶Šå£°æ˜å¼ï¼ˆVue / Svelte / Reactï¼‰</li>
<li>é‡æ€§èƒ½é€»è¾‘é  <strong>Rust + WASM</strong></li>
<li>æ„å»ºå·¥å…·è‡ªåŠ¨æŠŠä¸€åˆ‡ç¼–è¯‘æˆ JS + WASM</li>
</ul>
<p>ä½ å†™çš„çº¯ JavaScript å¯èƒ½è¶Šæ¥è¶Šå°‘ã€‚</p>
<p>ä½†æ˜¯ JS ä¸ä¼šæ¶ˆå¤±ï¼Œå®ƒä¼šåƒâ€œæµè§ˆå™¨çš„æ±‡ç¼–è¯­è¨€â€ä¸€æ ·é™é™å¾…åœ¨é‚£é‡Œï¼Œä½œä¸ºï¼š</p>
<ul>
<li>è¿è¡Œæ—¶çš„ä¸­é—´å±‚</li>
<li>WASM çš„å®¿ä¸»</li>
<li>TypeScript çš„ç›®æ ‡äº§ç‰©</li>
<li>å·¥å…·é“¾çœŸæ­£è¾“å‡ºçš„è½åœ°ä»£ç </li>
</ul>
<p>å®ƒä¸æ˜¯ä¸»è§’äº†ï¼Œä½†å®ƒå˜å¾—æ›´ç¨³å®šã€æ›´åŸºç¡€ã€æ›´ä¸å¯æ›¿ä»£ã€‚</p>
<hr/>
<h3 data-id="heading-9">ç»“è¯­ï¼šåœ¨æµæ²™ä¹‹ä¸Šå»ºé«˜æ¥¼ï¼Œæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„æµªæ¼«</h3>
<p>å‰ç«¯çš„ä¸–ç•Œåœ°åŸºç¡®å®ä¸ç¨³ï¼š</p>
<ul>
<li>JavaScript çš„å†å²åŒ…è¢±</li>
<li>Node.js çš„å‰²è£‚</li>
<li>æµè§ˆå™¨çš„ç¢ç‰‡åŒ–</li>
<li>å·¥å…·é“¾ä¸€æ¬¡æ¬¡çš„é‡å†™</li>
</ul>
<p>æˆ‘ä»¬ç”¨ TypeScript ä¿®è¡¥ç±»å‹ã€‚<br/>
ç”¨ Rust æå‡æ€§èƒ½ã€‚<br/>
ç”¨ ESM æ‹‰é½è§„èŒƒã€‚<br/>
ç”¨å·¥å…·é“¾æŠŠå¤æ‚æ€§è—åˆ°åœ°æ¿ä¸‹é¢ã€‚</p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å±…ç„¶çœŸæ­£åœ¨è¿™ç‰‡æµæ²™ä¸Šï¼Œå»ºèµ·äº†ä¸€åº§è¶³å¤Ÿåšå›ºçš„æ•°å­—åŸå¸‚ã€‚</p>
<p><strong>åœ°åŸºæˆ‘ä»¬æ²¡æ³•é€‰ï¼Œä½†å»ºç­‘æ–¹å¼æˆ‘ä»¬èƒ½å†³å®šã€‚</strong></p>
<h2 data-id="heading-10"><strong>æœ€åçš„æœ€å</strong></h2>
<p>å¦‚æœçœŸçš„æœ‰ JavaScript å’Œ V8 è¢«å½»åº•æ›¿ä»£çš„ä¸€å¤©ï¼Œé‚£ä¹ˆè¢«æ¨ç¿»çš„å°†è¿œä¸æ­¢å‰ç«¯ç¨‹åºå‘˜çš„å·¥å…·é“¾ï¼Œè€Œæ˜¯æ•´ä¸ªç°ä»£ Web ç”Ÿæ€ï¼šæ•°åäº¿ç½‘ç«™ã€æ•°åƒä¸‡å¼€å‘è€…ã€ä¸Šä¸‡äº¿ç¾å…ƒçš„æ•°å­—åŸºç¡€è®¾æ–½ï¼Œéƒ½å°†éšä¹‹é‡æ„ã€‚</p>
<p>ä½†åˆ°é‚£æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½æ—©å°±â€”â€”<br/>
<strong>ä¸å†ç§°å®ƒä¸ºâ€œWebâ€äº†</strong>ã€‚</p>
<p>æˆ–è®¸æˆ‘ä»¬å·²å…¨é¢è¿›å…¥ç©ºé—´è®¡ç®—ã€ç¥ç»äº¤äº’æˆ–å»ä¸­å¿ƒåŒ–åè®®çš„æ–°èŒƒå¼ï¼›æˆ–è®¸â€œæµè§ˆå™¨â€å·²æˆä¸ºå†å²åè¯ï¼›åˆæˆ–è®¸ï¼Œäººç±»ä¸æœºå™¨çš„äº¤äº’æ–¹å¼æ—©å·²è¶…è¶Šâ€œé¡µé¢â€ä¸â€œè„šæœ¬â€çš„èŒƒç•´ã€‚</p>
<p>åœ¨é‚£ä¸ªæœªæ¥é‡Œï¼ŒJavaScript çš„é€€åœºä¸ä¼šæ˜¯ä¸€åœºé©å‘½ï¼Œè€Œæ˜¯ä¸€æ¬¡é™é»˜çš„è°¢å¹•â€”â€”å¦‚åŒé©¬è½¦æ¶ˆå¤±äºæ±½è½¦æ—¶ä»£ï¼Œä¸æ˜¯è¢«ç¦æ­¢ï¼Œè€Œæ˜¯è¢«è¶…è¶Šã€‚</p>
<p>ä½†åœ¨ä»Šå¤©ï¼Œåœ¨å¯é¢„è§çš„æœªæ¥åå¹´ç”šè‡³äºŒåå¹´ï¼Œ<strong>JavaScript ä»æ˜¯æˆ‘ä»¬å”¯ä¸€å¯è¡Œçš„é€šç”¨è¯­è¨€ï¼ŒV8 ä»æ˜¯è¿™åº§æ•°å­—ä¸–ç•Œæœ€å¯é çš„å¼•æ“</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸å¿…ç­‰å¾…å®Œç¾åœ°åŸºã€‚<br/>
<strong>åœ¨æµæ²™ä¹‹ä¸Šï¼Œç»§ç»­å»ºé€ ã€‚</strong></p>
<blockquote>
<p>ä½ æ€ä¹ˆçœ‹ JavaScript çš„æœªæ¥ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>