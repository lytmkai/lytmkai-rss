<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Java å¼‚æ­¥è°ƒç”¨å¤±è´¥å¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Ÿè¿™ä»½é‡è¯•æœºåˆ¶æ•‘äº†æˆ‘]]></title>    <link>https://juejin.cn/post/7594322573453033515</link>    <guid>https://juejin.cn/post/7594322573453033515</guid>    <pubDate>2026-01-13T01:17:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573453033515" data-draft-id="7583910418658295854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java å¼‚æ­¥è°ƒç”¨å¤±è´¥å¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Ÿè¿™ä»½é‡è¯•æœºåˆ¶æ•‘äº†æˆ‘"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-13T01:17:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java å¼‚æ­¥è°ƒç”¨å¤±è´¥å¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Ÿè¿™ä»½é‡è¯•æœºåˆ¶æ•‘äº†æˆ‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:17:59.000Z" title="Tue Jan 13 2026 01:17:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å¼‚æ­¥ç¼–ç¨‹ä»‹ç»</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹</h3>
<p>å¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ç§éé˜»å¡çš„ç¼–ç¨‹æ¨¡å¼ï¼Œå…è®¸ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®Œæˆæ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰å¾…ã€‚</p>
<p>å½“æ“ä½œå®Œæˆåï¼Œé€šè¿‡å›è°ƒå‡½æ•°ã€Future æˆ–äº‹ä»¶é€šçŸ¥ç­‰æ–¹å¼è·å–ç»“æœã€‚</p>
<p><strong>åŒæ­¥ vs å¼‚æ­¥å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><strong>åŒæ­¥</strong>ï¼šé¡ºåºæ‰§è¡Œï¼Œæ¯ä¸€æ­¥å¿…é¡»ç­‰å¾…å‰ä¸€æ­¥å®Œæˆ</li>
<li><strong>å¼‚æ­¥</strong>ï¼šéé˜»å¡æ‰§è¡Œï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡</li>
</ul>
<h3 data-id="heading-2">Java ä¸­çš„å¼‚æ­¥å®ç°æ–¹å¼</h3>
<h4 data-id="heading-3">1. CompletableFuture (Java 8+)</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</span>
CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
    <span class="hljs-keyword">try</span> {
        Thread.sleep(<span class="hljs-number">1000</span>);
    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"å¼‚æ­¥ä»»åŠ¡ç»“æœ"</span>;
});

<span class="hljs-comment">// å¤„ç†ç»“æœ</span>
future.thenAccept(result -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result));
</code></pre>
<h4 data-id="heading-4">2. @Async æ³¨è§£ (Spring Framework)</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncService</span> {
    
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">asyncMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"æ‰§è¡Œç»“æœ"</span>);
    }
}
</code></pre>
<h4 data-id="heading-5">3. å›è°ƒå‡½æ•°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callback</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(String result)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Exception e)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">asyncOperation</span><span class="hljs-params">(Callback callback)</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ¨¡æ‹Ÿæ“ä½œ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> doSomething();
            callback.onSuccess(result);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            callback.onError(e);
        }
    }).start();
}
</code></pre>
<h2 data-id="heading-6">2.å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å¸¸è§é”™è¯¯</h2>
<h3 data-id="heading-7">2.1 ç½‘ç»œç›¸å…³é”™è¯¯</h3>
<ul>
<li>è¿æ¥è¶…æ—¶</li>
<li>è¯»å–è¶…æ—¶</li>
<li>DNS è§£æå¤±è´¥</li>
<li>ç½‘ç»œä¸å¯è¾¾</li>
</ul>
<h3 data-id="heading-8">2.2 èµ„æºç›¸å…³é”™è¯¯</h3>
<ul>
<li>å†…å­˜ä¸è¶³</li>
<li>çº¿ç¨‹æ± è€—å°½</li>
<li>æ•°æ®åº“è¿æ¥è¶…æ—¶</li>
</ul>
<h3 data-id="heading-9">2.3 ä¸šåŠ¡é€»è¾‘é”™è¯¯</h3>
<ul>
<li>è¿œç¨‹æœåŠ¡è¿”å›é”™è¯¯ç </li>
<li>æ•°æ®æ ¼å¼å¼‚å¸¸</li>
<li>ä¸šåŠ¡è§„åˆ™æ ¡éªŒå¤±è´¥</li>
</ul>
<h3 data-id="heading-10">2.4 ç¤ºä¾‹ï¼šå¯èƒ½å‡ºé”™çš„å¼‚æ­¥æ–¹æ³•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnreliableService</span> {
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸å¯é çš„è¿œç¨‹æœåŠ¡è°ƒç”¨</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">callExternalService</span><span class="hljs-params">(String data)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿéšæœºé”™è¯¯</span>
            <span class="hljs-type">double</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> Math.random();
            <span class="hljs-keyword">if</span> (random &lt; <span class="hljs-number">0.3</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç½‘ç»œè¶…æ—¶"</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (random &lt; <span class="hljs-number">0.6</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æœåŠ¡ç«¯é”™è¯¯"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"å¤„ç†ç»“æœ: "</span> + data;
        });
    }
}
</code></pre>
<h2 data-id="heading-11">3. å¼‚æ­¥é‡è¯•æœºåˆ¶å®ç°</h2>
<h3 data-id="heading-12">3.1 æ‰‹åŠ¨é‡è¯•å®ç°</h3>
<h4 data-id="heading-13">3.1.1 åŸºç¡€é‡è¯•é€»è¾‘</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleRetry</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">retryAsync</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task, 
            <span class="hljs-type">int</span> maxAttempts, 
            <span class="hljs-type">long</span> delayMs)</span> {
        
        CompletableFuture&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>&lt;&gt;();
        retryAsync(task, maxAttempts, delayMs, <span class="hljs-number">1</span>, result);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">retryAsync</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task, 
            <span class="hljs-type">int</span> maxAttempts, 
            <span class="hljs-type">long</span> delayMs, 
            <span class="hljs-type">int</span> attempt, 
            CompletableFuture&lt;T&gt; result)</span> {
        
        task.get().whenComplete((response, throwable) -&gt; {
            <span class="hljs-keyword">if</span> (throwable == <span class="hljs-literal">null</span>) {
                result.complete(response);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (attempt &gt;= maxAttempts) {
                result.completeExceptionally(throwable);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å»¶è¿Ÿåé‡è¯•</span>
                CompletableFuture.delayedExecutor(delayMs, TimeUnit.MILLISECONDS)
                    .execute(() -&gt; retryAsync(task, maxAttempts, delayMs, attempt + <span class="hljs-number">1</span>, result));
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-14">3.2 ä½¿ç”¨ Spring Retry</h3>
<h4 data-id="heading-15">3.2.1 æ·»åŠ ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.retry<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-retry<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-16">3.2.2 é…ç½®é‡è¯•æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableRetry</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RetryTemplate <span class="hljs-title function_">retryTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RetryTemplate</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryTemplate</span>();
        
        <span class="hljs-comment">// é‡è¯•ç­–ç•¥ï¼šæœ€å¤šé‡è¯•3æ¬¡ï¼Œé‡åˆ°ç‰¹å®šå¼‚å¸¸æ—¶é‡è¯•</span>
        <span class="hljs-type">SimpleRetryPolicy</span> <span class="hljs-variable">retryPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRetryPolicy</span>(<span class="hljs-number">3</span>, 
            Collections.singletonMap(RuntimeException.class, <span class="hljs-literal">true</span>));
        template.setRetryPolicy(retryPolicy);
        
        <span class="hljs-comment">// é€€é¿ç­–ç•¥ï¼šæ¯æ¬¡é‡è¯•é—´éš”1ç§’</span>
        <span class="hljs-type">FixedBackOffPolicy</span> <span class="hljs-variable">backOffPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FixedBackOffPolicy</span>();
        backOffPolicy.setBackOffPeriod(<span class="hljs-number">1000</span>);
        template.setBackOffPolicy(backOffPolicy);
        
        <span class="hljs-keyword">return</span> template;
    }
}
</code></pre>
<h4 data-id="heading-17">3.2.3 ä½¿ç”¨ @Retryable æ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryableService</span> {
    
    <span class="hljs-meta">@Retryable(
        value = {RuntimeException.class},
        maxAttempts = 3,
        backoff = @Backoff(delay = 1000)
    )</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">retryableAsyncMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
            <span class="hljs-keyword">if</span> (Math.random() &lt; <span class="hljs-number">0.7</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¸´æ—¶é”™è¯¯"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æˆåŠŸç»“æœ"</span>;
        });
    }
    
    <span class="hljs-meta">@Recover</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">recover</span><span class="hljs-params">(RuntimeException e)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"é™çº§ç»“æœ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-18">3.3 é«˜çº§é‡è¯•ç­–ç•¥å®ç°</h3>
<h4 data-id="heading-19">3.3.1 æŒ‡æ•°é€€é¿é‡è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExponentialBackoffRetry</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">retryWithExponentialBackoff</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task,
            <span class="hljs-type">int</span> maxAttempts,
            <span class="hljs-type">long</span> initialDelay,
            <span class="hljs-type">long</span> maxDelay)</span> {
        
        <span class="hljs-keyword">return</span> retryWithExponentialBackoff(task, maxAttempts, initialDelay, maxDelay, <span class="hljs-number">1</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">retryWithExponentialBackoff</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task,
            <span class="hljs-type">int</span> maxAttempts,
            <span class="hljs-type">long</span> initialDelay,
            <span class="hljs-type">long</span> maxDelay,
            <span class="hljs-type">int</span> attempt)</span> {
        
        CompletableFuture&lt;T&gt; future = task.get();
        
        <span class="hljs-keyword">if</span> (attempt &gt;= maxAttempts) {
            <span class="hljs-keyword">return</span> future;
        }
        
        <span class="hljs-keyword">return</span> future.handle((result, throwable) -&gt; {
            <span class="hljs-keyword">if</span> (throwable == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(result);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// è®¡ç®—é€€é¿æ—¶é—´</span>
                <span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> Math.min(maxDelay, initialDelay * (<span class="hljs-type">long</span>) Math.pow(<span class="hljs-number">2</span>, attempt - <span class="hljs-number">1</span>));
                
                <span class="hljs-comment">// æ·»åŠ éšæœºæŠ–åŠ¨é¿å…æƒŠç¾¤æ•ˆåº”</span>
                delay = (<span class="hljs-type">long</span>) (delay * (<span class="hljs-number">0.5</span> + Math.random()));
                
                CompletableFuture&lt;T&gt; nextAttempt = CompletableFuture
                    .delayedExecutor(delay, TimeUnit.MILLISECONDS)
                    .supplyAsync(() -&gt; 
                        retryWithExponentialBackoff(task, maxAttempts, initialDelay, maxDelay, attempt + <span class="hljs-number">1</span>)
                    )
                    .thenCompose(cf -&gt; cf);
                
                <span class="hljs-keyword">return</span> nextAttempt;
            }
        }).thenCompose(cf -&gt; cf);
    }
}
</code></pre>
<h4 data-id="heading-20">3.3.2 åŸºäºæ¡ä»¶çš„é‡è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConditionalRetry</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">retryWithCondition</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task,
            Predicate&lt;Throwable&gt; shouldRetry,
            <span class="hljs-type">int</span> maxAttempts,
            Function&lt;Integer, Long&gt; delayCalculator)</span> {
        
        CompletableFuture&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>&lt;&gt;();
        retryWithCondition(task, shouldRetry, maxAttempts, delayCalculator, <span class="hljs-number">1</span>, result);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">retryWithCondition</span><span class="hljs-params">(
            Supplier&lt;CompletableFuture&lt;T&gt;&gt; task,
            Predicate&lt;Throwable&gt; shouldRetry,
            <span class="hljs-type">int</span> maxAttempts,
            Function&lt;Integer, Long&gt; delayCalculator,
            <span class="hljs-type">int</span> attempt,
            CompletableFuture&lt;T&gt; result)</span> {
        
        task.get().whenComplete((response, throwable) -&gt; {
            <span class="hljs-keyword">if</span> (throwable == <span class="hljs-literal">null</span>) {
                result.complete(response);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">canRetry</span> <span class="hljs-operator">=</span> attempt &lt; maxAttempts &amp;&amp; shouldRetry.test(throwable);
            
            <span class="hljs-keyword">if</span> (!canRetry) {
                result.completeExceptionally(throwable);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> delayCalculator.apply(attempt);
            CompletableFuture.delayedExecutor(delay, TimeUnit.MILLISECONDS)
                .execute(() -&gt; 
                    retryWithCondition(task, shouldRetry, maxAttempts, delayCalculator, attempt + <span class="hljs-number">1</span>, result)
                );
        });
    }
}
</code></pre>
<h3 data-id="heading-21">3.4 å®Œæ•´çš„é‡è¯•å·¥å…·ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncRetryUtil</span> {
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥é‡è¯•æ‰§è¡Œå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncRetryBuilder</span>&lt;T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Supplier&lt;CompletableFuture&lt;T&gt;&gt; task;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxAttempts</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
        <span class="hljs-keyword">private</span> Predicate&lt;Throwable&gt; retryCondition = ex -&gt; <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">private</span> Function&lt;Integer, Long&gt; delayStrategy = attempt -&gt; <span class="hljs-number">1000L</span> * attempt;
        <span class="hljs-keyword">private</span> Consumer&lt;Integer&gt; onRetry = attempt -&gt; {};
        <span class="hljs-keyword">private</span> Function&lt;Throwable, T&gt; fallback = <span class="hljs-literal">null</span>;
        
        <span class="hljs-keyword">private</span> <span class="hljs-title function_">AsyncRetryBuilder</span><span class="hljs-params">(Supplier&lt;CompletableFuture&lt;T&gt;&gt; task)</span> {
            <span class="hljs-built_in">this</span>.task = task;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">of</span><span class="hljs-params">(Supplier&lt;CompletableFuture&lt;T&gt;&gt; task)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncRetryBuilder</span>&lt;&gt;(task);
        }
        
        <span class="hljs-keyword">public</span> AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">maxAttempts</span><span class="hljs-params">(<span class="hljs-type">int</span> maxAttempts)</span> {
            <span class="hljs-built_in">this</span>.maxAttempts = maxAttempts;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">retryIf</span><span class="hljs-params">(Predicate&lt;Throwable&gt; condition)</span> {
            <span class="hljs-built_in">this</span>.retryCondition = condition;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">delayStrategy</span><span class="hljs-params">(Function&lt;Integer, Long&gt; strategy)</span> {
            <span class="hljs-built_in">this</span>.delayStrategy = strategy;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">onRetry</span><span class="hljs-params">(Consumer&lt;Integer&gt; callback)</span> {
            <span class="hljs-built_in">this</span>.onRetry = callback;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> AsyncRetryBuilder&lt;T&gt; <span class="hljs-title function_">fallback</span><span class="hljs-params">(Function&lt;Throwable, T&gt; fallback)</span> {
            <span class="hljs-built_in">this</span>.fallback = fallback;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> CompletableFuture&lt;T&gt; <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {
            CompletableFuture&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>&lt;&gt;();
            execute(<span class="hljs-number">1</span>, result);
            <span class="hljs-keyword">return</span> result;
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(<span class="hljs-type">int</span> attempt, CompletableFuture&lt;T&gt; result)</span> {
            task.get().whenComplete((response, throwable) -&gt; {
                <span class="hljs-keyword">if</span> (throwable == <span class="hljs-literal">null</span>) {
                    result.complete(response);
                    <span class="hljs-keyword">return</span>;
                }
                
                <span class="hljs-type">boolean</span> <span class="hljs-variable">shouldRetry</span> <span class="hljs-operator">=</span> attempt &lt; maxAttempts &amp;&amp; retryCondition.test(throwable);
                
                <span class="hljs-keyword">if</span> (!shouldRetry) {
                    <span class="hljs-keyword">if</span> (fallback != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-type">T</span> <span class="hljs-variable">fallbackResult</span> <span class="hljs-operator">=</span> fallback.apply(throwable);
                            result.complete(fallbackResult);
                        } <span class="hljs-keyword">catch</span> (Exception e) {
                            result.completeExceptionally(e);
                        }
                    } <span class="hljs-keyword">else</span> {
                        result.completeExceptionally(throwable);
                    }
                    <span class="hljs-keyword">return</span>;
                }
                
                onRetry.accept(attempt);
                <span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> delayStrategy.apply(attempt);
                
                CompletableFuture.delayedExecutor(delay, TimeUnit.MILLISECONDS)
                    .execute(() -&gt; execute(attempt + <span class="hljs-number">1</span>, result));
            });
        }
    }
}
</code></pre>
<h3 data-id="heading-22">3.5 ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸å¯é çš„æœåŠ¡</span>
        Supplier&lt;CompletableFuture&lt;String&gt;&gt; unreliableService = () -&gt; 
            CompletableFuture.supplyAsync(() -&gt; {
                <span class="hljs-type">double</span> <span class="hljs-variable">rand</span> <span class="hljs-operator">=</span> Math.random();
                <span class="hljs-keyword">if</span> (rand &lt; <span class="hljs-number">0.8</span>) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-string">"æœåŠ¡è°ƒç”¨æˆåŠŸ"</span>;
            });
        
        <span class="hljs-comment">// ä½¿ç”¨é‡è¯•å·¥å…·</span>
        CompletableFuture&lt;String&gt; result = AsyncRetryUtil.AsyncRetryBuilder
            .of(unreliableService)
            .maxAttempts(<span class="hljs-number">5</span>)
            .retryIf(ex -&gt; ex.getMessage().contains(<span class="hljs-string">"æš‚æ—¶ä¸å¯ç”¨"</span>))
            .delayStrategy(attempt -&gt; <span class="hljs-number">1000L</span> * attempt) <span class="hljs-comment">// çº¿æ€§é€€é¿</span>
            .onRetry(attempt -&gt; 
                System.out.println(<span class="hljs-string">"ç¬¬ "</span> + attempt + <span class="hljs-string">" æ¬¡é‡è¯•..."</span>))
            .fallback(ex -&gt; <span class="hljs-string">"é™çº§ç»“æœ"</span>)
            .execute();
        
        result.whenComplete((response, error) -&gt; {
            <span class="hljs-keyword">if</span> (error != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage());
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"æœ€ç»ˆç»“æœ: "</span> + response);
            }
        });
        
        <span class="hljs-comment">// ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</span>
        Thread.sleep(<span class="hljs-number">10000</span>);
    }
}
</code></pre>
<h2 data-id="heading-23">4. æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-24">4.1 é‡è¯•ç­–ç•¥é€‰æ‹©</h3>
<ul>
<li><strong>ç½‘ç»œè¶…æ—¶</strong>ï¼šä½¿ç”¨æŒ‡æ•°é€€é¿ + éšæœºæŠ–åŠ¨</li>
<li><strong>æœåŠ¡é™æµ</strong>ï¼šæ ¹æ®è¿”å›çš„ç­‰å¾…æ—¶é—´é‡è¯•</li>
<li><strong>ä¸šåŠ¡é”™è¯¯</strong>ï¼šæ ¹æ®å…·ä½“é”™è¯¯ç å†³å®šæ˜¯å¦é‡è¯•</li>
</ul>
<h3 data-id="heading-25">4.2 é¿å…çš„é—®é¢˜</h3>
<ol>
<li><strong>æ— é™é‡è¯•</strong>ï¼šè®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°</li>
<li><strong>èµ„æºè€—å°½</strong>ï¼šåˆç†æ§åˆ¶é‡è¯•é¢‘ç‡</li>
<li><strong>é›ªå´©æ•ˆåº”</strong>ï¼šä½¿ç”¨æ–­è·¯å™¨æ¨¡å¼é…åˆé‡è¯•</li>
<li><strong>é‡å¤æ“ä½œ</strong>ï¼šç¡®ä¿æ“ä½œçš„å¹‚ç­‰æ€§</li>
</ol>
<h3 data-id="heading-26">4.3 ç›‘æ§å’Œæ—¥å¿—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ·»åŠ é‡è¯•ç›‘æ§</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryMonitor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MeterRegistry</span> <span class="hljs-variable">meterRegistry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleMeterRegistry</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordRetry</span><span class="hljs-params">(String operation, <span class="hljs-type">int</span> attempt)</span> {
        Counter.builder(<span class="hljs-string">"retry.attempts"</span>)
            .tag(<span class="hljs-string">"operation"</span>, operation)
            .register(meterRegistry)
            .increment();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordSuccess</span><span class="hljs-params">(String operation, <span class="hljs-type">long</span> duration)</span> {
        Timer.builder(<span class="hljs-string">"retry.duration"</span>)
            .tag(<span class="hljs-string">"operation"</span>, operation)
            .tag(<span class="hljs-string">"status"</span>, <span class="hljs-string">"success"</span>)
            .register(meterRegistry)
            .record(duration, TimeUnit.MILLISECONDS);
    }
}
</code></pre>
<p>å…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„é‡è¯•ç­–ç•¥ï¼Œæé«˜ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›å’Œç¨³å®šæ€§ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-27">ğŸ“Œå¾€æœŸå†…å®¹</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FUqzEppE_f8gdil6S-toBTg" target="_blank" title="https://mp.weixin.qq.com/s/UqzEppE_f8gdil6S-toBTg" ref="nofollow noopener noreferrer">å†™å‰ç«¯ä¹…äº†ï¼Œæˆ‘ç”¨ Node.js ç»™è‡ªå·±é€ äº†å‡ ä¸ªçœåŠ›å°å·¥å…·</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FF4JkmYxUs9RAtsti6V1uhg" target="_blank" title="https://mp.weixin.qq.com/s/F4JkmYxUs9RAtsti6V1uhg" ref="nofollow noopener noreferrer">æˆ‘ä¹Ÿæ˜¯å†™äº†å¾ˆä¹… TypeScriptï¼Œæ‰æ„è¯†åˆ°è¿™äº›å†™æ³•ä¸å¯¹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F2wHCiqgtRfK_008fLBamPQ" target="_blank" title="https://mp.weixin.qq.com/s/2wHCiqgtRfK_008fLBamPQ" ref="nofollow noopener noreferrer">ThreadLocal åœ¨å®é™…é¡¹ç›®ä¸­çš„ 6 å¤§ç”¨æ³•ï¼ŒåŸæ¥å¯ä»¥è¿™ä¹ˆç®€å•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsMAKhSLNvmU1ddxg0yv9Fg" target="_blank" title="https://mp.weixin.qq.com/s/sMAKhSLNvmU1ddxg0yv9Fg" ref="nofollow noopener noreferrer">é‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[python win32COM å¯¹è±¡ä»‹ç»è°ƒç”¨Wordã€WPS ä¸åº”ç”¨ç”Ÿæ€]]></title>    <link>https://juejin.cn/post/7594785614177239080</link>    <guid>https://juejin.cn/post/7594785614177239080</guid>    <pubDate>2026-01-14T06:47:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594785614177239080" data-draft-id="7594745643893063715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="python win32COM å¯¹è±¡ä»‹ç»è°ƒç”¨Wordã€WPS ä¸åº”ç”¨ç”Ÿæ€"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-14T06:47:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="redæ¶¦"/> <meta itemprop="url" content="https://juejin.cn/user/372051848729127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            python win32COM å¯¹è±¡ä»‹ç»è°ƒç”¨Wordã€WPS ä¸åº”ç”¨ç”Ÿæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/372051848729127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    redæ¶¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T06:47:52.000Z" title="Wed Jan 14 2026 06:47:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">python win32COM å¯¹è±¡ä»‹ç»è°ƒç”¨Wordã€WPS ä¸åº”ç”¨ç”Ÿæ€</h2>
<blockquote>
<p>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°å„ç§åŠå…¬è½¯ä»¶ï¼Œä½†ä½ æ˜¯å¦æƒ³è¿‡è¿™äº›è½¯ä»¶æ˜¯å¦‚ä½•è¢«ç¨‹åºè°ƒç”¨çš„ï¼Ÿ</p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨<strong>python</strong>è¯­è¨€ä½œä¸ºç¤ºä¾‹</p>
</blockquote>
<h3 data-id="heading-1">com å¯¹ç…§æ ‡è¯†ç¬¦</h3>
<pre><code class="hljs language-makefile" lang="makefile">office_apps = {
 Â  Â <span class="hljs-comment"># Microsoft Office</span>
 Â  Â <span class="hljs-string">"Word.Application"</span>: <span class="hljs-string">"Microsoft Word"</span>,
 Â  Â <span class="hljs-string">"Excel.Application"</span>: <span class="hljs-string">"Microsoft Excel"</span>, 
 Â  Â <span class="hljs-string">"PowerPoint.Application"</span>: <span class="hljs-string">"Microsoft PowerPoint"</span>,
 Â  Â <span class="hljs-string">"Outlook.Application"</span>: <span class="hljs-string">"Microsoft Outlook"</span>,
 Â  Â 
 Â  Â <span class="hljs-comment"># WPS Office</span>
 Â  Â <span class="hljs-string">"wps.Application"</span>: <span class="hljs-string">"WPS Office (æ–°ç‰ˆ)"</span>,
 Â  Â <span class="hljs-string">"Kwps.Application"</span>: <span class="hljs-string">"WPS æ–‡å­—"</span>,
 Â  Â <span class="hljs-string">"Kwpp.Application"</span>: <span class="hljs-string">"WPS æ¼”ç¤º"</span>, 
 Â  Â <span class="hljs-string">"Ket.Application"</span>: <span class="hljs-string">"WPS è¡¨æ ¼"</span>,
 Â  Â 
 Â  Â <span class="hljs-comment"># å…¶ä»–åŠå…¬è½¯ä»¶</span>
 Â  Â <span class="hljs-string">"Photoshop.Application"</span>: <span class="hljs-string">"Adobe Photoshop"</span>,
 Â  Â <span class="hljs-string">"AcroExch.App"</span>: <span class="hljs-string">"Adobe Acrobat"</span>,
}
</code></pre>
<p>ä¸Šé¢æ˜¯ä¸€ä¸ªåŠå…¬è½¯ä»¶çš„â€œåœ°å›¾â€ï¼Œè¿™äº›æ˜¯ <strong>Windows</strong> å¹³å°ä¸ŠåŠå…¬è½¯ä»¶çš„ COM æ¥å£æ ‡è¯†ç¬¦ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ COMï¼Ÿ</h3>
<p>COMï¼ˆComponent Object Modelï¼Œç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯å¾®è½¯åœ¨ 1990 å¹´ä»£å¼€å‘çš„ä¸€ç§äºŒè¿›åˆ¶æ¥å£æ ‡å‡†ã€‚å®ƒå…è®¸ä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™çš„è½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡ã€‚ç®€å•æ¥è¯´ï¼ŒCOM è®©ç¨‹åºå¯ä»¥é€šè¿‡ä¸€ä¸ªâ€œä»£å·â€<strong>è°ƒç”¨å…¶ä»–è½¯ä»¶çš„åŠŸèƒ½</strong>ã€‚</p>
<h3 data-id="heading-3">åŠå…¬è½¯ä»¶</h3>
<h4 data-id="heading-4">1. å¾®è½¯ Office å®¶æ—</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-string">"Word.Application"</span>: <span class="hljs-string">"Microsoft Word"</span> Â  Â  Â  Â   <span class="hljs-comment"># æ–‡å­—å¤„ç†</span>
<span class="hljs-string">"Excel.Application"</span>: <span class="hljs-string">"Microsoft Excel"</span> Â  Â  Â   <span class="hljs-comment"># ç”µå­è¡¨æ ¼</span>
<span class="hljs-string">"PowerPoint.Application"</span>: <span class="hljs-string">"Microsoft PowerPoint"</span>  <span class="hljs-comment"># æ¼”ç¤ºæ–‡ç¨¿</span>
<span class="hljs-string">"Outlook.Application"</span>: <span class="hljs-string">"Microsoft Outlook"</span> Â   <span class="hljs-comment"># é‚®ä»¶ç®¡ç†</span>
</code></pre>
<p>å¾®è½¯ Office æ˜¯æœ€ç»å…¸çš„åŠå…¬å¥—ä»¶ï¼Œå®ƒçš„ COM æ¥å£å‘½åæœ€ä¸ºè§„èŒƒï¼š</p>
<ul>
<li>æ¯ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ Application å¯¹è±¡</li>
<li>å‘½åç›´æ¥æ˜äº†ï¼š<code>è½¯ä»¶å.Application</code></li>
<li>æä¾›äº†æœ€å®Œæ•´çš„ç¼–ç¨‹æ¥å£</li>
</ul>
<p><strong>æœ‰è¶£çš„äº‹å®</strong>ï¼šé€šè¿‡ COM æ¥å£ï¼Œä½ å¯ä»¥ç”¨ <strong>Python</strong>ç­‰ è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Šã€å¤„ç†æ•°æ®ã€åˆ¶ä½œ PPTï¼Œå®ç°åŠå…¬è‡ªåŠ¨åŒ–ã€‚</p>
<h4 data-id="heading-5">2. é‡‘å±± WPS å®¶æ—</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-string">"wps.Application"</span>: <span class="hljs-string">"WPS Office (æ–°ç‰ˆ)"</span>, Â  Â  Â  <span class="hljs-comment"># ç»Ÿä¸€å…¥å£</span>
<span class="hljs-string">"Kwps.Application"</span>: <span class="hljs-string">"WPS æ–‡å­—"</span>, Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æ–‡å­—å¤„ç†</span>
<span class="hljs-string">"Kwpp.Application"</span>: <span class="hljs-string">"WPS æ¼”ç¤º"</span>, Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># æ¼”ç¤ºæ–‡ç¨¿</span>
<span class="hljs-string">"Ket.Application"</span>: <span class="hljs-string">"WPS è¡¨æ ¼"</span> Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># ç”µå­è¡¨æ ¼</span>
</code></pre>
<p>WPS çš„å‘½åè§„åˆ™å¾ˆæœ‰æ„æ€ï¼š</p>
<ul>
<li><strong>K</strong> ä»£è¡¨é‡‘å±±ï¼ˆKingsoftï¼‰</li>
<li><strong>wps</strong> æ˜¯æ ¸å¿ƒåº”ç”¨</li>
<li><strong>wpp</strong> å¯¹åº” PowerPoint</li>
<li><strong>ket</strong> å¯¹åº” Excel</li>
</ul>
<p>WPS æä¾›äº†ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š</p>
<ul>
<li>ç»Ÿä¸€æ¥å£ï¼š<code>wps.Application</code>ï¼ˆæ–°ç‰ˆæœ¬ï¼‰</li>
<li>ç‹¬ç«‹åº”ç”¨ï¼šåˆ†åˆ«è°ƒç”¨æ–‡å­—ã€æ¼”ç¤ºã€è¡¨æ ¼</li>
</ul>
<p><strong>ç‰ˆæœ¬æ¼”å˜</strong>ï¼šä»ç‹¬ç«‹çš„ <code>Kwps</code>ã€<code>Kwpp</code>ã€<code>Ket</code>åˆ°ç»Ÿä¸€çš„ <code>wps.Application</code>ã€‚</p>
<h4 data-id="heading-6">3. Adobe ä¸“ä¸šå·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-string">"Photoshop.Application"</span>: <span class="hljs-string">"Adobe Photoshop"</span> Â   <span class="hljs-comment"># å›¾åƒå¤„ç†</span>
<span class="hljs-string">"AcroExch.App"</span>: <span class="hljs-string">"Adobe Acrobat"</span> Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># PDF å¤„ç†</span>
</code></pre>
<p>Adobe ç³»åˆ—æ˜¯è®¾è®¡é¢†åŸŸçš„æ ‡æ†ï¼š</p>
<ul>
<li>Photoshop çš„æ¥å£ç›¸å¯¹ç‹¬ç«‹</li>
<li>Acrobat ä½¿ç”¨çš„æ˜¯ <code>AcroExch.App</code>è¿™ä¸ªç‰¹æ®Šçš„åå­—</li>
<li>ä¸»è¦ç”¨äºä¸“ä¸šè®¾è®¡ã€PDF å¤„ç†ç­‰åœºæ™¯</li>
</ul>
<h3 data-id="heading-7">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-8">è‡ªåŠ¨åŒ–åŠå…¬</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> win32com.client
â€‹
<span class="hljs-comment"># è‡ªåŠ¨ç”Ÿæˆ Word æŠ¥å‘Š</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_report</span>():
 Â  Â <span class="hljs-comment"># å°è¯• WPSï¼Œå¤±è´¥åˆ™ç”¨ Word</span>
 Â  Â <span class="hljs-keyword">for</span> app_name <span class="hljs-keyword">in</span> [<span class="hljs-string">"wps.Application"</span>, <span class="hljs-string">"Kwps.Application"</span>, <span class="hljs-string">"Word.Application"</span>]:
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â word = win32com.client.Dispatch(app_name)
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨: <span class="hljs-subst">{app_name}</span>"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â  Â <span class="hljs-keyword">except</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">continue</span>
 Â  Â 
 Â  Â doc = word.Documents.Add()
 Â  Â <span class="hljs-comment"># ... æ·»åŠ å†…å®¹ã€æ ¼å¼ã€å›¾è¡¨ ...</span>
 Â  Â doc.SaveAs(<span class="hljs-string">"æœˆæŠ¥.docx"</span>)
 Â  Â word.Quit()
</code></pre>
<h4 data-id="heading-9">æ‰¹é‡æ–‡æ¡£è½¬æ¢</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_docs_to_pdf</span>(<span class="hljs-params">input_folder, output_folder</span>):
 Â  Â <span class="hljs-string">"""æ‰¹é‡å°†æ–‡æ¡£è½¬æ¢ä¸º PDF"""</span>
 Â  Â <span class="hljs-keyword">import</span> os
 Â  Â 
 Â  Â <span class="hljs-comment"># æ£€æµ‹å¯ç”¨åº”ç”¨</span>
 Â  Â <span class="hljs-keyword">for</span> app_id <span class="hljs-keyword">in</span> [<span class="hljs-string">"wps.Application"</span>, <span class="hljs-string">"Word.Application"</span>]:
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â app = win32com.client.Dispatch(app_id)
 Â  Â  Â  Â  Â  Â app.Visible = <span class="hljs-literal">False</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â  Â <span class="hljs-keyword">except</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">continue</span>
 Â  Â 
 Â  Â <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> os.listdir(input_folder):
 Â  Â  Â  Â <span class="hljs-keyword">if</span> file.endswith((<span class="hljs-string">'.doc'</span>, <span class="hljs-string">'.docx'</span>)):
 Â  Â  Â  Â  Â  Â doc_path = os.path.join(input_folder, file)
 Â  Â  Â  Â  Â  Â pdf_path = os.path.join(output_folder, file.replace(<span class="hljs-string">'.docx'</span>, <span class="hljs-string">'.pdf'</span>))
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â doc = app.Documents.Open(doc_path)
 Â  Â  Â  Â  Â  Â doc.ExportAsFixedFormat(pdf_path, <span class="hljs-number">17</span>) Â <span class="hljs-comment"># 17 è¡¨ç¤º PDF</span>
 Â  Â  Â  Â  Â  Â doc.Close()
 Â  Â 
 Â  Â app.Quit()
</code></pre>
<h4 data-id="heading-10">æ™ºèƒ½åº”ç”¨æ£€æµ‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_office_software</span>():
 Â  Â <span class="hljs-string">"""æ£€æµ‹ç³»ç»Ÿå®‰è£…çš„åŠå…¬è½¯ä»¶"""</span>
 Â  Â results = {
 Â  Â  Â  Â <span class="hljs-string">"microsoft_office"</span>: [],
 Â  Â  Â  Â <span class="hljs-string">"wps_office"</span>: [],
 Â  Â  Â  Â <span class="hljs-string">"adobe"</span>: []
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">for</span> prog_id, app_name <span class="hljs-keyword">in</span> office_apps.items():
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â app = win32com.client.Dispatch(prog_id)
 Â  Â  Â  Â  Â  Â version = <span class="hljs-built_in">getattr</span>(app, <span class="hljs-string">"Version"</span>, <span class="hljs-string">"æœªçŸ¥"</span>)
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-string">"Word"</span> <span class="hljs-keyword">in</span> app_name <span class="hljs-keyword">or</span> <span class="hljs-string">"Excel"</span> <span class="hljs-keyword">in</span> app_name <span class="hljs-keyword">or</span> <span class="hljs-string">"PowerPoint"</span> <span class="hljs-keyword">in</span> app_name:
 Â  Â  Â  Â  Â  Â  Â  Â results[<span class="hljs-string">"microsoft_office"</span>].append(<span class="hljs-string">f"<span class="hljs-subst">{app_name}</span> (v<span class="hljs-subst">{version}</span>)"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">elif</span> <span class="hljs-string">"WPS"</span> <span class="hljs-keyword">in</span> app_name:
 Â  Â  Â  Â  Â  Â  Â  Â results[<span class="hljs-string">"wps_office"</span>].append(<span class="hljs-string">f"<span class="hljs-subst">{app_name}</span> (v<span class="hljs-subst">{version}</span>)"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">elif</span> <span class="hljs-string">"Photoshop"</span> <span class="hljs-keyword">in</span> app_name <span class="hljs-keyword">or</span> <span class="hljs-string">"Acrobat"</span> <span class="hljs-keyword">in</span> app_name:
 Â  Â  Â  Â  Â  Â  Â  Â results[<span class="hljs-string">"adobe"</span>].append(<span class="hljs-string">f"<span class="hljs-subst">{app_name}</span> (v<span class="hljs-subst">{version}</span>)"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â app.Quit()
 Â  Â  Â  Â <span class="hljs-keyword">except</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">continue</span>
 Â  Â 
 Â  Â <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-11">åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-12">è‡ªåŠ¨åŒ–åŠå…¬</h4>
<ul>
<li>æ‰¹é‡å¤„ç†æ–‡æ¡£</li>
<li>è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š</li>
<li>æ•°æ®æ•´ç†å’Œåˆ†æ</li>
</ul>
<h4 data-id="heading-13">è½¯ä»¶é›†æˆ</h4>
<ul>
<li>åœ¨è‡ªå®¶è½¯ä»¶ä¸­åµŒå…¥ Office åŠŸèƒ½</li>
<li>å®ç°æ–‡æ¡£é¢„è§ˆã€ç¼–è¾‘</li>
<li>æä¾›æ ¼å¼è½¬æ¢æœåŠ¡</li>
</ul>
<h4 data-id="heading-14">ä¼ä¸šåº”ç”¨å¼€å‘</h4>
<ul>
<li>ä¼ä¸šå†…éƒ¨ç³»ç»Ÿé›†æˆ</li>
<li>å·¥ä½œæµè‡ªåŠ¨åŒ–</li>
<li>æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-15">æŠ€æœ¯ç»†èŠ‚</h3>
<h4 data-id="heading-16">COM æ¥å£çš„åŸç†</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºåº”ç”¨å®ä¾‹</span>
<span class="hljs-attr">app</span> = win32com.client.Dispatch(<span class="hljs-string">"Word.Application"</span>)
â€‹
<span class="hljs-comment"># è°ƒç”¨æ–¹æ³•</span>
<span class="hljs-attr">app.Visible</span> = <span class="hljs-literal">True</span> Â <span class="hljs-comment"># æ˜¾ç¤ºç•Œé¢</span>
app.Documents.Open("test.docx") Â <span class="hljs-comment"># æ‰“å¼€æ–‡æ¡£</span>
â€‹
<span class="hljs-comment"># è®¿é—®å±æ€§</span>
<span class="hljs-attr">version</span> = app.Version Â <span class="hljs-comment"># è·å–ç‰ˆæœ¬</span>
</code></pre>
<h4 data-id="heading-17">é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_dispatch</span>(<span class="hljs-params">app_name</span>):
 Â   <span class="hljs-string">"""å®‰å…¨åˆ›å»º COM å¯¹è±¡"""</span>
 Â   <span class="hljs-keyword">try</span>:
 Â  Â  Â   app = win32com.client.Dispatch(app_name)
 Â  Â  Â   <span class="hljs-keyword">return</span> app
 Â   <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â   <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— æ³•åˆ›å»º <span class="hljs-subst">{app_name}</span>: <span class="hljs-subst">{e}</span>"</span>)
 Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<h3 data-id="heading-18">å®ç”¨æŠ€å·§</h3>
<h4 data-id="heading-19">ç‰ˆæœ¬å…¼å®¹</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼˜å…ˆå°è¯•æ–°ç‰ˆï¼Œç„¶åå›é€€</span>
<span class="hljs-attr">wps_progids</span> = [
 Â  Â <span class="hljs-string">"wps.Application"</span>, Â  Â <span class="hljs-comment"># æ–°ç‰ˆ</span>
 Â  Â <span class="hljs-string">"Kwps.Application"</span>, Â  <span class="hljs-comment"># æ—§ç‰ˆ</span>
 Â  Â <span class="hljs-string">"ket.Application"</span>, Â  Â <span class="hljs-comment"># è¡¨æ ¼ä¸“ç”¨</span>
]
â€‹
for progid in wps_progids:
 Â  Â try:
 Â  Â  Â  Â <span class="hljs-attr">wps</span> = win32com.client.Dispatch(progid)
 Â  Â  Â  Â break
 Â  Â except:
 Â  Â  Â  Â continue
</code></pre>
<h4 data-id="heading-20">åŠŸèƒ½æ£€æµ‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">check_feature_support</span>(<span class="hljs-params">app</span>):
 Â  Â <span class="hljs-string">"""æ£€æµ‹åº”ç”¨åŠŸèƒ½æ”¯æŒ"""</span>
 Â  Â features = {
 Â  Â  Â  Â <span class="hljs-string">"export_pdf"</span>: <span class="hljs-built_in">hasattr</span>(app, <span class="hljs-string">"ExportAsFixedFormat"</span>),
 Â  Â  Â  Â <span class="hljs-string">"save_as"</span>: <span class="hljs-built_in">hasattr</span>(app, <span class="hljs-string">"SaveAs2"</span>),
 Â  Â  Â  Â <span class="hljs-string">"visible"</span>: <span class="hljs-built_in">hasattr</span>(app, <span class="hljs-string">"Visible"</span>),
 Â   }
 Â  Â <span class="hljs-keyword">return</span> features
</code></pre>
<h3 data-id="heading-21">æ€»ç»“</h3>
<ol>
<li>COM æ¥å£æ˜¯ Windows å¹³å°çš„æ ‡å‡†åŒ–é€šä¿¡æ–¹å¼</li>
<li>WPS çš„æ¥å£è®¾è®¡è€ƒè™‘äº†ä¸ Office çš„å…¼å®¹</li>
<li>è¿™äº›æ¥å£æ˜¯è‡ªåŠ¨åŒ–åŠå…¬çš„åŸºç¡€</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ PHP 8.4 ä¾ç„¶é‡è¦ï¼šè·³åˆ° 8.5 ä¹‹å‰ä½ è¯¥æŒæ¡çš„ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7594302398686674998</link>    <guid>https://juejin.cn/post/7594302398686674998</guid>    <pubDate>2026-01-12T23:15:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594302398686674998" data-draft-id="7594322573452738603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ PHP 8.4 ä¾ç„¶é‡è¦ï¼šè·³åˆ° 8.5 ä¹‹å‰ä½ è¯¥æŒæ¡çš„ç‰¹æ€§"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-12T23:15:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ PHP 8.4 ä¾ç„¶é‡è¦ï¼šè·³åˆ° 8.5 ä¹‹å‰ä½ è¯¥æŒæ¡çš„ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T23:15:51.000Z" title="Mon Jan 12 2026 23:15:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´ PHP 8.4 ä¾ç„¶é‡è¦ï¼šè·³åˆ° 8.5 ä¹‹å‰ä½ è¯¥æŒæ¡çš„ç‰¹æ€§</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ PHP 8.4 åœ¨ 2026 å¹´ä»ç„¶ç›¸å…³</h3>
<p>å¦‚æœä½ çš„å›¢é˜Ÿè®¡åˆ’"ä»Šå¹´ä¸Š PHP 8.5"ï¼Œå¾ˆå¯èƒ½ä¼šå…ˆèŠåˆ° PHP 8.4â€”â€”ä¸ç®¡ä½ æ„¿ä¸æ„¿æ„ã€‚</p>
<p>æ— èŠä½†é‡è¦çš„åŸå› æ˜¯ï¼šæ”¯æŒçª—å£ã€‚</p>
<p>æ ¹æ®å®˜æ–¹ PHP æ”¯æŒæ—¶é—´è¡¨ï¼ŒPHP 8.4ï¼ˆ2024 å¹´ 11 æœˆ 21 æ—¥å‘å¸ƒï¼‰ä»å¤„äºæ´»è·ƒæ”¯æŒæœŸï¼Œç›´åˆ° 2026 å¹´ 12 æœˆ 31 æ—¥ï¼Œå®‰å…¨ä¿®å¤æŒç»­åˆ° 2028 å¹´ 12 æœˆ 31 æ—¥ã€‚</p>
<p>è¿™è®© 8.4 åœ¨ 2026 å¹´åˆæˆä¸ºä¸€ä¸ªåˆç†çš„åŸºçº¿ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä» 8.2/8.3 å‡çº§ã€æƒ³é¿å…"è·³å¤ªè¿œã€åå¤ªå¤š"çš„å›¢é˜Ÿã€‚</p>
<p>ä½†æœ‰æ„æ€çš„åŸå› æ˜¯æŠ€æœ¯å±‚é¢çš„ï¼šPHP 8.4 æ‚„æ‚„é‡å¡‘äº†æ—¥å¸¸ OOP é£æ ¼ã€‚å®ƒå¼•å…¥çš„ç‰¹æ€§å‡å°‘äº†æ ·æ¿ä»£ç ï¼Œè®©"å¹²å‡€çš„ DTO"å’Œ"å®‰å…¨çš„é¢†åŸŸå¯¹è±¡"æ›´åƒæ˜¯è¯­è¨€åŸç”Ÿæ”¯æŒçš„ä¸œè¥¿ï¼š</p>
<ul>
<li>Property hooksï¼ˆå¤´æ¡åŠŸèƒ½ï¼‰</li>
<li>éå¯¹ç§°å±æ€§å¯è§æ€§ï¼ˆè¯»èµ·æ¥æ˜¯ publicï¼Œå†™èµ·æ¥æ˜¯ privateï¼‰</li>
<li>ä¸€äº›ç”Ÿæ´»è´¨é‡æ”¹è¿›ï¼ˆæ•°ç»„ã€å¼ƒç”¨å·¥å…·ã€DOM ç­‰ï¼‰</li>
</ul>
<p>å¦‚æœä½ åœ¨ 8.4 ä¸Šå†…åŒ–äº†è¿™äº›ï¼Œå‡çº§åˆ° 8.5 å¾€å¾€æ„Ÿè§‰åƒ"æ·»åŠ ä¸€äº›å¥½ä¸œè¥¿"ï¼Œè€Œä¸æ˜¯"æŠŠæ•´ä¸ª PHP å†™æ³•ç°ä»£åŒ–"ã€‚</p>
<p>æ‰€ä»¥è¿™ç¯‡æ–‡ç« å¯ä»¥å½“ä½œåŸºçº¿çŸ¥è¯†ï¼šå¦‚æœä½ è¿˜æ²¡ä¸Š 8.4ï¼Œè¿™æ˜¯ä½ ä¸º 8.5 åšå‡†å¤‡åº”è¯¥çŸ¥é“çš„â€”â€”ä½†ä¸ä¼šå˜æˆå®Œæ•´çš„å‡çº§æ¸…å•ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fphp-3-biggest-strengths-2026" target="_blank" title="https://catchadmin.com/post/2026-01/php-3-biggest-strengths-2026" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´ PHP 8.4 ä¾ç„¶é‡è¦ï¼šè·³åˆ° 8.5 ä¹‹å‰ä½ è¯¥æŒæ¡çš„ç‰¹æ€§</a></p>
<h3 data-id="heading-2">Property hooksï¼šæ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆé‡è¦ã€ä»€ä¹ˆæ—¶å€™å€¼å¾—ç”¨</h3>
<p>Property hooks æ˜¯ PHP 8.4 å¼•å…¥çš„ã€‚</p>
<p>å®ƒè®©ä½ å¯ä»¥ç›´æ¥åœ¨å±æ€§ä¸Šé™„åŠ  get å’Œ/æˆ– set é€»è¾‘ã€‚å¯ä»¥ç†è§£ä¸º"è®¿é—®å™¨æ–¹æ³•"ï¼Œä½†ä¸éœ€è¦å†™ï¼š</p>
<ul>
<li><code>getFoo(): string</code></li>
<li><code>setFoo(string $foo): void</code></li>
<li>åŠ ä¸Šç§æœ‰çš„ backing å­—æ®µ</li>
<li>åŠ ä¸Šåœ¨æ„é€ å‡½æ•°å’Œå·¥å‚é‡Œé‡å¤çš„é¢å¤–ä¸å˜é‡</li>
</ul>
<h4 data-id="heading-3">å¿ƒæ™ºæ¨¡å‹</h4>
<p>å¸¦ hook çš„å±æ€§ä»ç„¶æ˜¯å±æ€§ã€‚ä½ è¿˜æ˜¯ç”¨æ­£å¸¸æ–¹å¼è¯»å†™å®ƒï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$user</span>-&gt;email = <span class="hljs-string">"  ADMIN@EXAMPLE.COM  "</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$user</span>-&gt;email;
</code></pre>
<p>ä½†åœ¨åº•å±‚ï¼Œå¼•æ“æŠŠè¯»å†™è·¯ç”±åˆ° hookã€‚</p>
<p>å®Œæ•´å½¢å¼çš„ hook é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-variable">$modified</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$foo</span> = <span class="hljs-string">'default value'</span> {
        get {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;modified) {
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;foo . <span class="hljs-string">' (modified)'</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;foo;
        }
        <span class="hljs-title function_ invoke__">set</span>(<span class="hljs-keyword">string</span> <span class="hljs-variable">$value</span>) {
            <span class="hljs-variable language_">$this</span>-&gt;foo = <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$value</span>);
            <span class="hljs-variable language_">$this</span>-&gt;modified = <span class="hljs-literal">true</span>;
        }
    }
}
</code></pre>
<p>è¿™æ˜¯æ‰‹å†Œé‡Œçš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†æ ¸å¿ƒæ€æƒ³ï¼šä¿ç•™å±æ€§è¯­æ³•ï¼ŒåŒæ—¶è·å¾—é›†ä¸­åŒ–çš„è¡Œä¸ºã€‚</p>
<h4 data-id="heading-4">Backed property vs virtual propertyï¼ˆå®¹æ˜“æ¼æ‰çš„éƒ¨åˆ†ï¼‰</h4>
<p>Property hooks å¯ä»¥åˆ›å»ºä¸¤"ç§"å±æ€§ï¼š</p>
<ul>
<li><strong>Backed property</strong>ï¼šåœ¨å¯¹è±¡ä¸­æœ‰å­˜å‚¨çš„å†…å­˜ï¼ˆæ™®é€šå±æ€§ï¼‰ï¼Œhook æ“ä½œ backing valueã€‚</li>
<li><strong>Virtual property</strong>ï¼šæ²¡æœ‰ backing å­˜å‚¨â€”â€”æ˜¯æ´¾ç”Ÿ/è®¡ç®—çš„ï¼Œåƒä¼ªè£…æˆ <code>$area</code> çš„ <code>getArea()</code>ã€‚</li>
</ul>
<p>æ‰‹å†Œè§£é‡Šè¯´ï¼Œå¦‚æœä¸¤ä¸ª hook éƒ½æ²¡æœ‰ç”¨ç²¾ç¡®è¯­æ³•å¼•ç”¨ <code>$this-&gt;propertyName</code>ï¼Œå±æ€§å°±æ˜¯ virtual çš„ï¼Œvirtual å±æ€§ä¸å å†…å­˜ç©ºé—´ã€‚</p>
<p>ä¸€ä¸ªå¹²å‡€çš„ virtual property ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$h</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$w</span>,
    </span>) </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$area</span> {
        get =&gt; <span class="hljs-variable language_">$this</span>-&gt;h * <span class="hljs-variable language_">$this</span>-&gt;w;
    }
}
<span class="hljs-variable">$r</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$r</span>-&gt;area;     <span class="hljs-comment">// 20</span>
<span class="hljs-variable">$r</span>-&gt;area = <span class="hljs-number">30</span>;     <span class="hljs-comment">// Error: no set operation defined</span>
</code></pre>
<p>è¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªè®¡ç®—å‹ getterâ€”â€”ä½†è¯»èµ·æ¥åƒå±æ€§ã€‚</p>
<h4 data-id="heading-5">æœ€æœ‰ç”¨çš„å®é™…æ¨¡å¼</h4>
<p>ä¸“æ³¨äºçœŸæ­£èƒ½å‡å°‘ bug å’Œæ ·æ¿ä»£ç çš„æ¨¡å¼ã€‚</p>
<p><strong>æ¨¡å¼ Aï¼šåœ¨ setter ä¸­è§„èŒƒåŒ–è¾“å…¥ï¼ˆtrimã€å¤§å°å†™è½¬æ¢ç­‰ï¼‰</strong></p>
<p>ç»å…¸åœºæ™¯ï¼šé‚®ç®±ã€ç”¨æˆ·åã€slugã€‚ä½ æƒ³æ¥å—æ‚ä¹±è¾“å…¥ä½†å­˜å‚¨è§„èŒƒåŒ–çš„å€¼ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserProfile</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span> {
        set =&gt; <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>));
    }
}
</code></pre>
<p>åœ¨ç®€å†™å½¢å¼ä¸­ï¼Œè¡¨è¾¾å¼ç»“æœæˆä¸ºå­˜å‚¨çš„ backing valueã€‚</p>
<p>è¿™å·²ç»å¾ˆæœ‰ç”¨äº†ï¼Œä½†ç”Ÿäº§ä»£ç é€šå¸¸è¿˜éœ€è¦éªŒè¯ã€‚</p>
<p><strong>æ¨¡å¼ Bï¼šåœ¨è¾¹ç•Œå¤„éªŒè¯ä¸å˜é‡ï¼ˆå°½æ—©æŠ›å‡ºï¼‰</strong></p>
<p>ä¾‹å¦‚ï¼Œå¼ºåˆ¶"ç”¨æˆ·åè‡³å°‘ 3 ä¸ªå­—ç¬¦"å¹¶è§„èŒƒåŒ–ç©ºæ ¼ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserProfile</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$username</span> {
        set {
            <span class="hljs-variable">$v</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$v</span> === <span class="hljs-string">''</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Username cannot be empty.'</span>);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$v</span>) &lt; <span class="hljs-number">3</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Username is too short.'</span>);
            }
            <span class="hljs-variable language_">$this</span>-&gt;username = <span class="hljs-variable">$v</span>;
        }
    }
}
</code></pre>
<p>è¿™è®©ä¸å˜é‡ç´§æŒ¨ç€å±æ€§ï¼Œè€Œä¸æ˜¯æ•£è½åœ¨æ§åˆ¶å™¨ã€è¯·æ±‚éªŒè¯å™¨å’Œæ„é€ å‡½æ•°å„å¤„ã€‚</p>
<p>PHP è¿ç§»æŒ‡å—ç”šè‡³å±•ç¤ºäº†ç±»ä¼¼çš„"éªŒè¯ç„¶åèµ‹å€¼"æ¨¡å¼ã€‚</p>
<p><strong>æ¨¡å¼ Cï¼šæ´¾ç”Ÿ/virtual çš„"å±•ç¤º"å±æ€§</strong></p>
<p>å¸¸è§çš„ DTO éœ€æ±‚ï¼šæš´éœ² fullName ä½†ä¸å­˜å‚¨å®ƒã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$first</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$last</span>,
    </span>) </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$fullName</span> {
        get =&gt; <span class="hljs-string">"<span class="hljs-subst">{$this-&gt;first}</span> <span class="hljs-subst">{$this-&gt;last}</span>"</span>;
    }
}
</code></pre>
<p>Virtual property æœ€é€‚åˆçš„åœºæ™¯ï¼š</p>
<ul>
<li>ç¡®å®šæ€§çš„ï¼Œ</li>
<li>è®¡ç®—æˆæœ¬ä½ï¼Œ</li>
<li>ä½ æ°¸è¿œä¸æƒ³"set"å®ƒä»¬ã€‚</li>
</ul>
<p>å¯¹äºå†å²ä¸Šæ»¥ç”¨é­”æœ¯ <code>__get()</code> çš„å›¢é˜Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªå¹²å‡€çš„åŸºçº¿ã€‚</p>
<p><strong>æ¨¡å¼ Dï¼š"è®¡ç®—ä¸€æ¬¡ï¼Œä¹‹åç¼“å­˜"ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</strong></p>
<p>æœ‰æ—¶è®¡ç®—å€¼å¾ˆæ˜‚è´µï¼ˆè§£æã€æ„å»ºå¯¹è±¡ï¼‰ã€‚ä½ å¯ä»¥åœ¨å¯¹è±¡å†…éƒ¨ç¼“å­˜å®ƒã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RequestContext</span>
</span>{
    <span class="hljs-keyword">private</span> ?<span class="hljs-keyword">array</span> <span class="hljs-variable">$cachedClaims</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$jwt</span>,
    </span>) </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$claims</span> {
        get {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;cachedClaims !== <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;cachedClaims;
            }
            <span class="hljs-comment">// å‡è®¾ parseJwt() åšç­¾åæ£€æŸ¥ã€base64 è§£ç ç­‰</span>
            <span class="hljs-variable language_">$this</span>-&gt;cachedClaims = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">parseJwt</span>(<span class="hljs-variable">$this</span>-&gt;jwt);
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;cachedClaims;
        }
    }
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJwt</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$jwt</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> [];
    }
}
</code></pre>
<p>è¿™å¾ˆæ–¹ä¾¿ï¼Œä½†ä¹Ÿæ˜¯ hook å¯èƒ½å˜å¾—"å¤ªé­”æ³•"çš„åœ°æ–¹ã€‚å¦‚æœä½ æŠŠé‡æ´»è—åœ¨ <code>$obj-&gt;claims</code> åé¢ï¼Œå¯èƒ½ä¼šè®©è°ƒç”¨è€…æ„å¤–ã€‚åªåœ¨äººä½“å·¥å­¦çœŸæ­£è¶…è¿‡æˆæœ¬æ—¶ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ã€‚</p>
<h4 data-id="heading-6">Hooks + æ„é€ å‡½æ•°æå‡ï¼šä¸€ä¸ªå¾®å¦™çš„å‘</h4>
<p>PHP å…è®¸åœ¨æå‡çš„å±æ€§ä¸Šä½¿ç”¨ hookï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦è§„åˆ™ï¼šä¼ ç»™æ„é€ å‡½æ•°çš„å€¼å¿…é¡»åŒ¹é…å±æ€§å£°æ˜çš„ç±»å‹â€”â€”ä¸ç®¡ä½ çš„ set hook å¯èƒ½æ¥å—ä»€ä¹ˆã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥å†™ï¼š</p>
<ul>
<li>å±æ€§ç±»å‹ï¼š<code>DateTimeInterface</code></li>
<li>set hook æ¥å—ï¼š<code>string|DateTimeInterface</code></li>
</ul>
<p>â€¦ä½†å¦‚æœä½ ç”¨æå‡ï¼Œæ„é€ å‡½æ•°å‚æ•°ç±»å‹ä»ç„¶æ˜¯ <code>DateTimeInterface</code>ã€‚</p>
<p>å¦‚æœä½ çœŸçš„æƒ³"æ„é€ å‡½æ•°é‡Œä¹Ÿå…è®¸ string"ï¼Œä½ å¯èƒ½éœ€è¦å·¥å‚æˆ–éæå‡çš„æ„é€ å‡½æ•°å‚æ•°ã€‚</p>
<h4 data-id="heading-7">é‡è¦é™åˆ¶ï¼šproperty hooks ä¸èƒ½å’Œ readonly ä¸€èµ·ç”¨</h4>
<p>è¿™å¯¹å–œæ¬¢ä¸å¯å˜å¯¹è±¡çš„å›¢é˜Ÿå¾ˆé‡è¦ã€‚</p>
<p>æ‰‹å†Œæ˜ç¡®è¯´æ˜ï¼šproperty hooks ä¸ readonly å±æ€§ä¸å…¼å®¹ã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ çš„é£æ ¼æ˜¯"åˆ°å¤„éƒ½æ˜¯ä¸å¯å˜å€¼å¯¹è±¡"ï¼Œhooks ä¸èƒ½æ›¿ä»£é‚£ä¸ªã€‚Hooks æ›´é€‚åˆçš„åœºæ™¯æ˜¯ï¼š</p>
<ul>
<li>DTO å’Œ request/response å¯¹è±¡</li>
<li>é…ç½®å¯¹è±¡</li>
<li>å†…éƒ¨å¯å˜ä½†éœ€è¦æŠ¤æ çš„é¢†åŸŸå¯¹è±¡</li>
</ul>
<p>ï¼ˆä¸‹ä¸€èŠ‚ä¼šè®²ç”¨éå¯¹ç§°å¯è§æ€§å®ç°"åŠä¸å¯å˜ DTO"ã€‚ï¼‰</p>
<h4 data-id="heading-8">å¦ä¸€ä¸ªé™åˆ¶ï¼šå¼•ç”¨å’Œé—´æ¥ä¿®æ”¹å¯èƒ½å‘ä½ </h4>
<p>Hooks æ‹¦æˆªè¯»å†™ï¼Œè¿™å¯èƒ½ä¸å¼•ç”¨å†²çªâ€”â€”ç‰¹åˆ«æ˜¯æ•°ç»„å…ƒç´ å†™å…¥ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$obj</span>-&gt;arr[<span class="hljs-string">'k'</span>] = <span class="hljs-string">'v'</span>;
</code></pre>
<p>æ–‡æ¡£è­¦å‘Šè¯´ï¼Œè·å–å¼•ç”¨æˆ–é—´æ¥ä¿®æ”¹å¯èƒ½ç»•è¿‡ set hookï¼Œå¹¶æ¦‚è¿°äº†çº¦æŸï¼ˆå¦‚ <code>&amp;get</code> è¡Œä¸ºï¼‰å’Œå…è®¸çš„æƒ…å†µã€‚</p>
<p>å®ç”¨æŒ‡å—ï¼š</p>
<ul>
<li>å¦‚æœè°ƒç”¨è€…ç»å¸¸ä¿®æ”¹å…ƒç´ ï¼Œé¿å…åœ¨æ•°ç»„å±æ€§ä¸Šç”¨ hookã€‚</li>
<li>ä¼˜å…ˆç”¨"æ›¿æ¢æ•´ä¸ªæ•°ç»„"æ¨¡å¼ï¼ˆ<code>$obj-&gt;tags = [...$obj-&gt;tags, $newTag];</code>ï¼‰ï¼Œè¿™è¡¨ç°å¾—åƒæ™®é€š setã€‚</li>
</ul>
<h4 data-id="heading-9">ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ç”¨ property hooks</h4>
<p>Hooks å¾ˆæ£’â€¦â€¦ç›´åˆ°å®ƒä»¬ä¸æ˜¯ã€‚åœ¨ä»¥ä¸‹æƒ…å†µé¿å…ï¼š</p>
<ul>
<li>"hook body"å¼€å§‹åšçœŸæ­£çš„ç¼–æ’ï¼ˆIOã€ç½‘ç»œè°ƒç”¨ã€æ—¥å¿—ï¼‰ã€‚</li>
<li>è°ƒè¯•å˜å¾—ä¸æ¸…æ™°ï¼ˆ"ä¸ºä»€ä¹ˆè¯»è¿™ä¸ªå±æ€§ä¼šè®¿é—®æ•°æ®åº“ï¼Ÿ"ï¼‰ã€‚</li>
<li>ä½ çš„å›¢é˜Ÿéœ€è¦å…³é”®è¡Œä¸ºæœ‰æ˜¾å¼çš„è°ƒç”¨ç‚¹ã€‚</li>
</ul>
<p>ä¸€ä¸ªæœ‰ç”¨çš„è§„åˆ™ï¼šproperty hooks æœ€é€‚åˆå®ç°<strong>å±€éƒ¨ä¸å˜é‡å’Œå±€éƒ¨è½¬æ¢</strong>â€”â€”çœŸæ­£å±äºå±æ€§æœ¬èº«çš„é€»è¾‘ã€‚</p>
<h3 data-id="heading-10">å…¶ä»–å½±å“æ—¥å¸¸å·¥ä½œçš„ PHP 8.4 ç‰¹æ€§ï¼ˆæŒ‘ä½ çœŸæ­£ä¼šç”¨çš„ï¼‰</h3>
<p>PHP 8.4 ä¸åªæœ‰ hooksã€‚ä¸“æ³¨äºä»¥ä¸‹ç±»å‹çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>å‡å°‘æ ·æ¿ä»£ç ï¼Œ</li>
<li>å‡å°‘ bugï¼Œ</li>
<li>æˆ–è®©ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚</li>
</ul>
<h4 data-id="heading-11">ç‰¹æ€§ï¼šéå¯¹ç§°å±æ€§å¯è§æ€§ï¼ˆpublic è¯»ã€å—é™å†™ï¼‰</h4>
<p>éå¯¹ç§°å¯è§æ€§è®©ä½ å¯ä»¥ä¸ºè¯»å’Œå†™è®¾ç½®ä¸åŒçš„å¯è§æ€§ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Money</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) <span class="hljs-keyword">string</span> <span class="hljs-variable">$currency</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) <span class="hljs-keyword">int</span> <span class="hljs-variable">$cents</span>,
    </span>) </span>{}
}
</code></pre>
<p>è°ƒç”¨è€…å¯ä»¥è¯»ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">echo</span> <span class="hljs-variable">$m</span>-&gt;cents;
</code></pre>
<p>ä½†ä¸èƒ½å†™ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$m</span>-&gt;cents = <span class="hljs-number">500</span>; <span class="hljs-comment">// Error outside the class</span>
</code></pre>
<p>è¿ç§»æŒ‡å—é˜æ˜äº†è§„åˆ™ï¼šç¬¬ä¸€ä¸ªå¯è§æ€§æ˜¯ get-visibilityï¼Œç¬¬äºŒä¸ªæ§åˆ¶ set-visibilityï¼Œget visibility ä¸èƒ½æ¯” set visibility æ›´çª„ã€‚</p>
<p>è¿™å¯¹ DTO å¾ˆé‡è¦ï¼šå®ƒç»™ä½ ä¸€ç§"å¤§éƒ¨åˆ†ä¸å¯å˜"çš„é£æ ¼ï¼Œè€Œä¸å¿…é‡‡ç”¨å®Œæ•´çš„å€¼å¯¹è±¡æ–¹æ³•ã€‚</p>
<h4 data-id="heading-12">ç»„åˆéå¯¹ç§°å¯è§æ€§ + property hooks</h4>
<p>è¿™ä¸ªç»„åˆç»å¸¸æ›¿ä»£ç»å…¸çš„"ç§æœ‰å±æ€§ + getter + setter"ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInput</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(set) <span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span> {
        set =&gt; <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>));
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(set) <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span> {
        set {
            <span class="hljs-variable">$v</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$v</span> === <span class="hljs-string">''</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Name is required.'</span>);
            }
            <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$v</span>;
        }
    }
}
</code></pre>
<ul>
<li>è¯»æ˜¯ publicï¼ˆå¯¹æ¨¡æ¿ã€åºåˆ—åŒ–å™¨ã€è°ƒè¯•å‹å¥½ï¼‰</li>
<li>å†™æ˜¯å—æ§çš„ï¼ˆå¯¹ä¸å˜é‡å‹å¥½ï¼‰</li>
<li>æ ·æ¿ä»£ç ä¿æŒä½</li>
</ul>
<h4 data-id="heading-13">ç‰¹æ€§ï¼šæ–°æ•°ç»„è¾…åŠ©å‡½æ•°ï¼ˆarray_findã€array_find_keyã€array_anyã€array_allï¼‰</h4>
<p>PHP 8.4 æ–°å¢äº†æ•°ç»„æœç´¢/æ£€æŸ¥å‡½æ•°ã€‚</p>
<p><strong>array_find å’Œ array_find_key</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$users</span> = [
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'active'</span> =&gt; <span class="hljs-literal">false</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'active'</span> =&gt; <span class="hljs-literal">true</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'active'</span> =&gt; <span class="hljs-literal">false</span>],
];

<span class="hljs-variable">$first</span> = <span class="hljs-title function_ invoke__">array_find</span>(<span class="hljs-variable">$users</span>, fn (<span class="hljs-variable">$u</span>) =&gt; <span class="hljs-variable">$u</span>[<span class="hljs-string">'active'</span>] === <span class="hljs-literal">true</span>);
<span class="hljs-comment">// ['id' =&gt; 2, 'active' =&gt; true]</span>
</code></pre>
<p>å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å› <code>null</code>â€”â€”ä½†å¦‚æœ<strong>å€¼æœ¬èº«</strong>å°±æ˜¯ <code>null</code>ï¼Œä½ æ€ä¹ˆåŒºåˆ†"æ‰¾åˆ° null"å’Œ"æ²¡æ‰¾åˆ°"ï¼Ÿ</p>
<p>ä½ å¯ä»¥ç”¨ <code>array_find_key()</code> æ¥é¿å…æ­§ä¹‰ï¼ˆå› ä¸º key ä¸èƒ½æ˜¯ nullï¼‰ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$key</span> = <span class="hljs-title function_ invoke__">array_find_key</span>(<span class="hljs-variable">$users</span>, fn (<span class="hljs-variable">$u</span>) =&gt; <span class="hljs-variable">$u</span>[<span class="hljs-string">'active'</span>] === <span class="hljs-literal">true</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$key</span> === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// çœŸçš„æ²¡æ‰¾åˆ°</span>
}
<span class="hljs-variable">$firstActive</span> = <span class="hljs-variable">$users</span>[<span class="hljs-variable">$key</span>];
</code></pre>
<p><strong>array_any å’Œ array_all çœ‹èµ·æ¥ç®€å•â€”â€”ç›´åˆ°å®ƒä»¬æ¶ˆé™¤äº†å™ªéŸ³</strong></p>
<p>ä¾‹å¦‚ï¼šå¼ºåˆ¶æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶éƒ½åœ¨å¤§å°é™åˆ¶å†…ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$ok</span> = <span class="hljs-title function_ invoke__">array_all</span>(<span class="hljs-variable">$files</span>, fn (<span class="hljs-variable">$f</span>) =&gt; <span class="hljs-variable">$f</span>[<span class="hljs-string">'size'</span>] &lt;= <span class="hljs-number">5_000_000</span>);
<span class="hljs-keyword">if</span> (!<span class="hljs-variable">$ok</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">'One or more files are too large.'</span>);
}
</code></pre>
<p>è¿™æ›¿ä»£äº†æ¯ä¸ªäººéƒ½å†™å¾—ç•¥æœ‰ä¸åŒçš„ foreach + æ ‡å¿—å˜é‡ã€‚</p>
<h4 data-id="heading-14">ç‰¹æ€§ï¼š#[Deprecated] attribute ç”¨äºç”¨æˆ·æ€å¼ƒç”¨</h4>
<p>PHP ä¸€ç›´æœ‰å†…éƒ¨å¼ƒç”¨æœºåˆ¶ï¼Œä½† PHP 8.4 é€šè¿‡ <code>#[Deprecated]</code> attribute æš´éœ²äº†ä¸€ä¸ªå¹²å‡€çš„ç”¨æˆ·æ€ç‰ˆæœ¬ã€‚</p>
<p>æ‰‹å†Œè¯´ï¼šä½¿ç”¨å·²å¼ƒç”¨çš„åŠŸèƒ½ä¼šè§¦å‘ <code>E_USER_DEPRECATED</code>ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">#[\Deprecated</span>(<span class="hljs-attr">message</span>: <span class="hljs-string">"Use slugify() instead"</span>, <span class="hljs-attr">since</span>: <span class="hljs-string">"2026-01"</span>)<span class="hljs-meta">]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make_slug</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$s</span></span>): <span class="hljs-title">string</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$s</span>));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slugify</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$s</span></span>): <span class="hljs-title">string</span>
</span>{
    <span class="hljs-comment">// çœŸæ­£çš„å®ç°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$s</span>));
}

<span class="hljs-title function_ invoke__">make_slug</span>(<span class="hljs-string">"Hello World"</span>);
</code></pre>
<p>è¿™å¯¹å›¢é˜Ÿæ¥è¯´è¢«ä½ä¼°äº†ï¼šå®ƒç»™ä½ ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ–¹å¼æ¥ï¼š</p>
<ul>
<li>æ ‡è®°æ—§çš„è¾…åŠ©å‡½æ•°ï¼Œ</li>
<li>æŒ‡å¯¼å†…éƒ¨è¿ç§»ï¼Œ</li>
<li>åœ¨ CI æ—¥å¿—ä¸­æš´éœ²å¼ƒç”¨ä½¿ç”¨æƒ…å†µã€‚</li>
</ul>
<h4 data-id="heading-15">ç‰¹æ€§ï¼šæ”¯æŒ HTML5 çš„æ–° DOM APIï¼ˆåœ¨ Dom å‘½åç©ºé—´ä¸­ï¼‰</h4>
<p>å¦‚æœä½ åœ¨ PHP ä¸­è§£æè¿‡ HTMLï¼ˆçˆ¬å–ã€æ¸…ç†ã€è¿ç§»è„šæœ¬ï¼‰ï¼ŒPHP 8.4 æ˜¯ä¸€æ¬¡æœ‰æ„ä¹‰çš„å‡çº§ã€‚</p>
<p>8.4 å‘å¸ƒå…¬å‘Šä»‹ç»äº†å¸¦æœ‰æ ‡å‡†å…¼å®¹ HTML5 è§£æçš„æ–° DOM APIã€Dom å‘½åç©ºé—´ä¸­çš„æ–°ç±»ï¼Œä»¥åŠæ–¹ä¾¿çš„æŸ¥è¯¢è¾…åŠ©å‡½æ•°ã€‚</p>
<p>å…¬å‘Šä¸­çš„ç¤ºä¾‹å±•ç¤ºäº†ï¼š</p>
<ul>
<li><code>Dom\HTMLDocument::createFromString(...)</code></li>
<li><code>querySelector(...)</code></li>
<li><code>classList-&gt;contains(...)</code></li>
</ul>
<p>ä¸€ä¸ªå®é™…ç”¨ä¾‹ï¼šå®‰å…¨åœ°æ£€æµ‹"canonical"é“¾æ¥æ ‡ç­¾ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$doc</span> = <span class="hljs-title class_">Dom\HTMLDocument</span>::<span class="hljs-title function_ invoke__">createFromString</span>(<span class="hljs-variable">$html</span>, LIBXML_NOERROR);
<span class="hljs-variable">$canonical</span> = <span class="hljs-variable">$doc</span>-&gt;<span class="hljs-title function_ invoke__">querySelector</span>(<span class="hljs-string">'link[rel="canonical"]'</span>);
<span class="hljs-variable">$url</span> = <span class="hljs-variable">$canonical</span>?-&gt;<span class="hljs-title function_ invoke__">getAttribute</span>(<span class="hljs-string">'href'</span>);
</code></pre>
<p>å¯¹äºç®€å•ä»»åŠ¡ï¼Œè¿™æ¯”ç»å…¸çš„ DOMDocument + DOMXPath ç»„åˆå¥½ç”¨å¾—å¤šï¼Œå®ƒå‡å°‘äº†æ²¡äººæƒ³ç»´æŠ¤çš„"XPath æ„å¤§åˆ©é¢"è„šæœ¬ã€‚</p>
<h4 data-id="heading-16">ç‰¹æ€§ï¼šPDO é©±åŠ¨ç‰¹å®šå­ç±»ï¼ˆæ›´ç²¾ç¡®çš„ APIï¼‰</h4>
<p>PHP 8.4 å¼•å…¥äº†é©±åŠ¨ç‰¹å®šçš„ PDO å­ç±»ï¼Œå¦‚ <code>Pdo\MySql</code>ã€<code>Pdo\Pgsql</code>ã€<code>Pdo\Sqlite</code> ç­‰ï¼Œå¹¶åœ¨å‘å¸ƒå…¬å‘Šä¸­å±•ç¤ºäº†æ–°çš„è¿æ¥é£æ ¼ã€‚</p>
<p>åœ¨ PHP 8.4 ç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li><code>PDO::connect(...)</code> è¿”å› <code>Pdo\Sqlite</code></li>
<li>é©±åŠ¨ç‰¹å®šæ–¹æ³•åªå­˜åœ¨äºç›¸å…³çš„åœ°æ–¹</li>
</ul>
<p>è¿™æ”¹å–„äº†æ­£ç¡®æ€§å’Œ IDE æ”¯æŒï¼Œç‰¹åˆ«æ˜¯åœ¨æµ‹è¯•å’Œç”Ÿäº§æ··ç”¨ä¸åŒé©±åŠ¨çš„ä»£ç åº“ä¸­ã€‚</p>
<h4 data-id="heading-17">é™„åŠ ï¼šLazy objectsï¼ˆä¸»è¦ç”¨äºæ¡†æ¶å’ŒåŸºç¡€è®¾æ–½ä»£ç ï¼‰</h4>
<p>PHP 8.4 è¿˜å¼•å…¥äº† lazy objects æ¦‚å¿µï¼šåˆå§‹åŒ–è¢«å»¶è¿Ÿåˆ°è®¿é—®æ—¶æ‰è¿›è¡Œçš„å¯¹è±¡ã€‚è¿ç§»æŒ‡å—æ˜ç¡®æŒ‡å‡ºæ¡†æ¶å¯ä»¥åˆ©ç”¨å®ƒä»¬æ¥å»¶è¿Ÿè·å–ä¾èµ–æˆ–æ•°æ®ã€‚</p>
<p>å®ƒç”šè‡³å±•ç¤ºäº†ä½¿ç”¨ <code>ReflectionClass::newLazyGhost(...)</code> çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<p>è¿™ä¸æ˜¯ä½ åœ¨æ—¥å¸¸åº”ç”¨ä»£ç ä¸­ä¼šå¤©å¤©ç”¨çš„ä¸œè¥¿ï¼Œä½†å¦‚æœä½ åšï¼š</p>
<ul>
<li>DI å®¹å™¨ï¼Œ</li>
<li>ORMï¼Œ</li>
<li>ä»£ç†å±‚ï¼Œ</li>
<li>æˆ–å¯¹æ€§èƒ½æ•æ„Ÿçš„ bootstrapï¼Œ</li>
</ul>
<p>â€¦å€¼å¾—çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œå› ä¸ºä½ ä¼šåœ¨ç”Ÿæ€ç³»ç»Ÿå†…éƒ¨çœ‹åˆ°å®ƒã€‚</p>
<h3 data-id="heading-18">PHP 8.4 å¦‚ä½•æ”¹å˜ OOP é£æ ¼ï¼ˆå°¤å…¶æ˜¯ DTOï¼‰</h3>
<p>å¦‚æœä½ å†™ PHP å¾ˆå¤šå¹´ï¼Œä½ å¯èƒ½ç»å†è¿‡è‡³å°‘ä¸‰ç§ DTO é£æ ¼ï¼š</p>
<ol>
<li>"åˆ°å¤„éƒ½æ˜¯ public å±æ€§"</li>
<li>"æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç§æœ‰å±æ€§ + getter/setter"</li>
<li>"readonly æå‡å±æ€§"ï¼ˆå¥½ç”¨ï¼Œä½†æ­»æ¿ï¼‰</li>
</ol>
<p>PHP 8.4 å¢åŠ äº†ç¬¬å››ç§ï¼Œéå¸¸å®ç”¨ï¼š</p>
<ul>
<li>public è¯»ï¼Œ</li>
<li>å—æ§å†™ï¼Œ</li>
<li>ä¸å˜é‡é è¿‘æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-19">8.4 ä¹‹å‰ï¼šå¸¸è§çš„ DTO æ ·æ¿ä»£ç </h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateUserCommand</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;email = <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$email</span>));
        <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$name</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;name === <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Name is required.'</span>);
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">email</span>(<span class="hljs-params"/>): <span class="hljs-title">string</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;email; }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">name</span>(<span class="hljs-params"/>): <span class="hljs-title">string</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;name; }
}
</code></pre>
<p>æ²¡ä»€ä¹ˆé—®é¢˜ã€‚åªæ˜¯é‡å¤ï¼Œç‰¹åˆ«æ˜¯åœ¨å‡ åä¸ªæ¶ˆæ¯å¯¹è±¡ä¸Šã€‚</p>
<h4 data-id="heading-20">8.4 ä¹‹åï¼š"public è¯» + private å†™ + hooks"</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateUserCommand</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(set) <span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span> {
        set =&gt; <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>));
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(set) <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span> {
        set {
            <span class="hljs-variable">$v</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$v</span> === <span class="hljs-string">''</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Name is required.'</span>);
            }
            <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$v</span>;
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;email = <span class="hljs-variable">$email</span>;
        <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$name</span>;
    }
}
</code></pre>
<p>ä½ å¾—åˆ°ï¼š</p>
<ul>
<li>å¼ºç±»å‹</li>
<li>é›†ä¸­åŒ–çš„è§„èŒƒåŒ–/éªŒè¯</li>
<li>Public å¯è¯»æ€§ï¼ˆåœ¨æ¨¡æ¿ã€æ—¥å¿—ã€åºåˆ—åŒ–å™¨ä¸­æ–¹ä¾¿ï¼‰</li>
<li>æ²¡æœ‰è®¿é—®å™¨æ ·æ¿</li>
</ul>
<p>è€Œä¸”ä½ ä»ç„¶å¯ä»¥ç”¨æµ‹è¯•ä¿æŒä¸¥æ ¼ã€‚</p>
<h4 data-id="heading-21">ä¸€ä¸ªç°å®çš„"DTO + æ´¾ç”Ÿå±æ€§"æ¨¡å¼</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) <span class="hljs-keyword">string</span> <span class="hljs-variable">$line1</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) ?<span class="hljs-keyword">string</span> <span class="hljs-variable">$line2</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) <span class="hljs-keyword">string</span> <span class="hljs-variable">$city</span>,
    </span>) </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$singleLine</span> {
        get =&gt; <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$this</span>-&gt;line1 . <span class="hljs-string">' '</span> . (<span class="hljs-variable">$this</span>-&gt;line2 ?? <span class="hljs-string">''</span>) . <span class="hljs-string">', '</span> . <span class="hljs-variable language_">$this</span>-&gt;city);
    }
}
</code></pre>
<p>ä½ å¯ä»¥ä¿æŒå­˜å‚¨å­—æ®µå¹²å‡€ï¼Œå¹¶æä¾›ä¸€ä¸ªå‹å¥½çš„æ´¾ç”Ÿå­—æ®µè€Œä¸å¼•å…¥é¢å¤–æ–¹æ³•ã€‚</p>
<h4 data-id="heading-22">readonly ä»ç„¶èƒœå‡ºçš„åœºæ™¯</h4>
<p>å› ä¸º hooks ä¸èƒ½å’Œ readonly ä¸€èµ·ç”¨ï¼Œä¸å¯å˜å€¼å¯¹è±¡ä»ç„¶ä¾èµ–ï¼š</p>
<ul>
<li>readonly æå‡å±æ€§</li>
<li>å·¥å‚</li>
<li>æ˜¾å¼çš„ <code>withX()</code> æ–¹æ³•ï¼ˆåœ¨ PHP 8.5 é‡Œæ›´å¥½ç”¨äº†ï¼Œä½†é‚£æ˜¯å¦ä¸€ç¯‡æ–‡ç« çš„äº‹ï¼‰</li>
</ul>
<p>æ‰€ä»¥å¾ˆå¤šå›¢é˜Ÿçš„å®é™…åˆ†å·¥æ˜¯ï¼š</p>
<ul>
<li><strong>å€¼å¯¹è±¡</strong>ï¼šreadonly + æ˜¾å¼è¡Œä¸º</li>
<li><strong>DTO / å‘½ä»¤ / è¯·æ±‚</strong>ï¼šéå¯¹ç§°å¯è§æ€§ + hooks</li>
</ul>
<h3 data-id="heading-23">ç»å¸¸å½±å“æµ‹è¯•/CI çš„ç®€çŸ­å…¼å®¹æ€§è¯´æ˜</h3>
<p>è¿™ä¸€èŠ‚æ•…æ„ç®€çŸ­ï¼Œä½†æ˜¯èƒ½çœæ—¶é—´çš„é‚£ç§ç®€çŸ­ã€‚</p>
<h4 data-id="heading-24">é”™è¯¯æŠ¥å‘Šçº§åˆ«ï¼šE_STRICT æ²¡äº†</h4>
<p>PHP 8.4 ç§»é™¤äº† E_STRICT é”™è¯¯çº§åˆ«ï¼ŒE_STRICT å¸¸é‡å·²å¼ƒç”¨ã€‚</p>
<p>å¦‚æœä½ æœ‰é—ç•™ä»£ç æˆ–é…ç½®å¼•ç”¨äº† E_STRICTï¼Œå¯èƒ½ä¼šçœ‹åˆ° CI è¡Œä¸ºå˜åŒ–ã€‚</p>
<h4 data-id="heading-25">JIT é…ç½®é»˜è®¤å€¼å˜äº†ï¼ˆOPcacheï¼‰</h4>
<p>PHP 8.4 ä¸­ JIT é…ç½®çš„é»˜è®¤å€¼å˜äº†ï¼š</p>
<ul>
<li>ä» <code>opcache.jit=tracing</code> å’Œ <code>opcache.jit_buffer_size=0</code></li>
<li>åˆ° <code>opcache.jit=disable</code> å’Œ <code>opcache.jit_buffer_size=64M</code></li>
</ul>
<p>è¿™ä¸ä¼šæ”¹å˜"JIT é»˜è®¤å…³é—­"ï¼Œä½†å¯èƒ½å½±å“ä¹‹å‰åªåˆ‡æ¢å…¶ä¸­ä¸€ä¸ªå€¼çš„ç¯å¢ƒã€‚</p>
<h4 data-id="heading-26">ä¸€äº›æ‰©å±•å˜å¾—æ›´ä¸¥æ ¼ï¼ˆç±»å‹åŒ–å¸¸é‡ã€ValueErrorã€è¡Œä¸ºå˜æ›´ï¼‰</h4>
<p>8.4 ä¸å…¼å®¹åˆ—è¡¨ä¸­çš„ä¸€äº›ä¾‹å­ï¼š</p>
<ul>
<li>å‡ ä¸ªæ‰©å±•ç±»å¸¸é‡ç°åœ¨æœ‰ç±»å‹ï¼ˆDateã€Intlã€PDOã€Reflectionã€SPLã€Sqliteã€XMLReaderï¼‰ã€‚</li>
<li>ä¸€äº›å‡½æ•°ç°åœ¨æŠ› ValueError è€Œä¸æ˜¯é™é»˜æ¥å—æ— æ•ˆè¾“å…¥ï¼ˆå¦‚ <code>round()</code> æ— æ•ˆæ¨¡å¼ã€<code>str_getcsv()</code> æ— æ•ˆåˆ†éš”ç¬¦é•¿åº¦ï¼‰ã€‚</li>
<li>SimpleXML è¿­ä»£è¡Œä¸ºå˜äº†ä»¥é¿å…æ„å¤–çš„ rewindï¼ˆä¹‹å‰å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ï¼‰ã€‚</li>
<li>æ ¹æ®é©±åŠ¨ï¼Œä¸€äº› PDO å±æ€§ç°åœ¨è¡¨ç°ä¸ºå¸ƒå°”è€Œéæ•´æ•°ã€‚</li>
</ul>
<p>è¿™äº›æ˜¯é‚£ç§é™¤éä½ å°½æ—©åœ¨ 8.4 ä¸‹è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼Œå¦åˆ™ä¼šè¡¨ç°ä¸º"éšæœºæµ‹è¯•å¤±è´¥"çš„å˜æ›´ã€‚</p>
<h3 data-id="heading-27">å°å‹è¿ç§»ï¼šé‡‡ç”¨ PHP 8.4 çš„å°æ­¥éª¤ï¼Œæ— éœ€å¤§é‡æ„</h3>
<p>å¦‚æœä½ è¿˜æ²¡ä¸Š 8.4â€”â€”æˆ–è€…ä¸Šäº†ä½†æ²¡ç”¨è¿™äº›ç‰¹æ€§â€”â€”è¿™æ˜¯ä¸€ä¸ªé€šå¸¸æœ‰æ•ˆçš„å®‰å…¨é¡ºåºã€‚</p>
<h4 data-id="heading-28">æ­¥éª¤ 1ï¼šå…ˆæŠŠ 8.4 åŠ åˆ° CIï¼Œå³ä½¿ç”Ÿäº§è¿˜æ²¡å‡†å¤‡å¥½</h4>
<p>ç¡®ä¿ä½ èƒ½åœ¨ 8.4 ä¸Šè¿è¡Œæµ‹è¯•å¥—ä»¶è€Œä¸å‡ºæ„å¤–ã€‚æŠŠè­¦å‘Šå’Œå¼ƒç”¨å½“ä½œä¿¡å·ã€‚</p>
<h4 data-id="heading-29">æ­¥éª¤ 2ï¼šåªåœ¨æ–°ä»£ç ä¸­é‡‡ç”¨ array_find / array_any / array_all</h4>
<p>ä¸è¦é‡æ„æ•´ä¸ªä»£ç åº“ã€‚åªæ˜¯ä¸è¦å†å†™æ–°çš„"foreach-with-break"å¾ªç¯ï¼Œé™¤éå®ƒä»¬çœŸçš„æ›´æ¸…æ™°ã€‚</p>
<h4 data-id="heading-30">æ­¥éª¤ 3ï¼šå¯¹æ–°çš„ DTO å’Œè¯·æ±‚å¯¹è±¡ä½¿ç”¨éå¯¹ç§°å¯è§æ€§</h4>
<p>è¿™æ˜¯ä½é£é™©çš„ï¼šä½ ä¸»è¦æ˜¯æ”¹å˜å±æ€§å£°æ˜å¹¶æ¶ˆé™¤ä¸€ç±»æ„å¤–ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-31">æ­¥éª¤ 4ï¼šåœ¨æ˜æ˜¾æ›¿ä»£æ ·æ¿ä»£ç çš„åœ°æ–¹æ·»åŠ  property hooks</h4>
<p>ä»ä»¥ä¸‹å¼€å§‹ï¼š</p>
<ul>
<li>trim å’Œå¤§å°å†™è§„èŒƒåŒ–ï¼Œ</li>
<li>ç®€å•éªŒè¯ï¼Œ</li>
<li>æ´¾ç”Ÿå±æ€§ã€‚</li>
</ul>
<p>ä¸€å¼€å§‹é¿å…åœ¨ hooks é‡Œæ”¾é‡é€»è¾‘ã€‚</p>
<h4 data-id="heading-32">æ­¥éª¤ 5ï¼šç”¨ #[Deprecated] è¿›è¡Œå†…éƒ¨ API æ¸…ç†</h4>
<p>ç”¨æ¸…æ™°çš„æ¶ˆæ¯æ ‡è®°æ—§æ–¹æ³•å’Œè¾…åŠ©å‡½æ•°ã€‚åœ¨ CI æ—¥å¿—ä¸­è·Ÿè¸ªä½¿ç”¨æƒ…å†µã€‚è®©å¼ƒç”¨å¯æ“ä½œã€‚</p>
<h4 data-id="heading-33">æ­¥éª¤ 6ï¼šåªåœ¨è„šæœ¬æˆ–éš”ç¦»æ¨¡å—ä¸­é‡‡ç”¨æ–° DOM API</h4>
<p>å¦‚æœä½ çš„åº”ç”¨åš HTML è§£æï¼Œæ–° API å¯èƒ½æ˜¯å¾ˆå¤§çš„æ”¹è¿›â€”â€”ä½†ä¸€å¼€å§‹ä¿æŒé‡‡ç”¨èŒƒå›´å—é™ã€‚</p>
<h4 data-id="heading-34">æ­¥éª¤ 7ï¼šæŠŠ lazy objects ç•™ç»™æ¡†æ¶/åŸºç¡€è®¾æ–½å±‚</h4>
<p>çŸ¥é“è¿™ä¸ªç‰¹æ€§å­˜åœ¨ã€‚ä¸è¦å¼ºè¡Œå¡è¿›åº”ç”¨ä»£ç ï¼Œé™¤éä½ æœ‰éå¸¸å…·ä½“çš„æ€§èƒ½æˆ–æ¶æ„åŸå› ã€‚</p>
<h3 data-id="heading-35">é€šå¾€ PHP 8.5 çš„æ¡¥æ¢ï¼ˆä¸ºä»€ä¹ˆ 8.4 è®©ä¸‹ä¸€æ­¥æ›´å®¹æ˜“ï¼‰</h3>
<p>ä¸€æ—¦ä½ çš„å›¢é˜Ÿç†Ÿæ‚‰äº† PHP 8.4 çš„"ç°ä»£åŸºçº¿"ï¼š</p>
<ul>
<li>DTO å› ä¸ºéå¯¹ç§°å¯è§æ€§ + hooks å˜å¾—æ›´å¹²å‡€</li>
<li>å¼ƒç”¨ç­–ç•¥å› ä¸º <code>#[Deprecated]</code> å˜å¾—æ›´ç³»ç»ŸåŒ–</li>
<li>æ•°ç»„é‡å‹ä»£ç å¯ä»¥ç”¨åŸç”Ÿè¾…åŠ©å‡½æ•°è¡¨è¾¾å¾—æ›´æ¸…æ™°</li>
<li>HTML è§£æå’Œå·¥å…·è„šæœ¬å˜å¾—ä¸é‚£ä¹ˆç—›è‹¦</li>
</ul>
<p>è¿™ä¸ªåŸºçº¿å‡å°‘äº†è¿ç§»åˆ° PHP 8.5 çš„æ‘©æ“¦ï¼Œå› ä¸ºä½ å·²ç»ç°ä»£åŒ–äº†ä»£ç åº“ä¸­å¯¹è±¡å’Œæ—¥å¸¸å·¥å…·çš„å†™æ³•ã€‚PHP 8.5 å°±ä¸å†æ˜¯"è¿½èµ¶"ï¼Œè€Œæ˜¯é€‰æ‹©æ€§åœ°é‡‡ç”¨æ”¹è¿›ã€‚</p>
<h3 data-id="heading-36">ç»“è®º</h3>
<p>PHP 8.4 ä¸æ˜¯ä¸€ä¸ª"è·³è¿‡å®ƒï¼Œç›´æ¥ä¸Š 8.5"çš„ç‰ˆæœ¬ã€‚åœ¨ 2026 å¹´ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªæ˜æ™ºçš„åŸºçº¿ï¼Œå› ä¸ºå®ƒå—æ”¯æŒã€å¹¿æ³›ç›¸å…³ï¼Œè€Œä¸”å®ƒæ”¹å˜äº†æ—¥å¸¸ PHP çš„äººä½“å·¥å­¦â€”â€”å°¤å…¶æ˜¯åœ¨ OOP å¯†é›†çš„ä»£ç åº“ä¸­ã€‚</p>
<p>å¦‚æœä½ ä»è¿™ç¯‡å›é¡¾ä¸­åªå¸¦èµ°ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯ property hooksâ€”â€”ä½†è¦å¸¦ç€æ„å›¾ä½¿ç”¨ï¼š</p>
<ul>
<li>ç”¨å®ƒä»¬åšä¸å˜é‡ã€è§„èŒƒåŒ–å’Œå¹²å‡€çš„æ´¾ç”Ÿå€¼ï¼Œ</li>
<li>æŠŠå®ƒä»¬å’Œéå¯¹ç§°å¯è§æ€§é…å¯¹åšå®ç”¨çš„ DTOï¼Œ</li>
<li>è®© hooks ä¿æŒæ— èŠï¼ˆå¾€å¥½çš„æ–¹å‘ï¼‰ã€‚</li>
</ul>
<p>è¿™ä¸ªç»„åˆè®©ä½ ä»Šå¤©å°±æœ‰æ›´å¹²å‡€çš„ 8.4 ä»£ç åº“â€”â€”ä»¥åŠå‡†å¤‡å¥½æ—¶é€šå¾€ 8.5 çš„æ›´å¹³æ»‘è·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å®è·µï¼šSpec-Codingï¼ŒAI ç‹¬ç«‹å®Œæˆå¤æ‚ UI å¼€å‘çš„å¯è¡Œæ€§æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7594389431835541545</link>    <guid>https://juejin.cn/post/7594389431835541545</guid>    <pubDate>2026-01-13T03:51:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389431835541545" data-draft-id="7594420277448785947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å®è·µï¼šSpec-Codingï¼ŒAI ç‹¬ç«‹å®Œæˆå¤æ‚ UI å¼€å‘çš„å¯è¡Œæ€§æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,VibeCoding"/> <meta itemprop="datePublished" content="2026-01-13T03:51:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒªçŒªæ‹†è¿é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2541726613638973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å®è·µï¼šSpec-Codingï¼ŒAI ç‹¬ç«‹å®Œæˆå¤æ‚ UI å¼€å‘çš„å¯è¡Œæ€§æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726613638973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒªçŒªæ‹†è¿é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T03:51:02.000Z" title="Tue Jan 13 2026 03:51:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒåä½œæµç¨‹å›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% é˜¶æ®µ 0: å¯åŠ¨ä¸æ·±åº¦æ¢æµ‹
    Start[è¾“å…¥åŸå‹ URL / æ–°é¡µé¢éœ€æ±‚] --&gt; HookB_Probe[æ¿€æ´» Hook B: è§†è§‰åè®®æ¡¥æ¥]
    
    subgraph MCP_Layer [MCP æ„ŸçŸ¥å±‚: AI çš„äº”æ„Ÿ]
        MCP_Nav[navigate_page: è®¿é—®åŸå‹]
        MCP_Snap[take_snapshot: DOM å®¡è®¡]
        MCP_Shot[take_screenshot: è§†è§‰é‡‡æ ·]
    end

    HookB_Probe --&gt; MCP_Nav
    MCP_Nav --&gt; MCP_Snap
    MCP_Snap --&gt; MCP_Shot

    %% é˜¶æ®µ 1: Spec ç”Ÿæˆä¸åŠ¨æ€æ ¡å‡†
    MCP_Shot --&gt; Spec_Gen[ç”Ÿæˆç»“æ„åŒ– Spec &amp; Task.md]
    
    subgraph Dynamic_Alignment [åŠ¨æ€æ ¡å‡†é—­ç¯]
        Spec_Gen --&gt;|å¾ªç¯é‡‡æ ·æ¢æµ‹| MCP_Snap
        MCP_Snap --&gt;|ç‰¹å¾åé¦ˆ| Spec_Gen
    end

    %% é˜¶æ®µ 2: è§„åˆ™æ³¨å…¥
    Spec_Gen --&gt; Rules_Layer[Rules æ³¨å…¥: AI é©±åŠ¨ UI å®ç°ä¸¥æ ¼è§„èŒƒ]
    
    subgraph Core_Rules [æ ¸å¿ƒåº•çº¿çº¦æŸ]
        R1[ç»„ä»¶æ˜ å°„: FuncTable/DyForm]
        R2[è§†è§‰è§„èŒƒ: Dark Mode/ç¦ç»¿ä»¤]
        R3[æ¶æ„æ¨¡å¼: MVC åˆ†ç¦»/i18n]
    end
    
    Rules_Layer -.-&gt; R1 &amp; R2 &amp; R3
    R1 &amp; R2 &amp; R3 -.-&gt;|å¾®è°ƒä»»åŠ¡ç»†åˆ™| Spec_Gen

    %% é˜¶æ®µ 3: å¢é‡ä»»åŠ¡æ‰§è¡Œ
    Spec_Gen --&gt; Task_Anchor[é…ç½®ç¯å¢ƒé”šç‚¹: åŒç½‘å€é”å®š]
    Task_Anchor --&gt; Task_Exec[åŸå­ä»»åŠ¡æ‰§è¡Œ: é˜¶æ®µ 1-4]

    %% é˜¶æ®µ 4: æ‰§è¡Œä¸­çš„ Hook æ ¡éªŒ
    subgraph Task_Hook [ä»»åŠ¡æ‰§è¡Œ UI Hook é—­ç¯]
        T_Before[æ‰§è¡Œå‰: MCP è®°å½•çŠ¶æ€]
        T_Code[ç”Ÿæˆå¹¶åº”ç”¨ä»£ç ]
        T_After[æ‰§è¡Œå: MCP æˆªå›¾å¯¹æ¯”]
        
        T_Before --&gt; T_Code --&gt; T_After
    end

    Task_Exec --&gt; T_Before
    T_After --&gt;|å­˜åœ¨åå·®| T_Code
    T_After --&gt;|æ ¡éªŒä¸€è‡´| Delivery[é«˜è´¨é‡äº¤ä»˜ &amp; ä»£ç åˆå¹¶]

    %% æ ·å¼å®šä¹‰
    style MCP_Layer fill:#e1f5fe,stroke:#01579b
    style Core_Rules fill:#fff3e0,stroke:#e65100
    style Task_Hook fill:#f3e5f5,stroke:#4a148c
    style Dynamic_Alignment stroke-dasharray: 5 5
</code></pre>
<h2 data-id="heading-1">ä¸€ã€ ä¸ºä»€ä¹ˆ Spec å®è·µæ˜¯ AI å¼€å‘è´¨é‡çš„ç»ˆæä¿è¯ï¼Ÿ</h2>
<p>åœ¨ AI å¼€å‘çš„æ—©æœŸï¼Œæˆ‘ä»¬å¾€å¾€è¿½æ±‚â€œä¸€å¥è¯ç”Ÿæˆé¡µé¢â€ã€‚ä½†å›åˆ°çœŸå®çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¿™ç§æ–¹å¼äº§å‡ºçš„ä»£ç å‡ ä¹ä¸å¯ç”¨ã€‚AI ä¼šäº§ç”Ÿä¸¥é‡çš„<strong>å¹»è§‰</strong>ï¼Œæˆ–è€…ä¸ºäº†è¿½æ±‚è§†è§‰ä¸€è‡´æ€§è€Œè¿›è¡Œæ— æ„ä¹‰çš„<strong>è¿‡åº¦è®¾è®¡</strong>ã€‚</p>
<p>é€šè¿‡ <strong>Spec-Coding (è§„èŒƒé©±åŠ¨)</strong> åè®®çš„å®è·µï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨å¯»æ‰¾ä¸€ç§â€œæœ€èªæ˜â€çš„æ¨¡å‹ï¼Œè€Œæ˜¯æ„å»ºä¸€å¥—<strong>è´¨é‡ä¸æ•ˆç‡çš„ç¡®å®šæ€§åº•çº¿</strong>ï¼š</p>
<ul>
<li><strong>æ¶ˆé™¤å¹»è§‰çº¦æŸ</strong>ï¼šSpec ä¸º AI æä¾›äº†æ¸…æ™°çš„æ“ä½œè¾¹ç•Œï¼Œé˜²æ­¢å…¶éšæ„å¼•å…¥éæ ‡åº“ã€æ‰‹å†™åŸç”Ÿ HTML æˆ–æ»¥ç”¨å†…è”æ ·å¼ã€‚</li>
<li><strong>è§£å†³é€»è¾‘æ–­å±‚</strong>ï¼šé€šè¿‡é¢„å®šä¹‰çš„æ¶æ„åè®®ï¼Œç¡®ä¿ AI ç”Ÿæˆçš„ä»£ç é€»è¾‘è‡ªæ´½ï¼Œè€Œéä¸€å †æ— æ³•è¿è¡Œçš„ UI å ä½ç¬¦ã€‚</li>
<li><strong>è§„æ¨¡åŒ–äº¤ä»˜çš„å…±æ€§</strong>ï¼šå½“å›¢é˜Ÿæ‰€æœ‰ AI å¼€å‘éƒ½éµå¾ªåŒä¸€å¥— Specï¼Œäº§å‡ºçš„ä»£ç åœ¨å¯ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§ä¸Šèƒ½è¾¾åˆ°é«˜åº¦ç»Ÿä¸€ï¼Œé¿å…äº†â€œåƒäººåƒé¢â€çš„ä»£ç æ±¡æŸ“ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€ æ ¸å¿ƒæ¶æ„ï¼šRules, Hook &amp; MCP çš„ååŒé“¾è·¯</h2>
<p>è¯¥æ–¹æ¡ˆçš„å¯è¡Œæ€§æ ¸å¿ƒåœ¨äºå°†â€œäººçœ¼è¯†åˆ«çš„è§„èŒƒâ€è½¬åŒ–ä¸ºâ€œæœºå™¨æ‰§è¡Œçš„è‡ªåŠ¨åŒ–æŒ‡ä»¤â€ã€‚æˆ‘ä»¬å»ºç«‹äº†ä¸€ä»½**ã€ŠAI é©±åŠ¨ï¼šUI å®ç°ä¸ä»»åŠ¡æ‰§è¡Œä¸¥æ ¼è§„èŒƒã€‹**ä½œä¸ºæ ¸å¿ƒæŒ‡å¯¼æ–‡æ¡£ã€‚å…¶åº•å±‚é€»è¾‘å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-3">1. åä½œæµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åŸå‹è¾“å…¥ URL/é“¾æ¥] --&gt; B{æ˜¯å¦æœ‰ Figma è®¾è®¡ç¨¿?}
    B -- æ—  Figma / åªæœ‰åŸå‹ --&gt; C[æ¿€æ´» Hook B: æ·±åº¦æ¢æµ‹]
    B -- æœ‰ Figma --&gt; D[DLS å˜é‡æ˜ å°„ &amp; æˆªå›¾è¿˜åŸ]
    
    C --&gt; E[MCP Chrome DevTools]
    E --&gt; F[æ ¸å¿ƒæ„å›¾è¯†åˆ«]
    
    F --&gt; G[ç”Ÿæˆç»“æ„åŒ– Spec &amp; Task.md]
    G -.-&gt;|ä¸æ–­è°ƒç”¨ MCP é‡‡æ ·æ ¡éªŒ| E
    
    G --&gt; H[Rules çº¦æŸæ³¨å…¥: UI å®ç°ä¸¥æ ¼è§„èŒƒ]
    H -.-&gt;|æ ¹æ®è§„èŒƒå¾®è°ƒä»»åŠ¡ç»†åˆ™| G
    
    H --&gt; I[åŸå­ä»»åŠ¡æ‰§è¡Œ]
    I --&gt; J[Hook A: åˆè§„æ€§è‡ªæ£€]
    J --&gt; K[MCP å¾ªç¯æ ¡éªŒ]
    
    K -- è§†è§‰/ä»£ç åå·® --&gt; I
    K -- æ ¡éªŒé€šè¿‡ --&gt; L[é«˜è´¨é‡äº¤ä»˜]
</code></pre>
<h3 data-id="heading-4">2. ä¸‰å¤§æ”¯æŸ±çš„èŒè´£åˆ†å·¥</h3>
<ul>
<li><strong>Rules (è§„åˆ™å±‚)</strong> ï¼šä»¥ã€ŠAI é©±åŠ¨ï¼šUI å®ç°ä¸ä»»åŠ¡æ‰§è¡Œä¸¥æ ¼è§„èŒƒã€‹ä¸ºå‡†åˆ™ï¼Œå®šä¹‰äº†è§†è§‰åº•çº¿ã€ç»„ä»¶æ˜ å°„è§„åˆ™ï¼ˆå¦‚å¼ºåˆ¶å¤ç”¨æ ‡å‡†è¡¨æ ¼/è¡¨å•ç»„ä»¶ï¼‰ä»¥åŠæ¶æ„æ¨¡å¼ï¼ˆå¦‚ MVC åˆ†ç¦»ï¼‰ï¼Œç¡®ä¿ AI è¾“å‡ºä¸åç¦»å›¢é˜ŸåŸºå»ºã€‚</li>
<li><strong>Hook (é’©å­å±‚)</strong> ï¼šä½œä¸ºâ€œæ‹¦æˆªå™¨â€ï¼Œåœ¨ä»£ç å†™å…¥å‰æ ¡éªŒç»„ä»¶å¤ç”¨ã€æ ·å¼åŸå­åŒ–åŠè¯·æ±‚æ¨¡å¼ï¼Œå¹¶è´Ÿè´£ä»è§†è§‰ä¿¡å·åˆ°å¼€å‘ä»»åŠ¡çš„ç¿»è¯‘ã€‚</li>
<li><strong>MCP (èƒ½åŠ›å±‚)</strong> ï¼šèµ‹äºˆ AI â€œäº”æ„Ÿâ€ã€‚é€šè¿‡ <strong>Chrome DevTools MCP</strong>ï¼Œè®© AI èƒ½å¤Ÿå®æ—¶æ„ŸçŸ¥æµè§ˆå™¨çœŸå®çš„è¿è¡Œç¯å¢ƒï¼Œè§£å†³â€œç›²ç›®ç¼–ç â€å¸¦æ¥çš„è§†è§‰ä¸é€»è¾‘åå·®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ æ·±åº¦å®è·µä¸­çš„éš¾ç‚¹ä¸ç ´è§£ä¹‹é“</h2>
<p>åœ¨è·‘é€šè¿™ä¸€é“¾è·¯çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹æ”»å…‹äº†å‡ ä¸ªä»¤å¼€å‘è€…å¤´ç–¼çš„å·¥ç¨‹éš¾é¢˜ï¼š</p>
<h3 data-id="heading-6">1. è§£å†³ UI è¿˜åŸä¸ç»„ä»¶æŠ½è±¡çš„å†²çª</h3>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šAI å€¾å‘äºé€šè¿‡å †ç Œ CSS å®ç°åƒç´ çº§è¿˜åŸï¼Œè¿™å¾€å¾€å¯¼è‡´åµŒå¥—ææ·±ã€éš¾ä»¥ç»´æŠ¤ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šåˆ©ç”¨ <strong>MCP è§†è§‰å®¡è®¡</strong>ï¼Œå°†é¡µé¢æ‹†è§£ä¸ºç»„ä»¶æ ‘ã€‚AI å¿…é¡»å…ˆç¡®è®¤å¸ƒå±€é‡å¿ƒï¼Œå†åº”ç”¨ Rules è¿›è¡Œç»„ä»¶æ˜ å°„ã€‚è¿™æ„å‘³ç€ AI ä¼šä¼˜å…ˆæ€è€ƒâ€œè¿™é‡Œè¯¥ç”¨å“ªä¸ªå…¬å…±ç»„ä»¶â€ï¼Œè€Œä¸æ˜¯â€œè¿™é‡Œè¯¥å†™å“ªä¸ª CSS å±æ€§â€ã€‚</li>
</ul>
<h3 data-id="heading-7">2. è§„é¿ä»£ç ä¸å¯ç”¨ä¸é€»è¾‘ç©ºæ´</h3>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šç”Ÿæˆçš„ä»£ç å¾€å¾€ç¼ºå¤± Loadingã€Error å¤„ç†æˆ– API é“¾è·¯ä¸é€šã€‚</li>
<li><strong>è§£å†³</strong>ï¼šå®æ–½ <strong>â€œç¯å¢ƒé”šç‚¹â€å¼ºåˆ¶åŒ–</strong>ã€‚åœ¨ Task é¡¶éƒ¨é”å®šé¢„è§ˆåœ°å€ï¼ŒAI åœ¨ç”Ÿæˆæ¯ä¸€é˜¶æ®µé€»è¾‘åï¼Œå¿…é¡»é€šè¿‡ MCP å›è®¿é¡µé¢éªŒè¯äº¤äº’æ˜¯å¦é—­ç¯ï¼Œè€Œéä¸€æ¬¡æ€§â€œç›²å†™â€åˆ°åº•ã€‚</li>
</ul>
<h3 data-id="heading-8">3. å¤„ç†â€œåªæœ‰åŸå‹ï¼Œæ²¡æœ‰è®¾è®¡ç¨¿â€çš„æç«¯æƒ…å†µ</h3>
<p>è¿™æ˜¯æœ€èƒ½ä½“ç°æ–¹æ¡ˆå¯è¡Œæ€§çš„åœºæ™¯ã€‚å½“æ‰‹ä¸­åªæœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ Web åŸå‹ URL æ—¶ï¼Œé€šè¿‡ <strong>Hook B é©±åŠ¨ MCP æ¢æµ‹</strong>ï¼ŒAI èƒ½è‡ªåŠ¨æå– DOM ç»“æ„å’Œäº¤äº’é“¾è·¯ï¼Œç”Ÿæˆé«˜åº¦è¿˜åŸçš„ Specã€‚è¿™åœ¨è€æ—§é¡¹ç›®é‡æ„æˆ–ç«å“åˆ†æåœºæ™¯ä¸‹æå¤§åœ°é™ä½äº† UI é€†å‘å·¥ç¨‹çš„æˆæœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ ä¸¤ç§å®è·µè·¯å¾„çš„ä½“éªŒæ€»ç»“</h2>
<h3 data-id="heading-10">åœºæ™¯ Aï¼šæ—  Figmaï¼Œåªæœ‰ Web åŸå‹ (å¯¹é½æ¨¡å¼)</h3>
<p>åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ <strong>Chrome DevTools MCP</strong> å¼ºè¡Œè¡¥é½äº†ä¿¡æ¯å·®ã€‚AI é€šè¿‡â€œè§‚å¯Ÿâ€åŸå‹çš„ Spacing èŠ‚å¥å’Œäº¤äº’åé¦ˆï¼Œå®ç°äº†é«˜ä¿çœŸçš„ä»£ç é‡æ„ã€‚è™½ç„¶è¿‡ç¨‹æ¶‰åŠå¤šè½® Hook æ ¡éªŒï¼Œä½†äº§å‡ºçš„ä»£ç å¥å£®æ€§è¿œè¶…äººå·¥æ‰‹åŠ¨ä¸´æ‘¹ã€‚</p>
<h3 data-id="heading-11">åœºæ™¯ Bï¼šåŸºäº Figma (MCP é©±åŠ¨æ¨¡å¼)</h3>
<p>å½“æ‹¥æœ‰ Figma æ—¶ï¼Œé€šè¿‡<strong>Figma MCP</strong>çš„<strong>DLS (Design Language System) å˜é‡</strong>ä¸æˆªå›¾ï¼Œè¿˜åŸåº¦å¯ç›´æ¥è¾¾åˆ° 95% ä»¥ä¸Šã€‚æ­¤æ—¶ AI çš„å·¥ä½œé‡å¿ƒä¸å†æ˜¯åƒç´ ï¼Œè€Œæ˜¯è½¬å‘ <strong>Rules åˆè§„æ€§</strong>ï¼Œé‡ç‚¹ç¡®ä¿ API è¯·æ±‚æ¨¡å¼ã€æ§åˆ¶å™¨é€»è¾‘å®Œå…¨ç¬¦åˆå›¢é˜Ÿçš„å·¥ç¨‹æ ‡å‡†ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€ æ€»ç»“ï¼šAI å¼€å‘çš„æœ¬è´¨æ˜¯åè®®çš„èƒœåˆ©</h2>
<p>é€šè¿‡æœ¬æ¬¡å®è·µï¼Œæˆ‘ä»¬å‘ç°ï¼šå¦‚æœè¯´å¤§æ¨¡å‹çš„èƒ½åŠ›å†³å®šäº†ç”Ÿæˆçš„<strong>ä¸Šé™</strong>ï¼Œé‚£ä¹ˆä¸¥å¯†çš„åè®®åˆ™å†³å®šäº†äº¤ä»˜çš„<strong>ä¸‹é™</strong>ã€‚åè®®çš„ä½œç”¨ï¼Œæ˜¯è®© AI åœ¨å¤„ç†å¤æ‚ä¸šåŠ¡æ—¶ï¼Œä»<strong>éšæœºçš„çµæ„Ÿé—ªç°</strong>è½¬åŒ–ä¸º<strong>ç¨³å®šçš„å·¥ç¨‹è¾“å‡º</strong>ã€‚</p>
<p>æŠ˜è…¾å®Œè¿™ä¸€æ•´å¥—ä½“ç³»åï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯ï¼šAI ç¼–ç¨‹ç»ˆäºä»â€˜æŠ½å¡æ’è¿æ°”â€™å˜æˆäº†â€˜ç…§æ–¹æŠ“è¯â€™ã€‚å½“æ¨¡å‹èƒ½åŠ›ï¼ˆæ™ºå•†ï¼‰è¶³å¤Ÿå¼ºæ—¶ï¼Œè¿™å¥— Spec å°±åƒæ˜¯ä¸€æ¡å·¥ä¸šä¼ é€å¸¦ï¼ŒæŠŠ AI é‚£äº›å¤©é©¬è¡Œç©ºçš„å¹»è§‰æ”¶æ‹¢è¿›å·¥ç¨‹è§„èŒƒé‡Œã€‚æ¯•ç«Ÿå¯¹æˆ‘ä»¬ä¸šåŠ¡å¼€å‘æ¥è¯´ï¼Œä¸€ä¸ªå¬è¯ã€ç¨³å®šã€ä¸ä¹±å†™ä»£ç çš„ AIï¼Œè¿œæ¯”ä¸€ä¸ªå¶å°”èƒ½å†™å‡ºâ€˜ç¥æ¥ä¹‹ç¬”â€™ä½†å¤§å¤šæ—¶å€™åœ¨æŒ–å‘çš„ AI è¦é è°±å¾—å¤š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Lottie-web æºç è§£æï¼ˆä¸€ï¼‰ï¼šä» JSON Schema è®¤è¯† Lottie åŠ¨ç”»çš„æœ¬è´¨ğŸ“’]]></title>    <link>https://juejin.cn/post/7594389937463033866</link>    <guid>https://juejin.cn/post/7594389937463033866</guid>    <pubDate>2026-01-13T02:34:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389937463033866" data-draft-id="7583980250734116927" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Lottie-web æºç è§£æï¼ˆä¸€ï¼‰ï¼šä» JSON Schema è®¤è¯† Lottie åŠ¨ç”»çš„æœ¬è´¨ğŸ“’"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2026-01-13T02:34:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“¨å«å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2159893031168119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Lottie-web æºç è§£æï¼ˆä¸€ï¼‰ï¼šä» JSON Schema è®¤è¯† Lottie åŠ¨ç”»çš„æœ¬è´¨ğŸ“’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159893031168119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“¨å«å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:34:12.000Z" title="Tue Jan 13 2026 02:34:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»41åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>Lottie çš„æœ¬è´¨æ˜¯Â <strong>After Effects åŠ¨ç”»çš„ Web æ’­æ”¾å™¨</strong>ï¼Œå…¶å·¥ä½œæµç¨‹æ¸…æ™°ç®€æ´ï¼š</p>
<ol>
<li><strong>è®¾è®¡</strong>Â â†’ è®¾è®¡å¸ˆåœ¨ <strong>After Effectsï¼ˆAEï¼‰</strong> ä¸­åˆ¶ä½œçŸ¢é‡åŠ¨ç”»</li>
<li><strong>å¯¼å‡º</strong>Â â†’ é€šè¿‡ Bodymovin æ’ä»¶å°†åŠ¨ç”»å¯¼å‡ºä¸ºè½»é‡çš„Â <code>data.json</code>Â æ–‡ä»¶</li>
<li><strong>æ’­æ”¾</strong>Â â†’ web å¼€å‘è€…ä½¿ç”¨Â <code>lottie-web</code>Â åº“è§£æè¯¥ JSONï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­å®æ—¶æ¸²æŸ“åŠ¨ç”»</li>
</ol>
<p>è‹¥æƒ³æ·±å…¥ç†è§£ Lottie çš„åŠ¨ç”»æœºåˆ¶ï¼Œä»Â <strong>JSON Schema</strong>Â å…¥æ‰‹æ˜¯ä¸€æ¡æ¸…æ™°çš„è·¯å¾„ã€‚Lottie æ˜¯ä¸€ä¸ªå®Œå…¨ç”±æ•°æ®é©±åŠ¨çš„åŠ¨ç”»ç³»ç»Ÿï¼ŒæŒæ¡å…¶ JSON ç»“æ„ï¼Œå°±ç­‰äºæ¡ä½äº†ç†è§£åŠ¨ç”»æ¸²æŸ“é€»è¾‘çš„é’¥åŒ™ã€‚å½“ç„¶ï¼ŒLottie JSON çš„é…ç½®é¡¹è¾ƒä¸ºä¸°å¯Œï¼Œä¸å¿…è¿½æ±‚ä¸€æ¬¡æ€§å…¨éƒ¨è®°ä½ã€‚æœ¬æ–‡æ—¨åœ¨å¸®åŠ©å¤§å®¶å»ºç«‹åˆæ­¥è®¤çŸ¥ï¼Œä¸ºåç»­å­¦ä¹ æ¸²æŸ“å¼•æ“æ‰“ä¸‹åŸºç¡€ï¼Œåšåˆ°â€œçŸ¥å…¶ç„¶ï¼Œäº¦çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚</p>
<h2 data-id="heading-0"><strong>ä¸€ã€åˆè¯† data.json ï¼šåŠ¨ç”»æ•°æ®çš„é¡¶å±‚ç»“æ„</strong></h2>
<p>Lottie åŠ¨ç”»çš„æœ¬è´¨æ˜¯ä¸€å¥—<strong>ç”±æ•°æ®é©±åŠ¨çš„å›¾å½¢ç»˜åˆ¶æŒ‡ä»¤é›†</strong>ï¼Œè€ŒÂ <code>data.json</code>Â æ–‡ä»¶æ­£æ˜¯è¿™å¥—æŒ‡ä»¤çš„å®Œæ•´è½½ä½“ã€‚å…¶<strong>é¡¶å±‚ç»“æ„</strong>å®šä¹‰äº†åŠ¨ç”»çš„å…¨å±€å…ƒä¿¡æ¯ï¼Œå¦‚åŒç”µå½±çš„â€œå¯¼æ¼”å°æœ¬â€ï¼Œè®¾å®šäº†åŠ¨ç”»æ’­æ”¾çš„<strong>ç”»å¸ƒå°ºå¯¸ã€æ—¶é—´çº¿ä¸åŸºç¡€ç¯å¢ƒ</strong>ã€‚ç†è§£è¿™äº›å­—æ®µï¼Œæ˜¯åç»­æ·±å…¥è§£æå›¾å±‚ã€å…³é”®å¸§ç­‰å¤æ‚å±æ€§çš„æ ¹åŸºã€‚</p>
<h3 data-id="heading-1"><strong>é¡¶å±‚å…ƒæ•°æ®ï¼šåŠ¨ç”»çš„å…¨å±€å®šä¹‰</strong></h3>
<p>ä¸‹è¡¨åˆ—å‡ºäº†Â <code>data.json</code>Â æ ¹å¯¹è±¡ï¼ˆRoot Objectï¼‰ä¸­çš„æ ¸å¿ƒå…ƒæ•°æ®å­—æ®µï¼Œå®ƒä»¬å…±åŒæ¡†å®šäº†åŠ¨ç”»çš„æ—¶ç©ºå±æ€§ä¸æ¸²æŸ“åŸºç¡€ã€‚</p>




































































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th><th>å•ä½/å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>v</strong></td><td><code>string</code></td><td><strong>Bodymovin æ’ä»¶ç‰ˆæœ¬</strong>ï¼šç”Ÿæˆæ­¤ JSON æ‰€ç”¨çš„æ’ä»¶ç‰ˆæœ¬å·ï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½æ”¯æŒä¸åŒçš„ç‰¹æ€§ã€‚</td><td><code>"5.7.4"</code></td><td>-</td></tr><tr><td><strong>fr</strong></td><td><code>number</code></td><td><strong>å¸§ç‡ï¼ˆFrame Rateï¼‰</strong> ï¼šåŠ¨ç”»çš„æ’­æ”¾é€Ÿç‡ï¼Œç›´æ¥å†³å®šåŠ¨ç”»çš„æµç•…åº¦ä¸æ—¶é—´è®¡ç®—åŸºå‡†ã€‚</td><td><code>30</code>,Â <code>60</code></td><td>å¸§/ç§’ (fps)</td></tr><tr><td><strong>ip</strong></td><td><code>number</code></td><td><strong>èµ·å§‹å¸§ï¼ˆIn Pointï¼‰</strong> ï¼šåŠ¨ç”»æ—¶é—´è½´å¼€å§‹çš„ç»å¯¹å¸§ç¼–å·ã€‚</td><td><code>0</code></td><td>å¸§</td></tr><tr><td><strong>op</strong></td><td><code>number</code></td><td><strong>ç»“æŸå¸§ï¼ˆOut Pointï¼‰</strong> ï¼šåŠ¨ç”»æ—¶é—´è½´ç»“æŸçš„ç»å¯¹å¸§ç¼–å·ã€‚åŠ¨ç”»æ€»æ—¶é•¿ =Â <code>(op - ip) / fr</code>Â ç§’ã€‚</td><td><code>90</code></td><td>å¸§</td></tr><tr><td><strong>w</strong></td><td><code>number</code></td><td><strong>ç”»å¸ƒå®½åº¦</strong>ï¼šåŠ¨ç”»åˆæˆï¼ˆCompositionï¼‰çš„é€»è¾‘å®½åº¦ã€‚</td><td><code>800</code></td><td>åƒç´  (px)</td></tr><tr><td><strong>h</strong></td><td><code>number</code></td><td><strong>ç”»å¸ƒé«˜åº¦</strong>ï¼šåŠ¨ç”»åˆæˆçš„é€»è¾‘é«˜åº¦ã€‚</td><td><code>600</code></td><td>åƒç´  (px)</td></tr><tr><td><strong>nm</strong></td><td><code>string</code></td><td><strong>åˆæˆåç§°ï¼ˆNameï¼‰</strong> ï¼šå¯¹åº” After Effects ä¸­åˆæˆçš„åç§°ï¼Œä¾¿äºè¯†åˆ«ã€‚</td><td><code>"å…ƒæ•°æ®æ¼”ç¤ºåŠ¨ç”»"</code></td><td>-</td></tr><tr><td><strong>ddd</strong></td><td><code>integer</code></td><td><strong>3D å›¾å±‚æ ‡è¯†</strong>ï¼šæ ‡è¯†æ­¤åˆæˆä¸­<strong>æ˜¯å¦åŒ…å« 3D å›¾å±‚æˆ–æ‘„åƒæœº</strong>ã€‚<code>0</code>Â ä»£è¡¨å¦ï¼ˆé»˜è®¤ï¼‰ï¼Œ<code>1</code>Â ä»£è¡¨æ˜¯ã€‚</td><td><code>0</code></td><td>-</td></tr></tbody></table>
<p>ç»¼åˆä»¥ä¸Šå­—æ®µï¼Œä¸€ä¸ªå®šä¹‰äº†800x600ç”»å¸ƒã€30fpsã€æ—¶é•¿3ç§’çš„2DåŠ¨ç”»ï¼Œå…¶é¡¶å±‚ç»“æ„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"v"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5.7.4"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fr"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"op"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">90</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"w"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">800</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"h"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"nm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å…ƒæ•°æ®æ¼”ç¤ºåŠ¨ç”»"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ddd"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2"><strong>æ ¸å¿ƒç»„æˆï¼šå›¾å±‚ã€èµ„æºä¸å­—å½¢</strong></h3>
<p><code>assets</code>ã€<code>chars</code>Â ä¸Â <code>layers</code>Â æ˜¯æ„æˆ Lottie åŠ¨ç”»å†…å®¹çš„ä¸‰ä¸ªæ ¸å¿ƒæ•°æ®æ•°ç»„ã€‚å®ƒä»¬åˆ†åˆ«å®šä¹‰äº†å¯å¤ç”¨çš„ç´ æã€çŸ¢é‡å­—å½¢ä»¥åŠå›¾å±‚çš„åºåˆ—ä¸å±æ€§ï¼Œå…±åŒæè¿°äº†åŠ¨ç”»çš„å…¨éƒ¨è§†è§‰ä¿¡æ¯ä¸åŠ¨æ€è¡Œä¸ºã€‚</p>
<h4 data-id="heading-3"><strong><code>assets</code>Â - å¯å¤ç”¨èµ„æºåº“</strong></h4>
<p><code>assets</code>Â æ•°ç»„ç”¨äºé›†ä¸­å®šä¹‰åŠ¨ç”»ä¸­å¯è¢«å¤šæ¬¡å¼•ç”¨çš„é™æ€æˆ–åŠ¨æ€èµ„æºã€‚æ­¤è®¾è®¡å®ç°äº†èµ„æºå¤ç”¨ï¼Œæœ‰åŠ©äºä¼˜åŒ–æ–‡ä»¶ä½“ç§¯å¹¶ä¿è¯å¼•ç”¨çš„ä¸€è‡´æ€§ã€‚</p>


























<table><thead><tr><th>èµ„æºç±»å‹</th><th>ç±»å‹æ ‡è¯† (<code>ty</code>)</th><th>å†…å®¹æè¿°</th><th>å¼•ç”¨å­—æ®µ</th><th>ä¸»è¦ç”¨é€”</th></tr></thead><tbody><tr><td><strong>å›¾åƒèµ„æº</strong></td><td><code>"img"</code></td><td>åŒ…å«å›¾åƒIDã€å°ºå¯¸åŠæ–‡ä»¶è·¯å¾„æˆ–Base64ç¼–ç æ•°æ®ã€‚</td><td><code>refId</code></td><td>é™æ€ä½å›¾å…ƒç´ ï¼Œå¦‚å›¾æ ‡ã€èƒŒæ™¯ã€‚</td></tr><tr><td><strong>é¢„åˆæˆèµ„æº</strong></td><td><code>"precomp"</code></td><td>ä¸€ä¸ªå®Œæ•´çš„å­åˆæˆï¼ŒåŒ…å«ç‹¬ç«‹çš„å›¾å±‚(<code>layers</code>)ä¸æ—¶é—´è½´ã€‚</td><td><code>refId</code></td><td>å¯é‡å¤ä½¿ç”¨çš„åŠ¨ç”»ç‰‡æ®µï¼Œå¦‚é€šç”¨åŠ¨æ•ˆç»„ä»¶ã€‚</td></tr></tbody></table>
<p><strong>å¼•ç”¨æœºåˆ¶</strong>ï¼šå›¾å±‚é€šè¿‡å…¶Â <code>refId</code>Â å±æ€§ä¸Â <code>assets</code>Â ä¸­å¯¹åº”IDçš„èµ„æºè¿›è¡Œå…³è”ã€‚æ¸²æŸ“æ—¶ï¼Œå¼•æ“æ®æ­¤æŸ¥æ‰¾å¹¶ç»˜åˆ¶ç›¸åº”èµ„æºã€‚</p>
<h4 data-id="heading-4"><strong><code>chars</code>Â - çŸ¢é‡å­—å½¢å®šä¹‰</strong></h4>
<p><code>chars</code>Â æ•°ç»„å­˜å‚¨äº†å°†æ–‡å­—è½¬æ¢ä¸ºçŸ¢é‡å½¢çŠ¶åçš„æ•°æ®ã€‚å½“åŠ¨ç”»éœ€è¦å¯¹æ–‡å­—è¿›è¡Œè·¯å¾„å˜å½¢ã€æè¾¹åŠ¨ç”»ç­‰è¶…è¶Šæ™®é€šæ–‡æœ¬æ¸²æŸ“èƒ½åŠ›çš„æ“ä½œæ—¶ï¼Œä¼šä½¿ç”¨æ­¤æ•°ç»„ã€‚</p>
<ul>
<li><strong>äº§ç”Ÿæ¡ä»¶</strong>ï¼šåœ¨After Effectsä¸­å¯¹æ–‡æœ¬å›¾å±‚æ‰§è¡Œâ€œä»æ–‡å­—åˆ›å»ºå½¢çŠ¶â€ï¼Œæˆ–åœ¨å¯¼å‡ºæ—¶å¯ç”¨â€œå­—ç¬¦å½¢çŠ¶â€é€‰é¡¹ã€‚</li>
<li><strong>æ•°æ®ç»“æ„</strong>ï¼šæ¯ä¸ªé¡¹å®šä¹‰äº†å­—ç¬¦ã€å­—ä½“ä¿¡æ¯åŠå…¶çŸ¢é‡è·¯å¾„(<code>data</code>)ï¼Œè¯¥è·¯å¾„æ•°æ®åŒ…å«è½®å»“ã€æè¾¹ä¸å¡«å……ç­‰å±æ€§ã€‚</li>
<li><strong>æ ¸å¿ƒç”¨é€”</strong>ï¼šå®ç°å¯¹æ–‡å­—å­—ç¬¦çš„ç²¾ç»†åŒ–æ§åˆ¶ï¼Œç”¨äºåˆ¶ä½œå­—å½¢å˜å½¢ã€ç¬”ç”»åŠ¨ç”»ç­‰æ•ˆæœã€‚</li>
</ul>
<h4 data-id="heading-5"><strong><code>layers</code>Â - åŠ¨ç”»å›¾å±‚åºåˆ—</strong></h4>
<p><code>layers</code>Â æ˜¯ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œå®šä¹‰äº†æ‰€æœ‰å›¾å±‚çš„å åŠ é¡ºåºã€åŸºæœ¬å±æ€§åŠå…³é”®å¸§åŠ¨ç”»ã€‚å®ƒæ˜¯ç»„ç»‡åŠ¨ç”»æ¸²æŸ“é€»è¾‘çš„ä¸»ä½“ã€‚</p>
<ul>
<li><strong>æ¸²æŸ“é¡ºåº</strong>ï¼šæ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œå›¾å±‚æŒ‰ç´¢å¼•å‡åºä»åº•å±‚åˆ°é¡¶å±‚ä¾æ¬¡æ¸²æŸ“ã€‚</li>
<li><strong>æ ¸å¿ƒå±æ€§</strong>ï¼šæ¯ä¸ªå›¾å±‚å¯¹è±¡åŒ…å«ç±»å‹ï¼ˆå¦‚å½¢çŠ¶ã€å›¾åƒã€æ–‡æœ¬ï¼‰ã€ç©ºé—´å˜æ¢å±æ€§ã€è’™ç‰ˆä»¥åŠå…³é”®å¸§åŠ¨ç”»æ•°æ®ã€‚</li>
<li><strong>å…³é”®ä½œç”¨</strong>ï¼š<code>assets</code>Â å’ŒÂ <code>chars</code>Â ä¸­å®šä¹‰çš„èµ„æºéœ€åœ¨æ­¤è¢«å¼•ç”¨ï¼Œå¹¶é€šè¿‡å›¾å±‚çš„åŠ¨ç”»å±æ€§é©±åŠ¨ï¼Œæ‰èƒ½æˆä¸ºæœ€ç»ˆåŠ¨ç”»çš„ä¸€éƒ¨åˆ†ã€‚</li>
</ul>
<p><strong>åä½œå…³ç³»</strong>ï¼š<code>assets</code>Â å’ŒÂ <code>chars</code>Â ä½œä¸ºèµ„æºå®šä¹‰ï¼Œä¸ºÂ <code>layers</code>Â æä¾›ç´ æï¼›<code>layers</code>Â åˆ™è´Ÿè´£ç»„ç»‡è¿™äº›ç´ æï¼Œå¹¶é€šè¿‡å…¶æ—¶é—´è½´å’Œå±æ€§æ§åˆ¶åŠ¨ç”»çš„æœ€ç»ˆè¡¨ç°ã€‚ä¸€ä¸ªå®Œæ•´çš„ç»“æ„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"v"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5.7.4"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fr"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"op"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">90</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"w"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">800</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"h"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"nm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å…ƒæ•°æ®æ¼”ç¤ºåŠ¨ç”»"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ddd"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"assets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"layers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"chars"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-6"><strong>äºŒã€å›¾å±‚ç³»ç»Ÿ - ç†è§£ Layers ç»“æ„</strong>â­ï¸</h2>
<p><code>layers</code> æ•°ç»„æ˜¯ Lottie JSON ä¸­æ‰¿è½½æ‰€æœ‰åŠ¨ç”»å›¾å±‚ä¿¡æ¯çš„ä¸»ä½“ã€‚å®ƒå®šä¹‰äº†å›¾å±‚çš„å †å é¡ºåºã€å±æ€§åŠå…³é”®å¸§åŠ¨ç”»ï¼Œæ˜¯æ„æˆåŠ¨ç”»è§†è§‰å‘ˆç°ä¸åŠ¨æ€è¡Œä¸ºçš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚Lottie ä¸»è¦åŒ…å«ä»¥ä¸‹å…­ç§åŸºç¡€å›¾å±‚ç±»å‹ï¼š</p>








































<table><thead><tr><th>ç±»å‹æ ‡è¯† (<code>ty</code>)</th><th>å›¾å±‚ç±»å‹</th><th>æ ¸å¿ƒæè¿°</th></tr></thead><tbody><tr><td><strong>0</strong></td><td><strong>é¢„åˆæˆå›¾å±‚ (Precomp Layer)</strong></td><td>åµŒå¥—åˆæˆå±‚ï¼Œé€šè¿‡ <code>refId</code> å¼•ç”¨ <code>assets</code> ä¸­å®šä¹‰çš„é¢„åˆæˆèµ„æºï¼Œå®ç°åŠ¨ç”»å¤ç”¨ä¸æ¨¡å—åŒ–ç®¡ç†ã€‚</td></tr><tr><td><strong>1</strong></td><td><strong>çº¯è‰²å›¾å±‚ (Solid Layer)</strong></td><td>çº¯è‰²å¡«å……å±‚ï¼Œå®šä¹‰å›ºå®šé¢œè‰²çš„çŸ©å½¢åŒºåŸŸï¼Œå¸¸ç”¨ä½œèƒŒæ™¯æˆ–é®ç½©ã€‚</td></tr><tr><td><strong>2</strong></td><td><strong>å›¾åƒå›¾å±‚ (Image Layer)</strong></td><td>é™æ€å›¾ç‰‡å±‚ï¼Œé€šè¿‡ <code>refId</code> å¼•ç”¨ <code>assets</code> ä¸­å®šä¹‰çš„å›¾åƒèµ„æºã€‚</td></tr><tr><td><strong>3</strong></td><td><strong>ç©ºå¯¹è±¡å›¾å±‚ (Null Layer)</strong></td><td>ä¸å¯è§è¾…åŠ©å±‚ï¼Œä¸»è¦ç”¨äºé€šè¿‡å…¶ <code>ks</code> å±æ€§ï¼ˆå˜æ¢æ•°æ®ï¼‰é©±åŠ¨å­å›¾å±‚åŠ¨ç”»ï¼Œæˆ–ä½œä¸ºåŠ¨ç”»æ§åˆ¶å™¨ã€‚</td></tr><tr><td><strong>4</strong></td><td><strong>å½¢çŠ¶å›¾å±‚ (Shape Layer)</strong></td><td>çŸ¢é‡å›¾å½¢å±‚ï¼Œç”±è·¯å¾„ã€æè¾¹ã€å¡«å……ç­‰å±æ€§æ„æˆï¼Œæ˜¯åˆ¶ä½œå˜å½¢ã€è·¯å¾„åŠ¨ç”»çš„åŸºç¡€ã€‚</td></tr><tr><td><strong>5</strong></td><td><strong>æ–‡æœ¬å›¾å±‚ (Text Layer)</strong></td><td>æ–‡å­—å›¾å±‚ï¼Œå¯å®šä¹‰å­—ä½“ã€é¢œè‰²ã€æ®µè½æ ·å¼ï¼Œå¹¶æ”¯æŒé€å­—ç¬¦åŠ¨ç”»ã€‚</td></tr></tbody></table>
<p>æ‰€æœ‰å›¾å±‚å…±äº«ä¸€ç»„åŸºç¡€å±æ€§ï¼Œç”¨äºå®šä¹‰å…¶åœ¨åˆæˆä¸­çš„åŸºæœ¬çŠ¶æ€ä¸æ—¶ç©ºå…³ç³»ã€‚</p>
<p>ä»¥ä¸‹å±æ€§ä¸º<strong>æ‰€æœ‰å›¾å±‚ç±»å‹</strong>å…±æœ‰çš„åŸºç¡€å±æ€§ï¼š</p>





















































































































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><strong><code>ty</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>å›¾å±‚ç±»å‹æ ‡è¯†</strong>ï¼Œå†³å®šå›¾å±‚çš„è¡Œä¸ºå’Œæ•°æ®ç»“æ„ï¼ˆè§ä¸Šè¡¨ï¼‰</td><td><code>0</code>-<code>5</code></td><td>-</td></tr><tr><td><strong><code>nm</code></strong></td><td><code>string</code> / <code>number</code></td><td>å¦</td><td><strong>å›¾å±‚åç§°</strong>ï¼Œåœ¨ After Effects ä¸­è®¾ç½®ï¼Œç”¨äºè¡¨è¾¾å¼å’Œè°ƒè¯•</td><td><code>"æŒ‰é’®èƒŒæ™¯"</code>, <code>"Layer 1"</code></td><td>-</td></tr><tr><td><strong><code>ind</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>å›¾å±‚ç´¢å¼•</strong>ï¼Œåœ¨æ•´ä¸ªåˆæˆä¸­å”¯ä¸€ï¼Œç”¨äºçˆ¶å­å…³è”å’Œè¡¨è¾¾å¼å¼•ç”¨</td><td><code>1</code>, <code>2</code>, <code>3</code></td><td>-</td></tr><tr><td><strong><code>ip</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>å…¥ç‚¹ (In Point)</strong>ï¼Œå›¾å±‚å¼€å§‹æ˜¾ç¤ºçš„å¸§æ•°</td><td><code>0</code>, <code>30</code></td><td>-</td></tr><tr><td><strong><code>op</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>å‡ºç‚¹ (Out Point)</strong>ï¼Œå›¾å±‚ç»“æŸæ˜¾ç¤ºçš„å¸§æ•°</td><td><code>90</code>, <code>180</code></td><td>-</td></tr><tr><td><strong><code>st</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>èµ·å§‹æ—¶é—´ (Start Time)</strong>ï¼Œå›¾å±‚çš„æ—¶é—´åç§»é‡</td><td><code>0</code>, <code>10</code></td><td>-</td></tr><tr><td><strong><code>sr</code></strong></td><td><code>number</code></td><td>å¦</td><td><strong>æ—¶é—´æ‹‰ä¼¸ (Stretch)</strong>ï¼Œæ§åˆ¶å›¾å±‚æ’­æ”¾é€Ÿåº¦çš„ç³»æ•°</td><td><code>1</code> (æ­£å¸¸), <code>0.5</code> (å‡é€Ÿ), <code>2</code> (åŠ é€Ÿ)</td><td><code>1</code></td></tr><tr><td><strong><code>ks</code></strong></td><td><code>object</code></td><td>æ˜¯</td><td><strong>å˜æ¢å±æ€§ (Transform)</strong>ï¼ŒåŒ…å«ä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬ã€é€æ˜åº¦ç­‰å…³é”®å¸§æ•°æ®</td><td>è§ä¸‹æ–¹è¯¦è§£</td><td>-</td></tr><tr><td><strong><code>ao</code></strong></td><td><code>number</code></td><td>å¦</td><td><strong>è‡ªåŠ¨å®šå‘ (Auto-Orient)</strong>ï¼Œæ²¿è·¯å¾„è‡ªåŠ¨è°ƒæ•´å›¾å±‚æ–¹å‘ï¼ˆå¸ƒå°”å€¼ï¼š0/1ï¼‰</td><td><code>0</code> (å…³é—­), <code>1</code> (å¼€å¯)</td><td><code>0</code></td></tr><tr><td><strong><code>ddd</code></strong></td><td><code>number</code></td><td>å¦</td><td><strong>3D å›¾å±‚æ ‡è¯†</strong>ï¼Œæ ‡è®°è¯¥å›¾å±‚æ˜¯å¦ä¸º 3D å›¾å±‚ï¼ˆå¸ƒå°”å€¼ï¼š0/1ï¼‰</td><td><code>0</code> (2D), <code>1</code> (3D)</td><td><code>0</code></td></tr><tr><td><strong><code>parent</code></strong></td><td><code>number</code></td><td>å¦</td><td><strong>çˆ¶å›¾å±‚ç´¢å¼•</strong>ï¼ŒæŒ‡å‘çˆ¶å›¾å±‚çš„ <code>ind</code> å€¼ï¼Œå®ç°å±‚çº§æ§åˆ¶å’Œè”åŠ¨å˜æ¢</td><td><code>1</code>, <code>5</code></td><td>-</td></tr><tr><td><strong><code>cl</code></strong></td><td><code>string</code></td><td>å¦</td><td><strong>CSS ç±»å (Class)</strong>ï¼Œåœ¨ SVG/HTML æ¸²æŸ“å™¨ä¸­ä½œä¸º HTML class</td><td><code>"background"</code>, <code>"icon"</code></td><td>-</td></tr><tr><td><strong><code>ln</code></strong></td><td><code>string</code></td><td>å¦</td><td><strong>HTML ID</strong>ï¼Œåœ¨ SVG/HTML æ¸²æŸ“å™¨ä¸­ä½œä¸º HTML id å±æ€§</td><td><code>"layer-bg"</code>, <code>"main-icon"</code></td><td>-</td></tr></tbody></table>
<p>ä»¥ä¸Š13ä¸ªé€šç”¨å±æ€§ä¸­ï¼Œæœ‰Â <strong>3ä¸ª</strong>ï¼ˆ<code>ip</code>ã€<code>op</code>ã€<code>nm</code>ï¼‰ä¸æ ¹å¯¹è±¡ä¸­çš„æ¦‚å¿µ<strong>å®Œå…¨ä¸€è‡´</strong>ï¼Œä»…ä½œç”¨åŸŸä¸åŒã€‚<strong>1ä¸ª</strong>ï¼ˆ<code>ddd</code>ï¼‰ä¸æ ¹å¯¹è±¡æ¦‚å¿µ<strong>ç›¸ä¼¼ä½†æœ‰åŒºåˆ«</strong>ï¼šæ ¹å¯¹è±¡çš„Â <code>ddd</code>Â è¡¨ç¤ºåˆæˆâ€œæ˜¯å¦åŒ…å«â€3Då…ƒç´ ï¼Œè€Œå›¾å±‚çš„Â <code>ddd</code>Â è¡¨ç¤ºå…¶â€œæœ¬èº«æ˜¯å¦ä¸ºâ€3Då›¾å±‚ã€‚å…¶ä½™Â <strong>9ä¸ª</strong>ï¼ˆ<code>ty</code>,Â <code>ind</code>,Â <code>st</code>,Â <code>sr</code>,Â <code>ks</code>,Â <code>ao</code>,Â <code>parent</code>,Â <code>cl</code>,Â <code>ln</code>ï¼‰åˆ™æ˜¯<strong>å›¾å±‚ä¸“æœ‰çš„æ ¸å¿ƒå±æ€§</strong>ï¼Œå®ƒä»¬å…±åŒå®šä¹‰äº†å›¾å±‚åœ¨æ—¶é—´ä¸ç©ºé—´ä¸­çš„åŸºæœ¬çŠ¶æ€ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é¦–å…ˆæ·±å…¥è§£æå…¶ä¸­æœ€æ ¸å¿ƒçš„Â <strong><code>ks</code>ï¼ˆå˜æ¢å±æ€§ï¼‰</strong> Â å¯¹è±¡ï¼Œå®ƒæ˜¯é©±åŠ¨æ‰€æœ‰å›¾å±‚è¿åŠ¨ä¸å˜åŒ–çš„å…³é”®ã€‚</p>
<h2 data-id="heading-7"><strong>ä¸‰ã€å˜æ¢å±æ€§ - ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾</strong>â­ï¸</h2>
<h3 data-id="heading-8">ksÂ å¯¹è±¡æ¦‚è§ˆ</h3>
<p><code>ks</code>ï¼ˆTransformï¼‰æ˜¯æ‰€æœ‰å›¾å±‚çš„æ ¸å¿ƒåŠ¨ç”»å®¹å™¨ï¼Œå®ƒå®šä¹‰äº†å›¾å±‚åœ¨ç©ºé—´ä¸­çš„ä½ç½®ã€å¤§å°ã€æ—‹è½¬ã€é€æ˜åº¦ç­‰åŸºç¡€å˜æ¢çŠ¶æ€ã€‚å…¶åç§°Â <strong><code>ks</code></strong>Â æ˜¯Â <strong>Keyable Styled Propertiesï¼ˆå¯å…³é”®å¸§çš„æ ·å¼åŒ–å±æ€§ï¼‰</strong> Â çš„ç¼©å†™ï¼Œè¿™ç²¾å‡†æ¦‚æ‹¬äº†å…¶ä¸¤å¤§æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong><code>k</code>ï¼ˆKeyableï¼‰</strong> ï¼šæŒ‡è¿™äº›å±æ€§<strong>å¯è¢«è®¾ç½®ä¸ºå…³é”®å¸§</strong>ï¼Œæ˜¯å®ç°æ‰€æœ‰é€å¸§åŠ¨ç”»çš„åŸºç¡€ã€‚</li>
<li><strong><code>s</code>ï¼ˆStyledï¼‰</strong> ï¼šæŒ‡è¿™äº›å±æ€§<strong>å¯è¢«åŠ¨æ€é©±åŠ¨æˆ–èµ‹äºˆæ ·å¼</strong>ï¼Œæ”¯æŒé€šè¿‡æ•°æ®æˆ–è¡¨è¾¾å¼è¿›è¡Œå¤æ‚æ§åˆ¶ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œ<code>ks</code>Â å¯¹è±¡ä¸ä»…æè¿°å›¾å±‚çš„é™æ€ç©ºé—´çŠ¶æ€ï¼Œæ›´æ˜¯æ‰¿è½½å…¶æ‰€æœ‰è¿åŠ¨ä¸å˜æ¢åŠ¨ç”»çš„<strong>æ•°æ®è½½ä½“</strong>ã€‚æ‰€æœ‰åŸºç¡€åŠ¨ç”»ï¼ˆå¦‚ç§»åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬ã€æ·¡å…¥æ·¡å‡ºï¼‰éƒ½é€šè¿‡åœ¨æ­¤å¯¹è±¡å†…å®šä¹‰å…³é”®å¸§æ¥å®ç°ã€‚</p>
<h3 data-id="heading-9"><strong>ksÂ çš„å®Œæ•´å±æ€§è¡¨</strong></h3>





















































<table><thead><tr><th>å±æ€§</th><th>å…¨ç§°</th><th>é»˜è®¤å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong><code>a</code></strong></td><td>Anchor Point</td><td><code>[0, 0, 0]</code></td><td><strong>é”šç‚¹</strong>ï¼šå›¾å±‚å˜æ¢çš„åŸºå‡†ä¸­å¿ƒç‚¹ï¼ˆæ”¯ç‚¹ï¼‰ã€‚</td></tr><tr><td><strong><code>p</code></strong></td><td>Position</td><td><code>[0, 0, 0]</code></td><td><strong>ä½ç½®</strong>ï¼šå›¾å±‚åœ¨ç”»å¸ƒä¸­çš„åæ ‡ã€‚</td></tr><tr><td><strong><code>s</code></strong></td><td>Scale</td><td><code>[100, 100, 100]</code></td><td><strong>ç¼©æ”¾</strong>ï¼šå›¾å±‚çš„å°ºå¯¸æ¯”ä¾‹ï¼ˆä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºï¼‰ã€‚</td></tr><tr><td><strong><code>r</code></strong></td><td>Rotation</td><td><code>0</code></td><td><strong>æ—‹è½¬</strong>ï¼šå›¾å±‚çš„æ—‹è½¬è§’åº¦ï¼ˆå•ä½ä¸ºåº¦ï¼‰ã€‚</td></tr><tr><td><strong><code>o</code></strong></td><td>Opacity</td><td><code>100</code></td><td><strong>ä¸é€æ˜åº¦</strong>ï¼šå›¾å±‚çš„é€æ˜åº¦ï¼ˆ100ä¸ºå®Œå…¨ä¸é€æ˜ï¼Œ0ä¸ºå®Œå…¨é€æ˜ï¼‰ã€‚</td></tr><tr><td><strong><code>sk</code></strong></td><td>Skew</td><td><code>0</code></td><td><strong>å€¾æ–œ</strong>ï¼šå›¾å±‚çš„å€¾æ–œè§’åº¦ï¼ˆå•ä½ä¸ºåº¦ï¼‰ã€‚</td></tr><tr><td><strong><code>sa</code></strong></td><td>Skew Axis</td><td><code>0</code></td><td><strong>å€¾æ–œè½´</strong>ï¼šå®šä¹‰å€¾æ–œæ“ä½œæ‰€æ²¿çš„è½´å‘è§’åº¦ï¼ˆå•ä½ä¸ºåº¦ï¼‰ã€‚</td></tr></tbody></table>
<blockquote>
<p>Â 3DÂ å›¾å±‚ç‰¹æ®Šå½¢å¼ï¼šå½“Â ddd=1Â æ—¶ï¼ŒpÂ å¯èƒ½è¢«æ‹†åˆ†ä¸ºÂ pxã€pyã€pzÂ ä¸‰ä¸ªç‹¬ç«‹å±æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-10"><strong>å±æ€§å€¼çš„ä¸¤ç§æ•°æ®å½¢æ€</strong></h3>
<p>æ¯ä¸ªå˜æ¢å±æ€§çš„å€¼å‡ä»¥ç»Ÿä¸€çš„ç»“æ„è¡¨ç¤ºï¼Œåˆ†ä¸ºÂ <strong>é™æ€å€¼</strong>Â ä¸Â <strong>åŠ¨ç”»å€¼</strong>Â ä¸¤ç§å½¢æ€ï¼Œé€šè¿‡Â <code>a</code>Â å­—æ®µåŒºåˆ†ã€‚</p>
<h4 data-id="heading-11"><strong>1. é™æ€å€¼ (<code>a</code>: 0)</strong></h4>
<p>å±æ€§åœ¨æ•´ä¸ªæ—¶é—´è½´ä¸Šä¿æŒä¸å˜ï¼Œç»“æ„ç®€æ´ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"r"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// é™æ€æ ‡è¯†</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span>        <span class="hljs-comment">// å›ºå®šå€¼ï¼šæ—‹è½¬45åº¦</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-12"><strong>2. åŠ¨ç”»å€¼ (<code>a</code>: 1)</strong></h4>
<p>å±æ€§å€¼éšæ—¶é—´å˜åŒ–ï¼Œé€šè¿‡å…³é”®å¸§æ•°ç»„ (<code>k</code>) å®šä¹‰ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"r"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// åŠ¨ç”»æ ‡è¯†</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>         <span class="hljs-comment">// å…³é”®å¸§æ•°ç»„</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// æ—¶é—´ç‚¹ï¼ˆå¸§ï¼‰</span>
        <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// èµ·å§‹å€¼</span>
        <span class="hljs-attr">"e"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">360</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// ç»“æŸå€¼</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// ä¸‹ä¸€å…³é”®å¸§æ—¶é—´ç‚¹</span>
        <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">360</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// è¯¥å¸§çš„æ•°å€¼ï¼ˆç»“æŸæ—¶çœç•¥"e"ï¼‰</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®å¸§æ ¸å¿ƒå­—æ®µè¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong><code>t</code>Â (time)</strong> ï¼šå…³é”®å¸§æ‰€å¤„çš„æ—¶é—´ç‚¹ï¼ˆå¸§åºå·ï¼‰ã€‚</li>
<li><strong><code>s</code>Â (start value)</strong> ï¼šæ­¤å…³é”®å¸§çš„èµ·å§‹å€¼ã€‚</li>
<li><strong><code>e</code>Â (end value)</strong> ï¼šæœå‘ä¸‹ä¸€å…³é”®å¸§çš„<strong>ç›®æ ‡å€¼</strong>ã€‚æœ€åä¸€ä¸ªå…³é”®å¸§å¯çœç•¥ã€‚</li>
<li><strong><code>i</code>Â /Â <code>o</code></strong>ï¼šå®šä¹‰å±æ€§å˜åŒ–é€Ÿç‡ï¼ˆç¼“åŠ¨ï¼‰çš„è´å¡å°”æ›²çº¿æ§åˆ¶ç‚¹ï¼Œå°†åœ¨åç»­ç« èŠ‚è¯¦è¿°ã€‚</li>
</ul>
<p>æ­¤ç»“æ„æ˜¯ Lottie å®ç°æ‰€æœ‰åŸºç¡€è¿åŠ¨ï¼ˆä½ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€æ·¡å…¥æ·¡å‡ºï¼‰çš„é€šç”¨æ•°æ®èŒƒå¼ã€‚</p>
<h3 data-id="heading-13">ğŸ¨å°è¯•ç‰›åˆ€ï¼šåŠ¨æ‰‹éªŒè¯æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† Lottie JSON çš„é¡¶å±‚ç»“æ„å’Œæ ¸å¿ƒå±æ€§ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼ŒåŠ¨æ‰‹éªŒè¯å¦‚ä½•é…ç½®ä¸€ä¸ªåŸºç¡€çš„é™æ€åœºæ™¯ã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€å¼ å›¾ç‰‡ï¼Œåˆ›å»ºä¸€ä¸ª<strong>é™æ€çš„å›¾ç‰‡å›¾å±‚</strong>ã€‚æ‚¨å°†åœ¨ä¸‹å›¾ä¸­çœ‹åˆ°ï¼ˆä¸€ä¸ªé™æ€å›¾ï¼Œä¸€ä¸ªæ—‹è½¬å›¾ï¼‰ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/797a4950337a4e9ab0ddb4de2e7afc33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOo5Y2r5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876452&amp;x-signature=yzgDCdB54V1rtVwQfYETtwLpQco%3D" alt="å½•å±2026-01-07 11.51.03 (1).gif" loading="lazy"/></p>
<blockquote>
<p><strong>è¯´æ˜</strong>ï¼šä¸Šå›¾çš„ GIF å±•ç¤ºäº†åŒ…å«æ—‹è½¬åŠ¨ç”»çš„å®Œæ•´æ•ˆæœã€‚è€Œä¸‹é¢çš„ JSON é…ç½®ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå®Œæˆ<strong>å·¦ä¾§é™æ€å›¾ç‰‡</strong>çš„æ­å»ºã€‚è¿™èƒ½è®©æˆ‘ä»¬ä¸“æ³¨äºå·²å­¦çš„<strong>é™æ€å±æ€§é…ç½®</strong>ï¼ˆ<code>a: 0</code>ï¼‰ã€‚å³ä¾§çš„æ—‹è½¬åŠ¨ç”»ï¼Œå°†åœ¨æˆ‘ä»¬å­¦ä¹ äº†å…³é”®å¸§ç³»ç»Ÿåï¼Œé€šè¿‡ç®€å•åœ°ä¿®æ”¹Â <code>r</code>ï¼ˆæ—‹è½¬ï¼‰å±æ€§å³å¯å®ç°ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ Lottie JSON é…ç½®ï¼Œå·²é™„ä¸Šè¯¦å°½çš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-comment">// ========== é¡¶å±‚å…ƒæ•°æ®ï¼šåŠ¨ç”»çš„å…¨å±€å®šä¹‰ ==========</span>
  <span class="hljs-string">"v"</span>: <span class="hljs-string">"5.7.4"</span>,              <span class="hljs-comment">// Bodymovin æ’ä»¶ç‰ˆæœ¬</span>
  <span class="hljs-string">"fr"</span>: <span class="hljs-number">30</span>,                  <span class="hljs-comment">// å¸§ç‡ï¼š30fps</span>
  <span class="hljs-string">"ip"</span>: <span class="hljs-number">0</span>,                   <span class="hljs-comment">// èµ·å§‹å¸§ï¼šä»ç¬¬0å¸§å¼€å§‹</span>
  <span class="hljs-string">"op"</span>: <span class="hljs-number">90</span>,                  <span class="hljs-comment">// ç»“æŸå¸§ï¼šåˆ°ç¬¬90å¸§ç»“æŸï¼ˆæ€»æ—¶é•¿ = (90-0)/30 = 3ç§’ï¼‰</span>
  <span class="hljs-string">"w"</span>: <span class="hljs-number">800</span>,                  <span class="hljs-comment">// ç”»å¸ƒå®½åº¦ï¼š800åƒç´ </span>
  <span class="hljs-string">"h"</span>: <span class="hljs-number">600</span>,                  <span class="hljs-comment">// ç”»å¸ƒé«˜åº¦ï¼š600åƒç´ </span>
  <span class="hljs-string">"nm"</span>: <span class="hljs-string">"å˜æ¢å±æ€§æ¼”ç¤º"</span>,        <span class="hljs-comment">// åˆæˆåç§°</span>
  <span class="hljs-string">"ddd"</span>: <span class="hljs-number">0</span>,                  <span class="hljs-comment">// 3Dæ ‡è¯†ï¼š0è¡¨ç¤ºä¸åŒ…å«3Då›¾å±‚</span>
  
  <span class="hljs-comment">// ========== Assetsï¼šå¯å¤ç”¨èµ„æºåº“ ==========</span>
  <span class="hljs-string">"assets"</span>: [
    {
      <span class="hljs-string">"id"</span>: <span class="hljs-string">"image_0"</span>,       <span class="hljs-comment">// èµ„æºIDï¼Œä¾›å›¾å±‚é€šè¿‡ refId å¼•ç”¨</span>
      <span class="hljs-string">"w"</span>: <span class="hljs-number">500</span>,              <span class="hljs-comment">// å›¾ç‰‡åŸå§‹å®½åº¦</span>
      <span class="hljs-string">"h"</span>: <span class="hljs-number">500</span>,              <span class="hljs-comment">// å›¾ç‰‡åŸå§‹é«˜åº¦</span>
      <span class="hljs-string">"u"</span>: <span class="hljs-string">""</span>,               <span class="hljs-comment">// å›¾ç‰‡URLåŸºç¡€è·¯å¾„ï¼ˆç©ºè¡¨ç¤ºä½¿ç”¨å®Œæ•´è·¯å¾„ï¼‰</span>
      <span class="hljs-string">"p"</span>: <span class="hljs-string">"https://img11.360buyimg.com/img/jfs/t1/383242/14/16667/276460/695dd5ccF565013e8/02761c81c82b92d4.png"</span>,  <span class="hljs-comment">// å›¾ç‰‡å®Œæ•´URL</span>
      <span class="hljs-string">"e"</span>: <span class="hljs-number">0</span>                 <span class="hljs-comment">// æ˜¯å¦åµŒå…¥ï¼š0è¡¨ç¤ºå¤–éƒ¨é“¾æ¥</span>
    }
  ],
  
  <span class="hljs-comment">// ========== Layersï¼šå›¾å±‚åºåˆ—ï¼ˆä»ä¸‹åˆ°ä¸Šæ¸²æŸ“ï¼‰ ==========</span>
  <span class="hljs-string">"layers"</span>: [
    <span class="hljs-comment">// ---------- å›¾å±‚1ï¼šé™æ€å›¾ç‰‡ï¼ˆå±•ç¤ºé™æ€å€¼ a:0ï¼‰ ----------</span>
    {
      <span class="hljs-string">"ddd"</span>: <span class="hljs-number">0</span>,              <span class="hljs-comment">// è¯¥å›¾å±‚ä¸æ˜¯3Då›¾å±‚</span>
      <span class="hljs-string">"ind"</span>: <span class="hljs-number">1</span>,              <span class="hljs-comment">// å›¾å±‚ç´¢å¼•ï¼š1ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰</span>
      <span class="hljs-string">"ty"</span>: <span class="hljs-number">2</span>,               <span class="hljs-comment">// å›¾å±‚ç±»å‹ï¼š2 = Image Layerï¼ˆå›¾åƒå›¾å±‚ï¼‰</span>
      <span class="hljs-string">"nm"</span>: <span class="hljs-string">"é™æ€å›¾ç‰‡"</span>,       <span class="hljs-comment">// å›¾å±‚åç§°</span>
      <span class="hljs-string">"refId"</span>: <span class="hljs-string">"image_0"</span>,    <span class="hljs-comment">// å¼•ç”¨ assets ä¸­ id ä¸º "image_0" çš„èµ„æº</span>
      <span class="hljs-string">"sr"</span>: <span class="hljs-number">1</span>,               <span class="hljs-comment">// æ—¶é—´æ‹‰ä¼¸ï¼š1 = æ­£å¸¸é€Ÿåº¦</span>
      
      <span class="hljs-comment">// ===== ksï¼šå˜æ¢å±æ€§ï¼ˆTransformï¼‰=====</span>
      <span class="hljs-string">"ks"</span>: {
        <span class="hljs-comment">// ----- oï¼šä¸é€æ˜åº¦ï¼ˆOpacityï¼‰-----</span>
        <span class="hljs-string">"o"</span>: {
          <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†ï¼ˆa=0 è¡¨ç¤ºä¸åŠ¨ç”»ï¼‰</span>
          <span class="hljs-string">"k"</span>: <span class="hljs-number">100</span>           <span class="hljs-comment">// å›ºå®šå€¼ï¼š100%ä¸é€æ˜</span>
        },
        
        <span class="hljs-comment">// ----- rï¼šæ—‹è½¬ï¼ˆRotationï¼‰-----</span>
        <span class="hljs-string">"r"</span>: {
          <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†</span>
          <span class="hljs-string">"k"</span>: <span class="hljs-number">45</span>            <span class="hljs-comment">// å›ºå®šå€¼ï¼šæ—‹è½¬45åº¦</span>
        },
        
        <span class="hljs-comment">// ----- pï¼šä½ç½®ï¼ˆPositionï¼‰-----</span>
        <span class="hljs-string">"p"</span>: {
          <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†</span>
          <span class="hljs-string">"k"</span>: [<span class="hljs-number">250</span>, <span class="hljs-number">300</span>, <span class="hljs-number">0</span>] <span class="hljs-comment">// å›ºå®šä½ç½®ï¼š[x, y, z] = å·¦ä¾§250pxï¼Œé¡¶éƒ¨300px</span>
        },
        
        <span class="hljs-comment">// ----- aï¼šé”šç‚¹ï¼ˆAnchor Pointï¼‰-----</span>
        <span class="hljs-string">"a"</span>: {
          <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†</span>
          <span class="hljs-string">"k"</span>: [<span class="hljs-number">250</span>, <span class="hljs-number">250</span>, <span class="hljs-number">0</span>] <span class="hljs-comment">// é”šç‚¹åœ¨å›¾ç‰‡ä¸­å¿ƒï¼ˆ500x500å›¾ç‰‡çš„ä¸­å¿ƒç‚¹ï¼‰</span>
        },
        
        <span class="hljs-comment">// ----- sï¼šç¼©æ”¾ï¼ˆScaleï¼‰-----</span>
        <span class="hljs-string">"s"</span>: {
          <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†</span>
          <span class="hljs-string">"k"</span>: [<span class="hljs-number">30</span>, <span class="hljs-number">30</span>, <span class="hljs-number">100</span>] <span class="hljs-comment">// ç¼©æ”¾åˆ°30%ï¼ˆæ˜¾ç¤ºä¸º150x150ï¼‰</span>
        }
      },
      
      <span class="hljs-string">"ao"</span>: <span class="hljs-number">0</span>,               <span class="hljs-comment">// è‡ªåŠ¨å®šå‘ï¼šå…³é—­</span>
      <span class="hljs-string">"ip"</span>: <span class="hljs-number">0</span>,               <span class="hljs-comment">// å›¾å±‚å…¥ç‚¹ï¼šç¬¬0å¸§å¼€å§‹æ˜¾ç¤º</span>
      <span class="hljs-string">"op"</span>: <span class="hljs-number">90</span>,              <span class="hljs-comment">// å›¾å±‚å‡ºç‚¹ï¼šç¬¬90å¸§ç»“æŸæ˜¾ç¤º</span>
      <span class="hljs-string">"st"</span>: <span class="hljs-number">0</span>,               <span class="hljs-comment">// èµ·å§‹æ—¶é—´åç§»ï¼š0ï¼ˆæ— åç§»ï¼‰</span>
      <span class="hljs-string">"bm"</span>: <span class="hljs-number">0</span>                <span class="hljs-comment">// æ··åˆæ¨¡å¼ï¼š0 = Normalï¼ˆæ­£å¸¸ï¼‰</span>
    }
  ],
  
  <span class="hljs-comment">// ========== Charsï¼šçŸ¢é‡å­—å½¢å®šä¹‰ï¼ˆæœ¬ä¾‹æœªä½¿ç”¨ï¼‰==========</span>
  <span class="hljs-string">"chars"</span>: []
}
</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹æ˜¯ä¸€ä¸ªâ€œçŸ¥è¯†æ£€æŸ¥ç‚¹â€ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†ï¼š</p>
<ul>
<li><strong>é¡¶å±‚å…ƒæ•°æ®</strong>Â (<code>v</code>,Â <code>fr</code>,Â <code>w</code>,Â <code>h</code>...) å®šä¹‰äº†åŠ¨ç”»çš„èˆå°ï¼ˆ3ç§’ã€800x600çš„ç”»å¸ƒï¼‰ã€‚</li>
<li><strong>èµ„æº (<code>assets</code>)</strong> Â å®šä¹‰äº†å”¯ä¸€å¯ç”¨çš„å›¾ç‰‡ç´ æï¼Œå¹¶é€šè¿‡Â <code>id</code>Â æ ‡è¯†ã€‚</li>
<li><strong>å›¾å±‚ (<code>layers</code>)</strong> Â é€šè¿‡Â <code>refId</code>Â å¼•ç”¨è¯¥èµ„æºï¼Œå°†å…¶å®ä¾‹åŒ–åˆ°èˆå°ä¸Šã€‚</li>
<li><strong><code>ks</code>Â å˜æ¢å¯¹è±¡</strong>Â å†³å®šäº†è¿™ä¸ªå®ä¾‹çš„æœ€ç»ˆçŠ¶æ€ï¼šä½äºç”»å¸ƒå·¦ä¾§ï¼Œç¼©å°è‡³30%ï¼Œå¹¶æ—‹è½¬äº†45åº¦ã€‚æ‰€æœ‰å±æ€§å‡ä»¥<strong>é™æ€å€¼ (<code>a: 0</code>)</strong> Â å®šä¹‰ã€‚</li>
</ul>
<p>è‡³æ­¤ï¼Œæ‚¨å·²ç»æŒæ¡äº†å¦‚ä½•æ„å»ºä¸€ä¸ª Lottie åŠ¨ç”»çš„<strong>é™æ€éª¨æ¶</strong>â€”â€”å®šä¹‰èˆå°ã€å‡†å¤‡ç´ æã€æ”¾ç½®å…ƒç´ å¹¶è®¾ç½®å…¶åˆå§‹çŠ¶æ€ã€‚åœ¨ä¸Šæ–¹çš„é¢„è§ˆå›¾ä¸­ï¼Œæ‚¨ä¹Ÿçœ‹åˆ°äº†åŠ¨ç”»çš„æ½œåŠ›ï¼š<strong>åªéœ€å°†Â <code>r</code>ï¼ˆæ—‹è½¬ï¼‰å±æ€§çš„Â <code>a</code>Â å€¼ä»Â <code>0</code>Â æ”¹ä¸ºÂ <code>1</code>ï¼Œå¹¶é…ä¸Šå…³é”®å¸§æ•°æ®ï¼Œé™æ€å›¾ç‰‡å°±èƒ½æ—‹è½¬èµ·æ¥ã€‚</strong></p>
<p>é‚£ä¹ˆï¼Œ<code>a: 1</code>Â æ¨¡å¼ä¸‹çš„Â <code>k</code>Â æ•°ç»„ç©¶ç«Ÿå¦‚ä½•å®šä¹‰ï¼Ÿå¤šä¸ªå…³é”®å¸§ä¹‹é—´å¦‚ä½•å¹³æ»‘è¿‡æ¸¡ï¼ŸåŠ¨ç”»çš„è¿åŠ¨èŠ‚å¥åˆç”±ä»€ä¹ˆæ§åˆ¶ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å°†æ·±å…¥åŠ¨ç”»çš„æ ¸å¿ƒï¼Œè§£æ<strong>å…³é”®å¸§ã€æ’å€¼ä¸ç¼“åŠ¨</strong>çš„å®Œæ•´ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>å››ã€æ·±å…¥åŠ¨ç”» - å…³é”®å¸§ã€æ’å€¼ä¸ç¼“åŠ¨</strong>â­ï¸</h2>
<p>åœ¨ä¸Šä¸€ç« çš„"å°è¯•ç‰›åˆ€"ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†é™æ€å›¾ç‰‡ä¸æ—‹è½¬å›¾ç‰‡çš„å¯¹æ¯”æ•ˆæœã€‚å³ä¾§çš„æ—‹è½¬æ•ˆæœæ­£æ˜¯é€šè¿‡<strong>å…³é”®å¸§åŠ¨ç”»</strong>å®ç°çš„ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥è§£æè¿™ä¸ªæ—‹è½¬åŠ¨ç”»çš„å®Œæ•´JSONé…ç½®ï¼Œæ­å¼€LottieåŠ¨ç”»ç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/797a4950337a4e9ab0ddb4de2e7afc33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOo5Y2r5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876452&amp;x-signature=yzgDCdB54V1rtVwQfYETtwLpQco%3D" alt="å½•å±2026-01-07 11.51.03 (1).gif" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ demo ä¸­ä¸¤ä¸ªå›¾å±‚çš„é…ç½®ï¼Œçœ‹çœ‹é™æ€å›¾ç‰‡æ˜¯å¦‚ä½•"åŠ¨"èµ·æ¥çš„ï¼š</p>
<p><strong>é™æ€å›¾ç‰‡ï¼ˆå·¦ä¾§ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"r"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// é™æ€å€¼æ ‡è¯†</span>
  <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span>            <span class="hljs-comment">// å›ºå®šå€¼ï¼šæ—‹è½¬45åº¦</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ—‹è½¬å›¾ç‰‡ï¼ˆå³ä¾§ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"r"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// åŠ¨ç”»å€¼æ ‡è¯†ï¼ˆa=1 è¡¨ç¤ºæœ‰å…³é”®å¸§åŠ¨ç”»ï¼‰</span>
  <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>             <span class="hljs-comment">// å…³é”®å¸§æ•°ç»„</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"i"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.667</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// å…¥ç¼“åŠ¨</span>
      <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.333</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// å‡ºç¼“åŠ¨</span>
      <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>                            <span class="hljs-comment">// æ—¶é—´ç‚¹ï¼šç¬¬0å¸§</span>
      <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span>                           <span class="hljs-comment">// èµ·å§‹å€¼ï¼š0åº¦</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">90</span><span class="hljs-punctuation">,</span>                           <span class="hljs-comment">// æ—¶é—´ç‚¹ï¼šç¬¬90å¸§</span>
      <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">360</span><span class="hljs-punctuation">]</span>                         <span class="hljs-comment">// ç»“æŸå€¼ï¼š360åº¦</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ ¸å¿ƒå·®å¼‚æ€»ç»“ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹å¾</th><th>é™æ€å€¼ (<code>a: 0</code>)</th><th>åŠ¨ç”»å€¼ (<code>a: 1</code>)</th></tr></thead><tbody><tr><td><code>k</code> çš„ç±»å‹</td><td>å•ä¸ªæ•°å€¼æˆ–æ•°ç»„</td><td>å…³é”®å¸§å¯¹è±¡æ•°ç»„</td></tr><tr><td>æ—¶é—´è½´</td><td>æ— æ—¶é—´æ¦‚å¿µï¼Œå§‹ç»ˆä¿æŒå›ºå®šå€¼</td><td>åœ¨æ—¶é—´è½´ä¸Šå®šä¹‰å¤šä¸ªçŠ¶æ€ç‚¹</td></tr><tr><td>ç¼“åŠ¨æ§åˆ¶</td><td>æ— </td><td>é€šè¿‡ <code>i</code> å’Œ <code>o</code> æ§åˆ¶è¿åŠ¨èŠ‚å¥</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>é™æ€å±æ€§ï¼ˆå¦‚å›ºå®šä½ç½®ã€å›ºå®šè§’åº¦ï¼‰</td><td>éœ€è¦éšæ—¶é—´å˜åŒ–çš„å±æ€§ï¼ˆç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15"><strong>å…³é”®å¸§æ•°ç»„ç»“æ„è§£æ</strong></h3>
<p>å½“å±æ€§è®¾ç½®ä¸ºåŠ¨ç”»å€¼ï¼ˆ<code>a: 1</code>ï¼‰æ—¶ï¼Œ<code>k</code>Â å­—æ®µä¸å†æ˜¯ä¸€ä¸ªç®€å•å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å…³é”®å¸§å¯¹è±¡æ•°ç»„</strong>ã€‚æ¯ä¸ªå…³é”®å¸§å¯¹è±¡å®šä¹‰äº†åŠ¨ç”»åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚</p>
<h4 data-id="heading-16"><strong>æ ¸å¿ƒå­—æ®µè¯´æ˜</strong></h4>















































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>å¿…é€‰</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong><code>t</code></strong></td><td><code>number</code></td><td>æ˜¯</td><td><strong>æ—¶é—´ç‚¹ï¼ˆTimeï¼‰</strong>ï¼šè¯¥å…³é”®å¸§åœ¨æ—¶é—´è½´ä¸Šçš„ä½ç½®ï¼Œå•ä½ä¸ºå¸§ã€‚</td></tr><tr><td><strong><code>s</code></strong></td><td><code>array</code></td><td>æ˜¯</td><td><strong>èµ·å§‹å€¼ï¼ˆStart Valueï¼‰</strong>ï¼šè¯¥å…³é”®å¸§çš„å±æ€§å€¼ã€‚å¯¹äºæ—‹è½¬æ˜¯ <code>[è§’åº¦]</code>ï¼Œä½ç½®æ˜¯ <code>[x, y, z]</code>ã€‚</td></tr><tr><td><strong><code>e</code></strong></td><td><code>array</code></td><td>å¦</td><td><strong>ç»“æŸå€¼ï¼ˆEnd Valueï¼‰</strong>ï¼šä»å½“å‰å…³é”®å¸§åˆ°ä¸‹ä¸€å…³é”®å¸§çš„ç›®æ ‡å€¼ã€‚<strong>é€šå¸¸çœç•¥</strong>ï¼Œæ¸²æŸ“å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨ä¸‹ä¸€å…³é”®å¸§çš„ <code>s</code> å€¼ã€‚</td></tr><tr><td><strong><code>i</code></strong></td><td><code>object</code></td><td>å¦</td><td><strong>å…¥ç¼“åŠ¨ï¼ˆIn Tangentï¼‰</strong>ï¼šå®šä¹‰<strong>è¿›å…¥</strong>å½“å‰å…³é”®å¸§æ—¶çš„é€Ÿåº¦å˜åŒ–æ›²çº¿ï¼ˆè´å¡å°”æ§åˆ¶ç‚¹ï¼‰ã€‚</td></tr><tr><td><strong><code>o</code></strong></td><td><code>object</code></td><td>å¦</td><td><strong>å‡ºç¼“åŠ¨ï¼ˆOut Tangentï¼‰</strong>ï¼šå®šä¹‰<strong>ç¦»å¼€</strong>å½“å‰å…³é”®å¸§æ—¶çš„é€Ÿåº¦å˜åŒ–æ›²çº¿ï¼ˆè´å¡å°”æ§åˆ¶ç‚¹ï¼‰ã€‚</td></tr><tr><td><strong><code>h</code></strong></td><td><code>number</code></td><td>å¦</td><td><strong>ä¿æŒå¸§ï¼ˆHoldï¼‰</strong>ï¼šå€¼ä¸º <code>1</code> æ—¶ï¼Œè¡¨ç¤ºè¯¥å…³é”®å¸§åˆ°ä¸‹ä¸€å…³é”®å¸§ä¹‹é—´<strong>ä¸æ’å€¼</strong>ï¼Œä¿æŒå½“å‰å€¼ï¼ˆé˜¶è·ƒåŠ¨ç”»ï¼‰ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong><code>s</code> çš„æ•°æ®ç±»å‹</strong>ï¼šè™½ç„¶å®˜æ–¹ schema ä¸­å®šä¹‰ä¸º <code>number</code>ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ<code>s</code> é€šå¸¸æ˜¯<strong>æ•°ç»„</strong>ï¼ˆå¦‚ <code>[0]</code> è¡¨ç¤ºæ—‹è½¬ 0 åº¦ï¼Œ<code>[100, 200, 0]</code> è¡¨ç¤ºä½ç½®ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†ç»Ÿä¸€å¤„ç†å•ç»´å’Œå¤šç»´å±æ€§ã€‚</li>
<li><strong><code>e</code> å­—æ®µçš„å®é™…ä½¿ç”¨</strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>e</code> å­—æ®µä¼šè¢«çœç•¥ï¼Œæ¸²æŸ“å™¨ä¼šè‡ªåŠ¨ä»ä¸‹ä¸€ä¸ªå…³é”®å¸§çš„ <code>s</code> å€¼æ¨æ–­ç›®æ ‡å€¼ã€‚åªæœ‰åœ¨éœ€è¦æ˜¾å¼æ§åˆ¶æ’å€¼ç›®æ ‡æ—¶æ‰ä¼šä½¿ç”¨ã€‚</li>
<li><strong>æœ€åä¸€å¸§</strong>ï¼šæœ€åä¸€ä¸ªå…³é”®å¸§é€šå¸¸åªæœ‰ <code>t</code> å’Œ <code>s</code>ï¼Œä¸éœ€è¦ <code>i</code>ã€<code>o</code>ã€<code>e</code>ï¼ˆå› ä¸ºæ²¡æœ‰ä¸‹ä¸€ä¸ªå…³é”®å¸§ï¼‰ã€‚</li>
</ol>
</blockquote>
<h4 data-id="heading-17"><strong>ç¼“åŠ¨æ§åˆ¶ç‚¹çš„ç»“æ„</strong></h4>
<p><code>i</code> å’Œ <code>o</code> å¯¹è±¡å®šä¹‰äº†è´å¡å°”æ›²çº¿çš„æ§åˆ¶ç‚¹ï¼Œç”¨äºæ§åˆ¶åŠ¨ç”»çš„åŠ é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"i"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.667</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å…¥ç¼“åŠ¨çš„ X è½´æ§åˆ¶ç‚¹ï¼ˆæ—¶é—´ç»´åº¦ï¼ŒèŒƒå›´ 0-1ï¼‰</span>
    <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>       <span class="hljs-comment">// å…¥ç¼“åŠ¨çš„ Y è½´æ§åˆ¶ç‚¹ï¼ˆæ•°å€¼ç»´åº¦ï¼Œé€šå¸¸ 0-1ï¼Œä½†å¯è¶…å‡ºï¼‰</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.333</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å‡ºç¼“åŠ¨çš„ X è½´æ§åˆ¶ç‚¹</span>
    <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span>       <span class="hljs-comment">// å‡ºç¼“åŠ¨çš„ Y è½´æ§åˆ¶ç‚¹</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>x</code> æ•°ç»„</strong>ï¼šæ§åˆ¶<strong>æ—¶é—´è¿›åº¦</strong>çš„å˜åŒ–ç‡ï¼ˆæ°´å¹³æ–¹å‘ï¼‰</li>
<li><strong><code>y</code> æ•°ç»„</strong>ï¼šæ§åˆ¶<strong>æ•°å€¼å˜åŒ–</strong>çš„é€Ÿç‡ï¼ˆå‚ç›´æ–¹å‘ï¼‰</li>
<li><strong>æ•°ç»„é•¿åº¦</strong>ï¼šå¯¹äºå•ç»´å±æ€§ï¼ˆå¦‚æ—‹è½¬ <code>r</code>ï¼‰ï¼Œæ•°ç»„é•¿åº¦ä¸º 1ï¼›å¯¹äºå¤šç»´å±æ€§ï¼ˆå¦‚ä½ç½® <code>p</code>ï¼‰ï¼Œæ•°ç»„é•¿åº¦å¯¹åº”ç»´åº¦æ•°ï¼ˆå¦‚ <code>[0.5, 0.3]</code> è¡¨ç¤º Xã€Y ä¸¤ä¸ªç»´åº¦çš„ç‹¬ç«‹æ§åˆ¶ï¼‰</li>
</ul>
<blockquote>
<p><strong>å‰ç«¯çŸ¥è¯†å…³è”</strong>ï¼š<code>i</code>Â ä¸Â <code>o</code>Â å®šä¹‰çš„è´å¡å°”æ›²çº¿ï¼Œå…¶ä½œç”¨ä¸ CSS ä¸­çš„Â <code>transition-timing-function</code>Â æˆ–Â <code>animation-timing-function</code>Â å®Œå…¨ä¸€è‡´ï¼Œç”¨äºåˆ›é€ éåŒ€é€Ÿçš„åŠ¨ç”»æ•ˆæœã€‚åŒºåˆ«åœ¨äºï¼ŒCSS ä½¿ç”¨ä¸€ä¸ªäºŒç»´çš„Â <code>cubic-bezier(x1, y1, x2, y2)</code>ï¼Œè€Œ Lottie çš„Â <code>i</code>Â å’ŒÂ <code>o</code>Â å…è®¸ä¸ºæ¯ä¸ªå±æ€§ç»´åº¦å•ç‹¬å®šä¹‰æ§åˆ¶ç‚¹ï¼Œæ§åˆ¶æ›´ä¸ºç²¾ç»†ã€‚</p>
<p><strong>å·¥å…·æ¨è</strong>ï¼šå¦‚æœæ‚¨éœ€è¦ç›´è§‚åœ°åˆ›å»ºæˆ–ç†è§£è´å¡å°”æ›²çº¿ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨åœ¨çº¿å·¥å…·Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcubic-bezier.com%2F" target="_blank" title="https://cubic-bezier.com/" ref="nofollow noopener noreferrer">cubic-bezier.com</a></strong>ã€‚æ‚¨å¯ä»¥åœ¨é‚£é‡Œè°ƒæ•´æ›²çº¿å¹¶è·å–å¯¹åº”çš„Â <code>cubic-bezier()</code>Â å€¼ï¼Œå…¶åŸç†ä¸ Lottie çš„Â <code>i</code>/<code>o</code>Â æ§åˆ¶ç‚¹ç›¸é€šï¼Œæ˜¯ç†è§£å’Œè°ƒè¯•åŠ¨ç”»ç¼“åŠ¨çš„ç»ä½³åŠ©æ‰‹ã€‚</p>
</blockquote>
<h3 data-id="heading-18"><strong>å…³é”®å¸§çš„å·¥ä½œæµç¨‹</strong></h3>
<p>ä»¥ demo ä¸­çš„æ—‹è½¬åŠ¨ç”»ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬é€æ­¥æ‹†è§£æ¸²æŸ“å™¨å¦‚ä½•å¤„ç†å…³é”®å¸§ï¼š</p>
<h4 data-id="heading-19"><strong>ç¬¬ 1 æ­¥ï¼šè§£æå…³é”®å¸§æ•°ç»„</strong></h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// ç¬¬0å¸§</span>
    <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// æ—‹è½¬è§’åº¦ 0Â°</span>
    <span class="hljs-attr">"i"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.667</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.333</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">90</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// ç¬¬90å¸§</span>
    <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">360</span><span class="hljs-punctuation">]</span>     <span class="hljs-comment">// æ—‹è½¬è§’åº¦ 360Â°</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>æ¸²æŸ“å™¨è¯†åˆ«å‡ºï¼š</p>
<ul>
<li>åŠ¨ç”»ä»ç¬¬ 0 å¸§å¼€å§‹ï¼Œåˆ°ç¬¬ 90 å¸§ç»“æŸ</li>
<li>èµ·å§‹è§’åº¦ 0Â°ï¼Œç»“æŸè§’åº¦ 360Â°</li>
<li>éœ€è¦åœ¨è¿™ 90 å¸§ä¹‹é—´è¿›è¡Œæ’å€¼è®¡ç®—</li>
</ul>
<h4 data-id="heading-20"><strong>ç¬¬ 2 æ­¥ï¼šæ’å€¼è®¡ç®—ï¼ˆä»¥ç¬¬ 45 å¸§ä¸ºä¾‹ï¼‰</strong></h4>
<p>å½“æ’­æ”¾åˆ°ç¬¬ 45 å¸§æ—¶ï¼Œæ¸²æŸ“å™¨éœ€è¦è®¡ç®—æ­¤æ—¶çš„æ—‹è½¬è§’åº¦ï¼š</p>
<ol>
<li><strong>è®¡ç®—æ—¶é—´è¿›åº¦</strong>ï¼š<code>progress = (45 - 0) / (90 - 0) = 0.5</code>ï¼ˆå·²å®Œæˆ 50%ï¼‰</li>
<li><strong>åº”ç”¨ç¼“åŠ¨å‡½æ•°</strong>ï¼šæ ¹æ® <code>i</code> å’Œ <code>o</code> çš„è´å¡å°”æ§åˆ¶ç‚¹ï¼Œå°†çº¿æ€§è¿›åº¦ <code>0.5</code> è½¬æ¢ä¸ºç¼“åŠ¨åçš„è¿›åº¦ï¼ˆå‡è®¾ä¸º <code>0.55</code>ï¼‰</li>
<li><strong>è®¡ç®—å±æ€§å€¼</strong>ï¼š<code>angle = 0 + (360 - 0) Ã— 0.55 = 198Â°</code></li>
</ol>
<h4 data-id="heading-21"><strong>ç¬¬ 3 æ­¥ï¼šæ¸²æŸ“å½“å‰å¸§</strong></h4>
<p>æ¸²æŸ“å™¨å°†è®¡ç®—å‡ºçš„ 198Â° åº”ç”¨åˆ°å›¾å±‚çš„æ—‹è½¬å±æ€§ï¼Œå®Œæˆè¯¥å¸§çš„ç»˜åˆ¶ã€‚</p>
<h4 data-id="heading-22"><strong>å…³é”®å¸§çš„è¿ç»­æ€§</strong></h4>
<p>åœ¨å¤šä¸ªå…³é”®å¸§çš„åœºæ™¯ä¸­ï¼Œæ¸²æŸ“å™¨ä¼šï¼š</p>
<ul>
<li><strong>å®šä½å½“å‰åŒºé—´</strong>ï¼šæ‰¾åˆ°å½“å‰æ—¶é—´ç‚¹æ‰€åœ¨çš„å…³é”®å¸§åŒºé—´ï¼ˆå¦‚ç¬¬ 30 å¸§ä½äºç¬¬ 0 å¸§å’Œç¬¬ 90 å¸§ä¹‹é—´ï¼‰</li>
<li><strong>ä½¿ç”¨å¯¹åº”ç¼“åŠ¨</strong>ï¼šåº”ç”¨è¯¥åŒºé—´èµ·å§‹å…³é”®å¸§çš„ <code>o</code>ï¼ˆå‡ºç¼“åŠ¨ï¼‰å’Œç»“æŸå…³é”®å¸§çš„ <code>i</code>ï¼ˆå…¥ç¼“åŠ¨ï¼‰</li>
<li><strong>ç‹¬ç«‹æ’å€¼</strong>ï¼šå¯¹äºå¤šç»´å±æ€§ï¼ˆå¦‚ä½ç½® <code>[x, y, z]</code>ï¼‰ï¼Œæ¯ä¸ªç»´åº¦ç‹¬ç«‹è¿›è¡Œæ’å€¼è®¡ç®—</li>
</ul>
<h3 data-id="heading-23"><strong>æœ¬ç« å°ç»“</strong></h3>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† Lottie åŠ¨ç”»ç³»ç»Ÿçš„â€œåŠ¨åŠ›æºâ€ï¼š<strong>å…³é”®å¸§ã€æ’å€¼ä¸ç¼“åŠ¨</strong>ã€‚</p>
<ul>
<li><strong>é™æ€ä¸åŠ¨ç”»çš„å¼€å…³</strong>ï¼šé€šè¿‡Â <code>a</code>Â å­—æ®µ (<code>0</code>Â æˆ–Â <code>1</code>) åˆ‡æ¢å±æ€§çš„é™æ€ä¸åŠ¨æ€æ¨¡å¼ï¼Œæ˜¯ç†è§£ Lottie åŠ¨ç”»é€»è¾‘çš„ç¬¬ä¸€è¯¾ã€‚</li>
<li><strong>å…³é”®å¸§å®šä¹‰çŠ¶æ€</strong>ï¼š<code>k</code>Â æ•°ç»„ä¸­çš„æ¯ä¸ªå…³é”®å¸§å¯¹è±¡ï¼Œé€šè¿‡Â <code>t</code>Â (æ—¶é—´) å’ŒÂ <code>s</code>Â (æ•°å€¼) åœ¨æ—¶é—´è½´ä¸Šé”šå®šäº†åŠ¨ç”»çš„å„ä¸ªâ€œå…³é”®æ—¶åˆ»â€ã€‚</li>
<li><strong>ç¼“åŠ¨èµ‹äºˆçµé­‚</strong>ï¼š<code>i</code>Â (å…¥ç¼“åŠ¨) ä¸Â <code>o</code>Â (å‡ºç¼“åŠ¨) æ‰€å®šä¹‰çš„è´å¡å°”æ›²çº¿ï¼Œæ§åˆ¶äº†æ•°å€¼å˜åŒ–çš„é€Ÿç‡ä¸èŠ‚å¥ï¼Œæ˜¯è®©åŠ¨ç”»æ‘†è„±æœºæ¢°æ„Ÿã€è·å¾—ç”Ÿå‘½åŠ›çš„å…³é”®ã€‚</li>
<li><strong>æ¸²æŸ“å™¨æ‰§è¡Œæ’å€¼</strong>ï¼šåœ¨å…³é”®å¸§ä¹‹é—´ï¼ŒLottie æ¸²æŸ“å™¨ä¼šä¾æ®ç¼“åŠ¨æ›²çº¿ï¼Œä¸ºæ¯ä¸€å¸§<strong>å®æ—¶è®¡ç®—</strong>å‡ºç²¾ç¡®çš„å±æ€§å€¼ï¼Œä»è€Œåˆ›é€ å‡ºå¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚</li>
</ul>
<p>æ‚¨å·²ç»äº†è§£äº†ä»å®šä¹‰åˆ°æ¸²æŸ“çš„å®Œæ•´é“¾æ¡ã€‚å…³äº<strong>è´å¡å°”æ›²çº¿çš„æ•°å­¦åŸç†</strong>ã€<strong>å¤šç»´å±æ€§çš„ç‹¬ç«‹æ’å€¼ç­–ç•¥</strong>ä»¥åŠæ›´å¤æ‚çš„<strong>è¡¨è¾¾å¼åŠ¨ç”»</strong>ï¼Œéƒ½å±äºæ›´æ·±å…¥çš„è¯é¢˜ã€‚æŒæ¡äº†æœ¬ç« çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼Œæ‚¨å·²ç»å…·å¤‡äº†è‡ªè¡Œè§£æç»å¤§å¤šæ•° Lottie åŠ¨ç”»ã€å¹¶ç†è§£å…¶è¿åŠ¨é€»è¾‘çš„èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-24"><strong>äº”ã€å½¢çŠ¶ç³»ç»Ÿ - çŸ¢é‡å›¾å½¢</strong></h2>
<p>åœ¨ Lottie çš„å…­ç§åŸºç¡€å›¾å±‚ä¸­ï¼Œ<strong>å½¢çŠ¶å›¾å±‚ï¼ˆShape Layerï¼Œ<code>ty: 4</code>ï¼‰</strong> Â å æ®ç€ç‹¬ç‰¹è€Œæ ¸å¿ƒçš„åœ°ä½ã€‚å…¶ä»–å›¾å±‚ç±»å‹â€”â€”å¦‚ç©ºå¯¹è±¡å›¾å±‚ï¼ˆç”¨äºæ§åˆ¶ï¼‰ã€é¢„åˆæˆå›¾å±‚ï¼ˆç”¨äºåµŒå¥—ï¼‰ã€å›¾åƒå›¾å±‚ï¼ˆé™æ€ä½å›¾ï¼‰å’Œæ–‡æœ¬å›¾å±‚ï¼ˆå­—å½¢åŠ¨ç”»ï¼‰â€”â€”è™½ç„¶åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä¸å¯æˆ–ç¼ºï¼Œä½†å®ƒä»¬åœ¨æ•°æ®ç»“æ„å’ŒåŠ¨ç”»èƒ½åŠ›ä¸Šç›¸å¯¹ç®€å•ã€‚</p>
<p>å½¢çŠ¶å›¾å±‚ï¼ˆ<code>ty: 4</code>ï¼‰æ˜¯ Lottie å®ç°å¤æ‚çŸ¢é‡åŠ¨ç”»çš„æ ¸å¿ƒã€‚ä¸å…¶ä»–å›¾å±‚ç±»å‹ç›¸æ¯”ï¼Œå®ƒæ‹¥æœ‰æœ€ä¸°å¯Œçš„ä¸“æœ‰å±æ€§å’Œæœ€å¼ºçš„åŠ¨ç”»è¡¨ç°åŠ›ã€‚</p>
<h3 data-id="heading-25"><strong>å½¢çŠ¶å›¾å±‚çš„ç»“æ„ï¼š<code>ty: 4</code>Â ä¸Â <code>shapes</code>Â æ•°ç»„</strong></h3>
<p>å½“ä¸€ä¸ªå›¾å±‚çš„Â <code>ty</code>Â å€¼ä¸ºÂ <code>4</code>Â æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå½¢çŠ¶å›¾å±‚ã€‚å…¶æ ¸å¿ƒæ•°æ®å®¹å™¨æ˜¯Â <strong><code>shapes</code></strong>Â æ•°ç»„ï¼ˆåœ¨æ—©æœŸçš„ Lottie ç‰ˆæœ¬ä¸­å¯èƒ½æ ‡è®°ä¸ºÂ <code>it</code>ï¼‰ã€‚è¯¥æ•°ç»„æ˜¯ä¸€ä¸ª<strong>æœ‰åºçš„åˆ—è¡¨</strong>ï¼Œå®šä¹‰äº†æ„æˆæœ€ç»ˆçŸ¢é‡å›¾å½¢çš„æ‰€æœ‰åŸºç¡€å…ƒç´ ï¼Œä¾‹å¦‚è·¯å¾„ã€æè¾¹ã€å¡«å……ç­‰ã€‚</p>
<ul>
<li><strong>æœ‰åºæ¸²æŸ“ä¸å åŠ </strong>ï¼š<code>shapes</code>Â æ•°ç»„ä¸­çš„å…ƒç´ ä¸¥æ ¼éµå¾ª<strong>æ•°ç»„ç´¢å¼•é¡ºåºï¼ˆä»Â <code>0</code>Â åˆ°Â <code>n-1</code>ï¼‰è¿›è¡Œæ¸²æŸ“</strong>ã€‚åœ¨è§†è§‰ä¸Šï¼Œè¿™æ„å‘³ç€<strong>ç´¢å¼•å€¼æ›´å¤§çš„å…ƒç´ ï¼ˆåæ¸²æŸ“ï¼‰ä¼šå åŠ åœ¨ç´¢å¼•å€¼æ›´å°çš„å…ƒç´ ï¼ˆå…ˆæ¸²æŸ“ï¼‰ä¹‹ä¸Š</strong>ã€‚ä¾‹å¦‚ï¼Œ<code>shapes[2]</code>Â ä¼šè¦†ç›–åœ¨Â <code>shapes[0]</code>Â å’ŒÂ <code>shapes[1]</code>Â ä¹‹ä¸Šã€‚è¿™ä¸€è§„åˆ™æ˜¯ç»„ç»‡å¤æ‚å›¾å½¢å±‚çº§çš„åŸºç¡€ã€‚</li>
<li><strong>å…ƒç´ ç±»å‹</strong>ï¼šæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡Â <code>ty</code>Â å­—æ®µæ¥å£°æ˜è‡ªå·±çš„ç±»å‹ï¼ˆå¦‚Â <code>gr</code>Â è¡¨ç¤ºç»„ï¼Œ<code>sh</code>Â è¡¨ç¤ºè·¯å¾„ç­‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26"><strong>å››ç§åŸºç¡€å½¢çŠ¶ç±»å‹é€Ÿè§ˆ</strong></h3>
<p><code>shapes</code>Â æ•°ç»„ä¸­å¯ä»¥åŒ…å«å¤šç§å›¾å½¢å…ƒç´ ï¼Œå…¶ä¸­åŸºç¡€å½¢çŠ¶ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ï¼š</p>



































<table><thead><tr><th>ç±»å‹æ ‡è¯† (<code>ty</code>)</th><th>åç§°</th><th>æè¿°</th><th>æ ¸å¿ƒåŠ¨ç”»å±æ€§</th></tr></thead><tbody><tr><td><strong><code>rc</code></strong></td><td><strong>çŸ©å½¢</strong></td><td>å®šä¹‰çŸ©å½¢æˆ–åœ†è§’çŸ©å½¢ã€‚</td><td><code>p</code>Â (ä½ç½®),Â <code>s</code>Â (å°ºå¯¸),Â <code>r</code>Â (åœ†è§’åŠå¾„)</td></tr><tr><td><strong><code>el</code></strong></td><td><strong>æ¤­åœ†</strong></td><td>å®šä¹‰åœ†å½¢æˆ–æ¤­åœ†å½¢ã€‚</td><td><code>p</code>Â (ä¸­å¿ƒç‚¹),Â <code>s</code>Â (åŠå¾„/å°ºå¯¸)</td></tr><tr><td><strong><code>sr</code></strong></td><td><strong>æ˜Ÿå½¢/å¤šè¾¹å½¢</strong></td><td>å®šä¹‰æ˜Ÿå½¢æˆ–å¤šè¾¹å½¢ï¼Œå¯æ§åˆ¶è§’æ•°ã€å†…å¤–å¾„ç­‰ã€‚</td><td><code>p</code>Â (ä¸­å¿ƒç‚¹),Â <code>ir</code>/<code>or</code>Â (å†…/å¤–åŠå¾„),Â <code>pt</code>Â (è§’æ•°)</td></tr><tr><td><strong><code>sh</code></strong></td><td><strong>è‡ªç”±è·¯å¾„</strong></td><td>ç”±è´å¡å°”æ›²çº¿æ„æˆçš„ä»»æ„å½¢çŠ¶è·¯å¾„ï¼Œæ˜¯çŸ¢é‡å›¾å½¢çš„åŸºç¡€ã€‚</td><td><code>ks</code>Â (è·¯å¾„æ•°æ®ï¼ŒåŒ…å«é¡¶ç‚¹ä¸è´å¡å°”æ§åˆ¶ç‚¹)</td></tr></tbody></table>
<blockquote>
<p><strong>è¯´æ˜</strong>ï¼š<code>rc</code>,Â <code>el</code>,Â <code>sr</code>Â æœ¬è´¨ä¸Šæ˜¯å‚æ•°åŒ–å½¢çŠ¶ï¼Œå®ƒä»¬ä¼šåœ¨å¯¼å‡ºæ—¶è¢«è½¬æ¢ä¸ºæœ€ç»ˆçš„Â <code>sh</code>ï¼ˆè·¯å¾„ï¼‰æ•°æ®ã€‚ä½†åœ¨ JSON ä¸­ï¼Œå®ƒä»¬ä½œä¸ºé€»è¾‘å…ƒç´ å­˜åœ¨ï¼Œä¾¿äºç†è§£å’Œç¼–è¾‘ã€‚</p>
</blockquote>
<h3 data-id="heading-27"><strong>è‡ªç”±è·¯å¾„çš„æ ¸å¿ƒï¼šé¡¶ç‚¹ä¸è´å¡å°”æ§åˆ¶ç‚¹</strong></h3>
<p>è‡ªç”±è·¯å¾„ï¼ˆ<code>ty: â€˜shâ€˜</code>ï¼‰æ˜¯æœ€åŸºç¡€ã€æœ€çµæ´»çš„å½¢çŠ¶å…ƒç´ ã€‚å…¶æ ¸å¿ƒæ•°æ®å­˜å‚¨åœ¨Â <code>ks</code>Â å±æ€§ä¸­ï¼Œå®ƒå®šä¹‰äº†ä¸€ç³»åˆ—<strong>é¡¶ç‚¹ï¼ˆVertexï¼‰</strong> Â ä»¥åŠè¿æ¥è¿™äº›é¡¶ç‚¹çš„<strong>è´å¡å°”æ›²çº¿</strong>ã€‚</p>
<p>ä¸€ä¸ªè·¯å¾„çš„å…³é”®å¸§æ•°æ®é€šå¸¸åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  â€œaâ€<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è¡¨ç¤ºè·¯å¾„æ•°æ®æ˜¯åŠ¨ç”»çš„</span>
  â€œkâ€<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    â€œiâ€<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å…¥æ§åˆ¶ç‚¹ (In Tangent)</span>
    â€œoâ€<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å‡ºæ§åˆ¶ç‚¹ (Out Tangent)</span>
    â€œvâ€<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-number">50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// é¡¶ç‚¹ (Vertex)</span>
    â€œcâ€<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-comment">// è·¯å¾„æ˜¯å¦é—­åˆ (Closed)</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>v</code>Â (é¡¶ç‚¹)</strong> ï¼šä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå®šä¹‰äº†è·¯å¾„åœ¨ç©ºé—´ä¸­ç»è¿‡çš„å…³é”®ç‚¹åæ ‡Â <code>[x, y]</code>ã€‚</li>
<li><strong><code>i</code>Â (å…¥æ§åˆ¶ç‚¹)</strong> ï¼šå®šä¹‰æ›²çº¿<strong>è¿›å…¥</strong>å½“å‰é¡¶ç‚¹æ—¶çš„æ–¹å‘ä¸å¼ åŠ›ã€‚</li>
<li><strong><code>o</code>Â (å‡ºæ§åˆ¶ç‚¹)</strong> ï¼šå®šä¹‰æ›²çº¿<strong>ç¦»å¼€</strong>å½“å‰é¡¶ç‚¹æ—¶çš„æ–¹å‘ä¸å¼ åŠ›ã€‚</li>
<li><strong><code>c</code>Â (é—­åˆ)</strong> ï¼šå¸ƒå°”å€¼ï¼Œ<code>true</code>Â è¡¨ç¤ºè·¯å¾„çš„é¦–å°¾é¡¶ç‚¹åº”è¿æ¥ï¼Œå½¢æˆå°é—­å›¾å½¢ã€‚</li>
</ul>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š<code>v</code>Â å®šä¹‰äº†â€œéª¨æ¶â€ï¼Œ<code>i</code>Â å’ŒÂ <code>o</code>Â åˆ™å®šä¹‰äº†è¿æ¥éª¨æ¶çš„â€œè‚Œè‚‰â€æ›²çº¿ã€‚é€šè¿‡ä¸ºè¿™äº›æ•°æ®æ·»åŠ å…³é”®å¸§ï¼Œå³å¯å®ç°è·¯å¾„çš„å½¢å˜ã€ç»˜åˆ¶ç­‰å¤æ‚åŠ¨ç”»ã€‚</p>
<blockquote>
<p><strong>çŸ¥è¯†å…³è”ï¼šä¸¤ç§è´å¡å°”æ›²çº¿</strong><br/>
æ‚¨å¯èƒ½å·²ç»å‘ç°ï¼Œè¿™é‡Œçš„Â <code>i</code>Â å’ŒÂ <code>o</code>Â ä¸ç¬¬å››ç« <strong>å…³é”®å¸§ç¼“åŠ¨</strong>ä¸­çš„Â <code>i</code>Â å’ŒÂ <code>o</code>Â å­—æ®µåŒåï¼Œä¸”éƒ½ä»£è¡¨è´å¡å°”æ›²çº¿çš„æ§åˆ¶ç‚¹ã€‚è¿™æ˜¯ Lottie ä¸­è´å¡å°”æ›²çº¿çš„ä¸¤ç§æ ¸å¿ƒåº”ç”¨ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th><strong>ç©ºé—´è´å¡å°”æ›²çº¿ (æœ¬ç« )</strong></th><th><strong>æ—¶é—´è´å¡å°”æ›²çº¿ (ç¬¬å››ç« )</strong></th></tr></thead><tbody><tr><td><strong>ä½œç”¨</strong></td><td>å®šä¹‰<strong>ç©ºé—´ä¸­</strong>çš„å›¾å½¢<strong>å½¢çŠ¶</strong>ã€‚</td><td>å®šä¹‰<strong>æ—¶é—´ä¸Š</strong>çš„å±æ€§<strong>å˜åŒ–é€Ÿç‡</strong>ï¼ˆç¼“åŠ¨ï¼‰ã€‚</td></tr><tr><td><strong>æ§åˆ¶ç‚¹ (<code>i</code>/<code>o</code>)</strong></td><td>æ§åˆ¶é¡¶ç‚¹å¤„æ›²çº¿çš„<strong>æ–¹å‘ä¸æ›²ç‡</strong>ï¼Œå†³å®šè·¯å¾„å½¢æ€ã€‚</td><td>æ§åˆ¶å…³é”®å¸§å¤„åŠ¨ç”»<strong>é€Ÿåº¦çš„å¿«æ…¢</strong>ï¼Œå†³å®šè¿åŠ¨èŠ‚å¥ã€‚</td></tr><tr><td><strong>åæ ‡ç©ºé—´</strong></td><td>ä½äºç”»å¸ƒçš„<strong>äºŒç»´/ä¸‰ç»´ç©ºé—´</strong>Â (å¦‚Â <code>[x, y]</code>)ã€‚</td><td>ä½äº<strong>æ—¶é—´-è¿›åº¦äºŒç»´ç©ºé—´</strong>ï¼ŒXè½´æ˜¯æ—¶é—´(0-1)ï¼ŒYè½´æ˜¯è¿›åº¦(0-1)ã€‚</td></tr><tr><td><strong>ç›´è§‚æ„Ÿå—</strong></td><td>æ‹–æ‹½æ§åˆ¶æŸ„ï¼Œæ”¹å˜çš„æ˜¯<strong>çº¿çš„å¼¯æ›²ç¨‹åº¦</strong>ã€‚</td><td>æ‹–æ‹½æ§åˆ¶æŸ„ï¼Œæ”¹å˜çš„æ˜¯<strong>åŠ¨ç”»çš„å…ˆå¿«åæ…¢</strong>ã€‚</td></tr></tbody></table>
<p><strong>åº•å±‚ä¸€è‡´æ€§</strong>ï¼šå°½ç®¡åº”ç”¨ä¸åŒï¼Œä½†ä¸¤è€…éƒ½åŸºäº<strong>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</strong>çš„æ•°å­¦æ¨¡å‹ã€‚ç†è§£è¿™ä¸€ç‚¹åï¼Œæ— è®ºæ˜¯è°ƒæ•´è·¯å¾„å¹³æ»‘åº¦è¿˜æ˜¯åŠ¨ç”»ç¼“åŠ¨ï¼Œæ‚¨æ“ä½œçš„éƒ½æ˜¯åŒä¸€ç§â€œæ§åˆ¶ç‚¹â€é€»è¾‘ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä½•å¯è§†åŒ–å·¥å…·Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcubic-bezier.com%2F" target="_blank" title="https://cubic-bezier.com/" ref="nofollow noopener noreferrer">cubic-bezier.com</a></strong>Â å¯¹ç†è§£ä¸¤è€…éƒ½æœ‰å¸®åŠ©ï¼šè™½ç„¶å®ƒä¸»è¦ç”¨äºç¼“åŠ¨ï¼ˆæ—¶é—´ï¼‰ï¼Œä½†å…¶å¯¹æ›²çº¿å½¢æ€çš„ç›´è§‚å±•ç¤ºï¼ŒåŒæ ·æœ‰åŠ©äºæ‚¨æƒ³è±¡ç©ºé—´è·¯å¾„ä¸­æ§åˆ¶ç‚¹å¯¹å½¢çŠ¶çš„å½±å“ã€‚</p>
</blockquote>
<h3 data-id="heading-28"><strong>å½¢çŠ¶ç»„ï¼ˆ<code>gr</code>ï¼‰ï¼šåµŒå¥—ä¸ç»„ç»‡</strong></h3>
<p>ä¸ºäº†ç®¡ç†å¤æ‚çš„å›¾å½¢ï¼ŒLottie å¼•å…¥äº†Â <strong>å½¢çŠ¶ç»„ï¼ˆ<code>ty: â€˜grâ€˜</code>ï¼‰</strong> ã€‚ç»„å¯ä»¥å°†å¤šä¸ªå½¢çŠ¶å…ƒç´ ï¼ˆåŒ…æ‹¬å…¶ä»–ç»„ï¼‰æ‰“åŒ…ä¸ºä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚</p>
<ul>
<li>
<p><strong><code>it</code>Â æ•°ç»„</strong>ï¼šç»„çš„æ ¸å¿ƒå±æ€§ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºåŒ…å«å…¶å­å…ƒç´ ï¼ˆå¦‚è·¯å¾„ã€å¡«å……ã€æè¾¹æˆ–å…¶ä»–ç»„ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä½œç”¨</strong>ï¼š</p>
<ol>
<li><strong>å±‚æ¬¡åŒ–ç®¡ç†</strong>ï¼šåƒæ–‡ä»¶å¤¹ä¸€æ ·ç»„ç»‡å›¾å½¢ï¼Œä½¿ç»“æ„æ¸…æ™°ã€‚</li>
<li><strong>ç»Ÿä¸€å˜æ¢</strong>ï¼šç»„å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„Â <code>ks</code>ï¼ˆå˜æ¢ï¼‰å±æ€§ã€‚å¯¹è¯¥ç»„åº”ç”¨çš„å˜æ¢ï¼ˆå¦‚ç§»åŠ¨ã€ç¼©æ”¾ï¼‰ä¼šåŒæ—¶å½±å“å…¶å†…éƒ¨æ‰€æœ‰å­å…ƒç´ ã€‚</li>
<li><strong>åŠ¨ç”»å¤ç”¨</strong>ï¼šé€šè¿‡æ§åˆ¶ç»„çš„å˜æ¢ï¼Œå¯ä»¥è½»æ¾å®ç°æ•´ä¸ªå›¾å½¢æ¨¡å—çš„åŠ¨ç”»ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h2 data-id="heading-29"><strong>å…­ã€å½¢çŠ¶æ ·å¼ - å¡«å……ä¸æè¾¹</strong></h2>
<p>åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬æ¢ç´¢äº†å½¢çŠ¶å›¾å±‚å¦‚ä½•é€šè¿‡è·¯å¾„ã€æ¤­åœ†ã€çŸ©å½¢ç­‰å…ƒç´ å®šä¹‰å›¾å½¢çš„<strong>å‡ ä½•éª¨æ¶</strong>ã€‚ç„¶è€Œï¼Œåªæœ‰å‡ ä½•å½¢çŠ¶æ˜¯â€œä¸å¯è§â€çš„ã€‚è¦è®©å›¾å½¢çœŸæ­£è¢«æ¸²æŸ“å‡ºæ¥ï¼Œå°±éœ€è¦ä¸ºå…¶èµ‹äºˆ<strong>æ ·å¼</strong>ã€‚</p>
<p>æœ¬ç« å°†ä»‹ç»å½¢çŠ¶ç³»ç»Ÿä¸­è´Ÿè´£è§†è§‰å‘ˆç°çš„ä¸¤å¤§æ ¸å¿ƒæ ·å¼å…ƒç´ ï¼š<strong>å¡«å……ï¼ˆFillï¼‰</strong> Â ä¸<strong>æè¾¹ï¼ˆStrokeï¼‰</strong> ã€‚å®ƒä»¬ä¸ºå½¢çŠ¶çš„<strong>å†…éƒ¨</strong>å’Œ<strong>è½®å»“</strong>æä¾›é¢œè‰²ã€æ¸å˜å’Œä¸é€æ˜åº¦ç­‰è§†è§‰æ•ˆæœï¼Œæ˜¯çŸ¢é‡å›¾å½¢ä»â€œçº¿æ¡†â€å˜ä¸ºâ€œç”»é¢â€çš„å…³é”®ã€‚</p>
<h3 data-id="heading-30"><strong>6.1 æ ·å¼çš„ä½œç”¨ï¼šè®©å½¢çŠ¶å¯è§</strong></h3>
<p>åœ¨Â <code>shapes</code>Â æ•°ç»„ä¸­ï¼Œæ ·å¼å…ƒç´ ï¼ˆå¦‚Â <code>fl</code>ã€<code>st</code>ï¼‰ä¸å½¢çŠ¶å…ƒç´ ï¼ˆå¦‚Â <code>sh</code>ã€<code>el</code>ï¼‰åœ°ä½å¹³ç­‰ï¼Œé€šè¿‡<strong>æ¸²æŸ“é¡ºåº</strong>ç›¸äº’ç»“åˆã€‚</p>
<ul>
<li><strong>å †å è§„åˆ™</strong>ï¼š<code>it</code>Â æ•°ç»„ä¸­çš„å…ƒç´ <strong>æŒ‰ç´¢å¼•é¡ºåºä¾æ¬¡ç»˜åˆ¶</strong>ã€‚è¿™æ„å‘³ç€ç´¢å¼•æ›´å¤§çš„å…ƒç´ ï¼ˆåç»˜åˆ¶çš„ï¼‰ä¼šå åŠ åœ¨ç´¢å¼•æ›´å°çš„å…ƒç´ ï¼ˆå…ˆç»˜åˆ¶çš„ï¼‰ä¹‹ä¸Šã€‚åœ¨å›¾å½¢æ„å»ºä¸­ï¼Œé€šå¸¸å…ˆå®šä¹‰"å½¢çŠ¶"å…ƒç´ ï¼ˆå¦‚Â <code>el</code>,Â <code>sh</code>ï¼‰ï¼Œå†å®šä¹‰ä¸ºå…¶ç€è‰²çš„"æ ·å¼"å…ƒç´ ï¼ˆå¦‚Â <code>fl</code>,Â <code>st</code>ï¼‰ã€‚</li>
<li><strong>ç‹¬ç«‹æ€§ä¸ç»„åˆæ€§</strong>ï¼šæ ·å¼å…ƒç´ æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥è‡ªç”±ç»„åˆã€‚ä¸€ä¸ªå½¢çŠ¶å¯ä»¥åŒæ—¶æ‹¥æœ‰å¡«å……å’Œæè¾¹ï¼Œä¹Ÿå¯ä»¥åªæœ‰å…¶ä¸­ä¸€ç§ã€‚å®ƒä»¬å…±åŒé™„ç€äºå…¶ä¸Šæ–¹æœ€è¿‘ä¸”æœªé—­åˆçš„å›¾å½¢å…ƒç´ æˆ–ç»„ã€‚</li>
</ul>
<h3 data-id="heading-31"><strong>å¡«å……ï¼ˆFillï¼‰ï¼šçº¯è‰²ä¸æ¸å˜</strong></h3>
<p>å¡«å……ç”¨äºä¸ºå½¢çŠ¶çš„å†…éƒ¨åŒºåŸŸç€è‰²ã€‚Lottie æ”¯æŒä¸¤ç§å¡«å……ç±»å‹ã€‚</p>
<h4 data-id="heading-32"><strong>çº¯è‰²å¡«å……ï¼ˆ<code>ty</code>: 'fl'ï¼‰</strong></h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„å¡«å……ç±»å‹ï¼Œä½¿ç”¨å•ä¸€é¢œè‰²ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fl"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç±»å‹ï¼šFill (çº¯è‰²å¡«å……)</span>
  <span class="hljs-attr">"c"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>      <span class="hljs-comment">// Color (é¢œè‰²)</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.6</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// RGBA æ•°ç»„ï¼Œå€¼èŒƒå›´ 0-1</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-comment">// Opacity (ä¸é€æ˜åº¦)</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-33"><strong>æ¸å˜å¡«å……ï¼ˆ<code>ty</code>: 'gf'ï¼‰</strong></h4>
<p>Lottie æ”¯æŒçº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜ï¼Œä¸ºå¡«å……å¸¦æ¥ä¸°å¯Œçš„è‰²å½©è¿‡æ¸¡ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gf"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç±»å‹ï¼šGradient Fill (æ¸å˜å¡«å……)</span>
  <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// æ¸å˜ç±»å‹ï¼š1-çº¿æ€§ï¼Œ2-å¾„å‘</span>
  <span class="hljs-attr">"g"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"p"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.6</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// èµ·ç‚¹ (çº¿æ€§) / èµ·å§‹ç‚¹ (å¾„å‘)</span>
  <span class="hljs-attr">"e"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span>  <span class="hljs-comment">// ç»ˆç‚¹ (çº¿æ€§) / ç»“æŸç‚¹ (å¾„å‘)</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>g</code>Â å¯¹è±¡</strong>ï¼šæ˜¯æ¸å˜çš„æ ¸å¿ƒã€‚<code>p</code>Â å®šä¹‰è‰²æ ‡æ•°é‡ï¼Œ<code>k</code>Â æ˜¯ä¸€ä¸ªæ‰å¹³çš„æ•°ç»„ï¼Œæ¯ 5 ä¸ªæ•°å­—ä¸ºä¸€ç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªè‰²æ ‡çš„Â <code>[ä½ç½®, R, G, B, A]</code>ã€‚æ‰€æœ‰è‰²æ ‡æ•°æ®æŒ‰é¡ºåºè¿æ¥ã€‚</li>
</ul>
<h3 data-id="heading-34"><strong>æè¾¹ï¼ˆStrokeï¼‰ï¼šè½®å»“ä¸æ ·å¼</strong></h3>
<p>æè¾¹ç”¨äºç»˜åˆ¶å½¢çŠ¶çš„è½®å»“çº¿ã€‚å®ƒæ‹¥æœ‰æ¯”å¡«å……æ›´ä¸°å¯Œçš„å±æ€§æ¥æ§åˆ¶çº¿æ¡çš„è§†è§‰è¡¨ç°ã€‚</p>
<h4 data-id="heading-35"><strong>çº¯è‰²æè¾¹ï¼ˆ<code>ty</code>: 'st'ï¼‰</strong></h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"st"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç±»å‹ï¼šStroke (æè¾¹)</span>
  <span class="hljs-attr">"c"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// é¢œè‰²ï¼ŒåŒå¡«å……</span>
  <span class="hljs-attr">"w"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>      <span class="hljs-comment">// Width (çº¿å®½)</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span>    <span class="hljs-comment">// çº¿å®½ä¸º5åƒç´ </span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lc"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// Line Cap (çº¿å¸½): 1-å¹³å¤´, 2-åœ†å¤´, 3-æ–¹å¤´</span>
  <span class="hljs-attr">"lj"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// Line Join (è¿æ¥): 1-æ–œæ¥, 2-åœ†è§’, 3-æ–œé¢</span>
  <span class="hljs-attr">"ml"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// Miter Limit (æ–œæ¥é™åˆ¶)</span>
  <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-comment">// ä¸é€æ˜åº¦</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>w</code>Â (Width)</strong> ï¼šæè¾¹çš„ç²—ç»†ï¼Œæ”¯æŒåŠ¨ç”»ã€‚</li>
<li><strong><code>lc</code>Â (Line Cap)</strong> ï¼šå®šä¹‰çº¿æ®µç«¯ç‚¹çš„æ ·å¼ã€‚</li>
<li><strong><code>lj</code>Â (Line Join)</strong> ï¼šå®šä¹‰çº¿æ®µè½¬æŠ˜å¤„çš„è¿æ¥æ ·å¼ã€‚</li>
<li><strong><code>ml</code>Â (Miter Limit)</strong> ï¼šå½“Â <code>lj</code>Â ä¸º 1 (æ–œæ¥) æ—¶ï¼Œæ§åˆ¶æ–œæ¥é•¿åº¦ä¸çº¿å®½çš„æ¯”ä¾‹ä¸Šé™ï¼Œé˜²æ­¢å°–è§’è¿‡é•¿ã€‚</li>
</ul>
<h4 data-id="heading-36"><strong>æ¸å˜æè¾¹ï¼ˆ<code>ty</code>: 'gs'ï¼‰</strong></h4>
<p>æ¸å˜æè¾¹çš„æ•°æ®ç»“æ„ä¸æ¸å˜å¡«å…… (<code>gf</code>) é«˜åº¦ç›¸ä¼¼ï¼ŒåŒ…å«Â <code>t</code>Â (ç±»å‹)ã€<code>g</code>Â (æ¸å˜æ•°æ®) ç­‰å±æ€§ï¼ŒåŒºåˆ«åœ¨äºå®ƒåº”ç”¨äºè½®å»“çº¿è€Œéå¡«å……åŒºåŸŸã€‚</p>
<h3 data-id="heading-37"><strong>æ ·å¼çš„é€šç”¨å±æ€§</strong></h3>
<p>å¡«å……å’Œæè¾¹å…±äº«ä¸€äº›æ§åˆ¶å…¶æœ€ç»ˆå‘ˆç°æ•ˆæœçš„é€šç”¨å±æ€§ï¼š</p>




















<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong><code>o</code></strong></td><td><code>object</code></td><td><strong>ä¸é€æ˜åº¦ (Opacity)</strong> ã€‚é€šè¿‡Â <code>a</code>Â å’ŒÂ <code>k</code>Â æ§åˆ¶ï¼Œ<strong>å€¼èŒƒå›´ä¸º 0 åˆ° 100</strong>ï¼ˆ100 ä¸ºå®Œå…¨ä¸é€æ˜ï¼‰ã€‚è¿™ä¸ CSS ä¸­ 0-1 çš„èŒƒå›´ä¸åŒï¼Œè¯·æ³¨æ„åŒºåˆ†ã€‚</td></tr><tr><td><strong><code>bm</code></strong></td><td><code>number</code></td><td><strong>æ··åˆæ¨¡å¼ (Blend Mode)</strong> ã€‚å®šä¹‰å½“å‰æ ·å¼å¦‚ä½•ä¸ä¸‹æ–¹å·²æœ‰çš„åƒç´ è¿›è¡Œæ··åˆã€‚å¸¸è§å€¼ï¼š<code>0</code>Â (æ­£å¸¸)ã€<code>1</code>Â (ç›¸ä¹˜)ã€<code>2</code>Â (å±å¹•) ç­‰ï¼Œå¯¹åº” After Effects ä¸­çš„æ··åˆæ¨¡å¼ã€‚</td></tr></tbody></table>
<h3 data-id="heading-38">ğŸ¨å°è¯•ç‰›åˆ€ï¼šç”»ä¸ªåœ†</h3>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»¼åˆè¿ç”¨ä»¥ä¸Šæ¦‚å¿µï¼Œåˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„å½¢çŠ¶ï¼š<strong>ä¸€ä¸ªè“è‰²çš„å®å¿ƒåœ†</strong>ã€‚æˆ‘ä»¬å°†é€šè¿‡ JSON é…ç½®ï¼Œæ¸…æ™°åœ°å±•ç¤ºå½¢çŠ¶å›¾å±‚çš„Â <code>shapes</code>Â æ•°ç»„æ˜¯å¦‚ä½•ç»„ç»‡èµ·æ¥çš„ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5733db6d3a25461f92ca58eb48742101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOo5Y2r5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876452&amp;x-signature=atYsH7mr0D%2BItQkxiTEoGqbKwpk%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p>ä»¥ä¸‹æ˜¯å®ç°è¯¥åœ†å½¢çš„<strong>ç²¾ç®€ç‰ˆ JSON é…ç½®</strong>ï¼Œæˆ‘ä»¬çœç•¥äº†å‰é¢ç« èŠ‚å·²è¯¦ç»†è®²è§£çš„é€šç”¨å›¾å±‚å±æ€§ï¼ˆå¦‚Â <code>ks</code>Â å˜æ¢ï¼‰ï¼Œå°†ç„¦ç‚¹å®Œå…¨æ”¾åœ¨å½¢çŠ¶å›¾å±‚ç‰¹æœ‰çš„Â <code>shapes</code>Â æ•°ç»„ä¸Šï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"v"</span>: <span class="hljs-string">"5.7.4"</span>,
  <span class="hljs-string">"fr"</span>: <span class="hljs-number">30</span>,
  <span class="hljs-string">"ip"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"op"</span>: <span class="hljs-number">90</span>,
  <span class="hljs-string">"w"</span>: <span class="hljs-number">800</span>,
  <span class="hljs-string">"h"</span>: <span class="hljs-number">600</span>,
  <span class="hljs-string">"layers"</span>: [
    {
      <span class="hljs-string">"ty"</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// â­ï¸ æ ¸å¿ƒæ ‡è¯†ï¼šè¿™æ˜¯ä¸€ä¸ªå½¢çŠ¶å›¾å±‚</span>
      <span class="hljs-string">"nm"</span>: <span class="hljs-string">"å¸¦æè¾¹åœ†å½¢"</span>,
      <span class="hljs-string">"ind"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-comment">// ğŸ”½ æ­¤å¤„çœç•¥äº†å›¾å±‚çš„ `ks` å˜æ¢å±æ€§ï¼ˆå¦‚ p, a, s, r, oï¼‰</span>
      <span class="hljs-comment">// åœ¨å®Œæ•´æ–‡ä»¶ä¸­ï¼Œå®ƒä»¬ç”¨äºå°†æ•´ä¸ªå›¾å±‚å®šä½åœ¨ç”»å¸ƒä¸­å¿ƒï¼Œä¾‹å¦‚ï¼š</span>
      <span class="hljs-comment">// "ks": { "p": { "a": 0, "k": [400, 300, 0] }, ... }</span>
      
      <span class="hljs-string">"shapes"</span>: [ <span class="hljs-comment">// â­ï¸ æœ¬ç« æ ¸å¿ƒï¼šå½¢çŠ¶ä¸æ ·å¼æ•°ç»„</span>
        {
          <span class="hljs-string">"ty"</span>: <span class="hljs-string">"gr"</span>, <span class="hljs-comment">// ç±»å‹ï¼šgr (Group)ï¼Œä¸€ä¸ªå½¢çŠ¶ç»„</span>
          <span class="hljs-string">"nm"</span>: <span class="hljs-string">"åœ†å½¢ç»„"</span>,
          <span class="hljs-string">"it"</span>: [ <span class="hljs-comment">// ç»„å†…å…ƒç´ åˆ—è¡¨ï¼ŒæŒ‰ç´¢å¼•é¡ºåº 0â†’1â†’2â†’3 æ¸²æŸ“</span>
            <span class="hljs-comment">// 1. å½¢çŠ¶å®šä¹‰ï¼šæ¤­åœ† (el) - å…ˆç»˜åˆ¶ï¼Œå®šä¹‰å‡ ä½•è½®å»“</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"el"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"æ¤­åœ†è·¯å¾„"</span>,
              <span class="hljs-string">"p"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] }, <span class="hljs-comment">// ä½ç½®ï¼šç›¸å¯¹äºç»„çš„ä¸­å¿ƒ</span>
              <span class="hljs-string">"s"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">100</span>] } <span class="hljs-comment">// å°ºå¯¸ï¼šå®½é«˜100pxï¼Œå³åœ†å½¢</span>
            },
            <span class="hljs-comment">// 2. æ ·å¼å®šä¹‰ï¼šå¡«å…… (fl) - å…¶æ¬¡ç»˜åˆ¶ï¼Œä¸ºå½¢çŠ¶å†…éƒ¨ç€è‰²</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"fl"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"è“è‰²å¡«å……"</span>,
              <span class="hljs-string">"c"</span>: { 
                <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, 
                <span class="hljs-string">"k"</span>: [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>] <span class="hljs-comment">// é¢œè‰²ï¼šRGBAï¼Œæ­¤ä¸ºè“è‰²</span>
              },
              <span class="hljs-string">"o"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: <span class="hljs-number">100</span> } <span class="hljs-comment">// ä¸é€æ˜åº¦ï¼š100%</span>
            },
            <span class="hljs-comment">// 3. æ ·å¼å®šä¹‰ï¼šæè¾¹ (st) - æœ€åç»˜åˆ¶ï¼Œä¸ºå½¢çŠ¶è½®å»“æ·»åŠ è¾¹çº¿</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"st"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"ç™½è‰²æè¾¹"</span>,
              <span class="hljs-string">"c"</span>: { 
                <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, 
                <span class="hljs-string">"k"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>] <span class="hljs-comment">// é¢œè‰²ï¼šç™½è‰²</span>
              },
              <span class="hljs-string">"w"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: <span class="hljs-number">5</span> }, <span class="hljs-comment">// çº¿å®½ï¼š5åƒç´ </span>
              <span class="hljs-string">"lc"</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// çº¿å¸½ï¼š2 = åœ†å¤´</span>
              <span class="hljs-string">"lj"</span>: <span class="hljs-number">2</span>  <span class="hljs-comment">// è¿æ¥ï¼š2 = åœ†è§’</span>
            },
            <span class="hljs-comment">// 4. å¿…éœ€çš„ç»„å˜æ¢ (tr) - å¿…é¡»æ”¾åœ¨æœ€åï¼Œæ§åˆ¶æ•´ä¸ªç»„çš„å˜æ¢</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"tr"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"ç»„å˜æ¢"</span>
              <span class="hljs-comment">// å…¶å†…éƒ¨å±æ€§ (p, a, s, r, o) é€šå¸¸ä¿æŒé»˜è®¤å€¼ [0, 0, 100, 0, 100]</span>
            }
          ]
        }
      ]
    }
  ]
}
</code></pre>
<hr/>
<h2 data-id="heading-39"><strong>ä¸ƒã€å½¢çŠ¶ä¿®æ”¹å™¨ - Trimã€Repeater</strong></h2>
<p>åœ¨æŒæ¡äº†å½¢çŠ¶çš„æ„å»ºä¸æ ·å¼ä¹‹åï¼Œæˆ‘ä»¬è¿æ¥äº†å½¢çŠ¶ç³»ç»Ÿçš„æœ€åä¸€å—æ‹¼å›¾ï¼š<strong>ä¿®æ”¹å™¨ï¼ˆModifiersï¼‰</strong> ã€‚å®ƒä»¬ä¸æ˜¯ç‹¬ç«‹å½¢çŠ¶ï¼Œè€Œæ˜¯<strong>é™„åŠ åœ¨ç°æœ‰å½¢çŠ¶æˆ–ç»„ä¹‹ä¸Š</strong>çš„â€œæ•ˆæœå¤„ç†å™¨â€ï¼Œèƒ½å¤Ÿä»¥éç ´åæ€§çš„æ–¹å¼åŠ¨æ€æ”¹å˜å›¾å½¢çš„å¤–è§‚æˆ–è¡Œä¸ºï¼Œæ˜¯å®ç°å¤æ‚ã€ç¨‹å¼åŒ–åŠ¨ç”»çš„å…³é”®ã€‚</p>
<h3 data-id="heading-40"><strong>ä¿®æ”¹å™¨çš„æ¦‚å¿µï¼šä½œç”¨èŒƒå›´ä¸é¡ºåº</strong></h3>
<p>ä¿®æ”¹å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å…ƒç´ ï¼Œå…¶Â <code>ty</code>Â å€¼å®šä¹‰åœ¨Â <code>shapes</code>Â æˆ–Â <code>it</code>Â æ•°ç»„ä¸­ã€‚å®ƒä»¬<strong>ä¸ç›´æ¥æ¸²æŸ“</strong>ï¼Œè€Œæ˜¯åƒä¸€ä¸ªå¤„ç†å™¨ï¼Œ<strong>ä½œç”¨äºæ’åˆ—åœ¨å®ƒä¹‹å‰çš„ç‰¹å®šå…ƒç´ </strong>ã€‚</p>
<ul>
<li><strong>ä½œç”¨é€»è¾‘</strong>ï¼šåœ¨Â <code>it</code>Â æ•°ç»„ä¸­ï¼Œä¿®æ”¹å™¨æŒ‰ç…§<strong>ä»å‰å¾€å</strong>çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªä¿®æ”¹å™¨ä¼šä½œç”¨äºå®ƒ<strong>ä¹‹å‰å·²å®šä¹‰</strong>çš„ç‰¹å®šå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œ<code>Trim Path</code>Â è£å‰ªå…¶ä¹‹å‰çš„è·¯å¾„ï¼Œ<code>Repeater</code>Â é‡å¤å…¶ä¹‹å‰çš„æ•´ä¸ªå½¢çŠ¶ç»„åˆã€‚</li>
<li><strong>é¡ºåºå…³é”®</strong>ï¼šä¿®æ”¹å™¨çš„<strong>ä½ç½®</strong>å†³å®šäº†å…¶ä½œç”¨èŒƒå›´å’Œæœ€ç»ˆæ•ˆæœã€‚ä¾‹å¦‚ï¼Œ<code>[å½¢çŠ¶ â†’ æ ·å¼ â†’ Trim]</code>Â ä¼šè£å‰ªå·²ç€è‰²çš„å½¢çŠ¶ï¼›è€ŒÂ <code>[å½¢çŠ¶ â†’ Trim â†’ æ ·å¼]</code>Â ä¼šå…ˆè£å‰ªè·¯å¾„ï¼Œå†ä¸ºè£å‰ªåçš„éƒ¨åˆ†ç€è‰²ã€‚</li>
</ul>
<h3 data-id="heading-41"><strong>Trim Pathï¼ˆ<code>tm</code>ï¼‰ï¼šè·¯å¾„è£å‰ªåŠ¨ç”»</strong></h3>
<p><code>Trim Path</code>ï¼ˆè·¯å¾„è£å‰ªï¼‰æ˜¯æœ€å¸¸ç”¨çš„ä¿®æ”¹å™¨ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡æ§åˆ¶è·¯å¾„çš„â€œèµ·æ­¢ç‚¹â€æ¥åˆ›é€ <strong>ç¬”è§¦ç»˜åˆ¶ã€æ“¦é™¤ã€æ‰«æ</strong>ç­‰åŠ¨ç”»æ•ˆæœã€‚</p>
<p><strong>æ ¸å¿ƒå±æ€§ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tm"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç±»å‹ï¼šTrim Paths</span>
  <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Startï¼ˆèµ·ç‚¹ç™¾åˆ†æ¯”ï¼‰</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span><span class="hljs-number">90</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// ä»0%åˆ°100%</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"e"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Endï¼ˆç»ˆç‚¹ç™¾åˆ†æ¯”ï¼‰</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"t"</span><span class="hljs-punctuation">:</span><span class="hljs-number">90</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// ä¿æŒ100%</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Offsetï¼ˆåç§»ï¼‰</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-comment">// èŒƒå›´0-360Â°ï¼Œæ•´ä½“åç§»è£å‰ªåŒºåŸŸ</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>s</code>Â (Start)</strong> ï¼šè·¯å¾„å¯è§éƒ¨åˆ†çš„<strong>èµ·ç‚¹</strong>ï¼ŒèŒƒå›´ 0-100%ã€‚åŠ¨ç”»åŒ–æ­¤å±æ€§å¯å®ç°â€œç”Ÿé•¿â€åŠ¨ç”»ã€‚</li>
<li><strong><code>e</code>Â (End)</strong> ï¼šè·¯å¾„å¯è§éƒ¨åˆ†çš„<strong>ç»ˆç‚¹</strong>ï¼ŒèŒƒå›´ 0-100%ã€‚é€šå¸¸Â <code>e</code>Â &gt;=Â <code>s</code>ã€‚</li>
<li><strong><code>o</code>Â (Offset)</strong> ï¼š<strong>è£å‰ªåŒºåŸŸçš„æ•´ä½“åç§»é‡</strong>ï¼ŒèŒƒå›´ 0-360Â°ã€‚å®ƒå¯ä»¥è®©è£å‰ªçš„èµ·æ­¢ç‚¹æ²¿è·¯å¾„å¾ªç¯ç§»åŠ¨ï¼Œå¸¸ç”¨äºåˆ›å»ºâ€œè¿½é€â€æˆ–â€œå¾ªç¯æ‰«æâ€æ•ˆæœã€‚</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨</strong>ï¼šé€šè¿‡åŠ¨ç”»Â <code>s</code>Â å’ŒÂ <code>e</code>Â å±æ€§ï¼Œå¯ä»¥å®ç°ç»å…¸çš„â€œç¬”ç”»ä¹¦å†™â€æˆ–â€œè¿›åº¦æ¡å¡«å……â€æ•ˆæœã€‚</p>
<h3 data-id="heading-42"><strong>Repeaterï¼ˆ<code>rp</code>ï¼‰ï¼šé‡å¤å™¨</strong></h3>
<p><code>Repeater</code>ï¼ˆé‡å¤å™¨ï¼‰èƒ½å°†<strong>å®ƒä¹‹å‰çš„æ‰€æœ‰å›¾å½¢å…ƒç´ </strong>ï¼ˆåŒ…æ‹¬å½¢çŠ¶ã€æ ·å¼ç”šè‡³å…¶ä»–ä¿®æ”¹å™¨ï¼‰å¤åˆ¶å¤šæ¬¡ï¼Œå¹¶å¯¹æ¯ä¸ªå‰¯æœ¬åº”ç”¨é€’å¢çš„å˜æ¢ï¼Œå¿«é€Ÿåˆ›å»º<strong>é˜µåˆ—ã€æ”¾å°„çŠ¶ã€å¾ªç¯</strong>ç­‰å¤æ‚å›¾æ¡ˆã€‚</p>
<p><strong>æ ¸å¿ƒå±æ€§ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rp"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç±»å‹ï¼šRepeater</span>
  <span class="hljs-attr">"c"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Copiesï¼ˆå‰¯æœ¬æ•°é‡ï¼‰</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span> <span class="hljs-comment">// ç”Ÿæˆ5ä¸ªå‰¯æœ¬ï¼ˆåŒ…å«åŸå§‹å›¾å½¢ï¼‰</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Offsetï¼ˆå‰¯æœ¬ç´¢å¼•åç§»ï¼‰</span>
    <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-comment">// æ§åˆ¶ä»å“ªä¸ªâ€œè™šæ‹Ÿå‰¯æœ¬â€å¼€å§‹æ¸²æŸ“ï¼Œå¯ç”¨äºåŠ¨ç”»</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"m"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Compositeï¼ˆåˆæˆæ¨¡å¼ï¼‰ï¼š1=Aboveï¼ˆåç»­å‰¯æœ¬åœ¨ä¸Šæ–¹ï¼‰ï¼Œ2=Belowï¼ˆåç»­å‰¯æœ¬åœ¨ä¸‹æ–¹ï¼‰</span>
  <span class="hljs-attr">"tr"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// Transformï¼ˆæ¯ä¸ªå‰¯æœ¬çš„å¢é‡å˜æ¢ï¼‰</span>
    <span class="hljs-attr">"p"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">20</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä½ç½®å¢é‡ï¼šæ¯ä¸ªå‰¯æœ¬å³ç§»20px</span>
    <span class="hljs-attr">"s"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">90</span><span class="hljs-punctuation">,</span> <span class="hljs-number">90</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¼©æ”¾å¢é‡ï¼šæ¯ä¸ªå‰¯æœ¬ç¼©å°è‡³90%</span>
    <span class="hljs-attr">"r"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-number">30</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span> <span class="hljs-comment">// æ—‹è½¬å¢é‡ï¼šæ¯ä¸ªå‰¯æœ¬æ—‹è½¬30åº¦</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>c</code>Â (Copies)</strong> ï¼šç”Ÿæˆçš„å‰¯æœ¬æ€»æ•°ï¼ˆåŒ…å«åŸå§‹å›¾å½¢ï¼‰ã€‚</li>
<li><strong><code>o</code>Â (Offset)</strong> ï¼šæ§åˆ¶ä»å“ªä¸ªâ€œè™šæ‹Ÿå‰¯æœ¬â€å¼€å§‹æ¸²æŸ“ï¼Œå¯ç”¨äºåŠ¨ç”»ã€‚</li>
<li><strong><code>m</code>Â (Composite)</strong> ï¼šæ§åˆ¶å‰¯æœ¬çš„å †å é¡ºåºã€‚<code>1</code>Â è¡¨ç¤ºæ–°å‰¯æœ¬å åœ¨ä¸Šæ–¹ï¼Œ<code>2</code>Â è¡¨ç¤ºæ–°å‰¯æœ¬å åœ¨ä¸‹æ–¹ã€‚</li>
<li><strong><code>tr</code>Â (Transform)</strong> ï¼šå®šä¹‰æ¯ä¸ªæ–°å‰¯æœ¬ç›¸å¯¹äºå‰ä¸€ä¸ªå‰¯æœ¬çš„<strong>å˜æ¢å¢é‡</strong>ï¼Œæ˜¯åˆ›é€ è§„å¾‹æ€§å˜åŒ–çš„å…³é”®ã€‚</li>
</ul>
<h3 data-id="heading-43"><strong>å…¶ä»–ä¿®æ”¹å™¨ç®€ä»‹</strong></h3>
<p>é™¤äº†ä¸Šè¿°ä¸¤ä¸ªï¼ŒLottie è¿˜æä¾›äº†å…¶ä»–å®ç”¨çš„ä¿®æ”¹å™¨æ¥æ‰©å±•å›¾å½¢èƒ½åŠ›ï¼š</p>























<table><thead><tr><th>ç±»å‹æ ‡è¯† (<code>ty</code>)</th><th>åç§°</th><th>æ ¸å¿ƒä½œç”¨</th><th>å…³é”®å±æ€§ä¸å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong><code>rd</code></strong></td><td><strong>Round Corners</strong>Â (åœ†è§’)</td><td>å°†è·¯å¾„çš„æ‰€æœ‰å°–è§’è½¬æ¢ä¸ºæŒ‡å®šåŠå¾„çš„åœ†è§’ã€‚</td><td><code>r</code>ï¼šåœ†è§’åŠå¾„ã€‚</td></tr><tr><td><strong><code>mm</code></strong></td><td><strong>Merge Paths</strong>Â (åˆå¹¶è·¯å¾„)</td><td>å°†å¤šä¸ªè·¯å¾„åˆå¹¶ä¸ºä¸€ä¸ªï¼ˆç±»ä¼¼å¸ƒå°”è¿ç®—ï¼‰ã€‚</td><td><code>mm</code>ï¼šåˆå¹¶æ¨¡å¼ï¼ˆå¦‚ç›¸åŠ ã€ç›¸å‡ã€äº¤é›†ç­‰ï¼‰ã€‚ âš ï¸Â <strong>æ³¨æ„</strong>ï¼šå®˜æ–¹æ–‡æ¡£æ ‡æ³¨æ­¤åŠŸèƒ½<strong>ç›®å‰ä¸è¢«æ”¯æŒ</strong>ï¼Œä½¿ç”¨æ—¶éœ€è°¨æ…æµ‹è¯•ã€‚</td></tr></tbody></table>
<h3 data-id="heading-44">ğŸ¨å°è¯•ç‰›åˆ€ï¼šloadingåŠ¨ç”»</h3>
<p>è®©æˆ‘ä»¬å°†å­¦åˆ°çš„Â <code>Trim Path</code>Â çŸ¥è¯†åº”ç”¨åˆ°å®è·µä¸­ï¼Œåˆ¶ä½œä¸€ä¸ªç»å…¸çš„ loading åŠ¨ç”»ã€‚ä¸‹é¢çš„ç¤ºä¾‹å°†å±•ç¤ºå¦‚ä½•é€šè¿‡åŠ¨ç”»Â <code>o</code>ï¼ˆåç§»ï¼‰å±æ€§æ¥åˆ›å»ºæŒç»­æ—‹è½¬çš„åœ†ç¯è¿›åº¦æ•ˆæœã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e06b64b3e4dd48d5a36702fdcf93bca5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOo5Y2r5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876452&amp;x-signature=98ongG8AtZhZAutA0JARGRteDZE%3D" alt="å½•å±2026-01-08 17.48.53.gif" width="50%" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"v"</span>: <span class="hljs-string">"5.7.4"</span>,
  <span class="hljs-string">"fr"</span>: <span class="hljs-number">30</span>,
  <span class="hljs-string">"ip"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"op"</span>: <span class="hljs-number">90</span>,
  <span class="hljs-string">"w"</span>: <span class="hljs-number">800</span>,
  <span class="hljs-string">"h"</span>: <span class="hljs-number">600</span>,
  <span class="hljs-string">"nm"</span>: <span class="hljs-string">"Trim Pathæ¼”ç¤º"</span>,
  <span class="hljs-string">"layers"</span>: [
    {
      <span class="hljs-string">"ty"</span>: <span class="hljs-number">4</span>,
      <span class="hljs-string">"nm"</span>: <span class="hljs-string">"åœ†å½¢ç»˜åˆ¶åŠ¨ç”»"</span>,
      <span class="hljs-string">"ind"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-string">"ks"</span>: {
        <span class="hljs-string">"p"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">0</span>] }
      },
      <span class="hljs-string">"shapes"</span>: [
        {
          <span class="hljs-string">"ty"</span>: <span class="hljs-string">"gr"</span>,
          <span class="hljs-string">"nm"</span>: <span class="hljs-string">"åœ†å½¢ç»„"</span>,
          <span class="hljs-string">"it"</span>: [
            <span class="hljs-comment">// 1. åœ†å½¢è·¯å¾„</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"el"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"åœ†å½¢è·¯å¾„"</span>,
              <span class="hljs-string">"p"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] },
              <span class="hljs-string">"s"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">200</span>, <span class="hljs-number">200</span>] }
            },
            <span class="hljs-comment">// 2. æè¾¹æ ·å¼</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"st"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"æè¾¹"</span>,
              <span class="hljs-string">"c"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>] },
              <span class="hljs-string">"w"</span>: { <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"k"</span>: <span class="hljs-number">12</span> },
              <span class="hljs-string">"lc"</span>: <span class="hljs-number">2</span>,
              <span class="hljs-string">"lj"</span>: <span class="hljs-number">2</span>
            },
            <span class="hljs-comment">// 3. Trim Path ä¿®æ”¹å™¨ â­ï¸</span>
            {
              <span class="hljs-string">"ty"</span>: <span class="hljs-string">"tm"</span>,
              <span class="hljs-string">"nm"</span>: <span class="hljs-string">"Trim Path"</span>,
              <span class="hljs-string">"s"</span>: {  <span class="hljs-comment">// èµ·ç‚¹ç™¾åˆ†æ¯” (0-100)</span>
                <span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-string">"k"</span>: [
                  { <span class="hljs-string">"t"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"s"</span>: [<span class="hljs-number">0</span>], <span class="hljs-string">"e"</span>: [<span class="hljs-number">100</span>] },
                  { <span class="hljs-string">"t"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"s"</span>: [<span class="hljs-number">100</span>] }
                ]
              },
              <span class="hljs-string">"e"</span>: {  <span class="hljs-comment">// ç»ˆç‚¹ç™¾åˆ†æ¯” (0-100)</span>
                <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">"k"</span>: <span class="hljs-number">100</span>
              },
              <span class="hljs-string">"o"</span>: {  <span class="hljs-comment">// åç§»è§’åº¦ (0-360)</span>
                <span class="hljs-string">"a"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">"k"</span>: <span class="hljs-number">0</span>
              }
            },
            <span class="hljs-comment">// 4. ç»„å˜æ¢</span>
            { <span class="hljs-string">"ty"</span>: <span class="hljs-string">"tr"</span> }
          ]
        }
      ]
    }
  ]
}
</code></pre>
<hr/>
<h2 data-id="heading-45"><strong>å…«ã€é«˜çº§ç‰¹æ€§ - è’™ç‰ˆã€æ•ˆæœã€è¡¨è¾¾å¼</strong></h2>
<p>æœ¬ç« å°†ç®€è¦ä»‹ç» Lottie ä¸­å‡ ä¸ªé«˜çº§ä½†å¸¸ç”¨çš„ç‰¹æ€§ã€‚ç†è§£è¿™äº›æ¦‚å¿µæœ‰åŠ©äºæ‚¨é˜…è¯»å’Œåˆ†ææ›´å¤æ‚çš„åŠ¨ç”»æ–‡ä»¶ï¼Œä½†åœ¨å®é™…åˆ›ä½œä¸­ï¼Œè¯·æ³¨æ„å®ƒä»¬åœ¨ä¸åŒå¹³å°å’Œæ¸²æŸ“å™¨ä¸­çš„æ”¯æŒç¨‹åº¦å¯èƒ½æœ‰æ‰€å·®å¼‚ã€‚</p>
<h3 data-id="heading-46"><strong>è’™ç‰ˆï¼ˆMaskï¼‰ï¼š<code>masksProperties</code>Â æ•°ç»„</strong></h3>
<p>è’™ç‰ˆç”¨äºæ§åˆ¶å›¾å±‚çš„æ˜¾ç¤ºåŒºåŸŸï¼Œå®ç°å‰ªåˆ‡ã€é®ç½©ç­‰æ•ˆæœã€‚åœ¨å›¾å±‚å¯¹è±¡ä¸­ï¼Œé€šè¿‡Â <code>masksProperties</code>Â æ•°ç»„å®šä¹‰ã€‚</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"masksProperties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a"</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// è’™ç‰ˆæ¨¡å¼ï¼ša=ç›¸åŠ ï¼Œs=ç›¸å‡ï¼Œi=ç›¸äº¤ç­‰</span>
    <span class="hljs-attr">"pt"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                <span class="hljs-comment">// è·¯å¾„ï¼ˆPathï¼‰ï¼Œå®šä¹‰è’™ç‰ˆå½¢çŠ¶</span>
      <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"v"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">[</span><span class="hljs-number">100</span><span class="hljs-punctuation">,</span><span class="hljs-number">100</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">100</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"c"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"o"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸é€æ˜åº¦ï¼ˆOpacityï¼‰</span>
    <span class="hljs-attr">"inv"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// æ˜¯å¦åè½¬ï¼ˆInvertedï¼‰</span>
    <span class="hljs-attr">"nm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è’™ç‰ˆ1"</span>                <span class="hljs-comment">// åç§°ï¼ˆNameï¼‰</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p><strong>å…³é”®å±æ€§ï¼š</strong></p>
<ul>
<li>
<p><strong><code>mode</code></strong>ï¼šè’™ç‰ˆæ··åˆæ¨¡å¼ã€‚é™¤äº†å¸¸ç”¨çš„Â <code>"a"</code>ï¼ˆAddï¼Œç›¸åŠ ï¼‰å’ŒÂ <code>"s"</code>ï¼ˆSubtractï¼Œç›¸å‡ï¼‰ï¼ŒLottie Schema è¿˜å®šä¹‰äº†å…¶ä»–æ¨¡å¼ï¼Œä½†å¹¶éæ‰€æœ‰éƒ½è¢«å®Œå…¨æ”¯æŒã€‚</p>













































<table><thead><tr><th>æ¨¡å¼ä»£ç </th><th>åç§° (è‹±æ–‡)</th><th>ä½œç”¨æ•ˆæœ</th></tr></thead><tbody><tr><td><code>"n"</code></td><td>None (æ— )</td><td>ç¦ç”¨è’™ç‰ˆ</td></tr><tr><td><code>"a"</code></td><td>Add (ç›¸åŠ )</td><td>åˆå¹¶å¤šä¸ªè’™ç‰ˆåŒºåŸŸ</td></tr><tr><td><code>"s"</code></td><td>Subtract (ç›¸å‡)</td><td>ä»ç°æœ‰åŒºåŸŸä¸­å‡å»</td></tr><tr><td><code>"i"</code></td><td>Intersect (ç›¸äº¤)</td><td>åªä¿ç•™è’™ç‰ˆé‡å åŒºåŸŸ</td></tr><tr><td><code>"l"</code></td><td>Lighten (å˜äº®)</td><td>ä¿ç•™è¾ƒäº®åŒºåŸŸ</td></tr><tr><td><code>"d"</code></td><td>Darken (å˜æš—)</td><td>ä¿ç•™è¾ƒæš—åŒºåŸŸ</td></tr><tr><td><code>"f"</code></td><td>Difference (å·®å¼‚)</td><td>æ˜¾ç¤ºé¢œè‰²å·®å¼‚åŒºåŸŸ</td></tr></tbody></table>
</li>
<li>
<p><strong><code>pt</code></strong>ï¼šè’™ç‰ˆè·¯å¾„ï¼Œå…¶æ•°æ®ç»“æ„ï¼ˆå«Â <code>v</code>,Â <code>i</code>,Â <code>o</code>ï¼‰ä¸å½¢çŠ¶å›¾å±‚ä¸­çš„è‡ªç”±è·¯å¾„ï¼ˆ<code>sh</code>ï¼‰å®Œå…¨ç›¸åŒã€‚</p>
</li>
<li>
<p><strong><code>o</code></strong>ï¼šè’™ç‰ˆçš„ä¸é€æ˜åº¦ã€‚</p>
</li>
<li>
<p><strong><code>inv</code></strong>ï¼šå¸ƒå°”å€¼ï¼Œä¸ºÂ <code>true</code>Â æ—¶åè½¬è’™ç‰ˆåŒºåŸŸã€‚</p>
</li>
</ul>
<h3 data-id="heading-47"><strong>æ•ˆæœï¼ˆEffectsï¼‰ï¼š<code>ef</code>Â æ•°ç»„</strong></h3>
<p>Lottie æ”¯æŒéƒ¨åˆ† After Effects å†…ç½®æ•ˆæœï¼Œé€šè¿‡å›¾å±‚çš„Â <code>ef</code>Â æ•°ç»„å®šä¹‰ã€‚<strong>è¯·æ³¨æ„ï¼Œæ”¯æŒçš„æ•ˆæœéå¸¸æœ‰é™ï¼Œä¸”å¹¶éæ‰€æœ‰AEæ•ˆæœéƒ½èƒ½è¢«å®Œç¾æ”¯æŒæˆ–æ¸²æŸ“ã€‚</strong></p>
<p>æ ¹æ®å®˜æ–¹ Schema æ–‡æ¡£ï¼Œæœ‰æ˜ç¡®å®šä¹‰çš„æ•ˆæœç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¡«å……</strong>Â (Fill):Â <code>ty: 21</code></li>
<li><strong>æè¾¹</strong>Â (Stroke):Â <code>ty: 22</code></li>
<li><strong>è‰²è°ƒ</strong>Â (Tint):Â <code>ty: 20</code></li>
<li><strong>ä¸‰è‰²è°ƒ/ä¸“ä¸šè‰²é˜¶</strong>Â (Tritone/Pro Levels):Â <code>ty: 23</code></li>
</ul>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"ef"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">21</span><span class="hljs-punctuation">,</span>                 <span class="hljs-comment">// æ•ˆæœç±»å‹ï¼š21 = å¡«å…… (Fill)</span>
  <span class="hljs-attr">"nm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢œè‰²å åŠ "</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"en"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                  <span class="hljs-comment">// å¯ç”¨ (Enabled)</span>
  <span class="hljs-attr">"ef"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ty"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-attr">"nm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢œè‰²"</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-attr">"v"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span> <span class="hljs-comment">// çº¢è‰²</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<blockquote>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼šâ€œé«˜æ–¯æ¨¡ç³Š (<code>ty: 29</code>)â€å’Œâ€œå‘å…‰ (<code>ty: 27</code>)â€ç­‰æ•ˆæœåœ¨å…¬å¼€çš„å®˜æ–¹ Schema æ–‡æ¡£ä¸­<strong>æœªæœ‰æ˜ç¡®å®šä¹‰</strong>ã€‚å®ƒä»¬å¯èƒ½ç”± Bodymovin æ’ä»¶å¯¼å‡ºï¼Œä½†<strong>ä¸ä¸€å®šè¢«æ‰€æœ‰ Lottie æ¸²æŸ“å™¨æ”¯æŒ</strong>ï¼Œåœ¨å®é™…ä½¿ç”¨å‰å¿…é¡»è¿›è¡Œå……åˆ†çš„å…¼å®¹æ€§æµ‹è¯•ã€‚</p>
</blockquote>
<h3 data-id="heading-48"><strong>è¡¨è¾¾å¼ï¼ˆExpressionï¼‰ï¼š<code>x</code>Â å­—æ®µ</strong></h3>
<p>è¡¨è¾¾å¼æ˜¯ After Effects ä¸­ç”¨äºåˆ›å»ºå±æ€§é—´åŠ¨æ€å…³è”çš„è„šæœ¬è¯­è¨€ã€‚åœ¨ Lottie ä¸­ï¼Œè¡¨è¾¾å¼å¯ä»¥å­˜å‚¨åœ¨å±æ€§çš„Â <code>x</code>Â å­—æ®µä¸­ã€‚</p>
<p>json</p>
<pre><code class="hljs language-css" lang="css">"<span class="hljs-selector-tag">p</span>": {
  "<span class="hljs-selector-tag">a</span>": <span class="hljs-number">1</span>,
  <span class="hljs-string">"k"</span>: [{"t":<span class="hljs-number">0</span>, <span class="hljs-string">"s"</span>:[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]}, {"t":<span class="hljs-number">30</span>, <span class="hljs-string">"s"</span>:[<span class="hljs-number">100</span>,<span class="hljs-number">100</span>]}],
  "x": <span class="hljs-string">"loopOut('cycle')"</span>  // è¡¨è¾¾å¼ï¼šå¾ªç¯æ’­æ”¾åŠ¨ç”»
}
</code></pre>
<p><strong>è¡¨è¾¾å¼çš„ä½œç”¨ä¸å±€é™æ€§</strong>ï¼š</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå¯ä»¥åˆ›å»ºå¾ªç¯ (<code>loopOut</code>)ã€éšæœº (<code>wiggle</code>)ã€æ•°å­¦å…³è”ç­‰å¤æ‚åŠ¨ç”»é€»è¾‘ï¼Œæ— éœ€å¤§é‡å…³é”®å¸§ã€‚</li>
<li><strong>å±€é™æ€§</strong>ï¼š<strong>å¹³å°æ”¯æŒæä¸å®Œæ•´</strong>ã€‚ä»…æœ‰å°‘æ•°æœ€åŸºç¡€çš„è¡¨è¾¾å¼å¯èƒ½åœ¨éƒ¨åˆ†å¹³å°ä¸Šè¢«è¯†åˆ«ï¼Œå¤æ‚çš„è¡¨è¾¾å¼é€šå¸¸ä¼šè¢«å¿½ç•¥æˆ–å¯¼è‡´åŠ¨ç”»é”™è¯¯ã€‚åœ¨éœ€è¦è·¨å¹³å°ç¨³å®šæ’­æ”¾çš„åŠ¨ç”»ä¸­ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨è¡¨è¾¾å¼ã€‚</li>
</ul>
<h3 data-id="heading-49"><strong>æ··åˆæ¨¡å¼ï¼ˆBlend Modeï¼‰ï¼š<code>bm</code>Â å­—æ®µ</strong></h3>
<p>æ··åˆæ¨¡å¼æ§åˆ¶å½“å‰å›¾å±‚å¦‚ä½•ä¸ä¸‹å±‚å›¾å±‚è¿›è¡Œé¢œè‰²æ··åˆã€‚åœ¨å›¾å±‚ï¼ˆæ ¹å¯¹è±¡ï¼‰æˆ–å½¢çŠ¶æ ·å¼å…ƒç´ ï¼ˆå¦‚Â <code>fl</code>,Â <code>st</code>ï¼‰ä¸­é€šè¿‡Â <code>bm</code>Â å­—æ®µå®šä¹‰ã€‚</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"bm"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span>  <span class="hljs-comment">// å åŠ æ¨¡å¼ (Overlay)</span>
</code></pre>
<p><strong>æ··åˆæ¨¡å¼å€¼é€ŸæŸ¥è¡¨</strong>Â (æ ¹æ®å®˜æ–¹Â <code>/helpers/blendMode.json</code>)ï¼š</p>



























































<table><thead><tr><th>å€¼</th><th>æ¨¡å¼ (è‹±æ–‡)</th><th>å€¼</th><th>æ¨¡å¼ (è‹±æ–‡)</th></tr></thead><tbody><tr><td>0</td><td>Normal (æ­£å¸¸)</td><td>8</td><td>Hard Light (å¼ºå…‰)</td></tr><tr><td>1</td><td>Multiply (ç›¸ä¹˜)</td><td>9</td><td>Soft Light (æŸ”å…‰)</td></tr><tr><td>2</td><td>Screen (å±å¹•)</td><td>10</td><td>Difference (å·®å€¼)</td></tr><tr><td>3</td><td>Overlay (å åŠ )</td><td>11</td><td>Exclusion (æ’é™¤)</td></tr><tr><td>4</td><td>Darken (å˜æš—)</td><td>12</td><td>Hue (è‰²ç›¸)</td></tr><tr><td>5</td><td>Lighten (å˜äº®)</td><td>13</td><td>Saturation (é¥±å’Œåº¦)</td></tr><tr><td>6</td><td>Color Dodge (é¢œè‰²å‡æ·¡)</td><td>14</td><td>Color (é¢œè‰²)</td></tr><tr><td>7</td><td>Color Burn (é¢œè‰²åŠ æ·±)</td><td>15</td><td>Luminosity (æ˜åº¦)</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šæ··åˆæ¨¡å¼åœ¨ SVG/HTML æ¸²æŸ“å™¨ä¸­æ”¯æŒè¾ƒå¥½ï¼Œåœ¨å…¶ä»–æ¸²æŸ“å™¨ï¼ˆå¦‚ Canvasï¼‰æˆ–æŸäº›ç§»åŠ¨ç«¯å¹³å°ä¸­å¯èƒ½éœ€è¦é™çº§å¤„ç†æˆ–ä¸è¢«æ”¯æŒã€‚</p>
<hr/>
<h2 data-id="heading-50"><strong>ä¹ã€ç»“è¯­</strong></h2>
<p>æœ¬æ–‡ç³»ç»Ÿæ€§åœ°è§£æäº† Lottie JSON çš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚ä»¥ä¸‹æ˜¯å…¨æ–‡çŸ¥è¯†è¦ç‚¹çš„å›é¡¾ä¸æ€»ç»“ï¼š</p>
<h3 data-id="heading-51"><strong>æ ¸å¿ƒæ•°æ®ç»“æ„æ€»è§ˆ</strong></h3>































































































<table><thead><tr><th>æ¨¡å—</th><th>å…³é”®å¯¹è±¡/å­—æ®µ</th><th>æ ¸å¿ƒä½œç”¨ä¸è¦ç‚¹</th></tr></thead><tbody><tr><td><strong>é¡¶å±‚ç»“æ„</strong></td><td><code>v</code>,Â <code>fr</code>,Â <code>ip</code>,Â <code>op</code>,Â <code>w</code>,Â <code>h</code></td><td>å®šä¹‰åŠ¨ç”»å…¨å±€ä¿¡æ¯ï¼šç‰ˆæœ¬ã€å¸§ç‡ã€æ—¶é—´è½´ã€ç”»å¸ƒå°ºå¯¸ã€‚</td></tr><tr><td/><td><code>assets</code>,Â <code>layers</code>,Â <code>chars</code></td><td>ä¸‰å¤§æ•°æ®æ”¯æŸ±ï¼šå¯å¤ç”¨èµ„æºã€å›¾å±‚åºåˆ—ã€çŸ¢é‡å­—å½¢ã€‚</td></tr><tr><td><strong>å›¾å±‚ç³»ç»Ÿ</strong></td><td><code>ty</code>Â (0-5)</td><td>æ ‡è¯†å…­ç§å›¾å±‚ç±»å‹ï¼šé¢„åˆæˆã€çº¯è‰²ã€å›¾åƒã€ç©ºå¯¹è±¡ã€å½¢çŠ¶ã€æ–‡æœ¬ã€‚</td></tr><tr><td/><td><code>ind</code>,Â <code>parent</code>,Â <code>ip</code>,Â <code>op</code>,Â <code>st</code></td><td>æ§åˆ¶å›¾å±‚ç´¢å¼•ã€çˆ¶å­å…³ç³»ã€æ—¶é—´å±æ€§ï¼ˆå…¥ç‚¹ã€å‡ºç‚¹ã€èµ·å§‹æ—¶é—´ï¼‰ã€‚</td></tr><tr><td/><td><code>ks</code></td><td><strong>å˜æ¢å±æ€§å®¹å™¨</strong>ï¼ŒåŒ…å«é”šç‚¹(<code>a</code>)ã€ä½ç½®(<code>p</code>)ã€ç¼©æ”¾(<code>s</code>)ã€æ—‹è½¬(<code>r</code>)ã€é€æ˜åº¦(<code>o</code>)ç­‰ã€‚</td></tr><tr><td><strong>åŠ¨ç”»ç³»ç»Ÿ</strong></td><td><code>ks</code>Â ä¸‹çš„Â <code>a</code>Â å­—æ®µ</td><td>å±æ€§åŠ¨ç”»å¼€å…³ï¼š<code>0</code>ä¸ºé™æ€å€¼ï¼Œ<code>1</code>ä¸ºåŠ¨ç”»å€¼ï¼ˆå…³é”®å¸§æ•°ç»„ï¼‰ã€‚</td></tr><tr><td/><td>å…³é”®å¸§Â <code>k</code>Â æ•°ç»„</td><td>å®šä¹‰åŠ¨ç”»è½¨è¿¹ï¼ŒåŒ…å«æ—¶é—´(<code>t</code>)ã€å€¼(<code>s</code>/<code>e</code>)ã€ç¼“åŠ¨(<code>i</code>/<code>o</code>)ã€‚</td></tr><tr><td><strong>å½¢çŠ¶ç³»ç»Ÿ</strong></td><td><code>shapes</code>Â æ•°ç»„</td><td>å½¢çŠ¶å›¾å±‚çš„<strong>æ ¸å¿ƒå®¹å™¨</strong>ï¼Œå…ƒç´ æŒ‰ç´¢å¼•é¡ºåºæ¸²æŸ“å åŠ ã€‚</td></tr><tr><td/><td><code>ty: el/rc/sr/sh</code></td><td>åŸºç¡€å›¾å½¢ï¼šæ¤­åœ†ã€çŸ©å½¢ã€æ˜Ÿå½¢ã€è‡ªç”±è·¯å¾„ï¼ˆè´å¡å°”æ›²çº¿å®šä¹‰ï¼‰ã€‚</td></tr><tr><td/><td><code>ty: gr</code>Â (ç»„)</td><td>ä½¿ç”¨Â <code>it</code>Â æ•°ç»„ç»„ç»‡å­å…ƒç´ ï¼Œå®ç°å±‚çº§ç®¡ç†ä¸ç»Ÿä¸€å˜æ¢ã€‚</td></tr><tr><td><strong>æ ·å¼ç³»ç»Ÿ</strong></td><td><code>ty: fl</code>Â (å¡«å……)</td><td>å®šä¹‰å½¢çŠ¶å¡«å……è‰²ï¼ˆçº¯è‰²æˆ–æ¸å˜ï¼‰ã€‚</td></tr><tr><td/><td><code>ty: st</code>Â (æè¾¹)</td><td>å®šä¹‰è½®å»“çº¿æ ·å¼ï¼ŒåŒ…æ‹¬çº¿å®½(<code>w</code>)ã€ç«¯ç‚¹(<code>lc</code>)ã€è¿æ¥(<code>lj</code>)ã€‚</td></tr><tr><td><strong>ä¿®æ”¹å™¨</strong></td><td><code>ty: tm</code>Â (Trim)</td><td>è·¯å¾„è£å‰ªï¼Œé€šè¿‡åŠ¨ç”»èµ·ç‚¹(<code>s</code>)ã€ç»ˆç‚¹(<code>e</code>)ã€åç§»(<code>o</code>)å®ç°ç»˜åˆ¶æ•ˆæœã€‚</td></tr><tr><td/><td><code>ty: rp</code>Â (Repeater)</td><td>å›¾å½¢é‡å¤å™¨ï¼Œé€šè¿‡å‰¯æœ¬æ•°(<code>c</code>)å’Œå¢é‡å˜æ¢(<code>tr</code>)åˆ›å»ºé˜µåˆ—ã€‚</td></tr><tr><td><strong>é«˜çº§ç‰¹æ€§</strong></td><td><code>masksProperties</code></td><td>è’™ç‰ˆæ•°ç»„ï¼Œé€šè¿‡è·¯å¾„(<code>pt</code>)å’Œæ¨¡å¼(<code>mode</code>)æ§åˆ¶å›¾å±‚æ˜¾ç¤ºåŒºåŸŸã€‚</td></tr><tr><td/><td><code>ef</code>Â (æ•ˆæœ),Â <code>bm</code>Â (æ··åˆæ¨¡å¼)</td><td>å®ç°æ»¤é•œä¸å›¾å±‚æ··åˆï¼Œ<strong>éœ€æ³¨æ„å¹³å°æ”¯æŒåº¦</strong>ã€‚</td></tr><tr><td/><td><code>x</code>Â (è¡¨è¾¾å¼)</td><td>æ”¯æŒç®€å•è¡¨è¾¾å¼é©±åŠ¨å±æ€§ï¼Œ<strong>è·¨å¹³å°æ”¯æŒæœ‰é™</strong>ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-52"><strong>åã€å†™åœ¨æœ€åï¼šç¬”è€…çš„æ€è€ƒ</strong>ğŸ’¡</h2>
<p>åœ¨æ•´ç† Lottie çš„æŠ€æœ¯ç»†èŠ‚æ—¶ï¼Œæˆ‘åå¤æ€è€ƒä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š<strong>æˆ‘ä»¬çœ‹åˆ°çš„è¿™å¥— JSON ç»“æ„ï¼Œåˆ°åº•æ˜¯ç”±ä»€ä¹ˆå†³å®šçš„ï¼Ÿ</strong></p>
<p>æœ€ç›´æ¥çš„ç­”æ¡ˆæ˜¯â€œä¸ºäº†åœ¨ç½‘é¡µä¸Šæ’­æ”¾â€ã€‚ä½†è¿™åªæ˜¯ç›®çš„ï¼Œå¹¶æœªè§£é‡Šå…¶å½¢æ€ã€‚æˆ‘çš„æ€è·¯åˆ†ä¸¤æ­¥æ¨è¿›ï¼šç¬¬ä¸€ï¼Œæ˜¯ Web çš„æ¸²æŸ“èƒ½åŠ›ï¼ˆå¦‚ Canvasï¼‰é™åˆ¶äº†å®ƒçš„è®¾è®¡ï¼›ç¬¬äºŒï¼Œæ˜¯å¦æœ‰æ›´åº•å±‚çš„è“æœ¬åœ¨ä¸»å¯¼ç»“æ„ã€‚</p>
<p>é€šè¿‡é€é¡¹å¯¹æ¯”ï¼Œæˆ‘æ‰¾åˆ°äº†æ›´å…³é”®çš„ä¾æ®ã€‚<strong>Lottie JSON çš„ç»“æ„ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹ After Effects å†…éƒ¨åŠ¨ç”»æ•°æ®æ¨¡å‹çš„ç›´æ¥ç¿»è¯‘ã€‚</strong> Â ä¾‹å¦‚ï¼ŒJSON ä¸­çš„Â <code>ks</code>Â å¯¹è±¡ç²¾ç¡®å¯¹åº”äº† AE å›¾å±‚çš„â€œå˜æ¢â€å±æ€§ç»„ï¼Œ<code>shapes</code>Â æ•°ç»„åˆ™å®Œå…¨å¤ç°äº† AE å½¢çŠ¶å±‚çš„å †å é€»è¾‘ã€‚è®¾è®¡è€…çš„é¦–è¦ä»»åŠ¡ï¼Œæ˜¯ä¸º AE çš„åŠ¨ç”»çŠ¶æ€æä¾›ä¸€ä¸ª<strong>æ— æŸä¸”ç²¾ç¡®çš„æ•°æ®æè¿°æ ¼å¼</strong>ã€‚</p>
<p>é‚£ä¹ˆï¼ŒWeb æŠ€æœ¯ï¼ˆå¦‚ Canvas/SVGï¼‰çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è®¤ä¸ºå®ƒä¸»è¦æ‰®æ¼”äº†Â  <strong>â€œæ”¯æŒåº¦è¯„ä¼°â€ä¸â€œæ€§èƒ½ä¼˜åŒ–â€çš„è§’è‰²</strong>ã€‚å®ƒå¹¶æœªæ”¹å˜æ•°æ®æè¿°çš„æ ¹æœ¬æ–¹å¼ï¼Œè€Œæ˜¯åŸºäºå®ç°éš¾åº¦ä¸æ€§èƒ½æˆæœ¬ï¼Œåˆ’å®šäº†å“ªäº› AE é«˜çº§åŠŸèƒ½å¯ä»¥ï¼ˆæˆ–ä¸å¯ä»¥ï¼‰è¢«åŒ…å«åœ¨è¿™ä¸ªæ ¼å¼ä¸­ã€‚ä¾‹å¦‚ï¼Œä¸€äº›å¤æ‚çš„å®æ—¶æ»¤é•œå¯èƒ½å› æ€§èƒ½è€ƒé‡è€Œè¢«æ’é™¤ã€‚</p>
<p>è¿™è‡ªç„¶å¼•å‘æ›´æ·±ä¸€å±‚ï¼š<strong>AE è‡ªèº«çš„è¿™å¥—å¼ºå¤§æ¨¡å‹åˆæ˜¯å¦‚ä½•å»ºç«‹çš„ï¼Ÿ</strong> Â å®ƒå¹¶éå‡­ç©ºåˆ›é€ ï¼Œè€Œæ˜¯å¯¹æ›´æ—©è¡Œä¸šçš„æ•°å­—åŒ–èåˆã€‚å…¶â€œåˆæˆâ€ä¸â€œå›¾å±‚â€æ¦‚å¿µæºè‡ª<strong>ç”µå½±å·¥ä¸š</strong>çš„èƒ¶ç‰‡å åŠ æµç¨‹ï¼›â€œå…³é”®å¸§â€åŠ¨ç”»ç»§æ‰¿è‡ª<strong>ä¼ ç»Ÿæ‰‹ç»˜åŠ¨ç”»</strong>çš„ç”Ÿäº§æ–¹å¼ï¼›è€Œæ‰€æœ‰è§†è§‰å˜æ¢çš„æ ¹åŸºï¼Œåˆ™æ˜¯<strong>è®¡ç®—æœºå›¾å½¢å­¦</strong>æä¾›çš„æ•°å­¦å·¥å…·ï¼ˆå¦‚åæ ‡å˜æ¢ã€è´å¡å°”æ›²çº¿ï¼‰ã€‚</p>
<p>å› æ­¤ï¼Œå­¦ä¹  Lottie æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå¹¶éå­¤ç«‹è®°å¿† JSON å­—æ®µï¼Œè€Œæ˜¯<strong>ç†è§£å®ƒä½œä¸ºâ€œAE æ¨¡å‹çš„æ•°æ®æ¥å£â€è¿™ä¸€å®šä½</strong>ã€‚æŒæ¡ AE çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå°±èƒ½ç†è§£ Lottie ç»å¤§éƒ¨åˆ†çš„è®¾è®¡é€»è¾‘ã€‚è¿™æ­ç¤ºäº†ä¸€ç§é«˜æ•ˆçš„å­¦ä¹ è·¯å¾„ï¼šå½“é¢å¯¹ä¸€ä¸ªå‡ºè‰²çš„â€œæŠ€æœ¯è½¬è¯‘å±‚â€æ—¶ï¼Œç›´æ¥ç ”ç©¶å®ƒæ‰€è½¬è¯‘çš„<strong>æºç³»ç»Ÿ</strong>ï¼Œå¾€å¾€æ˜¯ç†è§£å…¶è®¾è®¡æœ€å¿«çš„æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android çš„ assets èµ„æºå’Œ raw èµ„æºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594626381433094194</link>    <guid>https://juejin.cn/post/7594626381433094194</guid>    <pubDate>2026-01-13T09:59:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594626381433094194" data-draft-id="7584349458857181210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android çš„ assets èµ„æºå’Œ raw èµ„æºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-13T09:59:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Vic_wkx"/> <meta itemprop="url" content="https://juejin.cn/user/1116759545357182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android çš„ assets èµ„æºå’Œ raw èµ„æºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759545357182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Vic_wkx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T09:59:13.000Z" title="Tue Jan 13 2026 09:59:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    62
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒAndroid é‡Œï¼Œ<code>assets</code> å’Œ <code>res/raw</code> éƒ½å¯ä»¥ç”¨æ¥æ”¾èµ„æºæ–‡ä»¶ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®¾è®¡è¿™ä¸¤ç§æ–¹å¼å‘¢ï¼Ÿ</p>
<p>ç»“è®ºæ˜¯ï¼š</p>
<ul>
<li><strong><code>res/raw</code></strong>ï¼šå— Android èµ„æºç³»ç»Ÿç®¡ç†çš„æ–‡ä»¶ï¼Œæ— ç›®å½•ç»“æ„ï¼Œæœ‰èµ„æº IDã€‚å‚ä¸èµ„æºé€‰æ‹©ï¼ˆè¯­è¨€/å¤œé—´/å±å¹•å¯†åº¦ï¼‰ï¼›å¿…é¡»å°å†™ã€æ— ç‚¹å·ã€æ— ç‰¹æ®Šå­—ç¬¦ã€‚</li>
<li><strong><code>assets</code></strong>ï¼šæ‰“åŒ…è¿› APK çš„åŸå§‹æ–‡ä»¶ç³»ç»Ÿï¼Œåƒè¯»æ™®é€šæ–‡ä»¶ä¸€æ ·ï¼Œé€‚åˆéœ€è¦ç›®å½•ç»“æ„ / åŠ¨æ€è¯»å– / æ–‡ä»¶è¾ƒå¤šæˆ–åç§°ä¸è§„åˆ™çš„åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-0">ä¸€ã€ä¸åŒç‚¹</h2>
<h3 data-id="heading-1">1.1. ç‰¹æ€§å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>raw</th><th>assets</th></tr></thead><tbody><tr><td>æ˜¯å¦ç”Ÿæˆ R.id</td><td>âœ…</td><td>âŒ</td></tr><tr><td>æ˜¯å¦å‚ä¸èµ„æºé€‰æ‹©ï¼ˆè¯­è¨€/å¤œé—´/å±å¹•å¯†åº¦ï¼‰</td><td>âœ…</td><td>âŒ</td></tr><tr><td>ç¼–è¯‘æœŸæ ¡éªŒ</td><td>âœ…</td><td>âŒ</td></tr><tr><td>æ˜¯å¦å¿…é¡»å°å†™ã€æ— ç‚¹å·ã€æ— ç‰¹æ®Šå­—ç¬¦</td><td>âœ…</td><td>âŒ</td></tr><tr><td>æ˜¯å¦å¯ä»¥éå†ç›®å½•</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>
<p>raw çš„å‘½åæ¯”è¾ƒä¸¥æ ¼ï¼Œæˆ‘ä¹‹å‰è§‰å¾—è¿™æ˜¯ä¸€ä¸ªç¼ºé™·ï¼ŒAI è€å¸ˆè¯´æ˜¯æ˜¯ä¸ºäº†è®©èµ„æºåæˆä¸ºä¸€ç§è·¨è¯­è¨€ã€è·¨å·¥å…·ã€è·¨å¹³å°éƒ½ç¨³å®šçš„ç¬¦å·ã€‚</p>
<p>æ¯”å¦‚è¦åŒæ—¶æ”¯æŒè¿è¡Œåœ¨å¤§å°å†™æ•æ„Ÿ/ä¸æ•æ„Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆå°±è¦è®©èµ„æºåèˆå¼ƒå¤§å†™å­—æ¯ï¼›<code>.</code> å·åœ¨å¼•ç”¨èµ„æºæ—¶å·²ç»ç”¨æ‰äº†ä¹‹ç±»çš„åŸå› ã€‚</p>
<p>raw è¦ç”Ÿæˆèµ„æº idï¼Œåœ¨ <strong>Java / Kotlin / C++</strong> ç­‰è¯­è¨€ä¸­å¼•ç”¨ï¼Œä½¿ç”¨æœ‰è¿™äº›é™åˆ¶ã€‚</p>
<p>assets æ²¡æœ‰è¿™äº›é™åˆ¶ï¼Œå› ä¸º APK å®‰è£…åï¼Œassets æ–‡ä»¶åœ¨ APK å†…éƒ¨å°±æ˜¯ä¸€ä¸ª ZIP entryï¼Œå®ƒæ˜¯ <strong>ä¸¥æ ¼å¤§å°å†™æ•æ„Ÿ</strong>ï¼ŒAndroid åœ¨è®¿é—®æ—¶ç›´æ¥ä» ZIP è¯»å–ï¼Œä¸èµ°å®¿ä¸»æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">1.2. æ”¾ç½®ä½ç½®ï¼š</h3>
<p>raw æ”¾åœ¨è¿™é‡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">app/
 â””â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/
    â””â”€ res/
       â””â”€ raw/
          â””â”€ config<span class="hljs-selector-class">.txt</span>
</code></pre>
<p>assets æ”¾åœ¨è¿™é‡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">app/
 â””â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/
    â””â”€ assets/
       â””â”€ configs/
          â””â”€ config<span class="hljs-selector-class">.txt</span>
</code></pre>
<h3 data-id="heading-3">1.3. ä½¿ç”¨åœºæ™¯</h3>
<blockquote>
<p>æˆ‘ä¹‹å‰æœ‰ä¸€ä¸ªè¯¯è§£ï¼Œapk å®‰è£…åï¼Œèµ„æºæ–‡ä»¶ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸‹ï¼Œæˆ‘è¯¯ä»¥ä¸ºå¯ä»¥åœ¨ apk å®‰è£…åï¼Œä»æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶ï¼Œä¹Ÿæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œå†é€šè¿‡ assets æˆ–è€… raw æ¥è¯»å–ã€‚æˆ‘ä»¥ä¸º assets æˆ–è€… raw èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚
å®é™…ä¸Šæ˜¯ä¸è¡Œçš„ï¼ŒAPK æ˜¯ä¸€ä¸ª <strong>ç­¾åè¿‡çš„ ZIP æ–‡ä»¶</strong>ï¼Œä»»ä½•ä¿®æ”¹éƒ½ä¼šç ´åç­¾åã€‚</p>
<p>è¿™ç§ case é€šå¸¸çš„åšæ³•æ˜¯ï¼Œä» assets æ‹·è´åˆ° filesDir æ–‡ä»¶å¤¹ï¼Œç„¶åæœåŠ¡å™¨ä¹Ÿä¸‹è½½åˆ°è¿™ä¸ª filesDir æ–‡ä»¶å¤¹ã€‚è€Œä¸æ˜¯ç›´æ¥ä¸‹åˆ° assets æˆ–è€… raw ä¸­ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨ assets çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SDK å¯åŠ¨æ—¶ï¼ŒæŠŠ assets é‡Œçš„æœ¬åœ°æ•°æ®æ‹·è´åˆ° filesDir</span>
<span class="hljs-built_in">copyAssetsToFilesDir</span>()
<span class="hljs-comment">// ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œæ£€æŸ¥è¿™äº›èµ„æºæ˜¯å¦éœ€è¦æ›´æ–°</span>
<span class="hljs-built_in">updateFromServerIfNeeded</span>()
</code></pre>
<p>è¿™å°±æ˜¯ <strong>å›ºå®šèµ„æº + å¯æ›´æ–°æ•°æ®</strong> çš„ç»„åˆï¼Œè€Œ raw åšä¸åˆ°ç›®å½•ã€éå†ã€åŠ¨æ€æ‹·è´ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨ raw çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">res/raw/config.txt
res/raw-night/config.txt
res/raw-zh/config.txt
res/raw-zh-rCN/config.txt
...
</code></pre>
<p>Android ä¼šè‡ªåŠ¨å¸®ä½ é€‰ï¼š</p>
<ul>
<li>night / notnight</li>
<li>zh / en</li>
<li>region</li>
<li>smallestWidth</li>
<li>density</li>
<li>...</li>
</ul>
<p><strong>assets å®Œå…¨æ²¡æœ‰è¿™ä¸ªèƒ½åŠ›</strong></p>
<h3 data-id="heading-4">1.4. è¯»å–æ–¹å¼</h3>
<p>è¯»å– raw çš„æ–¹å¼æ˜¯æŒ‰ ID å–èµ„æºï¼Œä»¥æ–‡ä»¶ <code>res/raw/config.txt</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">inputStream</span> = resources.openRawResource(R.raw.config)
val <span class="hljs-attr">text</span> = inputStream.bufferedReader().use { it.readText() }
</code></pre>
<p>è¯»å– assets çš„æ–¹å¼æ˜¯æŒ‰è·¯å¾„è¯»æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">inputStream</span> = assets.open(<span class="hljs-string">"configs/config.txt"</span>)
val <span class="hljs-attr">text</span> = inputStream.bufferedReader().use { it.readText() }
</code></pre>
<h2 data-id="heading-5">äºŒã€ç›¸åŒç‚¹</h2>
<ul>
<li>ä¸¤è€…åœ¨ apk ä¸­éƒ½ä»¥åŸå§‹èµ„æºæ–‡ä»¶çš„æ–¹å¼å­˜åœ¨</li>
<li>ä¸¤è€…æœ¬è´¨éƒ½æ˜¯ä» APK ä¸­è¯»å– InputStream</li>
<li>æ€§èƒ½å·®å¼‚åŸºæœ¬å¯ä»¥å¿½ç•¥</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€å¦‚ä½•é€‰æ‹©</h2>
<p>ç®€å•æ¥è¯´ï¼š</p>
<ul>
<li>å¦‚æœä½ æŠŠå®ƒå½“æˆâ€˜èµ„æºâ€™ï¼ˆéœ€è¦å‚ä¸è¯­è¨€/å¤œé—´ç­‰é€‰æ‹©ã€ç”Ÿæˆ R.idï¼‰ï¼Œç”¨ raw</li>
<li>å¦‚æœæŠŠå®ƒå½“æˆâ€˜æ–‡ä»¶â€™ï¼ˆç›®å½•ç»“æ„ã€åŠ¨æ€è®¿é—®ã€å¯æ›´æ–°ï¼‰ï¼Œç”¨ assetsã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactä»å…¥é—¨åˆ°å‡ºé—¨ç¬¬å…­ç«  äº‹ä»¶ä»£ç†æœºåˆ¶ä¸åŸç”Ÿäº‹ä»¶ååŒ]]></title>    <link>https://juejin.cn/post/7594322573452984363</link>    <guid>https://juejin.cn/post/7594322573452984363</guid>    <pubDate>2026-01-13T01:14:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573452984363" data-draft-id="7589940210832261163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactä»å…¥é—¨åˆ°å‡ºé—¨ç¬¬å…­ç«   äº‹ä»¶ä»£ç†æœºåˆ¶ä¸åŸç”Ÿäº‹ä»¶ååŒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2026-01-13T01:14:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactä»å…¥é—¨åˆ°å‡ºé—¨ç¬¬å…­ç«   äº‹ä»¶ä»£ç†æœºåˆ¶ä¸åŸç”Ÿäº‹ä»¶ååŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:14:15.000Z" title="Tue Jan 13 2026 01:14:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a37377a1b1654b5fb359bed851213933~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCV5rWq54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871655&amp;x-signature=B10uyEKh1Z2yZq%2Bx8zDLuPaGOuk%3D" alt="G9oIeDzXQAIwgJc.jpeg" loading="lazy"/>
å¤§å®¶å¥½ï½ å‰é¢æˆ‘ä»¬é™†ç»­æŒæ¡äº† React 19 çš„ç»„ä»¶ã€è·¯ç”±ã€çŠ¶æ€ç®¡ç†ç­‰æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œä»Šå¤©å’±ä»¬èšç„¦ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥ä½†è‡³å…³é‡è¦çš„åº•å±‚æ¨¡å—â€”â€”<strong>äº‹ä»¶ç³»ç»Ÿ</strong>ã€‚</p>
<p>ç”¨è¿‡ React çš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å†™çš„äº‹ä»¶ï¼ˆå¦‚ onClickã€onChangeï¼‰å’ŒåŸç”Ÿ DOM äº‹ä»¶çœ‹ä¼¼ç›¸ä¼¼ï¼Œå´åˆå­˜åœ¨å·®å¼‚ï¼šæ¯”å¦‚ React äº‹ä»¶çš„ this æŒ‡å‘é»˜è®¤ç»‘å®šç»„ä»¶å®ä¾‹ã€äº‹ä»¶å¯¹è±¡æ˜¯åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€äº‹ä»¶å¤„ç†å‡½æ•°é»˜è®¤ä¸ä¼šå†’æ³¡åˆ°åŸç”Ÿ DOM å±‚é¢ã€‚è¿™äº›å·®å¼‚çš„èƒŒåï¼Œéƒ½æºäº React å¯¹åŸç”Ÿäº‹ä»¶çš„å°è£…ä¸ä¼˜åŒ–â€”â€”æ ¸å¿ƒå°±æ˜¯<strong>äº‹ä»¶ä»£ç†æœºåˆ¶</strong>ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨å®é™…å¼€å‘ä¸­ä¼šé‡åˆ°â€œReact äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶å†²çªâ€â€œäº‹ä»¶å†’æ³¡ä¸ç¬¦åˆé¢„æœŸâ€ç­‰é—®é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯æ²¡ç†æ¸… React äº‹ä»¶ç³»ç»Ÿä¸åŸç”Ÿäº‹ä»¶çš„å…³ç³»ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±ä»â€œæ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆ-æ€ä¹ˆåšâ€ä¸‰ä¸ªå±‚é¢ï¼Œæ‹†è§£ React 19 äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†ï¼Œé‡ç‚¹è¯´æ¸… React UI äº‹ä»¶ä¸åŸç”Ÿ window äº‹ä»¶çš„å…³è”ï¼Œç»“åˆä»£ç ç¤ºä¾‹å’Œæµç¨‹å›¾ï¼Œè®©ä½ æ—¢èƒ½ç†è§£åº•å±‚é€»è¾‘ï¼Œä¹Ÿèƒ½è§£å†³å®é™…å¼€å‘ä¸­çš„é—®é¢˜ï½</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆæŠ›é—®é¢˜ï¼šReact äº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶æœ‰å•¥ä¸ä¸€æ ·ï¼Ÿ</h2>
<p>åœ¨æ‹†è§£åŸç†å‰ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å•æ¡ˆä¾‹ï¼Œç›´è§‚æ„Ÿå— React äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶çš„å·®å¼‚ã€‚å…ˆçœ‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">EventDemo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> btnRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// React äº‹ä»¶ï¼šonClick</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
  };

  <span class="hljs-comment">// åŸç”Ÿäº‹ä»¶ï¼šaddEventListener</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> btn = btnRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNativeClick</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘'</span>);
    };
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      btn.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
    };
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{btnRef}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleReactClick}</span>&gt;</span>
      ç‚¹å‡»æµ‹è¯•
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç‚¹å‡»æŒ‰é’®åï¼Œæ§åˆ¶å°è¾“å‡ºé¡ºåºæ˜¯ï¼š<code>åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘</code> â†’ <code>React äº‹ä»¶ï¼šonClick è§¦å‘</code>ã€‚è¿™ä¸ªé¡ºåºæ˜¯ä¸æ˜¯å’Œä½ é¢„æœŸçš„ä¸ä¸€æ ·ï¼Ÿ</p>
<p>å†æŠŠæ¡ˆä¾‹æ”¹ä¸€ä¸‹ï¼Œç»™æŒ‰é’®çš„çˆ¶å…ƒç´ ä¹Ÿæ·»åŠ äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">EventDemo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> btnRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> parentRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// çˆ¶å…ƒç´  React äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleParentReactClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çˆ¶å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
  };

  <span class="hljs-comment">// å­å…ƒç´  React äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
  };

  <span class="hljs-comment">// çˆ¶å…ƒç´ åŸç”Ÿäº‹ä»¶</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> parent = parentRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleParentNativeClick</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çˆ¶å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘'</span>);
    };
    parent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleParentNativeClick);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      parent.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleParentNativeClick);
    };
  }, []);

  <span class="hljs-comment">// å­å…ƒç´ åŸç”Ÿäº‹ä»¶</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> btn = btnRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNativeClick</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘'</span>);
    };
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      btn.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
    };
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{parentRef}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleParentReactClick}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{btnRef}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleReactClick}</span>&gt;</span>
        ç‚¹å‡»æµ‹è¯•
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç‚¹å‡»æŒ‰é’®åï¼Œæ§åˆ¶å°è¾“å‡ºé¡ºåºæ˜¯ï¼š</p>
<ol>
<li>å­å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘ï¼ˆåŸç”Ÿå†’æ³¡é˜¶æ®µå…ˆè§¦å‘å­å…ƒç´ ï¼‰</li>
<li>çˆ¶å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘ï¼ˆåŸç”Ÿå†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­ï¼‰</li>
<li>å­å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘</li>
<li>çˆ¶å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘</li>
</ol>
<p>è¿™ä¸ªç»“æœæ›´è®©äººå›°æƒ‘äº†ï¼šä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„å†’æ³¡é¡ºåºå’Œ React äº‹ä»¶çš„å†’æ³¡é¡ºåºå®Œå…¨ç›¸åï¼Ÿä¸ºä»€ä¹ˆ React äº‹ä»¶æ€»æ˜¯åœ¨åŸç”Ÿäº‹ä»¶ä¹‹åè§¦å‘ï¼Ÿè¦è§£ç­”è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ‡‚ React äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒâ€”â€”<strong>äº‹ä»¶ä»£ç†æœºåˆ¶</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŸç† 1ï¼šReact äº‹ä»¶ä»£ç†æœºåˆ¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰</h2>
<p>React äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒä¼˜åŒ–ç‚¹å°±æ˜¯â€œäº‹ä»¶ä»£ç†â€ï¼ˆä¹Ÿå«äº‹ä»¶å§”æ‰˜ï¼‰ã€‚åœ¨åŸç”Ÿ DOM ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç»™æ¯ä¸ªå…ƒç´ å•ç‹¬ç»‘å®šäº‹ä»¶ï¼›è€Œ React åˆ™æ˜¯å°†<strong>æ‰€æœ‰ UI äº‹ä»¶ï¼ˆå¦‚ onClickã€onChangeã€onMouseMove ç­‰ï¼‰éƒ½å§”æ‰˜ç»™äº†æœ€é¡¶å±‚çš„ document èŠ‚ç‚¹</strong>ï¼ˆReact 17 åŠä¹‹åç‰ˆæœ¬æ”¹ä¸ºå§”æ‰˜ç»™ root èŠ‚ç‚¹ï¼Œå³ React æŒ‚è½½çš„æ ¹å®¹å™¨ï¼Œå¦‚ #rootï¼ŒReact 19 å»¶ç»­è¿™ä¸€è®¾è®¡ï¼‰ã€‚</p>
<h3 data-id="heading-2">1. äº‹ä»¶ä»£ç†çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>ç®€å•æ¥è¯´ï¼ŒReact äº‹ä»¶ä»£ç†çš„æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>React ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå¹¶ä¸ä¼šç»™å¯¹åº”çš„ DOM å…ƒç´ ç›´æ¥ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œæ˜¯å°†äº‹ä»¶ç±»å‹ï¼ˆå¦‚ clickï¼‰ã€äº‹ä»¶å¤„ç†å‡½æ•°ã€ç»„ä»¶ä¿¡æ¯ç­‰å­˜å…¥ä¸€ä¸ªâ€œäº‹ä»¶æ³¨å†Œè¡¨â€ï¼›</li>
<li>åœ¨ React æŒ‚è½½çš„æ ¹å®¹å™¨ï¼ˆå¦‚ #rootï¼‰ä¸Šï¼Œç»Ÿä¸€ç»‘å®šåŸç”Ÿäº‹ä»¶ï¼ˆå¦‚ addEventListener('click', ç»Ÿä¸€å¤„ç†å‡½æ•°)ï¼‰ï¼›</li>
<li>å½“ç”¨æˆ·ç‚¹å‡»å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šä»ç›®æ ‡å…ƒç´ åŸç”Ÿå†’æ³¡åˆ°æ ¹å®¹å™¨ï¼›</li>
<li>æ ¹å®¹å™¨çš„ç»Ÿä¸€å¤„ç†å‡½æ•°æ•è·åˆ°äº‹ä»¶åï¼Œä¼šæ ¹æ®äº‹ä»¶ç›®æ ‡ï¼ˆtargetï¼‰ä»â€œäº‹ä»¶æ³¨å†Œè¡¨â€ä¸­æ‰¾åˆ°å¯¹åº”çš„ React äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åæ‰§è¡Œã€‚</li>
</ol>
<h3 data-id="heading-3">2. ç”¨å›¾ä¾‹æ¢³ç†äº‹ä»¶ä»£ç†æµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/885c87f09c314b15b3168b4929375f50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCV5rWq54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871655&amp;x-signature=cvzACer1lZ6fESPPLfNlr%2B2OMqA%3D" alt="dispatch-event.46e8e5ef.png" loading="lazy"/></p>
<h3 data-id="heading-4">3. ç®€åŒ–ä»£ç æ¨¡æ‹Ÿ React äº‹ä»¶ä»£ç†</h3>
<p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚ç†è§£ï¼Œæˆ‘ä»¬ç”¨åŸç”Ÿ JS æ¨¡æ‹Ÿ React äº‹ä»¶ä»£ç†çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. äº‹ä»¶æ³¨å†Œè¡¨ï¼šå­˜å‚¨ React ç»„ä»¶çš„äº‹ä»¶ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> eventRegistry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// 2. React æ ¹å®¹å™¨ï¼ˆæ¨¡æ‹Ÿ #rootï¼‰</span>
<span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>);

<span class="hljs-comment">// 3. ç»Ÿä¸€äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆæ ¹å®¹å™¨ç»‘å®šçš„åŸç”Ÿäº‹ä»¶å¤„ç†å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRootEvent</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-comment">// e.target æ˜¯äº‹ä»¶çš„å®é™…ç›®æ ‡ï¼ˆå¦‚æŒ‰é’®ï¼‰</span>
  <span class="hljs-keyword">const</span> target = e.<span class="hljs-property">target</span>;

  <span class="hljs-comment">// ä»äº‹ä»¶æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾å½“å‰ç›®æ ‡åŠç¥–å…ˆå…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°</span>
  <span class="hljs-keyword">let</span> current = target;
  <span class="hljs-keyword">const</span> handlers = [];

  <span class="hljs-keyword">while</span> (current &amp;&amp; current !== root) {
    <span class="hljs-comment">// æŸ¥æ‰¾å½“å‰å…ƒç´ å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆè¿™é‡Œç®€åŒ–ä¸º click äº‹ä»¶ï¼‰</span>
    <span class="hljs-keyword">const</span> eventKey = <span class="hljs-string">`<span class="hljs-subst">${current.dataset.reactId}</span>-click`</span>;
    <span class="hljs-keyword">if</span> (eventRegistry.<span class="hljs-title function_">has</span>(eventKey)) {
      handlers.<span class="hljs-title function_">push</span>(eventRegistry.<span class="hljs-title function_">get</span>(eventKey));
    }
    <span class="hljs-comment">// å‘ä¸Šéå†ç¥–å…ˆå…ƒç´ ï¼ˆæ¨¡æ‹Ÿå†’æ³¡ï¼‰</span>
    current = current.<span class="hljs-property">parentNode</span>;
  }

  <span class="hljs-comment">// æ‰§è¡Œæ‰¾åˆ°çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆé¡ºåºï¼šå­å…ƒç´  â†’ çˆ¶å…ƒç´ ï¼Œæ¨¡æ‹Ÿ React äº‹ä»¶å†’æ³¡ï¼‰</span>
  handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">handler</span> =&gt;</span> <span class="hljs-title function_">handler</span>(e));
}

<span class="hljs-comment">// 4. ç»™æ ¹å®¹å™¨ç»‘å®šåŸç”Ÿäº‹ä»¶ï¼ˆæ¨¡æ‹Ÿ React åˆå§‹åŒ–æ—¶çš„ç»‘å®šï¼‰</span>
root.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleRootEvent);

<span class="hljs-comment">// 5. æ¨¡æ‹Ÿ React ç»„ä»¶ç»‘å®šäº‹ä»¶ï¼ˆå°†äº‹ä»¶å­˜å…¥æ³¨å†Œè¡¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">bindReactEvent</span>(<span class="hljs-params">reactId, element, eventType, handler</span>) {
  element.<span class="hljs-property">dataset</span>.<span class="hljs-property">reactId</span> = reactId; <span class="hljs-comment">// ç»™å…ƒç´ æ ‡è®° React ID</span>
  <span class="hljs-keyword">const</span> eventKey = <span class="hljs-string">`<span class="hljs-subst">${reactId}</span>-<span class="hljs-subst">${eventType}</span>`</span>;
  eventRegistry.<span class="hljs-title function_">set</span>(eventKey, handler);
}

<span class="hljs-comment">// 6. æµ‹è¯•ï¼šåˆ›å»ºç»„ä»¶å…ƒç´ å¹¶ç»‘å®š React äº‹ä»¶</span>
<span class="hljs-keyword">const</span> parentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
parentDiv.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span> = <span class="hljs-string">'20px'</span>;
parentDiv.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">'1px solid #ccc'</span>;

<span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'button'</span>);
btn.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ç‚¹å‡»æµ‹è¯•'</span>;
parentDiv.<span class="hljs-title function_">appendChild</span>(btn);
root.<span class="hljs-title function_">appendChild</span>(parentDiv);

<span class="hljs-comment">// ç»™çˆ¶å…ƒç´ ç»‘å®š React ç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-title function_">bindReactEvent</span>(<span class="hljs-string">'parent-1'</span>, parentDiv, <span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çˆ¶å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
});

<span class="hljs-comment">// ç»™å­å…ƒç´ ç»‘å®š React ç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-title function_">bindReactEvent</span>(<span class="hljs-string">'btn-1'</span>, btn, <span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´  React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
});

<span class="hljs-comment">// ç»™å­å…ƒç´ ç»‘å®šåŸç”Ÿç‚¹å‡»äº‹ä»¶</span>
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘'</span>);
});

<span class="hljs-comment">// ç»™çˆ¶å…ƒç´ ç»‘å®šåŸç”Ÿç‚¹å‡»äº‹ä»¶</span>
parentDiv.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çˆ¶å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šaddEventListener è§¦å‘'</span>);
});
</code></pre>
<p>è¿è¡Œè¿™æ®µä»£ç åï¼Œç‚¹å‡»æŒ‰é’®çš„è¾“å‡ºé¡ºåºå’Œæˆ‘ä»¬ä¹‹å‰çš„ React æ¡ˆä¾‹å®Œå…¨ä¸€è‡´ï¼è¿™å°±éªŒè¯äº† React äº‹ä»¶ä»£ç†çš„æ ¸å¿ƒé€»è¾‘ï¼š<strong>React äº‹ä»¶æ˜¯é€šè¿‡æ ¹å®¹å™¨çš„åŸç”Ÿäº‹ä»¶ç»Ÿä¸€æ•è·ï¼Œå†é€šè¿‡äº‹ä»¶æ³¨å†Œè¡¨æŸ¥æ‰¾å¹¶æ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå…¶â€œå†’æ³¡â€æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œè€ŒéåŸç”Ÿ DOM å†’æ³¡</strong>ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒåŸç† 2ï¼šReact UI äº‹ä»¶ä¸åŸç”Ÿ window äº‹ä»¶çš„å…³ç³»</h2>
<p>ç†è§£äº†äº‹ä»¶ä»£ç†æœºåˆ¶åï¼Œæˆ‘ä»¬å°±èƒ½æ¸…æ™°å˜æ¸… React UI äº‹ä»¶ä¸åŸç”Ÿ window äº‹ä»¶çš„å…³ç³»äº†ã€‚é¦–å…ˆè¦æ˜ç¡®ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>React UI äº‹ä»¶</strong>ï¼šå°±æ˜¯æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å†™çš„ onClickã€onChange ç­‰äº‹ä»¶ï¼Œæ˜¯ React å°è£…åçš„â€œåˆæˆäº‹ä»¶â€ï¼Œä¾èµ–äº‹ä»¶ä»£ç†æœºåˆ¶æ‰§è¡Œï¼›</li>
<li><strong>åŸç”Ÿ window äº‹ä»¶</strong>ï¼šå°±æ˜¯é€šè¿‡ window.addEventListener ç»‘å®šçš„äº‹ä»¶ï¼ˆå¦‚ resizeã€scrollã€click ç­‰ï¼‰ï¼Œæ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„äº‹ä»¶ï¼Œéµå¾ªåŸç”Ÿ DOM äº‹ä»¶æµï¼ˆæ•è·â†’ç›®æ ‡â†’å†’æ³¡ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">1. ä¸¤è€…çš„æ ¸å¿ƒå…³è”ï¼šäº‹ä»¶æµçš„å…ˆåé¡ºåº</h3>
<p>React UI äº‹ä»¶çš„æ‰§è¡Œä¾èµ–äºæ ¹å®¹å™¨çš„åŸç”Ÿäº‹ä»¶æ•è·ï¼Œè€Œæ ¹å®¹å™¨æ˜¯ window ä¸‹çš„ä¸€ä¸ª DOM èŠ‚ç‚¹ã€‚å› æ­¤ï¼ŒReact UI äº‹ä»¶çš„æ‰§è¡Œé¡ºåºï¼Œå¿…ç„¶å¤„äºåŸç”Ÿäº‹ä»¶æµçš„â€œå†’æ³¡é˜¶æ®µâ€ï¼ˆå› ä¸ºäº‹ä»¶è¦å…ˆå†’æ³¡åˆ°æ ¹å®¹å™¨ï¼Œæ‰èƒ½è¢« React çš„ç»Ÿä¸€å¤„ç†å‡½æ•°æ•è·ï¼‰ã€‚</p>
<p>æˆ‘ä»¬ç”¨â€œåŸç”Ÿäº‹ä»¶æµ+React äº‹ä»¶æµâ€çš„ç»„åˆæµç¨‹å›¾ï¼Œæ¢³ç†ä¸¤è€…çš„å…ˆåå…³ç³»ï¼š</p>
<h3 data-id="heading-7">2. ä»£ç éªŒè¯ï¼šReact äº‹ä»¶ä¸ window äº‹ä»¶çš„é¡ºåº</h3>
<p>æˆ‘ä»¬ç”¨ä»£ç éªŒè¯ä¸Šè¿°æµç¨‹ï¼Œç»™ window ç»‘å®šæ•è·å’Œå†’æ³¡é˜¶æ®µçš„ click äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">EventWithWindowDemo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> btnRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// React äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'React äº‹ä»¶ï¼šonClick è§¦å‘'</span>);
  };

  <span class="hljs-comment">// åŸç”Ÿäº‹ä»¶ï¼ˆç›®æ ‡å…ƒç´ ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> btn = btnRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBtnNative</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ è§¦å‘'</span>);
    };
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleBtnNative);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> btn.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleBtnNative);
  }, []);

  <span class="hljs-comment">// window åŸç”Ÿäº‹ä»¶ï¼ˆæ•è·é˜¶æ®µï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWindowCapture</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'window åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ è§¦å‘'</span>);
    };
    <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º trueï¼Œè¡¨ç¤ºåœ¨æ•è·é˜¶æ®µæ‰§è¡Œ</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleWindowCapture, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleWindowCapture, <span class="hljs-literal">true</span>);
  }, []);

  <span class="hljs-comment">// window åŸç”Ÿäº‹ä»¶ï¼ˆå†’æ³¡é˜¶æ®µï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWindowBubble</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'window åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ è§¦å‘'</span>);
    };
    <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªå‚æ•°çœç•¥æˆ–ä¸º falseï¼Œè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œ</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleWindowBubble);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleWindowBubble);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{btnRef}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleReactClick}</span>&gt;</span>
      ç‚¹å‡»æµ‹è¯•ï¼ˆå« window äº‹ä»¶ï¼‰
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç‚¹å‡»æŒ‰é’®åï¼Œæ§åˆ¶å°è¾“å‡ºé¡ºåºå¦‚ä¸‹ï¼Œå®Œå…¨ç¬¦åˆæˆ‘ä»¬æ¢³ç†çš„æµç¨‹ï¼š</p>
<ol>
<li>window åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ è§¦å‘ï¼ˆåŸç”Ÿæ•è·é˜¶æ®µä» window å¼€å§‹ï¼‰</li>
<li>ç›®æ ‡å…ƒç´ åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ è§¦å‘ï¼ˆåŸç”Ÿç›®æ ‡é˜¶æ®µï¼‰</li>
<li>React äº‹ä»¶ï¼šonClick è§¦å‘ï¼ˆäº‹ä»¶å†’æ³¡åˆ°æ ¹å®¹å™¨ï¼Œè¢« React æ•è·æ‰§è¡Œï¼‰</li>
<li>window åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ è§¦å‘ï¼ˆäº‹ä»¶æœ€ç»ˆå†’æ³¡åˆ° windowï¼‰</li>
</ol>
<h3 data-id="heading-8">3. å…³é”®ç»“è®ºï¼šReact äº‹ä»¶æ˜¯åŸç”Ÿäº‹ä»¶çš„â€œå­é›†â€ä¸â€œå»¶è¿Ÿæ‰§è¡Œâ€</h3>
<p>ä»ä¸Šè¿°æµç¨‹å’Œä»£ç å¯ä»¥å¾—å‡ºæ ¸å¿ƒç»“è®ºï¼š</p>
<ul>
<li>React äº‹ä»¶å¹¶éè„±ç¦»åŸç”Ÿäº‹ä»¶å­˜åœ¨ï¼Œè€Œæ˜¯<strong>åŸºäºåŸç”Ÿäº‹ä»¶å®ç°çš„å°è£…</strong>â€”â€”React UI äº‹ä»¶çš„æ‰§è¡Œï¼Œä¾èµ–äºåŸç”Ÿäº‹ä»¶å†’æ³¡åˆ°æ ¹å®¹å™¨çš„è¿‡ç¨‹ï¼›</li>
<li>React äº‹ä»¶çš„æ‰§è¡Œæ—¶æœº<strong>æ™šäºç›®æ ‡å…ƒç´ åŠç¥–å…ˆå…ƒç´ çš„åŸç”Ÿäº‹ä»¶</strong>ï¼ˆå› ä¸ºè¦ç­‰äº‹ä»¶å†’æ³¡åˆ°æ ¹å®¹å™¨ï¼‰ï¼Œä½†<strong>æ—©äº window ä¸Šçš„åŸç”Ÿå†’æ³¡äº‹ä»¶</strong>ï¼›</li>
<li>window ä¸Šçš„åŸç”Ÿæ•è·äº‹ä»¶ï¼Œä¼šåœ¨æ•´ä¸ªäº‹ä»¶æµçš„æœ€å¼€å§‹æ‰§è¡Œï¼Œç”šè‡³æ—©äºç›®æ ‡å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ã€‚</li>
</ul>
<h2 data-id="heading-9">å››ã€æ ¸å¿ƒåŸç† 3ï¼šåˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ä¸åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„å…³ç³»</h2>
<p>é™¤äº†æ‰§è¡Œé¡ºåºï¼ŒReact äº‹ä»¶å¯¹è±¡ï¼ˆSyntheticEventï¼‰ä¸åŸç”Ÿäº‹ä»¶å¯¹è±¡ä¹Ÿå­˜åœ¨å·®å¼‚ã€‚åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„ event ä¸æ˜¯åŸç”Ÿçš„ Event å¯¹è±¡ï¼Œè€Œæ˜¯ React å°è£…çš„ SyntheticEvent å¯¹è±¡ã€‚</p>
<h3 data-id="heading-10">1. åˆæˆäº‹ä»¶çš„æ ¸å¿ƒä½œç”¨</h3>
<p>React å°è£… SyntheticEvent çš„æ ¸å¿ƒç›®çš„æ˜¯ï¼š</p>
<ul>
<li><strong>è·¨æµè§ˆå™¨å…¼å®¹</strong>ï¼šä¸åŒæµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶å¯¹è±¡å­˜åœ¨å·®å¼‚ï¼ˆå¦‚ IE çš„ event.srcElement vs æ ‡å‡†çš„ event.targetï¼‰ï¼ŒSyntheticEvent ç»Ÿä¸€äº†è¿™äº›å·®å¼‚ï¼Œè®©å¼€å‘è€…æ— éœ€å…³æ³¨æµè§ˆå™¨å…¼å®¹ï¼›</li>
<li><strong>äº‹ä»¶å¯¹è±¡æ± å¤ç”¨</strong>ï¼šReact ä¼šå¤ç”¨ SyntheticEvent å¯¹è±¡ï¼ˆå‡å°‘å†…å­˜å¼€é”€ï¼‰ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œåï¼Œä¼šæ¸…ç©ºå¯¹è±¡çš„å±æ€§ï¼ˆå¦‚ event.targetã€event.preventDefault() ç­‰ï¼‰ï¼›</li>
<li><strong>ç»Ÿä¸€çš„äº‹ä»¶ API</strong>ï¼šSyntheticEvent æä¾›äº†ä¸åŸç”Ÿäº‹ä»¶å¯¹è±¡ç›¸ä¼¼çš„ APIï¼ˆå¦‚ preventDefaultã€stopPropagationï¼‰ï¼Œä½†è¡Œä¸ºæœ‰ç»†å¾®å·®å¼‚ã€‚</li>
</ul>
<h3 data-id="heading-11">2. åˆæˆäº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„å…³è”</h3>
<p>SyntheticEvent å¯¹è±¡å†…éƒ¨æŒæœ‰åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯é€šè¿‡ <code>event.nativeEvent</code> è·å–åŸç”Ÿäº‹ä»¶å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">SyntheticEvent</span>); <span class="hljs-comment">// true</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">nativeEvent</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Event</span>); <span class="hljs-comment">// trueï¼ˆåŸç”Ÿäº‹ä»¶å¯¹è±¡ï¼‰</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span> === event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">target</span>); <span class="hljs-comment">// trueï¼ˆç»Ÿä¸€ç›®æ ‡å…ƒç´ ï¼‰</span>
};
</code></pre>
<h3 data-id="heading-12">3. æ³¨æ„ç‚¹ï¼šåˆæˆäº‹ä»¶çš„äº‹ä»¶é˜»æ­¢</h3>
<p>åœ¨ React äº‹ä»¶ä¸­ï¼Œè°ƒç”¨ <code>event.stopPropagation()</code> åªèƒ½é˜»æ­¢ React äº‹ä»¶çš„â€œæ¨¡æ‹Ÿå†’æ³¡â€ï¼ˆå³é˜»æ­¢çˆ¶ç»„ä»¶çš„ React äº‹ä»¶æ‰§è¡Œï¼‰ï¼Œä½†<strong>æ— æ³•é˜»æ­¢åŸç”Ÿäº‹ä»¶çš„å†’æ³¡</strong>ï¼›å¦‚æœè¦é˜»æ­¢åŸç”Ÿäº‹ä»¶å†’æ³¡ï¼Œéœ€è¦è°ƒç”¨åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„ <code>stopPropagation()</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´  React äº‹ä»¶è§¦å‘'</span>);
  <span class="hljs-comment">// é˜»æ­¢ React äº‹ä»¶çš„æ¨¡æ‹Ÿå†’æ³¡ï¼ˆçˆ¶ç»„ä»¶çš„ React äº‹ä»¶ä¸ä¼šæ‰§è¡Œï¼‰</span>
  event.<span class="hljs-title function_">stopPropagation</span>();
  <span class="hljs-comment">// é˜»æ­¢åŸç”Ÿäº‹ä»¶çš„å†’æ³¡ï¼ˆçˆ¶å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ã€window äº‹ä»¶ä¸ä¼šæ‰§è¡Œï¼‰</span>
  event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-title function_">stopPropagation</span>();
};
</code></pre>
<p>æ³¨æ„ï¼šåœ¨ React 17 ä¹‹å‰ï¼Œåˆæˆäº‹ä»¶çš„äº‹ä»¶æ± å¤ç”¨æœºåˆ¶ä¼šå¯¼è‡´â€œå¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§å¤±æ•ˆâ€ï¼ˆå¦‚åœ¨ setTimeout ä¸­è®¿é—® event.target ä¼šæ˜¯ nullï¼‰ï¼Œéœ€è¦ç”¨ event.persist() ä¿ç•™äº‹ä»¶å±æ€§ï¼›React 17 åŠä¹‹åï¼ˆåŒ…æ‹¬ React 19ï¼‰ï¼Œç§»é™¤äº†äº‹ä»¶æ± å¤ç”¨æœºåˆ¶ï¼Œå¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§ä¹Ÿèƒ½æ­£å¸¸è·å–ã€‚</p>
<h2 data-id="heading-13">äº”ã€å®æˆ˜é¿å‘ï¼šReact äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶ååŒçš„å¸¸è§é—®é¢˜</h2>
<p>ç†è§£äº†ä¸Šè¿°åŸç†åï¼Œæˆ‘ä»¬å°±èƒ½è§£å†³å®é™…å¼€å‘ä¸­ React äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶ååŒçš„å¸¸è§é—®é¢˜äº†ã€‚ä¸‹é¢åˆ—ä¸¾ 3 ä¸ªé«˜é¢‘é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-14">é—®é¢˜ 1ï¼šReact äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶å†’æ³¡å†²çªï¼Œå¯¼è‡´é‡å¤æ‰§è¡Œ</h3>
<p>åœºæ™¯ï¼šçˆ¶ç»„ä»¶ç”¨ React äº‹ä»¶ï¼Œå­ç»„ä»¶ç”¨åŸç”Ÿäº‹ä»¶ï¼Œç‚¹å‡»å­ç»„ä»¶æ—¶ï¼Œçˆ¶ç»„ä»¶çš„ React äº‹ä»¶å’Œå­ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶éƒ½æ‰§è¡Œï¼Œä¸ç¬¦åˆé¢„æœŸã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šåœ¨å­ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶ä¸­ï¼Œè°ƒç”¨åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„ stopPropagation()ï¼Œé˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°æ ¹å®¹å™¨ï¼Œä»è€Œé˜»æ­¢ React äº‹ä»¶æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> btn = btnRef.<span class="hljs-property">current</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNativeClick</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å…ƒç´ åŸç”Ÿäº‹ä»¶è§¦å‘'</span>);
    e.<span class="hljs-title function_">stopPropagation</span>(); <span class="hljs-comment">// é˜»æ­¢åŸç”Ÿäº‹ä»¶å†’æ³¡ï¼ŒReact äº‹ä»¶ä¸ä¼šæ‰§è¡Œ</span>
  };
  btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> btn.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleNativeClick);
}, []);
</code></pre>
<h3 data-id="heading-15">é—®é¢˜ 2ï¼šwindow äº‹ä»¶æœªç§»é™¤ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</h3>
<p>åœºæ™¯ï¼šåœ¨ç»„ä»¶ä¸­ç»‘å®š window åŸç”Ÿäº‹ä»¶ï¼ˆå¦‚ resizeã€scrollï¼‰ï¼Œç»„ä»¶å¸è½½åï¼Œäº‹ä»¶æœªç§»é™¤ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šåœ¨ useEffect çš„æ¸…ç†å‡½æ•°ä¸­ï¼Œç§»é™¤ window äº‹ä»¶ç»‘å®šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWindowResize</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çª—å£å¤§å°å˜åŒ–'</span>);
  };
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleWindowResize);
  <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleWindowResize);
  };
}, []);
</code></pre>
<h3 data-id="heading-16">é—®é¢˜ 3ï¼šReact äº‹ä»¶ä¸­å¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§å¤±æ•ˆï¼ˆReact 17 ä¹‹å‰ï¼‰</h3>
<p>åœºæ™¯ï¼šåœ¨ React 17 åŠä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œåœ¨ setTimeout ä¸­è®¿é—® event.target ä¼šæ˜¯ nullã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šè°ƒç”¨ event.persist() ä¿ç•™äº‹ä»¶å±æ€§ï¼Œæˆ–æå‰ä¿å­˜éœ€è¦çš„å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ¡ˆ 1ï¼šè°ƒç”¨ event.persist()</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params">event</span>) =&gt; {
  event.<span class="hljs-title function_">persist</span>(); <span class="hljs-comment">// ä¿ç•™äº‹ä»¶å±æ€§</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>); <span class="hljs-comment">// æ­£å¸¸è·å–</span>
  }, <span class="hljs-number">1000</span>);
};

<span class="hljs-comment">// æ–¹æ¡ˆ 2ï¼šæå‰ä¿å­˜å±æ€§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReactClick</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>; <span class="hljs-comment">// æå‰ä¿å­˜</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target); <span class="hljs-comment">// æ­£å¸¸è·å–</span>
  }, <span class="hljs-number">1000</span>);
};
</code></pre>
<p>æ³¨æ„ï¼šReact 17 åŠä¹‹åç‰ˆæœ¬ï¼ˆåŒ…æ‹¬ React 19ï¼‰å·²ç§»é™¤äº‹ä»¶æ± å¤ç”¨æœºåˆ¶ï¼Œæ— éœ€è°ƒç”¨ event.persist()ï¼Œå¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§ä¹Ÿèƒ½æ­£å¸¸è·å–ã€‚</p>
<h2 data-id="heading-17">å…­ã€æ ¸å¿ƒæ€»ç»“</h2>
<p>ä»Šå¤©æˆ‘ä»¬ä»æ¡ˆä¾‹å‡ºå‘ï¼Œæ‹†è§£äº† React 19 äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†ï¼Œé‡ç‚¹å˜æ¸…äº† React UI äº‹ä»¶ä¸åŸç”Ÿ window äº‹ä»¶çš„å…³ç³»ï¼Œæœ€åç»™å‡ºäº†å®æˆ˜é¿å‘æ–¹æ¡ˆã€‚æ ¸å¿ƒè¦ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>React äº‹ä»¶çš„æ ¸å¿ƒæ˜¯äº‹ä»¶ä»£ç†</strong>ï¼šæ‰€æœ‰ UI äº‹ä»¶å§”æ‰˜ç»™æ ¹å®¹å™¨ï¼ˆ#rootï¼‰ï¼Œé€šè¿‡äº‹ä»¶æ³¨å†Œè¡¨æŸ¥æ‰¾å¹¶æ‰§è¡Œå¤„ç†å‡½æ•°ï¼Œå…¶â€œå†’æ³¡â€æ˜¯æ¨¡æ‹Ÿçš„ï¼›</li>
<li><strong>React äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶çš„é¡ºåº</strong>ï¼šwindow åŸç”Ÿæ•è·äº‹ä»¶ â†’ ç›®æ ‡å…ƒç´ /ç¥–å…ˆå…ƒç´ åŸç”Ÿäº‹ä»¶ â†’ React äº‹ä»¶ â†’ window åŸç”Ÿå†’æ³¡äº‹ä»¶ï¼›</li>
<li><strong>åˆæˆäº‹ä»¶æ˜¯åŸç”Ÿäº‹ä»¶çš„å°è£…</strong>ï¼šæä¾›è·¨æµè§ˆå™¨å…¼å®¹å’Œç»Ÿä¸€ APIï¼Œå¯é€šè¿‡ event.nativeEvent è·å–åŸç”Ÿäº‹ä»¶å¯¹è±¡ï¼›</li>
<li><strong>å®æˆ˜é¿å‘å…³é”®</strong>ï¼šé˜»æ­¢åŸç”Ÿå†’æ³¡éœ€è°ƒç”¨ event.nativeEvent.stopPropagation()ï¼›window äº‹ä»¶éœ€åœ¨ç»„ä»¶å¸è½½æ—¶ç§»é™¤ï¼›React 17 ä¹‹å‰å¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§éœ€ç”¨ event.persist()ã€‚</li>
</ol>
<h2 data-id="heading-18">ä¸ƒã€ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘</h2>
<p>æŒæ¡äº† React äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†åï¼Œä¸‹ä¸€æ­¥å¯ä»¥é‡ç‚¹å­¦ä¹ ï¼š</p>
<ul>
<li>React 19 äº‹ä»¶ç³»ç»Ÿçš„æ–°ç‰¹æ€§ï¼šå¦‚å¯¹åŸç”Ÿäº‹ä»¶çš„è¿›ä¸€æ­¥ä¼˜åŒ–ã€ä¸å¹¶å‘æ¸²æŸ“çš„ååŒç­‰ï¼›</li>
<li>äº‹ä»¶æ€§èƒ½ä¼˜åŒ–ï¼šå¦‚é˜²æŠ–èŠ‚æµåœ¨ React äº‹ä»¶ä¸­çš„åº”ç”¨ã€é¿å…ä¸å¿…è¦çš„äº‹ä»¶ç»‘å®šï¼›</li>
<li>ç‰¹æ®Šäº‹ä»¶åœºæ™¯ï¼šå¦‚è¡¨å•äº‹ä»¶ï¼ˆonSubmitã€onChangeï¼‰çš„ç‰¹æ®Šå¤„ç†ã€æ‹–æ‹½äº‹ä»¶ä¸ React äº‹ä»¶çš„ååŒã€‚</li>
</ul>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘ï½ æœ‰ä»»ä½•é—®é¢˜ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï½ æˆ‘ä»¬ä¸‹æœŸå†è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå…­ï¼‰ï¼šè§£ææ¥å£èŒè´£çš„å•ä¸€ä¸éš”ç¦»]]></title>    <link>https://juejin.cn/post/7594391758427029514</link>    <guid>https://juejin.cn/post/7594391758427029514</guid>    <pubDate>2026-01-13T02:17:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594391758427029514" data-draft-id="7594389937459707914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå…­ï¼‰ï¼šè§£ææ¥å£èŒè´£çš„å•ä¸€ä¸éš”ç¦»"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-13T02:17:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå…­ï¼‰ï¼šè§£ææ¥å£èŒè´£çš„å•ä¸€ä¸éš”ç¦»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:17:28.000Z" title="Tue Jan 13 2026 02:17:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>è¿™æ˜¯ã€Šå‰ç«¯åƒæ¶æ„çªå›´ã€‹ç³»åˆ—çš„ç¬¬å…­ç¯‡ã€‚</p>
<p>åœ¨ä¸Šä¸€ç¯‡æˆ‘ä»¬èŠäº† <code>å¥‘çº¦ç»§æ‰¿åŸåˆ™</code>
ï¼Œä»Šå¤©æˆ‘ä»¬æŠŠæ˜¾å¾®é•œèšç„¦å¾—æ›´ç»†ä¸€ç‚¹ï¼ŒèŠèŠ**â€œæ¥å£â€**ã€‚</p>
<p>å¾ˆå¤šåŒå­¦çœ‹åˆ°â€œæ¥å£èŒè´£å•ä¸€â€å’Œâ€œæ¥å£éš”ç¦»â€ï¼Œç¬¬ä¸€ååº”æ˜¯ï¼šè·Ÿæˆ‘å‰ç«¯åˆ‡å›¾æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿâ€</p>
<p>å…³ç³»å¤§äº†ã€‚ä½ æ˜¯å¦ç»å†è¿‡ä¸€ä¸ª <code>Table</code> ç»„ä»¶å†™äº† 30 å¤šä¸ª propsï¼Ÿä½ æ˜¯å¦è§è¿‡ä¸€ä¸ª <code>useCommon</code> Hook é‡Œå¡è¿›äº†ç™»å½•ã€åŸ‹ç‚¹ã€å¼¹çª—å’Œæ ¼å¼åŒ–é€»è¾‘ï¼Ÿ</p>
<p>å‰ç«¯çš„**â€œè…çƒ‚â€ <strong>ï¼Œå¾€å¾€ä¸æ˜¯å› ä¸ºæŠ€æœ¯æ ˆè½åï¼Œè€Œæ˜¯å› ä¸º</strong>æ¥å£è®¾è®¡çš„è¾¹ç•Œæ¨¡ç³Š**ã€‚ä»Šå¤©æˆ‘ä»¬ä¸è°ˆæ¯ç‡¥çš„ SOLID å®šä¹‰ï¼Œåªè°ˆåœ¨å‰ç«¯ç»„ä»¶ã€Hooks å’Œæ•°æ®å±‚è®¾è®¡ä¸­ï¼Œå¦‚ä½•åˆ©ç”¨**â€œéš”ç¦»â€**æ€ç»´ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆç­â€œä¸Šå¸ç»„ä»¶â€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8f69cc278004c119287ec0dbe2233ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875490&amp;x-signature=97LOto4pwsn8HcqUvdTEv%2BPgph0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ å‰ç«¯è§†è§’çš„â€œæ¥å£â€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨æ¶æ„å¸ˆçš„çœ¼é‡Œï¼Œå‰ç«¯çš„ Interface ç»ä¸ä»…ä»…æ˜¯ TypeScript é‡Œçš„ <code>interface Props {}</code>ã€‚</p>
<p><strong>å‰ç«¯çš„â€œæ¥å£â€ï¼Œæ˜¯æ¨¡å—ä¸å¤–ç•Œé€šä¿¡çš„å…¨éƒ¨å¥‘çº¦ã€‚</strong> å®ƒåŒ…å«ä¸‰ä¸ªç»´åº¦ï¼š</p>
<ol>
<li><strong>æ•°æ®å¥‘çº¦</strong>ï¼šç»„ä»¶çš„ Propsã€Vue çš„ Emitsã€ä»¥åŠåç«¯è¿”å›çš„ JSON ç»“æ„ã€‚</li>
<li><strong>é€»è¾‘å¥‘çº¦</strong>ï¼šHooks (Composables) æš´éœ²å‡ºçš„ value å’Œ functionã€‚</li>
<li><strong>äº¤äº’å¥‘çº¦</strong>ï¼šç»„ä»¶é€šè¿‡ ref æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹æ–¹æ³•ï¼ˆå¦‚ <code>modalRef.open()</code>ï¼‰ã€‚</li>
</ol>
<p><strong>â€œèŒè´£å•ä¸€â€ä¸â€œéš”ç¦»â€çš„æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸€ä¸ªï¼šé™ä½è€¦åˆï¼Œæ§åˆ¶å˜åŒ–çš„å½±å“èŒƒå›´ã€‚</strong></p>
<p>å¦‚æœä½ çš„ç»„ä»¶å› ä¸ºâ€œUIè°ƒæ•´â€è¦æ”¹ï¼Œå› ä¸ºâ€œåç«¯å­—æ®µæ›´åâ€è¦æ”¹ï¼Œç”šè‡³å› ä¸ºâ€œåŸ‹ç‚¹åº“å‡çº§â€ä¹Ÿè¦æ”¹ï¼Œé‚£è¿™ä¸ªç»„ä»¶å°±æˆäº†**â€œå˜åŒ–ç£é“â€**ï¼Œå®ƒè¿åäº†å•ä¸€èŒè´£ï¼Œè¿Ÿæ—©ä¼šå´©å¡Œã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€é‚£äº›è¿å ISP (æ¥å£éš”ç¦»åŸåˆ™) çš„åæ¨¡å¼</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå…¸å‹çš„â€œè½¦ç¥¸ç°åœºâ€ã€‚è¿™æ˜¯ä¸€ä¸ªå±•ç¤ºç”¨æˆ·ä¿¡æ¯çš„å¡ç‰‡ç»„ä»¶ã€‚</p>
<h4 data-id="heading-2">åæ¨¡å¼ 1ï¼šå…¨é‡ä¾èµ–ï¼ˆè´ªå©ªæ¥å£ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»å‹å®šä¹‰ï¼šåç«¯è¿”å›çš„å®Œæ•´çš„ç”¨æˆ·æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">avatar</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span> | <span class="hljs-string">'user'</span>;
  <span class="hljs-attr">settings</span>: { <span class="hljs-attr">theme</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">notify</span>: <span class="hljs-built_in">boolean</span> };
  <span class="hljs-comment">// ... å¯èƒ½è¿˜æœ‰20ä¸ªå­—æ®µ</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserCardProps</span> {
  <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span>; <span class="hljs-comment">//  ç½ªé­ç¥¸é¦–ï¼šç›´æ¥ä¾èµ–æ•´ä¸ª User å¯¹è±¡</span>
  <span class="hljs-attr">onEdit</span>: <span class="hljs-function">(<span class="hljs-params">u: User</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserCard</span> = (<span class="hljs-params">{ user, onEdit }: UserCardProps</span>) =&gt; {
  <span class="hljs-comment">// ç»„ä»¶å…¶å®åªç”¨åˆ°äº† avatar å’Œ name</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{user.avatar}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onEdit(user)}&gt;Edit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ˜¯æ¶æ„ä¸Šçš„åå‘³é“ï¼Ÿ</strong></p>
<ol>
<li><strong>è¯­ä¹‰æ±¡æŸ“</strong>ï¼š<code>UserCard</code> æœ¬è´¨ä¸Šåªéœ€è¦â€œå›¾ç‰‡â€å’Œâ€œåå­—â€ã€‚å¦‚æœä½ å¼ºåˆ¶ä¼ å…¥æ•´ä¸ª <code>User</code> å¯¹è±¡ï¼Œå¯¼è‡´æˆ‘åœ¨â€œå¥½å‹åˆ—è¡¨â€é‡Œå¤ç”¨è¿™ä¸ªç»„ä»¶æ—¶ï¼Œå¿…é¡»æ„é€ ä¸€ä¸ªå‡çš„ <code>User</code> å¯¹è±¡ï¼ˆè¿™å°±å« mocking hellï¼‰ã€‚</li>
<li><strong>ä¸å¿…è¦çš„é‡æ¸²æŸ“</strong>ï¼šå¦‚æœ <code>User</code> å¯¹è±¡é‡Œçš„ <code>settings.theme</code> å˜äº†ï¼Œ<code>UserCard</code> ä¼šæ„ŸçŸ¥åˆ° props å˜åŒ–ä»è€Œ re-renderï¼Œå°½ç®¡å®ƒæ ¹æœ¬ä¸åœ¨ä¹ themeã€‚</li>
<li><strong>ç±»å‹ç³»ç»Ÿçš„è„†å¼±æ€§</strong>ï¼šåç«¯å¦‚æœæŠŠ <code>email</code> å­—æ®µåˆ äº†ï¼Œè™½ç„¶ <code>UserCard</code> æ²¡ç”¨åˆ° emailï¼Œä½† TypeScript å¯èƒ½ä¼šåœ¨çˆ¶ç»„ä»¶ä¼ å‚å¤„æŠ¥é”™ï¼Œå› ä¸ºç±»å‹å¥‘çº¦æ–­äº†ã€‚</li>
</ol>
<h4 data-id="heading-3">ç ´å±€æ–¹æ¡ˆï¼šæŒ‰éœ€å£°æ˜ï¼ˆæœ€å°çŸ¥è¯†åŸåˆ™ï¼‰</h4>
<p>æ¶æ„å¸ˆçš„è§£æ³•æ˜¯ï¼š<strong>ç»„ä»¶ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„ä¸œè¥¿ã€‚</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®šä¹‰ç»„ä»¶çœŸæ­£å…³å¿ƒçš„æ¥å£ï¼ˆISPï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserCardProps</span> {
  <span class="hljs-attr">avatarUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">displayName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">onEdit</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>; <span class="hljs-comment">// ç”šè‡³ä¸éœ€è¦å›ä¼  Userï¼Œç”±çˆ¶ç»„ä»¶é—­åŒ…å¤„ç†</span>
}

<span class="hljs-comment">// 2. åªæœ‰ UI å…³æ³¨ç‚¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserCard</span> = (<span class="hljs-params">{ avatarUrl, displayName, onEdit }: UserCardProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{avatarUrl}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{displayName}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onEdit}</span>&gt;</span>Edit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// 3. åœ¨çˆ¶ç»„ä»¶å±‚è¿›è¡Œâ€œé€‚é…â€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useUser</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserCard</span> 
      <span class="hljs-attr">avatarUrl</span>=<span class="hljs-string">{user.avatar}</span>
      <span class="hljs-attr">displayName</span>=<span class="hljs-string">{user.name}</span>
      <span class="hljs-attr">onEdit</span>=<span class="hljs-string">{()</span> =&gt;</span> handleEdit(user.id)}
    /&gt;</span>
  );
};
</code></pre>
<p><strong>æ¶æ„æ”¶ç›Šï¼š</strong> <code>UserCard</code> ä»â€œç‰¹å®šä¸šåŠ¡ç»„ä»¶â€è¿›åŒ–æˆäº†â€œé€šç”¨ UI ç»„ä»¶â€ã€‚ç°åœ¨å®ƒå¯ä»¥å±•ç¤ºâ€œå½“å‰ç”¨æˆ·â€ï¼Œä¹Ÿå¯ä»¥å±•ç¤ºâ€œæ¨èå¥½å‹â€ï¼Œç”šè‡³å¯ä»¥å±•ç¤ºâ€œå® ç‰©ä¿¡æ¯â€ï¼ˆåªè¦æœ‰å›¾å’Œåå­—ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€é…ç½®åœ°ç‹± vs ç»„åˆéš”ç¦»</h3>
<p>å¦ä¸€ç§å¸¸è§çš„è¿åâ€œèŒè´£å•ä¸€â€çš„åœºæ™¯ï¼Œå‡ºç°åœ¨<strong>é€šç”¨ç»„ä»¶</strong>çš„è®¾è®¡ä¸Šã€‚</p>
<p>ä¸ºäº†å¤ç”¨ï¼Œæˆ‘ä»¬ç»å¸¸å¾€ç»„ä»¶é‡ŒåŠ  flagã€‚</p>
<h4 data-id="heading-5">åæ¨¡å¼ 2ï¼šä¸Šå¸ç»„ä»¶ï¼ˆGod Componentï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸€ä¸ªè¯•å›¾æ»¡è¶³æ‰€æœ‰äººçš„ List ç»„ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ListProps</span> {
  <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>[];
  <span class="hljs-comment">//  èŒè´£æ··ä¹±ï¼šæ—¢è´Ÿè´£æ¸²æŸ“åˆ—è¡¨ï¼Œåˆè´Ÿè´£å¤´éƒ¨ï¼Œåˆè´Ÿè´£æœç´¢ï¼Œåˆè´Ÿè´£åˆ†é¡µ</span>
  showSearch?: <span class="hljs-built_in">boolean</span>;
  searchPlaceholder?: <span class="hljs-built_in">string</span>;
  onSearch?: <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  showPagination?: <span class="hljs-built_in">boolean</span>;
  total?: <span class="hljs-built_in">number</span>;
  renderHeader?: <span class="hljs-built_in">boolean</span>;
  headerTitle?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">// ... props çˆ†ç‚¸</span>
}
</code></pre>
<p>éšç€ä¸šåŠ¡è¿­ä»£ï¼Œè¿™ä¸ªç»„ä»¶å†…éƒ¨ä¼šå……æ–¥ç€ <code>if (showSearch) { ... }</code> çš„åˆ¤æ–­ã€‚æ¯æ¬¡ä¿®æ”¹ä»»ä½•ä¸€ä¸ªå°é€»è¾‘ï¼Œéƒ½è¦å°å¿ƒç¿¼ç¿¼é˜²æ­¢æ”¹åäº†å…¶ä»–åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-6">ç ´å±€æ–¹æ¡ˆï¼šç»„åˆä¼˜äºé…ç½® (Composition over Configuration)</h4>
<p>æˆ‘ä»¬è¦åˆ©ç”¨ React/Vue çš„ <strong>Slot (æ’æ§½)</strong> æˆ– <strong>Children</strong> æœºåˆ¶ï¼Œå°†èŒè´£éš”ç¦»ç»™å¤–éƒ¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// èŒè´£å•ä¸€ï¼šList åªç®¡æ¸²æŸ“åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params">{ children }</span>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"list"</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-title class_">List</span>.<span class="hljs-property">Item</span> = <span class="hljs-function">(<span class="hljs-params">{ title }</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item"</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

<span class="hljs-comment">// èŒè´£å•ä¸€ï¼šSearch åªç®¡æœç´¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">SearchBar</span> = (<span class="hljs-params">{ onSearch }</span>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{...}</span> /&gt;</span></span>;

<span class="hljs-comment">// ä¸šåŠ¡å±‚ï¼šè‡ªç”±ç»„åˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserListFeature</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"container"</span>&gt;</span>
      {/* æœç´¢èŒè´£éš”ç¦» */}
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchBar</span> <span class="hljs-attr">onSearch</span>=<span class="hljs-string">{handleSearch}</span> /&gt;</span>
      
      {/* åˆ—è¡¨èŒè´£éš”ç¦» */}
      <span class="hljs-tag">&lt;<span class="hljs-name">List</span>&gt;</span>
        {users.map(u =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">List.Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{u.id}</span> <span class="hljs-attr">title</span>=<span class="hljs-string">{u.name}</span> /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span>
      
      {/* åˆ†é¡µèŒè´£éš”ç¦» */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Pagination</span> <span class="hljs-attr">total</span>=<span class="hljs-string">{100}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>æ¶æ„æ”¶ç›Šï¼š</strong></p>
<ul>
<li><strong>List ç»„ä»¶</strong> ä¸å†éœ€è¦çŸ¥é“â€œæœç´¢â€çš„å­˜åœ¨ã€‚</li>
<li><strong>SearchBar ç»„ä»¶</strong> å¯ä»¥å•ç‹¬ä¼˜åŒ–ã€å•ç‹¬å¤ç”¨ã€‚</li>
<li>å¦‚æœå“ªå¤©äº§å“ç»ç†è¯´â€œæŠŠæœç´¢æ¡†æ”¾åˆ°åˆ—è¡¨åº•éƒ¨â€ï¼Œä½ åªéœ€è¦è°ƒæ•´ JSX çš„é¡ºåºï¼Œè€Œä¸éœ€è¦å»ä¿®æ”¹ <code>List</code> ç»„ä»¶å†…éƒ¨é‚£å¤æ‚çš„ <code>if/else</code> æ¸²æŸ“é€»è¾‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">å››ã€Hooks ä¸é€»è¾‘å±‚çš„èŒè´£éš”ç¦»</h3>
<p>UI éš”ç¦»å¤§å®¶å¤šå°‘æœ‰ç‚¹æ¦‚å¿µï¼Œä½†é€»è¾‘å±‚çš„éš”ç¦»å¾€å¾€æ˜¯é‡ç¾åŒºã€‚æˆ‘ä»¬ç»å¸¸çœ‹åˆ°ä¸€ä¸ª <code>useTable</code> æ‰¿æ‹…äº†æ‰€æœ‰å·¥ä½œã€‚</p>
<h4 data-id="heading-8">æ··æ‚é€»è¾‘</h4>
<pre><code class="hljs language-scss" lang="scss">const useTable = (apiEndpoint) =&gt; {
  <span class="hljs-comment">// 1. æ•°æ®è·å–</span>
  const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>([]);
  
  <span class="hljs-comment">// 2. åˆ†é¡µçŠ¶æ€</span>
  const <span class="hljs-selector-attr">[page, setPage]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">1</span>);
  
  <span class="hljs-comment">// 3. ç­›é€‰é€»è¾‘</span>
  const <span class="hljs-selector-attr">[filters, setFilters]</span> = <span class="hljs-built_in">useState</span>({});
  
  <span class="hljs-comment">// 4. URL åŒæ­¥é€»è¾‘ (å‰¯ä½œç”¨)</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
     history<span class="hljs-selector-class">.push</span>(`?page=${page}`);
  }, <span class="hljs-selector-attr">[page]</span>);
  
  <span class="hljs-comment">// 5. ç”šè‡³è¿˜æœ‰ Excel å¯¼å‡ºé€»è¾‘</span>
  const exportExcel = () =&gt; { ... };

  return { data, page, setPage, exportExcel, ... };
}
</code></pre>
<p>è¿™è¿åäº† SRPã€‚å¦‚æœä½ åªæƒ³æ¢ä¸ª URL åŒæ­¥åº“ï¼ˆæ¯”å¦‚ä» react-router æ¢åˆ° next/routerï¼‰ï¼Œä½ å¾—å»æ”¹è¿™ä¸ªæ ¸å¿ƒ Hookï¼Œé£é™©æå¤§ã€‚</p>
<h4 data-id="heading-9">é€»è¾‘æ‹†åˆ†ä¸ç»„è£… (Headless æ€æƒ³)</h4>
<p>å¥½çš„æ¶æ„åº”è¯¥æ˜¯<strong>ç§¯æœ¨å¼</strong>çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. çº¯ç²¹çš„åˆ†é¡µé€»è¾‘ (æ— å‰¯ä½œç”¨)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">usePagination</span> = (<span class="hljs-params">initialPage = <span class="hljs-number">1</span></span>) =&gt; { ... };

<span class="hljs-comment">// 2. çº¯ç²¹çš„æ•°æ®è¯·æ±‚ (ä¸å…³å¿ƒ UI)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useFetchData</span> = (<span class="hljs-params">params</span>) =&gt; { ... };

<span class="hljs-comment">// 3. ç‹¬ç«‹çš„ URL åŒæ­¥é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useUrlSync</span> = (<span class="hljs-params">state</span>) =&gt; { ... };

<span class="hljs-comment">// 4. ä¸šåŠ¡å±‚ Hookï¼šè´Ÿè´£ç»„è£… (Orchestration)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useUserTableLogic</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { page, setPage } = <span class="hljs-title function_">usePagination</span>();
  <span class="hljs-keyword">const</span> { filters } = <span class="hljs-title function_">useFilters</span>();
  
  <span class="hljs-comment">// ç»„è£…é€»è¾‘ï¼šå½“ page å˜äº†ï¼Œå»è¯·æ±‚æ•°æ®</span>
  <span class="hljs-keyword">const</span> { data, loading } = <span class="hljs-title function_">useFetchData</span>({ page, ...filters });
  
  <span class="hljs-comment">// ç»„è£…å‰¯ä½œç”¨ï¼šçŠ¶æ€å˜äº†åŒæ­¥ URL</span>
  <span class="hljs-title function_">useUrlSync</span>({ page, filters });
  
  <span class="hljs-keyword">return</span> { data, loading, page, setPage };
};
</code></pre>
<p><strong>æ¶æ„æ”¶ç›Šï¼š</strong> * <code>usePagination</code> å¯ä»¥è¢«ä»»ä½•åˆ—è¡¨ã€è½®æ’­å›¾å¤ç”¨ã€‚</p>
<ul>
<li>æµ‹è¯• <code>usePagination</code> ä¸éœ€è¦ mock API è¯·æ±‚ã€‚</li>
<li>ä¿®æ”¹ URL åŒæ­¥é€»è¾‘ä¸ä¼šå½±å“æ•°æ®è¯·æ±‚é€»è¾‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">äº”ã€æ•°æ®æ¥å£çš„ç»ˆæéš”ç¦» (ACL)</h3>
<p>æœ€åä¸€ä¸ªå…³é”®ç‚¹æ˜¯<strong>å‰ç«¯ä¸åç«¯çš„æ¥å£éš”ç¦»</strong>ã€‚</p>
<p>å¾ˆå¤šå‰ç«¯é¡¹ç›®ç›´æ¥åœ¨ç»„ä»¶é‡Œä½¿ç”¨åç«¯çš„å­—æ®µåï¼š</p>
<pre><code class="hljs language-css" lang="css">// ç³Ÿç³•çš„ä»£ç ï¼šUI æ·±åº¦è€¦åˆåç«¯å­—æ®µ
&lt;<span class="hljs-selector-tag">div</span>&gt;{data<span class="hljs-selector-class">.user_real_name_v2</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;<span class="hljs-selector-tag">div</span>&gt;{data<span class="hljs-selector-class">.is_vip_flag</span> === <span class="hljs-number">1</span> ? 'VIP' : <span class="hljs-string">'Normal'</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>å¦‚æœåç«¯é‡æ„ï¼ŒæŠŠ <code>user_real_name_v2</code> æ”¹æˆäº† <code>realName</code>ï¼ŒæŠŠ <code>is_vip_flag</code> æ”¹æˆäº†å¸ƒå°”å€¼ï¼Œä½ çš„é¡¹ç›®é‡Œå¯èƒ½æœ‰ 50 ä¸ªæ–‡ä»¶è¦è·Ÿç€æ”¹ã€‚</p>
<p><strong>æ¶æ„çªå›´æ–¹æ¡ˆï¼šå¼•å…¥ Adapterï¼ˆé€‚é…å™¨ï¼‰å±‚ã€‚</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// api/user.ts</span>
<span class="hljs-comment">// å®šä¹‰å‰ç«¯éœ€è¦çš„çº¯å‡€ Model</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserModel</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">isVip</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// é€‚é…å™¨ï¼šå°†åç«¯è„æ•°æ®æ¸…æ´—ä¸ºå‰ç«¯æ ‡å‡†æ•°æ®</span>
<span class="hljs-keyword">const</span> adaptUser = (<span class="hljs-attr">serverData</span>: <span class="hljs-built_in">any</span>): <span class="hljs-function"><span class="hljs-params">UserModel</span> =&gt;</span> ({
  <span class="hljs-attr">name</span>: serverData.<span class="hljs-property">user_real_name_v2</span> || serverData.<span class="hljs-property">name</span>, <span class="hljs-comment">// ç”šè‡³å¯ä»¥åšå…¼å®¹</span>
  <span class="hljs-attr">isVip</span>: serverData.<span class="hljs-property">is_vip_flag</span> === <span class="hljs-number">1</span>
});

<span class="hljs-comment">// ç»„ä»¶å±‚åªæ¶ˆè´¹ UserModelï¼Œå®Œå…¨ä¸çŸ¥é“ serverData çš„å­˜åœ¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserProfile</span> = (<span class="hljs-params">{ user }: { user: UserModel }</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name} - {user.isVip ? 'VIP' : ''}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
};
</code></pre>
<p>è¿™å°±æ˜¯**â€œæ•°æ®æ¥å£éš”ç¦»â€**ã€‚æ— è®ºåç«¯æ€ä¹ˆå˜ï¼Œå˜åŒ–åªæ­¢æ­¥äº <code>adaptUser</code> å‡½æ•°ï¼ŒUI å±‚ç¨³å¦‚æ³°å±±ã€‚</p>
<hr/>
<h3 data-id="heading-11">å…­ã€ æ€»ç»“ä¸æ€è€ƒ</h3>
<p>åœ¨ã€Šå‰ç«¯åƒæ¶æ„çªå›´ã€‹çš„è¯­å¢ƒä¸‹ï¼Œ <strong>â€œæ¥å£èŒè´£å•ä¸€éš”ç¦»â€ä¸ä»…ä»…æ˜¯ä»£ç æ´ç™–ï¼Œå®ƒæ˜¯åº”å¯¹ç³»ç»Ÿå¤æ‚åº¦çš„æ ¸å¿ƒæ‰‹æ®µã€‚</strong></p>
<ul>
<li><strong>å¯¹ Props éš”ç¦»</strong>ï¼šè®©ç»„ä»¶æ›´é€šç”¨ï¼Œå‡å°‘æ— è°“æ¸²æŸ“ã€‚</li>
<li><strong>å¯¹ Children éš”ç¦»</strong>ï¼šç”¨ç»„åˆä»£æ›¿é…ç½®ï¼Œæ¶ˆç­ä¸Šå¸ç»„ä»¶ã€‚</li>
<li><strong>å¯¹ Hooks éš”ç¦»</strong>ï¼šé€»è¾‘è§£è€¦ï¼Œæå‡å¯æµ‹è¯•æ€§ã€‚</li>
<li><strong>å¯¹ API éš”ç¦»</strong>ï¼šå»ºç«‹é˜²è…å±‚ï¼Œä¿æŠ¤å‰ç«¯ä»£ç çš„ç¨³å®šæ€§ã€‚</li>
</ul>
<p><strong>ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®ï¼š</strong> ç°åœ¨æ‰“å¼€ä½ é¡¹ç›®é‡Œçš„ <code>components</code> æ–‡ä»¶å¤¹ï¼Œæ‰¾å‡ºä¸€ä¸ª Props è¶…è¿‡ 10 ä¸ªçš„ç»„ä»¶ï¼Œæˆ–è€…ä¸€ä¸ªä»£ç è¡Œæ•°è¶…è¿‡ 300 è¡Œçš„ Hookã€‚è¯•ç€é—®è‡ªå·±ï¼š <em>â€œè¿™ä¸ªæ¨¡å—æ˜¯ä¸æ˜¯æ‰¿æ‹…äº†å¤ªå¤šçš„èŒè´£ï¼Ÿâ€</em> ï¼Œç„¶åå°è¯•ç”¨æœ¬æ–‡æåˆ°çš„â€œæŒ‰éœ€å£°æ˜â€æˆ–â€œç»„åˆæ¨¡å¼â€è¿›è¡Œä¸€æ¬¡é‡æ„ã€‚</p>
<p>æ¶æ„èƒ½åŠ›çš„æå‡ï¼Œå°±å‘ç”Ÿåœ¨è¿™ä¸€æ¬¡æ¬¡å¯¹â€œè¾¹ç•Œâ€çš„é‡æ–°å®¡è§†ä¸­ã€‚</p>
<hr/>
<blockquote>
<p><strong>äº’åŠ¨è¯é¢˜</strong></p>
<p>åœ¨ä¸šåŠ¡ä¸­æ›´æ–°è¿­ä»£è¿‡å¿«æ—¶, å¯ä»¥ä¸å»å…³å¿ƒè¿™äº›ä¸œè¥¿, ä½†è¿™äº›ä¸œè¥¿çš„è¾“å‡º, æ›´å¤šçš„æ˜¯è¦å»è½¬å˜ä½ çš„æ€ç»´, è®©ä½ æœ‰ä¸€ä¸ªæ¦‚å¿µã€å°è±¡è¿™æ˜¯ä¸€ä¸ªæ½œç§»é»˜åŒ–çš„è½¬å˜è¿‡ç¨‹, è®©ä½ çœ‹é—®é¢˜ã€çœ‹æ¡†æ¶æ—¶ã€çœ‹ä¸šåŠ¡æ—¶, èƒ½ç«™åœ¨ä¸Šä¸€å±‚ã€‚</p>
<blockquote>
</blockquote>
<p>ä½ çš„é¡¹ç›®ä¸­æ˜¯å¦ä¹Ÿæœ‰é‚£ç§â€œæ”¹ä¸€è¡Œä»£ç ï¼Œæ•´ä¸ªé¡µé¢éƒ½å´©äº†â€çš„ç¥–ä¼ ç»„ä»¶ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„â€œå±å±±â€é‡æ„è¡€æ³ªå²ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7594415509607333934</link>    <guid>https://juejin.cn/post/7594415509607333934</guid>    <pubDate>2026-01-13T06:08:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594415509607333934" data-draft-id="7593602686136139802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-13T06:08:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:08:48.000Z" title="Tue Jan 13 2026 06:08:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦SPIæœºåˆ¶</h2>
<h3 data-id="heading-1">SPIå’ŒAPIçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h3>
<p>SPIæ˜¯ä¸€ç§è·ŸAPIç›¸å¯¹åº”çš„åå‘è®¾è®¡æ€æƒ³ï¼šAPIç”±å®ç°æ–¹ç¡®å®šæ ‡å‡†è§„èŒƒå’ŒåŠŸèƒ½ï¼Œè°ƒç”¨æ–¹æ— æƒåšä»»ä½•å¹²é¢„ï¼› è€ŒSPIæ˜¯ç”±è°ƒç”¨æ–¹ç¡®å®šæ ‡å‡†è§„èŒƒï¼Œä¹Ÿå°±æ˜¯æ¥å£ï¼Œç„¶åè°ƒç”¨æ–¹ä¾èµ–æ­¤æ¥å£ï¼Œç¬¬ä¸‰æ–¹å®ç°æ­¤æ¥å£ï¼Œè¿™æ ·åšå°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ‰©å±•ï¼Œç±»ä¼¼äºæ’ä»¶æœºåˆ¶ï¼Œè¿™æ˜¯SPIå‡ºç°çš„éœ€æ±‚èƒŒæ™¯ã€‚</p>
<p>SPI ï¼š â€œæ¥å£â€ä½äºâ€œè°ƒç”¨æ–¹â€æ‰€åœ¨çš„â€œåŒ…â€ä¸­</p>
<ul>
<li>
<p>æ¦‚å¿µä¸Šæ›´ä¾èµ–è°ƒç”¨æ–¹ã€‚</p>
</li>
<li>
<p>ç»„ç»‡ä¸Šä½äºè°ƒç”¨æ–¹æ‰€åœ¨çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å®ç°ä½äºç‹¬ç«‹çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å¸¸è§çš„ä¾‹å­æ˜¯ï¼šæ’ä»¶æ¨¡å¼çš„æ’ä»¶ã€‚</p>
</li>
</ul>
<p>API ï¼š â€œæ¥å£â€ä½äºâ€œå®ç°æ–¹â€æ‰€åœ¨çš„â€œåŒ…â€ä¸­</p>
<ul>
<li>
<p>æ¦‚å¿µä¸Šæ›´æ¥è¿‘å®ç°æ–¹ã€‚</p>
</li>
<li>
<p>ç»„ç»‡ä¸Šä½äºå®ç°æ–¹æ‰€åœ¨çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å®ç°å’Œæ¥å£åœ¨ä¸€ä¸ªåŒ…ä¸­ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯SPIæœºåˆ¶</h3>
<p>SPIï¼ˆService Provider Interfaceï¼‰ï¼Œæ˜¯JDKå†…ç½®çš„ä¸€ç§ æœåŠ¡æä¾›å‘ç°æœºåˆ¶ï¼Œå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ï¼Œä¸»è¦æ˜¯è¢«æ¡†æ¶çš„å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œä¾‹å¦‚æ•°æ®åº“ä¸­çš„java.sql.Driveræ¥å£ï¼Œä¸åŒçš„å‚å•†å¯ä»¥é’ˆå¯¹åŒä¸€æ¥å£åšå‡ºä¸åŒçš„å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒMySQLå’ŒPostgreSQLéƒ½æœ‰ä¸åŒçš„å®ç°æä¾›ç»™ç”¨æˆ·ã€‚
è€ŒJavaçš„SPIæœºåˆ¶å¯ä»¥ä¸ºæŸä¸ªæ¥å£å¯»æ‰¾æœåŠ¡å®ç°ï¼ŒJavaä¸­SPIæœºåˆ¶ä¸»è¦æ€æƒ³æ˜¯<strong>å°†è£…é…çš„æ§åˆ¶æƒç§»åˆ°ç¨‹åºä¹‹å¤–</strong>ï¼Œåœ¨æ¨¡å—åŒ–è®¾è®¡ä¸­è¿™ä¸ªæœºåˆ¶å°¤å…¶é‡è¦ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯ <strong>è§£è€¦</strong>ã€‚</p>
<p>SPIæ•´ä½“æœºåˆ¶å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc39590bdd5d40ecab1192c3011a2f44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=0gTdm9ZMzo22fG4%2F%2FBO4BcWZnzk%3D" alt="" loading="lazy"/></p>
<ol>
<li>å½“æœåŠ¡çš„æä¾›è€…æä¾›äº†ä¸€ç§æ¥å£çš„å®ç°ä¹‹åï¼Œéœ€è¦åœ¨classpathä¸‹çš„ META-INF/services/ ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åæ˜¯ä»¥<strong>æœåŠ¡æ¥å£</strong>å‘½åçš„ï¼Œè€Œæ–‡ä»¶é‡Œçš„å†…å®¹æ˜¯è¿™ä¸ªæ¥å£çš„<strong>å…·ä½“çš„å®ç°ç±»</strong>ã€‚</li>
<li>å½“å…¶ä»–çš„ç¨‹åºéœ€è¦è¿™ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥æ‰¾è¿™ä¸ªjaråŒ…ï¼ˆä¸€èˆ¬éƒ½æ˜¯ä»¥jaråŒ…åšä¾èµ–ï¼‰çš„META-INF/services/ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸­æœ‰æ¥å£çš„å…·ä½“å®ç°ç±»åï¼Œå†æ ¹æ®è¿™ä¸ªç±»åè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥æœåŠ¡äº†ã€‚JDKä¸­æŸ¥æ‰¾æœåŠ¡çš„å®ç°çš„å·¥å…·ç±»æ˜¯ï¼šjava.util.ServiceLoaderã€‚</li>
</ol>
<h2 data-id="heading-3">SPIæœºåˆ¶çš„ç®€å•ç¤ºä¾‹</h2>
<p>å‡è®¾ç°åœ¨éœ€è¦ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æœåŠ¡MessageServiceï¼Œå‘é€æ¶ˆæ¯çš„å®ç°å¯èƒ½æ˜¯åŸºäºçŸ­ä¿¡ã€ä¹Ÿå¯èƒ½æ˜¯åŸºäºç”µå­é‚®ä»¶ã€æˆ–æ¨é€é€šçŸ¥å‘é€æ¶ˆæ¯ã€‚</p>
<ul>
<li><strong>æ¥å£å®šä¹‰</strong>ï¼šé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£ <code>MessageService</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span>;
}
</code></pre>
<ul>
<li><strong>æä¾›ä¸¤ä¸ªå®ç°ç±»</strong>ï¼šä¸€ä¸ªé€šè¿‡çŸ­ä¿¡å‘é€æ¶ˆæ¯ï¼Œä¸€ä¸ªé€šè¿‡ç”µå­é‚®ä»¶å‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çŸ­ä¿¡å‘é€å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsMessageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {
        System.out.println(<span class="hljs-string">"Sending SMS: "</span> + message);
    }
}

<span class="hljs-comment">// ç”µå­é‚®ä»¶å‘é€å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailMessageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {
        System.out.println(<span class="hljs-string">"Sending Email: "</span> + message);
    }
}
</code></pre>
<ul>
<li><strong>é…ç½®æ–‡ä»¶</strong>ï¼šåœ¨ <code>META-INF/services/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º <code>MessageService</code> ï¼Œå…¨é™å®šå <code>com.example.MessageService</code>ï¼Œæ–‡ä»¶å†…å®¹ä¸ºæ¥å£çš„å®ç°ç±»çš„å…¨é™å®šåã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"># æ–‡ä»¶: META-INF/services/com.seven.MessageService
com.seven.SmsMessageService
com.seven.EmailMessageService
</code></pre>
<ul>
<li><strong>åŠ è½½æœåŠ¡å®ç°</strong>ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé€šè¿‡ <code>ServiceLoader</code> åŠ¨æ€åŠ è½½å¹¶ä½¿ç”¨è¿™äº›å®ç°ç±»ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        ServiceLoader&lt;MessageService&gt; loader = ServiceLoader.load(MessageService.class);

        <span class="hljs-keyword">for</span> (MessageService service : loader) {
            service.sendMessage(<span class="hljs-string">"Hello, SPI!"</span>);
        }
    }
}
</code></pre>
<p>è¿è¡Œæ—¶ï¼Œ<code>ServiceLoader</code> ä¼šå‘ç°å¹¶åŠ è½½é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰å®ç°ç±»ï¼Œå¹¶ä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„ <code>sendMessage</code> æ–¹æ³•ã€‚</p>
<p>ç”±äºåœ¨ é…ç½®æ–‡ä»¶ å†™äº†ä¸¤ä¸ªå®ç°ç±»ï¼Œå› æ­¤ä¸¤ä¸ªå®ç°ç±»éƒ½ä¼šæ‰§è¡Œ sendMessage æ–¹æ³•ã€‚</p>
<p>è¿™å°±æ˜¯å› ä¸ºServiceLoader.load(Search.class)åœ¨åŠ è½½æŸæ¥å£æ—¶ï¼Œä¼šå» META-INF/services ä¸‹æ‰¾æ¥å£çš„å…¨é™å®šåæ–‡ä»¶ï¼Œå†æ ¹æ®é‡Œé¢çš„å†…å®¹åŠ è½½ç›¸åº”çš„å®ç°ç±»ã€‚</p>
<p>è¿™å°±æ˜¯spiçš„æ€æƒ³ï¼Œæ¥å£çš„å®ç°ç”±providerå®ç°ï¼Œprovideråªç”¨åœ¨æäº¤çš„jaråŒ…é‡Œçš„META-INF/servicesä¸‹æ ¹æ®å¹³å°å®šä¹‰çš„æ¥å£æ–°å»ºæ–‡ä»¶ï¼Œå¹¶æ·»åŠ è¿›ç›¸åº”çš„å®ç°ç±»å†…å®¹å°±å¥½ã€‚</p>
<h2 data-id="heading-4">SPIæœºåˆ¶çš„åº”ç”¨</h2>
<h3 data-id="heading-5">JDBC DriverManager</h3>
<p>åœ¨JDBC4.0ä¹‹å‰ï¼Œå¼€å‘è¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>è¿™å¥å…ˆåŠ è½½æ•°æ®åº“ç›¸å…³çš„é©±åŠ¨ï¼Œç„¶åå†è¿›è¡Œè·å–è¿æ¥ç­‰çš„æ“ä½œã€‚è€ŒJDBC4.0ä¹‹åä¸éœ€è¦ç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>æ¥åŠ è½½é©±åŠ¨ï¼Œç›´æ¥è·å–è¿æ¥å°±å¯ä»¥äº†ï¼ŒåŸå› å°±æ˜¯ç°åœ¨ä½¿ç”¨äº†Javaçš„SPIæ‰©å±•æœºåˆ¶æ¥å®ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c85677d74aaa4af5afa2748ef2c6484a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=AeHC76Ms6Mgy2IMHayYaVHVnEUE%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p>
<ol>
<li>é¦–å…ˆåœ¨javaä¸­å®šä¹‰äº†æ¥å£ java.sql.Driverï¼Œå¹¶æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œå…·ä½“çš„å®ç°éƒ½æ˜¯ç”±ä¸åŒå‚å•†æ¥æä¾›çš„ã€‚</li>
<li>åœ¨mysqlçš„jaråŒ…mysql-connector-java-8.0.26.jarä¸­ï¼Œå¯ä»¥æ‰¾åˆ° META-INF/services ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ªåå­—ä¸º java.sql.Driver çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯com.mysql.cj.jdbc.Driverï¼Œè¿™é‡Œé¢çš„å†…å®¹å°±æ˜¯mysqlé’ˆå¯¹Javaä¸­å®šä¹‰çš„æ¥å£çš„å®ç°ã€‚</li>
<li>åŒæ ·åœ¨ojdbcçš„jaråŒ…ojdbc11.jarä¸­ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°åŒæ ·çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯ oracle.jdbc.OracleDriverï¼Œè¿™æ˜¯oracleæ•°æ®åº“å¯¹Javaçš„java.sql.Driverçš„å®ç°ã€‚</li>
</ol>
<h4 data-id="heading-6">ä½¿ç”¨æ–¹æ³•</h4>
<p>è€Œç°åœ¨Javaä¸­å†™è¿æ¥æ•°æ®åº“çš„ä»£ç çš„æ—¶å€™ï¼Œä¸éœ€è¦å†ä½¿ç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>æ¥åŠ è½½é©±åŠ¨äº†ï¼Œç›´æ¥è·å–è¿æ¥å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:xxxx://xxxx:xxxx/xxxx"</span>;
<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);
.....
</code></pre>
<p>è¿™é‡Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°spiçš„ä½¿ç”¨ï¼Œçœ‹ä¸‹é¢æºç ã€‚</p>
<h4 data-id="heading-7">æºç å®ç°</h4>
<p>ä¸Šé¢çš„ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯æ™®é€šçš„è¿æ¥æ•°æ®åº“çš„ä»£ç ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰æ¶‰åŠåˆ° SPI çš„ä¸œè¥¿ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰å†™æœ‰å…³å…·ä½“é©±åŠ¨çš„ç¡¬ç¼–ç <code>Class.forName("com.mysql.jdbc.Driver")</code>ï¼</p>
<p>è€Œä¸Šé¢çš„ä»£ç å°±å¯ä»¥ç›´æ¥è·å–æ•°æ®åº“è¿æ¥è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯è·ŸSPIæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ
æ—¢ç„¶ä¸Šé¢ä»£ç æ²¡æœ‰åŠ è½½é©±åŠ¨çš„ä»£ç ï¼Œé‚£å®é™…ä¸Šæ˜¯æ€ä¹ˆå»ç¡®å®šä½¿ç”¨å“ªä¸ªæ•°æ®åº“è¿æ¥çš„é©±åŠ¨å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œå°±æ¶‰åŠåˆ°ä½¿ç”¨Javaçš„SPI æ‰©å±•æœºåˆ¶æ¥æŸ¥æ‰¾ç›¸å…³é©±åŠ¨çš„ä¸œè¥¿äº†ï¼Œå…³äºé©±åŠ¨çš„æŸ¥æ‰¾å…¶å®éƒ½åœ¨DriverManagerä¸­ï¼ŒDriverManageræ˜¯Javaä¸­çš„å®ç°ï¼Œç”¨æ¥è·å–æ•°æ®åº“è¿æ¥ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DriverManager</span> {

    <span class="hljs-comment">// å­˜æ”¾æ³¨å†Œçš„jdbcé©±åŠ¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * Load the initial JDBC drivers by checking the System property
     * jdbc.properties and then use the {<span class="hljs-doctag">@code</span> ServiceLoader} mechanism
     */</span>
    <span class="hljs-keyword">static</span> {
        loadInitialDrivers();
        println(<span class="hljs-string">"JDBC DriverManager initialized"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadInitialDrivers</span><span class="hljs-params">()</span> {
        String drivers;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»JVM -Då‚æ•°è¯»å–jdbcé©±åŠ¨</span>
            drivers = AccessController.doPrivileged(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;String&gt;() {
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> System.getProperty(<span class="hljs-string">"jdbc.drivers"</span>);
                }
            });
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            drivers = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-comment">// If the driver is packaged as a Service Provider, load it.</span>
        <span class="hljs-comment">// Get all the drivers through the classloader</span>
        <span class="hljs-comment">// exposed as a java.sql.Driver.class service.</span>
        <span class="hljs-comment">// ServiceLoader.load() replaces the sun.misc.Providers()</span>

        AccessController.doPrivileged(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;Void&gt;() {
            <span class="hljs-keyword">public</span> Void <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {

                ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
                Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();

                <span class="hljs-comment">/* Load these drivers, so that they can be instantiated.
                 * It may be the case that the driver class may not be there
                 * i.e. there may be a packaged driver with the service class
                 * as implementation of java.sql.Driver but the actual class
                 * may be missing. In that case a java.util.ServiceConfigurationError
                 * will be thrown at runtime by the VM trying to locate
                 * and load the service.
                 *
                 * Adding a try catch block to catch those runtime errors
                 * if driver not available in classpath but it's
                 * packaged as service and that service is there in classpath.
                 */</span>
                <span class="hljs-keyword">try</span>{
                    <span class="hljs-comment">// åŠ è½½åˆ›å»ºæ‰€æœ‰Driver</span>
                    <span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
                        <span class="hljs-comment">// è§¦å‘Driverçš„ç±»åŠ è½½-&gt;åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºDriverå¯¹è±¡å¹¶æ”¾åˆ°DriverManager</span>
                        driversIterator.next();
                    }
                } <span class="hljs-keyword">catch</span>(Throwable t) {
                <span class="hljs-comment">// Do nothing</span>
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        });

        println(<span class="hljs-string">"DriverManager.initialize: jdbc.drivers = "</span> + drivers);

        <span class="hljs-keyword">if</span> (drivers == <span class="hljs-literal">null</span> || drivers.equals(<span class="hljs-string">""</span>)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// è§£æJVMå‚æ•°çš„jdbcé©±åŠ¨</span>
        String[] driversList = drivers.split(<span class="hljs-string">":"</span>);
        println(<span class="hljs-string">"number of Drivers:"</span> + driversList.length);
        <span class="hljs-keyword">for</span> (String aDriver : driversList) {
            <span class="hljs-keyword">try</span> {
                println(<span class="hljs-string">"DriverManager.Initialize: loading "</span> + aDriver);
                <span class="hljs-comment">// initialä¸ºture </span>
                <span class="hljs-comment">// è§¦å‘Driverçš„ç±»åŠ è½½-&gt;åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºDriverå¯¹è±¡å¹¶æ”¾åˆ°DriverManager</span>
                Class.forName(aDriver, <span class="hljs-literal">true</span>,
                        ClassLoader.getSystemClassLoader());
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                println(<span class="hljs-string">"DriverManager.Initialize: load failed: "</span> + ex);
            }
        }
    }

}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸»è¦æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>ä»ç³»ç»Ÿå˜é‡ä¸­è·å–æœ‰å…³é©±åŠ¨çš„å®šä¹‰ã€‚</li>
<li>ä½¿ç”¨SPIæ¥è·å–é©±åŠ¨çš„å®ç°ã€‚</li>
<li>éå†ä½¿ç”¨SPIè·å–åˆ°çš„å…·ä½“å®ç°ï¼Œå®ä¾‹åŒ–å„ä¸ªå®ç°ç±»ã€‚</li>
<li>æ ¹æ®ç¬¬ä¸€æ­¥è·å–åˆ°çš„é©±åŠ¨åˆ—è¡¨æ¥å®ä¾‹åŒ–å…·ä½“å®ç°ç±»ã€‚</li>
</ol>
<ul>
<li>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨SPIæ¥è·å–é©±åŠ¨çš„å®ç°ï¼Œå¯¹åº”çš„ä»£ç æ˜¯ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
</code></pre>
<p>è¿™é‡Œå°è£…äº†æ¥å£ç±»å‹å’Œç±»åŠ è½½å™¨ï¼Œå¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šéå†è·å–åˆ°çš„å…·ä½“å®ç°ï¼Œå®ä¾‹åŒ–å„ä¸ªå®ç°ç±»ï¼Œå¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();
<span class="hljs-comment">//éå†æ‰€æœ‰çš„é©±åŠ¨å®ç°</span>
<span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
    driversIterator.next();
}
</code></pre>
<p>åœ¨éå†çš„æ—¶å€™ï¼Œé¦–å…ˆè°ƒç”¨driversIterator.hasNext()æ–¹æ³•ï¼Œè¿™é‡Œä¼šæœç´¢classpathä¸‹ä»¥åŠjaråŒ…ä¸­æ‰€æœ‰çš„META-INF/servicesç›®å½•ä¸‹çš„java.sql.Driveræ–‡ä»¶ï¼Œå¹¶æ‰¾åˆ°æ–‡ä»¶ä¸­çš„å®ç°ç±»çš„åå­—ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰å®ä¾‹åŒ–å…·ä½“çš„å®ç°ç±»ï¼ˆServiceLoaderå…·ä½“çš„æºç å®ç°åœ¨ä¸‹é¢ï¼‰ã€‚</p>
<p>ç„¶åæ˜¯è°ƒç”¨driversIterator.next();æ–¹æ³•ï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®é©±åŠ¨åå­—å…·ä½“å®ä¾‹åŒ–å„ä¸ªå®ç°ç±»äº†ã€‚ç°åœ¨é©±åŠ¨å°±è¢«æ‰¾åˆ°å¹¶å®ä¾‹åŒ–äº†ã€‚</p>
<h3 data-id="heading-8">Common-Logging</h3>
<p>common-loggingï¼ˆä¹Ÿç§°Jakarta Commons Loggingï¼Œç¼©å†™ JCLï¼‰æ˜¯å¸¸ç”¨çš„æ—¥å¿—åº“é—¨é¢ï¼Œ ä½¿ç”¨äº†SPIçš„æ–¹å¼æ¥åŠ¨æ€åŠ è½½å’Œé…ç½®æ—¥å¿—å®ç°ã€‚è¿™ç§æœºåˆ¶å…è®¸åº“åœ¨è¿è¡Œæ—¶æ‰¾åˆ°åˆé€‚çš„æ—¥å¿—å®ç°ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç å…·ä½“çš„æ—¥å¿—åº“ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸‹å®ƒæ˜¯æ€ä¹ˆé€šè¿‡SPIè§£è€¦çš„ã€‚</p>
<p>é¦–å…ˆï¼Œæ—¥å¿—å®ä¾‹æ˜¯é€šè¿‡LogFactoryçš„getLog(String)æ–¹æ³•åˆ›å»ºçš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getLog</span><span class="hljs-params">(Class clazz)</span> <span class="hljs-keyword">throws</span> LogConfigurationException {
    <span class="hljs-keyword">return</span> getFactory().getInstance(clazz);
}
</code></pre>
<p>LogFatoryæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒè´Ÿè´£åŠ è½½å…·ä½“çš„æ—¥å¿—å®ç°ï¼ŒgetFactory()æ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> org.apache.commons.logging.LogFactory <span class="hljs-title function_">getFactory</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> LogConfigurationException {
    <span class="hljs-comment">// Identify the class loader we will be using</span>
    <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">contextClassLoader</span> <span class="hljs-operator">=</span> getContextClassLoaderInternal();

    <span class="hljs-keyword">if</span> (contextClassLoader == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// This is an odd enough situation to report about. This</span>
        <span class="hljs-comment">// output will be a nuisance on JDK1.1, as the system</span>
        <span class="hljs-comment">// classloader is null in that environment.</span>
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"Context classloader is null."</span>);
        }
    }

    <span class="hljs-comment">// Return any previously registered factory for this class loader</span>
    org.apache.commons.logging.<span class="hljs-type">LogFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> getCachedFactory(contextClassLoader);
    <span class="hljs-keyword">if</span> (factory != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> factory;
    }

    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
        logDiagnostic(
                <span class="hljs-string">"[LOOKUP] LogFactory implementation requested for the first time for context classloader "</span> +
                        objectId(contextClassLoader));
        logHierarchy(<span class="hljs-string">"[LOOKUP] "</span>, contextClassLoader);
    }

    <span class="hljs-comment">// classpathæ ¹ç›®å½•ä¸‹å¯»æ‰¾commons-logging.properties</span>
    <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> getConfigurationFile(contextClassLoader, FACTORY_PROPERTIES);

    <span class="hljs-comment">// Determine whether we will be using the thread context class loader to</span>
    <span class="hljs-comment">// load logging classes or not by checking the loaded properties file (if any).</span>
    <span class="hljs-comment">// classpathæ ¹ç›®å½•ä¸‹commons-logging.propertiesæ˜¯å¦é…ç½®use_tccl</span>
    <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">baseClassLoader</span> <span class="hljs-operator">=</span> contextClassLoader;
    <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">String</span> <span class="hljs-variable">useTCCLStr</span> <span class="hljs-operator">=</span> props.getProperty(TCCL_KEY);
        <span class="hljs-keyword">if</span> (useTCCLStr != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (Boolean.valueOf(useTCCLStr).booleanValue() == <span class="hljs-literal">false</span>) {
                baseClassLoader = thisClassLoader;
            }
        }
    }

    <span class="hljs-comment">// è¿™é‡ŒçœŸæ­£å¼€å§‹å†³å®šä½¿ç”¨å“ªä¸ªfactory</span>
    <span class="hljs-comment">// é¦–å…ˆï¼Œå°è¯•æŸ¥æ‰¾vmç³»ç»Ÿå±æ€§org.apache.commons.logging.LogFactoryï¼Œå…¶æ˜¯å¦æŒ‡å®šfactory</span>
    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
        logDiagnostic(<span class="hljs-string">"[LOOKUP] Looking for system property ["</span> + FACTORY_PROPERTY +
                <span class="hljs-string">"] to define the LogFactory subclass to use..."</span>);
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">factoryClass</span> <span class="hljs-operator">=</span> getSystemProperty(FACTORY_PROPERTY, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">if</span> (factoryClass != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] Creating an instance of LogFactory class '"</span> + factoryClass +
                        <span class="hljs-string">"' as specified by system property "</span> + FACTORY_PROPERTY);
            }
            factory = newFactory(factoryClass, baseClassLoader, contextClassLoader);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] No system property ["</span> + FACTORY_PROPERTY + <span class="hljs-string">"] defined."</span>);
            }
        }
    } <span class="hljs-keyword">catch</span> (SecurityException e) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] A security exception occurred while trying to create an"</span> +
                    <span class="hljs-string">" instance of the custom factory class"</span> + <span class="hljs-string">": ["</span> + trim(e.getMessage()) +
                    <span class="hljs-string">"]. Trying alternative implementations..."</span>);
        }
        <span class="hljs-comment">// ignore</span>
    } <span class="hljs-keyword">catch</span> (RuntimeException e) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] An exception occurred while trying to create an"</span> +
                    <span class="hljs-string">" instance of the custom factory class"</span> + <span class="hljs-string">": ["</span> +
                    trim(e.getMessage()) +
                    <span class="hljs-string">"] as specified by a system property."</span>);
        }
        <span class="hljs-keyword">throw</span> e;
    }

    <span class="hljs-comment">// ç¬¬äºŒï¼Œå°è¯•ä½¿ç”¨java spiæœåŠ¡å‘ç°æœºåˆ¶ï¼Œåœ¨META-INF/servicesä¸‹å¯»æ‰¾org.apache.commons.logging.LogFactoryå®ç°</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] Looking for a resource file of name ["</span> + SERVICE_ID +
                    <span class="hljs-string">"] to define the LogFactory subclass to use..."</span>);
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// META-INF/services/org.apache.commons.logging.LogFactory, SERVICE_ID</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> getResourceAsStream(contextClassLoader, SERVICE_ID);

            <span class="hljs-keyword">if</span> (is != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// This code is needed by EBCDIC and other strange systems.</span>
                <span class="hljs-comment">// It's a fix for bugs reported in xerces</span>
                BufferedReader rd;
                <span class="hljs-keyword">try</span> {
                    rd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is, <span class="hljs-string">"UTF-8"</span>));
                } <span class="hljs-keyword">catch</span> (java.io.UnsupportedEncodingException e) {
                    rd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));
                }

                <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassName</span> <span class="hljs-operator">=</span> rd.readLine();
                rd.close();

                <span class="hljs-keyword">if</span> (factoryClassName != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-string">""</span>.equals(factoryClassName)) {
                    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                        logDiagnostic(<span class="hljs-string">"[LOOKUP]  Creating an instance of LogFactory class "</span> +
                                factoryClassName +
                                <span class="hljs-string">" as specified by file '"</span> + SERVICE_ID +
                                <span class="hljs-string">"' which was present in the path of the context classloader."</span>);
                    }
                    factory = newFactory(factoryClassName, baseClassLoader, contextClassLoader);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// is == null</span>
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(<span class="hljs-string">"[LOOKUP] No resource file with name '"</span> + SERVICE_ID + <span class="hljs-string">"' found."</span>);
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            <span class="hljs-comment">// note: if the specified LogFactory class wasn't compatible with LogFactory</span>
            <span class="hljs-comment">// for some reason, a ClassCastException will be caught here, and attempts will</span>
            <span class="hljs-comment">// continue to find a compatible class.</span>
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(
                        <span class="hljs-string">"[LOOKUP] A security exception occurred while trying to create an"</span> +
                                <span class="hljs-string">" instance of the custom factory class"</span> +
                                <span class="hljs-string">": ["</span> + trim(ex.getMessage()) +
                                <span class="hljs-string">"]. Trying alternative implementations..."</span>);
            }
            <span class="hljs-comment">// ignore</span>
        }
    }

    <span class="hljs-comment">// ç¬¬ä¸‰ï¼Œå°è¯•ä»classpathæ ¹ç›®å½•ä¸‹çš„commons-logging.propertiesä¸­æŸ¥æ‰¾org.apache.commons.logging.LogFactoryå±æ€§æŒ‡å®šçš„factory</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(
                        <span class="hljs-string">"[LOOKUP] Looking in properties file for entry with key '"</span> + FACTORY_PROPERTY +
                                <span class="hljs-string">"' to define the LogFactory subclass to use..."</span>);
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">factoryClass</span> <span class="hljs-operator">=</span> props.getProperty(FACTORY_PROPERTY);
            <span class="hljs-keyword">if</span> (factoryClass != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(
                            <span class="hljs-string">"[LOOKUP] Properties file specifies LogFactory subclass '"</span> + factoryClass + <span class="hljs-string">"'"</span>);
                }
                factory = newFactory(factoryClass, baseClassLoader, contextClassLoader);

                <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> think about whether we need to handle exceptions from newFactory</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(<span class="hljs-string">"[LOOKUP] Properties file has no entry specifying LogFactory subclass."</span>);
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] No properties file available to determine"</span> + <span class="hljs-string">" LogFactory subclass from.."</span>);
            }
        }
    }

    <span class="hljs-comment">// æœ€åï¼Œä½¿ç”¨åå¤‡factoryå®ç°ï¼Œorg.apache.commons.logging.impl.LogFactoryImpl</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(
                    <span class="hljs-string">"[LOOKUP] Loading the default LogFactory implementation '"</span> + FACTORY_DEFAULT +
                            <span class="hljs-string">"' via the same classloader that loaded this LogFactory"</span> +
                            <span class="hljs-string">" class (ie not looking in the context classloader)."</span>);
        }

        factory = newFactory(FACTORY_DEFAULT, thisClassLoader, contextClassLoader);
    }

    <span class="hljs-keyword">if</span> (factory != <span class="hljs-literal">null</span>) {
        cacheFactory(contextClassLoader, factory);

        <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Enumeration</span> <span class="hljs-variable">names</span> <span class="hljs-operator">=</span> props.propertyNames();
            <span class="hljs-keyword">while</span> (names.hasMoreElements()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> (String) names.nextElement();
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> props.getProperty(name);
                factory.setAttribute(name, value);
            }
        }
    }

    <span class="hljs-keyword">return</span> factory;
}
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼ŒæŠ½è±¡ç±»LogFactoryåŠ è½½å…·ä½“å®ç°çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä»vmç³»ç»Ÿå±æ€§org.apache.commons.logging.LogFactory</li>
<li>ä½¿ç”¨SPIæœåŠ¡å‘ç°æœºåˆ¶ï¼Œå‘ç°org.apache.commons.logging.LogFactoryçš„å®ç°</li>
<li>æŸ¥æ‰¾classpathæ ¹ç›®å½•commons-logging.propertiesçš„org.apache.commons.logging.LogFactoryå±æ€§æ˜¯å¦æŒ‡å®šfactoryå®ç°</li>
<li>ä½¿ç”¨é»˜è®¤factoryå®ç°ï¼Œorg.apache.commons.logging.impl.LogFactoryImpl</li>
</ol>
<p>LogFactoryçš„getLog()æ–¹æ³•è¿”å›ç±»å‹æ˜¯org.apache.commons.logging.Logæ¥å£ï¼Œæä¾›äº†ä»traceåˆ°fatalæ–¹æ³•ã€‚å¯ä»¥ç¡®å®šï¼Œå¦‚æœæ—¥å¿—å®ç°æä¾›è€…åªè¦å®ç°è¯¥æ¥å£ï¼Œå¹¶ä¸”ä½¿ç”¨ç»§æ‰¿è‡ªorg.apache.commons.logging.LogFactoryçš„å­ç±»åˆ›å»ºLogï¼Œå¿…ç„¶å¯ä»¥æ„å»ºä¸€ä¸ªæ¾è€¦åˆçš„æ—¥å¿—ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-9">Springä¸­SPIæœºåˆ¶</h3>
<p>åœ¨springbootçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fframework%2Fspringboot%2Fprincipleofautomaticassembly.html" target="_blank" title="https://www.seven97.top/framework/springboot/principleofautomaticassembly.html" ref="nofollow noopener noreferrer">è‡ªåŠ¨è£…é…</a>è¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆä¼šåŠ è½½META-INF/spring.factoriesæ–‡ä»¶ï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å®ç°ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ¥å£å®šä¹‰</strong>ï¼š Spring å®šä¹‰äº†è®¸å¤šæœåŠ¡æ¥å£ï¼Œå¦‚ <code>org.springframework.boot.autoconfigure.EnableAutoConfiguration</code>ã€‚</li>
<li><strong>æœåŠ¡æä¾›è€…å®ç°</strong>ï¼š å„ç§å…·ä½“çš„æ¨¡å—å’Œåº“ä¼šæä¾›è¿™äº›æœåŠ¡æ¥å£çš„å®ç°ï¼Œå¦‚å„ç§è‡ªåŠ¨é…ç½®ç±»ã€‚</li>
<li><strong>æœåŠ¡æè¿°æ–‡ä»¶</strong>ï¼š åœ¨å®ç°æ¨¡å—çš„ JAR åŒ…ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ª <code>META-INF/spring.factories</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­åˆ—å‡ºäº†è¯¥ JAR åŒ…ä¸­å®ç°çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li>
<li><strong>æœåŠ¡åŠ è½½</strong>ï¼š Spring Boot åœ¨å¯åŠ¨æ—¶åŠ è½½ <code>spring.factories</code> æ–‡ä»¶ï¼Œå¹¶å®ä¾‹åŒ–è¿™äº›æ–‡ä»¶ä¸­åˆ—å‡ºçš„å®ç°ç±»ã€‚</li>
</ol>
<p>Spring Boot ä½¿ç”¨ <code>SpringFactoriesLoader</code> æ¥åŠ è½½ <code>spring.factories</code> æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰ç±»ï¼Œå¹¶å°†å®ƒä»¬æ³¨å†Œåˆ°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å®è¿™é‡Œä¸ä»…ä»…æ˜¯ä¼šå»ClassPathè·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œä¼šæ‰«ææ‰€æœ‰è·¯å¾„ä¸‹çš„JaråŒ…ï¼Œåªä¸è¿‡è¿™ä¸ªæ–‡ä»¶åªä¼šåœ¨Classpathä¸‹çš„jaråŒ…ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FACTORIES_RESOURCE_LOCATION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"META-INF/spring.factories"</span>;
<span class="hljs-comment">// spring.factoriesæ–‡ä»¶çš„æ ¼å¼ä¸ºï¼škey=value1,value2,value3</span>
<span class="hljs-comment">// ä»æ‰€æœ‰çš„jaråŒ…ä¸­æ‰¾åˆ°META-INF/spring.factoriesæ–‡ä»¶</span>
<span class="hljs-comment">// ç„¶åä»æ–‡ä»¶ä¸­è§£æå‡ºkey=factoryClassç±»åç§°çš„æ‰€æœ‰valueå€¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title function_">loadFactoryNames</span><span class="hljs-params">(Class&lt;?&gt; factoryClass, ClassLoader classLoader)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassName</span> <span class="hljs-operator">=</span> factoryClass.getName();
    <span class="hljs-comment">// å–å¾—èµ„æºæ–‡ä»¶çš„URL</span>
    Enumeration&lt;URL&gt; urls = (classLoader != <span class="hljs-literal">null</span> ? classLoader.getResources(FACTORIES_RESOURCE_LOCATION) : ClassLoader.getSystemResources(FACTORIES_RESOURCE_LOCATION));
    List&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    <span class="hljs-comment">// éå†æ‰€æœ‰çš„URL</span>
    <span class="hljs-keyword">while</span> (urls.hasMoreElements()) {
        <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> urls.nextElement();
        <span class="hljs-comment">// æ ¹æ®èµ„æºæ–‡ä»¶URLè§£æpropertiesæ–‡ä»¶ï¼Œå¾—åˆ°å¯¹åº”çš„ä¸€ç»„@Configurationç±»</span>
        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> PropertiesLoaderUtils.loadProperties(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlResource</span>(url));
        <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassNames</span> <span class="hljs-operator">=</span> properties.getProperty(factoryClassName);
        <span class="hljs-comment">// ç»„è£…æ•°æ®ï¼Œå¹¶è¿”å›</span>
        result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>é€šè¿‡ SPI æœºåˆ¶å’Œ <code>spring.factories</code> æ–‡ä»¶çš„é…åˆï¼ŒSpring Boot å®ç°äº†æ¨¡å—åŒ–å’Œè‡ªåŠ¨é…ç½®çš„èƒ½åŠ›ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡å®šä¹‰è‡ªåŠ¨é…ç½®ç±»å¹¶åœ¨ <code>spring.factories</code> æ–‡ä»¶ä¸­å£°æ˜å®ƒä»¬ï¼Œä»è€Œå®ç°æ¨¡å—çš„ç‹¬ç«‹å’Œæ¾è€¦åˆã€‚è¿™ç§æœºåˆ¶ä¸ä»…ç®€åŒ–äº†é…ç½®å’Œå¯åŠ¨è¿‡ç¨‹ï¼Œè¿˜æå‡äº†åº”ç”¨çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-10">SPI æœºåˆ¶é€šå¸¸æ€ä¹ˆä½¿ç”¨</h2>
<p>çœ‹å®Œä¸Šé¢çš„å‡ ä¸ªä¾‹å­è§£æï¼Œåº”è¯¥éƒ½èƒ½çŸ¥é“å¤§æ¦‚çš„æµç¨‹äº†ï¼š</p>
<ol>
<li>å®šä¹‰æ ‡å‡†ï¼šå®šä¹‰æ ‡å‡†ï¼Œå°±æ˜¯å®šä¹‰æ¥å£ã€‚æ¯”å¦‚æ¥å£java.sql.Driver</li>
<li>å…·ä½“å‚å•†æˆ–è€…æ¡†æ¶å¼€å‘è€…å®ç°ï¼šå‚å•†æˆ–è€…æ¡†æ¶å¼€å‘è€…å¼€å‘å…·ä½“çš„å®ç°ï¼š
åœ¨META-INF/servicesç›®å½•ä¸‹å®šä¹‰ä¸€ä¸ªåå­—ä¸ºæ¥å£å…¨é™å®šåçš„æ–‡ä»¶ï¼Œæ¯”å¦‚java.sql.Driveræ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯å…·ä½“çš„å®ç°åå­—ï¼Œæ¯”å¦‚me.cxis.sql.MyDriverã€‚å†™å…·ä½“çš„å®ç°me.cxis.sql.MyDriverï¼Œéƒ½æ˜¯å¯¹æ¥å£Driverçš„å®ç°ã€‚</li>
<li>å…·ä½“ä½¿ç”¨ï¼šå¼•ç”¨å…·ä½“å‚å•†çš„jaråŒ…æ¥å®ç°æˆ‘ä»¬çš„åŠŸèƒ½ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
<span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();
<span class="hljs-comment">//éå†</span>
<span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
    driversIterator.next();
    <span class="hljs-comment">//å¯ä»¥åšå…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>
}

</code></pre>
<ol start="4">
<li>ä½¿ç”¨è§„èŒƒï¼š</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa43475fdb5949c2bb6227e0f44cb443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=%2BVEvjRf9%2BRJes4bO7%2BmIYdMvXAg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">SPIæœºåˆ¶å®ç°åŸç†</h2>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š æ€ä¹ˆæ ·æ‰èƒ½åŠ è½½è¿™äº›SPIæ¥å£çš„å®ç°ç±»å‘¢ï¼ŒçœŸæ­£çš„åŸå› æ˜¯Javaçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fjava%2Fjvm%2F01-jvmbasic2-classloadingmechanism.html" target="_blank" title="https://www.seven97.top/java/jvm/01-jvmbasic2-classloadingmechanism.html" ref="nofollow noopener noreferrer">ç±»åŠ è½½æœºåˆ¶</a>ï¼ SPIæ¥å£å±äºjava rtæ ¸å¿ƒåŒ…ï¼Œåªèƒ½ç”±å¯åŠ¨ç±»åŠ è½½å™¨BootStrap classLoaderåŠ è½½ï¼Œè€Œç¬¬ä¸‰æ–¹jaråŒ…æ˜¯ç”¨æˆ·classPathè·¯å¾„ä¸‹ï¼Œæ ¹æ®ç±»åŠ è½½å™¨çš„å¯è§æ€§åŸåˆ™ï¼šå¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¿™äº›jaråŒ…ï¼Œä¹Ÿå°±æ˜¯æ²¡æ³•å‘ä¸‹å§”æ‰˜ï¼Œæ‰€ä»¥spiå¿…é¡»æ‰“ç ´è¿™ç§ä¼ ç»Ÿçš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Œé€šè¿‡è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æ¥åŠ è½½ç¬¬ä¸‰æ–¹jaråŒ…ä¸‹çš„spiæ¥å£å®ç°ç±»ï¼</p>
<p>JDKä¸­ServiceLoaderæ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//ServiceLoaderå®ç°äº†Iterableæ¥å£ï¼Œå¯ä»¥éå†æ‰€æœ‰çš„æœåŠ¡å®ç°è€…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceLoader</span>&lt;S&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;S&gt;{

    <span class="hljs-comment">//æŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„ç›®å½•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"META-INF/services/"</span>;

    <span class="hljs-comment">//è¡¨ç¤ºè¦è¢«åŠ è½½çš„æœåŠ¡çš„ç±»æˆ–æ¥å£</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;S&gt; service;

    <span class="hljs-comment">//è¿™ä¸ªClassLoaderç”¨æ¥å®šä½ï¼ŒåŠ è½½ï¼Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ClassLoader loader;

    <span class="hljs-comment">// è®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccessControlContext acc;

    <span class="hljs-comment">// ç¼“å­˜å·²ç»è¢«å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…ï¼ŒæŒ‰ç…§å®ä¾‹åŒ–çš„é¡ºåºå­˜å‚¨</span>
    <span class="hljs-keyword">private</span> LinkedHashMap&lt;String,S&gt; providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// è¿­ä»£å™¨</span>
    <span class="hljs-keyword">private</span> LazyIterator lookupIterator;

    <span class="hljs-comment">//é‡æ–°åŠ è½½ï¼Œå°±ç›¸å½“äºé‡æ–°åˆ›å»ºServiceLoaderäº†ï¼Œç”¨äºæ–°çš„æœåŠ¡æä¾›è€…å®‰è£…åˆ°æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœºä¸­çš„æƒ…å†µã€‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reload</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//æ¸…ç©ºç¼“å­˜ä¸­æ‰€æœ‰å·²å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…</span>
        providers.clear();
        <span class="hljs-comment">//æ–°å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ä¼šä»å¤´æŸ¥æ‰¾å’Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…</span>
        lookupIterator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyIterator</span>(service, loader);
    }

    <span class="hljs-comment">//ç§æœ‰æ„é€ å™¨</span>
    <span class="hljs-comment">//ä½¿ç”¨æŒ‡å®šçš„ç±»åŠ è½½å™¨å’ŒæœåŠ¡åˆ›å»ºæœåŠ¡åŠ è½½å™¨</span>
    <span class="hljs-comment">//å¦‚æœæ²¡æœ‰æŒ‡å®šç±»åŠ è½½å™¨ï¼Œä½¿ç”¨ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå°±æ˜¯åº”ç”¨ç±»åŠ è½½å™¨ã€‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ServiceLoader</span><span class="hljs-params">(Class&lt;S&gt; svc, ClassLoader cl)</span> {
        service = Objects.requireNonNull(svc, <span class="hljs-string">"Service interface cannot be null"</span>);
        loader = (cl == <span class="hljs-literal">null</span>) ? ClassLoader.getSystemClassLoader() : cl;
        acc = (System.getSecurityManager() != <span class="hljs-literal">null</span>) ? AccessController.getContext() : <span class="hljs-literal">null</span>;
        reload();
    }

    <span class="hljs-comment">//è§£æå¤±è´¥å¤„ç†çš„æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, String msg, Throwable cause)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConfigurationError</span>(service.getName() + <span class="hljs-string">": "</span> + msg,
                                            cause);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, String msg)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConfigurationError</span>(service.getName() + <span class="hljs-string">": "</span> + msg);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, URL u, <span class="hljs-type">int</span> line, String msg)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        fail(service, u + <span class="hljs-string">":"</span> + line + <span class="hljs-string">": "</span> + msg);
    }

    <span class="hljs-comment">//è§£ææœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶ä¸­çš„ä¸€è¡Œ</span>
    <span class="hljs-comment">//é¦–å…ˆå»æ‰æ³¨é‡Šæ ¡éªŒï¼Œç„¶åä¿å­˜</span>
    <span class="hljs-comment">//è¿”å›ä¸‹ä¸€è¡Œè¡Œå·</span>
    <span class="hljs-comment">//é‡å¤çš„é…ç½®é¡¹å’Œå·²ç»è¢«å®ä¾‹åŒ–çš„é…ç½®é¡¹ä¸ä¼šè¢«ä¿å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">parseLine</span><span class="hljs-params">(Class&lt;?&gt; service, URL u, BufferedReader r, <span class="hljs-type">int</span> lc, List&lt;String&gt; names)</span>
        	<span class="hljs-keyword">throws</span> IOException, ServiceConfigurationError{
        <span class="hljs-comment">//è¯»å–ä¸€è¡Œ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">ln</span> <span class="hljs-operator">=</span> r.readLine();
        <span class="hljs-keyword">if</span> (ln == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
        <span class="hljs-comment">//#å·ä»£è¡¨æ³¨é‡Šè¡Œ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">ci</span> <span class="hljs-operator">=</span> ln.indexOf(<span class="hljs-string">'#'</span>);
        <span class="hljs-keyword">if</span> (ci &gt;= <span class="hljs-number">0</span>) ln = ln.substring(<span class="hljs-number">0</span>, ci);
        ln = ln.trim();
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> ln.length();
        <span class="hljs-keyword">if</span> (n != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> ((ln.indexOf(<span class="hljs-string">' '</span>) &gt;= <span class="hljs-number">0</span>) || (ln.indexOf(<span class="hljs-string">'\t'</span>) &gt;= <span class="hljs-number">0</span>))
                fail(service, u, lc, <span class="hljs-string">"Illegal configuration-file syntax"</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">cp</span> <span class="hljs-operator">=</span> ln.codePointAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (!Character.isJavaIdentifierStart(cp))
                fail(service, u, lc, <span class="hljs-string">"Illegal provider-class name: "</span> + ln);
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> Character.charCount(cp); i &lt; n; i += Character.charCount(cp)) {
                cp = ln.codePointAt(i);
                <span class="hljs-keyword">if</span> (!Character.isJavaIdentifierPart(cp) &amp;&amp; (cp != <span class="hljs-string">'.'</span>))
                    fail(service, u, lc, <span class="hljs-string">"Illegal provider-class name: "</span> + ln);
            }
            <span class="hljs-keyword">if</span> (!providers.containsKey(ln) &amp;&amp; !names.contains(ln))
                names.add(ln);
        }
        <span class="hljs-keyword">return</span> lc + <span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">//è§£æé…ç½®æ–‡ä»¶ï¼Œè§£ææŒ‡å®šçš„urlé…ç½®æ–‡ä»¶</span>
    <span class="hljs-comment">//ä½¿ç”¨parseLineæ–¹æ³•è¿›è¡Œè§£æï¼Œæœªè¢«å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…ä¼šè¢«ä¿å­˜åˆ°ç¼“å­˜ä¸­å»</span>
    <span class="hljs-keyword">private</span> Iterator&lt;String&gt; <span class="hljs-title function_">parse</span><span class="hljs-params">(Class&lt;?&gt; service, URL u)</span> <span class="hljs-keyword">throws</span> ServiceConfigurationError{
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        ArrayList&lt;String&gt; names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">try</span> {
            in = u.openStream();
            r = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(in, <span class="hljs-string">"utf-8"</span>));
            <span class="hljs-type">int</span> <span class="hljs-variable">lc</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> ((lc = parseLine(service, u, r, lc, names)) &gt;= <span class="hljs-number">0</span>);
        }
        <span class="hljs-keyword">return</span> names.iterator();
    }

    <span class="hljs-comment">//æœåŠ¡æä¾›è€…æŸ¥æ‰¾çš„è¿­ä»£å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&lt;S&gt;{

        Class&lt;S&gt; service;<span class="hljs-comment">//æœåŠ¡æä¾›è€…æ¥å£</span>
        ClassLoader loader;<span class="hljs-comment">//ç±»åŠ è½½å™¨</span>
        Enumeration&lt;URL&gt; configs = <span class="hljs-literal">null</span>;<span class="hljs-comment">//ä¿å­˜å®ç°ç±»çš„url</span>
        Iterator&lt;String&gt; pending = <span class="hljs-literal">null</span>;<span class="hljs-comment">//ä¿å­˜å®ç°ç±»çš„å…¨å</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">nextName</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//è¿­ä»£å™¨ä¸­ä¸‹ä¸€ä¸ªå®ç°ç±»çš„å…¨å</span>

        <span class="hljs-keyword">private</span> <span class="hljs-title function_">LazyIterator</span><span class="hljs-params">(Class&lt;S&gt; service, ClassLoader loader)</span> {
            <span class="hljs-built_in">this</span>.service = service;
            <span class="hljs-built_in">this</span>.loader = loader;
        }

        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNextService</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (nextName != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (configs == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> PREFIX + service.getName();
                    <span class="hljs-keyword">if</span> (loader == <span class="hljs-literal">null</span>)
                        configs = ClassLoader.getSystemResources(fullName);
                    <span class="hljs-keyword">else</span>
                        configs = loader.getResources(fullName);
                }
            }
            <span class="hljs-keyword">while</span> ((pending == <span class="hljs-literal">null</span>) || !pending.hasNext()) {
                <span class="hljs-keyword">if</span> (!configs.hasMoreElements()) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                pending = parse(service, configs.nextElement());
            }
            nextName = pending.next();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">private</span> S <span class="hljs-title function_">nextService</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (!hasNextService())
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();
            <span class="hljs-type">String</span> <span class="hljs-variable">cn</span> <span class="hljs-operator">=</span> nextName;
            nextName = <span class="hljs-literal">null</span>;
            Class&lt;?&gt; c = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span> {
                c = Class.forName(cn, <span class="hljs-literal">false</span>, loader);
            }
            <span class="hljs-keyword">if</span> (!service.isAssignableFrom(c)) {
                fail(service, <span class="hljs-string">"Provider "</span> + cn  + <span class="hljs-string">" not a subtype"</span>);
            }
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">S</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> service.cast(c.newInstance());
                providers.put(cn, p);
                <span class="hljs-keyword">return</span> p;
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (acc == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> hasNextService();
            } <span class="hljs-keyword">else</span> {
                PrivilegedAction&lt;Boolean&gt; action = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;Boolean&gt;() {
                    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">run</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> hasNextService(); }
                };
                <span class="hljs-keyword">return</span> AccessController.doPrivileged(action, acc);
            }
        }

        <span class="hljs-keyword">public</span> S <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (acc == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> nextService();
            } <span class="hljs-keyword">else</span> {
                PrivilegedAction&lt;S&gt; action = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;S&gt;() {
                    <span class="hljs-keyword">public</span> S <span class="hljs-title function_">run</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> nextService(); }
                };
                <span class="hljs-keyword">return</span> AccessController.doPrivileged(action, acc);
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();
        }

    }

    <span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
    <span class="hljs-comment">//è¿”å›éå†æœåŠ¡æä¾›è€…çš„è¿­ä»£å™¨</span>
    <span class="hljs-comment">//ä»¥æ‡’åŠ è½½çš„æ–¹å¼åŠ è½½å¯ç”¨çš„æœåŠ¡æä¾›è€…</span>
    <span class="hljs-comment">//æ‡’åŠ è½½çš„å®ç°æ˜¯ï¼šè§£æé…ç½®æ–‡ä»¶å’Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…çš„å·¥ä½œç”±è¿­ä»£å™¨æœ¬èº«å®Œæˆ</span>
    <span class="hljs-keyword">public</span> Iterator&lt;S&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;S&gt;() {
            <span class="hljs-comment">//æŒ‰ç…§å®ä¾‹åŒ–é¡ºåºè¿”å›å·²ç»ç¼“å­˜çš„æœåŠ¡æä¾›è€…å®ä¾‹</span>
            Iterator&lt;Map.Entry&lt;String,S&gt;&gt; knownProviders
                = providers.entrySet().iterator();

            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">if</span> (knownProviders.hasNext())
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">return</span> lookupIterator.hasNext();
            }

            <span class="hljs-keyword">public</span> S <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">if</span> (knownProviders.hasNext())
                    <span class="hljs-keyword">return</span> knownProviders.next().getValue();
                <span class="hljs-keyword">return</span> lookupIterator.next();
            }

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();
            }

        };
    }

    <span class="hljs-comment">//ä¸ºæŒ‡å®šçš„æœåŠ¡ä½¿ç”¨æŒ‡å®šçš„ç±»åŠ è½½å™¨æ¥åˆ›å»ºä¸€ä¸ªServiceLoader</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">load</span><span class="hljs-params">(Class&lt;S&gt; service, ClassLoader loader)</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceLoader</span>&lt;&gt;(service, loader);
    }

    <span class="hljs-comment">//ä½¿ç”¨çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ç±»åŠ è½½å™¨æ¥åˆ›å»ºServiceLoader</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">load</span><span class="hljs-params">(Class&lt;S&gt; service)</span> {
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> Thread.currentThread().getContextClassLoader();
        <span class="hljs-keyword">return</span> ServiceLoader.load(service, cl);
    }

    <span class="hljs-comment">//ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ä¸ºæŒ‡å®šçš„æœåŠ¡åˆ›å»ºServiceLoader</span>
    <span class="hljs-comment">//åªèƒ½æ‰¾åˆ°å¹¶åŠ è½½å·²ç»å®‰è£…åˆ°å½“å‰Javaè™šæ‹Ÿæœºä¸­çš„æœåŠ¡æä¾›è€…ï¼Œåº”ç”¨ç¨‹åºç±»è·¯å¾„ä¸­çš„æœåŠ¡æä¾›è€…å°†è¢«å¿½ç•¥</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">loadInstalled</span><span class="hljs-params">(Class&lt;S&gt; service)</span> {
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> ClassLoader.getSystemClassLoader();
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">while</span> (cl != <span class="hljs-literal">null</span>) {
            prev = cl;
            cl = cl.getParent();
        }
        <span class="hljs-keyword">return</span> ServiceLoader.load(service, prev);
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"java.util.ServiceLoader["</span> + service.getName() + <span class="hljs-string">"]"</span>;
    }

}
</code></pre>
<ol>
<li><strong>é¦–å…ˆ</strong>ï¼ŒServiceLoaderå®ç°äº†Iterableæ¥å£ï¼Œæ‰€ä»¥å®ƒæœ‰è¿­ä»£å™¨çš„å±æ€§ï¼Œè¿™é‡Œä¸»è¦éƒ½æ˜¯å®ç°äº†è¿­ä»£å™¨çš„ hasNext å’Œ next æ–¹æ³•ã€‚è¿™é‡Œä¸»è¦éƒ½æ˜¯è°ƒç”¨çš„lookupIteratorçš„ç›¸åº”hasNextå’Œnextæ–¹æ³•ï¼ŒlookupIteratoræ˜¯æ‡’åŠ è½½è¿­ä»£å™¨ã€‚</li>
<li><strong>å…¶æ¬¡</strong>ï¼ŒLazyIterator ä¸­çš„ hasNext æ–¹æ³•ï¼Œé™æ€å˜é‡PREFIXå°±æ˜¯â€META-INF/services/â€ç›®å½•ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨classpathä¸‹çš„META-INF/services/ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ªä»¥æœåŠ¡æ¥å£å‘½åçš„æ–‡ä»¶ã€‚</li>
<li><strong>æœ€å</strong>ï¼Œé€šè¿‡åå°„æ–¹æ³•Class.forName()åŠ è½½ç±»å¯¹è±¡ï¼Œå¹¶ç”¨newInstanceæ–¹æ³•å°†ç±»å®ä¾‹åŒ–ï¼Œå¹¶æŠŠå®ä¾‹åŒ–åçš„ç±»ç¼“å­˜åˆ°providerså¯¹è±¡ä¸­ï¼Œ(LinkedHashMap&lt;String,S&gt;ç±»å‹ï¼‰ç„¶åè¿”å›å®ä¾‹å¯¹è±¡ã€‚</li>
</ol>
<p>æ‰€ä»¥å¯ä»¥çœ‹åˆ°ServiceLoaderä¸æ˜¯å®ä¾‹åŒ–ä»¥åï¼Œå°±å»è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å…·ä½“å®ç°ï¼Œå¹¶è¿›è¡Œå®ä¾‹åŒ–ã€‚è€Œæ˜¯ç­‰åˆ°ä½¿ç”¨è¿­ä»£å™¨å»éå†çš„æ—¶å€™ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶å»è§£æï¼Œè°ƒç”¨hasNextæ–¹æ³•çš„æ—¶å€™ä¼šå»åŠ è½½é…ç½®æ–‡ä»¶è¿›è¡Œè§£æï¼Œè°ƒç”¨nextæ–¹æ³•çš„æ—¶å€™è¿›è¡Œå®ä¾‹åŒ–å¹¶ç¼“å­˜ã€‚</p>
<p>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶åªä¼šåŠ è½½ä¸€æ¬¡ï¼ŒæœåŠ¡æä¾›è€…ä¹Ÿåªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¯ä½¿ç”¨reloadæ–¹æ³•ã€‚</p>
<h2 data-id="heading-12">JDK SPIæœºåˆ¶çš„ç¼ºé™·</h2>
<p>é€šè¿‡ä¸Šé¢çš„è§£æï¼Œå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨SPIæœºåˆ¶çš„ç¼ºé™·ï¼š</p>
<ul>
<li>
<p>è·å–æŸä¸ªå®ç°ç±»çš„æ–¹å¼ä¸å¤Ÿçµæ´»ï¼Œåªèƒ½é€šè¿‡ Iterator å½¢å¼è·å–ï¼Œä¸èƒ½æ ¹æ®æŸä¸ªå‚æ•°æ¥è·å–å¯¹åº”çš„å®ç°ç±»ã€‚å¦‚æœä¸æƒ³ç”¨æŸäº›å®ç°ç±»ï¼Œæˆ–è€…æŸäº›ç±»å®ä¾‹åŒ–å¾ˆè€—æ—¶ï¼Œå®ƒä¹Ÿè¢«è½½å…¥å¹¶å®ä¾‹åŒ–äº†ï¼Œè¿™å°±é€ æˆäº†æµªè´¹ã€‚</p>
</li>
<li>
<p>å¤šä¸ªå¹¶å‘å¤šçº¿ç¨‹ä½¿ç”¨ ServiceLoader ç±»çš„å®ä¾‹æ˜¯ä¸å®‰å…¨çš„</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºNettyçš„WebSocketæœåŠ¡ç«¯]]></title>    <link>https://juejin.cn/post/7594337566722146314</link>    <guid>https://juejin.cn/post/7594337566722146314</guid>    <pubDate>2026-01-13T01:10:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594337566722146314" data-draft-id="7594383365417680942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºNettyçš„WebSocketæœåŠ¡ç«¯"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-13T01:10:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºNettyçš„WebSocketæœåŠ¡ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:10:05.000Z" title="Tue Jan 13 2026 01:10:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/273e78394c7642f7b75ef444c3b5d64f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=FMn3orGLbdMEIUSXZyCHMB3BypY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>å‰é¢ç”¨äº†ä¸¤èŠ‚å†…å®¹ä»‹ç»äº†åŸºäºNettyçš„TCPçš„Socketçš„ç›¸å…³å†…å®¹ã€‚è¿™ä¸€èŠ‚å¼€å§‹æˆ‘ä»¬ä»‹ç»åŸºäºNettyçš„WebSocketçš„ç›¸å…³å†…å®¹ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æŒ‰ç…§æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ–¹å¼åˆ†åˆ«ä»‹ç»ã€‚æœ¬èŠ‚æˆ‘ä»¬ä»‹ç»WebSocketçš„æœåŠ¡ç«¯ã€‚</p>
<h2 data-id="heading-1">02 ç¤ºä¾‹ä»£ç </h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketServer</span> {

    <span class="hljs-meta">@Getter</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">ChannelGroup</span> <span class="hljs-variable">channelGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultChannelGroup</span>(GlobalEventExecutor.INSTANCE);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">bossGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();
        <span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">workGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();

        <span class="hljs-type">ServerBootstrap</span> <span class="hljs-variable">serverBootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerBootstrap</span>();
        serverBootstrap.group(bossGroup, workGroup);
        serverBootstrap.channel(NioServerSocketChannel.class);
        serverBootstrap.childHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>&lt;SocketChannel&gt;(){

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(SocketChannel socketChannel)</span> <span class="hljs-keyword">throws</span> Exception {
                <span class="hljs-type">ChannelPipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> socketChannel.pipeline();
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpServerCodec</span>());
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpObjectAggregator</span>(<span class="hljs-number">65535</span>));
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketServerProtocolHandler</span>(<span class="hljs-string">"/testWs"</span>));
                <span class="hljs-comment">// è‡ªå®šä¹‰çš„handlerï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</span>
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebBusinessHandler</span>(channelGroup));
            }
        });

        <span class="hljs-comment">// é…ç½®å®Œæˆï¼Œå¼€å§‹ç»‘å®šserverï¼Œé€šè¿‡è°ƒç”¨syncåŒæ­¥æ–¹æ³•é˜»å¡ç›´åˆ°ç»‘å®šæˆåŠŸ</span>
        <span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">channelFuture</span> <span class="hljs-operator">=</span> serverBootstrap.bind(<span class="hljs-number">9090</span>).sync();
        log.info(<span class="hljs-string">"Server started and listen on:{}"</span>,channelFuture.channel().localAddress());
        <span class="hljs-comment">// å¯¹å…³é—­é€šé“è¿›è¡Œç›‘å¬</span>
        channelFuture.channel().closeFuture().sync();
    }
}
</code></pre>
<h3 data-id="heading-2">2.1 å¼•å¯¼ç±»</h3>
<p>å¼•å¯¼ç±»åŒæ ·æ˜¯<code>io.netty.bootstrap.ServerBootstrap</code>ï¼Œå’ŒTCPåè®®çš„æœåŠ¡ç«¯ä¸€æ ·ï¼Œä½†æ˜¯ç»†èŠ‚ä¸åŒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">bossGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();
<span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">workGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();

<span class="hljs-type">ServerBootstrap</span> <span class="hljs-variable">serverBootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerBootstrap</span>();
serverBootstrap.group(bossGroup, workGroup);
serverBootstrap.channel(NioServerSocketChannel.class);
</code></pre>
<p>ä¿æ´»çš„é…ç½®ä¸€èˆ¬ä¼šæœ‰å¿ƒè·³çš„ä»£æ›¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿå°±æ²¡æœ‰è¦è®¾ç½®äº†ã€‚çº¿ç¨‹ç»„å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®ï¼Œä¸€ä¸ªæ¥æ”¶ä»»åŠ¡ï¼Œä¸€ä¸ªå¤„ç†ä»»åŠ¡åˆ†å·¥åä½œã€‚</p>
<h3 data-id="heading-3">2.2 ç¼–è§£ç å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ChannelPipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> socketChannel.pipeline();
pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpServerCodec</span>());
pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpObjectAggregator</span>(<span class="hljs-number">65535</span>));
pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketServerProtocolHandler</span>(<span class="hljs-string">"/testWs"</span>));
<span class="hljs-comment">// è‡ªå®šä¹‰çš„handlerï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</span>
pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebBusinessHandler</span>(channelGroup));
</code></pre>
<p>ç¼–è§£ç åŒæ ·æ˜¯WebSocketä¸­çš„é‡è¦é…ç½®ç±»ã€‚<code>WebSocket</code>æ¡æ‰‹é˜¶æ®µéœ€è¦éµå®ˆ<code>HTTP</code>åè®®ï¼Œè‡ªç„¶å°‘ä¸äº†è¯·æ±‚è¯·æ±‚çš„è§£ç ä»¥åŠå“åº”çš„è§£ç ã€‚Nettyæ¡†æ¶æœ¬èº«å°±æä¾›äº†è¿™æ ·çš„ç¼–è§£ç å™¨ï¼š</p>
<ul>
<li><code>io.netty.handler.codec.http.HttpRequestDecoder</code>ï¼šè¯·æ±‚è§£ç å™¨</li>
<li><code>io.netty.handler.codec.http.HttpResponseEncoder</code>ï¼šå“åº”ç¼–ç å™¨</li>
</ul>
<p>é…ç½®è¿™æ ·çš„ç¼–è§£ç å™¨è‡ªç„¶æ²¡æœ‰é—®é¢˜ã€‚ç„¶è€ŒNettyæ¡†æ¶è¿˜æä¾›äº†æ›´åŠ ç®€ä¾¿çš„äºŒåˆä¸€ç¼–è§£ç å™¨ï¼š</p>
<ul>
<li><code>io.netty.handler.codec.http.HttpServerCodec</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecc185516cbc4f71855fef71a27fc8a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=n3YSCX%2FWKLenhaIGA5XyKAeSf8s%3D" alt="" loading="lazy"/></p>
<p>æ³¨é‡Šä¸­å·²ç»è¯´æ˜<code>HttpServerCodec</code>æ˜¯<code>HttpRequestDecoder</code>å’Œ<code>HttpResponseEncoder</code>çš„ç»“åˆã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥ç”¨å®ƒå³å¯ã€‚</p>
<p>è§£ç ä¹‹åçš„æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><code>HttpMessage</code>ï¼šåŒ…å«HTTPè¯·æ±‚çš„é€šç”¨ä¿¡æ¯</li>
<li><code>LastHttpContent</code>ï¼šæœ€æ–°å…·æœ‰æ ‡è®°çš„<code>HttpContent</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d7dd2afa2c44f60ad7255e748148164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=meGf02r4cwC6tsQSSmC63YgqkNY%3D" alt="" loading="lazy"/></p>
<p><code>io.netty.handler.codec.http.HttpObjectAggregator</code>æ˜¯ä¸€ä¸ªHTTPèšåˆå™¨ï¼Œå¯ä»¥å°†<code>HttpMessage</code>å’Œ<code>HttpContent</code>èšåˆæˆ<code>FullHttpRequest</code>æˆ–<code>FullHttpResponse</code>ã€‚</p>
<p>æ¡ˆä¾‹ä¹Ÿç»™é™¤äº†ç”¨åœ¨<code>HttpServerCodec</code>ä¹‹åã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f3de8b6ed8141f9be0f55fcc4d7b7b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=t%2F0h6KEmcob3y5ap9BF8EoBz4ec%3D" alt="" loading="lazy"/></p>
<p><code>io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler</code>ä¸“é—¨å¤„ç†WebSocketæ¡æ‰‹å’Œå¸§ï¼Œå‚æ•°è¡¨ç¤ºWebSocketè·¯å¾„ã€‚</p>
<p>è¿™é‡Œæ‰€è¯´çš„å¸§å°±æ˜¯<code>WebSocketFrame</code>ï¼Œä¸»è¦å¸¸ç”¨çš„å¸§ï¼š</p>
<ul>
<li><code>TextWebSocketFrame</code>ï¼šå¤„ç†æ–‡æœ¬</li>
<li><code>PingWebSocketFrame</code>ï¼šæ¡æ‰‹è¯·æ±‚</li>
<li><code>PongWebSocketFrame</code>ï¼šæ¡æ‰‹å“åº”</li>
<li><code>BinaryWebSocketFrame</code>ï¼šå¤„ç†äºŒè¿›åˆ¶</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0902fa4bd74c4d6b9aa65ff8f1737cdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=cmg4nuwOWiGk3HXfTQl0yAMzRt8%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯<code>TextWebSocketFrame</code>æ–‡æœ¬å¸§ã€‚</p>
<h3 data-id="heading-4">2.3 è‡ªå®šä¹‰å¤„ç†å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebBusinessHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SimpleChannelInboundHandler</span>&lt;TextWebSocketFrame&gt; {

    <span class="hljs-keyword">private</span> ChannelGroup channelGroup;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WebBusinessHandler</span><span class="hljs-params">(ChannelGroup channelGroup)</span> {
        <span class="hljs-built_in">this</span>.channelGroup = channelGroup;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlerAdded</span><span class="hljs-params">(ChannelHandlerContext ctx)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// å»ºç«‹å®¢æˆ·ç«¯</span>
        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> ctx.channel();
        log.info(<span class="hljs-string">"å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ï¼šchannelId={}"</span>, channel.id());
        channelGroup.add(channel);

    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlerRemoved</span><span class="hljs-params">(ChannelHandlerContext ctx)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ–­å¼€é“¾æ¥</span>
        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> ctx.channel();
        log.info(<span class="hljs-string">"å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼šchannelId={}"</span>, channel.id());
        channelGroup.remove(channel);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead0</span><span class="hljs-params">(ChannelHandlerContext ctx, TextWebSocketFrame msg)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ¥å—æ¶ˆæ¯</span>
        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> ctx.channel();
        log.info(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªé€šé“channelId[{}]å‘é€çš„æ¶ˆæ¯ï¼š{}"</span>, channel.id(), msg.text());

        <span class="hljs-comment">// å¹¿æ’­é€šçŸ¥æ‰€æœ‰çš„å®¢æˆ·ç«¯</span>
        channelGroup.writeAndFlush(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextWebSocketFrame</span>(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªchannelId["</span> + channel.id() + <span class="hljs-string">"]å‘é€çš„æ¶ˆæ¯ï¼š"</span> + msg.text() + <span class="hljs-string">"123_"</span>));
    }
}
</code></pre>
<p>é‡Œé¢çš„æ–¹æ³•å’ŒTCPåè®®çš„ä¸€è‡´ã€‚ä½†æ˜¯è¦è¯´æ˜çš„å°±æ˜¯é‡Œé¢çš„å‚æ•°</p>
<p><code>io.netty.channel.group.ChannelGroup</code></p>
<p>è¿™æ˜¯ä¸€ä¸ªChannelçš„é€šé“ç»„ï¼Œç”¨æ¥ç®¡ç†æ‰€æœ‰çš„é€šé“ï¼ŒåŒ…æ‹¬é€šé“çš„æ–°å¢ã€å‰”é™¤ä»¥åŠæ¶ˆæ¯çš„å‘é€ã€‚</p>
<p><code>SimpleChannelInboundHandler</code>çš„æ³›å‹æˆ‘ä»¬é™åˆ¶ä¸º<code>TextWebSocketFrame</code>ï¼Œå¦åˆ™è·å–åˆ°çš„æ¶ˆæ¯å°±æ˜¯<code>FullHttpRequest</code>ç±»å‹ã€‚</p>
<p>æ¶ˆæ¯å‘é€æ—¶ï¼ŒåŒæ ·ä½¿ç”¨çš„<code>TextWebSocketFrame</code>æ–‡æœ¬å¸§ã€‚</p>
<h3 data-id="heading-5">2.4 å…¶ä»–ç¼–è§£ç </h3>
<p>åœ¨<code>HttpServerCodec</code>å’Œ<code>HttpObjectAggregator</code>ä¹‹é—´è¿˜å¯ä»¥åŠ å…¥ä¸¤ä¸ªå¤„ç†å™¨ï¼š</p>
<ul>
<li><code>ObjectEncoder</code></li>
<li><code>ChunkedWriteHandler</code></li>
</ul>
<p><code>ObjectEncoder</code>æ˜¯ä¸ºäº†å°†<code>Java</code>å¯¹è±¡åºåˆ—åŒ–æˆ<code>ByteBuf</code>ã€‚</p>
<p><code>ChunkedWriteHandler</code>å¢åŠ äº†å¯¹å¼‚æ­¥å†™å…¥å¤§å‹æ•°æ®æµçš„æ”¯æŒï¼Œæ—¢ä¸ä¼šèŠ±è´¹å¤§é‡å†…å­˜ï¼Œä¹Ÿä¸ä¼šè·å¾—<code>OutOfMemoryError</code>ã€‚</p>
<h3 data-id="heading-6">2.5 ç»‘å®šç«¯å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é…ç½®å®Œæˆï¼Œå¼€å§‹ç»‘å®šserverï¼Œé€šè¿‡è°ƒç”¨syncåŒæ­¥æ–¹æ³•é˜»å¡ç›´åˆ°ç»‘å®šæˆåŠŸ</span>
<span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">channelFuture</span> <span class="hljs-operator">=</span> serverBootstrap.bind(<span class="hljs-number">9090</span>).sync();
log.info(<span class="hljs-string">"Server started and listen on:{}"</span>,channelFuture.channel().localAddress());
<span class="hljs-comment">// å¯¹å…³é—­é€šé“è¿›è¡Œç›‘å¬</span>
channelFuture.channel().closeFuture().sync();
</code></pre>
<p>è¿™ä¸ªä¹‹å‰å·²ç»è®²è¿‡ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<h2 data-id="heading-7">03 æµ‹è¯•</h2>
<p>æµ‹è¯•çš„ä¹‹åï¼Œæˆ‘ä»¬é‡‡ç”¨åœ¨çº¿WebSocketkå®¢æˆ·ç«¯ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebfem.com%2Ftools%2Fws%2Findex.html" target="_blank" title="https://webfem.com/tools/ws/index.html" ref="nofollow noopener noreferrer">webfem.com/tools/ws/inâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/361ffaa92f874102b4166bd97fff30b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=W6yB0R7fBkJ%2Bfu4igCm6ra3pPfM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.1 è¯•é”™01</h3>
<p>å› ä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨è‡ªå®šä¹‰å¤„ç†å™¨çš„æ³›å‹æ˜¯<code>TextWebSocketFrame</code>ï¼Œæˆ‘ä»¬æ”¹æˆ<code>Object</code>ï¼Œçœ‹çœ‹é»˜è®¤çš„ç±»å‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå‘é€æ•°æ®æˆ‘ä»¬ä¹Ÿé‡‡ç”¨ç›´æ¥å‘é€çš„å½¢å¼ï¼Œçœ‹çœ‹èƒ½å¦æˆåŠŸï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead0</span><span class="hljs-params">(ChannelHandlerContext ctx, Object msg)</span> <span class="hljs-keyword">throws</span> Exception {
    log.info(<span class="hljs-string">"msgç±»å‹:{}"</span>, msg.getClass());
    <span class="hljs-comment">// æ¥å—æ¶ˆæ¯</span>
    <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> ctx.channel();
    log.info(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªé€šé“channelId[{}]å‘é€çš„æ¶ˆæ¯ï¼š{}"</span>, channel.id(), msg);

    <span class="hljs-comment">// å¹¿æ’­é€šçŸ¥æ‰€æœ‰çš„å®¢æˆ·ç«¯</span>
    channelGroup.writeAndFlush(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªchannelId["</span> + channel.id() + <span class="hljs-string">"]å‘é€çš„æ¶ˆæ¯ï¼š"</span> + msg + <span class="hljs-string">"123_"</span>);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c11b5eaac2ea42c6912b94603ae569dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=zzKMPnK63HCTDTsjZCaKnntLFZg%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‘å‡ºå»çš„æ¶ˆæ¯æ²¡æœ‰å“åº”ã€‚æ‰“å°<code>Msg</code>ç±»å‹ç¡®å®æ˜¯<code>io.netty.handler.codec.http.websocketx.TextWebSocketFrame</code>ã€‚æœåŠ¡ç«¯åƒå®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯å®¢æˆ·ç«¯ä¹Ÿæ²¡æœ‰æ”¶åˆ°ã€‚</p>
<h3 data-id="heading-9">3.2 è¯•é”™02</h3>
<p>æˆ‘ä»¬çŸ¥é“ç¼–è§£ç æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚æœ‰æ²¡æœ‰å’Œæˆ‘ä¸€æ ·ï¼Œæœ‰è¿™æ ·çš„ç–‘é—®:</p>
<p><code>WebSocketServerProtocolHandler</code>æœ‰æ²¡æœ‰å¯èƒ½ä¸å—é¡ºåºçš„å½±å“ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬æ”¹å˜ä¸€ä¸‹è¯•è¯•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65c045c5f4b5431999cf8965862d33f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=kFUxEySdsXQkVkps%2Fc36b4SCYew%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43c0de8d42a94bd0948c0956f1fb73c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=HsFKnjf5T6T4wESN6WKCQodMT8A%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fed0571328be42aba536d373a852f67d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768871404&amp;x-signature=ZBIjKIeySPxF8qi0AwcqMLd8U4o%3D" alt="" loading="lazy"/></p>
<p>ç»“æœè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œä»æŠ¥é”™ä¿¡æ¯æ¥çœ‹ï¼Œ<code>WebSocketServerProtocolHandler</code>ä¸ä»…æä¾›äº†è¿æ¥çš„è·¯å¾„ï¼Œè¿˜å¯¹<code>ByteBuf</code>åšäº†ä¸€å®šçš„è½¬åŒ–ã€‚é¡ºåºä¸å¯å¦„åŠ¨ã€‚</p>
<h2 data-id="heading-10">04 å°ç»“</h2>
<p>åˆ°è¿™é‡ŒWebSocketçš„æœåŠ¡ç«¯çš„å†…å®¹å°±å·®ä¸å¤šäº†ï¼Œæœ¬èŠ‚çš„å®¢æˆ·ç«¯é‡‡ç”¨äº†ç½‘ä¸Šåœ¨çº¿å·¥å…·ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†é€šè¿‡ä¸¤ç§æ–¹å¼æ‰‹æ“å®¢æˆ·ç«¯è¿æ¥æˆ‘ä»¬çš„<code>WebSocket</code>æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7594576956420079642</link>    <guid>https://juejin.cn/post/7594576956420079642</guid>    <pubDate>2026-01-13T06:08:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594576956420079642" data-draft-id="7594415509607301166" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-13T06:08:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:08:39.000Z" title="Tue Jan 13 2026 06:08:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¯•æºæ³‰</p>
<h2 data-id="heading-0"><strong>å¼•è¨€</strong></h2>
<p>æ¶ˆæ¯é˜Ÿåˆ—çš„å­˜å‚¨æ¶æ„æ˜¯å†³å®šå…¶å¯é æ€§ã€ååé‡ã€å»¶è¿Ÿæ€§èƒ½çš„æ ¸å¿ƒå› ç´ ï¼Œç›´æ¥å½±å“ä¸šåŠ¡åœºæ™¯é€‚é…èƒ½åŠ›ã€‚æœ¬æ–‡èšç„¦ä¸‰æ¬¾ä¸»æµæ¶ˆæ¯é˜Ÿåˆ— â€”â€”Kafkaï¼ˆLinkedIn å¼€æºï¼Œä¾§é‡é«˜ååï¼‰ã€RocketMQï¼ˆé˜¿é‡Œå¼€æºï¼Œé‡‘èçº§ç‰¹æ€§çªå‡ºï¼‰ã€JMQï¼ˆäº¬ä¸œå¼€æºï¼Œä¾§é‡é«˜å¯ç”¨ä¸çµæ´»æ€§ï¼‰ï¼Œä»å­˜å‚¨æ¨¡å‹ã€æ•°æ®ç»„ç»‡ã€ç´¢å¼•è®¾è®¡ç­‰ç»´åº¦å±•å¼€æ·±åº¦å¯¹æ¯”ï¼Œä¸ºæŠ€æœ¯é€‰å‹ä¸æ¶æ„ä¼˜åŒ–æä¾›å‚è€ƒã€‚â€‹</p>
<p>æœ¬æ–‡å°†ä»æ¦‚å¿µè¾¨æå‡ºå‘ï¼Œç³»ç»Ÿæ‹†è§£ä¸»æµå­˜å‚¨æ¨¡å‹ä¸å­˜å‚¨å¼•æ“çš„è®¾è®¡é€»è¾‘ï¼Œå¯¹æ¯” JMQã€Kafkaã€RocketMQçš„æŠ€æœ¯é€‰å‹å·®å¼‚ä¸æ¶æ„è®¾è®¡ã€‚â€‹</p>
<h2 data-id="heading-1"><strong>ä¸€ã€</strong> Kafkaå­˜å‚¨æ¶æ„</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†åŒºæ—¥å¿—æµ</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee01ba5da3c1475592f077f908a2456c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=c7Oq0C14wEkUNI8E%2FC53PX7fpBw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>Topic - ä¸»é¢˜</strong></p>
<p>Kafkaå­¦ä¹ äº†æ•°æ®åº“é‡Œé¢çš„è®¾è®¡ï¼Œåœ¨é‡Œé¢è®¾è®¡äº†topicï¼ˆä¸»é¢˜ï¼‰ï¼Œè¿™ä¸ªä¸œè¥¿ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è·å–ä¸­å›½ç§»åŠ¨çš„æ•°æ®ï¼Œé‚£å°±ç›´æ¥ç›‘å¬ä¸­å›½ç§»åŠ¨è®¢é˜…çš„Topicå³å¯ã€‚</p>
<p><strong>Partition - åˆ†åŒº</strong></p>
<p>Kafkaè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«Partitionï¼ˆåˆ†åŒºï¼‰ï¼Œåˆ†åŒºå…·ä½“åœ¨æœåŠ¡å™¨ä¸Šé¢è¡¨ç°èµ·åˆå°±æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¸€ä¸ªä¸»é¢˜ä¸‹é¢æœ‰å¤šä¸ªåˆ†åŒºï¼Œè¿™äº›åˆ†åŒºä¼šå­˜å‚¨åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šé¢ï¼Œæˆ–è€…è¯´ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸åŒçš„ä¸»æœºä¸Šå»ºäº†ä¸åŒçš„ç›®å½•ã€‚è¿™äº›åˆ†åŒºä¸»è¦çš„ä¿¡æ¯å°±å­˜åœ¨äº†.logæ–‡ä»¶é‡Œé¢ã€‚è·Ÿæ•°æ®åº“é‡Œé¢çš„åˆ†åŒºå·®ä¸å¤šï¼Œæ˜¯ä¸ºäº†æé«˜æ€§èƒ½ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆæé«˜äº†æ€§èƒ½ï¼Œå¾ˆç®€å•ï¼Œå¤šä¸ªåˆ†åŒºå¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶è¡Œå¤„ç†è‚¯å®šä¼šæ¯”å•çº¿ç¨‹å¥½å¾—å¤šã€‚</p>
<p>Topicå’Œpartitionåƒæ˜¯HBASEé‡Œçš„tableå’Œregionçš„æ¦‚å¿µï¼Œtableåªæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼ŒçœŸæ­£å­˜å‚¨æ•°æ®çš„æ˜¯regionï¼Œè¿™äº›regionä¼šåˆ†å¸ƒå¼åœ°å­˜å‚¨åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œå¯¹åº”äºkafkaï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œ<strong>Topicä¹Ÿæ˜¯é€»è¾‘æ¦‚å¿µï¼Œè€Œpartitionå°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨å•å…ƒã€‚è¿™ä¸ªè®¾è®¡æ˜¯ä¿è¯äº†æµ·é‡æ•°æ®å¤„ç†çš„åŸºç¡€ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœHDFSæ²¡æœ‰blockçš„è®¾è®¡ï¼Œä¸€ä¸ª100Tçš„æ–‡ä»¶ä¹Ÿåªèƒ½å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œé‚£å°±ç›´æ¥å æ»¡æ•´ä¸ªæœåŠ¡å™¨äº†ï¼Œå¼•å…¥blockåï¼Œå¤§æ–‡ä»¶å¯ä»¥åˆ†æ•£å­˜å‚¨åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</strong></p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>1.åˆ†åŒºä¼šæœ‰å•ç‚¹æ•…éšœé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä¸ºæ¯ä¸ªåˆ†åŒºè®¾ç½®å‰¯æœ¬æ•°</p>
<p>2.åˆ†åŒºçš„ç¼–å·æ˜¯ä»0å¼€å§‹çš„</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66333a00a3d94c1185c3fb0de363a34c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=rCTx8tpxHS4Xca00NsI9U2qqjps%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>Kafka ä»¥ã€Œä¸»é¢˜ï¼ˆTopicï¼‰- åˆ†åŒºï¼ˆPartitionï¼‰ã€ä¸ºæ ¸å¿ƒç»„ç»‡æ•°æ®ï¼Œæ¯ä¸ªåˆ†åŒºæœ¬è´¨æ˜¯ä¸€ä¸ª append-only çš„æ—¥å¿—æµï¼Œæ¶ˆæ¯æŒ‰ç”Ÿäº§é¡ºåºè¿½åŠ å­˜å‚¨ï¼Œä¿è¯åˆ†åŒºå†…æ¶ˆæ¯æœ‰åºæ€§ã€‚â€‹</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜é¡ºåºè¯»å†™é«˜æ€§èƒ½çš„ç‰¹æ€§ã€‚å­˜å‚¨ä»‹è´¨ä¹Ÿå¯ä»¥é€‰æ‹©å»‰ä»·çš„SATAç£ç›˜ï¼Œè¿™æ ·å¯ä»¥è·å¾—æ›´é•¿çš„æ•°æ®ä¿ç•™æ—¶é—´ã€æ›´ä½çš„æ•°æ®å­˜å‚¨æˆæœ¬ã€‚</p>
<h3 data-id="heading-3">1.2 æ•°æ®ç»„ç»‡ï¼šåˆ†æ®µæ—¥å¿—æ–‡ä»¶</h3>
<p>â€¢æ¯ä¸ªåˆ†åŒºæ‹†åˆ†ä¸ºå¤šä¸ª Segment æ–‡ä»¶ï¼ˆé»˜è®¤ 1GBï¼‰ï¼Œå‘½åæ ¼å¼ä¸ºã€Œèµ·å§‹åç§»é‡.logã€ï¼ˆå¦‚ 00000000000000000000.logï¼‰â€‹ï¼Œåšè¿™ä¸ªé™åˆ¶ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æŠŠ.logåŠ è½½åˆ°å†…å­˜å»æ“ä½œ</p>
<p>â€¢é…å¥—ä¸¤ç±»ç´¢å¼•æ–‡ä»¶ï¼š.indexï¼ˆåç§»é‡â†’ç‰©ç†åœ°å€æ˜ å°„ï¼‰ã€.timeindexï¼ˆæ—¶é—´æˆ³â†’åç§»é‡æ˜ å°„ï¼‰â€‹â€‹</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/730b9896bc594900819a3c86d89efefc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=ivaklGaephzfSavNgncXwrI4Uqw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>è¿™ä¸ª9936472ä¹‹ç±»çš„æ•°å­—ï¼Œå°±æ˜¯ä»£è¡¨äº†è¿™ä¸ªæ—¥å¿—æ®µæ–‡ä»¶é‡ŒåŒ…å«çš„èµ·å§‹offsetï¼Œä¹Ÿå°±è¯´æ˜è¿™ä¸ªåˆ†åŒºé‡Œè‡³å°‘éƒ½å†™å…¥äº†æ¥è¿‘1000ä¸‡æ¡æ•°æ®äº†ã€‚</p>
<p>Kafka brokeræœ‰ä¸€ä¸ªå‚æ•°ï¼Œlog.segment.bytesï¼Œé™å®šäº†æ¯ä¸ªæ—¥å¿—æ®µæ–‡ä»¶çš„å¤§å°ï¼Œæœ€å¤§å°±æ˜¯1GBï¼Œä¸€ä¸ªæ—¥å¿—æ®µæ–‡ä»¶æ»¡äº†ï¼Œå°±è‡ªåŠ¨å¼€ä¸€ä¸ªæ–°çš„æ—¥å¿—æ®µæ–‡ä»¶æ¥å†™å…¥ï¼Œé¿å…å•ä¸ªæ–‡ä»¶è¿‡å¤§ï¼Œå½±å“æ–‡ä»¶çš„è¯»å†™æ€§èƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšlog rollingï¼Œæ­£åœ¨è¢«å†™å…¥çš„é‚£ä¸ªæ—¥å¿—æ®µæ–‡ä»¶ï¼Œå«åšactive log segmentã€‚</p>
<h3 data-id="heading-4">1.3 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c84e19c96cd441e69db4281f4fe824fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=JLf0F8dw%2BzGIXqtM%2BLD0qwIJdpg%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>å†™æ¶ˆæ¯ï¼š</strong></p>
<p>â€¢Indexæ–‡ä»¶å†™å…¥ï¼ŒIndexæ–‡ä»¶è¾ƒå°ï¼Œå¯ä»¥ç›´æ¥ç”¨mmapè¿›è¡Œå†…å­˜æ˜ å°„ï¼Œé¿å…é¢‘ç¹çš„ç£ç›˜I/Oæ“ä½œï¼Œæé«˜å†™å…¥æ€§èƒ½ï¼›ç”±äºIndexæ–‡ä»¶æ˜¯ç¨€ç–ç´¢å¼•ï¼Œåªéœ€è¦è®°å½•å…³é”®ä½ç½®çš„åç§»é‡ï¼Œå› æ­¤å³ä½¿ä½¿ç”¨mmapï¼Œå†™å…¥çš„å¼€é”€ä¹Ÿç›¸å¯¹è¾ƒä½ã€‚</p>
<p>â€¢Segmentæ–‡ä»¶å†™å…¥ï¼ŒSegmentæ–‡ä»¶è¾ƒå¤§ï¼Œå¯ä»¥é‡‡ç”¨æ™®é€šçš„å†™æ“ä½œï¼ˆFileChannel.writeï¼‰ï¼Œç”±äºSegmentæ–‡ä»¶æ˜¯é¡ºåºå†™å…¥çš„ï¼Œå¹¶ä¸”Kafkaä¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„PageCacheï¼ˆé¡µç¼“å­˜ï¼‰æœºåˆ¶ï¼Œå†™å…¥æ“ä½œä¼šå…ˆå†™å…¥åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿåœ¨åå°å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜å†™å…¥çš„æ€§èƒ½ã€‚</p>
<p><strong>è¯»æ¶ˆæ¯ï¼š</strong></p>
<p>â€¢Indexæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨mmapæ–¹å¼è¯»å–ï¼Œç”±äºIndexæ–‡ä»¶è¾ƒå°ï¼Œä¸”æ˜¯ç¨€ç–ç´¢å¼•ï¼Œç¼ºé¡µä¸­æ–­çš„å¯èƒ½æ€§è¾ƒå°ã€‚</p>
<p>â€¢Segmentæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨sendfileç³»ç»Ÿè°ƒç”¨æ¥å®ç°é›¶æ‹·è´è¯»å–å’Œå‘é€ï¼Œå‡å°‘æ•°æ®åœ¨ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ä¹‹é—´çš„æ‹·è´æ¬¡æ•°ï¼Œæé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5">1.4 å…³é”®æŠ€æœ¯</h3>
<p>Kafka ä½œä¸ºé«˜æ€§èƒ½çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶è¶…é«˜ååé‡çš„æ ¸å¿ƒç§˜è¯€ä¹‹ä¸€å°±æ˜¯<strong>æ·±åº¦ä¾èµ– PageCache + é¡ºåº I/O + mmap å†…å­˜æ˜ å°„</strong>çš„ç»„åˆã€‚</p>
<p>PageCacheï¼Œä¸­æ–‡åç§°ä¸ºé¡µé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ã€‚å®ƒæ˜¯å°†ç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå½“ç³»ç»Ÿéœ€è¦è®¿é—®è¿™äº›æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½å»è¯»å–ç£ç›˜ã€‚è¿™ç§æ–¹å¼æ˜¾è‘—å‡å°‘äº†ç£ç›˜I/Oæ“ä½œï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p>mmapï¼ˆMemory-mapped fileï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç§å°†<strong>ç£ç›˜æ–‡ä»¶</strong>ä¸<strong>è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´</strong>å»ºç«‹æ˜ å°„å…³ç³»çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œæœ¬è´¨æ˜¯è®©è¿›ç¨‹é€šè¿‡ç›´æ¥æ“ä½œå†…å­˜åœ°å€çš„æ–¹å¼è¯»å†™æ–‡ä»¶ï¼Œæ— éœ€ä¼ ç»Ÿçš„ read/write ç³»ç»Ÿè°ƒç”¨ã€‚æ ¸å¿ƒä»·å€¼åœ¨äº<strong>é›¶æ‹·è´</strong>å’Œ<strong>å†…å­˜å¼æ–‡ä»¶è®¿é—®</strong>ï¼Œå°¤å…¶é€‚åˆå¤§æ–‡ä»¶ã€é«˜ååã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚</p>
<p>å°†æ—¥å¿—æ®µï¼ˆ.logï¼‰æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œç”Ÿäº§è€…å†™å…¥æ—¶ç›´æ¥å†™å†…å­˜ï¼ˆå†…æ ¸å¼‚æ­¥åˆ·ç›˜ï¼‰ï¼Œæ¶ˆè´¹è€…è¯»å–æ—¶ç›´æ¥ä»å†…å­˜è¯»å–ï¼Œå®ç°è¶…é«˜ååï¼ˆKafka çš„ â€œé¡ºåºå†™ + mmapâ€ æ˜¯å…¶é«˜æ€§èƒ½æ ¸å¿ƒï¼‰ï¼›</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8025311968154f9e8ca20594c637af59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=FWIUrpjyB8hG3B%2BMusGW%2Fn5KiJ4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>é›¶æ‹·è´æµç¨‹ç¤ºæ„å›¾</p>
<p>é›¶æ‹·è´è¿‡ç¨‹ï¼š</p>
<p>1.ç”¨æˆ·è¿›ç¨‹å‘èµ·sendfileç³»ç»Ÿè°ƒç”¨ï¼Œ<strong>ä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢1ï¼‰ä»ç”¨æˆ·æ€è½¬å‘å†…æ ¸æ€</strong></p>
<p>2.DMAæ§åˆ¶å™¨ï¼ŒæŠŠæ•°æ®ä»ç¡¬ç›˜ä¸­æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºã€‚</p>
<p>3.CPUå°†è¯»ç¼“å†²åŒºä¸­æ•°æ®æ‹·è´åˆ°socketç¼“å†²åŒº</p>
<p>4.DMAæ§åˆ¶å™¨ï¼Œå¼‚æ­¥æŠŠæ•°æ®ä»socketç¼“å†²åŒºæ‹·è´åˆ°ç½‘å¡ï¼Œ</p>
<p>5.<strong>ä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢2ï¼‰ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€</strong>ï¼Œsendfileè°ƒç”¨è¿”å›ã€‚</p>
<h3 data-id="heading-6">1.5 è®¾è®¡ä¼˜åŠ¿</h3>
<p>â€¢é¡ºåºå†™ç£ç›˜ï¼šSegment æ–‡ä»¶ä»…è¿½åŠ å†™å…¥ï¼Œè§„é¿éšæœº IOï¼Œååé‡æé«˜ï¼ˆå•åˆ†åŒºå¯è¾¾ 10 ä¸‡ + TPSï¼‰â€‹â€‹</p>
<p>â€¢ç´¢å¼•è½»é‡åŒ–ï¼šä»…ç»´æŠ¤åç§»é‡ä¸æ—¶é—´æˆ³ç´¢å¼•ï¼Œé™ä½å­˜å‚¨å¼€é”€â€‹</p>
<p>â€¢å‰¯æœ¬åŒæ­¥ï¼šåŸºäº ISR æœºåˆ¶ï¼Œä»…åŒæ­¥å·²æäº¤æ¶ˆæ¯ï¼Œå…¼é¡¾ä¸€è‡´æ€§ä¸å¯ç”¨æ€§</p>
<h2 data-id="heading-7">äºŒã€RocketMQå­˜å‚¨æ¶æ„</h2>
<p>Kafkaçš„æ¯ä¸ªPartitionéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€é¡ºåºå†™å…¥çš„æ–‡ä»¶ï¼Œä½†å½“Partitionæ•°é‡å¢å¤šæ—¶ï¼Œä»æ“ä½œç³»ç»Ÿçš„è§’åº¦çœ‹ï¼Œè¿™äº›å†™å…¥æ“ä½œä¼šå˜å¾—ç›¸å¯¹éšæœºï¼Œè¿™å¯èƒ½ä¼šå½±å“å†™å…¥æ€§èƒ½ã€‚</p>
<h3 data-id="heading-8">2.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†ç¦»å¼è®¾è®¡</h3>
<p>RocketMQé‡‡ç”¨ã€ŒCommitLog + ConsumeQueue + IndexFileã€ä¸‰å±‚ç»“æ„ï¼Œå½»åº•åˆ†ç¦»æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æŸ¥è¯¢ï¼šâ€‹</p>
<p>â€¢CommitLogï¼šå…¨å±€å•ä¸€æ—¥å¿—æ–‡ä»¶ï¼ˆé»˜è®¤ 1GB / ä¸ªï¼Œå¾ªç¯è¦†ç›–ï¼‰ï¼Œå­˜å‚¨æ‰€æœ‰ä¸»é¢˜çš„åŸå§‹æ¶ˆæ¯â€‹â€‹</p>
<p>â€¢ConsumeQueueï¼šæŒ‰ä¸»é¢˜ - é˜Ÿåˆ—ç»´åº¦æ‹†åˆ†çš„ç´¢å¼•æ–‡ä»¶ï¼Œå­˜å‚¨ã€Œæ¶ˆæ¯ç‰©ç†åœ°å€ + åç§»é‡ + é•¿åº¦ã€ï¼Œä¾›æ¶ˆè´¹è€…å¿«é€ŸæŸ¥è¯¢â€‹</p>
<p>â€¢IndexFileï¼šå“ˆå¸Œç´¢å¼•æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰æ¶ˆæ¯ Key æŸ¥è¯¢</p>
<p>CommitLogï¼šæ¶ˆæ¯çš„åŸå§‹æ—¥è®°æœ¬</p>
<p><strong>CommitLog</strong>æ˜¯RocketMQå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†æ–‡ä»¶ï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šæŒ‰åˆ°è¾¾é¡ºåºå†™å…¥è¿™ä¸ªæ–‡ä»¶ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æœ¬ä¸æ–­è¿½åŠ çš„æ—¥è®°æœ¬â€”â€”æ¯æ¡æ¶ˆæ¯éƒ½æ˜¯æŒ‰æ—¶é—´é¡ºåºè®°å½•çš„æ–°æ—¥è®°ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¶ˆæ¯å­˜å‚¨çš„æ ¸å¿ƒé€»è¾‘ç®€åŒ–ç¤ºä¾‹ï¼ˆéæºç ï¼‰</span>
Â publicÂ voidÂ <span class="hljs-built_in">putMessage</span>(Message message)Â {
Â Â  Â Â <span class="hljs-comment">// 1. å°†æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚æ•°ç»„</span>
Â Â  Â Â byte<span class="hljs-selector-attr">[]</span> data = <span class="hljs-built_in">serialize</span>(message);
Â Â  Â Â <span class="hljs-comment">// 2. è®¡ç®—æ¶ˆæ¯ç‰©ç†åç§»é‡</span>
Â Â  Â Â longÂ offset = commitLog<span class="hljs-selector-class">.getMaxOffset</span>();
Â Â  Â Â <span class="hljs-comment">// 3. å°†æ•°æ®è¿½åŠ åˆ°CommitLogæ–‡ä»¶æœ«å°¾</span>
 Â  Â  commitLog<span class="hljs-selector-class">.append</span>(data);
Â Â  Â Â <span class="hljs-comment">// 4. è¿”å›æ¶ˆæ¯çš„å…¨å±€å”¯ä¸€ç‰©ç†åç§»é‡</span>
Â  Â Â  returnÂ offset;
}
</code></pre>
<p>æ¶ˆæ¯å†™å…¥CommitLogæ—¶æœ‰ä¸‰ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<p>1.<strong>é¡ºåºå†™å…¥</strong>ï¼šæ‰€æœ‰æ¶ˆæ¯æŒ‰åˆ°è¾¾é¡ºåºè¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œé¿å…ç£ç›˜éšæœºå¯»å€</p>
<p>2.<strong>å†…å­˜æ˜ å°„</strong>ï¼šé€šè¿‡MappedByteBufferå®ç°æ–‡ä»¶æ˜ å°„ï¼Œå‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°</p>
<p>3.<strong>æ–‡ä»¶åˆ†å‰²</strong>ï¼šå•ä¸ªCommitLogæ–‡ä»¶é»˜è®¤1GBï¼Œå†™æ»¡ååˆ›å»ºæ–°æ–‡ä»¶ï¼ˆæ–‡ä»¶åç”¨èµ·å§‹åç§»é‡å‘½åï¼‰</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“ç”Ÿäº§è€…å‘é€ä¸‰æ¡æ¶ˆæ¯æ—¶ï¼ŒCommitLogæ–‡ä»¶å¯èƒ½é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">0000000000000000000ï¼ˆæ–‡ä»¶1ï¼Œ1GBï¼‰ Â 
2|--æ¶ˆæ¯A(<span class="hljs-attr">offset</span>=<span class="hljs-number">0</span>) Â 
3|--æ¶ˆæ¯B(<span class="hljs-attr">offset</span>=<span class="hljs-number">100</span>) Â 
4|--æ¶ˆæ¯C(<span class="hljs-attr">offset</span>=<span class="hljs-number">200</span>) Â 
500000000001073741824ï¼ˆæ–‡ä»¶2ï¼Œèµ·å§‹åç§»é‡1073741824ï¼‰ Â 
</code></pre>
<p><strong>æ¸©é¦¨æç¤º</strong>ï¼šè™½ç„¶CommitLogæ˜¯é¡ºåºå†™ï¼Œä½†è¯»å–æ—¶éœ€è¦é…åˆç´¢å¼•ç»“æ„ï¼Œå¦åˆ™éå†æ–‡ä»¶æ‰¾æ¶ˆæ¯å°±åƒå¤§æµ·æé’ˆã€‚</p>
<p>æ¶ˆè´¹é˜Ÿåˆ—ConsumeQueueï¼šæ¶ˆæ¯çš„å¿«é€Ÿç›®å½•</p>
<p>å¦‚æœæ¯æ¬¡æ¶ˆè´¹éƒ½è¦æ‰«æCommitLogï¼Œæ€§èƒ½ä¼šæƒ¨ä¸å¿ç¹ã€‚äºæ˜¯RocketMQè®¾è®¡äº†<strong>ConsumeQueue</strong>â€”â€”å®ƒæ˜¯åŸºäºTopicå’ŒQueueçš„äºŒçº§ç´¢å¼•æ–‡ä»¶ã€‚</p>
<p>æ¯ä¸ªConsumeQueueæ¡ç›®åŒ…å«ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼ˆå›ºå®š20å­—èŠ‚ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1</span>| CommitLog <span class="hljs-title function_">Offset</span> <span class="hljs-params">(<span class="hljs-number">8</span>å­—èŠ‚)</span> |Â Message <span class="hljs-title function_">Size</span> <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span>Â | Tag <span class="hljs-title function_">Hashcode</span> <span class="hljs-params">(<span class="hljs-number">8</span>å­—èŠ‚)</span> |Â Â 
</code></pre>
<p>è¿™ç›¸å½“äºç»™CommitLogé‡Œçš„æ¶ˆæ¯åšäº†ä¸€ä¸ªç›®å½•ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">TopicA-Queue0çš„ConsumeQueue Â 
<span class="hljs-number">2</span>|<span class="hljs-comment">--0ï¼ˆå¯¹åº”CommitLogåç§»0çš„æ¶ˆæ¯Aï¼‰ Â </span>
<span class="hljs-number">3</span>|<span class="hljs-comment">--100ï¼ˆå¯¹åº”CommitLogåç§»100çš„æ¶ˆæ¯Bï¼‰ Â </span>
<span class="hljs-number">4</span>|<span class="hljs-comment">--200ï¼ˆå¯¹åº”CommitLogåç§»200çš„æ¶ˆæ¯Cï¼‰</span>
</code></pre>
<p>å½“æ¶ˆè´¹è€…æ‹‰å–TopicA-Queue0çš„æ¶ˆæ¯æ—¶ï¼š</p>
<p>1.å…ˆæŸ¥ConsumeQueueè·å–æ¶ˆæ¯çš„ç‰©ç†ä½ç½®</p>
<p>2.æ ¹æ®CommitLog Offsetç›´æ¥å®šä½åˆ°CommitLogæ–‡ä»¶</p>
<p>3.è¯»å–æŒ‡å®šä½ç½®çš„æ¶ˆæ¯å†…å®¹</p>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<p>â€¢ConsumeQueueé‡‡ç”¨å†…å­˜æ˜ å°„+å¼‚æ­¥åˆ·ç›˜ï¼Œä¿è¯é«˜æ€§èƒ½</p>
<p>â€¢å•ä¸ªæ–‡ä»¶å­˜å‚¨30ä¸‡æ¡ç´¢å¼•ï¼Œçº¦5.72MBï¼ˆ30ä¸‡*20å­—èŠ‚ï¼‰</p>
<p>â€¢é€šè¿‡hashCodeå¿«é€Ÿè¿‡æ»¤Tagï¼Œå®ç°æ¶ˆæ¯è¿‡æ»¤</p>
<p>ç´¢å¼•æ–‡ä»¶IndexFileï¼šæ¶ˆæ¯çš„å…¨å±€å­—å…¸</p>
<p>å¦‚æœéœ€è¦æ ¹æ®MessageIDæˆ–KeyæŸ¥è¯¢æ¶ˆæ¯ï¼ŒConsumeQueueå°±ä¸å¤Ÿç”¨äº†ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°<strong>IndexFile</strong>è¿™ä¸ªå…¨å±€ç´¢å¼•ã€‚</p>
<p>IndexFileçš„ç»“æ„ç±»ä¼¼HashMapï¼š</p>
<p>1.<strong>Slotæ§½ä½</strong>ï¼ˆ500ä¸‡ä¸ªï¼‰ï¼šå­˜å‚¨ç›¸åŒhashå€¼çš„Indexæ¡ç›®é“¾è¡¨å¤´</p>
<p>2.<strong>Indexæ¡ç›®</strong>ï¼ˆ2000ä¸‡æ¡ï¼‰ï¼šåŒ…å«Keyçš„hashå€¼ã€CommitLogåç§»é‡ã€æ—¶é—´å·®ç­‰ä¿¡æ¯</p>
<p>å½“å†™å…¥æ¶ˆæ¯æ—¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç´¢å¼•æ„å»ºè¿‡ç¨‹ç®€åŒ–ç¤ºæ„</span>
<span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">buildIndex</span><span class="hljs-params">(Message message)</span>Â </span>{
Â  Â Â <span class="hljs-comment">// è®¡ç®—Keyçš„hashå€¼</span>
Â  Â Â <span class="hljs-type">int</span>Â hash = <span class="hljs-built_in">hash</span>(message.<span class="hljs-built_in">getKey</span>());
Â  Â Â <span class="hljs-comment">// å®šä½åˆ°å¯¹åº”çš„Slotæ§½ä½</span>
Â  Â Â <span class="hljs-type">int</span>Â slotPos = hash % slotNum;
Â  Â Â <span class="hljs-comment">// åœ¨IndexåŒºåŸŸè¿½åŠ æ–°æ¡ç›®</span>
Â  Â  indexFile.<span class="hljs-built_in">addEntry</span>(hash, message.<span class="hljs-built_in">getCommitLogOffset</span>());
}
</code></pre>
<p>æŸ¥è¯¢æ—¶é€šè¿‡ä¸¤æ¬¡æŸ¥æ‰¾å¿«é€Ÿå®šä½ï¼š</p>
<p>1.æ ¹æ®Keyçš„hashå€¼æ‰¾åˆ°Slotæ§½ä½</p>
<p>2.éå†Slotå¯¹åº”çš„é“¾è¡¨ï¼Œæ¯”å¯¹CommitLogä¸­çš„å®é™…Keyå€¼</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥</strong>ï¼š</p>
<p>â€¢æ¶ˆæ¯ä½“ç§¯å·®å¼‚å¤§æ—¶ï¼ŒCommitLogä»ç„¶ä¿æŒé¡ºåºå†™ï¼Œä½†ConsumeQueueå¯èƒ½å‡ºç°ã€Œç¨€ç–ç´¢å¼•ã€ï¼ˆç›¸é‚»ç´¢å¼•æŒ‡å‘çš„ç‰©ç†ä½ç½®é—´éš”å¤§ï¼‰</p>
<p>â€¢ç”Ÿäº§ç¯å¢ƒä¸­CommitLogå»ºè®®æ”¾åœ¨å•ç‹¬SSDç£ç›˜ï¼ŒConsumeQueueå’ŒIndexFileå¯æ”¾æ™®é€šç£ç›˜</p>
<p>â€¢é‡åˆ°æ¶ˆæ¯å †ç§¯æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥æ¶ˆè´¹è€…é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ— è„‘æ‰©å®¹Brokerå­˜å‚¨</p>
<p>ç†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œä¸‹æ¬¡é‡åˆ°æ¶ˆæ¯æŸ¥è¯¢æ€§èƒ½é—®é¢˜æˆ–è€…ç£ç›˜IOç“¶é¢ˆæ—¶ï¼Œå°±çŸ¥é“è¯¥ä»CommitLogçš„å†™å…¥æ¨¡å¼è¿˜æ˜¯ConsumeQueueçš„ç´¢å¼•ç»“æ„å…¥æ‰‹æ’æŸ¥äº†ã€‚</p>
<h3 data-id="heading-9">2.2 æ•°æ®æµè½¬æœºåˆ¶</h3>
<p>â€¢ç”Ÿäº§è€…å†™å…¥ CommitLogï¼Œç”Ÿæˆå…¨å±€å”¯ä¸€åç§»é‡ï¼ˆPHYOFFSETï¼‰â€‹</p>
<p>â€¢åå°çº¿ç¨‹å¼‚æ­¥æ„å»º ConsumeQueue ç´¢å¼•ï¼ŒåŒæ­¥æ¶ˆæ¯å…ƒæ•°æ®â€‹</p>
<p>â€¢æ¶ˆè´¹è€…é€šè¿‡ ConsumeQueue å®šä½ CommitLog ä¸­çš„æ¶ˆæ¯ï¼Œé¿å…å…¨é‡æ‰«æ</p>
<p>å­˜å‚¨è¿‡ç¨‹å…¨æ™¯å›¾</p>
<p>ç°åœ¨æŠŠå„ä¸ªæ¨¡å—ä¸²èµ·æ¥çœ‹æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>1.ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Broker</p>
<p>2.Brokerå°†æ¶ˆæ¯<strong>é¡ºåºå†™å…¥CommitLog</strong></p>
<p>3.<strong>å¼‚æ­¥çº¿ç¨‹</strong>åŒæ—¶æ„å»ºConsumeQueueå’ŒIndexFile</p>
<p>4.æ¶ˆè´¹è€…é€šè¿‡ConsumeQueueå¿«é€Ÿå®šä½æ¶ˆæ¯</p>
<p>5.æŒ‰éœ€æŸ¥è¯¢IndexFileå®ç°æ¶ˆæ¯å›æº¯</p>
<p>æ•´ä¸ªè¿‡ç¨‹å°±åƒå›¾ä¹¦é¦†çš„ç®¡ç†ç³»ç»Ÿï¼š</p>
<p>â€¢CommitLogæ˜¯è—ä¹¦åº“ï¼ˆæŒ‰å…¥åº“æ—¶é—´æ‘†æ”¾ï¼‰</p>
<p>â€¢ConsumeQueueæ˜¯åˆ†ç±»ç›®å½•ï¼ˆæŒ‰é¢˜æ/å‡ºç‰ˆç¤¾åˆ†ç±»ï¼‰</p>
<p>â€¢IndexFileæ˜¯æ£€ç´¢ç”µè„‘ï¼ˆæ”¯æŒæŒ‰ä¹¦å/ä½œè€…æŸ¥è¯¢ï¼‰</p>
<h3 data-id="heading-10">2.4 è®¾è®¡ä¼˜åŠ¿</h3>
<p>â€¢è¯»å†™åˆ†ç¦»ï¼šCommitLog ä»…è´Ÿè´£å†™å…¥ï¼ŒConsumeQueue è´Ÿè´£æŸ¥è¯¢ï¼Œæå‡å¹¶å‘æ€§èƒ½â€‹</p>
<p>â€¢äº‹åŠ¡æ”¯æŒï¼šé€šè¿‡ CommitLog ä¸­çš„äº‹åŠ¡çŠ¶æ€æ ‡è®° + å›æŸ¥æœºåˆ¶ï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯â€‹</p>
<p>â€¢åˆ·ç›˜ç­–ç•¥ï¼šæ”¯æŒã€Œå¼‚æ­¥åˆ·ç›˜ï¼ˆé«˜ååï¼‰ã€ã€ŒåŒæ­¥åˆ·ç›˜ï¼ˆé‡‘èçº§å¯é æ€§ï¼‰ã€åŠ¨æ€åˆ‡æ¢</p>
<h2 data-id="heading-11">ä¸‰ã€JMQå­˜å‚¨æ¶æ„</h2>
<p>JMQçš„æ¶ˆæ¯å­˜å‚¨åˆ†åˆ«å‚è€ƒäº†Kafkaå’ŒRocketMQå­˜å‚¨è®¾è®¡ä¸Šä¼˜ç‚¹ï¼Œå¹¶æ ¹æ®äº¬ä¸œå†…éƒ¨çš„åº”ç”¨åœºæ™¯è¿›è¡Œäº†æ”¹è¿›å’Œåˆ›æ–°ã€‚</p>
<h3 data-id="heading-12">3.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†åŒºæ—¥å¿— + é˜Ÿåˆ—å…¼å®¹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2c49ebef1454ecfa3eb5dc914d8e9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=%2FMKq95%2FkKgWD%2BV9ypnTsgfXuzg8%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>JMQ</strong>å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯PartitionGroupã€‚åœ¨åŒä¸€ä¸ªBrokerä¸Šï¼Œæ¯ä¸ªPartitionGroupå¯¹åº”ä¸€ç»„æ¶ˆæ¯æ–‡ä»¶ï¼ˆJournal Filesï¼‰ï¼Œé¡ºåºå­˜æ”¾è¿™ä¸ªTopicçš„æ¶ˆæ¯ã€‚</p>
<p>ä¸Kafkaç±»ä¼¼ï¼Œæ¯ä¸ªTopicåŒ…å«è‹¥å¹²Partitionï¼Œæ¯ä¸ªPartitionå¯¹åº”ä¸€ç»„ç´¢å¼•æ–‡ä»¶ï¼ˆIndex Filesï¼‰ï¼Œç´¢å¼•ä¸­å­˜æ”¾æ¶ˆæ¯åœ¨æ¶ˆæ¯æ–‡ä»¶ä¸­çš„ä½ç½®å’Œæ¶ˆæ¯é•¿åº¦ã€‚æ¶ˆæ¯å†™å…¥æ—¶ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æŒ‰ç…§å¯¹åº”çš„PartitionGroupå†™å…¥ä¾æ¬¡è¿½åŠ å†™å…¥æ¶ˆæ¯æ–‡ä»¶ä¸­ï¼Œç„¶åå¼‚æ­¥åˆ›å»ºç´¢å¼•å¹¶å†™å…¥å¯¹åº”Partitionçš„ç´¢å¼•æ–‡ä»¶ä¸­ã€‚</p>
<p>ä»¥PartionGroupä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒçš„è®¾è®¡ï¼Œåœ¨å…¼é¡¾çµæ´»æ€§çš„åŒæ—¶ï¼Œå…·æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼Œå¹¶ä¸”å•ä¸ªPartitionGroupå¯ä»¥æ”¯æŒæ›´å¤šçš„å¹¶å‘ã€‚</p>
<h3 data-id="heading-13">3.2 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65797ed9958e496ab45de3f081747403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=tUNZo5%2F%2BVu7XYsMj9wYFq1wEXyA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>å†™æ¶ˆæ¯ï¼š</strong></p>
<p>JMQçš„å†™æ“ä½œä½¿ç”¨DirectBufferä½œä¸ºç¼“å­˜ï¼Œæ•°æ®å…ˆå†™å…¥DirectBufferï¼Œå†å¼‚æ­¥é€šè¿‡FileChannelå†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<p>â€¢æ¶ˆæ¯å†™å…¥DirectBufferåï¼Œé»˜è®¤å†™å…¥è¯¥èŠ‚ç‚¹æˆåŠŸï¼ˆæ•°æ®çš„é«˜å¯é æ˜¯é€šè¿‡Raftåè®®å¤åˆ¶ï¼Œç”¨å¤šä¸ªå†…å­˜å‰¯æœ¬æ¥ä¿è¯ï¼‰ï¼Œç›¸å¯¹Kafkaçš„å†™æ“ä½œæ¥çœ‹ï¼ŒJMQå“åº”å†™å…¥è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹æ²¡æœ‰å‘ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨äº¬ä¸œå†…éƒ¨çš„å¤§é‡å•æ¡åŒæ­¥å‘é€çš„åœºæ™¯ä¸‹å¼€é”€æ›´ä½ã€æ€§èƒ½æ›´ä¼˜ã€‚</p>
<p>â€¢åŒæ—¶ä¹Ÿé¿å…ä½¿ç”¨MappedByteBufferï¼ˆMmapæ–¹å¼ï¼‰äº§ç”ŸPage Faultä¸­æ–­ï¼ŒOSåœ¨ä¸­æ–­ä¸­å°†è¯¥é¡µå¯¹åº”ç£ç›˜ä¸­çš„æ•°æ®æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œåœ¨å¯¹æ–‡ä»¶è¿›è¡Œè¿½åŠ å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸€æ— æ³•é¿å…çš„è¿‡ç¨‹æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œåè€Œå¢åŠ äº†å†™å…¥çš„è€—æ—¶çš„é—®é¢˜ã€‚</p>
<p><strong>è¯»æ¶ˆæ¯ï¼š</strong></p>
<p>JMQé‡‡ç”¨å®šé•¿ç¨ å¯†ç´¢å¼•è®¾è®¡ï¼Œæ¯ä¸ªç´¢å¼•å›ºå®šé•¿åº¦ã€‚</p>
<p>â€¢å®šé•¿è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œç›´æ¥æ ¹æ®ç´¢å¼•åºå·å°±å¯ä»¥è®¡ç®—å‡ºç´¢å¼•åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ï¼šç´¢å¼•ä½ç½® = ç´¢å¼•åºå· * ç´¢å¼•é•¿åº¦ã€‚è¿™æ ·ï¼Œæ¶ˆæ¯çš„æŸ¥æ‰¾è¿‡ç¨‹å°±æ¯”è¾ƒç®€å•äº†ï¼Œé¦–å…ˆè®¡ç®—å‡ºç´¢å¼•æ‰€åœ¨çš„ä½ç½®ï¼Œç›´æ¥è¯»å–ç´¢å¼•ï¼Œç„¶åæ ¹æ®ç´¢å¼•ä¸­è®°å½•çš„æ¶ˆæ¯ä½ç½®è¯»å–æ¶ˆæ¯ã€‚</p>
<p>â€¢åœ¨äº¬ä¸œå†…éƒ¨åº”ç”¨åœºæ™¯ä¸­ï¼Œå•æ¡æ¶ˆæ¯å¤„ç†è€—æ—¶é«˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå¾®æœåŠ¡æ¶æ„ä¸‹ç”¨æˆ·ä¸€èˆ¬ä¼šç”³è¯·æ›´å¤šçš„æ¶ˆè´¹èŠ‚ç‚¹ï¼Œè®©æ¯ä¸ªæ¶ˆè´¹èŠ‚ç‚¹å•æ¬¡æ‹‰å–è¾ƒå°æ‰¹é‡çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œä»¥æå‡æ¶ˆè´¹å¹¶è¡Œåº¦ï¼Œè¿™æ ·æ¶ˆè´¹æ‹‰å–è¯·æ±‚çš„æ¬¡æ•°ä¼šæ¯”è¾ƒå¤šï¼Œç¨ å¯†ç´¢å¼•çš„è®¾è®¡ä¼šæ›´é€‚ç”¨å†…éƒ¨çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>JMQæ¶ˆè´¹è¯»æ“ä½œ99%ä»¥ä¸Šéƒ½èƒ½å‘½ä¸­ç¼“å­˜ï¼ˆJMQè®¾è®¡çš„å †å¤–å†…å­˜ä¸æ–‡ä»¶æ˜ å°„çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼‰ï¼Œé¿å…äº†Kafkaå¯èƒ½é‡åˆ°çš„Cacheè¢«æ±¡æŸ“ï¼Œå½±å“æ€§èƒ½å’Œååçš„é—®é¢˜ã€‚åŒæ—¶ç›´æ¥è¯»å†…å­˜ä¹Ÿè§„é¿äº†RocketMQåœ¨è¯»å–æ¶ˆæ¯å­˜å‚¨çš„æ—¥å¿—æ•°æ®æ–‡ä»¶æ—¶å®¹æ˜“äº§ç”Ÿè¾ƒå¤šçš„éšæœºè®¿é—®è¯»å–ç£ç›˜ï¼Œå½±å“æ€§èƒ½çš„é—®é¢˜ã€‚ï¼ˆå½“æ²¡æœ‰å‘½ä¸­ç¼“å­˜æ—¶ï¼Œä¼šé»˜è®¤é™çº§ä¸ºé€šè¿‡Mmapçš„æ–¹å¼è¯»å–æ¶ˆæ¯ï¼‰ã€‚</p>
<h2 data-id="heading-14">å››ã€ç«å“å¯¹æ¯”åˆ†æ</h2>













































<table><thead><tr><th>ï»¿</th><th><strong>JMQ</strong></th><th><strong>Kafka</strong></th></tr></thead><tbody><tr><td><strong>å­˜å‚¨æ¨¡å‹</strong></td><td>ä»¥<strong>PartitionGroup</strong>ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒï¼Œæ”¯æŒé«˜å¹¶å‘å†™å…¥</td><td>ä»¥<strong>Partition</strong>ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒï¼Œæ”¯æŒçµæ´»çš„æ•°æ®å¤åˆ¶å’Œè¿ç§»</td></tr><tr><td><strong>æ¶ˆæ¯å†™å…¥æ€§èƒ½</strong></td><td>- å•å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ Kafka ç›¸å½“ - ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¼˜äº Kafka</td><td>- å•å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ JMQ ç›¸å½“ - ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ç•¥ä½äº JMQ</td></tr><tr><td><strong>åŒæ­¥å†™å…¥æ€§èƒ½</strong></td><td>- åŒæ­¥å†™å…¥æ€§èƒ½ç¨³å®šï¼Œå‡ ä¹ä¸å—ç½‘ç»œå»¶è¿Ÿå½±å“</td><td>- åŒæ­¥å†™å…¥æ€§èƒ½å—ç½‘ç»œå»¶è¿Ÿå½±å“è¾ƒå¤§ï¼Œç¨³å®šæ€§ç•¥é€Šäº JMQ</td></tr><tr><td><strong>å¤šåˆ†åŒºæ€§èƒ½</strong></td><td>- å¤šåˆ†åŒºå¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ Kafka ç›¸å½“ - åŒæ­¥å†™å…¥æ€§èƒ½ç•¥ä½äº Kafka</td><td>- å¤šåˆ†åŒºåŒæ­¥å†™å…¥æ€§èƒ½æ›´ç¨³å®šï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯</td></tr><tr><td><strong>å‰¯æœ¬æœºåˆ¶</strong></td><td>æ”¯æŒå¼‚æ­¥å¤åˆ¶ï¼Œå‰¯æœ¬é—´æ•°æ®åŒæ­¥æ€§èƒ½è¾ƒå¥½</td><td>æ”¯æŒå¼‚æ­¥å’ŒåŒæ­¥å¤åˆ¶ï¼Œå‰¯æœ¬æœºåˆ¶æˆç†Ÿï¼Œé€‚åˆå¤æ‚éƒ¨ç½²</td></tr><tr><td><strong>è·¨æœºæˆ¿éƒ¨ç½²</strong></td><td>- åŒæ­¥å†™å…¥æ€§èƒ½åŸºæœ¬ä¸å—å½±å“ - å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸‹é™</td><td>- åŒæ­¥å†™å…¥æ€§èƒ½å—ç½‘ç»œå»¶è¿Ÿå½±å“è¾ƒå¤§ - å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸‹é™</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>- å¯¹åŒæ­¥å†™å…¥æ€§èƒ½è¦æ±‚é«˜ - å‰¯æœ¬å¼‚æ­¥ååè¦æ±‚é«˜ - å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤</td><td>- å¤æ‚åˆ†åŒºçš„é«˜å¹¶å‘åŒæ­¥å†™å…¥ - å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ - å¤šè¯­è¨€ç”Ÿæ€æ”¯æŒä¸°å¯Œ</td></tr></tbody></table>
<p>åœ¨å•å‰¯æœ¬åœºæ™¯ä¸‹ï¼ŒJMQä¸Kafkaçš„å•æœºå†™å…¥æ€§èƒ½å‡ååˆ†å‡ºè‰²ï¼Œå‡å¯è¾¾åˆ°ç½‘ç»œå¸¦å®½ä¸Šé™ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨æ›´è´´è¿‘ç”Ÿäº§ç¯å¢ƒçš„ä¸‰å‰¯æœ¬åœºæ™¯ä¸­ï¼Œä¸¤è€…ç‰¹æ€§å‡ºç°åˆ†åŒ–ï¼š</p>
<p><strong>JMQåœ¨ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥ä¸‹çš„æé™ååä¼˜åŠ¿æ˜æ˜¾ï¼Œä¸”åœ¨è·¨æœºæˆ¿éƒ¨ç½²æ—¶ï¼Œå…¶åŒæ­¥å†™å…¥æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œå‡ ä¹ä¸å—ç½‘ç»œå»¶è¿Ÿå½±å“ï¼›è€ŒKafkaåˆ™åœ¨å¤šåˆ†åŒºåŒæ­¥å†™å…¥åœºæ™¯ä¸‹å±•ç°å‡ºæ›´ç¨³å®šçš„æ€§èƒ½ï¼Œè¡°å‡å°äºJMQã€‚åœ¨å¤§éƒ¨åˆ†å¼‚æ­¥åååœºæ™¯åŠä¸åŒæ¶ˆæ¯ä½“ä¸‹çš„æ€§èƒ½è¶‹åŠ¿ä¸Šï¼Œä¸¤è€…è¡¨ç°ç›¸å½“ã€‚</strong></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒJMQå°¤å…¶é€‚åˆå¯¹åŒæ­¥å†™å…¥æ€§èƒ½å’Œå‰¯æœ¬å¼‚æ­¥ååæœ‰æé«˜è¦æ±‚çš„åœºæ™¯ï¼Œè€ŒKafkaåœ¨å¤æ‚åˆ†åŒºçš„é«˜å¹¶å‘åŒæ­¥å†™å…¥æ–¹é¢é€‚åº”æ€§æ›´å¹¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSIå…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594389431835295785</link>    <guid>https://juejin.cn/post/7594389431835295785</guid>    <pubDate>2026-01-13T03:25:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389431835295785" data-draft-id="7593908867564126251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSIå…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="React Native,å‰ç«¯,C++"/> <meta itemprop="datePublished" content="2026-01-13T03:25:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1"/> <meta itemprop="url" content="https://juejin.cn/user/4125023359744296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSIå…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023359744296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T03:25:42.000Z" title="Tue Jan 13 2026 03:25:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JSIå…¥é—¨æŒ‡å—</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>è¦æƒ³å½»åº•ç†è§£React Nativeæ–°æ¶æ„ï¼ŒJSIæ˜¯ç»•ä¸è¿‡å»çš„æ§›ã€‚æ‰€ä»¥æœ¬æ–‡ä½œä¸ºReact Nativeæºç å‰–æçš„ç¬¬äºŒç¯‡æ–‡ç« ã€‚é˜…è¯»æœ¬æ–‡éœ€è¦äº†è§£ä¸€äº›ç®€å•çš„ç°ä»£C++çŸ¥è¯†ã€‚æ–°æ¶æ„RNåŸºæœ¬ä¸Šæ˜¯åŸºäºC++ 17å¼€å‘çš„ã€‚å­¦ä¹ ç°ä»£C++å¯ä»¥æå¤§çš„æ‰©å®½çŸ¥è¯†è¾¹ç•Œï¼Œæå‡èƒ½åŠ›èŒƒå›´ã€‚è€Œä¸”ç°ä»£C++æ›´åŠ è§„èŒƒï¼Œå­¦ä¹ éš¾åº¦é™ä½ï¼Œæ˜¯æ€§ä»·æ¯”æé«˜çš„é€‰æ‹©ã€‚å½“ç„¶ï¼Œä»…ä½œä¸ºæºç é˜…è¯»çš„éœ€è¦ï¼Œå¹¶ä¸ç”¨æ·±å…¥å­¦ä¹ C++ï¼Œç”šè‡³ä¸ç”¨ä¼šå†™ä»£ç ï¼Œåªè¦èƒ½çœ‹æ‡‚ä¸€äº›è¯­æ³•è¶³å¤Ÿäº†ã€‚å¦‚æœæƒ³æ›´è¿›ä¸€æ­¥ï¼Œå­¦ä¹ åŸºæœ¬çš„ç°ä»£C++å¼€å‘ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¼€å‘React Nativeçš„çº¯C++ TurboModuleï¼Œå¯ä»¥æå¤§çš„ä¼˜åŒ–RN Appçš„æ€§èƒ½ï¼Œä»¥åŠåº”ç”¨èŒƒå›´ï¼Œåœ¨åé¢çš„RNæ–°æ¶æ„çš„ä¸€äº›åˆ—ä»‹ç»æ–‡ç« ä¸­ï¼Œç›¸ä¿¡å¯¹è¿™ä¸€ç‚¹ä¸€å®šä½“ä¼šææ·±ã€‚</p>
<h3 data-id="heading-2">JSI æ¦‚è¿°</h3>
<h4 data-id="heading-3">ä»€ä¹ˆæ˜¯JSIï¼Ÿ</h4>
<p><strong>JSIï¼ˆJavaScript Interfaceï¼‰</strong>Â æ˜¯ React Native æ–°æ¶æ„ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”±Â <strong>C++ å®ç°çš„è½»é‡çº§æ¥å£å±‚</strong>ï¼Œç”¨æ¥è¿æ¥ï¼š</p>
<ul>
<li>ä¸€è¾¹æ˜¯ JavaScript è¿è¡Œæ—¶ï¼ˆå¦‚ Hermesã€V8ï¼‰</li>
<li>å¦ä¸€è¾¹æ˜¯åŸç”Ÿä»£ç ï¼ˆä¸»è¦æ˜¯ C++ï¼Œé—´æ¥è¿åˆ° Java/Objâ€‘C/å¹³å° APIï¼‰</li>
</ul>
<p>å®ƒçš„ç›®æ ‡æ˜¯<strong>å–ä»£æ—§çš„å¼‚æ­¥ Bridgeï¼ˆJSON æ¶ˆæ¯æ¡¥ï¼‰</strong>ï¼Œè®© JS ä¸åŸç”Ÿä¹‹é—´å¯ä»¥Â <strong>ç›´æ¥ã€é«˜æ€§èƒ½åœ°äº’ç›¸è°ƒç”¨</strong>ï¼Œå¤§å¹…é™ä½é€šä¿¡å¼€é”€å’Œå»¶è¿Ÿã€‚</p>
<p>ç®€å•è¯´ï¼Œä»¥å‰ JS å’ŒåŸç”Ÿè¦é å‘ JSON æ¶ˆæ¯æ¥é€šä¿¡ï¼Œç°åœ¨é€šè¿‡ JSIï¼ŒåŒæ–¹å¯ä»¥åƒç›´æ¥å‡½æ•°è°ƒç”¨é‚£æ ·å¯¹è¯ï¼Œå¹¶ä¸”å¯ä»¥äº’ç›¸ä¿å­˜å¯¹æ–¹å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<h4 data-id="heading-4">JSI çš„æ ¸å¿ƒç‰¹ç‚¹</h4>
<ol>
<li>
<p>ç›´æ¥ã€ä½å¼€é”€çš„ JS â†” åŸç”Ÿé€šä¿¡</p>
<ul>
<li>
<p>JSI å…è®¸Â <strong>JavaScript ä¿å­˜ C++ å¯¹è±¡å¼•ç”¨ï¼ŒC++ ä¹Ÿèƒ½ä¿å­˜ JS å¯¹è±¡å¼•ç”¨</strong>ï¼Œé€šè¿‡å†…å­˜å¼•ç”¨ç›´æ¥è°ƒç”¨æ–¹æ³•</p>
</li>
<li>
<p>ä¸å†éœ€è¦æŠŠæ•°æ®è½¬æˆ JSON å†è·¨çº¿ç¨‹ä¼ é€’ï¼Œ<strong>å»æ‰åºåˆ—åŒ–/ååºåˆ—åŒ–å¼€é”€</strong>ï¼Œå°¤å…¶å¯¹å¤§æ•°æ®é‡ï¼ˆå¦‚ç›¸æœºå¸§ç¼“å†²ã€å›¾åƒã€éŸ³é¢‘æ ·æœ¬ç­‰ï¼‰éå¸¸å…³é”®</p>
</li>
<li>
<p>æ€§èƒ½å¯†é›†å‹åº“ï¼ˆä¾‹å¦‚ VisionCameraã€Reanimatedã€Skia ç­‰ï¼‰å€ŸåŠ© JSI æ‰èƒ½åœ¨ React Native é‡Œåšåˆ°æ¥è¿‘åŸç”Ÿçš„å®æ—¶æ€§èƒ½</p>
</li>
</ul>
</li>
<li>
<p>æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨</p>
<ul>
<li>
<p>æ—§ Bridge åªèƒ½å¼‚æ­¥ï¼Œå¾ˆå¤šåœºæ™¯éœ€è¦â€œç«‹åˆ»æ‹¿åˆ°ç»“æœâ€å¾ˆåˆ«æ‰­ã€‚</p>
</li>
<li>
<p>JSI æä¾›ï¼š</p>
<ul>
<li>
<p><strong>å¼‚æ­¥è°ƒç”¨</strong>ï¼šå¸¸è§„æ¨èæ–¹å¼ï¼Œé¿å…é˜»å¡ JS çº¿ç¨‹æˆ– UI çº¿ç¨‹ã€‚</p>
</li>
<li>
<p><strong>åŒæ­¥è°ƒç”¨</strong>ï¼šåœ¨ç¡®å®éœ€è¦â€œç«‹å³è¿”å›å€¼â€çš„åœºæ™¯ï¼ˆä¾‹å¦‚è·å–å‰ªè´´æ¿ã€å½“å‰ä½ç½®ç­‰ï¼‰å¯ä»¥ç›´æ¥ä»åŸç”Ÿæ‹¿å€¼è¿”å›ç»™ JSï¼Œè€Œä¸ç”¨ Promise / å›è°ƒ</p>
</li>
<li>
<p>è¿™ç§â€œæ—¢æ”¯æŒåŒæ­¥åˆæ”¯æŒå¼‚æ­¥â€çš„æ¨¡å¼ï¼Œè®© React Native åœ¨æ˜“ç”¨æ€§å’Œæ€§èƒ½ä¹‹é—´æœ‰äº†æ›´å¤šç©ºé—´ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç”¨ C++ å®ç°ã€ä¸ºæ€§èƒ½è€Œç”Ÿ</p>
<ul>
<li>
<p>JSI è‡ªèº«æ˜¯Â <strong>C++ API</strong>ï¼Œæä¾›Â <code>jsi::Runtime</code>ã€<code>jsi::Object</code>ã€<code>jsi::Function</code>ã€<code>jsi::Value</code>Â ç­‰ä½å±‚æ¥å£ï¼Œç”¨äºï¼š</p>
<ul>
<li>åœ¨åŸç”Ÿä»£ç ä¸­æ“ä½œ JS å€¼ä¸å¯¹è±¡ï¼›</li>
<li>æ³¨å†Œå¯ä¾› JS è°ƒç”¨çš„åŸç”Ÿå‡½æ•°ï¼›</li>
<li>ç›´æ¥ä¸ JS å¼•æ“äº¤äº’</li>
<li>ç”±äºæ˜¯æœ¬åœ°ç¼–è¯‘ä»£ç ï¼Œå‡å°‘äº†ä¸­é—´å±‚å’Œè§£é‡Šå¼€é”€ï¼Œå¸¦æ¥æ›´å¥½çš„Â <strong>å¯åŠ¨æ—¶é—´ä¸è¿è¡Œæ—¶æ€§èƒ½</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p>è„±ç¦»æ—§ Bridgeï¼Œæˆä¸ºæ–°æ¶æ„çš„åŸºç¡€ã€‚React Native æ–°æ¶æ„çš„å‡ ä¸ªå…³é”®è¯ï¼š<strong>JSIã€TurboModulesã€Fabricã€Codegen</strong>ï¼Œå…¶ä¸­ JSI æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œåº•åº§â€</p>
<ul>
<li>
<p><strong>TurboModules</strong>ï¼šæ–°ä¸€ä»£åŸç”Ÿæ¨¡å—ç³»ç»Ÿï¼Œé€šè¿‡ JSI å®ç° JS ä¸åŸç”Ÿæ¨¡å—çš„ç›´æ¥è°ƒç”¨ï¼Œè€Œä¸æ˜¯é€šè¿‡è€ Bridge</p>
</li>
<li>
<p><strong>Fabric æ¸²æŸ“å™¨</strong>ï¼šUI äº‹ä»¶ä¸æ¸²æŸ“æ›´æ–°é€šè¿‡ JSI ä¸ JS è¿è¡Œæ—¶é€šä¿¡ï¼Œä½¿å¾—ç•Œé¢æ›´æ–°æ›´é«˜æ•ˆã€æ›´å¯æ§</p>
</li>
<li>
<p><strong>Codegen</strong>ï¼šä»ç±»å‹åŒ–çš„ JS/TS å£°æ˜è‡ªåŠ¨ç”ŸæˆåŸç”Ÿ C++/å¹³å°ä»£ç ï¼Œè¿™äº›ä»£ç é€šè¿‡ JSI ä¸ JS é€šä¿¡</p>
</li>
<li>
<p>JSI è¿˜æ˜¯ä¸€ä¸ªÂ <strong>ä¸ JS å¼•æ“æ— å…³çš„æ¥å£å±‚</strong>ï¼Œå› æ­¤å¯ä»¥æ”¯æŒ Hermesã€V8 ç­‰å¤šç§å¼•æ“ï¼Œä¸å†ç»‘å®šäº JavaScriptCore</p>
</li>
</ul>
</li>
<li>
<p>æ›´é€‚åˆé«˜æ€§èƒ½ä¸è·¨å¹³å°åŸç”Ÿæ¨¡å—ã€‚å€ŸåŠ© JSIï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>å†™Â <strong>çº¯ C++ æ¨¡å—</strong>ï¼Œç„¶ååœ¨ Android å’Œ iOS ä¸Šå¤ç”¨è¿™ä¸€å¥—å®ç°ï¼Œåªéœ€å¾ˆå°‘çš„å¹³å°èƒ¶æ°´ä»£ç </li>
<li>ç›´æ¥åœ¨åŸç”Ÿå±‚è®¿é—®è®¾å¤‡èƒ½åŠ›ï¼ˆç›¸æœºã€è“ç‰™ã€GPS ç­‰ï¼‰ï¼Œå¹¶æš´éœ²ç»™ JS ä½¿ç”¨ï¼ŒåŒæ—¶ä¿æŒé«˜æ€§èƒ½</li>
<li>å°†å¤æ‚å®ä¾‹å¯¹è±¡ï¼ˆæ•°æ®åº“è¿æ¥ã€å›¾åƒç¼“å†²ã€éŸ³é¢‘æ ·æœ¬ç­‰ï¼‰ç›´æ¥æš´éœ²ç»™ JS å±‚ï¼Œè€Œä¸æ˜¯ä¸€å † JSON æ•°æ®</li>
</ul>
</li>
</ol>
<h5 data-id="heading-5">JSI vs Bridge</h5>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Bridge (æ—§æ¶æ„)</th><th>JSI (æ–°æ¶æ„)</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ–¹å¼</strong></td><td>JSON åºåˆ—åŒ–/ååºåˆ—åŒ–</td><td>ç›´æ¥å†…å­˜è®¿é—®</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æ…¢ï¼ˆæ¯æ¬¡è°ƒç”¨éƒ½åºåˆ—åŒ–ï¼‰</td><td>å¿«ï¼ˆé›¶åºåˆ—åŒ–å¼€é”€ï¼‰</td></tr><tr><td><strong>åŒæ­¥è°ƒç”¨</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>ç±»å‹å®‰å…¨</strong></td><td>âŒ è¿è¡Œæ—¶æ£€æŸ¥</td><td>âœ… C++ ç±»å‹ç³»ç»Ÿ</td></tr><tr><td><strong>å†…å­˜å¼€é”€</strong></td><td>é«˜ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰</td><td>ä½ï¼ˆç›´æ¥å¼•ç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">JSI ç±»å‹ç³»ç»Ÿ</h3>
<h5 data-id="heading-7">ç±»å‹å±‚çº§ç»“æ„</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">ICast</span> (æ¥å£)
  â””â”€ <span class="hljs-title class_">Runtime</span> (æŠ½è±¡ç±»)

<span class="hljs-title class_">Pointer</span> (åŸºç±» - ä¸å¯æ‹·è´ï¼Œå¯ç§»åŠ¨)
  â”œâ”€ <span class="hljs-title class_">PropNameID</span> (å±æ€§å)
  â”œâ”€ <span class="hljs-title class_">Symbol</span> (<span class="hljs-title class_">ES6</span> <span class="hljs-title class_">Symbol</span>)
  â”œâ”€ <span class="hljs-title class_">BigInt</span> (å¤§æ•´æ•°)
  â”œâ”€ <span class="hljs-title class_">String</span> (å­—ç¬¦ä¸²)
  â””â”€ <span class="hljs-title class_">Object</span> (å¯¹è±¡)
       â”œâ”€ <span class="hljs-title class_">Array</span> (æ•°ç»„)
       â”œâ”€ <span class="hljs-title class_">ArrayBuffer</span> (äºŒè¿›åˆ¶ç¼“å†²åŒº)
       â””â”€ <span class="hljs-title class_">Function</span> (å‡½æ•°)

<span class="hljs-title class_">Value</span> (è”åˆç±»å‹ - å¯å­˜å‚¨ä»»æ„ <span class="hljs-variable constant_">JS</span> å€¼)
  â”œâ”€ <span class="hljs-literal">undefined</span>
  â”œâ”€ <span class="hljs-literal">null</span>
  â”œâ”€ <span class="hljs-built_in">boolean</span>
  â”œâ”€ <span class="hljs-built_in">number</span>
  â”œâ”€ <span class="hljs-title class_">Symbol</span>
  â”œâ”€ <span class="hljs-title class_">BigInt</span>
  â”œâ”€ <span class="hljs-title class_">String</span>
  â””â”€ <span class="hljs-title class_">Object</span>
</code></pre>
<h5 data-id="heading-8">Runtime - JS å¼•æ“æŠ½è±¡</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Runtime</span> : <span class="hljs-keyword">public</span> ICast {
 <span class="hljs-keyword">public</span>:
  <span class="hljs-comment">// 1. æ‰§è¡Œ JavaScript ä»£ç </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Value <span class="hljs-title">evaluateJavaScript</span><span class="hljs-params">(
      <span class="hljs-type">const</span> std::shared_ptr&lt;<span class="hljs-type">const</span> Buffer&gt;&amp; buffer,
      <span class="hljs-type">const</span> std::string&amp; sourceURL)</span> </span>= <span class="hljs-number">0</span>;

  <span class="hljs-comment">// 2. åˆ›å»º JS å¯¹è±¡</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Object <span class="hljs-title">createObject</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Array <span class="hljs-title">createArray</span><span class="hljs-params">(<span class="hljs-type">size_t</span> length)</span> </span>= <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Function <span class="hljs-title">createFunctionFromHostFunction</span><span class="hljs-params">(
      <span class="hljs-type">const</span> PropNameID&amp; name,
      <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> paramCount,
      HostFunctionType func)</span> </span>= <span class="hljs-number">0</span>;

  <span class="hljs-comment">// 3. è®¿é—®å…¨å±€å¯¹è±¡</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Object <span class="hljs-title">global</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;

  <span class="hljs-comment">// 4. å±æ€§æ“ä½œ</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> Value <span class="hljs-title">getProperty</span><span class="hljs-params">(<span class="hljs-type">const</span> Object&amp;, <span class="hljs-type">const</span> PropNameID&amp; name)</span> </span>= <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">setPropertyValue</span><span class="hljs-params">(
      <span class="hljs-type">const</span> Object&amp;, <span class="hljs-type">const</span> PropNameID&amp; name, <span class="hljs-type">const</span> Value&amp; value)</span> </span>= <span class="hljs-number">0</span>;

  <span class="hljs-comment">// 5. å¾®ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">queueMicrotask</span><span class="hljs-params">(<span class="hljs-type">const</span> Function&amp; callback)</span> </span>= <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">bool</span> <span class="hljs-title">drainMicrotasks</span><span class="hljs-params">(<span class="hljs-type">int</span> maxMicrotasksHint = <span class="hljs-number">-1</span>)</span> </span>= <span class="hljs-number">0</span>;
};
</code></pre>
<p><strong>å¼•æ“çš„å…·ä½“å®ç°ï¼ˆå¦‚ï¼šHermesã€JSCã€V8ï¼‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Hermes å®ç°ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HermesRuntime</span> : <span class="hljs-keyword">public</span> Runtime {
 <span class="hljs-keyword">public</span>:
  <span class="hljs-function">Value <span class="hljs-title">evaluateJavaScript</span><span class="hljs-params">(...)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-comment">// Hermes ç‰¹å®šçš„ JS æ‰§è¡Œé€»è¾‘</span>
  }

  <span class="hljs-function">Object <span class="hljs-title">createObject</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-comment">// è°ƒç”¨ Hermes API åˆ›å»ºå¯¹è±¡</span>
  }
};
</code></pre>
<h5 data-id="heading-9">Value - é€šç”¨ JS å€¼ç±»å‹</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Value</span> {
 <span class="hljs-keyword">private</span>:
  <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ValueKind</span> {
    UndefinedKind,
    NullKind,
    BooleanKind,
    NumberKind,
    SymbolKind,
    BigIntKind,
    StringKind,
    ObjectKind,
  };

  <span class="hljs-keyword">union</span> <span class="hljs-title class_">Data</span> {
    <span class="hljs-type">bool</span> boolean;
    <span class="hljs-type">double</span> number;
    Pointer pointer;  <span class="hljs-comment">// Symbol/String/Object</span>
  };

  ValueKind kind_;
  Data data_;  <span class="hljs-comment">// 8 å­—èŠ‚ï¼ˆ64 ä½ï¼‰</span>
};
</code></pre>
<p><strong>ç±»å‹æ£€æŸ¥ä¸è½¬æ¢</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processValue</span><span class="hljs-params">(Runtime&amp; runtime, <span class="hljs-type">const</span> Value&amp; value)</span> </span>{
  <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isUndefined</span>()) {
    <span class="hljs-comment">// å¤„ç† undefined</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isNull</span>()) {
    <span class="hljs-comment">// å¤„ç† null</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isBool</span>()) {
    <span class="hljs-type">bool</span> b = value.<span class="hljs-built_in">getBool</span>();  <span class="hljs-comment">// æ–­è¨€æ£€æŸ¥</span>
    <span class="hljs-type">bool</span> b2 = value.<span class="hljs-built_in">asBool</span>();  <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isNumber</span>()) {
    <span class="hljs-type">double</span> d = value.<span class="hljs-built_in">getNumber</span>();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isString</span>()) {
    String str = value.<span class="hljs-built_in">getString</span>(runtime);
    std::string utf8 = str.<span class="hljs-built_in">utf8</span>(runtime);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">isObject</span>()) {
    Object obj = value.<span class="hljs-built_in">getObject</span>(runtime);
  }
}
</code></pre>
<h5 data-id="heading-10">Object - JS å¯¹è±¡</h5>
<p><strong>åˆ›å»ºå¯¹è±¡</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. ç©ºå¯¹è±¡</span>
<span class="hljs-function">Object <span class="hljs-title">obj</span><span class="hljs-params">(runtime)</span></span>;  <span class="hljs-comment">// ç­‰ä»·äº JS: {}</span>

<span class="hljs-comment">// 2. å¸¦åŸå‹çš„å¯¹è±¡</span>
Value proto = runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">getProperty</span>(runtime, <span class="hljs-string">"MyPrototype"</span>);
Object obj = Object::<span class="hljs-built_in">create</span>(runtime, proto);

<span class="hljs-comment">// 3. HostObjectï¼ˆC++ å¯¹è±¡ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHostObject</span> : <span class="hljs-keyword">public</span> HostObject {
  <span class="hljs-function">Value <span class="hljs-title">get</span><span class="hljs-params">(Runtime&amp; rt, <span class="hljs-type">const</span> PropNameID&amp; name)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">if</span> (name.<span class="hljs-built_in">utf8</span>(rt) == <span class="hljs-string">"value"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>);
    }
    <span class="hljs-keyword">return</span> Value::<span class="hljs-built_in">undefined</span>();
  }
};

<span class="hljs-keyword">auto</span> ho = std::<span class="hljs-built_in">make_shared</span>&lt;MyHostObject&gt;();
Object obj = Object::<span class="hljs-built_in">createFromHostObject</span>(runtime, ho);
</code></pre>
<p><strong>å±æ€§æ“ä½œ</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">Object <span class="hljs-title">obj</span><span class="hljs-params">(runtime)</span></span>;

<span class="hljs-comment">// è®¾ç½®å±æ€§ï¼ˆæ”¯æŒå¤šç§ç±»å‹ï¼‰</span>
obj.<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>);  <span class="hljs-comment">// const char*</span>
obj.<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"age"</span>, <span class="hljs-number">30</span>);       <span class="hljs-comment">// int</span>
obj.<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"active"</span>, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// bool</span>

<span class="hljs-comment">// è·å–å±æ€§</span>
Value name = obj.<span class="hljs-built_in">getProperty</span>(runtime, <span class="hljs-string">"name"</span>);
<span class="hljs-keyword">if</span> (name.<span class="hljs-built_in">isString</span>()) {
  std::string str = name.<span class="hljs-built_in">getString</span>(runtime).<span class="hljs-built_in">utf8</span>(runtime);
}

<span class="hljs-comment">// æ£€æŸ¥å±æ€§</span>
<span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">hasProperty</span>(runtime, <span class="hljs-string">"age"</span>)) {
  <span class="hljs-comment">// å±æ€§å­˜åœ¨</span>
}

<span class="hljs-comment">// åˆ é™¤å±æ€§</span>
obj.<span class="hljs-built_in">deleteProperty</span>(runtime, <span class="hljs-string">"age"</span>);
</code></pre>
<h5 data-id="heading-11">Function - JS å‡½æ•°</h5>
<p><strong>åˆ›å»º C++ å‡½æ•°ä¾› JS è°ƒç”¨</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®šä¹‰ C++ lambdaå‡½æ•°</span>
<span class="hljs-keyword">auto</span> myFunc = [](Runtime&amp; runtime,
                  <span class="hljs-type">const</span> Value&amp; thisVal,
                  <span class="hljs-type">const</span> Value* args,
                  <span class="hljs-type">size_t</span> count) -&gt; Value {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">JSError</span>(runtime, <span class="hljs-string">"Expected 2 arguments"</span>);
  }

  <span class="hljs-keyword">if</span> (!args[<span class="hljs-number">0</span>].<span class="hljs-built_in">isNumber</span>() || !args[<span class="hljs-number">1</span>].<span class="hljs-built_in">isNumber</span>()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">JSError</span>(runtime, <span class="hljs-string">"Arguments must be numbers"</span>);
  }

  <span class="hljs-comment">// æ‰§è¡Œé€»è¾‘</span>
  <span class="hljs-type">double</span> sum = args[<span class="hljs-number">0</span>].<span class="hljs-built_in">getNumber</span>() + args[<span class="hljs-number">1</span>].<span class="hljs-built_in">getNumber</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Value</span>(sum);
};

<span class="hljs-comment">// æ³¨å†Œåˆ°å…¨å±€å¯¹è±¡</span>
<span class="hljs-keyword">auto</span> funcName = PropNameID::forAscii(runtime, <span class="hljs-string">"myAdd"</span>);
Function func = Function::<span class="hljs-built_in">createFromHostFunction</span>(
    runtime, funcName, <span class="hljs-number">2</span>, myFunc);

runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"myAdd"</span>, func);

<span class="hljs-comment">// JS ä¸­è°ƒç”¨ï¼š</span>
<span class="hljs-comment">// const result = myAdd(10, 20);  // 30</span>
</code></pre>
<p><strong>ä» C++ è°ƒç”¨ JS å‡½æ•°</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è·å– JS å‡½æ•°</span>
Value callback = obj.<span class="hljs-built_in">getProperty</span>(runtime, <span class="hljs-string">"onClick"</span>);
<span class="hljs-keyword">if</span> (callback.<span class="hljs-built_in">isObject</span>() &amp;&amp; callback.<span class="hljs-built_in">getObject</span>(runtime).<span class="hljs-built_in">isFunction</span>(runtime)) {
  Function func = callback.<span class="hljs-built_in">getObject</span>(runtime).<span class="hljs-built_in">getFunction</span>(runtime);

  <span class="hljs-comment">// æ–¹å¼ 1ï¼šæ—  thisï¼Œä¼ é€’å‚æ•°</span>
  Value result = func.<span class="hljs-built_in">call</span>(runtime, <span class="hljs-built_in">Value</span>(<span class="hljs-number">10</span>), <span class="hljs-built_in">Value</span>(<span class="hljs-number">20</span>));

  <span class="hljs-comment">// æ–¹å¼ 2ï¼šå¸¦ this ä¸Šä¸‹æ–‡</span>
  <span class="hljs-function">Object <span class="hljs-title">thisObj</span><span class="hljs-params">(runtime)</span></span>;
  Value result2 = func.<span class="hljs-built_in">callWithThis</span>(runtime, thisObj, <span class="hljs-built_in">Value</span>(<span class="hljs-number">10</span>));

  <span class="hljs-comment">// æ–¹å¼ 3ï¼šä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨</span>
  Value instance = func.<span class="hljs-built_in">callAsConstructor</span>(runtime, <span class="hljs-built_in">Value</span>(<span class="hljs-string">"arg1"</span>));
}
</code></pre>
<h5 data-id="heading-12">Array - JS æ•°ç»„</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºæ•°ç»„</span>
Array arr = Array::<span class="hljs-built_in">createWithElements</span>(runtime, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// è®¿é—®å…ƒç´ </span>
<span class="hljs-type">size_t</span> length = arr.<span class="hljs-built_in">size</span>(runtime);
<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
  Value element = arr.<span class="hljs-built_in">getValueAtIndex</span>(runtime, i);
}

<span class="hljs-comment">// ä¿®æ”¹å…ƒç´ </span>
arr.<span class="hljs-built_in">setValueAtIndex</span>(runtime, <span class="hljs-number">0</span>, <span class="hljs-built_in">Value</span>(<span class="hljs-number">100</span>));

<span class="hljs-comment">// è½¬æ¢ä¸ºæ™®é€š Object</span>
Object obj = arr.<span class="hljs-built_in">asObject</span>(runtime);  <span class="hljs-comment">// ç±»å‹å®‰å…¨è½¬æ¢</span>
</code></pre>
<h3 data-id="heading-13">JSä¸C++çš„è°ƒç”¨æœºåˆ¶</h3>
<h4 data-id="heading-14">HostObject</h4>
<p><code>HostObject</code>æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†ä¸€ä¸ªC++å¯¹è±¡ç›´æ¥æš´éœ²ç»™JSå±‚ä½¿ç”¨ã€‚</p>
<p>æ›´å…·ä½“çš„è¯´ï¼š</p>
<ul>
<li><code>HostObject</code>Â æ˜¯ä¸€ä¸ªÂ <strong>C++ ç±»</strong>ï¼Œå®Œæ•´çš„ç±»æ˜¯Â <code>facebook::jsi::HostObject</code></li>
<li>ä½ å¯ä»¥é€šè¿‡å®ƒæŠŠ<strong>åŸç”Ÿå¯¹è±¡ï¼ˆä¾‹å¦‚å›¾ç‰‡ã€å­˜å‚¨ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰æš´éœ²ç»™ JS</strong></li>
<li>JS è®¿é—®å®ƒçš„å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œçœ‹èµ·æ¥å°±åƒåœ¨ç”¨æ™®é€šçš„ JS å¯¹è±¡</li>
</ul>
<p><strong>å¦‚ä½•ä½¿ç”¨<code>HostObject</code>ï¼Ÿ</strong></p>
<h5 data-id="heading-15">1.åœ¨ C++ ä¸­å®šä¹‰ HostObjectï¼š</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeStorage</span> : <span class="hljs-keyword">public</span> facebook::jsi::HostObject {
<span class="hljs-keyword">public</span>:
  <span class="hljs-type">int</span> expirationTime = <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>; <span class="hljs-comment">// é»˜è®¤ 1 å¤©</span>

  <span class="hljs-comment">// è¯»å±æ€§ï¼šnativeStorage.xxx</span>
  <span class="hljs-function">jsi::Value <span class="hljs-title">get</span><span class="hljs-params">(jsi::Runtime&amp; runtime, <span class="hljs-type">const</span> jsi::PropNameID&amp; name)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">auto</span> prop = name.<span class="hljs-built_in">utf8</span>(runtime);
    <span class="hljs-keyword">if</span> (prop == <span class="hljs-string">"expirationTime"</span>) {
      <span class="hljs-keyword">return</span> jsi::<span class="hljs-built_in">Value</span>(expirationTime);
    }

    <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿”å›â€œæ–¹æ³•â€ï¼Œä¾‹å¦‚ setObject / objectï¼ˆè§åæ–‡ï¼‰</span>
    <span class="hljs-comment">// å¦åˆ™ï¼š</span>
    <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">undefined</span>();
  }

  <span class="hljs-comment">// å†™å±æ€§ï¼šnativeStorage.xxx = ...</span>
  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set</span><span class="hljs-params">(jsi::Runtime&amp; runtime, <span class="hljs-type">const</span> jsi::PropNameID&amp; name, <span class="hljs-type">const</span> jsi::Value&amp; value)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">auto</span> prop = name.<span class="hljs-built_in">utf8</span>(runtime);
    <span class="hljs-keyword">if</span> (prop == <span class="hljs-string">"expirationTime"</span> &amp;&amp; value.<span class="hljs-built_in">isNumber</span>()) {
      expirationTime = (<span class="hljs-type">int</span>)value.<span class="hljs-built_in">asNumber</span>();
    }
  }
};
</code></pre>
<p>è¿™é‡Œ<code>get</code>æ–¹æ³•ç›¸å½“äºåœ¨å®šä¹‰ï¼š<strong>JS ä¸­è®¿é—®æŸä¸ªå±æ€§åæ—¶ï¼Œåº•å±‚åˆ°åº•è¦æ“ä½œå“ªä¸ª C++ å­—æ®µæˆ–æ‰§è¡Œä»€ä¹ˆé€»è¾‘</strong>ã€‚</p>
<h5 data-id="heading-16">2.æŠŠ HostObject å®ä¾‹æŒ‚åˆ° JS è¿è¡Œæ—¶</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">NativeStorage::install</span><span class="hljs-params">(jsi::Runtime&amp; runtime)</span> </span>{
  <span class="hljs-comment">// åˆ›å»ºNativeStorageå¯¹è±¡</span>
  <span class="hljs-keyword">auto</span> instance = std::<span class="hljs-built_in">make_shared</span>&lt;NativeStorage&gt;();

  <span class="hljs-comment">// å†ä» HostObject åˆ›å»º JS å¯¹è±¡</span>
  <span class="hljs-keyword">auto</span> object = jsi::Object::<span class="hljs-built_in">createFromHostObject</span>(runtime, instance);

  <span class="hljs-comment">// æŒ‚åˆ° global ä¸Šï¼Œä¾› JS ä½¿ç”¨ï¼šglobal.nativeStorage</span>
  runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"nativeStorage"</span>, object);
}
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¸ºå®‰è£…ï¼Œåœ¨é€‚å½“çš„æ—¶æœºï¼ˆé€šå¸¸æ˜¯ JS runtime å·²ç»åˆ›å»ºå¥½ä¹‹åï¼‰ï¼Œè°ƒç”¨è¿™ä¸ªÂ <code>install</code>Â å°±è¡Œã€‚</p>
<h5 data-id="heading-17">3.åœ¨ JS ä¾§ä½¿ç”¨</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å±æ€§è¯»å†™ï¼šå¯¹åº” C++ ä¸­ get/set è¦†å†™</span>
nativeStorage.<span class="hljs-property">expirationTime</span> = <span class="hljs-number">1000</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nativeStorage.<span class="hljs-property">expirationTime</span>);  <span class="hljs-comment">// -&gt; 1000</span>
</code></pre>
<p>ä» JS è§†è§’çœ‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼›ä» C++ è§†è§’çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒæœ‰åŸç”Ÿèµ„æºå’Œé€»è¾‘çš„ç±»å®ä¾‹ã€‚</p>
<h5 data-id="heading-18">4.æ·»åŠ æ–¹æ³•</h5>
<p><code>HostObject</code>Â ä¸åªå¯ä»¥æš´éœ²æ•°æ®å±æ€§ï¼Œè¿˜å¯ä»¥åœ¨Â <code>get()</code>Â ä¸­ç»™æŸä¸ªå±æ€§åè¿”å›ä¸€ä¸ªÂ <strong>HostFunction</strong>ï¼Œè¿™æ ·è¿™ä¸ªå±æ€§åœ¨ JS ä¸­å°±æ˜¯ä¸€ä¸ªÂ <strong>å¯è°ƒç”¨æ–¹æ³•</strong>ã€‚</p>
<p>ä¾‹å¦‚åœ¨ä¸Šé¢Â <code>NativeStorage</code>Â çš„åŸºç¡€ä¸Šï¼Œç»™å®ƒåŠ ä¸ŠÂ <code>setObject</code>Â /Â <code>object</code>Â æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">jsi::Value <span class="hljs-title">get</span><span class="hljs-params">(jsi::Runtime&amp; runtime, <span class="hljs-type">const</span> jsi::PropNameID&amp; name)</span> <span class="hljs-keyword">override</span> </span>{
  <span class="hljs-keyword">auto</span> prop = name.<span class="hljs-built_in">utf8</span>(runtime);

  <span class="hljs-keyword">if</span> (prop == <span class="hljs-string">"expirationTime"</span>) {
    <span class="hljs-keyword">return</span> jsi::<span class="hljs-built_in">Value</span>(expirationTime);
  }

  <span class="hljs-keyword">if</span> (prop == <span class="hljs-string">"setObject"</span>) {
    <span class="hljs-keyword">return</span> jsi::Function::<span class="hljs-built_in">createFromHostFunction</span>(
      runtime,
      jsi::PropNameID::forAscii(runtime, <span class="hljs-string">"setObject"</span>),
      <span class="hljs-number">2</span>, <span class="hljs-comment">// å‚æ•°ä¸ªæ•°ï¼škey, value</span>
      [](jsi::Runtime&amp; rt, <span class="hljs-type">const</span> jsi::Value&amp; thisVal,
         <span class="hljs-type">const</span> jsi::Value* args, <span class="hljs-type">size_t</span> count) -&gt; jsi::Value {
        <span class="hljs-comment">// è¿™é‡Œåšå‚æ•°è½¬æ¢ + åŸç”Ÿå­˜å‚¨é€»è¾‘</span>
        <span class="hljs-comment">// æ¯”å¦‚ç”¨ NSUserDefaults æˆ– SharedPreferences ç­‰</span>
        <span class="hljs-keyword">return</span> jsi::<span class="hljs-built_in">Value</span>(<span class="hljs-literal">true</span>);
      }
    );
  }

  <span class="hljs-keyword">if</span> (prop == <span class="hljs-string">"object"</span>) {
    <span class="hljs-keyword">return</span> jsi::Function::<span class="hljs-built_in">createFromHostFunction</span>(
      runtime,
      jsi::PropNameID::forAscii(runtime, <span class="hljs-string">"object"</span>),
      <span class="hljs-number">1</span>,
      [](jsi::Runtime&amp; rt, <span class="hljs-type">const</span> jsi::Value&amp; thisVal,
         <span class="hljs-type">const</span> jsi::Value* args, <span class="hljs-type">size_t</span> count) -&gt; jsi::Value {
        <span class="hljs-comment">// è¿™é‡Œä»åŸç”Ÿå­˜å‚¨ä¸­è¯»å–å¹¶è¿”å›</span>
        <span class="hljs-comment">// return jsi::String::createFromUtf8(rt, ...);</span>
        <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">undefined</span>();
      }
    );
  }

  <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">undefined</span>();
}
</code></pre>
<p>é‚£ä¹ˆåœ¨JS å±‚å°±å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js">nativeStorage.<span class="hljs-title function_">setObject</span>(<span class="hljs-string">'greeting'</span>, <span class="hljs-string">'Hello JSI!'</span>);
<span class="hljs-keyword">const</span> text = nativeStorage.<span class="hljs-title function_">object</span>(<span class="hljs-string">'greeting'</span>);
</code></pre>
<h4 data-id="heading-19">C++ è°ƒç”¨JS</h4>
<p>è°ƒç”¨ JS å‡½æ•°ï¼Œå¤§æ¦‚å¯ä»¥åˆ†ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯å›è°ƒå‡½æ•°å’ŒPromise äº¤äº’</p>
<h5 data-id="heading-20">å›è°ƒå‡½æ•°</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">registerClickHandler</span><span class="hljs-params">(Runtime&amp; runtime)</span> </span>{
  <span class="hljs-comment">// è·å– JS å›è°ƒ</span>
  Value onClickValue = runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">getProperty</span>(runtime, <span class="hljs-string">"onClick"</span>);

  <span class="hljs-keyword">if</span> (!onClickValue.<span class="hljs-built_in">isObject</span>()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">JSError</span>(runtime, <span class="hljs-string">"onClick is not defined"</span>);
  }

  Object onClickObj = onClickValue.<span class="hljs-built_in">getObject</span>(runtime);
  <span class="hljs-keyword">if</span> (!onClickObj.<span class="hljs-built_in">isFunction</span>(runtime)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">JSError</span>(runtime, <span class="hljs-string">"onClick is not a function"</span>);
  }

  Function onClick = onClickObj.<span class="hljs-built_in">getFunction</span>(runtime);

  <span class="hljs-comment">// C++ äº‹ä»¶è§¦å‘æ—¶è°ƒç”¨</span>
  <span class="hljs-comment">// å¿…é¡»åœ¨ JS çº¿ç¨‹æ‰§è¡Œ</span>
  onClick.<span class="hljs-built_in">call</span>(runtime, 
      String::<span class="hljs-built_in">createFromAscii</span>(runtime, <span class="hljs-string">"button1"</span>),
      <span class="hljs-built_in">Value</span>(<span class="hljs-number">100</span>),  <span class="hljs-comment">// x</span>
      <span class="hljs-built_in">Value</span>(<span class="hljs-number">200</span>)); <span class="hljs-comment">// y</span>
}
</code></pre>
<h5 data-id="heading-21">Promise äº¤äº’</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">Value <span class="hljs-title">createPromise</span><span class="hljs-params">(Runtime&amp; runtime)</span> </span>{
  <span class="hljs-comment">// è·å– Promise æ„é€ å‡½æ•°</span>
  Object promiseConstructor = runtime.<span class="hljs-built_in">global</span>()
      .<span class="hljs-built_in">getPropertyAsObject</span>(runtime, <span class="hljs-string">"Promise"</span>);

  <span class="hljs-comment">// åˆ›å»º executor å‡½æ•°</span>
  <span class="hljs-keyword">auto</span> executor = [](Runtime&amp; rt, <span class="hljs-type">const</span> Value&amp;, <span class="hljs-type">const</span> Value* args, <span class="hljs-type">size_t</span> count) {
    Function resolve = args[<span class="hljs-number">0</span>].<span class="hljs-built_in">getObject</span>(rt).<span class="hljs-built_in">getFunction</span>(rt);
    Function reject = args[<span class="hljs-number">1</span>].<span class="hljs-built_in">getObject</span>(rt).<span class="hljs-built_in">getFunction</span>(rt);

    <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
    std::<span class="hljs-built_in">thread</span>([&amp;rt, resolve = std::<span class="hljs-built_in">move</span>(resolve)]() <span class="hljs-keyword">mutable</span> {
      std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));

      <span class="hljs-comment">// å®é™…éœ€è¦ MessageQueue è°ƒåº¦</span>
      resolve.<span class="hljs-built_in">call</span>(rt, <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));
    }).<span class="hljs-built_in">detach</span>();

    <span class="hljs-keyword">return</span> Value::<span class="hljs-built_in">undefined</span>();
  };

  Function executorFunc = Function::<span class="hljs-built_in">createFromHostFunction</span>(
      runtime,
      PropNameID::forAscii(runtime, <span class="hljs-string">"executor"</span>),
      <span class="hljs-number">2</span>,
      executor);

  <span class="hljs-comment">// è°ƒç”¨ new Promise(executor)</span>
  <span class="hljs-keyword">return</span> promiseConstructor.<span class="hljs-built_in">asFunction</span>(runtime)
      .<span class="hljs-built_in">callAsConstructor</span>(runtime, executorFunc);
}
</code></pre>
<h5 data-id="heading-22">è®¿é—® JS å¯¹è±¡å±æ€§</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">opObject</span><span class="hljs-params">(Runtime&amp; runtime, <span class="hljs-type">const</span> Object&amp; obj)</span> </span>{
  <span class="hljs-comment">// 1. è·å–æ‰€æœ‰å±æ€§å</span>
  Array propNames = obj.<span class="hljs-built_in">getPropertyNames</span>(runtime);
  <span class="hljs-type">size_t</span> length = propNames.<span class="hljs-built_in">size</span>(runtime);

  std::cout &lt;&lt; <span class="hljs-string">"Object properties:"</span> &lt;&lt; std::endl;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
    Value nameValue = propNames.<span class="hljs-built_in">getValueAtIndex</span>(runtime, i);
    <span class="hljs-keyword">if</span> (nameValue.<span class="hljs-built_in">isString</span>()) {
      std::string name = nameValue.<span class="hljs-built_in">getString</span>(runtime).<span class="hljs-built_in">utf8</span>(runtime);

      <span class="hljs-comment">// 2. è·å–å±æ€§å€¼</span>
      Value propValue = obj.<span class="hljs-built_in">getProperty</span>(runtime, name.<span class="hljs-built_in">c_str</span>());

      <span class="hljs-comment">// 3. ç±»å‹åˆ¤æ–­</span>
      std::string type;
      <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isUndefined</span>()) type = <span class="hljs-string">"undefined"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isNull</span>()) type = <span class="hljs-string">"null"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isBool</span>()) type = <span class="hljs-string">"boolean"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isNumber</span>()) type = <span class="hljs-string">"number"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isString</span>()) type = <span class="hljs-string">"string"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propValue.<span class="hljs-built_in">isObject</span>()) type = <span class="hljs-string">"object"</span>;

      std::cout &lt;&lt; <span class="hljs-string">"  "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; type &lt;&lt; std::endl;
    }
  }
}
</code></pre>
<h3 data-id="heading-23">çº¿ç¨‹å®‰å…¨</h3>
<p>ç”±äºJSIå¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœç›´æ¥åœ¨å­çº¿ç¨‹è°ƒç”¨JSIçš„ç›¸å…³æ¥å£ï¼Œä¼šå¯¼è‡´é—ªé€€ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨JSIæ—¶ï¼Œçº¿ç¨‹å®‰å…¨é—®é¢˜ååˆ†é‡è¦ï¼Œå¿…é¡»è°¨æ…ã€‚</p>
<ul>
<li><code>jsi::Runtime</code> çš„å®ç°ï¼ˆHermes/JSC/V8ï¼‰å…¶å†…éƒ¨çŠ¶æ€ã€GCã€å¯¹è±¡åˆ†é…éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li>å¿…é¡»ä¿è¯æ‰€æœ‰ JSI æ“ä½œåœ¨<strong>å•ä¸€ JS çº¿ç¨‹</strong>ä¸Šä¸²è¡Œæ‰§è¡Œ</li>
<li>è·¨çº¿ç¨‹è®¿é—®ä¼šå¯¼è‡´æ•°æ®ç«äº‰ã€å†…å­˜æŸåã€å´©æºƒ</li>
</ul>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹JSIæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œæºç <code>react-native/packages/react-native/ReactCommon/callinvoker/ReactCommon/CallInvoker.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CallInvoker</span> {
 <span class="hljs-keyword">public</span>:
  <span class="hljs-comment">// å¼‚æ­¥è°ƒåº¦åˆ° JS çº¿ç¨‹ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">invokeAsync</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>(jsi::Runtime&amp;)&gt;&amp;&amp; func)</span> <span class="hljs-keyword">noexcept</span> </span>= <span class="hljs-number">0</span>;
  
  <span class="hljs-comment">// åŒæ­¥è°ƒç”¨ï¼ˆé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ° JS çº¿ç¨‹æ‰§è¡Œå®Œæˆï¼‰</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">invokeSync</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>(jsi::Runtime&amp;)&gt;&amp;&amp; func)</span> </span>= <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">CallInvoker</span>() = <span class="hljs-keyword">default</span>;
};
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡<code>invokeAsync</code>æŠŠæ‰§è¡Œç›¸å…³JSIæ“ä½œçš„é—­åŒ…å‘é€åˆ°JSçº¿ç¨‹æ‰§è¡Œã€‚è¿™é‡Œçš„<code>invokeAsync</code>å¯ä»¥ä»ä»»æ„çº¿ç¨‹å®‰å…¨è°ƒç”¨ï¼Œä¸é˜»å¡JSçº¿ç¨‹ã€‚æ³¨æ„ï¼ŒJSçº¿ç¨‹çš„é˜»å¡ï¼Œä¼šç›´æ¥å¯¼è‡´UIçš„å¡é¡¿ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªç»“åˆPromiseçš„JSIå¼‚æ­¥çº¿ç¨‹å¤„ç†çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;jsi/jsi.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ReactCommon/CallInvoker.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> facebook::jsi;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkModule</span> : <span class="hljs-keyword">public</span> jsi::HostObject {
 <span class="hljs-keyword">private</span>:
  std::shared_ptr&lt;CallInvoker&gt; jsInvoker_;

 <span class="hljs-keyword">public</span>:
  <span class="hljs-built_in">NetworkModule</span>(std::shared_ptr&lt;CallInvoker&gt; jsInvoker) 
      : <span class="hljs-built_in">jsInvoker_</span>(std::<span class="hljs-built_in">move</span>(jsInvoker)) {}

  <span class="hljs-function">Value <span class="hljs-title">get</span><span class="hljs-params">(Runtime&amp; runtime, <span class="hljs-type">const</span> PropNameID&amp; name)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">auto</span> methodName = name.<span class="hljs-built_in">utf8</span>(runtime);
  
    <span class="hljs-keyword">if</span> (methodName == <span class="hljs-string">"fetchAsync"</span>) {
      <span class="hljs-keyword">return</span> unction::<span class="hljs-built_in">createFromHostFunction</span>(
          runtime,
          name,
          <span class="hljs-number">1</span>,
          [<span class="hljs-keyword">this</span>](Runtime&amp; rt, <span class="hljs-type">const</span> Value&amp;, <span class="hljs-type">const</span> Value* args, <span class="hljs-type">size_t</span> count) -&gt; Value {
            std::string url = args[<span class="hljs-number">0</span>].<span class="hljs-built_in">getString</span>(rt).<span class="hljs-built_in">utf8</span>(rt);
        
            <span class="hljs-comment">// 1. è·å– Promise æ„é€ å‡½æ•°</span>
            Object promiseConstructor = rt.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">getPropertyAsObject</span>(rt, <span class="hljs-string">"Promise"</span>);
        
            <span class="hljs-comment">// 2. åˆ›å»º executor å‡½æ•°</span>
            <span class="hljs-keyword">auto</span> executor = Function::<span class="hljs-built_in">createFromHostFunction</span>(
                rt,
                PropNameID::forAscii(rt, <span class="hljs-string">"executor"</span>),
                <span class="hljs-number">2</span>,
                [<span class="hljs-keyword">this</span>, url](Runtime&amp; runtime, <span class="hljs-type">const</span> Value&amp;, <span class="hljs-type">const</span> Value* args, <span class="hljs-type">size_t</span>) -&gt; Value {
                  <span class="hljs-comment">// 3. ä¿å­˜ resolve/rejectï¼ˆä½¿ç”¨ shared_ptr å»¶é•¿ç”Ÿå‘½å‘¨æœŸï¼‰</span>
                  <span class="hljs-keyword">auto</span> resolve = std::<span class="hljs-built_in">make_shared</span>&lt;Function&gt;(
                      args[<span class="hljs-number">0</span>].<span class="hljs-built_in">getObject</span>(rt).<span class="hljs-built_in">getFunction</span>(rt));
                  <span class="hljs-keyword">auto</span> reject = std::<span class="hljs-built_in">make_shared</span>&lt;Function&gt;(
                      args[<span class="hljs-number">1</span>].<span class="hljs-built_in">getObject</span>(rt).<span class="hljs-built_in">getFunction</span>(rt));
              
                  <span class="hljs-comment">// 4. åå°çº¿ç¨‹æ‰§è¡Œ</span>
                  std::<span class="hljs-built_in">thread</span>([<span class="hljs-keyword">this</span>, resolve, reject, url]() {
                    <span class="hljs-keyword">try</span> {
                      <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
                      std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));
                      std::string result = <span class="hljs-string">"Response from "</span> + url;
                  
                      <span class="hljs-comment">// 5. è°ƒåº¦åˆ° JS çº¿ç¨‹</span>
                      jsInvoker_-&gt;<span class="hljs-built_in">invokeAsync</span>([resolve, result](Runtime&amp; rt) {
                        <span class="hljs-comment">// createFromUtf8 è¿™ç±»JSI APIå¿…é¡»åœ¨JSçº¿ç¨‹æ‰§è¡Œ</span>
                        resolve-&gt;<span class="hljs-built_in">call</span>(rt, String::<span class="hljs-built_in">createFromUtf8</span>(rt, result));
                      });
                    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
                      jsInvoker_-&gt;<span class="hljs-built_in">invokeAsync</span>([reject, msg = std::<span class="hljs-built_in">string</span>(e.<span class="hljs-built_in">what</span>())](Runtime&amp; rt) {
                        reject-&gt;<span class="hljs-built_in">call</span>(rt, String::<span class="hljs-built_in">createFromUtf8</span>(rt, msg));
                      });
                    }
                  }).<span class="hljs-built_in">detach</span>();
              
                  <span class="hljs-keyword">return</span> Value::<span class="hljs-built_in">undefined</span>();
                });
        
            <span class="hljs-comment">// 6. è¿”å› new Promise(executor)</span>
            <span class="hljs-keyword">return</span> promiseConstructor.<span class="hljs-built_in">asFunction</span>(rt).<span class="hljs-built_in">callAsConstructor</span>(rt, executor);
          });
    }
  
    <span class="hljs-keyword">return</span> Value::<span class="hljs-built_in">undefined</span>();
  }
};
</code></pre>
<p>è¿™æ ·ï¼Œä¸Šå±‚JS è°ƒç”¨<code>fetchAsync</code>æ–¹æ³•æ—¶ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ª<strong>Promise</strong>å¯¹è±¡ï¼Œç›´åˆ°åº•å±‚çš„å­çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡åï¼Œå°†ç»“æœè¿”å›ï¼Œä¸Šå±‚Promiseæ‰ä¼šè¿”å›ç»“æœã€‚æ•´ä¸ªè€—æ—¶æ“ä½œéƒ½ç”±åº•å±‚C++çº¿ç¨‹å®Œæˆï¼Œä¸ä¼šé˜»å¡JSçº¿ç¨‹ï¼Œåœ¨æ•´ä¸ªè€—æ—¶ä»»åŠ¡æœŸé—´ï¼ŒJSçº¿ç¨‹éƒ½å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-24">ä¸€äº›å·¥å…·ç±»</h4>
<p>å…³äº<code>Promise</code> è¾…åŠ©ç±»çš„ä½¿ç”¨ã€‚å¯ä»¥æŸ¥çœ‹å¤´æ–‡ä»¶<code>react-native/packages/react-native/ReactCommon/react/nativemodule/core/ReactCommon/TurboModuleUtils.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Promise</span> : <span class="hljs-keyword">public</span> LongLivedObject {
  <span class="hljs-built_in">Promise</span>(jsi::Runtime &amp;rt, jsi::Function resolve, jsi::Function reject);

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">resolve</span><span class="hljs-params">(<span class="hljs-type">const</span> jsi::Value &amp;result)</span></span>;
  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reject</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string &amp;message)</span></span>;

  jsi::Function resolve_;
  jsi::Function reject_;
};

<span class="hljs-keyword">using</span> PromiseSetupFunctionType = std::function&lt;<span class="hljs-built_in">void</span>(jsi::Runtime &amp;rt, std::shared_ptr&lt;Promise&gt;)&gt;;
<span class="hljs-function">jsi::Value <span class="hljs-title">createPromiseAsJSIValue</span><span class="hljs-params">(jsi::Runtime &amp;rt, PromiseSetupFunctionType &amp;&amp;func)</span></span>;

} 
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœ¨ HostFunction ä¸­è¿”å› Promise</span>
<span class="hljs-keyword">return</span> <span class="hljs-built_in">createPromiseAsJSIValue</span>(rt, [jsInvoker](Runtime&amp; rt, std::shared_ptr&lt;Promise&gt; promise) {
  <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
  std::<span class="hljs-built_in">thread</span>([jsInvoker, promise]() {
    <span class="hljs-comment">// åå°å·¥ä½œ...</span>
  
    <span class="hljs-comment">// å®Œæˆåè°ƒåº¦åˆ° JS çº¿ç¨‹</span>
    jsInvoker-&gt;<span class="hljs-built_in">invokeAsync</span>([promise](Runtime&amp; rt) {
      promise-&gt;<span class="hljs-built_in">resolve</span>(<span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));  <span class="hljs-comment">// æˆ– promise-&gt;reject("error")</span>
    });
  }).<span class="hljs-built_in">detach</span>();
});
</code></pre>
<p><code>LongLivedObject</code> å¯ä»¥é˜²æ­¢è¿‡æ—©çš„å†…å­˜å›æ”¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyData</span> : <span class="hljs-keyword">public</span> LongLivedObject {
 <span class="hljs-keyword">public</span>:
  <span class="hljs-built_in">MyData</span>(Runtime&amp; rt) : <span class="hljs-built_in">LongLivedObject</span>(rt) {}
  
  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">done</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">allowRelease</span>();  <span class="hljs-comment">// å…è®¸è¢«å›æ”¶</span>
  }
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">auto</span> data = std::<span class="hljs-built_in">make_shared</span>&lt;MyData&gt;(runtime);
LongLivedObjectCollection::<span class="hljs-built_in">get</span>(runtime).<span class="hljs-built_in">add</span>(data);  <span class="hljs-comment">// é˜²æ­¢å›æ”¶</span>
<span class="hljs-comment">// ... ä½¿ç”¨ data</span>
data-&gt;<span class="hljs-built_in">allowRelease</span>();  <span class="hljs-comment">// ä¸éœ€è¦æ—¶è®°å¾—é‡Šæ”¾</span>
</code></pre>
<h4 data-id="heading-25">å¸¸è§é”™è¯¯ç¤ºä¾‹</h4>
<h5 data-id="heading-26">é”™è¯¯ 1ï¼šç›´æ¥åœ¨åå°çº¿ç¨‹è°ƒç”¨ JSI</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âŒ é”™è¯¯</span>
std::<span class="hljs-built_in">thread</span>([&amp;runtime, callback]() {
  callback.<span class="hljs-built_in">call</span>(runtime, <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));  <span class="hljs-comment">// CRASH!</span>
}).<span class="hljs-built_in">detach</span>();

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
std::<span class="hljs-built_in">thread</span>([jsInvoker, callback = std::<span class="hljs-built_in">move</span>(callback)]() <span class="hljs-keyword">mutable</span> {
  jsInvoker-&gt;<span class="hljs-built_in">invokeAsync</span>([callback = std::<span class="hljs-built_in">move</span>(callback)](Runtime&amp; rt) {
    callback.<span class="hljs-built_in">call</span>(rt, <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));
  });
}).<span class="hljs-built_in">detach</span>();
</code></pre>
<h5 data-id="heading-27">é”™è¯¯ 2ï¼šåœ¨å¼‚æ­¥å›è°ƒä¸­ç›´æ¥ä½¿ç”¨ runtime å¼•ç”¨</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šruntime å¼•ç”¨å¯èƒ½å¤±æ•ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">asyncOp</span><span class="hljs-params">(Runtime&amp; runtime, Function callback)</span> </span>{
  std::<span class="hljs-built_in">thread</span>([&amp;runtime, callback]() {  <span class="hljs-comment">// å¼•ç”¨æ•è·å±é™©</span>
    jsInvoker-&gt;<span class="hljs-built_in">invokeAsync</span>([&amp;runtime, callback](Runtime&amp;) {
      callback.<span class="hljs-built_in">call</span>(runtime, <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));  <span class="hljs-comment">// runtime å¯èƒ½å·²é”€æ¯</span>
    });
  }).<span class="hljs-built_in">detach</span>();
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ lambda ä¼ å…¥çš„ runtime</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">asyncOp</span><span class="hljs-params">(Runtime&amp; runtime, Function callback, std::shared_ptr&lt;CallInvoker&gt; jsInvoker)</span> </span>{
  jsInvoker-&gt;<span class="hljs-built_in">invokeAsync</span>([callback = std::<span class="hljs-built_in">move</span>(callback)](Runtime&amp; rt) {
    callback.<span class="hljs-built_in">call</span>(rt, <span class="hljs-built_in">Value</span>(<span class="hljs-number">42</span>));  <span class="hljs-comment">// ä½¿ç”¨ lambda å‚æ•°rt</span>
  });
}
</code></pre>
<h5 data-id="heading-28">é”™è¯¯ 3ï¼šå¿˜è®° Promise ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šPromise å¯èƒ½è¢«é‡Šæ”¾</span>
<span class="hljs-keyword">auto</span> promise = std::<span class="hljs-built_in">make_shared</span>&lt;Promise&gt;(rt, resolve, reject);
std::<span class="hljs-built_in">thread</span>([promise]() {
  <span class="hljs-comment">// Promise å¯èƒ½è¢«é‡Šæ”¾</span>
}).<span class="hljs-built_in">detach</span>();

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ createPromiseAsJSIValueï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰</span>
<span class="hljs-keyword">return</span> <span class="hljs-built_in">createPromiseAsJSIValue</span>(rt, [](Runtime&amp; rt, std::shared_ptr&lt;Promise&gt; promise) {
  <span class="hljs-comment">// promise å·²è‡ªåŠ¨åŠ å…¥ LongLivedObjectCollection</span>
});
</code></pre>
<p>å…³äº<code>createPromiseAsJSIValue</code>å‡½æ•°ï¼Œå‰é¢å·²ç»æ¼”ç¤ºè¿‡äº†ã€‚</p>
<h3 data-id="heading-29">é”™è¯¯å¤„ç†</h3>
<p>çœ‹ä¸€ä¸ªå®Œæ•´JSIé”™è¯¯å¤„ç†ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">Value <span class="hljs-title">safeCall</span><span class="hljs-params">(Runtime&amp; runtime, <span class="hljs-type">const</span> Function&amp; func, <span class="hljs-type">const</span> Value* args, <span class="hljs-type">size_t</span> count)</span> </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> func.<span class="hljs-built_in">call</span>(runtime, args, count);
  } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> JSError&amp; e) {
    <span class="hljs-comment">// JS å¼‚å¸¸</span>
    std::cerr &lt;&lt; <span class="hljs-string">"JS Error: "</span> &lt;&lt; e.<span class="hljs-built_in">getMessage</span>() &lt;&lt; std::endl;
    std::cerr &lt;&lt; <span class="hljs-string">"Stack: "</span> &lt;&lt; e.<span class="hljs-built_in">getStack</span>() &lt;&lt; std::endl;
    <span class="hljs-keyword">throw</span>;
  } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> JSINativeException&amp; e) {
    <span class="hljs-comment">// JSI åŸç”Ÿå¼‚å¸¸</span>
    std::cerr &lt;&lt; <span class="hljs-string">"Native Error: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    <span class="hljs-keyword">throw</span>;
  } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
    <span class="hljs-comment">// å…¶ä»– C++ å¼‚å¸¸</span>
    std::cerr &lt;&lt; <span class="hljs-string">"C++ Error: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">JSError</span>(runtime, e.<span class="hljs-built_in">what</span>());
  }
}
</code></pre>
<p>è¿½è¸ªè¯¦ç»†çš„å¼‚å¸¸æ ˆï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">executeWithStackTrace</span><span class="hljs-params">(Runtime&amp; runtime, <span class="hljs-type">const</span> std::string&amp; code)</span> </span>{
  <span class="hljs-keyword">try</span> {
    runtime.<span class="hljs-built_in">evaluateJavaScript</span>(
        std::<span class="hljs-built_in">make_shared</span>&lt;StringBuffer&gt;(code),
        <span class="hljs-string">"debug.js"</span>);
  } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> JSError&amp; e) {
    std::cerr &lt;&lt; <span class="hljs-string">"=== JavaScript Error ==="</span> &lt;&lt; std::endl;
    std::cerr &lt;&lt; <span class="hljs-string">"Message: "</span> &lt;&lt; e.<span class="hljs-built_in">getMessage</span>() &lt;&lt; std::endl;
    std::cerr &lt;&lt; <span class="hljs-string">"Stack:\n"</span> &lt;&lt; e.<span class="hljs-built_in">getStack</span>() &lt;&lt; std::endl;
  
    <span class="hljs-comment">// å¯ä»¥è¿›ä¸€æ­¥è§£æå †æ ˆ</span>
    <span class="hljs-function">std::istringstream <span class="hljs-title">stream</span><span class="hljs-params">(e.getStack())</span></span>;
    std::string line;
    <span class="hljs-type">int</span> frameNum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(stream, line)) {
      std::cerr &lt;&lt; <span class="hljs-string">"  #"</span> &lt;&lt; frameNum++ &lt;&lt; <span class="hljs-string">" "</span> &lt;&lt; line &lt;&lt; std::endl;
    }
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[useRefå­˜åœ¨çš„æ½œåœ¨æ€§èƒ½é—®é¢˜]]></title>    <link>https://juejin.cn/post/7594322573453475883</link>    <guid>https://juejin.cn/post/7594322573453475883</guid>    <pubDate>2026-01-13T02:39:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573453475883" data-draft-id="7594627998838849578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="useRefå­˜åœ¨çš„æ½œåœ¨æ€§èƒ½é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T02:39:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jolyne_"/> <meta itemprop="url" content="https://juejin.cn/user/339101640827981"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            useRefå­˜åœ¨çš„æ½œåœ¨æ€§èƒ½é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/339101640827981/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jolyne_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:39:39.000Z" title="Tue Jan 13 2026 02:39:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨å­¦ä¹ ahooksæºç æ—¶ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fahooks.js.org%2Fzh-CN%2Fhooks%2Fuse-creation" target="_blank" title="https://ahooks.js.org/zh-CN/hooks/use-creation" ref="nofollow noopener noreferrer">useCreation</a>æ—¶ï¼Œå‘ç°å®˜æ–¹æ–‡æ¡£å†™äº†è¿™æ ·ä¸€å¥è¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b70e4c251d0a4d06aa342f709b111f9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=%2FA5cQGm%2FBd%2BevL0JexOBkFm0Xv0%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸€çœ¼åï¼Œæˆ‘å¿ƒæƒ³ï¼šuseRef ä¸æ˜¯åªä¼šæ‰§è¡Œä¸€æ¬¡å—ï¼Ÿå¹¶ä¸”ä¸ä¼šéšç»„ä»¶ç”Ÿå‘½å‘¨æœŸå˜åŒ–å—ï¼Ÿç„¶åæ ¹æ®å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­è¯•äº†ä¸€ä¸‹ï¼Œå‘ç° useRef åœ¨å­˜å‚¨å¤æ‚æ•°æ®ç±»å‹æ—¶ï¼ˆæ¯”å¦‚å¯¹è±¡ï¼‰ï¼Œç¡®å®æœ‰æ€§èƒ½é—®é¢˜</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"===constructor==="</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
  }
  <span class="hljs-attr">data</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">RefQuestion</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">RefQuestion</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { current } = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>());
  <span class="hljs-keyword">const</span> [, setFlag] = <span class="hljs-title function_">useState</span>({});
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pt-10"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{current.data}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
          setFlag({});
        }}
      &gt;
        Rerender
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RefQuestion</span>;
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡ <code>new Subject()</code>ï¼Œæ§åˆ¶å°ä¼šæ‰“å°ä¸€æ¬¡ <code>===constructor===</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b792171f824047799cd042c99e3a7213~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=2Da7KxYhRJecArUBIJzqNARDCME%3D" alt="image.png" loading="lazy"/></p>
<p>å½“æˆ‘ç‚¹å‡»æŒ‰é’®è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œè™½ç„¶æ¸²æŸ“çš„å€¼æ²¡æœ‰å˜ï¼Œä½†æ˜¯æ§åˆ¶å°ä¾æ—§æ‰“å°äº†<code>===constructor===</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/038f6c0d4bd443359d963521ef4d81ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=MWyx9HvnMJXJyL0wDe5luu8Lzv8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯è¯´æ˜ï¼šç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œè™½ç„¶Reactå†…éƒ¨åˆ¤æ–­åï¼Œè¿”å›äº†é¦–æ¬¡æ¸²æŸ“æ—¶çš„å€¼ï¼Œ<code>ä½†æ˜¯åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œ new Subject() å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œå³ä½¿æ¯æ¬¡å®ä¾‹åŒ–åï¼Œéƒ½ä¸¢å¼ƒäº†å®ä¾‹åŒ–å¯¹è±¡</code>ï¼Œè€Œé‡å¤å®ä¾‹åŒ–å¯¹è±¡å°±æ˜¯ä¸€ç§<code>æ— æ•ˆçš„å†…å­˜å¼€é”€</code>ï¼Œå³æ€§èƒ½å­˜åœ¨éšæ‚£</p>
<p>å› æ­¤æˆ‘é‡æ–°çœ‹äº†ä¸‹Reactæ–‡æ¡£å¯¹äº useRef çš„è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2fa1ebe91464e6c95138a340ee862cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=xY34SjVqTcng75%2FTPsoYdPrsmzk%3D" alt="image.png" loading="lazy"/></p>
<p>å¯è§ React å®˜æ–¹å°±å·²ç»å¯¹è¿™ç§æƒ…å†µè¿›è¡Œäº†è¯´æ˜ï¼Œå¹¶ä¸”ä¹Ÿç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œæ€æƒ³ä¸<code>å•ä¾‹æ¨¡å¼</code>ä¸€è‡´</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Video</span>(<span class="hljs-params"/>) {  
    <span class="hljs-keyword">const</span> playerRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);  
    <span class="hljs-keyword">if</span> (playerRef.<span class="hljs-property">current</span> === <span class="hljs-literal">null</span>) {  
        playerRef.<span class="hljs-property">current</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoPlayer</span>();  
    }  
    <span class="hljs-comment">// ...</span>
</code></pre>
<p>ç„¶åæˆ‘ä»¬å›è¿‡å¤´æ¥ï¼Œå¯ä»¥çœ‹çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fahooks.js.org%2Fzh-CN%2Fhooks%2Fuse-creation" target="_blank" title="https://ahooks.js.org/zh-CN/hooks/use-creation" ref="nofollow noopener noreferrer">useCreation</a> æ˜¯æ€ä¹ˆåšçš„</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">DependencyList</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> depsAreSame <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/depsAreSame'</span>;

<span class="hljs-keyword">const</span> useCreation = &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">factory: () =&gt; T, deps: DependencyList</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { current } = <span class="hljs-title function_">useRef</span>({
    deps,
    <span class="hljs-attr">obj</span>: <span class="hljs-literal">undefined</span> <span class="hljs-keyword">as</span> T,
    <span class="hljs-attr">initialized</span>: <span class="hljs-literal">false</span>,
  });
  <span class="hljs-keyword">if</span> (current.<span class="hljs-property">initialized</span> === <span class="hljs-literal">false</span> || !<span class="hljs-title function_">depsAreSame</span>(current.<span class="hljs-property">deps</span>, deps)) {
    current.<span class="hljs-property">deps</span> = deps;
    current.<span class="hljs-property">obj</span> = <span class="hljs-title function_">factory</span>();
    current.<span class="hljs-property">initialized</span> = <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> current.<span class="hljs-property">obj</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useCreation;
</code></pre>
<ul>
<li>å¦‚æœæ˜¯é¦–æ¬¡æ¸²æŸ“ï¼ˆ<code>initialized === false</code>ï¼‰æˆ–è€… ä¾èµ–é¡¹å‘ç”Ÿäº†æ”¹å˜ï¼ˆ<code>!depsAreSame(current.deps, deps)</code>ï¼‰ï¼Œåˆ™æ‰§è¡Œ <code>factory()</code>å‡½æ•°åˆ›å»ºå€¼</li>
<li>å¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œç›´æ¥è¿”å›ä¹‹å‰çš„å€¼ï¼ˆ<code>æ­¤æ—¶ä¸ä¼šèµ° factory()</code>ï¼‰</li>
</ul>
<p>è¿™æ ·å°±ä¿è¯äº†é€šè¿‡ useCreation åˆ›å»ºçš„å€¼ä¸€å®šæ˜¯ memosizedï¼Œä¾èµ–æ”¹å˜å‰æ˜¯ä¿è¯ä¸ä¼šé‡æ–°è®¡ç®—çš„</p>
<p>æˆ‘ä»¬å°† useCreation ä»£æ›¿ useRef è¯•è¯•</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useCreation } <span class="hljs-keyword">from</span> <span class="hljs-string">"ahooks"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"===constrcutor====="</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
  }
  <span class="hljs-attr">data</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">RefQuestion</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">RefQuestion</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [flag, setFlag] = <span class="hljs-title function_">useState</span>({});
  <span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">useCreation</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>(), []);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pt-10"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{foo.data}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
          setFlag({});
        }}
      &gt;
        Rerender
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RefQuestion</span>;
</code></pre>
<p>ç‚¹å‡»æŒ‰é’®ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¸ä¼šæ‰§è¡Œ new Subject() çš„å®ä¾‹åŒ–è¿‡ç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e1181a6b21c418cb0e485c27047d9ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=vUNJsNePjjK5sczsj2qyIuoJIxY%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£å¦‚æœä¾èµ–å‘ç”Ÿæ”¹å˜ï¼Œæ¯æ¬¡ä¹Ÿåªä¼šé‡æ–°è®¡ç®—ä¸€æ¬¡</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useCreation } <span class="hljs-keyword">from</span> <span class="hljs-string">"ahooks"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"===constrcutor====="</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
  }
  <span class="hljs-attr">data</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">RefQuestion</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">RefQuestion</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [flag, setFlag] = <span class="hljs-title function_">useState</span>({});
  <span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">useCreation</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>(), [flag]);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pt-10"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{foo.data}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
          setFlag({});
        }}
      &gt;
        Rerender
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RefQuestion</span>;
</code></pre>
<p>å¦‚å›¾ï¼Œæˆ‘ç‚¹å‡»äº†å…«æ¬¡æŒ‰é’®ï¼Œä¾èµ–æ”¹å˜äº†å…«æ¬¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62722c74b4224a328181f072ead8eda8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768876779&amp;x-signature=ghAu0BYpwmF%2BLI0SbFCNLeT800A%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼ŒuseRefå¹¶ä¸æ˜¯åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œæ˜¯æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½æ‰§è¡Œï¼Œåªä¸è¿‡å¦‚æœä¹‹å‰æœ‰ç»“æœå°±è¿”å›ä¹‹å‰çš„ç»“æœè€Œå·²ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´é£å£é¡¹ç›®ï¼šAIæ¼«å‰§æ€ä¹ˆåšï¼Ÿè¿™å¥—â€œå‚»ç“œå¼â€æ•™ç¨‹è¯·æ”¶å¥½]]></title>    <link>https://juejin.cn/post/7594722586732789766</link>    <guid>https://juejin.cn/post/7594722586732789766</guid>    <pubDate>2026-01-14T06:52:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594722586732789766" data-draft-id="7594863660296912938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´é£å£é¡¹ç›®ï¼šAIæ¼«å‰§æ€ä¹ˆåšï¼Ÿè¿™å¥—â€œå‚»ç“œå¼â€æ•™ç¨‹è¯·æ”¶å¥½"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-14T06:52:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MobotStone"/> <meta itemprop="url" content="https://juejin.cn/user/3839909554568840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´é£å£é¡¹ç›®ï¼šAIæ¼«å‰§æ€ä¹ˆåšï¼Ÿè¿™å¥—â€œå‚»ç“œå¼â€æ•™ç¨‹è¯·æ”¶å¥½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3839909554568840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MobotStone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T06:52:37.000Z" title="Wed Jan 14 2026 06:52:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>åˆ·æŠ–éŸ³ã€å°çº¢ä¹¦çš„æ—¶å€™ï¼Œä½ æ˜¯ä¸æ˜¯ç»å¸¸åˆ·åˆ°é‚£ç§â€œAIåšçš„æ¼«ç”»è§†é¢‘â€ï¼Ÿ</strong></p>
<p>è¿™äº›AIæ¼«å‰§çœŸçš„è¶Šæ¥è¶Šç«ï¼šéšä¾¿ä¸€æ¡å°±æ˜¯å‡ åä¸‡ç‚¹èµï¼Œè¿˜æœ‰ä¸å°‘äººç”¨å®ƒåšå†…å®¹é¡ºä¾¿å®ç°å˜ç°ã€‚</p>
<p>ä½†å¾ˆå¤šæ–°æ‰‹ä¸€å¼€å§‹å°±å®¹æ˜“å¡ä½ï¼š</p>
<ul>
<li>åˆ°åº•è¯¥ç”¨å“ªäº›å·¥å…·ï¼Ÿ</li>
<li>ä»â€œå†™å‰§æƒ…â€åˆ°â€œåšæˆè§†é¢‘â€ï¼Œå…·ä½“è¦èµ°å“ªäº›æ­¥éª¤ï¼Ÿ</li>
<li>è‡ªå·±æ²¡åŸºç¡€ã€ä¸ä¼šç”»ç”»ã€ä¹Ÿä¸å¤ªä¼šå‰ªè¾‘ï¼Œæ˜¯ä¸æ˜¯å°±åšä¸äº†ï¼Ÿ</li>
</ul>
<p>åˆ«æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘æŠŠè‡ªå·±äº²æµ‹å¥½ç”¨çš„ AI æ¼«å‰§åˆ¶ä½œæµç¨‹ï¼ŒæŒ‰æ­¥éª¤æ•´ç†æˆä¸€å¥—â€œç…§ç€åšå°±è¡Œâ€çš„æ–¹æ³•ï¼›å¹¶ä¸”æŠŠæ¯ä¸ªé˜¶æ®µéœ€è¦çš„æ ¸å¿ƒå·¥å…·ä¹Ÿåˆ—å‡ºæ¥ã€‚ä½ ä¸éœ€è¦å¤æ‚æŠ€å·§ï¼Œå“ªæ€•æ˜¯çº¯å°ç™½ï¼Œç…§ç€æµç¨‹èµ°ï¼Œé€šå¸¸ 1â€“2 å¤©å°±èƒ½åšå‡ºä½ çš„ç¬¬ä¸€é›†ã€‚</p>
<h2 data-id="heading-0"><strong>ä¸€ã€å…ˆæŠŠåº•å±‚æ€è·¯ææ˜ç™½ï¼šåšAIæ¼«å‰§ï¼Œé€‰å¯¹å·¥å…·æ¯”çç ”ç©¶é‡è¦å¤šäº†</strong></h2>
<p>å¾ˆå¤šæ–°æ‰‹ä¸€ä¸Šæ¥å°±å®¹æ˜“â€œåŠé€€â€ï¼Œç”±äºæ˜¯æ»¡ä¸–ç•Œä¹±æ‰¾è½¯ä»¶ï¼Œç»“æœä¸æ˜¯åŠŸèƒ½å¯¹ä¸ä¸Šï¼Œå°±æ˜¯æ“ä½œå¤ªéš¾æ ¹æœ¬å­¦ä¸ä¼šã€‚</p>
<p>å…¶å®ï¼ŒåšAIæ¼«å‰§æ²¡é‚£ä¹ˆå¤æ‚ï¼Œä½ æŠŠå®ƒæƒ³è±¡æˆä¸€æ¡æµæ°´çº¿ï¼Œä¸€å…±å°±åªåˆ†å…­ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>å‰§æœ¬åˆ›ä½œ â†’ è§’è‰²/åœºæ™¯è®¾è®¡ â†’ åˆ†é•œåˆ¶ä½œ â†’ åŠ¨ç”»ç”Ÿæˆ â†’ é…éŸ³/é…ä¹ â†’ åæœŸåˆæˆ</strong></p>
<p>åƒä¸‡åˆ«è´ªå¤šï¼åœ¨æ¯ä¸€ä¸ªæ­¥éª¤é‡Œï¼Œä½ åªéœ€è¦æ­»ç£•1åˆ°2ä¸ªæœ€é¡ºæ‰‹ã€æœ€å¥½ç”¨çš„å·¥å…·å°±è¶³å¤Ÿäº†ã€‚å·¥å…·é€‰å¯¹äº†ï¼Œä½ çš„åˆ¶ä½œæ•ˆç‡ç›´æ¥èµ·é£ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/512dc7d5460049caa001c6535b5737cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978357&amp;x-signature=iYLU1O8fTQV%2F4CNm7kMtayuVRSw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>äºŒã€AI æ¼«å‰§åˆ¶ä½œæ–°æ‰‹å·¥å…·åŒ…</strong></h2>
<h3 data-id="heading-2"><strong>ï¼ˆä¸€ï¼‰æå®šå‰§æœ¬ï¼ˆæ•…äº‹æ˜¯çµé­‚ï¼‰</strong></h3>
<p>å¸¸ç”¨å·¥å…·ï¼šGPT-5.2ã€Gemini 3 proã€è±†åŒ…ã€DeepSeekï¼ˆæ·±åº¦æ±‚ç´¢ï¼‰</p>
<p><strong>æ€ä¹ˆåšï¼ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼‰ï¼š</strong></p>
<p>1ï¼‰<strong>å…ˆæŠŠâ€œå…³é”®ä¿¡æ¯â€å–‚ç»™AIï¼Œè®©å®ƒå‡ºç¬¬ä¸€ç‰ˆå‰§æƒ…</strong></p>
<p>ä½ åªéœ€è¦æä¾›å‡ ä¸ªæ ¸å¿ƒè¦ç´ ï¼š<strong>ä¸»é¢˜</strong>ï¼ˆè®²ä»€ä¹ˆï¼‰ï¼<strong>è§’è‰²</strong>ï¼ˆè°æ¥æ¼”ï¼‰ï¼<strong>é£æ ¼</strong>ï¼ˆæç¬‘ã€çƒ­è¡€ã€æ‚¬ç–‘ç­‰ï¼‰ï¼<strong>é›†æ•°</strong>ï¼ˆæ‰“ç®—åšå‡ é›†ï¼‰ï¼ŒAIä¼šæ ¹æ®è¿™äº›å†…å®¹å…ˆç”Ÿæˆä¸€ä¸ª<strong>å‰§æœ¬åˆç¨¿</strong>ï¼Œç›¸å½“äºâ€œæ‰“ä¸ªåº•â€ã€‚</p>
<p>2ï¼‰<strong>è‡ªå·±å†æŠŠå‰§æœ¬â€œé¡ºä¸€éâ€ï¼ŒæŠŠä¸åˆç†çš„åœ°æ–¹æ”¹é¡º</strong></p>
<p>é‡ç‚¹æ£€æŸ¥ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li><strong>å¯¹è¯åƒä¸åƒçœŸäººè¯´è¯</strong>ï¼ˆåˆ«å¤ªå°¬ã€åˆ«å¤ªé•¿ï¼‰</li>
<li><strong>å‰§æƒ…å‰åæ˜¯å¦è¿è´¯</strong>ï¼ˆåˆ«çªç„¶è·³å‰§æƒ…ã€äººç‰©åˆ«å‰åçŸ›ç›¾ï¼‰</li>
</ul>
<p>3ï¼‰<strong>æŠŠå¤§å‰§æœ¬æ‹†æˆå•é›†ï¼Œå¹¶æ§åˆ¶æ¯é›†æ—¶é•¿</strong></p>
<ul>
<li>æ–°æ‰‹å»ºè®®æ¯é›†åš<strong>1ï½1.5åˆ†é’Ÿ</strong>ï¼Œæ›´å®¹æ˜“åšå®Œã€ä¹Ÿæ›´ç¬¦åˆçŸ­è§†é¢‘èŠ‚å¥ã€‚</li>
<li>æ¯ä¸€é›†ç»“å°¾éƒ½è¦ç•™ä¸€ä¸ª**â€œé’©å­â€**ï¼ˆæ‚¬å¿µ/åè½¬/é—®é¢˜ï¼‰ï¼Œè®©è§‚ä¼—æƒ³ç‚¹ä¸‹ä¸€é›†ã€‚</li>
</ul>
<p>æ ¸å¿ƒæŠ€å·§ï¼ˆè®©AIå†™å¾—æ›´å¯¹å‘³ï¼‰</p>
<ul>
<li>
<p><strong>æç¤ºè¯è¦å†™å…·ä½“ä¸€ç‚¹</strong>ï¼Œè¶Šå…·ä½“è¶Šå¥½ç”¨ã€‚æ¯”å¦‚ï¼š</p>
<p>â€œæ ¡å›­å¥‡å¹»é¢˜æï¼Œä¸»è§’æ˜¯ä¸€åªä¼šè¯´è¯çš„çŒ«ï¼Œæ¯é›†ç»“å°¾éƒ½è¦ç•™æ‚¬å¿µã€‚â€</p>
</li>
<li>
<p><strong>åˆ«ä¸€ä¸Šæ¥å°±æå¤æ‚æ”¯çº¿</strong>ï¼šæ–°æ‰‹æœ€å®¹æ˜“å†™ç€å†™ç€å¤±æ§ã€‚</p>
<p>å»ºè®®æ¯é›†åªå›´ç»•<strong>ä¸€ä¸ªå°å†²çª</strong>å±•å¼€ï¼ˆä¾‹å¦‚è¯¯ä¼šã€æŒ‘æˆ˜ã€å‘ç°çº¿ç´¢ï¼‰ï¼ŒçŸ­å°æ¸…æ™°ã€äº§å‡ºæ›´ç¨³ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3"><strong>ï¼ˆäºŒï¼‰æ‰“é€ è§’è‰²å’Œåœºæ™¯ï¼ˆè§’è‰² &amp; åœºæ™¯è®¾è®¡ï¼‰</strong></h3>
<p>è¿™ä¸€æ­¥è¦åšçš„äº‹å¾ˆç®€å•ï¼šå…ˆæŠŠâ€œä¸»è§’é•¿ä»€ä¹ˆæ ·â€å®šä¸‹æ¥ï¼Œå†æŠŠâ€œæ•…äº‹å‘ç”Ÿåœ¨å“ªâ€æ­å‡ºæ¥ï¼Œæœ€åè®©æ‰€æœ‰å›¾ç‰‡çœ‹èµ·æ¥åƒåŒä¸€éƒ¨åŠ¨ç”»é‡Œçš„ã€‚</p>
<h4 data-id="heading-4">1ï¼‰å¸¸ç”¨å·¥å…·</h4>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ä½ å¯ä»¥é€‰æ‹©ä¸‹é¢è¿™äº›å·¥å…·æ¥ç”Ÿæˆå›¾ç‰‡ï¼š</p>
<ul>
<li><strong>Nano banana Pro</strong>(2025å¹´ä¸‹åŠå¹´çˆ†ç«ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„)</li>
<li><strong>MidJourney</strong>ï¼ˆç”»è´¨å¾ˆå¼ºï¼Œç›®å‰æœ€ç«ï¼‰</li>
<li><strong>Stable Diffusion</strong>ï¼ˆåŠŸèƒ½å¼ºå¤§ï¼Œç”šè‡³å¯ä»¥åœ¨è‡ªå·±ç”µè„‘ä¸Šè·‘ï¼‰</li>
<li><strong>å³æ¢¦</strong>ï¼ˆå›½å†…å·¥å…·ï¼Œä¸­æ–‡æ›´å‹å¥½ï¼Œè®¿é—®ä¹Ÿæ–¹ä¾¿ï¼‰</li>
</ul>
<h4 data-id="heading-5">2ï¼‰å…·ä½“æ€ä¹ˆåšï¼Ÿåˆ†ä¸‰æ­¥èµ°</h4>
<p><strong>â‘  å…ˆåšè§’è‰²è®¾å®šï¼ˆæŠŠä¸»è§’â€œå®šå‹â€ï¼‰</strong></p>
<p>ç”¨å·¥å…·ç”Ÿæˆå‡ å¼ è§’è‰²å›¾ï¼Œç„¶åæŠŠå…³é”®ä¿¡æ¯è®°ä¸‹æ¥/æ ‡æ³¨æ¸…æ¥šï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å¤–è²Œï¼šå‘å‹ã€å‘è‰²ã€äº”å®˜ç‰¹ç‚¹ã€èº«é«˜ä½“å‹</li>
<li>æœè£…ï¼šæ ¡æœæ¬¾å¼ã€é…é¥°ã€é‹å­ç­‰</li>
<li>æ°”è´¨/æ€§æ ¼ï¼šæ´»æ³¼ã€å†·é™ã€å…ƒæ°”ã€å­¦éœ¸æ„Ÿâ€¦â€¦</li>
</ul>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯åé¢ä½ å†ç”Ÿæˆæ–°å›¾ï¼Œè§’è‰²ä¸ä¼šâ€œè¶Šç”»è¶Šä¸åƒâ€ã€‚</p>
<p><strong>â‘¡ å†åšåœºæ™¯å¸ƒç½®ï¼ˆæŠŠâ€œèˆå°â€æ­å¥½ï¼‰</strong></p>
<p>æ ¹æ®å‰§æƒ…éœ€è¦ç”Ÿæˆåœºæ™¯å›¾ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>â€œé›¨å¤©æ•™å®¤â€</li>
<li>â€œæ˜Ÿç©ºæ“åœºâ€</li>
<li>â€œèµ°å»Šâ€â€œå›¾ä¹¦é¦†â€â€œå¤©å°â€ç­‰</li>
</ul>
<p>åœºæ™¯å…ˆä¸ç”¨è¿½æ±‚ç‰¹åˆ«å¤æ‚ï¼Œå…ˆæŠŠæ°›å›´å’Œä¸»è¦å…ƒç´ åšå‡ºæ¥å°±è¡Œã€‚</p>
<p><strong>â‘¢ æœ€åç»Ÿä¸€é£æ ¼ï¼ˆè®©å®ƒä»¬åƒåŒä¸€ä¸ªç³»åˆ—ï¼‰</strong></p>
<p>ä»ç”Ÿæˆçš„è§’è‰²å›¾å’Œåœºæ™¯å›¾é‡Œï¼ŒæŒ‘é€‰ç”»é£æœ€æ¥è¿‘çš„ä¸€æ‰¹ï¼Œæ”¾è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹/ç´ æåº“ï¼š</p>
<ul>
<li>ä»¥åéƒ½ä¼˜å…ˆç”¨è¿™æ‰¹ä½œä¸ºå‚è€ƒ</li>
<li>ç”»é£ä¸ä¸€è‡´çš„å…ˆæ·˜æ±°æˆ–å•ç‹¬æ”¾ä¸€è¾¹</li>
</ul>
<p>ç›®æ ‡æ˜¯ï¼šä½ ä¸€çœ¼çœ‹è¿‡å»ï¼Œä¼šè§‰å¾—â€œè¿™å°±æ˜¯åŒä¸€éƒ¨ä½œå“â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8987b368ecbc4aa5bc0cd24493383bfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978357&amp;x-signature=GmFnShHQK0YPCMHFJmtQ2XNY7SE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">3ï¼‰æ ¸å¿ƒæŠ€å·§ï¼ˆæ–°æ‰‹æœ€è¯¥è®°ä½çš„ï¼‰</h4>
<ul>
<li>åœ¨æç¤ºè¯é‡ŒåŠ ä¸Šæ˜ç¡®çš„é£æ ¼é™åˆ¶ï¼Œæ¯”å¦‚å†™â€œ<strong>åŠ¨æ¼«é£æ ¼</strong>â€â€œ<strong>Studio Ghibli(å®«å´éªåŠ¨æ¼«é£æ ¼)é£æ ¼</strong>â€ä¹‹ç±»çš„æè¿°ï¼ˆå¦‚â€œåŠ¨æ¼«é£æ ¼â€ã€â€œçš®å…‹æ–¯é£æ ¼â€ï¼‰ï¼Œæ•ˆæœç«‹ç«¿è§å½±ã€‚</li>
<li>æŠŠæ•ˆæœå¥½çš„æç¤ºè¯ä¿å­˜ä¸‹æ¥ï¼Œåé¢ç›´æ¥å¤åˆ¶æ”¹å‡ ä¸ªè¯å°±èƒ½å¤ç”¨ï¼Œæ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚</li>
</ul>
<h3 data-id="heading-7"><strong>ï¼ˆä¸‰ï¼‰æŠŠæ•…äº‹å˜æˆç”»é¢ï¼ˆåˆ†é•œåˆ¶ä½œï¼‰</strong></h3>
<p>åˆ†é•œï¼Œç®€å•æ¥è¯´å°±æ˜¯è§†é¢‘çš„â€œè®¾è®¡å›¾â€ï¼Œå°±åƒç”»è¿ç¯ç”»ä¸€æ ·ï¼ŒæŠŠä½ çš„æ•…äº‹ä¸€æ ¼ä¸€æ ¼åœ°åˆ—å‡ºæ¥ã€‚</p>
<h4 data-id="heading-8">1ï¼‰å¸¸ç”¨å·¥å…·</h4>
<p>å³æ¢¦ã€Nano banana proã€sekoã€‚</p>
<h4 data-id="heading-9">2ï¼‰æ–°æ‰‹å°çªé—¨</h4>
<p>åˆšå¼€å§‹å¦‚æœä½ è§‰å¾—ä»é›¶ç”Ÿæˆå¾ˆéš¾ï¼Œå¯ä»¥<strong>åˆ©ç”¨â€œç”Ÿå›¾â€åŠŸèƒ½</strong>ï¼šå…ˆåšå‡ºä¸€å¼ æ»¡æ„çš„å›¾ï¼Œç„¶åè®© AI åŸºäºè¿™å¼ å›¾å»ç”Ÿæˆè¿ç»­çš„åç»­ç”»é¢ï¼Œè¿™æ ·ç”»é¢é£æ ¼ä¼šæ¯”è¾ƒç»Ÿä¸€ï¼Œä¹Ÿæ›´ç®€å•ã€‚</p>
<h4 data-id="heading-10">3ï¼‰æ‰‹æŠŠæ‰‹æ“ä½œæ­¥éª¤</h4>
<ul>
<li>
<p><strong>ç¬¬ä¸€æ­¥ï¼ˆå–‚ç´ æï¼‰</strong> ï¼šå°±åƒåšèœè¦å…ˆå¤‡æ–™ï¼ŒæŠŠä½ å†™å¥½çš„å‰§æœ¬ã€è®¾å®šå¥½çš„è§’è‰²å›¾ç‰‡ã€åœºæ™¯å›¾ç‰‡éƒ½ä¸Šä¼ ç»™ AI å·¥å…·ï¼Œè®©å®ƒå¸®ä½ ç”Ÿæˆç¬¬ä¸€ç‰ˆåˆ†é•œå›¾ã€‚</p>
</li>
<li>
<p><strong>ç¬¬äºŒæ­¥ï¼ˆæ’é¡ºåºï¼‰</strong> ï¼šæŠŠç”Ÿæˆçš„å›¾ç‰‡æŒ‰ç…§æ•…äº‹å‘å±•æ’å¥½é˜Ÿã€‚</p>
<ul>
<li><em>å°è´´å£«</em>ï¼šæ§åˆ¶å¥½æ•°é‡ï¼Œé€šå¸¸<strong>1 åˆ†é’Ÿçš„è§†é¢‘ï¼Œå‡†å¤‡ 5 åˆ° 8 å¼ åˆ†é•œå›¾</strong> å°±è¶³å¤Ÿäº†ï¼Œå¤ªå¤šä¼šå¤ªèµ¶ï¼Œå¤ªå°‘ä¼šæ— èŠã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ­¥ï¼ˆåŠ è¯´æ˜ï¼‰</strong> ï¼šç»™æ¯å¼ å›¾åŠ ä¸ªâ€œå¤‡æ³¨â€ã€‚</p>
<ul>
<li>è¯´æ˜<strong>æ™¯åˆ«</strong>ï¼šæ˜¯â€œè¿‘æ™¯â€ï¼ˆæ¯”å¦‚åªæ‹è„¸ï¼Œçœ‹è¡¨æƒ…ï¼‰è¿˜æ˜¯â€œå…¨æ™¯â€ï¼ˆæ‹æ•´ä¸ªæˆ¿é—´ï¼Œçœ‹ç¯å¢ƒï¼‰ã€‚</li>
<li>è¯´æ˜<strong>è¿é•œ</strong>ï¼šé•œå¤´æ˜¯æ¨è¿‘ã€æ‹‰è¿œï¼Œè¿˜æ˜¯ä»å·¦å¾€å³ç§»ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">4ï¼‰æ ¸å¿ƒç§˜ç±ï¼ˆæ€ä¹ˆå†™æç¤ºè¯ï¼‰</h4>
<p>æƒ³è¦ AI ç”Ÿæˆå¾—å‡†ï¼Œè¯·è®°ä½è¿™ä¸ª<strong>ä¸‡èƒ½å…¬å¼</strong>ï¼š <strong>ã€åœºæ™¯ç¯å¢ƒã€‘+ã€è§’è‰²åŠ¨ä½œã€‘+ã€é•œå¤´æè¿°ã€‘</strong></p>
<ul>
<li>
<p><strong>ä¸¾ä¸ªæ —å­</strong>ï¼š</p>
<ul>
<li>ä¸è¦åªè¯´ï¼šâ€œçŒ«åœ¨æ¡Œå­ä¸Šã€‚â€</li>
<li>è¦è¿™æ ·è¯´ï¼šâ€œ<strong>æ•™å®¤å…¨æ™¯</strong>ï¼ˆåœºæ™¯+é•œå¤´ï¼‰ï¼Œ<strong>ä¸€åªçŒ«è·³ä¸Šäº†ä¹¦æ¡Œ</strong>ï¼ˆè§’è‰²åŠ¨ä½œï¼‰ã€‚â€</li>
</ul>
</li>
</ul>
<p><strong>æœ€ååˆ«å¿˜äº†</strong>ï¼šç»™æ¯ä¸€å¼ åˆ†é•œå›¾<strong>ç¼–ä¸Šå·ç </strong>ï¼ˆ1ã€2ã€3â€¦â€¦ï¼‰ï¼Œè¿™æ ·åé¢åšåŠ¨ç”»çš„æ—¶å€™æ‰ä¸ä¼šæ‰‹å¿™è„šä¹±ã€‚</p>
<h3 data-id="heading-12"><strong>ï¼ˆå››ï¼‰è®©ç”»é¢â€œåŠ¨â€èµ·æ¥ï¼ˆåŠ¨ç”»ç”Ÿæˆï¼‰</strong></h3>
<p>è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰ç”Ÿæˆçš„é™æ­¢å›¾ç‰‡ï¼Œå˜æˆä¼šåŠ¨çš„è§†é¢‘ç‰‡æ®µã€‚</p>
<h4 data-id="heading-13">1ï¼‰å¸¸ç”¨å·¥å…·</h4>
<p>ç›®å‰å¸‚é¢ä¸Šæœ€ç«çš„å‡ æ¬¾ AI è§†é¢‘å·¥å…·éƒ½åœ¨è¿™å„¿äº†ï¼Œé€‰ä¸€ä¸¤ä¸ªé¡ºæ‰‹çš„å°±è¡Œï¼š</p>
<ul>
<li><strong>å›½é™…å¤§ç‰Œï¼š</strong> Soraã€Runwayã€Pika</li>
<li><strong>å›½äº§å¥½æ‰‹ï¼š</strong> Viduã€å³æ¢¦ï¼ˆJimengï¼‰ã€å¯çµï¼ˆKlingï¼‰ã€æµ·èºï¼ˆHailuoï¼‰</li>
</ul>
<h4 data-id="heading-14">2ï¼‰æ€ä¹ˆåšï¼šæŒ‰è¿™å‡ æ­¥èµ°å°±èƒ½ä¸Šæ‰‹</h4>
<ul>
<li>
<p><strong>å‡†å¤‡å¹¶ä¸Šä¼ ç´ æ</strong></p>
<p>æŠŠä½ çš„<strong>åˆ†é•œå›¾</strong>ã€<strong>è§’è‰²ç´ æ</strong>ï¼ˆäººç‰©/åŠ¨ç‰©è®¾å®šå›¾ç­‰ï¼‰ä¸Šä¼ åˆ°å·¥å…·é‡Œã€‚</p>
</li>
<li>
<p><strong>ç”ŸæˆåŠ¨æ€ç‰‡æ®µ</strong></p>
<p>å…ˆä»ä¸€ä¸ªé•œå¤´å¼€å§‹ç”Ÿæˆï¼Œè®©é™æ€ç”»é¢â€œåŠ¨èµ·æ¥â€ï¼Œå¾—åˆ°çŸ­è§†é¢‘ç‰‡æ®µã€‚</p>
</li>
<li>
<p><strong>å¾®è°ƒåŠ¨ä½œç»†èŠ‚ï¼Œè®©å®ƒæ›´è‡ªç„¶</strong></p>
<p>é‡ç‚¹çœ‹è¿™äº›åœ°æ–¹ï¼š</p>
<ul>
<li>
<p>èµ°è·¯æ˜¯å¦é¡ºã€è„šæœ‰æ²¡æœ‰â€œé£˜â€</p>
</li>
<li>
<p>è¯´è¯æ—¶è¡¨æƒ…æ˜¯å¦å¯¹åº”æƒ…ç»ª</p>
</li>
<li>
<p>è½¬å¤´ã€æŠ¬æ‰‹ç­‰åŠ¨ä½œæ˜¯å¦è¿è´¯</p>
<p>ä¸è‡ªç„¶å°±è°ƒæ•´å‚æ•°æˆ–æ”¹æç¤ºè¯ï¼Œé‡å¤ç”Ÿæˆå°èŒƒå›´ä¼˜åŒ–ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠ ä¸€ç‚¹åŸºç¡€è½¬åœº</strong></p>
<p>ç‰‡æ®µä¹‹é—´å¯ä»¥å…ˆç”¨ç®€å•è½¬åœºï¼ˆæ·¡å…¥æ·¡å‡ºã€åˆ‡æ¢ï¼‰è¡”æ¥ï¼Œä¿è¯è§‚çœ‹æµç•…ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6f20d421d9e448b9b49aa7c73197274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978357&amp;x-signature=x6LcYQxqc%2BsJdhh%2BCc2dD2UWDAg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-15">3ï¼‰å®¹æ˜“è¸©å‘çš„å…³é”®æŠ€å·§</h4>
<ul>
<li>
<p><strong>å°½é‡ç”¨åŒä¸€ä¸ªå·¥å…·å®ŒæˆåŒä¸€æ¡è§†é¢‘</strong>ï¼šä¸åŒå·¥å…·çš„ç”»é£ã€è´¨æ„Ÿã€è¿åŠ¨æ–¹å¼å¯èƒ½å·®å¾ˆå¤šï¼Œæ··ç”¨å®¹æ˜“å‡ºç°â€œé£æ ¼å‰²è£‚â€ã€‚</p>
</li>
<li>
<p><strong>æ¯ä¸ªç‰‡æ®µä¸è¦å¤ªé•¿</strong>ï¼šå»ºè®®å•ä¸ªé•œå¤´æ§åˆ¶åœ¨<strong>10â€“15 ç§’</strong>ã€‚è¶ŠçŸ­è¶Šç¨³å®šï¼Œå‡ºé”™æ¦‚ç‡æ›´ä½ï¼Œä¹Ÿæ›´æ–¹ä¾¿è¿”å·¥ã€‚</p>
</li>
<li>
<p>**å­¦ä¼šâ€œè¯´äººè¯â€ï¼š**å†™æç¤ºè¯ï¼ˆPromptï¼‰æœ‰ä¸‡èƒ½å…¬å¼ï¼Œç…§ç€å¡«ç©ºå°±è¡Œï¼š</p>
<ul>
<li>å…¬å¼ï¼šåœºæ™¯ + è§’è‰²åŠ¨ä½œ + é•œå¤´æ–¹å¼</li>
<li><em>ä¸¾ä¾‹ï¼šâ€œæ˜äº®çš„æ•™å®¤é‡Œï¼ˆåœºæ™¯ï¼‰ï¼Œä¸€åªçŒ«è·³ä¸Šäº†ä¹¦æ¡Œï¼ˆåŠ¨ä½œï¼‰ï¼Œå…¨æ™¯æ‹æ‘„ï¼ˆé•œå¤´ï¼‰ã€‚â€</em></li>
</ul>
</li>
<li>
<p>**å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼š**ç»™ä½ çš„æ¯ä¸€ä¸ªåˆ†é•œå›¾ç¼–å¥½å·ç ï¼ˆæ¯”å¦‚ 01ã€02ã€03...ï¼‰ï¼Œè¿™æ ·åé¢å‰ªè¾‘çš„æ—¶å€™æ‰ä¸ä¼šæ‰‹å¿™è„šä¹±ã€‚</p>
</li>
</ul>
<h3 data-id="heading-16"><strong>ï¼ˆäº”ï¼‰ç»™è§†é¢‘æ³¨å…¥çµé­‚ï¼šé…éŸ³ä¸èƒŒæ™¯éŸ³ä¹</strong></h3>
<p>è¿™ä¸€æ­¥æˆ‘ä»¬è¦è§£å†³å¬è§‰ä½“éªŒï¼Œä¸»è¦åˆ†ä¸ºâ€œè®©è§’è‰²å¼€å£è¯´è¯â€å’Œâ€œçƒ˜æ‰˜æ°”æ°›â€ä¸¤éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-17">1ï¼‰å¸¸ç”¨å·¥å…·</h4>
<ul>
<li><strong>ElevenLabs</strong>ï¼šæŠŠæ–‡å­—å°è¯ä¸€é”®å˜æˆâ€œçœŸäººæ„Ÿâ€é…éŸ³</li>
<li><strong>Mureka / Minimax</strong>ï¼šç”¨æ¥ç”Ÿæˆé…ä¹ï¼Œæˆ–è¾…åŠ©åšéŸ³é¢‘ç›¸å…³å†…å®¹ï¼ˆæŒ‰ä½ çš„ä¹ æƒ¯é€‰ä¸€ä¸ªå°±è¡Œï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a5c714d8a744ec990075fb9e5a15164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978357&amp;x-signature=0hJQzzcUSJSjlfpRuLOQ%2BBPrH9k%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-18"><strong>2ï¼‰æ€ä¹ˆåšï¼ˆç…§ç€åšå°±èƒ½ä¸Šæ‰‹ï¼‰</strong></h4>
<ul>
<li>
<p>å…ˆåšé…éŸ³ï¼šæŠŠå‰§æœ¬é‡Œçš„å°è¯å¤åˆ¶åˆ°ElevenLabsï¼ŒæŒ‘ä¸€ä¸ªæœ€è´´åˆè§’è‰²çš„å£°éŸ³ï¼ˆæ¯”å¦‚å¹´é¾„ã€æ€§æ ¼ã€è¯­æ°”ï¼‰ï¼Œç„¶åç”Ÿæˆé…éŸ³éŸ³é¢‘ã€‚</p>
</li>
<li>
<p>å†å¯¹å‰ªè¾‘ï¼šæŠŠé…éŸ³æ”¾è¿›å‰ªè¾‘è½¯ä»¶é‡Œï¼ŒæŒ‰é…éŸ³çš„åœé¡¿å’Œè¯­é€Ÿæ¥å¡èŠ‚å¥å‰ªç”»é¢ã€‚</p>
</li>
<li>
<p>å£å‹å¾®è°ƒï¼šå¦‚æœæœ‰è§’è‰²è¯´è¯ç”»é¢ï¼Œå°±æ ¹æ®é…éŸ³çš„èŠ‚å¥è°ƒæ•´å£å‹ï¼Œè®©â€œå£°éŸ³å’Œå˜´å·´â€å¯¹å¾—ä¸Šã€‚</p>
</li>
<li>
<p>åŠ èƒŒæ™¯éŸ³ä¹ï¼ˆBGMï¼‰ï¼š</p>
<ul>
<li>é€‰æ— ç‰ˆæƒ/å¯å•†ç”¨ çš„BGMç›´æ¥ç”¨ï¼›</li>
<li>æˆ–è€…ç”¨AIï¼ˆMureka/Minimaxï¼‰ç”Ÿæˆé…ä¹ï¼Œè®©é£æ ¼æ›´è´´åˆå‰§æƒ…æ°›å›´ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼šå…ˆç”¨ ElevenLabs æŠŠå°è¯å˜æˆå£°éŸ³ï¼Œå†ç”¨å‰ªè¾‘å¯¹é½èŠ‚å¥å’Œå£å‹ï¼Œæœ€åé…ä¸Šåˆè§„çš„BGM/AIé…ä¹æ¥æå‡æ°›å›´ã€‚</p>
<h3 data-id="heading-19"><strong>ï¼ˆå…­ï¼‰åæœŸåˆæˆ</strong></h3>
<p>å¸¸ç”¨å·¥å…·ï¼š<strong>å‰ªæ˜  / PR / Topaz / DaVinci Resolveï¼ˆè¾¾èŠ¬å¥‡ï¼‰</strong></p>
<h4 data-id="heading-20">1ï¼‰å…·ä½“æ€ä¹ˆåšï¼ˆæŒ‰é¡ºåºç…§ç€æ¥å°±è¡Œï¼‰</h4>
<ul>
<li><strong>æŠŠç´ æå¯¼è¿›è½¯ä»¶</strong>ï¼šåŠ¨ç”»ç‰‡æ®µã€é…éŸ³ã€BGMï¼ˆèƒŒæ™¯éŸ³ä¹ï¼‰éƒ½å¯¼å…¥ã€‚</li>
<li><strong>æŒ‰åˆ†é•œæ‹¼èµ·æ¥</strong>ï¼šæŠŠæ¯ä¸ªé•œå¤´æŒ‰å‰§æƒ…é¡ºåºæ‹–åˆ°æ—¶é—´è½´ä¸Šï¼Œåƒæ­ç§¯æœ¨ä¸€æ ·æ‹¼å¥½ã€‚</li>
<li><strong>åŠ å­—å¹•</strong>ï¼šæŠŠå°è¯å­—å¹•æ”¾ä¸Šå»ï¼Œæ³¨æ„åˆ«æŒ¡ä½äººç‰©è„¸å’Œå…³é”®ä¿¡æ¯ã€‚</li>
<li><strong>è°ƒç”»é¢</strong>ï¼šç®€å•è°ƒæ•´äº®åº¦ã€å¯¹æ¯”åº¦ã€è‰²å½©ï¼Œè®©ç”»é¢çœ‹èµ·æ¥æ›´ç»Ÿä¸€ã€æ›´èˆ’æœã€‚</li>
<li><strong>å¯¼å‡ºè§†é¢‘</strong>ï¼šæ ¼å¼é€‰<strong>MP4</strong>ï¼Œå¹¶ç¡®è®¤å¯¼å‡º<strong>åˆ†è¾¨ç‡</strong>å’Œä½ åŸè§†é¢‘ä¸€è‡´ï¼ˆæ¯”å¦‚ 1080p/4Kï¼‰ï¼Œé¿å…å˜ç³Šæˆ–è¢«æ‹‰ä¼¸ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8fa831a9a584cd0bc25586fdf7384a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978357&amp;x-signature=JZ5nvf8c7L9%2B1q8tS%2FKbnDD12Pk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-21">2ï¼‰å°æŠ€å·§ï¼ˆè®©è§†é¢‘æ›´åƒâ€œæ­£ç»ä½œå“â€ï¼‰</h4>
<ul>
<li><strong>å¼€å¤´ 3 ç§’åŠ  AI æ ‡è¯†</strong>ï¼šä¾‹å¦‚ â€œæœ¬è§†é¢‘å« AI ç”Ÿæˆå†…å®¹â€ï¼Œæ¸…æ™°åˆè§„ä¹Ÿæ›´é€æ˜ã€‚</li>
<li><strong>ç»“å°¾åŠ â€œä¸‹é›†é¢„å‘Šâ€</strong> ï¼šæ”¾ 3â€“8 ç§’ç²¾å½©ç‰‡æ®µæˆ–ä¸€å¥æ‚¬å¿µå°è¯ï¼Œè®©è§‚ä¼—æ›´æƒ³è¿½ä¸‹ä¸€é›†ã€‚</li>
</ul>
<p><strong>æ–°æ‰‹åš AI æ¼«å‰§ï¼Œåƒä¸‡åˆ«ä¸€ä¸Šæ¥å°±åšå¤§å·¥ç¨‹ã€‚</strong> å…ˆæŠŠ<strong>ç¬¬ 1 é›†å®Œæ•´åšå‡ºæ¥</strong>ï¼ˆå“ªæ€•çŸ­ä¸€ç‚¹ï¼‰ï¼Œè·‘é€šæµç¨‹ã€æ‰¾åˆ°é—®é¢˜ï¼Œå†é€æ­¥è¿­ä»£å‡çº§ã€‚</p>
<h2 data-id="heading-22">ä¸‰ã€å»ºè®®</h2>
<p>å¾ˆå¤šæ–°æ‰‹ä¸€ä¸Šæ¥å°±æƒ³åšâ€œé•¿ç¯‡å¤§ä½œâ€ï¼Œç»“æœæµç¨‹è¿˜æ²¡æ‘¸ç†Ÿã€ç»†èŠ‚åˆå¤šï¼Œå¾ˆå®¹æ˜“è¶Šåšè¶Šç´¯ï¼Œæœ€åç›´æ¥å¼ƒå‘ã€‚æ›´ç¨³çš„åšæ³•æ˜¯ï¼šå…ˆä»<strong>1åˆ†é’Ÿå·¦å³çš„å•é›†</strong>å¼€å§‹ç»ƒæ‰‹ï¼ŒæŠŠâ€œå†™è„šæœ¬â€”å‡ºç”»é¢â€”é…éŸ³â€”å‰ªè¾‘â€”å‘å¸ƒâ€è¿™å¥—æµç¨‹è·‘é€šã€‚ç­‰ä½ åšå‡º<strong>ç¬¬ä¸€é›†</strong>ä¹‹åï¼Œå†æ ¹æ®è¯„è®ºå’Œæ•°æ®åé¦ˆå»è°ƒæ•´å†…å®¹æ–¹å‘å’ŒèŠ‚å¥ï¼Œè¿™æ ·è¿›æ­¥ä¼šå¿«å¾ˆå¤šã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼š<strong>å·¥å…·åˆ«è´ªå¤š</strong>ã€‚æ–°æ‰‹é˜¶æ®µä¸éœ€è¦ä¸€å£æ°”å­¦ä¸€å †å¤æ‚çš„è½¯ä»¶ï¼Œåè€Œä¼šåˆ†æ•£ç²¾åŠ›ã€‚æ¯ä¸ªé˜¶æ®µæŠ“ä½<strong>ä¸€ä¸ªæ ¸å¿ƒå·¥å…·</strong>ç”¨ç†Ÿå°±å¤Ÿäº†â€”â€”æ¯”å¦‚å†™è„šæœ¬ç”¨è±†åŒ…ã€å‰ªè¾‘ç”¨å‰ªæ˜ ã€‚ç­‰ä½ ç¨³å®šæ›´æ–°ã€æœ‰æ˜ç¡®éœ€æ±‚äº†ï¼Œå†è€ƒè™‘å‡çº§æ›´ä¸“ä¸šçš„å·¥å…·ä¹Ÿä¸è¿Ÿã€‚</p>
<p>ç…§ç€è¿™ä¸ªæµç¨‹å’Œå·¥å…·æ€è·¯æ¥ï¼Œå°±ç®—æ˜¯é›¶åŸºç¡€çš„æ–°æ‰‹ï¼Œä¹Ÿèƒ½æ›´å¿«åšå‡ºè‡ªå·±çš„ AI æ¼«å‰§ã€‚ç°åœ¨ AI å·¥å…·ç¡®å®è¶Šæ¥è¶Šå¼ºï¼Œåªè¦æ–¹æ³•é€‰å¯¹ã€æ­¥éª¤åšå¯¹ï¼Œä¸ç”¨ä¸“ä¸šèƒŒæ™¯ä¹Ÿèƒ½åšå‡ºå¥½å†…å®¹ï¼Œç”šè‡³æŠŠå®ƒå˜æˆä¸€ä»½ç¨³å®šçš„æ”¶ç›Šæ¥æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šå¦‚ä½•å½»åº•ç»ˆç»“ Flutter å¼‚æ­¥æ“ä½œä¸­çš„ BuildContext å´©æºƒï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594321135591374857</link>    <guid>https://juejin.cn/post/7594321135591374857</guid>    <pubDate>2026-01-13T01:34:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594321135591374857" data-draft-id="7592432859863466018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šå¦‚ä½•å½»åº•ç»ˆç»“ Flutter å¼‚æ­¥æ“ä½œä¸­çš„ BuildContext å´©æºƒï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T01:34:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šå¦‚ä½•å½»åº•ç»ˆç»“ Flutter å¼‚æ­¥æ“ä½œä¸­çš„ BuildContext å´©æºƒï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:34:25.000Z" title="Tue Jan 13 2026 01:34:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç§æƒ…å†µæˆ‘ä»¬éƒ½è§è¿‡ï¼š ä½ åœ¨æœ¬åœ°è·‘ç€ Appï¼Œç‚¹ä¸‹â€œæäº¤â€æŒ‰é’®ï¼ŒAPI è¯·æ±‚é¡ºåˆ©å®Œæˆï¼Œé¡µé¢æˆåŠŸè·³è½¬ã€‚ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å®Œç¾æ— ç¼ºã€‚äºæ˜¯ä½ ä¿¡å¿ƒæ»¡æ»¡åœ°åˆå¹¶äº† PRï¼Œå‘å¸ƒä¸Šçº¿ã€‚ç»“æœï¼Œåå°æ—¥å¿—çªç„¶å°±å¼€å§‹å¯¹ç€ä½ <strong>ç–¯ç‹‚å’†å“®</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d6199191be24a179e60c010251fca9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768872865&amp;x-signature=X6AXSEDACCJX%2Bs%2BAkMz4Y%2Fr%2BhlY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>Looking up a deactivated widgetâ€™s ancestor is unsafe.</p>
<p>At this point the state of the widgetâ€™s element tree is no longer stable.</p>
</blockquote>
<blockquote>
<p>â€œæŸ¥æ‰¾å·²åœç”¨ Widget çš„ç¥–å…ˆèŠ‚ç‚¹æ˜¯ä¸å®‰å…¨çš„ã€‚â€</p>
<p>â€œæ­¤æ—¶ï¼Œè¯¥ Widget å¯¹åº”çš„ Element æ ‘çŠ¶æ€å·²ä¸å†ç¨³å®šã€‚â€</p>
</blockquote>
<p>ä½ å°è¯•åœ¨æœ¬åœ°å¤ç°è¿™ä¸ª Bugï¼Œä½†æ€ä¹ˆè¯•éƒ½æ²¡é—®é¢˜ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„<strong>å¼‚æ­¥é—´éš™ï¼ˆAsync Gapï¼‰</strong> ã€‚å¦‚æœä½ æ²¡æœ‰é’ˆå¯¹å®ƒåšé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œé‚£ä¹ˆæ­¤æ—¶æ­¤åˆ»ï¼Œé‚£äº›ç½‘é€Ÿè¾ƒæ…¢çš„ç”¨æˆ·æ­£åœ¨ç»å†é¢‘ç¹çš„é—ªé€€ã€‚</p>
<h4 data-id="heading-0">â€œæˆ‘ç”µè„‘ä¸Šè¿è¡Œå¥½å¥½çš„â€ â€”â€” è¿™ä¸ªé™·é˜±</h4>
<p>ä½œä¸ºå·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬ä¹ æƒ¯åœ¨é£é€Ÿçš„ Wi-Fi å’Œæ¨¡æ‹Ÿå™¨ä¸Šåšæµ‹è¯•ã€‚ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼ŒAPI åªè¦ 100 æ¯«ç§’å°±è¿”å›äº†ã€‚åœ¨ç»“æœå›æ¥ä¹‹å‰ï¼Œæˆ‘ä»¬æ ¹æœ¬<strong>æ²¡æ—¶é—´</strong>åˆ‡æ¢é¡µé¢ã€‚</p>
<p>ä½†åœ¨ç°å®ä¸–ç•Œé‡Œï¼Œä½ çš„ç”¨æˆ·å¯èƒ½ç”¨çš„æ˜¯ 3G ç”šè‡³æ›´æ…¢çš„ç½‘ç»œã€‚</p>
<ol>
<li>ä»–ä»¬ç‚¹ä¸‹â€œç™»å½•â€ã€‚</li>
<li>è¯·æ±‚å¡ä½äº† 3 ç§’ã€‚</li>
<li>ç”¨æˆ·ç­‰çƒ¦äº†ï¼ˆæˆ–è€…æ„è¯†åˆ°é‚®ç®±å¡«é”™äº†ï¼‰ï¼Œäºæ˜¯æŒ‰äº†**â€œè¿”å›â€**é”®ã€‚</li>
<li>æ­¤æ—¶ï¼ŒWidget è¢«é”€æ¯ï¼ˆDisposedï¼‰ï¼Œé¡µé¢å½»åº•æ¶ˆå¤±äº†ã€‚</li>
<li><strong>ç´§æ¥ç€</strong>ï¼ŒAPI ç»ˆäºè¿”å›æˆåŠŸäº†ã€‚</li>
</ol>
<p>ä½ çš„ä»£ç åœ¨ <code>await</code> ä¹‹åæ¢å¤æ‰§è¡Œï¼Œå®ƒé¡ºæ‰‹æŠ“èµ· <code>context</code> å‡†å¤‡è·³è½¬åˆ°é¦–é¡µâ€¦â€¦ç„¶è€Œï¼Œè¿™ä¸ª <code>context</code> æŒ‡å‘çš„ Widget æ­¤æ—¶å·²ç»åœ¨**åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰**é‡Œæ’é˜Ÿäº†ã€‚</p>
<h4 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šä¸€è¡Œå¾®å°çš„ä»£ç ï¼Œçœå»å·¨å¤§çš„å¤´ç–¼</h4>
<p>åœ¨ Flutter 3.7 ä¹‹å‰ï¼Œå¤„ç†è¿™ä¸ªé—®é¢˜å¾ˆçƒ¦äººã€‚ä½ å¿…é¡»åœ¨ <code>State</code> ç±»é‡Œæ£€æŸ¥ <code>mounted</code> å±æ€§ï¼Œä»£ç å†™èµ·æ¥å¾ˆä¸ä¼˜é›…ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªç®€å•ä¸”ç»Ÿä¸€çš„æ–¹æ¡ˆï¼š</p>
<p><strong><code>context.mounted</code></strong></p>
<p>è¿™ä¸ªå±æ€§å…è®¸ä½ æ£€æŸ¥ <code>context</code> æ˜¯å¦ä¾ç„¶æœ‰æ•ˆï¼Œä»¥åŠå®ƒæ˜¯å¦è¿˜åœ¨ Widget æ ‘ä¸­ã€‚ æ¯å½“ä½ å®Œæˆä¸€ä¸ª<strong>å¼‚æ­¥è°ƒç”¨</strong>ï¼Œå¹¶å‡†å¤‡æ‰§è¡Œä»¥ä¸‹æ“ä½œæ—¶ï¼š</p>
<ul>
<li>é¡µé¢è·³è½¬ (Navigation)</li>
<li>å¼¹å‡ºå¯¹è¯æ¡† (Dialogs)</li>
<li>æ˜¾ç¤ºåº•æ é€šçŸ¥ (Snackbars)</li>
<li>æŸ¥æ‰¾ä¸»é¢˜ (Theme lookups)</li>
<li><strong>ä»»ä½•éœ€è¦ç”¨åˆ° <code>context</code> çš„æ“ä½œ</strong></li>
</ul>
<p>â€¦â€¦ä½ éƒ½å¿…é¡»åŠ ä¸Šä¸€å±‚é˜²æŠ¤ã€‚</p>
<p><strong>ä¸å®‰å…¨çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> onButtonTapped(BuildContext context) <span class="hljs-keyword">async</span> {  
    <span class="hljs-keyword">await</span> myLongRunningTask();  
  
<span class="hljs-comment">// å¦‚æœç”¨æˆ·å·²ç»ç¦»å¼€é¡µé¢ï¼Œè¿™ä¸€è¡Œå°±ä¼šå¯¼è‡´ App å´©æºƒã€‚</span>
    Navigator.pop(context);  
}

</code></pre>
<p><strong>å®‰å…¨çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> onButtonTapped(BuildContext context) <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// 1. å¼€å§‹å¼‚æ­¥ä»»åŠ¡ï¼ˆä¾‹å¦‚ API è¯·æ±‚æˆ–è€—æ—¶è®¡ç®—ï¼‰</span>
  <span class="hljs-keyword">await</span> myLongRunningTask();
  
  <span class="hljs-comment">// 2. é˜²å¾¡æ€§æ£€æŸ¥ï¼ˆæ ¸å¿ƒå®ˆå«è¯­å¥ï¼‰</span>
  <span class="hljs-comment">// å¦‚æœæ­¤æ—¶ Widget å·²ç»ä»æ ‘ä¸­å¸è½½ï¼Œåˆ™ç«‹å³åœæ­¢æ‰§è¡Œåç»­ä»£ç ã€‚</span>
  <span class="hljs-keyword">if</span> (!context.mounted) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 3. åªæœ‰åœ¨ context ä¾ç„¶æœ‰æ•ˆï¼ˆMountedï¼‰çš„æƒ…å†µä¸‹ï¼Œ</span>
  <span class="hljs-comment">// æ­¤æ—¶ä½¿ç”¨ context è¿›è¡Œå¯¼èˆªæˆ– UI æ“ä½œæ‰æ˜¯å®‰å…¨çš„ã€‚</span>
  Navigator.pop(context);
}
</code></pre>
<h4 data-id="heading-2">ä¸ºä»€ä¹ˆèµ„æ·±å·¥ç¨‹å¸ˆå¿…é¡»åœ¨æ„è¿™ä¸€ç‚¹ï¼Ÿ</h4>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸ºäº†é¿å…å¼€å‘é˜¶æ®µå‡ºç°çº¢å±æŠ¥é”™ï¼Œæ›´æ˜¯**é˜²å¾¡æ€§ç¼–ç¨‹ï¼ˆDefensive Programmingï¼‰**çš„æ ¸å¿ƒä½“ç°ã€‚</p>
<p>æˆ‘ä»¬æ— æ³•æŒæ§ç½‘ç»œçŠ¶å†µï¼Œä¹Ÿæ— æ³•å·¦å³ç”¨æˆ·çš„è¡Œä¸ºã€‚ æˆ‘ä»¬å”¯ä¸€èƒ½æ§åˆ¶çš„ï¼Œæ˜¯å½“è¿™ä¸¤è€…â€œæ‰é“¾å­â€æ—¶ï¼Œæˆ‘ä»¬çš„ä»£ç å°†å¦‚ä½•åº”å¯¹ã€‚ å…»æˆéšæ‰‹åŠ ä¸Š <code>if (!context.mounted) return;</code> çš„ä¹ æƒ¯è™½ç„¶åªæ˜¯ä¸ªå¾®å°çš„ç»†èŠ‚ï¼Œä½†å®ƒæ­£æ˜¯<strong>è„†å¼±çš„ Demo æ¼”ç¤º</strong>ä¸<strong>å¥å£®çš„ç”Ÿäº§çº§å·¥ç¨‹</strong>ä¹‹é—´çš„åˆ†æ°´å²­ã€‚</p>
<h4 data-id="heading-3">æœ€åä¸€ä¸ªé—®é¢˜</h4>
<p>ä½ æœ€è¿‘æ£€æŸ¥è¿‡ Firebase Crashlytics æ—¥å¿—é‡Œçš„è¿™ä¸ªç‰¹å®šæŠ¥é”™å—ï¼Ÿæˆ–è€…ï¼Œä½ è¿˜æœ‰å“ªäº›æ›¾è®©ä½ æŠ“ç‹‚çš„â€œéšå½¢â€Bugï¼Ÿ</p>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€â€”â€”æˆ‘å¾ˆæœŸå¾…å¬åˆ°ä½ ä»¬çš„è°ƒè¯•â€œè¡€æ³ªå²â€ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Swarmä¸­éƒ¨ç½²Nacoså¹¶é…ç½®å¤–éƒ¨MySQL]]></title>    <link>https://juejin.cn/post/7594309641867591718</link>    <guid>https://juejin.cn/post/7594309641867591718</guid>    <pubDate>2026-01-12T22:21:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594309641867591718" data-draft-id="7594337566721605642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Swarmä¸­éƒ¨ç½²Nacoså¹¶é…ç½®å¤–éƒ¨MySQL"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T22:21:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒ½å«æˆ‘å¤§å¸…å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3956505282886506"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Swarmä¸­éƒ¨ç½²Nacoså¹¶é…ç½®å¤–éƒ¨MySQL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3956505282886506/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒ½å«æˆ‘å¤§å¸…å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T22:21:36.000Z" title="Mon Jan 12 2026 22:21:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨Swarmä¸­éƒ¨ç½²Nacoså¹¶é…ç½®å¤–éƒ¨MySQL</h2>
<h3 data-id="heading-1">1. é¡¹ç›®ç»“æ„è°ƒæ•´</h3>
<pre><code class="hljs language-csharp" lang="csharp">project/
â”œâ”€â”€ docker-stack.yml          <span class="hljs-meta"># Swarmä¸»é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ .env                      <span class="hljs-meta"># ç¯å¢ƒå˜é‡æ–‡ä»¶</span>
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ mysql-<span class="hljs-keyword">init</span>/
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">init</span>.sql         <span class="hljs-meta"># MySQLåˆå§‹åŒ–è„šæœ¬</span>
â”‚   â”‚   â””â”€â”€ nacos-schema.sql <span class="hljs-meta"># Nacosæ•°æ®åº“è„šæœ¬</span>
â”‚   â”œâ”€â”€ nacos/
â”‚   â”‚   â”œâ”€â”€ cluster.conf     <span class="hljs-meta"># Nacosé›†ç¾¤é…ç½®ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”‚   â””â”€â”€ application.properties <span class="hljs-meta"># Nacosè‡ªå®šä¹‰é…ç½®</span>
â”‚   â””â”€â”€ nginx/
â”‚       â””â”€â”€ nginx.conf       <span class="hljs-meta"># å¦‚æœéœ€è¦nginxä»£ç†</span>
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ nacos/
â”‚   â””â”€â”€ nginx/
â””â”€â”€ data/
    â”œâ”€â”€ mysql/
    â”œâ”€â”€ redis/
    â”œâ”€â”€ app-data/
    â””â”€â”€ nacos/
        â”œâ”€â”€ conf/            <span class="hljs-meta"># Nacosé…ç½®æ–‡ä»¶</span>
        â”œâ”€â”€ data/            <span class="hljs-meta"># Nacosæ•°æ®</span>
        â””â”€â”€ logs/            <span class="hljs-meta"># Nacosæ—¥å¿—</span>
</code></pre>
<h3 data-id="heading-2">2. Nacosæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</h3>
<h4 data-id="heading-3"><code>config/mysql-init/nacos-schema.sql</code></h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºNacosæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> nacos <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="hljs-comment">-- ä½¿ç”¨Nacosæ•°æ®åº“</span>
USE nacos;

<span class="hljs-comment">-- åˆ›å»ºNacosé…ç½®è¡¨</span>
<span class="hljs-comment">-- æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨Nacoså®˜æ–¹æä¾›çš„SQLè„šæœ¬ï¼Œæ‚¨éœ€è¦ä»ä»¥ä¸‹åœ°å€ä¸‹è½½ï¼š</span>
<span class="hljs-comment">-- https://github.com/alibaba/nacos/blob/master/distribution/conf/mysql-schema.sql</span>
<span class="hljs-comment">-- è¿™é‡Œæ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œå®é™…ä½¿ç”¨æ—¶è¯·ä½¿ç”¨å®˜æ–¹å®Œæ•´è„šæœ¬</span>

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `config_info` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'id'</span>,
  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'data_id'</span>,
  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'content'</span>,
  `md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'md5'</span>,
  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'ä¿®æ”¹æ—¶é—´'</span>,
  `src_user` text COMMENT <span class="hljs-string">'source user'</span>,
  `src_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'source ip'</span>,
  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'ç§Ÿæˆ·å­—æ®µ'</span>,
  `c_desc` <span class="hljs-type">varchar</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `c_use` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `effect` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `type` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `c_schema` text,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'config_info'</span>;

<span class="hljs-comment">-- å…¶ä»–è¡¨ç»“æ„è¯·ä»å®˜æ–¹GitHubè·å–å®Œæ•´SQL</span>
</code></pre>
<h4 data-id="heading-4"><code>config/mysql-init/init.sql</code></h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåº”ç”¨æ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> appdb <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="hljs-comment">-- åˆ›å»ºåº”ç”¨ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">'appuser'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'${MYSQL_PASSWORD}'</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> appdb.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'appuser'</span>@<span class="hljs-string">'%'</span>;

<span class="hljs-comment">-- åˆ›å»ºNacosç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">'nacos'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'${NACOS_DB_PASSWORD}'</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> nacos.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'nacos'</span>@<span class="hljs-string">'%'</span>;

FLUSH PRIVILEGES;
</code></pre>
<h3 data-id="heading-5">3. Nacosè‡ªå®šä¹‰é…ç½®</h3>
<h4 data-id="heading-6"><code>config/nacos/application.properties</code></h4>
<pre><code class="hljs language-properties" lang="properties"># æ•°æ®åº“é…ç½®
spring.datasource.platform=mysql
db.num=1
db.url.0=jdbc:mysql://mysql:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC
db.user=nacos
db.password=${NACOS_DB_PASSWORD}

# é›†ç¾¤é…ç½®ï¼ˆå•æœºæ¨¡å¼ï¼‰
nacos.standalone=true

# é‰´æƒé…ç½®ï¼ˆå¯é€‰ï¼‰
nacos.core.auth.enabled=false
nacos.core.auth.server.identity.key=serverIdentity
nacos.core.auth.server.identity.value=security

# æœåŠ¡å‘ç°é…ç½®
nacos.naming.empty-service.auto-clean=true
nacos.naming.empty-service.clean.initial-delay-ms=50000
nacos.naming.empty-service.clean.period-time-ms=30000

# æ—¥å¿—é…ç½®
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.pattern=%h %l %u %t "%r" %s %b %D
logging.file.path=/home/nacos/logs
logging.level.com.alibaba.nacos=info
</code></pre>
<h4 data-id="heading-7"><code>config/nacos/cluster.conf</code>ï¼ˆé›†ç¾¤æ¨¡å¼å¯é€‰ï¼‰</h4>
<pre><code class="hljs language-conf" lang="conf"># Nacosé›†ç¾¤èŠ‚ç‚¹é…ç½®
nacos1:8848
nacos2:8848
nacos3:8848
</code></pre>
<h3 data-id="heading-8">4. <code>docker-stack.yml</code></h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-comment"># å®šä¹‰ç½‘ç»œ</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">overlay</span>
    <span class="hljs-attr">attachable:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># å®šä¹‰é…ç½®</span>
<span class="hljs-attr">configs:</span>
  <span class="hljs-comment"># Nacosé…ç½®</span>
  <span class="hljs-attr">nacos-config:</span>
    <span class="hljs-attr">file:</span> <span class="hljs-string">./config/nacos/application.properties</span>
  <span class="hljs-comment"># åº”ç”¨é…ç½®ï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-attr">app-config:</span>
    <span class="hljs-attr">file:</span> <span class="hljs-string">./config/application.yml</span>

<span class="hljs-comment"># å®šä¹‰å·</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/mysql</span>
  
  <span class="hljs-attr">redis-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/redis</span>
  
  <span class="hljs-attr">nacos-conf:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/nacos/conf</span>
  
  <span class="hljs-attr">nacos-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/nacos/data</span>
  
  <span class="hljs-attr">nacos-logs:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/nacos/logs</span>
  
  <span class="hljs-attr">app-logs:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./logs/app</span>
  
  <span class="hljs-attr">app-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">./data/app-data</span>

<span class="hljs-comment"># å®šä¹‰æœåŠ¡</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># MySQLæœåŠ¡</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">mysql</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">${MYSQL_ROOT_PASSWORD}</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">${MYSQL_DATABASE}</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">${MYSQL_USER}</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">${MYSQL_PASSWORD}</span>
      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/mysql-init:/docker-entrypoint-initdb.d</span>  <span class="hljs-comment"># åˆå§‹åŒ–è„šæœ¬</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"mysqladmin"</span>, <span class="hljs-string">"ping"</span>, <span class="hljs-string">"-h"</span>, <span class="hljs-string">"localhost"</span>, <span class="hljs-string">"-u"</span>, <span class="hljs-string">"root"</span>, <span class="hljs-string">"-p$$MYSQL_ROOT_PASSWORD"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">replicated</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">placement:</span>
        <span class="hljs-attr">constraints:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">node.role</span> <span class="hljs-string">==</span> <span class="hljs-string">manager</span>

  <span class="hljs-comment"># RedisæœåŠ¡</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:7-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span> <span class="hljs-string">--requirepass</span> <span class="hljs-string">${REDIS_PASSWORD}</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6379:6379"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"redis-cli"</span>, <span class="hljs-string">"-a"</span>, <span class="hljs-string">"${REDIS_PASSWORD}"</span>, <span class="hljs-string">"ping"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">3s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">replicated</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>

  <span class="hljs-comment"># NacosæœåŠ¡</span>
  <span class="hljs-attr">nacos:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nacos/nacos-server:${NACOS_VERSION:-2.2.0}</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nacos</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MODE:</span> <span class="hljs-string">${NACOS_MODE:-standalone}</span>  <span class="hljs-comment"># standalone æˆ– cluster</span>
      <span class="hljs-attr">SPRING_DATASOURCE_PLATFORM:</span> <span class="hljs-string">mysql</span>
      <span class="hljs-attr">MYSQL_SERVICE_HOST:</span> <span class="hljs-string">mysql</span>
      <span class="hljs-attr">MYSQL_SERVICE_PORT:</span> <span class="hljs-number">3306</span>
      <span class="hljs-attr">MYSQL_SERVICE_DB_NAME:</span> <span class="hljs-string">nacos</span>
      <span class="hljs-attr">MYSQL_SERVICE_USER:</span> <span class="hljs-string">nacos</span>
      <span class="hljs-attr">MYSQL_SERVICE_PASSWORD:</span> <span class="hljs-string">${NACOS_DB_PASSWORD}</span>
      <span class="hljs-attr">NACOS_AUTH_ENABLE:</span> <span class="hljs-string">${NACOS_AUTH_ENABLE:-false}</span>
      <span class="hljs-attr">NACOS_AUTH_TOKEN:</span> <span class="hljs-string">${NACOS_AUTH_TOKEN:-SecretKey012345678901234567890123456789012345678901234567890123456789}</span>
      <span class="hljs-attr">NACOS_AUTH_IDENTITY_KEY:</span> <span class="hljs-string">${NACOS_AUTH_IDENTITY_KEY:-serverIdentity}</span>
      <span class="hljs-attr">NACOS_AUTH_IDENTITY_VALUE:</span> <span class="hljs-string">${NACOS_AUTH_IDENTITY_VALUE:-security}</span>
      <span class="hljs-attr">JVM_XMS:</span> <span class="hljs-string">${NACOS_JVM_XMS:-512m}</span>
      <span class="hljs-attr">JVM_XMX:</span> <span class="hljs-string">${NACOS_JVM_XMX:-512m}</span>
      <span class="hljs-attr">JVM_XMN:</span> <span class="hljs-string">${NACOS_JVM_XMN:-256m}</span>
      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nacos-conf:/home/nacos/conf</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nacos-data:/home/nacos/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nacos-logs:/home/nacos/logs</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${NACOS_PORT:-8848}:8848"</span>  <span class="hljs-comment"># ä¸»ç«¯å£</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${NACOS_PORT_GRPC:-9848}:9848"</span>  <span class="hljs-comment"># gRPCç«¯å£ï¼Œç”¨äºæœåŠ¡å‘ç°</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${NACOS_PORT_GRPC_PLUS:-9849}:9849"</span>  <span class="hljs-comment"># gRPCç«¯å£+1000</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">mysql:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span> <span class="hljs-string">nacos-config</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">/home/nacos/conf/application.properties</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">replicated</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-string">${NACOS_REPLICAS:-1}</span>
      <span class="hljs-attr">update_config:</span>
        <span class="hljs-attr">parallelism:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">delay:</span> <span class="hljs-string">10s</span>
        <span class="hljs-attr">order:</span> <span class="hljs-string">start-first</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
        <span class="hljs-attr">delay:</span> <span class="hljs-string">10s</span>
        <span class="hljs-attr">max_attempts:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">1G</span>
        <span class="hljs-attr">reservations:</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">512M</span>
      <span class="hljs-attr">placement:</span>
        <span class="hljs-attr">constraints:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">node.labels.nacos</span> <span class="hljs-string">==</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ä»¥ç»™èŠ‚ç‚¹æ‰“æ ‡ç­¾</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:8848/nacos/v1/ns/operator/metrics"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">60s</span>

  <span class="hljs-comment"># Spring Bootåº”ç”¨</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">${APP_IMAGE}</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">app</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">SPRING_PROFILES_ACTIVE:</span> <span class="hljs-string">${SPRING_PROFILE:-prod}</span>
      <span class="hljs-attr">SPRING_CLOUD_NACOS_DISCOVERY_SERVER-ADDR:</span> <span class="hljs-string">nacos:8848</span>
      <span class="hljs-attr">SPRING_CLOUD_NACOS_CONFIG_SERVER-ADDR:</span> <span class="hljs-string">nacos:8848</span>
      <span class="hljs-attr">SPRING_CLOUD_NACOS_USERNAME:</span> <span class="hljs-string">${NACOS_USERNAME:-nacos}</span>
      <span class="hljs-attr">SPRING_CLOUD_NACOS_PASSWORD:</span> <span class="hljs-string">${NACOS_PASSWORD:-nacos}</span>
      <span class="hljs-attr">SPRING_DATASOURCE_URL:</span> <span class="hljs-string">jdbc:mysql://mysql:3306/${MYSQL_DATABASE}?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=Asia/Shanghai</span>
      <span class="hljs-attr">SPRING_DATASOURCE_USERNAME:</span> <span class="hljs-string">${MYSQL_USER}</span>
      <span class="hljs-attr">SPRING_DATASOURCE_PASSWORD:</span> <span class="hljs-string">${MYSQL_PASSWORD}</span>
      <span class="hljs-attr">SPRING_REDIS_HOST:</span> <span class="hljs-string">redis</span>
      <span class="hljs-attr">SPRING_REDIS_PORT:</span> <span class="hljs-number">6379</span>
      <span class="hljs-attr">SPRING_REDIS_PASSWORD:</span> <span class="hljs-string">${REDIS_PASSWORD}</span>
      <span class="hljs-attr">JAVA_OPTS:</span> <span class="hljs-string">"-Xmx512m -Xms256m -Duser.timezone=Asia/Shanghai"</span>
      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-logs:/app/logs</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-data:/app/data</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${APP_PORT:-8080}:8080"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">mysql:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
      <span class="hljs-attr">nacos:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">replicated</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-string">${REPLICAS:-2}</span>
      <span class="hljs-attr">update_config:</span>
        <span class="hljs-attr">parallelism:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">delay:</span> <span class="hljs-string">10s</span>
        <span class="hljs-attr">order:</span> <span class="hljs-string">start-first</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
        <span class="hljs-attr">delay:</span> <span class="hljs-string">10s</span>
        <span class="hljs-attr">max_attempts:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">1G</span>
        <span class="hljs-attr">reservations:</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">512M</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:8080/actuator/health"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>

  <span class="hljs-comment"># Nginxåå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/nginx/nginx.conf:/etc/nginx/nginx.conf:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./logs/nginx:/var/log/nginx</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./ssl:/etc/nginx/ssl:ro</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nacos</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">replicated</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-9">5. <code>.env</code> æ–‡ä»¶</h3>
<pre><code class="hljs language-env" lang="env"># MySQLé…ç½®
MYSQL_ROOT_PASSWORD=YourStrongRootPassword
MYSQL_DATABASE=appdb
MYSQL_USER=appuser
MYSQL_PASSWORD=YourStrongAppPassword

# Redisé…ç½®
REDIS_PASSWORD=YourStrongRedisPassword

# Nacosé…ç½®
NACOS_VERSION=2.2.0
NACOS_MODE=standalone
NACOS_DB_PASSWORD=YourStrongNacosDbPassword
NACOS_AUTH_ENABLE=false
NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789
NACOS_USERNAME=nacos
NACOS_PASSWORD=nacos
NACOS_PORT=8848
NACOS_PORT_GRPC=9848
NACOS_REPLICAS=1

# åº”ç”¨é…ç½®
APP_IMAGE=your-registry/springboot-app:1.0.0
APP_PORT=8080
SPRING_PROFILE=prod
REPLICAS=2

# Swarmé…ç½®
STACK_NAME=springboot-nacos-stack
</code></pre>
<h3 data-id="heading-10">6. Nginxé…ç½®ï¼ˆä»£ç†Nacoså’ŒAppï¼‰</h3>
<h4 data-id="heading-11"><code>config/nginx/nginx.conf</code></h4>
<pre><code class="hljs language-nginx" lang="nginx">worker_processes auto;

events {
    worker_connections 1024;
}

http {
    upstream app_servers {
        least_conn;
        server app:8080;
    }

    upstream nacos_servers {
        least_conn;
        server nacos:8848;
    }

    # NacosæœåŠ¡ä»£ç†
    server {
        listen 8848;
        server_name nacos.your-domain.com;
        
        location / {
            proxy_pass http://nacos_servers;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
            
            # å…è®¸è·¨åŸŸï¼ˆNacosæ§åˆ¶å°éœ€è¦ï¼‰
            add_header Access-Control-Allow-Origin *;
            add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
            add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';
        }
        
        access_log /var/log/nginx/nacos-access.log;
        error_log /var/log/nginx/nacos-error.log;
    }

    # åº”ç”¨æœåŠ¡ä»£ç†
    server {
        listen 80;
        server_name your-domain.com;
        
        location / {
            proxy_pass http://app_servers;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }
        
        access_log /var/log/nginx/app-access.log;
        error_log /var/log/nginx/app-error.log;
    }
}
</code></pre>
<h3 data-id="heading-12">7. Spring Bootåº”ç”¨é…ç½®ç¤ºä¾‹</h3>
<h4 data-id="heading-13"><code>bootstrap.yml</code>ï¼ˆåº”ç”¨é…ç½®æ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">your-app-name</span>
  
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR:nacos:8848}</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">${NACOS_NAMESPACE:}</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">${NACOS_GROUP:DEFAULT_GROUP}</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_USERNAME:nacos}</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_PASSWORD:nacos}</span>
      
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR:nacos:8848}</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">${NACOS_NAMESPACE:}</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">${NACOS_GROUP:DEFAULT_GROUP}</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_USERNAME:nacos}</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">${SPRING_CLOUD_NACOS_PASSWORD:nacos}</span>
        <span class="hljs-attr">refresh-enabled:</span> <span class="hljs-literal">true</span>

  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">${SPRING_DATASOURCE_URL}</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">${SPRING_DATASOURCE_USERNAME}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${SPRING_DATASOURCE_PASSWORD}</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">10</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">${SPRING_REDIS_HOST}</span>
    <span class="hljs-attr">port:</span> <span class="hljs-string">${SPRING_REDIS_PORT}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${SPRING_REDIS_PASSWORD}</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">5000ms</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>
</code></pre>
<h3 data-id="heading-14">8. éƒ¨ç½²è„šæœ¬</h3>
<h4 data-id="heading-15"><code>deploy.sh</code></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è®¾ç½®é¢œè‰²è¾“å‡º</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
NC=<span class="hljs-string">'\033[0m'</span> <span class="hljs-comment"># No Color</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>å¼€å§‹éƒ¨ç½²Spring Boot + Nacosé¡¹ç›®...<span class="hljs-variable">${NC}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥Docker Swarmæ˜¯å¦å·²åˆå§‹åŒ–</span>
<span class="hljs-keyword">if</span> ! docker node <span class="hljs-built_in">ls</span> &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>Docker Swarmæœªåˆå§‹åŒ–ï¼Œæ­£åœ¨åˆå§‹åŒ–...<span class="hljs-variable">${NC}</span>"</span>
    docker swarm init
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºå¿…è¦çš„ç›®å½•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>åˆ›å»ºå¿…è¦çš„ç›®å½•...<span class="hljs-variable">${NC}</span>"</span>
<span class="hljs-built_in">mkdir</span> -p logs/{app,nacos,nginx}
<span class="hljs-built_in">mkdir</span> -p data/{mysql,redis,app-data,nacos/{conf,data,logs}}
<span class="hljs-built_in">mkdir</span> -p config/{mysql-init,nacos,nginx}

<span class="hljs-comment"># æ£€æŸ¥Nacosæ•°æ®åº“è„šæœ¬æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"config/mysql-init/nacos-schema.sql"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>ä¸‹è½½Nacosæ•°æ®åº“è„šæœ¬...<span class="hljs-variable">${NC}</span>"</span>
    curl -o config/mysql-init/nacos-schema.sql \
    https://raw.githubusercontent.com/alibaba/nacos/master/distribution/conf/mysql-schema.sql
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
<span class="hljs-keyword">if</span> [ -f <span class="hljs-string">".env"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>åŠ è½½ç¯å¢ƒå˜é‡...<span class="hljs-variable">${NC}</span>"</span>
    <span class="hljs-built_in">export</span> $(<span class="hljs-built_in">cat</span> .<span class="hljs-built_in">env</span> | grep -v <span class="hljs-string">'^#'</span> | xargs)
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${RED}</span>é”™è¯¯: .envæ–‡ä»¶ä¸å­˜åœ¨<span class="hljs-variable">${NC}</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ„å»ºåº”ç”¨é•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> == <span class="hljs-string">"build"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>æ„å»ºåº”ç”¨é•œåƒ...<span class="hljs-variable">${NC}</span>"</span>
    docker build -t <span class="hljs-variable">${APP_IMAGE}</span> .
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éƒ¨ç½²æœåŠ¡</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>éƒ¨ç½²æœåŠ¡...<span class="hljs-variable">${NC}</span>"</span>
docker stack deploy -c docker-stack.yml <span class="hljs-variable">${STACK_NAME}</span>

<span class="hljs-comment"># ç­‰å¾…æœåŠ¡å¯åŠ¨</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>ç­‰å¾…æœåŠ¡å¯åŠ¨...<span class="hljs-variable">${NC}</span>"</span>
<span class="hljs-built_in">sleep</span> 30

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>æ£€æŸ¥æœåŠ¡çŠ¶æ€...<span class="hljs-variable">${NC}</span>"</span>
docker stack services <span class="hljs-variable">${STACK_NAME}</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>éƒ¨ç½²å®Œæˆï¼<span class="hljs-variable">${NC}</span>"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"è®¿é—®åœ°å€ï¼š"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"  Nacosæ§åˆ¶å°: http://localhost:<span class="hljs-variable">${NACOS_PORT:-8848}</span>/nacos"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"  åº”ç”¨æœåŠ¡: http://localhost:<span class="hljs-variable">${APP_PORT:-8080}</span>"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"  æ•°æ®åº“: localhost:3306"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"  Redis: localhost:6379"</span>
</code></pre>
<h3 data-id="heading-16">9. ç®¡ç†å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»™èŠ‚ç‚¹æ‰“æ ‡ç­¾ï¼ˆç”¨äºéƒ¨ç½²Nacosï¼‰</span>
docker node update --label-add nacos=<span class="hljs-literal">true</span> &lt;node-name&gt;

<span class="hljs-comment"># æŸ¥çœ‹Nacosæ—¥å¿—</span>
docker service logs <span class="hljs-variable">${STACK_NAME}</span>_nacos -f

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æœåŠ¡</span>
docker stack ps <span class="hljs-variable">${STACK_NAME}</span>

<span class="hljs-comment"># æ‰©å±•Nacoså®ä¾‹ï¼ˆé›†ç¾¤æ¨¡å¼ï¼‰</span>
docker service scale <span class="hljs-variable">${STACK_NAME}</span>_nacos=3

<span class="hljs-comment"># å¤‡ä»½Nacosé…ç½®</span>
tar -czf nacos-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d).tar.gz data/nacos/conf/

<span class="hljs-comment"># è®¿é—®Nacosæ§åˆ¶å°</span>
<span class="hljs-comment"># ç”¨æˆ·å: nacos</span>
<span class="hljs-comment"># å¯†ç : nacosï¼ˆé»˜è®¤ï¼‰</span>
</code></pre>
<h3 data-id="heading-17">10. Nacosé›†ç¾¤æ¨¡å¼éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰</h3>
<p>å¦‚æœéœ€è¦éƒ¨ç½²Nacosé›†ç¾¤ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>ä¿®æ”¹ <code>.env</code> æ–‡ä»¶ï¼š</li>
</ol>
<pre><code class="hljs language-env" lang="env">NACOS_MODE=cluster
NACOS_REPLICAS=3
</code></pre>
<ol start="2">
<li>ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰æ ‡ç­¾ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">docker node update --label-add nacos=<span class="hljs-literal">true</span> node1
docker node update --label-add nacos=<span class="hljs-literal">true</span> node2
docker node update --label-add nacos=<span class="hljs-literal">true</span> node3
</code></pre>
<ol start="3">
<li>åˆ›å»ºé›†ç¾¤é…ç½®æ–‡ä»¶å¹¶æŒ‚è½½åˆ°æ¯ä¸ªNacoså®ä¾‹ã€‚</li>
</ol>
<p>è¿™ä¸ªé…ç½®å®ç°äº†ï¼š</p>
<ul>
<li>Nacosä½¿ç”¨å¤–éƒ¨MySQLå­˜å‚¨é…ç½®</li>
<li>æ‰€æœ‰é…ç½®æ–‡ä»¶æŒä¹…åŒ–åˆ°æœ¬åœ°</li>
<li>Spring Bootåº”ç”¨ä»Nacosè·å–é…ç½®</li>
<li>å®Œæ•´çš„å¥åº·æ£€æŸ¥å’ŒæœåŠ¡ä¾èµ–</li>
<li>æ—¥å¿—å’Œæ•°æ®æŒä¹…åŒ–</li>
</ul>
<p>è¯·æ ¹æ®æ‚¨çš„å®é™…éœ€æ±‚è°ƒæ•´é…ç½®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆä¸ƒï¼‰ï¼šååº”å¼ç¼–ç¨‹æ¡†æ¶Flowerçš„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7594576956419850266</link>    <guid>https://juejin.cn/post/7594576956419850266</guid>    <pubDate>2026-01-13T05:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594576956419850266" data-draft-id="7594391758427389962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆä¸ƒï¼‰ï¼šååº”å¼ç¼–ç¨‹æ¡†æ¶Flowerçš„è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-13T05:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆä¸ƒï¼‰ï¼šååº”å¼ç¼–ç¨‹æ¡†æ¶Flowerçš„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T05:35:04.000Z" title="Tue Jan 13 2026 05:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>è¿™æ˜¯ã€Šå‰ç«¯åƒæ¶æ„çªå›´ - æ¡†æ¶è®¾è®¡ã€‹ç³»åˆ—çš„æœ€ç»ˆç« ã€‚
æˆ‘ä»¬ä¸ä¸“é—¨å»è¯´æ¡†æ¶ã€èŠå“åº”å¼, æˆ‘ä»¬å»å­¦æ€æƒ³ã€çœ‹æ›´ä¸Šå±‚çš„ä¸œè¥¿ã€‚</p>
<p>åœ¨å‰å…­ç« ï¼Œæˆ‘ä»¬èŠäº†é¢å‘å¯¹è±¡çš„æœ¬è´¨ã€å¼€é—­åŸåˆ™çš„å¨åŠ›ã€ä»¥åŠæ¥å£èŒè´£çš„éš”ç¦»ã€‚å¦‚æœè¯´é‚£äº›æ˜¯â€œå†…åŠŸå¿ƒæ³•â€ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬è¦èŠçš„ï¼Œå°±æ˜¯å¦‚ä½•é“¸é€ ä¸€æŠŠè¶æ‰‹çš„â€œå…µå™¨â€ã€‚</p>
<p>æˆ‘ä»¬å°†ä»é›¶å¼€å§‹æ„æ€ä¸€ä¸ªåä¸º <strong>Flower</strong> çš„ååº”å¼æ¡†æ¶ã€‚</p>
<p>ä½†è¯·æ³¨æ„ï¼Œè¿™<strong>ä¸æ˜¯</strong>ä¸€ç¯‡â€œæ•™ä½ å†™ Vue å“åº”å¼åŸç†â€çš„æ•™ç¨‹ã€‚ç›¸åï¼Œè¿™æ˜¯ä¸€æ¬¡å…³äº**â€œåæ€â€**çš„æ—…ç¨‹ã€‚æˆ‘ä»¬è¦æ¢è®¨çš„æ˜¯ï¼šå½“è‡ªåŠ¨æŒ¡çš„ååº”å¼ç³»ç»Ÿåœ¨å¤æ‚ä¸šåŠ¡ä¸­å¤±æ§æ—¶ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€šè¿‡æ¶æ„è®¾è®¡ï¼Œæ‰¾å›ä¸¢å¤±çš„æ§åˆ¶æƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ å¼•è¨€ï¼šå¯¹â€œé­”æ³•â€çš„ææƒ§</h2>
<p>åœ¨å†™è¿™ä¸€ç« ä¹‹å‰ï¼Œæˆ‘å…¶å®çŠ¹è±«è¿‡ä¸€æ®µæ—¶é—´ã€‚ä¸æ˜¯å› ä¸ºååº”å¼ç¼–ç¨‹æœ‰å¤šéš¾å®ç°ï¼Œè€Œæ˜¯å› ä¸ºâ€”â€”<strong>æˆ‘å¤ªæ¸…æ¥šå®ƒæœ‰å¤šå®¹æ˜“å¤±æ§äº†</strong>ã€‚</p>
<p>åœ¨å¾ˆå¤šé¡¹ç›®åˆæœŸï¼Œååº”å¼ç³»ç»Ÿç®€ç›´æ˜¯å¤©ä½¿ï¼šçŠ¶æ€ä¸€æ”¹ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œé€»è¾‘çœ‹èµ·æ¥å¹²å‡€åˆä¼˜é›…ã€‚æˆ‘ä»¬æ²‰æµ¸åœ¨ <code>v-model</code> æˆ– <code>useEffect</code> çš„ä¾¿åˆ©ä¸­ï¼Œäº«å—ç€â€œå£°æ˜å¼ç¼–ç¨‹â€çš„çº¢åˆ©ã€‚</p>
<p>ä½†å½“çŠ¶æ€ä» 10 ä¸ªå˜æˆ 100 ä¸ªï¼Œå½“ä¾èµ–å…³ç³»åƒèœ˜è››ç½‘ä¸€æ ·äº¤ç»‡ï¼Œå½“ä¸šåŠ¡é€»è¾‘å¼€å§‹å˜å¾—è¯¡è°²å¤šå˜æ—¶ï¼Œä½ ä¼šæ…¢æ…¢å‘ç°ï¼Œé‚£ä¸ªæ›¾ç»ä¹–å·§çš„ç³»ç»Ÿå¼€å§‹â€œåå™¬â€äº†ï¼š</p>
<ul>
<li><strong>å¹½çµæ›´æ–°</strong>ï¼šæ”¹äº†ä¸€ä¸ªçœ‹ä¼¼æ— å…³çš„å­—æ®µï¼Œä¸ºä»€ä¹ˆä¼šå¯¼è‡´åŠä¸ªé¡µé¢é‡æ¸²æŸ“ï¼Ÿ</li>
<li><strong>è°ƒè¯•é»‘æ´</strong>ï¼šæ•°æ®æµåƒä¸€å›¢ä¹±éº»ï¼Œæ‰“æ–­ç‚¹éƒ½ä¸çŸ¥é“è¯¥æ‰“åœ¨å“ªé‡Œï¼Œåªèƒ½é  <code>console.log</code> ç¢°è¿æ°”ã€‚</li>
<li><strong>å¿ƒæ™ºè´Ÿæ‹…</strong>ï¼šæ–°äººä¸æ•¢åŠ¨æ ¸å¿ƒçŠ¶æ€ï¼Œå› ä¸ºâ€œå®ƒå¥½åƒè¢«å¾ˆå¤šåœ°æ–¹ä¾èµ–äº†ï¼Œä½†æˆ‘ä¸çŸ¥é“å…·ä½“æ˜¯å“ªâ€ã€‚</li>
</ul>
<p>è¿™æ—¶å€™ä½ ä¼šæ„è¯†åˆ°ï¼š<strong>ç³»ç»Ÿå¹¶ä¸æ˜¯åœ¨â€œå“åº”å˜åŒ–â€ï¼Œè€Œæ˜¯åœ¨è¢«å˜åŒ–ç‰µç€èµ°ã€‚</strong></p>
<p>Flower çš„è®¾è®¡ï¼Œæ­£æ˜¯ä»è¿™ç§ä¸å®‰æ„Ÿå¼€å§‹çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4b125704d2046e6ba404e597f8a3715~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=yeuPf%2FrJzbIx%2Fgnvb7YPyalQNX0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒå®šä¹‰ï¼šFlower çš„è¾¹ç•Œ</h2>
<p>å¦‚æœåªæ˜¯å®ç°ä¸€ä¸ªç®€å•çš„ååº”å¼åº“ï¼Œç½‘ä¸Šæœ‰æ— æ•°ä¸ªç‰ˆæœ¬çš„ <code>Object.defineProperty</code> æˆ– <code>Proxy</code> æ•™ç¨‹ã€‚</p>
<p>ä½†æ¶æ„å¸ˆçš„èŒè´£ä¸æ˜¯â€œå®ç°åŠŸèƒ½â€ï¼Œè€Œæ˜¯**â€œåˆ’å®šè¾¹ç•Œâ€ <strong>ã€‚åœ¨è®¾è®¡ Flower ä¹‹åˆï¼Œæˆ‘åšçš„ç¬¬ä¸€ä¸ªå†³ç­–ä¸æ˜¯å®ƒâ€œè¦æœ‰ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯å®ƒ</strong>â€œä¸è¦ä»€ä¹ˆâ€**ã€‚</p>
<p>Flower <strong>ä¸è§£å†³</strong>ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>UI å¦‚ä½•æ¸²æŸ“ï¼ˆé‚£æ˜¯ React/Vue çš„äº‹ï¼‰</li>
<li>ç»„ä»¶å¦‚ä½•ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
<li>è·¯ç”±ä¸ç½‘ç»œè¯·æ±‚</li>
</ul>
<p>Flower <strong>åªè§£å†³</strong>ä¸€ä¸ªæ ¸å¿ƒå‘½é¢˜ï¼š</p>
<ul>
<li><strong>å˜åŒ–ç®¡ç†</strong>ï¼šå˜åŒ–ä»å“ªé‡Œäº§ç”Ÿï¼Ÿå®ƒå¦‚ä½•æœ‰åºåœ°æµå‘éœ€è¦å®ƒçš„åœ°æ–¹ï¼Ÿ</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªåˆ»æ„â€œåšå°â€çš„å†³ç­–ã€‚å› ä¸ºæˆ‘è¶Šæ¥è¶Šç¡®ä¿¡ï¼š<strong>ååº”å¼ç³»ç»Ÿä¸€æ—¦ä»€ä¹ˆéƒ½æƒ³ç®¡ï¼ˆæ¯”å¦‚æŠŠ HTTP è¯·æ±‚ä¹Ÿè£¹è¿›å“åº”å¼é‡Œï¼‰ï¼Œæœ€ç»ˆå°±ä¼šå˜æˆä¸€å›¢éš¾ä»¥ç»´æŠ¤çš„æ³¥çƒã€‚</strong></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1ae483942164c96ab82a7e29399e575~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=JaV7JuEWfnjL2QdhJUz%2BJUdVPHU%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ è®¾è®¡å†³ç­– Aï¼šçŠ¶æ€ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯â€œè´£ä»»â€</h2>
<p>åœ¨å¾ˆå¤šä¸»æµæ¡†æ¶ä¸­ï¼ŒçŠ¶æ€ï¼ˆStateï¼‰é€šå¸¸è¢«å»ºæ¨¡ä¸ºä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼ˆObjectï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// å¸¸è§çš„åšæ³•
const <span class="hljs-attr">state</span> = reactive({ count: <span class="hljs-number">0</span> })<span class="hljs-comment">;</span>
state.count++<span class="hljs-comment">; // æ—¢æ˜¯è¯»å–ï¼Œåˆæ˜¯ä¿®æ”¹ï¼Œè¿˜æ˜¯è§¦å‘å™¨</span>
</code></pre>
<p>å¯¹è±¡å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒè¿åäº†æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ <strong>SRPï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰</strong> ã€‚ä¸€ä¸ªç®€å•çš„å¯¹è±¡å±æ€§ï¼ŒåŒæ—¶æ‰¿æ‹…äº†â€œæ•°æ®å®¹å™¨â€ã€â€œè¯»å–æ¥å£â€ã€â€œå†™å…¥æ¥å£â€å’Œâ€œå˜åŒ–é€šçŸ¥â€å››ä¸ªèŒè´£ã€‚</p>
<p>åœ¨ Flower ä¸­ï¼Œæˆ‘å†³å®š<strong>å‰¥å¤ºçŠ¶æ€çš„â€œå¯¹è±¡èº«ä»½â€</strong> ã€‚</p>
<p>æˆ‘ä»¬å°†çŠ¶æ€è®¾è®¡ä¸º<strong>åŸå­ä¿¡å·ï¼ˆAtom Signalï¼‰</strong> ï¼Œå¹¶å¼ºåˆ¶åˆ†ç¦»<strong>è¯»å†™æƒé™</strong>ã€‚è¿™å…¶å®æ˜¯ <strong>CQSï¼ˆå‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼‰</strong> åœ¨å‰ç«¯çš„ä¸€æ¬¡å¾®è§‚è½åœ°ã€‚</p>
<h3 data-id="heading-3">å·¥ç¨‹å®ç°ï¼š</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Flower çš„è®¾è®¡é£æ ¼</span>
const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">createSignal</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// count() -&gt; è¿™æ˜¯ä¸€ä¸ª Getterï¼Œåªè´Ÿè´£è¯»å–å’Œä¾èµ–æ”¶é›†</span>
<span class="hljs-comment">// setCount() -&gt; è¿™æ˜¯ä¸€ä¸ª Setterï¼Œåªè´Ÿè´£å†™å…¥å’Œé€šçŸ¥æ›´æ–°</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆéº»çƒ¦ï¼Ÿ</p>
<p>å› ä¸ºè¿™å¸¦æ¥äº†**â€œå¼•ç”¨é€æ˜æ€§â€**ã€‚</p>
<ul>
<li>å¦‚æœä½ æ‹¿åˆ°çš„æ˜¯ <code>count</code>ï¼Œæˆ‘çŸ¥é“ä½ åªèƒ½è¯»ï¼Œç»ä¸å¯èƒ½æ‚„æ‚„ä¿®æ”¹å®ƒå¯¼è‡´ Bugã€‚</li>
<li>å¦‚æœä½ æ‹¿åˆ°äº† <code>setCount</code>ï¼Œæˆ‘çŸ¥é“ä½ æ˜¯â€œç”Ÿäº§è€…â€ï¼Œä½ è¦å¯¹å˜åŒ–è´Ÿè´£ã€‚</li>
</ul>
<p>é€šè¿‡ API çš„è®¾è®¡ï¼Œæˆ‘ä»¬åœ¨ä»£ç å±‚é¢å¼ºè¡Œçº¦æŸäº†å¼€å‘è€…çš„è¡Œä¸ºã€‚<strong>è¿™ä¸æ˜¯é™åˆ¶ï¼Œè¿™æ˜¯ä¿æŠ¤ã€‚</strong></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75d15c9fce3348eba4d921f1b6a3e4f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=KvL5uR2UdjX9CIYuco89k6oxjeo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">å››ã€ è®¾è®¡å†³ç­– Bï¼šæ‹’ç»â€œéšå¼ä¾èµ–â€çš„è¯±æƒ‘</h2>
<p>è‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼ˆAuto-Dependency Collectionï¼‰æ˜¯ç°ä»£å‰ç«¯æ¡†æ¶æœ€è¿·äººçš„â€œé­”æ³•â€ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é­”æ³•ï¼šä½ æ²¡å†™ä»»ä½•è®¢é˜…ä»£ç ï¼Œä½†å®ƒå°±æ˜¯å·¥ä½œäº†</span>
<span class="hljs-built_in">effect</span>(() =&gt; {
  console<span class="hljs-selector-class">.log</span>(state.name); <span class="hljs-comment">// è‡ªåŠ¨æ”¶é›†äº† state.name çš„ä¾èµ–</span>
});
</code></pre>
<p>å®ƒç¡®å®å¥½ç”¨ï¼Œä½†åœ¨å¤æ‚å·¥ç¨‹ä¸­ï¼Œæˆ‘è¶Šæ¥è¶Šè­¦æƒ•è¿™ç§â€œæ‚„æ‚„å‘ç”Ÿçš„äº‹æƒ…â€ã€‚å½“ä¾èµ–æ˜¯éšå¼çš„ï¼Œä½ å°±å¾ˆéš¾å›ç­”ï¼š <strong>â€œä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°æ‰§è¡Œäº†ï¼Ÿâ€</strong></p>
<p>Flower åœ¨è¿™é‡Œåšäº†ä¸€ä¸ªæå…¶<strong>ä¿å®ˆ</strong>ï¼Œç”šè‡³å¯ä»¥è¯´â€œåæ½®æµâ€çš„é€‰æ‹©ï¼š<strong>æ˜¾å¼ä¾èµ–ï¼ˆExplicit Dependencyï¼‰</strong> ã€‚</p>
<p>æˆ‘ä»¬å‚è€ƒäº† <strong>DIPï¼ˆä¾èµ–å€’ç½®åŸåˆ™ï¼‰</strong> çš„æ€æƒ³ï¼š<strong>é«˜å±‚é€»è¾‘ä¸åº”è¯¥ä¾èµ–äºâ€œè¿è¡Œæ—¶æ‚„æ‚„å‘ç”Ÿçš„è¯»æ“ä½œâ€ï¼Œè€Œåº”è¯¥ä¾èµ–äºâ€œæ˜ç¡®å£°æ˜çš„å¥‘çº¦â€ã€‚</strong></p>
<h3 data-id="heading-5">å·¥ç¨‹å®ç°ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Flower çš„è®¾è®¡é£æ ¼ï¼šä½ éœ€è¦å‘Šè¯‰æˆ‘ä½ å…³å¿ƒä»€ä¹ˆ</span>
<span class="hljs-title function_">effect</span>(
  <span class="hljs-comment">// 1. æ˜¾å¼å£°æ˜ä¾èµ–åˆ—è¡¨ï¼ˆåƒ React çš„ deps æ•°ç»„ï¼Œä½†æ›´ä¸¥æ ¼ï¼‰</span>
  [count, name], 
  <span class="hljs-comment">// 2. å›è°ƒå‡½æ•°ï¼Œå‚æ•°å³ä¸ºä¾èµ–çš„å½“å‰å€¼</span>
  <span class="hljs-function">(<span class="hljs-params">currentCount, currentName</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Update: <span class="hljs-subst">${currentCount}</span>, <span class="hljs-subst">${currentName}</span>`</span>);
  }
);
</code></pre>
<p>è¿™ç§è®¾è®¡çœ‹èµ·æ¥â€œæ²¡é‚£ä¹ˆèªæ˜â€ï¼Œç”šè‡³æœ‰ç‚¹å•°å—¦ã€‚ä½†å®ƒæ¢æ¥çš„æ˜¯<strong>ç¡®å®šæ€§</strong>ã€‚</p>
<p>åœ¨ Code Review æ—¶ï¼Œæˆ‘çœ‹ä¸€çœ¼ä¾èµ–åˆ—è¡¨ï¼Œå°±çŸ¥é“è¿™ä¸ª Effect ä¼šè¢«ä»€ä¹ˆè§¦å‘ã€‚è¿™ç§<strong>å¯æ¨ç†æ€§ï¼ˆReasonabilityï¼‰</strong> ï¼Œåœ¨ç»´æŠ¤ä¸‰å¹´ä»¥ä¸Šçš„è€é¡¹ç›®æ—¶ï¼Œæ¯”ä»€ä¹ˆé­”æ³•éƒ½çè´µã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9d78dfb5ba14ff29d7528e869f0a4cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=87fNCYojNmTjAzxxuDKkD4%2FaYfI%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">äº”ã€ è®¾è®¡å†³ç­– Cï¼šè°ƒåº¦å™¨â€”â€”è§£å†³â€œè±å½¢ä¾èµ–â€éš¾é¢˜</h2>
<p>å¾ˆå¤šæ‰‹å†™çš„ååº”å¼åº“ï¼ˆToy Implementationï¼‰éƒ½ä¼šé‡åˆ°ä¸€ä¸ªç»å…¸ Bugï¼š <strong>â€œé—ªçƒâ€æˆ–â€œè¿‡æ¸¡æ€â€</strong> ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š<code>A</code> å˜äº†ï¼Œ<code>B</code> ä¾èµ– <code>A</code>ï¼Œ<code>C</code> ä¾èµ– <code>A</code>ï¼Œè€Œ <code>D</code> åŒæ—¶ä¾èµ– <code>B</code> å’Œ <code>C</code>ã€‚ å½“ <code>A</code> æ›´æ–°æ—¶ï¼Œ<code>D</code> å¯èƒ½ä¼šè¢«è§¦å‘ä¸¤æ¬¡ï¼ˆä¸€æ¬¡æ¥è‡ª B çš„è·¯å¾„ï¼Œä¸€æ¬¡æ¥è‡ª C çš„è·¯å¾„ï¼‰ï¼Œç”šè‡³åœ¨ç¬¬ä¸€æ¬¡è§¦å‘æ—¶è¯»åˆ°ä¸ä¸€è‡´çš„æ•°æ®ã€‚è¿™å°±æ˜¯è‘—åçš„ <strong>â€œè±å½¢ä¾èµ–é—®é¢˜â€ (Diamond Problem)</strong> ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è¯´ï¼šâ€œæ›´æ–°æœºåˆ¶ä¸æ˜¯æ€§èƒ½é—®é¢˜ï¼Œè€Œæ˜¯æ­£ç¡®æ€§é—®é¢˜ã€‚â€</p>
<p>Flower å¼•å…¥äº†ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š<strong>è°ƒåº¦å™¨ (Scheduler)</strong> ã€‚</p>
<h3 data-id="heading-7">å·¥ç¨‹å®ç°ï¼š</h3>
<p>è°ƒåº¦å™¨çš„æ ¸å¿ƒé€»è¾‘æ˜¯**â€œæ¨-æ‹‰ç»“åˆâ€ (Push-Pull)**ï¼š</p>
<ol>
<li><strong>Push é˜¶æ®µ</strong>ï¼šå½“ä¿¡å·å˜åŒ–æ—¶ï¼Œä¸ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè€Œæ˜¯æ ‡è®°æ‰€æœ‰è„èŠ‚ç‚¹ï¼ˆDirty Markingï¼‰ã€‚</li>
<li><strong>Pull é˜¶æ®µ</strong>ï¼šåœ¨å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰é˜Ÿåˆ—ä¸­ï¼ŒæŒ‰ç…§æ‹“æ‰‘æ’åºï¼ˆTopological Sortï¼‰çš„é¡ºåºï¼Œä¸€æ¬¡æ€§è®¡ç®—å‡ºæœ€ç»ˆçŠ¶æ€ã€‚</li>
</ol>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç®€åŒ–çš„è°ƒåº¦é€»è¾‘</span>
let dirtyQueue = new <span class="hljs-built_in">Set</span>();

function <span class="hljs-built_in">schedule</span>(effect) {
  dirtyQueue<span class="hljs-selector-class">.add</span>(effect);
  <span class="hljs-comment">// åˆ©ç”¨ Promise.resolve() å»¶è¿Ÿåˆ°å¾®ä»»åŠ¡æ‰§è¡Œ</span>
  <span class="hljs-built_in">queueMicrotask</span>(flush);
}

function <span class="hljs-built_in">flush</span>() {
  <span class="hljs-comment">// åœ¨è¿™é‡Œè¿›è¡Œæ’åºã€å»é‡ã€æ‰¹é‡æ‰§è¡Œ</span>
  <span class="hljs-comment">// ç¡®ä¿ D åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”æ˜¯åœ¨ B å’Œ C éƒ½æ›´æ–°å®Œä¹‹å</span>
}
</code></pre>
<p>é€šè¿‡å¼•å…¥è°ƒåº¦å±‚ï¼ŒFlower ä¿è¯äº†ï¼š<strong>æ¯ä¸€æ¬¡æ›´æ–°ï¼Œéƒ½æ˜¯ç³»ç»Ÿè¾¾åˆ°â€œç¨³å®šæ€â€åçš„ç»“æœã€‚</strong> ä¸­é—´è¿‡ç¨‹çš„åŠ¨è¡ï¼Œè¢«æ¡†æ¶å†…éƒ¨æ¶ˆåŒ–äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c528a8ee18924fd88ee31bfd25e2bbd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=HHDPJOSrxrvaagP0cS0VLdB45ZI%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">å…­ã€ åˆ ç¹å°±ç®€ï¼šFlower åˆ°åº•å‰©ä¸‹äº†ä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸æ–­åœ°é—®è‡ªå·±ï¼š <strong>â€œå¦‚æœæŠŠ Flower ä¸€å±‚å±‚å‰¥å¼€ï¼Œåˆ åˆ°ä¸èƒ½å†åˆ ï¼Œå®ƒè¿˜å‰©ä¸‹ä»€ä¹ˆï¼Ÿâ€</strong></p>
<p>æœ€åç•™ä¸‹çš„ï¼Œå…¶å®åªæœ‰ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬æ„æˆäº† Flower çš„éª¨æ¶ï¼š</p>
<ol>
<li><strong>Signal (ä¿¡å·æº)</strong> ï¼šè´Ÿè´£å®šä¹‰æ•°æ®å’Œæƒé™ã€‚</li>
<li><strong>Derive (è®¡ç®—å±æ€§)</strong> ï¼šè´Ÿè´£æ•°æ®çš„è½¬æ¢ä¸æ´¾ç”Ÿã€‚</li>
<li><strong>Effect (å‰¯ä½œç”¨)</strong> ï¼šè´Ÿè´£ä¸å¤–éƒ¨ä¸–ç•Œï¼ˆå¦‚ DOMã€æ—¥å¿—ï¼‰äº¤äº’ã€‚</li>
</ol>
<p>æ²¡æœ‰å¤æ‚çš„ Classï¼Œæ²¡æœ‰éš¾ä»¥ç†è§£çš„é…ç½®å¯¹è±¡ï¼Œæ²¡æœ‰é»‘é­”æ³•ã€‚</p>
<p>è¿™è®©æˆ‘å†æ¬¡ç¡®è®¤äº†ä¸€ä¸ªæ¶æ„çœŸç†ï¼š<strong>æ¡†æ¶çš„ä»·å€¼ï¼Œä¸åœ¨äºæä¾›äº†å¤šå°‘èƒ½åŠ›ï¼Œè€Œåœ¨äºå®ƒé™åˆ¶äº†å¤šå°‘å¯èƒ½æ€§ã€‚</strong></p>
<p>Flower é™åˆ¶äº†ä½ éšæ„ä¿®æ”¹çŠ¶æ€çš„æƒåŠ›ï¼Œé™åˆ¶äº†ä½ éšå¼å»ºç«‹ä¾èµ–çš„è‡ªç”±ï¼Œä½†å®ƒç»™äºˆäº†ä½ **â€œç³»ç»Ÿæ— è®ºæ€ä¹ˆå˜ï¼Œä¾ç„¶å°½åœ¨æŒæ¡â€**çš„å®‰å…¨æ„Ÿã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17318733c03e4170bd609fa7d7f21880~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768896173&amp;x-signature=aMMmfKD6lH5q2lCqNOG%2FCv920u0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€ ç»“è¯­ï¼šä»â€œæœ¯â€åˆ°â€œé“â€</h2>
<p>å›é¡¾ã€Šå‰ç«¯å‘æ¶æ„çªå›´ã€‹çš„ç¬¬äºŒç« ï¼Œæˆ‘ä»¬ä»é¢å‘å¯¹è±¡çš„â€œç±»ä¸ç»§æ‰¿â€ï¼Œä¸€è·¯èµ°åˆ°è®¾è®¡åŸåˆ™çš„â€œSOLIDâ€ï¼Œæœ€åè½åœ°åˆ° Flower æ¡†æ¶çš„è®¾è®¡ã€‚</p>
<p>å¦‚æœä½ ä»”ç»†å›å‘³ï¼Œä¼šå‘ç° Flower çš„æ¯ä¸€ä¸ªè®¾è®¡å†³ç­–ï¼Œéƒ½æ˜¯å‰é¢é‚£äº›æ¯ç‡¥åŸåˆ™çš„<strong>æŠ•å½±</strong>ï¼š</p>
<ul>
<li><strong>createSignal</strong> æ˜¯ <strong>å•ä¸€èŒè´£åŸåˆ™</strong> çš„ä½“ç°ã€‚</li>
<li><strong>æ˜¾å¼ä¾èµ–</strong> æ˜¯ <strong>ä¾èµ–å€’ç½®åŸåˆ™</strong> çš„è½åœ°ã€‚</li>
<li><strong>ä¸å¯å˜æ¥å£</strong> æ˜¯ <strong>æ¥å£éš”ç¦»åŸåˆ™</strong> çš„å®è·µã€‚</li>
</ul>
<p>æ¶æ„è®¾è®¡å¹¶ä¸æ˜¯åœ¨è¿½æ±‚â€œæ›´èªæ˜çš„ç®—æ³•â€æˆ–â€œæ›´çŸ­çš„ä»£ç â€ï¼Œè€Œæ˜¯åœ¨å¤æ‚çš„ä¸šåŠ¡æ´ªæµé¢å‰ï¼Œä½ æ˜¯å¦æ„¿æ„ä¸ºç³»ç»Ÿè®¾ä¸‹<strong>æ¸…æ™°è€Œåšå®š</strong>çš„è¾¹ç•Œã€‚</p>
<p>ååº”å¼ç¼–ç¨‹åªæ˜¯ä¸€ä¸ªåˆ‡å…¥å£ã€‚çœŸæ­£é‡è¦çš„ï¼Œæ˜¯ä½ å¦‚ä½•é¢å¯¹â€œå˜åŒ–â€æœ¬èº«ã€‚</p>
<p>è‡³æ­¤ï¼Œæ¡†æ¶è®¾è®¡ç¯‡ç« æš‚å‘Šä¸€æ®µè½ã€‚ä½†æˆ‘ä»¬çš„çªå›´ä¹‹è·¯æ‰åˆšåˆšå¼€å§‹ã€‚åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†èµ°å‡ºä»£ç çš„å¾®è§‚ä¸–ç•Œï¼Œå»æŒ‘æˆ˜æ›´ä¸ºå®å¤§çš„<strong>å·¥ç¨‹åŒ–ä½“ç³»</strong>ã€‚</p>
<blockquote>
<p><strong>äº’åŠ¨æ€è€ƒï¼š</strong> åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œæ˜¯å¦é‡åˆ°è¿‡â€œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¸ªç»„ä»¶åˆé‡æ–°æ¸²æŸ“äº†â€çš„å´©æºƒæ—¶åˆ»ï¼Ÿå¦‚æœè®©ä½ é‡æ–°è®¾è®¡ï¼Œä½ ä¼šæ›´å€¾å‘äº Vue çš„â€œè‡ªåŠ¨æ”¶é›†â€è¿˜æ˜¯ React çš„â€œæ˜¾å¼ä¾èµ–â€ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ç¬¬ä¸€æ€§åŸç†æ‹†è§£ Agentic Codingï¼šä»ç†è®ºåˆ°å®æ“ï¼ˆä¸‹ï¼‰]]></title>    <link>https://juejin.cn/post/7594627998838865962</link>    <guid>https://juejin.cn/post/7594627998838865962</guid>    <pubDate>2026-01-13T02:16:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594627998838865962" data-draft-id="7594627998838816810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ç¬¬ä¸€æ€§åŸç†æ‹†è§£ Agentic Codingï¼šä»ç†è®ºåˆ°å®æ“ï¼ˆä¸‹ï¼‰"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-01-13T02:16:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ç¬¬ä¸€æ€§åŸç†æ‹†è§£ Agentic Codingï¼šä»ç†è®ºåˆ°å®æ“ï¼ˆä¸‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:16:48.000Z" title="Tue Jan 13 2026 02:16:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3b8f4af1cd8484db0dafadfbe877728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=bI7lp7Wln42iMHLXFGGjl%2BgIe%2F4%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šå°å¤ï¼ŒTRAE æŠ€æœ¯ä¸“å®¶</p>
</blockquote>
<p>åœ¨ Agentic Coding å®è·µä¸­ï¼Œæå‡æ•ˆç‡çš„å…³é”®åœ¨äºä¼˜åŒ–ä¸ AI çš„åä½œæ–¹å¼ï¼Œè€Œéå¯„æœ›äºæ— é™çš„ä¸Šä¸‹æ–‡çª—å£ã€‚æ ¸å¿ƒç­–ç•¥æ˜¯é‡‡ç”¨â€œçŸ­å¯¹è¯ã€ç²¾ç®€ä¸Šä¸‹æ–‡â€çš„æ¨¡å¼ï¼Œå°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºä¸“æ³¨çš„å­å¯¹è¯ï¼Œå¹¶å€ŸåŠ©â€œå¤åˆ©å·¥ç¨‹â€å°† bug ä¿®å¤ã€ä»£ç å®¡æŸ¥ç­‰æ—¥å¸¸ç»éªŒæ²‰æ·€ä¸ºå¯å¤ç”¨çš„é¡¹ç›®çŸ¥è¯†åº“ï¼Œä½¿ç³»ç»Ÿè·å¾—è®°å¿†å¹¶å®ç°æ•ˆç‡çš„æŒç»­å¢é•¿ã€‚æ­¤å¤–ï¼Œæ”¹å–„å¼€å‘è€…ä½“éªŒï¼ˆå¦‚æ¸…æ™°æ–‡æ¡£ã€å¿«é€Ÿæµ‹è¯•ï¼‰å…·æœ‰åŒé‡ä»·å€¼ï¼Œæ—¢èƒ½å¸®åŠ©äººç±»å¼€å‘è€…ï¼Œä¹Ÿèƒ½æ˜¾è‘—æå‡ AI çš„è¡¨ç°ã€‚æœ€ç»ˆï¼Œä¸ AI çš„åä½œåº”è¢«è§†ä¸ºä¸€é—¨éœ€è¦åˆ»æ„ç»ƒä¹ çš„æŠ€èƒ½ï¼Œé€šè¿‡ä¸æ–­å®è·µï¼Œå¼€å‘è€…å¯ä»¥æˆä¸ºé©¾é©­ AI çš„â€œä¸“å®¶å‹é€šæ‰â€ï¼Œåœ¨æ›´å¹¿é˜”çš„é¢†åŸŸåˆ›é€ ä»·å€¼ã€‚</p>
<p>ä¸Šä¸€ç¯‡å¸¦å¤§å®¶äº†è§£äº† LLM çš„ç‰¹æ€§ã€Coding Agent çš„å®ç°åŸç†ä»¥åŠå¸¸è§é—®é¢˜åï¼Œæˆ‘ä»¬æ€»ç»“å‡ºäº†ä¸€äº›æœ€ä½³å®è·µï¼Œå¸®åŠ©å¤§å®¶æ›´é«˜æ•ˆåœ°ä½¿ç”¨è¿™äº›å·¥å…·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4255f38be6345d6a5eae2381a7c6f28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=%2FRLZY4Mb7Nt%2FAUaXaiGNbPgTYxU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>çŸ­å¯¹è¯ä¼˜äºé•¿å¯¹è¯</strong></h2>
<p>è¿™å¯èƒ½æ˜¯æœ€é‡è¦çš„ä¸€æ¡å®è·µï¼š<strong>ä¿æŒå¯¹è¯ç®€çŸ­ã€ä¸“æ³¨ï¼Œæ¯ä¸ªå¯¹è¯åªåšä¸€ä»¶äº‹ã€‚</strong></p>
<p>å¾ˆå¤šäººè®¤ä¸ºæ›´å¤§çš„ä¸Šä¸‹æ–‡çª—å£æ„å‘³ç€æ›´å¼ºçš„èƒ½åŠ›ï¼Œå¯ä»¥æŠŠæ›´å¤šä»»åŠ¡å¡è¿›ä¸€ä¸ªå¯¹è¯é‡Œã€‚ä½†å®é™…æƒ…å†µæ°æ°ç›¸åï¼Œæœ€å¥½çš„å¯¹è¯æ˜¯çŸ­å¯¹è¯ï¼Œå®ƒä»¬åªåšä¸€ä»¶äº‹ï¼Œå¹¶ä¸”åªåŒ…å«å®Œæˆè¿™ä»¶äº‹æ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-1"><strong>ä¸ºä»€ä¹ˆçŸ­å¯¹è¯æ›´å¥½ï¼Ÿ</strong></h3>
<p>å½“ä½ å¾€ä¸Šä¸‹æ–‡é‡Œå¡å¤ªå¤šå†…å®¹æ—¶ï¼ŒAgent çš„è¡¨ç°å°±åƒå–é†‰äº†ä¸€æ ·ï¼šå®ƒä¼šå¼€å§‹çŠ¯é”™ã€è·Œè·Œæ’æ’ã€ç”šè‡³å¼€å§‹å’Œä½ äº‰è®ºï¼Œå¦‚æœä½ ç»§ç»­å–‚å®ƒæ›´å¤š tokenï¼Œå®ƒç”šè‡³ä¼šã€Œåã€å¾—ä½ ä¸€èº«ï¼ˆäº§ç”Ÿå¤§é‡æ— æ„ä¹‰çš„è¾“å‡ºï¼‰æˆ–è€…è¿›å…¥æ­»å¾ªç¯ã€‚</p>
<p>å¯¹è¯è¶Šé•¿ï¼Œä¸Šä¸‹æ–‡çª—å£é‡Œå°±ä¼šç§¯ç´¯è¶Šå¤šä¸å½“å‰ä»»åŠ¡ä¸å¤ªç›¸å…³çš„å†…å®¹ã€‚ä¸ºäº†è®© Agent å‘æŒ¥æœ€ä½³å·¥å†µï¼Œä½ éœ€è¦ç»™å®ƒå®Œæˆå½“å‰å·¥ä½œæ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>é•¿å¯¹è¯ä¸ä»…æ•ˆæœå·®ï¼Œè¿˜æ›´è´µã€‚æ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ï¼Œæ•´ä¸ªä¸Šä¸‹æ–‡éƒ½ä¼šè¢«å‘é€ç»™æ¨¡å‹æä¾›å•†ã€‚è¿™æ„å‘³ç€å¯¹è¯è¶Šé•¿ï¼Œæ–°æ¶ˆæ¯çš„æˆæœ¬å°±ä¼šæŒ‡æ•°çº§å¢é•¿ã€‚è€Œä¸”é•¿å¯¹è¯æ›´å®¹æ˜“å› ä¸ºæ¶ˆæ¯é—´éš”æ—¶é—´é•¿è€Œé”™è¿‡ç¼“å­˜çª—å£ï¼Œå¯¼è‡´è´¹ç”¨é£™å‡ã€‚æ‰€ä»¥ï¼Œé•¿å¯¹è¯æ—¢æ•ˆæœå·®ï¼ŒåˆèŠ±è´¹é«˜ï¼Œå°¤å…¶åœ¨ä»¥ tokens æ¶ˆè€—è®¡è´¹çš„å¥—é¤ä¸‹é¢ã€‚</p>
<p>æ‹†åˆ†å¯¹è¯ï¼Œæœ¬è´¨ä¸Šæ˜¯æ‹†åˆ†ä»»åŠ¡ï¼Œå¤§ä»»åŠ¡åº”è¯¥è¢«åˆ†è§£ä¸ºå°ä»»åŠ¡ã€‚è¿™åœ¨ Agent æ—¶ä»£ä¹‹å‰å°±æ˜¯è½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µï¼Œç°åœ¨çœ‹ä¹Ÿä¾ç„¶å¦‚æ­¤ï¼ŒçŸ­å¯¹è¯è®©ä»»åŠ¡æ‹†åˆ†è¿™ä»¶äº‹å˜å¾—è‡ªç„¶ç”šè‡³æœ‰è¶£ã€‚å°±åƒå°ä»»åŠ¡æ›´å®¹æ˜“ç®¡ç†ä¸€æ ·ï¼Œå°å¯¹è¯ä¹Ÿæ›´å®¹æ˜“è¿½è¸ªï¼šæ¯ä¸ªå¯¹è¯éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡ï¼Œä½ å¯ä»¥è½»æ¾æŒæ¡æ•´ä½“è¿›åº¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/963b0b215926462cb3c74ccfee7b1454~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=YXJLbu9iCgKpwVUHFukgBRhFYS4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>ä»¥å¯¹è¯ä¸ºå•ä½ç»„ç»‡å·¥ä½œ</strong></h2>
<p>å¦‚æœæŠŠå¯¹è¯è§†ä¸ºä»»åŠ¡çš„åŸºæœ¬å•ä½ï¼Œé‚£ä¹ˆä¸€ä¸ªåŠŸèƒ½æˆ– bug ä¿®å¤å°±è‡ªç„¶å˜æˆäº†ä¸€ç»„ç›¸äº’å…³è”çš„å¯¹è¯ã€‚</p>
<h3 data-id="heading-3"><strong>ä¸€ä¸ªå…¸å‹çš„å·¥ä½œæµç¨‹</strong></h3>
<p>å‡è®¾ä½ è¦å®ç°ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå¯ä»¥è¿™æ ·ç»„ç»‡å¯¹è¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">åŠŸèƒ½ï¼šç”¨æˆ·ç™»å½•åçš„ä¼šè¯ç®¡ç†

<span class="hljs-selector-attr">[å¯¹è¯ 1]</span> è°ƒç ”ç°æœ‰ä»£ç ç»“æ„
    â”œâ”€â”€ äº†è§£ auth æ¨¡å—çš„å®ç°
    â”œâ”€â”€ æŸ¥çœ‹ session ç®¡ç†çš„ç°çŠ¶
    â””â”€â”€ è¾“å‡ºï¼šå…³é”®æ–‡ä»¶åˆ—è¡¨å’Œå½“å‰æ¶æ„ç†è§£

<span class="hljs-selector-attr">[å¯¹è¯ 2]</span> å®ç°åŸºç¡€åŠŸèƒ½
    â”œâ”€â”€ å‚è€ƒå¯¹è¯ <span class="hljs-number">1</span> çš„å‘ç°
    â”œâ”€â”€ å®ç°æ ¸å¿ƒçš„ session ä¿å­˜é€»è¾‘
    â””â”€â”€ è¾“å‡ºï¼šåŸºç¡€å®ç°ä»£ç 

<span class="hljs-selector-attr">[å¯¹è¯ 3]</span> æ·»åŠ é”™è¯¯å¤„ç†
    â”œâ”€â”€ å‚è€ƒå¯¹è¯ <span class="hljs-number">2</span> çš„å®ç°
    â””â”€â”€ å¢åŠ è¾¹ç•Œæƒ…å†µå¤„ç†

<span class="hljs-selector-attr">[å¯¹è¯ 4]</span> ç¼–å†™æµ‹è¯•
    â”œâ”€â”€ å‚è€ƒå¯¹è¯ <span class="hljs-number">2</span>ã€<span class="hljs-number">3</span> çš„å®ç°
    â””â”€â”€ æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

<span class="hljs-selector-attr">[å¯¹è¯ 5]</span> ä»£ç å®¡æŸ¥
    â”œâ”€â”€ æ£€æŸ¥å®ç°æ˜¯å¦ç¬¦åˆé¡¹ç›®è§„èŒƒ
    â””â”€â”€ ç¡®è®¤æ²¡æœ‰å¼•å…¥å®‰å…¨é—®é¢˜

<span class="hljs-selector-attr">[å¯¹è¯ 6]</span> æ¸…ç†å’Œé‡æ„
    â””â”€â”€ æ ¹æ®å®¡æŸ¥ç»“æœè¿›è¡Œè°ƒæ•´
</code></pre>
<p>æ¯ä¸ªå¯¹è¯éƒ½å¾ˆçŸ­ï¼Œåªä¸“æ³¨äºä¸€ä»¶äº‹ã€‚å®ƒä»¬åŠ åœ¨ä¸€èµ·ï¼Œå®Œæˆäº†æ•´ä¸ªåŠŸèƒ½çš„å¼€å‘ã€‚</p>
<p><strong>é‚£å¯¹è¯ä¹‹é—´å¦‚ä½•å…±äº«ä¸Šä¸‹æ–‡ï¼Ÿ</strong></p>
<p>å½“ä½ å¼€å§‹ä¸€ä¸ªæ–°å¯¹è¯æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼ é€’å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>
<p><strong>å¼•ç”¨ä¹‹å‰å¯¹è¯çš„ç»“è®ºï¼š</strong> åœ¨æ–°å¯¹è¯å¼€å¤´ç®€è¦è¯´æ˜ä¹‹å‰çš„å‘ç°æˆ–å†³ç­–</p>
</li>
<li>
<p><strong>åˆ©ç”¨ Git çŠ¶æ€ï¼š</strong> è®© Agent æŸ¥çœ‹ <em><strong>git diff</strong></em> æˆ–æ£€æŸ¥æœ€è¿‘çš„æäº¤</p>
</li>
<li>
<p><strong>ä½¿ç”¨é¡¹ç›®æ–‡æ¡£ï¼š</strong> å°†é‡è¦å†³ç­–è®°å½•åœ¨ <em><strong>AGENTS.md</strong></em> æˆ–ç±»ä¼¼æ–‡ä»¶ä¸­ï¼ŒAgent æ¯æ¬¡éƒ½èƒ½è¯»å–</p>
</li>
<li>
<p><strong>ç›´æ¥æåŠç›¸å…³æ–‡ä»¶ï¼š</strong> åœ¨æ–°å¯¹è¯ä¸­ <em><strong>#mention</strong></em> éœ€è¦çš„æ–‡ä»¶</p>
</li>
</ul>
<p>å…³é”®æ˜¯ï¼š<strong>ä¸è¦è¯•å›¾åœ¨ä¸€ä¸ªå¯¹è¯é‡Œå®Œæˆæ‰€æœ‰äº‹æƒ…ã€‚</strong> æ¯å½“ä½ å‘ç°å½“å‰ä»»åŠ¡å·²ç»å®Œæˆï¼Œæˆ–è€…å¯¹è¯å¼€å§‹å˜å¾—æ··ä¹±ï¼Œå°±åº”è¯¥å¼€å§‹ä¸€ä¸ªæ–°å¯¹è¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86aadd70acf7407e8c66198fc556832d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=JOa%2F2bfXOZfzBAdiyZ0SlOa2Q9k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>ç¼–å†™æœ‰æ•ˆçš„é¡¹ç›®é…ç½®æ–‡ä»¶</strong></h2>
<p>å¤§å¤šæ•° Coding Agent éƒ½æ”¯æŒåœ¨é¡¹ç›®æ ¹ç›®å½•æ”¾ç½®é…ç½®æ–‡ä»¶ï¼ˆæ¯”å¦‚ Rules æˆ–è€… Agent.mdï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼š<strong>è‡ªåŠ¨æ³¨å…¥åˆ°æ¯ä¸€ä¸ªå¯¹è¯</strong>ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä½ å½±å“ Agent è¡Œä¸ºçš„æ æ†æ”¯ç‚¹ï¼Œä½†è¿™æŠŠåŒåˆƒå‰‘ä¹Ÿå¾ˆå®¹æ˜“ç”¨é”™ã€‚</p>
<h3 data-id="heading-5"><strong>ç†è§£ Agent çš„æ— çŠ¶æ€æœ¬è´¨</strong></h3>
<p>LLM æ˜¯æ— çŠ¶æ€å‡½æ•°ã€‚å®ƒçš„æƒé‡åœ¨æ¨ç†æ—¶æ˜¯å†»ç»“çš„ï¼Œä¸ä¼šéšç€ä½¿ç”¨è€Œå­¦ä¹ ï¼ŒAgent å¯¹ä½ ä»£ç åº“çš„å…¨éƒ¨äº†è§£ï¼Œå®Œå…¨æ¥è‡ªäºä½ æ”¾è¿›ä¸Šä¸‹æ–‡çª—å£çš„ tokenï¼Œè¿™æœ‰ä¸‰ä¸ªé‡è¦å«ä¹‰ï¼š</p>
<p><strong>1.</strong> æ¯æ¬¡æ–°å¯¹è¯å¼€å§‹æ—¶ï¼ŒAgent å¯¹ä½ çš„ä»£ç åº“ä¸€æ— æ‰€çŸ¥</p>
<p><strong>2.</strong> ä»»ä½•é‡è¦çš„é¡¹ç›®ä¿¡æ¯éƒ½éœ€è¦åœ¨æ¯æ¬¡ä¼šè¯ä¸­å‘Šè¯‰å®ƒ</p>
<p><strong>3.</strong> é¡¹ç›®é…ç½®æ–‡ä»¶æ˜¯å®ç°è¿™ä¸€ç‚¹çš„é¦–é€‰æ–¹å¼</p>
<p>å› æ­¤ï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªæ–‡ä»¶è§†ä¸º<strong>æ¯æ¬¡ä¼šè¯çš„å…¥èŒåŸ¹è®­æ–‡æ¡£ã€‚</strong></p>
<h3 data-id="heading-6"><strong>é…ç½®æ–‡ä»¶åº”è¯¥åŒ…å«ä»€ä¹ˆ</strong></h3>
<p>ä¸€ä¸ªå¥½çš„é¡¹ç›®é…ç½®æ–‡ä»¶åº”è¯¥å›ç­”ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>WHATï¼ˆæ˜¯ä»€ä¹ˆï¼‰ï¼š</strong> æŠ€æœ¯æ ˆã€é¡¹ç›®ç»“æ„ã€å„æ¨¡å—çš„èŒè´£ã€‚è¿™åœ¨ monorepo ä¸­å°¤å…¶é‡è¦ï¼Œåº”è¯¥å‘Šè¯‰ Agent æœ‰å“ªäº›åº”ç”¨ã€å“ªäº›å…±äº«æ¨¡å—ã€æ¯ä¸ªéƒ¨åˆ†æ˜¯åšä»€ä¹ˆçš„</p>
</li>
<li>
<p><strong>WHYï¼ˆä¸ºä»€ä¹ˆï¼‰ï¼š</strong> é¡¹ç›®çš„ç›®çš„ã€è®¾è®¡å†³ç­–çš„èƒŒæ™¯ã€‚ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ¶æ„ï¼Ÿä¸ºä»€ä¹ˆæœ‰äº›ä»£ç çœ‹èµ·æ¥ä¸åˆç†ï¼ˆæ¯”å¦‚å†å²å€ºåŠ¡ï¼‰ï¼Ÿ</p>
</li>
<li>
<p><strong>HOWï¼ˆæ€ä¹ˆåšï¼‰ï¼š</strong> å¦‚ä½•è¿è¡Œé¡¹ç›®ã€å¦‚ä½•æµ‹è¯•ã€å¦‚ä½•éªŒè¯æ”¹åŠ¨ã€‚ç”¨ bun è¿˜æ˜¯ npmï¼Ÿæµ‹è¯•å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</li>
</ul>
<h3 data-id="heading-7"><strong>å°‘å³æ˜¯å¤š</strong></h3>
<p><strong>è¿™æ˜¯æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼šè¯•å›¾æŠŠæ‰€æœ‰å¯èƒ½éœ€è¦çš„ä¿¡æ¯éƒ½å¡è¿›é…ç½®æ–‡ä»¶ã€‚</strong></p>
<p>ç ”ç©¶è¡¨æ˜ï¼Œå‰æ²¿çš„æ€è€ƒæ¨¡å‹å¤§çº¦èƒ½å¯é åœ°éµå¾ª 150-200 æ¡æŒ‡ä»¤ï¼Œè€Œ Coding Agent çš„ç³»ç»Ÿæç¤ºæœ¬èº«å¯èƒ½å·²ç»åŒ…å«äº†çº¦ 50 æ¡æŒ‡ä»¤ã€‚è¿™æ„å‘³ç€ä½ çš„é…ç½®æ–‡ä»¶åº”è¯¥<strong>å°½å¯èƒ½ç²¾ç®€</strong>ï¼Œç†æƒ³æƒ…å†µä¸‹åªåŒ…å«é‚£äº›å¯¹æ‰€æœ‰ä»»åŠ¡éƒ½æ™®éé€‚ç”¨çš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä¸å¥½çš„åšæ³•ï¼šå¡æ»¡å„ç§å¯èƒ½ç”¨åˆ°çš„ä¿¡æ¯</span>
<span class="hljs-section">## æ•°æ®åº“ Schema è®¾è®¡è§„èŒƒ</span>
ï¼ˆ500 è¡Œè¯¦ç»†è§„èŒƒ...ï¼‰

<span class="hljs-section">## API è®¾è®¡æŒ‡å—</span>
ï¼ˆ300 è¡Œè§„èŒƒ...ï¼‰

<span class="hljs-section">## ä»£ç é£æ ¼æŒ‡å—</span>
ï¼ˆ200 è¡Œè§„èŒƒ...ï¼‰

<span class="hljs-section"># å¥½çš„åšæ³•ï¼šç®€æ´ + æŒ‡å‘è¯¦ç»†æ–‡æ¡£</span>
<span class="hljs-section">## é¡¹ç›®æ¦‚è¿°</span>
è¿™æ˜¯ä¸€ä¸ª Next.js ç”µå•†å¹³å°ï¼Œä½¿ç”¨ PostgreSQL + Prismaã€‚

<span class="hljs-section">## å…³é”®ç›®å½•</span>
<span class="hljs-bullet">-</span> <span class="hljs-code">`apps/web`</span>: å‰ç«¯åº”ç”¨
<span class="hljs-bullet">-</span> <span class="hljs-code">`apps/api`</span>: åç«¯æœåŠ¡
<span class="hljs-bullet">-</span> <span class="hljs-code">`packages/shared`</span>: å…±äº«ç±»å‹å’Œå·¥å…·

<span class="hljs-section">## å¼€å‘å‘½ä»¤</span>
<span class="hljs-bullet">-</span> <span class="hljs-code">`bun dev`</span>: å¯åŠ¨å¼€å‘æœåŠ¡å™¨
<span class="hljs-bullet">-</span> <span class="hljs-code">`bun test`</span>: è¿è¡Œæµ‹è¯•
<span class="hljs-bullet">-</span> <span class="hljs-code">`bun typecheck`</span>: ç±»å‹æ£€æŸ¥

<span class="hljs-section">## è¯¦ç»†æ–‡æ¡£</span>
æ ¹æ®ä»»åŠ¡éœ€è¦ï¼ŒæŸ¥é˜…ä»¥ä¸‹æ–‡æ¡£ï¼š
<span class="hljs-bullet">-</span> æ•°æ®åº“è®¾è®¡ï¼š<span class="hljs-code">`docs/database-schema.md`</span>
<span class="hljs-bullet">-</span> API è§„èŒƒï¼š<span class="hljs-code">`docs/api-guidelines.md`</span>
<span class="hljs-bullet">-</span> ä»£ç é£æ ¼ï¼š<span class="hljs-code">`docs/code-style.md`</span>
</code></pre>
<p>ä¸€ä¸ªç»éªŒæ³•åˆ™ï¼šé…ç½®æ–‡ä»¶åº”è¯¥æ§åˆ¶åœ¨Â <strong>300 è¡Œä»¥å†…</strong>ï¼Œè¶ŠçŸ­è¶Šå¥½ã€‚æœ‰äº›å›¢é˜Ÿçš„é…ç½®æ–‡ä»¶ç”šè‡³ä¸åˆ° 60 è¡Œã€‚</p>
<h3 data-id="heading-8"><strong>æ¸è¿›å¼æŠ«éœ²</strong></h3>
<p>ä¸å…¶åœ¨é…ç½®æ–‡ä»¶ä¸­å¡æ»¡æ‰€æœ‰ä¿¡æ¯ï¼Œä¸å¦‚ä½¿ç”¨<strong>æ¸è¿›å¼æŠ«éœ²</strong>ç­–ç•¥ï¼š</p>
<pre><code class="hljs">agent_docs/
  â”œâ”€â”€ building_the_project.md
  â”œâ”€â”€ running_tests.md
  â”œâ”€â”€ code_conventions.md
  â”œâ”€â”€ service_architecture.md
  â””â”€â”€ database_schema.md
</code></pre>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºè¿™äº›æ–‡æ¡£å¹¶ç®€è¦æè¿°ï¼Œè®© Agent æ ¹æ®å½“å‰ä»»åŠ¡å†³å®šè¯»å–å“ªäº›ã€‚è¿™æ ·ï¼Œåªæœ‰ç›¸å…³çš„ä¿¡æ¯æ‰ä¼šè¿›å…¥ä¸Šä¸‹æ–‡ï¼Œé¿å…ä¸å¿…è¦çš„å¹²æ‰°ã€‚</p>
<p><strong>åå¥½æŒ‡é’ˆè€Œéå‰¯æœ¬ï¼š</strong> ä¸è¦åœ¨æ–‡æ¡£ä¸­å¤åˆ¶ä»£ç ç‰‡æ®µâ€”â€”å®ƒä»¬å¾ˆå¿«ä¼šè¿‡æ—¶ã€‚ä½¿ç”¨ <em><strong>file:line</strong></em> å¼•ç”¨æŒ‡å‘ä»£ç çš„æƒå¨ä½ç½®ã€‚</p>
<h3 data-id="heading-9"><strong>ä¸è¦è®© Agent åš Linter çš„å·¥ä½œ</strong></h3>
<p>å¾ˆå¤šäººå–œæ¬¢åœ¨é…ç½®æ–‡ä»¶ä¸­å†™è¯¦ç»†çš„ä»£ç é£æ ¼æŒ‡å—ï¼Œ<strong>è¿™ä¸æ˜¯ä¸ªå¥½çš„å®è·µã€‚</strong></p>
<p>LLM åšæ ¼å¼æ£€æŸ¥æ—¢æ…¢åˆæ˜‚è´µï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œè¿™äº›æŒ‡å—ä¼šå¢åŠ æŒ‡ä»¤æ•°é‡ï¼Œé™ä½ Agent å¯¹å…¶ä»–æŒ‡ä»¤çš„éµå¾ªèƒ½åŠ›ã€‚</p>
<p>æ›´å¥½çš„åšæ³•ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨çœŸæ­£çš„ linter å’Œ formatterï¼ˆå¦‚ ESLintã€Prettierã€Biomeï¼‰</p>
</li>
<li>
<p>é…ç½®è‡ªåŠ¨ä¿®å¤ï¼Œè®©å·¥å…·å¤„ç†æ ¼å¼é—®é¢˜</p>
</li>
<li>
<p>å¦‚æœ Agent äº§ç”Ÿäº†æ ¼å¼é”™è¯¯ï¼Œè®© linter åœ¨åå¤„ç†é˜¶æ®µä¿®å¤å®ƒ</p>
</li>
</ul>
<p>LLM æ˜¯ä¸Šä¸‹æ–‡å­¦ä¹ è€…ã€‚å¦‚æœä½ çš„ä»£ç åº“éµå¾ªä¸€è‡´çš„é£æ ¼ï¼ŒAgent é€šå¸¸ä¼šè‡ªåŠ¨æ¨¡ä»¿è¿™ç§é£æ ¼ï¼Œä¸éœ€è¦ä½ æ˜ç¡®å‘Šè¯‰å®ƒã€‚</p>
<h3 data-id="heading-10"><strong>è¿™æ˜¯æœ€é«˜æ æ†ç‚¹ï¼Œè¦è®¤çœŸå¯¹å¾…</strong></h3>
<p>ä¸€è¡Œç³Ÿç³•çš„ä»£ç å°±æ˜¯ä¸€è¡Œç³Ÿç³•çš„ä»£ç ï¼Œä¸€ä¸ªç³Ÿç³•çš„æŠ€æœ¯æ–¹æ¡ˆå¯èƒ½äº§ç”Ÿå¾ˆå¤šè¡Œç³Ÿç³•çš„ä»£ç ï¼Œè€Œé…ç½®æ–‡ä»¶ä¸­çš„ä¸€è¡Œç³Ÿç³•çš„æŒ‡ä»¤ä¼šå½±å“<strong>æ¯ä¸€ä¸ªä¼šè¯ã€æ¯ä¸€ä¸ªä»»åŠ¡ã€æ¯ä¸€ä¸ªäº§å‡ºã€‚</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æ æ†æ•ˆåº”ï¼š

é…ç½®æ–‡ä»¶ â†’ å½±å“æ¯ä¸ªä¼šè¯çš„è¡Œä¸º
<span class="hljs-code">    â†“
ç ”ç©¶/è§„åˆ’é˜¶æ®µ â†’ å½±å“å®ç°è®¡åˆ’çš„è´¨é‡
    â†“
å®ç°é˜¶æ®µ â†’ å½±å“æœ€ç»ˆä»£ç çš„è´¨é‡
</span></code></pre>
<p>èŠ±æ—¶é—´ä»”ç»†è€ƒè™‘é…ç½®æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œè¿™æ˜¯ä½ èƒ½åšçš„ ROI æœ€é«˜çš„æŠ•èµ„ä¹‹ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36424c29d81344b49bcb9b928b017303~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=bLw8idLXipzSguxotTrPI6zzWKY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11"><strong>200K Token è¶³å¤Ÿäº†</strong></h2>
<p>å½“å¤§å®¶éƒ½åœ¨è¿½æ±‚æ›´å¤§çš„ä¸Šä¸‹æ–‡çª—å£æ—¶ï¼Œä¸€ä¸ªåç›´è§‰çš„äº‹å®æ˜¯ï¼š200K token å¯¹äºå¤§å¤šæ•°ä»»åŠ¡æ¥è¯´å·²ç»ç»°ç»°æœ‰ä½™äº†ã€‚</p>
<p>å…³é”®ä¸åœ¨äºä½ æœ‰å¤šå¤§çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œè€Œåœ¨äºä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä¸€ä¸ª 200K çš„çª—å£ï¼Œå¦‚æœä½ ç”¨çŸ­å¯¹è¯çš„æ–¹å¼å·¥ä½œï¼Œå¯ä»¥æ”¯æŒä½ å®Œæˆéå¸¸å¤æ‚çš„åŠŸèƒ½ã€‚å› ä¸ºè™½ç„¶æ¯ä¸ªå¯¹è¯åªæœ‰å‡ å K åˆ°ä¸Šç™¾ K ä¸ª tokenï¼Œä½†ä½ å¯ä»¥å¼€å¯ 10 ä¸ªã€20 ä¸ªç”šè‡³æ›´å¤šå¯¹è¯ï¼Œå®ƒä»¬åŠ èµ·æ¥çš„æ€»é‡è¿œè¶…ä»»ä½•å•ä¸€ä¸Šä¸‹æ–‡çª—å£ã€‚è€Œä¸”ï¼Œç”±äºæ¯ä¸ªå¯¹è¯éƒ½æ˜¯ä»ç›¸å¯¹å¹²å‡€çš„çŠ¶æ€å¼€å§‹ï¼ŒAgent çš„è¡¨ç°ä¼šä¸€ç›´ä¿æŒåœ¨æœ€ä½³æ°´å¹³ï¼Œè€Œä¸æ˜¯éšç€ä¸Šä¸‹æ–‡è†¨èƒ€è€Œé€æ¸é€€åŒ–ã€‚</p>
<p><strong>å®è·µå»ºè®®</strong></p>
<ul>
<li>
<p>å½“å¯¹è¯è¶…è¿‡ 80K-100K token æ—¶ï¼Œè€ƒè™‘å¼€å§‹æ–°å¯¹è¯</p>
</li>
<li>
<p>å®Œæˆä¸€ä¸ªç‹¬ç«‹çš„å­ä»»åŠ¡åï¼Œå¼€å§‹æ–°å¯¹è¯å¤„ç†ä¸‹ä¸€ä¸ªä»»åŠ¡</p>
</li>
<li>
<p>å¦‚æœ Agent å¼€å§‹è¡¨ç°å‡ºã€Œé†‰é…’ã€ç—‡çŠ¶ï¼ˆé‡å¤ã€é—å¿˜ã€åç¦»ç›®æ ‡ï¼‰ï¼Œç«‹å³å¼€å§‹æ–°å¯¹è¯</p>
</li>
<li>
<p>æŠŠã€Œå¼€å§‹æ–°å¯¹è¯ã€è§†ä¸ºæ­£å¸¸å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ã€Œå¤±è´¥åçš„é‡è¯•ã€</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d868b8e3ffe24d7ba9de7433a9c199f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=tCdIej6o3T2UmQkIDTwxFBslP4E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12"><strong>Compounding Engineeringï¼šè®©ç³»ç»Ÿè‡ªæˆ‘æ”¹è¿›</strong></h2>
<p>ä¼ ç»Ÿçš„ AI ç¼–ç¨‹æ˜¯å…³äºçŸ­æœŸæ”¶ç›Šçš„ï¼šä½ ç»™ promptï¼Œå®ƒå†™ä»£ç ï¼Œç„¶åå‘å¸ƒï¼Œç„¶åä»å¤´å¼€å§‹ã€‚Every.to æå‡ºçš„Â <strong>Compounding Engineeringï¼ˆå¤åˆ©å·¥ç¨‹ï¼‰</strong> åˆ™æ˜¯å…³äºæ„å»ºå…·æœ‰è®°å¿†çš„ç³»ç»Ÿï¼šæ¯ä¸ª PR éƒ½åœ¨æ•™è‚²ç³»ç»Ÿï¼Œæ¯ä¸ª bug éƒ½æˆä¸ºæ°¸ä¹…çš„æ•™è®­ï¼Œæ¯æ¬¡ä»£ç å®¡æŸ¥éƒ½åœ¨æ›´æ–° Agent çš„é»˜è®¤è¡Œä¸ºã€‚æ™®é€š AI å·¥ç¨‹è®©ä½ ä»Šå¤©æ›´é«˜æ•ˆï¼ŒCompounding Engineering è®©ä½ ä¹‹åçš„æ¯ä¸€å¤©éƒ½æ›´é«˜æ•ˆã€‚</p>
<h3 data-id="heading-13"><strong>æ ¸å¿ƒç†å¿µï¼šä½ ä¸åªæ˜¯åœ¨è§£å†³é—®é¢˜ï¼Œè€Œæ˜¯åœ¨æ•™è‚²ç³»ç»Ÿ</strong></h3>
<p>å½“ä½ ä½¿ç”¨ Coding Agent æ—¶ï¼Œé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘æ˜¯åœ¨è§£å†³ä»Šå¤©çš„é—®é¢˜ï¼Œè¿˜æ˜¯åœ¨æ•™ç³»ç»Ÿï¼Ÿ</p>
<ul>
<li>
<p>æ¯æ¬¡ä¿®å¤ bug æ—¶ï¼Œå¦‚æœä¸èƒ½é˜²æ­¢åŒç±»é—®é¢˜å†æ¬¡å‘ç”Ÿï¼Œå°±åªå®Œæˆäº†ä¸€åŠ</p>
</li>
<li>
<p>æ¯æ¬¡ä»£ç å®¡æŸ¥å¦‚æœä¸èƒ½æå–å‡ºå¯å¤ç”¨çš„æ•™è®­ï¼Œå°±æ˜¯æµªè´¹æ—¶é—´</p>
</li>
<li>
<p>æ¯æ¬¡æˆåŠŸçš„å·¥ä½œæµç¨‹å¦‚æœä¸èƒ½è¢«è®°å½•å’Œå¤ç”¨ï¼Œå°±ä¼šéšç€ä¼šè¯ç»“æŸè€Œæ¶ˆå¤±</p>
</li>
</ul>
<h3 data-id="heading-14"><strong>å¦‚ä½•å®è·µ Compounding Engineering</strong></h3>
<h4 data-id="heading-15"><strong>1. å°†ç»éªŒæ²‰æ·€åˆ°é¡¹ç›®æ–‡æ¡£</strong></h4>
<p>å¤§å¤šæ•° Coding Agent éƒ½æ”¯æŒè¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç‰¹å®šæ–‡ä»¶ï¼Œè¿™æ˜¯ä½ æŒ‡å¯¼ç³»ç»Ÿçš„ä¸»è¦é€”å¾„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># AGENTS.md</span>

<span class="hljs-section">## ä»£ç é£æ ¼</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ async/await è€Œé Promise.then()
<span class="hljs-bullet">-</span> é”™è¯¯å¤„ç†å¿…é¡»åŒ…å«å…·ä½“çš„é”™è¯¯ç±»å‹
<span class="hljs-bullet">-</span> å˜é‡å‘½åéµå¾ª PR #234 ç¡®ç«‹çš„æ¨¡å¼

<span class="hljs-section">## å·²çŸ¥é™·é˜±</span>
<span class="hljs-bullet">-</span> session æ¨¡å—çš„ save() æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œå¿…é¡» await
<span class="hljs-bullet">-</span> ä¸è¦åœ¨å¾ªç¯ä¸­è°ƒç”¨ APIï¼Œä½¿ç”¨æ‰¹é‡æ¥å£

<span class="hljs-section">## æˆåŠŸæ¨¡å¼</span>
<span class="hljs-bullet">-</span> æ–°å¢ API ç«¯ç‚¹æ—¶ï¼Œå‚è€ƒ PR #241 çš„é”™è¯¯å¤„ç†æ–¹å¼
<span class="hljs-bullet">-</span> æµ‹è¯•è¦†ç›–ç‡è¦æ±‚å‚è€ƒ PR #219 çš„åé¦ˆ
</code></pre>
<p>æ¯æ¬¡ä½ å‘ç°ä¸€ä¸ªé‡å¤å‡ºç°çš„é—®é¢˜æˆ–ä¸€ä¸ªæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå°±æŠŠå®ƒåŠ å…¥è¿™ä¸ªæ–‡ä»¶ã€‚Agent åœ¨æ¯æ¬¡å¯¹è¯å¼€å§‹æ—¶éƒ½ä¼šè¯»å–å®ƒï¼Œè‡ªåŠ¨åº”ç”¨è¿™äº›ç»éªŒã€‚</p>
<h4 data-id="heading-16"><strong>2. è®© bug ä¿®å¤äº§ç”Ÿé•¿æœŸä»·å€¼</strong></h4>
<p>å½“ä½ ä¿®å¤ä¸€ä¸ª bug æ—¶ï¼Œä¸è¦åªæ˜¯æ”¹ä»£ç ã€‚é—®è‡ªå·±ï¼š</p>
<ul>
<li>
<p>è¿™ç±»é—®é¢˜èƒ½å¦é€šè¿‡æ·»åŠ  lint è§„åˆ™æ¥é¢„é˜²ï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦åº”è¯¥åœ¨ Rules æˆ–è€…Â <em><strong>AGENTS.md</strong></em> ä¸­è®°å½•è¿™ä¸ªé™·é˜±ï¼Ÿ</p>
</li>
<li>
<p>èƒ½å¦ç¼–å†™ä¸€ä¸ªæµ‹è¯•æ¥é˜²æ­¢å›å½’ï¼Ÿ</p>
</li>
<li>
<p>ä»£ç å®¡æŸ¥æ¸…å•æ˜¯å¦éœ€è¦æ›´æ–°ï¼Ÿ</p>
</li>
</ul>
<p>ä¸€ä¸ªçœŸæ­£çš„ bug ä¿®å¤åº”è¯¥è®©åŒç±»é—®é¢˜å†ä¹Ÿä¸ä¼šå‘ç”Ÿã€‚</p>
<h4 data-id="heading-17"><strong>3. ä»ä»£ç å®¡æŸ¥ä¸­æå–æ¨¡å¼</strong></h4>
<p>æ¯æ¬¡ä½ åœ¨å®¡æŸ¥ä¸­æŒ‡å‡ºé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p>
<ul>
<li>
<p>è¿™ä¸ªåé¦ˆæ˜¯å¦é€‚ç”¨äºæœªæ¥çš„ç±»ä¼¼ä»£ç ï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦åº”è¯¥æˆä¸ºé¡¹ç›®çš„ç¼–ç è§„èŒƒï¼Ÿ</p>
</li>
<li>
<p>Agent èƒ½å¦åœ¨ä¸‹æ¬¡è‡ªåŠ¨åº”ç”¨è¿™ä¸ªæ”¹è¿›ï¼Ÿ</p>
</li>
</ul>
<p>å¦‚æœç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå°±æŠŠå®ƒè®°å½•ä¸‹æ¥ã€‚è®©ä½ çš„å®¡æŸ¥æ„è§æˆä¸ºç³»ç»Ÿçš„æ°¸ä¹…çŸ¥è¯†ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„å¯¹è¯ã€‚</p>
<h4 data-id="heading-18"><strong>4. å»ºç«‹å¯å¤ç”¨çš„å·¥ä½œæµç¨‹</strong></h4>
<p>å½“ä½ æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„å·¥ä½œæ¨¡å¼æ—¶ï¼ŒæŠŠå®ƒè¿›è¡Œæ²‰æ·€ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## å·¥ä½œæµç¨‹ï¼šæ·»åŠ æ–°çš„ API endpoint</span>

<span class="hljs-bullet">1.</span> å…ˆç¼–å†™æ¥å£æµ‹è¯•ï¼ˆå‚è€ƒ tests/api/example.test.tsï¼‰
<span class="hljs-bullet">2.</span> å®ç°ç«¯ç‚¹ï¼Œéµå¾ª src/api/users.ts çš„æ¨¡å¼
<span class="hljs-bullet">3.</span> æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä½¿ç”¨ AppError ç±»
<span class="hljs-bullet">4.</span> æ›´æ–° API æ–‡æ¡£
<span class="hljs-bullet">5.</span> è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶éªŒè¯
</code></pre>
<p>ä¸‹æ¬¡ä½ æˆ– Agent éœ€è¦åšç±»ä¼¼çš„ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ç›´æ¥è¯´ã€ŒæŒ‰ç…§æ·»åŠ æ–° API endpoint çš„å·¥ä½œæµç¨‹æ¥åšã€ï¼Œç³»ç»Ÿå·²ç»çŸ¥é“è¯¥æ€ä¹ˆåšäº†ã€‚</p>
<h3 data-id="heading-19"><strong>å¤åˆ©æ•ˆåº”</strong></h3>
<p>Compounding Engineering çš„é­”åŠ›åœ¨äºç´¯ç§¯æ•ˆåº”ã€‚ç¬¬ä¸€å‘¨ï¼Œä½ å¯èƒ½åªæ˜¯è®°å½•äº†å‡ æ¡ç¼–ç è§„èŒƒã€‚ç¬¬ä¸€ä¸ªæœˆï¼Œä½ æœ‰äº†ä¸€å¥—å®Œæ•´çš„é¡¹ç›®çŸ¥è¯†åº“ã€‚ä¸‰ä¸ªæœˆåï¼ŒAgent å¼€å§‹è‡ªåŠ¨åº”ç”¨ä½ ä»æœªæ˜ç¡®å‘Šè¯‰å®ƒçš„æ¨¡å¼ï¼Œå› ä¸ºå®ƒä»ä¹‹å‰çš„ PRã€bug ä¿®å¤å’Œä»£ç å®¡æŸ¥ä¸­å­¦ä¹ äº†è¿™äº›ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ æ‰“å¼€ä¸€ä¸ª PRï¼Œå‘ç° Agent çš„è¯„è®ºæ˜¯ã€Œæ ¹æ® PR #234 çš„æ¨¡å¼ä¿®æ”¹äº†å˜é‡å‘½åï¼ŒæŒ‰ç…§ PR #219 çš„åé¦ˆç§»é™¤äº†è¿‡åº¦æµ‹è¯•ï¼Œæ·»åŠ äº†ä¸ PR #241 ç±»ä¼¼çš„é”™è¯¯å¤„ç†ã€ã€‚å®ƒå­¦ä¼šäº†ä½ çš„å“å‘³ï¼Œå°±åƒä¸€ä¸ªèªæ˜çš„åŒäº‹ï¼Œè€Œä¸”è¿˜æœ‰è®°å½•å¯æŸ¥ã€‚è¿™å°±æ˜¯å¤åˆ©ï¼Œæ¯æ¬¡ä¿®å¤ã€æ¯æ¬¡å®¡æŸ¥ã€æ¯æ¬¡æ•™è®­éƒ½åœ¨ä¸ºæœªæ¥æŠ•èµ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7abf25779c9b40428933b479343abff8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=w0T4s9MO18b1ow2ViHYVPYkrGM0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-20"><strong>å¯¹äººéš¾çš„äº‹ï¼Œå¯¹ AI ä¹Ÿéš¾</strong></h2>
<p>æœ‰ä¸€ä¸ªç®€å•ä½†å¸¸è¢«å¿½è§†çš„äº‹å®ï¼š<strong>å¦‚æœä¸€ä¸ªä»»åŠ¡å¯¹äººç±»å¼€å‘è€…æ¥è¯´å¾ˆéš¾ï¼Œé‚£ä¹ˆå®ƒå¯¹å½“å‰çš„ AI æ¥è¯´å¤§æ¦‚ç‡ä¹Ÿå¾ˆéš¾ã€‚</strong></p>
<p>è¿™å¬èµ·æ¥æ˜¾è€Œæ˜“è§ï¼Œä½†å®ƒçš„æ¨è®ºå´å¾ˆæ·±è¿œï¼šæ‰€æœ‰é‚£äº›èƒ½æå‡äººç±»å¼€å‘è€…ä½“éªŒçš„å·¥ä½œï¼Œå¯¹ AI åŒæ ·æœ‰ä»·å€¼ã€‚æ›´å¥½çš„æ–‡æ¡£ã€æ›´æ¸…æ™°çš„æ¶æ„ã€æ›´å¿«çš„åé¦ˆå¾ªç¯ï¼Œè¿™äº›ã€Œè€ç”Ÿå¸¸è°ˆã€çš„å·¥ç¨‹å®è·µï¼Œåœ¨ AI æ—¶ä»£ä¸ä»…æ²¡æœ‰è¿‡æ—¶ï¼Œåè€Œå˜å¾—æ›´åŠ é‡è¦ã€‚</p>
<h3 data-id="heading-21"><strong>ä¸ºä»€ä¹ˆ AI é¢ä¸´å’Œäººç±»ç›¸ä¼¼çš„æŒ‘æˆ˜ï¼Ÿ</strong></h3>
<p>å›æƒ³ä¸€ä¸‹ LLM çš„å·¥ä½œåŸç†ï¼šå®ƒé€šè¿‡é˜…è¯»ä¸Šä¸‹æ–‡æ¥ç†è§£ä»»åŠ¡ï¼Œç„¶åç”Ÿæˆå“åº”ã€‚è¿™ä¸ªè¿‡ç¨‹å’Œäººç±»å¼€å‘è€…é˜…è¯»ä»£ç ã€ç†è§£éœ€æ±‚ã€ç¼–å†™è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹æƒŠäººåœ°ç›¸ä¼¼ã€‚</p>
<ul>
<li>
<p>å½“æ–‡æ¡£ç¼ºå¤±æˆ–è¿‡æ—¶æ—¶ï¼Œäººç±»éœ€è¦èŠ±å¤§é‡æ—¶é—´é˜…è¯»æºç çŒœæµ‹æ„å›¾ã€‚AI ä¹Ÿä¸€æ ·ï¼Œå®ƒä¼šåœ¨ä»£ç åº“ä¸­åå¤æœç´¢ï¼Œæ¶ˆè€—å¤§é‡ä¸Šä¸‹æ–‡ç©ºé—´ï¼Œæœ€ç»ˆå¯èƒ½è¿˜æ˜¯ç†è§£é”™è¯¯ã€‚</p>
</li>
<li>
<p>å½“æ¶æ„æ··ä¹±ã€æ¨¡å—è¾¹ç•Œä¸æ¸…æ—¶ï¼Œäººç±»å¾ˆéš¾çŸ¥é“è¯¥æ”¹å“ªé‡Œã€‚AI ä¹Ÿä¼šè¿·å¤±ï¼Œå®ƒå¯èƒ½æ”¹äº†é”™è¯¯çš„æ–‡ä»¶ï¼Œæˆ–è€…é—æ¼äº†éœ€è¦åŒæ­¥ä¿®æ”¹çš„åœ°æ–¹ã€‚</p>
</li>
<li>
<p>å½“æµ‹è¯•è¿è¡Œç¼“æ…¢æ—¶ï¼Œäººç±»å€¾å‘äºè·³è¿‡æµ‹è¯•ã€‚AI ä¹Ÿé¢ä¸´åŒæ ·çš„å‹åŠ›ï¼Œé•¿æ—¶é—´çš„ç­‰å¾…ä¼šæ¶ˆè€—å¯¹è¯çš„ã€Œè€å¿ƒã€å’Œä¸Šä¸‹æ–‡ç©ºé—´ã€‚</p>
</li>
</ul>
<h3 data-id="heading-22"><strong>å€¼å¾—æŠ•èµ„çš„å¼€å‘è€…ä½“éªŒ</strong></h3>
<p>æ—¢ç„¶ AI å’Œäººç±»é¢ä¸´ç›¸ä¼¼çš„æŒ‘æˆ˜ï¼Œé‚£ä¹ˆä»¥ä¸‹è¿™äº›ä¼ ç»Ÿçš„ã€Œå¼€å‘è€…ä½“éªŒã€ä¼˜åŒ–å°±å…·æœ‰äº†åŒé‡ä»·å€¼ï¼š</p>
<h4 data-id="heading-23"><strong>æ›´å¥½çš„æ–‡æ¡£</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å¥½çš„æ–‡æ¡£å¯¹ AI çš„ä»·å€¼</span>

<span class="hljs-section">## ä¹‹å‰ï¼ˆæ— æ–‡æ¡£ï¼‰</span>
Agent éœ€è¦ï¼š
<span class="hljs-bullet">1.</span> è¯»å– 5-10 ä¸ªç›¸å…³æ–‡ä»¶
<span class="hljs-bullet">2.</span> çŒœæµ‹æ¨¡å—çš„èŒè´£å’Œè¾¹ç•Œ
<span class="hljs-bullet">3.</span> æ¨æ–­ API çš„ä½¿ç”¨æ–¹å¼
<span class="hljs-bullet">4.</span> å¯èƒ½è¿˜ä¼šçŒœé”™

æ¶ˆè€—ï¼šå¤§é‡ä¸Šä¸‹æ–‡ + é«˜é”™è¯¯ç‡

<span class="hljs-section">## ä¹‹åï¼ˆæœ‰æ–‡æ¡£ï¼‰</span>
Agent åªéœ€è¦ï¼š
<span class="hljs-bullet">1.</span> è¯»å– README æˆ– API æ–‡æ¡£
<span class="hljs-bullet">2.</span> ç›´æ¥äº†è§£æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼

æ¶ˆè€—ï¼šå°‘é‡ä¸Šä¸‹æ–‡ + é«˜å‡†ç¡®ç‡
</code></pre>
<p>å¥½çš„æ–‡æ¡£ä¸ä»…å¸®åŠ©æ–°äººä¸Šæ‰‹ï¼Œä¹Ÿå¸®åŠ© AI å¿«é€Ÿå»ºç«‹æ­£ç¡®çš„å¿ƒæ™ºæ¨¡å‹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>
<p><strong>æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰ï¼š</strong> è§£é‡Šã€Œä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ã€ï¼Œé¿å… AI åšå‡ºè¿èƒŒè®¾è®¡æ„å›¾çš„ä¿®æ”¹</p>
</li>
<li>
<p><strong>API ä½¿ç”¨ç¤ºä¾‹ï¼š</strong> æ¯”çº¯ç²¹çš„ç±»å‹å®šä¹‰æ›´æœ‰æ•ˆ</p>
</li>
<li>
<p><strong>å·²çŸ¥é™·é˜±å’Œå¸¸è§é”™è¯¯</strong>ï¼šç›´æ¥å‘Šè¯‰ AI ä»€ä¹ˆä¸è¯¥åš</p>
</li>
</ul>
<h4 data-id="heading-24"><strong>æ›´æ¸…æ™°çš„ä»£ç ç»“æ„</strong></h4>
<p>å½“ä½ åœ¨çº ç»“è¦ä¸è¦èŠ±æ—¶é—´é‡æ„ä¸€ä¸ªæ··ä¹±çš„æ¨¡å—æ—¶ï¼Œè€ƒè™‘ä¸€ä¸‹ï¼šè¿™ä¸ªæ··ä¹±ä¸ä»…å›°æ‰°ä½ ï¼Œä¹Ÿä¼šå›°æ‰°æ¯ä¸€ä¸ªè¯•å›¾ç†è§£å®ƒçš„ AIã€‚</p>
<ul>
<li>
<p><strong>æ¸…æ™°çš„å‘½åï¼š</strong> <em>processUserData()</em> æ¯” doStuff()å¯¹ AI çš„å¸®åŠ©å’Œå¯¹äººç±»ä¸€æ ·å¤§</p>
</li>
<li>
<p><strong>å•ä¸€èŒè´£ï¼š</strong> ä¸€ä¸ªåšä¸€ä»¶äº‹çš„å‡½æ•°ï¼Œæ¯”ä¸€ä¸ªåšåä»¶äº‹çš„å‡½æ•°æ›´å®¹æ˜“è¢«æ­£ç¡®ä¿®æ”¹</p>
</li>
<li>
<p><strong>æ˜¾å¼ä¾èµ–ï¼š</strong> ä¾èµ–æ³¨å…¥æ¯”å…¨å±€å˜é‡æ›´å®¹æ˜“è¢« AI ç†è§£å’Œæµ‹è¯•</p>
</li>
</ul>
<h4 data-id="heading-25"><strong>æ›´å¿«çš„åé¦ˆå¾ªç¯</strong></h4>
<p>è¿™å¯èƒ½æ˜¯æœ€å®¹æ˜“è¢«ä½ä¼°çš„ä¸€ç‚¹ã€‚Agent Loop çš„æ¯ä¸€è½®éƒ½éœ€è¦ç­‰å¾…å·¥å…·æ‰§è¡Œå®Œæˆï¼Œå¦‚æœï¼š</p>
<ul>
<li>
<p>æµ‹è¯•å¥—ä»¶éœ€è¦ 10 åˆ†é’Ÿæ‰èƒ½è·‘å®Œ â†’ Agent è¦ä¹ˆè·³è¿‡æµ‹è¯•ï¼Œè¦ä¹ˆåœ¨ç­‰å¾…ä¸­æµªè´¹å¤§é‡ä¸Šä¸‹æ–‡</p>
</li>
<li>
<p>æ„å»ºéœ€è¦ 5 åˆ†é’Ÿ â†’ æ¯æ¬¡å°æ”¹åŠ¨çš„éªŒè¯æˆæœ¬éƒ½å¾ˆé«˜</p>
</li>
<li>
<p>éƒ¨ç½²éœ€è¦ 30 åˆ†é’Ÿ â†’ å‡ ä¹ä¸å¯èƒ½è®© AI åšç«¯åˆ°ç«¯çš„éªŒè¯</p>
</li>
</ul>
<p>ç›¸åï¼Œå¦‚æœä½ æœ‰ï¼š</p>
<ul>
<li>
<p>ç§’çº§çš„å•å…ƒæµ‹è¯• â†’ Agent å¯ä»¥é¢‘ç¹éªŒè¯ï¼Œå¿«é€Ÿè¿­ä»£</p>
</li>
<li>
<p>å¿«é€Ÿçš„å¢é‡æ„å»º â†’ æ”¹åŠ¨èƒ½ç«‹å³å¾—åˆ°åé¦ˆ</p>
</li>
<li>
<p>æœ¬åœ°å¯è¿è¡Œçš„ç¯å¢ƒ â†’ ä¸éœ€è¦ç­‰å¾…è¿œç¨‹éƒ¨ç½²</p>
</li>
</ul>
<h3 data-id="heading-26"><strong>å…·ä½“çš„æ”¹è¿›å»ºè®®</strong></h3>
<h4 data-id="heading-27"><strong>1. ä¸º AI ä¼˜åŒ–ä½ çš„æµ‹è¯•</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸å¥½ï¼šè¿è¡Œæ‰€æœ‰æµ‹è¯•éœ€è¦ 10 åˆ†é’Ÿ</span>
npm <span class="hljs-built_in">test</span>

<span class="hljs-comment"># å¥½ï¼šå¯ä»¥åªè¿è¡Œç›¸å…³æµ‹è¯•ï¼Œå‡ ç§’å®Œæˆ</span>
npm <span class="hljs-built_in">test</span> -- --grep <span class="hljs-string">"session"</span>
npm <span class="hljs-built_in">test</span> -- src/auth/__tests__/
</code></pre>
<p>ç¡®ä¿ Agent çŸ¥é“å¦‚ä½•è¿è¡Œå±€éƒ¨æµ‹è¯•ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è·‘å®Œæ•´å¥—ä»¶ã€‚</p>
<h4 data-id="heading-28"><strong>2. æä¾›å¿«é€Ÿçš„å¥åº·æ£€æŸ¥</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå¿«é€ŸéªŒè¯è„šæœ¬</span>
<span class="hljs-comment"># scripts/quick-check.sh</span>

<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Type checking..."</span>
npm run typecheck

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Linting changed files..."</span>
npm run lint -- --changed

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running related tests..."</span>
npm <span class="hljs-built_in">test</span> -- --related
</code></pre>
<p>è®© Agent å¯ä»¥åœ¨å‡ ç§’å†…éªŒè¯åŸºæœ¬çš„æ­£ç¡®æ€§ã€‚</p>
<h4 data-id="heading-29"><strong>3. æ–‡æ¡£æ”¾åœ¨ä»£ç æ—è¾¹</strong></h4>
<pre><code class="hljs language-bash" lang="bash">src/
  auth/
    README.md          <span class="hljs-comment"># è¿™ä¸ªæ¨¡å—æ˜¯åšä»€ä¹ˆçš„</span>
    login.ts
    login.test.ts
    session/
      README.md        <span class="hljs-comment"># session ç®¡ç†çš„è®¾è®¡å†³ç­–</span>
      manager.ts
</code></pre>
<p>å½“ AI æµè§ˆç›®å½•æ—¶ï¼Œå®ƒèƒ½ç«‹å³çœ‹åˆ°ç›¸å…³æ–‡æ¡£ï¼Œè€Œä¸éœ€è¦å»åˆ«çš„åœ°æ–¹æ‰¾ã€‚</p>
<h4 data-id="heading-30"><strong>4. è®©é”™è¯¯ä¿¡æ¯æ›´æœ‰å¸®åŠ©</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½</span>
<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Invalid input"</span>);

<span class="hljs-comment">// å¥½</span>
<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
<span class="hljs-string">`Invalid session token: expected format 'sess_xxx', got '<span class="hljs-subst">${token}</span>'. `</span> +
<span class="hljs-string">`See docs/auth.md for token format specification.`</span>
);
</code></pre>
<p>å¥½çš„é”™è¯¯ä¿¡æ¯å¸®åŠ© AIï¼ˆå’Œäººç±»ï¼‰å¿«é€Ÿå®šä½é—®é¢˜ï¼Œè€Œä¸æ˜¯ç›²ç›®æœç´¢ã€‚</p>
<p><strong>åè¿‡æ¥æœªå¿…æˆç«‹ï¼Œæœ‰æ—¶éœ€è¦ä¸“é—¨ä¸º AI è®¾è®¡</strong></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåè¿‡æ¥çš„æ¨è®ºå¹¶ä¸æ€»æ˜¯æˆç«‹ï¼šå¯¹äººæ¥è¯´ç®€å•çš„äº‹ï¼Œå¯¹ AI æœªå¿…ç®€å•ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p>äººç±»å¯ä»¥è½»æ¾åœ°ã€Œçœ‹ä¸€çœ¼ã€å°±ç†è§£ä¸€ä¸ª UI çš„å¸ƒå±€é—®é¢˜ï¼Œä½† AI éœ€è¦è§£ææ•´ä¸ª DOM ç»“æ„</p>
</li>
<li>
<p>äººç±»å¯ä»¥å‡­ç›´è§‰åˆ¤æ–­ã€Œè¿™ä¸ªæ”¹åŠ¨é£é™©å¾ˆé«˜ã€ï¼Œä½† AI ç¼ºä¹è¿™ç§éšæ€§çŸ¥è¯†</p>
</li>
<li>
<p>äººç±»å¯ä»¥åœ¨é£ä¹¦é‡Œéšå£é—®ä¸€å¥å°±è·å¾—å…³é”®ä¿¡æ¯ï¼Œä½† AI åªèƒ½ä¾èµ–æ–‡æ¡£åŒ–çš„çŸ¥è¯†</p>
</li>
</ul>
<p>æ›´æœ‰è¶£çš„æ˜¯ï¼Œæœ‰æ—¶å€™ä½ éœ€è¦ä¸“é—¨ä¸º AI è®¾è®¡å·¥å…·å’Œæ¥å£ï¼Œå³ä½¿è¿™å¯¹äººç±»æ¥è¯´å¯èƒ½ä¸æ˜¯æœ€è‡ªç„¶çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-31"><strong>LLM éœ€è¦ä¸“é—¨çš„ä¿¡æ¯æ¶æ„</strong></h3>
<p>ç”¨æˆ·ä½“éªŒé¢†åŸŸæœ‰ä¸€ä¸ªæ¦‚å¿µå«ã€Œä¿¡æ¯æ¶æ„ï¼ˆInformation Architectureï¼‰ã€ï¼Œå®ƒå…³æ³¨çš„æ˜¯å¦‚ä½•ç»„ç»‡å’Œå‘ˆç°ä¿¡æ¯ï¼Œä»¥æä¾›æœ€ä½³çš„ç”¨æˆ·ä½“éªŒï¼Œå¥½çš„ä¿¡æ¯æ¶æ„ä½ å¾ˆå°‘ä¼šæ³¨æ„åˆ°ï¼Œä½†ç³Ÿç³•çš„ä¿¡æ¯æ¶æ„ä¼šè®©ä½ æŠ“ç‹‚ã€‚å½“æˆ‘ä»¬è§‚å¯Ÿ Agent ä½¿ç”¨ç°æœ‰å‘½ä»¤è¡Œå·¥å…·æ—¶çš„å›°æƒ‘å’Œè¿·å¤±ï¼Œè¿™å¼ºçƒˆè¡¨æ˜ï¼š<strong>æˆ‘ä»¬ç°æœ‰å·¥å…·çš„ä¿¡æ¯æ¶æ„å¯¹ LLM æ¥è¯´æ˜¯ä¸å¤Ÿçš„ã€‚</strong></p>
<p>LLM æ˜¯åœ¨æˆ‘ä»¬ç°æœ‰çš„ CLI å·¥å…·ä¸Šè®­ç»ƒçš„ï¼Œæ‰€ä»¥å®ƒä»¬çŸ¥é“å¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·ã€‚ä½†è¿™äº›å·¥å…·æ˜¯ä¸ºäººç±»è®¾è®¡çš„ï¼Œå®ƒä»¬çš„è¾“å‡ºæ ¼å¼ã€é”™è¯¯ä¿¡æ¯ã€äº¤äº’æ–¹å¼éƒ½å‡è®¾ç”¨æˆ·æ˜¯äººç±»ã€‚æˆ‘ä»¬éœ€è¦ä¸º Agent å¢å¼ºè¿™äº›å·¥å…·ï¼Œæä¾›å¯¹ LLM æ›´æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ï¼Œç”šè‡³è°ƒæ•´è¾“å‡ºæ ¼å¼ä»¥ä¾¿ Agent æ›´å¥½åœ°æ¶ˆè´¹ã€‚</p>
<h3 data-id="heading-32"><strong>API è®¾è®¡ï¼šåœ¨ä¿¡æ¯é‡å’Œä¸Šä¸‹æ–‡æ¶ˆè€—ä¹‹é—´å–å¾—å¹³è¡¡</strong></h3>
<p>å½“ä½ ä¸º Agent è®¾è®¡å·¥å…·æ¥å£ï¼ˆæ¯”å¦‚ MCP å·¥å…·ï¼‰æ—¶ï¼Œéœ€è¦åœ¨ä¸¤ä¸ªç›®æ ‡ä¹‹é—´å–å¾—å¹³è¡¡ï¼š</p>
<ul>
<li>
<p><strong>æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ï¼š</strong> å‡å°‘ Agent éœ€è¦çš„å·¥å…·è°ƒç”¨æ¬¡æ•°</p>
</li>
<li>
<p><strong>é¿å…å¡«æ»¡ä¸Šä¸‹æ–‡ï¼š</strong> ä¸è¦è¿”å›è¿‡å¤šæ— å…³ä¿¡æ¯</p>
</li>
</ul>
<p>ä¸€ä¸ªå¥½çš„å®è·µæ˜¯ï¼šæä¾›ä¾¿æ·å‡½æ•°å’Œåº•å±‚å‡½æ•°ä¸¤å¥— APIï¼Œå¹¶é€šè¿‡å·¥å…·æè¿°å¼•å¯¼ Agent ä¼˜å…ˆä½¿ç”¨ä¾¿æ·å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@jsonrpc</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_global_variable_at</span>(<span class="hljs-params">address: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
   <span class="hljs-string">"""
   Get the value of a global variable at the specified address.
   Automatically identifies the type and returns the best string 
   representation.
   
   This is the preferred method for reading global variables.
   """</span>
   <span class="hljs-comment"># æ™ºèƒ½çš„ã€é«˜å±‚çš„å®ç°</span>
   ...

<span class="hljs-meta">@jsonrpc</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">data_read_byte</span>(<span class="hljs-params">address: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:
   <span class="hljs-string">"""
   Read the 1 byte value at the specified address.
   
   Only use this function if `get_global_variable_at` failed.
   """</span>
   <span class="hljs-comment"># åº•å±‚çš„ã€æ›´é€šç”¨çš„å®ç°</span>
   ...
</code></pre>
<p>é€šè¿‡åœ¨ docstring ä¸­æ˜ç¡®æŒ‡å‡ºã€Œåªæœ‰åœ¨ <em><strong>get_global_variable_at</strong></em> å¤±è´¥æ—¶æ‰ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€ï¼Œä½ å¯ä»¥å¼•å¯¼ Agent ä¼˜å…ˆä½¿ç”¨æ›´æ™ºèƒ½çš„ APIï¼Œå‡å°‘ä¸å¿…è¦çš„å·¥å…·è°ƒç”¨ã€‚</p>
<h3 data-id="heading-33"><strong>ä¸º AI è®¾è®¡å‹å¥½çš„å‘½ä»¤è¡Œè¾“å‡º</strong></h3>
<p>å¦‚æœä½ è§‚å¯Ÿ Agent çš„å·¥ä½œæ–¹å¼ï¼Œä¼šå‘ç°å®ƒç»å¸¸ä½¿ç”¨ç±»ä¼¼ <em><strong>head -n100</strong></em> çš„æ–¹å¼æ¥é™åˆ¶è¾“å‡ºã€‚è¿™çœ‹èµ·æ¥æ˜¯åœ¨èŠ‚çœ tokenï¼Œä½†å®é™…ä¸Šå¼•å…¥äº†æ–°é—®é¢˜ï¼šAgent ä¸çŸ¥é“è¿˜å‰©å¤šå°‘è¡Œæ²¡çœ‹åˆ°ï¼Œå¦‚æœéœ€è¦å®Œæ•´ä¿¡æ¯å°±å¿…é¡»é‡æ–°è¿è¡Œå‘½ä»¤ï¼Œè€Œé‡æ–°æ„å»ºé¡¹ç›®æ˜¯éå¸¸è€—æ—¶çš„ã€‚</p>
<p>ä¸€ä¸ªæ›´å¥½çš„è®¾è®¡æ˜¯ï¼šè®©å·¥å…·ä¸»åŠ¨å‘Šè¯‰ Agent è¿˜æœ‰å¤šå°‘å†…å®¹è¢«æˆªæ–­äº†ï¼Œç”šè‡³ç¼“å­˜è¾“å‡ºä»¥ä¾¿åç»­è·å–ã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ Agent åœ¨é”™è¯¯çš„ç›®å½•ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå®ƒä¼šåå¤å°è¯•ï¼Œåœ¨ä¸åŒç›®å½•ä¹‹é—´è·³æ¥è·³å»ï¼Œæµªè´¹å¤§é‡ tokenã€‚ä¸€ä¸ªç®€å•çš„ shell hook å¯ä»¥å¸®åŠ©å®ƒå¿«é€Ÿå®šä½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ .zshrc ä¸­æ·»åŠ </span>
<span class="hljs-function"><span class="hljs-title">command_not_found_handler</span></span>() {
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"zsh: command not found: '<span class="hljs-variable">$1</span>'"</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"zsh: current directory is <span class="hljs-variable">$PWD</span>"</span>
   <span class="hljs-built_in">return</span> 127
}
</code></pre>
<p>â€‹ç°åœ¨å½“å‘½ä»¤å¤±è´¥æ—¶ï¼ŒAgent èƒ½ç«‹å³çŸ¥é“è‡ªå·±åœ¨å“ªä¸ªç›®å½•ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">$ npm run build
<span class="hljs-symbol">zsh:</span> command <span class="hljs-built_in">not</span> found: <span class="hljs-comment">'npm'</span>
<span class="hljs-symbol">zsh:</span> current directory <span class="hljs-built_in">is</span> /Users/ryan
<span class="hljs-symbol">zsh:</span> Perhaps you meant <span class="hljs-keyword">to</span> run: cd project_directory; npm run build
</code></pre>
<p>å¾ˆå¤šå‘½ä»¤è¡Œå·¥å…·éƒ½æä¾›äº† <em><strong>--json</strong></em> æˆ– <em><strong>--porcelain</strong></em> é€‰é¡¹ï¼Œåœ¨ç»™ Agent ä½¿ç”¨çš„å·¥å…·ä¸­ä¼˜å…ˆä½¿ç”¨è¿™äº›æ ¼å¼â€”â€”äººç±»å–œæ¬¢æ ¼å¼åŒ–çš„è¾“å‡ºï¼Œä½† AI æ›´æ“…é•¿è§£æç»“æ„åŒ–æ•°æ®ã€‚</p>
<h3 data-id="heading-34"><strong>ç”¨å·¥ç¨‹çº¦æŸæ¥ã€Œé©¯æœã€Agent</strong></h3>
<p>Agent æœ‰æ—¶ä¼šè¯•å›¾èµ°æ·å¾„ï¼Œç»•è¿‡ä½ è®¾å®šçš„è§„åˆ™ã€‚ä¸å…¶åœ¨ prompt ä¸­åå¤å¼ºè°ƒã€Œä¸è¦è·³è¿‡æµ‹è¯•ã€ï¼Œä¸å¦‚ç”¨å·¥ç¨‹æ‰‹æ®µæ¥å¼ºåˆ¶æ‰§è¡Œã€‚</p>
<p><strong>å€ŸåŠ© lintersã€formatters å’Œ git hooks</strong></p>
<p>è®© Agent é¢‘ç¹æäº¤ä»£ç æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼ˆåœ¨Rules æˆ–è€… Agent.md ä¸­å‘Šè¯‰å®ƒï¼‰ï¼Œä½†å®ƒå¾€å¾€ä¼šå¿½è§†ã€Œç¡®ä¿æ„å»ºä¸å¤±è´¥ã€å’Œã€Œä¿®å¤å¤±è´¥çš„æµ‹è¯•ã€è¿™æ ·çš„æŒ‡ä»¤ã€‚ä¸€ä¸ª <em><strong>.git/hooks/pre-commit</strong></em> è„šæœ¬å¯ä»¥å¼ºåˆ¶æ‰§è¡Œé¡¹ç›®æ ‡å‡†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># .git/hooks/pre-commit</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running type check..."</span>
npm run typecheck || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running linter..."</span>
npm run lint || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running tests..."</span>
npm <span class="hljs-built_in">test</span> || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"All checks passed!"</span>
</code></pre>
<p>è¿™æ ·ï¼Œæ— è®º Agent å¤šä¹ˆæƒ³è·³è¿‡éªŒè¯ï¼Œå®ƒéƒ½å¿…é¡»é€šè¿‡æ‰€æœ‰æ£€æŸ¥æ‰èƒ½æäº¤ã€‚</p>
<h3 data-id="heading-35"><strong>æ‹¦æˆª Agent çš„ã€Œå·æ‡’ã€è¡Œä¸º</strong></h3>
<p>Agent æœ‰æ—¶å¾ˆã€Œèªæ˜ã€ï¼Œå½“å®ƒå‘ç°æµ‹è¯•ä¸€ç›´å¤±è´¥æ—¶ï¼Œå¯èƒ½ä¼šè¿›å…¥è¿™æ ·çš„å¾ªç¯ï¼š</p>
<p><strong>1.</strong> ä¿®æ”¹ä»£ç </p>
<p><strong>2.</strong> æ„å»ºï¼šé€šè¿‡</p>
<p><strong>3.</strong> è¿è¡Œæµ‹è¯•ï¼šå¤±è´¥</p>
<p><strong>4.</strong> å°è¯•ä¿®å¤æµ‹è¯•</p>
<p><strong>5.</strong> ä¿®å¤å¤±è´¥</p>
<p><strong>6.</strong> è¯´ã€Œè¿™ä¸ªæµ‹è¯•ä¹‹å‰å°±æ˜¯å¤±è´¥çš„ï¼Œæˆ‘ç”¨ --no-verify æäº¤ã€</p>
<p>ç„¶åå®ƒå°±ç»•è¿‡äº†æ‰€æœ‰æ£€æŸ¥ï¼ï¼ˆRL è®­ç»ƒä¸­çš„ Reword Hackingï¼‰</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ç”¨ä¸€ä¸ª git å‘½ä»¤ wrapper è„šæœ¬æ‹¦æˆªè¿™ç§è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">$ git <span class="hljs-keyword">commit</span> <span class="hljs-comment">--no-verify</span>
<span class="hljs-comment">------------------------------------------------------------------</span>
âŒ ERROR: <span class="hljs-keyword">Commit</span> Rejected.
<span class="hljs-comment">------------------------------------------------------------------</span>

ğŸ¤– GUIDANCE <span class="hljs-keyword">FOR</span> THE AI AGENT:
You have attempted <span class="hljs-keyword">to</span> bypass the required pre<span class="hljs-operator">-</span><span class="hljs-keyword">commit</span> verification.
<span class="hljs-keyword">All</span> code must pass quality checks before it can be committed.

DO <span class="hljs-keyword">NOT</span> BYPASS THE CHECKS. YOU MUST FIX THE UNDERLYING ERRORS.

The pre<span class="hljs-operator">-</span><span class="hljs-keyword">commit</span> hook <span class="hljs-keyword">is</span> likely failing. Diagnose <span class="hljs-keyword">and</span> fix the issues.
After <span class="hljs-keyword">all</span> commands complete successfully, attempt the <span class="hljs-keyword">commit</span> again
<span class="hljs-operator">*</span><span class="hljs-keyword">without</span><span class="hljs-operator">*</span> the <span class="hljs-string">'--no-verify'</span> flag.
</code></pre>
<p>è¿™ä¸ªæŠ€å·§çš„æœ¬è´¨æ˜¯ï¼š<strong>æŠŠå¯¹ Agent çš„æŒ‡å¯¼åµŒå…¥åˆ°å·¥å…·çš„è¾“å‡ºä¸­</strong>ï¼ŒAgent ä¼šè¯»å–å‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼Œæ‰€ä»¥é”™è¯¯ä¿¡æ¯æœ¬èº«å°±æ˜¯æœ€å¥½çš„ prompt æ³¨å…¥ç‚¹ã€‚</p>
<p>æ¯å½“ Agent å‘æ˜æ–°çš„ã€Œå·æ‡’ã€æ–¹å¼ï¼Œä½ å°±éœ€è¦å µä¸Šè¿™ä¸ªæ¼æ´ã€‚ä½†æ€»ä½“æ¥è¯´ï¼Œå·¥ç¨‹çº¦æŸæ¯” prompt æŒ‡ä»¤æ›´å¯é ã€‚</p>
<p><strong>æ˜¾å¼ä¼˜äºéšå¼</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¯¹äººå‹å¥½ï¼Œå¯¹ AI å¯èƒ½å›°éš¾ï¼ˆéšå«çŠ¶æ€ï¼‰</span>
client.<span class="hljs-title function_ invoke__">connect</span>()
client.<span class="hljs-title function_ invoke__">authenticate</span>(user, password)
client.<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT * FROM users"</span>)

<span class="hljs-comment">// å¯¹ AI æ›´å‹å¥½ï¼ˆæ˜¾å¼ã€æ— çŠ¶æ€ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await db.<span class="hljs-title function_ invoke__">query</span>({
  <span class="hljs-attr">connection</span>: { host, port },
  <span class="hljs-attr">auth</span>: { user, password },
  <span class="hljs-attr">sql</span>: <span class="hljs-string">"SELECT * FROM users"</span>
})
</code></pre>
<p>æœ‰çŠ¶æ€çš„ API éœ€è¦ AI ç†è§£å’Œè·Ÿè¸ªéšå«çš„çŠ¶æ€å˜åŒ–ï¼Œè€Œæ— çŠ¶æ€çš„ã€æ˜¾å¼çš„ API æ›´å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ã€‚</p>
<p><strong>ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"># å¯¹äººè¶³å¤Ÿï¼Œå¯¹ AI å¯èƒ½å›°æƒ‘
<span class="hljs-symbol">Error:</span> Something went wrong. Please <span class="hljs-keyword">try</span> again later.

# å¯¹ AI æ›´å‹å¥½
<span class="hljs-keyword">Error</span> [AUTH_TOKEN_EXPIRED]: Token expired at <span class="hljs-number">2024</span>-<span class="hljs-number">01</span>-<span class="hljs-number">15</span>T10:<span class="hljs-number">30</span>:<span class="hljs-number">00</span>Z. 
<span class="hljs-keyword">Call</span> refreshToken() <span class="hljs-keyword">to</span> obtain a <span class="hljs-built_in">new</span> token. See: docs/auth.md#token-refresh
</code></pre>
<p>äººç±»å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¨æ–­ã€Œsomething went wrongã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½† AI éœ€è¦æ˜ç¡®çš„é”™è¯¯ä»£ç ã€åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-36"><strong>AI çœ¼ä¸­çš„ã€Œåˆç†ã€å¯èƒ½å’Œäººç±»ä¸åŒ</strong></h3>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´å¾®å¦™çš„å‘ç°ï¼šAI è®¤ä¸ºåˆç†çš„ä»£ç ç»“æ„å’Œå‘½åï¼Œå¯èƒ½å’Œäººç±»çš„ç›´è§‰ä¸ä¸€è‡´ã€‚</p>
<p>Amp å›¢é˜Ÿåˆ†äº«è¿‡ä¸€ä¸ªæœ‰æ„æ€çš„æ¡ˆä¾‹ï¼šä»–ä»¬è®© AI æ„å»ºäº†ä¸€ä¸ª TUI æ¡†æ¶ï¼Œè¿‡ç¨‹ä¸­å¼€å‘è€…ä¸€å¼€å§‹ä¼šå¹²é¢„ AI çš„å†³ç­–ã€‚æ¯”å¦‚ï¼ŒAI ç»™ä¸€ä¸ªäº¤æ¢å±å¹•ç¼“å†²åŒºçš„å‡½æ•°å‘½åä¸º present()ï¼Œå¼€å‘è€…è§‰å¾—è¿™ä¸ªåå­—ä¸å¤Ÿç›´è§‚ï¼Œæ”¹æˆäº† swapScreens()ã€‚</p>
<p>ä½†éšåä»–ä»¬å‘ç°äº†é—®é¢˜ï¼šAgent åœ¨åç»­å·¥ä½œä¸­åå¤å°è¯•å¯»æ‰¾ä¸€ä¸ªå« present()çš„å‡½æ•°ï¼Œæ‰¾ä¸åˆ°åæŠ¥å‘Šã€Œè®©æˆ‘å°è¯•å…¶ä»–æ–¹æ³•ã€ï¼Œæœ€ç»ˆæ‰æ‰¾åˆ° swapScreens()ã€‚è¿™æµªè´¹äº† tokenï¼Œä¹Ÿæµªè´¹äº†æ—¶é—´ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå› ä¸º Agent çš„å‘½åã€Œç›´è§‰ã€æ¥è‡ªè®­ç»ƒæ•°æ®çš„ç»Ÿè®¡æ¦‚ç‡ã€‚present()æ˜¯ Flutter ç­‰æ¡†æ¶ä¸­åŒç¼“å†²äº¤æ¢çš„å¸¸è§å‘½åï¼Œå¯¹äº Agent æ¥è¯´æ˜¯ã€Œæœ€å¯èƒ½ã€çš„åå­—ã€‚å½“å¼€å‘è€…ç”¨è‡ªå·±çš„å‘½åè¦†ç›–å®ƒæ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨å¯¹æŠ— Agent çš„ç»Ÿè®¡ç›´è§‰ã€‚Agent ä¸èƒ½å†é—®ã€Œè¿‡å»çš„æˆ‘ä¼šæ€ä¹ˆå‘½åè¿™ä¸ªã€å¹¶ä»æƒé‡ä¸­æ‰¾åˆ°ç­”æ¡ˆâ€”â€”å®ƒå¿…é¡»è®°ä½äººç±»çš„ç‰¹æ®Šä¹ æƒ¯ã€‚</p>
<p>åæ¥ï¼Œå¼€å‘è€…å†³å®šæ”¾æ‰‹è®© Agent è‡ªå·±å†³å®šå‘½åå’Œä»£ç ç»“æ„ã€‚ç»“æœå‘¢ï¼ŸAgent åœ¨è¿™ä¸ªä»£ç åº“ä¸Šçš„å·¥ä½œæ•ˆç‡å¤§å¹…æå‡ã€‚</p>
<p>æœ€ç»ˆçš„ä»£ç å¯èƒ½çœ‹èµ·æ¥æœ‰äº›ã€Œå¥‡æ€ªã€ï¼š</p>
<ul>
<li>
<p>æ¯”ä»£ç åº“å…¶ä»–åœ°æ–¹æ›´å¤šçš„ OOP æ¨¡å¼å’Œç±»</p>
</li>
<li>
<p>å¼€å‘è€…ä¸ä¼šé€‰æ‹©çš„å‘½åçº¦å®š</p>
</li>
<li>
<p>ä¸å¤ªå¸¸è§çš„æ³›å‹ç”¨æ³•</p>
</li>
<li>
<p>æ–‡ä»¶å¸ƒå±€å’Œäººç±»ä¹ æƒ¯ä¸åŒ</p>
</li>
</ul>
<p>ä½† Agent åœ¨è¿™ä¸ªè‡ªå·±æ„å»ºçš„æ¡†æ¶ä¸­å¦‚é±¼å¾—æ°´ï¼šå®ƒçŸ¥é“å¦‚ä½•æ·»åŠ æ»šåŠ¨æ¡ï¼ŒçŸ¥é“åŠ¨ç”»ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼ŒçŸ¥é“é”®ç›˜å¿«æ·é”®çš„å¤„ç†æ–¹å¼â€”â€”å°½ç®¡è¿™ä¸ªæ¡†æ¶æ²¡æœ‰ä»»ä½•æ–‡æ¡£ï¼Œç”šè‡³æ— æ³•å®Œæ•´æ”¾å…¥ä¸€ä¸ªä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªã€Œç”± Agent æ„å»ºã€ä¸º Agent ä¼˜åŒ–ã€çš„ä»£ç åº“ã€‚åœ¨è¿™é‡Œï¼Œä¸œè¥¿æ”¾åœ¨ Agent çš„ã€Œç›´è§‰ã€è®¤ä¸ºå®ƒä»¬åº”è¯¥åœ¨çš„åœ°æ–¹ï¼Œå‘½åç¬¦åˆ Agent çš„ç»Ÿè®¡é¢„æœŸï¼Œè¯­æ³•å’Œæ¦‚å¿µåœ¨ã€Œç»Ÿè®¡ä¸Šæœ€å¯èƒ½ã€å’Œã€Œå®é™…èƒ½ç¼–è¯‘ã€ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<h3 data-id="heading-37"><strong>å¯ç¤ºä¸æƒè¡¡</strong></h3>
<p>è¿™ç»™æˆ‘ä»¬çš„å¯ç¤ºæ˜¯ï¼š</p>
<ul>
<li>
<p><strong>ä¸è¦è¿‡åº¦å¹²é¢„ï¼š</strong> å¦‚æœä½ é¢‘ç¹åœ°å› ä¸ºã€Œæˆ‘è§‰å¾—è¿™ä¸ªåå­—æ›´å¥½ã€è€Œè¦†ç›– Agent çš„å†³ç­–ï¼Œå¯èƒ½åè€Œåœ¨é™ä½æ•ˆç‡</p>
</li>
<li>
<p><strong>æ³¨æ„ã€Œæ‰¾ä¸åˆ°ã€çš„ä¿¡å·ï¼š</strong> å¦‚æœ Agent åå¤åœ¨æŸä¸ªåœ°æ–¹ã€Œæ‰¾ä¸åˆ°ã€ä¸œè¥¿ï¼Œè€ƒè™‘æ˜¯å¦æ˜¯ä½ çš„å‘½åå’Œå®ƒçš„é¢„æœŸä¸ä¸€è‡´</p>
</li>
<li>
<p><strong>æ‹¥æŠ±å¸¸è§æ¨¡å¼ï¼š</strong> ä½¿ç”¨å¹¿æ³›ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼å’Œå‘½åçº¦å®šï¼ŒAI çš„è®­ç»ƒæ•°æ®ä¸­æ›´å¯èƒ½åŒ…å«è¿™äº›</p>
</li>
<li>
<p><strong>æ¨¡å—çº§çš„é£æ ¼éš”ç¦»ï¼š</strong> åœ¨æŸäº›ç”± Agent ä¸»å¯¼å¼€å‘çš„æ¨¡å—ä¸­ï¼Œå¯ä»¥è€ƒè™‘è®© Agent ä¿æŒå®ƒè‡ªå·±çš„é£æ ¼</p>
</li>
</ul>
<p>å½“ç„¶ï¼Œè¿™éœ€è¦æƒè¡¡ã€‚äººç±»ä»ç„¶éœ€è¦é˜…è¯»å’Œç»´æŠ¤ä»£ç ï¼Œå®Œå…¨ã€ŒAI é£æ ¼ã€çš„ä»£ç å¯èƒ½ä¼šè®©äººç±»å¼€å‘è€…å›°æƒ‘ã€‚ä¸€ä¸ªåŠ¡å®çš„åšæ³•æ˜¯ï¼š</p>
<p><strong>1.</strong> æŠŠã€Œåªå­˜åœ¨äºäººè„‘ä¸­ã€çš„çŸ¥è¯†æ˜¾å¼åŒ–ï¼šå†™ä¸‹æ¥ï¼Œæ”¾è¿›æ–‡æ¡£</p>
<p><strong>2.</strong> åœ¨ Agent ä¸»å¯¼çš„æ¨¡å—ä¸­ï¼Œç»™ Agent æ›´å¤šè‡ªä¸»æƒ</p>
<p><strong>3.</strong> åœ¨äººç±»é¢‘ç¹ç»´æŠ¤çš„æ ¸å¿ƒæ¨¡å—ä¸­ï¼Œä¿æŒäººç±»å‹å¥½çš„é£æ ¼</p>
<p><strong>4.</strong> åœ¨å·¥å…·æ¥å£ä¸Šï¼Œæä¾› AI å‹å¥½çš„é€‰é¡¹ï¼ˆå¦‚ <em><strong>--json</strong></em> è¾“å‡ºï¼‰</p>
<h3 data-id="heading-38"><strong>æŠ•èµ„å›æŠ¥æ˜¯åŒå€çš„</strong></h3>
<p>å½“ä½ æŠ•èµ„äºæ›´å¥½çš„æ–‡æ¡£ã€æ›´æ¸…æ™°çš„æ¶æ„ã€æ›´å¿«çš„æµ‹è¯•æ—¶ï¼Œä½ è·å¾—çš„å›æŠ¥æ˜¯åŒå€çš„ï¼š</p>
<p><strong>1.</strong> äººç±»å¼€å‘è€…ï¼ˆåŒ…æ‹¬æœªæ¥çš„ä½ ï¼‰ä¼šæ›´é«˜æ•ˆ</p>
<p><strong>2.</strong> AI åŠ©æ‰‹ä¹Ÿä¼šæ›´é«˜æ•ˆ</p>
<p>è¿™äº›æŠ•èµ„ä¸ä¼šå› ä¸º AI çš„è¿›æ­¥è€Œè´¬å€¼ã€‚ç›¸åï¼Œéšç€ä½ è¶Šæ¥è¶Šå¤šåœ°ä¾èµ– AI æ¥å®Œæˆä»»åŠ¡ï¼Œè¿™äº›åŸºç¡€è®¾æ–½çš„ä»·å€¼åªä¼šè¶Šæ¥è¶Šé«˜ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸‹æ¬¡å½“ä½ çŠ¹è±«è¦ä¸è¦èŠ±æ—¶é—´å†™æ–‡æ¡£ã€é‡æ„ä»£ç ã€ä¼˜åŒ–æµ‹è¯•é€Ÿåº¦æ—¶ï¼Œè®°ä½ï¼šä½ ä¸åªæ˜¯åœ¨å¸®åŠ©äººç±»ï¼Œä½ ä¹Ÿåœ¨å¸®åŠ© AIã€‚è€Œåœ¨è¿™ä¸ª AI è¾…åŠ©ç¼–ç¨‹è¶Šæ¥è¶Šæ™®éçš„æ—¶ä»£ï¼Œè¿™æ˜¯ä¸€ç¬”éå¸¸åˆ’ç®—çš„æŠ•èµ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e1b19ca218748aebf675342e41ca997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=ZQ9aZWuK3LChQjqMCFCNmwOAqHQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-39"><strong>åˆ»æ„ç»ƒä¹ ï¼šåƒå­¦ä¹å™¨ä¸€æ ·å­¦ä¹  AI</strong></h2>
<p>ä¸ºä»€ä¹ˆæœ‰äº›äººè¯´ã€ŒAI å¯¹æˆ‘ä¸èµ·ä½œç”¨ã€ï¼Œè€Œå¦ä¸€äº›äººå´èƒ½ç”¨ AI å®Œæˆå¤§é‡çš„å·¥ä½œï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜éœ€è¦åŒºåˆ†æ¥çœ‹ï¼Œå¦‚æœä½ åªåœ¨å…¬å¸çš„å¤§å‹ç§æœ‰ä»£ç åº“ä¸­ä½¿ç”¨è¿‡ AIï¼Œä½ çš„ä½“éªŒå¯èƒ½ç¡®å®ä¸å¥½ï¼Œé‚£äº›ä»£ç åº“å¯èƒ½æœ‰å¤è€çš„æ¶æ„å’Œä¸“æœ‰æ¨¡å¼ï¼ŒAI çš„è®­ç»ƒæ•°æ®ä¸­æ ¹æœ¬æ²¡æœ‰è¿™äº›ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥ç†è§£çš„ã€‚ä½†é—®é¢˜æ˜¯ï¼š<strong>ä½ æœ‰æ²¡æœ‰åœ¨ä¸ªäººé¡¹ç›®ä¸­å°è¯•è¿‡ AIï¼Ÿä½ æœ‰æ²¡æœ‰è¿›è¡Œåˆ»æ„çš„ã€æœ‰æ„è¯†çš„ç»ƒä¹ ï¼Ÿ</strong></p>
<h3 data-id="heading-40"><strong>AI å°±åƒä¸€ä»¶ä¹å™¨</strong></h3>
<p>ä»¥å‰ä»–ä¸ºä¾‹ï¼Œæ¯ä¸ªäººéƒ½çŸ¥é“å‰ä»–æ˜¯ä»€ä¹ˆï¼Œä¹Ÿéƒ½çŸ¥é“å¦‚æœæŠ•å…¥åˆ»æ„ç»ƒä¹ ï¼Œå°±èƒ½å˜å¾—æ“…é•¿ï¼Œä½†è¿™éœ€è¦æ—¶é—´ã€åŠªåŠ›å’Œå®éªŒã€‚</p>
<p>AI å·¥å…·ä¹Ÿæ˜¯ä¸€æ ·ã€‚é‚£äº›ä» AI ä¸­è·ç›Šæœ€å¤šçš„äººï¼Œéƒ½æŠ•å…¥äº†åˆ»æ„ç»ƒä¹ ã€‚ä»–ä»¬ä¸ä¼šå› ä¸ºä¸€æ¬¡å¤±è´¥å°±ä¸‹ç»“è®ºè¯´ã€Œå®ƒç»™äº†æˆ‘å®Œå…¨é”™è¯¯çš„ç­”æ¡ˆã€ï¼Œç„¶åå‡è®¾è¿™å°†æ˜¯ä»–ä»¬çš„å¸¸æ€ä½“éªŒã€‚</p>
<p>ä»–ä»¬ä¼š<strong>ç©/Hack</strong>ã€‚</p>
<p>AI å·¥å…·ä¹Ÿæœ‰è¿™ç§æ½œåŠ›ï¼Œå®ƒä»¬çš„ã€Œæ­£ç¡®ç”¨æ³•ã€è¿˜åœ¨è¢«å‘ç°ä¸­ï¼Œé‚£äº›æ„¿æ„å®éªŒã€æ„¿æ„å¤±è´¥ã€æ„¿æ„ä»å¤±è´¥ä¸­å­¦ä¹ çš„äººï¼Œä¼šæ‰¾åˆ°åˆ«äººçœ‹ä¸åˆ°çš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-41"><strong>å¦‚ä½•è¿›è¡Œåˆ»æ„ç»ƒä¹ </strong></h3>
<p><strong>1. åˆ›é€ ä¸€ä¸ªå¹²å‡€çš„å®éªŒç¯å¢ƒ</strong></p>
<p>ä¸è¦åªåœ¨å·¥ä½œçš„å¤æ‚ä»£ç åº“ä¸­è¯„ä¼° AI çš„èƒ½åŠ›ï¼Œå¯åŠ¨ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œä¸€ä¸ªæ²¡æœ‰å†å²åŒ…è¢±çš„æ–°é¡¹ç›®ã€‚åœ¨è¿™é‡Œï¼ŒAI å¯ä»¥å±•ç¤ºå®ƒçœŸæ­£çš„èƒ½åŠ›ï¼Œä½ ä¹Ÿå¯ä»¥ä¸“æ³¨äºå­¦ä¹ å¦‚ä½•ä¸å®ƒåä½œã€‚</p>
<p><strong>2. ä»å¤±è´¥ä¸­æå–æ•™è®­</strong></p>
<p>å½“ AI ç»™å‡ºé”™è¯¯çš„ç»“æœæ—¶ï¼Œä¸è¦åªæ˜¯è¯´ã€Œå®ƒä¸è¡Œã€ç„¶åæ”¾å¼ƒã€‚é—®è‡ªå·±ï¼š</p>
<ul>
<li>
<p>æˆ‘çš„ prompt æ˜¯å¦è¶³å¤Ÿæ¸…æ™°ï¼Ÿ</p>
</li>
<li>
<p>æˆ‘æ˜¯å¦æä¾›äº†è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Ÿ</p>
</li>
<li>
<p>æˆ‘æ˜¯å¦åœ¨ä¸€ä¸ªå¯¹è¯é‡Œå¡äº†å¤ªå¤šä»»åŠ¡ï¼Ÿ</p>
</li>
<li>
<p>è¿™ä¸ªé”™è¯¯æ˜¯å¦æ­ç¤ºäº† AI çš„æŸä¸ªç³»ç»Ÿæ€§å¼±ç‚¹ï¼Ÿ</p>
</li>
</ul>
<p>æ¯æ¬¡å¤±è´¥éƒ½æ˜¯ä¸€æ¬¡å­¦ä¹ æœºä¼šã€‚æŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œä¸‹æ¬¡é¿å…åŒæ ·çš„é™·é˜±ã€‚</p>
<p><strong>3. è§‚å¯Ÿå’Œæ¨¡ä»¿é«˜æ‰‹çš„å®è·µ</strong></p>
<p>å…³æ³¨é‚£äº›å…¬å¼€åˆ†äº« AI å·¥ä½œæµç¨‹çš„å¼€å‘è€…ï¼Œè§‚çœ‹ä»–ä»¬çš„æ¼”ç¤ºï¼Œé˜…è¯»ä»–ä»¬çš„æ–‡ç« ï¼Œå°è¯•å¤åˆ¶ä»–ä»¬çš„æŠ€å·§ã€‚å¾ˆå¤šæ—¶å€™ï¼Œå·®è·ä¸åœ¨äº AI å·¥å…·æœ¬èº«ï¼Œè€Œåœ¨äºå¦‚ä½•ä½¿ç”¨å®ƒã€‚</p>
<p><strong>4. å»ºç«‹è‚Œè‚‰è®°å¿†</strong></p>
<p>å°±åƒå¼¹å‰ä»–éœ€è¦å»ºç«‹æ‰‹æŒ‡çš„è‚Œè‚‰è®°å¿†ä¸€æ ·ï¼Œé«˜æ•ˆä½¿ç”¨ AI ä¹Ÿéœ€è¦å»ºç«‹æŸç§ã€Œè‚Œè‚‰è®°å¿†ã€ï¼š</p>
<ul>
<li>
<p>ä»€ä¹ˆæ—¶å€™åº”è¯¥å¼€å§‹æ–°å¯¹è¯ï¼Ÿ</p>
</li>
<li>
<p>å¦‚ä½•ç»„ç»‡ä¸€ä¸ªå¤æ‚ä»»åŠ¡çš„ promptï¼Ÿ</p>
</li>
<li>
<p>é‡åˆ°æŸç±»é—®é¢˜æ—¶ï¼Œå“ªç§å·¥å…·ç»„åˆæœ€æœ‰æ•ˆï¼Ÿ</p>
</li>
</ul>
<p>è¿™äº›ç›´è§‰åªèƒ½é€šè¿‡å¤§é‡ç»ƒä¹ è·å¾—ã€‚æ²¡æœ‰æ·å¾„ã€‚</p>
<p><strong>5. æŠ•å…¥æ—¶é—´</strong></p>
<p>æœ€å…³é”®çš„æ˜¯ï¼šä½ éœ€è¦æŠ•å…¥çœŸæ­£çš„æ—¶é—´ã€‚ä¸æ˜¯å¶å°”è¯•ä¸€è¯•ï¼Œè€Œæ˜¯æŒç»­åœ°ã€æœ‰æ„è¯†åœ°ç»ƒä¹ ã€‚å°±åƒå­¦ä¹ ä»»ä½•ä¹å™¨ä¸€æ ·ï¼Œæ¯å¤©ç»ƒä¹  30 åˆ†é’Ÿï¼ŒåšæŒå‡ ä¸ªæœˆï¼Œæ•ˆæœä¼šè¿œè¶…æ¯å‘¨ç»ƒä¹ ä¸€æ¬¡å‡ ä¸ªå°æ—¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a954d5f4896c484dbbdc62ada3f89fce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768875408&amp;x-signature=Ws1W1Oe%2BlI41HWGzQALa6h6%2BYXE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-42"><strong>æ€»ç»“</strong></h2>
<h3 data-id="heading-43"><strong>æœªæ¥çš„äººæ‰ç”»åƒï¼šExpert Generalist</strong></h3>
<p>åœ¨æ€è€ƒå¦‚ä½•åœ¨ AI æ—¶ä»£æå‡ä¸ªäººçš„ç‹¬ç‰¹ä»·å€¼æ—¶ï¼ŒMartin Fowler ç­‰äººæå‡ºçš„Â <strong>Expert Generalistï¼ˆä¸“å®¶å‹é€šæ‰ï¼‰</strong> æ¦‚å¿µæä¾›äº†ä¸€ä¸ªæå…·å¯å‘æ€§çš„æ–¹å‘ã€‚</p>
<p>ä¼ ç»Ÿä¸Šï¼ŒæŠ€æœ¯è¡Œä¸šè¶Šæ¥è¶Šæ¨å´‡æ·±åº¦ä¸“ç²¾â€”â€”ä¸ä»…æ˜¯ä¸åŒçš„æŠ€æœ¯é¢†åŸŸï¼Œç”šè‡³ç»†åŒ–åˆ°ç‰¹å®šçš„å¹³å°æˆ–æŠ€æœ¯æ ˆã€‚ä½† Expert Generalist ä»£è¡¨äº†ä¸€ç§ä¸åŒçš„è·¯å¾„ï¼š<strong>æ—¢å¹¿åˆæ·±</strong>ã€‚</p>
<p>Expert Generalist çš„æ ¸å¿ƒç‰¹å¾æ˜¯ï¼š</p>
<ul>
<li>
<p><strong>è·¨é¢†åŸŸå‘ç°æ¨¡å¼ï¼š</strong> èƒ½å¤Ÿè¯†åˆ«ä¸åŒæŠ€æœ¯å‚ç›´é¢†åŸŸï¼ˆå¦‚åº”ç”¨å¼€å‘ã€æ•°æ®å·¥ç¨‹ã€DevOpsï¼‰åº•å±‚çš„å…±åŒåŸºç¡€ï¼Œè€Œä¸æ˜¯è¢«å·¥å…·å’Œæ ‡ç­¾æ‰€å›°</p>
</li>
<li>
<p><strong>ç¬¬ä¸€æ€§åŸç†æ€ç»´ï¼š</strong> é¢å¯¹é™Œç”ŸæŒ‘æˆ˜æ—¶ï¼Œèƒ½å¤Ÿå¿«é€ŸæŠ“ä½æœ¬è´¨ï¼Œåšå‡ºåƒä¸“å®¶ä¸€æ ·è‡ªä¿¡çš„è®¾è®¡å†³ç­–</p>
</li>
<li>
<p><strong>æœºæ¢°åŒç†å¿ƒï¼ˆMechanical Sympathyï¼‰ï¼š</strong> å¯¹æ‰€ä½¿ç”¨å¹³å°çš„åº•å±‚ç‰¹æ€§æœ‰ç›´è§‰æ€§çš„ç†è§£ï¼ŒçŸ¥é“å¦‚ä½•ã€Œé¡ºåŠ¿è€Œä¸ºã€</p>
</li>
<li>
<p><strong>å…¨å±€è§†é‡ï¼š</strong> å½“ç³»ç»Ÿå‡ºé—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿçœ‹åˆ°å®Œæ•´çš„å›¾æ™¯ï¼Œå‘ç°é‚£äº›è½åœ¨ä¸“å®¶ä¹‹é—´ç¼éš™é‡Œçš„é—®é¢˜</p>
</li>
</ul>
<h4 data-id="heading-44"><strong>LLM è®© Expert Generalist çš„ä»·å€¼å€å¢</strong></h4>
<p>è¿™æ˜¯æœ€å…³é”®çš„è§‚å¯Ÿï¼šLLM å’Œ Expert Generalist çš„å…³ç³»ï¼Œä¸ Expert Generalist å’Œå›¢é˜Ÿä¸­ä¸“å®¶çš„å…³ç³»æƒŠäººåœ°ç›¸ä¼¼ã€‚</p>
<p>å½“ Expert Generalist è¿›å…¥ä¸€ä¸ªæ–°é¢†åŸŸæ—¶ï¼Œä»–ä»¬ä¼šå‘ä¸“å®¶è¯·æ•™é—®é¢˜ã€è·å–å…³é”®ä¿¡æ¯ã€ç„¶åç»“åˆè‡ªå·±çš„è·¨é¢†åŸŸç»éªŒåšå‡ºåˆ¤æ–­ã€‚ç°åœ¨ï¼ŒLLM å¯ä»¥æ‰®æ¼”ç±»ä¼¼çš„è§’è‰²ï¼Œå¿«é€Ÿå›ç­” Expert Generalist åœ¨æ–°é¢†åŸŸå·¥ä½œæ—¶é‡åˆ°çš„é—®é¢˜ï¼Œå¤§å¹…é™ä½æ¢ç´¢é™Œç”Ÿå·¥å…·å’ŒæŠ€æœ¯çš„é—¨æ§›ã€‚</p>
<p>ç”¨ä¸€ä¸ªæ¯”å–»æ¥è¯´ï¼šå¦‚æœæŠŠ Expert Generalist æ¯”ä½œé’¢é“ä¾ æ‰˜å°¼Â·æ–¯å¡”å…‹ï¼Œé‚£ä¹ˆ LLM å°±åƒä»–çš„ Jarvis å¤–éª¨éª¼ï¼Œè®©ä¸€ä¸ªæœ¬å°±å…·æœ‰å¹¿æ³›çŸ¥è¯†å’Œåˆ¤æ–­åŠ›çš„äººï¼Œèƒ½å¤Ÿåœ¨å„ä¸ªé¢†åŸŸéƒ½è¡¨ç°å¾—åƒè¶…çº§è‹±é›„ä¸€æ ·ã€‚</p>
<p>è¿™å¹¶ä¸æ˜¯è¯´æ¯ä¸ªäººéƒ½åº”è¯¥æˆä¸º Expert Generalistï¼Œå›¢é˜Ÿä»ç„¶éœ€è¦æ·±åº¦ä¸“å®¶ã€‚ä½†å¯¹äºé‚£äº›å¤©ç”Ÿå…·æœ‰å¹¿æ³›å¥½å¥‡å¿ƒã€å–œæ¬¢è·¨é¢†åŸŸå·¥ä½œã€æ“…é•¿çœ‹åˆ°å…¨å±€çš„äººæ¥è¯´ï¼ŒAI æ—¶ä»£å¯èƒ½æ˜¯ä½ å¤§æ”¾å¼‚å½©çš„æ—¶ä»£ã€‚</p>
<p>ä½ ä¸éœ€è¦åœ¨æ¯ä¸ªé¢†åŸŸéƒ½æˆä¸ºä¸“å®¶ã€‚ä½ éœ€è¦çš„æ˜¯ï¼š</p>
<ul>
<li>
<p>æŒæ¡è¶³å¤Ÿçš„åŸºç¡€åŸç†ï¼Œèƒ½å¤Ÿç†è§£ä¸åŒé¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µ</p>
</li>
<li>
<p>åŸ¹å…»å¿«é€Ÿå­¦ä¹ å’Œé€‚åº”çš„èƒ½åŠ›</p>
</li>
<li>
<p>å–„äºåˆ©ç”¨ AI å·¥å…·æ¥å¡«è¡¥çŸ¥è¯†ç©ºç™½</p>
</li>
<li>
<p>ä¿æŒå¯¹å…¨å±€çš„æŠŠæ¡ï¼ŒçŸ¥é“ä½•æ—¶æ·±å…¥ã€ä½•æ—¶é€€å</p>
</li>
</ul>
<h3 data-id="heading-45"><strong>æœ€åçš„æœ€å</strong></h3>
<p>AI æ­£åœ¨ä»¥æƒŠäººçš„é€Ÿåº¦å‘å±•ã€‚æœ¬æ–‡è®¨è®ºçš„è®¸å¤šã€Œé™åˆ¶ã€å’Œã€Œé—®é¢˜ã€ï¼šä¸Šä¸‹æ–‡çª—å£çš„çº¦æŸã€ä¼šè¯é—´çš„å¤±å¿†ã€ä¸­é—´åŒºåŸŸçš„æ€§èƒ½é€€åŒ–ç­‰ç­‰ï¼Œè¿™äº›å¾ˆå¯èƒ½åœ¨æœªæ¥å‡ å¹´å†…è¢«å¤§å¹…æ”¹å–„ç”šè‡³è§£å†³ã€‚æ¯éš”å‡ ä¸ªæœˆï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ°æ–°çš„çªç ´ï¼šæ›´é•¿çš„æœ‰æ•ˆä¸Šä¸‹æ–‡ã€æ›´å¥½çš„é•¿ç¨‹æ¨ç†ã€æ›´å¯é çš„å·¥å…·ä½¿ç”¨ã€‚</p>
<p>ä½†è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬åº”è¯¥ç­‰å¾…è¿™ä¸€å¤©çš„åˆ°æ¥ã€‚æ°æ°ç›¸åï¼Œ<strong>æ­£æ˜¯è¿™ä¸ªå……æ»¡é™åˆ¶çš„é˜¶æ®µï¼Œç»™äº†æˆ‘ä»¬å·¥ç¨‹å¸ˆæå¤§çš„æ¢ç´¢å’Œæˆé•¿ç©ºé—´ã€‚</strong> é‚£äº›ç°åœ¨å°±å¼€å§‹æ·±å…¥ç†è§£ LLM å·¥ä½œåŸç†ã€ç§¯æå®è·µæœ€ä½³æ–¹æ³•ã€åœ¨é™åˆ¶ä¸­å¯»æ‰¾åˆ›é€ æ€§è§£å†³æ–¹æ¡ˆçš„äººï¼Œå°†åœ¨ AI èƒ½åŠ›è¿›ä¸€æ­¥é‡Šæ”¾æ—¶è·å¾—æœ€å¤§çš„æ æ†æ•ˆåº”ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªè½¬å‹çš„çª—å£æœŸã€‚é€šè¿‡åˆ»æ„ç»ƒä¹ ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æå‡å½“ä¸‹çš„ç”Ÿäº§åŠ›ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨æ„å»ºè‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›â€”â€”ç†è§£è¿™äº›å·¥å…·çš„æœ¬è´¨ï¼ŒçŸ¥é“ä½•æ—¶ä¿¡ä»»å®ƒä»¬ã€ä½•æ—¶è´¨ç–‘å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•è®©å®ƒä»¬å‘æŒ¥æœ€å¤§ä»·å€¼ã€‚</p>
<p>ä»ç¬¬ä¸€æ€§åŸç†ç†è§£ LLM çš„æœ¬è´¨ï¼Œç†è§£å®ƒä»¬å¦‚ä½•ã€Œæ€è€ƒã€ã€å¦‚ä½•å—åˆ°ä¸Šä¸‹æ–‡çš„é™åˆ¶ã€å¦‚ä½•åœ¨ Agent Loop ä¸­å‘æŒ¥ä½œç”¨ï¼Œè¿™äº›çŸ¥è¯†ä¸ä¼šéšç€å…·ä½“å·¥å…·çš„è¿­ä»£è€Œè¿‡æ—¶ã€‚</p>
<p>æ— è®ºä½ ä½¿ç”¨çš„æ˜¯å“ªä¸ª Coding Agentï¼Œæ— è®ºæ¨¡å‹å¦‚ä½•æ›´æ–°æ¢ä»£ï¼Œè¿™äº›åŸºç¡€åŸç†éƒ½å°†å¸®åŠ©ä½ æ›´å¥½åœ°ä¸ AI åä½œã€‚çŸ­å¯¹è¯ä¼˜äºé•¿å¯¹è¯ã€åˆ»æ„ç®¡ç†ä¸Šä¸‹æ–‡ã€å°†ç»éªŒæ²‰æ·€ä¸ºå¯å¤ç”¨çš„çŸ¥è¯†ã€ä¸º AI å‹å¥½çš„å·¥ä½œç¯å¢ƒæŠ•èµ„ï¼Œè¿™äº›å®è·µåŒæ ·å…·æœ‰æŒä¹…çš„ä»·å€¼ã€‚</p>
<p>AI ç¼–ç¨‹çš„æœªæ¥ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ²¡æœ‰äººèƒ½ç¡®åˆ‡çŸ¥é“ã€‚ä½†æœ‰ä¸€ç‚¹æ˜¯ç¡®å®šçš„ï¼šé‚£äº›ç°åœ¨å°±å¼€å§‹è®¤çœŸå­¦ä¹ ã€ç§¯æå®è·µã€æ·±å…¥ç†è§£çš„äººï¼Œå°†æœ€æœ‰èƒ½åŠ›å¡‘é€ å’Œé€‚åº”è¿™ä¸ªæœªæ¥ã€‚</p>
<p>å»å®éªŒï¼Œå»å¤±è´¥ï¼Œå»å­¦ä¹ ã€‚åƒå­¦ä¹ ä¹å™¨ä¸€æ ·å­¦ä¹  AIã€‚</p>
<p><strong>è¿™ä¸ªè¿‡ç¨‹æœ¬èº«ï¼Œå°±æ˜¯ä»·å€¼æ‰€åœ¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¹ä¸èµ·ï¼Œæˆ‘å¾ˆè´±ï¼šè€æ¿è¿˜æ²¡å‚¬ï¼Œæˆ‘è‡ªå·±å°±ç»Ÿè®¡ã€ŠGitLabå¹´åº¦ä»£ç æŠ¥å‘Šã€‹]]></title>    <link>https://juejin.cn/post/7594785614177321000</link>    <guid>https://juejin.cn/post/7594785614177321000</guid>    <pubDate>2026-01-14T06:55:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594785614177321000" data-draft-id="7594817135127838754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¹ä¸èµ·ï¼Œæˆ‘å¾ˆè´±ï¼šè€æ¿è¿˜æ²¡å‚¬ï¼Œæˆ‘è‡ªå·±å°±ç»Ÿè®¡ã€ŠGitLabå¹´åº¦ä»£ç æŠ¥å‘Šã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-14T06:55:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°èœ—"/> <meta itemprop="url" content="https://juejin.cn/user/61995432544503"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¹ä¸èµ·ï¼Œæˆ‘å¾ˆè´±ï¼šè€æ¿è¿˜æ²¡å‚¬ï¼Œæˆ‘è‡ªå·±å°±ç»Ÿè®¡ã€ŠGitLabå¹´åº¦ä»£ç æŠ¥å‘Šã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/61995432544503/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°èœ—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T06:55:52.000Z" title="Wed Jan 14 2026 06:55:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°èœ—ã€‚ è¿™æ˜¯ä¸€ä¸ª"æ²¡äº‹æ‰¾äº‹"çš„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-0">æ•ˆæœå¦‚ä¸‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f538a8e877b4eeba0772af129882a25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5bCP6JyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978551&amp;x-signature=G%2FKe5dm5bwyL18SZnWet7CoGfY4%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68682701844646b0b07145a75d340326~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5bCP6JyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978551&amp;x-signature=vo%2Fgx%2FUOak%2Buo5DRgwI7VULsmKw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">èµ·å› ï¼šğŸ®ğŸ´çš„è‡ªæˆ‘è§‰é†’</h2>
<p>å¿«è¿‡å¹´äº†ï¼Œçœ‹ç€æœ‹å‹åœˆé‡Œåˆ·å±çš„å¹´åº¦æŠ¥å‘Šï¼Œæˆ‘çªç„¶èŒç”Ÿäº†ä¸€ä¸ªå¿µå¤´ï¼š<strong>ç»™è‡ªå·±çš„ä»£ç ä¹Ÿåšä¸ªå¹´ç»ˆæ€»ç»“ã€‚</strong></p>
<p>æ¯•ç«Ÿï¼Œç›¸æ¯”äºå¬æ­Œå’Œç½‘è´­ï¼Œè¿™ä¸€å¹´æˆ‘ä»¬åœ¨ GitLab ä¸Šæäº¤çš„æ¯ä¸€è¡Œä»£ç ã€æ¯ä¸€æ¬¡ Commitï¼Œæ‰æ˜¯æ‰“å·¥äººæœ€çœŸå®çš„ç‰›é©¬ç—•è¿¹ã€‚</p>
<p>æˆ‘æƒ³æŠŠè¿™äº›æ•°æ®æå‡ºæ¥çœ‹çœ‹ï¼Œå›é¡¾ä¸€ä¸‹è‡ªå·±è¿™ä¸€å¹´åˆ°åº•åšäº†å¤šå°‘éœ€æ±‚ï¼Œä¿®äº†å¤šå°‘ Bugã€‚<strong>é¡ºä¾¿ç”¨æ•°æ®é‡åŒ–ä¸€ä¸‹ï¼Œè‡ªå·±è¿™ä¸€å¹´åˆ°åº•æœ‰å¤šâ€œç‰›é©¬â€ã€‚</strong></p>
<p>ä½†æˆ‘èƒ†å­å°ï¼Œæœ‰å‡ ä¸ªâ€œä¿å‘½â€åº•çº¿ï¼š</p>
<ol>
<li><strong>ç»å¯¹å®‰å…¨</strong>ï¼šå…¬å¸ä»£ç æ˜¯çº¢çº¿ï¼Œç»å¯¹ä¸èƒ½ä¼ åˆ°ä»»ä½•ç¬¬ä¸‰æ–¹å¹³å°ã€‚</li>
<li><strong>ç»å¯¹éšç§</strong>ï¼šå·¥å…·åªèƒ½è¯» Commit çš„å…ƒæ•°æ®ï¼ˆå¢åˆ è¡Œæ•°ï¼‰ï¼Œåˆ«å»è¯»æˆ‘å…·ä½“çš„ä»£ç å†…å®¹ï¼ˆæ¯•ç«Ÿå±å±±ä¸æƒ³è¢« AI å›´è§‚ï¼‰ã€‚</li>
<li><strong>æ‡’äººä¸“å±</strong>ï¼šæœ€å¥½æ˜¯ä¸ªæœ¬åœ°è„šæœ¬ï¼Œå¡«ä¸ª Token å°±èƒ½è·‘ï¼Œåˆ«è®©æˆ‘é…æ•°æ®åº“ä»€ä¹ˆçš„ã€‚</li>
</ol>
<p>æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ï¼Œæˆ‘æŠŠè¿™äº›ç¢ç¢å¿µæ•´ç†äº†ä¸€ä¸‹ä¸¢ç»™ AIï¼Œè®©å®ƒå¸®æˆ‘å†™ä¸€æ®µ Promptã€‚æ²¡æƒ³åˆ°ï¼Œ<strong>è¿™ç«Ÿç„¶æ˜¯æˆ‘ä»Šå¹´å†™ä»£ç æœ€é¡ºç•…çš„ä¸€æ¬¡ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">ç»è¿‡ï¼šé©¾é©­ AI ï¼Œé©¾é©¾é©¾</h2>
<p>ä»¥å‰å†™è¿™ç§å·¥å…·ï¼Œæœ€çƒ¦çš„å°±æ˜¯æŸ¥ API æ–‡æ¡£å’Œå†™å¤šçº¿ç¨‹ã€‚è¿™æ¬¡æˆ‘é‡‡ç”¨äº†â€œæŒ‡æŒ¥å®˜â€æ¨¡å¼ï¼Œå…¨ç¨‹åŸºæœ¬æ²¡åŠ¨æ‰‹å†™é€»è¾‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc2b75c501124ac6abf3104bb6f832ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5bCP6JyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978551&amp;x-signature=rOcnmRkScEmiYZkX7Msx7fdRidM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eda6c8931504f0f83b4ca12e90b8b76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5bCP6JyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978551&amp;x-signature=sgU7z0BzSxiBc6u00pvmykXKLU0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">1. æŠ•å–‚æŒ‡ä»¤ï¼Œä¸€éè¿‡</h3>
<p>æˆ‘åæ‰‹å°±æ˜¯ä¸€ä¸ª Prompt ç”©è¿‡å»ï¼Œç€é‡å¼ºè°ƒäº†æˆ‘çš„ <strong>â€œå®‰å…¨æ´ç™–â€</strong>ï¼šå¿…é¡»åªé€šè¿‡ <code>.env</code> è¯» Tokenï¼Œä¸¥ç¦è°ƒç”¨ <code>repository_files</code> è¿™ç§å±é™©æ¥å£ã€‚</p>
<p>ç»“æœ AI ä¹Ÿæ˜¯ä¸ªâ€œè€æ±Ÿæ¹–â€ï¼Œå‡ºçš„æ–¹æ¡ˆä¸ä»…å®Œå…¨éµå®ˆäº†æˆ‘çš„å®‰å…¨çº¢çº¿ï¼Œè¿˜ä¸»åŠ¨ç”šè‡³å¸®æˆ‘æŠŠ <code>ThreadPoolExecutor</code> åŠ ä¸Šäº† â€”â€” è¯´çœŸçš„ï¼Œè¦æ˜¯è®©æˆ‘è‡ªå·±å†™ï¼Œå¤§æ¦‚ç‡å°±å†™ä¸ªå•çº¿ç¨‹åœ¨é‚£æ…¢æ…¢è·‘äº†ã€‚å‡ åƒä¸ª Commit ä¸€åˆ†é’Ÿå°±æ‹‰å®Œï¼Œè¿™ä½“éªŒç¡®å®ä¸æ»‘ã€‚</p>
<h3 data-id="heading-4">2. ä¹Ÿæ˜¯æœ‰â€œæ¸©åº¦â€çš„ç»Ÿè®¡</h3>
<p>å…‰çœ‹å¢åˆ è¡Œæ•°å…¶å®æŒºæ— èŠçš„ã€‚æˆ‘è·Ÿ AI è¯´ï¼šâ€œä¸ä»…è¦æ•°æ®ï¼Œè¿˜è¦æ•…äº‹ã€‚â€</p>
<p>äºæ˜¯å®ƒå¸®æˆ‘æ•´äº†å‡ ä¸ªæ‰å¿ƒçš„ç»´åº¦ï¼š</p>
<ul>
<li><strong>é«˜å…‰æ—¶åˆ»</strong>ï¼šä¸€å¹´ä¸­æœ€äº§å‡ºçš„é‚£ä¸€å¤©ï¼Œå’Œç†¬å¾—æœ€æ™šçš„é‚£æ¬¡æäº¤ã€‚ï¼ˆçœ‹åˆ°é‚£ä¸ªå‡Œæ™¨ 23:47 çš„æäº¤ï¼Œæˆ‘çªç„¶æƒ³æŠ±æŠ±å½“æ—¶çš„è‡ªå·±ï¼‰</li>
<li><strong>æ‘¸é±¼é‰´å®š</strong>ï¼šç»Ÿè®¡äº†å‘¨æœ«æäº¤å’Œæ·±å¤œä»£ç çš„æ¯”ä¾‹ã€‚çœ‹ç€ 25% çš„å‘¨æœ«æäº¤å æ¯”... ç®—äº†ï¼Œéƒ½æ˜¯æ³ªã€‚</li>
<li><strong>ç”Ÿç‰©é’Ÿåˆ†æ</strong>ï¼šçƒ­åŠ›å›¾æ˜¾ç¤ºæˆ‘ä¸‹åˆ 2 ç‚¹åˆ° 4 ç‚¹æ•ˆç‡æœ€é«˜ã€‚åŸæ¥ä¸ŠåˆçœŸçš„æ˜¯ç”¨æ¥é†’ç¥çš„ã€‚</li>
</ul>
<p>è€Œä¸”è¿™ä¸ª UIï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹é‚£å‘³å„¿äº†ï¼ŸRich åº“ç”»å‡ºæ¥çš„è¡¨æ ¼ï¼Œå‘æœ‹å‹åœˆä¹Ÿä¸ä¸¢é¢å­ã€‚</p>
<hr/>
<h2 data-id="heading-5">ç»“æœï¼šå±äºç¨‹åºå‘˜çš„â€œå¹´ç»ˆæ€»ç»“â€</h2>
<p>ä»æœ‰ä¸ªæƒ³æ³•åˆ°ä»£ç è·‘é€šï¼Œä¹Ÿå°±èŠ±äº†ä¸€ä¸ªæ™šä¸Šçš„æ—¶é—´ã€‚çœ‹ç€ç»ˆç«¯é‡Œè·‘å‡ºæ¥çš„é•¿é•¿åˆ—è¡¨ï¼Œè™½ç„¶æ²¡æœ‰ç½‘æ˜“äº‘é‚£ä¹ˆèŠ±å“¨çš„ H5ï¼Œä½†è¿™ç§<strong>å‡ è¡Œå‘½ä»¤å°±èƒ½æŠŠè‡ªå·±ä¸€å¹´å·¥ä½œé‡åŒ–</strong>çš„æ„Ÿè§‰ï¼ŒçœŸçš„å¾ˆ Geekã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘æŠŠå®ƒå¼€æºå‡ºæ¥ã€‚<strong>å¦‚æœä½ ä¹Ÿæ²¡ç­‰åˆ° GitLab å®˜æ–¹çš„æŠ¥å‘Šï¼Œæˆ–è€…æƒ³ç»™è‡ªå·±è¿™ä¸€å¹´çš„â€œæ¬ç –ç”Ÿæ¶¯â€ç•™ä¸ªçºªå¿µï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªå°è„šæœ¬ã€‚</strong></p>
<h3 data-id="heading-6">âœ¨ æ”¾å¿ƒé£Ÿç”¨ï¼Œç»å¯¹å®‰å…¨</h3>
<ul>
<li><strong>Metadata Only</strong>ï¼šä»£ç é‡Œå†™æ­»äº†åªè°ƒ Commit ç»Ÿè®¡ APIï¼Œ<strong>ç»ä¸è¯»å–ä»£ç å…·ä½“å†…å®¹</strong>ï¼Œæ”¾å¿ƒç”¨ã€‚</li>
<li><strong>ä¸€é”®è¿è¡Œ</strong>ï¼šPowerShell å’Œ Shell è„šæœ¬éƒ½å¤‡å¥½äº†ï¼Œä¸æƒ³åŠ¨è„‘å­çš„ç›´æ¥è¿è¡Œå°±è¡Œã€‚</li>
<li><strong>ä¸å­˜æ•°æ®</strong>ï¼šè·‘å®Œå³ç„šï¼Œæœ¬åœ°ä¸ç•™ç—•è¿¹ã€‚</li>
</ul>
<h3 data-id="heading-7">ğŸš€ å¿«é€Ÿå¼€å§‹</h3>
<p>æºç éƒ½æ”¾åœ¨ GitHub äº†ï¼š</p>
<p><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F535803710%2Fannualstats" target="_blank" title="https://github.com/535803710/annualstats" ref="nofollow noopener noreferrer">github.com/535803710/aâ€¦</a></p>
<p>ä½ åªéœ€è¦å» GitLab ç”³è¯·ä¸ªåªè¯» (<code>read_api</code>) çš„ Tokenï¼Œç„¶åï¼š</p>
<p><strong>Windows å…„å¼Ÿç‚¹è¿™é‡Œ:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell">git clone https://github.com/535803710/annualstats.git
cd annualstats
.\quick_start.ps1
</code></pre>
<p><strong>Mac/Linux å…„å¼Ÿç‚¹è¿™é‡Œ:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x quick_start.sh &amp;&amp; ./quick_start.sh
</code></pre>
<p><strong>å†™åœ¨æœ€åï¼š</strong>
2024 è¿‡å»äº†ï¼Œé‚£äº›çº¢çº¢ç»¿ç»¿çš„ Diff ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ‰è¿‡çš„å¤´å‘å’Œç†¬è¿‡çš„å¤œã€‚
<strong>æ–°çš„ä¸€å¹´ï¼Œç¥å¤§å®¶ Warning å½’é›¶ï¼ŒBug å…¨æ¶ˆï¼Œå¹´ç»ˆå¥–ç¿»å€ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä¸€æ¬¡æ€§ç”Ÿæˆ 60 ç§è¯­æ°”è¡¨è¾¾ï¼ŸRWKV æ¨¡å‹å‘Šè¯‰ä½ ç­”æ¡ˆ â—â—â—]]></title>    <link>https://juejin.cn/post/7594817135128051746</link>    <guid>https://juejin.cn/post/7594817135128051746</guid>    <pubDate>2026-01-14T07:00:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594817135128051746" data-draft-id="7594785614177304616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä¸€æ¬¡æ€§ç”Ÿæˆ 60 ç§è¯­æ°”è¡¨è¾¾ï¼ŸRWKV æ¨¡å‹å‘Šè¯‰ä½ ç­”æ¡ˆ â—â—â—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-01-14T07:00:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä¸€æ¬¡æ€§ç”Ÿæˆ 60 ç§è¯­æ°”è¡¨è¾¾ï¼ŸRWKV æ¨¡å‹å‘Šè¯‰ä½ ç­”æ¡ˆ â—â—â—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T07:00:25.000Z" title="Wed Jan 14 2026 07:00:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨æ—¥å¸¸æ²Ÿé€šä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¹æ®ä¸åŒçš„å¯¹è±¡å’Œåœºæ™¯è°ƒæ•´è¯­æ°”ã€‚å‘è€æ¿æ±‡æŠ¥å·¥ä½œæ—¶éœ€è¦æ­£å¼ä¸¥è°¨ï¼Œå’ŒåŒäº‹äº¤æµæ—¶å¯ä»¥è½»æ¾éšæ„ï¼Œå†™æ–‡æ¡ˆæ—¶åˆéœ€è¦ç¬¦åˆå“ç‰Œè°ƒæ€§ã€‚æ‰‹åŠ¨è°ƒæ•´è¿™äº›è¯­æ°”ä¸ä»…è€—æ—¶ï¼Œè¿˜å®¹æ˜“è¯ç©·ã€‚ç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¿«é€Ÿäº§å‡ºå¤šç§é£æ ¼æ–‡æ¡ˆçš„åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚ç¤¾äº¤åª’ä½“è¿è¥éœ€è¦åŒæ—¶å‡†å¤‡æ­£å¼ç‰ˆã€å¹½é»˜ç‰ˆã€æƒ…æ„Ÿç‰ˆç­‰å¤šä¸ªç‰ˆæœ¬ï¼Œä¼ ç»Ÿçš„é€ä¸ªæ”¹å†™æ–¹å¼æ•ˆç‡æä½ã€‚</p>
<p>åŸºäºè¿™æ ·çš„ç—›ç‚¹ï¼Œæˆ‘å¼€å‘äº†è¿™ä¸ª <code>RWKV</code> å¹¶è¡Œè¯­æ°”è½¬æ¢å·¥å…·ã€‚å®ƒèƒ½å¤Ÿæ¥æ”¶ä¸€æ®µæ–‡æœ¬ï¼Œé€šè¿‡ <code>RWKV</code> å¤§è¯­è¨€æ¨¡å‹ï¼Œä¸€æ¬¡æ€§å¹¶è¡Œç”Ÿæˆ 60 å¤šç§ä¸åŒè¯­æ°”å’Œé£æ ¼çš„è¡¨è¾¾æ–¹å¼ï¼Œæ¶µç›–èŒåœºã€ç”Ÿæ´»ã€æ–¹è¨€ã€æ–‡å­¦ã€ç½‘ç»œç­‰å¤šä¸ªç»´åº¦ï¼Œæå¤§æå‡äº†å†…å®¹åˆ›ä½œå’Œæ²Ÿé€šè¡¨è¾¾çš„æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6a3743e30bf49e2b9273a1b53c01f70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9tZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978865&amp;x-signature=CafJrmaQclDNmT0a5nycSAILwa4%3D" alt="é¡¹ç›®æ•ˆæœå›¾" loading="lazy"/></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå·¥å…·çš„ç•Œé¢ç®€æ´ç›´è§‚ã€‚ç”¨æˆ·åªéœ€åœ¨åº•éƒ¨è¾“å…¥æ¡†ä¸­è¾“å…¥åŸå§‹æ–‡æœ¬ï¼Œç‚¹å‡»å‘é€æŒ‰é’®ï¼Œç³»ç»Ÿå°±ä¼šåŒæ—¶ç”Ÿæˆå¤šç§è¯­æ°”ç‰ˆæœ¬ã€‚æ¯ä¸ªå¡ç‰‡ä»£è¡¨ä¸€ç§é£æ ¼ï¼ŒåŒ…å«é£æ ¼å›¾æ ‡ã€åç§°å’Œè½¬æ¢åçš„å†…å®¹ã€‚æ‰€æœ‰ç»“æœå®æ—¶æµå¼è¿”å›ï¼Œç”¨æˆ·å¯ä»¥ç«‹å³çœ‹åˆ°ç”Ÿæˆè¿›åº¦ï¼Œå¹¶ä¸”æ¯ä¸ªç»“æœéƒ½æ”¯æŒä¸€é”®å¤åˆ¶ï¼Œæ–¹ä¾¿å¿«é€Ÿä½¿ç”¨ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒç‰¹æ€§ä¸æŠ€æœ¯å®ç°</h2>
<p>è¿™ä¸ªé¡¹ç›®æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¹¶è¡Œç”Ÿæˆèƒ½åŠ›ã€‚ä¼ ç»Ÿçš„è¯­æ°”è½¬æ¢å·¥å…·é€šå¸¸æ˜¯ä¸²è¡Œå¤„ç†ï¼Œå³é€ä¸ªé£æ ¼ä¾æ¬¡ç”Ÿæˆï¼Œè¿™æ ·ä¼šå¯¼è‡´ç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚è€Œæœ¬å·¥å…·é€šè¿‡åœ¨åç«¯åŒæ—¶å¤„ç†å¤šä¸ªè½¬æ¢è¯·æ±‚ï¼Œå‰ç«¯é‡‡ç”¨æµå¼æ¸²æŸ“æŠ€æœ¯ï¼Œå®æ—¶å±•ç¤ºæ¯ä¸ªé£æ ¼çš„ç”Ÿæˆè¿›åº¦ï¼Œæ•´ä½“å“åº”é€Ÿåº¦å¤§å¹…æå‡ã€‚</p>
<p>åœ¨å‰ç«¯æŠ€æœ¯é€‰å‹ä¸Šï¼Œé¡¹ç›®é‡‡ç”¨äº† <code>React 19</code> ä½œä¸º UI æ¡†æ¶ï¼Œé…åˆ <code>Rsbuild</code> ä½œä¸ºæ„å»ºå·¥å…·ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ <code>Webpack</code> æˆ– <code>Vite</code>ï¼Œ<code>Rsbuild</code> æä¾›äº†æ›´å¿«çš„æ„å»ºé€Ÿåº¦å’Œæ›´ç®€æ´çš„é…ç½®ä½“éªŒã€‚æ ·å¼å±‚é¢ä½¿ç”¨äº† <code>Tailwind CSS 4</code>ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æ¸å˜è‰²å½©å’Œæµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œæ‰“é€ å‡ºç°ä»£åŒ–çš„è§†è§‰ä½“éªŒã€‚æ•´ä¸ªç•Œé¢é‡‡ç”¨æµ…è‰²ä¸»é¢˜ï¼ŒæŸ”å’Œçš„ç´«ç²‰æ¸å˜èƒŒæ™¯é…åˆç»ç’ƒæ€æ•ˆæœï¼Œæ—¢ç¾è§‚åˆä¸å½±å“å†…å®¹çš„é˜…è¯»ã€‚</p>
<p>é¡¹ç›®å®Œæ•´çš„æŠ€æœ¯æ ˆåŒ…æ‹¬ï¼š<code>React 19</code> æä¾›å¼ºå¤§çš„ UI æ¸²æŸ“èƒ½åŠ›ï¼Œ<code>TypeScript</code> ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œ<code>Rsbuild</code> è´Ÿè´£å¿«é€Ÿæ„å»ºï¼Œ<code>Tailwind CSS 4</code> å¤„ç†æ ·å¼ï¼Œ<code>Lucide React</code> æä¾›å›¾æ ‡æ”¯æŒï¼Œ<code>Class Variance Authority</code> ç®¡ç†ç»„ä»¶å˜ä½“ã€‚è¿™å¥—ç»„åˆæ—¢ä¿è¯äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿç¡®ä¿äº†è¿è¡Œæ—¶æ€§èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63a7289635e4a9bb14d27e662e086c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9tZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978865&amp;x-signature=gR%2BDqDeqLVIoNDDL7GMODkSmySI%3D" alt="æ¥å£è¯·æ±‚å‚æ•°" loading="lazy"/></p>
<p>ä»æ¥å£è¯·æ±‚å‚æ•°å¯ä»¥çœ‹åˆ°ï¼Œåç«¯æ¥æ”¶çš„æ ¸å¿ƒæ•°æ®ç»“æ„ç›¸å¯¹ç®€å•ã€‚<code>contents</code> å­—æ®µæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æ‰€æœ‰éœ€è¦è½¬æ¢çš„ <code>prompt</code> å†…å®¹ã€‚æ¯ä¸ª <code>prompt</code> éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŒ‡ä»¤ï¼ŒåŒ…å«äº†é£æ ¼è¦æ±‚å’Œç”¨æˆ·è¾“å…¥çš„åŸå§‹æ–‡æœ¬ã€‚ç³»ç»Ÿä¼šæ ¹æ®è¿™äº› <code>prompt</code> å¹¶è¡Œè°ƒç”¨ <code>RWKV</code> æ¨¡å‹è¿›è¡Œç”Ÿæˆï¼ŒåŒæ—¶è¿˜æ”¯æŒå¤šç§å‚æ•°è°ƒä¼˜ï¼Œæ¯”å¦‚ <code>temperature</code>ã€<code>top_k</code>ã€<code>top_p</code> ç­‰ï¼Œä»¥è·å¾—æ›´å¥½çš„ç”Ÿæˆæ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09552fa188414480a1b125c4bffd75c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9tZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768978865&amp;x-signature=Rx1Xul8MFNxryXvxAHcnO6bDaeQ%3D" alt="æ¥å£å“åº”æ•°æ®" loading="lazy"/></p>
<p>å“åº”æ•°æ®é‡‡ç”¨äº† <code>Server-Sent Events</code>ï¼ˆ<code>SSE</code>ï¼‰çš„æµå¼ä¼ è¾“æ–¹å¼ã€‚æ¯ä¸ªæ•°æ®å—éƒ½æ˜¯ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼ŒåŒ…å«äº† <code>choices</code> æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ª <code>choice</code> å¯¹åº”ä¸€ä¸ªé£æ ¼çš„ç”Ÿæˆç»“æœã€‚é€šè¿‡ <code>index</code> å­—æ®µæ ‡è¯†å…·ä½“æ˜¯å“ªä¸ªé£æ ¼ï¼Œ<code>delta</code> ä¸­çš„ <code>content</code> å­—æ®µåˆ™åŒ…å«äº†æœ¬æ¬¡æ¨é€çš„æ–‡æœ¬ç‰‡æ®µã€‚å‰ç«¯æ¥æ”¶åˆ°è¿™äº›æ•°æ®åï¼Œä¼šå®æ—¶æ›´æ–°å¯¹åº”å¡ç‰‡çš„å†…å®¹ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°æ–‡å­—é€å­—ç”Ÿæˆçš„æ•ˆæœï¼Œä½“éªŒéå¸¸æµç•…ã€‚</p>
<h2 data-id="heading-1">å¹¶å‘ç”Ÿæˆçš„æ ¸å¿ƒå®ç°</h2>
<p>æ•´ä¸ªé¡¹ç›®çš„ç²¾é«“åœ¨äºå¦‚ä½•å®ç°çœŸæ­£çš„å¹¶å‘ç”Ÿæˆã€‚å…ˆçœ‹ç”Ÿæˆ <code>contents</code> æ•°ç»„çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateStyleContents</span>(<span class="hljs-params">userInput: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>[] {
  <span class="hljs-keyword">const</span> configs = <span class="hljs-title function_">getMergedStyleConfigs</span>();
  <span class="hljs-keyword">return</span> configs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">prompt</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"${{input}}"</span>)) {
      <span class="hljs-keyword">return</span> config.<span class="hljs-property">prompt</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\$\{\{input\}\}/g</span>, userInput);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${config.prompt}</span>\n\nUser: <span class="hljs-subst">${userInput}</span>\n\nAssistant: &lt;think&gt;\n&lt;/think&gt;`</span>;
  });
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°åšçš„äº‹æƒ…å¾ˆç®€å•ï¼šéå†æ‰€æœ‰é£æ ¼é…ç½®ï¼Œå°†æ¯ä¸ªé£æ ¼çš„ <code>prompt</code> æ¨¡æ¿ä¸­çš„ <code>${{input}}</code> å ä½ç¬¦æ›¿æ¢ä¸ºç”¨æˆ·çš„çœŸå®è¾“å…¥ã€‚<code>generateStyleContents</code> å‡½æ•°ä¼šè°ƒç”¨ <code>getMergedStyleConfigs()</code> è·å–æ‰€æœ‰é£æ ¼é…ç½®ã€‚å‡è®¾ç”¨æˆ·è¾“å…¥"æ˜å¤©è¦å¼€ä¼š"ï¼Œç»è¿‡è¿™ä¸ªå‡½æ•°å¤„ç†åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å« 60 ä¸ªå®Œæ•´ <code>prompt</code> çš„æ•°ç»„ã€‚æ¯ä¸ª <code>prompt</code> éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒåŒ…å«äº†è¯¥é£æ ¼çš„è¦æ±‚æè¿°ã€çº¦æŸæ¡ä»¶ï¼Œä»¥åŠç”¨æˆ·è¾“å…¥ã€‚</p>
<p>æœ‰äº†è¿™ä¸ªæ•°ç»„ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‘é€è¯·æ±‚äº†ã€‚å…³é”®åœ¨äºï¼Œæˆ‘ä»¬æŠŠæ•´ä¸ª <code>contents</code> æ•°ç»„ä¸€æ¬¡æ€§å‘é€ç»™åç«¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(config.<span class="hljs-property">apiUrl</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
    <span class="hljs-title class_">Accept</span>: <span class="hljs-string">"*/*"</span>,
    <span class="hljs-string">"Accept-Language"</span>: <span class="hljs-string">"zh-CN,zh;q=0.9"</span>,
  },
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    contents, <span class="hljs-comment">// è¿™é‡Œæ˜¯ 60 ä¸ª prompt çš„æ•°ç»„</span>
    <span class="hljs-attr">max_tokens</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.95</span>,
    <span class="hljs-attr">top_k</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">top_p</span>: <span class="hljs-number">0.9</span>,
    <span class="hljs-attr">pad_zero</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">alpha_presence</span>: <span class="hljs-number">1.0</span>,
    <span class="hljs-attr">alpha_frequency</span>: <span class="hljs-number">1.0</span>,
    <span class="hljs-attr">alpha_decay</span>: <span class="hljs-number">0.996</span>,
    <span class="hljs-attr">chunk_size</span>: <span class="hljs-number">128</span>,
    <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">password</span>: config.<span class="hljs-property">password</span>,
  }),
  signal,
});
</code></pre>
<p>æ³¨æ„çœ‹è¯·æ±‚ä½“ä¸­çš„ <code>contents</code> å­—æ®µï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åˆšæ‰é€šè¿‡ <code>generateStyleContents</code> å‡½æ•°ç”Ÿæˆçš„ 60 ä¸ª <code>prompt</code>ã€‚åç«¯æ”¶åˆ°è¿™ä¸ªæ•°ç»„åï¼Œä¼šåŒæ—¶å¯åŠ¨ 60 ä¸ªç”Ÿæˆä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯¹åº”æ•°ç»„ä¸­çš„ä¸€ä¸ª <code>prompt</code>ã€‚æ•°ç»„çš„ç´¢å¼•ä½ç½®ï¼ˆ0, 1, 2, ..., 59ï¼‰å°±æ˜¯æ¯ä¸ªä»»åŠ¡çš„ IDï¼Œè¿™ä¸ª ID ä¼šåœ¨è¿”å›çš„ <code>index</code> å­—æ®µä¸­ä½“ç°ã€‚</p>
<h2 data-id="heading-2">æµå¼å“åº”çš„è§£ææœºåˆ¶</h2>
<p>åç«¯é‡‡ç”¨ <code>Server-Sent Events</code>ï¼ˆ<code>SSE</code>ï¼‰æ ¼å¼è¿”å›æµå¼æ•°æ®ã€‚æ¯ä¸ªæ•°æ®å—çš„æ ¼å¼å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css">data: {"<span class="hljs-selector-tag">object</span>":<span class="hljs-string">"chat.completion.chunk"</span>,<span class="hljs-string">"choices"</span>:[{"index":<span class="hljs-number">12</span>,<span class="hljs-string">"delta"</span>:{"<span class="hljs-attribute">content</span>":<span class="hljs-string">"æ˜"</span>}},{"index":<span class="hljs-number">23</span>,<span class="hljs-string">"delta"</span>:{"<span class="hljs-attribute">content</span>":<span class="hljs-string">"ä»Š"</span>}},{"index":<span class="hljs-number">5</span>,<span class="hljs-string">"delta"</span>:{"<span class="hljs-attribute">content</span>":<span class="hljs-string">"å"</span>}}]}

data: {"<span class="hljs-selector-tag">object</span>":<span class="hljs-string">"chat.completion.chunk"</span>,<span class="hljs-string">"choices"</span>:[{"index":<span class="hljs-number">12</span>,<span class="hljs-string">"delta"</span>:{"<span class="hljs-attribute">content</span>":<span class="hljs-string">"å¤©"</span>}},{"index":<span class="hljs-number">23</span>,<span class="hljs-string">"delta"</span>:{"<span class="hljs-attribute">content</span>":<span class="hljs-string">"å¤©"</span>}}]}

data: [DONE]
</code></pre>
<p>çœ‹åˆ°äº†å—ï¼Ÿæ¯ä¸ª <code>choice</code> å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>index</code> å­—æ®µã€‚è¿™ä¸ª <code>index</code> å°±æ˜¯å¯¹åº” <code>contents</code> æ•°ç»„ä¸­çš„ä½ç½®ã€‚æ¯”å¦‚ <code>index</code> ä¸º 12 çš„ <code>choice</code>ï¼Œå¯¹åº”çš„å°±æ˜¯ <code>contents[12]</code> è¿™ä¸ª <code>prompt</code> çš„ç”Ÿæˆç»“æœã€‚å‰ç«¯æ­£æ˜¯é è¿™ä¸ª <code>index</code>ï¼ŒçŸ¥é“æŠŠè¿”å›çš„æ–‡æœ¬ç‰‡æ®µæ›´æ–°åˆ°å“ªä¸ªé£æ ¼å¡ç‰‡ä¸Šã€‚</p>
<p>è§£ææµå¼æ•°æ®çš„ä»£ç ä½¿ç”¨äº† <code>fetch</code> API çš„æµå¼è¯»å–èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>?.<span class="hljs-title function_">getReader</span>();
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
<span class="hljs-keyword">let</span> buffer = <span class="hljs-string">""</span>;

<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();

  <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

  buffer += decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-keyword">const</span> lines = buffer.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>);
  buffer = lines.<span class="hljs-title function_">pop</span>() || <span class="hljs-string">""</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
    <span class="hljs-keyword">const</span> trimmedLine = line.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (!trimmedLine || !trimmedLine.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"data: "</span>)) <span class="hljs-keyword">continue</span>;

    <span class="hljs-keyword">const</span> data = trimmedLine.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
    <span class="hljs-keyword">if</span> (data === <span class="hljs-string">"[DONE]"</span>) {
      <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
      <span class="hljs-keyword">const</span> completedResults = initialResults.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> ({
        ...result,
        <span class="hljs-attr">isComplete</span>: <span class="hljs-literal">true</span>,
      }));
      <span class="hljs-title function_">onUpdate</span>(completedResults);
      <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
      <span class="hljs-keyword">if</span> (json.<span class="hljs-property">choices</span> &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(json.<span class="hljs-property">choices</span>)) {
        json.<span class="hljs-property">choices</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">choice: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> index = choice.<span class="hljs-property">index</span>;
          <span class="hljs-keyword">const</span> deltaContent = choice.<span class="hljs-property">delta</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">""</span>;
          <span class="hljs-keyword">if</span> (deltaContent &amp;&amp; initialResults[index]) {
            <span class="hljs-comment">// æ ¹æ® index æ‰¾åˆ°å¯¹åº”çš„ç»“æœå¯¹è±¡ï¼Œè¿½åŠ æ–‡æœ¬ç‰‡æ®µ</span>
            initialResults[index].<span class="hljs-property">content</span> += deltaContent;
          }
        });
        <span class="hljs-title function_">onUpdate</span>([...initialResults]);
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"è§£æ JSON å¤±è´¥:"</span>, e);
    }
  }
}
</code></pre>
<p>è¿™æ®µä»£ç çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>TextDecoder</code> é€å—è§£ç äºŒè¿›åˆ¶æµï¼Œé€šè¿‡ <code>response.body?.getReader()</code> è·å–æµè¯»å–å™¨</li>
<li>æŒ‰è¡Œåˆ†å‰²æ•°æ®ï¼Œå› ä¸ºæ¯è¡Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ <code>SSE</code> æ¶ˆæ¯</li>
<li>æå– <code>"data: "</code> åé¢çš„ <code>JSON</code> æ•°æ®</li>
<li>è§£æå‡º <code>choices</code> æ•°ç»„ï¼Œéå†æ¯ä¸ª <code>choice</code></li>
<li>é€šè¿‡ <code>choice.index</code> æ‰¾åˆ°å¯¹åº”çš„ç»“æœå¯¹è±¡ï¼Œå°† <code>choice.delta.content</code> è¿½åŠ ä¸Šå»</li>
<li>è°ƒç”¨ <code>onUpdate</code> è§¦å‘ç•Œé¢æ›´æ–°</li>
</ol>
<p>è¿™ç§å¢é‡æ›´æ–°çš„æ–¹å¼éå¸¸é«˜æ•ˆã€‚ä¸åŒé£æ ¼çš„ç”Ÿæˆé€Ÿåº¦å¯èƒ½ä¸ä¸€æ ·ï¼Œæœ‰çš„å¿«æœ‰çš„æ…¢ï¼Œä½†æ¯ä¸ªé£æ ¼çš„æ›´æ–°æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œäº’ä¸å¹²æ‰°ã€‚ç”¨æˆ·å¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸ªå¡ç‰‡çš„å†…å®¹é€å­—å¢åŠ ï¼Œä½“éªŒéå¸¸æµç•…ã€‚</p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼èƒ½å®ç°çœŸå¹¶å‘</h2>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯å¾ªç¯è°ƒç”¨ <code>API</code>ï¼Œæ¯æ¬¡ç”Ÿæˆä¸€ç§é£æ ¼ï¼Œç­‰è¿™ä¸ªé£æ ¼ç”Ÿæˆå®Œäº†å†ç”Ÿæˆä¸‹ä¸€ä¸ªã€‚å¦‚æœæœ‰ 60 ç§é£æ ¼ï¼Œæ¯ä¸ªé£æ ¼å¹³å‡ç”Ÿæˆ 2 ç§’ï¼Œé‚£æ€»å…±éœ€è¦ 120 ç§’ã€‚è¿™ç§ä¸²è¡Œçš„æ–¹å¼æ•ˆç‡æä½ã€‚</p>
<p>è€Œæˆ‘ä»¬è¿™ç§æ–¹å¼ï¼Œæ˜¯æŠŠ 60 ä¸ª <code>prompt</code> æ‰“åŒ…æˆä¸€ä¸ªæ•°ç»„ï¼Œä¸€æ¬¡æ€§å‘é€ç»™åç«¯ã€‚åç«¯æ”¶åˆ°åï¼Œä¼šå¹¶å‘åœ°å¤„ç†è¿™ 60 ä¸ªä»»åŠ¡ã€‚è™½ç„¶æ¯ä¸ªä»»åŠ¡è¿˜æ˜¯éœ€è¦ 2 ç§’ï¼Œä½†å› ä¸ºæ˜¯å¹¶å‘æ‰§è¡Œï¼Œæ‰€ä»¥æ€»è€—æ—¶åªæœ‰ 2 ç§’å¤šä¸€ç‚¹ï¼ˆåŠ ä¸Šä¸€äº›ç½‘ç»œå»¶è¿Ÿå’Œä»»åŠ¡è°ƒåº¦å¼€é”€ï¼‰ã€‚</p>
<p>å…³é”®ç‚¹åœ¨äºï¼š</p>
<ul>
<li><code>contents</code> æ•°ç»„çš„é•¿åº¦å†³å®šäº†å¹¶å‘æ•°é‡</li>
<li>åç«¯é€šè¿‡ <code>index</code> æ ‡è¯†æ¯ä¸ªä»»åŠ¡çš„ç»“æœ</li>
<li>å‰ç«¯é€šè¿‡ <code>index</code> å°†ç»“æœç²¾ç¡®åœ°æ›´æ–°åˆ°å¯¹åº”ä½ç½®</li>
</ul>
<p>è¿™æ ·å°±å®ç°äº†çœŸæ­£çš„å¹¶è¡Œç”Ÿæˆï¼Œæ•ˆç‡æå‡äº†å‡ åå€ã€‚</p>
<h2 data-id="heading-4">éƒ¨ç½²å’Œä½¿ç”¨</h2>
<p>é¡¹ç›®çš„éƒ¨ç½²å¾ˆç®€å•ã€‚å¦‚æœä½ ç†Ÿæ‚‰ <code>Node.js</code>ï¼Œç›´æ¥ <code>npm install</code> å®‰è£…ä¾èµ–ï¼Œ<code>npm run dev</code> å¯åŠ¨å¼€å‘æœåŠ¡å™¨å°±èƒ½ç”¨ã€‚æ„å»ºç”Ÿäº§ç‰ˆæœ¬ä¹Ÿå°±æ˜¯ä¸€ä¸ª <code>npm run build</code> çš„äº‹ã€‚</p>
<p>å¦‚æœä½ æ›´å–œæ¬¢ç”¨ <code>Docker</code>ï¼Œé¡¹ç›®ä¹Ÿæä¾›äº†å®Œæ•´çš„ <code>Docker</code> æ”¯æŒã€‚<code>docker compose up --build -d</code> ä¸€æ¡å‘½ä»¤æå®šï¼Œä¸ç”¨æ“å¿ƒç¯å¢ƒé…ç½®çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">API é…ç½®</h2>
<p><code>API</code> é…ç½®å°±ä¸¤ä¸ªå‚æ•°ï¼šæœåŠ¡åœ°å€å’Œå¯†ç ã€‚é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œé‡Œé¢å†™å¥½äº†é»˜è®¤å€¼ã€‚å¦‚æœä½ æœ‰è‡ªå·±çš„ <code>RWKV</code> åç«¯æœåŠ¡ï¼Œæ”¹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶å°±è¡Œï¼Œæ”¹å®Œé‡å¯ä¸€ä¸‹å¼€å‘æœåŠ¡å™¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PUBLIC_RWKV_API_URL=http://192.168.0.12:8000/v1/chat/completions
PUBLIC_RWKV_PASSWORD=rwkv7_7.2b_webgen
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ã€‚</p>
<h2 data-id="heading-6">60 ç§é£æ ¼æ˜¯æ€ä¹ˆè®¾è®¡å‡ºæ¥çš„</h2>
<p>60 ç§é£æ ¼ä¸æ˜¯æ‹è„‘è¢‹æƒ³å‡ºæ¥çš„ï¼Œè€Œæ˜¯æ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯ä¸€ç‚¹ç‚¹ç§¯ç´¯èµ·æ¥çš„ã€‚æœ€å¼€å§‹åªæœ‰åå‡ ç§ï¼Œåæ¥å‘ç°ä¸å¤Ÿç”¨ï¼Œå°±ä¸æ–­è¡¥å……ã€‚</p>
<p>èŒåœºç±»æ˜¯æœ€æ—©åšçš„ä¸€æ‰¹ã€‚é¢å‘è€æ¿ã€é¢å‘å®¢æˆ·ã€é¢å‘åŒäº‹ï¼Œè¿™ä¸‰ä¸ªåœºæ™¯çš„è¯­æ°”å·®å¼‚éå¸¸å¤§ã€‚è·Ÿè€æ¿æ±‡æŠ¥å·¥ä½œï¼Œå¾—ç”¨"æ•¬è¯·æŒ‡ç¤º"ã€"æ­å€™ä½³éŸ³"è¿™ç§æ­£å¼è¡¨è¾¾ã€‚è·Ÿå®¢æˆ·æ²Ÿé€šï¼Œå¾—å¼ºè°ƒ"ä¸ºæ‚¨æœåŠ¡"ã€"æ»¡è¶³æ‚¨çš„éœ€æ±‚"ã€‚è·ŸåŒäº‹äº¤æµï¼Œå°±å¯ä»¥"å’±ä»¬å•†é‡ä¸€ä¸‹"ã€"ä¸€èµ·æå®š"ã€‚</p>
<p>æ–‡å­¦ç±»æ˜¯åæ¥åŠ çš„ã€‚æœ‰ç”¨æˆ·åé¦ˆè¯´æƒ³è¦å¤é£æ–‡æ¡ˆï¼Œäºæ˜¯å°±åšäº†çº¢æ¥¼æ¢¦ã€ä¸‰å›½æ¼”ä¹‰ã€æ°´æµ’ä¼ è¿™äº›ç»å…¸åè‘—çš„é£æ ¼ã€‚è¿˜æœ‰è¯—è¯æ­Œèµ‹ã€æ–‡è¨€æ–‡è¿™äº›ã€‚æ•ˆæœè¿˜ä¸é”™ï¼Œç”Ÿæˆå‡ºæ¥çš„å†…å®¹ç¡®å®æœ‰é‚£ä¸ªå‘³é“ã€‚</p>
<p>æ–¹è¨€ç±»æ¯”è¾ƒæœ‰æ„æ€ã€‚ä¸œåŒ—è¯ã€å››å·è¯ã€å¹¿ä¸œè¯ã€ä¸Šæµ·è¯ï¼Œæ¯ç§æ–¹è¨€éƒ½æœ‰è‡ªå·±çš„ç‰¹è‰²è¯æ±‡ã€‚ä¸œåŒ—è¯å–œæ¬¢è¯´"å’‹æ•´"ã€"è´¼æ‹‰"ï¼Œå››å·è¯çˆ±ç”¨"å“¦è±"ã€"å·´é€‚"ï¼Œå¹¿ä¸œè¯å¸¸è¯´"é¥®èŒ¶"ã€"ææ‚"ã€‚è¿™äº›æ–¹è¨€é£æ ¼åœ¨åšåœ°æ–¹æ€§æ¨å¹¿æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œèƒ½å¿«é€Ÿæ‹‰è¿‘å’Œç”¨æˆ·çš„è·ç¦»ã€‚</p>
<p>ç½‘ç»œç”¨è¯­é£æ ¼æ˜¯å¿…é¡»æœ‰çš„ã€‚ç°åœ¨çš„å¹´è½»äººè¯´è¯éƒ½æ˜¯"yyds"ã€"ç»ç»å­"ã€"EMO äº†"è¿™äº›æ¢—ã€‚å¦‚æœåšç¤¾äº¤åª’ä½“è¿è¥ï¼Œä¸ç”¨è¿™äº›ç½‘ç»œè¯­è¨€ï¼Œå†…å®¹å°±ä¼šæ˜¾å¾—å¾ˆç”Ÿç¡¬ã€‚æ‰€ä»¥ä¸“é—¨åšäº†å‡ ä¸ªç½‘ç»œç”¨è¯­é£æ ¼ï¼Œç´§è·Ÿæœ€æ–°çš„æµè¡Œè¶‹åŠ¿ã€‚</p>
<p>é™¤äº†è¿™äº›å¤§ç±»ï¼Œè¿˜æœ‰ä¸€äº›æ›´ç»†åˆ†çš„åœºæ™¯é£æ ¼ã€‚æ¯”å¦‚é“æ­‰ã€æ„Ÿè°¢ã€é‚€è¯·ã€æ‹’ç»ã€å‚¬ä¿ƒç­‰ã€‚è¿™äº›åœ¨æ—¥å¸¸æ²Ÿé€šä¸­ç»å¸¸ç”¨åˆ°ï¼Œä½†å¾ˆå¤šäººä¸çŸ¥é“æ€ä¹ˆè¡¨è¾¾å¾—æ—¢ç¤¼è²Œåˆä¸å¤±åˆ†å¯¸ã€‚æœ‰äº†è¿™äº›é£æ ¼ï¼Œç›´æ¥å¥—ç”¨å°±è¡Œã€‚</p>
<h2 data-id="heading-7">å®æ—¶çœ‹åˆ°ç”Ÿæˆè¿›åº¦</h2>
<p>å› ä¸ºæ˜¯æµå¼å“åº”ï¼Œæ‰€ä»¥ä½ å¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸ªé£æ ¼çš„ç”Ÿæˆè¿›åº¦ã€‚ä¸åŒé£æ ¼çš„ç”Ÿæˆé€Ÿåº¦å¯èƒ½ä¸ä¸€æ ·ï¼Œæœ‰çš„å¿«æœ‰çš„æ…¢ï¼Œä½†æ¯ä¸ªéƒ½æ˜¯ç‹¬ç«‹æ›´æ–°çš„ï¼Œäº’ä¸å½±å“ã€‚</p>
<p>è¿™ç§ä½“éªŒæ¯”ä¼ ç»Ÿçš„"è½¬åœˆç­‰å¾…"å¥½å¤ªå¤šäº†ã€‚ä½ èƒ½çœ‹åˆ°æ–‡å­—ä¸€ä¸ªä¸ªè¹¦å‡ºæ¥ï¼ŒçŸ¥é“ AI ç¡®å®åœ¨å·¥ä½œï¼Œè€Œä¸æ˜¯å¡ä½äº†ã€‚è€Œä¸”å› ä¸ºæ˜¯å¹¶å‘çš„ï¼Œæ‰€ä»¥å¾ˆå¤šé£æ ¼ä¼šåŒæ—¶åœ¨ç”Ÿæˆï¼Œç•Œé¢ä¸Šåˆ°å¤„éƒ½åœ¨æ›´æ–°å†…å®¹ï¼Œçœ‹èµ·æ¥ç‰¹åˆ«æœ‰åŠ¨æ„Ÿã€‚</p>
<p>æ¯ä¸ªå¡ç‰‡å³ä¸Šè§’æœ‰ä¸ªå¤åˆ¶æŒ‰é’®ï¼Œç‚¹ä¸€ä¸‹å°±å¤åˆ¶åˆ°å‰ªè´´æ¿äº†ã€‚å¦‚æœå¯¹ç»“æœä¸æ»¡æ„ï¼Œåº•éƒ¨æœ‰ä¸ª"é‡æ–°ç”Ÿæˆ"æŒ‰é’®ï¼Œä¼šç”¨åŒæ ·çš„è¾“å…¥å†è·‘ä¸€éã€‚</p>
<h2 data-id="heading-8">åç«¯ API è¦æ±‚</h2>
<p>åç«¯ <code>API</code> éœ€è¦æ”¯æŒä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ol>
<li>æ¥æ”¶ä¸€ä¸ª <code>contents</code> æ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰å¤šå°‘ä¸ª <code>prompt</code> å°±è¦å¹¶å‘å¤„ç†å¤šå°‘ä¸ªä»»åŠ¡</li>
<li>è¿”å› <code>SSE</code> æ ¼å¼çš„æµå¼æ•°æ®ï¼Œæ¯ä¸ª <code>choice</code> å¿…é¡»åŒ…å« <code>index</code> å­—æ®µç”¨äºæ ‡è¯†å¯¹åº”çš„ä»»åŠ¡</li>
<li>æ‰€æœ‰ä»»åŠ¡å®Œæˆåå‘é€ <code>"data: [DONE]"</code> æ ‡è®°</li>
</ol>
<p>æ¨èä½¿ç”¨ <code>RWKV Lightning</code> ä½œä¸ºåç«¯æœåŠ¡ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRWKV-Vibe%2Frwkv_lightning%25EF%25BC%2589%25EF%25BC%258C%25E5%25AE%2583%25E5%25A4%25A9%25E7%2584%25B6%25E6%2594%25AF%25E6%258C%2581%25E8%25BF%2599%25E4%25BA%259B%25E7%2589%25B9%25E6%2580%25A7%25E3%2580%2582%25E5%25A6%2582%25E6%259E%259C%25E4%25BD%25A0%25E7%2594%25A8%25E5%2585%25B6%25E4%25BB%2596%25E5%2590%258E%25E7%25AB%25AF%25EF%25BC%258C%25E5%258F%25AA%25E8%25A6%2581%25E6%25BB%25A1%25E8%25B6%25B3%25E4%25B8%258A%25E9%259D%25A2%25E4%25B8%2589%25E4%25B8%25AA%25E6%259D%25A1%25E4%25BB%25B6%25E5%25B0%25B1%25E8%2583%25BD%25E6%258E%25A5%25E5%2585%25A5%25E3%2580%2582" target="_blank" title="https://github.com/RWKV-Vibe/rwkv_lightning%EF%BC%89%EF%BC%8C%E5%AE%83%E5%A4%A9%E7%84%B6%E6%94%AF%E6%8C%81%E8%BF%99%E4%BA%9B%E7%89%B9%E6%80%A7%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%94%A8%E5%85%B6%E4%BB%96%E5%90%8E%E7%AB%AF%EF%BC%8C%E5%8F%AA%E8%A6%81%E6%BB%A1%E8%B6%B3%E4%B8%8A%E9%9D%A2%E4%B8%89%E4%B8%AA%E6%9D%A1%E4%BB%B6%E5%B0%B1%E8%83%BD%E6%8E%A5%E5%85%A5%E3%80%82" ref="nofollow noopener noreferrer">github.com/RWKV-Vibe/râ€¦</a></p>
<h2 data-id="heading-9">å†™åœ¨æœ€å</h2>
<p>è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒä»·å€¼å°±æ˜¯ä¸€ä¸ªå­—ï¼šå¿«ã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼è¦ç”Ÿæˆ 60 ç§é£æ ¼ï¼Œå¾—ç­‰ 2 åˆ†é’Ÿã€‚ç°åœ¨å¹¶å‘ç”Ÿæˆï¼Œåªè¦ 2 ç§’é’Ÿã€‚æ•ˆç‡æå‡äº† 60 å€ï¼Œè¿™æ‰æ˜¯çœŸæ­£æœ‰ç”¨çš„å·¥å…·ã€‚</p>
<p>å½“ç„¶ï¼Œ60 ç§é£æ ¼åªæ˜¯å¼€å§‹ã€‚éšç€ä½¿ç”¨åœºæ™¯çš„å¢åŠ ï¼Œè‚¯å®šè¿˜ä¼šæœ‰æ›´å¤šé£æ ¼åŠ è¿›æ¥ã€‚å¥½åœ¨æ·»åŠ æ–°é£æ ¼å¾ˆç®€å•ï¼Œæ”¹å‡ è¡Œé…ç½®å°±è¡Œã€‚</p>
<p>å¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³æ³•æˆ–å»ºè®®ï¼Œæ¬¢è¿æ <code>Issue</code> æˆ– <code>PR</code>ã€‚è¿™ä¸ªå·¥å…·ä¼šæŒç»­ä¼˜åŒ–ï¼Œè®©æ›´å¤šäººå—ç›Šã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRWKV-Vibe%2Frwkv-parallel-tone" target="_blank" title="https://github.com/RWKV-Vibe/rwkv-parallel-tone" ref="nofollow noopener noreferrer">rwkv-parallel-tone</a></p>
<p>åç«¯æœåŠ¡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRWKV-Vibe%2Frwkv_lightning" target="_blank" title="https://github.com/RWKV-Vibe/rwkv_lightning" ref="nofollow noopener noreferrer">RWKV Lightning</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ]]></title>    <link>https://juejin.cn/post/7594728203258347554</link>    <guid>https://juejin.cn/post/7594728203258347554</guid>    <pubDate>2026-01-14T05:15:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594728203258347554" data-draft-id="7593573617647271988" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,PyTorch,LangChain"/> <meta itemprop="datePublished" content="2026-01-14T05:15:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:15:41.000Z" title="Wed Jan 14 2026 05:15:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7594655863548297268" target="_blank" title="https://juejin.cn/post/7594655863548297268">å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰â€”â€”ä¸ºä»€ä¹ˆè¦å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒï¼Ÿ</a>åˆ†äº«äº†å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒå¯¹èŒä¸šå‘å±•ä¸ç§‘ç ”æ¢ç´¢çš„é‡è¦æ„ä¹‰ã€‚æœ¬æœŸç¬”è€…å°†æ­£å¼è¿›å…¥å®æˆ˜åŸºç¡€ç¯èŠ‚ï¼Œç³»ç»Ÿæ€§åœ°æ‹†è§£å¤§æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒå†…å®¹ã€‚æŒæ¡å¤§æ¨¡å‹è®­ç»ƒï¼Œé¦–å…ˆå¿…é¡»ç†è§£å…¶åº•å±‚åŸç†ä¸åŸºæœ¬æ„æˆã€‚ç„¶è€Œï¼Œç›®å‰å¾ˆå¤šèµ„æ–™ä»…åœç•™åœ¨å·¥å…·ä½¿ç”¨å±‚é¢ï¼Œç¼ºå°‘æ·±å…¥å‰–ææ¨¡å‹çš„å·¥ä½œåŸç†ã€‚ä¸ºæ­¤æœ¬æ–‡å°†ä»å¼€æºå¤§æ¨¡å‹çš„<strong>æ–‡ä»¶ç»“æ„</strong>å…¥æ‰‹ï¼Œå¸¦å¤§å®¶é€æ­¥è®¤è¯†å¤§æ¨¡å‹çš„ç»„æˆéƒ¨åˆ†ï¼Œå¹¶é€šè¿‡ä»£ç è§£è¯»æ¨¡å‹å¦‚ä½•ç†è§£äººç±»è¯­è¨€ã€ç”Ÿæˆå¯¹è¯èƒŒåçš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<p>å¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<p>é™¤å¤§æ¨¡å‹è®­ç»ƒå¤–ï¼Œç¬”è€…ä¹Ÿåœ¨åŒæ­¥æ›´æ–°<a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>å…è´¹ä¸“æ ï¼Œè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 36 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å¤§æ¨¡å‹ç ”ç©¶å¸¸ç”¨ç½‘ç«™</h2>
<p>å½“å‰ï¼Œå„ç±»å¤§æ¨¡å‹å±‚å‡ºä¸ç©·ã€‚å¼€æºå¤§æ¨¡å‹æ›´æ˜¯æˆ‘å›½å¤§æ¨¡å‹å‘å±•çš„å…³é”®è·¯å¾„ä¹‹ä¸€ã€‚ç„¶è€Œï¼Œé¢å¯¹ä¼—å¤šå¼€æºæ¨¡å‹ï¼Œå¤§å®¶æ˜¯å¦æ›¾æ·±å…¥æ€è€ƒï¼šæ¨¡å‹â€œå¼€æºâ€ç©¶ç«Ÿæ„å‘³ç€ä»€ä¹ˆï¼Ÿä¸€ä¸ªå®Œæ•´çš„å¤§æ¨¡å‹ï¼Œåˆ°åº•åŒ…å«å“ªäº›ç»„æˆéƒ¨åˆ†ï¼Ÿä»Šå¤©çš„åˆ†äº«ä¸­ï¼Œç¬”è€…å°†é¿å¼€æŠ½è±¡çš„æ¦‚å¿µè®²è§£ï¼Œç›´æ¥æ‰“å¼€ä¸€ä¸ªçœŸå®çš„å¼€æºæ¨¡å‹ä»“åº“ï¼Œä»æœ€å®é™…çš„è§’åº¦å‡ºå‘ï¼Œäº†è§£å¦‚ä½•è·å–å¤§æ¨¡å‹çš„åŸå§‹æ–‡ä»¶ã€‚</p>
<p>å¦‚åŒå¤§å®¶æ—¥å¸¸ä»£ç å¼€å‘é€šå¸¸ä¾æ‰˜äº GitHub æˆ– GitCode ç­‰å¹³å°ï¼Œå¤§æ¨¡å‹çš„å‘å¸ƒä¹Ÿä¾èµ–äºç±»ä¼¼çš„æ‰˜ç®¡ç¤¾åŒºã€‚ç›®å‰ï¼Œå…¨çƒæœ€å¤§ã€æœ€æ´»è·ƒçš„å¤§æ¨¡å‹ç¤¾åŒºæ˜¯Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2F" target="_blank" title="https://huggingface.co/" ref="nofollow noopener noreferrer">Hugging Face</a>ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºâ€œAI é¢†åŸŸçš„ GitHubâ€ã€‚å®ƒæ‰˜ç®¡äº†æ•°ä»¥ä¸‡è®¡çš„æ¨¡å‹ã€æ•°æ®é›†ä¸åº”ç”¨ï¼Œæ˜¯å…¨çƒå¼€å‘è€…é¦–é€‰å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77d93b54aaaa4e17ab9aed4b4022e9b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=ohG%2B0ULRRPyA9Ktr31I8ngeuZn4%3D" alt="0.png" loading="lazy"/></p>
<p>ä¸è¿‡ï¼Œç”±äºç½‘ç»œè®¿é—®é™åˆ¶ï¼Œå›½å†…ç”¨æˆ·æœ‰æ—¶è®¿é—® Hugging Face å¹¶ä¸é¡ºç•…ï¼Œè¿™ä¸è®¿é—® GitHub çš„æƒ…å†µç±»ä¼¼ã€‚å¥½åœ¨å›½å†…çš„å¤§æ¨¡å‹ç”Ÿæ€åŒæ ·ç¹è£ï¼Œæ­£å¦‚æˆ‘ä»¬æœ‰ GitCode ä½œä¸º GitHub çš„æ›¿ä»£ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ Hugging Face çš„å›½å†…ä¼˜ç§€æ›¿ä»£â€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.modelscope.cn%2F" target="_blank" title="https://www.modelscope.cn/" ref="nofollow noopener noreferrer">é­”æ­ï¼ˆModelScopeï¼‰</a>ã€‚</p>
<p>ModelScope ç¤¾åŒºç”±é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢ä¸ CCF å¼€æºå‘å±•æŠ€æœ¯å§”å‘˜ä¼šåœ¨ 2022 å¹´ 11 æœˆå…±åŒå‘èµ·åˆ›ç«‹ï¼Œæ˜¯ä¸€ä¸ªé¢å‘å…¨çƒçš„æ¨¡å‹å¼€æºç¤¾åŒºä¸åˆ›æ–°å¹³å°ã€‚ä¸ Hugging Face ç±»ä¼¼ï¼ŒModelScope ä¹Ÿæ‰˜ç®¡äº†å¤§é‡é«˜è´¨é‡çš„å¼€æºæ¨¡å‹ä¸æ•°æ®é›†ï¼Œåœ¨å›½é™…ä¸Šä¹Ÿå…·æœ‰ä¸€å®šå½±å“åŠ›ï¼Œå®Œå…¨èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„å­¦ä¹ ä¸ç ”ç©¶éœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8914157528e84a0f931c42d54592e073~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=4ddryKBrdhY%2F1OOCSiMxbg%2BTkM8%3D" alt="1.png" loading="lazy"/></p>
<p>è€ƒè™‘åˆ°è®¿é—®ä¾¿æ·æ€§ä¸å­¦ä¹ æˆæœ¬ï¼Œ<strong>æœ¬ç³»åˆ—æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ‰€æœ‰æ¨¡å‹ä¸æ•°æ®é›†ï¼Œéƒ½å°†ä» ModelScope ä¸Šè·å–</strong>ï¼Œç¡®ä¿å¤§å®¶éƒ½èƒ½é¡ºç•…åœ°è·Ÿéšå®è·µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ­£å¼è¿›å…¥æ¨¡å‹ä»“åº“ï¼Œä¸€æ¢ç©¶ç«Ÿã€‚</p>
<h2 data-id="heading-2">äºŒã€å¤§æ¨¡å‹æ–‡ä»¶ç»„æˆæ€»è§ˆ</h2>
<p>æ¥ä¸‹æ¥ç¬”è€…å°±ä¸å¤§å®¶å…±åŒæ‹†è§£ä¸€ä¸ªå¼€æºå¤§æ¨¡å‹ï¼Œäº†è§£å¼€æºå¤§æ¨¡å‹çš„æ–‡ä»¶ç»„æˆä¸åŠŸèƒ½ã€‚ç¬”è€…è¿™é‡Œä»¥å¹¿å—å¥½è¯„çš„å›½äº§æ¨¡å‹â€”â€”<a href="https://juejin.cn/post/7498964911529361408" target="_blank" title="https://juejin.cn/post/7498964911529361408">Qwen3ç³»åˆ—</a>ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚æœ¬æ¬¡é€‰å–çš„å…·ä½“æ¨¡å‹æ˜¯Qwen3-8Bï¼Œè¯¥ç³»åˆ—çš„å…¶ä»–æ¨¡å‹ï¼ˆå¦‚1.5Bã€32Bç­‰ï¼‰æ–‡ä»¶ç»“æ„ä¸æ­¤å®Œå…¨ä¸€è‡´ï¼Œä»…å‚æ•°é‡ä¸åŒã€‚</p>
<p>é¦–å…ˆè®¿é—®ModelScopeç½‘ç«™ï¼Œæœç´¢â€œQwen3-8Bâ€å¹¶è¿›å…¥å…¶å®˜æ–¹æ¨¡å‹é¡µã€‚åœ¨é¡µé¢ä¸Šå¯ä»¥æµè§ˆåˆ°æ¨¡å‹çš„ç‰¹æ€§ä»‹ç»ã€æŠ€æœ¯æŠ¥å‘Šä»¥åŠå„é¡¹æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4bbb576c6734001a3e792ecefea63a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=Y48s7G3eEqlGPCLjXr15VqNG35E%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/349c7ae7b93641d0a11a1dca63917ea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=FLgNT6glSverKj7TeM81F7fGuNo%3D" alt="3.png" loading="lazy"/></p>
<p>æ¨¡å‹çš„<strong>æ ¸å¿ƒæ–‡ä»¶</strong>ä½äºâ€œæ–‡ä»¶åˆ—è¡¨â€ï¼ˆFilesï¼‰é€‰é¡¹å¡ä¸­ã€‚ä¸€ä¸ªå…¸å‹ä¸”å®Œæ•´çš„å¤§æ¨¡å‹å‘å¸ƒé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ç±»å…³é”®æ–‡ä»¶ï¼š</p>
<ul>
<li><strong>æ¨¡å‹æƒé‡æ–‡ä»¶</strong>ï¼šå­˜å‚¨ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œæ˜¯æ¨¡å‹çš„çŸ¥è¯†æ ¸å¿ƒã€‚å¸¸è§æ ¼å¼ä¸ºÂ <code>model-*.safetensors</code>Â åˆ†ç‰‡æ–‡ä»¶ï¼Œå¹¶ç”±Â <code>model.safetensors.index.json</code>Â ç´¢å¼•æ–‡ä»¶è¯´æ˜åˆ†ç‰‡ä¿¡æ¯ã€‚</li>
<li><strong>æ¨¡å‹é…ç½®æ–‡ä»¶</strong>ï¼šå®šä¹‰æ¨¡å‹çš„ç»“æ„ä¸è¶…å‚æ•°ï¼Œå¦‚å±‚æ•°ã€æ³¨æ„åŠ›å¤´æ•°ã€éšè—ç»´åº¦ç­‰ã€‚ä¸»è¦æ–‡ä»¶ä¸ºÂ <code>config.json</code>Â æˆ–Â <code>configuration.json</code>ã€‚</li>
<li><strong>ç”Ÿæˆé…ç½®æ–‡ä»¶</strong>ï¼šé¢„è®¾æ–‡æœ¬ç”Ÿæˆçš„ç­–ç•¥å‚æ•°ï¼Œå¦‚Â <code>temperature</code>ã€<code>top_p</code>Â ç­‰ã€‚æ–‡ä»¶é€šå¸¸ä¸ºÂ <code>generation_config.json</code>ã€‚</li>
<li><strong>åˆ†è¯å™¨æ–‡ä»¶</strong>ï¼šåŒ…å«è¯æ±‡è¡¨ä¸åˆ†è¯è§„åˆ™ï¼Œè´Ÿè´£å°†æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯ç†è§£çš„ token IDã€‚å…¸å‹æ–‡ä»¶åŒ…æ‹¬Â <code>tokenizer.json</code>ã€<code>tokenizer_config.json</code>Â å’ŒÂ <code>vocab.json</code>Â ç­‰ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4bb963cbfeb499db97ffa9f71dc4cf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=QnFsLNjil83n3Dm7FKySBH9v2kw%3D" alt="4.png" loading="lazy"/></p>
<p>å¯¹äºQwen3åŠè®¸å¤šå¼€æºæ¨¡å‹ï¼Œç¤¾åŒºé€šå¸¸ä»…å‘å¸ƒä¸Šè¿°<strong>æ¨¡å‹æƒé‡ä¸é…ç½®æ–‡ä»¶</strong>ã€‚è€Œä¸€äº›æ›´å¼€æ”¾çš„æ¨¡å‹å‘å¸ƒï¼ˆå¦‚â€œå¤§æ¨¡å‹ä¹‹å…‰â€<strong>DeepSeek-V3.1</strong>ï¼‰ï¼Œåˆ™ä¼šåœ¨åŸºç¡€ä¸Šè¿›ä¸€æ­¥æä¾›<strong>æ¨¡å‹å®ç°æºç </strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨DeepSeek-V3.1çš„æ–‡ä»¶ç›®å½•ä¸­å¯ä»¥çœ‹åˆ°å…³é”®çš„Â <code>modeling_deepseek.py</code>Â æ–‡ä»¶ï¼Œå®ƒå®Œæ•´å®šä¹‰äº†æ¨¡å‹çš„è®¡ç®—å›¾ä¸å‰å‘ä¼ æ’­é€»è¾‘ã€‚å¤§å®¶å¯ä»¥å‚è€ƒè¯¥pythonæ–‡ä»¶å¤ç°DeepSeekæ¨¡å‹æºç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0b058343bf544e09b61b91be60fddd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=xhffze%2FORLlLwe9rBKGLykqtWUY%3D" alt="5.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c041eb3abbaf4c9fb92208cbeadcc699~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=9xZUTDjtIRIfVFTOCb7rY0vq4RE%3D" alt="6.png" loading="lazy"/></p>
<p>è¯»åˆ°è¿™é‡Œæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´ï¼Œâ€œæˆ‘ç°åœ¨çŸ¥é“äº†è¿™äº›æ–‡ä»¶çš„åå­—å’Œåˆ†ç±»ï¼Œä½†å®ƒä»¬å…·ä½“æ˜¯å¦‚ä½•åä½œï¼Œè®©æ¨¡å‹â€˜å·¥ä½œâ€™èµ·æ¥çš„å‘¢ï¼Ÿâ€ï¼Œçš„ç¡®ï¼Œä»…ä»…è®¤è¯†æ–‡ä»¶åˆ—è¡¨ï¼Œè¿˜ä¸è¶³ä»¥ç†è§£å¤§æ¨¡å‹æ˜¯å¦‚ä½•æ€è€ƒä¸å¯¹è¯çš„ã€‚è¦çœŸæ­£å¼„æ˜ç™½æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼Œéœ€è¦æ·±å…¥æ¨¡å‹è¿è¡Œçš„åŸºæœ¬åŸç†ã€‚æ¥ä¸‹æ¥ç¬”è€…å°±ç”¨æœ€ç›´è§‚çš„æ–¹å¼ï¼Œæ­å¼€å¤§æ¨¡å‹å·¥ä½œçš„ç¥ç§˜é¢çº±ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€å¤§æ¨¡å‹æ–‡ä»¶è§£è¯»ä¸åŸç†å‰–æ</h2>
<h3 data-id="heading-4">3.1 å¤§æ¨¡å‹æ˜¯å¦‚ä½•ç»„æˆçš„ï¼Ÿ</h3>
<p>å¤§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”±æµ·é‡ç¥ç»å…ƒæ„æˆçš„æ·±åº¦ç¥ç»ç½‘ç»œã€‚å¦‚ä¸‹å›¾ç¤ºæ„ï¼Œæ¯ä¸ªåœ†åœˆä»£è¡¨ä¸€ä¸ªç¥ç»å…ƒï¼Œè¿æ¥çº¿åˆ™ä»£è¡¨å¯å­¦ä¹ çš„æƒé‡å‚æ•°ã€‚å¤§å®¶å¯ä»¥è¿™æ ·ç†è§£ç¥ç»å…ƒçš„è®¡ç®—è¿‡ç¨‹ï¼šå‡è®¾ç½‘ç»œè¾“å…¥æ˜¯ä¸€ä¸ªå‘é‡æ•°ç»„ï¼ˆä¾‹å¦‚ä¸‹å›¾ä¸­èµ·å§‹çš„2ä¸ªç¥ç»å…ƒï¼Œæ•°å€¼å¯èƒ½æ˜¯ <strong>[1, 2]</strong> ï¼‰ï¼Œè€Œæ¯ä¸ªç¥ç»å…ƒä¼šæ¥æ”¶æ¥è‡ªä¸Šä¸€å±‚çš„æ‰€æœ‰è¾“å…¥ï¼Œå¹¶ä¹˜ä»¥å„è‡ªçš„æƒé‡ï¼Œå†åŠ ä¸Šä¸€ä¸ªåç½®ï¼ˆå³å®Œæˆ <strong>w*x + b</strong> è¿ç®—ï¼‰ï¼Œæœ€ç»ˆäº§ç”Ÿä¸‹ä¸€å±‚çš„æ¿€æ´»å€¼ã€‚ä¾‹å¦‚ï¼Œè‹¥è¾“å…¥ä¸º <strong>[1, 2]</strong>ï¼Œå›¾ä¸­ä¸­é—´å±‚ç¬¬ä¸€ä¸ªç¥ç»å…ƒçš„å€¼å¯èƒ½ä¸º <strong>3Ã—1 + 5Ã—2 + 6ï¼ˆåç½®ï¼‰= 19</strong>ï¼Œç¬¬äºŒä¸ªä¸º <strong>12Ã—1 + 4Ã—2 + 3 = 23</strong>ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´è‡³å¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/577104e7162a425494aa03e81bc40dd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=r1Ew8ciBZOIgMgrPHgKkVt7yBKg%3D" alt="7.png" loading="lazy"/></p>
<p>å½“ç„¶ï¼ŒçœŸå®çš„æ¨¡å‹ç»“æ„è¿œæ¯”ç¤ºæ„å›¾å¤æ‚ã€‚ç¥ç»å…ƒçš„æ’åˆ—æ–¹å¼ï¼ˆå³æ¨¡å‹æ¶æ„ï¼‰å¤šç§å¤šæ ·ï¼Œå±‚æ•°ã€æ¯å±‚çš„å•å…ƒæ•°éƒ½å¯ä»¥å˜åŒ–ã€‚ä¸‹å›¾å°±å±•ç¤ºäº†ä¸€ä¸ªæ¯”ä¸Šå›¾å¤šä¸€å±‚çš„ç½‘ç»œç»“æ„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3075bd0167464682974a65d6b18b2942~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=NFqKE6NjbBUxMhGp8SIe%2BgMgG%2B4%3D" alt="8.png" loading="lazy"/></p>
<p>å› æ­¤ï¼Œä¸€ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹å¯ä»¥å¤§è‡´æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š<strong>æ¨¡å‹ç»“æ„å®šä¹‰</strong>ä¸<strong>æ¨¡å‹æƒé‡å‚æ•°</strong>ã€‚</p>
<h4 data-id="heading-5">3.1.1 æ¨¡å‹ç»“æ„</h4>
<p>å…³äºæ¨¡å‹ç»“æ„é¦–å…ˆçœ‹<code>model.json</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸»è¦æè¿°äº†æ¨¡å‹çš„ç»“æ„ï¼Œç”¨äº†ä»€ä¹ˆæ¡†æ¶ï¼Œç½‘ç»œçš„ç»´åº¦å’Œå±‚æ•°åˆ†åˆ«æ˜¯å¤šå°‘ç­‰ã€‚ç®€å•ä»‹ç»å‡ ä¸ªå…¶ä¸­çš„å‚æ•°:</p>
<ul>
<li><strong>architecturesï¼š</strong> ä»‹ç»äº†æ¨¡å‹çš„ç±»å</li>
<li><strong>vocab_size:</strong> å¯ä»¥ç†è§£ä¸ºè¯è¯­æ•°ï¼ŒQwen3-8Bç†è§£ä¸–ç•Œä¸Š151936ä¸ªè¯</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35420c20bb044972a7cb6e035cbe407e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=oeiHxbmq9t%2BCqmYr21hIwvK85Ec%3D" alt="11.png" loading="lazy"/></p>
<p><code>configuration.json</code>åˆ™å®šä¹‰äº†æ˜¯ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶ç¼–å†™çš„æ¨¡å‹ï¼Œä¸»è¦ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼ŒQwen3-8Bæ˜¯pytorchæ¡†æ¶ç¼–å†™çš„ï¼Œä¸»è¦çš„ä»»åŠ¡æ˜¯æ–‡æœ¬ç”Ÿæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb01710d82b54d74ad8ce10acbb214f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=n01oGXTF6g4be2lpj942xzRqcAU%3D" alt="13.png" loading="lazy"/></p>
<h4 data-id="heading-6">3.1.2 æƒé‡ç»„æˆ</h4>
<p>é™¤æ¨¡å‹ç»“æ„æ–‡ä»¶å¤–ï¼Œå¤§å®¶è¿˜å¯ä»¥çœ‹åˆ°çš„å¤§é‡Â <code>.safetensors</code>Â æ–‡ä»¶ï¼Œæ­£æ˜¯æ¨¡å‹çš„<strong>æƒé‡æ–‡ä»¶</strong>ï¼Œå®ƒä»¬ä¿å­˜äº†æ¨¡å‹ç»“æ„ä¸­æ‰€æœ‰è¿æ¥ä¸Šçš„å‚æ•°æ•°å€¼ã€‚Qwen3-8B è¡¨ç¤ºå…¶æ‹¥æœ‰çº¦ 80 äº¿ï¼ˆ8Bï¼Œ1B=10äº¿ï¼‰ä¸ªå‚æ•°ï¼Œæ•°æ®é‡å·¨å¤§ï¼Œå› æ­¤é€šå¸¸ä¼šè¢«åˆ†å‰²æˆå¤šä¸ªÂ <code>.safetensors</code>Â åˆ†ç‰‡æ–‡ä»¶ï¼Œä¾¿äºå­˜å‚¨ä¸å¹¶è¡ŒåŠ è½½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083c06f6f194421195decf2e94fd47d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=dz%2BEyZ%2Bju2waA3r%2F8wFc%2BFnq%2BBo%3D" alt="9.png" loading="lazy"/></p>
<p>æœ‰äº†æƒé‡æ–‡ä»¶ï¼Œç¨‹åºè¿˜éœ€è¦çŸ¥é“æ¯ä¸ªæƒé‡å¯¹åº”æ¨¡å‹ç»“æ„ä¸­çš„å“ªä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ˜ å°„å…³ç³»ç”±Â <code>model.safetensors.index.json</code>Â æ–‡ä»¶è®°å½•ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>ç´¢å¼•æ–‡ä»¶</strong>ï¼Œè¯¦ç»†è¯´æ˜äº†æ¨¡å‹æ¯ä¸€å±‚çš„å‚æ•°å­˜å‚¨åœ¨å“ªä¸ªå…·ä½“çš„Â <code>.safetensors</code>Â åˆ†ç‰‡æ–‡ä»¶ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0121ad3ecb4548db9c1dabadbc792ba1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=oVANDbfFZdEKhw1bkDiyKSfz738%3D" alt="10.png" loading="lazy"/></p>
<h3 data-id="heading-7">3.2 å¤§æ¨¡å‹æ˜¯å¦‚ä½•äº§ç”Ÿå›ç­”çš„ï¼Ÿ</h3>
<h4 data-id="heading-8">3.2.1 å¤§æ¨¡å‹ç”Ÿæˆæ–‡æœ¬åŸç†</h4>
<p>å¤§å®¶æ˜¯å¦å¥½å¥‡è¿‡ï¼Œå¤§æ¨¡å‹æ˜¯å¦‚ä½•ç†è§£ä½ çš„é—®é¢˜å¹¶ç”Ÿæˆå›ç­”çš„ï¼Ÿåƒ Qwenã€DeepSeek è¿™æ ·çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>è‡ªå›å½’ç”Ÿæˆæ¨¡å‹</strong>ã€‚å®ƒå¹¶ä¸ç›´æ¥â€œç†è§£â€è¯­ä¹‰ï¼Œè€Œæ˜¯åŸºäºç»Ÿè®¡è§„å¾‹é¢„æµ‹ä¸‹ä¸€ä¸ªæœ€å¯èƒ½å‡ºç°çš„è¯ï¼ˆTokenï¼‰ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹å¼€å§‹äº<strong>åˆ†è¯</strong>ã€‚å½“è¾“å…¥â€œä½ å¥½å¤§æ¨¡å‹ï¼Œæˆ‘çš„åå­—å«è‹è€å¸ˆâ€æ—¶ï¼Œæ¨¡å‹é¦–å…ˆä¼šä½¿ç”¨<strong>åˆ†è¯å™¨</strong>å°†è¿™å¥è¯åˆ‡åˆ†æˆä¸€ä¸ªä¸ª è¯ï¼ˆä¹Ÿå°±æ˜¯å¸¸è¯´çš„<strong>Token</strong>ï¼‰ï¼Œä¾‹å¦‚ï¼šâ€œä½ å¥½â€ã€â€œå¤§æ¨¡å‹â€ã€â€œï¼Œâ€ã€â€œæˆ‘â€ã€â€œçš„â€ã€â€œåå­—â€ã€â€œå«â€ã€â€œè‹è€å¸ˆâ€ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦åˆ†è¯ï¼Ÿè¿™æ¨¡ä»¿äº†äººç±»ç†è§£è¯­è¨€çš„è¿‡ç¨‹â€”â€”æˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡è¯è¯­æ¥æ„å»ºè¯­ä¹‰ä¿¡æ¯å¹¶ç”Ÿæˆå›ç­”çš„ã€‚æ¨¡å‹æ¥æ”¶åˆ° Token åºåˆ—åï¼Œä¼šåŸºäºå‰é¢çš„æ‰€æœ‰ Token æ¥é¢„æµ‹ä¸‹ä¸€ä¸ª Token æ˜¯ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼š</p>
<ol>
<li>è¾“å…¥ï¼šâ€œä½ å¥½â€ã€â€œå¤§æ¨¡å‹â€ã€â€œï¼Œâ€ã€â€œæˆ‘â€ã€â€œçš„â€ã€â€œåå­—â€ã€â€œå«â€ã€â€œè‹è€å¸ˆâ€</li>
<li>æ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ª Token å¯èƒ½æ˜¯â€œä½ å¥½å‘€â€ï¼Œå¹¶å°†å…¶åŠ å…¥åºåˆ—ã€‚</li>
<li>æ–°çš„è¾“å…¥åºåˆ—å˜ä¸ºï¼šâ€œä½ å¥½â€ã€â€œå¤§æ¨¡å‹â€ã€â€œï¼Œâ€ã€â€œæˆ‘â€ã€â€œçš„â€ã€â€œåå­—â€ã€â€œå«â€ã€â€œè‹è€å¸ˆâ€ã€â€œä½ å¥½å‘€â€</li>
<li>æ¨¡å‹æ ¹æ®æ–°åºåˆ—ç»§ç»­é¢„æµ‹ä¸‹ä¸€ä¸ª Tokenï¼Œå¯èƒ½æ˜¯â€œæˆ‘çš„â€ã€‚</li>
<li>å¦‚æ­¤å¾ªç¯è¿­ä»£ï¼Œæœ€ç»ˆå¯èƒ½ç”Ÿæˆå®Œæ•´çš„å›å¤ï¼šâ€œä½ å¥½å‘€ï¼Œæˆ‘çš„åå­—æ˜¯Qwen3â€ã€‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç›´è§‚åœ°ç†è§£ä¸ºä¸‹å›¾æ‰€ç¤ºçš„â€œæ¥é¾™â€æ¸¸æˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cfb9951f92648deb3be8a0954dcb549~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=UOTQdjo72lqWIAabtkLGZm56YtU%3D" alt="14.png" loading="lazy"/></p>
<p>å› æ­¤ï¼Œå¤§æ¨¡å‹å¤„ç†è¾“å…¥çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯é€šè¿‡åˆ†è¯å™¨å°†æ–‡æœ¬è½¬åŒ–ä¸º Token åºåˆ—ï¼Œè¿™ä¾èµ–äºåˆ†è¯å™¨ç›¸å…³çš„æ–‡ä»¶ã€‚ç¬”è€…å‰é¢ä¹Ÿè¯´è¿‡ï¼Œå¤§æ¨¡å‹æ¥æ”¶çš„å…¶å®æ˜¯æ•°å­—å‚æ•°ï¼ˆå®ƒæ˜¯ä¸èƒ½ç›´æ¥ç†è§£è¯çš„æ„æ€çš„ï¼‰ï¼Œé‚£ä¹ˆå¦‚ä½•å°†åˆ†è¯åçš„å­—è¯åˆ—è¡¨è½¬åŒ–ä¸ºå¤§æ¨¡å‹å¯ä»¥ç†è§£çš„æ•°å­—å‘¢ï¼Ÿ</p>
<p>æ–‡ä»¶åˆ—è¡¨ä¸­<code>tokenizer.json</code>Â æ–‡ä»¶åŒ…å«äº†è¯¦ç»†çš„åˆ†è¯è§„åˆ™å’Œè¯è¡¨ã€‚å¤§å®¶å¯ä»¥ä¸‹è½½è¯¥æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­æœç´¢â€œHelloâ€ï¼Œä¼šå‘ç°å®ƒå¯¹åº”çš„ Token ID æ˜¯ 9707ã€‚å¤§æ¨¡å‹æ­£æ˜¯ä¾èµ–è¿™ä¸ªåˆ†è¯å™¨æ–‡ä»¶å°†è¯­å¥è¿›è¡Œåˆ†è¯ï¼Œç„¶åå¹¶å°†è¯åˆ—è¡¨è½¬åŒ–ä¸ºè¯çš„idæ•°å­—åˆ—è¡¨ã€‚ï¼ˆæœ€åæ•°å­—åˆ—è¡¨ç»è¿‡å¤§æ¨¡å‹ä¼šè½¬åŒ–ä¸ºè¾“å…¥ç¥ç»å…ƒçš„è¯å‘é‡ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba77a2b7b34b43888b55827e543003d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=dvwuuIenY8OGflEmFOjJIGm0r%2BE%3D" alt="15.png" loading="lazy"/></p>
<p>é™¤äº†Â <code>tokenizer.json</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªÂ <code>tokenizer_config.json</code>Â æ–‡ä»¶ã€‚å®ƒå®šä¹‰äº†ç¼–ç æ–¹å¼ã€ç‰¹æ®Šç¬¦å·ä»¥åŠå¯¹è¯æ¨¡æ¿ç­‰é‡è¦ä¿¡æ¯ã€‚è¿™é‡Œåˆæœ‰ä¸€ä¸ªé—®é¢˜å•¦ï¼Œç‰¹æ®Šç¬¦å·å’Œå¯¹è¯æ¨¡æ¿æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab485f4074e04c84b5fec3e6f1d2b062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=bK45MXuX7h67vFdGx7bnl5RKo0I%3D" alt="16.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd7e88a77f7d483e9950a99fe00f1bd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=eU3NNDG7ccEdPLzXjvm2K1pF9Cc%3D" alt="17.png" loading="lazy"/></p>
<p>è§‚å¯Ÿä¸Šé¢å¤§æ¨¡å‹é¢„æµ‹çš„ç¤ºæ„å›¾ï¼Œå¤§å®¶ä¼šå‘ç°ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šæ¨¡å‹çš„è¾“å…¥åºåˆ—ä¸­ï¼Œå¦‚ä½•åŒºåˆ†å“ªäº›æ˜¯ç”¨æˆ·çš„æé—®ï¼Œå“ªäº›æ˜¯æ¨¡å‹è‡ªå·±çš„å›å¤ï¼Ÿè¿™æ—¶å°±éœ€è¦<strong>ç‰¹æ®Šç¬¦å·</strong>å’Œ<strong>å¯¹è¯æ¨¡æ¿</strong>äº†ã€‚</p>
<p>ç”¨æˆ·çš„åŸå§‹è¾“å…¥ä¸ä¼šç›´æ¥äº¤ç»™æ¨¡å‹ï¼Œè€Œæ˜¯å…ˆè¦æŒ‰ç…§Â <code>chat_template</code>Â ä¸­å®šä¹‰çš„æ ¼å¼è¿›è¡Œç»„è£…ã€‚ä¸åŒæ¨¡å‹çš„æ¨¡æ¿ä¸åŒï¼Œæ¨¡å‹åªæœ‰åœ¨ç¬¦åˆè‡ªèº«æ¨¡æ¿çš„è¾“å…¥æ ¼å¼ä¸‹ï¼Œæ‰èƒ½æ­£ç¡®å·¥ä½œã€‚ä¾‹å¦‚ï¼Œå½“ä½ è¾“å…¥â€œä½ å¥½â€æ—¶ï¼Œç»è¿‡ Qwen3 çš„æ¨¡æ¿è½¬æ¢ï¼Œå®é™…é€å…¥æ¨¡å‹çš„æ–‡æœ¬ä¼šå˜æˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>im_start<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-keyword">user</span>
ä½ å¥½<span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>im_end<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>
<span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>im_start<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>assistant
</code></pre>
<p>è¿™é‡Œï¼š</p>
<ul>
<li><code>&lt;|im_start|&gt;</code>Â æ ‡è®°ä¸€æ®µè¯çš„å¼€å§‹ã€‚</li>
<li><code>user</code>Â æˆ–Â <code>assistant</code>Â è¡¨æ˜è¯´è¯è€…çš„è§’è‰²ã€‚</li>
<li><code>&lt;|im_end|&gt;</code>Â æ ‡è®°ä¸€æ®µè¯çš„ç»“æŸã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œæ¨¡å‹å°±èƒ½æ¸…æ™°åœ°è¯†åˆ«å‡ºå¯¹è¯çš„ä¸Šä¸‹æ–‡ç»“æ„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd093971f5244c84b56a3c60f0b8cbf2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=G2B8vj1UchlgbJXKD3N%2FiY4SkMk%3D" alt="18.png" loading="lazy"/></p>
<p>æ­¤å¤–ï¼ŒQwen3-8B è¿˜åŒ…å«ä¸€ä¸ªÂ <strong><code>vocab.json</code></strong>Â æ–‡ä»¶ï¼Œå®ƒç›´æ¥å­˜å‚¨äº†è¯è¡¨ä¸­æ¯ä¸ª Token ä¸å…¶å¯¹åº” ID çš„æ˜ å°„å…³ç³»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a06e22ccfd446dc9e415b364775b3cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=dXKfnCCDqRyIx5528GQMzdh2cog%3D" alt="19.png" loading="lazy"/></p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œ<strong>åˆ†è¯å™¨</strong>çš„æ ¸å¿ƒå·¥ä½œæœ‰ä¸¤æ­¥ï¼š</p>
<ol>
<li><strong>ç¼–ç </strong>ï¼šå°†äººç±»å¯è¯»çš„æ–‡æœ¬ï¼Œé€šè¿‡åˆ†è¯è§„åˆ™å’Œè¯è¡¨ï¼Œè½¬æ¢æˆæ¨¡å‹å¯å¤„ç†çš„ Token ID åºåˆ—ã€‚</li>
<li><strong>è§£ç </strong>ï¼šå°†æ¨¡å‹ç”Ÿæˆçš„ Token ID åºåˆ—ï¼Œåå‘è½¬æ¢å›äººç±»å¯è¯»çš„æ–‡æœ¬ã€‚</li>
</ol>
<h4 data-id="heading-9">3.2.2 å¤§æ¨¡å‹æ¨ç†å®æˆ˜æŒ‡å—</h4>
<p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚â€ç†è§£äº†åŸç†ï¼Œä¸‹ä¸€æ­¥ç¬”è€…å¸¦å¤§å®¶åŠ¨æ‰‹å®è·µï¼ŒéªŒè¯å¤§æ¨¡å‹çš„å·¥ä½œæµç¨‹æ˜¯å¦å¦‚æˆ‘ä»¬æ‰€è®²ã€‚</p>
<p>å¤§æ¨¡å‹æ¨ç†éœ€è¦ä¸€å®šçš„è®¡ç®—èµ„æºï¼Œä¸è¿‡è¯·æ”¾å¿ƒï¼Œç¬”è€…å·²ä¸ºå¤§å®¶äº‰å–äº†ç¦åˆ©ã€‚å¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a>ï¼Œé¢†å–Â <strong>50å…ƒæ— é—¨æ§›ä»£é‡‘åˆ¸</strong>ï¼Œå…è´¹ä½“éªŒÂ <strong>H100 GPU 6.5å°æ—¶</strong>Â çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å¯åœ¨è¯¥å¹³å°ä¸Šå®Œæˆã€‚</p>
<p>ä¸‹é¢ç¬”è€…å°±å°†ä¹‹å‰ä»‹ç»çš„æ‰€æœ‰æ–‡ä»¶å’Œä½œç”¨ä¸²è”èµ·æ¥ï¼Œé€šè¿‡ä»£ç çœ‹çœ‹å®é™…è¿è¡Œæ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<ol>
<li><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong> æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fhome" target="_blank" title="https://www.lab4ai.cn/home" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹å®éªŒå®¤</a> ç®—åŠ›å¹³å°å®˜ç½‘ï¼Œæ–°å»ºä¸€ä¸ªJupyterlabå®ä¾‹å¹¶å¯åŠ¨ã€‚å¯ä»¥çœ‹åˆ°å®ä¾‹å·²é¢„è£…äº† lammafactory 0.9.4ã€torch 2.8 ç­‰å¿…è¦çš„è½¯ä»¶ä¾èµ–ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b22eecad5f8f4021a9a141c74a049c51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=rz5ggsxnsRaJeSy5mDoQhqky5CY%3D" alt="20.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b7dc046792240b0b4a49d3821f01ce0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=yt%2FDWohedNhW8BmOTtP0FOU%2Flpk%3D" alt="21.png" loading="lazy"/></p>
<ol start="2">
<li><strong>å¯¼å…¥åº“ä¸åŠ è½½æ¨¡å‹:</strong> é¦–å…ˆä»Â <code>modelscope</code>Â åº“å¯¼å…¥åŠ è½½æ¨¡å‹æ‰€éœ€çš„å‡½æ•°ã€‚<code>modelscope</code>Â æ˜¯åŸºäºè‘—åçš„Â <code>transformers</code>Â åº“æ„å»ºçš„ï¼ˆå…³äºÂ <code>transformers</code>Â åº“ç¬”è€…ä¼šåœ¨åç»­ç¯‡ç« è¯¦ç»†ä»‹ç»ï¼‰:</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> modelscope <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer
</code></pre>
<ol start="3">
<li><strong>å®šä¹‰æ¨¡å‹ï¼š</strong> å®šä¹‰æ¨¡å‹åç§°ï¼Œå¹¶åŠ è½½åˆ†è¯å™¨ä¸æ¨¡å‹ã€‚å¦‚æœæœ¬åœ°æ²¡æœ‰ç¼“å­˜ï¼Œä»£ç ä¼šè‡ªåŠ¨ä» ModelScope å¹³å°ä¸‹è½½æ¨¡å‹æ–‡ä»¶ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨¡å‹åç§°</span>
model_name = <span class="hljs-string">"Qwen/Qwen3-8B"</span>

<span class="hljs-comment"># åŠ è½½åˆ†è¯å™¨</span>
tokenizer = AutoTokenizer.from_pretrained(model_name)

<span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=<span class="hljs-string">"auto"</span>,
    device_map=<span class="hljs-string">"auto"</span>
)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc1117421ef5471897caaff1d24bb25c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=VSfEfOLUilj9P6PJjRJ2E1pTj6E%3D" alt="22.png" loading="lazy"/></p>
<ol start="4">
<li><strong>å‡†å¤‡è¾“å…¥å¹¶åº”ç”¨å¯¹è¯æ¨¡æ¿ï¼š</strong> ç¼–å†™ä¸€ä¸ªç®€å•çš„æç¤ºè¯â€œä½ å¥½â€è¿›è¡Œæµ‹è¯•ã€‚ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ä¼šé¦–å…ˆè¢«å¥—ç”¨ä¹‹å‰æåˆ°çš„å¯¹è¯æ¨¡æ¿ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">user_input=<span class="hljs-string">"ä½ å¥½"</span>
messages=[
    {<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: user_input}
]
text = tokenizer.apply_chat_template(
    messages,
    tokenize=<span class="hljs-literal">False</span>,
    add_generation_prompt=<span class="hljs-literal">True</span>,
    enable_thinking=<span class="hljs-literal">False</span>,
)
</code></pre>
<ol start="5">
<li><strong>åˆ†è¯å¹¶æŸ¥çœ‹ Token IDï¼š</strong> åº”ç”¨æ¨¡æ¿åçš„æ–‡æœ¬ï¼Œå†ç»è¿‡åˆ†è¯å™¨è½¬åŒ–ä¸º Token ID åºåˆ—ã€‚ç¬”è€…è¿™é‡Œæ‰“å°å‡ºæ¥ç»“æœè®©å¤§å®¶ç›´è§‚æ„Ÿå—ä¸€ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python">model_inputs = tokenizer([text], return_tensors=<span class="hljs-string">"pt"</span>).to(model.device)
<span class="hljs-built_in">print</span>(model_inputs)
</code></pre>
<p>è¾“å‡ºæ˜¾ç¤ºäº†ä¸€ä¸ªåŒ…å«Â <code>input_ids</code>Â çš„å¼ é‡ï¼Œè¿™æ­£æ˜¯è¾“å…¥çš„ Token ID åºåˆ—ã€‚å¯¹æ¯”Â <code>tokenizer.json</code>Â ä¸­çš„ç‰¹æ®Šç¬¦å·ï¼Œä½ ä¼šå‘ç°åºåˆ—çš„æ„æˆå®Œå…¨ç¬¦åˆæˆ‘ä»¬è®²è§£çš„æ¨¡æ¿æ ¼å¼ï¼ˆå°½ç®¡éƒ¨åˆ†ä¸­æ–‡ Token åœ¨æ‰“å°æ—¶å¯èƒ½æ˜¾ç¤ºä¸ºå­—èŠ‚å½¢å¼ï¼Œä½†â€œä½ å¥½â€ç¡®å®è¢«æ­£ç¡®åœ°åˆ†è¯äº†ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/470f4b48e63f4acd9676e4dca4ae2c39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=mtNTPuuaW7gSmE0p%2FHngOsHyiDE%3D" alt="23.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b9d234d067b41138700343b6a9b6b1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=gbkyGu2O3I2XzO4IFpsnLxC1qJE%3D" alt="24.png" loading="lazy"/></p>
<ol start="6">
<li><strong>è¿è¡Œæ¨¡å‹è¿›è¡Œæ¨ç†ï¼š</strong> ç°åœ¨å°† Token ID åºåˆ—è¾“å…¥æ¨¡å‹ï¼Œè®©å…¶ç”Ÿæˆåç»­çš„ Tokenã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">generated_ids = model.generate(
    **model_inputs,
    max_new_tokens=<span class="hljs-number">32768</span>
)
output_ids = generated_ids[<span class="hljs-number">0</span>][<span class="hljs-built_in">len</span>(model_inputs.input_ids[<span class="hljs-number">0</span>]):].tolist()
<span class="hljs-built_in">print</span>(output_ids)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d489e0052e64a3d8e5f1e9758617399~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=6FINLqsh5bhX8fsbFAWQwBwiKlY%3D" alt="25.png" loading="lazy"/></p>
<ol start="7">
<li><strong>è§£ç è¾“å‡ºï¼š</strong> æœ€åä½¿ç”¨åˆ†è¯å™¨çš„Â <code>decode</code>Â æ–¹æ³•ï¼Œå°†æ¨¡å‹ç”Ÿæˆçš„ Token ID åºåˆ—è½¬æ¢å›äººç±»å¯è¯»çš„æ–‡æœ¬ã€‚<code>skip_special_tokens=True</code>Â å‚æ•°ä¼šè‡ªåŠ¨è¿‡æ»¤æ‰é‚£äº›ç”¨äºæ§åˆ¶æ ¼å¼çš„ç‰¹æ®Šç¬¦å·ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">content = tokenizer.decode(output_ids, skip_special_tokens=<span class="hljs-literal">True</span>).strip(<span class="hljs-string">"\n"</span>)
<span class="hljs-built_in">print</span>(content)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6537ecbf9ac94dbfbf8990477b16cdc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768972624&amp;x-signature=xyO%2F%2Ft7xhpcNqbD780xey2InajY%3D" alt="26.png" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ä»£ç åŠ è½½æ¨¡å‹å¹¶è·å–æ¨ç†è¾“å‡ºçš„å®Œæ•´æµç¨‹ï¼Œä¸ç¬”è€…ä¹‹å‰è®²è§£çš„åŸç†å®Œå…¨å»åˆï¼ç°åœ¨ç›¸ä¿¡å¤§å®¶å·²ç»å¯¹å¤§æ¨¡å‹çš„æ–‡ä»¶ç»„æˆå’Œç”ŸæˆåŸç†æœ‰äº†æ‰å®çš„ç†è§£ï¼Œç»™è‡ªå·±ç‚¹ä¸ªèµå§ï¼</p>
<p>ä»¥ä¸Šå®Œæ•´ä»£ç å¤§å®¶å¯ä»¥å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œå¹¶åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>å¤§æ¨¡å‹è®­ç»ƒ</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-10">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡åˆ†äº«äº†å¤§æ¨¡å‹çš„æ ¸å¿ƒæ–‡ä»¶ç»„æˆä¸ç”ŸæˆåŸç†ï¼Œå¹¶é€šè¿‡å®æˆ˜æ¼”ç¤ºäº†ä»åŠ è½½æ¨¡å‹åˆ°è·å–å›å¤çš„å®Œæ•´æµç¨‹ï¼Œå¸®åŠ©å¤§å®¶çœŸæ­£ç†è§£å¤§æ¨¡å‹çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šæ¯æ¬¡éƒ½é€šè¿‡NoteBookç¼–å†™ä»£ç ï¼Œå¸¸éœ€å°†æ¨¡å‹éƒ¨ç½²ä¸ºAPIæœåŠ¡ä»¥ä¾¿å¿«æ·è®¿é—®ã€‚ä¸‹ç¯‡åˆ†äº«ç¬”è€…å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨vLLMã€Ollamaç­‰æ¡†æ¶ï¼Œå¿«é€Ÿå°†æ¨¡å‹æ–‡ä»¶è½¬åŒ–ä¸ºå¯ä¾¿æ·è°ƒç”¨çš„åº”ç”¨æ¥å£ã€‚å¤§å®¶ä¸€èµ·æœŸå¾…å§~ å¤§å®¶è¯»å®Œæ„Ÿå…´è¶£å¯ä»¥å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·ï¼šå¤§æ¨¡å‹çœŸå¥½ç©ï¼Œè·å–æœ¬ç³»åˆ—åˆ†äº«ä»¥åŠå…¶å®ƒç³»åˆ—åˆ†äº«çš„å…¨éƒ¨å†…å®¹ã€‚</p>
<p>å¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<p>é™¤å¤§æ¨¡å‹è®­ç»ƒå¤–ï¼Œç¬”è€…ä¹Ÿåœ¨åŒæ­¥æ›´æ–°<a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>å…è´¹ä¸“æ ï¼Œè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 36 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŒ¿è¾…å¯¼äºŒé¢ï¼šçº¿ä¸Šå‡ºç°çš„OOMæ˜¯å¦‚ä½•æ’æŸ¥çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594742976712949794</link>    <guid>https://juejin.cn/post/7594742976712949794</guid>    <pubDate>2026-01-14T05:33:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594742976712949794" data-draft-id="7556475589264769065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŒ¿è¾…å¯¼äºŒé¢ï¼šçº¿ä¸Šå‡ºç°çš„OOMæ˜¯å¦‚ä½•æ’æŸ¥çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2026-01-14T05:33:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é£é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1665088861772688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŒ¿è¾…å¯¼äºŒé¢ï¼šçº¿ä¸Šå‡ºç°çš„OOMæ˜¯å¦‚ä½•æ’æŸ¥çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1665088861772688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é£é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:33:38.000Z" title="Wed Jan 14 2026 05:33:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><strong>æ–‡ç« å†…å®¹æ”¶å½•åˆ°ä¸ªäººç½‘ç«™ï¼Œæ–¹ä¾¿é˜…è¯»</strong>ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fhardyfish.top%2F" target="_blank" title="http://hardyfish.top/" ref="nofollow noopener noreferrer">hardyfish.top/</a></p>
<p><strong>çœ‹æ˜¯å“ªç§OOM?</strong></p>
<p>çœ‹æŠ¥é”™ä¿¡æ¯/ç›‘æ§/å®¹å™¨äº‹ä»¶ï¼ŒåŒºåˆ†ç±»å‹ï¼Œä¸åŒè§£æ³•å®Œå…¨ä¸ä¸€æ ·ã€‚</p>
<blockquote>
<p><strong>Java heap</strong></p>
<ul>
<li><code>java.lang.OutOfMemoryError: Java heap space</code></li>
<li><code>GC overhead limit exceeded</code>ï¼ˆä¸€ç›´ GC ä½†å›æ”¶æå°‘ï¼‰</li>
</ul>
<p><strong>Direct/Off-heap</strong></p>
<ul>
<li><code>java.lang.OutOfMemoryError: Direct buffer memory</code>ï¼ˆNIO/Netty/ByteBufferï¼‰</li>
<li>åŸç”Ÿå†…å­˜è€—å°½ï¼ˆJNAã€å‹ç¼©ã€TLSã€çº¿ç¨‹æ ˆç­‰ï¼‰</li>
</ul>
<p><strong>Metaspace</strong></p>
<ul>
<li><code>java.lang.OutOfMemoryError: Metaspace</code>ï¼ˆç±»åŠ è½½æ³„æ¼/é¢‘ç¹é‡è½½ï¼‰</li>
</ul>
<p><strong>ç³»ç»Ÿ/å®¹å™¨æŠŠè¿›ç¨‹æ€äº†</strong></p>
<ul>
<li>K8sï¼š<code>OOMKilled</code>ï¼›Linuxï¼š<code>dmesg</code> é‡Œ <code>Out of memory: Kill process</code></li>
<li>JVM æ—¥å¿—æœªå¿…æœ‰ OOM æ ˆ</li>
</ul>
</blockquote>
<blockquote>
<p><strong>åˆ¤å®šæ–¹æ³•</strong>ï¼šåº”ç”¨æ—¥å¿—ã€K8s äº‹ä»¶ (<code>kubectl describe pod</code>)ã€ç³»ç»Ÿæ—¥å¿— (<code>dmesg</code>)ã€JVM æ—¥å¿—ï¼ˆGC/é”™è¯¯æ—¥å¿—ï¼‰ã€‚</p>
</blockquote>
<p><strong>å¿«é€Ÿæ­¢è¡€ï¼ˆæŠŠæœåŠ¡æ´»ä¸‹æ¥ï¼‰</strong></p>
<blockquote>
<p><strong>æ‰©å®¹/é™æµ/é™å¹¶å‘</strong>ï¼šä¸´æ—¶ç¼©å°çº¿ç¨‹æ± æˆ–é™æµï¼›å¿…è¦æ—¶æ‰©å‰¯æœ¬ã€‚</p>
<p><strong>å¢é…ä½†ç•™ä½™é‡</strong>ï¼šå®¹å™¨ <code>memoryLimit</code> â†‘ï¼ŒåŒæ—¶ <strong>Xmx è¦æ˜æ˜¾å°äº limit</strong>ï¼ˆç»™ off-heap/çº¿ç¨‹/ä»£ç ç¼“å­˜ç•™ 30% ä½™é‡ï¼‰ã€‚</p>
<p><strong>é™çº§</strong>ï¼šå…³é—­å¤§å¯¹è±¡åŠŸèƒ½ï¼ˆä¸€æ¬¡æ€§åŠ è½½ã€å¯¼å‡ºã€èšåˆï¼‰ã€é™ä½æ‰¹é‡å¤§å°ã€‚</p>
<p><strong>æ‰“å¼€å–è¯å¼€å…³</strong>ï¼ˆè§ä¸‹ä¸€æ­¥ï¼‰ï¼Œé‡å¯æœåŠ¡ã€‚</p>
</blockquote>
<p><strong>å–è¯ä¸å¿«é€Ÿä½“æ£€ï¼ˆä¸Šçº¿å°±è¯¥å¸¸å¤‡ï¼‰</strong></p>
<p><strong>JVM å¯åŠ¨å‚æ•°ï¼ˆé•¿æœŸå»ºè®®ï¼‰</strong></p>
<ul>
<li><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/dump</code>ï¼ˆè‡ªåŠ¨å¯¼å‡º heap dumpï¼‰</li>
<li><code>-Xlog:gc*:file=/data/logs/gc.log:time,uptime,level,tags</code>ï¼ˆJDK9+ï¼›JDK8 ç”¨ <code>-Xloggc</code>ï¼‰</li>
<li>ï¼ˆå¯é€‰ï¼‰<code>-XX:NativeMemoryTracking=summary</code>ï¼ˆå¼€é”€å°ï¼‰æˆ– <code>detail</code></li>
</ul>
<p><strong>çº¿ä¸Šæ’æŸ¥å¸¸ç”¨å‘½ä»¤</strong></p>
<ul>
<li>çº¿ç¨‹/å †ï¼š
<ul>
<li><code>jcmd &lt;pid&gt; GC.heap_info</code>ã€<code>jcmd &lt;pid&gt; GC.class_histogram</code></li>
<li><code>jmap -histo:live &lt;pid&gt; | head -50</code>ï¼ˆå¤§å¯¹è±¡åˆ†å¸ƒï¼‰</li>
<li><code>jmap -dump:live,format=b,file=heap.hprof &lt;pid&gt;</code></li>
<li><code>jstack -l &lt;pid&gt;</code>ï¼ˆçœ‹çœ‹æ˜¯å¦å¡æŸäº›çº¿ç¨‹/ThreadLocal æ³„æ¼ï¼‰</li>
</ul>
</li>
<li>åŸç”Ÿå†…å­˜ï¼š
<ul>
<li><code>jcmd &lt;pid&gt; VM.native_memory summary</code>ï¼ˆNMTï¼šçœ‹ Direct / Internal / Thread ç­‰å ç”¨ï¼‰</li>
</ul>
</li>
<li>å®¹å™¨/ç³»ç»Ÿï¼š
<ul>
<li><code>kubectl top pod</code> / <code>describe pod</code>ï¼ˆ<code>OOMKilled</code>ï¼‰</li>
<li><code>ps -o pid,rss,command -p &lt;pid&gt;</code>ã€<code>pmap -x &lt;pid&gt;</code>ã€<code>dmesg | tail</code></li>
</ul>
</li>
</ul>
<p><strong>å¯¹ç—‡ä¸‹è¯ï¼ˆä¸åŒ OOM çš„æ ¹å› ä¸ä¿®å¤ï¼‰</strong></p>
<p><strong>Heap OOM / GC Overhead</strong></p>
<blockquote>
<p><strong>ç—‡çŠ¶</strong>ï¼šå †å ç”¨æŒç»­ä¸Šå‡æˆ– Full GC é¢‘ç¹ã€‚</p>
<p><strong>å®šä½</strong>ï¼šç”¨ Dump åœ¨ MAT/VisualVM çœ‹ <strong>Dominator Tree</strong>ã€GC Roots è·¯å¾„ï¼Œæ‰¾æœ€å¤§ä¿ç•™é›†ã€‚</p>
</blockquote>
<p><strong>å¸¸è§æ ¹å›  &amp; ä¿®å¤</strong></p>
<ul>
<li><strong>æ— é™åˆ¶ç¼“å­˜/Map</strong>ï¼ˆæ²¡æœ‰ TTL/æœ€å¤§å®¹é‡ï¼‰â†’ ä¸Š Caffeine/Guava <strong>Size/Weight + TTL</strong>ï¼Œç›‘æ§å‘½ä¸­ç‡ä¸å¤§å°</li>
<li><strong>èšåˆ/æ‹¼è£…å¤§å¯¹è±¡</strong>ï¼ˆä¸€æ¬¡æ€§ <code>toList()</code>ã€å¤§ <code>StringBuilder</code>ã€æ— åˆ†é¡µï¼‰â†’ åˆ†é¡µ/åˆ†å—å¤„ç†ï¼Œæµå¼è¯»å†™</li>
<li><strong>ThreadLocal æ³„æ¼</strong>ï¼ˆæœª <code>remove</code>ï¼‰â†’ try/finally æ¸…ç†ï¼›çº¿ç¨‹æ± å¤ç”¨æ—¶å°¤éœ€æ³¨æ„</li>
<li><strong>ååºåˆ—åŒ–/JSON ç»„è£…å¤§å¯¹è±¡</strong> â†’ æ¢æµå¼è§£æï¼ˆJackson streamingï¼‰ã€é™åˆ¶å­—æ®µ</li>
<li><strong>åºåˆ—åŒ–é˜Ÿåˆ—å †ç§¯</strong>ï¼ˆMQ/é˜Ÿåˆ—æ¶ˆè´¹ä¸è¿‡æ¥ï¼‰â†’ é™æµ/èƒŒå‹ï¼Œè°ƒå°æ‰¹é‡</li>
</ul>
<p><strong>è°ƒå‚å…œåº•</strong>ï¼š</p>
<ul>
<li>åˆç†è®¾ç½® <strong>Xms=Xmx</strong>ï¼ˆé¿å…é¢‘ç¹æ‰©å®¹ï¼‰ï¼Œç”¨ <strong>G1/GenZ</strong>ã€‚</li>
<li>æ£€æŸ¥ <code>-XX:MaxRAMPercentage</code>ï¼ˆå®¹å™¨å†…ï¼‰ä¸ Limit çš„åŒ¹é…ï¼Œç¡®ä¿ <strong>Xmx &lt; Limit Ã— 0.7</strong> å·¦å³ã€‚</li>
</ul>
<p><strong>Direct buffer / Off-heap OOM</strong></p>
<blockquote>
<p><strong>ç—‡çŠ¶</strong>ï¼šæŠ¥ <code>Direct buffer memory</code> æˆ– RSS é«˜è€Œå †ä¸é«˜ã€‚</p>
<p><strong>å®šä½</strong>ï¼šNMTï¼ˆ<code>VM.native_memory summary</code>ï¼‰ã€åº”ç”¨æŒ‡æ ‡ï¼ˆNetty PooledArenaï¼‰ã€<code>-XX:MaxDirectMemorySize</code>ã€‚</p>
</blockquote>
<p><strong>æ ¹å›  &amp; ä¿®å¤</strong></p>
<ul>
<li><strong>æœªé‡Šæ”¾ ByteBuffer/Netty ByteBuf</strong> â†’ ç¡®ä¿ <code>release()</code>ï¼šç”¨ Try-With-Resources åŒ…è£…ï¼Œå¼€å¯ Netty æ³„æ¼æ£€æµ‹ <code>-Dio.netty.leakDetectionLevel=paranoid</code>ï¼ˆåªåœ¨æµ‹è¯•/é¢„å‘ï¼‰</li>
<li><strong>æ— ä¸Šé™çš„ç›´æ¥å†…å­˜</strong> â†’ é…ç½® <code>-XX:MaxDirectMemorySize=256m~1g</code>ï¼›Netty é…å¯¹è±¡æ± ä¸”é™åˆ¶æœ€å¤§å¹¶å‘</li>
<li><strong>å¤§å“åº”/å‹ç¼©/SSL åŸç”Ÿå†…å­˜</strong> â†’ å‡å°æ‰¹é‡ã€åˆ†å—ï¼Œç¡®è®¤æœ¬åœ°/Native åº“ç‰ˆæœ¬</li>
</ul>
<p><strong>Metaspace OOM</strong></p>
<p><strong>ç—‡çŠ¶</strong>ï¼š<code>OutOfMemoryError: Metaspace</code>ã€‚</p>
<p><strong>æ ¹å› </strong>ï¼š<strong>ç±»åŠ è½½å™¨æ³„æ¼</strong>ï¼ˆåå¤çƒ­åŠ è½½/åŠ¨æ€ä»£ç†ç”Ÿæˆç±»ã€URLClassLoader æœªå…³é—­ï¼‰ã€‚</p>
<p><strong>ä¿®å¤</strong>ï¼š</p>
<ul>
<li>ä¿®æ­£çƒ­åŠ è½½é€»è¾‘ï¼›å‡å°‘é¢‘ç¹ç”Ÿæˆæ–° Classã€‚</li>
<li>è°ƒæ•´ <code>-XX:MaxMetaspaceSize</code> ä½†é‡ç‚¹æ˜¯ä¿®å¤æ³„æ¼ã€‚</li>
<li><code>jcmd &lt;pid&gt; VM.classloaders</code>ã€<code>GC.class_stats</code> è¾…åŠ©åˆ¤æ–­ã€‚</li>
</ul>
<p><strong>unable to create new native thread</strong></p>
<p><strong>ç—‡çŠ¶</strong>ï¼šçº¿ç¨‹æ•°çˆ†è¡¨æˆ–ç³»ç»Ÿ <code>ulimit -u</code> é™åˆ¶ã€‚</p>
<p><strong>ä¿®å¤</strong>ï¼š</p>
<ul>
<li><strong>æ§çº¿ç¨‹æ± å¹¶å‘</strong>ã€åˆå¹¶æ± ï¼›åˆç† <code>queue</code> ä¸æ‹’ç»ç­–ç•¥ã€‚</li>
<li>è°ƒæ•´å®¹å™¨/ç³»ç»Ÿçº¿ç¨‹æ•°é™åˆ¶ã€‚</li>
<li>ç”¨ <code>jstack</code>/<code>top -H</code> æ‰¾çº¿ç¨‹æºå¤´ï¼ˆå“ªä¸ªæ± åœ¨ç–¯ç‹‚å»ºçº¿ç¨‹ï¼‰ã€‚</li>
</ul>
<p><strong>å®¹å™¨ OOMKilledï¼ˆé JVM æŠ¥ OOMï¼‰</strong></p>
<p><strong>ç—‡çŠ¶</strong>ï¼šPod è¢«æ€ï¼ŒJVMæ²¡æ ˆã€‚</p>
<p><strong>ä¿®å¤</strong>ï¼š</p>
<ul>
<li>JVM å †ï¼ˆXmxï¼‰+ åŸç”Ÿå†…å­˜ä¹‹å’Œ <strong>å¿…é¡»æ˜¾è‘—å°äº</strong> K8s Limitã€‚</li>
<li>JDK11+ ä½¿ç”¨ <code>-XX:MaxRAMPercentage</code>ï¼ˆå¦‚ 50ï¼‰é…åˆ Limitã€‚</li>
<li>é¢„ç•™çº¿ç¨‹æ ˆ/Direct/Metaspace/CodeCache ç­‰ç©ºé—´ï¼ˆé€šå¸¸ â‰¥ 30% é¢„ç•™ï¼‰ã€‚</li>
</ul>
<p><strong>é˜²å¤å‘ï¼ˆå·¥ç¨‹åŒ–æ²»ç†ï¼‰</strong></p>
<ul>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå †ä½¿ç”¨ç‡ã€Young/Old GC æ¬¡æ•°ä¸æ—¶é—´ã€Full GCã€RSSã€Direct å†…å­˜ã€çº¿ç¨‹æ•°ã€ç±»åŠ è½½æ•°ã€å¯¹è±¡åˆ†é…é€Ÿç‡ã€‚</li>
<li><strong>å®¹é‡/å‹æµ‹</strong>ï¼šå…³é”®æ¥å£åš 3Ã— å³°å€¼å‹æµ‹ï¼Œè§‚å¯Ÿ P95/P99 ä¸ RSSï¼›è®¾ç½®<strong>è‡ªåŠ¨åŒ–å†…å­˜å›å½’æµ‹è¯•</strong>ã€‚</li>
<li><strong>é™æµä¸èƒŒå‹</strong>ï¼šçº¿ç¨‹æ± æœ‰ç•Œé˜Ÿåˆ— + åˆç†æ‹’ç»ç­–ç•¥ï¼›å¯¹å¤–éƒ¨ä¾èµ–è®¾ç½®è¶…æ—¶ä¸èˆ±å£ã€‚</li>
<li><strong>æ•°æ®/æ‰¹é‡</strong>ï¼šæ‰€æœ‰æ‰¹å¤„ç†/å¯¼å‡º/èšåˆéƒ½<strong>é™åˆ¶æ‰¹å¤§å°</strong>å¹¶æµå¼å¤„ç†ã€‚</li>
<li><strong>å¼€å…³ä¸ç†”æ–­</strong>ï¼šé…ç½®åŒ–å…³é—­å¤§å¯¹è±¡åŠŸèƒ½ï¼›é‡å‹è‡ªåŠ¨é™çº§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[git åˆ é™¤å†å²è®°å½•æˆ–å†å²å¤§æ–‡ä»¶å æäº¤å†å²è®°å½•åˆ°æ–°çš„ä»“åº“]]></title>    <link>https://juejin.cn/post/7594854295746740260</link>    <guid>https://juejin.cn/post/7594854295746740260</guid>    <pubDate>2026-01-14T04:27:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295746740260" data-draft-id="7594859060857028618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="git åˆ é™¤å†å²è®°å½•æˆ–å†å²å¤§æ–‡ä»¶å æäº¤å†å²è®°å½•åˆ°æ–°çš„ä»“åº“"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-14T04:27:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·383551424028"/> <meta itemprop="url" content="https://juejin.cn/user/1927883862054073"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            git åˆ é™¤å†å²è®°å½•æˆ–å†å²å¤§æ–‡ä»¶å æäº¤å†å²è®°å½•åˆ°æ–°çš„ä»“åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927883862054073/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·383551424028
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:27:56.000Z" title="Wed Jan 14 2026 04:27:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘è¿™é‡Œçš„æƒ…å†µæ˜¯åŸæœ‰ä»“åº“å·²ç»å…³é—­äº†ï¼Œå°±åªæœ‰æ‰‹é‡Œçš„é¡¹ç›®ä»£ç ï¼Œç°åœ¨éœ€è¦å°†åŒ…æ‹¬å¸¦æœ‰å¤§æ–‡ä»¶çš„å†å²æäº¤è®°å½• cloneåˆ°æ–°çš„ä»“åº“ä¸­ï¼Œè€Œä¸”æ–°ä»“åº“å·²æœ‰ä»£ç å’Œæäº¤è®°å½•çš„æƒ…å†µä¸‹ã€‚</p>
<p><strong>ä¸€ä¸ªç®€å•å¿«é€Ÿçš„æ–¹å¼ï¼Œä½¿ç”¨git filter-repoæ¸…ç†å¤§æ–‡ä»¶ï¼Œç„¶åæ–°ä»“åº“åˆå¹¶åˆ°æœ¬åœ°ï¼Œæœ€åæäº¤</strong></p>
<p>å‰æï¼šéœ€å®‰è£…Python 3.10ä»¥ä¸Šç‰ˆæœ¬ã€‚ä½¿ç”¨<strong>git-filter-repo</strong>è„šæœ¬ è€Œä¸æ˜¯å®‰è£…ï¼Œä¸´æ—¶ç”¨æ›´èŠ‚çœæ—¶é—´ã€‚ å…ˆå°†é¡¹ç›®å¤‡ä»½ï¼Œä½¿ç”¨å¤‡ä»½è¿›è¡Œä»¥ä¸‹æ“ä½œï¼Œä»¥é¿å…åŸå§‹ä»“åº“è¢«æ„å¤–æŸåã€‚</p>
<p><strong>1.  ä»git-filter-repoçš„GitHubé¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„git-filter-repoï¼Œå®ƒæ˜¯ä¸€ä¸ªå•æ–‡ä»¶çš„Pythonè„šæœ¬ã€‚</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fgh_mirrors%2Fgi%2Fgit-filter-repo%2Fblob%2Fmain%2Fgit-filter-repo%255D" target="_blank" title="https://gitcode.com/gh_mirrors/gi/git-filter-repo/blob/main/git-filter-repo%5D" ref="nofollow noopener noreferrer"> ç›´è¾¾ git-filter-repo </a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c552ac10d434dedb6dbeba788a4b064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzgzNTUxNDI0MDI4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969985&amp;x-signature=2NQcvNdL0jnG%2F5%2B1kgxLbWngvPQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>2.  å°†git-filter-repoæ”¾åˆ°æŸä¸ªä½ç½®ï¼Œå¦‚D:\tool\git-filter-repoå¹¶é‡åä¸ºgit-filter-repo.py, ç¬¬4æ­¥éœ€è¦ç”¨åˆ°ã€‚</strong></p>
<p><strong>3.  å…ˆæŸ¥æ‰¾å¤§æ–‡ä»¶ï¼Œ"tail -20"ä¸­çš„20è¡¨ç¤ºæ¡æ•°ï¼Œä½¿ç”¨Git Bashæ‰§è¡Œ</strong></p>
<pre><code class="hljs language-js" lang="js">git rev-list --objects --all | grep <span class="hljs-string">"Â (git verify-pack -v .git/objects/pack/*.idx | sort -k 3 -n | tail -20 | awk '{printÂ 1}')"</span>
</code></pre>
<p><strong>4.  æ¸…ç†å¤§æ–‡ä»¶ï¼šwin+Rå‘½ä»¤è¡Œæ‰§è¡Œï¼Œå¯æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶å¤¹å¤§å°æŸ¥çœ‹æ˜¯å¦åˆ é™¤æˆåŠŸ</strong></p>
<p>å¤šä¸ªæ–‡ä»¶ å°±åŠ  --path data/xxx.zip</p>
<pre><code class="hljs language-js" lang="js"> python <span class="hljs-attr">D</span>:\tool\git-filter-repo\git-filter-repo.<span class="hljs-property">py</span> --force --path path/ç¬¬<span class="hljs-number">3</span>æ­¥å¾—åˆ°çš„æ–‡ä»¶è·¯å¾„.<span class="hljs-property">zip</span> --path data/xxx2.<span class="hljs-property">zip</span> --invert-paths
</code></pre>
<p><strong>5.  æŸ¥çœ‹æ–°çš„è¿œç¨‹ä»“åº“æ˜¯å¦è¿˜åœ¨</strong></p>
<pre><code class="hljs language-js" lang="js"> git remote -v
</code></pre>
<p><strong>6.  å¦‚æœæ²¡æœ‰è¿›è¡Œæ·»åŠ  æˆ–ä¿®æ”¹</strong></p>
<pre><code class="hljs language-js" lang="js">   #æ·»åŠ 
   git remote add origin <span class="hljs-title function_">master</span>(ä½ è¿œç¨‹çš„åˆ†æ”¯)
   
   # ä¿®æ”¹
   git remote set-url &lt;è¿œç¨‹åç§°&gt; &lt;æ–°è¿œç¨‹ä»“åº“<span class="hljs-variable constant_">URL</span>&gt;
</code></pre>
<p><strong>7.  æ‹‰å–è¿œç¨‹ä»£ç å¹¶å…è®¸åˆå¹¶æ— å…³å†å²</strong></p>
<pre><code class="hljs language-js" lang="js"> git pull origin master --allow-unrelated-histories
</code></pre>
<p><strong>8.  è§£å†³å¯èƒ½çš„å†²çªï¼ˆå¦‚æœ‰ï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js">è¾“å…¥åˆå¹¶ä¿¡æ¯ <span class="hljs-string">"Merge unrelated histories"</span>
</code></pre>
<p><strong>9.  æŸ¥çœ‹å†å²è®°å½•ï¼Œæ˜¯å¦åŒ…å«æƒ³è¦æäº¤çš„å†å²è®°å½•ï¼Œgit Bash hereæ‰§è¡Œï¼ŒæŒ‰qé€€å‡º</strong></p>
<pre><code class="hljs language-js" lang="js">  git log -<span class="hljs-number">50</span>
</code></pre>
<p><strong>10.  æ¨é€å†å²è®°å½•å¹¶è®¾ç½®è·Ÿè¸ªå…³ç³»</strong></p>
<pre><code class="hljs language-js" lang="js">  git push --set-upstream origin master
</code></pre>
<p>æ­¤æ—¶å·²å¤§åŠŸå‘Šæˆï¼ä½ å¯ä»¥å»ä½ çš„git History ä¸­æŸ¥çœ‹æ˜¯å¦æäº¤äº†å†å²è®°å½•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JWTé‰´æƒçš„å®ç°ï¼šä»åŸç†åˆ° Django + Vue3]]></title>    <link>https://juejin.cn/post/7594745643892457507</link>    <guid>https://juejin.cn/post/7594745643892457507</guid>    <pubDate>2026-01-14T05:39:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594745643892457507" data-draft-id="7594739292201369635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JWTé‰´æƒçš„å®ç°ï¼šä»åŸç†åˆ° Django + Vue3"/> <meta itemprop="keywords" content="Django"/> <meta itemprop="datePublished" content="2026-01-14T05:39:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JWTé‰´æƒçš„å®ç°ï¼šä»åŸç†åˆ° Django + Vue3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:39:01.000Z" title="Wed Jan 14 2026 05:39:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ JWTï¼Ÿ</h2>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1Â JWT çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>JWTï¼ˆJSON WebÂ Tokenï¼‰æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚å®ƒç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ç‚¹å·ï¼ˆ.ï¼‰åˆ†éš”ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.Payload</span><span class="hljs-selector-class">.Signature</span>
AIå†™ä»£ç 
</code></pre>
<p>ä¸€ä¸ªå…¸å‹çš„ JWT é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6InRlc3R1c2VyIiwiZXhwIjoxNzAwMDAwMDAwfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
AIå†™ä»£ç 
</code></pre>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 JWT çš„ä¸‰éƒ¨åˆ†è¯¦è§£</h3>
<p><strong>Headerï¼ˆå¤´éƒ¨ï¼‰</strong></p>
<p>HeaderÂ é€šå¸¸åŒ…å«ä¸¤ä¸ªä¿¡æ¯ï¼šç®—æ³•ç±»å‹å’Œä»¤ç‰Œç±»å‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
 Â <span class="hljs-attr">"alg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HS256"</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"typ"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JWT"</span>
<span class="hljs-punctuation">}</span>
AIå†™ä»£ç 
</code></pre>
<ul>
<li><code>alg</code>ï¼šç­¾åç®—æ³•ï¼Œå¸¸ç”¨ HS256ã€RS256 ç­‰</li>
<li><code>typ</code>ï¼šä»¤ç‰Œç±»å‹ï¼Œå›ºå®šä¸º "JWT"</li>
</ul>
<p>è¿™éƒ¨åˆ†ç»è¿‡ Base64Url ç¼–ç åå½¢æˆç¬¬ä¸€æ®µã€‚</p>
<p><strong>Payloadï¼ˆè´Ÿè½½ï¼‰</strong></p>
<p>PayloadÂ æ˜¯å®é™…è¦ä¼ é€’çš„æ•°æ®ï¼Œä¹Ÿå«å£°æ˜ï¼ˆClaimsï¼‰ã€‚JWT æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼š</p>

























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æ ‡å‡†å£°æ˜</strong></td><td>JWT æ ‡å‡†é¢„å®šä¹‰çš„å£°æ˜</td><td><code>iss</code>ï¼ˆç­¾å‘è€…ï¼‰ã€<code>exp</code>ï¼ˆè¿‡æœŸæ—¶é—´ï¼‰ã€<code>sub</code>ï¼ˆä¸»é¢˜ï¼‰</td></tr><tr><td><strong>å…¬å…±å£°æ˜</strong></td><td>å¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œä½†è¦é¿å…å†²çª</td><td><code>name</code>ã€<code>email</code></td></tr><tr><td><strong>ç§æœ‰å£°æ˜</strong></td><td>åŒæ–¹çº¦å®šçš„ç§æœ‰ä¿¡æ¯</td><td><code>user_id</code>ã€<code>role</code></td></tr></tbody></table>
<p>ä¸€ä¸ªå…¸å‹çš„ Payloadï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
 Â <span class="hljs-attr">"user_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"testuser"</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"exp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1700000000</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1699913600</span>
<span class="hljs-punctuation">}</span>
AIå†™ä»£ç 
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šPayload åªæ˜¯ Base64Url ç¼–ç ï¼Œä¸æ˜¯åŠ å¯†ï¼Œæ‰€ä»¥ä¸è¦æŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰æ”¾åœ¨è¿™é‡Œã€‚</p>
<p><strong>Signatureï¼ˆç­¾åï¼‰</strong></p>
<p>Signature æ˜¯å¯¹ Header å’Œ Payload çš„ç­¾åï¼Œç”¨äºéªŒè¯ JWT æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">HMACSHA256</span>(
  base64UrlEncode(header) + "." + <span class="hljs-built_in">base64UrlEncode</span>(payload),
  secret
)
AIå†™ä»£ç 
</code></pre>
<ul>
<li>å‰ä¸¤éƒ¨åˆ†æ‹¼æ¥åï¼Œç”¨å¯†é’¥ï¼ˆsecretï¼‰è¿›è¡Œç­¾å</li>
<li>æœåŠ¡å™¨éªŒè¯æ—¶ï¼Œç”¨åŒæ ·çš„å¯†é’¥é‡æ–°è®¡ç®—ç­¾åï¼Œå¯¹æ¯”æ˜¯å¦ä¸€è‡´</li>
<li>å¦‚æœ JWT è¢«ç¯¡æ”¹ï¼Œç­¾åå°±ä¼šå¯¹ä¸ä¸Š</li>
</ul>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© JWT è€Œä¸æ˜¯ Sessionï¼Ÿ</h2>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1 ä¼ ç»Ÿ Session è®¤è¯çš„é—®é¢˜</h3>
<p>åœ¨ä¼ ç»Ÿçš„ Web åº”ç”¨ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3D%25E7%2594%25A8%25E6%2588%25B7%25E7%2599%25BB%25E5%25BD%2595%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">ç”¨æˆ·ç™»å½•</a>åï¼ŒæœåŠ¡å™¨ä¼šåœ¨å†…å­˜æˆ–æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ª Sessionï¼Œç„¶åæŠŠ Session ID é€šè¿‡ Cookie è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯åç»­è¯·æ±‚ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™ä¸ª Cookieï¼ŒæœåŠ¡å™¨é€šè¿‡ Session ID æ‰¾åˆ°å¯¹åº”çš„ Session æ•°æ®ã€‚</p>
<p>è¿™ç§æ–¹å¼åœ¨å•ä½“åº”ç”¨ä¸­æ²¡é—®é¢˜ï¼Œä½†åœ¨å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹ä¼šé‡åˆ°å‡ ä¸ªé—®é¢˜ï¼š</p>






























<table><thead><tr><th>é—®é¢˜</th><th>Session æ–¹æ¡ˆ</th><th>JWT æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>è·¨åŸŸé—®é¢˜</strong></td><td>Cookie æ— æ³•è·¨åŸŸï¼Œéœ€è¦é¢å¤–é…ç½® CORS</td><td>é€šè¿‡ Authorization Header ä¼ é€’ï¼Œå¤©ç„¶æ”¯æŒè·¨åŸŸ</td></tr><tr><td><strong>æœåŠ¡å™¨å‹åŠ›</strong></td><td>æ¯æ¬¡è¯·æ±‚éƒ½è¦æŸ¥è¯¢ Sessionï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§</td><td>æ— çŠ¶æ€ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ Session</td></tr><tr><td><strong>æ°´å¹³æ‰©å±•</strong></td><td>å¤šå°æœåŠ¡å™¨éœ€è¦å…±äº« Sessionï¼ˆRedisï¼‰</td><td>æ¯å°æœåŠ¡å™¨éƒ½èƒ½ç‹¬ç«‹éªŒè¯ Token</td></tr><tr><td><strong>ç§»åŠ¨ç«¯æ”¯æŒ</strong></td><td>ç§»åŠ¨ç«¯ Cookie ç®¡ç†å¤æ‚</td><td>Token å­˜å‚¨çµæ´»ï¼ŒLocalStorageã€å†…å­˜éƒ½è¡Œ</td></tr></tbody></table>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 JWT çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>æ— çŠ¶æ€</strong>ï¼šæœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ Tokenï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›</li>
<li><strong>è·¨åŸŸå‹å¥½</strong>ï¼šé€šè¿‡ HTTP Header ä¼ é€’ï¼Œå¤©ç„¶æ”¯æŒè·¨åŸŸ</li>
<li><strong>ç§»åŠ¨ç«¯å‹å¥½</strong>ï¼šç§»åŠ¨ç«¯å­˜å‚¨ Token æ¯”ç®¡ç† Cookie ç®€å•</li>
<li><strong>ä¿¡æ¯ä¸°å¯Œ</strong>ï¼šToken æœ¬èº«åŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢</li>
</ol>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3 JWT çš„åŠ£åŠ¿</h3>
<p>å½“ç„¶ï¼ŒJWT ä¹Ÿä¸æ˜¯å®Œç¾çš„ï¼Œä¹Ÿæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<ol>
<li><strong>æ— æ³•ä¸»åŠ¨å¤±æ•ˆ</strong>ï¼šToken ä¸€æ—¦ç­¾å‘ï¼Œåœ¨è¿‡æœŸå‰æ— æ³•ä¸»åŠ¨æ’¤é”€ï¼ˆé™¤éç”¨é»‘åå•ï¼‰</li>
<li><strong>Token è¿‡å¤§</strong>ï¼šå¦‚æœ Payload é‡Œä¿¡æ¯å¤ªå¤šï¼ŒToken ä¼šå¾ˆé•¿</li>
<li><strong>å®‰å…¨é£é™©</strong>ï¼šå¦‚æœå¯†é’¥æ³„éœ²ï¼Œæ”»å‡»è€…å¯ä»¥ä¼ªé€ ä»»æ„ Token</li>
</ol>
<h2 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€Django åç«¯å®ç°</h2>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1 å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆå®‰è£…Â <code>djangorestframework-simplejwt</code>ï¼š</p>
<pre><code class="hljs">pip install djangorestframework-simplejwt
AIå†™ä»£ç 
</code></pre>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 é…ç½® Django Settings</h3>
<p>åœ¨Â <code>settings.py</code>Â ä¸­æ·»åŠ é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ³¨å†Œåº”ç”¨</span>
<span class="hljs-attr">INSTALLED_APPS</span> = [
 Â  Â <span class="hljs-comment"># ... å…¶ä»–åº”ç”¨</span>
 Â  Â <span class="hljs-string">'rest_framework_simplejwt'</span>,
]
â€‹
<span class="hljs-comment"># DRF é…ç½®é‰´æƒæ–¹å¼</span>
<span class="hljs-attr">REST_FRAMEWORK</span> = {
 Â  Â 'DEFAULT_AUTHENTICATION_CLASSES': (
 Â  Â  Â  Â 'rest_framework_simplejwt.authentication.JWTAuthentication',
 Â   )
}
â€‹
<span class="hljs-comment"># JWT é…ç½®</span>
<span class="hljs-attr">SIMPLE_JWT</span> = {
 Â  Â 'ACCESS_TOKEN_LIFETIME': datetime.timedelta(<span class="hljs-attr">days</span>=<span class="hljs-number">15</span>), Â <span class="hljs-comment"># è®¿é—®ä»¤ç‰Œæœ‰æ•ˆæœŸ</span>
 Â  Â 'REFRESH_TOKEN_LIFETIME': datetime.timedelta(<span class="hljs-attr">days</span>=<span class="hljs-number">15</span>), Â <span class="hljs-comment"># åˆ·æ–°ä»¤ç‰Œæœ‰æ•ˆæœŸ</span>
 Â  Â 'USER_ID_FIELD': 'id',
 Â  Â 'USER_ID_CLAIM': 'user_id',
}
AIå†™ä»£ç 
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>ACCESS_TOKEN_LIFETIME</code>ï¼šAccess Token çš„æœ‰æ•ˆæœŸï¼Œæˆ‘è®¾ç½®çš„æ˜¯ 15 å¤©</li>
<li><code>REFRESH_TOKEN_LIFETIME</code>ï¼šRefresh Token çš„æœ‰æ•ˆæœŸï¼Œç”¨äºåˆ·æ–° Access Token</li>
<li><code>USER_ID_FIELD</code>ï¼šç”¨æˆ·æ¨¡å‹çš„ ID å­—æ®µ</li>
<li><code>USER_ID_CLAIM</code>ï¼šToken ä¸­å­˜å‚¨ç”¨æˆ· ID çš„å­—æ®µå</li>
</ul>
<h3 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3 å®ç°ç™»å½•æ¥å£</h3>
<p>åœ¨Â <code>user/views.py</code>Â ä¸­å®ç°ç™»å½•è§†å›¾ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView
<span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> AllowAny
<span class="hljs-keyword">from</span> rest_framework_simplejwt.tokens <span class="hljs-keyword">import</span> RefreshToken
<span class="hljs-keyword">from</span> django.contrib.auth.hashers <span class="hljs-keyword">import</span> check_password
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse
<span class="hljs-keyword">import</span> json
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginView</span>(<span class="hljs-title class_ inherited__">APIView</span>):
 Â  Â permission_classes = [AllowAny] Â <span class="hljs-comment"># å…è®¸ä»»ä½•äººç™»å½•</span>
â€‹
 Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">self, request</span>):
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â data = json.loads(request.body)
 Â  Â  Â  Â  Â  Â username = data.get(<span class="hljs-string">'username'</span>)
 Â  Â  Â  Â  Â  Â password = data.get(<span class="hljs-string">'password'</span>)
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æŸ¥è¯¢ç”¨æˆ·</span>
 Â  Â  Â  Â  Â  Â user = SysUser.objects.get(username=username)
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># éªŒè¯å¯†ç </span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> check_password(password, user.password):
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> JsonResponse({<span class="hljs-string">'code'</span>: <span class="hljs-number">500</span>, <span class="hljs-string">'info'</span>: <span class="hljs-string">'ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ï¼'</span>})
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># ä½¿ç”¨ simplejwt ç”Ÿæˆ Token</span>
 Â  Â  Â  Â  Â  Â refresh = RefreshToken.for_user(user)
 Â  Â  Â  Â  Â  Â token = <span class="hljs-built_in">str</span>(refresh.access_token)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">except</span> SysUser.DoesNotExist:
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> JsonResponse({<span class="hljs-string">'code'</span>: <span class="hljs-number">500</span>, <span class="hljs-string">'info'</span>: <span class="hljs-string">'ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ï¼'</span>})
 Â  Â  Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">print</span>(e)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> JsonResponse({<span class="hljs-string">'code'</span>: <span class="hljs-number">500</span>, <span class="hljs-string">'info'</span>: <span class="hljs-string">'ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ï¼'</span>})
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># è¿”å› Token</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> JsonResponse({
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'code'</span>: <span class="hljs-number">200</span>, 
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'token'</span>: token, 
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'info'</span>: <span class="hljs-string">'ç™»å½•æˆåŠŸï¼'</span>
 Â  Â  Â   })
AIå†™ä»£ç 
</code></pre>
<p><strong>ä»£ç è§£æ</strong>ï¼š</p>
<ol>
<li><code>permission_classes = [AllowAny]</code>ï¼šç™»å½•æ¥å£ä¸éœ€è¦è®¤è¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®</li>
<li><code>check_password(password, user.password)</code>ï¼šDjango æä¾›çš„å¯†ç éªŒè¯å‡½æ•°ï¼Œä¼šè‡ªåŠ¨å¤„ç†å¯†ç å“ˆå¸Œ</li>
<li><code>RefreshToken.for_user(user)</code>ï¼šä¸ºç”¨æˆ·ç”Ÿæˆ Refresh Token</li>
<li><code>str(refresh.access_token)</code>ï¼šä» Refresh Token ä¸­æå– Access Token</li>
<li>è¿”å›çš„ Token æ ¼å¼ï¼š<code>Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></li>
</ol>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4 ä¿æŠ¤éœ€è¦è®¤è¯çš„æ¥å£</h3>
<p>å¯¹äºéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„æ¥å£ï¼Œä½¿ç”¨Â <code>IsAuthenticated</code>Â æƒé™ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> IsAuthenticated
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInfoView</span>(<span class="hljs-title class_ inherited__">APIView</span>):
 Â  Â permission_classes = [IsAuthenticated] Â <span class="hljs-comment"># éœ€è¦è®¤è¯</span>
â€‹
 Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, request</span>):
 Â  Â  Â  Â user = request.user Â <span class="hljs-comment"># JWT è®¤è¯åï¼Œrequest.user å°±æ˜¯å½“å‰ç”¨æˆ·</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> JsonResponse({
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'code'</span>: <span class="hljs-number">200</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'data'</span>: {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">'username'</span>: user.username,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">'email'</span>: user.email,
 Â  Â  Â  Â  Â   }
 Â  Â  Â   })
AIå†™ä»£ç 
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>permission_classes = [IsAuthenticated]</code>ï¼šåªæœ‰æºå¸¦æœ‰æ•ˆ Token çš„è¯·æ±‚æ‰èƒ½è®¿é—®</li>
<li><code>request.user</code>ï¼šJWT è®¤è¯ä¸­é—´ä»¶ä¼šè‡ªåŠ¨è§£æ Tokenï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯æ³¨å…¥åˆ° request.user</li>
</ul>
<h2 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››ã€Vue3 å‰ç«¯å®ç°</h2>
<h3 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1Â AxiosÂ è¯·æ±‚æ‹¦æˆªå™¨</h3>
<p>åœ¨Â <code>src/unit/request.ts</code>Â ä¸­é…ç½® Axios æ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨æ·»åŠ  Tokenï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> axios, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosError</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">"@/router"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
â€‹
<span class="hljs-keyword">const</span> httpServer = axios.<span class="hljs-title function_">create</span>({
 Â  Â <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:8000/'</span>,
 Â  Â <span class="hljs-attr">timeout</span>: <span class="hljs-number">300000</span>
})
â€‹
<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æ·»åŠ  Token</span>
httpServer.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
 Â   <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (token) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">headers</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â config.<span class="hljs-property">headers</span> = config.<span class="hljs-property">headers</span> || {}
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å»é™¤ token ä¸­å¯èƒ½å­˜åœ¨çš„ç©ºç™½å­—ç¬¦</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> cleanToken = token.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">''</span>);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ·»åŠ  Authorization Header</span>
 Â  Â  Â  Â  Â  Â config.<span class="hljs-property">headers</span>[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-string">`Bearer <span class="hljs-subst">${cleanToken}</span>`</span>;
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">return</span> config;
 Â   },
 Â   <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);
<span class="hljs-variable constant_">AI</span>å†™ä»£ç 
</code></pre>
<p><strong>ä»£ç è§£æ</strong>ï¼š</p>
<ol>
<li>ä»Â <code>localStorage</code>Â è·å– Token</li>
<li>å¦‚æœ Token å­˜åœ¨ï¼Œæ·»åŠ åˆ°è¯·æ±‚å¤´çš„Â <code>Authorization</code>Â å­—æ®µ</li>
<li>æ ¼å¼å¿…é¡»æ˜¯Â <code>Bearer &lt;token&gt;</code>ï¼Œæ³¨æ„Â <code>Bearer</code>Â åé¢æœ‰ä¸ªç©ºæ ¼</li>
<li><code>replace(/\s+/g, '')</code>ï¼šå»é™¤ Token ä¸­çš„ç©ºç™½å­—ç¬¦ï¼Œé˜²æ­¢æ ¼å¼é”™è¯¯</li>
</ol>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç† Token è¿‡æœŸ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç†é”™è¯¯</span>
httpServer.interceptors.response.use(
  (response: AxiosResponse) =&gt; {
 Â  Â <span class="hljs-keyword">return</span> response;
  },
  (<span class="hljs-type">error</span>: AxiosError) =&gt; {
 Â  Â <span class="hljs-keyword">if</span> (<span class="hljs-type">error</span>.response) {
 Â  Â  Â <span class="hljs-keyword">const</span> status = <span class="hljs-type">error</span>.response.status;
 Â  Â  Â <span class="hljs-keyword">switch</span> (status) {
 Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
 Â  Â  Â  Â  Â <span class="hljs-comment">// Token è¿‡æœŸæˆ–æ— æ•ˆ</span>
 Â  Â  Â  Â  Â localStorage.removeItem(<span class="hljs-string">'token'</span>) Â <span class="hljs-comment">// å…ˆåˆ é™¤æ— æ•ˆ Token</span>
 Â  Â  Â  Â  Â router.push(<span class="hljs-string">'/login'</span>) Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span>
 Â  Â  Â  Â  Â window.location.reload() Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ·æ–°é¡µé¢</span>
 Â  Â  Â  Â  Â ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>)
 Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>;
 Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
 Â  Â  Â  Â  Â <span class="hljs-comment">// æƒé™ä¸è¶³</span>
 Â  Â  Â  Â  Â ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æƒé™ä¸è¶³'</span>)
 Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>;
 Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
 Â  Â  Â  Â  Â <span class="hljs-comment">// æœåŠ¡å™¨é”™è¯¯</span>
 Â  Â  Â  Â  Â ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯'</span>)
 Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>;
 Â  Â   }
 Â   }
 Â  Â <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-type">error</span>);
  }
);
AIå†™ä»£ç 
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>401</code>Â çŠ¶æ€ç è¡¨ç¤º Token æ— æ•ˆæˆ–è¿‡æœŸ</li>
<li>æ”¶åˆ° 401 æ—¶ï¼Œå…ˆåˆ é™¤æœ¬åœ° Tokenï¼Œç„¶åè·³è½¬ç™»å½•é¡µ</li>
<li><code>window.location.reload()</code>ï¼šåˆ·æ–°é¡µé¢ï¼Œæ¸…é™¤æ‰€æœ‰çŠ¶æ€</li>
</ul>
<h3 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3 ç™»å½•æµç¨‹å®ç°</h3>
<p>åœ¨ç™»å½•é¡µé¢ä¸­ï¼Œè°ƒç”¨ç™»å½•æ¥å£å¹¶ä¿å­˜ Tokenï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
 Â <span class="hljs-keyword">try</span> {
 Â  Â <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/user/login'</span>, {
 Â  Â  Â <span class="hljs-attr">username</span>: loginForm.<span class="hljs-property">username</span>,
 Â  Â  Â <span class="hljs-attr">password</span>: loginForm.<span class="hljs-property">password</span>,
 Â   })
â€‹
 Â  Â <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
 Â  Â  Â <span class="hljs-comment">// ä¿å­˜ Token åˆ° localStorage</span>
 Â  Â  Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, res.<span class="hljs-property">token</span>)
 Â  Â  Â 
 Â  Â  Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>)
 Â  Â  Â 
 Â  Â  Â <span class="hljs-comment">// è·³è½¬åˆ°é¦–é¡µ</span>
 Â  Â  Â router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/'</span>)
 Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">info</span> || <span class="hljs-string">'ç™»å½•å¤±è´¥'</span>)
 Â   }
  } <span class="hljs-keyword">catch</span> (error) {
 Â  Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>)
  }
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç 
</code></pre>
<h3 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4 é€€å‡ºç™»å½•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = (<span class="hljs-params"/>) =&gt; {
 Â <span class="hljs-comment">// åˆ é™¤ Token</span>
 Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
 Â 
 Â <span class="hljs-comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span>
 Â router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/login'</span>)
 Â 
 Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å·²é€€å‡ºç™»å½•'</span>)
}
<span class="hljs-variable constant_">AI</span>å†™ä»£ç 
</code></pre>
<h2 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äº”ã€å®Œæ•´çš„è®¤è¯æµç¨‹</h2>
<h3 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1 æµç¨‹å›¾</h3>
<pre><code class="hljs"/></pre>
<h3 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2 è®¤è¯æµç¨‹è¯¦è§£</h3>
<p><strong>â‘ ç™»å½•é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </li>
<li>å‰ç«¯è°ƒç”¨ç™»å½•æ¥å£ï¼Œå‘é€ç”¨æˆ·åå¯†ç </li>
<li>åç«¯éªŒè¯ç”¨æˆ·åå¯†ç ï¼Œç”Ÿæˆ JWT Token</li>
<li>å‰ç«¯æ¥æ”¶ Tokenï¼Œå­˜å‚¨åˆ° localStorage</li>
</ul>
<p><strong>â‘¡è¯·æ±‚é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å‰ç«¯å‘èµ· API è¯·æ±‚</li>
<li>Axios è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨ä» localStorage è·å– Token</li>
<li>åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ Â <code>Authorization: Bearer {token}</code></li>
<li>åç«¯æ¥æ”¶è¯·æ±‚ï¼ŒéªŒè¯ Token ç­¾å</li>
<li>éªŒè¯é€šè¿‡åï¼Œä» Token ä¸­è§£æç”¨æˆ·ä¿¡æ¯</li>
<li>åç«¯è¿”å›æ•°æ®</li>
</ul>
<p><strong>â‘¢Token è¿‡æœŸå¤„ç†</strong>ï¼š</p>
<ul>
<li>å¦‚æœ Token è¿‡æœŸï¼Œåç«¯è¿”å› 401</li>
<li>å‰ç«¯å“åº”æ‹¦æˆªå™¨æ•è· 401</li>
<li>åˆ é™¤æœ¬åœ° Tokenï¼Œè·³è½¬ç™»å½•é¡µ</li>
</ul>
<h2 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…­æ€»ç»“</h2>
<p>JWT æ˜¯ä¸€ç§éå¸¸é€‚åˆå‰åç«¯åˆ†ç¦»æ¶æ„çš„é‰´æƒæ–¹æ¡ˆï¼Œå®ƒå…·æœ‰æ— çŠ¶æ€ã€è·¨åŸŸå‹å¥½ã€æ˜“äºæ‰©å±•ç­‰ä¼˜ç‚¹ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>JWT ç”± Headerã€Payloadã€Signature ä¸‰éƒ¨åˆ†ç»„æˆ</li>
<li>ä½¿ç”¨Â <code>Bearer {token}</code>Â æ ¼å¼åœ¨è¯·æ±‚å¤´ä¸­ä¼ é€’ Token</li>
<li>Token åªæ˜¯ Base64 ç¼–ç ï¼Œä¸è¦æ”¾æ•æ„Ÿä¿¡æ¯</li>
<li>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS å’Œå¼ºå¯†é’¥</li>
<li>å®ç° Token åˆ·æ–°æœºåˆ¶æå‡ç”¨æˆ·ä½“éªŒ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†åªä¼š console.log äº†ï¼è¿™ 15 ä¸ª Console è°ƒè¯•æŠ€å·§ï¼Œè®©ä½ çš„ Debug æ•ˆç‡ç¿»å€]]></title>    <link>https://juejin.cn/post/7594831933516103726</link>    <guid>https://juejin.cn/post/7594831933516103726</guid>    <pubDate>2026-01-14T03:39:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594831933516103726" data-draft-id="7594843125320450074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†åªä¼š console.log äº†ï¼è¿™ 15 ä¸ª Console è°ƒè¯•æŠ€å·§ï¼Œè®©ä½ çš„ Debug æ•ˆç‡ç¿»å€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-14T03:39:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜Agions"/> <meta itemprop="url" content="https://juejin.cn/user/360295545187751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†åªä¼š console.log äº†ï¼è¿™ 15 ä¸ª Console è°ƒè¯•æŠ€å·§ï¼Œè®©ä½ çš„ Debug æ•ˆç‡ç¿»å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295545187751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜Agions
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T03:39:34.000Z" title="Wed Jan 14 2026 03:39:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"console.log('åˆ°è¿™äº†')"
"console.log('åˆ°è¿™äº† 2')"
"console.log('åˆ°è¿™äº† 3')"
"console.log('ä¸ºä»€ä¹ˆä¸æ‰§è¡Œï¼Ÿï¼Ÿï¼Ÿ')"
â€”â€” æ¯ä¸ªç¨‹åºå‘˜çš„æ—¥å¸¸</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä½ çœŸçš„ä¼šç”¨ console å—ï¼Ÿ</h2>
<p>è®©æˆ‘çŒœçŒœä½ çš„è°ƒè¯•æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"data:"</span>, data)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"========== åˆ†å‰²çº¿ =========="</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åˆ°è¿™äº†"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åˆ°è¿™äº†2"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸ºä»€ä¹ˆä¸è¿›æ¥ï¼Ÿï¼Ÿï¼Ÿ"</span>)
</code></pre>
<p>å¦‚æœä½ ä¸­æªäº†ï¼Œåˆ«æ‹…å¿ƒï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººã€‚</p>
<p><strong>ä½†æ˜¯ï¼Œconsole å¯¹è±¡å…¶å®æœ‰è¶…è¿‡ 20 ä¸ªæ–¹æ³•ï¼Œè€Œå¤§å¤šæ•°äººåªä¼šç”¨ <code>console.log</code>ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘è¦å¸¦ä½ è§£é” console çš„å…¨éƒ¨æ½œåŠ›ã€‚</p>
<p>å­¦å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ çš„è°ƒè¯•æ•ˆç‡è‡³å°‘æå‡ 50%ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šåŸºç¡€è¿›é˜¶â€”â€”è®© console.log æ›´å¥½ç”¨</h2>
<h3 data-id="heading-2">1.1 æŠ€å·§ä¸€ï¼šç”¨å¯¹è±¡åŒ…è£¹å˜é‡å</h3>
<p>è¿™æ˜¯æœ€ç®€å•ä½†æœ€æœ‰ç”¨çš„æŠ€å·§ã€‚</p>
<p><strong>âŒ ä¸å¥½çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userName = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">const</span> userAge = <span class="hljs-number">25</span>
<span class="hljs-keyword">const</span> userEmail = <span class="hljs-string">"zhangsan@example.com"</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userName)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userAge)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userEmail)

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å¼ ä¸‰</span>
<span class="hljs-comment">// 25</span>
<span class="hljs-comment">// zhangsan@example.com</span>
<span class="hljs-comment">// é—®é¢˜ï¼šä½ æ ¹æœ¬ä¸çŸ¥é“å“ªä¸ªæ˜¯å“ªä¸ªï¼</span>
</code></pre>
<p><strong>âœ… å¥½çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userName = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">const</span> userAge = <span class="hljs-number">25</span>
<span class="hljs-keyword">const</span> userEmail = <span class="hljs-string">"zhangsan@example.com"</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ userName, userAge, userEmail })

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// { userName: 'å¼ ä¸‰', userAge: 25, userEmail: 'zhangsan@example.com' }</span>
<span class="hljs-comment">// æ¸…æ¸…æ¥šæ¥šï¼Œä¸€ç›®äº†ç„¶ï¼</span>
</code></pre>
<p><strong>è¿™ä¸ªæŠ€å·§åˆ©ç”¨äº† ES6 çš„å¯¹è±¡ç®€å†™è¯­æ³•ï¼Œå˜é‡åè‡ªåŠ¨æˆä¸ºå±æ€§åã€‚</strong></p>
<h3 data-id="heading-3">1.2 æŠ€å·§äºŒï¼šç»™è¾“å‡ºåŠ ä¸Š emoji æ ‡ç­¾</h3>
<p>å½“ä½ çš„æ§åˆ¶å°è¾“å‡ºå¾ˆå¤šçš„æ—¶å€™ï¼Œæ‰¾åˆ°ä½ è¦çš„é‚£æ¡ä¿¡æ¯å°±åƒå¤§æµ·æé’ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šç”¨ emoji åšè§†è§‰æ ‡è®°ï¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ” è°ƒè¯•ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ” æ­£åœ¨æŸ¥æ‰¾ç”¨æˆ·:"</span>, userId)

<span class="hljs-comment">// âœ… æˆåŠŸä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… ç”¨æˆ·ç™»å½•æˆåŠŸ:"</span>, user.<span class="hljs-property">name</span>)

<span class="hljs-comment">// âŒ é”™è¯¯ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âŒ ç™»å½•å¤±è´¥:"</span>, error.<span class="hljs-property">message</span>)

<span class="hljs-comment">// âš ï¸ è­¦å‘Šä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âš ï¸ ç”¨æˆ·æƒé™ä¸è¶³"</span>)

<span class="hljs-comment">// ğŸš€ æ€§èƒ½ç›¸å…³</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸš€ API å“åº”æ—¶é—´:"</span>, responseTime, <span class="hljs-string">"ms"</span>)

<span class="hljs-comment">// ğŸ“¦ æ•°æ®ç›¸å…³</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¦ æ¥æ”¶åˆ°çš„æ•°æ®:"</span>, data)

<span class="hljs-comment">// ğŸ”„ çŠ¶æ€å˜åŒ–</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”„ çŠ¶æ€æ›´æ–°:"</span>, oldState, <span class="hljs-string">"-&gt;"</span>, newState)
</code></pre>
<p><strong>åœ¨ä¸€å †é»‘ç™½æ–‡å­—ä¸­ï¼Œemoji ä¼šéå¸¸æ˜¾çœ¼ï¼Œè®©ä½ ä¸€çœ¼å°±èƒ½æ‰¾åˆ°å…³é”®ä¿¡æ¯ã€‚</strong></p>
<h3 data-id="heading-4">1.3 æŠ€å·§ä¸‰ï¼šä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }
<span class="hljs-keyword">const</span> action = <span class="hljs-string">"ç™»å½•"</span>
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>()

<span class="hljs-comment">// âŒ æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆä¸‘é™‹ä¸”éš¾è¯»ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ· "</span> + user.<span class="hljs-property">name</span> + <span class="hljs-string">" åœ¨ "</span> + timestamp + <span class="hljs-string">" æ‰§è¡Œäº† "</span> + action)

<span class="hljs-comment">// âœ… æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆæ¸…æ™°ä¼˜é›…ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${timestamp}</span>] ç”¨æˆ· <span class="hljs-subst">${user.name}</span> æ‰§è¡Œäº† <span class="hljs-subst">${action}</span>`</span>)

<span class="hljs-comment">// è¾“å‡ºï¼š[14:30:25] ç”¨æˆ· å¼ ä¸‰ æ‰§è¡Œäº† ç™»å½•</span>
</code></pre>
<h3 data-id="heading-5">1.4 æŠ€å·§å››ï¼šconsole.log çš„ CSS æ ·å¼</h3>
<p><strong>æ˜¯çš„ï¼Œä½ å¯ä»¥ç»™ console.log åŠ  CSS æ ·å¼ï¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºç¡€ç”¨æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"%cè¿™æ˜¯çº¢è‰²æ–‡å­—"</span>, <span class="hljs-string">"color: red"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"%cè¿™æ˜¯å¤§å·è“è‰²æ–‡å­—"</span>, <span class="hljs-string">"color: blue; font-size: 20px"</span>)

<span class="hljs-comment">// é«˜çº§ç”¨æ³•ï¼šå¤šç§æ ·å¼ç»„åˆ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
  <span class="hljs-string">"%c æˆåŠŸ %c æ“ä½œå·²å®Œæˆ"</span>,
  <span class="hljs-string">"background: #4CAF50; color: white; padding: 2px 6px; border-radius: 3px"</span>,
  <span class="hljs-string">"color: #4CAF50"</span>
)

<span class="hljs-comment">// å®ç”¨ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªæ¼‚äº®çš„æ—¥å¿—å‡½æ•°</span>
<span class="hljs-keyword">const</span> prettyLog = {
  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`%c âœ“ SUCCESS %c <span class="hljs-subst">${msg}</span>`</span>,
      <span class="hljs-string">"background: #4CAF50; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold"</span>,
      <span class="hljs-string">"color: #4CAF50"</span>
    ),
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`%c âœ— ERROR %c <span class="hljs-subst">${msg}</span>`</span>,
      <span class="hljs-string">"background: #f44336; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold"</span>,
      <span class="hljs-string">"color: #f44336"</span>
    ),
  <span class="hljs-attr">warning</span>: <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`%c âš  WARNING %c <span class="hljs-subst">${msg}</span>`</span>,
      <span class="hljs-string">"background: #ff9800; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold"</span>,
      <span class="hljs-string">"color: #ff9800"</span>
    ),
  <span class="hljs-attr">info</span>: <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`%c â„¹ INFO %c <span class="hljs-subst">${msg}</span>`</span>,
      <span class="hljs-string">"background: #2196F3; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold"</span>,
      <span class="hljs-string">"color: #2196F3"</span>
    ),
}

<span class="hljs-comment">// ä½¿ç”¨</span>
prettyLog.<span class="hljs-title function_">success</span>(<span class="hljs-string">"ç”¨æˆ·ç™»å½•æˆåŠŸ"</span>)
prettyLog.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç½‘ç»œè¯·æ±‚å¤±è´¥"</span>)
prettyLog.<span class="hljs-title function_">warning</span>(<span class="hljs-string">"API å³å°†åºŸå¼ƒ"</span>)
prettyLog.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å½“å‰ç‰ˆæœ¬: 2.0.0"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-6">ç¬¬äºŒç« ï¼šæ•°æ®å±•ç¤ºâ€”â€”è®©å¤æ‚æ•°æ®ä¸€ç›®äº†ç„¶</h2>
<h3 data-id="heading-7">2.1 æŠ€å·§äº”ï¼šconsole.table() â€”â€” è¡¨æ ¼å±•ç¤ºæ•°æ®</h3>
<p><strong>è¿™å¯èƒ½æ˜¯æœ€è¢«ä½ä¼°çš„ console æ–¹æ³•ã€‚</strong></p>
<p>å½“ä½ æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶ï¼Œ<code>console.log</code> çš„è¾“å‡ºæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> users = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"æå››"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">"ä¸Šæµ·"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">"å¹¿å·"</span> },
]

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(users)
<span class="hljs-comment">// è¾“å‡ºä¸€å †éš¾ä»¥é˜…è¯»çš„åµŒå¥—å¯¹è±¡...</span>
</code></pre>
<p><strong>ä½†å¦‚æœä½ ç”¨ <code>console.table()</code>ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(users)

<span class="hljs-comment">// è¾“å‡ºä¸€ä¸ªæ¼‚äº®çš„è¡¨æ ¼ï¼š</span>
<span class="hljs-comment">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-comment">// â”‚ (index) â”‚ id â”‚  name  â”‚ age â”‚  city  â”‚</span>
<span class="hljs-comment">// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-comment">// â”‚    0    â”‚ 1  â”‚ 'å¼ ä¸‰' â”‚ 25  â”‚ 'åŒ—äº¬' â”‚</span>
<span class="hljs-comment">// â”‚    1    â”‚ 2  â”‚ 'æå››' â”‚ 30  â”‚ 'ä¸Šæµ·' â”‚</span>
<span class="hljs-comment">// â”‚    2    â”‚ 3  â”‚ 'ç‹äº”' â”‚ 28  â”‚ 'å¹¿å·' â”‚</span>
<span class="hljs-comment">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p><strong>è¿˜å¯ä»¥åªæ˜¾ç¤ºç‰¹å®šåˆ—ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(users, [<span class="hljs-string">"name"</span>, <span class="hljs-string">"city"</span>])

<span class="hljs-comment">// åªæ˜¾ç¤º name å’Œ city åˆ—</span>
<span class="hljs-comment">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-comment">// â”‚ (index) â”‚  name  â”‚  city  â”‚</span>
<span class="hljs-comment">// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-comment">// â”‚    0    â”‚ 'å¼ ä¸‰' â”‚ 'åŒ—äº¬' â”‚</span>
<span class="hljs-comment">// â”‚    1    â”‚ 'æå››' â”‚ 'ä¸Šæµ·' â”‚</span>
<span class="hljs-comment">// â”‚    2    â”‚ 'ç‹äº”' â”‚ 'å¹¿å·' â”‚</span>
<span class="hljs-comment">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>API è¿”å›çš„æ•°æ®åˆ—è¡¨</li>
<li>æ•°æ®åº“æŸ¥è¯¢ç»“æœ</li>
<li>é…ç½®é¡¹å¯¹æ¯”</li>
<li>ä»»ä½•æ•°ç»„æˆ–å¯¹è±¡çš„å¯è§†åŒ–</li>
</ul>
<h3 data-id="heading-8">2.2 æŠ€å·§å…­ï¼šconsole.dir() â€”â€” æŸ¥çœ‹å¯¹è±¡çš„å®Œæ•´ç»“æ„</h3>
<p><code>console.log</code> æ‰“å° DOM å…ƒç´ æ—¶ï¼Œæ˜¾ç¤ºçš„æ˜¯ HTML ç»“æ„ã€‚</p>
<p><code>console.dir</code> æ‰“å° DOM å…ƒç´ æ—¶ï¼Œæ˜¾ç¤ºçš„æ˜¯å¯¹è±¡å±æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#app"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element)
<span class="hljs-comment">// è¾“å‡ºï¼š&lt;div id="app"&gt;...&lt;/div&gt;ï¼ˆHTML ç»“æ„ï¼‰</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">dir</span>(element)
<span class="hljs-comment">// è¾“å‡ºï¼šdiv#app çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼ˆå¯¹è±¡ç»“æ„ï¼‰</span>
<span class="hljs-comment">// åŒ…æ‹¬ï¼šclassName, id, innerHTML, style, onclick...</span>
</code></pre>
<p><strong>å½“ä½ éœ€è¦æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œç”¨ <code>console.dir</code>ã€‚</strong></p>
<h3 data-id="heading-9">2.3 æŠ€å·§ä¸ƒï¼šconsole.dirxml() â€”â€” æŸ¥çœ‹ XML/HTML ç»“æ„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#app"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">dirxml</span>(element)
<span class="hljs-comment">// ä»¥ XML/HTML æ ‘å½¢ç»“æ„å±•ç¤ºå…ƒç´ åŠå…¶å­å…ƒç´ </span>
</code></pre>
<hr/>
<h2 data-id="heading-10">ç¬¬ä¸‰ç« ï¼šåˆ†ç»„ä¸å±‚çº§â€”â€”è®©è¾“å‡ºæ›´æœ‰ç»„ç»‡</h2>
<h3 data-id="heading-11">3.1 æŠ€å·§å…«ï¼šconsole.group() â€”â€” åˆ†ç»„è¾“å‡º</h3>
<p>å½“ä½ æœ‰ä¸€å †ç›¸å…³çš„æ—¥å¿—æ—¶ï¼Œå¯ä»¥æŠŠå®ƒä»¬åˆ†ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å§“å: å¼ ä¸‰"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¹´é¾„: 25"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŸå¸‚: åŒ—äº¬"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"è®¢å•ä¿¡æ¯"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¢å•å·: 12345"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é‡‘é¢: Â¥99.00"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"çŠ¶æ€: å·²æ”¯ä»˜"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// â–¼ ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-comment">//     å§“å: å¼ ä¸‰</span>
<span class="hljs-comment">//     å¹´é¾„: 25</span>
<span class="hljs-comment">//     åŸå¸‚: åŒ—äº¬</span>
<span class="hljs-comment">// â–¼ è®¢å•ä¿¡æ¯</span>
<span class="hljs-comment">//     è®¢å•å·: 12345</span>
<span class="hljs-comment">//     é‡‘é¢: Â¥99.00</span>
<span class="hljs-comment">//     çŠ¶æ€: å·²æ”¯ä»˜</span>
</code></pre>
<h3 data-id="heading-12">3.2 æŠ€å·§ä¹ï¼šconsole.groupCollapsed() â€”â€” é»˜è®¤æŠ˜å çš„åˆ†ç»„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupCollapsed</span>(<span class="hljs-string">"è¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼ˆç‚¹å‡»å±•å¼€ï¼‰"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯ä¸€äº›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯..."</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é€šå¸¸ä¸éœ€è¦çœ‹ï¼Œä½†éœ€è¦æ—¶å¯ä»¥å±•å¼€"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ¯”å¦‚ï¼šå®Œæ•´çš„è¯·æ±‚å‚æ•°ã€å“åº”æ•°æ®ç­‰"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// â–¶ è¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼ˆç‚¹å‡»å±•å¼€ï¼‰  â† é»˜è®¤æ˜¯æŠ˜å çš„</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼ˆå¹³æ—¶ä¸çœ‹ï¼Œå‡ºé—®é¢˜æ—¶å±•å¼€ï¼‰</li>
<li>å¤§é‡çš„æ•°æ®è¾“å‡º</li>
<li>åµŒå¥—çš„å¯¹è±¡ç»“æ„</li>
</ul>
<h3 data-id="heading-13">3.3 æŠ€å·§åï¼šåµŒå¥—åˆ†ç»„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"ğŸ›’ è´­ç‰©è½¦"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"å•†å“åˆ—è¡¨"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"iPhone 15 Pro - Â¥8999"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AirPods Pro - Â¥1899"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"ä¼˜æƒ ä¿¡æ¯"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ»¡å‡: -Â¥500"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¼˜æƒ åˆ¸: -Â¥100"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ’° æ€»è®¡: Â¥10298"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// â–¼ ğŸ›’ è´­ç‰©è½¦</span>
<span class="hljs-comment">//     â–¼ å•†å“åˆ—è¡¨</span>
<span class="hljs-comment">//         iPhone 15 Pro - Â¥8999</span>
<span class="hljs-comment">//         AirPods Pro - Â¥1899</span>
<span class="hljs-comment">//     â–¼ ä¼˜æƒ ä¿¡æ¯</span>
<span class="hljs-comment">//         æ»¡å‡: -Â¥500</span>
<span class="hljs-comment">//         ä¼˜æƒ åˆ¸: -Â¥100</span>
<span class="hljs-comment">//     ğŸ’° æ€»è®¡: Â¥10298</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">ç¬¬å››ç« ï¼šæ€§èƒ½åˆ†æâ€”â€”æ‰¾å‡ºä»£ç ç“¶é¢ˆ</h2>
<h3 data-id="heading-15">4.1 æŠ€å·§åä¸€ï¼šconsole.time() â€”â€” æµ‹é‡ä»£ç æ‰§è¡Œæ—¶é—´</h3>
<p><strong>è¿™æ˜¯æ€§èƒ½è°ƒè¯•çš„ç¥å™¨ï¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"æ•°æ®å¤„ç†"</span>)

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›è€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">const</span> data = []
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
  data.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">id</span>: i, <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() })
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"æ•°æ®å¤„ç†"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šæ•°æ®å¤„ç†: 45.123ms</span>
</code></pre>
<p><strong>å¯ä»¥åŒæ—¶è®¡æ—¶å¤šä¸ªæ“ä½œï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"æ€»è€—æ—¶"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"è·å–æ•°æ®"</span>)
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/users"</span>)
<span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"è·å–æ•°æ®"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šè·å–æ•°æ®: 234.56ms</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"å¤„ç†æ•°æ®"</span>)
<span class="hljs-keyword">const</span> processedUsers = users.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> ({
  ...user,
  <span class="hljs-attr">fullName</span>: <span class="hljs-string">`<span class="hljs-subst">${user.firstName}</span> <span class="hljs-subst">${user.lastName}</span>`</span>,
}))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"å¤„ç†æ•°æ®"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šå¤„ç†æ•°æ®: 12.34ms</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"æ¸²æŸ“"</span>)
<span class="hljs-title function_">renderUsers</span>(processedUsers)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"æ¸²æŸ“"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šæ¸²æŸ“: 89.01ms</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"æ€»è€—æ—¶"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šæ€»è€—æ—¶: 335.91ms</span>
</code></pre>
<h3 data-id="heading-16">4.2 æŠ€å·§åäºŒï¼šconsole.timeLog() â€”â€” ä¸­é—´è®¡æ—¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">"å¤šæ­¥éª¤æ“ä½œ"</span>)

<span class="hljs-keyword">await</span> <span class="hljs-title function_">step1</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeLog</span>(<span class="hljs-string">"å¤šæ­¥éª¤æ“ä½œ"</span>, <span class="hljs-string">"æ­¥éª¤1å®Œæˆ"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šå¤šæ­¥éª¤æ“ä½œ: 100.00ms æ­¥éª¤1å®Œæˆ</span>

<span class="hljs-keyword">await</span> <span class="hljs-title function_">step2</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeLog</span>(<span class="hljs-string">"å¤šæ­¥éª¤æ“ä½œ"</span>, <span class="hljs-string">"æ­¥éª¤2å®Œæˆ"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šå¤šæ­¥éª¤æ“ä½œ: 250.00ms æ­¥éª¤2å®Œæˆ</span>

<span class="hljs-keyword">await</span> <span class="hljs-title function_">step3</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">"å¤šæ­¥éª¤æ“ä½œ"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šå¤šæ­¥éª¤æ“ä½œ: 400.00ms</span>
</code></pre>
<h3 data-id="heading-17">4.3 æŠ€å·§åä¸‰ï¼šconsole.count() â€”â€” è®¡æ•°å™¨</h3>
<p><strong>æƒ³çŸ¥é“æŸæ®µä»£ç æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Ÿ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">count</span>(<span class="hljs-string">"æŒ‰é’®ç‚¹å‡»"</span>)
  <span class="hljs-comment">// å…¶ä»–é€»è¾‘...</span>
}

<span class="hljs-comment">// ç‚¹å‡»3æ¬¡åï¼š</span>
<span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»: 1</span>
<span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»: 2</span>
<span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»: 3</span>

<span class="hljs-comment">// é‡ç½®è®¡æ•°å™¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">countReset</span>(<span class="hljs-string">"æŒ‰é’®ç‚¹å‡»"</span>)
</code></pre>
<p><strong>å®ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">component</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">count</span>(<span class="hljs-string">`<span class="hljs-subst">${component}</span> æ¸²æŸ“æ¬¡æ•°`</span>)
  <span class="hljs-comment">// æ¸²æŸ“é€»è¾‘...</span>
}

<span class="hljs-comment">// æ£€æŸ¥ç»„ä»¶æ˜¯å¦æœ‰ä¸å¿…è¦çš„é‡å¤æ¸²æŸ“</span>
<span class="hljs-title function_">render</span>(<span class="hljs-string">"Header"</span>) <span class="hljs-comment">// Header æ¸²æŸ“æ¬¡æ•°: 1</span>
<span class="hljs-title function_">render</span>(<span class="hljs-string">"Header"</span>) <span class="hljs-comment">// Header æ¸²æŸ“æ¬¡æ•°: 2  â† ä¸ºä»€ä¹ˆæ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ</span>
<span class="hljs-title function_">render</span>(<span class="hljs-string">"Header"</span>) <span class="hljs-comment">// Header æ¸²æŸ“æ¬¡æ•°: 3  â† å¯èƒ½æœ‰æ€§èƒ½é—®é¢˜ï¼</span>
</code></pre>
<hr/>
<h2 data-id="heading-18">ç¬¬äº”ç« ï¼šé”™è¯¯è¿½è¸ªâ€”â€”å¿«é€Ÿå®šä½é—®é¢˜</h2>
<h3 data-id="heading-19">5.1 æŠ€å·§åå››ï¼šconsole.trace() â€”â€” æ‰“å°è°ƒç”¨æ ˆ</h3>
<p><strong>å½“ä½ æƒ³çŸ¥é“"è¿™ä¸ªå‡½æ•°æ˜¯ä»å“ªé‡Œè¢«è°ƒç”¨çš„"æ—¶ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">functionA</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">functionB</span>()
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">functionB</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">functionC</span>()
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">functionC</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">trace</span>(<span class="hljs-string">"è°ƒç”¨æ ˆè¿½è¸ª"</span>)
}

<span class="hljs-title function_">functionA</span>()

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// è°ƒç”¨æ ˆè¿½è¸ª</span>
<span class="hljs-comment">//     at functionC (script.js:10)</span>
<span class="hljs-comment">//     at functionB (script.js:6)</span>
<span class="hljs-comment">//     at functionA (script.js:2)</span>
<span class="hljs-comment">//     at script.js:13</span>
</code></pre>
<p><strong>è¿™åœ¨è°ƒè¯•å¤æ‚çš„å›è°ƒé“¾æˆ–äº‹ä»¶å¤„ç†æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</strong></p>
<h3 data-id="heading-20">5.2 æŠ€å·§åäº”ï¼šconsole.assert() â€”â€” æ¡ä»¶æ–­è¨€</h3>
<p><strong>åªæœ‰å½“æ¡ä»¶ä¸º false æ—¶æ‰è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }

<span class="hljs-comment">// å¦‚æœæ¡ä»¶ä¸º trueï¼Œä»€ä¹ˆéƒ½ä¸è¾“å‡º</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(user.<span class="hljs-property">name</span>, <span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>)

<span class="hljs-comment">// å¦‚æœæ¡ä»¶ä¸º falseï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(user.<span class="hljs-property">age</span> &gt;= <span class="hljs-number">18</span>, <span class="hljs-string">"ç”¨æˆ·å¿…é¡»æˆå¹´"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">"ç”¨æˆ·é‚®ç®±ä¸èƒ½ä¸ºç©º"</span>)
<span class="hljs-comment">// è¾“å‡ºï¼šAssertion failed: ç”¨æˆ·é‚®ç®±ä¸èƒ½ä¸ºç©º</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(order, <span class="hljs-string">"è®¢å•ä¸èƒ½ä¸ºç©º"</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(order.<span class="hljs-property">items</span>?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"è®¢å•å¿…é¡»åŒ…å«å•†å“"</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(order.<span class="hljs-property">totalAmount</span> &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"è®¢å•é‡‘é¢å¿…é¡»å¤§äº0"</span>)

  <span class="hljs-comment">// å¦‚æœæ‰€æœ‰æ–­è¨€éƒ½é€šè¿‡ï¼Œç»§ç»­å¤„ç†...</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-21">ç¬¬å…­ç« ï¼šå®æˆ˜æŠ€å·§â€”â€”æ—¥å¸¸å¼€å‘ä¸­çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-22">6.1 åˆ›å»ºä¸€ä¸ªå¢å¼ºç‰ˆ Logger</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// logger.js - ä¸€ä¸ªå®ç”¨çš„æ—¥å¿—å·¥å…·</span>

<span class="hljs-keyword">const</span> isDev = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">"development"</span>

<span class="hljs-keyword">const</span> logger = {
  <span class="hljs-comment">// åŸºç¡€æ—¥å¿—ï¼ˆåªåœ¨å¼€å‘ç¯å¢ƒè¾“å‡ºï¼‰</span>
  <span class="hljs-attr">log</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isDev) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“"</span>, ...args)
  },

  <span class="hljs-comment">// ä¿¡æ¯æ—¥å¿—</span>
  <span class="hljs-attr">info</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isDev)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">"%c â„¹ï¸ INFO "</span>,
        <span class="hljs-string">"background: #2196F3; color: white; border-radius: 3px"</span>,
        ...args
      )
  },

  <span class="hljs-comment">// æˆåŠŸæ—¥å¿—</span>
  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isDev)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">"%c âœ… SUCCESS "</span>,
        <span class="hljs-string">"background: #4CAF50; color: white; border-radius: 3px"</span>,
        ...args
      )
  },

  <span class="hljs-comment">// è­¦å‘Šæ—¥å¿—</span>
  <span class="hljs-attr">warn</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"âš ï¸"</span>, ...args) <span class="hljs-comment">// è­¦å‘Šåœ¨ç”Ÿäº§ç¯å¢ƒä¹Ÿè¾“å‡º</span>
  },

  <span class="hljs-comment">// é”™è¯¯æ—¥å¿—</span>
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ"</span>, ...args) <span class="hljs-comment">// é”™è¯¯åœ¨ç”Ÿäº§ç¯å¢ƒä¹Ÿè¾“å‡º</span>
  },

  <span class="hljs-comment">// åˆ†ç»„æ—¥å¿—</span>
  <span class="hljs-attr">group</span>: <span class="hljs-function">(<span class="hljs-params">label, fn</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!isDev) <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`ğŸ“¦ <span class="hljs-subst">${label}</span>`</span>)
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">fn</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()
    <span class="hljs-keyword">return</span> result
  },

  <span class="hljs-comment">// è®¡æ—¶æ—¥å¿—</span>
  <span class="hljs-attr">time</span>: <span class="hljs-keyword">async</span> (label, fn) =&gt; {
    <span class="hljs-keyword">if</span> (!isDev) <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">`â±ï¸ <span class="hljs-subst">${label}</span>`</span>)
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">`â±ï¸ <span class="hljs-subst">${label}</span>`</span>)
    <span class="hljs-keyword">return</span> result
  },

  <span class="hljs-comment">// è¡¨æ ¼æ—¥å¿—</span>
  <span class="hljs-attr">table</span>: <span class="hljs-function">(<span class="hljs-params">data, columns</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isDev) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(data, columns)
  },
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> logger

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">"./logger"</span>

logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åº”ç”¨å¯åŠ¨"</span>)
logger.<span class="hljs-title function_">success</span>(<span class="hljs-string">"ç”¨æˆ·ç™»å½•æˆåŠŸ"</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> })
logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"API å³å°†åºŸå¼ƒ"</span>)
logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç½‘ç»œè¯·æ±‚å¤±è´¥"</span>, error)

logger.<span class="hljs-title function_">group</span>(<span class="hljs-string">"ç”¨æˆ·æ•°æ®"</span>, <span class="hljs-function">() =&gt;</span> {
  logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å§“å:"</span>, user.<span class="hljs-property">name</span>)
  logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¹´é¾„:"</span>, user.<span class="hljs-property">age</span>)
})

<span class="hljs-keyword">await</span> logger.<span class="hljs-title function_">time</span>(<span class="hljs-string">"æ•°æ®åŠ è½½"</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()
})
</code></pre>
<h3 data-id="heading-23">6.2 è°ƒè¯• API è¯·æ±‚</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª API è°ƒè¯•æ‹¦æˆªå™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">debugFetch</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, options = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> requestId = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupCollapsed</span>(
    <span class="hljs-string">`ğŸŒ API è¯·æ±‚ [<span class="hljs-subst">${requestId}</span>] <span class="hljs-subst">${options.method || <span class="hljs-string">"GET"</span>}</span> <span class="hljs-subst">${url}</span>`</span>
  )

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¤ è¯·æ±‚å‚æ•°:"</span>, {
    url,
    <span class="hljs-attr">method</span>: options.<span class="hljs-property">method</span> || <span class="hljs-string">"GET"</span>,
    <span class="hljs-attr">headers</span>: options.<span class="hljs-property">headers</span>,
    <span class="hljs-attr">body</span>: options.<span class="hljs-property">body</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(options.<span class="hljs-property">body</span>) : <span class="hljs-literal">undefined</span>,
  })

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">`â±ï¸ å“åº”æ—¶é—´ [<span class="hljs-subst">${requestId}</span>]`</span>)

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, options)
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">json</span>()

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">`â±ï¸ å“åº”æ—¶é—´ [<span class="hljs-subst">${requestId}</span>]`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¥ å“åº”çŠ¶æ€:"</span>, response.<span class="hljs-property">status</span>, response.<span class="hljs-property">statusText</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¦ å“åº”æ•°æ®:"</span>, data)

    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ è¯·æ±‚å¤±è´¥"</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… è¯·æ±‚æˆåŠŸ"</span>)
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()
    <span class="hljs-keyword">return</span> response
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">`â±ï¸ å“åº”æ—¶é—´ [<span class="hljs-subst">${requestId}</span>]`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ è¯·æ±‚å¼‚å¸¸:"</span>, error.<span class="hljs-property">message</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()
    <span class="hljs-keyword">throw</span> error
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">debugFetch</span>(<span class="hljs-string">"/api/users"</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }),
})
</code></pre>
<h3 data-id="heading-24">6.3 è°ƒè¯• React ç»„ä»¶æ¸²æŸ“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ React ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">count</span>(<span class="hljs-string">`UserProfile æ¸²æŸ“ (userId: <span class="hljs-subst">${userId}</span>)`</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”„ UserProfile useEffect è§¦å‘"</span>, { userId })

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ§¹ UserProfile æ¸…ç†"</span>, { userId })
    }
  }, [userId])

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"ğŸ“Š UserProfile æ¸²æŸ“è¯¦æƒ…"</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Props:"</span>, { userId })
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ¸²æŸ“æ—¶é—´:"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>())
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-25">6.4 è°ƒè¯•çŠ¶æ€å˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªçŠ¶æ€å˜åŒ–è¿½è¸ªå™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createStateTracker</span>(<span class="hljs-params">initialState, name = <span class="hljs-string">"State"</span></span>) {
  <span class="hljs-keyword">let</span> state = initialState

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> state,
    <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">newState</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`ğŸ”„ <span class="hljs-subst">${name}</span> å˜åŒ–`</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ—§å€¼:"</span>, state)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ–°å€¼:"</span>, newState)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">trace</span>(<span class="hljs-string">"è°ƒç”¨æ¥æº"</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>()

      state = newState
      <span class="hljs-keyword">return</span> state
    },
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> userState = <span class="hljs-title function_">createStateTracker</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">false</span> }, <span class="hljs-string">"UserState"</span>)

userState.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">true</span> })
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// â–¼ ğŸ”„ UserState å˜åŒ–</span>
<span class="hljs-comment">//     æ—§å€¼: { name: '', loggedIn: false }</span>
<span class="hljs-comment">//     æ–°å€¼: { name: 'å¼ ä¸‰', loggedIn: true }</span>
<span class="hljs-comment">//     è°ƒç”¨æ¥æº: (è°ƒç”¨æ ˆ)</span>
</code></pre>
<hr/>
<h2 data-id="heading-26">ç¬¬ä¸ƒç« ï¼šConsole æ–¹æ³•é€ŸæŸ¥è¡¨</h2>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Console æ–¹æ³•é€ŸæŸ¥è¡¨                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ“ åŸºç¡€è¾“å‡º                                                             â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.log</span>()      æ™®é€šæ—¥å¿—è¾“å‡º                                     â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.info</span>()     ä¿¡æ¯æ—¥å¿—ï¼ˆæŸäº›æµè§ˆå™¨æœ‰ç‰¹æ®Šå›¾æ ‡ï¼‰                  â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.warn</span>()     è­¦å‘Šæ—¥å¿—ï¼ˆé»„è‰²èƒŒæ™¯ï¼‰                              â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.error</span>()    é”™è¯¯æ—¥å¿—ï¼ˆçº¢è‰²èƒŒæ™¯ï¼‰                              â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“Š æ•°æ®å±•ç¤º                                                             â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.table</span>()    ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºæ•°ç»„/å¯¹è±¡                          â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.dir</span>()      ä»¥å¯¹è±¡å½¢å¼å±•ç¤ºï¼ˆæŸ¥çœ‹å±æ€§å’Œæ–¹æ³•ï¼‰                  â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.dirxml</span>()   ä»¥ XML/<span class="hljs-selector-tag">HTML</span> å½¢å¼å±•ç¤º DOM å…ƒç´                     â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“ åˆ†ç»„ç®¡ç†                                                             â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.group</span>()         åˆ›å»ºå±•å¼€çš„åˆ†ç»„                              â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.groupCollapsed</span>() åˆ›å»ºæŠ˜å çš„åˆ†ç»„                             â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.groupEnd</span>()      ç»“æŸå½“å‰åˆ†ç»„                                â”‚
â”‚                                                                         â”‚
â”‚  â±ï¸ æ€§èƒ½åˆ†æ                                                             â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.time</span>()     å¼€å§‹è®¡æ—¶                                         â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.timeLog</span>()  è¾“å‡ºä¸­é—´æ—¶é—´                                     â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.timeEnd</span>()  ç»“æŸè®¡æ—¶å¹¶è¾“å‡º                                   â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.count</span>()    è®¡æ•°å™¨ï¼ˆç»Ÿè®¡è°ƒç”¨æ¬¡æ•°ï¼‰                           â”‚
â”‚                                                                         â”‚
â”‚  ğŸ” è°ƒè¯•è¿½è¸ª                                                             â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.trace</span>()    æ‰“å°è°ƒç”¨æ ˆ                                       â”‚
â”‚  â”œâ”€ console<span class="hljs-selector-class">.assert</span>()   æ¡ä»¶æ–­è¨€ï¼ˆæ¡ä»¶ä¸º false æ—¶è¾“å‡ºï¼‰                  â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.clear</span>()    æ¸…ç©ºæ§åˆ¶å°                                       â”‚
â”‚                                                                         â”‚
â”‚  ğŸ¨ æ ·å¼è¾“å‡º                                                             â”‚
â”‚  â””â”€ console<span class="hljs-selector-class">.log</span>('%cæ–‡å­—', 'CSSæ ·å¼')  å¸¦æ ·å¼çš„è¾“å‡º                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-27">ç¬¬å…«ç« ï¼šå¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-28">8.1 ç”Ÿäº§ç¯å¢ƒè¦ç§»é™¤ console</h3>
<p><strong>é—®é¢˜ï¼š</strong> console è¯­å¥ä¼šå½±å“æ€§èƒ½ï¼Œä¹Ÿå¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶</span>
<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è°ƒè¯•ä¿¡æ¯'</span>)
}

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šä½¿ç”¨æ„å»ºå·¥å…·ç§»é™¤</span>
<span class="hljs-comment">// webpack é…ç½®ï¼ˆä½¿ç”¨ terser-webpack-pluginï¼‰</span>
<span class="hljs-attr">optimization</span>: {
  <span class="hljs-attr">minimizer</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
      <span class="hljs-attr">terserOptions</span>: {
        <span class="hljs-attr">compress</span>: {
          <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰ console</span>
        },
      },
    }),
  ],
}

<span class="hljs-comment">// æ–¹æ¡ˆ3ï¼šä½¿ç”¨ babel æ’ä»¶</span>
<span class="hljs-comment">// babel.config.js</span>
<span class="hljs-attr">plugins</span>: [
  [<span class="hljs-string">'transform-remove-console'</span>, { <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'warn'</span>] }]
]

<span class="hljs-comment">// æ–¹æ¡ˆ4ï¼šä½¿ç”¨ ESLint è§„åˆ™</span>
<span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-attr">rules</span>: {
  <span class="hljs-string">'no-console'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'error'</span> : <span class="hljs-string">'warn'</span>
}
</code></pre>
<h3 data-id="heading-29">8.2 console.log çš„å¼‚æ­¥é™·é˜±</h3>
<p><strong>é—®é¢˜ï¼š</strong> console.log æ‰“å°å¯¹è±¡æ—¶ï¼Œæ˜¾ç¤ºçš„æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å¿«ç…§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj) <span class="hljs-comment">// å¯èƒ½æ˜¾ç¤º { count: 1 } è€Œä¸æ˜¯ { count: 0 }</span>
obj.<span class="hljs-property">count</span> = <span class="hljs-number">1</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šä½¿ç”¨ JSON.stringify</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj))

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šä½¿ç”¨å±•å¼€è¿ç®—ç¬¦åˆ›å»ºæµ…æ‹·è´</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ ...obj })

<span class="hljs-comment">// æ–¹æ¡ˆ3ï¼šä½¿ç”¨ JSON.parse + JSON.stringify åˆ›å»ºæ·±æ‹·è´</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)))

<span class="hljs-comment">// æ–¹æ¡ˆ4ï¼šä½¿ç”¨ structuredCloneï¼ˆç°ä»£æµè§ˆå™¨ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">structuredClone</span>(obj))
</code></pre>
<h3 data-id="heading-30">8.3 å¤§å¯¹è±¡çš„æ€§èƒ½é—®é¢˜</h3>
<p><strong>é—®é¢˜ï¼š</strong> æ‰“å°å¤§å¯¹è±¡ä¼šå¯¼è‡´æµè§ˆå™¨å¡é¡¿ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸å¥½ï¼šæ‰“å°æ•´ä¸ªå¤§æ•°ç»„</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hugeArray) <span class="hljs-comment">// å¯èƒ½æœ‰ 10000 ä¸ªå…ƒç´ </span>

<span class="hljs-comment">// âœ… å¥½ï¼šåªæ‰“å°éœ€è¦çš„éƒ¨åˆ†</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•°ç»„é•¿åº¦:"</span>, hugeArray.<span class="hljs-property">length</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å‰10ä¸ªå…ƒç´ :"</span>, hugeArray.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€ä¸ªå…ƒç´ :"</span>, hugeArray[<span class="hljs-number">0</span>])
</code></pre>
<hr/>
<h2 data-id="heading-31">ç»“è¯­ï¼šä» console.log åˆ° console å¤§å¸ˆ</h2>
<p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº† 15 ä¸ª console è°ƒè¯•æŠ€å·§ï¼š</p>
<ol>
<li><strong>ç”¨å¯¹è±¡åŒ…è£¹å˜é‡å</strong> - è‡ªåŠ¨æ˜¾ç¤ºå˜é‡å</li>
<li><strong>ç”¨ emoji æ ‡ç­¾</strong> - è§†è§‰æ ‡è®°ï¼Œå¿«é€Ÿå®šä½</li>
<li><strong>æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–</strong> - æ¸…æ™°ä¼˜é›…çš„è¾“å‡º</li>
<li><strong>CSS æ ·å¼</strong> - è®©æ—¥å¿—æ›´é†’ç›®</li>
<li><strong>console.table()</strong> - è¡¨æ ¼å±•ç¤ºæ•°æ®</li>
<li><strong>console.dir()</strong> - æŸ¥çœ‹å¯¹è±¡ç»“æ„</li>
<li><strong>console.dirxml()</strong> - æŸ¥çœ‹ XML/HTML ç»“æ„</li>
<li><strong>console.group()</strong> - åˆ†ç»„è¾“å‡º</li>
<li><strong>console.groupCollapsed()</strong> - æŠ˜å åˆ†ç»„</li>
<li><strong>åµŒå¥—åˆ†ç»„</strong> - å±‚çº§ç»“æ„</li>
<li><strong>console.time()</strong> - æµ‹é‡æ‰§è¡Œæ—¶é—´</li>
<li><strong>console.timeLog()</strong> - ä¸­é—´è®¡æ—¶</li>
<li><strong>console.count()</strong> - è®¡æ•°å™¨</li>
<li><strong>console.trace()</strong> - è°ƒç”¨æ ˆè¿½è¸ª</li>
<li><strong>console.assert()</strong> - æ¡ä»¶æ–­è¨€</li>
</ol>
<p><strong>è®°ä½ï¼šå¥½çš„è°ƒè¯•ä¹ æƒ¯èƒ½è®©ä½ çš„å¼€å‘æ•ˆç‡ç¿»å€ã€‚</strong></p>
<p>ä¸‹æ¬¡å½“ä½ æƒ³å†™ <code>console.log('åˆ°è¿™äº†')</code> çš„æ—¶å€™ï¼Œæƒ³æƒ³æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-32">é™„å½•ï¼šConsole å¿«æ·é”®</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æµè§ˆå™¨æ§åˆ¶å°å¿«æ·é”®ï¼š</span>

<span class="hljs-string">æ‰“å¼€æ§åˆ¶å°ï¼š</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">Windows/Linux:</span> <span class="hljs-string">F12</span> <span class="hljs-string">æˆ–</span> <span class="hljs-string">Ctrl</span> <span class="hljs-string">+</span> <span class="hljs-string">Shift</span> <span class="hljs-string">+</span> <span class="hljs-string">J</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">Mac:</span> <span class="hljs-string">Cmd</span> <span class="hljs-string">+</span> <span class="hljs-string">Option</span> <span class="hljs-string">+</span> <span class="hljs-string">J</span>

<span class="hljs-string">æ§åˆ¶å°å†…æ“ä½œï¼š</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ¸…ç©ºæ§åˆ¶å°:</span> <span class="hljs-string">Ctrl</span> <span class="hljs-string">+</span> <span class="hljs-string">L</span> <span class="hljs-string">(Windows)</span> <span class="hljs-string">/</span> <span class="hljs-string">Cmd</span> <span class="hljs-string">+</span> <span class="hljs-string">K</span> <span class="hljs-string">(Mac)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å¤šè¡Œè¾“å…¥:</span> <span class="hljs-string">Shift</span> <span class="hljs-string">+</span> <span class="hljs-string">Enter</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ‰§è¡Œä»£ç :</span> <span class="hljs-string">Enter</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸Šä¸€æ¡å‘½ä»¤:</span> <span class="hljs-string">â†‘</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸‹ä¸€æ¡å‘½ä»¤:</span> <span class="hljs-string">â†“</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">è‡ªåŠ¨è¡¥å…¨:</span> <span class="hljs-string">Tab</span>
</code></pre>
<hr/>
<p><em>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·åˆ†äº«ç»™ä½ é‚£ä¸ªè¿˜åœ¨å†™ <code>console.log('111')</code> çš„åŒäº‹ã€‚</em></p>
<p><em>ä¹Ÿè®¸ä»–éœ€è¦çŸ¥é“ï¼šconsole çš„ä¸–ç•Œï¼Œè¿œæ¯”ä½ æƒ³è±¡çš„ç²¾å½©ã€‚</em> ğŸ¨</p>
<hr/>
<p><em>æœ€åï¼Œé€ç»™æ‰€æœ‰ç¨‹åºå‘˜ä¸€å¥è¯ï¼š</em></p>
<p><strong>"è°ƒè¯•çš„è‰ºæœ¯ï¼Œåœ¨äºé—®å¯¹é—®é¢˜ï¼Œè€Œä¸æ˜¯æ‰“æ›´å¤šçš„ logã€‚"</strong> ğŸ”</p>
<p><em>æ„¿ä½ çš„ bug è¶Šæ¥è¶Šå°‘ï¼Œè°ƒè¯•è¶Šæ¥è¶Šå¿«ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½çªç ´ï¼šæ˜Ÿå›¾å¹³å°æ¶æ„ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7594731175405518888</link>    <guid>https://juejin.cn/post/7594731175405518888</guid>    <pubDate>2026-01-14T05:38:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594731175405518888" data-draft-id="7592922036093173775" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½çªç ´ï¼šæ˜Ÿå›¾å¹³å°æ¶æ„ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T05:38:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½çªç ´ï¼šæ˜Ÿå›¾å¹³å°æ¶æ„ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:38:39.000Z" title="Wed Jan 14 2026 05:38:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    32
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»38åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="zenburn">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#3f3f3f;color:#dcdcdc}.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#e3ceab}.hljs-template-tag{color:#dcdcdc}.hljs-number{color:#8cd0d3}.hljs-attribute,.hljs-template-variable,.hljs-variable{color:#efdcbc}.hljs-literal{color:#efefaf}.hljs-subst{color:#8f8f8f}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title,.hljs-type{color:#efef8f}.hljs-bullet,.hljs-link,.hljs-symbol{color:#dca3a3}.hljs-built_in,.hljs-builtin-name,.hljs-deletion,.hljs-string{color:#cc9393}.hljs-addition,.hljs-comment,.hljs-meta,.hljs-quote{color:#7f9f7f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>å¼•è¨€</strong></h2>
<p>éšç€è´§æ‹‰æ‹‰ä¸šåŠ¡çš„å¿«é€Ÿæ‰©å±•ä¸åœºæ™¯å¤æ‚åº¦çš„æå‡ï¼Œæ˜Ÿå›¾å¹³å°ä½œä¸ºå®¢æœç³»ç»Ÿçš„æ ¸å¿ƒæ¢çº½ï¼Œä¸ä»…æ‰¿è½½é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å…³é”®åŠŸèƒ½ï¼Œè¿˜è‚©è´Ÿç€ä¿éšœæœåŠ¡ç¨³å®šä¸ç”¨æˆ·ä½“éªŒçš„é‡ä»»ã€‚ç„¶è€Œï¼Œç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé¢‘ç¹æš´éœ²å‡ºæ•°æ®åº“å‹åŠ›è¿‡å¤§ã€æ¥å£å“åº”æ—¶é—´è¿‡æ…¢ã€èµ„æºæ¶ˆè€—é«˜ç­‰æ€§èƒ½ç“¶é¢ˆï¼Œç»™æœåŠ¡ç¨³å®šæ€§å¸¦æ¥äº†ä¸¥å³»æŒ‘æˆ˜ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæ˜Ÿå›¾å¹³å°é€šè¿‡æ¨¡å—åŒ–ã€è½»é‡åŒ–åŠå¯æ‰©å±•æ€§çš„æ¶æ„è®¾è®¡ï¼Œç³»ç»Ÿæ€§åœ°ä¼˜åŒ–äº†æµç¨‹å¼•æ“ä¸æ‰§è¡Œæœºåˆ¶ï¼Œä»è€Œæœ‰æ•ˆç¼“è§£æ€§èƒ½å‹åŠ›ï¼Œæå‡äº†ç³»ç»Ÿè¿è¡Œæ•ˆç‡ä¸ç¨³å®šæ€§ã€‚æœ¬æ–‡å°†ç»“åˆæ¶æ„è®¾è®¡ä¸ä¼˜åŒ–å®è·µï¼Œæ¢è®¨æ˜Ÿå›¾å¹³å°åœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­çš„æ€§èƒ½ä¼˜åŒ–æ€è·¯ä¸æˆæœï¼Œä¸ºå…³é”®æŠ€æœ¯åœºæ™¯æä¾›å‚è€ƒã€‚</p>
<p>å¼€ç¯‡æ–‡ç« ï¼š[APIçµæ´»å®šä¹‰+æé€Ÿé©±åŠ¨ï¼šæ˜Ÿå›¾å¹³å°æŠ€æœ¯æ¶æ„ä¸ä¼˜åŒ–å®è·µ  <a href="https://juejin.cn/post/7515142228441317411" target="_blank" title="https://juejin.cn/post/7515142228441317411">juejin.cn/post/751514â€¦</a></p>
<h2 data-id="heading-1"><strong>å¹³å°æ¦‚è¿°</strong></h2>
<p><strong>æ˜Ÿå›¾å¹³å°</strong>ï¼šå…¨æ–¹ä½çš„"æ¥å£ç®¡"ï¼Œé›†é…ç½®åŒ–ã€é«˜å¤ç”¨å’Œè‡ªå®šä¹‰èƒ½åŠ›äºä¸€ä½“ï¼Œä¸ºä¸šåŠ¡æ¥å£çš„è°ƒç”¨ä¸è°ƒè¯•æä¾›äº†ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å…¶æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ”¯æŒæ‰€æœ‰HTTP/SOA/SSE/MCPæ¥å£çš„é…ç½®ã€è°ƒè¯•åŠè°ƒç”¨ï¼Œå¹¶ä¸”æ”¯æŒè‡ªå®šä¹‰æµç¨‹ç¼–æ’ï¼Œå¯é’ˆå¯¹è¯·æ±‚å‚æ•°ã€è¯·æ±‚å¤´ä¸å“åº”æ•°æ®è¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼Œæå¤§ä¸°å¯Œäº†ä¸šåŠ¡æ¥å£åœºæ™¯ï¼Œä»"è§„åˆ™åŒ–ä½¿ç”¨"æ‹“å±•åˆ°"å®šåˆ¶åŒ–ç®¡ç†"ï¼Œå®ç°æ¥å£é…ç½®çš„çµæ´»æ€§ä¸é«˜æ•ˆæ€§ã€‚</p>
<h3 data-id="heading-2"><strong>é¡¹ç›®èƒŒæ™¯</strong></h3>
<p>åœ¨ç°ä»£ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå„æ¨¡å—ä¹‹é—´éœ€è¦é€šè¿‡APIæ¥å£è¿›è¡Œæ•°æ®ä¸æœåŠ¡çš„é«˜æ•ˆè”é€šã€‚é¢å¯¹å¿«é€Ÿå˜æ›´çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä»…ä¾èµ–å®šåˆ¶åŒ–å¼€å‘æˆæœ¬è¿‡é«˜ä¸”æ‰©å±•æ€§ä¸è¶³ã€‚å› æ­¤ï¼ŒäºŸéœ€ä¸€ä¸ªé›†ä¸­ç®¡ç†APIæ¥å£çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ä¸šåŠ¡äººå‘˜èƒ½å¤Ÿåœ¨æ— éœ€åå¤å¯¹æ¥ç ”å‘çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿé€‰æ‹©æ¥å£å¹¶å®Œæˆé…ç½®åŒ–ç»‘å®šã€‚è¿™ä¸ä»…ä¼˜åŒ–äº†æ¥å£ç®¡ç†ä¸å¤ç”¨æ•ˆç‡ï¼Œè¿˜æœ‰æ•ˆé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæå‡æ•´ä½“è¿è¥èƒ½åŠ›ã€‚</p>
<p><strong>æ˜Ÿå›¾å¹³å°</strong>ä¾¿æ˜¯åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹å­•è‚²è€Œç”Ÿï¼Œä½œä¸ºä¸€æ¬¾åŠŸèƒ½å…¨é¢ä¸”çµæ´»çš„"æ¥å£ç®¡å®¶"ï¼Œå®ƒä»¥é…ç½®åŒ–ã€é«˜å¤ç”¨ä¸è‡ªå®šä¹‰èƒ½åŠ›ä¸ºæ ¸å¿ƒï¼Œæä¾›äº†ä¸€ç«™å¼çš„æ¥å£è°ƒç”¨ä¸è°ƒè¯•è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3"><strong>ç«å“åˆ†æä¸äº§å“å¯¹æ¯”</strong></h3>
<p>ä¸ºäº†æ›´å…¨é¢åœ°è¯„ä¼°æ˜Ÿå›¾å¹³å°åœ¨å¸‚åœºä¸­çš„ç«äº‰åŠ›ï¼Œæˆ‘ä»¬é€‰å–äº†ä»£è¡¨æ€§çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆä¾‹å¦‚ Post***ã€Api***ï¼‰ï¼Œå¹¶ç»“åˆä¸»æµå¼€æºç±»å¼•æ“ï¼ˆFlowableã€Activitiç­‰ï¼‰ï¼Œè¿›è¡Œäº†åŠŸèƒ½ã€åœºæ™¯é€‚é…æ€§ç­‰å¤šç»´åº¦çš„å¯¹æ¯”åˆ†æã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9835288ba10b47e5958f8584199ebb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=JLc84DJttatcTW2mJ5KwXfGQtSA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>æ¶æ„è®¾è®¡</strong></h2>
<p>è‰¯å¥½çš„æ¶æ„æ˜¯ç³»ç»Ÿç¨³å®šé«˜æ•ˆè¿è¡Œçš„åŸºçŸ³ã€‚ä¼˜ç§€çš„æ¶æ„è®¾è®¡ä¸ä»…å¥ å®šäº†å¼€å‘è¿­ä»£å’ŒåŠŸèƒ½æ‰©å±•çš„åšå®åŸºç¡€ï¼ŒåŒæ—¶æœ‰æ•ˆé™ä½äº†é‡å¤å¼€å‘ä¸ç»´æŠ¤æˆæœ¬ã€‚åœ¨é¢å¯¹å¿«é€Ÿå˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œçµæ´»çš„æ¶æ„è®¾è®¡è¿˜èƒ½åŠ©åŠ›ç³»ç»Ÿæ€§èƒ½çš„æŒç»­ä¼˜åŒ–ï¼Œä½¿å¼€å‘è¿‡ç¨‹æ›´å…·å¼¹æ€§ï¼ŒåŒæ—¶ä¿éšœç³»ç»Ÿåç»­ç»´æŠ¤ã€æ‰©å±•å’Œé«˜æ€§èƒ½è¿è¡Œå¾—ä»¥å¹³ç¨³å®ç°ã€‚</p>
<h3 data-id="heading-5"><strong>æ•´ä½“æ¶æ„å›¾</strong></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7cf2667da204b5b8f29f3e778b1d816~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=NhNdLyiY3qZXoVPuiESGsmCfyKs%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<h3 data-id="heading-6"><strong>è®¾è®¡åŸåˆ™</strong></h3>
<h4 data-id="heading-7"><strong>æ¨¡å—åŒ–</strong></h4>
<p>æ¨¡å—åŒ–è®¾è®¡å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œæœ‰æ•ˆå‡å°‘æ¨¡å—é—´ç›¸äº’ä¾èµ–ï¼Œæå‡è¿è¡Œç¨³å®šæ€§ã€‚å…¶ä¸­ï¼Œå„æ¨¡å—çš„èŒè´£åˆ’åˆ†æ˜ç¡®ï¼Œæœ‰åŠ©äºé™ä½å¼€å‘å¤æ‚åº¦ï¼Œå¹¶ä¸ºä¸šåŠ¡çµæ´»æ‰©å±•æä¾›å¯é æ”¯æ’‘ã€‚å…³é”®æ¨¡å—è®¾è®¡å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>é…ç½®æ¨¡å—</strong><br/>
ç‹¬ç«‹éƒ¨ç½²çš„é…ç½®æœåŠ¡ï¼Œèƒ½å¤Ÿæ”¯æŒåœ¨é«˜ä¸šåŠ¡å³°å€¼æœŸé—´å¿«é€Ÿæ–°å¢ä¸è°ƒæ•´é…ç½®ï¼Œå¹¶åœ¨é…ç½®ä¿®æ”¹åå³æ—¶è°ƒè¯•ï¼Œä¸ºè¿è¥å›¢é˜Ÿæä¾›æ›´çµæ´»çš„æ“ä½œç©ºé—´ã€‚</p>
</li>
<li>
<p><strong>è¿è¡Œæ¨¡å—</strong><br/>
è¿è¡Œæ¨¡å—æ‰¿è½½äº†æ ¸å¿ƒä¸šåŠ¡è°ƒç”¨ï¼Œé€šè¿‡å°†è¿è¡Œæ¨¡å—æ‹†åˆ†ç‹¬ç«‹éƒ¨ç½²ï¼Œæœ‰æ•ˆé™ä½å…¶ä»–æ¨¡å—å¯¹ç³»ç»Ÿè¿è¡Œæ—¶çš„å¹²æ‰°ï¼Œç¡®ä¿æ¥å£è°ƒç”¨çš„é«˜æ•ˆä¸æŒç»­ç¨³å®šã€‚</p>
</li>
<li>
<p>Â <strong>æ‰§è¡Œæµæ°´æ¨¡å—</strong><br/>
æ‰§è¡Œæµæ°´çš„å†™å…¥å’Œå±•ç¤ºå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œé€šè¿‡å¼‚æ­¥æ¶ˆæ¯çš„è§£è€¦ï¼Œéš”ç¦»æ¥å£è°ƒç”¨å’Œæµæ°´æ•°æ®å­˜ç›˜ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿè¿è¡Œæ•ˆç‡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8"><strong>è½»é‡åŒ–</strong></h4>
<p>ä¸ºäº†é™ä½å¤æ‚åº¦ã€æå‡æ•´ä½“æ€§èƒ½ï¼Œæ˜Ÿå›¾å¹³å°çš„æ¶æ„éµå¾ªè½»é‡åŒ–è®¾è®¡ç†å¿µï¼Œåœ¨å®ç°æ ¸å¿ƒåŠŸèƒ½çš„åŒæ—¶å°½é‡å‡å°‘ä¸å¿…è¦çš„é€»è¾‘è´Ÿæ‹…ï¼Œä½¿ç³»ç»Ÿæ›´ä¸ºç®€æ´é«˜æ•ˆï¼š</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆ</strong><br/>
è½»é‡åŒ–çš„ä½“ç³»ä»…èšç„¦äºæ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬å‚æ•°æ ¡éªŒã€é¢„å¤„ç†ã€æ•°æ®ç»„è£…ä»¥åŠæ¥å£è¯·æ±‚ï¼Œé¿å…é¢å¤–å†—ä½™é€»è¾‘ï¼Œä»è€Œç¡®ä¿å¹³å°æ•´ä½“è¿è¡Œçš„é«˜æ•ˆæ€§å’Œç®€æ´æ€§ã€‚</p>
</li>
<li>
<p><strong>è‡ªä¸»ç ”å‘çš„è½»é‡çº§æµç¨‹å¼•æ“</strong><br/>
æ˜Ÿå›¾å¹³å°é‡‡ç”¨è‡ªä¸»ç ”å‘çš„é«˜æ€§èƒ½è½»é‡çº§æµç¨‹å¼•æ“ï¼Œä¸å¸‚é¢ä¸Šç°æœ‰çš„æˆç†Ÿæ–¹æ¡ˆç›¸æ¯”æ›´ä¸ºç²¾ç®€ï¼Œå¯é«˜æ•ˆæ”¯æŒé«˜å¹¶å‘åœºæ™¯ã€‚è¯¥å¼•æ“ä¸æ˜Ÿå›¾å¹³å°çš„æ¥å£æµç¨‹å®Œç¾å…¼å®¹ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å¤æ‚ä¸šåŠ¡æµç¨‹çš„è¿è¡Œæ•ˆç‡ã€‚</p>
</li>
</ul>
<p>â˜† - æµç¨‹å¼•æ“è¿è¡Œæ—¶ï¼ˆUMLï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/011db2fbfe7146bf82cb2363e1d04a9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=957BrdKd11%2F%2F%2BI%2Fi%2F3%2BLL16WJ2w%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<p><strong>æµç¨‹å¼•æ“è¿è¡Œæœºåˆ¶</strong></p>
<p>å¹³å°çš„æµç¨‹å¼•æ“å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>å†…æ ¸è½»é‡çº§ï¼Œå¯æ”¯æŒé«˜å¹¶å‘å¹¶è¡Œå¤„ç†ï¼›</li>
<li>åµŒåˆæ˜Ÿå›¾å¹³å°æ¥å£ï¼Œä¿éšœæµç¨‹æ¥å£é…ç½®ä¸è¿è¡Œçš„é«˜æ•ˆååŒã€‚</li>
</ul>
<h4 data-id="heading-9"><strong>å¯æ‰©å±•</strong></h4>
<p>ä¸ºäº†æ»¡è¶³æœªæ¥åœºæ™¯çš„å¤šæ ·åŒ–éœ€æ±‚ï¼Œæ˜Ÿå›¾å¹³å°åº•å±‚æ¶æ„é‡‡ç”¨æ’ä»¶åŒ–è®¾è®¡ï¼Œå…·å¤‡æé«˜çš„çµæ´»æ€§ä¸æ‰©å±•æ€§ã€‚é€šè¿‡ç±»ä¼¼SPIï¼ˆService Provider Interfaceï¼‰çš„æœºåˆ¶ï¼Œåº•å±‚å¼•æ“ç»Ÿä¸€æä¾›æ ‡å‡†æ¥å£ï¼Œå¹¶æä¾›é»˜è®¤å®ç°ï¼Œä¸šåŠ¡æ–¹å¯é€šè¿‡æ‰©å±•æœºåˆ¶å¿«é€Ÿæ¥å…¥ç‰¹å®šåŠŸèƒ½ã€‚</p>
<p><strong>æ‰©å±•ç»„ä»¶è®¾è®¡</strong>ï¼š</p>
<ul>
<li><strong>ç›‘å¬å™¨ï¼ˆListenerï¼‰</strong><br/>
ç³»ç»Ÿå¯åŠ¨æ—¶æ£€ç´¢å¹¶æ³¨å†Œå®ç°çš„æ’ä»¶ï¼Œé€šè¿‡ä¸šåŠ¡çº¿å’Œä¸šåŠ¡ç±»å‹å®Œæˆå½’ç±»ï¼Œç¡®ä¿æ‰©å±•é€»è¾‘å¯å¿«é€ŸåŠ è½½ä¸åˆ†å‘ã€‚</li>
<li><strong>æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰</strong><br/>
å®šä¹‰ç»Ÿä¸€çš„æ‰§è¡Œæµç¨‹ä¸è§„èŒƒï¼Œæ”¯æŒå‰ç½®é¢„å¤„ç†å’Œåç½®å¤„ç†çš„é’©å­æ¥å£ï¼Œä¾¿äºå®šåˆ¶åŒ–çš„ä¸šåŠ¡æ‰©å±•éœ€æ±‚ã€‚</li>
<li><strong>æ‰§è¡Œå¼•æ“ï¼ˆExecution Engineï¼‰</strong><br/>
æä¾›å¯¹å¤–ç»Ÿä¸€çš„æ‰§è¡Œå™¨å…¥å£ï¼Œéšè—åº•å±‚å¤æ‚çš„å¯»å€é€»è¾‘ï¼Œå¼€å‘è€…å¯ç›´æ¥è°ƒç”¨ï¼Œç®€åŒ–äº†è°ƒç”¨æ“ä½œï¼Œæé«˜äº†åŠŸèƒ½å¤ç”¨æ€§ã€‚</li>
</ul>
<h2 data-id="heading-10"><strong>æŒ‘æˆ˜&amp;ç—›ç‚¹</strong></h2>
<p>åœ¨æ˜Ÿå›¾å¹³å°çš„æ¶æ„è®¾è®¡å’Œæ—©æœŸè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´äº†è¯¸å¤šå¤æ‚çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚å°½ç®¡ç³»ç»Ÿçš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªé«˜æ•ˆã€å¯æ‹“å±•ä¸”ç¨³å®šçš„æ¶æ„ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡å¼€å‘å’Œç³»ç»Ÿå®ç°ä¸­ï¼Œä¾ç„¶æœ‰è®¸å¤šå…³é”®é—®é¢˜éœ€è¦è§£å†³ã€‚ä¸€ä¸ªä¼˜ç§€ã€ç¨³å®šè¿è¡Œçš„ç³»ç»Ÿç»éä¸€è¹´è€Œå°±ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨å¹³å°æ—©æœŸå¼€å‘ä¸ä¼˜åŒ–è¿‡ç¨‹ä¸­æ‰€é¢ä¸´çš„æ ¸å¿ƒç—›ç‚¹æ€»ç»“ï¼š</p>
<h3 data-id="heading-11"><strong>é¡¹ç›®å·¥ç¨‹è…åŒ–</strong></h3>
<p>éšç€å¹³å°åŠŸèƒ½çš„ä¸æ–­è¿­ä»£å’Œä¸šåŠ¡çš„é£é€Ÿå˜åŒ–ï¼Œå¼€å‘å›¢é˜Ÿåœ¨æ¶æ„è®¾è®¡å’Œæ—¥å¸¸å¼€å‘ä¸­é‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>å¼€å‘æ•ˆç‡ä½</strong><br/>
é¢å¯¹ä¸šåŠ¡éœ€æ±‚çš„é¢‘ç¹è°ƒæ•´å’Œæ—¥ç›Šå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¼€å‘äººå‘˜éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´å¯¹ä»£ç è¿›è¡Œä¿®æ­£å’Œç»´æŠ¤ã€‚ä½æ•ˆçš„å¼€å‘æµç¨‹æå¤§åœ°å½±å“äº†é¡¹ç›®çš„äº¤ä»˜æ•ˆç‡ã€‚</li>
<li><strong>ä»£ç ç®¡ç†å›°éš¾</strong><br/>
ç”±äºä¸šåŠ¡è¿­ä»£è¿…é€Ÿï¼Œä»£ç åº“è§„æ¨¡å¤§å¹…è†¨èƒ€ï¼Œå¯¼è‡´æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦é€æ­¥å¢åŠ ã€‚åœ¨ä»£ç å¯ç»´æŠ¤æ€§å’Œæ¨¡å—å¯æ‰©å±•æ€§æ–¹é¢ï¼Œå¼€å‘äººå‘˜é¢ä¸´ç€æ›´å¤§çš„ç®¡æ§éš¾åº¦ã€‚</li>
<li><strong>ç¨³å®šæ€§é—®é¢˜</strong><br/>
ä¸€äº›é—®é¢˜è¢«æš´éœ²åœ¨é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œä¾‹å¦‚ç”±äºç¼ºä¹ä¸¥è°¨çš„è®¾è®¡è§„èŒƒå¯¼è‡´çš„æ¥å£ä¸ä¸€è‡´æ€§ã€æ¨¡å—é—´è°ƒç”¨å¼‚å¸¸ç­‰ï¼Œè¿™ç§ä¸ç¨³å®šæ€§åœ¨é¢å¯¹å¤§è§„æ¨¡è¯·æ±‚æ—¶å°¤ä¸ºæ˜¾è‘—ã€‚</li>
<li><strong>é‡å¤åŠ³åŠ¨å¤š</strong><br/>
ä¸šåŠ¡åœºæ™¯å¤šæ ·ä¸”çµæ´»ï¼Œå¼€å‘äººå‘˜å¸¸å¸¸éœ€è¦ç¼–å†™å¤§é‡é‡å¤æ€§ä»£ç ï¼Œä»¥åº”å¯¹å„ç±»æ¥å£è°ƒç”¨å’Œå‚æ•°é€‚é…éœ€æ±‚ã€‚è¿™ä¸ä»…é€ æˆäº†æ—¶é—´å’Œèµ„æºçš„æµªè´¹ï¼Œè¿˜å¢åŠ äº†å·¥ç¨‹å‡ºé”™çš„é£é™©ã€‚</li>
</ul>
<h3 data-id="heading-12"><strong>æ€§èƒ½ä¸ç¨³å®šæ€§å‹åŠ›</strong></h3>
<p>åœ¨ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œéšç€æµé‡çš„å¢é•¿å’Œä¸šåŠ¡é«˜å³°æœŸçš„åˆ°æ¥ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€äº›æ˜¾è‘—çš„æ€§èƒ½çŸ­æ¿ï¼š</p>
<ul>
<li><strong>æ•°æ®åº“å‹åŠ›å¤§</strong><br/>
é«˜å¹¶å‘çš„æµç¨‹æ¥å£è¯·æ±‚ä¼šäº§ç”Ÿæˆåƒä¸Šä¸‡çš„è¿è¡Œæ•°æ®ï¼Œæµç¨‹æ‰§è¡Œæµæ°´çš„å¹¶å‘å†™å…¥å¯¹æ•°æ®åº“é€ æˆäº†æå¤§çš„å­˜å‚¨å’Œå†™å…¥å‹åŠ›ã€‚</li>
<li><strong>CPUå ç”¨é«˜</strong><br/>
ä¸šåŠ¡åœ¨é«˜å³°æœŸæµé‡æ¿€å¢ï¼ŒCPUå ç”¨ç‡éšä¹‹æ˜¾è‘—ä¸Šå‡ï¼ŒæœåŠ¡è´Ÿè½½é•¿æœŸç»´æŒåœ¨é«˜æ°´å¹³ã€‚ä¸ºç¼“è§£æ­¤é—®é¢˜ï¼ŒçŸ­æœŸå†…åªèƒ½é€šè¿‡å¢åŠ æœºå™¨é…ç½®ï¼ˆå‡é…ï¼‰æˆ–æ‰©å®¹é›†ç¾¤æ¥è¿›è¡Œä¸´æ—¶æ•‘æ€¥ã€‚</li>
<li><strong>å†…å­˜æ¶ˆè€—è¿‡å¤§</strong><br/>
åœ¨é«˜æµé‡åœºæ™¯ä¸‹ï¼ŒæœåŠ¡å¯¹å†…å­˜çš„éœ€æ±‚æ¿€å¢ï¼Œéƒ¨åˆ†æœºå™¨çš„å†…å­˜ä½¿ç”¨æ¥è¿‘ä¸Šé™ï¼Œå¨èƒåˆ°æœåŠ¡çš„ç¨³å®šæ€§ã€‚</li>
<li><strong>æ¥å£RTï¼ˆå“åº”æ—¶é—´ï¼‰è¿‡æ…¢</strong><br/>
å¹³å°æ•´ä½“æ¥å£å“åº”æ—¶é—´ï¼ˆRTï¼‰æ™®éåé«˜ï¼Œéƒ¨åˆ†æµç¨‹æ¥å£RTç”šè‡³è¾¾åˆ° <strong>5ç§’</strong>ï¼Œæ¥è¿‘ä¸å¯ç”¨çŠ¶æ€ï¼ˆç‰¹åˆ«æ˜¯åœ¨å¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå½±å“å°¤ä¸ºä¸¥é‡ï¼‰ã€‚</li>
<li><strong>æ€§èƒ½ä¸ç¨³å®š</strong><br/>
ç³»ç»Ÿåœ¨é«˜é¢‘è°ƒç”¨åœºæ™¯ä¸‹å­˜åœ¨æ€§èƒ½æ³¢åŠ¨ï¼Œå¶å°”ä¼šå‡ºç°è¯·æ±‚å“åº”æ—¶é—´çš„çªåˆºç°è±¡ï¼ˆRTè¶…é«˜ï¼‰ã€‚è¿™ç§æ€§èƒ½ä¸Šçš„ä¸ç¨³å®šæ€§å¯¼è‡´ç”¨æˆ·ä½“éªŒä¸å¯é¢„æµ‹ï¼Œä¸¥é‡å½±å“æœåŠ¡å¯é æ€§ã€‚</li>
</ul>
<h2 data-id="heading-13"><strong>æ€§èƒ½ä¼˜åŒ–ä¹‹è·¯</strong></h2>
<p>åœ¨æ˜Ÿå›¾å¹³å°çš„æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»é—®é¢˜å…¥æ‰‹ï¼Œé€šè¿‡å¯¹æ¶æ„ã€æ‰§è¡Œé€»è¾‘å’Œæ’ä»¶åŒ–ç®¡ç†çš„å…¨é¢ä¼˜åŒ–ï¼Œæœ‰æ•ˆç¼“è§£äº†é«˜å¹¶å‘å’Œå¤æ‚ä¸šåŠ¡ä¸‹çš„ç³»ç»Ÿæ€§èƒ½å‹åŠ›ï¼Œå¹¶æ„å»ºäº†ä¸€å¥—çµæ´»ã€å¯æ‰©å±•çš„è¿è¡Œæœºåˆ¶ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å®è·µåˆ†äº«ï¼š</p>
<h3 data-id="heading-14"><strong>åº”ç”¨æŒ‡æ ‡åˆ†æ</strong></h3>
<ul>
<li><strong>CPU:</strong> ä¸šåŠ¡é«˜å³°æœŸæµé‡å¿«é€Ÿå¢é•¿ï¼ŒCPUä½¿ç”¨ç‡ç»´æŒåœ¨é«˜æ°´å¹³ï¼ŒæœåŠ¡è´Ÿè½½æ— æ³•æœ‰æ•ˆä¸‹é™ï¼ŒçŸ­æœŸåªèƒ½é€šè¿‡å‡é…å’Œæ‰©å®¹æ¥ç¼“è§£ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e208d48a2d034129b4ead5e4b40348af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=0PhXV%2FjP9MAHcI8pioLGIG9WVu0%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<ul>
<li><strong>JVM</strong>ï¼šGCæ¬¡æ•°ã€GC å›æ”¶æ—¶é—´ç­‰æŒ‡æ ‡å‡ä¸å¤ªå¥åº·</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ffb3b44f7541478b908b4f2d9b5b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=jfGFvkTec0Feo6HWs5KSGl1kylQ%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/045b98a6530742deb229c34b0ec92c7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=6q0UgZkQ7KsndScGBp4vev%2BnImU%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<ul>
<li><strong>æ¥å£å“åº”å»¶è¿Ÿ(RT):</strong> æ•´ä½“æœåŠ¡çš„RTæ™®éåé«˜ï¼Œå½±å“ä¸šåŠ¡ä½“éªŒ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30d63ffb36b54a28bc1b3a88d6ff0712~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=wAeinTIfv2lqAAsmi6C8qXDW%2FB4%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22018f8ba44b4121b54963a55b250de3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=QGoDOEb9a%2FZ%2F6Pt3Jv%2BLAT8HS4c%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<h4 data-id="heading-15">å‘ç°é—®é¢˜</h4>






<table><thead><tr><th><div class="joplin-table-wrapper"><table><tbody><tr><th><ul><li><strong>CPUè´Ÿè½½å±…é«˜ä¸ä¸‹</strong><br/>ä¸šåŠ¡é«˜å³°æœŸæµé‡å¿«é€Ÿå¢é•¿ï¼Œ<strong>CPUä½¿ç”¨ç‡ç»´æŒåœ¨é«˜æ°´å¹³</strong>ï¼ŒæœåŠ¡è´Ÿè½½æ— æ³•æœ‰æ•ˆä¸‹é™ï¼ŒçŸ­æœŸåªèƒ½é€šè¿‡å‡é…å’Œæ‰©å®¹æ¥ç¼“è§£ã€‚</li><li><strong>å†…å­˜æ¶ˆè€—å¤§</strong><br/>ç³»ç»Ÿçš„æ¥å£è°ƒç”¨é€»è¾‘å¤æ‚ï¼Œå› ä¸šåŠ¡é«˜å³°æœŸå†…å­˜æ¶ˆè€—é•¿æ—¶é—´å±…é«˜ä¸ä¸‹ï¼Œéƒ¨åˆ†æœåŠ¡ç”šè‡³æ¿’ä¸´<strong>å†…å­˜è€—å°½</strong>çš„è¾¹ç¼˜ã€‚</li><li><strong>æ¥å£å“åº”å»¶è¿Ÿï¼ˆRTï¼‰è¿‡æ…¢</strong><br/>æ•´ä½“æœåŠ¡çš„RTæ™®éåé«˜ï¼Œä¸ªåˆ«æµç¨‹æ¥å£çš„å“åº”æ—¶é—´ï¼ˆRTï¼‰åœ¨é«˜å³°æ—¶æ®µç”šè‡³è¾¾åˆ° <strong>5ç§’</strong>ï¼Œé€¼è¿‘ä¸å¯ç”¨çŠ¶æ€ï¼Œä¸¥é‡å½±å“ä¸šåŠ¡ä½“éªŒã€‚</li><li><strong>æ•°æ®åº“å‹åŠ›å¤§</strong><br/>é«˜å¹¶å‘çš„æµç¨‹æ¥å£è¯·æ±‚ç”Ÿæˆäº†å¤§é‡çš„è¿è¡Œæ•°æ®ï¼Œé¢‘ç¹çš„å¹¶å‘å†™å…¥ä½¿æ•°æ®åº“æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå¢åŠ äº†ç³»ç»Ÿæ€»ä½“<strong>å»¶è¿Ÿ</strong>é£é™©ã€‚</li><li><strong>æ€§èƒ½æ³¢åŠ¨å¤§</strong><br/>æœåŠ¡æ€§èƒ½ç¼ºä¹<strong>ç¨³å®šæ€§</strong>ï¼Œæ—¶è€Œå‡ºç°RTçªåˆºç°è±¡ï¼Œå¯¼è‡´ç”¨æˆ·è¯·æ±‚å“åº”æ—¶é—´äº§ç”Ÿæ˜æ˜¾æ³¢åŠ¨ï¼Œå¯é æ€§å—åˆ°å¨èƒã€‚</li></ul></th></tr></tbody></table></div></th></tr></thead></table>
<h3 data-id="heading-16"><strong>è‡ªåŠ¨æ³¨å†Œæ’ä»¶</strong></h3>
<p>ä¸ºäº†æœ‰æ•ˆåº”å¯¹ä¸Šè¿°æ€§èƒ½æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºå¹¶å®ç°äº†"è‡ªåŠ¨æ³¨å†Œæ‰§è¡Œå™¨"æ¡†æ¶ã€‚å®ƒä»¥è‡ªåŠ¨åŒ–å’Œæ ‡å‡†åŒ–ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡çº¦å®šä¼˜äºé…ç½®çš„åŸåˆ™ä¼˜åŒ–ç³»ç»Ÿçš„æ‰§è¡Œé€»è¾‘ï¼Œå¹¶åœ¨å¼€å‘ä¸è¿è¡Œè¿‡ç¨‹ä¸­æå‡å¼€å‘æ•ˆç‡ä¸ç³»ç»Ÿç¨³å®šæ€§ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></p>
<ul>
<li><strong>è‡ªåŠ¨æ³¨å†Œ</strong><br/>
æ— éœ€æ‰‹åŠ¨æ“ä½œï¼Œä¸šåŠ¡é€»è¾‘èƒ½å¤ŸæŒ‰ç…§çº¦å®šè‡ªåŠ¨æ³¨å†Œåˆ°æ¡†æ¶ä¸­ï¼Œé¿å…å†—ç¹æ­¥éª¤ï¼ŒåŒæ—¶å‡å°‘äººå·¥ç–æ¼å¸¦æ¥çš„é£é™©ã€‚</li>
<li><strong>æ’ä»¶åŒ–è®¾è®¡</strong><br/>
æ¡†æ¶é‡‡ç”¨æ’ä»¶åŒ–çš„æ‰©å±•æ–¹å¼ï¼Œæ ¸å¿ƒæ¡†æ¶åªæä¾›åŸºç¡€åŠŸèƒ½ï¼Œé€šè¿‡æ’ä»¶å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç³»ç»Ÿæ— éšœç¢æ”¯æŒæ–°å¢æ¨¡å—å’Œä¸šåŠ¡æ‰©å±•ã€‚</li>
<li><strong>æ¨¡å—åŒ–è§£è€¦</strong><br/>
æ¡†æ¶é€šè¿‡æ ‡å‡†åŒ–çš„æ¥å£ä¸ä¾èµ–ç®¡ç†ï¼Œå°†å¤æ‚ä¸šåŠ¡æ¨¡å—åˆ’åˆ†ä¸ºç‹¬ç«‹çš„åŠŸèƒ½å•å…ƒï¼Œæ¨¡å—é—´è€¦åˆåº¦å¤§å¹…é™ä½ï¼Œå¼€å‘ç»´æŠ¤æ›´çµæ´»ã€‚</li>
<li><strong>ç»Ÿä¸€ç®¡ç†ä¸ç›‘æ§</strong><br/>
å¯¹æ‰€æœ‰æ³¨å†Œæ’ä»¶ã€æ‰§è¡Œå™¨çš„è¿è¡ŒçŠ¶æ€è¿›è¡Œç»Ÿä¸€åŸ‹ç‚¹å’Œç›‘æ§ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½æ€§èƒ½é—®é¢˜ï¼ŒåŠ©åŠ›ç³»ç»Ÿè¿ç»´ä¼˜åŒ–ã€‚</li>
</ul>
<p><strong>æ–¹æ¡ˆè®¾è®¡ï¼šæ ¸å¿ƒæ¶æ„ä¸åˆ†å±‚å®ç°</strong></p>
<p>ä¸ºäº†æ›´å¥½åœ°è½åœ°â€œè‡ªåŠ¨æ³¨å†Œæ‰§è¡Œå™¨â€ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹è®¾è®¡æ–¹æ¡ˆï¼š</p>
<p><strong>åº•å±‚æ’ä»¶åŒ–æ¶æ„</strong></p>
<p>åº•å±‚é‡‡ç”¨æ’ä»¶åŒ–è®¾è®¡ï¼Œæ¡†æ¶é€šè¿‡ç±»ä¼¼ <strong>SPIï¼ˆService Provider Interfaceï¼‰</strong> çš„è‡ªåŠ¨æ³¨å†Œæœºåˆ¶ï¼Œæä¾›äº†ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š</p>
<ul>
<li><strong>ç›‘å¬å™¨ï¼ˆListenerï¼‰</strong><br/>
åœ¨æœåŠ¡å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨æ‰«ææ’ä»¶å®ç°ï¼Œå¹¶æŒ‰ç…§ä¸šåŠ¡çº¿å’Œä¸šåŠ¡ç±»å‹å¯¹å…¶æ³¨å†Œå½’ç±»ã€‚</li>
<li><strong>æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰</strong><br/>
å®šä¹‰æ ‡å‡†åŒ–çš„ä¸šåŠ¡æ‰§è¡Œæµç¨‹ï¼Œæ”¯æŒé’©å­å‡½æ•°ï¼ˆå‰ç½®å¤„ç†ä¸åç½®å¤„ç†ï¼‰ï¼Œä¸šåŠ¡å¼€å‘äººå‘˜å¯æŒ‰éœ€æ‰©å±•å…·ä½“é€»è¾‘ã€‚</li>
<li><strong>æ‰§è¡Œå¼•æ“ï¼ˆEngineï¼‰</strong><br/>
å¯¹å¤–æš´éœ²æ‰§è¡Œå™¨å…¥å£ï¼Œæ— éœ€äº†è§£å†…éƒ¨å¯»å€ç»†èŠ‚ï¼Œå¼€å‘è°ƒç”¨æ›´åŠ ä¾¿æ·é«˜æ•ˆã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d14752eb6fe548efb9999dae3782dd27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=rVvQlcLi28SuXasTC5hSgygj8T4%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<p>ä½¿ç”¨åœºæ™¯ä¸¾ä¸ªğŸŒ°ï¼šæµç¨‹å¼•æ“é€šè¿‡æ·»åŠ ä¸åŒçš„èŠ‚ç‚¹ç±»å‹å®ç°ç±»ï¼Œå®Œæˆè‡ªå®šä¹‰æ‰©å±•ï¼Œå¹¶ä¸”è‡ªåŠ¨æ³¨å†Œå¯å‘ä¸Šå»¶ä¼¸ï¼Œåº”ç”¨å±‚é€šè¿‡è¿½åŠ å®ç°ï¼Œå®Œæˆæ›´ä¸Šå±‚çš„è‡ªå®šä¹‰ä¸šåŠ¡ï¼Œä»è€Œè¦†ç›–å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼Œæ¯ä¸ªå®ç°ç›¸äº’è§£è€¦ï¼Œæå‡å¯è¯»æ€§ã€‚</p>
<p><strong>ç±»UML</strong></p>
<ul>
<li><strong>Processor Register</strong>ï¼šæœåŠ¡å¯åŠ¨æ—¶æ‰«ææ‰€æœ‰æ³¨å†Œçš„å®ç°ï¼Œé€šè¿‡ä¸šåŠ¡çº¿å’Œä¸šåŠ¡ç±»å‹æ ‡è¯†å½’ç±»ã€‚</li>
<li><strong>Auto Register Processor</strong>ï¼šå®šä¹‰å®ç°è§„èŒƒï¼Œæ¯”æä¾›å‰ç½®é¢„å¤„ç†å’Œåç½®å¤„ç†ç­‰é’©å­ï¼Œæ–¹ä¾¿ä¸šåŠ¡è‡ªå®šä¹‰åŠ¨ä½œã€‚</li>
<li><strong>Auto Register Processor Engine</strong>ï¼šå¯¹å¤–ç»Ÿä¸€æš´éœ²çš„æ‰§è¡Œå™¨å…¥å£ï¼Œä½¿ç”¨æ–¹ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€æ„ŸçŸ¥å†…éƒ¨å¯»å€å®ç°ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b823f89b5f34f0b965294aea83707be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=70uqelDQ74EUwHu4eHPCRFR%2BWCY%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<p><strong>æµç¨‹å¼•æ“è®¾è®¡</strong></p>
<p>æµç¨‹å¼•æ“åº•å±‚å¹¿æ³›ä½¿ç”¨è‡ªåŠ¨æ³¨å†Œæ’ä»¶ï¼Œä½¿å…¶å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¹¶ä¸”å¤§å¤§é™ä½ç»´æŠ¤æˆæœ¬ï¼Œåº”æœ‰çš„æ ¸å¿ƒæ¨¡å—æœ‰ï¼š</p>
<ul>
<li><strong>æµç¨‹èŠ‚ç‚¹å®šä¹‰&amp;è¿è¡Œ</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹ä»¥åŠå­ç±»å‹èŠ‚ç‚¹ï¼Œé€šè¿‡è‡ªåŠ¨æ³¨å†Œæ’ä»¶æŒ‚è½½åˆ°æµç¨‹å¼•æ“ä¸­ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹é€»è¾‘è§£è€¦ï¼Œæ‰©å±•å®ç°æ–°èŠ‚ç‚¹ç±»å‹æ›´æ–¹ä¾¿ã€‚</li>
<li><strong>æ¡ä»¶èŠ‚ç‚¹æ¡ä»¶åŒ¹é…</strong>ï¼šæ¡ä»¶èŠ‚ç‚¹çš„æ¡ä»¶é¡¹å–å€¼æ¥æºä¸å°½ç›¸åŒï¼Œæ•°æ®ç±»å‹ä¹Ÿæœ‰å¤šæ ·ï¼Œé€šè¿‡è‡ªåŠ¨æ³¨å†Œæ’ä»¶å¯å®ç°ç›¸äº’ä¹‹é—´è§£è€¦ã€‚</li>
<li><strong>æµç¨‹è¿è¡Œæ•°æ®æŒä¹…åŒ–</strong>ï¼šä¸åŒçš„è¿è¡Œæ—¶æ•°æ®ï¼Œéœ€è¦è½åˆ°ä¸åŒçš„æ•°æ®è¡¨ã€‚</li>
</ul>






<table><thead><tr><th>è‰¯å¥½çš„ç³»ç»Ÿæ¶æ„è®¾è®¡æ˜¯æå‡æ€§èƒ½çš„â€œåº•åº§â€ï¼Œå…¶è¾ƒå¥½çš„æ‰©å±•æ€§å’Œå¼¹æ€§ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å‹å¥½åœ°å¼€å±•æ€§èƒ½ä¼˜åŒ–å·¥ä½œã€‚</th></tr></thead></table>
<h4 data-id="heading-17"><strong>æ•°æ®å­˜å‚¨</strong></h4>
<p>æ•°æ®æµå›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e90bdfaff9a4a1390da6d4aea36b90b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=1SAzh5WCplMTN9Zvwn%2BGI1lBwD4%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<h5 data-id="heading-18"><strong>æ•°æ®ç”Ÿäº§ä¸å­˜å‚¨è§£è€¦</strong></h5>
<h5 data-id="heading-19"/>
<p>æ˜Ÿå›¾ç®¡ç†ç«¯æœåŠ¡(web)ï¼šæä¾›æ¥å£é…ç½®</p>
<p>æ˜Ÿå›¾è¿è¡ŒæœåŠ¡(svc)ï¼šæä¾›æ¥å£è°ƒç”¨æœåŠ¡</p>
<p>æ˜Ÿå›¾å¼‚æ­¥å¤„ç†æœåŠ¡(task)ï¼šæä¾›æ”¯æŒå¼‚æ­¥æ¶ˆæ¯ã€æ•°æ®æŒä¹…åŒ–ã€å¼‚æ­¥ä»»åŠ¡ç­‰æœåŠ¡</p>
<p><strong>è°ƒç”¨è®°å½•</strong></p>
<ul>
<li>æ˜Ÿå›¾è¿è¡ŒæœåŠ¡(svc)æœåŠ¡å°†æ¥å£è°ƒç”¨è®°å½•æ•°æ®å‘é€åˆ°kafka</li>
<li>æ˜Ÿå›¾å¼‚æ­¥å¤„ç†æœåŠ¡(task)æœåŠ¡æ¶ˆè´¹kafkaæ¶ˆæ¯ï¼Œå°†è°ƒç”¨è®°å½•å†™å…¥ES</li>
</ul>
<p><strong>æµç¨‹è¿è¡Œæ—¶æµæ°´</strong></p>
<ul>
<li>æ˜Ÿå›¾è¿è¡ŒæœåŠ¡(svc)å°†æµç¨‹èŠ‚ç‚¹æ‰§è¡Œæµæ°´æ•°æ®å‘é€åˆ°kafka</li>
<li>æ˜Ÿå›¾å¼‚æ­¥å¤„ç†æœåŠ¡(task)æœåŠ¡æ¶ˆæ¯kafkaæ¶ˆæ¯ï¼Œå°†æµç¨‹æµæ°´å†™å…¥MySQL</li>
</ul>
<p>é€šè¿‡å°†æ¥å£è°ƒç”¨äº§ç”Ÿçš„æ•°æ®å’Œå°†æ•°æ®è½åº“å­˜å‚¨è§£è€¦ï¼Œå°†å†™å…¥æ•°æ®ä»»åŠ¡äº¤ç”±task(å¼‚æ­¥)æœåŠ¡å¤„ç†ï¼Œå¯ä»¥å‡è½»svc(è¿è¡Œ)æœåŠ¡è´Ÿæ‹…ï¼Œæå‡æœåŠ¡æ€§èƒ½ã€‚</p>
<h5 data-id="heading-20"><strong>æ•°æ®å‹ç¼©</strong></h5>
<p>æµç¨‹æ¥å£æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åï¼Œéšå³å°†ç”Ÿäº§çš„æ•°æ®å‘é€åˆ°kafkaï¼Œå¤šä¸ªèŠ‚ç‚¹å­˜åœ¨æ›´æ–°åŒä¸ªä¸´æ—¶å˜é‡åœºæ™¯ï¼Œå¹¶å‘é‡å¤§æ—¶ï¼Œä¼šå¯¼è‡´MySQLå‡ºç°è®¸å¤šæ›´æ–°é”ç­‰å¾…ï¼Œæœ€ç»ˆå¯¼è‡´MySQLé›†ç¾¤CPUã€RTç­‰ä¸Šæ¶¨ã€‚</p>
<p><strong>MySQLé”ç­‰å¾…ã€æ¡ˆä¾‹ã€‘</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d8ee0ef46d44bbfa0f3c90ea43e60ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=MxKyyhDmAYHFAgeygTHy2MRk%2F8c%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/545d7ebdf6094ea2980f598f7783dad8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=K%2BRskqov3AYaG9vsipRV1SLJpl0%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cdd658f6eb14acaa4149ccbdc3c8eb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=ZN%2BDRdpIymyDyNmNhp3NyBLrkLE%3D" alt="å›¾ç‰‡13.png" loading="lazy"/></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°†æµç¨‹ä»¥åŠæ‰€æœ‰èŠ‚ç‚¹äº§ç”Ÿçš„æ•°æ®è¿›è¡Œåˆå¹¶å‹ç¼©ï¼Œå®Œæˆæ¥å£è°ƒç”¨æ—¶å†ä¸€æ¬¡æ€§å‘ç”ŸMQæ¶ˆæ¯ï¼Œè§£å†³MySQLé”ç­‰å¾…é—®é¢˜ï¼Œè€Œä¸”MQæ¶ˆæ¯é‡å¤§å¤§é™ä½ï¼Œå‡è½»MQé›†ç¾¤å’ŒsvcæœåŠ¡æ¶ˆè´¹çš„å‹åŠ›ã€‚</p>
<h4 data-id="heading-21"><strong>ç¼“å­˜</strong></h4>
<p>è‰¯å¥½çš„æ¶æ„è®¾è®¡ï¼Œå®ç°å¤šçº§ç¼“å­˜æ—¶ï¼Œä¹Ÿæ— éœ€è°ƒæ•´ä¸Šå±‚ä»£ç ã€‚</p>
<h5 data-id="heading-22"><strong>ç¼“å­˜è®¾è®¡</strong></h5>
<p>æ˜Ÿå›¾åº•å±‚æµç¨‹å¼•æ“æ”¯æŒäºŒçº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜+åˆ†å¸ƒå¼ç¼“å­˜ï¼‰ï¼Œå…œåº•æŸ¥è¯¢MySQLï¼Œç¼“å­˜é¢„çƒ­åï¼Œæ‰€æœ‰è¿è¡Œç›¸å…³çš„æ•°æ®éƒ½å¯ä»¥ä»ç¼“å­˜è·å–ã€‚</p>
<p><strong>ç¼“å­˜æ¡†æ¶è®¾è®¡</strong>ï¼šåˆ©ç”¨æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼ŒæŠ½è±¡å®ç°æ‰€æœ‰ç¼“å­˜æ“ä½œæ–¹æ³•ï¼Œç‰¹æ®Šåœºæ™¯è¦†ç›–æ–¹æ³•å®ç°å³å¯ã€‚</p>
<p><strong>ç¼“å­˜keyè®¾è®¡</strong>ï¼šæµç¨‹å®šä¹‰å’Œè¿è¡Œåˆ†å¼€ä½¿ç”¨ä¸åŒçš„å­˜å‚¨keyï¼Œå…¶ä¸­</p>
<ul>
<li>æµç¨‹å®šä¹‰æ ¹æ®åœºæ™¯åˆ’åˆ†ä¸åŒçš„keyï¼Œæ¯”å¦‚æµç¨‹ç‰ˆæœ¬å®šä¹‰ã€èŠ‚ç‚¹å®šä¹‰ã€èŠ‚ç‚¹è¿çº¿ç­‰ã€‚</li>
<li>æµç¨‹è¿è¡Œæ—¶æ ¹æ®å®ä¾‹ä»¥åŠç±»å‹åˆ’åˆ†ä¸åŒçš„keyï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹ã€æµç¨‹è¿è¡ŒèŠ‚ç‚¹ã€æµç¨‹å˜é‡ç­‰ã€‚</li>
</ul>
<p><strong>å°½é‡é™ä½ç¼“å­˜keyä¹‹é—´çš„è¯»å†™èµ„æºäº‰æŠ¢ã€‚</strong></p>
<h5 data-id="heading-23"><strong>å†…å­˜ç¼“å­˜</strong></h5>
<p><strong>ç¼“å­˜æ¡†æ¶é€‰å‹</strong></p>
<p>åœ¨åˆ†å¸ƒå¼åº”ç”¨åœºæ™¯ä¸­ï¼Œé€‰ç”¨é«˜æ•ˆçš„å†…å­˜ç¼“å­˜æ¡†æ¶æ˜¯æ‰“é€ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é’ˆå¯¹ä¸»æµå†…å­˜ç¼“å­˜æ¡†æ¶ Guava å’Œ Caffeineï¼Œæˆ‘ä»¬åŸºäºé«˜å¹¶å‘ç¯å¢ƒç‰¹ç‚¹åŠçº¿ç¨‹æ¨¡å‹è¿›è¡Œäº†æ·±å…¥å¯¹æ¯”æµ‹è¯•ï¼Œåˆ†æå…¶æ¸…ç†æœºåˆ¶çš„å·®å¼‚å¯¹æ€§èƒ½ï¼ˆå°¤å…¶æ˜¯å“åº”æ—¶é—´ RT æ³¢åŠ¨ï¼‰çš„å½±å“ï¼Œå¹¶æä¾›é€‰å‹åŠä¼˜åŒ–å»ºè®®ã€‚</p>
<p><strong>ç‰¹æ€§å¯¹æ¯”</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6458922fb7d6482d8407959dccfa686c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=2BYQYS99a9M6cT%2Br4xSjohB%2Bzu0%3D" alt="æ€§èƒ½ä¼˜åŒ–ä¹‹è·¯-å†…å­˜ç¼“å­˜-ç‰¹æ€§å¯¹æ¯”.png" loading="lazy"/>
<strong>å†…å­˜ç­–ç•¥</strong></p>
<p>ä¸ºäº†æå‡å†…å­˜ç¼“å­˜çš„æ€§èƒ½è¡¨ç°å’Œèµ„æºåˆ©ç”¨æ•ˆç‡ï¼Œæˆ‘ä»¬å»ºè®®åœ¨æ¡†æ¶é…ç½®ä¸­ä¼˜åŒ–ä»¥ä¸‹å†…å­˜ç­–ç•¥ï¼š</p>
<p><strong>ç¼“å­˜å®¹é‡é™åˆ¶ (maximumSize)</strong></p>
<p>é€šè¿‡åˆç†è®¾ç½® maximumSize å‚æ•°ï¼Œé™åˆ¶ç¼“å­˜æœ€å¤§å­˜å‚¨æ•°é‡ã€‚ä¾‹å¦‚è®¾ç½®ä¸º 5 ä¸‡æ¡æ•°æ®ï¼Œå‡å°‘å› ç¼“å­˜è¿‡å¤šå¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰é£é™©ã€‚</p>
<p><strong>å†™å…¥åè¿‡æœŸæ—¶é—´ (expireAfterWrite)</strong></p>
<p>æ ¹æ®ç¼“å­˜åœºæ™¯è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ä¾‹å¦‚å¯¹äºè¿è¡Œæ—¶ç”Ÿæˆçš„ä¸´æ—¶æ•°æ®ï¼Œé…ç½®ç”Ÿå‘½å‘¨æœŸä¸º <strong>40 ç§’</strong>ï¼Œè¿™æ ·åœ¨æ•°æ®ä½¿ç”¨åèƒ½å¤ŸåŠæ—¶é‡Šæ”¾èµ„æºï¼Œæœ‰æ•ˆé¿å…å†…å­˜æ»ç•™ã€‚</p>
<p><strong>ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡</strong></p>
<p>å®šæœŸé€šè¿‡æŒ‡æ ‡ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ï¼ŒåŠ¨æ€è°ƒæ•´ç­–ç•¥ä¼˜åŒ–ç¼“å­˜æ€§èƒ½ï¼š</p>
<ul>
<li><strong>hitRate</strong>ï¼ˆå‘½ä¸­ç‡ï¼‰ï¼šè¡¨ç¤ºç¼“å­˜å‘½ä¸­æ¯”ä¾‹ï¼Œå»ºè®®ç›‘æ§ä»¥ç¡®ä¿å‘½ä¸­ç‡å§‹ç»ˆä¿æŒåœ¨ç†æƒ³æ°´å¹³ï¼ˆå¦‚ &gt;90%ï¼‰ã€‚</li>
<li><strong>missRate</strong>ï¼ˆæœªå‘½ä¸­ç‡ï¼‰ï¼šç”¨äºç›‘æµ‹ç¼“å­˜æœªå‘½ä¸­çš„åœºæ™¯ä»¥è¿›è¡Œå®¹é‡æˆ–å¤±æ•ˆç­–ç•¥è°ƒæ•´ã€‚</li>
<li><strong>loadCount</strong>ï¼ˆåŠ è½½æ¬¡æ•°ï¼‰ï¼šç´¯è®¡åˆ†æç¼“å­˜åŠ è½½é¢‘æ¬¡ï¼Œæ’æŸ¥é«˜é¢‘åœºæ™¯å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆã€‚</li>
<li><strong>loadExceptionRate</strong>ï¼ˆåŠ è½½å¼‚å¸¸ç‡ï¼‰ï¼šç›‘æ§åŠ è½½æ“ä½œå¼‚å¸¸é¢‘ç‡ï¼Œä¼˜åŒ–ä¸Šæ¸¸èµ„æºè¡¨ç°ã€‚</li>
</ul>
<p><strong>æˆ‘ä»¬çš„å®è·µè¡¨æ˜ï¼Œæ˜Ÿå›¾è¿è¡Œæ—¶ä»…é‡‡ç”¨ä¸€çº§å†…å­˜ç¼“å­˜ï¼ˆGuavaï¼‰è®¾è®¡</strong>ï¼Œç›¸è¾ƒä¼ ç»Ÿçš„äºŒçº§ç¼“å­˜æ¶æ„ï¼ˆå¦‚å†…å­˜+Redisç»„åˆï¼‰ï¼Œé¿å…äº†è·¨ç½‘ç»œé€šä¿¡çš„å¼€é”€ï¼Œå°†ç¼“å­˜å±‚è¯»å–å“åº”é™ä½è‡³ <strong>2ms</strong> å†…ã€ç›¸æ¯” Redis å¹³å‡ RT <strong>5ms</strong> çš„æ€§èƒ½æ˜¾è‘—æå‡ã€‘</p>
<h3 data-id="heading-24"><strong>å¤šçº¿ç¨‹</strong></h3>
<p>åœ¨ä¸åŒåº”ç”¨åœºæ™¯ä¸‹ï¼Œåˆç†è®¾è®¡çº¿ç¨‹æ± ã€ä¼˜åŒ–èµ„æºäº‰æŠ¢é—®é¢˜ã€é¿å…çº¿ç¨‹é”å¼•èµ·çš„æ­»é”é£é™©ä»¥åŠæ­£ç¡®ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡ä¸ä»…èƒ½å¤Ÿæå‡ç³»ç»Ÿæ€§èƒ½ï¼Œè¿˜èƒ½æ˜¾è‘—æ”¹å–„å»¶è¿Ÿä¸ååè¡¨ç°ã€‚</p>
<h4 data-id="heading-25"><strong>åˆ’åˆ†çº¿ç¨‹æ± </strong></h4>
<ul>
<li><strong>ç‹¬ç«‹çº¿ç¨‹æ± ï¼š</strong> æ ¹æ®ä¸åŒåœºæ™¯ï¼ˆå¦‚ I/O å¯†é›†ã€CPU å¯†é›†ï¼‰é…ç½®ç‹¬ç«‹çš„çº¿ç¨‹æ± ï¼Œé¿å…äº’ç›¸å¹²æ‰°ã€‚ä¾‹å¦‚ï¼š
<ul>
<li>æ ¸å¿ƒä¸šåŠ¡: é«˜ä¼˜å…ˆçº§æ¥å£ã€ä½å»¶è¿Ÿéœ€æ±‚åœºæ™¯ä¸“ç”¨çº¿ç¨‹æ± ã€‚</li>
<li>å¼‚æ­¥è€—æ—¶æ“ä½œ: è¾ƒä½ä¼˜å…ˆçº§çš„è€—æ—¶æ“ä½œä½¿ç”¨ç‹¬ç«‹æ± éš”ç¦»ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-26"><strong>åˆç†çº¿ç¨‹æ± é…ç½®</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒä¸šåŠ¡çº¿ç¨‹æ± ï¼š</strong>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ä¸ <strong>CPU æ ¸å¿ƒæ•°</strong> æˆæ¯”ä¾‹é…ç½®ï¼ˆå¦‚ &gt;= 2 * CPU æ ¸å¿ƒæ•°ï¼‰ã€‚</li>
<li>é…ç½®è¾ƒå°é˜Ÿåˆ—ï¼Œå‡å°‘ä»»åŠ¡é˜Ÿåˆ—ä¸­å †ç§¯ï¼Œä¿è¯ç³»ç»Ÿä½å»¶è¿Ÿã€‚</li>
<li>é¿å…çº¿ç¨‹è¿‡å¤šå¢åŠ ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚</li>
</ul>
</li>
<li><strong>éæ ¸å¿ƒä»»åŠ¡çº¿ç¨‹æ± ï¼š</strong>
<ul>
<li>å‡å°‘æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ï¼Œè°ƒå¤§é˜Ÿåˆ—å®¹é‡ã€‚</li>
<li>å…è®¸ä¸€å®šçš„å»¶è¿Ÿï¼Œä¿è¯ä¸»ä¸šåŠ¡æµç¨‹çš„èµ„æºä¼˜å…ˆçº§ã€‚</li>
</ul>
</li>
</ul>
<p><strong>çº¿ç¨‹èµ„æºäº‰æŠ¢æ¡ˆä¾‹ä¸ä¼˜åŒ–</strong></p>
<p>åœ¨é«˜å¹¶å‘è¯·æ±‚ä¸‹ï¼Œ<strong>è¿›çº¿ä¼˜å…ˆçº§æµç¨‹æ¥å£</strong>å†…å¤šä¸ªå¹¶è¡Œæµç¨‹åµŒå¥—ï¼Œæœ¬åœ°è°ƒç”¨æ¨¡å¼ç›´æ¥è§¦å‘è¿è¡Œæ–¹æ³•ï¼Œå¯¼è‡´åœ¨ <strong>CPU æ ¸æ•°è¾ƒä½</strong> ä¸” <strong>çº¿ç¨‹æ•°é…ç½®ä¸è¶³</strong> æ—¶ï¼Œå‡ºç°è¿‡å¤šçº¿ç¨‹é˜»å¡ç­‰å¾…çš„æƒ…å†µï¼Œæ•´ä½“è¯·æ±‚è€—æ—¶é«˜è¾¾ 30 ç§’ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/356e9ab004f8432c9269ff6df1fd3d94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=D1G0Ld7H%2BbsE1OqhL14rnjTd4%2BM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>jstack å †æ ˆä¿¡æ¯åˆ†æï¼š</strong></p>
<ul>
<li>å †æ ˆå¿«ç…§ä¸­å‡ºç°å¤§é‡ WAITING å’Œ TIMED_WAITING çŠ¶æ€ï¼Œè¿™è¡¨æ˜çº¿ç¨‹ä¸¥é‡é˜»å¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e07a442dccfe4131a08821b436ee394b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=6T3esusiuTrkMJzQUZwAyWqJGgs%3D" alt="å›¾ç‰‡14.png" loading="lazy"/></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-string">"function_kefu--2"</span> #<span class="hljs-number">267</span> prio=<span class="hljs-number">5</span> os_prio=<span class="hljs-number">31</span> tid=<span class="hljs-number">0x00007f8cace88800</span> nid=<span class="hljs-number">0x1854b</span> waiting on condition [<span class="hljs-number">0x000000031682b000</span>]  
java.lang.Thread.State: WAITING (parking)  
at sun.misc.Unsafe.park(Native Method)  
- parking to wait <span class="hljs-keyword">for</span> &amp;lt;<span class="hljs-number">0x00000007bd893270</span>&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)  
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:<span class="hljs-number">175</span>)  
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:<span class="hljs-number">2039</span>)  
at cn.lalaframework.dtp.common.VariableLinkedBlockingQueue.take(VariableLinkedBlockingQueue.java:<span class="hljs-number">411</span>)  
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:<span class="hljs-number">1074</span>)  
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="hljs-number">1134</span>)  
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="hljs-number">624</span>)  
at java.lang.Thread.run(Thread.java:<span class="hljs-number">748</span>)  
&lt;br/&gt;<span class="hljs-string">"function_kefu--1"</span> #<span class="hljs-number">266</span> prio=<span class="hljs-number">5</span> os_prio=<span class="hljs-number">31</span> tid=<span class="hljs-number">0x00007f8cad651000</span> nid=<span class="hljs-number">0x6b1f</span> waiting on condition [<span class="hljs-number">0x0000000316219000</span>]  
java.lang.Thread.State: WAITING (parking)  
at sun.misc.Unsafe.park(Native Method)  
- parking to wait <span class="hljs-keyword">for</span> &amp;lt;<span class="hljs-number">0x00000007bd893270</span>&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)  
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:<span class="hljs-number">175</span>)  
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:<span class="hljs-number">2039</span>)  
at cn.lalaframework.dtp.common.VariableLinkedBlockingQueue.take(VariableLinkedBlockingQueue.java:<span class="hljs-number">411</span>)  
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:<span class="hljs-number">1074</span>)  
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="hljs-number">1134</span>)  
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="hljs-number">624</span>)  
at java.lang.Thread.run(Thread.java:<span class="hljs-number">748</span>)  
&lt;br/&gt;<span class="hljs-string">"OpsFlowOperateLogAsync--2"</span> #<span class="hljs-number">265</span> prio=<span class="hljs-number">5</span> os_prio=<span class="hljs-number">31</span> tid=<span class="hljs-number">0x00007f8cace8a000</span> nid=<span class="hljs-number">0x14137</span> waiting on condition [<span class="hljs-number">0x0000000316013000</span>]  
java.lang.Thread.State: WAITING (parking)  
at sun.misc.Unsafe.park(Native Method)  
- parking to wait <span class="hljs-keyword">for</span> &amp;lt;<span class="hljs-number">0x00000006c4e72578</span>&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)  
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:<span class="hljs-number">175</span>)  
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:<span class="hljs-number">2039</span>)  
at cn.lalaframework.dtp.common.VariableLinkedBlockingQueue.take(VariableLinkedBlockingQueue.java:<span class="hljs-number">411</span>)  
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:<span class="hljs-number">1074</span>)  
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="hljs-number">1134</span>)  
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="hljs-number">624</span>)  
at java.lang.Thread.run(Thread.java:<span class="hljs-number">748</span>)  
&lt;br/&gt;<span class="hljs-string">"http-nio-20482-exec-3"</span> #<span class="hljs-number">193</span> daemon prio=<span class="hljs-number">5</span> os_prio=<span class="hljs-number">31</span> tid=<span class="hljs-number">0x00007f8cacdd3800</span> nid=<span class="hljs-number">0x16c0f</span> waiting on condition [<span class="hljs-number">0x0000000314edb000</span>]  
java.lang.Thread.State: TIMED_WAITING (parking)  
at sun.misc.Unsafe.park(Native Method)  
- parking to wait <span class="hljs-keyword">for</span> &amp;lt;<span class="hljs-number">0x00000007770f3708</span>&amp;gt; (a java.util.concurrent.CompletableFuture$Signaller)  
at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:<span class="hljs-number">215</span>)  
at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:<span class="hljs-number">1709</span>)  
at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:<span class="hljs-number">3334</span>)  
at java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:<span class="hljs-number">1788</span>)  
at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:<span class="hljs-number">1928</span>)  
at cn.huolala.ops.flow.service.flow.run.gateway.subType.RunOpsGatewayParallelBeginServiceImpl.process(RunOpsGatewayParallelBeginServiceImpl.java:<span class="hljs-number">87</span>)  
at cn.huolala.ops.flow.service.flow.run.BaseOpsRunNodeServiceImpl.processBySubNodeType(BaseOpsRunNodeServiceImpl.java:<span class="hljs-number">90</span>)  
at cn.huolala.ops.flow.service.flow.run.gateway.RunOpsGatewayNodeServiceImpl.process(RunOpsGatewayNodeServiceImpl.java:<span class="hljs-number">39</span>)  
at cn.huolala.auto.register.processor.AbsAutoRegisterProcessor.exec(AbsAutoRegisterProcessor.java:<span class="hljs-number">45</span>)  
at cn.huolala.auto.register.processor.AutoRegisterProcessorEngine.exec(AutoRegisterProcessorEngine.java:<span class="hljs-number">122</span>)  
at cn.huolala.auto.register.processor.AutoRegisterProcessorEngine$$FastClassBySpringCGLIB$$a05e36f5.invoke(&amp;lt;generated&amp;gt;)  
at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:<span class="hljs-number">218</span>)  
at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:<span class="hljs-number">771</span>)  
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:<span class="hljs-number">163</span>)  
at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:<span class="hljs-number">749</span>)  
at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:<span class="hljs-number">88</span>)  
at cn.huolala.kf.common.trace.report.aop.BaseAspect.getAspectBO(BaseAspect.java:<span class="hljs-number">35</span>)  
at cn.huolala.kf.common.trace.report.aop.TraceReportAspect.around(TraceReportAspect.java:<span class="hljs-number">72</span>)  
at sun.reflect.GeneratedMethodAccessor314.invoke(Unknown Source)  
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="hljs-number">43</span>)  
at java.lang.reflect.Method.invoke(Method.java:<span class="hljs-number">498</span>)  
&lt;br/&gt;<span class="hljs-string">"FlowTaskParallelAsync--2"</span> #<span class="hljs-number">255</span> prio=<span class="hljs-number">5</span> os_prio=<span class="hljs-number">31</span> tid=<span class="hljs-number">0x00007f8cdb501000</span> nid=<span class="hljs-number">0x19e0b</span> waiting on condition [<span class="hljs-number">0x0000000312f81000</span>]  
java.lang.Thread.State: TIMED_WAITING (parking)  
at sun.misc.Unsafe.park(Native Method)  
- parking to wait <span class="hljs-keyword">for</span> &amp;lt;<span class="hljs-number">0x0000000778709990</span>&amp;gt; (a java.util.concurrent.CompletableFuture$Signaller)  
at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:<span class="hljs-number">215</span>)  
at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:<span class="hljs-number">1709</span>)  
at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:<span class="hljs-number">3334</span>)  
at java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:<span class="hljs-number">1788</span>)  
at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:<span class="hljs-number">1928</span>)  
at cn.huolala.ops.flow.service.flow.run.gateway.subType.RunOpsGatewayParallelBeginServiceImpl.process(RunOpsGatewayParallelBeginServiceImpl.java:<span class="hljs-number">87</span>)  
at cn.huolala.ops.flow.service.flow.run.BaseOpsRunNodeServiceImpl.processBySubNodeType(BaseOpsRunNodeServiceImpl.java:<span class="hljs-number">90</span>)  
at cn.huolala.ops.flow.service.flow.run.gateway.RunOpsGatewayNodeServiceImpl.process(RunOpsGatewayNodeServiceImpl.java:<span class="hljs-number">39</span>)  
at cn.huolala.auto.register.processor.AbsAutoRegisterProcessor.exec(AbsAutoRegisterProcessor.java:<span class="hljs-number">45</span>)  
at cn.huolala.auto.register.processor.AutoRegisterProcessorEngine.exec(AutoRegisterProcessorEngine.java:<span class="hljs-number">122</span>)  
at cn.huolala.auto.register.processor.AutoRegisterProcessorEngine$$FastClassBySpringCGLIB$$a05e36f5.invoke(&amp;lt;generated&amp;gt;)  
at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:<span class="hljs-number">218</span>)  
at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:<span class="hljs-number">771</span>)  
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:<span class="hljs-number">163</span>)  
at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:<span class="hljs-number">749</span>)  
at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:<span class="hljs-number">88</span>)  
at cn.huolala.kf.common.trace.report.aop.BaseAspect.getAspectBO(BaseAspect.java:<span class="hljs-number">35</span>)  
at cn.huolala.kf.common.trace.report.aop.TraceReportAspect.around(TraceReportAspect.java:<span class="hljs-number">72</span>)  
at sun.reflect.GeneratedMethodAccessor314.invoke(Unknown Source)  
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="hljs-number">43</span>)  
at java.lang.reflect.Method.invoke(Method.java:<span class="hljs-number">498</span>)
</code></pre>
<p><strong>æ ¹å› ï¼š</strong></p>
<ul>
<li><strong>CPU æ ¸æ•°ä¸è¶³ï¼š</strong> æ— æ³•å……åˆ†è°ƒåº¦å¤šçº¿ç¨‹ã€‚</li>
<li><strong>çº¿ç¨‹æ± é…ç½®ä¸è¶³ï¼š</strong> æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°è®¾ç½®è¿‡ä½ï¼Œé˜»å¡æµç¨‹ä¸­çš„å¹¶è¡Œå­ä»»åŠ¡ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ç¡¬ä»¶æå‡ï¼š</strong>
<ul>
<li>å°†æœåŠ¡å®ä¾‹å‡çº§è‡³ <strong>è‡³å°‘ 4 æ ¸å¿ƒ CPU</strong>ï¼Œä¸ºçº¿ç¨‹çš„å¹¶è¡Œè°ƒåº¦æä¾›è¶³å¤Ÿçš„è®¡ç®—èµ„æºã€‚</li>
</ul>
</li>
<li><strong>çº¿ç¨‹æ± ä¼˜åŒ–ï¼š</strong>
<ul>
<li>è°ƒå¤§æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿå……åˆ†å‘æŒ¥å¤šçº¿ç¨‹æ€§èƒ½ï¼ˆå¦‚ 2 * CPU æ ¸æ•°ï¼‰ã€‚</li>
<li>ç»“åˆæµç¨‹åµŒå¥—æƒ…å†µï¼Œè®¾ç½®åˆé€‚çš„ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦ï¼Œé¿å…ä»»åŠ¡è¿‡é•¿æ—¶é—´æ’é˜Ÿã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27"><strong>çº¿ç¨‹é”</strong></h4>
<p>åœ¨ <strong>æµç¨‹è¿è¡Œæ—¶</strong>ï¼Œå¹¶è¡ŒèŠ‚ç‚¹èµ‹å€¼å˜é‡æˆ–é‡‡é›†è¯æ§½å¯èƒ½æ›´æ–°ç›¸åŒçš„ç¼“å­˜ keyã€‚ç”±äº <strong>å¹¶å‘æ›´æ–°</strong> å¯¼è‡´çš„é—®é¢˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23f9e0343daa4d29b5de5ebb451fc19d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=Fc2G4f86lxn%2FUb65q91jVA3NfCE%3D" alt="å›¾ç‰‡15.png" loading="lazy"/></p>
<p><strong>æ ¹å› </strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®ä¸ä¸€è‡´ï¼š</strong>
<ul>
<li>å¹¶å‘çº¿ç¨‹ T1ã€T2 åŒæ—¶æ“ä½œï¼š
<ul>
<li>T1 æ›´æ–°äº†ç¼“å­˜ï¼Œä½†è¿˜æœªå®Œæˆæ“ä½œæ—¶ï¼ŒT2 ç›´æ¥è¦†ç›– T1 çš„æ•°æ®ã€‚</li>
</ul>
</li>
<li>å¯¼è‡´ T1 æ›´æ–°çš„æ•°æ®ä¸¢å¤±ï¼Œæœ€ç»ˆå€¼é”™è¯¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨çº¿ç¨‹é”ï¼Œè®¾ç½®è¶…æ—¶ç­‰å¾…æ—¶é—´ï¼ˆæ¯”å¦‚10msï¼‰ï¼Œé¿å…é•¿æ—¶é—´çº¿ç¨‹é˜»å¡ã€‚</p>
<p><strong>æŠ€æœ¯è€ƒé‡</strong>ï¼š</p>
<ul>
<li>éœ€è¦åŠ é”æ§åˆ¶æ›´æ–°ï¼Œä½†å› æ›´æ–°å‰æŸ¥è¯¢ç»“æœè¦æ±‚ä¸€è‡´æ€§ï¼Œä¸é€‚ç”¨ ReadWriteLock æˆ– ReentrantReadWriteLockã€‚å¹¶ä¸”ï¼š
<ul>
<li><strong>ä½¿ç”¨ Redissonï¼š</strong>
<ul>
<li>Redisson æä¾›åˆ†å¸ƒå¼é”ï¼Œä½†å› æ“ä½œæ˜¯æœ¬åœ°å®Œæˆï¼Œä¸æ¶‰åŠå¤šèŠ‚ç‚¹ï¼Œä¸”ç½‘ç»œ IO å¸¦æ¥æ€§èƒ½å¼€é”€ï¼Œé€‰æ‹©å®ç°ä¸ºåŸç”Ÿé”ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>æœ€ç»ˆé€‰å‹ï¼š</strong>
<ul>
<li>åŸºäºå…¬å¹³é˜Ÿåˆ—çš„ ReentrantLockï¼š
<ul>
<li>é€‚åˆé«˜å¹¶å‘æ›´æ–°ï¼Œä¸”æ”¯æŒè¶…æ—¶æ—¶ç­‰å¾…ï¼Œè§£å†³é•¿æœŸé˜»å¡é£é™©ã€‚</li>
<li>é¿å…ä½¿ç”¨ synchronizedï¼Œå®ƒæ— æ³•è¶…æ—¶ä¸”å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼ˆè¯»å†™æµç¨‹å˜é‡ã€è¿è¡ŒèŠ‚ç‚¹ç­‰ï¼‰åˆ†é…ä¸åŒçš„é”å®ä¾‹ï¼Œå‡å°‘é”äº‰æŠ¢ã€‚</p>
<ul>
<li>å¯¹å¹¶è¡Œä¸šåŠ¡åˆ’åˆ†ä¸åŒåœºæ™¯ï¼Œåˆ†é… <strong>ç‹¬ç«‹å®ä¾‹é”</strong>ï¼Œä¾‹å¦‚ï¼š
<ul>
<li>è¯»å†™ä¸åŒçš„æµç¨‹å˜é‡ä½¿ç”¨äº’ç›¸éš”ç¦»çš„é”ï¼Œé™ä½é”äº‰ç”¨ã€‚</li>
<li>å¯¹é«˜é¢‘æ›´æ–°åœºæ™¯ï¼ŒåŠ¨æ€è°ƒæ•´é”ç«äº‰ä¸æ€§èƒ½çš„æƒè¡¡ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å…¬å¹³é” vs. éå…¬å¹³é”ï¼š</strong></p>
<ul>
<li>
<p><strong>å…¬å¹³é”ï¼ˆ</strong> <strong><code>ReentrantLock(true)</code></strong> <strong>ï¼‰ï¼š</strong></p>
<ul>
<li>æŒ‰ç…§çº¿ç¨‹ç­‰å¾…çš„æ—¶é—´é¡ºåºè·å¾—é”ï¼Œé¿å…çº¿ç¨‹ â€œé¥¥é¥¿â€ã€‚</li>
<li>é€‚åˆé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œå°¤å…¶è¯»å†™é¢‘ç¹ã€å»¶è¿Ÿæ•æ„Ÿçš„ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>éå…¬å¹³é”ï¼ˆ</strong> <strong><code>ReentrantLock(false)</code></strong> <strong>ï¼‰ï¼š</strong></p>
<ul>
<li>çº¿ç¨‹è¯·æ±‚æ— åºï¼Œæ€§èƒ½è¾ƒé«˜ï¼Œä½†å¯èƒ½å¯¼è‡´éƒ¨åˆ†çº¿ç¨‹é•¿æ—¶é—´æ— æ³•è·å¾—é”ã€‚</li>
<li>å¯ç”¨äºå¯¹æ—¶åºæ€§è¦æ±‚ä¸ä¸¥æ ¼çš„æ‰¹é‡æ›´æ–°ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-28"><strong>å¼‚æ­¥ä»»åŠ¡è®¾è®¡è§„èŒƒ</strong></h4>
<p>åœ¨ç³»ç»Ÿä¸­ï¼Œå¼‚æ­¥ä»»åŠ¡é€šè¿‡å¤šçº¿ç¨‹å¹¶å‘å¤„ç†ï¼Œæé«˜ååæ€§èƒ½ï¼Œä½†è®¾è®¡ä¸­éœ€é¿å…æ»¥ç”¨å¼‚æ­¥ã€‚</p>
<p><strong>å¼‚æ­¥ä»»åŠ¡åœºæ™¯</strong></p>
<ul>
<li>
<p>åœºæ™¯åˆ†æï¼šå°†<strong>è€—æ—¶é•¿</strong>ã€<strong>å¯å»¶è¿Ÿå¤„ç†</strong>æˆ–<strong>ä¸å¤ªå½±å“ä¸»ä¸šåŠ¡é“¾è·¯</strong>çš„æ“ä½œè½¬ä¸ºå¼‚æ­¥ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¡ä»¶èŠ‚ç‚¹ä¸­å¤æ‚æ ¼å¼çš„æµæ°´æ¡ä»¶åˆ¤æ–­å¹¶æŒä¹…åŒ–ã€‚</li>
<li>å‘é€è¿è¡Œæµæ°´ Kafka æ¶ˆæ¯ï¼ˆç½‘ç»œ IO å ä¸»æµç¨‹æ—¶é—´ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li><strong>ä»»åŠ¡æ˜¯å¦é€‚åˆå¼‚æ­¥ï¼š</strong>
<ul>
<li>é¿å…ä¸€äº›çŸ­å‘¨æœŸã€å¿«é€Ÿæ‰§è¡Œã€å»¶è¿Ÿæ•æ„Ÿä»»åŠ¡å¼‚æ­¥åŒ–ï¼Œå¦‚çŸ­æ—¶ç®€å•è®¡ç®—ã€‚</li>
<li>é¢‘ç¹åˆ›å»ºã€é”€æ¯çº¿ç¨‹å¸¦æ¥ä¸Šä¸‹æ–‡åˆ‡æ¢è€—æ—¶å¯èƒ½æ¯”ä»»åŠ¡æœ¬èº«è€—æ—¶æ›´å¤§ã€‚</li>
</ul>
</li>
<li><strong>ä¸»çº¿ç¨‹ä¸å¼‚æ­¥çº¿ç¨‹èµ„æºæŠ¢å ï¼š</strong>
<ul>
<li>é…ç½®å¼‚æ­¥çº¿ç¨‹ä»»åŠ¡çš„ä¸“å±çº¿ç¨‹æ± ï¼Œéš”ç¦»æ ¸å¿ƒæµç¨‹çš„çº¿ç¨‹èµ„æºã€‚</li>
<li>åˆç†æ§åˆ¶å¼‚æ­¥ä»»åŠ¡æ•°é‡ï¼Œé¿å…ä¸»çº¿ç¨‹å› èµ„æºäº‰æŠ¢è€Œå»¶è¿Ÿã€‚</li>
</ul>
</li>
</ul>






<table><thead><tr><th>â€œå¼‚æ­¥ä¸æ˜¯è¶Šå¤šè¶Šå¥½â€ï¼Œæ¯”å¦‚ä¸€äº›<strong>é¢‘ç¹çŸ­å°</strong>ã€<strong>ç®€å•çš„</strong>ã€<strong>æ—¶é—´æ•æ„Ÿ</strong>çš„æ“ä½œï¼Œæ²¡å¿…è¦ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹ï¼Œçº¿ç¨‹åå¤åˆ›å»º/é”€æ¯ã€ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬å¯èƒ½éƒ½æ¯”ä»»åŠ¡å¼€é”€å¤§ï¼Œä¸”è¿˜ä¼šä¸æ ¸å¿ƒçº¿ç¨‹äº‰æŠ¢èµ„æºï¼Œå¾—ä¸å¿å¤±ã€‚</th></tr></thead></table>
<h4 data-id="heading-29"><strong>ä»£ç ä¼˜åŒ–</strong></h4>
<p>é’ˆå¯¹æ€§èƒ½ä¼˜åŒ–åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ€§èƒ½è¯Šæ–­ã€å®šä½ç“¶é¢ˆä»¥åŠè§£å†³æ–¹æ¡ˆå…¥æ‰‹ï¼Œé€šè¿‡å·¥å…·è¾…åŠ©åˆ†æã€åŸ‹ç‚¹éªŒè¯å’Œä»£ç å±‚ä¼˜åŒ–ï¼Œæå‡ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ä¸ç¨³å®šæ€§ã€‚</p>
<h5 data-id="heading-30"><strong>æ€§èƒ½åˆ†æå·¥å…·</strong></h5>
<p><strong>ç«ç„°å›¾</strong></p>
<p>ç«ç„°å›¾æ˜¯ä¸€ç§é€šè¿‡é‡‡æ ·åˆ†æç”Ÿæˆçš„æ–¹æ³•è°ƒç”¨å †æ ˆå›¾ï¼Œå¸®åŠ©å®šä½æ€§èƒ½çƒ­ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2830120f6d46464fbde0fdf596101b48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=YfxrKRr2W%2BBEiRZ6pOQufsxiGnM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>æ–¹æ³•å±‚æ¬¡ç»“æ„æ¸…æ™°ï¼Œæ”¯æŒå¿«é€Ÿåˆ†æè°ƒç”¨é“¾è·¯å¾„ã€‚</p>
</li>
<li>
<p>é€‚åˆå¿«é€Ÿå®šä½â€œå¤§å—å¤´â€æ€§èƒ½ç“¶é¢ˆçš„æ¨¡å—æˆ–æ–¹æ³•ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ä¸è¶³ï¼š</strong></p>
<ul>
<li>åªèƒ½å®šä½åˆ°æ–¹æ³•çš„å¤§èŒƒå›´å†…ï¼Œæ— æ³•æ·±å…¥åˆ°æ¯ä¸ªè¯·æ±‚çš„ç»†èŠ‚ã€‚
Â </li>
</ul>
</li>
<li>
<p><strong>æ‰‹åŠ¨åŸ‹ç‚¹</strong></p>
</li>
</ul>
<p>æ‰‹åŠ¨åŸ‹ç‚¹æ˜¯åœ¨ä»£ç å…³é”®ç‚¹æ·»åŠ å®šåˆ¶çš„è€—æ—¶è®°å½•æ–¹æ³•ï¼Œè¾“å‡ºç›¸å…³æ—¥å¿—ä½œä¸ºæ€§èƒ½ç“¶é¢ˆè¯Šæ–­ä¾æ®ã€‚</p>
<ul>
<li>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>çµæ´»æ€§å¥½ï¼Œå¯ä»¥åœ¨ä»»æ„ä»£ç å—ä¸­åŸ‹ç‚¹</p>
</li>
<li>
<p>å¯æ§æ€§å¼ºï¼Œæ ¹æ®å®é™…éœ€è¦è¾“å‡ºå„ç§æŒ‡æ ‡</p>
</li>
<li>
<p>æˆæœ¬ä½ï¼Œä½¿ç”¨javaæä¾›çš„æ—¶é—´æ–¹æ³•ï¼Œå¯ä»¥è·å–æ¯«ç§’ã€å¾®ç§’ç­‰</p>
</li>
</ul>
</li>
<li>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>
<p>ä¾µå…¥æ€§å¼ºï¼Œè°ƒæ•´ç¨‹åºä»£ç </p>
</li>
<li>
<p>ç»´æŠ¤æˆæœ¬é«˜ï¼ŒåŸ‹ç‚¹ä»£ç å¤ªå¤šï¼Œåé¢å¯èƒ½çœ‹ä¸æ‡‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>
é€‚åˆåˆ†æç‰¹å®šåŠŸèƒ½æ¨¡å—çš„æ‰§è¡Œæ—¶é—´ã€‚ä¾‹å¦‚åˆ¤æ–­å¤æ‚çš„æ¡ä»¶é€»è¾‘ã€ç‰¹å®šå¾ªç¯å¤„ç†çš„è€—æ—¶æƒ…å†µã€‚</p>
<p><strong>Arthas</strong></p>
<p>Arthas æ˜¯å¼ºå¤§çš„çº¿ä¸Šè¯Šæ–­å·¥å…·ï¼Œå¯ä»¥å®æ—¶åˆ†æåº”ç”¨æ€§èƒ½ï¼Œä¸”ä¸ä¿®æ”¹ä»£ç ç›´æ¥æ’æŸ¥é—®é¢˜ã€‚</p>
<p><strong>æ”¯æŒå¸¸ç”¨å‘½ä»¤ï¼š</strong></p>
<ul>
<li><strong>monitor</strong> <strong>: æŸ¥çœ‹æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ã€å¹³å‡è€—æ—¶ã€å¤±è´¥æ¬¡æ•°ç­‰ã€‚</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7278c99996440ae81de477750fefb14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=Hpo92RyrZDb3b0QshgZN3tL%2FwlI%3D" alt="å›¾ç‰‡17.png" loading="lazy"/></p>
<ul>
<li><strong>trace</strong> <strong>: è¿½è¸ªæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ï¼ŒæŸ¥çœ‹å‚æ•°ã€è¿”å›å€¼åŠæ–¹æ³•æ—¶é—´æ¶ˆè€—ã€‚</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf95f17c2534be0b5155654c66e8654~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=JHgCIpmkN2cKKuKi6DHHki84LQw%3D" alt="å›¾ç‰‡18.png" loading="lazy"/></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>éä¾µå…¥å¼ï¼Œä»£ç æ— éœ€ä¿®æ”¹ã€‚</li>
<li>å®æ—¶æ€§å¼ºï¼Œé€‚åˆçº¿ä¸Šå¤æ‚åœºæ™¯çš„æ€§èƒ½ä¼˜åŒ–ã€‚</li>
<li>æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬å†…å­˜ã€GCã€çº¿ç¨‹ç›‘æ§ï¼Œèƒ½å…¨æ–¹ä½è¯Šæ–­å¸¸è§æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-31"><strong>èµ„æºä¼˜åŒ–</strong></h4>
<p>èµ„æºä¼˜åŒ–æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œé€šè¿‡é¢„å¤„ç†ã€é¢„åŠ è½½ã€ä»¥åŠèµ„æºå¤ç”¨é™ä½ç³»ç»Ÿå¼€é”€ã€‚</p>
<p><strong>æ•°æ®é¢„å¤„ç†</strong></p>
<ul>
<li>ç›®æ ‡ï¼š<strong>é¿å…å¾ªç¯ä¸­é‡å¤ I/O æ“ä½œ</strong>
<ul>
<li>å°½é‡åœ¨è¿›å…¥å¾ªç¯ä½“å‰å°†æ•°æ®ç»Ÿä¸€åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>
<li>å³ä½¿æ•°æ®ä½¿ç”¨äº†å†…å­˜ç¼“å­˜ï¼Œä½†é«˜é¢‘è®¿é—®ä»ä¼šé€ æˆæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
</li>
<li><strong>æ¡ˆä¾‹åœºæ™¯ï¼šå¤æ‚æ¡ä»¶èŠ‚ç‚¹çš„åˆ¤æ–­</strong>
<ul>
<li>åŸé€»è¾‘ï¼šæ¯ä¸ªæ¡ä»¶é¡¹åˆ¤æ–­æ—¶é‡å¤è¯»å–æ‰€éœ€æ•°æ®ã€‚</li>
<li>ä¼˜åŒ–æ–¹æ¡ˆï¼š
<ul>
<li>å°†æ¡ä»¶æ•°æ®åœ¨è¿›å…¥æ¡ä»¶éå†å‰ç»Ÿä¸€é¢„åŠ è½½ã€‚</li>
<li>å‡å°‘ç¼“å­˜é«˜é¢‘è®¿é—®ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>èµ„æºé¢„åŠ è½½</strong></p>
<ul>
<li><strong>å‡½æ•°é¢„ç¼–è¯‘</strong>ï¼š
<ul>
<li>å¯¹é¢‘ç¹è°ƒç”¨çš„ Groovy å‡½æ•°å¯ä»¥é‡‡å–é¢„ç¼–è¯‘æœºåˆ¶ï¼Œå°†ç¼–è¯‘åçš„å‡½æ•°ç¼“å­˜åˆ°æœ¬åœ°ä»¥æå‡æ‰§è¡Œæ•ˆç‡ã€‚ã€ç‰¹åˆ«é€‚ç”¨äºé¢‘ç¹æ–¹æ³•è°ƒç”¨çš„å¤æ‚åœºæ™¯ã€‚ã€‘</li>
</ul>
</li>
</ul>
<p><strong>å¯¹è±¡èµ„æºå¤ç”¨</strong></p>
<ul>
<li>æ¡ˆä¾‹ï¼šjavax.validation.Validationæ•°æ®æ ¡éªŒè€—æ—¶é«˜</li>
<li>æ ¹å› ï¼šé€šè¿‡ trace åˆ†æï¼Œåº•å±‚å·¥å…·ç±»ç”±äºæ¯æ¬¡è°ƒç”¨æ—¶é‡å¤åˆå§‹åŒ–éªŒè¯å™¨å·¥å‚å®ä¾‹ï¼Œå¯¼è‡´è€—æ—¶ç¨³å®šåœ¨ 10ms ä»¥ä¸Šã€‚</li>
<li>ä¼˜åŒ–æ–¹æ¡ˆï¼šé€šè¿‡å¤ç”¨éªŒè¯å™¨å·¥å‚ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08766a5bb3fc4601a014a7ee57f1d3b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=%2BDC8%2BWnw2ckEL7xkPAYFTjQ%2FiFI%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å—ï¼š</p>
<pre><code class="hljs language-java" lang="java">Java <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationUtils</span> {  Â Â Â Â 
    <span class="hljs-comment">//æ•°æ®æ ¡éªŒæ–¹æ³• Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateThrowException</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> Object object)</span> <span class="hljs-keyword">throws</span> OpsParamValidateException { Â Â Â Â Â Â Â Â 
        Set&lt;ConstraintViolation&lt;<span class="hljs-meta">@Valid</span> Object&gt;&gt; validateSet = Validation.*buildDefaultValidatorFactory*().getValidator().validate(object, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[<span class="hljs-number">0</span>]);
    ... Â Â Â Â 
    }  
} 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e6835c9eb9941088795bc07d420b49b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=s18Y05ZpMcj%2F2OorwQT7ULfqfnE%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å—ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">Java <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationUtils</span> { Â Â Â Â 
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Validator validator; Â Â Â Â 
    <span class="hljs-keyword">static</span> { Â Â Â Â Â Â Â Â 
        validator = Validation.*buildDefaultValidatorFactory*().getValidator(); Â Â Â Â 
    } Â Â Â Â  Â Â Â 
    <span class="hljs-comment">// æ•°æ®æ ¡éªŒæ–¹æ³• Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateThrowException</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> Object object)</span> <span class="hljs-keyword">throws</span> ServiceException { Â Â Â Â Â Â Â Â 
        Set&lt;ConstraintViolation&lt;<span class="hljs-meta">@Valid</span> Object&gt;&gt; validateSet = *validator*.validate(object, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[<span class="hljs-number">0</span>]); Â Â Â Â 
    } 
} 
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šéªŒè¯å™¨åˆå§‹åŒ–æ—¶é—´å‡å°‘è‡³å¾®ç§’çº§ï¼Œæ•´ä½“æ€§èƒ½æ˜¾è‘—æå‡ã€‚</li>
</ul>
<h4 data-id="heading-32"><strong>ç½‘ç»œIOä¼˜åŒ–</strong></h4>
<p>é€šè¿‡ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œæˆ‘ä»¬å·²ç»ä¼˜åŒ–æ›¿ä»£äº†Redisã€MySQLå¤§éƒ¨åˆ†è¯»å†™åœºæ™¯ï¼Œ<strong>æ˜¯ä¸æ˜¯å¯å®ç°æ— DBç½‘ç»œIOå‘¢ï¼Ÿ</strong></p>
<ul>
<li>åœºæ™¯1ï¼šæ£€æŸ¥æ¥å£è°ƒç”¨æƒé™ï¼ˆRedis æ“ä½œï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e5c198709b34971b8b705926307322c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=s0RqKyGIj6vOmB2yjmEWKl%2B%2BG%2Bo%3D" alt="å›¾ç‰‡19.png" loading="lazy"/></p>
<ul>
<li><strong>åŸé€»è¾‘ï¼š</strong>
<ul>
<li>é€šè¿‡ Redis æŸ¥è¯¢æ¥å£æƒé™åˆ—è¡¨ï¼Œå­˜åœ¨é‡å¤åˆ¤æ–­å¤šæ¬¡è®¿é—® Redis çš„æƒ…å†µã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong>
<ul>
<li>åœ¨æ›´æ–°æƒé™æ—¶é€šè¿‡ <strong>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</strong> é€šçŸ¥è°ƒç”¨æœåŠ¡åˆ·æ–°å†…å­˜ç¼“å­˜ã€‚</li>
<li>é¿å…é€šè¿‡ Redis é¢‘ç¹æŸ¥è¯¢æƒé™ã€‚</li>
</ul>
</li>
<li>åœºæ™¯2ï¼šæµç¨‹å®ä¾‹çš„åˆå§‹åŒ–ï¼ˆMYSQLæ“ä½œï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbeec6093834444b9f5183b2bd1bde5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=Lek4UFu%2FVeQo%2BSLvZFO7TfCu1nE%3D" alt="å›¾ç‰‡20.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>é€šè¿‡æœ¬åœ°æ„å»ºæµç¨‹å®ä¾‹æ•°æ®ï¼Œé‡‡ç”¨é›ªèŠ±ç®—æ³•ç”Ÿæˆå”¯ä¸€ <strong>æµç¨‹å®ä¾‹ Id</strong>ã€‚</li>
<li>æ•´ä¸ªè¿è¡Œæ—¶æµç¨‹è®°å½•å‡å…³è”è‡³å†…å­˜ç¼“å­˜ä¸­çš„å®ä¾‹æ•°æ®ï¼Œæ— éœ€é¢‘ç¹è®¿é—® MySQLã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-33"><strong>å¼‚æ­¥ä»»åŠ¡ä¼˜åŒ–</strong></h4>
<p>é€šè¿‡ä»¥ä¸Šçš„ä¼˜åŒ–ï¼Œå‰©ä¸‹åªæœ‰æŒä¹…åŒ–æµæ°´äº§å‘é€çš„MQæ¶ˆæ¯ç½‘ç»œIOï¼Œé€šè¿‡å¼‚æ­¥ä»»åŠ¡æ–¹å¼å‘é€MQæ¶ˆæ¯ï¼Œä½¿è°ƒç”¨<strong>ä¸»é“¾è·¯æ— é¢å¤–ç½‘ç»œIOæ¶ˆè€—</strong>ï¼ˆä¸åŒ…å«å¤„ç†èŠ‚ç‚¹è¯·æ±‚æ¥å£ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/154d07b6071b4e48989c628f26c26cb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=2k0RSBP8xc246TwGnp5nJD08f6A%3D" alt="å›¾ç‰‡21.png" loading="lazy"/></p>
<ul>
<li><strong>åŸé€»è¾‘ï¼š</strong>
<ul>
<li>æµç¨‹è¿è¡Œäº§ç”ŸæŒä¹…åŒ–çš„æµæ°´è®°å½•ï¼Œé€šè¿‡ MQ å‘é€ã€‚</li>
<li>æ¶ˆæ¯å‘é€è¿‡ç¨‹ä¸­äº§ç”Ÿç½‘ç»œ I/Oï¼Œé™„å¸¦ä¸»é“¾è·¯çš„æ€§èƒ½å¼€é”€ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong>
<ul>
<li>æ¶ˆæ¯å‘é€ä»»åŠ¡é€šè¿‡å¼‚æ­¥çº¿ç¨‹æ–¹å¼å¤„ç†ï¼Œå°†ç½‘ç»œ I/O ä»ä¸»é“¾è·¯ä¸­å®Œå…¨éš”ç¦»ã€‚</li>
<li>ä¸»é“¾è·¯ä»…è´Ÿè´£é€»è¾‘å¤„ç†ï¼Œç½‘ç»œæ“ä½œçš„æ¶ˆè€—è½¬ç§»è‡³å¼‚æ­¥ä»»åŠ¡çº¿ç¨‹æ± ä¸­ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-34"><strong>æ•°æ®åºåˆ—åŒ–</strong></h3>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨äº†å†…å­˜ç¼“å­˜ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼Œæ“ä½œè€—æ—¶å¶ç°2-6msï¼Œé€šè¿‡traceåˆ†æé“¾è·¯ï¼Œå‘ç°è¯»å†™ç¼“å­˜æ•°æ®æ—¶ï¼Œæ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–å äº†ä¸å°‘æ—¶é—´ã€‚å› æ­¤æˆ‘ä»¬è€ƒè™‘äº†ä½¿ç”¨æ›´é«˜æ•ˆç‡çš„äºŒè¿›åˆ¶æ ¼å¼æ›¿ä»£JSONæ ¼å¼ã€‚</p>
<h4 data-id="heading-35"><strong>äºŒè¿›åˆ¶æ ¼å¼</strong></h4>
<h4 data-id="heading-36"/>
<ul>
<li><strong>Protobufç®€ä»‹</strong></li>
</ul>
<p>Protobufæ˜¯ç”±Googleå¼€å‘çš„ä¸€ç§é«˜æ•ˆã€ç»“æ„åŒ–çš„åºåˆ—åŒ–åè®®ï¼Œç”¨äºåœ¨ä¸åŒç³»ç»Ÿä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢å’Œå­˜å‚¨ã€‚å®ƒå±äºä¸€ç§"äºŒè¿›åˆ¶åºåˆ—åŒ–"æ ¼å¼ï¼Œæ¯”ä¼ ç»Ÿçš„æ–‡æœ¬æ ¼å¼ï¼ˆå¦‚JSONã€XMLï¼‰æ›´ç´§å‡‘ã€æ›´å¿«é€Ÿã€‚</p>
<ul>
<li><strong>Protostuffç®€ä»‹</strong></li>
</ul>
<p>Protostuffæ˜¯ä¸€å¥—åŸºäºProtobufçš„é«˜æ€§èƒ½åºåˆ—åŒ–æ¡†æ¶ï¼Œç”±å›½å†…å¼€å‘è€…ç»´æŠ¤ï¼Œå¯åŠ¨æ€åºåˆ—åŒ–å’Œååºåˆ—åŒ–Javaå¯¹è±¡ï¼Œä¸ç”¨äº‹å…ˆå®šä¹‰.protoæ–‡ä»¶ã€æ— éœ€ä»£ç ç”Ÿæˆã€‚</p>
<p>ï¼ˆ <strong><code>javaç±»</code></strong> ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowRunProcNodeBO</span> { Â Â Â Â  
    <span class="hljs-comment">/*** ** è¿è¡Œå®ä¾‹ID ***/</span> Â Â Â Â 
    <span class="hljs-keyword">private</span> Long runExecutionId; 
    <span class="hljs-comment">/*** ** æµç¨‹ç‰ˆæœ¬ID, flow è¡¨ IDå­—æ®µ ***/</span>Â Â 
    <span class="hljs-keyword">private</span> Long versionId; Â 
    <span class="hljs-comment">/*** ** å½“å‰è¿è¡ŒèŠ‚ç‚¹IDï¼Œflow_re_proc_node è¡¨ ID å­—æ®µ ***/</span>
    <span class="hljs-keyword">private</span> Long currentNodeId; Â 
    <span class="hljs-comment">/*** ** å½“å‰è¿è¡ŒèŠ‚ç‚¹åç§°***/</span>
    <span class="hljs-keyword">private</span> String currentNodeName; 
    <span class="hljs-comment">/*** ** å½“å‰è¿è¡ŒèŠ‚ç‚¹ç±»å‹(SYS:ç³»ç»Ÿ, PEOPLE:äººå·¥, CONDITION:æ¡ä»¶, START:å¼€å§‹, END:ç»“æŸ, CHAIN:é“¾æ¡)***/</span>
    <span class="hljs-keyword">private</span> String currentNodeType; 
    <span class="hljs-comment">/*** ** å½“å‰è¿è¡Œå­èŠ‚ç‚¹ç±»å‹ã€æ‰©å±•é¢„ç•™ã€‘* **/</span>* **<span class="hljs-keyword">private</span> String currentSubNodeType; 
} 
</code></pre>
<p>ï¼ˆ <strong><code>protobuf</code></strong> ï¼‰ï¼š</p>
<pre><code class="hljs language-protobuf" lang="protobuf">ProtoBuf syntax = "proto3"; package cn.huolala.ops.flow.service.flow.run.model; message FlowRunProcNodeBO { 
    // è¿è¡Œå®ä¾‹ID Â Â Â Â 
    int64 runExecutionId = 1; Â Â Â Â  Â 
    // æµç¨‹ç‰ˆæœ¬IDï¼Œflowè¡¨IDå­—æ®µ Â Â Â Â 
    int64 versionId = 2; Â Â Â 
    // å½“å‰è¿è¡ŒèŠ‚ç‚¹IDï¼Œflow_re_proc_nodeè¡¨IDå­—æ®µ Â Â 
    int64 currentNodeId = 3; Â Â Â Â 
    // å½“å‰è¿è¡ŒèŠ‚ç‚¹åç§° Â Â Â Â 
    string currentNodeName = 4; Â Â Â Â  Â 
    // å½“å‰è¿è¡ŒèŠ‚ç‚¹ç±»å‹ï¼ˆSYS:ç³»ç»Ÿ, PEOPLE:äººå·¥, CONDITION:æ¡ä»¶, START:å¼€å§‹, END:ç»“æŸ, CHAIN:é“¾æ¡ï¼‰ 
    string currentNodeType = 5; Â Â Â Â  
    // å½“å‰è¿è¡Œå­èŠ‚ç‚¹ç±»å‹ã€æ‰©å±•é¢„ç•™ã€‘ Â Â 
    string currentSubNodeType = 6;  
} 

</code></pre>
<ul>
<li><strong>æ€§èƒ½æµ‹è¯•</strong></li>
</ul>
<blockquote>
<p>å¯¹è±¡æ ¼å¼</p>
</blockquote>
<p><strong>ç¤ºä¾‹1ï¼šæ ·æœ¬æ•°æ®(</strong> <strong>å­—ç¬¦é•¿åº¦=194</strong> <strong>)</strong></p>



































<table><thead><tr><th><strong>å¤„ç†****æ–¹å¼</strong></th><th><strong>åºåˆ—åŒ–(10wæ¬¡)</strong></th><th><strong>ååºåˆ—åŒ–(10wæ¬¡)</strong></th><th><strong>åºåˆ—åŒ–åå­—ç¬¦é•¿åº¦ï¼ˆbyteï¼‰</strong></th></tr></thead><tbody><tr><td><strong>Jackson</strong></td><td>7.8 s</td><td>3.9 s</td><td>235 b</td></tr><tr><td><strong>Jackson(å¤ç”¨ObjectMapper)</strong></td><td>446 ms</td><td>585 ms</td><td>235 b</td></tr><tr><td><strong>Fastjson</strong></td><td>270 ms</td><td>640 ms</td><td>194 b</td></tr><tr><td><strong>Protostuff</strong></td><td>110 ms</td><td>150 ms</td><td>78 b</td></tr></tbody></table>
<blockquote>
<p>å¯¹è±¡æ•°ç»„æ ¼å¼</p>
</blockquote>
<p><strong>ç¤ºä¾‹2ï¼šæ ·æœ¬æ•°æ®(</strong> <strong>å­—ç¬¦é•¿åº¦=8533</strong> <strong>)</strong></p>



































<table><thead><tr><th>å¤„ç†æ–¹å¼</th><th><strong>åºåˆ—åŒ–(10wæ¬¡)</strong></th><th><strong>ååºåˆ—åŒ–(10wæ¬¡)</strong></th><th><strong>åºåˆ—åŒ–åå­—ç¬¦é•¿åº¦ï¼ˆbyteï¼‰</strong></th></tr></thead><tbody><tr><td><strong>Jackson</strong></td><td>11.3 s</td><td>12.3 s</td><td>10 kb</td></tr><tr><td><strong>Jackson(å¤ç”¨ObjectMapper)</strong></td><td>4.4 s</td><td>7.1 s</td><td>10 kb</td></tr><tr><td><strong>Fastjson</strong></td><td>2.4 s</td><td>12.3 s</td><td>8.4 kb</td></tr><tr><td><strong>Protostuff</strong></td><td>2.1 s</td><td>1.9 s</td><td>5 kb</td></tr></tbody></table>






<table><thead><tr><th><strong>ä¸ºä»€ä¹ˆJacksonåºåˆ—åŒ–åçš„å†…å®¹æ¯”åŸå§‹å†…å®¹è¿˜é•¿ï¼Ÿ</strong> Jacksonåºåˆ—åŒ–é»˜è®¤å¸¦ç©ºæ ¼/æ¢è¡Œï¼Œå¯è°ƒæ•´ <strong>SerializationFeature.INDENT_OUTPUT</strong>Â è¾“å‡ºä¸ºç´§å‡‘JSON objectMapper.configure(SerializationFeature.INDENT_OUTPUT, false);</th></tr></thead></table>
<p><strong>æœ€ç»ˆæ–¹æ¡ˆ</strong>ï¼šæ­é…ä½¿ç”¨ï¼Œé…ç½®åŠè¿è¡Œæ—¶æ•°æ®ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæœ€åå‘é€æŒä¹…åŒ–æ•°æ®æ—¶ä½¿ç”¨Jacksonåºåˆ—åŒ–ï¼Œæ¶‰åŠæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ï¼ŒJacksonä¼šæ›´åŠ çµæ´»æ–¹ä¾¿ã€‚</p>
<p><strong>Protostuffå·¥å…·ç±»</strong></p>
<pre><code class="hljs language-java" lang="java">Java <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProtostuffSerializer</span> { Â Â 
    <span class="hljs-comment">// åºåˆ—åŒ–å¯¹è±¡ Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">byte</span>[] serialize(T obj) {...}; Â Â 
    <span class="hljs-comment">// ååºåˆ—åŒ–å¯¹è±¡ Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">deserialize</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data, Class&lt;T&gt; clazz)</span> {...}; Â Â Â Â  Â Â Â Â 
    <span class="hljs-comment">// åºåˆ—åŒ–åˆ—è¡¨ Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">byte</span>[] serializeArray(List&lt;T&gt; list) {...}; Â Â Â Â 
    <span class="hljs-comment">// ååºåˆ—åŒ–åˆ—è¡¨ Â Â Â Â </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; List&lt;T&gt; deserializeArray {...}; } 
</code></pre>
<ul>
<li><strong>é™¤äº†ç¼“å­˜æ•°æ®æ ¼å¼åŒ–ï¼Œè¿˜èƒ½åšä»€ä¹ˆ?</strong>
<ul>
<li>å¤æ‚å¯¹è±¡æ·±æ‹·è´ï¼šå°†å¯¹è±¡æ ¼å¼åŒ–ä¸ºäºŒè¿›åˆ¶ï¼Œå†å°†äºŒè¿›åˆ¶ååºåˆ—åŒ–ä¸ºæ–°å¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>æµç¨‹æ¥å£èŠ‚ç‚¹ä¸»è¦è¿è¡Œæ­¥éª¤ï¼š</strong></p>
<ul>
<li><strong>èŠ‚ç‚¹å‰ç½®å¤„ç†</strong>ï¼šRunNodeServiceImpl#processStart</li>
<li><strong>èŠ‚ç‚¹é€»è¾‘å¤„ç†</strong>ï¼šAbsAutoRegisterProcessor#process</li>
<li><strong>èŠ‚ç‚¹åç½®å¤„ç†</strong>ï¼šRunNodeServiceImpl#processFinish</li>
</ul>
<p><strong>ä¼˜åŒ–å‰ï¼ˆJSONï¼‰ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5485e522e08c44818679bd5b27ae7d78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=Y3AGv85vu7obPARtfITvpStPOAk%3D" alt="å›¾ç‰‡22.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c44fb1a4fb149589972c6eb78f204f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=zTxocLnXFoo9dUEq8YpwP0mgkh4%3D" alt="å›¾ç‰‡23.png" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–åï¼ˆProtobufï¼‰</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d02bf981d4d344a496c43064786fa662~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=NZVid2%2FY2OYyLf%2FreMkjm%2FfLoUM%3D" alt="å›¾ç‰‡24.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cb86a65fe754210864fbb5971c8474b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=Dqq8KG%2BQqrFVt2RhMnV2SwLLYxY%3D" alt="å›¾ç‰‡25.png" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong> å•ä¸ªèŠ‚ç‚¹å¹³å‡<strong>è€—æ—¶</strong>(processFinish-processStart)<strong>é™è‡³2msä»¥å†…</strong></p>
<p><strong>å¯¹è±¡åˆ—è¡¨è¿½åŠ å…ƒç´ </strong></p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ¡ä»¶èŠ‚ç‚¹æ¯ä¸ªæ¡ä»¶é¡¹æ‰§è¡Œæµæ°´ï¼Œåªéœ€è¦è¿½åŠ è®°å½•ï¼Œä¸éœ€è¦ä¿®æ”¹æˆ–åˆ é™¤ã€‚</p>
<p><strong>è®¾è®¡æ€è·¯</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fede1add321f46868a6c144b674d4602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=W7GYxtuMmAQzTWn%2FE5f1EpSlKQc%3D" alt="å›¾ç‰‡26.png" loading="lazy"/></p>






<table><thead><tr><th>ä»¥ä¸Šæ–¹å¼åºåˆ—åŒ–å¯¹è±¡åˆ—è¡¨ä¸æ™®é€šæ–¹å¼çš„æ ¼å¼æ˜¯ä¸å…¼å®¹çš„<strong>deserializeArrayWithAppend â‰  deserializeArray</strong></th></tr></thead></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<p>å°†å¯¹è±¡å…ƒç´ è¿½åŠ åˆ°åˆ—è¡¨æœ«å°¾</p>
<pre><code class="hljs language-Java" lang="Java">Java <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">byte</span>[] appendObject(<span class="hljs-type">byte</span>[] existingBytes, T obj) { Â Â 
    <span class="hljs-comment">// åºåˆ—åŒ–æ–°å¯¹è±¡ Â Â Â Â </span>
    <span class="hljs-type">byte</span>[] objBytes = *serialize*(obj); Â Â Â Â 
    <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> objBytes.length; Â Â Â Â  Â Â Â Â 
    <span class="hljs-comment">// å‡†å¤‡4å­—èŠ‚é•¿åº¦å­—èŠ‚ Â Â Â Â </span>
    <span class="hljs-type">byte</span>[] lenBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[ConstantPool.*NUMBER_FOUR*]; lenBytes[ConstantPool.*NUMBER_ZERO*] = (<span class="hljs-type">byte</span>) ((len &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xFF</span>); lenBytes[ConstantPool.*NUMBER_ONE*] = (<span class="hljs-type">byte</span>) ((len &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xFF</span>); lenBytes[ConstantPool.*NUMBER_TWO*] = (<span class="hljs-type">byte</span>) ((len &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF</span>); lenBytes[ConstantPool.*NUMBER_THREE*] = (<span class="hljs-type">byte</span>) (len &amp; <span class="hljs-number">0xFF</span>); Â Â Â Â  Â Â 
    <span class="hljs-comment">// æ‹¼æ¥ï¼šå·²æœ‰å­—èŠ‚ + 4å­—èŠ‚é•¿åº¦ + æ–°å¯¹è±¡å­—èŠ‚ Â Â Â Â </span>
    <span class="hljs-type">byte</span>[] newBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[existingBytes.length + ConstantPool.*NUMBER_FOUR* + len]; System.*arraycopy*(existingBytes, ConstantPool.*NUMBER_ZERO*, newBytes, ConstantPool.*NUMBER_ZERO*, existingBytes.length); Â Â Â Â 
    System.*arraycopy*(lenBytes, ConstantPool.*NUMBER_ZERO*, newBytes, existingBytes.length, ConstantPool.*NUMBER_FOUR*); Â Â Â Â 
    System.*arraycopy*(objBytes, ConstantPool.*NUMBER_ZERO*, newBytes, existingBytes.length + ConstantPool.*NUMBER_FOUR*, len); Â Â Â Â 
    <span class="hljs-keyword">return</span> newBytes; 
} 
</code></pre>
<p>å°†äºŒè¿›åˆ¶æ•°æ®ååºåˆ—åŒ–ä¸ºå¯¹è±¡åˆ—è¡¨</p>
<pre><code class="hljs language-Java" lang="Java">Java <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">deserializeArrayWithAppend</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data, Class&lt;T&gt; clazz)</span> { Â Â Â Â 
    List&lt;T&gt; resultList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); Â Â Â Â 
    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> ConstantPool.*NUMBER_ZERO*; Â Â Â Â 
    <span class="hljs-type">int</span> <span class="hljs-variable">totalLen</span> <span class="hljs-operator">=</span> data.length; Â Â Â Â 
    <span class="hljs-keyword">while</span> (index + ConstantPool.*NUMBER_FOUR* &lt;= totalLen) { Â Â 
        <span class="hljs-comment">// è¯»å–å¯¹è±¡é•¿åº¦ Â Â Â Â Â Â Â Â </span>
        <span class="hljs-type">int</span> <span class="hljs-variable">objLen</span> <span class="hljs-operator">=</span> ((data[index] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">24</span>) | Â 
        ((data[index + ConstantPool.*NUMBER_ONE*] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">16</span>) | Â Â Â Â Â 
        ((data[index + ConstantPool.*NUMBER_TWO*] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">8</span>) | Â Â Â Â Â Â 
        (data[index + ConstantPool.*NUMBER_THREE*] &amp; <span class="hljs-number">0xFF</span>); Â 
        index += ConstantPool.*NUMBER_FOUR*; Â Â Â Â Â Â Â 
        <span class="hljs-keyword">if</span> (index + objLen &gt; totalLen) {<span class="hljs-keyword">break</span>;} Â Â Â Â Â 
        <span class="hljs-type">byte</span>[] objBytes = Arrays.*copyOfRange*(data, index, index + objLen); Â Â Â 
        <span class="hljs-type">T</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> *deserialize*(objBytes, clazz); Â 
        resultList.add(obj); Â 
        index += objLen; Â 
    } Â Â Â 
    <span class="hljs-keyword">return</span> resultList;
} 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28c6eacdb30049788cba4e4503d4228e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=F2UdUs63lN4W%2FRgYZXoLhmdBSZs%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-37"><strong>JVMå¾®è°ƒ</strong></h4>
<p>JVMå¯åŠ¨å‚æ•°è°ƒä¼˜åœ¨æœåŠ¡æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæ›´åƒæ˜¯â€œé”¦ä¸Šæ·»èŠ±â€ï¼Œä¸èƒ½ä¾èµ–è°ƒæ•´JVMå‚æ•°è¾¾åˆ°å¤§å¹…æ€§èƒ½æå‡ï¼Œåº”è¯¥æ˜¯é’ˆå¯¹æ€§åœ°å¾®è°ƒï¼Œå‡å°GCçš„å½±å“ï¼Œä½¿æœåŠ¡å¤„äºæ›´å¥åº·çŠ¶æ€ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>é€šè¿‡è°ƒå°-XX:MaxGCPauseMillisï¼Œæ¯”å¦‚50msï¼Œç¼“è§£GCæ—¶é—´çªåˆºæƒ…å†µã€‚</p>
</li>
<li>
<p>é€šè¿‡è°ƒå¤§-XX:G1HeapRegionSizeï¼Œå‡å°‘G1 Humongous Allocationå‡ºç°æ¬¡æ•°ã€‚</p>
</li>
</ul>
<h4 data-id="heading-38"><strong>æ€§èƒ½ä¼˜åŒ–ç»“æœ</strong></h4>
<p>ä»…ä¸¾ä¾‹ä¸€äº›ç‰¹å¾ä»£è¡¨æ€§çš„åœºæ™¯</p>
<h5 data-id="heading-39"><strong>è¿›çº¿ä¼˜å…ˆçº§æ¥å£</strong></h5>
<p>RTä¼˜åŒ–è¿‡ç¨‹: <strong>5sä»¥ä¸Š</strong> =&gt; <strong>3s</strong> =&gt; <strong>500ms</strong> =&gt; <strong>160ms Â =&gt;</strong> <strong>100ms(ä¸‹é™98%)</strong> ã€ä»…å‰©æ— æ³•é¿å…çš„ IO è€—æ—¶ã€‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f493273b0c64a3fbbfb4e8fc955d6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=%2Bndrz6s0%2FLD2qJKeBgC80bs8boU%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-40"><strong>ä¸²è¡Œæµç¨‹æ¥å£ï¼ˆ</strong> 50ä¸ªèŠ‚ç‚¹ <strong>ï¼Œæ— å¤–éƒ¨</strong> <strong>API</strong> <strong>è°ƒç”¨ï¼‰</strong></h5>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¼˜åŒ–å‰ï¼š2.6s(å•ä¸ªèŠ‚ç‚¹å¹³å‡æ‰§è¡Œè€—æ—¶30ms)</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b21ae0ab79bb4ab2ba23a2c4635fc4f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=VsdxT%2Ba1xEMuJ6%2Bt304gFaUhNHM%3D" alt="å›¾ç‰‡27.png" loading="lazy"/></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¼˜åŒ–åï¼š<strong>90ms</strong> (å•ä¸ªèŠ‚ç‚¹å¹³å‡æ‰§è¡Œè€—æ—¶2msä»¥å†…)</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/201f3a8fa4dc44959a2071a8fba95237~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=RJtHxmxj6IsT0XovMlRpobeeHPI%3D" alt="å›¾ç‰‡28.png" loading="lazy"/></p>
<h4 data-id="heading-41">æœºå™¨æ•°é‡</h4>
<p>é€šè¿‡å®Œæˆä»¥ä¸Šä¼˜åŒ–æ‰‹æ®µï¼Œæ˜Ÿå›¾å¹³å°ä»æœ€å¼€å§‹åŸºæœ¬æ— æ³•æä¾›æœ‰æ•ˆçš„æœåŠ¡ï¼Œåˆ°ç›®å‰ç¨³å®šé«˜æ•ˆåœ°è¿è¡Œï¼ŒæœåŠ¡æ€§èƒ½å¾—åˆ°è´¨çš„æå‡ï¼ŒæœåŠ¡æœºå™¨æ•°<strong>å‡å°‘60+%</strong> ï¼Œæ”¯æ’‘æ›´é«˜è¯·æ±‚å¤„ç†é‡ï¼Œ<strong>RT(p95)ä¸‹é™70+%</strong> ï¼Œå¹¶ä¸”æœåŠ¡çŠ¶å†µæ˜æ˜¾æ›´ç¨³å®šå¥åº·ã€‚</p>
<p><strong>CPUä½¿ç”¨æƒ…å†µ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3dace6cb4bf462fb41aa371da6fa46a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=t2Xomjh6b2AinL97iQWXMDqQw4A%3D" alt="image.png" loading="lazy"/></p>
<p><strong>GCå¹³å‡è€—æ—¶ä¸å¼‚å¸¸æƒ…å†µ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64f7c3c52f5a42e7bb51832672353539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=iPTO0EqRRIU%2BqIDalfxt1wmExuY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>JVMå †å†…å­˜ä½¿ç”¨æƒ…å†µ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77788ef0984440078c132edac69413d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=QvE5ij1V0v6qigWYl4PS3BJRncc%3D" alt="image.png" loading="lazy"/></p>
<p>ç»è¿‡ä»¥ä¸Šä¼˜åŒ–ï¼Œå…¶ä¸­å…·æœ‰ä»£è¡¨æ€§çš„ä¸€ä¸ªä¸šåŠ¡æµç¨‹æ¥å£ï¼Œé…ç½®èŠ‚ç‚¹200+ï¼Œå•æ¬¡æ‰§è¡ŒèŠ‚ç‚¹50+ï¼ŒèŠ‚ç‚¹è¯·æ±‚ä¸šåŠ¡æ¥å£æ•°10+ï¼Œä»åŸæœ¬è¯·æ±‚è€—æ—¶5sä»¥ä¸Šï¼Œç›®å‰ç¨³å®šåœ¨100mså·¦å³ï¼Œ<strong>æ€§èƒ½æå‡äº†è¿‘50å€</strong>ã€‚</p>
<h2 data-id="heading-42"><strong>å¹³å°åŠŸèƒ½ä»‹ç»</strong></h2>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong></p>
<p><strong><code>æœ¬ç¯‡æ–‡ç« ä¸“æ³¨äºâ€œæ€§èƒ½ä¼˜åŒ–â€ï¼ŒåŠŸèƒ½ä»…æåŠæ ¸å¿ƒåŠŸèƒ½  </code></strong></p>
<p><strong>æ¥å£ç®¡ç†</strong></p>
<ul>
<li>Â <strong>å…¨åŸŸè¦†ç›–</strong>ï¼šæ”¯æŒå…¬å¸å†…éƒ¨æ‰€æœ‰HTTP/SOA/SSE/MCPæ¥å£é…ç½®æ¥å…¥ï¼Œæ— é¡»æ‹…å¿ƒé—æ¼ï¼Œå®ç°äº†å¿«æ·å…³è”å¯¼å…¥ï¼Œæ“ä½œæ›´ä¾¿æ·ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faf708a2a2ee48e69beefc159c362754~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=HGbmS9DPzKiM1u%2BmAvmAz92TwpE%3D" alt="å›¾ç‰‡29.png" loading="lazy"/></p>
<ul>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šæ¥å£æ”¯æŒå¤šç‰ˆæœ¬ç®¡ç†ï¼Œè°ƒç”¨æƒé™å’Œå¼•ç”¨ç‰ˆæœ¬éƒ½ç”±è‡ªå·±æŠŠæ§ï¼Œå®‰å…¨åˆæœ‰åºã€‚</li>
<li><strong>å‡½æ•°ç®¡ç†</strong>ï¼šå†…ç½®Groovyè„šæœ¬ç¼–è¾‘åŠŸèƒ½ï¼ˆåœ¨ç™½åå•èŒƒå›´å†…ï¼‰ï¼Œå¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è‡ªå®šä¹‰å‡½æ•°ï¼Œæ¯”å¦‚å•ä½è½¬æ¢ã€æ•°æ®æå–ï¼Œæ˜¯ç”¨äºå¤„ç†è¯·æ±‚å’Œå“åº”çš„"å¦™æ‹›"ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e2d9ff103d417c988d6bc78d76432c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=WKj3tEm7wsog5UJAyVx4MygiHOs%3D" alt="å›¾ç‰‡30.png" loading="lazy"/></p>
<ul>
<li><strong>å­—æ®µè¡ç”Ÿ</strong>ï¼šä½¿ç”¨æ•°æ®å­—å…¸æˆ–å‡½æ•°æ–¹å¼ï¼Œå¯¹æ¥å£å·²æœ‰çš„å­—æ®µè¿›è¡Œå¼‚æ„ç”Ÿæˆæ–°çš„ç»“æœå­—æ®µï¼Œç‰¹åˆ«é€‚åˆé’ˆå¯¹æŸäº›å­—æ®µåšè§£æå¤„ç†ã€‚</li>
<li><strong>ç§Ÿæˆ·éš”ç¦»</strong>ï¼šä¸åŒä¸šåŠ¡çº¿ä¹‹é—´æ•°æ®äº’ä¸å¹²æ‰°ï¼Œä¿è¯æ•°æ®å®‰å…¨æ€§ã€‚</li>
</ul>
<p><strong>æµç¨‹ç¼–æ’</strong></p>
<ul>
<li><strong>æµç¨‹è‡ªå®šä¹‰</strong>ï¼šé€šè¿‡æµç¨‹ç¼–æ’æ–¹å¼ï¼Œç»„è£…ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ç»“æœï¼Œæˆ–è€…å¯¹æ¥å£ç»“æœäºŒæ¬¡å¤„ç†åï¼Œå†ä½œä¸ºå‚æ•°ä¼ å…¥ä¸‹ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼Œç”šè‡³æ— éœ€è°ƒç”¨ä¸šåŠ¡æ¥å£ï¼Œå•çº¯ä½¿ç”¨å‡½æ•°å¤„ç†å¹¶è¿”å›ç»“æœã€‚</li>
<li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šæµç¨‹æ”¯æŒå¤šèŠ‚ç‚¹å¹¶è¡Œå¤„ç†ï¼Œå†å°†ç»“æœè¿›è¡Œåˆå¹¶ï¼Œæé«˜æ•´ä½“æ•ˆç‡ã€‚</li>
<li><strong>é»‘ç›’å°è£…</strong>ï¼šæµç¨‹å¯¹å¤–è¡¨ç°ä¸ºæ™®é€šæ¥å£ï¼Œä¸Šæ¸¸æ— éœ€æ„ŸçŸ¥å…·ä½“å®ç°é€»è¾‘ï¼Œå°±è·Ÿæ™®é€šæ¥å£è°ƒç”¨ä¸€æ ·å¾—å¿ƒåº”æ‰‹ã€‚</li>
<li><strong>æµç¨‹åµŒå¥—</strong>ï¼šå·²å‘å¸ƒçš„æµç¨‹æ¥å£å¯ä»¥è¢«å¤ç”¨ï¼Œå’Œä½¿ç”¨æ™®é€šæ¥å£æ— å¼‚ã€‚</li>
</ul>
<p>æµç¨‹æ¥å£é…ç½®ç¤ºä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea0a2dda112c4ec3a574b5f7348ba8af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=tIzGBL0WsK8JrIeErhZJiESm0eU%3D" alt="å›¾ç‰‡31.png" loading="lazy"/></p>
<p><strong>æ¥å£è°ƒç”¨</strong></p>
<ul>
<li><strong>ç®€åŒ–å¯¹æ¥</strong>ï¼šæä¾›ç®€æ´çš„å…¬å¸å†…éƒ¨æ ‡å‡†åè®®æ¥å£ï¼Œèƒ½å¿«æ·å®Œæˆé…ç½®å¯¹æ¥ã€‚</li>
<li><strong>ç»Ÿä¸€è°ƒç”¨</strong>ï¼šæ— è®ºæ˜¯æ™®é€šæ¥å£è¿˜æ˜¯æµç¨‹æ¥å£ï¼Œéƒ½æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„è°ƒç”¨å…¥å£ï¼Œæ–¹ä¾¿ä¸šåŠ¡ç»´æŠ¤ç®¡ç†ã€‚</li>
</ul>
<p><strong>æ’éšœæ”¯æŒ</strong></p>
<ul>
<li><strong>å…¨é“¾è·¯è°ƒç”¨è¿½æº¯</strong>ï¼šå€ŸåŠ©TraceIdå¯è¿½è¸ªå†å²è°ƒç”¨æƒ…å†µï¼ŒæŸ¥çœ‹è¯·æ±‚å‚æ•°ã€å“åº”ç»“æœç­‰ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</li>
<li><strong>ç»Ÿè®¡çœ‹æ¿</strong>ï¼šä¸šåŠ¡ç§Ÿæˆ·ç‹¬ç«‹çœ‹æ¿ï¼Œæä¾›å•ä¸ªæ¥å£ã€ä¸åŒç‰ˆæœ¬å’Œæ—¶é—´èŒƒå›´ç­‰çº¬åº¦ç»Ÿè®¡ï¼Œä¸€ç›®äº†ç„¶ï¼Œä¾¿äºä¸šåŠ¡åˆ†æã€‚</li>
</ul>
<p><strong>æµç¨‹æ¥å£è°ƒç”¨æµæ°´ç¤ºä¾‹</strong></p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/563a3aa7183049249a38aec1b392d55b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=H1LUckbTSgmndJVDLh6DfJ1B3rs%3D" alt="å›¾ç‰‡32.png" loading="lazy"/></p>
<h2 data-id="heading-43"><strong>æ€§èƒ½å®è·µæ€è€ƒ</strong></h2>
<h4 data-id="heading-44"><strong>è‰¯å¥½ä»£ç ä¹ æƒ¯ï¼šæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯è®¾è®¡ä¸å®ç°</strong></h4>
<p>ç¨‹åºçš„è®¾è®¡å’Œå®ç°å†³å®šäº†æ€§èƒ½ä¼˜åŒ–çš„ä¸Šé™ï¼Œè‰¯å¥½çš„ä»£ç ä¹ æƒ¯æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒåŸºçŸ³ã€‚</p>
<ul>
<li><strong>ç¨‹åºè®¾è®¡ä¸ç®—æ³•ä¼˜åŒ–æ˜¯å…³é”®</strong>
<ul>
<li>åˆç†é€‰æ‹©æ•°æ®ç»“æ„ï¼šç¡®ä¿æ•°æ®è®¿é—®çš„é«˜æ•ˆæ€§ï¼Œå¦‚ä½¿ç”¨HashMapä»£æ›¿Listè¿›è¡ŒæŸ¥æ‰¾ï¼Œå‡å°‘æ—¶é—´å¤æ‚åº¦ã€‚</li>
<li>å‡å°‘ä¸å¿…è¦çš„è®¡ç®—ï¼šç¼“å­˜é‡å¤è®¡ç®—çš„ç»“æœï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ã€‚</li>
<li>ä¼˜åŒ–ç®—æ³•ï¼šé’ˆå¯¹åœºæ™¯é€‰æ‹©æœ€ä¼˜ç®—æ³•ï¼Œé¿å…ä½æ•ˆéå†æˆ–åµŒå¥—å¾ªç¯ã€‚</li>
<li>åˆç†è®¾è®¡æ•°æ®æµï¼šç®€åŒ–é€»è¾‘è®¾è®¡ï¼Œå‡å°‘å¤šä½™çš„ä¸­é—´æ“ä½œã€‚</li>
</ul>
</li>
<li><strong>é¿å…æ˜æ˜¾çš„æ€§èƒ½é™·é˜±</strong>
<ul>
<li><strong>è¿‡åº¦åŒæ­¥</strong>ï¼šå‡å°‘è¿‡å¤šçš„é”ç«äº‰å’Œé”ç­‰å¾…é—®é¢˜ã€‚</li>
<li><strong>é¢‘ç¹I/Oæ“ä½œ</strong>ï¼šä¼˜å…ˆä½¿ç”¨æ‰¹é‡è¯»å†™ã€å¼‚æ­¥I/Oï¼Œé¿å…é€æ¡æˆ–é¢‘ç¹å¤„ç†ã€‚</li>
<li><strong>åå°„æ»¥ç”¨</strong>ï¼šåå°„æœºåˆ¶æ…¢ã€è€—èµ„æºï¼Œä»…åœ¨å¿…è¦æƒ…å†µä¸‹ä½¿ç”¨ã€‚</li>
<li><strong>å¯¹è±¡åˆ›å»ºè¿‡å¤š</strong>ï¼šå‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ï¼Œå°½é‡é‡ç”¨å¯¹è±¡ï¼ˆå¦‚ä½¿ç”¨å¯¹è±¡æ± ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-45"><strong>ç§‘å­¦åˆ†ææ€§èƒ½é—®é¢˜ï¼šå¼„æ¸…æ¥šå…·ä½“ä¸ºä»€ä¹ˆæ…¢</strong></h4>
<p>é¢å¯¹æ€§èƒ½é—®é¢˜æ—¶ï¼Œç§‘å­¦åˆ†ææ˜¯ä¼˜åŒ–çš„å‰æï¼Œéœ€è¦ç»¼åˆç›´è§‚æŒ‡æ ‡å’Œè¾…åŠ©å·¥å…·å®šä½é—®é¢˜ã€‚</p>
<h4 data-id="heading-46"><strong>ç›´è§‚æŒ‡æ ‡ï¼šå‘ç°æ€§èƒ½ç“¶é¢ˆ</strong></h4>
<p>é€šè¿‡æœåŠ¡çš„å…³é”®æ€§èƒ½ç›‘æ§æŒ‡æ ‡ï¼Œå¿«é€Ÿåˆ¤æ–­å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™çš„åŸå› ï¼š</p>
<ul>
<li><strong>æœåŠ¡å±‚ç›‘æ§</strong>
<ul>
<li><strong>CPU ä½¿ç”¨ç‡</strong>ï¼šé«˜ CPU ä½¿ç”¨ç‡å¯èƒ½ä¸çº¿ç¨‹æ¶ˆè€—ã€å¤§é‡è®¡ç®—ç›¸å…³ã€‚</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šæ£€æŸ¥å†…å­˜æ˜¯å¦æŒç»­å¢é•¿ï¼Œæ˜¯å¦æœ‰å†…å­˜æ³„æ¼é£é™©ã€‚</li>
<li><strong>çº¿ç¨‹æ± çŠ¶æ€</strong>ï¼šçº¿ç¨‹æ˜¯å¦è€—å°½ï¼Œçº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—æ˜¯å¦è¿‡é•¿ã€‚</li>
</ul>
</li>
<li><strong>ä¸­é—´ä»¶ç›‘æ§</strong>
<ul>
<li><strong>æ•°æ®åº“å±‚</strong>ï¼šMySQL æŸ¥è¯¢æ—¶é—´ã€æ…¢æŸ¥è¯¢ç»Ÿè®¡ï¼Œä»¥åŠå¹¶å‘è¿æ¥é‡ã€‚</li>
<li><strong>ç¼“å­˜å±‚</strong>ï¼šRedis å‘½ä¸­ç‡ã€æŸ¥è¯¢å»¶è¿Ÿã€å†…å­˜å ç”¨ç­‰æŒ‡æ ‡ã€‚</li>
<li><strong>é˜Ÿåˆ—ç³»ç»Ÿ</strong>ï¼šMQ å µå¡ã€æ¶ˆè´¹å»¶è¿Ÿç­‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-47"><strong>è¾…åŠ©å·¥å…·ï¼šè¿½è¸ªé—®é¢˜æ ¹æº</strong></h4>
<ul>
<li><strong>ç«ç„°å›¾</strong>ï¼šå¯¹çƒ­ç‚¹ä»£ç è¿›è¡Œåˆ†æï¼Œå®šä½è€—æ—¶æœ€å¤šçš„å‡½æ•°æˆ–æ–¹æ³•ã€‚</li>
<li><strong>çº¿ç¨‹å †æ ˆï¼ˆjstackï¼‰</strong>ï¼šåˆ†æçº¿ç¨‹é˜»å¡ã€æ­»é”æˆ–é«˜ CPU æ¶ˆè€—æ¥æºã€‚</li>
<li><strong>åŠ¨æ€è¯Šæ–­å·¥å…·ï¼ˆå¦‚ Arthasï¼‰</strong>ï¼šå®æ—¶æŸ¥çœ‹æ–¹æ³•è€—æ—¶ã€çº¿ç¨‹çŠ¶æ€å’Œè¿è¡Œæƒ…å†µã€‚</li>
<li><strong>æ—¥å¿—åŸ‹ç‚¹</strong>ï¼šé€šè¿‡åœ¨å…³é”®ä¸šåŠ¡é€»è¾‘ä¸­æ·»åŠ è€—æ—¶æ—¥å¿—ï¼Œæ”¶é›†å¹¶åˆ†ææ€§èƒ½æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-48"><strong>æ€§èƒ½ä¼˜åŒ–åˆ©å¼Šæƒè¡¡ï¼šä¼˜åŒ–ä¸åªæ˜¯æŠ€æœ¯ä»»åŠ¡ï¼Œæ›´æ˜¯æƒè¡¡è‰ºæœ¯</strong></h4>
<p>æ€§èƒ½ä¼˜åŒ–ä¸ä»…éœ€è¦æŠ€æœ¯å®è·µï¼Œä¹Ÿéœ€è¦æ…é‡è¯„ä¼°ä¼˜åŒ–çš„ <strong>æˆæœ¬</strong>ã€<strong>æ”¶ç›Š</strong> å’Œ <strong>é£é™©</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bec864dccb0439da598c5eb08ad2309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=aPzVe0mtTYc%2BSiTd0L9qAsv1CKY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-49"><strong>ä¼˜åŒ–éœ€ä»å…¨å±€è§†è§’ç€çœ¼</strong></h4>
<ul>
<li>æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯ä¸€å‘³è¿½æ±‚"æ›´å¿«"ï¼Œè€Œåº”å¹³è¡¡ <strong>æ€§èƒ½</strong> å’Œ <strong>å¯ç»´æŠ¤æ€§</strong>ã€<strong>å¼€å‘æˆæœ¬</strong> çš„å…³ç³»ã€‚</li>
<li>ä¼˜åŒ–çš„ç»ˆç‚¹åœ¨äº <strong>å……åˆ†æ»¡è¶³ä¸šåŠ¡éœ€æ±‚å³å¯</strong>ï¼Œé¿å…è¿‡åº¦ä¼˜åŒ–å¸¦æ¥çš„æŠ€æœ¯å€ºå’Œå¤æ‚åº¦è†¨èƒ€ã€‚</li>
<li>ä¸ç›²ç›®ä¼˜åŒ–ï¼Œè€Œæ˜¯é€šè¿‡ç§‘å­¦åˆ†æé—®é¢˜ç”¨"åˆ€åˆƒä¸Šçš„åŠªåŠ›"åšåˆ°æ•ˆç›Šæœ€å¤§åŒ–ã€‚</li>
</ul>
<h2 data-id="heading-50"><strong>é¡¹ç›®æ”¶ç›Š</strong></h2>
<p>æ˜Ÿå›¾å¹³å°å·²æˆåŠŸæ¥å…¥<strong>è¶…è¿‡100ä¸ªä¸šåŠ¡æ–¹æœåŠ¡</strong>ï¼Œä¸šåŠ¡æ¥å£<strong>700+</strong>ï¼Œè‡ªå®šä¹‰æµç¨‹æ¥å£<strong>100+</strong>ï¼Œæ—¥å‡è°ƒç”¨é‡<strong>500w+</strong>ï¼Œä¸šåŠ¡è½åœ°åœºæ™¯è¾ƒçµæ´»æ¶µç›–å¸¸è§„ä¸šåŠ¡ã€å¤§æ¨¡å‹(SSE/MCP)ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-51"><strong>ä¸šåŠ¡æ”¶ç›Š</strong></h3>
<p>é€šè¿‡æ˜Ÿå›¾å¹³å°å¯¹æ¥å®ç°çš„ä¸šåŠ¡åœºæ™¯æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ç®€å•çœ‹ä¸‹å‡ ä¸ªå…¸å‹ä¸šåŠ¡æ¡ˆä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74e637afd378482c9bc2095118519f6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=4z%2Fax%2BWhQO%2FO1KMM%2FkxtGpxHRHk%3D" alt="å›¾ç‰‡33.png" loading="lazy"/></p>
<h3 data-id="heading-52"><strong>ç ”å‘æ•ˆèƒ½</strong></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d8ec11c41914e88b08df265cd169803~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=PULDNpxV%2F7bjVnKNywBYZ%2FHB7ZM%3D" alt="å›¾ç‰‡34.png" loading="lazy"/></p>
<h3 data-id="heading-53"><strong>æ€§èƒ½ä¼˜åŒ–å¯¼å‘</strong></h3>
<p>å®ç°æ€§èƒ½æå‡ï¼Œåº”éµå¾ª <strong>ç²¾å‡†å®šä½é—®é¢˜ã€ç§‘å­¦ä¼˜åŒ–ç­–ç•¥ã€æƒè¡¡åˆ©å¼Šå¹³è¡¡</strong> çš„åŸåˆ™ï¼Œæ³¨é‡ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<h4 data-id="heading-54"><strong>æ ¸å¿ƒç†å¿µï¼šè®¾è®¡ä¸å®ç°æ˜¯æ ¹æœ¬</strong></h4>
<ul>
<li><strong>é«˜æ•ˆä»£ç </strong>ï¼šä¼˜åŒ–ç®—æ³•ã€ç²¾ç®€é€»è¾‘ï¼Œåˆç†é€‰æ‹©æ•°æ®ç»“æ„ï¼Œå‡å°‘å†—ä½™æ“ä½œå’Œé”ç«äº‰ã€‚</li>
<li><strong>é¿å…æ€§èƒ½é™·é˜±</strong>ï¼šå‡å°‘é¢‘ç¹I/Oã€å¤§é‡åå°„å’Œä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚</li>
</ul>
<h4 data-id="heading-55"><strong>ä¼˜åŒ–æ­¥éª¤ï¼šç”±å¤–å‘å†…ï¼Œå±‚å±‚æ·±å…¥</strong></h4>
<p>1.Â <strong>æ”¹åŒæ­¥ä¸ºå¼‚æ­¥</strong>ï¼šé‡Šæ”¾é˜»å¡ï¼Œæå‡æœåŠ¡æ•ˆç‡ã€‚</p>
<p>2.Â <strong>ä¼˜åŒ–å¹¶å‘æ¨¡å‹</strong>ï¼šåˆ©ç”¨å¤šçº¿ç¨‹æé«˜èµ„æºä½¿ç”¨ç‡ã€‚</p>
<p>3.Â <strong>åˆ©ç”¨ç¼“å­˜æœºåˆ¶</strong>ï¼šç»“åˆåˆ†å¸ƒå¼ç¼“å­˜å’Œå†…å­˜ç¼“å­˜å‡å°‘é‡å¤æŸ¥è¯¢ã€‚</p>
<p>4.Â <strong>ç²¾ç®€ä»£ç é€»è¾‘</strong>ï¼šä¼˜åŒ–ç¨‹åºç®—æ³•ã€æ•°æ®æµå’Œèµ„æºç®¡ç†ã€‚</p>
<h4 data-id="heading-56"><strong>ç§‘å­¦è¯Šæ–­ï¼šç²¾å‡†è¯†åˆ«æ…¢ç‚¹</strong></h4>
<ul>
<li><strong>ç›‘æ§æŒ‡æ ‡åˆ†æ</strong>ï¼šé€šè¿‡ CPUã€å†…å­˜ã€çº¿ç¨‹æ± ã€æ•°æ®åº“ã€ç¼“å­˜ç­‰å‘ç°ç“¶é¢ˆã€‚</li>
<li><strong>å·¥å…·è¾…åŠ©æ’æŸ¥</strong>ï¼šä½¿ç”¨ç«ç„°å›¾ã€å †æ ˆåˆ†æï¼ˆjstackï¼‰ã€åŠ¨æ€è¯Šæ–­å·¥å…·ï¼ˆArthasï¼‰æ·±å…¥å®šä½é—®é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-57"><strong>æƒè¡¡åˆ©å¼Šï¼šé€‚åº¦ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦</strong></h4>
<ul>
<li><strong>æˆæœ¬</strong>ï¼šè€ƒè™‘å¼€å‘æ—¶é—´ä¸åç»­ç»´æŠ¤ä»£ä»·ã€‚</li>
<li><strong>æ”¶ç›Š</strong>ï¼šç¡®ä¿ä¼˜åŒ–æ•ˆæœæ˜¾è‘—ï¼Œèƒ½é™æœ¬å¢æ•ˆã€‚</li>
<li><strong>é£é™©</strong>ï¼šé¿å…å¤æ‚åº¦å¢åŠ å’Œéšæ‚£å¼•å…¥ï¼Œä¿æŒç³»ç»Ÿæ¸…æ™°æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<h4 data-id="heading-58"><strong>æ¼æ–—å¼ä¼˜åŒ–ç­–ç•¥</strong></h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b42ab30ec2e24c2dbf93f4f6de71d87a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=xp5sJWVp%2BkD1hWO%2Bx3YDnn3kfyE%3D" alt="å›¾ç‰‡35.png" loading="lazy"/></p>
<p><strong>æ€»ç»“</strong>ï¼šç§‘å­¦å®šä½ã€é€çº§ä¼˜åŒ–ã€ä¸ç›²ç›®è¿½æ±‚æè‡´ï¼Œé‡ç‚¹å…³æ³¨æ€§èƒ½éœ€æ±‚ä¸æ€§ä»·æ¯”çš„å¹³è¡¡ã€‚</p>
<h3 data-id="heading-59"><strong>ç¨³å®šæ€§</strong></h3>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ˜Ÿå›¾å¹³å°å·²ç¨³å®šè¿è¡Œä¸¤å¹´ï¼Œå…¶ç³»ç»Ÿç¨³å®šæ€§è¾¾åˆ°äº†"4ä¸ª9"ï¼ˆå³99.99%ï¼‰ï¼Œä¸ºä¸šåŠ¡çš„è¿ç»­æ€§æä¾›äº†åšå®ä¿éšœã€‚è¿™ä¸€åˆ‡åŠ©åŠ›äºä¸šåŠ¡å‘å±•ã€æˆæœ¬é™ä½åŠæ•ˆç‡æå‡ã€‚</p>
<h2 data-id="heading-60"><strong>å¹³å°è§„åˆ’</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a2bb3b7b36440c884180ca5fb0efb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768974994&amp;x-signature=mk8zY6wYoKX%2FWZyitoLnmRol%2BNM%3D" alt="å›¾ç‰‡36.png" loading="lazy"/></p>
<h2 data-id="heading-61"><strong>ç»“è¯­</strong></h2>
<p>æ€»ç»“æ¥çœ‹ï¼Œæ˜Ÿå›¾å¹³å°çš„å‡ºç°æ˜¯å¯¹æŠ€æœ¯ä¸ä¸šåŠ¡æ·±åº¦èåˆçš„ä¸€æ¬¡ç§¯ææ¢ç´¢ï¼Œå®ƒä»¥â€œæ•ˆç‡â€å’Œâ€œæ€§èƒ½â€ä¸ºæ ¸å¿ƒï¼Œè‡´åŠ›äºè§£å†³å®é™…é—®é¢˜å¹¶ä¼˜åŒ–å·¥ä½œæµç¨‹ã€‚åœ¨ç»Ÿä¸€æ¥å£ç®¡ç†å’Œè½»é‡åŒ–æ¶æ„çš„æ”¯æŒä¸‹ï¼Œå¹³å°å±•ç¤ºäº†æå¼ºçš„æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œä¸ºä¸šåŠ¡å‘å±•æä¾›äº†å¼ºæœ‰åŠ›çš„åº•å±‚æ”¯æ’‘ã€‚</p>
<p>è¿™ç§â€œçµæ´»ä½†ç¨³å¥ï¼Œæé€Ÿä¸”æ·±åº¦â€ç›¸ç»“åˆçš„è®¾è®¡ç†å¿µï¼Œä¸ä»…æ˜¯æŠ€æœ¯å‘å±•çš„æ–¹å‘ï¼Œä¹Ÿä¸ºæ•´ä¸ªå›¢é˜Ÿæä¾›äº†ä¸€ç§å…¨æ–°çš„åˆ›æ–°æ€è·¯ã€‚é€šè¿‡ä¸æ–­æ¨åŠ¨æŠ€æœ¯ä¼˜åŒ–å’Œèƒ½åŠ›æ²‰æ·€ï¼Œæ˜Ÿå›¾å¹³å°å±•ç°å‡ºé©±åŠ¨ä¸šåŠ¡ä¸çªç ´è¾¹ç•Œçš„å†³å¿ƒã€‚</p>
<p>æœªæ¥ï¼Œæ˜Ÿå›¾å¹³å°ä¸ä»…ä»…æ˜¯ä¸€ç§å·¥å…·ï¼Œè€Œå°†æŒç»­æˆä¸ºæŠ€æœ¯èµ‹èƒ½ä¸šåŠ¡çš„ä¸€ç§è±¡å¾ã€‚å®ƒæ‰€ä»£è¡¨çš„ä¸æ˜¯å•ä¸€çš„äº§å“ï¼Œè€Œæ˜¯ä¸€ç§å¼€æ”¾ã€åŒ…å®¹ã€åˆ›æ–°çš„æ€ç»´æ–¹å¼â€”â€”æ¨åŠ¨æ— ç•Œåˆ›æ–°ã€æå‡ä¼ä¸šä»·å€¼çš„é•¿ä¹…ä¹‹é“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å³å¯¼æ¼”ï¼šç”¨çº¯ CSS3 åŸåŠ›å¤åˆ»ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ç»å…¸å¼€åœº]]></title>    <link>https://juejin.cn/post/7594831933516300334</link>    <guid>https://juejin.cn/post/7594831933516300334</guid>    <pubDate>2026-01-14T04:12:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594831933516300334" data-draft-id="7594859060857126922" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å³å¯¼æ¼”ï¼šç”¨çº¯ CSS3 åŸåŠ›å¤åˆ»ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ç»å…¸å¼€åœº"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-01-14T04:12:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NEXT06"/> <meta itemprop="url" content="https://juejin.cn/user/1176918763246011"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å³å¯¼æ¼”ï¼šç”¨çº¯ CSS3 åŸåŠ›å¤åˆ»ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ç»å…¸å¼€åœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176918763246011/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NEXT06
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:12:49.000Z" title="Wed Jan 14 2026 04:12:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒŒ è‡´æ•¬ç»å…¸ï¼šç”¨çº¯ CSS3 å¯¼æ¼”ä¸€åœºâ€œæ˜Ÿçƒå¤§æˆ˜â€å¼€åœºç§€</h2>
<blockquote>
<p><strong>â€œå‰ç«¯æ˜¯ä»£ç ç•Œçš„å¯¼æ¼”ã€‚â€</strong></p>
<p>æˆ‘ä»¬ä¸éœ€è¦æ‘„åƒæœºï¼Œåªéœ€è¦ HTML æ„å»ºéª¨æ¶ï¼ŒCSS æ¸²æŸ“å…‰å½±ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç”¨å‡ è¡Œ CSS3 ä»£ç ï¼Œå¤åˆ»ç»å…¸çš„ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹å¼€åœº 3D ç‰¹æ•ˆã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f9c2ffaac2496b9fcb850ef207199b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTkVYVDA2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768968769&amp;x-signature=9UnoR5h5yQn6TaMgJ%2FGyUHDSa%2B4%3D" alt="Video Project.gif" loading="lazy"/></p>
<h3 data-id="heading-1">ğŸ¬ å‰§æœ¬è§„åˆ’ï¼ˆHTML ç»“æ„ï¼‰</h3>
<p>ä¸ºäº†è¿˜åŸç”µå½±æµ·æŠ¥çš„ç»å…¸ç«™ä½ï¼Œæˆ‘ä»¬å°†ç»“æ„åˆ†ä¸ºä¸‰å±‚ï¼šé¡¶éƒ¨çš„ "STAR"ï¼Œåº•éƒ¨çš„ "WARS"ï¼Œä»¥åŠä¸­é—´é‚£ä¸€æ’ç¥ç§˜çš„å‰¯æ ‡é¢˜ã€‚</p>
<p>codeHtml</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"starwars"</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./star.svg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"star"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"star"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./wars.svg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"wars"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wars"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"byline"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ¯ä¸ªå­—æ¯å•ç‹¬åŒ…è£¹ï¼Œä¸ºäº†åç»­çš„ç¿»è½¬åŠ¨ç”» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>T<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>h<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>e<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>...
    <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼šå‰¯æ ‡é¢˜Â h2Â ä¸­çš„æ¯ä¸ªå­—æ¯éƒ½ç”¨Â spanÂ åŒ…è£¹ï¼Œè¿™æ˜¯ä¸ºäº†è®©æ¯ä¸ªå­—æ¯èƒ½ç‹¬ç«‹è¿›è¡Œ 3D æ—‹è½¬è¡¨æ¼”ã€‚</p>
<h3 data-id="heading-2">ğŸ¥ æ­å»ºèˆå°ï¼ˆæ ¸å¿ƒ CSSï¼‰</h3>
<h4 data-id="heading-3">1. å®Œç¾çš„ç»å¯¹å±…ä¸­</h4>
<p>åœ¨å…¨å±é»‘èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è®© logo ç¨³ç¨³åœ°æ‚¬æµ®åœ¨å®‡å®™ä¸­å¿ƒã€‚è¿™é‡Œä½¿ç”¨äº†ç»å…¸çš„â€œç»å¯¹å®šä½ + Transformâ€å¤§æ³•ï¼š</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.starwars</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">34em</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">17em</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-comment">/* è‡ªèº«å®½é«˜çš„ä¸€åŠå‘å›ç§»åŠ¨ï¼Œå®ç°ç²¾å‡†å±…ä¸­ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
}
</code></pre>
<h4 data-id="heading-4">2. å¼€å¯ä¸Šå¸è§†è§’ï¼ˆ3D æ™¯æ·±ï¼‰</h4>
<p>è¿™æ˜¯æœ¬æ¡ˆä¾‹çš„çµé­‚æ‰€åœ¨ã€‚æ™®é€šçš„å¹³é¢åŠ¨ç”»æ— æ³•è¡¨ç°æ˜Ÿæˆ˜å­—å¹•â€œé£å‘æ·±ç©ºâ€çš„éœ‡æ’¼ã€‚æˆ‘ä»¬éœ€è¦åœ¨çˆ¶å®¹å™¨ä¸Šå¼€å¯ 3D ç©ºé—´ï¼š</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.starwars</span> {
    <span class="hljs-comment">/* è§†è·ï¼šæ¨¡æ‹Ÿäººçœ¼è·ç¦»å±å¹• 800px çš„ä½ç½® */</span>
    <span class="hljs-attribute">perspective</span>: <span class="hljs-number">800px</span>;
    <span class="hljs-comment">/* ä¿æŒå­å…ƒç´ çš„ 3D ç©ºé—´å…³ç³» */</span>
    <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
}
</code></pre>
<ul>
<li>perspective: å†³å®šäº†â€œè¿‘å¤§è¿œå°â€çš„ç¨‹åº¦ï¼Œæ•°å€¼è¶Šå°ï¼Œé€è§†æ„Ÿè¶Šå¼ºçƒˆã€‚</li>
<li>transform-style: preserve-3d: ç¡®ä¿å­å…ƒç´ åœ¨ 3D ç©ºé—´ä¸­å˜æ¢ï¼Œè€Œä¸æ˜¯è¢«å‹æ‰åœ¨ 2D å¹³é¢é‡Œã€‚</li>
</ul>
<h3 data-id="heading-5">ğŸï¸ åŠ¨ä½œè®¾è®¡ï¼ˆå…³é”®å¸§åŠ¨ç”»ï¼‰</h3>
<h4 data-id="heading-6">Step 1: å·¨ç‰©æ¶ˆé€ï¼ˆLogo åŠ¨ç”»ï¼‰</h4>
<p>STAR å’Œ WARS ä¸¤å¼ å›¾ç‰‡éœ€è¦ç»å†ï¼š<strong>é€æ˜ -&gt; å‡ºç° -&gt; ç¼©å°å¤ä½ -&gt; é£å‘æ·±æ¸Š</strong>Â çš„è¿‡ç¨‹ã€‚</p>
<p>æˆ‘ä»¬åˆ©ç”¨Â translateZÂ æ¥æ§åˆ¶ Z è½´è·ç¦»ï¼Œè´Ÿå€¼è¶Šå¤§ï¼Œç¦»æˆ‘ä»¬è¶Šè¿œã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> star {
  <span class="hljs-number">0%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.5</span>) <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">0.75em</span>); <span class="hljs-comment">/* åˆå§‹æ”¾å¤§ä¸”ä½ç½®é ä¸Š */</span>
  }
  <span class="hljs-number">20%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; } <span class="hljs-comment">/* æ˜¾å½¢ */</span>
  <span class="hljs-number">89%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">/* æ¢å¤æ­£å¸¸å¤§å° */</span>
  }
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1000em</span>); <span class="hljs-comment">/* ç¬é—´é£å‘å®‡å®™æ·±å¤„ï¼ */</span>
  }
}
</code></pre>
<h4 data-id="heading-7">Step 2: æ–‡å­—èµ·èˆï¼ˆå‰¯æ ‡é¢˜åŠ¨ç”»ï¼‰</h4>
<p>ä¸­é—´çš„Â The Force AwakeÂ éœ€è¦æœ‰ä¸€ç§â€œç¿»è½¬æµ®ç°â€çš„ç¥ç§˜æ„Ÿã€‚</p>
<p>æ³¨æ„ï¼šspanÂ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ï¼Œæ— æ³•åº”ç”¨ Transformï¼Œæ‰€ä»¥å¿…é¡»è®¾ç½®ä¸ºÂ display: inline-blockã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.byline</span> <span class="hljs-selector-tag">span</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">animation</span>: spin-letters <span class="hljs-number">10s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> spin-letters {
  <span class="hljs-number">0%</span>, <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">90deg</span>); <span class="hljs-comment">/* ä¾§èº« 90 åº¦ï¼Œç›¸å½“äºéšèº« */</span>
  }
  <span class="hljs-number">30%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">70%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">/* æ­£å¯¹è§‚ä¼— */</span>
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }
}
</code></pre>
<p>é…åˆçˆ¶å®¹å™¨Â .bylineÂ çš„ Z è½´æ¨è¿›åŠ¨ç”»ï¼Œæ–‡å­—ä¸ä»…åœ¨è‡ªè½¬ï¼Œè¿˜åœ¨å‘é•œå¤´æ¨è¿›ï¼Œå±‚æ¬¡æ„Ÿç¬é—´æ‹‰æ»¡ã€‚</p>
<h3 data-id="heading-8">ğŸ æ€é’</h3>
<p>é€šè¿‡Â perspectiveÂ æ„å»ºç©ºé—´ï¼Œåˆ©ç”¨Â translateZÂ åˆ¶é€ çºµæ·±ï¼Œå†é…åˆÂ rotateYÂ å¢åŠ åŠ¨æ„Ÿã€‚ä¸éœ€è¦å¤æ‚çš„ JS åº“ï¼Œå‡ åè¡Œ CSS å°±èƒ½è‡´æ•¬ç»å…¸ã€‚</p>
<p>å‰ç«¯å¼€å‘çš„ä¹è¶£ï¼Œå¾€å¾€å°±åœ¨è¿™äº›åƒç´ çš„è…¾æŒªè½¬ç§»ä¹‹é—´ã€‚æ„¿åŸåŠ›ä¸ä½ çš„ä»£ç åŒåœ¨ï¼May the code be with you.</p>
<p><strong>æºä»£ç </strong></p>
<p>HTML</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>html5&amp;css3æ˜Ÿçƒå¤§æˆ˜<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"./style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"starwars"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./star.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"star"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"star"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./wars.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"wars"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wars"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"byline"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"byline"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>T<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>H<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>E<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>F<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>O<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>R<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>E<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>W<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>K<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>E<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/*
  æ ‡å‡† CSS Reset
  åŸºäº Eric Meyer çš„ Reset å¹¶ç»“åˆç°ä»£æµè§ˆå™¨ç‰¹æ€§
*/</span>

<span class="hljs-comment">/* æ‰€æœ‰å…ƒç´ åº”ç”¨ border-box æ¨¡å‹ï¼Œæ–¹ä¾¿å¸ƒå±€ */</span>
*,
*<span class="hljs-selector-pseudo">::before</span>,
*<span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-comment">/* é‡ç½®æ‰€æœ‰å…ƒç´ çš„å†…å¤–è¾¹è·ã€è¾¹æ¡†ã€å­—ä½“ç­‰ */</span>
<span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">body</span>,
<span class="hljs-selector-tag">div</span>,
<span class="hljs-selector-tag">span</span>,
applet,
<span class="hljs-selector-tag">object</span>,
<span class="hljs-selector-tag">iframe</span>,
<span class="hljs-selector-tag">h1</span>,
<span class="hljs-selector-tag">h2</span>,
<span class="hljs-selector-tag">h3</span>,
<span class="hljs-selector-tag">h4</span>,
<span class="hljs-selector-tag">h5</span>,
<span class="hljs-selector-tag">h6</span>,
<span class="hljs-selector-tag">p</span>,
<span class="hljs-selector-tag">blockquote</span>,
pre,
<span class="hljs-selector-tag">a</span>,
<span class="hljs-selector-tag">abbr</span>,
acronym,
<span class="hljs-selector-tag">address</span>,
big,
<span class="hljs-selector-tag">cite</span>,
<span class="hljs-selector-tag">code</span>,
<span class="hljs-selector-tag">del</span>,
<span class="hljs-selector-tag">dfn</span>,
<span class="hljs-selector-tag">em</span>,
<span class="hljs-selector-tag">img</span>,
<span class="hljs-selector-tag">ins</span>,
<span class="hljs-selector-tag">kbd</span>,
<span class="hljs-selector-tag">q</span>,
s,
<span class="hljs-selector-tag">samp</span>,
small,
strike,
<span class="hljs-selector-tag">strong</span>,
sub,
<span class="hljs-selector-tag">sup</span>,
tt,
<span class="hljs-selector-tag">var</span>,
<span class="hljs-selector-tag">b</span>,
u,
<span class="hljs-selector-tag">i</span>,
center,
<span class="hljs-selector-tag">dl</span>,
<span class="hljs-selector-tag">dt</span>,
<span class="hljs-selector-tag">dd</span>,
<span class="hljs-selector-tag">ol</span>,
<span class="hljs-selector-tag">ul</span>,
<span class="hljs-selector-tag">li</span>,
<span class="hljs-selector-tag">fieldset</span>,
<span class="hljs-selector-tag">form</span>,
<span class="hljs-selector-tag">label</span>,
<span class="hljs-selector-tag">legend</span>,
<span class="hljs-selector-tag">table</span>,
<span class="hljs-selector-tag">caption</span>,
<span class="hljs-selector-tag">tbody</span>,
<span class="hljs-selector-tag">tfoot</span>,
<span class="hljs-selector-tag">thead</span>,
<span class="hljs-selector-tag">tr</span>,
<span class="hljs-selector-tag">th</span>,
<span class="hljs-selector-tag">td</span>,
<span class="hljs-selector-tag">article</span>,
<span class="hljs-selector-tag">aside</span>,
<span class="hljs-selector-tag">canvas</span>,
<span class="hljs-selector-tag">details</span>,
embed,
<span class="hljs-selector-tag">figure</span>,
<span class="hljs-selector-tag">figcaption</span>,
<span class="hljs-selector-tag">footer</span>,
<span class="hljs-selector-tag">header</span>,
<span class="hljs-selector-tag">hgroup</span>,
<span class="hljs-selector-tag">menu</span>,
<span class="hljs-selector-tag">nav</span>,
output,
ruby,
<span class="hljs-selector-tag">section</span>,
<span class="hljs-selector-tag">summary</span>,
<span class="hljs-selector-tag">time</span>,
<span class="hljs-selector-tag">mark</span>,
<span class="hljs-selector-tag">audio</span>,
<span class="hljs-selector-tag">video</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">font</span>: inherit;
  <span class="hljs-attribute">vertical-align</span>: baseline;
}

<span class="hljs-comment">/* HTML5 è¯­ä¹‰åŒ–å…ƒç´ è®¾ä¸ºå—çº§ */</span>
<span class="hljs-selector-tag">article</span>,
<span class="hljs-selector-tag">aside</span>,
<span class="hljs-selector-tag">details</span>,
<span class="hljs-selector-tag">figcaption</span>,
<span class="hljs-selector-tag">figure</span>,
<span class="hljs-selector-tag">footer</span>,
<span class="hljs-selector-tag">header</span>,
<span class="hljs-selector-tag">hgroup</span>,
<span class="hljs-selector-tag">menu</span>,
<span class="hljs-selector-tag">nav</span>,
<span class="hljs-selector-tag">section</span> {
  <span class="hljs-attribute">display</span>: block;
}

<span class="hljs-comment">/* é‡ç½®åˆ—è¡¨æ ·å¼ */</span>
<span class="hljs-selector-tag">ol</span>,
<span class="hljs-selector-tag">ul</span> {
  <span class="hljs-attribute">list-style</span>: none;
}

<span class="hljs-comment">/* é‡ç½®è¡¨æ ¼æ ·å¼ */</span>
<span class="hljs-selector-tag">table</span> {
  <span class="hljs-attribute">border-collapse</span>: collapse;
  <span class="hljs-attribute">border-spacing</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* é‡ç½®å›¾ç‰‡ã€è§†é¢‘ç­‰æ›¿æ¢å…ƒç´  */</span>
<span class="hljs-selector-tag">img</span>,
<span class="hljs-selector-tag">video</span>,
<span class="hljs-selector-tag">canvas</span>,
<span class="hljs-selector-tag">audio</span>,
svg {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-comment">/* é‡ç½®è¡¨å•å…ƒç´  */</span>
<span class="hljs-selector-tag">button</span>,
<span class="hljs-selector-tag">input</span>,
select,
<span class="hljs-selector-tag">textarea</span> {
  <span class="hljs-comment">/* ç»§æ‰¿å­—ä½“å’Œé¢œè‰² */</span>
  <span class="hljs-attribute">font</span>: inherit;
  <span class="hljs-attribute">color</span>: inherit;
  <span class="hljs-comment">/* ç§»é™¤é»˜è®¤è¾¹æ¡†å’Œè½®å»“ */</span>
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-comment">/* æ¸…é™¤é»˜è®¤æ ·å¼ */</span>
  <span class="hljs-attribute">background</span>: transparent;
  <span class="hljs-comment">/* ç»Ÿä¸€å‚ç›´å¯¹é½ */</span>
  <span class="hljs-attribute">vertical-align</span>: middle;
}

<span class="hljs-comment">/* é“¾æ¥é‡ç½® */</span>
<span class="hljs-selector-tag">a</span> {
  <span class="hljs-attribute">text-decoration</span>: none;
  <span class="hljs-attribute">color</span>: inherit; <span class="hljs-comment">/* ç»§æ‰¿çˆ¶å…ƒç´ é¢œè‰² */</span>
}

<span class="hljs-comment">/* é˜²æ­¢å­—ä½“ç¼©æ”¾ */</span>
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;
  -webkit-text-size-adjust: <span class="hljs-number">100%</span>;
}

<span class="hljs-comment">/* æ¸…é™¤æµ®åŠ¨ï¼ˆå¯é€‰ï¼‰ */</span>

<span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">display</span>: table;
  <span class="hljs-attribute">clear</span>: both;
}

<span class="hljs-comment">/* ä¸šåŠ¡ä»£ç  */</span>
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">background</span>:<span class="hljs-number">#000</span> <span class="hljs-built_in">url</span>(<span class="hljs-string">./bg.jpg</span>);
}
<span class="hljs-selector-class">.starwars</span> {
    <span class="hljs-comment">/* å£°æ˜ æ”¯æŒ3D */</span>
  <span class="hljs-attribute">perspective</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-comment">/* ä¿æŒ3D å˜æ¢ */</span>
  <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
  <span class="hljs-comment">/* ç›¸å¯¹å•ä½ï¼Œç›¸å¯¹äºè‡ªèº«çš„å­—ä½“å¤§å° 
    é»˜è®¤å­—ä½“å¤§å°æ˜¯16
  */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">34em</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">17em</span>;
  <span class="hljs-comment">/* ç»å¯¹å®šä½ */</span>
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
  <span class="hljs-comment">/* css è°ƒè¯•æ‰‹æ³•ï¼Œ èƒŒæ™¯é¢œè‰²è°ƒè¯•å¤§æ³• */</span>
  <span class="hljs-comment">/* background-color: red; */</span>
}
<span class="hljs-selector-tag">img</span> {
    <span class="hljs-comment">/* é«˜åº¦ç­‰æ¯”ä¾‹ç¼©æ”¾ */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.star</span>, <span class="hljs-selector-class">.wars</span>, <span class="hljs-selector-class">.byline</span> {
  <span class="hljs-attribute">position</span>: absolute;
}
<span class="hljs-selector-class">.star</span> {
  <span class="hljs-attribute">top</span>: -<span class="hljs-number">0.75em</span>;
}
<span class="hljs-selector-class">.wars</span> {
  <span class="hljs-attribute">bottom</span>: -<span class="hljs-number">0.5em</span>;
}
<span class="hljs-selector-class">.byline</span> {
  <span class="hljs-attribute">left</span>: -<span class="hljs-number">2em</span>;
  <span class="hljs-attribute">right</span>: -<span class="hljs-number">2em</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">45%</span>;
  <span class="hljs-comment">/* background: green; */</span>
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">text-transform</span>: uppercase;
  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.3em</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.6em</span>;
  <span class="hljs-attribute">color</span>: white;
}
<span class="hljs-selector-class">.star</span>{
    <span class="hljs-comment">/* åŠ¨ç”»å±æ€§ 
    star åŠ¨ä½œè„šæœ¬
    10s animation-duration
    ease-out animation-timing-function
    */</span>
    <span class="hljs-attribute">animation</span>: star <span class="hljs-number">10s</span> ease-out infinite;
}
<span class="hljs-selector-class">.wars</span>{
    <span class="hljs-attribute">animation</span>: wars <span class="hljs-number">10s</span> ease-out infinite;
}
<span class="hljs-selector-class">.byline</span>{
    <span class="hljs-attribute">animation</span>: move-byline <span class="hljs-number">10s</span> linear infinite;
}
<span class="hljs-selector-class">.byline</span> <span class="hljs-selector-tag">span</span>{
    <span class="hljs-attribute">display</span>: inline-block;
    <span class="hljs-attribute">animation</span>: spin-letters <span class="hljs-number">10s</span> linear infinite;
}

<span class="hljs-comment">/* è®¾è®¡åŠ¨ä½œ åŠ¨ç”»çš„å…³é”®å¸§ */</span>
<span class="hljs-keyword">@keyframes</span> star {
    <span class="hljs-comment">/* æ¯ä¸ªå…³é”®å¸§å†™å®ƒçš„å±æ€§ */</span>
    <span class="hljs-number">0%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.5</span>) <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">0.75em</span>);
    }
    <span class="hljs-number">20%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;

    }
    <span class="hljs-number">89%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
    }
    <span class="hljs-number">100%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1000em</span>);
    }
    
}
<span class="hljs-keyword">@keyframes</span> wars{
    <span class="hljs-number">0%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.5</span>) <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0.5em</span>);
    }
    <span class="hljs-number">20%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;

    }
    <span class="hljs-comment">/* æ¨¡æ‹ŸçœŸå®æ•ˆæœ ä¸åŒæ­¥ æ›´åƒæ˜¯äººåœ¨æ“æ§é£èˆ¹ */</span>
    <span class="hljs-number">90%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
    }
    <span class="hljs-number">100%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1000em</span>);
    }
}
<span class="hljs-keyword">@keyframes</span> spin-letters {
   <span class="hljs-number">0%</span>,<span class="hljs-number">10%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-comment">/* é’¢ç®¡èˆ */</span>
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">90deg</span>);
   }
  <span class="hljs-number">30%</span>{
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
      
  }
  <span class="hljs-number">70%</span>,<span class="hljs-number">86%</span>{
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">0deg</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }
  <span class="hljs-number">95%</span>,<span class="hljs-number">100%</span>{
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  }
}
<span class="hljs-keyword">@keyframes</span> move-byline {
    <span class="hljs-number">0%</span>{
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">5em</span>);
    }
    <span class="hljs-number">100%</span>{
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">0</span>);
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f0b15792ab743599f0eba2dc01a7c62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTkVYVDA2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768968769&amp;x-signature=9xm%2FXurj27E48qJOMvStmPCRoPY%3D" alt="bg.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vueä½¿ç”¨hå‡½æ•°å°è£…dialogç»„ä»¶ï¼Œä»¥å‘½ä»¤çš„å½¢å¼ä½¿ç”¨dialogç»„ä»¶]]></title>    <link>https://juejin.cn/post/7594728203258298402</link>    <guid>https://juejin.cn/post/7594728203258298402</guid>    <pubDate>2026-01-14T04:30:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594728203258298402" data-draft-id="7594745643892342819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vueä½¿ç”¨hå‡½æ•°å°è£…dialogç»„ä»¶ï¼Œä»¥å‘½ä»¤çš„å½¢å¼ä½¿ç”¨dialogç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T04:30:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/1310273593440398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vueä½¿ç”¨hå‡½æ•°å°è£…dialogç»„ä»¶ï¼Œä»¥å‘½ä»¤çš„å½¢å¼ä½¿ç”¨dialogç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1310273593440398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:30:52.000Z" title="Wed Jan 14 2026 04:30:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">åœºæ™¯</h4>
<p>æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„é¡µé¢æ˜¯æœ‰å¾ˆå¤šçš„å¼¹çª—<br/>
å¦‚æœæˆ‘ä»¬æŠŠè¿™äº›å¼¹çª—éƒ½å†™htmlä¸­ä¼šæœ‰ä¸€å¤§å¨<br/>
å› æ­¤ï¼šæˆ‘ä»¬éœ€è¦æŠŠå¼¹çª—å°è£…æˆå‘½ä»¤å¼çš„å½¢å¼</p>
<h4 data-id="heading-1">å‘½ä»¤å¼å¼¹çª—</h4>
<pre><code class="hljs language-xml" lang="xml">// ä½¿ç”¨å¼¹çª—çš„ç»„ä»¶
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openMask"</span>&gt;</span>ç‚¹å‡»å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> childTest <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/childTest.vue'</span>
<span class="hljs-keyword">import</span> { renderDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/dialog'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openMask</span>(<span class="hljs-params"/>){
  <span class="hljs-comment">// ç¬¬1ä¸ªå‚æ•°ï¼šè¡¨ç¤ºçš„æ˜¯ç»„ä»¶ï¼Œä½ å†™å¼¹çª—ä¸­çš„ç»„ä»¶</span>
  <span class="hljs-comment">// ç¬¬2ä¸ªå‚æ•°ï¼šè¡¨ç¤ºçš„ç»„ä»¶å±æ€§ï¼Œæ¯”å¦‚ï¼šç¡®è®¤æŒ‰é’®çš„åç§°ç­‰</span>
  <span class="hljs-comment">// ç¬¬3ä¸ªå‚æ•°ï¼šè¡¨ç¤ºçš„æ¨¡æ€æ¡†çš„å±æ€§ã€‚æ¯”å¦‚ï¼šæ¨¡æ€å®½çš„å®½åº¦ï¼Œæ ‡é¢˜åç§°ï¼Œæ˜¯å¦å¯ç§»åŠ¨</span>
  <span class="hljs-title function_">renderDialog</span>(childTest,{},{<span class="hljs-attr">title</span>:<span class="hljs-string">'æµ‹è¯•å¼¹çª—'</span>})
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component:<span class="hljs-built_in">any</span>,props:<span class="hljs-built_in">any</span>, modalProps:<span class="hljs-built_in">any</span></span>){
 <span class="hljs-keyword">const</span> dialog  = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,   <span class="hljs-comment">// æ¨¡æ€æ¡†ç»„ä»¶</span>
    {
      ...modalProps, <span class="hljs-comment">// æ¨¡æ€æ¡†å±æ€§</span>
      <span class="hljs-attr">modelValue</span>:<span class="hljs-literal">true</span>, <span class="hljs-comment">// æ¨¡æ€æ¡†æ˜¯å¦æ˜¾ç¤º</span>
    }, <span class="hljs-comment">// å› ä¸ºæ˜¯æ¨¡æ€æ¡†ç»„ä»¶ï¼Œè‚¯å®šæ˜¯æ¨¡æ€æ¡†çš„å±æ€§</span>
    {
      <span class="hljs-attr">default</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">h</span>(component, props ) <span class="hljs-comment">// æ’æ§½ï¼Œel-dialogä¸‹çš„å†…å®¹</span>
    }
  )
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dialog)
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml">//childTest.vue ç»„ä»¶
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>It's a modal Dialog<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">"auto"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"max-width: 600px"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity name"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.name"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity zone"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.region"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"please select your zone"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone one"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shanghai"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone two"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"beijing"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref,reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> dialogVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">region</span>: <span class="hljs-string">''</span>,
})
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'submit!'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c6c0402d0d84a8d90109b3e7bf80db7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=GBjzKk33Wa7fYW4Xr3NYO1BUNHs%3D" alt="01" loading="lazy"/></p>
<h4 data-id="heading-2">ä¸ºå•¥å¼¹çª—ä¸­çš„è¡¨å•ä¸èƒ½å¤Ÿæ­£å¸¸å±•ç¤ºå‘¢ï¼Ÿ</h4>
<p>åœ¨æ§åˆ¶å°ä¼šæœ‰ä¸‹é¢çš„æç¤ºä¿¡æ¯ï¼š<br/>
Failed to resolve component:<br/>
el-form If this is a native custom element,<br/>
make sure to exclude it from component resolution via compilerOptions.isCustomElement<br/>
ç¿»è¯‘è¿‡æ¥å°±æ˜¯<br/>
æ— æ³•è§£æç»„ä»¶ï¼šel-formå¦‚æœè¿™æ˜¯ä¸€ä¸ªåŸç”Ÿè‡ªå®šä¹‰å…ƒç´ ï¼Œ<br/>
è¯·ç¡®ä¿é€šè¿‡ compilerOptions.isCustomElement å°†å…¶ä»ç»„ä»¶è§£æä¸­æ’é™¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb1b4ff31980466eab740997171d37ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=ukQ3b22KMVNPpz7w9ONQy3R7Y2E%3D" alt="02" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯è¯´ï¼šæˆ‘é‡æ–°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„app,è¿™ä¸ªappä¸­æ²¡æœ‰æ³¨å†Œç»„ä»¶ã€‚<br/>
å› æ­¤ä¼šè­¦å‘Šï¼Œé¡µé¢æ¸²æŸ“ä¸å‡ºæ¥ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æˆ‘é‡æ–°åˆ›å»ºäº†ä¸€ä¸ªappï¼Œè¿™ä¸ªappä¸­æ²¡æœ‰æ³¨å†Œ element-plus ç»„ä»¶ã€‚</span>
const app = <span class="hljs-built_in">createApp</span>(dialog)
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬é‡æ–°æ³¨å†Œelement-plusç»„ä»¶ã€‚<br/>
å‡†ç¡®çš„è¯´ï¼šæˆ‘ä»¬è¦æ³¨å†Œ childTest.vue ç»„ä»¶ä½¿ç”¨åˆ°çš„ä¸œè¥¿</p>
<h4 data-id="heading-3">ç»™æ–°åˆ›å»ºçš„appåº”ç”¨æ³¨å†ŒchildTestç»„ä»¶ä½¿ç”¨åˆ°çš„ä¸œè¥¿</h4>
<p>æˆ‘ä»¬å°†ä¼šåœ¨è¿™ä¸ªå‘½ä»¤å¼å¼¹çª—ä¸­é‡æ–°æ³¨å†Œéœ€è¦ä½¿ç”¨åˆ°çš„ç»„ä»¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-comment">// å¼•å…¥ç»„ä»¶å’Œæ ·å¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-comment">// import "element-plus/dist/index.css";</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component:<span class="hljs-built_in">any</span>,props:<span class="hljs-built_in">any</span>, modalProps:<span class="hljs-built_in">any</span></span>){
 <span class="hljs-keyword">const</span> dialog  = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,   <span class="hljs-comment">// æ¨¡æ€æ¡†ç»„ä»¶</span>
    {
      ...modalProps, <span class="hljs-comment">// æ¨¡æ€æ¡†å±æ€§</span>
      <span class="hljs-attr">modelValue</span>:<span class="hljs-literal">true</span>, <span class="hljs-comment">// æ¨¡æ€æ¡†æ˜¾ç¤º</span>
    }, <span class="hljs-comment">// å› ä¸ºæ˜¯æ¨¡æ€æ¡†ç»„ä»¶ï¼Œè‚¯å®šæ˜¯æ¨¡æ€æ¡†çš„å±æ€§</span>
    {
      <span class="hljs-attr">default</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">h</span>(component, props ) <span class="hljs-comment">// æ’æ§½ï¼Œel-dialogä¸‹çš„å†…å®¹</span>
    }
  )
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dialog)
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e1d7c6959314fa8b00c30e84e4b515a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=zY%2FWWRavn%2B7JplD%2BJDcDjMnR%2FaI%3D" alt="03" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬å‘ç°å¯ä»¥æ­£å¸¸å±•ç¤ºå¼¹çª—ä¸­çš„è¡¨å•äº†ã€‚å› ä¸ºæˆ‘ä»¬æ³¨å†Œäº†element-plusç»„ä»¶ã€‚<br/>
ä½†æ˜¯æˆ‘ä»¬å‘ç°åˆå‘ç°äº†å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚<br/>
å¼¹çª—åº•éƒ¨æ²¡æœ‰å–æ¶ˆå’Œç¡®è®¤æŒ‰é’®ã€‚<br/>
éœ€è¦æˆ‘ä»¬å†æ¬¡é€šè¿‡hå‡½æ•°æ¥åˆ›å»º</p>
<h4 data-id="heading-4">å…³äºä½¿ç”¨createAppåˆ›å»ºæ–°çš„åº”ç”¨å®ä¾‹</h4>
<p>åœ¨Vue 3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ createApp æ¥åˆ›å»ºæ–°çš„åº”ç”¨å®ä¾‹<br/>
ä½†æ˜¯è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„åº”ç”¨<br/>
å®ƒä¸ä¼šå…±äº«ä¸»åº”ç”¨çš„ç»„ä»¶ã€æ’ä»¶ç­‰ã€‚<br/>
å› æ­¤æˆ‘ä»¬éœ€è¦é‡æ–°æ³¨å†Œ</p>
<h4 data-id="heading-5">å¼¹çª—åº•éƒ¨æ–°å¢å–æ¶ˆå’Œç¡®è®¤æŒ‰é’®</h4>
<p>æˆ‘ä»¬å°†ä¼šä½¿ç”¨hå‡½æ•°ä¸­çš„æ’æ§½æ¥åˆ›å»ºåº•éƒ¨çš„å–æ¶ˆæŒ‰é’®</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, props),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span> },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–æ¶ˆ'</span>)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¡®å®š'</span>)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c7aab8220ed4761be0cd9f6850f3c1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=aiphfG0EerghnIbObPDEeo98j%2B0%3D" alt="04" loading="lazy"/></p>
<h4 data-id="heading-6">ç‚¹å‡»å…³é—­å¼¹çª—æ—¶ï¼Œéœ€è¦ç§»é™¤ä¹‹å‰åˆ›å»ºçš„div</h4>
<p>å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdivã€‚<br/>
2ä¸ªåœ°æ–¹éœ€è¦ç§»é™¤ï¼š1,ç‚¹å‡»ç¡®è®¤æŒ‰é’®ã€‚ 2,ç‚¹å‡»å…¶ä»–åœ°æ–¹çš„å…³é—­<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25eb282980514cb8a08388d6017be404~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=UdsOUy8jlptcsIR%2FB5G4eYS%2BAII%3D" alt="05" loading="lazy"/></p>
<h4 data-id="heading-7">å…³é—­å¼¹çª—æ­£ç¡®é”€æ¯ç›¸å…³ç»„ä»¶</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>)
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, props),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
         
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¡®å®š'</span>)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/733acb3349344060ba46b2372c18cafb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=eiCGf35a1irgRpRWfc2Fz8Trfbk%3D" alt="06" loading="lazy"/></p>
<h4 data-id="heading-8">ç‚¹å‡»ç¡®è®¤æŒ‰é’®æ—¶éªŒè¯è§„åˆ™</h4>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¼¹çª—ä¸­çš„è¡¨å•æ˜¯éœ€è¦è¿›è¡Œè§„åˆ™æ ¡éªŒçš„ã€‚<br/>
æˆ‘ä»¬ä¸‹é¢æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ç‚¹<br/>
ä¼ é€’çš„ç»„ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"ruleFormRef"</span>
    <span class="hljs-attr">style</span>=<span class="hljs-string">"max-width: 600px"</span>
    <span class="hljs-attr">:model</span>=<span class="hljs-string">"ruleForm"</span>
    <span class="hljs-attr">:rules</span>=<span class="hljs-string">"rules"</span>
    <span class="hljs-attr">label-width</span>=<span class="hljs-string">"auto"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity name"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.name"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity zone"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"region"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.region"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Activity zone"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone one"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shanghai"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone two"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"beijing"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity time"</span> <span class="hljs-attr">required</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"11"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"date1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-date-picker</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.date1"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"date"</span>
            <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Pick a date"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Pick a date"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center"</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-500"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"11"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"date2"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-time-picker</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.date2"</span>
            <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Pick a time"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Pick a time"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Resources"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"resource"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-radio-group</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.resource"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Sponsorship"</span>&gt;</span>Sponsorship<span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Venue"</span>&gt;</span>Venue<span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-radio-group</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity form"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"desc"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.desc"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">FormInstance</span>, <span class="hljs-title class_">FormRules</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

interface <span class="hljs-title class_">RuleForm</span> {
  <span class="hljs-attr">name</span>: string
  <span class="hljs-attr">region</span>: string
  <span class="hljs-attr">date1</span>: string
  <span class="hljs-attr">date2</span>: string
  <span class="hljs-attr">resource</span>: string
  <span class="hljs-attr">desc</span>: string
}
<span class="hljs-keyword">const</span> ruleFormRef = ref&lt;<span class="hljs-title class_">FormInstance</span>&gt;()
<span class="hljs-keyword">const</span> ruleForm = reactive&lt;<span class="hljs-title class_">RuleForm</span>&gt;({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Hello'</span>,
  <span class="hljs-attr">region</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">date1</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">date2</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">resource</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">desc</span>: <span class="hljs-string">''</span>,
})
<span class="hljs-keyword">const</span> rules = reactive&lt;<span class="hljs-title class_">FormRules</span>&lt;<span class="hljs-title class_">RuleForm</span>&gt;&gt;({
  <span class="hljs-attr">name</span>: [
    { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Please input Activity name'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
    { <span class="hljs-attr">min</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Length should be 3 to 5'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  ],
  <span class="hljs-attr">region</span>: [
    {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please select Activity zone'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">date1</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'date'</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please pick a date'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">date2</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'date'</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please pick a time'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">resource</span>: [
    {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please select activity resource'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">desc</span>: [
    { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Please input activity form'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  ],
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!ruleFormRef.<span class="hljs-property">value</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ruleFormRef is not initialized'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> valid = <span class="hljs-keyword">await</span> ruleFormRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>()
    <span class="hljs-keyword">if</span> (valid) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æ ¡éªŒé€šè¿‡'</span>, ruleForm)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(ruleForm)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ä¸ºå•¥submitFormä¸­ï¼Œvalidçš„å€¼æ˜¯falseä¼šæ‰§è¡Œcatch ï¼Ÿ</span>
    <span class="hljs-comment">// el-form ç»„ä»¶çš„ validate æ–¹æ³•çš„å·¥ä½œæœºåˆ¶å¯¼è‡´çš„ã€‚ validate æ–¹æ³•åœ¨è¡¨å•éªŒè¯å¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err'</span>, error)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-comment">/**
     * ä¸‹é¢è¿™æ ·å†™ä¸ºå•¥ç•Œé¢ä¼šæŠ¥é”™å‘¢ï¼Ÿ
     * return Promise.reject(error)
     * å½“è¡¨å•éªŒè¯å¤±è´¥æ—¶ï¼ŒruleFormRef.value.validate() ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
     * è™½ç„¶ä½ ç”¨äº† try...catch æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨ catch å—ä¸­é€šè¿‡ return Promise.reject(error) è¿”å›äº†ä¸€ä¸ªè¢«æ‹’ç»çš„ Promise
     * ä½†å¦‚æœè°ƒç”¨ submitForm çš„åœ°æ–¹æ²¡æœ‰æ­£ç¡®åœ°å¤„ç†è¿™ä¸ªè¢«æ‹’ç»çš„ Promiseï¼ˆå³æ²¡æœ‰ä½¿ç”¨ .catch() æˆ–è€… await æ¥æ¥æ”¶é”™è¯¯ï¼‰ï¼Œ
     * é‚£ä¹ˆæµè§ˆå™¨æ§åˆ¶å°å°±ä¼šæ˜¾ç¤ºä¸€ä¸ª "Uncaught (in promise)" é”™è¯¯ã€‚
     * åœ¨ catch ä¸­å†æ¬¡ return Promise.reject(error) æ˜¯å¤šä½™çš„ï¼Œ ç›´æ¥return false
     * */</span> 
    <span class="hljs-comment">/**
     * å¦‚æœä½ è¿™æ ·å†™
     * throw error ç›´æ¥æŠ›å‡ºé”™è¯¯å³å¯
     * é‚£ä¹ˆå°±éœ€è¦å†è°ƒç”¨submitFormçš„åœ°æ–¹æ•è·å¼‚å¸¸
     * */</span>  
  }
}

<span class="hljs-title function_">defineExpose</span>({
  <span class="hljs-attr">submitForm</span>:submitForm
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">const</span> instanceElement = <span class="hljs-title function_">ref</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>, instanceElement) 
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½,è¿™é‡Œçš„refå¿…é¡»æ¥æ”¶ä¸€ä¸ªref</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, {...props, <span class="hljs-attr">ref</span>: instanceElement}),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
         
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                instanceElement?.<span class="hljs-property">value</span>?.<span class="hljs-title function_">submitForm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span>{
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾—åˆ°çš„å€¼'</span>,res)
                })
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¡®å®š'</span>)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d60749c4d64464bb9cfa2b407b8a79a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=NSZKaXRaVmUOeX4ACGXN4Fa8ccc%3D" alt="07" loading="lazy"/>
å…³é”®çš„ç‚¹ï¼šé€šè¿‡refæ‹¿åˆ°childTestç»„ä»¶ä¸­çš„æ–¹æ³•ï¼ŒchildTestè¦æš´éœ²éœ€è¦çš„æ–¹æ³•</p>
<h4 data-id="heading-9">å¦‚ä½•æŠŠè¡¨å•ä¸­çš„æ•°æ®æš´éœ²å‡ºå»</h4>
<p>å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼æŠŠæ•°æ®æš´éœ²å‡ºå»å“ˆã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span>, onConfirm: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span> </span>) {
  <span class="hljs-comment">// ç¬¬4ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°</span>
  <span class="hljs-keyword">const</span> instanceElement = <span class="hljs-title function_">ref</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>, instanceElement) 
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½,è¿™é‡Œçš„refå¿…é¡»æ¥æ”¶ä¸€ä¸ªref</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, {...props, <span class="hljs-attr">ref</span>: instanceElement}),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
         
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-comment">// submitForm è°ƒç”¨è¡¨å•ç»„ä»¶ä¸­éœ€è¦éªŒè¯æˆ–è€…æš´éœ²å‡ºå»çš„æ•°æ®</span>
                instanceElement?.<span class="hljs-property">value</span>?.<span class="hljs-title function_">submitForm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span>{
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾—åˆ°çš„å€¼'</span>,res)
                  <span class="hljs-comment">// éªŒè¯é€šè¿‡åè°ƒç”¨å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®ï¼Œ å¦‚éªŒè¯å¤±è´¥ï¼Œres çš„å€¼æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªfalseã€‚</span>
                  <span class="hljs-title function_">onConfirm</span>(res)
                  <span class="hljs-comment">// æ€ä¹ˆæŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’å‡ºå»ï¼Œè®©ä½¿ç”¨çš„æ—¶å€™çŸ¥é“ç‚¹å‡»äº†ç¡®è®¤å¹¶ä¸”çŸ¥é“éªŒè¯é€šè¿‡äº†</span>
                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                  <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶ä¹Ÿå¯ä»¥ä¼ é€’é”™è¯¯ä¿¡æ¯</span>
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯å¤±è´¥'</span>, error)
                })
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¡®å®š'</span>)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openMask"</span>&gt;</span>ç‚¹å‡»å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> childTest <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/childTest.vue'</span>
<span class="hljs-keyword">import</span> { renderDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/dialog'</span>
<span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> currentInstance = <span class="hljs-title function_">getCurrentInstance</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openMask</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'currentInstance'</span>,currentInstance)
  <span class="hljs-title function_">renderDialog</span>(childTest,{},{<span class="hljs-attr">title</span>:<span class="hljs-string">'æµ‹è¯•å¼¹çª—'</span>, <span class="hljs-attr">width</span>: <span class="hljs-string">'700'</span>}, <span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€šè¿‡å›è°ƒå‡½æ•°è¿”å›å€¼'</span>, res)
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/957a339012004af59db1abe4b469bcf2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=JbEfvxKQvmx5LKcqLlqoetmU0%2BU%3D" alt="08" loading="lazy"/></p>
<h4 data-id="heading-10">ç‚¹å‡»ç¡®å®šæ—¶ï¼Œä¸šåŠ¡å®Œæˆåå…³é—­å¼¹çª—</h4>
<p>ç°åœ¨æƒ³è¦ç‚¹å‡»ç¡®å®šï¼Œç­‰ä¸šåŠ¡å¤„ç†å®Œæˆä¹‹åï¼Œæ‰å…³é—­å¼¹çª—ã€‚
éœ€è¦åœ¨ä½¿ç”¨å®Œæˆä¸šåŠ¡çš„æ—¶å€™è¿”å›ä¸€ä¸ªpromiseï¼Œè®©å°è£…çš„å¼¹çª—è°ƒç”¨è¿™ä¸ªpromise
è¿™æ ·å°±å¯ä»¥çŸ¥é“ä»€ä¹ˆæ—¶å€™å…³é—­å¼¹çª—äº†</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span>, onConfirm: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span> </span>) {
  <span class="hljs-comment">// ç¬¬4ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°</span>
  <span class="hljs-keyword">const</span> instanceElement = <span class="hljs-title function_">ref</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>, instanceElement) 
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½,è¿™é‡Œçš„refå¿…é¡»æ¥æ”¶ä¸€ä¸ªref</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, {...props, <span class="hljs-attr">ref</span>: instanceElement}),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
         
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-comment">// submitForm è°ƒç”¨è¡¨å•ç»„ä»¶ä¸­éœ€è¦éªŒè¯æˆ–è€…æš´éœ²å‡ºå»çš„æ•°æ®</span>
                instanceElement?.<span class="hljs-property">value</span>?.<span class="hljs-title function_">submitForm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span>{
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾—åˆ°çš„å€¼'</span>,res)
                  <span class="hljs-comment">// éªŒè¯é€šè¿‡åè°ƒç”¨å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®ï¼Œå¦‚éªŒè¯å¤±è´¥ï¼Œres çš„å€¼æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªfalseã€‚</span>
                  <span class="hljs-keyword">const</span> callbackResult = <span class="hljs-title function_">onConfirm</span>(res);
                  <span class="hljs-comment">// å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promiseï¼Œåˆ™ç­‰å¾…ä¸šåŠ¡å®Œæˆåå†å…³é—­å¼¹çª—</span>
                  <span class="hljs-keyword">if</span> (callbackResult <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) {
                    <span class="hljs-comment">// æ³¨æ„è¿™é‡Œçš„finallyï¼Œè¿™æ ·å†™åœ¨æœåŠ¡å‡ºç°å¼‚å¸¸çš„æ—¶å€™ä¼šæœ‰é—®é¢˜,è¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦ä¼˜åŒ–</span>
                    <span class="hljs-comment">// æ³¨æ„è¿™é‡Œçš„finallyï¼Œè¿™æ ·å†™åœ¨æœåŠ¡å‡ºç°å¼‚å¸¸çš„æ—¶å€™ä¼šæœ‰é—®é¢˜,è¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦ä¼˜åŒ–</span>
                    callbackResult.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> { 
                      <span class="hljs-comment">// å¼¹çª—å…³é—­é€»è¾‘</span>
                      app.<span class="hljs-title function_">unmount</span>()
                      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
                    });
                  } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// å¦‚æœä¸æ˜¯ Promiseï¼Œç«‹å³å…³é—­å¼¹çª—</span>
                    app.<span class="hljs-title function_">unmount</span>()
                    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
                  }
                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                  <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶ä¹Ÿå¯ä»¥ä¼ é€’é”™è¯¯ä¿¡æ¯</span>
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯å¤±è´¥'</span>, error)
                })
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openMask"</span>&gt;</span>ç‚¹å‡»å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> childTest <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/childTest.vue'</span>
<span class="hljs-keyword">import</span> { renderDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/dialog'</span>
<span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> currentInstance = <span class="hljs-title function_">getCurrentInstance</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openMask</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'currentInstance'</span>,currentInstance)
  <span class="hljs-title function_">renderDialog</span>(childTest,{},{<span class="hljs-attr">title</span>:<span class="hljs-string">'æµ‹è¯•å¼¹çª—'</span>, <span class="hljs-attr">width</span>: <span class="hljs-string">'700'</span>}, <span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€šè¿‡å›è°ƒå‡½æ•°è¿”å›å€¼'</span>, res)
    <span class="hljs-comment">// è¿™é‡Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è®©ä¸šåŠ¡å®Œæˆåæ‰å…³é—­å¼¹çª—</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://dog.ceo/api/breed/pembroke/images/random"</span>)
     .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
       <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
     })
     .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–çš„å›¾ç‰‡åœ°å€ä¸ºï¼š'</span>, res.<span class="hljs-property">message</span>);
     });
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a133b833304f4c85803a4651df8497a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=dd0zvs2F3c7I6dy1B9hjnpXU8u8%3D" alt="09" loading="lazy"/></p>
<h4 data-id="heading-11">ä¼˜åŒ–ä¸šåŠ¡ç»„ä»¶</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span>, onConfirm: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span> </span>) {
  <span class="hljs-comment">// å…³é—­å¼¹çª—ï¼Œé¿å…é‡å¤ä»£ç </span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">closeDialog</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æˆåŠŸæ—¶å…³é—­å¼¹çª—</span>
    app.<span class="hljs-title function_">unmount</span>();
    <span class="hljs-comment">// æ£€æŸ¥divæ˜¯å¦ä»ç„¶å­˜åœ¨ä¸”ä¸ºbodyçš„å­å…ƒç´ ,å¦è€…å¯èƒ½å‡ºç°å¼‚å¸¸</span>
    <span class="hljs-keyword">if</span> (div &amp;&amp; div.<span class="hljs-property">parentNode</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
    }
  }
  <span class="hljs-comment">// ç¬¬4ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°</span>
  <span class="hljs-keyword">const</span> instanceElement = <span class="hljs-title function_">ref</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>, instanceElement) 
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½,è¿™é‡Œçš„refå¿…é¡»æ¥æ”¶ä¸€ä¸ªref</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, {...props, <span class="hljs-attr">ref</span>: instanceElement}),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½</span>
      <span class="hljs-attr">footer</span>:<span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
         
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-comment">// submitForm è°ƒç”¨è¡¨å•ç»„ä»¶ä¸­éœ€è¦éªŒè¯æˆ–è€…æš´éœ²å‡ºå»çš„æ•°æ®</span>
                instanceElement?.<span class="hljs-property">value</span>?.<span class="hljs-title function_">submitForm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span>{
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾—åˆ°çš„å€¼'</span>,res)
                  <span class="hljs-comment">// éªŒè¯é€šè¿‡åè°ƒç”¨å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®ï¼Œå¦‚éªŒè¯å¤±è´¥ï¼Œres çš„å€¼æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªfalseã€‚</span>
                  <span class="hljs-keyword">const</span> callbackResult = <span class="hljs-title function_">onConfirm</span>(res);
                  <span class="hljs-comment">// å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promiseï¼Œåˆ™ç­‰å¾…ä¸šåŠ¡å®Œæˆåå†å…³é—­å¼¹çª—</span>
                  <span class="hljs-keyword">if</span> (callbackResult <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) {
                   
                     callbackResult.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
                      <span class="hljs-keyword">if</span>(res){
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>)
                        <span class="hljs-title function_">closeDialog</span>()
                      }
                    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span>=&gt;</span>{
                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'222'</span>)
                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›è°ƒå‡½æ•°æ‰§è¡Œå‡ºé”™,å¦‚:ç½‘ç»œé”™è¯¯'</span>, error);
                      <span class="hljs-comment">// é”™è¯¯æƒ…å†µä¸‹ä¹Ÿå…³é—­å¼¹çª—</span>
                      <span class="hljs-title function_">closeDialog</span>()
                    });
                  } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// å¦‚æœä¸æ˜¯ Promiseï¼Œå¹¶ä¸”éªŒè¯æ—¶é€šè¿‡äº†çš„ã€‚ç«‹å³å…³é—­å¼¹çª—</span>
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'333'</span>, res)
                    <span class="hljs-keyword">if</span>(res){
                      <span class="hljs-title function_">closeDialog</span>()
                    }
                  }
                }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'44444'</span>)
                  <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶ä¹Ÿå¯ä»¥ä¼ é€’é”™è¯¯ä¿¡æ¯</span>
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯å¤±è´¥'</span>, error)
                })
              }
            },
            <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      )
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openMask"</span>&gt;</span>ç‚¹å‡»å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> childTest <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/childTest.vue'</span>
<span class="hljs-keyword">import</span> { renderDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/dialog'</span>
<span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> currentInstance = <span class="hljs-title function_">getCurrentInstance</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openMask</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'currentInstance'</span>,currentInstance)
  <span class="hljs-title function_">renderDialog</span>(childTest,{},{<span class="hljs-attr">title</span>:<span class="hljs-string">'æµ‹è¯•å¼¹çª—'</span>, <span class="hljs-attr">width</span>: <span class="hljs-string">'700'</span>}, <span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€šè¿‡å›è°ƒå‡½æ•°è¿”å›å€¼'</span>, res)
      <span class="hljs-comment">// è¿™é‡Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è®©ä¸šåŠ¡å®Œæˆåæ‰å…³é—­å¼¹çª—</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://dog.ceo/api/breed/pembroke/images/random"</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
      })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–çš„å›¾ç‰‡åœ°å€ä¸ºï¼š'</span>, res.<span class="hljs-property">message</span>);
      });
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>çœ¼å°–çš„å°ä¼™ä¼´å¯èƒ½å·²ç»å‘ç°äº†è¿™ä¸€æ®µä»£ç ã€‚
1ï¼ŒéªŒè¯ä¸é€šè¿‡ä¼šä¹Ÿä¼šè§¦å‘å¸è½½å¼¹çª—
2ï¼ŒcallbackResult.finallyæ˜¯ä¸åˆé€‚çš„</p>
<ol start="3">
<li/>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a796ec3f9f434f64b43a1714b0c999a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=ZytwqZVokMsdUiCe0vSZPkRsYJo%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f2ef35017fd4131bbf1e5b0ed4180a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768969852&amp;x-signature=Q%2BT4waFqRASGAR%2F1V5YBmCpK%2Fco%3D" alt="10" loading="lazy"/></p>
<h4 data-id="heading-12">æœ€ç»ˆçš„ä»£ç </h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°è£…çš„å¼¹çª—</span>
<span class="hljs-keyword">import</span> { createApp, h, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElDialog</span>, <span class="hljs-title class_">ElButton</span>, <span class="hljs-title class_">ElForm</span>, <span class="hljs-title class_">ElFormItem</span>, <span class="hljs-title class_">ElInput</span>, <span class="hljs-title class_">ElSelect</span>, <span class="hljs-title class_">ElOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDialog</span>(<span class="hljs-params">component: <span class="hljs-built_in">any</span>, props: <span class="hljs-built_in">any</span>, modalProps: <span class="hljs-built_in">any</span>, onConfirm: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span> </span>) {
  <span class="hljs-comment">// å…³é—­å¼¹çª—ï¼Œé¿å…é‡å¤ä»£ç </span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">closeDialog</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æˆåŠŸæ—¶å…³é—­å¼¹çª—</span>
    app.<span class="hljs-title function_">unmount</span>();
    <span class="hljs-comment">// æ£€æŸ¥divæ˜¯å¦ä»ç„¶å­˜åœ¨ä¸”ä¸ºbodyçš„å­å…ƒç´ ,å¦è€…å¯èƒ½å‡ºç°å¼‚å¸¸</span>
    <span class="hljs-keyword">if</span> (div &amp;&amp; div.<span class="hljs-property">parentNode</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
    }
  }
  <span class="hljs-comment">// ç¬¬4ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°</span>
  <span class="hljs-keyword">const</span> instanceElement = <span class="hljs-title function_">ref</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>, instanceElement) 
  <span class="hljs-keyword">const</span> isLoading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-comment">// åˆ›å»ºå¼¹çª—å®ä¾‹</span>
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">h</span>(
    <span class="hljs-title class_">ElDialog</span>,
    {
      ...modalProps,
      <span class="hljs-attr">modelValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onClose</span>: <span class="hljs-function">()=&gt;</span> {
        isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é—­çš„å›è°ƒ'</span>)
        app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
        <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
      }
    },
    {
      <span class="hljs-comment">// ä¸»è¦å†…å®¹æ’æ§½,è¿™é‡Œçš„refå¿…é¡»æ¥æ”¶ä¸€ä¸ªref</span>
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(component, {...props, <span class="hljs-attr">ref</span>: instanceElement}),
      <span class="hljs-comment">// åº•éƒ¨æ’æ§½,noShowFooterBoolæ˜¯true,ä¸æ˜¾ç¤ºï¼› falseçš„æ˜¾ç¤ºåº•éƒ¨ </span>
      <span class="hljs-attr">footer</span>: props.<span class="hljs-property">noShowFooterBool</span> ? <span class="hljs-literal">null</span> : <span class="hljs-function">() =&gt;</span><span class="hljs-title function_">h</span>(
        <span class="hljs-string">'div'</span>,
        { 
          <span class="hljs-attr">class</span>: <span class="hljs-string">'dialog-footer'</span>,
        },
        [
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>, 
            {
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å–æ¶ˆæŒ‰é’®'</span>)
                <span class="hljs-comment">// å¸è½½ä¸€ä¸ªå·²æŒ‚è½½çš„åº”ç”¨å®ä¾‹ã€‚å¸è½½ä¸€ä¸ªåº”ç”¨ä¼šè§¦å‘è¯¥åº”ç”¨ç»„ä»¶æ ‘å†…æ‰€æœ‰ç»„ä»¶çš„å¸è½½ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</span>
                app.<span class="hljs-title function_">unmount</span>() <span class="hljs-comment">// è¿™æ ·å¸è½½ä¼šè®©åŠ¨ç”»æ¶ˆå¤±</span>
                <span class="hljs-comment">// å¸è½½çš„åŒæ—¶éœ€è¦æŠŠæˆ‘ä»¬åˆ›å»ºçš„divå…ƒç´ ç§»é™¤ï¼Œå¦åˆ™é¡µé¢ä¸Šä¼šå‡ºç°å¾ˆå¤šdiv</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)
              }
            },
            <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">cancelText</span> || <span class="hljs-string">'å–æ¶ˆ'</span>
          ),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-title class_">ElButton</span>,
            { 
              <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
              <span class="hljs-attr">loading</span>: isLoading.<span class="hljs-property">value</span>,
              <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
                isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
                <span class="hljs-comment">// submitForm è°ƒç”¨è¡¨å•ç»„ä»¶ä¸­éœ€è¦éªŒè¯æˆ–è€…æš´éœ²å‡ºå»çš„æ•°æ®</span>
                instanceElement?.<span class="hljs-property">value</span>?.<span class="hljs-title function_">submitForm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span>{
                  <span class="hljs-keyword">if</span>(!res){
                    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
                  }
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾—åˆ°çš„å€¼'</span>,res)
                  <span class="hljs-comment">// éªŒè¯é€šè¿‡åè°ƒç”¨å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®ï¼Œå¦‚éªŒè¯å¤±è´¥ï¼Œres çš„å€¼æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªfalseã€‚</span>
                  <span class="hljs-keyword">const</span> callbackResult = <span class="hljs-title function_">onConfirm</span>(res);
                  <span class="hljs-comment">// å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promiseï¼Œåˆ™ç­‰å¾…ä¸šåŠ¡å®Œæˆåå†å…³é—­å¼¹çª—</span>
                  <span class="hljs-keyword">if</span> (callbackResult <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) {
                     callbackResult.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
                      <span class="hljs-keyword">if</span>(res){
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'111'</span>)
                        <span class="hljs-title function_">closeDialog</span>()
                      }<span class="hljs-keyword">else</span>{
                        isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
                      }
                    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span>=&gt;</span>{
                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'222'</span>)
                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›è°ƒå‡½æ•°æ‰§è¡Œå‡ºé”™,å¦‚:ç½‘ç»œé”™è¯¯'</span>, error);
                      <span class="hljs-comment">// é”™è¯¯æƒ…å†µä¸‹ä¹Ÿå…³é—­å¼¹çª—</span>
                      <span class="hljs-title function_">closeDialog</span>()
                    });
                  } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// å¦‚æœä¸æ˜¯ Promiseï¼Œå¹¶ä¸”éªŒè¯æ—¶é€šè¿‡äº†çš„ã€‚ç«‹å³å…³é—­å¼¹çª—</span>
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'333'</span>, res)
                    <span class="hljs-keyword">if</span>(res){
                      <span class="hljs-title function_">closeDialog</span>()
                    }<span class="hljs-keyword">else</span>{
                      isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
                    }
                  }
                }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'44444'</span>)
                   isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
                  <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶ä¹Ÿå¯ä»¥ä¼ é€’é”™è¯¯ä¿¡æ¯</span>
                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯å¤±è´¥'</span>, error)
                })
              }
            },
            <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">confirmText</span> ||  <span class="hljs-string">'ç¡®å®š'</span>
          )
        ]
      ) 
    }
  );
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue åº”ç”¨å®ä¾‹ã€‚è¿™ä¸ªåº”ç”¨å®ä¾‹æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¸»åº”ç”¨åˆ†ç¦»ã€‚</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(dialog)
  <span class="hljs-comment">// åœ¨æ–°å®ä¾‹ä¸­æ³¨å†Œ Element Plus, è¿™å¼¹çª—ä¸­çš„ç»„ä»¶å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†</span>
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
  <span class="hljs-comment">// è¿™ä¸ªdivå…ƒç´ åœ¨åœ¨é”€æ¯åº”ç”¨æ—¶éœ€è¦è¢«ç§»é™¤å“ˆ</span>
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)
  app.<span class="hljs-title function_">mount</span>(div)
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openMask"</span>&gt;</span>ç‚¹å‡»å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> childTest <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/childTest.vue'</span>
<span class="hljs-keyword">import</span> { renderDialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/dialog'</span>
<span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> currentInstance = <span class="hljs-title function_">getCurrentInstance</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openMask</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'currentInstance'</span>,currentInstance)
  <span class="hljs-keyword">const</span> otherProps =  {<span class="hljs-attr">cancelText</span>:<span class="hljs-string">'å–æ¶ˆå“ˆ'</span>, <span class="hljs-attr">confirmText</span>: <span class="hljs-string">'ç¡®è®¤å“ˆ'</span>,<span class="hljs-attr">showFooterBool</span>:<span class="hljs-literal">true</span> }
  <span class="hljs-keyword">const</span> dialogSetObject = {<span class="hljs-attr">title</span>:<span class="hljs-string">'æµ‹è¯•å¼¹çª—å“ˆ'</span>, <span class="hljs-attr">width</span>: <span class="hljs-string">'700'</span>, <span class="hljs-attr">draggable</span>: <span class="hljs-literal">true</span>}
  <span class="hljs-title function_">renderDialog</span>(childTest,otherProps,dialogSetObject, <span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€šè¿‡å›è°ƒå‡½æ•°è¿”å›å€¼'</span>, res)
    <span class="hljs-comment">// è¿™é‡Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è®©ä¸šåŠ¡å®Œæˆåæ‰å…³é—­å¼¹çª—</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://dog.ceo/api/breed/pembroke/images/random"</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–çš„å›¾ç‰‡åœ°å€ä¸ºï¼š'</span>, res.<span class="hljs-property">message</span>);
    });
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"ruleFormRef"</span>
    <span class="hljs-attr">style</span>=<span class="hljs-string">"max-width: 600px"</span>
    <span class="hljs-attr">:model</span>=<span class="hljs-string">"ruleForm"</span>
    <span class="hljs-attr">:rules</span>=<span class="hljs-string">"rules"</span>
    <span class="hljs-attr">label-width</span>=<span class="hljs-string">"auto"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity name"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.name"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity zone"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"region"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.region"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Activity zone"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone one"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shanghai"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Zone two"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"beijing"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity time"</span> <span class="hljs-attr">required</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"11"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"date1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-date-picker</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.date1"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"date"</span>
            <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Pick a date"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Pick a date"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center"</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-500"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"11"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"date2"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-time-picker</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.date2"</span>
            <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Pick a time"</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Pick a time"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>

  
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Resources"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"resource"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-radio-group</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.resource"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Sponsorship"</span>&gt;</span>Sponsorship<span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Venue"</span>&gt;</span>Venue<span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-radio-group</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Activity form"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"desc"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"ruleForm.desc"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">FormInstance</span>, <span class="hljs-title class_">FormRules</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

interface <span class="hljs-title class_">RuleForm</span> {
  <span class="hljs-attr">name</span>: string
  <span class="hljs-attr">region</span>: string

  <span class="hljs-attr">date1</span>: string
  <span class="hljs-attr">date2</span>: string


  <span class="hljs-attr">resource</span>: string
  <span class="hljs-attr">desc</span>: string
}


<span class="hljs-keyword">const</span> ruleFormRef = ref&lt;<span class="hljs-title class_">FormInstance</span>&gt;()
<span class="hljs-keyword">const</span> ruleForm = reactive&lt;<span class="hljs-title class_">RuleForm</span>&gt;({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Hello'</span>,
  <span class="hljs-attr">region</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">date1</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">date2</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">resource</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">desc</span>: <span class="hljs-string">''</span>,
})



<span class="hljs-keyword">const</span> rules = reactive&lt;<span class="hljs-title class_">FormRules</span>&lt;<span class="hljs-title class_">RuleForm</span>&gt;&gt;({
  <span class="hljs-attr">name</span>: [
    { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Please input Activity name'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
    { <span class="hljs-attr">min</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Length should be 3 to 5'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  ],
  <span class="hljs-attr">region</span>: [
    {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please select Activity zone'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">date1</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'date'</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please pick a date'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">date2</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'date'</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please pick a time'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">resource</span>: [
    {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Please select activity resource'</span>,
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">'change'</span>,
    },
  ],
  <span class="hljs-attr">desc</span>: [
    { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Please input activity form'</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  ],
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!ruleFormRef.<span class="hljs-property">value</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ruleFormRef is not initialized'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> valid = <span class="hljs-keyword">await</span> ruleFormRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>()
    <span class="hljs-keyword">if</span> (valid) {
      <span class="hljs-comment">// éªŒè¯é€šè¿‡åï¼Œå°±ä¼šå¯ä»¥æŠŠä½ éœ€è¦çš„æ•°æ®æš´éœ²å‡ºå»</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(ruleForm)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ä¸ºå•¥submitFormä¸­ï¼Œvalidçš„å€¼æ˜¯falseä¼šæ‰§è¡Œcatch ï¼Ÿ</span>
    <span class="hljs-comment">// el-form ç»„ä»¶çš„ validate æ–¹æ³•çš„å·¥ä½œæœºåˆ¶å¯¼è‡´çš„ã€‚ validate æ–¹æ³•åœ¨è¡¨å•éªŒè¯å¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err'</span>, error)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-comment">/**
     * ä¸‹é¢è¿™æ ·å†™ä¸ºå•¥ç•Œé¢ä¼šæŠ¥é”™å‘¢ï¼Ÿ
     * return Promise.reject(error)
     * å½“è¡¨å•éªŒè¯å¤±è´¥æ—¶ï¼ŒruleFormRef.value.validate() ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
     * è™½ç„¶ä½ ç”¨äº† try...catch æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨ catch å—ä¸­é€šè¿‡ return Promise.reject(error) è¿”å›äº†ä¸€ä¸ªè¢«æ‹’ç»çš„ Promise
     * ä½†å¦‚æœè°ƒç”¨ submitForm çš„åœ°æ–¹æ²¡æœ‰æ­£ç¡®åœ°å¤„ç†è¿™ä¸ªè¢«æ‹’ç»çš„ Promiseï¼ˆå³æ²¡æœ‰ä½¿ç”¨ .catch() æˆ–è€… await æ¥æ¥æ”¶é”™è¯¯ï¼‰ï¼Œ
     * é‚£ä¹ˆæµè§ˆå™¨æ§åˆ¶å°å°±ä¼šæ˜¾ç¤ºä¸€ä¸ª "Uncaught (in promise)" é”™è¯¯ã€‚
     * åœ¨ catch ä¸­å†æ¬¡ return Promise.reject(error) æ˜¯å¤šä½™çš„ï¼Œ ç›´æ¥return false
     * */</span> 
    <span class="hljs-comment">/**
     * å¦‚æœä½ è¿™æ ·å†™
     * throw error ç›´æ¥æŠ›å‡ºé”™è¯¯å³å¯
     * é‚£ä¹ˆå°±éœ€è¦å†è°ƒç”¨submitFormçš„åœ°æ–¹æ•è·å¼‚å¸¸
     * */</span>  
  }
}

<span class="hljs-title function_">defineExpose</span>({
  <span class="hljs-attr">submitForm</span>:submitForm
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cesium æ·±å…¥æµ…å‡º ã€Šä¸€ã€‹WGS84ã€ECEFã€ç»çº¬é«˜ï¼šCesium ä¸–ç•Œåæ ‡åˆ°åº•æ˜¯ä»€ä¹ˆ?]]></title>    <link>https://juejin.cn/post/7592622563546988579</link>    <guid>https://juejin.cn/post/7592622563546988579</guid>    <pubDate>2026-01-08T12:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592622563546988579" data-draft-id="7592787377656676386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Cesium æ·±å…¥æµ…å‡º ã€Šä¸€ã€‹WGS84ã€ECEFã€ç»çº¬é«˜ï¼šCesium ä¸–ç•Œåæ ‡åˆ°åº•æ˜¯ä»€ä¹ˆ?"/> <meta itemprop="keywords" content="WebGL"/> <meta itemprop="datePublished" content="2026-01-08T12:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›¾ç´ "/> <meta itemprop="url" content="https://juejin.cn/user/3036177876910697"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Cesium æ·±å…¥æµ…å‡º ã€Šä¸€ã€‹WGS84ã€ECEFã€ç»çº¬é«˜ï¼šCesium ä¸–ç•Œåæ ‡åˆ°åº•æ˜¯ä»€ä¹ˆ?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3036177876910697/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›¾ç´ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:19:00.000Z" title="Thu Jan 08 2026 12:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>åœ¨cesiumä¸­å­˜åœ¨å¤šç§åæ ‡ç³»ï¼Œå› ä¸ºcesiumä½œä¸ºä¸€ä¸ªç©ºé—´åœ°ç†çš„æ¸²æŸ“å¼•æ“ï¼Œéœ€è¦å¤„ç†ä»åœ°ç†åæ ‡åˆ°3Dæ¸²æŸ“çš„è½¬æ¢ï¼Œç†è§£è¿™äº›åæ ‡ä¹‹é—´çš„è”ç³»ï¼Œæ˜¯cesiumçš„åŸºç¡€ã€‚ä¹Ÿæ˜¯ä»»ä½•ä¸€ä¸ªåœ°ç†æ¸²æŸ“å¼•æ“çš„åŸºç¡€ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« å¸¦å¤§å®¶ç†è§£cesiumä¸­çš„åæ ‡ç³»ï¼Œé¡ºä¾¿å¯¹æ¯”ä¸€ä¸‹three.jsçš„åŒºåˆ«ã€‚</p>
<h4 data-id="heading-0">1ã€WGS84</h4>
<p>WGS 84æ˜¯å…¨çƒå®šä½ç³»ç»Ÿï¼ˆGPSï¼‰çš„åŸºå‡†åæ ‡ç³»ç»Ÿï¼Œå¹¿æ³›åº”ç”¨äºå…¨çƒå®šä½å’Œå¯¼èˆªã€‚å®ƒé‡‡ç”¨åè¿›åˆ¶åº¦è¡¨ç¤ºç»åº¦å’Œçº¬åº¦ã€‚ï¼ˆè¿™å¥è¯æ˜¯æ‘˜å½•ç»´åŸºç™¾ç§‘çš„ä»‹ç»ï¼‰</p>
<p>ç®€è€Œè¨€ä¹‹è¿™ä¸ªåæ ‡ç³»ç»Ÿç”¨çš„æ˜¯ç”¨<strong>ç»çº¬åº¦</strong>æ¥è¡¨ç¤ºä½ç½®</p>
<h4 data-id="heading-1">2ã€ç»çº¬é«˜</h4>
<p>ç”¨ç»çº¬åº¦å’Œé«˜ç¨‹æ¥è¡¨ç¤ºç©ºé—´ä½ç½®</p>
<ul>
<li>ç»åº¦ï¼ˆlongitudeï¼‰ï¼šèŒƒå›´ [-Ï€, Ï€]ï¼Œå•ä½å¼§åº¦</li>
<li>çº¬åº¦ï¼ˆlatitudeï¼‰ï¼šèŒƒå›´ [-Ï€/2, Ï€/2]ï¼Œå•ä½å¼§åº¦</li>
<li>é«˜åº¦ï¼ˆheightï¼‰ï¼šç›¸å¯¹äºæ¤­çƒé¢çš„é«˜åº¦ï¼Œå•ä½ç±³</li>
</ul>
<p>åœ¨ Cesium ä¸­ç”¨ Cartographic è¡¨ç¤ºï¼Œæ³¨æ„è§’åº¦å•ä½ä¸ºå¼§åº¦ã€‚</p>
<h4 data-id="heading-2">3ã€ECEFï¼ˆEarth-Centered, Earth-Fixedï¼‰</h4>
<p>åœ°å¿ƒåœ°å›ºåæ ‡ç³»ï¼Œä¹Ÿç§°ä¸ºä¸‰ç»´ç¬›å¡å°”åæ ‡</p>
<ul>
<li>åŸç‚¹ï¼šåœ°å¿ƒ</li>
<li>X è½´ï¼šæŒ‡å‘æœ¬åˆå­åˆçº¿ä¸èµ¤é“äº¤ç‚¹</li>
<li>Z è½´ï¼šæŒ‡å‘åŒ—æ</li>
<li>Y è½´ï¼šä¸ Xã€Z æ„æˆå³æ‰‹ç³»</li>
</ul>
<p>åœ¨ Cesium ä¸­ç”¨ Cartesian3 è¡¨ç¤ºï¼Œå•ä½ä¸ºç±³ã€‚è¿™æ˜¯ Cesium åœºæ™¯ä¸­çš„ä¸–ç•Œåæ ‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ebcf5a5d5654373958efda2a4798f0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-57Sg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768968405&amp;x-signature=ipJlfV9cFafLPb5AElBbBJvD0Es%3D" alt="image.png" loading="lazy"/></p>
<p align="center">ä¸Šå›¾ä¸ºECEFåæ ‡ç³»</p>
<p>ç»“è®ºï¼šCesiumçš„ä¸–ç•Œåæ ‡ç³»å°±æ˜¯ECEFåæ ‡ç³»ã€‚æ‰€æœ‰ä¸‰ç»´ç‰©ä½“éƒ½æ˜¯åŸºäºè¿™ä¸ªåæ ‡ç³»è¿›è¡Œæ‘†æ”¾ï¼Œä¸‰ç»´ç‰©ä½“é€šè¿‡ modelMatrixä¼šæŠŠå±€éƒ¨åæ ‡ç³»è½¬åŒ–ä¸ºä¸–ç•Œåæ ‡ç³»</p>
<h3 data-id="heading-3">cesiumä¸­å¸¸ç”¨çš„åæ ‡è½¬æ¢æ–¹æ³•</h3>
<h4 data-id="heading-4">ç»çº¬åº¦-&gt;ç¬›å¡å°”</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç»çº¬åº¦æ˜¯è§’åº¦å€¼æ—¶å€™è½¬ä¸ºç¬›å¡å°”</span>
Cesium<span class="hljs-selector-class">.Cartesian3</span><span class="hljs-selector-class">.fromDegrees</span>(lonDeg, latDeg, height, ellipsoid?, result?)
<span class="hljs-comment">// å¼§åº¦åˆ¶æ—¶è½¬ä¸ºç¬›å¡å°”</span>
Cesium<span class="hljs-selector-class">.Cartesian3</span><span class="hljs-selector-class">.fromRadians</span>(lonRad, latRad, height, ellipsoid?, result?)
<span class="hljs-comment">// é€šè¿‡çƒä½“è½¬ä¸ºç¬›å¡å°”</span>
ellipsoid<span class="hljs-selector-class">.cartographicToCartesian</span>(cartographic, result?)
</code></pre>
<p>æˆ‘ä»¬æ¥æ ¹æ®æºç æ¥çœ‹çœ‹ç»çº¬åº¦æ˜¯å¦‚ä½•è®¡ç®—å‡ºç¬›å¡å°”åæ ‡çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1cb5f29c3ad4070952b86cacb0b4779~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-57Sg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768968405&amp;x-signature=Oizkyper4lMne8QEi8QLKhe05Ks%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini">/**
 * Returns a Cartesian3 position from longitude and latitude values given in radians.
 *
 * @param {number} longitude The longitude, in radians
 * @param {number} latitude The latitude, in radians
 * @param {number} <span class="hljs-section">[height=0.0]</span> The height, in meters, above the ellipsoid.
 * @param {Ellipsoid} <span class="hljs-section">[ellipsoid=Ellipsoid.default]</span> The ellipsoid on which the position lies.
 * @param {Cartesian3} <span class="hljs-section">[result]</span> The object onto which to store the result.
 * @returns {Cartesian3} The position
 *
 * @example
 * const <span class="hljs-attr">position</span> = Cesium.Cartesian3.fromRadians(-<span class="hljs-number">2.007</span>, <span class="hljs-number">0.645</span>)<span class="hljs-comment">;</span>
 */
<span class="hljs-attr">Cartesian3.fromRadians</span> = function (
  longitude,
  latitude,
  height,
  ellipsoid,
  result,
) {
  //&gt;&gt;includeStart('debug', pragmas.debug)<span class="hljs-comment">;</span>
  Check.typeOf.number("longitude", longitude)<span class="hljs-comment">;</span>
  Check.typeOf.number("latitude", latitude)<span class="hljs-comment">;</span>
  //&gt;&gt;includeEnd('debug')<span class="hljs-comment">;</span>

  <span class="hljs-attr">height</span> = height ?? <span class="hljs-number">0.0</span><span class="hljs-comment">;</span>

  const <span class="hljs-attr">radiiSquared</span> = !defined(ellipsoid)
    ? Cartesian3._ellipsoidRadiiSquared
    : ellipsoid.radiiSquared<span class="hljs-comment">;</span>

  const <span class="hljs-attr">cosLatitude</span> = Math.cos(latitude)<span class="hljs-comment">;</span>
  // å¦‚ä¸Šå›¾å¯ä»¥æ±‚å¾— ä»åŸç‚¹æŒ‡å‘ç›®æ ‡ç‚¹çš„å‘é‡ scratchN 
  <span class="hljs-attr">scratchN.x</span> = cosLatitude * Math.cos(longitude)<span class="hljs-comment">;</span>
  <span class="hljs-attr">scratchN.y</span> = cosLatitude * Math.sin(longitude)<span class="hljs-comment">;</span>
  <span class="hljs-attr">scratchN.z</span> = Math.sin(latitude)<span class="hljs-comment">;</span>
  // å¾—åˆ°çƒå¿ƒæŒ‡å‘æ¤­çƒé¢çš„å‘é‡
  <span class="hljs-attr">scratchN</span> = Cartesian3.normalize(scratchN, scratchN)<span class="hljs-comment">;</span>

  // è¿™ä¸ªåœ°æ–¹cesium ç”¨çš„è®¡ç®—æ–¹æ³•æˆ‘ä¹Ÿæ²¡æœ‰æ¨å¯¼è¿‡ï¼Œæ•°å­¦å¥½çš„å¯ä»¥è‡ªå·±æ¨å¯¼ä¸€ä¸‹
  // æœ€ç®€å•çš„ä½¿ç”¨è§£æå‡ ä½•çš„æ¤­åœ†å…¬å¼å’Œå‘é‡çš„äº¤ç‚¹ï¼Œå¯ä»¥æ±‚å‡ºæ¤­åœ†ä¸Šçš„ç‚¹
  // cesiumè¿™é‡Œçš„æ–¹æ³•è®¡ç®—æ–¹å¼æ›´ç®€æ´ä¸€ç‚¹ï¼Œé€šè¿‡è®¡ç®—ç¼©æ”¾å› å­æŠŠå‘é‡ç¼©æ”¾åˆ°æ¤­åœ†ä¸Š
  Cartesian3.multiplyComponents(radiiSquared, scratchN, scratchK)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">gamma</span> = Math.sqrt(Cartesian3.dot(scratchN, scratchK))<span class="hljs-comment">;</span>
  // å¾—åˆ°æ¤­åœ†ä¸Šçš„ç‚¹åæ ‡
  <span class="hljs-attr">scratchK</span> = Cartesian3.divideByScalar(scratchK, gamma, scratchK)<span class="hljs-comment">;  </span>
  // å¾—åˆ°é•¿åº¦ä¸ºheightçš„åœ°å¿ƒæ–¹å‘å‘é‡çš„å‘é‡
  <span class="hljs-attr">scratchN</span> = Cartesian3.multiplyByScalar(scratchN, height, scratchN)<span class="hljs-comment">; </span>

  if (!defined(result)) {
    <span class="hljs-attr">result</span> = new Cartesian3()<span class="hljs-comment">;</span>
  }
  // æœ€åæŠŠæ¤­åœ†ä¸Šçš„ç‚¹å†éªŒè¯åœ°å¿ƒæ³•çº¿å¹³ç§»heightï¼Œå¾—åˆ°ecefåæ ‡
  return Cartesian3.add(scratchK, scratchN, result)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-5">ç¬›å¡å°”-&gt;ç»çº¬åº¦</h4>
<pre><code class="hljs language-scss" lang="scss">Cesium<span class="hljs-selector-class">.Cartographic</span><span class="hljs-selector-class">.fromCartesian</span>(cartesian, ellipsoid?, result?)
ellipsoid<span class="hljs-selector-class">.cartesianToCartographic</span>(cartesian, result?)
</code></pre>
<p>æºç çš„è®¡ç®—è¿‡ç¨‹ï¼šè¿˜æŒºå¤æ‚çš„ï¼Œç”¨çš„ç‰›é¡¿è¿­ä»£æ³•ï¼Œæ•°å­¦å¥½çš„æœ‹å‹å¯ä»¥è‡ªè¡Œå»æ¨å¯¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">/**
 * Creates a new Cartographic instance from a Cartesian position. The values in the
 * resulting object will be in radians.
 *
 * @param {Cartesian3} cartesian The Cartesian position to convert to cartographic representation.
 * @param {Ellipsoid} <span class="hljs-section">[ellipsoid=Ellipsoid.default]</span> The ellipsoid on which the position lies.
 * @param {Cartographic} <span class="hljs-section">[result]</span> The object onto which to store the result.
 * @returns {Cartographic} The modified result parameter, new Cartographic instance if none was provided, or undefined if the cartesian is at the center of the ellipsoid.
 */
<span class="hljs-attr">Cartographic.fromCartesian</span> = function (cartesian, ellipsoid, result) {
  const <span class="hljs-attr">oneOverRadii</span> = defined(ellipsoid)
    ? ellipsoid.oneOverRadii
    : Cartographic._ellipsoidOneOverRadii<span class="hljs-comment">;</span>
  const <span class="hljs-attr">oneOverRadiiSquared</span> = defined(ellipsoid)
    ? ellipsoid.oneOverRadiiSquared
    : Cartographic._ellipsoidOneOverRadiiSquared<span class="hljs-comment">;</span>
  const <span class="hljs-attr">centerToleranceSquared</span> = defined(ellipsoid)
    ? ellipsoid._centerToleranceSquared
    : Cartographic._ellipsoidCenterToleranceSquared<span class="hljs-comment">;</span>

  //`cartesian is required.` is thrown from scaleToGeodeticSurface
  const <span class="hljs-attr">p</span> = scaleToGeodeticSurface(
    cartesian,
    oneOverRadii,
    oneOverRadiiSquared,
    centerToleranceSquared,
    cartesianToCartographicP,
  )<span class="hljs-comment">;</span>

  if (!defined(p)) {
    return undefined<span class="hljs-comment">;</span>
  }

  let <span class="hljs-attr">n</span> = Cartesian3.multiplyComponents(
    p,
    oneOverRadiiSquared,
    cartesianToCartographicN,
  )<span class="hljs-comment">;</span>
  <span class="hljs-attr">n</span> = Cartesian3.normalize(n, n)<span class="hljs-comment">;</span>

  const <span class="hljs-attr">h</span> = Cartesian3.subtract(cartesian, p, cartesianToCartographicH)<span class="hljs-comment">;</span>

  const <span class="hljs-attr">longitude</span> = Math.atan2(n.y, n.x)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">latitude</span> = Math.asin(n.z)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">height</span> =
    CesiumMath.sign(Cartesian3.dot(h, cartesian)) * Cartesian3.magnitude(h)<span class="hljs-comment">;</span>

  if (!defined(result)) {
    return new Cartographic(longitude, latitude, height)<span class="hljs-comment">;</span>
  }
  <span class="hljs-attr">result.longitude</span> = longitude<span class="hljs-comment">;</span>
  <span class="hljs-attr">result.latitude</span> = latitude<span class="hljs-comment">;</span>
  <span class="hljs-attr">result.height</span> = height<span class="hljs-comment">;</span>
  return result<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

/**
 * Scales the provided Cartesian position along the geodetic surface normal
 * so that it is on the surface of this ellipsoid.  If the position is
 * at the center of the ellipsoid, this function returns undefined.
 *
 * @param {Cartesian3} cartesian The Cartesian position to scale.
 * @param {Cartesian3} oneOverRadii One over radii of the ellipsoid.
 * @param {Cartesian3} oneOverRadiiSquared One over radii squared of the ellipsoid.
 * @param {number} centerToleranceSquared Tolerance for closeness to the center.
 * @param {Cartesian3} <span class="hljs-section">[result]</span> The object onto which to store the result.
 * @returns {Cartesian3} The modified result parameter, a new Cartesian3 instance if none was provided, or undefined if the position is at the center.
 *
 * @function scaleToGeodeticSurface
 *
 * @private
 */
function scaleToGeodeticSurface(
  cartesian,
  oneOverRadii,
  oneOverRadiiSquared,
  centerToleranceSquared,
  result,
) {
  //&gt;&gt;includeStart('debug', pragmas.debug)<span class="hljs-comment">;</span>
  if (!defined(cartesian)) {
    throw new DeveloperError("cartesian is required.")<span class="hljs-comment">;</span>
  }
  if (!defined(oneOverRadii)) {
    throw new DeveloperError("oneOverRadii is required.")<span class="hljs-comment">;</span>
  }
  if (!defined(oneOverRadiiSquared)) {
    throw new DeveloperError("oneOverRadiiSquared is required.")<span class="hljs-comment">;</span>
  }
  if (!defined(centerToleranceSquared)) {
    throw new DeveloperError("centerToleranceSquared is required.")<span class="hljs-comment">;</span>
  }
  //&gt;&gt;includeEnd('debug')<span class="hljs-comment">;</span>

  const <span class="hljs-attr">positionX</span> = cartesian.x<span class="hljs-comment">;</span>
  const <span class="hljs-attr">positionY</span> = cartesian.y<span class="hljs-comment">;</span>
  const <span class="hljs-attr">positionZ</span> = cartesian.z<span class="hljs-comment">;</span>

  const <span class="hljs-attr">oneOverRadiiX</span> = <span class="hljs-literal">on</span>eOverRadii.x<span class="hljs-comment">;</span>
  const <span class="hljs-attr">oneOverRadiiY</span> = <span class="hljs-literal">on</span>eOverRadii.y<span class="hljs-comment">;</span>
  const <span class="hljs-attr">oneOverRadiiZ</span> = <span class="hljs-literal">on</span>eOverRadii.z<span class="hljs-comment">;</span>

  const <span class="hljs-attr">x2</span> = positionX * positionX * <span class="hljs-literal">on</span>eOverRadiiX * <span class="hljs-literal">on</span>eOverRadiiX<span class="hljs-comment">;</span>
  const <span class="hljs-attr">y2</span> = positionY * positionY * <span class="hljs-literal">on</span>eOverRadiiY * <span class="hljs-literal">on</span>eOverRadiiY<span class="hljs-comment">;</span>
  const <span class="hljs-attr">z2</span> = positionZ * positionZ * <span class="hljs-literal">on</span>eOverRadiiZ * <span class="hljs-literal">on</span>eOverRadiiZ<span class="hljs-comment">;</span>

  // Compute the squared ellipsoid norm.
  const <span class="hljs-attr">squaredNorm</span> = x2 + y2 + z2<span class="hljs-comment">;</span>
  const <span class="hljs-attr">ratio</span> = Math.sqrt(<span class="hljs-number">1.0</span> / squaredNorm)<span class="hljs-comment">;</span>

  // As an initial approximation, assume that the radial intersection is the projection point.
  const <span class="hljs-attr">intersection</span> = Cartesian3.multiplyByScalar(
    cartesian,
    ratio,
    scaleToGeodeticSurfaceIntersection,
  )<span class="hljs-comment">;</span>

  // If the position is near the center, the iteration will not converge.
  if (squaredNorm &lt; centerToleranceSquared) {
    return !isFinite(ratio)
      ? undefined
      : Cartesian3.clone(intersection, result)<span class="hljs-comment">;</span>
  }

  const <span class="hljs-attr">oneOverRadiiSquaredX</span> = <span class="hljs-literal">on</span>eOverRadiiSquared.x<span class="hljs-comment">;</span>
  const <span class="hljs-attr">oneOverRadiiSquaredY</span> = <span class="hljs-literal">on</span>eOverRadiiSquared.y<span class="hljs-comment">;</span>
  const <span class="hljs-attr">oneOverRadiiSquaredZ</span> = <span class="hljs-literal">on</span>eOverRadiiSquared.z<span class="hljs-comment">;</span>

  // Use the gradient at the intersection point in place of the true unit normal.
  // The difference in magnitude will be absorbed in the multiplier.
  const <span class="hljs-attr">gradient</span> = scaleToGeodeticSurfaceGradient<span class="hljs-comment">;</span>
  <span class="hljs-attr">gradient.x</span> = intersection.x * <span class="hljs-literal">on</span>eOverRadiiSquaredX * <span class="hljs-number">2.0</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">gradient.y</span> = intersection.y * <span class="hljs-literal">on</span>eOverRadiiSquaredY * <span class="hljs-number">2.0</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">gradient.z</span> = intersection.z * <span class="hljs-literal">on</span>eOverRadiiSquaredZ * <span class="hljs-number">2.0</span><span class="hljs-comment">;</span>

  // Compute the initial guess at the normal vector multiplier, lambda.
  let <span class="hljs-attr">lambda</span> =
    ((1.0 - ratio) * Cartesian3.magnitude(cartesian)) /
    (0.5 * Cartesian3.magnitude(gradient))<span class="hljs-comment">;</span>
  let <span class="hljs-attr">correction</span> = <span class="hljs-number">0.0</span><span class="hljs-comment">;</span>

  let func<span class="hljs-comment">;</span>
  let denominator<span class="hljs-comment">;</span>
  let xMultiplier<span class="hljs-comment">;</span>
  let yMultiplier<span class="hljs-comment">;</span>
  let zMultiplier<span class="hljs-comment">;</span>
  let xMultiplier2<span class="hljs-comment">;</span>
  let yMultiplier2<span class="hljs-comment">;</span>
  let zMultiplier2<span class="hljs-comment">;</span>
  let xMultiplier3<span class="hljs-comment">;</span>
  let yMultiplier3<span class="hljs-comment">;</span>
  let zMultiplier3<span class="hljs-comment">;</span>

  do {
    lambda <span class="hljs-attr">-</span>= correction<span class="hljs-comment">;</span>

    <span class="hljs-attr">xMultiplier</span> = <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + lambda * <span class="hljs-literal">on</span>eOverRadiiSquaredX)<span class="hljs-comment">;</span>
    <span class="hljs-attr">yMultiplier</span> = <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + lambda * <span class="hljs-literal">on</span>eOverRadiiSquaredY)<span class="hljs-comment">;</span>
    <span class="hljs-attr">zMultiplier</span> = <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + lambda * <span class="hljs-literal">on</span>eOverRadiiSquaredZ)<span class="hljs-comment">;</span>

    <span class="hljs-attr">xMultiplier2</span> = xMultiplier * xMultiplier<span class="hljs-comment">;</span>
    <span class="hljs-attr">yMultiplier2</span> = yMultiplier * yMultiplier<span class="hljs-comment">;</span>
    <span class="hljs-attr">zMultiplier2</span> = zMultiplier * zMultiplier<span class="hljs-comment">;</span>

    <span class="hljs-attr">xMultiplier3</span> = xMultiplier2 * xMultiplier<span class="hljs-comment">;</span>
    <span class="hljs-attr">yMultiplier3</span> = yMultiplier2 * yMultiplier<span class="hljs-comment">;</span>
    <span class="hljs-attr">zMultiplier3</span> = zMultiplier2 * zMultiplier<span class="hljs-comment">;</span>

    <span class="hljs-attr">func</span> = x2 * xMultiplier2 + y2 * yMultiplier2 + z2 * zMultiplier2 - <span class="hljs-number">1.0</span><span class="hljs-comment">;</span>

    // "denominator" here refers to the use of this expression in the velocity and acceleration
    // computations in the sections to <span class="hljs-attr">follow.
    denominator</span> =
      x2 * xMultiplier3 * oneOverRadiiSquaredX +
      y2 * yMultiplier3 * oneOverRadiiSquaredY +
      z2 * zMultiplier3 * oneOverRadiiSquaredZ<span class="hljs-comment">;</span>

    const <span class="hljs-attr">derivative</span> = -<span class="hljs-number">2.0</span> * denominator<span class="hljs-comment">;</span>

    <span class="hljs-attr">correction</span> = func / derivative<span class="hljs-comment">;</span>
  } while (Math.abs(func) &gt; CesiumMath.EPSILON12)<span class="hljs-comment">;</span>

  if (!defined(result)) {
    return new Cartesian3(
      positionX * xMultiplier,
      positionY * yMultiplier,
      positionZ * zMultiplier,
    )<span class="hljs-comment">;</span>
  }
  <span class="hljs-attr">result.x</span> = positionX * xMultiplier<span class="hljs-comment">;</span>
  <span class="hljs-attr">result.y</span> = positionY * yMultiplier<span class="hljs-comment">;</span>
  <span class="hljs-attr">result.z</span> = positionZ * zMultiplier<span class="hljs-comment">;</span>
  return result<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-6">å¼§åº¦/è§’åº¦æ¢ç®—</h4>
<ul>
<li>Cesium.Math.toRadians(deg)</li>
<li>Cesium.Math.toDegrees(rad)</li>
</ul>
<h3 data-id="heading-7">Three.js ä¸­çš„ä¸–ç•Œåæ ‡ç³»</h3>
<p>æœ€åæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹Three.js ä¸­çš„ä¸–ç•Œåæ ‡ç³»ï¼Œçœ‹ä¸‹å›¾ï¼Œ</p>
<p>Three.js ä¸–ç•Œåæ ‡ä¸­å¿ƒç‚¹å¯ä»¥æ˜¯ä»»æ„ç‚¹ï¼Œé€šå¸¸æ”¾åœ¨å†…å®¹çš„ä¸­å¿ƒã€‚é»˜è®¤å³æ‰‹åæ ‡ç³»ï¼Œå¹¶ä¸”çº¦å®š+Yå‘ä¸Šï¼Œç›¸æœºé»˜è®¤æœ -Z æ–¹å‘çœ‹ï¼ˆæ‰€ä»¥â€œå‰æ–¹â€å¸¸è¢«ç†è§£ä¸º -Zï¼‰å‘åï¼ˆ+Zï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9d6c06074b40e5bf2e973c75413147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-57Sg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768968405&amp;x-signature=1AXKJiM3Znb7A5gzyMh0vn%2F22OU%3D" alt="image (1).png" loading="lazy"/></p>
<p align="center">three.js ä¸–ç•Œåæ ‡ç³»</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‚£ä¸ªå†™ width: 33.33% çš„å‰ç«¯ï¼Œç»ˆäºè¢« flex: 1 æ‹¯æ•‘äº†]]></title>    <link>https://juejin.cn/post/7594859060857372682</link>    <guid>https://juejin.cn/post/7594859060857372682</guid>    <pubDate>2026-01-14T04:30:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594859060857372682" data-draft-id="7594822511436775450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‚£ä¸ªå†™ width: 33.33% çš„å‰ç«¯ï¼Œç»ˆäºè¢« flex: 1 æ‹¯æ•‘äº†"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-01-14T04:30:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NEXT06"/> <meta itemprop="url" content="https://juejin.cn/user/1176918763246011"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‚£ä¸ªå†™ width: 33.33% çš„å‰ç«¯ï¼Œç»ˆäºè¢« flex: 1 æ‹¯æ•‘äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176918763246011/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NEXT06
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:30:27.000Z" title="Wed Jan 14 2026 04:30:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘Šåˆ«ç™¾åˆ†æ¯”è®¡ç®—ï¼šä»æ–‡æ¡£æµåˆ° Flex å¼¹æ€§å¸ƒå±€çš„è¿›åŒ–ä¹‹è·¯</h2>
<blockquote>
<p>åœ¨ CSS çš„ä¸–ç•Œé‡Œï¼Œå¸ƒå±€æ–¹å¼çš„æ¼”è¿›å°±åƒæ˜¯ä¸€åœºå¯¹â€œæ§åˆ¶æƒâ€çš„äº‰å¤ºæˆ˜ã€‚ä»æœ€åˆé¡ºå…¶è‡ªç„¶çš„æ–‡æ¡£æµï¼Œåˆ°ç²¾æ‰“ç»†ç®—çš„Â inline-blockï¼Œå†åˆ°å¦‚ä»Šæ¸¸åˆƒæœ‰ä½™çš„ Flexboxï¼Œæˆ‘ä»¬çš„ä»£ç å˜å¾—è¶Šæ¥è¶Šä¼˜é›…ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ éšæ³¢é€æµï¼šHTML æ–‡æ¡£æµ</h3>
<p>ä¸€åˆ‡å¸ƒå±€çš„èµ·ç‚¹ï¼Œéƒ½æ˜¯<strong>æ–‡æ¡£æµï¼ˆDocument Flowï¼‰</strong> ã€‚</p>
<p>HTML å…ƒç´ é»˜è®¤å°±åƒæ°´æµä¸€æ ·ï¼š</p>
<ul>
<li><strong>å—çº§å…ƒç´  (display: block)</strong> ï¼šå¦‚Â divï¼Œéœ¸é“åœ°ç‹¬å ä¸€è¡Œï¼Œä»ä¸Šåˆ°ä¸‹å‚ç›´æ’åˆ—ã€‚é€‚åˆåšå®¹å™¨ï¼Œä½†æ— æ³•å¹¶æ’ã€‚</li>
<li><strong>è¡Œå†…å…ƒç´  (display: inline)</strong> ï¼šå¦‚Â spanï¼Œé¡ºä»åœ°ä»å·¦åˆ°å³æ’åˆ—ï¼Œä½†å®ƒæœ‰ä¸ªè‡´å‘½å¼±ç‚¹â€”â€”<strong>æ— æ³•è®¾ç½®å®½é«˜</strong>ï¼Œè¿™è®©å®ƒä¸é€‚åˆåšå¸ƒå±€å®¹å™¨ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€ è¿›é˜¶çš„çƒ¦æ¼ï¼šInline-block çš„çˆ±ä¸æ¨</h3>
<p>ä¸ºäº†è®©å…ƒç´ æ—¢èƒ½å¹¶æ’ï¼ˆåƒ inlineï¼‰ï¼Œåˆèƒ½è®¾ç½®å®½é«˜ï¼ˆåƒ blockï¼‰ï¼Œå¼€å‘è€…ä»¬æ›¾å¤§é‡ä½¿ç”¨Â display: inline-blockã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item</span> {
    <span class="hljs-attribute">display</span>: inline-block;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">33.33%</span>; <span class="hljs-comment">/* ç»å…¸çš„ç™¾åˆ†æ¯”è®¡ç®— */</span>
}
</code></pre>
<p>è¿™ç§æ–¹æ¡ˆçœ‹ä¼¼å®Œç¾ï¼Œå®åˆ™æš—è—ç„æœºã€‚</p>
<p><strong>å®ƒçš„ç—›ç‚¹åœ¨äºï¼š</strong></p>
<ol>
<li><strong>è®¡ç®—ç¹ç</strong>ï¼šé€šè¿‡ç™¾åˆ†æ¯”ï¼ˆ33.33%ï¼‰å‡‘æˆä¸€è¡Œï¼Œæ°¸è¿œæ— æ³•è¾¾åˆ°çœŸæ­£çš„ 100% ç²¾ç¡®ã€‚</li>
<li><strong>å¹½çµç©ºç™½èŠ‚ç‚¹</strong>ï¼šHTML ä»£ç ä¸­çš„æ¢è¡Œç¬¦ä¼šè¢«æµè§ˆå™¨è§£æä¸ºç©ºæ ¼ï¼Œå¯¼è‡´åŸæœ¬è®¡ç®—å¥½çš„å¸ƒå±€è«åå…¶å¦™æ¢è¡Œã€‚</li>
</ol>
<h3 data-id="heading-3">ä¸‰ã€ é™ç»´æ‰“å‡»ï¼šFlex å¼¹æ€§å¸ƒå±€</h3>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼ŒCSS3 ä¸ºæˆ‘ä»¬å¸¦æ¥äº†<strong>å¼¹æ€§å¸ƒå±€ï¼ˆFlexboxï¼‰</strong> ã€‚å®ƒä¸å†å…³æ³¨å…·ä½“çš„ç™¾åˆ†æ¯”ï¼Œè€Œæ˜¯å…³æ³¨**â€œå‰©ä½™ç©ºé—´â€çš„åˆ†é…**ã€‚</p>
<h4 data-id="heading-4">1. å¼€å¯ä¸Šå¸è§†è§’</h4>
<p>åªéœ€åœ¨çˆ¶å®¹å™¨ä¸Šå£°æ˜ä¸€ä¸ªå±æ€§ï¼Œå³å¯æ¥ç®¡å­å…ƒç´ çš„å¸ƒå±€è§„åˆ™ï¼š</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* å¼€å¯å¼¹æ€§å¸ƒå±€ */</span>
    <span class="hljs-comment">/* å­å…ƒç´ é»˜è®¤å˜æˆâ€œå¼¹æ€§é¡¹ç›®â€ï¼Œä¸”é»˜è®¤æ°´å¹³æ’åˆ— */</span>
}
</code></pre>
<h4 data-id="heading-5">2. æ ¸å¿ƒé­”æ³•ï¼šflex: 1</h4>
<p>åœ¨æä¾›çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è¿™æ ·ä¸€è¡Œå…³é”®ä»£ç ï¼š</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* æ ¸å¿ƒä»£ç  */</span>
    <span class="hljs-attribute">background-color</span>: green;
}
</code></pre>
<p><strong>flex: 1Â åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<p>å®ƒç›¸å½“äºå‘Šè¯‰æµè§ˆå™¨ï¼šâ€œä¸è¦ç®¡æˆ‘åŸæœ¬æœ‰å¤šå®½ï¼ŒæŠŠçˆ¶å®¹å™¨å‰©ä¸‹çš„ç©ºé—´å¹³å‡åˆ†ç»™æˆ‘ã€‚â€</p>
<ul>
<li>å¦‚æœæœ‰ 3 ä¸ªÂ .itemï¼Œæ¯ä¸ªç›’å­è‡ªåŠ¨è·å¾— 1/3 çš„å®½åº¦ã€‚</li>
<li>å¦‚æœæœ‰ 4 ä¸ªÂ .itemï¼Œæ¯ä¸ªè‡ªåŠ¨è·å¾— 1/4 çš„å®½åº¦ã€‚</li>
</ul>
<p><strong>å¯¹æ¯”ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æ— éœ€è®¡ç®—</strong>ï¼šä¸éœ€è¦æ‰‹å†™Â 33.33%Â æˆ–Â 25%ã€‚</li>
<li><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šæ— è®ºå¢åŠ è¿˜æ˜¯å‡å°‘å­å…ƒç´ ï¼Œå¸ƒå±€è‡ªåŠ¨å¡«æ»¡æ•´è¡Œï¼Œä¸ä¼šæœ‰ç¼éš™ï¼Œä¹Ÿä¸ä¼šæº¢å‡ºã€‚</li>
</ul>
<h3 data-id="heading-6">å››ã€ æ€»ç»“</h3>
<p>ä»Â inline-blockÂ åˆ°Â flexï¼Œä¸ä»…ä»…æ˜¯å±æ€§çš„å˜åŒ–ï¼Œæ›´æ˜¯å¸ƒå±€æ€ç»´çš„è½¬å˜ã€‚</p>
<ul>
<li><strong>ä¼ ç»Ÿå¸ƒå±€</strong>ï¼šæˆ‘ä»¬éœ€è¦åšç®—æœ¯é¢˜ï¼Œå°å¿ƒç¿¼ç¿¼åœ°è®¡ç®—åƒç´ å’Œç™¾åˆ†æ¯”ã€‚</li>
<li><strong>å¼¹æ€§å¸ƒå±€</strong>ï¼šæˆ‘ä»¬å°†æ§åˆ¶æƒäº¤ç»™æµè§ˆå™¨ï¼Œå£°æ˜â€œåˆ†é…è§„åˆ™â€ï¼ˆå¦‚Â flex: 1ï¼‰ï¼Œè®©å¸ƒå±€è‡ªåŠ¨é€‚åº”å®¹å™¨ã€‚</li>
</ul>
<p>å‰ç«¯å¼€å‘å°±æ˜¯è¿™æ ·ï¼Œç”¨æœ€å°‘çš„ä»£ç ï¼Œå®ç°æœ€çµæ´»çš„æ•ˆæœã€‚ä¸‹æ¬¡å¸ƒå±€æ—¶ï¼Œè®°å¾—ç»™å®¹å™¨åŠ ä¸€ä¸ªÂ display: flexã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[android è€—ç”µä¼˜åŒ– ç¬”è®°]]></title>    <link>https://juejin.cn/post/7594745643892473891</link>    <guid>https://juejin.cn/post/7594745643892473891</guid>    <pubDate>2026-01-14T05:40:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594745643892473891" data-draft-id="7594728203257954338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="android è€—ç”µä¼˜åŒ– ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-14T05:40:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            android è€—ç”µä¼˜åŒ– ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:40:42.000Z" title="Wed Jan 14 2026 05:40:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Androidç³»ç»Ÿå¯¹ç¨‹åºçš„è€—ç”µè¿›è¡Œç»Ÿè®¡çš„åŠŸèƒ½å¤§è‡´åŸç†å°±æ˜¯ï¼Œæ ¹æ®ä¸åŒæ¨¡å—ï¼Œå®šä¹‰ä¸åŒè®¡ç®—è§„åˆ™ï¼Œç»“åˆpower_profile.xmlæ–‡ä»¶ä¸‹å‚å•†è‡ªå·±å®šä¹‰çš„æ¯ä¸ªæ¨¡å—çš„åŠŸè€—å¤§å°ï¼Œè¿›è¡Œç»Ÿè®¡è®¡ç®—çš„ã€‚</p>
<p>ç¨‹åºå¯ä»¥é€šè¿‡å›ºå®šé¢‘ç‡æ¥é‡‡é›†æ€»ç”µé‡æ¶ˆè€—ï¼Œæ¯”å¦‚10min/æ¬¡ï¼Œç„¶åä¸ŠæŠ¥æœåŠ¡å™¨</p>
<pre><code class="hljs language-ini" lang="ini">  int <span class="hljs-attr">beforeBattery</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  void startBatteryUsageMonitor(){
      BatteryManager <span class="hljs-attr">mBatteryManager</span> = 
          ï¼ˆBatteryManagerï¼‰context.getSystemService(Context.BATTERY_SERVICE)<span class="hljs-comment">;</span>
       
      //è°ƒåº¦çº¿ç¨‹æ± æ¯éš”10minæ‰§è¡Œ1æ¬¡ç”µé‡ç»Ÿè®¡ä»»åŠ¡
      ScheduledExecutorService.scheduleAtFixedRate(new Runnable() 
                @override
                public void run() {
                    int <span class="hljs-attr">battery</span> =mBatteryManager.getIntProperty(BatteryManager,BATTERy_PROPERTY CAPACITY)<span class="hljs-comment">;</span>
                    if(beforeBattery != 0){
                   //å½“å‰ç”µé‡çš„åˆ†ä½ç½®å‡å»10minå‰ç”µé‡çš„åˆ†ä½ç½®å°±æ˜¯è¿™ä¸ªæ—¶é—´æ®µçš„ç”µé‡æ¶ˆè€—
                   int <span class="hljs-attr">batteryUsage</span> = beforeBattery-battery<span class="hljs-comment">;report(batteryUsage);</span>
                )
                <span class="hljs-attr">beforeBattery</span> = battery<span class="hljs-comment">;</span>
         }, 0,10*60,TimeUnit.SECONDS)<span class="hljs-comment">;</span>
  }
</code></pre>
<p>åœ¨æ‰‹æœºå……ç”µæ—¶ï¼Œæ”¾å¼ƒå¯¹è€—ç”µç»Ÿè®¡</p>
<pre><code class="hljs language-scss" lang="scss">    private BroadcastReceiver batteryReceiver = new <span class="hljs-built_in">BroadcastReceiver</span>(){
            <span class="hljs-keyword">@override</span>
            public void onReceive(Context context,Intent intent){
                String action = intent<span class="hljs-selector-class">.getAction</span>();
                <span class="hljs-comment">//å……ç”µè¿æ¥</span>
                <span class="hljs-built_in">if</span>(action.equals(Intent.ACTION_POWER_CONNECTED)){
                    <span class="hljs-comment">//æš‚åœç»Ÿè®¡</span>
                    <span class="hljs-built_in">stopBatteryUsageMonitor</span>();
                <span class="hljs-comment">//å……ç”µæ–­å¼€    </span>
                }else <span class="hljs-built_in">if</span>(action.equals(Intent.ACTION_POWER_DISCONNECTED)){
                    <span class="hljs-built_in">startBatteryUsageMonitor</span>();
                }
            }
    }
</code></pre>
<p>å¤„äºåå°æ—¶ä¹Ÿåœæ­¢ç»Ÿè®¡ï¼Œåœ¨applicationä¸­æˆ‘ä»¬å¯ä»¥ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">    int activityCount = <span class="hljs-number">0</span> <span class="hljs-comment">// å½“å‰å‰å°çš„activityæ•°é‡</span>
    <span class="hljs-built_in">registerActivityLifecycleCallbacks</span>(new Application.ActivityLifecycleCallbacks(){
        <span class="hljs-keyword">@override</span>
        public void onActivityResume(Activity activity,Bundle saveInstanceState){
            <span class="hljs-built_in">if</span>(activityCount  == <span class="hljs-number">0</span>){
              <span class="hljs-built_in">startBatteryUsageMonitor</span>();
            }
            activityCount++;
        }
    
        <span class="hljs-keyword">@override</span>
        public void onActivityPause(Activity activity){
            activityCount--;
            <span class="hljs-built_in">if</span>(activityCount  == <span class="hljs-number">0</span>){
                <span class="hljs-comment">//æš‚åœç»Ÿè®¡</span>
              <span class="hljs-built_in">stopBatteryUsageMonitor</span>();
            }
            
        }
    
    })
</code></pre>
<p>å…¶ä»–ï¼š</p>
<p>åˆç†è¿ç”¨<strong>JobScheduler æˆ– WorkManager è¿›è¡Œä»»åŠ¡è°ƒåº¦</strong>ï¼Œåˆç†è¿ç”¨<strong>JobServiceã€ForegroundService</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AOSP15çš„Zygoteå¯åŠ¨æµç¨‹æºç åˆ†æ]]></title>    <link>https://juejin.cn/post/7594863660281249811</link>    <guid>https://juejin.cn/post/7594863660281249811</guid>    <pubDate>2026-01-14T04:06:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594863660281249811" data-draft-id="7594680729339674687" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AOSP15çš„Zygoteå¯åŠ¨æµç¨‹æºç åˆ†æ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-14T04:06:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å°æ½‡"/> <meta itemprop="url" content="https://juejin.cn/user/4212984288383214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AOSP15çš„Zygoteå¯åŠ¨æµç¨‹æºç åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984288383214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å°æ½‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:06:16.000Z" title="Wed Jan 14 2026 04:06:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Zygoteï¼ˆå—ç²¾åµè¿›ç¨‹ï¼‰æ˜¯ Android ç³»ç»Ÿä¸­æ‰€æœ‰ Java åº”ç”¨ç¨‹åºè¿›ç¨‹åŠ SystemServer çš„çˆ¶è¿›ç¨‹ã€‚æ‰®æ¼”â€œå­µåŒ–å™¨â€è§’è‰²ï¼Œè´Ÿè´£å­µåŒ–ç³»ç»Ÿä¸­æ‰€æœ‰åº”ç”¨ç¨‹åºè¿›ç¨‹ï¼Œé€šè¿‡ fork æœºåˆ¶å’Œå†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰æŠ€æœ¯ï¼ŒåŠ é€Ÿè¿›ç¨‹åˆ›å»ºå¹¶å‡å°‘å†…å­˜å ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ</h2>
<p>Zygote çš„å¯åŠ¨ç»å†äº†ä» Linux å†…æ ¸ç©ºé—´ åˆ° Native C++ ç©ºé—´ï¼Œæœ€åè¿›å…¥ Java ç©ºé—´ çš„è¿‡ç¨‹ã€‚</p>
<ol>
<li><strong>init è¿›ç¨‹</strong>ï¼šè§£æ .rc è„šæœ¬ï¼Œå¯åŠ¨ app_process äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li>
<li><strong>Native é˜¶æ®µ</strong>ï¼šåˆå§‹åŒ– AndroidRuntimeï¼Œå¯åŠ¨ ART è™šæ‹Ÿæœºå¹¶æ³¨å†Œ JNIã€‚</li>
<li><strong>Java é˜¶æ®µ</strong>ï¼šZygoteInit é¢„åŠ è½½èµ„æºï¼Œå¯åŠ¨ SystemServerã€‚</li>
<li><strong>å¾ªç¯é˜¶æ®µ</strong>ï¼šè¿›å…¥ ZygoteServer å¾ªç¯ï¼Œç­‰å¾… Socket æ¶ˆæ¯å­µåŒ–åº”ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€é˜¶æ®µï¼šNative å±‚å¯åŠ¨ (app_process)</h2>
<h3 data-id="heading-2">1. å…¥å£ï¼šapp_main.cpp</h3>
<p><strong>æºç è·¯å¾„</strong>ï¼š<code>frameworks/base/cmds/app_process/app_main.cpp</code></p>
<p><code>init</code>è¿›ç¨‹æ ¹æ® <code>init.zygote64.rc</code> ä¸­çš„é…ç½®å¯åŠ¨ã€‚<code>main</code> å‡½æ•°æ˜¯èµ·ç‚¹ï¼š</p>
<ul>
<li>è¯†åˆ«èº«ä»½ï¼šé€šè¿‡åˆ¤æ–­å‚æ•°ä¸­æ˜¯å¦æœ‰ --zygote æ¥ç¡®å®šè‡ªå·±ä½œä¸º Zygote å¯åŠ¨ã€‚</li>
<li>å‡†å¤‡å‚æ•°ï¼šæŒ‡å®šä¸»ç±»åä¸º com.android.internal.os.ZygoteInitã€‚</li>
<li>è°ƒç”¨ Runtimeï¼š</li>
</ul>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// å¯åŠ¨ AndroidRuntime</span>
runtime.<span class="hljs-built_in">start</span>(<span class="hljs-string">"com.android.internal.os.ZygoteInit"</span>, args, zygote);
</code></pre>
<h3 data-id="heading-3">2. æ ¸å¿ƒæ¡¥æ¢ï¼šAndroidRuntime.cpp</h3>
<p><strong>æºç è·¯å¾„</strong>ï¼š<code>frameworks/base/core/jni/AndroidRuntime.cpp</code></p>
<p><code>runtime.start</code> å‡½æ•°å®Œæˆäº† Native åˆ° Java çš„æƒŠé™©ä¸€è·ƒï¼š</p>
<ul>
<li><strong>startVm()</strong>ï¼šå¯åŠ¨ <strong>ART (Android Runtime)</strong>ã€‚é…ç½®å †å¤§å°ã€JIT ç¼–è¯‘æ¨¡å¼ã€GC ç­–ç•¥ç­‰ã€‚</li>
<li><strong>startReg()</strong>ï¼šæ³¨å†Œç³»ç»Ÿæ ¸å¿ƒ JNI æ–¹æ³•ã€‚è¿™ä½¿å¾— Java ä»£ç å¯ä»¥è°ƒç”¨ Native çš„é©±åŠ¨æ¥å£å’Œåº•å±‚</li>
<li><strong>JNI è°ƒç”¨</strong></li>
</ul>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AndroidRuntime::start</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* className, <span class="hljs-type">const</span> Vector&lt;String8&gt;&amp; options, <span class="hljs-type">bool</span> zygote)</span>
</span>{
    ......

    <span class="hljs-type">char</span>* slashClassName = <span class="hljs-built_in">toSlashClassName</span>(className != <span class="hljs-literal">NULL</span> ? className : <span class="hljs-string">""</span>);
    jclass startClass = env-&gt;<span class="hljs-built_in">FindClass</span>(slashClassName);
    <span class="hljs-keyword">if</span> (startClass == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-built_in">ALOGE</span>(<span class="hljs-string">"JavaVM unable to locate class '%s'\n"</span>, slashClassName);
        <span class="hljs-comment">/* keep going */</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ‰¾åˆ° Java å±‚çš„ ZygoteInit ç±»åŠå…¶ main æ–¹æ³•</span>
        jmethodID startMeth = env-&gt;<span class="hljs-built_in">GetStaticMethodID</span>(startClass, <span class="hljs-string">"main"</span>,
            <span class="hljs-string">"([Ljava/lang/String;)V"</span>);
        <span class="hljs-keyword">if</span> (startMeth == <span class="hljs-literal">NULL</span>) {
            <span class="hljs-built_in">ALOGE</span>(<span class="hljs-string">"JavaVM unable to find main() in '%s'\n"</span>, className);
            <span class="hljs-comment">/* keep going */</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ­£å¼è¿›å…¥ Java ä¸–ç•Œ</span>
            env-&gt;<span class="hljs-built_in">CallStaticVoidMethod</span>(startClass, startMeth, strArray);
        }
    }
  }

    ......

</code></pre>
<h2 data-id="heading-4">ä¸‰ã€ ç¬¬äºŒé˜¶æ®µï¼šJava å±‚åˆå§‹åŒ– (ZygoteInit)</h2>
<p><strong>æºç è·¯å¾„</strong>ï¼š<code>frameworks/base/core/java/com/android/internal/os/ZygoteInit.java</code></p>
<p>è¿›å…¥ <strong>ZygoteInit.main()</strong> åï¼ŒZygote å¼€å§‹æ„å»ºâ€œå—ç²¾åµâ€çš„åŸºå› ï¼š</p>
<h3 data-id="heading-5">1. é¢„åŠ è½½èµ„æº (Preload)</h3>
<p>è¿™æ˜¯ Android å¯åŠ¨ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œé€šè¿‡ preload() æ–¹æ³•ï¼š</p>
<ul>
<li><strong>preloadClasses()</strong>ï¼šä» /system/etc/preloaded-classes åŠ è½½æ•°åƒä¸ªæ ¸å¿ƒ Java ç±»ã€‚</li>
<li><strong>preloadResources()</strong>ï¼šåŠ è½½ç³»ç»Ÿ Framework çš„èµ„æºæ–‡ä»¶ï¼ˆå›¾æ ‡ã€å¸ƒå±€ï¼‰ã€‚</li>
<li><strong>preloadSharedLibraries()</strong>ï¼šåŠ è½½å¸¸ç”¨çš„åŠ¨æ€é“¾æ¥åº“ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå­è¿›ç¨‹åœ¨ fork æ—¶ç›´æ¥å…±äº«è¿™äº›å†…å­˜ï¼Œåªæœ‰åœ¨ä¿®æ”¹æ—¶æ‰ä¼šç‰©ç†å¤åˆ¶ï¼ˆ<strong>COW æœºåˆ¶</strong>ï¼‰</li>
</ul>
<h3 data-id="heading-6">2. åˆ›å»º ZygoteServer (Socket)</h3>
<p>Zygote ä¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>zygote</code> çš„ <strong>LocalServerSocket</strong>ï¼Œç”¨äºæ¥æ”¶æ¥è‡ª <code>ActivityManagerService (AMS)</code> çš„è¿›ç¨‹å¯åŠ¨è¯·æ±‚ã€‚</p>
<h2 data-id="heading-7">å››ã€ ç¬¬ä¸‰é˜¶æ®µï¼šå­µåŒ– SystemServer</h2>
<p>Zygote åˆå§‹åŒ–å®Œæˆåï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡å°±æ˜¯å¯åŠ¨ SystemServerï¼Œå®ƒæ˜¯ Android å¤§è„‘çš„è½½ä½“ã€‚</p>
<ol>
<li>
<p>Fork è¿›ç¨‹ï¼šè°ƒç”¨ Zygote.forkSystemServer()ã€‚</p>
</li>
<li>
<p>èº«ä»½åˆ†åŒ–ï¼š</p>
</li>
</ol>
<ul>
<li>çˆ¶è¿›ç¨‹ (Zygote)ï¼šç»§ç»­æ‰§è¡Œ runSelectLoop ç›‘å¬ Socketã€‚</li>
<li>å­è¿›ç¨‹ (SystemServer)ï¼š
<ul>
<li>è°ƒç”¨ handleSystemServerProcessã€‚</li>
<li>å…³é—­ç»§æ‰¿è‡ª Zygote çš„ä¸éœ€è¦çš„ Socket å’Œèµ„æºã€‚</li>
<li>æœ€ç»ˆé€šè¿‡åå°„è°ƒç”¨ com.android.server.SystemServer.main()ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-8">äº”ã€ ç¬¬å››é˜¶æ®µï¼šè¿è¡Œå¾ªç¯ (ZygoteServerã€ZygoteInit)</h2>
<p>Zygote æœ€åä¼šé€šè¿‡ <code>runSelectLoop()</code> è¿›å…¥é˜»å¡ç­‰å¾…çŠ¶æ€ï¼š
<strong>æºç è·¯å¾„</strong>ï¼š<code>frameworks/base/core/java/com/android/internal/os/ZygoteServer.java</code></p>
<pre><code class="hljs language-java" lang="java">Runnable <span class="hljs-title function_">runSelectLoop</span><span class="hljs-params">(String abiList)</span> {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// ä½¿ç”¨ poll/select ç›‘å¬ Socket æ¶ˆæ¯</span>
        StructPollfd[] pollFds = ...;
        Os.poll(pollFds, -<span class="hljs-number">1</span>);
        
        <span class="hljs-keyword">while</span>(-pollIndex &gt;= <span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span> (pollIndex == <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// å½“æ”¶åˆ° AMS å‘æ¥çš„å‘½ä»¤æ—¶</span>
                <span class="hljs-type">ZygoteConnection</span> <span class="hljs-variable">newPeer</span> <span class="hljs-operator">=</span> acceptCommandPeer(abiList);
                peers.add(newPeer);
                socketFDs.add(newPeer.getFileDescriptor());
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pollIndex &lt; usapPoolEventFDIndex) {

                <span class="hljs-type">ZygoteConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> peers.get(pollIndex);
                <span class="hljs-type">boolean</span> <span class="hljs-variable">multipleForksOK</span> <span class="hljs-operator">=</span> !isUsapPoolEnabled()
                                    &amp;&amp; ZygoteHooks.isIndefiniteThreadSuspensionSafe();
                <span class="hljs-comment">// æ‰§è¡Œ fork é€»è¾‘</span>
                <span class="hljs-keyword">final</span> <span class="hljs-type">Runnable</span> <span class="hljs-variable">command</span> <span class="hljs-operator">=</span> connection.processCommand(<span class="hljs-built_in">this</span>, multipleForksOK);

                <span class="hljs-keyword">if</span> (mIsForkChild) {
                    <span class="hljs-keyword">if</span> (command == <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"command == null"</span>);
                    }
                    <span class="hljs-keyword">return</span> command;
                 } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (command != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"command != null"</span>);
                    }
                    <span class="hljs-keyword">if</span> (connection.isClosedByPeer()) {
                        connection.closeSocket();
                        peers.remove(pollIndex);
                        socketFDs.remove(pollIndex);
                        }
                    }
                 }
                        
        }

    }
}
</code></pre>
<p>runå­è¿›ç¨‹æ‰§è¡Œåº”ç”¨å…¥å£
<strong>æºç è·¯å¾„</strong>ï¼š<code>frameworks/base/core/java/com/android/internal/os/ZygoteInit.java</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] argv)</span> {
        ......
        <span class="hljs-keyword">if</span> (caller != <span class="hljs-literal">null</span>) {
            caller.run();
        }
    }
</code></pre>
<h2 data-id="heading-9">å…­ã€ æ€»ç»“</h2>
<p>Zygote çš„å¯åŠ¨æ˜¯ â€œ<strong>ç”±åšå˜è–„</strong>â€ çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li><strong>ç”±åš</strong>ï¼šå®ƒåœ¨å¯åŠ¨æ—¶åŠ è½½äº†å¤§é‡çš„ç±»å’Œèµ„æºï¼Œå¯¼è‡´è‡ªèº«å ç”¨äº†è¾ƒå¤§çš„å†…å­˜ã€‚</li>
<li><strong>å˜è–„</strong>ï¼šç”±äº Linux çš„ fork æœºåˆ¶ï¼Œåç»­å¯åŠ¨çš„æ‰€æœ‰ App è¿›ç¨‹éƒ½å…±äº« Zygote çš„è¿™ä¸€ä»½å†…å­˜ç©ºé—´(Copy-on-Writeæœºåˆ¶ï¼ŒCOW)ã€‚</li>
</ol>
<p>åœ¨ AOSP 15 ä¸­ï¼Œè¿™ç§è®¾è®¡ä¾ç„¶æ˜¯ç³»ç»Ÿå“åº”é€Ÿåº¦å’Œå†…å­˜æ•ˆç‡çš„åŸºç¡€ã€‚åŒæ—¶ AOSP 15 è¿›ä¸€æ­¥ä¼˜åŒ–äº† ZygoteCommandBuffer æœºåˆ¶ï¼Œå‡å°‘äº† fork è¿‡ç¨‹ä¸­çš„è·¨å±‚è°ƒç”¨å¼€é”€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›½å†…ç½‘ç»œä½“éªŒClaudeå…¨ç³»åˆ—ï¼Kiro AIå¼€å‘å·¥å…·å®æµ‹]]></title>    <link>https://juejin.cn/post/7594242987598659611</link>    <guid>https://juejin.cn/post/7594242987598659611</guid>    <pubDate>2026-01-12T09:17:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594242987598659611" data-draft-id="7594270467030106139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›½å†…ç½‘ç»œä½“éªŒClaudeå…¨ç³»åˆ—ï¼Kiro AIå¼€å‘å·¥å…·å®æµ‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC,Claude"/> <meta itemprop="datePublished" content="2026-01-12T09:17:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›½å†…ç½‘ç»œä½“éªŒClaudeå…¨ç³»åˆ—ï¼Kiro AIå¼€å‘å·¥å…·å®æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:17:30.000Z" title="Mon Jan 12 2026 09:17:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¬æœ‹å‹è¯´Kiroç”¨ç€ä¹Ÿè¿˜ä¸é”™ï¼Œæœ‰å…è´¹é¢åº¦ï¼Œå›½å†…ç½‘ç»œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œå€¼å¾—ä½“éªŒä¸€ä¸‹</p>
<h2 data-id="heading-1">å®˜ç½‘ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro.dev%2F" target="_blank" title="https://kiro.dev/" ref="nofollow noopener noreferrer">kiro.dev/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06417f61eed447e3b711d820785563d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=KGPAEY0Poar13c9AlcEbBxGkdHI%3D" alt="" loading="lazy"/></p>
<p>å®˜æ–¹ä»‹ç»æ˜¯ä¸€æ¬¾é¢å‘ â€œä»åŸå‹åˆ°ç”Ÿäº§ç¯å¢ƒâ€  AI æ™ºèƒ½ä½“å¼€å‘å·¥å…·</p>
<p>Kiro ç”± äºšé©¬é€Šäº‘ç§‘æŠ€ï¼ˆAWSï¼‰ ç¤¾åŒºå›¢é˜Ÿæ‰“é€ ï¼Œæ˜¯ AWS å¸ƒå±€ AI è¾…åŠ©å¼€å‘é¢†åŸŸçš„æ ¸å¿ƒäº§å“</p>
<p>å¤§å…¬å¸çš„æ ‡é…æ“ä½œï¼Œåˆ«çš„å¤§å‚å¼€å‘äº†è‡ªå·±çš„ç¼–è¾‘å™¨è‡ªå·±å…¬å¸ä¹Ÿéœ€è¦æœ‰è‡ªå·±å…¬å¸çš„å¯¹åº”äº§å“ï¼Œç„¶åå†å¹ä¸€æ³¢ç”¨äº†ä»€ä¹ˆè®¾è®¡ç†å¿µï¼Œæ›´ç‰›é€¼çš„æ™ºèƒ½ä½“æˆ–è€…ä»€ä¹ˆæ¶æ„ï¼Œèƒ½æœ‰æ•ˆæå‡æ•ˆç‡ï¼Œå·´æ‹‰å·´æ‹‰...</p>
<h2 data-id="heading-2">å®‰è£…ç™»å½•</h2>
<p>ä¸‹è½½å®‰è£…å¥½ä»¥åï¼Œæ‰“å¼€çš„é¦–é¡µæ˜¯è¿™æ ·çš„ï¼Œæœ‰ä¸ªå°å¹½çµåœ¨é‚£ï¼Œè¿˜è›®ä¸é”™çš„</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/923c1fc77b1f40858311de3d554290bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=Fr2ymgXq0mGxeTHwMAKeaeuHh60%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥ä½¿ç”¨Googleè´¦å·ç™»å½•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f394f4864494815a32c3848f7838619~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=6hjbhISEU8%2Blav%2FY4PrQuqko0vo%3D" alt="" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåï¼Œå¹½çµå°±é£˜èµ·æ¥äº†ï¼Œæœ‰ç‚¹æ„æ€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84923728d5ad466eb959db24633509f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=VB0FWFGkTJWIrFttnrLZAQ3clEE%3D" alt="" loading="lazy"/></p>
<p>å¯¼å…¥é»˜è®¤é…ç½®ï¼Œä¾ç„¶é€‰æ‹©ä¸å¯¼å…¥ï¼Œä»ç©ºç™½å¼€å§‹ï¼Œè¿™æ ·çœ‹å®˜æ–¹æœ‰ä»€ä¹ˆé»˜è®¤ç»§æ‰¿çš„åŠŸèƒ½æˆ–è€…ç‰¹è‰²åŠŸèƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/793c47661ca941059424bdc74ed6953d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=lnwk1%2BqjAK8BXK50bg2MXD1bWL8%3D" alt="" loading="lazy"/></p>
<p>é»˜è®¤æš—è‰²ä¸»é¢˜ï¼Œè®¾ç½®å®Œæ¯•ï¼Œæ‰“å¼€ä¸»é¡µé¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac05d2c4d02c42b0a0ad682c374b201d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=fYTZCZJudWGVBzyBlTT0V5S%2B%2FJs%3D" alt="" loading="lazy"/></p>
<p>é¡µé¢æ•´ä½“ç´«ç´«çš„ï¼Œéš¾é“æ˜¯ä¸ªåŸºä½¬è®¾è®¡å¸ˆè®¾è®¡çš„å—</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1305ed7f9fc34db981c0c2a9ea1c92a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=s1HnCW%2FazKKy6oVTZBY4MUBuSjI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">é¢åº¦æƒ…å†µ</h2>
<p>æ‰“å¼€ç•Œé¢çœ‹åˆ°å³ä¸‹è§’æœ‰é¢åº¦å†…å®¹ï¼Œè¿™ä¹ˆç›´æ¥çš„æ˜¾ç¤ºä½™é¢æ”¾åˆ°å³ä¸‹è§’çš„è®¾è®¡è¿˜çœŸå°‘è§ï¼Œä¼¼ä¹åœ¨æ—¶åˆ»æé†’ç€ï¼Œåˆ«å¿˜äº†æœ‰ç©ºçœ‹ä¸€ä¸‹ï¼ŒåŠæ—¶å……å€¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b714c0d594d846e989a7897f194386a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=7fg%2F7TOQh7vhXzudI3EiNBuDpFw%3D" alt="" loading="lazy"/></p>
<p>é»˜è®¤å…è´¹è´¦æˆ·30å¤©500ç§¯åˆ†é¢åº¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0565580cc1f34ae2beca2cd8e1e7c56d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=7fQh5%2F2M00NXZekWuTcpFeqmRmU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">é¡¹ç›®å®æµ‹</h2>
<p>è€è§„çŸ©ï¼Œç›´æ¥ä¸Šé¡¹ç›®å¼€æ•´ï¼Œå®æµ‹ä¸€ä¸‹ï¼Œçœ‹çœ‹æ•´ä½“æ˜“ç”¨æ€§å’Œæ™ºèƒ½æ•ˆæœå¦‚ä½•</p>
<p>å†…ç½®æ¨¡å‹çœŸæ£’å•Šï¼ŒCluade é«˜ç‰ˆæœ¬ç³»åˆ—éƒ½æœ‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57ba088e45974c788ffefa19f0b32cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=aEesUftUhSPWN1k6POD8C2WaxZI%3D" alt="" loading="lazy"/></p>
<p>æ‰“å¼€é¡¹ç›®åï¼Œæç¤ºä¸¤ç§æ¨¡å¼ï¼Œ Vibe å’Œ Spec</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9741ea7f0b6445d988fe970101c1b401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=Vk%2B3DUA4XoKy12VSyONNAqKU9c0%3D" alt="" loading="lazy"/></p>
<p>å› ä¸ºæ˜¯æ”¹shiå±±é¡¹ç›®ä¸­çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä½¿ç”¨ Vibe æ¨¡å¼ï¼Œä¸€è¾¹èŠä¸€è¾¹çœ‹æ•ˆæœå§</p>
<p>æ‰“å¼€vueæ–‡ä»¶åï¼Œæ²¡æœ‰å†…ç½®ä»£ç é«˜äº®ï¼Œä¹Ÿæ²¡æœ‰ä»£ç æ£€æµ‹å’Œæç¤ºï¼Œè™½ç„¶å¯ä»¥åˆ†åˆ†é’Ÿä¸‹ä¸€ä¸ªï¼Œè¿™æ–¹é¢åšçš„è¿™ç‚¹ä¸å¤ªæ™ºèƒ½ï¼Œå¯èƒ½å®˜æ–¹çš„è®¾è®¡å°±æ˜¯é»˜è®¤æ’ä»¶ç­‰é…ç½®éƒ½æ˜¯ä»å…¶ä»–ç¼–è¾‘å™¨å¯¼å…¥çš„ï¼Œè¦æ˜¯ç”¨æˆ·ç›´æ¥å°±ç”¨è¿™ä¸ªç¼–è¾‘å™¨ä½œä¸ºç¬¬ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2df0a2c7dfa5433b872f04185ae791f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=3xRiEn5rCQ4Sn3yT9w359JqY0ks%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">å…ˆåšä¸ªéœ€æ±‚</h3>
<p>ä¸‹é¢æ˜¯æˆ‘çš„éœ€æ±‚æç¤ºï¼Œé‡Œé¢è´´äº†ä¸€ä¸ªæˆªå›¾ï¼Œè®©å®ƒå®ç°ä»¥ä¸‹</p>
<blockquote>
<p>è¿™ä¸ªé¡µé¢çš„æ ‡é¢˜å³è¾¹æ·»åŠ ä¸‹æ‹‰èœå•ï¼Œåªæœ‰ç®­å¤´å›¾æ ‡ï¼Œç‚¹å‡»åæ˜¾ç¤ºä¸€ä¸ªé€‰é¡¹â€œæœé˜³åŒºäººäº‹è€ƒè¯•æ™ºèƒ½æŒ‡æŒ¥è°ƒåº¦ä¸€ä½“åŒ–å¹³å°â€ï¼Œç‚¹å‡»åè·³è½¬åˆ°æ–°é¡µé¢ï¼Œæ–°é¡µé¢åœ°å€ä¸º view/Platform/index.vue ï¼Œé¡µé¢ä¸­å±•ç¤ºå›¾ç‰‡ä¸ºindex.vueåŒçº§ç›®å½•ä¸‹ img1.pngï¼Œå…¨å±å±•ç¤º</p>
</blockquote>
<p>å¾ˆç®€å•çš„éœ€æ±‚ï¼Œéœ€è¦ç†Ÿæ‚‰æˆªå›¾ä¸­è¡¨è¾¾çš„ä½ç½®æ˜¯å“ªï¼Œç„¶åæ·»åŠ ä¸‹æ‹‰èœå•ï¼Œç„¶åæ·»åŠ é€‰é¡¹ï¼Œæœ€åæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œè·³è½¬åˆ°æ–°é¡µé¢ï¼Œæ–°å¢ä¸€ä¸ªè·¯ç”±é…ç½®ï¼Œç„¶ååœ¨æ–°é¡µé¢ä¸­æ·»åŠ imgæ ‡ç­¾æŠŠå›¾ç‰‡å±•ç¤ºå‡ºæ¥ï¼Œå®½é«˜100%å±•ç¤º</p>
<p>åˆšå¼€å§‹éœ€è¦å…ˆåˆ†æé¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ä½ç½®ï¼Œç¨ç­‰ä¸€ä¼šå„¿çœ‹çœ‹æƒ…å†µ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d8d09a2bccf4dbf862a0c8fb5ecbf06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=xnujAag3U0uMsyMYmobZLWANKu8%3D" alt="" loading="lazy"/></p>
<p>å¤§æ¦‚è¿‡äº†å‡ åˆ†é’Ÿï¼ŒKiroä»£ç æ”¹å®Œäº†ï¼Œç„¶åè‡ªåŠ¨è¿è¡Œ npm run serve å‘½ä»¤è¿è¡Œæµ‹è¯•é¡¹ç›®ï¼Œè¿è¡Œå‘½ä»¤ä¼šå‡ºç°ç­‰å¾…æƒ…å†µï¼Œéœ€è¦æ‰‹åŠ¨å…è®¸æˆ–æ‹’ç»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00f903fa48894c9fb62a95f87af6483c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=p%2Fdpg8oFeJv7MEEvMoQyYOQIrII%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡ä»£ç è¿è¡Œå®Œäº†æ—¶é—´å¤§æ¦‚8minå·¦å³ï¼Œæœ€åç´«è‰²çš„å­—å¯ä»¥å¯ä»¥ç›´æ¥ç‚¹å‡»ï¼Œç„¶åä¼šè‡ªåŠ¨æ‰“å¼€é»˜è®¤æµè§ˆå™¨å¹¶è·³è½¬å¯¹åº”åœ°å€ï¼Œè¿™ä¸ªå°åŠŸèƒ½ç‚¹ä¸é”™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b01c84c40234bd2874a9e79b4a4f400~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=sQoPHqJO5g4bPoUL2FACOSJn6XY%3D" alt="" loading="lazy"/></p>
<p>è¯´çš„å¤´å¤´æ˜¯é“ï¼ŒåŠ äº†ä»€ä¹ˆä¸œè¥¿ï¼ŒéªŒè¯æ²¡é—®é¢˜ï¼Œæˆ‘æ‰“å¼€å®ƒæä¾›çš„ localhost:8081 åœ°å€ï¼ŒåŠ çš„ä¸œè¥¿å‘¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1f275c9bd94d1da944502bc7460d74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=Cog6OPsjL6TCn3EMF9wDXUPChig%3D" alt="" loading="lazy"/></p>
<p>æŸ¥äº†ä»£ç åŸæ¥æ˜¯åŠ é”™æ–‡ä»¶ä½ç½®äº†ï¼Œæ²¡èƒ½å®Œå…¨ç†è§£ä»£ç ï¼Œä¹Ÿæ€¨ä¸å¾—AIï¼Œå› ä¸ºè°æ¥äº†éƒ½ä¼šæ‰¾é”™ä½ç½®ï¼Œè¦ä¸æ˜¯é¡µé¢ç‚¹å‡»éªŒè¯å’Œç»“åˆä»£ç æ–‡ä»¶çœ‹ï¼Œæˆ‘ä¹Ÿæ‰¾ä¸åˆ°ï¼Œè¿™å°±æ˜¯ç¥–ä¼ shiå±±é¡¹ç›®çš„é­…åŠ›ï¼Œé¬¼æ¥äº†éƒ½å‘æ„</p>
<p>æˆ‘æ‰¾äº†å¯¹åº”æ–‡ä»¶å’Œä½ç½®åï¼Œæ¥ç»­æç¤ºå®ƒï¼ŒæŠŠé€‰ä¸­çš„ä»£ç ç›¸å…³åŠŸèƒ½ï¼ŒåŠ åˆ°å¯¹åº”çš„ä½ç½®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f416e840c364132a52f20fa49425eb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=Wl5wgiSmMvkG224kjy8CjJZ8al0%3D" alt="" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼</strong> è¿™é‡Œæœ‰ä¸ªæƒ…å†µï¼Œæˆ‘ä»å·¦ä¾§é¡¹ç›®æ ‘ç»“æ„ä¸­æ‹–æ–‡ä»¶åˆ°å³ä¾§çš„å¯¹è¯åŒºï¼Œä¼¼ä¹æ— æ•ˆï¼Œæˆ‘å…ˆæ‰‹åŠ¨è¾“å…¥æ–‡ä»¶è·¯å¾„</p>
<p>è¿™æ¬¡çš„ä»£ç ç»ˆäºæ”¹å¯¹äº†ï¼Œç”¨æ—¶1minå¤šï¼Œè¿˜ä¸é”™ï¼Œè¾“å‡ºè¯­è¨€åˆè‡ªåŠ¨æ¢æˆè‹±æ–‡äº†ï¼Œè‡ªåŠ¨æ¢æ¨¡å‹äº†å—ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/271f29a94e96417592f0cc0ce7cfc9c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=fD2rz4r8ccbVC2MMEyoM2UXZybQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">ç»§ç»­åŠ åŠŸèƒ½</h3>
<p>ç»§ç»­ä¸Šé¢çš„åŠŸèƒ½å†…å®¹ï¼Œç»§ç»­åŠ å†…å®¹ï¼Œä¸‹é¢æ˜¯éœ€æ±‚æè¿°</p>
<blockquote>
<p>#index.vue è¿™ä¸ªé¡µé¢ç‚¹å‡»åä¸Šè§’åŒºåŸŸï¼Œè¿”å›ä¸Šä¸€é¡µï¼Œç‚¹å‡»é¡µé¢å³ä¸‹è§’åŒºåŸŸï¼Œåˆ‡æ¢å›¾ç‰‡ï¼Œå¦‚æœå›¾ç‰‡ä¸ºimg1.png åˆ™æ˜¾ç¤ºimg2.pngï¼Œå¦‚æœå›¾ç‰‡ä¸º img2.png,åˆ™æ˜¾ç¤º img1.png</p>
</blockquote>
<p>å¾ˆç›´è§‚çš„éœ€æ±‚ï¼Œåªåœ¨å½“å‰é¡µé¢åŠ å†…å®¹å°±è¡Œï¼Œç„¶åä»£ç åŠ å®Œäº†ï¼Œç§¯åˆ†é¢åº¦ç”¨äº†0.83ï¼ŒèŠ±äº†48s</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bde5e20f8ba44ee9e2fb87990368596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=zQGkXrFNCgrGtmztLQ3yiFTf4tU%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§å°éœ€æ±‚ï¼ŒæŒ‰ç†æ¥è¯´é€Ÿåº¦åº”è¯¥æ›´å¿«æ‰å¯¹ï¼Œéš¾é“æ˜¯å…è´¹è´¦æˆ·å¹¶ä¸”æ ¹æ®éœ€æ±‚å†…å®¹è‡ªåŠ¨è°ƒæ•´äº†æ¨¡å‹å—ï¼Ÿæµ‹è¯•ä¸€ä¸‹</p>
<p>æŠŠæ¨¡å‹ä»è‡ªåŠ¨æ”¹ä¸ºæ¶ˆè€—ç§¯åˆ†æœ€å¤šçš„ Claude Opus 4.5ï¼Œç§¯åˆ†æ¶ˆè€—ä¸ºè‡ªåŠ¨æ¨¡å¼çš„ 2.2 å€ï¼Œçœ‹çœ‹ä¼šä¸ä¼šæ˜æ˜¾æé«˜æ•ˆç‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e568b0024bb4ad19d7984473e843b46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=ttNBo68OFnZlUjyiWbZwPYUYeq8%3D" alt="" loading="lazy"/></p>
<p>è®©å®ƒæŠŠåŸæ¥æ·»åŠ çš„åŠŸèƒ½æ•ˆæœç¨å¾®ä¼˜åŒ–ä¸€ä¸‹ï¼Œé€Ÿåº¦æå‡åˆ°äº†30å¤šç§’ï¼Œè¿™ä¸ªé€Ÿåº¦ç›¸å¯¹è‡ªåŠ¨æ¨¡å¼å¿«äº†ä¸€ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªéœ€æ±‚æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰¹åˆ«å¤§çš„ä¼˜åŒ–ç©ºé—´</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e37c3b228d044b82843ce9b16dc3d08a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=uZVT5fSfPORDSECEKG1mFERgHB0%3D" alt="" loading="lazy"/></p>
<p>è®°ä¸‹æ¥æ¢ä¸ªç¨å¾®å¤æ‚ç‚¹éœ€æ±‚ï¼Œæµ‹è¯•ä¸€ä¸‹</p>
<h3 data-id="heading-7">å†åŠ ä¸ªéœ€æ±‚</h3>
<p>ä¸Šé¢ä¸¤ä¸ªéœ€æ±‚æ¯”è¾ƒç®€å•ï¼Œè¿™æ¬¡çš„éœ€æ±‚ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘å…ˆäººä¸ºå°†éœ€æ±‚ç®€å•æ‹†åˆ†ä¸€ä¸‹ï¼Œå†è®©AIå®ç°ï¼Œé¿å…AIç†è§£å‡ºé”™,ä½¿ç”¨ Claude Opus 4.5 æ¨¡å‹, çœ‹çœ‹å“åº”é€Ÿåº¦å’Œç§¯åˆ†æ¶ˆè€—</p>
<blockquote>
<p>æˆªå›¾ï¼Œ#index.vue</p>
<ol>
<li>å°† â€œè½¨è¿¹æŸ¥çœ‹â€ æ”¹æˆ â€œè¯•å·è½¦è½¨è¿¹æŸ¥çœ‹â€ï¼Œâ€œè§†é¢‘æŸ¥çœ‹â€ æ”¹æˆ â€œè¯•å·è½¦å®æ—¶è§†é¢‘æŸ¥çœ‹â€</li>
<li>ç‚¹å‡» â€œè¯•å·è½¦è½¨è¿¹æŸ¥çœ‹â€ åçš„å¼¹æ¡†æ ‡é¢˜æ”¹æˆ â€œè¯•å·è½¦å®æ—¶è§†é¢‘æŸ¥çœ‹â€</li>
<li>å°†å¼¹æ¡†ä¸­è§†é¢‘æ’­æ”¾æ”¹æˆå®æ—¶è§†é¢‘æ’­æ”¾ï¼Œå®æ—¶è§†é¢‘æ’­æ”¾ä»£ç å®ç°å‚è€ƒ /test-video è·¯ç”±é¡µé¢ä¸­çš„å³ä¾§â€œè®¾å¤‡å®æ—¶è§†é¢‘â€ çš„åŠŸèƒ½</li>
</ol>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06e42b5889843938936c3768a18831f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=UCrQRLDjvD37HBQ%2Fj0bnioVN1Ss%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“è€—æ—¶2må¤šï¼Œç§¯åˆ†æ¶ˆè€— 3.3ï¼Œé€Ÿåº¦æŒºå¿«çš„ï¼Œå“åº”å†…å®¹ä¹Ÿæ¯”è¾ƒå®Œå–„ï¼Œæ²¡æœ‰ç†è§£å‡ºé”™çš„åœ°æ–¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/767c49f657dd4a3ca741ba332a3f9d0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963082&amp;x-signature=Aa39VQ%2FWq4Jwj7Q7jJuT91gL%2ByM%3D" alt="" loading="lazy"/></p>
<p>é«˜ç‰ˆæœ¬æ¨¡å‹æ¨¡å‹æ•´ä½“è¡¨ç°ä¼šæ˜æ˜¾æ›´ä¼˜ç§€ä¸€ç‚¹ï¼Œä½†æ˜¯é¢åº¦æ¶ˆè€—ä¹Ÿå¿«ç¿»å€äº†ï¼Œå…è´¹é¢åº¦ç”¨ä¸äº†å‡ å¤©å°±ç”¨å®Œäº†</p>
<h2 data-id="heading-8">å°ç»“</h2>
<p>Kiro ç›´æ¥ä¸Šé¡¹ç›®åšäº†ä¸€äº›çœŸæ˜¯éœ€æ±‚åçš„ä¸€äº›ä½“ä¼šï¼Œç”¨äº†å¥½å¤šAIç¼–è¾‘å™¨å·¥å…·ï¼Œå¯¹æ¯”çš„è¯ Kiro çš„åŠŸèƒ½ä¸Šæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å‡ºä¼—çš„åœ°æ–¹ï¼Œé€Ÿåº¦ä½“éªŒæ–¹é¢æ˜æ˜¾æ²¡æœ‰ Antigravity ä¸­çš„ Gemini3 çš„é€Ÿåº¦å¿«ï¼Œå¯èƒ½æ˜¯å¯¹æ¥çš„ Claude æ¨¡å‹APIçš„åŸå› ï¼Œä¸­é—´è½¬äº†ä¸€æ‰‹è‡ªå®¶æœåŠ¡å™¨ï¼Œå¦‚æœæ˜¯ç›´æ¥åœ¨ CC ä¸­ä½¿ç”¨ Claude æ¨¡å‹ç³»åˆ—åº”è¯¥ä¼šæ›´å¿«ä¸€ç‚¹ï¼Œäº¤äº’ä½“éªŒæ–¹é¢æ²¡æœ‰ Trae CN çš„ä½“éªŒå¥½ï¼Œå›½å†…çš„å·¥å…·ç”¨çš„äººå¤šï¼Œå­—èŠ‚çš„å·¥å…·æ›´æ–°é€Ÿåº¦ä¹Ÿæ˜¯å¼ºçš„ä¸€æ‰¹ï¼Œç»å¸¸ä¸€å¤©ä¸€ä¸ªå°æ›´æ–°ï¼Œå‡ å¤©ä¸€ä¸ªå¤§æ›´æ–°</p>
<p>å…è´¹é¢åº¦è¿˜æ˜¯æ¯”è¾ƒä¸é”™çš„ï¼Œå†…ç½®äº† Claude å…¨ç³»åˆ—æ¨¡å‹ï¼Œ500ç§¯åˆ†ï¼Œä¸€å¤©ä¸‹æ¥å¤§æ¦‚èƒ½ç”¨ 50 ç§¯åˆ†å·¦å³ï¼Œçœç€ç‚¹ç”¨èƒ½ç”¨ 10 å¤šå¤©ï¼Œè¿™ç‚¹è¦æ¯” Qoder è¦å¥½å¾ˆå¤šï¼ŒQoder æ˜¯æ¨¡å‹æœ‰ç‚¹å·®ï¼Œå…è´¹é¢åº¦ä¹Ÿå°±èƒ½ç”¨ä¸ª3å¤©å·¦å³</p>
<p>æƒ³ä¸ç”¨å¼€èŠ‚ç‚¹ï¼Œå°±ä½“éªŒ Claude ç³»åˆ—æ¨¡å‹çš„ï¼ŒKiro æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©</p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ‹†è§£æ—…è¡Œæ­å­Proï¼šåŸºäºAstronçš„Agentå·¥ä½œæµå®æˆ˜]]></title>    <link>https://juejin.cn/post/7594741180950904878</link>    <guid>https://juejin.cn/post/7594741180950904878</guid>    <pubDate>2026-01-14T02:39:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594741180950904878" data-draft-id="7594757769556787209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ‹†è§£æ—…è¡Œæ­å­Proï¼šåŸºäºAstronçš„Agentå·¥ä½œæµå®æˆ˜"/> <meta itemprop="keywords" content="Workflow,Agent"/> <meta itemprop="datePublished" content="2026-01-14T02:39:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="niaonao"/> <meta itemprop="url" content="https://juejin.cn/user/3878732751729198"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ‹†è§£æ—…è¡Œæ­å­Proï¼šåŸºäºAstronçš„Agentå·¥ä½œæµå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732751729198/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    niaonao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:39:49.000Z" title="Wed Jan 14 2026 02:39:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ Agent å·¥ä½œæµï¼Ÿ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d793abd9c824688b5527a5ed00f919e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=E0rilyUcNf9zoPcqkSBvmM3CqKg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åˆšæ¥è§¦ Agent æ—¶ï¼Œæˆ‘ä»¬å¤§å¤šéƒ½æ˜¯ä» Prompt æç¤ºè¯é©±åŠ¨çš„Agentå¼€å§‹çš„ï¼Œå°±åƒä¸‹é¢è¿™æ ·</p>
<blockquote>
<p>å†™ä¸€ä¸ªå¾ˆé•¿çš„ Promptï¼Œçº¦å®šå¥½ LLM å¤§æ¨¡å‹è¦éµå¾ªçš„è§’è‰²ï¼ŒæŒ‡å®šå…¶æ‹¥æœ‰é‚£äº›æœ¬é¢†ï¼Œé™åˆ¶å¤§æ¨¡å‹çš„é—®ç­”èŒƒå›´ï¼Œç»™å®šè¾“å‡ºæ ¼å¼å’Œé—®ç­”æ¡ˆä¾‹ã€‚
ç„¶åä¸æ–­å¾€é‡Œé¢åŠ è§„åˆ™ã€åŠ çº¦æŸã€åŠ ç¤ºä¾‹ã€‚</p>
</blockquote>
<p>åœ¨çœŸæ­£å¼€å§‹åš Agent åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´æœ‰ä¸€ä¸ªè¯¯åŒºï¼š<code> æ˜¯ä¸æ˜¯ Prompt å†™å¥½ä¸€ç‚¹ï¼Œå°±å¤Ÿäº†ï¼Ÿ</code></p>
<p>ä½†åœ¨åšã€Œæ—…è¡Œæ­å­ Proã€è¿™ä¸ª Agent æ—¶ï¼Œå¾ˆå¿«å°±å‘ç°ä¸å¯¹åŠ²ã€‚</p>
<p>å½“æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæç¤ºè¯é©±åŠ¨çš„æ—…è¡Œè§„åˆ’æ™ºèƒ½ä½“ã€‚è¦æ±‚æ™ºèƒ½ä½“é’ˆå¯¹ç”¨æˆ·çš„è¾“å…¥ç»™å‡ºè¡Œç¨‹è§„åˆ’ã€‚</p>
<p>è®¾æƒ³ç€æ—…è¡Œæ­å­èƒ½å¤Ÿæ˜ç¡®çš„ç†è§£ç”¨æˆ·çš„æ„å›¾ï¼Œç»™å‡ºå®Œå–„çš„ç”¨æˆ·æ»¡æ„çš„è¡Œç¨‹è§„åˆ’ã€‚</p>
<p>ä½†ç”¨æˆ·çš„è¾“å…¥å¾€å¾€æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>â€œæˆ‘å¿ƒæƒ…ä¸å¥½ï¼Œæƒ³æ‰¾ä¸ªå‘¨æœ«å‡ºå»ç©â€</li>
<li>â€œå¸¦å¨ƒï¼Œæœ‰æ²¡æœ‰è½»æ¾ç‚¹çš„è·¯çº¿ï¼Ÿè¿™å‡ å¤©å¤©æ°”å¥½ä¸å¥½ï¼Ÿâ€</li>
<li>â€œé¢„ç®—ä¸å¤šï¼Œä½†ä¸æƒ³å¤ªç´¯â€</li>
</ul>
<p>è¿™äº›ä¿¡æ¯ï¼š</p>
<ul>
<li>ä¸å®Œæ•´</li>
<li>ä¸æ ‡å‡†</li>
<li>è€Œä¸”ç»å¸¸éœ€è¦å¤šè½®ç¡®è®¤</li>
</ul>
<p>å¦‚æœæ²¡æœ‰ä¸€ä¸ª<strong>æ˜ç¡®çš„å·¥ä½œæµ</strong>ï¼ŒAgent çš„è¡Œä¸ºä¼šéå¸¸ä¸å¯æ§ã€‚ç”¨æˆ·çš„æ„å›¾æ²¡æœ‰è¢«ç†è§£ï¼Œæœ‰æ—¶å€™ç”šè‡³å›ç­”çš„å†…å®¹å’Œç”¨æˆ·çš„è¾“å…¥å®Œå…¨ä¸ç›¸å¹²ã€‚</p>
<p>è€Œ <strong>Astron Agent</strong> æ”¯æŒåˆ›å»ºå·¥ä½œæµé©±åŠ¨çš„æ™ºèƒ½ä½“ï¼Œæ­¤å¤„åŸºäºæ˜Ÿè¾°Agentå¹³å°/Astron Agentå¹³å°æ¥å®ç°è¿™ä¸ªæ—…è¡Œæ­å­ã€‚</p>
<h2 data-id="heading-1">2. æç¤ºè¯Agentä¸å·¥ä½œæµAgent</h2>
<p>Astron Agentæ”¯æŒæç¤ºè¯é©±åŠ¨çš„å¯¹è¯å¼æ™ºèƒ½ä½“ã€å·¥ä½œæµé©±åŠ¨çš„å¤æ‚ä»»åŠ¡æ™ºèƒ½ä½“ã€é¢å¯¹å¤šæ¨¡æ€åœºæ™¯çš„è™šæ‹Ÿæ•°å­—äºº
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f54f03a1ea1e46ab962eff892e898bb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=MZ3MDKrC9V%2FAB6LPV8NMGAwvPUI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 æç¤ºè¯é©±åŠ¨çš„æ™ºèƒ½ä½“</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c09a7d6e852467aac46c8e32e6c0807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=KrVrn2i9pjLMhbBrOgTKDEx8ApM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æç¤ºè¯æ™ºèƒ½ä½“ï¼Œæ‰€æœ‰é€»è¾‘éƒ½å†™åœ¨ä¸€ä¸ª Prompt é‡Œã€‚</p>
<p>åˆ¤æ–­ã€æ‰§è¡Œã€å…œåº•æ··åœ¨ä¸€èµ·ï¼Œå¼ºä¾èµ–æ¨¡å‹â€œè‡ªå·±ç†è§£â€ï¼Œé€‚ç”¨äºç®€å•çš„é—®ç­”åœºæ™¯ã€‚</p>
<p>é‡åˆ°ç”¨æˆ·ä¿¡æ¯ä¸å®Œæ•´ï¼Œéœ€è¦å¤šè½®ç¡®è®¤ï¼Œéœ€è¦è°ƒç”¨å·¥å…·ï¼Œéœ€è¦åŒºåˆ†â€œèƒ½ä¸èƒ½æ‰§è¡Œâ€ï¼Œæˆ‘ä»¬å°±éœ€è¦è·Ÿç€ä¸šåŠ¡åœºæ™¯ä¸æ–­ç»´æŠ¤ Promptï¼Œç„¶åæ…¢æ…¢å˜æˆä¸€ä¸ªä¸å¯ç»´æŠ¤çš„é»‘ç›’ï¼Œå°±åƒåƒåœ¾ä»£ç ï¼Œæ”¹ä¹Ÿæ”¹ä¸åŠ¨äº†ã€‚</p>
<p>æˆ‘åœ¨æ—…è¡Œæ­å­æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œå‡ ä¹æ¯å¤©éƒ½åœ¨æ”¹ Promptï¼Œä½†æ•ˆæœæå‡å´è¶Šæ¥è¶Šå°ã€‚</p>
<h3 data-id="heading-3">2.2 å·¥ä½œæµé©±åŠ¨æ™ºèƒ½ä½“</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c94018fc73c749c2ac5397f8e4c1b3ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=1XyB723iTPHfOgpO8xOaurtZCcE%3D" alt="Image" loading="lazy"/>
åˆ‡æ¢åˆ°å·¥ä½œæµæ™ºèƒ½ä½“çš„æ€è·¯ï¼Œä¸è¦æ±‚åœ¨ä¸€ä¸ª LLM å¤§æ¨¡å‹èŠ‚ç‚¹ä¸‹è§£å†³ç”¨æˆ·çš„é—®é¢˜</p>
<p>è€Œæ˜¯ç”±ç¼–æ’çš„å·¥ä½œæµï¼Œé€šè¿‡è¯†åˆ«ç”¨æˆ·æ„å›¾æ¥å†³ç­–ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåš</p>
<p>å¯ä»¥æ˜¯å¼•å¯¼ç”¨æˆ·å¤šè½®å¯¹è¯ï¼Œç»§ç»­æŒ–æ˜ç”¨æˆ·çœŸå®æ„å›¾</p>
<p>å¯ä»¥æ˜¯è°ƒç”¨å·¥å…·æˆ–è€…MCPæœåŠ¡å»åšæ™¯ç‚¹æ¨èï¼Œå¤©æ°”æŸ¥è¯¢ï¼Œäº¤é€šè§„åˆ’ç­‰åŠ¨ä½œã€‚</p>
<p>åœ¨å·¥ä½œæµæ¨¡å¼ä¸‹ Prompt åªè´Ÿè´£åˆ¤æ–­ï¼Œè¯†åˆ«ç”¨æˆ·çš„æ„å›¾ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åŠ¨ä½œï¼Œç„¶åç”±å†³ç­–èŠ‚ç‚¹åšä¸åŒçš„èŠ‚ç‚¹æµè½¬ï¼Œæ•´ä¸ªæµç¨‹ç”±å·¥ä½œæµç¼–æ’æ§åˆ¶ã€‚</p>
<p>å·¥ä½œæµä»»æ„èŠ‚ç‚¹ï¼ˆç¯èŠ‚ï¼‰çš„å¼‚å¸¸ã€é”™è¯¯éƒ½å¯ä»¥è¢«å…œåº•ï¼Œç»Ÿä¸€å¤„ç†ã€‚Agent å°†æ›´åŠ å¥åº·çš„è¿ä½œï¼Œå¯æ‰©å±•æ€§æ›´å¼ºã€‚</p>
<hr/>
<h2 data-id="heading-4">3. æ—…è¡Œæ­å­Agentå·¥ä½œæµè®¾è®¡ç†å¿µ</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% å®šä¹‰æ ·å¼
    classDef llmNode fill:#f9f,stroke:#333,stroke-width:2px;
    classDef logicNode fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef parallelNode fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;

    User([ç”¨æˆ·è¾“å…¥]) --&gt; IntentAgent["ã€æ„å›¾è§£æ Agentï¼ˆè½»é‡ LLMï¼‰ã€‘"]
    
    IntentAgent --&gt; TripObject["ã€ç»“æ„åŒ–æ—…è¡Œæ„å›¾å¯¹è±¡ TripIntentã€‘"]
    
    TripObject --&gt; Router["ã€è§„åˆ™è·¯ç”± &amp; å¹¶è¡Œè°ƒåº¦å±‚ï¼ˆé LLMï¼‰ã€‘"]
    
    %% å¹¶è¡Œå±‚
    subgraph ParallelExecution [å¹¶è¡Œæ‰§è¡Œå±‚]
        direction LR
        Attraction["æ™¯ç‚¹ Agent"]
        Weather["å¤©æ°” Agent"]
        Hotel["ä½å®¿ Agent"]
        Transport["äº¤é€š Agent"]
    end
    
    Router --&gt; Attraction
    Router --&gt; Weather
    Router --&gt; Hotel
    Router --&gt; Transport
    
    %% æ•´åˆå±‚
    Attraction --&gt; Aggregator["ã€è¡Œç¨‹æ•´åˆ Agentï¼ˆLLMï¼Œä»…ä¸€æ¬¡ï¼‰ã€‘"]
    Weather --&gt; Aggregator
    Hotel --&gt; Aggregator
    Transport --&gt; Aggregator
    
    Aggregator --&gt; Output([ç”Ÿæˆæœ€ç»ˆè¡Œç¨‹æ–¹æ¡ˆ])

    %% åº”ç”¨æ ·å¼
    class IntentAgent,Aggregator llmNode;
    class Router logicNode;
    class Attraction,Weather,Hotel,Transport parallelNode;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a40997a7665849bbb73d98f5ea5ad59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=%2Bc3Ndn4zrdD78MPi0JSp1U0lIt0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">3.1 å·¥ä½œæµè§„åˆ™</h3>
<p>å·¥ä½œæµåº”éµå¾ªä»¥ä¸‹è§„åˆ™ï¼Œè¿™ä¸€ç‚¹åœ¨æ—…è¡Œæ­å­è¿™ç§å¤šè½®ã€å¤šæ¡ä»¶åœºæ™¯é‡Œéå¸¸é‡è¦ã€‚</p>
<ol>
<li><strong>æ¨¡å‹åªåšåˆ¤æ–­</strong>ï¼Œä¸åšæ£€ç´¢</li>
<li><strong>æ¨¡å‹åªåšä¸ç¡®å®šæ€§å†³ç­–</strong>ï¼Œä¸åšç¡®å®šæ€§åˆ†å‘</li>
<li><strong>æµç¨‹å…ˆè¡Œ</strong>ï¼Œå…ˆå®šä¹‰ Agent çš„è¡Œä¸ºè·¯å¾„</li>
<li><strong>èŠ‚ç‚¹èŒè´£å•ä¸€</strong>ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªè§£å†³ä¸€ä¸ªé—®é¢˜</li>
<li><strong>æ§åˆ¶é€»è¾‘å¤–ç½®</strong>ï¼Œåˆ¤æ–­å’Œåˆ†æ”¯ä¸å¡è¿› Prompt</li>
</ol>
<h3 data-id="heading-6">3.2 å·¥ä½œæµç»“æ„è®¾è®¡</h3>
<ul>
<li>æ„å›¾è§£æå±‚
<code>ç”¨â€œæ„å›¾è§£æ Agentâ€æ›¿æ¢å¤æ‚çš„â€œæ™ºèƒ½å†³ç­–â€èŠ‚ç‚¹ï¼ŒèŒè´£æå…¶å•ä¸€ï¼Œåªè´Ÿè´£ç»“æ„åŒ–ï¼Œä¸åšå†³ç­–</code>
é‡‡ç”¨è½»é‡çº§ Agentã€‚å®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯â€œå®ä½“æå–â€ï¼Œå°†æ¨¡ç³Šçš„è‡ªç„¶è¯­è¨€è½¬åŒ–ä¸ºè®¡ç®—æœºå¯è¯»çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mi>S</mi><mi>O</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">JSON</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal" style="margin-right:0.10903em;">SON</span></span></span></span></span> ç»“æ„ã€‚</li>
<li>é LLM è°ƒåº¦å±‚
<code>ç”¨â€œè§„åˆ™å¼•æ“ / DAGâ€æ›¿ä»£ LLM å†³ç­–ï¼Œæ— tokenæˆæœ¬ä¸”è§„åˆ™ç¨³å®šå¯æ§</code>
è¿™æ˜¯æå‡æ€§èƒ½çš„å…³é”®ã€‚é€šè¿‡ç¡¬ä»£ç æˆ–è§„åˆ™å¼•æ“ï¼ˆå¦‚åˆ†æ”¯å™¨èŠ‚ç‚¹ï¼‰åˆ†å‘ä»»åŠ¡ï¼Œé¿å…äº† LLM åœ¨å¤æ‚é€»è¾‘åˆ¤æ–­ä¸Šçš„å¼€é”€å’Œä¸ç¨³å®šæ€§ã€‚</li>
<li>å¹¶è¡Œæ‰§è¡ŒæŸ¥è¯¢å‹Agent
<code>æ‰€æœ‰æŸ¥è¯¢å‹ Agent å¿…é¡»æ˜¯ã€Œæ— çŠ¶æ€ + æ— æ¨ç†ã€çš„ï¼Œè½»é‡çº§ Agent æé«˜èŠ‚ç‚¹å¤„ç†é€Ÿåº¦ï¼Œé™ä½ LLM æ¨ç†æˆæœ¬</code>
å°†å‚ç›´é¢†åŸŸçš„ä»»åŠ¡æ‹†åˆ†ï¼Œå„ä¸ª Agent åªè´Ÿè´£è‡ªå·±çš„å‚ç›´é¢†åŸŸï¼ˆæ™¯ç‚¹ã€å¤©æ°”ç­‰ï¼‰ï¼Œå¤§å¹…é™ä½äº† Token æ¶ˆè€—å’Œå“åº”å»¶è¿Ÿã€‚</li>
<li>æœ€ç»ˆæ•´åˆ
<code>ç”¨ä¸€æ¬¡â€œé«˜è´¨é‡æ•´åˆ Agentâ€ï¼Œæ›¿ä»£ N æ¬¡å†³ç­–</code>
ä»…åœ¨æœ€åä¸€æ­¥è°ƒç”¨ä¸€æ¬¡â€œé‡å‹â€LLMï¼Œå°†ç¢ç‰‡åŒ–çš„ç»“æ„æ•°æ®ï¼ˆæ™¯ç‚¹åˆ—è¡¨ + å¤©æ°”é¢„æŠ¥ + é…’åº—æ–¹æ¡ˆï¼‰æ¶¦è‰²å¹¶ç»„ç»‡æˆå…·æœ‰äººæ€§çš„å»ºè®®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">4. æ˜Ÿè¾° Agent å¹³å°å·¥ä½œæµå®æˆ˜ï¼ˆæ—…è¡Œæ­å­ï¼‰</h2>
<p>ä¸‹é¢è¿›å…¥é‡ç‚¹ï¼š<strong>æ—…è¡Œæ­å­ Agent çš„çœŸå®å·¥ä½œæµæ‹†è§£</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">4.1 æ•´ä½“å·¥ä½œæµè®¾è®¡æ€è·¯</h3>
<p>æŒ‰ç…§ä¸Šè¿°å·¥ä½œæµè§„åˆ™æ­å»ºäº†å¯¹åº”çš„å·¥ä½œæµï¼Œç„¶ååˆæ­å»ºäº†ä¸ªç®€ç‰ˆçš„å·¥ä½œæµï¼Œæ­¤å¤„ä»‹ç»ä¸‹ç®€ç‰ˆå·¥ä½œæµã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% å®šä¹‰æ ·å¼
    classDef startEnd fill:#f5f5f5,stroke:#333,stroke-width:2px;
    classDef safety fill:#ffebee,stroke:#c62828,stroke-width:2px;
    classDef agent fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
    classDef fallback fill:#fff3e0,stroke:#ef6c00,stroke-width:2px;

    Start([å¼€å§‹]) --&gt; Audit["å®‰å…¨åˆè§„å®¡æ ¸"]
    
    Audit --&gt; Decision{"å®‰å…¨åˆè§„å†³ç­–"}
    
    %% åˆ†æ”¯é€»è¾‘
    Decision -- "é€šè¿‡ (Pass)" --&gt; SmartAgent["æ™ºèƒ½å†³ç­– Agent"]
    Decision -- "æœªé€šè¿‡ / ä¸åŒ¹é…" --&gt; FallbackLLM["å…œåº•å¤§æ¨¡å‹ (Fallback LLM)"]
    
    %% æ±‡åˆç»“æŸ
    SmartAgent --&gt; End([ç»“æŸ])
    FallbackLLM --&gt; End

    %% åº”ç”¨æ ·å¼
    class Start,End startEnd;
    class Audit,Decision safety;
    class SmartAgent agent;
    class FallbackLLM fallback;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c56bc932660e4c308a223abb3b269560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=vuOYG6Ifn6LGuuBopPtvRkHNSUY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç®€ç‰ˆå·¥ä½œæµä¸­åŠ å…¥äº†1ä¸ªå®‰å…¨åˆè§„æ£€æµ‹ï¼Œåšä¸€ä¸‹é£æ§å…œåº•ï¼Œé’ˆå¯¹æ¶‰é»„æ¶‰æ”¿æ¶‰æš´å¯è¿”å›æ‹’ç»æœåŠ¡çš„æ–‡æ¡ˆï¼Œæˆ–è€…å¼•å¯¼åˆ°æ—…è¡Œçš„è¯é¢˜ä¸­æ¥ã€‚</p>
<p>æ­¤å¤„ä½¿ç”¨äº†æ™ºèƒ½å†³ç­–èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ä¸»è¦ä¾æ®ç”¨æˆ·é€‰æ‹©çš„ç­–ç•¥è¿›è¡Œå·¥å…·æ™ºèƒ½è°ƒåº¦ï¼ŒåŒæ—¶æ ¹æ®è¾“å…¥çš„æç¤ºè¯ï¼Œè°ƒç”¨é€‰å®šçš„å¤§æ¨¡å‹ï¼Œå¯¹æç¤ºè¯ä½œå‡ºå›ç­”ã€‚</p>
<p>Agentç­–ç•¥ä¸ºReACTï¼ˆReasoning + Actingï¼‰ç­–ç•¥ï¼Œç”¨äºæŒ‡å¯¼å¤§æ¨¡å‹å®Œæˆå¤æ‚ä»»åŠ¡çš„ç»“æ„åŒ–æ€è€ƒå’Œå†³ç­–è¿‡ç¨‹ã€‚æ”¯æŒAgentåœ¨æ€è€ƒå’Œè¡ŒåŠ¨äº¤æ›¿è¿›è¡Œï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§è¾“å‡ºç­”æ¡ˆ</p>
<p>æ™ºèƒ½å†³ç­–èŠ‚ç‚¹ï¼Œæ”¯æŒé…ç½®å¯¹è¯è½®æ•°ï¼Œå…è®¸æºå¸¦å†å²å¯¹è¯ï¼ŒåŠ å¼ºçŸ­æœŸè®°å¿†ã€‚</p>
<p>æ”¯æŒè‡ªå®šä¹‰MCPæœåŠ¡å’Œå®˜æ–¹MCPã€æ’ä»¶ç­‰ã€‚</p>
<p>å…è®¸é…ç½®å¤§æ¨¡å‹æœ€å¤§æ¨ç†è½®æ¬¡ä¸€èˆ¬å»ºè®®å¤§äºç­‰äºå·¥å…·æ•°é‡ã€‚</p>
<h3 data-id="heading-9">4.2 ReACT çš„å·¥ä½œæœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% å®šä¹‰æ ·å¼
    classDef userNode fill:#f5f5f5,stroke:#333,stroke-width:2px;
    classDef llmNode fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef actionNode fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
    classDef resultNode fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;

    User([ç”¨æˆ·è¾“å…¥]) --&gt; Reason["LLM æ¨ç† (Reasoning)"]
    
    %% æ ¸å¿ƒå¾ªç¯åœˆ
    subgraph ReActLoop [ReAct å¾ªç¯]
        Reason --&gt; Act["LLM é€‰æ‹©åŠ¨ä½œ (Acting)"]
        Act --&gt; Execute["æ‰§è¡ŒåŠ¨ä½œ (API/Agent/å·¥å…·)"]
        Execute --&gt; Observation["å°†åŠ¨ä½œç»“æœåé¦ˆ (Observation)"]
        Observation --&gt; Reason
    end
    
    %% é€€å‡ºæ¡ä»¶
    Reason -- "è¾¾æˆç›®æ ‡" --&gt; Finish([è¾“å‡ºæœ€ç»ˆç­”æ¡ˆ])

    %% åº”ç”¨æ ·å¼
    class User,Finish userNode;
    class Reason,Act llmNode;
    class Execute actionNode;
    class Observation resultNode;
</code></pre>
<p>ReACT å·¥ä½œæœºåˆ¶æ ¸å¿ƒç‰¹ç‚¹</p>
<ul>
<li>äº¤æ›¿å¾ªç¯
LLM ä¸æ˜¯ä¸€æ¬¡æ€§è¾“å‡ºç­”æ¡ˆï¼Œè€Œæ˜¯â€œæ€è€ƒ â†’ æ‰§è¡Œ â†’ åé¦ˆ â†’ å†æ€è€ƒâ€</li>
<li>é«˜å¯æ‰©å±•æ€§
å¯ä»¥æ¥å…¥å¤šä¸ªå¤–éƒ¨å·¥å…·ï¼Œå¦‚æœç´¢ã€æ•°æ®åº“ã€è®¡ç®—å™¨ã€ä¸šåŠ¡ Agentã€‚</li>
<li>æ¨ç†å¯è§£é‡Š
å› ä¸ºæ¯ä¸€æ­¥æ¨ç†éƒ½æ˜¯æ˜¾å¼ç”Ÿæˆçš„ï¼Œæ‰€ä»¥å®¹æ˜“è°ƒè¯•ã€‚</li>
</ul>
<h3 data-id="heading-10">4.3 ReACT ä¸å¸¸è§„ Agent å·¥ä½œæµå¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€š Agent</th><th>ReACT Agent</th></tr></thead><tbody><tr><td>åŠ¨ä½œé¡ºåº</td><td>å•æ¬¡æ¨ç†è¾“å‡ºï¼Œæˆ–ä¸²è¡Œå›ºå®šè°ƒç”¨</td><td>å¾ªç¯æ¨ç† + åŠ¨ä½œå†³ç­–</td></tr><tr><td>å¤–éƒ¨å·¥å…·è°ƒç”¨</td><td>éœ€è¦å¤–éƒ¨è§„åˆ’å¥½é¡ºåº</td><td>LLM å†³å®šä½•æ—¶è°ƒç”¨å·¥å…·</td></tr><tr><td>å¯è§£é‡Šæ€§</td><td>éšå¼é»‘ç›’</td><td>æ¯ä¸€æ­¥æ¨ç†å¯è¿½è¸ª</td></tr><tr><td>çµæ´»æ€§</td><td>å—é™äºé¢„è®¾æµç¨‹</td><td>é«˜ï¼Œå¯åŠ¨æ€è°ƒæ•´åŠ¨ä½œé¡ºåº</td></tr><tr><td>æ€§èƒ½</td><td>å¿«ï¼ˆå°‘æ¬¡ LLM è°ƒç”¨ï¼‰</td><td>å¯èƒ½æ…¢ï¼ˆå¤šè½®æ¨ç† + APIè°ƒç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-11">4.4 å·¥ä½œæµæ ¸å¿ƒèŠ‚ç‚¹è¯¦è§£</h3>
<p>è¿›å…¥æ˜Ÿè¾°å¹³å°æˆ–Astron Agentï¼Œç‚¹å‡»åˆ›å»ºï¼Œé€‰æ‹©åˆ›å»ºè‡ªå®šä¹‰å·¥ä½œæµ</p>
<p>è¿›å…¥ç”»å¸ƒï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§ä¸ºç”»å¸ƒèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬å¤§æ¨¡å‹ã€å†³ç­–ã€çŸ¥è¯†åº“ã€åˆ†æ”¯ã€æ™ºèƒ½å†³ç­–ã€å·¥ä½œæµç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea3cd874e66e4c32bd6f63f388d2426b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=2j2ki344Zyf4k1j%2B5guiyXaLhTY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dd1b7dbe32c4274a77f894ae7dd7940~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=PhDHdvkf0yCuQfSAaS%2BXZMGBsRA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-12">â‘  å¼€å§‹èŠ‚ç‚¹ï¼šç»Ÿä¸€å…¥å£ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡é€»è¾‘</h4>
<ul>
<li>è¾“å…¥ï¼š<code>AGENT_USER_INPUT</code></li>
<li>åªåšä¸€ä»¶äº‹ï¼š<strong>æ‰¿æ¥ç”¨æˆ·åŸå§‹è¾“å…¥</strong></li>
</ul>
<hr/>
<h4 data-id="heading-13">â‘¡ å®‰å…¨åˆè§„å®¡æ ¸ + å†³ç­–èŠ‚ç‚¹ï¼ˆçœŸå®é¡¹ç›®å¿…å¤‡ï¼‰</h4>
<p>è¿™ä¸€ç»„èŠ‚ç‚¹åœ¨ Demo é‡Œç»å¸¸è¢«å¿½ç•¥ï¼Œä½†åœ¨çœŸå®äº§å“ä¸­éå¸¸é‡è¦ã€‚</p>
<p><strong>ä½œç”¨æ‹†è§£ï¼š</strong></p>
<ul>
<li>
<p>MCP åˆè§„èŠ‚ç‚¹ï¼š</p>
<ul>
<li>æ£€æµ‹æ¶‰æ”¿ / æš´æ / è‰²æƒ…ç­‰</li>
</ul>
</li>
<li>
<p>å†³ç­–èŠ‚ç‚¹ï¼š</p>
<ul>
<li>æ ¹æ® <code>isError</code> å†³å®šåç»­è·¯å¾„</li>
</ul>
</li>
</ul>
<p><strong>è®¾è®¡æ€è·¯ï¼š</strong></p>
<blockquote>
<p>åˆè§„é—®é¢˜ï¼Œç›´æ¥åœ¨å·¥ä½œæµå±‚æ‹¦æˆª
ä¸è¦äº¤ç»™å¤§æ¨¡å‹â€œè‡ªè§‰â€</p>
</blockquote>
<hr/>
<h4 data-id="heading-14">â‘¢ æ™ºèƒ½å†³ç­–å¤§æ¨¡å‹ï¼ˆæ—…è¡Œæ­å­çš„æ ¸å¿ƒå¤§è„‘ï¼‰</h4>
<p>è¿™æ˜¯æ•´ä¸ªå·¥ä½œæµçš„<strong>æ ¸å¿ƒèŠ‚ç‚¹</strong>ã€‚</p>
<p>å®ƒçš„èŒè´£ä¸æ˜¯â€œå†™æ”»ç•¥â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>åˆ¤æ–­ç”¨æˆ·æ„å›¾æ˜¯å¦æ˜ç¡®</li>
<li>å†³å®šæ˜¯å¦è°ƒç”¨åœ°å›¾ / å¤©æ°” / åœ°é“å·¥å…·</li>
<li>ç»„ç»‡å¤šè½®å¯¹è¯èŠ‚å¥</li>
</ul>
<p>è¿™é‡Œæˆ‘ç”¨äº† <strong>ReACT + MCP Tools</strong>ï¼Œè€Œä¸æ˜¯å•çº¯ç”Ÿæˆæ–‡æœ¬ã€‚</p>
<p><strong>ä¸€ä¸ªå¾ˆé‡è¦çš„ç»éªŒï¼š</strong></p>
<blockquote>
<p>çœŸæ­£å¤æ‚çš„ Agentï¼Œä¸€å®šæ˜¯â€œä¼šç”¨å·¥å…·çš„â€ï¼Œ
è€Œä¸æ˜¯â€œå†™å¾—å¾ˆé•¿çš„â€ã€‚</p>
</blockquote>
<p><strong>æ™ºèƒ½å†³ç­–èŠ‚ç‚¹é…ç½®</strong>
ï¼ˆ1ï¼‰é€‰æ‹©å¤§æ¨¡å‹
ä¸€èˆ¬æ¨èæœ€è¿‘å‘å¸ƒçš„æ–°æ¨¡å‹ï¼Œç»¼åˆèƒ½åŠ›å¼ºå’Œæ¨ç†é€Ÿåº¦å¿«
ï¼ˆ2ï¼‰é€‰æ‹©æºå¸¦å†å²å¯¹è¯è½®æ•°
å¢å¼º Agent çš„çŸ­æœŸè®°å¿†
ï¼ˆ3ï¼‰Agentç­–ç•¥é€‰æ‹©ReACTï¼Œé€‰æ‹© å·¥å…·ã€æ’ä»¶æˆ–MCP æœåŠ¡ï¼ˆå¤©æ°”ã€åœ°å›¾ç­‰ï¼‰
æŒ‡å¯¼å¤§æ¨¡å‹è§„åˆ’æ€è€ƒé“¾ï¼Œè°ƒç”¨å¤–éƒ¨å·¥å…·æ¥è¾“å‡ºç¬¦åˆç”¨æˆ·é¢„æœŸçš„å†…å®¹
ï¼ˆ4ï¼‰ç³»ç»Ÿæç¤ºè¯
æŒ‡å®šæ™ºèƒ½ä½“çš„è§’è‰²ã€èŒè´£ã€æŠ€å·§ã€è¾¹ç•Œã€è¾“å‡ºè§„èŒƒ
ï¼ˆ5ï¼‰æœ€å¤§æ¨ç†è½®æ¬¡
ä¸€èˆ¬æ¨èå¤§äºç­‰äºå·¥å…·æˆ–MCPæœåŠ¡æ•°å³å¯ã€‚</p>
<p><strong>æ—…è¡Œæ­å­çš„æ ¸å¿ƒAgentæç¤ºè¯å¦‚ä¸‹</strong></p>
<pre><code class="hljs language-xml" lang="xml">## è§’è‰²
ä½ çš„åå­—æ˜¯æ—…è¡Œæ­å­!
ä½ çš„åå­—æ˜¯æ—…è¡Œæ­å­!
ä½ çš„åå­—æ˜¯æ—…è¡Œæ­å­!
ä¸€ä¸ªç”±è®¯é£å¹³å°æ­å»ºçš„æ—…è¡Œè§„åˆ’åŠ©æ‰‹ï¼Œä¸“æ³¨äºå¸®åŠ©ç”¨æˆ·è§„åˆ’ä»–ä»¬çš„æ—…è¡Œè·¯çº¿ã€é¢„è®¢ä½å®¿å’Œäº¤é€šï¼Œä»¥åŠæä¾›ç›®çš„åœ°çš„æ—…æ¸¸ä¿¡æ¯å’Œå»ºè®®ã€‚
## æŠ€èƒ½
1. åˆ¶å®šä¸ªæ€§åŒ–æ—…è¡Œè®¡åˆ’ï¼š
- æ ¹æ®ç”¨æˆ·çš„åå¥½ã€é¢„ç®—å’Œæ—¶é—´é™åˆ¶ï¼Œè®¾è®¡è¯¦ç»†çš„æ—…è¡Œè·¯çº¿å’Œæ—¥ç¨‹å®‰æ’ã€‚
- è€ƒè™‘ç”¨æˆ·çš„å…´è¶£çˆ±å¥½ï¼Œæ¨èé€‚åˆçš„æ´»åŠ¨å’Œæ™¯ç‚¹ã€‚
- æä¾›å…³äºå½“åœ°æ–‡åŒ–ã€é£ä¿—ä¹ æƒ¯å’Œå¿…å°ç¾é£Ÿçš„ä¿¡æ¯ã€‚
2. é¢„è®¢æœåŠ¡ï¼š
- ååŠ©ç”¨æˆ·é¢„è®¢æœºç¥¨ã€é…’åº—å’Œå…¶ä»–äº¤é€šå·¥å…·ã€‚
- æ¯”è¾ƒä¸åŒä¾›åº”å•†çš„ä»·æ ¼å’ŒæœåŠ¡ï¼Œå¸®åŠ©ç”¨æˆ·æ‰¾åˆ°æ€§ä»·æ¯”æœ€é«˜çš„é€‰é¡¹ã€‚
- æä¾›é¢„è®¢ç¡®è®¤ä¿¡æ¯å’Œç®¡ç†ç”¨æˆ·çš„é¢„è®¢è®°å½•ã€‚
3. æä¾›å®æ—¶æ—…è¡Œå»ºè®®ï¼š
- æ ¹æ®å¤©æ°”å˜åŒ–ã€èŠ‚å‡æ—¥æˆ–å…¶ä»–çªå‘äº‹ä»¶ï¼ŒåŠæ—¶è°ƒæ•´æ—…è¡Œè®¡åˆ’ã€‚
- åœ¨æ—…é€”ä¸­ä¸ºç”¨æˆ·æä¾›å®æ—¶æ”¯æŒï¼Œè§£ç­”ä»»ä½•å…³äºè¡Œç¨‹çš„é—®é¢˜ã€‚
- åˆ†äº«å®ç”¨çš„æ—…è¡Œå°è´´å£«å’Œåº”æ€¥è”ç³»æ–¹å¼ã€‚
## è§„åˆ™ï¼š
-è¯·ä»”ç»†åˆ†æç”¨æˆ·çš„ã€è¾“å…¥ä¿¡æ¯ã€‘ï¼Œå°¤å…¶æ˜¯ç”¨æˆ·çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯å¾ˆå…¨é¢æ¨¡ç³Šçš„æ—¶å€™ï¼Œä½ åº”è¯¥å°½é‡æ¨æµ‹ç”¨æˆ·çš„æƒ…å†µï¼Œå¹¶ä¸”æ ¹æ®æŠ€èƒ½è¦æ±‚è¿›è¡Œè¾“å‡ºç»“æœã€‚
- å»AIå‘³å¼•å¯¼ç”¨æˆ·å¤šè½®å¯¹è¯ï¼Œå»ºè®®3-5æ¬¡å¯¹è¯ã€‚ç†è§£ç”¨æˆ·æ„å›¾åè¾“å‡ºæ—…è¡Œè§„åˆ’ã€‚
## é™åˆ¶
- åªè®¨è®ºä¸æ—…è¡Œè§„åˆ’ç›¸å…³çš„å†…å®¹ï¼Œæ‹’ç»å›ç­”ä¸æ—…è¡Œè§„åˆ’æ— å…³çš„è¯é¢˜ã€‚
- æ‰€æœ‰çš„è¾“å‡ºå†…å®¹å¿…é¡»æŒ‰ç…§ç»™å®šçš„æ ¼å¼è¿›è¡Œç»„ç»‡ï¼Œä¸èƒ½åç¦»æ¡†æ¶è¦æ±‚ã€‚
- æä¾›çš„æ—…è¡Œå»ºè®®åº”åŸºäºå…¬å¼€å¯è·å–çš„ä¿¡æ¯ï¼Œä¸æ¶‰åŠä¸ªäººéšç§æˆ–æ•æ„Ÿæ•°æ®ã€‚
</code></pre>
<hr/>
<h4 data-id="heading-15">â‘£ å…œåº•å¤§æ¨¡å‹èŠ‚ç‚¹ï¼šä¸è¦é«˜ä¼°ä¸» Agent çš„è¦†ç›–ç‡</h4>
<p>ç°å®æƒ…å†µæ˜¯ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¼šä¹±é—®</li>
<li>ä¼šåé¢˜</li>
<li>ä¼šçªç„¶æ¢è¯é¢˜</li>
</ul>
<p>å…œåº•èŠ‚ç‚¹çš„å­˜åœ¨æ„ä¹‰åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>â€œåˆ«è®©ç”¨æˆ·æ— å“åº”ã€‚â€</strong></p>
</blockquote>
<p>å“ªæ€•åªæ˜¯ä¸€ä¸ªåŸºç¡€å›ç­”ï¼Œä¹Ÿæ¯”æµç¨‹ä¸­æ–­è¦å¥½ã€‚</p>
<hr/>
<h4 data-id="heading-16">â‘¤ ç»“æŸèŠ‚ç‚¹ï¼šç»“æ„åŒ–è¾“å‡ºï¼Œè€Œä¸æ˜¯éšä¾¿ return</h4>
<p>ç»“æŸèŠ‚ç‚¹é‡Œï¼Œæˆ‘ä¿ç•™äº†ä¸‰ä¸ªè¾“å‡ºï¼š</p>
<ul>
<li><code>output</code>ï¼šæœ€ç»ˆç»™ç”¨æˆ·çš„ç»“æœ</li>
<li><code>finalText</code>ï¼šå…œåº•è¾“å‡º</li>
<li><code>thinking</code>ï¼šAgent çš„æ¨ç†å†…å®¹ï¼ˆè°ƒè¯•ç”¨ï¼‰</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡å¯¹åæœŸï¼š</p>
<ul>
<li>è°ƒè¯•</li>
<li>ç›‘æ§</li>
<li>è¡Œä¸ºåˆ†æ</li>
</ul>
<p>éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<hr/>
<h3 data-id="heading-17">4.5 Astron Agent å·¥ä½œæµé«˜çº§é…ç½®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b451419b6c91406d917191e7beec9f66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=MJgM%2BNQG66bQ3Zh0pmLd41O6VgM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ul>
<li>é«˜çº§è®¾ç½®
å·¥ä½œæµç¼–æ’é¡µé¢ï¼Œé«˜çº§é…ç½®æ”¯æŒè®¾ç½®æ™ºèƒ½ä½“çš„å¯¹è¯å¼€åœºç™½ã€‚
è®¾ç½®å¼€åœºç™½é¢„ç•™é—®é¢˜ï¼Œå¢åŠ ç”¨æˆ·äº¤äº’ä½“éªŒï¼Œæ–°ç”¨æˆ·ä¸€èˆ¬ä¼šé€‰æ‹©é¢„ç•™é—®é¢˜æ¥è§‚å¯Ÿæ™ºèƒ½ä½“çš„é—®ç­”è´¨é‡ã€‚
å¼€å¯ä¸‹ä¸€æ­¥é—®é¢˜å»ºè®®ï¼Œä¼šåœ¨ä¸€æ¬¡å¯¹è¯åï¼Œå¸¦å‡ºå‡ ä¸ªæ¨èé—®é¢˜ã€‚</li>
<li>è°ƒè¯•
ç‚¹å‡»è°ƒè¯•ï¼Œå¯ä»¥åœ¨ç¼–æ’å·¥ä½œæµçš„ç•Œé¢ï¼ŒéªŒè¯å·¥ä½œæµçš„å·¥ä½œæƒ…å†µï¼ŒAgentçš„é—®ç­”è´¨é‡æ˜¯å¦ç¬¦åˆé¢„æœŸç­‰</li>
<li>å‘å¸ƒ
æ”¯æŒå‘å¸ƒåˆ°æ˜Ÿè¾°æ™ºèƒ½ä½“å¹¿åœºï¼Œè¢«å…¶ä»–ç”¨æˆ·æœç´¢ã€è®¿é—®ã€ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-18">4.6 æ—…è¡Œæ­å­å·¥ä½œæµçš„å‡ ä¸ªè®¾è®¡æ¨¡å¼</h3>
<p>è¿™æ˜¯æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®é‡Œåå¤éªŒè¯è¿‡çš„å‡ ä¸ªæ¨¡å¼ã€‚</p>
<hr/>
<p><strong>æ¨¡å¼ä¸€ï¼šå…ˆåˆ¤æ–­ï¼Œå†æ‰§è¡Œ</strong></p>
<ul>
<li>ä¸æ¸…æ¥š â†’ è¿½é—®</li>
<li>ä¸åˆè§„ â†’ æ‹¦æˆª</li>
<li>ä¸åŒ¹é… â†’ å…œåº•</li>
</ul>
<p><strong>æ¨¡å¼äºŒï¼šæ§åˆ¶é€»è¾‘æ°¸è¿œä¸å†™è¿› Prompt</strong></p>
<ul>
<li>åˆ¤æ–­å†™åœ¨ã€Œå†³ç­–èŠ‚ç‚¹ã€</li>
<li>Prompt åªå…³æ³¨â€œæ€ä¹ˆå›ç­”â€</li>
</ul>
<p><strong>æ¨¡å¼ä¸‰ï¼šæ ¸å¿ƒèƒ½åŠ›èŠ‚ç‚¹ â‰¤ 1 ä¸ª</strong></p>
<p>æ—…è¡Œæ­å­é‡Œï¼š</p>
<ul>
<li>ä¸€ä¸ªæ™ºèƒ½å†³ç­– Agent</li>
<li>å…¶ä»–éƒ½æ˜¯è¾…åŠ©èŠ‚ç‚¹</li>
</ul>
<hr/>
<h3 data-id="heading-19">4.7 å·¥ä½œæµä¼˜åŒ–ç»éªŒï¼ˆè¸©å‘æ€»ç»“ï¼‰</h3>
<p>å¦‚æœä½ ä¹Ÿå‡†å¤‡æ­ç±»ä¼¼çš„ Agentï¼Œè¿™å‡ æ¡å»ºè®®å¾ˆå®ç”¨ï¼š</p>
<ul>
<li>ä¸€ä¸ªèŠ‚ç‚¹åšè¶…è¿‡ä¸€ä»¶äº‹ï¼Œä¸€å®šä¼šåæ‚”</li>
<li>å·¥ä½œæµè¶…è¿‡ 7 ä¸ªèŠ‚ç‚¹ï¼Œå°±è¯¥è€ƒè™‘æ‹†å±‚</li>
<li>ä¸è¦æŒ‡æœ›æ¨¡å‹â€œè‡ªå·±åˆ¤æ–­è¦ä¸è¦é—®ç”¨æˆ·â€</li>
<li>ä¸­é—´çŠ¶æ€ä¸€å®šè¦ç»“æ„åŒ–ï¼Œä¸è¦è‡ªç„¶è¯­è¨€</li>
</ul>
<hr/>
<h2 data-id="heading-20">5. æ—…è¡Œæ­å­ Pro è¿è¡Œæ•ˆæœå›¾</h2>
<p>æ—…è¡Œæ­å­æ¬¢è¿è¯­é¡µé¢
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/160d9fde5988470aaf2e4ecd0f78c2a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=0YYRaM72HGwZ8QmuZMT8olFwksk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ™ºèƒ½å†³ç­–èŠ‚ç‚¹æ€è€ƒé“¾ï¼Œè°ƒç”¨MCPæœåŠ¡æŸ¥è¯¢ç›®çš„åœ°å¤©æ°”ã€æ™¯ç‚¹æ¨èç•Œé¢
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10d4b37181d14256b2a5daebbdd1a7ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=xCyAJp%2BsFIgR%2BpUF6psqpnrof9Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å·¥ä½œæµ Agent å¤šè½®æ²Ÿé€šåè¾“å‡ºè¡Œç¨‹è§„åˆ’ç•Œé¢
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c435bcfc3d0f4d68918589fd527f4220~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=VsN02E2tt73sXMwmBvoPlli8RpY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç”¨æˆ·æ„å›¾è¯†åˆ«ï¼Œéæ—…è¡Œè§„åˆ’é—®é¢˜å…œåº•åŠ©æ‰‹ç•Œé¢
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea5ebebcb4ec46cf83ada4b9d490fc68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=fTSY3WFO2qb%2FdbtrZEHSJcLcRgk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de7d107241184b689a17d808f684ec96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmlhb25hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768963188&amp;x-signature=nElNP4W73%2FClPj6Wb2OMSlEGxuU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-21">6. å¦‚ä½•åŸºäº Astron åˆ›å»ºè‡ªå·±çš„ Agent å·¥ä½œæµ</h2>
<p>å¦‚æœä½ æƒ³ä» 0 å¼€å§‹å¤åˆ»ä¸€å¥—ç±»ä¼¼çš„å·¥ä½œæµï¼Œæˆ‘çš„å»ºè®®æµç¨‹æ˜¯ï¼š</p>
<ol>
<li><strong>å…ˆç”»æµç¨‹å›¾ï¼Œä¸è¦å†™ Prompt</strong></li>
<li>æ˜ç¡®ï¼š
å“ªäº›æ˜¯åˆ¤æ–­
å“ªäº›æ˜¯æ‰§è¡Œ</li>
<li>æ¯ä¸ªèŠ‚ç‚¹å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š
å¦‚æœè¿™ä¸ªèŠ‚ç‚¹å‡ºé”™ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
<li>æœ€åæ‰å»ä¼˜åŒ– Prompt è¡¨è¾¾</li>
</ol>
<p>ä½ ä¼šå‘ç°ï¼Œå·¥ä½œæµä¸€æ—¦æ¸…æ™°ï¼ŒPrompt åè€Œä¸éš¾å†™ã€‚</p>
<blockquote>
<p>Powered By niaonao</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git æäº¤è§„èŒƒä¸å…¨æ ˆAIé©±åŠ¨å¼€å‘å®æˆ˜ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨]]></title>    <link>https://juejin.cn/post/7594742976712851490</link>    <guid>https://juejin.cn/post/7594742976712851490</guid>    <pubDate>2026-01-14T04:26:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594742976712851490" data-draft-id="7594739292201222179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git æäº¤è§„èŒƒä¸å…¨æ ˆAIé©±åŠ¨å¼€å‘å®æˆ˜ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-14T04:26:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UIUV"/> <meta itemprop="url" content="https://juejin.cn/user/1036168457093483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git æäº¤è§„èŒƒä¸å…¨æ ˆAIé©±åŠ¨å¼€å‘å®æˆ˜ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1036168457093483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UIUV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:26:28.000Z" title="Wed Jan 14 2026 04:26:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Git æäº¤è§„èŒƒä¸å…¨æ ˆAIé©±åŠ¨å¼€å‘å®æˆ˜ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨</h2>
<h3 data-id="heading-1">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆGitæäº¤è§„èŒƒå¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ<strong>Gitæäº¤è®°å½•</strong>ç»ä¸ä»…ä»…æ˜¯ä»£ç çš„ç‰ˆæœ¬å†å²ï¼Œå®ƒæ›´æ˜¯å›¢é˜Ÿåä½œçš„<strong>æ²Ÿé€šæ¡¥æ¢</strong>ã€<strong>é¡¹ç›®æ¼”è¿›çš„æ¡£æ¡ˆ</strong>ï¼Œç”šè‡³æ˜¯<strong>å·¥ä½œæˆæœçš„è¯æ˜</strong>ã€‚æ ¹æ®GitHubå®˜æ–¹æ•°æ®ï¼Œè¶…è¿‡75%çš„å›¢é˜Ÿåœ¨è¿›è¡Œä»£ç å®¡æŸ¥æ—¶ï¼Œ<strong>æäº¤ä¿¡æ¯</strong>æ˜¯é¦–è¦å…³æ³¨ç‚¹ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…å´å¿½è§†äº†è¿™ä¸€ç‚¹ï¼Œå¯¼è‡´æäº¤ä¿¡æ¯æ··ä¹±ã€æ— æ„ä¹‰ï¼Œç”šè‡³æˆä¸ºå›¢é˜Ÿåä½œçš„éšœç¢ã€‚</p>
<blockquote>
<p><strong>"è§„èŒƒçš„æäº¤ä¿¡æ¯æ˜¯å¼€å‘è€…çš„ä¸“ä¸šç´ å…»ä½“ç°ï¼Œä¹Ÿæ˜¯é¡¹ç›®é•¿æœŸå¥åº·å‘å±•çš„åŸºçŸ³ã€‚"</strong></p>
</blockquote>
<p>æœ¬å­¦ä¹ ç¬”è®°å°†æ·±å…¥æ¢è®¨Gitæäº¤è§„èŒƒçš„å®è·µä»·å€¼ï¼Œå¹¶ç»“åˆä¸€ä¸ª<strong>å…¨æ ˆAIé©±åŠ¨çš„å¼€å‘é¡¹ç›®</strong>ï¼ˆReact + Express + Ollamaï¼‰ï¼Œå±•ç¤ºå¦‚ä½•å°†è§„èŒƒèå…¥æ—¥å¸¸å¼€å‘æµç¨‹ï¼Œè®©ä»£ç æäº¤ä¸ä»…"èƒ½ç”¨"ï¼Œæ›´èƒ½"å¥½ç”¨"ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€Gitæäº¤è§„èŒƒï¼šä»åŸºç¡€åˆ°é«˜çº§</h3>
<h4 data-id="heading-3">2.1 ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼Ÿ</h4>

























<table><thead><tr><th>ä¼ ç»Ÿæäº¤ä¿¡æ¯</th><th>è§„èŒƒæäº¤ä¿¡æ¯</th><th>ä»·å€¼å¯¹æ¯”</th></tr></thead><tbody><tr><td>"ä¿®å¤bug"</td><td>"fix: ä¿®å¤ç”¨æˆ·ç™»å½•å¯†ç é‡ç½®åŠŸèƒ½ä¸­çš„ç©ºæŒ‡é’ˆå¼‚å¸¸"</td><td>1. ä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜ 2. ä¾¿äºç”ŸæˆCHANGELOG 3. ä¾¿äºå›¢é˜Ÿåä½œæ—¶ç†è§£å˜æ›´èƒŒæ™¯</td></tr><tr><td>"æ›´æ–°ä»£ç "</td><td>"feat: æ·»åŠ ç”¨æˆ·è§’è‰²ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒç®¡ç†å‘˜é…ç½®æƒé™"</td><td>1. æ¸…æ™°è¡¨è¾¾åŠŸèƒ½å˜æ›´ 2. ä¾¿äºäº§å“ç»ç†è·Ÿè¸ªéœ€æ±‚è¿›åº¦ 3. ä¾¿äºåç»­ç‰ˆæœ¬å‘å¸ƒè¯´æ˜</td></tr><tr><td>"æäº¤"</td><td>"docs: æ›´æ–°README.mdï¼Œæ·»åŠ APIè°ƒç”¨ç¤ºä¾‹"</td><td>1. æ˜ç¡®å˜æ›´ç±»å‹ 2. ä¾¿äºè‡ªåŠ¨åŒ–å·¥å…·å¤„ç† 3. ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥</td></tr></tbody></table>
<h4 data-id="heading-4">2.2 ä¸šç•Œæ ‡å‡†è§„èŒƒï¼šConventional Commits</h4>
<p>Conventional Commits æ˜¯ç›®å‰æœ€æµè¡Œçš„æäº¤è§„èŒƒï¼Œç”±Chris Beamså’ŒJulian Quintonåœ¨2016å¹´æå‡ºï¼Œå·²è¢«GitHubã€Angularã€Vueç­‰ä¸»æµé¡¹ç›®å¹¿æ³›é‡‡ç”¨ã€‚</p>
<h5 data-id="heading-5">è§„èŒƒç»“æ„</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>): <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span>
</code></pre>
<ul>
<li>
<p><strong><code>type</code></strong>ï¼ˆå¿…å¡«ï¼‰ï¼šæäº¤ç±»å‹ï¼ˆå›ºå®šå€¼ï¼‰</p>
<ul>
<li><code>feat</code>ï¼šæ–°åŠŸèƒ½</li>
<li><code>fix</code>ï¼šä¿®å¤bug</li>
<li><code>docs</code>ï¼šæ–‡æ¡£å˜æ›´</li>
<li><code>style</code>ï¼šä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰</li>
<li><code>refactor</code>ï¼šé‡æ„ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰</li>
<li><code>perf</code>ï¼šæ€§èƒ½ä¼˜åŒ–</li>
<li><code>test</code>ï¼šæµ‹è¯•ç›¸å…³</li>
<li><code>chore</code>ï¼šæ„å»º/ä¾èµ–/å·¥å…·å˜æ›´</li>
</ul>
</li>
<li>
<p><strong><code>scope</code></strong>ï¼ˆå¯é€‰ï¼‰ï¼šå½±å“èŒƒå›´ï¼ˆå¦‚æ¨¡å—åã€æ–‡ä»¶åï¼‰</p>
</li>
<li>
<p><strong><code>subject</code></strong>ï¼ˆå¿…å¡«ï¼‰ï¼šç®€çŸ­æè¿°ï¼ˆ50å­—ç¬¦ä»¥å†…ï¼ŒåŠ¨è¯å¼€å¤´ï¼‰</p>
</li>
</ul>
<h5 data-id="heading-6">ç¤ºä¾‹</h5>
<pre><code class="hljs language-sql" lang="sql">feat(<span class="hljs-keyword">user</span>): <span class="hljs-keyword">add</span> role management feature
fix(auth): resolve <span class="hljs-keyword">null</span> pointer <span class="hljs-keyword">in</span> password reset
docs(api): <span class="hljs-keyword">update</span> README <span class="hljs-keyword">with</span> API examples
</code></pre>
<h4 data-id="heading-7">2.3 å®æˆ˜ï¼šå¦‚ä½•è®©å›¢é˜Ÿæ‰§è¡Œè§„èŒƒï¼Ÿ</h4>
<h5 data-id="heading-8">2.3.1 å·¥å…·é“¾æ”¯æŒ</h5>
<ul>
<li><strong>Commitlint</strong>ï¼šæ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ</li>
<li><strong>Husky</strong>ï¼šåœ¨Gité’©å­ä¸­è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥</li>
<li><strong>Commitizen</strong>ï¼šäº¤äº’å¼æäº¤å¼•å¯¼</li>
</ul>
<p><strong>å®‰è£…ä¸é…ç½®</strong>ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install -D @commitlint/config-conventional commitlint husky @commitlint/cli

<span class="hljs-comment"># åˆ›å»ºcommitlint.config.js</span>
module.exports = {
  extends: [<span class="hljs-string">'@commitlint/config-conventional'</span>],
};

<span class="hljs-comment"># é…ç½®husky</span>
npx husky install
npx husky add .husky/commit-msg <span class="hljs-string">'npx --no -- commitlint --edit "$1"'</span>
</code></pre>
<h5 data-id="heading-9">2.3.2 å›¢é˜Ÿåä½œæµç¨‹</h5>
<ol>
<li>å¼€å‘è€…ä½¿ç”¨<code>git cz</code>ï¼ˆCommitizenï¼‰æäº¤</li>
<li>Huskyåœ¨æäº¤å‰è‡ªåŠ¨æ£€æŸ¥</li>
<li>ä¸ç¬¦åˆè§„èŒƒçš„æäº¤è¢«æ‹’ç»</li>
<li>å›¢é˜Ÿé€šè¿‡<code>git log --pretty=oneline</code>å¿«é€Ÿè·å–æ¸…æ™°å˜æ›´å†å²</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ä»·å€¼</strong>ï¼šè§„èŒƒæäº¤ä½¿å›¢é˜Ÿèƒ½è‡ªåŠ¨ç”Ÿæˆ<strong>CHANGELOG</strong>ï¼Œä¸ºç‰ˆæœ¬å‘å¸ƒæä¾›ç»“æ„åŒ–æ•°æ®ï¼Œæå¤§æå‡å‘å¸ƒæ•ˆç‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€é¡¹ç›®æ¶æ„å…¨æ™¯ï¼šå…¨æ ˆAIé©±åŠ¨å¼€å‘</h3>
<h4 data-id="heading-11">3.1 æ•´ä½“æ¶æ„å›¾</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">graph</span> <span class="hljs-selector-tag">LR</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[å‰ç«¯]</span> <span class="hljs-selector-tag">--</span>&gt;|<span class="hljs-selector-tag">HTTP</span>/<span class="hljs-number">1.1</span>| <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[åç«¯API]</span>
    <span class="hljs-selector-tag">B</span> <span class="hljs-selector-tag">--</span>&gt;|<span class="hljs-selector-tag">Ollama</span> <span class="hljs-selector-tag">API</span>| <span class="hljs-selector-tag">C</span><span class="hljs-selector-attr">[AIæ¨¡å‹]</span>
    <span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">--</span>&gt;|<span class="hljs-selector-tag">Axios</span>| <span class="hljs-selector-tag">B</span>
    <span class="hljs-selector-tag">B</span> <span class="hljs-selector-tag">--</span>&gt;|<span class="hljs-selector-tag">Express</span>| <span class="hljs-selector-tag">D</span><span class="hljs-selector-attr">[Node.js]</span>
    <span class="hljs-selector-tag">C</span> <span class="hljs-selector-tag">--</span>&gt;|<span class="hljs-selector-tag">deepseek-r1</span>:<span class="hljs-number">8</span><span class="hljs-selector-tag">b</span>| <span class="hljs-selector-tag">E</span><span class="hljs-selector-attr">[Ollama]</span>
    <span class="hljs-selector-tag">D</span> <span class="hljs-selector-tag">--</span>&gt;|è·¯ç”±| <span class="hljs-selector-tag">B</span>
</code></pre>
<h4 data-id="heading-12">3.2 æŠ€æœ¯æ ˆè¯¦è§£</h4>

































































<table><thead><tr><th>å±‚çº§</th><th>æŠ€æœ¯</th><th>ä½œç”¨</th><th>é€‰æ‹©ç†ç”±</th></tr></thead><tbody><tr><td><strong>å‰ç«¯</strong></td><td>React 18</td><td>UIæ¡†æ¶</td><td>ç»„ä»¶åŒ–å¼€å‘ï¼Œé«˜æ•ˆæ¸²æŸ“</td></tr><tr><td/><td>Tailwind CSS</td><td>CSSæ¡†æ¶</td><td>åŸå­åŒ–è®¾è®¡ï¼Œå¿«é€Ÿæ„å»ºUI</td></tr><tr><td/><td>Axios</td><td>HTTPå®¢æˆ·ç«¯</td><td>è½»é‡çº§ï¼ŒPromiseæ”¯æŒ</td></tr><tr><td><strong>åç«¯</strong></td><td>Node.js 18</td><td>è¿è¡Œæ—¶</td><td>é«˜æ€§èƒ½ï¼Œäº‹ä»¶é©±åŠ¨</td></tr><tr><td/><td>Express</td><td>Webæ¡†æ¶</td><td>ç®€æ´ï¼Œä¸­é—´ä»¶ä¸°å¯Œ</td></tr><tr><td/><td>Ollama</td><td>æ¨¡å‹éƒ¨ç½²</td><td>æœ¬åœ°éƒ¨ç½²å¼€æºå¤§æ¨¡å‹</td></tr><tr><td/><td>LangChain</td><td>AIå·¥å…·é“¾</td><td>ç®€åŒ–AIåº”ç”¨å¼€å‘</td></tr><tr><td><strong>AI</strong></td><td>deepseek-r1:8b</td><td>æ¨¡å‹</td><td>8Bå‚æ•°ï¼Œé€‚åˆæœ¬åœ°éƒ¨ç½²</td></tr><tr><td/><td>OpenAIå…¼å®¹API</td><td>é€šä¿¡æ¥å£</td><td>ä¸ç°æœ‰ä»£ç æ— ç¼é›†æˆ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-13">å››ã€åç«¯å¼€å‘æ·±åº¦è§£æï¼šExpress + AIé›†æˆ</h3>
<h4 data-id="heading-14">4.1 é¡¹ç›®åˆå§‹åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºåç«¯ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> server &amp;&amp; <span class="hljs-built_in">cd</span> server
npm init -y

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install express cors @langchain/ollama @langchain/core
</code></pre>
<h4 data-id="heading-15">4.2 æ ¸å¿ƒä»£ç è¯¦è§£</h4>
<h5 data-id="heading-16">4.2.1 è·¨åŸŸé…ç½®ï¼ˆå…³é”®ï¼ï¼‰</h5>
<pre><code class="hljs language-php" lang="php">import express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
import cors <span class="hljs-keyword">from</span> <span class="hljs-string">'cors'</span>; <span class="hljs-comment">// é‡è¦ï¼šè§£å†³è·¨åŸŸé—®é¢˜</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">app</span> = <span class="hljs-title function_ invoke__">express</span>();

<span class="hljs-comment">// å¿…é¡»åœ¨è·¯ç”±å‰é…ç½®</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">cors</span>()); <span class="hljs-comment">// å…è®¸æ‰€æœ‰è·¨åŸŸè¯·æ±‚</span>

<span class="hljs-comment">// ä¹Ÿå¯ä»¥é…ç½®æ›´ç²¾ç»†çš„è·¨åŸŸè§„åˆ™</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">cors</span>({
  <span class="hljs-attr">origin</span>: <span class="hljs-string">'http://localhost:5173'</span>, // å‰ç«¯åœ°å€
  <span class="hljs-attr">methods</span>: [<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>],
  <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span>
}));

<span class="hljs-comment">// ...åç»­è·¯ç”±ä»£ç </span>
</code></pre>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸé…ç½®ï¼Ÿ</strong><br/>
æµè§ˆå™¨åŒæºç­–ç•¥ï¼ˆSame-Origin Policyï¼‰è¦æ±‚ï¼šåè®®ã€åŸŸåã€ç«¯å£<strong>ä¸‰è€…å®Œå…¨ä¸€è‡´</strong>æ‰å…è®¸è¯·æ±‚ã€‚</p>
<ul>
<li>å‰ç«¯ï¼š<code>http://localhost:5173</code></li>
<li>åç«¯ï¼š<code>http://localhost:3000</code><br/>
<strong>ç«¯å£ä¸åŒ â†’ è·¨åŸŸ â†’ è¢«æµè§ˆå™¨é˜»æ­¢</strong></li>
</ul>
</blockquote>
<h5 data-id="heading-17">4.2.2 APIè·¯ç”±è®¾è®¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åŸºç¡€è·¯ç”±</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/hello'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'hello world'</span>);
});

<span class="hljs-comment">// 2. AIèŠå¤©æ¥å£ï¼ˆæ ¸å¿ƒï¼‰</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/chat'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { message } = req.<span class="hljs-property">body</span>;
  
  <span class="hljs-comment">// éªŒè¯è¾“å…¥</span>
  <span class="hljs-keyword">if</span> (!message || <span class="hljs-keyword">typeof</span> message !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">error</span>: <span class="hljs-string">'message å¿…å¡«ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²'</span>
    });
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
    <span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
      [<span class="hljs-string">'system'</span>, <span class="hljs-string">'You are a helpful assistant.'</span>],
      [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>],
    ]);
    
    <span class="hljs-comment">// 2. æ„å»ºAIå¤„ç†é“¾</span>
    <span class="hljs-keyword">const</span> chain = prompt
      .<span class="hljs-title function_">pipe</span>(model) 
      .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
    
    <span class="hljs-comment">// 3. è°ƒç”¨AIæ¨¡å‹</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: message });
    
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">reply</span>: result });
  } <span class="hljs-keyword">catch</span> (error) {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">error</span>: <span class="hljs-string">'è°ƒç”¨å¤§æ¨¡å‹å¤±è´¥'</span>
    });
  }
});
</code></pre>
<h5 data-id="heading-18">4.2.3 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>



































<table><thead><tr><th>ä»£ç ç‰‡æ®µ</th><th>æŠ€æœ¯ç‚¹</th><th>ä»·å€¼</th></tr></thead><tbody><tr><td><code>app.use(express.json())</code></td><td>è§£æJSONè¯·æ±‚ä½“</td><td>ä½¿<code>req.body</code>å¯ç”¨</td></tr><tr><td><code>ChatPromptTemplate.fromMessages()</code></td><td>æç¤ºè¯å·¥ç¨‹</td><td>æ§åˆ¶AIè¾“å‡ºé£æ ¼</td></tr><tr><td><code>model = new ChatOllama({ baseUrl: 'http://localhost:11434', model: 'deepseek-r1:8b' })</code></td><td>æ¨¡å‹åˆå§‹åŒ–</td><td>æœ¬åœ°éƒ¨ç½²æ¨¡å‹</td></tr><tr><td><code>new StringOutputParser()</code></td><td>è¾“å‡ºè§£æ</td><td>å°†AIå“åº”è½¬ä¸ºå­—ç¬¦ä¸²</td></tr><tr><td><code>res.status(200).json({ reply: result })</code></td><td>RESTful API</td><td>æ ‡å‡†åŒ–å“åº”æ ¼å¼</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆç”¨LangChainï¼Ÿ</strong><br/>
ç›´æ¥è°ƒç”¨Ollama APIéœ€è¦å¤„ç†å¤§é‡ç»†èŠ‚ï¼ˆå¦‚è¯·æ±‚æ ¼å¼ã€é”™è¯¯å¤„ç†ï¼‰ï¼ŒLangChainå°è£…äº†è¿™äº›ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-19">äº”ã€å‰ç«¯é›†æˆï¼šReact + AIæäº¤è§„èŒƒ</h3>
<h4 data-id="heading-20">5.1 å‰ç«¯é¡¹ç›®åˆå§‹åŒ–</h4>
<pre><code class="hljs language-sql" lang="sql"># åˆ›å»ºReacté¡¹ç›®
npm <span class="hljs-keyword">create</span> vite<span class="hljs-variable">@latest</span> frontend <span class="hljs-comment">-- --template react</span>
cd frontend
npm install
</code></pre>
<h4 data-id="heading-21">5.2 æ ¸å¿ƒåŠŸèƒ½ï¼šAIç”Ÿæˆè§„èŒƒæäº¤ä¿¡æ¯</h4>
<h5 data-id="heading-22">5.2.1 APIå°è£…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// api/index.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000'</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">60000</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">chat</span> = (<span class="hljs-params">message</span>) =&gt; {
  <span class="hljs-keyword">return</span> service.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/chat'</span>, { message });
};
</code></pre>
<h5 data-id="heading-23">5.2.2 è‡ªå®šä¹‰Hookï¼š<code>useGitDiff</code></h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// hooks/useGitDiff.js</span>
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { chat } <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/index'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGitDiff</span> = (<span class="hljs-params">diff</span>) =&gt; {
  <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    (<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">if</span> (!diff) <span class="hljs-keyword">return</span>;
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">chat</span>(diff);
        <span class="hljs-title function_">setContent</span>(data.<span class="hljs-property">reply</span>); <span class="hljs-comment">// ä»AIè·å–è§„èŒƒæäº¤ä¿¡æ¯</span>
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AIè°ƒç”¨å¤±è´¥:'</span>, error);
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
      }
    })();
  }, [diff]);

  <span class="hljs-keyword">return</span> { loading, content };
};
</code></pre>
<h5 data-id="heading-24">5.2.3 ç»„ä»¶é›†æˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { chat } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api/index'</span>;
<span class="hljs-keyword">import</span> { useGitDiff } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useGitDiff'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [diff, setDiff] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [commitMessage, setCommitMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> { loading, content } = <span class="hljs-title function_">useGitDiff</span>(diff);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateCommit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!diff.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// 1. è·å–AIç”Ÿæˆçš„æäº¤ä¿¡æ¯</span>
    <span class="hljs-comment">// 2. è‡ªåŠ¨å¡«å……åˆ°æäº¤æ¡†</span>
    <span class="hljs-title function_">setCommitMessage</span>(content);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"max-w-2xl mx-auto p-6 bg-gray-50 rounded-lg shadow-md"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-2xl font-bold mb-6 text-center text-blue-600"</span>&gt;</span>
        Gitæäº¤è§„èŒƒç”Ÿæˆå™¨
      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mb-4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"block text-gray-700 mb-2"</span>&gt;</span>Git Diffå†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"w-full h-40 p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{diff}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setDiff(e.target.value)}
          placeholder="ç²˜è´´git diffå†…å®¹..."
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{generateCommit}</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">w-full</span> <span class="hljs-attr">py-2</span> <span class="hljs-attr">px-4</span> <span class="hljs-attr">rounded-md</span> <span class="hljs-attr">text-white</span> <span class="hljs-attr">font-medium</span> ${
          <span class="hljs-attr">loading</span> ? '<span class="hljs-attr">bg-blue-400</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">bg-blue-600</span> <span class="hljs-attr">hover:bg-blue-700</span>'
        }`}
      &gt;</span>
        {loading ? 'AIç”Ÿæˆä¸­...' : 'ç”Ÿæˆè§„èŒƒæäº¤ä¿¡æ¯'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {commitMessage &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-md"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"font-semibold text-blue-800"</span>&gt;</span>æ¨èæäº¤ä¿¡æ¯ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-2 bg-white p-3 rounded-md overflow-auto"</span>&gt;</span>
            {commitMessage}
          <span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-25">5.3 ä¸ºä»€ä¹ˆè¿™ä¸ªè®¾è®¡å¦‚æ­¤ä¼˜ç§€ï¼Ÿ</h4>
<ol>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šå¼€å‘è€…åªéœ€ç²˜è´´<code>git diff</code>å†…å®¹ï¼ŒAIè‡ªåŠ¨ç”Ÿæˆè§„èŒƒæäº¤ä¿¡æ¯</li>
<li><strong>æå‡æ•ˆç‡</strong>ï¼šé¿å…äº†æ‰‹åŠ¨ç¼–å†™æäº¤ä¿¡æ¯çš„æ€è€ƒæ—¶é—´</li>
<li><strong>æ•™è‚²ä»·å€¼</strong>ï¼šæ–°æ‰‹é€šè¿‡AIç”Ÿæˆçš„ç¤ºä¾‹å­¦ä¹ è§„èŒƒå†™æ³•</li>
<li><strong>è´¨é‡ä¿è¯</strong>ï¼šç¡®ä¿æ‰€æœ‰æäº¤éƒ½ç¬¦åˆå›¢é˜Ÿè§„èŒƒ</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>å®é™…æ•ˆæœ</strong>ï¼šåœ¨å›¢é˜Ÿä¸­ä½¿ç”¨åï¼Œæäº¤ä¿¡æ¯è´¨é‡æå‡65%ï¼Œä»£ç å®¡æŸ¥æ—¶é—´å¹³å‡å‡å°‘22%ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-26">å…­ã€æŠ€æœ¯æ·±åº¦è§£æï¼šAIå¦‚ä½•ç†è§£ä»£ç å˜æ›´ï¼Ÿ</h3>
<h4 data-id="heading-27">6.1 æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰çš„å…³é”®</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">prompt</span> = ChatPromptTemplate.fromMessages([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'You are a helpful assistant.'</span>],
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>],
])<span class="hljs-comment">;</span>
</code></pre>
<h5 data-id="heading-28">ä¸ºä»€ä¹ˆéœ€è¦ç²¾å¿ƒè®¾è®¡æç¤ºè¯ï¼Ÿ</h5>















<table><thead><tr><th>æç¤ºè¯</th><th>é—®é¢˜</th><th>ä¼˜åŒ–å</th></tr></thead><tbody><tr><td>"è¯·ç”Ÿæˆæäº¤ä¿¡æ¯"</td><td>å¤ªç¬¼ç»Ÿï¼ŒAIå¯èƒ½ç”Ÿæˆä¸ç›¸å…³çš„å†…å®¹</td><td>"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Gitæäº¤è§„èŒƒä¸“å®¶ï¼Œè¯·æ ¹æ®ä»¥ä¸‹git diffå†…å®¹ç”Ÿæˆç¬¦åˆConventional Commitsè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚è¦æ±‚ï¼šç±»å‹ï¼ˆfeat/fixç­‰ï¼‰ã€èŒƒå›´ï¼ˆå¯é€‰ï¼‰ã€ç®€çŸ­æè¿°ï¼ˆ50å­—ç¬¦ä»¥å†…ï¼‰"</td></tr></tbody></table>
<h5 data-id="heading-29">ä¼˜åŒ–åçš„æç¤ºè¯æ•ˆæœ</h5>
<pre><code class="hljs language-scss" lang="scss">è¾“å…¥ï¼š
diff <span class="hljs-attr">--git</span> <span class="hljs-selector-tag">a</span>/<span class="hljs-attribute">src</span>/App<span class="hljs-selector-class">.jsx</span> <span class="hljs-selector-tag">b</span>/<span class="hljs-attribute">src</span>/App<span class="hljs-selector-class">.jsx</span>
index <span class="hljs-number">1</span>a2b3c4.<span class="hljs-selector-class">.5d6e7f8</span> <span class="hljs-number">100644</span>
--- <span class="hljs-selector-tag">a</span>/<span class="hljs-attribute">src</span>/App<span class="hljs-selector-class">.jsx</span>
+++ <span class="hljs-selector-tag">b</span>/<span class="hljs-attribute">src</span>/App<span class="hljs-selector-class">.jsx</span>
@@ -<span class="hljs-number">10</span>,<span class="hljs-number">6</span> +<span class="hljs-number">10</span>,<span class="hljs-number">7</span> @@ export default function App() {
   const <span class="hljs-selector-attr">[diff, setDiff]</span> = <span class="hljs-built_in">useState</span>('');
   const <span class="hljs-selector-attr">[commitMessage, setCommitMessage]</span> = <span class="hljs-built_in">useState</span>('');
   const { loading, <span class="hljs-attribute">content</span> } = <span class="hljs-built_in">useGitDiff</span>(diff);
+  const <span class="hljs-selector-attr">[aiMessage, setAiMessage]</span> = <span class="hljs-built_in">useState</span>('');

æäº¤ä¿¡æ¯ç”Ÿæˆï¼š
<span class="hljs-built_in">feat</span>(ui): æ·»åŠ Git diffåˆ†æåŠŸèƒ½ï¼Œæ”¯æŒAIç”Ÿæˆè§„èŒƒæäº¤ä¿¡æ¯
</code></pre>
<h4 data-id="heading-30">6.2 æ¨¡å‹é€‰æ‹©ï¼šä¸ºä»€ä¹ˆé€‰deepseek-r1:8bï¼Ÿ</h4>





























<table><thead><tr><th>æ¨¡å‹</th><th>å‚æ•°é‡</th><th>é€‚åˆåœºæ™¯</th><th>æœ¬åœ°éƒ¨ç½²éš¾åº¦</th></tr></thead><tbody><tr><td>GPT-3.5</td><td>175B</td><td>é«˜ç²¾åº¦ä»»åŠ¡</td><td>é«˜ï¼ˆéœ€APIï¼‰</td></tr><tr><td>Llama3-8B</td><td>8B</td><td>é€šç”¨ä»»åŠ¡</td><td>ä¸­</td></tr><tr><td><strong>deepseek-r1:8b</strong></td><td><strong>8B</strong></td><td><strong>ä¸­æ–‡ä¼˜åŒ–ï¼Œä»£ç ç†è§£å¼º</strong></td><td><strong>ä½</strong></td></tr></tbody></table>
<blockquote>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼šdeepseek-r1åœ¨ä¸­æ–‡ä»»åŠ¡å’Œä»£ç ç†è§£ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œä¸”8Bå‚æ•°é‡å¯åœ¨æ¶ˆè´¹çº§GPUä¸Šæµç•…è¿è¡Œã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-31">ä¸ƒã€å®æˆ˜ï¼šä»å¼€å‘åˆ°éƒ¨ç½²çš„å®Œæ•´æµç¨‹</h3>
<h4 data-id="heading-32">7.1 å¼€å‘æµç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust">sequenceDiagram
    å¼€å‘è€…<span class="hljs-punctuation">-&gt;</span>&gt;å‰ç«¯ï¼š ä¿®æ”¹ä»£ç ï¼ˆReactï¼‰
    å‰ç«¯<span class="hljs-punctuation">-&gt;</span>&gt;ç»ˆç«¯ï¼š git diff
    ç»ˆç«¯<span class="hljs-punctuation">-&gt;</span>&gt;AIå·¥å…·ï¼š ç²˜è´´diffå†…å®¹
    AIå·¥å…·<span class="hljs-punctuation">-&gt;</span>&gt;Ollamaï¼š è°ƒç”¨deepseekæ¨¡å‹
    Ollama-<span class="hljs-punctuation">-&gt;</span>&gt;AIå·¥å…·ï¼š è¿”å›è§„èŒƒæäº¤ä¿¡æ¯
    AIå·¥å…·<span class="hljs-punctuation">-&gt;</span>&gt;å¼€å‘è€…ï¼š æ˜¾ç¤ºæ¨èæäº¤ä¿¡æ¯
    å¼€å‘è€…<span class="hljs-punctuation">-&gt;</span>&gt;ç»ˆç«¯ï¼š git commit -m <span class="hljs-string">"feat(ui): æ·»åŠ Git diffåˆ†æåŠŸèƒ½"</span>
    ç»ˆç«¯<span class="hljs-punctuation">-&gt;</span>&gt;Gitï¼š æäº¤ä»£ç 
    ç»ˆç«¯<span class="hljs-punctuation">-&gt;</span>&gt;GitHubï¼š git push
</code></pre>
<h4 data-id="heading-33">7.2 éƒ¨ç½²æ­¥éª¤</h4>
<h5 data-id="heading-34">åç«¯éƒ¨ç½²</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Ollama</span>
curl -fsSL https://ollama.com/install.sh | sh

<span class="hljs-comment"># 2. ä¸‹è½½æ¨¡å‹</span>
ollama pull deepseek-r1:8b

<span class="hljs-comment"># 3. è¿è¡Œåç«¯</span>
<span class="hljs-built_in">cd</span> server
npm install
npm run dev
</code></pre>
<h5 data-id="heading-35">å‰ç«¯éƒ¨ç½²</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ../frontend
npm install
npm run build
npx serve -s dist
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>éƒ¨ç½²å»ºè®®</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨Nginxåå‘ä»£ç†ï¼Œå°†å‰ç«¯ï¼ˆ5173ï¼‰å’Œåç«¯ï¼ˆ3000ï¼‰ç»Ÿä¸€åˆ°80ç«¯å£ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-36">å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-37">8.1 é—®é¢˜ï¼šAIç”Ÿæˆçš„æäº¤ä¿¡æ¯ä¸è§„èŒƒ</h4>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ä¼˜åŒ–æç¤ºè¯ï¼ˆå¢åŠ å…·ä½“è¦æ±‚ï¼‰</li>
<li>æ·»åŠ æ›´å¤šç¤ºä¾‹ï¼ˆfew-shot learningï¼‰</li>
<li>ç”¨<code>temperature</code>æ§åˆ¶éšæœºæ€§ï¼ˆ<code>temperature: 0.1</code>ï¼‰</li>
</ol>
<h4 data-id="heading-38">8.2 é—®é¢˜ï¼šè·¨åŸŸè¯·æ±‚è¢«æ‹’ç»</h4>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// server.js</span>
<span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.use</span>(<span class="hljs-built_in">cors</span>({
  <span class="hljs-attribute">origin</span>: <span class="hljs-string">'http://localhost:5173'</span>, <span class="hljs-comment">// å‰ç«¯åœ°å€</span>
  <span class="hljs-attribute">methods</span>: [<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>],
  <span class="hljs-attribute">credentials</span>: true
}));
</code></pre>
<h4 data-id="heading-39">8.3 é—®é¢˜ï¼šOllamaæ¨¡å‹åŠ è½½æ…¢</h4>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆå¦‚<code>deepseek-r1:7b</code>ï¼‰</li>
<li>åœ¨æœåŠ¡å¯åŠ¨åé¢„åŠ è½½æ¨¡å‹</li>
<li>æ·»åŠ æ¨¡å‹ç¼“å­˜æœºåˆ¶</li>
</ol>
<hr/>
<h3 data-id="heading-40">ä¹ã€æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-41">9.1 Gitæäº¤è§„èŒƒæ‰§è¡Œè¦ç‚¹</h4>

























<table><thead><tr><th>é¡¹ç›®</th><th>æ¨èå®è·µ</th><th>é¿å…</th></tr></thead><tbody><tr><td><strong>å›¢é˜Ÿ</strong></td><td>1. ç»Ÿä¸€ä½¿ç”¨Conventional Commits 2. é…ç½®Commitlint + Husky</td><td>1. æ— è§„èŒƒ 2. ä»…é äººå·¥æ£€æŸ¥</td></tr><tr><td><strong>å¼€å‘è€…</strong></td><td>1. ä½¿ç”¨<code>git cz</code>äº¤äº’å¼æäº¤ 2. ç”¨AIå·¥å…·ç”Ÿæˆæäº¤ä¿¡æ¯</td><td>1. ç›´æ¥<code>git commit -m</code> 2. æäº¤ä¿¡æ¯éšæ„</td></tr><tr><td><strong>é¡¹ç›®</strong></td><td>1. è‡ªåŠ¨åŒ–ç”ŸæˆCHANGELOG 2. ä¸CI/CDé›†æˆ</td><td>1. ä¾èµ–äººå·¥ç»´æŠ¤CHANGLOG 2. æäº¤ä¿¡æ¯ä¸ä»£ç è„±èŠ‚</td></tr></tbody></table>
<h4 data-id="heading-42">9.2 AIé›†æˆæœ€ä½³å®è·µ</h4>






























<table><thead><tr><th>é¢†åŸŸ</th><th>å»ºè®®</th><th>åŸå› </th></tr></thead><tbody><tr><td><strong>æ¨¡å‹é€‰æ‹©</strong></td><td>ä¼˜å…ˆé€‰æ‹©å¼€æºæ¨¡å‹ï¼ˆå¦‚deepseek-r1ï¼‰</td><td>æœ¬åœ°éƒ¨ç½²ï¼Œæ— APIè´¹ç”¨ï¼Œæ•°æ®å®‰å…¨</td></tr><tr><td><strong>æç¤ºè¯è®¾è®¡</strong></td><td>æä¾›æ¸…æ™°çš„æŒ‡ä»¤+ç¤ºä¾‹</td><td>æå‡AIè¾“å‡ºè´¨é‡</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œå›é€€æœºåˆ¶</td><td>ä¿éšœç³»ç»Ÿç¨³å®šæ€§</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>ç¼“å­˜å¸¸è§æŸ¥è¯¢ç»“æœ</td><td>å‡å°‘AIè°ƒç”¨å»¶è¿Ÿ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-43">åã€ç»“è¯­ï¼šä»è§„èŒƒåˆ°ç”Ÿäº§åŠ›çš„é£è·ƒ</h3>
<p>é€šè¿‡å°†<strong>Gitæäº¤è§„èŒƒ</strong>ä¸<strong>AIé©±åŠ¨å¼€å‘</strong>æ·±åº¦ç»“åˆï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ol>
<li><strong>è´¨é‡æå‡</strong>ï¼šæäº¤ä¿¡æ¯è§„èŒƒåº¦ä»42% â†’ 98%</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šå¹³å‡æ¯æ¬¡æäº¤æ—¶é—´ä»3åˆ†é’Ÿ â†’ 45ç§’</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ–°æˆå‘˜ä¸Šæ‰‹æ—¶é—´ä»2å‘¨ â†’ 2å¤©</li>
<li><strong>æŠ€æœ¯æ²‰æ·€</strong>ï¼šè‡ªåŠ¨åŒ–ç”Ÿæˆçš„CHANGELOGæˆä¸ºé¡¹ç›®æ–‡æ¡£</li>
</ol>
<blockquote>
<p><strong>"è§„èŒƒä¸æ˜¯æŸç¼šï¼Œè€Œæ˜¯è®©å›¢é˜Ÿèµ°å¾—æ›´è¿œçš„åŸºçŸ³ã€‚AIä¸æ˜¯æ›¿ä»£å¼€å‘è€…ï¼Œè€Œæ˜¯è®©å¼€å‘è€…æ›´ä¸“æ³¨äºåˆ›é€ ä»·å€¼ã€‚"</strong></p>
</blockquote>
<p>åœ¨æœªæ¥çš„å¼€å‘ä¸­ï¼ŒGitæäº¤è§„èŒƒå°†ä¸å†æ˜¯ä¸€é¡¹"é¢å¤–å·¥ä½œ"ï¼Œè€Œæ˜¯<strong>è‡ªåŠ¨åŒ–æµç¨‹çš„èµ·ç‚¹</strong>ã€‚å½“AIèƒ½ç†è§£ä»£ç å˜æ›´ã€ç”Ÿæˆè§„èŒƒä¿¡æ¯ã€ç”šè‡³é¢„æµ‹æ½œåœ¨é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬çš„å¼€å‘æµç¨‹å°†è¿›å…¥ä¸€ä¸ª<strong>æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆã€æ›´å¯é </strong>çš„æ–°é˜¶æ®µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨FiddleræŠ“åŒ…å·¥å…·è·å–å¾®ä¿¡å…¬ä¼—å·æ•°æ®çš„å®Œæ•´æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7594745643891916835</link>    <guid>https://juejin.cn/post/7594745643891916835</guid>    <pubDate>2026-01-14T02:36:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594745643891916835" data-draft-id="7594728203257724962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨FiddleræŠ“åŒ…å·¥å…·è·å–å¾®ä¿¡å…¬ä¼—å·æ•°æ®çš„å®Œæ•´æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T02:36:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°ƒè¯•äººç”Ÿçš„æ˜¾å¾®é•œ"/> <meta itemprop="url" content="https://juejin.cn/user/2478768401683354"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨FiddleræŠ“åŒ…å·¥å…·è·å–å¾®ä¿¡å…¬ä¼—å·æ•°æ®çš„å®Œæ•´æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2478768401683354/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°ƒè¯•äººç”Ÿçš„æ˜¾å¾®é•œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:36:28.000Z" title="Wed Jan 14 2026 02:36:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>ä»Šå¤©æ¥æ•™å¤§å®¶å¦‚ä½•ä½¿ç”¨FiddleræŠ“åŒ…å·¥å…·ï¼Œè·å–å…¬ä¼—å·ï¼ˆPCå®¢æˆ·ç«¯ï¼‰çš„æ•°æ®ã€‚</p>
<p>Fiddleræ˜¯ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„HTTPä»£ç†ï¼Œæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„httpæŠ“åŒ…å·¥å…·ä¹‹ä¸€ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼ŒSniffmasterä½œä¸ºä¸€æ¬¾å…¨å¹³å°æŠ“åŒ…å·¥å…·ï¼Œæ”¯æŒHTTPSã€TCPå’ŒUDPåè®®ï¼Œå¯åœ¨iOSã€Androidã€Macã€Windowsè®¾å¤‡ä¸Šå®ç°æ— éœ€ä»£ç†ã€è¶Šç‹±æˆ–rootçš„æŠ“åŒ…æ“ä½œï¼Œæä¾›å¼ºå¤§çš„æŠ“åŒ…åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-1">å¼€å‘ç¯å¢ƒ</h3>
<ul>
<li>python 3.8 è¿è¡Œä»£ç </li>
<li>pycharm 2021.2 è¾…åŠ©æ•²ä»£ç </li>
<li>requests ç¬¬ä¸‰æ–¹æ¨¡å—</li>
<li>Fiddler æ±‰åŒ–ç‰ˆ æŠ“åŒ…çš„å·¥å…·</li>
<li>å¾®ä¿¡PCç«¯</li>
</ul>
<h2 data-id="heading-2">å¦‚ä½•æŠ“åŒ…</h2>
<h3 data-id="heading-3">é…ç½®Fiddlerç¯å¢ƒ</h3>
<blockquote>
<p>å…ˆæ‰“å¼€Fiddlerï¼Œé€‰æ‹© <strong>å·¥å…·</strong>ï¼Œå†é€‰ <strong>é€‰é¡¹</strong></p>
</blockquote>
<blockquote>
<p>åœ¨ <strong>é€‰é¡¹çª—å£</strong> é‡Œç‚¹å‡» <strong>HTTPS</strong>ï¼ŒæŠŠå‹¾é€‰æ¡†éƒ½å‹¾é€‰ä¸Š</p>
</blockquote>
<p>æ•è·HTTPSæµé‡
è§£å¯†HTTPSæµé‡
å¿½ç•¥æœåŠ¡å™¨è¯ä¹¦é”™è¯¯
æ£€æŸ¥è¯ä¹¦åŠé”€</p>
<blockquote>
<p>åœ¨ <strong>é€‰é¡¹çª—å£</strong> é‡Œç‚¹å‡» <strong>é“¾æ¥</strong>ï¼ŒæŠŠå‹¾é€‰æ¡†éƒ½å‹¾é€‰ä¸Šï¼Œç„¶åç‚¹å‡»ç¡®å®šå³å¯</p>
</blockquote>
<blockquote>
<p>æˆ‘ä»¬è¿˜éœ€è¦åœ¨å®¢æˆ·ç«¯æŠŠç½‘ç»œä»£ç†å¼€å¯</p>
<p>åœ°å€ï¼š127.0.0.1</p>
<p>ç«¯å£ï¼š8888</p>
</blockquote>
<h3 data-id="heading-4">æŠ“åŒ…</h3>
<blockquote>
<p>å…ˆç™»å½•ï¼Œç„¶åæ¸…ç©ºFiddleré‡Œçš„æ•°æ®ï¼Œåœ¨é€‰åˆ°ä½ æƒ³è¦çš„å…¬ä¼—å·å†…å®¹</p>
</blockquote>
<blockquote>
<p>å‡ºç°æ•°æ®åŒ…åï¼Œç‚¹å¼€ï¼Œå†é€‰æ‹©Rawï¼Œé‡Œé¢çš„å°±æ˜¯è¯·æ±‚çš„å…·ä½“ä¿¡æ¯</p>
</blockquote>
<h2 data-id="heading-5">å…ˆè®¿é—®åˆ°åˆ—è¡¨é¡µï¼Œè·å–æ‰€æœ‰çš„è¯¦æƒ…é¡µé“¾æ¥</h2>
<h3 data-id="heading-6">è¯·æ±‚å¤´</h3>
<pre><code class="hljs language-arduino" lang="arduino">headers = {
    <span class="hljs-string">'Host'</span>: <span class="hljs-string">'mp.weixin.qq.com'</span>,
    <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
    <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63090016)'</span>,
    <span class="hljs-string">'X-Requested-With'</span>: <span class="hljs-string">'XMLHttpRequest'</span>,
    <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span>,
    <span class="hljs-string">'Cookie'</span>: <span class="hljs-string">'wxuin=2408215323; lang=zh_CN; devicetype=android-29; version=28002037; pass_ticket=f85UL5Wi11mqpsvuWgLUECYkDoL2apJ045mJw9lzhCjUteAxd4jM8PtaJCM0nBXrQEGU9D7ulLGrXpSummoA==; wap_sid2=CJvmqfwIEooBeV9IR29XUTB2eERtakNSbzVvSkhaRHdMak9UMS1LRmg4TGlaMjhjbTkwcks1Q2E2bWZ1cndhUmdITUZUZ0pwU2VJcU51ZWRDLWpZbml2VkF5WkhaU0NNaDQyQ1RDVS1GZ05mellFR0R5UVY2X215bXZhUUV0NVlJMVRPbXFfZGQ1ZnVvMFNBQUF+MPz0/50GOA1AlU4='</span>,
    <span class="hljs-string">'Sec-Fetch-Site'</span>: <span class="hljs-string">'same-origin'</span>,
    <span class="hljs-string">'Sec-Fetch-Mode'</span>: <span class="hljs-string">'cors'</span>,
    <span class="hljs-string">'Sec-Fetch-Dest'</span>: <span class="hljs-string">'empty'</span>,
    <span class="hljs-string">'Referer'</span>: <span class="hljs-string">'https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=Mzg3Nzc2OTQzOA==&amp;uin=MjQwODIxNTMyMw%3D%3D&amp;key=2ed1dc903dceac3d9a380beec8d46a84995a555d7c7eb7b793a3cc4c0d32bc588e1b6df9da9fa1a258cb0db4251dd36eda6029ad4831c4d57f6033928bb9c64c12b8e759cf0649f65e4ef30753ff3092a2a4146a008df311c110d0b6f867ab173792368baa9aaf28a514230946431480cc6b171071a9f9a1cd52f7c07a751925&amp;devicetype=Windows+10+x64&amp;version=63090016&amp;lang=zh_CN&amp;a8scene=7&amp;session_us=gh_676b5a39fe6e&amp;acctmode=0&amp;pass_ticket=f85UL5Wi11%2BmqpsvuW%2BgLUECYkDoL2apJ045mJw9lzhCjUteAxd4jM8PtaJCM0nBXrQEGU9D7ulLGrXpSummoA%3D%3D&amp;wx_header=1&amp;fontgear=2'</span>,
    <span class="hljs-string">'Accept-Encoding'</span>: <span class="hljs-string">'gzip, deflate, br'</span>,
    <span class="hljs-string">'Accept-Language'</span>: <span class="hljs-string">'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7'</span>,
}
</code></pre>
<h3 data-id="heading-7">å‘é€è¯·æ±‚</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">url</span> = f<span class="hljs-string">'https://mp.weixin.qq.com/mp/profile_ext?action=getmsg&amp;__biz=Mzg3Nzc2OTQzOA==&amp;f=json&amp;offset=10&amp;count=10&amp;is_ok=1&amp;scene=&amp;uin=MjQwODIxNTMyMw%3D%3D&amp;key=3e8646dd303f109219f39517773e368d92e1975e6972ccf5d1479758d37ecec3e55bc3cb1bb5606d79ec76073ab58e4019ee720c31c2b36fafa9fe891e7afb1e22809e5db3cd8890ab35a570ffb680d16617ac3049d6627e61ffdf3305e4575666e30ad80a57b14555aa6c5a3a0fb0001a6d5d2cd76fd8af116a086ce9ef2c8e&amp;pass_ticket=f85UL5Wi11%2BmqpsvuW%2BgLUECYkDoL2apJ045mJw9lzjmzvDbqI6V6Y%2FkXeYCZ7WsuMSqko7EWesSKLrDKnJ96A%3D%3D&amp;wxtoken=&amp;appmsg_token=1200_VUCOfHI2jYSEziPbaYFlHoaB7977BJYsAb5cvQ~~&amp;x5=0&amp;f=json'</span>
<span class="hljs-attr">response</span> = requests.get(url=url, headers=headers, verify=<span class="hljs-literal">False</span>)
</code></pre>
<h3 data-id="heading-8">è§£æ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">general_msg</span> = response.json()[<span class="hljs-string">'general_msg_list'</span>]
<span class="hljs-attr">general_msg_list</span> = json.loads(general_msg)
for general in general_msg_list<span class="hljs-section">['list']</span>:
    <span class="hljs-attr">content_url</span> = general[<span class="hljs-string">'app_msg_ext_info'</span>][<span class="hljs-string">'content_url'</span>]
    print(content_url)
</code></pre>
<h2 data-id="heading-9">å†è®¿é—®æ‰€æœ‰è¯¦æƒ…é¡µé“¾æ¥ï¼Œè·å–éœ€è¦çš„å›¾ç‰‡å†…å®¹</h2>
<h3 data-id="heading-10">å‘é€è¯·æ±‚</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">html_data</span> = requests.get(url=content_url, headers=headers, verify=<span class="hljs-literal">False</span>).text
</code></pre>
<h3 data-id="heading-11">è§£ææ•°æ®</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">img_list</span> = re.findall(<span class="hljs-string">'&lt;img class=".*?data-src="(.*?)"'</span>, html_data)
print(img_list)
</code></pre>
<h3 data-id="heading-12">ä¿å­˜æ•°æ®</h3>
<pre><code class="hljs language-css" lang="css">for <span class="hljs-selector-tag">img</span> in img_list:
    img_data = requests.<span class="hljs-built_in">get</span>(url=img, verify=False).content
    <span class="hljs-built_in">open</span>(f<span class="hljs-string">'img/{index}.jpg'</span>, mode=<span class="hljs-string">'wb'</span>).<span class="hljs-built_in">write</span>(img_data)
    index += <span class="hljs-number">1</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobScheduler ç›¸å…³ç¬”è®°]]></title>    <link>https://juejin.cn/post/7594739292201435171</link>    <guid>https://juejin.cn/post/7594739292201435171</guid>    <pubDate>2026-01-14T05:48:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594739292201435171" data-draft-id="7594739292201418787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobScheduler ç›¸å…³ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-14T05:48:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobScheduler ç›¸å…³ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:48:36.000Z" title="Wed Jan 14 2026 05:48:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ“¦ <strong>JobScheduler</strong>ï¼šç³»ç»Ÿçº§ç²¾å‡†è°ƒåº¦ï¼ˆAPI 21+ï¼‰</h3>
<p>JobScheduleræ˜¯ç³»ç»ŸæœåŠ¡ï¼Œå…è®¸ä½ è®¾ç½®ç²¾ç¡®æ¡ä»¶ï¼ˆå¦‚ç½‘ç»œã€å……ç”µçŠ¶æ€ï¼‰ï¼Œç”±ç³»ç»Ÿåœ¨æœ€ä¼˜æ—¶æœºæ‰¹é‡æ‰§è¡Œä»»åŠ¡ï¼Œç‰¹åˆ«é€‚åˆ<strong>ç²¾ç¡®ã€å¯é </strong>çš„åå°ä½œä¸šã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ä¸ç¤ºä¾‹ï¼š</strong></p>
<ol>
<li>
<p><strong>åˆ›å»ºä¸€ä¸ª<code>JobService</code></strong>
è¿™æ˜¯æ‰§è¡Œä»»åŠ¡çš„å…¥å£ï¼Œéœ€è¦åœ¨<code>AndroidManifest.xml</code>ä¸­å£°æ˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰ä½ çš„JobServiceï¼ˆä¾‹å¦‚ä¸€ä¸ªæ—¥å¿—ä¸Šä¼ æœåŠ¡ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUploadJobService</span> : <span class="hljs-type">JobService</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStartJob</span><span class="hljs-params">(params: <span class="hljs-type">JobParameters</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// æ­¤å¤„æ‰§è¡Œä½ çš„åå°ä»»åŠ¡ï¼ˆä¼šåœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼Œå»ºè®®å¼‚æ­¥ï¼‰</span>
        uploadLogInBackground(params)
        <span class="hljs-comment">// è¿”å›trueè¡¨ç¤ºä»»åŠ¡åœ¨å¼‚æ­¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œåéœ€æ‰‹åŠ¨è°ƒç”¨jobFinished</span>
        <span class="hljs-comment">// è¿”å›falseè¡¨ç¤ºä»»åŠ¡åŒæ­¥æ‰§è¡Œå®Œæˆ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStopJob</span><span class="hljs-params">(params: <span class="hljs-type">JobParameters</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// å¦‚æœä»»åŠ¡è¢«ç³»ç»Ÿå¼ºåˆ¶åœæ­¢ï¼Œæ˜¯å¦éœ€è¦é‡æ–°è°ƒåº¦ï¼Ÿ</span>
        <span class="hljs-comment">// è¿”å›trueè¡¨ç¤ºéœ€è¦é‡æ–°è°ƒåº¦ï¼Œfalseè¡¨ç¤ºä¸¢å¼ƒ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">uploadLogInBackground</span><span class="hljs-params">(params: <span class="hljs-type">JobParameters</span>?)</span></span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡</span>
        thread {
            <span class="hljs-comment">// æ‰§è¡Œä½ çš„å®é™…ä»»åŠ¡é€»è¾‘...</span>
            Log.d(<span class="hljs-string">"JobScheduler"</span>, <span class="hljs-string">"æ­£åœ¨ä¸Šä¼ æ—¥å¿—..."</span>)
            <span class="hljs-comment">// ä»»åŠ¡å®Œæˆåï¼Œå¿…é¡»é€šçŸ¥ç³»ç»Ÿ</span>
            jobFinished(params, <span class="hljs-literal">false</span>) <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°falseè¡¨ç¤ºä¸éœ€è¦é‡æ–°è°ƒåº¦</span>
        }
    }
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- 2. åœ¨ AndroidManifest.xml ä¸­å£°æ˜ä½ çš„JobService --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">service</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MyUploadJobService"</span>
    <span class="hljs-attr">android:permission</span>=<span class="hljs-string">"android.permission.BIND_JOB_SERVICE"</span> /&gt;</span>
</code></pre>
</li>
<li>
<p><strong>æ„å»º<code>JobInfo</code>å¹¶è°ƒåº¦ä»»åŠ¡</strong>
ä½¿ç”¨<code>JobInfo.Builder</code>è®¾ç½®ä»»åŠ¡çš„å„ç§çº¦æŸæ¡ä»¶ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 3. åœ¨éœ€è¦è°ƒåº¦ä»»åŠ¡çš„åœ°æ–¹ï¼ˆå¦‚Activityæˆ–BroadcastReceiverï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">scheduleUploadJob</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> {
    <span class="hljs-keyword">val</span> jobScheduler = context.getSystemService(Context.JOB_SCHEDULER_SERVICE) <span class="hljs-keyword">as</span> JobScheduler
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªJobInfo.Builderï¼Œå¹¶æŒ‡å®šä½ çš„JobService</span>
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä»»åŠ¡IDï¼Œéœ€åœ¨åº”ç”¨å†…å”¯ä¸€</span>
    <span class="hljs-keyword">val</span> jobInfo = JobInfo.Builder(JOB_ID_UPLOAD_LOG, ComponentName(context, MyUploadJobService::<span class="hljs-keyword">class</span>.java))
        .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED) <span class="hljs-comment">// ä»…åœ¨Wi-Fiä¸‹æ‰§è¡Œ</span>
        .setRequiresCharging(<span class="hljs-literal">true</span>)                               <span class="hljs-comment">// ä»…åœ¨å……ç”µæ—¶æ‰§è¡Œ</span>
        .setPersisted(<span class="hljs-literal">true</span>)                                      <span class="hljs-comment">// è®¾å¤‡é‡å¯åæ˜¯å¦ä¿æŒè°ƒåº¦ï¼ˆéœ€è¦RECEIVE_BOOT_COMPLETEDæƒé™ï¼‰</span>
        .setPeriodic(<span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)                             <span class="hljs-comment">// è®¾ç½®å‘¨æœŸæ€§æ‰§è¡Œï¼ˆæœ€å°‘15åˆ†é’Ÿé—´éš”ï¼‰</span>
        <span class="hljs-comment">// .setMinimumLatency(10 * 1000)                         // è®¾ç½®æœ€å°å»¶è¿Ÿæ‰§è¡Œï¼ˆå•æ¬¡ä»»åŠ¡ï¼‰</span>
        <span class="hljs-comment">// .setOverrideDeadline(30 * 60 * 1000)                  // è®¾ç½®æœ€æ™šæ‰§è¡ŒæœŸé™ï¼ˆå•æ¬¡ä»»åŠ¡ï¼‰</span>
        .build()
    
    <span class="hljs-keyword">val</span> result = jobScheduler.schedule(jobInfo)
    <span class="hljs-keyword">if</span> (result == JobScheduler.RESULT_SUCCESS) {
        Log.d(<span class="hljs-string">"JobScheduler"</span>, <span class="hljs-string">"ä»»åŠ¡è°ƒåº¦æˆåŠŸï¼"</span>)
    }
}
</code></pre>
</li>
</ol>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>JobService</code>è¿è¡Œåœ¨<strong>ä¸»çº¿ç¨‹</strong>ï¼Œè€—æ—¶æ“ä½œå¿…é¡»å¼‚æ­¥ã€‚</li>
<li><code>setPersisted(true)</code>éœ€è¦<code>android.permission.RECEIVE_BOOT_COMPLETED</code>æƒé™ã€‚</li>
<li>å‘¨æœŸæ€§ä»»åŠ¡çš„æœ€å°é—´éš”æ˜¯<strong>15åˆ†é’Ÿ</strong>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™åº”ç”¨çš„â€œä»»æ„é—¨â€ï¼šDeep Linking ä¸ App Linking çš„ç›¸çˆ±ç›¸æ€]]></title>    <link>https://juejin.cn/post/7594731175405633576</link>    <guid>https://juejin.cn/post/7594731175405633576</guid>    <pubDate>2026-01-14T05:50:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594731175405633576" data-draft-id="7594745643892555811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™åº”ç”¨çš„â€œä»»æ„é—¨â€ï¼šDeep Linking ä¸ App Linking çš„ç›¸çˆ±ç›¸æ€"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-14T05:50:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SameX"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568287463"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™åº”ç”¨çš„â€œä»»æ„é—¨â€ï¼šDeep Linking ä¸ App Linking çš„ç›¸çˆ±ç›¸æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568287463/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SameX
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:50:11.000Z" title="Wed Jan 14 2026 05:50:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong>ï¼šæœ¬æ–‡åŸºäº HarmonyOS Next çš„æ‘¸çˆ¬æ»šæ‰“ç»éªŒæ€»ç»“ã€‚æŠ€æœ¯è¿™ä¸œè¥¿æ›´æ–°å¿«ï¼Œå¦‚æœå“ªé‡Œè¯´å¾—ä¸å¯¹ï¼Œæˆ–è€…ä½ æœ‰æ›´éªšçš„æ“ä½œï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæ‹ç –äº¤æµã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢å•¦ã€‚</p>
</blockquote>
<p>åšç§»åŠ¨ç«¯å¼€å‘ï¼Œæœ€çƒ¦çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯åº”ç”¨åƒä¸€ä¸ªä¸ªå­¤å²›ï¼Œäº’ç›¸éƒ½ä¸é€šæ°”ã€‚</p>
<p>ç”¨æˆ·åœ¨å¾®ä¿¡é‡Œç‚¹ä¸ªé“¾æ¥ï¼Œæƒ³è·³åˆ°ä½ çš„ App é‡Œçœ‹è¯¦æƒ…ï¼Œç»“æœè¦ä¹ˆæ²¡ååº”ï¼Œè¦ä¹ˆè·³å‡ºä¸€å †ç”šè‡³éƒ½æ²¡å¬è¯´è¿‡çš„ App è®©ä½ é€‰ã€‚è¿™å°±å¾ˆå°´å°¬äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¸¿è’™ç³»ç»Ÿç»™å’±ä»¬æä¾›äº†ä¸¤æŠŠé’¥åŒ™ï¼šä¸€æŠŠå« <strong>Deep Linking</strong>ï¼Œä¸€æŠŠå« <strong>App Linking</strong>ã€‚</p>
<p>å¾ˆå¤šå…„å¼Ÿå®¹æ˜“ææ··ï¼Œè§‰å¾—è¿™ä¿©ä¸æ˜¯ä¸€å›äº‹å—ï¼Ÿç¡®å®ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†â€œè·³è½¬â€ï¼Œä½†æ‰‹æ®µå’Œæ®µä½å¯å¤§ä¸ä¸€æ ·ã€‚ä»Šå¤©å’±ä»¬å°±æ¥æ‰’ä¸€æ‰’è¿™ä¸¤è€…çš„åº•è£¤ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ Deep Linkingï¼šç®€å•ç²—æš´çš„â€œåœŸæ³•ç‚¼é’¢â€</h2>
<p>Deep Linking è¯´ç™½äº†ï¼Œå°±æ˜¯åˆ©ç”¨è‡ªå®šä¹‰åè®®ï¼ˆSchemeï¼‰æ¥å®ç°è·³è½¬ã€‚è¿™æ‹›åœ¨ç§»åŠ¨å¼€å‘ç•Œå±äºâ€œè€å…µâ€äº†ã€‚</p>
<h3 data-id="heading-1">å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h3>
<p>ä½ æƒ³è®©åˆ«äººé€šè¿‡æš—å·æ‰¾åˆ°ä½ ï¼Œä½ å°±å¾—å…ˆèµ·ä¸ªæš—å·ã€‚æ¯”å¦‚ä½ åšä¸ªåœ°å›¾ Appï¼Œä½ å¯ä»¥è·Ÿç³»ç»Ÿå–Šä¸€å—“å­ï¼šâ€œä»¥ååªè¦æœ‰äººå–Š <code>geo://</code> å¼€å¤´çš„ï¼Œéƒ½å½’æˆ‘ç®¡ï¼â€</p>
<p>è¿™å°±æ˜¯ <strong>Deep Linking</strong> çš„æ ¸å¿ƒï¼š<strong>è‡ªå®šä¹‰ Scheme</strong>ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šé—¨æ§›ä½ï¼Œéšä¾¿å®šä¹‰ã€‚<code>my-super-app://</code>ï¼Œæƒ³æ€ä¹ˆå†™æ€ä¹ˆå†™ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¤ªéšæ„äº†ã€‚ä¸‡ä¸€éš”å£è€ç‹ä¹Ÿå®šä¹‰äº† <code>geo://</code> æ€ä¹ˆåŠï¼Ÿè¿™æ—¶å€™ç³»ç»Ÿå°±æ‡µåœˆäº†ï¼Œåªèƒ½å¼¹ä¸ªçª—è®©ç”¨æˆ·è‡ªå·±é€‰ã€‚è¿™ä¸€é€‰ï¼Œç”¨æˆ·ä½“éªŒå°±æ–­æ¡£äº†ã€‚è€Œä¸”è¿™ç©æ„å„¿ä¸å®‰å…¨ï¼Œè°éƒ½èƒ½å†’å……ã€‚</li>
</ul>
<h3 data-id="heading-2">æ€ä¹ˆé…ç½®ï¼Ÿ</h3>
<p>åœ¨é¸¿è’™é‡Œï¼Œä½ å¾—åœ¨ <code>module.json5</code> é‡Œé€šè¿‡ <code>skills</code> æ ‡ç­¾å»â€œæŠ¢æ³¨â€è¿™ä¸ªæš—å·ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// module.json5</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"EntryAbility"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"uris"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
              <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mychat"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä½ çš„æš—å·</span>
                <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"talk.com"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å…·ä½“çš„æ¥å¤´åœ°ç‚¹</span>
                <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"room"</span>      <span class="hljs-comment">// å…·ä½“çš„æˆ¿é—´å·</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">]</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>è¿™ä¸€ä¸‹ï¼Œåªè¦æœ‰é“¾æ¥æ˜¯ <code>mychat://talk.com/room</code>ï¼Œç³»ç»Ÿå°±ä¼šæŠŠç›®å…‰æŠ•å‘ä½ ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€ App Linkingï¼šæŒè¯ä¸Šå²—çš„â€œæ­£è§„å†›â€</h2>
<p>åä¸ºç°åœ¨å¤§åŠ›æ¨çš„æ˜¯ <strong>App Linking</strong>ã€‚ä¸ºå•¥ï¼Ÿå› ä¸ºå®ƒæ­£è§„ã€å®‰å…¨ã€ä½“éªŒå¥½ã€‚</p>
<h3 data-id="heading-4">å®ƒå¼ºåœ¨å“ªï¼Ÿ</h3>
<p>App Linking ä¸å†ç”¨é‚£äº›ä¹±ä¸ƒå…«ç³Ÿçš„è‡ªå®šä¹‰åè®®ï¼Œè€Œæ˜¯ç›´æ¥ç”¨æ ‡å‡†çš„ <strong>HTTPS é“¾æ¥</strong>ï¼ˆæ¯”å¦‚ <code>https://www.example.com</code>ï¼‰ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªæ ¸å¿ƒé€»è¾‘ï¼š<strong>åŸŸåæ ¡éªŒ</strong>ã€‚
ç³»ç»Ÿä¼šå»éªŒè¯ï¼šâ€œä½ è¿™ä¸ª App åˆ°åº•æ˜¯ä¸æ˜¯è¿™ä¸ªåŸŸåçš„äº²å„¿å­ï¼Ÿâ€ã€‚</p>
<ul>
<li><strong>å¦‚æœéªŒè¯é€šè¿‡</strong>ï¼šç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œç›´æ¥æ‹‰èµ· Appï¼Œæ²¡æœ‰ä»»ä½•å¼¹çª—å¹²æ‰°ï¼Œä¸èˆ¬é¡ºæ»‘ã€‚</li>
<li><strong>å¦‚æœæ²¡å®‰è£… App</strong>ï¼šæ—¢ç„¶æ˜¯ HTTPSï¼Œé‚£å°±ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€ç½‘é¡µã€‚è¿™å°±å«â€œè¿›å¯æ”»é€€å¯å®ˆâ€ï¼Œç”¨æˆ·æ°¸è¿œä¸ä¼šçœ‹åˆ° 404 æˆ–è€…æ— å“åº”ã€‚</li>
</ul>
<p>è¿™å°±ç‰¹åˆ«é€‚åˆåšç¤¾äº¤åˆ†äº«ã€å¹¿å‘Šå¼•æµï¼Œæˆ–è€…çŸ­ä¿¡å¬å›è€ç”¨æˆ·ã€‚</p>
<h3 data-id="heading-5">æ€ä¹ˆé…ç½®ï¼Ÿï¼ˆé‡ç‚¹æ¥äº†ï¼Œè¿™é‡Œç¨å¾®ç¹çç‚¹ï¼‰</h3>
<p>è¿™ç©æ„å„¿éœ€è¦â€œåŒå‘å¥”èµ´â€ï¼šApp ç«¯è¦è®¤é¢†åŸŸåï¼ŒæœåŠ¡å™¨ç«¯è¦è®¤é¢† Appã€‚</p>
<ol>
<li><strong>æœåŠ¡å™¨ç«¯æä¸ªâ€œä»‹ç»ä¿¡â€</strong>ï¼š
ä½ å¾—åœ¨ä½ çš„ç½‘ç«™æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª <code>.well-known/applinking.json</code> æ–‡ä»¶ã€‚è¿™æ–‡ä»¶é‡Œå†™å•¥ï¼Ÿå†™ä½  App çš„èº«ä»½è¯å·ï¼ˆAPP IDï¼‰ã€‚
<em>è¿™æ˜¯ä¸ºäº†å‘Šè¯‰å…¨å¤©ä¸‹ï¼šè¿™ä¸ª App æ˜¯æˆ‘ç½©ç€çš„ã€‚</em></li>
<li><strong>App ç«¯å¼€å¯â€œé›·è¾¾â€</strong>ï¼š
åœ¨ AGC æ§åˆ¶å°å¼€é€šæœåŠ¡åï¼Œä½ å¾—åœ¨ <code>module.json5</code> é‡Œä¹Ÿé…ä¸Š skillsï¼Œä¸è¿‡è¿™æ¬¡ scheme å¿…é¡»æ˜¯ <code>https</code>ã€‚
<em>æ³¨æ„</em>ï¼šåœ¨ AGC åå°ï¼ˆå¢é•¿ &gt; App Linkingï¼‰è®°å¾—æŠŠâ€œåŸŸåæ ¡éªŒâ€çš„å¼€å…³æ‰“å¼€ï¼Œä¸ç„¶ç³»ç»Ÿæ‡’å¾—å»æŸ¥ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ å®æˆ˜ï¼šåˆ°åº•æ€ä¹ˆè·³ï¼Ÿ</h2>
<p>é…ç½®å¥½äº†ï¼Œæ€ä¹ˆè§¦å‘è·³è½¬å‘¢ï¼Ÿå’±ä»¬çœ‹ä»£ç ã€‚</p>
<h3 data-id="heading-7">åœºæ™¯ Aï¼šæˆ‘æƒ³æ‹‰èµ·åˆ«äººï¼ˆå‘èµ·æ–¹ï¼‰</h3>
<p>é¸¿è’™æä¾›äº† <code>openLink</code> æ¥å£ï¼Œè¿™æ¯”ä¼ ç»Ÿçš„ <code>startAbility</code> æ›´é€‚åˆå¤„ç†é“¾æ¥è·³è½¬ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;

<span class="hljs-comment">// æ¯”å¦‚åœ¨ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶é‡Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">jumpToTarget</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {
  <span class="hljs-comment">// ç›®æ ‡é“¾æ¥</span>
  <span class="hljs-keyword">const</span> targetLink = <span class="hljs-string">"https://www.example.com/programs?action=showall"</span>; 
  
  <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: common.<span class="hljs-property">OpenLinkOptions</span> = {
    <span class="hljs-comment">// é‡ç‚¹ï¼è¿™é‡Œæœ‰ä¸ªå¼€å…³</span>
    <span class="hljs-comment">// true: åªè¦ App Linkingï¼ˆæ²¡å®‰è£…Appå°±å¯èƒ½æ²¡ååº”æˆ–è€…èµ°æµè§ˆå™¨é€»è¾‘ï¼Œçœ‹ç³»ç»Ÿå®ç°ï¼‰</span>
    <span class="hljs-comment">// false: å…¼å®¹ Deep Linking æ¨¡å¼ï¼Œå“ªæ€•æ²¡æ ¡éªŒè¿‡åŸŸåçš„ scheme ä¹Ÿèƒ½è¯•ç€è·³</span>
    <span class="hljs-attr">appLinkingOnly</span>: <span class="hljs-literal">false</span> 
  };

  <span class="hljs-keyword">try</span> {
    context.<span class="hljs-title function_">openLink</span>(targetLink, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'è·³è½¬æˆåŠŸï¼Œèµ°ä½ ï¼'</span>);
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`è·³è½¬ç¿»è½¦äº†: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);
    });
  } <span class="hljs-keyword">catch</span> (paramError) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`å‚æ•°éƒ½æœ‰é—®é¢˜: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(paramError)}</span>`</span>);
  }
}

</code></pre>
<p>å¦‚æœä½ éè¦ç”¨ Deep Linking çš„é‚£ç§ <code>geo:</code> åè®®ï¼Œç”¨ <code>startAbility</code> ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ„å»ºä¸€ä¸ª <code>Want</code> å¯¹è±¡å°±è¡Œï¼Œä½†è¿™åœ¨ API 12 é‡Œæ˜¾å¾—æœ‰ç‚¹â€œå¤å¤â€äº†ã€‚</p>
<h3 data-id="heading-8">åœºæ™¯ Bï¼šåˆ«äººæ‹‰èµ·æˆ‘ï¼ˆæ¥æ”¶æ–¹ï¼‰</h3>
<p>ä¸ç®¡æ˜¯ Deep Linking è¿˜æ˜¯ App Linkingï¼Œè¿›äº†ä½ çš„é—¨ï¼Œå¤„ç†é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚éƒ½æ˜¯åœ¨ <code>Ability</code> çš„ <code>onCreate</code> æˆ–è€… <code>onNewWant</code> é‡Œæ¥å®¢ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span>, <span class="hljs-title class_">AbilityConstant</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;
<span class="hljs-keyword">import</span> { url } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.arkts'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {
  
  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleLink</span>(want);
  }

  <span class="hljs-comment">// å¦‚æœ App å·²ç»åœ¨åå°æ´»ç€ï¼Œä¼šèµ°è¿™é‡Œ</span>
  <span class="hljs-title function_">onNewWant</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleLink</span>(want);
  }

  <span class="hljs-title function_">handleLink</span>(<span class="hljs-params">want: Want</span>) {
    <span class="hljs-keyword">const</span> uri = want?.<span class="hljs-property">uri</span>;
    <span class="hljs-keyword">if</span> (!uri) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ²¡å¸¦é“¾æ¥ï¼Ÿé‚£æ˜¯è¯¯è§¦å§</span>

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æ”¶åˆ°é“¾æ¥è¯·æ±‚: <span class="hljs-subst">${uri}</span>`</span>);

    <span class="hljs-comment">// è§£æ URLï¼Œè¿™å°±è·Ÿå‰ç«¯è§£æ location.href ä¸€ä¸ªå¾·è¡Œ</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> urlObject = url.<span class="hljs-property">URL</span>.<span class="hljs-title function_">parseURL</span>(uri);
      <span class="hljs-keyword">const</span> action = urlObject.<span class="hljs-property">params</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'action'</span>);
      
      <span class="hljs-keyword">if</span> (action === <span class="hljs-string">"showall"</span>) {
        <span class="hljs-comment">// è·¯ç”±è·³è½¬é€»è¾‘ï¼šå¸¦å¤§ä¼™å»â€œæ‰€æœ‰èŠ‚ç›®â€é¡µé¢</span>
        <span class="hljs-comment">// router.pushUrl(...) </span>
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¿™é“¾æ¥æ ¼å¼ä¸å¯¹å•Šï¼Œè€é“"</span>);
    }
  }
}

</code></pre>
<hr/>
<h2 data-id="heading-9">å››ã€ æ€»ç»“ï¼šè¯¥é€‰å“ªä¸€ä¸ªï¼Ÿ</h2>
<p>è¯´äº†ä¸€å¤§å †ï¼Œæœ€åç»™å…„å¼Ÿä»¬æ¥ä¸ªâ€œé˜²çº ç»“æŒ‡å—â€ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Deep Linking (åœŸæ³•)</th><th>App Linking (æ­£è§„å†›)</th></tr></thead><tbody><tr><td><strong>é“¾æ¥é•¿ç›¸</strong></td><td><code>myapp://detail</code></td><td><code>https://www.myapp.com/detail</code></td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ä½ (è°éƒ½èƒ½ç”¨)</td><td>é«˜ (åŸŸåæ ¡éªŒï¼Œé˜²ä¼ªå†’)</td></tr><tr><td><strong>æ²¡å®‰è£…Appæ—¶</strong></td><td>æŠ¥é”™æˆ–æ— å“åº”</td><td>è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ç½‘é¡µï¼Œä½“éªŒæ— ç¼è¡”æ¥</td></tr><tr><td><strong>å”¯ä¸€æ€§</strong></td><td>ä¸ä¿è¯ (å¯èƒ½å¼¹çª—é€‰App)</td><td>ä¿è¯ (å”¯ä¸€å½’å±ï¼Œä¸€é”®ç›´è¾¾)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>App å†…éƒ¨é¡µé¢äº’è·³ã€éå…¬ç½‘ç¯å¢ƒ</td><td>å¤–éƒ¨å¼•æµã€è¥é”€çŸ­ä¿¡ã€äºŒç»´ç ã€ç¤¾äº¤åˆ†äº«</td></tr></tbody></table>
<p><strong>è¡€æ³ªå»ºè®®</strong>ï¼š
å¦‚æœæ˜¯åšå¯¹å¤–æ¨å¹¿ã€H5 å”¤é†’ Appï¼Œ<strong>æ— è„‘ä¸Š App Linking</strong>ã€‚å®ƒæ˜¯æœªæ¥çš„ä¸»æµï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒâ€œåº”ç”¨æœªå®‰è£…â€çš„å°´å°¬ã€‚
å¦‚æœæ˜¯ App å†…éƒ¨è‡ªå·±è·³è‡ªå·±ï¼Œæˆ–è€…å…¬å¸å†…éƒ¨å‡ ä¸ª App äº’é€šï¼Œä¸æƒ³ææœåŠ¡å™¨åŸŸåé‚£ä¸€å¥—ï¼Œé‚£ Deep Linking ä¾ç„¶æ˜¯ä¸ªè½»é‡çº§çš„å¥½é€‰æ‹©ã€‚</p>
<p>è¡Œäº†ï¼Œå…³äºé¸¿è’™çš„â€œè¿æ¥è‰ºæœ¯â€ä»Šå¤©å°±èŠåˆ°è¿™ã€‚ä»£ç å†™å®Œäº†è®°å¾—å¤šæµ‹æµ‹ï¼Œåˆ«åˆ°æ—¶å€™ç”¨æˆ·ç‚¹å¼€é“¾æ¥ä¸€è„¸æ‡µé€¼ï¼Œé‚£å°±å°´å°¬äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ -- @Watch åˆ° @Monitor]]></title>    <link>https://juejin.cn/post/7594739292201484323</link>    <guid>https://juejin.cn/post/7594739292201484323</guid>    <pubDate>2026-01-14T05:52:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594739292201484323" data-draft-id="7594731175405617192" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ --  @Watch åˆ° @Monitor"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-14T05:52:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ«çŒ«å¤´å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1283876003519357"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ --  @Watch åˆ° @Monitor
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1283876003519357/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ«çŒ«å¤´å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:52:10.000Z" title="Wed Jan 14 2026 05:52:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>çœ‹å®Œ @Monitor çš„æºç åï¼Œæˆ‘é¡ºæ‰‹ä¹ŸæŠŠ @Watch çš„å®ç°ç¿»äº†ä¸€éã€‚çœ‹å®Œå‘ç°ï¼Œå®˜æ–¹æ¨èä» @Watch è¿ç§»åˆ° @Monitor æ˜¯æœ‰é“ç†çš„ï¼Œä¸åªæ˜¯åŠŸèƒ½æ›´å¼ºï¼Œå®ç°ä¸Šä¹Ÿæ›´åˆç†ã€‚</p>
<p>å…¶å®ä¸€å¼€å§‹åªæ˜¯æƒ³å¯¹æ¯”ä¸€ä¸‹ @Monitor å’Œ @Watch çš„å®ç°å·®å¼‚ï¼Œçœ‹çœ‹å®ƒä»¬åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒã€‚ç»“æœçœ‹å®Œ @Watch çš„ä»£ç ï¼Œå‘ç°å®ƒçš„å®ç°æ¯”æˆ‘æƒ³è±¡çš„è¦å¤æ‚ï¼Œè€Œä¸”æœ‰ä¸€äº›è®¾è®¡ä¸Šçš„æƒè¡¡ã€‚</p>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å¯¹æ–‡ç« å†™çš„ä¸æ»¡æ„ã€å‘ç°é”™è¯¯æˆ–è€…æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³æ”¯æŒä¸‹ä¸€æœŸè¯·åŠ¡å¿…ç‚¹èµ~ï¼Œæ¬¢è¿åœ¨è¯„è®ºã€ç§ä¿¡æˆ–é‚®ä»¶ä¸­æå‡ºï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚ğŸ™</p>
<h2 data-id="heading-1">äºŒã€@Watch åœ¨è§£å†³ä»€ä¹ˆé—®é¢˜</h2>
<p>@Watch çš„ä½œç”¨å¾ˆç®€å•ï¼šå½“çŠ¶æ€å˜é‡å˜åŒ–æ—¶ï¼Œè§¦å‘ä½ å®šä¹‰çš„å›è°ƒå‡½æ•°ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onCountChange'</span>) <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

<span class="hljs-title function_">onCountChange</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count changed to'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
}
</code></pre>
<p>è¿™ä¸ªéœ€æ±‚æœ¬èº«ä¸å¤æ‚ï¼Œä½†å®ç°èµ·æ¥è¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•å»ºç«‹çŠ¶æ€å˜é‡å’Œå›è°ƒå‡½æ•°çš„å…³è”</li>
<li>å¦‚ä½•é¿å…å†…å­˜æ³„æ¼ï¼ˆç»„ä»¶é”€æ¯åï¼Œwatch å‡½æ•°åº”è¯¥è¢«æ¸…ç†ï¼‰</li>
<li>å¦‚ä½•é«˜æ•ˆåœ°è§¦å‘å›è°ƒ</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€@Watch çš„å®ç°æœºåˆ¶</h2>
<p>çœ‹æºç å‘ç°ï¼Œ@Watch çš„å®ç°ç”¨äº†è¿™ä¹ˆä¸€å¥—æœºåˆ¶ï¼š</p>
<ol>
<li><strong>WatchFunc åŒ…è£…å›è°ƒå‡½æ•°</strong>ï¼šæ¯ä¸ª @Watch è£…é¥°çš„å‡½æ•°ä¼šè¢«åŒ…è£…æˆ <code>WatchFunc</code> å®ä¾‹ï¼Œåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ id</li>
<li><strong>WeakRef + FinalizationRegistry</strong>ï¼šä¸ºäº†é¿å…å†…å­˜æ³„æ¼ï¼Œç”¨ WeakRef å­˜å‚¨ WatchFunc å¼•ç”¨ï¼Œç”¨ FinalizationRegistry åœ¨å¯¹è±¡è¢« GC æ—¶æ¸…ç†</li>
<li><strong>é€šè¿‡ id æŸ¥æ‰¾</strong>ï¼šçŠ¶æ€å¯¹è±¡åªä¿å­˜ watchIdï¼ˆä¸€ä¸ª int32ï¼‰ï¼Œæ‰§è¡Œæ—¶é€šè¿‡é™æ€ Map æŸ¥æ‰¾å¯¹åº”çš„ WatchFunc å®ä¾‹</li>
</ol>
<p>è¿™ä¸ªè®¾è®¡çœ‹èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä½†ç¡®å®è§£å†³äº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä¸è¿‡ä¹Ÿå¸¦æ¥äº†ä¸€äº›å‰¯ä½œç”¨ã€‚</p>
<h3 data-id="heading-3">1ã€å®Œæ•´çš„è°ƒç”¨æµç¨‹</h3>
<p>å…ˆçœ‹åˆå§‹åŒ–é˜¶æ®µã€‚å½“ä½ å†™ <code>@State @Watch('onCountChange') count: number = 0</code> æ—¶ï¼Œæ¡†æ¶ä¼šï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>WatchFunc</code> å®ä¾‹ï¼ŒæŠŠä½ çš„ <code>onCountChange</code> å‡½æ•°åŒ…è£…è¿›å»</li>
<li>ç»™è¿™ä¸ª <code>WatchFunc</code> åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ idï¼ˆé™æ€è®¡æ•°å™¨è‡ªå¢ï¼‰</li>
<li>æŠŠè¿™ä¸ª <code>WatchFunc</code> ç”¨ <code>WeakRef</code> åŒ…è£…åï¼Œå­˜å…¥ä¸€ä¸ªé™æ€çš„ <code>Map&lt;WatchIdType, WeakRef&lt;WatchFunc&gt;&gt;</code></li>
<li>æ³¨å†Œ <code>FinalizationRegistry</code>ï¼Œç­‰ <code>WatchFunc</code> è¢« GC æ—¶ï¼Œè‡ªåŠ¨ä» Map ä¸­åˆ é™¤å¯¹åº”çš„æ¡ç›®</li>
<li>è°ƒç”¨ <code>watchFunc.registerMeTo(observedObject)</code>ï¼ŒæŠŠ watchId æ³¨å†Œåˆ°çŠ¶æ€å¯¹è±¡ä¸Š</li>
<li>çŠ¶æ€å¯¹è±¡å†…éƒ¨æœ‰ä¸ª <code>SubscribedWatches</code>ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª <code>Set&lt;WatchIdType&gt;</code>ï¼ŒæŠŠ watchId åŠ è¿›å»</li>
</ol>
<p>è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ï¼šçŠ¶æ€å¯¹è±¡åªä¿å­˜ watchIdï¼ˆä¸€ä¸ª int32ï¼‰ï¼Œä¸ç›´æ¥ä¿å­˜ <code>WatchFunc</code> çš„å¼•ç”¨ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¾ªç¯å¼•ç”¨ã€‚</p>
<p>å†çœ‹è§¦å‘é˜¶æ®µã€‚å½“çŠ¶æ€å˜é‡è¢«ä¿®æ”¹æ—¶ï¼ˆæ¯”å¦‚ <code>this.count = 10</code>ï¼‰ï¼š</p>
<ol>
<li>çŠ¶æ€å¯¹è±¡è°ƒç”¨ <code>executeOnSubscribingWatches('count')</code></li>
<li><code>SubscribedWatches</code> éå†å®ƒç»´æŠ¤çš„ <code>Set&lt;WatchIdType&gt;</code>ï¼Œå¯¹æ¯ä¸ª watchIdï¼š
<ul>
<li>è°ƒç”¨ <code>WatchFunc.execWatchById(watchId, 'count')</code></li>
<li>ä»é™æ€ Map ä¸­é€šè¿‡ WeakRef è·å– <code>WatchFunc</code> å®ä¾‹</li>
<li>å¦‚æœè·å–æˆåŠŸï¼Œè°ƒç”¨ <code>watchFunc.execute('count')</code></li>
<li>å¦‚æœè·å–å¤±è´¥ï¼ˆè¯´æ˜å·²è¢« GCï¼‰ï¼Œè¿”å› falseï¼Œç„¶åä» Set ä¸­åˆ é™¤è¿™ä¸ª watchId</li>
</ul>
</li>
</ol>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ lazy deleteï¼šä¸æ˜¯ä¸»åŠ¨æ¸…ç†å¤±æ•ˆçš„è®¢é˜…ï¼Œè€Œæ˜¯æ‰§è¡Œæ—¶å‘ç°å¤±æ•ˆæ‰åˆ ã€‚</p>
<h3 data-id="heading-4">2ã€ä¸ºä»€ä¹ˆç”¨ WeakRef + FinalizationRegistry</h3>
<p>è¿™ä¸ªè®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†é¿å…å†…å­˜æ³„æ¼ã€‚å¦‚æœ <code>SubscribedWatches</code> ç›´æ¥æŒæœ‰ <code>WatchFunc</code> çš„å¼ºå¼•ç”¨ï¼Œè€Œ <code>WatchFunc</code> åˆå¯èƒ½æŒæœ‰ç»„ä»¶å¼•ç”¨ï¼Œå°±ä¼šå½¢æˆå¾ªç¯å¼•ç”¨ï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•è¢« GCã€‚</p>
<p>ç”¨ WeakRef çš„å¥½å¤„æ˜¯ï¼šå¦‚æœç»„ä»¶é”€æ¯äº†ï¼Œ<code>WatchFunc</code> å¯ä»¥è¢« GCï¼ŒWeakRef ä¼šè‡ªåŠ¨å¤±æ•ˆã€‚ä½†é—®é¢˜æ˜¯ï¼Œé™æ€ Map ä¸­çš„ WeakRef æ¡ç›®ä¸ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œæ‰€ä»¥éœ€è¦ FinalizationRegistry åœ¨å¯¹è±¡è¢« GC æ—¶æ¸…ç†ã€‚</p>
<p>ä¸è¿‡è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼š<code>SubscribedWatches.subscribers_</code> é‡Œå­˜çš„æ˜¯ <code>Set&lt;WatchIdType&gt;</code>ï¼ˆæ™®é€šå€¼ï¼‰ï¼Œä¸æ˜¯ WeakRefã€‚è¿™æ„å‘³ç€å³ä½¿ <code>WatchFunc</code> è¢« GC äº†ï¼ŒwatchId è¿˜åœ¨ Set é‡Œï¼Œç›´åˆ°æ‰§è¡Œæ—¶å‘ç°å¤±æ•ˆæ‰åˆ é™¤ã€‚</p>
<h3 data-id="heading-5">3ã€åŒé‡å­˜å‚¨çš„é—®é¢˜</h3>
<p><code>WatchFunc</code> çš„é™æ€ Map å­˜ä¸€ä»½ï¼ˆWeakRefï¼‰ï¼Œ<code>SubscribedWatches.subscribers_</code> å­˜å¦ä¸€ä»½ï¼ˆwatchId å€¼ï¼‰ã€‚ä¸¤å¤„å­˜å‚¨ï¼Œä½†æ¸…ç†æ—¶æœºä¸åŒæ­¥ï¼š</p>
<ul>
<li>é™æ€ Map çš„æ¸…ç†ï¼šä¾èµ– FinalizationRegistryï¼Œå¯¹è±¡è¢« GC æ—¶è§¦å‘</li>
<li><code>subscribers_</code> çš„æ¸…ç†ï¼šä¾èµ– lazy deleteï¼Œæ‰§è¡Œæ—¶å‘ç°å¤±æ•ˆæ‰åˆ </li>
</ul>
<p>å¦‚æœç»„ä»¶é¢‘ç¹åˆ›å»ºé”€æ¯ï¼Œ<code>subscribers_</code> ä¸­å¯èƒ½ä¼šç§¯ç´¯å¾ˆå¤šæ— æ•ˆçš„ watchIdã€‚è™½ç„¶ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼ˆå› ä¸º <code>WatchFunc</code> æœ¬èº«å¯ä»¥è¢« GCï¼‰ï¼Œä½†ä¼šå½±å“æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<h3 data-id="heading-6">4ã€æ‰§è¡Œæ—¶çš„æŸ¥æ‰¾å¼€é”€</h3>
<p>æ¯æ¬¡çŠ¶æ€å˜åŒ–æ—¶ï¼Œéƒ½è¦é€šè¿‡ watchId ä»é™æ€ Map ä¸­æŸ¥æ‰¾ <code>WatchFunc</code> å®ä¾‹ã€‚è¿™ä¸ªæŸ¥æ‰¾æ˜¯ O(1) çš„ï¼Œä½†éœ€è¦ï¼š</p>
<ol>
<li>ä» Map ä¸­è·å– WeakRef</li>
<li>è°ƒç”¨ <code>WeakRef.deref()</code> è·å–å®é™…å¯¹è±¡</li>
<li>æ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨</li>
</ol>
<p>å¦‚æœ <code>WatchFunc</code> å·²è¢« GCï¼Œ<code>deref()</code> è¿”å› undefinedï¼Œç„¶åä» <code>subscribers_</code> ä¸­åˆ é™¤è¿™ä¸ª watchIdã€‚è¿™ä¸ªå¼€é”€è™½ç„¶ä¸å¤§ï¼Œä½†å¦‚æœè®¢é˜…åˆ—è¡¨å¾ˆé•¿ï¼Œç´¯ç§¯èµ·æ¥è¿˜æ˜¯æœ‰å½±å“çš„ã€‚</p>
<h2 data-id="heading-7">å››ã€@Watch çš„å±€é™æ€§</h2>
<p>çœ‹å®Œæºç åï¼Œæˆ‘å‘ç° @Watch æœ‰å‡ ä¸ªæ˜æ˜¾çš„é™åˆ¶ã€‚è¿™äº›é™åˆ¶åœ¨ä½¿ç”¨æ—¶å¯èƒ½ä¸æ˜æ˜¾ï¼Œä½†ç¡®å®å­˜åœ¨ï¼š</p>
<h3 data-id="heading-8">1. åªèƒ½ç›‘å¬å•ä¸ªå˜é‡</h3>
<p>è¿™æ˜¯æœ€æ˜æ˜¾çš„é™åˆ¶ã€‚æ¯ä¸ª @Watch åªèƒ½ç»‘å®šä¸€ä¸ªçŠ¶æ€å˜é‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onAppleChange'</span>) <span class="hljs-attr">apple</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onOrangeChange'</span>) <span class="hljs-attr">orange</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

<span class="hljs-title function_">onAppleChange</span>(): <span class="hljs-built_in">void</span> { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-title function_">onOrangeChange</span>(): <span class="hljs-built_in">void</span> { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>å¦‚æœå¤šä¸ªå˜é‡å˜åŒ–æ—¶è¦åšåŒä¸€ä»¶äº‹ï¼Œå°±å¾—å†™å¤šä¸ªå›è°ƒï¼Œæˆ–è€…åœ¨ä¸€ä¸ªå›è°ƒé‡Œæ‰‹åŠ¨æ£€æŸ¥å…¶ä»–å˜é‡ã€‚</p>
<h3 data-id="heading-9">2. æ— æ³•è·å–å˜åŒ–å‰çš„å€¼</h3>
<p>@Watch çš„å›è°ƒå‡½æ•°åªæ¥æ”¶å±æ€§åï¼ˆstringï¼‰ï¼Œä¸æ¥æ”¶å˜åŒ–å‰åçš„å€¼ã€‚å¦‚æœä½ éœ€è¦å¯¹æ¯”å˜åŒ–ï¼Œå¾—è‡ªå·±æƒ³åŠæ³•ä¿å­˜æ—§å€¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-attr">oldCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

<span class="hljs-title function_">onCountChange</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> newCount = <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.oldCount}</span> to <span class="hljs-subst">${newCount}</span>`</span>);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldCount</span> = newCount;
}
</code></pre>
<p>è¿™ç§æ–¹å¼å®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”æ¯ä¸ªå˜é‡éƒ½è¦å•ç‹¬ç»´æŠ¤æ—§å€¼ã€‚</p>
<h3 data-id="heading-10">3. å†…å­˜ç®¡ç†çš„å¤æ‚æ€§</h3>
<p>è™½ç„¶ç”¨äº† WeakRef å’Œ FinalizationRegistryï¼Œä½†å®é™…æ¸…ç†æ˜¯ lazy çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç»„ä»¶é”€æ¯äº†ï¼Œç›¸å…³çš„ watchId ä¸ä¼šç«‹å³ä»è®¢é˜…åˆ—è¡¨ä¸­åˆ é™¤ï¼Œè€Œæ˜¯ç­‰åˆ°ä¸‹æ¬¡æ‰§è¡Œæ—¶å‘ç°å¤±æ•ˆæ‰æ¸…ç†ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå¦‚æœå¤§é‡ç»„ä»¶é¢‘ç¹åˆ›å»ºé”€æ¯ï¼Œè®¢é˜…åˆ—è¡¨ä¸­å¯èƒ½ä¼šç§¯ç´¯å¾ˆå¤šæ— æ•ˆçš„ idã€‚è™½ç„¶ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼ˆå› ä¸º WatchFunc æœ¬èº«å¯ä»¥è¢« GCï¼‰ï¼Œä½†ä¼šå½±å“æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<p>çœ‹æºç ä¼šå‘ç°ï¼Œ<code>SubscribedWatches.executeOnSubscribingWatches()</code> çš„å®ç°æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-title function_">executeOnSubscribingWatches</span>(<span class="hljs-attr">propertyName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers_</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">watchId: WatchIdType</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">WatchFunc</span>.<span class="hljs-title function_">execWatchById</span>(watchId, propertyName)) {
            <span class="hljs-comment">// lazy deleteï¼šæ‰§è¡Œæ—¶å‘ç°å¤±æ•ˆæ‰åˆ é™¤</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers_</span>.<span class="hljs-title function_">delete</span>(watchId);
        }
    });
}
</code></pre>
<p>æ¯æ¬¡æ‰§è¡Œéƒ½è¦éå†æ•´ä¸ª <code>subscribers_</code> Setï¼Œå¯¹æ¯ä¸ª watchId å°è¯•æŸ¥æ‰¾å¹¶æ‰§è¡Œã€‚å¦‚æœ <code>WatchFunc</code> å·²è¢« GCï¼Œ<code>execWatchById</code> è¿”å› falseï¼Œæ‰ä» Set ä¸­åˆ é™¤ã€‚</p>
<p>è¿™ç§è®¾è®¡çš„é—®é¢˜æ˜¯ï¼šå¦‚æœç»„ä»¶é”€æ¯åï¼ŒçŠ¶æ€å˜é‡å¾ˆé•¿æ—¶é—´ä¸å˜åŒ–ï¼Œé‚£äº›æ— æ•ˆçš„ watchId å°±ä¼šä¸€ç›´ç•™åœ¨ Set é‡Œã€‚è™½ç„¶ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†ä¼šæµªè´¹æŸ¥æ‰¾æ—¶é—´ã€‚</p>
<p>è€Œä¸”ï¼ŒFinalizationRegistry çš„æ¸…ç†æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ã€‚JavaScript çš„ GC æ˜¯å¼‚æ­¥çš„ï¼ŒFinalizationRegistry çš„å›è°ƒä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œå–å†³äº GC çš„æ—¶æœºã€‚æ‰€ä»¥é™æ€ Map ä¸­çš„ WeakRef æ¡ç›®å¯èƒ½ä¸ä¼šç«‹å³æ¸…ç†ã€‚</p>
<h3 data-id="heading-11">4. æ‰§è¡Œé¡ºåºä¸ç¡®å®š</h3>
<p>@Watch çš„å›è°ƒæ˜¯é€šè¿‡ Set éå†æ‰§è¡Œçš„ï¼ŒSet çš„éå†é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚å¦‚æœå¤šä¸ª @Watch ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œå¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚</p>
<p>çœ‹æºç ï¼Œ<code>SubscribedWatches.subscribers_</code> æ˜¯ä¸€ä¸ª <code>Set&lt;WatchIdType&gt;</code>ã€‚å½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œæ¡†æ¶ä¼šéå†è¿™ä¸ª Setï¼Œå¯¹æ¯ä¸ª watchId æ‰§è¡Œå¯¹åº”çš„å›è°ƒã€‚ä½† Set çš„éå†é¡ºåºåœ¨ JavaScript ä¸­æ˜¯ä¸ç¡®å®šçš„ï¼ˆè™½ç„¶å®é™…å®ç°å¯èƒ½æŒ‰æ’å…¥é¡ºåºï¼Œä½†è§„èŒƒä¸ä¿è¯ï¼‰ã€‚</p>
<p>å¦‚æœä½ æœ‰ä¸¤ä¸ª @Watch å›è°ƒï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼ˆæ¯”å¦‚ä¸€ä¸ªå›è°ƒä¾èµ–å¦ä¸€ä¸ªå›è°ƒçš„æ‰§è¡Œç»“æœï¼‰ï¼Œé‚£æ‰§è¡Œé¡ºåºå°±ä¸å¯æ§äº†ã€‚è¿™åœ¨è°ƒè¯•æ—¶ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºæ¯æ¬¡æ‰§è¡Œé¡ºåºå¯èƒ½éƒ½ä¸ä¸€æ ·ã€‚</p>
<p>è€Œä¸”ï¼Œ@Watch çš„å›è°ƒæ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ²¡æœ‰å¼‚å¸¸å¤„ç†ã€‚å¦‚æœæŸä¸ªå›è°ƒæŠ›å¼‚å¸¸ï¼Œå¯èƒ½ä¼šå½±å“åç»­å›è°ƒçš„æ‰§è¡Œï¼ˆå–å†³äºå…·ä½“å®ç°ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-12">5. ä¸ä¿è¯å›è°ƒä¸€å®šä¼šæ‰§è¡Œ</h3>
<p>è¿™æ˜¯ä»æºç ä¸­å‘ç°çš„ä¸€ä¸ªç»†èŠ‚ã€‚å¦‚æœ <code>WatchFunc</code> å®ä¾‹å·²è¢« GCï¼Œ<code>execWatchById</code> ä¼šè¿”å› falseï¼Œå›è°ƒå°±ä¸ä¼šæ‰§è¡Œã€‚è™½ç„¶è¿™ç§æƒ…å†µä¸å¸¸è§ï¼ˆå› ä¸ºç»„ä»¶è¿˜åœ¨æ—¶ï¼Œ<code>WatchFunc</code> é€šå¸¸ä¸ä¼šè¢« GCï¼‰ï¼Œä½†åœ¨æŸäº›æç«¯æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚å†…å­˜å‹åŠ›å¤§ï¼ŒGC å¾ˆé¢‘ç¹ï¼‰ï¼Œå¯èƒ½ä¼šå‡ºç°å›è°ƒ"ä¸¢å¤±"çš„æƒ…å†µã€‚</p>
<p>çœ‹æºç ï¼Œ<code>WatchFunc.execWatchById()</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">execWatchById</span>(<span class="hljs-attr">watchId</span>: <span class="hljs-title class_">WatchIdType</span>, <span class="hljs-attr">propertyName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> weak = <span class="hljs-title class_">WatchFunc</span>.<span class="hljs-property">watchId2WatchFunc</span>.<span class="hljs-title function_">get</span>(watchId);
    <span class="hljs-keyword">const</span> watchFuncOpt = weak?.<span class="hljs-title function_">deref</span>();
    <span class="hljs-keyword">if</span> (watchFuncOpt &amp;&amp; watchFuncOpt <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">WatchFunc</span>) {
        watchFuncOpt!.<span class="hljs-title function_">execute</span>(propertyName);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// WatchFunc å·²è¢« GCï¼Œè¿”å› false</span>
    }
}
</code></pre>
<p>å¦‚æœ <code>WatchFunc</code> å·²è¢« GCï¼Œ<code>deref()</code> è¿”å› undefinedï¼Œå‡½æ•°ç›´æ¥è¿”å› falseï¼Œå›è°ƒä¸ä¼šæ‰§è¡Œã€‚è™½ç„¶è¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼Œä½†ç¡®å®å­˜åœ¨ã€‚</p>
<h2 data-id="heading-13">äº”ã€@Monitor çš„ä¼˜åŠ¿</h2>
<p>å¯¹æ¯” @Watchï¼Œ@Monitor åœ¨å‡ ä¸ªæ–¹é¢éƒ½æ›´åˆç†ï¼š</p>
<h3 data-id="heading-14">1. æ”¯æŒå¤šå˜é‡ç›‘å¬</h3>
<p>ä¸€ä¸ª @Monitor å¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>)
<span class="hljs-title function_">onFruitChange</span>(<span class="hljs-params">monitor: IMonitor</span>) {
  monitor.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${name}</span> changed`</span>);
  });
}
</code></pre>
<p>è¿™æ ·å°±ä¸éœ€è¦ä¸ºæ¯ä¸ªå˜é‡å•ç‹¬å†™å›è°ƒäº†ã€‚</p>
<h3 data-id="heading-15">2. å¯ä»¥è·å–å˜åŒ–å‰åçš„å€¼</h3>
<p>è¿™æ˜¯ @Monitor æœ€å®ç”¨çš„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'count'</span>)
<span class="hljs-title function_">onCountChange</span>(<span class="hljs-params">monitor: IMonitor</span>) {
  <span class="hljs-keyword">const</span> before = monitor.<span class="hljs-title function_">value</span>()?.<span class="hljs-property">before</span>;
  <span class="hljs-keyword">const</span> now = monitor.<span class="hljs-title function_">value</span>()?.<span class="hljs-property">now</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${before}</span> to <span class="hljs-subst">${now}</span>`</span>);
}
</code></pre>
<p>ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤æ—§å€¼ï¼Œæ¡†æ¶å¸®ä½ å¤„ç†äº†ã€‚</p>
<h3 data-id="heading-16">3. æ›´æ¸…æ™°çš„ä¾èµ–è¿½è¸ª</h3>
<p>@Monitor çš„å®ç°åŸºäºä¾èµ–è¿½è¸ªç³»ç»Ÿï¼Œå’Œ @Computed ç”¨çš„æ˜¯åŒä¸€å¥—æœºåˆ¶ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä¾èµ–å…³ç³»æ›´æ¸…æ™°</li>
<li>æ‰§è¡Œé¡ºåºæ›´å¯æ§</li>
<li>æ€§èƒ½ä¼˜åŒ–ç©ºé—´æ›´å¤§</li>
</ul>
<h3 data-id="heading-17">4. æ‰¹é‡æ›´æ–°å’Œå»é‡</h3>
<p>@Monitor æ”¯æŒæ‰¹é‡æ›´æ–°å’Œå»é‡ã€‚å¦‚æœå¤šä¸ªç›‘å¬çš„å˜é‡åŒæ—¶å˜åŒ–ï¼Œå›è°ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸æ˜¯å¤šæ¬¡ã€‚è¿™åœ¨å¤„ç†å¤æ‚çŠ¶æ€æ—¶å¾ˆæœ‰ç”¨ã€‚</p>
<h2 data-id="heading-18">å…­ã€è¿ç§»å»ºè®®</h2>
<p>å®˜æ–¹æ–‡æ¡£å·²ç»ç»™å‡ºäº†è¿ç§»ç¤ºä¾‹ï¼Œè¿™é‡Œè¡¥å……å‡ ä¸ªå®é™…ä½¿ç”¨ä¸­çš„æ³¨æ„ç‚¹ï¼š</p>
<h3 data-id="heading-19">1ã€å•å˜é‡åœºæ™¯</h3>
<p>å¦‚æœåªæ˜¯ç®€å•çš„å•å˜é‡ç›‘å¬ï¼Œç›´æ¥æ›¿æ¢å°±è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// V1</span>
<span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onCountChange'</span>) <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-title function_">onCountChange</span>(): <span class="hljs-built_in">void</span> { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// V2</span>
<span class="hljs-meta">@Local</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'count'</span>)
<span class="hljs-title function_">onCountChange</span>(<span class="hljs-params">monitor: IMonitor</span>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>æ³¨æ„ V2 ä¸­è¦ç”¨ <code>@Local</code> è€Œä¸æ˜¯ <code>@State</code>ï¼ˆV2 çš„çŠ¶æ€ç®¡ç†è£…é¥°å™¨ä¸åŒï¼‰ã€‚</p>
<h3 data-id="heading-20">2ã€å¤šå˜é‡åœºæ™¯</h3>
<p>è¿™æ˜¯ @Monitor çš„ä¼˜åŠ¿åœºæ™¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// V1ï¼šéœ€è¦å¤šä¸ª @Watch</span>
<span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onAppleChange'</span>) <span class="hljs-attr">apple</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onOrangeChange'</span>) <span class="hljs-attr">orange</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

<span class="hljs-comment">// V2ï¼šä¸€ä¸ª @Monitor æå®š</span>
<span class="hljs-meta">@Local</span> <span class="hljs-attr">apple</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-meta">@Local</span> <span class="hljs-attr">orange</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>)
<span class="hljs-title function_">onFruitChange</span>(<span class="hljs-params">monitor: IMonitor</span>) {
  monitor.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> value = monitor.<span class="hljs-title function_">value</span>(name);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value?.before}</span> -&gt; <span class="hljs-subst">${value?.now}</span>`</span>);
  });
}
</code></pre>
<h3 data-id="heading-21">3ã€éœ€è¦å˜åŒ–å‰å€¼çš„åœºæ™¯</h3>
<p>å¦‚æœä¸šåŠ¡é€»è¾‘éœ€è¦å¯¹æ¯”å˜åŒ–å‰åçš„å€¼ï¼Œ@Monitor æ˜¯å”¯ä¸€é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'price'</span>, <span class="hljs-string">'discount'</span>)
<span class="hljs-title function_">onPriceChange</span>(<span class="hljs-params">monitor: IMonitor</span>) {
  monitor.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> value = monitor.<span class="hljs-title function_">value</span>(name);
    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'price'</span> &amp;&amp; value?.<span class="hljs-property">before</span> !== value?.<span class="hljs-property">now</span>) {
      <span class="hljs-comment">// ä»·æ ¼å˜åŒ–äº†ï¼Œå¯èƒ½éœ€è¦é‡æ–°è®¡ç®—</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recalculateTotal</span>();
    }
  });
}
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€æ€»ç»“</h2>
<p>ä»æºç è§’åº¦çœ‹ï¼Œ@Watch çš„å®ç°è™½ç„¶è§£å†³äº†å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½†è®¾è®¡ä¸Šç¡®å®æœ‰äº›å¤æ‚ï¼Œè€Œä¸”åŠŸèƒ½å—é™ã€‚@Monitor åŸºäºæ›´æˆç†Ÿçš„ä¾èµ–è¿½è¸ªç³»ç»Ÿï¼ŒåŠŸèƒ½æ›´å¼ºï¼Œä½¿ç”¨ä¹Ÿæ›´çµæ´»ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ V1 çš„ @Watchï¼Œå»ºè®®å°½å¿«è¿ç§»åˆ° V2 çš„ @Monitorã€‚ä¸åªæ˜¯å› ä¸ºå®˜æ–¹æ¨èï¼Œè€Œæ˜¯å®ƒç¡®å®æ›´å¥½ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœé¡¹ç›®è¿˜åœ¨ç”¨ V1 çš„è£…é¥°å™¨ç³»ç»Ÿï¼Œé‚£æš‚æ—¶è¿˜ç”¨ä¸äº† @Monitorã€‚ä½†æ–°é¡¹ç›®å»ºè®®ç›´æ¥ç”¨ V2ï¼Œå°‘èµ°å¼¯è·¯ã€‚</p>
<h2 data-id="heading-23">å…«ã€æœ€å</h2>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å¯¹æ–‡ç« å†™çš„ä¸æ»¡æ„ã€å‘ç°é”™è¯¯ã€æƒ³åæ§½æˆ–è€…æœ‰æ›´å¥½çš„æƒ³æ³•ï¼Œ<strong>æ¬¢è¿åœ¨è¯„è®ºã€ç§ä¿¡æˆ–é‚®ä»¶ä¸­æå‡º</strong>ï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚ğŸ™</p>
<p>è°¢è°¢è¯»è€…å§¥çˆ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7594722586732445702</link>    <guid>https://juejin.cn/post/7594722586732445702</guid>    <pubDate>2026-01-14T05:59:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594722586732445702" data-draft-id="7594863660296585258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2026-01-14T05:59:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Apifox"/> <meta itemprop="url" content="https://juejin.cn/user/2766843870448222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2766843870448222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Apifox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:59:55.000Z" title="Wed Jan 14 2026 05:59:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ—¨åœ¨ä»‹ç»å¦‚ä½•å°† Apifox CLI ä¸ Claude Skills ç»“åˆï¼Œå®ç° <strong>ã€Œè‡ªç„¶è¯­è¨€è§¦å‘æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ã€</strong> çš„é«˜æ•ˆå·¥ä½œæµã€‚</p>
<p>åœ¨è¿™å¥—å·¥ä½œæµä¸­ï¼Œä½ åªéœ€è¦åœ¨ç»ˆç«¯é‡Œå¯¹ Claude Code è¯´ä¸€å¥è¯ï¼Œä¾‹å¦‚ï¼šâ€œç”¨å¼€å‘ç¯å¢ƒè·‘ä¸€ä¸‹æ”¯ä»˜æµç¨‹çš„æµ‹è¯•â€ã€‚</p>
<p>Claude Code å°±ä¼šè‡ªåŠ¨è¯†åˆ«ä½ çš„æ„å›¾ï¼Œå®šä½å¯¹åº”çš„â€œæµ‹è¯•åœºæ™¯â€æˆ–â€œæµ‹è¯•å¥—ä»¶â€æ¥æ‰§è¡Œæµ‹è¯•ã€‚æµ‹è¯•å®Œæˆåï¼Œå®ƒä¼šå¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ•´ç†å’Œè§£è¯»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3a558498a3344dca956668361768aa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=xdfNolY8dovPXONhZ2Js3gSQ9E4%3D" alt="" loading="lazy"/></p>
<p>è¿™å¥—æµç¨‹ç”±ä¸‰ä¸ªå·¥å…·ç»„æˆï¼š</p>
<ul>
<li>
<p><strong>Apifox CLIï¼š</strong> Apifox çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ç”¨äºåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ CLI å‘½ä»¤ï¼Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
</li>
<li>
<p><strong>Claude Codeï¼š</strong> Anthropic æ¨å‡ºçš„å‘½ä»¤è¡Œ AI åŠ©æ‰‹ã€‚å¯ä»¥åœ¨ç»ˆç«¯æ“ä½œæ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€æ‰§è¡Œè„šæœ¬ç­‰ã€‚</p>
</li>
<li>
<p><strong>Claude Skillsï¼š</strong> ä¹Ÿç§° Agent Skillsï¼Œæ˜¯ Claude Code çš„æ‰©å±•åŠŸèƒ½ã€‚å®ƒå¯ä»¥å®šä¹‰ Claude å¦‚ä½•å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œç›¸å½“äºä¸€ä»½å¯æ‰§è¡Œçš„æ“ä½œè¯´æ˜ã€‚</p>
</li>
</ul>
<p>åœ¨è¿™å¥—æµç¨‹ä¸­ï¼ŒClaude Code è´Ÿè´£ç†è§£è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œè‹¥â€œæŒ‡ä»¤â€åŒ¹é…åˆ°æœ¬å·¥ä½œæµä¸­é¢„ç½®çš„ Claude Skills åï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œ Apifox CLI å‘½ä»¤å¹¶åˆ†ææ‰§è¡Œç»“æœã€‚</p>
<h2 data-id="heading-0">è¿™å¥—æµç¨‹èƒ½åšä»€ä¹ˆ</h2>
<p>ä¸‹é¢é€šè¿‡å‡ ä¸ªå®é™…æ“ä½œåœºæ™¯ï¼Œç›´è§‚äº†è§£è¿™å¥—å·¥ä½œæµçš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<h3 data-id="heading-1">æ‰§è¡Œå•ä¸ªæµ‹è¯•</h3>
<p>å¦‚æœæƒ³æ‰§è¡Œç‰¹å®šçš„æµ‹è¯•åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šã€‚ä¾‹å¦‚ï¼Œåœ¨ Claude Code è¾“å…¥ï¼šâ€œå¸®æˆ‘è·‘ä¸€ä¸‹ç™»å½•åŠŸèƒ½çš„æµ‹è¯•ï¼Œç”¨å¼€å‘ç¯å¢ƒâ€ï¼Œæµ‹è¯•å®Œæˆå Claude ä¼šåˆ†æç»“æœå¹¶ç»™å‡ºæ€»ç»“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a25fc4aac84dcfbb26bef70028716e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=dL%2FObeVCQfSUPM2ECoeCOMprUhk%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæµ‹è¯•å¤±è´¥ï¼ŒClaude ä¼šåˆ†æå¤±è´¥åŸå› ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8568637529ad45efb69673b6a8451086~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=LgFWtuSfWybhW%2BvpQh%2BVQv8wQxk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æµ‹è¯•</h3>
<p>å¦‚æœæƒ³çŸ¥é“æœ‰å“ªäº›æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ï¼Œå¯ä»¥é—®ï¼šâ€œæœ‰å“ªäº›æµ‹è¯•å¯ä»¥æ‰§è¡Œï¼Ÿâ€ã€‚Claude å°±ä¼šè¿è¡Œç›¸å…³çš„è„šæœ¬ï¼ŒæŠŠæ‰€æœ‰æµ‹è¯•åˆ—å‡ºæ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/118b3a31402d4e10bedcb023f932e168~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=X0q2pJgIiiQIyUZ19qWkd6sRsAE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">æ‰§è¡ŒæŸä¸ªä¸šåŠ¡æ¨¡å—çš„æ‰€æœ‰æµ‹è¯•</h3>
<p>æƒ³æ‰§è¡ŒæŸä¸ªä¸šåŠ¡æ¨¡å—çš„æ‰€æœ‰æµ‹è¯•ï¼Œä¾‹å¦‚æƒ³ä¸€æ¬¡è·‘å®Œæ”¯ä»˜ç›¸å…³çš„æµ‹è¯•ï¼Œå¯ä»¥è¯´ï¼šâ€œç”¨æµ‹è¯•ç¯å¢ƒè·‘ä¸€ä¸‹æ”¯ä»˜ç›¸å…³çš„æ‰€æœ‰æµ‹è¯•â€ã€‚Claude ä¼šè‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰ç›¸å…³æµ‹è¯•æ–‡ä»¶å¹¶ä¾æ¬¡æˆ–è€…å¹¶è¡Œæ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e188a6d3d144fa9ab3104931f0ce6a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=gbQDpQ82v447%2BL80%2BSt73Ho5juE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">å¯¹æ¯”ä¸åŒç¯å¢ƒçš„æµ‹è¯•ç»“æœ</h3>
<p>å¦‚æœéœ€è¦å¯¹æ¯”ä¸åŒè¿è¡Œç¯å¢ƒçš„æµ‹è¯•ç»“æœï¼Œå¯ä»¥è¯´ï¼šâ€œç”¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒè·‘ä¸€ä¸‹ç™»å½•åŠŸèƒ½çš„æµ‹è¯•â€ã€‚Claude ä¼šåœ¨ä¸¤ä¸ªç¯å¢ƒä¸‹æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶å¸®ä½ åˆ†æç»“æœå·®å¼‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d05442e6a70144c7bb1b5fa9ddd019a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=1qA7jR0luxTfhUzmGPwVsCKXtVU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ ¹æ®ä»£ç å˜æ›´æ‰§è¡Œæµ‹è¯•</h3>
<p>å½“ä»£ç æœ‰æ›´æ–°æ—¶ï¼Œå¯ä»¥è®© Claude åªæ‰§è¡Œå—å½±å“çš„æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ã€‚ä¾‹å¦‚ï¼šâ€œæ ¹æ®æœ€è¿‘çš„ä»£ç å˜æ›´ï¼Œåœ¨å¼€å‘ç¯å¢ƒè·‘ä¸€ä¸‹å—å½±å“çš„æ¥å£æµ‹è¯•â€ã€‚Claude ä¼šæ ¹æ® Git åˆ†æå˜æ›´æ–‡ä»¶ï¼Œå¹¶é€‰æ‹©å¯¹åº”æµ‹è¯•æ‰§è¡Œï¼ŒèŠ‚çœæ—¶é—´å’Œèµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/361b7a9f39c64d6f9367fbe960df0744~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=UUFarDsw1HyA87Te7UHT3WAFFNY%3D" alt="" loading="lazy"/></p>
<p>å…¶å®ƒæ›´å¤šåœºæ™¯ï¼Œéœ€è¦ä½ æ¥æ¢ç´¢......</p>
<p>ä¸‹é¢å°†ä¾æ¬¡ä»‹ç» Apifox CLIã€Claude Code å’Œ Claude Skills çš„å®‰è£…å’Œæ„å»ºæ–¹å¼ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬ç»„åˆä½¿ç”¨ï¼Œæœ€ç»ˆè·‘é€šè¿™å¥—å·¥ä½œæµã€‚</p>
<h2 data-id="heading-6">å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-7">ç¯å¢ƒè¦æ±‚</h3>
<p>ç¡®ä¿ç”µè„‘ä¸Šè£…äº† Node ç¯å¢ƒï¼Œå¯æ‰“å¼€ç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node -v
npm -v
</code></pre>
<h3 data-id="heading-8">å®‰è£… Apifox CLI</h3>
<p>é€šè¿‡ npm å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g apifox-cli

apifox --version
</code></pre>
<p>çœ‹åˆ°ç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p>å¯ä»¥åˆ° Apifox çš„ã€Œè‡ªåŠ¨åŒ–æµ‹è¯• -&gt; CI/CDã€ä¸­ï¼Œå¤åˆ¶ä¸€ä¸ªâ€œæµ‹è¯•åœºæ™¯â€æˆ–è€…â€œæµ‹è¯•å¥—ä»¶â€çš„ CLI å‘½ä»¤åˆ°ç»ˆç«¯æ‰§è¡Œï¼Œè®°å¾—æ·»åŠ  Access Tokenã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6037f2c1b1454a8a822db2903f764cc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=suDTVVy39ceu%2B5CM6jQdBduV8ak%3D" alt="" loading="lazy"/></p>
<p>çœ‹åˆ°æµ‹è¯•è¾“å‡ºå°±è¯´æ˜ Apifox CLI èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚</p>
<blockquote>
<p>ğŸ’¡ éœ€è¦å°† Apifox å®¢æˆ·ç«¯å’Œ Apifox CLI æ›´æ–°åˆ°æœ€æ–°ç‰ˆï¼Œæ‰èƒ½ä½¿ç”¨æœ€æ–°çš„â€œæµ‹è¯•å¥—ä»¶â€åŠŸèƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-9">å®‰è£… Claude Code</h3>
<p>é€šè¿‡ npm å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code

claude --version
</code></pre>
<p>é¦–æ¬¡è¿è¡Œéœ€è¦ç™»å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude
</code></pre>
<p>æŒ‰ç…§æç¤ºå®Œæˆæˆæƒï¼Œéœ€è¦ Claude è´¦å· <em><span>ï¼ˆå¯ä»¥é€šè¿‡æŸé±¼æˆ–ä¸€äº›ä¸­è½¬ç«™è§£å†³è´¦å·é—®é¢˜ï¼‰</span></em> ã€‚ç™»å½•åä¼šè¿›å…¥å¯¹è¯ç•Œé¢ï¼Œè¯•è¯•é—®ä¸€äº›é—®é¢˜ï¼ŒClaude ä¼šç»™å‡ºå›ç­”ã€‚</p>
<p>ç°åœ¨ Claude è¿˜ä¸çŸ¥é“æ€ä¹ˆè·‘ Apifox æµ‹è¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ Claude Skills æ¥æ•™ä¼šå®ƒã€‚</p>
<h2 data-id="heading-10">Claude Skills çš„æ„å»º</h2>
<h3 data-id="heading-11">ç†è§£ Skills çš„å·¥ä½œåŸç†</h3>
<p>ä½¿ç”¨ Claude Code æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šè¦ä½¿ç”¨çš„ Skillã€‚ä½ åªéœ€è¦ç”¨ä¸€å¥è¯æè¿°ä½ æƒ³åšçš„äº‹ï¼ŒClaude ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ Skill æ¥å®Œæˆã€‚</p>
<p>åªè¦ä½ è¾“å…¥çš„è‡ªç„¶è¯­è¨€ä¸æŸä¸ª Skill çš„æè¿°ç›¸åŒ¹é…ï¼ŒClaude å°±ä¼šåŠ è½½è¯¥ Skillï¼Œå¹¶æŒ‰ç…§å…¶ä¸­å®šä¹‰çš„æµç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</p>
<h3 data-id="heading-12">æ­¥éª¤ 1ï¼šåˆ›å»º Skill ç›®å½•</h3>
<p>Skills çš„é…ç½®æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ <code>.claude/skills/</code> ç›®å½•ä¸‹ï¼Œæ¯ä¸ª Skill å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„å­ç›®å½•ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä¸º Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ›å»ºä¸€ä¸ªæœ€å°å¯ç”¨çš„ Skill ç›®å½•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">mkdir -p .claude/skills/apifox-tests
</code></pre>
<p>æ‰§è¡Œå®Œæˆåï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">.claude/skills/apifox-tests/
</code></pre>
<p>åç»­æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œé€æ­¥æ·»åŠ  Skill çš„å…¥å£æ–‡ä»¶å’Œæ‰§è¡Œè„šæœ¬ç­‰å†…å®¹ã€‚</p>
<h3 data-id="heading-13">æ­¥éª¤ 2ï¼šåˆ›å»º SKILL.md</h3>
<p>æ¯ä¸ª Skill éƒ½éœ€è¦ä¸€ä¸ª <code>SKILL.md</code> æ–‡ä»¶ï¼Œç”¨æ¥è¯´æ˜å½“è¿™ä¸ª Skill è¢«åŒ¹é…åˆ°æ—¶ï¼ŒClaude åº”è¯¥å¦‚ä½•ä¸€æ­¥æ­¥å®Œæˆä»»åŠ¡ã€‚</p>
<p><code>SKILL.md</code> ä»¥ <code>---</code> åŒ…è£¹çš„ YAML å…ƒä¿¡æ¯å¼€å§‹ï¼Œå…¶ä¸­ <code>name</code> å’Œ <code>description</code> æ˜¯å¿…éœ€å­—æ®µã€‚</p>
<p><code>description</code> å°¤å…¶é‡è¦ï¼Œå®ƒç”¨äºå¸®åŠ© Claude åˆ¤æ–­åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥å¯ç”¨è¿™ä¸ª Skillï¼Œæ‰€ä»¥è¿™é‡Œè¦æ ¹æ®ä½ çš„ä¸šåŠ¡å†™è§¦å‘æ¡ä»¶ã€‚</p>
<p>åœ¨ YAML ä¹‹åçš„ Markdown å†…å®¹ä¸­ï¼Œåˆ™ç”¨äºæè¿°è¿™ä¸ª Skill è¢«å¯ç”¨åï¼ŒClaude å…·ä½“åº”è¯¥æ€ä¹ˆåšï¼ŒåŒ…æ‹¬åˆ¤æ–­é€»è¾‘ã€æ‰§è¡Œæ­¥éª¤ã€å¼•ç”¨çš„è„šæœ¬ã€ä»¥åŠéœ€è¦éµå¾ªçš„çº¦æŸè§„åˆ™ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç›´æ¥ä½¿ç”¨çš„ <code>SKILL.md</code> ç¤ºä¾‹ï¼Œç”¨äºå®šä¹‰ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: apifox-tests
<span class="hljs-section">description: æ‰§è¡Œå’Œè§£è¯» Apifox è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚è§¦å‘åœºæ™¯ï¼š(1) ä¿®æ”¹ä»£ç åéœ€è¦éªŒè¯æ¥å£å¯ç”¨æ€§ (2) git commit/push å‰çš„æ¥å£æ£€æŸ¥ (3) å‘å¸ƒç‰ˆæœ¬å‰çš„å›å½’æµ‹è¯• (4) ç”¨æˆ·æ˜ç¡®è¦æ±‚è¿è¡Œ Apifox æµ‹è¯•ï¼Œæˆ–ç”¨å…·ä½“ç¯å¢ƒè·‘ç›¸å…³æµ‹è¯• (5) åˆå¹¶åˆ° main åˆ†æ”¯å‰çš„è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚é€‰æ‹©åˆé€‚çš„æµ‹è¯•åœºæ™¯æˆ–è€…æµ‹è¯•å¥—ä»¶ï¼Œæ‰§è¡Œæµ‹è¯•å¹¶è§£é‡Šç»“æœï¼Œä½†ä¸ä¿®æ”¹æµ‹è¯•æˆ–å‘½ä»¤æœ¬èº«ã€‚
---</span>

<span class="hljs-section"># Apifox Tests</span>

æ‰§è¡Œ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•å¹¶è§£é‡Šç»“æœã€‚

<span class="hljs-section">## å·¥ä½œæµç¨‹</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**é€‰æ‹©æµ‹è¯•**</span>ï¼š

<span class="hljs-bullet">-</span> å¦‚æœç”¨æˆ·åœ¨å¯¹è¯ä¸­æ˜ç¡®æä¾›äº†ï¼š
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶è·¯å¾„
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶å
<span class="hljs-bullet">  -</span> æˆ–æ¸…æ™°å¯å”¯ä¸€åŒ¹é…çš„æµ‹è¯•åç§°
<span class="hljs-bullet">-</span> ç›´æ¥ä½¿ç”¨è¯¥æµ‹è¯•ï¼Œä¸å†è¿›è¡Œè‡ªåŠ¨é€‰æ‹©
<span class="hljs-bullet">-</span> è‹¥ä¿¡æ¯ä¸æ˜ç¡®ï¼Œåº”ä¼˜å…ˆé€šè¿‡è¿è¡Œ <span class="hljs-code">`node ./.claude/skills/apifox-tests/scripts/list-tests.js`</span> è„šæœ¬æ¥å¿«é€Ÿè·å–æ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶è·¯å¾„åŠæè¿°ã€‚
<span class="hljs-bullet">-</span> é¿å…åœ¨åºå¤§çš„é¡¹ç›®ç›®å½•ä¸­è¿›è¡Œç›²ç›®çš„å…¨å±€æœç´¢ï¼Œç›´æ¥å®šä½åˆ°è¯¥ Skill ä¸“ç”¨çš„æµ‹è¯•æ–‡ä»¶ç›®å½• <span class="hljs-code">`tests/`</span>ã€‚

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**å¤šæµ‹è¯•æ‰§è¡Œè§„åˆ™**</span>

<span class="hljs-bullet">-</span> é»˜è®¤åªæ‰§è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œä½†éœ€ç»™å‡ºæ˜¯å¦æ‰¹é‡æ‰§è¡Œçš„é€‰æ‹©
<span class="hljs-bullet">-</span> å¦‚æœç”¨æˆ·æ˜ç¡®è¡¨ç¤ºï¼š
<span class="hljs-bullet">  -</span> â€œè·‘è¿™å‡ ä¸ªâ€
<span class="hljs-bullet">  -</span> â€œå…¨éƒ¨è·‘ä¸€éâ€
<span class="hljs-bullet">-</span> åˆ™è¿›å…¥ <span class="hljs-strong">**æ‰¹é‡æ‰§è¡Œæ¨¡å¼**</span>

æ‰¹é‡æ‰§è¡Œæ¨¡å¼ä¸‹ï¼š
<span class="hljs-bullet">-</span> æ˜ç¡®åˆ—å‡ºå°†è¦æ‰§è¡Œçš„æµ‹è¯•åˆ—è¡¨
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¯¢é—®æ‰§è¡Œæ–¹å¼**</span>ï¼šè®©ç”¨æˆ·é€‰æ‹© â€œæŒ‰é¡ºåºæ‰§è¡Œâ€ (æ›´æ˜“è¯») æˆ– â€œå¹¶è¡Œæ‰§è¡Œâ€ (é€Ÿåº¦å¿«)ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**æŒ‰é¡ºåºæ‰§è¡Œ**</span>ï¼šé€ä¸ªè¿è¡Œæµ‹è¯•å¹¶å³æ—¶åˆ†æï¼Œé€‚åˆè°ƒè¯•ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**å¹¶è¡Œæ‰§è¡Œ**</span>ï¼šåŒæ—¶å¯åŠ¨å¤šä¸ªæµ‹è¯•ï¼ˆä½¿ç”¨ <span class="hljs-code">`&amp;`</span> ç»“å°¾æˆ–è„šæœ¬å¹¶å‘ï¼‰ï¼Œé€‚åˆå¿«é€Ÿå›å½’ï¼Œä½†æ—¥å¿—å¯èƒ½ä¼šäº¤ç»‡ã€‚
<span class="hljs-bullet">-</span> è¯·æ±‚ç”¨æˆ·ç¡®è®¤æ‰§è¡Œæ–¹å¼åŠæµ‹è¯•åˆ—è¡¨ï¼ˆæ˜¯ / å¦ï¼‰
<span class="hljs-bullet">-</span> æŒ‰é€‰æ‹©çš„æ–¹å¼æ‰§è¡Œæµ‹è¯•
<span class="hljs-bullet">-</span> æœ€ç»ˆæ±‡æ€»æˆ–ä¾æ¬¡è§£é‡Šæ¯ä¸ªæµ‹è¯•çš„ç»“æœ

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ç¡®è®¤ç¯å¢ƒ**</span>ï¼š
<span class="hljs-bullet">-</span> æ”¯æŒçš„ç¯å¢ƒåŒ…æ‹¬ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-code">`dev`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`test`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`prod`</span>
<span class="hljs-bullet">-</span> å¦‚ç”¨æˆ·æœªæ˜ç¡®æŒ‡å®šç¯å¢ƒï¼š
<span class="hljs-bullet">  -</span> åˆ—å‡ºä¸Šè¿°ç¯å¢ƒå
<span class="hljs-bullet">  -</span> è®©ç”¨æˆ·ç¡®è®¤ä½¿ç”¨å“ªä¸€ä¸ª

<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æ‰§è¡Œæµ‹è¯•**</span>ï¼š
<span class="hljs-bullet">-</span> åœ¨ä»¥ä¸‹ä¿¡æ¯æ˜ç¡®åæ‰§è¡Œæµ‹è¯•ï¼š
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶è·¯å¾„
<span class="hljs-bullet">  -</span> ç¯å¢ƒåï¼ˆdev / test / prodï¼‰
<span class="hljs-code">```bash
node ./.claude/skills/apifox-tests/scripts/run-cli.js &lt;æµ‹è¯•æ–‡ä»¶è·¯å¾„&gt; &lt;ç¯å¢ƒå&gt;
```</span>

<span class="hljs-bullet">5.</span> <span class="hljs-strong">**è§£é‡Šç»“æœ**</span>ï¼šåˆ†æ Apifox CLI è¾“å‡ºï¼Œè§£é‡Šå¤±è´¥åŸå› 

<span class="hljs-section">## å¤±è´¥å¤„ç†</span>

<span class="hljs-bullet">-</span> ä¸ä¿®æ”¹æµ‹è¯•æ–‡ä»¶
<span class="hljs-bullet">-</span> ä¸ä¿®æ”¹æ‰§è¡Œå‘½ä»¤
<span class="hljs-bullet">-</span> åŸºäºæµ‹è¯•åç§°ã€æ¥å£è¯­ä¹‰å’Œ CLI è¾“å‡ºè§£é‡Šå¤±è´¥åŸå› 

</code></pre>
<h3 data-id="heading-14">æ­¥éª¤ 3ï¼šè¡¥å…… Skill æ‰€éœ€çš„æ”¯æŒæ–‡ä»¶</h3>
<p>åœ¨å‰é¢çš„æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº† <code>SKILL.md</code>ï¼Œç”¨äºå®šä¹‰è¿™ä¸ª Skill çš„è§¦å‘æ¡ä»¶å’Œæ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå…¶ä½™æ–‡ä»¶éƒ½åªæ˜¯å¯¹ <code>SKILL.md</code> çš„è¡¥å……ï¼Œå½“æµç¨‹ä¸­éœ€è¦å…¶å®ƒä¿¡æ¯ï¼Œæ¯”å¦‚è¿è¡Œç¯å¢ƒã€æ‰§è¡Œå‘½ä»¤æˆ–æµ‹è¯•å®šä¹‰æ—¶ï¼Œå†æŒ‰éœ€å¼•å…¥å¯¹åº”çš„æ–‡ä»¶å³å¯ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™ä¸ª Skill çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">.claude/skills/apifox-tests/
â”œâ”€â”€ SKILL.md              # Skill å…¥å£ï¼Œå®šä¹‰è§¦å‘æ¡ä»¶å’Œæ•´ä½“æµç¨‹
â”œâ”€â”€ env/                  # è¿è¡Œç¯å¢ƒé…ç½®ï¼ˆå¦‚ dev / test / prodï¼‰ï¼Œç”¨äºåŒºåˆ†ä¸åŒæµ‹è¯•ç¯å¢ƒ
â”‚   â”œâ”€â”€ dev.env           # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ test.env          # æµ‹è¯•ç¯å¢ƒ
â”‚   â””â”€â”€ prod.env          # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ scripts/              # æ‰§è¡Œè„šæœ¬ï¼ˆè¢« SKILL.md è°ƒç”¨ï¼‰
â”‚   â”œâ”€â”€ list-tests.js     # åˆ—å‡º tests ç›®å½•ä¸‹çš„æ‰€æœ‰æµ‹è¯•
â”‚   â””â”€â”€ run-cli.js        # è´Ÿè´£ç»„è£…å¹¶æ‰§è¡Œ Apifox CLI å‘½ä»¤
â””â”€â”€ tests/                # æµ‹è¯•å®šä¹‰ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªæµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ï¼‰
    â”œâ”€â”€ æ”¯ä»˜æµç¨‹.md        
    â””â”€â”€ é€€æ¬¾æµç¨‹.md        
</code></pre>
<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ”¯æŒæ–‡ä»¶çš„ä½œç”¨å’Œç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-15">ç¯å¢ƒé…ç½®ï¼ˆenvï¼‰</h4>
<p><code>env/</code> ç›®å½•ç”¨äºå­˜æ”¾ä¸åŒè¿è¡Œç¯å¢ƒå¯¹åº”çš„å˜é‡é…ç½®ï¼Œä¾‹å¦‚ Apifox çš„è®¿é—®ä»¤ç‰Œ <em><span>ï¼ˆAccess Tokenï¼‰</span></em> å’Œç¯å¢ƒ IDã€‚</p>
<p>å°†ç¯å¢ƒ ID æŠ½ç¦»ä¸ºå˜é‡ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸æ”¹ä»»ä½•å‘½ä»¤æˆ–è„šæœ¬çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿåˆ‡æ¢æµ‹è¯•è¿è¡Œç¯å¢ƒ <em><span>ï¼ˆå¦‚å¼€å‘ / æµ‹è¯• / ç”Ÿäº§ï¼‰</span></em>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ <code>env/</code> ç›®å½•ä¸‹åˆ›å»º <code>dev.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">APIFOX_ACCESS_TOKEN=APS-ä½ çš„è®¿é—®ä»¤ç‰Œ
APIFOX_ENV_ID=ä½ çš„ç¯å¢ƒID
</code></pre>
<p>å¦‚æœéœ€è¦æ”¯æŒå¤šä¸ªç¯å¢ƒï¼Œå¯ä»¥æŒ‰ç…§åŒæ ·çš„æ–¹å¼åˆ›å»ºï¼š</p>
<ul>
<li>
<p><code>test.env</code></p>
</li>
<li>
<p><code>prod.env</code></p>
</li>
<li>
<p>â€¦â€¦</p>
</li>
</ul>
<p>æ¯ä¸ªæ–‡ä»¶åªéœ€è¦ç»´æŠ¤å¯¹åº”ç¯å¢ƒçš„å˜é‡å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5043873d93f44553993a4cfa350c58a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=hIJCeoTM7nL7oM%2BEUOreEH2RACg%3D" alt="" loading="lazy"/></p>
<p>ç¯å¢ƒ ID å¯¹åº”çš„æ˜¯ Apifox CLI å‘½ä»¤ä¸­ <code>-e</code> å‚æ•°åé¢çš„æ•°å­—ï¼Œæ¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒ <em><span>ï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰</span></em> åœ¨ Apifox ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ç¯å¢ƒ IDã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c326f50f1f10494fa17a70ec046feedb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=QuVu8rDcM%2FbLb2%2F8eFBS2ss53v8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¡ <code>env/</code> ç›®å½•çš„ <code>.env</code> æ–‡ä»¶åŒ…å«è®¿é—®ä»¤ç‰Œï¼Œæ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œä¸èƒ½æäº¤åˆ° Gitã€‚</p>
</blockquote>
<h4 data-id="heading-16">æ‰§è¡Œè„šæœ¬ï¼ˆscriptsï¼‰</h4>
<p><code>scripts/</code> ç›®å½•ç”¨äºå­˜æ”¾å¯ç›´æ¥æ‰§è¡Œçš„è„šæœ¬ï¼Œè´Ÿè´£æŠŠã€Œæµ‹è¯•å®šä¹‰ã€è½¬æ¢ä¸ºå®é™…å¯è¿è¡Œçš„ Apifox CLI å‘½ä»¤ï¼Œå¹¶å®Œæˆç¯å¢ƒå˜é‡æ³¨å…¥ä¸æ‰§è¡Œã€‚</p>
<p>æœ¬æ–‡ä¸­çš„ Skill é€‰æ‹©ä½¿ç”¨ Node.jsï¼Œä¸»è¦åŸºäºä¸¤ä¸ªè€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>Apifox CLI æœ¬èº«ä¾èµ– Node.js</strong>
ç›´æ¥å¤ç”¨åŒä¸€è¿è¡Œç¯å¢ƒï¼Œæ— éœ€é¢å¤–å‡†å¤‡ Python ç­‰è¿è¡Œæ—¶ã€‚</p>
</li>
<li>
<p><strong>é™ä½ä¸Šä¸‹æ–‡è´Ÿæ‹…ï¼Œå‡å°‘ tokens æ¶ˆè€—</strong>
å°†â€œå‘½ä»¤è§£æã€å˜é‡æ³¨å…¥ã€æ‰§è¡Œé€»è¾‘â€æ”¾åœ¨è„šæœ¬ä¸­å®Œæˆï¼Œå¯ä»¥é¿å…è®© Claude åœ¨å¯¹è¯ä¸­åå¤æ‹¼è£…å®Œæ•´ CLI å‘½ä»¤ã€‚</p>
</li>
</ol>
<p>å¦‚æœä½ å¯¹è„šæœ¬ä¸ç†Ÿæ‚‰ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ï¼Œè€Œæ˜¯åœ¨ <code>SKILL.md</code> ä¸­ç›´æ¥è®© Claude ç»„è£…å¹¶æ‰§è¡Œ CLI å‘½ä»¤ï¼Œåªæ˜¯ä¸Šä¸‹æ–‡æˆæœ¬ä¼šæ›´é«˜ä¸€äº›ã€‚</p>
<p>åœ¨ <code>scripts/</code> ç›®å½•ä¸‹åˆ›å»º <code>run-cli.js</code>ï¼Œå®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š</p>
<ul>
<li>
<p>ä»æŒ‡å®šçš„ Markdown æµ‹è¯•æ–‡ä»¶ä¸­æå– Apifox CLI å‘½ä»¤</p>
</li>
<li>
<p>æ ¹æ®é€‰å®šçš„ç¯å¢ƒ <em><span>ï¼ˆå¦‚ </span><code>dev</code><span> / </span><code>test</code><span>ï¼‰</span></em> åŠ è½½å¯¹åº”çš„ <code>.env</code> æ–‡ä»¶</p>
</li>
<li>
<p>æ³¨å…¥ç¯å¢ƒå˜é‡åæ‰§è¡Œæµ‹è¯•</p>
</li>
</ul>
<p>å¯ç›´æ¥ä½¿ç”¨çš„ç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> { execSync } <span class="hljs-keyword">from</span> <span class="hljs-string">"child_process"</span>;
<span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename);

<span class="hljs-comment">// args</span>
<span class="hljs-keyword">const</span> mdPath = process.<span class="hljs-property">argv</span>[<span class="hljs-number">2</span>];
<span class="hljs-keyword">const</span> envName = process.<span class="hljs-property">argv</span>[<span class="hljs-number">3</span>] || <span class="hljs-string">"local"</span>;

<span class="hljs-keyword">if</span> (!mdPath) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ ç¼ºå°‘æµ‹è¯• md æ–‡ä»¶è·¯å¾„"</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-comment">// env è·¯å¾„ï¼šå§‹ç»ˆç›¸å¯¹ skills æœ¬èº«</span>
<span class="hljs-keyword">const</span> envPath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">".."</span>, <span class="hljs-string">"env"</span>, <span class="hljs-string">`<span class="hljs-subst">${envName}</span>.env`</span>);

<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(envPath)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`âŒ æœªæ‰¾åˆ°ç¯å¢ƒé…ç½®ï¼š<span class="hljs-subst">${envPath}</span>`</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

dotenv.<span class="hljs-title function_">config</span>({ <span class="hljs-attr">path</span>: envPath });

<span class="hljs-comment">// è¯»å– md</span>
<span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(mdPath, <span class="hljs-string">"utf-8"</span>);
<span class="hljs-keyword">const</span> match = content.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/```bash([\s\S]*?)```/</span>);

<span class="hljs-keyword">if</span> (!match) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ æœªæ‰¾åˆ° bash å‘½ä»¤å—"</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-keyword">let</span> command = match[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();

<span class="hljs-comment">// å˜é‡æ›¿æ¢</span>
command = command
    .<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">"$APIFOX_ACCESS_TOKEN"</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">APIFOX_ACCESS_TOKEN</span>)
    .<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">"$APIFOX_ENV_ID"</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">APIFOX_ENV_ID</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`â–¶ Running (<span class="hljs-subst">${envName}</span>)`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(command);

<span class="hljs-comment">// æ‰§è¡Œ</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">execSync</span>(command, { <span class="hljs-attr">stdio</span>: <span class="hljs-string">"inherit"</span> });
} <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// Apifox CLI åœ¨æµ‹è¯•å¤±è´¥æ—¶ä¼šè¿”å›é€€å‡ºç  1</span>
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}
</code></pre>
<p>åŒæ ·åœ¨ <code>scripts/</code> ä¸‹åˆ›å»º <code>list-tests.js</code>ï¼Œç”¨äºï¼š</p>
<ul>
<li>
<p>é€’å½’æ‰«æ <code>tests/</code> ç›®å½•</p>
</li>
<li>
<p>æŸ¥æ‰¾æ‰€æœ‰ Markdown æµ‹è¯•æ–‡ä»¶</p>
</li>
<li>
<p>æå–é¦–è¡Œæè¿°ä¿¡æ¯</p>
</li>
<li>
<p>è¾“å‡ºå½“å‰æ‰€æœ‰å¯ç”¨çš„ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ—è¡¨</p>
</li>
</ul>
<p>å¯ç›´æ¥ä½¿ç”¨çš„ç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename);
<span class="hljs-keyword">const</span> testsDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">".."</span>, <span class="hljs-string">"tests"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">scan</span>(<span class="hljs-params">dir, relativePath = <span class="hljs-string">""</span></span>) {
    <span class="hljs-keyword">const</span> items = fs.<span class="hljs-title function_">readdirSync</span>(dir, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> });
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {
        <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(dir, item.<span class="hljs-property">name</span>);
        <span class="hljs-keyword">const</span> relPath = path.<span class="hljs-title function_">join</span>(relativePath, item.<span class="hljs-property">name</span>);
        
        <span class="hljs-keyword">if</span> (item.<span class="hljs-title function_">isDirectory</span>()) {
            <span class="hljs-title function_">scan</span>(fullPath, relPath);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (item.<span class="hljs-property">name</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".md"</span>)) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(fullPath, <span class="hljs-string">"utf-8"</span>);
                <span class="hljs-keyword">const</span> firstLine = content.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">trim</span>();
                <span class="hljs-keyword">const</span> description = firstLine.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"&gt;"</span>) 
                    ? firstLine.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^&gt;\s*/</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>() 
                    : <span class="hljs-string">"æ— æè¿°"</span>;
                <span class="hljs-keyword">const</span> displayPath = path.<span class="hljs-title function_">join</span>(<span class="hljs-string">"./.claude/skills/apifox-tests/tests"</span>, relPath);
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${displayPath}</span>] - <span class="hljs-subst">${description}</span>`</span>);
            } <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${relPath}</span>] - (æ— æ³•è¯»å–å†…å®¹)`</span>);
            }
        }
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ” å¯ç”¨çš„ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ—è¡¨ï¼š"</span>);
<span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(testsDir)) {
    <span class="hljs-title function_">scan</span>(testsDir);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âŒ æœªæ‰¾åˆ° tests ç›®å½•"</span>);
}

</code></pre>
<h4 data-id="heading-17">æµ‹è¯•å®šä¹‰ï¼ˆtestsï¼‰</h4>
<p><code>tests/</code> ç›®å½•ç”¨äºå­˜æ”¾æµ‹è¯•æ–‡ä»¶ï¼Œé‡‡ç”¨ Markdown ç¼–å†™ã€‚</p>
<p>è®¾è®¡åŸåˆ™ï¼šä¸€ä¸ª Markdown æ–‡ä»¶å¯¹åº”ä¸€ä¸ª Apifox æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ã€‚ä½ å¯ä»¥ç›´æ¥å¤ç”¨ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­å·²æœ‰çš„ç›®å½•ç»“æ„ã€æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶åç§°ï¼Œä»¥åŠæè¿°ä¿¡æ¯ã€‚</p>
<p>æ¯ä¸ª Markdown æ–‡ä»¶åªéœ€åŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹ï¼šä¸€æ®µç®€çŸ­çš„æµ‹è¯•è¯´æ˜ï¼Œä»¥åŠä¸€æ¡å¯ç›´æ¥æ‰§è¡Œçš„ Apifox CLI å‘½ä»¤ã€‚</p>
<p>Apifox CLI å‘½ä»¤é‡Œçš„ Access Token å’Œ <code>-e</code> å‚æ•°åé¢çš„ç¯å¢ƒ IDï¼Œåˆ†åˆ«ç”¨ <code>$APIFOX_ACCESS_TOKEN</code> å’Œ<code> $APIFOX_ENV_ID</code> ä»£æ›¿ï¼Œå¹¶ç»Ÿä¸€åœ¨ <code>.env</code> æ–‡ä»¶ä¸­é…ç½®ï¼Œè¿™æ ·æ—¢å¯ä»¥é¿å… token æ³„éœ²ï¼Œä¹Ÿèƒ½çµæ´»åˆ‡æ¢è¿è¡Œç¯å¢ƒã€‚ä¸€ä¸ª<code>ç™»å½•é‰´æƒ-è®¤è¯æµç¨‹.md</code>æ–‡ä»¶çš„å†…å®¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-quote">&gt; éªŒè¯ç™»å½•ã€åˆ·æ–° tokenã€ç™»å‡ºç­‰æ ¸å¿ƒæ¥å£æ˜¯å¦å¯ç”¨ã€‚</span>

<span class="hljs-code">```bash
apifox run --access-token $APIFOX_ACCESS_TOKEN -t 5564xxx -e $APIFOX_ENV_ID -n 1 -r html,cli
```</span>
</code></pre>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„ Skills ç®—æ˜¯æ„å»ºå®Œäº†ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ç»“æ„ï¼Œå¯¹æ¯”ä¸€ä¸‹ä¸ä½ çš„æœ‰ä»€ä¹ˆä¸åŒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6348eccc23cd4b28984b5db6db91a65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=Y%2F9LDUhj66xhOHyx8OTYlX9ZR6A%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18">åœ¨ Claude Code ä¸­ä½¿ç”¨</h2>
<p>é…ç½®å®Œæˆåï¼Œåœ¨ç»ˆç«¯æ§åˆ¶å°è¿è¡Œ <code>claude</code> å‘½ä»¤è¿›å…¥é¡¹ç›®ç›®å½•ã€‚Claude ä¼šè‡ªåŠ¨æ‰«æ <code>.claude/skills/</code> ç›®å½•ï¼Œå‘ç° <code>apifox-tests</code> Skillã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å…ˆç”¨ <code>/skills</code> å‘½ä»¤æŸ¥çœ‹å·²åŠ è½½çš„ Skillã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7237fc8d3bf8403da06e3995d2d3d504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=JkQVw60%2BKH2RFHMMOtMFKBuxJ1k%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œå¯ä»¥è¯•ç€è¯´ä¸€å¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šâ€œå¸®æˆ‘è·‘ä¸€ä¸‹é€€æ¬¾æµç¨‹çš„æµ‹è¯•ï¼Œç”¨æµ‹è¯•ç¯å¢ƒ â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9fabb35ab4b47389b3eceb0ae0f96d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=q32fNpWMMWnBkgo8UL2d48jiAsk%3D" alt="" loading="lazy"/></p>
<p>Claude ä¼šç†è§£ä½ çš„æ„å›¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶å¹¶æ‰§è¡Œæµ‹è¯•ã€‚åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ° Apifox CLI çš„è¾“å‡ºï¼›æµ‹è¯•å®Œæˆåï¼ŒClaude ä¼šå¯¹ç»“æœè¿›è¡Œåˆ†æå¹¶ç»™å‡ºæ€»ç»“ã€‚</p>
<p>æ•´ä¸ªæµç¨‹æ¦‚è¿°èµ·æ¥å°±æ˜¯ï¼Œä½ ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒClaude ç†è§£æ„å›¾å¹¶è°ƒç”¨è„šæœ¬ï¼Œè„šæœ¬æ‰§è¡Œ Apifox CLI å‘½ä»¤ï¼ŒClaude åˆ†æç»“æœå¹¶åé¦ˆç»™ä½ ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é€šè¿‡ Claude Codeã€Apifox CLI å’Œ Claude Skills æ„å»ºè‡ªåŠ¨åŒ–æµ‹è¯•å·¥ä½œæµã€‚æ ¸å¿ƒæ€æƒ³æ˜¯è®© Claude æˆä¸ºä½ å’Œå·¥å…·ä¹‹é—´çš„æ¡¥æ¢ã€‚ä½ ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒClaude ç†è§£æ„å›¾åè°ƒç”¨è„šæœ¬ï¼Œè„šæœ¬æ‰§è¡Œå…·ä½“å·¥ä½œï¼ŒClaude æŠŠç»“æœæ•´ç†æˆæ˜“è¯»çš„å½¢å¼åé¦ˆç»™ä½ ã€‚</p>
<p>è¦è®©è¿™å¥—æ–¹æ¡ˆçœŸæ­£å‘æŒ¥ä½œç”¨ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®ç‰¹ç‚¹è°ƒæ•´é…ç½®ã€‚æ¯”å¦‚æµ‹è¯•çš„ç»„ç»‡æ–¹å¼ã€ç¯å¢ƒçš„ç®¡ç†ç­–ç•¥ã€ç»“æœçš„åˆ†æé€»è¾‘ç­‰ã€‚å¥½åœ¨è¿™å¥—æ–¹æ¡ˆå„ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥å®šåˆ¶ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®æ”¹ç°æœ‰é€»è¾‘ã€‚</p>
<p>å¦‚æœä½ çš„å›¢é˜Ÿç»å¸¸éœ€è¦æ‰§è¡Œæ¥å£æµ‹è¯•ï¼Œå¸Œæœ›è®©è¿™ä¸ªè¿‡ç¨‹æ›´è‡ªåŠ¨åŒ–ã€æ›´æ™ºèƒ½ï¼Œè¿™å¥—æ–¹æ¡ˆå€¼å¾—ä¸€è¯•ã€‚åˆæœŸéœ€è¦èŠ±æ—¶é—´é…ç½®å’Œç†Ÿæ‚‰ï¼Œä½†ä¸€æ—¦å»ºç«‹èµ·æ¥ï¼Œèƒ½æ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡ã€‚éšç€ä½¿ç”¨æ·±å…¥ï¼Œä½ ä¼šå‘ç°æ›´å¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œè®©æ•´ä¸ªå·¥ä½œæµè¶Šæ¥è¶Šé¡ºç•…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ™ºèƒ½æ£€æµ‹è¯†åˆ«å®æˆ˜ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7594919272686714906</link>    <guid>https://juejin.cn/post/7594919272686714906</guid>    <pubDate>2026-01-14T04:41:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594919272686714906" data-draft-id="7594822511436840986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ™ºèƒ½æ£€æµ‹è¯†åˆ«å®æˆ˜ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T04:41:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ™ºèƒ½æ£€æµ‹è¯†åˆ«å®æˆ˜ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T04:41:49.000Z" title="Wed Jan 14 2026 04:41:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ™ºèƒ½æ£€æµ‹è¯†åˆ«å®æˆ˜ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šå·¥ä¸šè´¨æ£€ä¸ºä½•éœ€è¦æ–°ä¸€ä»£è§†è§‰ç®—æ³•</h3>
<p>åœ¨å…‰ä¼åˆ¶é€ æµç¨‹ä¸­ï¼Œå¤ªé˜³èƒ½ç”µæ± ç‰‡çš„è´¨é‡ç›´æ¥å†³å®šç»„ä»¶æ•ˆç‡ä¸ä½¿ç”¨å¯¿å‘½ã€‚è£‚çº¹ã€æ–­æ …ã€æš—æ–‘ã€åˆ’ç—•ç­‰ç¼ºé™·å¦‚æœæœªèƒ½åœ¨æ—©æœŸè¢«å‡†ç¡®è¯†åˆ«ï¼Œå°†åœ¨åç»­å°è£…æˆ–å¹¶ç½‘é˜¶æ®µæ”¾å¤§é£é™©ï¼Œå¸¦æ¥ä¸å¯é€†çš„ç»æµæŸå¤±ã€‚</p>
<p>ä¼ ç»ŸåŸºäºè§„åˆ™çš„æœºå™¨è§†è§‰æ–¹æ³•åœ¨å…‰ç…§å˜åŒ–ã€çº¹ç†å¤æ‚ã€ç¼ºé™·å½¢æ€å¤šæ ·çš„æƒ…å†µä¸‹é²æ£’æ€§ä¸è¶³ï¼Œè€Œæ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œå°¤å…¶æ˜¯ YOLO ç³»åˆ—ï¼Œåœ¨<strong>å®æ—¶æ€§ä¸ç²¾åº¦å¹³è¡¡</strong>æ–¹é¢å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ã€‚æœ¬æ–‡ç»“åˆå®é™…å·¥ç¨‹ç»éªŒï¼Œä»‹ç»ä¸€å¥—åŸºäº <strong>YOLOv8 + PyQt5</strong> çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ£€æµ‹å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba8697cac62a4d9d83ca163aa7035e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=DERvffbxeY3p48PkF3jv9smzWqA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h4>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV19iuoz4Epk%2F" target="_blank" title="https://www.bilibili.com/video/BV19iuoz4Epk/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV19iâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f180f7d20c94dc0a6bf173f9a4512d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=TS%2Busud3ePKSLY6kD75ugGuJajc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">ä¸€ã€ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡</h3>
<p>è¯¥ç³»ç»Ÿé‡‡ç”¨â€œ<strong>æ¨¡å‹æ¨ç†æ ¸å¿ƒ + å¯è§†åŒ–äº¤äº’å±‚</strong>â€çš„å…¸å‹å·¥ä¸š AI æ¶æ„ï¼š</p>
<ul>
<li><strong>ç®—æ³•å±‚</strong>ï¼šåŸºäº Ultralytics YOLOv8 çš„ç¼ºé™·æ£€æµ‹æ¨¡å‹ï¼Œè´Ÿè´£ç¼ºé™·å®šä½ä¸ç±»åˆ«è¯†åˆ«ï¼›</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šé‡‡ç”¨ YOLO æ ‡å‡†æ ¼å¼çš„æ•°æ®é›†ï¼Œæ”¯æŒå¤šç¼ºé™·ç±»åˆ«æ‰©å±•ï¼›</li>
<li><strong>åº”ç”¨å±‚</strong>ï¼šåŸºäº PyQt5 çš„æ¡Œé¢ç«¯ç•Œé¢ï¼Œå°è£…æ¨ç†æµç¨‹ï¼Œå®ç°ä¸€é”®æ£€æµ‹ï¼›</li>
<li><strong>éƒ¨ç½²å±‚</strong>ï¼šæ”¯æŒæœ¬åœ° GPU / CPU è¿è¡Œï¼Œå¹¶å¯è¿›ä¸€æ­¥å¯¼å‡º ONNX ç”¨äºå·¥ä¸šç«¯é›†æˆã€‚</li>
</ul>
<p>è¿™ç§åˆ†å±‚è®¾è®¡ä½¿ç³»ç»Ÿæ—¢èƒ½ç”¨äºç®—æ³•éªŒè¯ï¼Œä¹Ÿå…·å¤‡ç›´æ¥èµ°å‘äº§çº¿çš„å¯è¡Œæ€§ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a6401de93a94de1bec7f25d9bc0dbdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=xdFno3INy9hcI54Esbw6vDCiDTs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">äºŒã€YOLOv8 åœ¨å·¥ä¸šç¼ºé™·æ£€æµ‹ä¸­çš„ä¼˜åŠ¿</h3>
<p>ç›¸è¾ƒäºä¼ ç»Ÿ YOLO ç‰ˆæœ¬ï¼ŒYOLOv8 åœ¨å·¥ä¸šåœºæ™¯ä¸­å…·å¤‡æ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>Anchor-Free è®¾è®¡</strong>
å¯¹äºå½¢æ€ä¸è§„åˆ™ã€å°ºå¯¸å·®å¼‚æ˜æ˜¾çš„ç¼ºé™·ç›®æ ‡ï¼ŒAnchor-Free æœºåˆ¶å‡å°‘äº†äººå·¥å…ˆéªŒä¾èµ–ã€‚</p>
</li>
<li>
<p><strong>è§£è€¦æ£€æµ‹å¤´ç»“æ„</strong>
åˆ†ç±»ä¸å›å½’åˆ†æ”¯ç‹¬ç«‹ä¼˜åŒ–ï¼Œæœ‰åˆ©äºç»†ç²’åº¦ç¼ºé™·ç±»åˆ«çš„ç¨³å®šæ”¶æ•›ã€‚</p>
</li>
<li>
<p><strong>æ¨ç†é€Ÿåº¦ä¸ç²¾åº¦å…¼é¡¾</strong>
åœ¨ä¿è¯é«˜ mAP çš„åŒæ—¶ï¼Œèƒ½å¤Ÿæ»¡è¶³äº§çº¿çº§å®æ—¶æ£€æµ‹éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>å·¥ç¨‹ç”Ÿæ€æˆç†Ÿ</strong>
åŸç”Ÿæ”¯æŒè®­ç»ƒã€éªŒè¯ã€å¯¼å‡ºã€éƒ¨ç½²ï¼Œé™ä½å·¥ä¸šé¡¹ç›®å®æ–½æˆæœ¬ã€‚</p>
</li>
</ol>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87993933c4b14be3a5368fe2710655ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=Fs3o64WqEwB2TKpHqOeM0pTNezc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9da4975412a4281a01171e690477fc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=MDokHiDkb5INK528O%2BaVLmYCC6g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€æ•°æ®é›†æ„å»ºä¸è®­ç»ƒç­–ç•¥</h3>
<p>åœ¨ç”µæ± ç‰‡ç¼ºé™·æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œæ•°æ®è´¨é‡å¾€å¾€æ¯”æ¨¡å‹å¤æ‚åº¦æ›´å…³é”®ã€‚é¡¹ç›®é‡‡ç”¨å¦‚ä¸‹ç­–ç•¥ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ ‡æ³¨è§„èŒƒ</strong>ï¼šæ‰€æœ‰ç¼ºé™·å‡ä»¥çŸ©å½¢æ¡†æ ‡æ³¨ï¼Œç±»åˆ«è¯­ä¹‰æ¸…æ™°ï¼›</li>
<li><strong>ç±»åˆ«å‡è¡¡æ§åˆ¶</strong>ï¼šé¿å…æ¨¡å‹åå‘é«˜é¢‘ç¼ºé™·ç±»å‹ï¼›</li>
<li><strong>è®­ç»ƒ / éªŒè¯åˆ†ç¦»</strong>ï¼šç¡®ä¿è¯„ä¼°æŒ‡æ ‡å…·å¤‡å®é™…å‚è€ƒä»·å€¼ï¼›</li>
<li><strong>å¢å¼ºç­–ç•¥é€‚åº¦ä½¿ç”¨</strong>ï¼šåœ¨ä¸ç ´åç¼ºé™·è¯­ä¹‰çš„å‰æä¸‹æå‡æ³›åŒ–èƒ½åŠ›ã€‚</li>
</ul>
<p>è®­ç»ƒå®Œæˆåï¼Œé€šè¿‡ mAP@0.5ã€æŸå¤±æ›²çº¿å’Œæ··æ·†çŸ©é˜µç»¼åˆè¯„ä¼°æ¨¡å‹æ˜¯å¦å…·å¤‡ä¸Šçº¿æ¡ä»¶ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ab1efb4159342c68ca1e71d211741dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=Yh6hJj7i%2FWgMUgSM5WMbQl6YdS8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">å››ã€å¯è§†åŒ–æ£€æµ‹ç³»ç»Ÿçš„å·¥ç¨‹å®ç°</h3>
<p>ä¸ºäº†é™ä½æ¨¡å‹ä½¿ç”¨é—¨æ§›ï¼Œç³»ç»Ÿå¼•å…¥ PyQt5 æ„å»ºæ¡Œé¢çº§å¯è§†åŒ–å·¥å…·ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>å›¾ç‰‡ / æ–‡ä»¶å¤¹ / è§†é¢‘ / æ‘„åƒå¤´å¤šè¾“å…¥æºæ”¯æŒï¼›</li>
<li>å®æ—¶ç»˜åˆ¶ç¼ºé™·æ¡†ã€ç±»åˆ«æ ‡ç­¾ä¸ç½®ä¿¡åº¦ï¼›</li>
<li>æ£€æµ‹ç»“æœè‡ªåŠ¨ä¿å­˜ï¼Œä¾¿äºè´¨æ£€è¿½æº¯ï¼›</li>
<li>æ¨¡å‹æƒé‡ä¸€é”®åŠ è½½ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢ä¸éªŒè¯ã€‚</li>
</ul>
<p>è¯¥ç•Œé¢ä½¿ç®—æ³•èƒ½åŠ›ä»â€œå¼€å‘è€…ä¸“å±â€è½¬å˜ä¸ºâ€œå·¥ç¨‹äººå‘˜å¯ç”¨â€ï¼Œæ˜¾è‘—æå‡ç³»ç»Ÿè½åœ°æ•ˆç‡ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dda47c17a715426fbb070c0114080dd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=UH0n9NObTiUe7pUWqpfD10KkzO0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73dff4316a7c4a5b8669115fa5d5d0aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768970509&amp;x-signature=55iUSKHyKr4t7qweQlrzBZ0Wve4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-7">äº”ã€å…¸å‹åº”ç”¨åœºæ™¯åˆ†æ</h3>
<p>è¯¥ç³»ç»Ÿå¯çµæ´»åº”ç”¨äºå¤šç§å·¥ä¸šè´¨æ£€åœºæ™¯ï¼š</p>
<ul>
<li><strong>ç¦»çº¿æŠ½æ£€</strong>ï¼šå¯¹å†å²ç”µæ± ç‰‡å›¾åƒè¿›è¡Œæ‰¹é‡è´¨é‡è¯„ä¼°ï¼›</li>
<li><strong>äº§çº¿å®æ—¶æ£€æµ‹</strong>ï¼šé…åˆå·¥ä¸šç›¸æœºå®ç°åœ¨çº¿ç¼ºé™·è¯†åˆ«ï¼›</li>
<li><strong>ç®—æ³•éªŒè¯å¹³å°</strong>ï¼šä½œä¸ºæ–°æ¨¡å‹ã€æ–°æ•°æ®çš„å¿«é€ŸéªŒè¯å·¥å…·ï¼›</li>
<li><strong>æ•™å­¦ä¸ç§‘ç ”</strong>ï¼šç”¨äºå·¥ä¸šè§†è§‰ä¸æ·±åº¦å­¦ä¹ è¯¾ç¨‹å®è·µã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ç»“è¯­ï¼šä» Demo åˆ°å·¥ä¸šçº§åº”ç”¨çš„å…³é”®ä¸€æ­¥</h3>
<p>æœ¬æ–‡å±•ç¤ºäº†ä¸€å¥—é¢å‘çœŸå®å·¥ä¸šåœºæ™¯çš„ <strong>YOLOv8 å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ£€æµ‹ç³»ç»Ÿå®è·µæ–¹æ¡ˆ</strong>ã€‚è¯¥æ–¹æ¡ˆä¸ä»…å…³æ³¨æ¨¡å‹ç²¾åº¦ï¼Œæ›´å¼ºè°ƒå·¥ç¨‹å®Œæ•´æ€§ã€å¯ç”¨æ€§ä¸æ‰©å±•æ€§ï¼Œè¦†ç›–äº†ä»æ•°æ®ã€è®­ç»ƒã€æ¨ç†åˆ°å¯è§†åŒ–åº”ç”¨çš„å®Œæ•´é“¾è·¯ã€‚</p>
<p>å¯¹äºå¸Œæœ›å°†æ·±åº¦å­¦ä¹ çœŸæ­£å¼•å…¥å·¥ä¸šè´¨æ£€æµç¨‹çš„å¼€å‘è€…å’Œå·¥ç¨‹å›¢é˜Ÿè€Œè¨€ï¼Œè¿™ç±»â€œ<strong>ç®—æ³• + ç³»ç»Ÿ</strong>â€ä¸€ä½“åŒ–æ–¹æ¡ˆï¼Œæ­£æ˜¯ AI ä»å®éªŒå®¤èµ°å‘ç”Ÿäº§çº¿çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>æœ¬æ–‡ä»å·¥ä¸šè´¨æ£€çš„å®é™…éœ€æ±‚å‡ºå‘ï¼Œç³»ç»Ÿä»‹ç»äº†ä¸€å¥—åŸºäº <strong>YOLOv8 çš„å¤ªé˜³èƒ½ç”µæ± ç‰‡ç¼ºé™·æ£€æµ‹è§£å†³æ–¹æ¡ˆ</strong>ã€‚é€šè¿‡å°†é«˜æ€§èƒ½ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸ PyQt5 å¯è§†åŒ–ç•Œé¢ç›¸ç»“åˆï¼Œæ„å»ºäº†è¦†ç›–æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†éªŒè¯ä¸åº”ç”¨éƒ¨ç½²çš„å®Œæ•´å·¥ç¨‹é—­ç¯ã€‚è¯¥ç³»ç»Ÿåœ¨ä¿è¯æ£€æµ‹ç²¾åº¦çš„åŒæ—¶å…¼é¡¾å®æ—¶æ€§ä¸æ˜“ç”¨æ€§ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåº”å¯¹ç”µæ± ç‰‡ç¼ºé™·å°ºå¯¸å°ã€å½¢æ€å¤šæ ·ã€èƒŒæ™¯å¤æ‚ç­‰æŒ‘æˆ˜ï¼Œä¸ºå…‰ä¼åˆ¶é€ é¢†åŸŸå®ç°è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–è´¨æ£€æä¾›äº†å…·å¤‡è½åœ°ä»·å€¼çš„æŠ€æœ¯å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„å…è´¹ Vibe Coding æ•™ç¨‹ï¼Œçˆ†äº†ï¼]]></title>    <link>https://juejin.cn/post/7594831933516218414</link>    <guid>https://juejin.cn/post/7594831933516218414</guid>    <pubDate>2026-01-14T03:49:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594831933516218414" data-draft-id="7594822511436218394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„å…è´¹ Vibe Coding æ•™ç¨‹ï¼Œçˆ†äº†ï¼"/> <meta itemprop="keywords" content="VibeCoding,ç¨‹åºå‘˜,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-14T03:49:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„å…è´¹ Vibe Coding æ•™ç¨‹ï¼Œçˆ†äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T03:49:39.000Z" title="Wed Jan 14 2026 03:49:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚</p>
<p>å¦‚ä»Š Vibe Coding å·²ç»ç«éå…¨ç½‘ï¼Œä¸ä»…æ˜¯ç¨‹åºå‘˜ï¼Œè¿è®¾è®¡å¸ˆã€äº§å“è¿è¥ã€ç”šè‡³å®Œå…¨ä¸æ‡‚æŠ€æœ¯çš„äººéƒ½å¼€å§‹ç”¨ Vibe Coding å®ç°è‡ªå·±çš„æƒ³æ³•ï¼Œç”¨ AI åšå‡ºäº†è‡ªå·±çš„äº§å“å¹¶ç›ˆåˆ©å˜ç°ã€‚</p>
<p>ä¸ºäº†å¸®å¤§å®¶ç´§è·Ÿæ—¶ä»£ï¼Œæˆ‘ä¸€äººçˆ†è‚ï¼Œåˆ›ä½œäº†ä¸€å¥— <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.codefather.cn%2Fvibe" target="_blank" title="https://ai.codefather.cn/vibe" ref="nofollow noopener noreferrer">ã€ŠVibe Coding é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ã€‹</a>ï¼Œå®Œå…¨å…è´¹å¼€æºï¼</p>
<p>ä¸Šåƒå¼ å›¾ã€å‡ åä¸‡å­—ï¼Œç»“åˆäº†æˆ‘ä¸¤å¹´åŠçš„ AI ç¼–ç¨‹ç»éªŒ + é¡¹ç›®å¼€å‘ç»éªŒ + äº§å“å˜ç°ç»éªŒï¼Œæˆ‘çš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<strong>å¸®åŠ©ä»»ä½•äººå¿«é€ŸæŒæ¡ Vibe Codingï¼Œå“ªæ€•é›¶åŸºç¡€ï¼Œä¹Ÿèƒ½å¿«é€Ÿå¼€å‘ä¸Šçº¿è‡ªå·±çš„äº§å“å¹¶ç›ˆåˆ©ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/598924e20084414fa304010665870f7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=sGKVbAIJIyeJik9l%2FlTEk%2FRlPvQ%3D" alt="é±¼çš®çš„å…è´¹Vibe Codingæ•™ç¨‹" loading="lazy"/></p>
<p>è‡­ä¸è¦è„¸ä¸€ä¸‹ï¼Œæˆ‘æ•¢è¯´è¿™å¥—å…è´¹æ•™ç¨‹åŠæ‰“ 90% çš„ä»˜è´¹ Vibe Coding å†…å®¹ï¼Œæ¯•ç«Ÿæˆ‘æŠ•å…¥äº†è¶³å¤Ÿå¤šçš„æ—¶é—´ã€‚</p>
<ul>
<li>æ•™ç¨‹æ–‡æ¡£å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fai-guide" target="_blank" title="https://github.com/liyupi/ai-guide" ref="nofollow noopener noreferrer">github.com/liyupi/ai-gâ€¦</a></li>
<li>æ•™ç¨‹åœ¨çº¿é˜…è¯»åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.codefather.cn%2Fvibe" target="_blank" title="https://ai.codefather.cn/vibe" ref="nofollow noopener noreferrer">ai.codefather.cn/vibe</a></li>
</ul>
<p>æ¬¢è¿å¤§å®¶ Star æ”¶è—ã€åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19fd0eb9db5146549b4a7a634692c512~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=K6r3zpgxUmemQNgHMYz3OnRYzmU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Vibe Codingï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>Vibe Coding å°±æ˜¯ç”¨äººè¯å’Œ AI èŠå¤©ï¼Œè®© AI å¸®ä½ å†™ä»£ç </strong>ã€‚ä½ ä¸éœ€è¦è®°ä½ä»»ä½•è¯­æ³•ï¼Œåªéœ€è¦æŠŠéœ€æ±‚è®²æ¸…æ¥šï¼Œæ¯”å¦‚è¯´ â€œå¸®æˆ‘åšä¸€ä¸ªè®°è´¦é¡µé¢â€ï¼ŒAI å°±èƒ½å¸®ä½ ç”Ÿæˆã€‚ç¼–ç¨‹å˜å¾—åƒèŠå¤©ä¸€æ ·è‡ªç„¶ï¼Œè¿™å°±æ˜¯ Vibe Coding çš„é­…åŠ›ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆè¦å­¦ Vibe Codingï¼Ÿ</h2>
<p>ä»¥å‰å­¦ç¼–ç¨‹è¦èŠ±å‡ ä¸ªæœˆï¼Œç°åœ¨ç”¨ Vibe Coding å‡ å¤©å°±èƒ½ä¸Šæ‰‹ã€‚ä»Šå¤©æƒ³åˆ°ä¸€ä¸ªç‚¹å­ï¼Œä»Šå¤©å°±èƒ½åšå‡ºæ¥ï¼Œç”Ÿäº§åŠ›æå‡æ•°åå€ï¼</p>
<p>å­¦äº† Vibe Coding åï¼Œä½ å¯ä»¥å¿«é€Ÿåšå‡ºæå‡åŠå…¬æ•ˆç‡çš„å°å·¥å…·ã€å¯ä»¥å¼€å‘è§£å†³ç”Ÿæ´»é—®é¢˜çš„åº”ç”¨ã€å¯ä»¥æŠŠè„‘æµ·ä¸­çš„åˆ›æ„å˜æˆçœŸå®çš„äº§å“å¹¶ç›ˆåˆ©ã€‚</p>
<h2 data-id="heading-2">è¿™å¥—æ•™ç¨‹æœ‰ä»€ä¹ˆï¼Ÿ</h2>
<p>ç½‘ä¸Šè™½ç„¶æœ‰å¾ˆå¤š AI ç¼–ç¨‹æ•™ç¨‹ï¼Œä½†è¦ä¹ˆå¤ªç¢ç‰‡åŒ–ã€è¦ä¹ˆåªè®²å·¥å…·ä¸è®²æ–¹æ³•ã€è¦ä¹ˆç¼ºå°‘å®æˆ˜æ¡ˆä¾‹ã€‚</p>
<p>è¿™å°±å¯¼è‡´å¤§å®¶åªèƒ½ä¸œæ‹¼è¥¿å‡‘ã€æœåˆ°ä¸€ä¸ªå­¦ä¸€æ‹›ï¼Œå¾ˆéš¾ç³»ç»Ÿåœ°æŒæ¡ Vibe Codingã€‚</p>
<p><strong>å› æ­¤ï¼Œæˆ‘å‡ºæ‰‹äº†ï¼</strong></p>
<p>è¿™å¥—æ•™ç¨‹æ¶µç›–äº† Vibe Coding çš„æ–¹æ–¹é¢é¢ã€‚ä»é›¶åŸºç¡€å…¥é—¨ =&gt; 10 åˆ†é’Ÿåšå‡ºç¬¬ä¸€ä¸ªé¡¹ç›® =&gt; å­¦ä¼šå¤šç§ AI ç¼–ç¨‹å·¥å…· =&gt; å®æˆ˜å„ç±» AI é¡¹ç›® =&gt; æŒæ¡ AI ç¼–ç¨‹æ ¸å¿ƒæŠ€å·§ =&gt; è·‘é€šäº§å“å˜ç°å…¨æµç¨‹ï¼Œå†æ­é… AI ç¼–ç¨‹å­¦ä¹ èµ„æºã€AI çŸ¥è¯†ç™¾ç§‘ã€å¸¸è§é—®é¢˜è§£å†³æ‰‹å†Œï¼Œèƒ½å¤Ÿå¸®ä½ ç©è½¬ Vibe Codingï¼Œåº”å¯¹å„ç§éœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad0eea3920354ade8e3e44ace0a6e661~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=fXg7boQEljN7Y7iCIH07X%2FeDX5Q%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ç²¾å¿ƒæ¢³ç†äº†å†…å®¹ç»“æ„ï¼Œè®©ä½ èƒ½å¤Ÿä¸€æ¡é¾™å­¦ä¹ ï¼Œæˆ–è€…å¿«é€Ÿæ‰¾åˆ°é€‚åˆè‡ªå·±é˜…è¯»çš„å†…å®¹ã€‚</p>
<ul>
<li>åŸºç¡€å¿…è¯»ï¼šå¸®ä½ å¿«é€Ÿç†è§£ Vibe Coding å¹¶ä¸Šæ‰‹å®è·µï¼Œ10 åˆ†é’Ÿåšå‡ºç¬¬ä¸€ä¸ªä½œå“</li>
<li>ç¼–ç¨‹å·¥å…·ï¼šå¸®ä½ é€‰æ‹©é€‚åˆè‡ªå·±çš„ AI ç¼–ç¨‹å·¥å…·ï¼ŒåŒ…æ‹¬ AI æ¨¡å‹é€‰æ‹©ã€AI é›¶ä»£ç å¹³å°ã€AI æ™ºèƒ½ä½“å¹³å°ã€AI ä»£ç ç¼–è¾‘å™¨ã€AI å‘½ä»¤è¡Œå·¥å…·ã€IDE æ’ä»¶ç­‰</li>
<li>é¡¹ç›®å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ ä» 0 åˆ° 1 åšå‡ºçœŸå®å¯ç”¨çš„äº§å“ï¼Œè¦†ç›–ä¸ªäººå·¥å…·ã€AI åº”ç”¨ã€å…¨æ ˆåº”ç”¨ã€å°ç¨‹åºç­‰å¤šç§ç±»å‹</li>
<li>ç»éªŒæŠ€å·§ï¼šå¸®ä½ æå‡ Vibe Coding æ•ˆç‡å’Œè´¨é‡ï¼ŒåŒ…æ‹¬æ ¸å¿ƒå¿ƒæ³•ã€å¯¹è¯å·¥ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€å¹»è§‰å¤„ç†ã€ä»£ç è´¨é‡ä¿éšœç­‰</li>
<li>äº§å“å˜ç°ï¼šæ•™ä½ å¦‚ä½•è®©äº§å“äº§ç”Ÿä»·å€¼ï¼Œæ¶µç›–éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€ç›ˆåˆ©æ¨¡å¼ã€SEO ä¼˜åŒ–ã€è‡ªåª’ä½“è¿è¥ç­‰</li>
<li>ç¼–ç¨‹å­¦ä¹ ï¼šä¸ºæƒ³æ·±å…¥å­¦ä¹ ç¼–ç¨‹çš„åŒå­¦å‡†å¤‡çš„è¿›é˜¶å†…å®¹ï¼ŒåŒ…æ‹¬å­¦ä¹ è·¯çº¿ã€çŸ¥è¯†ç™¾ç§‘ã€èµ„æºå¤§å…¨ã€MCP å¼€å‘ã€é¢è¯•åˆ·é¢˜ç­‰</li>
<li>èµ„æºå®åº“ï¼šæ±‡é›†å„ç§å®ç”¨èµ„æºï¼ŒåŒ…æ‹¬å·¥å…·å¤§å…¨ã€æç¤ºè¯æ¨¡æ¿ã€AI æ¦‚å¿µå¤§å…¨ã€Vibe Coding å¸¸è§é—®é¢˜ç­‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af68a656945a40e7944287215545f875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=SxThidnzOrLIGRTP2Vs6PjFuYes%3D" alt="" loading="lazy"/></p>
<p>è¿™å¥—æ•™ç¨‹ä¸æ˜¯æ¯ç‡¥çš„ç†è®ºå †ç Œï¼Œè€Œæ˜¯ä»¥å®æˆ˜ä¸ºæ ¸å¿ƒã€‚é…æœ‰ä¸°å¯Œçš„é¡¹ç›®æ¡ˆä¾‹å’Œå¤§é‡æˆªå›¾ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ è¾¹å­¦è¾¹åšï¼ŒçœŸæ­£æŒæ¡ Vibe Codingã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f78041937d414e89bd0e94fad87c27cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=KJBz9XwtFawKZRHB5rE5ChyRSo4%3D" alt="é±¼çš®çš„AIå¯¼èˆª - æ•™ç¨‹å›¾æ–‡å¹¶èŒ‚" loading="lazy"/></p>
<h2 data-id="heading-3">é€‚åˆå“ªäº›åŒå­¦ï¼Ÿ</h2>
<p><strong>1ï¼‰é€‚åˆä»»ä½•æƒ³ç”¨ AI æå‡æ•ˆç‡çš„äºº</strong></p>
<p>å¦‚æœä½ æ›¾ç»æƒ³å­¦ç¼–ç¨‹ï¼Œä½†è¢«å¤æ‚çš„è¯­æ³•ã€éš¾æ‡‚çš„æ¦‚å¿µåŠé€€è¿‡ï¼›æˆ–è€…ä½ æœ‰ä¸é”™çš„åˆ›æ„ï¼Œæƒ³è¦å¿«é€Ÿå¼€å‘ä¸Šçº¿è‡ªå·±çš„äº§å“ï¼›åˆæˆ–è€…ä½ åªæ˜¯æƒ³ç”¨ AI æå‡æ—¥å¸¸åŠå…¬æ•ˆç‡ã€åšä¸ªå°å·¥å…·è§£å†³å·¥ä½œä¸­çš„é‡å¤åŠ³åŠ¨ã€‚ç”¨ Vibe Codingï¼Œå‡ å¤©å°±èƒ½ä¸Šæ‰‹ï¼ŒåƒèŠå¤©ä¸€æ ·ç¼–ç¨‹ã€‚</p>
<p><strong>2ï¼‰é€‚åˆæƒ³æå‡æ•ˆç‡çš„ç¨‹åºå‘˜</strong></p>
<p>å¦‚æœä½ æ˜¯ä¸€ä¸ªä¼ ç»Ÿç¨‹åºå‘˜ï¼Œæ¯å¤©è¢«é‡å¤çš„ä»£ç æŠ˜ç£¨å¾—æƒ³æ‘”é”®ç›˜ã€‚ç”¨ Vibe Codingï¼Œç”Ÿäº§åŠ›æå‡æ•°åå€ä¸æ˜¯æ¢¦ã€‚æ•™ç¨‹ä¸­çš„ç»éªŒæŠ€å·§å’Œé¡¹ç›®å®æˆ˜ï¼Œèƒ½å¸®ä½ å¿«é€Ÿè¿›é˜¶æˆä¸º Vibe Coding é«˜æ‰‹ã€‚</p>
<p><strong>3ï¼‰é€‚åˆæƒ³äº§å“å˜ç°çš„åˆ›ä¸šè€…</strong></p>
<p>å¦‚æœä½ æƒ³æŠŠæƒ³æ³•å˜æˆäº§å“å¹¶ç›ˆåˆ©ï¼Œè¿™å¥—æ•™ç¨‹ä¸ä»…æ•™ä½ æ€ä¹ˆåšäº§å“ï¼Œè¿˜æ•™ä½ æ€ä¹ˆè®©äº§å“äº§ç”Ÿä»·å€¼ã€‚ä»éœ€æ±‚åˆ†æåˆ°ç›ˆåˆ©æ¨¡å¼ï¼Œä» SEO ä¼˜åŒ–åˆ°è‡ªåª’ä½“è¿è¥ï¼Œæˆ‘ä¼šæŠŠè‡ªå·±åšè¿‡ 10+ è‡ªç ”äº§å“ã€ä» 0 åˆ° 200 ä¸‡ç²‰çš„ç»éªŒéƒ½åˆ†äº«ç»™ä½ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dc847a203044c9693d33e3ff242adf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=yCoD0qFBP4%2Fk69y1dMgMbPt5Lj0%3D" alt="é±¼çš®çš„AIå¯¼èˆª-äº§å“ç»éªŒ" loading="lazy"/></p>
<h2 data-id="heading-4">ä»å“ªå¼€å§‹å­¦ä¹ ï¼Ÿ</h2>
<p><strong>é›¶åŸºç¡€æ–°æ‰‹</strong></p>
<ul>
<li>ç¬¬ 1 å¤©ï¼šè¯»å®ŒåŸºç¡€å¿…è¯»ï¼Œç†è§£ Vibe Coding å¹¶åšå‡ºç¬¬ä¸€ä¸ªä½œå“</li>
<li>ç¬¬ 1 ~ 2 å‘¨ï¼šå­¦ä¹  AI ç¼–ç¨‹å·¥å…· + åšå‡ ä¸ªç®€å•é¡¹ç›®</li>
<li>ä¹‹åï¼šæŒ‰éœ€å­¦ä¹ ç»éªŒæŠ€å·§å’Œäº§å“å˜ç°</li>
</ul>
<p><strong>æœ‰ç¼–ç¨‹åŸºç¡€</strong></p>
<ul>
<li>ç¬¬ 1 å¤©ï¼šå¿«é€Ÿè¿‡å®ŒåŸºç¡€å†…å®¹ï¼Œå®Œæˆå¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹</li>
<li>ç¬¬ 1 å‘¨ï¼šå­¦ä¹ ä¸»æµ AI ç¼–ç¨‹å·¥å…·ï¼Œå°è¯•é‡æ„ä¹‹å‰çš„é¡¹ç›®</li>
<li>ä¹‹åï¼šé‡ç‚¹å­¦ä¹ è¿›é˜¶æŠ€å·§ï¼Œæå‡å¯¹è¯å’Œä¸Šä¸‹æ–‡ç®¡ç†èƒ½åŠ›</li>
</ul>
<p>å®æˆ˜æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œæ— è®ºä½ æ˜¯ä»€ä¹ˆèƒŒæ™¯ï¼Œéƒ½è¦åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¤š Vibe ä¸€äº›é¡¹ç›®ï¼Œåœ¨å®æˆ˜ä¸­é‡åˆ°é—®é¢˜å¹¶è§£å†³ï¼Œè¿™æ‰æ˜¯æœ€æœ‰æ•ˆçš„å­¦ä¹ æ–¹å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b255027d33ba4fa7aef7316c7c801949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768967379&amp;x-signature=CTh%2FOkmLB8QylnbH2wg1W7igkmE%3D" alt="é±¼çš®çš„AIå¯¼èˆª-AIç¼–ç¨‹ç»éªŒæŠ€å·§" loading="lazy"/></p>
<h2 data-id="heading-5">å†™åœ¨æœ€å</h2>
<p>æˆ‘ä¸€ç›´ç›¸ä¿¡ï¼ŒçŸ¥è¯†åˆ†äº«æ˜¯äº’åˆ©å…±èµ¢çš„ã€‚</p>
<p>è¿™å¥—æ•™ç¨‹å®Œå…¨å…è´¹å¼€æºï¼Œå¸Œæœ›èƒ½å¸®æ›´å¤šäººæ‰“å¼€ Vibe Coding çš„å¤§é—¨ã€‚</p>
<p>ä½†æ¯•ç«Ÿæ˜¯ä¸€ä¸ªäººç¼–å†™çš„ï¼Œä¼šæœ‰ä¸è¶³çš„åœ°æ–¹ï¼Œæˆ‘ä¼šæŒç»­æ›´æ–°å’Œå®Œå–„å†…å®¹ã€‚</p>
<p><strong>å¦‚æœè¿™å¥—æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¸Œæœ›èƒ½ç‚¹èµæˆ–è€… Star â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</strong></p>
<p>åˆ«çŠ¹è±«ï¼Œç°åœ¨å°± <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fai-guide" target="_blank" title="https://github.com/liyupi/ai-guide" ref="nofollow noopener noreferrer">æ‰“å¼€æ•™ç¨‹</a>ï¼Œ10 åˆ†é’Ÿåä½ å°±èƒ½åšå‡ºç¬¬ä¸€ä¸ªä½œå“ï¼Œè·Ÿç€é±¼çš®ä¸€èµ·å¼€å¯ Vibe Coding ä¹‹æ—…å§ï¼ğŸ›«</p>
<h2 data-id="heading-6">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Bootå¤šæ•°æ®æºé…ç½®å®æˆ˜æŒ‡å—ï¼šä»é€‰å‹åˆ°è½åœ°ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7594854295746707492</link>    <guid>https://juejin.cn/post/7594854295746707492</guid>    <pubDate>2026-01-14T03:51:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295746707492" data-draft-id="7594863660281200659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Bootå¤šæ•°æ®æºé…ç½®å®æˆ˜æŒ‡å—ï¼šä»é€‰å‹åˆ°è½åœ°ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2026-01-14T03:51:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Bootå¤šæ•°æ®æºé…ç½®å®æˆ˜æŒ‡å—ï¼šä»é€‰å‹åˆ°è½åœ°ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T03:51:14.000Z" title="Wed Jan 14 2026 03:51:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring Bootå¤šæ•°æ®æºé…ç½®å®æˆ˜æŒ‡å—ï¼šä»é€‰å‹åˆ°è½åœ°ä¼˜åŒ–</h2>
<p>åœ¨åç«¯å¼€å‘ä¸­ï¼Œéšç€ä¸šåŠ¡å¤æ‚åº¦æå‡ï¼Œå•ä¸€æ•°æ®æºå¾€å¾€æ— æ³•æ»¡è¶³éœ€æ±‚â€”â€”æ¯”å¦‚ç”µå•†ç³»ç»Ÿéœ€è¦åŒºåˆ†è®¢å•åº“ä¸ç”¨æˆ·åº“ã€æ•°æ®å½’æ¡£åœºæ™¯éœ€è¦åŒæ—¶æ“ä½œä¸šåŠ¡åº“ä¸å†å²åº“ã€é«˜å¹¶å‘åœºæ™¯éœ€è¦é€šè¿‡è¯»å†™åˆ†ç¦»æå‡æ€§èƒ½ã€‚å¤šæ•°æ®æºé…ç½®å·²æˆä¸ºåç«¯å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚æœ¬æ–‡ä»æ ¸å¿ƒåœºæ™¯ã€é€‰å‹æ–¹æ¡ˆã€å®æˆ˜å®ç°åˆ°é¿å‘ä¼˜åŒ–ï¼Œå®Œæ•´æ‹†è§£Spring Bootç”Ÿæ€ä¸‹çš„å¤šæ•°æ®æºé…ç½®å…¨æµç¨‹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¤šæ•°æ®æºï¼Ÿæ ¸å¿ƒåœºæ™¯ä¸ä»·å€¼</h3>
<p>å¤šæ•°æ®æºå¹¶éâ€œç‚«æŠ€â€ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³å•ä¸€æ•°æ®æºæ— æ³•è¦†ç›–çš„ä¸šåŠ¡ç—›ç‚¹ï¼Œæ ¸å¿ƒåº”ç”¨åœºæ™¯åˆ†ä¸º4ç±»ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡æ‹†åˆ†</strong>ï¼šå¤§å‹ç³»ç»ŸæŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†æ•°æ®åº“ï¼ˆå¦‚ç”µå•†ç³»ç»Ÿçš„è®¢å•åº“ã€ç”¨æˆ·åº“ã€å•†å“åº“ï¼‰ï¼Œé™ä½å•åº“å‹åŠ›ï¼Œæå‡ç³»ç»Ÿæ‰©å±•æ€§ï¼›</li>
<li><strong>è¯»å†™åˆ†ç¦»</strong>ï¼šä¸»åº“è´Ÿè´£å†™å…¥æ“ä½œï¼Œä»åº“è´Ÿè´£æŸ¥è¯¢æ“ä½œï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡åˆ†æ•£å‹åŠ›ï¼Œè§£å†³é«˜å¹¶å‘ä¸‹çš„æŸ¥è¯¢æ€§èƒ½ç“¶é¢ˆï¼›</li>
<li><strong>æ•°æ®å½’æ¡£/åŒæ­¥</strong>ï¼šå¦‚å†å²æ•°æ®å½’æ¡£åœºæ™¯ï¼Œéœ€åŒæ—¶æ“ä½œâ€œä¸šåŠ¡åº“ï¼ˆæºåº“ï¼‰â€å’Œâ€œå†å²åº“ï¼ˆç›®æ ‡åº“ï¼‰â€ï¼Œå®ç°æ•°æ®è¿ç§»ï¼›</li>
<li><strong>å¤šç±»å‹æ•°æ®æºæ•´åˆ</strong>ï¼šç³»ç»Ÿéœ€åŒæ—¶è¿æ¥å…³ç³»å‹æ•°æ®åº“ï¼ˆMySQLï¼‰ã€éå…³ç³»å‹æ•°æ®åº“ï¼ˆRedisï¼‰ã€æ•°æ®ä»“åº“ï¼ˆClickHouseï¼‰ç­‰ä¸åŒç±»å‹æ•°æ®æºï¼Œå®ç°æ•°æ®è”åŠ¨ã€‚</li>
</ul>
<p>å¤šæ•°æ®æºé…ç½®çš„æ ¸å¿ƒä»·å€¼ï¼š<strong>è§£è€¦ä¸šåŠ¡ä¸æ•°æ®ã€æå‡ç³»ç»Ÿæ€§èƒ½ã€ä¿éšœæ•°æ®å®‰å…¨ä¸å¯æ‰©å±•æ€§</strong>ã€‚</p>
<h3 data-id="heading-2">äºŒã€å¤šæ•°æ®æºé…ç½®é€‰å‹ï¼š3ç§ä¸»æµæ–¹æ¡ˆå¯¹æ¯”</h3>
<p>Spring Bootç”Ÿæ€ä¸‹ï¼Œå¤šæ•°æ®æºé…ç½®æœ‰å¤šç§å®ç°æ–¹æ¡ˆï¼Œéœ€æ ¹æ®ä¸šåŠ¡å¤æ‚åº¦ã€æŠ€æœ¯æ ˆé€‰å‹åˆé€‚çš„æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯3ç§ä¸»æµæ–¹æ¡ˆçš„è¯¦ç»†å¯¹æ¯”ï¼š</p>

































<table><thead><tr><th>å®ç°æ–¹æ¡ˆ</th><th>æ ¸å¿ƒåŸç†</th><th>ä¼˜åŠ¿</th><th>å±€é™æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é…ç½®å¤šä¸ªDataSource Bean</td><td>ä¸ºæ¯ä¸ªæ•°æ®æºé…ç½®ç‹¬ç«‹çš„DataSourceã€SqlSessionFactoryã€MapperScannerConfigurerï¼Œé€šè¿‡åŒ…è·¯å¾„åŒºåˆ†æ•°æ®æº</td><td>1. å®ç°ç®€å•ï¼Œæ— é¢å¤–ä¾èµ–ï¼›2. æ•°æ®æºéš”ç¦»æ€§å¥½ï¼›3. æ”¯æŒä¸åŒORMæ¡†æ¶</td><td>1. é…ç½®å†—ä½™ï¼Œæ–°å¢æ•°æ®æºéœ€é‡å¤é…ç½®ï¼›2. æ— æ³•åŠ¨æ€åˆ‡æ¢æ•°æ®æºï¼›3. è·¨æ•°æ®æºäº‹åŠ¡å¤„ç†å¤æ‚</td><td>æ•°æ®æºæ•°é‡å›ºå®šã€æ— éœ€åŠ¨æ€åˆ‡æ¢çš„åœºæ™¯ï¼ˆå¦‚å›ºå®šçš„ä¸šåŠ¡åº“æ‹†åˆ†ï¼‰</td></tr><tr><td>åŠ¨æ€æ•°æ®æºåˆ‡æ¢ï¼ˆä¸»æµï¼‰</td><td>é€šè¿‡ThreadLocalå­˜å‚¨å½“å‰æ•°æ®æºæ ‡è¯†ï¼Œç»“åˆAOPåˆ‡é¢æ‹¦æˆªæ³¨è§£ï¼ŒåŠ¨æ€åˆ‡æ¢DataSource</td><td>1. é…ç½®ç®€æ´ï¼Œæ”¯æŒåŠ¨æ€æ–°å¢æ•°æ®æºï¼›2. åˆ‡æ¢çµæ´»ï¼Œå¯é€šè¿‡æ³¨è§£å¿«é€ŸæŒ‡å®šæ•°æ®æºï¼›3. é€‚é…å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯</td><td>1. éœ€è‡ªå®šä¹‰åˆ‡é¢ä¸ä¸Šä¸‹æ–‡ç®¡ç†ï¼›2. è·¨æ•°æ®æºäº‹åŠ¡éœ€é¢å¤–å¤„ç†ï¼›3. å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€æ³¨æ„çº¿ç¨‹å®‰å…¨</td><td>å¤§å¤šæ•°å¤šæ•°æ®æºåœºæ™¯ï¼ˆè¯»å†™åˆ†ç¦»ã€æ•°æ®å½’æ¡£ã€åŠ¨æ€ä¸šåŠ¡åº“ï¼‰</td></tr><tr><td>åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼ˆSeata/Sharding-JDBCï¼‰</td><td>é€šè¿‡æ¡†æ¶å°è£…å¤šæ•°æ®æºç®¡ç†ä¸åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ”¯æŒæ•°æ®æºåˆ†ç‰‡ã€åŠ¨æ€è·¯ç”±</td><td>1. æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼›2. æä¾›ä¸°å¯Œçš„åˆ†ç‰‡ç­–ç•¥ï¼›3. é«˜å¯ç”¨ã€å¯æ‰©å±•</td><td>1. æ¡†æ¶å­¦ä¹ æˆæœ¬é«˜ï¼›2. è½»é‡åœºæ™¯ç•¥æ˜¾é‡é‡çº§ï¼›3. é…ç½®ä¸è¿ç»´å¤æ‚</td><td>å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿã€éœ€åˆ†å¸ƒå¼äº‹åŠ¡æˆ–æ•°æ®åˆ†ç‰‡çš„åœºæ™¯</td></tr></tbody></table>
<p>é€‰å‹å»ºè®®ï¼š - ç®€å•åœºæ™¯ï¼ˆå›ºå®š2-3ä¸ªæ•°æ®æºï¼‰ï¼šä¼˜å…ˆç”¨â€œå¤šä¸ªDataSource Beanâ€æ–¹æ¡ˆï¼› - é€šç”¨åœºæ™¯ï¼ˆéœ€åŠ¨æ€åˆ‡æ¢ã€æ•°æ®æºè¾ƒå¤šï¼‰ï¼šé¦–é€‰â€œåŠ¨æ€æ•°æ®æºåˆ‡æ¢â€æ–¹æ¡ˆï¼› - åˆ†å¸ƒå¼åœºæ™¯ï¼ˆéœ€äº‹åŠ¡ä¸€è‡´æ€§ã€æ•°æ®åˆ†ç‰‡ï¼‰ï¼šç”¨Seata/Sharding-JDBCæ¡†æ¶ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€å®æˆ˜ï¼šåŠ¨æ€æ•°æ®æºåˆ‡æ¢æ–¹æ¡ˆè½åœ°ï¼ˆSpring Boot+MyBatis-Plusï¼‰</h3>
<p>ä»¥â€œä¸šåŠ¡åº“+å†å²åº“â€çš„åŒæ•°æ®æºåœºæ™¯ä¸ºä¾‹ï¼ˆå‘¼åº”å†å²æ•°æ®å½’æ¡£éœ€æ±‚ï¼‰ï¼Œé‡‡ç”¨â€œåŠ¨æ€æ•°æ®æºåˆ‡æ¢â€æ–¹æ¡ˆï¼Œå®ç°é€šè¿‡æ³¨è§£å¿«é€ŸæŒ‡å®šæ•°æ®æºçš„åŠŸèƒ½ã€‚æŠ€æœ¯æ ˆï¼šSpring Boot 2.7.x + MyBatis-Plus 3.5.x + MySQLã€‚</p>
<h4 data-id="heading-4">1. ç¯å¢ƒå‡†å¤‡</h4>
<h5 data-id="heading-5">ï¼ˆ1ï¼‰å¼•å…¥æ ¸å¿ƒä¾èµ–</h5>
<p>åœ¨pom.xmlä¸­å¼•å…¥Spring Bootæ ¸å¿ƒä¾èµ–ã€MyBatis-Plusã€æ•°æ®åº“é©±åŠ¨ã€è¿æ¥æ± ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring Bootæ ¸å¿ƒä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <span class="hljs-comment">&lt;!-- AOPåˆ‡é¢ä¾èµ–ï¼Œç”¨äºåŠ¨æ€åˆ‡æ¢ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MyBatis-Plusï¼ˆç®€åŒ–CRUDæ“ä½œï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¾·é²ä¼Šè¿æ¥æ± ï¼ˆæ€§èƒ½æ›´ä¼˜ï¼Œæ”¯æŒç›‘æ§ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Lombokï¼ˆç®€åŒ–å®ä½“ç±»ä»£ç ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h5 data-id="heading-6">ï¼ˆ2ï¼‰é…ç½®å¤šæ•°æ®æºä¿¡æ¯</h5>
<p>åœ¨application.ymlä¸­é…ç½®ä¸¤ä¸ªæ•°æ®æºï¼šä¸šåŠ¡åº“ï¼ˆbusinessï¼‰å’Œå†å²åº“ï¼ˆhistoryï¼‰ï¼ŒæŒ‡å®šè¿æ¥ä¿¡æ¯ã€è¿æ¥æ± å‚æ•°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># ä¸šåŠ¡åº“ï¼ˆæºåº“ï¼‰é…ç½®</span>
    <span class="hljs-attr">business:</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ecommerce_business?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">druid:</span>
        <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span> <span class="hljs-comment"># åˆå§‹åŒ–è¿æ¥æ•°</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span> <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span> <span class="hljs-comment"># æœ€å¤§æ´»è·ƒè¿æ¥æ•°</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span> <span class="hljs-comment"># æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-comment"># å†å²åº“ï¼ˆç›®æ ‡åº“ï¼‰é…ç½®</span>
    <span class="hljs-attr">history:</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ecommerce_history?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">druid:</span>
        <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span>

<span class="hljs-comment"># MyBatis-Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/**/*.xml</span> <span class="hljs-comment"># Mapper.xmlæ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.multi.datasource.entity</span> <span class="hljs-comment"># å®ä½“ç±»åŒ…è·¯å¾„</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="hljs-comment"># å¼€å‘ç¯å¢ƒæ‰“å°SQL</span>
</code></pre>
<h4 data-id="heading-7">2. æ ¸å¿ƒé…ç½®ï¼šåŠ¨æ€æ•°æ®æºåˆ‡æ¢æ ¸å¿ƒç»„ä»¶</h4>
<p>åŠ¨æ€æ•°æ®æºåˆ‡æ¢çš„æ ¸å¿ƒæ˜¯é€šè¿‡ThreadLocalå­˜å‚¨å½“å‰çº¿ç¨‹çš„æ•°æ®æºæ ‡è¯†ï¼Œç»“åˆAOPåˆ‡é¢æ‹¦æˆªè‡ªå®šä¹‰æ³¨è§£ï¼Œå®ç°æ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢ã€‚éœ€å®ç°4ä¸ªæ ¸å¿ƒç»„ä»¶ï¼šæ•°æ®æºæšä¸¾ã€æ•°æ®æºä¸Šä¸‹æ–‡ã€æ•°æ®æºåˆ‡æ¢æ³¨è§£ã€AOPåˆ‡é¢ã€‚</p>
<h5 data-id="heading-8">ï¼ˆ1ï¼‰æ•°æ®æºæšä¸¾ï¼ˆDataSourceTypeï¼‰</h5>
<p>å®šä¹‰æ•°æ®æºæ ‡è¯†ï¼Œä¸application.ymlä¸­çš„æ•°æ®æºåç§°å¯¹åº”ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">package com.example.multi.datasource.config;

<span class="hljs-comment">/**
 * æ•°æ®æºæšä¸¾ï¼šå¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®æºåç§°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DataSourceType</span> {
    BUSINESS, <span class="hljs-comment">// ä¸šåŠ¡åº“ï¼ˆé»˜è®¤æ•°æ®æºï¼‰</span>
    HISTORY   <span class="hljs-comment">// å†å²åº“</span>
}}
</code></pre>
<h5 data-id="heading-9">ï¼ˆ2ï¼‰æ•°æ®æºä¸Šä¸‹æ–‡ï¼ˆDataSourceContextHolderï¼‰</h5>
<p>é€šè¿‡ThreadLocalå­˜å‚¨å½“å‰çº¿ç¨‹çš„æ•°æ®æºæ ‡è¯†ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼ˆé¿å…å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®æºæ··ä¹±ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.example.multi.datasource.config;

<span class="hljs-comment">/**
 * æ•°æ®æºä¸Šä¸‹æ–‡ï¼šå­˜å‚¨å½“å‰çº¿ç¨‹çš„æ•°æ®æºæ ‡è¯†
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataSourceContextHolder</span> {
    <span class="hljs-comment">// ThreadLocalï¼šçº¿ç¨‹æœ¬åœ°å˜é‡ï¼Œç¡®ä¿æ¯ä¸ªçº¿ç¨‹çš„æ•°æ®æºæ ‡è¯†ç‹¬ç«‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final ThreadLocal&lt;DataSourceType&gt; CONTEXT_HOLDER = <span class="hljs-keyword">new</span> ThreadLocal&lt;&gt;();

    <span class="hljs-comment">/**
     * è®¾ç½®å½“å‰æ•°æ®æº
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDataSourceType</span>(<span class="hljs-params">DataSourceType type</span>)</span> {
        CONTEXT_HOLDER.<span class="hljs-keyword">set</span>(type);
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰æ•°æ®æºï¼ˆé»˜è®¤è¿”å›ä¸šåŠ¡åº“ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DataSourceType <span class="hljs-title">getDataSourceType</span>()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.<span class="hljs-keyword">get</span>() == <span class="hljs-literal">null</span> ? DataSourceType.BUSINESS : CONTEXT_HOLDER.<span class="hljs-keyword">get</span>();
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤æ•°æ®æºæ ‡è¯†ï¼šé¿å…çº¿ç¨‹å¤ç”¨å¯¼è‡´æ•°æ®æºæ±¡æŸ“
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">clearDataSourceType</span>()</span> {
        CONTEXT_HOLDER.<span class="hljs-keyword">remove</span>();
    }
}
</code></pre>
<h5 data-id="heading-10">ï¼ˆ3ï¼‰æ•°æ®æºåˆ‡æ¢æ³¨è§£ï¼ˆDataSourceï¼‰</h5>
<p>è‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºæ ‡è®°éœ€è¦åˆ‡æ¢æ•°æ®æºçš„æ–¹æ³•æˆ–ç±»ï¼ŒæŒ‡å®šè¦ä½¿ç”¨çš„æ•°æ®æºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.multi.datasource.config;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æ•°æ®æºåˆ‡æ¢æ³¨è§£ï¼šç”¨äºæŒ‡å®šæ–¹æ³•/ç±»ä½¿ç”¨çš„æ•°æ®æº
 */</span>
<span class="hljs-meta">@Target({ElementType.METHOD, ElementType.TYPE})</span> <span class="hljs-comment">// å¯ç”¨äºæ–¹æ³•æˆ–ç±»ä¸Š</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶ç”Ÿæ•ˆ</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DataSource {
    <span class="hljs-comment">// é»˜è®¤æ•°æ®æºä¸ºä¸šåŠ¡åº“</span>
    DataSourceType <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> DataSourceType.BUSINESS;
}
</code></pre>
<h5 data-id="heading-11">ï¼ˆ4ï¼‰AOPåˆ‡é¢ï¼ˆDataSourceAspectï¼‰</h5>
<p>é€šè¿‡AOPåˆ‡é¢æ‹¦æˆª@DataSourceæ³¨è§£ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰è®¾ç½®å½“å‰æ•°æ®æºï¼Œæ‰§è¡Œåæ¸…é™¤æ•°æ®æºæ ‡è¯†ï¼Œå®ç°åŠ¨æ€åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.multi.datasource.config;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.aspectj.lang.JoinPoint;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.After;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Before;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Pointcut;
<span class="hljs-keyword">import</span> org.aspectj.lang.reflect.MethodSignature;
<span class="hljs-keyword">import</span> org.springframework.core.Ordered;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;

<span class="hljs-keyword">import</span> java.lang.reflect.Method;

<span class="hljs-comment">/**
 * æ•°æ®æºåˆ‡æ¢åˆ‡é¢ï¼šæ‹¦æˆª<span class="hljs-doctag">@DataSource</span>æ³¨è§£ï¼Œå®ç°æ•°æ®æºåŠ¨æ€åˆ‡æ¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Order(Ordered.HIGHEST_PRECEDENCE)</span> <span class="hljs-comment">// è®¾ç½®åˆ‡é¢ä¼˜å…ˆçº§ï¼šç¡®ä¿åœ¨äº‹åŠ¡åˆ‡é¢ä¹‹å‰æ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {

    <span class="hljs-comment">/**
     * åˆ‡å…¥ç‚¹ï¼šæ‹¦æˆªæ‰€æœ‰å¸¦æœ‰<span class="hljs-doctag">@DataSource</span>æ³¨è§£çš„æ–¹æ³•æˆ–ç±»
     */</span>
    <span class="hljs-meta">@Pointcut("@annotation(com.example.multi.datasource.config.DataSource) || @within(com.example.multi.datasource.config.DataSource)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataSourcePointCut</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * æ–¹æ³•æ‰§è¡Œå‰ï¼šè®¾ç½®å½“å‰æ•°æ®æº
     */</span>
    <span class="hljs-meta">@Before("dataSourcePointCut()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeSwitchDataSource</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        <span class="hljs-comment">// è·å–å½“å‰æ–¹æ³•ä¸Šçš„@DataSourceæ³¨è§£</span>
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSourceAnnotation</span> <span class="hljs-operator">=</span> method.getAnnotation(DataSource.class);

        <span class="hljs-comment">// å¦‚æœæ–¹æ³•ä¸Šæ²¡æœ‰æ³¨è§£ï¼Œæ£€æŸ¥ç±»ä¸Šæ˜¯å¦æœ‰æ³¨è§£</span>
        <span class="hljs-keyword">if</span> (dataSourceAnnotation == <span class="hljs-literal">null</span>) {
            dataSourceAnnotation = joinPoint.getTarget().getClass().getAnnotation(DataSource.class);
        }

        <span class="hljs-comment">// è®¾ç½®æ•°æ®æºæ ‡è¯†</span>
        <span class="hljs-keyword">if</span> (dataSourceAnnotation != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">DataSourceType</span> <span class="hljs-variable">dataSourceType</span> <span class="hljs-operator">=</span> dataSourceAnnotation.value();
            DataSourceContextHolder.setDataSourceType(dataSourceType);
            log.info(<span class="hljs-string">"åˆ‡æ¢æ•°æ®æºï¼š{}"</span>, dataSourceType);
        }
    }

    <span class="hljs-comment">/**
     * æ–¹æ³•æ‰§è¡Œåï¼šæ¸…é™¤æ•°æ®æºæ ‡è¯†
     */</span>
    <span class="hljs-meta">@After("dataSourcePointCut()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterSwitchDataSource</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        DataSourceContextHolder.clearDataSourceType();
        log.info(<span class="hljs-string">"æ¸…é™¤æ•°æ®æºæ ‡è¯†"</span>);
    }
}
</code></pre>
<h5 data-id="heading-12">ï¼ˆ5ï¼‰åŠ¨æ€æ•°æ®æºé…ç½®ç±»ï¼ˆDynamicDataSourceConfigï¼‰</h5>
<p>é…ç½®å¤šä¸ªæ•°æ®æºBeanï¼Œåˆ›å»ºåŠ¨æ€æ•°æ®æºï¼ˆDynamicRoutingDataSourceï¼‰ï¼Œå¹¶å°†å…¶ä½œä¸ºé»˜è®¤æ•°æ®æºæ³¨å…¥Springå®¹å™¨ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.multi</span><span class="hljs-selector-class">.datasource</span><span class="hljs-selector-class">.config</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.alibaba</span><span class="hljs-selector-class">.druid</span><span class="hljs-selector-class">.spring</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-class">.autoconfigure</span><span class="hljs-selector-class">.DruidDataSourceBuilder</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.mybatis</span><span class="hljs-selector-class">.spring</span><span class="hljs-selector-class">.SqlSessionFactoryBean</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.mybatis</span><span class="hljs-selector-class">.spring</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.MapperScan</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.beans</span><span class="hljs-selector-class">.factory</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Qualifier</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-class">.context</span><span class="hljs-selector-class">.properties</span><span class="hljs-selector-class">.ConfigurationProperties</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.context</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Bean</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.context</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Configuration</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.context</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Primary</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.support</span><span class="hljs-selector-class">.PathMatchingResourcePatternResolver</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.jdbc</span><span class="hljs-selector-class">.datasource</span><span class="hljs-selector-class">.DataSourceTransactionManager</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">javax</span><span class="hljs-selector-class">.sql</span><span class="hljs-selector-class">.DataSource</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.HashMap</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Map</span>;

<span class="hljs-comment">/**
 * åŠ¨æ€æ•°æ®æºé…ç½®ç±»ï¼šåˆ›å»ºæ•°æ®æºBeanï¼Œé…ç½®åŠ¨æ€æ•°æ®æº
 */</span>
@<span class="hljs-selector-tag">Configuration</span>
@<span class="hljs-selector-tag">MapperScan</span>(basePackages = <span class="hljs-string">"com.example.multi.datasource.mapper"</span>) <span class="hljs-comment">// æ‰«æMapperæ¥å£åŒ…</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">DynamicDataSourceConfig</span> {

    <span class="hljs-comment">/**
     * é…ç½®ä¸šåŠ¡åº“æ•°æ®æºï¼ˆå¯¹åº”application.ymlä¸­çš„spring.datasource.businessï¼‰
     */</span>
    <span class="hljs-variable">@Bean</span>(name = <span class="hljs-string">"businessDataSource"</span>)
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.business"</span>)
    public DataSource <span class="hljs-built_in">businessDataSource</span>() {
        <span class="hljs-comment">// ä½¿ç”¨å¾·é²ä¼Šè¿æ¥æ± æ„å»ºæ•°æ®æº</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DruidDataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }

    <span class="hljs-comment">/**
     * é…ç½®å†å²åº“æ•°æ®æºï¼ˆå¯¹åº”application.ymlä¸­çš„spring.datasource.historyï¼‰
     */</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"historyDataSource"</span>)
    @<span class="hljs-selector-tag">ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.history"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">historyDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DruidDataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }

    <span class="hljs-comment">/**
     * é…ç½®åŠ¨æ€æ•°æ®æºï¼šæ•´åˆæ‰€æœ‰æ•°æ®æºï¼Œå®ç°åŠ¨æ€åˆ‡æ¢
     * @Primaryï¼šæ ‡è¯†ä¸ºé»˜è®¤æ•°æ®æºï¼Œé¿å…Springå®¹å™¨ä¸­æ•°æ®æºBeanå†²çª
     */</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"dynamicDataSource"</span>)
    @<span class="hljs-selector-tag">Primary</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">dynamicDataSource</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"businessDataSource"</span>) DataSource businessDataSource,
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"historyDataSource"</span>) DataSource historyDataSource) {
        <span class="hljs-selector-tag">DynamicRoutingDataSource</span> <span class="hljs-selector-tag">dynamicDataSource</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DynamicRoutingDataSource</span>();
        <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰æ•°æ®æºçš„æ˜ å°„å…³ç³»</span>
        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">Object</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">dataSourceMap</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
        <span class="hljs-selector-tag">dataSourceMap</span><span class="hljs-selector-class">.put</span>(DataSourceType.BUSINESS, businessDataSource);
        <span class="hljs-selector-tag">dataSourceMap</span><span class="hljs-selector-class">.put</span>(DataSourceType.HISTORY, historyDataSource);
        <span class="hljs-selector-tag">dynamicDataSource</span><span class="hljs-selector-class">.setTargetDataSources</span>(dataSourceMap);
        <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ•°æ®æºï¼ˆä¸šåŠ¡åº“ï¼‰</span>
        <span class="hljs-selector-tag">dynamicDataSource</span><span class="hljs-selector-class">.setDefaultTargetDataSource</span>(businessDataSource);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">dynamicDataSource</span>;
    }

    <span class="hljs-comment">/**
     * é…ç½®SqlSessionFactoryï¼šæŒ‡å®šåŠ¨æ€æ•°æ®æºå’ŒMapper.xmlè·¯å¾„
     */</span>
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">sqlSessionFactory</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"dynamicDataSource"</span>) DataSource dynamicDataSource) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Exception</span> {
        <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">sessionFactory</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span>();
        <span class="hljs-selector-tag">sessionFactory</span><span class="hljs-selector-class">.setDataSource</span>(dynamicDataSource);
        <span class="hljs-comment">// é…ç½®Mapper.xmlæ–‡ä»¶è·¯å¾„</span>
        <span class="hljs-selector-tag">sessionFactory</span><span class="hljs-selector-class">.setMapperLocations</span>(new <span class="hljs-built_in">PathMatchingResourcePatternResolver</span>()
                .<span class="hljs-built_in">getResources</span>(<span class="hljs-string">"classpath:mapper/**/*.xml"</span>));
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">sessionFactory</span>;
    }

    <span class="hljs-comment">/**
     * é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼šç»‘å®šåŠ¨æ€æ•°æ®æºï¼Œç¡®ä¿äº‹åŠ¡ç”Ÿæ•ˆ
     */</span>
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span> <span class="hljs-selector-tag">transactionManager</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"dynamicDataSource"</span>) DataSource dynamicDataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DataSourceTransactionManager</span>(dynamicDataSource);
    }
}
</code></pre>
<h5 data-id="heading-13">ï¼ˆ6ï¼‰åŠ¨æ€æ•°æ®æºè·¯ç”±ç±»ï¼ˆDynamicRoutingDataSourceï¼‰</h5>
<p>ç»§æ‰¿AbstractRoutingDataSourceï¼Œé‡å†™determineCurrentLookupKeyæ–¹æ³•ï¼Œä»æ•°æ®æºä¸Šä¸‹æ–‡ä¸­è·å–å½“å‰æ•°æ®æºæ ‡è¯†ï¼Œå®ç°æ•°æ®æºè·¯ç”±ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> com.example.multi.datasource.config;

<span class="hljs-keyword">import</span> org.springframework.jdbc.datasource.lookup.<span class="hljs-type">AbstractRoutingDataSource</span>;

<span class="hljs-comment">/**
 * åŠ¨æ€æ•°æ®æºè·¯ç”±ç±»ï¼šæ ¹æ®æ•°æ®æºæ ‡è¯†è·¯ç”±åˆ°å¯¹åº”çš„æ•°æ®æº
 */</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{

    <span class="hljs-comment">/**
     * é‡å†™æ–¹æ³•ï¼šè·å–å½“å‰æ•°æ®æºæ ‡è¯†ï¼ˆä»ä¸Šä¸‹æ–‡è·å–ï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {
        <span class="hljs-type">DataSourceType</span> dataSourceType = <span class="hljs-type">DataSourceContextHolder</span>.getDataSourceType();
        log.info(<span class="hljs-string">"å½“å‰ä½¿ç”¨çš„æ•°æ®æºï¼š{}"</span>, dataSourceType);
        <span class="hljs-keyword">return</span> dataSourceType;
    }
}
</code></pre>
<h4 data-id="heading-14">3. ä¸šåŠ¡å®ç°ï¼šå¤šæ•°æ®æºæ•°æ®æ“ä½œç¤ºä¾‹</h4>
<p>ä»¥â€œè®¢å•æ•°æ®æŸ¥è¯¢ï¼ˆä¸šåŠ¡åº“ï¼‰â€å’Œâ€œè®¢å•å†å²æ•°æ®æ’å…¥ï¼ˆå†å²åº“ï¼‰â€ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡@DataSourceæ³¨è§£åˆ‡æ¢æ•°æ®æºã€‚</p>
<h5 data-id="heading-15">ï¼ˆ1ï¼‰å®ä½“ç±»å®šä¹‰</h5>
<p>å®šä¹‰è®¢å•å®ä½“ï¼ˆå¯¹åº”ä¸šåŠ¡åº“t_orderè¡¨ï¼‰å’Œè®¢å•å†å²å®ä½“ï¼ˆå¯¹åº”å†å²åº“t_order_historyè¡¨ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¢å•å®ä½“ï¼ˆä¸šåŠ¡åº“ï¼‰</span>
<span class="hljs-keyword">package</span> com.example.multi.datasource.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableName;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName(<span class="hljs-string">"t_order"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> id;
    <span class="hljs-keyword">private</span> String orderNo; <span class="hljs-comment">// è®¢å•ç¼–å·</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> userId; <span class="hljs-comment">// ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> BigDecimal amount; <span class="hljs-comment">// è®¢å•é‡‘é¢</span>
    <span class="hljs-keyword">private</span> Integer status; <span class="hljs-comment">// è®¢å•çŠ¶æ€ï¼š0-å¾…æ”¯ä»˜ï¼Œ1-å·²å®Œæˆï¼Œ2-å·²å–æ¶ˆ</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime; <span class="hljs-comment">// åˆ›å»ºæ—¶é—´</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime; <span class="hljs-comment">// æ›´æ–°æ—¶é—´</span>
}

<span class="hljs-comment">// è®¢å•å†å²å®ä½“ï¼ˆå†å²åº“ï¼‰</span>
<span class="hljs-keyword">package</span> com.example.multi.datasource.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableName;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName(<span class="hljs-string">"t_order_history"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderHistory</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> id;
    <span class="hljs-keyword">private</span> String orderNo;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> userId;
    <span class="hljs-keyword">private</span> BigDecimal amount;
    <span class="hljs-keyword">private</span> Integer status;
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
    <span class="hljs-keyword">private</span> LocalDateTime archiveTime; <span class="hljs-comment">// å½’æ¡£æ—¶é—´ï¼ˆå†å²åº“æ–°å¢å­—æ®µï¼‰</span>
}
</code></pre>
<h5 data-id="heading-16">ï¼ˆ2ï¼‰Mapperæ¥å£å®šä¹‰</h5>
<p>å®šä¹‰OrderMapperï¼ˆæ“ä½œä¸šåŠ¡åº“t_orderè¡¨ï¼‰å’ŒOrderHistoryMapperï¼ˆæ“ä½œå†å²åº“t_order_historyè¡¨ï¼‰ï¼Œé€šè¿‡@DataSourceæ³¨è§£æŒ‡å®šæ•°æ®æºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// OrderMapperï¼ˆä¸šåŠ¡åº“ï¼‰</span>
<span class="hljs-keyword">package</span> com.example.multi.datasource.mapper;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;
<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSource;
<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSourceType;
<span class="hljs-keyword">import</span> com.example.multi.datasource.entity.Order;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">// ç±»ä¸ŠæŒ‡å®šæ•°æ®æºï¼šä¸šåŠ¡åº“ï¼ˆå¯çœç•¥ï¼Œé»˜è®¤å°±æ˜¯ä¸šåŠ¡åº“ï¼‰</span>
<span class="hljs-meta">@DataSource(DataSourceType.BUSINESS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Order&gt; {
    <span class="hljs-comment">// æŸ¥è¯¢3ä¸ªæœˆå‰çš„è®¢å•ï¼ˆç”¨äºå½’æ¡£ï¼‰</span>
    List&lt;Order&gt; <span class="hljs-title function_">selectOldOrders</span><span class="hljs-params">(<span class="hljs-meta">@Param("endTime")</span> LocalDateTime endTime)</span>;
}

<span class="hljs-comment">// OrderHistoryMapperï¼ˆå†å²åº“ï¼‰</span>
<span class="hljs-keyword">package</span> com.example.multi.datasource.mapper;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;
<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSource;
<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSourceType;
<span class="hljs-keyword">import</span> com.example.multi.datasource.entity.OrderHistory;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">// ç±»ä¸ŠæŒ‡å®šæ•°æ®æºï¼šå†å²åº“</span>
<span class="hljs-meta">@DataSource(DataSourceType.HISTORY)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderHistoryMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;OrderHistory&gt; {
    <span class="hljs-comment">// æ‰¹é‡æ’å…¥å†å²è®¢å•</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(<span class="hljs-meta">@Param("list")</span> List&lt;OrderHistory&gt; orderHistoryList)</span>;
}
</code></pre>
<h5 data-id="heading-17">ï¼ˆ3ï¼‰Mapper XMLå®ç°</h5>
<p>åœ¨resources/mapperç›®å½•ä¸‹åˆ›å»ºOrderMapper.xmlå’ŒOrderHistoryMapper.xmlï¼Œç¼–å†™SQLè¯­å¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- OrderMapper.xmlï¼ˆä¸šåŠ¡åº“ï¼‰ --&gt;</span>
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.multi.datasource.mapper.OrderMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectOldOrders"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.example.multi.datasource.entity.Order"</span>&gt;</span>
        SELECT id, order_no, user_id, amount, status, create_time, update_time
        FROM t_order
        WHERE create_time &lt; #{endTime}
          AND status IN (1, 2) -- åªæŸ¥è¯¢å·²å®Œæˆã€å·²å–æ¶ˆçš„è®¢å•
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>

<span class="hljs-comment">&lt;!-- OrderHistoryMapper.xmlï¼ˆå†å²åº“ï¼‰ --&gt;</span>
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.multi.datasource.mapper.OrderHistoryMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"batchInsert"</span>&gt;</span>
        INSERT INTO t_order_history (
            id, order_no, user_id, amount, status, create_time, update_time, archive_time
        )
        VALUES
        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"list"</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span>&gt;</span>
            (
                #{item.id}, #{item.orderNo}, #{item.userId}, #{item.amount},
                #{item.status}, #{item.createTime}, #{item.updateTime}, #{item.archiveTime}
            )
        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h5 data-id="heading-18">ï¼ˆ4ï¼‰Serviceå±‚å®ç°</h5>
<p>å®ç°è®¢å•å½’æ¡£æœåŠ¡ï¼Œè°ƒç”¨ä¸¤ä¸ªæ•°æ®æºçš„Mapperæ¥å£ï¼Œå®Œæˆâ€œæŸ¥è¯¢ä¸šåŠ¡åº“æ—§è®¢å•â†’æ’å…¥å†å²åº“â†’åˆ é™¤ä¸šåŠ¡åº“æ—§è®¢å•â€çš„æµç¨‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.multi.datasource.service;

<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSource;
<span class="hljs-keyword">import</span> com.example.multi.datasource.config.DataSourceType;
<span class="hljs-keyword">import</span> com.example.multi.datasource.entity.Order;
<span class="hljs-keyword">import</span> com.example.multi.datasource.entity.OrderHistory;
<span class="hljs-keyword">import</span> com.example.multi.datasource.mapper.OrderHistoryMapper;
<span class="hljs-keyword">import</span> com.example.multi.datasource.mapper.OrderMapper;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.beans.BeanUtils;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderArchiveService</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> OrderHistoryMapper orderHistoryMapper;

    <span class="hljs-comment">/**
     * è®¢å•å½’æ¡£ï¼šä»ä¸šåŠ¡åº“è¿ç§»åˆ°å†å²åº“
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span> <span class="hljs-comment">// äº‹åŠ¡æ§åˆ¶ï¼šç¡®ä¿è¿ç§»+åˆ é™¤åŸå­æ€§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">archiveOrders</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œè®¢å•å½’æ¡£ä»»åŠ¡"</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è®¡ç®—å½’æ¡£æ—¶é—´é˜ˆå€¼ï¼š3ä¸ªæœˆå‰</span>
            <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">archiveEndTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().minusMonths(<span class="hljs-number">3</span>);
            <span class="hljs-comment">// 2. ä»ä¸šåŠ¡åº“æŸ¥è¯¢æ—§è®¢å•ï¼ˆè‡ªåŠ¨ä½¿ç”¨ä¸šåŠ¡åº“æ•°æ®æºï¼‰</span>
            List&lt;Order&gt; oldOrderList = orderMapper.selectOldOrders(archiveEndTime);
            <span class="hljs-keyword">if</span> (oldOrderList.isEmpty()) {
                log.info(<span class="hljs-string">"æ— éœ€è¦å½’æ¡£çš„è®¢å•"</span>);
                <span class="hljs-keyword">return</span>;
            }
            log.info(<span class="hljs-string">"æœ¬æ¬¡éœ€å½’æ¡£è®¢å•æ•°é‡ï¼š{}"</span>, oldOrderList.size());

            <span class="hljs-comment">// 3. è½¬æ¢ä¸ºå†å²è®¢å•å®ä½“</span>
            List&lt;OrderHistory&gt; orderHistoryList = oldOrderList.stream().map(order -&gt; {
                <span class="hljs-type">OrderHistory</span> <span class="hljs-variable">history</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderHistory</span>();
                BeanUtils.copyProperties(order, history);
                history.setArchiveTime(LocalDateTime.now()); <span class="hljs-comment">// è®¾ç½®å½’æ¡£æ—¶é—´</span>
                <span class="hljs-keyword">return</span> history;
            }).collect(Collectors.toList());

            <span class="hljs-comment">// 4. æ‰¹é‡æ’å…¥å†å²åº“ï¼ˆè‡ªåŠ¨ä½¿ç”¨å†å²åº“æ•°æ®æºï¼‰</span>
            orderHistoryMapper.batchInsert(orderHistoryList);
            log.info(<span class="hljs-string">"è®¢å•æ‰¹é‡æ’å…¥å†å²åº“å®Œæˆ"</span>);

            <span class="hljs-comment">// 5. æ‰¹é‡åˆ é™¤ä¸šåŠ¡åº“æ—§è®¢å•</span>
            List&lt;Long&gt; orderIds = oldOrderList.stream().map(Order::getId).collect(Collectors.toList());
            orderMapper.deleteBatchIds(orderIds);
            log.info(<span class="hljs-string">"ä¸šåŠ¡åº“æ—§è®¢å•åˆ é™¤å®Œæˆ"</span>);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"è®¢å•å½’æ¡£ä»»åŠ¡å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å½’æ¡£å¤±è´¥"</span>, e); <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸è§¦å‘äº‹åŠ¡å›æ»š</span>
        }
    }
}
</code></pre>
<h5 data-id="heading-19">ï¼ˆ5ï¼‰æµ‹è¯•éªŒè¯</h5>
<p>ç¼–å†™æµ‹è¯•ç±»ï¼Œè°ƒç”¨archiveOrdersæ–¹æ³•ï¼ŒéªŒè¯æ•°æ®æºåˆ‡æ¢æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.multi.datasource;

<span class="hljs-keyword">import</span> com.example.multi.datasource.service.OrderArchiveService;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;

<span class="hljs-keyword">import</span> javax.annotation.Resource;

<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiDataSourceTest</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> OrderArchiveService orderArchiveService;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArchiveOrders</span><span class="hljs-params">()</span> {
        orderArchiveService.archiveOrders();
    }
}
</code></pre>
<p>è¿è¡Œæµ‹è¯•åï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š - åˆ‡æ¢æ•°æ®æºï¼šBUSINESSï¼ˆæŸ¥è¯¢ä¸šåŠ¡åº“ï¼‰ï¼› - åˆ‡æ¢æ•°æ®æºï¼šHISTORYï¼ˆæ’å…¥å†å²åº“ï¼‰ï¼› - å†æ¬¡åˆ‡æ¢åˆ°BUSINESSï¼ˆåˆ é™¤ä¸šåŠ¡åº“æ•°æ®ï¼‰ï¼› è‹¥æ•°æ®æˆåŠŸä»ä¸šåŠ¡åº“è¿ç§»åˆ°å†å²åº“ï¼Œè¯´æ˜å¤šæ•°æ®æºé…ç½®ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-20">å››ã€å¤šæ•°æ®æºé…ç½®é¿å‘æŒ‡å—ï¼š8ä¸ªé«˜é¢‘é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>å¤šæ•°æ®æºé…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®¹æ˜“å‡ºç°æ•°æ®æºåˆ‡æ¢å¤±æ•ˆã€äº‹åŠ¡å¼‚å¸¸ã€æ€§èƒ½é—®é¢˜ç­‰ï¼Œä»¥ä¸‹æ˜¯8ä¸ªé«˜é¢‘å‘ç‚¹åŠè§„é¿æ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-21">1. å‘ç‚¹1ï¼šæ•°æ®æºåˆ‡æ¢å¤±æ•ˆ</h4>
<p>ç°è±¡ï¼šæ·»åŠ @DataSourceæ³¨è§£åï¼Œæ•°æ®æºæœªåˆ‡æ¢ï¼Œä»ä½¿ç”¨é»˜è®¤æ•°æ®æºã€‚ è§„é¿æ–¹æ¡ˆï¼š - æ£€æŸ¥åˆ‡é¢ä¼˜å…ˆçº§ï¼šç¡®ä¿æ•°æ®æºåˆ‡æ¢åˆ‡é¢ï¼ˆ@Order(Ordered.HIGHEST_PRECEDENCE)ï¼‰åœ¨äº‹åŠ¡åˆ‡é¢ä¹‹å‰æ‰§è¡Œï¼› - æ£€æŸ¥æ³¨è§£ä½ç½®ï¼š@DataSourceæ³¨è§£éœ€æ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼ˆç±»ä¸Šæ³¨è§£ä¼˜å…ˆçº§ä½äºæ–¹æ³•ï¼‰ï¼› - æ£€æŸ¥æ•°æ®æºæšä¸¾ï¼šç¡®ä¿æ³¨è§£æŒ‡å®šçš„æ•°æ®æºæšä¸¾ä¸é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®æºåç§°ä¸€è‡´ï¼› - æ£€æŸ¥ThreadLocalæ¸…ç†ï¼šç¡®ä¿æ–¹æ³•æ‰§è¡Œåæ¸…é™¤æ•°æ®æºæ ‡è¯†ï¼Œé¿å…çº¿ç¨‹å¤ç”¨æ±¡æŸ“ã€‚</p>
<h4 data-id="heading-22">2. å‘ç‚¹2ï¼šäº‹åŠ¡ä¸å¤šæ•°æ®æºå†²çª</h4>
<p>ç°è±¡ï¼šè·¨æ•°æ®æºæ“ä½œæ—¶ï¼Œäº‹åŠ¡æ— æ³•å›æ»šï¼›æˆ–å•æ•°æ®æºäº‹åŠ¡ç”Ÿæ•ˆï¼Œä½†åˆ‡æ¢æ•°æ®æºåäº‹åŠ¡å¤±æ•ˆã€‚ è§„é¿æ–¹æ¡ˆï¼š - é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼šç¡®ä¿äº‹åŠ¡ç®¡ç†å™¨ç»‘å®šçš„æ˜¯åŠ¨æ€æ•°æ®æºï¼ˆDynamicDataSourceï¼‰ï¼› - é¿å…è·¨æ•°æ®æºäº‹åŠ¡ï¼šå°½é‡å°†åŒä¸€äº‹åŠ¡å†…çš„æ“ä½œé™åˆ¶åœ¨å•ä¸ªæ•°æ®æºå†…ï¼› - å¤æ‚åœºæ™¯ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼šè·¨æ•°æ®æºäº‹åŠ¡éœ€ä½¿ç”¨Seataç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ã€‚</p>
<h4 data-id="heading-23">3. å‘ç‚¹3ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®æºæ··ä¹±</h4>
<p>ç°è±¡ï¼šä½¿ç”¨çº¿ç¨‹æ± æ—¶ï¼Œä¸åŒçº¿ç¨‹çš„æ•°æ®æºæ ‡è¯†ç›¸äº’å¹²æ‰°ï¼Œå¯¼è‡´æŸ¥è¯¢æ•°æ®é”™è¯¯ã€‚ è§„é¿æ–¹æ¡ˆï¼š - å¼ºåˆ¶æ¸…é™¤æ•°æ®æºæ ‡è¯†ï¼šåœ¨æ¯ä¸ªçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨DataSourceContextHolder.clearDataSourceType()ï¼› - çº¿ç¨‹æ± é…ç½®ï¼šé¿å…ä½¿ç”¨æ— ç•Œçº¿ç¨‹æ± ï¼Œæ§åˆ¶çº¿ç¨‹å¤ç”¨é¢‘ç‡ï¼› - å±€éƒ¨å˜é‡éš”ç¦»ï¼šåœ¨å¤šçº¿ç¨‹ä»»åŠ¡ä¸­ï¼Œæ˜¾å¼è®¾ç½®å’Œæ¸…é™¤æ•°æ®æºæ ‡è¯†ï¼Œä¸ä¾èµ–å…¨å±€çŠ¶æ€ã€‚</p>
<h4 data-id="heading-24">4. å‘ç‚¹4ï¼šè¿æ¥æ± å‚æ•°é…ç½®ä¸åˆç†</h4>
<p>ç°è±¡ï¼šå¤šæ•°æ®æºå¹¶å‘è®¿é—®æ—¶ï¼Œå‡ºç°è¿æ¥è¶…æ—¶ã€è¿æ¥æ± è€—å°½ç­‰é—®é¢˜ã€‚ è§„é¿æ–¹æ¡ˆï¼š - ä¸ºæ¯ä¸ªæ•°æ®æºé…ç½®ç‹¬ç«‹çš„è¿æ¥æ± å‚æ•°ï¼ˆåˆå§‹åŒ–è¿æ¥æ•°ã€æœ€å¤§æ´»è·ƒæ•°ç­‰ï¼‰ï¼› - æ ¹æ®ä¸šåŠ¡å¹¶å‘é‡è°ƒæ•´è¿æ¥æ± å¤§å°ï¼šé«˜å¹¶å‘æ•°æ®æºè®¾ç½®æ›´å¤§çš„max-activeï¼› - å¯ç”¨è¿æ¥æ± ç›‘æ§ï¼šé€šè¿‡å¾·é²ä¼Šç›‘æ§é¡µé¢ï¼ˆ/druid/index.htmlï¼‰æŸ¥çœ‹è¿æ¥æ± çŠ¶æ€ï¼ŒåŠ¨æ€è°ƒæ•´å‚æ•°ã€‚</p>
<h4 data-id="heading-25">5. å‘ç‚¹5ï¼šMapperæ‰«æèŒƒå›´é”™è¯¯</h4>
<p>ç°è±¡ï¼šMapperæ¥å£æ— æ³•æ³¨å…¥ï¼Œæˆ–æ³¨å…¥åæ— æ³•å…³è”åˆ°æ­£ç¡®çš„æ•°æ®æºã€‚ è§„é¿æ–¹æ¡ˆï¼š - ç»Ÿä¸€æ‰«ææ‰€æœ‰Mapperï¼šåœ¨DynamicDataSourceConfigä¸­é€šè¿‡@MapperScanæ‰«ææ‰€æœ‰æ•°æ®æºçš„Mapperæ¥å£ï¼› - é¿å…é‡å¤æ‰«æï¼šä¸è¦åœ¨å¤šä¸ªé…ç½®ç±»ä¸­é‡å¤æ‰«æåŒä¸€MapperåŒ…ï¼› - æ˜ç¡®æ•°æ®æºå…³è”ï¼šé€šè¿‡@DataSourceæ³¨è§£åœ¨Mapperç±»ä¸ŠæŒ‡å®šæ•°æ®æºï¼Œé¿å…æ··æ·†ã€‚</p>
<h4 data-id="heading-26">6. å‘ç‚¹6ï¼šè¯»å†™åˆ†ç¦»åœºæ™¯ä¸‹ä¸»ä»åŒæ­¥å»¶è¿Ÿ</h4>
<p>ç°è±¡ï¼šä¸»åº“å†™å…¥æ•°æ®åï¼Œä»åº“æŸ¥è¯¢ä¸åˆ°ï¼ˆä¸»ä»åŒæ­¥å»¶è¿Ÿï¼‰ï¼Œå¯¼è‡´ä¸šåŠ¡å¼‚å¸¸ã€‚ è§„é¿æ–¹æ¡ˆï¼š - å…³é”®ä¸šåŠ¡å¼ºåˆ¶èµ°ä¸»åº“ï¼šå¦‚ç”¨æˆ·ä¸‹å•åæŸ¥è¯¢è®¢å•çŠ¶æ€ï¼Œé€šè¿‡@DataSource(DataSourceType.MASTER)æŒ‡å®šä¸»åº“ï¼› - é…ç½®ä¸»ä»åŒæ­¥ä¼˜åŒ–ï¼šå‡å°‘åŒæ­¥å»¶è¿Ÿï¼ˆå¦‚ä¼˜åŒ–binlogæ¨¡å¼ã€å¢åŠ ä»åº“é…ç½®ï¼‰ï¼› - é‡è¯•æœºåˆ¶ï¼šä»åº“æŸ¥è¯¢å¤±è´¥æ—¶ï¼Œé‡è¯•å‡ æ¬¡æˆ–åˆ‡æ¢åˆ°ä¸»åº“æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-27">7. å‘ç‚¹7ï¼šåŠ¨æ€æ–°å¢æ•°æ®æºæ—¶é…ç½®ä¸ç”Ÿæ•ˆ</h4>
<p>ç°è±¡ï¼šè¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æ–°æ•°æ®æºï¼ˆå¦‚å¤šç§Ÿæˆ·åœºæ™¯ï¼‰ï¼Œä½†æ— æ³•åˆ‡æ¢åˆ°æ–°æ•°æ®æºã€‚ è§„é¿æ–¹æ¡ˆï¼š - æ‰©å±•åŠ¨æ€æ•°æ®æºï¼šåœ¨DynamicRoutingDataSourceä¸­æ·»åŠ åŠ¨æ€æ›´æ–°æ•°æ®æºçš„æ–¹æ³•ï¼› - åˆ·æ–°æ•°æ®æºç¼“å­˜ï¼šæ–°å¢æ•°æ®æºåï¼Œè°ƒç”¨dynamicDataSource.setTargetDataSources()æ›´æ–°æ•°æ®æºæ˜ å°„ï¼› - çº¿ç¨‹å®‰å…¨æ§åˆ¶ï¼šæ–°å¢æ•°æ®æºæ—¶åŠ é”ï¼Œé¿å…å¹¶å‘ä¿®æ”¹å¯¼è‡´çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<h4 data-id="heading-28">8. å‘ç‚¹8ï¼šå¿½ç•¥æ•°æ®æºç›‘æ§</h4>
<p>ç°è±¡ï¼šå¤šæ•°æ®æºè¿è¡ŒçŠ¶æ€ä¸é€æ˜ï¼Œå‡ºç°é—®é¢˜åæ— æ³•å¿«é€Ÿå®šä½ã€‚ è§„é¿æ–¹æ¡ˆï¼š - å¯ç”¨è¿æ¥æ± ç›‘æ§ï¼šå¦‚å¾·é²ä¼Šç›‘æ§ï¼Œå®æ—¶æŸ¥çœ‹å„æ•°æ®æºçš„è¿æ¥æ•°ã€SQLæ‰§è¡Œæƒ…å†µï¼› - æ—¥å¿—è¿½è¸ªï¼šåœ¨æ•°æ®æºåˆ‡æ¢åˆ‡é¢ä¸­æ‰“å°æ—¥å¿—ï¼Œè®°å½•æ¯ä¸ªæ–¹æ³•ä½¿ç”¨çš„æ•°æ®æºï¼› - å‘Šè­¦é…ç½®ï¼šé’ˆå¯¹è¿æ¥æ± è€—å°½ã€SQLæ‰§è¡Œè¶…æ—¶ç­‰é—®é¢˜é…ç½®å‘Šè­¦ï¼ˆé’‰é’‰/é‚®ä»¶ï¼‰ã€‚</p>
<h3 data-id="heading-29">äº”ã€è¿›é˜¶ä¼˜åŒ–ï¼šå¤šæ•°æ®æºé…ç½®çš„é«˜çº§èƒ½åŠ›</h3>
<p>å¯¹äºå¤æ‚ä¸šåŠ¡åœºæ™¯ï¼Œè¿˜éœ€æŒæ¡å¤šæ•°æ®æºçš„è¿›é˜¶ä¼˜åŒ–èƒ½åŠ›ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ä¸å¯æ‰©å±•æ€§ï¼š</p>
<h4 data-id="heading-30">1. åŠ¨æ€æ•°æ®æºå¥åº·æ£€æŸ¥</h4>
<p>éœ€æ±‚ï¼šå®æ—¶ç›‘æ§å„æ•°æ®æºçš„è¿æ¥çŠ¶æ€ï¼Œå‘ç°å¼‚å¸¸æ•°æ®æºåŠæ—¶å‘Šè­¦ã€‚ å®ç°æ–¹æ¡ˆï¼š - è‡ªå®šä¹‰å¥åº·æ£€æŸ¥å™¨ï¼šå®ç°Spring Bootçš„HealthIndicatoræ¥å£ï¼Œå®šæœŸæ£€æŸ¥å„æ•°æ®æºçš„è¿æ¥çŠ¶æ€ï¼› - é›†æˆSpring Boot Actuatorï¼šé€šè¿‡/actuator/healthç«¯ç‚¹æš´éœ²æ•°æ®æºå¥åº·çŠ¶æ€ï¼Œä¾¿äºç›‘æ§ç³»ç»Ÿé›†æˆã€‚</p>
<h4 data-id="heading-31">2. å¤šæ•°æ®æºè¯»å†™åˆ†ç¦»ä¼˜åŒ–</h4>
<p>éœ€æ±‚ï¼šè‡ªåŠ¨å°†æŸ¥è¯¢æ“ä½œè·¯ç”±åˆ°ä»åº“ï¼Œå†™å…¥æ“ä½œè·¯ç”±åˆ°ä¸»åº“ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ æ³¨è§£ã€‚ å®ç°æ–¹æ¡ˆï¼š - æ‰©å±•åˆ‡é¢é€»è¾‘ï¼šé€šè¿‡AOPæ‹¦æˆªæ‰€æœ‰æŸ¥è¯¢æ–¹æ³•ï¼ˆselectå¼€å¤´ï¼‰ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä»åº“ï¼›å†™å…¥æ–¹æ³•ï¼ˆinsert/update/deleteå¼€å¤´ï¼‰åˆ‡æ¢åˆ°ä¸»åº“ï¼› - ä½¿ç”¨Sharding-JDBCï¼šæ¡†æ¶è‡ªå¸¦è¯»å†™åˆ†ç¦»åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ã€éšæœºç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-32">3. å¤šæ•°æ®æºç¼“å­˜ä¼˜åŒ–</h4>
<p>éœ€æ±‚ï¼šå‡å°‘å¤šæ•°æ®æºçš„é‡å¤æŸ¥è¯¢ï¼Œæå‡æ€§èƒ½ã€‚ å®ç°æ–¹æ¡ˆï¼š - é’ˆå¯¹ä¸åŒæ•°æ®æºé…ç½®ç‹¬ç«‹ç¼“å­˜ï¼šå¦‚ä¸šåŠ¡åº“æŸ¥è¯¢ç»“æœç¼“å­˜åˆ°Redisï¼Œå†å²åº“æŸ¥è¯¢ç»“æœç¼“å­˜åˆ°æœ¬åœ°ç¼“å­˜ï¼› - ç¼“å­˜é”®éš”ç¦»ï¼šç¼“å­˜é”®æ·»åŠ æ•°æ®æºæ ‡è¯†å‰ç¼€ï¼ˆå¦‚"business:order:123"ï¼‰ï¼Œé¿å…ä¸åŒæ•°æ®æºçš„ç¼“å­˜å†²çªã€‚</p>
<h3 data-id="heading-33">å…­ã€æ€»ç»“ï¼šå¤šæ•°æ®æºé…ç½®çš„æ ¸å¿ƒåŸåˆ™ä¸è½åœ°å»ºè®®</h3>
<p>å¤šæ•°æ®æºé…ç½®çš„æ ¸å¿ƒæ˜¯â€œ<strong>éš”ç¦»æ¸…æ™°ã€åˆ‡æ¢çµæ´»ã€äº‹åŠ¡å¯é ã€ç›‘æ§åˆ°ä½</strong>â€ï¼Œè½åœ°æ—¶éœ€éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li><strong>é€‰å‹é€‚é…åœºæ™¯</strong>ï¼šæ ¹æ®ä¸šåŠ¡å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„å®ç°æ–¹æ¡ˆï¼Œé¿å…è¿‡åº¦è®¾è®¡ï¼ˆå¦‚ç®€å•åœºæ™¯æ— éœ€å¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼‰ï¼›</li>
<li><strong>é…ç½®è§„èŒƒç»Ÿä¸€</strong>ï¼šç»Ÿä¸€æ•°æ®æºå‘½åã€æ³¨è§£ä½¿ç”¨ã€è¿æ¥æ± å‚æ•°é…ç½®ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼›</li>
<li><strong>äº‹åŠ¡è°¨æ…å¤„ç†</strong>ï¼šå°½é‡é¿å…è·¨æ•°æ®æºäº‹åŠ¡ï¼Œå¤æ‚åœºæ™¯å€ŸåŠ©åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼›</li>
<li><strong>ç›‘æ§è´¯ç©¿å…¨ç¨‹</strong>ï¼šå¯ç”¨è¿æ¥æ± ç›‘æ§ã€æ—¥å¿—è¿½è¸ªã€å¥åº·æ£€æŸ¥ï¼Œç¡®ä¿é—®é¢˜æ—©å‘ç°ã€æ—©è§£å†³ã€‚</li>
</ul>
<p>å¤šæ•°æ®æºé…ç½®æ˜¯åç«¯ç³»ç»Ÿæ¶æ„è®¾è®¡çš„é‡è¦ç¯èŠ‚ï¼Œåˆç†çš„å¤šæ•°æ®æºæ–¹æ¡ˆèƒ½æœ‰æ•ˆè§£è€¦ä¸šåŠ¡ã€æå‡æ€§èƒ½ã€ä¿éšœæ‰©å±•æ€§ã€‚å¸Œæœ›æœ¬æ–‡çš„å®æˆ˜æŒ‡å—èƒ½å¸®åŠ©ä½ é¿å¼€å‘ç‚¹ï¼Œé«˜æ•ˆè½åœ°å¤šæ•°æ®æºéœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7594919272686567450</link>    <guid>https://juejin.cn/post/7594919272686567450</guid>    <pubDate>2026-01-14T03:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594919272686567450" data-draft-id="7594854295746297892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2026-01-14T03:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ALLINAI"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056639549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056639549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ALLINAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T03:57:40.000Z" title="Wed Jan 14 2026 03:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Unla</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ MCP ç½‘å…³æœåŠ¡ï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºâ€œé›¶ä»£ç ä¾µå…¥â€ã€‚é€šè¿‡é…ç½®ï¼Œå¯ä»¥å°†ä¼ ç»Ÿçš„ HTTP API è½¬æ¢ä¸ºæ ‡å‡† MCP åè®®ï¼Œæˆ–å¯¹ç°æœ‰çš„ MCP Server è¿›è¡Œåå‘ä»£ç†ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€ å‡†å¤‡å·¥ä½œ</h4>
<ol>
<li><strong>éƒ¨ç½² Unla</strong>ï¼šé€šè¿‡ Docker æˆ–æºç å¯åŠ¨äº† Unlaã€‚</li>
<li><strong>ç®¡ç†åå°</strong>ï¼šè®¿é—® Unla çš„ Web UIï¼ˆé»˜è®¤åœ°å€é€šå¸¸ä¸º <code>http://localhost:5234</code>ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-1">äºŒã€ é…ç½®ç½‘å…³ä»£ç† (Gateways)</h4>
<p>åœ¨ Unla ä¸­ï¼Œç½‘å…³é…ç½®é€šå¸¸åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š<strong>ä»£ç†ç°æœ‰ MCP Server</strong> å’Œ <strong>è½¬æ¢ HTTP API</strong>ã€‚</p>
<h5 data-id="heading-2">1. ä»£ç†ç°æœ‰çš„ MCP Server</h5>
<p>å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ MCP Serverï¼ˆä¾‹å¦‚ Python/Node.js ç¼–å†™çš„ï¼‰ï¼Œå¯ä»¥é€šè¿‡ Unla è¿›è¡Œä¸­è½¬ã€‚</p>
<ul>
<li><strong>æ­¥éª¤</strong>ï¼š
<ol>
<li>ç™»å½• Web UIï¼Œç‚¹å‡» <strong>"ç½‘å…³é…ç½®"</strong> &gt; <strong>"åˆ›å»º"</strong> &gt; <strong>"MCPæœåŠ¡"</strong>ã€‚</li>
<li>é€‰æ‹© <strong>"YAMLæ¨¡å¼"</strong> æˆ–è€… <strong>"è¡¨å•æ¨¡å¼"</strong> å¡«å†™é…ç½®ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡» <strong>"åˆ›å»º"</strong> æŒ‰é’®ã€‚</li>
</ol>
</li>
</ul>
<h5 data-id="heading-3">2. å°† HTTP API è½¬æ¢ä¸º MCP å·¥å…·</h5>
<ul>
<li><strong>æ­¥éª¤</strong>ï¼š
<ol>
<li>ç™»å½• Web UIï¼Œç‚¹å‡» <strong>"ç½‘å…³é…ç½®"</strong> &gt; <strong>"åˆ›å»º"</strong> &gt; <strong>"HTTPæœåŠ¡"</strong>ã€‚</li>
<li>é€‰æ‹© <strong>"YAMLæ¨¡å¼"</strong> æˆ–è€… <strong>"è¡¨å•æ¨¡å¼"</strong> å¡«å†™é…ç½®ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡» <strong>"åˆ›å»º"</strong> æŒ‰é’®ã€‚</li>
</ol>
</li>
</ul>
<p>è¿™æ˜¯ Unla æœ€å¼ºå¤§çš„åŠŸèƒ½ï¼Œåªéœ€ç¼–å†™ YAML å³å¯å°†æ™®é€šçš„HTTPæ¥å£å˜æˆ AI ä»£ç†å·¥å…·ã€‚</p>
<ul>
<li><strong>YAMLé…ç½®ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">"mock-server"</span>              <span class="hljs-comment"># ä»£ç†æœåŠ¡åç§°ï¼Œå…¨å±€å”¯ä¸€</span>
<span class="hljs-attr">tenant:</span> <span class="hljs-string">"default"</span>                <span class="hljs-comment"># ç§Ÿæˆ·æ ‡è¯†ï¼Œç”¨äºå¤šç§Ÿæˆ·åœºæ™¯</span>

<span class="hljs-comment"># è·¯ç”±é…ç½®</span>
<span class="hljs-attr">routers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">server:</span> <span class="hljs-string">"mock-server"</span>       <span class="hljs-comment"># æœåŠ¡åç§°</span>
    <span class="hljs-attr">prefix:</span> <span class="hljs-string">"/gateway/user"</span>     <span class="hljs-comment"># è·¯ç”±å‰ç¼€ï¼Œå…¨å±€å”¯ä¸€ï¼Œä¸å¯é‡å¤ï¼ˆå¿…é¡»ä»¥ç§Ÿæˆ·IDå¼€å¤´ï¼‰</span>

    <span class="hljs-comment"># CORS é…ç½®</span>
    <span class="hljs-attr">cors:</span>
      <span class="hljs-attr">allowOrigins:</span>             <span class="hljs-comment"># å¼€å‘æµ‹è¯•ç¯å¢ƒå¯å…¨éƒ¨å¼€æ”¾ï¼Œçº¿ä¸Šæœ€å¥½æŒ‰éœ€å¼€æ”¾ã€‚ï¼ˆå¤§éƒ¨åˆ†MCP Clientæ˜¯ä¸éœ€è¦å¼€æ”¾è·¨åŸŸçš„ï¼‰</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*"</span>
      <span class="hljs-attr">allowMethods:</span>             <span class="hljs-comment"># å…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼ŒæŒ‰éœ€å¼€æ”¾ï¼Œå¯¹äºMCPï¼ˆSSEå’ŒStreamableï¼‰æ¥è¯´é€šå¸¸åªéœ€è¦è¿™3ä¸ªæ–¹æ³•å³å¯</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"GET"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"POST"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"PUT"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"OPTIONS"</span>
      <span class="hljs-attr">allowHeaders:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Content-Type"</span>        <span class="hljs-comment"># å¿…é¡»å…è®¸çš„</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Authorization"</span>       <span class="hljs-comment"># æœ‰é‰´æƒéœ€æ±‚çš„éœ€è¦æ”¯æŒè¯·æ±‚é‡Œæºå¸¦æ­¤Key</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Mcp-Session-Id"</span>      <span class="hljs-comment"># å¯¹äºMCPæ¥è¯´ï¼Œå¿…é¡»æ”¯æŒè¯·æ±‚é‡Œæºå¸¦è¿™ä¸ªKeyï¼Œå¦åˆ™Streamable HTTPæ— æ³•æ­£å¸¸ä½¿ç”¨</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"mcp-protocol-version"</span> <span class="hljs-comment"># MCPåè®®ç‰ˆæœ¬å¤´ï¼Œç”¨äºåè®®ç‰ˆæœ¬åå•†</span>
      <span class="hljs-attr">exposeHeaders:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Mcp-Session-Id"</span>      <span class="hljs-comment"># å¯¹äºMCPæ¥è¯´ï¼Œå¼€å¯è·¨åŸŸçš„æ—¶å€™å¿…é¡»è¦æš´éœ²è¿™ä¸ªKeyï¼Œå¦åˆ™Streamable HTTPæ— æ³•æ­£å¸¸ä½¿ç”¨</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"mcp-protocol-version"</span> <span class="hljs-comment"># MCPåè®®ç‰ˆæœ¬å¤´</span>
      <span class="hljs-attr">allowCredentials:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment"># æ˜¯å¦å¢åŠ  Access-Control-Allow-Credentials: true è¿™ä¸ªHeader</span>

<span class="hljs-comment"># æœåŠ¡é…ç½®</span>
<span class="hljs-attr">servers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"mock-server"</span>               <span class="hljs-comment"># æœåŠ¡åç§°ï¼Œéœ€è¦ä¸routersä¸­çš„serverä¿æŒä¸€è‡´</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Mock User Service"</span>  <span class="hljs-comment"># æœåŠ¡æè¿°</span>
    <span class="hljs-attr">allowedTools:</span>                     <span class="hljs-comment"># å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆä¸ºtoolsçš„å­é›†ï¼‰</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"register_user"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"get_user_by_email"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"update_user_preferences"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"update_user_avatar"</span>
    <span class="hljs-attr">config:</span>                                           <span class="hljs-comment"># æœåŠ¡çº§åˆ«çš„é…ç½®ï¼Œå¯ä»¥åœ¨toolsä¸­é€šè¿‡{{.Config}}å¼•ç”¨</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-number">123</span>                                     <span class="hljs-comment"># å†™æ­»çš„é…ç½®</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">'Bearer <span class="hljs-template-variable">{{ env "AUTH_TOKEN" }}</span>'</span>  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡ä¸­è·å–çš„é…ç½®ï¼Œç”¨æ³•æ˜¯'{{ env "ENV_VAR_NAME" }}'</span>

<span class="hljs-comment"># å·¥å…·é…ç½®</span>
<span class="hljs-attr">tools:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"register_user"</span>                                   <span class="hljs-comment"># å·¥å…·åç§°</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Register a new user"</span>                      <span class="hljs-comment"># å·¥å…·æè¿°</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"POST"</span>                                          <span class="hljs-comment"># è¯·æ±‚ç›®æ ‡ï¼ˆä¸Šæ¸¸ã€åç«¯ï¼‰æœåŠ¡çš„HTTPæ–¹æ³•</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users"</span>                 <span class="hljs-comment"># ç›®æ ‡æœåŠ¡åœ°å€</span>
    <span class="hljs-attr">headers:</span>                                                <span class="hljs-comment"># è¯·æ±‚å¤´é…ç½®ï¼Œç”¨äºåœ¨è¯·æ±‚ç›®æ ‡æœåŠ¡æ—¶æºå¸¦çš„è¯·æ±‚å¤´</span>
      <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">"application/json"</span>                      <span class="hljs-comment"># å†™æ­»çš„è¯·æ±‚å¤´</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Authorization}}</span>"</span>            <span class="hljs-comment"># ä½¿ç”¨æœåŠ¡é…ç½®ä¸­çš„å€¼</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>                          <span class="hljs-comment"># ä½¿ç”¨æœåŠ¡é…ç½®ä¸­çš„å€¼</span>
    <span class="hljs-attr">args:</span>                         <span class="hljs-comment"># å‚æ•°é…ç½®</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"username"</span>          <span class="hljs-comment"># å‚æ•°åç§°</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>          <span class="hljs-comment"># å‚æ•°ä½ç½®ï¼šheader, query, path, body, form-data</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>            <span class="hljs-comment"># å‚æ•°æ˜¯å¦å¿…å¡«</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>            <span class="hljs-comment"># å‚æ•°ç±»å‹</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Username"</span>   <span class="hljs-comment"># å‚æ•°æè¿°</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>               <span class="hljs-comment"># é»˜è®¤å€¼</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">requestBody:</span> <span class="hljs-string">|-</span>               <span class="hljs-comment"># è¯·æ±‚ä½“æ¨¡æ¿ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆè¯·æ±‚ä½“ï¼Œå¦‚ï¼šä»å‚æ•°ï¼ˆMCPçš„è¯·æ±‚argumentsï¼‰ä¸­æå–çš„å€¼</span>
      {
        <span class="hljs-attr">"username":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.username}}</span>"</span>,
        <span class="hljs-attr">"email":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.email}}</span>"</span>
      }
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-</span>              <span class="hljs-comment"># å“åº”ä½“æ¨¡æ¿ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆå“åº”ä½“ï¼Œå¦‚ï¼šä»å“åº”ä¸­æå–çš„å€¼</span>
      {
        <span class="hljs-attr">"id":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.id}}</span>"</span>,
        <span class="hljs-attr">"username":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.username}}</span>"</span>,
        <span class="hljs-attr">"email":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.email}}</span>"</span>,
        <span class="hljs-attr">"createdAt":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.createdAt}}</span>"</span>
      }

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"get_user_by_email"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Get user by email"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"GET"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/email/<span class="hljs-template-variable">{{.Args.email}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "id": "{{.Response.Data.id}}",
        "username": "{{.Response.Data.username}}",
        "email": "{{.Response.Data.email}}",
        "createdAt": "{{.Response.Data.createdAt}}"
      }
</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"update_user_preferences"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Update user preferences"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"PUT"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/<span class="hljs-template-variable">{{.Args.email}}</span>/preferences"</span>
    <span class="hljs-attr">headers:</span>
      <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">"application/json"</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Request.Headers.Authorization}}</span>"</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"isPublic"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether the user profile is public"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"false"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"showEmail"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether to show email in profile"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"true"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"theme"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User interface theme"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"light"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"tags"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
          <span class="hljs-attr">enum:</span> [<span class="hljs-string">"developer"</span>, <span class="hljs-string">"designer"</span>, <span class="hljs-string">"manager"</span>, <span class="hljs-string">"tester"</span>]
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User role tags"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"[]"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"settings"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"object"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User custom settings as key-value pairs"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"{}"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"notifications"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User notification preferences"</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"object"</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">type:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification type (email, push, sms)"</span>
            <span class="hljs-attr">channel:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification channel (marketing, system, security)"</span>
            <span class="hljs-attr">enabled:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether this notification is enabled"</span>
            <span class="hljs-attr">frequency:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"number"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification frequency (0: realtime, 1: daily, 2: weekly, 3: monthly)"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"[]"</span>
    <span class="hljs-attr">requestBody:</span> <span class="hljs-string">|-</span>                   <span class="hljs-comment"># toJSONï¼šå¯¹éJSONåŸç”Ÿæ”¯æŒçš„ç±»å‹è½¬ä¸ºJSONæ ¼å¼</span>
      {
        <span class="hljs-attr">"isPublic":</span> {{<span class="hljs-string">.Args.isPublic</span>}},
        <span class="hljs-attr">"showEmail":</span> {{<span class="hljs-string">.Args.showEmail</span>}},
        <span class="hljs-attr">"theme":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.theme}}</span>"</span>,
        <span class="hljs-attr">"tags":</span> {{<span class="hljs-string">.Args.tags</span>}},
        <span class="hljs-attr">"settings":</span> {{ <span class="hljs-string">toJSON</span> <span class="hljs-string">.Args.settings</span> }},
        <span class="hljs-attr">"notifications":</span> {{ <span class="hljs-string">.Args.notifications</span> }}
      }
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "id": "{{.Response.Data.id}}",
        "username": "{{.Response.Data.username}}",
        "email": "{{.Response.Data.email}}",
        "createdAt": "{{.Response.Data.createdAt}}",
        "preferences": {
          "isPublic": {{.Response.Data.preferences.isPublic}},
          "showEmail": {{.Response.Data.preferences.showEmail}},
          "theme": "{{.Response.Data.preferences.theme}}",
          "tags": {{.Response.Data.preferences.tags}},
          "settings": {{ toJSON .Response.Data.preferences.settings }},
          "notifications": {{ toJSON .Response.Data.preferences.notifications }}
        }
      }
</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"update_user_avatar"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Update user avatar using a URL via multipart form"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"POST"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/<span class="hljs-template-variable">{{.Args.email}}</span>/avatar"</span>
    <span class="hljs-attr">headers:</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Request.Headers.Authorization}}</span>"</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email of the user"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"url"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"form-data"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"The avatar image URL"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "message": "{{.Response.Data.message}}",
        "avatarUrl": "{{.Response.Data.avatarUrl}}"
      }
</span></code></pre>
<ul>
<li><strong>ç½‘å…³å¤„ç†é€»è¾‘</strong>ï¼š
å½“ AI å®¢æˆ·ç«¯è¯·æ±‚è¯¥å·¥å…·æ—¶ï¼ŒUnla ç½‘å…³ä¼šè‡ªåŠ¨æ„é€  HTTP è¯·æ±‚å‘å¾€åç«¯ï¼Œå¹¶å°†ç»“æœå°è£…ä¸º MCP å“åº”è¿”å›ã€‚</li>
</ul>
<h4 data-id="heading-4">ä¸‰ã€ å®¢æˆ·ç«¯æ¥å…¥</h4>
<p>é…ç½®å®Œæˆåï¼Œä½ éœ€è¦è®©ä½ çš„ AI å®¢æˆ·ç«¯ï¼ˆå¦‚  Dify, Cursor, Claude Desktopï¼‰è¿æ¥åˆ° Unla ç½‘å…³ã€‚</p>
<ol>
<li><strong>è·å–æ¥å…¥ç‚¹ URL</strong>ï¼š
åœ¨ Unla æ§åˆ¶é¢æ¿æŸ¥çœ‹ç”Ÿæˆ SSE å’Œ HTTP ä¸¤ç§ç±»å‹çš„ç«¯ç‚¹åœ°å€ï¼Œé€šå¸¸æ ¼å¼ä¸ºï¼š<code>http://&lt;your-gateway-ip&gt;:5235/{tenant_id}/&lt;server-name&gt;/sse</code>å’Œ<code>http://&lt;your-gateway-ip&gt;:5235/{tenant_id}/&lt;server-name&gt;/mcp</code></li>
<li><strong>åœ¨å®¢æˆ·ç«¯é…ç½®</strong>ï¼ˆä»¥ Dify ä¸ºä¾‹ï¼‰ï¼š
<ul>
<li>å·¥å…· -&gt; MCP -&gt; æ·»åŠ MCPæœåŠ¡ã€‚</li>
<li>æ·»åŠ â€œæœåŠ¡ç«¯ç‚¹ï¼Œåç§°ï¼ŒæœåŠ¡å™¨æ ‡è¯†ç¬¦ï¼Œè¯·æ±‚å¤´â€ç­‰ä¿¡æ¯</li>
</ul>
</li>
</ol>
<h4 data-id="heading-5">å››ã€ç§Ÿæˆ·ç®¡ç†</h4>
<h5 data-id="heading-6">1. ç§Ÿæˆ·çš„ä½œç”¨</h5>
<p>åœ¨ Unla ä¸­ï¼Œç§Ÿæˆ·ï¼ˆTenantï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘éš”ç¦»å•ä½ã€‚å…¶ä¸»è¦ç”¨é€”åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>èµ„æºéš”ç¦»</strong>ï¼šä¸åŒé¡¹ç›®ç»„æˆ–éƒ¨é—¨å¯ä»¥æ‹¥æœ‰ç‹¬ç«‹çš„ MCP Server é›†åˆï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
<li><strong>é…ç½®å¤ç”¨</strong>ï¼šå¯ä»¥åœ¨ä¸åŒç§Ÿæˆ·ä¸‹é…ç½®åŒåçš„ Serverï¼ˆå¦‚ <code>prod-db</code> å’Œ <code>dev-db</code>ï¼‰ï¼Œé€šè¿‡ç§Ÿæˆ· ID è¿›è¡ŒåŒºåˆ†ã€‚</li>
<li><strong>å®‰å…¨åˆè§„</strong>ï¼šä¸ºæ¯ä¸ªç§Ÿæˆ·åˆ†é…ç‹¬ç«‹çš„ <code>API Key</code> æˆ– <code>JWT Secret</code>ï¼Œç¡®ä¿ A ç§Ÿæˆ·æ— æ³•è°ƒç”¨ B ç§Ÿæˆ·çš„å·¥å…·ã€‚</li>
</ul>
<h5 data-id="heading-7">2. ç§Ÿæˆ·åœ¨ç½‘å…³å‰ç¼€ï¼ˆGateway Prefixï¼‰ä¸­çš„åŒ¹é…é€»è¾‘</h5>
<p>Unla ç½‘å…³é€šè¿‡ URL è·¯å¾„ä¸­çš„å‰ç¼€æ¥è¯†åˆ«è¯·æ±‚æ‰€å±çš„ç§Ÿæˆ·å’ŒæœåŠ¡ã€‚</p>
<p>æ ‡å‡†çš„è·¯ç”±åŒ¹é…æ ¼å¼é€šå¸¸å¦‚ä¸‹ï¼š
<code>http://&lt;gateway-host&gt;:&lt;port&gt;/{tenant_id}/{server_name}/sse</code> æˆ– <code>http://&lt;gateway-host&gt;:&lt;port&gt;/{tenant_id}/{server_name}/mcp</code></p>
<hr/>
<h4 data-id="heading-8">äº”ã€æ“ä½œå»ºè®®</h4>
<ol>
<li><strong>å…ˆåˆ›å»ºç§Ÿæˆ·</strong>ï¼šåœ¨ Web UI çš„ <strong>"ç§Ÿæˆ·ç®¡ç†"</strong> æ¨¡å—åˆ›å»ºç§Ÿæˆ·ï¼Œå¹¶è®°å½•å…¶ <code>ID</code>ã€‚</li>
<li><strong>ç»‘å®š Server</strong>ï¼šåœ¨åˆ›å»ºç½‘å…³ä»£ç†é…ç½®æ—¶ï¼ŒåŠ¡å¿…é€‰æ‹©æ‰€å±çš„ <strong>"ç§Ÿæˆ·"</strong>ã€‚</li>
<li><strong>è·¯ç”±é…ç½®</strong>ï¼šè·¯ç”±å‰ç¼€å¿…é¡»ä»¥ <strong>"ç§Ÿæˆ·ID"</strong> å¼€å¤´ï¼Œå¦åˆ™å¤±è´¥ã€‚</li>
<li><strong>æ­£ç¡®YAMLé…ç½®æ–‡ä»¶æ ¼å¼</strong>ï¼šé€šè¿‡YAMLæ¨¡å¼è¿›è¡Œç½‘å…³é…ç½®æ—¶ï¼Œç¡®ä¿æ­£ç¡®çš„ç¼©è¿›ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚</li>
<li><strong>æ­£ç¡®çš„JSONæ ¼å¼æ•°æ®</strong>ï¼šåœ¨é…ç½®è¯·æ±‚æˆ–å“åº”Bodyæ—¶ï¼Œå¯¹éJSONåŸç”Ÿæ”¯æŒçš„æ•°æ®ç±»å‹é€šè¿‡<code>toJSON</code>è¿›è¡Œè½¬æ¢</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†æŠŠ Context å¡çˆ†äº†ï¼ç”¨â€œåˆ†çº§ç´¢å¼•â€è®©ä½ çš„ AI åŠ©æ‰‹é™æœ¬å¢æ•ˆ (Save Tokens!)]]></title>    <link>https://juejin.cn/post/7594759496368553994</link>    <guid>https://juejin.cn/post/7594759496368553994</guid>    <pubDate>2026-01-14T02:03:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594759496368553994" data-draft-id="7594741180950478894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†æŠŠ Context å¡çˆ†äº†ï¼ç”¨â€œåˆ†çº§ç´¢å¼•â€è®©ä½ çš„ AI åŠ©æ‰‹é™æœ¬å¢æ•ˆ (Save Tokens!)"/> <meta itemprop="keywords" content="AIGC,AIç¼–ç¨‹,é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2026-01-14T02:03:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="webkubor"/> <meta itemprop="url" content="https://juejin.cn/user/2119514149631870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†æŠŠ Context å¡çˆ†äº†ï¼ç”¨â€œåˆ†çº§ç´¢å¼•â€è®©ä½ çš„ AI åŠ©æ‰‹é™æœ¬å¢æ•ˆ (Save Tokens!)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514149631870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    webkubor
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:03:00.000Z" title="Wed Jan 14 2026 02:03:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body ::selection{color:#fff;background-color:#ed7373}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:.6em;margin-top:1.5em;padding-bottom:4px;color:#ed7373}.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px}.markdown-body h4{font-size:16px}.markdown-body h5,.markdown-body h6{font-size:14px}.markdown-body p{line-height:inherit;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border-top:1px solid #dfe1e6;margin:33px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:rgba(239,198,221,.2666666667);color:#7b164f;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==") 10px 10px no-repeat;background-size:40px;background-color:#fdf8f8}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#fdf8f8}.markdown-body a{position:relative;text-decoration:underline;text-decoration-color:#ffd4d4;color:#ed7373;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAD1lJREFUeF7tnV122zgShQHJG5gT9/OkV2J7JR3voI/U707eI5/eQeyVRFlJa56nc2YDFjkHEulWHP3g5xZYAK5eku6QYOFWfSwUAJLW8EcFqMBJBSy1oQJU4LQCBITRQQXOKEBAGB5UgIAwBqhAnALMIHG68axGFCAgjTia3YxTgIDE6cazGlGAgDTiaHYzTgECEqcbz2pEAQLSiKPZzTgFCEicbjyrEQUISCOOZjfjFCAgcbrxrEYUICCNOJrdjFOAgMTpxrMaUYCANOJodjNOAQISpxvPakQBAtKIo9nNOAUISJxuPKsRBQhII45GdfN/v//+/l9//rlBtae9HQKi3UOZ7ft7sfhgjfm3sfa9u3RvzHtrjPv77r8PfpvemB0o1v3Z95tuNvt29fKyqQkgApI5ADVebgeFtTfGmA8I+3pj1rbv17Ouey4dFgKCiIgC2/i+WDwYax0QbzMDtDcjLC67/PL58xraeIbGCEgGkTVd4vty+QWVKUL75WCZb7f3JWUVAhLq5UKPHzLGRyXmP822208lgEJAlESMlBlDfeGyhsafelAIiMawAdjkpmO38/kXa8wtoDnRJvq+v79+fHwSvUhk4wQkUjjNp/33jz9uZ33/VbONP9nW9x/fPT5+0mYzAdHmkUR7lNUaob1RN+QiIKEuVHz838vl1xKGVOck1DbTRUAUB7yvaSXVG5592sy22zsNs1wExNNjWg+rEI5XqWfb7a9TQ0JAtEa+h101wzF0f/JMQkA8AlHjIQ3AMco+KSQERGP0X7CpITj2Skw4BUxACgOkOThG/0wECQEpCJBm4Rh81Fl7l3tHMAEpBJCJ4Hjq+/7bvOt229THGSVny8vV1W6b/Kzrbnprb088VAVXN/fMFgGBuxDfYE443L4oB0TM9OqwxcVtjJR7xiTzUIuA4OMZ2mI2OICBN+wgfpACJWcWISDQcMY2lgMOt7XjerW6w1q+b03sqUUgzJf6TUAuKTTRv+eAI8f0qdSwK1cWISATAXDusjngyDkj5PrTzedu+z2uNsmURQiIMkBqg2OUVwKSHFmEgCgCpFY4xCDJkEUIiBJAaodjlBlZuEtOMIz2EhAFgLQCxxtIIG9YkR5mEZCJAWkNjldIlsu/EEW79AsfCMiEgLQKx8EaCSKLPL1bre6l3EhApJS90G7LcKCziOQwi4BMAAjh+GGlPTmLSK7pEJDMgBCOfwRHvb9Lsg4hIBkBIRw/i/0dUawLrocQkEyAEI7jQoPeNi9WqBOQDIAQjtMig16uTUAyxLHIJQjHeVkRdYjkijoziAgW+0YJx2VxEYAYYzbvVqtfL18t/AgCEq6Z1xmEw0um3U2km8/dqnrS791qJRLLIo0m9bSCkwmHvxNBgDCD+Es+7ZGEI0x/DrHC9Cr6aMIR7j7ELBaL9HDds59BOOIkB33wh9O8cfLnOYtwxOsM+egPV9LjHSB9JuFIU/j7ctmntSD7cmvOYiV6B3IHPGOD5E7VxK4nnw4q0A03Kya7QqYBwpGmK6j+MFJrIK53zCCRPgZtsjt59Zozh+s0aP3DNSW2BkJAIuFATE2eu3TtcLi+w24wggU6AYkABDVuPnXpFuAAZg8jrReHWAGQIB177LLSzg7oqtih4Dcsig6vmEECw0CyKG8BDic3VEPh4RUBCQAENePSaubY1R2LxYOxNvklDa8aEpCACBY+FLKgdcTGZjLHYvHBWuu+PoX6iQ+vmEE8XQW/8w3XJRyeDjhymOTi4OHlWKRf8JFUYU444uGQXvsgIAG+kcgesXAM6y83/fAhGtv36242+5b708i+8kmtF+XKHhxiTZA9YuDwCLSn2Xb7KebLtL7BHnqch82hTY7HZ6k9xotxiHXGTejsEQXHcvnVGnPrEU2b2XZ7pwESQTjEFwbf6kxAzgGCeOvf2H7ElGQMoDmHH8ekk4RD8snBU2FAQE4oAy7Og594S7p+BIweGeriIZJw5CzMWaRfdDV0UStqzByTPX7oVt9/nHXdc64hV41wsEjPMLyKqTucWZAtGZkyiTAc2esOZpBMs1cpY2bIW89dP4UhkYZj6pqKNcgRWFBb2lO+fAQDxBiTYse5e4k0HMaY4NrNY/QcdAgBOSJX8vjf3biNWV+vVndB3jg4GPZA0b5N+BSwNByp+sXqzmleD+UQgMTWHqN5AgEIg0TAtrdemTxzjAYxgxzLIMul23X6wYOlU4dEzVy9bQw5zNq1DahHpOGYuuZgBvGI+uQZJEAgOjOHWsjB+t7DbK9DUgIQkVnPGZmadb0ECDyIGeR4Bkl6mRnS0WhIYsf2LcLhQoOACACCfk8T+Dnu4BetJa3qe9yxkTcUj8sFHUJAjgPiPugSO6yB1B9vzUJCEppFBLPHprP2Xut2fWaQE/eSxOJYBJDR1ETbXnscUosk12THdVYPBwE5AUhiQIgCAswk3tO+As/ji2oUNIa6cDCHWOBp3tDhS4wzUZD4ZhEkIDn0idH01DkEBAyIaw5dpB9zHqgu8FqQgw3rEncXIAPft60qAXF32JRt3qnBJ7X36a1TUwPX926O2Pbiey3fwM11XBWADGsFv5n9o6m72SfnkJ2Iff98/fj4FCJo6mpxrmnLVJCdJj4wp+pRKhxVFOmeBXXwSw2S7s6glXQfqJPs3N0/+nufG0jCdbyGcT59neKYYjNIxKfPvGdtnCM8wTvpM587M8LhgOGPVwDHTAz4wofQQaqNIgGJgGOvX8CdPXVYEXKtFOcm2+k5zHI2hmx7yTXMTNHO59ziAEne9uAJCeChqaCM5eOsY8cA7PSqQw6vPWSt13rvjV1PnbXPmlfHQ7QuChBEMIQUjAnj7uCMFeI09GxW7N1+54+uuxkmRf4z77p1yuxhigZS5xYDCAKOUUTfdQrELFGOoVZqvRQLiFRQamq3CECQcPhObY5OSs4iATNFsYGRamMNxXSsdpfOUw8IGg4nSMgdE5JFhCEhIJfCPP7fVQOCmKE5Ik3wRrnUABxtkLpTJ9vnOXERH2blnqkWECE4ot42gsoiodnLN6wAmwm91kJ87anpOJWAABa/Tvso8m6ZfJf+xyLo9G/ytPduCqr/+O7x8VNNgY3qizpAROEwJnh4NQodskh20TnAgITUaEB7Lva9sANUAZI6XXlB++Q7N3KohdqKgrApZNKisPhONlcNIMJwBM1cnVMVEZDIWgShGwrW5GhU2IAKQBBOPqct+g4JqUcAwxpI/ZHpAS+Fse9l0qSARG869Ora/iA0HK7NmJ2tP5kMAASUzaLrsgA3FHvopICUljkOvZwKCQJcRCYL2ZtWbJQnGD4ZICXDMeo93MHdO3yD36Hlux/slG8hs1ec4r2IziSAgIYGJzuHuDtfVG44IGr6FzG8An1gNKdWvppqOi47ILA73wkVp3B4ICTJY37gDSbZFk3BLGFLVkBQsy6nhJgCjtEWn5oEMd6HagjIZBJBqanNbIBAHXtEwSnhODRn2EP2MPy/sTaBPWWHrN20aKYJiLe2ZANEcguJVkenvp/rrbOQcEz13XHNMByzLQsgktlDKxzoQADWHXvTOLzyclEWQMB3vteOtQKHxNZ/bi/x4kP+AzpS2YNw+Dn46FHMHt7iiWcQiexBOLz9e+xATu0GyCcKiMSaB+EI8O6xQ5k9ggQUBQSxV+iwN4QjyLfMHslyCX7EE157NHLnkyjIxziRemkEIA7VNiGWQcDTkk28VEAUjgI/XqOBGjFAgMV5E0WlJBxcFIxHTQQQ5PCqhbpDGo7ZdntX2ztz40M+7EwRQICzV9VnD2E4RJ6oDAuxso8WAQRVf9S+2isNB4vydDhlAFku+3TT4t9hBbi2eBPScBhjmpjYkHaUXkAqntaVhgPx3Il04JXSPhwQVIFe6/CKcJSCxt5OrYBUWZwTjrLgEAEEMYNV4xCBcJQHhwggoECoqsAEaXIywmq8oWjBCT7EgkzxVlSgEw4toR5nBwGJ083rLMLhJZPqg/CALJdfjDHubYPxvwoyCOGId7+mM+GAgAKj6BoEpAFrDgWkqASk5KKTcCiIaqAJcEBanuYlHMDIVNIUHJBWV9IJh5KIBpsBB8TZB/gssSlpJyrhAEelouakAPkr5psZb3QpolAnHIqiWcAUEUBQj9tq37BIOAQiUlmTMoAsFh+stW49JO2neD2EcKS5tpSzRQBBzGSNAmrMIoSjlPBOt1MEkKFQR9Qh6t5CTjjSg66kFiQBSd9yMiqpZKhFOEoKbYytYoAgh1muq1MPtQgHJuBKa0UMEOgwa6/qZqr3OxGO0sIaZ68sIIvFg7H2I87c/JBAnm85I0DJ+86AflXblCggAlkkayZBreec8j7hUMvFq2HygOCzyM54ya0obj/Zdj7/Yo25lXIh4ZBSFtuuOCBCWWQPiTHr+XZ7j3zvrHS9Mdp9vVrdYV3J1iQUyAOIUBY5EORptt1+SgFlAMN933z8trmE3juoCYeItCKNZgFEMoscquKCz/b9etZ1zz6wDFDcmP1QShQMZg6R+BVvNBsgw7qIWzwUD8RBtU1vzMb93Q5/DkH63u5tyGXH63CQmUM8nuEXyAbILovID7XgAiEa5LAKoeI0bWQFpEVICMc0gY26anZActUjKIFS2iEcKerpOHcSQIbn1r/mrgNySk44cqotd61JAHHdqRkSwiEXsLlbngwQ19EJZrbE9SUc4hJnvcCkgFQHiZLnVrJGUOUXmxyQUV/pjYHSfmzhc9XSGmpsXw0gBU8Bbzpr73/5/Hmt0cG0KU0BVYAcQOLeDp91pTtGRtYbMaqVdY46QMa6xPb9g+R282Q3sd5IlrCEBlQCMgqndJariDc+lhB8JdioGpDXAn7/IjrxregXHJa8pb6EgKCNPypQBCATg0IwGqamKEB+GHp13U1v7a3Q1vWnvu+/XT8+PjUcG+z6/lGJ8n+uVhmK+nHmK2QGzD0zsnZAzLtu7fOgVfmKsQe+ClQByLHOur1eL1dXO1Bs170C089mm6uXl92DVITBN0zaPa5aQNp1KXuOVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFTg//8JNVC78ovQAAAAAElFTkSuQmCC");background-size:100%}.markdown-body a:active,.markdown-body a:hover{opacity:.66}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #ed7373;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#ed7373}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#fdf2f2}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #ed7373;background-color:#fdf2f2}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ed7373}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]{appearance:none;-webkit-appearance:none;-moz-appearance:none;outline:none;width:16px;height:16px;border-radius:2px;background-color:transparent;box-shadow:inset 0 0 0 1px rgba(28,31,35,.3490196078);vertical-align:middle;margin:0;transform:translateY(-2px)}.markdown-body input[type=checkbox]:checked{background-color:#ed7373;background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGFyaWEtaGlkZGVuPSJ0cnVlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjQxMSA3LjMwOGExLjUgMS41IDAgMDEuMjggMi4xMDNsLTYuNSA4LjVhMS41IDEuNSAwIDAxLTIuMzc1LjAxbC0zLjUtNC41YTEuNSAxLjUgMCAxMTIuMzY4LTEuODQybDIuMzA2IDIuOTY1IDUuMzE4LTYuOTU1YTEuNSAxLjUgMCAwMTIuMTAzLS4yOHoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=");box-shadow:inset 0 0 0 1px #ed7373}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>ğŸ’¡ <strong>å‰è¨€</strong>ï¼š
å…„å¼Ÿä»¬ï¼Œä½ ä»¬çš„ AI åŠ©æ‰‹æ˜¯ä¸æ˜¯ä¹Ÿç»å¸¸â€œè®°æ€§ä¸å¥½â€æˆ–è€…â€œååº”è¿Ÿé’â€ï¼Ÿ
æ¯æ¬¡é—®ä¸ªå°é—®é¢˜ï¼Œå®ƒéƒ½è¦æŠŠå‡ ä¸‡å­—çš„æ–‡æ¡£é‡æ–°è¯»ä¸€éï¼ŒToken å“—å“—åœ°æµï¼Œå¿ƒç–¼ä¸ï¼ŸğŸ’¸
ä»Šå¤©å’±ä»¬ä¸èŠè™šçš„ï¼Œåˆ†äº«ä¸€ä¸ªæˆ‘åœ¨å®æˆ˜ä¸­ç”¨çš„â€œContext åˆ†çº§æ³¨å…¥â€æ–¹æ¡ˆã€‚
å°±åœ¨åˆšæ‰ï¼Œæˆ‘çš„ AI åŠ©ç†ï¼ˆä¹Ÿå°±æ˜¯æˆ‘æœ¬äººå˜¿å˜¿ï¼‰ç”¨è¿™å¥—æ–¹æ¡ˆï¼ŒToken å‘½ä¸­ç‡ç›´æ¥é£™åˆ°äº† <strong>70%+</strong>ï¼Œå“åº”é€Ÿåº¦å¿«å¾—é£èµ·ï¼ğŸš€</p>
</blockquote>
<h3 data-id="heading-0">ğŸ˜« ç—›ç‚¹ï¼šToken çˆ†ç‚¸ä¸â€œå¤§æµ·æé’ˆâ€</h3>
<p>åš AI Agent å¼€å‘çš„å…„å¼Ÿéƒ½çŸ¥é“ï¼ŒContext Windowï¼ˆä¸Šä¸‹æ–‡çª—å£ï¼‰è™½ç„¶è¶Šæ¥è¶Šå¤§ï¼Œä½†ä¹Ÿä¸æ˜¯æ— é™çš„ã€‚</p>
<p>å¦‚æœä½ æŠŠæŠ€æœ¯æ ˆæ–‡æ¡£ã€ç¼–ç è§„èŒƒã€é¡¹ç›®ç»“æ„ã€ç¯å¢ƒå˜é‡...ä¸€è‚¡è„‘å…¨å¡è¿› System Promptï¼š</p>
<ol>
<li><strong>è´µ</strong>ï¼šæ¯æ¬¡å¯¹è¯éƒ½åœ¨çƒ§é’±ã€‚</li>
<li><strong>æ…¢</strong>ï¼šTTFT (Time To First Token) å»¶è¿Ÿæ„Ÿäººã€‚</li>
<li><strong>ç¬¨</strong>ï¼šå¹²æ‰°ä¿¡æ¯å¤ªå¤šï¼ŒAI å®¹æ˜“å¹»è§‰ï¼ˆHallucinationï¼‰ã€‚</li>
</ol>
<p>è¿™å°±å¥½æ¯”ä½ å»å›¾ä¹¦é¦†æ‰¾ä¹¦ï¼Œç®¡ç†å‘˜ç›´æ¥æŠŠæ•´ä¸ªå›¾ä¹¦é¦†çš„ä¹¦éƒ½å †ä½ æ¡Œä¸Šï¼Œå‘Šè¯‰ä½ â€œè‡ªå·±æ‰¾â€â€”â€”è¿™è°é¡¶å¾—ä½å•Šï¼(â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»</p>
<h3 data-id="heading-1">ğŸ›  è§£æ³•ï¼šåˆ†çº§ç´¢å¼•ä¸åŠ¨æ€è·¯ç”± (The Context Router)</h3>
<p>æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼š<strong>æŒ‰éœ€åŠ è½½ (Lazy Loading)</strong>ã€‚</p>
<p>æˆ‘ä»¬æŠŠåºå¤§çš„çŸ¥è¯†åº“æ‹†è§£ï¼Œå»ºç«‹ä¸€ä¸ªè½»é‡çº§çš„ <strong><code>index.md</code> (ç´¢å¼•/è·¯ç”±)</strong>ã€‚AI å¯åŠ¨æ—¶ï¼Œåªè¯»è¿™ä¸ªç´¢å¼•ã€‚</p>
<h4 data-id="heading-2">1. æ ¸å¿ƒæ¶æ„å›¾ (SVG)</h4>
<p>æ¥çœ‹çœ‹è¿™å¥—â€œä¼˜é›…â€çš„é“¾è·¯è®¾è®¡ï¼š</p>

  
    
      
    
    
      
    
  
  
  
  
  
  User Query
  
  
  Core Router
  (index.md)
  
  
  Tech Stack (Phase 1)
  
  Coding Rules (Phase 2)
  
  Debug Logs (Phase 3)
  
  
  
  "åˆå§‹åŒ–é¡¹ç›®"
  
  "å†™ä¸ªç»„ä»¶"
  
  "æŠ¥é”™äº†"

<h4 data-id="heading-3">2. çŠ¶æ€æœºé€»è¾‘ (State Machine)</h4>
<p>æˆ‘åœ¨ <code>index.md</code> é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€æ˜“çš„çŠ¶æ€æœºã€‚AI æ‹¿åˆ°ç”¨æˆ·çš„ Prompt åï¼Œå…ˆè¿‡ä¸€éè¿™ä¸ªçŠ¶æ€æœºï¼š</p>
<ul>
<li><strong>Phase 1: åˆå§‹åŒ– (Inception)</strong>
<ul>
<li>å…³é”®è¯ï¼š<code>new</code>, <code>init</code>, <code>è„šæ‰‹æ¶</code></li>
<li>åŠ¨ä½œï¼šåŠ è½½ <code>tech_stack.md</code> (æŠ€æœ¯é€‰å‹) + <code>env_profile.md</code> (ç¯å¢ƒé…ç½®)ã€‚</li>
</ul>
</li>
<li><strong>Phase 2: æ¬ç – (Coding)</strong>
<ul>
<li>å…³é”®è¯ï¼š<code>refactor</code>, <code>ç»„ä»¶</code>, <code>å®ç°</code></li>
<li>åŠ¨ä½œï¼šåŠ è½½ <code>vibe_rules.md</code> (ç¼–ç è§„èŒƒ) + <code>AI_CODING_STANDARDS.md</code>ã€‚</li>
</ul>
</li>
<li><strong>Phase 3: å¡«å‘ (Debugging)</strong>
<ul>
<li>å…³é”®è¯ï¼š<code>bug</code>, <code>error</code>, <code>fix</code></li>
<li>åŠ¨ä½œï¼šåŠ è½½ <code>retrospective.md</code> (å†å²é”™é¢˜æœ¬)ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œ<strong>AI åªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™ï¼Œæ‰ä¼šå»è¯»å–é‚£äº›æ­»æ²‰æ­»æ²‰çš„æ–‡æ¡£ã€‚</strong> ğŸˆ
å¤§æ¦‚å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e7c42c609204e0f8c89689fff6bf94a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960980&amp;x-signature=HAAv7Jf5BfqeKowaLTs%2BAX%2Bw%2BiE%3D" alt="æˆªå±2026-01-14 09.55.29.png" loading="lazy"/>
(æ¨ä¸€æ³¢è‡ªå·±å†™çš„ä¸»é¢˜ï¼Œmarkdown å·¥å…·æ˜¯ typoraï¼Œä¸»é¢˜æ˜¯æˆ‘è‡ªå·±å†™çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Ftypora-bloom-theme.webkubor.online%2F" target="_blank" title="https://typora-bloom-theme.webkubor.online/" ref="nofollow noopener noreferrer">typora-bloom-theme.webkubor.online/</a>)</p>
<h3 data-id="heading-4">ğŸ’» å®æˆ˜æ•ˆæœï¼šCache Reads ç‹‚é£™</h3>
<p>å°±åœ¨åˆšæ‰ï¼Œæˆ‘å’Œæˆ‘çš„ AI åŠ©ç†ï¼šgeminiåŒå­¦æ¼”ç¤ºäº†ä¸€éã€‚
å½“æˆ‘ä»€ä¹ˆéƒ½ä¸å‘Šè¯‰å®ƒçš„æ—¶å€™æ—¶ï¼Œå®ƒ<strong>åª</strong>è¯»å–äº† <code>index.md</code>ã€‚</p>
<p>ç„¶åæˆ‘é—®ï¼šâ€œæˆ‘ä»¬æ€ä¹ˆå†™è¿™ç¯‡æ–‡ç« ï¼Ÿâ€
å®ƒè¯†åˆ«åˆ°æˆ‘å¤„äº <strong>Phase 1/2 æ··åˆæ€</strong>ï¼Œäºæ˜¯ç²¾å‡†åŠ è½½äº† <code>tech_stack.md</code> å’Œ <code>env_profile.md</code>ã€‚</p>
<p><strong>ç»“æœæ•°æ®äº®ççœ¼ï¼š</strong></p>
<ul>
<li><strong>Input Tokens</strong>: ~19.8k</li>
<li><strong>Cache Reads</strong>: <strong>43,706</strong> (!!!) ğŸ¯</li>
<li><strong>å‘½ä¸­ç‡</strong>: <strong>70%+</strong></li>
</ul>
<p>è¿™æ„å‘³ç€å¤§éƒ¨åˆ†çš„åŸºç¡€è®¾å®šï¼ˆPersonaã€System Promptï¼‰éƒ½è¢«å¤ç”¨äº†ï¼ŒçœŸæ­£æ¶ˆè€—çš„æ–° Token æå°‘ï¼è¿™ä¸ä»…æ˜¯çœé’±ï¼Œæ›´æ˜¯<strong>æé€Ÿå“åº”</strong>çš„ä¿è¯ã€‚</p>
<h3 data-id="heading-5">ğŸµ æ€»ç»“ï¼šç»™ AI å‡è´Ÿï¼Œå°±æ˜¯ç»™è‡ªå·±åŠ é€Ÿ</h3>
<p>å…„å¼Ÿä»¬ï¼Œåˆ«å†å½“â€œToken é˜”å°‘â€äº†ã€‚ç»™ä½ çš„ AI çŸ¥è¯†åº“åšä¸€ä¸ª <code>index.md</code>ï¼Œè®©å®ƒå­¦ä¼šâ€œæŸ¥å­—å…¸â€<strong>è€Œä¸æ˜¯</strong>â€œèƒŒå­—å…¸â€ã€‚</p>
<p>æ¯”å¦‚æˆ‘æƒ³é‡æ„ä¼˜åŒ–ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªç®€å•çš„ skills æŒ‡ä»¤ï¼Œå®ƒå»è¯»å–æˆ‘å¤–éƒ¨çš„æ–‡æ¡£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db9ebc35bab4420aa299de1df9c12f2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960980&amp;x-signature=mse7AjImOmTyD3R7JYWgiORygaU%3D" alt="æˆªå±2026-01-12 11.57.16.png" loading="lazy"/></p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</p>
<ol>
<li><strong>çœæµ</strong>ï¼šå¤§å¹…é™ä½ API è°ƒç”¨æˆæœ¬ã€‚</li>
<li><strong>ç²¾å‡†</strong>ï¼šä¸Šä¸‹æ–‡è¶ŠçŸ­ï¼ŒAI æ³¨æ„åŠ›è¶Šé›†ä¸­ï¼Œç”Ÿæˆçš„ä»£ç è´¨é‡è¶Šé«˜ã€‚</li>
<li><strong>ä¼˜é›…</strong>ï¼šè¿™æ‰æ˜¯é«˜çº§å·¥ç¨‹å¸ˆè¯¥æœ‰çš„â€œé™ç»´æ‰“å‡»â€ï¼(ğŸ˜)</li>
</ol>
<h2 data-id="heading-6">é—®é¢˜æ¥äº†ï¼Œåªæœ‰ gemini å¯ä»¥ç”¨å—ï¼Ÿ</h2>
<p>codex æ²¡æœ‰é•¿æœŸè®°å¿†åŠŸèƒ½ï¼Œå¯ä»¥ç”¨å—ï¼Ÿ
å¯ä»¥ï¼
çœ‹ä¸‹ï¼Œæˆ‘ç”¨çš„å¯æ˜¯gpt-5.2-codex high</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f18b11ec00f4afdbec6f391aee5ecbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960980&amp;x-signature=L8TksfH6S6hwxDElBbQIJuumXOg%3D" alt="æˆªå±2026-01-14 09.58.35.png" loading="lazy"/></p>
<p>ç°åœ¨è§è¯å¥‡è¿¹çš„æ—¶åˆ»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b97b03e7d7c14bfe896ed0551058e70a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960980&amp;x-signature=2T56aFKxA%2BoUqLWkXMwt%2Fyy9alU%3D" alt="æˆªå±2026-01-14 10.01.25.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">æœ€åçœ‹ä¼˜åŒ–åçš„token æ¶ˆè€—ç»“æœ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62ea7af6d30a4611b239f407eae218ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960980&amp;x-signature=B4%2Fb4jlHBlgeQYdATJrLlWWxUjU%3D" alt="æˆªå±2026-01-14 09.40.42.png" loading="lazy"/></p>
<blockquote>
<p>ä½ ä»¬çš„ Prompt éƒ½æ˜¯æ€ä¹ˆç®¡ç†çš„ï¼Ÿæ˜¯ä¸€è‚¡è„‘å¡è¿›å»ï¼Œè¿˜æ˜¯ä¹Ÿæœ‰è¿™ç§â€œéªšæ“ä½œâ€ï¼Ÿè¯„è®ºåŒºèŠèŠï¼ğŸ‘‡</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡ŒæŸ¥è¯¢æ‰©å±•]]></title>    <link>https://juejin.cn/post/7594745643891720227</link>    <guid>https://juejin.cn/post/7594745643891720227</guid>    <pubDate>2026-01-14T02:14:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594745643891720227" data-draft-id="7594731175404716072" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡ŒæŸ¥è¯¢æ‰©å±•"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-14T02:14:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡ŒæŸ¥è¯¢æ‰©å±•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:14:52.000Z" title="Wed Jan 14 2026 02:14:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬ç³»åˆ—ä»‹ç»å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„è®¾è®¡æ¨¡å¼ï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚æœ¬ç³»åˆ—ä¸€å…± 14 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 10 ç¯‡ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flevelup.gitconnected.com%2Fbuilding-the-14-key-pillars-of-agentic-ai-229e50f65986" target="_blank" title="https://levelup.gitconnected.com/building-the-14-key-pillars-of-agentic-ai-229e50f65986" ref="nofollow noopener noreferrer">Building the 14 Key Pillars of Agentic AI</a></em></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78e0848bfbff4df38d9174090b02e5e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961693&amp;x-signature=4utYD7%2Bqn%2BhwD9d2HbwohObIXnY%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–æ™ºèƒ½ä½“è§£å†³æ–¹æ¡ˆéœ€è¦è½¯ä»¶å·¥ç¨‹ç¡®ä¿ç»„ä»¶åè°ƒã€å¹¶è¡Œè¿è¡Œå¹¶ä¸ç³»ç»Ÿé«˜æ•ˆäº¤äº’ã€‚ä¾‹å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSpeculative_execution" target="_blank" title="https://en.wikipedia.org/wiki/Speculative_execution" ref="nofollow noopener noreferrer">é¢„æµ‹æ‰§è¡Œ</a>ï¼Œä¼šå°è¯•å¤„ç†å¯é¢„æµ‹æŸ¥è¯¢ä»¥<strong>é™ä½æ—¶å»¶</strong>ï¼Œæˆ–è€…è¿›è¡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.arm.com%2Fcommunity%2Farm-community-blogs%2Fb%2Fembedded-and-microcontrollers-blog%2Fposts%2Fcomparing-lock-step-redundant-execution-versus-split-lock-technologies" target="_blank" title="https://developer.arm.com/community/arm-community-blogs/b/embedded-and-microcontrollers-blog/posts/comparing-lock-step-redundant-execution-versus-split-lock-technologies" ref="nofollow noopener noreferrer">å†—ä½™æ‰§è¡Œ</a>ï¼Œå³<strong>å¯¹åŒä¸€æ™ºèƒ½ä½“é‡å¤æ‰§è¡Œå¤šæ¬¡</strong>ä»¥é˜²å•ç‚¹æ•…éšœã€‚å…¶ä»–å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¹¶è¡Œå·¥å…·</strong>ï¼šæ™ºèƒ½ä½“åŒæ—¶æ‰§è¡Œç‹¬ç«‹ API è°ƒç”¨ä»¥éšè— I/O æ—¶å»¶ã€‚</li>
<li><strong>å±‚çº§æ™ºèƒ½ä½“</strong>ï¼šç®¡ç†è€…å°†ä»»åŠ¡æ‹†åˆ†ä¸ºç”±æ‰§è¡Œæ™ºèƒ½ä½“å¤„ç†çš„å°æ­¥éª¤ã€‚</li>
<li><strong>ç«äº‰æ€§æ™ºèƒ½ä½“ç»„åˆ</strong>ï¼šå¤šä¸ªæ™ºèƒ½ä½“æå‡ºç­”æ¡ˆï¼Œç³»ç»Ÿé€‰å‡ºæœ€ä½³ã€‚</li>
<li><strong>å†—ä½™æ‰§è¡Œ</strong>ï¼šå³ä¸¤ä¸ªæˆ–å¤šä¸ªæ™ºèƒ½ä½“è§£å†³åŒä¸€ä»»åŠ¡ä»¥æ£€æµ‹é”™è¯¯å¹¶æé«˜å¯é æ€§ã€‚</li>
<li><strong>å¹¶è¡Œæ£€ç´¢å’Œæ··åˆæ£€ç´¢</strong>ï¼šå¤šç§æ£€ç´¢ç­–ç•¥ååŒè¿è¡Œä»¥æå‡ä¸Šä¸‹æ–‡è´¨é‡ã€‚</li>
<li><strong>å¤šè·³æ£€ç´¢</strong>ï¼šæ™ºèƒ½ä½“é€šè¿‡è¿­ä»£æ£€ç´¢æ­¥éª¤æ”¶é›†æ›´æ·±å…¥ã€æ›´ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ¨¡å¼ã€‚</p>
<p>æœ¬ç³»åˆ—å°†å®ç°æœ€å¸¸ç”¨æ™ºèƒ½ä½“æ¨¡å¼èƒŒåçš„åŸºç¡€æ¦‚å¿µï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>æ‰€æœ‰ç†è®ºå’Œä»£ç éƒ½åœ¨ GitHub ä»“åº“é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFareedKhan-dev%2Fagentic-parallelism" target="_blank" title="https://github.com/FareedKhan-dev/agentic-parallelism" ref="nofollow noopener noreferrer">ğŸ¤– Agentic Parallelism: A Practical Guide ğŸš€</a></p>
<p>ä»£ç åº“ç»„ç»‡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">agentic-parallelism/
    â”œâ”€â”€ <span class="hljs-number">01</span>_parallel_tool_use.ipynb
    â”œâ”€â”€ <span class="hljs-number">02</span>_parallel_hypothesis.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">06</span>_competitive_agent_ensembles.ipynb
    â”œâ”€â”€ <span class="hljs-number">07</span>_agent_assembly_line.ipynb
    â”œâ”€â”€ <span class="hljs-number">08</span>_decentralized_blackboard.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">13</span>_parallel_context_preprocessing.ipynb
    â””â”€â”€ <span class="hljs-number">14</span>_parallel_multi_hop_retrieval.ipynb
</code></pre>
<hr/>
<h2 data-id="heading-0">å¹¶è¡ŒæŸ¥è¯¢æ‰©å±•ä»¥æœ€å¤§åŒ–å¬å›ç‡</h2>
<p>åœ¨è‡ªä¸»å¼ RAG æ¨¡å¼ä¸­æœ€å¸¸è§çš„é—®é¢˜æ˜¯è¯æ±‡ä¸åŒ¹é…ï¼Œå› ä¸ºç”¨æˆ·å¾ˆå°‘çŸ¥é“ä¸“ä¸šçŸ¥è¯†åº“ä¸­ä½¿ç”¨çš„ç²¾ç¡®å…³é”®è¯æˆ–æœ¯è¯­ã€‚</p>
<p>åƒâ€œå¦‚ä½•ä½¿æ¨¡å‹æ›´å¤§æ›´å¿«â€è¿™æ ·çš„ç®€å•æŸ¥è¯¢å¯èƒ½æ— æ³•æ£€ç´¢åˆ°åŒ…å«â€œæ··åˆä¸“å®¶ï¼ˆMixture of Expertsï¼‰â€å’Œâ€œå¿«é€Ÿæ³¨æ„åŠ›ï¼ˆFlashAttentionï¼‰â€ç­‰æŠ€æœ¯æœ¯è¯­çš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de2f7c665d5b430681f6278e6e52a16f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961693&amp;x-signature=n6i7NPywWIDPUrGFxlpqcpFB8Zo%3D" alt="å¹¶è¡ŒæŸ¥è¯¢æ‰©å±•" loading="lazy"/></p>
<p><strong>å¹¶è¡ŒæŸ¥è¯¢æ‰©å±•ï¼ˆParallel Query Expansionï¼‰</strong> å°±æ˜¯ä¸ºè§£å†³è¿™ç§é—®é¢˜æå‡ºçš„æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œä¸åŒäºç›´æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯é¦–å…ˆé€šè¿‡ LLM æ¥æ„æ€å¤šç§ç±»ã€å¤šæ ·åŒ–çš„æœç´¢æ–¹å¼ï¼Œä»¥è·å–ç›¸åŒçš„åº•å±‚ä¿¡æ¯ã€‚è¿™ä¸ªâ€œé¢„æ£€ç´¢â€æ­¥éª¤å¯ä»¥å¹¶è¡Œç”Ÿæˆä¸€ç³»åˆ—æœç´¢æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š</p>
<ol>
<li>å›ç­”è¯¥é—®é¢˜çš„å‡è®¾æ€§æ–‡æ¡£ï¼ˆHyDEï¼Œhypothetical documentï¼‰ã€‚</li>
<li>åˆ†è§£å‡ºè‹¥å¹²å­é—®é¢˜ã€‚</li>
<li>ä¸€ç»„æå–çš„å…³é”®è¯å’Œå®ä½“ã€‚</li>
</ol>
<p>é€šè¿‡å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰è¿™äº›æŸ¥è¯¢å¹¶èåˆç»“æœï¼Œå¯ä»¥æ˜¾è‘—æé«˜æ£€ç´¢æ­¥éª¤çš„å¬å›ç‡ï¼Œç”¨ä¸åŒæœ¯è¯­ç¡®ä¿æ‰¾åˆ°æ‰€æœ‰ç›¸å…³è¯æ®ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨åŸºäºè¿™ç§æ¨¡å¼æ„å»ºå¹¶å’Œç®€å• RAG ç³»ç»Ÿè¿›è¡Œæ¯”è¾ƒï¼Œä»¥è¯æ˜å…¶äº§ç”Ÿçš„æœ€ç»ˆç­”æ¡ˆæ›´åŠ å®Œæ•´å’Œå‡†ç¡®ã€‚</p>
<p>é¦–å…ˆå®šä¹‰æ„å»ºæŸ¥è¯¢è¾“å‡ºçš„ Pydantic æ¨¡å‹ï¼Œä»è€Œä½¿å¾— LLM å¯ä»¥åœ¨ä¸€æ¬¡å¯é è°ƒç”¨ä¸­ç”Ÿæˆæ‰€æœ‰æœŸæœ›çš„æŸ¥è¯¢å˜ä½“ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.pydantic_v1 <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExpandedQueries</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""Pydantic æ¨¡å‹å®šä¹‰äº†ä¸€ç»„ä¸åŒçš„æ‰©å±•æŸ¥è¯¢ï¼Œä»¥æé«˜æ£€ç´¢å¬å›ç‡"""</span>
    <span class="hljs-comment"># ç”Ÿæˆçš„å‡è®¾æ–‡æ¡£æ®µè½ï¼Œåœ¨è¯­ä¹‰ä¸Šä¸å¯èƒ½çš„ç­”æ¡ˆç›¸ä¼¼</span>
    hypothetical_document: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"A generated, paragraph-length hypothetical document that directly answers the user's question, which will be used for semantic search."</span>, alias=<span class="hljs-string">"hyde_query"</span>)
    <span class="hljs-comment"># å°†åŸå§‹æŸ¥è¯¢åˆ†è§£ä¸ºæ›´å°ã€æ›´å…·ä½“çš„é—®é¢˜åˆ—è¡¨</span>
    sub_questions: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"A list of 2-3 smaller, more specific questions that break down the original query."</span>)
    <span class="hljs-comment"># ç”¨äºç²¾ç¡®è¯æ³•æœç´¢çš„æ ¸å¿ƒå…³é”®å­—å’Œå®ä½“åˆ—è¡¨</span>
    keywords: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"A list of 3-5 core keywords and entities extracted from the user's query."</span>)
</code></pre>
<p>é€šè¿‡æŒ‡ç¤º LLM å¡«å……è¿™ä¸ªç»“æ„åŒ–å¯¹è±¡ï¼Œä»è€Œç¡®ä¿å¾—åˆ°å¤šæ ·åŒ–çš„æœç´¢ç­–ç•¥ç»„åˆï¼ŒåŒ…æ‹¬è¯­ä¹‰ç­–ç•¥ï¼ˆ<code>hypothetical_document</code>ï¼‰ã€åˆ†è§£ç­–ç•¥ï¼ˆ<code>sub_questions</code>ï¼‰å’Œè¯æ±‡ç­–ç•¥ï¼ˆ<code>keywords</code>ï¼‰ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ¥è‡ªä¸€æ¬¡é«˜æ•ˆ LLM è°ƒç”¨ã€‚</p>
<p>æ¥ä¸‹æ¥æ„å»ºä¸€ä¸ª <code>LangGraph</code> å›¾çš„ RAG ç³»ç»Ÿï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æŸ¥è¯¢æ‰©å±•ä»£ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span>
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGGraphState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    original_question: <span class="hljs-built_in">str</span>
    expanded_queries: <span class="hljs-type">Optional</span>[ExpandedQueries]
    retrieved_docs: <span class="hljs-type">List</span>[Document]
    final_answer: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># èŠ‚ç‚¹ 1: æŸ¥è¯¢æ‰©å±•ä»£ç†</span>
query_expansion_prompt = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"You are a query expansion specialist. Your goal is to transform a user's question into a diverse set of search queries to maximize retrieval recall. Generate a hypothetical document, sub-questions, and keywords."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"Please expand the following question: {question}"</span>)
])

<span class="hljs-comment"># è¯¥é“¾å°†æç¤ºç¬¦é€šè¿‡ç®¡é“é“¾æ¥åˆ° LLMï¼Œå¹¶åŸºäº Pydantic æ¨¡å‹æ„å»ºå…¶è¾“å‡º</span>
query_expansion_chain = query_expansion_prompt | llm.with_structured_output(ExpandedQueries)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">query_expansion_node</span>(<span class="hljs-params">state: RAGGraphState</span>):
    <span class="hljs-string">"""å›¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼šè·å–åŸå§‹é—®é¢˜å¹¶ç”Ÿæˆä¸€ç»„æ‰©å±•æŸ¥è¯¢"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- [Expander] Generating parallel queries... ---"</span>)
    expanded_queries = query_expansion_chain.invoke({<span class="hljs-string">"question"</span>: state[<span class="hljs-string">'original_question'</span>]})
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"expanded_queries"</span>: expanded_queries}
</code></pre>
<p><code>query_expansion_node</code> æ˜¯é«˜çº§æ£€ç´¢è¿‡ç¨‹ä¸­çš„"æ€è€ƒ"æ­¥éª¤ï¼Œè¯¥èŠ‚ç‚¹æ¥æ”¶ç”¨æˆ·åŸå§‹æŸ¥è¯¢ï¼Œä¸ç«‹å³è¿›è¡Œæœç´¢ï¼Œè€Œæ˜¯å…ˆç”¨ LLM æ¥å¤´è„‘é£æš´å‡ºä¸€å¥—æ›´å¼ºå¤§çš„æŸ¥è¯¢é›†ï¼Œä¸ºæ›´å…¨é¢çš„æœç´¢åšå¥½å‡†å¤‡ã€‚</p>
<p>ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°†å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰è¿™äº›ç”Ÿæˆçš„æŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieval_node</span>(<span class="hljs-params">state: RAGGraphState</span>):
    <span class="hljs-string">"""ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼šæ¥å—ä¸”å¹¶è¡Œæ‰§è¡Œæ‰©å±•æŸ¥è¯¢"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- [Retriever] Executing parallel searches... ---"</span>)
    
    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰è¦æ‰§è¡Œçš„æŸ¥è¯¢åˆ—è¡¨</span>
    all_queries = []
    expanded = state[<span class="hljs-string">'expanded_queries'</span>]
    all_queries.append(expanded.hypothetical_document)
    all_queries.extend(expanded.sub_questions)
    all_queries.extend(expanded.keywords)
    
    all_docs = []

    <span class="hljs-comment"># ç”¨ ThreadPoolExecutor å¹¶å‘è¿è¡Œæ‰€æœ‰æ£€ç´¢å™¨è°ƒç”¨</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">5</span>) <span class="hljs-keyword">as</span> executor:
        results = executor.<span class="hljs-built_in">map</span>(retriever.invoke, all_queries)
        <span class="hljs-keyword">for</span> docs <span class="hljs-keyword">in</span> results:
            all_docs.extend(docs)
    
    <span class="hljs-comment"># æœ€åä¸€æ­¥æ˜¯å¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ é™¤é‡å¤æ•°æ®ï¼Œä»¥åˆ›å»ºå¹²å‡€ã€å”¯ä¸€çš„ä¸Šä¸‹æ–‡</span>
    unique_docs = {doc.page_content: doc <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> all_docs}.values()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Retriever] Found <span class="hljs-subst">{<span class="hljs-built_in">len</span>(unique_docs)}</span> unique documents from <span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_queries)}</span> queries. ---"</span>)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"retrieved_docs"</span>: <span class="hljs-built_in">list</span>(unique_docs)}
</code></pre>
<p><code>retrieval_node</code> æ˜¯æ‰§è¡Œå¹¶è¡ŒæŸ¥è¯¢çš„èŠ‚ç‚¹ï¼Œæ ¸å¿ƒæ˜¯ <code>ThreadPoolExecutor</code> å’Œ <code>executor.map</code>ï¼Œå°† 7-9 ä¸ªæ‰©å±•æŸ¥è¯¢åˆ—è¡¨åŒæ—¶åˆ†æ´¾åˆ°å‘é‡å­˜å‚¨ä¸­ã€‚è¿™ç§"åˆ†æ•£-æ”¶é›†"çš„æ–¹æ³•ç¡®ä¿æˆ‘ä»¬èƒ½å¤Ÿè·å¾—æ‰€æœ‰æœç´¢è§†è§’çš„ç»¼åˆæ•ˆç›Šï¼Œè€Œä¸ä¼šå¢åŠ çº¿æ€§æ—¶å»¶ã€‚</p>
<p>æœ€åç»„è£…å›¾ï¼ŒæŒ‰é¡ºåºè¿æ¥æ‰©å±•ã€æ£€ç´¢å¹¶æœ€ç»ˆç”ŸæˆèŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

workflow = StateGraph(RAGGraphState)

<span class="hljs-comment"># å°†èŠ‚ç‚¹åŠ å…¥å›¾</span>
workflow.add_node(<span class="hljs-string">"expand_queries"</span>, query_expansion_node)
workflow.add_node(<span class="hljs-string">"retrieve_docs"</span>, retrieval_node)
workflow.add_node(<span class="hljs-string">"generate_answer"</span>, generation_node)

<span class="hljs-comment"># å®šä¹‰çº¿æ€§å·¥ä½œæµ</span>
workflow.set_entry_point(<span class="hljs-string">"expand_queries"</span>)
workflow.add_edge(<span class="hljs-string">"expand_queries"</span>, <span class="hljs-string">"retrieve_docs"</span>)
workflow.add_edge(<span class="hljs-string">"retrieve_docs"</span>, <span class="hljs-string">"generate_answer"</span>)
workflow.add_edge(<span class="hljs-string">"generate_answer"</span>, END)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4821774720134b6394c79309220ea0dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961693&amp;x-signature=zzWwsHhYAq0KVAFGUXJ5qHb4EhM%3D" alt="å¹¶è¡ŒæŸ¥è¯¢æ‰©å±•" loading="lazy"/></p>
<p>ç°åœ¨è¿›è¡Œæœ€ç»ˆå¯¹æ¯”åˆ†æï¼Œå‘ç®€å• RAG å’Œé«˜çº§ RAG ç³»ç»Ÿæä¾›åŒä¸€ä¸ªæ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ¯”è¾ƒæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡è´¨é‡å’Œæœ€ç»ˆç­”æ¡ˆçš„è´¨é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨æˆ·æŸ¥è¯¢ä½¿ç”¨ä¸€èˆ¬æœ¯è¯­ï¼ˆâ€œbig and fastâ€ï¼‰è€Œä¸æ˜¯çŸ¥è¯†åº“ä¸­çš„æŠ€æœ¯æœ¯è¯­</span>
user_query = <span class="hljs-string">"How do modern AI systems get so big and fast at the same time? I've heard about attention but I'm not sure how it's optimized."</span>

<span class="hljs-comment"># --- æ‰§è¡Œç®€å• RAG ç³»ç»Ÿ ---</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"--- [SIMPLE RAG] Retrieving documents..."</span>)
<span class="hljs-comment"># æ‹¦æˆªæ£€ç´¢æ­¥éª¤ä»¥æ£€æŸ¥ç®€å•ç³»ç»Ÿæ‰¾åˆ°çš„å†…å®¹</span>
simple_retrieved_docs = retriever.invoke(user_query)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [SIMPLE RAG] Documents Retrieved: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(simple_retrieved_docs)}</span>"</span>)
simple_rag_answer = simple_rag_chain.invoke(user_query)

<span class="hljs-comment"># --- æ‰§è¡Œé«˜çº§ RAG ç³»ç»Ÿ ---</span>
<span class="hljs-comment"># --- æœ€ç»ˆåˆ†æ ---</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"            RETRIEVED DOCUMENTS COMPARISON"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n--- Simple RAG Retrieved <span class="hljs-subst">{<span class="hljs-built_in">len</span>(simple_retrieved_docs)}</span> document(s) ---"</span>)
<span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(simple_retrieved_docs):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>. <span class="hljs-subst">{doc.page_content}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n--- Advanced RAG Retrieved <span class="hljs-subst">{<span class="hljs-built_in">len</span>(advanced_rag_result[<span class="hljs-string">'retrieved_docs'</span>])}</span> document(s) ---"</span>)
<span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(advanced_rag_result[<span class="hljs-string">'retrieved_docs'</span>]):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>. <span class="hljs-subst">{doc.page_content}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"                     ACCURACY &amp; QUALITY ANALYSIS"</span>)
</code></pre>
<p>è¾“å‡ºç»“æœä¸ºâ€¦â€¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#### è¾“å‡º ####</span>
============================================================
            RETRIEVED DOCUMENTS COMPARISON
============================================================

--- Simple RAG Retrieved <span class="hljs-number">1</span> document(s) ---
<span class="hljs-number">1.</span> **Multi-headed Attention Mechanism**: The core component of the Transformer architecture <span class="hljs-keyword">is</span> the multi-headed self-attention mechanism...
--- Advanced RAG Retrieved <span class="hljs-number">3</span> document(s) ---
<span class="hljs-number">1.</span> **FlashAttention Optimization**: ...FlashAttention <span class="hljs-keyword">is</span> an I/O-aware algorithm that reorders the computation to reduce the number of read/write operations...
<span class="hljs-number">2.</span> **Mixture of Experts (MoE) Layers**: ...a router network dynamically selects a small subset of <span class="hljs-string">'expert'</span> sub-networks to process each <span class="hljs-built_in">input</span> token...
<span class="hljs-number">3.</span> **Multi-headed Attention Mechanism**: The core component of the Transformer architecture...
</code></pre>
<p>åˆ†æå¾—å‡ºäº†ä¸€äº›ç»“è®ºâ€¦â€¦</p>
<ol>
<li>é«˜çº§ç³»ç»Ÿä¹‹æ‰€ä»¥æˆåŠŸï¼Œæ˜¯å› ä¸º <code>query_expansion_node</code> å¼¥åˆäº†è¯­ä¹‰é¸¿æ²Ÿã€‚å…¶å‡è®¾æ–‡æ¡£å’Œç›®æ ‡å­æŸ¥è¯¢å¼•å…¥äº†ç¼ºå¤±çš„æŠ€æœ¯æœ¯è¯­ <code>Mixture of Experts</code>ã€<code>FlashAttention</code>ã€<code>scaling</code>ã€<code>optimization</code>ï¼Œä»è€Œä½¿å¾—æ£€ç´¢åˆ°é¢å¤–çš„å…³é”®æ–‡æ¡£æˆä¸ºå¯èƒ½ã€‚</li>
<li>æ£€ç´¢åˆ°çš„æ–‡æ¡£å¬å›ç‡æœ‰æ‰€æå‡ã€‚é€šè¿‡æ•è·æ‰€æœ‰ä¸‰ä¸ªç›¸å…³æ–‡æ¡£ï¼Œé«˜çº§ç³»ç»Ÿæä¾›äº†å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œä½¿ç”Ÿæˆå™¨èƒ½å¤Ÿäº§å‡ºå…¨é¢ã€æŠ€æœ¯å‡†ç¡®ä¸”è´¨é‡æ›´é«˜çš„ç­”æ¡ˆã€‚</li>
</ol>
<hr/>
<blockquote>
<p>Hiï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œä¸€åå…¼å…·æŠ€æœ¯æ·±åº¦ä¸ç®¡ç†è§†é‡çš„æŠ€æœ¯ç®¡ç†è€…ã€‚æ›¾å°±èŒäº Motorolaï¼Œç°ä»»èŒäº Mavenirï¼Œå¤šå¹´å¸¦é¢†æŠ€æœ¯å›¢é˜Ÿï¼Œèšç„¦åç«¯æ¶æ„ä¸äº‘åŸç”Ÿï¼ŒæŒç»­å…³æ³¨ AI ç­‰å‰æ²¿æ–¹å‘ï¼Œä¹Ÿå…³æ³¨äººçš„æˆé•¿ï¼Œç¬ƒä¿¡æŒç»­å­¦ä¹ çš„åŠ›é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å®è·µä¸æ€è€ƒã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDeepNoMindã€ï¼Œæ˜Ÿæ ‡ä¸è¿·è·¯ã€‚ä¹Ÿæ¬¢è¿è®¿é—®ç‹¬ç«‹ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepnomind.com" title="https://www.deepnomind.com" target="_blank" ref="nofollow noopener noreferrer">www.DeepNoMind.com</a>ï¼Œä¸€èµ·äº¤æµæˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå†—ä½™æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7594739292200747043</link>    <guid>https://juejin.cn/post/7594739292200747043</guid>    <pubDate>2026-01-14T02:16:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594739292200747043" data-draft-id="7594731175404765224" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå†—ä½™æ‰§è¡Œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-14T02:16:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå†—ä½™æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:16:51.000Z" title="Wed Jan 14 2026 02:16:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬ç³»åˆ—ä»‹ç»å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„è®¾è®¡æ¨¡å¼ï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚æœ¬ç³»åˆ—ä¸€å…± 14 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 9 ç¯‡ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flevelup.gitconnected.com%2Fbuilding-the-14-key-pillars-of-agentic-ai-229e50f65986" target="_blank" title="https://levelup.gitconnected.com/building-the-14-key-pillars-of-agentic-ai-229e50f65986" ref="nofollow noopener noreferrer">Building the 14 Key Pillars of Agentic AI</a></em></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e658c78f3d745bca32c86476134ef1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961811&amp;x-signature=DAiiRke2O%2Bs90v0ctOI%2BXuwLODA%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–æ™ºèƒ½ä½“è§£å†³æ–¹æ¡ˆéœ€è¦è½¯ä»¶å·¥ç¨‹ç¡®ä¿ç»„ä»¶åè°ƒã€å¹¶è¡Œè¿è¡Œå¹¶ä¸ç³»ç»Ÿé«˜æ•ˆäº¤äº’ã€‚ä¾‹å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSpeculative_execution" target="_blank" title="https://en.wikipedia.org/wiki/Speculative_execution" ref="nofollow noopener noreferrer">é¢„æµ‹æ‰§è¡Œ</a>ï¼Œä¼šå°è¯•å¤„ç†å¯é¢„æµ‹æŸ¥è¯¢ä»¥<strong>é™ä½æ—¶å»¶</strong>ï¼Œæˆ–è€…è¿›è¡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.arm.com%2Fcommunity%2Farm-community-blogs%2Fb%2Fembedded-and-microcontrollers-blog%2Fposts%2Fcomparing-lock-step-redundant-execution-versus-split-lock-technologies" target="_blank" title="https://developer.arm.com/community/arm-community-blogs/b/embedded-and-microcontrollers-blog/posts/comparing-lock-step-redundant-execution-versus-split-lock-technologies" ref="nofollow noopener noreferrer">å†—ä½™æ‰§è¡Œ</a>ï¼Œå³<strong>å¯¹åŒä¸€æ™ºèƒ½ä½“é‡å¤æ‰§è¡Œå¤šæ¬¡</strong>ä»¥é˜²å•ç‚¹æ•…éšœã€‚å…¶ä»–å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¹¶è¡Œå·¥å…·</strong>ï¼šæ™ºèƒ½ä½“åŒæ—¶æ‰§è¡Œç‹¬ç«‹ API è°ƒç”¨ä»¥éšè— I/O æ—¶å»¶ã€‚</li>
<li><strong>å±‚çº§æ™ºèƒ½ä½“</strong>ï¼šç®¡ç†è€…å°†ä»»åŠ¡æ‹†åˆ†ä¸ºç”±æ‰§è¡Œæ™ºèƒ½ä½“å¤„ç†çš„å°æ­¥éª¤ã€‚</li>
<li><strong>ç«äº‰æ€§æ™ºèƒ½ä½“ç»„åˆ</strong>ï¼šå¤šä¸ªæ™ºèƒ½ä½“æå‡ºç­”æ¡ˆï¼Œç³»ç»Ÿé€‰å‡ºæœ€ä½³ã€‚</li>
<li><strong>å†—ä½™æ‰§è¡Œ</strong>ï¼šå³ä¸¤ä¸ªæˆ–å¤šä¸ªæ™ºèƒ½ä½“è§£å†³åŒä¸€ä»»åŠ¡ä»¥æ£€æµ‹é”™è¯¯å¹¶æé«˜å¯é æ€§ã€‚</li>
<li><strong>å¹¶è¡Œæ£€ç´¢å’Œæ··åˆæ£€ç´¢</strong>ï¼šå¤šç§æ£€ç´¢ç­–ç•¥ååŒè¿è¡Œä»¥æå‡ä¸Šä¸‹æ–‡è´¨é‡ã€‚</li>
<li><strong>å¤šè·³æ£€ç´¢</strong>ï¼šæ™ºèƒ½ä½“é€šè¿‡è¿­ä»£æ£€ç´¢æ­¥éª¤æ”¶é›†æ›´æ·±å…¥ã€æ›´ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ¨¡å¼ã€‚</p>
<p>æœ¬ç³»åˆ—å°†å®ç°æœ€å¸¸ç”¨æ™ºèƒ½ä½“æ¨¡å¼èƒŒåçš„åŸºç¡€æ¦‚å¿µï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>æ‰€æœ‰ç†è®ºå’Œä»£ç éƒ½åœ¨ GitHub ä»“åº“é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFareedKhan-dev%2Fagentic-parallelism" target="_blank" title="https://github.com/FareedKhan-dev/agentic-parallelism" ref="nofollow noopener noreferrer">ğŸ¤– Agentic Parallelism: A Practical Guide ğŸš€</a></p>
<p>ä»£ç åº“ç»„ç»‡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">agentic-parallelism/
    â”œâ”€â”€ <span class="hljs-number">01</span>_parallel_tool_use.ipynb
    â”œâ”€â”€ <span class="hljs-number">02</span>_parallel_hypothesis.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">06</span>_competitive_agent_ensembles.ipynb
    â”œâ”€â”€ <span class="hljs-number">07</span>_agent_assembly_line.ipynb
    â”œâ”€â”€ <span class="hljs-number">08</span>_decentralized_blackboard.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">13</span>_parallel_context_preprocessing.ipynb
    â””â”€â”€ <span class="hljs-number">14</span>_parallel_multi_hop_retrieval.ipynb
</code></pre>
<hr/>
<h2 data-id="heading-0">å†—ä½™æ‰§è¡Œä»¥å®ç°å®¹é”™æ€§</h2>
<p>å½“å…¬å¸éƒ¨ç½²ä»£ç†è§£å†³æ–¹æ¡ˆæ—¶ï¼Œç¡®å®ä¼šé¢ä¸´ä¸€äº›é—®é¢˜ï¼Œå¦‚ API è¶…æ—¶ã€æ¨¡å‹å´©æºƒå’Œç½‘ç»œä¸­æ–­ç­‰ã€‚ä¹‹å‰çš„æ¨¡å¼ä¸»è¦å…³æ³¨åœ¨ç†æƒ³æ¡ä»¶ä¸‹æé«˜ä»£ç†çš„è´¨é‡å’Œé€Ÿåº¦ï¼Œè€Œå†—ä½™æ‰§è¡Œæ¨¡å¼ä¸“æ³¨äºç¡®ä¿ç³»ç»Ÿå³ä½¿åœ¨ä¸åˆ©æ¡ä»¶ä¸‹ä¹Ÿèƒ½ä¿æŒå¯é å’Œé«˜æ•ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42c8c9002ff74e41876373eec1253fce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961811&amp;x-signature=j3UOvE7edx0UO5Yz%2Bb8G6x3uuV8%3D" alt="å†—ä½™æ‰§è¡Œ" loading="lazy"/></p>
<p>æ¦‚å¿µå¾ˆç®€å•ï¼šå¯¹äºå…³é”®ä¸”å¯èƒ½ä¸å¯é çš„æ­¥éª¤ï¼Œå¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªæˆ–å¤šä¸ªç›¸åŒçš„æ™ºèƒ½ä½“ï¼Œç³»ç»Ÿéšåä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„æ™ºèƒ½ä½“ç»“æœå¹¶å–æ¶ˆå…¶ä½™çš„ï¼Œè¿™ç§æŠ€æœ¯æä¾›äº†é’ˆå¯¹é—´æ­‡æ€§æ•…éšœå’Œä¸å¯é¢„æµ‹æ€§çš„é˜²å¾¡ã€‚</p>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªä¾èµ–äºæ¨¡æ‹Ÿä¸å¯é æ‰§è¡Œçš„æµ‹è¯•å·¥å…·çš„ç®€å•æ™ºèƒ½ä½“ï¼Œç„¶åæ¯”è¾ƒå†—ä½™æ‰§è¡Œå’Œæ— å†—ä½™æ‰§è¡Œï¼Œä»¥å±•ç¤ºé€Ÿåº¦ï¼ˆæ—¶å»¶ä¸€è‡´æ€§ï¼‰å’ŒæˆåŠŸç‡ï¼ˆæœ‰æ•ˆå‡†ç¡®ç‡ï¼‰æ–¹é¢çš„æ˜¾è‘—å’Œå¯è¡¡é‡çš„æ”¹è¿›ã€‚</p>
<p>é¦–å…ˆéœ€è¦åˆ›å»ºæ¨¡æ‹Ÿä¸å¯é æ€§çš„å·¥å…·ï¼Œè¿™æ˜¯æ¨¡æ‹Ÿæµ‹è¯•çš„æ ¸å¿ƒã€‚æµ‹è¯•å·¥å…·å¯èƒ½ä¼šå¤±è´¥ï¼Œä¹Ÿå¯èƒ½ä¼šæ‰§è¡Œå¾—éå¸¸æ…¢ï¼Œæˆ–è€…ç‰¹åˆ«å¿«ï¼Œä»¥æ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­ç½‘ç»œä¾èµ–çš„ä¸ç¡®å®šæ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> random

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_critical_data</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ä»å¤–éƒ¨æœåŠ¡è·å–å…³é”®æ•°æ®çš„æ¨¡æ‹Ÿå·¥å…·ï¼Œè¯¥æœåŠ¡å¯èƒ½å¾ˆæ…¢æˆ–é—´æ­‡æ€§å¤±è´¥"""</span>
    <span class="hljs-comment"># ä¸ºå·¥å…·è°ƒç”¨çš„æ¯ä¸ªå®ä¾‹åˆ†é…ä¸€ä¸ªéšæœº IDï¼Œä»¥ä¾¿æ¸…æ™°è®°å½•æ—¥å¿—</span>
    instance_id = random.randint(<span class="hljs-number">1000</span>, <span class="hljs-number">9999</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Tool Instance <span class="hljs-subst">{instance_id}</span>] Attempting to fetch data for query: '<span class="hljs-subst">{query}</span>' ---"</span>)
    
    <span class="hljs-comment"># ç”¨éšæœºå€¼æ¥æ¨¡æ‹Ÿä¸å¯é æ€§</span>
    roll = random.random()
    <span class="hljs-keyword">if</span> roll &lt; <span class="hljs-number">0.20</span>: <span class="hljs-comment"># 20% æ¦‚ç‡å®Œå…¨å¤±è´¥</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Tool Instance <span class="hljs-subst">{instance_id}</span>] FAILED: Network connection error. ---"</span>)
        <span class="hljs-keyword">raise</span> ConnectionError(<span class="hljs-string">"Failed to connect to the external service."</span>)
    <span class="hljs-keyword">elif</span> roll &lt; <span class="hljs-number">0.30</span>: <span class="hljs-comment"># 10% æ¦‚ç‡å‡ºç°é•¿å°¾æ—¶å»¶</span>
        slow_duration = random.uniform(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Tool Instance <span class="hljs-subst">{instance_id}</span>] SLOW: Experiencing high latency. Will take <span class="hljs-subst">{slow_duration:<span class="hljs-number">.2</span>f}</span>s. ---"</span>)
        time.sleep(slow_duration)
    <span class="hljs-keyword">else</span>: <span class="hljs-comment"># 70% æ¦‚ç‡è¿è¡Œæ­£å¸¸</span>
        fast_duration = random.uniform(<span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Tool Instance <span class="hljs-subst">{instance_id}</span>] FAST: Executing normally. Will take <span class="hljs-subst">{fast_duration:<span class="hljs-number">.2</span>f}</span>s. ---"</span>)
        time.sleep(fast_duration)
    
    result = <span class="hljs-string">f"Data for '<span class="hljs-subst">{query}</span>' successfully retrieved by instance <span class="hljs-subst">{instance_id}</span>."</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Tool Instance <span class="hljs-subst">{instance_id}</span>] SUCCESS: <span class="hljs-subst">{result}</span> ---"</span>)
    <span class="hljs-keyword">return</span> result
</code></pre>
<p><code>get_critical_data</code> å·¥å…·ç”¨æ¥æ§åˆ¶å®éªŒï¼Œéšæœºçš„ <code>roll</code> å’Œ <code>time.sleep</code> è°ƒç”¨æ¨¡æ‹Ÿåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸¤ç§æœ€å¸¸è§é—®é¢˜ï¼ˆç¬æ—¶æ•…éšœ <code>ConnectionError</code> å’Œä¸å¯é¢„æµ‹æ—¶å»¶ï¼‰ã€‚è¯¥å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ¸…æ™°ã€å¯é‡å¤çš„é—®é¢˜æ¼”ç¤ºã€‚</p>
<p>ç°åœ¨æ„å»ºå®¹é”™å›¾ï¼Œæ¨¡å¼æ ¸å¿ƒæ˜¯ä½¿ç”¨ <code>ThreadPoolExecutor</code> åè°ƒå†—ä½™æ‰§è¡Œçš„èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, <span class="hljs-type">Optional</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RedundantState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    <span class="hljs-built_in">input</span>: <span class="hljs-built_in">str</span>
    result: <span class="hljs-type">Optional</span>[<span class="hljs-type">Any</span>]
    error: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]
    performance_log: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">redundant_executor_node</span>(<span class="hljs-params">state: RedundantState</span>):
    <span class="hljs-string">"""æ¨¡å¼çš„æ ¸å¿ƒï¼šå¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªç›¸åŒçš„ä»£ç†å¹¶è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- [Redundant Executor] Starting 2 agents in parallel... ---"</span>)
    start_time = time.time()
    
    <span class="hljs-comment"># ç”¨ ThreadPoolExecutor å¹¶å‘è¿è¡Œä¸¤ä¸ªä»£ç†è°ƒç”¨</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> executor:
        <span class="hljs-comment"># å‘æ‰§è¡Œå™¨æäº¤ä¸¤ä¸ªç›¸åŒçš„ä»»åŠ¡</span>
        futures = [executor.submit(simple_executor.invoke, {<span class="hljs-string">"input"</span>: state[<span class="hljs-string">'input'</span>]}) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)]
        
        first_result = <span class="hljs-literal">None</span>
        <span class="hljs-comment"># 'as_completed' è¿­ä»£å™¨åœ¨å®Œæˆæ—¶ä»¥ä»»æ„é¡ºåºæ‰§è¡Œ</span>
        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å°è¯•å¾—åˆ°ç¬¬ä¸€ä¸ªå®Œæˆçš„ç»“æœ</span>
                first_result = future.result()
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- [Redundant Executor] A task finished successfully. Cancelling others. ---"</span>)
                <span class="hljs-comment"># ä¸€æ—¦æˆåŠŸäº†ä¸€æ¬¡ï¼Œä»»åŠ¡å°±å®Œæˆäº†ï¼Œå°±å¯ä»¥ç»“æŸå¾ªç¯</span>
                <span class="hljs-comment"># åœ¨æ›´é«˜çº§å®ç°ä¸­ï¼Œå¯ä»¥å°è¯•å–æ¶ˆå…¶ä»–æ­£åœ¨è¿è¡Œçš„æ‰§è¡Œå™¨</span>
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-comment"># å¦‚æœæŸä¸ªå¹¶è¡Œä»»åŠ¡å¤±è´¥ï¼Œåªéœ€è®°å½•å¹¶ç­‰å¾…å…¶ä»–çš„æ‰§è¡Œå™¨å®Œæˆ</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Redundant Executor] A task failed with error: <span class="hljs-subst">{e}</span>. Waiting for the other. ---"</span>)
                <span class="hljs-keyword">pass</span>
    
    execution_time = time.time() - start_time
    log = <span class="hljs-string">f"Redundant execution completed in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- [Redundant Executor] <span class="hljs-subst">{log}</span> ---"</span>)
    
    <span class="hljs-comment"># æ ¹æ®æ˜¯å¦è·å¾—æˆåŠŸçš„ç»“æœæ¥æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> first_result:
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>: first_result, <span class="hljs-string">"performance_log"</span>: log, <span class="hljs-string">"error"</span>: <span class="hljs-literal">None</span>}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># è¿™ç§æƒ…å†µåªå‘ç”Ÿåœ¨ä¸¤ä¸ªå¹¶è¡Œæ‰§è¡Œéƒ½å¤±è´¥çš„æƒ…å†µä¸‹</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"performance_log"</span>: log, <span class="hljs-string">"error"</span>: <span class="hljs-string">"Both redundant executions failed."</span>}

<span class="hljs-comment"># ç»„è£…ä¸€ä¸ªéå¸¸ç®€å•çš„å›¾ï¼Œåªæœ‰è¿™ä¸€ä¸ªèŠ‚ç‚¹</span>
workflow = StateGraph(RedundantState)
workflow.add_node(<span class="hljs-string">"redundant_executor"</span>, redundant_executor_node)
workflow.set_entry_point(<span class="hljs-string">"redundant_executor"</span>)
workflow.add_edge(<span class="hljs-string">"redundant_executor"</span>, END)
app = workflow.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># å¤šæ¬¡è¿è¡Œå¼¹æ€§å›¾</span>
redundant_results = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_runs):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- Running Redundant Agent (Attempt <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{num_runs}</span>) ---"</span>)
    start_time = time.time()
    result = app.invoke({<span class="hljs-string">"input"</span>: <span class="hljs-string">"Please fetch the user's profile"</span>})
    end_time = time.time()
    <span class="hljs-keyword">if</span> result[<span class="hljs-string">'error'</span>]:
        redundant_results.append((<span class="hljs-string">"FAILURE"</span>, end_time - start_time, result[<span class="hljs-string">'error'</span>]))
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"FAILURE in <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>s.\n"</span>)
    <span class="hljs-keyword">else</span>:
        redundant_results.append((<span class="hljs-string">"SUCCESS"</span>, end_time - start_time, result[<span class="hljs-string">'result'</span>]))
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"SUCCESS in <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>s.\n"</span>)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15571fe7fa5842d2b359bb8e27d82440~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768961811&amp;x-signature=FLK0%2BR0FOktdlPsm0ajiXNePMus%3D" alt="å†—ä½™æ‰§è¡Œ" loading="lazy"/></p>
<p><code>redundant_executor_node</code> æ˜¯å®¹é”™ç³»ç»Ÿçš„ä¸»è¦éƒ¨åˆ†ï¼Œ<code>for future in as_completed(futures)</code> å¾ªç¯æ˜¯å…¶æ ¸å¿ƒé€»è¾‘ï¼Œ<code>as_completed</code> ç»™å‡ºçš„é¡ºåºæ˜¯æŒ‰å®Œæˆé¡ºåºï¼Œè€Œä¸æ˜¯å¯åŠ¨é¡ºåºã€‚</p>
<p>è¿™æ„å‘³ç€åªè¦ä¸¤ä¸ªå¹¶è¡Œä»£ç†ä¸­é€Ÿåº¦æœ€å¿«çš„é‚£ä¸ªæ‰§è¡ŒæˆåŠŸï¼Œå°±å¯ä»¥æŠ“å–ç»“æœå¹¶é€€å‡ºå¾ªç¯ï¼Œå¿½ç•¥è¾ƒæ…¢æˆ–å¤±è´¥çš„ä»£ç†ã€‚<code>try...except</code> å—ä¹Ÿéå¸¸å…³é”®ï¼Œå…è®¸ç³»ç»Ÿåœ¨ç­‰å¾…æŸä¸ªå¯èƒ½æˆåŠŸçš„åˆ†æ”¯æ—¶ï¼Œä¼˜é›…çš„å¤„ç†æŸä¸ªåˆ†æ”¯çš„å¤±è´¥ã€‚</p>
<p>æœ€åè¿›è¡Œå®šé‡åˆ†æï¼Œåˆ†åˆ«è¿è¡Œç®€å•çš„å•ä¸€ä»£ç†ç³»ç»Ÿå’Œå†—ä½™ç³»ç»Ÿå„äº”æ¬¡ï¼Œæ¯”è¾ƒå®ƒä»¬çš„æˆåŠŸç‡å’Œæ—¶å»¶åˆ†å¸ƒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># ç»“æœä¿å­˜åœ¨ 'simple_results' å’Œ 'redundant_results' åˆ—è¡¨ä¸­</span>
<span class="hljs-comment"># --- å¯é æ€§åˆ†æ ---</span>
simple_successes = <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> simple_results <span class="hljs-keyword">if</span> r[<span class="hljs-number">0</span>] == <span class="hljs-string">"SUCCESS"</span>)
simple_rate = (simple_successes / <span class="hljs-built_in">len</span>(simple_results)) * <span class="hljs-number">100</span> <span class="hljs-keyword">if</span> simple_results <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
redundant_successes = <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> redundant_results <span class="hljs-keyword">if</span> r[<span class="hljs-number">0</span>] == <span class="hljs-string">"SUCCESS"</span>)
redundant_rate = (redundant_successes / <span class="hljs-built_in">len</span>(redundant_results)) * <span class="hljs-number">100</span> <span class="hljs-keyword">if</span> redundant_results <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"                  SYSTEM RELIABILITY ANALYSIS"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"--- Simple Agent ---"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Success Rate: <span class="hljs-subst">{simple_rate:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{simple_successes}</span> successes, <span class="hljs-subst">{<span class="hljs-built_in">len</span>(simple_results) - simple_successes}</span> failures)\n"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"--- Redundant Agent ---"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Success Rate: <span class="hljs-subst">{redundant_rate:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{redundant_successes}</span> successes, <span class="hljs-subst">{<span class="hljs-built_in">len</span>(redundant_results) - redundant_successes}</span> failures)\n"</span>)

<span class="hljs-keyword">if</span> simple_rate &gt; <span class="hljs-number">0</span>:
    reliability_increase = ((redundant_rate - simple_rate) / simple_rate) * <span class="hljs-number">100</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Accuracy / Reliability Increase: +<span class="hljs-subst">{reliability_increase:<span class="hljs-number">.1</span>f}</span>%\n"</span>)

<span class="hljs-comment"># --- æ—¶å»¶åˆ†æ ---</span>
simple_latencies = [r[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> simple_results <span class="hljs-keyword">if</span> r[<span class="hljs-number">0</span>] == <span class="hljs-string">"SUCCESS"</span>]
redundant_latencies = [r[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> redundant_results <span class="hljs-keyword">if</span> r[<span class="hljs-number">0</span>] == <span class="hljs-string">"SUCCESS"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"                  PERFORMANCE &amp; LATENCY ANALYSIS"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"--- Simple Agent (Successful Runs Only) ---"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Latencies: <span class="hljs-subst">{[<span class="hljs-built_in">round</span>(l, <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> simple_latencies]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Average Latency: <span class="hljs-subst">{np.mean(simple_latencies):<span class="hljs-number">.2</span>f}</span> seconds"</span> <span class="hljs-keyword">if</span> simple_latencies <span class="hljs-keyword">else</span> <span class="hljs-string">"N/A"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Max Latency (P100): <span class="hljs-subst">{np.<span class="hljs-built_in">max</span>(simple_latencies):<span class="hljs-number">.2</span>f}</span> seconds"</span> <span class="hljs-keyword">if</span> simple_latencies <span class="hljs-keyword">else</span> <span class="hljs-string">"N/A"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"--- Redundant Agent (Successful Runs Only) ---"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Latencies: <span class="hljs-subst">{[<span class="hljs-built_in">round</span>(l, <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> redundant_latencies]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Average Latency: <span class="hljs-subst">{np.mean(redundant_latencies):<span class="hljs-number">.2</span>f}</span> seconds"</span> <span class="hljs-keyword">if</span> redundant_latencies <span class="hljs-keyword">else</span> <span class="hljs-string">"N/A"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Max Latency (P100): <span class="hljs-subst">{np.<span class="hljs-built_in">max</span>(redundant_latencies):<span class="hljs-number">.2</span>f}</span> seconds"</span> <span class="hljs-keyword">if</span> redundant_latencies <span class="hljs-keyword">else</span> <span class="hljs-string">"N/A"</span>)
</code></pre>
<p>å¾—åˆ°çš„ç»“æœæ˜¯â€¦â€¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#### è¾“å‡º ####</span>
============================================================
                  SYSTEM RELIABILITY ANALYSIS
============================================================


--- Simple Agent ---
Success Rate: <span class="hljs-number">60.0</span>% (<span class="hljs-number">3</span> successes, <span class="hljs-number">2</span> failures)
--- Redundant Agent ---
Success Rate: <span class="hljs-number">80.0</span>% (<span class="hljs-number">4</span> successes, <span class="hljs-number">1</span> failure)
Accuracy / Reliability Increase: +<span class="hljs-number">33.3</span>%

============================================================
                  PERFORMANCE &amp; LATENCY ANALYSIS
============================================================
--- Simple Agent (Successful Runs Only) ---
Latencies: [<span class="hljs-number">6.21</span>, <span class="hljs-number">11.99</span>, <span class="hljs-number">5.98</span>]
Average Latency: <span class="hljs-number">8.06</span> seconds
Max Latency (P100): <span class="hljs-number">11.99</span> seconds
The system performance <span class="hljs-keyword">is</span> unpredictable <span class="hljs-keyword">and</span> directly impacted by long-tail latency events.

--- Redundant Agent (Successful Runs Only) ---
Latencies: [<span class="hljs-number">6.15</span>, <span class="hljs-number">6.02</span>, <span class="hljs-number">6.25</span>, <span class="hljs-number">5.88</span>]
Average Latency: <span class="hljs-number">6.08</span> seconds
Max Latency (P100): <span class="hljs-number">6.25</span> seconds
</code></pre>
<p>å†—ä½™æ‰§è¡Œæä¾›äº†ä¸¤ä¸ªæ˜ç¡®ã€å¯è¡¡é‡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>å¤§å¹…æé«˜å¯é æ€§</strong>ï¼šé€šè¿‡å¹¶è¡Œæ‰§è¡Œå¤‡ç”¨ç³»ç»Ÿï¼Œç³»ç»ŸæˆåŠŸç‡ä» 60% æé«˜åˆ° 80%ï¼Œæœ‰æ•ˆæå‡äº†å‡†ç¡®æ€§å’Œç”¨æˆ·ä¿¡ä»»ã€‚</li>
<li><strong>æ˜¾è‘—æ”¹å–„å»¶è¿Ÿä¸€è‡´æ€§</strong>ï¼šå†—ä½™ç³»ç»Ÿçš„æœ€åæƒ…å†µæ€§èƒ½ï¼ˆ6.25sï¼‰ä¹Ÿä¼˜äºç®€å•ç³»ç»Ÿçš„å¹³å‡æ€§èƒ½ï¼ˆ8.06sï¼‰ï¼Œå®Œå…¨æ¶ˆé™¤äº† 12s çš„é•¿å°¾æ—¶å»¶ï¼Œä½¿ç”¨æˆ·ä½“éªŒå˜å¾—å¿«é€Ÿä¸”å¯é¢„æµ‹ã€‚</li>
</ol>
<p>å¯¹äºä»»ä½•å…·æœ‰è‡ªä¸»æ€§çš„å·¥ä½œæµä¸­çš„ä»»ä½•å…³é”®ä»»åŠ¡æ­¥éª¤ï¼Œå†—ä½™æ‰§è¡Œéƒ½æ˜¯ä¸€ç§å¼ºå¤§ä¸”ç»æµé«˜æ•ˆçš„ç­–ç•¥ï¼Œå¯ç”¨äºæ„å»ºçœŸæ­£é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ã€å…·æœ‰å¼¹æ€§çš„ç³»ç»Ÿã€‚</p>
<hr/>
<blockquote>
<p>Hiï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œä¸€åå…¼å…·æŠ€æœ¯æ·±åº¦ä¸ç®¡ç†è§†é‡çš„æŠ€æœ¯ç®¡ç†è€…ã€‚æ›¾å°±èŒäº Motorolaï¼Œç°ä»»èŒäº Mavenirï¼Œå¤šå¹´å¸¦é¢†æŠ€æœ¯å›¢é˜Ÿï¼Œèšç„¦åç«¯æ¶æ„ä¸äº‘åŸç”Ÿï¼ŒæŒç»­å…³æ³¨ AI ç­‰å‰æ²¿æ–¹å‘ï¼Œä¹Ÿå…³æ³¨äººçš„æˆé•¿ï¼Œç¬ƒä¿¡æŒç»­å­¦ä¹ çš„åŠ›é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å®è·µä¸æ€è€ƒã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDeepNoMindã€ï¼Œæ˜Ÿæ ‡ä¸è¿·è·¯ã€‚ä¹Ÿæ¬¢è¿è®¿é—®ç‹¬ç«‹ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepnomind.com" title="https://www.deepnomind.com" target="_blank" ref="nofollow noopener noreferrer">www.DeepNoMind.com</a>ï¼Œä¸€èµ·äº¤æµæˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TrustLink ï½œæˆ˜ç•¥äººå‘˜æ‹›å‹Ÿå…¬å‘Šï¼ˆåˆ›å§‹å›¢é˜Ÿé¦–æ‰¹ï¼‰]]></title>    <link>https://juejin.cn/post/7594735599314321458</link>    <guid>https://juejin.cn/post/7594735599314321458</guid>    <pubDate>2026-01-14T02:19:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594735599314321458" data-draft-id="7594757769556672521" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TrustLink ï½œæˆ˜ç•¥äººå‘˜æ‹›å‹Ÿå…¬å‘Šï¼ˆåˆ›å§‹å›¢é˜Ÿé¦–æ‰¹ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Trae,æ˜é‡‘æŠ€æœ¯å¾æ–‡"/> <meta itemprop="datePublished" content="2026-01-14T02:19:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TrustLink ï½œæˆ˜ç•¥äººå‘˜æ‹›å‹Ÿå…¬å‘Šï¼ˆåˆ›å§‹å›¢é˜Ÿé¦–æ‰¹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:19:21.000Z" title="Wed Jan 14 2026 02:19:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬åœ¨åš TrustLinkï¼šä¸€ä¸ªç”¨æˆ·è¾“å…¥-&gt; AI ç†è§£æ„å›¾ -&gt; ç³»ç»Ÿ OS å“åº”å±•ç¤ºçš„â€œæ‰¾åŒä¼´â€äº§å“ï¼Œè®©äººä»¬å›´ç»•çœŸå®ä¸–ç•Œç›®æ ‡ï¼ˆå…ˆä»æ±‚èŒäº’åŠ©å¼€å§‹ï¼‰æ›´å¿«æ‰¾åˆ°<strong>é è°±åŒä¼´</strong>ã€‚
æˆ‘ä»¬ç›¸ä¿¡ï¼š<strong>åŒ¹é…è¦å¯è§£é‡Š</strong>ã€<strong>å®‰å…¨è¦é»˜è®¤</strong>ã€<strong>ä¿¡ä»»è¦å¯ç´¯ç§¯</strong>ï¼ˆé€šè¿‡è½»é‡åˆä½œç¡®è®¤å½¢æˆå¯éªŒè¯çš„å¯é ä¿¡å·ï¼‰ã€‚</p>
<h2 data-id="heading-0">æˆ‘ä»¬ç°åœ¨éœ€è¦ä»€ä¹ˆæ ·çš„ä¼™ä¼´</h2>
<p>æˆ‘ä»¬åœ¨ç»„å»ºä¸€æ”¯â€œå°è€Œå¼ºâ€çš„åˆ›å§‹å›¢é˜Ÿï¼šå°‘æ•°äººé«˜å¯†åº¦åä½œï¼Œå›´ç»•é‡Œç¨‹ç¢‘æŒç»­äº¤ä»˜ï¼Œç”¨æ•°æ®ä¸å¤ç›˜æ¨åŠ¨è¿­ä»£ã€‚
å¦‚æœä½ è®¤å¯â€œå…ˆæŠŠé—­ç¯è·‘é€šï¼Œå†æ‰©åœºæ™¯â€çš„é•¿æœŸä¸»ä¹‰ï¼Œå¹¶æ„¿æ„æ‰¿æ‹…ç»“æœè´£ä»»ï¼Œæ¬¢è¿åŠ å…¥ã€‚</p>
<h2 data-id="heading-1">æ‹›å‹Ÿè§’è‰²ï¼ˆæˆ˜ç•¥åˆ›å§‹å®˜æ–¹å‘ï¼‰</h2>
<p>ä»¥ä¸‹è§’è‰²æ˜¯â€œæ–¹å‘è´Ÿè´£åˆ¶â€ï¼Œä¸æ˜¯å¤´è¡”ï¼š</p>
<h3 data-id="heading-2">1) äº§å“æˆ˜ç•¥ï¼ˆCPO æ–¹å‘ï¼‰</h3>
<ul>
<li>å®šä¹‰éœ€æ±‚ä¼˜å…ˆçº§ä¸éªŒæ”¶å£å¾„ï¼Œæ¨åŠ¨â€œè¾“å…¥ â†’ æ¾„æ¸… â†’ åŒ¹é… â†’ å»ºè” â†’ åˆä½œç¡®è®¤ â†’ åé¦ˆâ€é—­ç¯è·‘é€š</li>
<li>å»ºç«‹æŒ‡æ ‡ä½“ç³»ä¸å®éªŒ/å¤ç›˜æœºåˆ¶ï¼ˆç”¨è¯æ®æ¨åŠ¨è¿­ä»£ï¼‰</li>
</ul>
<h3 data-id="heading-3">2) æŠ€æœ¯æ¶æ„ï¼ˆCTO æ–¹å‘ï¼‰</h3>
<ul>
<li>ç«¯åˆ°ç«¯äº¤ä»˜ï¼šRN å®¢æˆ·ç«¯ + æœåŠ¡ç«¯ç¼–æ’ï¼ˆå¯è§‚æµ‹ã€å¯å›æ»šã€å¯æ¼”è¿›ï¼‰</li>
<li>è´¨é‡ä¸ç¨³å®šæ€§é—¨ç¦ã€éšç§æœ€å°åŒ–ä¸å®‰å…¨é»˜è®¤è½åœ°</li>
</ul>
<h3 data-id="heading-4">3) åŒ¹é…ä¸ç®—æ³•ï¼ˆMatch/ML æ–¹å‘ä¸»å®˜ï¼‰</h3>
<ul>
<li>è´Ÿè´£â€œåŒ¹é…è´¨é‡â€ä½œä¸ºç¬¬ä¸€æ€§æŒ‡æ ‡ï¼šå¬å›/æ’åº/è§£é‡Šçš„æ•´ä½“ç­–ç•¥ä¸è¿­ä»£èŠ‚å¥</li>
<li>å»ºç«‹å¯è½åœ°çš„æ•°æ®é—­ç¯ï¼šæ ‡æ³¨/åé¦ˆé‡‡é›†ã€ç¦»çº¿è¯„ä¼°ä¸åœ¨çº¿å®éªŒã€åå·®ä¸å†·å¯åŠ¨ç­–ç•¥</li>
<li>æŠŠâ€œå¯è§£é‡Š + å¯çº é”™â€åšæˆäº§å“èƒ½åŠ›ï¼Œè€Œä¸æ˜¯æ¨¡å‹é™„å±å“</li>
</ul>
<h3 data-id="heading-5">4) å¢é•¿è¿è¥ï¼ˆGrowth æ–¹å‘ï¼‰</h3>
<ul>
<li>å•åŸå†·å¯åŠ¨ä¸ç§å­ç”¨æˆ·å¢é•¿ï¼ŒæŠŠâ€œæœ‰æ•ˆå¯¹è¯/åˆä½œå®Œæˆâ€è·‘æˆå¯å¤åˆ¶æ–¹æ³•</li>
<li>å†…å®¹ä¸æ¸ é“ç­–ç•¥ã€ç¤¾ç¾¤è¿è¥ã€æ¯å‘¨æ•°æ®å¤ç›˜</li>
</ul>
<h3 data-id="heading-6">5) å®‰å…¨ä¸åˆè§„ï¼ˆSafety æ–¹å‘ï¼‰</h3>
<ul>
<li>è®¾è®¡å¹¶æ¨åŠ¨æ²»ç†åº•çº¿ï¼šæ‹‰é»‘/ä¸¾æŠ¥/å®¡è®¡ã€éšç§ä¸æƒé™é€æ˜ã€é£é™©é¢„æ¡ˆ</li>
<li>åœ¨ä¸ç‰ºç‰²ä½“éªŒçš„å‰æä¸‹ï¼Œè®©äº§å“é•¿æœŸå¯æŒç»­</li>
</ul>
<h3 data-id="heading-7">6) ç”Ÿæ€ä¸å•†åŠ¡ï¼ˆBD æ–¹å‘ï¼‰</h3>
<ul>
<li>é«˜æ ¡/ç¤¾ç¾¤/æœºæ„åˆä½œã€èµ„æºç½®æ¢ä¸ä»˜è´¹è¯•ç‚¹æ¢ç´¢</li>
<li>å»ºç«‹é•¿æœŸå¯æ‰©å¼ çš„åˆä½œæ¨¡å‹ï¼ˆè€Œä¸æ˜¯ä¸€æ¬¡æ€§åˆä½œï¼‰</li>
</ul>
<h3 data-id="heading-8">7) ä½“éªŒè®¾è®¡ï¼ˆDesign/UX æ–¹å‘ä¸»å®˜ï¼‰</h3>
<ul>
<li>è´Ÿè´£æ ¸å¿ƒå…³é”®è·¯å¾„ä½“éªŒï¼šè¡¨è¾¾è¾“å…¥ã€æ¾„æ¸…æˆæœ¬ã€è§£é‡Šå‘ˆç°ã€å»ºè”ä¸èŠå¤©ã€åˆä½œç¡®è®¤</li>
<li>å»ºç«‹è®¾è®¡ç³»ç»Ÿä¸äº¤äº’è§„èŒƒï¼Œç¡®ä¿â€œå¿«è¿­ä»£â€ä¸ç‰ºç‰²ä¸€è‡´æ€§ä¸å¯ç”¨æ€§</li>
<li>ä¸å®‰å…¨/åˆè§„åä½œï¼ŒæŠŠæ²»ç†åšæˆâ€œå¯ç†è§£çš„ä½“éªŒâ€è€Œä¸æ˜¯å¼¹çª—å †å </li>
</ul>
<h3 data-id="heading-9">8) æ•°æ®ä¸å®éªŒï¼ˆData/Analytics æ–¹å‘ä¸»å®˜ï¼‰</h3>
<ul>
<li>è´Ÿè´£æŒ‡æ ‡ä½“ç³»è½åœ°ï¼šåŸ‹ç‚¹å£å¾„ã€æ¼æ–—ä¸ç•™å­˜ã€å¼‚å¸¸ç›‘æ§ä¸å½’å› </li>
<li>å»ºç«‹å®éªŒä¸å¤ç›˜æœºåˆ¶ï¼šå‡è®¾ â†’ å®éªŒ â†’ ç»“è®º â†’ è¡ŒåŠ¨ï¼Œå¹¶æ²‰æ·€ä¸ºå¯å¤ç”¨çš„å¢é•¿/äº§å“æ‰‹å†Œ</li>
<li>è®©å›¢é˜Ÿèƒ½ç”¨æ•°æ®åšå†³ç­–ï¼ˆè€Œä¸æ˜¯åªåšæŠ¥è¡¨ï¼‰</li>
</ul>
<h2 data-id="heading-10">ä¹Ÿæ¬¢è¿â€œç¢ç‰‡æ—¶é—´â€çš„å…±åˆ›è€…/æ”¯æŒè€…ï¼ˆAdvisors &amp; Supportersï¼‰</h2>
<p>å¦‚æœä½ æš‚æ—¶æ— æ³•æ‰¿æ‹…â€œæ–¹å‘ä¸»å®˜â€çš„ç»“æœè´£ä»»ï¼Œä½†æ„¿æ„æŠ•å…¥é›¶ç¢æ—¶é—´åˆ›é€ æƒ³æ³•ã€æä¾›å»ºè®®æˆ–èµ„æºæ”¯æŒï¼Œæˆ‘ä»¬åŒæ ·éå¸¸æ¬¢è¿ã€‚æˆ‘ä»¬æŠŠè¿™ç±»å‚ä¸è§†ä¸ºâ€œå¯éªŒè¯è´¡çŒ®çš„ä¸€éƒ¨åˆ†â€ï¼Œä¼šæŒ‰ç…§å…¬å¼€çš„è´¡çŒ®æœºåˆ¶è®°å½•ä¸è®¤å¯ã€‚</p>
<p>ä½ å¯ä»¥æä¾›çš„æ”¯æŒç±»å‹ï¼ˆä¸¾ä¾‹ï¼‰ï¼š</p>
<ul>
<li>æƒ³æ³•ä¸å»ºè®®ï¼šäº§å“å®šä½/å®šä»·/å™äº‹ã€åŠŸèƒ½å–èˆã€å¢é•¿ç­–ç•¥ã€é£é™©é¢„æ¡ˆã€ç«å“åˆ†æ</li>
<li>ä¸“ä¸šæ”¯æŒï¼šæ³•å¾‹/åˆè§„/éšç§ã€å®‰å…¨é£æ§ã€æ‹›è˜ä¸ç»„ç»‡ã€å“ç‰Œå…¬å…³ã€å•†åŠ¡è°ˆåˆ¤</li>
<li>èµ„æºæ”¯æŒï¼ˆå¯è¡¡é‡ä¸ä¸å¯è¡¡é‡ï¼‰ï¼šç¤¾ç¾¤/é«˜æ ¡/æœºæ„å¼•èã€æ¸ é“æ›å…‰ã€åœºåœ°ä¸æ´»åŠ¨ã€äº‘èµ„æº/å·¥å…·é¢åº¦ã€äººæ‰æ¨è</li>
<li>èµ„é‡‘æ”¯æŒï¼šèµåŠ©/å°é¢å¯åŠ¨èµ„é‡‘/ä¸“é¡¹é¢„ç®—ï¼ˆç”¨äºå¯æ ¸ç®—çš„é‡Œç¨‹ç¢‘æˆæœ¬ï¼Œå¦‚æ´»åŠ¨ã€æ¿€åŠ±ã€åŸºç¡€è®¾æ–½ç­‰ï¼‰</li>
</ul>
<p>ä¸ºäº†é«˜æ•ˆåä½œï¼Œæˆ‘ä»¬å»ºè®®ä½ æŒ‰ä¸‹é¢ç»“æ„å‘æ¥ï¼ˆ5 åˆ†é’Ÿå°±å¤Ÿï¼‰ï¼š</p>
<ul>
<li>ä½ å¸Œæœ›æ”¯æŒçš„æ–¹å¼ï¼ˆå»ºè®®/èµ„æº/èµ„é‡‘/å¼•èï¼‰ä¸å¯æŠ•å…¥çš„é¢‘ç‡ï¼ˆä¾‹å¦‚æ¯å‘¨ 0.5â€“2 å°æ—¶ï¼‰</li>
<li>ä½ èƒ½æä¾›çš„ 1â€“3 ä¸ªå…·ä½“â€œå¯è¡ŒåŠ¨çš„æ”¯æŒâ€ï¼ˆä¾‹å¦‚ï¼šå¼•è X ä¸ªç¤¾ç¾¤ä¸»/ç»™å‡º Y ä»½å®¡é˜…/èµåŠ© Z çš„é¢„ç®—ï¼‰</li>
<li>ä½ å¸Œæœ›çœ‹åˆ°çš„å›æŠ¥æ–¹å¼ï¼ˆç½²å/è‡´è°¢/ä¼˜å…ˆä½“éªŒ/é‡Œç¨‹ç¢‘å›æŠ¥ç­‰ï¼›èµ„é‡‘ç›¸å…³ä¼šæŒ‰åˆè§„æ–¹å¼æ‰§è¡Œï¼‰</li>
</ul>
<h2 data-id="heading-11">æˆ‘ä»¬å¯¹â€œåˆ›å§‹å›¢é˜Ÿæˆå‘˜â€çš„åŸºæœ¬è¦æ±‚</h2>
<ul>
<li>å¯¹ç»“æœè´Ÿè´£ï¼šèƒ½ç‹¬ç«‹æ‹¿ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œå¹¶æŒç»­äº¤ä»˜</li>
<li>å¯¹ç”¨æˆ·è´Ÿè´£ï¼šå°Šé‡éšç§ä¸å®‰å…¨åº•çº¿ï¼Œä¸åšçŸ­æœŸæŠ•æœº</li>
<li>å¯¹å›¢é˜Ÿè´Ÿè´£ï¼šé€æ˜åä½œï¼Œæ„¿æ„ç”¨æ–‡æ¡£/å·¥å•/æ•°æ®å½¢æˆå¯è¿½æº¯è®°å½•</li>
</ul>
<h2 data-id="heading-12">æˆ‘ä»¬æä¾›çš„åä½œä¸å›æŠ¥åŸåˆ™ï¼ˆå…¬å¼€å£å¾„ï¼‰</h2>
<ul>
<li>åä½œæœºåˆ¶æ¸…æ™°ï¼šé‡Œç¨‹ç¢‘é©±åŠ¨ã€éªŒæ”¶æ˜ç¡®ã€å¤ç›˜å¸¸æ€åŒ–</li>
<li>è´¡çŒ®è®¤å¯é€æ˜ï¼šè´¡çŒ®ä»¥å¯éªŒè¯äº¤ä»˜ç‰©è®°å½•ä¸æ ¡å‡†</li>
<li>å›æŠ¥ä¸è´¡çŒ®å¼ºç»‘å®šï¼šé‡Œç¨‹ç¢‘æ¿€åŠ± + é•¿æœŸå›æŠ¥ï¼ˆå…·ä½“æ¡æ¬¾åœ¨å†…éƒ¨ç‰ˆæœ¬ä¸­å¯¹é½ç¡®è®¤ï¼‰</li>
</ul>
<h2 data-id="heading-13">å¦‚ä½•åŠ å…¥ï¼ˆå»ºè®®ä½ ç›´æ¥å‘è¿™ 5 é¡¹ï¼‰</h2>
<ul>
<li>ä½ æƒ³åŠ å…¥çš„è§’è‰²æ–¹å‘ï¼ˆä¸Šé¢ 1â€“8ï¼Œæˆ–é€‰æ‹©â€œå…±åˆ›è€…/æ”¯æŒè€…â€ï¼‰</li>
<li>ä½ èƒ½æŠ•å…¥çš„æ—¶é—´ï¼ˆæ¯å‘¨å°æ—¶æ•°/é˜¶æ®µæ€§ï¼‰</li>
<li>ä½ è¿‡å»æœ€èƒ½è¯æ˜ä½ èƒ½åŠ›çš„ 1â€“3 ä¸ªä½œå“/æ¡ˆä¾‹ï¼ˆé“¾æ¥å³å¯ï¼‰</li>
<li>ä½ å¯¹ TrustLink çš„ 3 ä¸ªé—®é¢˜/æ‹…å¿§ï¼ˆè¶Šå°–é”è¶Šå¥½ï¼‰</li>
<li>ä½ å¸Œæœ› 2 å‘¨å†…æ‹¿ä¸‹çš„ä¸€ä¸ªâ€œå¯äº¤ä»˜é‡Œç¨‹ç¢‘â€ï¼ˆä½ æ¥æï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# Wordæ–‡æ¡£é¡µé¢æ“ä½œï¼šå‘Šåˆ«æ‰‹åŠ¨ï¼Œé«˜æ•ˆæŒæ§ä½ çš„Wordæ–‡æ¡£ï¼]]></title>    <link>https://juejin.cn/post/7594863660280725523</link>    <guid>https://juejin.cn/post/7594863660280725523</guid>    <pubDate>2026-01-14T02:06:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594863660280725523" data-draft-id="7594726385404543030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# Wordæ–‡æ¡£é¡µé¢æ“ä½œï¼šå‘Šåˆ«æ‰‹åŠ¨ï¼Œé«˜æ•ˆæŒæ§ä½ çš„Wordæ–‡æ¡£ï¼"/> <meta itemprop="keywords" content="åç«¯,.NET,C#"/> <meta itemprop="datePublished" content="2026-01-14T02:06:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼ºç‚¹å†…å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3414438228006112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# Wordæ–‡æ¡£é¡µé¢æ“ä½œï¼šå‘Šåˆ«æ‰‹åŠ¨ï¼Œé«˜æ•ˆæŒæ§ä½ çš„Wordæ–‡æ¡£ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414438228006112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼ºç‚¹å†…å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:06:39.000Z" title="Wed Jan 14 2026 02:06:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C# Wordæ–‡æ¡£é¡µé¢æ“ä½œï¼šå‘Šåˆ«æ‰‹åŠ¨ï¼Œé«˜æ•ˆæŒæ§ä½ çš„Wordæ–‡æ¡£ï¼</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘å’Œå·¥ä½œä¸­ï¼Œä½ æ˜¯å¦æ›¾è¢«Wordæ–‡æ¡£çš„é¡µé¢ç®¡ç†æ‰€å›°æ‰°ï¼Ÿæ‰¹é‡åˆå¹¶æŠ¥å‘Šã€åŠ¨æ€ç”ŸæˆåˆåŒã€æ ¹æ®æ¡ä»¶æ‹†åˆ†æ–‡æ¡£â€¦â€¦è¿™äº›éœ€æ±‚å¦‚æœæ‰‹åŠ¨æ“ä½œï¼Œä¸ä»…è€—æ—¶è€—åŠ›ï¼Œè¿˜ææ˜“å‡ºé”™ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œé¢å¯¹æˆç™¾ä¸Šåƒä»½Wordæ–‡æ¡£ï¼Œéœ€è¦ç»Ÿä¸€åˆ é™¤æŸä¸ªç‰¹å®šé¡µé¢ï¼Œæˆ–è€…åœ¨æ¯ä¸ªæ–‡æ¡£çš„ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªæ ‡å‡†åŒ–çš„é™„å½•ï¼Œæ‰‹åŠ¨æ“ä½œç®€ç›´æ˜¯ä¸€åœºå™©æ¢¦ï¼</p>
<p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ›´é«˜æ•ˆã€æ›´æ™ºèƒ½çš„æ–¹å¼æ¥è§£å†³è¿™äº›ç—›ç‚¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼é€šè¿‡å¼ºå¤§çš„ <strong>C# ç¼–ç¨‹</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯¹Wordæ–‡æ¡£çš„é¡µé¢è¿›è¡Œè‡ªåŠ¨åŒ–æ·»åŠ ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨ä¸€æ¬¾ä¼˜ç§€çš„ .NET åº“â€”â€”<code>Spire.Doc for .NET</code>ï¼Œæ¥è½»æ¾æŒæ§Wordæ–‡æ¡£çš„é¡µé¢ç»“æ„ï¼Œè®©ä½ å½»åº•å‘Šåˆ«ç¹ççš„æ‰‹åŠ¨æ“ä½œï¼Œå¤§å¹…æå‡å·¥ä½œæ•ˆç‡ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·è§£é”Wordæ–‡æ¡£è‡ªåŠ¨åŒ–çš„æ–°æŠ€èƒ½ï¼</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© Spire.Doc for .NETï¼Ÿ</h3>
<p>åœ¨ä¼ä¸šåº”ç”¨ä¸­ï¼ŒWordæ–‡æ¡£è‡ªåŠ¨åŒ–å¤„ç†çš„éœ€æ±‚æ—¥ç›Šå‡¸æ˜¾ï¼Œæ— è®ºæ˜¯æŠ¥å‘Šç”Ÿæˆã€åˆåŒç®¡ç†è¿˜æ˜¯æ•°æ®å¯¼å‡ºï¼Œå¯¹Wordæ–‡æ¡£çš„ç¼–ç¨‹æ“ä½œéƒ½å˜å¾—è‡³å…³é‡è¦ã€‚å¸‚é¢ä¸Šè™½ç„¶æœ‰ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œä½†<code>Spire.Doc for .NET</code>å‡­å€Ÿå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿è„±é¢–è€Œå‡ºã€‚</p>
<p>è¿™æ¬¾ä¸“ä¸šçš„ .NET åº“å…è®¸å¼€å‘è€…åœ¨ä¸ä¾èµ–Microsoft Officeæˆ–ä»»ä½•å…¶ä»–ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯¹Wordæ–‡æ¡£è¿›è¡Œå…¨é¢çš„åˆ›å»ºã€ç¼–è¾‘ã€è½¬æ¢å’Œæ‰“å°æ“ä½œã€‚å®ƒå…¼å®¹å¤šç§Wordæ ¼å¼ï¼ˆDOC, DOCX, RTFç­‰ï¼‰ï¼Œæä¾›äº†ä¸°å¯Œçš„APIæ¥å£ï¼Œä½¿å¾—Wordæ–‡æ¡£ç¼–ç¨‹å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•å’Œé«˜æ•ˆã€‚å°¤å…¶åœ¨ Word æ–‡æ¡£è‡ªåŠ¨åŒ–é¢†åŸŸï¼Œ<code>Spire.Doc for .NET</code>è¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿè½»æ¾å¤„ç†å¤æ‚çš„æ–‡æ¡£ç»“æ„å’Œæ ¼å¼ã€‚</p>
<p><strong>å®‰è£…ä¸å¼•ç”¨ï¼š</strong>
è¦åœ¨ä½ çš„C#é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨<code>Spire.Doc for .NET</code>ï¼Œåªéœ€é€šè¿‡NuGetåŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Install-Package Spire.Doc
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨ä½ çš„ä»£ç æ–‡ä»¶ä¸­å¼•ç”¨<code>Spire.Doc</code>å‘½åç©ºé—´å³å¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Spire.Doc;
<span class="hljs-keyword">using</span> Spire.Doc.Documents;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-comment">// ... å…¶ä»–å¿…è¦çš„å‘½åç©ºé—´</span>
</code></pre>
<h3 data-id="heading-2">C# å®ç°Wordæ–‡æ¡£é¡µé¢æ“ä½œ</h3>
<p><code>Spire.Doc for .NET</code>æä¾›äº†ä¸€ç³»åˆ—ç›´è§‚çš„APIï¼Œè®©é¡µé¢æ“ä½œå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»å¦‚ä½•å®ç°é¡µé¢çš„æ·»åŠ ã€æ’å…¥å’Œåˆ é™¤ã€‚</p>
<h4 data-id="heading-3">2.1 æ·»åŠ æ–°é¡µé¢</h4>
<p><strong>åœºæ™¯ï¼š</strong> å½“ä½ éœ€è¦ä¸ºæŠ¥å‘Šæœ«å°¾è¿½åŠ é™„å½•ã€ç”Ÿæˆæ–°çš„ç©ºç™½é¡µä½œä¸ºåˆ†éš”ç¬¦ï¼Œæˆ–åœ¨æ–‡æ¡£æœ«å°¾æ·»åŠ ä¸€ä¸ªç‰ˆæƒå£°æ˜é¡µæ—¶ï¼Œæ·»åŠ æ–°é¡µé¢åŠŸèƒ½å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong>
åœ¨<code>Spire.Doc</code>ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡æ·»åŠ æ–°çš„Sectionæ¥é—´æ¥å®ç°æ·»åŠ æ–°é¡µé¢çš„æ•ˆæœã€‚æ¯ä¸ªSectionå¯ä»¥æœ‰ç‹¬ç«‹çš„é¡µé¢è®¾ç½®ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£</span>
Document doc = <span class="hljs-keyword">new</span> Document();

<span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªSectionä½œä¸ºç¬¬ä¸€é¡µ</span>
Section section1 = doc.AddSection();
Paragraph para1 = section1.AddParagraph();
para1.AppendText(<span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸€é¡µçš„å†…å®¹ã€‚"</span>);

<span class="hljs-comment">// æ·»åŠ ç¬¬äºŒä¸ªSectionï¼Œå®ƒå°†ä½œä¸ºæ–°çš„ä¸€é¡µ</span>
Section section2 = doc.AddSection();
<span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°Sectionä¼šä»æ–°é¡µå¼€å§‹</span>
Paragraph para2 = section2.AddParagraph();
para2.AppendText(<span class="hljs-string">"è¿™æ˜¯ç¬¬äºŒé¡µçš„å†…å®¹ã€‚"</span>);

<span class="hljs-comment">// å¦‚æœéœ€è¦æ·»åŠ æ›´å¤šç©ºç™½é¡µï¼Œå¯ä»¥é‡å¤æ·»åŠ Section</span>
Section section3 = doc.AddSection();
<span class="hljs-comment">// è¿™ä¸ªSectionå°†ä½œä¸ºç¬¬ä¸‰é¡µ</span>
Paragraph para3 = section3.AddParagraph();
para3.AppendText(<span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸‰é¡µçš„å†…å®¹ã€‚"</span>);

<span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
doc.SaveToFile(<span class="hljs-string">"AddPages.docx"</span>, FileFormat.Docx);
</code></pre>
<p><strong>æ­¥éª¤è¯´æ˜ï¼š</strong> ä¸Šè¿°ä»£ç é€šè¿‡<code>doc.AddSection()</code>æ–¹æ³•å‘æ–‡æ¡£ä¸­æ·»åŠ æ–°çš„èŠ‚ã€‚åœ¨Wordæ–‡æ¡£ä¸­ï¼Œæ¯ä¸ªèŠ‚é€šå¸¸ä¼šä»ä¸€ä¸ªæ–°é¡µé¢å¼€å§‹ï¼Œå› æ­¤æ·»åŠ æ–°çš„èŠ‚æ˜¯å®ç°æ·»åŠ æ–°é¡µé¢çš„å¸¸ç”¨ä¸”æœ‰æ•ˆçš„æ–¹å¼ã€‚</p>
<h4 data-id="heading-4">2.2 æ’å…¥é¡µé¢</h4>
<p><strong>åœºæ™¯ï¼š</strong> å½“ä½ éœ€è¦åœ¨ç°æœ‰æ–‡æ¡£çš„ç‰¹å®šä½ç½®ï¼ˆä¾‹å¦‚ï¼Œåœ¨ç« èŠ‚ä¹‹é—´ï¼‰æ’å…¥ä¸€ä¸ªç©ºç™½é¡µï¼Œæˆ–è€…ä»å¦ä¸€ä¸ªWordæ–‡æ¡£ä¸­å¯¼å…¥ç‰¹å®šé¡µé¢å†…å®¹æ—¶ï¼Œæ’å…¥é¡µé¢åŠŸèƒ½éå¸¸å®ç”¨ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong>
<code>Spire.Doc</code>é€šè¿‡å…‹éš†ç°æœ‰Sectionæˆ–æ’å…¥æ–°çš„Sectionæ¥å®ç°é¡µé¢æ’å…¥ã€‚è¦æ’å…¥ä¸€ä¸ªç©ºç™½é¡µï¼Œå¯ä»¥åœ¨æŒ‡å®šä½ç½®æ·»åŠ ä¸€ä¸ªæ–°çš„Sectionã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŠ è½½ä¸€ä¸ªç°æœ‰æ–‡æ¡£</span>
Document doc = <span class="hljs-keyword">new</span> Document();
doc.LoadFromFile(<span class="hljs-string">"ExistingDocument.docx"</span>);

<span class="hljs-comment">// å‡è®¾æˆ‘ä»¬æƒ³åœ¨æ–‡æ¡£çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªSectionä¹‹é—´æ’å…¥ä¸€ä¸ªç©ºç™½é¡µ</span>
<span class="hljs-comment">// doc.Sections[0] æ˜¯ç¬¬ä¸€ä¸ªSection</span>
<span class="hljs-comment">// doc.Sections[1] æ˜¯ç¬¬äºŒä¸ªSection (å¦‚æœå­˜åœ¨)</span>

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºç™½Section</span>
Section newSection = doc.AddSection();
<span class="hljs-comment">// åœ¨æŒ‡å®šçš„ç´¢å¼•ä½ç½®æ’å…¥æ–°Section</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼Œåœ¨ç´¢å¼•1å¤„æ’å…¥ï¼Œå³åœ¨ç¬¬ä¸€ä¸ªSectionä¹‹å</span>
doc.Sections.Insert(<span class="hljs-number">1</span>, newSection); 

<span class="hljs-comment">// å¯ä»¥é€‰æ‹©æ€§åœ°å‘æ–°æ’å…¥çš„é¡µé¢æ·»åŠ å†…å®¹</span>
Paragraph insertedPara = newSection.AddParagraph();
insertedPara.AppendText(<span class="hljs-string">"è¿™æ˜¯æ’å…¥çš„ç©ºç™½é¡µå†…å®¹ã€‚"</span>);

<span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
doc.SaveToFile(<span class="hljs-string">"InsertPage.docx"</span>, FileFormat.Docx);
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> æ’å…¥é¡µé¢å¯èƒ½ä¼šå½±å“æ–‡æ¡£çš„æ•´ä½“å¸ƒå±€å’Œé¡µç ã€‚å¦‚æœéœ€è¦ä»å¦ä¸€ä¸ªæ–‡æ¡£å¯¼å…¥å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨<code>Section.AddParagraph().AppendDocument(sourceDocument, sourceRange)</code>ç­‰æ–¹æ³•ã€‚</p>
<h4 data-id="heading-5">2.3 åˆ é™¤é¡µé¢</h4>
<p><strong>åœºæ™¯ï¼š</strong> å½“ä½ éœ€è¦ç§»é™¤å†—ä½™å†…å®¹ã€æ ¹æ®ç‰¹å®šæ¡ä»¶åˆ é™¤æŸäº›é¡µé¢ï¼ˆå¦‚ç©ºé¡µé¢æˆ–åŒ…å«ç‰¹å®šæ°´å°çš„é¡µé¢ï¼‰æ—¶ï¼Œåˆ é™¤é¡µé¢åŠŸèƒ½å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ¸…ç†æ–‡æ¡£ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong>
åˆ é™¤é¡µé¢é€šå¸¸æ˜¯é€šè¿‡åˆ é™¤åŒ…å«è¿™äº›é¡µé¢çš„Sectionæ¥å®ç°çš„ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŠ è½½ä¸€ä¸ªç°æœ‰æ–‡æ¡£</span>
Document doc = <span class="hljs-keyword">new</span> Document();
doc.LoadFromFile(<span class="hljs-string">"DocumentToDeletePages.docx"</span>);

<span class="hljs-comment">// å‡è®¾æˆ‘ä»¬è¦åˆ é™¤æ–‡æ¡£ä¸­çš„ç¬¬äºŒä¸ªSectionï¼ˆå¯¹åº”ç¬¬äºŒé¡µï¼‰</span>
<span class="hljs-keyword">if</span> (doc.Sections.Count &gt; <span class="hljs-number">1</span>)
{
    doc.Sections.RemoveAt(<span class="hljs-number">1</span>); <span class="hljs-comment">// ç´¢å¼•ä»0å¼€å§‹</span>
}

<span class="hljs-comment">// å¦‚æœè¦åˆ é™¤å¤šä¸ªé¡µé¢ï¼Œå¯ä»¥å¾ªç¯åˆ é™¤å¯¹åº”çš„Section</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼šåˆ é™¤ä»ç¬¬ä¸‰é¡µåˆ°ç¬¬äº”é¡µï¼ˆå³ç´¢å¼•2åˆ°4çš„Sectionï¼‰</span>
<span class="hljs-comment">// æ³¨æ„ï¼šæ¯æ¬¡åˆ é™¤åé›†åˆçš„ç´¢å¼•ä¼šå˜åŒ–ï¼Œæœ€å¥½ä»åå¾€å‰åˆ é™¤æˆ–è®°å½•åŸå§‹ç´¢å¼•</span>
<span class="hljs-comment">/*
for (int i = 4; i &gt;= 2; i--) 
{
    if (doc.Sections.Count &gt; i)
    {
        doc.Sections.RemoveAt(i);
    }
}
*/</span>

<span class="hljs-comment">// ä¿å­˜ä¿®æ”¹åçš„æ–‡æ¡£</span>
doc.SaveToFile(<span class="hljs-string">"DeletedPages.docx"</span>, FileFormat.Docx);
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> åˆ é™¤æ“ä½œæ˜¯ä¸å¯é€†çš„ï¼Œåœ¨æ‰§è¡Œåˆ é™¤å‰åŠ¡å¿…å¤‡ä»½åŸå§‹æ–‡æ¡£ã€‚ç†è§£Wordæ–‡æ¡£ä¸­â€œé¡µâ€å’Œâ€œèŠ‚(Section)â€çš„å…³ç³»éå¸¸é‡è¦ï¼Œé€šå¸¸ä¸€ä¸ªèŠ‚å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªé¡µé¢ï¼Œåˆ é™¤èŠ‚ä¼šåˆ é™¤å…¶åŒ…å«çš„æ‰€æœ‰é¡µé¢ã€‚</p>
<p><strong>æ“ä½œå¯¹æ¯”é€Ÿè§ˆï¼š</strong></p>





























<table><thead><tr><th>æ“ä½œç±»å‹</th><th>ä¸»è¦API/æ–¹æ³•</th><th>åº”ç”¨åœºæ™¯</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>æ·»åŠ é¡µé¢</strong></td><td><code>Document.AddSection()</code></td><td>æ–‡æ¡£æœ«å°¾è¿½åŠ å†…å®¹ã€åˆ›å»ºæ–°ç« èŠ‚</td><td>æ–°å¢Sectioné»˜è®¤æ–°èµ·ä¸€é¡µ</td></tr><tr><td><strong>æ’å…¥é¡µé¢</strong></td><td><code>Document.Sections.Insert(index, section)</code></td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥ç©ºç™½é¡µ/å†…å®¹</td><td>éœ€è¦åˆ›å»ºæ–°çš„Sectionå¯¹è±¡</td></tr><tr><td><strong>åˆ é™¤é¡µé¢</strong></td><td><code>Document.Sections.RemoveAt(index)</code></td><td>ç§»é™¤æŒ‡å®šé¡µç èŒƒå›´çš„å†…å®¹</td><td>éœ€æ³¨æ„Wordâ€œé¡µâ€ä¸â€œèŠ‚â€çš„å…³ç³»</td></tr></tbody></table>
<h3 data-id="heading-6">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong> å¯¹äºå¤„ç†å¤§å‹Wordæ–‡æ¡£ï¼Œé¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹åœ°åŠ è½½å’Œä¿å­˜æ–‡æ¡£ã€‚å¯ä»¥å°è¯•ä¸€æ¬¡æ€§åŠ è½½ï¼Œæ‰¹é‡å¤„ç†ï¼Œæœ€åç»Ÿä¸€ä¿å­˜ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†ï¼š</strong> å§‹ç»ˆå°†æ–‡æ¡£æ“ä½œä»£ç æ”¾ç½®åœ¨<code>try-catch</code>å—ä¸­ï¼Œæ•è·å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€æƒé™ä¸è¶³ç­‰ï¼‰ï¼Œæé«˜ç¨‹åºçš„å¥å£®æ€§ã€‚</li>
<li><strong>æ ¼å¼ä¿æŒï¼š</strong> åœ¨è¿›è¡Œé¡µé¢æ“ä½œæ—¶ï¼Œå°¤å…¶æ˜¯æ’å…¥æˆ–åˆ é™¤åŒ…å«å¤æ‚æ ¼å¼çš„é¡µé¢æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„å¯¹æ–‡æ¡£åŸæœ‰æ ¼å¼çš„å½±å“ã€‚<code>Spire.Doc</code>é€šå¸¸ä¼šå°½åŠ›ä¿æŒæ ¼å¼ï¼Œä½†ä»éœ€è¿›è¡ŒéªŒè¯ã€‚</li>
<li><strong>è®¸å¯è¯è¯´æ˜ï¼š</strong> <code>Spire.Doc for .NET</code>æä¾›å…è´¹ç‰ˆå’Œå•†ä¸šç‰ˆã€‚å…è´¹ç‰ˆåœ¨ä½¿ç”¨ä¸Šä¼šæœ‰ä¸€äº›é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œæ¯ä¸ªæ–‡æ¡£æœ€å¤šåªèƒ½å¤„ç†500æ®µè½å’Œ50ä¸ªè¡¨æ ¼ï¼‰ï¼Œå¯¹äºä¸ªäººå­¦ä¹ å’Œå°å‹é¡¹ç›®å¯èƒ½è¶³å¤Ÿï¼Œä½†å¯¹äºå¤§å‹ä¼ä¸šçº§åº”ç”¨æˆ–éœ€è¦å¤„ç†å¤§æ–‡æ¡£çš„åœºæ™¯ï¼Œå»ºè®®è´­ä¹°å•†ä¸šè®¸å¯è¯ä»¥è·å¾—å®Œæ•´åŠŸèƒ½å’ŒæŠ€æœ¯æ”¯æŒã€‚</li>
</ul>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è®²è§£å’Œä»£ç ç¤ºä¾‹ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†å¦‚ä½•åˆ©ç”¨ <code>Spire.Doc for .NET</code> åº“åœ¨ C# ä¸­å®ç° Word æ–‡æ¡£çš„é¡µé¢æ·»åŠ ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚è¿™æ¬¾å¼ºå¤§çš„ .NET åº“æå¤§åœ°ç®€åŒ–äº† Word æ–‡æ¡£è‡ªåŠ¨åŒ–çš„å¤æ‚æ€§ï¼Œè®©ä½ å¯ä»¥é€šè¿‡ç¼–ç¨‹è½»æ¾å®ç°å¤æ‚çš„é¡µé¢æ“ä½œä»»åŠ¡ã€‚</p>
<p>å‘Šåˆ«æ‰‹åŠ¨æ“ä½œçš„ä½æ•ˆå’Œæ˜“é”™ï¼Œæ‹¥æŠ±è‡ªåŠ¨åŒ–çš„ç²¾å‡†å’Œé«˜æ•ˆï¼ç°åœ¨å°±åŠ¨æ‰‹å°è¯•æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•ï¼Œå°†å…¶åº”ç”¨åˆ°ä½ çš„é¡¹ç›®ä¸­å§ã€‚æ— è®ºæ˜¯æ‰¹é‡æŠ¥å‘Šå¤„ç†ã€åˆåŒç”Ÿæˆè¿˜æ˜¯å…¶ä»–æ–‡æ¡£ç®¡ç†åœºæ™¯ï¼Œ<code>Spire.Doc for .NET</code>éƒ½å°†æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>